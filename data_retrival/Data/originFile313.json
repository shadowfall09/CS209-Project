{"items":[{"tags":["java","spring","rest","spring-data-jpa","spring-repositories"],"answers":[{"tags":[],"owner":{"account_id":17228781,"reputation":3548,"user_id":12473843,"display_name":"Sergey Tsypanov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683011363,"creation_date":1683011363,"answer_id":76152497,"question_id":76150808,"body_markdown":"Your interface should be declared as \r\n```java\r\n@NoRepositoryBean\r\npublic interface VerifyingRepo&lt;T, ID&gt; extends JpaRepository&lt;T, ID&gt; {\r\n    @Override\r\n    &lt;S extends T&gt; S save(S s);\r\n}\r\n```","title":"Spring data doesn&#39;t add fragment to repository","body":"<p>Your interface should be declared as</p>\n<pre class=\"lang-java prettyprint-override\"><code>@NoRepositoryBean\npublic interface VerifyingRepo&lt;T, ID&gt; extends JpaRepository&lt;T, ID&gt; {\n    @Override\n    &lt;S extends T&gt; S save(S s);\n}\n</code></pre>\n"}],"owner":{"account_id":3092145,"reputation":330,"user_id":2618056,"accept_rate":75,"display_name":"ba3a"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1689180439,"creation_date":1682984055,"question_id":76150808,"body_markdown":"I have a Spring repository that I try to customize. I use fragments because I need a spring bean wired to perform my logic.\r\n\r\nHere is the interface I&#39;m using to override the standard logic:\r\n```\r\n@NoRepositoryBean\r\npublic interface VerifyingRepo&lt;T, ID&gt; extends CrudRepository&lt;T, ID&gt;, PagingAndSortingRepository&lt;T, ID&gt; {\r\n    @Override\r\n    &lt;S extends T&gt; S save(S s);\r\n}\r\n```\r\nHere is its implementation:\r\n```\r\npublic class VerifyingRepoImpl&lt;T, ID&gt; extends SimpleJpaRepository&lt;T, ID&gt; implements VerifyingRepo&lt;T, ID&gt; {\r\n    private final MyBean myBean;\r\n\r\n    public VerifyingRepoImpl(MyBean myBean, JpaEntityInformation&lt;T, ?&gt; entityInformation, EntityManager em) {\r\n        super(entityInformation, em);\r\n        this.myBean= myBean;\r\n    }\r\n\r\n    @Override\r\n    @Transactional\r\n    public &lt;S extends T&gt; S save(S entity) {\r\n        myBean.customLogic(entity);\r\n        return super.save(entity);\r\n    }\r\n}\r\n```\r\nHere is my repository I&#39;m trying to use:\r\n```\r\n@RepositoryRestResource\r\npublic interface MyRepo extends VerifyingRepo&lt;MyEntity, Long&gt; {\r\n}\r\n```\r\nI expect my custom logic to fire when I&#39;m invoking the `save()` method of `MyRepo` (when I&#39;m posting a dto to it&#39;s representing path). However, Spring instantiates `MyRepo` as `SimpleJpaRepository` and invokes only it&#39;s `save()`\r\n\r\nWhy doesn&#39;t Spring add the fragment with my custom `save()` to the resulting repository instance? It doesn&#39;t even instantiate my class.","title":"Spring data doesn&#39;t add fragment to repository","body":"<p>I have a Spring repository that I try to customize. I use fragments because I need a spring bean wired to perform my logic.</p>\n<p>Here is the interface I'm using to override the standard logic:</p>\n<pre><code>@NoRepositoryBean\npublic interface VerifyingRepo&lt;T, ID&gt; extends CrudRepository&lt;T, ID&gt;, PagingAndSortingRepository&lt;T, ID&gt; {\n    @Override\n    &lt;S extends T&gt; S save(S s);\n}\n</code></pre>\n<p>Here is its implementation:</p>\n<pre><code>public class VerifyingRepoImpl&lt;T, ID&gt; extends SimpleJpaRepository&lt;T, ID&gt; implements VerifyingRepo&lt;T, ID&gt; {\n    private final MyBean myBean;\n\n    public VerifyingRepoImpl(MyBean myBean, JpaEntityInformation&lt;T, ?&gt; entityInformation, EntityManager em) {\n        super(entityInformation, em);\n        this.myBean= myBean;\n    }\n\n    @Override\n    @Transactional\n    public &lt;S extends T&gt; S save(S entity) {\n        myBean.customLogic(entity);\n        return super.save(entity);\n    }\n}\n</code></pre>\n<p>Here is my repository I'm trying to use:</p>\n<pre><code>@RepositoryRestResource\npublic interface MyRepo extends VerifyingRepo&lt;MyEntity, Long&gt; {\n}\n</code></pre>\n<p>I expect my custom logic to fire when I'm invoking the <code>save()</code> method of <code>MyRepo</code> (when I'm posting a dto to it's representing path). However, Spring instantiates <code>MyRepo</code> as <code>SimpleJpaRepository</code> and invokes only it's <code>save()</code></p>\n<p>Why doesn't Spring add the fragment with my custom <code>save()</code> to the resulting repository instance? It doesn't even instantiate my class.</p>\n"},{"tags":["java","exception"],"comments":[{"owner":{"account_id":2177522,"reputation":120796,"user_id":1927832,"accept_rate":49,"display_name":"Suresh Atta"},"score":2,"creation_date":1440401827,"post_id":32176702,"comment_id":52239292,"body_markdown":"Yes, the answer is `depends`","body":"Yes, the answer is <code>depends</code>"}],"answers":[{"tags":[],"owner":{"account_id":4211407,"reputation":216,"user_id":3448985,"accept_rate":100,"display_name":"Krishnat Molawade"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1440402761,"creation_date":1440402761,"answer_id":32177031,"question_id":32176702,"body_markdown":"In any system not handling exceptions is not a good idea. \r\n\r\nIf you want centralized exception handling then\r\nyou can throw exceptions from multiple parts of application and handle in centralized class/controller\r\n in such cases you can use\r\n\r\n    try{\r\n    } catch(Exception e){\r\n        throw new RuntimeException(&quot;...&quot;)\r\n    }\r\n\r\nin catch you can have custom exception classes with proper message and all\r\n\r\nIf you want handle exceptions right away then you can try\r\n\r\n        try{\r\n    \r\n    } catch(Exception e){\r\n        log.error(&quot;..&quot;)\r\n        return someresult;// -1, empty list or others\r\n    }\r\n\r\nfor e.g. if exception comes in try block you will be returning false otherwise true. Or null or blank message depends on implementation.\r\n\r\nwhen you are re-throwing exception you can use finally to close resultsets/ open stream etc which is good practise","title":"DBUtil - Return error code, msg or throw exception","body":"<p>In any system not handling exceptions is not a good idea. </p>\n\n<p>If you want centralized exception handling then\nyou can throw exceptions from multiple parts of application and handle in centralized class/controller\n in such cases you can use</p>\n\n<pre><code>try{\n} catch(Exception e){\n    throw new RuntimeException(\"...\")\n}\n</code></pre>\n\n<p>in catch you can have custom exception classes with proper message and all</p>\n\n<p>If you want handle exceptions right away then you can try</p>\n\n<pre><code>    try{\n\n} catch(Exception e){\n    log.error(\"..\")\n    return someresult;// -1, empty list or others\n}\n</code></pre>\n\n<p>for e.g. if exception comes in try block you will be returning false otherwise true. Or null or blank message depends on implementation.</p>\n\n<p>when you are re-throwing exception you can use finally to close resultsets/ open stream etc which is good practise</p>\n"},{"tags":[],"owner":{"account_id":6183221,"reputation":494,"user_id":4818048,"display_name":"Niketh Sudhakaran"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1468481670,"creation_date":1468481670,"answer_id":38368178,"question_id":32176702,"body_markdown":"I think the best way is to create a custom exception class for your application. \r\nHandle all your exception in one custom class. And handling method inside this class for all the exceptions occurred.\r\n\r\n    class CustomExc extends Exception{  \r\n     CustomExc(String s){  \r\n      super(s);  \r\n     }  \r\n    }  \r\n\r\n","title":"DBUtil - Return error code, msg or throw exception","body":"<p>I think the best way is to create a custom exception class for your application. \nHandle all your exception in one custom class. And handling method inside this class for all the exceptions occurred.</p>\n\n<pre><code>class CustomExc extends Exception{  \n CustomExc(String s){  \n  super(s);  \n }  \n}  \n</code></pre>\n"}],"owner":{"account_id":4231547,"reputation":5,"user_id":3463752,"display_name":"aspire丶la"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2355,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":32177031,"answer_count":2,"score":0,"last_activity_date":1689180338,"creation_date":1440401629,"question_id":32176702,"body_markdown":" I have a DBUtil class for jdbc,  some method like query, insert and update, when   some errors occur, we throw a RuntimeException now, but I have some questions.\r\n When error occor, if I don&#39;t use try catch block to handle exception, I can&#39;t define whether it was succeed or not in code, so I can&#39;t do other things using the result, and controller will have no response rather than 500 error.\r\n\r\n1:\r\n\r\n    try{\r\n    \t\r\n    } catch(Exception e){\r\n    \tthrow new RuntimeException(&quot;...&quot;)\r\n    }\r\n\r\n2:\r\n\r\n    try{\r\n    \t\r\n    } catch(Exception e){\r\n    \tlog.error(&quot;..&quot;)\r\n    \treturn someresult;// -1, empty list or others\r\n    }\r\n\r\nso, which is better in code?\r\nThanks!","title":"DBUtil - Return error code, msg or throw exception","body":"<p>I have a DBUtil class for jdbc,  some method like query, insert and update, when   some errors occur, we throw a RuntimeException now, but I have some questions.\n When error occor, if I don't use try catch block to handle exception, I can't define whether it was succeed or not in code, so I can't do other things using the result, and controller will have no response rather than 500 error.</p>\n\n<p>1:</p>\n\n<pre><code>try{\n\n} catch(Exception e){\n    throw new RuntimeException(\"...\")\n}\n</code></pre>\n\n<p>2:</p>\n\n<pre><code>try{\n\n} catch(Exception e){\n    log.error(\"..\")\n    return someresult;// -1, empty list or others\n}\n</code></pre>\n\n<p>so, which is better in code?\nThanks!</p>\n"},{"tags":["java","generics","methods"],"answers":[{"tags":[],"owner":{"account_id":22394789,"reputation":1382,"user_id":16606223,"display_name":"Yahor Barkouski"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689179881,"creation_date":1689179881,"answer_id":76672780,"question_id":76672503,"body_markdown":"Yes, Java&#39;s type erasure makes it impossible to infer the generic type at runtime without explicitly passing the class. More formal: \r\n&gt; the generic type information is not retained at runtime due to type erasure, which removes all generic type information, replacing it with their bounds or with `Object` if the type parameters are unbounded.\r\n\r\nSo the typical way to handle this problem is indeed to pass the `Class` object of the desired return type to the method, let&#39;s try to create something for String-&gt;Integer for example:\r\n```java\r\nabstract class Converter {\r\n\r\n    public static &lt;TInto, TFrom&gt; TInto convertDataTypes(TFrom from, Class&lt;TInto&gt; intoClass) {\r\n        TInto into = null;\r\n\r\n        if (intoClass == String.class &amp;&amp; from instanceof Integer) {\r\n            into = intoClass.cast(Integer.toString((Integer) from));\r\n        } else if (intoClass == Integer.class &amp;&amp; from instanceof String) {\r\n            into = intoClass.cast(Integer.parseInt((String) from));\r\n        }\r\n        // maybe you&#39;ll have more converters here, depending on the given types\r\n\r\n        return into;\r\n    }\r\n}\r\n```\r\nUsage:\r\n```java\r\nInteger i = Converter.convertDataTypes(&quot;41&quot;, Integer.class);\r\nString s = Converter.convertDataTypes(41, String.class);\r\n```","title":"Java Generic Methods get Class from Returntype","body":"<p>Yes, Java's type erasure makes it impossible to infer the generic type at runtime without explicitly passing the class. More formal:</p>\n<blockquote>\n<p>the generic type information is not retained at runtime due to type erasure, which removes all generic type information, replacing it with their bounds or with <code>Object</code> if the type parameters are unbounded.</p>\n</blockquote>\n<p>So the typical way to handle this problem is indeed to pass the <code>Class</code> object of the desired return type to the method, let's try to create something for String-&gt;Integer for example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>abstract class Converter {\n\n    public static &lt;TInto, TFrom&gt; TInto convertDataTypes(TFrom from, Class&lt;TInto&gt; intoClass) {\n        TInto into = null;\n\n        if (intoClass == String.class &amp;&amp; from instanceof Integer) {\n            into = intoClass.cast(Integer.toString((Integer) from));\n        } else if (intoClass == Integer.class &amp;&amp; from instanceof String) {\n            into = intoClass.cast(Integer.parseInt((String) from));\n        }\n        // maybe you'll have more converters here, depending on the given types\n\n        return into;\n    }\n}\n</code></pre>\n<p>Usage:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Integer i = Converter.convertDataTypes(&quot;41&quot;, Integer.class);\nString s = Converter.convertDataTypes(41, String.class);\n</code></pre>\n"}],"owner":{"account_id":27070897,"reputation":25,"user_id":20621559,"display_name":"FelixFeuerdorn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76672780,"answer_count":1,"score":1,"last_activity_date":1689179881,"creation_date":1689177854,"question_id":76672503,"body_markdown":"I would like to create a mapper that reads the individual variables with the specification of two entity classes and passes the various data types (with content) to a converter, which then returns the data under various conditions.\r\nMy problem is that I am not yet 100% familiar with Java Generics and therefore need help how to determine the return types in the best possible/standardized way. \r\n\r\nAs far as I found out, I have to define a generic class or pass the class to the generic method, that should be correct, right? Because I had already tried to define a generic method without passing the class as a parameter and to determine the type from this is not supposed to work in Java.\r\n\r\nCould you maybe show me an example, how a generic method determines the return type, if a generic class is available?\r\n\r\n```\r\npublic abstract class Converter{\r\n    public static &lt;TInto, TFrom&gt; TInto convertDataTypes(TFrom from){\r\n        TInto into = null;\r\n        /* My Try \r\n        Class&lt;?&gt; intoClass = (Class&lt;?&gt;) ((java.lang.reflect.ParameterizedType Converter.class.getDeclaredMethods()[0]\r\n                .getGenericReturnType()).getActualTypeArguments()[0];\r\n\r\n        into = (TInto) intoClass.getDeclaredConstructor().newInstance();\r\n        */\r\n        // TODO: init into;\r\n        // TODO: get into class\r\n        return into;\r\n    }\r\n}\r\n```\r\n\r\nI also tried with the simple &#39;Type&#39;, because ParameterizedType throws an exception, but then &#39;getActualTypeArguments&#39; doesn&#39;t work, or I still don&#39;t get the correct type (Boolean) that I want...\r\n\r\nWhat I also didn&#39;t quite understand is why even if I specify the generic types, so when I call the generic method it doesn&#39;t recognize what I attach to the method.\r\nFunction call simply as Example:\r\n\r\n```\r\nBoolean b = Converter.&lt;Boolean,String&gt;convertDataTypes(&quot;true&quot;);\r\n```","title":"Java Generic Methods get Class from Returntype","body":"<p>I would like to create a mapper that reads the individual variables with the specification of two entity classes and passes the various data types (with content) to a converter, which then returns the data under various conditions.\nMy problem is that I am not yet 100% familiar with Java Generics and therefore need help how to determine the return types in the best possible/standardized way.</p>\n<p>As far as I found out, I have to define a generic class or pass the class to the generic method, that should be correct, right? Because I had already tried to define a generic method without passing the class as a parameter and to determine the type from this is not supposed to work in Java.</p>\n<p>Could you maybe show me an example, how a generic method determines the return type, if a generic class is available?</p>\n<pre><code>public abstract class Converter{\n    public static &lt;TInto, TFrom&gt; TInto convertDataTypes(TFrom from){\n        TInto into = null;\n        /* My Try \n        Class&lt;?&gt; intoClass = (Class&lt;?&gt;) ((java.lang.reflect.ParameterizedType Converter.class.getDeclaredMethods()[0]\n                .getGenericReturnType()).getActualTypeArguments()[0];\n\n        into = (TInto) intoClass.getDeclaredConstructor().newInstance();\n        */\n        // TODO: init into;\n        // TODO: get into class\n        return into;\n    }\n}\n</code></pre>\n<p>I also tried with the simple 'Type', because ParameterizedType throws an exception, but then 'getActualTypeArguments' doesn't work, or I still don't get the correct type (Boolean) that I want...</p>\n<p>What I also didn't quite understand is why even if I specify the generic types, so when I call the generic method it doesn't recognize what I attach to the method.\nFunction call simply as Example:</p>\n<pre><code>Boolean b = Converter.&lt;Boolean,String&gt;convertDataTypes(&quot;true&quot;);\n</code></pre>\n"},{"tags":["java","networking","network-programming","httpurlconnection","urlconnection"],"comments":[{"owner":{"account_id":22394789,"reputation":1382,"user_id":16606223,"display_name":"Yahor Barkouski"},"score":0,"creation_date":1689180193,"post_id":76672701,"comment_id":135178054,"body_markdown":"I guess the issue here is that you write data to the output stream of the connection, but you do not close the output stream, so your POST request is not being finalized","body":"I guess the issue here is that you write data to the output stream of the connection, but you do not close the output stream, so your POST request is not being finalized"},{"owner":{"account_id":270025,"reputation":6187,"user_id":3649629,"accept_rate":67,"display_name":"Gleichmut"},"score":0,"creation_date":1689222333,"post_id":76672701,"comment_id":135183369,"body_markdown":"Not, it is not an issue. To confirm end of writing ```flush()``` call is used, server should receive data, but it is not happened.","body":"Not, it is not an issue. To confirm end of writing <code>flush()</code> call is used, server should receive data, but it is not happened."}],"owner":{"account_id":270025,"reputation":6187,"user_id":3649629,"accept_rate":67,"display_name":"Gleichmut"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689179275,"creation_date":1689179275,"question_id":76672701,"body_markdown":"I am working on custom ```gradle``` plugin which trigger API ```POST``` call. There is no many option for networking from ```gradle``` and ```UrlConnection``` looks as a best tool. I am able to trigger GET API call, but can not do it for POST. \r\n\r\nHere is my client code from gradle plugin:\r\n```\r\ninterface SwapTestPluginExtension {\r\n    val backEndEndpoint: Property&lt;String&gt;\r\n}\r\n\r\nclass SwapTestPlugin: Plugin&lt;Project&gt; {\r\n    override fun apply(target: Project) {\r\n\r\n        val extension = target.extensions.create(&quot;swapTest&quot;, SwapTestPluginExtension::class.java)\r\n        target.task(&quot;prepareTestEnvironment&quot;) {\r\n            doLast {\r\n                try {\r\n                    println(&quot;[start] ${SwapTestPlugin::class.simpleName}&quot;)\r\n                    executePostApiCall(extension)\r\n                } catch (ex: Exception) {\r\n                    println(&quot;Something whent wrong in ${SwapTestPlugin::class.simpleName} with exception ${ex}&quot;)\r\n                } finally {\r\n                    println(&quot;[end] ${SwapTestPlugin::class.simpleName}&quot;)\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private fun executePostApiCall(extension: SwapTestPluginExtension) {\r\n        val credentials = &quot;{\\&quot;name\\&quot;: \\&quot;\\&quot;, \\&quot;pwd\\&quot; : \\&quot;\\&quot;}&quot;\r\n        val req = URL(&quot;${extension.backEndEndpoint.get()}/test/environment&quot;).openConnection() as HttpURLConnection\r\n        req.setRequestMethod(&quot;POST&quot;)\r\n        req.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json; charset=UTF-8&quot;)\r\n        req.setRequestProperty(&quot;Accept&quot;, &quot;*/*&quot;);\r\n        req.setDoOutput(true)\r\n        println(&quot;[swap-test-plugin] prepare to call API&quot;)\r\n        req.getOutputStream().write(JsonOutput.toJson(credentials).toByteArray(Charsets.UTF_8)/*.getBytes(&quot;UTF-8&quot;)*/)\r\n        req.outputStream.flush()\r\n        println(&quot;[swap-test-plugin] API has been called, going to read results&quot;)\r\n        val br = BufferedReader(InputStreamReader(req.inputStream, Charsets.UTF_8.name()))\r\n        val response = StringBuilder()\r\n        var responseLine: String? = null\r\n        while (br.readLine().also { responseLine = it } != null) {\r\n            response.append(responseLine!!.trim { it &lt;= &#39; &#39; })\r\n        }\r\n        println(&quot;[swap-test-plugin] prepare to parse result&quot;)\r\n        val json = JsonSlurper().parseText(response.toString())\r\n        println(&quot;[json] ${json}&quot;)\r\n    }\r\n\r\n}\r\n``` \r\nHere is stubs for API methods on the backend: \r\n```\r\ncontrollers/test.js\r\n\r\nconst config = require(&#39;config&#39;);\r\nconst network = require(&#39;../utils/network&#39;)\r\nconst logger = require(&#39;../utils/logger&#39;)\r\n\r\nexports.setEnvironment = async function(req, res) { \r\n    logger.log(&quot;[start] /test/environment call&quot;);\r\n    let result\r\n    if (config.isProduction) {\r\n        result = network.getErrorMsg(501, &quot;This method is only supported for non-production mode for test purposes.&quot;)\r\n    } else {\r\n        // TODO clean up database if it is a debug mode\r\n        result = network.getMsg(200, JSON.stringify({&quot;msg&quot; : &quot;just a stub&quot;}));\r\n    }\r\n    logger.log(`[end] response ${JSON.stringify(result)}`)\r\n    network.send(req, res, result);\r\n}\r\n\r\nroutes/index.js\r\n...\r\nrouter.post(&#39;/api/v1/test/environment&#39;, tests.setEnvironment);\r\n...\r\n```\r\n\r\nWireshark shows an POST request happens, but there is not activity on the server - it looks like it never reaches. The similar GET request works fine. [Here is a source code][1] of the backend in case you would like to copy-paste this block of code and reproduce. \r\n\r\n```\r\n1589\t960.149964545\t127.0.0.1\t127.0.0.1\tHTTP/JSON\t100\tPOST /api/v1/test/environment HTTP/1.1 , JavaScript Object Notation (application/json)\r\n1590\t960.149967554\t127.0.0.1\t127.0.0.1\tTCP\t66\t3100 → 50170 [ACK] Seq=1 Ack=262 Win=65280 Len=0 TSval=3277455079 TSecr=3277455079\r\n```\r\n\r\nDo you notice cause of this issue? \r\n\r\n  [1]: https://github.com/Gelassen/swap/tree/main/server","title":"HttpUrlConnection hangs out on POST request","body":"<p>I am working on custom <code>gradle</code> plugin which trigger API <code>POST</code> call. There is no many option for networking from <code>gradle</code> and <code>UrlConnection</code> looks as a best tool. I am able to trigger GET API call, but can not do it for POST.</p>\n<p>Here is my client code from gradle plugin:</p>\n<pre><code>interface SwapTestPluginExtension {\n    val backEndEndpoint: Property&lt;String&gt;\n}\n\nclass SwapTestPlugin: Plugin&lt;Project&gt; {\n    override fun apply(target: Project) {\n\n        val extension = target.extensions.create(&quot;swapTest&quot;, SwapTestPluginExtension::class.java)\n        target.task(&quot;prepareTestEnvironment&quot;) {\n            doLast {\n                try {\n                    println(&quot;[start] ${SwapTestPlugin::class.simpleName}&quot;)\n                    executePostApiCall(extension)\n                } catch (ex: Exception) {\n                    println(&quot;Something whent wrong in ${SwapTestPlugin::class.simpleName} with exception ${ex}&quot;)\n                } finally {\n                    println(&quot;[end] ${SwapTestPlugin::class.simpleName}&quot;)\n                }\n            }\n        }\n    }\n\n    private fun executePostApiCall(extension: SwapTestPluginExtension) {\n        val credentials = &quot;{\\&quot;name\\&quot;: \\&quot;\\&quot;, \\&quot;pwd\\&quot; : \\&quot;\\&quot;}&quot;\n        val req = URL(&quot;${extension.backEndEndpoint.get()}/test/environment&quot;).openConnection() as HttpURLConnection\n        req.setRequestMethod(&quot;POST&quot;)\n        req.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json; charset=UTF-8&quot;)\n        req.setRequestProperty(&quot;Accept&quot;, &quot;*/*&quot;);\n        req.setDoOutput(true)\n        println(&quot;[swap-test-plugin] prepare to call API&quot;)\n        req.getOutputStream().write(JsonOutput.toJson(credentials).toByteArray(Charsets.UTF_8)/*.getBytes(&quot;UTF-8&quot;)*/)\n        req.outputStream.flush()\n        println(&quot;[swap-test-plugin] API has been called, going to read results&quot;)\n        val br = BufferedReader(InputStreamReader(req.inputStream, Charsets.UTF_8.name()))\n        val response = StringBuilder()\n        var responseLine: String? = null\n        while (br.readLine().also { responseLine = it } != null) {\n            response.append(responseLine!!.trim { it &lt;= ' ' })\n        }\n        println(&quot;[swap-test-plugin] prepare to parse result&quot;)\n        val json = JsonSlurper().parseText(response.toString())\n        println(&quot;[json] ${json}&quot;)\n    }\n\n}\n</code></pre>\n<p>Here is stubs for API methods on the backend:</p>\n<pre><code>controllers/test.js\n\nconst config = require('config');\nconst network = require('../utils/network')\nconst logger = require('../utils/logger')\n\nexports.setEnvironment = async function(req, res) { \n    logger.log(&quot;[start] /test/environment call&quot;);\n    let result\n    if (config.isProduction) {\n        result = network.getErrorMsg(501, &quot;This method is only supported for non-production mode for test purposes.&quot;)\n    } else {\n        // TODO clean up database if it is a debug mode\n        result = network.getMsg(200, JSON.stringify({&quot;msg&quot; : &quot;just a stub&quot;}));\n    }\n    logger.log(`[end] response ${JSON.stringify(result)}`)\n    network.send(req, res, result);\n}\n\nroutes/index.js\n...\nrouter.post('/api/v1/test/environment', tests.setEnvironment);\n...\n</code></pre>\n<p>Wireshark shows an POST request happens, but there is not activity on the server - it looks like it never reaches. The similar GET request works fine. <a href=\"https://github.com/Gelassen/swap/tree/main/server\" rel=\"nofollow noreferrer\">Here is a source code</a> of the backend in case you would like to copy-paste this block of code and reproduce.</p>\n<pre><code>1589    960.149964545   127.0.0.1   127.0.0.1   HTTP/JSON   100 POST /api/v1/test/environment HTTP/1.1 , JavaScript Object Notation (application/json)\n1590    960.149967554   127.0.0.1   127.0.0.1   TCP 66  3100 → 50170 [ACK] Seq=1 Ack=262 Win=65280 Len=0 TSval=3277455079 TSecr=3277455079\n</code></pre>\n<p>Do you notice cause of this issue?</p>\n"},{"tags":["java","spring-boot","jpa","spring-cloud-config"],"owner":{"account_id":10990612,"reputation":117,"user_id":8074755,"display_name":"raman077"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689179257,"creation_date":1689179257,"question_id":76672697,"body_markdown":"I am trying to run a very basic SpringBoot crud application using an externally hosted server to contain configurations. For this I implemented **PropertySourceLocator** interface. Implementation below\r\n```\r\n\r\n@Component\r\n@Order(0)\r\n\r\nclass CustomHeaderPropertySourceLocator implements PropertySourceLocator {\r\n\tprivate final RestTemplate restTemplate;\r\n\tprivate final HttpHeaders headers;\r\n\tprivate final String configServerUrl;\r\n\t@Autowired\r\n\tprivate ConfigurableEnvironment configurableEnvironment;\r\n\r\n\tpublic CustomHeaderPropertySourceLocator() {\r\n\t\tthis.configServerUrl = &quot;&quot;;\r\n\t\tthis.headers = new HttpHeaders();\r\n\t\tthis.restTemplate = new RestTemplate();\r\n\t}\r\n\r\n\r\n\t@PostConstruct\r\n\tpublic void init() {\r\n\t\tPropertySource&lt;?&gt; customPropertySource = locate(configurableEnvironment);\r\n\t\tconfigurableEnvironment.getPropertySources().addFirst(customPropertySource);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic PropertySource&lt;?&gt; locate(Environment environment) {\r\n\t\ttry {\r\n\t\t\tRestTemplate restTemplate = new RestTemplate();\r\n\t\t\tHttpHeaders headers = new HttpHeaders();\r\n\t\t\tString url = &quot;&quot;;\r\n\r\n\t\t\tHttpEntity&lt;String&gt; requestEntity = new HttpEntity&lt;&gt;(headers);\r\n\r\n\t\t\tResponseEntity&lt;String&gt; response = restTemplate.exchange(url, HttpMethod.GET, requestEntity, String.class);\r\n\r\n            // Logic to handle response\r\n\t\t\tMapPropertySource propertySource = new MapPropertySource(&quot;externalPropertySource&quot;, flatProperties);\r\n\t\t\r\n\t}\r\n``` \r\n\r\nNow all runs well and good till I am not connecting to a database. I am able to fetch the config via @{Value} notation and use it in an API. \r\nBut when I try to connect to a DB, because JPA is being initialised before this happens, I get connection error as it is not able to read the database config properties due to the config not fetched.\r\n\r\nNow this can hamper anything that requires params to be present at runtime. How do I make sure that this runs before anything and works as seamlessly as spring cloud config does?\r\nPlease consider that I can&#39;t use spring cloud config for this.\r\n","title":"Boot Time properties like JPA is not loaded using external hosted configuration (via REST) in springboot application","body":"<p>I am trying to run a very basic SpringBoot crud application using an externally hosted server to contain configurations. For this I implemented <strong>PropertySourceLocator</strong> interface. Implementation below</p>\n<pre><code>\n@Component\n@Order(0)\n\nclass CustomHeaderPropertySourceLocator implements PropertySourceLocator {\n    private final RestTemplate restTemplate;\n    private final HttpHeaders headers;\n    private final String configServerUrl;\n    @Autowired\n    private ConfigurableEnvironment configurableEnvironment;\n\n    public CustomHeaderPropertySourceLocator() {\n        this.configServerUrl = &quot;&quot;;\n        this.headers = new HttpHeaders();\n        this.restTemplate = new RestTemplate();\n    }\n\n\n    @PostConstruct\n    public void init() {\n        PropertySource&lt;?&gt; customPropertySource = locate(configurableEnvironment);\n        configurableEnvironment.getPropertySources().addFirst(customPropertySource);\n    }\n\n    @Override\n    public PropertySource&lt;?&gt; locate(Environment environment) {\n        try {\n            RestTemplate restTemplate = new RestTemplate();\n            HttpHeaders headers = new HttpHeaders();\n            String url = &quot;&quot;;\n\n            HttpEntity&lt;String&gt; requestEntity = new HttpEntity&lt;&gt;(headers);\n\n            ResponseEntity&lt;String&gt; response = restTemplate.exchange(url, HttpMethod.GET, requestEntity, String.class);\n\n            // Logic to handle response\n            MapPropertySource propertySource = new MapPropertySource(&quot;externalPropertySource&quot;, flatProperties);\n        \n    }\n</code></pre>\n<p>Now all runs well and good till I am not connecting to a database. I am able to fetch the config via @{Value} notation and use it in an API.\nBut when I try to connect to a DB, because JPA is being initialised before this happens, I get connection error as it is not able to read the database config properties due to the config not fetched.</p>\n<p>Now this can hamper anything that requires params to be present at runtime. How do I make sure that this runs before anything and works as seamlessly as spring cloud config does?\nPlease consider that I can't use spring cloud config for this.</p>\n"},{"tags":["java","text","types","mime-types"],"comments":[{"owner":{"account_id":108205,"reputation":27809,"user_id":287316,"accept_rate":87,"display_name":"The Student"},"score":0,"creation_date":1284389182,"post_id":3655564,"comment_id":3902664,"body_markdown":"retagged, more tags may help you have more answers.. ;)","body":"retagged, more tags may help you have more answers.. ;)"}],"answers":[{"tags":[],"owner":{"account_id":174580,"reputation":15828,"user_id":404033,"accept_rate":84,"display_name":"William Niu"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1284473175,"creation_date":1284473175,"answer_id":3709626,"question_id":3655564,"body_markdown":"The following links might save you some time:\r\n\r\n - http://help.dottoro.com/lapuadlp.php\r\n - http://www.yolinux.com/TUTORIALS/LinuxTutorialMimeTypesAndApplications.html\r\n - http://www.hansenb.pdx.edu/DMKB/dict/tutorials/mime_typ.php\r\n\r\nAnd here are a couple of links that maps mime types and the file extensions:\r\n\r\n - http://www.webmaster-toolkit.com/mime-types.shtml\r\n - http://www.w3schools.com/media/media_mimeref.asp","title":"Java library or text file that maps mime types to nice human friendly file types","body":"<p>The following links might save you some time:</p>\n\n<ul>\n<li><a href=\"http://help.dottoro.com/lapuadlp.php\" rel=\"nofollow noreferrer\">http://help.dottoro.com/lapuadlp.php</a></li>\n<li><a href=\"http://www.yolinux.com/TUTORIALS/LinuxTutorialMimeTypesAndApplications.html\" rel=\"nofollow noreferrer\">http://www.yolinux.com/TUTORIALS/LinuxTutorialMimeTypesAndApplications.html</a></li>\n<li><a href=\"http://www.hansenb.pdx.edu/DMKB/dict/tutorials/mime_typ.php\" rel=\"nofollow noreferrer\">http://www.hansenb.pdx.edu/DMKB/dict/tutorials/mime_typ.php</a></li>\n</ul>\n\n<p>And here are a couple of links that maps mime types and the file extensions:</p>\n\n<ul>\n<li><a href=\"http://www.webmaster-toolkit.com/mime-types.shtml\" rel=\"nofollow noreferrer\">http://www.webmaster-toolkit.com/mime-types.shtml</a></li>\n<li><a href=\"http://www.w3schools.com/media/media_mimeref.asp\" rel=\"nofollow noreferrer\">http://www.w3schools.com/media/media_mimeref.asp</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":161745,"reputation":49235,"user_id":382763,"accept_rate":92,"display_name":"Thomas Mueller"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1284491237,"creation_date":1284491237,"answer_id":3712079,"question_id":3655564,"body_markdown":"Apache Tika supports [MimeTypes][1]. It also supports [Content Detection][2] by the way if you don&#39;t know the mime type. Anyway, it looks like you need to do:\r\n\r\n    String t = &quot;text/plain&quot;;\r\n    org.apache.tika.mime.MimeTypes.getMimeType(t).getDescription();\r\n\r\nDisclaimer: I didn&#39;t actually try it. Also, I don&#39;t know if it supports all mime types you need.\r\n\r\n  [1]: http://tika.apache.org/0.7/api/org/apache/tika/mime/MimeTypes.html\r\n  [2]: http://tika.apache.org/0.7/detection.html","title":"Java library or text file that maps mime types to nice human friendly file types","body":"<p>Apache Tika supports <a href=\"http://tika.apache.org/0.7/api/org/apache/tika/mime/MimeTypes.html\" rel=\"nofollow noreferrer\">MimeTypes</a>. It also supports <a href=\"http://tika.apache.org/0.7/detection.html\" rel=\"nofollow noreferrer\">Content Detection</a> by the way if you don't know the mime type. Anyway, it looks like you need to do:</p>\n\n<pre><code>String t = \"text/plain\";\norg.apache.tika.mime.MimeTypes.getMimeType(t).getDescription();\n</code></pre>\n\n<p>Disclaimer: I didn't actually try it. Also, I don't know if it supports all mime types you need.</p>\n"},{"tags":[],"owner":{"account_id":9283001,"reputation":3209,"user_id":6893709,"accept_rate":0,"display_name":"Ali Bagheri"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1580142910,"creation_date":1580142910,"answer_id":59935290,"question_id":3655564,"body_markdown":"Use this library\r\n\r\nthis works by files,bytes,...\r\n\r\n\r\nMimeUtil &gt;\r\nhttps://github.com/saces/MimeUtil\r\n\r\nusage:\r\n\r\n    MagicMimeMimeDetector g = new MagicMimeMimeDetector();\r\n\tCollection&lt;MimeType&gt; list =  g.getMimeTypes(file);\r\n\r\n\tif(list.size() &gt; 0)\r\n\t{\r\n\t\tMimeType mime = list.iterator().next();\r\n\t\treturn mime.toString();\r\n\t}","title":"Java library or text file that maps mime types to nice human friendly file types","body":"<p>Use this library</p>\n\n<p>this works by files,bytes,...</p>\n\n<p>MimeUtil >\n<a href=\"https://github.com/saces/MimeUtil\" rel=\"nofollow noreferrer\">https://github.com/saces/MimeUtil</a></p>\n\n<p>usage:</p>\n\n<pre><code>MagicMimeMimeDetector g = new MagicMimeMimeDetector();\nCollection&lt;MimeType&gt; list =  g.getMimeTypes(file);\n\nif(list.size() &gt; 0)\n{\n    MimeType mime = list.iterator().next();\n    return mime.toString();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":45499,"reputation":2923,"user_id":134120,"accept_rate":69,"display_name":"AsGoodAsItGets"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689179173,"creation_date":1689179173,"answer_id":76672687,"question_id":3655564,"body_markdown":"For anyone coming to this in 2023 or later this looks like a more official and definitive resource for the mappings:\r\n\r\nhttps://www.iana.org/assignments/media-types/media-types.xhtml\r\n\r\nHowever, if you&#39;re looking for a Java library, you can&#39;t go wrong with Apache Tika in Java, as already suggested.","title":"Java library or text file that maps mime types to nice human friendly file types","body":"<p>For anyone coming to this in 2023 or later this looks like a more official and definitive resource for the mappings:</p>\n<p><a href=\"https://www.iana.org/assignments/media-types/media-types.xhtml\" rel=\"nofollow noreferrer\">https://www.iana.org/assignments/media-types/media-types.xhtml</a></p>\n<p>However, if you're looking for a Java library, you can't go wrong with Apache Tika in Java, as already suggested.</p>\n"}],"owner":{"account_id":22774,"reputation":18102,"user_id":56524,"accept_rate":45,"display_name":"mP."},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2198,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":3709626,"answer_count":4,"score":5,"last_activity_date":1689179173,"creation_date":1283830254,"question_id":3655564,"body_markdown":"GOAL\r\nMy goal is to find a text file or library that enables me to map when given a mime type input and return a nice human friendly format.\r\n\r\nFor example given the mime type for Word (as shown below) I would like a result that is something like &quot;Microsoft Office Word Document&quot;.\r\n\r\n    application/vnd.openxmlformats-officedocument.wordprocessingml.document\r\n\r\nI realise I could compile my own list and use something like a Map (Java) but then it would not be comprehensive etc.\r\n\r\nSIMPLISTIC OPTION\r\nI know I can examine and return the sub mime type and keep the last component but that is not very sophisticated as per the Word mime type above the result would be a very generic &quot;document&quot;. I could expand and take more components but the result is still quite ugly.\r\n    \r\nKEY/VALUE FILE\r\nAnother option I have tried to find is a text file with key/value pairs where the key is the mime type in full and the value being the nice human friendly text.\r\n\r\n    text/plain=Plain Text File\r\n    application/octet-stream=Unknown binary file\r\n\r\nThis seems like a nice option but I have not been able to find a definitive text file with lots of entries. It would also be nice if a source for just the media( i prefer to call it the primary mime type) the &quot;text&quot; in &quot;text/plain&quot; was present so an unknown text mime type such as &quot;text/unknown a.b.c&quot; would return &quot;Unknown text file/format&quot;.   \r\n","title":"Java library or text file that maps mime types to nice human friendly file types","body":"<p>GOAL\nMy goal is to find a text file or library that enables me to map when given a mime type input and return a nice human friendly format.</p>\n\n<p>For example given the mime type for Word (as shown below) I would like a result that is something like \"Microsoft Office Word Document\".</p>\n\n<pre><code>application/vnd.openxmlformats-officedocument.wordprocessingml.document\n</code></pre>\n\n<p>I realise I could compile my own list and use something like a Map (Java) but then it would not be comprehensive etc.</p>\n\n<p>SIMPLISTIC OPTION\nI know I can examine and return the sub mime type and keep the last component but that is not very sophisticated as per the Word mime type above the result would be a very generic \"document\". I could expand and take more components but the result is still quite ugly.</p>\n\n<p>KEY/VALUE FILE\nAnother option I have tried to find is a text file with key/value pairs where the key is the mime type in full and the value being the nice human friendly text.</p>\n\n<pre><code>text/plain=Plain Text File\napplication/octet-stream=Unknown binary file\n</code></pre>\n\n<p>This seems like a nice option but I have not been able to find a definitive text file with lots of entries. It would also be nice if a source for just the media( i prefer to call it the primary mime type) the \"text\" in \"text/plain\" was present so an unknown text mime type such as \"text/unknown a.b.c\" would return \"Unknown text file/format\".   </p>\n"},{"tags":["java","intellij-idea"],"comments":[{"owner":{"account_id":22394789,"reputation":1382,"user_id":16606223,"display_name":"Yahor Barkouski"},"score":0,"creation_date":1689178942,"post_id":76672547,"comment_id":135177823,"body_markdown":"Consider Invalidate Caches / Restart first, update to the newer version of IntelliJ second, check some custom plugins you&#39;re using third, and finally submit a ticket to IntelliJ Comunity YouTrack here: https://youtrack.jetbrains.com/issues/idea","body":"Consider Invalidate Caches / Restart first, update to the newer version of IntelliJ second, check some custom plugins you&#39;re using third, and finally submit a ticket to IntelliJ Comunity YouTrack here: <a href=\"https://youtrack.jetbrains.com/issues/idea\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issues/idea</a>"}],"answers":[{"tags":[],"owner":{"account_id":36734,"reputation":392117,"user_id":104891,"display_name":"CrazyCoder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689179117,"creation_date":1689179117,"answer_id":76672673,"question_id":76672547,"body_markdown":"Move your files away from the cloud sync managed folder and open the project from the new location. Cloud sync software such as OneDrive and Dropbox can interfere with the file system operations and remove local files to save space (keeping only shortcuts to them and download the files on the fly when you try to access them). IDE is not designed to work with files that are not available offline.","title":"intellij - open files disappear from view while I&#39;m using them","body":"<p>Move your files away from the cloud sync managed folder and open the project from the new location. Cloud sync software such as OneDrive and Dropbox can interfere with the file system operations and remove local files to save space (keeping only shortcuts to them and download the files on the fly when you try to access them). IDE is not designed to work with files that are not available offline.</p>\n"}],"owner":{"account_id":10073835,"reputation":787,"user_id":7446623,"accept_rate":5,"display_name":"apex2022"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":101,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76672673,"answer_count":1,"score":0,"last_activity_date":1689179117,"creation_date":1689178224,"question_id":76672547,"body_markdown":"Not sure if this is a bug or if there&#39;s a setting I need to adjust, so I&#39;m posting this question in case it&#39;s the latter. I just updated my IntelliJ Community Edition to 2022.2.5.\r\n\r\nI have my Java project listed in the Project view (it happens with every project I&#39;ve worked on so far). I&#39;m doing Java work, so I go to the src folder and go through the folders and find a class to work on, say PolicyService.java. I have that open and am looking through it, and may or may not be making changes to it. I then go to my PaymentsService.java and open it, so now I have two classes open and in view (not sure of the name of the window on the screen where you have the file open and are editing them). Then maybe I open a few more (although it happens when I have just one file open also).\r\n\r\nThen suddenly, all the files disappear from the view, and the Project view suddenly collapses all the open folders so it looks like I didn&#39;t open any folders. Just project-name folder, along with the folders on the same level for External Libraries and Scratches and Consoles. \r\n\r\nWhat&#39;s even weirder is what happens to the breadcrumbs in the bar above the Project view and the open file view. It was normal when I had the file open - project-name &gt; src &gt; main &gt; java &gt; com &gt; am &gt; api &gt; appdesk &gt; service &gt; PolicyService &gt; whatever method I was on. But when the file disappears it changes to Sample &gt; sample &gt; sample &gt; sample &gt; sample &gt; sample &gt; sample &gt; sample &gt; sample &gt; sample &gt; (can&#39;t remember what it said in place of the method). It stays like that for a few minutes, and then the breadcrumbs disappear.\r\n\r\nThe other interesting thing is that when I go to open one of the files again, instead of showing the top of the file, the file opens at precisely the point I had it open before it disappears.\r\n\r\nDoes anybody know what&#39;s going on with this? I did a quick Google search on files disappearing from view and didn&#39;t see anything about any bugs. A few of the search results that came up had to do with files actually disappearing from the folders themselves, but that&#39;s not happening here. The files are still there in the folders, they just disappear from the editor view. \r\n\r\nIs this a know bug? Is this potentially a new bug? Is there some new setting I need to change? Is it anything else?\r\n\r\nAny help or input is appreciated.","title":"intellij - open files disappear from view while I&#39;m using them","body":"<p>Not sure if this is a bug or if there's a setting I need to adjust, so I'm posting this question in case it's the latter. I just updated my IntelliJ Community Edition to 2022.2.5.</p>\n<p>I have my Java project listed in the Project view (it happens with every project I've worked on so far). I'm doing Java work, so I go to the src folder and go through the folders and find a class to work on, say PolicyService.java. I have that open and am looking through it, and may or may not be making changes to it. I then go to my PaymentsService.java and open it, so now I have two classes open and in view (not sure of the name of the window on the screen where you have the file open and are editing them). Then maybe I open a few more (although it happens when I have just one file open also).</p>\n<p>Then suddenly, all the files disappear from the view, and the Project view suddenly collapses all the open folders so it looks like I didn't open any folders. Just project-name folder, along with the folders on the same level for External Libraries and Scratches and Consoles.</p>\n<p>What's even weirder is what happens to the breadcrumbs in the bar above the Project view and the open file view. It was normal when I had the file open - project-name &gt; src &gt; main &gt; java &gt; com &gt; am &gt; api &gt; appdesk &gt; service &gt; PolicyService &gt; whatever method I was on. But when the file disappears it changes to Sample &gt; sample &gt; sample &gt; sample &gt; sample &gt; sample &gt; sample &gt; sample &gt; sample &gt; sample &gt; (can't remember what it said in place of the method). It stays like that for a few minutes, and then the breadcrumbs disappear.</p>\n<p>The other interesting thing is that when I go to open one of the files again, instead of showing the top of the file, the file opens at precisely the point I had it open before it disappears.</p>\n<p>Does anybody know what's going on with this? I did a quick Google search on files disappearing from view and didn't see anything about any bugs. A few of the search results that came up had to do with files actually disappearing from the folders themselves, but that's not happening here. The files are still there in the folders, they just disappear from the editor view.</p>\n<p>Is this a know bug? Is this potentially a new bug? Is there some new setting I need to change? Is it anything else?</p>\n<p>Any help or input is appreciated.</p>\n"},{"tags":["java","data-structures","stack","custom-data-type","peek"],"comments":[{"owner":{"display_name":"user6073886"},"score":2,"creation_date":1689176367,"post_id":76672236,"comment_id":135177288,"body_markdown":"Why do you think you need instance variables to achieve the peek method? The peek method is pretty much doing exactly the same as the pop method, returning the element from the front only with the difference that it isn&#39;t removing it. I really don&#39;t see what makes you think &quot;I need to add an instance variable to achieve that!&quot;. If you aren&#39;t allowed to add methods to the List classes a solution would be to call`stackList.removeFromFront()` and save the result of that in a local variable, then readdd that saved local variable via `insertAtFront` and then return it.","body":"Why do you think you need instance variables to achieve the peek method? The peek method is pretty much doing exactly the same as the pop method, returning the element from the front only with the difference that it isn&#39;t removing it. I really don&#39;t see what makes you think &quot;I need to add an instance variable to achieve that!&quot;. If you aren&#39;t allowed to add methods to the List classes a solution would be to call<code>stackList.removeFromFront()</code> and save the result of that in a local variable, then readdd that saved local variable via <code>insertAtFront</code> and then return it."},{"owner":{"account_id":3352154,"reputation":206,"user_id":2815984,"display_name":"Roopesh Payyanath"},"score":0,"creation_date":1689176935,"post_id":76672236,"comment_id":135177411,"body_markdown":"I&#39;m sure you will find few examples on leetcode and hackerrank.\nSimilar to https://leetcode.com/problems/min-stack/description/","body":"I&#39;m sure you will find few examples on leetcode and hackerrank. Similar to <a href=\"https://leetcode.com/problems/min-stack/description/\" rel=\"nofollow noreferrer\">leetcode.com/problems/min-stack/description</a>"},{"owner":{"display_name":"user6073886"},"score":1,"creation_date":1689177036,"post_id":76672236,"comment_id":135177437,"body_markdown":"@RoopeshPayyanath Why would hackerank or leetcode have code that uses some custom classes his teacher/professor has written? I mean sure there are lot&#39;s of existing implementations of a stack data structure, but i really don&#39;t see how this will help in this specific case.","body":"@RoopeshPayyanath Why would hackerank or leetcode have code that uses some custom classes his teacher/professor has written? I mean sure there are lot&#39;s of existing implementations of a stack data structure, but i really don&#39;t see how this will help in this specific case."},{"owner":{"account_id":3352154,"reputation":206,"user_id":2815984,"display_name":"Roopesh Payyanath"},"score":0,"creation_date":1689177666,"post_id":76672236,"comment_id":135177552,"body_markdown":"@OHGODSPIDERS I&#39;m assuming the question is coming from an academic textbook and there should be something similar in the practice question sections of these sites.","body":"@OHGODSPIDERS I&#39;m assuming the question is coming from an academic textbook and there should be something similar in the practice question sections of these sites."},{"owner":{"account_id":26265512,"reputation":3,"user_id":19936114,"display_name":"johnthor"},"score":0,"creation_date":1689179219,"post_id":76672236,"comment_id":135177888,"body_markdown":"I appreciate yall commenting and offering assistance! @OldDogProgrammer I removed his name, but feel like I made my intentions clear - I wasn&#39;t looking for an exact answer but something along the lines of what OHGODSPIDERS was saying (which I appreciate btw). Several people have dropped this class because of the same issues and I am one of the last remaining ones! So again, I appreciate yalls help","body":"I appreciate yall commenting and offering assistance! @OldDogProgrammer I removed his name, but feel like I made my intentions clear - I wasn&#39;t looking for an exact answer but something along the lines of what OHGODSPIDERS was saying (which I appreciate btw). Several people have dropped this class because of the same issues and I am one of the last remaining ones! So again, I appreciate yalls help"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1689179227,"post_id":76672236,"comment_id":135177890,"body_markdown":"I agree with OH GOD SPIDERS.  Let me reinforce that comment:  Is your code for `class List&lt;E&gt;` complete? Does it contain methods you have not shown us? If you have shown all the code, are you allowed or expected to complete `class List &lt;E&gt;`? I ask, because a List should have methods that allow traversal without modifying it. For example, it might have `getHead`, `hasNext`, and `getNext` methods. What you have shown has no such methods: It is not truly a List. If you complete `class List&lt;E&gt;`, your `Stack&lt;T&gt;` problem will be easy to solve.","body":"I agree with OH GOD SPIDERS.  Let me reinforce that comment:  Is your code for <code>class List&lt;E&gt;</code> complete? Does it contain methods you have not shown us? If you have shown all the code, are you allowed or expected to complete <code>class List &lt;E&gt;</code>? I ask, because a List should have methods that allow traversal without modifying it. For example, it might have <code>getHead</code>, <code>hasNext</code>, and <code>getNext</code> methods. What you have shown has no such methods: It is not truly a List. If you complete <code>class List&lt;E&gt;</code>, your <code>Stack&lt;T&gt;</code> problem will be easy to solve."},{"owner":{"account_id":26265512,"reputation":3,"user_id":19936114,"display_name":"johnthor"},"score":0,"creation_date":1689179881,"post_id":76672236,"comment_id":135178010,"body_markdown":"@OldDogProgrammer I&#39;m not allowed to change anything in class List&lt;E&gt;. Trust me, I would&#39;ve solved this issue long ago if I was allowed to change more than just adding a peek method. The whole assignment is an infix to postfix converter, which I have that down. All that&#39;s missing is the peek method which I implemented in my own way, and worked. But the prof said I couldn&#39;t do it that way, and that killed everything for me. Idk why I didn&#39;t think to store it in a variable -_-\n\nStress from the class and overthinking things as usual lol.","body":"@OldDogProgrammer I&#39;m not allowed to change anything in class List&lt;E&gt;. Trust me, I would&#39;ve solved this issue long ago if I was allowed to change more than just adding a peek method. The whole assignment is an infix to postfix converter, which I have that down. All that&#39;s missing is the peek method which I implemented in my own way, and worked. But the prof said I couldn&#39;t do it that way, and that killed everything for me. Idk why I didn&#39;t think to store it in a variable -_-  Stress from the class and overthinking things as usual lol."},{"owner":{"account_id":26265512,"reputation":3,"user_id":19936114,"display_name":"johnthor"},"score":3,"creation_date":1689180044,"post_id":76672236,"comment_id":135178036,"body_markdown":"I implemented what @OHGODSPIDERS said and got it to work. Thank yall again so super much. I understand what I did too, storing the reference to the node in a variable, then making sure that node isn&#39;t actually removed by placing it back in the front , using the temporary variable&#39;s node reference (mouthful). Then returning that temp var&#39;s node reference.","body":"I implemented what @OHGODSPIDERS said and got it to work. Thank yall again so super much. I understand what I did too, storing the reference to the node in a variable, then making sure that node isn&#39;t actually removed by placing it back in the front , using the temporary variable&#39;s node reference (mouthful). Then returning that temp var&#39;s node reference."}],"owner":{"account_id":26265512,"reputation":3,"user_id":19936114,"display_name":"johnthor"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":162,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689179055,"creation_date":1689175888,"question_id":76672236,"body_markdown":"I have an assignment due soon and my professor doesn&#39;t actually teach our class. He shows us powerpoints from our textbook and expects us to be able to solve problems with that minor information. \r\n\r\nCurrently, I am working on custom data structures. He has a custom ListNode and List class that I have included, as well as the custom Stack class he created. \r\n\r\nMy problem lies where the only code I can add to this is a peek method in the stack class WITHOUT adding any instance variables. I can only add a variable in the peek method. He has not shown us how this is possible, and when I ask for help (I&#39;ve asked several times) he just says &quot;look at the sample code for the chapter,&quot; quite literally verbatim. I need help and he is NOT helping me, so I am hoping someone here can educate me.\r\n\r\nI will update this post as I need to, and apologize if not enough information is given up front. \r\n\r\nList.java:\r\n\r\n```\r\nimport java.util.NoSuchElementException;\r\n\r\n// class to represent one node in a list\r\nclass ListNode&lt;E&gt;\r\n{\r\n   // package access members; List can access these directly\r\n   E data; // data for this node\r\n   ListNode&lt;E&gt; nextNode; // reference to the next node in the list\r\n\r\n   // constructor creates a ListNode that refers to object\r\n   ListNode(E object)\r\n   {\r\n\t   this(object, null);\r\n   }\r\n\r\n   // constructor creates ListNode that refers to the specified\r\n   // object and to the next ListNode\r\n   ListNode(E object, ListNode&lt;E&gt; node)\r\n   {\r\n      data = object;    \r\n      nextNode = node;  \r\n   } \r\n\r\n   // return reference to data in node\r\n   E getData()\r\n   {\r\n\t   return data;\r\n   }\r\n\r\n   // return reference to next node in list\r\n   ListNode&lt;E&gt; getNext()\r\n   {\r\n\t   return nextNode;\r\n   }\r\n} \r\n\r\n// class List definition\r\npublic class List&lt;E&gt; {\r\n   private ListNode&lt;E&gt; firstNode;\r\n   private ListNode&lt;E&gt; lastNode; \r\n   private String name; // string like &quot;list&quot; used in printing\r\n\r\n   // constructor creates empty List with &quot;list&quot; as the name\r\n   public List()\r\n   {\r\n\t   this(&quot;list&quot;);\r\n   }\r\n\r\n   // constructor creates an empty List with a name\r\n   public List(String listName)\r\n   {\r\n      name = listName;\r\n      firstNode = lastNode = null;\r\n   } \r\n\r\n   // insert item at front of List\r\n   public void insertAtFront(E insertItem)\r\n   {\r\n      if (isEmpty()) { // firstNode and lastNode refer to same object\r\n         firstNode = lastNode = new ListNode&lt;E&gt;(insertItem);\r\n      } \r\n      else { // firstNode refers to new node\r\n         firstNode = new ListNode&lt;E&gt;(insertItem, firstNode);\r\n      } \r\n   } \r\n\r\n   // insert item at end of List\r\n   public void insertAtBack(E insertItem)\r\n   {\r\n      if (isEmpty()) { // firstNode and lastNode refer to same object\r\n         firstNode = lastNode = new ListNode&lt;E&gt;(insertItem);\r\n      } \r\n      else { // lastNode&#39;s nextNode refers to new node\r\n         lastNode = lastNode.nextNode = new ListNode&lt;E&gt;(insertItem);\r\n      } \r\n   } \r\n\r\n   // remove first node from List\r\n   public E removeFromFront() throws NoSuchElementException\r\n   {\r\n      if (isEmpty()) // throw exception if List is empty\r\n\t  { \r\n         throw new NoSuchElementException(name + &quot; is empty&quot;);\r\n      }\r\n\r\n      E removedItem = firstNode.data; // retrieve data being removed\r\n\r\n      // update references firstNode and lastNode \r\n      if (firstNode == lastNode)\r\n\t  {\r\n         firstNode = lastNode = null;\r\n      }\r\n      else\r\n\t  {\r\n         firstNode = firstNode.nextNode;\r\n      }\r\n\r\n      return removedItem; // return removed node data\r\n   } \r\n\r\n   // remove last node from List\r\n   public E removeFromBack() throws NoSuchElementException\r\n   {\r\n      if (isEmpty()) // throw exception if List is empty\r\n\t  { \r\n         throw new NoSuchElementException(name + &quot; is empty&quot;);\r\n      }\r\n\r\n      E removedItem = lastNode.data; // retrieve data being removed\r\n\r\n      // update references firstNode and lastNode\r\n      if (firstNode == lastNode)\r\n\t  {\r\n         firstNode = lastNode = null;\r\n      }\r\n      else\r\n\t  {  // locate new last node\r\n         ListNode&lt;E&gt; current = firstNode;\r\n\r\n         // loop while current node does not refer to lastNode\r\n         while (current.nextNode != lastNode)\r\n\t\t {\r\n            current = current.nextNode;\r\n         }\r\n   \r\n         lastNode = current; // current is new lastNode\r\n         current.nextNode = null;\r\n      } \r\n\r\n      return removedItem; // return removed node data\r\n   } \r\n\r\n   // determine whether list is empty; returns true if so\r\n   public boolean isEmpty()\r\n   {\r\n\t   return firstNode == null;\r\n   }\r\n\r\n   // output list contents\r\n   public void print()\r\n   {\r\n      if (isEmpty())\r\n\t  {\r\n         System.out.printf(&quot;Empty %s%n&quot;, name);\r\n         return;\r\n      } \r\n\r\n      System.out.printf(&quot;The %s is: &quot;, name);\r\n      ListNode&lt;E&gt; current = firstNode;\r\n\r\n      // while not at end of list, output current node&#39;s data\r\n      while (current != null)\r\n\t  {\r\n         System.out.printf(&quot;%s &quot;, current.data);\r\n         current = current.nextNode;\r\n      } \r\n\r\n      System.out.println();\r\n   } \r\n}\r\n```\r\n\r\nStack.java:\r\n\r\n```\r\nimport java.util.NoSuchElementException;\r\n\r\npublic class Stack&lt;T&gt;\r\n{\r\n   private final List&lt;T&gt; stackList;\r\n\r\n   // no-argument constructor\r\n   public Stack()\r\n   { \r\n      stackList = new List&lt;&gt;(&quot;stack&quot;); \r\n   }\r\n\r\n   // add object to stack\r\n   public void push(T object)\r\n   { \r\n      stackList.insertAtFront(object); \r\n   }\r\n\r\n   // remove object from stack\r\n   public T pop() throws NoSuchElementException\r\n   { \r\n      return stackList.removeFromFront(); \r\n   }\r\n\r\n   // determine if stack is empty\r\n   public boolean isEmpty()\r\n   { \r\n      return stackList.isEmpty(); \r\n   }\r\n\r\n   // output stack contents\r\n   public void print()\r\n   { \r\n      stackList.print(); \r\n   }\r\n}\r\n```\r\n\r\nOnce again, thanks for the help and I apologize if there is missing information. I will update as needed with whatever yall need to help me out with this. I just need to write a functional peek method to return the top of the stack to my test class with a main(). I&#39;m not just looking for an answer, I would appreciate an explanation of how and why it works. \r\n\r\nThere is something I am missing here obviously, and I cannot put my finger on it.\r\n\r\nI looked everywhere online including here on StackOverflow, and everyone uses either prebuilt data structures (which we are told to never reinvent the wheel but still need to learn how they work), and I HAVE to use the files that he has included, which are missing methods like size in the List class, which would make my peek method fairly easy to achieve. \r\n\r\nThe only way I got this to work was to add an instance variable and manipulate the variable in the push and pop methods to always be pointing at the top of the stack. After he said I couldn&#39;t do that, I erased everything and screamed lol.","title":"custom stack peek method in java","body":"<p>I have an assignment due soon and my professor doesn't actually teach our class. He shows us powerpoints from our textbook and expects us to be able to solve problems with that minor information.</p>\n<p>Currently, I am working on custom data structures. He has a custom ListNode and List class that I have included, as well as the custom Stack class he created.</p>\n<p>My problem lies where the only code I can add to this is a peek method in the stack class WITHOUT adding any instance variables. I can only add a variable in the peek method. He has not shown us how this is possible, and when I ask for help (I've asked several times) he just says &quot;look at the sample code for the chapter,&quot; quite literally verbatim. I need help and he is NOT helping me, so I am hoping someone here can educate me.</p>\n<p>I will update this post as I need to, and apologize if not enough information is given up front.</p>\n<p>List.java:</p>\n<pre><code>import java.util.NoSuchElementException;\n\n// class to represent one node in a list\nclass ListNode&lt;E&gt;\n{\n   // package access members; List can access these directly\n   E data; // data for this node\n   ListNode&lt;E&gt; nextNode; // reference to the next node in the list\n\n   // constructor creates a ListNode that refers to object\n   ListNode(E object)\n   {\n       this(object, null);\n   }\n\n   // constructor creates ListNode that refers to the specified\n   // object and to the next ListNode\n   ListNode(E object, ListNode&lt;E&gt; node)\n   {\n      data = object;    \n      nextNode = node;  \n   } \n\n   // return reference to data in node\n   E getData()\n   {\n       return data;\n   }\n\n   // return reference to next node in list\n   ListNode&lt;E&gt; getNext()\n   {\n       return nextNode;\n   }\n} \n\n// class List definition\npublic class List&lt;E&gt; {\n   private ListNode&lt;E&gt; firstNode;\n   private ListNode&lt;E&gt; lastNode; \n   private String name; // string like &quot;list&quot; used in printing\n\n   // constructor creates empty List with &quot;list&quot; as the name\n   public List()\n   {\n       this(&quot;list&quot;);\n   }\n\n   // constructor creates an empty List with a name\n   public List(String listName)\n   {\n      name = listName;\n      firstNode = lastNode = null;\n   } \n\n   // insert item at front of List\n   public void insertAtFront(E insertItem)\n   {\n      if (isEmpty()) { // firstNode and lastNode refer to same object\n         firstNode = lastNode = new ListNode&lt;E&gt;(insertItem);\n      } \n      else { // firstNode refers to new node\n         firstNode = new ListNode&lt;E&gt;(insertItem, firstNode);\n      } \n   } \n\n   // insert item at end of List\n   public void insertAtBack(E insertItem)\n   {\n      if (isEmpty()) { // firstNode and lastNode refer to same object\n         firstNode = lastNode = new ListNode&lt;E&gt;(insertItem);\n      } \n      else { // lastNode's nextNode refers to new node\n         lastNode = lastNode.nextNode = new ListNode&lt;E&gt;(insertItem);\n      } \n   } \n\n   // remove first node from List\n   public E removeFromFront() throws NoSuchElementException\n   {\n      if (isEmpty()) // throw exception if List is empty\n      { \n         throw new NoSuchElementException(name + &quot; is empty&quot;);\n      }\n\n      E removedItem = firstNode.data; // retrieve data being removed\n\n      // update references firstNode and lastNode \n      if (firstNode == lastNode)\n      {\n         firstNode = lastNode = null;\n      }\n      else\n      {\n         firstNode = firstNode.nextNode;\n      }\n\n      return removedItem; // return removed node data\n   } \n\n   // remove last node from List\n   public E removeFromBack() throws NoSuchElementException\n   {\n      if (isEmpty()) // throw exception if List is empty\n      { \n         throw new NoSuchElementException(name + &quot; is empty&quot;);\n      }\n\n      E removedItem = lastNode.data; // retrieve data being removed\n\n      // update references firstNode and lastNode\n      if (firstNode == lastNode)\n      {\n         firstNode = lastNode = null;\n      }\n      else\n      {  // locate new last node\n         ListNode&lt;E&gt; current = firstNode;\n\n         // loop while current node does not refer to lastNode\n         while (current.nextNode != lastNode)\n         {\n            current = current.nextNode;\n         }\n   \n         lastNode = current; // current is new lastNode\n         current.nextNode = null;\n      } \n\n      return removedItem; // return removed node data\n   } \n\n   // determine whether list is empty; returns true if so\n   public boolean isEmpty()\n   {\n       return firstNode == null;\n   }\n\n   // output list contents\n   public void print()\n   {\n      if (isEmpty())\n      {\n         System.out.printf(&quot;Empty %s%n&quot;, name);\n         return;\n      } \n\n      System.out.printf(&quot;The %s is: &quot;, name);\n      ListNode&lt;E&gt; current = firstNode;\n\n      // while not at end of list, output current node's data\n      while (current != null)\n      {\n         System.out.printf(&quot;%s &quot;, current.data);\n         current = current.nextNode;\n      } \n\n      System.out.println();\n   } \n}\n</code></pre>\n<p>Stack.java:</p>\n<pre><code>import java.util.NoSuchElementException;\n\npublic class Stack&lt;T&gt;\n{\n   private final List&lt;T&gt; stackList;\n\n   // no-argument constructor\n   public Stack()\n   { \n      stackList = new List&lt;&gt;(&quot;stack&quot;); \n   }\n\n   // add object to stack\n   public void push(T object)\n   { \n      stackList.insertAtFront(object); \n   }\n\n   // remove object from stack\n   public T pop() throws NoSuchElementException\n   { \n      return stackList.removeFromFront(); \n   }\n\n   // determine if stack is empty\n   public boolean isEmpty()\n   { \n      return stackList.isEmpty(); \n   }\n\n   // output stack contents\n   public void print()\n   { \n      stackList.print(); \n   }\n}\n</code></pre>\n<p>Once again, thanks for the help and I apologize if there is missing information. I will update as needed with whatever yall need to help me out with this. I just need to write a functional peek method to return the top of the stack to my test class with a main(). I'm not just looking for an answer, I would appreciate an explanation of how and why it works.</p>\n<p>There is something I am missing here obviously, and I cannot put my finger on it.</p>\n<p>I looked everywhere online including here on StackOverflow, and everyone uses either prebuilt data structures (which we are told to never reinvent the wheel but still need to learn how they work), and I HAVE to use the files that he has included, which are missing methods like size in the List class, which would make my peek method fairly easy to achieve.</p>\n<p>The only way I got this to work was to add an instance variable and manipulate the variable in the push and pop methods to always be pointing at the top of the stack. After he said I couldn't do that, I erased everything and screamed lol.</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":1,"creation_date":1689185761,"post_id":76672521,"comment_id":135179176,"body_markdown":"Could you add the code that demonstrates that one is faster that the other? I fail to imagine why there could possibly be a difference.","body":"Could you add the code that demonstrates that one is faster that the other? I fail to imagine why there could possibly be a difference."}],"answers":[{"tags":[],"owner":{"account_id":19935722,"reputation":214,"user_id":14608443,"display_name":"IveGotCodeButImNotACoder"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1689178836,"creation_date":1689178836,"answer_id":76672629,"question_id":76672521,"body_markdown":"In the first example, it means that the lock is acquired on the instance of the class itself (eg `this` refers to current instance). This creates a single  lock for all the synchronized blocks in the class. Multiple threads are trying to execute your methods at the same time, so they will fight for the same lock. This can cause delays as each thread is waiting for the lock to be released. \r\n\r\nIn the second scenario you give, you create a separate `Object` instance (`obj`) and each method now synchronises on its own `obj` instance resulting in each method having its own lock. This leads to better performance as you mention because the threads are acquiring different locks rather than the same one. ","title":"Using Synchonized in Springboot","body":"<p>In the first example, it means that the lock is acquired on the instance of the class itself (eg <code>this</code> refers to current instance). This creates a single  lock for all the synchronized blocks in the class. Multiple threads are trying to execute your methods at the same time, so they will fight for the same lock. This can cause delays as each thread is waiting for the lock to be released.</p>\n<p>In the second scenario you give, you create a separate <code>Object</code> instance (<code>obj</code>) and each method now synchronises on its own <code>obj</code> instance resulting in each method having its own lock. This leads to better performance as you mention because the threads are acquiring different locks rather than the same one.</p>\n"}],"owner":{"account_id":5701123,"reputation":103,"user_id":4506038,"display_name":"Somen Biswas"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689178836,"creation_date":1689178005,"question_id":76672521,"body_markdown":"I am seeing this behavior in my Springboot application. So, I have a component in my application as:\r\n\r\n    @Service\r\n    public class MyService {\r\n       public methodA() {\r\n          synchronized(this) {\r\n               // some operation\r\n          }  \r\n       }\r\n    \r\n       public methodB() {\r\n          synchronized(this) {\r\n               // some operation\r\n          }  \r\n       }\r\n        \r\n       public methodC() {\r\n          synchronized(this) {\r\n               // some operation\r\n          }  \r\n       }\r\n    }\r\n\r\nWhen I am running multiple threads calling the methods, there is slowness seen which is because of the locking, which is as expected.\r\n\r\n\r\nNow for the same class, if intstead of using `synchronized(this)`, if I use a different object created as member variable in the class, I don&#39;t see the slowness anymore.\r\n\r\n   \r\n\r\n    @Service\r\n    public class MyService {\r\n       Object obj;\r\n       \r\n       @PostConstruct\r\n       void init() {\r\n          this.obj = new Object();\r\n       }\r\n       \r\n       public methodA() {\r\n          synchronized(obj) {\r\n               // some operation\r\n          }  \r\n       }\r\n    \r\n       public methodB() {\r\n          synchronized(obj) {\r\n               // some operation\r\n          }  \r\n       }\r\n    \r\n       public methodC() {\r\n          synchronized(obj) {\r\n               // some operation\r\n          }  \r\n       }\r\n    }\r\n\r\nI am having hard time in understanding this behaviour, since in both cases object monitor is used, only that objects are different. Does it have anything to do with Springboot bean used as the monitor?","title":"Using Synchonized in Springboot","body":"<p>I am seeing this behavior in my Springboot application. So, I have a component in my application as:</p>\n<pre><code>@Service\npublic class MyService {\n   public methodA() {\n      synchronized(this) {\n           // some operation\n      }  \n   }\n\n   public methodB() {\n      synchronized(this) {\n           // some operation\n      }  \n   }\n    \n   public methodC() {\n      synchronized(this) {\n           // some operation\n      }  \n   }\n}\n</code></pre>\n<p>When I am running multiple threads calling the methods, there is slowness seen which is because of the locking, which is as expected.</p>\n<p>Now for the same class, if intstead of using <code>synchronized(this)</code>, if I use a different object created as member variable in the class, I don't see the slowness anymore.</p>\n<pre><code>@Service\npublic class MyService {\n   Object obj;\n   \n   @PostConstruct\n   void init() {\n      this.obj = new Object();\n   }\n   \n   public methodA() {\n      synchronized(obj) {\n           // some operation\n      }  \n   }\n\n   public methodB() {\n      synchronized(obj) {\n           // some operation\n      }  \n   }\n\n   public methodC() {\n      synchronized(obj) {\n           // some operation\n      }  \n   }\n}\n</code></pre>\n<p>I am having hard time in understanding this behaviour, since in both cases object monitor is used, only that objects are different. Does it have anything to do with Springboot bean used as the monitor?</p>\n"},{"tags":["java","itext"],"comments":[{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1689108023,"post_id":76665116,"comment_id":135165941,"body_markdown":"Have you checked the compiled application where it contains the font resource?","body":"Have you checked the compiled application where it contains the font resource?"},{"owner":{"account_id":17216137,"reputation":31,"user_id":16906770,"display_name":"Armin Brkić"},"score":0,"creation_date":1689109132,"post_id":76665116,"comment_id":135166150,"body_markdown":"the font file is also there in the css folder.  I tried putting it in the root folder as well and I get the same error.  I create a File based on that path, I don&#39;t get an error.  so it is included in the application","body":"the font file is also there in the css folder.  I tried putting it in the root folder as well and I get the same error.  I create a File based on that path, I don&#39;t get an error.  so it is included in the application"},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1689147534,"post_id":76665116,"comment_id":135170333,"body_markdown":"Can you share the stack trace of the issue and show which code line in your code is indicated therein?","body":"Can you share the stack trace of the issue and show which code line in your code is indicated therein?"},{"owner":{"account_id":17216137,"reputation":31,"user_id":16906770,"display_name":"Armin Brkić"},"score":0,"creation_date":1689178862,"post_id":76665116,"comment_id":135177809,"body_markdown":"I edited the question, I marked where I get the error","body":"I edited the question, I marked where I get the error"},{"owner":{"account_id":17216137,"reputation":31,"user_id":16906770,"display_name":"Armin Brkić"},"score":0,"creation_date":1689185926,"post_id":76665116,"comment_id":135179195,"body_markdown":"Also if I totaly remove external fonts I catch exception &quot;Invalid font type&quot;  on first paragraph","body":"Also if I totaly remove external fonts I catch exception &quot;Invalid font type&quot;  on first paragraph"},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1689226104,"post_id":76665116,"comment_id":135183797,"body_markdown":"You show where you catch the exception but not where it is thrown. Can you also output the stack trace in your`catch` block?","body":"You show where you catch the exception but not where it is thrown. Can you also output the stack trace in your<code>catch</code> block?"}],"owner":{"account_id":17216137,"reputation":31,"user_id":16906770,"display_name":"Armin Brkić"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1689178696,"creation_date":1689102859,"question_id":76665116,"body_markdown":"I have a problem when generating a PDF document in Java. When running in an IDE environment, everything works. However, when I build the .exe I get error &quot;css/Montserrat-Regular.ttf not found&quot; and PDF is not created\r\nI also tried to delete css/, I tried to put the font file in the same folder where the class is\r\n\r\nAnd font file is included in build. I am using &quot;Intellij Idea IDE&quot;\r\n\r\nImports:\r\n\r\n    implementation &#39;com.itextpdf:itext7-core:7.0.4&#39;\r\n    \r\n    import com.itextpdf.kernel.font.PdfFont;\r\n    \r\n    import com.itextpdf.kernel.pdf.PdfDocument;\r\n\r\nI tried this\r\n\r\n    static PdfFont regular, bold;\r\n\r\n    URL font_path = Thread.currentThread().getContextClassLoader().getResource(&quot;css/Montserrat-Regular.ttf&quot;);\r\n            try (InputStream is = font_path.openStream()) {\r\n                byte[] bytes = StreamUtil.inputStreamToArray(is);\r\n                regular = PdfFontFactory.createFont(bytes, BaseFont.IDENTITY_H, true);\r\n\r\n            }\r\nor this\r\n\r\n                String link1 = Thread.currentThread().getContextClassLoader().getResource(&quot;css/Montserrat-Regular.ttf&quot;).getPath();\r\n            regular = PdfFontFactory.createFont(link1, BaseFont.IDENTITY_H, true);\r\n\r\nEven this not work\r\n\r\n    regular = PdfFontFactory.createFont(FontConstants.HELVETICA, BaseFont.IDENTITY_H, true);\r\n            bold = PdfFontFactory.createFont(FontConstants.TIMES_BOLD, BaseFont.IDENTITY_H, true);\r\n\r\nAnd this\r\n\r\n            String path1 = (CreatePDFInvoice.class.getClassLoader().getResource(&quot;css/Montserrat-Regular.ttf&quot;).getPath());\r\n            regular = PdfFontFactory.createFont(path1, &quot;Identity-H&quot;, true);\r\n\r\n\r\nThis is part of code:\r\n\r\n\r\n    try {\r\n\r\n            String link1 = CreatePDFKUF.class.getClassLoader().getResource(&quot;css/Montserrat-Regular.ttf&quot;).getPath();\r\n            String link2 = CreatePDFKUF.class.getClassLoader()..getResource(&quot;css/Montserrat-Bold.ttf&quot;).getPath();\r\n\r\n            // This dialog is executed\r\n            Functions.showOKdialogSimple(&quot;Upute&quot;, null, link1);\r\n\r\n            // executed - error\r\n            regular = PdfFontFactory.createFont(link1, BaseFont.IDENTITY_H, true);\r\n\r\n           \r\n\t\t\tString folder = Functions.odabranaFirma.getNaziv();\r\n            String subfolder = &quot;KIF&quot;;\r\n            String filename = Functions.odabranaFirma.getPDV_broj() + &quot;_&quot; + poreskiPeriod;\r\n            theDir = new File(&quot;C:\\\\CSV_PDV\\\\&quot; + folder + &quot;\\\\&quot; + subfolder + &quot;\\\\&quot;);\r\n\r\n            System.out.println(theDir.getPath());\r\n\r\n            if (!theDir.exists()) {\r\n                System.out.println(&quot;Kreiraj&quot;);\r\n                theDir.mkdirs();\r\n            }\r\n\r\n            String path = &quot;C:/CSV_PDV/&quot; + filename + &quot;_&quot; + LocalDate.now() + &quot;_&quot; + String.valueOf(Functions.getTime()).replace(&quot;:&quot;, &quot;&quot;) + &quot;.pdf&quot;;\r\n            System.out.println(&quot;Naziv datoteke &quot; + path);\r\n            PdfWriter pdfWriter = new PdfWriter(path);\r\n            PdfDocument pdfDocument = new PdfDocument(pdfWriter);\r\n            pdfDocument.setDefaultPageSize(PageSize.A4.rotate());\r\n\r\n            Document document = new Document(pdfDocument);\r\n\r\n\r\n            PageXofY event = new PageXofY(CreatePDFKUF.class, pdfDocument);\r\n            pdfDocument.addEventHandler(PdfDocumentEvent.END_PAGE, event);\r\n\r\n\r\n            setHeader(document);\r\n            setDetails(document, poreskiPeriod);\r\n            setTable(document, kufs);\r\n            document.add(sp);\r\n            document.add(sp);\r\n            UnitValue pagesize = document.getWidth();\r\n            System.err.println(pagesize + &quot; page size&quot;);\r\n\r\n\r\n            event.writeTotal(pdfDocument);\r\n            document.close();\r\n\r\n\r\n        } catch (Exception e) {\r\n            // This exception is executed\r\n            Functions.showOKdialogSimple(&quot;Greška&quot;, null, e.getMessage());\r\n\r\n        }\r\n\r\n[![First dialog][1]][1]\r\n[![Error dialog][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/jHVvR.png\r\n  [2]: https://i.stack.imgur.com/vRDHn.png","title":"PdfDocument problem with loading font file - Java","body":"<p>I have a problem when generating a PDF document in Java. When running in an IDE environment, everything works. However, when I build the .exe I get error &quot;css/Montserrat-Regular.ttf not found&quot; and PDF is not created\nI also tried to delete css/, I tried to put the font file in the same folder where the class is</p>\n<p>And font file is included in build. I am using &quot;Intellij Idea IDE&quot;</p>\n<p>Imports:</p>\n<pre><code>implementation 'com.itextpdf:itext7-core:7.0.4'\n\nimport com.itextpdf.kernel.font.PdfFont;\n\nimport com.itextpdf.kernel.pdf.PdfDocument;\n</code></pre>\n<p>I tried this</p>\n<pre><code>static PdfFont regular, bold;\n\nURL font_path = Thread.currentThread().getContextClassLoader().getResource(&quot;css/Montserrat-Regular.ttf&quot;);\n        try (InputStream is = font_path.openStream()) {\n            byte[] bytes = StreamUtil.inputStreamToArray(is);\n            regular = PdfFontFactory.createFont(bytes, BaseFont.IDENTITY_H, true);\n\n        }\n</code></pre>\n<p>or this</p>\n<pre><code>            String link1 = Thread.currentThread().getContextClassLoader().getResource(&quot;css/Montserrat-Regular.ttf&quot;).getPath();\n        regular = PdfFontFactory.createFont(link1, BaseFont.IDENTITY_H, true);\n</code></pre>\n<p>Even this not work</p>\n<pre><code>regular = PdfFontFactory.createFont(FontConstants.HELVETICA, BaseFont.IDENTITY_H, true);\n        bold = PdfFontFactory.createFont(FontConstants.TIMES_BOLD, BaseFont.IDENTITY_H, true);\n</code></pre>\n<p>And this</p>\n<pre><code>        String path1 = (CreatePDFInvoice.class.getClassLoader().getResource(&quot;css/Montserrat-Regular.ttf&quot;).getPath());\n        regular = PdfFontFactory.createFont(path1, &quot;Identity-H&quot;, true);\n</code></pre>\n<p>This is part of code:</p>\n<pre><code>try {\n\n        String link1 = CreatePDFKUF.class.getClassLoader().getResource(&quot;css/Montserrat-Regular.ttf&quot;).getPath();\n        String link2 = CreatePDFKUF.class.getClassLoader()..getResource(&quot;css/Montserrat-Bold.ttf&quot;).getPath();\n\n        // This dialog is executed\n        Functions.showOKdialogSimple(&quot;Upute&quot;, null, link1);\n\n        // executed - error\n        regular = PdfFontFactory.createFont(link1, BaseFont.IDENTITY_H, true);\n\n       \n        String folder = Functions.odabranaFirma.getNaziv();\n        String subfolder = &quot;KIF&quot;;\n        String filename = Functions.odabranaFirma.getPDV_broj() + &quot;_&quot; + poreskiPeriod;\n        theDir = new File(&quot;C:\\\\CSV_PDV\\\\&quot; + folder + &quot;\\\\&quot; + subfolder + &quot;\\\\&quot;);\n\n        System.out.println(theDir.getPath());\n\n        if (!theDir.exists()) {\n            System.out.println(&quot;Kreiraj&quot;);\n            theDir.mkdirs();\n        }\n\n        String path = &quot;C:/CSV_PDV/&quot; + filename + &quot;_&quot; + LocalDate.now() + &quot;_&quot; + String.valueOf(Functions.getTime()).replace(&quot;:&quot;, &quot;&quot;) + &quot;.pdf&quot;;\n        System.out.println(&quot;Naziv datoteke &quot; + path);\n        PdfWriter pdfWriter = new PdfWriter(path);\n        PdfDocument pdfDocument = new PdfDocument(pdfWriter);\n        pdfDocument.setDefaultPageSize(PageSize.A4.rotate());\n\n        Document document = new Document(pdfDocument);\n\n\n        PageXofY event = new PageXofY(CreatePDFKUF.class, pdfDocument);\n        pdfDocument.addEventHandler(PdfDocumentEvent.END_PAGE, event);\n\n\n        setHeader(document);\n        setDetails(document, poreskiPeriod);\n        setTable(document, kufs);\n        document.add(sp);\n        document.add(sp);\n        UnitValue pagesize = document.getWidth();\n        System.err.println(pagesize + &quot; page size&quot;);\n\n\n        event.writeTotal(pdfDocument);\n        document.close();\n\n\n    } catch (Exception e) {\n        // This exception is executed\n        Functions.showOKdialogSimple(&quot;Greška&quot;, null, e.getMessage());\n\n    }\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/jHVvR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jHVvR.png\" alt=\"First dialog\" /></a>\n<a href=\"https://i.stack.imgur.com/vRDHn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vRDHn.png\" alt=\"Error dialog\" /></a></p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1689170242,"post_id":76671307,"comment_id":135175715,"body_markdown":"Just place the `application.properties` next to your jar file and it will be loaded. If you really want it like this please show the logging you have (the output while starting the application).","body":"Just place the <code>application.properties</code> next to your jar file and it will be loaded. If you really want it like this please show the logging you have (the output while starting the application)."},{"owner":{"account_id":255453,"reputation":3554,"user_id":535515,"accept_rate":100,"display_name":"Gus"},"score":0,"creation_date":1689173792,"post_id":76671307,"comment_id":135176665,"body_markdown":"You almost certainly need to escape that path.  IIRC you can also just use the other slash and Spring will convert it for you (i.e. file:D:/config/application.properties )","body":"You almost certainly need to escape that path.  IIRC you can also just use the other slash and Spring will convert it for you (i.e. file:D:/config/application.properties )"},{"owner":{"account_id":29002894,"reputation":1,"user_id":22216121,"display_name":"Vijaya Kumar"},"score":0,"creation_date":1689178685,"post_id":76671307,"comment_id":135177780,"body_markdown":"I have a copy of properties file next to jar file. still spring unable to read the file.","body":"I have a copy of properties file next to jar file. still spring unable to read the file."},{"owner":{"account_id":29002894,"reputation":1,"user_id":22216121,"display_name":"Vijaya Kumar"},"score":0,"creation_date":1689178765,"post_id":76671307,"comment_id":135177794,"body_markdown":"tried all sort of slash \\\\ // \\ /.. still unable to load the properties file.","body":"tried all sort of slash \\\\ // \\ /.. still unable to load the properties file."}],"answers":[{"tags":[],"owner":{"account_id":23657270,"reputation":21,"user_id":17685341,"display_name":"Alexy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689173955,"creation_date":1689173955,"answer_id":76671959,"question_id":76671307,"body_markdown":"I tried with a SpringBoot 3.0.4 app, Java 19 and placing the `appplication.properties` file in another disk. I had no issue.\r\nI used the same command line as you :\r\n\r\n    java -jar my-app.jar --spring.config.location=file:J:\\application.properties\r\n\r\nBe sure you have right to read the file.","title":"How to Externalize the application.properties Configuration in Spring Boot Application","body":"<p>I tried with a SpringBoot 3.0.4 app, Java 19 and placing the <code>appplication.properties</code> file in another disk. I had no issue.\nI used the same command line as you :</p>\n<pre><code>java -jar my-app.jar --spring.config.location=file:J:\\application.properties\n</code></pre>\n<p>Be sure you have right to read the file.</p>\n"}],"owner":{"account_id":29002894,"reputation":1,"user_id":22216121,"display_name":"Vijaya Kumar"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689178349,"creation_date":1689169707,"question_id":76671307,"body_markdown":"In my springboot 2.5.4 standalone application (not a web application) i am trying to externalize the application.properties (out of the jar file).\r\n\r\nHere is the command. \r\n\r\njava -jar  app-1.0.jar\t--spring.config.location=file:D:\\config\\application.properties \r\n\r\nI am getting error\r\n\r\nCaused by: java.io.FileNotFoundException: class path resource [application.properties] cannot be opened because it does not exist\r\n\r\nEven setting environmental variable does not work \r\nset SPRING_CONFIG_NAME=application \r\nset SPRING_CONFIG_LOCATION=file:D:\\config\\application.properties\r\n\r\nIs there any other solution. \r\n\r\n [Followed this](https://docs.spring.io/spring-boot/docs/2.1.13.RELEASE/reference/html/boot-features-external-config.html) \r\n\r\nHere is the log\r\n```\r\n2023-07-12 21:34:40.984  INFO 8604 --- [           main] com.s7.SchedulerApplication              : Starting SchedulerApplication v2.1.4 using Java 11.0.16.1 on DESKTOP-6NOAC01 with PID 8604 (C:\\Users\\app\\IdeaProjects\\scheduler-app\\target\\scheduler-app.2.1.4.jar started by app in C:\\Users\\app\\IdeaProjects\\scheduler-app\\target)\r\n2023-07-12 21:34:41.028  INFO 8604 --- [           main] com.s7.SchedulerApplication              : No active profile set, falling back to default profiles: default\r\n2023-07-12 21:34:41.435  WARN 8604 --- [           main] onfigReactiveWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanDefinitionStoreException: Failed to parse configuration class [com.s7.SchedulerApplication]; nested exception is java.io.FileNotFoundException: class path resource [application.properties] cannot be opened because it does not exist\r\n2023-07-12 21:34:41.617 ERROR 8604 --- [           main] o.s.boot.SpringApplication               : Application run failed\r\n\r\norg.springframework.beans.factory.BeanDefinitionStoreException: Failed to parse configuration class [com.s7.SchedulerApplication]; nested exception is java.io.FileNotFoundException: class path resource [application.properties] cannot be opened because it does not exist\r\n        at org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:189) ~[spring-context-5.3.9.jar!/:5.3.9]\r\n        at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:331) ~[spring-context-5.3.9.jar!/:5.3.9]\r\n        at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:247) ~[spring-context-5.3.9.jar!/:5.3.9]\r\n        at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:311) ~[spring-context-5.3.9.jar!/:5.3.9]\r\n        at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:112) ~[spring-context-5.3.9.jar!/:5.3.9]\r\n        at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:746) ~[spring-context-5.3.9.jar!/:5.3.9]\r\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:564) ~[spring-context-5.3.9.jar!/:5.3.9]\r\n        at org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext.refresh(ReactiveWebServerApplicationContext.java:64) ~[spring-boot-2.5.4.jar!/:2.5.4]\r\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-2.5.4.jar!/:2.5.4]\r\n        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:434) ~[spring-boot-2.5.4.jar!/:2.5.4]\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:338) ~[spring-boot-2.5.4.jar!/:2.5.4]\r\n        at com.s7.SchedulerApplication.main(SchedulerApplication.java:35) ~[classes!/:2.1.4]\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n        at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\r\n        at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:49) ~[scheduler-app.2.1.4.jar:2.1.4]\r\n        at org.springframework.boot.loader.Launcher.launch(Launcher.java:108) ~[scheduler-app.2.1.4.jar:2.1.4]\r\n        at org.springframework.boot.loader.Launcher.launch(Launcher.java:58) ~[scheduler-app.2.1.4.jar:2.1.4]\r\n        at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:88) ~[scheduler-app.2.1.4.jar:2.1.4]\r\nCaused by: java.io.FileNotFoundException: class path resource [application.properties] cannot be opened because it does not exist\r\n        at org.springframework.core.io.ClassPathResource.getInputStream(ClassPathResource.java:187) ~[spring-core-5.3.9.jar!/:5.3.9]\r\n        at org.springframework.core.io.support.EncodedResource.getInputStream(EncodedResource.java:159) ~[spring-core-5.3.9.jar!/:5.3.9]\r\n        at org.springframework.core.io.support.PropertiesLoaderUtils.fillProperties(PropertiesLoaderUtils.java:110) ~[spring-core-5.3.9.jar!/:5.3.9]\r\n        at org.springframework.core.io.support.PropertiesLoaderUtils.fillProperties(PropertiesLoaderUtils.java:81) ~[spring-core-5.3.9.jar!/:5.3.9]\r\n        at org.springframework.core.io.support.PropertiesLoaderUtils.loadProperties(PropertiesLoaderUtils.java:67) ~[spring-core-5.3.9.jar!/:5.3.9]\r\n        at org.springframework.core.io.support.ResourcePropertySource.&lt;init&gt;(ResourcePropertySource.java:67) ~[spring-core-5.3.9.jar!/:5.3.9]\r\n        at org.springframework.core.io.support.DefaultPropertySourceFactory.createPropertySource(DefaultPropertySourceFactory.java:37) ~[spring-core-5.3.9.jar!/:5.3.9]\r\n        at org.springframework.context.annotation.ConfigurationClassParser.processPropertySource(ConfigurationClassParser.java:463) ~[spring-context-5.3.9.jar!/:5.3.9]\r\n        at org.springframework.context.annotation.ConfigurationClassParser.doProcessConfigurationClass(ConfigurationClassParser.java:280) ~[spring-context-5.3.9.jar!/:5.3.9]\r\n        at org.springframework.context.annotation.ConfigurationClassParser.processConfigurationClass(ConfigurationClassParser.java:250) ~[spring-context-5.3.9.jar!/:5.3.9]\r\n        at org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:199) ~[spring-context-5.3.9.jar!/:5.3.9]\r\n        at org.springframework.context.annotation.ConfigurationClassParser.doProcessConfigurationClass(ConfigurationClassParser.java:304) ~[spring-context-5.3.9.jar!/:5.3.9]\r\n        at org.springframework.context.annotation.ConfigurationClassParser.processConfigurationClass(ConfigurationClassParser.java:250) ~[spring-context-5.3.9.jar!/:5.3.9]\r\n        at org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:207) ~[spring-context-5.3.9.jar!/:5.3.9]\r\n        at org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:175) ~[spring-context-5.3.9.jar!/:5.3.9]\r\n        ... 19 common frames omitted\r\n```\r\n","title":"How to Externalize the application.properties Configuration in Spring Boot Application","body":"<p>In my springboot 2.5.4 standalone application (not a web application) i am trying to externalize the application.properties (out of the jar file).</p>\n<p>Here is the command.</p>\n<p>java -jar  app-1.0.jar  --spring.config.location=file:D:\\config\\application.properties</p>\n<p>I am getting error</p>\n<p>Caused by: java.io.FileNotFoundException: class path resource [application.properties] cannot be opened because it does not exist</p>\n<p>Even setting environmental variable does not work\nset SPRING_CONFIG_NAME=application\nset SPRING_CONFIG_LOCATION=file:D:\\config\\application.properties</p>\n<p>Is there any other solution.</p>\n<p><a href=\"https://docs.spring.io/spring-boot/docs/2.1.13.RELEASE/reference/html/boot-features-external-config.html\" rel=\"nofollow noreferrer\">Followed this</a></p>\n<p>Here is the log</p>\n<pre><code>2023-07-12 21:34:40.984  INFO 8604 --- [           main] com.s7.SchedulerApplication              : Starting SchedulerApplication v2.1.4 using Java 11.0.16.1 on DESKTOP-6NOAC01 with PID 8604 (C:\\Users\\app\\IdeaProjects\\scheduler-app\\target\\scheduler-app.2.1.4.jar started by app in C:\\Users\\app\\IdeaProjects\\scheduler-app\\target)\n2023-07-12 21:34:41.028  INFO 8604 --- [           main] com.s7.SchedulerApplication              : No active profile set, falling back to default profiles: default\n2023-07-12 21:34:41.435  WARN 8604 --- [           main] onfigReactiveWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanDefinitionStoreException: Failed to parse configuration class [com.s7.SchedulerApplication]; nested exception is java.io.FileNotFoundException: class path resource [application.properties] cannot be opened because it does not exist\n2023-07-12 21:34:41.617 ERROR 8604 --- [           main] o.s.boot.SpringApplication               : Application run failed\n\norg.springframework.beans.factory.BeanDefinitionStoreException: Failed to parse configuration class [com.s7.SchedulerApplication]; nested exception is java.io.FileNotFoundException: class path resource [application.properties] cannot be opened because it does not exist\n        at org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:189) ~[spring-context-5.3.9.jar!/:5.3.9]\n        at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:331) ~[spring-context-5.3.9.jar!/:5.3.9]\n        at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:247) ~[spring-context-5.3.9.jar!/:5.3.9]\n        at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:311) ~[spring-context-5.3.9.jar!/:5.3.9]\n        at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:112) ~[spring-context-5.3.9.jar!/:5.3.9]\n        at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:746) ~[spring-context-5.3.9.jar!/:5.3.9]\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:564) ~[spring-context-5.3.9.jar!/:5.3.9]\n        at org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext.refresh(ReactiveWebServerApplicationContext.java:64) ~[spring-boot-2.5.4.jar!/:2.5.4]\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-2.5.4.jar!/:2.5.4]\n        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:434) ~[spring-boot-2.5.4.jar!/:2.5.4]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:338) ~[spring-boot-2.5.4.jar!/:2.5.4]\n        at com.s7.SchedulerApplication.main(SchedulerApplication.java:35) ~[classes!/:2.1.4]\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n        at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\n        at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:49) ~[scheduler-app.2.1.4.jar:2.1.4]\n        at org.springframework.boot.loader.Launcher.launch(Launcher.java:108) ~[scheduler-app.2.1.4.jar:2.1.4]\n        at org.springframework.boot.loader.Launcher.launch(Launcher.java:58) ~[scheduler-app.2.1.4.jar:2.1.4]\n        at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:88) ~[scheduler-app.2.1.4.jar:2.1.4]\nCaused by: java.io.FileNotFoundException: class path resource [application.properties] cannot be opened because it does not exist\n        at org.springframework.core.io.ClassPathResource.getInputStream(ClassPathResource.java:187) ~[spring-core-5.3.9.jar!/:5.3.9]\n        at org.springframework.core.io.support.EncodedResource.getInputStream(EncodedResource.java:159) ~[spring-core-5.3.9.jar!/:5.3.9]\n        at org.springframework.core.io.support.PropertiesLoaderUtils.fillProperties(PropertiesLoaderUtils.java:110) ~[spring-core-5.3.9.jar!/:5.3.9]\n        at org.springframework.core.io.support.PropertiesLoaderUtils.fillProperties(PropertiesLoaderUtils.java:81) ~[spring-core-5.3.9.jar!/:5.3.9]\n        at org.springframework.core.io.support.PropertiesLoaderUtils.loadProperties(PropertiesLoaderUtils.java:67) ~[spring-core-5.3.9.jar!/:5.3.9]\n        at org.springframework.core.io.support.ResourcePropertySource.&lt;init&gt;(ResourcePropertySource.java:67) ~[spring-core-5.3.9.jar!/:5.3.9]\n        at org.springframework.core.io.support.DefaultPropertySourceFactory.createPropertySource(DefaultPropertySourceFactory.java:37) ~[spring-core-5.3.9.jar!/:5.3.9]\n        at org.springframework.context.annotation.ConfigurationClassParser.processPropertySource(ConfigurationClassParser.java:463) ~[spring-context-5.3.9.jar!/:5.3.9]\n        at org.springframework.context.annotation.ConfigurationClassParser.doProcessConfigurationClass(ConfigurationClassParser.java:280) ~[spring-context-5.3.9.jar!/:5.3.9]\n        at org.springframework.context.annotation.ConfigurationClassParser.processConfigurationClass(ConfigurationClassParser.java:250) ~[spring-context-5.3.9.jar!/:5.3.9]\n        at org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:199) ~[spring-context-5.3.9.jar!/:5.3.9]\n        at org.springframework.context.annotation.ConfigurationClassParser.doProcessConfigurationClass(ConfigurationClassParser.java:304) ~[spring-context-5.3.9.jar!/:5.3.9]\n        at org.springframework.context.annotation.ConfigurationClassParser.processConfigurationClass(ConfigurationClassParser.java:250) ~[spring-context-5.3.9.jar!/:5.3.9]\n        at org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:207) ~[spring-context-5.3.9.jar!/:5.3.9]\n        at org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:175) ~[spring-context-5.3.9.jar!/:5.3.9]\n        ... 19 common frames omitted\n</code></pre>\n"},{"tags":["java","arrays","knapsack-problem","partition-problem"],"comments":[{"owner":{"account_id":2530747,"reputation":2060,"user_id":2199102,"accept_rate":81,"display_name":"Dan"},"score":0,"creation_date":1634554908,"post_id":69614703,"comment_id":123047649,"body_markdown":"Sort the array anyway. Most array problems you generally need to sort. When sorted the first and last elements are in the one list while the second and second last ones are in the other list. The 4 middle numbers are confusing me tho as when writing it out I thought it was all even placed nums in one list and all odd placed nums in another, but that is not right tho","body":"Sort the array anyway. Most array problems you generally need to sort. When sorted the first and last elements are in the one list while the second and second last ones are in the other list. The 4 middle numbers are confusing me tho as when writing it out I thought it was all even placed nums in one list and all odd placed nums in another, but that is not right tho"}],"answers":[{"tags":[],"owner":{"account_id":21709395,"reputation":162,"user_id":16021237,"display_name":"GalliadII"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634554881,"creation_date":1634554881,"answer_id":69614899,"question_id":69614703,"body_markdown":"you would use an iteration and traverse the array first. then you make 2 integers.\r\nIn each iteration cycle, you first check if integer1 is bigger than integer2. then put one number in array1 and add its value to integer1. repeat. \r\nif int1 is bigger than int2, you put it in array2 and add the value to int2. \r\nin the end, sort the array and you are done. \r\nthat is how I would solve it. Does this work? I am genuinely interested.","title":"Split array into two even sets of integers, each so that both sets add up to the same number","body":"<p>you would use an iteration and traverse the array first. then you make 2 integers.\nIn each iteration cycle, you first check if integer1 is bigger than integer2. then put one number in array1 and add its value to integer1. repeat.\nif int1 is bigger than int2, you put it in array2 and add the value to int2.\nin the end, sort the array and you are done.\nthat is how I would solve it. Does this work? I am genuinely interested.</p>\n"},{"tags":[],"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1634556294,"creation_date":1634556294,"answer_id":69615198,"question_id":69614703,"body_markdown":"The problem need not to be sequentially-in-time coded. Make a centrally procedure to solve this knapsack problem, but do not code it yet. Then sort the results, and give the results.\r\n\r\nNow should you fail solving, say for time-out, there still is an approach done.\r\n\r\nThe problem could be further simplified, by using the sum of the array `arr`, divide it by 2, and search a subarray of this half-sum.\r\n\r\nThe problem poses some weird restrictions: `arr` keeps an even number of values (8), the two resulting arrays should have the same even number of values (both 4).\r\n\r\nTo select to which subarray the i&lt;sup&gt;th&lt;/sup&gt; value belongs is binary.\r\n\r\nSo start with a sorted array, cut the solutions when the half is reached.\r\n\r\nYou could start with 00001111 (half the bits 1) which probably is too big, the following bits would be 00010111, 00011011, 00011101, 00011110, 00101110, ...\r\n\r\nEasier would probably simple recursion, with a count upto the half:\r\n\r\n    // Array arr sorted decreasingly to have less values to try out.\r\n    boolean solve(Set&lt;Integer&gt; selectedNumbers, int selectedSum, int index) {\r\n        if (selectedNumbers.size() &gt;= arr.length/2) {\r\n            return sum == arrSum/2;\r\n        }\r\n        if (index &gt; arr.length) {\r\n            return false;\r\n        }\r\n        boolean solved = false;\r\n\r\n        // First case: add array element at this index:\r\n        if (selectedSum + arr[index] &lt;= arrSum/2) {\r\n            seplectedNumbers.add(arr[index]);\r\n            arrSum += arr[index];\r\n            solved = solve(selectedNumbers, arrSum, index + 1);\r\n            if (!solved) {\r\n                // No remove(int index), so remove an Object, Integer.\r\n                selectedNumbers.remove(Integer.valueOf(arr[index]));\r\n                arrSum -= arr[index];\r\n            }\r\n        }\r\n\r\n        // Second case: do not add array element at this index:\r\n        if (!solved) {\r\n            solved = solve(selectedNumbers, arrSum, index + 1);\r\n        }\r\n        return solved;\r\n    }\r\n\r\nThe above of course is a brute force solution. If you are into Operations Research you might find a distribution of those numbers to start with (like the bits mentioned). But time needed and for me my meager math knowledge would prevent that.\r\nWhen solved you might put in a remark should you know a faster solution.","title":"Split array into two even sets of integers, each so that both sets add up to the same number","body":"<p>The problem need not to be sequentially-in-time coded. Make a centrally procedure to solve this knapsack problem, but do not code it yet. Then sort the results, and give the results.</p>\n<p>Now should you fail solving, say for time-out, there still is an approach done.</p>\n<p>The problem could be further simplified, by using the sum of the array <code>arr</code>, divide it by 2, and search a subarray of this half-sum.</p>\n<p>The problem poses some weird restrictions: <code>arr</code> keeps an even number of values (8), the two resulting arrays should have the same even number of values (both 4).</p>\n<p>To select to which subarray the i<sup>th</sup> value belongs is binary.</p>\n<p>So start with a sorted array, cut the solutions when the half is reached.</p>\n<p>You could start with 00001111 (half the bits 1) which probably is too big, the following bits would be 00010111, 00011011, 00011101, 00011110, 00101110, ...</p>\n<p>Easier would probably simple recursion, with a count upto the half:</p>\n<pre><code>// Array arr sorted decreasingly to have less values to try out.\nboolean solve(Set&lt;Integer&gt; selectedNumbers, int selectedSum, int index) {\n    if (selectedNumbers.size() &gt;= arr.length/2) {\n        return sum == arrSum/2;\n    }\n    if (index &gt; arr.length) {\n        return false;\n    }\n    boolean solved = false;\n\n    // First case: add array element at this index:\n    if (selectedSum + arr[index] &lt;= arrSum/2) {\n        seplectedNumbers.add(arr[index]);\n        arrSum += arr[index];\n        solved = solve(selectedNumbers, arrSum, index + 1);\n        if (!solved) {\n            // No remove(int index), so remove an Object, Integer.\n            selectedNumbers.remove(Integer.valueOf(arr[index]));\n            arrSum -= arr[index];\n        }\n    }\n\n    // Second case: do not add array element at this index:\n    if (!solved) {\n        solved = solve(selectedNumbers, arrSum, index + 1);\n    }\n    return solved;\n}\n</code></pre>\n<p>The above of course is a brute force solution. If you are into Operations Research you might find a distribution of those numbers to start with (like the bits mentioned). But time needed and for me my meager math knowledge would prevent that.\nWhen solved you might put in a remark should you know a faster solution.</p>\n"},{"tags":[],"owner":{"account_id":8546,"reputation":17688,"user_id":15472,"accept_rate":87,"display_name":"tucuxi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634577160,"creation_date":1634577160,"answer_id":69620016,"question_id":69614703,"body_markdown":"This answer is similar in spirit to that of [Joop Eggen](https://stackoverflow.com/a/69615198/15472). It implements the (smallish) optimization of checking both `selectedTotal` *and* `discardedTotal` to abort a branch if it exceeds the goal (note that this assumes that all values are positive; if this is not the case, and the smallest value is, say, `x &lt; 0`, you would just have to add `-x` to all values, run the algorithm, and substract `-x` from the answers).  \r\n\r\nThe output is exactly as specified by the original post - and since it is only generated when a full solution is found, this code *should* be faster than algorithms where values are being constantly added and removed from a partial answer, such as Joop&#39;s (`selectedNumbers.add` followed by `selectedNumbers.remove` when it turns out not to work; set operations may be fast, but not performing them is even faster!).\r\n\r\n    public class Main {\r\n        public static boolean search(int[] values, int goal, int index,\r\n                                    int selectedTotal, int discardedTotal,\r\n                                    List&lt;Integer&gt; selected, List&lt;Integer&gt; discarded) {\r\n            if (selected.size() == values.length/2 &amp;&amp;\r\n                    discarded.size() == values.length/2) {\r\n                return selectedTotal == goal;\r\n            }\r\n            if (selectedTotal &gt; goal ||\r\n                    discardedTotal &gt; goal ||\r\n                    index == values.length) {\r\n                return selectedTotal == goal;\r\n            }\r\n    \r\n            // try selecting value at index ...\r\n            if (selected.size() &lt; values.length/2 &amp;&amp;\r\n                    search(values, goal, index + 1,\r\n                        selectedTotal + values[index], discardedTotal,\r\n                        selected, discarded)) {\r\n                selected.add(values[index]);\r\n                return true;\r\n            }\r\n    \r\n            // ... and, if that did not work, try discarding value at index\r\n            if (discarded.size() &lt; values.length/2 &amp;&amp;\r\n                    search(values, goal, index + 1,\r\n                        selectedTotal, discardedTotal + values[index],\r\n                        selected, discarded)) {\r\n                discarded.add(values[index]);\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n    \r\n        public static List&lt;Integer&gt; solve(int[] values) {\r\n            Arrays.sort(values);\r\n            int goal = IntStream.of(values).sum() / 2;\r\n            List&lt;Integer&gt; selected = new ArrayList&lt;&gt;();\r\n            List&lt;Integer&gt; discarded = new ArrayList&lt;&gt;();\r\n            if ( ! search(values, goal, 0,\r\n                    0, 0, selected, discarded)) {\r\n                throw new IllegalArgumentException(&quot;This puzzle cannot be solved&quot;);\r\n            }\r\n            Collections.reverse(selected);\r\n            Collections.reverse(discarded);\r\n            selected.addAll(discarded);\r\n            return selected;\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            System.out.println(solve(new int[] {16,22,35,8,20,1,21,11}));\r\n        }\r\n    }\r\n","title":"Split array into two even sets of integers, each so that both sets add up to the same number","body":"<p>This answer is similar in spirit to that of <a href=\"https://stackoverflow.com/a/69615198/15472\">Joop Eggen</a>. It implements the (smallish) optimization of checking both <code>selectedTotal</code> <em>and</em> <code>discardedTotal</code> to abort a branch if it exceeds the goal (note that this assumes that all values are positive; if this is not the case, and the smallest value is, say, <code>x &lt; 0</code>, you would just have to add <code>-x</code> to all values, run the algorithm, and substract <code>-x</code> from the answers).</p>\n<p>The output is exactly as specified by the original post - and since it is only generated when a full solution is found, this code <em>should</em> be faster than algorithms where values are being constantly added and removed from a partial answer, such as Joop's (<code>selectedNumbers.add</code> followed by <code>selectedNumbers.remove</code> when it turns out not to work; set operations may be fast, but not performing them is even faster!).</p>\n<pre><code>public class Main {\n    public static boolean search(int[] values, int goal, int index,\n                                int selectedTotal, int discardedTotal,\n                                List&lt;Integer&gt; selected, List&lt;Integer&gt; discarded) {\n        if (selected.size() == values.length/2 &amp;&amp;\n                discarded.size() == values.length/2) {\n            return selectedTotal == goal;\n        }\n        if (selectedTotal &gt; goal ||\n                discardedTotal &gt; goal ||\n                index == values.length) {\n            return selectedTotal == goal;\n        }\n\n        // try selecting value at index ...\n        if (selected.size() &lt; values.length/2 &amp;&amp;\n                search(values, goal, index + 1,\n                    selectedTotal + values[index], discardedTotal,\n                    selected, discarded)) {\n            selected.add(values[index]);\n            return true;\n        }\n\n        // ... and, if that did not work, try discarding value at index\n        if (discarded.size() &lt; values.length/2 &amp;&amp;\n                search(values, goal, index + 1,\n                    selectedTotal, discardedTotal + values[index],\n                    selected, discarded)) {\n            discarded.add(values[index]);\n            return true;\n        }\n        return false;\n    }\n\n    public static List&lt;Integer&gt; solve(int[] values) {\n        Arrays.sort(values);\n        int goal = IntStream.of(values).sum() / 2;\n        List&lt;Integer&gt; selected = new ArrayList&lt;&gt;();\n        List&lt;Integer&gt; discarded = new ArrayList&lt;&gt;();\n        if ( ! search(values, goal, 0,\n                0, 0, selected, discarded)) {\n            throw new IllegalArgumentException(&quot;This puzzle cannot be solved&quot;);\n        }\n        Collections.reverse(selected);\n        Collections.reverse(discarded);\n        selected.addAll(discarded);\n        return selected;\n    }\n\n    public static void main(String[] args) {\n        System.out.println(solve(new int[] {16,22,35,8,20,1,21,11}));\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29003942,"reputation":1,"user_id":22216948,"display_name":"JAGJIT SINGH"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689178192,"creation_date":1689178192,"answer_id":76672542,"question_id":69614703,"body_markdown":"```\r\nconst arr = [16, 22, 35, 8, 20, 1, 21, 11];\r\n\r\nfunction accumulate(arr, first, last) {\r\n  let init = 0;\r\n  for (let i = first; i &lt; last; i++) {\r\n    init = init + arr[i];\r\n  }\r\n  return init;\r\n}\r\n\r\n\r\nfunction combinationUtil(arr, half, start, end,\r\n  index, n, sum) {\r\n\r\n  // Current combination is ready to\r\n  // be printed, print it\r\n  if (index == n / 2) {\r\n    let curr_sum = accumulate(half, 0, n / 2);\r\n    return (curr_sum + curr_sum == sum);\r\n  }\r\n\r\n  // Replace index with all possible elements.\r\n  // The condition &quot;end-i+1 &gt;= n/2-index&quot; makes\r\n  // sure that including one element at index\r\n  // will make a combination with remaining\r\n  // elements at remaining positions\r\n  for (let i = start; i &lt;= end &amp;&amp; end - i + 1 &gt;= n / 2 - index; i++) {\r\n    half[index] = arr[i];\r\n    if (combinationUtil(arr, half, i + 1, end,\r\n        index + 1, n, sum))\r\n      return true;\r\n  }\r\n  return false;\r\n}\r\n\r\nfunction evenSlpit(arr) {\r\n  const n = arr.length;\r\n  arr.sort((a, b) =&gt; a - b);\r\n  const sum = arr.reduce((acc, red) =&gt; acc + red, 0);\r\n\r\n  if (n % 2 != 0)\r\n    return false;\r\n\r\n  // If sum of array is not even.\r\n  if (sum % 2 != 0)\r\n    return false;\r\n\r\n  // A temporary array to store all\r\n  // combination one by one let k=n/2;\r\n  let half = [];\r\n\r\n  // Print all combination using temporary\r\n  // array &#39;half[]&#39;\r\n  const res = combinationUtil(arr, half, 0, n - 1,\r\n    0, n, sum);\r\n  if (res) {\r\n    const temp = [...half];\r\n    const otherHalf = [];\r\n\r\n    for (let i = 0; i &lt; arr.length; i++) {\r\n      if (temp.includes(arr[i])) {\r\n        const index = temp.indexOf(arr[i]);\r\n        temp.splice(1, index);\r\n      } else {\r\n        otherHalf.push(arr[i]);\r\n      }\r\n    }\r\n    return [...half.sort((a, b) =&gt; a - b), ...otherHalf.sort((a, b) =&gt; a - b)]\r\n  }\r\n  return -1\r\n}\r\n\r\nconsole.log(evenSlpit(arr))\r\nconsole.log(evenSlpit([1,2,3,4]))\r\nconsole.log(evenSlpit([1,7,8,3,5,4]));\r\n```","title":"Split array into two even sets of integers, each so that both sets add up to the same number","body":"<pre><code>const arr = [16, 22, 35, 8, 20, 1, 21, 11];\n\nfunction accumulate(arr, first, last) {\n  let init = 0;\n  for (let i = first; i &lt; last; i++) {\n    init = init + arr[i];\n  }\n  return init;\n}\n\n\nfunction combinationUtil(arr, half, start, end,\n  index, n, sum) {\n\n  // Current combination is ready to\n  // be printed, print it\n  if (index == n / 2) {\n    let curr_sum = accumulate(half, 0, n / 2);\n    return (curr_sum + curr_sum == sum);\n  }\n\n  // Replace index with all possible elements.\n  // The condition &quot;end-i+1 &gt;= n/2-index&quot; makes\n  // sure that including one element at index\n  // will make a combination with remaining\n  // elements at remaining positions\n  for (let i = start; i &lt;= end &amp;&amp; end - i + 1 &gt;= n / 2 - index; i++) {\n    half[index] = arr[i];\n    if (combinationUtil(arr, half, i + 1, end,\n        index + 1, n, sum))\n      return true;\n  }\n  return false;\n}\n\nfunction evenSlpit(arr) {\n  const n = arr.length;\n  arr.sort((a, b) =&gt; a - b);\n  const sum = arr.reduce((acc, red) =&gt; acc + red, 0);\n\n  if (n % 2 != 0)\n    return false;\n\n  // If sum of array is not even.\n  if (sum % 2 != 0)\n    return false;\n\n  // A temporary array to store all\n  // combination one by one let k=n/2;\n  let half = [];\n\n  // Print all combination using temporary\n  // array 'half[]'\n  const res = combinationUtil(arr, half, 0, n - 1,\n    0, n, sum);\n  if (res) {\n    const temp = [...half];\n    const otherHalf = [];\n\n    for (let i = 0; i &lt; arr.length; i++) {\n      if (temp.includes(arr[i])) {\n        const index = temp.indexOf(arr[i]);\n        temp.splice(1, index);\n      } else {\n        otherHalf.push(arr[i]);\n      }\n    }\n    return [...half.sort((a, b) =&gt; a - b), ...otherHalf.sort((a, b) =&gt; a - b)]\n  }\n  return -1\n}\n\nconsole.log(evenSlpit(arr))\nconsole.log(evenSlpit([1,2,3,4]))\nconsole.log(evenSlpit([1,7,8,3,5,4]));\n</code></pre>\n"}],"owner":{"account_id":16985671,"reputation":41,"user_id":12286514,"display_name":"Nabreezy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9307,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":4,"score":1,"last_activity_date":1689178192,"creation_date":1634553915,"question_id":69614703,"body_markdown":"I have had this problem for an interview and can&#39;t seem to wrap my mind around how to solve it. I have not found any tutorials that explains the logic behind it as well.\r\n\r\nHave the function `ArrayChallenge(arr)`, take the array of integers stored in `arr` which will always contain an even amount of integers, and determine how they can be split into two even sets, then return a string representation of the first set followed by the second set with each integer separated by a comma and both sets sorted in ascending order. The set that goes first is the set with smallest first integer. \r\n\r\nFor example if arr is [16,22,35,8,20,1,21,11], then your program should output 1,11,20,35,8,16,21,22 \r\n\r\n[16,22,35,8,20,1,21,11] sum = 134\r\n\r\nthe sum of 1,11,20,35 is = 67\r\nthe sum of 8,16,21,22 is = 67\r\n\r\nAlso the size of the two arrays are equal to arr.length /2 \r\n\r\n\r\n ","title":"Split array into two even sets of integers, each so that both sets add up to the same number","body":"<p>I have had this problem for an interview and can't seem to wrap my mind around how to solve it. I have not found any tutorials that explains the logic behind it as well.</p>\n<p>Have the function <code>ArrayChallenge(arr)</code>, take the array of integers stored in <code>arr</code> which will always contain an even amount of integers, and determine how they can be split into two even sets, then return a string representation of the first set followed by the second set with each integer separated by a comma and both sets sorted in ascending order. The set that goes first is the set with smallest first integer.</p>\n<p>For example if arr is [16,22,35,8,20,1,21,11], then your program should output 1,11,20,35,8,16,21,22</p>\n<p>[16,22,35,8,20,1,21,11] sum = 134</p>\n<p>the sum of 1,11,20,35 is = 67\nthe sum of 8,16,21,22 is = 67</p>\n<p>Also the size of the two arrays are equal to arr.length /2</p>\n"},{"tags":["java","integer","division"],"comments":[{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":2,"creation_date":1464877383,"post_id":37594582,"comment_id":62674039,"body_markdown":"If damageDealt is an int &lt; 10 you&#39;ll get zero back.  It&#39;s important to understand how integer division works.  Cast it to a float/double and you&#39;ll do better.","body":"If damageDealt is an int &lt; 10 you&#39;ll get zero back.  It&#39;s important to understand how integer division works.  Cast it to a float/double and you&#39;ll do better."},{"owner":{"account_id":2262060,"reputation":591,"user_id":1991872,"display_name":"Grayson"},"score":0,"creation_date":1464882382,"post_id":37594582,"comment_id":62678005,"body_markdown":"If you are updating your `health`, it should probably be `health += lifeTake`.","body":"If you are updating your <code>health</code>, it should probably be <code>health += lifeTake</code>."}],"answers":[{"tags":[],"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1464877474,"creation_date":1464877474,"answer_id":37594631,"question_id":37594582,"body_markdown":"Try it like this: \r\n\r\n    // I assume these are not Strings.  If they are, compare using equals\r\n    if (cWeapon == soulSteeler) {\r\n        lifeTake = damageDealt/10.0;\r\n        lifeTake += health;\r\n    }\r\n\r\n","title":"Division of random variables java","body":"<p>Try it like this: </p>\n\n<pre><code>// I assume these are not Strings.  If they are, compare using equals\nif (cWeapon == soulSteeler) {\n    lifeTake = damageDealt/10.0;\n    lifeTake += health;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4605170,"reputation":980,"user_id":3734853,"accept_rate":100,"display_name":"objectively C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1464879315,"creation_date":1464879315,"answer_id":37595331,"question_id":37594582,"body_markdown":"Like Duffymo said, It is likely that damageDealt is an integer less than 10 which would make damageDealt/10 always 0.  To fix this, change 10 to 10.0, or cast it as a float or a double.  Also cast damageDealt as a double or a float to give you the correct result.  Also make sure that lifeTake is a float/double or else you will suffer from the same data narrowing.","title":"Division of random variables java","body":"<p>Like Duffymo said, It is likely that damageDealt is an integer less than 10 which would make damageDealt/10 always 0.  To fix this, change 10 to 10.0, or cast it as a float or a double.  Also cast damageDealt as a double or a float to give you the correct result.  Also make sure that lifeTake is a float/double or else you will suffer from the same data narrowing.</p>\n"}],"owner":{"account_id":8500602,"reputation":9,"user_id":6373702,"display_name":"Will"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1689178117,"creation_date":1464877328,"question_id":37594582,"body_markdown":"I have a weird logic error in my code which doesn&#39;t allow me to divide my variables.\r\n\r\n    if (cWeapon == soulSteeler) {\r\n\t\tlifeTake = damageDealt / 10;\r\n\t\tlifeTake += health;\r\n\t}\r\n\r\nThis is where I try to divide the damage dealt and add it to my health.  I change my `int` to `float` on `lifeTake damageDealt` and `health` because I knew that I could get some decimals.\r\n\r\nWhen I do this nothing happens.","title":"Division of random variables java","body":"<p>I have a weird logic error in my code which doesn't allow me to divide my variables.</p>\n<pre><code>if (cWeapon == soulSteeler) {\n    lifeTake = damageDealt / 10;\n    lifeTake += health;\n}\n</code></pre>\n<p>This is where I try to divide the damage dealt and add it to my health.  I change my <code>int</code> to <code>float</code> on <code>lifeTake damageDealt</code> and <code>health</code> because I knew that I could get some decimals.</p>\n<p>When I do this nothing happens.</p>\n"},{"tags":["java","spring-boot","spring-cloud","spring-cloud-gateway"],"comments":[{"owner":{"account_id":22394789,"reputation":1382,"user_id":16606223,"display_name":"Yahor Barkouski"},"score":0,"creation_date":1689179144,"post_id":76672532,"comment_id":135177869,"body_markdown":"You&#39;re trying to modify the HTTP response after the response *has already been committed*, which can&#39;t be done. You need to handle it at the `pre` or `post` phase intstead, by intercepting the response before it&#39;s sent back to the client","body":"You&#39;re trying to modify the HTTP response after the response <i>has already been committed</i>, which can&#39;t be done. You need to handle it at the <code>pre</code> or <code>post</code> phase intstead, by intercepting the response before it&#39;s sent back to the client"},{"owner":{"account_id":29003863,"reputation":1,"user_id":22216884,"display_name":"vincent bui"},"score":0,"creation_date":1689182110,"post_id":76672532,"comment_id":135178450,"body_markdown":"I thought Mono.fromrunable is Handle in post phase? How should I access this post phase before commit?","body":"I thought Mono.fromrunable is Handle in post phase? How should I access this post phase before commit?"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1689270934,"post_id":76672532,"comment_id":135193492,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":29003863,"reputation":1,"user_id":22216884,"display_name":"vincent bui"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":84,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689178090,"creation_date":1689178090,"question_id":76672532,"body_markdown":"```\r\npublic class FileBrowserPostFilter implements GatewayFilter, Ordered {\r\n    @Autowired\r\n    private Gson gson;\r\n\r\n    @Autowired\r\n    private FileBrowserService fileBrowserService;\r\n\r\n    @Override\r\n    public int getOrder() {\r\n        return 100;\r\n    }\r\n\r\n    @Override\r\n    public Mono&lt;Void&gt; filter(ServerWebExchange exchange, GatewayFilterChain chain) {\r\n        return chain.filter(exchange)\r\n                .then(Mono.fromRunnable(() -&gt; {\r\n                    var request = exchange.getRequest();\r\n                    var response = exchange.getResponse();\r\n                    String requestMethod = request.getMethod().name().toUpperCase();\r\n                    var status = response.getStatusCode();\r\n\r\n                    if (requestMethod.equals(&quot;POST&quot;) &amp;&amp; status.is2xxSuccessful()) {\r\n                        String path = request.getPath().subPath(4).value();\r\n                        var newItem = this.fileBrowserService.getItem(path);\r\n                        var newItemJson = this.gson.toJson(newItem);\r\n                        response.setRawStatusCode(201);\r\n                        DataBuffer dataBuffer = response.bufferFactory()\r\n                                .wrap(newItemJson.getBytes(StandardCharsets.UTF_8));\r\n                        response.writeWith(Mono.just(dataBuffer));\r\n                        exchange.mutate().response(response).build();\r\n                    }\r\n                }));\r\n    }\r\n}\r\n```\r\n\r\nasume fileBrowserService will always return a valid item\r\nI am expecting the filter to \r\nchange status code to 201 (successful)\r\nmodify the response body to something like so:\r\n\r\n```\r\n{\r\n        &quot;id&quot;: 1,\r\n        &quot;path&quot;: &quot;/1/name.jpg&quot;,\r\n        &quot;name&quot;: &quot;name.jpg&quot;,\r\n        &quot;size&quot;: 503627,\r\n        &quot;extension&quot;: &quot;.jpg&quot;,\r\n        &quot;modified&quot;: &quot;2023-07-12T11:55:22.440578974-04:00&quot;,\r\n        &quot;mode&quot;: 493,\r\n        &quot;type&quot;: &quot;image&quot;,\r\n        &quot;sharedUsers&quot;: [],\r\n        &quot;public&quot;: false,\r\n        &quot;dir&quot;: false,\r\n        &quot;symlink&quot;: false\r\n    }\r\n```\r\nbut it keep returning it original response body\r\n\r\n```\r\n200 ok\r\n```\r\nwhich should not happening\r\ndoes anyone know why?\r\n\r\n\r\nI have try all these solution here\r\n[https://wankhedeshubham.medium.com/spring-cloud-gateway-modify-response-body-using-global-post-filter-1dbe0a077f8e](https://wankhedeshubham.medium.com/spring-cloud-gateway-modify-response-body-using-global-post-filter-1dbe0a077f8e)\r\n[https://stackoverflow.com/questions/72127761/spring-cloud-gateway-modify-response-body-in-global-post-filter](https://stackoverflow.com/questions/72127761/spring-cloud-gateway-modify-response-body-in-global-post-filter)\r\nand it is not working.","title":"Spring boot Gateway Post filter won&#39;t modify response body","body":"<pre><code>public class FileBrowserPostFilter implements GatewayFilter, Ordered {\n    @Autowired\n    private Gson gson;\n\n    @Autowired\n    private FileBrowserService fileBrowserService;\n\n    @Override\n    public int getOrder() {\n        return 100;\n    }\n\n    @Override\n    public Mono&lt;Void&gt; filter(ServerWebExchange exchange, GatewayFilterChain chain) {\n        return chain.filter(exchange)\n                .then(Mono.fromRunnable(() -&gt; {\n                    var request = exchange.getRequest();\n                    var response = exchange.getResponse();\n                    String requestMethod = request.getMethod().name().toUpperCase();\n                    var status = response.getStatusCode();\n\n                    if (requestMethod.equals(&quot;POST&quot;) &amp;&amp; status.is2xxSuccessful()) {\n                        String path = request.getPath().subPath(4).value();\n                        var newItem = this.fileBrowserService.getItem(path);\n                        var newItemJson = this.gson.toJson(newItem);\n                        response.setRawStatusCode(201);\n                        DataBuffer dataBuffer = response.bufferFactory()\n                                .wrap(newItemJson.getBytes(StandardCharsets.UTF_8));\n                        response.writeWith(Mono.just(dataBuffer));\n                        exchange.mutate().response(response).build();\n                    }\n                }));\n    }\n}\n</code></pre>\n<p>asume fileBrowserService will always return a valid item\nI am expecting the filter to\nchange status code to 201 (successful)\nmodify the response body to something like so:</p>\n<pre><code>{\n        &quot;id&quot;: 1,\n        &quot;path&quot;: &quot;/1/name.jpg&quot;,\n        &quot;name&quot;: &quot;name.jpg&quot;,\n        &quot;size&quot;: 503627,\n        &quot;extension&quot;: &quot;.jpg&quot;,\n        &quot;modified&quot;: &quot;2023-07-12T11:55:22.440578974-04:00&quot;,\n        &quot;mode&quot;: 493,\n        &quot;type&quot;: &quot;image&quot;,\n        &quot;sharedUsers&quot;: [],\n        &quot;public&quot;: false,\n        &quot;dir&quot;: false,\n        &quot;symlink&quot;: false\n    }\n</code></pre>\n<p>but it keep returning it original response body</p>\n<pre><code>200 ok\n</code></pre>\n<p>which should not happening\ndoes anyone know why?</p>\n<p>I have try all these solution here\n<a href=\"https://wankhedeshubham.medium.com/spring-cloud-gateway-modify-response-body-using-global-post-filter-1dbe0a077f8e\" rel=\"nofollow noreferrer\">https://wankhedeshubham.medium.com/spring-cloud-gateway-modify-response-body-using-global-post-filter-1dbe0a077f8e</a>\n<a href=\"https://stackoverflow.com/questions/72127761/spring-cloud-gateway-modify-response-body-in-global-post-filter\">Spring Cloud Gateway - modify response body in global Post filter</a>\nand it is not working.</p>\n"},{"tags":["java","spring-boot","rest","microservices"],"answers":[{"tags":[],"owner":{"account_id":977507,"reputation":2280,"user_id":998126,"display_name":"Alexander Pavlov"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1573478711,"creation_date":1573357211,"answer_id":58785538,"question_id":58785222,"body_markdown":"**Method 1: Convert objects to Map, remove surplus keys, convert Map to Json**\r\n\r\n    @GetMapping(&quot;/v1/users&quot;)\r\n    @ResponseBody\r\n    public List&lt;Map&gt; getUsers(@RequestParam(required = false) Set&lt;String&gt; fields) { \r\n        List&lt;User&gt; users = ...;\r\n        ObjectMapper oMapper = new ObjectMapper();\r\n        return users.stream().map(u -&gt; oMapper.convertValue(u, Map.class))\r\n           .peek(map -&gt; { \r\n              if (fields != null) map.keySet().retainAll(fields)\r\n           })\r\n           .collect(Collectors.toList());\r\n    }\r\n\r\n**Method 2: Use Gson**\r\n\r\n    @GetMapping(&quot;/v1/users&quot;)\r\n    @ResponseBody\r\n    public String getUsers(@RequestParam(required = false) Set&lt;String&gt; fields) { \r\n        List&lt;User&gt; users = ...;\r\n        Gson gson = new GsonBuilder()\r\n                .setExclusionStrategies(new ExclusionStrategy() {\r\n                    @Override\r\n                    public boolean shouldSkipField(FieldAttributes f) {\r\n                        return f.getDeclaringClass().equals(User.class)\r\n                                 &amp;&amp; fields != null \r\n                                 &amp;&amp; !fields.contains(f.getFieldName())\r\n                                ;\r\n                    }\r\n    \r\n                    @Override\r\n                    public boolean shouldSkipClass(Class&lt;?&gt; clazz) {\r\n                        return false;\r\n                    }\r\n                }).create();\r\n        return gson.toJson(users); \r\n    }\r\n\r\n\r\n&gt; Came across &quot;https://github.com/monitorjbl/json-view&quot;. But was shot down by the team.\r\n\r\nBtw, Jackson has `@JsonView` annotation support but it does not allow to include/exclude fields dynamically as you want. You can define fields subset and then return these subsets\r\n\r\n    public class Views {\r\n        public static class Short {\r\n        }\r\n    }\r\n    \r\n    public class User {\r\n        @JsonView(Views.Short.class)\r\n        public String city;\r\n    \r\n        @JsonView(Views.Short.class)\r\n        public String name;\r\n    \r\n        public String phone;\r\n    \r\n        public String country;\r\n    }\r\n    \r\n    @GetMapping(&quot;/v1/users&quot;)\r\n    @ResponseBody\r\n    public String getUsers(@RequestParam(required = false) boolean shortView) { \r\n        List&lt;User&gt; users = ...;\r\n        ObjectMapper mapper = new ObjectMapper();\r\n        if (shortView) mapper = mapper.writerWithView(Views.Short.class);\r\n        return mapper.writeValueAsString(users);\r\n    }\r\n\r\n","title":"Modify REST API response to only include fields requested in query parameter","body":"<p><strong>Method 1: Convert objects to Map, remove surplus keys, convert Map to Json</strong></p>\n\n<pre><code>@GetMapping(\"/v1/users\")\n@ResponseBody\npublic List&lt;Map&gt; getUsers(@RequestParam(required = false) Set&lt;String&gt; fields) { \n    List&lt;User&gt; users = ...;\n    ObjectMapper oMapper = new ObjectMapper();\n    return users.stream().map(u -&gt; oMapper.convertValue(u, Map.class))\n       .peek(map -&gt; { \n          if (fields != null) map.keySet().retainAll(fields)\n       })\n       .collect(Collectors.toList());\n}\n</code></pre>\n\n<p><strong>Method 2: Use Gson</strong></p>\n\n<pre><code>@GetMapping(\"/v1/users\")\n@ResponseBody\npublic String getUsers(@RequestParam(required = false) Set&lt;String&gt; fields) { \n    List&lt;User&gt; users = ...;\n    Gson gson = new GsonBuilder()\n            .setExclusionStrategies(new ExclusionStrategy() {\n                @Override\n                public boolean shouldSkipField(FieldAttributes f) {\n                    return f.getDeclaringClass().equals(User.class)\n                             &amp;&amp; fields != null \n                             &amp;&amp; !fields.contains(f.getFieldName())\n                            ;\n                }\n\n                @Override\n                public boolean shouldSkipClass(Class&lt;?&gt; clazz) {\n                    return false;\n                }\n            }).create();\n    return gson.toJson(users); \n}\n</code></pre>\n\n<blockquote>\n  <p>Came across \"<a href=\"https://github.com/monitorjbl/json-view\" rel=\"nofollow noreferrer\">https://github.com/monitorjbl/json-view</a>\". But was shot down by the team.</p>\n</blockquote>\n\n<p>Btw, Jackson has <code>@JsonView</code> annotation support but it does not allow to include/exclude fields dynamically as you want. You can define fields subset and then return these subsets</p>\n\n<pre><code>public class Views {\n    public static class Short {\n    }\n}\n\npublic class User {\n    @JsonView(Views.Short.class)\n    public String city;\n\n    @JsonView(Views.Short.class)\n    public String name;\n\n    public String phone;\n\n    public String country;\n}\n\n@GetMapping(\"/v1/users\")\n@ResponseBody\npublic String getUsers(@RequestParam(required = false) boolean shortView) { \n    List&lt;User&gt; users = ...;\n    ObjectMapper mapper = new ObjectMapper();\n    if (shortView) mapper = mapper.writerWithView(Views.Short.class);\n    return mapper.writeValueAsString(users);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":298886,"reputation":40480,"user_id":605153,"accept_rate":67,"display_name":"Mark Bramnik"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1573479373,"creation_date":1573364438,"answer_id":58786041,"question_id":58785222,"body_markdown":"Here is an another approach:\r\n\r\nAssumption 1: I believe its better to define return type of controller to be a domain object and let spring deal alone with conversion of it to JSON (unlike @Alexander Pavlov&#39;s answer). IMO its better for general code readability and for tools like swagger that \r\nintrospect the controller and should know what should be returned.\r\n\r\nAssumption 2: You don&#39;t have primitives in your User class.\r\n\r\n\r\nOk, now the controller obviously calls some &quot;service&quot; that makes some queries to the db, or in general does some logic that eventually produces the list of users (the list that you return to the client). The return object should be something like this:\r\n\r\n    class Users {\r\n\r\n         private List&lt;User&gt; data;\r\n    }\r\n\r\n    class User { // + constructors, getters, setters, etc.\r\n       private String name;\r\n       private String city;\r\n       private String phone;\r\n       private String country;    \r\n    }\r\n\r\n\r\nIn this case in the service you can place &quot;null&quot; in field that you do not want to return:\r\n\r\n    User user = new User(&quot;John&quot;, &quot;LA&quot;, null, null); // you only have name and city\r\n\r\nNow you can place the annotation `@JsonInclude(Include.NON_NULL)` on class `User` and this will instruct Jackson to not include fields that have value &#39;null&#39; into serialized response at all.\r\n\r\nIf you want this behaviour to be applied globally, you can configure `ObjectMapper` bean:\r\n\r\n     ObjectMapper mapper = new ObjectMapper();\r\n     mapper.setSerializationInclusion(Include.NON_NULL);\r\n\r\n    \r\n\r\n\r\n\r\n\r\n\r\n","title":"Modify REST API response to only include fields requested in query parameter","body":"<p>Here is an another approach:</p>\n\n<p>Assumption 1: I believe its better to define return type of controller to be a domain object and let spring deal alone with conversion of it to JSON (unlike @Alexander Pavlov's answer). IMO its better for general code readability and for tools like swagger that \nintrospect the controller and should know what should be returned.</p>\n\n<p>Assumption 2: You don't have primitives in your User class.</p>\n\n<p>Ok, now the controller obviously calls some \"service\" that makes some queries to the db, or in general does some logic that eventually produces the list of users (the list that you return to the client). The return object should be something like this:</p>\n\n<pre><code>class Users {\n\n     private List&lt;User&gt; data;\n}\n\nclass User { // + constructors, getters, setters, etc.\n   private String name;\n   private String city;\n   private String phone;\n   private String country;    \n}\n</code></pre>\n\n<p>In this case in the service you can place \"null\" in field that you do not want to return:</p>\n\n<pre><code>User user = new User(\"John\", \"LA\", null, null); // you only have name and city\n</code></pre>\n\n<p>Now you can place the annotation <code>@JsonInclude(Include.NON_NULL)</code> on class <code>User</code> and this will instruct Jackson to not include fields that have value 'null' into serialized response at all.</p>\n\n<p>If you want this behaviour to be applied globally, you can configure <code>ObjectMapper</code> bean:</p>\n\n<pre><code> ObjectMapper mapper = new ObjectMapper();\n mapper.setSerializationInclusion(Include.NON_NULL);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17991969,"reputation":21,"user_id":13075873,"display_name":"Kevin Luko"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689166323,"creation_date":1689166323,"answer_id":76670782,"question_id":58785222,"body_markdown":"You can use ```@JsonInclude(JsonInclude.Include. NON_NULL)``` annotation. It should be applied to the class-level, directly above the class declaration. it instructs the Jackson JSON serialization/deserialization process to exclude fields with null values from the resulting JSON representation. \r\n\r\n```\r\nimport com.fasterxml.jackson.annotation.JsonInclude;\r\n\r\n@JsonInclude(JsonInclude.Include.NON_NULL)\r\npublic class ClassABC {\r\n    // Class code here\r\n}","title":"Modify REST API response to only include fields requested in query parameter","body":"<p>You can use <code>@JsonInclude(JsonInclude.Include. NON_NULL)</code> annotation. It should be applied to the class-level, directly above the class declaration. it instructs the Jackson JSON serialization/deserialization process to exclude fields with null values from the resulting JSON representation.</p>\n<pre><code>import com.fasterxml.jackson.annotation.JsonInclude;\n\n@JsonInclude(JsonInclude.Include.NON_NULL)\npublic class ClassABC {\n    // Class code here\n}\n</code></pre>\n"}],"owner":{"account_id":9235697,"reputation":115,"user_id":6860417,"display_name":"nash"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5834,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":3,"score":4,"last_activity_date":1689178010,"creation_date":1573352360,"question_id":58785222,"body_markdown":"I want to send response containing only requested fields for GET API. Reducing total size of response.\r\n\r\nExample,\r\nDefault behavior, when to specific fields requested:\r\n\r\n    GET /v1/users/\r\n    \r\n    {\r\n       &quot;data&quot; : \r\n         [\r\n            {\r\n                &quot;name&quot; : &quot;User1&quot;,\r\n                &quot;phone&quot; : &quot;800-999-9999&quot;,\r\n                &quot;city&quot; : &quot;XYZ1&quot;,\r\n                &quot;country&quot; : &quot;PQR1&quot;\r\n            },\r\n            {\r\n                &quot;name&quot; : &quot;User2&quot;,\r\n                &quot;phone&quot; : &quot;800-999-9999&quot;,\r\n                &quot;city&quot; : &quot;XYZ2&quot;,\r\n                &quot;country&quot; : &quot;PQR2&quot;\r\n             }\r\n         ]\r\n    }\r\n\r\n\r\nUse case, where fields needed are passed as query parameters\r\n\r\n\r\n    GET /v1/users/?fields=name,city\r\n    \r\n    {\r\n       &quot;data&quot; : \r\n         [\r\n            {\r\n                &quot;name&quot; : &quot;User1&quot;,\r\n                &quot;city&quot; : &quot;XYZ1&quot;\r\n            },\r\n            {\r\n                &quot;name&quot; : &quot;User2&quot;,\r\n                &quot;city&quot; : &quot;XYZ2&quot;\r\n             }\r\n         ]\r\n    }\r\n\r\n\r\nCame across &quot;https://github.com/monitorjbl/json-view&quot;. But was shot down by the team.\r\n\r\nHow can I implement this functionality using spring boot? How do organizations using java microservices implement this feature? ","title":"Modify REST API response to only include fields requested in query parameter","body":"<p>I want to send response containing only requested fields for GET API. Reducing total size of response.</p>\n<p>Example,\nDefault behavior, when to specific fields requested:</p>\n<pre><code>GET /v1/users/\n\n{\n   &quot;data&quot; : \n     [\n        {\n            &quot;name&quot; : &quot;User1&quot;,\n            &quot;phone&quot; : &quot;800-999-9999&quot;,\n            &quot;city&quot; : &quot;XYZ1&quot;,\n            &quot;country&quot; : &quot;PQR1&quot;\n        },\n        {\n            &quot;name&quot; : &quot;User2&quot;,\n            &quot;phone&quot; : &quot;800-999-9999&quot;,\n            &quot;city&quot; : &quot;XYZ2&quot;,\n            &quot;country&quot; : &quot;PQR2&quot;\n         }\n     ]\n}\n</code></pre>\n<p>Use case, where fields needed are passed as query parameters</p>\n<pre><code>GET /v1/users/?fields=name,city\n\n{\n   &quot;data&quot; : \n     [\n        {\n            &quot;name&quot; : &quot;User1&quot;,\n            &quot;city&quot; : &quot;XYZ1&quot;\n        },\n        {\n            &quot;name&quot; : &quot;User2&quot;,\n            &quot;city&quot; : &quot;XYZ2&quot;\n         }\n     ]\n}\n</code></pre>\n<p>Came across &quot;https://github.com/monitorjbl/json-view&quot;. But was shot down by the team.</p>\n<p>How can I implement this functionality using spring boot? How do organizations using java microservices implement this feature?</p>\n"},{"tags":["java","spring-boot","spring-data-jpa","persistence"],"comments":[{"owner":{"account_id":15258408,"reputation":972,"user_id":11009351,"display_name":"Kemal Kaplan"},"score":1,"creation_date":1628152028,"post_id":68662951,"comment_id":121345913,"body_markdown":"Please add  @Transactional annotation to the function. Or decorate your service class with this annotation if this is a part of a transaction which contains more than one DML.","body":"Please add  @Transactional annotation to the function. Or decorate your service class with this annotation if this is a part of a transaction which contains more than one DML."},{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1628153762,"post_id":68662951,"comment_id":121346586,"body_markdown":"Not the class! The method must be Transactional","body":"Not the class! The method must be Transactional"},{"owner":{"account_id":10484756,"reputation":847,"user_id":7728676,"display_name":"lewis machilika"},"score":0,"creation_date":1628154103,"post_id":68662951,"comment_id":121346718,"body_markdown":"There is no any other function.","body":"There is no any other function."},{"owner":{"account_id":10484756,"reputation":847,"user_id":7728676,"display_name":"lewis machilika"},"score":0,"creation_date":1628154479,"post_id":68662951,"comment_id":121346883,"body_markdown":"I tried changing interface to @Transactional not working aswel","body":"I tried changing interface to @Transactional not working aswel"},{"owner":{"account_id":951981,"reputation":14760,"user_id":977919,"accept_rate":92,"display_name":"sidgate"},"score":0,"creation_date":1628158383,"post_id":68662951,"comment_id":121348480,"body_markdown":"share the complete stack trace","body":"share the complete stack trace"}],"answers":[{"tags":[],"owner":{"account_id":3923602,"reputation":738,"user_id":3244998,"display_name":"thepaoloboi"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1628160080,"creation_date":1628160080,"answer_id":68665056,"question_id":68662951,"body_markdown":"Given your `ApplicationRepository`, I am assuming that you are using Spring JPA.\r\n\r\nThe exception you are facing to is `javax.persistence.TransactionRequiredException`.\r\n\r\nYou have already added `@Transactional` annotation to the repository, but please make sure that the import which you are using for is **`org.springframework.transaction.annotation.Transactional`**, because it seems that you might be using `javax.transaction.Transactional`.\r\n\r\nI also suggest to you to use `@Transactional` on the class/method of the repository consumer.","title":"Executing an update/delete query; nested exception is javax.persistence.TransactionRequiredException: Executing an update/delete query","body":"<p>Given your <code>ApplicationRepository</code>, I am assuming that you are using Spring JPA.</p>\n<p>The exception you are facing to is <code>javax.persistence.TransactionRequiredException</code>.</p>\n<p>You have already added <code>@Transactional</code> annotation to the repository, but please make sure that the import which you are using for is <strong><code>org.springframework.transaction.annotation.Transactional</code></strong>, because it seems that you might be using <code>javax.transaction.Transactional</code>.</p>\n<p>I also suggest to you to use <code>@Transactional</code> on the class/method of the repository consumer.</p>\n"},{"tags":[],"owner":{"account_id":29003908,"reputation":1,"user_id":22216920,"display_name":"aidara aidara"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689177917,"creation_date":1689177917,"answer_id":76672514,"question_id":68662951,"body_markdown":"@Transactional instead of @Transaction you have made @Transaction this is the issues","title":"Executing an update/delete query; nested exception is javax.persistence.TransactionRequiredException: Executing an update/delete query","body":"<p>@Transactional instead of @Transaction you have made @Transaction this is the issues</p>\n"}],"owner":{"account_id":10484756,"reputation":847,"user_id":7728676,"display_name":"lewis machilika"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23512,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":68665056,"answer_count":2,"score":5,"last_activity_date":1689177917,"creation_date":1628151490,"question_id":68662951,"body_markdown":"I have tried various suggestions on solving the above error but its still there. Below is my repository. How can I solve this? \r\n```\r\n@Transaction\r\npublic interface ApplicationRepository extends JpaRepository&lt;Application, BigInteger&gt; {\r\n\r\n    @Modifying\r\n    @Query(nativeQuery = true, value = &quot;update application set transaction_status = :transaction_status where id =:id&quot;)\r\n    void updateStatus(@Param(&quot;transaction_status&quot;) int transaction_status, @Param(&quot;id&quot;) BigInteger id);\r\n}\r\n```","title":"Executing an update/delete query; nested exception is javax.persistence.TransactionRequiredException: Executing an update/delete query","body":"<p>I have tried various suggestions on solving the above error but its still there. Below is my repository. How can I solve this?</p>\n<pre><code>@Transaction\npublic interface ApplicationRepository extends JpaRepository&lt;Application, BigInteger&gt; {\n\n    @Modifying\n    @Query(nativeQuery = true, value = &quot;update application set transaction_status = :transaction_status where id =:id&quot;)\n    void updateStatus(@Param(&quot;transaction_status&quot;) int transaction_status, @Param(&quot;id&quot;) BigInteger id);\n}\n</code></pre>\n"},{"tags":["java","sql","jdbc"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1689168742,"post_id":76671060,"comment_id":135175268,"body_markdown":"*String nr = rs.getString(&quot;a1atnr&quot;);* should be in your `else` block. Also, you should really only use [all caps for constants](https://technojeeves.com/index.php/aliasjava1/106-java-style-conventions)","body":"<i>String nr = rs.getString(&quot;a1atnr&quot;);</i> should be in your <code>else</code> block. Also, you should really only use <a href=\"https://technojeeves.com/index.php/aliasjava1/106-java-style-conventions\" rel=\"nofollow noreferrer\">all caps for constants</a>"},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1689169126,"post_id":76671060,"comment_id":135175381,"body_markdown":"I&#39;d remove the `;` from your query in the Java code for now, and I&#39;d also try without re-use of the PreparedStatement. Do the tables have shared column names? If so, you may want table aliases as stated below, but that doesn&#39;t explain them working elsewhere","body":"I&#39;d remove the <code>;</code> from your query in the Java code for now, and I&#39;d also try without re-use of the PreparedStatement. Do the tables have shared column names? If so, you may want table aliases as stated below, but that doesn&#39;t explain them working elsewhere"},{"owner":{"account_id":26909570,"reputation":23,"user_id":20485378,"display_name":"Splatted I0I"},"score":0,"creation_date":1689169208,"post_id":76671060,"comment_id":135175404,"body_markdown":"I have tried removing the comma, also the column names are all unique","body":"I have tried removing the comma, also the column names are all unique"}],"answers":[{"tags":[],"owner":{"account_id":26758492,"reputation":46,"user_id":20356781,"display_name":"Pyaeth"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1689177559,"creation_date":1689168740,"answer_id":76671156,"question_id":76671060,"body_markdown":"could you try adding aliases for the two tables in your FROM clause and use them in the ON clause like this:\r\n````\r\n&quot;SELECT a1atnr &quot; +\r\n&quot;FROM market.a1 a1Table INNER JOIN market.asol asolTable &quot; +\r\n&quot;ON a1Table.a1atnr = asolTable.asoatnr &quot; +\r\n&quot;WHERE asoatikid = ?;&quot;;\r\n````","title":"ResultSet Empty but SQL Statement correct","body":"<p>could you try adding aliases for the two tables in your FROM clause and use them in the ON clause like this:</p>\n<pre><code>&quot;SELECT a1atnr &quot; +\n&quot;FROM market.a1 a1Table INNER JOIN market.asol asolTable &quot; +\n&quot;ON a1Table.a1atnr = asolTable.asoatnr &quot; +\n&quot;WHERE asoatikid = ?;&quot;;\n</code></pre>\n"}],"owner":{"account_id":26909570,"reputation":23,"user_id":20485378,"display_name":"Splatted I0I"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76671156,"answer_count":1,"score":1,"last_activity_date":1689177559,"creation_date":1689168074,"question_id":76671060,"body_markdown":"I&#39;m trying to SELECT a column from my table, but the ResultSet is always empty. \r\nThe SQL Statement works as expected when I try it in the IntelliJ database tool and I even printed it out using System.out.print and put it into the sql query tool and it works.\r\n\r\nBecause the ResultSet is empty I keep getting the error &quot;ResultSet is not positioned correctly&quot; (I tried writing rs.next but it didn&#39;t work) \r\n\r\nHere is the code\r\n\r\n    private final String HELP_STATEMENT_STR =\r\n                    &quot;SELECT a1atnr &quot; +\r\n                    &quot;FROM market.a1 INNER JOIN market.asol ON a1atnr = asoatnr &quot; +\r\n                    &quot;WHERE asoatikid = ?;&quot;;\r\n        \r\n    private PreparedStatement HELP_STATEMENT;\r\n\r\n    public List&lt;Long&gt; deleteArticle(String ext_article_nr) throws SQLException {\r\n        if (HELP_STATEMENT == null){\r\n            HELP_STATEMENT = database.getConnection().prepareStatement(HELP_STATEMENT_STR);\r\n        }\r\n        HELP_STATEMENT.setString(1, ext_article_nr);\r\n        System.out.println(HELP_STATEMENT.toString());\r\n        ResultSet rs = HELP_STATEMENT.executeQuery();\r\n        if (!rs.next()){\r\n            System.out.println(&quot;ResultSet is empty&quot;);\r\n        } else {\r\n            System.out.println(&quot;ResultSet is not empty&quot;);\r\n        }\r\n        String nr = rs.getString(&quot;a1atnr&quot;);\r\n    }\r\nI also tried using a normal Statement instead of a prepareStatement but the results are exactly the same\r\n\r\nAny help would be appreciated ","title":"ResultSet Empty but SQL Statement correct","body":"<p>I'm trying to SELECT a column from my table, but the ResultSet is always empty.\nThe SQL Statement works as expected when I try it in the IntelliJ database tool and I even printed it out using System.out.print and put it into the sql query tool and it works.</p>\n<p>Because the ResultSet is empty I keep getting the error &quot;ResultSet is not positioned correctly&quot; (I tried writing rs.next but it didn't work)</p>\n<p>Here is the code</p>\n<pre><code>private final String HELP_STATEMENT_STR =\n                &quot;SELECT a1atnr &quot; +\n                &quot;FROM market.a1 INNER JOIN market.asol ON a1atnr = asoatnr &quot; +\n                &quot;WHERE asoatikid = ?;&quot;;\n    \nprivate PreparedStatement HELP_STATEMENT;\n\npublic List&lt;Long&gt; deleteArticle(String ext_article_nr) throws SQLException {\n    if (HELP_STATEMENT == null){\n        HELP_STATEMENT = database.getConnection().prepareStatement(HELP_STATEMENT_STR);\n    }\n    HELP_STATEMENT.setString(1, ext_article_nr);\n    System.out.println(HELP_STATEMENT.toString());\n    ResultSet rs = HELP_STATEMENT.executeQuery();\n    if (!rs.next()){\n        System.out.println(&quot;ResultSet is empty&quot;);\n    } else {\n        System.out.println(&quot;ResultSet is not empty&quot;);\n    }\n    String nr = rs.getString(&quot;a1atnr&quot;);\n}\n</code></pre>\n<p>I also tried using a normal Statement instead of a prepareStatement but the results are exactly the same</p>\n<p>Any help would be appreciated</p>\n"},{"tags":["javascript","java","gwt","smartgwt","smartclient"],"owner":{"account_id":29003325,"reputation":1,"user_id":22216459,"display_name":"java_dev8604"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689176834,"creation_date":1689175539,"question_id":76672195,"body_markdown":"I have a SelectItem component attached to a Dynamic form. the component has a valueMap set and there is no explicit operator set by me. According to the Smart GWT java docs, the default search operator for fields in a form that produces a AdvancedCriteria is &quot;iContains&quot; but it does not apply to special fields where exact match is obviously the right default setting, such as fields of type:&quot;enum&quot;, or fields with a valueMap or optionDataSource.\r\n\r\nhttps://smartclient.com/smartgwt/javadoc/com/smartgwt/client/widgets/form/fields/FormItem.html#getOperator--\r\n\r\nhttps://smartclient.com/smartgwt/javadoc/com/smartgwt/client/widgets/form/DynamicForm.html#getDefaultSearchOperator--\r\n\r\nI should be getting &quot;equals&quot; operator but instead i&#39;m getting &quot;iContains&quot;. Am I missing any configuration? What am I doing wrong? I&#39;ll be greatly appreciative of your help.\r\n\r\nCode Sample:\r\n```\r\nSelectItem selectItem = new SelectItem(WorkDS.STATUS, &quot;Status&quot;);\r\nselectItem.setValueMap(&quot;SCHEDULED&quot;, &quot;COMPLETED&quot;, &quot;VERIFIED&quot;);\r\nselectItem.setWidth(&quot;150&quot;);\r\n```\r\nsetting the form items:\r\n`form.setItems(...,selectItem,....);`\r\n\r\nI&#39;m getting the AdvancedCriteria through the method DynamicForm.getValuesAsAdvancedCriteria()\r\n\r\n```\r\nAdvancedCriteria ac = form.getValuesAsAdvancedCriteria();\r\n```\r\n\r\n\r\n\r\nI did some digging and found out that earlier Smart GWT used to return &quot;equals&quot; operator if the field has a valueMap, or a optionDatasource etc. Inline with the documentation. But in the latest version (v13) it first gets the default operator (&quot;iContains&quot;) based on the field type which is &#39;text&#39; and then performs some checks and based on that decides whether to return &quot;equals&quot; or the default operator.\r\n\r\nit gets the default operator\r\n```\r\n_4 = isc.SimpleType.getDefaultOperator(this.getType())\r\n```\r\n\r\nthen goes on to perform the check below. _5 is set to true only of we have a operator set for the field, which in my case is false. _3 remains undefined. allowExpressions property is not set on my form so it is false. _4 is equal to &quot;iContains&quot;. _7 evaluates to be true.\r\n```\r\nvar _7 = _3 || _5 || (!_5 &amp;&amp; _4 &amp;&amp; !(this.form &amp;&amp; this.form.allowExpressions &amp;&amp; _4 == &quot;iContains&quot;));\r\n _4 = this.$199l(_1, _2, _7, _4);\r\n```\r\n\r\n```\r\n$199l = function FormItem__getDefaultOperator(_1, _2, _3, _4) {\r\n        var _5 = this.getValidOperators();\r\n        var _6 = this.getType();\r\n        if (this.valueMap || this.optionDataSource || SimpleType.inheritsFrom(_6, &quot;enum&quot;) || SimpleType.inheritsFrom(_6, &quot;boolean&quot;) || SimpleType.inheritsFrom(_6, &quot;float&quot;) || SimpleType.inheritsFrom(_6, &quot;integer&quot;) || SimpleType.inheritsFrom(_6, &quot;date&quot;) || SimpleType.inheritsFrom(_6, &quot;datetime&quot;) || SimpleType.inheritsFrom(_6, &quot;time&quot;)) {\r\n            return _3 ? _4 : &quot;equals&quot;\r\n        } else {\r\n            var _7 = _3 ? null : &quot;iContains&quot;;\r\n            if (this.form) {\r\n                _7 = this.form.defaultSearchOperator || (_3 ? null : (this.form.allowExpressions ? &quot;iContainsPattern&quot; : &quot;iContains&quot;));\r\n                var _8 = this.form.getDataSource()\r\n                  , _9 = _8 &amp;&amp; _8.getFieldOperators(this.name)\r\n                  , _10 = _9 &amp;&amp; _9.contains(_7);\r\n                if (!_10 &amp;&amp; _9) {\r\n                    if (_3)\r\n                        return _4;\r\n                    _7 = _9[0]\r\n                }\r\n            }\r\n            return DataSource.getCriteriaOperator(null, _1, _7, _3) || _4\r\n        }\r\n    }\r\n```\r\n\r\nhere it checks for the valueMap and returns the operator based on _3 which is the same value as _7.\r\n\r\nI don&#39;t want to change my code since then I&#39;d have to make changes in several places. I expect the framework to return &quot;equals&quot; operator for the fields for which a valueMap is set, and as mentioned in the documents. Does anyone else have come across this issue? if yes, were you able to resolve it? Any kind of help is appreciated.","title":"Getting unexpected operator in advance criteria generated by dynamic form - smart gwt v13.0p","body":"<p>I have a SelectItem component attached to a Dynamic form. the component has a valueMap set and there is no explicit operator set by me. According to the Smart GWT java docs, the default search operator for fields in a form that produces a AdvancedCriteria is &quot;iContains&quot; but it does not apply to special fields where exact match is obviously the right default setting, such as fields of type:&quot;enum&quot;, or fields with a valueMap or optionDataSource.</p>\n<p><a href=\"https://smartclient.com/smartgwt/javadoc/com/smartgwt/client/widgets/form/fields/FormItem.html#getOperator--\" rel=\"nofollow noreferrer\">https://smartclient.com/smartgwt/javadoc/com/smartgwt/client/widgets/form/fields/FormItem.html#getOperator--</a></p>\n<p><a href=\"https://smartclient.com/smartgwt/javadoc/com/smartgwt/client/widgets/form/DynamicForm.html#getDefaultSearchOperator--\" rel=\"nofollow noreferrer\">https://smartclient.com/smartgwt/javadoc/com/smartgwt/client/widgets/form/DynamicForm.html#getDefaultSearchOperator--</a></p>\n<p>I should be getting &quot;equals&quot; operator but instead i'm getting &quot;iContains&quot;. Am I missing any configuration? What am I doing wrong? I'll be greatly appreciative of your help.</p>\n<p>Code Sample:</p>\n<pre><code>SelectItem selectItem = new SelectItem(WorkDS.STATUS, &quot;Status&quot;);\nselectItem.setValueMap(&quot;SCHEDULED&quot;, &quot;COMPLETED&quot;, &quot;VERIFIED&quot;);\nselectItem.setWidth(&quot;150&quot;);\n</code></pre>\n<p>setting the form items:\n<code>form.setItems(...,selectItem,....);</code></p>\n<p>I'm getting the AdvancedCriteria through the method DynamicForm.getValuesAsAdvancedCriteria()</p>\n<pre><code>AdvancedCriteria ac = form.getValuesAsAdvancedCriteria();\n</code></pre>\n<p>I did some digging and found out that earlier Smart GWT used to return &quot;equals&quot; operator if the field has a valueMap, or a optionDatasource etc. Inline with the documentation. But in the latest version (v13) it first gets the default operator (&quot;iContains&quot;) based on the field type which is 'text' and then performs some checks and based on that decides whether to return &quot;equals&quot; or the default operator.</p>\n<p>it gets the default operator</p>\n<pre><code>_4 = isc.SimpleType.getDefaultOperator(this.getType())\n</code></pre>\n<p>then goes on to perform the check below. _5 is set to true only of we have a operator set for the field, which in my case is false. _3 remains undefined. allowExpressions property is not set on my form so it is false. _4 is equal to &quot;iContains&quot;. _7 evaluates to be true.</p>\n<pre><code>var _7 = _3 || _5 || (!_5 &amp;&amp; _4 &amp;&amp; !(this.form &amp;&amp; this.form.allowExpressions &amp;&amp; _4 == &quot;iContains&quot;));\n _4 = this.$199l(_1, _2, _7, _4);\n</code></pre>\n<pre><code>$199l = function FormItem__getDefaultOperator(_1, _2, _3, _4) {\n        var _5 = this.getValidOperators();\n        var _6 = this.getType();\n        if (this.valueMap || this.optionDataSource || SimpleType.inheritsFrom(_6, &quot;enum&quot;) || SimpleType.inheritsFrom(_6, &quot;boolean&quot;) || SimpleType.inheritsFrom(_6, &quot;float&quot;) || SimpleType.inheritsFrom(_6, &quot;integer&quot;) || SimpleType.inheritsFrom(_6, &quot;date&quot;) || SimpleType.inheritsFrom(_6, &quot;datetime&quot;) || SimpleType.inheritsFrom(_6, &quot;time&quot;)) {\n            return _3 ? _4 : &quot;equals&quot;\n        } else {\n            var _7 = _3 ? null : &quot;iContains&quot;;\n            if (this.form) {\n                _7 = this.form.defaultSearchOperator || (_3 ? null : (this.form.allowExpressions ? &quot;iContainsPattern&quot; : &quot;iContains&quot;));\n                var _8 = this.form.getDataSource()\n                  , _9 = _8 &amp;&amp; _8.getFieldOperators(this.name)\n                  , _10 = _9 &amp;&amp; _9.contains(_7);\n                if (!_10 &amp;&amp; _9) {\n                    if (_3)\n                        return _4;\n                    _7 = _9[0]\n                }\n            }\n            return DataSource.getCriteriaOperator(null, _1, _7, _3) || _4\n        }\n    }\n</code></pre>\n<p>here it checks for the valueMap and returns the operator based on _3 which is the same value as _7.</p>\n<p>I don't want to change my code since then I'd have to make changes in several places. I expect the framework to return &quot;equals&quot; operator for the fields for which a valueMap is set, and as mentioned in the documents. Does anyone else have come across this issue? if yes, were you able to resolve it? Any kind of help is appreciated.</p>\n"},{"tags":["java","selenium-webdriver","cookies","automation"],"comments":[{"owner":{"account_id":7912553,"reputation":345,"user_id":5976130,"display_name":"Samira Kumar Nanda"},"score":1,"creation_date":1689180185,"post_id":76672354,"comment_id":135178051,"body_markdown":"In Java, using Selenium WebDriver, it is not possible to add cookies to a website before the page loads. The reason is that the cookies are associated with a specific domain, and the WebDriver needs to have a session with that domain in order to add cookies successfully.\nWhen you create a new WebDriver session, it starts with an incognito mode with nothing associated, meaning it has no cookies or session information. You need to navigate to the website first before you can add cookies to that domain.","body":"In Java, using Selenium WebDriver, it is not possible to add cookies to a website before the page loads. The reason is that the cookies are associated with a specific domain, and the WebDriver needs to have a session with that domain in order to add cookies successfully. When you create a new WebDriver session, it starts with an incognito mode with nothing associated, meaning it has no cookies or session information. You need to navigate to the website first before you can add cookies to that domain."}],"owner":{"account_id":29003330,"reputation":1,"user_id":22216463,"display_name":"Dmitry Ulasevich"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689176794,"creation_date":1689176684,"question_id":76672354,"body_markdown":"Is that possible to add cookies using Java before the page load? Or the only way is to go to the site first and only then the cookies can be added?\r\n\r\nI&#39;m logging to the Site1 in session1 and have cookies saved. Then I start a new session2 in a different browser and want to have cookies added before I visit Site1 in order to avoid logging again (the site is designed in the way I will always get login screen if I have no active session). But I&#39;m not sure how to add them since there is no site specified in the Cookies storage yet (https://i.stack.imgur.com/TODvI.png)\r\n\r\nI know there is driver.manage().addCookie() method which can be used, but this is working correctly only if we have the site opened, otherwise I&#39;m getting InvalidCookieDomainException. In my case I&#39;m trying to achieve the situation when I add cookies first and then visit the site - this way I should not get the login screen since I have cookies added.\r\n\r\n\r\n\r\nI was unable to find the solution on the internet, trying to understand if that&#39;s possible at all.","title":"Add cokies using Java before page load","body":"<p>Is that possible to add cookies using Java before the page load? Or the only way is to go to the site first and only then the cookies can be added?</p>\n<p>I'm logging to the Site1 in session1 and have cookies saved. Then I start a new session2 in a different browser and want to have cookies added before I visit Site1 in order to avoid logging again (the site is designed in the way I will always get login screen if I have no active session). But I'm not sure how to add them since there is no site specified in the Cookies storage yet (<a href=\"https://i.stack.imgur.com/TODvI.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/TODvI.png</a>)</p>\n<p>I know there is driver.manage().addCookie() method which can be used, but this is working correctly only if we have the site opened, otherwise I'm getting InvalidCookieDomainException. In my case I'm trying to achieve the situation when I add cookies first and then visit the site - this way I should not get the login screen since I have cookies added.</p>\n<p>I was unable to find the solution on the internet, trying to understand if that's possible at all.</p>\n"},{"tags":["java","flutter","plugins"],"owner":{"account_id":19235430,"reputation":431,"user_id":14056496,"display_name":"jdevp2"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1689176195,"creation_date":1689176195,"question_id":76672287,"body_markdown":"I&#39;m writing a screen recoding Flutter plugin. The recoding activity stops whenever the device is rotated and the plugin is detached from the engine.  How can I prevent that from happening so the recording will continue? \r\n\r\n    @Override\r\n        public void onAttachedToEngine(@NonNull FlutterPluginBinding binding) {\r\n            context = binding.getApplicationContext();\r\n            methodChannel = new MethodChannel(binding.getBinaryMessenger(), CHANNEL_NAME);\r\n            methodChannel.setMethodCallHandler(this);\r\n        }\r\n        @Override\r\n        public void onDetachedFromEngine(@NonNull FlutterPluginBinding binding) {\r\n            methodChannel.setMethodCallHandler(null);\r\n            methodChannel = null;\r\n            context = null;\r\n            System.out.println(&quot;detaching engine&quot;);\r\n        }\r\n        @Override\r\n        public void onAttachedToActivity(@NonNull ActivityPluginBinding binding) {\r\n            activity = binding.getActivity();\r\n            binding.addActivityResultListener(this);\r\n            if (activity != null) {\r\n                activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LOCKED);\r\n            }\r\n        }\r\n\r\n","title":"How to prevent Flutter plugin from detaching from engine when a device is rotated?","body":"<p>I'm writing a screen recoding Flutter plugin. The recoding activity stops whenever the device is rotated and the plugin is detached from the engine.  How can I prevent that from happening so the recording will continue?</p>\n<pre><code>@Override\n    public void onAttachedToEngine(@NonNull FlutterPluginBinding binding) {\n        context = binding.getApplicationContext();\n        methodChannel = new MethodChannel(binding.getBinaryMessenger(), CHANNEL_NAME);\n        methodChannel.setMethodCallHandler(this);\n    }\n    @Override\n    public void onDetachedFromEngine(@NonNull FlutterPluginBinding binding) {\n        methodChannel.setMethodCallHandler(null);\n        methodChannel = null;\n        context = null;\n        System.out.println(&quot;detaching engine&quot;);\n    }\n    @Override\n    public void onAttachedToActivity(@NonNull ActivityPluginBinding binding) {\n        activity = binding.getActivity();\n        binding.addActivityResultListener(this);\n        if (activity != null) {\n            activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LOCKED);\n        }\n    }\n</code></pre>\n"},{"tags":["java","mapstruct"],"comments":[{"owner":{"account_id":14162458,"reputation":3900,"user_id":10231374,"display_name":"Toni"},"score":0,"creation_date":1688661482,"post_id":76628936,"comment_id":135107165,"body_markdown":"Does this answer your question? [MapStruct mapper error: Unknown property &quot;propertyName&quot; in result type Dto. Did you mean &quot;null&quot;?](https://stackoverflow.com/questions/73240057/mapstruct-mapper-error-unknown-property-propertyname-in-result-type-dto-did)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/73240057/mapstruct-mapper-error-unknown-property-propertyname-in-result-type-dto-did\">MapStruct mapper error: Unknown property &quot;propertyName&quot; in result type Dto. Did you mean &quot;null&quot;?</a>"},{"owner":{"account_id":11165474,"reputation":110,"user_id":8194286,"display_name":"xKrasusX"},"score":0,"creation_date":1688713811,"post_id":76628936,"comment_id":135113448,"body_markdown":"No, that&#39;s not my case. I don&#39;t have Lombok in my project.","body":"No, that&#39;s not my case. I don&#39;t have Lombok in my project."},{"owner":{"account_id":1128956,"reputation":19765,"user_id":1115491,"display_name":"Filip"},"score":0,"creation_date":1689489955,"post_id":76628936,"comment_id":135218860,"body_markdown":"This should work out of the box. Can you please raise an issue in the MapStruct project?","body":"This should work out of the box. Can you please raise an issue in the MapStruct project?"}],"answers":[{"tags":[],"owner":{"account_id":11165474,"reputation":110,"user_id":8194286,"display_name":"xKrasusX"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689000263,"creation_date":1689000263,"answer_id":76654874,"question_id":76628936,"body_markdown":"I think I figured this out. I need to use `@MapperConfig`:\r\n\r\n    @MapperConfig\r\n    public interface VehicleMapperConfig {\r\n        @Mapping(target = &quot;name&quot;, constant = &quot;noname&quot;)\r\n        void mapVehicleToDto(Vehicle vehicle, @MappingTarget VehicleDto target);\r\n    }\r\n\r\n    @Mapper(config = VehicleMapperConfig.class, subclassExhaustiveStrategy = RUNTIME_EXCEPTION)\r\n    public interface VehicleMapper {\r\n        @InheritConfiguration(name = &quot;mapVehicleToDto&quot;)\r\n        @SubclassMapping(target = CarDto.class, source = Car.class)\r\n        @SubclassMapping(target = MotorbikeDto.class, source = Motorbike.class)\r\n        VehicleDto mapToDto(Vehicle vehicle);\r\n    }\r\n\r\nWith this solution the superclass field `name` is mapped properly.\r\n\r\n","title":"Mapstruct - abstract target class fields mapping","body":"<p>I think I figured this out. I need to use <code>@MapperConfig</code>:</p>\n<pre><code>@MapperConfig\npublic interface VehicleMapperConfig {\n    @Mapping(target = &quot;name&quot;, constant = &quot;noname&quot;)\n    void mapVehicleToDto(Vehicle vehicle, @MappingTarget VehicleDto target);\n}\n\n@Mapper(config = VehicleMapperConfig.class, subclassExhaustiveStrategy = RUNTIME_EXCEPTION)\npublic interface VehicleMapper {\n    @InheritConfiguration(name = &quot;mapVehicleToDto&quot;)\n    @SubclassMapping(target = CarDto.class, source = Car.class)\n    @SubclassMapping(target = MotorbikeDto.class, source = Motorbike.class)\n    VehicleDto mapToDto(Vehicle vehicle);\n}\n</code></pre>\n<p>With this solution the superclass field <code>name</code> is mapped properly.</p>\n"}],"owner":{"account_id":11165474,"reputation":110,"user_id":8194286,"display_name":"xKrasusX"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":230,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689175956,"creation_date":1688647186,"question_id":76628936,"body_markdown":"Source classes:\r\n\r\n    public abstract class Vehicle {\r\n        private final String name; // with getter\r\n    }\r\n    public class Car extends Vehicle {\r\n        private final int numOfDoors; // with getter\r\n    }\r\n    public class Motorbike extends Vehicle {\r\n        private final boolean allowedForMinor; // with getter\r\n    }\r\n\r\nTarget classes:\r\n\r\n    public abstract class VehicleDto {\r\n        private final String name;\r\n        public VehicleDto(String name) {\r\n            this.name = name;\r\n        }\r\n    }\r\n    public class CarDto extends VehicleDto {\r\n        private final int numOfDoors;\r\n        public CarDto(String name, int numOfDoors) {\r\n            super(name);\r\n            this.numOfDoors = numOfDoors;\r\n        }\r\n    }\r\n    public class MotorbikeDto extends VehicleDto {\r\n        private final boolean allowedForMinor;\r\n        public MotorbikeDto(String name, boolean allowedForMinor) {\r\n            super(name);\r\n            this.allowedForMinor = allowedForMinor;\r\n        }\r\n    }\r\n\r\nMapper config:\r\n\r\n    @Mapper(subclassExhaustiveStrategy = SubclassExhaustiveStrategy.RUNTIME_EXCEPTION)\r\n    public interface VehicleMapper {\r\n        @SubclassMapping(target = CarDto.class, source = Car.class)\r\n        @SubclassMapping(target = MotorbikeDto.class, source = Motorbike.class)\r\n        VehicleDto mapToDto(Vehicle vehicle);\r\n    }\r\n\r\nEverything works fine so far, the mapper class is generated and mapping correctly all the fields.\r\nThe problem occurs when I&#39;m trying to add anything related to `name` field in VehicleDto, for example:\r\n\r\n    @Mapper(subclassExhaustiveStrategy = SubclassExhaustiveStrategy.RUNTIME_EXCEPTION)\r\n    public interface VehicleMapper {\r\n        @SubclassMapping(target = CarDto.class, source = Car.class)\r\n        @SubclassMapping(target = MotorbikeDto.class, source = Motorbike.class)\r\n        @Mapping(target = &quot;name&quot;, constant = &quot;noname&quot;) // &lt;-------- added this one --------\r\n        VehicleDto mapToDto(Vehicle vehicle);\r\n    }\r\n\r\nIn this case I&#39;m getting a compilation error:\r\n\r\n&gt; Unknown property &quot;name&quot; in result type VehicleDto. Did you mean\r\n&gt; &quot;null&quot;?\r\n\r\nHow can Mapstruct recognize the field `name` by default, and not with custom config? Is there a clean Mapstruct way to fix this, preferably without any changes to the source/target classes?\r\n\r\n\r\n","title":"Mapstruct - abstract target class fields mapping","body":"<p>Source classes:</p>\n<pre><code>public abstract class Vehicle {\n    private final String name; // with getter\n}\npublic class Car extends Vehicle {\n    private final int numOfDoors; // with getter\n}\npublic class Motorbike extends Vehicle {\n    private final boolean allowedForMinor; // with getter\n}\n</code></pre>\n<p>Target classes:</p>\n<pre><code>public abstract class VehicleDto {\n    private final String name;\n    public VehicleDto(String name) {\n        this.name = name;\n    }\n}\npublic class CarDto extends VehicleDto {\n    private final int numOfDoors;\n    public CarDto(String name, int numOfDoors) {\n        super(name);\n        this.numOfDoors = numOfDoors;\n    }\n}\npublic class MotorbikeDto extends VehicleDto {\n    private final boolean allowedForMinor;\n    public MotorbikeDto(String name, boolean allowedForMinor) {\n        super(name);\n        this.allowedForMinor = allowedForMinor;\n    }\n}\n</code></pre>\n<p>Mapper config:</p>\n<pre><code>@Mapper(subclassExhaustiveStrategy = SubclassExhaustiveStrategy.RUNTIME_EXCEPTION)\npublic interface VehicleMapper {\n    @SubclassMapping(target = CarDto.class, source = Car.class)\n    @SubclassMapping(target = MotorbikeDto.class, source = Motorbike.class)\n    VehicleDto mapToDto(Vehicle vehicle);\n}\n</code></pre>\n<p>Everything works fine so far, the mapper class is generated and mapping correctly all the fields.\nThe problem occurs when I'm trying to add anything related to <code>name</code> field in VehicleDto, for example:</p>\n<pre><code>@Mapper(subclassExhaustiveStrategy = SubclassExhaustiveStrategy.RUNTIME_EXCEPTION)\npublic interface VehicleMapper {\n    @SubclassMapping(target = CarDto.class, source = Car.class)\n    @SubclassMapping(target = MotorbikeDto.class, source = Motorbike.class)\n    @Mapping(target = &quot;name&quot;, constant = &quot;noname&quot;) // &lt;-------- added this one --------\n    VehicleDto mapToDto(Vehicle vehicle);\n}\n</code></pre>\n<p>In this case I'm getting a compilation error:</p>\n<blockquote>\n<p>Unknown property &quot;name&quot; in result type VehicleDto. Did you mean\n&quot;null&quot;?</p>\n</blockquote>\n<p>How can Mapstruct recognize the field <code>name</code> by default, and not with custom config? Is there a clean Mapstruct way to fix this, preferably without any changes to the source/target classes?</p>\n"},{"tags":["java","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":2485059,"reputation":1,"user_id":2163631,"display_name":"Eeshwar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660303458,"creation_date":1660303458,"answer_id":73333394,"question_id":73333285,"body_markdown":"Before modification:\r\n\r\ncode added in Java file and this retry.excludeRetry added in application.properties file:\r\n\r\n@Value(“#{retry.excludeRetry}”)\r\nPrivate List&lt;String&gt; excludeRetryStatus;\r\n\r\n\r\nPost modification  :\r\n\r\nSo, this is Comma separated values in application.properties file\r\n\r\nAnd we need to modify code like \r\n\r\n@Value(“#{${retry.excludeRetry}.split (‘,’)}”)\r\nPrivate List&lt;String&gt; excludeRetryStatus;\r\n\r\n\r\n","title":"EL1008E: Property or field ‘retry’ cannot be found on object of type ‘org.springframework.beans.factory.config.BeanExpressionContext’-maybe not public","body":"<p>Before modification:</p>\n<p>code added in Java file and this retry.excludeRetry added in application.properties file:</p>\n<p>@Value(“#{retry.excludeRetry}”)\nPrivate List excludeRetryStatus;</p>\n<p>Post modification  :</p>\n<p>So, this is Comma separated values in application.properties file</p>\n<p>And we need to modify code like</p>\n<p>@Value(“#{${retry.excludeRetry}.split (‘,’)}”)\nPrivate List excludeRetryStatus;</p>\n"}],"owner":{"account_id":2485059,"reputation":1,"user_id":2163631,"display_name":"Eeshwar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1182,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689175514,"creation_date":1660302892,"question_id":73333285,"body_markdown":"Find stack trace in image\r\n\r\n    Caused by:\r\n    \r\n    erg-springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;ApilInvokerDelegate’: Unsat\r\n    dependency expressed through field &#39;excludedRetryStatus&#39;;\r\n    nested exception is org.springframework.beans.factory.BeanExpressionException. Expression\r\n    Parsing failed; nested exception is org-springframework.expression.spel.SpelEvaluationException: \r\n    ELIO08E: Property or field ‘retry’ Cannot be found\r\n    On Object of type ‘org.springframework.beans.factory.config.BeanExpressionContext&#39; - maybe not public or not valid?\r\n\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/4aizC.jpg\r\n\r\n","title":"EL1008E: Property or field ‘retry’ cannot be found on object of type ‘org.springframework.beans.factory.config.BeanExpressionContext’-maybe not public","body":"<p>Find stack trace in image</p>\n<pre><code>Caused by:\n\nerg-springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'ApilInvokerDelegate’: Unsat\ndependency expressed through field 'excludedRetryStatus';\nnested exception is org.springframework.beans.factory.BeanExpressionException. Expression\nParsing failed; nested exception is org-springframework.expression.spel.SpelEvaluationException: \nELIO08E: Property or field ‘retry’ Cannot be found\nOn Object of type ‘org.springframework.beans.factory.config.BeanExpressionContext' - maybe not public or not valid?\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/4aizC.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":["java","spring-boot","exception","microservices","controller-advice"],"owner":{"account_id":19770905,"reputation":31,"user_id":14477894,"display_name":"Mahdi Ezzaouia"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689175123,"creation_date":1689171878,"question_id":76671630,"body_markdown":"Is it considered as a best practise if we put the same controllerAdvice in the parent project of our microservice architecture. In fact we can throw only two runtime exceptions (FunctionalException and TechnicalException). Both of them are also in a common parent project. Moreover, we have the same respone model in case of errors.","title":"Use the same ControllerAdvice in a parent module of a microservice architecture","body":"<p>Is it considered as a best practise if we put the same controllerAdvice in the parent project of our microservice architecture. In fact we can throw only two runtime exceptions (FunctionalException and TechnicalException). Both of them are also in a common parent project. Moreover, we have the same respone model in case of errors.</p>\n"},{"tags":["java","abstract-class","abstract"],"comments":[{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":2,"creation_date":1689173797,"post_id":76671926,"comment_id":135176669,"body_markdown":"`Block`. Program to the *interface*. Your question is both incredibly broad and incredibly vague.","body":"<code>Block</code>. Program to the <i>interface</i>. Your question is both incredibly broad and incredibly vague."},{"owner":{"account_id":28362342,"reputation":11,"user_id":21692158,"display_name":"mingus2"},"score":0,"creation_date":1689174753,"post_id":76671926,"comment_id":135176948,"body_markdown":"okay i see this is really broad and vague sorry for that. i try to make it clearer in the post right now","body":"okay i see this is really broad and vague sorry for that. i try to make it clearer in the post right now"},{"owner":{"account_id":28362342,"reputation":11,"user_id":21692158,"display_name":"mingus2"},"score":0,"creation_date":1689175101,"post_id":76671926,"comment_id":135177030,"body_markdown":"tried my best is it a bit clearer know ?","body":"tried my best is it a bit clearer know ?"},{"owner":{"account_id":28362342,"reputation":11,"user_id":21692158,"display_name":"mingus2"},"score":0,"creation_date":1689175102,"post_id":76671926,"comment_id":135177031,"body_markdown":"tried my best is it a bit clearer know ?","body":"tried my best is it a bit clearer know ?"},{"owner":{"account_id":10732579,"reputation":666,"user_id":7898202,"display_name":"MorganS42"},"score":0,"creation_date":1689203608,"post_id":76671926,"comment_id":135181818,"body_markdown":"@mingus2 Have you read my answer?","body":"@mingus2 Have you read my answer?"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1689582628,"post_id":76671926,"comment_id":135228413,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."}],"answers":[{"tags":[],"owner":{"account_id":10732579,"reputation":666,"user_id":7898202,"display_name":"MorganS42"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689174160,"creation_date":1689174160,"answer_id":76671999,"question_id":76671926,"body_markdown":"The solution should implement [generics][1]. This would look like the following:\r\n\r\n```java\r\npublic abstract class Parent&lt;T extends Parent&lt;T&gt;&gt; {\r\n    ...\r\n    abstract T method();\r\n    ...\r\n}\r\n```\r\n\r\nYour child class would look like:\r\n\r\n```java\r\npublic class ChildA&lt;ChildA&gt; {\r\n    ...\r\n}\r\n```\r\n\r\nThis will let you call `method()` through any of the child classes and that method will return an instance of that specific child class.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/java/generics/types.html","title":"what should be given back in an abstract java method if the object given back will always be a different child object created as an extend?","body":"<p>The solution should implement <a href=\"https://docs.oracle.com/javase/tutorial/java/generics/types.html\" rel=\"nofollow noreferrer\">generics</a>. This would look like the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public abstract class Parent&lt;T extends Parent&lt;T&gt;&gt; {\n    ...\n    abstract T method();\n    ...\n}\n</code></pre>\n<p>Your child class would look like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ChildA&lt;ChildA&gt; {\n    ...\n}\n</code></pre>\n<p>This will let you call <code>method()</code> through any of the child classes and that method will return an instance of that specific child class.</p>\n"}],"owner":{"account_id":28362342,"reputation":11,"user_id":21692158,"display_name":"mingus2"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1689175071,"creation_date":1689173728,"question_id":76671926,"body_markdown":"lets say you got a parent class called block that has a lot of child classes and has the abstract method called rotate that should give you back a different child of block. what should the abstract method &quot;give back&quot; if its always a specific other child object ?\r\n\r\ni tried working around it but it unfortunately doesn&#39;t work with other options trying to just change the parameter i needed to in the method implementation of the child classes.\r\n\r\nI have tried looking up any solutions or examples for this but i&#39;m not quite sure for what to actually search. \r\n\r\nlets say \r\n\r\n    public class Block{\r\n         abstract public void rotate();\r\n    }\r\n\r\nbut instead of void what should i do to give back a different object extending block. if i got the public class T extends Block{} and the method rotate should give back the object from public class Ttilt extends Block{}.","title":"what should be given back in an abstract java method if the object given back will always be a different child object created as an extend?","body":"<p>lets say you got a parent class called block that has a lot of child classes and has the abstract method called rotate that should give you back a different child of block. what should the abstract method &quot;give back&quot; if its always a specific other child object ?</p>\n<p>i tried working around it but it unfortunately doesn't work with other options trying to just change the parameter i needed to in the method implementation of the child classes.</p>\n<p>I have tried looking up any solutions or examples for this but i'm not quite sure for what to actually search.</p>\n<p>lets say</p>\n<pre><code>public class Block{\n     abstract public void rotate();\n}\n</code></pre>\n<p>but instead of void what should i do to give back a different object extending block. if i got the public class T extends Block{} and the method rotate should give back the object from public class Ttilt extends Block{}.</p>\n"},{"tags":["java","unit-testing","kotlin"],"answers":[{"tags":[],"owner":{"account_id":3273477,"reputation":1291,"user_id":2756220,"accept_rate":83,"display_name":"HarryQ"},"down_vote_count":0,"up_vote_count":24,"is_accepted":true,"score":24,"last_activity_date":1689174938,"creation_date":1541526245,"answer_id":53177229,"question_id":53174839,"body_markdown":"**Solution 1 : add a caller function in the calling class**\r\n\r\n    class DummyWrapper {\r\n      val foo get() = DummyCompanion.Companion\r\n\r\n      fun callAStaticMethod() {\r\n        foo.staticMethod()\r\n      }\r\n\r\n      fun callCompanionMethod(){\r\n        foo.someCompanionMethod();\r\n      }\r\n    }\r\n\r\nIn the test class, we can use Mockito to provide a stub for the `get()` function and verified it is called.\r\n\r\n    @Test\r\n    fun testCase() {\r\n      ....\r\n      val mockCompanionObj: DummyCompanion.Companion = mock()\r\n      val wrapper = DummyWrapper()\r\n\r\n      whenever(wrapper.foo).thenReturn(mockCompanionObj)\r\n      wrapper.callCompanionMethod()\r\n      verify(mockCompanionObj).someCompanionMethod()\r\n      ....\r\n    }\r\n\r\n\r\n**Solution 2: using Mockk**\r\nMocking companion object in Mockk is easy. There is no need to insert a test interfacing object in the source code.\r\n\r\n    @Test\r\n    fun testCompanionObject() {\r\n      // Mock the companion object\r\n      mockkObject(DummyCompanion.Companion)\r\n\r\n      // Define the stubbing behavior of a companion object method\r\n      every { DummyCompanion.someCompanionMethod() } answers { stubMethod() }\r\n\r\n      val testObject = DummyWrapper()\r\n\r\n      // Call a method that calls the companion object method\r\n      // You can verify stubMethod() is called\r\n      testObject.callCompanionMethod()\r\n\r\n      verify(exactly = 1) { DummyCompanion.someCompanionMethod() }\r\n    }\r\n\r\nFor details see [Mockk][1]\r\n\r\n    \r\n    \r\n\r\n\r\n  [1]: https://mockk.io","title":"Unit Testing verifying a companion object method is called (mocking a companion object)","body":"<p><strong>Solution 1 : add a caller function in the calling class</strong></p>\n<pre><code>class DummyWrapper {\n  val foo get() = DummyCompanion.Companion\n\n  fun callAStaticMethod() {\n    foo.staticMethod()\n  }\n\n  fun callCompanionMethod(){\n    foo.someCompanionMethod();\n  }\n}\n</code></pre>\n<p>In the test class, we can use Mockito to provide a stub for the <code>get()</code> function and verified it is called.</p>\n<pre><code>@Test\nfun testCase() {\n  ....\n  val mockCompanionObj: DummyCompanion.Companion = mock()\n  val wrapper = DummyWrapper()\n\n  whenever(wrapper.foo).thenReturn(mockCompanionObj)\n  wrapper.callCompanionMethod()\n  verify(mockCompanionObj).someCompanionMethod()\n  ....\n}\n</code></pre>\n<p><strong>Solution 2: using Mockk</strong>\nMocking companion object in Mockk is easy. There is no need to insert a test interfacing object in the source code.</p>\n<pre><code>@Test\nfun testCompanionObject() {\n  // Mock the companion object\n  mockkObject(DummyCompanion.Companion)\n\n  // Define the stubbing behavior of a companion object method\n  every { DummyCompanion.someCompanionMethod() } answers { stubMethod() }\n\n  val testObject = DummyWrapper()\n\n  // Call a method that calls the companion object method\n  // You can verify stubMethod() is called\n  testObject.callCompanionMethod()\n\n  verify(exactly = 1) { DummyCompanion.someCompanionMethod() }\n}\n</code></pre>\n<p>For details see <a href=\"https://mockk.io\" rel=\"nofollow noreferrer\">Mockk</a></p>\n"},{"tags":[],"owner":{"account_id":9455893,"reputation":567,"user_id":7031224,"display_name":"C&#233;sar Mu&#241;oz"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1557702403,"creation_date":1557702403,"answer_id":56104184,"question_id":53174839,"body_markdown":"You can do so with PowerMock too, it&#39;d be like this:\r\n\r\n    @RunWith(PowerMockRunner.class)\r\n    @PrepareForTest({DummyCompanion.class})\r\n    public class staticClassTest {\r\n        \r\n        @Test\r\n        public void testForCompanionMethod() {\r\n           PowerMockito.mockStatic(DummyCompanion.class);\r\n           DummyCompanion.Companion companionMock = PowerMockito.mock(DummyCompanion.Companion.class);\r\n           Whitebox.setInternalState(\r\n            DummyCompanion.class, &quot;Companion&quot;,\r\n            companionMock\r\n           );\r\n\r\n           DummyWrapper testObject = new DummyWrapper();\r\n           testObject.callCompanionMethod();\r\n           Mockito.verify(companionMock,Mockito.times(1)).someCompanionMethod();\r\n        }\r\n    }\r\n\r\nKotlin creates for Java (in the Kotlin class, which is `DummyCompanion` in this case) a static field of its Companion subclass named `Companion` which can be set using PowerMock&#39;s `WhiteBox.setInternalState` tool to a mocked `Companion` instance that you can later verify method calling to.","title":"Unit Testing verifying a companion object method is called (mocking a companion object)","body":"<p>You can do so with PowerMock too, it'd be like this:</p>\n\n<pre><code>@RunWith(PowerMockRunner.class)\n@PrepareForTest({DummyCompanion.class})\npublic class staticClassTest {\n\n    @Test\n    public void testForCompanionMethod() {\n       PowerMockito.mockStatic(DummyCompanion.class);\n       DummyCompanion.Companion companionMock = PowerMockito.mock(DummyCompanion.Companion.class);\n       Whitebox.setInternalState(\n        DummyCompanion.class, \"Companion\",\n        companionMock\n       );\n\n       DummyWrapper testObject = new DummyWrapper();\n       testObject.callCompanionMethod();\n       Mockito.verify(companionMock,Mockito.times(1)).someCompanionMethod();\n    }\n}\n</code></pre>\n\n<p>Kotlin creates for Java (in the Kotlin class, which is <code>DummyCompanion</code> in this case) a static field of its Companion subclass named <code>Companion</code> which can be set using PowerMock's <code>WhiteBox.setInternalState</code> tool to a mocked <code>Companion</code> instance that you can later verify method calling to.</p>\n"},{"tags":[],"owner":{"account_id":309633,"reputation":744,"user_id":622189,"display_name":"Takaitra"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1584045829,"creation_date":1584045829,"answer_id":60661617,"question_id":53174839,"body_markdown":"Here is one more solution that doesn&#39;t require Mockk or PowerMock.\r\n\r\n1. Extract an interface from the companion object and place it in the same file but outside of the class.\r\n2. Have the companion object inherit from the interface\r\n3. Add a new optional property to the constructor of the class calling the static methods. Its default value should be the companion object.\r\n4. Switch to using instance calls (lowercase `helper`) in the calling class. Now it can be mocked normally in unit tests.\r\n```\r\ninterface IStaticHelper {\r\n    fun foo(): String\r\n    fun bar(): String\r\n}\r\n\r\nclass StaticHelper {\r\n    companion object : IStaticHelper {\r\n        override fun foo() = &quot;foo&quot;\r\n        override fun bar() = &quot;bar&quot;\r\n    }\r\n}\r\n\r\nclass Caller(private val helper: IStaticHelper = StaticHelper.Companion) {\r\n    fun callsTheHelper(): String {\r\n        return helper.foo()\r\n    }\r\n}\r\n\r\nclass CallerTest {\r\n    @Test\r\n    fun testCallsTheHelper() {\r\n        val helper = mock()\r\n        val caller = Caller(helper)\r\n        assertThat(caller.callsTheHelper()).isEqualTo(&quot;foo&quot;)\r\n    }\r\n}\r\n```\r\n\r\nWhile it&#39;s true that the caller in this case is no longer making static method calls, other classes can continue to do so unchanged.","title":"Unit Testing verifying a companion object method is called (mocking a companion object)","body":"<p>Here is one more solution that doesn't require Mockk or PowerMock.</p>\n\n<ol>\n<li>Extract an interface from the companion object and place it in the same file but outside of the class.</li>\n<li>Have the companion object inherit from the interface</li>\n<li>Add a new optional property to the constructor of the class calling the static methods. Its default value should be the companion object.</li>\n<li>Switch to using instance calls (lowercase <code>helper</code>) in the calling class. Now it can be mocked normally in unit tests.</li>\n</ol>\n\n<pre><code>interface IStaticHelper {\n    fun foo(): String\n    fun bar(): String\n}\n\nclass StaticHelper {\n    companion object : IStaticHelper {\n        override fun foo() = \"foo\"\n        override fun bar() = \"bar\"\n    }\n}\n\nclass Caller(private val helper: IStaticHelper = StaticHelper.Companion) {\n    fun callsTheHelper(): String {\n        return helper.foo()\n    }\n}\n\nclass CallerTest {\n    @Test\n    fun testCallsTheHelper() {\n        val helper = mock()\n        val caller = Caller(helper)\n        assertThat(caller.callsTheHelper()).isEqualTo(\"foo\")\n    }\n}\n</code></pre>\n\n<p>While it's true that the caller in this case is no longer making static method calls, other classes can continue to do so unchanged.</p>\n"}],"owner":{"account_id":3273477,"reputation":1291,"user_id":2756220,"accept_rate":83,"display_name":"HarryQ"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24252,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"accepted_answer_id":53177229,"answer_count":3,"score":14,"last_activity_date":1689174938,"creation_date":1541517628,"question_id":53174839,"body_markdown":"When switching to Kotlin, static methods are moved into a companion object. However, there is no obvious way to unit test other methods which call these &quot;static method&quot;.\r\n\r\nIn Java, we could use PowerMockito&#39;s MockStatic(SomeClass.class) to verify a static method is called in the method under test. PowerMock loses its magic in Kotlin. \r\n\r\nFor testing, I have create the following classes.\r\n\r\n    public class DummyJava {\r\n        static public Void staticMechod(){\r\n              System.out.print(&quot;Dummy method is called&quot;);\r\n              return null;\r\n         }\r\n    }\r\n\r\n    class DummyCompanion {\r\n        companion object {\r\n            fun someCompanionMethod(){\r\n                System.out.printf(&quot;companion method is called\\n&quot;)\r\n            }\r\n        }\r\n    }\r\n\r\nNow there is a another class which calls the `DummyCompanion.someCompanion`\r\n\r\n    public class DummyWrapper {\r\n        public void callAStaticMethod(){\r\n            DummyJava.staticMechod();\r\n        }\r\n\r\n        public void callCompanionMethod(){\r\n            DummyCompanion.Companion.someCompanionMethod();\r\n        }\r\n    }\r\n\r\nTo unit test `callAStaticMethod()` We used the following\r\n\r\n    @RunWith(PowerMockRunner.class)\r\n    @PrepareForTest({DummyJava.class, DummyCompanion.Companion.class})\r\n    public class staticClassTest {\r\n        //This case works\r\n        @Test \r\n        public void testForStaticMethod() {\r\n            PowerMockito.mockStatic(DummyJava.class);   \r\n            DummyWrapper testObject = new DummyWrapper();\r\n\r\n            Mockito.when(DummyJava.staticMechod()).thenCallRealMethod();\r\n            \r\n            testObject.callAStaticMethod();\r\n\r\n            PowerMockito.verifyStatic(Dummy.class);\r\n            DummyJava.staticMechod();\r\n        }\r\n\r\n        //This case doesn&#39;t work. It always passes.\r\n        @Test\r\n        public void testForCompanionMethod() {\r\n            PowerMockito.mockStatic(DummyCompanion.Companion.class);\r\n            DummyWrapper testObject = new DummyWrapper();\r\n            testObject.callCompanionMethod();\r\n    PowerMockito.verifyStatic(DummyCompanion.Companion.class,Mockito.times(1));\r\n            DummyCompanion.Companion.someCompanionMethod();\r\n    }\r\n\r\nMy question is how to verify the companion method is called.","title":"Unit Testing verifying a companion object method is called (mocking a companion object)","body":"<p>When switching to Kotlin, static methods are moved into a companion object. However, there is no obvious way to unit test other methods which call these \"static method\".</p>\n\n<p>In Java, we could use PowerMockito's MockStatic(SomeClass.class) to verify a static method is called in the method under test. PowerMock loses its magic in Kotlin. </p>\n\n<p>For testing, I have create the following classes.</p>\n\n<pre><code>public class DummyJava {\n    static public Void staticMechod(){\n          System.out.print(\"Dummy method is called\");\n          return null;\n     }\n}\n\nclass DummyCompanion {\n    companion object {\n        fun someCompanionMethod(){\n            System.out.printf(\"companion method is called\\n\")\n        }\n    }\n}\n</code></pre>\n\n<p>Now there is a another class which calls the <code>DummyCompanion.someCompanion</code></p>\n\n<pre><code>public class DummyWrapper {\n    public void callAStaticMethod(){\n        DummyJava.staticMechod();\n    }\n\n    public void callCompanionMethod(){\n        DummyCompanion.Companion.someCompanionMethod();\n    }\n}\n</code></pre>\n\n<p>To unit test <code>callAStaticMethod()</code> We used the following</p>\n\n<pre><code>@RunWith(PowerMockRunner.class)\n@PrepareForTest({DummyJava.class, DummyCompanion.Companion.class})\npublic class staticClassTest {\n    //This case works\n    @Test \n    public void testForStaticMethod() {\n        PowerMockito.mockStatic(DummyJava.class);   \n        DummyWrapper testObject = new DummyWrapper();\n\n        Mockito.when(DummyJava.staticMechod()).thenCallRealMethod();\n\n        testObject.callAStaticMethod();\n\n        PowerMockito.verifyStatic(Dummy.class);\n        DummyJava.staticMechod();\n    }\n\n    //This case doesn't work. It always passes.\n    @Test\n    public void testForCompanionMethod() {\n        PowerMockito.mockStatic(DummyCompanion.Companion.class);\n        DummyWrapper testObject = new DummyWrapper();\n        testObject.callCompanionMethod();\nPowerMockito.verifyStatic(DummyCompanion.Companion.class,Mockito.times(1));\n        DummyCompanion.Companion.someCompanionMethod();\n}\n</code></pre>\n\n<p>My question is how to verify the companion method is called.</p>\n"},{"tags":["java","android","kotlin","admob","google-play-services"],"owner":{"account_id":10601752,"reputation":31,"user_id":7808499,"display_name":"Suhrab"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689174890,"creation_date":1689174307,"question_id":76672024,"body_markdown":"When I scroll the RecyclerView after showing an ad, all RecyclerView items disappear.\r\nI have a RecyclerView which shows items with GridLayoutManager 3 items vertically but every 40 items shows Admob Native AD as one item vertically using RecyclerView adapter\r\n\r\n```\r\nval layoutManager: GridLayoutManager = if (resources.configuration.orientation == Configuration.ORIENTATION_PORTRAIT) {\r\n                    GridLayoutManager(this, 3)\r\n                } else {\r\n                    GridLayoutManager(this, 5)\r\n                }\r\n            // Create a custom SpanSizeLookup where the first item spans both columns\r\n            layoutManager.spanSizeLookup = object : SpanSizeLookup() {\r\n                override fun getSpanSize(position: Int): Int {\r\n                    return if (position != 0 &amp;&amp; (position + 1) % 40 == 0) {\r\n                        3\r\n                    } else {\r\n                        1\r\n                    }\r\n                }\r\n            }\r\n            recyclerView!!.setLayoutManager(layoutManager)\r\n```\r\nadapter code:\r\n\r\n```\r\n    override fun onCreateViewHolder(viewGroup: ViewGroup, i: Int): RecyclerView.ViewHolder {\r\n        val layoutView: View\r\n        return when (i) {\r\n            AdView -&gt; {\r\n                layoutView = LayoutInflater.from(viewGroup.context).inflate(\r\n                    R.layout.ads_in_recy, viewGroup, false\r\n                )\r\n                return ItemViewHolder(layoutView)\r\n            }\r\n            TYPE -&gt; {\r\n                layoutView = LayoutInflater.from(viewGroup.context).inflate(\r\n                    R.layout.cardveiw_item_book, viewGroup, false\r\n                )\r\n                return ItemViewHolder(layoutView)\r\n            }\r\n            else -&gt; {                layoutView = LayoutInflater.from(viewGroup.context).inflate(\r\n                R.layout.cardveiw_item_book, viewGroup, false\r\n            )\r\n                return ItemViewHolder(layoutView)}\r\n        }\r\n\r\n    }\r\n---------------\r\nwhen (viewType) {\r\n            AdView -&gt; {\r\n                MobileAds.initialize(context) { initializationStatus: InitializationStatus? -&gt; }\r\n\r\n                    val adLoader2 =\r\n                        AdLoader.Builder(context, context.resources.getString(R.string.nativeAD))\r\n                            .forNativeAd { nativeAd: NativeAd? -&gt;\r\n                                val styles =\r\n                                    NativeTemplateStyle.Builder()\r\n                                        .withMainBackgroundColor(background)\r\n                                        .build()\r\n                                itemViewHolder.template2W!!.setStyles(styles)\r\n                                itemViewHolder.template2W.setNativeAd(nativeAd)\r\n                                itemViewHolder.template2W.visibility = View.VISIBLE\r\n                            }.withAdListener(object : AdListener() {\r\n                                override fun onAdFailedToLoad(adError: LoadAdError) {\r\n                                    if (itemViewHolder.template2W!!.visibility == View.GONE) {\r\n                                        Yandex.yandexNativeAds(context, itemViewHolder.yadAds!!)\r\n                                        if (Yandex.yandexNativeAds(\r\n                                                context,\r\n                                                itemViewHolder.yadAds\r\n                                            )\r\n                                        ) {\r\n                                            val aadRequest = AdRequest.Builder().build()\r\n                                            itemViewHolder.maAdViewW!!.visibility = View.VISIBLE\r\n                                            itemViewHolder.maAdViewW.loadAd(aadRequest)\r\n                                        }\r\n                                    }\r\n\r\n                                }\r\n                            })\r\n                            .withNativeAdOptions(NativeAdOptions.Builder().build())\r\n                            .build()\r\n                    adLoader2.loadAd(AdRequest.Builder().build())\r\n            }\r\n```\r\nthe only yellow errors I see in Logcat:\r\n\r\n```\r\n2023-07-12 Ads    W  Precache exception                                                     com.google.android.gms.internal.ads.zzfz: javax.net.ssl.SSLProtocolException: Read error: ssl=0x76fbf20c3758: Failure in SSL library, usually a protocol error\r\n                                                                                                    error:1e000065:Cipher functions:OPENSSL_internal:BAD_DECRYPT (third_party/openssl/boringssl/src/crypto/fipsmodule/cipher/e_aes.c:1078 0x76fadea2461e:0x00000000)\r\n                                                                                                    error:1000008b:SSL routines:OPENSSL_internal:DECRYPTION_FAILED_OR_BAD_RECORD_MAC (third_party/openssl/boringssl/src/ssl/tls_record.cc:294 0x76fadea2461e:0x00000000)\r\n                                                                                                    \tat com.google.android.gms.internal.ads.zzft.zza(com.google.android.gms:play-services-ads@@22.0.0:5)\r\n                                                                                                    \tat com.google.android.gms.internal.ads.zzgh.zza(com.google.android.gms:play-services-ads@@22.0.0:1)\r\n                                                                                                    \tat com.google.android.gms.internal.ads.zzzk.zzq(com.google.android.gms:play-services-ads@@22.0.0:3)\r\n                                                                                                    \tat com.google.android.gms.internal.ads.zzzk.zza(com.google.android.gms:play-services-ads@@22.0.0:2)\r\n                                                                                                    \tat com.google.android.gms.internal.ads.zzuc.zza(com.google.android.gms:play-services-ads@@22.0.0:4)\r\n                                                                                                    \tat com.google.android.gms.internal.ads.zzui.zzf(com.google.android.gms:play-services-ads@@22.0.0:1)\r\n                                                                                                    \tat com.google.android.gms.internal.ads.zzaaz.zza(com.google.android.gms:play-services-ads@@22.0.0:1)\r\n                                                                                                    \tat com.google.android.gms.internal.ads.zzaeu.zzq(com.google.android.gms:play-services-ads@@22.0.0:2)\r\n                                                                                                    \tat com.google.android.gms.internal.ads.zzaeu.zzp(com.google.android.gms:play-services-ads@@22.0.0:68)\r\n                                                                                                    \tat com.google.android.gms.internal.ads.zzaeu.zzg(com.google.android.gms:play-services-ads@@22.0.0:72)\r\n                                                                                                    \tat com.google.android.gms.internal.ads.zzaen.zzc(com.google.android.gms:play-services-ads@@22.0.0:17)\r\n                                                                                                    \tat com.google.android.gms.internal.ads.zzaeu.zza(com.google.android.gms:play-services-ads@@22.0.0:1)\r\n                                                                                                    \tat com.google.android.gms.internal.ads.zzrv.zza(com.google.android.gms:play-services-ads@@22.0.0:1)\r\n                                                                                                    \tat com.google.android.gms.internal.ads.zztq.zzh(com.google.android.gms:play-services-ads@@22.0.0:33)\r\n                                                                                                    \tat com.google.android.gms.internal.ads.zzxb.run(com.google.android.gms:play-services-ads@@22.0.0:6)\r\n                                                                                                    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1137)\r\n                                                                                                    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:637)\r\n                                                                                                    \tat java.lang.Thread.run(Thread.java:1012)\r\n                                                                                                    Caused by: javax.net.ssl.SSLProtocolException: Read error: ssl=0x76fbf20c3758: Failure in SSL library, usually a protocol error\r\n                                                                                                    error:1e000065:Cipher functions:OPENSSL_internal:BAD_DECRYPT (third_party/openssl/boringssl/src/crypto/fipsmodule/cipher/e_aes.c:1078 0x76fadea2461e:0x00000000)\r\n                                                                                                    error:1000008b:SSL routines:OPENSSL_internal:DECRYPTION_FAILED_OR_BAD_RECORD_MAC (third_party/openssl/boringssl/src/ssl/tls_record.cc:294 0x76fadea2461e:0x00000000)\r\n                                                                                                    \tat com.google.android.gms.org.conscrypt.NativeCrypto.SSL_read(Native Method)\r\n                                                                                                    \tat com.google.android.gms.org.conscrypt.NativeSsl.read(:com.google.android.gms@225014047@22.50.14 (190800-499278674):3)\r\n                                                                                                    \tat com.google.android.gms.org.conscrypt.ConscryptFileDescriptorSocket$SSLInputStream.read(:com.google.android.gms@225014047@22.50.14 (190800-499278674):6)\r\n                                                                                                    \tat com.android.okhttp.okio.Okio$2.read(Okio.java:138)\r\n                                                                                                    \tat com.android.okhttp.okio.AsyncTimeout$2.read(AsyncTimeout.java:213)\r\n                                                                                                    \tat com.android.okhttp.okio.RealBufferedSource.read(RealBufferedSource.java:51)\r\n                                                                                                    \tat com.android.okhttp.internal.http.Http1xStream$FixedLengthSource.read(Http1xStream.java:395)\r\n                                                                                                    \tat com.android.okhttp.okio.RealBufferedSource$1.read(RealBufferedSource.java:372)\r\n                                                                                                    \tat com.google.android.gms.internal.ads.zzft.zza(com.google.android.gms:play-services-ads@@22.0.0:2)\r\n                                                                                                    \t... 17 more\r\n2023-07-12  TrafficStats   D  tagSocket(596) with statsTag=0xffffffff, statsUid=-1\r\n```\r\nPlease help solve the problem\r\n\r\n\r\nI tried changing AdMob dependency versions\r\n\r\n```\r\nimplementation &#39;com.google.android.gms:play-services-ads:22.0.0&#39;\r\n```\r\n","title":"Admob Native AD error causes RecyclerView to disappear with all items","body":"<p>When I scroll the RecyclerView after showing an ad, all RecyclerView items disappear.\nI have a RecyclerView which shows items with GridLayoutManager 3 items vertically but every 40 items shows Admob Native AD as one item vertically using RecyclerView adapter</p>\n<pre><code>val layoutManager: GridLayoutManager = if (resources.configuration.orientation == Configuration.ORIENTATION_PORTRAIT) {\n                    GridLayoutManager(this, 3)\n                } else {\n                    GridLayoutManager(this, 5)\n                }\n            // Create a custom SpanSizeLookup where the first item spans both columns\n            layoutManager.spanSizeLookup = object : SpanSizeLookup() {\n                override fun getSpanSize(position: Int): Int {\n                    return if (position != 0 &amp;&amp; (position + 1) % 40 == 0) {\n                        3\n                    } else {\n                        1\n                    }\n                }\n            }\n            recyclerView!!.setLayoutManager(layoutManager)\n</code></pre>\n<p>adapter code:</p>\n<pre><code>    override fun onCreateViewHolder(viewGroup: ViewGroup, i: Int): RecyclerView.ViewHolder {\n        val layoutView: View\n        return when (i) {\n            AdView -&gt; {\n                layoutView = LayoutInflater.from(viewGroup.context).inflate(\n                    R.layout.ads_in_recy, viewGroup, false\n                )\n                return ItemViewHolder(layoutView)\n            }\n            TYPE -&gt; {\n                layoutView = LayoutInflater.from(viewGroup.context).inflate(\n                    R.layout.cardveiw_item_book, viewGroup, false\n                )\n                return ItemViewHolder(layoutView)\n            }\n            else -&gt; {                layoutView = LayoutInflater.from(viewGroup.context).inflate(\n                R.layout.cardveiw_item_book, viewGroup, false\n            )\n                return ItemViewHolder(layoutView)}\n        }\n\n    }\n---------------\nwhen (viewType) {\n            AdView -&gt; {\n                MobileAds.initialize(context) { initializationStatus: InitializationStatus? -&gt; }\n\n                    val adLoader2 =\n                        AdLoader.Builder(context, context.resources.getString(R.string.nativeAD))\n                            .forNativeAd { nativeAd: NativeAd? -&gt;\n                                val styles =\n                                    NativeTemplateStyle.Builder()\n                                        .withMainBackgroundColor(background)\n                                        .build()\n                                itemViewHolder.template2W!!.setStyles(styles)\n                                itemViewHolder.template2W.setNativeAd(nativeAd)\n                                itemViewHolder.template2W.visibility = View.VISIBLE\n                            }.withAdListener(object : AdListener() {\n                                override fun onAdFailedToLoad(adError: LoadAdError) {\n                                    if (itemViewHolder.template2W!!.visibility == View.GONE) {\n                                        Yandex.yandexNativeAds(context, itemViewHolder.yadAds!!)\n                                        if (Yandex.yandexNativeAds(\n                                                context,\n                                                itemViewHolder.yadAds\n                                            )\n                                        ) {\n                                            val aadRequest = AdRequest.Builder().build()\n                                            itemViewHolder.maAdViewW!!.visibility = View.VISIBLE\n                                            itemViewHolder.maAdViewW.loadAd(aadRequest)\n                                        }\n                                    }\n\n                                }\n                            })\n                            .withNativeAdOptions(NativeAdOptions.Builder().build())\n                            .build()\n                    adLoader2.loadAd(AdRequest.Builder().build())\n            }\n</code></pre>\n<p>the only yellow errors I see in Logcat:</p>\n<pre><code>2023-07-12 Ads    W  Precache exception                                                     com.google.android.gms.internal.ads.zzfz: javax.net.ssl.SSLProtocolException: Read error: ssl=0x76fbf20c3758: Failure in SSL library, usually a protocol error\n                                                                                                    error:1e000065:Cipher functions:OPENSSL_internal:BAD_DECRYPT (third_party/openssl/boringssl/src/crypto/fipsmodule/cipher/e_aes.c:1078 0x76fadea2461e:0x00000000)\n                                                                                                    error:1000008b:SSL routines:OPENSSL_internal:DECRYPTION_FAILED_OR_BAD_RECORD_MAC (third_party/openssl/boringssl/src/ssl/tls_record.cc:294 0x76fadea2461e:0x00000000)\n                                                                                                        at com.google.android.gms.internal.ads.zzft.zza(com.google.android.gms:play-services-ads@@22.0.0:5)\n                                                                                                        at com.google.android.gms.internal.ads.zzgh.zza(com.google.android.gms:play-services-ads@@22.0.0:1)\n                                                                                                        at com.google.android.gms.internal.ads.zzzk.zzq(com.google.android.gms:play-services-ads@@22.0.0:3)\n                                                                                                        at com.google.android.gms.internal.ads.zzzk.zza(com.google.android.gms:play-services-ads@@22.0.0:2)\n                                                                                                        at com.google.android.gms.internal.ads.zzuc.zza(com.google.android.gms:play-services-ads@@22.0.0:4)\n                                                                                                        at com.google.android.gms.internal.ads.zzui.zzf(com.google.android.gms:play-services-ads@@22.0.0:1)\n                                                                                                        at com.google.android.gms.internal.ads.zzaaz.zza(com.google.android.gms:play-services-ads@@22.0.0:1)\n                                                                                                        at com.google.android.gms.internal.ads.zzaeu.zzq(com.google.android.gms:play-services-ads@@22.0.0:2)\n                                                                                                        at com.google.android.gms.internal.ads.zzaeu.zzp(com.google.android.gms:play-services-ads@@22.0.0:68)\n                                                                                                        at com.google.android.gms.internal.ads.zzaeu.zzg(com.google.android.gms:play-services-ads@@22.0.0:72)\n                                                                                                        at com.google.android.gms.internal.ads.zzaen.zzc(com.google.android.gms:play-services-ads@@22.0.0:17)\n                                                                                                        at com.google.android.gms.internal.ads.zzaeu.zza(com.google.android.gms:play-services-ads@@22.0.0:1)\n                                                                                                        at com.google.android.gms.internal.ads.zzrv.zza(com.google.android.gms:play-services-ads@@22.0.0:1)\n                                                                                                        at com.google.android.gms.internal.ads.zztq.zzh(com.google.android.gms:play-services-ads@@22.0.0:33)\n                                                                                                        at com.google.android.gms.internal.ads.zzxb.run(com.google.android.gms:play-services-ads@@22.0.0:6)\n                                                                                                        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1137)\n                                                                                                        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:637)\n                                                                                                        at java.lang.Thread.run(Thread.java:1012)\n                                                                                                    Caused by: javax.net.ssl.SSLProtocolException: Read error: ssl=0x76fbf20c3758: Failure in SSL library, usually a protocol error\n                                                                                                    error:1e000065:Cipher functions:OPENSSL_internal:BAD_DECRYPT (third_party/openssl/boringssl/src/crypto/fipsmodule/cipher/e_aes.c:1078 0x76fadea2461e:0x00000000)\n                                                                                                    error:1000008b:SSL routines:OPENSSL_internal:DECRYPTION_FAILED_OR_BAD_RECORD_MAC (third_party/openssl/boringssl/src/ssl/tls_record.cc:294 0x76fadea2461e:0x00000000)\n                                                                                                        at com.google.android.gms.org.conscrypt.NativeCrypto.SSL_read(Native Method)\n                                                                                                        at com.google.android.gms.org.conscrypt.NativeSsl.read(:com.google.android.gms@225014047@22.50.14 (190800-499278674):3)\n                                                                                                        at com.google.android.gms.org.conscrypt.ConscryptFileDescriptorSocket$SSLInputStream.read(:com.google.android.gms@225014047@22.50.14 (190800-499278674):6)\n                                                                                                        at com.android.okhttp.okio.Okio$2.read(Okio.java:138)\n                                                                                                        at com.android.okhttp.okio.AsyncTimeout$2.read(AsyncTimeout.java:213)\n                                                                                                        at com.android.okhttp.okio.RealBufferedSource.read(RealBufferedSource.java:51)\n                                                                                                        at com.android.okhttp.internal.http.Http1xStream$FixedLengthSource.read(Http1xStream.java:395)\n                                                                                                        at com.android.okhttp.okio.RealBufferedSource$1.read(RealBufferedSource.java:372)\n                                                                                                        at com.google.android.gms.internal.ads.zzft.zza(com.google.android.gms:play-services-ads@@22.0.0:2)\n                                                                                                        ... 17 more\n2023-07-12  TrafficStats   D  tagSocket(596) with statsTag=0xffffffff, statsUid=-1\n</code></pre>\n<p>Please help solve the problem</p>\n<p>I tried changing AdMob dependency versions</p>\n<pre><code>implementation 'com.google.android.gms:play-services-ads:22.0.0'\n</code></pre>\n"},{"tags":["java","spring","kotlin","mockk"],"comments":[{"owner":{"account_id":14358183,"reputation":339,"user_id":10371394,"display_name":"Sebastian Lore"},"score":0,"creation_date":1689177776,"post_id":76672038,"comment_id":135177573,"body_markdown":"You could try to extend MockMultipartFile. From what I can see it&#39;s not final.","body":"You could try to extend MockMultipartFile. From what I can see it&#39;s not final."}],"owner":{"account_id":29003540,"reputation":1,"user_id":22216630,"display_name":"QendresaZ"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689174388,"creation_date":1689174388,"question_id":76672038,"body_markdown":"I&#39;m trying to mock a MultipartFile in a Spring Boot test using the Mockk library. I&#39;m experiencing an issue where I get an AbstractMethodError when calling the getContentType() method on the mocked file.\r\n\r\nError message:\r\njava.lang.AbstractMethodError: Receiver class org.springframework.web.multipart.MultipartFile$Subclass0 does not define or inherit an implementation of the resolved method &#39;abstract java.lang.String getContentType()&#39; of interface org.springframework.web.multipart.MultipartFile.\r\n\r\nCode:\r\nHere&#39;s the test where I&#39;m encountering the issue:\r\n\r\n```\r\nimport io.mockk.every\r\nimport org.junit.jupiter.api.Test\r\nimport org.springframework.http.MediaType\r\nimport org.springframework.mock.web.MockMultipartFile\r\nimport org.springframework.test.web.servlet.MockMvc\r\nimport org.springframework.test.web.servlet.request.MockMvcRequestBuilders.multipart\r\nimport org.springframework.test.web.servlet.result.MockMvcResultMatchers.status\r\nimport test.dto.PdfDocumentResponseDto\r\nimport test.service.S3FileService\r\n\r\nclass PdfDocumentControllerIntegrationTest {\r\n\r\nlateinit var mockMvc: MockMvc\r\n\r\nlateinit var s3FileService: S3FileService\r\n\r\n@Test\r\nfun `should upload file`() {\r\n    val mockFile = MockMultipartFile(&quot;file&quot;, &quot;test.pdf&quot;, &quot;application/pdf&quot;, &quot;test data&quot;.toByteArray())\r\n    val responseDto = PdfDocumentResponseDto(\r\n        pdfDocumentFilePath = &quot;test-path.com&quot;\r\n    )\r\n\r\n    every { s3FileService.uploadFile(any()) } returns responseDto\r\n\r\n    mockMvc.perform(multipart(&quot;/v1/pdf-test-service/pdf&quot;)\r\n        .file(mockFile)\r\n        .contentType(MediaType.MULTIPART_FORM_DATA))\r\n        .andExpect(status().isOk)\r\n}\r\n}\r\n\r\n```\r\n\r\nEnvironment:\r\n\r\nSpring Boot version &quot;3.0.5&quot;\r\nMockk version: 3.0.1&quot;\r\nKotlin version: &quot;1.7.22&quot;\r\nOperating System: macOS\r\n\r\nAny help would be greatly appreciated!\r\n\r\nI&#39;ve tried using a custom stub implementation of MultipartFile and passing that to the mockMvc.perform() method, but the .file() method only accepts MockMultipartFile objects.\r\n","title":"AbstractMethodError when Mocking MultipartFile in Spring Boot Test","body":"<p>I'm trying to mock a MultipartFile in a Spring Boot test using the Mockk library. I'm experiencing an issue where I get an AbstractMethodError when calling the getContentType() method on the mocked file.</p>\n<p>Error message:\njava.lang.AbstractMethodError: Receiver class org.springframework.web.multipart.MultipartFile$Subclass0 does not define or inherit an implementation of the resolved method 'abstract java.lang.String getContentType()' of interface org.springframework.web.multipart.MultipartFile.</p>\n<p>Code:\nHere's the test where I'm encountering the issue:</p>\n<pre><code>import io.mockk.every\nimport org.junit.jupiter.api.Test\nimport org.springframework.http.MediaType\nimport org.springframework.mock.web.MockMultipartFile\nimport org.springframework.test.web.servlet.MockMvc\nimport org.springframework.test.web.servlet.request.MockMvcRequestBuilders.multipart\nimport org.springframework.test.web.servlet.result.MockMvcResultMatchers.status\nimport test.dto.PdfDocumentResponseDto\nimport test.service.S3FileService\n\nclass PdfDocumentControllerIntegrationTest {\n\nlateinit var mockMvc: MockMvc\n\nlateinit var s3FileService: S3FileService\n\n@Test\nfun `should upload file`() {\n    val mockFile = MockMultipartFile(&quot;file&quot;, &quot;test.pdf&quot;, &quot;application/pdf&quot;, &quot;test data&quot;.toByteArray())\n    val responseDto = PdfDocumentResponseDto(\n        pdfDocumentFilePath = &quot;test-path.com&quot;\n    )\n\n    every { s3FileService.uploadFile(any()) } returns responseDto\n\n    mockMvc.perform(multipart(&quot;/v1/pdf-test-service/pdf&quot;)\n        .file(mockFile)\n        .contentType(MediaType.MULTIPART_FORM_DATA))\n        .andExpect(status().isOk)\n}\n}\n\n</code></pre>\n<p>Environment:</p>\n<p>Spring Boot version &quot;3.0.5&quot;\nMockk version: 3.0.1&quot;\nKotlin version: &quot;1.7.22&quot;\nOperating System: macOS</p>\n<p>Any help would be greatly appreciated!</p>\n<p>I've tried using a custom stub implementation of MultipartFile and passing that to the mockMvc.perform() method, but the .file() method only accepts MockMultipartFile objects.</p>\n"},{"tags":["java","eclipse","log4j2"],"comments":[{"owner":{"account_id":3159259,"reputation":109666,"user_id":2670892,"display_name":"greg-449"},"score":1,"creation_date":1689177051,"post_id":76672015,"comment_id":135177439,"body_markdown":"The `[36m` stuff is just attempts to set the console colours using `ANSI control codes`. You can enable support for colours in the Eclipse console in the Eclipse Preferences in &#39;Run/Debug &gt; Console &gt; ANSI Support&#39;","body":"The <code>[36m</code> stuff is just attempts to set the console colours using <code>ANSI control codes</code>. You can enable support for colours in the Eclipse console in the Eclipse Preferences in &#39;Run/Debug &gt; Console &gt; ANSI Support&#39;"},{"owner":{"account_id":22176960,"reputation":21,"user_id":16421328,"display_name":"OTA"},"score":0,"creation_date":1689362959,"post_id":76672015,"comment_id":135208258,"body_markdown":"@greg-449, then it does not have anything to do with &quot;Source not found...&quot; existing issue. Thanks.","body":"@greg-449, then it does not have anything to do with &quot;Source not found...&quot; existing issue. Thanks."}],"owner":{"account_id":22176960,"reputation":21,"user_id":16421328,"display_name":"OTA"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689174244,"creation_date":1689174244,"question_id":76672015,"body_markdown":"In log4j2.xml, root level includeLocation property is set to true, but when clicking the hyperlink in the console &quot;Source not found for [36muitap.framework.DefaultSettings&quot; is displayed.\r\n\r\nHere part of the Appenders and Loggers\r\n\r\n```\r\n...\r\n  &lt;Console name=&quot;CONS&quot; target=&quot;SYSTEM_OUT&quot;&gt;\r\n            &lt;PatternLayout pattern=&quot;${PATTERN}&quot; disableAnsi=&quot;false&quot;/&gt;\r\n        &lt;/Console&gt;\r\n    &lt;/Appenders&gt;\r\n    \r\n    &lt;Loggers&gt;\r\n        &lt;Root level=&quot;all&quot; includeLocation=&quot;true&quot;&gt;\r\n            &lt;AppenderRef ref=&quot;CONS&quot; /&gt;\r\n        &lt;/Root&gt;\r\n    &lt;/Loggers&gt;\r\n&lt;/Configuration&gt;\r\n```\r\n\r\nIn Console, location hyperlink is displayed\r\n`2023-07-12 10:22:40.957 [ DEBUG] [main] - [uitap.utils.ZSettings(ZSettings.java:106)   : hrties(real.user)`\r\n\r\nBut the **(ZSettings.java:106)** hyperlinks throws &quot;Source not found...&quot;.\r\n\r\nAdditional details: I just noticed that when the log file displays logs like this:\r\n\r\n\r\n```\r\n2023-07-12 10:22:40.957 [ [36mDEBUG[m] [[35mmain[m] -  [36muitap.utils.ZSettings[m(ZSettings.java:86)  : hrties(real.user)\r\n2023-07-12 10:22:40.957 [ [36mDEBUG[m] [[35mmain[m] -  [36muitap.utils.ZSettings[m(ZSettings.java:86)  : hrties(foreign.user)\r\n2023-07-12 10:22:40.957 [ [36mDEBUG[m] [[35mmain[m] -  [36muitap.utils.ZSettings[m(ZSettings.java:86)  : hrties(local.user)\r\n```\r\n\r\nSouldn&#39;t the count starts in ... [34m ... [35m ... [36m...?\r\n\r\nI remember moving some maven packages around using &quot;refactor&quot; feature, so I would like that fact as the cause of the number order issue.\r\n\r\nAny pointing direction is welcome, thanks.\r\n\r\n\r\n\r\n**What did I try?**\r\n\r\n1. I tried changing folder changing package order using Java Build Path &gt;&gt; Order and Export\r\n2. I tried verify that all classes properly have the Logger log = LogManager.getLogger() with the class parameter.","title":"Log4j2 Root Location - Source not found","body":"<p>In log4j2.xml, root level includeLocation property is set to true, but when clicking the hyperlink in the console &quot;Source not found for [36muitap.framework.DefaultSettings&quot; is displayed.</p>\n<p>Here part of the Appenders and Loggers</p>\n<pre><code>...\n  &lt;Console name=&quot;CONS&quot; target=&quot;SYSTEM_OUT&quot;&gt;\n            &lt;PatternLayout pattern=&quot;${PATTERN}&quot; disableAnsi=&quot;false&quot;/&gt;\n        &lt;/Console&gt;\n    &lt;/Appenders&gt;\n    \n    &lt;Loggers&gt;\n        &lt;Root level=&quot;all&quot; includeLocation=&quot;true&quot;&gt;\n            &lt;AppenderRef ref=&quot;CONS&quot; /&gt;\n        &lt;/Root&gt;\n    &lt;/Loggers&gt;\n&lt;/Configuration&gt;\n</code></pre>\n<p>In Console, location hyperlink is displayed\n<code>2023-07-12 10:22:40.957 [ DEBUG] [main] - [uitap.utils.ZSettings(ZSettings.java:106)   : hrties(real.user)</code></p>\n<p>But the <strong>(ZSettings.java:106)</strong> hyperlinks throws &quot;Source not found...&quot;.</p>\n<p>Additional details: I just noticed that when the log file displays logs like this:</p>\n<pre><code>2023-07-12 10:22:40.957 [ [36mDEBUG[m] [[35mmain[m] -  [36muitap.utils.ZSettings[m(ZSettings.java:86)  : hrties(real.user)\n2023-07-12 10:22:40.957 [ [36mDEBUG[m] [[35mmain[m] -  [36muitap.utils.ZSettings[m(ZSettings.java:86)  : hrties(foreign.user)\n2023-07-12 10:22:40.957 [ [36mDEBUG[m] [[35mmain[m] -  [36muitap.utils.ZSettings[m(ZSettings.java:86)  : hrties(local.user)\n</code></pre>\n<p>Souldn't the count starts in ... [34m ... [35m ... [36m...?</p>\n<p>I remember moving some maven packages around using &quot;refactor&quot; feature, so I would like that fact as the cause of the number order issue.</p>\n<p>Any pointing direction is welcome, thanks.</p>\n<p><strong>What did I try?</strong></p>\n<ol>\n<li>I tried changing folder changing package order using Java Build Path &gt;&gt; Order and Export</li>\n<li>I tried verify that all classes properly have the Logger log = LogManager.getLogger() with the class parameter.</li>\n</ol>\n"},{"tags":["java","mysql","spring","hibernate","jpa"],"comments":[{"owner":{"account_id":2702906,"reputation":22658,"user_id":2333222,"display_name":"SubOptimal"},"score":3,"creation_date":1422450010,"post_id":28192547,"comment_id":44752770,"body_markdown":"The error message means one column returns data in a type which cannot be mapped. `No Dialect mapping for JDBC type: 1111` indicates java.sql.Types.OTHER`. What column types do you select from the table?","body":"The error message means one column returns data in a type which cannot be mapped. <code>No Dialect mapping for JDBC type: 1111</code> indicates java.sql.Types.OTHER`. What column types do you select from the table?"},{"owner":{"account_id":1924775,"reputation":1501,"user_id":1735497,"accept_rate":70,"display_name":"SakeSushiBig"},"score":1,"creation_date":1422450121,"post_id":28192547,"comment_id":44752832,"body_markdown":"Oh, thanks. I thought this means the dialect type ... Yeah I like to use UUIDs as IDs and we previously always worked with postgres, which has a UUID column type. So we could just say @Type(type=&quot;pg-uuid&quot;); I don&#39;t think mysql has an UUID column type though","body":"Oh, thanks. I thought this means the dialect type ... Yeah I like to use UUIDs as IDs and we previously always worked with postgres, which has a UUID column type. So we could just say @Type(type=&quot;pg-uuid&quot;); I don&#39;t think mysql has an UUID column type though"},{"owner":{"account_id":1924775,"reputation":1501,"user_id":1735497,"accept_rate":70,"display_name":"SakeSushiBig"},"score":0,"creation_date":1422450438,"post_id":28192547,"comment_id":44753033,"body_markdown":"Just found out it is very similar to postgres: apply @Type(type=&quot;uuid-char&quot;) annotation to the id attribute.","body":"Just found out it is very similar to postgres: apply @Type(type=&quot;uuid-char&quot;) annotation to the id attribute."},{"owner":{"account_id":2465273,"reputation":710,"user_id":2148530,"accept_rate":50,"display_name":"giaffa86"},"score":1,"creation_date":1489770607,"post_id":28192547,"comment_id":72836679,"body_markdown":"I have this problem if put on SELECT statement a json field.\nI use PostgresSQL and a custom hibernate field Type for json type.","body":"I have this problem if put on SELECT statement a json field. I use PostgresSQL and a custom hibernate field Type for json type."}],"answers":[{"tags":[],"owner":{"account_id":1924775,"reputation":1501,"user_id":1735497,"accept_rate":70,"display_name":"SakeSushiBig"},"down_vote_count":0,"up_vote_count":37,"is_accepted":true,"score":37,"last_activity_date":1513162936,"creation_date":1422450542,"answer_id":28193142,"question_id":28192547,"body_markdown":"Here the answer based on the comment from SubOptimal:\r\n\r\nThe error message actually says that one column type cannot be mapped to a database type by hibernate.\r\nIn my case it was the `java.util.UUID` type I use as primary key in some of my entities. Just apply the annotation `@Type(type=&quot;uuid-char&quot;)` (for postgres `@Type(type=&quot;pg-uuid&quot;)`)","title":"No Dialect mapping for JDBC type: 1111","body":"<p>Here the answer based on the comment from SubOptimal:</p>\n\n<p>The error message actually says that one column type cannot be mapped to a database type by hibernate.\nIn my case it was the <code>java.util.UUID</code> type I use as primary key in some of my entities. Just apply the annotation <code>@Type(type=\"uuid-char\")</code> (for postgres <code>@Type(type=\"pg-uuid\")</code>)</p>\n"},{"tags":[],"owner":{"account_id":1463263,"reputation":5978,"user_id":1376947,"accept_rate":70,"display_name":"icl7126"},"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1433102340,"creation_date":1433102340,"answer_id":30562066,"question_id":28192547,"body_markdown":"There is also another common use-case throwing this exception. Calling function which returns `void`. For more info and solution go [here][1].\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/12557957/jpa-hibernate-call-postgres-function-void-return-mappingexception","title":"No Dialect mapping for JDBC type: 1111","body":"<p>There is also another common use-case throwing this exception. Calling function which returns <code>void</code>. For more info and solution go <a href=\"https://stackoverflow.com/questions/12557957/jpa-hibernate-call-postgres-function-void-return-mappingexception\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":4905682,"reputation":839,"user_id":3952494,"display_name":"Klapsa2503"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1441713378,"creation_date":1441713378,"answer_id":32457211,"question_id":28192547,"body_markdown":"Sometimes when you call sql procedure/function it might be required to return something. You can try returning void: `RETURN;` or string (this one worked for me): `RETURN &#39;OK&#39;`","title":"No Dialect mapping for JDBC type: 1111","body":"<p>Sometimes when you call sql procedure/function it might be required to return something. You can try returning void: <code>RETURN;</code> or string (this one worked for me): <code>RETURN 'OK'</code></p>\n"},{"tags":[],"owner":{"account_id":2273221,"reputation":716,"user_id":2000123,"display_name":"jaskirat Singh"},"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1480939259,"creation_date":1480939259,"answer_id":40973830,"question_id":28192547,"body_markdown":"Please Check if some Column return many have **unknow Type** in Query .\r\n\r\n**eg : &#39;1&#39; as column_name**  can have type unknown \r\n\r\nand **1 as column_name is Integer**  is correct One .\r\n\r\nThis thing worked for me.","title":"No Dialect mapping for JDBC type: 1111","body":"<p>Please Check if some Column return many have <strong>unknow Type</strong> in Query .</p>\n\n<p><strong>eg : '1' as column_name</strong>  can have type unknown </p>\n\n<p>and <strong>1 as column_name is Integer</strong>  is correct One .</p>\n\n<p>This thing worked for me.</p>\n"},{"tags":[],"owner":{"account_id":2186655,"reputation":481,"user_id":1934919,"display_name":"Anubis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1516269978,"creation_date":1516269978,"answer_id":48318631,"question_id":28192547,"body_markdown":"For anybody getting this error with an old hibernate (3.x) version:\r\n\r\ndo not write the return type in capital letters. hibernate type implementation mapping uses lowercase return types and does not convert  them:\r\n\r\n    CREATE OR REPLACE FUNCTION do_something(param varchar)\r\n    \tRETURNS integer AS\r\n    $BODY$\r\n    ...","title":"No Dialect mapping for JDBC type: 1111","body":"<p>For anybody getting this error with an old hibernate (3.x) version:</p>\n\n<p>do not write the return type in capital letters. hibernate type implementation mapping uses lowercase return types and does not convert  them:</p>\n\n<pre><code>CREATE OR REPLACE FUNCTION do_something(param varchar)\n    RETURNS integer AS\n$BODY$\n...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8473858,"reputation":689,"user_id":6355666,"accept_rate":93,"display_name":"GaborH"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1522065097,"creation_date":1522065097,"answer_id":49490797,"question_id":28192547,"body_markdown":"In my case the problem was that, I forgot to add resultClasses attribute when I setup my stored procedure in my User class.\r\n\r\n    @NamedStoredProcedureQuery(name = &quot;find_email&quot;,\r\n                    procedureName = &quot;find_email&quot;, resultClasses = User.class, //&lt;--I forgot that. \r\n                    parameters = {\r\n                        @StoredProcedureParameter(mode = ParameterMode.IN, name = &quot;param_email&quot;, type = String.class)\r\n                    }),","title":"No Dialect mapping for JDBC type: 1111","body":"<p>In my case the problem was that, I forgot to add resultClasses attribute when I setup my stored procedure in my User class.</p>\n\n<pre><code>@NamedStoredProcedureQuery(name = \"find_email\",\n                procedureName = \"find_email\", resultClasses = User.class, //&lt;--I forgot that. \n                parameters = {\n                    @StoredProcedureParameter(mode = ParameterMode.IN, name = \"param_email\", type = String.class)\n                }),\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15012017,"reputation":581,"user_id":10836208,"display_name":"Ramya"},"down_vote_count":0,"up_vote_count":48,"is_accepted":false,"score":48,"last_activity_date":1546620313,"creation_date":1546496163,"answer_id":54017193,"question_id":28192547,"body_markdown":"I got the same error because my query returned a UUID column. To fix that I returned the UUID column as varchar type through the query like &quot;cast(columnName as varchar)&quot;, then it worked. \r\n\r\nExample:\r\n\r\n    public interface StudRepository extends JpaRepository&lt;Mark, UUID&gt; {\r\n        \r\n        @Modifying\r\n    \t@Query(value = &quot;SELECT Cast(stuid as varchar) id, SUM(marks) as marks FROM studs where group by stuid&quot;, nativeQuery = true)\r\n    \tList&lt;Student&gt; findMarkGroupByStuid();\r\n\r\n        public static interface Student(){\r\n            private String getId();\r\n            private String getMarks();\r\n        }\r\n    }","title":"No Dialect mapping for JDBC type: 1111","body":"<p>I got the same error because my query returned a UUID column. To fix that I returned the UUID column as varchar type through the query like \"cast(columnName as varchar)\", then it worked. </p>\n\n<p>Example:</p>\n\n<pre><code>public interface StudRepository extends JpaRepository&lt;Mark, UUID&gt; {\n\n    @Modifying\n    @Query(value = \"SELECT Cast(stuid as varchar) id, SUM(marks) as marks FROM studs where group by stuid\", nativeQuery = true)\n    List&lt;Student&gt; findMarkGroupByStuid();\n\n    public static interface Student(){\n        private String getId();\n        private String getMarks();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15883816,"reputation":63,"user_id":11579483,"display_name":"Mike Packer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1562254048,"creation_date":1562254048,"answer_id":56890954,"question_id":28192547,"body_markdown":"This also happens when you are using Hibernate and returning a void function. AT least w/ postgres. It doesnt know how to handle the void.  I ended up having to change my void to a return int.","title":"No Dialect mapping for JDBC type: 1111","body":"<p>This also happens when you are using Hibernate and returning a void function. AT least w/ postgres. It doesnt know how to handle the void.  I ended up having to change my void to a return int.</p>\n"},{"tags":[],"owner":{"account_id":451822,"reputation":1120,"user_id":847917,"accept_rate":79,"display_name":"tutak"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1564666307,"creation_date":1564666307,"answer_id":57310214,"question_id":28192547,"body_markdown":"If you are using Postgres, check that you don&#39;t have a column of type **Abstime**. Abstime is an internal Postgres datatype not recognized by JPA. In this case, converting to Text using **TO_CHAR** *could* help if permitted by your business requirements.","title":"No Dialect mapping for JDBC type: 1111","body":"<p>If you are using Postgres, check that you don't have a column of type <strong>Abstime</strong>. Abstime is an internal Postgres datatype not recognized by JPA. In this case, converting to Text using <strong>TO_CHAR</strong> <em>could</em> help if permitted by your business requirements.</p>\n"},{"tags":[],"owner":{"account_id":6555365,"reputation":1949,"user_id":5068213,"accept_rate":86,"display_name":"Bharti Rawat"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1570621930,"creation_date":1570621930,"answer_id":58303533,"question_id":28192547,"body_markdown":"If you have native SQL query then fix it by adding a cast to the query.\r\n\r\n**Example**:\r\n\r\n    CAST(&#39;yourString&#39; AS varchar(50)) as anyColumnName\r\n\r\nIn my case it worked for me.","title":"No Dialect mapping for JDBC type: 1111","body":"<p>If you have native SQL query then fix it by adding a cast to the query.</p>\n\n<p><strong>Example</strong>:</p>\n\n<pre><code>CAST('yourString' AS varchar(50)) as anyColumnName\n</code></pre>\n\n<p>In my case it worked for me.</p>\n"},{"tags":[],"owner":{"account_id":11738231,"reputation":356,"user_id":8591363,"display_name":"Ashok Parmar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1571134125,"creation_date":1571132813,"answer_id":58391790,"question_id":28192547,"body_markdown":"This is for Hibernate (5.x) version\r\n\r\nCalling database function which return JSON string/object\r\n\r\nFor this use `unwrap(org.hibernate.query.NativeQuery.class).addScalar()` methods for the same.\r\n\r\nExample as below (Spring &amp; Hibernate):\r\n\r\n```\r\n@PersistenceContext\r\n\r\nEntityManager em;\r\n\r\n@Override\r\n\r\n\tpublic String getJson(String strLayerName) {\r\n\r\n\t\tString *nativeQuery* = &quot;select fn_layer_attributes(:layername)&quot;;\r\n\r\n\t\treturn em.createNativeQuery(*nativeQuery*).setParameter(&quot;layername&quot;, strLayerName).**unwrap(org.hibernate.query.NativeQuery.class).addScalar**(&quot;fn_layer_attributes&quot;, **new JsonNodeBinaryType()**) .getSingleResult().toString();\r\n \t\t\r\n\t}\r\n \t\t\r\n```","title":"No Dialect mapping for JDBC type: 1111","body":"<p>This is for Hibernate (5.x) version</p>\n\n<p>Calling database function which return JSON string/object</p>\n\n<p>For this use <code>unwrap(org.hibernate.query.NativeQuery.class).addScalar()</code> methods for the same.</p>\n\n<p>Example as below (Spring &amp; Hibernate):</p>\n\n<pre><code>@PersistenceContext\n\nEntityManager em;\n\n@Override\n\n    public String getJson(String strLayerName) {\n\n        String *nativeQuery* = \"select fn_layer_attributes(:layername)\";\n\n        return em.createNativeQuery(*nativeQuery*).setParameter(\"layername\", strLayerName).**unwrap(org.hibernate.query.NativeQuery.class).addScalar**(\"fn_layer_attributes\", **new JsonNodeBinaryType()**) .getSingleResult().toString();\n\n    }\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1012936,"reputation":145168,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1689174123,"creation_date":1579101981,"answer_id":59754570,"question_id":28192547,"body_markdown":"Finding the column that triggered the issue\r\n-------------------------------------------\r\n\r\nFirst, you didn&#39;t provide the entity mapping so that we could tell what column generated this problem. For instance, it could be a `UUID` or a `JSON` column.\r\n\r\nNow, you are using a very old Hibernate Dialect. The `MySQL5Dialect` is meant for MySQL 5. Most likely you are using a newer MySQL version.\r\n\r\nSo, try to use the `MySQL8Dialect` instead:\r\n\r\n    spring.jpa.database-platform=org.hibernate.dialect.MySQL8Dialect\r\n\r\nAdding non-standard types\r\n-------------------------\r\n\r\nIn case you got the issue because you are using a JSON column type, try to provide a custom Hibernate Dialect that supports the non-standard Type:\r\n\r\n    public class MySQL8JsonDialect\r\n            extends MySQL8Dialect{\r\n     \r\n        public MySQL8JsonDialect() {\r\n            super();\r\n            this.registerHibernateType(\r\n                Types.OTHER, JsonStringType.class.getName()\r\n            );\r\n        }\r\n    }\r\n\r\nAnd use the custom Hibernate Dialect:\r\n\r\n    &lt;property\r\n        name=&quot;hibernate.dialect&quot;\r\n        value=&quot;com.vladmihalcea.book.hpjp.hibernate.type.json.MySQL8JsonDialect&quot;\r\n    /&gt;\r\n\r\nIf you get this exception when executing SQL native queries, then you need to pass the type via [`addScalar`](https://vladmihalcea.com/hibernate-no-dialect-mapping-for-jdbc-type/):\r\n\r\n    JsonNode properties = (JsonNode) entityManager\r\n    .createNativeQuery(\r\n        &quot;SELECT properties &quot; +\r\n        &quot;FROM book &quot; +\r\n        &quot;WHERE isbn = :isbn&quot;)\r\n    .setParameter(&quot;isbn&quot;, &quot;978-9730228236&quot;)\r\n    .unwrap(org.hibernate.query.NativeQuery.class)\r\n    .addScalar(&quot;properties&quot;, JsonStringType.INSTANCE)\r\n    .getSingleResult();\r\n     \r\n    assertEquals(\r\n        &quot;High-Performance Java Persistence&quot;,\r\n        properties.get(&quot;title&quot;).asText()\r\n    );\r\n","title":"No Dialect mapping for JDBC type: 1111","body":"<h2>Finding the column that triggered the issue</h2>\n<p>First, you didn't provide the entity mapping so that we could tell what column generated this problem. For instance, it could be a <code>UUID</code> or a <code>JSON</code> column.</p>\n<p>Now, you are using a very old Hibernate Dialect. The <code>MySQL5Dialect</code> is meant for MySQL 5. Most likely you are using a newer MySQL version.</p>\n<p>So, try to use the <code>MySQL8Dialect</code> instead:</p>\n<pre><code>spring.jpa.database-platform=org.hibernate.dialect.MySQL8Dialect\n</code></pre>\n<h2>Adding non-standard types</h2>\n<p>In case you got the issue because you are using a JSON column type, try to provide a custom Hibernate Dialect that supports the non-standard Type:</p>\n<pre><code>public class MySQL8JsonDialect\n        extends MySQL8Dialect{\n \n    public MySQL8JsonDialect() {\n        super();\n        this.registerHibernateType(\n            Types.OTHER, JsonStringType.class.getName()\n        );\n    }\n}\n</code></pre>\n<p>And use the custom Hibernate Dialect:</p>\n<pre><code>&lt;property\n    name=&quot;hibernate.dialect&quot;\n    value=&quot;com.vladmihalcea.book.hpjp.hibernate.type.json.MySQL8JsonDialect&quot;\n/&gt;\n</code></pre>\n<p>If you get this exception when executing SQL native queries, then you need to pass the type via <a href=\"https://vladmihalcea.com/hibernate-no-dialect-mapping-for-jdbc-type/\" rel=\"nofollow noreferrer\"><code>addScalar</code></a>:</p>\n<pre><code>JsonNode properties = (JsonNode) entityManager\n.createNativeQuery(\n    &quot;SELECT properties &quot; +\n    &quot;FROM book &quot; +\n    &quot;WHERE isbn = :isbn&quot;)\n.setParameter(&quot;isbn&quot;, &quot;978-9730228236&quot;)\n.unwrap(org.hibernate.query.NativeQuery.class)\n.addScalar(&quot;properties&quot;, JsonStringType.INSTANCE)\n.getSingleResult();\n \nassertEquals(\n    &quot;High-Performance Java Persistence&quot;,\n    properties.get(&quot;title&quot;).asText()\n);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9229376,"reputation":902,"user_id":6856020,"display_name":"Supreet Singh"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1586127197,"creation_date":1586127197,"answer_id":61050586,"question_id":28192547,"body_markdown":"I got the same error, the problem here is UUID stored in DB is not converting to object.\r\n\r\nI tried  applying these annotations @Type(type=&quot;uuid-char&quot;) (for postgres @Type(type=&quot;pg-uuid&quot;) but it didn&#39;t work for me.\r\n\r\n\r\nThis worked for me. Suppose you want id and name from a table with a native query in JPA. Create one entity class like &#39;User&#39; with fields id and name and then try converting object[] to entity we want. Here this matched data is list of array of object we are getting from query.\r\n\r\n    @Query( value = &quot;SELECT CAST(id as varchar) id, name from users &quot;, nativeQuery = true)\r\n        \r\n    public List&lt;Object[]&gt; search();\r\n\r\n    public class User{\r\n       private UUID id;\r\n       private String name;\r\n    }\r\n    \r\n    \r\n    List&lt;User&gt; userList=new ArrayList&lt;&gt;();\r\n\r\n    for(Object[] data:matchedData){\r\n            userList.add(new User(UUID.fromString(String.valueOf(data[0])),\r\n                    String.valueOf(data[1])));\r\n\r\n        }\r\n\r\n\r\n\r\n\r\nSuppose this is the entity we have \r\n","title":"No Dialect mapping for JDBC type: 1111","body":"<p>I got the same error, the problem here is UUID stored in DB is not converting to object.</p>\n\n<p>I tried  applying these annotations @Type(type=\"uuid-char\") (for postgres @Type(type=\"pg-uuid\") but it didn't work for me.</p>\n\n<p>This worked for me. Suppose you want id and name from a table with a native query in JPA. Create one entity class like 'User' with fields id and name and then try converting object[] to entity we want. Here this matched data is list of array of object we are getting from query.</p>\n\n<pre><code>@Query( value = \"SELECT CAST(id as varchar) id, name from users \", nativeQuery = true)\n\npublic List&lt;Object[]&gt; search();\n\npublic class User{\n   private UUID id;\n   private String name;\n}\n\n\nList&lt;User&gt; userList=new ArrayList&lt;&gt;();\n\nfor(Object[] data:matchedData){\n        userList.add(new User(UUID.fromString(String.valueOf(data[0])),\n                String.valueOf(data[1])));\n\n    }\n</code></pre>\n\n<p>Suppose this is the entity we have </p>\n"},{"tags":[],"owner":{"account_id":8212780,"reputation":173,"user_id":6180243,"display_name":"iamfnizami"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1600517209,"creation_date":1600517209,"answer_id":63968611,"question_id":28192547,"body_markdown":"Function or procedure returning **void** cause some issue with JPA/Hibernate, so changing it with return **integer** and calling return 1 at the end of procedure may solved the problem.\r\n\r\nSQL Type 1111 represents String.","title":"No Dialect mapping for JDBC type: 1111","body":"<p>Function or procedure returning <strong>void</strong> cause some issue with JPA/Hibernate, so changing it with return <strong>integer</strong> and calling return 1 at the end of procedure may solved the problem.</p>\n<p>SQL Type 1111 represents String.</p>\n"},{"tags":[],"owner":{"account_id":121188,"reputation":5073,"user_id":314089,"accept_rate":60,"display_name":"icyerasor"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1614330854,"creation_date":1614330854,"answer_id":66383032,"question_id":28192547,"body_markdown":"Another simple explanation might be that you&#39;re fetching a complex Type (Entity/POJO) but do not specify the Entity to map to:\r\n\r\n    String sql = &quot;select yourentity.* from {h-schema}Yourentity yourentity&quot;;\r\n    return entityManager.createNativeQuery(sql).getResultList();\r\n\r\nsimply add the class to map to in the createNativeQuery method:\r\n\r\n    return entityManager.createNativeQuery(sql, Yourentity.class).getResultList();","title":"No Dialect mapping for JDBC type: 1111","body":"<p>Another simple explanation might be that you're fetching a complex Type (Entity/POJO) but do not specify the Entity to map to:</p>\n<pre><code>String sql = &quot;select yourentity.* from {h-schema}Yourentity yourentity&quot;;\nreturn entityManager.createNativeQuery(sql).getResultList();\n</code></pre>\n<p>simply add the class to map to in the createNativeQuery method:</p>\n<pre><code>return entityManager.createNativeQuery(sql, Yourentity.class).getResultList();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3881045,"reputation":2358,"user_id":3213527,"accept_rate":100,"display_name":"Andrei Savin"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1616574919,"creation_date":1616574919,"answer_id":66777378,"question_id":28192547,"body_markdown":"In my case, the issue was Hibernate not knowing how to deal with an `UUID` column. If you are using Postgres, try adding this to your `resources/application.properties`:\r\n\r\n```\r\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQL9Dialect\r\n```","title":"No Dialect mapping for JDBC type: 1111","body":"<p>In my case, the issue was Hibernate not knowing how to deal with an <code>UUID</code> column. If you are using Postgres, try adding this to your <code>resources/application.properties</code>:</p>\n<pre><code>spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQL9Dialect\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8942000,"reputation":91,"user_id":6670693,"display_name":"Ashish Rajput"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1617717714,"creation_date":1617714236,"answer_id":66969207,"question_id":28192547,"body_markdown":"**if using Postgres**\r\n\r\n\r\n    public class CustomPostgreSqlDialect extends PostgreSQL94Dialect{\r\n    \r\n        @Override\r\n        public SqlTypeDescriptor remapSqlTypeDescriptor(SqlTypeDescriptor sqlTypeDescriptor)\r\n        {\r\n            switch (sqlTypeDescriptor.getSqlType())\r\n            {\r\n            case Types.CLOB:\r\n                return VarcharTypeDescriptor.INSTANCE;\r\n            case Types.BLOB:\r\n                return VarcharTypeDescriptor.INSTANCE;\r\n            case 1111://1111 should be json of pgsql\r\n                return VarcharTypeDescriptor.INSTANCE;\r\n            }\r\n            return super.remapSqlTypeDescriptor(sqlTypeDescriptor);\r\n        }\r\n        public CustomPostgreSqlDialect() {\r\n            super();\r\n            registerHibernateType(1111, &quot;string&quot;);\r\n        }}\r\n\r\n\r\nand use \r\n\r\n \r\n\r\n    &lt;prop key=&quot;hibernate.dialect&quot;&gt;com.abc.CustomPostgreSqlDialect&lt;/prop&gt;\r\n\r\n   \r\n\r\n\r\n","title":"No Dialect mapping for JDBC type: 1111","body":"<p><strong>if using Postgres</strong></p>\n<pre><code>public class CustomPostgreSqlDialect extends PostgreSQL94Dialect{\n\n    @Override\n    public SqlTypeDescriptor remapSqlTypeDescriptor(SqlTypeDescriptor sqlTypeDescriptor)\n    {\n        switch (sqlTypeDescriptor.getSqlType())\n        {\n        case Types.CLOB:\n            return VarcharTypeDescriptor.INSTANCE;\n        case Types.BLOB:\n            return VarcharTypeDescriptor.INSTANCE;\n        case 1111://1111 should be json of pgsql\n            return VarcharTypeDescriptor.INSTANCE;\n        }\n        return super.remapSqlTypeDescriptor(sqlTypeDescriptor);\n    }\n    public CustomPostgreSqlDialect() {\n        super();\n        registerHibernateType(1111, &quot;string&quot;);\n    }}\n</code></pre>\n<p>and use</p>\n<pre><code>&lt;prop key=&quot;hibernate.dialect&quot;&gt;com.abc.CustomPostgreSqlDialect&lt;/prop&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2929919,"reputation":11,"user_id":2510439,"display_name":"user2510439"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647015993,"creation_date":1647015993,"answer_id":71441625,"question_id":28192547,"body_markdown":"If you are calling EntityManager.createNativeQuery(), be sure to include the resulting java class in the second parameter:\r\n\r\n```\r\nreturn em.createNativeQuery(sql, MyRecord.class).getResultList()\r\n```\r\n\r\n\r\n","title":"No Dialect mapping for JDBC type: 1111","body":"<p>If you are calling EntityManager.createNativeQuery(), be sure to include the resulting java class in the second parameter:</p>\n<pre><code>return em.createNativeQuery(sql, MyRecord.class).getResultList()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":141852,"reputation":4322,"user_id":349169,"accept_rate":78,"display_name":"Chris"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651142903,"creation_date":1651142903,"answer_id":72042342,"question_id":28192547,"body_markdown":"After trying many proposed solutions, including:\r\n- https://stackoverflow.com/a/59754570/349169 which is one of the solutions proposed here\r\n- https://vladmihalcea.com/hibernate-no-dialect-mapping-for-jdbc-type/\r\n\r\nit was finally this one that fixed everything with the least amount of changes:\r\n\r\nhttps://gist.github.com/agrawald/adad25d28bf6c56a7e4618fe95ee5a39\r\n\r\nThe trick is to not have `@TypeDef` on your class, but instead have 2 different `@TypeDef` in 2 different `package-info.java` files. One inside your production code package for your production DB, and one inside your test package for your test H2 DB.","title":"No Dialect mapping for JDBC type: 1111","body":"<p>After trying many proposed solutions, including:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/a/59754570/349169\">https://stackoverflow.com/a/59754570/349169</a> which is one of the solutions proposed here</li>\n<li><a href=\"https://vladmihalcea.com/hibernate-no-dialect-mapping-for-jdbc-type/\" rel=\"nofollow noreferrer\">https://vladmihalcea.com/hibernate-no-dialect-mapping-for-jdbc-type/</a></li>\n</ul>\n<p>it was finally this one that fixed everything with the least amount of changes:</p>\n<p><a href=\"https://gist.github.com/agrawald/adad25d28bf6c56a7e4618fe95ee5a39\" rel=\"nofollow noreferrer\">https://gist.github.com/agrawald/adad25d28bf6c56a7e4618fe95ee5a39</a></p>\n<p>The trick is to not have <code>@TypeDef</code> on your class, but instead have 2 different <code>@TypeDef</code> in 2 different <code>package-info.java</code> files. One inside your production code package for your production DB, and one inside your test package for your test H2 DB.</p>\n"},{"tags":[],"owner":{"account_id":19394380,"reputation":235,"user_id":14182376,"display_name":"Vitaly Kolesnikov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682607329,"creation_date":1682607329,"answer_id":76121848,"question_id":28192547,"body_markdown":"I had the same issue and wasted like 1 hour before I noticed that I use JpaRepository of one entity (let&#39;s say Person) to retrive another entity (let&#39;s say Order). Hope this helps someone.","title":"No Dialect mapping for JDBC type: 1111","body":"<p>I had the same issue and wasted like 1 hour before I noticed that I use JpaRepository of one entity (let's say Person) to retrive another entity (let's say Order). Hope this helps someone.</p>\n"},{"tags":[],"owner":{"account_id":10451715,"reputation":745,"user_id":7705116,"display_name":"drt"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684268542,"creation_date":1684268542,"answer_id":76266807,"question_id":28192547,"body_markdown":"I had little different issue, I was facing this issue for pagination. When select query was pulling number of records (15) more than pageSize(10) then I was getting below error. - \r\n\r\n    Details: org.springframework.orm.jpa.JpaSystemException: No Dialect mapping for JDBC type: 1111; nested exception is org.hibernate.MappingException: No Dialect mapping for JDBC type: 1111\r\n \r\nBefore fixing I made sure - \r\n 1. My Dialect lib is latest\r\n 2. column data types are correct\r\n\r\nFix - added `registerHibernateType`\r\n\r\n    @Component\r\n    public class JSONBPostgreSQLDialect extends PostgreSQL95Dialect {\r\n    \r\n        public JSONBPostgreSQLDialect() {\r\n            super();\r\n            registerColumnType(Types.JAVA_OBJECT, JSONBUserType.JSONB_TYPE);\r\n            //This line fixed Dialect mapping errorx\r\n            registerHibernateType(Types.OTHER, String.class.getName());\r\n        }\r\n    }\r\n\r\n`JSONBUserType` is custom type created. \r\n\r\n    @Component\r\n    public class JSONBUserType implements UserType, ParameterizedType {\r\n    \r\n        private static final ClassLoaderService classLoaderService = new ClassLoaderServiceImpl();\r\n    \r\n        public static final String JSONB_TYPE = &quot;jsonb&quot;;\r\n        public static final String CLASS = &quot;CLASS&quot;;\r\n    \r\n        private Class jsonClassType;\r\n    \r\n        @Override\r\n        public Class&lt;Object&gt; returnedClass() {\r\n            return Object.class;\r\n        }\r\n    \r\n        @Override\r\n        public int[] sqlTypes() {\r\n            return new int[]{Types.JAVA_OBJECT};\r\n        }\r\n    \r\n        @Override\r\n        public Object nullSafeGet(ResultSet rs,\r\n                                  String[] names,\r\n                                  SharedSessionContractImplementor session,\r\n                                  Object owner)\r\n                throws HibernateException, SQLException {\r\n    \r\n            final String cellContent = rs.getString(names[0]);\r\n            if (cellContent == null) {\r\n                return null;\r\n            }\r\n            try {\r\n                final ObjectMapper mapper = new ObjectMapper();\r\n                return mapper.readValue(cellContent.getBytes(&quot;UTF-8&quot;), jsonClassType);\r\n            } catch (final Exception ex) {\r\n                throw new RuntimeException(&quot;Failed to convert String to Invoice: &quot; + ex.getMessage(), ex);\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public void nullSafeSet(PreparedStatement ps,\r\n                                Object value,\r\n                                int idx,\r\n                                SharedSessionContractImplementor session)\r\n                throws HibernateException, SQLException {\r\n            if (value == null) {\r\n                ps.setNull(idx,\r\n                           Types.OTHER);\r\n                return;\r\n            }\r\n            try {\r\n                final ObjectMapper mapper = new ObjectMapper();\r\n                final StringWriter w = new StringWriter();\r\n                mapper.writeValue(w,\r\n                                  value);\r\n                w.flush();\r\n                ps.setObject(idx,\r\n                             w.toString(),\r\n                             Types.OTHER);\r\n            } catch (final Exception ex) {\r\n                throw new RuntimeException(&quot;Failed to convert Invoice to String: &quot; + ex.getMessage(),\r\n                                           ex);\r\n            }\r\n    \r\n        }\r\n    \r\n        @Override\r\n        public void setParameterValues(Properties parameters) {\r\n            final String clazz = (String) parameters.get(CLASS);\r\n            if (null != clazz) {\r\n                jsonClassType = classLoaderService.classForName(clazz);\r\n            }\r\n        }\r\n    \r\n        @SuppressWarnings(&quot;unchecked&quot;)\r\n        @Override\r\n        public Object deepCopy(Object value) throws HibernateException {\r\n    \r\n            if (!(value instanceof Collection)) {\r\n                return value;\r\n            }\r\n    \r\n            Collection&lt;?&gt; collection = (Collection) value;\r\n            Collection collectionClone = CollectionFactory.newInstance(collection.getClass());\r\n    \r\n            collectionClone.addAll(collection.stream()\r\n                                             .map(this::deepCopy)\r\n                                             .collect(Collectors.toList()));\r\n    \r\n            return collectionClone;\r\n        }\r\n    \r\n        static final class CollectionFactory {\r\n            @SuppressWarnings(&quot;unchecked&quot;)\r\n            static &lt;E, T extends Collection&lt;E&gt;&gt; T newInstance(Class&lt;T&gt; collectionClass) {\r\n                if (List.class.isAssignableFrom(collectionClass)) {\r\n                    return (T) new ArrayList&lt;E&gt;();\r\n                } else if (Set.class.isAssignableFrom(collectionClass)) {\r\n                    return (T) new HashSet&lt;E&gt;();\r\n                } else {\r\n                    throw new IllegalArgumentException(&quot;Unsupported collection type : &quot; + collectionClass);\r\n                }\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public boolean isMutable() {\r\n            return true;\r\n        }\r\n    \r\n        @Override\r\n        public boolean equals(Object x,\r\n                              Object y) throws HibernateException {\r\n            if (x == y) {\r\n                return true;\r\n            }\r\n    \r\n            if ((x == null) || (y == null)) {\r\n                return false;\r\n            }\r\n    \r\n            return x.equals(y);\r\n        }\r\n    \r\n        @Override\r\n        public int hashCode(Object x) throws HibernateException {\r\n            assert (x != null);\r\n            return x.hashCode();\r\n        }\r\n    \r\n        @Override\r\n        public Object assemble(Serializable cached,\r\n                               Object owner) throws HibernateException {\r\n            return deepCopy(cached);\r\n        }\r\n    \r\n        @Override\r\n        public Serializable disassemble(Object value) throws HibernateException {\r\n            Object deepCopy = deepCopy(value);\r\n    \r\n            if (!(deepCopy instanceof Serializable)) {\r\n                throw new SerializationException(String.format(&quot;%s is not serializable class&quot;,\r\n                                                               value),\r\n                                                 null);\r\n            }\r\n    \r\n            return (Serializable) deepCopy;\r\n        }\r\n    \r\n        @Override\r\n        public Object replace(Object original,\r\n                              Object target,\r\n                              Object owner) throws HibernateException {\r\n            return deepCopy(original);\r\n        }\r\n    }\r\n\r\nAnd it is used in entity like this\r\n\r\n    @TypeDef(name = &quot;addressValType&quot;, typeClass = JSONBUserType.class, parameters = {@Parameter(name = JSONBUserType.CLASS, value = &quot;com.address.response.AddressResponse&quot;)})\r\n    @Table(name = &quot;addressValidation&quot;)\r\n    public class Address implements Serializable {\r\n        private static final long serialVersionUID = -2370572023911224797L;\r\n        @Id\r\n        @Column(name = &quot;employeeNumber&quot;)\r\n        private Integer employeeNumber;\r\n    \r\n        @Column(name = &quot;inputAddress&quot;, columnDefinition = &quot;jsonb&quot;)\r\n        @Type(type = &quot;addressValType&quot;)\r\n        private SapPostalAddressResponse inputAddress;\r\n      }\r\n\r\n","title":"No Dialect mapping for JDBC type: 1111","body":"<p>I had little different issue, I was facing this issue for pagination. When select query was pulling number of records (15) more than pageSize(10) then I was getting below error. -</p>\n<pre><code>Details: org.springframework.orm.jpa.JpaSystemException: No Dialect mapping for JDBC type: 1111; nested exception is org.hibernate.MappingException: No Dialect mapping for JDBC type: 1111\n</code></pre>\n<p>Before fixing I made sure -</p>\n<ol>\n<li>My Dialect lib is latest</li>\n<li>column data types are correct</li>\n</ol>\n<p>Fix - added <code>registerHibernateType</code></p>\n<pre><code>@Component\npublic class JSONBPostgreSQLDialect extends PostgreSQL95Dialect {\n\n    public JSONBPostgreSQLDialect() {\n        super();\n        registerColumnType(Types.JAVA_OBJECT, JSONBUserType.JSONB_TYPE);\n        //This line fixed Dialect mapping errorx\n        registerHibernateType(Types.OTHER, String.class.getName());\n    }\n}\n</code></pre>\n<p><code>JSONBUserType</code> is custom type created.</p>\n<pre><code>@Component\npublic class JSONBUserType implements UserType, ParameterizedType {\n\n    private static final ClassLoaderService classLoaderService = new ClassLoaderServiceImpl();\n\n    public static final String JSONB_TYPE = &quot;jsonb&quot;;\n    public static final String CLASS = &quot;CLASS&quot;;\n\n    private Class jsonClassType;\n\n    @Override\n    public Class&lt;Object&gt; returnedClass() {\n        return Object.class;\n    }\n\n    @Override\n    public int[] sqlTypes() {\n        return new int[]{Types.JAVA_OBJECT};\n    }\n\n    @Override\n    public Object nullSafeGet(ResultSet rs,\n                              String[] names,\n                              SharedSessionContractImplementor session,\n                              Object owner)\n            throws HibernateException, SQLException {\n\n        final String cellContent = rs.getString(names[0]);\n        if (cellContent == null) {\n            return null;\n        }\n        try {\n            final ObjectMapper mapper = new ObjectMapper();\n            return mapper.readValue(cellContent.getBytes(&quot;UTF-8&quot;), jsonClassType);\n        } catch (final Exception ex) {\n            throw new RuntimeException(&quot;Failed to convert String to Invoice: &quot; + ex.getMessage(), ex);\n        }\n    }\n\n    @Override\n    public void nullSafeSet(PreparedStatement ps,\n                            Object value,\n                            int idx,\n                            SharedSessionContractImplementor session)\n            throws HibernateException, SQLException {\n        if (value == null) {\n            ps.setNull(idx,\n                       Types.OTHER);\n            return;\n        }\n        try {\n            final ObjectMapper mapper = new ObjectMapper();\n            final StringWriter w = new StringWriter();\n            mapper.writeValue(w,\n                              value);\n            w.flush();\n            ps.setObject(idx,\n                         w.toString(),\n                         Types.OTHER);\n        } catch (final Exception ex) {\n            throw new RuntimeException(&quot;Failed to convert Invoice to String: &quot; + ex.getMessage(),\n                                       ex);\n        }\n\n    }\n\n    @Override\n    public void setParameterValues(Properties parameters) {\n        final String clazz = (String) parameters.get(CLASS);\n        if (null != clazz) {\n            jsonClassType = classLoaderService.classForName(clazz);\n        }\n    }\n\n    @SuppressWarnings(&quot;unchecked&quot;)\n    @Override\n    public Object deepCopy(Object value) throws HibernateException {\n\n        if (!(value instanceof Collection)) {\n            return value;\n        }\n\n        Collection&lt;?&gt; collection = (Collection) value;\n        Collection collectionClone = CollectionFactory.newInstance(collection.getClass());\n\n        collectionClone.addAll(collection.stream()\n                                         .map(this::deepCopy)\n                                         .collect(Collectors.toList()));\n\n        return collectionClone;\n    }\n\n    static final class CollectionFactory {\n        @SuppressWarnings(&quot;unchecked&quot;)\n        static &lt;E, T extends Collection&lt;E&gt;&gt; T newInstance(Class&lt;T&gt; collectionClass) {\n            if (List.class.isAssignableFrom(collectionClass)) {\n                return (T) new ArrayList&lt;E&gt;();\n            } else if (Set.class.isAssignableFrom(collectionClass)) {\n                return (T) new HashSet&lt;E&gt;();\n            } else {\n                throw new IllegalArgumentException(&quot;Unsupported collection type : &quot; + collectionClass);\n            }\n        }\n    }\n\n    @Override\n    public boolean isMutable() {\n        return true;\n    }\n\n    @Override\n    public boolean equals(Object x,\n                          Object y) throws HibernateException {\n        if (x == y) {\n            return true;\n        }\n\n        if ((x == null) || (y == null)) {\n            return false;\n        }\n\n        return x.equals(y);\n    }\n\n    @Override\n    public int hashCode(Object x) throws HibernateException {\n        assert (x != null);\n        return x.hashCode();\n    }\n\n    @Override\n    public Object assemble(Serializable cached,\n                           Object owner) throws HibernateException {\n        return deepCopy(cached);\n    }\n\n    @Override\n    public Serializable disassemble(Object value) throws HibernateException {\n        Object deepCopy = deepCopy(value);\n\n        if (!(deepCopy instanceof Serializable)) {\n            throw new SerializationException(String.format(&quot;%s is not serializable class&quot;,\n                                                           value),\n                                             null);\n        }\n\n        return (Serializable) deepCopy;\n    }\n\n    @Override\n    public Object replace(Object original,\n                          Object target,\n                          Object owner) throws HibernateException {\n        return deepCopy(original);\n    }\n}\n</code></pre>\n<p>And it is used in entity like this</p>\n<pre><code>@TypeDef(name = &quot;addressValType&quot;, typeClass = JSONBUserType.class, parameters = {@Parameter(name = JSONBUserType.CLASS, value = &quot;com.address.response.AddressResponse&quot;)})\n@Table(name = &quot;addressValidation&quot;)\npublic class Address implements Serializable {\n    private static final long serialVersionUID = -2370572023911224797L;\n    @Id\n    @Column(name = &quot;employeeNumber&quot;)\n    private Integer employeeNumber;\n\n    @Column(name = &quot;inputAddress&quot;, columnDefinition = &quot;jsonb&quot;)\n    @Type(type = &quot;addressValType&quot;)\n    private SapPostalAddressResponse inputAddress;\n  }\n</code></pre>\n"}],"owner":{"account_id":1924775,"reputation":1501,"user_id":1735497,"accept_rate":70,"display_name":"SakeSushiBig"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":152244,"favorite_count":0,"down_vote_count":0,"up_vote_count":63,"accepted_answer_id":28193142,"answer_count":21,"score":63,"last_activity_date":1689174123,"creation_date":1422448926,"question_id":28192547,"body_markdown":"I&#39;m working on a Spring JPA Application, using MySQL as database. I ensured that all spring-jpa libraries, hibernate and mysql-connector-java is loaded.\r\n\r\nI&#39;m running a mysql 5 instance. Here is a excerpt of my application.properties file:\r\n\r\n    spring.jpa.show-sql=false\r\n    spring.jpa.hibernate.ddl-auto=create-drop\r\n    spring.jpa.database-platform=org.hibernate.dialect.MySQL5Dialect\r\n    \r\n    spring.datasource.url=jdbc:mysql://localhost/mydatabase\r\n    spring.datasource.username=myuser\r\n    spring.datasource.password=SUPERSECRET\r\n    spring.datasource.driverClassName=com.mysql.jdbc.Driver\r\n\r\nWhen executing an integration test, spring startsup properly but fails on creating the hibernate SessionFactory, with the exception:\r\n\r\n    org.hibernate.MappingException: No Dialect mapping for JDBC type: 1111\r\n\r\nI think my dialects should be Mysql5Dialect, I also tried the one explicitly stating InnoDB, and the two dialect options which don&#39;t indicate the version 5. But I always end up with the same &#39;No Dialect mapping for JDBC type: 1111&#39; message.\r\nMy application.properties file resides in the test/resources source folder. It is recognized by the JUnit Test runner (I previously got an exception because of an typo in it).\r\n\r\nAre the properties I&#39;m setting wrong? I couldn&#39;t find some official documentation on these property names but found a hint in this stackoverflow answer: https://stackoverflow.com/a/25941616/1735497\r\n\r\nLooking forward for your answers, thanks!\r\n\r\nBTW The application is already using spring boot.","title":"No Dialect mapping for JDBC type: 1111","body":"<p>I'm working on a Spring JPA Application, using MySQL as database. I ensured that all spring-jpa libraries, hibernate and mysql-connector-java is loaded.</p>\n\n<p>I'm running a mysql 5 instance. Here is a excerpt of my application.properties file:</p>\n\n<pre><code>spring.jpa.show-sql=false\nspring.jpa.hibernate.ddl-auto=create-drop\nspring.jpa.database-platform=org.hibernate.dialect.MySQL5Dialect\n\nspring.datasource.url=jdbc:mysql://localhost/mydatabase\nspring.datasource.username=myuser\nspring.datasource.password=SUPERSECRET\nspring.datasource.driverClassName=com.mysql.jdbc.Driver\n</code></pre>\n\n<p>When executing an integration test, spring startsup properly but fails on creating the hibernate SessionFactory, with the exception:</p>\n\n<pre><code>org.hibernate.MappingException: No Dialect mapping for JDBC type: 1111\n</code></pre>\n\n<p>I think my dialects should be Mysql5Dialect, I also tried the one explicitly stating InnoDB, and the two dialect options which don't indicate the version 5. But I always end up with the same 'No Dialect mapping for JDBC type: 1111' message.\nMy application.properties file resides in the test/resources source folder. It is recognized by the JUnit Test runner (I previously got an exception because of an typo in it).</p>\n\n<p>Are the properties I'm setting wrong? I couldn't find some official documentation on these property names but found a hint in this stackoverflow answer: <a href=\"https://stackoverflow.com/a/25941616/1735497\">https://stackoverflow.com/a/25941616/1735497</a></p>\n\n<p>Looking forward for your answers, thanks!</p>\n\n<p>BTW The application is already using spring boot.</p>\n"},{"tags":["java","scala"],"comments":[{"owner":{"account_id":8909811,"reputation":2612,"user_id":6650475,"display_name":"Andrew S"},"score":1,"creation_date":1501602893,"post_id":45442236,"comment_id":77845875,"body_markdown":"How would other classes be able to use an instance of a dynamically created class?","body":"How would other classes be able to use an instance of a dynamically created class?"},{"owner":{"account_id":8370572,"reputation":1860,"user_id":6285832,"accept_rate":60,"display_name":"Omegaspard"},"score":0,"creation_date":1501661203,"post_id":45442236,"comment_id":77870552,"body_markdown":"I don&#39;t know much about the subject so I can&#39;t answer.","body":"I don&#39;t know much about the subject so I can&#39;t answer."}],"owner":{"account_id":8370572,"reputation":1860,"user_id":6285832,"accept_rate":60,"display_name":"Omegaspard"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689174111,"creation_date":1501602234,"question_id":45442236,"body_markdown":"I have a map containing the fields of a case class I would to create.\r\nI don&#39;t want to only instantiate the class, I want to create it from scratch and use it at run time.\r\nThe class I want to create will only contains fields (no methods).\r\n\r\nOne of my first was to interpret code at runtime that would return this new class from string interpretation.\r\nWe can do something like this with toolBox:\r\n\r\n    import scala.reflect.runtime._\r\n    import scala.tools.reflect.ToolBox\r\n     val cm = universe.runtimeMirror(getClass.getClassLoader)\r\n      val tb = cm.mkToolBox()\r\n      val myClass = tb.eval(tb.parse(&quot;class C(val a:Int, val b:Int); scala.reflect.classTag[C].runtimeClass&quot;))\r\n\r\nI found the code [here][1].\r\nBut I don&#39;t know what to do after.\r\nI have the myClass object which seems to be a java.lang.Class.\r\nSince the code line:\r\n\r\n    println(myClass.getClass.getName) \r\n\r\nreturns:\r\n\r\n    java.lang.Class\r\n\r\n\r\nWhat should I do after?  \r\nWould I manage to do what I want with this?  \r\nIf no what are the others possibility.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/12122939/generating-a-class-from-string-and-instantiating-it-in-scala-2-10/12123609#12123609","title":"Creation of a case class at runtime from a map","body":"<p>I have a map containing the fields of a case class I would to create.\nI don't want to only instantiate the class, I want to create it from scratch and use it at run time.\nThe class I want to create will only contains fields (no methods).</p>\n<p>One of my first was to interpret code at runtime that would return this new class from string interpretation.\nWe can do something like this with toolBox:</p>\n<pre><code>import scala.reflect.runtime._\nimport scala.tools.reflect.ToolBox\n val cm = universe.runtimeMirror(getClass.getClassLoader)\n  val tb = cm.mkToolBox()\n  val myClass = tb.eval(tb.parse(&quot;class C(val a:Int, val b:Int); scala.reflect.classTag[C].runtimeClass&quot;))\n</code></pre>\n<p>I found the code <a href=\"https://stackoverflow.com/questions/12122939/generating-a-class-from-string-and-instantiating-it-in-scala-2-10/12123609#12123609\">here</a>.\nBut I don't know what to do after.\nI have the myClass object which seems to be a java.lang.Class.\nSince the code line:</p>\n<pre><code>println(myClass.getClass.getName) \n</code></pre>\n<p>returns:</p>\n<pre><code>java.lang.Class\n</code></pre>\n<p>What should I do after?<br />\nWould I manage to do what I want with this?<br />\nIf no what are the others possibility.</p>\n"},{"tags":["java","war"],"comments":[{"owner":{"account_id":551394,"reputation":8315,"user_id":916225,"accept_rate":69,"display_name":"seenukarthi"},"score":0,"creation_date":1689146896,"post_id":76668064,"comment_id":135170210,"body_markdown":"Try some decompilers like http://java-decompiler.github.io/","body":"Try some decompilers like <a href=\"http://java-decompiler.github.io/\" rel=\"nofollow noreferrer\">java-decompiler.github.io</a>"},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":1,"creation_date":1689147105,"post_id":76668064,"comment_id":135170261,"body_markdown":"a war file (and jar4 files) are zip files.  If you rename the extension, you can open windows explorer.  But whether there is source code in that file or not is a different matter.","body":"a war file (and jar4 files) are zip files.  If you rename the extension, you can open windows explorer.  But whether there is source code in that file or not is a different matter."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":4,"creation_date":1689147368,"post_id":76668064,"comment_id":135170304,"body_markdown":"I would be very surprised to find *actual* source code inside a WAR file.","body":"I would be very surprised to find <i>actual</i> source code inside a WAR file."},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1689147747,"post_id":76668064,"comment_id":135170371,"body_markdown":"WAR files usually contain compiled Java classes, i.e. files with the `.class` extension, and those files contain [bytecode](https://en.wikipedia.org/wiki/Java_bytecode) and not source code. You can extract the `.class` files - one way is to use the [jar](https://docs.oracle.com/en/java/javase/20/docs/specs/man/jar.html) command - and then [decompile](https://www.javacodegeeks.com/2021/11/13-best-java-decompilers-for-download-and-online-use-for-java-developers.html) them.","body":"WAR files usually contain compiled Java classes, i.e. files with the <code>.class</code> extension, and those files contain <a href=\"https://en.wikipedia.org/wiki/Java_bytecode\" rel=\"nofollow noreferrer\">bytecode</a> and not source code. You can extract the <code>.class</code> files - one way is to use the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/specs/man/jar.html\" rel=\"nofollow noreferrer\">jar</a> command - and then <a href=\"https://www.javacodegeeks.com/2021/11/13-best-java-decompilers-for-download-and-online-use-for-java-developers.html\" rel=\"nofollow noreferrer\">decompile</a> them."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1689155896,"post_id":76668064,"comment_id":135172269,"body_markdown":"There shouldn&#39;t be any Java source code *in* the WAR file if it has been competently constructed.","body":"There shouldn&#39;t be any Java source code <i>in</i> the WAR file if it has been competently constructed."}],"answers":[{"tags":[],"owner":{"account_id":14794402,"reputation":1,"user_id":10684385,"display_name":"Soheil Babadi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689173887,"creation_date":1689173887,"answer_id":76671951,"question_id":76668064,"body_markdown":"Just Rename the .war file extension to .zip. This allow you to treat the WAR file as a regular ZIP archive.\r\nUse a file extraction tool or utility such as winrar to extract the contents of the renamed WAR file.\r\nOnce extracted, navigate to WEB-INF/src or src directory and look for files with the .java extension\r\n\r\nenjoy!","title":"Extracting java source code from WAR files","body":"<p>Just Rename the .war file extension to .zip. This allow you to treat the WAR file as a regular ZIP archive.\nUse a file extraction tool or utility such as winrar to extract the contents of the renamed WAR file.\nOnce extracted, navigate to WEB-INF/src or src directory and look for files with the .java extension</p>\n<p>enjoy!</p>\n"}],"owner":{"account_id":22270474,"reputation":1,"user_id":22213881,"display_name":"Dadmin"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":147,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1689173887,"creation_date":1689146755,"question_id":76668064,"body_markdown":"Is there a way to extract java source code from WAR files?\r\n\r\nI have tried using different mechanisms to extract the source code, but it yielded no desired results. I used command prompt it seems there was some extraction but upon examination of the extracted files nothing of interest was there. ","title":"Extracting java source code from WAR files","body":"<p>Is there a way to extract java source code from WAR files?</p>\n<p>I have tried using different mechanisms to extract the source code, but it yielded no desired results. I used command prompt it seems there was some extraction but upon examination of the extracted files nothing of interest was there.</p>\n"},{"tags":["java","spring","hibernate"],"owner":{"account_id":4728451,"reputation":451,"user_id":3824715,"accept_rate":62,"display_name":"ch1ll"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":115,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689173388,"creation_date":1679992651,"question_id":75864015,"body_markdown":"I have a class which holds a `List&lt;User&gt;`, like this:\r\n\r\n\r\n```\r\n\r\n@Entity\r\n@Audited\r\npublic class Instruction {\r\n\r\n\r\n...\r\n\r\n    @NotAudited\r\n    @ManyToMany(fetch = FetchType.LAZY, cascade = CascadeType.DETACH)\r\n    @JoinTable(\r\n            name = &quot;inspection_attended_joinTable&quot;,\r\n            joinColumns = {@JoinColumn(name = &quot;inspection_id&quot;, referencedColumnName = &quot;id&quot;)},\r\n            inverseJoinColumns = {@JoinColumn(name = &quot;user_id&quot;, referencedColumnName = &quot;id&quot;)}\r\n    )\r\n    private List&lt;User&gt; attendedUsers;\r\n\r\n...\r\n\r\n}\r\n\r\n\r\n\r\n```\r\n\r\n\r\nNow I try to alter the attendedUsers like this:  \r\n\r\n```\r\n// attendeduserDtos = List&lt;User&gt; with less users than instruction.attendedUsers\r\n\r\nList&lt;User&gt; entities = instruction.getAttendedUsers();\r\n\r\nList&lt;User&gt; removeEntities = entities.stream().filter(entity -&gt; entity != null &amp;&amp; !existsDtoWithId(entity.getId(), attendedUserDtos)).collect(Collectors.toList());\r\n            removeEntities.forEach(entity -&gt; {\r\n                removeParentOfEntity(entity);\r\n                entities.remove(entity);\r\n            });\r\n```\r\n\r\nSo this calls entities.remove(entity) which should remove the entity. But the entity object is still a `HibernateProxy` at this time. so `org.hibernate.collection.internal.PersistentBag.remove(Object o)` is called instead of the actual `List` implementation.  \r\n\r\n```\r\n\t@Override\r\n\tpublic boolean remove(Object o) {\r\n\t\tinitialize( true );\r\n\t\tif ( bag.remove( o ) ) { // returns false, o is still a HibernateProxy\r\n\t\t\telementRemoved = true;\r\n\t\t\tdirty();\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n```\r\n\r\nSo the element stays in the original entity and does not get deleted. \r\n\r\n\r\nNow the weird thing is, in this List of users, most are loaded into to current context, but one is not. And deleting this user fails. Deleting other users which are loaded works.\r\n\r\nAny idea why one user could still be a HibernateProxy while others are not? Is the debugger trustworthy at this point? \r\n\r\nEverything works if I call `Hibernate.unproxy()` on the object before. `@Transactional` on the service method that handles all this does not change anything.","title":"Hibernate is loading a Collection with only some Proxy objects","body":"<p>I have a class which holds a <code>List&lt;User&gt;</code>, like this:</p>\n<pre><code>\n@Entity\n@Audited\npublic class Instruction {\n\n\n...\n\n    @NotAudited\n    @ManyToMany(fetch = FetchType.LAZY, cascade = CascadeType.DETACH)\n    @JoinTable(\n            name = &quot;inspection_attended_joinTable&quot;,\n            joinColumns = {@JoinColumn(name = &quot;inspection_id&quot;, referencedColumnName = &quot;id&quot;)},\n            inverseJoinColumns = {@JoinColumn(name = &quot;user_id&quot;, referencedColumnName = &quot;id&quot;)}\n    )\n    private List&lt;User&gt; attendedUsers;\n\n...\n\n}\n\n\n\n</code></pre>\n<p>Now I try to alter the attendedUsers like this:</p>\n<pre><code>// attendeduserDtos = List&lt;User&gt; with less users than instruction.attendedUsers\n\nList&lt;User&gt; entities = instruction.getAttendedUsers();\n\nList&lt;User&gt; removeEntities = entities.stream().filter(entity -&gt; entity != null &amp;&amp; !existsDtoWithId(entity.getId(), attendedUserDtos)).collect(Collectors.toList());\n            removeEntities.forEach(entity -&gt; {\n                removeParentOfEntity(entity);\n                entities.remove(entity);\n            });\n</code></pre>\n<p>So this calls entities.remove(entity) which should remove the entity. But the entity object is still a <code>HibernateProxy</code> at this time. so <code>org.hibernate.collection.internal.PersistentBag.remove(Object o)</code> is called instead of the actual <code>List</code> implementation.</p>\n<pre><code>    @Override\n    public boolean remove(Object o) {\n        initialize( true );\n        if ( bag.remove( o ) ) { // returns false, o is still a HibernateProxy\n            elementRemoved = true;\n            dirty();\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n</code></pre>\n<p>So the element stays in the original entity and does not get deleted.</p>\n<p>Now the weird thing is, in this List of users, most are loaded into to current context, but one is not. And deleting this user fails. Deleting other users which are loaded works.</p>\n<p>Any idea why one user could still be a HibernateProxy while others are not? Is the debugger trustworthy at this point?</p>\n<p>Everything works if I call <code>Hibernate.unproxy()</code> on the object before. <code>@Transactional</code> on the service method that handles all this does not change anything.</p>\n"},{"tags":["java","spring","mongodb"],"owner":{"account_id":17020027,"reputation":11,"user_id":22216327,"display_name":"Cezar Marcu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1689173374,"creation_date":1689172331,"question_id":76671712,"body_markdown":"I&#39;m trying to count the occurrences of every value of a field of every document of a mongoDB collection.For this task I use the Java Spring Framework.\r\n In order to do so I create a function in a service class that gets as arguments the name of collection and the field I want to count it&#39;s values, the function returns a Map where the key is an Object type and the value is a Long type. The problem is when I try to print the Map into the console I get an empty map. If you have any ideea how I can solve this problem I would appreciete.\r\n\r\nHere is the source code of the function:\r\n\r\n     \r\n```\r\npublic class ComicService {\r\n\r\n    @Autowired\r\n    private MongoTemplate mongoTemplate;\r\n\r\n\r\n    public Map&lt;Object, Long&gt; countFieldValuesOccurrences(String collectionName, String fieldName) {\r\n\r\n        GroupOperation groupOperation = Aggregation.group(fieldName).count().as(&quot;count&quot;);\r\n        Aggregation aggregation = Aggregation.newAggregation(groupOperation);\r\n        AggregationResults&lt;FieldValueCount&gt; result = mongoTemplate.aggregate(aggregation, collectionName, FieldValueCount.class);\r\n\r\n        List&lt;FieldValueCount&gt; fieldValueCounts = result.getMappedResults();\r\n\r\n        Map&lt;Object, Long&gt; fieldValueOccurrences = new HashMap&lt;&gt;();\r\n        for (FieldValueCount fieldValueCount : fieldValueCounts) {\r\n            fieldValueOccurrences.put(fieldValueCount.getFieldValue(), fieldValueCount.getCount());\r\n        }\r\n        System.out.println(fieldValueCounts);\r\n        return fieldValueOccurrences;\r\n    }\r\n\r\n}\r\n\r\n```\r\nThe source code of the FieldValueCount class:\r\n```\r\npublic class FieldValueCount {\r\n    private Object fieldValue;\r\n    private long count;\r\n\r\n    public Object getFieldValue() {\r\n        return fieldValue;\r\n    }\r\n\r\n    public long getCount() {\r\n        return count;\r\n    }\r\n}\r\n```\r\n\r\n\r\nI tried to complete the task using agregate.\r\nThe result I expect should look like this:\r\n\r\n```\r\n{\r\n  Available : 1,\r\n  Out of stoc :3,\r\n}\r\n```\r\n\r\ninstead I got this: \r\n\r\n```\r\n{}\r\n```","title":"MongoDB aggregation returns an empty result","body":"<p>I'm trying to count the occurrences of every value of a field of every document of a mongoDB collection.For this task I use the Java Spring Framework.\nIn order to do so I create a function in a service class that gets as arguments the name of collection and the field I want to count it's values, the function returns a Map where the key is an Object type and the value is a Long type. The problem is when I try to print the Map into the console I get an empty map. If you have any ideea how I can solve this problem I would appreciete.</p>\n<p>Here is the source code of the function:</p>\n<pre><code>public class ComicService {\n\n    @Autowired\n    private MongoTemplate mongoTemplate;\n\n\n    public Map&lt;Object, Long&gt; countFieldValuesOccurrences(String collectionName, String fieldName) {\n\n        GroupOperation groupOperation = Aggregation.group(fieldName).count().as(&quot;count&quot;);\n        Aggregation aggregation = Aggregation.newAggregation(groupOperation);\n        AggregationResults&lt;FieldValueCount&gt; result = mongoTemplate.aggregate(aggregation, collectionName, FieldValueCount.class);\n\n        List&lt;FieldValueCount&gt; fieldValueCounts = result.getMappedResults();\n\n        Map&lt;Object, Long&gt; fieldValueOccurrences = new HashMap&lt;&gt;();\n        for (FieldValueCount fieldValueCount : fieldValueCounts) {\n            fieldValueOccurrences.put(fieldValueCount.getFieldValue(), fieldValueCount.getCount());\n        }\n        System.out.println(fieldValueCounts);\n        return fieldValueOccurrences;\n    }\n\n}\n\n</code></pre>\n<p>The source code of the FieldValueCount class:</p>\n<pre><code>public class FieldValueCount {\n    private Object fieldValue;\n    private long count;\n\n    public Object getFieldValue() {\n        return fieldValue;\n    }\n\n    public long getCount() {\n        return count;\n    }\n}\n</code></pre>\n<p>I tried to complete the task using agregate.\nThe result I expect should look like this:</p>\n<pre><code>{\n  Available : 1,\n  Out of stoc :3,\n}\n</code></pre>\n<p>instead I got this:</p>\n<pre><code>{}\n</code></pre>\n"},{"tags":["java","android","kotlin"],"answers":[{"tags":[],"owner":{"account_id":216120,"reputation":49213,"user_id":471160,"accept_rate":90,"display_name":"marcinj"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689169859,"creation_date":1689169859,"answer_id":76671325,"question_id":76671119,"body_markdown":"If you want to learn more about how your exception happens, then I suggest you add some firebase logging. The most usefull will be about the lifecycle states of your activity, and whether the dialog was shown or not. This will give you additional information on where the problem is. For example, maybe you are showing a dialog from the background - this is forbidden.\r\n\r\nIf you are showing your dialog from the background thread, then depending on how its done, it can cause various problems. Consider redesigning this part, ie. you may use Intent to send information to your activity that a dialog should be shown. Then if the activity is shown it will show this dialog in its own context, if its hidden then it will show and again - display safely your dialog.\r\n\r\nI&#39;am not sure if:\r\n\r\n    if(!YourActivityName.this.isFinishing())  { //show dialog } \r\n\r\nwould help in all scenerios, what if your activity is in background  and you are showing your dialog?\r\n\r\n\r\n","title":"Android - Unable to add window -- token android.os.BinderProxy is not valid; is your activity running? android.view.WindowManager$BadTokenException","body":"<p>If you want to learn more about how your exception happens, then I suggest you add some firebase logging. The most usefull will be about the lifecycle states of your activity, and whether the dialog was shown or not. This will give you additional information on where the problem is. For example, maybe you are showing a dialog from the background - this is forbidden.</p>\n<p>If you are showing your dialog from the background thread, then depending on how its done, it can cause various problems. Consider redesigning this part, ie. you may use Intent to send information to your activity that a dialog should be shown. Then if the activity is shown it will show this dialog in its own context, if its hidden then it will show and again - display safely your dialog.</p>\n<p>I'am not sure if:</p>\n<pre><code>if(!YourActivityName.this.isFinishing())  { //show dialog } \n</code></pre>\n<p>would help in all scenerios, what if your activity is in background  and you are showing your dialog?</p>\n"}],"owner":{"account_id":29002776,"reputation":11,"user_id":22216025,"display_name":"Karthiga Ganesan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":471,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689173076,"creation_date":1689168493,"question_id":76671119,"body_markdown":"I&#39;ve gone through lot of posts about this issue before I post my own question , and Im still not able to find any solution to it , in fact I don&#39;t even know where the problem is !\r\n\r\nI keep getting this crash everyday on my crashlytics dashboard ( only for few users ) . Unfortunately its only giving me the crash infos but not showing which line or class is causing it , and other thing is that 100% of devices affected are using Android 13 &amp; most of them are samsung devices.\r\n\r\nI understand that this is most likely happening because Im trying to show a dialog after execution of a background thread, while the Activity is being destroyed , so I checked all my code and I&#39;ve added to each dialog the condition below.\r\n\r\n`if(!YourActivityName.this.isFinishing()) \r\n{\r\n    //show dialog\r\n}`\r\n\r\nKindly help me to reproduce this exception.\r\n\r\nMy firebase log \r\n\r\n    android.view.ViewRootImpl.setView (ViewRootImpl.java:1764)\r\n    android.view.WindowManagerGlobal.addView (WindowManagerGlobal.java:567)\r\n    android.view.WindowManagerImpl.addView (WindowManagerImpl.java:148)\r\n    android.app.Dialog.show (Dialog.java:521)\r\n    com.TruckLogics.Utility.TransparentProgressDialog.show (TransparentProgressDialog.java:55)\r\n    com.TruckLogics.CommonController.DashBoardActivity.showProgress (DashBoardActivity.java:4541)\r\n    com.TruckLogics.CommonController.DashBoardActivity.isSupportTicketRaised (DashBoardActivity.java:4317)\r\n    com.TruckLogics.CommonController.DashBoardActivity.access$6700 (DashBoardActivity.java:224)\r\n    com.TruckLogics.CommonController.DashBoardActivity$50.onResultSuccess (DashBoardActivity.java:4401)\r\n    com.TruckLogics.ServiceClass.SiteDownUpChecking$1.onResponse (SiteDownUpChecking.java:51)\r\n    retrofit2.DefaultCallAdapterFactory$ExecutorCallbackCall$1.lambda$onResponse$0$retrofit2-DefaultCallAdapterFactory$ExecutorCallbackCall$1 (DefaultCallAdapterFactory.java:89)\r\n    retrofit2.DefaultCallAdapterFactory$ExecutorCallbackCall$1$$ExternalSyntheticLambda0.run (Unknown Source:6)\r\n    android.os.Handler.handleCallback (Handler.java:942)\r\n    android.os.Handler.dispatchMessage (Handler.java:99)\r\n    android.os.Looper.loopOnce (Looper.java:226)\r\n    android.os.Looper.loop (Looper.java:313)\r\n    android.app.ActivityThread.main (ActivityThread.java:8757)\r\n    java.lang.reflect.Method.invoke (Method.java)\r\n    com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run (RuntimeInit.java:571)\r\n    com.android.internal.os.ZygoteInit.main (ZygoteInit.java:1067)","title":"Android - Unable to add window -- token android.os.BinderProxy is not valid; is your activity running? android.view.WindowManager$BadTokenException","body":"<p>I've gone through lot of posts about this issue before I post my own question , and Im still not able to find any solution to it , in fact I don't even know where the problem is !</p>\n<p>I keep getting this crash everyday on my crashlytics dashboard ( only for few users ) . Unfortunately its only giving me the crash infos but not showing which line or class is causing it , and other thing is that 100% of devices affected are using Android 13 &amp; most of them are samsung devices.</p>\n<p>I understand that this is most likely happening because Im trying to show a dialog after execution of a background thread, while the Activity is being destroyed , so I checked all my code and I've added to each dialog the condition below.</p>\n<p><code>if(!YourActivityName.this.isFinishing())  { //show dialog }</code></p>\n<p>Kindly help me to reproduce this exception.</p>\n<p>My firebase log</p>\n<pre><code>android.view.ViewRootImpl.setView (ViewRootImpl.java:1764)\nandroid.view.WindowManagerGlobal.addView (WindowManagerGlobal.java:567)\nandroid.view.WindowManagerImpl.addView (WindowManagerImpl.java:148)\nandroid.app.Dialog.show (Dialog.java:521)\ncom.TruckLogics.Utility.TransparentProgressDialog.show (TransparentProgressDialog.java:55)\ncom.TruckLogics.CommonController.DashBoardActivity.showProgress (DashBoardActivity.java:4541)\ncom.TruckLogics.CommonController.DashBoardActivity.isSupportTicketRaised (DashBoardActivity.java:4317)\ncom.TruckLogics.CommonController.DashBoardActivity.access$6700 (DashBoardActivity.java:224)\ncom.TruckLogics.CommonController.DashBoardActivity$50.onResultSuccess (DashBoardActivity.java:4401)\ncom.TruckLogics.ServiceClass.SiteDownUpChecking$1.onResponse (SiteDownUpChecking.java:51)\nretrofit2.DefaultCallAdapterFactory$ExecutorCallbackCall$1.lambda$onResponse$0$retrofit2-DefaultCallAdapterFactory$ExecutorCallbackCall$1 (DefaultCallAdapterFactory.java:89)\nretrofit2.DefaultCallAdapterFactory$ExecutorCallbackCall$1$$ExternalSyntheticLambda0.run (Unknown Source:6)\nandroid.os.Handler.handleCallback (Handler.java:942)\nandroid.os.Handler.dispatchMessage (Handler.java:99)\nandroid.os.Looper.loopOnce (Looper.java:226)\nandroid.os.Looper.loop (Looper.java:313)\nandroid.app.ActivityThread.main (ActivityThread.java:8757)\njava.lang.reflect.Method.invoke (Method.java)\ncom.android.internal.os.RuntimeInit$MethodAndArgsCaller.run (RuntimeInit.java:571)\ncom.android.internal.os.ZygoteInit.main (ZygoteInit.java:1067)\n</code></pre>\n"},{"tags":["java","kubernetes","digital-ocean"],"owner":{"account_id":28424230,"reputation":13,"user_id":21745846,"display_name":"Sachin Dhatrak"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689172787,"creation_date":1689163832,"question_id":76670381,"body_markdown":"i have added proxy protocol true from ingress controller on k8. and suddenly api falling. my cloude provider is Digital Ocean. i have added service.beta.kubernetes.io/do-loadbalancer-enable-proxy-protocol: &quot;true&quot; in service and data:\r\n  use-forwarded-headers: &quot;true&quot;\r\n  compute-full-forwarded-for: &quot;true&quot;\r\n  use-proxy-protocol: &quot;true&quot; in config map ","title":"Caused by: org.springframework.web.client.HttpClientErrorException: 500 I/O error on POST request for https://abcd.com Connection reset;","body":"<p>i have added proxy protocol true from ingress controller on k8. and suddenly api falling. my cloude provider is Digital Ocean. i have added service.beta.kubernetes.io/do-loadbalancer-enable-proxy-protocol: &quot;true&quot; in service and data:\nuse-forwarded-headers: &quot;true&quot;\ncompute-full-forwarded-for: &quot;true&quot;\nuse-proxy-protocol: &quot;true&quot; in config map</p>\n"},{"tags":["java","string"],"comments":[{"owner":{"account_id":1178561,"reputation":5401,"user_id":1153988,"display_name":"C.Champagne"},"score":2,"creation_date":1689158359,"post_id":76669593,"comment_id":135172797,"body_markdown":"What is the actual result and what is the expected result? \nI see that you compute the sum of the odd and even digits (well digits having odd or even character codes). It doesn&#39;t seem to be what your question is about.","body":"What is the actual result and what is the expected result?  I see that you compute the sum of the odd and even digits (well digits having odd or even character codes). It doesn&#39;t seem to be what your question is about."},{"owner":{"account_id":20662707,"reputation":27,"user_id":15170334,"display_name":"Lakshya Gupta"},"score":0,"creation_date":1689158482,"post_id":76669593,"comment_id":135172822,"body_markdown":"I am printing the sum of odd digits and even digits separately.","body":"I am printing the sum of odd digits and even digits separately."},{"owner":{"display_name":"user6073886"},"score":0,"creation_date":1689158602,"post_id":76669593,"comment_id":135172855,"body_markdown":"You need to tell us what your input is and what both the expected and actual output are.","body":"You need to tell us what your input is and what both the expected and actual output are."},{"owner":{"account_id":20662707,"reputation":27,"user_id":15170334,"display_name":"Lakshya Gupta"},"score":0,"creation_date":1689158831,"post_id":76669593,"comment_id":135172899,"body_markdown":"For example, if the input is &quot;430&quot; output should be 4|3. That is the sum of odd numbers and even numbers. .","body":"For example, if the input is &quot;430&quot; output should be 4|3. That is the sum of odd numbers and even numbers. ."},{"owner":{"display_name":"user6073886"},"score":0,"creation_date":1689159003,"post_id":76669593,"comment_id":135172943,"body_markdown":"Ahh, i see one error now. You need to change `new Scanner(&quot;System.in&quot;)` to `new Scanner(System.in)`. You want to read from the standard input stream. Not read the literal String &quot;System.in&quot;.","body":"Ahh, i see one error now. You need to change <code>new Scanner(&quot;System.in&quot;)</code> to <code>new Scanner(System.in)</code>. You want to read from the standard input stream. Not read the literal String &quot;System.in&quot;."},{"owner":{"account_id":1827467,"reputation":4043,"user_id":1659790,"accept_rate":73,"display_name":"Jimmy T."},"score":0,"creation_date":1689159023,"post_id":76669593,"comment_id":135172950,"body_markdown":"The digit 0 represented as a character has the value 48, your code seems to assume it&#39;s 0. That&#39;s one problem","body":"The digit 0 represented as a character has the value 48, your code seems to assume it&#39;s 0. That&#39;s one problem"},{"owner":{"account_id":20662707,"reputation":27,"user_id":15170334,"display_name":"Lakshya Gupta"},"score":0,"creation_date":1689159398,"post_id":76669593,"comment_id":135173040,"body_markdown":"How can I resolve that problem?","body":"How can I resolve that problem?"},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1689171967,"post_id":76669593,"comment_id":135176172,"body_markdown":"You said numbers, not digits. All digits are numbers but not all numbers are just digits so you need to be specific in your question.  Also, you did not specify if the string could hold non-digits as well.","body":"You said numbers, not digits. All digits are numbers but not all numbers are just digits so you need to be specific in your question.  Also, you did not specify if the string could hold non-digits as well."}],"answers":[{"tags":[],"owner":{"account_id":29000973,"reputation":9,"user_id":22214527,"display_name":"Basma Sbaa"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1689158053,"creation_date":1689158053,"answer_id":76669628,"question_id":76669593,"body_markdown":"You should use new Scanner(System.in) instead of new Scanner(&quot;System.in&quot;). \r\nthis code should works.\r\n\r\n    import java.util.Scanner;\r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            Scanner sc = new Scanner(System.in);\r\n            String s = sc.nextLine();\r\n            int sumeven = 0;\r\n            int sumodd = 0;\r\n            for (int i = 0; i &lt; s.length(); i++) {\r\n                int temp = s.charAt(i) - &#39;0&#39;;\r\n                if (temp % 2 == 0) {\r\n                    sumeven += temp;\r\n                } else {\r\n                    sumodd += temp;\r\n                }\r\n            }\r\n            System.out.println(sumeven + &quot; &quot; + sumodd);\r\n        }\r\n    }","title":"Sum of numbers in a string","body":"<p>You should use new Scanner(System.in) instead of new Scanner(&quot;System.in&quot;).\nthis code should works.</p>\n<pre><code>import java.util.Scanner;\npublic class Main {\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        String s = sc.nextLine();\n        int sumeven = 0;\n        int sumodd = 0;\n        for (int i = 0; i &lt; s.length(); i++) {\n            int temp = s.charAt(i) - '0';\n            if (temp % 2 == 0) {\n                sumeven += temp;\n            } else {\n                sumodd += temp;\n            }\n        }\n        System.out.println(sumeven + &quot; &quot; + sumodd);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23134567,"reputation":534,"user_id":17238973,"display_name":"Sahil Patel"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1689159587,"creation_date":1689159587,"answer_id":76669829,"question_id":76669593,"body_markdown":"   Using java streams you find the sum of numbers in string like below\r\n\r\n     String s= &quot;String123&quot;;\r\n     Integer sum = IntStream\r\n                        .range(0, s.length())\r\n                        .filter(i -&gt; Character.isDigit(s.charAt(i)))\r\n                        .map(i -&gt; Character.getNumericValue(s.charAt(i)))\r\n                        .sum();\r\n     System.out.println(sum); // output will be 6","title":"Sum of numbers in a string","body":"<p>Using java streams you find the sum of numbers in string like below</p>\n<pre><code> String s= &quot;String123&quot;;\n Integer sum = IntStream\n                    .range(0, s.length())\n                    .filter(i -&gt; Character.isDigit(s.charAt(i)))\n                    .map(i -&gt; Character.getNumericValue(s.charAt(i)))\n                    .sum();\n System.out.println(sum); // output will be 6\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689172314,"creation_date":1689167061,"answer_id":76670895,"question_id":76669593,"body_markdown":"1. You are not taking in input from the console but from the string `&quot;System.in&quot;`.\r\n2. You are reading in each character as though it was an `int` which it isn&#39;t. Then you are summing each `character` by its parity and giving the wrong result.  For example, the character `S` is represented in ASCII by `83` in decimal. So each character as an `int` for the string `&quot;System.in&quot;` would be `83 121 115 116 101 109 46 105 110` and the sums would be `272 634` which is exactly what you are getting.\r\n\r\nSo as mentioned in the comments, change to `System.in` to read from the console.\r\n \r\nThen you need to parse the line looking for an actual number like `25` in `&quot;abc25def&quot;` and then convert to an `int` and sum those based on parity.\r\n\r\nOne way is to use a [regex](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/regex/Pattern.html#compile(java.lang.String)) to extract the numbers from a string.\r\n```\r\nString line = &quot;abc10def21 ghijll 49sks12&quot;;\r\nPattern.compile(&quot;\\\\d+&quot;).matcher(s).results()\r\n      .forEach(mr-&gt;System.out.println(mr.group()));\r\n```\r\nprints\r\n```\r\n10\r\n21\r\n49\r\n12\r\n```\r\nTo sum up the odd and even numbers you can stream the values, convert to an `Integer` and then [group](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/stream/Collectors.html#groupingBy(java.util.function.Function,java.util.stream.Collector)) them by parity and put in a map.  The sum is computed using [Collectors.reducing](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/stream/Collectors.html#reducing(T,java.util.function.BinaryOperator)). Using the `line` from above:\r\n```\r\nMap&lt;String, Integer&gt; map = Pattern.compile(&quot;\\\\d+&quot;).matcher(s).results()\r\n        .map(mr -&gt; Integer.valueOf(mr.group()))\r\n        .collect(Collectors.groupingBy(\r\n                v -&gt; v % 2 == 1 ? &quot;Sum of Odds&quot; : &quot;Sum of Evens&quot;,\r\n                Collectors.reducing(0, (a, b) -&gt; a + b)));\r\nmap.entrySet().forEach(System.out::println);\r\n```\r\nprints\r\n```    \r\nSum of Odds=70\r\nSum of Evens=22\r\n```\r\nIf you are only summing digits, then you don&#39;t need a regex and can just do it like this.\r\n- stream the characters using `chars()`\r\n- filter out non digits and convert to `Integers`.\r\n- Then group as before.\r\n```\r\nMap&lt;String, Integer&gt; sumDigits = s.chars()\r\n        .filter(Character::isDigit)\r\n        .mapToObj(Integer::valueOf)\r\n        .collect(Collectors.groupingBy(\r\n                v -&gt; v % 2 == 1 ? &quot;Sum of Odds&quot; : &quot;Sum of Evens&quot;,\r\n                Collectors.reducing(0, (a, b) -&gt; a + b)));\r\nsumDigits.entrySet().forEach(System.out::println);\r\n```\r\nprints\r\n```\r\nSum of Odds=204\r\nSum of Evens=200\r\n","title":"Sum of numbers in a string","body":"<ol>\n<li>You are not taking in input from the console but from the string <code>&quot;System.in&quot;</code>.</li>\n<li>You are reading in each character as though it was an <code>int</code> which it isn't. Then you are summing each <code>character</code> by its parity and giving the wrong result.  For example, the character <code>S</code> is represented in ASCII by <code>83</code> in decimal. So each character as an <code>int</code> for the string <code>&quot;System.in&quot;</code> would be <code>83 121 115 116 101 109 46 105 110</code> and the sums would be <code>272 634</code> which is exactly what you are getting.</li>\n</ol>\n<p>So as mentioned in the comments, change to <code>System.in</code> to read from the console.</p>\n<p>Then you need to parse the line looking for an actual number like <code>25</code> in <code>&quot;abc25def&quot;</code> and then convert to an <code>int</code> and sum those based on parity.</p>\n<p>One way is to use a <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/regex/Pattern.html#compile(java.lang.String)\" rel=\"nofollow noreferrer\">regex</a> to extract the numbers from a string.</p>\n<pre><code>String line = &quot;abc10def21 ghijll 49sks12&quot;;\nPattern.compile(&quot;\\\\d+&quot;).matcher(s).results()\n      .forEach(mr-&gt;System.out.println(mr.group()));\n</code></pre>\n<p>prints</p>\n<pre><code>10\n21\n49\n12\n</code></pre>\n<p>To sum up the odd and even numbers you can stream the values, convert to an <code>Integer</code> and then <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/stream/Collectors.html#groupingBy(java.util.function.Function,java.util.stream.Collector)\" rel=\"nofollow noreferrer\">group</a> them by parity and put in a map.  The sum is computed using <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/stream/Collectors.html#reducing(T,java.util.function.BinaryOperator)\" rel=\"nofollow noreferrer\">Collectors.reducing</a>. Using the <code>line</code> from above:</p>\n<pre><code>Map&lt;String, Integer&gt; map = Pattern.compile(&quot;\\\\d+&quot;).matcher(s).results()\n        .map(mr -&gt; Integer.valueOf(mr.group()))\n        .collect(Collectors.groupingBy(\n                v -&gt; v % 2 == 1 ? &quot;Sum of Odds&quot; : &quot;Sum of Evens&quot;,\n                Collectors.reducing(0, (a, b) -&gt; a + b)));\nmap.entrySet().forEach(System.out::println);\n</code></pre>\n<p>prints</p>\n<pre><code>Sum of Odds=70\nSum of Evens=22\n</code></pre>\n<p>If you are only summing digits, then you don't need a regex and can just do it like this.</p>\n<ul>\n<li>stream the characters using <code>chars()</code></li>\n<li>filter out non digits and convert to <code>Integers</code>.</li>\n<li>Then group as before.</li>\n</ul>\n<pre><code>Map&lt;String, Integer&gt; sumDigits = s.chars()\n        .filter(Character::isDigit)\n        .mapToObj(Integer::valueOf)\n        .collect(Collectors.groupingBy(\n                v -&gt; v % 2 == 1 ? &quot;Sum of Odds&quot; : &quot;Sum of Evens&quot;,\n                Collectors.reducing(0, (a, b) -&gt; a + b)));\nsumDigits.entrySet().forEach(System.out::println);\n</code></pre>\n<p>prints</p>\n<pre><code>Sum of Odds=204\nSum of Evens=200\n</code></pre>\n"}],"owner":{"account_id":20662707,"reputation":27,"user_id":15170334,"display_name":"Lakshya Gupta"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":91,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":3,"score":-2,"last_activity_date":1689172314,"creation_date":1689157744,"question_id":76669593,"body_markdown":"I am trying to find the sum of numbers present in the String, but the code runs fine and produce wrong output.\r\n\r\n\r\nI wrote the below code for the problem:\r\n\r\n```Java\r\nScanner sc = new Scanner(&quot;System.in&quot;);\r\nString s = sc.nextLine();\r\nint sumeven = 0;\r\nint sumodd = 0;\r\nfor (int i = 0;i &lt; s.length(); i++) {\r\n\tint temp = s.charAt(i);\r\n\tif ((s.charAt(i) % 2) == 0) {\r\n\t\tsumeven = sumeven+Integer.parseInt(String.valueOf(temp));\r\n\t} else if ((s.charAt(i) % 2) != 0) {\r\n\t\tsumodd = sumodd + Integer.parseInt(String.valueOf(temp));\r\n\t}\r\n}\r\n\r\nSystem.out.println(sumeven + &quot; &quot; + sumodd);\r\n```","title":"Sum of numbers in a string","body":"<p>I am trying to find the sum of numbers present in the String, but the code runs fine and produce wrong output.</p>\n<p>I wrote the below code for the problem:</p>\n<pre><code>Scanner sc = new Scanner(&quot;System.in&quot;);\nString s = sc.nextLine();\nint sumeven = 0;\nint sumodd = 0;\nfor (int i = 0;i &lt; s.length(); i++) {\n    int temp = s.charAt(i);\n    if ((s.charAt(i) % 2) == 0) {\n        sumeven = sumeven+Integer.parseInt(String.valueOf(temp));\n    } else if ((s.charAt(i) % 2) != 0) {\n        sumodd = sumodd + Integer.parseInt(String.valueOf(temp));\n    }\n}\n\nSystem.out.println(sumeven + &quot; &quot; + sumodd);\n</code></pre>\n"},{"tags":["java","macos","swing","jframe"],"comments":[{"owner":{"account_id":6179310,"reputation":2644,"user_id":4815321,"display_name":"mr mcwolf"},"score":0,"creation_date":1689144211,"post_id":76667736,"comment_id":135169707,"body_markdown":"use `jpackage` to get native launcher (`--type app-image`). you shouldn&#39;t have this problem with it.","body":"use <code>jpackage</code> to get native launcher (<code>--type app-image</code>). you shouldn&#39;t have this problem with it."}],"owner":{"account_id":26737380,"reputation":1,"user_id":20338728,"display_name":"Srinivas chowdary"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":469,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689171505,"creation_date":1689143919,"question_id":76667736,"body_markdown":"![enter image description here][1]\r\nAm using Java swing (Jframe) application, where it is showing java as its name in menu bar after upgrading to Sonoma beta 2 version how do I fix it, it’s a sample Jframe application used for testing.please advice me some workaround if any one had faced the same issue\r\n\r\n \r\n```\r\n  \r\n\r\nimport javax.swing.*;\r\n\r\nclass SwingDemo {\r\n    SwingDemo() {\r\n        JFrame jfrm = new JFrame(&quot; A simple applicattion&quot;);\r\n        jfrm.setSize(275, 100);\r\n        jfrm.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        JLabel jlab = new JLabel(&quot; Swing means powerful GUIs.&quot;);\r\n        jfrm.add(jlab);\r\n        jfrm.setVisible(true);\r\n    }\r\n\r\n    public static void main(String args[]) {\r\n        System.setProperty(&quot;apple.awt.application.name&quot;, &quot;MMscheduling&quot;);\r\n        SwingUtilities.invokeLater(new Runnable() {\r\n            public void run() {\r\n                new SwingDemo();\r\n            }\r\n        });\r\n    }\r\n}\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/r9Ywp.png","title":"Application name is displayed as java instead of &quot;my application&quot; name in Mac-Sonoma beta version","body":"<p><img src=\"https://i.stack.imgur.com/r9Ywp.png\" alt=\"enter image description here\" />\nAm using Java swing (Jframe) application, where it is showing java as its name in menu bar after upgrading to Sonoma beta 2 version how do I fix it, it’s a sample Jframe application used for testing.please advice me some workaround if any one had faced the same issue</p>\n<pre><code>  \n\nimport javax.swing.*;\n\nclass SwingDemo {\n    SwingDemo() {\n        JFrame jfrm = new JFrame(&quot; A simple applicattion&quot;);\n        jfrm.setSize(275, 100);\n        jfrm.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        JLabel jlab = new JLabel(&quot; Swing means powerful GUIs.&quot;);\n        jfrm.add(jlab);\n        jfrm.setVisible(true);\n    }\n\n    public static void main(String args[]) {\n        System.setProperty(&quot;apple.awt.application.name&quot;, &quot;MMscheduling&quot;);\n        SwingUtilities.invokeLater(new Runnable() {\n            public void run() {\n                new SwingDemo();\n            }\n        });\n    }\n}\n</code></pre>\n"},{"tags":["java","jprofiler"],"comments":[{"owner":{"account_id":900581,"reputation":46749,"user_id":936832,"accept_rate":75,"display_name":"Ingo Kegel"},"score":0,"creation_date":1689072399,"post_id":76658728,"comment_id":135158251,"body_markdown":"Is PID 16966 running as root or as another user?","body":"Is PID 16966 running as root or as another user?"}],"owner":{"account_id":28991531,"reputation":1,"user_id":22207144,"display_name":"ciliya"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689170947,"creation_date":1689049911,"question_id":76658728,"body_markdown":"    sudo -u root bin/jpdump --pid=16966     --file=/mnt/c/javaProfiler/jprofilerCentOs/dump\r\n\r\n&gt; Creating heap dump file /mnt/c/javaProfiler/jprofilerCentOs/dump.hprof\r\n&gt; ... ERROR: Attaching is not supported: could not open socket\r\n&gt; /proc/16966/root/tmp/.java_pid16966\r\n\r\nBoth the `Java` application and `JProfiler` are running in the same machine.\r\n\r\nas per documentation this should generate the heap dump file. The requirement is to generate the heap dump from production environment where only `JRE` is present. `JDK` is not available. And cant use the normal `GUI` interface in the `Linux` or `CentOS` machines.","title":"while generating heap dump using jprofiler13.0.7 version for linux attaching not supported operation error thrown","body":"<pre><code>sudo -u root bin/jpdump --pid=16966     --file=/mnt/c/javaProfiler/jprofilerCentOs/dump\n</code></pre>\n<blockquote>\n<p>Creating heap dump file /mnt/c/javaProfiler/jprofilerCentOs/dump.hprof\n... ERROR: Attaching is not supported: could not open socket\n/proc/16966/root/tmp/.java_pid16966</p>\n</blockquote>\n<p>Both the <code>Java</code> application and <code>JProfiler</code> are running in the same machine.</p>\n<p>as per documentation this should generate the heap dump file. The requirement is to generate the heap dump from production environment where only <code>JRE</code> is present. <code>JDK</code> is not available. And cant use the normal <code>GUI</code> interface in the <code>Linux</code> or <code>CentOS</code> machines.</p>\n"},{"tags":["java","android","camera","ip","p2p"],"comments":[{"owner":{"account_id":974021,"reputation":63348,"user_id":995891,"accept_rate":83,"display_name":"zapl"},"score":0,"creation_date":1689171792,"post_id":76671308,"comment_id":135176124,"body_markdown":"Idk if this is correct but https://www.catalinmunteanu.com/x-wsse-token-authentication/ says you need to &quot;Compute the SHA256 hash value of the string&quot; - try `MessageDigest.getInstance(&quot;SHA256&quot;)` since SHA1 and SHA256 arn&#39;t the same thing. Also no, you cannot decode a hash, you can only try to produce the same output (by using the same input or with probably years or millennia of brute force a different input that happens to produce the same output). A Hash is a one way function that cannot be reversed","body":"Idk if this is correct but <a href=\"https://www.catalinmunteanu.com/x-wsse-token-authentication/\" rel=\"nofollow noreferrer\">catalinmunteanu.com/x-wsse-token-authentication</a> says you need to &quot;Compute the SHA256 hash value of the string&quot; - try <code>MessageDigest.getInstance(&quot;SHA256&quot;)</code> since SHA1 and SHA256 arn&#39;t the same thing. Also no, you cannot decode a hash, you can only try to produce the same output (by using the same input or with probably years or millennia of brute force a different input that happens to produce the same output). A Hash is a one way function that cannot be reversed"},{"owner":{"account_id":974021,"reputation":63348,"user_id":995891,"accept_rate":83,"display_name":"zapl"},"score":0,"creation_date":1689172182,"post_id":76671308,"comment_id":135176218,"body_markdown":"on the other hand, `LYn/CyMIaGs2zIVw6TsVv60hO2c=` is a 20 byte hash so it isn&#39;t SHA-256 since that would be 32. SHA1 is 20 bytes so I guess that&#39;s not the isseu","body":"on the other hand, <code>LYn&#47;CyMIaGs2zIVw6TsVv60hO2c=</code> is a 20 byte hash so it isn&#39;t SHA-256 since that would be 32. SHA1 is 20 bytes so I guess that&#39;s not the isseu"}],"owner":{"account_id":19842988,"reputation":11,"user_id":14535246,"display_name":"waqyun"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":128,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1689170856,"creation_date":1689169739,"question_id":76671308,"body_markdown":"**Intercepted packet to my Dahua iP Camera contains this header**\r\n\r\n```\r\nNFGET /probe/device/7M02702PCAFFAC8 HTTP/1.1\r\nX-Version: 6.7.11\r\nX-ToUType: Client/Dmss_Android\r\nCSeq: -1794263239\r\nAuthorization: WSSE profile=&quot;UsernameToken&quot;\r\nX-WSSE: UsernameToken Username=&quot;cba1b29e32cb17aa46b8ff9e73c7f40b&quot;, \r\nPasswordDigest=&quot;LYn/CyMIaGs2zIVw6TsVv60hO2c=&quot;, Nonce=&quot;-1909749795&quot;, \r\nCreated=&quot;2023-06-28T22:13:15+05:30&quot;\r\n\r\n```\r\nI used below Java code \r\n\r\n```\r\nBase64.getEncoder().encodeToString(MessageDigest.getInstance(&quot;SHA1&quot;)\r\n.digest((&quot;-1909749795&quot;+&quot;2023-06-28T22:13:15+05:30&quot;+password).getBytes(&quot;utf8&quot;)));\r\n\r\n```\r\n\r\nUsing Oasis website UsernameToken digest WSS formula \r\n**Password_Digest = Base64 ( SHA-1 ( nonce + created + password ) )**  \r\nI created digest but it mis matches one in P2P packet but matches WSSE Generator Chrome plugin. \r\nIs Dahua using Wss as per spec or is something added to password ? Is there code to decrypt digest if password is known \r\n\r\nI would be thankful for an insight into this matter","title":"Understanding DMSS Android app P2P communication packet","body":"<p><strong>Intercepted packet to my Dahua iP Camera contains this header</strong></p>\n<pre><code>NFGET /probe/device/7M02702PCAFFAC8 HTTP/1.1\nX-Version: 6.7.11\nX-ToUType: Client/Dmss_Android\nCSeq: -1794263239\nAuthorization: WSSE profile=&quot;UsernameToken&quot;\nX-WSSE: UsernameToken Username=&quot;cba1b29e32cb17aa46b8ff9e73c7f40b&quot;, \nPasswordDigest=&quot;LYn/CyMIaGs2zIVw6TsVv60hO2c=&quot;, Nonce=&quot;-1909749795&quot;, \nCreated=&quot;2023-06-28T22:13:15+05:30&quot;\n\n</code></pre>\n<p>I used below Java code</p>\n<pre><code>Base64.getEncoder().encodeToString(MessageDigest.getInstance(&quot;SHA1&quot;)\n.digest((&quot;-1909749795&quot;+&quot;2023-06-28T22:13:15+05:30&quot;+password).getBytes(&quot;utf8&quot;)));\n\n</code></pre>\n<p>Using Oasis website UsernameToken digest WSS formula\n<strong>Password_Digest = Base64 ( SHA-1 ( nonce + created + password ) )</strong><br />\nI created digest but it mis matches one in P2P packet but matches WSSE Generator Chrome plugin.\nIs Dahua using Wss as per spec or is something added to password ? Is there code to decrypt digest if password is known</p>\n<p>I would be thankful for an insight into this matter</p>\n"},{"tags":["java","apache-nifi"],"owner":{"account_id":15414186,"reputation":155,"user_id":11120152,"display_name":"vigneshwar reddy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689170553,"creation_date":1689169843,"question_id":76671321,"body_markdown":"We are attempting to copy data from an Oracle database, which operates on the CEST time zone, to a PostgreSQL database, which operates on the UST time zone. Therefore, when copying data from Oracle to PostgreSQL, the DATE column data should not be directly transferred but rather adjusted to the UST time zone before being inserted into PostgreSQL.\r\n\r\nApproach.1:\r\nWe tried using **ExecuteSql** processor (which uses **AvroWriter** by default) to extract data and **PutDatabaseRecord** processor with **AvroReader** to load data to postgres. In this approach data was getting copied as-is.\r\n\r\nApproach.2:\r\nWe tried using **ExecuteSqlRecord** processor with **JsonRecordSetWriter** and **PutDatabaseRecord** processor with **JsonTreeReader**, In this approach we are able to configure the format to be considered for date, time &amp; timestamp data types. But, we didn&#39;t found any configuration where we can set the time-zone needed to be used.\r\n\r\nJsonRecordSetWriter configuration:\r\n[![JsonRecordSetWriter configuration](https://i.stack.imgur.com/t5gZE.png)](https://i.stack.imgur.com/t5gZE.png)\r\n\r\nJsonTreeReader confiuration:\r\n[![\r\nJsonTreeReader confiuration](https://i.stack.imgur.com/y7slo.png)](https://i.stack.imgur.com/y7slo.png)\r\n\r\nWhat exaclty we are expecting is,\r\nif in Source one of the DATE column value is : `2023-07-12 13:47:31` (UST)\r\n\r\nIn Target, it should be loaded as : `2023-07-12 11:47:31` (CEST)\r\n\r\nCould someone please suggest if achieving this in NiFi is possible and if so, how? Alternatively, are there any workarounds that can be implemented at the database level? Or it can be some property of JVM or nifi?","title":"In NiFi, how can time-zones be handled when transferring data between DB&#39;s where the time-zone differs between the source and destination DB servers?","body":"<p>We are attempting to copy data from an Oracle database, which operates on the CEST time zone, to a PostgreSQL database, which operates on the UST time zone. Therefore, when copying data from Oracle to PostgreSQL, the DATE column data should not be directly transferred but rather adjusted to the UST time zone before being inserted into PostgreSQL.</p>\n<p>Approach.1:\nWe tried using <strong>ExecuteSql</strong> processor (which uses <strong>AvroWriter</strong> by default) to extract data and <strong>PutDatabaseRecord</strong> processor with <strong>AvroReader</strong> to load data to postgres. In this approach data was getting copied as-is.</p>\n<p>Approach.2:\nWe tried using <strong>ExecuteSqlRecord</strong> processor with <strong>JsonRecordSetWriter</strong> and <strong>PutDatabaseRecord</strong> processor with <strong>JsonTreeReader</strong>, In this approach we are able to configure the format to be considered for date, time &amp; timestamp data types. But, we didn't found any configuration where we can set the time-zone needed to be used.</p>\n<p>JsonRecordSetWriter configuration:\n<a href=\"https://i.stack.imgur.com/t5gZE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/t5gZE.png\" alt=\"JsonRecordSetWriter configuration\" /></a></p>\n<p>JsonTreeReader confiuration:\n<a href=\"https://i.stack.imgur.com/y7slo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/y7slo.png\" alt=\"\nJsonTreeReader confiuration\" /></a></p>\n<p>What exaclty we are expecting is,\nif in Source one of the DATE column value is : <code>2023-07-12 13:47:31</code> (UST)</p>\n<p>In Target, it should be loaded as : <code>2023-07-12 11:47:31</code> (CEST)</p>\n<p>Could someone please suggest if achieving this in NiFi is possible and if so, how? Alternatively, are there any workarounds that can be implemented at the database level? Or it can be some property of JVM or nifi?</p>\n"},{"tags":["java","migration"],"owner":{"account_id":24083109,"reputation":194,"user_id":18057525,"display_name":"Octavia"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689170342,"creation_date":1689170342,"question_id":76671406,"body_markdown":"here I present you my problem: There is a Java project, a part of it is split into microservices. These microservices were written using spring boot 2.5. I am migrating them to spring boot 3.1. Until everything is migrated and we will release this version in production, problems are resolved, changes are made on the initial version (which uses spring boot 3).\r\n\r\nBUT, then I have to get these changes on the branches that are already migrated. Is there a way to get notified when some changes are merged into the current dev branch? Like, &quot;these files just got modified&quot;. Or to somehow apply these changes on both branches (dev and springboot3 branch)? we work with bitbucket.\r\n","title":"How to deal with changes within a project with 2 versions?","body":"<p>here I present you my problem: There is a Java project, a part of it is split into microservices. These microservices were written using spring boot 2.5. I am migrating them to spring boot 3.1. Until everything is migrated and we will release this version in production, problems are resolved, changes are made on the initial version (which uses spring boot 3).</p>\n<p>BUT, then I have to get these changes on the branches that are already migrated. Is there a way to get notified when some changes are merged into the current dev branch? Like, &quot;these files just got modified&quot;. Or to somehow apply these changes on both branches (dev and springboot3 branch)? we work with bitbucket.</p>\n"},{"tags":["java","spring","spring-boot","docker","dockerfile"],"comments":[{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1689068858,"post_id":76660640,"comment_id":135157503,"body_markdown":"Was that jar compiled with Java 17? Likely a version conflict… indicated by `Unsupported class file major version 61`","body":"Was that jar compiled with Java 17? Likely a version conflict… indicated by <code>Unsupported class file major version 61</code>"},{"owner":{"account_id":6984241,"reputation":494,"user_id":5355867,"display_name":"BenjaminD"},"score":0,"creation_date":1689069038,"post_id":76660640,"comment_id":135157535,"body_markdown":"The manifest of the jar says Build-Jdk: 17.0.7. I get the version conflict but I don&#39;t understand where it comes from : everything is in 17","body":"The manifest of the jar says Build-Jdk: 17.0.7. I get the version conflict but I don&#39;t understand where it comes from : everything is in 17"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1689069091,"post_id":76660640,"comment_id":135157551,"body_markdown":"Looks like in your container is an older java version installed","body":"Looks like in your container is an older java version installed"},{"owner":{"account_id":6984241,"reputation":494,"user_id":5355867,"display_name":"BenjaminD"},"score":0,"creation_date":1689069298,"post_id":76660640,"comment_id":135157593,"body_markdown":"Java version in the container is : openjdk version &quot;17-ea&quot; 2021-09-14\nOpenJDK Runtime Environment (build 17-ea+17-1401)\nOpenJDK 64-Bit Server VM (build 17-ea+17-1401, mixed mode, sharing)\n So same Major version","body":"Java version in the container is : openjdk version &quot;17-ea&quot; 2021-09-14 OpenJDK Runtime Environment (build 17-ea+17-1401) OpenJDK 64-Bit Server VM (build 17-ea+17-1401, mixed mode, sharing)  So same Major version"},{"owner":{"account_id":1695351,"reputation":3510,"user_id":1556820,"accept_rate":50,"display_name":"mangusta"},"score":0,"creation_date":1689069520,"post_id":76660640,"comment_id":135157644,"body_markdown":"we don&#39;t see the value of `${version.java}`","body":"we don&#39;t see the value of <code>${version.java}</code>"},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":5,"creation_date":1689069582,"post_id":76660640,"comment_id":135157659,"body_markdown":"1. OpenJDK doesn&#39;t do updated releases, so you should never use one in production. 2. The `-ea-` suggests that this is an Early Access build of the JDK, you should **definitely** never use that one in production. To fix 1 and 2, switch to a supported JDK (like Temurin). 3. The problem comes from the `ASM ClassReader failed to parse class file` which means its not the JDK itself complaining, but ASM. That means that the Spring version you use doesn&#39;t support running with code compiled against Java 17. Make sure to update to at least the latest minor version of Spring. Spring Boot &gt;= 2.5.","body":"1. OpenJDK doesn&#39;t do updated releases, so you should never use one in production. 2. The <code>-ea-</code> suggests that this is an Early Access build of the JDK, you should <b>definitely</b> never use that one in production. To fix 1 and 2, switch to a supported JDK (like Temurin). 3. The problem comes from the <code>ASM ClassReader failed to parse class file</code> which means its not the JDK itself complaining, but ASM. That means that the Spring version you use doesn&#39;t support running with code compiled against Java 17. Make sure to update to at least the latest minor version of Spring. Spring Boot &gt;= 2.5."},{"owner":{"account_id":6984241,"reputation":494,"user_id":5355867,"display_name":"BenjaminD"},"score":0,"creation_date":1689070279,"post_id":76660640,"comment_id":135157807,"body_markdown":"${version.java} fixed and replaced by the variable value","body":"${version.java} fixed and replaced by the variable value"}],"owner":{"account_id":6984241,"reputation":494,"user_id":5355867,"display_name":"BenjaminD"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689169963,"creation_date":1689068552,"question_id":76660640,"body_markdown":"I&#39;m trying to run a jar in a docker container but it fails with compilation issue.  \r\nMy pom is like that :\r\n\r\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\r\nThe Dockerfile starts as follow :\r\n\r\n    FROM openjdk:17-ea-17-jdk-oracle\r\n\r\nThe java -version is locally (and so used to compile) :\r\n\r\n    openjdk version &quot;17.0.7&quot; 2023-04-18\r\n    OpenJDK Runtime Environment (build 17.0.7+7-Ubuntu-0ubuntu122.04.2)\r\n    OpenJDK 64-Bit Server VM (build 17.0.7+7-Ubuntu-0ubuntu122.04.2, mixed mode, sharing)\r\n\r\nAnd when I try to run the container, it fails with the following message in the logs :\r\n\r\n    org.springframework.beans.factory.BeanDefinitionStoreException: Failed to read candidate component class: URL [jar:file:***-8.0.0-SNAPSHOT.jar!package/MyClass.class]; nested exception is org.springframework.core.NestedIOException: ASM ClassReader failed to parse class file - probably due to a new Java class file version that isn&#39;t supported yet: URL [jar:file:***8.0.0-SNAPSHOT.jar!package/MyClass.class]; nested exception is java.lang.IllegalArgumentException: Unsupported class file major version 61\r\n    2023-07-11T09:36:30.792324136Z \tat org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider.scanCandidateComponents(ClassPathScanningCandidateComponentProvider.java:454)\r\n    2023-07-11T09:36:30.792330112Z \tat org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider.findCandidateComponents(ClassPathScanningCandidateComponentProvider.java:316)\r\n    2023-07-11T09:36:30.792334795Z \tat org.springframework.context.annotation.ClassPathBeanDefinitionScanner.doScan(ClassPathBeanDefinitionScanner.java:275)\r\n    2023-07-11T09:36:30.792338818Z \tat org.springframework.context.annotation.ComponentScanAnnotationParser.parse(ComponentScanAnnotationParser.java:132)\r\n    2023-07-11T09:36:30.792342490Z \tat org.springframework.context.annotation.ConfigurationClassParser.doProcessConfigurationClass(ConfigurationClassParser.java:287)\r\n    2023-07-11T09:36:30.792346526Z \tat org.springframework.context.annotation.ConfigurationClassParser.processConfigurationClass(ConfigurationClassParser.java:242)\r\n    2023-07-11T09:36:30.792350611Z \tat org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:199)\r\n    2023-07-11T09:36:30.792354840Z \tat org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:167)\r\n    2023-07-11T09:36:30.792358458Z \tat org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:315)\r\n    2023-07-11T09:36:30.792364075Z \tat org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:232)\r\n    2023-07-11T09:36:30.792368200Z \tat org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:275)\r\n    2023-07-11T09:36:30.792371846Z \tat org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:95)\r\n    2023-07-11T09:36:30.792390554Z \tat org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:705)\r\n    2023-07-11T09:36:30.792397705Z \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:531)\r\n    2023-07-11T09:36:30.792451118Z \tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:142)\r\n    2023-07-11T09:36:30.792468006Z \tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775)\r\n    2023-07-11T09:36:30.792472375Z \tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)\r\n    2023-07-11T09:36:30.792475985Z \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:316)\r\n    2023-07-11T09:36:30.792479268Z \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1260)\r\n    2023-07-11T09:36:30.792482622Z \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1248)\r\n    2023-07-11T09:36:30.792485898Z \tat package.Main.main(Main.java:23)\r\n    2023-07-11T09:36:30.792489480Z \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    2023-07-11T09:36:30.792493042Z \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78)\r\n    2023-07-11T09:36:30.792496403Z \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    2023-07-11T09:36:30.792499785Z \tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n    2023-07-11T09:36:30.792503366Z \tat org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49)\r\n    2023-07-11T09:36:30.792509219Z Caused by: org.springframework.core.NestedIOException: ASM ClassReader failed to parse class file - probably due to a new Java class file version that isn&#39;t supported yet: URL [jar:file:***-8.0.0-SNAPSHOT.jar!package/MyClass.class]; nested exception is java.lang.IllegalArgumentException: Unsupported class file major version 61\r\n    2023-07-11T09:36:30.792513634Z \tat org.springframework.core.type.classreading.SimpleMetadataReader.&lt;init&gt;(SimpleMetadataReader.java:57)\r\n    2023-07-11T09:36:30.792517334Z \tat org.springframework.core.type.classreading.SimpleMetadataReaderFactory.getMetadataReader(SimpleMetadataReaderFactory.java:103)\r\n    2023-07-11T09:36:30.792520942Z \tat org.springframework.core.type.classreading.CachingMetadataReaderFactory.getMetadataReader(CachingMetadataReaderFactory.java:123)\r\n    2023-07-11T09:36:30.792524564Z \tat org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider.scanCandidateComponents(ClassPathScanningCandidateComponentProvider.java:430)\r\n    2023-07-11T09:36:30.792528064Z \t... 25 common frames omitted\r\n    2023-07-11T09:36:30.792531292Z Caused by: java.lang.IllegalArgumentException: Unsupported class file major version 61\r\n    2023-07-11T09:36:30.792534698Z \tat org.springframework.asm.ClassReader.&lt;init&gt;(ClassReader.java:184)\r\n    2023-07-11T09:36:30.792546986Z \tat org.springframework.asm.ClassReader.&lt;init&gt;(ClassReader.java:166)\r\n    2023-07-11T09:36:30.792550659Z \tat org.springframework.asm.ClassReader.&lt;init&gt;(ClassReader.java:152)\r\n    2023-07-11T09:36:30.792554423Z \tat org.springframework.asm.ClassReader.&lt;init&gt;(ClassReader.java:273)\r\n    2023-07-11T09:36:30.792558037Z \tat org.springframework.core.type.classreading.SimpleMetadataReader.&lt;init&gt;(SimpleMetadataReader.java:54)\r\n    2023-07-11T09:36:30.792561610Z \t... 28 common frames omitted\r\n\r\nIf I try a java -version, it also is java 17","title":"Version problem while running Java code in Docker : everything is in 17 but a version issue still pops","body":"<p>I'm trying to run a jar in a docker container but it fails with compilation issue.<br />\nMy pom is like that :</p>\n<pre><code>    &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n</code></pre>\n<p>The Dockerfile starts as follow :</p>\n<pre><code>FROM openjdk:17-ea-17-jdk-oracle\n</code></pre>\n<p>The java -version is locally (and so used to compile) :</p>\n<pre><code>openjdk version &quot;17.0.7&quot; 2023-04-18\nOpenJDK Runtime Environment (build 17.0.7+7-Ubuntu-0ubuntu122.04.2)\nOpenJDK 64-Bit Server VM (build 17.0.7+7-Ubuntu-0ubuntu122.04.2, mixed mode, sharing)\n</code></pre>\n<p>And when I try to run the container, it fails with the following message in the logs :</p>\n<pre><code>org.springframework.beans.factory.BeanDefinitionStoreException: Failed to read candidate component class: URL [jar:file:***-8.0.0-SNAPSHOT.jar!package/MyClass.class]; nested exception is org.springframework.core.NestedIOException: ASM ClassReader failed to parse class file - probably due to a new Java class file version that isn't supported yet: URL [jar:file:***8.0.0-SNAPSHOT.jar!package/MyClass.class]; nested exception is java.lang.IllegalArgumentException: Unsupported class file major version 61\n2023-07-11T09:36:30.792324136Z  at org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider.scanCandidateComponents(ClassPathScanningCandidateComponentProvider.java:454)\n2023-07-11T09:36:30.792330112Z  at org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider.findCandidateComponents(ClassPathScanningCandidateComponentProvider.java:316)\n2023-07-11T09:36:30.792334795Z  at org.springframework.context.annotation.ClassPathBeanDefinitionScanner.doScan(ClassPathBeanDefinitionScanner.java:275)\n2023-07-11T09:36:30.792338818Z  at org.springframework.context.annotation.ComponentScanAnnotationParser.parse(ComponentScanAnnotationParser.java:132)\n2023-07-11T09:36:30.792342490Z  at org.springframework.context.annotation.ConfigurationClassParser.doProcessConfigurationClass(ConfigurationClassParser.java:287)\n2023-07-11T09:36:30.792346526Z  at org.springframework.context.annotation.ConfigurationClassParser.processConfigurationClass(ConfigurationClassParser.java:242)\n2023-07-11T09:36:30.792350611Z  at org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:199)\n2023-07-11T09:36:30.792354840Z  at org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:167)\n2023-07-11T09:36:30.792358458Z  at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:315)\n2023-07-11T09:36:30.792364075Z  at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:232)\n2023-07-11T09:36:30.792368200Z  at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:275)\n2023-07-11T09:36:30.792371846Z  at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:95)\n2023-07-11T09:36:30.792390554Z  at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:705)\n2023-07-11T09:36:30.792397705Z  at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:531)\n2023-07-11T09:36:30.792451118Z  at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:142)\n2023-07-11T09:36:30.792468006Z  at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775)\n2023-07-11T09:36:30.792472375Z  at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)\n2023-07-11T09:36:30.792475985Z  at org.springframework.boot.SpringApplication.run(SpringApplication.java:316)\n2023-07-11T09:36:30.792479268Z  at org.springframework.boot.SpringApplication.run(SpringApplication.java:1260)\n2023-07-11T09:36:30.792482622Z  at org.springframework.boot.SpringApplication.run(SpringApplication.java:1248)\n2023-07-11T09:36:30.792485898Z  at package.Main.main(Main.java:23)\n2023-07-11T09:36:30.792489480Z  at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n2023-07-11T09:36:30.792493042Z  at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78)\n2023-07-11T09:36:30.792496403Z  at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n2023-07-11T09:36:30.792499785Z  at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n2023-07-11T09:36:30.792503366Z  at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49)\n2023-07-11T09:36:30.792509219Z Caused by: org.springframework.core.NestedIOException: ASM ClassReader failed to parse class file - probably due to a new Java class file version that isn't supported yet: URL [jar:file:***-8.0.0-SNAPSHOT.jar!package/MyClass.class]; nested exception is java.lang.IllegalArgumentException: Unsupported class file major version 61\n2023-07-11T09:36:30.792513634Z  at org.springframework.core.type.classreading.SimpleMetadataReader.&lt;init&gt;(SimpleMetadataReader.java:57)\n2023-07-11T09:36:30.792517334Z  at org.springframework.core.type.classreading.SimpleMetadataReaderFactory.getMetadataReader(SimpleMetadataReaderFactory.java:103)\n2023-07-11T09:36:30.792520942Z  at org.springframework.core.type.classreading.CachingMetadataReaderFactory.getMetadataReader(CachingMetadataReaderFactory.java:123)\n2023-07-11T09:36:30.792524564Z  at org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider.scanCandidateComponents(ClassPathScanningCandidateComponentProvider.java:430)\n2023-07-11T09:36:30.792528064Z  ... 25 common frames omitted\n2023-07-11T09:36:30.792531292Z Caused by: java.lang.IllegalArgumentException: Unsupported class file major version 61\n2023-07-11T09:36:30.792534698Z  at org.springframework.asm.ClassReader.&lt;init&gt;(ClassReader.java:184)\n2023-07-11T09:36:30.792546986Z  at org.springframework.asm.ClassReader.&lt;init&gt;(ClassReader.java:166)\n2023-07-11T09:36:30.792550659Z  at org.springframework.asm.ClassReader.&lt;init&gt;(ClassReader.java:152)\n2023-07-11T09:36:30.792554423Z  at org.springframework.asm.ClassReader.&lt;init&gt;(ClassReader.java:273)\n2023-07-11T09:36:30.792558037Z  at org.springframework.core.type.classreading.SimpleMetadataReader.&lt;init&gt;(SimpleMetadataReader.java:54)\n2023-07-11T09:36:30.792561610Z  ... 28 common frames omitted\n</code></pre>\n<p>If I try a java -version, it also is java 17</p>\n"},{"tags":["java","spring","spring-boot","inversion-of-control"],"answers":[{"tags":[],"owner":{"account_id":3245007,"reputation":2260,"user_id":2736849,"accept_rate":80,"display_name":"mfaisalhyder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689169874,"creation_date":1689169874,"answer_id":76671326,"question_id":74640616,"body_markdown":"&gt; However, it creates the bean every time.\r\n\r\nAs you are passing `@Primary`. Remove it and see, it should only create it when you are setting `application.proxy-url` in your `application.proeprties/.yml`\r\n\r\n\r\nIn order to make sure that `applicationConfiguration.getProxyUrl()` does not return null you can make this class `@Validated`\r\n\r\nThis way, if your `applicationConfiguration` has null/empty fields it will stop you there itself at the time of loading of your application.\r\n\r\n\r\n    @Validated\r\n    @ConfigurationProperties(prefix = &quot;application&quot;)\r\n    @Getter\r\n    @AllArgsConstructor\r\n    public class ApplicationConfiguration {\r\n\r\n        @NotBlank\r\n        private final String proxyUrl;\r\n\r\n        @NotBlank\r\n        private final String proxyPort;\r\n\r\n        @NotBlank\r\n        private final String proxyScheme;\r\n\r\n    }\r\n\r\n\r\n","title":"When is Spring @Conditional checked","body":"<blockquote>\n<p>However, it creates the bean every time.</p>\n</blockquote>\n<p>As you are passing <code>@Primary</code>. Remove it and see, it should only create it when you are setting <code>application.proxy-url</code> in your <code>application.proeprties/.yml</code></p>\n<p>In order to make sure that <code>applicationConfiguration.getProxyUrl()</code> does not return null you can make this class <code>@Validated</code></p>\n<p>This way, if your <code>applicationConfiguration</code> has null/empty fields it will stop you there itself at the time of loading of your application.</p>\n<pre><code>@Validated\n@ConfigurationProperties(prefix = &quot;application&quot;)\n@Getter\n@AllArgsConstructor\npublic class ApplicationConfiguration {\n\n    @NotBlank\n    private final String proxyUrl;\n\n    @NotBlank\n    private final String proxyPort;\n\n    @NotBlank\n    private final String proxyScheme;\n\n}\n</code></pre>\n"}],"owner":{"account_id":5260296,"reputation":656,"user_id":4202012,"accept_rate":37,"display_name":"Erates"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689169874,"creation_date":1669891550,"question_id":74640616,"body_markdown":"We are using Spring Boot 2.6.13 with Java 11 and our application has to connect to an external service. On some environments, we have to use a corporate proxy.\r\n\r\nIn order to make the application flexible, I thought of creating 2 beans. One with a proxy, the other without.\r\n```\r\n@Bean\r\npublic HttpHost getProxyHost() {\r\n    return null;\r\n}\r\n\r\n@Bean\r\n@Primary\r\n@ConditionalOnProperty(name = &quot;application.proxy-url&quot;)\r\npublic HttpHost getProxyHost(\r\n        ApplicationConfiguration applicationConfiguration\r\n) {\r\n    return new HttpHost(\r\n            applicationConfiguration.getProxyUrl(),\r\n            applicationConfiguration.getProxyPort(),\r\n            applicationConfiguration.getProxyScheme()\r\n    );\r\n}\r\n```\r\n\r\nI would think that Spring only makes the second bean if the `proxy-url` field is filled in. However, it creates the bean every time. Problem there is that if `applicationConfiguration.getProxyUrl()` returns null, a NullPointerException is thrown and the application is unable to startup.\r\n\r\nThere is a solution where I use an if statement, check the value and return null if the url is null. But I thought this IoC way would look cleaner.\r\n\r\nI have tried searching online on how/when Spring is checking the `@Conditional` annotations, but haven&#39;t found much (without going through it&#39;s source code).\r\n\r\nThanks in advance!","title":"When is Spring @Conditional checked","body":"<p>We are using Spring Boot 2.6.13 with Java 11 and our application has to connect to an external service. On some environments, we have to use a corporate proxy.</p>\n<p>In order to make the application flexible, I thought of creating 2 beans. One with a proxy, the other without.</p>\n<pre><code>@Bean\npublic HttpHost getProxyHost() {\n    return null;\n}\n\n@Bean\n@Primary\n@ConditionalOnProperty(name = &quot;application.proxy-url&quot;)\npublic HttpHost getProxyHost(\n        ApplicationConfiguration applicationConfiguration\n) {\n    return new HttpHost(\n            applicationConfiguration.getProxyUrl(),\n            applicationConfiguration.getProxyPort(),\n            applicationConfiguration.getProxyScheme()\n    );\n}\n</code></pre>\n<p>I would think that Spring only makes the second bean if the <code>proxy-url</code> field is filled in. However, it creates the bean every time. Problem there is that if <code>applicationConfiguration.getProxyUrl()</code> returns null, a NullPointerException is thrown and the application is unable to startup.</p>\n<p>There is a solution where I use an if statement, check the value and return null if the url is null. But I thought this IoC way would look cleaner.</p>\n<p>I have tried searching online on how/when Spring is checking the <code>@Conditional</code> annotations, but haven't found much (without going through it's source code).</p>\n<p>Thanks in advance!</p>\n"},{"tags":["java","containers","fips"],"answers":[{"tags":[],"owner":{"account_id":7409103,"reputation":729,"user_id":5637073,"accept_rate":86,"display_name":"IT_User"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689169787,"creation_date":1689169787,"answer_id":76671312,"question_id":76657105,"body_markdown":"Needed to post those -Dcom options into JAVA_TOOLS_OPTIONS to get this to work. ","title":"Openjdk 1.8.0 failing when FIPs enabled in container","body":"<p>Needed to post those -Dcom options into JAVA_TOOLS_OPTIONS to get this to work.</p>\n"}],"owner":{"account_id":7409103,"reputation":729,"user_id":5637073,"accept_rate":86,"display_name":"IT_User"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76671312,"answer_count":1,"score":0,"last_activity_date":1689169787,"creation_date":1689020703,"question_id":76657105,"body_markdown":"Good afternoon,\r\n\r\nI have a java application that is failing to deploy on FIPS enabled Kubernetes node. I get the following error on startup:\r\n\r\n    \r\n     org.springframework.beans.factory.BeanCreationException: Error occured reading security configuration; nested exception is java.io.IOException: java.security.KeyStoreException: JCEKS not found\r\n     java.security.NoSuchAlgorithmException: JCEKS KeyStore not available\r\n\r\nFrom reading https://bugzilla.redhat.com/show_bug.cgi?id=1759335, it appears that this &quot;issue&quot; was introduced in openjdk 1.8.0 but is not considered a bug according to redhat. The expectation is to use the NSS keystore database instead of a file keystore. \r\n\r\nThis is a java container app that runs with its own cacerts file. I tried to recreate the cacerts as a JCEKS keystore but receive an error of JCEKS not found. \r\n\r\nThoughts on how I can make a containerized java application run on a FIPS enabled node while running OpenJDK 1.8.0? \r\n\r\nI have tried to set:\r\n\r\n     JDK_JAVA_OPTIONS=&#39;-Dcom.redhat.fips=false&#39;\r\n     -Dcom.redhat.fips=false\r\n\r\nwithout luck and still recieve the same error. ","title":"Openjdk 1.8.0 failing when FIPs enabled in container","body":"<p>Good afternoon,</p>\n<p>I have a java application that is failing to deploy on FIPS enabled Kubernetes node. I get the following error on startup:</p>\n<pre><code> org.springframework.beans.factory.BeanCreationException: Error occured reading security configuration; nested exception is java.io.IOException: java.security.KeyStoreException: JCEKS not found\n java.security.NoSuchAlgorithmException: JCEKS KeyStore not available\n</code></pre>\n<p>From reading <a href=\"https://bugzilla.redhat.com/show_bug.cgi?id=1759335\" rel=\"nofollow noreferrer\">https://bugzilla.redhat.com/show_bug.cgi?id=1759335</a>, it appears that this &quot;issue&quot; was introduced in openjdk 1.8.0 but is not considered a bug according to redhat. The expectation is to use the NSS keystore database instead of a file keystore.</p>\n<p>This is a java container app that runs with its own cacerts file. I tried to recreate the cacerts as a JCEKS keystore but receive an error of JCEKS not found.</p>\n<p>Thoughts on how I can make a containerized java application run on a FIPS enabled node while running OpenJDK 1.8.0?</p>\n<p>I have tried to set:</p>\n<pre><code> JDK_JAVA_OPTIONS='-Dcom.redhat.fips=false'\n -Dcom.redhat.fips=false\n</code></pre>\n<p>without luck and still recieve the same error.</p>\n"},{"tags":["java","scala","executable-jar","eclipse-juno","slick2d"],"comments":[{"owner":{"account_id":2017134,"reputation":24227,"user_id":1804173,"accept_rate":77,"display_name":"bluenote10"},"score":0,"creation_date":1353674050,"post_id":13527869,"comment_id":18523508,"body_markdown":"You might want to add the information whether your main class is a Java or Scala class. I&#39;m not familiar with Eclipse Jar Export, but if I remember correctly, there was some issue that the main class must be a Java class.","body":"You might want to add the information whether your main class is a Java or Scala class. I&#39;m not familiar with Eclipse Jar Export, but if I remember correctly, there was some issue that the main class must be a Java class."},{"owner":{"account_id":1347013,"reputation":2807,"user_id":1287554,"accept_rate":65,"display_name":"Plasty Grove"},"score":0,"creation_date":1353674605,"post_id":13527869,"comment_id":18523751,"body_markdown":"It&#39;s a Java main class. Added that in.","body":"It&#39;s a Java main class. Added that in."}],"answers":[{"tags":[],"owner":{"account_id":1347013,"reputation":2807,"user_id":1287554,"accept_rate":65,"display_name":"Plasty Grove"},"down_vote_count":1,"up_vote_count":13,"is_accepted":true,"score":12,"last_activity_date":1353674569,"creation_date":1353674569,"answer_id":13529430,"question_id":13527869,"body_markdown":"Okay, I got it to work. Apparently, all I needed to do was restart eclipse. And then magically, it started detecting the Main class:\r\n\r\n![enter image description here][1]\r\n\r\nBut the jar started giving me noClassDefFound errors for the Slick2d, LWJGL and other libraries. That&#39;s where [JarSplice][2] came to my rescue. I exported the project as before, with all the libraries and resources.\r\n\r\nThen, I fired up JarSplice and added everything as follows:\r\n\r\n 1. Go to &quot;Add Jars&quot; and add the project.jar just created through eclipse, add lwjgl.jar, slick.jar and scala-library.jar. lwjgl and slick should be in your project lib folder where you would have imported them. scala-library should be available wherever it says it is. Make sure you add that as well![enter image description here][3]\r\n 2. Next, when I tried to &quot;Add Natives&quot; it kept giving me &quot;Duplicate library&quot; error. So I removed them all and kept it empty.\r\n 3. Next in &quot;Main Class&quot;, I entered the path to the main class i.e. game.TicTacGame\r\n 4. Finally, &quot;Create Fat Jar&quot;. And it works perfectly :)\r\n\r\n  [1]: http://i.stack.imgur.com/fjQQb.jpg\r\n  [2]: http://ninjacave.com/jarsplice\r\n  [3]: http://i.stack.imgur.com/Xz7Cd.jpg","title":"&quot;Could not find main method from given launch configuration&quot; when using Java+Scala+Slick2D","body":"<p>Okay, I got it to work. Apparently, all I needed to do was restart eclipse. And then magically, it started detecting the Main class:</p>\n\n<p><img src=\"https://i.stack.imgur.com/fjQQb.jpg\" alt=\"enter image description here\"></p>\n\n<p>But the jar started giving me noClassDefFound errors for the Slick2d, LWJGL and other libraries. That's where <a href=\"http://ninjacave.com/jarsplice\" rel=\"noreferrer\">JarSplice</a> came to my rescue. I exported the project as before, with all the libraries and resources.</p>\n\n<p>Then, I fired up JarSplice and added everything as follows:</p>\n\n<ol>\n<li>Go to \"Add Jars\" and add the project.jar just created through eclipse, add lwjgl.jar, slick.jar and scala-library.jar. lwjgl and slick should be in your project lib folder where you would have imported them. scala-library should be available wherever it says it is. Make sure you add that as well<img src=\"https://i.stack.imgur.com/Xz7Cd.jpg\" alt=\"enter image description here\"></li>\n<li>Next, when I tried to \"Add Natives\" it kept giving me \"Duplicate library\" error. So I removed them all and kept it empty.</li>\n<li>Next in \"Main Class\", I entered the path to the main class i.e. game.TicTacGame</li>\n<li>Finally, \"Create Fat Jar\". And it works perfectly :)</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":1745279,"reputation":1,"user_id":1595666,"display_name":"Vishwas Nayak"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1369895041,"creation_date":1369895041,"answer_id":16829302,"question_id":13527869,"body_markdown":"I recently figured a better way to do this using &#39;*Runnable jar export*&#39; which might help you. In order for your main method to be listed in that list, you need to add the main method to the *Run Configuration* list.\r\n\r\nThis way it&#39;s simpler to create a runnable jar especially if you want to do it repeatedly.\r\n","title":"&quot;Could not find main method from given launch configuration&quot; when using Java+Scala+Slick2D","body":"<p>I recently figured a better way to do this using '<em>Runnable jar export</em>' which might help you. In order for your main method to be listed in that list, you need to add the main method to the <em>Run Configuration</em> list.</p>\n\n<p>This way it's simpler to create a runnable jar especially if you want to do it repeatedly.</p>\n"},{"tags":[],"owner":{"account_id":1048609,"reputation":91,"user_id":1053043,"display_name":"Brian"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1375079429,"creation_date":1375079429,"answer_id":17917338,"question_id":13527869,"body_markdown":"I just encountered the same problem, and here is how I solved it:\r\n\r\n 1. Open &quot;Run As&quot; --&gt; &quot;Run Configuration&quot; on the project you want to export\r\n\r\n 2. Click &quot;Search&quot; for Eclipse to refresh the list of main class\r\n\r\n 3. Then export Runnable JAR file again, and everything goes smoothly.\r\n","title":"&quot;Could not find main method from given launch configuration&quot; when using Java+Scala+Slick2D","body":"<p>I just encountered the same problem, and here is how I solved it:</p>\n\n<ol>\n<li><p>Open \"Run As\" --> \"Run Configuration\" on the project you want to export</p></li>\n<li><p>Click \"Search\" for Eclipse to refresh the list of main class</p></li>\n<li><p>Then export Runnable JAR file again, and everything goes smoothly.</p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":9066963,"reputation":13,"user_id":6751461,"display_name":"Whitee"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1484736924,"creation_date":1484736924,"answer_id":41717520,"question_id":13527869,"body_markdown":"Well, got the same Problem and solved it by selecting my GUI to export and not the whole Project.","title":"&quot;Could not find main method from given launch configuration&quot; when using Java+Scala+Slick2D","body":"<p>Well, got the same Problem and solved it by selecting my GUI to export and not the whole Project.</p>\n"},{"tags":[],"owner":{"account_id":17941364,"reputation":111,"user_id":13036520,"display_name":"Prasad"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1592202813,"creation_date":1592202813,"answer_id":62382609,"question_id":13527869,"body_markdown":"The most easiest method is run the java file once and automatically the file appears in the list.Even i was facing the error but it was solved by using this simple method.","title":"&quot;Could not find main method from given launch configuration&quot; when using Java+Scala+Slick2D","body":"<p>The most easiest method is run the java file once and automatically the file appears in the list.Even i was facing the error but it was solved by using this simple method.</p>\n"},{"tags":[],"owner":{"account_id":1419682,"reputation":395,"user_id":1344572,"accept_rate":67,"display_name":"MarsaPalas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1597157333,"creation_date":1597157333,"answer_id":63360722,"question_id":13527869,"body_markdown":"I had this problem with Eclipse version 2019-03 (4.11.0) and compiler JaveSE-11. Choosing the right launch configuration and exporting runnable jar failed over and over again with an error\r\n\r\n&gt; Could not find main method from given launch configuration\r\n\r\nI&#39;ve tried to restart Eclipse and do a clean build, but it didn&#39;t help.\r\n\r\nIn the end, I found a workaround to go into the generated jar file (I&#39;ve used 7zip) and change META-INF/MANIFEST.MF file. The file should have something like this inside:\r\n\r\n    Manifest-Version: 1.0\r\n    Class-Path: .\r\n    Main-Class: &lt;package name&gt;.&lt;class name&gt;\r\n\r\nHope it helps someone.","title":"&quot;Could not find main method from given launch configuration&quot; when using Java+Scala+Slick2D","body":"<p>I had this problem with Eclipse version 2019-03 (4.11.0) and compiler JaveSE-11. Choosing the right launch configuration and exporting runnable jar failed over and over again with an error</p>\n<blockquote>\n<p>Could not find main method from given launch configuration</p>\n</blockquote>\n<p>I've tried to restart Eclipse and do a clean build, but it didn't help.</p>\n<p>In the end, I found a workaround to go into the generated jar file (I've used 7zip) and change META-INF/MANIFEST.MF file. The file should have something like this inside:</p>\n<pre><code>Manifest-Version: 1.0\nClass-Path: .\nMain-Class: &lt;package name&gt;.&lt;class name&gt;\n</code></pre>\n<p>Hope it helps someone.</p>\n"},{"tags":[],"owner":{"account_id":15083656,"reputation":11,"user_id":10885580,"display_name":"priya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1626787830,"creation_date":1626787830,"answer_id":68455774,"question_id":13527869,"body_markdown":"I faced the same issue and in my case I found that &quot;launch configuration&quot; was incorrect in Runnable Jar file specification dialog. Somehow, eclipse was automatically taking it. The &quot;Launch configuration&quot; should be java file which has main method. Basically, it is filename-package. \r\nThe moment I changed my &quot;launch configuration&quot;, I was able to create Jar file without any error.","title":"&quot;Could not find main method from given launch configuration&quot; when using Java+Scala+Slick2D","body":"<p>I faced the same issue and in my case I found that &quot;launch configuration&quot; was incorrect in Runnable Jar file specification dialog. Somehow, eclipse was automatically taking it. The &quot;Launch configuration&quot; should be java file which has main method. Basically, it is filename-package.\nThe moment I changed my &quot;launch configuration&quot;, I was able to create Jar file without any error.</p>\n"},{"tags":[],"owner":{"account_id":5543714,"reputation":1299,"user_id":4399219,"display_name":"Sachin Parse"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1630654286,"creation_date":1630654286,"answer_id":69041068,"question_id":13527869,"body_markdown":"I had the same issue. To overcome this issue, you need to close all opened files and open a single java class file that has the main() method. Then export it from eclipse and works fine.","title":"&quot;Could not find main method from given launch configuration&quot; when using Java+Scala+Slick2D","body":"<p>I had the same issue. To overcome this issue, you need to close all opened files and open a single java class file that has the main() method. Then export it from eclipse and works fine.</p>\n"},{"tags":[],"owner":{"account_id":24643503,"reputation":1,"user_id":18541434,"display_name":"pat44"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689169656,"creation_date":1689169656,"answer_id":76671296,"question_id":13527869,"body_markdown":"I had the same issue, on Java with Eclipse. After some wrong tests, I had a corrupted version of &#171; .classpath &#187; file.\r\nI restored an old version of &#171; .classpath &#187; file in root directory and that works !\r\n","title":"&quot;Could not find main method from given launch configuration&quot; when using Java+Scala+Slick2D","body":"<p>I had the same issue, on Java with Eclipse. After some wrong tests, I had a corrupted version of « .classpath » file.\nI restored an old version of « .classpath » file in root directory and that works !</p>\n"}],"owner":{"account_id":1347013,"reputation":2807,"user_id":1287554,"accept_rate":65,"display_name":"Plasty Grove"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35453,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":13529430,"answer_count":9,"score":10,"last_activity_date":1689169656,"creation_date":1353668984,"question_id":13527869,"body_markdown":"I&#39;ve got a project in which I&#39;m using Java+Scala+Slick2D.\r\n\r\nThe project itself runs well when launched from within eclipse. But when I try to make a jar file, it just refuses to work. Here&#39;s the error I keep getting when trying to export it as a Runnable jar:\r\n\r\n![enter image description here][1]\r\n\r\n\r\nAnd if I try to export into just a Jar file, it&#39;s unable to find the Main Class:\r\n\r\n![enter image description here][2]\r\n\r\nThere is, of course, a main class in game.TicTacGame. But it refuses to acknowledge it. I tried creating an executable with a simple Hello World project and it worked fine. It even detects the main class. Why is Eclipse not detecting the main class in this case?\r\n\r\nPS: I&#39;ve also tried extracting the .jar file created, editing the manifest.mf file to add the Main-Class: game.TicTacGame, enter two new lines and recreate the jar. Then it gives me a corrupted jar file error.\r\n\r\nI&#39;m at my wits end and would appreciate any help in this regard. I&#39;m using Windows 7 x64 with Eclipse Juno, Java 1.7 and Scala 2.10\r\n\r\nEdit: The Main class is in Java\r\n\r\n  [1]: http://i.stack.imgur.com/OdiNM.jpg\r\n  [2]: http://i.stack.imgur.com/EUoIq.jpg","title":"&quot;Could not find main method from given launch configuration&quot; when using Java+Scala+Slick2D","body":"<p>I've got a project in which I'm using Java+Scala+Slick2D.</p>\n\n<p>The project itself runs well when launched from within eclipse. But when I try to make a jar file, it just refuses to work. Here's the error I keep getting when trying to export it as a Runnable jar:</p>\n\n<p><img src=\"https://i.stack.imgur.com/OdiNM.jpg\" alt=\"enter image description here\"></p>\n\n<p>And if I try to export into just a Jar file, it's unable to find the Main Class:</p>\n\n<p><img src=\"https://i.stack.imgur.com/EUoIq.jpg\" alt=\"enter image description here\"></p>\n\n<p>There is, of course, a main class in game.TicTacGame. But it refuses to acknowledge it. I tried creating an executable with a simple Hello World project and it worked fine. It even detects the main class. Why is Eclipse not detecting the main class in this case?</p>\n\n<p>PS: I've also tried extracting the .jar file created, editing the manifest.mf file to add the Main-Class: game.TicTacGame, enter two new lines and recreate the jar. Then it gives me a corrupted jar file error.</p>\n\n<p>I'm at my wits end and would appreciate any help in this regard. I'm using Windows 7 x64 with Eclipse Juno, Java 1.7 and Scala 2.10</p>\n\n<p>Edit: The Main class is in Java</p>\n"},{"tags":["java","spring","scheduled-tasks","spring-scheduled"],"comments":[{"owner":{"account_id":2889245,"reputation":3533,"user_id":2478398,"display_name":"BeUndead"},"score":0,"creation_date":1538388232,"post_id":52588507,"comment_id":92112234,"body_markdown":"Do you need to track the `reportSchedule` (`String`s) _after_ they&#39;ve been processed?","body":"Do you need to track the <code>reportSchedule</code> (<code>String</code>s) <i>after</i> they&#39;ve been processed?"},{"owner":{"account_id":3306844,"reputation":1695,"user_id":2781389,"accept_rate":46,"display_name":"M06H"},"score":0,"creation_date":1538388662,"post_id":52588507,"comment_id":92112478,"body_markdown":"@user2478398 - nope","body":"@user2478398 - nope"},{"owner":{"account_id":1457199,"reputation":4503,"user_id":1629242,"accept_rate":56,"display_name":"Amogh"},"score":0,"creation_date":1538389352,"post_id":52588507,"comment_id":92112816,"body_markdown":"@M06H, i don&#39;t think there is built in event by `ThreadPoolTaskScheduler`, so all you can do is keep an counter variable and at the start of `run()` increment it and at last `decrement` it. Check if it&#39;s 0 and do DB entry if condition satisfies.","body":"@M06H, i don&#39;t think there is built in event by <code>ThreadPoolTaskScheduler</code>, so all you can do is keep an counter variable and at the start of <code>run()</code> increment it and at last <code>decrement</code> it. Check if it&#39;s 0 and do DB entry if condition satisfies."}],"answers":[{"tags":[],"owner":{"account_id":2889245,"reputation":3533,"user_id":2478398,"display_name":"BeUndead"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1538426791,"creation_date":1538390189,"answer_id":52589295,"question_id":52588507,"body_markdown":"Since you don&#39;t need to track the `reportSchedules`, I&#39;d be tempted to do something like:\r\n\r\n* Move to use a `Queue` so that the `String`s are removed when you `poll`.\r\n* Track the number of tasks that you submit. (*)\r\n* Add a custom `ApplicationEvent` type of `ReportScheduleProcessedEvent` (or similar) and publish one of these (to Spring&#39;s `ApplicationEventPublisher`) at the end of the `ReportTask`&#39;s `run` method.\r\n* Add a new `ApplicationListener` for this type, which waits until it has received as many events as you tracked in (*); and then publishes something to the database.\r\n\r\nI&#39;m afraid I haven&#39;t provided any code here, since you might or might not need to care about thread-safety at a bunch of points above, and handling this appropriately might not be trivial.\r\n\r\n---\r\nEdit; per comment asking for a sample.  I&#39;ll assume you&#39;re using at least spring 4.3.\r\n\r\nEdit Edit: per more comments.\r\n\r\n    abstract class ReportScheduleEvent extends ApplicationEvent { ... }\r\n\r\n    public class IncomingReportCompletionEvent\r\n            extends ReportScheduleEvent {\r\n        \r\n        private final int eventsToExpect;\r\n        // ...\r\n    }\r\n\r\n    public class ReportCompletionEvent extends ReportSchedulingEvent {\r\n        // ...\r\n    }\r\n\r\n    public class YourListener\r\n        implements ApplicationListener&lt;ReportSchedulingEvent&gt; {\r\n        \r\n        private final DatabaseWriter dbWriter;\r\n        private volatile int expectedEvents = 0;\r\n\r\n        public void onApplicationEvent(final ReportSchedulingEvent event) {\r\n            if (event instanceof IncomingReportCompletionEvent) {\r\n                this.expectedEvents = \r\n                        ((IncomingReportCompletionEvent) event)\r\n                        .getExpectedEventCount();\r\n            } else {\r\n                this.expectedEvents--;\r\n                if (this.expectedEvents == 0) {\r\n                    this.dbWriter.doYourThing();\r\n                }\r\n            }\r\n        }\r\n    }","title":"Notifying on all completed schedules with sprring","body":"<p>Since you don't need to track the <code>reportSchedules</code>, I'd be tempted to do something like:</p>\n\n<ul>\n<li>Move to use a <code>Queue</code> so that the <code>String</code>s are removed when you <code>poll</code>.</li>\n<li>Track the number of tasks that you submit. (*)</li>\n<li>Add a custom <code>ApplicationEvent</code> type of <code>ReportScheduleProcessedEvent</code> (or similar) and publish one of these (to Spring's <code>ApplicationEventPublisher</code>) at the end of the <code>ReportTask</code>'s <code>run</code> method.</li>\n<li>Add a new <code>ApplicationListener</code> for this type, which waits until it has received as many events as you tracked in (*); and then publishes something to the database.</li>\n</ul>\n\n<p>I'm afraid I haven't provided any code here, since you might or might not need to care about thread-safety at a bunch of points above, and handling this appropriately might not be trivial.</p>\n\n<hr>\n\n<p>Edit; per comment asking for a sample.  I'll assume you're using at least spring 4.3.</p>\n\n<p>Edit Edit: per more comments.</p>\n\n<pre><code>abstract class ReportScheduleEvent extends ApplicationEvent { ... }\n\npublic class IncomingReportCompletionEvent\n        extends ReportScheduleEvent {\n\n    private final int eventsToExpect;\n    // ...\n}\n\npublic class ReportCompletionEvent extends ReportSchedulingEvent {\n    // ...\n}\n\npublic class YourListener\n    implements ApplicationListener&lt;ReportSchedulingEvent&gt; {\n\n    private final DatabaseWriter dbWriter;\n    private volatile int expectedEvents = 0;\n\n    public void onApplicationEvent(final ReportSchedulingEvent event) {\n        if (event instanceof IncomingReportCompletionEvent) {\n            this.expectedEvents = \n                    ((IncomingReportCompletionEvent) event)\n                    .getExpectedEventCount();\n        } else {\n            this.expectedEvents--;\n            if (this.expectedEvents == 0) {\n                this.dbWriter.doYourThing();\n            }\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":3306844,"reputation":1695,"user_id":2781389,"accept_rate":46,"display_name":"M06H"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":401,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689169474,"creation_date":1538387476,"question_id":52588507,"body_markdown":"I have a Java, Spring application where I schedule some report jobs. The component looks like this:\r\n\r\n    @Component\r\n    public class RegisterReportSchedules implements ApplicationListener&lt;ContextRefreshedEvent&gt; {\r\n    \r\n        @Autowired\r\n        private ThreadPoolTaskScheduler ts;\r\n    \t\r\n        private List&lt;String&gt; reportSchedules; //contains list of report schedules\r\n    \t\r\n    \t@Autowired\r\n        private SomeTask sometask;\r\n    \t\r\n    \t\r\n    \t@Override\r\n        public void onApplicationEvent(ContextRefreshedEvent contextRefreshedEvent) {\r\n    \r\n                    reportSchedules.forEach((String schedule) -&gt; {\r\n                        ReportSchedule reportSchedule = new ReportSchedule(schedule,\r\n                                propertiesUtil.getProperty(schedule + &quot;.&quot; + Constants.CRON));\r\n    \t\t\t\t\t\t\t\r\n                            ts.schedule(new ReportTask(reportSchedule),\r\n                                    new CronTrigger(reportSchedule.getCronExpression()));\r\n                        });\r\n                   \r\n            }\r\n    \t\t\r\n    \t\t\r\n    \t\tclass ReportTask implements Runnable {\r\n    \r\n            private ReportSchedule schedule;\r\n    \r\n            public ReportTask(ReportSchedule schedule) {\r\n                this.schedule = schedule;\r\n            }\r\n    \r\n            @Override\r\n            public void run() {\r\n                sometask.process(schedule);\r\n            }\r\n        }\r\n    \r\n    }\r\n\r\n\r\nSay I have 5 `reportSchedules` to process. After all 5 `ReportTasks` have been completed, I need to write into a db table one entry to say all report task completed. \r\n\r\nBut how can I track this information about each report schedule is completed in my application? \r\n\r\nDo I need to write to database table for each schedule completed or is there a better alternative within `Spring` that will trigger a notification event of some sort which I can then use to write the `ALL COMPLETED` event to the table? Appreciate if some answers with examples are given. ","title":"Notifying on all completed schedules with sprring","body":"<p>I have a Java, Spring application where I schedule some report jobs. The component looks like this:</p>\n\n<pre><code>@Component\npublic class RegisterReportSchedules implements ApplicationListener&lt;ContextRefreshedEvent&gt; {\n\n    @Autowired\n    private ThreadPoolTaskScheduler ts;\n\n    private List&lt;String&gt; reportSchedules; //contains list of report schedules\n\n    @Autowired\n    private SomeTask sometask;\n\n\n    @Override\n    public void onApplicationEvent(ContextRefreshedEvent contextRefreshedEvent) {\n\n                reportSchedules.forEach((String schedule) -&gt; {\n                    ReportSchedule reportSchedule = new ReportSchedule(schedule,\n                            propertiesUtil.getProperty(schedule + \".\" + Constants.CRON));\n\n                        ts.schedule(new ReportTask(reportSchedule),\n                                new CronTrigger(reportSchedule.getCronExpression()));\n                    });\n\n        }\n\n\n        class ReportTask implements Runnable {\n\n        private ReportSchedule schedule;\n\n        public ReportTask(ReportSchedule schedule) {\n            this.schedule = schedule;\n        }\n\n        @Override\n        public void run() {\n            sometask.process(schedule);\n        }\n    }\n\n}\n</code></pre>\n\n<p>Say I have 5 <code>reportSchedules</code> to process. After all 5 <code>ReportTasks</code> have been completed, I need to write into a db table one entry to say all report task completed. </p>\n\n<p>But how can I track this information about each report schedule is completed in my application? </p>\n\n<p>Do I need to write to database table for each schedule completed or is there a better alternative within <code>Spring</code> that will trigger a notification event of some sort which I can then use to write the <code>ALL COMPLETED</code> event to the table? Appreciate if some answers with examples are given. </p>\n"},{"tags":["java","spring-boot","hibernate","jpa"],"answers":[{"tags":[],"owner":{"account_id":22394789,"reputation":1382,"user_id":16606223,"display_name":"Yahor Barkouski"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689169275,"creation_date":1689169275,"answer_id":76671242,"question_id":76670905,"body_markdown":"You need to provide a custom connection to Hibernate&#39;s session as well:\r\n```java\r\nSession session = sessionFactory.openSession();\r\nsession.doWork(new Work() {\r\n    @Override\r\n    public void execute(Connection connection) throws SQLException {\r\n        // access to the connection here\r\n        try (PreparedStatement stmt = connection.prepareStatement(userSQL)) {\r\n            // use the statement\r\n            stmt.executeUpdate();\r\n            // set other properties and do whatever you want\r\n        }\r\n    }\r\n});\r\nsession.close();\r\n```\r\n\r\nBut please note that this way bypasses Hibernate&#39;s caching and object management mechanisms, so should only be used for specific use cases where you really need a fine-grained control","title":"Force Hibernate to use own connection","body":"<p>You need to provide a custom connection to Hibernate's session as well:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Session session = sessionFactory.openSession();\nsession.doWork(new Work() {\n    @Override\n    public void execute(Connection connection) throws SQLException {\n        // access to the connection here\n        try (PreparedStatement stmt = connection.prepareStatement(userSQL)) {\n            // use the statement\n            stmt.executeUpdate();\n            // set other properties and do whatever you want\n        }\n    }\n});\nsession.close();\n</code></pre>\n<p>But please note that this way bypasses Hibernate's caching and object management mechanisms, so should only be used for specific use cases where you really need a fine-grained control</p>\n"}],"owner":{"account_id":10334390,"reputation":31,"user_id":7623075,"display_name":"DigitalMachine"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1689169275,"creation_date":1689167134,"question_id":76670905,"body_markdown":"In our application we use Oracle and have some audit-relevant tables. \r\n\r\nEvery data changing action on them (but only on them!) must be accompanied by some audit entries in another tables. This is done by setting connection properties, so triggers can automatically update them. Please refrain from discussion if this is a good way or not. It is defined like this by the customer and we have to stay with it.\r\n\r\nUnfortunately those properties are user-dependent, so we cannot set them generally for every connection, but only for user who is doing update. Also, those properties changes during the day / even sometimes for every request, but unfortunately those properties  are not changeable in Oracle after connection is established. Usage of user pool is therefore neither possible.\r\n\r\nOur current idea is not to use Hibernate connection pool here, but create own connections. After operation for those tables is requested by user, the backend creates a new connection, fills properties as required, executes user updates closes the connection.\r\n\r\nCurrent code is:\r\n\r\n    Properties props = new Properties();\r\n    ...setproperties...\r\n    Connection con = DriverManager.getConnection(connectionString, props);\r\n    PreparedStatement stmt = con.prepareStatement(userSQL);\r\n    con.executeUpdate();\r\n    ... clean up and close connection\r\n\r\n\r\nHowever, we can only execute now regular (prepared) statements, but cannot use Hibernate Repository mechanics anymore, what is not nice.\r\n\r\nIs there any way to provide this connection to Hibernate, so we can force a repository.save() exactly on this particular connection we created? However, this connection cannot stay in Hibernate Pool for the further, it must be immediately again closed. So we would need a mechanism like \r\n\r\n    create a connection\r\n    hibernate uses it for repository update\r\n    connection is forcibly closed.\r\n\r\nIs it somehow possible?\r\n\r\n\r\n\r\n\r\n","title":"Force Hibernate to use own connection","body":"<p>In our application we use Oracle and have some audit-relevant tables.</p>\n<p>Every data changing action on them (but only on them!) must be accompanied by some audit entries in another tables. This is done by setting connection properties, so triggers can automatically update them. Please refrain from discussion if this is a good way or not. It is defined like this by the customer and we have to stay with it.</p>\n<p>Unfortunately those properties are user-dependent, so we cannot set them generally for every connection, but only for user who is doing update. Also, those properties changes during the day / even sometimes for every request, but unfortunately those properties  are not changeable in Oracle after connection is established. Usage of user pool is therefore neither possible.</p>\n<p>Our current idea is not to use Hibernate connection pool here, but create own connections. After operation for those tables is requested by user, the backend creates a new connection, fills properties as required, executes user updates closes the connection.</p>\n<p>Current code is:</p>\n<pre><code>Properties props = new Properties();\n...setproperties...\nConnection con = DriverManager.getConnection(connectionString, props);\nPreparedStatement stmt = con.prepareStatement(userSQL);\ncon.executeUpdate();\n... clean up and close connection\n</code></pre>\n<p>However, we can only execute now regular (prepared) statements, but cannot use Hibernate Repository mechanics anymore, what is not nice.</p>\n<p>Is there any way to provide this connection to Hibernate, so we can force a repository.save() exactly on this particular connection we created? However, this connection cannot stay in Hibernate Pool for the further, it must be immediately again closed. So we would need a mechanism like</p>\n<pre><code>create a connection\nhibernate uses it for repository update\nconnection is forcibly closed.\n</code></pre>\n<p>Is it somehow possible?</p>\n"},{"tags":["java","android","ant","jar","android-uiautomator"],"comments":[{"owner":{"account_id":935833,"reputation":2281,"user_id":964772,"accept_rate":61,"display_name":"Rilwan"},"score":0,"creation_date":1443402130,"post_id":32200292,"comment_id":53465337,"body_markdown":"what is you class name, package name ?","body":"what is you class name, package name ?"},{"owner":{"account_id":140645,"reputation":493,"user_id":347119,"accept_rate":33,"display_name":"Edison Spencer"},"score":0,"creation_date":1443436908,"post_id":32200292,"comment_id":53477600,"body_markdown":"Hi @Rilwan, the class name was &quot;ScreenshotRoutine&quot;, and the package name &quot;test&quot;. The folders structure is in the original post, 3rd grayed out area code.","body":"Hi @Rilwan, the class name was &quot;ScreenshotRoutine&quot;, and the package name &quot;test&quot;. The folders structure is in the original post, 3rd grayed out area code."},{"owner":{"account_id":935833,"reputation":2281,"user_id":964772,"accept_rate":61,"display_name":"Rilwan"},"score":0,"creation_date":1443443028,"post_id":32200292,"comment_id":53481159,"body_markdown":"so inside the class ScreenshotRoutine, which method you want to run ? is the method starts with &quot;test&quot; ? if you want to run a specific method inside class ScreenshotRoutine, pls try `adb shell uiautomator runtest AutoScreenshot.jar -c test.ScreenshotRoutine#methodname`.","body":"so inside the class ScreenshotRoutine, which method you want to run ? is the method starts with &quot;test&quot; ? if you want to run a specific method inside class ScreenshotRoutine, pls try <code>adb shell uiautomator runtest AutoScreenshot.jar -c test.ScreenshotRoutine#methodname</code>."},{"owner":{"account_id":140645,"reputation":493,"user_id":347119,"accept_rate":33,"display_name":"Edison Spencer"},"score":0,"creation_date":1443522478,"post_id":32200292,"comment_id":53517602,"body_markdown":"It was intended to run a method called `runRoutine()`, which was annotated with the `@Test` annotation. Is the annotation not relevant? Should I make is explicit which method to run when calling the `adb shell uiautomator`?","body":"It was intended to run a method called <code>runRoutine()</code>, which was annotated with the <code>@Test</code> annotation. Is the annotation not relevant? Should I make is explicit which method to run when calling the <code>adb shell uiautomator</code>?"},{"owner":{"account_id":140645,"reputation":493,"user_id":347119,"accept_rate":33,"display_name":"Edison Spencer"},"score":0,"creation_date":1443524280,"post_id":32200292,"comment_id":53518600,"body_markdown":"@Rilwan, even executing `adb shell uiautomator runtest AutoScreenshot.jar -c test.ScreenshotRoutine#runRoutine`, it gives me the error in the 2nd grayed out area code of the original post :(","body":"@Rilwan, even executing <code>adb shell uiautomator runtest AutoScreenshot.jar -c test.ScreenshotRoutine#runRoutine</code>, it gives me the error in the 2nd grayed out area code of the original post :("},{"owner":{"account_id":935833,"reputation":2281,"user_id":964772,"accept_rate":61,"display_name":"Rilwan"},"score":0,"creation_date":1443588458,"post_id":32200292,"comment_id":53549317,"body_markdown":"Something is wrong that is sure,because it works for everyone. Just to double conform- you tried &quot;ant clean build&quot;, and pushed jar file correctly to /data/local/tmp/. ?","body":"Something is wrong that is sure,because it works for everyone. Just to double conform- you tried &quot;ant clean build&quot;, and pushed jar file correctly to /data/local/tmp/. ?"},{"owner":{"account_id":140645,"reputation":493,"user_id":347119,"accept_rate":33,"display_name":"Edison Spencer"},"score":0,"creation_date":1443606155,"post_id":32200292,"comment_id":53558175,"body_markdown":"@Rilwan, just edited my original post in order to include the content of the batch file I am using in order to compile and upload the jar file to the device.","body":"@Rilwan, just edited my original post in order to include the content of the batch file I am using in order to compile and upload the jar file to the device."},{"owner":{"account_id":935833,"reputation":2281,"user_id":964772,"accept_rate":61,"display_name":"Rilwan"},"score":0,"creation_date":1444215390,"post_id":32200292,"comment_id":53805164,"body_markdown":"just wonder-.  how did you add uiautomator.jar file ? Eclipse&gt;Libraries&gt;Add External jars&gt;path_to_uiautomator.jar .","body":"just wonder-.  how did you add uiautomator.jar file ? Eclipse&gt;Libraries&gt;Add External jars&gt;path_to_uiautomator.jar ."},{"owner":{"account_id":140645,"reputation":493,"user_id":347119,"accept_rate":33,"display_name":"Edison Spencer"},"score":0,"creation_date":1444234484,"post_id":32200292,"comment_id":53819433,"body_markdown":"Hi @Rilwan, as a matter of fact, I copied the uiautomator.jar to a libs folder within the project and added it as an external jar yes. Currently, since the project have been exported to Android Studio, I was trying to perform the tests using espresso, but I&#39;ve been having other issues. I think I should begin to try out and test on a personal project I am about to start.","body":"Hi @Rilwan, as a matter of fact, I copied the uiautomator.jar to a libs folder within the project and added it as an external jar yes. Currently, since the project have been exported to Android Studio, I was trying to perform the tests using espresso, but I&#39;ve been having other issues. I think I should begin to try out and test on a personal project I am about to start."},{"owner":{"account_id":935833,"reputation":2281,"user_id":964772,"accept_rate":61,"display_name":"Rilwan"},"score":0,"creation_date":1444272444,"post_id":32200292,"comment_id":53836114,"body_markdown":"i see.. Please update here too if you succeed. just wonder what is the problem in your project.","body":"i see.. Please update here too if you succeed. just wonder what is the problem in your project."},{"owner":{"account_id":9799671,"reputation":1,"user_id":7261405,"display_name":"renferliu"},"score":0,"creation_date":1481102979,"post_id":32200292,"comment_id":69237829,"body_markdown":"must be the “test.ScreenshotRoutine#runRoutine ” was wrong with you test project.I has been meet the same","body":"must be the “test.ScreenshotRoutine#runRoutine ” was wrong with you test project.I has been meet the same"}],"owner":{"account_id":140645,"reputation":493,"user_id":347119,"accept_rate":33,"display_name":"Edison Spencer"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1462,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689169136,"creation_date":1440494820,"question_id":32200292,"body_markdown":"I am currently developing a Java project in order to perform automatic screenshots of my Android application, however, when performing the uiautomator command:\r\n\r\n    adb shell uiautomator runtest AutoScreenshot.jar -c test.ScreenshotRoutine\r\n\r\nI am getting the following error:\r\n\r\n    INSTRUMENTATION_RESULT: shortMsg=java.lang.RuntimeException\r\n    INSTRUMENTATION_RESULT: longMsg=Didn&#39;t find class &quot;test.ScreenshotRoutine&quot; on pa\r\n    th: DexPathList[[zip file &quot;/system/framework/android.test.runner.jar&quot;, zip file\r\n    &quot;/system/framework/uiautomator.jar&quot;, zip file &quot;/data/local/tmp/AutoSc\r\n    reenshot.jar&quot;],nativeLibraryDirectories=[/system/lib]]\r\n    INSTRUMENTATION_CODE: 0\r\n\r\nI have already searched everywhere and lost around 1 day around this issue. It seems that the answers around these kind of questions are over 1 year old and none of the solutions have worked for me.\r\nI have followed the examples found [here][1] and [here][2], and changed the project slightly and have the following project structure:\r\n\r\n    src\r\n     |- test\r\n       |- &lt;class extending UiAutomatorTestCase&gt;\r\n       |- interfaces\r\n       |- routines\r\n       |- utils\r\n\r\nMy ANT file for generating the JAR file is the following:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project name=&quot;AutoScreenshot.makejar&quot; basedir=&quot;.&quot;&gt;\r\n        &lt;property name=&quot;src.dir&quot; value=&quot;src&quot;/&gt;\r\n        &lt;property name=&quot;libs.dir&quot; value=&quot;libs&quot;/&gt;\r\n        &lt;property name=&quot;root.dir&quot; value=&quot;build&quot;/&gt;\r\n        &lt;property name=&quot;jar.dir&quot; value=&quot;${root.dir}/jar&quot;/&gt;\r\n        &lt;property name=&quot;jar.file&quot; value=&quot;${jar.dir}/AutoScreenshot.jar&quot;/&gt;\r\n        &lt;property name=&quot;classes.dir&quot; value=&quot;${root.dir}/classes&quot;/&gt;\r\n        \r\n    \t&lt;path id=&quot;jars-classpath&quot;&gt;\r\n    \t\t&lt;fileset dir=&quot;${libs.dir}&quot;&gt;\r\n    \t\t\t&lt;include name=&quot;*.jar&quot;/&gt;\r\n    \t\t&lt;/fileset&gt;\r\n    \t&lt;/path&gt;\r\n        \r\n        &lt;target name=&quot;clean&quot;&gt;\r\n            &lt;delete dir=&quot;${root.dir}&quot;/&gt;\r\n        &lt;/target&gt;\r\n    \r\n        &lt;target name=&quot;compile&quot;&gt;\r\n            &lt;mkdir dir=&quot;${classes.dir}&quot;/&gt;\r\n            &lt;mkdir dir=&quot;${jar.dir}&quot;/&gt;\r\n            \r\n            &lt;javac srcdir=&quot;${src.dir}&quot; destdir=&quot;${classes.dir}&quot; target=&quot;1.8&quot; includeantruntime=&quot;false&quot;&gt;\r\n    \t\t\t&lt;classpath refid=&quot;jars-classpath&quot;/&gt;\r\n            &lt;/javac&gt;\r\n    \t\t&lt;jar jarfile=&quot;${jar.file}&quot; basedir=&quot;${classes.dir}&quot;&gt;\r\n    \t\t    &lt;fileset dir=&quot;${libs.dir}&quot; includes=&quot;**/*.jar&quot; /&gt;\r\n    \t\t\t&lt;fileset dir=&quot;${classes.dir}&quot; includes=&quot;**/*.class&quot; /&gt;\r\n    \t\t&lt;/jar&gt;\r\n        &lt;/target&gt;\r\n    &lt;/project&gt;\r\n\r\nInside my Java project, I have created a &#180;libs&#180; folder which holds:\r\n\r\n - android.jar;\r\n - junit.jar;\r\n - uiautomator.jar.\r\n\r\nAm I missing something, where am I missing it?\r\nIf you need any other file you consider relevant, please feel free to ask.\r\n\r\n***UPDATE #1 - Add batch file content***\r\n\r\nHere is what I have in the batch file I&#39;ve done in order to compile and upload the jar file\r\n\r\n    @echo off\r\n    echo CLEANING PROJECT\r\n    call ant clean\r\n    \r\n    echo COMPILING JAR FILE\r\n    call ant compile\r\n    \r\n    echo PUSHING JAR FILE TO DEVICE\r\n    call adb push &quot;D:\\Workspaces\\...\\build\\jar\\AutoScreenshot.jar&quot; /data/local/tmp/\r\n    \r\n    echo EXECUTING JAR FILE ON DEVICE\r\n    call adb shell uiautomator runtest /data/local/tmp/AutoScreenshot.jar -c test.ScreenshotRoutine#runRoutine -e lang en\r\n\r\n***Many thanks in advance.***\r\n\r\n  [1]: https://looksok.wordpress.com/2014/02/08/uiautomator-in-eclipse/\r\n  [2]: http://university.utest.com/android-ui-testing-uiautomatorviewer-and-uiautomator/","title":"Uiautomator Didn&#39;t find class &lt;class&gt; on path DexPathList","body":"<p>I am currently developing a Java project in order to perform automatic screenshots of my Android application, however, when performing the uiautomator command:</p>\n\n<pre><code>adb shell uiautomator runtest AutoScreenshot.jar -c test.ScreenshotRoutine\n</code></pre>\n\n<p>I am getting the following error:</p>\n\n<pre><code>INSTRUMENTATION_RESULT: shortMsg=java.lang.RuntimeException\nINSTRUMENTATION_RESULT: longMsg=Didn't find class \"test.ScreenshotRoutine\" on pa\nth: DexPathList[[zip file \"/system/framework/android.test.runner.jar\", zip file\n\"/system/framework/uiautomator.jar\", zip file \"/data/local/tmp/AutoSc\nreenshot.jar\"],nativeLibraryDirectories=[/system/lib]]\nINSTRUMENTATION_CODE: 0\n</code></pre>\n\n<p>I have already searched everywhere and lost around 1 day around this issue. It seems that the answers around these kind of questions are over 1 year old and none of the solutions have worked for me.\nI have followed the examples found <a href=\"https://looksok.wordpress.com/2014/02/08/uiautomator-in-eclipse/\" rel=\"nofollow\">here</a> and <a href=\"http://university.utest.com/android-ui-testing-uiautomatorviewer-and-uiautomator/\" rel=\"nofollow\">here</a>, and changed the project slightly and have the following project structure:</p>\n\n<pre><code>src\n |- test\n   |- &lt;class extending UiAutomatorTestCase&gt;\n   |- interfaces\n   |- routines\n   |- utils\n</code></pre>\n\n<p>My ANT file for generating the JAR file is the following:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project name=\"AutoScreenshot.makejar\" basedir=\".\"&gt;\n    &lt;property name=\"src.dir\" value=\"src\"/&gt;\n    &lt;property name=\"libs.dir\" value=\"libs\"/&gt;\n    &lt;property name=\"root.dir\" value=\"build\"/&gt;\n    &lt;property name=\"jar.dir\" value=\"${root.dir}/jar\"/&gt;\n    &lt;property name=\"jar.file\" value=\"${jar.dir}/AutoScreenshot.jar\"/&gt;\n    &lt;property name=\"classes.dir\" value=\"${root.dir}/classes\"/&gt;\n\n    &lt;path id=\"jars-classpath\"&gt;\n        &lt;fileset dir=\"${libs.dir}\"&gt;\n            &lt;include name=\"*.jar\"/&gt;\n        &lt;/fileset&gt;\n    &lt;/path&gt;\n\n    &lt;target name=\"clean\"&gt;\n        &lt;delete dir=\"${root.dir}\"/&gt;\n    &lt;/target&gt;\n\n    &lt;target name=\"compile\"&gt;\n        &lt;mkdir dir=\"${classes.dir}\"/&gt;\n        &lt;mkdir dir=\"${jar.dir}\"/&gt;\n\n        &lt;javac srcdir=\"${src.dir}\" destdir=\"${classes.dir}\" target=\"1.8\" includeantruntime=\"false\"&gt;\n            &lt;classpath refid=\"jars-classpath\"/&gt;\n        &lt;/javac&gt;\n        &lt;jar jarfile=\"${jar.file}\" basedir=\"${classes.dir}\"&gt;\n            &lt;fileset dir=\"${libs.dir}\" includes=\"**/*.jar\" /&gt;\n            &lt;fileset dir=\"${classes.dir}\" includes=\"**/*.class\" /&gt;\n        &lt;/jar&gt;\n    &lt;/target&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>Inside my Java project, I have created a ´libs´ folder which holds:</p>\n\n<ul>\n<li>android.jar;</li>\n<li>junit.jar;</li>\n<li>uiautomator.jar.</li>\n</ul>\n\n<p>Am I missing something, where am I missing it?\nIf you need any other file you consider relevant, please feel free to ask.</p>\n\n<p><strong><em>UPDATE #1 - Add batch file content</em></strong></p>\n\n<p>Here is what I have in the batch file I've done in order to compile and upload the jar file</p>\n\n<pre><code>@echo off\necho CLEANING PROJECT\ncall ant clean\n\necho COMPILING JAR FILE\ncall ant compile\n\necho PUSHING JAR FILE TO DEVICE\ncall adb push \"D:\\Workspaces\\...\\build\\jar\\AutoScreenshot.jar\" /data/local/tmp/\n\necho EXECUTING JAR FILE ON DEVICE\ncall adb shell uiautomator runtest /data/local/tmp/AutoScreenshot.jar -c test.ScreenshotRoutine#runRoutine -e lang en\n</code></pre>\n\n<p><strong><em>Many thanks in advance.</em></strong></p>\n"},{"tags":["java","android","android-studio","compatibility"],"comments":[{"owner":{"account_id":8307612,"reputation":1313,"user_id":6244038,"accept_rate":0,"display_name":"Insou"},"score":0,"creation_date":1688732610,"post_id":76628527,"comment_id":135116995,"body_markdown":"Has anyone ever had this problem ? :(","body":"Has anyone ever had this problem ? :("}],"answers":[{"tags":[],"owner":{"account_id":8307612,"reputation":1313,"user_id":6244038,"accept_rate":0,"display_name":"Insou"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689169097,"creation_date":1689169097,"answer_id":76671213,"question_id":76628527,"body_markdown":"Ok, i solved my problem !\r\n\r\nMy code before :\r\n\r\n    Intent intent = new Intent(mContext, GeofenceTransitionsIntentService.class);\r\n    mGeofencePendingIntent = PendingIntent.getService(mContext, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);\r\n\r\nThe FLAG_UPDATE_CURRENT was the problem with Android 12+\r\n\r\nI solved my problem like this : \r\n\r\n\r\n    if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.S) {\r\n         mGeofencePendingIntent = PendingIntent.getService(mContext, 0, intent, PendingIntent.FLAG_MUTABLE);\r\n    }\r\n    else{\r\n         mGeofencePendingIntent = PendingIntent.getService(mContext, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);\r\n    }","title":"Android Studio, problem with compatibility ? (Android &gt; 10)","body":"<p>Ok, i solved my problem !</p>\n<p>My code before :</p>\n<pre><code>Intent intent = new Intent(mContext, GeofenceTransitionsIntentService.class);\nmGeofencePendingIntent = PendingIntent.getService(mContext, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);\n</code></pre>\n<p>The FLAG_UPDATE_CURRENT was the problem with Android 12+</p>\n<p>I solved my problem like this :</p>\n<pre><code>if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.S) {\n     mGeofencePendingIntent = PendingIntent.getService(mContext, 0, intent, PendingIntent.FLAG_MUTABLE);\n}\nelse{\n     mGeofencePendingIntent = PendingIntent.getService(mContext, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);\n}\n</code></pre>\n"}],"owner":{"account_id":8307612,"reputation":1313,"user_id":6244038,"accept_rate":0,"display_name":"Insou"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689169097,"creation_date":1688644160,"question_id":76628527,"body_markdown":"New day, new problem..\r\n\r\nI&#39;ll try to explain my problem clearly.\r\n\r\nI tested my application on Android 10 (API 29) and everything works fine.\r\n\r\nI&#39;m testing the **same app on Android 13 (API 33)** and I have problems transitioning between the different pages of my app.\r\n\r\nMy app launches fine, I manage to log in (there&#39;s a login system) and I arrive on &quot;Home&quot;.\r\n\r\nWhen I click to navigate in my app, it crashes.\r\n\r\n    java.lang.RuntimeException: Unable to start activity ComponentInfo (...) \r\n    Attempt to invoke virtual method &#39;java.lang.Integer fr.xxx.yyy.models.Configuration.Societe.getIdSociete()&#39; on a null object reference\r\n\r\nThe problem line : \r\n\r\n    String IdSociete = AppConfig.getInstance().company.getIdSociete().toString();\r\n\r\nTo explain, after a user logs in, I retrieve json information, including some about the company, which I store in a model.\r\n\r\nAfter log in, I display the **IdSociete** value directly to make sure it&#39;s actually stored.\r\n\r\nIn this place (after the log in) : It is !\r\n\r\nMy question is : Why is it that when I want to retrieve the same value in the same way, in another place in the code, it can&#39;t find the reference ?\r\n\r\nWhy do I only have this problem on Android versions &gt; 10 ?\r\n\r\nThanks for your help :)","title":"Android Studio, problem with compatibility ? (Android &gt; 10)","body":"<p>New day, new problem..</p>\n<p>I'll try to explain my problem clearly.</p>\n<p>I tested my application on Android 10 (API 29) and everything works fine.</p>\n<p>I'm testing the <strong>same app on Android 13 (API 33)</strong> and I have problems transitioning between the different pages of my app.</p>\n<p>My app launches fine, I manage to log in (there's a login system) and I arrive on &quot;Home&quot;.</p>\n<p>When I click to navigate in my app, it crashes.</p>\n<pre><code>java.lang.RuntimeException: Unable to start activity ComponentInfo (...) \nAttempt to invoke virtual method 'java.lang.Integer fr.xxx.yyy.models.Configuration.Societe.getIdSociete()' on a null object reference\n</code></pre>\n<p>The problem line :</p>\n<pre><code>String IdSociete = AppConfig.getInstance().company.getIdSociete().toString();\n</code></pre>\n<p>To explain, after a user logs in, I retrieve json information, including some about the company, which I store in a model.</p>\n<p>After log in, I display the <strong>IdSociete</strong> value directly to make sure it's actually stored.</p>\n<p>In this place (after the log in) : It is !</p>\n<p>My question is : Why is it that when I want to retrieve the same value in the same way, in another place in the code, it can't find the reference ?</p>\n<p>Why do I only have this problem on Android versions &gt; 10 ?</p>\n<p>Thanks for your help :)</p>\n"},{"tags":["java","spring-resttemplate","apache-httpclient-5.x"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1689169320,"post_id":76669590,"comment_id":135175442,"body_markdown":"What does happen? Does it go into the if branches? Isn&#39;t it possible to use the sample on the Apache HttpClient website? Or don&#39;t use the `HttpClient` directly and use the `BasicAuthInterceptor` for the `RestTemplate` to set the header.","body":"What does happen? Does it go into the if branches? Isn&#39;t it possible to use the sample on the Apache HttpClient website? Or don&#39;t use the <code>HttpClient</code> directly and use the <code>BasicAuthInterceptor</code> for the <code>RestTemplate</code> to set the header."},{"owner":{"account_id":1464652,"reputation":12323,"user_id":1377895,"accept_rate":100,"display_name":"Roman Vottner"},"score":0,"creation_date":1689169885,"post_id":76669590,"comment_id":135175614,"body_markdown":"[This sample here](https://www.springcloud.io/post/2022-08/httpclient5/#gsc.tab=0) sets a `request-id` header before performing the actual request via request interceptors. Replacing `request-id` with `Authorization` and the long value with the actual basic-auth authorization string shouldn&#39;t be to difficult I guess. Not sure though if there might be any further hurdles using HttpClient 5.2.","body":"<a href=\"https://www.springcloud.io/post/2022-08/httpclient5/#gsc.tab=0\" rel=\"nofollow noreferrer\">This sample here</a> sets a <code>request-id</code> header before performing the actual request via request interceptors. Replacing <code>request-id</code> with <code>Authorization</code> and the long value with the actual basic-auth authorization string shouldn&#39;t be to difficult I guess. Not sure though if there might be any further hurdles using HttpClient 5.2."},{"owner":{"account_id":2050027,"reputation":127,"user_id":1829230,"accept_rate":33,"display_name":"dascolagi"},"score":0,"creation_date":1689171367,"post_id":76669590,"comment_id":135176017,"body_markdown":"@M.Deinum yeah it goes into the if branches. If a inspect the httpClientCOntext instance at the end of the process method, it seems to have everything it needs. The authExchange with basicScheme is there, host and credentials seem OK, still doesn&#39;t work. The Authorization header is not there for the first request.","body":"@M.Deinum yeah it goes into the if branches. If a inspect the httpClientCOntext instance at the end of the process method, it seems to have everything it needs. The authExchange with basicScheme is there, host and credentials seem OK, still doesn&#39;t work. The Authorization header is not there for the first request."}],"owner":{"account_id":2050027,"reputation":127,"user_id":1829230,"accept_rate":33,"display_name":"dascolagi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":442,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689168890,"creation_date":1689157676,"question_id":76669590,"body_markdown":"Is there a way to implement preemptive basic authentication with Apache HttpClient 5.2 using a `HttpRequestInterceptor` similar to how it&#39;s done [here (accepted response)][1] for Apache HttpClient 4?\r\n\r\nWe use Apache HttpClient both directly and as the RestTemplate underlying Http client. Preemptive auth used to work with HttpClient 4 using `HttpRequestInterceptor` (see the accepted response for the question I linked above), but we can&#39;t reuse the same code as the `AuthScheme` class is now gone.\r\n\r\nI tried a couple of things but neither worked (see below). Every first request gets a 401 from the server, the client retries with basic auth and gets a successful response. This is not the behaviour I want though, the first request should add the Authorisation header with Basic auth as it used to.\r\n\r\n```java\r\n@Component\r\npublic class HttpClientPreemptiveAuthInterceptor implements HttpRequestInterceptor {\r\n\r\n    @Override\r\n    public void process(HttpRequest httpRequest, EntityDetails entityDetails, HttpContext httpContext) throws IOException, HttpException {\r\n\r\n        // Apparently, we have two options:\r\n        // - Set HttpContext AuthCache with Basic auth for the target.\r\n        // - Copy org.apache.hc.client5.http.ContextBuilder#preemptiveBasicAuth()\r\n        // The above method is available for HttpClientContext creation. Not sure why it doesn&#39;t set AuthCache though,\r\n        // but instead adds an entry to the AuthExchange map of the given http context.\r\n\r\n        HttpClientContext httpClientContext = (HttpClientContext) httpContext;\r\n\r\n        // get the target host from the http context\r\n        RouteInfo routeInfo = httpClientContext.getHttpRoute();\r\n        if (routeInfo != null) {\r\n            HttpHost targetHost = routeInfo.getTargetHost();\r\n            AuthExchange authExchange = httpClientContext.getAuthExchange(targetHost);\r\n\r\n            if (authExchange.getAuthScheme() == null) {\r\n                CredentialsProvider credentialsProvider = httpClientContext.getCredentialsProvider();\r\n                Credentials credentials = credentialsProvider.getCredentials(new AuthScope(targetHost.getHostName(), targetHost.getPort()), httpClientContext);\r\n                if (credentials == null) {\r\n                    throw new HttpException(&quot;No credentials provided for preemptive authentication&quot;);\r\n                }\r\n                BasicScheme authScheme = new BasicScheme();\r\n                authScheme.initPreemptive(credentials);\r\n                //authExchange.select(authScheme);\r\n                //httpClientContext.setAuthExchange(targetHost, authExchange);\r\n                DefaultSchemePortResolver schemePortResolver = DefaultSchemePortResolver.INSTANCE;\r\n                httpClientContext.resetAuthExchange(RoutingSupport.normalize(targetHost, schemePortResolver), authScheme);\r\n            }\r\n\r\n        }\r\n\r\n\r\n        /** Second approach\r\n        // get the target host from the http context\r\n        RouteInfo routeInfo = httpClientContext.getHttpRoute();\r\n        if (routeInfo != null) {\r\n            HttpHost targetHost = routeInfo.getTargetHost();\r\n            // add Basic Auth for the target host (credentials for this host will be selected from the CredentialsProvider)\r\n            httpClientContext.resetAuthExchange(targetHost, new BasicScheme());\r\n        }\r\n         **/\r\n\r\n        // Third approach\r\n        // Create AuthCache instance\r\n        // final AuthCache authCache = new BasicAuthCache();\r\n        // Generate BASIC scheme object and add it to the local auth cache\r\n        // authCache.put(targetHost, new BasicScheme());\r\n        // httpClientContext.setAuthCache(new BasicAuthCache());\r\n    }\r\n```\r\n  [1]: https://stackoverflow.com/questions/2014700/preemptive-basic-authentication-with-apache-httpclient-4","title":"Preemptive Basic auth with Apache HttpClient 5.2","body":"<p>Is there a way to implement preemptive basic authentication with Apache HttpClient 5.2 using a <code>HttpRequestInterceptor</code> similar to how it's done <a href=\"https://stackoverflow.com/questions/2014700/preemptive-basic-authentication-with-apache-httpclient-4\">here (accepted response)</a> for Apache HttpClient 4?</p>\n<p>We use Apache HttpClient both directly and as the RestTemplate underlying Http client. Preemptive auth used to work with HttpClient 4 using <code>HttpRequestInterceptor</code> (see the accepted response for the question I linked above), but we can't reuse the same code as the <code>AuthScheme</code> class is now gone.</p>\n<p>I tried a couple of things but neither worked (see below). Every first request gets a 401 from the server, the client retries with basic auth and gets a successful response. This is not the behaviour I want though, the first request should add the Authorisation header with Basic auth as it used to.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class HttpClientPreemptiveAuthInterceptor implements HttpRequestInterceptor {\n\n    @Override\n    public void process(HttpRequest httpRequest, EntityDetails entityDetails, HttpContext httpContext) throws IOException, HttpException {\n\n        // Apparently, we have two options:\n        // - Set HttpContext AuthCache with Basic auth for the target.\n        // - Copy org.apache.hc.client5.http.ContextBuilder#preemptiveBasicAuth()\n        // The above method is available for HttpClientContext creation. Not sure why it doesn't set AuthCache though,\n        // but instead adds an entry to the AuthExchange map of the given http context.\n\n        HttpClientContext httpClientContext = (HttpClientContext) httpContext;\n\n        // get the target host from the http context\n        RouteInfo routeInfo = httpClientContext.getHttpRoute();\n        if (routeInfo != null) {\n            HttpHost targetHost = routeInfo.getTargetHost();\n            AuthExchange authExchange = httpClientContext.getAuthExchange(targetHost);\n\n            if (authExchange.getAuthScheme() == null) {\n                CredentialsProvider credentialsProvider = httpClientContext.getCredentialsProvider();\n                Credentials credentials = credentialsProvider.getCredentials(new AuthScope(targetHost.getHostName(), targetHost.getPort()), httpClientContext);\n                if (credentials == null) {\n                    throw new HttpException(&quot;No credentials provided for preemptive authentication&quot;);\n                }\n                BasicScheme authScheme = new BasicScheme();\n                authScheme.initPreemptive(credentials);\n                //authExchange.select(authScheme);\n                //httpClientContext.setAuthExchange(targetHost, authExchange);\n                DefaultSchemePortResolver schemePortResolver = DefaultSchemePortResolver.INSTANCE;\n                httpClientContext.resetAuthExchange(RoutingSupport.normalize(targetHost, schemePortResolver), authScheme);\n            }\n\n        }\n\n\n        /** Second approach\n        // get the target host from the http context\n        RouteInfo routeInfo = httpClientContext.getHttpRoute();\n        if (routeInfo != null) {\n            HttpHost targetHost = routeInfo.getTargetHost();\n            // add Basic Auth for the target host (credentials for this host will be selected from the CredentialsProvider)\n            httpClientContext.resetAuthExchange(targetHost, new BasicScheme());\n        }\n         **/\n\n        // Third approach\n        // Create AuthCache instance\n        // final AuthCache authCache = new BasicAuthCache();\n        // Generate BASIC scheme object and add it to the local auth cache\n        // authCache.put(targetHost, new BasicScheme());\n        // httpClientContext.setAuthCache(new BasicAuthCache());\n    }\n</code></pre>\n"},{"tags":["java","apache-tika"],"answers":[{"tags":[],"owner":{"account_id":4008309,"reputation":3678,"user_id":3302424,"accept_rate":70,"display_name":"Hari Krishna"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1490868496,"creation_date":1490868496,"answer_id":43114712,"question_id":43114495,"body_markdown":"You need to add &#39;tika-parsers&#39; library to your project. Add following dependency and retry.\r\n\r\n\t&lt;!-- https://mvnrepository.com/artifact/org.apache.tika/tika-parsers --&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.apache.tika&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;tika-parsers&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;1.14&lt;/version&gt;\r\n\t&lt;/dependency&gt;","title":"Tika returning empty string","body":"<p>You need to add 'tika-parsers' library to your project. Add following dependency and retry.</p>\n\n<pre><code>&lt;!-- https://mvnrepository.com/artifact/org.apache.tika/tika-parsers --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.tika&lt;/groupId&gt;\n    &lt;artifactId&gt;tika-parsers&lt;/artifactId&gt;\n    &lt;version&gt;1.14&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16704880,"reputation":525,"user_id":12073621,"display_name":"Adam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689168873,"creation_date":1689168873,"answer_id":76671175,"question_id":43114495,"body_markdown":"In my case I have to add 3 libs:\r\n\r\n    implementation &#39;org.apache.tika:tika-core:2.8.0&#39;\r\n    implementation &#39;org.apache.tika:tika-parsers:2.8.0&#39;\r\n    implementation &#39;org.apache.tika:tika-parser-pdf-module:2.8.0&#39;","title":"Tika returning empty string","body":"<p>In my case I have to add 3 libs:</p>\n<pre><code>implementation 'org.apache.tika:tika-core:2.8.0'\nimplementation 'org.apache.tika:tika-parsers:2.8.0'\nimplementation 'org.apache.tika:tika-parser-pdf-module:2.8.0'\n</code></pre>\n"}],"owner":{"display_name":"user4311153"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1489,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":43114712,"answer_count":2,"score":3,"last_activity_date":1689168873,"creation_date":1490867955,"question_id":43114495,"body_markdown":"I am using Apache Tika 1.14 and pdf box 2.0.5. When I try to extract the content from a pdf document, it is returning empty string.\r\n\r\n    import java.io.File;\r\n    import java.io.IOException;\r\n    \r\n    import org.apache.tika.Tika;\r\n    import org.apache.tika.exception.TikaException;\r\n    \r\n    public class Test {\r\n    \tpublic static void main(String args[]) throws IOException, TikaException{\r\n    \t\tString filePath = &quot;sample.pdf&quot;;\r\n    \t\t\r\n    \t\tTika tika = new Tika();\r\n    \t\tString content = tika.parseToString(new File(filePath));\r\n    \t\t\r\n    \t\tSystem.out.println(content);\r\n    \t}\r\n    }\r\n\r\n\r\nFollowing are the maven dependencies I am using.\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/org.apache.tika/tika-core --&gt;\r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.apache.tika&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;tika-core&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;1.14&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n    \r\n    \r\n    \t&lt;!-- https://mvnrepository.com/artifact/org.apache.pdfbox/pdfbox --&gt;\r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.apache.pdfbox&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;pdfbox&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;2.0.5&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n\r\n","title":"Tika returning empty string","body":"<p>I am using Apache Tika 1.14 and pdf box 2.0.5. When I try to extract the content from a pdf document, it is returning empty string.</p>\n\n<pre><code>import java.io.File;\nimport java.io.IOException;\n\nimport org.apache.tika.Tika;\nimport org.apache.tika.exception.TikaException;\n\npublic class Test {\n    public static void main(String args[]) throws IOException, TikaException{\n        String filePath = \"sample.pdf\";\n\n        Tika tika = new Tika();\n        String content = tika.parseToString(new File(filePath));\n\n        System.out.println(content);\n    }\n}\n</code></pre>\n\n<p>Following are the maven dependencies I am using.</p>\n\n<pre><code>&lt;!-- https://mvnrepository.com/artifact/org.apache.tika/tika-core --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.tika&lt;/groupId&gt;\n        &lt;artifactId&gt;tika-core&lt;/artifactId&gt;\n        &lt;version&gt;1.14&lt;/version&gt;\n    &lt;/dependency&gt;\n\n\n    &lt;!-- https://mvnrepository.com/artifact/org.apache.pdfbox/pdfbox --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.pdfbox&lt;/groupId&gt;\n        &lt;artifactId&gt;pdfbox&lt;/artifactId&gt;\n        &lt;version&gt;2.0.5&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","instagram","instagram-api"],"answers":[{"tags":[],"owner":{"account_id":7502298,"reputation":518,"user_id":5700162,"display_name":"George Moralis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689168035,"creation_date":1450648119,"answer_id":34386256,"question_id":34383748,"body_markdown":"As I can understand from the requests, it uses the [OAuth][1] protocol which is common for Google, Twitter and more popular site authentication protocols.\r\n\r\nTry an OAuth library such as: *[Google OAuth Client Library for Java][2]*\r\n\r\n  [1]: https://en.wikipedia.org/wiki/OAuth\r\n  [2]: https://github.com/google/google-oauth-java-client\r\n\r\n\r\n\r\n\r\n","title":"Instagram API: How can I automatically receive an access token in a Java application?","body":"<p>As I can understand from the requests, it uses the <a href=\"https://en.wikipedia.org/wiki/OAuth\" rel=\"nofollow noreferrer\">OAuth</a> protocol which is common for Google, Twitter and more popular site authentication protocols.</p>\n<p>Try an OAuth library such as: <em><a href=\"https://github.com/google/google-oauth-java-client\" rel=\"nofollow noreferrer\">Google OAuth Client Library for Java</a></em></p>\n"}],"owner":{"account_id":7503380,"reputation":18,"user_id":5700855,"display_name":"Kim Yun Hee"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1329,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689168796,"creation_date":1450632409,"question_id":34383748,"body_markdown":"I am writing an application in Java which retrieves information from Instagram server by their API, accumulates it and builds a visualization map.\r\n\r\nThe problem is that I cannot automate the authentication process. The official Instagram API documentation states that:\r\n\r\n&gt; In order to receive an access_token, you must do the following:\r\n&gt;\r\n&gt; Direct the user to our authorization URL.\r\n&gt;\r\n&gt; If the user is not logged in, they will be asked to log in.\r\n&gt; The user will be asked if they would like to grant your application access to her Instagram data.\r\n&gt; The server will redirect the user in one of two ways that you choose\r\n\r\nSo it is a compulsory step for a user to login manually into his/her account. I believe that this is done in order to grant permissions to an app that uses Instagram API on behave of a user, for example, if it makes some posts in his/her account. However, I am not going to use any user&#39;s personal account. In fact I set up a separate account for my application and registered the app (I got client_id, client_secret and set the redirect_uri). So I want only to use those credentials in order to get updated access token and make some REST API posts to Instagram.\r\n\r\nI make a GET request, receive back a login html page, parse it, insert my account credentials and after I make a POST request I receive the 400 code:\r\n\r\n```lang-none\r\nSending &#39;GET&#39; request to URL : instagram.com/oauth/authorize/?client_id=CLIENT_ID&amp;redirect_uri=localhost&amp;response_type=code\r\n\r\nResponse Code : 200\r\nExtracting form data...\r\n\r\nSending &#39;POST&#39; request to URL : instagram.com/oauth/authorize/?client_id=CLIET_ID&amp;redirect_uri=localhost&amp;response_type=code\r\nRequest content:CONTENT&amp;username=LOGIN&amp;password=PASSWORD&amp;=Log+in\r\n\r\nResponse Code : 302\r\n\r\nSending &#39;POST&#39; request to URL : www.instagram.com/oauth/authorize/?client_id=CLIENT_ID&amp;redirect_uri=localhost&amp;response_type=code\r\nRequest content:CLIENT_ID&amp;username=LOGIN&amp;password=PASSWORD&amp;=Log+in\r\n\r\nResponse Code : 400\r\n```\r\n\r\nI don&#39;t understand why am I redirrected one more time. I am assuming that is because some security issues, maybe some hidden fields... How can I fix it?\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Instagram API: How can I automatically receive an access token in a Java application?","body":"<p>I am writing an application in Java which retrieves information from Instagram server by their API, accumulates it and builds a visualization map.</p>\n<p>The problem is that I cannot automate the authentication process. The official Instagram API documentation states that:</p>\n<blockquote>\n<p>In order to receive an access_token, you must do the following:</p>\n<p>Direct the user to our authorization URL.</p>\n<p>If the user is not logged in, they will be asked to log in.\nThe user will be asked if they would like to grant your application access to her Instagram data.\nThe server will redirect the user in one of two ways that you choose</p>\n</blockquote>\n<p>So it is a compulsory step for a user to login manually into his/her account. I believe that this is done in order to grant permissions to an app that uses Instagram API on behave of a user, for example, if it makes some posts in his/her account. However, I am not going to use any user's personal account. In fact I set up a separate account for my application and registered the app (I got client_id, client_secret and set the redirect_uri). So I want only to use those credentials in order to get updated access token and make some REST API posts to Instagram.</p>\n<p>I make a GET request, receive back a login html page, parse it, insert my account credentials and after I make a POST request I receive the 400 code:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Sending 'GET' request to URL : instagram.com/oauth/authorize/?client_id=CLIENT_ID&amp;redirect_uri=localhost&amp;response_type=code\n\nResponse Code : 200\nExtracting form data...\n\nSending 'POST' request to URL : instagram.com/oauth/authorize/?client_id=CLIET_ID&amp;redirect_uri=localhost&amp;response_type=code\nRequest content:CONTENT&amp;username=LOGIN&amp;password=PASSWORD&amp;=Log+in\n\nResponse Code : 302\n\nSending 'POST' request to URL : www.instagram.com/oauth/authorize/?client_id=CLIENT_ID&amp;redirect_uri=localhost&amp;response_type=code\nRequest content:CLIENT_ID&amp;username=LOGIN&amp;password=PASSWORD&amp;=Log+in\n\nResponse Code : 400\n</code></pre>\n<p>I don't understand why am I redirrected one more time. I am assuming that is because some security issues, maybe some hidden fields... How can I fix it?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1689169001,"post_id":76671109,"comment_id":135175343,"body_markdown":"`java.awt.*` classes are not available on Android, they are J2SE classes. The libraries you are trying to use are not compatible with Andorid.","body":"<code>java.awt.*</code> classes are not available on Android, they are J2SE classes. The libraries you are trying to use are not compatible with Andorid."},{"owner":{"account_id":22394789,"reputation":1382,"user_id":16606223,"display_name":"Yahor Barkouski"},"score":0,"creation_date":1689169014,"post_id":76671109,"comment_id":135175346,"body_markdown":"Transitive `java.awt` package is not available in Android, consider using something like https://github.com/TomRoush/PdfBox-Android instead","body":"Transitive <code>java.awt</code> package is not available in Android, consider using something like <a href=\"https://github.com/TomRoush/PdfBox-Android\" rel=\"nofollow noreferrer\">github.com/TomRoush/PdfBox-Android</a> instead"},{"owner":{"account_id":29002515,"reputation":1,"user_id":22215816,"display_name":"Tapan"},"score":0,"creation_date":1689176156,"post_id":76671109,"comment_id":135177241,"body_markdown":"So after adding this what should i do any suggestion pls","body":"So after adding this what should i do any suggestion pls"}],"owner":{"account_id":29002515,"reputation":1,"user_id":22215816,"display_name":"Tapan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689168393,"creation_date":1689168393,"question_id":76671109,"body_markdown":"Hey i am creating a android app in java which convert PDF file into doc file this is my function which is doing this conversation\r\n\r\n```\r\n public void convertToWord(String inputPath, String outputPath){\r\n//        Toast.makeText(this, &quot;Converteddddd&quot;+outputPath, Toast.LENGTH_SHORT).show();\r\n        ExecutorService executorService = Executors.newSingleThreadExecutor();\r\n        Future&lt;Void&gt; future = executorService.submit(() -&gt;{\r\n            try {\r\n\r\n                File inputFile = new File(inputPath);\r\n                Log.d(&quot;path&quot;,inputPath);\r\n                FileInputStream fis1 = new FileInputStream(&quot;/storage/emulated/0/XYZ.pdf&quot;);\r\nLog.d(&quot;newPath&quot;, String.valueOf(fis1));\r\n                    PDDocument pdf = PDDocument.load(fis1);// &lt;---- GEtting error here\r\n                Log.d(&quot;Load1&quot;,&quot;File Loaded&quot;);\r\n                    PDFTextStripper stripper = new PDFTextStripper();\r\n\r\n                    String text = stripper.getText(pdf);\r\n\r\n                    XWPFDocument doc = new XWPFDocument();\r\n\r\n                    XWPFParagraph paragraph = doc.createParagraph();\r\n                    XWPFRun run = paragraph.createRun();\r\n                    run.setText(text);\r\n                FileOutputStream fos = new FileOutputStream(outputPath);\r\n                doc.write(fos);\r\n                fos.close();\r\n                Log.d(&quot;Converted&quot;,&quot;Converted&quot;);\r\n            }\r\n            catch (Exception e){\r\n                e.printStackTrace();\r\n                Log.e(&quot;Error&quot;, &quot;convertToWord: &quot;);\r\n            }\r\n            return null;\r\n        });\r\n        try {\r\n            future.get();\r\n        } catch (ExecutionException e) {\r\n            e.printStackTrace();\r\n            throw new RuntimeException(e);\r\n        } catch (InterruptedException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n        executorService.shutdown();\r\n    }\r\n```\r\nat this time i have given default path \r\nThis is my function to open file manager for selection of pdf\r\n\r\n```\r\n public void openFile(View view){\r\n        Intent fileManager = new Intent(Intent.ACTION_GET_CONTENT);\r\n        fileManager.addCategory(Intent.CATEGORY_OPENABLE);\r\n        fileManager.setType(&quot;*/*&quot;);\r\n        startActivityForResult(fileManager,1);\r\n    }\r\n```\r\nOn activity result\r\n```\r\n   protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n    if(requestCode == 1 &amp;&amp; resultCode == Activity.RESULT_OK){\r\n        if(data == null){\r\n            return;\r\n        }\r\n        Uri uri = data.getData();\r\n        String inputPath = getPath(uri);\r\n        String outputPath = Environment.getExternalStorageDirectory().getPath() + &quot;/output.docx&quot;;\r\n        path.setText(&quot;input Path &quot;+inputPath + &quot;Output Path&quot; + outputPath);\r\n        convertToWord(inputPath,outputPath);\r\n        }\r\n    }\r\n    public String getPath(Uri uri){\r\n        String filePath = null;\r\n        String[] projection = {MediaStore.Images.Media.DATA};\r\n       try(Cursor cursor = getContentResolver().query(uri,projection,null,null,null)) {\r\n           if(cursor != null &amp;&amp; cursor.moveToFirst()){\r\n               int colIndex = cursor.getColumnIndexOrThrow(MediaStore.MediaColumns.DATA);\r\n               filePath = cursor.getString(colIndex);\r\n           }\r\n       }\r\n       catch (Exception e){\r\n           e.printStackTrace();\r\n       }\r\n       if(filePath == null){\r\n           filePath = uri.getPath();\r\n       }\r\n       return  filePath;\r\n    }\r\n```\r\nPermission\r\n`String[] permission = {&quot;android.permission.READ_EXTERNAL_STORAGE&quot;,&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;,&quot;android.permission.MANAGE_EXTERNAL_STORAGE&quot;};`\r\nthis are the dependencies which im using\r\n\r\n```\r\nimplementation &#39;org.apache.poi:poi:5.0.0&#39;\r\n    implementation &#39;org.apache.poi:poi-ooxml:5.0.0&#39;\r\n//    implementation &#39;org.apache.xmlbeans:xmlbeans:4.0.0&#39;\r\n    implementation &#39;com.github.virtuald:curvesapi:1.06&#39;\r\n    implementation &#39;org.apache.pdfbox:pdfbox:2.0.27&#39;\r\n```\r\n\r\n\r\n\r\nIm getting error in PDDocument line \r\nerror looks like this \r\n** Didn&#39;t find class &quot;java.awt.Point&quot; on path: DexPathList[[dex file &quot;/data/data/com.example.pdftodoc/code_cache/.overlay/base.apk/classes3.dex&quot;,**","title":"Getting error Didn&#39;t find class &quot;java.awt.Point&quot; on path: DexPathList in my android app","body":"<p>Hey i am creating a android app in java which convert PDF file into doc file this is my function which is doing this conversation</p>\n<pre><code> public void convertToWord(String inputPath, String outputPath){\n//        Toast.makeText(this, &quot;Converteddddd&quot;+outputPath, Toast.LENGTH_SHORT).show();\n        ExecutorService executorService = Executors.newSingleThreadExecutor();\n        Future&lt;Void&gt; future = executorService.submit(() -&gt;{\n            try {\n\n                File inputFile = new File(inputPath);\n                Log.d(&quot;path&quot;,inputPath);\n                FileInputStream fis1 = new FileInputStream(&quot;/storage/emulated/0/XYZ.pdf&quot;);\nLog.d(&quot;newPath&quot;, String.valueOf(fis1));\n                    PDDocument pdf = PDDocument.load(fis1);// &lt;---- GEtting error here\n                Log.d(&quot;Load1&quot;,&quot;File Loaded&quot;);\n                    PDFTextStripper stripper = new PDFTextStripper();\n\n                    String text = stripper.getText(pdf);\n\n                    XWPFDocument doc = new XWPFDocument();\n\n                    XWPFParagraph paragraph = doc.createParagraph();\n                    XWPFRun run = paragraph.createRun();\n                    run.setText(text);\n                FileOutputStream fos = new FileOutputStream(outputPath);\n                doc.write(fos);\n                fos.close();\n                Log.d(&quot;Converted&quot;,&quot;Converted&quot;);\n            }\n            catch (Exception e){\n                e.printStackTrace();\n                Log.e(&quot;Error&quot;, &quot;convertToWord: &quot;);\n            }\n            return null;\n        });\n        try {\n            future.get();\n        } catch (ExecutionException e) {\n            e.printStackTrace();\n            throw new RuntimeException(e);\n        } catch (InterruptedException e) {\n            throw new RuntimeException(e);\n        }\n        executorService.shutdown();\n    }\n</code></pre>\n<p>at this time i have given default path\nThis is my function to open file manager for selection of pdf</p>\n<pre><code> public void openFile(View view){\n        Intent fileManager = new Intent(Intent.ACTION_GET_CONTENT);\n        fileManager.addCategory(Intent.CATEGORY_OPENABLE);\n        fileManager.setType(&quot;*/*&quot;);\n        startActivityForResult(fileManager,1);\n    }\n</code></pre>\n<p>On activity result</p>\n<pre><code>   protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\n        super.onActivityResult(requestCode, resultCode, data);\n    if(requestCode == 1 &amp;&amp; resultCode == Activity.RESULT_OK){\n        if(data == null){\n            return;\n        }\n        Uri uri = data.getData();\n        String inputPath = getPath(uri);\n        String outputPath = Environment.getExternalStorageDirectory().getPath() + &quot;/output.docx&quot;;\n        path.setText(&quot;input Path &quot;+inputPath + &quot;Output Path&quot; + outputPath);\n        convertToWord(inputPath,outputPath);\n        }\n    }\n    public String getPath(Uri uri){\n        String filePath = null;\n        String[] projection = {MediaStore.Images.Media.DATA};\n       try(Cursor cursor = getContentResolver().query(uri,projection,null,null,null)) {\n           if(cursor != null &amp;&amp; cursor.moveToFirst()){\n               int colIndex = cursor.getColumnIndexOrThrow(MediaStore.MediaColumns.DATA);\n               filePath = cursor.getString(colIndex);\n           }\n       }\n       catch (Exception e){\n           e.printStackTrace();\n       }\n       if(filePath == null){\n           filePath = uri.getPath();\n       }\n       return  filePath;\n    }\n</code></pre>\n<p>Permission\n<code>String[] permission = {&quot;android.permission.READ_EXTERNAL_STORAGE&quot;,&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;,&quot;android.permission.MANAGE_EXTERNAL_STORAGE&quot;};</code>\nthis are the dependencies which im using</p>\n<pre><code>implementation 'org.apache.poi:poi:5.0.0'\n    implementation 'org.apache.poi:poi-ooxml:5.0.0'\n//    implementation 'org.apache.xmlbeans:xmlbeans:4.0.0'\n    implementation 'com.github.virtuald:curvesapi:1.06'\n    implementation 'org.apache.pdfbox:pdfbox:2.0.27'\n</code></pre>\n<p>Im getting error in PDDocument line\nerror looks like this\n** Didn't find class &quot;java.awt.Point&quot; on path: DexPathList[[dex file &quot;/data/data/com.example.pdftodoc/code_cache/.overlay/base.apk/classes3.dex&quot;,**</p>\n"},{"tags":["java","security"],"comments":[{"owner":{"account_id":10491815,"reputation":26310,"user_id":7733418,"display_name":"Yunnosch"},"score":0,"creation_date":1689157860,"post_id":76669349,"comment_id":135172695,"body_markdown":"This &quot;hard to predict and not too long&quot; seems a known combination. Did you notice (or maybe even ask...) similar questions recently? Anyway, please define &quot;not too long&quot; and &quot;hard to predict&quot; quantitatively. I.e. how long is allowed? What is the maximum probability to guess?","body":"This &quot;hard to predict and not too long&quot; seems a known combination. Did you notice (or maybe even ask...) similar questions recently? Anyway, please define &quot;not too long&quot; and &quot;hard to predict&quot; quantitatively. I.e. how long is allowed? What is the maximum probability to guess?"},{"owner":{"account_id":10491815,"reputation":26310,"user_id":7733418,"display_name":"Yunnosch"},"score":0,"creation_date":1689157976,"post_id":76669349,"comment_id":135172718,"body_markdown":"Note that &quot;include a timestamp&quot; was among the first desings of UUID in its history. You might be on the same track....","body":"Note that &quot;include a timestamp&quot; was among the first desings of UUID in its history. You might be on the same track...."},{"owner":{"account_id":10491815,"reputation":26310,"user_id":7733418,"display_name":"Yunnosch"},"score":1,"creation_date":1689158037,"post_id":76669349,"comment_id":135172731,"body_markdown":"&quot;I put 8 bytes. Is it enough?&quot; I think that you are asking the wrong audience. Without context and quantitative requirements it is next to impossible to answer.","body":"&quot;I put 8 bytes. Is it enough?&quot; I think that you are asking the wrong audience. Without context and quantitative requirements it is next to impossible to answer."},{"owner":{"account_id":27438952,"reputation":43,"user_id":20934246,"display_name":"Repins Star"},"score":0,"creation_date":1689159736,"post_id":76669349,"comment_id":135173120,"body_markdown":"@Yunnosch this is the context: `it must atleast hard to predict or brute force, but also short enough not to consume too much memory.`","body":"@Yunnosch this is the context: <code>it must atleast hard to predict or brute force, but also short enough not to consume too much memory.</code>"},{"owner":{"account_id":10491815,"reputation":26310,"user_id":7733418,"display_name":"Yunnosch"},"score":2,"creation_date":1689159939,"post_id":76669349,"comment_id":135173177,"body_markdown":"Ok, I take that as &quot;I cannot add details, I cannot specify clear values and I refuse to rephrase&quot;. Also I note that you do not comment on whether or not the similar question was also by you, which I now assume; which is relevant, because that question might actually contain more info than this one and I would like to review your reactions to the feedbacks you got there... Note by the way that improving older questions with the help of feedback is a better bet on the long term, for getting helpful answers here.","body":"Ok, I take that as &quot;I cannot add details, I cannot specify clear values and I refuse to rephrase&quot;. Also I note that you do not comment on whether or not the similar question was also by you, which I now assume; which is relevant, because that question might actually contain more info than this one and I would like to review your reactions to the feedbacks you got there... Note by the way that improving older questions with the help of feedback is a better bet on the long term, for getting helpful answers here."}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689168334,"creation_date":1689161450,"answer_id":76670066,"question_id":76669349,"body_markdown":"Your primary question is &quot;are 8 random bytes enough&quot; to mitigate brute force attack.  It depends.\r\n\r\nIt depends on:\r\n\r\n  - What probability of a successful attack is acceptable to you.\r\n  - How many IDs have been issued.  (I am assuming that a brute-force guess of *any* valid ID is sufficient.)\r\n  - How many brute-force attempts can be performed per second.\r\n  - How long you would anticipate that an attacker would persist in their brute-force attacks.\r\n\r\nGiven values for the above, you can calculate whether 8 bytes == 2&lt;sup&gt;64&lt;/sup&gt; possible IDs is large enough.  It is relatively simple math.  (Look up how to solve the &quot;birthday paradox&quot; problem.)\r\n\r\n\r\n------------------\r\n\r\n&gt; Also, I am planning to append at least a timestamp to make it more unique.  Maybe a portion of timestamp, would the be a good idea?\r\n\r\nThat&#39;s a bad idea.  If the attacker knows that you are using a timestamp or portion of a timestamp in your IDs, they can potentially use that information to reduce the number of guesses they need to make.\r\n\r\nN random bits will be more secure than M (&lt; N) random bits and N - M bits of timestamp information.\r\n","title":"Generate SecureRandom bytes with an ideal size","body":"<p>Your primary question is &quot;are 8 random bytes enough&quot; to mitigate brute force attack.  It depends.</p>\n<p>It depends on:</p>\n<ul>\n<li>What probability of a successful attack is acceptable to you.</li>\n<li>How many IDs have been issued.  (I am assuming that a brute-force guess of <em>any</em> valid ID is sufficient.)</li>\n<li>How many brute-force attempts can be performed per second.</li>\n<li>How long you would anticipate that an attacker would persist in their brute-force attacks.</li>\n</ul>\n<p>Given values for the above, you can calculate whether 8 bytes == 2<sup>64</sup> possible IDs is large enough.  It is relatively simple math.  (Look up how to solve the &quot;birthday paradox&quot; problem.)</p>\n<hr />\n<blockquote>\n<p>Also, I am planning to append at least a timestamp to make it more unique.  Maybe a portion of timestamp, would the be a good idea?</p>\n</blockquote>\n<p>That's a bad idea.  If the attacker knows that you are using a timestamp or portion of a timestamp in your IDs, they can potentially use that information to reduce the number of guesses they need to make.</p>\n<p>N random bits will be more secure than M (&lt; N) random bits and N - M bits of timestamp information.</p>\n"}],"owner":{"account_id":27438952,"reputation":43,"user_id":20934246,"display_name":"Repins Star"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1689231846,"answer_count":1,"score":-1,"last_activity_date":1689168334,"creation_date":1689155976,"question_id":76669349,"body_markdown":"I want to generate a random bytes using SecureRandom and encode it as base64 to be pass in a URL parameter.\r\n\r\nMy requirements is: it must atleast hard to predict or brute force, but also short enough not to consume too much memory.\r\n\r\nI came up with this code where I put 8 bytes. Is it enough? \r\n\r\n    SecureRandom rand = new SecureRandom();\r\n    byte[] randomBytes = new byte[8];\r\n    rand.nextBytes(randomBytes);\r\n    \r\n    Base64 base64 = new Base64();\r\n    String result = base64.encodeBase64URLSafeString(randomBytes);\r\n\r\nAlso, I am planning to append at least a timestamp to make it more unique. UUID is not my option since its too big. Maybe a portion of timestamp, would the be a good idea?","title":"Generate SecureRandom bytes with an ideal size","body":"<p>I want to generate a random bytes using SecureRandom and encode it as base64 to be pass in a URL parameter.</p>\n<p>My requirements is: it must atleast hard to predict or brute force, but also short enough not to consume too much memory.</p>\n<p>I came up with this code where I put 8 bytes. Is it enough?</p>\n<pre><code>SecureRandom rand = new SecureRandom();\nbyte[] randomBytes = new byte[8];\nrand.nextBytes(randomBytes);\n\nBase64 base64 = new Base64();\nString result = base64.encodeBase64URLSafeString(randomBytes);\n</code></pre>\n<p>Also, I am planning to append at least a timestamp to make it more unique. UUID is not my option since its too big. Maybe a portion of timestamp, would the be a good idea?</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":3,"creation_date":1689168536,"post_id":76671077,"comment_id":135175204,"body_markdown":"Because you are working against Spring Boot. Remove the property sources and let Spring Boot do the loading. So yes it will work but as you defined `@PropertySource`which takes precedence again.","body":"Because you are working against Spring Boot. Remove the property sources and let Spring Boot do the loading. So yes it will work but as you defined <code>@PropertySource</code>which takes precedence again."},{"owner":{"account_id":3215437,"reputation":496,"user_id":2714296,"accept_rate":43,"display_name":"pillesoft"},"score":0,"creation_date":1689169282,"post_id":76671077,"comment_id":135175426,"body_markdown":"What you say is strange to me. The fact is that if there is a setting defined only in the external file, it works. But if the same setting is defined in both files, the override doesn&#39;t work. Considering your proposal, I can understand that the application.properties in the classpath is automatically loaded, but how to &quot;tell&quot; to spring boot the external properties file? with --spring.config.location environment setting?","body":"What you say is strange to me. The fact is that if there is a setting defined only in the external file, it works. But if the same setting is defined in both files, the override doesn&#39;t work. Considering your proposal, I can understand that the application.properties in the classpath is automatically loaded, but how to &quot;tell&quot; to spring boot the external properties file? with --spring.config.location environment setting?"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1689169680,"post_id":76671077,"comment_id":135175543,"body_markdown":"I think I answered the same question extensivly [here](https://stackoverflow.com/a/76231245/2696260) and what you can use.","body":"I think I answered the same question extensivly <a href=\"https://stackoverflow.com/a/76231245/2696260\">here</a> and what you can use."},{"owner":{"account_id":3215437,"reputation":496,"user_id":2714296,"accept_rate":43,"display_name":"pillesoft"},"score":0,"creation_date":1689263805,"post_id":76671077,"comment_id":135192060,"body_markdown":"Thanks @deinum.biz! Finally I deleted @PropertySources from application class, and setup profile based configuration files, plus I defined an optional one with spring.config.import","body":"Thanks @deinum.biz! Finally I deleted @PropertySources from application class, and setup profile based configuration files, plus I defined an optional one with spring.config.import"}],"owner":{"account_id":3215437,"reputation":496,"user_id":2714296,"accept_rate":43,"display_name":"pillesoft"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1689169780,"answer_count":0,"score":0,"last_activity_date":1689168216,"creation_date":1689168216,"question_id":76671077,"body_markdown":"IT changed some server url, and I want to setup the application with the new settings.\r\n\r\nThat server url variable is defined in the application.properties file available in classpath, but the new value is defined in the external application.properties file.\r\n\r\nHowever for some reason the application still uses the server url defined in the classpath application properties file, ignoring the new value in the external file.\r\nThe override is not working!\r\n\r\nIf I understand well the documentation it should work.\r\n \r\nIn main spring boot class I have defined two properties file with @PropertySources annotation.\r\n\r\n    @SpringBootApplication\r\n    @PropertySources({\r\n        @PropertySource(&quot;classpath:application.properties&quot;),\r\n        @PropertySource(&quot;file:${SCDWPPT_HOME}/application.properties&quot;)\r\n    })\r\n    public class ScdwpptApplication extends SpringBootServletInitializer {\r\n    ...\r\n    }\r\n","title":"spring boot 2.7.10 override settings from external application.properties is not working","body":"<p>IT changed some server url, and I want to setup the application with the new settings.</p>\n<p>That server url variable is defined in the application.properties file available in classpath, but the new value is defined in the external application.properties file.</p>\n<p>However for some reason the application still uses the server url defined in the classpath application properties file, ignoring the new value in the external file.\nThe override is not working!</p>\n<p>If I understand well the documentation it should work.</p>\n<p>In main spring boot class I have defined two properties file with @PropertySources annotation.</p>\n<pre><code>@SpringBootApplication\n@PropertySources({\n    @PropertySource(&quot;classpath:application.properties&quot;),\n    @PropertySource(&quot;file:${SCDWPPT_HOME}/application.properties&quot;)\n})\npublic class ScdwpptApplication extends SpringBootServletInitializer {\n...\n}\n</code></pre>\n"},{"tags":["java","database","postgresql","jdbc"],"comments":[{"owner":{"account_id":187094,"reputation":5113,"user_id":424903,"display_name":"Gimby"},"score":1,"creation_date":1689167399,"post_id":76670846,"comment_id":135174895,"body_markdown":"This smells like an X/Y problem. You married yourself to a particular solution, but it sounds really suboptimal and difficult. Why not describe the problem you are trying to solve. Is this for development purposes, so you can easily restore a database to a fresh state and redo tests?","body":"This smells like an X/Y problem. You married yourself to a particular solution, but it sounds really suboptimal and difficult. Why not describe the problem you are trying to solve. Is this for development purposes, so you can easily restore a database to a fresh state and redo tests?"},{"owner":{"account_id":8591840,"reputation":46475,"user_id":6436191,"display_name":"The Impaler"},"score":0,"creation_date":1689169863,"post_id":76670846,"comment_id":135175605,"body_markdown":"Sounds more like an admin question. You can backup and restore your database as much as needed.","body":"Sounds more like an admin question. You can backup and restore your database as much as needed."},{"owner":{"account_id":187094,"reputation":5113,"user_id":424903,"display_name":"Gimby"},"score":1,"creation_date":1689172983,"post_id":76670846,"comment_id":135176447,"body_markdown":"Regarding the edit, an in-memory H2 database is infinitely easier to setup than a full postgres instance, especially when your target is to essentially not have a persistent database but rather return to a baseline each time you re-run. That is precisely the problem that H2 solves and why something like Spring Boot defaults to using it for unit testing purposes.","body":"Regarding the edit, an in-memory H2 database is infinitely easier to setup than a full postgres instance, especially when your target is to essentially not have a persistent database but rather return to a baseline each time you re-run. That is precisely the problem that H2 solves and why something like Spring Boot defaults to using it for unit testing purposes."},{"owner":{"account_id":21767614,"reputation":25,"user_id":16071248,"display_name":"Gio Formichella"},"score":0,"creation_date":1689173242,"post_id":76670846,"comment_id":135176510,"body_markdown":"@Gimby thanks for the comments, they really helped me out","body":"@Gimby thanks for the comments, they really helped me out"}],"answers":[{"tags":[],"owner":{"account_id":8633322,"reputation":218343,"user_id":6464308,"display_name":"Laurenz Albe"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689167689,"creation_date":1689167689,"answer_id":76671004,"question_id":76670846,"body_markdown":"There is no way to do that. The following might be a viable solution:\r\n\r\n- create a template database `my_template` and load your SQL file into it\r\n\r\n- make the database inaccessible with\r\n\r\n      ALTER DATABASE my_template ALLOW_CONNECTIONS FALSE;\r\n\r\n- create your actual database with\r\n\r\n      CREATE DATABASE mydb TEMPLATE my_template;\r\n\r\n- then, if you want to reset the database, run\r\n\r\n      DROP DATABASE mydb FORCE;\r\n      CREATE DATABASE mydb TEMPLATE my_template;","title":"Can i reset database to a certain state from my Java application?","body":"<p>There is no way to do that. The following might be a viable solution:</p>\n<ul>\n<li><p>create a template database <code>my_template</code> and load your SQL file into it</p>\n</li>\n<li><p>make the database inaccessible with</p>\n<pre><code>ALTER DATABASE my_template ALLOW_CONNECTIONS FALSE;\n</code></pre>\n</li>\n<li><p>create your actual database with</p>\n<pre><code>CREATE DATABASE mydb TEMPLATE my_template;\n</code></pre>\n</li>\n<li><p>then, if you want to reset the database, run</p>\n<pre><code>DROP DATABASE mydb FORCE;\nCREATE DATABASE mydb TEMPLATE my_template;\n</code></pre>\n</li>\n</ul>\n"}],"owner":{"account_id":21767614,"reputation":25,"user_id":16071248,"display_name":"Gio Formichella"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1689168108,"creation_date":1689166700,"question_id":76670846,"body_markdown":"I have a Java application connected to a PostgreSQL database using a JDBC connection.  I would like to have a method in the Java application that resets the database state to the one in my .sql file.\r\n\r\nDoes this method already exist ? If not, how should I go about making it ?\r\n\r\nEDIT: The reason I&#39;m asking is because I&#39;m trying to have self-contained tests for my DAOs in my school project. Because it&#39;s a school project and it&#39;s not a requirement I&#39;m avoiding the usage of hibernate/spring boot H2 solutions that I found on-line (a bit to complex for my level)","title":"Can i reset database to a certain state from my Java application?","body":"<p>I have a Java application connected to a PostgreSQL database using a JDBC connection.  I would like to have a method in the Java application that resets the database state to the one in my .sql file.</p>\n<p>Does this method already exist ? If not, how should I go about making it ?</p>\n<p>EDIT: The reason I'm asking is because I'm trying to have self-contained tests for my DAOs in my school project. Because it's a school project and it's not a requirement I'm avoiding the usage of hibernate/spring boot H2 solutions that I found on-line (a bit to complex for my level)</p>\n"},{"tags":["java","oracle","docker","docker-compose","dockerfile"],"comments":[{"owner":{"account_id":5591028,"reputation":502,"user_id":4430246,"display_name":"Rob"},"score":0,"creation_date":1689142936,"post_id":76667535,"comment_id":135169449,"body_markdown":"You could try using the `condition` attribute, see the [docker docs](https://docs.docker.com/compose/compose-file/05-services/#depends_on). Alternatively, you can use something like a [wait-for-it script](https://stackoverflow.com/questions/60539114/how-to-wait-for-mssql-in-docker-compose).","body":"You could try using the <code>condition</code> attribute, see the <a href=\"https://docs.docker.com/compose/compose-file/05-services/#depends_on\" rel=\"nofollow noreferrer\">docker docs</a>. Alternatively, you can use something like a <a href=\"https://stackoverflow.com/questions/60539114/how-to-wait-for-mssql-in-docker-compose\">wait-for-it script</a>."}],"answers":[{"tags":[],"owner":{"account_id":183306,"reputation":9428,"user_id":418599,"accept_rate":52,"display_name":"Antonio Petricca"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689145506,"creation_date":1689145506,"answer_id":76667915,"question_id":76667535,"body_markdown":"You have to:\r\n\r\n 1. Write a startup script that waits for Oracle startup then runs your sprint application.\r\n 2. Copy it into your custom image.\r\n 3. Run it by the `docker CMD command`.","title":"Docker Compose start java application after oracle database script initialize","body":"<p>You have to:</p>\n<ol>\n<li>Write a startup script that waits for Oracle startup then runs your sprint application.</li>\n<li>Copy it into your custom image.</li>\n<li>Run it by the <code>docker CMD command</code>.</li>\n</ol>\n"}],"owner":{"account_id":20315566,"reputation":21,"user_id":22177484,"display_name":"tony_rosey"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":141,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1689160475,"answer_count":1,"score":1,"last_activity_date":1689167748,"creation_date":1689141878,"question_id":76667535,"body_markdown":"Is it possible to start another service, in that case a java spring application, after the oracle database start? I know there is a depends_on and health_check but did not work for me:\r\n\r\ndocker-compose:\r\n```\r\nversion: &#39;3.4&#39;\r\nservices:\r\n  oracle-xe:\r\n    image: preloaded_db:latest\r\n    container_name: oracle\r\n    ports:\r\n      - &quot;1521:1521&quot;\r\n    environment:\r\n      - ORACLE_PASSWORD=oracle\r\n  app:\r\n    build:\r\n      context: ./app\r\n      dockerfile: Dockerfile\r\n    ports:\r\n      - &quot;8080:8080&quot;\r\n    depends_on:\r\n      - oracle-xe\r\n\r\n```\r\n\r\nand also my custom image dockerfile:\r\n\r\n```\r\nFROM gvenzl/oracle-xe:latest\r\n\r\nCOPY *.sql /docker-entrypoint-initdb.d/\r\n```","title":"Docker Compose start java application after oracle database script initialize","body":"<p>Is it possible to start another service, in that case a java spring application, after the oracle database start? I know there is a depends_on and health_check but did not work for me:</p>\n<p>docker-compose:</p>\n<pre><code>version: '3.4'\nservices:\n  oracle-xe:\n    image: preloaded_db:latest\n    container_name: oracle\n    ports:\n      - &quot;1521:1521&quot;\n    environment:\n      - ORACLE_PASSWORD=oracle\n  app:\n    build:\n      context: ./app\n      dockerfile: Dockerfile\n    ports:\n      - &quot;8080:8080&quot;\n    depends_on:\n      - oracle-xe\n\n</code></pre>\n<p>and also my custom image dockerfile:</p>\n<pre><code>FROM gvenzl/oracle-xe:latest\n\nCOPY *.sql /docker-entrypoint-initdb.d/\n</code></pre>\n"},{"tags":["java","drools","kie"],"comments":[{"owner":{"account_id":183966,"reputation":14606,"user_id":419705,"accept_rate":67,"display_name":"Roddy of the Frozen Peas"},"score":0,"creation_date":1689186526,"post_id":76670936,"comment_id":135179307,"body_markdown":"Stateful or stateless session? Also globals should be avoided, that&#39;s a very old-fashioned way of writing rules ... not surprised you run out of memory eventually.","body":"Stateful or stateless session? Also globals should be avoided, that&#39;s a very old-fashioned way of writing rules ... not surprised you run out of memory eventually."},{"owner":{"account_id":2262858,"reputation":1078,"user_id":1992451,"accept_rate":84,"display_name":"Piyush Shrivastava"},"score":0,"creation_date":1689220007,"post_id":76670936,"comment_id":135183183,"body_markdown":"@RoddyoftheFrozenPeas the KieSession class is extending StatefulRuleSession, so I am assuming this is stateful. I am new to drools framework, can you suggest what is the standard way of writing rules? If you have any examples, please share.","body":"@RoddyoftheFrozenPeas the KieSession class is extending StatefulRuleSession, so I am assuming this is stateful. I am new to drools framework, can you suggest what is the standard way of writing rules? If you have any examples, please share."}],"owner":{"account_id":2262858,"reputation":1078,"user_id":1992451,"accept_rate":84,"display_name":"Piyush Shrivastava"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689167288,"creation_date":1689167288,"question_id":76670936,"body_markdown":"I have a batch processing code that uses drools to run some validation checks. Originally, I made one kieSession for the whole app and used it in the code that reads the data. Below is a pseudo code:\r\n\r\n    private KieSession kieSession=new DroolsBeanFactory().getKieSession(DROOLS_FILE_PATH);;\r\n    public void func(){\r\n        //..\r\n        kieSession.insert(data);\r\n        kieSession.setGlobal(&quot;data&quot;, data);\r\n        kieSession.fireAllRules();\r\n        //..\r\n    }\r\n\r\nThis way, I get an `OutOfMemoryError` after some time. Looks like a memory leak?\r\nWhen I add `kieSession.dispose()` after `fireAllRules()` and again initialize the `kieSession`, the heap gets cleared as expected and no error occurs.\r\n\r\nBut this way, I end up initializing kieSession in each method call. This slows down my app. I tried re-initializing on every 1000th call, it works but I am not sure if this is the right way.\r\n\r\nWhat should be done in this situation?\r\n ","title":"When should kieSession be disposed?","body":"<p>I have a batch processing code that uses drools to run some validation checks. Originally, I made one kieSession for the whole app and used it in the code that reads the data. Below is a pseudo code:</p>\n<pre><code>private KieSession kieSession=new DroolsBeanFactory().getKieSession(DROOLS_FILE_PATH);;\npublic void func(){\n    //..\n    kieSession.insert(data);\n    kieSession.setGlobal(&quot;data&quot;, data);\n    kieSession.fireAllRules();\n    //..\n}\n</code></pre>\n<p>This way, I get an <code>OutOfMemoryError</code> after some time. Looks like a memory leak?\nWhen I add <code>kieSession.dispose()</code> after <code>fireAllRules()</code> and again initialize the <code>kieSession</code>, the heap gets cleared as expected and no error occurs.</p>\n<p>But this way, I end up initializing kieSession in each method call. This slows down my app. I tried re-initializing on every 1000th call, it works but I am not sure if this is the right way.</p>\n<p>What should be done in this situation?</p>\n"},{"tags":["java","file","fileinputstream","bytebuffer","mappedbytebuffer"],"owner":{"account_id":18070365,"reputation":321,"user_id":13135178,"display_name":"dev_101"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689167274,"creation_date":1689166942,"question_id":76670884,"body_markdown":"I need to convert a large file (2GB) to netty byteBuf. I am using the following code its working\r\n\r\n    File file = (File) fw;\r\n\t\t\t\t\tFileInputStream fileInputStream = new FileInputStream(file);\r\n\t\t\t\t\tFileChannel fileChannel = fileInputStream.getChannel();\r\n\t\t\t\t\tMappedByteBuffer mappedByteBuffer = fileChannel.map(FileChannel.MapMode.READ_ONLY, 0, file.length());\r\n\t\t\t\t\tsetDataToTransfer(Unpooled.wrappedBuffer(mappedByteBuffer)); //Data to transfer is a byteBuf\r\n\r\nBut when I re run the operation it gives me the following error\r\n\r\n    (The requested operation cannot be performed on a file with a user-mapped section open)\r\n\tat java.base/java.io.FileOutputStream.open0(Native Method) ~[na:na]\r\n\tat java.base/java.io.FileOutputStream.open(FileOutputStream.java:298) ~[na:na]\r\n\tat java.base/java.io.FileOutputStream.&lt;init&gt;(FileOutputStream.java:237) ~[na:na]\r\n\tat java.base/java.io.FileOutputStream.&lt;init&gt;(FileOutputStream.java:187) ~[na:na]\r\n\r\nI tried closing (unmapping) the `Mappedbytebuffer` using `sun.misc.Cleaner` but that didnt seem to work.\r\n\r\nI also tried the following code \r\n\r\n    ByteBuf buffer = \tbuffer()\r\n    buffer.writeBytes(new FileInputStream(file), file.length());\r\n\r\nThis works when I run the code on a 16GB ram but fails on 4GB ram system gives me heap memory issues.\r\n\r\nCan you please suggest a code to convert a large file into netty bytebuf which can run on 4GB ram using JDK 8.\r\n\r\n","title":"Converting a file to netty ByteBuf","body":"<p>I need to convert a large file (2GB) to netty byteBuf. I am using the following code its working</p>\n<pre><code>File file = (File) fw;\n                FileInputStream fileInputStream = new FileInputStream(file);\n                FileChannel fileChannel = fileInputStream.getChannel();\n                MappedByteBuffer mappedByteBuffer = fileChannel.map(FileChannel.MapMode.READ_ONLY, 0, file.length());\n                setDataToTransfer(Unpooled.wrappedBuffer(mappedByteBuffer)); //Data to transfer is a byteBuf\n</code></pre>\n<p>But when I re run the operation it gives me the following error</p>\n<pre><code>(The requested operation cannot be performed on a file with a user-mapped section open)\nat java.base/java.io.FileOutputStream.open0(Native Method) ~[na:na]\nat java.base/java.io.FileOutputStream.open(FileOutputStream.java:298) ~[na:na]\nat java.base/java.io.FileOutputStream.&lt;init&gt;(FileOutputStream.java:237) ~[na:na]\nat java.base/java.io.FileOutputStream.&lt;init&gt;(FileOutputStream.java:187) ~[na:na]\n</code></pre>\n<p>I tried closing (unmapping) the <code>Mappedbytebuffer</code> using <code>sun.misc.Cleaner</code> but that didnt seem to work.</p>\n<p>I also tried the following code</p>\n<pre><code>ByteBuf buffer =    buffer()\nbuffer.writeBytes(new FileInputStream(file), file.length());\n</code></pre>\n<p>This works when I run the code on a 16GB ram but fails on 4GB ram system gives me heap memory issues.</p>\n<p>Can you please suggest a code to convert a large file into netty bytebuf which can run on 4GB ram using JDK 8.</p>\n"},{"tags":["java","forms","swing"],"comments":[{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1689146490,"post_id":76668001,"comment_id":135170120,"body_markdown":"[Turns out these shouldn&#39;t show up normally](https://stackoverflow.com/questions/10876128/how-can-i-make-form-files-show-in-the-netbeans-gui). See also: https://stackoverflow.com/q/61312084/5133585","body":"<a href=\"https://stackoverflow.com/questions/10876128/how-can-i-make-form-files-show-in-the-netbeans-gui\">Turns out these shouldn&#39;t show up normally</a>. See also: <a href=\"https://stackoverflow.com/q/61312084/5133585\">stackoverflow.com/q/61312084/5133585</a>"},{"owner":{"account_id":28976102,"reputation":1,"user_id":22195175,"display_name":"bilalsahi business"},"score":0,"creation_date":1689146537,"post_id":76668001,"comment_id":135170125,"body_markdown":"yes it should be but if i delete it the design view of this file will be gone","body":"yes it should be but if i delete it the design view of this file will be gone"}],"owner":{"account_id":28976102,"reputation":1,"user_id":22195175,"display_name":"bilalsahi business"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689166841,"creation_date":1689146242,"question_id":76668001,"body_markdown":"I had closed my NetBeans project and after some time I reopened my NetBeans and opened my project but there&#39;s a new file generated named same as my previous one but with extension of `.form` and question mark on its logo. Which file is that? Why it happens? How can I correct it? \r\n\r\nThe picture is mentioned below.\r\n\r\n[![This is the image of my netbeens and the file is marked](https://i.stack.imgur.com/JEtBY.png)](https://i.stack.imgur.com/JEtBY.png)\r\n\r\nI just want to correct this mistake.\r\n","title":"Why my form in Java Swing in NetBeans got separated from panel and there is &#39; ? &#39; on its logo? What does it mean?","body":"<p>I had closed my NetBeans project and after some time I reopened my NetBeans and opened my project but there's a new file generated named same as my previous one but with extension of <code>.form</code> and question mark on its logo. Which file is that? Why it happens? How can I correct it?</p>\n<p>The picture is mentioned below.</p>\n<p><a href=\"https://i.stack.imgur.com/JEtBY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JEtBY.png\" alt=\"This is the image of my netbeens and the file is marked\" /></a></p>\n<p>I just want to correct this mistake.</p>\n"},{"tags":["java","itext","digital-signature","bouncycastle"],"comments":[{"owner":{"account_id":241321,"reputation":1567,"user_id":512061,"display_name":"Micha&#235;l Demey"},"score":0,"creation_date":1506003053,"post_id":46346144,"comment_id":79652517,"body_markdown":"Could you post the PDF throwing this exception?","body":"Could you post the PDF throwing this exception?"},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":1,"creation_date":1506003074,"post_id":46346144,"comment_id":79652537,"body_markdown":"Have you registered BouncyCastle as security provider?","body":"Have you registered BouncyCastle as security provider?"},{"owner":{"account_id":4716039,"reputation":381,"user_id":3815149,"accept_rate":92,"display_name":"dpilwal"},"score":0,"creation_date":1506004076,"post_id":46346144,"comment_id":79653317,"body_markdown":"Yes I have registered BC as security provider.","body":"Yes I have registered BC as security provider."},{"owner":{"account_id":4716039,"reputation":381,"user_id":3815149,"accept_rate":92,"display_name":"dpilwal"},"score":0,"creation_date":1506004187,"post_id":46346144,"comment_id":79653402,"body_markdown":"Sorry due to org policy I can&#39;t share the PDF.","body":"Sorry due to org policy I can&#39;t share the PDF."},{"owner":{"account_id":241321,"reputation":1567,"user_id":512061,"display_name":"Micha&#235;l Demey"},"score":0,"creation_date":1506004499,"post_id":46346144,"comment_id":79653635,"body_markdown":"In that case, I&#39;m afraid I can&#39;t help you further.  If you&#39;re a paying customer of iText, you can contact support and we could sign an NDA so that we can process this PDF in all security.","body":"In that case, I&#39;m afraid I can&#39;t help you further.  If you&#39;re a paying customer of iText, you can contact support and we could sign an NDA so that we can process this PDF in all security."},{"owner":{"account_id":4716039,"reputation":381,"user_id":3815149,"accept_rate":92,"display_name":"dpilwal"},"score":1,"creation_date":1506004696,"post_id":46346144,"comment_id":79653769,"body_markdown":"No I am not using comircial version of itext. I will try to create a sample file with sign and will  to share with you.","body":"No I am not using comircial version of itext. I will try to create a sample file with sign and will  to share with you."},{"owner":{"account_id":4716039,"reputation":381,"user_id":3815149,"accept_rate":92,"display_name":"dpilwal"},"score":0,"creation_date":1506061035,"post_id":46346144,"comment_id":79675714,"body_markdown":"@Micha&#235;lDemey Here is the signed document [link](https://drive.google.com/open?id=0B1XKjvoeoyPZWnk5bzc5T3VSQUk) ,please have a look and suggest.","body":"@Micha&#235;lDemey Here is the signed document <a href=\"https://drive.google.com/open?id=0B1XKjvoeoyPZWnk5bzc5T3VSQUk\" rel=\"nofollow noreferrer\">link</a> ,please have a look and suggest."},{"owner":{"account_id":241321,"reputation":1567,"user_id":512061,"display_name":"Micha&#235;l Demey"},"score":0,"creation_date":1506079245,"post_id":46346144,"comment_id":79686155,"body_markdown":"fyi: I&#39;m able to reproduce this.","body":"fyi: I&#39;m able to reproduce this."}],"answers":[{"tags":[],"owner":{"account_id":241321,"reputation":1567,"user_id":512061,"display_name":"Micha&#235;l Demey"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1506080861,"creation_date":1506080861,"answer_id":46364061,"question_id":46346144,"body_markdown":"If you search for the OID that iText chokes on, you&#39;ll see that this is &quot;ecdsa-with-sha256&quot;:\r\n\r\nhttp://www.oid-info.com/get/1.2.840.10045.4.3.2\r\n\r\nThis is not supported in iText 5. But we did add support for this in iText 7. Try to run this code sample with the latest iText 7 build:\r\n\r\n    BouncyCastleProvider provider = new BouncyCastleProvider();\r\n    Security.addProvider(provider);\r\n    \r\n    PdfReader reader = new PdfReader(INPUT);\r\n    PdfDocument pdfDocument = new PdfDocument(reader);\r\n        \r\n    PdfAcroForm acroForm = PdfAcroForm.getAcroForm(pdfDocument, false);\r\n    \r\n    for ( String name : acroForm.getFormFields().keySet() ) {\r\n        PdfFormField formField = acroForm.getField(name);\r\n        if (formField != null &amp;&amp; formField instanceof PdfSignatureFormField)    {\r\n            SignatureUtil signatureUtil = new SignatureUtil(pdfDocument);\r\n            PdfPKCS7 pkcs7 = signatureUtil.verifySignature(name);\r\n            pkcs7.verify();\r\n            [...]\r\n\r\n","title":"Digital Signature Verification with itext not working","body":"<p>If you search for the OID that iText chokes on, you'll see that this is \"ecdsa-with-sha256\":</p>\n\n<p><a href=\"http://www.oid-info.com/get/1.2.840.10045.4.3.2\" rel=\"noreferrer\">http://www.oid-info.com/get/1.2.840.10045.4.3.2</a></p>\n\n<p>This is not supported in iText 5. But we did add support for this in iText 7. Try to run this code sample with the latest iText 7 build:</p>\n\n<pre><code>BouncyCastleProvider provider = new BouncyCastleProvider();\nSecurity.addProvider(provider);\n\nPdfReader reader = new PdfReader(INPUT);\nPdfDocument pdfDocument = new PdfDocument(reader);\n\nPdfAcroForm acroForm = PdfAcroForm.getAcroForm(pdfDocument, false);\n\nfor ( String name : acroForm.getFormFields().keySet() ) {\n    PdfFormField formField = acroForm.getField(name);\n    if (formField != null &amp;&amp; formField instanceof PdfSignatureFormField)    {\n        SignatureUtil signatureUtil = new SignatureUtil(pdfDocument);\n        PdfPKCS7 pkcs7 = signatureUtil.verifySignature(name);\n        pkcs7.verify();\n        [...]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1506334882,"creation_date":1506334882,"answer_id":46402887,"question_id":46346144,"body_markdown":"As Micha&#235;l Demey already explained in his answer, iText 5.x currently does not support the algorithm OID in question.\r\n\r\nFortunately, though, iText 5.x mostly relies on the underlying BouncyCastle library for security algorithm support during signature validation and only does very little itself, all that is missing is that iText properly finds the name of the &quot;encryption algorithm&quot; ECDSA (in quotes as it is not really an encryption because there is no parallel decryption) for the OID.\r\n\r\nYou can add verification support of that OID in iText 5.x (tested in the current SNAPSHOT for 5.5.13) like this:\r\n\r\n    java.lang.reflect.Field algorithmNamesField = com.itextpdf.text.pdf.security.EncryptionAlgorithms.class.getDeclaredField(&quot;algorithmNames&quot;);\r\n    algorithmNamesField.setAccessible(true);\r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n    HashMap&lt;String, String&gt; algorithmNames = (HashMap&lt;String, String&gt;) algorithmNamesField.get(null);\r\n    algorithmNames.put(&quot;1.2.840.10045.4.3.2&quot;, &quot;ECDSA&quot;);\r\n\r\nWith this addition executed, iText validation\r\n\r\n    PdfReader reader = new PdfReader(resource);\r\n    AcroFields acroFields = reader.getAcroFields();\r\n\r\n    List&lt;String&gt; names = acroFields.getSignatureNames();\r\n    for (String name : names) {\r\n       System.out.println(&quot;Signature name: &quot; + name);\r\n       System.out.println(&quot;Signature covers whole document: &quot; + acroFields.signatureCoversWholeDocument(name));\r\n       System.out.println(&quot;Document revision: &quot; + acroFields.getRevision(name) + &quot; of &quot; + acroFields.getTotalRevisions());\r\n       PdfPKCS7 pk = acroFields.verifySignature(name);\r\n       System.out.println(&quot;Subject: &quot; + CertificateInfo.getSubjectFields(pk.getSigningCertificate()));\r\n       System.out.println(&quot;Document verifies: &quot; + pk.verify());\r\n    }\r\n\r\nshows\r\n\r\n&gt;     Signature name: Signature1\r\n    Signature covers whole document: true\r\n    Document revision: 1 of 1\r\n    Subject: {ST=[Rajasthan], C=[India], CN=[Devi Singh Pilwal], O=[Personal]}\r\n    Document verifies: true\r\n\r\n(Test code in [VerifySignature.java][1] method `testVerifyTestDsp`)\r\n\r\n###Beware...\r\n\r\n* The code above uses reflection as the `Map` in question is not public. Depending on your environment, such a solution might not be allowed. In that case you&#39;d have to patch iText accordingly. Furthermore, as the accessed `Map` is not public, the solution might fail in future versions. (This is unlikely as iText 5 is in maintenance mode, but one never knows.)\r\n\r\n* This only adds support for *this very OID*. Most likely support for a number of other OIDs can similarly be added but not necessarily for all.\r\n\r\n* Furthermore, I have only tested this in a *verification* use case. ECDSA signing might require completely different changes.\r\n\r\n  [1]: https://github.com/mkl-public/testarea-itext5/blob/master/src/test/java/mkl/testarea/itext5/signature/VerifySignature.java#L274\r\n\r\n","title":"Digital Signature Verification with itext not working","body":"<p>As Michaël Demey already explained in his answer, iText 5.x currently does not support the algorithm OID in question.</p>\n\n<p>Fortunately, though, iText 5.x mostly relies on the underlying BouncyCastle library for security algorithm support during signature validation and only does very little itself, all that is missing is that iText properly finds the name of the \"encryption algorithm\" ECDSA (in quotes as it is not really an encryption because there is no parallel decryption) for the OID.</p>\n\n<p>You can add verification support of that OID in iText 5.x (tested in the current SNAPSHOT for 5.5.13) like this:</p>\n\n<pre><code>java.lang.reflect.Field algorithmNamesField = com.itextpdf.text.pdf.security.EncryptionAlgorithms.class.getDeclaredField(\"algorithmNames\");\nalgorithmNamesField.setAccessible(true);\n@SuppressWarnings(\"unchecked\")\nHashMap&lt;String, String&gt; algorithmNames = (HashMap&lt;String, String&gt;) algorithmNamesField.get(null);\nalgorithmNames.put(\"1.2.840.10045.4.3.2\", \"ECDSA\");\n</code></pre>\n\n<p>With this addition executed, iText validation</p>\n\n<pre><code>PdfReader reader = new PdfReader(resource);\nAcroFields acroFields = reader.getAcroFields();\n\nList&lt;String&gt; names = acroFields.getSignatureNames();\nfor (String name : names) {\n   System.out.println(\"Signature name: \" + name);\n   System.out.println(\"Signature covers whole document: \" + acroFields.signatureCoversWholeDocument(name));\n   System.out.println(\"Document revision: \" + acroFields.getRevision(name) + \" of \" + acroFields.getTotalRevisions());\n   PdfPKCS7 pk = acroFields.verifySignature(name);\n   System.out.println(\"Subject: \" + CertificateInfo.getSubjectFields(pk.getSigningCertificate()));\n   System.out.println(\"Document verifies: \" + pk.verify());\n}\n</code></pre>\n\n<p>shows</p>\n\n<blockquote>\n<pre><code>Signature name: Signature1\nSignature covers whole document: true\nDocument revision: 1 of 1\nSubject: {ST=[Rajasthan], C=[India], CN=[Devi Singh Pilwal], O=[Personal]}\nDocument verifies: true\n</code></pre>\n</blockquote>\n\n<p>(Test code in <a href=\"https://github.com/mkl-public/testarea-itext5/blob/master/src/test/java/mkl/testarea/itext5/signature/VerifySignature.java#L274\" rel=\"nofollow noreferrer\">VerifySignature.java</a> method <code>testVerifyTestDsp</code>)</p>\n\n<h3>Beware...</h3>\n\n<ul>\n<li><p>The code above uses reflection as the <code>Map</code> in question is not public. Depending on your environment, such a solution might not be allowed. In that case you'd have to patch iText accordingly. Furthermore, as the accessed <code>Map</code> is not public, the solution might fail in future versions. (This is unlikely as iText 5 is in maintenance mode, but one never knows.)</p></li>\n<li><p>This only adds support for <em>this very OID</em>. Most likely support for a number of other OIDs can similarly be added but not necessarily for all.</p></li>\n<li><p>Furthermore, I have only tested this in a <em>verification</em> use case. ECDSA signing might require completely different changes.</p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":6396943,"reputation":392,"user_id":4960976,"display_name":"predrags"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677519087,"creation_date":1677519087,"answer_id":75583730,"question_id":46346144,"body_markdown":"For people still using old versions of *iText* library, like *iText 2.1.7*, verification support for ecdsa-with-sha256 algorithm can be, based on mkl&#39;s suggestion, added with this code:\r\n\r\n    // Get field with algorithms used in verification.\r\n    java.lang.reflect.Field algorithmNamesField = com.lowagie.text.pdf.PdfPKCS7.class.getDeclaredField(&quot;algorithmNames&quot;);\r\n    algorithmNamesField.setAccessible(true);\r\n\r\n    // Add missing algorithm to the map of algorithms.\r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n    HashMap&lt;String, String&gt; algorithmNames = (HashMap&lt;String, String&gt;) algorithmNamesField.get(null);\r\n    algorithmNames.put(&quot;1.2.840.10045.4.3.2&quot;, &quot;ECDSA&quot;);\r\n\r\nOther missing algorithms can also be added to the map, using the last line of code above.","title":"Digital Signature Verification with itext not working","body":"<p>For people still using old versions of <em>iText</em> library, like <em>iText 2.1.7</em>, verification support for ecdsa-with-sha256 algorithm can be, based on mkl's suggestion, added with this code:</p>\n<pre><code>// Get field with algorithms used in verification.\njava.lang.reflect.Field algorithmNamesField = com.lowagie.text.pdf.PdfPKCS7.class.getDeclaredField(&quot;algorithmNames&quot;);\nalgorithmNamesField.setAccessible(true);\n\n// Add missing algorithm to the map of algorithms.\n@SuppressWarnings(&quot;unchecked&quot;)\nHashMap&lt;String, String&gt; algorithmNames = (HashMap&lt;String, String&gt;) algorithmNamesField.get(null);\nalgorithmNames.put(&quot;1.2.840.10045.4.3.2&quot;, &quot;ECDSA&quot;);\n</code></pre>\n<p>Other missing algorithms can also be added to the map, using the last line of code above.</p>\n"},{"tags":[],"owner":{"account_id":3019840,"reputation":44,"user_id":2561137,"display_name":"dany"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689166532,"creation_date":1689165350,"answer_id":76670615,"question_id":46346144,"body_markdown":"Using .net and iTextSharp.LGPLv2.Core need this code (using Reflection) for recognize ECDSA:\r\n\r\nAdd algorithm name to PdfPkcs7 class:\r\n\r\n    Type type = typeof(iTextSharp.text.pdf.PdfPkcs7);\r\n    FieldInfo info = type.GetField(&quot;_algorithmNames&quot;, BindingFlags.NonPublic | BindingFlags.Static);\r\n    INullValueDictionary&lt;string, string&gt; _algorithmNames = (INullValueDictionary&lt;string, string&gt;)info.GetValue(null);\r\n    _algorithmNames[&quot;1.2.840.10045.4.3.1&quot;] = &quot;ECDSA&quot;;\r\n    _algorithmNames[&quot;1.2.840.10045.4.3.2&quot;] = &quot;ECDSA&quot;;\r\n    _algorithmNames[&quot;1.2.840.10045.4.3.3&quot;] = &quot;ECDSA&quot;;\r\n    _algorithmNames[&quot;1.2.840.10045.4.3.4&quot;] = &quot;ECDSA&quot;;\r\n\r\nor directly add AlgorithmMap to BouncyCastle  \r\n\r\n    Type type = typeof(Org.BouncyCastle.Security.SignerUtilities);\r\n    FieldInfo info = type.GetField(&quot;AlgorithmMap&quot;, BindingFlags.NonPublic | BindingFlags.Static);\r\n    IDictionary&lt;string, string&gt; AlgorithmMap = (IDictionary&lt;string, string&gt;)info.GetValue(null);\r\n    AlgorithmMap[&quot;SHA224WITH1.2.840.10045.4.3.1&quot;] = &quot;SHA-224withECDSA&quot;;\r\n    AlgorithmMap[&quot;SHA256WITH1.2.840.10045.4.3.2&quot;] = &quot;SHA-256withECDSA&quot;;\r\n    AlgorithmMap[&quot;SHA384WITH1.2.840.10045.4.3.3&quot;] = &quot;SHA-384withECDSA&quot;;\r\n    AlgorithmMap[&quot;SHA512WITH1.2.840.10045.4.3.4&quot;] = &quot;SHA-512withECDSA&quot;;","title":"Digital Signature Verification with itext not working","body":"<p>Using .net and iTextSharp.LGPLv2.Core need this code (using Reflection) for recognize ECDSA:</p>\n<p>Add algorithm name to PdfPkcs7 class:</p>\n<pre><code>Type type = typeof(iTextSharp.text.pdf.PdfPkcs7);\nFieldInfo info = type.GetField(&quot;_algorithmNames&quot;, BindingFlags.NonPublic | BindingFlags.Static);\nINullValueDictionary&lt;string, string&gt; _algorithmNames = (INullValueDictionary&lt;string, string&gt;)info.GetValue(null);\n_algorithmNames[&quot;1.2.840.10045.4.3.1&quot;] = &quot;ECDSA&quot;;\n_algorithmNames[&quot;1.2.840.10045.4.3.2&quot;] = &quot;ECDSA&quot;;\n_algorithmNames[&quot;1.2.840.10045.4.3.3&quot;] = &quot;ECDSA&quot;;\n_algorithmNames[&quot;1.2.840.10045.4.3.4&quot;] = &quot;ECDSA&quot;;\n</code></pre>\n<p>or directly add AlgorithmMap to BouncyCastle</p>\n<pre><code>Type type = typeof(Org.BouncyCastle.Security.SignerUtilities);\nFieldInfo info = type.GetField(&quot;AlgorithmMap&quot;, BindingFlags.NonPublic | BindingFlags.Static);\nIDictionary&lt;string, string&gt; AlgorithmMap = (IDictionary&lt;string, string&gt;)info.GetValue(null);\nAlgorithmMap[&quot;SHA224WITH1.2.840.10045.4.3.1&quot;] = &quot;SHA-224withECDSA&quot;;\nAlgorithmMap[&quot;SHA256WITH1.2.840.10045.4.3.2&quot;] = &quot;SHA-256withECDSA&quot;;\nAlgorithmMap[&quot;SHA384WITH1.2.840.10045.4.3.3&quot;] = &quot;SHA-384withECDSA&quot;;\nAlgorithmMap[&quot;SHA512WITH1.2.840.10045.4.3.4&quot;] = &quot;SHA-512withECDSA&quot;;\n</code></pre>\n"}],"owner":{"account_id":4716039,"reputation":381,"user_id":3815149,"accept_rate":92,"display_name":"dpilwal"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2802,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":46402887,"answer_count":4,"score":2,"last_activity_date":1689166532,"creation_date":1506002860,"question_id":46346144,"body_markdown":"I am using itext library for verify digitally signed pdf, following example available on [https://developers.itextpdf.com/examples/security/digital-signatures-white-paper/digital-signatures-chapter-5][1] site. I am getting following error while verifying the digitally signed document. Can any one help to resolve this.\r\n\r\n    Exception in thread &quot;main&quot; ExceptionConverter: java.security.NoSuchAlgorithmException: SHA256with1.2.840.10045.4.3.2 Signature not available\r\n\tat java.security.Signature.getInstance(Signature.java:229)\r\n\tat com.itextpdf.text.pdf.security.PdfPKCS7.initSignature(PdfPKCS7.java:697)\r\n\tat com.itextpdf.text.pdf.security.PdfPKCS7.&lt;init&gt;(PdfPKCS7.java:459)\r\n\tat com.itextpdf.text.pdf.AcroFields.verifySignature(AcroFields.java:2420)\r\n\tat com.itextpdf.text.pdf.AcroFields.verifySignature(AcroFields.java:2373)\r\n\tat nic.test.C5_01_SignatureIntegrity.verifySignature(C5_01_SignatureIntegrity.java:24)\r\n\tat test.ExtractSignInfor.inspectSignature(ExtractSignInfor.java:95)\r\n\tat test.ExtractSignInfor.inspectSignatures(ExtractSignInfor.java:135)\r\n\tat test.ExtractSignInfor.main(ExtractSignInfor.java:63)\r\n\r\n\r\n\r\n  [1]: https://developers.itextpdf.com/examples/security/digital-signatures-white-paper/digital-signatures-chapter-5","title":"Digital Signature Verification with itext not working","body":"<p>I am using itext library for verify digitally signed pdf, following example available on <a href=\"https://developers.itextpdf.com/examples/security/digital-signatures-white-paper/digital-signatures-chapter-5\" rel=\"nofollow noreferrer\">https://developers.itextpdf.com/examples/security/digital-signatures-white-paper/digital-signatures-chapter-5</a> site. I am getting following error while verifying the digitally signed document. Can any one help to resolve this.</p>\n\n<pre><code>Exception in thread \"main\" ExceptionConverter: java.security.NoSuchAlgorithmException: SHA256with1.2.840.10045.4.3.2 Signature not available\nat java.security.Signature.getInstance(Signature.java:229)\nat com.itextpdf.text.pdf.security.PdfPKCS7.initSignature(PdfPKCS7.java:697)\nat com.itextpdf.text.pdf.security.PdfPKCS7.&lt;init&gt;(PdfPKCS7.java:459)\nat com.itextpdf.text.pdf.AcroFields.verifySignature(AcroFields.java:2420)\nat com.itextpdf.text.pdf.AcroFields.verifySignature(AcroFields.java:2373)\nat nic.test.C5_01_SignatureIntegrity.verifySignature(C5_01_SignatureIntegrity.java:24)\nat test.ExtractSignInfor.inspectSignature(ExtractSignInfor.java:95)\nat test.ExtractSignInfor.inspectSignatures(ExtractSignInfor.java:135)\nat test.ExtractSignInfor.main(ExtractSignInfor.java:63)\n</code></pre>\n"},{"tags":["java","intellij-idea","jar"],"comments":[{"owner":{"display_name":"user2241537"},"score":1,"creation_date":1494927805,"post_id":34855649,"comment_id":75024188,"body_markdown":"It&#39;s a bit late but I&#39;ll comment: your dependencies include at least one signed jar. You should not extract the dependencies as explained here: http://stackoverflow.com/questions/41746177/how-do-i-create-a-runnable-jar-in-intellij-as-i-would-in-eclipse/43855741#43855741","body":"It&#39;s a bit late but I&#39;ll comment: your dependencies include at least one signed jar. You should not extract the dependencies as explained here: <a href=\"http://stackoverflow.com/questions/41746177/how-do-i-create-a-runnable-jar-in-intellij-as-i-would-in-eclipse/43855741#43855741\" title=\"how do i create a runnable jar in intellij as i would in eclipse\">stackoverflow.com/questions/41746177/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":5968065,"reputation":14213,"user_id":4691279,"accept_rate":58,"display_name":"hagrawal7777"},"down_vote_count":1,"up_vote_count":120,"is_accepted":true,"score":119,"last_activity_date":1689166531,"creation_date":1453124193,"answer_id":34856095,"question_id":34855649,"body_markdown":"Some of your dependency JARs is a signed JAR, so when you combine then all in one JAR and run that JAR then signature of the signed JAR doesn&#39;t match up and hence you get the security exception about signature mis-match.\r\n\r\nTo fix this you need to first identify which all dependency JARs are signed JARs and then exclude them. Depending upon whether you are using MAVEN or ANT, you have to take appropriate solution. Below are but you can read more [here][1], [here][2] and [here][3].\r\n\r\n**Maven:**\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;2.6&lt;/version&gt;\r\n        &lt;executions&gt;\r\n            &lt;execution&gt;\r\n                &lt;id&gt;unpack-dependencies&lt;/id&gt;\r\n                &lt;phase&gt;package&lt;/phase&gt;\r\n                &lt;goals&gt;\r\n                    &lt;goal&gt;unpack-dependencies&lt;/goal&gt;\r\n                &lt;/goals&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;excludeScope&gt;system&lt;/excludeScope&gt;\r\n                    &lt;excludes&gt;META-INF/*.SF,META-INF/*.DSA,META-INF/*.RSA&lt;/excludes&gt;\r\n                    &lt;excludeGroupIds&gt;junit,org.mockito,org.hamcrest&lt;/excludeGroupIds&gt;\r\n                    &lt;outputDirectory&gt;${project.build.directory}/classes&lt;/outputDirectory&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/execution&gt;\r\n        &lt;/executions&gt;\r\n    &lt;/plugin&gt;\r\n\r\n**ANT:**\r\n\r\n    &lt;jar destfile=&quot;app.jar&quot; basedir=&quot;${classes.dir}&quot;&gt;\r\n        &lt;zipfileset excludes=&quot;META-INF/**/*&quot; src=&quot;${lib.dir}/bcprov-jdk16-145.jar&quot;&gt;&lt;/zipfileset&gt;\r\n        &lt;manifest&gt;\r\n            &lt;attribute name=&quot;Main-Class&quot; value=&quot;app.Main&quot;/&gt;\r\n        &lt;/manifest&gt;\r\n    &lt;/jar&gt;\r\n\r\n&lt;hr&gt;&lt;/hr&gt;\r\n\r\n***Update based on OP&#39;s comment:***\r\n\r\n&quot;sqljdbc4.jar&quot; was the signed JAR in OP&#39;s external libraries. So, following above approach to systematically exclude the signature related files like .SF, .RSA or .DES or other algorithms files is the right way to move forward.\r\n\r\nIf these signature files are not excluded then security exception will occur because of signature mismatch.\r\n\r\n**How to know if a JAR is signed or not?:**  If a JAR contains files like files like .SF, .RSA or .DES or other algorithms files, then it is a signed JAR.  Or run `jarsigner -verify jarname.jar` and see if it outputs &quot;verified&quot;\r\n\r\n  [1]: https://web.archive.org/web/20160203043306/http://rohitvvv.info/blog/2015/Invalid-Singature.html\r\n  [2]: https://stackoverflow.com/questions/25842559/valid-jar-signature-for-javafx-projects\r\n  [3]: https://stackoverflow.com/questions/999489/invalid-signature-file-when-attempting-to-run-a-jar","title":"Invalid signature file digest for Manifest main attributes exception while trying to run jar file","body":"<p>Some of your dependency JARs is a signed JAR, so when you combine then all in one JAR and run that JAR then signature of the signed JAR doesn't match up and hence you get the security exception about signature mis-match.</p>\n<p>To fix this you need to first identify which all dependency JARs are signed JARs and then exclude them. Depending upon whether you are using MAVEN or ANT, you have to take appropriate solution. Below are but you can read more <a href=\"https://web.archive.org/web/20160203043306/http://rohitvvv.info/blog/2015/Invalid-Singature.html\" rel=\"nofollow noreferrer\">here</a>, <a href=\"https://stackoverflow.com/questions/25842559/valid-jar-signature-for-javafx-projects\">here</a> and <a href=\"https://stackoverflow.com/questions/999489/invalid-signature-file-when-attempting-to-run-a-jar\">here</a>.</p>\n<p><strong>Maven:</strong></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n    &lt;version&gt;2.6&lt;/version&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;unpack-dependencies&lt;/id&gt;\n            &lt;phase&gt;package&lt;/phase&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;unpack-dependencies&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n                &lt;excludeScope&gt;system&lt;/excludeScope&gt;\n                &lt;excludes&gt;META-INF/*.SF,META-INF/*.DSA,META-INF/*.RSA&lt;/excludes&gt;\n                &lt;excludeGroupIds&gt;junit,org.mockito,org.hamcrest&lt;/excludeGroupIds&gt;\n                &lt;outputDirectory&gt;${project.build.directory}/classes&lt;/outputDirectory&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p><strong>ANT:</strong></p>\n<pre><code>&lt;jar destfile=&quot;app.jar&quot; basedir=&quot;${classes.dir}&quot;&gt;\n    &lt;zipfileset excludes=&quot;META-INF/**/*&quot; src=&quot;${lib.dir}/bcprov-jdk16-145.jar&quot;&gt;&lt;/zipfileset&gt;\n    &lt;manifest&gt;\n        &lt;attribute name=&quot;Main-Class&quot; value=&quot;app.Main&quot;/&gt;\n    &lt;/manifest&gt;\n&lt;/jar&gt;\n</code></pre>\n<hr>\n<p><em><strong>Update based on OP's comment:</strong></em></p>\n<p>&quot;sqljdbc4.jar&quot; was the signed JAR in OP's external libraries. So, following above approach to systematically exclude the signature related files like .SF, .RSA or .DES or other algorithms files is the right way to move forward.</p>\n<p>If these signature files are not excluded then security exception will occur because of signature mismatch.</p>\n<p><strong>How to know if a JAR is signed or not?:</strong>  If a JAR contains files like files like .SF, .RSA or .DES or other algorithms files, then it is a signed JAR.  Or run <code>jarsigner -verify jarname.jar</code> and see if it outputs &quot;verified&quot;</p>\n"},{"tags":[],"owner":{"account_id":11510823,"reputation":21,"user_id":8435721,"display_name":"Cristi&#225;n Hidalgo"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1503684470,"creation_date":1503684470,"answer_id":45887217,"question_id":34855649,"body_markdown":"Instead of deleting the META-INF file, I changed the method in the Artifact definition. I deleted the &quot;Extracted&quot; library from the Artifact and added it again as &quot;Put into Output Root&quot;. \r\n\r\nThis way the library will be incorporated without any changes in the new jar file, which I assume is the objective of signing the library...\r\n\r\nBy the way, I am also using the sqljdbc.jar.","title":"Invalid signature file digest for Manifest main attributes exception while trying to run jar file","body":"<p>Instead of deleting the META-INF file, I changed the method in the Artifact definition. I deleted the \"Extracted\" library from the Artifact and added it again as \"Put into Output Root\". </p>\n\n<p>This way the library will be incorporated without any changes in the new jar file, which I assume is the objective of signing the library...</p>\n\n<p>By the way, I am also using the sqljdbc.jar.</p>\n"},{"tags":[],"owner":{"account_id":1909932,"reputation":616,"user_id":1724025,"display_name":"luv2learn"},"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1538256181,"creation_date":1538256181,"answer_id":52572665,"question_id":34855649,"body_markdown":"In my case, I am working with an uber-jar via maven-shade-plugin and @ruhsuzbaykus answer [here][1] was the solution. The strategy seems very similar to what @hagrawal proposes but the exclusions are added as a filter configuration of maven-shade-plugin.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/6743609/1724025","title":"Invalid signature file digest for Manifest main attributes exception while trying to run jar file","body":"<p>In my case, I am working with an uber-jar via maven-shade-plugin and @ruhsuzbaykus answer <a href=\"https://stackoverflow.com/a/6743609/1724025\">here</a> was the solution. The strategy seems very similar to what @hagrawal proposes but the exclusions are added as a filter configuration of maven-shade-plugin.</p>\n"},{"tags":[],"owner":{"account_id":11757082,"reputation":69,"user_id":8604431,"display_name":"Anshu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1593458861,"creation_date":1593458861,"answer_id":62645403,"question_id":34855649,"body_markdown":"For the same problem,I have done clean install and issue gone. So clean install is one option by which you can build with fresh downloaded jars.","title":"Invalid signature file digest for Manifest main attributes exception while trying to run jar file","body":"<p>For the same problem,I have done clean install and issue gone. So clean install is one option by which you can build with fresh downloaded jars.</p>\n"},{"tags":[],"owner":{"account_id":371764,"reputation":1687,"user_id":720480,"display_name":"tom"},"down_vote_count":0,"up_vote_count":62,"is_accepted":false,"score":62,"last_activity_date":1602762761,"creation_date":1602164249,"answer_id":64263739,"question_id":34855649,"body_markdown":"just filter the signature files from your uber jar\r\n\r\n```xml\r\n &lt;plugin&gt;\r\n\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n\t&lt;version&gt;3.2.4&lt;/version&gt;\r\n\t&lt;executions&gt;\r\n\t\t&lt;execution&gt;\r\n\t\t\t&lt;phase&gt;package&lt;/phase&gt;\r\n\t\t\t&lt;goals&gt;\r\n\t\t\t\t&lt;goal&gt;shade&lt;/goal&gt;\r\n\t\t\t&lt;/goals&gt;\r\n\t\t\t&lt;configuration&gt;\r\n\t\t\t\t&lt;minimizeJar&gt;true&lt;/minimizeJar&gt;\r\n\t\t\t\t&lt;filters&gt;\r\n\t\t\t\t\t&lt;filter&gt;\r\n\t\t\t\t\t\t&lt;artifact&gt;*:*&lt;/artifact&gt;\r\n\t\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t\t&lt;exclude&gt;META-INF/*.SF&lt;/exclude&gt;\r\n\t\t\t\t\t\t\t&lt;exclude&gt;META-INF/*.DSA&lt;/exclude&gt;\r\n\t\t\t\t\t\t\t&lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt;\r\n\t\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t\t&lt;/filter&gt;\r\n\t\t\t\t&lt;/filters&gt;\r\n\t\t\t&lt;/configuration&gt;\r\n\t\t&lt;/execution&gt;\r\n\t&lt;/executions&gt;\r\n&lt;/plugin&gt;\r\n```","title":"Invalid signature file digest for Manifest main attributes exception while trying to run jar file","body":"<p>just filter the signature files from your uber jar</p>\n<pre class=\"lang-xml prettyprint-override\"><code> &lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.2.4&lt;/version&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;phase&gt;package&lt;/phase&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;shade&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n                &lt;minimizeJar&gt;true&lt;/minimizeJar&gt;\n                &lt;filters&gt;\n                    &lt;filter&gt;\n                        &lt;artifact&gt;*:*&lt;/artifact&gt;\n                        &lt;excludes&gt;\n                            &lt;exclude&gt;META-INF/*.SF&lt;/exclude&gt;\n                            &lt;exclude&gt;META-INF/*.DSA&lt;/exclude&gt;\n                            &lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt;\n                        &lt;/excludes&gt;\n                    &lt;/filter&gt;\n                &lt;/filters&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1512441,"reputation":386,"user_id":1414182,"display_name":"Rafael Parungao"},"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1602812498,"creation_date":1602812498,"answer_id":64381822,"question_id":34855649,"body_markdown":"In the compiled jar need to delete the security signed files. To do this follow this command\r\n\r\nzip -d jarfile.jar &#39;META-INF/.SF&#39; &#39;META-INF/.RSA&#39; &#39;META-INF/*SF&#39;","title":"Invalid signature file digest for Manifest main attributes exception while trying to run jar file","body":"<p>In the compiled jar need to delete the security signed files. To do this follow this command</p>\n<p>zip -d jarfile.jar 'META-INF/.SF' 'META-INF/.RSA' 'META-INF/*SF'</p>\n"},{"tags":[],"owner":{"account_id":4654013,"reputation":11203,"user_id":4370279,"accept_rate":61,"display_name":"theapache64"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1616863312,"creation_date":1616863312,"answer_id":66833743,"question_id":34855649,"body_markdown":"I&#39;ve added below lines to my `build.gradle.kts` and it resolved the issue\r\n\r\n```kotlin\r\ntasks.withType&lt;org.gradle.jvm.tasks.Jar&gt;() {\r\n    exclude(&quot;META-INF/BC1024KE.RSA&quot;, &quot;META-INF/BC1024KE.SF&quot;, &quot;META-INF/BC1024KE.DSA&quot;)\r\n    exclude(&quot;META-INF/BC2048KE.RSA&quot;, &quot;META-INF/BC2048KE.SF&quot;, &quot;META-INF/BC2048KE.DSA&quot;)\r\n}\r\n```","title":"Invalid signature file digest for Manifest main attributes exception while trying to run jar file","body":"<p>I've added below lines to my <code>build.gradle.kts</code> and it resolved the issue</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>tasks.withType&lt;org.gradle.jvm.tasks.Jar&gt;() {\n    exclude(&quot;META-INF/BC1024KE.RSA&quot;, &quot;META-INF/BC1024KE.SF&quot;, &quot;META-INF/BC1024KE.DSA&quot;)\n    exclude(&quot;META-INF/BC2048KE.RSA&quot;, &quot;META-INF/BC2048KE.SF&quot;, &quot;META-INF/BC2048KE.DSA&quot;)\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6453957,"reputation":664,"user_id":5000016,"display_name":"ThanhLD"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1617164051,"creation_date":1617164051,"answer_id":66881564,"question_id":34855649,"body_markdown":"In my case, without use gradle or maven for build, I create Artifacts as Jar type\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/SrGlx.png\r\n\r\nAfter build Artifacts, I get a result is a jar file. I rename it to .rar (or .zip) and open it as archive file, then find META-INF folder and delete all find with .SF, .DSA, .RSA extension, rearchive it again and rename to .jar. DONE.","title":"Invalid signature file digest for Manifest main attributes exception while trying to run jar file","body":"<p>In my case, without use gradle or maven for build, I create Artifacts as Jar type\n<a href=\"https://i.stack.imgur.com/SrGlx.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/SrGlx.png\" alt=\"enter image description here\" /></a></p>\n<p>After build Artifacts, I get a result is a jar file. I rename it to .rar (or .zip) and open it as archive file, then find META-INF folder and delete all find with .SF, .DSA, .RSA extension, rearchive it again and rename to .jar. DONE.</p>\n"},{"tags":[],"owner":{"account_id":14496438,"reputation":291,"user_id":12528345,"display_name":"Sam"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1624402686,"creation_date":1624402686,"answer_id":68091564,"question_id":34855649,"body_markdown":"Based on [Venryx&#39;s comment][1], you can just open the jar file as an archive in [7-Zip][2] and delete the .RSA, .SF, and .DSA files directly. You can rebuild your artifact which depended on the signed library afterwards and the error should go away.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/34855649/invalid-signature-file-digest-for-manifest-main-attributes-exception-while-tryin#comment119577241_66881564\r\n  [2]: https://www.7-zip.org/","title":"Invalid signature file digest for Manifest main attributes exception while trying to run jar file","body":"<p>Based on <a href=\"https://stackoverflow.com/questions/34855649/invalid-signature-file-digest-for-manifest-main-attributes-exception-while-tryin#comment119577241_66881564\">Venryx's comment</a>, you can just open the jar file as an archive in <a href=\"https://www.7-zip.org/\" rel=\"nofollow noreferrer\">7-Zip</a> and delete the .RSA, .SF, and .DSA files directly. You can rebuild your artifact which depended on the signed library afterwards and the error should go away.</p>\n"},{"tags":[],"owner":{"account_id":1361723,"reputation":169,"user_id":1298960,"accept_rate":67,"display_name":"DS009"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1632781215,"creation_date":1632770216,"answer_id":69352153,"question_id":34855649,"body_markdown":"For anyone working with an Android gradle application, you can resolve this by excluding the files in `build.gradle` in the `packagingOptions` section.\r\n\r\nHere is an example:\r\n\r\n```\r\npackagingOptions {\r\n  exclude &#39;META-INF/LICENSE&#39;\r\n  exclude &#39;META-INF/LICENSE.txt&#39;\r\n  exclude &#39;META-INF/MSFTSIG.SF&#39;\r\n  exclude &#39;META_INF/ECLIPSE_.SF&#39;\r\n  exclude(&quot;META-INF/*.kotlin_module&quot;)\r\n}\r\n```\r\n\r\nNote: for some reason using regular expression (META-INF/*.SF) didn&#39;t work for me. So I have to give the complete name to work.","title":"Invalid signature file digest for Manifest main attributes exception while trying to run jar file","body":"<p>For anyone working with an Android gradle application, you can resolve this by excluding the files in <code>build.gradle</code> in the <code>packagingOptions</code> section.</p>\n<p>Here is an example:</p>\n<pre><code>packagingOptions {\n  exclude 'META-INF/LICENSE'\n  exclude 'META-INF/LICENSE.txt'\n  exclude 'META-INF/MSFTSIG.SF'\n  exclude 'META_INF/ECLIPSE_.SF'\n  exclude(&quot;META-INF/*.kotlin_module&quot;)\n}\n</code></pre>\n<p>Note: for some reason using regular expression (META-INF/*.SF) didn't work for me. So I have to give the complete name to work.</p>\n"},{"tags":[],"owner":{"account_id":2435239,"reputation":46,"user_id":2125308,"display_name":"sgorgulu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635359646,"creation_date":1635359646,"answer_id":69743823,"question_id":34855649,"body_markdown":"I had the same problem when running the application. At build step maven shade plugin warned me about overlapped resources. I realized that I have redundant jar dependency. After removing it, the problem was resolved.\r\n\r\n\r\n     [INFO] Skipping pom dependency com.sun.xml.ws:jaxws-ri:pom:2.3.2 in the shaded jar.\r\n     [WARNING] Discovered module-info.class. Shading will break its strong encapsulation.\r\n     ...\r\n     ...\r\n\r\n     [WARNING] maven-shade-plugin has detected that some class files are\r\n     [WARNING] present in two or more JARs. When this happens, only one\r\n     [WARNING] single version of the class is copied to the uber jar.","title":"Invalid signature file digest for Manifest main attributes exception while trying to run jar file","body":"<p>I had the same problem when running the application. At build step maven shade plugin warned me about overlapped resources. I realized that I have redundant jar dependency. After removing it, the problem was resolved.</p>\n<pre><code> [INFO] Skipping pom dependency com.sun.xml.ws:jaxws-ri:pom:2.3.2 in the shaded jar.\n [WARNING] Discovered module-info.class. Shading will break its strong encapsulation.\n ...\n ...\n\n [WARNING] maven-shade-plugin has detected that some class files are\n [WARNING] present in two or more JARs. When this happens, only one\n [WARNING] single version of the class is copied to the uber jar.\n</code></pre>\n"}],"owner":{"account_id":2733661,"reputation":2717,"user_id":2356808,"accept_rate":60,"display_name":"Fay007"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":160916,"favorite_count":0,"down_vote_count":0,"up_vote_count":117,"accepted_answer_id":34856095,"answer_count":11,"score":117,"last_activity_date":1689166531,"creation_date":1453122788,"question_id":34855649,"body_markdown":"I am trying to run the jar file of my project. I am working on intelliJ and have use artifacts to generate the jar file. But everytime i am trying to run my jar file its giving me exception.\r\n\r\n    java.lang.SecurityException: Invalid signature file digest for Manifest main attributes\r\n        at sun.security.util.SignatureFileVerifier.processImpl(SignatureFileVerifier.java:284)\r\n        at sun.security.util.SignatureFileVerifier.process(SignatureFileVerifier.java:238)\r\n        at java.util.jar.JarVerifier.processEntry(JarVerifier.java:316)\r\n        at java.util.jar.JarVerifier.update(JarVerifier.java:228)\r\n        at java.util.jar.JarFile.initializeVerifier(JarFile.java:383)\r\n        at java.util.jar.JarFile.getInputStream(JarFile.java:450)\r\n        at sun.misc.JarIndex.getJarIndex(JarIndex.java:137)\r\n        at sun.misc.URLClassPath$JarLoader$1.run(URLClassPath.java:839)\r\n        at sun.misc.URLClassPath$JarLoader$1.run(URLClassPath.java:831)\r\n        at java.security.AccessController.doPrivileged(Native Method)\r\n        at sun.misc.URLClassPath$JarLoader.ensureOpen(URLClassPath.java:830)\r\n        at sun.misc.URLClassPath$JarLoader.&lt;init&gt;(URLClassPath.java:803)\r\n        at sun.misc.URLClassPath$3.run(URLClassPath.java:530)\r\n        at sun.misc.URLClassPath$3.run(URLClassPath.java:520)\r\n        at java.security.AccessController.doPrivileged(Native Method)\r\n        at sun.misc.URLClassPath.getLoader(URLClassPath.java:519)\r\n        at sun.misc.URLClassPath.getLoader(URLClassPath.java:492)\r\n        at sun.misc.URLClassPath.getNextLoader(URLClassPath.java:457)\r\n        at sun.misc.URLClassPath.getResource(URLClassPath.java:211)\r\n        at java.net.URLClassLoader$1.run(URLClassLoader.java:365)\r\n        at java.net.URLClassLoader$1.run(URLClassLoader.java:362)\r\n        at java.security.AccessController.doPrivileged(Native Method)\r\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:361)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\r\n        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:331)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\r\n        at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:495)\r\n    Error: A JNI error has occurred, please check your installation and try again\r\n    Exception in thread &quot;main&quot; \r\n\r\nAnd this is my manifest file:\r\n\r\n    Manifest-Version: 1.0\r\n    Main-Class: Main\r\n\r\nThe project&#39;s external libraries:\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/Ec5C1.png\r\n  [2]: http://i.stack.imgur.com/dIdte.png","title":"Invalid signature file digest for Manifest main attributes exception while trying to run jar file","body":"<p>I am trying to run the jar file of my project. I am working on intelliJ and have use artifacts to generate the jar file. But everytime i am trying to run my jar file its giving me exception.</p>\n<pre><code>java.lang.SecurityException: Invalid signature file digest for Manifest main attributes\n    at sun.security.util.SignatureFileVerifier.processImpl(SignatureFileVerifier.java:284)\n    at sun.security.util.SignatureFileVerifier.process(SignatureFileVerifier.java:238)\n    at java.util.jar.JarVerifier.processEntry(JarVerifier.java:316)\n    at java.util.jar.JarVerifier.update(JarVerifier.java:228)\n    at java.util.jar.JarFile.initializeVerifier(JarFile.java:383)\n    at java.util.jar.JarFile.getInputStream(JarFile.java:450)\n    at sun.misc.JarIndex.getJarIndex(JarIndex.java:137)\n    at sun.misc.URLClassPath$JarLoader$1.run(URLClassPath.java:839)\n    at sun.misc.URLClassPath$JarLoader$1.run(URLClassPath.java:831)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at sun.misc.URLClassPath$JarLoader.ensureOpen(URLClassPath.java:830)\n    at sun.misc.URLClassPath$JarLoader.&lt;init&gt;(URLClassPath.java:803)\n    at sun.misc.URLClassPath$3.run(URLClassPath.java:530)\n    at sun.misc.URLClassPath$3.run(URLClassPath.java:520)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at sun.misc.URLClassPath.getLoader(URLClassPath.java:519)\n    at sun.misc.URLClassPath.getLoader(URLClassPath.java:492)\n    at sun.misc.URLClassPath.getNextLoader(URLClassPath.java:457)\n    at sun.misc.URLClassPath.getResource(URLClassPath.java:211)\n    at java.net.URLClassLoader$1.run(URLClassLoader.java:365)\n    at java.net.URLClassLoader$1.run(URLClassLoader.java:362)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:361)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:331)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\n    at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:495)\nError: A JNI error has occurred, please check your installation and try again\nException in thread &quot;main&quot; \n</code></pre>\n<p>And this is my manifest file:</p>\n<pre><code>Manifest-Version: 1.0\nMain-Class: Main\n</code></pre>\n<p>The project's external libraries:</p>\n<p><a href=\"https://i.stack.imgur.com/dIdte.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/dIdte.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","swing","refresh","jtable","tablemodel"],"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1684918864,"post_id":3179136,"comment_id":134586357,"body_markdown":"very old question without enough details to pin-point the exact reason of the problem (DefaultTableModel fires the notifications as needed, so the error is its usage, most probably) - still confusing current readers ;)","body":"very old question without enough details to pin-point the exact reason of the problem (DefaultTableModel fires the notifications as needed, so the error is its usage, most probably) - still confusing current readers ;)"}],"answers":[{"tags":[],"owner":{"account_id":9400,"reputation":54564,"user_id":17343,"accept_rate":81,"display_name":"Peter Lang"},"down_vote_count":2,"up_vote_count":134,"is_accepted":true,"score":132,"last_activity_date":1393862016,"creation_date":1278330858,"answer_id":3179243,"question_id":3179136,"body_markdown":"If you want to notify your `JTable` about changes of your data, use  \r\n`tableModel.fireTableDataChanged()`\r\n\r\nFrom the [documentation][1]:\r\n\r\n&gt; Notifies all listeners that all cell values in the table&#39;s rows may have changed. The number of rows may also have changed and the JTable should redraw the table from scratch. The structure of the table (as in the order of the columns) is assumed to be the same. \r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/javax/swing/table/AbstractTableModel.html#fireTableDataChanged%28%29","title":"JTable How to refresh table model after insert delete or update the data.","body":"<p>If you want to notify your <code>JTable</code> about changes of your data, use<br>\n<code>tableModel.fireTableDataChanged()</code></p>\n\n<p>From the <a href=\"http://docs.oracle.com/javase/7/docs/api/javax/swing/table/AbstractTableModel.html#fireTableDataChanged%28%29\" rel=\"noreferrer\">documentation</a>:</p>\n\n<blockquote>\n  <p>Notifies all listeners that all cell values in the table's rows may have changed. The number of rows may also have changed and the JTable should redraw the table from scratch. The structure of the table (as in the order of the columns) is assumed to be the same. </p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":398211,"reputation":914,"user_id":762766,"accept_rate":64,"display_name":"nkvnkv"},"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1305993285,"creation_date":1305992666,"answer_id":6082778,"question_id":3179136,"body_markdown":"I did it like this in my Jtable its autorefreshing after 300 ms;\r\n\r\n\r\n\r\n    DefaultTableModel tableModel = new DefaultTableModel(){\r\n    public boolean isCellEditable(int nRow, int nCol) {\r\n                    return false;\r\n                }\r\n    };\r\n    JTable table = new JTable();\r\n    \r\n    Timer t = new Timer(300, new ActionListener() {\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic void actionPerformed(ActionEvent e) {\r\n    \t\t\t\taddColumns();\r\n    \t\t\t\tremakeData(set);\r\n    \t\t\t\ttable.setModel(model);\r\n    \t\t\t}\r\n    \t\t});\r\n    \t\tt.start();\r\n\r\n    private void addColumns() {\r\n    \t\tmodel.setColumnCount(0);\r\n    \t\tmodel.addColumn(&quot;NAME&quot;);\r\n                model.addColumn(&quot;EMAIL&quot;);} \r\n\r\n     private void remakeData(CollectionType&lt; Objects &gt; name) {\r\n        model.setRowCount(0);\r\n        for (CollectionType Objects : name){\r\n        String n = Object.getName();\r\n        String e = Object.getEmail();\r\n        model.insertRow(model.getRowCount(),new Object[] { n,e });\r\n        }}\r\n\r\nI doubt it will do good with large number of objects like over 500, only other way is to implement TableModelListener in your class, but i did not understand how to use it well. look at http://download.oracle.com/javase/tutorial/uiswing/components/table.html#modelchange\r\n","title":"JTable How to refresh table model after insert delete or update the data.","body":"<p>I did it like this in my Jtable its autorefreshing after 300 ms;</p>\n\n<pre><code>DefaultTableModel tableModel = new DefaultTableModel(){\npublic boolean isCellEditable(int nRow, int nCol) {\n                return false;\n            }\n};\nJTable table = new JTable();\n\nTimer t = new Timer(300, new ActionListener() {\n\n            @Override\n            public void actionPerformed(ActionEvent e) {\n                addColumns();\n                remakeData(set);\n                table.setModel(model);\n            }\n        });\n        t.start();\n\nprivate void addColumns() {\n        model.setColumnCount(0);\n        model.addColumn(\"NAME\");\n            model.addColumn(\"EMAIL\");} \n\n private void remakeData(CollectionType&lt; Objects &gt; name) {\n    model.setRowCount(0);\n    for (CollectionType Objects : name){\n    String n = Object.getName();\n    String e = Object.getEmail();\n    model.insertRow(model.getRowCount(),new Object[] { n,e });\n    }}\n</code></pre>\n\n<p>I doubt it will do good with large number of objects like over 500, only other way is to implement TableModelListener in your class, but i did not understand how to use it well. look at <a href=\"http://download.oracle.com/javase/tutorial/uiswing/components/table.html#modelchange\" rel=\"nofollow\">http://download.oracle.com/javase/tutorial/uiswing/components/table.html#modelchange</a></p>\n"},{"tags":[],"owner":{"account_id":976773,"reputation":11,"user_id":997679,"display_name":"tom"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1341444698,"creation_date":1318757934,"answer_id":7783467,"question_id":3179136,"body_markdown":"Would it not be better to use `java.util.Observable` and `java.util.Observer` that will cause the table to update?","title":"JTable How to refresh table model after insert delete or update the data.","body":"<p>Would it not be better to use <code>java.util.Observable</code> and <code>java.util.Observer</code> that will cause the table to update?</p>\n"},{"tags":[],"owner":{"account_id":954960,"reputation":13272,"user_id":980442,"accept_rate":25,"display_name":"Daniel De Le&#243;n"},"down_vote_count":2,"up_vote_count":24,"is_accepted":false,"score":22,"last_activity_date":1328307082,"creation_date":1328304262,"answer_id":9135693,"question_id":3179136,"body_markdown":"The faster way for your case is:\r\n\r\n        jTable.repaint(); // Repaint all the component (all Cells).\r\n\r\nThe optimized way when one or few cell change:\r\n\r\n        ((AbstractTableModel) jTable.getModel()).fireTableCellUpdated(x, 0); // Repaint one cell.","title":"JTable How to refresh table model after insert delete or update the data.","body":"<p>The faster way for your case is:</p>\n\n<pre><code>    jTable.repaint(); // Repaint all the component (all Cells).\n</code></pre>\n\n<p>The optimized way when one or few cell change:</p>\n\n<pre><code>    ((AbstractTableModel) jTable.getModel()).fireTableCellUpdated(x, 0); // Repaint one cell.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2840072,"reputation":97,"user_id":2439869,"display_name":"Achille"},"down_vote_count":2,"up_vote_count":10,"is_accepted":false,"score":8,"last_activity_date":1369994944,"creation_date":1369992892,"answer_id":16854215,"question_id":3179136,"body_markdown":"try this\r\n\r\n    public void setUpTableData() {\r\n        DefaultTableModel tableModel = (DefaultTableModel) jTable.getModel();\r\n\r\n        /**\r\n        * additional code.\r\n        **/\r\n        tableModel.setRowCount(0);\r\n        /**/\r\n        ArrayList&lt;Contact&gt; list = new ArrayList&lt;Contact&gt;();\r\n        if (!con.equals(&quot;&quot;))\r\n            list = sql.getContactListsByGroup(con);\r\n        else\r\n            list = sql.getContactLists();\r\n        for (int i = 0; i &lt; list.size(); i++) {\r\n            String[] data = new String[7];\r\n\r\n            data[0] = list.get(i).getName();\r\n            data[1] = list.get(i).getEmail();\r\n            data[2] = list.get(i).getPhone1();\r\n            data[3] = list.get(i).getPhone2();\r\n            data[4] = list.get(i).getGroup();\r\n            data[5] = list.get(i).getId();\r\n\r\n            tableModel.addRow(data);\r\n        }\r\n        jTable.setModel(tableModel);\r\n        /**\r\n        * additional code.\r\n        **/\r\n        tableModel.fireTableDataChanged();\r\n        /**/\r\n    }","title":"JTable How to refresh table model after insert delete or update the data.","body":"<p>try this</p>\n\n<pre><code>public void setUpTableData() {\n    DefaultTableModel tableModel = (DefaultTableModel) jTable.getModel();\n\n    /**\n    * additional code.\n    **/\n    tableModel.setRowCount(0);\n    /**/\n    ArrayList&lt;Contact&gt; list = new ArrayList&lt;Contact&gt;();\n    if (!con.equals(\"\"))\n        list = sql.getContactListsByGroup(con);\n    else\n        list = sql.getContactLists();\n    for (int i = 0; i &lt; list.size(); i++) {\n        String[] data = new String[7];\n\n        data[0] = list.get(i).getName();\n        data[1] = list.get(i).getEmail();\n        data[2] = list.get(i).getPhone1();\n        data[3] = list.get(i).getPhone2();\n        data[4] = list.get(i).getGroup();\n        data[5] = list.get(i).getId();\n\n        tableModel.addRow(data);\n    }\n    jTable.setModel(tableModel);\n    /**\n    * additional code.\n    **/\n    tableModel.fireTableDataChanged();\n    /**/\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17522702,"reputation":41,"user_id":12708379,"display_name":"Sundar Garud"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689166286,"creation_date":1689166286,"answer_id":76670774,"question_id":3179136,"body_markdown":"    To inform the Jtable about data change do this - \r\n\r\n    DefaultTableModel tableModel = new DefaultTableModel(yourData, yourColumns);\r\n    //Set data and columns in tableModel to JTable\r\n    JTable yourTable= new JTable(model);\r\n    \r\n    //After data Changed fire change detector\r\n    tableModel.fireTableDataChanged();\r\n\r\n","title":"JTable How to refresh table model after insert delete or update the data.","body":"<pre><code>To inform the Jtable about data change do this - \n\nDefaultTableModel tableModel = new DefaultTableModel(yourData, yourColumns);\n//Set data and columns in tableModel to JTable\nJTable yourTable= new JTable(model);\n\n//After data Changed fire change detector\ntableModel.fireTableDataChanged();\n</code></pre>\n"}],"owner":{"account_id":84665,"reputation":8558,"user_id":236501,"accept_rate":59,"display_name":"user236501"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":390154,"favorite_count":0,"down_vote_count":1,"up_vote_count":96,"accepted_answer_id":3179243,"answer_count":6,"score":95,"last_activity_date":1689166286,"creation_date":1278329663,"question_id":3179136,"body_markdown":"This is my jTable \r\n\r\n    private JTable getJTable() {\r\n\t\tString[] colName = { &quot;Name&quot;, &quot;Email&quot;, &quot;Contact No. 1&quot;, &quot;Contact No. 2&quot;,\r\n\t\t\t\t&quot;Group&quot;, &quot;&quot; };\r\n\t\tif (jTable == null) {\r\n\t\t\tjTable = new JTable() {\r\n\t\t\t\tpublic boolean isCellEditable(int nRow, int nCol) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t\tDefaultTableModel contactTableModel = (DefaultTableModel) jTable\r\n\t\t\t\t.getModel();\r\n\t\tcontactTableModel.setColumnIdentifiers(colName);\r\n\t\tjTable.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);\r\n\t\treturn jTable;\r\n\t}\r\n\r\nI will call this method to retrieve the data from database and put it into table model\r\n\r\n    public void setUpTableData() {\r\n\t\tDefaultTableModel tableModel = (DefaultTableModel) jTable.getModel();\r\n\t\tArrayList&lt;Contact&gt; list = new ArrayList&lt;Contact&gt;();\r\n\t\tif (!con.equals(&quot;&quot;))\r\n\t\t\tlist = sql.getContactListsByGroup(con);\r\n\t\telse\r\n\t\t\tlist = sql.getContactLists();\r\n\t\tfor (int i = 0; i &lt; list.size(); i++) {\r\n\t\t\tString[] data = new String[7];\r\n\t\t\t\r\n\t\t\t\tdata[0] = list.get(i).getName();\r\n\t\t\t\tdata[1] = list.get(i).getEmail();\r\n\t\t\t\tdata[2] = list.get(i).getPhone1();\r\n\t\t\t\tdata[3] = list.get(i).getPhone2();\r\n\t\t\t\tdata[4] = list.get(i).getGroup();\r\n\t\t\t\tdata[5] = list.get(i).getId();\r\n\t\t\t\r\n\t\t\ttableModel.addRow(data);\r\n\t\t}\r\n\t\tjTable.setModel(tableModel);\r\n\t}\r\n\r\nCurrently I was using this method to refresh the table after updating the table data. I will first clear the table \r\n\r\n    DefaultTableModel tableModel = (DefaultTableModel) jTable.getModel();\r\n    tableModel.setRowCount(0);\r\n\r\nand then restructure the table model again so it will refresh the jTable. But I was thinking is there any best practices or better way to do that? ","title":"JTable How to refresh table model after insert delete or update the data.","body":"<p>This is my jTable </p>\n\n<pre><code>private JTable getJTable() {\n    String[] colName = { \"Name\", \"Email\", \"Contact No. 1\", \"Contact No. 2\",\n            \"Group\", \"\" };\n    if (jTable == null) {\n        jTable = new JTable() {\n            public boolean isCellEditable(int nRow, int nCol) {\n                return false;\n            }\n        };\n    }\n    DefaultTableModel contactTableModel = (DefaultTableModel) jTable\n            .getModel();\n    contactTableModel.setColumnIdentifiers(colName);\n    jTable.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);\n    return jTable;\n}\n</code></pre>\n\n<p>I will call this method to retrieve the data from database and put it into table model</p>\n\n<pre><code>public void setUpTableData() {\n    DefaultTableModel tableModel = (DefaultTableModel) jTable.getModel();\n    ArrayList&lt;Contact&gt; list = new ArrayList&lt;Contact&gt;();\n    if (!con.equals(\"\"))\n        list = sql.getContactListsByGroup(con);\n    else\n        list = sql.getContactLists();\n    for (int i = 0; i &lt; list.size(); i++) {\n        String[] data = new String[7];\n\n            data[0] = list.get(i).getName();\n            data[1] = list.get(i).getEmail();\n            data[2] = list.get(i).getPhone1();\n            data[3] = list.get(i).getPhone2();\n            data[4] = list.get(i).getGroup();\n            data[5] = list.get(i).getId();\n\n        tableModel.addRow(data);\n    }\n    jTable.setModel(tableModel);\n}\n</code></pre>\n\n<p>Currently I was using this method to refresh the table after updating the table data. I will first clear the table </p>\n\n<pre><code>DefaultTableModel tableModel = (DefaultTableModel) jTable.getModel();\ntableModel.setRowCount(0);\n</code></pre>\n\n<p>and then restructure the table model again so it will refresh the jTable. But I was thinking is there any best practices or better way to do that? </p>\n"},{"tags":["java","kotlin","jooq","byte-buddy","mockk"],"comments":[{"owner":{"account_id":1284143,"reputation":43090,"user_id":1237575,"accept_rate":96,"display_name":"Rafael Winterhalter"},"score":0,"creation_date":1689192626,"post_id":76665966,"comment_id":135180411,"body_markdown":"You can set a system property net.bytebuddy.dump=/some/folder to get the processed class files written out. You can then use javap to compare signatures.","body":"You can set a system property net.bytebuddy.dump=/some/folder to get the processed class files written out. You can then use javap to compare signatures."},{"owner":{"account_id":44871,"reputation":22865,"user_id":131929,"accept_rate":83,"display_name":"Marcel St&#246;r"},"score":0,"creation_date":1689256319,"post_id":76665966,"comment_id":135190094,"body_markdown":"Thanks. In the issue I filed, one of the maintainers is hinting at MockK maybe using your ByteBuddy incorrectly.","body":"Thanks. In the issue I filed, one of the maintainers is hinting at MockK maybe using your ByteBuddy incorrectly."}],"owner":{"account_id":44871,"reputation":22865,"user_id":131929,"accept_rate":83,"display_name":"Marcel St&#246;r"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1689166149,"creation_date":1689111762,"question_id":76665966,"body_markdown":"I work on a code basis written in Kotlin that uses jOOQ to interact with databases. It uses jOOQ to generate the &quot;meta model&quot; i.e. classes abstracting tables, fields, etc. jOOQ generates those classes in Java. Our unit tests mock some of the jOOQ classes using MockK, a Kotlin mocking library.\r\n\r\nHere&#39;s a simplified example.\r\n\r\n```kotlin\r\n@Test\r\nfun `should throw exception for nonexistent fields`() {\r\n    // given\r\n    val table = mockk&lt;TableImpl&lt;*&gt;&gt;()\r\n    every { table.field(any&lt;String&gt;()) } returns null\r\n    every { table.name } returns &quot;table-name&quot;\r\n\r\n    // when\r\n    // then\r\n}\r\n```\r\nAfter upgrading from jOOQ 3.14 to 3.18 MockK fails to mock jOOQ classes with an error message like below.\r\n\r\n```\r\n[io.moc.imp.JvmMockKGateway] (main) Starting JVM MockK implementation. Java version = 11.0.18. \r\n[io.moc.pro.jvm.JvmMockKAgentFactory] (main) Byte buddy agent installed\r\n[io.moc.pro.jvm.dis.BootJarLoader] (main) Bootstrap class loaded io.mockk.proxy.jvm.dispatcher.JvmMockKDispatcher\r\n[io.moc.pro.jvm.dis.BootJarLoader] (main) Bootstrap class loaded io.mockk.proxy.jvm.dispatcher.JvmMockKWeakMap\r\n[io.moc.pro.jvm.dis.BootJarLoader] (main) Bootstrap class loaded io.mockk.proxy.jvm.dispatcher.JvmMockKWeakMap$StrongKey\r\n[io.moc.pro.jvm.dis.BootJarLoader] (main) Bootstrap class loaded io.mockk.proxy.jvm.dispatcher.JvmMockKWeakMap$WeakKey\r\n[io.moc.imp.ins.AbstractMockFactory] (main) Creating mockk for TableImpl name=#1\r\n[io.moc.imp.ins.AbstractMockFactory] (main) Building proxy for TableImpl hashcode=58a4a74d\r\n[io.moc.pro.jvm.tra.JvmInlineInstrumentation] (main) Retransforming [Ljava.lang.Class;@6f3f0fae\r\n[io.moc.pro.jvm.tra.JvmInlineInstrumentation] (main) Failed to transform classes [\r\nclass org.jooq.impl.TableImpl, \r\ninterface org.jooq.impl.ScopeMappable, \r\ninterface org.jooq.QueryPartInternal, \r\ninterface org.jooq.QueryPart, \r\ninterface java.io.Serializable, \r\ninterface org.jooq.impl.ScopeNestable, \r\ninterface org.jooq.impl.SimpleCheckQueryPart, \r\ninterface org.jooq.impl.QOM$UNotYetImplemented, \r\ninterface org.jooq.impl.QOM$UEmpty, \r\nclass org.jooq.impl.AbstractTable, \r\ninterface org.jooq.Table, \r\ninterface org.jooq.TableLike, \r\ninterface org.jooq.Fields, \r\ninterface org.jooq.RecordQualifier, \r\ninterface org.jooq.Qualified, \r\ninterface org.jooq.Named, \r\ninterface org.jooq.GroupField, \r\ninterface org.jooq.SelectField, \r\ninterface org.jooq.SelectFieldOrAsterisk, \r\ninterface org.jooq.Typed, \r\ninterface org.jooq.impl.FieldsTrait, \r\ninterface org.jooq.impl.QOM$Aliasable, \r\nclass org.jooq.impl.AbstractNamed, \r\nclass org.jooq.impl.AbstractQueryPart, \r\nclass java.lang.Object\r\n]: java.lang.UnsupportedOperationException: class redefinition failed: attempted to add a method\r\n\tat java.instrument/sun.instrument.InstrumentationImpl.retransformClasses0(Native Method)\r\n\tat java.instrument/sun.instrument.InstrumentationImpl.retransformClasses(InstrumentationImpl.java:167)\r\n\tat io.mockk.proxy.jvm.transformation.JvmInlineInstrumentation.retransform(JvmInlineInstrumentation.kt:28)\r\n\tat io.mockk.proxy.common.transformation.RetransformInlineInstrumentation$execute$1.invoke(RetransformInlineInstrumentation.kt:19)\r\n\tat io.mockk.proxy.common.transformation.RetransformInlineInstrumentation$execute$1.invoke(RetransformInlineInstrumentation.kt:16)\r\n\tat io.mockk.proxy.common.transformation.ClassTransformationSpecMap.applyTransformation(ClassTransformationSpecMap.kt:41)\r\n\tat io.mockk.proxy.common.transformation.RetransformInlineInstrumentation.execute(RetransformInlineInstrumentation.kt:16)\r\n\tat io.mockk.proxy.jvm.ProxyMaker.inline(ProxyMaker.kt:88)\r\n\tat io.mockk.proxy.jvm.ProxyMaker.proxy(ProxyMaker.kt:30)\r\n\tat io.mockk.impl.instantiation.JvmMockFactory.newProxy(JvmMockFactory.kt:34)\r\n\tat io.mockk.impl.instantiation.AbstractMockFactory.newProxy$default(AbstractMockFactory.kt:24)\r\n\tat io.mockk.impl.instantiation.AbstractMockFactory.mockk(AbstractMockFactory.kt:59)\r\n\tat my-test-here\r\n```\r\n\r\nThe jOOQ code must have changed in a way that prevents MockK to alter those classes to create mocks/proxies thereof. I haven&#39;t been able yet to figure what modification exactly MockK is trying to carry out on the jOOQ classes - and the error message doesn&#39;t say. &quot;adding a method&quot;, yes, but which one? Where?\r\n\r\nThere are a couple of similar issues on the MockK issue tracker, some open, others closed, but so far it largely remains a mystery.\r\n\r\nhttps://github.com/mockk/mockk/issues?q=is%3Aissue+class+redefinition+failed+is%3Aopen\r\n\r\nAlso, I looked into the [jOOQ `TableImpl` changes between 3.14 and 3.18][1] and found nothing that sticks out.\r\n\r\n**Update**\r\n\r\nI built a reproducer at https://github.com/marcelstoer/jooq-mockk-test. It appears the [jOOQ 3.14.16 -&gt; 3.15 update][2] broke its use with MockK.\r\n\r\nAn interesting hint is hidden the MockK trace log messages.\r\n\r\n```\r\njOOQ 3.14.16\r\n...\r\n[io.mockk.impl.instantiation.AbstractMockFactory] (main) Creating mockk for TableImpl name=#1\r\n[io.mockk.impl.instantiation.AbstractMockFactory] (main) Building proxy for TableImpl hashcode=290b1b2e\r\n[io.mockk.proxy.jvm.transformation.JvmInlineInstrumentation] (main) Retransforming [Ljava.lang.Class;@7d755813\r\n[io.mockk.proxy.common.ProxyMaker] (main) Taking instance of class org.jooq.impl.TableImpl itself because it is not abstract and no additional interfaces specified.\r\n[io.mockk.proxy.common.ProxyMaker] (main) Instantiating proxy for class org.jooq.impl.TableImpl via instantiator\r\n...\r\n\r\njOOQ 3.15.0\r\n[io.mockk.impl.instantiation.AbstractMockFactory] (main) Creating mockk for TableImpl name=#1\r\n[io.mockk.impl.instantiation.AbstractMockFactory] (main) Building proxy for TableImpl hashcode=6fff253c\r\n[io.mockk.proxy.jvm.transformation.JvmInlineInstrumentation] (main) Retransforming [Ljava.lang.Class;@72fe8a4f\r\n[io.mockk.proxy.jvm.transformation.JvmInlineInstrumentation] (main) Failed to transform classes \r\n```\r\n\r\nSo, with jOOQ 3.14.16 MockK doesn&#39;t actually (need to) build a proxy for `TableImpl` because it\r\n\r\n&gt; is not abstract and no additional interfaces specified\r\n\r\n=&gt; now filed under https://github.com/mockk/mockk/issues/1118\r\n\r\n  [1]: https://github.com/jOOQ/jOOQ/compare/version-3.14.11...version-3.18.5#diff-139653c6d36401ee567087adbc760961e2ddf2e28ab055862c87fd7e4025febd\r\n  [2]: https://github.com/jOOQ/jOOQ/compare/version-3.14.16...version-3.15.0#diff-139653c6d36401ee567087adbc760961e2ddf2e28ab055862c87fd7e4025febd","title":"Fail to mock jOOQ 3.18 classes with MockK, works with 3.14","body":"<p>I work on a code basis written in Kotlin that uses jOOQ to interact with databases. It uses jOOQ to generate the &quot;meta model&quot; i.e. classes abstracting tables, fields, etc. jOOQ generates those classes in Java. Our unit tests mock some of the jOOQ classes using MockK, a Kotlin mocking library.</p>\n<p>Here's a simplified example.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@Test\nfun `should throw exception for nonexistent fields`() {\n    // given\n    val table = mockk&lt;TableImpl&lt;*&gt;&gt;()\n    every { table.field(any&lt;String&gt;()) } returns null\n    every { table.name } returns &quot;table-name&quot;\n\n    // when\n    // then\n}\n</code></pre>\n<p>After upgrading from jOOQ 3.14 to 3.18 MockK fails to mock jOOQ classes with an error message like below.</p>\n<pre><code>[io.moc.imp.JvmMockKGateway] (main) Starting JVM MockK implementation. Java version = 11.0.18. \n[io.moc.pro.jvm.JvmMockKAgentFactory] (main) Byte buddy agent installed\n[io.moc.pro.jvm.dis.BootJarLoader] (main) Bootstrap class loaded io.mockk.proxy.jvm.dispatcher.JvmMockKDispatcher\n[io.moc.pro.jvm.dis.BootJarLoader] (main) Bootstrap class loaded io.mockk.proxy.jvm.dispatcher.JvmMockKWeakMap\n[io.moc.pro.jvm.dis.BootJarLoader] (main) Bootstrap class loaded io.mockk.proxy.jvm.dispatcher.JvmMockKWeakMap$StrongKey\n[io.moc.pro.jvm.dis.BootJarLoader] (main) Bootstrap class loaded io.mockk.proxy.jvm.dispatcher.JvmMockKWeakMap$WeakKey\n[io.moc.imp.ins.AbstractMockFactory] (main) Creating mockk for TableImpl name=#1\n[io.moc.imp.ins.AbstractMockFactory] (main) Building proxy for TableImpl hashcode=58a4a74d\n[io.moc.pro.jvm.tra.JvmInlineInstrumentation] (main) Retransforming [Ljava.lang.Class;@6f3f0fae\n[io.moc.pro.jvm.tra.JvmInlineInstrumentation] (main) Failed to transform classes [\nclass org.jooq.impl.TableImpl, \ninterface org.jooq.impl.ScopeMappable, \ninterface org.jooq.QueryPartInternal, \ninterface org.jooq.QueryPart, \ninterface java.io.Serializable, \ninterface org.jooq.impl.ScopeNestable, \ninterface org.jooq.impl.SimpleCheckQueryPart, \ninterface org.jooq.impl.QOM$UNotYetImplemented, \ninterface org.jooq.impl.QOM$UEmpty, \nclass org.jooq.impl.AbstractTable, \ninterface org.jooq.Table, \ninterface org.jooq.TableLike, \ninterface org.jooq.Fields, \ninterface org.jooq.RecordQualifier, \ninterface org.jooq.Qualified, \ninterface org.jooq.Named, \ninterface org.jooq.GroupField, \ninterface org.jooq.SelectField, \ninterface org.jooq.SelectFieldOrAsterisk, \ninterface org.jooq.Typed, \ninterface org.jooq.impl.FieldsTrait, \ninterface org.jooq.impl.QOM$Aliasable, \nclass org.jooq.impl.AbstractNamed, \nclass org.jooq.impl.AbstractQueryPart, \nclass java.lang.Object\n]: java.lang.UnsupportedOperationException: class redefinition failed: attempted to add a method\n    at java.instrument/sun.instrument.InstrumentationImpl.retransformClasses0(Native Method)\n    at java.instrument/sun.instrument.InstrumentationImpl.retransformClasses(InstrumentationImpl.java:167)\n    at io.mockk.proxy.jvm.transformation.JvmInlineInstrumentation.retransform(JvmInlineInstrumentation.kt:28)\n    at io.mockk.proxy.common.transformation.RetransformInlineInstrumentation$execute$1.invoke(RetransformInlineInstrumentation.kt:19)\n    at io.mockk.proxy.common.transformation.RetransformInlineInstrumentation$execute$1.invoke(RetransformInlineInstrumentation.kt:16)\n    at io.mockk.proxy.common.transformation.ClassTransformationSpecMap.applyTransformation(ClassTransformationSpecMap.kt:41)\n    at io.mockk.proxy.common.transformation.RetransformInlineInstrumentation.execute(RetransformInlineInstrumentation.kt:16)\n    at io.mockk.proxy.jvm.ProxyMaker.inline(ProxyMaker.kt:88)\n    at io.mockk.proxy.jvm.ProxyMaker.proxy(ProxyMaker.kt:30)\n    at io.mockk.impl.instantiation.JvmMockFactory.newProxy(JvmMockFactory.kt:34)\n    at io.mockk.impl.instantiation.AbstractMockFactory.newProxy$default(AbstractMockFactory.kt:24)\n    at io.mockk.impl.instantiation.AbstractMockFactory.mockk(AbstractMockFactory.kt:59)\n    at my-test-here\n</code></pre>\n<p>The jOOQ code must have changed in a way that prevents MockK to alter those classes to create mocks/proxies thereof. I haven't been able yet to figure what modification exactly MockK is trying to carry out on the jOOQ classes - and the error message doesn't say. &quot;adding a method&quot;, yes, but which one? Where?</p>\n<p>There are a couple of similar issues on the MockK issue tracker, some open, others closed, but so far it largely remains a mystery.</p>\n<p><a href=\"https://github.com/mockk/mockk/issues?q=is%3Aissue+class+redefinition+failed+is%3Aopen\" rel=\"nofollow noreferrer\">https://github.com/mockk/mockk/issues?q=is%3Aissue+class+redefinition+failed+is%3Aopen</a></p>\n<p>Also, I looked into the <a href=\"https://github.com/jOOQ/jOOQ/compare/version-3.14.11...version-3.18.5#diff-139653c6d36401ee567087adbc760961e2ddf2e28ab055862c87fd7e4025febd\" rel=\"nofollow noreferrer\">jOOQ <code>TableImpl</code> changes between 3.14 and 3.18</a> and found nothing that sticks out.</p>\n<p><strong>Update</strong></p>\n<p>I built a reproducer at <a href=\"https://github.com/marcelstoer/jooq-mockk-test\" rel=\"nofollow noreferrer\">https://github.com/marcelstoer/jooq-mockk-test</a>. It appears the <a href=\"https://github.com/jOOQ/jOOQ/compare/version-3.14.16...version-3.15.0#diff-139653c6d36401ee567087adbc760961e2ddf2e28ab055862c87fd7e4025febd\" rel=\"nofollow noreferrer\">jOOQ 3.14.16 -&gt; 3.15 update</a> broke its use with MockK.</p>\n<p>An interesting hint is hidden the MockK trace log messages.</p>\n<pre><code>jOOQ 3.14.16\n...\n[io.mockk.impl.instantiation.AbstractMockFactory] (main) Creating mockk for TableImpl name=#1\n[io.mockk.impl.instantiation.AbstractMockFactory] (main) Building proxy for TableImpl hashcode=290b1b2e\n[io.mockk.proxy.jvm.transformation.JvmInlineInstrumentation] (main) Retransforming [Ljava.lang.Class;@7d755813\n[io.mockk.proxy.common.ProxyMaker] (main) Taking instance of class org.jooq.impl.TableImpl itself because it is not abstract and no additional interfaces specified.\n[io.mockk.proxy.common.ProxyMaker] (main) Instantiating proxy for class org.jooq.impl.TableImpl via instantiator\n...\n\njOOQ 3.15.0\n[io.mockk.impl.instantiation.AbstractMockFactory] (main) Creating mockk for TableImpl name=#1\n[io.mockk.impl.instantiation.AbstractMockFactory] (main) Building proxy for TableImpl hashcode=6fff253c\n[io.mockk.proxy.jvm.transformation.JvmInlineInstrumentation] (main) Retransforming [Ljava.lang.Class;@72fe8a4f\n[io.mockk.proxy.jvm.transformation.JvmInlineInstrumentation] (main) Failed to transform classes \n</code></pre>\n<p>So, with jOOQ 3.14.16 MockK doesn't actually (need to) build a proxy for <code>TableImpl</code> because it</p>\n<blockquote>\n<p>is not abstract and no additional interfaces specified</p>\n</blockquote>\n<p>=&gt; now filed under <a href=\"https://github.com/mockk/mockk/issues/1118\" rel=\"nofollow noreferrer\">https://github.com/mockk/mockk/issues/1118</a></p>\n"},{"tags":["java","spring-boot","openjpa","openjpa-maven-plugin"],"answers":[{"tags":[],"owner":{"account_id":26746848,"reputation":226,"user_id":20346807,"display_name":"Joan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689165476,"creation_date":1689165476,"answer_id":76670635,"question_id":76670136,"body_markdown":"The simplest option is to move from Parent --&gt; Plant --&gt; GrandChilds.\r\n\r\nMeaning you will need:\r\n\r\n- A ManyToOne in the Parent with Plant\r\n- A OneToMany in the Plant with List&lt; GrandChild &gt;\r\n\r\n---\r\nAdditionally (to be coherent)\r\n\r\n- A OneToMany in the Plant with List&lt; Parent &gt;\r\n- A ManyToOne in the GrandChild with Plan\r\n\r\nAfter doing so you will be able to do:\r\n\r\n    parent.getPlant().getGrandChilds()","title":"Open Jpa OneToMany parent relationship with two level down child","body":"<p>The simplest option is to move from Parent --&gt; Plant --&gt; GrandChilds.</p>\n<p>Meaning you will need:</p>\n<ul>\n<li>A ManyToOne in the Parent with Plant</li>\n<li>A OneToMany in the Plant with List&lt; GrandChild &gt;</li>\n</ul>\n<hr />\n<p>Additionally (to be coherent)</p>\n<ul>\n<li>A OneToMany in the Plant with List&lt; Parent &gt;</li>\n<li>A ManyToOne in the GrandChild with Plan</li>\n</ul>\n<p>After doing so you will be able to do:</p>\n<pre><code>parent.getPlant().getGrandChilds()\n</code></pre>\n"}],"owner":{"account_id":7194090,"reputation":909,"user_id":5493449,"accept_rate":20,"display_name":"Mohammad Naim Dahee"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689165476,"creation_date":1689161929,"question_id":76670136,"body_markdown":"How can I make a relationship with a second-level child using openjpa. \r\n\r\n\r\n    Parent -&gt; Child -&gt; GrandChild\r\n    \r\nParent has a property lets say, plant, the child does not have it, however the grand child do. So, how can I make a relationship to the grand child directly from parent in order to get only those children having same plant as their parent in their child level(GrandChild). (Preferably one sided). \r\n\r\n","title":"Open Jpa OneToMany parent relationship with two level down child","body":"<p>How can I make a relationship with a second-level child using openjpa.</p>\n<pre><code>Parent -&gt; Child -&gt; GrandChild\n</code></pre>\n<p>Parent has a property lets say, plant, the child does not have it, however the grand child do. So, how can I make a relationship to the grand child directly from parent in order to get only those children having same plant as their parent in their child level(GrandChild). (Preferably one sided).</p>\n"},{"tags":["java","apache-camel"],"comments":[{"owner":{"account_id":1474276,"reputation":4564,"user_id":1385087,"display_name":"Konstantin V. Salikhov"},"score":1,"creation_date":1392495524,"post_id":21802003,"comment_id":32992470,"body_markdown":"You need to put camel-http library on your classpath","body":"You need to put camel-http library on your classpath"},{"owner":{"account_id":2668781,"reputation":631,"user_id":2306593,"accept_rate":45,"display_name":"Azhaguvel A"},"score":0,"creation_date":1392536515,"post_id":21802003,"comment_id":33002398,"body_markdown":"Thanks lot Konstantin V. Salikhov, Now, It&#39;s woking fine.","body":"Thanks lot Konstantin V. Salikhov, Now, It&#39;s woking fine."}],"answers":[{"tags":[],"owner":{"account_id":2668781,"reputation":631,"user_id":2306593,"accept_rate":45,"display_name":"Azhaguvel A"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1392536661,"creation_date":1392536661,"answer_id":21808618,"question_id":21802003,"body_markdown":"Dependency libraries were missing. So i have added those libraries and solved my issue.","title":"How to solve &quot;Failed to create route route1 exception&quot; in Apache Camel?","body":"<p>Dependency libraries were missing. So i have added those libraries and solved my issue.</p>\n"},{"tags":[],"owner":{"account_id":17595579,"reputation":21,"user_id":12766534,"display_name":"user12766534"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1579759067,"creation_date":1579759067,"answer_id":59872349,"question_id":21802003,"body_markdown":"I got the same error, dis is due to use of latest dependencies. so use the older dependencies and try.","title":"How to solve &quot;Failed to create route route1 exception&quot; in Apache Camel?","body":"<p>I got the same error, dis is due to use of latest dependencies. so use the older dependencies and try.</p>\n"},{"tags":[],"owner":{"account_id":24882455,"reputation":1,"user_id":18755490,"display_name":"Gaurav Dhamal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689165237,"creation_date":1689165237,"answer_id":76670590,"question_id":21802003,"body_markdown":"After using these issue is resolved and I&#39;m able to get the response.\r\nI&#39;m using below dependencies.\r\n\r\n```\r\n&lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;camel.version&gt;3.11.4&lt;/camel.version&gt;\r\n&lt;/properties&gt;\r\n\r\n&lt;dependencies&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/org.apache.camel/camel-core --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;\r\n            &lt;artifactId&gt;camel-core&lt;/artifactId&gt;\r\n            &lt;version&gt;${camel.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;!-- https://mvnrepository.com/artifact/org.apache.camel/camel-http --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;\r\n            &lt;artifactId&gt;camel-http&lt;/artifactId&gt;\r\n            &lt;version&gt;${camel.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n&lt;/dependencies&gt;\r\n```","title":"How to solve &quot;Failed to create route route1 exception&quot; in Apache Camel?","body":"<p>After using these issue is resolved and I'm able to get the response.\nI'm using below dependencies.</p>\n<pre><code>&lt;properties&gt;\n        &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;camel.version&gt;3.11.4&lt;/camel.version&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.apache.camel/camel-core --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;\n            &lt;artifactId&gt;camel-core&lt;/artifactId&gt;\n            &lt;version&gt;${camel.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/org.apache.camel/camel-http --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;\n            &lt;artifactId&gt;camel-http&lt;/artifactId&gt;\n            &lt;version&gt;${camel.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n"}],"owner":{"account_id":2668781,"reputation":631,"user_id":2306593,"accept_rate":45,"display_name":"Azhaguvel A"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":25430,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":21808618,"answer_count":3,"score":9,"last_activity_date":1689165237,"creation_date":1392490014,"question_id":21802003,"body_markdown":"I am new for Apache Camel concept. I have tried to write sample code using with apache camel API&#39;s \r\nand I am getting the following exception when try to run the code.\r\n\r\n***Can anyone help me to solve this issue?***\r\n\r\nHere&#39;s the sample code and an exception as well,\r\n    \r\n***Sample Code :***\r\n\r\n     CamelContext context = new DefaultCamelContext();\r\n     context.addRoutes(new RouteBuilder() { \r\n      public void configure() {\r\n        from(&quot;direct:start&quot;)\r\n        .setHeader(Exchange.HTTP_URI,simple(&quot;`http://sample-host:8080/demo/get`&quot;))\r\n        .to(&quot;http://emptyhost&quot;);\r\n      }\r\n     });\r\n     context.start();\r\n     ProducerTemplate template = context.createProducerTemplate();\r\n     System.out.println(template.requestBodyAndHeaders(&quot;direct:start&quot;, null, null,String.class));\r\n\r\n***Exception :***\r\n\r\n    Exception in thread &quot;main&quot; org.apache.camel.FailedToCreateRouteException: \r\n    Failed to create route route1 at: \r\n        &gt;&gt;&gt; To[`http://sample-host:8080/demo/get`] &lt;&lt;&lt; \r\n    in route: Route(route1)\r\n        [[From[direct:start]] -&gt; [`To[http://sample-host:8`…\r\n    because of \r\n        Failed to resolve endpoint: `http://sample-host:8080/demo/get`\r\n    due to: \r\n        No component found with scheme: http","title":"How to solve &quot;Failed to create route route1 exception&quot; in Apache Camel?","body":"<p>I am new for Apache Camel concept. I have tried to write sample code using with apache camel API's \nand I am getting the following exception when try to run the code.</p>\n\n<p><em><strong>Can anyone help me to solve this issue?</em></strong></p>\n\n<p>Here's the sample code and an exception as well,</p>\n\n<p><em><strong>Sample Code :</em></strong></p>\n\n<pre><code> CamelContext context = new DefaultCamelContext();\n context.addRoutes(new RouteBuilder() { \n  public void configure() {\n    from(\"direct:start\")\n    .setHeader(Exchange.HTTP_URI,simple(\"`http://sample-host:8080/demo/get`\"))\n    .to(\"http://emptyhost\");\n  }\n });\n context.start();\n ProducerTemplate template = context.createProducerTemplate();\n System.out.println(template.requestBodyAndHeaders(\"direct:start\", null, null,String.class));\n</code></pre>\n\n<p><em><strong>Exception :</em></strong></p>\n\n<pre><code>Exception in thread \"main\" org.apache.camel.FailedToCreateRouteException: \nFailed to create route route1 at: \n    &gt;&gt;&gt; To[`http://sample-host:8080/demo/get`] &lt;&lt;&lt; \nin route: Route(route1)\n    [[From[direct:start]] -&gt; [`To[http://sample-host:8`…\nbecause of \n    Failed to resolve endpoint: `http://sample-host:8080/demo/get`\ndue to: \n    No component found with scheme: http\n</code></pre>\n"},{"tags":["java","spring","jackson"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1689162916,"post_id":76670227,"comment_id":135173746,"body_markdown":"What are you returning in the first place? Seems like some postgresql type instead of a regular map.","body":"What are you returning in the first place? Seems like some postgresql type instead of a regular map."},{"owner":{"account_id":3688497,"reputation":1472,"user_id":3071712,"accept_rate":52,"display_name":"Marko Taht"},"score":0,"creation_date":1689163383,"post_id":76670227,"comment_id":135173858,"body_markdown":"Im using ColumnMapRowMapper it is the same thing jdvc queryForList uses. I just have to do it explicitly ro fit in with the rest of the setup we have. Cant just use QueryForList.","body":"Im using ColumnMapRowMapper it is the same thing jdvc queryForList uses. I just have to do it explicitly ro fit in with the rest of the setup we have. Cant just use QueryForList."},{"owner":{"account_id":3688497,"reputation":1472,"user_id":3071712,"accept_rate":52,"display_name":"Marko Taht"},"score":0,"creation_date":1689164530,"post_id":76670227,"comment_id":135174153,"body_markdown":"I think i found the issue... But i dont know how to fix it... 1 value returned is a PGArray i have a conversion service for PGArray -&gt; List&lt;UUID&gt; but since this is Map&lt;String,Object&gt; it doesent know what to do with it... Can i somehow tell it what to do or perhabs create a Java Record that can have vairable amount of fields ?","body":"I think i found the issue... But i dont know how to fix it... 1 value returned is a PGArray i have a conversion service for PGArray -&gt; List&lt;UUID&gt; but since this is Map&lt;String,Object&gt; it doesent know what to do with it... Can i somehow tell it what to do or perhabs create a Java Record that can have vairable amount of fields ?"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1689164540,"post_id":76670227,"comment_id":135174160,"body_markdown":"Well i doubt it does what you think it does. As it clearly indicates that there are custom PostgreSQL classes in there. Please show the code that you are calling. Also which `Page` object does this concern.","body":"Well i doubt it does what you think it does. As it clearly indicates that there are custom PostgreSQL classes in there. Please show the code that you are calling. Also which <code>Page</code> object does this concern."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1689167620,"post_id":76670227,"comment_id":135174960,"body_markdown":"You need to extend the rowmapper for this specific case to convert it to an array or list.","body":"You need to extend the rowmapper for this specific case to convert it to an array or list."},{"owner":{"account_id":3688497,"reputation":1472,"user_id":3071712,"accept_rate":52,"display_name":"Marko Taht"},"score":0,"creation_date":1689168762,"post_id":76670227,"comment_id":135175273,"body_markdown":"Got a lucky break. It turns out that the field causing the issue is not needed in the response, only during filtering. So i can just remove it before i return the page.","body":"Got a lucky break. It turns out that the field causing the issue is not needed in the response, only during filtering. So i can just remove it before i return the page."}],"owner":{"account_id":3688497,"reputation":1472,"user_id":3071712,"accept_rate":52,"display_name":"Marko Taht"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689164849,"creation_date":1689162586,"question_id":76670227,"body_markdown":"I have this endpoint \r\n\r\n    @GetMapping(&quot;/list&quot;)    \r\n    public Page&lt;Map&lt;String, Object&gt;&gt; getRecordList(\r\n            @PageableDefault(size = 10) Pageable page,\r\n            RecordSearchParams searchParams\r\n    ) throws SQLException {\r\n        var val = recordService.getRecordList(page, searchParams, false);\r\n        return val;\r\n    }\r\n\r\nUsing this endpoint gives error \r\n\r\n    2023-07-12 14:37:16,931 [http-nio-8555-exec-2] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] [] [oid:,cid:] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.http.converter.HttpMessageConversionException: Type definition error: [simple type, class org.postgresql.core.v3.replication.V3ReplicationProtocol]] with root cause\r\n    com.fasterxml.jackson.databind.exc.InvalidDefinitionException: No serializer found for class org.postgresql.core.v3.replication.V3ReplicationProtocol and no properties discovered to create BeanSerializer (to avoid exception, disable SerializationFeature.FAIL_ON_EMPTY_BEANS) (through reference chain: org.springframework.data.domain.PageImpl[&quot;content&quot;]-&gt;java.util.Collections$UnmodifiableRandomAccessList[0]-&gt;org.springframework.util.LinkedCaseInsensitiveMap[&quot;information_field_uuids&quot;]-&gt;org.postgresql.jdbc.PgArray[&quot;resultSet&quot;]-&gt;org.postgresql.jdbc.PgResultSet[&quot;statement&quot;]-&gt;org.postgresql.jdbc.PgStatement[&quot;connection&quot;]-&gt;org.postgresql.jdbc.PgConnection[&quot;queryExecutor&quot;]-&gt;org.postgresql.core.v3.QueryExecutorImpl[&quot;replicationProtocol&quot;])\r\n\r\nHow can i fix this? Response is Map&lt;String, Object&gt; because All the values and types are defined on the runtime by the user based on search params. It effectively represents a variable column object.\r\n\r\nThe DBquery that gets data is in the formar of\r\n\r\n    List&lt;T&gt; tableRows = jdbcTemplate.query(&quot;&quot;&quot;\r\n                                some very very complicated and long SQL&quot;&quot;&quot;,\r\n                    sqlParameters,\r\n                    new ColumnMapRowMapper()\r\n            );\r\n\r\nOne of the columns returned is a PGArry. I have a conversion service for it. But it seems if i Dont map it directly do a spesific typed object it just wont do anything... But i cant define a spesific object as the result set will have variable amount of columns. And the Page&lt;&gt; Object is from `org.springframework.data.domain`","title":"How to return Page&lt;Map&lt;String, Object&gt;&gt; from REST endpoint in Spring?","body":"<p>I have this endpoint</p>\n<pre><code>@GetMapping(&quot;/list&quot;)    \npublic Page&lt;Map&lt;String, Object&gt;&gt; getRecordList(\n        @PageableDefault(size = 10) Pageable page,\n        RecordSearchParams searchParams\n) throws SQLException {\n    var val = recordService.getRecordList(page, searchParams, false);\n    return val;\n}\n</code></pre>\n<p>Using this endpoint gives error</p>\n<pre><code>2023-07-12 14:37:16,931 [http-nio-8555-exec-2] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] [] [oid:,cid:] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.http.converter.HttpMessageConversionException: Type definition error: [simple type, class org.postgresql.core.v3.replication.V3ReplicationProtocol]] with root cause\ncom.fasterxml.jackson.databind.exc.InvalidDefinitionException: No serializer found for class org.postgresql.core.v3.replication.V3ReplicationProtocol and no properties discovered to create BeanSerializer (to avoid exception, disable SerializationFeature.FAIL_ON_EMPTY_BEANS) (through reference chain: org.springframework.data.domain.PageImpl[&quot;content&quot;]-&gt;java.util.Collections$UnmodifiableRandomAccessList[0]-&gt;org.springframework.util.LinkedCaseInsensitiveMap[&quot;information_field_uuids&quot;]-&gt;org.postgresql.jdbc.PgArray[&quot;resultSet&quot;]-&gt;org.postgresql.jdbc.PgResultSet[&quot;statement&quot;]-&gt;org.postgresql.jdbc.PgStatement[&quot;connection&quot;]-&gt;org.postgresql.jdbc.PgConnection[&quot;queryExecutor&quot;]-&gt;org.postgresql.core.v3.QueryExecutorImpl[&quot;replicationProtocol&quot;])\n</code></pre>\n<p>How can i fix this? Response is Map&lt;String, Object&gt; because All the values and types are defined on the runtime by the user based on search params. It effectively represents a variable column object.</p>\n<p>The DBquery that gets data is in the formar of</p>\n<pre><code>List&lt;T&gt; tableRows = jdbcTemplate.query(&quot;&quot;&quot;\n                            some very very complicated and long SQL&quot;&quot;&quot;,\n                sqlParameters,\n                new ColumnMapRowMapper()\n        );\n</code></pre>\n<p>One of the columns returned is a PGArry. I have a conversion service for it. But it seems if i Dont map it directly do a spesific typed object it just wont do anything... But i cant define a spesific object as the result set will have variable amount of columns. And the Page&lt;&gt; Object is from <code>org.springframework.data.domain</code></p>\n"},{"tags":["java","hibernate","spring","amazon-web-services","pessimistic-locking"],"comments":[{"owner":{"account_id":390163,"reputation":17713,"user_id":750040,"accept_rate":68,"display_name":"Santosh"},"score":1,"creation_date":1324996467,"post_id":8645694,"comment_id":10739337,"body_markdown":"Are you sure that the database is not being updated from multiple places and you code is the only one doing it ? Also is your method `test(Email email, String Subject)` being accessed concurrently ?","body":"Are you sure that the database is not being updated from multiple places and you code is the only one doing it ? Also is your method <code>test(Email email, String Subject)</code> being accessed concurrently ?"},{"owner":{"account_id":193821,"reputation":3767,"user_id":435784,"accept_rate":84,"display_name":"Georgian Citizen"},"score":0,"creation_date":1325055935,"post_id":8645694,"comment_id":10750724,"body_markdown":"i use postgre database. no my project still under testing only in my pc so no one can access it, i am only who update data on the database, iam create a service that&#39;s call this method automatically every 30 seconds, this service is the unique service that call this method","body":"i use postgre database. no my project still under testing only in my pc so no one can access it, i am only who update data on the database, iam create a service that&#39;s call this method automatically every 30 seconds, this service is the unique service that call this method"}],"answers":[{"tags":[],"owner":{"account_id":7448,"reputation":526464,"user_id":12950,"accept_rate":94,"display_name":"tvanfosson"},"down_vote_count":1,"up_vote_count":18,"is_accepted":false,"score":17,"last_activity_date":1612218605,"creation_date":1324996157,"answer_id":8645724,"question_id":8645694,"body_markdown":"It doesn&#39;t appear that you are actually using the email that you retrieve from the database, but an older copy that you get as a parameter. Whatever is being used for version control on the row has changed between when the previous version was retrieved and when you are doing the update.\r\n\r\nYou probably want your code to look more like:\r\n\r\n```\r\n    @Transactional\r\n    public void test(String id, String subject) {\r\n       Email email = getEmailById(id);\r\n       email.setSubject(subject);\r\n       updateEmail(email);\r\n    }\r\n```","title":"Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect)","body":"<p>It doesn't appear that you are actually using the email that you retrieve from the database, but an older copy that you get as a parameter. Whatever is being used for version control on the row has changed between when the previous version was retrieved and when you are doing the update.</p>\n<p>You probably want your code to look more like:</p>\n<pre><code>    @Transactional\n    public void test(String id, String subject) {\n       Email email = getEmailById(id);\n       email.setSubject(subject);\n       updateEmail(email);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1410972141,"creation_date":1324996494,"answer_id":8645780,"question_id":8645694,"body_markdown":"This exception is probably caused by optimistic locking (or by a bug in your code). You&#39;re probably using it without knowing. And your pseudo-code (which should be replaced by real code to be able to diagnose the problem) is wrong. Hibernate saves all the modifications done to attached entities automatically. You shouldn&#39;t ever call update, merge or saveOrUpdate on an attached entity. Just do\r\n\r\n    Email email = session.get(emailId);\r\n    email.setSubject(subject);\r\n\r\nNo need to call update. Hibernate will flush the changes automatically before committing the transaction.","title":"Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect)","body":"<p>This exception is probably caused by optimistic locking (or by a bug in your code). You're probably using it without knowing. And your pseudo-code (which should be replaced by real code to be able to diagnose the problem) is wrong. Hibernate saves all the modifications done to attached entities automatically. You shouldn't ever call update, merge or saveOrUpdate on an attached entity. Just do</p>\n\n<pre><code>Email email = session.get(emailId);\nemail.setSubject(subject);\n</code></pre>\n\n<p>No need to call update. Hibernate will flush the changes automatically before committing the transaction.</p>\n"},{"tags":[],"owner":{"account_id":390163,"reputation":17713,"user_id":750040,"accept_rate":68,"display_name":"Santosh"},"down_vote_count":0,"up_vote_count":73,"is_accepted":true,"score":73,"last_activity_date":1675353371,"creation_date":1324997933,"answer_id":8646019,"question_id":8645694,"body_markdown":"Pessimistic locking is generally not recommended and it&#39;s very costly in terms of performance on database side. The problem that you have mentioned (the code part) a few things are not clear such as:\r\n\r\n- If your code is being accessed by multiple threads at the same time.\r\n- How are you creating `session` object (not sure if you are using Spring)?\r\n\r\n\r\nHibernate [Session objects are NOT thread-safe][1]. So if there are multiple threads accessing the same session and trying to update the same database entity, your code can potentially end up in an error situation like this. \r\n\r\nSo what happens here is that more than one threads try to update the same entity, one thread succeeds and when the next thread goes to commit the data, it sees that its already been modified and ends up throwing `StaleObjectStateException`.\r\n\r\n**EDIT**:\r\n\r\nThere is a way to use Pessimistic Locking in Hibernate. Check out [this link][2]. But there seems to be some issue with this mechanism. I came across posting a bug in hibernate ([HHH-5275][3]), however. The scenario mentioned in the bug is as follows:\r\n\r\n&gt; Two threads are reading the same database record; one of those threads\r\n&gt; should use pessimistic locking thereby blocking the other thread. But\r\n&gt; both threads can read the database record causing the test to fail.\r\n\r\nThis is very close to what you are facing. Please try this if this does not work, the only way I can think of is using [Native SQL queries][4] where you can achieve [pessimistic locking in postgres][5] database with `SELECT FOR UPDATE` query.\r\n\r\n\r\n  [1]: http://docs.jboss.org/hibernate/core/3.5/api/org/hibernate/Session.html\r\n  [2]: http://docs.jboss.org/hibernate/core/3.3/reference/en/html/transactions.html#transactions-locking\r\n  [3]: https://hibernate.atlassian.net/browse/HHH-5275\r\n  [4]: http://docs.jboss.org/hibernate/core/3.3/reference/en/html/querysql.html\r\n  [5]: http://www.postgresql.org/docs/8.2/static/sql-select.html#SQL-FOR-UPDATE-SHARE","title":"Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect)","body":"<p>Pessimistic locking is generally not recommended and it's very costly in terms of performance on database side. The problem that you have mentioned (the code part) a few things are not clear such as:</p>\n<ul>\n<li>If your code is being accessed by multiple threads at the same time.</li>\n<li>How are you creating <code>session</code> object (not sure if you are using Spring)?</li>\n</ul>\n<p>Hibernate <a href=\"http://docs.jboss.org/hibernate/core/3.5/api/org/hibernate/Session.html\" rel=\"nofollow noreferrer\">Session objects are NOT thread-safe</a>. So if there are multiple threads accessing the same session and trying to update the same database entity, your code can potentially end up in an error situation like this.</p>\n<p>So what happens here is that more than one threads try to update the same entity, one thread succeeds and when the next thread goes to commit the data, it sees that its already been modified and ends up throwing <code>StaleObjectStateException</code>.</p>\n<p><strong>EDIT</strong>:</p>\n<p>There is a way to use Pessimistic Locking in Hibernate. Check out <a href=\"http://docs.jboss.org/hibernate/core/3.3/reference/en/html/transactions.html#transactions-locking\" rel=\"nofollow noreferrer\">this link</a>. But there seems to be some issue with this mechanism. I came across posting a bug in hibernate (<a href=\"https://hibernate.atlassian.net/browse/HHH-5275\" rel=\"nofollow noreferrer\">HHH-5275</a>), however. The scenario mentioned in the bug is as follows:</p>\n<blockquote>\n<p>Two threads are reading the same database record; one of those threads\nshould use pessimistic locking thereby blocking the other thread. But\nboth threads can read the database record causing the test to fail.</p>\n</blockquote>\n<p>This is very close to what you are facing. Please try this if this does not work, the only way I can think of is using <a href=\"http://docs.jboss.org/hibernate/core/3.3/reference/en/html/querysql.html\" rel=\"nofollow noreferrer\">Native SQL queries</a> where you can achieve <a href=\"http://www.postgresql.org/docs/8.2/static/sql-select.html#SQL-FOR-UPDATE-SHARE\" rel=\"nofollow noreferrer\">pessimistic locking in postgres</a> database with <code>SELECT FOR UPDATE</code> query.</p>\n"},{"tags":[],"owner":{"account_id":1302456,"reputation":33,"user_id":1252101,"display_name":"pavan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1353365401,"creation_date":1350991650,"answer_id":13029432,"question_id":8645694,"body_markdown":"check if the object exists or not in DB, if it exists get the object and refresh it:\r\n\r\n    if (getEntityManager().contains(instance)) {\r\n        getEntityManager().refresh(instance);\r\n        return instance;\r\n    }\r\n\r\nif it fails the above if condition... find the Object with Id in DB, do the operation which you need, in this case exactly changes will reflects.\r\n \r\n    if (....) {\r\n        } else if (null != identity) {\r\n            E dbInstance = (E) getEntityManager().find(instance.getClass(), identity);\r\n            return dbInstance;\r\n        }","title":"Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect)","body":"<p>check if the object exists or not in DB, if it exists get the object and refresh it:</p>\n\n<pre><code>if (getEntityManager().contains(instance)) {\n    getEntityManager().refresh(instance);\n    return instance;\n}\n</code></pre>\n\n<p>if it fails the above if condition... find the Object with Id in DB, do the operation which you need, in this case exactly changes will reflects.</p>\n\n<pre><code>if (....) {\n    } else if (null != identity) {\n        E dbInstance = (E) getEntityManager().find(instance.getClass(), identity);\n        return dbInstance;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1885119,"reputation":1784,"user_id":1704488,"display_name":"Lyju I Edwinson"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1643589355,"creation_date":1380246082,"answer_id":19041406,"question_id":8645694,"body_markdown":"We have a queue manager that polls data and gives it to handlers for processing.   To avoid picking up the same events again, the queue manager locks the record in the database with a `LOCKED` state.\r\n\r\n```\r\n    void poll() {\r\n        record = dao.getLockedEntity();\r\n        queue(record);\r\n    }\r\n```\r\n\r\nthis method wasn&#39;t transactional but `dao.getLockedEntity()` was transactional with `REQUIRED`.\r\n\r\nAll good and on the road, after few months in production, it failed with an optimistic locking exception. \r\n\r\nAfter lots of debugging and checking in details we could find out that some one has changed the code like this:\r\n\r\n```   \r\n    @Transactional(propagation=Propagation.REQUIRED, readOnly=false)\r\n    void poll() {\r\n        record = dao.getLockedEntity();\r\n        queue(record);              \r\n    }\r\n```\r\n\r\nSo the record was queued even before the transaction in `dao.getLockedEntity()` gets committed (it uses the same transaction of poll method) and the object was changed underneath by the handlers (different threads) by the time the `poll()` method transaction gets committed.\r\n\r\nWe fixed the issue and it looks good now. I thought of sharing it because optimistic lock exceptions can be confusing and are difficult to debug.","title":"Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect)","body":"<p>We have a queue manager that polls data and gives it to handlers for processing.   To avoid picking up the same events again, the queue manager locks the record in the database with a <code>LOCKED</code> state.</p>\n<pre><code>    void poll() {\n        record = dao.getLockedEntity();\n        queue(record);\n    }\n</code></pre>\n<p>this method wasn't transactional but <code>dao.getLockedEntity()</code> was transactional with <code>REQUIRED</code>.</p>\n<p>All good and on the road, after few months in production, it failed with an optimistic locking exception.</p>\n<p>After lots of debugging and checking in details we could find out that some one has changed the code like this:</p>\n<pre><code>    @Transactional(propagation=Propagation.REQUIRED, readOnly=false)\n    void poll() {\n        record = dao.getLockedEntity();\n        queue(record);              \n    }\n</code></pre>\n<p>So the record was queued even before the transaction in <code>dao.getLockedEntity()</code> gets committed (it uses the same transaction of poll method) and the object was changed underneath by the handlers (different threads) by the time the <code>poll()</code> method transaction gets committed.</p>\n<p>We fixed the issue and it looks good now. I thought of sharing it because optimistic lock exceptions can be confusing and are difficult to debug.</p>\n"},{"tags":[],"owner":{"account_id":2985220,"reputation":5535,"user_id":2534236,"accept_rate":72,"display_name":"Suganthan Madhavan Pillai"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1429867151,"creation_date":1400825778,"answer_id":23822196,"question_id":8645694,"body_markdown":"I had the experienced the same issue in different context of my project and there are different scenarios like\r\n\r\n     - object is accessed from various source like (server side and client)\r\n     - without any interval accessing the same object from a different place\r\n\r\nIn the first case\r\n   \r\n\r\n When I issue a server cal, before save the that object their one call from js and trying to save and another place, I got like, js call is going two, three times(I thing that call binding thing cause the issue)\r\n\r\nI solved by \r\n \r\n    e.preventDefault()\r\n\r\nThe second case, \r\n\r\n    object.lock()\r\n\r\n","title":"Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect)","body":"<p>I had the experienced the same issue in different context of my project and there are different scenarios like</p>\n\n<pre><code> - object is accessed from various source like (server side and client)\n - without any interval accessing the same object from a different place\n</code></pre>\n\n<p>In the first case</p>\n\n<p>When I issue a server cal, before save the that object their one call from js and trying to save and another place, I got like, js call is going two, three times(I thing that call binding thing cause the issue)</p>\n\n<p>I solved by </p>\n\n<pre><code>e.preventDefault()\n</code></pre>\n\n<p>The second case, </p>\n\n<pre><code>object.lock()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":46157,"reputation":10891,"user_id":136276,"accept_rate":62,"display_name":"Roger"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1415207883,"creation_date":1415207883,"answer_id":26763210,"question_id":8645694,"body_markdown":"This error occurred for me when I was trying to update the same row from 2 different sessions. I updated a field in one browser while a second was open and had already stored the original object in its session. When I attempted to update from this second &quot;stale&quot; session I get the stale object error. In order to correct this I refetch my object to be updated from the database before I set the value to be updated, then save it as normal.","title":"Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect)","body":"<p>This error occurred for me when I was trying to update the same row from 2 different sessions. I updated a field in one browser while a second was open and had already stored the original object in its session. When I attempted to update from this second \"stale\" session I get the stale object error. In order to correct this I refetch my object to be updated from the database before I set the value to be updated, then save it as normal.</p>\n"},{"tags":[],"owner":{"account_id":1313219,"reputation":1950,"user_id":1260751,"accept_rate":85,"display_name":"Hassan Faghihi"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1622620555,"creation_date":1422183158,"answer_id":28135561,"question_id":8645694,"body_markdown":"Just in case someone checked this thread and had the same issue as mine...\r\n\r\n&gt; Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect)\r\n\r\nI&#39;m using NHibernate, I received same error, during creation of an object...\r\n\r\nI was passing the key manually, and also specified a GUID generator in mapping...\r\n\r\nAnd hibernate generate same exact error for me, \r\nSo once I removed the GUID, and left the field empty, everything went just fine.\r\n\r\nThis answer may not help you, but will help someone like me, who just viewed your thread because of same error","title":"Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect)","body":"<p>Just in case someone checked this thread and had the same issue as mine...</p>\n<blockquote>\n<p>Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect)</p>\n</blockquote>\n<p>I'm using NHibernate, I received same error, during creation of an object...</p>\n<p>I was passing the key manually, and also specified a GUID generator in mapping...</p>\n<p>And hibernate generate same exact error for me,\nSo once I removed the GUID, and left the field empty, everything went just fine.</p>\n<p>This answer may not help you, but will help someone like me, who just viewed your thread because of same error</p>\n"},{"tags":[],"owner":{"account_id":5463739,"reputation":111,"user_id":4345086,"display_name":"MF Wolf"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1456219882,"creation_date":1423490200,"answer_id":28411409,"question_id":8645694,"body_markdown":"I had the this problem on my project. \r\n\r\nAfter I implemented optimistic locking, I got the same exception. \r\nMy mistake was that I did not remove the setter of the field that became the `@Version`. As the setter was being called in java space, the value of the field did not match the one generated by the DB anymore. So basically the version fields did not match anymore. At that point any modification on the entity resulted in:\r\n\r\n \r\n\r\n&gt; org.hibernate.StaleObjectStateException: Row was updated or deleted by\r\n&gt; another transaction (or unsaved-value mapping was incorrect)\r\n\r\nI am using H2 in memory DB and Hibernate.\r\n           ","title":"Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect)","body":"<p>I had the this problem on my project. </p>\n\n<p>After I implemented optimistic locking, I got the same exception. \nMy mistake was that I did not remove the setter of the field that became the <code>@Version</code>. As the setter was being called in java space, the value of the field did not match the one generated by the DB anymore. So basically the version fields did not match anymore. At that point any modification on the entity resulted in:</p>\n\n<blockquote>\n  <p>org.hibernate.StaleObjectStateException: Row was updated or deleted by\n  another transaction (or unsaved-value mapping was incorrect)</p>\n</blockquote>\n\n<p>I am using H2 in memory DB and Hibernate.</p>\n"},{"tags":[],"owner":{"account_id":6187703,"reputation":11,"user_id":4821342,"display_name":"Chiana"},"down_vote_count":4,"up_vote_count":1,"is_accepted":false,"score":-3,"last_activity_date":1429734209,"creation_date":1429734209,"answer_id":29808053,"question_id":8645694,"body_markdown":"I had this problem in one of my apps, now, I know this is an old thread but here is my solution; I figured out by looking at the data inside the debugger that JVM actually didn&#39;t load it properly when Hibernate was trying to update the database (that is actually done in a different thread), so I added the keyword &quot;volatile&quot; to every field of the entities. It has some performance issues to do that but rather that than Heavy objects beeing thrown around...","title":"Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect)","body":"<p>I had this problem in one of my apps, now, I know this is an old thread but here is my solution; I figured out by looking at the data inside the debugger that JVM actually didn't load it properly when Hibernate was trying to update the database (that is actually done in a different thread), so I added the keyword \"volatile\" to every field of the entities. It has some performance issues to do that but rather that than Heavy objects beeing thrown around...</p>\n"},{"tags":[],"owner":{"account_id":7213642,"reputation":1,"user_id":5506889,"display_name":"Yusuf"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1456221495,"creation_date":1446204461,"answer_id":33434925,"question_id":8645694,"body_markdown":"In order to prevent `StaleObjectStateException`, in your `hbm` file write below code:\r\n\r\n    &lt;timestamp name=&quot;lstUpdTstamp&quot; column=&quot;LST_UPD_TSTAMP&quot; source=&quot;db&quot;/&gt;\r\n\r\n","title":"Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect)","body":"<p>In order to prevent <code>StaleObjectStateException</code>, in your <code>hbm</code> file write below code:</p>\n\n<pre><code>&lt;timestamp name=\"lstUpdTstamp\" column=\"LST_UPD_TSTAMP\" source=\"db\"/&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3119827,"reputation":27,"user_id":2639828,"display_name":"user2639828"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1456220098,"creation_date":1448584847,"answer_id":33948857,"question_id":8645694,"body_markdown":"I had the same problem and in my case the problem was missing and/or incorrect equals implementation on some types of fields in the entity object. At commit time, Hibernate checks ALL entities loaded in the session to check if they are dirty. If any of the entities are dirty, hibernate tries to persist them - no matter of the fact that the actual object that is requested a save operation is not related to the other entities. \r\n\r\nEntity dirtiness is done by comparing every property of given object (with their equals methods) or `UserType.equals` if property has an associated `org.Hibernate.UserType`.\r\n\r\nAnother thing that surprised me was, in my transaction (using Spring annotation `@Transactional`), I was dealing with a single entity. Hibernate was complaining about some random entity that&#39;s unrelated to that entity being saved. What I realized is there is an outermost transaction we create at REST controller level, so the scope of the session is too big and hence all objects ever loaded as part of request processing get checked for dirtiness.\r\n\r\nHope this helps someone, some day.\r\n\r\nThanks Rags","title":"Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect)","body":"<p>I had the same problem and in my case the problem was missing and/or incorrect equals implementation on some types of fields in the entity object. At commit time, Hibernate checks ALL entities loaded in the session to check if they are dirty. If any of the entities are dirty, hibernate tries to persist them - no matter of the fact that the actual object that is requested a save operation is not related to the other entities. </p>\n\n<p>Entity dirtiness is done by comparing every property of given object (with their equals methods) or <code>UserType.equals</code> if property has an associated <code>org.Hibernate.UserType</code>.</p>\n\n<p>Another thing that surprised me was, in my transaction (using Spring annotation <code>@Transactional</code>), I was dealing with a single entity. Hibernate was complaining about some random entity that's unrelated to that entity being saved. What I realized is there is an outermost transaction we create at REST controller level, so the scope of the session is too big and hence all objects ever loaded as part of request processing get checked for dirtiness.</p>\n\n<p>Hope this helps someone, some day.</p>\n\n<p>Thanks Rags</p>\n"},{"tags":[],"owner":{"account_id":5298158,"reputation":141,"user_id":4228721,"display_name":"moskauerst"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1493885494,"creation_date":1493885494,"answer_id":43777320,"question_id":8645694,"body_markdown":"I had the same problem in my grails project. The Bug was, that i overwrite the getter method of a collection field. This returned always a new version of the collection in other thread.\r\n\r\n\r\n    class Entity {\r\n    \tList collection\r\n    \r\n    \tList getCollection() {\r\n    \t\treturn collection.unique()\r\n    \t}\r\n    }\r\n\r\nThe solution was to rename the getter method:\r\n\r\n    class Entity {\r\n    \tList collection\r\n    \r\n    \tList getUniqueCollection() {\r\n    \t\treturn collection.unique()\r\n    \t}\r\n    }\r\n\r\n","title":"Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect)","body":"<p>I had the same problem in my grails project. The Bug was, that i overwrite the getter method of a collection field. This returned always a new version of the collection in other thread.</p>\n\n<pre><code>class Entity {\n    List collection\n\n    List getCollection() {\n        return collection.unique()\n    }\n}\n</code></pre>\n\n<p>The solution was to rename the getter method:</p>\n\n<pre><code>class Entity {\n    List collection\n\n    List getUniqueCollection() {\n        return collection.unique()\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14611131,"reputation":201,"user_id":10552589,"display_name":"shubham bellale"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1597233682,"creation_date":1540391685,"answer_id":52971667,"question_id":8645694,"body_markdown":"First check your imports, when you use session, transaction it should be org.hibernate\r\nand remove `@Transactinal` annotation. and most important in Entity class if you have used `@GeneratedValue(strategy=GenerationType.AUTO)` or any other then at the time of model object creation/entity object creation should not create id.\r\nfinal conclusion is if you want pass id filed i.e PK then remove `@GeneratedValue` from entity class.\r\n","title":"Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect)","body":"<p>First check your imports, when you use session, transaction it should be org.hibernate\nand remove <code>@Transactinal</code> annotation. and most important in Entity class if you have used <code>@GeneratedValue(strategy=GenerationType.AUTO)</code> or any other then at the time of model object creation/entity object creation should not create id.\nfinal conclusion is if you want pass id filed i.e PK then remove <code>@GeneratedValue</code> from entity class.</p>\n"},{"tags":[],"owner":{"account_id":9013514,"reputation":805,"user_id":8506507,"accept_rate":67,"display_name":"Kamo Spertsian"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1597087964,"creation_date":1547135193,"answer_id":54132230,"question_id":8645694,"body_markdown":"I was also receiving such an exception, but the problem was in my Entity identifier. I am using `UUID` and there are some problems in the way Spring works with them. So I just added this line to my entity identifier and it began working:\r\n\r\n`@Column(columnDefinition = &quot;BINARY(16)&quot;)`\r\n\r\n[Here][1] you can find a little bit more information.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/54060522/spring-row-was-updated-or-deleted-by-another-transaction-or-unsaved-value-mappi/","title":"Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect)","body":"<p>I was also receiving such an exception, but the problem was in my Entity identifier. I am using <code>UUID</code> and there are some problems in the way Spring works with them. So I just added this line to my entity identifier and it began working:</p>\n<p><code>@Column(columnDefinition = &quot;BINARY(16)&quot;)</code></p>\n<p><a href=\"https://stackoverflow.com/questions/54060522/spring-row-was-updated-or-deleted-by-another-transaction-or-unsaved-value-mappi/\">Here</a> you can find a little bit more information.</p>\n"},{"tags":[],"owner":{"account_id":7304769,"reputation":328,"user_id":5566053,"display_name":"Josh Manderson"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1554160501,"creation_date":1554160501,"answer_id":55464832,"question_id":8645694,"body_markdown":"I also ran into this error when attempting to update an existing row after creating a new one, and spent ages scratching my head, digging through transaction and version logic, until I realised that **I had used the wrong type for one of my primary key columns.**\r\n\r\nI used `LocalDate` when I should have been using `LocalDateTime` –&#160;I think this was causing hibernate to not be able to distinguish entities, leading to this error.\r\n\r\nAfter changing the key to be a `LocalDateTime`, the error went away. Also, updating individual rows began to work as well – previously it would fail to find a row for updating, and testing this separate issue was actually what led me to my conclusions regarding the primary key mapping.","title":"Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect)","body":"<p>I also ran into this error when attempting to update an existing row after creating a new one, and spent ages scratching my head, digging through transaction and version logic, until I realised that <strong>I had used the wrong type for one of my primary key columns.</strong></p>\n\n<p>I used <code>LocalDate</code> when I should have been using <code>LocalDateTime</code> – I think this was causing hibernate to not be able to distinguish entities, leading to this error.</p>\n\n<p>After changing the key to be a <code>LocalDateTime</code>, the error went away. Also, updating individual rows began to work as well – previously it would fail to find a row for updating, and testing this separate issue was actually what led me to my conclusions regarding the primary key mapping.</p>\n"},{"tags":[],"owner":{"account_id":6506874,"reputation":344,"user_id":5035482,"accept_rate":92,"display_name":"w0ns88"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1560513968,"creation_date":1560513968,"answer_id":56597867,"question_id":8645694,"body_markdown":"Don&#39;t set an `Id` to the object you are saving as the `Id` will be autogenerated","title":"Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect)","body":"<p>Don't set an <code>Id</code> to the object you are saving as the <code>Id</code> will be autogenerated</p>\n"},{"tags":[],"owner":{"account_id":14636270,"reputation":133,"user_id":10570318,"display_name":"BeatEngine"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1615537061,"creation_date":1612770628,"answer_id":66097663,"question_id":8645694,"body_markdown":"I had problems with the same error on more than one Spring project.\r\nFor me a general solution was, to **split** my **service Method**, that **each INSERT, UPDATE and DELETE action got an own Method with @Transactional**. \r\nI think this problem relates to the internal Spring managment, where database interactions are executed at the end of the method and, in my oppinion, this is the point, where the Exception is triggered.\r\n\r\n**Update and further solutions.**\r\n\r\nMy problem was that I queried an **@Entity Class object and changed a value without saving it** because, strictly speaking, it was updated by another query (outside the scope), but since this object was internal to the sessions in a map now it had a different value, the next request was blocked with this message.\r\n\r\nSo I created a variable and saved the new values there and then sent them to the UpdateQuery, so Hibernate did not register any unsaved changes and the line could be updated.\r\nHibernate seems to send a lock statement to the database every time an object of the @Entity class is changed or at least to spear the line locally by primary key. ","title":"Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect)","body":"<p>I had problems with the same error on more than one Spring project.\nFor me a general solution was, to <strong>split</strong> my <strong>service Method</strong>, that <strong>each INSERT, UPDATE and DELETE action got an own Method with @Transactional</strong>.\nI think this problem relates to the internal Spring managment, where database interactions are executed at the end of the method and, in my oppinion, this is the point, where the Exception is triggered.</p>\n<p><strong>Update and further solutions.</strong></p>\n<p>My problem was that I queried an <strong>@Entity Class object and changed a value without saving it</strong> because, strictly speaking, it was updated by another query (outside the scope), but since this object was internal to the sessions in a map now it had a different value, the next request was blocked with this message.</p>\n<p>So I created a variable and saved the new values there and then sent them to the UpdateQuery, so Hibernate did not register any unsaved changes and the line could be updated.\nHibernate seems to send a lock statement to the database every time an object of the @Entity class is changed or at least to spear the line locally by primary key.</p>\n"},{"tags":[],"owner":{"account_id":11369477,"reputation":1,"user_id":15944344,"display_name":"Karan singh shekhawat"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1631150323,"creation_date":1628250353,"answer_id":68681077,"question_id":8645694,"body_markdown":"if you are using Hibernate with Dropwizard, \r\nthis could happen if you are using id as autogenerated. \r\nRemove @GeneratedValue\r\n\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/6gAFH.png","title":"Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect)","body":"<p>if you are using Hibernate with Dropwizard,\nthis could happen if you are using id as autogenerated.\nRemove @GeneratedValue</p>\n<p><a href=\"https://i.stack.imgur.com/6gAFH.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":[],"owner":{"account_id":14483618,"reputation":71,"user_id":10462202,"display_name":"Nelcon Croos"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1633610162,"creation_date":1633610162,"answer_id":69481282,"question_id":8645694,"body_markdown":"Hibernate uses versioning to know that modified object you had is older than one which is currently persisted.\r\n\r\nso when you update an entity don&#39;t include version in json body if its unwanted. just annotate with @Version in version column.","title":"Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect)","body":"<p>Hibernate uses versioning to know that modified object you had is older than one which is currently persisted.</p>\n<p>so when you update an entity don't include version in json body if its unwanted. just annotate with @Version in version column.</p>\n"},{"tags":[],"owner":{"account_id":9462743,"reputation":49,"user_id":7036053,"display_name":"Z.Rengui"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642131850,"creation_date":1642131850,"answer_id":70705802,"question_id":8645694,"body_markdown":"#### 1. Reason for error\r\n\r\nThere is another situation: Error data.\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    @Column(name = &quot;ID&quot;, unique = true, nullable = false, length = 32)\r\n    private String id;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n&gt; One of the data is blank or null. When the front-end value is saved, \r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    {\r\n        &quot;cause&quot;: {\r\n            &quot;cause&quot;: null,\r\n            &quot;message&quot;: &quot;Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect) : [com.xxx#]&quot;\r\n        },\r\n        &quot;message&quot;: &quot;Object of class [com.xxx] with identifier []: optimistic locking failed; nested exception is org.hibernate.StaleObjectStateException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect) : [com.xxx#]&quot;\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n#### 2 .solving\r\n&gt; Delete error data.\r\n\r\n","title":"Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect)","body":"<h4>1. Reason for error</h4>\n<p>There is another situation: Error data.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Column(name = &quot;ID&quot;, unique = true, nullable = false, length = 32)\nprivate String id;\n</code></pre>\n<blockquote>\n<p>One of the data is blank or null. When the front-end value is saved,</p>\n</blockquote>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>{\n    \"cause\": {\n        \"cause\": null,\n        \"message\": \"Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect) : [com.xxx#]\"\n    },\n    \"message\": \"Object of class [com.xxx] with identifier []: optimistic locking failed; nested exception is org.hibernate.StaleObjectStateException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect) : [com.xxx#]\"\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<h4>2 .solving</h4>\n<blockquote>\n<p>Delete error data.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":23434076,"reputation":1,"user_id":17492450,"display_name":"Fire Tec"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651948524,"creation_date":1651916965,"answer_id":72151366,"question_id":8645694,"body_markdown":"This problem happens if you are trying to update an object which is the same instance but retrieved from different List/Hash/ and so on, right from a different sub-thread.","title":"Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect)","body":"<p>This problem happens if you are trying to update an object which is the same instance but retrieved from different List/Hash/ and so on, right from a different sub-thread.</p>\n"},{"tags":[],"owner":{"account_id":9172812,"reputation":65,"user_id":6819634,"display_name":"balram rajput"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1667907128,"creation_date":1667907026,"answer_id":74360008,"question_id":8645694,"body_markdown":"I had the same issue and for me, the case was a bit different, I was using Spring Data JPA and the entity class was annotated with @Entity and @Table annotation, and on the ID field I had @Id annotation but I missed adding @GeneratedValue since the DB table had the auto-increment identity field.\r\n\r\nBut the issue happened when we were doing bulk insert for these entities and since there was no Generator specified on the ID field, all entities had the default value (0) as the id field. and Started giving this exception:\r\n\r\n**javax.persistence.OptimisticLockException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect) :[dao.entity.OrderAssortmentReportEntity#0]**\r\n\r\nWe added the **@GeneratedValue(strategy = GenerationType.IDENTITY)** along with @Id and it worked.\r\n","title":"Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect)","body":"<p>I had the same issue and for me, the case was a bit different, I was using Spring Data JPA and the entity class was annotated with @Entity and @Table annotation, and on the ID field I had @Id annotation but I missed adding @GeneratedValue since the DB table had the auto-increment identity field.</p>\n<p>But the issue happened when we were doing bulk insert for these entities and since there was no Generator specified on the ID field, all entities had the default value (0) as the id field. and Started giving this exception:</p>\n<p><strong>javax.persistence.OptimisticLockException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect) :[dao.entity.OrderAssortmentReportEntity#0]</strong></p>\n<p>We added the <strong>@GeneratedValue(strategy = GenerationType.IDENTITY)</strong> along with @Id and it worked.</p>\n"},{"tags":[],"owner":{"account_id":25215899,"reputation":11,"user_id":19053031,"display_name":"Zaleth"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687431989,"creation_date":1687431989,"answer_id":76531254,"question_id":8645694,"body_markdown":"In case it helps someone else in the same situation: I got this exception when trying to delete an object (via session.delete) and had forgotten that the object was also removed from a collection with delete-orphan. So when my delete() call came up, the object had already been deleted by cascade from the collection.","title":"Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect)","body":"<p>In case it helps someone else in the same situation: I got this exception when trying to delete an object (via session.delete) and had forgotten that the object was also removed from a collection with delete-orphan. So when my delete() call came up, the object had already been deleted by cascade from the collection.</p>\n"},{"tags":[],"owner":{"account_id":11732873,"reputation":734,"user_id":8587732,"display_name":"Vitaly Chura"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689164122,"creation_date":1689164122,"answer_id":76670428,"question_id":8645694,"body_markdown":"In my case I was first deleting an entity in a main thread and then creating a new entity, populating it by calling external services and saving it in a separate thread (by using CompletableFuture). I had to move deletion to the CompletableFuture piece of logic.","title":"Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect)","body":"<p>In my case I was first deleting an entity in a main thread and then creating a new entity, populating it by calling external services and saving it in a separate thread (by using CompletableFuture). I had to move deletion to the CompletableFuture piece of logic.</p>\n"}],"owner":{"account_id":193821,"reputation":3767,"user_id":435784,"accept_rate":84,"display_name":"Georgian Citizen"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":340616,"favorite_count":0,"down_vote_count":0,"up_vote_count":98,"accepted_answer_id":8646019,"answer_count":25,"score":98,"last_activity_date":1689164122,"creation_date":1324995915,"question_id":8645694,"body_markdown":"I have a java project that runs on a webserver. I always hit this exception.\r\n\r\nI read some documentation and found that pessimistic locking (or optimistic, but I read that pessimistic is better) is the best way to prevent this exception.\r\n\r\nBut I couldn&#39;t find any clear example that explains how to use it.\r\n\r\nMy method is like:\r\n\r\n```\r\n    @Transactional\r\n    public void test(Email email, String subject) {\r\n        getEmailById(String id);\r\n        email.setSubject(subject);\r\n        updateEmail(email);\r\n    }\r\n```\r\n\r\nwhile:\r\n\r\n * `Email` is a Hibernate class (it will be a table in the database)\r\n * `getEmailById(String id)` is a function that returns an `email` (this method is not annotated with `@Transactional`)\r\n * `updateEmail(email)`: is a method that updates the email.\r\n\r\n*Note:* I use Hibernate for save, update &amp; so on (example: `session.getcurrentSession.save(email)`)\r\n\r\n*The exception:*\r\n\r\n    ERROR 2011-12-21 15:29:24,910 Could not synchronize database state with session [myScheduler-1]\r\n    org.hibernate.StaleObjectStateException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [email#21]\r\n        at org.hibernate.persister.entity.AbstractEntityPersister.check(AbstractEntityPersister.java:1792)\r\n        at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:2435)\r\n        at org.hibernate.persister.entity.AbstractEntityPersister.updateOrInsert(AbstractEntityPersister.java:2335)\r\n        at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:2635)\r\n        at org.hibernate.action.EntityUpdateAction.execute(EntityUpdateAction.java:115)\r\n        at org.hibernate.engine.ActionQueue.execute(ActionQueue.java:279)\r\n        at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:263)\r\n        at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:168)\r\n        at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:321)\r\n        at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:50)\r\n        at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1027)\r\n        at org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:365)\r\n        at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:137)\r\n        at org.springframework.orm.hibernate3.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:656)\r\n        at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:754)\r\n        at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:723)\r\n        at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:393)\r\n        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:120)\r\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\r\n        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)\r\n        at $Proxy130.generateEmail(Unknown Source)\r\n        at com.admtel.appserver.tasks.EmailSender.run(EmailNotificationSender.java:33)\r\n        at com.admtel.appserver.tasks.EmailSender$$FastClassByCGLIB$$ea0d4fc2.invoke(&lt;generated&gt;)\r\n        at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:149)\r\n        at org.springframework.aop.framework.Cglib2AopProxy$CglibMethodInvocation.invokeJoinpoint(Cglib2AopProxy.java:688)\r\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)\r\n        at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:55)\r\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:161)\r\n        at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:50)\r\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:161)\r\n        at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:50)\r\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:161)\r\n        at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:89)\r\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\r\n        at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:621)\r\n        at com.admtel.appserver.tasks.EmailNotificationSender$$EnhancerByCGLIB$$33eb7303.run(&lt;generated&gt;)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\r\n        at java.lang.reflect.Method.invoke(Method.java:597)\r\n        at org.springframework.util.MethodInvoker.invoke(MethodInvoker.java:273)\r\n        at org.springframework.scheduling.support.MethodInvokingRunnable.run(MethodInvokingRunnable.java:65)\r\n        at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:51)\r\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)\r\n        at java.util.concurrent.FutureTask$Sync.innerRunAndReset(FutureTask.java:317)\r\n        at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:150)\r\n        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$101(ScheduledThreadPoolExecutor.java:98)\r\n        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.runPeriodic(ScheduledThreadPoolExecutor.java:180)\r\n        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:204)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\r\n        at java.lang.Thread.run(Thread.java:680)\r\n    ERROR 2011-12-21 15:29:24,915 [ exception thrown &lt; EmailNotificationSender.run() &gt; exception message Object of class [Email] with identifier [211]: optimistic locking failed; nested exception is org.hibernate.StaleObjectStateException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [Email#21] with params ] [myScheduler-1]\r\n    org.springframework.orm.hibernate3.HibernateOptimisticLockingFailureException: Object of class [Email] with identifier [21]: optimistic locking failed; nested exception is ","title":"Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect)","body":"<p>I have a java project that runs on a webserver. I always hit this exception.</p>\n<p>I read some documentation and found that pessimistic locking (or optimistic, but I read that pessimistic is better) is the best way to prevent this exception.</p>\n<p>But I couldn't find any clear example that explains how to use it.</p>\n<p>My method is like:</p>\n<pre><code>    @Transactional\n    public void test(Email email, String subject) {\n        getEmailById(String id);\n        email.setSubject(subject);\n        updateEmail(email);\n    }\n</code></pre>\n<p>while:</p>\n<ul>\n<li><code>Email</code> is a Hibernate class (it will be a table in the database)</li>\n<li><code>getEmailById(String id)</code> is a function that returns an <code>email</code> (this method is not annotated with <code>@Transactional</code>)</li>\n<li><code>updateEmail(email)</code>: is a method that updates the email.</li>\n</ul>\n<p><em>Note:</em> I use Hibernate for save, update &amp; so on (example: <code>session.getcurrentSession.save(email)</code>)</p>\n<p><em>The exception:</em></p>\n<pre><code>ERROR 2011-12-21 15:29:24,910 Could not synchronize database state with session [myScheduler-1]\norg.hibernate.StaleObjectStateException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [email#21]\n    at org.hibernate.persister.entity.AbstractEntityPersister.check(AbstractEntityPersister.java:1792)\n    at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:2435)\n    at org.hibernate.persister.entity.AbstractEntityPersister.updateOrInsert(AbstractEntityPersister.java:2335)\n    at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:2635)\n    at org.hibernate.action.EntityUpdateAction.execute(EntityUpdateAction.java:115)\n    at org.hibernate.engine.ActionQueue.execute(ActionQueue.java:279)\n    at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:263)\n    at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:168)\n    at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:321)\n    at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:50)\n    at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1027)\n    at org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:365)\n    at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:137)\n    at org.springframework.orm.hibernate3.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:656)\n    at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:754)\n    at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:723)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:393)\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:120)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)\n    at $Proxy130.generateEmail(Unknown Source)\n    at com.admtel.appserver.tasks.EmailSender.run(EmailNotificationSender.java:33)\n    at com.admtel.appserver.tasks.EmailSender$$FastClassByCGLIB$$ea0d4fc2.invoke(&lt;generated&gt;)\n    at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:149)\n    at org.springframework.aop.framework.Cglib2AopProxy$CglibMethodInvocation.invokeJoinpoint(Cglib2AopProxy.java:688)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)\n    at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:55)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:161)\n    at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:50)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:161)\n    at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:50)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:161)\n    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:89)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\n    at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:621)\n    at com.admtel.appserver.tasks.EmailNotificationSender$$EnhancerByCGLIB$$33eb7303.run(&lt;generated&gt;)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    at java.lang.reflect.Method.invoke(Method.java:597)\n    at org.springframework.util.MethodInvoker.invoke(MethodInvoker.java:273)\n    at org.springframework.scheduling.support.MethodInvokingRunnable.run(MethodInvokingRunnable.java:65)\n    at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:51)\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)\n    at java.util.concurrent.FutureTask$Sync.innerRunAndReset(FutureTask.java:317)\n    at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:150)\n    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$101(ScheduledThreadPoolExecutor.java:98)\n    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.runPeriodic(ScheduledThreadPoolExecutor.java:180)\n    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:204)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n    at java.lang.Thread.run(Thread.java:680)\nERROR 2011-12-21 15:29:24,915 [ exception thrown &lt; EmailNotificationSender.run() &gt; exception message Object of class [Email] with identifier [211]: optimistic locking failed; nested exception is org.hibernate.StaleObjectStateException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [Email#21] with params ] [myScheduler-1]\norg.springframework.orm.hibernate3.HibernateOptimisticLockingFailureException: Object of class [Email] with identifier [21]: optimistic locking failed; nested exception is \n</code></pre>\n"},{"tags":["java","tesseract"],"answers":[{"tags":[],"owner":{"account_id":392659,"reputation":8270,"user_id":754060,"display_name":"nguyenq"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1390875226,"creation_date":1390875226,"answer_id":21395591,"question_id":21394537,"body_markdown":"Make sure you use `libtesseract.dylib` of Tesseract 3.02 version. Check out [this post][1] on Tesseract Forum.\r\n\r\n\r\n  [1]: https://groups.google.com/forum/#!topic/tesseract-ocr/y8m_IIk767s","title":"Tess4j unsatisfied link error on mac OS X","body":"<p>Make sure you use <code>libtesseract.dylib</code> of Tesseract 3.02 version. Check out <a href=\"https://groups.google.com/forum/#!topic/tesseract-ocr/y8m_IIk767s\" rel=\"nofollow\">this post</a> on Tesseract Forum.</p>\n"},{"tags":[],"owner":{"account_id":2880950,"reputation":591,"user_id":2471889,"display_name":"maresa"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1433869733,"creation_date":1433832555,"answer_id":30724844,"question_id":21394537,"body_markdown":"I know it&#39;s an old post. I had this problem too recently when I tried to use `Tess4J`. However, I managed to find a way around it. I&#39;ve written a post about it http://www.microshell.com/programming/java/performing-optical-character-recognition-in-java/\r\n\r\nIn short, the problem is because `tess4j-2.0.0.jar` doesn&#39;t include MacOS library. So I just modified the maven cached jar on mine by doing these steps:\r\n\r\n 1. `cd /Users/user/.m2/repository/net/sourceforge/tess4j/tess4j/2.0.0` (adjust the directory where your tess4j JAR file resides)\r\n 2. `mkdir darwin`\r\n 3. `jar uf tess4j-2.0.0.jar darwin`\r\n 4. `cp /opt/local/lib/libtesseract.3.dylib darwin/libtesseract.dylib`\r\n 5. `jar uf tess4j-2.0.0.jar darwin/libtesseract.dylib`\r\n 6. `jar tf tess4j-2.0.0.jar` (to verify that the file is included)\r\n\r\nI was then able to run my Java program after I modify the `tess4j-2.0.0.jar` file. Below is my MacOS version.\r\n\r\n    user@laptop:~$ uname -a\r\n    Darwin Maresas-MacBook-Pro.local 14.3.0 Darwin Kernel Version 14.3.0: Mon Mar 23 11:59:05 PDT 2015; root:xnu-2782.20.48~5/RELEASE_X86_64 x86_64\r\n\r\n","title":"Tess4j unsatisfied link error on mac OS X","body":"<p>I know it's an old post. I had this problem too recently when I tried to use <code>Tess4J</code>. However, I managed to find a way around it. I've written a post about it <a href=\"http://www.microshell.com/programming/java/performing-optical-character-recognition-in-java/\" rel=\"noreferrer\">http://www.microshell.com/programming/java/performing-optical-character-recognition-in-java/</a></p>\n\n<p>In short, the problem is because <code>tess4j-2.0.0.jar</code> doesn't include MacOS library. So I just modified the maven cached jar on mine by doing these steps:</p>\n\n<ol>\n<li><code>cd /Users/user/.m2/repository/net/sourceforge/tess4j/tess4j/2.0.0</code> (adjust the directory where your tess4j JAR file resides)</li>\n<li><code>mkdir darwin</code></li>\n<li><code>jar uf tess4j-2.0.0.jar darwin</code></li>\n<li><code>cp /opt/local/lib/libtesseract.3.dylib darwin/libtesseract.dylib</code></li>\n<li><code>jar uf tess4j-2.0.0.jar darwin/libtesseract.dylib</code></li>\n<li><code>jar tf tess4j-2.0.0.jar</code> (to verify that the file is included)</li>\n</ol>\n\n<p>I was then able to run my Java program after I modify the <code>tess4j-2.0.0.jar</code> file. Below is my MacOS version.</p>\n\n<pre><code>user@laptop:~$ uname -a\nDarwin Maresas-MacBook-Pro.local 14.3.0 Darwin Kernel Version 14.3.0: Mon Mar 23 11:59:05 PDT 2015; root:xnu-2782.20.48~5/RELEASE_X86_64 x86_64\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2071944,"reputation":823,"user_id":1846221,"display_name":"Andrew Neilson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1438815103,"creation_date":1438815103,"answer_id":31844121,"question_id":21394537,"body_markdown":"This is exactly what I was after today, so thanks for the Q&amp;A above. As one additional step beyond what maresa mentioned, I ran into this error after fixing the one you asked about:\r\n\r\n    java.lang.UnsatisfiedLinkError: dlopen(/var/folders/sq/rh89_ntd7jqdlv9__25zj9dr0000gp/T/jna--913086793/jna8800789057827590119.tmp, 9): Library not loaded: /usr/local/lib/libjpeg.8.dylib\r\n      Referenced from: /usr/local/lib/liblept.4.dylib\r\n      Reason: image not found\r\n\r\nSo to fix this I needed to set up a symlink for libjpeg.8.dylib:\r\n\r\n    ln -s /usr/local/Cellar/jpeg/8d/lib/libjpeg.8.dylib /usr/local/lib/libjpeg.8.dylib\r\n\r\nNot sure if there is a way to do this without the symlink (i.e. package it in the jar), but I hope this helps anyone else who is looking at this post.","title":"Tess4j unsatisfied link error on mac OS X","body":"<p>This is exactly what I was after today, so thanks for the Q&amp;A above. As one additional step beyond what maresa mentioned, I ran into this error after fixing the one you asked about:</p>\n\n<pre><code>java.lang.UnsatisfiedLinkError: dlopen(/var/folders/sq/rh89_ntd7jqdlv9__25zj9dr0000gp/T/jna--913086793/jna8800789057827590119.tmp, 9): Library not loaded: /usr/local/lib/libjpeg.8.dylib\n  Referenced from: /usr/local/lib/liblept.4.dylib\n  Reason: image not found\n</code></pre>\n\n<p>So to fix this I needed to set up a symlink for libjpeg.8.dylib:</p>\n\n<pre><code>ln -s /usr/local/Cellar/jpeg/8d/lib/libjpeg.8.dylib /usr/local/lib/libjpeg.8.dylib\n</code></pre>\n\n<p>Not sure if there is a way to do this without the symlink (i.e. package it in the jar), but I hope this helps anyone else who is looking at this post.</p>\n"},{"tags":[],"owner":{"account_id":2484522,"reputation":111,"user_id":2163229,"display_name":"Michael Miklavcic"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1460312098,"creation_date":1460312098,"answer_id":36533605,"question_id":21394537,"body_markdown":"I had a very similar issue with Ghost4j, i.e. \r\n\r\n    InvocationTargetException: Unable to load library &#39;gs&#39;: Native library (darwin/libgs.dylib) not found in resource path\r\n\r\nInstead of modifying jar files, point jna to the appropriate lib path by setting `jna.library.path`. In Eclipse, you need to set the system property in run configurations - SO answer for this here - https://stackoverflow.com/a/862405/2163229\r\n\r\nIf you&#39;re using Maven exec:\r\n\r\n    mvn -Djna.library.path=/opt/local/lib/ exec:java -Dexec.mainClass=&quot;foo.bar.NativeThingy&quot;\r\n\r\nor\r\n\r\n    export MAVEN_OPTS=&quot;-Djna.library.path=/opt/local/lib/&quot; &amp;&amp; mvn exec:java -Dexec.mainClass=&quot;foo.bar.NativeThingy&quot;\r\n\r\nObviously, set the path to wherever your libs are installed. In my case, I ran `$ locate libgs.dylib` and found the above path.\r\n\r\n**References:**\r\nhttps://jna.java.net/javadoc/com/sun/jna/NativeLibrary.html","title":"Tess4j unsatisfied link error on mac OS X","body":"<p>I had a very similar issue with Ghost4j, i.e. </p>\n\n<pre><code>InvocationTargetException: Unable to load library 'gs': Native library (darwin/libgs.dylib) not found in resource path\n</code></pre>\n\n<p>Instead of modifying jar files, point jna to the appropriate lib path by setting <code>jna.library.path</code>. In Eclipse, you need to set the system property in run configurations - SO answer for this here - <a href=\"https://stackoverflow.com/a/862405/2163229\">https://stackoverflow.com/a/862405/2163229</a></p>\n\n<p>If you're using Maven exec:</p>\n\n<pre><code>mvn -Djna.library.path=/opt/local/lib/ exec:java -Dexec.mainClass=\"foo.bar.NativeThingy\"\n</code></pre>\n\n<p>or</p>\n\n<pre><code>export MAVEN_OPTS=\"-Djna.library.path=/opt/local/lib/\" &amp;&amp; mvn exec:java -Dexec.mainClass=\"foo.bar.NativeThingy\"\n</code></pre>\n\n<p>Obviously, set the path to wherever your libs are installed. In my case, I ran <code>$ locate libgs.dylib</code> and found the above path.</p>\n\n<p><strong>References:</strong>\n<a href=\"https://jna.java.net/javadoc/com/sun/jna/NativeLibrary.html\" rel=\"noreferrer\">https://jna.java.net/javadoc/com/sun/jna/NativeLibrary.html</a></p>\n"},{"tags":[],"owner":{"account_id":5897696,"reputation":10118,"user_id":4642316,"accept_rate":87,"display_name":"Long Nguyen"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1542887713,"creation_date":1486401162,"answer_id":42073470,"question_id":21394537,"body_markdown":"You need install the tesseract lib on your Mac.\r\n\r\n`brew install tesseract --with-all-languages`\r\n","title":"Tess4j unsatisfied link error on mac OS X","body":"<p>You need install the tesseract lib on your Mac.</p>\n\n<p><code>brew install tesseract --with-all-languages</code></p>\n"},{"tags":[],"owner":{"account_id":9156148,"reputation":256,"user_id":6809051,"display_name":"Max M."},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1613128769,"creation_date":1613128769,"answer_id":66170926,"question_id":21394537,"body_markdown":"@maresa after a few years your comment helped me, thanks a lot :) A bit different paths, maybe it&#39;ll help someone:\r\n\r\n 1. cd /Users/username/.m2/repository/net/sourceforge/tess4j/tess4j/4.5.4/\r\n 2. mkdir darwin\r\n 3. jar uf tess4j-4.5.4.jar darwin/\r\n 4. brew info tesseract (here you can find path to libtesseract.4.dylib)\r\n 5. cp /usr/local/Cellar/tesseract/4.1.1/lib/libtesseract.4.dylib darwin/libtesseract.dylib\r\n 6. jar uf tess4j-4.5.4.jar darwin/libtesseract.dylib\r\n 7. jar tf tess4j-4.5.4.jar\r\n\r\nMacOS Catalina - 10.15.3","title":"Tess4j unsatisfied link error on mac OS X","body":"<p>@maresa after a few years your comment helped me, thanks a lot :) A bit different paths, maybe it'll help someone:</p>\n<ol>\n<li>cd /Users/username/.m2/repository/net/sourceforge/tess4j/tess4j/4.5.4/</li>\n<li>mkdir darwin</li>\n<li>jar uf tess4j-4.5.4.jar darwin/</li>\n<li>brew info tesseract (here you can find path to libtesseract.4.dylib)</li>\n<li>cp /usr/local/Cellar/tesseract/4.1.1/lib/libtesseract.4.dylib darwin/libtesseract.dylib</li>\n<li>jar uf tess4j-4.5.4.jar darwin/libtesseract.dylib</li>\n<li>jar tf tess4j-4.5.4.jar</li>\n</ol>\n<p>MacOS Catalina - 10.15.3</p>\n"},{"tags":[],"owner":{"account_id":5068712,"reputation":2406,"user_id":4068123,"display_name":"Michael Sims"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676665134,"creation_date":1676665134,"answer_id":75488906,"question_id":21394537,"body_markdown":"Based on maresa&#39;s answer above, which works perfectly, I wrote a library that will make it easy to patch the tess4j.jar file with the appropriate C library from tesseract. [You can get it here][1].\r\n\r\n\r\n  [1]: https://github.com/EasyG0ing1/FixTess4j4Mac","title":"Tess4j unsatisfied link error on mac OS X","body":"<p>Based on maresa's answer above, which works perfectly, I wrote a library that will make it easy to patch the tess4j.jar file with the appropriate C library from tesseract. <a href=\"https://github.com/EasyG0ing1/FixTess4j4Mac\" rel=\"nofollow noreferrer\">You can get it here</a>.</p>\n"},{"tags":[],"owner":{"account_id":16698629,"reputation":1,"user_id":14909682,"display_name":"Jamy Cake"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689163970,"creation_date":1689163970,"answer_id":76670399,"question_id":21394537,"body_markdown":"You should to specify the path to .dylib via `Djna.library.path` vm option.\r\n\r\nIn my case: `-Djna.library.path=/usr/local/lib` \r\n\r\nAlso this topic may be useful for you, because in my case it is need to install tesseract for x86_64 architecture:\r\n\r\n- https://stackoverflow.com/questions/72970363/how-do-you-install-the-x86-64-version-of-a-brew-package-on-a-m1-mac\r\n\r\n\r\n\r\n\r\n","title":"Tess4j unsatisfied link error on mac OS X","body":"<p>You should to specify the path to .dylib via <code>Djna.library.path</code> vm option.</p>\n<p>In my case: <code>-Djna.library.path=/usr/local/lib</code></p>\n<p>Also this topic may be useful for you, because in my case it is need to install tesseract for x86_64 architecture:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/72970363/how-do-you-install-the-x86-64-version-of-a-brew-package-on-a-m1-mac\">How do you install the x86_64 version of a brew package on a M1 Mac?</a></li>\n</ul>\n"}],"owner":{"account_id":1210080,"reputation":229,"user_id":1178814,"accept_rate":0,"display_name":"nestrocuation"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21748,"favorite_count":0,"down_vote_count":1,"up_vote_count":13,"answer_count":8,"score":12,"last_activity_date":1689163970,"creation_date":1390868436,"question_id":21394537,"body_markdown":"Hey i am trying to use tess4j for tesseract and having this issue for eclipse on mac osx .\r\n\r\nMy tesseract is working fine from terminal but trying to run tess4j through tesseract throws me an error .\r\n\r\njava.lang.UnsatisfiedLinkError: Unable to load library &#39;tesseract&#39;: Native library (darwin/libtesseract.dylib)\r\n\r\ni do have tessetact dylib and its named libtesseract.dylib in my opt/local/lib which i installed using macport .\r\n\r\n\r\nThanks for your help","title":"Tess4j unsatisfied link error on mac OS X","body":"<p>Hey i am trying to use tess4j for tesseract and having this issue for eclipse on mac osx .</p>\n\n<p>My tesseract is working fine from terminal but trying to run tess4j through tesseract throws me an error .</p>\n\n<p>java.lang.UnsatisfiedLinkError: Unable to load library 'tesseract': Native library (darwin/libtesseract.dylib)</p>\n\n<p>i do have tessetact dylib and its named libtesseract.dylib in my opt/local/lib which i installed using macport .</p>\n\n<p>Thanks for your help</p>\n"},{"tags":["java","jaxb","deserialization"],"owner":{"account_id":25486631,"reputation":101,"user_id":19282140,"display_name":"java developer 111"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689163930,"creation_date":1689163930,"question_id":76670392,"body_markdown":"here is simple dto\r\n\r\n    import org.w3c.dom.Element;\r\n    \r\n        @Getter\r\n        @Setter\r\n        public class MessageDto {\r\n            \r\n            private Long Id;\r\n            private Element message;\r\n        \r\n        }\r\n\r\nand Controller\r\n\r\n    @RestController\r\n    @RequiredArgsConstructor\r\n    public class SendController {\r\n    \r\n        private final SendService sendService;\r\n    \r\n        @PostMapping\r\n        public void sendMessage(@RequestBody MessageDto message) {\r\n            sendService.sendMessage(message);\r\n        }\r\n\r\nthis method make an Element \r\n\r\n    private Element marshal(Object element) {\r\n            try {\r\n                Document document = DocumentBuilderFactory.newInstance().newDocumentBuilder().newDocument();\r\n                Marshaller marshaller = jaxbContext.createMarshaller();\r\n                marshaller.marshal(element, new DOMResult(document));\r\n                return document.getDocumentElement();\r\n\r\nthis is Jaxb pojo that i use as argument in marshal method\r\n\r\n    @XmlAccessorType(XmlAccessType.FIELD)\r\n    @XmlType(name = &quot;Request&quot;, propOrder = {\r\n        &quot;test&quot;\r\n    })\r\n    @XmlRootElement(name = &quot;Request&quot;, namespace = &quot;some.test.name.space&quot;)\r\n    public class Request {\r\n    \r\n        protected String test;\r\n    \r\n     \r\n        public String getTest() {\r\n            return testing;\r\n        }\r\n    \r\n        public void setTest(String value) {\r\n            this.test = value;\r\n        }\r\n    \r\n    }\r\n\r\nwhen i try to send  MessageDto to this controller from another java application i got an error\r\n\r\nnested exception is com.fasterxml.jackson.databind.JsonMappingException: Problem deserializing property &#39;message&#39; (expected type: [simple type, class org.w3c.dom.Element]; actual type: `org.apache.xerces.dom.DeferredDocumentImpl`), problem: Can not set org.w3c.dom.Element field MessageDto.message to org.apache.xerces.dom.DeferredDocumentImpl","title":"deserializing issue w3c.dom.Element","body":"<p>here is simple dto</p>\n<pre><code>import org.w3c.dom.Element;\n\n    @Getter\n    @Setter\n    public class MessageDto {\n        \n        private Long Id;\n        private Element message;\n    \n    }\n</code></pre>\n<p>and Controller</p>\n<pre><code>@RestController\n@RequiredArgsConstructor\npublic class SendController {\n\n    private final SendService sendService;\n\n    @PostMapping\n    public void sendMessage(@RequestBody MessageDto message) {\n        sendService.sendMessage(message);\n    }\n</code></pre>\n<p>this method make an Element</p>\n<pre><code>private Element marshal(Object element) {\n        try {\n            Document document = DocumentBuilderFactory.newInstance().newDocumentBuilder().newDocument();\n            Marshaller marshaller = jaxbContext.createMarshaller();\n            marshaller.marshal(element, new DOMResult(document));\n            return document.getDocumentElement();\n</code></pre>\n<p>this is Jaxb pojo that i use as argument in marshal method</p>\n<pre><code>@XmlAccessorType(XmlAccessType.FIELD)\n@XmlType(name = &quot;Request&quot;, propOrder = {\n    &quot;test&quot;\n})\n@XmlRootElement(name = &quot;Request&quot;, namespace = &quot;some.test.name.space&quot;)\npublic class Request {\n\n    protected String test;\n\n \n    public String getTest() {\n        return testing;\n    }\n\n    public void setTest(String value) {\n        this.test = value;\n    }\n\n}\n</code></pre>\n<p>when i try to send  MessageDto to this controller from another java application i got an error</p>\n<p>nested exception is com.fasterxml.jackson.databind.JsonMappingException: Problem deserializing property 'message' (expected type: [simple type, class org.w3c.dom.Element]; actual type: <code>org.apache.xerces.dom.DeferredDocumentImpl</code>), problem: Can not set org.w3c.dom.Element field MessageDto.message to org.apache.xerces.dom.DeferredDocumentImpl</p>\n"},{"tags":["java","list","wildcard"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1689165883,"post_id":76668911,"comment_id":135174472,"body_markdown":"Note that `List&lt;dog&gt;` is not the same as `List&lt;animal&gt;`. If you have a method whose parameter is `List&lt;animal&gt;` you cannot call that method with `List&lt;dog&gt;`. That&#39;s why there is the [PECS](https://www.baeldung.com/java-generics-pecs) rule. Can you [edit] your question and provide more context? Why do you need a `List` that contains both `dog` and `animal`? Of-course you can always do: `new ArrayList&lt;animal&gt;().add(new dog());` but is that a preferable option?","body":"Note that <code>List&lt;dog&gt;</code> is not the same as <code>List&lt;animal&gt;</code>. If you have a method whose parameter is <code>List&lt;animal&gt;</code> you cannot call that method with <code>List&lt;dog&gt;</code>. That&#39;s why there is the <a href=\"https://www.baeldung.com/java-generics-pecs\" rel=\"nofollow noreferrer\">PECS</a> rule. Can you <a href=\"https://stackoverflow.com/posts/76668911/edit\">edit</a> your question and provide more context? Why do you need a <code>List</code> that contains both <code>dog</code> and <code>animal</code>? Of-course you can always do: <code>new ArrayList&lt;animal&gt;().add(new dog());</code> but is that a preferable option?"},{"owner":{"account_id":10732579,"reputation":666,"user_id":7898202,"display_name":"MorganS42"},"score":0,"creation_date":1689387138,"post_id":76668911,"comment_id":135210594,"body_markdown":"QTT, have you read my answer?","body":"QTT, have you read my answer?"}],"answers":[{"tags":[],"owner":{"account_id":10732579,"reputation":666,"user_id":7898202,"display_name":"MorganS42"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689153973,"creation_date":1689153973,"answer_id":76669036,"question_id":76668911,"body_markdown":"Using generics here (including the ? wildcard) would be a mistake. This can be done simply by creating a list of `Animals`:\r\n\r\n```java\r\nList&lt;Animal&gt; animals = new ArrayList&lt;Animal&gt;();\r\n```\r\n\r\nBecause `Dog` extends `Animal` it is an `Animal`, and as such can be an element in the List of `Animals`.","title":"Declare a list of element from different classes","body":"<p>Using generics here (including the ? wildcard) would be a mistake. This can be done simply by creating a list of <code>Animals</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Animal&gt; animals = new ArrayList&lt;Animal&gt;();\n</code></pre>\n<p>Because <code>Dog</code> extends <code>Animal</code> it is an <code>Animal</code>, and as such can be an element in the List of <code>Animals</code>.</p>\n"},{"tags":[],"owner":{"account_id":29001004,"reputation":1,"user_id":22214555,"display_name":"Thanh H&#242;a L&#234;"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1689155113,"creation_date":1689155113,"answer_id":76669224,"question_id":76668911,"body_markdown":"You can use:\r\n```\r\nList&lt;Animal&gt; animals = new ArrayList&lt;Animal&gt;();\r\n```\r\n because **Dog** is an **Animal** when **Dog** extends **Animal**. But you only use attributes and function from **Animal** or function from **Dog** which is override a function from **Animal**.  ","title":"Declare a list of element from different classes","body":"<p>You can use:</p>\n<pre><code>List&lt;Animal&gt; animals = new ArrayList&lt;Animal&gt;();\n</code></pre>\n<p>because <strong>Dog</strong> is an <strong>Animal</strong> when <strong>Dog</strong> extends <strong>Animal</strong>. But you only use attributes and function from <strong>Animal</strong> or function from <strong>Dog</strong> which is override a function from <strong>Animal</strong>.</p>\n"}],"owner":{"account_id":29000938,"reputation":11,"user_id":22214491,"display_name":"QTT"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1689163446,"creation_date":1689153028,"question_id":76668911,"body_markdown":"I have a class, which extends another class (e.g. `dog` extends `animal`).\r\nIf I want to declare a list, which can contain dog as well as animal, how can i declare this?\r\n\r\nI have declared my list as below (with wildcard), but this is not recommended by sonar\r\n```java\r\nList &lt;?&gt;\r\n```\r\n","title":"Declare a list of element from different classes","body":"<p>I have a class, which extends another class (e.g. <code>dog</code> extends <code>animal</code>).\nIf I want to declare a list, which can contain dog as well as animal, how can i declare this?</p>\n<p>I have declared my list as below (with wildcard), but this is not recommended by sonar</p>\n<pre class=\"lang-java prettyprint-override\"><code>List &lt;?&gt;\n</code></pre>\n"},{"tags":["java","kotlin","jvm","g1gc"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":3,"creation_date":1689163478,"post_id":76670320,"comment_id":135173887,"body_markdown":"Too broad. How many concurrent clients are you expecting? How long is the average session? What is wrong with the default value of 20480 in your case?","body":"Too broad. How many concurrent clients are you expecting? How long is the average session? What is wrong with the default value of 20480 in your case?"},{"owner":{"account_id":10923818,"reputation":606,"user_id":8085276,"display_name":"Ajay Kumar"},"score":0,"creation_date":1689164273,"post_id":76670320,"comment_id":135174102,"body_markdown":"I am expecting 20 concurrent not more than that. And average session is somewhat 45sec to 1 minute.","body":"I am expecting 20 concurrent not more than that. And average session is somewhat 45sec to 1 minute."},{"owner":{"account_id":10923818,"reputation":606,"user_id":8085276,"display_name":"Ajay Kumar"},"score":0,"creation_date":1689164404,"post_id":76670320,"comment_id":135174123,"body_markdown":"also; exactly what is the impact of this variable when the service takes somewhat a minute to process and return the response for a single client. and incase of concurrent requests, this might be even higher.","body":"also; exactly what is the impact of this variable when the service takes somewhat a minute to process and return the response for a single client. and incase of concurrent requests, this might be even higher."},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1689166170,"post_id":76670320,"comment_id":135174564,"body_markdown":"The value has been set to 20480 because Amazon requested this size (https://bugs.openjdk.org/browse/JDK-8210985) and therefore should fit most applications.","body":"The value has been set to 20480 because Amazon requested this size (<a href=\"https://bugs.openjdk.org/browse/JDK-8210985\" rel=\"nofollow noreferrer\">bugs.openjdk.org/browse/JDK-8210985</a>) and therefore should fit most applications."},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1689188660,"post_id":76670320,"comment_id":135179746,"body_markdown":"When you write _I did some research and figured out that it is recommended not to keep it default on old jdk version._: how old is the JDK version that you try to use? The default value was changed in 2019/2020 for Java 8u261 and later, Java 11.0.5 and later and all Java version 12 and later. If you are using Java versions older than these then maybe you should set it to 20480. But I read from your question that you use Java 17 which already has the updated default value.","body":"When you write <i>I did some research and figured out that it is recommended not to keep it default on old jdk version.</i>: how old is the JDK version that you try to use? The default value was changed in 2019/2020 for Java 8u261 and later, Java 11.0.5 and later and all Java version 12 and later. If you are using Java versions older than these then maybe you should set it to 20480. But I read from your question that you use Java 17 which already has the updated default value."}],"owner":{"account_id":10923818,"reputation":606,"user_id":8085276,"display_name":"Ajay Kumar"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1689163319,"creation_date":1689163319,"question_id":76670320,"body_markdown":"I was wondering what should be the ideal value for `-Djavax.net.ssl.sessionCacheSize` for java service which is about to goto production. I know we can fine tune it later but what should be initial value. \r\n\r\nI did some research and figured out that it is recommended not to keep it default on old jdk version. \r\n\r\n```c++\r\nbash-4.2$ java --version\r\nopenjdk 17.0.7 2023-04-18 LTS\r\nOpenJDK Runtime Environment Zulu17.42+20-SA (build 17.0.7+7-LTS)\r\nOpenJDK 64-Bit Server VM Zulu17.42+20-SA (build 17.0.7+7-LTS, mixed mode, sharing)\r\n```","title":"What should be the ideal value for -Djavax.net.ssl.sessionCacheSize for Java Services","body":"<p>I was wondering what should be the ideal value for <code>-Djavax.net.ssl.sessionCacheSize</code> for java service which is about to goto production. I know we can fine tune it later but what should be initial value.</p>\n<p>I did some research and figured out that it is recommended not to keep it default on old jdk version.</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>bash-4.2$ java --version\nopenjdk 17.0.7 2023-04-18 LTS\nOpenJDK Runtime Environment Zulu17.42+20-SA (build 17.0.7+7-LTS)\nOpenJDK 64-Bit Server VM Zulu17.42+20-SA (build 17.0.7+7-LTS, mixed mode, sharing)\n</code></pre>\n"},{"tags":["java","eclipse","maven","tomcat","intellij-idea"],"owner":{"account_id":3296085,"reputation":695,"user_id":2773323,"display_name":"hagbard"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":303,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":0,"score":4,"last_activity_date":1689163250,"creation_date":1485966741,"question_id":41984856,"body_markdown":"When I want to deploy a java web project with a non-ROOT context path, I can configure that.\r\n\r\nThe manual way:\r\n\r\n- In Eclipse: \r\n  - via project properties\r\n     - go to Web Project Settings\r\n     - configure it right there\r\n  - via the Servers view\r\n     - double click the server\r\n     - go to modules\r\n     - edit it there\r\n- In IntelliJ&#39;s Tomcat Server run config\r\n  - Deployment tab\r\n  - add the artifact you want\r\n  - edit the Application context\r\n\r\n\r\nIn the times of maven etc, this should be automated, so not every time a web application is deployed/undeployed I have to edit this again.\r\nOr whenever a new developer joins the project.\r\n\r\nNow for Eclipse you can set a property in your pom, telling it which path to use:\r\n\r\n    &lt;properties&gt;\r\n        &lt;m2eclipse.wtp.contextRoot&gt;/my/custom/context/path&lt;/m2eclipse.wtp.contextRoot&gt;\r\n    &lt;/properties&gt;\r\n\r\n\r\n----------\r\n\r\nIs there an equivalent for IntelliJ?\r\n\r\n----------","title":"IntelliJ Run Config for Tomcat - preconfigure Application Context","body":"<p>When I want to deploy a java web project with a non-ROOT context path, I can configure that.</p>\n\n<p>The manual way:</p>\n\n<ul>\n<li>In Eclipse: \n\n<ul>\n<li>via project properties\n\n<ul>\n<li>go to Web Project Settings</li>\n<li>configure it right there</li>\n</ul></li>\n<li>via the Servers view\n\n<ul>\n<li>double click the server</li>\n<li>go to modules</li>\n<li>edit it there</li>\n</ul></li>\n</ul></li>\n<li>In IntelliJ's Tomcat Server run config\n\n<ul>\n<li>Deployment tab</li>\n<li>add the artifact you want</li>\n<li>edit the Application context</li>\n</ul></li>\n</ul>\n\n<p>In the times of maven etc, this should be automated, so not every time a web application is deployed/undeployed I have to edit this again.\nOr whenever a new developer joins the project.</p>\n\n<p>Now for Eclipse you can set a property in your pom, telling it which path to use:</p>\n\n<pre><code>&lt;properties&gt;\n    &lt;m2eclipse.wtp.contextRoot&gt;/my/custom/context/path&lt;/m2eclipse.wtp.contextRoot&gt;\n&lt;/properties&gt;\n</code></pre>\n\n<hr>\n\n<p>Is there an equivalent for IntelliJ?</p>\n\n<hr>\n"},{"tags":["java","strictfp"],"comments":[{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":1,"creation_date":1689162857,"post_id":76670233,"comment_id":135173730,"body_markdown":"From Java 17 version, strictfp keyword is NOT required explicitly as all floating point expressions are strictly evaluated. https://openjdk.org/jeps/306","body":"From Java 17 version, strictfp keyword is NOT required explicitly as all floating point expressions are strictly evaluated. <a href=\"https://openjdk.org/jeps/306\" rel=\"nofollow noreferrer\">openjdk.org/jeps/306</a>"},{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":2,"creation_date":1689162881,"post_id":76670233,"comment_id":135173738,"body_markdown":"What exactly do you mean by &quot;the same result&quot;? Floating point semantics are always strict since java 17 ([see this JEP](https://openjdk.org/jeps/306)), making this keyword useless.","body":"What exactly do you mean by &quot;the same result&quot;? Floating point semantics are always strict since java 17 (<a href=\"https://openjdk.org/jeps/306\" rel=\"nofollow noreferrer\">see this JEP</a>), making this keyword useless."},{"owner":{"account_id":1475,"reputation":533754,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"score":5,"creation_date":1689162886,"post_id":76670233,"comment_id":135173739,"body_markdown":"“But how to achieve the same result?” —&#160;*Every* floating point arithmetic in Java 17 achieves the same result. That’s the whole point. Java 17 behaves as if `strictfp` was used everywhere.","body":"“But how to achieve the same result?” — <i>Every</i> floating point arithmetic in Java 17 achieves the same result. That’s the whole point. Java 17 behaves as if <code>strictfp</code> was used everywhere."},{"owner":{"account_id":197015,"reputation":1212,"user_id":440803,"accept_rate":78,"display_name":"felipe"},"score":0,"creation_date":1689163189,"post_id":76670233,"comment_id":135173806,"body_markdown":"@f1sh I changed the question thanks","body":"@f1sh I changed the question thanks"},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":1,"creation_date":1689163265,"post_id":76670233,"comment_id":135173825,"body_markdown":"You **always** get the behaviour as if you had previously used `strictfp` before. The thing that was removed was the option to *maybe* get non-strictfp behaviour if your JVM was implemented that way.","body":"You <b>always</b> get the behaviour as if you had previously used <code>strictfp</code> before. The thing that was removed was the option to <i>maybe</i> get non-strictfp behaviour if your JVM was implemented that way."},{"owner":{"account_id":197015,"reputation":1212,"user_id":440803,"accept_rate":78,"display_name":"felipe"},"score":0,"creation_date":1689163283,"post_id":76670233,"comment_id":135173831,"body_markdown":"@experimentunit1998X ok, so every calculation is strictly evaluated now? it&#39;s really interesting, doesnt this make any performance loss or something?","body":"@experimentunit1998X ok, so every calculation is strictly evaluated now? it&#39;s really interesting, doesnt this make any performance loss or something?"},{"owner":{"account_id":2803497,"reputation":25202,"user_id":2411243,"display_name":"Zabuzard"},"score":0,"creation_date":1689163309,"post_id":76670233,"comment_id":135173838,"body_markdown":"It might have been a factor 20 years ago, but it is not anymore. You can read the linked JEP for details on this. Quote: &quot;_[...] stemmed from a bad interaction between the original Java language and JVM semantics and some unfortunate peculiarities of the x87 floating-point co-processor instruction set of the popular x86 architecture. Matching the exact floating-point semantics in all cases, including subnormal operands and results, required large overheads of additional instructions.&quot;_","body":"It might have been a factor 20 years ago, but it is not anymore. You can read the linked JEP for details on this. Quote: &quot;<i>[...] stemmed from a bad interaction between the original Java language and JVM semantics and some unfortunate peculiarities of the x87 floating-point co-processor instruction set of the popular x86 architecture. Matching the exact floating-point semantics in all cases, including subnormal operands and results, required large overheads of additional instructions.&quot;</i>"},{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1689163410,"post_id":76670233,"comment_id":135173867,"body_markdown":"On Intel based systems, the `strictfp` keyword was necessary to *reduce* the intermediate precision of floating point operations used internally by the CPU  (basically, Intel uses extended precision). The change in Java 17 was to replace the Intel native floating point math operations with SSE2 calls (Pentium 4 and newer, around 2001). See [JEPS-306](https://openjdk.org/jeps/306).","body":"On Intel based systems, the <code>strictfp</code> keyword was necessary to <i>reduce</i> the intermediate precision of floating point operations used internally by the CPU  (basically, Intel uses extended precision). The change in Java 17 was to replace the Intel native floating point math operations with SSE2 calls (Pentium 4 and newer, around 2001). See <a href=\"https://openjdk.org/jeps/306\" rel=\"nofollow noreferrer\">JEPS-306</a>."},{"owner":{"account_id":213468,"reputation":103489,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1689165712,"post_id":76670233,"comment_id":135174434,"body_markdown":"What part of _&quot;As of Java 17, IEEE 754 semantics is required, thus using this keyword has no effect.&quot;_ is unclear? Did you think `strictfp` was something other than IEEE 754 semantics?","body":"What part of <i>&quot;As of Java 17, IEEE 754 semantics is required, thus using this keyword has no effect.&quot;</i> is unclear? Did you think <code>strictfp</code> was something other than IEEE 754 semantics?"},{"owner":{"account_id":197015,"reputation":1212,"user_id":440803,"accept_rate":78,"display_name":"felipe"},"score":0,"creation_date":1689176834,"post_id":76670233,"comment_id":135177390,"body_markdown":"@MarkRotteveel it&#39;s unclear, if we don&#39;t use it how can we achive IEEE 754 similar standard, like same float point operations every processor? but as experimentunit1998X said all calculations are strictly evaluated now, so I understand we have similar feature to IEEE 754 by default now","body":"@MarkRotteveel it&#39;s unclear, if we don&#39;t use it how can we achive IEEE 754 similar standard, like same float point operations every processor? but as experimentunit1998X said all calculations are strictly evaluated now, so I understand we have similar feature to IEEE 754 by default now"},{"owner":{"account_id":213468,"reputation":103489,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1689182972,"post_id":76670233,"comment_id":135178635,"body_markdown":"`strictfp` **is** IEEE 754 behaviour, and that has now been made the default behaviour again, so you don&#39;t need to specify `strictfp` anymore to get the IEEE 754 behaviour, because since Java 17 you always get that.","body":"<code>strictfp</code> <b>is</b> IEEE 754 behaviour, and that has now been made the default behaviour again, so you don&#39;t need to specify <code>strictfp</code> anymore to get the IEEE 754 behaviour, because since Java 17 you always get that."},{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1689196259,"post_id":76670233,"comment_id":135180927,"body_markdown":"@felipe Prior to Java 17, on Intel systems, Java would (by default) use 80 bit **extended** precision IEEE 754 because that is what the Intel floating point unit supported; on other platforms (like ARM, and IBM Power) it would use 64 bit precision IEEE 754. `strictfp` (when it did anything at all) limited Intel systems to 64 bit precision IEEE 754. It was always IEEE 754. And it only really mattered when you needed to reconcile with a non-Intel system (and with a large number of transactions).","body":"@felipe Prior to Java 17, on Intel systems, Java would (by default) use 80 bit <b>extended</b> precision IEEE 754 because that is what the Intel floating point unit supported; on other platforms (like ARM, and IBM Power) it would use 64 bit precision IEEE 754. <code>strictfp</code> (when it did anything at all) limited Intel systems to 64 bit precision IEEE 754. It was always IEEE 754. And it only really mattered when you needed to reconcile with a non-Intel system (and with a large number of transactions)."},{"owner":{"account_id":178970,"reputation":5078,"user_id":411282,"accept_rate":67,"display_name":"Joshua Goldberg"},"score":0,"creation_date":1689266029,"post_id":76670233,"comment_id":135192626,"body_markdown":"Aside from performance, I think people used to say there was a loss of accuracy with using strictfp, in exchange for the consistency.  Does this mean that the more accurate, performant calculations are no longer available?","body":"Aside from performance, I think people used to say there was a loss of accuracy with using strictfp, in exchange for the consistency.  Does this mean that the more accurate, performant calculations are no longer available?"}],"owner":{"account_id":197015,"reputation":1212,"user_id":440803,"accept_rate":78,"display_name":"felipe"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689163168,"creation_date":1689162628,"question_id":76670233,"body_markdown":"&gt; The strictfp keyword was introduced into Java with the Java virtual machine version 1.2 and its functionality was removed in JVM version 17. As of Java 17, IEEE 754 semantics is required, thus using this keyword has no effect.\r\n\r\nBut how to achieve the same result of IEEE 754 standard? Was it simply removed from the language?","title":"what replaced strictfp in java?","body":"<blockquote>\n<p>The strictfp keyword was introduced into Java with the Java virtual machine version 1.2 and its functionality was removed in JVM version 17. As of Java 17, IEEE 754 semantics is required, thus using this keyword has no effect.</p>\n</blockquote>\n<p>But how to achieve the same result of IEEE 754 standard? Was it simply removed from the language?</p>\n"},{"tags":["java","batch-processing","websphere-liberty"],"comments":[{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1689133821,"post_id":76666994,"comment_id":135168434,"body_markdown":"Where are the API docs for the jar, is there a web URL for the version?  And does the jar require to start with a main method or is it add on , just classes?","body":"Where are the API docs for the jar, is there a web URL for the version?  And does the jar require to start with a main method or is it add on , just classes?"},{"owner":{"account_id":6895683,"reputation":233,"user_id":5297726,"accept_rate":0,"display_name":"Shankar Anand"},"score":0,"creation_date":1689137077,"post_id":76666994,"comment_id":135168785,"body_markdown":"It a jar file required to start with a main method. Want to retain as such so that i dont have to make code changes.","body":"It a jar file required to start with a main method. Want to retain as such so that i dont have to make code changes."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1689137512,"post_id":76666994,"comment_id":135168838,"body_markdown":"If your organisation is standardised on using Liberty Batch Server, surely one of your colleagues can help?","body":"If your organisation is standardised on using Liberty Batch Server, surely one of your colleagues can help?"},{"owner":{"account_id":1623729,"reputation":5190,"user_id":1499766,"accept_rate":86,"display_name":"Scott Kurz"},"score":0,"creation_date":1689605562,"post_id":76666994,"comment_id":135233518,"body_markdown":"Do you want to run multiple jobs per JVM instance (per server start) or just a single job (after which the JVM can exit)?","body":"Do you want to run multiple jobs per JVM instance (per server start) or just a single job (after which the JVM can exit)?"},{"owner":{"account_id":6895683,"reputation":233,"user_id":5297726,"accept_rate":0,"display_name":"Shankar Anand"},"score":0,"creation_date":1690190192,"post_id":76666994,"comment_id":135313591,"body_markdown":"Single job. Want to trigger the job from a shell script and the scheduler we have will invoke the shell script","body":"Single job. Want to trigger the job from a shell script and the scheduler we have will invoke the shell script"}],"answers":[{"tags":[],"owner":{"account_id":7631067,"reputation":419,"user_id":5786105,"display_name":"DFollis"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1689163129,"creation_date":1689163129,"answer_id":76670305,"question_id":76666994,"body_markdown":"Your script can use the batchManager command line utility (https://www.ibm.com/docs/en/was-liberty/core?topic=liberty-batchmanager-command-line-client-utility) to submit the job to the Liberty server indicated in the parameters you supply to the CLI.  The parameters also include the application name (leading to the .war file, so yes, .war, not .jar) and the name of the JSL file within it.  If you&#39;re on z/OS, there is also a batchManagerZos utility that does the same thing, but without requiring a userid/password since you&#39;re already authenticated to z/OS.  You could also directly use the REST interface which batchManager is driving under the covers (https://www.ibm.com/docs/en/was-liberty/core?topic=liberty-batch-rest-api).  ","title":"Deploy jar file in IBM Liberty Batch Server","body":"<p>Your script can use the batchManager command line utility (<a href=\"https://www.ibm.com/docs/en/was-liberty/core?topic=liberty-batchmanager-command-line-client-utility\" rel=\"nofollow noreferrer\">https://www.ibm.com/docs/en/was-liberty/core?topic=liberty-batchmanager-command-line-client-utility</a>) to submit the job to the Liberty server indicated in the parameters you supply to the CLI.  The parameters also include the application name (leading to the .war file, so yes, .war, not .jar) and the name of the JSL file within it.  If you're on z/OS, there is also a batchManagerZos utility that does the same thing, but without requiring a userid/password since you're already authenticated to z/OS.  You could also directly use the REST interface which batchManager is driving under the covers (<a href=\"https://www.ibm.com/docs/en/was-liberty/core?topic=liberty-batch-rest-api\" rel=\"nofollow noreferrer\">https://www.ibm.com/docs/en/was-liberty/core?topic=liberty-batch-rest-api</a>).</p>\n"}],"owner":{"account_id":6895683,"reputation":233,"user_id":5297726,"accept_rate":0,"display_name":"Shankar Anand"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689163129,"creation_date":1689132662,"question_id":76666994,"body_markdown":"What are all the artifacts (Jar, war or ear) that can be deployed in a Liberty Batch Server. I a currently running standalone jar file (triggered from a shell script). As per the standards established in my Organization, I have to move this to IBM Liberty Batch server. Do I need to convert this jar to war file to deploy or I can directly run the jar file in Liberty Batch server. If I run the jar in batch server container, how do I trigger the batch from my shell script? or i don&#39;t have to use shell script for triggering?","title":"Deploy jar file in IBM Liberty Batch Server","body":"<p>What are all the artifacts (Jar, war or ear) that can be deployed in a Liberty Batch Server. I a currently running standalone jar file (triggered from a shell script). As per the standards established in my Organization, I have to move this to IBM Liberty Batch server. Do I need to convert this jar to war file to deploy or I can directly run the jar file in Liberty Batch server. If I run the jar in batch server container, how do I trigger the batch from my shell script? or i don't have to use shell script for triggering?</p>\n"},{"tags":["java","3d","converters","gltf"],"comments":[{"owner":{"account_id":444710,"reputation":11883,"user_id":836708,"display_name":"emackey"},"score":0,"creation_date":1689173829,"post_id":76666231,"comment_id":135176677,"body_markdown":"The chunk size is an unsigned int, which is not the same as just flipping a negative value positive.  Try `long foo = dataInputStream.readInt() &amp; 0xffffffffL;` as suggested in this answer: https://stackoverflow.com/a/22938125/836708","body":"The chunk size is an unsigned int, which is not the same as just flipping a negative value positive.  Try <code>long foo = dataInputStream.readInt() &amp; 0xffffffffL;</code> as suggested in this answer: <a href=\"https://stackoverflow.com/a/22938125/836708\">stackoverflow.com/a/22938125/836708</a>"}],"owner":{"account_id":28371712,"reputation":1,"user_id":21700202,"display_name":"Rhysling"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689162390,"creation_date":1689115924,"question_id":76666231,"body_markdown":"\r\nIn order to build a file converter with gltf/glb being the starting file type, i need input the data of the glb file first. When tring to do that, I encountered a negative arry error given the fact it tried to read the JSON part of the glb file\r\n\r\n\r\n```\r\nimport org.json.JSONArray;\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\nimport javax.swing.*;\r\nimport javax.swing.filechooser.FileNameExtensionFilter;\r\nimport java.awt.*;\r\nimport java.awt.event.ActionEvent;\r\nimport java.awt.event.ActionListener;\r\nimport java.io.*;\r\nimport java.nio.ByteBuffer;\r\nimport java.nio.ByteOrder;\r\nimport java.nio.file.Files;\r\nimport java.nio.file.Paths;\r\n```\r\n```\r\npublic class glTFConverter implements ActionListener {\r\n\r\n    private static final String[] SUPPORTED_FILE_EXTENSIONS = {&quot;gltf&quot;, &quot;glb&quot;};\r\n    private static final String[] SUPPORTED_OUTPUT_FORMATS = {&quot;obj&quot;};\r\n\r\n    private JFrame frame;\r\n    private JFileChooser fileChooser;\r\n    private JCheckBox keepOriginalCheckBox;\r\n\r\n    public glTFConverter() {\r\n        frame = new JFrame(&quot;GLTF to OBJ Converter&quot;);\r\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        frame.setSize(400, 200);\r\n        frame.setLayout(new FlowLayout());\r\n\r\n        fileChooser = new JFileChooser();\r\n        FileNameExtensionFilter filter = new FileNameExtensionFilter(&quot;GLTF Files&quot;, SUPPORTED_FILE_EXTENSIONS);\r\n        fileChooser.setFileFilter(filter);\r\n        fileChooser.setFileSelectionMode(JFileChooser.FILES_AND_DIRECTORIES);\r\n\r\n        JButton selectButton = new JButton(&quot;Select File or Folder&quot;);\r\n        selectButton.addActionListener(this);\r\n\r\n        keepOriginalCheckBox = new JCheckBox(&quot;Keep Original Files&quot;, true);\r\n\r\n        frame.add(selectButton);\r\n        frame.add(keepOriginalCheckBox);\r\n        frame.setVisible(true);\r\n    }\r\n\r\n    public void actionPerformed(ActionEvent e) {\r\n        if (e.getActionCommand().equals(&quot;Select File or Folder&quot;)) {\r\n            int result = fileChooser.showOpenDialog(frame);\r\n            if (result == JFileChooser.APPROVE_OPTION) {\r\n                File selectedFile = fileChooser.getSelectedFile();\r\n                if (selectedFile.isDirectory()) {\r\n                    convertFolder(selectedFile.getAbsolutePath());\r\n                } else {\r\n                    convertFile(selectedFile.getAbsolutePath());\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    public void convertFolder(String folderPath) {\r\n        File folder = new File(folderPath);\r\n        if (!folder.exists() || !folder.isDirectory()) {\r\n            System.out.println(&quot;Invalid folder path: &quot; + folderPath);\r\n            return;\r\n        }\r\n\r\n        File[] files = folder.listFiles();\r\n        if (files != null) {\r\n            for (File file : files) {\r\n                if (file.isFile()) {\r\n                    convertFile(file.getAbsolutePath());\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    public void convertFile(String filePath) {\r\n        String fileExtension = getFileExtension(filePath);\r\n        if (fileExtension != null &amp;&amp; isSupportedFileExtension(fileExtension)) {\r\n            String outputFormat = SUPPORTED_OUTPUT_FORMATS[0];\r\n            String outputFilePath = convertGLTFToOutputFormat(filePath, outputFormat);\r\n            if (outputFilePath != null) {\r\n                System.out.println(&quot;Converted file: &quot; + outputFilePath);\r\n\r\n                // Delete the original file if required\r\n                if (!keepOriginalCheckBox.isSelected()) {\r\n                    File originalFile = new File(filePath);\r\n                    originalFile.delete();\r\n                }\r\n            }\r\n        } else {\r\n            System.out.println(&quot;Unsupported file extension: &quot; + fileExtension);\r\n        }\r\n    }\r\n\r\n    private String convertGLTFToOutputFormat(String filePath, String outputFormat) {\r\n        String fileExtension = getFileExtension(filePath);\r\n        if (fileExtension.equalsIgnoreCase(&quot;gltf&quot;)) {\r\n            if (outputFormat.equalsIgnoreCase(&quot;obj&quot;)) {\r\n                return convertGLTFToOBJ(filePath);\r\n            } else {\r\n                System.out.println(&quot;Unsupported output format: &quot; + outputFormat);\r\n            }\r\n        } else if (fileExtension.equalsIgnoreCase(&quot;glb&quot;)) {\r\n            if (outputFormat.equalsIgnoreCase(&quot;obj&quot;)) {\r\n                return convertGLBToOBJ(filePath);\r\n            } else {\r\n                System.out.println(&quot;Unsupported output format: &quot; + outputFormat);\r\n            }\r\n        } else {\r\n            System.out.println(&quot;Unsupported file extension: &quot; + fileExtension);\r\n        }\r\n        return null;\r\n    }\r\n\r\n\r\n\r\n    private String convertGLBToOBJ(String glbFilePath) {\r\n        try (DataInputStream dataInputStream = new DataInputStream(new FileInputStream(glbFilePath))) {\r\n            byte[] magic = new byte[4];\r\n            dataInputStream.readFully(magic);\r\n\r\n            if (!new String(magic).equals(&quot;glTF&quot;)) {\r\n                System.out.println(&quot;Invalid GLB file format: &quot; + glbFilePath);\r\n                return null;\r\n            }\r\n\r\n            dataInputStream.skipBytes(8);\r\n            int jsonChunkLength = dataInputStream.readInt();\r\n            System.out.println(&quot;JSON Chunk Length: &quot; + jsonChunkLength);\r\n            int jsonChunkType = dataInputStream.readInt();\r\n            System.out.println(&quot;JSON Chunk Type: &quot; + jsonChunkType);\r\n\r\n            byte[] jsonChunkBytes = new byte[jsonChunkLength];\r\n            dataInputStream.readFully(jsonChunkBytes);\r\n            String jsonString = new String(jsonChunkBytes);\r\n            System.out.println(&quot;JSON String: &quot; + jsonString);\r\n\r\n            String tempGLTFFilePath = convertGLBToGLTF(glbFilePath);\r\n            if (tempGLTFFilePath != null) {\r\n                JSONObject gltfJson = readGLTFFile(tempGLTFFilePath);\r\n                if (gltfJson != null) {\r\n                    JSONArray gltfMeshes;\r\n                    if (gltfJson.has(&quot;meshes&quot;)) {\r\n                        Object meshes = gltfJson.get(&quot;meshes&quot;);\r\n                        if (meshes instanceof JSONArray) {\r\n                            gltfMeshes = (JSONArray) meshes;\r\n                        } else {\r\n                            gltfMeshes = new JSONArray().put(meshes);\r\n                        }\r\n                    } else {\r\n                        gltfMeshes = new JSONArray();\r\n                    }\r\n\r\n                    JSONArray gltfNodes;\r\n                    if (gltfJson.has(&quot;nodes&quot;)) {\r\n                        Object nodes = gltfJson.get(&quot;nodes&quot;);\r\n                        if (nodes instanceof JSONArray) {\r\n                            gltfNodes = (JSONArray) nodes;\r\n                        } else {\r\n                            gltfNodes = new JSONArray().put(nodes);\r\n                        }\r\n                    } else {\r\n                        gltfNodes = new JSONArray();\r\n                    }\r\n\r\n                    JSONObject gltfAccessors;\r\n                    if (gltfJson.has(&quot;accessors&quot;) &amp;&amp; gltfJson.get(&quot;accessors&quot;) instanceof JSONObject) {\r\n                        gltfAccessors = gltfJson.getJSONObject(&quot;accessors&quot;);\r\n                    } else {\r\n                        gltfAccessors = new JSONObject();\r\n                    }\r\n\r\n                    String objFilePath = glbFilePath.replace(&quot;.glb&quot;, &quot;.obj&quot;);\r\n                    try (FileWriter fileWriter = new FileWriter(objFilePath);\r\n                         BufferedWriter bufferedWriter = new BufferedWriter(fileWriter)) {\r\n                        bufferedWriter.write(&quot;# OBJ file&quot;);\r\n                        bufferedWriter.newLine();\r\n\r\n                        JSONArray positions = gltfAccessors.getJSONArray(&quot;POSITION&quot;);\r\n\r\n                        for (int i = 0; i &lt; positions.length(); i += 3) {\r\n                            double x = positions.getJSONArray(i).getDouble(0);\r\n                            double y = positions.getJSONArray(i + 1).getDouble(0);\r\n                            double z = positions.getJSONArray(i + 2).getDouble(0);\r\n                            bufferedWriter.write(&quot;v &quot; + x + &quot; &quot; + y + &quot; &quot; + z);\r\n                            bufferedWriter.newLine();\r\n                        }\r\n\r\n                        for (int i = 0; i &lt; gltfMeshes.length(); i++) {\r\n                            JSONObject mesh = gltfMeshes.getJSONObject(i);\r\n                            JSONArray primitives = mesh.getJSONArray(&quot;primitives&quot;);\r\n                            for (int j = 0; j &lt; primitives.length(); j++) {\r\n                                JSONObject primitive = primitives.getJSONObject(j);\r\n                                JSONObject indicesObject = primitive.getJSONObject(&quot;indices&quot;);\r\n                                JSONArray indicesArray = gltfAccessors.getJSONArray(indicesObject.getString(&quot;accessor&quot;));\r\n                                for (int k = 0; k &lt; indicesArray.length(); k += 3) {\r\n                                    int index1 = indicesArray.getJSONArray(k).getInt(0) + 1;\r\n                                    int index2 = indicesArray.getJSONArray(k + 1).getInt(0) + 1;\r\n                                    int index3 = indicesArray.getJSONArray(k + 2).getInt(0) + 1;\r\n                                    bufferedWriter.write(&quot;f &quot; + index1 + &quot; &quot; + index2 + &quot; &quot; + index3);\r\n                                    bufferedWriter.newLine();\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    return objFilePath;\r\n                }\r\n            }\r\n        } catch (EOFException e) {\r\n            System.out.println(&quot;Unexpected end of file encountered: &quot; + glbFilePath);\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n        return null;\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n    private JSONObject readGLTFFile(String filePath) throws IOException {\r\n        byte[] bytes = Files.readAllBytes(Paths.get(filePath));\r\n        String jsonString = new String(bytes);\r\n        try {\r\n            return new JSONObject(jsonString);\r\n        } catch (JSONException e) {\r\n            e.printStackTrace();\r\n        }\r\n        return null;\r\n    }\r\n\r\n\r\n    private String getFileExtension(String filePath) {\r\n        int dotIndex = filePath.lastIndexOf(&quot;.&quot;);\r\n        if (dotIndex &gt; 0 &amp;&amp; dotIndex &lt; filePath.length() - 1) {\r\n            return filePath.substring(dotIndex + 1).toLowerCase();\r\n        }\r\n        return null;\r\n    }\r\n\r\n    private boolean isSupportedFileExtension(String extension) {\r\n        for (String supportedExtension : SUPPORTED_FILE_EXTENSIONS) {\r\n            if (extension.equalsIgnoreCase(supportedExtension)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        new glTFConverter();\r\n    }\r\n}\r\n```\r\n\r\n```\r\nException in thread &quot;AWT-EventQueue-0&quot; java.lang.NegativeArraySizeException\r\n\tat glTFConverter.convertGLBToOBJ(glTFConverter.java:184)\r\n\tat glTFConverter.convertGLTFToOutputFormat(glTFConverter.java:106)\r\n```\r\n\r\n```\r\nJSON Chunk Length: -133890048\r\nJSON Chunk Type: 1246973774\r\n```\r\n\r\n\r\ntried to work around that error with turning the negtive value positive and also in using a different start point when reading the JSON part of the file","title":"GLB File reader wont read GLB file","body":"<p>In order to build a file converter with gltf/glb being the starting file type, i need input the data of the glb file first. When tring to do that, I encountered a negative arry error given the fact it tried to read the JSON part of the glb file</p>\n<pre><code>import org.json.JSONArray;\nimport org.json.JSONException;\nimport org.json.JSONObject;\n\nimport javax.swing.*;\nimport javax.swing.filechooser.FileNameExtensionFilter;\nimport java.awt.*;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.io.*;\nimport java.nio.ByteBuffer;\nimport java.nio.ByteOrder;\nimport java.nio.file.Files;\nimport java.nio.file.Paths;\n</code></pre>\n<pre><code>public class glTFConverter implements ActionListener {\n\n    private static final String[] SUPPORTED_FILE_EXTENSIONS = {&quot;gltf&quot;, &quot;glb&quot;};\n    private static final String[] SUPPORTED_OUTPUT_FORMATS = {&quot;obj&quot;};\n\n    private JFrame frame;\n    private JFileChooser fileChooser;\n    private JCheckBox keepOriginalCheckBox;\n\n    public glTFConverter() {\n        frame = new JFrame(&quot;GLTF to OBJ Converter&quot;);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.setSize(400, 200);\n        frame.setLayout(new FlowLayout());\n\n        fileChooser = new JFileChooser();\n        FileNameExtensionFilter filter = new FileNameExtensionFilter(&quot;GLTF Files&quot;, SUPPORTED_FILE_EXTENSIONS);\n        fileChooser.setFileFilter(filter);\n        fileChooser.setFileSelectionMode(JFileChooser.FILES_AND_DIRECTORIES);\n\n        JButton selectButton = new JButton(&quot;Select File or Folder&quot;);\n        selectButton.addActionListener(this);\n\n        keepOriginalCheckBox = new JCheckBox(&quot;Keep Original Files&quot;, true);\n\n        frame.add(selectButton);\n        frame.add(keepOriginalCheckBox);\n        frame.setVisible(true);\n    }\n\n    public void actionPerformed(ActionEvent e) {\n        if (e.getActionCommand().equals(&quot;Select File or Folder&quot;)) {\n            int result = fileChooser.showOpenDialog(frame);\n            if (result == JFileChooser.APPROVE_OPTION) {\n                File selectedFile = fileChooser.getSelectedFile();\n                if (selectedFile.isDirectory()) {\n                    convertFolder(selectedFile.getAbsolutePath());\n                } else {\n                    convertFile(selectedFile.getAbsolutePath());\n                }\n            }\n        }\n    }\n\n    public void convertFolder(String folderPath) {\n        File folder = new File(folderPath);\n        if (!folder.exists() || !folder.isDirectory()) {\n            System.out.println(&quot;Invalid folder path: &quot; + folderPath);\n            return;\n        }\n\n        File[] files = folder.listFiles();\n        if (files != null) {\n            for (File file : files) {\n                if (file.isFile()) {\n                    convertFile(file.getAbsolutePath());\n                }\n            }\n        }\n    }\n\n    public void convertFile(String filePath) {\n        String fileExtension = getFileExtension(filePath);\n        if (fileExtension != null &amp;&amp; isSupportedFileExtension(fileExtension)) {\n            String outputFormat = SUPPORTED_OUTPUT_FORMATS[0];\n            String outputFilePath = convertGLTFToOutputFormat(filePath, outputFormat);\n            if (outputFilePath != null) {\n                System.out.println(&quot;Converted file: &quot; + outputFilePath);\n\n                // Delete the original file if required\n                if (!keepOriginalCheckBox.isSelected()) {\n                    File originalFile = new File(filePath);\n                    originalFile.delete();\n                }\n            }\n        } else {\n            System.out.println(&quot;Unsupported file extension: &quot; + fileExtension);\n        }\n    }\n\n    private String convertGLTFToOutputFormat(String filePath, String outputFormat) {\n        String fileExtension = getFileExtension(filePath);\n        if (fileExtension.equalsIgnoreCase(&quot;gltf&quot;)) {\n            if (outputFormat.equalsIgnoreCase(&quot;obj&quot;)) {\n                return convertGLTFToOBJ(filePath);\n            } else {\n                System.out.println(&quot;Unsupported output format: &quot; + outputFormat);\n            }\n        } else if (fileExtension.equalsIgnoreCase(&quot;glb&quot;)) {\n            if (outputFormat.equalsIgnoreCase(&quot;obj&quot;)) {\n                return convertGLBToOBJ(filePath);\n            } else {\n                System.out.println(&quot;Unsupported output format: &quot; + outputFormat);\n            }\n        } else {\n            System.out.println(&quot;Unsupported file extension: &quot; + fileExtension);\n        }\n        return null;\n    }\n\n\n\n    private String convertGLBToOBJ(String glbFilePath) {\n        try (DataInputStream dataInputStream = new DataInputStream(new FileInputStream(glbFilePath))) {\n            byte[] magic = new byte[4];\n            dataInputStream.readFully(magic);\n\n            if (!new String(magic).equals(&quot;glTF&quot;)) {\n                System.out.println(&quot;Invalid GLB file format: &quot; + glbFilePath);\n                return null;\n            }\n\n            dataInputStream.skipBytes(8);\n            int jsonChunkLength = dataInputStream.readInt();\n            System.out.println(&quot;JSON Chunk Length: &quot; + jsonChunkLength);\n            int jsonChunkType = dataInputStream.readInt();\n            System.out.println(&quot;JSON Chunk Type: &quot; + jsonChunkType);\n\n            byte[] jsonChunkBytes = new byte[jsonChunkLength];\n            dataInputStream.readFully(jsonChunkBytes);\n            String jsonString = new String(jsonChunkBytes);\n            System.out.println(&quot;JSON String: &quot; + jsonString);\n\n            String tempGLTFFilePath = convertGLBToGLTF(glbFilePath);\n            if (tempGLTFFilePath != null) {\n                JSONObject gltfJson = readGLTFFile(tempGLTFFilePath);\n                if (gltfJson != null) {\n                    JSONArray gltfMeshes;\n                    if (gltfJson.has(&quot;meshes&quot;)) {\n                        Object meshes = gltfJson.get(&quot;meshes&quot;);\n                        if (meshes instanceof JSONArray) {\n                            gltfMeshes = (JSONArray) meshes;\n                        } else {\n                            gltfMeshes = new JSONArray().put(meshes);\n                        }\n                    } else {\n                        gltfMeshes = new JSONArray();\n                    }\n\n                    JSONArray gltfNodes;\n                    if (gltfJson.has(&quot;nodes&quot;)) {\n                        Object nodes = gltfJson.get(&quot;nodes&quot;);\n                        if (nodes instanceof JSONArray) {\n                            gltfNodes = (JSONArray) nodes;\n                        } else {\n                            gltfNodes = new JSONArray().put(nodes);\n                        }\n                    } else {\n                        gltfNodes = new JSONArray();\n                    }\n\n                    JSONObject gltfAccessors;\n                    if (gltfJson.has(&quot;accessors&quot;) &amp;&amp; gltfJson.get(&quot;accessors&quot;) instanceof JSONObject) {\n                        gltfAccessors = gltfJson.getJSONObject(&quot;accessors&quot;);\n                    } else {\n                        gltfAccessors = new JSONObject();\n                    }\n\n                    String objFilePath = glbFilePath.replace(&quot;.glb&quot;, &quot;.obj&quot;);\n                    try (FileWriter fileWriter = new FileWriter(objFilePath);\n                         BufferedWriter bufferedWriter = new BufferedWriter(fileWriter)) {\n                        bufferedWriter.write(&quot;# OBJ file&quot;);\n                        bufferedWriter.newLine();\n\n                        JSONArray positions = gltfAccessors.getJSONArray(&quot;POSITION&quot;);\n\n                        for (int i = 0; i &lt; positions.length(); i += 3) {\n                            double x = positions.getJSONArray(i).getDouble(0);\n                            double y = positions.getJSONArray(i + 1).getDouble(0);\n                            double z = positions.getJSONArray(i + 2).getDouble(0);\n                            bufferedWriter.write(&quot;v &quot; + x + &quot; &quot; + y + &quot; &quot; + z);\n                            bufferedWriter.newLine();\n                        }\n\n                        for (int i = 0; i &lt; gltfMeshes.length(); i++) {\n                            JSONObject mesh = gltfMeshes.getJSONObject(i);\n                            JSONArray primitives = mesh.getJSONArray(&quot;primitives&quot;);\n                            for (int j = 0; j &lt; primitives.length(); j++) {\n                                JSONObject primitive = primitives.getJSONObject(j);\n                                JSONObject indicesObject = primitive.getJSONObject(&quot;indices&quot;);\n                                JSONArray indicesArray = gltfAccessors.getJSONArray(indicesObject.getString(&quot;accessor&quot;));\n                                for (int k = 0; k &lt; indicesArray.length(); k += 3) {\n                                    int index1 = indicesArray.getJSONArray(k).getInt(0) + 1;\n                                    int index2 = indicesArray.getJSONArray(k + 1).getInt(0) + 1;\n                                    int index3 = indicesArray.getJSONArray(k + 2).getInt(0) + 1;\n                                    bufferedWriter.write(&quot;f &quot; + index1 + &quot; &quot; + index2 + &quot; &quot; + index3);\n                                    bufferedWriter.newLine();\n                                }\n                            }\n                        }\n                    }\n                    return objFilePath;\n                }\n            }\n        } catch (EOFException e) {\n            System.out.println(&quot;Unexpected end of file encountered: &quot; + glbFilePath);\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n        return null;\n    }\n\n\n\n\n\n\n    private JSONObject readGLTFFile(String filePath) throws IOException {\n        byte[] bytes = Files.readAllBytes(Paths.get(filePath));\n        String jsonString = new String(bytes);\n        try {\n            return new JSONObject(jsonString);\n        } catch (JSONException e) {\n            e.printStackTrace();\n        }\n        return null;\n    }\n\n\n    private String getFileExtension(String filePath) {\n        int dotIndex = filePath.lastIndexOf(&quot;.&quot;);\n        if (dotIndex &gt; 0 &amp;&amp; dotIndex &lt; filePath.length() - 1) {\n            return filePath.substring(dotIndex + 1).toLowerCase();\n        }\n        return null;\n    }\n\n    private boolean isSupportedFileExtension(String extension) {\n        for (String supportedExtension : SUPPORTED_FILE_EXTENSIONS) {\n            if (extension.equalsIgnoreCase(supportedExtension)) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    public static void main(String[] args) {\n        new glTFConverter();\n    }\n}\n</code></pre>\n<pre><code>Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.NegativeArraySizeException\n    at glTFConverter.convertGLBToOBJ(glTFConverter.java:184)\n    at glTFConverter.convertGLTFToOutputFormat(glTFConverter.java:106)\n</code></pre>\n<pre><code>JSON Chunk Length: -133890048\nJSON Chunk Type: 1246973774\n</code></pre>\n<p>tried to work around that error with turning the negtive value positive and also in using a different start point when reading the JSON part of the file</p>\n"},{"tags":["java","docker","tomcat","kubernetes"],"comments":[{"owner":{"account_id":3220587,"reputation":10783,"user_id":2718151,"accept_rate":50,"display_name":"Nicola Ben"},"score":0,"creation_date":1535208059,"post_id":52011947,"comment_id":90986833,"body_markdown":"Please post some of your YAML files.","body":"Please post some of your YAML files."},{"owner":{"account_id":10732605,"reputation":149,"user_id":7898224,"display_name":"Revanth Reddy"},"score":0,"creation_date":1535230180,"post_id":52011947,"comment_id":90992648,"body_markdown":"sure @NicolaBen . please find the deployment section of my manifests below.","body":"sure @NicolaBen . please find the deployment section of my manifests below."},{"owner":{"account_id":3220587,"reputation":10783,"user_id":2718151,"accept_rate":50,"display_name":"Nicola Ben"},"score":0,"creation_date":1535230263,"post_id":52011947,"comment_id":90992671,"body_markdown":"Re-edit your question adding your YAML manifests, please.","body":"Re-edit your question adding your YAML manifests, please."},{"owner":{"account_id":3220587,"reputation":10783,"user_id":2718151,"accept_rate":50,"display_name":"Nicola Ben"},"score":0,"creation_date":1535231107,"post_id":52011947,"comment_id":90992837,"body_markdown":"You declared 3 volumes, but you don&#39;t use them. Is your yaml complete? The tomcat image is public or in your repos?","body":"You declared 3 volumes, but you don&#39;t use them. Is your yaml complete? The tomcat image is public or in your repos?"},{"owner":{"account_id":10732605,"reputation":149,"user_id":7898224,"display_name":"Revanth Reddy"},"score":0,"creation_date":1535260617,"post_id":52011947,"comment_id":90997108,"body_markdown":"there is another container(splunk forwarder) that is using the remaining volumes. the tomcat image i am using is from my organization&#39;s private repo.","body":"there is another container(splunk forwarder) that is using the remaining volumes. the tomcat image i am using is from my organization&#39;s private repo."},{"owner":{"account_id":467927,"reputation":4327,"user_id":873601,"accept_rate":89,"display_name":"Vishal Biyani"},"score":0,"creation_date":1535363375,"post_id":52011947,"comment_id":91023463,"body_markdown":"What specifically happens differently in your case when Tomcat shuts down abruptly?","body":"What specifically happens differently in your case when Tomcat shuts down abruptly?"}],"answers":[{"tags":[],"owner":{"account_id":10732605,"reputation":149,"user_id":7898224,"display_name":"Revanth Reddy"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1671636080,"creation_date":1535230330,"answer_id":52021132,"question_id":52011947,"body_markdown":"found the issue: \r\n\r\nI was running this prestop lifecycle hook: \r\n\r\nlifecycle:\r\n          preStop:\r\n            exec:\r\n             command: [&quot;/usr/local/tomcat/bin/catalina.sh stop&quot;]\r\n\r\n\r\nIt should be something like: \r\n\r\nlifecycle:\r\n          preStop:\r\n            exec:\r\n             command: [&quot;/usr/local/tomcat/bin/catalina.sh stop &amp;&amp; sleep 30&quot;]\r\n\r\nIn the first case, K8s was attempting to exit out of the lifecycle hook as soon as it invokes the shutdown.sh without waiting for tomcat to drain all threads. \r\n\r\n\r\nit just takes about 5-10 secs depending upon your app. giving a sleep of 30 secs will keep the prestop hook active which should give enough time for tomcat to finish the shutdown process&quot; . ","title":"Graceful shutdown of tomcat on a kubernetes cluster","body":"<p>found the issue:</p>\n<p>I was running this prestop lifecycle hook:</p>\n<p>lifecycle:\npreStop:\nexec:\ncommand: [&quot;/usr/local/tomcat/bin/catalina.sh stop&quot;]</p>\n<p>It should be something like:</p>\n<p>lifecycle:\npreStop:\nexec:\ncommand: [&quot;/usr/local/tomcat/bin/catalina.sh stop &amp;&amp; sleep 30&quot;]</p>\n<p>In the first case, K8s was attempting to exit out of the lifecycle hook as soon as it invokes the shutdown.sh without waiting for tomcat to drain all threads.</p>\n<p>it just takes about 5-10 secs depending upon your app. giving a sleep of 30 secs will keep the prestop hook active which should give enough time for tomcat to finish the shutdown process&quot; .</p>\n"},{"tags":[],"owner":{"account_id":4474415,"reputation":1971,"user_id":3639856,"display_name":"Remigius Stalder"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1671693783,"creation_date":1671693783,"answer_id":74885255,"question_id":52011947,"body_markdown":"As of 2022, we tried adding the given command `/usr/local/tomcat/bin/catalina.sh stop &amp;&amp; sleep 30` as our preStop hook. However, we endountered a `FailedPreStopHook` event displaying `exited with 137` (137 seems to be a memory error). After a few experiments, we have now the following setup to shutdown `tomcat` gracefully (see explanations below):\r\n\r\n1. `terminationGracePeriodSeconds`set to 30s (the default - just *pro memoria*)\r\n1. preStop hook is `/usr/local/tomcat/bin/catalina.sh stop 20`\r\n1. in the `tomcat` image, we added `unloadDelay=&quot;10000&quot;` to the `Context`\r\n\r\nAs the grace period starts when the preStop hook is invoked, we think 30s total should be enough for a graceful shutdown. The parameter `20` added to the `catalina stop` command gives `tomcat` 20s to shutdown gracefully and *wait for it* before exiting - under the control of `catalina.sh` / `tomcat`, which avoids the `FailedPreStopHook` event. Finally, the added `unloadDelay=&quot;10000&quot;` should tell tomcat to wait at most 30s for the servlets to finish ongoing connections. Note that a) at the same time the preStop hook is invoked (i.e. the beginning of the termination process), the Pod status is set to `Terminating` and no more new connections are routed to it by ingresses / load balancers, and b) the preStop hook delays sending the `SIGTERM` to the process in then pod.\r\n\r\nHere are some more resources we encountered:\r\n\r\n* https://www.containiq.com/post/exit-code-137#:~:text=Exit%20code%20137%20means%20a,host%20system%20to%20become%20unstable.\r\n* https://kubernetes.io/docs/concepts/containers/container-lifecycle-hooks/#container-hooks\r\n* https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle/#pod-termination\r\n* http://muralitechblog.com/kubernetes-graceful-shutdown-of-pods/\r\n* https://stackoverflow.com/questions/11154533/what-happens-to-requests-when-tomcat-stops/11154770#11154770\r\n* https://tomcat.apache.org/tomcat-10.1-doc/config/context.html#:~:text=will%20be%20used.-,unloadDelay,-Number%20of%20ms\r\n* https://tomcat.apache.org/tomcat-10.1-doc/api/org/apache/catalina/startup/Catalina.html\r\n\r\nfor a slightly more detailed explanation of the parameters for `catalina.sh`, you can also just invoke `catalina.sh --help`, giving:\r\n\r\n    /usr/local/apache-tomcat-10.0.22 # catalina.sh --help\r\n    Using CATALINA_BASE:   /usr/local/tomcat\r\n    Using CATALINA_HOME:   /usr/local/tomcat\r\n    Using CATALINA_TMPDIR: /usr/local/tomcat/temp\r\n    Using JRE_HOME:        /opt/java/openjdk\r\n    Using CLASSPATH:       /usr/local/tomcat/bin/bootstrap.jar:/usr/local/tomcat/bin/tomcat-juli.jar\r\n    Using CATALINA_OPTS:   \r\n    Usage: catalina.sh ( commands ... )\r\n    commands:\r\n      debug             Start Catalina in a debugger\r\n      debug -security   Debug Catalina with a security manager\r\n      jpda start        Start Catalina under JPDA debugger\r\n      run               Start Catalina in the current window\r\n      run -security     Start in the current window with security manager\r\n      start             Start Catalina in a separate window\r\n      start -security   Start in a separate window with security manager\r\n      stop              Stop Catalina, waiting up to 5 seconds for the process to end\r\n      stop n            Stop Catalina, waiting up to n seconds for the process to end\r\n      stop -force       Stop Catalina, wait up to 5 seconds and then use kill -KILL if still running\r\n      stop n -force     Stop Catalina, wait up to n seconds and then use kill -KILL if still running\r\n      configtest        Run a basic syntax check on server.xml - check exit code for result\r\n      version           What version of tomcat are you running?\r\n    Note: Waiting for the process to end and use of the -force option require that $CATALINA_PID is defined","title":"Graceful shutdown of tomcat on a kubernetes cluster","body":"<p>As of 2022, we tried adding the given command <code>/usr/local/tomcat/bin/catalina.sh stop &amp;&amp; sleep 30</code> as our preStop hook. However, we endountered a <code>FailedPreStopHook</code> event displaying <code>exited with 137</code> (137 seems to be a memory error). After a few experiments, we have now the following setup to shutdown <code>tomcat</code> gracefully (see explanations below):</p>\n<ol>\n<li><code>terminationGracePeriodSeconds</code>set to 30s (the default - just <em>pro memoria</em>)</li>\n<li>preStop hook is <code>/usr/local/tomcat/bin/catalina.sh stop 20</code></li>\n<li>in the <code>tomcat</code> image, we added <code>unloadDelay=&quot;10000&quot;</code> to the <code>Context</code></li>\n</ol>\n<p>As the grace period starts when the preStop hook is invoked, we think 30s total should be enough for a graceful shutdown. The parameter <code>20</code> added to the <code>catalina stop</code> command gives <code>tomcat</code> 20s to shutdown gracefully and <em>wait for it</em> before exiting - under the control of <code>catalina.sh</code> / <code>tomcat</code>, which avoids the <code>FailedPreStopHook</code> event. Finally, the added <code>unloadDelay=&quot;10000&quot;</code> should tell tomcat to wait at most 30s for the servlets to finish ongoing connections. Note that a) at the same time the preStop hook is invoked (i.e. the beginning of the termination process), the Pod status is set to <code>Terminating</code> and no more new connections are routed to it by ingresses / load balancers, and b) the preStop hook delays sending the <code>SIGTERM</code> to the process in then pod.</p>\n<p>Here are some more resources we encountered:</p>\n<ul>\n<li><a href=\"https://www.containiq.com/post/exit-code-137#:%7E:text=Exit%20code%20137%20means%20a,host%20system%20to%20become%20unstable\" rel=\"nofollow noreferrer\">https://www.containiq.com/post/exit-code-137#:~:text=Exit%20code%20137%20means%20a,host%20system%20to%20become%20unstable</a>.</li>\n<li><a href=\"https://kubernetes.io/docs/concepts/containers/container-lifecycle-hooks/#container-hooks\" rel=\"nofollow noreferrer\">https://kubernetes.io/docs/concepts/containers/container-lifecycle-hooks/#container-hooks</a></li>\n<li><a href=\"https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle/#pod-termination\" rel=\"nofollow noreferrer\">https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle/#pod-termination</a></li>\n<li><a href=\"http://muralitechblog.com/kubernetes-graceful-shutdown-of-pods/\" rel=\"nofollow noreferrer\">http://muralitechblog.com/kubernetes-graceful-shutdown-of-pods/</a></li>\n<li><a href=\"https://stackoverflow.com/questions/11154533/what-happens-to-requests-when-tomcat-stops/11154770#11154770\">What happens to requests when tomcat stops</a></li>\n<li><a href=\"https://tomcat.apache.org/tomcat-10.1-doc/config/context.html#:%7E:text=will%20be%20used.-,unloadDelay,-Number%20of%20ms\" rel=\"nofollow noreferrer\">https://tomcat.apache.org/tomcat-10.1-doc/config/context.html#:~:text=will%20be%20used.-,unloadDelay,-Number%20of%20ms</a></li>\n<li><a href=\"https://tomcat.apache.org/tomcat-10.1-doc/api/org/apache/catalina/startup/Catalina.html\" rel=\"nofollow noreferrer\">https://tomcat.apache.org/tomcat-10.1-doc/api/org/apache/catalina/startup/Catalina.html</a></li>\n</ul>\n<p>for a slightly more detailed explanation of the parameters for <code>catalina.sh</code>, you can also just invoke <code>catalina.sh --help</code>, giving:</p>\n<pre><code>/usr/local/apache-tomcat-10.0.22 # catalina.sh --help\nUsing CATALINA_BASE:   /usr/local/tomcat\nUsing CATALINA_HOME:   /usr/local/tomcat\nUsing CATALINA_TMPDIR: /usr/local/tomcat/temp\nUsing JRE_HOME:        /opt/java/openjdk\nUsing CLASSPATH:       /usr/local/tomcat/bin/bootstrap.jar:/usr/local/tomcat/bin/tomcat-juli.jar\nUsing CATALINA_OPTS:   \nUsage: catalina.sh ( commands ... )\ncommands:\n  debug             Start Catalina in a debugger\n  debug -security   Debug Catalina with a security manager\n  jpda start        Start Catalina under JPDA debugger\n  run               Start Catalina in the current window\n  run -security     Start in the current window with security manager\n  start             Start Catalina in a separate window\n  start -security   Start in a separate window with security manager\n  stop              Stop Catalina, waiting up to 5 seconds for the process to end\n  stop n            Stop Catalina, waiting up to n seconds for the process to end\n  stop -force       Stop Catalina, wait up to 5 seconds and then use kill -KILL if still running\n  stop n -force     Stop Catalina, wait up to n seconds and then use kill -KILL if still running\n  configtest        Run a basic syntax check on server.xml - check exit code for result\n  version           What version of tomcat are you running?\nNote: Waiting for the process to end and use of the -force option require that $CATALINA_PID is defined\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8349329,"reputation":86,"user_id":6272055,"display_name":"Saul Ramos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689162027,"creation_date":1689162027,"answer_id":76670153,"question_id":52011947,"body_markdown":"I have tried the above but I did not get any result.\r\n\r\nAfter lots of researching I have stepped in my way with this tool which it has ended up working really well.\r\n\r\n[https://github.com/Yelp/dumb-init#dumb-init][1]\r\n\r\nI hope that helps!!\r\n\r\n\r\n  [1]: https://github.com/Yelp/dumb-init#dumb-init","title":"Graceful shutdown of tomcat on a kubernetes cluster","body":"<p>I have tried the above but I did not get any result.</p>\n<p>After lots of researching I have stepped in my way with this tool which it has ended up working really well.</p>\n<p><a href=\"https://github.com/Yelp/dumb-init#dumb-init\" rel=\"nofollow noreferrer\">https://github.com/Yelp/dumb-init#dumb-init</a></p>\n<p>I hope that helps!!</p>\n"}],"owner":{"account_id":10732605,"reputation":149,"user_id":7898224,"display_name":"Revanth Reddy"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4818,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"accepted_answer_id":52021132,"answer_count":3,"score":4,"last_activity_date":1689162027,"creation_date":1535146067,"question_id":52011947,"body_markdown":"I am running a java application on tomcat in a k8s cluster, I am using a prestop lifecycle hook to run `/usr/local/tomcat/bin/shutdown.sh` before the container gets terminated. Also defining a termination grace period of 60 secs. \r\n\r\nexpected behaviour: tomcat shutsdown gracefully when I kill a pod or delete a deployment. \r\n\r\nactual behaviour: tomcat shutsdown abruptly.\r\n\r\nAny thoughts? Thanks in advance. \r\n\r\n    \r\n    apiVersion: apps/v1\r\n    kind: Deployment\r\n    metadata:\r\n      name: sample\r\n      annotations:\r\n    spec:\r\n      replicas: 2\r\n      selector:\r\n        matchLabels:\r\n          app: sample\r\n          name: sample\r\n      template:\r\n        metadata:\r\n          labels:\r\n            app: sample\r\n            name: sample\r\n        spec:\r\n          hostname: sample-web\r\n          terminationGracePeriodSeconds: 60\r\n          volumes:\r\n           - name: splunk-inputs\r\n             configMap:\r\n               name: splunk-conf\r\n               items:\r\n               - key: inputs.conf\r\n                 path: ./inputs.conf\r\n           - name: splunk-outputs\r\n             configMap:\r\n               name: splunk-conf\r\n               items:\r\n               - key: outputs.conf\r\n                 path: ./outputs.conf\r\n           - name: docker-socket\r\n             hostPath:\r\n              path: /var/run/docker.sock\r\n           - name: tomcat-log-common\r\n             emptyDir: {} \r\n          containers:\r\n          - name: sample\r\n            image: sampleregistery.azurecr.io/root\r\n            imagePullPolicy: IfNotPresent\r\n            lifecycle:\r\n              preStop:\r\n                exec:\r\n                  command: [&quot;/usr/local/tomcat/bin/shutdown.sh&quot;]","title":"Graceful shutdown of tomcat on a kubernetes cluster","body":"<p>I am running a java application on tomcat in a k8s cluster, I am using a prestop lifecycle hook to run <code>/usr/local/tomcat/bin/shutdown.sh</code> before the container gets terminated. Also defining a termination grace period of 60 secs. </p>\n\n<p>expected behaviour: tomcat shutsdown gracefully when I kill a pod or delete a deployment. </p>\n\n<p>actual behaviour: tomcat shutsdown abruptly.</p>\n\n<p>Any thoughts? Thanks in advance. </p>\n\n<pre><code>apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: sample\n  annotations:\nspec:\n  replicas: 2\n  selector:\n    matchLabels:\n      app: sample\n      name: sample\n  template:\n    metadata:\n      labels:\n        app: sample\n        name: sample\n    spec:\n      hostname: sample-web\n      terminationGracePeriodSeconds: 60\n      volumes:\n       - name: splunk-inputs\n         configMap:\n           name: splunk-conf\n           items:\n           - key: inputs.conf\n             path: ./inputs.conf\n       - name: splunk-outputs\n         configMap:\n           name: splunk-conf\n           items:\n           - key: outputs.conf\n             path: ./outputs.conf\n       - name: docker-socket\n         hostPath:\n          path: /var/run/docker.sock\n       - name: tomcat-log-common\n         emptyDir: {} \n      containers:\n      - name: sample\n        image: sampleregistery.azurecr.io/root\n        imagePullPolicy: IfNotPresent\n        lifecycle:\n          preStop:\n            exec:\n              command: [\"/usr/local/tomcat/bin/shutdown.sh\"]\n</code></pre>\n"},{"tags":["java","memory","heap-dump","eclipse-memory-analyzer","eclipse-mat"],"owner":{"account_id":29002060,"reputation":1,"user_id":22215432,"display_name":"Yanle Wei"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689162011,"creation_date":1689162011,"question_id":76670150,"body_markdown":"I&#39;m using batch mode to analyze an hprof file, but I&#39;m encountering an issue. I am using JDK 8, MAT version 1.11.0 (I have downloaded versions 1.12.0 and later, but they indicate that JDK 8 is not supported), and I am on macOS (Intel).\r\n\r\nInitially, MAT reported an error saying &quot;Failed to create the Java Virtual Machine&quot;. I added the JDK path to the MemoryAnalyzer.ini file, which allowed it to open successfully. It works fine when I use the GUI to analyze dump files.\r\n\r\nHowever, what I actually need is to use the batch mode. I copied &quot;ParseHeapDump.sh&quot; to &quot;mat.app/Contents/MacOS/&quot; and ran the commands mentioned in the documentation at https://help.eclipse.org/2023-03/index.jsp?topic=/org.eclipse.mat.ui.help/tasks/batch.html. When I use &quot;org.eclipse.mat.api:suspects&quot; or &quot;org.eclipse.mat.api:overview,&quot; the output shows that I&#39;m stuck at the subtask &quot;Test &#39;Biggest Objects (Overview)&#39; of section &#39;Top Consumers&#39;&quot;. Similarly, when I use &quot;org.eclipse.mat.api:top_components,&quot; it gets stuck at the subtask &quot;Test &#39;Distribution&#39; of section &#39;Overview&#39;&quot;. The process cannot be interrupted by Ctrl+C, and I have to kill it or quit the app.\r\n\r\nFurthermore, when I use &quot;org.eclipse.mat.api:query,&quot; it runs successfully, but I cannot find the retained size in the result. Therefore, I need to find a way to run the aforementioned commands.\r\n\r\nAdditionally, the size of the dump file is less than 10MB, so it does not seem to be a memory size issue.\r\n\r\nCould you please help me solve this problem? Thank you!","title":"Using eclipse Memory Analyzer(MAT) in batch mode and stuck at a subtask","body":"<p>I'm using batch mode to analyze an hprof file, but I'm encountering an issue. I am using JDK 8, MAT version 1.11.0 (I have downloaded versions 1.12.0 and later, but they indicate that JDK 8 is not supported), and I am on macOS (Intel).</p>\n<p>Initially, MAT reported an error saying &quot;Failed to create the Java Virtual Machine&quot;. I added the JDK path to the MemoryAnalyzer.ini file, which allowed it to open successfully. It works fine when I use the GUI to analyze dump files.</p>\n<p>However, what I actually need is to use the batch mode. I copied &quot;ParseHeapDump.sh&quot; to &quot;mat.app/Contents/MacOS/&quot; and ran the commands mentioned in the documentation at <a href=\"https://help.eclipse.org/2023-03/index.jsp?topic=/org.eclipse.mat.ui.help/tasks/batch.html\" rel=\"nofollow noreferrer\">https://help.eclipse.org/2023-03/index.jsp?topic=/org.eclipse.mat.ui.help/tasks/batch.html</a>. When I use &quot;org.eclipse.mat.api:suspects&quot; or &quot;org.eclipse.mat.api:overview,&quot; the output shows that I'm stuck at the subtask &quot;Test 'Biggest Objects (Overview)' of section 'Top Consumers'&quot;. Similarly, when I use &quot;org.eclipse.mat.api:top_components,&quot; it gets stuck at the subtask &quot;Test 'Distribution' of section 'Overview'&quot;. The process cannot be interrupted by Ctrl+C, and I have to kill it or quit the app.</p>\n<p>Furthermore, when I use &quot;org.eclipse.mat.api:query,&quot; it runs successfully, but I cannot find the retained size in the result. Therefore, I need to find a way to run the aforementioned commands.</p>\n<p>Additionally, the size of the dump file is less than 10MB, so it does not seem to be a memory size issue.</p>\n<p>Could you please help me solve this problem? Thank you!</p>\n"},{"tags":["java","android"],"owner":{"account_id":26267089,"reputation":49,"user_id":19937474,"display_name":"viswareddy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689161523,"creation_date":1689161523,"question_id":76670081,"body_markdown":"i want to save all recycler view item views from the activity. after Changning modifications. but here only coming those those views are visible. but I want for all item views which not currently showing also   \r\n\r\nThis is my adapter class \r\n\r\n```\r\npublic class MultifitRecyclerViewAdapter extends RecyclerView.Adapter&lt;MultifitRecyclerViewAdapter.ViewHolder&gt; {\r\n    ArrayList&lt;Bitmap&gt; selectedBitmaps;\r\n    Context context;\r\n\r\n    String selectedFilterConfig;\r\n\r\n    String selectedAdjustConfig;\r\n    private float mScaleSize;\r\n    private ArrayList&lt;Bitmap&gt; backgroundImgList;\r\n    int height;\r\n    boolean isRatio;\r\n    int ratioWidth;\r\n    int ratioHeight;\r\n\r\n    public MultifitRecyclerViewAdapter(ArrayList&lt;Bitmap&gt; selectedBitmaps, Context context, float mScaleSize, ArrayList&lt;Bitmap&gt; backgroundImgList) {\r\n        this.selectedBitmaps = selectedBitmaps;\r\n        this.context = context;\r\n        this.mScaleSize = mScaleSize;\r\n        this.backgroundImgList = backgroundImgList;\r\n        this.selectedAdjustConfig = &quot;&quot;;\r\n        this.selectedFilterConfig = &quot;&quot;;\r\n        isRatio = false;\r\n        this.height = 985;\r\n    }\r\n\r\n    public void setSelectedBitmaps(ArrayList&lt;Bitmap&gt; selectedBitmaps) {\r\n        this.selectedBitmaps = selectedBitmaps;\r\n        notifyDataSetChanged();\r\n    }\r\n\r\n    public void setmScaleSize(float mScaleSize) {\r\n        this.mScaleSize = mScaleSize;\r\n    }\r\n\r\n    public void setRatio(boolean isRatio) {\r\n        this.isRatio = isRatio;\r\n    }\r\n\r\n    public void setRatioWidth(int ratioWidth) {\r\n        this.ratioWidth = ratioWidth;\r\n    }\r\n\r\n    public int getRatioWidth() {\r\n        return ratioWidth;\r\n    }\r\n\r\n    public void setRatioHeight(int ratioHeight) {\r\n        this.ratioHeight = ratioHeight;\r\n    }\r\n\r\n    public int getRatioHeight() {\r\n        return ratioHeight;\r\n    }\r\n\r\n    public void setBackgroundImgList(ArrayList&lt;Bitmap&gt; backgroundImgList) {\r\n        this.backgroundImgList = backgroundImgList;\r\n        notifyDataSetChanged();\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public MultifitRecyclerViewAdapter.ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        View view = LayoutInflater.from(context).inflate(R.layout.multifit_item, parent, false);\r\n        return new ViewHolder(view);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull ViewHolder holder, int position) {\r\n            holder.ivCover.setImageBitmap(this.selectedBitmaps.get(position));\r\n\r\n                    holder.ivFrame.setImageBitmap(backgroundImgList.get(position));\r\n\r\n            holder.ivCover.setScaleX(mScaleSize);\r\n            holder.ivCover.setScaleY(mScaleSize);\r\n        if (isRatio) {\r\n            height = holder.cRatio.getHeight();\r\n            holder.cWrapper.setLayoutParams(new ConstraintLayout.LayoutParams(ratioWidth, ratioHeight));\r\n            ViewGroup.LayoutParams layoutParams = holder.ivCover.getLayoutParams();\r\n            layoutParams.width = ratioWidth;\r\n            layoutParams.height = ratioHeight;\r\n            holder.ivCover.setLayoutParams(layoutParams);\r\n            ConstraintSet constraintSet = new ConstraintSet();\r\n            constraintSet.clone(holder.cRatio);\r\n            constraintSet.connect(holder.cWrapper.getId(), 3, holder.cRatio.getId(), 3, 0);\r\n            constraintSet.connect(holder.cWrapper.getId(), 1, holder.cRatio.getId(), 1, 0);\r\n            constraintSet.connect(holder.cWrapper.getId(), 4, holder.cRatio.getId(), 4, 0);\r\n            constraintSet.connect(holder.cWrapper.getId(), 2, holder.cRatio.getId(), 2, 0);\r\n            constraintSet.applyTo(holder.cRatio);\r\n        }\r\n\r\n    }\r\n\r\n    public int getHeight() {\r\n        return height;\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return selectedBitmaps.size();\r\n    }\r\n\r\n    public class ViewHolder extends RecyclerView.ViewHolder {\r\n\r\n        public PhotoEditorView pvEditor;\r\n        RectangularLayout rectangularLayout;\r\n        public ImageView ivFrame, ivCover;\r\n        public ConstraintLayout cRatio;\r\n        public FrameLayout cWrapper;\r\n\r\n        public ViewHolder(@NonNull View itemView) {\r\n            super(itemView);\r\n            pvEditor = itemView.findViewById(R.id.photo_editor_view);\r\n            ivFrame = itemView.findViewById(R.id.ivFrame);\r\n            ivCover = itemView.findViewById(R.id.ivCover);\r\n            cRatio = itemView.findViewById(R.id.cRatio);\r\n            cWrapper = itemView.findViewById(R.id.frame_layout_wrapper);\r\n            rectangularLayout = itemView.findViewById(R.id.relative_layout_wrapper_photo);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nand then im taking view from adapter like this and saving them in gallery like this \r\n\r\n```\r\n    class SaveBitmap extends AsyncTask&lt;Void, String, List&lt;String&gt;&gt; {\r\n\r\n        SaveBitmap() {\r\n\r\n        }\r\n\r\n        public void onPreExecute() {\r\n            // customLoader.hide();\r\n            //  customLoader.show();\r\n        }\r\n\r\n        public List&lt;String&gt; doInBackground(Void... voids) {\r\n            List&lt;String&gt; filePaths = new ArrayList&lt;&gt;();\r\n\r\n            for (int i = 0; i &lt; multifitRecyclerViewAdapter.getItemCount(); i++) {\r\n                MultifitRecyclerViewAdapter.ViewHolder holder = (MultifitRecyclerViewAdapter.ViewHolder) multiFitRecyclerView.findViewHolderForAdapterPosition(i);\r\n                if (holder != null) {\r\n                    Bitmap bitmap1 = Bitmap.createBitmap(holder.pvEditor.getWidth(), holder.pvEditor.getHeight(), Bitmap.Config.ARGB_8888);\r\n                    Canvas canvas = new Canvas(bitmap1);\r\n                    holder.pvEditor.draw(canvas);\r\n\r\n                    try {\r\n                        String filename = new SimpleDateFormat(&quot;yyyyMMdd_HHmmss&quot;, Locale.ENGLISH).format(new Date());\r\n                        File file = SaveFileUtils.saveBitmapFileRemoveBg(MultifitActivity.this, bitmap1, filename, null);\r\n                        if (file != null) {\r\n                            filePaths.add(file.getAbsolutePath());\r\n                        }\r\n                    } catch (IOException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n            }\r\n\r\n            return filePaths;\r\n        }\r\n\r\n        public void onPostExecute(List&lt;String&gt; filePaths) {\r\n            // customLoader.hide();\r\n            if (filePaths == null || filePaths.isEmpty()) {\r\n                Toast.makeText(getApplicationContext(), R.string.went_wrong, Toast.LENGTH_LONG).show();\r\n                return;\r\n            }\r\n            Intent i = new Intent(MultifitActivity.this, MultiShareActivity.class);\r\n            i.putStringArrayListExtra(&quot;path&quot;, (ArrayList&lt;String&gt;) filePaths);\r\n            startActivity(i);\r\n            AdsManager.showAdmobInterstitialAd(MultifitActivity.this, &quot;PhotoEditor&quot;);\r\n        }\r\n\r\n    }\r\n```\r\nhere i want save all items from reyclcerview item views but it saving only two images which showing.\r\n","title":"How to get all recylerview item views in activity?","body":"<p>i want to save all recycler view item views from the activity. after Changning modifications. but here only coming those those views are visible. but I want for all item views which not currently showing also</p>\n<p>This is my adapter class</p>\n<pre><code>public class MultifitRecyclerViewAdapter extends RecyclerView.Adapter&lt;MultifitRecyclerViewAdapter.ViewHolder&gt; {\n    ArrayList&lt;Bitmap&gt; selectedBitmaps;\n    Context context;\n\n    String selectedFilterConfig;\n\n    String selectedAdjustConfig;\n    private float mScaleSize;\n    private ArrayList&lt;Bitmap&gt; backgroundImgList;\n    int height;\n    boolean isRatio;\n    int ratioWidth;\n    int ratioHeight;\n\n    public MultifitRecyclerViewAdapter(ArrayList&lt;Bitmap&gt; selectedBitmaps, Context context, float mScaleSize, ArrayList&lt;Bitmap&gt; backgroundImgList) {\n        this.selectedBitmaps = selectedBitmaps;\n        this.context = context;\n        this.mScaleSize = mScaleSize;\n        this.backgroundImgList = backgroundImgList;\n        this.selectedAdjustConfig = &quot;&quot;;\n        this.selectedFilterConfig = &quot;&quot;;\n        isRatio = false;\n        this.height = 985;\n    }\n\n    public void setSelectedBitmaps(ArrayList&lt;Bitmap&gt; selectedBitmaps) {\n        this.selectedBitmaps = selectedBitmaps;\n        notifyDataSetChanged();\n    }\n\n    public void setmScaleSize(float mScaleSize) {\n        this.mScaleSize = mScaleSize;\n    }\n\n    public void setRatio(boolean isRatio) {\n        this.isRatio = isRatio;\n    }\n\n    public void setRatioWidth(int ratioWidth) {\n        this.ratioWidth = ratioWidth;\n    }\n\n    public int getRatioWidth() {\n        return ratioWidth;\n    }\n\n    public void setRatioHeight(int ratioHeight) {\n        this.ratioHeight = ratioHeight;\n    }\n\n    public int getRatioHeight() {\n        return ratioHeight;\n    }\n\n    public void setBackgroundImgList(ArrayList&lt;Bitmap&gt; backgroundImgList) {\n        this.backgroundImgList = backgroundImgList;\n        notifyDataSetChanged();\n    }\n\n    @NonNull\n    @Override\n    public MultifitRecyclerViewAdapter.ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n        View view = LayoutInflater.from(context).inflate(R.layout.multifit_item, parent, false);\n        return new ViewHolder(view);\n    }\n\n    @Override\n    public void onBindViewHolder(@NonNull ViewHolder holder, int position) {\n            holder.ivCover.setImageBitmap(this.selectedBitmaps.get(position));\n\n                    holder.ivFrame.setImageBitmap(backgroundImgList.get(position));\n\n            holder.ivCover.setScaleX(mScaleSize);\n            holder.ivCover.setScaleY(mScaleSize);\n        if (isRatio) {\n            height = holder.cRatio.getHeight();\n            holder.cWrapper.setLayoutParams(new ConstraintLayout.LayoutParams(ratioWidth, ratioHeight));\n            ViewGroup.LayoutParams layoutParams = holder.ivCover.getLayoutParams();\n            layoutParams.width = ratioWidth;\n            layoutParams.height = ratioHeight;\n            holder.ivCover.setLayoutParams(layoutParams);\n            ConstraintSet constraintSet = new ConstraintSet();\n            constraintSet.clone(holder.cRatio);\n            constraintSet.connect(holder.cWrapper.getId(), 3, holder.cRatio.getId(), 3, 0);\n            constraintSet.connect(holder.cWrapper.getId(), 1, holder.cRatio.getId(), 1, 0);\n            constraintSet.connect(holder.cWrapper.getId(), 4, holder.cRatio.getId(), 4, 0);\n            constraintSet.connect(holder.cWrapper.getId(), 2, holder.cRatio.getId(), 2, 0);\n            constraintSet.applyTo(holder.cRatio);\n        }\n\n    }\n\n    public int getHeight() {\n        return height;\n    }\n\n    @Override\n    public int getItemCount() {\n        return selectedBitmaps.size();\n    }\n\n    public class ViewHolder extends RecyclerView.ViewHolder {\n\n        public PhotoEditorView pvEditor;\n        RectangularLayout rectangularLayout;\n        public ImageView ivFrame, ivCover;\n        public ConstraintLayout cRatio;\n        public FrameLayout cWrapper;\n\n        public ViewHolder(@NonNull View itemView) {\n            super(itemView);\n            pvEditor = itemView.findViewById(R.id.photo_editor_view);\n            ivFrame = itemView.findViewById(R.id.ivFrame);\n            ivCover = itemView.findViewById(R.id.ivCover);\n            cRatio = itemView.findViewById(R.id.cRatio);\n            cWrapper = itemView.findViewById(R.id.frame_layout_wrapper);\n            rectangularLayout = itemView.findViewById(R.id.relative_layout_wrapper_photo);\n        }\n    }\n}\n</code></pre>\n<p>and then im taking view from adapter like this and saving them in gallery like this</p>\n<pre><code>    class SaveBitmap extends AsyncTask&lt;Void, String, List&lt;String&gt;&gt; {\n\n        SaveBitmap() {\n\n        }\n\n        public void onPreExecute() {\n            // customLoader.hide();\n            //  customLoader.show();\n        }\n\n        public List&lt;String&gt; doInBackground(Void... voids) {\n            List&lt;String&gt; filePaths = new ArrayList&lt;&gt;();\n\n            for (int i = 0; i &lt; multifitRecyclerViewAdapter.getItemCount(); i++) {\n                MultifitRecyclerViewAdapter.ViewHolder holder = (MultifitRecyclerViewAdapter.ViewHolder) multiFitRecyclerView.findViewHolderForAdapterPosition(i);\n                if (holder != null) {\n                    Bitmap bitmap1 = Bitmap.createBitmap(holder.pvEditor.getWidth(), holder.pvEditor.getHeight(), Bitmap.Config.ARGB_8888);\n                    Canvas canvas = new Canvas(bitmap1);\n                    holder.pvEditor.draw(canvas);\n\n                    try {\n                        String filename = new SimpleDateFormat(&quot;yyyyMMdd_HHmmss&quot;, Locale.ENGLISH).format(new Date());\n                        File file = SaveFileUtils.saveBitmapFileRemoveBg(MultifitActivity.this, bitmap1, filename, null);\n                        if (file != null) {\n                            filePaths.add(file.getAbsolutePath());\n                        }\n                    } catch (IOException e) {\n                        e.printStackTrace();\n                    }\n                }\n            }\n\n            return filePaths;\n        }\n\n        public void onPostExecute(List&lt;String&gt; filePaths) {\n            // customLoader.hide();\n            if (filePaths == null || filePaths.isEmpty()) {\n                Toast.makeText(getApplicationContext(), R.string.went_wrong, Toast.LENGTH_LONG).show();\n                return;\n            }\n            Intent i = new Intent(MultifitActivity.this, MultiShareActivity.class);\n            i.putStringArrayListExtra(&quot;path&quot;, (ArrayList&lt;String&gt;) filePaths);\n            startActivity(i);\n            AdsManager.showAdmobInterstitialAd(MultifitActivity.this, &quot;PhotoEditor&quot;);\n        }\n\n    }\n</code></pre>\n<p>here i want save all items from reyclcerview item views but it saving only two images which showing.</p>\n"},{"tags":["java","spring","spring-mvc","controller","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":3716903,"reputation":131,"user_id":3092891,"display_name":"craig"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1443705456,"creation_date":1443705456,"answer_id":32888613,"question_id":32497657,"body_markdown":"Are you using Tomcat or Undertow as your application server?\r\n\r\nIf it&#39;s Undertow, it may just be a benign exception informing you that the temporary file can&#39;t be deleted because it&#39;s already been deleted (source: https://github.com/spring-projects/spring-boot/issues/3966 which also mentions a bug ticket open [UNDERTOW-542](https://issues.jboss.org/browse/UNDERTOW-542) ).\r\n\r\nI ran into this same issue when running a jHipster-based project using the `fast` profile, which uses Undertow. Everything worked as expected, but this error was thrown. If I used the `dev` profile, which uses Tomcat, no error was thrown.","title":"Spring is unable to perform cleanup of multipart items","body":"<p>Are you using Tomcat or Undertow as your application server?</p>\n\n<p>If it's Undertow, it may just be a benign exception informing you that the temporary file can't be deleted because it's already been deleted (source: <a href=\"https://github.com/spring-projects/spring-boot/issues/3966\" rel=\"nofollow\">https://github.com/spring-projects/spring-boot/issues/3966</a> which also mentions a bug ticket open <a href=\"https://issues.jboss.org/browse/UNDERTOW-542\" rel=\"nofollow\">UNDERTOW-542</a> ).</p>\n\n<p>I ran into this same issue when running a jHipster-based project using the <code>fast</code> profile, which uses Undertow. Everything worked as expected, but this error was thrown. If I used the <code>dev</code> profile, which uses Tomcat, no error was thrown.</p>\n"},{"tags":[],"owner":{"account_id":1735752,"reputation":2511,"user_id":1588361,"accept_rate":54,"display_name":"Ravi MCA"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1493295210,"creation_date":1493295210,"answer_id":43657506,"question_id":32497657,"body_markdown":"I ran into the same issue when I started using `Spring 4.3.1.RELEASE` with `wildfly 9.x`.\r\n\r\nTo fix the issue I just updated my Spring version from `4.2.2.RELEASE` to `4.2.3.RELEASE` which solved the issue.","title":"Spring is unable to perform cleanup of multipart items","body":"<p>I ran into the same issue when I started using <code>Spring 4.3.1.RELEASE</code> with <code>wildfly 9.x</code>.</p>\n\n<p>To fix the issue I just updated my Spring version from <code>4.2.2.RELEASE</code> to <code>4.2.3.RELEASE</code> which solved the issue.</p>\n"},{"tags":[],"owner":{"account_id":28238466,"reputation":33,"user_id":21586591,"display_name":"Raja Mali"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684687719,"creation_date":1684415907,"answer_id":76281233,"question_id":32497657,"body_markdown":"This is my service class\r\n\r\n\t@Override\r\n\tpublic String uploadImage(String path, MultipartFile file) throws IOException {\r\n\r\n\t\t// File Name\r\n\t\tString name = file.getOriginalFilename();\r\n\r\n\t\t//Random name generate of file\r\n\t\t  String randomID=UUID.randomUUID().toString();\r\n\t\t  String fileName1= randomID.concat(name.substring(name.lastIndexOf(&quot;.&quot;)));\r\n\t\t\r\n\t\t// Full Path\r\n\t\tString filePath = path + File.separator + fileName1;\r\n\r\n\t\t// Create folder if not create\r\n\t\tFile f = new File(path);\r\n\t\tif (!f.exists()) {\r\n\t\t\tf.mkdir();\r\n\t\t}\r\n\r\n\t\t\r\n\t\t// file copy\r\n\r\n\t\tFiles.copy(file.getInputStream(), Paths.get(filePath));\r\n\t\t//System.gc();  //or \r\n\t\tf.delete();\r\n\t\t/* I am resolve my exception using above System.gc(); or f.delete() method using both are working for me \r\n\t\t*/\r\n\t\treturn fileName1;\r\n\t}","title":"Spring is unable to perform cleanup of multipart items","body":"<p>This is my service class</p>\n<pre><code>@Override\npublic String uploadImage(String path, MultipartFile file) throws IOException {\n\n    // File Name\n    String name = file.getOriginalFilename();\n\n    //Random name generate of file\n      String randomID=UUID.randomUUID().toString();\n      String fileName1= randomID.concat(name.substring(name.lastIndexOf(&quot;.&quot;)));\n    \n    // Full Path\n    String filePath = path + File.separator + fileName1;\n\n    // Create folder if not create\n    File f = new File(path);\n    if (!f.exists()) {\n        f.mkdir();\n    }\n\n    \n    // file copy\n\n    Files.copy(file.getInputStream(), Paths.get(filePath));\n    //System.gc();  //or \n    f.delete();\n    /* I am resolve my exception using above System.gc(); or f.delete() method using both are working for me \n    */\n    return fileName1;\n}\n</code></pre>\n"}],"owner":{"account_id":1779330,"reputation":1007,"user_id":1622461,"accept_rate":80,"display_name":"Marcin Majewski"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10097,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":3,"score":4,"last_activity_date":1689161327,"creation_date":1441876280,"question_id":32497657,"body_markdown":"I am sending to controller multipartfile and when logic in controller is completed spring invokes error:\r\n\r\n    2015-09-10 10:41:05 WARN  (StandardServletMultipartResolver.java:91) - Failed to perform cleanup of multipart items\r\n    java.io.IOException: UT010015: Could not delete file ....\\Path\\undertow6870903013120486522upload\r\n    \tat io.undertow.servlet.spec.PartImpl.delete(PartImpl.java:111)\r\n\r\nMy controller:\r\n\r\n    @RequestMapping(value = &quot;api/{name}/file&quot;, method = RequestMethod.POST,consumes=&quot;multipart/form-data&quot;)\r\n     public ResponseEntity&lt;?&gt; receiveFile(@RequestParam(value = &quot;file&quot;) MultipartFile multipartFile,\r\n    @PathVariable(&quot;name&quot;) String name) throws IOException {\r\n        logic here\r\n        return new ResponseEntity&lt;&gt;(HttpStatus.OK);\r\n    }\r\n\r\nI am using AngularJS (ng-file-upload module) to send file:\r\n\r\n    file.upload = Upload.upload({\r\n    \t\t\t\t\t\t\turl: sUrl,\r\n    \t\t\t\t\t\t\tmethod: &#39;POST&#39;,\r\n    \t\t\t\t\t\t\theaders: {&#39;Content-Type&#39;: &#39;&quot;multipart/form-data&#39;},\r\n    \t\t\t\t\t\t\tfile: file,\r\n    \t\t\t\t\t\t\tfileFormDataName: &#39;file&#39;\r\n    \t\t\t\t\t\t});\r\n\r\n","title":"Spring is unable to perform cleanup of multipart items","body":"<p>I am sending to controller multipartfile and when logic in controller is completed spring invokes error:</p>\n\n<pre><code>2015-09-10 10:41:05 WARN  (StandardServletMultipartResolver.java:91) - Failed to perform cleanup of multipart items\njava.io.IOException: UT010015: Could not delete file ....\\Path\\undertow6870903013120486522upload\n    at io.undertow.servlet.spec.PartImpl.delete(PartImpl.java:111)\n</code></pre>\n\n<p>My controller:</p>\n\n<pre><code>@RequestMapping(value = \"api/{name}/file\", method = RequestMethod.POST,consumes=\"multipart/form-data\")\n public ResponseEntity&lt;?&gt; receiveFile(@RequestParam(value = \"file\") MultipartFile multipartFile,\n@PathVariable(\"name\") String name) throws IOException {\n    logic here\n    return new ResponseEntity&lt;&gt;(HttpStatus.OK);\n}\n</code></pre>\n\n<p>I am using AngularJS (ng-file-upload module) to send file:</p>\n\n<pre><code>file.upload = Upload.upload({\n                            url: sUrl,\n                            method: 'POST',\n                            headers: {'Content-Type': '\"multipart/form-data'},\n                            file: file,\n                            fileFormDataName: 'file'\n                        });\n</code></pre>\n"},{"tags":["java","redis","connection-pooling","jedis"],"owner":{"account_id":915328,"reputation":243,"user_id":948235,"accept_rate":0,"display_name":"Sneha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689160877,"creation_date":1689160877,"question_id":76669990,"body_markdown":"    private static StringRedisTemplate stringRedisTemplate = null;\r\nprivate static JedisConnectionFactory connectionFactory = null;\r\n\r\n\r\n\t\ttry {\r\n\t\t\tRedisSentinelConfiguration sentinelConfig;\t\t\t\r\n\t\t\tJedisPoolConfig poolConf = getPoolConfig();\r\n\t\t\t\t\t\t\r\n\t\t\tif (StringUtils.isNotEmpty(System.getenv(&quot;REDIS_SENTINEL_MASTER&quot;))) {\r\n\t\t\t\tlog.info(&quot;Inside REDIS_SENTINEL_MASTER &quot; + EMSUtil.encode(System.getenv(&quot;REDIS_SENTINEL_MASTER&quot;)));\r\n\t\t\t\tsentinelConfig = new RedisSentinelConfiguration().master(System.getenv(&quot;REDIS_SENTINEL_MASTER&quot;));\r\n\t\t\t\tString[] nodeArray = System.getenv(&quot;REDIS_SENTINEL_NODES&quot;).split(&quot;,&quot;);\r\n\t\t\t\tlog.info(&quot;Nodes &quot; + EMSUtil.encode(System.getenv(&quot;REDIS_SENTINEL_NODES&quot;)));\r\n\t\t\t\tList&lt;RedisNode&gt; redisList = new ArrayList&lt;RedisNode&gt;();\r\n\t\t\t\tif (nodeArray != null) {\r\n\t\t\t\t\tfor (String node : nodeArray) {\r\n\t\t\t\t\t\tString[] nodeAddrArry = node.split(&quot;:&quot;);\r\n\t\t\t\t\t\tlog.info(&quot;Node Info : &quot; + EMSUtil.encode(nodeAddrArry[0]) + &quot; : &quot; + EMSUtil.encode(nodeAddrArry[1]));\r\n\t\t\t\t\t\tif (nodeAddrArry != null) {\r\n\t\t\t\t\t\t\tRedisNode redisNode = new RedisNode(nodeAddrArry[0], Integer.parseInt(nodeAddrArry[1]));\r\n\t\t\t\t\t\t\tredisList.add(redisNode);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tsentinelConfig.setSentinels(redisList);\r\n\t\t\t\tconnectionFactory = new JedisConnectionFactory(sentinelConfig, poolConf);\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\t// Defining Jedis Configuration\r\n\t\t\t\tif (StringUtils.isNotEmpty(System.getenv(&quot;REDIS_SENTINEL_NODES&quot;))) {\r\n\t\t\t\t\tJedisPoolConfig poolConfig = new JedisPoolConfig();\r\n\t\t\t\t\tpoolConfig.setMaxTotal(15);\r\n\t\t\t\t\tpoolConfig.setTestOnBorrow(true);\r\n\t\t\t\t\tpoolConfig.setTestOnReturn(true);\r\n\t\t\t\t\tconnectionFactory = new JedisConnectionFactory(poolConfig);\r\n\t\t\t\t\tconnectionFactory.setUsePool(true);\r\n\t\t\t\t\tconnectionFactory.setHostName(System.getenv(&quot;REDIS_SENTINEL_NODES&quot;));\r\n\t\t\t\t\tconnectionFactory.setPort(6379);\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\t\t\r\n\t\t\tif (connectionFactory != null) {\r\n\t\t\t\tconnectionFactory.afterPropertiesSet();\r\n\t\t\t\tstringRedisTemplate = new StringRedisTemplate(connectionFactory);\r\n\t\t\t\tstringRedisTemplate.setConnectionFactory(connectionFactory);\r\n                stringRedisTemplate.setEnableTransactionSupport(true);\r\n\t\t\t\tstringRedisTemplate.afterPropertiesSet();\r\n\t\t\t\t\r\n\t\t} catch (Throwable jce) {\r\n\t\t\tlog.fatal(&quot;Redis server error&quot;, jce);\r\n\r\n\t\t}\t\t\r\n\t}\r\n\t\r\n\tpublic static void setRedisKeyValue(String key, String value, String timestamp) {\r\n\t\tif(log.isTraceEnabled())\r\n\t\t\tlog.trace(&quot;Entered in setRedisKeyValue &quot;+System.currentTimeMillis());\r\n\t\tboolean automaticLicUpdate = EMSUtil.isAutomaticLicUpdate();\r\n\t\tif (automaticLicUpdate) {\r\n\t\t\tvalue += &quot;&amp;&amp;&quot; + timestamp;\r\n\t\t\ttry {\r\n\t\t\t\tif (stringRedisTemplate != null) {\r\n\t\t\t\t\tstringRedisTemplate.opsForValue().set(key, value);\r\n\t\t\t\t\tlog.debug(&quot;Value of redis value is....&quot; + value);\r\n\t\t\t\t}\r\n\r\n\t\t\t} catch (Throwable jce) {\r\n\t\t\t\tlog.fatal(&quot;Redish Server Connection Refused: Not able to connect Jedis server..............&quot; ,  jce);\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\nThere is a loop where 400 keys are being updated, but since max pool size is specified as 15 so only 15 keys are updated in redis cache, why the connection is not released to the pool once the key is updated. Its sequential call, not multithreaded call. If I increase the cache size to 400 then there is no issue, but I do not want to increase the cache size.","title":"Redis connection is not being released back to the pool","body":"<pre><code>private static StringRedisTemplate stringRedisTemplate = null;\n</code></pre>\n<p>private static JedisConnectionFactory connectionFactory = null;</p>\n<pre><code>    try {\n        RedisSentinelConfiguration sentinelConfig;          \n        JedisPoolConfig poolConf = getPoolConfig();\n                    \n        if (StringUtils.isNotEmpty(System.getenv(&quot;REDIS_SENTINEL_MASTER&quot;))) {\n            log.info(&quot;Inside REDIS_SENTINEL_MASTER &quot; + EMSUtil.encode(System.getenv(&quot;REDIS_SENTINEL_MASTER&quot;)));\n            sentinelConfig = new RedisSentinelConfiguration().master(System.getenv(&quot;REDIS_SENTINEL_MASTER&quot;));\n            String[] nodeArray = System.getenv(&quot;REDIS_SENTINEL_NODES&quot;).split(&quot;,&quot;);\n            log.info(&quot;Nodes &quot; + EMSUtil.encode(System.getenv(&quot;REDIS_SENTINEL_NODES&quot;)));\n            List&lt;RedisNode&gt; redisList = new ArrayList&lt;RedisNode&gt;();\n            if (nodeArray != null) {\n                for (String node : nodeArray) {\n                    String[] nodeAddrArry = node.split(&quot;:&quot;);\n                    log.info(&quot;Node Info : &quot; + EMSUtil.encode(nodeAddrArry[0]) + &quot; : &quot; + EMSUtil.encode(nodeAddrArry[1]));\n                    if (nodeAddrArry != null) {\n                        RedisNode redisNode = new RedisNode(nodeAddrArry[0], Integer.parseInt(nodeAddrArry[1]));\n                        redisList.add(redisNode);\n                    }\n                }\n            }\n            sentinelConfig.setSentinels(redisList);\n            connectionFactory = new JedisConnectionFactory(sentinelConfig, poolConf);\n            \n        } else {\n            // Defining Jedis Configuration\n            if (StringUtils.isNotEmpty(System.getenv(&quot;REDIS_SENTINEL_NODES&quot;))) {\n                JedisPoolConfig poolConfig = new JedisPoolConfig();\n                poolConfig.setMaxTotal(15);\n                poolConfig.setTestOnBorrow(true);\n                poolConfig.setTestOnReturn(true);\n                connectionFactory = new JedisConnectionFactory(poolConfig);\n                connectionFactory.setUsePool(true);\n                connectionFactory.setHostName(System.getenv(&quot;REDIS_SENTINEL_NODES&quot;));\n                connectionFactory.setPort(6379);\n                \n                \n            }\n        }       \n        if (connectionFactory != null) {\n            connectionFactory.afterPropertiesSet();\n            stringRedisTemplate = new StringRedisTemplate(connectionFactory);\n            stringRedisTemplate.setConnectionFactory(connectionFactory);\n            stringRedisTemplate.setEnableTransactionSupport(true);\n            stringRedisTemplate.afterPropertiesSet();\n            \n    } catch (Throwable jce) {\n        log.fatal(&quot;Redis server error&quot;, jce);\n\n    }       \n}\n\npublic static void setRedisKeyValue(String key, String value, String timestamp) {\n    if(log.isTraceEnabled())\n        log.trace(&quot;Entered in setRedisKeyValue &quot;+System.currentTimeMillis());\n    boolean automaticLicUpdate = EMSUtil.isAutomaticLicUpdate();\n    if (automaticLicUpdate) {\n        value += &quot;&amp;&amp;&quot; + timestamp;\n        try {\n            if (stringRedisTemplate != null) {\n                stringRedisTemplate.opsForValue().set(key, value);\n                log.debug(&quot;Value of redis value is....&quot; + value);\n            }\n\n        } catch (Throwable jce) {\n            log.fatal(&quot;Redish Server Connection Refused: Not able to connect Jedis server..............&quot; ,  jce);\n\n        }\n    }\n}\n</code></pre>\n<p>There is a loop where 400 keys are being updated, but since max pool size is specified as 15 so only 15 keys are updated in redis cache, why the connection is not released to the pool once the key is updated. Its sequential call, not multithreaded call. If I increase the cache size to 400 then there is no issue, but I do not want to increase the cache size.</p>\n"},{"tags":["java","css"],"comments":[{"owner":{"account_id":4625781,"reputation":1972,"user_id":4142459,"accept_rate":100,"display_name":"Zargold"},"score":0,"creation_date":1462357522,"post_id":37024960,"comment_id":61600152,"body_markdown":"Why not use input type=&quot;file&quot; what&#39;s wrong with it?","body":"Why not use input type=&quot;file&quot; what&#39;s wrong with it?"},{"owner":{"account_id":8340579,"reputation":139,"user_id":6266015,"accept_rate":10,"display_name":"Saurabh Gupta"},"score":0,"creation_date":1462357659,"post_id":37024960,"comment_id":61600245,"body_markdown":"i do not no about dear my developers not use any file type because i am uploading any photo then my photo is show without button click,","body":"i do not no about dear my developers not use any file type because i am uploading any photo then my photo is show without button click,"},{"owner":{"account_id":5143096,"reputation":9867,"user_id":4119808,"accept_rate":87,"display_name":"Gaurav Aggarwal"},"score":0,"creation_date":1462358165,"post_id":37024960,"comment_id":61600632,"body_markdown":"if its about styling then add a hidden input type=&quot;file&quot; and trigger it on span click","body":"if its about styling then add a hidden input type=&quot;file&quot; and trigger it on span click"},{"owner":{"account_id":8340579,"reputation":139,"user_id":6266015,"accept_rate":10,"display_name":"Saurabh Gupta"},"score":0,"creation_date":1462358847,"post_id":37024960,"comment_id":61601128,"body_markdown":"How to use Gourav Plz type script for uploading file..","body":"How to use Gourav Plz type script for uploading file.."}],"answers":[{"tags":[],"owner":{"account_id":8340579,"reputation":139,"user_id":6266015,"accept_rate":10,"display_name":"Saurabh Gupta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1462434365,"creation_date":1462431429,"answer_id":37044365,"question_id":37024960,"body_markdown":"        Finally, I  got it answer  when Input Type is not &quot;File&quot;....\r\n    Thanks Everyone Who suggest me......\r\n        \r\n        \t\r\n\r\n    public static void main(String[] args) throws InterruptedException\r\n            \t{\r\n            \t\tWebDriver driver = new FirefoxDriver();\r\n            \t\tString appUrl = &quot;http://demo.theupbeetkitchen.com/&quot;;\r\n            \t\tdriver.get(appUrl);\r\n            \t\tdriver.manage().timeouts().implicitlyWait(60, TimeUnit.SECONDS);\r\n            \t\tdriver.findElement(By.id(&quot;customLogin&quot;)).click();\r\n            \t\t driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);\r\n            \t     String newSet = driver.getWindowHandle();\r\n            \t\t driver.switchTo().window(newSet); \t \r\n            \t\t driver.findElement(By.id(&quot;login_div&quot;)).click(); \r\n            \t\t driver.findElement(By.id(&quot;ID&quot;)).sendKeys(&quot;mr.saurabh.gupta92@gmail.com&quot;);\r\n            \t\t driver.findElement(By.id(&quot;Password&quot;)).sendKeys(&quot;123456&quot;);\r\n            \t\t driver.findElement(By.id(&quot;loginButton&quot;)).submit();\r\n            \t\t driver.findElement(By.id(&quot;customWelcome Chef Saurabh Gupta!&quot;)).click();\r\n            \t\t driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);\r\n            \t\t driver.findElement(By.className(&quot;btn&quot;)).click();\r\n            \t\t driver.findElement(By.id(&quot;photoVideoPage&quot;)).click();\r\n            \t\t Thread.sleep(2000);\r\n            \t\t WebElement uploading=driver.findElement(By.cssSelector(&quot;div[class=&#39;form_advanced_wrapper my-events_host_wrapper&#39;] span[class=&#39;glyphicon glyphicon-plus avatarUploacIcon&#39;]&quot;));\r\n            \t     uploading.click();\r\n            \t     uploadFile(&quot;C:\\\\pic.jpg&quot;);\r\n            \t\t System.out.println(&quot;Successfully Done...........&quot;);\r\n            \t}\r\n            \tpublic static void uploadFile(String fileLocation) \r\n            \t{\r\n                    try\r\n                    {\r\n                        setClipboardData(fileLocation);\r\n                        Robot robot = new Robot();\t\r\n                        robot.keyPress(KeyEvent.VK_CONTROL);\r\n                        robot.keyPress(KeyEvent.VK_V);\r\n                        robot.keyRelease(KeyEvent.VK_V);\r\n                        robot.keyRelease(KeyEvent.VK_CONTROL);\r\n                        robot.keyPress(KeyEvent.VK_ENTER);\r\n                        robot.keyRelease(KeyEvent.VK_ENTER);\r\n                        robot.delay(2000);\r\n                        robot.keyPress(KeyEvent.VK_ENTER);\r\n                    \r\n                    } \r\n                    catch (Exception exp) \r\n                    \t{\r\n                    \t\texp.printStackTrace();\r\n                    \t}\r\n            \t}\r\n            \tprivate static void setClipboardData(String string) \r\n            \t{\r\n            \t\t// TODO Auto-generated method stub\r\n            \t\t StringSelection stringSelection = new StringSelection(string);\r\n            \t\t   Toolkit.getDefaultToolkit().getSystemClipboard().setContents(stringSelection, null);\r\n            \t\t\r\n            \t}","title":"How to upload Photo when Input type is not &#39;File&#39; in Selenium Webdriver by Using Java","body":"<pre><code>    Finally, I  got it answer  when Input Type is not \"File\"....\nThanks Everyone Who suggest me......\n\n\n\npublic static void main(String[] args) throws InterruptedException\n            {\n                WebDriver driver = new FirefoxDriver();\n                String appUrl = \"http://demo.theupbeetkitchen.com/\";\n                driver.get(appUrl);\n                driver.manage().timeouts().implicitlyWait(60, TimeUnit.SECONDS);\n                driver.findElement(By.id(\"customLogin\")).click();\n                 driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);\n                 String newSet = driver.getWindowHandle();\n                 driver.switchTo().window(newSet);   \n                 driver.findElement(By.id(\"login_div\")).click(); \n                 driver.findElement(By.id(\"ID\")).sendKeys(\"mr.saurabh.gupta92@gmail.com\");\n                 driver.findElement(By.id(\"Password\")).sendKeys(\"123456\");\n                 driver.findElement(By.id(\"loginButton\")).submit();\n                 driver.findElement(By.id(\"customWelcome Chef Saurabh Gupta!\")).click();\n                 driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);\n                 driver.findElement(By.className(\"btn\")).click();\n                 driver.findElement(By.id(\"photoVideoPage\")).click();\n                 Thread.sleep(2000);\n                 WebElement uploading=driver.findElement(By.cssSelector(\"div[class='form_advanced_wrapper my-events_host_wrapper'] span[class='glyphicon glyphicon-plus avatarUploacIcon']\"));\n                 uploading.click();\n                 uploadFile(\"C:\\\\pic.jpg\");\n                 System.out.println(\"Successfully Done...........\");\n            }\n            public static void uploadFile(String fileLocation) \n            {\n                try\n                {\n                    setClipboardData(fileLocation);\n                    Robot robot = new Robot();  \n                    robot.keyPress(KeyEvent.VK_CONTROL);\n                    robot.keyPress(KeyEvent.VK_V);\n                    robot.keyRelease(KeyEvent.VK_V);\n                    robot.keyRelease(KeyEvent.VK_CONTROL);\n                    robot.keyPress(KeyEvent.VK_ENTER);\n                    robot.keyRelease(KeyEvent.VK_ENTER);\n                    robot.delay(2000);\n                    robot.keyPress(KeyEvent.VK_ENTER);\n\n                } \n                catch (Exception exp) \n                    {\n                        exp.printStackTrace();\n                    }\n            }\n            private static void setClipboardData(String string) \n            {\n                // TODO Auto-generated method stub\n                 StringSelection stringSelection = new StringSelection(string);\n                   Toolkit.getDefaultToolkit().getSystemClipboard().setContents(stringSelection, null);\n\n            }\n</code></pre>\n"}],"owner":{"account_id":8340579,"reputation":139,"user_id":6266015,"accept_rate":10,"display_name":"Saurabh Gupta"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":670,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1689160289,"creation_date":1462357399,"question_id":37024960,"body_markdown":"    &lt;span&gt;\r\n    &lt;span class=&quot;glyphicon glyphicon-plus avatarUploacIcon&quot;&gt;&lt;/span&gt;\r\n    Upload profile image&lt;/span&gt;\r\ni am using below code..\r\n\r\n\t WebElement uploading=driver.findElement(By.cssSelector(&quot;div[class=&#39;form_advanced_wrapper my-events_host_wrapper&#39;] span[class=&#39;glyphicon glyphicon-plus avatarUploacIcon&#39;]&quot;));\r\n\t\t\t uploading.click();\r\n\t\t\t uploading.sendKeys(&quot;C:\\pic.jpg&quot;);\r\nI have reached proper direction  but not upload any image, please help my\r\nI have applied more and more syntax but not success to upload image because my type is not &#39;File&#39;.\r\nIf any one use image upload without File type , \r\nPlease share me how to use this ............... ","title":"How to upload Photo when Input type is not &#39;File&#39; in Selenium Webdriver by Using Java","body":"<pre><code>&lt;span&gt;\n&lt;span class=\"glyphicon glyphicon-plus avatarUploacIcon\"&gt;&lt;/span&gt;\nUpload profile image&lt;/span&gt;\n</code></pre>\n\n<p>i am using below code..</p>\n\n<pre><code> WebElement uploading=driver.findElement(By.cssSelector(\"div[class='form_advanced_wrapper my-events_host_wrapper'] span[class='glyphicon glyphicon-plus avatarUploacIcon']\"));\n         uploading.click();\n         uploading.sendKeys(\"C:\\pic.jpg\");\n</code></pre>\n\n<p>I have reached proper direction  but not upload any image, please help my\nI have applied more and more syntax but not success to upload image because my type is not 'File'.\nIf any one use image upload without File type , \nPlease share me how to use this ............... </p>\n"},{"tags":["java","jmeter","ibm-mq","mq"],"answers":[{"tags":[],"owner":{"account_id":3460456,"reputation":162728,"user_id":2897748,"display_name":"Dmitri T"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689159960,"creation_date":1689159960,"answer_id":76669883,"question_id":76669715,"body_markdown":"Looking into the code:\r\n\r\n\tdef consumer=vars.getObject(&quot;Consumer&quot;);\r\n\tdef session=vars.getObject(&quot;ReceiverSession&quot;)\r\n\t \r\n\tdef msg = consumer.receive(&quot;${receive_timeout}&quot; as Integer) \r\n\t\r\n\tif(msg!=null) {\r\n\t\tif(&quot;${transacted}&quot;.equals(&quot;true&quot;)) session.commit()\r\n\t\t\r\n\t\tlog.debug(&quot;########### Message Received&quot;+msg)\r\n\t\r\n\t\tSampleResult.setResponseData(msg.toString())\r\n\t\tSampleResult.setDataType(org.apache.jmeter.samplers.SampleResult.TEXT)\r\n\t} else {\r\n\t\tlog.info(&quot;############ consumer.receive timed out (timeout value: &quot; + &quot;${receive_timeout}&quot; + &quot;)&quot;)\r\n\t\t//Mark timeout as &#39;error&#39; to enable filtering out in listeners (to just analyse successful receive rate etc)\r\n\t\tSampleResult.setSuccessful(false)\r\n\t}\r\n\r\nit appears that you will get the following error:\r\n\r\n&gt;############ consumer.receive timed out (timeout value: 5000)\r\n\r\nwhen the receiver thread fails to retrieve the message withing 5 seconds timeout. \r\n\r\nSo first thing I would check is your [MQ broker container logs][1] \r\n\r\nIn general [JMeter in non-GUI mode has much better performance than in GUI mode][2] so it might be the case it just overloads your MQ broker instance and it cannot properly respond on message receive requests. \r\n\r\nApart from checking the logs you can additionally ensure that the broker has enough headroom to operate in terms of CPU, RAM, Network, Disk, etc. It can be done using container monitoring solution like [docker stats][3] or [JMeter PerfMon Plugin][4]. If this is the case you might need to increase [container limits][5] or [Docker engine][6]  \r\n\r\n\r\n  [1]: https://docs.docker.com/engine/reference/commandline/logs/\r\n  [2]: https://jmeter.apache.org/usermanual/get-started.html#non_gui\r\n  [3]: https://www.docker.com/blog/how-to-monitor-container-memory-and-cpu-usage-in-docker-desktop/\r\n  [4]: https://www.blazemeter.com/blog/jmeter-performance-metrics\r\n  [5]: https://docs.docker.com/config/containers/resource_constraints/\r\n  [6]: https://forums.docker.com/t/how-to-increase-memory-size-that-is-available-for-a-docker-container/78483","title":"Jmeter MQ GUI is working properly but cli summary showing error. Aggregate report shows different result","body":"<p>Looking into the code:</p>\n<pre><code>def consumer=vars.getObject(&quot;Consumer&quot;);\ndef session=vars.getObject(&quot;ReceiverSession&quot;)\n \ndef msg = consumer.receive(&quot;${receive_timeout}&quot; as Integer) \n\nif(msg!=null) {\n    if(&quot;${transacted}&quot;.equals(&quot;true&quot;)) session.commit()\n    \n    log.debug(&quot;########### Message Received&quot;+msg)\n\n    SampleResult.setResponseData(msg.toString())\n    SampleResult.setDataType(org.apache.jmeter.samplers.SampleResult.TEXT)\n} else {\n    log.info(&quot;############ consumer.receive timed out (timeout value: &quot; + &quot;${receive_timeout}&quot; + &quot;)&quot;)\n    //Mark timeout as 'error' to enable filtering out in listeners (to just analyse successful receive rate etc)\n    SampleResult.setSuccessful(false)\n}\n</code></pre>\n<p>it appears that you will get the following error:</p>\n<blockquote>\n<p>############ consumer.receive timed out (timeout value: 5000)</p>\n</blockquote>\n<p>when the receiver thread fails to retrieve the message withing 5 seconds timeout.</p>\n<p>So first thing I would check is your <a href=\"https://docs.docker.com/engine/reference/commandline/logs/\" rel=\"nofollow noreferrer\">MQ broker container logs</a></p>\n<p>In general <a href=\"https://jmeter.apache.org/usermanual/get-started.html#non_gui\" rel=\"nofollow noreferrer\">JMeter in non-GUI mode has much better performance than in GUI mode</a> so it might be the case it just overloads your MQ broker instance and it cannot properly respond on message receive requests.</p>\n<p>Apart from checking the logs you can additionally ensure that the broker has enough headroom to operate in terms of CPU, RAM, Network, Disk, etc. It can be done using container monitoring solution like <a href=\"https://www.docker.com/blog/how-to-monitor-container-memory-and-cpu-usage-in-docker-desktop/\" rel=\"nofollow noreferrer\">docker stats</a> or <a href=\"https://www.blazemeter.com/blog/jmeter-performance-metrics\" rel=\"nofollow noreferrer\">JMeter PerfMon Plugin</a>. If this is the case you might need to increase <a href=\"https://docs.docker.com/config/containers/resource_constraints/\" rel=\"nofollow noreferrer\">container limits</a> or <a href=\"https://forums.docker.com/t/how-to-increase-memory-size-that-is-available-for-a-docker-container/78483\" rel=\"nofollow noreferrer\">Docker engine</a></p>\n"}],"owner":{"account_id":9647272,"reputation":25,"user_id":7159571,"display_name":"JL007"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76669883,"answer_count":1,"score":0,"last_activity_date":1689159960,"creation_date":1689158680,"question_id":76669715,"body_markdown":"Hi I am new to Jmeter and I am trying to use Jmeter to do some performance testing on IBM MQ docker.\r\n\r\nI have setup IBM MQ docker following this:\r\n\r\nhttps://developer.ibm.com/tutorials/mq-connect-app-queue-manager-containers/\r\n\r\nMy apps can consume and publish to the broker so its working fine.\r\n\r\nI am trying out Jmeter for performance testing and I have setup the Jmeter(5.6.2) with the jmx file provided following the pdf guide.\r\n\r\nhttps://github.com/ibm-messaging/mqperf/tree/gh-pages/jmeter\r\n\r\nAfter running the GUI, it seems working fine.\r\n[![enter image description here][1]][1]\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\nBut when I run it in cli, it seem to be giving me errors. And the result seems weird by having more received msg than send. It could be due to retry but I am not sure. The following is the command I used:\r\n\r\n```\r\njmeter.bat -n -t &quot;C:\\Users\\alex\\Desktop\\all jmeter stuff\\jmeter test plan jmx files\\MQ-Sender-Receiver-Plan.jmx&quot; -l &quot;C:\\Users\\alex\\Desktop\\all jmeter stuff\\jmeter test plan jmx files\\results.jtl&quot; -j &quot;C:\\Users\\alex\\Desktop\\all jmeter stuff\\jmeter test plan jmx files\\log.jtl&quot;\r\n```\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n[![enter image description here][4]][4]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/BZCFw.png\r\n  [2]: https://i.stack.imgur.com/loHD3.png\r\n  [3]: https://i.stack.imgur.com/dVhcP.png\r\n  [4]: https://i.stack.imgur.com/koTDB.png\r\n\r\nI have the cli logs here. Thanks in advance for any helps!\r\n\r\n```\r\n2023-07-12 18:28:32,787 INFO o.a.j.u.JMeterUtils: Setting Locale to en_EN\r\n2023-07-12 18:28:32,799 INFO o.a.j.JMeter: Loading user properties from: user.properties\r\n2023-07-12 18:28:32,799 INFO o.a.j.JMeter: Loading system properties from: system.properties\r\n2023-07-12 18:28:32,804 INFO o.a.j.JMeter: Copyright (c) 1998-2023 The Apache Software Foundation\r\n2023-07-12 18:28:32,804 INFO o.a.j.JMeter: Version 5.6.2\r\n2023-07-12 18:28:32,804 INFO o.a.j.JMeter: java.version=11.0.19\r\n2023-07-12 18:28:32,804 INFO o.a.j.JMeter: java.vm.name=Java HotSpot(TM) 64-Bit Server VM\r\n2023-07-12 18:28:32,804 INFO o.a.j.JMeter: os.name=Windows 10\r\n2023-07-12 18:28:32,804 INFO o.a.j.JMeter: os.arch=amd64\r\n2023-07-12 18:28:32,804 INFO o.a.j.JMeter: os.version=10.0\r\n2023-07-12 18:28:32,813 INFO o.a.j.JMeter: file.encoding=Cp1252\r\n2023-07-12 18:28:32,813 INFO o.a.j.JMeter: java.awt.headless=true\r\n2023-07-12 18:28:32,813 INFO o.a.j.JMeter: Max memory     =4294967296\r\n2023-07-12 18:28:32,813 INFO o.a.j.JMeter: Available Processors =12\r\n2023-07-12 18:28:32,818 INFO o.a.j.JMeter: Default Locale=English (EN)\r\n2023-07-12 18:28:32,818 INFO o.a.j.JMeter: JMeter  Locale=English (EN)\r\n2023-07-12 18:28:32,818 INFO o.a.j.JMeter: JMeterHome=C:\\Users\\alex\\Desktop\\all jmeter stuff\\apache-jmeter-5.6.2\r\n2023-07-12 18:28:32,818 INFO o.a.j.JMeter: user.dir  =C:\\Users\\alex\\Desktop\\all jmeter stuff\\apache-jmeter-5.6.2\\bin\r\n2023-07-12 18:28:32,818 INFO o.a.j.JMeter: PWD       =C:\\Users\\alex\\Desktop\\all jmeter stuff\\apache-jmeter-5.6.2\\bin\r\n2023-07-12 18:28:32,819 INFO o.a.j.JMeter: IP: 202.188.100.169 Name: P_IFSLT2650 FullName: parkview-100-169.tm.net.my\r\n2023-07-12 18:28:32,828 INFO o.a.j.s.FileServer: Default base=&#39;C:\\Users\\alex\\Desktop\\all jmeter stuff\\apache-jmeter-5.6.2\\bin&#39;\r\n2023-07-12 18:28:32,829 INFO o.a.j.s.FileServer: Set new base=&#39;C:\\Users\\alex\\Desktop\\all jmeter stuff\\jmeter test plan jmx files&#39;\r\n2023-07-12 18:28:32,926 INFO o.a.j.s.SaveService: Testplan (JMX) version: 2.2. Testlog (JTL) version: 2.2\r\n2023-07-12 18:28:32,941 INFO o.a.j.s.SaveService: Using SaveService properties version 5.0\r\n2023-07-12 18:28:32,944 INFO o.a.j.s.SaveService: Using SaveService properties file encoding UTF-8\r\n2023-07-12 18:28:32,946 INFO o.a.j.s.SaveService: Loading file: C:\\Users\\alex\\Desktop\\all jmeter stuff\\jmeter test plan jmx files\\MQ-Sender-Receiver-Plan_no_diode - Copy.jmx\r\n2023-07-12 18:28:33,010 INFO o.a.j.JMeter: Creating summariser &lt;summary&gt;\r\n2023-07-12 18:28:33,020 INFO o.a.j.e.StandardJMeterEngine: Running the test!\r\n2023-07-12 18:28:33,021 INFO o.a.j.s.SampleEvent: List of sample_variables: []\r\n2023-07-12 18:28:33,021 INFO o.a.j.s.SampleEvent: List of sample_variables: []\r\n2023-07-12 18:28:33,028 INFO o.a.j.e.u.CompoundVariable: Note: Function class names must contain the string: &#39;.functions.&#39;\r\n2023-07-12 18:28:33,028 INFO o.a.j.e.u.CompoundVariable: Note: Function class names must not contain the string: &#39;.gui.&#39;\r\n2023-07-12 18:28:33,225 INFO o.a.j.t.TestPlan: added C:\\Users\\alex\\Desktop\\all jmeter stuff\\apache-jmeter-5.6.2\\lib\\mqjars\\com.ibm.mq.allclient.jar to classpath\r\n2023-07-12 18:28:33,225 INFO o.a.j.t.TestPlan: added C:\\Users\\alex\\Desktop\\all jmeter stuff\\apache-jmeter-5.6.2\\lib\\mqjars\\jms.jar to classpath\r\n2023-07-12 18:28:33,226 INFO o.a.j.t.TestPlan: added C:\\Users\\alex\\Desktop\\all jmeter stuff\\apache-jmeter-5.6.2\\lib\\mqjars\\org.json.jar to classpath\r\n2023-07-12 18:28:33,434 INFO o.a.j.JMeter: Running test (1689157713434)\r\n2023-07-12 18:28:33,435 INFO o.a.j.e.StandardJMeterEngine: Starting setUp thread groups\r\n2023-07-12 18:28:33,435 INFO o.a.j.e.StandardJMeterEngine: Starting setUp ThreadGroup: 1 : setUp  Thread Group (Sender Connections) \r\n2023-07-12 18:28:33,435 INFO o.a.j.e.StandardJMeterEngine: Starting 1 threads for group setUp  Thread Group (Sender Connections).\r\n2023-07-12 18:28:33,435 INFO o.a.j.e.StandardJMeterEngine: Test will stop abruptly on error\r\n2023-07-12 18:28:33,435 INFO o.a.j.t.ThreadGroup: Starting thread group... number=1 threads=1 ramp-up=1 delayedStart=false\r\n2023-07-12 18:28:33,438 INFO o.a.j.t.ThreadGroup: Started thread group number 1\r\n2023-07-12 18:28:33,438 INFO o.a.j.e.StandardJMeterEngine: Starting setUp ThreadGroup: 2 : setUp Thread Group (Receiver Connections) \r\n2023-07-12 18:28:33,438 INFO o.a.j.e.StandardJMeterEngine: Starting 1 threads for group setUp Thread Group (Receiver Connections).\r\n2023-07-12 18:28:33,438 INFO o.a.j.e.StandardJMeterEngine: Thread will continue on error\r\n2023-07-12 18:28:33,438 INFO o.a.j.t.ThreadGroup: Starting thread group... number=2 threads=1 ramp-up=1 delayedStart=false\r\n2023-07-12 18:28:33,440 INFO o.a.j.t.ThreadGroup: Started thread group number 2\r\n2023-07-12 18:28:33,441 INFO o.a.j.e.StandardJMeterEngine: Waiting for all setup thread groups to exit\r\n2023-07-12 18:28:33,444 INFO o.a.j.t.JMeterThread: Thread started: setUp Thread Group (Receiver Connections) 2-1\r\n2023-07-12 18:28:33,444 INFO o.a.j.t.JMeterThread: Thread started: setUp  Thread Group (Sender Connections) 1-1\r\n2023-07-12 18:28:33,446 INFO o.a.j.s.SampleResult: Note: Sample TimeStamps are START times\r\n2023-07-12 18:28:33,446 INFO o.a.j.s.SampleResult: sampleresult.default.encoding is set to UTF-8\r\n2023-07-12 18:28:33,446 INFO o.a.j.s.SampleResult: sampleresult.useNanoTime=true\r\n2023-07-12 18:28:33,446 INFO o.a.j.s.SampleResult: sampleresult.nanoThreadSleep=5000\r\n2023-07-12 18:28:34,740 INFO o.a.j.p.j.s.J.Create Sender Connections to Queue Manager: ####### Sender connection #0 to queue manager QM1 established.\r\n2023-07-12 18:28:34,740 INFO o.a.j.p.j.s.J.Create Receiver Connections to Queue Manager: ####### Receiver connection #0 to queue manager QM1 established.\r\n2023-07-12 18:28:34,752 INFO o.a.j.t.JMeterThread: Thread is done: setUp  Thread Group (Sender Connections) 1-1\r\n2023-07-12 18:28:34,752 INFO o.a.j.t.JMeterThread: Thread finished: setUp  Thread Group (Sender Connections) 1-1\r\n2023-07-12 18:28:34,753 INFO o.a.j.r.Summariser: summary +      1 in 00:00:01 =    0.8/s Avg:  1303 Min:  1303 Max:  1303 Err:     0 (0.00%) Active: 1 Started: 2 Finished: 1\r\n2023-07-12 18:28:34,753 INFO o.a.j.t.JMeterThread: Thread is done: setUp Thread Group (Receiver Connections) 2-1\r\n2023-07-12 18:28:34,753 INFO o.a.j.t.JMeterThread: Thread finished: setUp Thread Group (Receiver Connections) 2-1\r\n2023-07-12 18:28:34,754 INFO o.a.j.e.StandardJMeterEngine: All Setup Threads have ended\r\n2023-07-12 18:28:34,770 INFO o.a.j.e.StandardJMeterEngine: Starting ThreadGroup: 1 : Senders\r\n2023-07-12 18:28:34,770 INFO o.a.j.e.StandardJMeterEngine: Starting 1 threads for group Senders.\r\n2023-07-12 18:28:34,770 INFO o.a.j.e.StandardJMeterEngine: Test will stop abruptly on error\r\n2023-07-12 18:28:34,770 INFO o.a.j.t.ThreadGroup: Starting thread group... number=1 threads=1 ramp-up=1 delayedStart=false\r\n2023-07-12 18:28:34,771 INFO o.a.j.t.ThreadGroup: Started thread group number 1\r\n2023-07-12 18:28:34,771 INFO o.a.j.e.StandardJMeterEngine: Starting ThreadGroup: 2 : Receivers\r\n2023-07-12 18:28:34,771 INFO o.a.j.e.StandardJMeterEngine: Starting 1 threads for group Receivers.\r\n2023-07-12 18:28:34,771 INFO o.a.j.e.StandardJMeterEngine: Thread will continue on error\r\n2023-07-12 18:28:34,771 INFO o.a.j.t.ThreadGroup: Starting thread group... number=2 threads=1 ramp-up=1 delayedStart=false\r\n2023-07-12 18:28:34,772 INFO o.a.j.t.JMeterThread: Thread started: Senders 1-1\r\n2023-07-12 18:28:34,772 INFO o.a.j.t.ThreadGroup: Started thread group number 2\r\n2023-07-12 18:28:34,772 INFO o.a.j.e.StandardJMeterEngine: All thread groups have been started\r\n2023-07-12 18:28:34,773 INFO o.a.j.t.JMeterThread: Thread started: Receivers 2-1\r\n2023-07-12 18:29:00,002 INFO o.a.j.r.Summariser: summary +   4986 in 00:00:25 =  197.5/s Avg:     2 Min:     1 Max:  1303 Err:     0 (0.00%) Active: 2 Started: 2 Finished: 0\r\n2023-07-12 18:29:00,003 INFO o.a.j.r.Summariser: summary =   4987 in 00:00:27 =  187.7/s Avg:     3 Min:     1 Max:  1303 Err:     0 (0.00%)\r\n2023-07-12 18:29:30,002 INFO o.a.j.r.Summariser: summary +   6000 in 00:00:30 =  200.0/s Avg:     2 Min:     1 Max:     9 Err:     0 (0.00%) Active: 2 Started: 2 Finished: 0\r\n2023-07-12 18:29:30,003 INFO o.a.j.r.Summariser: summary =  10987 in 00:00:57 =  194.2/s Avg:     2 Min:     1 Max:  1303 Err:     0 (0.00%)\r\n2023-07-12 18:29:34,771 INFO o.a.j.t.JMeterThread: Stopping because end time detected by thread: Senders 1-1\r\n2023-07-12 18:29:34,772 INFO o.a.j.t.JMeterThread: Thread finished: Senders 1-1\r\n2023-07-12 18:29:39,809 INFO o.a.j.p.j.s.J.Receive Messages: ############ consumer.receive timed out (timeout value: 5000)\r\n2023-07-12 18:29:44,823 INFO o.a.j.p.j.s.J.Receive Messages: ############ consumer.receive timed out (timeout value: 5000)\r\n2023-07-12 18:29:49,837 INFO o.a.j.p.j.s.J.Receive Messages: ############ consumer.receive timed out (timeout value: 5000)\r\n2023-07-12 18:29:54,852 INFO o.a.j.p.j.s.J.Receive Messages: ############ consumer.receive timed out (timeout value: 5000)\r\n2023-07-12 18:29:59,870 INFO o.a.j.p.j.s.J.Receive Messages: ############ consumer.receive timed out (timeout value: 5000)\r\n2023-07-12 18:30:04,886 INFO o.a.j.p.j.s.J.Receive Messages: ############ consumer.receive timed out (timeout value: 5000)\r\n2023-07-12 18:30:04,886 INFO o.a.j.r.Summariser: summary +    961 in 00:00:35 =   27.5/s Avg:    33 Min:     1 Max:  5031 Err:     6 (0.62%) Active: 1 Started: 2 Finished: 1\r\n2023-07-12 18:30:04,888 INFO o.a.j.r.Summariser: summary =  11948 in 00:01:31 =  130.6/s Avg:     5 Min:     1 Max:  5031 Err:     6 (0.05%)\r\n2023-07-12 18:30:09,903 INFO o.a.j.p.j.s.J.Receive Messages: ############ consumer.receive timed out (timeout value: 5000)\r\n2023-07-12 18:30:14,915 INFO o.a.j.p.j.s.J.Receive Messages: ############ consumer.receive timed out (timeout value: 5000)\r\n2023-07-12 18:30:19,929 INFO o.a.j.p.j.s.J.Receive Messages: ############ consumer.receive timed out (timeout value: 5000)\r\n2023-07-12 18:30:24,946 INFO o.a.j.p.j.s.J.Receive Messages: ############ consumer.receive timed out (timeout value: 5000)\r\n2023-07-12 18:30:29,961 INFO o.a.j.p.j.s.J.Receive Messages: ############ consumer.receive timed out (timeout value: 5000)\r\n2023-07-12 18:30:34,982 INFO o.a.j.p.j.s.J.Receive Messages: ############ consumer.receive timed out (timeout value: 5000)\r\n2023-07-12 18:30:34,983 INFO o.a.j.r.Summariser: summary +      6 in 00:00:30 =    0.2/s Avg:  5015 Min:  5012 Max:  5020 Err:     6 (100.00%) Active: 1 Started: 2 Finished: 1\r\n2023-07-12 18:30:34,984 INFO o.a.j.r.Summariser: summary =  11954 in 00:02:02 =   98.3/s Avg:     7 Min:     1 Max:  5031 Err:    12 (0.10%)\r\n2023-07-12 18:30:34,985 INFO o.a.j.t.JMeterThread: Stopping because end time detected by thread: Receivers 2-1\r\n2023-07-12 18:30:34,986 INFO o.a.j.t.JMeterThread: Thread finished: Receivers 2-1\r\n2023-07-12 18:30:34,986 INFO o.a.j.e.StandardJMeterEngine: Starting tearDown thread groups\r\n2023-07-12 18:30:34,986 INFO o.a.j.e.StandardJMeterEngine: Starting tearDown ThreadGroup: 1 : tearDown Thread Group (Sender Connections)\r\n2023-07-12 18:30:34,986 INFO o.a.j.e.StandardJMeterEngine: Starting 1 threads for group tearDown Thread Group (Sender Connections).\r\n2023-07-12 18:30:34,986 INFO o.a.j.e.StandardJMeterEngine: Test will stop abruptly on error\r\n2023-07-12 18:30:34,987 INFO o.a.j.t.ThreadGroup: Starting thread group... number=1 threads=1 ramp-up=1 delayedStart=false\r\n2023-07-12 18:30:34,989 INFO o.a.j.t.ThreadGroup: Started thread group number 1\r\n2023-07-12 18:30:34,989 INFO o.a.j.e.StandardJMeterEngine: Starting tearDown ThreadGroup: 2 : tearDown Thread Group (Receiver Connections)\r\n2023-07-12 18:30:34,989 INFO o.a.j.e.StandardJMeterEngine: Starting 1 threads for group tearDown Thread Group (Receiver Connections).\r\n2023-07-12 18:30:34,990 INFO o.a.j.e.StandardJMeterEngine: Thread will continue on error\r\n2023-07-12 18:30:34,990 INFO o.a.j.t.ThreadGroup: Starting thread group... number=2 threads=1 ramp-up=1 delayedStart=false\r\n2023-07-12 18:30:34,990 INFO o.a.j.t.JMeterThread: Thread started: tearDown Thread Group (Sender Connections) 1-1\r\n2023-07-12 18:30:34,991 INFO o.a.j.t.ThreadGroup: Started thread group number 2\r\n2023-07-12 18:30:34,991 INFO o.a.j.t.JMeterThread: Thread started: tearDown Thread Group (Receiver Connections) 2-1\r\n2023-07-12 18:30:35,042 INFO o.a.j.p.j.s.J.Close Receiver Connections: ###### Receiver Connection Closed\r\n2023-07-12 18:30:35,042 INFO o.a.j.p.j.s.J.Close Sender Connections: ###### Sender Connection closed\r\n2023-07-12 18:30:35,043 INFO o.a.j.t.JMeterThread: Thread is done: tearDown Thread Group (Sender Connections) 1-1\r\n2023-07-12 18:30:35,043 INFO o.a.j.t.JMeterThread: Thread is done: tearDown Thread Group (Receiver Connections) 2-1\r\n2023-07-12 18:30:35,043 INFO o.a.j.t.JMeterThread: Thread finished: tearDown Thread Group (Sender Connections) 1-1\r\n2023-07-12 18:30:35,043 INFO o.a.j.t.JMeterThread: Thread finished: tearDown Thread Group (Receiver Connections) 2-1\r\n2023-07-12 18:30:35,043 INFO o.a.j.e.StandardJMeterEngine: Notifying test listeners of end of test\r\n2023-07-12 18:30:35,048 INFO o.a.j.r.Summariser: summary +      2 in 00:00:00 =   30.8/s Avg:    50 Min:    49 Max:    51 Err:     0 (0.00%) Active: 0 Started: 2 Finished: 2\r\n2023-07-12 18:30:35,049 INFO o.a.j.r.Summariser: summary =  11956 in 00:02:02 =   98.3/s Avg:     7 Min:     1 Max:  5031 Err:    12 (0.10%)\r\n\r\n```","title":"Jmeter MQ GUI is working properly but cli summary showing error. Aggregate report shows different result","body":"<p>Hi I am new to Jmeter and I am trying to use Jmeter to do some performance testing on IBM MQ docker.</p>\n<p>I have setup IBM MQ docker following this:</p>\n<p><a href=\"https://developer.ibm.com/tutorials/mq-connect-app-queue-manager-containers/\" rel=\"nofollow noreferrer\">https://developer.ibm.com/tutorials/mq-connect-app-queue-manager-containers/</a></p>\n<p>My apps can consume and publish to the broker so its working fine.</p>\n<p>I am trying out Jmeter for performance testing and I have setup the Jmeter(5.6.2) with the jmx file provided following the pdf guide.</p>\n<p><a href=\"https://github.com/ibm-messaging/mqperf/tree/gh-pages/jmeter\" rel=\"nofollow noreferrer\">https://github.com/ibm-messaging/mqperf/tree/gh-pages/jmeter</a></p>\n<p>After running the GUI, it seems working fine.\n<a href=\"https://i.stack.imgur.com/BZCFw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BZCFw.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/loHD3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/loHD3.png\" alt=\"enter image description here\" /></a></p>\n<p>But when I run it in cli, it seem to be giving me errors. And the result seems weird by having more received msg than send. It could be due to retry but I am not sure. The following is the command I used:</p>\n<pre><code>jmeter.bat -n -t &quot;C:\\Users\\alex\\Desktop\\all jmeter stuff\\jmeter test plan jmx files\\MQ-Sender-Receiver-Plan.jmx&quot; -l &quot;C:\\Users\\alex\\Desktop\\all jmeter stuff\\jmeter test plan jmx files\\results.jtl&quot; -j &quot;C:\\Users\\alex\\Desktop\\all jmeter stuff\\jmeter test plan jmx files\\log.jtl&quot;\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/dVhcP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dVhcP.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/koTDB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/koTDB.png\" alt=\"enter image description here\" /></a></p>\n<p>I have the cli logs here. Thanks in advance for any helps!</p>\n<pre><code>2023-07-12 18:28:32,787 INFO o.a.j.u.JMeterUtils: Setting Locale to en_EN\n2023-07-12 18:28:32,799 INFO o.a.j.JMeter: Loading user properties from: user.properties\n2023-07-12 18:28:32,799 INFO o.a.j.JMeter: Loading system properties from: system.properties\n2023-07-12 18:28:32,804 INFO o.a.j.JMeter: Copyright (c) 1998-2023 The Apache Software Foundation\n2023-07-12 18:28:32,804 INFO o.a.j.JMeter: Version 5.6.2\n2023-07-12 18:28:32,804 INFO o.a.j.JMeter: java.version=11.0.19\n2023-07-12 18:28:32,804 INFO o.a.j.JMeter: java.vm.name=Java HotSpot(TM) 64-Bit Server VM\n2023-07-12 18:28:32,804 INFO o.a.j.JMeter: os.name=Windows 10\n2023-07-12 18:28:32,804 INFO o.a.j.JMeter: os.arch=amd64\n2023-07-12 18:28:32,804 INFO o.a.j.JMeter: os.version=10.0\n2023-07-12 18:28:32,813 INFO o.a.j.JMeter: file.encoding=Cp1252\n2023-07-12 18:28:32,813 INFO o.a.j.JMeter: java.awt.headless=true\n2023-07-12 18:28:32,813 INFO o.a.j.JMeter: Max memory     =4294967296\n2023-07-12 18:28:32,813 INFO o.a.j.JMeter: Available Processors =12\n2023-07-12 18:28:32,818 INFO o.a.j.JMeter: Default Locale=English (EN)\n2023-07-12 18:28:32,818 INFO o.a.j.JMeter: JMeter  Locale=English (EN)\n2023-07-12 18:28:32,818 INFO o.a.j.JMeter: JMeterHome=C:\\Users\\alex\\Desktop\\all jmeter stuff\\apache-jmeter-5.6.2\n2023-07-12 18:28:32,818 INFO o.a.j.JMeter: user.dir  =C:\\Users\\alex\\Desktop\\all jmeter stuff\\apache-jmeter-5.6.2\\bin\n2023-07-12 18:28:32,818 INFO o.a.j.JMeter: PWD       =C:\\Users\\alex\\Desktop\\all jmeter stuff\\apache-jmeter-5.6.2\\bin\n2023-07-12 18:28:32,819 INFO o.a.j.JMeter: IP: 202.188.100.169 Name: P_IFSLT2650 FullName: parkview-100-169.tm.net.my\n2023-07-12 18:28:32,828 INFO o.a.j.s.FileServer: Default base='C:\\Users\\alex\\Desktop\\all jmeter stuff\\apache-jmeter-5.6.2\\bin'\n2023-07-12 18:28:32,829 INFO o.a.j.s.FileServer: Set new base='C:\\Users\\alex\\Desktop\\all jmeter stuff\\jmeter test plan jmx files'\n2023-07-12 18:28:32,926 INFO o.a.j.s.SaveService: Testplan (JMX) version: 2.2. Testlog (JTL) version: 2.2\n2023-07-12 18:28:32,941 INFO o.a.j.s.SaveService: Using SaveService properties version 5.0\n2023-07-12 18:28:32,944 INFO o.a.j.s.SaveService: Using SaveService properties file encoding UTF-8\n2023-07-12 18:28:32,946 INFO o.a.j.s.SaveService: Loading file: C:\\Users\\alex\\Desktop\\all jmeter stuff\\jmeter test plan jmx files\\MQ-Sender-Receiver-Plan_no_diode - Copy.jmx\n2023-07-12 18:28:33,010 INFO o.a.j.JMeter: Creating summariser &lt;summary&gt;\n2023-07-12 18:28:33,020 INFO o.a.j.e.StandardJMeterEngine: Running the test!\n2023-07-12 18:28:33,021 INFO o.a.j.s.SampleEvent: List of sample_variables: []\n2023-07-12 18:28:33,021 INFO o.a.j.s.SampleEvent: List of sample_variables: []\n2023-07-12 18:28:33,028 INFO o.a.j.e.u.CompoundVariable: Note: Function class names must contain the string: '.functions.'\n2023-07-12 18:28:33,028 INFO o.a.j.e.u.CompoundVariable: Note: Function class names must not contain the string: '.gui.'\n2023-07-12 18:28:33,225 INFO o.a.j.t.TestPlan: added C:\\Users\\alex\\Desktop\\all jmeter stuff\\apache-jmeter-5.6.2\\lib\\mqjars\\com.ibm.mq.allclient.jar to classpath\n2023-07-12 18:28:33,225 INFO o.a.j.t.TestPlan: added C:\\Users\\alex\\Desktop\\all jmeter stuff\\apache-jmeter-5.6.2\\lib\\mqjars\\jms.jar to classpath\n2023-07-12 18:28:33,226 INFO o.a.j.t.TestPlan: added C:\\Users\\alex\\Desktop\\all jmeter stuff\\apache-jmeter-5.6.2\\lib\\mqjars\\org.json.jar to classpath\n2023-07-12 18:28:33,434 INFO o.a.j.JMeter: Running test (1689157713434)\n2023-07-12 18:28:33,435 INFO o.a.j.e.StandardJMeterEngine: Starting setUp thread groups\n2023-07-12 18:28:33,435 INFO o.a.j.e.StandardJMeterEngine: Starting setUp ThreadGroup: 1 : setUp  Thread Group (Sender Connections) \n2023-07-12 18:28:33,435 INFO o.a.j.e.StandardJMeterEngine: Starting 1 threads for group setUp  Thread Group (Sender Connections).\n2023-07-12 18:28:33,435 INFO o.a.j.e.StandardJMeterEngine: Test will stop abruptly on error\n2023-07-12 18:28:33,435 INFO o.a.j.t.ThreadGroup: Starting thread group... number=1 threads=1 ramp-up=1 delayedStart=false\n2023-07-12 18:28:33,438 INFO o.a.j.t.ThreadGroup: Started thread group number 1\n2023-07-12 18:28:33,438 INFO o.a.j.e.StandardJMeterEngine: Starting setUp ThreadGroup: 2 : setUp Thread Group (Receiver Connections) \n2023-07-12 18:28:33,438 INFO o.a.j.e.StandardJMeterEngine: Starting 1 threads for group setUp Thread Group (Receiver Connections).\n2023-07-12 18:28:33,438 INFO o.a.j.e.StandardJMeterEngine: Thread will continue on error\n2023-07-12 18:28:33,438 INFO o.a.j.t.ThreadGroup: Starting thread group... number=2 threads=1 ramp-up=1 delayedStart=false\n2023-07-12 18:28:33,440 INFO o.a.j.t.ThreadGroup: Started thread group number 2\n2023-07-12 18:28:33,441 INFO o.a.j.e.StandardJMeterEngine: Waiting for all setup thread groups to exit\n2023-07-12 18:28:33,444 INFO o.a.j.t.JMeterThread: Thread started: setUp Thread Group (Receiver Connections) 2-1\n2023-07-12 18:28:33,444 INFO o.a.j.t.JMeterThread: Thread started: setUp  Thread Group (Sender Connections) 1-1\n2023-07-12 18:28:33,446 INFO o.a.j.s.SampleResult: Note: Sample TimeStamps are START times\n2023-07-12 18:28:33,446 INFO o.a.j.s.SampleResult: sampleresult.default.encoding is set to UTF-8\n2023-07-12 18:28:33,446 INFO o.a.j.s.SampleResult: sampleresult.useNanoTime=true\n2023-07-12 18:28:33,446 INFO o.a.j.s.SampleResult: sampleresult.nanoThreadSleep=5000\n2023-07-12 18:28:34,740 INFO o.a.j.p.j.s.J.Create Sender Connections to Queue Manager: ####### Sender connection #0 to queue manager QM1 established.\n2023-07-12 18:28:34,740 INFO o.a.j.p.j.s.J.Create Receiver Connections to Queue Manager: ####### Receiver connection #0 to queue manager QM1 established.\n2023-07-12 18:28:34,752 INFO o.a.j.t.JMeterThread: Thread is done: setUp  Thread Group (Sender Connections) 1-1\n2023-07-12 18:28:34,752 INFO o.a.j.t.JMeterThread: Thread finished: setUp  Thread Group (Sender Connections) 1-1\n2023-07-12 18:28:34,753 INFO o.a.j.r.Summariser: summary +      1 in 00:00:01 =    0.8/s Avg:  1303 Min:  1303 Max:  1303 Err:     0 (0.00%) Active: 1 Started: 2 Finished: 1\n2023-07-12 18:28:34,753 INFO o.a.j.t.JMeterThread: Thread is done: setUp Thread Group (Receiver Connections) 2-1\n2023-07-12 18:28:34,753 INFO o.a.j.t.JMeterThread: Thread finished: setUp Thread Group (Receiver Connections) 2-1\n2023-07-12 18:28:34,754 INFO o.a.j.e.StandardJMeterEngine: All Setup Threads have ended\n2023-07-12 18:28:34,770 INFO o.a.j.e.StandardJMeterEngine: Starting ThreadGroup: 1 : Senders\n2023-07-12 18:28:34,770 INFO o.a.j.e.StandardJMeterEngine: Starting 1 threads for group Senders.\n2023-07-12 18:28:34,770 INFO o.a.j.e.StandardJMeterEngine: Test will stop abruptly on error\n2023-07-12 18:28:34,770 INFO o.a.j.t.ThreadGroup: Starting thread group... number=1 threads=1 ramp-up=1 delayedStart=false\n2023-07-12 18:28:34,771 INFO o.a.j.t.ThreadGroup: Started thread group number 1\n2023-07-12 18:28:34,771 INFO o.a.j.e.StandardJMeterEngine: Starting ThreadGroup: 2 : Receivers\n2023-07-12 18:28:34,771 INFO o.a.j.e.StandardJMeterEngine: Starting 1 threads for group Receivers.\n2023-07-12 18:28:34,771 INFO o.a.j.e.StandardJMeterEngine: Thread will continue on error\n2023-07-12 18:28:34,771 INFO o.a.j.t.ThreadGroup: Starting thread group... number=2 threads=1 ramp-up=1 delayedStart=false\n2023-07-12 18:28:34,772 INFO o.a.j.t.JMeterThread: Thread started: Senders 1-1\n2023-07-12 18:28:34,772 INFO o.a.j.t.ThreadGroup: Started thread group number 2\n2023-07-12 18:28:34,772 INFO o.a.j.e.StandardJMeterEngine: All thread groups have been started\n2023-07-12 18:28:34,773 INFO o.a.j.t.JMeterThread: Thread started: Receivers 2-1\n2023-07-12 18:29:00,002 INFO o.a.j.r.Summariser: summary +   4986 in 00:00:25 =  197.5/s Avg:     2 Min:     1 Max:  1303 Err:     0 (0.00%) Active: 2 Started: 2 Finished: 0\n2023-07-12 18:29:00,003 INFO o.a.j.r.Summariser: summary =   4987 in 00:00:27 =  187.7/s Avg:     3 Min:     1 Max:  1303 Err:     0 (0.00%)\n2023-07-12 18:29:30,002 INFO o.a.j.r.Summariser: summary +   6000 in 00:00:30 =  200.0/s Avg:     2 Min:     1 Max:     9 Err:     0 (0.00%) Active: 2 Started: 2 Finished: 0\n2023-07-12 18:29:30,003 INFO o.a.j.r.Summariser: summary =  10987 in 00:00:57 =  194.2/s Avg:     2 Min:     1 Max:  1303 Err:     0 (0.00%)\n2023-07-12 18:29:34,771 INFO o.a.j.t.JMeterThread: Stopping because end time detected by thread: Senders 1-1\n2023-07-12 18:29:34,772 INFO o.a.j.t.JMeterThread: Thread finished: Senders 1-1\n2023-07-12 18:29:39,809 INFO o.a.j.p.j.s.J.Receive Messages: ############ consumer.receive timed out (timeout value: 5000)\n2023-07-12 18:29:44,823 INFO o.a.j.p.j.s.J.Receive Messages: ############ consumer.receive timed out (timeout value: 5000)\n2023-07-12 18:29:49,837 INFO o.a.j.p.j.s.J.Receive Messages: ############ consumer.receive timed out (timeout value: 5000)\n2023-07-12 18:29:54,852 INFO o.a.j.p.j.s.J.Receive Messages: ############ consumer.receive timed out (timeout value: 5000)\n2023-07-12 18:29:59,870 INFO o.a.j.p.j.s.J.Receive Messages: ############ consumer.receive timed out (timeout value: 5000)\n2023-07-12 18:30:04,886 INFO o.a.j.p.j.s.J.Receive Messages: ############ consumer.receive timed out (timeout value: 5000)\n2023-07-12 18:30:04,886 INFO o.a.j.r.Summariser: summary +    961 in 00:00:35 =   27.5/s Avg:    33 Min:     1 Max:  5031 Err:     6 (0.62%) Active: 1 Started: 2 Finished: 1\n2023-07-12 18:30:04,888 INFO o.a.j.r.Summariser: summary =  11948 in 00:01:31 =  130.6/s Avg:     5 Min:     1 Max:  5031 Err:     6 (0.05%)\n2023-07-12 18:30:09,903 INFO o.a.j.p.j.s.J.Receive Messages: ############ consumer.receive timed out (timeout value: 5000)\n2023-07-12 18:30:14,915 INFO o.a.j.p.j.s.J.Receive Messages: ############ consumer.receive timed out (timeout value: 5000)\n2023-07-12 18:30:19,929 INFO o.a.j.p.j.s.J.Receive Messages: ############ consumer.receive timed out (timeout value: 5000)\n2023-07-12 18:30:24,946 INFO o.a.j.p.j.s.J.Receive Messages: ############ consumer.receive timed out (timeout value: 5000)\n2023-07-12 18:30:29,961 INFO o.a.j.p.j.s.J.Receive Messages: ############ consumer.receive timed out (timeout value: 5000)\n2023-07-12 18:30:34,982 INFO o.a.j.p.j.s.J.Receive Messages: ############ consumer.receive timed out (timeout value: 5000)\n2023-07-12 18:30:34,983 INFO o.a.j.r.Summariser: summary +      6 in 00:00:30 =    0.2/s Avg:  5015 Min:  5012 Max:  5020 Err:     6 (100.00%) Active: 1 Started: 2 Finished: 1\n2023-07-12 18:30:34,984 INFO o.a.j.r.Summariser: summary =  11954 in 00:02:02 =   98.3/s Avg:     7 Min:     1 Max:  5031 Err:    12 (0.10%)\n2023-07-12 18:30:34,985 INFO o.a.j.t.JMeterThread: Stopping because end time detected by thread: Receivers 2-1\n2023-07-12 18:30:34,986 INFO o.a.j.t.JMeterThread: Thread finished: Receivers 2-1\n2023-07-12 18:30:34,986 INFO o.a.j.e.StandardJMeterEngine: Starting tearDown thread groups\n2023-07-12 18:30:34,986 INFO o.a.j.e.StandardJMeterEngine: Starting tearDown ThreadGroup: 1 : tearDown Thread Group (Sender Connections)\n2023-07-12 18:30:34,986 INFO o.a.j.e.StandardJMeterEngine: Starting 1 threads for group tearDown Thread Group (Sender Connections).\n2023-07-12 18:30:34,986 INFO o.a.j.e.StandardJMeterEngine: Test will stop abruptly on error\n2023-07-12 18:30:34,987 INFO o.a.j.t.ThreadGroup: Starting thread group... number=1 threads=1 ramp-up=1 delayedStart=false\n2023-07-12 18:30:34,989 INFO o.a.j.t.ThreadGroup: Started thread group number 1\n2023-07-12 18:30:34,989 INFO o.a.j.e.StandardJMeterEngine: Starting tearDown ThreadGroup: 2 : tearDown Thread Group (Receiver Connections)\n2023-07-12 18:30:34,989 INFO o.a.j.e.StandardJMeterEngine: Starting 1 threads for group tearDown Thread Group (Receiver Connections).\n2023-07-12 18:30:34,990 INFO o.a.j.e.StandardJMeterEngine: Thread will continue on error\n2023-07-12 18:30:34,990 INFO o.a.j.t.ThreadGroup: Starting thread group... number=2 threads=1 ramp-up=1 delayedStart=false\n2023-07-12 18:30:34,990 INFO o.a.j.t.JMeterThread: Thread started: tearDown Thread Group (Sender Connections) 1-1\n2023-07-12 18:30:34,991 INFO o.a.j.t.ThreadGroup: Started thread group number 2\n2023-07-12 18:30:34,991 INFO o.a.j.t.JMeterThread: Thread started: tearDown Thread Group (Receiver Connections) 2-1\n2023-07-12 18:30:35,042 INFO o.a.j.p.j.s.J.Close Receiver Connections: ###### Receiver Connection Closed\n2023-07-12 18:30:35,042 INFO o.a.j.p.j.s.J.Close Sender Connections: ###### Sender Connection closed\n2023-07-12 18:30:35,043 INFO o.a.j.t.JMeterThread: Thread is done: tearDown Thread Group (Sender Connections) 1-1\n2023-07-12 18:30:35,043 INFO o.a.j.t.JMeterThread: Thread is done: tearDown Thread Group (Receiver Connections) 2-1\n2023-07-12 18:30:35,043 INFO o.a.j.t.JMeterThread: Thread finished: tearDown Thread Group (Sender Connections) 1-1\n2023-07-12 18:30:35,043 INFO o.a.j.t.JMeterThread: Thread finished: tearDown Thread Group (Receiver Connections) 2-1\n2023-07-12 18:30:35,043 INFO o.a.j.e.StandardJMeterEngine: Notifying test listeners of end of test\n2023-07-12 18:30:35,048 INFO o.a.j.r.Summariser: summary +      2 in 00:00:00 =   30.8/s Avg:    50 Min:    49 Max:    51 Err:     0 (0.00%) Active: 0 Started: 2 Finished: 2\n2023-07-12 18:30:35,049 INFO o.a.j.r.Summariser: summary =  11956 in 00:02:02 =   98.3/s Avg:     7 Min:     1 Max:  5031 Err:    12 (0.10%)\n\n</code></pre>\n"},{"tags":["java","hibernate","auto-increment"],"answers":[{"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"down_vote_count":1,"up_vote_count":185,"is_accepted":true,"score":184,"last_activity_date":1488296253,"creation_date":1262763942,"answer_id":2011544,"question_id":2011528,"body_markdown":"    @Id\r\n    @GeneratedValue(strategy=GenerationType.AUTO)\r\n    private int id;\r\n\r\nand you leave it `null` (`0`) when persisting. (`null` if you use the `Integer` / `Long` wrappers)\r\n\r\nIn some cases the `AUTO` strategy is resolved to `SEQUENCE` rathen than to `IDENTITY` or `TABLE`, so you might want to manually set it to `IDENTITY` or `TABLE` (depending on the underlying database).\r\n\r\nIt seems __`SEQUENCE`__ + __specifying the sequence name__ worked for you.","title":"Hibernate Auto Increment ID","body":"<pre><code>@Id\n@GeneratedValue(strategy=GenerationType.AUTO)\nprivate int id;\n</code></pre>\n\n<p>and you leave it <code>null</code> (<code>0</code>) when persisting. (<code>null</code> if you use the <code>Integer</code> / <code>Long</code> wrappers)</p>\n\n<p>In some cases the <code>AUTO</code> strategy is resolved to <code>SEQUENCE</code> rathen than to <code>IDENTITY</code> or <code>TABLE</code>, so you might want to manually set it to <code>IDENTITY</code> or <code>TABLE</code> (depending on the underlying database).</p>\n\n<p>It seems <strong><code>SEQUENCE</code></strong> + <strong>specifying the sequence name</strong> worked for you.</p>\n"},{"tags":[],"owner":{"account_id":203256,"reputation":7026,"user_id":450812,"accept_rate":83,"display_name":"alfonx"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1689159720,"creation_date":1296809537,"answer_id":4896112,"question_id":2011528,"body_markdown":"If you have a numeric column that you want to auto-increment, it might be an option to set `columnDefinition` directly. This has the advantage, that the schema auto-generates the value even if it is used without hibernate. This might make your code db-specific though:\r\n\r\n    import javax.persistence.Column;\r\n    @Column(columnDefinition = &quot;serial&quot;) // PostgreSQL\r\n    @Column(columnDefinition = &quot;integer auto_increment&quot;) // MySql\r\n","title":"Hibernate Auto Increment ID","body":"<p>If you have a numeric column that you want to auto-increment, it might be an option to set <code>columnDefinition</code> directly. This has the advantage, that the schema auto-generates the value even if it is used without hibernate. This might make your code db-specific though:</p>\n<pre><code>import javax.persistence.Column;\n@Column(columnDefinition = &quot;serial&quot;) // PostgreSQL\n@Column(columnDefinition = &quot;integer auto_increment&quot;) // MySql\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1138237,"reputation":6479,"user_id":1122841,"accept_rate":57,"display_name":"Kaushik Lele"},"down_vote_count":0,"up_vote_count":35,"is_accepted":false,"score":35,"last_activity_date":1334840824,"creation_date":1334840824,"answer_id":10228759,"question_id":2011528,"body_markdown":"Do it as follows :-\r\n\r\n    @Id\r\n    @GenericGenerator(name=&quot;kaugen&quot; , strategy=&quot;increment&quot;)\r\n    @GeneratedValue(generator=&quot;kaugen&quot;)\r\n    @Column(name=&quot;proj_id&quot;)\r\n      public Integer getId() {\r\n        return id;\r\n     }\r\n\r\nYou can use any arbitrary name instead of kaugen.\r\nIt worked well, I could see below queries on console\r\n\r\n    Hibernate: select max(proj_id) from javaproj\r\n    Hibernate: insert into javaproj (AUTH_email, AUTH_firstName, AUTH_lastName, projname,         proj_id) values (?, ?, ?, ?, ?)\r\n","title":"Hibernate Auto Increment ID","body":"<p>Do it as follows :-</p>\n\n<pre><code>@Id\n@GenericGenerator(name=\"kaugen\" , strategy=\"increment\")\n@GeneratedValue(generator=\"kaugen\")\n@Column(name=\"proj_id\")\n  public Integer getId() {\n    return id;\n }\n</code></pre>\n\n<p>You can use any arbitrary name instead of kaugen.\nIt worked well, I could see below queries on console</p>\n\n<pre><code>Hibernate: select max(proj_id) from javaproj\nHibernate: insert into javaproj (AUTH_email, AUTH_firstName, AUTH_lastName, projname,         proj_id) values (?, ?, ?, ?, ?)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1352123,"reputation":1576,"user_id":1291456,"accept_rate":71,"display_name":"jmoreira"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1343404694,"creation_date":1343404694,"answer_id":11691472,"question_id":2011528,"body_markdown":"FYI\r\n\r\nUsing **netbeans** *New Entity Classes from Database* with a **mysql** *auto_increment* column, creates you an attribute with the following annotations:\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Basic(optional = false)\r\n    @Column(name = &quot;id&quot;)\r\n    @NotNull\r\n    private Integer id;\r\n\r\nThis was getting me the same an error saying the column must not be null, so i simply removed the @NotNull anotation leaving the attribute null, and it works!","title":"Hibernate Auto Increment ID","body":"<p>FYI</p>\n\n<p>Using <strong>netbeans</strong> <em>New Entity Classes from Database</em> with a <strong>mysql</strong> *auto_increment* column, creates you an attribute with the following annotations:</p>\n\n<pre><code>@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\n@Basic(optional = false)\n@Column(name = \"id\")\n@NotNull\nprivate Integer id;\n</code></pre>\n\n<p>This was getting me the same an error saying the column must not be null, so i simply removed the @NotNull anotation leaving the attribute null, and it works!</p>\n"},{"tags":[],"owner":{"account_id":2980600,"reputation":393,"user_id":2530633,"display_name":"user2530633"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1408986993,"creation_date":1408986993,"answer_id":25491029,"question_id":2011528,"body_markdown":"Hibernate defines five types of identifier generation strategies:\r\n\r\n**AUTO** - either identity column, sequence or table depending on the underlying DB\r\n\r\n**TABLE** - table holding the id\r\n\r\n**IDENTITY** - identity column\r\n\r\n**SEQUENCE** - sequence\r\n\r\n**identity copy** – the identity is copied from another entity\r\n\r\nExample using Table\r\n\r\n    @Id\r\n    @GeneratedValue(strategy=GenerationType.TABLE , generator=&quot;employee_generator&quot;)\r\n    @TableGenerator(name=&quot;employee_generator&quot;, \r\n                    table=&quot;pk_table&quot;, \r\n                    pkColumnName=&quot;name&quot;, \r\n                    valueColumnName=&quot;value&quot;,                            \r\n                    allocationSize=100) \r\n    @Column(name=&quot;employee_id&quot;)\r\n    private Long employeeId;\r\n\r\nfor more details, check the [link][1].\r\n\r\n\r\n  [1]: http://supportmycode.com/2014/08/21/generating-the-identifier-property-generatedvaluestrategygenerationtype-table/","title":"Hibernate Auto Increment ID","body":"<p>Hibernate defines five types of identifier generation strategies:</p>\n\n<p><strong>AUTO</strong> - either identity column, sequence or table depending on the underlying DB</p>\n\n<p><strong>TABLE</strong> - table holding the id</p>\n\n<p><strong>IDENTITY</strong> - identity column</p>\n\n<p><strong>SEQUENCE</strong> - sequence</p>\n\n<p><strong>identity copy</strong> – the identity is copied from another entity</p>\n\n<p>Example using Table</p>\n\n<pre><code>@Id\n@GeneratedValue(strategy=GenerationType.TABLE , generator=\"employee_generator\")\n@TableGenerator(name=\"employee_generator\", \n                table=\"pk_table\", \n                pkColumnName=\"name\", \n                valueColumnName=\"value\",                            \n                allocationSize=100) \n@Column(name=\"employee_id\")\nprivate Long employeeId;\n</code></pre>\n\n<p>for more details, check the <a href=\"http://supportmycode.com/2014/08/21/generating-the-identifier-property-generatedvaluestrategygenerationtype-table/\" rel=\"noreferrer\">link</a>.</p>\n"},{"tags":[],"owner":{"account_id":1518790,"reputation":958,"user_id":1419099,"accept_rate":64,"display_name":"Henrique C."},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1553680083,"creation_date":1553679530,"answer_id":55373957,"question_id":2011528,"body_markdown":"In case anyone &quot;bumps&quot; in this SO question in search for strategies for **Informix** table when **PK** is type **Serial**.\r\n\r\nI have found that this works...as an example.\r\n\r\n    @Id\r\n    @GeneratedValue(strategy=GenerationType.IDENTITY)\r\n    @Column(name = &quot;special_serial_pk&quot;)\r\n    private Integer special_serial_pk;\r\n\r\nFor this to work make sure when you do **session.SaveOrUpdate** you pass the value for the column **special_serial_pk** **NULL**  .\r\n\r\nIn my case i do an **HTML** **POST** with **JSON** like so...\r\n\r\n    {\r\n    &quot;special_serial_pk&quot;: null, //&lt;-- Field to be incremented\r\n    &quot;specialcolumn1&quot;: 1,\r\n    &quot;specialcolumn2&quot;: &quot;I love to code&quot;,\r\n    &quot;specialcolumn3&quot;: true\r\n    }\r\n\r\n","title":"Hibernate Auto Increment ID","body":"<p>In case anyone \"bumps\" in this SO question in search for strategies for <strong>Informix</strong> table when <strong>PK</strong> is type <strong>Serial</strong>.</p>\n\n<p>I have found that this works...as an example.</p>\n\n<pre><code>@Id\n@GeneratedValue(strategy=GenerationType.IDENTITY)\n@Column(name = \"special_serial_pk\")\nprivate Integer special_serial_pk;\n</code></pre>\n\n<p>For this to work make sure when you do <strong>session.SaveOrUpdate</strong> you pass the value for the column <strong>special_serial_pk</strong> <strong>NULL</strong>  .</p>\n\n<p>In my case i do an <strong>HTML</strong> <strong>POST</strong> with <strong>JSON</strong> like so...</p>\n\n<pre><code>{\n\"special_serial_pk\": null, //&lt;-- Field to be incremented\n\"specialcolumn1\": 1,\n\"specialcolumn2\": \"I love to code\",\n\"specialcolumn3\": true\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14387415,"reputation":1,"user_id":10393006,"display_name":"Ankur Patel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1556863233,"creation_date":1556863233,"answer_id":55964048,"question_id":2011528,"body_markdown":"\r\nUsing netbeans New Entity Classes from Database with a mysql *auto_increment* column, creates you an attribute with the following hibernate.hbm.xml:\r\nid is auto increment\r\n &lt;id name=&quot;id&quot;&gt;&lt;generator class=&quot;increment&quot;&gt;&lt;/generator&gt;\r\n&lt;/id&gt;","title":"Hibernate Auto Increment ID","body":"<p>Using netbeans New Entity Classes from Database with a mysql <em>auto_increment</em> column, creates you an attribute with the following hibernate.hbm.xml:\nid is auto increment\n \n</p>\n"}],"owner":{"account_id":49346,"reputation":3117,"user_id":146873,"accept_rate":86,"display_name":"cedric"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":326227,"favorite_count":0,"down_vote_count":0,"up_vote_count":99,"accepted_answer_id":2011544,"answer_count":7,"score":99,"last_activity_date":1689159720,"creation_date":1262763638,"question_id":2011528,"body_markdown":"I have a j2ee application using hibernate with annotation. How do I annotate the Id field in my pojo class to set it as auto increment or auto generated. and in adding the bean do I leave that field in my bean null?","title":"Hibernate Auto Increment ID","body":"<p>I have a j2ee application using hibernate with annotation. How do I annotate the Id field in my pojo class to set it as auto increment or auto generated. and in adding the bean do I leave that field in my bean null?</p>\n"},{"tags":["java","json","jackson"],"answers":[{"tags":[],"owner":{"account_id":23674,"reputation":114076,"user_id":59501,"accept_rate":75,"display_name":"StaxMan"},"down_vote_count":0,"up_vote_count":626,"is_accepted":true,"score":626,"last_activity_date":1497454585,"creation_date":1286830159,"answer_id":3909846,"question_id":3907929,"body_markdown":"Yes, that is safe and recommended.\r\n\r\nThe only caveat from the page you referred is that you can&#39;t be modifying configuration of the mapper once it is shared; but you are not changing configuration so that is fine. If you did need to change configuration, you would do that from the static block and it would be fine as well.\r\n\r\n__EDIT__: (2013/10)\r\n\r\nWith 2.0 and above, above can be augmented by noting that there is an even better way: use `ObjectWriter` and `ObjectReader` objects, which can be constructed by `ObjectMapper`.\r\nThey are fully immutable, thread-safe, meaning that it is not even theoretically possible to cause thread-safety issues (which can occur with `ObjectMapper` if code tries to re-configure instance).\r\n","title":"Should I declare Jackson&#39;s ObjectMapper as a static field?","body":"<p>Yes, that is safe and recommended.</p>\n\n<p>The only caveat from the page you referred is that you can't be modifying configuration of the mapper once it is shared; but you are not changing configuration so that is fine. If you did need to change configuration, you would do that from the static block and it would be fine as well.</p>\n\n<p><strong>EDIT</strong>: (2013/10)</p>\n\n<p>With 2.0 and above, above can be augmented by noting that there is an even better way: use <code>ObjectWriter</code> and <code>ObjectReader</code> objects, which can be constructed by <code>ObjectMapper</code>.\nThey are fully immutable, thread-safe, meaning that it is not even theoretically possible to cause thread-safety issues (which can occur with <code>ObjectMapper</code> if code tries to re-configure instance).</p>\n"},{"tags":[],"owner":{"account_id":495819,"reputation":13159,"user_id":1017787,"accept_rate":64,"display_name":"JBCP"},"down_vote_count":8,"up_vote_count":11,"is_accepted":false,"score":3,"last_activity_date":1441809937,"creation_date":1366821546,"answer_id":16197551,"question_id":3907929,"body_markdown":"Although it is safe to declare a static ObjectMapper in terms of thread safety, you should be aware that constructing static Object variables in Java is considered bad practice. For more details, see https://stackoverflow.com/questions/7026507 (and if you&#39;d like, [my answer][1])\r\n\r\n  [1]: https://stackoverflow.com/a/10307299/1017787\r\n\r\nIn short, statics should be avoided because the make it difficult to write concise unit tests. For example, with a static final ObjectMapper, you can&#39;t swap out the JSON serialization for dummy code or a no-op.\r\n\r\nIn addition, a static final prevents you from ever reconfiguring ObjectMapper at runtime. You might not envision a reason for that now, but if you lock yourself into a static final pattern, nothing short of tearing down the classloader will let you re-initialize it.\r\n\r\nIn the case of ObjectMapper its fine, but in general it is bad practice and there is no advantage over using a singleton pattern or inversion-of-control to manage your long-lived objects.","title":"Should I declare Jackson&#39;s ObjectMapper as a static field?","body":"<p>Although it is safe to declare a static ObjectMapper in terms of thread safety, you should be aware that constructing static Object variables in Java is considered bad practice. For more details, see <a href=\"https://stackoverflow.com/questions/7026507\">Why are static variables considered evil?</a> (and if you'd like, <a href=\"https://stackoverflow.com/a/10307299/1017787\">my answer</a>)</p>\n\n<p>In short, statics should be avoided because the make it difficult to write concise unit tests. For example, with a static final ObjectMapper, you can't swap out the JSON serialization for dummy code or a no-op.</p>\n\n<p>In addition, a static final prevents you from ever reconfiguring ObjectMapper at runtime. You might not envision a reason for that now, but if you lock yourself into a static final pattern, nothing short of tearing down the classloader will let you re-initialize it.</p>\n\n<p>In the case of ObjectMapper its fine, but in general it is bad practice and there is no advantage over using a singleton pattern or inversion-of-control to manage your long-lived objects.</p>\n"},{"tags":[],"owner":{"account_id":5119569,"reputation":1104,"user_id":4103615,"accept_rate":83,"display_name":"Gary Greenberg"},"down_vote_count":1,"up_vote_count":89,"is_accepted":false,"score":88,"last_activity_date":1458671765,"creation_date":1458671765,"answer_id":36162525,"question_id":3907929,"body_markdown":"Although ObjectMapper is thread safe, I would strongly discourage from declaring it as a static variable, especially in multithreaded application.\r\nNot even because it is a bad practice, but because you are running a heavy risk of deadlocking. I am telling it from my own experience. I created an application with 4 identical threads that were getting and processing JSON data from web services.\r\nMy application was frequently stalling on the following command, according to the thread dump:\r\n\r\n    Map aPage = mapper.readValue(reader, Map.class);\r\n\r\nBeside that, performance was not good.\r\nWhen I replaced static variable with the instance based variable, stalling disappeared and performance quadrupled. I.e. 2.4 millions JSON documents were processed in 40min.56sec., instead of 2.5 hours previously.","title":"Should I declare Jackson&#39;s ObjectMapper as a static field?","body":"<p>Although ObjectMapper is thread safe, I would strongly discourage from declaring it as a static variable, especially in multithreaded application.\nNot even because it is a bad practice, but because you are running a heavy risk of deadlocking. I am telling it from my own experience. I created an application with 4 identical threads that were getting and processing JSON data from web services.\nMy application was frequently stalling on the following command, according to the thread dump:</p>\n\n<pre><code>Map aPage = mapper.readValue(reader, Map.class);\n</code></pre>\n\n<p>Beside that, performance was not good.\nWhen I replaced static variable with the instance based variable, stalling disappeared and performance quadrupled. I.e. 2.4 millions JSON documents were processed in 40min.56sec., instead of 2.5 hours previously.</p>\n"},{"tags":[],"owner":{"account_id":8016571,"reputation":1174,"user_id":6046655,"accept_rate":50,"display_name":"Harshit"},"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1493374568,"creation_date":1493374568,"answer_id":43677778,"question_id":3907929,"body_markdown":"\r\n*com.fasterxml.jackson.databind.type.TypeFactory._hashMapSuperInterfaceChain(HierarchicType)*\r\n\r\n    com.fasterxml.jackson.databind.type.TypeFactory._findSuperInterfaceChain(Type, Class)\r\n      com.fasterxml.jackson.databind.type.TypeFactory._findSuperTypeChain(Class, Class)\r\n         com.fasterxml.jackson.databind.type.TypeFactory.findTypeParameters(Class, Class, TypeBindings)\r\n            com.fasterxml.jackson.databind.type.TypeFactory.findTypeParameters(JavaType, Class)\r\n               com.fasterxml.jackson.databind.type.TypeFactory._fromParamType(ParameterizedType, TypeBindings)\r\n                  com.fasterxml.jackson.databind.type.TypeFactory._constructType(Type, TypeBindings)\r\n                     com.fasterxml.jackson.databind.type.TypeFactory.constructType(TypeReference)\r\n                        com.fasterxml.jackson.databind.ObjectMapper.convertValue(Object, TypeReference)\r\n\r\nThe method _hashMapSuperInterfaceChain in class **com.fasterxml.jackson.databind.type.TypeFactory** is synchronized. \r\nAm seeing contention on the same at high loads.\r\n\r\nMay be another reason to avoid a static ObjectMapper","title":"Should I declare Jackson&#39;s ObjectMapper as a static field?","body":"<p><em>com.fasterxml.jackson.databind.type.TypeFactory._hashMapSuperInterfaceChain(HierarchicType)</em></p>\n\n<pre><code>com.fasterxml.jackson.databind.type.TypeFactory._findSuperInterfaceChain(Type, Class)\n  com.fasterxml.jackson.databind.type.TypeFactory._findSuperTypeChain(Class, Class)\n     com.fasterxml.jackson.databind.type.TypeFactory.findTypeParameters(Class, Class, TypeBindings)\n        com.fasterxml.jackson.databind.type.TypeFactory.findTypeParameters(JavaType, Class)\n           com.fasterxml.jackson.databind.type.TypeFactory._fromParamType(ParameterizedType, TypeBindings)\n              com.fasterxml.jackson.databind.type.TypeFactory._constructType(Type, TypeBindings)\n                 com.fasterxml.jackson.databind.type.TypeFactory.constructType(TypeReference)\n                    com.fasterxml.jackson.databind.ObjectMapper.convertValue(Object, TypeReference)\n</code></pre>\n\n<p>The method _hashMapSuperInterfaceChain in class <strong>com.fasterxml.jackson.databind.type.TypeFactory</strong> is synchronized. \nAm seeing contention on the same at high loads.</p>\n\n<p>May be another reason to avoid a static ObjectMapper</p>\n"},{"tags":[],"owner":{"account_id":5021560,"reputation":189,"user_id":4304298,"display_name":"Lin_n"},"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1538371169,"creation_date":1538371169,"answer_id":52584949,"question_id":3907929,"body_markdown":"A trick I learned from this [PR][1] if you don&#39;t want to define it as a static final variable but want to save a bit of overhead and guarantee thread safe.\r\n\r\n    private static final ThreadLocal&lt;ObjectMapper&gt; om = new ThreadLocal&lt;ObjectMapper&gt;() {\r\n        @Override\r\n        protected ObjectMapper initialValue() {\r\n            ObjectMapper objectMapper = new ObjectMapper();\r\n            objectMapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\r\n            return objectMapper;\r\n        }\r\n    };\r\n\r\n    public static ObjectMapper getObjectMapper() {\r\n        return om.get();\r\n    }\r\ncredit to the author.\r\n\r\n  [1]: https://github.com/yandex/clickhouse-jdbc/pull/149","title":"Should I declare Jackson&#39;s ObjectMapper as a static field?","body":"<p>A trick I learned from this <a href=\"https://github.com/yandex/clickhouse-jdbc/pull/149\" rel=\"noreferrer\">PR</a> if you don't want to define it as a static final variable but want to save a bit of overhead and guarantee thread safe.</p>\n\n<pre><code>private static final ThreadLocal&lt;ObjectMapper&gt; om = new ThreadLocal&lt;ObjectMapper&gt;() {\n    @Override\n    protected ObjectMapper initialValue() {\n        ObjectMapper objectMapper = new ObjectMapper();\n        objectMapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\n        return objectMapper;\n    }\n};\n\npublic static ObjectMapper getObjectMapper() {\n    return om.get();\n}\n</code></pre>\n\n<p>credit to the author.</p>\n"},{"tags":[],"owner":{"account_id":20732441,"reputation":1553,"user_id":15224052,"display_name":"Oliver"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637788287,"creation_date":1637788287,"answer_id":70102985,"question_id":3907929,"body_markdown":"This question may be old, but here&#39;s what I do.\r\n\r\nHold the `ObjectMapper` instance in a thread-safe singleton:\r\n\r\n```java\r\npublic final class JacksonObjectMapperHolder {\r\n\r\n  private static volatile JacksonObjectMapperHolder INSTANCE;\r\n\r\n  private static final Object MUTEX = new Object();\r\n\r\n  public static JacksonObjectMapperHolder getInstance() {\r\n    JacksonObjectMapperHolder instance = INSTANCE;\r\n\r\n    if(instance == null) {\r\n      synchronized(MUTEX) {\r\n        instance = INSTANCE;\r\n\r\n        if(instance == null) {\r\n          INSTANCE = instance = new JacksonObjectMapperHolder();\r\n        }\r\n      }\r\n    }\r\n\r\n    return instance;\r\n  }\r\n\r\n  private final ObjectMapper objectMapper = new ObjectMapper();\r\n\r\n  private JacksonObjectMapperHolder() {\r\n    super();\r\n  }\r\n\r\n  public final ObjectMapper getObjectMapper() {\r\n    return objectMapper;\r\n  }\r\n\r\n}\r\n```","title":"Should I declare Jackson&#39;s ObjectMapper as a static field?","body":"<p>This question may be old, but here's what I do.</p>\n<p>Hold the <code>ObjectMapper</code> instance in a thread-safe singleton:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public final class JacksonObjectMapperHolder {\n\n  private static volatile JacksonObjectMapperHolder INSTANCE;\n\n  private static final Object MUTEX = new Object();\n\n  public static JacksonObjectMapperHolder getInstance() {\n    JacksonObjectMapperHolder instance = INSTANCE;\n\n    if(instance == null) {\n      synchronized(MUTEX) {\n        instance = INSTANCE;\n\n        if(instance == null) {\n          INSTANCE = instance = new JacksonObjectMapperHolder();\n        }\n      }\n    }\n\n    return instance;\n  }\n\n  private final ObjectMapper objectMapper = new ObjectMapper();\n\n  private JacksonObjectMapperHolder() {\n    super();\n  }\n\n  public final ObjectMapper getObjectMapper() {\n    return objectMapper;\n  }\n\n}\n</code></pre>\n"}],"owner":{"account_id":27431,"reputation":46856,"user_id":72437,"accept_rate":86,"display_name":"Cheok Yan Cheng"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":226936,"favorite_count":0,"down_vote_count":0,"up_vote_count":467,"accepted_answer_id":3909846,"answer_count":6,"score":467,"last_activity_date":1689159710,"creation_date":1286813293,"question_id":3907929,"body_markdown":"The Jackson library&#39;s `ObjectMapper` class [seems to be thread safe][1].\r\n\r\nDoes this mean that I should declare my `ObjectMapper` as a static field like this\r\n\r\n    class Me {\r\n        private static final ObjectMapper mapper = new ObjectMapper();\r\n    }\r\n\r\ninstead of as an instance-level field like this?\r\n\r\n    class Me {\r\n        private final ObjectMapper mapper = new ObjectMapper();\r\n    }\r\n\r\n  [1]: https://www.programming-books.io/essential/java/using-jackson-object-mapper-abee93d1c8c645d5a31af402c11e7617","title":"Should I declare Jackson&#39;s ObjectMapper as a static field?","body":"<p>The Jackson library's <code>ObjectMapper</code> class <a href=\"https://www.programming-books.io/essential/java/using-jackson-object-mapper-abee93d1c8c645d5a31af402c11e7617\" rel=\"noreferrer\">seems to be thread safe</a>.</p>\n\n<p>Does this mean that I should declare my <code>ObjectMapper</code> as a static field like this</p>\n\n<pre><code>class Me {\n    private static final ObjectMapper mapper = new ObjectMapper();\n}\n</code></pre>\n\n<p>instead of as an instance-level field like this?</p>\n\n<pre><code>class Me {\n    private final ObjectMapper mapper = new ObjectMapper();\n}\n</code></pre>\n"},{"tags":["java","calendar","vaadin","vaadin-flow"],"comments":[{"owner":{"account_id":4430906,"reputation":3990,"user_id":3608089,"display_name":"ollitietavainen"},"score":0,"creation_date":1687860617,"post_id":76562991,"comment_id":134992528,"body_markdown":"It looks ok on the surface, but maybe there&#39;s some subtle error. Have you tried hard-coding the date and time of the event?","body":"It looks ok on the surface, but maybe there&#39;s some subtle error. Have you tried hard-coding the date and time of the event?"},{"owner":{"account_id":3837378,"reputation":35463,"user_id":3181392,"display_name":"cfrick"},"score":1,"creation_date":1687871020,"post_id":76562991,"comment_id":134994919,"body_markdown":"What does &quot;does not work&quot; mean? Also your subject states &quot;addEntry&quot;, but\nin your code only is a call to &quot;addEntries&quot;. Typo?","body":"What does &quot;does not work&quot; mean? Also your subject states &quot;addEntry&quot;, but in your code only is a call to &quot;addEntries&quot;. Typo?"}],"answers":[{"tags":[],"owner":{"account_id":4107094,"reputation":350,"user_id":3370777,"display_name":"James"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689159273,"creation_date":1689159273,"answer_id":76669791,"question_id":76562991,"body_markdown":"now i understand better.\r\nto create a event by clicking on a date on the calendar:\r\n\r\n     private void showEditorDialog(Entry entryOnClick, boolean isNew, FullCalendar calendar) {\r\n                InMemoryEntryProvider&lt;Entry&gt; entryProvider = calendar.getEntryProvider().asInMemory();\r\n\r\n                Dialog editorDialog = new Dialog();\r\n                VerticalLayout layout = new VerticalLayout();\r\n                TextField titleField = new TextField(&quot;Titolo Evento&quot;);\r\n                titleField.setValue(entryOnClick.getTitle());\r\n                layout.add(titleField);\r\n\r\n                // Save button click listener\r\n                Button saveButton = new Button(&quot;Salva&quot;, event -&gt; {\r\n                    entryOnClick.setTitle(titleField.getValue());\r\n                    if (isNew) {\r\n                        entryProvider.addEntry(entryOnClick);\r\n                    } else {\r\n                        entryProvider.refreshItem(entryOnClick);\r\n                    }\r\n                    editorDialog.close();\r\n                    entryProvider.refreshAll();\r\n                });\r\n\r\n                // Cancel button click listener\r\n                Button cancelButton = new Button(&quot;Cancella&quot;, event -&gt; {\r\n                    entryProvider.removeEntry(entryOnClick);\r\n                    editorDialog.close();\r\n                    entryProvider.refreshAll();\r\n                });\r\n\r\n                layout.add(saveButton, cancelButton);\r\n                editorDialog.add(layout);\r\n                editorDialog.open();\r\n            }\r\n\r\nThen i created a separate class to handle the toolbar:\r\n\r\n     protected SubMenu initEditItems() {\r\n        SubMenu calendarItems = addItem(&quot;Crea Evento&quot;).getSubMenu();\r\n\r\n        MenuItem addRecurringItems;\r\n        MenuItem addSingleItem;\r\n        InMemoryEntryProvider&lt;Entry&gt; entryProviderToolbar = calendar.getEntryProvider().asInMemory();\r\n\r\n        if (onSamplesCreated != null) {\r\n            addSingleItem = calendarItems.addItem(&quot;Crea singolo Evento&quot;, event -&gt; {\r\n            //event.getSource().setEnabled(false);\r\n\r\n            // Create a dialog to collect user input\r\n            Dialog dialog = new Dialog();\r\n            VerticalLayout layout = new VerticalLayout();\r\n\r\n            // Create Vaadin components for user input\r\n            TextField titleField = new TextField(&quot;Titolo Evento&quot;);\r\n            titleField.setRequiredIndicatorVisible(true);\r\n\r\n            DatePicker startDatePicker = new DatePicker(&quot;Inizio Evento&quot;);\r\n            startDatePicker.setRequiredIndicatorVisible(true);\r\n\r\n            TimePicker startTimePicker = new TimePicker(&quot;Orario Inizio Evento&quot;);\r\n            startTimePicker.setValue(LocalTime.MIN);\r\n            DatePicker endDatePicker = new DatePicker(&quot;Fine evento&quot;);\r\n            endDatePicker.setValue(LocalDate.now());\r\n            TimePicker endTimePicker = new TimePicker(&quot;Orario Fine Evento&quot;);\r\n            endTimePicker.setValue(LocalTime.MAX);\r\n\r\n            // Add components to the layout\r\n            layout.add(titleField, startDatePicker, startTimePicker, endDatePicker, endTimePicker);\r\n\r\n            // Create save and cancel buttons\r\n            Button saveButton = new Button(&quot;Salva&quot;, saveEvent -&gt; {\r\n                //validate required fields\r\n                if (titleField.getValue().isEmpty() || startDatePicker.getValue() == null) {\r\n                    Notification.show(&quot;Pervafore inserisci tutti i campi obbligatori&quot;, 3000, Notification.Position.MIDDLE);\r\n                    return;\r\n                }\r\n                // Create a new entry with the user&#39;s input\r\n                Entry entry = new Entry();\r\n                entry.setStart(startDatePicker.getValue().atTime(startTimePicker.getValue()));\r\n                entry.setEnd(endDatePicker.getValue().atTime(endTimePicker.getValue()));\r\n                entry.setTitle(titleField.getValue());\r\n\r\n                // Add the entry to the calendar and refresh the view\r\n                entryProviderToolbar.addEntry(entry);\r\n                entryProviderToolbar.refreshAll();\r\n                onSamplesCreated.accept(Collections.singletonList(entry));\r\n                Notification.show(&quot;Added a single entry&quot;);\r\n\r\n                // Close the dialog\r\n                dialog.close();\r\n            });\r\n            saveButton.addThemeVariants(ButtonVariant.LUMO_PRIMARY);\r\n\r\n            Button cancelButton = new Button(&quot;Cancella&quot;, cancelEvent -&gt; {\r\n                dialog.close();\r\n            });\r\n\r\n        // Add buttons to the layout\r\n        layout.add(saveButton, cancelButton);\r\n\r\n        // Add layout to the dialog and open it\r\n        dialog.add(layout);\r\n        dialog.open();\r\n    });\r\nthis is how you can create an event outside and inside the calendar","title":"addEntry does not work in Vaadin FullCalendar add-on","body":"<p>now i understand better.\nto create a event by clicking on a date on the calendar:</p>\n<pre><code> private void showEditorDialog(Entry entryOnClick, boolean isNew, FullCalendar calendar) {\n            InMemoryEntryProvider&lt;Entry&gt; entryProvider = calendar.getEntryProvider().asInMemory();\n\n            Dialog editorDialog = new Dialog();\n            VerticalLayout layout = new VerticalLayout();\n            TextField titleField = new TextField(&quot;Titolo Evento&quot;);\n            titleField.setValue(entryOnClick.getTitle());\n            layout.add(titleField);\n\n            // Save button click listener\n            Button saveButton = new Button(&quot;Salva&quot;, event -&gt; {\n                entryOnClick.setTitle(titleField.getValue());\n                if (isNew) {\n                    entryProvider.addEntry(entryOnClick);\n                } else {\n                    entryProvider.refreshItem(entryOnClick);\n                }\n                editorDialog.close();\n                entryProvider.refreshAll();\n            });\n\n            // Cancel button click listener\n            Button cancelButton = new Button(&quot;Cancella&quot;, event -&gt; {\n                entryProvider.removeEntry(entryOnClick);\n                editorDialog.close();\n                entryProvider.refreshAll();\n            });\n\n            layout.add(saveButton, cancelButton);\n            editorDialog.add(layout);\n            editorDialog.open();\n        }\n</code></pre>\n<p>Then i created a separate class to handle the toolbar:</p>\n<pre><code> protected SubMenu initEditItems() {\n    SubMenu calendarItems = addItem(&quot;Crea Evento&quot;).getSubMenu();\n\n    MenuItem addRecurringItems;\n    MenuItem addSingleItem;\n    InMemoryEntryProvider&lt;Entry&gt; entryProviderToolbar = calendar.getEntryProvider().asInMemory();\n\n    if (onSamplesCreated != null) {\n        addSingleItem = calendarItems.addItem(&quot;Crea singolo Evento&quot;, event -&gt; {\n        //event.getSource().setEnabled(false);\n\n        // Create a dialog to collect user input\n        Dialog dialog = new Dialog();\n        VerticalLayout layout = new VerticalLayout();\n\n        // Create Vaadin components for user input\n        TextField titleField = new TextField(&quot;Titolo Evento&quot;);\n        titleField.setRequiredIndicatorVisible(true);\n\n        DatePicker startDatePicker = new DatePicker(&quot;Inizio Evento&quot;);\n        startDatePicker.setRequiredIndicatorVisible(true);\n\n        TimePicker startTimePicker = new TimePicker(&quot;Orario Inizio Evento&quot;);\n        startTimePicker.setValue(LocalTime.MIN);\n        DatePicker endDatePicker = new DatePicker(&quot;Fine evento&quot;);\n        endDatePicker.setValue(LocalDate.now());\n        TimePicker endTimePicker = new TimePicker(&quot;Orario Fine Evento&quot;);\n        endTimePicker.setValue(LocalTime.MAX);\n\n        // Add components to the layout\n        layout.add(titleField, startDatePicker, startTimePicker, endDatePicker, endTimePicker);\n\n        // Create save and cancel buttons\n        Button saveButton = new Button(&quot;Salva&quot;, saveEvent -&gt; {\n            //validate required fields\n            if (titleField.getValue().isEmpty() || startDatePicker.getValue() == null) {\n                Notification.show(&quot;Pervafore inserisci tutti i campi obbligatori&quot;, 3000, Notification.Position.MIDDLE);\n                return;\n            }\n            // Create a new entry with the user's input\n            Entry entry = new Entry();\n            entry.setStart(startDatePicker.getValue().atTime(startTimePicker.getValue()));\n            entry.setEnd(endDatePicker.getValue().atTime(endTimePicker.getValue()));\n            entry.setTitle(titleField.getValue());\n\n            // Add the entry to the calendar and refresh the view\n            entryProviderToolbar.addEntry(entry);\n            entryProviderToolbar.refreshAll();\n            onSamplesCreated.accept(Collections.singletonList(entry));\n            Notification.show(&quot;Added a single entry&quot;);\n\n            // Close the dialog\n            dialog.close();\n        });\n        saveButton.addThemeVariants(ButtonVariant.LUMO_PRIMARY);\n\n        Button cancelButton = new Button(&quot;Cancella&quot;, cancelEvent -&gt; {\n            dialog.close();\n        });\n\n    // Add buttons to the layout\n    layout.add(saveButton, cancelButton);\n\n    // Add layout to the dialog and open it\n    dialog.add(layout);\n    dialog.open();\n});\n</code></pre>\n<p>this is how you can create an event outside and inside the calendar</p>\n"}],"owner":{"account_id":4107094,"reputation":350,"user_id":3370777,"display_name":"James"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76669791,"answer_count":1,"score":0,"last_activity_date":1689159273,"creation_date":1687854454,"question_id":76562991,"body_markdown":"I&#39;ve written logic that adds an event inside a Vaadin FullCalendar but it does not work.\r\n\r\nThis is my code so far. By clicking &quot;update&quot; I should be able to add an event to my calendar:\r\n\r\n``` \r\nInMemoryEntryProvider&lt;ResourceEntry&gt; entryProvider = new InMemoryEntryProvider&lt;&gt;();\r\ncalendar.setEntryProvider(entryProvider);\r\n  \r\n//update or remove a calendar entry\r\nHorizontalLayout entryControlsLayout = new HorizontalLayout();\r\nentryControlsLayout.setSpacing(true);\r\nentryControlsLayout.setAlignItems(Alignment.BASELINE);\r\nEntry entryCustom = new Entry();\r\nSelect&lt;String&gt; selectTitle = new Select&lt;&gt;();\r\nDatePicker datePickerStart = new DatePicker(&quot;inzio&quot;);\r\nDatePicker datePickerEnd = new DatePicker(&quot;fine&quot;);\r\nTimePicker timePicker = new TimePicker(&quot;Select Time&quot;);\r\nTimePicker timePickerEnd = new TimePicker(&quot;Select Time&quot;);\r\ndatePickerStart.setValue(LocalDate.now());\r\ndatePickerEnd.setValue(LocalDate.now());\r\ntimePicker.setValue(LocalTime.now());\r\ntimePickerEnd.setValue(LocalTime.now());\r\nselectTitle.setLabel(&quot;Ordina Come&quot;);\r\nselectTitle.setItems(&quot;Primo pi&#249; recente&quot;, &quot;Rating: high to low&quot;, &quot;Rating: low to high&quot;, &quot;Price: high to low&quot;, &quot;Price: low to high&quot;);\r\nselectTitle.setValue(&quot;Primo pi&#249; recente&quot;);\r\nentryCustom.setTitle(selectTitle.getValue());\r\nentryCustom.setColor(&quot;#ff3333&quot;);\r\nentryCustom.setStartEditable(true);\r\nentryCustom.setStart(datePickerStart.getValue().atTime(timePicker.getValue()));\r\nentryCustom.setEnd(datePickerEnd.getValue().atTime(timePickerEnd.getValue()));\r\nButton updateButton = new Button(&quot;Update&quot;, e -&gt; {\r\n   entryCustom.setTitle(selectTitle.getValue());\r\n   entryCustom.setStart(datePickerStart.getValue().atTime(timePicker.getValue()));\r\n   entryCustom.setEnd(datePickerEnd.getValue().atTime(timePickerEnd.getValue()));\r\n   calendar.getEntryProvider().asInMemory().addEntries(entryCustom);\r\n});\r\nButton removeButton = new Button(&quot;Remove&quot;, e -&gt; {\r\n  calendar.getEntryProvider().asInMemory().removeEntries(entryCustom);\r\n});\r\nentryControlsLayout.add(selectTitle, datePickerStart, datePickerEnd, timePicker, timePickerEnd, updateButton, removeButton );\r\n```\r\n\r\nand this is the style setting that I have:\r\n\r\n``` \r\ncalendar.setSizeFull();\r\ncalendar.setLocale(Locale.ITALIAN);\r\ncalendar.setFirstDay(DayOfWeek.MONDAY);\r\ncalendar.setTimezone(Timezone.UTC);\r\ncalendar.setNowIndicatorShown(true);\r\ncalendar.setNumberClickable(true);\r\ncalendar.setWeekNumbersVisible(false);\r\n\r\nHorizontalLayout calendarLayout = new HorizontalLayout();\r\ncalendarLayout.setSizeFull();\r\ncalendarLayout.addClassName(&quot;calendar-layout&quot;);\r\ncalendarLayout.add(calendar);\r\n\r\nadd(entryControlsLayout, topControlsLayout, calendarLayout);\r\n\r\nmonthViewButton.addClickListener(event -&gt; calendar.changeView(CalendarViewImpl.DAY_GRID_MONTH));\r\nweekViewButton.addClickListener(event -&gt; calendar.changeView(CalendarViewImpl.TIME_GRID_WEEK));\r\ndayViewButton.addClickListener(event -&gt; calendar.changeView(CalendarViewImpl.TIME_GRID_DAY));\r\n\r\nsetSizeFull();\r\nsetSpacing(true);\r\n```\r\n\r\nI&#39;ve been trying [to follow this][1] but it doesn&#39;t make much sense to me.\r\n\r\n\r\n  [1]: https://github.com/stefanuebe/vaadin_fullcalendar/wiki/FullCalendar-Examples","title":"addEntry does not work in Vaadin FullCalendar add-on","body":"<p>I've written logic that adds an event inside a Vaadin FullCalendar but it does not work.</p>\n<p>This is my code so far. By clicking &quot;update&quot; I should be able to add an event to my calendar:</p>\n<pre><code>InMemoryEntryProvider&lt;ResourceEntry&gt; entryProvider = new InMemoryEntryProvider&lt;&gt;();\ncalendar.setEntryProvider(entryProvider);\n  \n//update or remove a calendar entry\nHorizontalLayout entryControlsLayout = new HorizontalLayout();\nentryControlsLayout.setSpacing(true);\nentryControlsLayout.setAlignItems(Alignment.BASELINE);\nEntry entryCustom = new Entry();\nSelect&lt;String&gt; selectTitle = new Select&lt;&gt;();\nDatePicker datePickerStart = new DatePicker(&quot;inzio&quot;);\nDatePicker datePickerEnd = new DatePicker(&quot;fine&quot;);\nTimePicker timePicker = new TimePicker(&quot;Select Time&quot;);\nTimePicker timePickerEnd = new TimePicker(&quot;Select Time&quot;);\ndatePickerStart.setValue(LocalDate.now());\ndatePickerEnd.setValue(LocalDate.now());\ntimePicker.setValue(LocalTime.now());\ntimePickerEnd.setValue(LocalTime.now());\nselectTitle.setLabel(&quot;Ordina Come&quot;);\nselectTitle.setItems(&quot;Primo più recente&quot;, &quot;Rating: high to low&quot;, &quot;Rating: low to high&quot;, &quot;Price: high to low&quot;, &quot;Price: low to high&quot;);\nselectTitle.setValue(&quot;Primo più recente&quot;);\nentryCustom.setTitle(selectTitle.getValue());\nentryCustom.setColor(&quot;#ff3333&quot;);\nentryCustom.setStartEditable(true);\nentryCustom.setStart(datePickerStart.getValue().atTime(timePicker.getValue()));\nentryCustom.setEnd(datePickerEnd.getValue().atTime(timePickerEnd.getValue()));\nButton updateButton = new Button(&quot;Update&quot;, e -&gt; {\n   entryCustom.setTitle(selectTitle.getValue());\n   entryCustom.setStart(datePickerStart.getValue().atTime(timePicker.getValue()));\n   entryCustom.setEnd(datePickerEnd.getValue().atTime(timePickerEnd.getValue()));\n   calendar.getEntryProvider().asInMemory().addEntries(entryCustom);\n});\nButton removeButton = new Button(&quot;Remove&quot;, e -&gt; {\n  calendar.getEntryProvider().asInMemory().removeEntries(entryCustom);\n});\nentryControlsLayout.add(selectTitle, datePickerStart, datePickerEnd, timePicker, timePickerEnd, updateButton, removeButton );\n</code></pre>\n<p>and this is the style setting that I have:</p>\n<pre><code>calendar.setSizeFull();\ncalendar.setLocale(Locale.ITALIAN);\ncalendar.setFirstDay(DayOfWeek.MONDAY);\ncalendar.setTimezone(Timezone.UTC);\ncalendar.setNowIndicatorShown(true);\ncalendar.setNumberClickable(true);\ncalendar.setWeekNumbersVisible(false);\n\nHorizontalLayout calendarLayout = new HorizontalLayout();\ncalendarLayout.setSizeFull();\ncalendarLayout.addClassName(&quot;calendar-layout&quot;);\ncalendarLayout.add(calendar);\n\nadd(entryControlsLayout, topControlsLayout, calendarLayout);\n\nmonthViewButton.addClickListener(event -&gt; calendar.changeView(CalendarViewImpl.DAY_GRID_MONTH));\nweekViewButton.addClickListener(event -&gt; calendar.changeView(CalendarViewImpl.TIME_GRID_WEEK));\ndayViewButton.addClickListener(event -&gt; calendar.changeView(CalendarViewImpl.TIME_GRID_DAY));\n\nsetSizeFull();\nsetSpacing(true);\n</code></pre>\n<p>I've been trying <a href=\"https://github.com/stefanuebe/vaadin_fullcalendar/wiki/FullCalendar-Examples\" rel=\"nofollow noreferrer\">to follow this</a> but it doesn't make much sense to me.</p>\n"},{"tags":["java","module"],"answers":[{"tags":[],"owner":{"account_id":213468,"reputation":103489,"user_id":466862,"display_name":"Mark Rotteveel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689159085,"creation_date":1689149249,"answer_id":76668388,"question_id":76667243,"body_markdown":"Those libraries don&#39;t have a `module-info.class`, nor do they have an `Automatic-Module-Name` entry in their manifest, so Java uses a heuristic to derive a module name from the JAR filename. This heuristic fails and results in an invalid name. \r\n\r\nYou have two choices:\r\n\r\n1. Don&#39;t try to use these libraries as modules, but add them to the classpath instead of the modulepath; this will make them part of the unnamed module. Your modular code will not be able to interact with them directly. Only non-modularized code (JARs without a `module-info.class`) on the modulepath can directly interact with classes on the classpath. So, maybe it is a sign you shouldn&#39;t attempt to modularize this application.\r\n\r\n2. You will either need to manually patch those libraries so at minimum they declare an `Automatic-Module-Name` in their manifest, or contain a `module-info.class`, or you need to look for a version which is either properly modularized, or at least declares the `Automatic-Module-Name` (FYI, even Kafka 3.5.0 doesn&#39;t have this yet). Alternatively, rename the libraries on your deployment so they don&#39;t break the derivation of module names (specifically, remove the `-2.13` of the Scala version, and maybe the `-test` suffix needs to come before the version).\r\n\r\nThere is an open issue on the Kafka project requesting addition of an `Automatic-Module-Name`, [KAFKA-7490][1], but given it has been open since 2018, I wouldn&#39;t hold my breath waiting for it.\r\n\r\n\r\n  [1]: https://issues.apache.org/jira/browse/KAFKA-7490","title":"Modularization of a Java 17 project: compilation warns me against Invalid module names of third parties jars. Will this prevent me from succeed?","body":"<p>Those libraries don't have a <code>module-info.class</code>, nor do they have an <code>Automatic-Module-Name</code> entry in their manifest, so Java uses a heuristic to derive a module name from the JAR filename. This heuristic fails and results in an invalid name.</p>\n<p>You have two choices:</p>\n<ol>\n<li><p>Don't try to use these libraries as modules, but add them to the classpath instead of the modulepath; this will make them part of the unnamed module. Your modular code will not be able to interact with them directly. Only non-modularized code (JARs without a <code>module-info.class</code>) on the modulepath can directly interact with classes on the classpath. So, maybe it is a sign you shouldn't attempt to modularize this application.</p>\n</li>\n<li><p>You will either need to manually patch those libraries so at minimum they declare an <code>Automatic-Module-Name</code> in their manifest, or contain a <code>module-info.class</code>, or you need to look for a version which is either properly modularized, or at least declares the <code>Automatic-Module-Name</code> (FYI, even Kafka 3.5.0 doesn't have this yet). Alternatively, rename the libraries on your deployment so they don't break the derivation of module names (specifically, remove the <code>-2.13</code> of the Scala version, and maybe the <code>-test</code> suffix needs to come before the version).</p>\n</li>\n</ol>\n<p>There is an open issue on the Kafka project requesting addition of an <code>Automatic-Module-Name</code>, <a href=\"https://issues.apache.org/jira/browse/KAFKA-7490\" rel=\"nofollow noreferrer\">KAFKA-7490</a>, but given it has been open since 2018, I wouldn't hold my breath waiting for it.</p>\n"}],"owner":{"account_id":3366819,"reputation":2646,"user_id":2827181,"display_name":"Marc Le Bihan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":164,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76668388,"answer_count":1,"score":0,"last_activity_date":1689159085,"creation_date":1689137713,"question_id":76667243,"body_markdown":"I&#39;m starting my project modularization.\r\n\r\nThis way, I expect getting rid of boring `--add-exports`, `--add-opens` declarations I have everywhere around `java` commands in command lines scripts, _Maven_ POM, service of `systemctl` declaration.\r\n\r\n```\r\n--add-exports java.base/sun.nio.ch=ALL-UNNAMED\r\n--add-opens java.base/java.util=ALL-UNNAMED\r\n--add-opens java.base/java.io=ALL-UNNAMED\r\n--add-opens java.base/java.nio=ALL-UNNAMED\r\n--add-opens java.base/java.lang=ALL-UNNAMED\r\n--add-opens java.base/java.lang.invoke=ALL-UNNAMED\r\n--add-opens java.base/sun.security.util=ALL-UNNAMED\r\n--add-opens java.base/sun.security.action=ALL-UNNAMED\r\n```\r\n\r\nAnd it&#39;s also a good time for cleaning POMs from excessive dependencies.\r\n\r\n---\r\n\r\nBut as soon I&#39;ve wrote my first `modules.java` file for my first component (among 54),  \r\n_Maven_ handles it and _Java_ compilation warns me against some  \r\n__invalid module names__  \r\nthat can be found among third parties dependencies (here, from a parent POM).\r\n\r\n```log\r\nCan&#39;t extract module name from kafka_2.13-3.1.2-test.jar: kafka.2.13: Invalid module name: &#39;2&#39; is not a Java identifier\r\nCan&#39;t extract module name from jackson-module-scala_2.13-2.13.5.jar: jackson.module.scala.2.13: Invalid module name: &#39;2&#39; is not a Java identifier\r\nCan&#39;t extract module name from scala-logging_2.13-3.9.3.jar: scala.logging.2.13: Invalid module name: &#39;2&#39; is not a Java identifier\r\nCan&#39;t extract module name from kafka_2.13-3.1.2.jar: kafka.2.13: Invalid module name: &#39;2&#39; is not a Java identifier\r\n```\r\n\r\nDoes this mean I am doomed, and eventually these jars will prevent modularization,  \r\nor do I have a way to workaround them?","title":"Modularization of a Java 17 project: compilation warns me against Invalid module names of third parties jars. Will this prevent me from succeed?","body":"<p>I'm starting my project modularization.</p>\n<p>This way, I expect getting rid of boring <code>--add-exports</code>, <code>--add-opens</code> declarations I have everywhere around <code>java</code> commands in command lines scripts, <em>Maven</em> POM, service of <code>systemctl</code> declaration.</p>\n<pre><code>--add-exports java.base/sun.nio.ch=ALL-UNNAMED\n--add-opens java.base/java.util=ALL-UNNAMED\n--add-opens java.base/java.io=ALL-UNNAMED\n--add-opens java.base/java.nio=ALL-UNNAMED\n--add-opens java.base/java.lang=ALL-UNNAMED\n--add-opens java.base/java.lang.invoke=ALL-UNNAMED\n--add-opens java.base/sun.security.util=ALL-UNNAMED\n--add-opens java.base/sun.security.action=ALL-UNNAMED\n</code></pre>\n<p>And it's also a good time for cleaning POMs from excessive dependencies.</p>\n<hr />\n<p>But as soon I've wrote my first <code>modules.java</code> file for my first component (among 54),<br />\n<em>Maven</em> handles it and <em>Java</em> compilation warns me against some<br />\n<strong>invalid module names</strong><br />\nthat can be found among third parties dependencies (here, from a parent POM).</p>\n<pre><code>Can't extract module name from kafka_2.13-3.1.2-test.jar: kafka.2.13: Invalid module name: '2' is not a Java identifier\nCan't extract module name from jackson-module-scala_2.13-2.13.5.jar: jackson.module.scala.2.13: Invalid module name: '2' is not a Java identifier\nCan't extract module name from scala-logging_2.13-3.9.3.jar: scala.logging.2.13: Invalid module name: '2' is not a Java identifier\nCan't extract module name from kafka_2.13-3.1.2.jar: kafka.2.13: Invalid module name: '2' is not a Java identifier\n</code></pre>\n<p>Does this mean I am doomed, and eventually these jars will prevent modularization,<br />\nor do I have a way to workaround them?</p>\n"},{"tags":["java","kotlin","class","intellij-idea","uml"],"answers":[{"tags":[],"owner":{"account_id":29001724,"reputation":41,"user_id":22215152,"display_name":"Anton Mefodichev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689159055,"creation_date":1689159036,"answer_id":76669765,"question_id":76663495,"body_markdown":"I have created a ticket for Kotlin Plugin team regarding the issue:\r\n\r\nhttps://youtrack.jetbrains.com/issue/KTIJ-26254/Private-variables-are-not-shown-in-Diagram\r\n\r\nThank you for reporting the issue!","title":"Private variables don&#39;t show in Diagram intelij IDE","body":"<p>I have created a ticket for Kotlin Plugin team regarding the issue:</p>\n<p><a href=\"https://youtrack.jetbrains.com/issue/KTIJ-26254/Private-variables-are-not-shown-in-Diagram\" rel=\"nofollow noreferrer\">https://youtrack.jetbrains.com/issue/KTIJ-26254/Private-variables-are-not-shown-in-Diagram</a></p>\n<p>Thank you for reporting the issue!</p>\n"}],"owner":{"account_id":15980430,"reputation":424,"user_id":11532220,"display_name":"Ali Dehkhodaei"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76669765,"answer_count":1,"score":1,"last_activity_date":1689159055,"creation_date":1689088775,"question_id":76663495,"body_markdown":"I want convert my kotlin class to uml class. I used Diagram option in intellij IDE but it don&#39;t show my private variables in uml class. For Java classes it&#39;s okay but kotlin classes have this problem.\r\n\r\nMy version intellij IDE is 2023.1.3.\r\n\r\nThis is my simple Java and Kotlin class:\r\n\r\n1.\r\n\r\n    public class JavaClass {\r\n    \r\n      private String name=&quot;&quot;;\r\n    \r\n      private int age;\r\n    \r\n      public int getAge() {\r\n        return age;\r\n      }\r\n    \r\n      public void setAge(int age) {\r\n        this.age = age;\r\n      }\r\n    \r\n    }\r\n\r\n[![Java class][1]][1]\r\n\r\n2.\r\n\r\n    class KotlinClass {\r\n        private var name:String=&quot;&quot;\r\n        var age:Int=0\r\n    }\r\n\r\n[![Kotlin class][2]][2]\r\n\r\n\r\n\r\nIn this [IntelliJ video][3], it has a &#39;Fields&#39; section, but I don&#39;t have this option, and I have also checked the settings.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/aEu9r.png\r\n  [2]: https://i.stack.imgur.com/ZB2Ms.png\r\n  [3]: https://www.jetbrains.com/idea/guide/tips/uml-diagrams-for-kotlin","title":"Private variables don&#39;t show in Diagram intelij IDE","body":"<p>I want convert my kotlin class to uml class. I used Diagram option in intellij IDE but it don't show my private variables in uml class. For Java classes it's okay but kotlin classes have this problem.</p>\n<p>My version intellij IDE is 2023.1.3.</p>\n<p>This is my simple Java and Kotlin class:</p>\n<p>1.</p>\n<pre><code>public class JavaClass {\n\n  private String name=&quot;&quot;;\n\n  private int age;\n\n  public int getAge() {\n    return age;\n  }\n\n  public void setAge(int age) {\n    this.age = age;\n  }\n\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/aEu9r.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aEu9r.png\" alt=\"Java class\" /></a></p>\n<p>2.</p>\n<pre><code>class KotlinClass {\n    private var name:String=&quot;&quot;\n    var age:Int=0\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/ZB2Ms.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZB2Ms.png\" alt=\"Kotlin class\" /></a></p>\n<p>In this <a href=\"https://www.jetbrains.com/idea/guide/tips/uml-diagrams-for-kotlin\" rel=\"nofollow noreferrer\">IntelliJ video</a>, it has a 'Fields' section, but I don't have this option, and I have also checked the settings.</p>\n"},{"tags":["java","android","string","class","interface"],"comments":[{"owner":{"account_id":26215555,"reputation":35,"user_id":19893729,"display_name":"KMD"},"score":0,"creation_date":1689158631,"post_id":76669614,"comment_id":135172862,"body_markdown":"I am using rxjava, its a void, and its not important, the main question is how to give that String to it.","body":"I am using rxjava, its a void, and its not important, the main question is how to give that String to it."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1689162957,"post_id":76669614,"comment_id":135173758,"body_markdown":"And the answer is to do what you claim you are already doing: pass it as a parameter.","body":"And the answer is to do what you claim you are already doing: pass it as a parameter."}],"owner":{"account_id":26215555,"reputation":35,"user_id":19893729,"display_name":"KMD"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1689158857,"creation_date":1689157908,"question_id":76669614,"body_markdown":"I have a simple question even though I can&#39;t answer it myself.\r\n\r\nI have a class which is my Api class with a single which expect a string query parameeter:\r\n\r\n```\r\npublic Single&lt;List&lt;Products&gt;&gt; searchProducts(){\r\n        return api.searchProducts();\r\n    }\r\n```\r\n\r\nand I have a Activity class with the data that I need which is searchEt:\r\n\r\n```\r\nString searchData = searchEt.toString();\r\n```\r\n\r\nmy question is that how can I pass this searchEt to my Api class which need the String query?\r\n\r\n```\r\napi.searchProducts();\r\n```\r\n\r\nI tried to use interface but I&#39;ve got confused.","title":"How to pass a string between classes","body":"<p>I have a simple question even though I can't answer it myself.</p>\n<p>I have a class which is my Api class with a single which expect a string query parameeter:</p>\n<pre><code>public Single&lt;List&lt;Products&gt;&gt; searchProducts(){\n        return api.searchProducts();\n    }\n</code></pre>\n<p>and I have a Activity class with the data that I need which is searchEt:</p>\n<pre><code>String searchData = searchEt.toString();\n</code></pre>\n<p>my question is that how can I pass this searchEt to my Api class which need the String query?</p>\n<pre><code>api.searchProducts();\n</code></pre>\n<p>I tried to use interface but I've got confused.</p>\n"},{"tags":["java","gradle","wsdl","xjc"],"owner":{"account_id":6701697,"reputation":197,"user_id":5167964,"accept_rate":100,"display_name":"Vivek Buddhadev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689158802,"creation_date":1689158802,"question_id":76669734,"body_markdown":"I&#39;m using the gradle-xjc-plugin (Version: 1.4.2) to generate required classes from WSDL. the xjcGenerate task in my gradle worked fine until I migrated the gradle version to 7.4 from 6.8.\r\n\r\n\r\n    xjcGenerate {\r\n       targetPackage = &quot;nl.cir.xsd&quot;\r\n       source = fileTree(&#39;src/main/resources/wsdl&#39;)\r\n       extraArgs = [ &#39;-wsdl&#39; ]\r\n    }\r\n\r\n\r\nI&#39;m receiving the following error during task execution...\r\n\r\n    Some problems were found with the configuration of task &#39;:cir:xjcGenerate&#39; (type &#39;XjcGenerate&#39;).\r\n      - In plugin &#39;org.unbroken-dome.xjc&#39; type &#39;org.unbrokendome.gradle.plugins.xjc.XjcGenerate&#39; property &#39;contentForWildcard&#39; has redundant getters: &#39;getContentForWildcard()&#39; and &#39;isContentForWildcard()&#39;.\r\n\r\nWould anyone be able to help me to resolve this issue?","title":"Property &#39;contentForWildcard&#39; has redundant after migrating to Gradle 7.4 from 6.8","body":"<p>I'm using the gradle-xjc-plugin (Version: 1.4.2) to generate required classes from WSDL. the xjcGenerate task in my gradle worked fine until I migrated the gradle version to 7.4 from 6.8.</p>\n<pre><code>xjcGenerate {\n   targetPackage = &quot;nl.cir.xsd&quot;\n   source = fileTree('src/main/resources/wsdl')\n   extraArgs = [ '-wsdl' ]\n}\n</code></pre>\n<p>I'm receiving the following error during task execution...</p>\n<pre><code>Some problems were found with the configuration of task ':cir:xjcGenerate' (type 'XjcGenerate').\n  - In plugin 'org.unbroken-dome.xjc' type 'org.unbrokendome.gradle.plugins.xjc.XjcGenerate' property 'contentForWildcard' has redundant getters: 'getContentForWildcard()' and 'isContentForWildcard()'.\n</code></pre>\n<p>Would anyone be able to help me to resolve this issue?</p>\n"},{"tags":["java","android","android-studio"],"owner":{"account_id":26472396,"reputation":63,"user_id":20112807,"display_name":"Alex"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1689158705,"creation_date":1689158705,"question_id":76669719,"body_markdown":"I am selecting one or more images from gallery and with seek bar i am specifying the range that the transformations will apply, but when i am displaying the images in GridView all images are black! my `editedImages` is `List&lt;Bitmap&gt; editedImages;`also i showed how i am using the intent in code below.\r\n\r\nCode :\r\n\r\n     private void applyRandomTransformations() {\r\n\r\n        Random random = new Random();\r\n        editedImages.clear();\r\n\r\n        for (Uri imageUri : originalImageUris) {\r\n            try {\r\n                Bitmap originalImage = MediaStore.Images.Media.getBitmap(getContentResolver(), imageUri);\r\n\r\n                if (originalImage.getWidth() &lt;= 0) {\r\n                    // Skip this image if the width is invalid\r\n                    continue;\r\n                }\r\n                // Apply rotation\r\n                int rotationAngle = random.nextInt(MAX_ROTATION_ANGLE);\r\n                Bitmap rotatedImage = rotateImage(originalImage, rotationAngle);\r\n\r\n                // Apply cropping\r\n                int cropPercentage = random.nextInt(MAX_CROP_PERCENTAGE);\r\n                Bitmap croppedImage = cropImage(rotatedImage, cropPercentage);\r\n\r\n                // Apply contrast adjustment\r\n                int contrastValue = contrastSeekBar.getProgress() - (MAX_CONTRAST_VALUE / 2);\r\n                Bitmap contrastedImage = adjustContrast(croppedImage, contrastValue);\r\n\r\n                // Apply hue adjustment\r\n                int hueValue = hueSeekBar.getProgress();\r\n                Bitmap hueAdjustedImage = adjustHue(contrastedImage, hueValue);\r\n\r\n                // Apply saturation adjustment\r\n                int saturationValue = saturationSeekBar.getProgress() - (MAX_SATURATION_VALUE / 2);\r\n                Bitmap finalImage = adjustSaturation(hueAdjustedImage, saturationValue);\r\n\r\n                editedImages.add(finalImage);\r\n\r\n\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    private void displayEditedImages() {\r\n        if (!editedImages.isEmpty()) {\r\n\r\n            Intent intent = new Intent(MainActivity.this, EditedImagesActivity.class);\r\n\r\n            // Convert the byte arrays to Bitmap objects\r\n            ArrayList&lt;Bitmap&gt; bitmaps = new ArrayList&lt;&gt;(editedImages);\r\n            // Pass the edited images as an ArrayList of Bitmap objects\r\n            intent.putParcelableArrayListExtra(&quot;editedImages&quot;, bitmaps);\r\n\r\n\r\n            startActivity(intent);\r\n        }\r\n    }\r\n\r\n    private Bitmap rotateImage(Bitmap image, float angle) {\r\n        Matrix matrix = new Matrix();\r\n        matrix.postRotate(angle);\r\n        return Bitmap.createBitmap(image, 0, 0, image.getWidth(), image.getHeight(), matrix, true);\r\n    }\r\n\r\n    private Bitmap cropImage(Bitmap image, int cropPercentage) {\r\n        int width = image.getWidth();\r\n        int height = image.getHeight();\r\n        int cropSize = Math.min(width, height) * cropPercentage / 100;\r\n        int left = (width - cropSize) / 2;\r\n        int top = (height - cropSize) / 2;\r\n        Bitmap croppedImage = Bitmap.createBitmap(image, left, top, cropSize, cropSize);\r\n        croppedImage.setHasAlpha(true);\r\n        return croppedImage;\r\n    }\r\n\r\n    private Bitmap adjustContrast(Bitmap image, float value) {\r\n        Bitmap adjustedImage = Bitmap.createBitmap(image.getWidth(), image.getHeight(), image.getConfig());\r\n        Canvas canvas = new Canvas(adjustedImage);\r\n\r\n        ColorMatrix colorMatrix = new ColorMatrix();\r\n        colorMatrix.set(new float[]{\r\n                value / 100f, 0, 0, 0, 0,\r\n                0, value / 100f, 0, 0, 0,\r\n                0, 0, value / 100f, 0, 0,\r\n                0, 0, 0, 1, 0\r\n        });\r\n\r\n        Paint paint = new Paint();\r\n        paint.setColorFilter(new ColorMatrixColorFilter(colorMatrix));\r\n        canvas.drawBitmap(image, 0, 0, paint);\r\n\r\n        return adjustedImage;\r\n    }\r\n\r\n    private Bitmap adjustHue(Bitmap image, float value) {\r\n        Bitmap adjustedImage = Bitmap.createBitmap(image.getWidth(), image.getHeight(), image.getConfig());\r\n        Canvas canvas = new Canvas(adjustedImage);\r\n\r\n        ColorMatrix colorMatrix = new ColorMatrix();\r\n        colorMatrix.setRotate(0, value);\r\n        colorMatrix.setRotate(1, value);\r\n        colorMatrix.setRotate(2, value);\r\n\r\n        Paint paint = new Paint();\r\n        paint.setColorFilter(new ColorMatrixColorFilter(colorMatrix));\r\n        canvas.drawBitmap(image, 0, 0, paint);\r\n\r\n        return adjustedImage;\r\n    }\r\n\r\n    private Bitmap adjustSaturation(Bitmap image, float value) {\r\n        Bitmap adjustedImage = Bitmap.createBitmap(image.getWidth(), image.getHeight(), image.getConfig());\r\n        Canvas canvas = new Canvas(adjustedImage);\r\n\r\n        ColorMatrix colorMatrix = new ColorMatrix();\r\n        colorMatrix.setSaturation(value / 100f);\r\n\r\n        Paint paint = new Paint();\r\n        paint.setColorFilter(new ColorMatrixColorFilter(colorMatrix));\r\n        canvas.drawBitmap(image, 0, 0, paint);\r\n\r\n        return adjustedImage;\r\n    }\r\n\r\n**OnActivityResult**:\r\n\r\n     @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n\r\n        if (requestCode == REQUEST_SELECT_PHOTOS &amp;&amp; resultCode == RESULT_OK) {\r\n            if (data.getClipData() != null) {\r\n                int count = data.getClipData().getItemCount();\r\n                for (int i = 0; i &lt; count; i++) {\r\n                    Uri imageUri = data.getClipData().getItemAt(i).getUri();\r\n                    originalImageUris.add(imageUri);\r\n                    imageView.setImageURI(imageUri);\r\n                }\r\n            }\r\n            else if (data.getData() != null) {\r\n                Uri imageUri = data.getData();\r\n                originalImageUris.add(imageUri);\r\n                imageView.setImageURI(imageUri);\r\n            }\r\n\r\n            // Update the visibility of seek bars and &quot;Generate&quot; button\r\n            if (!originalImageUris.isEmpty()) {\r\n                findViewById(R.id.editOptionsLayout).setVisibility(View.VISIBLE);\r\n                findViewById(R.id.generateButton).setVisibility(View.VISIBLE);\r\n            }\r\n        }\r\n    }","title":"Applying multiple transformation to bitmap image(s)","body":"<p>I am selecting one or more images from gallery and with seek bar i am specifying the range that the transformations will apply, but when i am displaying the images in GridView all images are black! my <code>editedImages</code> is <code>List&lt;Bitmap&gt; editedImages;</code>also i showed how i am using the intent in code below.</p>\n<p>Code :</p>\n<pre><code> private void applyRandomTransformations() {\n\n    Random random = new Random();\n    editedImages.clear();\n\n    for (Uri imageUri : originalImageUris) {\n        try {\n            Bitmap originalImage = MediaStore.Images.Media.getBitmap(getContentResolver(), imageUri);\n\n            if (originalImage.getWidth() &lt;= 0) {\n                // Skip this image if the width is invalid\n                continue;\n            }\n            // Apply rotation\n            int rotationAngle = random.nextInt(MAX_ROTATION_ANGLE);\n            Bitmap rotatedImage = rotateImage(originalImage, rotationAngle);\n\n            // Apply cropping\n            int cropPercentage = random.nextInt(MAX_CROP_PERCENTAGE);\n            Bitmap croppedImage = cropImage(rotatedImage, cropPercentage);\n\n            // Apply contrast adjustment\n            int contrastValue = contrastSeekBar.getProgress() - (MAX_CONTRAST_VALUE / 2);\n            Bitmap contrastedImage = adjustContrast(croppedImage, contrastValue);\n\n            // Apply hue adjustment\n            int hueValue = hueSeekBar.getProgress();\n            Bitmap hueAdjustedImage = adjustHue(contrastedImage, hueValue);\n\n            // Apply saturation adjustment\n            int saturationValue = saturationSeekBar.getProgress() - (MAX_SATURATION_VALUE / 2);\n            Bitmap finalImage = adjustSaturation(hueAdjustedImage, saturationValue);\n\n            editedImages.add(finalImage);\n\n\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n\n    }\n\n}\n\nprivate void displayEditedImages() {\n    if (!editedImages.isEmpty()) {\n\n        Intent intent = new Intent(MainActivity.this, EditedImagesActivity.class);\n\n        // Convert the byte arrays to Bitmap objects\n        ArrayList&lt;Bitmap&gt; bitmaps = new ArrayList&lt;&gt;(editedImages);\n        // Pass the edited images as an ArrayList of Bitmap objects\n        intent.putParcelableArrayListExtra(&quot;editedImages&quot;, bitmaps);\n\n\n        startActivity(intent);\n    }\n}\n\nprivate Bitmap rotateImage(Bitmap image, float angle) {\n    Matrix matrix = new Matrix();\n    matrix.postRotate(angle);\n    return Bitmap.createBitmap(image, 0, 0, image.getWidth(), image.getHeight(), matrix, true);\n}\n\nprivate Bitmap cropImage(Bitmap image, int cropPercentage) {\n    int width = image.getWidth();\n    int height = image.getHeight();\n    int cropSize = Math.min(width, height) * cropPercentage / 100;\n    int left = (width - cropSize) / 2;\n    int top = (height - cropSize) / 2;\n    Bitmap croppedImage = Bitmap.createBitmap(image, left, top, cropSize, cropSize);\n    croppedImage.setHasAlpha(true);\n    return croppedImage;\n}\n\nprivate Bitmap adjustContrast(Bitmap image, float value) {\n    Bitmap adjustedImage = Bitmap.createBitmap(image.getWidth(), image.getHeight(), image.getConfig());\n    Canvas canvas = new Canvas(adjustedImage);\n\n    ColorMatrix colorMatrix = new ColorMatrix();\n    colorMatrix.set(new float[]{\n            value / 100f, 0, 0, 0, 0,\n            0, value / 100f, 0, 0, 0,\n            0, 0, value / 100f, 0, 0,\n            0, 0, 0, 1, 0\n    });\n\n    Paint paint = new Paint();\n    paint.setColorFilter(new ColorMatrixColorFilter(colorMatrix));\n    canvas.drawBitmap(image, 0, 0, paint);\n\n    return adjustedImage;\n}\n\nprivate Bitmap adjustHue(Bitmap image, float value) {\n    Bitmap adjustedImage = Bitmap.createBitmap(image.getWidth(), image.getHeight(), image.getConfig());\n    Canvas canvas = new Canvas(adjustedImage);\n\n    ColorMatrix colorMatrix = new ColorMatrix();\n    colorMatrix.setRotate(0, value);\n    colorMatrix.setRotate(1, value);\n    colorMatrix.setRotate(2, value);\n\n    Paint paint = new Paint();\n    paint.setColorFilter(new ColorMatrixColorFilter(colorMatrix));\n    canvas.drawBitmap(image, 0, 0, paint);\n\n    return adjustedImage;\n}\n\nprivate Bitmap adjustSaturation(Bitmap image, float value) {\n    Bitmap adjustedImage = Bitmap.createBitmap(image.getWidth(), image.getHeight(), image.getConfig());\n    Canvas canvas = new Canvas(adjustedImage);\n\n    ColorMatrix colorMatrix = new ColorMatrix();\n    colorMatrix.setSaturation(value / 100f);\n\n    Paint paint = new Paint();\n    paint.setColorFilter(new ColorMatrixColorFilter(colorMatrix));\n    canvas.drawBitmap(image, 0, 0, paint);\n\n    return adjustedImage;\n}\n</code></pre>\n<p><strong>OnActivityResult</strong>:</p>\n<pre><code> @Override\nprotected void onActivityResult(int requestCode, int resultCode, Intent data) {\n    super.onActivityResult(requestCode, resultCode, data);\n\n    if (requestCode == REQUEST_SELECT_PHOTOS &amp;&amp; resultCode == RESULT_OK) {\n        if (data.getClipData() != null) {\n            int count = data.getClipData().getItemCount();\n            for (int i = 0; i &lt; count; i++) {\n                Uri imageUri = data.getClipData().getItemAt(i).getUri();\n                originalImageUris.add(imageUri);\n                imageView.setImageURI(imageUri);\n            }\n        }\n        else if (data.getData() != null) {\n            Uri imageUri = data.getData();\n            originalImageUris.add(imageUri);\n            imageView.setImageURI(imageUri);\n        }\n\n        // Update the visibility of seek bars and &quot;Generate&quot; button\n        if (!originalImageUris.isEmpty()) {\n            findViewById(R.id.editOptionsLayout).setVisibility(View.VISIBLE);\n            findViewById(R.id.generateButton).setVisibility(View.VISIBLE);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-security","jwt"],"comments":[{"owner":{"account_id":17517154,"reputation":309,"user_id":12703962,"display_name":"spazzola"},"score":0,"creation_date":1585931675,"post_id":61016123,"comment_id":107947733,"body_markdown":"Exception is thrown exactly in method extractAllClaims:  return Jwts.parser().setSigningKey(SECRET_KEY).parseClaimsJwt(token).getBody();","body":"Exception is thrown exactly in method extractAllClaims:  return Jwts.parser().setSigningKey(SECRET_KEY).parseClaimsJwt(token&zwnj;&#8203;).getBody();"},{"owner":{"account_id":6390592,"reputation":16008,"user_id":4956907,"display_name":"Michał Krzywański"},"score":6,"creation_date":1585933002,"post_id":61016123,"comment_id":107948371,"body_markdown":"Shouldnt you use `parseClaimsJws`? Somehting like `Jwts.parser().setSigningKey(SECRET_KEY).parseClaimsJws(token).getBody();`","body":"Shouldnt you use <code>parseClaimsJws</code>? Somehting like <code>Jwts.parser().setSigningKey(SECRET_KEY).parseClaimsJws(token&zwnj;&#8203;).getBody();</code>"},{"owner":{"account_id":17517154,"reputation":309,"user_id":12703962,"display_name":"spazzola"},"score":0,"creation_date":1585934894,"post_id":61016123,"comment_id":107949268,"body_markdown":"That was the mistake. Thanks!","body":"That was the mistake. Thanks!"}],"answers":[{"tags":[],"owner":{"account_id":6390592,"reputation":16008,"user_id":4956907,"display_name":"Michał Krzywański"},"down_vote_count":0,"up_vote_count":68,"is_accepted":true,"score":68,"last_activity_date":1637136343,"creation_date":1585935308,"answer_id":61017392,"question_id":61016123,"body_markdown":"You should use `parseClaimsJws()` instead of `parseClaimsJwt()` to verify the **JWS** (**JWT with signature**) :\r\n\r\n```java\r\nJwts.parser()\r\n    .setSigningKey(SECRET_KEY)\r\n    .parseClaimsJws(token)\r\n    .getBody();\r\n```","title":"io.jsonwebtoken.UnsupportedJwtException: Signed Claims JWSs are not supported","body":"<p>You should use <code>parseClaimsJws()</code> instead of <code>parseClaimsJwt()</code> to verify the <strong>JWS</strong> (<strong>JWT with signature</strong>) :</p>\n<pre class=\"lang-java prettyprint-override\"><code>Jwts.parser()\n    .setSigningKey(SECRET_KEY)\n    .parseClaimsJws(token)\n    .getBody();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9412171,"reputation":448,"user_id":7000862,"display_name":"saurav singh"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1672149914,"creation_date":1672149914,"answer_id":74930280,"question_id":61016123,"body_markdown":"If anyone facing an issue with spring boot 3.0.instead of `parser()` use `parserBuilder()`.\r\n\r\n    Jwts.parserBuilder().setSigningKey(JwtSigningKey).build().parse(token).getBody();\r\n\r\nHope this will help and upvote for upcoming stackoverflowers.","title":"io.jsonwebtoken.UnsupportedJwtException: Signed Claims JWSs are not supported","body":"<p>If anyone facing an issue with spring boot 3.0.instead of <code>parser()</code> use <code>parserBuilder()</code>.</p>\n<pre><code>Jwts.parserBuilder().setSigningKey(JwtSigningKey).build().parse(token).getBody();\n</code></pre>\n<p>Hope this will help and upvote for upcoming stackoverflowers.</p>\n"},{"tags":[],"owner":{"account_id":13938899,"reputation":1,"user_id":10065306,"display_name":"senal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689158474,"creation_date":1689158474,"answer_id":76669685,"question_id":61016123,"body_markdown":"    private Claims extractAllClaims(String token) {\r\n        return Jwts.parserBuilder()\r\n                .setSigningKey(getSigninKey())\r\n                .build()\r\n                .parseClaimsJws(token)\r\n                .getBody();\r\n    }","title":"io.jsonwebtoken.UnsupportedJwtException: Signed Claims JWSs are not supported","body":"<pre><code>private Claims extractAllClaims(String token) {\n    return Jwts.parserBuilder()\n            .setSigningKey(getSigninKey())\n            .build()\n            .parseClaimsJws(token)\n            .getBody();\n}\n</code></pre>\n"}],"owner":{"account_id":17517154,"reputation":309,"user_id":12703962,"display_name":"spazzola"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19582,"favorite_count":0,"down_vote_count":0,"up_vote_count":22,"accepted_answer_id":61017392,"answer_count":3,"score":22,"last_activity_date":1689158474,"creation_date":1585930593,"question_id":61016123,"body_markdown":"I just added Jwt to my application. When I&#39;m trying to send get request via postman which require authorization, then I&#39;ve got following error: \r\n\r\n**io.jsonwebtoken.UnsupportedJwtException: Signed Claims JWSs are not supported.**\r\n\r\nI&#39;m sending in body &quot;Authorization&quot; as a Header and &quot;Bearer token-value&quot; as a Value.\r\n\r\nHave anyone idea how to solve that? \r\n\r\nHere is my jwt class: \r\n    \r\n    @Service\r\n    public class JwtUtil {\r\n\r\n    private String SECRET_KEY = &quot;secret&quot;;\r\n\r\n    public String extractUsername(String token) {\r\n        return extractClaim(token, Claims::getSubject);\r\n    }\r\n\r\n    public Date extractExpiration(String token) {\r\n        return extractClaim(token, Claims::getExpiration);\r\n    }\r\n\r\n    public &lt;T&gt; T extractClaim(String token, Function&lt;Claims, T&gt; claimsResolver) {\r\n        final Claims claims = extractAllClaims(token);\r\n        return claimsResolver.apply(claims);\r\n    }\r\n\r\n    public Claims extractAllClaims(String token) {\r\n        return Jwts.parser().setSigningKey(SECRET_KEY).parseClaimsJwt(token).getBody();\r\n    }\r\n\r\n    public Boolean isTokenExpired(String token) {\r\n        return extractExpiration(token).before(new Date());\r\n    }\r\n\r\n    public String generateToken(UserDetails userDetails) {\r\n        Map&lt;String, Object&gt; claims = new HashMap&lt;&gt;();\r\n        return createToken(claims, userDetails.getUsername());\r\n    }\r\n\r\n    public String createToken(Map&lt;String, Object&gt; claims, String subject) {\r\n        return Jwts.builder()\r\n                .setClaims(claims)\r\n                .setSubject(subject)\r\n                .setIssuedAt(new Date(System.currentTimeMillis()))\r\n                .setExpiration(new Date(System.currentTimeMillis() + 1000 * 60 * 60 * 10))\r\n                .signWith(SignatureAlgorithm.HS256, SECRET_KEY).compact();\r\n    }\r\n\r\n    public Boolean validateToken(String token, UserDetails userDetails) {\r\n        final String userName = extractUsername(token);\r\n        return (userName.equals(userDetails.getUsername()) &amp;&amp; !isTokenExpired(token));\r\n    }\r\n\r\n}\r\n\r\nand here is my filter: \r\n\r\n    @Override\r\n    protected void doFilterInternal(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, FilterChain filterChain) throws ServletException, IOException {\r\n        final String authorizationHeader = httpServletRequest.getHeader(&quot;Authorization&quot;);\r\n\r\n        String userName = null;\r\n        String jwt = null;\r\n\r\n        if (authorizationHeader != null &amp;&amp; authorizationHeader.startsWith(&quot;Bearer&quot;)) {\r\n            jwt = authorizationHeader.substring(7);\r\n            userName = jwtUtil.extractUsername(jwt);\r\n        }\r\n\r\n        if (userName != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) {\r\n            UserDetails userDetails = this.myUserDetailsService.loadUserByUsername(userName);\r\n\r\n            if (jwtUtil.validateToken(jwt, userDetails)) {\r\n                UsernamePasswordAuthenticationToken usernamePasswordAuthenticationToken =\r\n                        new UsernamePasswordAuthenticationToken(userDetails, null, userDetails.getAuthorities());\r\n                usernamePasswordAuthenticationToken.setDetails(new WebAuthenticationDetailsSource().buildDetails(httpServletRequest));\r\n\r\n                SecurityContextHolder.getContext().setAuthentication(usernamePasswordAuthenticationToken);\r\n            }\r\n        }\r\n        filterChain.doFilter(httpServletRequest, httpServletResponse);\r\n    }\r\n\r\n\r\nEDIT: \r\nhere&#39;s stacktrace: \r\n\r\n    io.jsonwebtoken.UnsupportedJwtException: Signed Claims JWSs are not supported.\r\n\tat io.jsonwebtoken.JwtHandlerAdapter.onClaimsJws(JwtHandlerAdapter.java:50) ~[jjwt-0.9.1.jar:0.9.1]\r\n\tat io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:487) ~[jjwt-0.9.1.jar:0.9.1]\r\n\tat io.jsonwebtoken.impl.DefaultJwtParser.parseClaimsJwt(DefaultJwtParser.java:514) ~[jjwt-0.9.1.jar:0.9.1]\r\n\tat com.tradesystem.jwt.JwtUtil.extractAllClaims(JwtUtil.java:33) ~[classes/:na]\r\n\tat com.tradesystem.jwt.JwtUtil.extractClaim(JwtUtil.java:28) ~[classes/:na]\r\n\tat com.tradesystem.jwt.JwtUtil.extractUsername(JwtUtil.java:20) ~[classes/:na]\r\n\tat com.tradesystem.jwt.JwtRequestFilter.doFilterInternal(JwtRequestFilter.java:42) ~[classes/:na]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.2.1.RELEASE.jar:5.2.1.RELEASE]\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116) ~[spring-security-web-5.2.1.RELEASE.jar:5.2.1.RELEASE]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.2.1.RELEASE.jar:5.2.1.RELEASE]\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:92) ~[spring-security-web-5.2.1.RELEASE.jar:5.2.1.RELEASE]\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:77) ~[spring-security-web-5.2.1.RELEASE.jar:5.2.1.RELEASE]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.2.1.RELEASE.jar:5.2.1.RELEASE]\r\n\tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105) ~[spring-security-web-5.2.1.RELEASE.jar:5.2.1.RELEASE]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.2.1.RELEASE.jar:5.2.1.RELEASE]\r\n\tat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56) ~[spring-security-web-5.2.1.RELEASE.jar:5.2.1.RELEASE]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.2.1.RELEASE.jar:5.2.1.RELEASE]\r\n\tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215) ~[spring-security-web-5.2.1.RELEASE.jar:5.2.1.RELEASE]\r\n\tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178) ~[spring-security-web-5.2.1.RELEASE.jar:5.2.1.RELEASE]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358) ~[spring-web-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271) ~[spring-web-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.30.jar:9.0.30]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.30.jar:9.0.30]\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.30.jar:9.0.30]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.30.jar:9.0.30]\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.30.jar:9.0.30]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.30.jar:9.0.30]\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.3.RELEASE.jar:5.2.3.RELEASE]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.30.jar:9.0.30]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.30.jar:9.0.30]\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202) ~[tomcat-embed-core-9.0.30.jar:9.0.30]\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) ~[tomcat-embed-core-9.0.30.jar:9.0.30]\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) ~[tomcat-embed-core-9.0.30.jar:9.0.30]\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) ~[tomcat-embed-core-9.0.30.jar:9.0.30]\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.30.jar:9.0.30]\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.30.jar:9.0.30]\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.30.jar:9.0.30]\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:367) ~[tomcat-embed-core-9.0.30.jar:9.0.30]\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.30.jar:9.0.30]\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:860) ~[tomcat-embed-core-9.0.30.jar:9.0.30]\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1598) ~[tomcat-embed-core-9.0.30.jar:9.0.30]\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.30.jar:9.0.30]\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.30.jar:9.0.30]\r\n\tat java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]\r\n\r\n\r\n----------\r\n\r\n","title":"io.jsonwebtoken.UnsupportedJwtException: Signed Claims JWSs are not supported","body":"<p>I just added Jwt to my application. When I'm trying to send get request via postman which require authorization, then I've got following error: </p>\n\n<p><strong>io.jsonwebtoken.UnsupportedJwtException: Signed Claims JWSs are not supported.</strong></p>\n\n<p>I'm sending in body \"Authorization\" as a Header and \"Bearer token-value\" as a Value.</p>\n\n<p>Have anyone idea how to solve that? </p>\n\n<p>Here is my jwt class: </p>\n\n<pre><code>@Service\npublic class JwtUtil {\n\nprivate String SECRET_KEY = \"secret\";\n\npublic String extractUsername(String token) {\n    return extractClaim(token, Claims::getSubject);\n}\n\npublic Date extractExpiration(String token) {\n    return extractClaim(token, Claims::getExpiration);\n}\n\npublic &lt;T&gt; T extractClaim(String token, Function&lt;Claims, T&gt; claimsResolver) {\n    final Claims claims = extractAllClaims(token);\n    return claimsResolver.apply(claims);\n}\n\npublic Claims extractAllClaims(String token) {\n    return Jwts.parser().setSigningKey(SECRET_KEY).parseClaimsJwt(token).getBody();\n}\n\npublic Boolean isTokenExpired(String token) {\n    return extractExpiration(token).before(new Date());\n}\n\npublic String generateToken(UserDetails userDetails) {\n    Map&lt;String, Object&gt; claims = new HashMap&lt;&gt;();\n    return createToken(claims, userDetails.getUsername());\n}\n\npublic String createToken(Map&lt;String, Object&gt; claims, String subject) {\n    return Jwts.builder()\n            .setClaims(claims)\n            .setSubject(subject)\n            .setIssuedAt(new Date(System.currentTimeMillis()))\n            .setExpiration(new Date(System.currentTimeMillis() + 1000 * 60 * 60 * 10))\n            .signWith(SignatureAlgorithm.HS256, SECRET_KEY).compact();\n}\n\npublic Boolean validateToken(String token, UserDetails userDetails) {\n    final String userName = extractUsername(token);\n    return (userName.equals(userDetails.getUsername()) &amp;&amp; !isTokenExpired(token));\n}\n</code></pre>\n\n<p>}</p>\n\n<p>and here is my filter: </p>\n\n<pre><code>@Override\nprotected void doFilterInternal(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, FilterChain filterChain) throws ServletException, IOException {\n    final String authorizationHeader = httpServletRequest.getHeader(\"Authorization\");\n\n    String userName = null;\n    String jwt = null;\n\n    if (authorizationHeader != null &amp;&amp; authorizationHeader.startsWith(\"Bearer\")) {\n        jwt = authorizationHeader.substring(7);\n        userName = jwtUtil.extractUsername(jwt);\n    }\n\n    if (userName != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) {\n        UserDetails userDetails = this.myUserDetailsService.loadUserByUsername(userName);\n\n        if (jwtUtil.validateToken(jwt, userDetails)) {\n            UsernamePasswordAuthenticationToken usernamePasswordAuthenticationToken =\n                    new UsernamePasswordAuthenticationToken(userDetails, null, userDetails.getAuthorities());\n            usernamePasswordAuthenticationToken.setDetails(new WebAuthenticationDetailsSource().buildDetails(httpServletRequest));\n\n            SecurityContextHolder.getContext().setAuthentication(usernamePasswordAuthenticationToken);\n        }\n    }\n    filterChain.doFilter(httpServletRequest, httpServletResponse);\n}\n</code></pre>\n\n<p>EDIT: \nhere's stacktrace: </p>\n\n<pre><code>io.jsonwebtoken.UnsupportedJwtException: Signed Claims JWSs are not supported.\nat io.jsonwebtoken.JwtHandlerAdapter.onClaimsJws(JwtHandlerAdapter.java:50) ~[jjwt-0.9.1.jar:0.9.1]\nat io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:487) ~[jjwt-0.9.1.jar:0.9.1]\nat io.jsonwebtoken.impl.DefaultJwtParser.parseClaimsJwt(DefaultJwtParser.java:514) ~[jjwt-0.9.1.jar:0.9.1]\nat com.tradesystem.jwt.JwtUtil.extractAllClaims(JwtUtil.java:33) ~[classes/:na]\nat com.tradesystem.jwt.JwtUtil.extractClaim(JwtUtil.java:28) ~[classes/:na]\nat com.tradesystem.jwt.JwtUtil.extractUsername(JwtUtil.java:20) ~[classes/:na]\nat com.tradesystem.jwt.JwtRequestFilter.doFilterInternal(JwtRequestFilter.java:42) ~[classes/:na]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.3.RELEASE.jar:5.2.3.RELEASE]\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.2.1.RELEASE.jar:5.2.1.RELEASE]\nat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116) ~[spring-security-web-5.2.1.RELEASE.jar:5.2.1.RELEASE]\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.2.1.RELEASE.jar:5.2.1.RELEASE]\nat org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:92) ~[spring-security-web-5.2.1.RELEASE.jar:5.2.1.RELEASE]\nat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:77) ~[spring-security-web-5.2.1.RELEASE.jar:5.2.1.RELEASE]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.3.RELEASE.jar:5.2.3.RELEASE]\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.2.1.RELEASE.jar:5.2.1.RELEASE]\nat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105) ~[spring-security-web-5.2.1.RELEASE.jar:5.2.1.RELEASE]\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.2.1.RELEASE.jar:5.2.1.RELEASE]\nat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56) ~[spring-security-web-5.2.1.RELEASE.jar:5.2.1.RELEASE]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.3.RELEASE.jar:5.2.3.RELEASE]\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.2.1.RELEASE.jar:5.2.1.RELEASE]\nat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215) ~[spring-security-web-5.2.1.RELEASE.jar:5.2.1.RELEASE]\nat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178) ~[spring-security-web-5.2.1.RELEASE.jar:5.2.1.RELEASE]\nat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358) ~[spring-web-5.2.3.RELEASE.jar:5.2.3.RELEASE]\nat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271) ~[spring-web-5.2.3.RELEASE.jar:5.2.3.RELEASE]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.30.jar:9.0.30]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.30.jar:9.0.30]\nat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.2.3.RELEASE.jar:5.2.3.RELEASE]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.3.RELEASE.jar:5.2.3.RELEASE]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.30.jar:9.0.30]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.30.jar:9.0.30]\nat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.2.3.RELEASE.jar:5.2.3.RELEASE]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.3.RELEASE.jar:5.2.3.RELEASE]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.30.jar:9.0.30]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.30.jar:9.0.30]\nat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.2.3.RELEASE.jar:5.2.3.RELEASE]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.3.RELEASE.jar:5.2.3.RELEASE]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.30.jar:9.0.30]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.30.jar:9.0.30]\nat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202) ~[tomcat-embed-core-9.0.30.jar:9.0.30]\nat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) ~[tomcat-embed-core-9.0.30.jar:9.0.30]\nat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) ~[tomcat-embed-core-9.0.30.jar:9.0.30]\nat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) ~[tomcat-embed-core-9.0.30.jar:9.0.30]\nat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.30.jar:9.0.30]\nat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.30.jar:9.0.30]\nat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.30.jar:9.0.30]\nat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:367) ~[tomcat-embed-core-9.0.30.jar:9.0.30]\nat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.30.jar:9.0.30]\nat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:860) ~[tomcat-embed-core-9.0.30.jar:9.0.30]\nat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1598) ~[tomcat-embed-core-9.0.30.jar:9.0.30]\nat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.30.jar:9.0.30]\nat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]\nat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]\nat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.30.jar:9.0.30]\nat java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]\n</code></pre>\n\n<hr>\n"},{"tags":["java","spring","spring-boot","hikaricp"],"comments":[{"owner":{"account_id":350117,"reputation":8653,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"score":0,"creation_date":1682352036,"post_id":76093375,"comment_id":134197876,"body_markdown":"It&#39;s not a ready solution, however this is the official explanation about this kind of messages: https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=103099526","body":"It&#39;s not a ready solution, however this is the official explanation about this kind of messages: <a href=\"https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=103099526\" rel=\"nofollow noreferrer\">cwiki.apache.org/confluence/pages/&hellip;</a>"},{"owner":{"account_id":2184749,"reputation":717,"user_id":1933399,"accept_rate":29,"display_name":"The Shoe Shiner"},"score":0,"creation_date":1682507977,"post_id":76093375,"comment_id":134226180,"body_markdown":"@Pino Yea unfortunately that doesn&#39;t really explain why spring isn&#39;t shutting down the Hikari datasource, which is started up by spring itself.","body":"@Pino Yea unfortunately that doesn&#39;t really explain why spring isn&#39;t shutting down the Hikari datasource, which is started up by spring itself."},{"owner":{"account_id":350117,"reputation":8653,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"score":0,"creation_date":1682514266,"post_id":76093375,"comment_id":134227831,"body_markdown":"The error message says that your Spring-boot based web app is named &quot;ROOT&quot;.  Is it true?  I guess no.  This is something to investigate.","body":"The error message says that your Spring-boot based web app is named &quot;ROOT&quot;.  Is it true?  I guess no.  This is something to investigate."},{"owner":{"account_id":2184749,"reputation":717,"user_id":1933399,"accept_rate":29,"display_name":"The Shoe Shiner"},"score":0,"creation_date":1682541675,"post_id":76093375,"comment_id":134234409,"body_markdown":"@Pino Yes I am not sure why it says that. I assumed it was something that spring generated automatically, but I&#39;m not certain.","body":"@Pino Yes I am not sure why it says that. I assumed it was something that spring generated automatically, but I&#39;m not certain."}],"answers":[{"tags":[],"owner":{"account_id":24144518,"reputation":1,"user_id":18110330,"display_name":"Yuvraj Sharma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689158332,"creation_date":1689158332,"answer_id":76669665,"question_id":76093375,"body_markdown":"I had @Type annotation which I removed and got the error then again I put it so error resolved.\r\n\r\n      @Type(type = &quot;json&quot;)\r\n        @Column(columnDefinition = &quot;json&quot;, name = &quot;payload&quot;)\r\n        private Map&lt;String, String&gt; payload;","title":"Spring boot Hikari Pool Threads - &quot;web application appears to have started a thread named [HikariPool-1 housekeeper] but has failed to stop it.&quot;","body":"<p>I had @Type annotation which I removed and got the error then again I put it so error resolved.</p>\n<pre><code>  @Type(type = &quot;json&quot;)\n    @Column(columnDefinition = &quot;json&quot;, name = &quot;payload&quot;)\n    private Map&lt;String, String&gt; payload;\n</code></pre>\n"}],"owner":{"account_id":2184749,"reputation":717,"user_id":1933399,"accept_rate":29,"display_name":"The Shoe Shiner"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1557,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689158332,"creation_date":1682349002,"question_id":76093375,"body_markdown":"(A similar question [here][1] is related to Tomcat resources, not spring boot managed beans)\r\n\r\nTwo Hikari DataSource pools are being creating like this:\r\n\r\n    @Primary\r\n    \t@Bean(value=&quot;appDataSource&quot;,destroyMethod=&quot;close&quot;)\r\n    \t@ConfigurationProperties(&quot;app.db.datasource&quot;)\r\n    \t@Override\r\n    \tpublic DataSource dataSource() {\r\n    \t\treturn DataSourceBuilder.create().build(); \r\n    \t}\r\n    \r\n    \r\n    @Bean(value=&quot;pacsDataSource&quot;,destroyMethod=&quot;close&quot;)\r\n    \t@Override\r\n        public DataSource dataSource() {\r\n    \t\treturn new HikariDataSource(hikariConfig());\r\n        }\r\n\r\nBut when the application is shut down I see the below errors in the logs and the java process fails to exit. From what I can tell spring should be calling close() on those datasources, which should terminate the pool threads.\r\n\r\n   \r\n\r\n     2023-04-24T11:02:24.758 [https-jsse-nio-8080-exec-2] WARN  org.apache.catalina.loader.WebappClassLoaderBase - The web application [ROOT] appears to have started a thread named [HikariPool-1 housekeeper] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:\r\n         java.base@15.0.1/jdk.internal.misc.Unsafe.park(Native Method)\r\n         java.base@15.0.1/java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:252)\r\n         java.base@15.0.1/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:1661)\r\n         java.base@15.0.1/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1182)\r\n         java.base@15.0.1/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:899)\r\n         java.base@15.0.1/java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1056)\r\n         java.base@15.0.1/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1116)\r\n         java.base@15.0.1/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)\r\n         java.base@15.0.1/java.lang.Thread.run(Thread.java:832)\r\n    \r\n    2023-04-24T11:02:24.759 [https-jsse-nio-8080-exec-2] WARN  org.apache.catalina.loader.WebappClassLoaderBase - The web application [ROOT] appears to have started a thread named [HikariPool-2 housekeeper] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:\r\n     java.base@15.0.1/jdk.internal.misc.Unsafe.park(Native Method)\r\n     java.base@15.0.1/java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:252)\r\n     java.base@15.0.1/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:1661)\r\n     java.base@15.0.1/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1182)\r\n     java.base@15.0.1/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:899)\r\n     java.base@15.0.1/java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1056)\r\n     java.base@15.0.1/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1116)\r\n     java.base@15.0.1/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)\r\n     java.base@15.0.1/java.lang.Thread.run(Thread.java:832)\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/41836059/the-web-application-appears-to-have-started-a-thread-named-hikaripool-1-houseke\r\n\r\nEdit: Oddly enough I have one VM where this error does *not* prevent the java process from exiting. So I&#39;m working on trying to figure out the difference. The .jar is exactly the same, but there are other environmental differences. Either way it seems like the process should exit when spring is boot shutdown.","title":"Spring boot Hikari Pool Threads - &quot;web application appears to have started a thread named [HikariPool-1 housekeeper] but has failed to stop it.&quot;","body":"<p>(A similar question <a href=\"https://stackoverflow.com/questions/41836059/the-web-application-appears-to-have-started-a-thread-named-hikaripool-1-houseke\">here</a> is related to Tomcat resources, not spring boot managed beans)</p>\n<p>Two Hikari DataSource pools are being creating like this:</p>\n<pre><code>@Primary\n    @Bean(value=&quot;appDataSource&quot;,destroyMethod=&quot;close&quot;)\n    @ConfigurationProperties(&quot;app.db.datasource&quot;)\n    @Override\n    public DataSource dataSource() {\n        return DataSourceBuilder.create().build(); \n    }\n\n\n@Bean(value=&quot;pacsDataSource&quot;,destroyMethod=&quot;close&quot;)\n    @Override\n    public DataSource dataSource() {\n        return new HikariDataSource(hikariConfig());\n    }\n</code></pre>\n<p>But when the application is shut down I see the below errors in the logs and the java process fails to exit. From what I can tell spring should be calling close() on those datasources, which should terminate the pool threads.</p>\n<pre><code> 2023-04-24T11:02:24.758 [https-jsse-nio-8080-exec-2] WARN  org.apache.catalina.loader.WebappClassLoaderBase - The web application [ROOT] appears to have started a thread named [HikariPool-1 housekeeper] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:\n     java.base@15.0.1/jdk.internal.misc.Unsafe.park(Native Method)\n     java.base@15.0.1/java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:252)\n     java.base@15.0.1/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:1661)\n     java.base@15.0.1/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1182)\n     java.base@15.0.1/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:899)\n     java.base@15.0.1/java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1056)\n     java.base@15.0.1/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1116)\n     java.base@15.0.1/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)\n     java.base@15.0.1/java.lang.Thread.run(Thread.java:832)\n\n2023-04-24T11:02:24.759 [https-jsse-nio-8080-exec-2] WARN  org.apache.catalina.loader.WebappClassLoaderBase - The web application [ROOT] appears to have started a thread named [HikariPool-2 housekeeper] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:\n java.base@15.0.1/jdk.internal.misc.Unsafe.park(Native Method)\n java.base@15.0.1/java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:252)\n java.base@15.0.1/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:1661)\n java.base@15.0.1/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1182)\n java.base@15.0.1/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:899)\n java.base@15.0.1/java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1056)\n java.base@15.0.1/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1116)\n java.base@15.0.1/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)\n java.base@15.0.1/java.lang.Thread.run(Thread.java:832)\n</code></pre>\n<p>Edit: Oddly enough I have one VM where this error does <em>not</em> prevent the java process from exiting. So I'm working on trying to figure out the difference. The .jar is exactly the same, but there are other environmental differences. Either way it seems like the process should exit when spring is boot shutdown.</p>\n"},{"tags":["java","c#","performance","dictionary"],"comments":[{"owner":{"account_id":115043,"reputation":10123,"user_id":302248,"accept_rate":77,"display_name":"Sach"},"score":2,"creation_date":1507586801,"post_id":46655665,"comment_id":80260441,"body_markdown":"Your method is the right way to go about it. Perhaps write a quick function for it so you can reuse?","body":"Your method is the right way to go about it. Perhaps write a quick function for it so you can reuse?"},{"owner":{"account_id":221336,"reputation":21834,"user_id":479251,"accept_rate":83,"display_name":"Pac0"},"score":0,"creation_date":1507586812,"post_id":46655665,"comment_id":80260446,"body_markdown":"It&#39;s not the main point of the question, but anyway : `var oldValue = null;` doesn&#39;t make sense. If you initialize a variable with null, either declare it the correct type, or cast the null to the correct type, but `var` can&#39;t be inferred by the compiler otherwise.","body":"It&#39;s not the main point of the question, but anyway : <code>var oldValue = null;</code> doesn&#39;t make sense. If you initialize a variable with null, either declare it the correct type, or cast the null to the correct type, but <code>var</code> can&#39;t be inferred by the compiler otherwise."},{"owner":{"account_id":1210689,"reputation":1608,"user_id":1179284,"accept_rate":76,"display_name":"AndrewP"},"score":1,"creation_date":1507587358,"post_id":46655665,"comment_id":80260618,"body_markdown":"@ekaerovets, doing lookup by key in a dictionary is a very quick operation. don&#39;t worry about the overhead of doing so. If you are worried, remember the first rule of Code Optimisation: Don&#39;t.  (http://wiki.c2.com/?RulesOfOptimization)","body":"@ekaerovets, doing lookup by key in a dictionary is a very quick operation. don&#39;t worry about the overhead of doing so. If you are worried, remember the first rule of Code Optimisation: Don&#39;t.  (<a href=\"http://wiki.c2.com/?RulesOfOptimization\" rel=\"nofollow noreferrer\">wiki.c2.com/?RulesOfOptimization</a>)"},{"owner":{"account_id":3435465,"reputation":390,"user_id":2878684,"display_name":"OctoCode"},"score":0,"creation_date":1507587391,"post_id":46655665,"comment_id":80260634,"body_markdown":"Just write the helper method which is going to read, update and return the old value.","body":"Just write the helper method which is going to read, update and return the old value."},{"owner":{"account_id":3145484,"reputation":1158,"user_id":2660039,"accept_rate":50,"display_name":"ekaerovets"},"score":0,"creation_date":1507587507,"post_id":46655665,"comment_id":80260664,"body_markdown":"@AndrewP actually two lines of boilerplate code bother me more, than the extra lookup. Anyway, I got the idea.","body":"@AndrewP actually two lines of boilerplate code bother me more, than the extra lookup. Anyway, I got the idea."},{"owner":{"account_id":6111237,"reputation":18715,"user_id":4767498,"accept_rate":87,"display_name":"M.kazem Akhgary"},"score":0,"creation_date":1507587868,"post_id":46655665,"comment_id":80260783,"body_markdown":"dictionary look up performance mostly depends on performance of `GetHashCode` and `Equals` that is implemented for key object. since keys are string here, pass `StringComparer.Ordinal` to dictionary constructor for better performance. also dictionary that has not been filled to its maximum capacity will perform demonstrably faster. if you are doing few look ups you shouldn&#39;t even care about these.","body":"dictionary look up performance mostly depends on performance of <code>GetHashCode</code> and <code>Equals</code> that is implemented for key object. since keys are string here, pass <code>StringComparer.Ordinal</code> to dictionary constructor for better performance. also dictionary that has not been filled to its maximum capacity will perform demonstrably faster. if you are doing few look ups you shouldn&#39;t even care about these."}],"answers":[{"tags":[],"owner":{"account_id":115043,"reputation":10123,"user_id":302248,"accept_rate":77,"display_name":"Sach"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1507589206,"creation_date":1507587893,"answer_id":46655862,"question_id":46655665,"body_markdown":"You can make use of Extension Methods and write one.\r\n\r\nBelow returns true/false depending on if key is found or not.\r\n\r\n    public static bool UpdateDictionaryAndGetOldValue(this Dictionary&lt;string, string&gt; dict, string key, string newVal, out string oldVal)\r\n    {\r\n        oldVal = string.Empty;\r\n        if (dict.TryGetValue(key, out oldVal))\r\n        {\r\n            dict[key] = newVal;\r\n            return true;\r\n        }\r\n        else\r\n            return false;\r\n    }\r\n\r\nThis returns the old value.\r\n\r\n    public static string UpdateDictionaryAndGetOldValue(this Dictionary&lt;string, string&gt; dict, string key, string newVal)\r\n    {\r\n        string oldVal = string.Empty;\r\n        dict.TryGetValue(key, out oldVal);\r\n        dict[key] = newVal;\r\n        return oldVal;\r\n    }\r\n\r\nAnd `TK` and `TV` can be used to make this general.","title":"Update dictionary value and get the previous one in C#","body":"<p>You can make use of Extension Methods and write one.</p>\n\n<p>Below returns true/false depending on if key is found or not.</p>\n\n<pre><code>public static bool UpdateDictionaryAndGetOldValue(this Dictionary&lt;string, string&gt; dict, string key, string newVal, out string oldVal)\n{\n    oldVal = string.Empty;\n    if (dict.TryGetValue(key, out oldVal))\n    {\n        dict[key] = newVal;\n        return true;\n    }\n    else\n        return false;\n}\n</code></pre>\n\n<p>This returns the old value.</p>\n\n<pre><code>public static string UpdateDictionaryAndGetOldValue(this Dictionary&lt;string, string&gt; dict, string key, string newVal)\n{\n    string oldVal = string.Empty;\n    dict.TryGetValue(key, out oldVal);\n    dict[key] = newVal;\n    return oldVal;\n}\n</code></pre>\n\n<p>And <code>TK</code> and <code>TV</code> can be used to make this general.</p>\n"},{"tags":[],"owner":{"account_id":4253888,"reputation":2207,"user_id":8365439,"display_name":"Valerii"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1507589490,"creation_date":1507588468,"answer_id":46655961,"question_id":46655665,"body_markdown":"    public static class DictionaryExtensions\r\n    {\r\n        public static TValue UpdateAndGet&lt;TKey, TValue&gt;(this Dictionary&lt;TKey, TValue&gt; dictionary, TKey key, TValue newVal)\r\n        {\r\n            TValue oldVal;\r\n            dictionary.TryGetValue(key, out oldVal);\r\n            dictionary[key] = newVal;\r\n\r\n            return oldVal;\r\n        }\r\n    }","title":"Update dictionary value and get the previous one in C#","body":"<pre><code>public static class DictionaryExtensions\n{\n    public static TValue UpdateAndGet&lt;TKey, TValue&gt;(this Dictionary&lt;TKey, TValue&gt; dictionary, TKey key, TValue newVal)\n    {\n        TValue oldVal;\n        dictionary.TryGetValue(key, out oldVal);\n        dictionary[key] = newVal;\n\n        return oldVal;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9211539,"reputation":7783,"user_id":6844481,"accept_rate":100,"display_name":"Shahar Shokrani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689156440,"creation_date":1535441939,"answer_id":52052521,"question_id":46655665,"body_markdown":"You can make use of the built in `AddOrUpdate` method of the &quot;thread-safe&quot; `ConcurrentDictionary&lt;TKey,TValue&gt;` class which inherits from `IDictionary&lt;TKey,TValue&gt;` like:\r\n\r\n    public static ConcurrentDictionary&lt;string, Country&gt; countries = new ConcurrentDictionary&lt;string, Country&gt;();\r\n\r\n    public void Main()\r\n    {\r\n        Country poland = new Country { Name = &quot;Poland&quot;, Capital = &quot;Krakow&quot; };\r\n        countries[poland.Name] = poland; \r\n        // oops lets update the right capital:\r\n        poland.Capital = &quot;Warsaw&quot;;\r\n\r\n        myList.AddOrUpdate(poland.Name, poland, (key, oldValue) =&gt; \r\n                                             {\r\n                                                 Console.WriteLine($&quot;The old value was: &#39;{oldValue}&#39;&quot;);  \r\n                                                 return oldValue; \r\n                                             });\r\n    }\r\n\r\n    //Output: The old value was: &#39;Krakow&#39;\r\n\r\nSee more info on [msdn][1].\r\n\r\n\r\n  [1]: https://learn.microsoft.com/en-us/dotnet/api/system.collections.concurrent.concurrentdictionary-2.addorupdate?redirectedfrom=MSDN&amp;view=netframework-4.7.2","title":"Update dictionary value and get the previous one in C#","body":"<p>You can make use of the built in <code>AddOrUpdate</code> method of the &quot;thread-safe&quot; <code>ConcurrentDictionary&lt;TKey,TValue&gt;</code> class which inherits from <code>IDictionary&lt;TKey,TValue&gt;</code> like:</p>\n<pre><code>public static ConcurrentDictionary&lt;string, Country&gt; countries = new ConcurrentDictionary&lt;string, Country&gt;();\n\npublic void Main()\n{\n    Country poland = new Country { Name = &quot;Poland&quot;, Capital = &quot;Krakow&quot; };\n    countries[poland.Name] = poland; \n    // oops lets update the right capital:\n    poland.Capital = &quot;Warsaw&quot;;\n\n    myList.AddOrUpdate(poland.Name, poland, (key, oldValue) =&gt; \n                                         {\n                                             Console.WriteLine($&quot;The old value was: '{oldValue}'&quot;);  \n                                             return oldValue; \n                                         });\n}\n\n//Output: The old value was: 'Krakow'\n</code></pre>\n<p>See more info on <a href=\"https://learn.microsoft.com/en-us/dotnet/api/system.collections.concurrent.concurrentdictionary-2.addorupdate?redirectedfrom=MSDN&amp;view=netframework-4.7.2\" rel=\"nofollow noreferrer\">msdn</a>.</p>\n"},{"tags":[],"owner":{"account_id":15495526,"reputation":36852,"user_id":11178549,"display_name":"Theodor Zoulias"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689157766,"creation_date":1689157766,"answer_id":76669598,"question_id":46655665,"body_markdown":"Starting from .NET 6 you could use the advanced API [`CollectionsMarshal.GetValueRefOrAddDefault`][1], and do the `AddOrUpdate` operation with a single key hashing:\r\n\r\n    public static void AddOrUpdate&lt;TKey, TValue&gt;(\r\n        this Dictionary&lt;TKey, TValue&gt; dictionary,\r\n        TKey key, TValue value,\r\n        out bool oldValueExists, out TValue oldValue)\r\n    {\r\n        ref TValue valueRef = ref CollectionsMarshal\r\n            .GetValueRefOrAddDefault(dictionary, key, out oldValueExists);\r\n        oldValue = valueRef;\r\n        valueRef = value;\r\n    }\r\n\r\nThis is the signature of the `CollectionsMarshal.GetValueRefOrAddDefault` method:\r\n\r\n    // Gets a reference to a TValue in the specified dictionary,\r\n    // adding a new entry with a default value if the key does not exist.\r\n    public static ref TValue? GetValueRefOrAddDefault&lt;TKey,TValue&gt;(\r\n        Dictionary&lt;TKey,TValue&gt; dictionary, TKey key, out bool exists);\r\n\r\n  [1]: https://learn.microsoft.com/en-us/dotnet/api/system.runtime.interopservices.collectionsmarshal.getvaluereforadddefault","title":"Update dictionary value and get the previous one in C#","body":"<p>Starting from .NET 6 you could use the advanced API <a href=\"https://learn.microsoft.com/en-us/dotnet/api/system.runtime.interopservices.collectionsmarshal.getvaluereforadddefault\" rel=\"nofollow noreferrer\"><code>CollectionsMarshal.GetValueRefOrAddDefault</code></a>, and do the <code>AddOrUpdate</code> operation with a single key hashing:</p>\n<pre><code>public static void AddOrUpdate&lt;TKey, TValue&gt;(\n    this Dictionary&lt;TKey, TValue&gt; dictionary,\n    TKey key, TValue value,\n    out bool oldValueExists, out TValue oldValue)\n{\n    ref TValue valueRef = ref CollectionsMarshal\n        .GetValueRefOrAddDefault(dictionary, key, out oldValueExists);\n    oldValue = valueRef;\n    valueRef = value;\n}\n</code></pre>\n<p>This is the signature of the <code>CollectionsMarshal.GetValueRefOrAddDefault</code> method:</p>\n<pre><code>// Gets a reference to a TValue in the specified dictionary,\n// adding a new entry with a default value if the key does not exist.\npublic static ref TValue? GetValueRefOrAddDefault&lt;TKey,TValue&gt;(\n    Dictionary&lt;TKey,TValue&gt; dictionary, TKey key, out bool exists);\n</code></pre>\n"}],"owner":{"account_id":3145484,"reputation":1158,"user_id":2660039,"accept_rate":50,"display_name":"ekaerovets"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7074,"favorite_count":0,"down_vote_count":1,"up_vote_count":6,"accepted_answer_id":46655961,"answer_count":4,"score":5,"last_activity_date":1689157923,"creation_date":1507586634,"question_id":46655665,"body_markdown":"I&#39;ve came to C# world from Java background.\r\n\r\nI need to update the value in a map/dictionary and get the previous value (or null if there were none). I would do the following in Java:\r\n\r\n```java\r\nString oldValue = myMap.put(key, newValue);\r\nsomeFunction(oldValue, newValue);\r\n```\r\n\r\nIn C# I use `Dictionary`, but I&#39;ve found no method to get the previous value on update. So far I need to perform 2 lookups to accomplish this, which I see not very optimal in terms of performance and lines of code\r\n\r\n    string oldValue = null;\r\n    myDictionary.TryGetValue(key, oldValue);\r\n    myDictionary[key] = newValue;\r\n    SomeFunction(oldValue, newValue);\r\n\r\nIs there an easier way to update value and get the previous one?","title":"Update dictionary value and get the previous one in C#","body":"<p>I've came to C# world from Java background.</p>\n<p>I need to update the value in a map/dictionary and get the previous value (or null if there were none). I would do the following in Java:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String oldValue = myMap.put(key, newValue);\nsomeFunction(oldValue, newValue);\n</code></pre>\n<p>In C# I use <code>Dictionary</code>, but I've found no method to get the previous value on update. So far I need to perform 2 lookups to accomplish this, which I see not very optimal in terms of performance and lines of code</p>\n<pre><code>string oldValue = null;\nmyDictionary.TryGetValue(key, oldValue);\nmyDictionary[key] = newValue;\nSomeFunction(oldValue, newValue);\n</code></pre>\n<p>Is there an easier way to update value and get the previous one?</p>\n"},{"tags":["java","karate"],"comments":[{"owner":{"account_id":48302,"reputation":55353,"user_id":143475,"display_name":"Peter Thomas"},"score":0,"creation_date":1681105913,"post_id":75974522,"comment_id":133999166,"body_markdown":"hopefully someone else can help here, but in my opinion you have missed something from the archetype which only you can figure out. if maven and the archetype is too hard, you can use the VS code plugin (which bundles the karate runtime) and start running feature files: https://marketplace.visualstudio.com/items?itemName=karatelabs.karate","body":"hopefully someone else can help here, but in my opinion you have missed something from the archetype which only you can figure out. if maven and the archetype is too hard, you can use the VS code plugin (which bundles the karate runtime) and start running feature files: <a href=\"https://marketplace.visualstudio.com/items?itemName=karatelabs.karate\" rel=\"nofollow noreferrer\">marketplace.visualstudio.com/items?itemName=karatelabs.karat&zwnj;&#8203;e</a>"},{"owner":{"account_id":2065621,"reputation":3902,"user_id":1841181,"accept_rate":54,"display_name":"xploreraj"},"score":0,"creation_date":1681124888,"post_id":75974522,"comment_id":134001918,"body_markdown":"Thank you Peter, I am only looking forward to work on Idea and its running as I explain below: \nI moved the `users.feature` directly into `java` directory. Now, I am able to run it with absolute path - `/users/xploreraj/repo/myProject/ftModule`, but not with &quot;classpath:&quot; which should be the way to introduce the tests in my project. Should the &quot;classpath:&quot; resolve to the path till ft module since the test runners are placed inside that module?","body":"Thank you Peter, I am only looking forward to work on Idea and its running as I explain below:  I moved the <code>users.feature</code> directly into <code>java</code> directory. Now, I am able to run it with absolute path - <code>&#47;users&#47;xploreraj&#47;repo&#47;myProject&#47;ftModule</code>, but not with &quot;classpath:&quot; which should be the way to introduce the tests in my project. Should the &quot;classpath:&quot; resolve to the path till ft module since the test runners are placed inside that module?"},{"owner":{"account_id":48302,"reputation":55353,"user_id":143475,"display_name":"Peter Thomas"},"score":0,"creation_date":1681126068,"post_id":75974522,"comment_id":134002115,"body_markdown":"everything depends on how your project is set up. yes, normally the `src/test/java` folder should be the root of the `classpath:`, refer the docs: https://github.com/karatelabs/karate#classpath - if you still are stuck and need help, follow this process: https://github.com/karatelabs/karate/wiki/How-to-Submit-an-Issue","body":"everything depends on how your project is set up. yes, normally the <code>src&#47;test&#47;java</code> folder should be the root of the <code>classpath:</code>, refer the docs: <a href=\"https://github.com/karatelabs/karate#classpath\" rel=\"nofollow noreferrer\">github.com/karatelabs/karate#classpath</a> - if you still are stuck and need help, follow this process: <a href=\"https://github.com/karatelabs/karate/wiki/How-to-Submit-an-Issue\" rel=\"nofollow noreferrer\">github.com/karatelabs/karate/wiki/How-to-Submit-an-Issue</a>"},{"owner":{"account_id":2065621,"reputation":3902,"user_id":1841181,"accept_rate":54,"display_name":"xploreraj"},"score":0,"creation_date":1681127157,"post_id":75974522,"comment_id":134002311,"body_markdown":"I have fixed the issue and added the answer to the question too. Thank you once again :)","body":"I have fixed the issue and added the answer to the question too. Thank you once again :)"}],"answers":[{"tags":[],"owner":{"account_id":2065621,"reputation":3902,"user_id":1841181,"accept_rate":54,"display_name":"xploreraj"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681125904,"creation_date":1681125904,"answer_id":75976661,"question_id":75974522,"body_markdown":"The solution is to inform Maven to point to `src/test/java` instead of defaulting to `src/test/resources` as outlined here: https://github.com/karatelabs/karate#folder-structure\r\n\r\n    &lt;build&gt;\r\n        &lt;testResources&gt;\r\n            &lt;testResource&gt;\r\n                &lt;directory&gt;src/test/java&lt;/directory&gt;\r\n                &lt;excludes&gt;\r\n                    &lt;exclude&gt;**/*.java&lt;/exclude&gt;\r\n                &lt;/excludes&gt;\r\n            &lt;/testResource&gt;\r\n        &lt;/testResources&gt;        \r\n        &lt;plugins&gt;\r\n        ...\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n\r\nAnd then `Karate.run(&quot;classpath:&lt;path_to_feature_directory_or_file&gt;&quot;)` will work properly.\r\n\r\nI could only figure this out once I used absolute path to debug the issue. Hope it helps others.","title":"Unable to run karate tests - feature file not found","body":"<p>The solution is to inform Maven to point to <code>src/test/java</code> instead of defaulting to <code>src/test/resources</code> as outlined here: <a href=\"https://github.com/karatelabs/karate#folder-structure\" rel=\"nofollow noreferrer\">https://github.com/karatelabs/karate#folder-structure</a></p>\n<pre><code>&lt;build&gt;\n    &lt;testResources&gt;\n        &lt;testResource&gt;\n            &lt;directory&gt;src/test/java&lt;/directory&gt;\n            &lt;excludes&gt;\n                &lt;exclude&gt;**/*.java&lt;/exclude&gt;\n            &lt;/excludes&gt;\n        &lt;/testResource&gt;\n    &lt;/testResources&gt;        \n    &lt;plugins&gt;\n    ...\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n<p>And then <code>Karate.run(&quot;classpath:&lt;path_to_feature_directory_or_file&gt;&quot;)</code> will work properly.</p>\n<p>I could only figure this out once I used absolute path to debug the issue. Hope it helps others.</p>\n"},{"tags":[],"owner":{"account_id":20717463,"reputation":190,"user_id":15212573,"display_name":"roudlek"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689157328,"creation_date":1689157328,"answer_id":76669540,"question_id":75974522,"body_markdown":"please refer to karate official documentation :\r\nfor does ho get a null pointer exception and exceptionInitialize or something like that: https://github.com/karatelabs/karate\r\n\r\nthis one dependencie does the job :\r\n\r\n    &lt;dependencies&gt;         \r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.intuit.karate&lt;/groupId&gt;\r\n            &lt;artifactId&gt;karate-junit5&lt;/artifactId&gt;\r\n            &lt;version&gt;1.4.0&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\t\t\r\n    &lt;/dependencies&gt; \r\n\r\ni got this from : official documentation","title":"Unable to run karate tests - feature file not found","body":"<p>please refer to karate official documentation :\nfor does ho get a null pointer exception and exceptionInitialize or something like that: <a href=\"https://github.com/karatelabs/karate\" rel=\"nofollow noreferrer\">https://github.com/karatelabs/karate</a></p>\n<p>this one dependencie does the job :</p>\n<pre><code>&lt;dependencies&gt;         \n    &lt;dependency&gt;\n        &lt;groupId&gt;com.intuit.karate&lt;/groupId&gt;\n        &lt;artifactId&gt;karate-junit5&lt;/artifactId&gt;\n        &lt;version&gt;1.4.0&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;       \n&lt;/dependencies&gt; \n</code></pre>\n<p>i got this from : official documentation</p>\n"}],"owner":{"account_id":2065621,"reputation":3902,"user_id":1841181,"accept_rate":54,"display_name":"xploreraj"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":659,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75976661,"answer_count":2,"score":1,"last_activity_date":1689157328,"creation_date":1681104987,"question_id":75974522,"body_markdown":"I am getting error - no features or scenarios found.\r\n\r\nInitially, I wrote my own feature but after repeated failures, I tried copying the entire `src/test/java` directory from the demo karate project generated using archetype and removed my own files, but what works there, fails in my own project.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/bdCus.png\r\n\r\nDependency in my pom which is also same as the demo project:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.intuit.karate&lt;/groupId&gt;\r\n        &lt;artifactId&gt;karate-junit5&lt;/artifactId&gt;\r\n        &lt;version&gt;1.3.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nI am running UsersRunner.java. Below is the error:\r\n\r\n\r\n    org.opentest4j.AssertionFailedError: no features or scenarios found: [classpath:examples/users]\r\n    at com.intuit.karate.junit5.Karate.iterator(Karate.java:72)","title":"Unable to run karate tests - feature file not found","body":"<p>I am getting error - no features or scenarios found.</p>\n<p>Initially, I wrote my own feature but after repeated failures, I tried copying the entire <code>src/test/java</code> directory from the demo karate project generated using archetype and removed my own files, but what works there, fails in my own project.</p>\n<p><a href=\"https://i.stack.imgur.com/bdCus.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bdCus.png\" alt=\"enter image description here\" /></a></p>\n<p>Dependency in my pom which is also same as the demo project:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.intuit.karate&lt;/groupId&gt;\n    &lt;artifactId&gt;karate-junit5&lt;/artifactId&gt;\n    &lt;version&gt;1.3.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>I am running UsersRunner.java. Below is the error:</p>\n<pre><code>org.opentest4j.AssertionFailedError: no features or scenarios found: [classpath:examples/users]\nat com.intuit.karate.junit5.Karate.iterator(Karate.java:72)\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-cloud","hystrix"],"comments":[{"owner":{"account_id":1368060,"reputation":24601,"user_id":2730527,"display_name":"spencergibb"},"score":0,"creation_date":1625157950,"post_id":68212747,"comment_id":120559561,"body_markdown":"That works in my test. What project has the hystrix dashboard dependency? Idea will never resolve most hystrix.* properties. Can you check the value of `hystrix.dashboard.proxy-stream-allow-list` in /actuator/configprops?","body":"That works in my test. What project has the hystrix dashboard dependency? Idea will never resolve most hystrix.* properties. Can you check the value of <code>hystrix.dashboard.proxy-stream-allow-list</code> in /actuator/configprops?"},{"owner":{"account_id":21059096,"reputation":121,"user_id":15477842,"display_name":"Mykola"},"score":0,"creation_date":1625225701,"post_id":68212747,"comment_id":120577496,"body_markdown":"@spencergibb, I added configprops to `management.endpoints.web.exposure.include` and opened the webpage on url http://localhost:8080/actuator/configprops, but I do not see `proxy-stream-allow-list` field. Please, check update screen in Q.","body":"@spencergibb, I added configprops to <code>management.endpoints.web.exposure.include</code> and opened the webpage on url <a href=\"http://localhost:8080/actuator/configprops\" rel=\"nofollow noreferrer\">localhost:8080/actuator/configprops</a>, but I do not see <code>proxy-stream-allow-list</code> field. Please, check update screen in Q."},{"owner":{"account_id":1368060,"reputation":24601,"user_id":2730527,"display_name":"spencergibb"},"score":0,"creation_date":1625611411,"post_id":68212747,"comment_id":120671518,"body_markdown":"Then the problem is it isn&#39;t configured correctly. You never answered which project has the dashboard dependency.","body":"Then the problem is it isn&#39;t configured correctly. You never answered which project has the dashboard dependency."},{"owner":{"account_id":21059096,"reputation":121,"user_id":15477842,"display_name":"Mykola"},"score":0,"creation_date":1626184650,"post_id":68212747,"comment_id":120821627,"body_markdown":"@spencergibb I create new module for dashboard called hystrix-dashboard.","body":"@spencergibb I create new module for dashboard called hystrix-dashboard."},{"owner":{"account_id":1368060,"reputation":24601,"user_id":2730527,"display_name":"spencergibb"},"score":0,"creation_date":1626272432,"post_id":68212747,"comment_id":120849023,"body_markdown":"And what does that projects application.yml look like?","body":"And what does that projects application.yml look like?"},{"owner":{"account_id":21059096,"reputation":121,"user_id":15477842,"display_name":"Mykola"},"score":0,"creation_date":1626335744,"post_id":68212747,"comment_id":120866742,"body_markdown":"Module &#39;hystrix-dashboard&#39; has only server.port property in application.properties. It starts on port 9195. I updated a question.","body":"Module &#39;hystrix-dashboard&#39; has only server.port property in application.properties. It starts on port 9195. I updated a question."},{"owner":{"account_id":1368060,"reputation":24601,"user_id":2730527,"display_name":"spencergibb"},"score":0,"creation_date":1626387995,"post_id":68212747,"comment_id":120886786,"body_markdown":"Put `hystrix.dashboard.proxy-stream-allow-list` configuration in that project","body":"Put <code>hystrix.dashboard.proxy-stream-allow-list</code> configuration in that project"}],"answers":[{"tags":[],"owner":{"account_id":28984857,"reputation":1,"user_id":22201878,"display_name":"aiyi-rain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689157023,"creation_date":1688980223,"answer_id":76652295,"question_id":68212747,"body_markdown":"modfiy application.yml\r\n\r\n```yaml\r\n  management:\r\n    endpoints:\r\n        web:\r\n          exposure:\r\n            include: hystrix.stream\r\n      endpoint:\r\n        hystrix:\r\n          stream:\r\n            enabled: true\r\n    hystrix:\r\n      dashboard:\r\n        proxy-stream-allow-list: 127.0.0.1,1xx.xxx.xxx.xxx\r\n```","title":"How to solve &#39;Unable to connect to Command Metric Stream.&#39; for Hystrix with Spring Boot 2.3.12 and Java 11?","body":"<p>modfiy application.yml</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>  management:\n    endpoints:\n        web:\n          exposure:\n            include: hystrix.stream\n      endpoint:\n        hystrix:\n          stream:\n            enabled: true\n    hystrix:\n      dashboard:\n        proxy-stream-allow-list: 127.0.0.1,1xx.xxx.xxx.xxx\n</code></pre>\n"}],"owner":{"account_id":21059096,"reputation":121,"user_id":15477842,"display_name":"Mykola"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":428,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1689157023,"creation_date":1625152296,"question_id":68212747,"body_markdown":"I am making an application using Spring Boot 2.3.12, Java 11 and Spring Cloud Hoxton.SR11. I added Eureka and Hystrix services. When I call &#39;http://localhost:8080/actuator/hystrix.stream&#39; I get a stream of messages like `data: {&quot;type&quot;: &quot;ping&quot;}`. \r\n\r\nBut when I insert this path into &#39;http://localhost:9195/hystrix/&#39; I get an error message &#39;Unable to connect to Command Metric Stream.&#39; and WARN-log *&#39;Origin parameter: http://localhost:8080/actuator/hystrix.stream is not in the allowed list of proxy host names. If it should be allowed add it to hystrix.dashboard.proxyStreamAllowList&#39;*.\r\n\r\nI added this to gateway properties.yaml:\r\n```java\r\nmanagement:\r\n  endpoints:\r\n    web:\r\n      exposure:\r\n        include: hystrix.stream, info, health\r\n\r\nhystrix:\r\n  dashboard:\r\n    proxy-stream-allow-list: &quot;*&quot;\r\n  command:\r\n    default:\r\n      execution:\r\n        isolation:\r\n          thread:\r\n            timeoutInMilliseconds: 10000\r\n```\r\n\r\n[![EUREKA][1]][1]\r\n\r\n[![HYSTRIX][2]][2]\r\n\r\n**Additional info:** \r\n\r\n1. I added `spring-boot-starter-actuator` to pom.xml of gateway-service. I also added `spring-cloud-starter-circuitbreaker-reactor-resilience4j`.\r\n2. IntelliJ IDEA marked `proxy-stream-allow-list` and `timeoutInMilliseconds` as *&#39;Cannot resolve configuration property&#39;*\r\n3. These links didn&#39;t help: https://stackoverflow.com/questions/51177728/unable-to-connect-to-command-metric-stream-in-hystrix-dashboard, https://stackoverflow.com/questions/49792290/unable-to-connect-to-command-metric-stream-for-hystrix-dashboard-with-spring-clo, https://stackoverflow.com/questions/41300418/hystrix-unable-to-connect-to-command-metric-stream, https://stackoverflow.com/questions/39752946/hystrix-dashboard-issue-in-spring-boot, https://stackoverflow.com/questions/59738969/unable-to-connect-to-command-metric-stream-in-hystrix-dashboard-issue.\r\n\r\n**UPDATE 1:**\r\n[![unresolved dependency][3]][3]\r\n\r\n**UPDATE 2:**\r\n\r\nI use Hystrix Dashboard as separate new Java module. This module contains application.properties:\r\n```properties\r\nserver.port=9195\r\n```\r\nAnd main class:\r\n```java\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\nimport org.springframework.cloud.netflix.hystrix.dashboard.EnableHystrixDashboard;\r\n\r\n@SpringBootApplication\r\n@EnableHystrixDashboard\r\npublic class HystrixDashboardApplication {\r\n\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(HystrixDashboardApplication.class, args);\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/dEjFJ.png\r\n  [2]: https://i.stack.imgur.com/rsXX3.png\r\n  [3]: https://i.stack.imgur.com/AfCdl.png","title":"How to solve &#39;Unable to connect to Command Metric Stream.&#39; for Hystrix with Spring Boot 2.3.12 and Java 11?","body":"<p>I am making an application using Spring Boot 2.3.12, Java 11 and Spring Cloud Hoxton.SR11. I added Eureka and Hystrix services. When I call 'http://localhost:8080/actuator/hystrix.stream' I get a stream of messages like <code>data: {&quot;type&quot;: &quot;ping&quot;}</code>.</p>\n<p>But when I insert this path into 'http://localhost:9195/hystrix/' I get an error message 'Unable to connect to Command Metric Stream.' and WARN-log <em>'Origin parameter: http://localhost:8080/actuator/hystrix.stream is not in the allowed list of proxy host names. If it should be allowed add it to hystrix.dashboard.proxyStreamAllowList'</em>.</p>\n<p>I added this to gateway properties.yaml:</p>\n<pre class=\"lang-java prettyprint-override\"><code>management:\n  endpoints:\n    web:\n      exposure:\n        include: hystrix.stream, info, health\n\nhystrix:\n  dashboard:\n    proxy-stream-allow-list: &quot;*&quot;\n  command:\n    default:\n      execution:\n        isolation:\n          thread:\n            timeoutInMilliseconds: 10000\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/dEjFJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dEjFJ.png\" alt=\"EUREKA\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/rsXX3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rsXX3.png\" alt=\"HYSTRIX\" /></a></p>\n<p><strong>Additional info:</strong></p>\n<ol>\n<li>I added <code>spring-boot-starter-actuator</code> to pom.xml of gateway-service. I also added <code>spring-cloud-starter-circuitbreaker-reactor-resilience4j</code>.</li>\n<li>IntelliJ IDEA marked <code>proxy-stream-allow-list</code> and <code>timeoutInMilliseconds</code> as <em>'Cannot resolve configuration property'</em></li>\n<li>These links didn't help: <a href=\"https://stackoverflow.com/questions/51177728/unable-to-connect-to-command-metric-stream-in-hystrix-dashboard\">Unable to connect to Command Metric Stream in hystrix dashboard</a>, <a href=\"https://stackoverflow.com/questions/49792290/unable-to-connect-to-command-metric-stream-for-hystrix-dashboard-with-spring-clo\">Unable to connect to Command Metric Stream for Hystrix Dashboard with Spring Cloud</a>, <a href=\"https://stackoverflow.com/questions/41300418/hystrix-unable-to-connect-to-command-metric-stream\">Hystrix: Unable to connect to Command Metric Stream</a>, <a href=\"https://stackoverflow.com/questions/39752946/hystrix-dashboard-issue-in-spring-boot\">Hystrix Dashboard Issue in Spring Boot</a>, <a href=\"https://stackoverflow.com/questions/59738969/unable-to-connect-to-command-metric-stream-in-hystrix-dashboard-issue\">Unable to connect to Command Metric Stream. in Hystrix Dashboard issue</a>.</li>\n</ol>\n<p><strong>UPDATE 1:</strong>\n<a href=\"https://i.stack.imgur.com/AfCdl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AfCdl.png\" alt=\"unresolved dependency\" /></a></p>\n<p><strong>UPDATE 2:</strong></p>\n<p>I use Hystrix Dashboard as separate new Java module. This module contains application.properties:</p>\n<pre><code>server.port=9195\n</code></pre>\n<p>And main class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.cloud.netflix.hystrix.dashboard.EnableHystrixDashboard;\n\n@SpringBootApplication\n@EnableHystrixDashboard\npublic class HystrixDashboardApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(HystrixDashboardApplication.class, args);\n    }\n\n}\n</code></pre>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":19580981,"reputation":106,"user_id":14330061,"display_name":"dauthDaert06"},"score":0,"creation_date":1689159217,"post_id":76669486,"comment_id":135172992,"body_markdown":"I have a similar endpoint. Im returning ResponseEntity&lt;ByteArrayResource&gt; instead of byte[], and contentType is set to MediaType.APPLICATION_OCTET_STREAM. You can try those maybe.","body":"I have a similar endpoint. Im returning ResponseEntity&lt;ByteArrayResource&gt; instead of byte[], and contentType is set to MediaType.APPLICATION_OCTET_STREAM. You can try those maybe."},{"owner":{"account_id":23713509,"reputation":104,"user_id":17735015,"display_name":"HamzaDevXX"},"score":0,"creation_date":1689159953,"post_id":76669486,"comment_id":135173179,"body_markdown":"@dauthDaert06 I created a ByteArrayResource : `ByteArrayResource resource = new ByteArrayResource(file);`\nand returned `return new ResponseEntity&lt;&gt;(resource, headers, HttpStatus.OK);`\nwhen I test it I download empty file ( o octet) without any extension","body":"@dauthDaert06 I created a ByteArrayResource : <code>ByteArrayResource resource = new ByteArrayResource(file);</code> and returned <code>return new ResponseEntity&lt;&gt;(resource, headers, HttpStatus.OK);</code> when I test it I download empty file ( o octet) without any extension"},{"owner":{"account_id":19580981,"reputation":106,"user_id":14330061,"display_name":"dauthDaert06"},"score":0,"creation_date":1689163500,"post_id":76669486,"comment_id":135173892,"body_markdown":"Hmm.. are you in control of the database ? When client uploads a file, you are the one who inserts the file to the database and can you change the table (add a column) ?","body":"Hmm.. are you in control of the database ? When client uploads a file, you are the one who inserts the file to the database and can you change the table (add a column) ?"},{"owner":{"account_id":23713509,"reputation":104,"user_id":17735015,"display_name":"HamzaDevXX"},"score":0,"creation_date":1689164267,"post_id":76669486,"comment_id":135174098,"body_markdown":"Yes, are you thinking of adding new column to store the file type ? or changing the data type of the file to VARCHAR (encode the file to base64) ?","body":"Yes, are you thinking of adding new column to store the file type ? or changing the data type of the file to VARCHAR (encode the file to base64) ?"},{"owner":{"account_id":23713509,"reputation":104,"user_id":17735015,"display_name":"HamzaDevXX"},"score":0,"creation_date":1689164632,"post_id":76669486,"comment_id":135174187,"body_markdown":"well, by using ByteArrayResource the downloaded file is not empty but it doesn&#39;t have extension.","body":"well, by using ByteArrayResource the downloaded file is not empty but it doesn&#39;t have extension."},{"owner":{"account_id":19580981,"reputation":106,"user_id":14330061,"display_name":"dauthDaert06"},"score":1,"creation_date":1689164789,"post_id":76669486,"comment_id":135174217,"body_markdown":"Yes I was thinking of adding fileName column if that solves your problem. MultipartFile has a method getOriginalFilename() which returns the fullname (like &#39;image.png&#39;). And when serving you can add this name in the header.\n`FileEntity fileEntity = myService.findDocByCode(code);\nreturn ResponseEntity.ok()\n                    .contentType(MediaType.APPLICATION_OCTET_STREAM)\n                    .header(HttpHeaders.CONTENT_DISPOSITION, &quot;attachment; filename=\\&quot;&quot; + fileEntity .getFileName() + &quot;\\&quot;&quot;)\n                    .body(new ByteArrayResource(fileEntity .getFile()));`","body":"Yes I was thinking of adding fileName column if that solves your problem. MultipartFile has a method getOriginalFilename() which returns the fullname (like &#39;image.png&#39;). And when serving you can add this name in the header. <code>FileEntity fileEntity = myService.findDocByCode(code); return ResponseEntity.ok()                     .contentType(MediaType.APPLICATION_OCTET_STREAM)                     .header(HttpHeaders.CONTENT_DISPOSITION, &quot;attachment; filename=\\&quot;&quot; + fileEntity .getFileName() + &quot;\\&quot;&quot;)                     .body(new ByteArrayResource(fileEntity .getFile()));</code>"},{"owner":{"account_id":23713509,"reputation":104,"user_id":17735015,"display_name":"HamzaDevXX"},"score":0,"creation_date":1689164966,"post_id":76669486,"comment_id":135174257,"body_markdown":"@dauthDaert06 I didn&#39;t want to add more columns but it seems to be my only solution, I&#39;ll do it.\n Next time I&#39;ll use base64 instead of this. Thank you.","body":"@dauthDaert06 I didn&#39;t want to add more columns but it seems to be my only solution, I&#39;ll do it.  Next time I&#39;ll use base64 instead of this. Thank you."},{"owner":{"account_id":23713509,"reputation":104,"user_id":17735015,"display_name":"HamzaDevXX"},"score":0,"creation_date":1689165966,"post_id":76669486,"comment_id":135174500,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/254464/discussion-between-hamzadevxx-and-dauthdaert06).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/254464/discussion-between-hamzadevxx-and-dauthdaert06\">continue this discussion in chat</a>."}],"owner":{"account_id":23713509,"reputation":104,"user_id":17735015,"display_name":"HamzaDevXX"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689156862,"creation_date":1689156862,"question_id":76669486,"body_markdown":"In the project&#39;s requirements the user should be able to upload image or pdf and later can download it.\r\n\r\nFor now I know how to do it if the type of the file is known, for example if it&#39;s a Pdf :\r\n\r\n\r\n\r\n    public ResponseEntity&lt;byte[]&gt; getSupportDoc(@PathVariable String code) throws Exception {\r\n    \r\n      byte[] file = myService.findDocByCode(code).getFile();\r\n    \r\n        HttpHeaders headers = new HttpHeaders();\r\n        headers.setContentType(MediaType.APPLICATION_PDF);\r\n        headers.setContentLength(file.length);\r\n    \r\n    \r\n        return new ResponseEntity&lt;&gt;(file, headers, HttpStatus.OK);\r\n        }\r\n\r\n\r\nthis works perfectly, and if the file is image I need just to change the line:\r\n\r\n    headers.setContentType(MediaType.APPLICATION_PDF);\r\n\r\nto:\r\n\r\n    headers.setContentType(MediaType.IMAGE_JPEG);\r\n\r\nMy question is how to detect automatically the type and set the MediaType ?\r\n I have read this answer :\r\n\r\nhttps://stackoverflow.com/questions/19912267/how-to-get-a-file-name-from-a-files-byte-array\r\n\r\nbut I&#39;m wondering if there&#39;s any easier way to do it\r\n\r\n","title":"How to download image or pdf stored as LONGBLOB in database in Spring boot","body":"<p>In the project's requirements the user should be able to upload image or pdf and later can download it.</p>\n<p>For now I know how to do it if the type of the file is known, for example if it's a Pdf :</p>\n<pre><code>public ResponseEntity&lt;byte[]&gt; getSupportDoc(@PathVariable String code) throws Exception {\n\n  byte[] file = myService.findDocByCode(code).getFile();\n\n    HttpHeaders headers = new HttpHeaders();\n    headers.setContentType(MediaType.APPLICATION_PDF);\n    headers.setContentLength(file.length);\n\n\n    return new ResponseEntity&lt;&gt;(file, headers, HttpStatus.OK);\n    }\n</code></pre>\n<p>this works perfectly, and if the file is image I need just to change the line:</p>\n<pre><code>headers.setContentType(MediaType.APPLICATION_PDF);\n</code></pre>\n<p>to:</p>\n<pre><code>headers.setContentType(MediaType.IMAGE_JPEG);\n</code></pre>\n<p>My question is how to detect automatically the type and set the MediaType ?\nI have read this answer :</p>\n<p><a href=\"https://stackoverflow.com/questions/19912267/how-to-get-a-file-name-from-a-files-byte-array\">How to get a file name from a file&#39;s byte array?</a></p>\n<p>but I'm wondering if there's any easier way to do it</p>\n"},{"tags":["java","spring","spring-security","toggle"],"comments":[{"owner":{"account_id":167914,"reputation":5962,"user_id":393021,"accept_rate":62,"display_name":"Igbanam"},"score":0,"creation_date":1695407861,"post_id":76609890,"comment_id":136025410,"body_markdown":"The magic for me here was to expose `togglz` as a management endpoint","body":"The magic for me here was to expose <code>togglz</code> as a management endpoint"}],"answers":[{"tags":[],"owner":{"account_id":5421563,"reputation":5502,"user_id":4315049,"accept_rate":57,"display_name":"robjwilkins"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689156798,"creation_date":1689156798,"answer_id":76669471,"question_id":76609890,"body_markdown":"The cause of this problem is that when the request for `/togglz-console` is checked by `PathPatternMatchableHandlerMapping` it looks at\r\n\r\n```\r\nServletRequestPathUtils.getParsedRequestPath(request).pathWithinApplication()\r\n```\r\nThe request path _is_ `/togglz-console`, however `pathWithinApplication()` returns `&quot;&quot;`. For some reason `/togglz-console` is not being considered &#39;part of the application&#39; (perhaps because it&#39;s being provided as a 3rd party add-on).\r\n\r\nA solution to this is to add special `requestMatcher`, which can be configured to look at the whole request path, and ignore the `pathWithinApplication`.\r\n\r\nfor example:\r\n\r\n```java\r\n@Bean\r\npublic SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n    return http.authorizeHttpRequests(requests -&gt; \r\n         requests\r\n             .requestMatchers(customMatcher(&quot;/togglz-console&quot;),\r\n                              customMatcher(&quot;/togglz-console/*&quot;))\r\n             .permitAll()\r\n             .requestMatchers(&quot;/public&quot;)\r\n             .permitAll()\r\n             .anyRequest()\r\n             .authenticated()\r\n             .formLogin(withDefaults())\r\n             .build();\r\n}\r\n\r\nprivate RequestMatcher customMatcher(String pattern) {\r\n    return request -&gt; {\r\n        var matcher = new PathPatternParser().parse(pattern);\r\n        var path = ServletRequestPathUtils.parseAndCache(request);\r\n        return matcher.matches(path);\r\n    };\r\n}\r\n```","title":"Exclude togglz-console from spring security","body":"<p>The cause of this problem is that when the request for <code>/togglz-console</code> is checked by <code>PathPatternMatchableHandlerMapping</code> it looks at</p>\n<pre><code>ServletRequestPathUtils.getParsedRequestPath(request).pathWithinApplication()\n</code></pre>\n<p>The request path <em>is</em> <code>/togglz-console</code>, however <code>pathWithinApplication()</code> returns <code>&quot;&quot;</code>. For some reason <code>/togglz-console</code> is not being considered 'part of the application' (perhaps because it's being provided as a 3rd party add-on).</p>\n<p>A solution to this is to add special <code>requestMatcher</code>, which can be configured to look at the whole request path, and ignore the <code>pathWithinApplication</code>.</p>\n<p>for example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n    return http.authorizeHttpRequests(requests -&gt; \n         requests\n             .requestMatchers(customMatcher(&quot;/togglz-console&quot;),\n                              customMatcher(&quot;/togglz-console/*&quot;))\n             .permitAll()\n             .requestMatchers(&quot;/public&quot;)\n             .permitAll()\n             .anyRequest()\n             .authenticated()\n             .formLogin(withDefaults())\n             .build();\n}\n\nprivate RequestMatcher customMatcher(String pattern) {\n    return request -&gt; {\n        var matcher = new PathPatternParser().parse(pattern);\n        var path = ServletRequestPathUtils.parseAndCache(request);\n        return matcher.matches(path);\n    };\n}\n</code></pre>\n"}],"owner":{"account_id":5421563,"reputation":5502,"user_id":4315049,"accept_rate":57,"display_name":"robjwilkins"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":229,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76669471,"answer_count":1,"score":2,"last_activity_date":1689156798,"creation_date":1688452284,"question_id":76609890,"body_markdown":"I&#39;d like to exclude the toggle-console from being included in the spring-security auth process: I want to access it on the management port without auth. Despite adding matchers to the requestMatchers in my WebSecurityConfig the console is always  blocked by the login prompt.\r\n\r\nThe SecurityFilterChain bean I have:\r\n```java\r\n  @Bean\r\n  public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n      return http\r\n              .authorizeHttpRequests(requests -&gt; requests\r\n                      .requestMatchers(&quot;/actuator&quot;,\r\n                              &quot;/actuator/*&quot;,\r\n                              &quot;/togglz-console&quot;,\r\n                              &quot;/togglz-console/**&quot;,\r\n                              &quot;/togglz*&quot;,\r\n                              &quot;/togglz**&quot;\r\n                      )\r\n                      .permitAll()\r\n                      .anyRequest()\r\n                      .authenticated()\r\n              )\r\n              .csrf(AbstractHttpConfigurer::disable)\r\n              .formLogin(AbstractAuthenticationFilterConfigurer::permitAll)\r\n              .logout(LogoutConfigurer::permitAll)\r\n              .build();\r\n  }\r\n```\r\n\r\nin application.properties I have the following:\r\n```yaml\r\ntogglz:\r\n  enabled:\r\n    true\r\n  features:\r\n    CHEEKY_GREETING:\r\n      enabled: false\r\n  console:\r\n    secured: false\r\n    use-management-port: true\r\n  endpoint:\r\n    enabled: true\r\n    id: togglz\r\nmanagement:\r\n  endpoints:\r\n    web:\r\n      exposure:\r\n        include: &#39;togglz, health&#39;\r\n  server:\r\n    port: 8081\r\n```\r\n\r\nMy project has the following dependencies:\r\n```groovy\r\nplugins {\r\n    id &#39;org.springframework.boot&#39; version &#39;3.1.0&#39;\r\n    id &#39;io.spring.dependency-management&#39; version &#39;1.1.0&#39;\r\n    id &#39;java&#39;\r\n}\r\next {\r\n    togglz_version = &quot;4.0.1&quot;\r\n}\r\ndependencies {\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-actuator&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-security&#39;\r\n\r\n    testImplementation(&#39;org.springframework.boot:spring-boot-starter-test&#39;)\r\n\r\n    implementation(&quot;org.togglz:togglz-spring-boot-starter:${togglz_version}&quot;)\r\n    implementation(&quot;org.togglz:togglz-console:${togglz_version}&quot;)\r\n}\r\n```\r\nI tried adding the `togglz-security-spring-boot-starter` too, but made no change.\r\n\r\nCode all on a branch here: https://github.com/robjwilkins/showcase/tree/add/togglz\r\n\r\nAny suggestions what I&#39;m doing wrong? thanks","title":"Exclude togglz-console from spring security","body":"<p>I'd like to exclude the toggle-console from being included in the spring-security auth process: I want to access it on the management port without auth. Despite adding matchers to the requestMatchers in my WebSecurityConfig the console is always  blocked by the login prompt.</p>\n<p>The SecurityFilterChain bean I have:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  @Bean\n  public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n      return http\n              .authorizeHttpRequests(requests -&gt; requests\n                      .requestMatchers(&quot;/actuator&quot;,\n                              &quot;/actuator/*&quot;,\n                              &quot;/togglz-console&quot;,\n                              &quot;/togglz-console/**&quot;,\n                              &quot;/togglz*&quot;,\n                              &quot;/togglz**&quot;\n                      )\n                      .permitAll()\n                      .anyRequest()\n                      .authenticated()\n              )\n              .csrf(AbstractHttpConfigurer::disable)\n              .formLogin(AbstractAuthenticationFilterConfigurer::permitAll)\n              .logout(LogoutConfigurer::permitAll)\n              .build();\n  }\n</code></pre>\n<p>in application.properties I have the following:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>togglz:\n  enabled:\n    true\n  features:\n    CHEEKY_GREETING:\n      enabled: false\n  console:\n    secured: false\n    use-management-port: true\n  endpoint:\n    enabled: true\n    id: togglz\nmanagement:\n  endpoints:\n    web:\n      exposure:\n        include: 'togglz, health'\n  server:\n    port: 8081\n</code></pre>\n<p>My project has the following dependencies:</p>\n<pre><code>plugins {\n    id 'org.springframework.boot' version '3.1.0'\n    id 'io.spring.dependency-management' version '1.1.0'\n    id 'java'\n}\next {\n    togglz_version = &quot;4.0.1&quot;\n}\ndependencies {\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n    implementation 'org.springframework.boot:spring-boot-starter-actuator'\n    implementation 'org.springframework.boot:spring-boot-starter-security'\n\n    testImplementation('org.springframework.boot:spring-boot-starter-test')\n\n    implementation(&quot;org.togglz:togglz-spring-boot-starter:${togglz_version}&quot;)\n    implementation(&quot;org.togglz:togglz-console:${togglz_version}&quot;)\n}\n</code></pre>\n<p>I tried adding the <code>togglz-security-spring-boot-starter</code> too, but made no change.</p>\n<p>Code all on a branch here: <a href=\"https://github.com/robjwilkins/showcase/tree/add/togglz\" rel=\"nofollow noreferrer\">https://github.com/robjwilkins/showcase/tree/add/togglz</a></p>\n<p>Any suggestions what I'm doing wrong? thanks</p>\n"},{"tags":["java","birt"],"comments":[{"owner":{"account_id":1072326,"reputation":1069,"user_id":1071302,"accept_rate":43,"display_name":"Sundar G"},"score":0,"creation_date":1345640216,"post_id":12072082,"comment_id":16127648,"body_markdown":"Can you elaborate a little bit.I didn&#39;t get your point?","body":"Can you elaborate a little bit.I didn&#39;t get your point?"},{"owner":{"account_id":1699305,"reputation":2918,"user_id":1559854,"accept_rate":56,"display_name":"vmb"},"score":0,"creation_date":1346834248,"post_id":12072082,"comment_id":16465368,"body_markdown":"Serial number should reset based on grouping.","body":"Serial number should reset based on grouping."},{"owner":{"account_id":1699305,"reputation":2918,"user_id":1559854,"accept_rate":56,"display_name":"vmb"},"score":0,"creation_date":1346834526,"post_id":12072082,"comment_id":16465485,"body_markdown":"if we grouping employess based on job role,serial number should reset to 1 after every job role","body":"if we grouping employess based on job role,serial number should reset to 1 after every job role"}],"answers":[{"tags":[],"owner":{"account_id":170731,"reputation":4483,"user_id":397667,"accept_rate":100,"display_name":"bw_&#252;ezi"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1347376036,"creation_date":1347376036,"answer_id":12372781,"question_id":12072082,"body_markdown":"Serial Number may be a confusing word...&lt;br&gt;\r\nI think you look for something like a Row Number that is reset to 1 for each group.\r\n\r\nTry this:\r\n\r\n- Add Aggregation\r\n\r\nin the Aggregation Binding Builder use these values:\r\n\r\n    Column Binding Name:    SerialNumber\r\n    Data Type:              Float\r\n    Function:               RUNNINGSUM\r\n    Expression:             1\r\n    Aggregation On:         Group\r\n\r\n","title":"How to add Serial Number column in BIRT","body":"<p>Serial Number may be a confusing word...<br>\nI think you look for something like a Row Number that is reset to 1 for each group.</p>\n\n<p>Try this:</p>\n\n<ul>\n<li>Add Aggregation</li>\n</ul>\n\n<p>in the Aggregation Binding Builder use these values:</p>\n\n<pre><code>Column Binding Name:    SerialNumber\nData Type:              Float\nFunction:               RUNNINGSUM\nExpression:             1\nAggregation On:         Group\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2621378,"reputation":44,"user_id":2269315,"display_name":"Farrukh Afzaal Kurd"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1365666889,"creation_date":1365666889,"answer_id":15943445,"question_id":12072082,"body_markdown":"I normally add an aggregation function with data type float and function running count for this kind of problem, just place the aggregate on group, so that the number will be reset on change of group.","title":"How to add Serial Number column in BIRT","body":"<p>I normally add an aggregation function with data type float and function running count for this kind of problem, just place the aggregate on group, so that the number will be reset on change of group.</p>\n"},{"tags":[],"owner":{"account_id":4715973,"reputation":9,"user_id":3815093,"display_name":"user3815093"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1404801005,"creation_date":1404801005,"answer_id":24625063,"question_id":12072082,"body_markdown":"7.\tIf we need S.No Click on computed columns ---- &gt;Click on New computed column Button ---- &gt;\r\nEnter Column Name(S.No)--- &gt;Select Data type--- &gt;Select Aggregation In our Example Running Count -- ---- &gt; OK\r\n \r\n","title":"How to add Serial Number column in BIRT","body":"<ol>\n<li>If we need S.No Click on computed columns ---- >Click on New computed column Button ---- >\nEnter Column Name(S.No)--- >Select Data type--- >Select Aggregation In our Example Running Count -- ---- > OK</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":26607121,"reputation":11,"user_id":20227771,"display_name":"Thưởng Tạ Quang"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689156368,"creation_date":1689156098,"answer_id":76669376,"question_id":12072082,"body_markdown":"I can runningcount for me!!!\r\ndata type: integer\r\nfunction: runningcount\r\nexpression: vars[&quot;no&quot;]\r\naggregate on: group","title":"How to add Serial Number column in BIRT","body":"<p>I can runningcount for me!!!\ndata type: integer\nfunction: runningcount\nexpression: vars[&quot;no&quot;]\naggregate on: group</p>\n"}],"owner":{"account_id":1699305,"reputation":2918,"user_id":1559854,"accept_rate":56,"display_name":"vmb"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5703,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":12372781,"answer_count":4,"score":2,"last_activity_date":1689156368,"creation_date":1345634903,"question_id":12072082,"body_markdown":"I want to add a serial number column in birt report.It should be reset based on grouping.How can i achieve this in BIRT?\r\n\r\nExample:\r\n\r\n    | SerialNumber | Job Role | Employee       |\r\n    |              | role1    |                |\r\n    |       1      |          | Mickey Mouse   |\r\n    |       2      |          | Goofy          |\r\n    |       3      |          | Pluto          |\r\n    |              | role2    |                |\r\n    |       1      |          | Donald Duck    |\r\n    |              | role3    |                |\r\n    |       1      |          | Minnie Mouse   |\r\n    |       2      |          | Doctor Einmug  |\r\n","title":"How to add Serial Number column in BIRT","body":"<p>I want to add a serial number column in birt report.It should be reset based on grouping.How can i achieve this in BIRT?</p>\n\n<p>Example:</p>\n\n<pre><code>| SerialNumber | Job Role | Employee       |\n|              | role1    |                |\n|       1      |          | Mickey Mouse   |\n|       2      |          | Goofy          |\n|       3      |          | Pluto          |\n|              | role2    |                |\n|       1      |          | Donald Duck    |\n|              | role3    |                |\n|       1      |          | Minnie Mouse   |\n|       2      |          | Doctor Einmug  |\n</code></pre>\n"},{"tags":["java","vaadin","vaadin24"],"comments":[{"owner":{"account_id":15754805,"reputation":805,"user_id":11368281,"display_name":"Sascha I&#223;br&#252;cker"},"score":2,"creation_date":1687451866,"post_id":76533511,"comment_id":134942140,"body_markdown":"The dependency / JAR file that you added through Maven does not contain that class. It&#39;s part of the project&#39;s demo module, which doesn&#39;t seem to be distributed through Maven: https://github.com/stefanuebe/vaadin_fullcalendar/blob/master/demo","body":"The dependency / JAR file that you added through Maven does not contain that class. It&#39;s part of the project&#39;s demo module, which doesn&#39;t seem to be distributed through Maven: <a href=\"https://github.com/stefanuebe/vaadin_fullcalendar/blob/master/demo\" rel=\"nofollow noreferrer\">github.com/stefanuebe/vaadin_fullcalendar/blob/master/demo</a>"},{"owner":{"account_id":4107094,"reputation":350,"user_id":3370777,"display_name":"James"},"score":0,"creation_date":1687532907,"post_id":76533511,"comment_id":134955028,"body_markdown":"hello Sascha is there any way to use that import ?","body":"hello Sascha is there any way to use that import ?"},{"owner":{"account_id":15754805,"reputation":805,"user_id":11368281,"display_name":"Sascha I&#223;br&#252;cker"},"score":1,"creation_date":1687537519,"post_id":76533511,"comment_id":134955998,"body_markdown":"Why do you want to use it, it&#39;s only for demonstration purposes? Looking at the examples on the page that you linked, you are supposed to use an `EntryProvider` with the component.","body":"Why do you want to use it, it&#39;s only for demonstration purposes? Looking at the examples on the page that you linked, you are supposed to use an <code>EntryProvider</code> with the component."}],"answers":[{"tags":[],"owner":{"account_id":4107094,"reputation":350,"user_id":3370777,"display_name":"James"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689156335,"creation_date":1689156335,"answer_id":76669405,"question_id":76533511,"body_markdown":"As sasha metioned this import is from the demos and it just for demostration.\r\n\r\n    import org.vaadin.stefan.ui.view.demos.entryproviders.EntryService;\r\n\r\nIf you want to use entryservice you have to manually create the java class and the package inside your own application.","title":"FullCalendar Component in Vaadin import not working","body":"<p>As sasha metioned this import is from the demos and it just for demostration.</p>\n<pre><code>import org.vaadin.stefan.ui.view.demos.entryproviders.EntryService;\n</code></pre>\n<p>If you want to use entryservice you have to manually create the java class and the package inside your own application.</p>\n"}],"owner":{"account_id":4107094,"reputation":350,"user_id":3370777,"display_name":"James"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76669405,"answer_count":1,"score":0,"last_activity_date":1689156335,"creation_date":1687447932,"question_id":76533511,"body_markdown":"Pretty much the title, i&#39;m using [this Vaadin component](https://vaadin.com/directory/component/full-calendar-flow) to implement a calendar in my application.  \r\nThis is the relevant part of my Pom.xml file:\r\n```    \r\n        &lt;repository&gt;\r\n            &lt;id&gt;Vaadin Directory&lt;/id&gt;\r\n            &lt;url&gt;https://maven.vaadin.com/vaadin-addons&lt;/url&gt;\r\n            &lt;snapshots&gt;\r\n                &lt;enabled&gt;false&lt;/enabled&gt;\r\n            &lt;/snapshots&gt;\r\n        &lt;/repository&gt;\r\n                                /////////////\r\n\r\n         &lt;dependency&gt;\r\n            &lt;groupId&gt;org.vaadin.stefan&lt;/groupId&gt;\r\n            &lt;artifactId&gt;fullcalendar2&lt;/artifactId&gt;\r\n            &lt;version&gt;6.0.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n```\r\nI should be able to use this import, anywhere in my application:\r\n\r\n``` \r\nimport org.vaadin.stefan.ui.view.demos.entryproviders.EntryService;\r\n```\r\n\r\nBut i can&#39;t i continuosly run into the error:\r\n\r\n``` \r\nThe import org.vaadin.stefan.ui cannot be resolvedJava(268435846)\r\n```\r\n\r\nWitch is very strange since the import should work.  \r\n\r\nCan you help me make org.vaadin.stefan.ui work?","title":"FullCalendar Component in Vaadin import not working","body":"<p>Pretty much the title, i'm using <a href=\"https://vaadin.com/directory/component/full-calendar-flow\" rel=\"nofollow noreferrer\">this Vaadin component</a> to implement a calendar in my application.<br />\nThis is the relevant part of my Pom.xml file:</p>\n<pre><code>        &lt;repository&gt;\n            &lt;id&gt;Vaadin Directory&lt;/id&gt;\n            &lt;url&gt;https://maven.vaadin.com/vaadin-addons&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;false&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n        &lt;/repository&gt;\n                                /////////////\n\n         &lt;dependency&gt;\n            &lt;groupId&gt;org.vaadin.stefan&lt;/groupId&gt;\n            &lt;artifactId&gt;fullcalendar2&lt;/artifactId&gt;\n            &lt;version&gt;6.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>I should be able to use this import, anywhere in my application:</p>\n<pre><code>import org.vaadin.stefan.ui.view.demos.entryproviders.EntryService;\n</code></pre>\n<p>But i can't i continuosly run into the error:</p>\n<pre><code>The import org.vaadin.stefan.ui cannot be resolvedJava(268435846)\n</code></pre>\n<p>Witch is very strange since the import should work.</p>\n<p>Can you help me make org.vaadin.stefan.ui work?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9679,"page":313,"page_size":100}
