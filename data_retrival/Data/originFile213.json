{"items":[{"tags":["java","spring","spring-boot","hibernate","spring-data-jpa"],"comments":[{"owner":{"account_id":45934,"reputation":203649,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":1,"creation_date":1693395335,"post_id":77007492,"comment_id":135754421,"body_markdown":"`@GeneratedValue` is from the JPA API, while `@UuidGenerator` is specific to Hibernate. There are subtle differences between how the UUIDs are generated, which may or may not matter to your specific application. Article: [How to generate UUIDs as primary keys with Hibernate](https://thorben-janssen.com/generate-uuids-primary-keys-hibernate/)","body":"<code>@GeneratedValue</code> is from the JPA API, while <code>@UuidGenerator</code> is specific to Hibernate. There are subtle differences between how the UUIDs are generated, which may or may not matter to your specific application. Article: <a href=\"https://thorben-janssen.com/generate-uuids-primary-keys-hibernate/\" rel=\"nofollow noreferrer\">How to generate UUIDs as primary keys with Hibernate</a>"}],"answers":[{"tags":[],"owner":{"account_id":1509736,"reputation":582,"user_id":1412161,"accept_rate":86,"display_name":"grange"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693395956,"creation_date":1693395956,"answer_id":77007685,"question_id":77007492,"body_markdown":"As Jesper already mentioned in the comment, @GeneratedValue is from JPA API (javax.persistence), while @UuidGenerator is from hibernate-core. \r\n\r\nBasically that means that using @UuidGenerator couples your code to Hibernate, which is one implementation of JPA. Using @GeneratedValue decouples your code from a specific implementation, so you could change Hibernate to e.g. EclipseLink later.  \r\n\r\n","title":"Difference between @GeneratedValue(strategy = GenerationType.UUID) AND @UuidGenerator","body":"<p>As Jesper already mentioned in the comment, @GeneratedValue is from JPA API (javax.persistence), while @UuidGenerator is from hibernate-core.</p>\n<p>Basically that means that using @UuidGenerator couples your code to Hibernate, which is one implementation of JPA. Using @GeneratedValue decouples your code from a specific implementation, so you could change Hibernate to e.g. EclipseLink later.</p>\n"}],"owner":{"account_id":20734397,"reputation":31,"user_id":16599370,"display_name":"Yury Musiyenka"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1693395956,"creation_date":1693394383,"question_id":77007492,"body_markdown":"What&#39;s the difference between using\r\n\r\n```\r\n@Id\r\n@GeneratedValue(strategy = GenerationType.UUID)\r\nprivate UUID id;\r\n```\r\n\r\n```\r\n@Id\r\n@GeneratedValue(strategy = GenerationType.UUID)\r\n@UuidGenerator\r\nprivate UUID id;\r\n```\r\n\r\n```\r\n@Id\r\n@GeneratedValue\r\n@UuidGenerator\r\nprivate UUID id;\r\n```\r\n\r\n```\r\n@Id\r\n@UuidGenerator\r\nprivate UUID id;\r\n```\r\n\r\nI tried all approaches and read the documentation, also I tested it with show_sql and generate_statistics props\r\nAnd i don&#39;t see any difference","title":"Difference between @GeneratedValue(strategy = GenerationType.UUID) AND @UuidGenerator","body":"<p>What's the difference between using</p>\n<pre><code>@Id\n@GeneratedValue(strategy = GenerationType.UUID)\nprivate UUID id;\n</code></pre>\n<pre><code>@Id\n@GeneratedValue(strategy = GenerationType.UUID)\n@UuidGenerator\nprivate UUID id;\n</code></pre>\n<pre><code>@Id\n@GeneratedValue\n@UuidGenerator\nprivate UUID id;\n</code></pre>\n<pre><code>@Id\n@UuidGenerator\nprivate UUID id;\n</code></pre>\n<p>I tried all approaches and read the documentation, also I tested it with show_sql and generate_statistics props\nAnd i don't see any difference</p>\n"},{"tags":["java","mysql","spring"],"comments":[{"owner":{"account_id":4143152,"reputation":2367,"user_id":3397712,"accept_rate":77,"display_name":"yaswanth"},"score":0,"creation_date":1493962260,"post_id":36913095,"comment_id":74634600,"body_markdown":"Where are your primary keys in the tables in the entities?","body":"Where are your primary keys in the tables in the entities?"}],"answers":[{"tags":[],"owner":{"account_id":7427960,"reputation":198,"user_id":5649869,"display_name":"Алексей Романов"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1461844882,"creation_date":1461844598,"answer_id":36913935,"question_id":36913095,"body_markdown":"Try this:\r\n\r\n    @Query(value = &quot;SELECT * FROM users_leads WHERE users_userid = :id AND leads_id NOT IN (SELECT won_leads_id FROM users_won_leads)&quot;, nativeQuery = true)\r\n    List&lt;Lead&gt; findAllNotMarkedAsWon(@Param(&quot;id&quot;) Long id);\r\n\r\nBut better rewrite it to hql.","title":"SQL Query returning column &#39;id&#39; not found in Spring Boot","body":"<p>Try this:</p>\n\n<pre><code>@Query(value = \"SELECT * FROM users_leads WHERE users_userid = :id AND leads_id NOT IN (SELECT won_leads_id FROM users_won_leads)\", nativeQuery = true)\nList&lt;Lead&gt; findAllNotMarkedAsWon(@Param(\"id\") Long id);\n</code></pre>\n\n<p>But better rewrite it to hql.</p>\n"}],"owner":{"account_id":7078234,"reputation":35,"user_id":5417493,"display_name":"doolylol"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7239,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":36913935,"answer_count":1,"score":1,"last_activity_date":1693394615,"creation_date":1461842372,"question_id":36913095,"body_markdown":"Hope you can help - because I&#39;m losing my mind :o)\r\n\r\nI have a problem with Spring Boot and native queries. One of my queries are returning the error **java.sql.SQLException: Column &#39;id&#39; not found.** - and I have no idea why. Everything works fine, when testing in MySQL Workbench.\r\n\r\n**Query**\r\n\r\n    @Query(value = &quot;SELECT * FROM users_leads WHERE users_userid = ?1 AND leads_id NOT IN (SELECT won_leads_id FROM users_won_leads)&quot;, nativeQuery = true)\r\n    List&lt;Lead&gt; findAllNotMarkedAsWon(Long id);\r\n\r\n**Stacktrace**\r\n\r\n    2016-04-28 13:02:22.313  WARN 9444 --- [nio-8080-exec-1] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 0, SQLState: S0022\r\n    2016-04-28 13:02:22.313 ERROR 9444 --- [nio-8080-exec-1] o.h.engine.jdbc.spi.SqlExceptionHelper   : Column &#39;id&#39; not found.\r\n    2016-04-28 13:02:22.316 ERROR 9444 --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/]. [dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in     context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.InvalidDataAccessResourceUsageException: could not execute query; SQL [SELECT * FROM users_leads WHERE users_userid = ? AND leads_id NOT IN (SELECT won_leads_id FROM users_won_leads)]; nested exception is org.hibernate.exception.SQLGrammarException: could not execute query] with root cause\r\n\r\n    java.sql.SQLException: Column &#39;id&#39; not found.\r\n\tat com.mysql.jdbc.SQLError.createSQLException(SQLError.java:957) ~[mysql-connector-java-5.1.38.jar:5.1.38]\r\n\tat com.mysql.jdbc.SQLError.createSQLException(SQLError.java:896) ~[mysql-connector-java-5.1.38.jar:5.1.38]\r\n\tat com.mysql.jdbc.SQLError.createSQLException(SQLError.java:885) ~[mysql-connector-java-5.1.38.jar:5.1.38]\r\n\tat com.mysql.jdbc.SQLError.createSQLException(SQLError.java:860) ~[mysql-connector-java-5.1.38.jar:5.1.38]\r\n\tat com.mysql.jdbc.ResultSetImpl.findColumn(ResultSetImpl.java:1076) ~[mysql-connector-java-5.1.38.jar:5.1.38]\r\n\tat com.mysql.jdbc.ResultSetImpl.getLong(ResultSetImpl.java:2757) ~[mysql-connector-java-5.1.38.jar:5.1.38]\r\n\tat org.hibernate.type.descriptor.sql.BigIntTypeDescriptor$2.doExtract(BigIntTypeDescriptor.java:73) ~[hibernate-core-4.3.11.Final.jar:4.3.11.Final]\r\n\tat org.hibernate.type.descriptor.sql.BasicExtractor.extract(BasicExtractor.java:64) ~[hibernate-core-4.3.11.Final.jar:4.3.11.Final]\r\n\tat org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:267) ~[hibernate-core-4.3.11.Final.jar:4.3.11.Final]\r\n\tat org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:263) ~[hibernate-core-4.3.11.Final.jar:4.3.11.Final]\r\n\tat org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:253) ~[hibernate-core-4.3.11.Final.jar:4.3.11.Final]\r\n\tat org.hibernate.type.AbstractStandardBasicType.hydrate(AbstractStandardBasicType.java:338) ~[hibernate-core-4.3.11.Final.jar:4.3.11.Final]\r\n\tat org.hibernate.loader.Loader.extractKeysFromResultSet(Loader.java:785) ~[hibernate-core-4.3.11.Final.jar:4.3.11.Final]\r\n\tat org.hibernate.loader.Loader.getRowFromResultSet(Loader.java:721) ~[hibernate-core-4.3.11.Final.jar:4.3.11.Final]\r\n\tat org.hibernate.loader.Loader.processResultSet(Loader.java:953) ~[hibernate-core-4.3.11.Final.jar:4.3.11.Final]\r\n\tat org.hibernate.loader.Loader.doQuery(Loader.java:921) ~[hibernate-core-4.3.11.Final.jar:4.3.11.Final]\r\n\tat org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:355) ~[hibernate-core-4.3.11.Final.jar:4.3.11.Final]\r\n\tat org.hibernate.loader.Loader.doList(Loader.java:2554) ~[hibernate-core-4.3.11.Final.jar:4.3.11.Final]\r\n\tat org.hibernate.loader.Loader.doList(Loader.java:2540) ~[hibernate-core-4.3.11.Final.jar:4.3.11.Final]\r\n\tat org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2370) ~[hibernate-core-4.3.11.Final.jar:4.3.11.Final]\r\n\tat org.hibernate.loader.Loader.list(Loader.java:2365) ~[hibernate-core-4.3.11.Final.jar:4.3.11.Final]\r\n\tat org.hibernate.loader.custom.CustomLoader.list(CustomLoader.java:353) ~[hibernate-core-4.3.11.Final.jar:4.3.11.Final]\r\n\tat org.hibernate.internal.SessionImpl.listCustomQuery(SessionImpl.java:1909) ~[hibernate-core-4.3.11.Final.jar:4.3.11.Final]\r\n\tat org.hibernate.internal.AbstractSessionImpl.list(AbstractSessionImpl.java:311) ~[hibernate-core-4.3.11.Final.jar:4.3.11.Final]\r\n\tat org.hibernate.internal.SQLQueryImpl.list(SQLQueryImpl.java:141) ~[hibernate-core-4.3.11.Final.jar:4.3.11.Final]\r\n\tat org.hibernate.jpa.internal.QueryImpl.list(QueryImpl.java:573) ~[hibernate-entitymanager-4.3.11.Final.jar:4.3.11.Final]\r\n\tat org.hibernate.jpa.internal.QueryImpl.getResultList(QueryImpl.java:449) ~[hibernate-entitymanager-4.3.11.Final.jar:4.3.11.Final]\r\n\tat org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:114) ~[spring-data-jpa-1.9.4.RELEASE.jar:na]\r\n\tat org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:78) ~[spring-data-jpa-1.9.4.RELEASE.jar:na]\r\n\tat org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:100) ~[spring-data-jpa-1.9.4.RELEASE.jar:na]\r\n\tat org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:91) ~[spring-data-jpa-1.9.4.RELEASE.jar:na]\r\n\tat org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.doInvoke(RepositoryFactorySupport.java:462) ~[spring-data-commons-1.11.4.RELEASE.jar:na]\r\n\tat org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.invoke(RepositoryFactorySupport.java:440) ~[spring-data-commons-1.11.4.RELEASE.jar:na]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-4.2.5.RELEASE.jar:4.2.5.RELEASE]\r\n\tat org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:61) ~[spring-data-commons-1.11.4.RELEASE.jar:na]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-4.2.5.RELEASE.jar:4.2.5.RELEASE]\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99) ~[spring-tx-4.2.5.RELEASE.jar:4.2.5.RELEASE]\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:281) ~[spring-tx-4.2.5.RELEASE.jar:4.2.5.RELEASE]\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96) ~[spring-tx-4.2.5.RELEASE.jar:4.2.5.RELEASE]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-4.2.5.RELEASE.jar:4.2.5.RELEASE]\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:136) ~[spring-tx-4.2.5.RELEASE.jar:4.2.5.RELEASE]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-4.2.5.RELEASE.jar:4.2.5.RELEASE]\r\n\tat org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:131) ~[spring-data-jpa-1.9.4.RELEASE.jar:na]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-4.2.5.RELEASE.jar:4.2.5.RELEASE]\r\n\tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:92) ~[spring-aop-4.2.5.RELEASE.jar:4.2.5.RELEASE]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-4.2.5.RELEASE.jar:4.2.5.RELEASE]\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:208) ~[spring-aop-4.2.5.RELEASE.jar:4.2.5.RELEASE]\r\n\tat com.sun.proxy.$Proxy222.findAllNotMarkedAsWon(Unknown Source) ~[na:na]\r\n\tat dk.fitproject.service.LeadService.findAllNotMarkedAsWon(LeadService.java:26) ~[main/:na]\r\n\tat dk.fitproject.controller.user.UserLeadController.bidLeads(UserLeadController.java:38) ~[main/:na]\r\n\tat dk.fitproject.controller.user.UserLeadController.index(UserLeadController.java:53) ~[main/:na]\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_73]\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_73]\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_73]\r\n\tat java.lang.reflect.Method.invoke(Method.java:497) ~[na:1.8.0_73]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221) ~[spring-web-4.2.5.RELEASE.jar:4.2.5.RELEASE]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136) ~[spring-web-4.2.5.RELEASE.jar:4.2.5.RELEASE]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110) ~[spring-webmvc-4.2.5.RELEASE.jar:4.2.5.RELEASE]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:817) ~[spring-webmvc-4.2.5.RELEASE.jar:4.2.5.RELEASE]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:731) ~[spring-webmvc-4.2.5.RELEASE.jar:4.2.5.RELEASE]\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85) ~[spring-webmvc-4.2.5.RELEASE.jar:4.2.5.RELEASE]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959) ~[spring-webmvc-4.2.5.RELEASE.jar:4.2.5.RELEASE]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893) ~[spring-webmvc-4.2.5.RELEASE.jar:4.2.5.RELEASE]\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:968) ~[spring-webmvc-4.2.5.RELEASE.jar:4.2.5.RELEASE]\r\n\tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:859) ~[spring-webmvc-4.2.5.RELEASE.jar:4.2.5.RELEASE]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:622) ~[tomcat-embed-core-8.0.32.jar:8.0.32]\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:844) ~[spring-webmvc-4.2.5.RELEASE.jar:4.2.5.RELEASE]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:729) ~[tomcat-embed-core-8.0.32.jar:8.0.32]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:292) ~[tomcat-embed-core-8.0.32.jar:8.0.32]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207) ~[tomcat-embed-core-8.0.32.jar:8.0.32]\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52) ~[tomcat-embed-websocket-8.0.32.jar:8.0.32]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240) ~[tomcat-embed-core-8.0.32.jar:8.0.32]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207) ~[tomcat-embed-core-8.0.32.jar:8.0.32]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:316) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\r\n\tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:126) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\r\n\tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:90) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:114) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\r\n\tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:122) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\r\n\tat org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\r\n\tat org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:169) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\r\n\tat org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:48) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\r\n\tat org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:205) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:120) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:64) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-4.2.5.RELEASE.jar:4.2.5.RELEASE]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\r\n\tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:91) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\r\n\tat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:53) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-4.2.5.RELEASE.jar:4.2.5.RELEASE]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\r\n\tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:213) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\r\n\tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:176) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346) ~[spring-web-4.2.5.RELEASE.jar:4.2.5.RELEASE]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:262) ~[spring-web-4.2.5.RELEASE.jar:4.2.5.RELEASE]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240) ~[tomcat-embed-core-8.0.32.jar:8.0.32]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207) ~[tomcat-embed-core-8.0.32.jar:8.0.32]\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-4.2.5.RELEASE.jar:4.2.5.RELEASE]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-4.2.5.RELEASE.jar:4.2.5.RELEASE]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240) ~[tomcat-embed-core-8.0.32.jar:8.0.32]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207) ~[tomcat-embed-core-8.0.32.jar:8.0.32]\r\n\tat org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:87) ~[spring-web-4.2.5.RELEASE.jar:4.2.5.RELEASE]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-4.2.5.RELEASE.jar:4.2.5.RELEASE]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240) ~[tomcat-embed-core-8.0.32.jar:8.0.32]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207) ~[tomcat-embed-core-8.0.32.jar:8.0.32]\r\n\tat org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77) ~[spring-web-4.2.5.RELEASE.jar:4.2.5.RELEASE]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-4.2.5.RELEASE.jar:4.2.5.RELEASE]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240) ~[tomcat-embed-core-8.0.32.jar:8.0.32]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207) ~[tomcat-embed-core-8.0.32.jar:8.0.32]\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:121) ~[spring-web-4.2.5.RELEASE.jar:4.2.5.RELEASE]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-4.2.5.RELEASE.jar:4.2.5.RELEASE]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240) ~[tomcat-embed-core-8.0.32.jar:8.0.32]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207) ~[tomcat-embed-core-8.0.32.jar:8.0.32]\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:212) ~[tomcat-embed-core-8.0.32.jar:8.0.32]\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106) [tomcat-embed-core-8.0.32.jar:8.0.32]\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502) [tomcat-embed-core-8.0.32.jar:8.0.32]\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:141) [tomcat-embed-core-8.0.32.jar:8.0.32]\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79) [tomcat-embed-core-8.0.32.jar:8.0.32]\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88) [tomcat-embed-core-8.0.32.jar:8.0.32]\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:522) [tomcat-embed-core-8.0.32.jar:8.0.32]\r\n\tat org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1095) [tomcat-embed-core-8.0.32.jar:8.0.32]\r\n\tat org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:672) [tomcat-embed-core-8.0.32.jar:8.0.32]\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1500) [tomcat-embed-core-8.0.32.jar:8.0.32]\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1456) [tomcat-embed-core-8.0.32.jar:8.0.32]\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [na:1.8.0_73]\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [na:1.8.0_73]\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-8.0.32.jar:8.0.32]\r\n\tat java.lang.Thread.run(Thread.java:745) [na:1.8.0_73]\r\n\r\nEntity class\r\n\r\n    @Entity\r\n    @Table(name = &quot;lead&quot;)\r\n    public class Lead implements Serializable\r\n    ---\r\n    @ManyToMany(mappedBy = &quot;leads&quot;, cascade = CascadeType.ALL)\r\n    private List&lt;User&gt; users;\r\n\r\n    @ManyToMany(mappedBy = &quot;wonLeads&quot;, cascade = CascadeType.ALL)\r\n    private List&lt;User&gt; userWon;\r\n\r\n\r\n    @Entity\r\n    @Table(name = &quot;users&quot;)\r\n    public class User implements Serializable\r\n    ---\r\n    @ManyToMany(cascade =  CascadeType.ALL)\r\n    private List&lt;Lead&gt; leads;\r\n\r\n    @ManyToMany(cascade =  CascadeType.ALL)\r\n    private List&lt;Lead&gt; wonLeads;","title":"SQL Query returning column &#39;id&#39; not found in Spring Boot","body":"<p>Hope you can help - because I'm losing my mind :o)</p>\n\n<p>I have a problem with Spring Boot and native queries. One of my queries are returning the error <strong>java.sql.SQLException: Column 'id' not found.</strong> - and I have no idea why. Everything works fine, when testing in MySQL Workbench.</p>\n\n<p><strong>Query</strong></p>\n\n<pre><code>@Query(value = \"SELECT * FROM users_leads WHERE users_userid = ?1 AND leads_id NOT IN (SELECT won_leads_id FROM users_won_leads)\", nativeQuery = true)\nList&lt;Lead&gt; findAllNotMarkedAsWon(Long id);\n</code></pre>\n\n<p><strong>Stacktrace</strong></p>\n\n<pre><code>2016-04-28 13:02:22.313  WARN 9444 --- [nio-8080-exec-1] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 0, SQLState: S0022\n2016-04-28 13:02:22.313 ERROR 9444 --- [nio-8080-exec-1] o.h.engine.jdbc.spi.SqlExceptionHelper   : Column 'id' not found.\n2016-04-28 13:02:22.316 ERROR 9444 --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/]. [dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in     context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.InvalidDataAccessResourceUsageException: could not execute query; SQL [SELECT * FROM users_leads WHERE users_userid = ? AND leads_id NOT IN (SELECT won_leads_id FROM users_won_leads)]; nested exception is org.hibernate.exception.SQLGrammarException: could not execute query] with root cause\n\njava.sql.SQLException: Column 'id' not found.\nat com.mysql.jdbc.SQLError.createSQLException(SQLError.java:957) ~[mysql-connector-java-5.1.38.jar:5.1.38]\nat com.mysql.jdbc.SQLError.createSQLException(SQLError.java:896) ~[mysql-connector-java-5.1.38.jar:5.1.38]\nat com.mysql.jdbc.SQLError.createSQLException(SQLError.java:885) ~[mysql-connector-java-5.1.38.jar:5.1.38]\nat com.mysql.jdbc.SQLError.createSQLException(SQLError.java:860) ~[mysql-connector-java-5.1.38.jar:5.1.38]\nat com.mysql.jdbc.ResultSetImpl.findColumn(ResultSetImpl.java:1076) ~[mysql-connector-java-5.1.38.jar:5.1.38]\nat com.mysql.jdbc.ResultSetImpl.getLong(ResultSetImpl.java:2757) ~[mysql-connector-java-5.1.38.jar:5.1.38]\nat org.hibernate.type.descriptor.sql.BigIntTypeDescriptor$2.doExtract(BigIntTypeDescriptor.java:73) ~[hibernate-core-4.3.11.Final.jar:4.3.11.Final]\nat org.hibernate.type.descriptor.sql.BasicExtractor.extract(BasicExtractor.java:64) ~[hibernate-core-4.3.11.Final.jar:4.3.11.Final]\nat org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:267) ~[hibernate-core-4.3.11.Final.jar:4.3.11.Final]\nat org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:263) ~[hibernate-core-4.3.11.Final.jar:4.3.11.Final]\nat org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:253) ~[hibernate-core-4.3.11.Final.jar:4.3.11.Final]\nat org.hibernate.type.AbstractStandardBasicType.hydrate(AbstractStandardBasicType.java:338) ~[hibernate-core-4.3.11.Final.jar:4.3.11.Final]\nat org.hibernate.loader.Loader.extractKeysFromResultSet(Loader.java:785) ~[hibernate-core-4.3.11.Final.jar:4.3.11.Final]\nat org.hibernate.loader.Loader.getRowFromResultSet(Loader.java:721) ~[hibernate-core-4.3.11.Final.jar:4.3.11.Final]\nat org.hibernate.loader.Loader.processResultSet(Loader.java:953) ~[hibernate-core-4.3.11.Final.jar:4.3.11.Final]\nat org.hibernate.loader.Loader.doQuery(Loader.java:921) ~[hibernate-core-4.3.11.Final.jar:4.3.11.Final]\nat org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:355) ~[hibernate-core-4.3.11.Final.jar:4.3.11.Final]\nat org.hibernate.loader.Loader.doList(Loader.java:2554) ~[hibernate-core-4.3.11.Final.jar:4.3.11.Final]\nat org.hibernate.loader.Loader.doList(Loader.java:2540) ~[hibernate-core-4.3.11.Final.jar:4.3.11.Final]\nat org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2370) ~[hibernate-core-4.3.11.Final.jar:4.3.11.Final]\nat org.hibernate.loader.Loader.list(Loader.java:2365) ~[hibernate-core-4.3.11.Final.jar:4.3.11.Final]\nat org.hibernate.loader.custom.CustomLoader.list(CustomLoader.java:353) ~[hibernate-core-4.3.11.Final.jar:4.3.11.Final]\nat org.hibernate.internal.SessionImpl.listCustomQuery(SessionImpl.java:1909) ~[hibernate-core-4.3.11.Final.jar:4.3.11.Final]\nat org.hibernate.internal.AbstractSessionImpl.list(AbstractSessionImpl.java:311) ~[hibernate-core-4.3.11.Final.jar:4.3.11.Final]\nat org.hibernate.internal.SQLQueryImpl.list(SQLQueryImpl.java:141) ~[hibernate-core-4.3.11.Final.jar:4.3.11.Final]\nat org.hibernate.jpa.internal.QueryImpl.list(QueryImpl.java:573) ~[hibernate-entitymanager-4.3.11.Final.jar:4.3.11.Final]\nat org.hibernate.jpa.internal.QueryImpl.getResultList(QueryImpl.java:449) ~[hibernate-entitymanager-4.3.11.Final.jar:4.3.11.Final]\nat org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:114) ~[spring-data-jpa-1.9.4.RELEASE.jar:na]\nat org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:78) ~[spring-data-jpa-1.9.4.RELEASE.jar:na]\nat org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:100) ~[spring-data-jpa-1.9.4.RELEASE.jar:na]\nat org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:91) ~[spring-data-jpa-1.9.4.RELEASE.jar:na]\nat org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.doInvoke(RepositoryFactorySupport.java:462) ~[spring-data-commons-1.11.4.RELEASE.jar:na]\nat org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.invoke(RepositoryFactorySupport.java:440) ~[spring-data-commons-1.11.4.RELEASE.jar:na]\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-4.2.5.RELEASE.jar:4.2.5.RELEASE]\nat org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:61) ~[spring-data-commons-1.11.4.RELEASE.jar:na]\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-4.2.5.RELEASE.jar:4.2.5.RELEASE]\nat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99) ~[spring-tx-4.2.5.RELEASE.jar:4.2.5.RELEASE]\nat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:281) ~[spring-tx-4.2.5.RELEASE.jar:4.2.5.RELEASE]\nat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96) ~[spring-tx-4.2.5.RELEASE.jar:4.2.5.RELEASE]\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-4.2.5.RELEASE.jar:4.2.5.RELEASE]\nat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:136) ~[spring-tx-4.2.5.RELEASE.jar:4.2.5.RELEASE]\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-4.2.5.RELEASE.jar:4.2.5.RELEASE]\nat org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:131) ~[spring-data-jpa-1.9.4.RELEASE.jar:na]\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-4.2.5.RELEASE.jar:4.2.5.RELEASE]\nat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:92) ~[spring-aop-4.2.5.RELEASE.jar:4.2.5.RELEASE]\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-4.2.5.RELEASE.jar:4.2.5.RELEASE]\nat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:208) ~[spring-aop-4.2.5.RELEASE.jar:4.2.5.RELEASE]\nat com.sun.proxy.$Proxy222.findAllNotMarkedAsWon(Unknown Source) ~[na:na]\nat dk.fitproject.service.LeadService.findAllNotMarkedAsWon(LeadService.java:26) ~[main/:na]\nat dk.fitproject.controller.user.UserLeadController.bidLeads(UserLeadController.java:38) ~[main/:na]\nat dk.fitproject.controller.user.UserLeadController.index(UserLeadController.java:53) ~[main/:na]\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_73]\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_73]\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_73]\nat java.lang.reflect.Method.invoke(Method.java:497) ~[na:1.8.0_73]\nat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221) ~[spring-web-4.2.5.RELEASE.jar:4.2.5.RELEASE]\nat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136) ~[spring-web-4.2.5.RELEASE.jar:4.2.5.RELEASE]\nat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110) ~[spring-webmvc-4.2.5.RELEASE.jar:4.2.5.RELEASE]\nat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:817) ~[spring-webmvc-4.2.5.RELEASE.jar:4.2.5.RELEASE]\nat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:731) ~[spring-webmvc-4.2.5.RELEASE.jar:4.2.5.RELEASE]\nat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85) ~[spring-webmvc-4.2.5.RELEASE.jar:4.2.5.RELEASE]\nat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959) ~[spring-webmvc-4.2.5.RELEASE.jar:4.2.5.RELEASE]\nat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893) ~[spring-webmvc-4.2.5.RELEASE.jar:4.2.5.RELEASE]\nat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:968) ~[spring-webmvc-4.2.5.RELEASE.jar:4.2.5.RELEASE]\nat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:859) ~[spring-webmvc-4.2.5.RELEASE.jar:4.2.5.RELEASE]\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:622) ~[tomcat-embed-core-8.0.32.jar:8.0.32]\nat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:844) ~[spring-webmvc-4.2.5.RELEASE.jar:4.2.5.RELEASE]\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:729) ~[tomcat-embed-core-8.0.32.jar:8.0.32]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:292) ~[tomcat-embed-core-8.0.32.jar:8.0.32]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207) ~[tomcat-embed-core-8.0.32.jar:8.0.32]\nat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52) ~[tomcat-embed-websocket-8.0.32.jar:8.0.32]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240) ~[tomcat-embed-core-8.0.32.jar:8.0.32]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207) ~[tomcat-embed-core-8.0.32.jar:8.0.32]\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:316) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\nat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:126) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\nat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:90) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\nat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:114) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\nat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:122) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\nat org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\nat org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:169) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\nat org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:48) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\nat org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:205) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\nat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:120) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\nat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:64) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-4.2.5.RELEASE.jar:4.2.5.RELEASE]\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\nat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:91) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\nat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:53) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-4.2.5.RELEASE.jar:4.2.5.RELEASE]\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\nat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:213) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\nat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:176) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]\nat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346) ~[spring-web-4.2.5.RELEASE.jar:4.2.5.RELEASE]\nat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:262) ~[spring-web-4.2.5.RELEASE.jar:4.2.5.RELEASE]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240) ~[tomcat-embed-core-8.0.32.jar:8.0.32]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207) ~[tomcat-embed-core-8.0.32.jar:8.0.32]\nat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-4.2.5.RELEASE.jar:4.2.5.RELEASE]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-4.2.5.RELEASE.jar:4.2.5.RELEASE]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240) ~[tomcat-embed-core-8.0.32.jar:8.0.32]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207) ~[tomcat-embed-core-8.0.32.jar:8.0.32]\nat org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:87) ~[spring-web-4.2.5.RELEASE.jar:4.2.5.RELEASE]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-4.2.5.RELEASE.jar:4.2.5.RELEASE]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240) ~[tomcat-embed-core-8.0.32.jar:8.0.32]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207) ~[tomcat-embed-core-8.0.32.jar:8.0.32]\nat org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77) ~[spring-web-4.2.5.RELEASE.jar:4.2.5.RELEASE]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-4.2.5.RELEASE.jar:4.2.5.RELEASE]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240) ~[tomcat-embed-core-8.0.32.jar:8.0.32]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207) ~[tomcat-embed-core-8.0.32.jar:8.0.32]\nat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:121) ~[spring-web-4.2.5.RELEASE.jar:4.2.5.RELEASE]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-4.2.5.RELEASE.jar:4.2.5.RELEASE]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240) ~[tomcat-embed-core-8.0.32.jar:8.0.32]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207) ~[tomcat-embed-core-8.0.32.jar:8.0.32]\nat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:212) ~[tomcat-embed-core-8.0.32.jar:8.0.32]\nat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106) [tomcat-embed-core-8.0.32.jar:8.0.32]\nat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502) [tomcat-embed-core-8.0.32.jar:8.0.32]\nat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:141) [tomcat-embed-core-8.0.32.jar:8.0.32]\nat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79) [tomcat-embed-core-8.0.32.jar:8.0.32]\nat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88) [tomcat-embed-core-8.0.32.jar:8.0.32]\nat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:522) [tomcat-embed-core-8.0.32.jar:8.0.32]\nat org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1095) [tomcat-embed-core-8.0.32.jar:8.0.32]\nat org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:672) [tomcat-embed-core-8.0.32.jar:8.0.32]\nat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1500) [tomcat-embed-core-8.0.32.jar:8.0.32]\nat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1456) [tomcat-embed-core-8.0.32.jar:8.0.32]\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [na:1.8.0_73]\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [na:1.8.0_73]\nat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-8.0.32.jar:8.0.32]\nat java.lang.Thread.run(Thread.java:745) [na:1.8.0_73]\n</code></pre>\n\n<p>Entity class</p>\n\n<pre><code>@Entity\n@Table(name = \"lead\")\npublic class Lead implements Serializable\n---\n@ManyToMany(mappedBy = \"leads\", cascade = CascadeType.ALL)\nprivate List&lt;User&gt; users;\n\n@ManyToMany(mappedBy = \"wonLeads\", cascade = CascadeType.ALL)\nprivate List&lt;User&gt; userWon;\n\n\n@Entity\n@Table(name = \"users\")\npublic class User implements Serializable\n---\n@ManyToMany(cascade =  CascadeType.ALL)\nprivate List&lt;Lead&gt; leads;\n\n@ManyToMany(cascade =  CascadeType.ALL)\nprivate List&lt;Lead&gt; wonLeads;\n</code></pre>\n"},{"tags":["java","mysql","spring","spring-boot","jpa"],"comments":[{"owner":{"account_id":2161358,"reputation":42669,"user_id":1915448,"accept_rate":96,"display_name":"g00glen00b"},"score":0,"creation_date":1693390486,"post_id":77006872,"comment_id":135753445,"body_markdown":"Can you show us the exception or at least part of the exception (because it will probably contain a lot of repetitions due to the stack overflow)?","body":"Can you show us the exception or at least part of the exception (because it will probably contain a lot of repetitions due to the stack overflow)?"},{"owner":{"account_id":18219978,"reputation":83,"user_id":13260936,"display_name":"Something Nice"},"score":0,"creation_date":1693394490,"post_id":77006872,"comment_id":135754238,"body_markdown":"Hi I have added the exception that it throws","body":"Hi I have added the exception that it throws"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1693397143,"post_id":77006872,"comment_id":135754800,"body_markdown":"Is there a repeating or circular stack in there? The error shows class loading, so it is unlikely to do with the bidirectional relationship, but doesn&#39;t hint at the problem with anything you&#39;ve shown - your application might just need to run with a larger stack memory setting (-Xss).","body":"Is there a repeating or circular stack in there? The error shows class loading, so it is unlikely to do with the bidirectional relationship, but doesn&#39;t hint at the problem with anything you&#39;ve shown - your application might just need to run with a larger stack memory setting (-Xss)."}],"owner":{"account_id":18219978,"reputation":83,"user_id":13260936,"display_name":"Something Nice"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693394474,"creation_date":1693389105,"question_id":77006872,"body_markdown":"Example, I have an entity named MaterialMaster, and I have an extension named ExtensionOne with the code as follows:\r\n```\r\n@Entity\r\npublic class MaterialMaster {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n    \r\n    @OneToMany(mappedBy = &quot;extensionOne.materialMaster&quot;, cascade = CascadeType.ALL, orphanRemoval = true, fetch = FetchType.LAZY)\r\n    private List&lt;ExtensionOne&gt; extensionOneList = new ArrayList&lt;&gt;();\r\n    \r\n}\r\n```\r\n\r\nExtension One:\r\n\r\n```\r\n@Entity\r\npublic class ExtensionOne {\r\n    @Embeddable\r\n    public static class ExtensionOneId implements Serializable {\r\n          @ManyToOne(fetch = FetchType.LAZY)\r\n          @JoinColumn(name = &quot;material_id&quot;)\r\n          @JsonIgnore\r\n          private MaterialMaster materialMaster;\r\n\r\n          @Column(name = &quot;extension_one_id&quot;)\r\n          private Long extensionOneId;\r\n    } \r\n    @EmbeddedId\r\n    private ExtensionOneId id;\r\n\r\n    private String description;\r\n\r\n    // Other attributes, getters, setters\r\n}\r\n```\r\n\r\nI have a dto corressponding to materialMaster, and I have a service class which takes the materialMasterDto and saves it. \r\n\r\n```\r\n    public void saveMaterialMaster(MaterialMasterDTO materialMasterDTO) {\r\n        MaterialMaster materialMaster = materialMasterDTOConverter.convertToEntity(materialMasterDTO);\r\n        materialMasterRepository.save(materialMaster);\r\n    }\r\n```\r\n\r\n**Note:** Instead of creating the materialMaster first and then saving the extensions, I am converting the dto to the materialMasterEntity by appending the extensions to the extensionList present in materialMaster and saving it as a whole. (I don&#39;t know if this is the correct way to do this)\r\n\r\n**Issue:**\r\nWhen I first try to save the materialMasterData, it gets saved perfectly. But let&#39;s say if I again pass the materialMasterData with the same id, with the intent to overrride it not update it, it throws me the following exception:\r\n\r\nStackOverflow Exception.\r\n\r\n**MySolution:**\r\nTo avoid this what I have done is, first I findBy materialMaster and if it is present, I delete it first and then save it using @Transactional to my saveMethod.\r\n\r\nI feel like this is not the correct way to do it. \r\n\r\nI would like to know what exactly is causing the stackoverflow exception and how to avoid it and why isn&#39;t it being caused during the first time I save it and if the stackoverflow exception is caused by bidirectional mapping, how can I avoid it while saving it?\r\n\r\n**Exception**\r\n[![Added exception for detial][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/bc0eS.png","title":"Bidirectitional Mapping throws stackoverflow exception, when Entity is resaved with same id","body":"<p>Example, I have an entity named MaterialMaster, and I have an extension named ExtensionOne with the code as follows:</p>\n<pre><code>@Entity\npublic class MaterialMaster {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n    \n    @OneToMany(mappedBy = &quot;extensionOne.materialMaster&quot;, cascade = CascadeType.ALL, orphanRemoval = true, fetch = FetchType.LAZY)\n    private List&lt;ExtensionOne&gt; extensionOneList = new ArrayList&lt;&gt;();\n    \n}\n</code></pre>\n<p>Extension One:</p>\n<pre><code>@Entity\npublic class ExtensionOne {\n    @Embeddable\n    public static class ExtensionOneId implements Serializable {\n          @ManyToOne(fetch = FetchType.LAZY)\n          @JoinColumn(name = &quot;material_id&quot;)\n          @JsonIgnore\n          private MaterialMaster materialMaster;\n\n          @Column(name = &quot;extension_one_id&quot;)\n          private Long extensionOneId;\n    } \n    @EmbeddedId\n    private ExtensionOneId id;\n\n    private String description;\n\n    // Other attributes, getters, setters\n}\n</code></pre>\n<p>I have a dto corressponding to materialMaster, and I have a service class which takes the materialMasterDto and saves it.</p>\n<pre><code>    public void saveMaterialMaster(MaterialMasterDTO materialMasterDTO) {\n        MaterialMaster materialMaster = materialMasterDTOConverter.convertToEntity(materialMasterDTO);\n        materialMasterRepository.save(materialMaster);\n    }\n</code></pre>\n<p><strong>Note:</strong> Instead of creating the materialMaster first and then saving the extensions, I am converting the dto to the materialMasterEntity by appending the extensions to the extensionList present in materialMaster and saving it as a whole. (I don't know if this is the correct way to do this)</p>\n<p><strong>Issue:</strong>\nWhen I first try to save the materialMasterData, it gets saved perfectly. But let's say if I again pass the materialMasterData with the same id, with the intent to overrride it not update it, it throws me the following exception:</p>\n<p>StackOverflow Exception.</p>\n<p><strong>MySolution:</strong>\nTo avoid this what I have done is, first I findBy materialMaster and if it is present, I delete it first and then save it using @Transactional to my saveMethod.</p>\n<p>I feel like this is not the correct way to do it.</p>\n<p>I would like to know what exactly is causing the stackoverflow exception and how to avoid it and why isn't it being caused during the first time I save it and if the stackoverflow exception is caused by bidirectional mapping, how can I avoid it while saving it?</p>\n<p><strong>Exception</strong>\n<a href=\"https://i.stack.imgur.com/bc0eS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bc0eS.png\" alt=\"Added exception for detial\" /></a></p>\n"},{"tags":["java","eclipselink","adoptopenjdk","jpa"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1641305086,"post_id":70555041,"comment_id":124766641,"body_markdown":"Anything else go wrong with the JVM change? What does logging during persistence unit deployment stay about finding entities and named queries?","body":"Anything else go wrong with the JVM change? What does logging during persistence unit deployment stay about finding entities and named queries?"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1641767293,"post_id":70555041,"comment_id":124886436,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":1428301,"reputation":11,"user_id":1351290,"display_name":"bandiVenkat"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":300,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1693394087,"creation_date":1641117214,"question_id":70555041,"body_markdown":"Below jars worked fine with OracleJDK 11 but not working with openJDK11.\r\n\r\n- eclipselink.2.7.1.jar\r\n- javax.persistence.2.1.1.jar\r\n\r\n&gt; java.lang.IllegalArgumentException: NamedQuery of name: abcd not\r\n&gt; found. \tat\r\n&gt; org.eclipse.persistence.internal.jpa.QueryImpl.getDatabaseQueryInternal(QueryImpl.java:362)\r\n&gt; \tat\r\n&gt; org.eclipse.persistence.internal.jpa.EntityManagerImpl.createNamedQuery(EntityManagerImpl.java:1236)\r\n&gt; \tat\r\n&gt; org.eclipse.persistence.internal.jpa.EntityManagerImpl.createNamedQuery(EntityManagerImpl.java:1257)\r\n&gt; \tat\r\n&gt; java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native\r\n&gt; Method) \tat\r\n&gt; java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n&gt; \tat\r\n&gt; java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n&gt; \tat java.base/java.lang.reflect.Method.invoke(Method.java:566)","title":"OpenJDK11 and eclipse link 2.7.1 Compatibility issue - getting java.lang.IllegalArgumentException: NamedQuery of name: abcd not found","body":"<p>Below jars worked fine with OracleJDK 11 but not working with openJDK11.</p>\n<ul>\n<li>eclipselink.2.7.1.jar</li>\n<li>javax.persistence.2.1.1.jar</li>\n</ul>\n<blockquote>\n<p>java.lang.IllegalArgumentException: NamedQuery of name: abcd not\nfound.    at\norg.eclipse.persistence.internal.jpa.QueryImpl.getDatabaseQueryInternal(QueryImpl.java:362)\nat\norg.eclipse.persistence.internal.jpa.EntityManagerImpl.createNamedQuery(EntityManagerImpl.java:1236)\nat\norg.eclipse.persistence.internal.jpa.EntityManagerImpl.createNamedQuery(EntityManagerImpl.java:1257)\nat\njava.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native\nMethod)   at\njava.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nat\njava.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.base/java.lang.reflect.Method.invoke(Method.java:566)</p>\n</blockquote>\n"},{"tags":["java","jpa","ejb-3.0","entitymanager"],"answers":[{"tags":[],"owner":{"account_id":3611288,"reputation":389,"user_id":3012187,"display_name":"thomas.scheuchzer"},"down_vote_count":1,"up_vote_count":17,"is_accepted":true,"score":16,"last_activity_date":1386689150,"creation_date":1386689150,"answer_id":20498356,"question_id":20497816,"body_markdown":"Use ```em.createQuery(...``` instead of em.createNamedQuery()\r\n\r\nIf you work with named queries (what I would recommend) you have to place the query inside a @NamedQuery annotation on your entity class.","title":"java.lang.IllegalArgumentException: Named query not found:","body":"<p>Use <code>em.createQuery(...</code> instead of em.createNamedQuery()</p>\n\n<p>If you work with named queries (what I would recommend) you have to place the query inside a @NamedQuery annotation on your entity class.</p>\n"},{"tags":[],"owner":{"account_id":1153671,"reputation":2570,"user_id":1134856,"accept_rate":36,"display_name":"treeno"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1439807459,"creation_date":1386689245,"answer_id":20498387,"question_id":20497816,"body_markdown":"`createNamedQuery()` takes a name of a query and not the query itself.\r\n\r\nThe Query can be defined by an annotation `@NamedQuery`\r\nTake a look at this:\r\nhttp://docs.oracle.com/javaee/6/api/javax/persistence/NamedQuery.html","title":"java.lang.IllegalArgumentException: Named query not found:","body":"<p><code>createNamedQuery()</code> takes a name of a query and not the query itself.</p>\n\n<p>The Query can be defined by an annotation <code>@NamedQuery</code>\nTake a look at this:\n<a href=\"http://docs.oracle.com/javaee/6/api/javax/persistence/NamedQuery.html\" rel=\"nofollow\">http://docs.oracle.com/javaee/6/api/javax/persistence/NamedQuery.html</a></p>\n"},{"tags":[],"owner":{"account_id":3451372,"reputation":1314,"user_id":2890983,"display_name":"Flying Dumpling"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1386689515,"creation_date":1386689515,"answer_id":20498489,"question_id":20497816,"body_markdown":"In JPA query and named query are not the same things.\r\n\r\nNamed queries have &quot;names&quot; and you define them by adding `@NamedQueries` annotation on your entity type class:\r\n\r\n    @Entity\r\n    @Table(name=&quot;bondecommande&quot;)\r\n    @NamedQueries({\r\n        @NamedQuery(name=&quot;Bondecommande.findByIdbc&quot;, query=&quot;select bc from Bondecommande bc where bc.idbc = :idbc&quot;),\r\n        @NamedQuery(name=&quot;...&quot;, query=&quot;...&quot;),\r\n    }) \r\n    public class Bondecommande  implements Serializable {\r\n\r\n        ....\r\n    }\r\n\r\nYou use named queries by passing the name of the query to create method:\r\n\r\n    Query q =em.createNamedQuery(&quot;Bondecommande.findByIdbc&quot;);\r\n\r\nI recommend to use `TypedQuery&lt;T&gt;` not `Query` if you are using JPA 2.x","title":"java.lang.IllegalArgumentException: Named query not found:","body":"<p>In JPA query and named query are not the same things.</p>\n\n<p>Named queries have \"names\" and you define them by adding <code>@NamedQueries</code> annotation on your entity type class:</p>\n\n<pre><code>@Entity\n@Table(name=\"bondecommande\")\n@NamedQueries({\n    @NamedQuery(name=\"Bondecommande.findByIdbc\", query=\"select bc from Bondecommande bc where bc.idbc = :idbc\"),\n    @NamedQuery(name=\"...\", query=\"...\"),\n}) \npublic class Bondecommande  implements Serializable {\n\n    ....\n}\n</code></pre>\n\n<p>You use named queries by passing the name of the query to create method:</p>\n\n<pre><code>Query q =em.createNamedQuery(\"Bondecommande.findByIdbc\");\n</code></pre>\n\n<p>I recommend to use <code>TypedQuery&lt;T&gt;</code> not <code>Query</code> if you are using JPA 2.x</p>\n"},{"tags":[],"owner":{"account_id":6607961,"reputation":1,"user_id":5104185,"display_name":"matos"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1439807483,"creation_date":1436556549,"answer_id":31348863,"question_id":20497816,"body_markdown":"    Query q =em.createNamedQuery(&quot;select bc from Bondecommande bc where bc.idbc = :idbc&quot;);\r\n\r\nafter `em.createQuery` here, and good","title":"java.lang.IllegalArgumentException: Named query not found:","body":"<pre><code>Query q =em.createNamedQuery(\"select bc from Bondecommande bc where bc.idbc = :idbc\");\n</code></pre>\n\n<p>after <code>em.createQuery</code> here, and good</p>\n"},{"tags":[],"owner":{"account_id":941886,"reputation":2346,"user_id":969833,"accept_rate":100,"display_name":"Kevin Sadler"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693394004,"creation_date":1693394004,"answer_id":77007452,"question_id":20497816,"body_markdown":"I had a similar error when I migrated working code from Java 8 to 17 (and also with 11). I was using EclipseLink (2.5).\r\n\r\nThe fix was to upgrade EclipseLink to 2.7 and it worked again.","title":"java.lang.IllegalArgumentException: Named query not found:","body":"<p>I had a similar error when I migrated working code from Java 8 to 17 (and also with 11). I was using EclipseLink (2.5).</p>\n<p>The fix was to upgrade EclipseLink to 2.7 and it worked again.</p>\n"}],"owner":{"account_id":2759715,"reputation":321,"user_id":2376845,"accept_rate":84,"display_name":"Bellil Med Samouel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42513,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":20498356,"answer_count":5,"score":5,"last_activity_date":1693394004,"creation_date":1386687731,"question_id":20497816,"body_markdown":"I got the following code\r\n\r\n    @Stateless\r\n    public class BondecomandeDAO {\r\n    \t\r\n    \t@PersistenceContext\r\n    \tprivate EntityManager em;\r\n      \r\n        public Bondecommande findBCbyid(int id)\r\n    \t{\r\n    \t\t Query q =em.createNamedQuery(&quot;select bc from Bondecommande bc where bc.idbc = :idbc&quot;);\r\n    \t\t q.setParameter(&quot;idbc&quot;, id);\r\n    \t\t return  (Bondecommande) q.getResultList().get(0);\r\n    \t }\r\n    }\r\n\r\nand\r\n\r\n    @Entity\r\n    @Table(name=&quot;bondecommande&quot;)\r\n    public class Bondecommande  implements Serializable {\r\n    \t\r\n    \tprivate static final long serialVersionUID = 1L;\r\n    \t\r\n    \t@Id\r\n    \t@GeneratedValue(strategy = GenerationType.AUTO)\r\n    \t@Column(name=&quot;idbc&quot;)\r\n    \tprivate int idbc;\r\n    \t@Column(name=&quot;devise&quot;)\r\n    \tprivate String devise;\r\n    \t@Column(name=&quot;modepaiement&quot;)\r\n    \tprivate String modepaiement;\r\n    \t@Column(name=&quot;modelivraison&quot;)\r\n    \tprivate String modelivraison;\r\n    \t@Column(name=&quot;delaipaiement&quot;)\r\n    \tprivate int delaipaiement;\r\n    \r\n          ////other attributes , getters and setters \r\n    }\r\n\r\nWhen I try to run the function `findBCbyid(int id)` I get this error \r\n \r\n&gt; java.lang.IllegalArgumentException: Named query not found: select bc from Bondecommande bc where bc.idbc = :idbc  \r\n\r\nAlthough I used this named query in an another project, and it worked, what could be the problem here?","title":"java.lang.IllegalArgumentException: Named query not found:","body":"<p>I got the following code</p>\n\n<pre><code>@Stateless\npublic class BondecomandeDAO {\n\n    @PersistenceContext\n    private EntityManager em;\n\n    public Bondecommande findBCbyid(int id)\n    {\n         Query q =em.createNamedQuery(\"select bc from Bondecommande bc where bc.idbc = :idbc\");\n         q.setParameter(\"idbc\", id);\n         return  (Bondecommande) q.getResultList().get(0);\n     }\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>@Entity\n@Table(name=\"bondecommande\")\npublic class Bondecommande  implements Serializable {\n\n    private static final long serialVersionUID = 1L;\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    @Column(name=\"idbc\")\n    private int idbc;\n    @Column(name=\"devise\")\n    private String devise;\n    @Column(name=\"modepaiement\")\n    private String modepaiement;\n    @Column(name=\"modelivraison\")\n    private String modelivraison;\n    @Column(name=\"delaipaiement\")\n    private int delaipaiement;\n\n      ////other attributes , getters and setters \n}\n</code></pre>\n\n<p>When I try to run the function <code>findBCbyid(int id)</code> I get this error </p>\n\n<blockquote>\n  <p>java.lang.IllegalArgumentException: Named query not found: select bc from Bondecommande bc where bc.idbc = :idbc  </p>\n</blockquote>\n\n<p>Although I used this named query in an another project, and it worked, what could be the problem here?</p>\n"},{"tags":["java","aws-sdk","json-query"],"owner":{"account_id":1653069,"reputation":1472,"user_id":1523263,"accept_rate":46,"display_name":"Nagappa L M"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693393902,"creation_date":1693393902,"question_id":77007443,"body_markdown":"i am trying to query json using com.amazonaws jmespath-java from https://mvnrepository.com/open-source/json-query.\r\n\r\nI didn&#39;t find documentation of usage of above library in Java.\r\n\r\nQuerying is possible in javascript,python and i am looking to consume in Java\r\n\r\nCan you help me with documentation ","title":"In Java how to add field to json using com.amazonaws jmespath-java?","body":"<p>i am trying to query json using com.amazonaws jmespath-java from <a href=\"https://mvnrepository.com/open-source/json-query\" rel=\"nofollow noreferrer\">https://mvnrepository.com/open-source/json-query</a>.</p>\n<p>I didn't find documentation of usage of above library in Java.</p>\n<p>Querying is possible in javascript,python and i am looking to consume in Java</p>\n<p>Can you help me with documentation</p>\n"},{"tags":["java","quartz"],"owner":{"account_id":24897634,"reputation":1,"user_id":18768701,"display_name":"Andrew Smith"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693393143,"creation_date":1693392182,"question_id":77007257,"body_markdown":"Setting :- \r\n\r\nquartz.jobStore.misfireThreshold=300000 // 5 minutes\r\n\r\n\r\n```\r\nScheduler scheduler = StdSchedulerFactory.getDefaultScheduler();\r\n        scheduler.start();\r\n\r\n        JobDetail cronJob = newJob().ofType(MyJob.class)\r\n                .storeDurably()\r\n                .withIdentity(&quot;CRON_JOB&quot;)\r\n                .build();\r\n\r\n        CronTrigger cronTrigger = newTrigger()\r\n                .withIdentity(&quot;CRON_TRIGGER&quot;)\r\n                .withSchedule(CronScheduleBuilder.cronSchedule(&quot;0 * * ? * *&quot;)\r\n                        .withMisfireHandlingInstructionDoNothing())\r\n                .startAt(new Date())\r\n                .forJob(cronJob)\r\n                .build();\r\n\r\n        scheduler.scheduleJob(cronJob, cronTrigger);\r\n\r\n        // don&#39;t shutdown immediately.\r\n        try {\r\n            Thread.sleep(5000);\r\n        } catch (InterruptedException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n        \r\n        scheduler.shutdown();\r\n\r\n```\r\n\r\n\r\n\r\n\r\nI&#39;m expecting 5 minutes worth of non misfired ( within threshold ) jobs to fire when i start the scheduler back up. This doesn&#39;t happen. The instruction withMisfireHandlingInstructionDoNothing otherwise works. ie. it fires a job the next minute after start up, and every minute thereafter. But the threshold is supposed to treat jobs as non misfired jobs, and run them on start up. It doesn&#39;t work","title":"Why does the Quartz misfireThreshold not work?","body":"<p>Setting :-</p>\n<p>quartz.jobStore.misfireThreshold=300000 // 5 minutes</p>\n<pre><code>Scheduler scheduler = StdSchedulerFactory.getDefaultScheduler();\n        scheduler.start();\n\n        JobDetail cronJob = newJob().ofType(MyJob.class)\n                .storeDurably()\n                .withIdentity(&quot;CRON_JOB&quot;)\n                .build();\n\n        CronTrigger cronTrigger = newTrigger()\n                .withIdentity(&quot;CRON_TRIGGER&quot;)\n                .withSchedule(CronScheduleBuilder.cronSchedule(&quot;0 * * ? * *&quot;)\n                        .withMisfireHandlingInstructionDoNothing())\n                .startAt(new Date())\n                .forJob(cronJob)\n                .build();\n\n        scheduler.scheduleJob(cronJob, cronTrigger);\n\n        // don't shutdown immediately.\n        try {\n            Thread.sleep(5000);\n        } catch (InterruptedException e) {\n            throw new RuntimeException(e);\n        }\n        \n        scheduler.shutdown();\n\n</code></pre>\n<p>I'm expecting 5 minutes worth of non misfired ( within threshold ) jobs to fire when i start the scheduler back up. This doesn't happen. The instruction withMisfireHandlingInstructionDoNothing otherwise works. ie. it fires a job the next minute after start up, and every minute thereafter. But the threshold is supposed to treat jobs as non misfired jobs, and run them on start up. It doesn't work</p>\n"},{"tags":["java","dll","java-native-interface"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1693391637,"post_id":77006468,"comment_id":135753676,"body_markdown":"*cpp file* [Please never post images of text](https://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors/285557#285557). They are not searchable, we cannot copy-paste... Always copy-paste the text and format it properly. You [might need to install a 32 bit JDK](https://stackoverflow.com/questions/9757456/java-native-interface-32-bit-dll-on-64-bit-system) to do this but why use native code just to encrypt a string?","body":"<i>cpp file</i> <a href=\"https://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors/285557#285557\">Please never post images of text</a>. They are not searchable, we cannot copy-paste... Always copy-paste the text and format it properly. You <a href=\"https://stackoverflow.com/questions/9757456/java-native-interface-32-bit-dll-on-64-bit-system\">might need to install a 32 bit JDK</a> to do this but why use native code just to encrypt a string?"},{"owner":{"account_id":13380501,"reputation":3,"user_id":9655938,"display_name":"user9655938"},"score":0,"creation_date":1693393141,"post_id":77006468,"comment_id":135753993,"body_markdown":"i can&#39;t use 32-bit jdk unfortunately. i have a 64-bit java application and i need to use those dll functions to encrypt data to send over a web service.","body":"i can&#39;t use 32-bit jdk unfortunately. i have a 64-bit java application and i need to use those dll functions to encrypt data to send over a web service."},{"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"score":0,"creation_date":1693400781,"post_id":77006468,"comment_id":135755691,"body_markdown":"Mixing a 64-bit JVM with a 32-bit DLL will lead to sadness. don&#39;t.","body":"Mixing a 64-bit JVM with a 32-bit DLL will lead to sadness. don&#39;t."},{"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"score":1,"creation_date":1693401500,"post_id":77006468,"comment_id":135755864,"body_markdown":"This is also **not** how you are supposed to use a COM DLL. Normally you would use [CoCreateInstance](https://learn.microsoft.com/en-us/windows/win32/learnwin32/creating-an-object-in-com) to summon an instance of `IKPassCrypt` using its GUID and calling methods on the returned object handle.","body":"This is also <b>not</b> how you are supposed to use a COM DLL. Normally you would use <a href=\"https://learn.microsoft.com/en-us/windows/win32/learnwin32/creating-an-object-in-com\" rel=\"nofollow noreferrer\">CoCreateInstance</a> to summon an instance of <code>IKPassCrypt</code> using its GUID and calling methods on the returned object handle."},{"owner":{"account_id":13380501,"reputation":3,"user_id":9655938,"display_name":"user9655938"},"score":0,"creation_date":1693403554,"post_id":77006468,"comment_id":135756362,"body_markdown":"thank you very much for the feedback! @Botje","body":"thank you very much for the feedback! @Botje"},{"owner":{"account_id":13380501,"reputation":3,"user_id":9655938,"display_name":"user9655938"},"score":0,"creation_date":1693404013,"post_id":77006468,"comment_id":135756476,"body_markdown":"could I ask you kindly, if you can give me an example of how to use CoCreateInstance?\nthank you very much.","body":"could I ask you kindly, if you can give me an example of how to use CoCreateInstance? thank you very much."},{"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"score":0,"creation_date":1693404568,"post_id":77006468,"comment_id":135756626,"body_markdown":"I linked you to the MS introduction on it.","body":"I linked you to the MS introduction on it."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1693404856,"post_id":77006468,"comment_id":135756711,"body_markdown":"What @Botje is saying is correct. But don&#39;t forget that a previous comment was advising you against using a 32 bit dll at all. You&#39;d probably be better, *if you&#39;re really forced to use it*, to wrap it in a small C# app that operates on stdin input and outputs results to stdout","body":"What @Botje is saying is correct. But don&#39;t forget that a previous comment was advising you against using a 32 bit dll at all. You&#39;d probably be better, <i>if you&#39;re really forced to use it</i>, to wrap it in a small C# app that operates on stdin input and outputs results to stdout"},{"owner":{"account_id":13380501,"reputation":3,"user_id":9655938,"display_name":"user9655938"},"score":0,"creation_date":1693421949,"post_id":77006468,"comment_id":135760413,"body_markdown":"unfortunately I am forced to use that 32bit dll","body":"unfortunately I am forced to use that 32bit dll"},{"owner":{"account_id":13380501,"reputation":3,"user_id":9655938,"display_name":"user9655938"},"score":0,"creation_date":1693422009,"post_id":77006468,"comment_id":135760429,"body_markdown":"ho provato ad utilizzare il CoInitialize ma ricevo l&#39;errore: &#39;REGDB_E_CLASSNOTREG Class not registered&#39;","body":"ho provato ad utilizzare il CoInitialize ma ricevo l&#39;errore: &#39;REGDB_E_CLASSNOTREG Class not registered&#39;"},{"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"score":1,"creation_date":1693423675,"post_id":77006468,"comment_id":135760742,"body_markdown":"&quot;This error code can also indicate that the CLSID does not correspond to any component registered on the user&#39;s computer.&quot; This is the bit where you wield regsvr32.exe","body":"&quot;This error code can also indicate that the CLSID does not correspond to any component registered on the user&#39;s computer.&quot; This is the bit where you wield regsvr32.exe"},{"owner":{"account_id":13380501,"reputation":3,"user_id":9655938,"display_name":"user9655938"},"score":0,"creation_date":1693473109,"post_id":77006468,"comment_id":135766690,"body_markdown":"I tried to register the dll with the regsvr32.exe &quot;path dll&quot; command, but I still receive the same error","body":"I tried to register the dll with the regsvr32.exe &quot;path dll&quot; command, but I still receive the same error"},{"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"score":0,"creation_date":1693474390,"post_id":77006468,"comment_id":135766958,"body_markdown":"Suggest you ask a new question about using that DLL from a native application first.","body":"Suggest you ask a new question about using that DLL from a native application first."}],"owner":{"account_id":13380501,"reputation":3,"user_id":9655938,"display_name":"user9655938"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693393024,"creation_date":1693386054,"question_id":77006468,"body_markdown":"I should make use of com methods present in a 32-bit dll, on a 64-bit Java application.\r\n\r\n[Image 1](https://i.stack.imgur.com/XJ0Pv.png)[image 2](https://i.stack.imgur.com/HCD4Z.png)\r\n\r\n\r\nMy idea was to use JNI in order to use the dll methods.\r\n\r\nI then tried to create a java class with native methods from which I then created the .h file to be used in C++.\r\n[Java class with native method](https://i.stack.imgur.com/dsXu5.png)\r\n[cpp file](https://i.stack.imgur.com/3rYzK.png).\r\n\r\n    #include &lt;jni.h&gt;\r\n    \r\n    #include &quot;pfr_KCryptDll.h&quot;\r\n    #include &lt;windows.h&gt;\r\n    #include &lt;tchar.h&gt;\r\n    #import &quot;KCrypt.dll&quot; raw_interfaces_only no_namespace\r\n    \r\n    //typedef int (__GPESTDCALL *pFc_Transaction) (int, int);\r\n    typedef jstring(CALLBACK* pFc_Transaction) (jstring, jstring);\r\n    \r\n    \r\n    JNIEXPORT jstring JNICALL Java_pfr_KCryptDll_Encrypt (JNIEnv* env, jclass, jstring text, jstring key) {\r\n    \r\n        pFc_Transaction lpfnDllFunc;    \r\n        HRESULT hrReturnVal = NULL;\r\n        HINSTANCE dllHandle = NULL;\r\n        jstring result = NULL;\r\n        \r\n     \r\n        \r\n       \r\n        dllHandle = LoadLibrary(L&quot;KCrypt.dll&quot;);\r\n    \r\n        if (NULL != dllHandle)\r\n        {\r\n           \r\n            lpfnDllFunc = (pFc_Transaction)GetProcAddress(dllHandle, &quot;Encrypt&quot;);\r\n            if (NULL != lpfnDllFunc)\r\n            {\r\n                \r\n                result = lpfnDllFunc(text, key);\r\n            }\r\n            else\r\n            {\r\n               \r\n               HRESULT hrReturnValErr = ERROR_DELAY_LOAD_FAILED;\r\n               return text;\r\n            }\r\n        }\r\n        else\r\n        {\r\n            HRESULT hrReturnValErr = ERROR_DELAY_LOAD_FAILED;\r\n            return key;\r\n        }\r\n    \r\n    \r\n        FreeLibrary(dllHandle);\r\n        return result;\r\n        }\r\n        \r\n    \r\n    \r\n    }\r\n    \r\n    \r\n    \r\n    typedef jstring(CALLBACK* pfr_test) (jstring);\r\n    \r\n    JNIEXPORT jstring JNICALL Java_pfr_KCryptDll_test(JNIEnv*, jclass, jstring input) {\r\n    \r\n        return input;\r\n    }\r\n    \r\n    int main(int argc, TCHAR* argv[]) {\r\n    \r\n    }\r\n\r\nI&#39;m definitely doing something wrong, partly because I&#39;m not that knowledgeable about these things. Could you by any chance help me and especially tell me if it is possible to use dll com methods from java.\r\n\r\nThank you very much.","title":"How to use COM Method from DLL in Java","body":"<p>I should make use of com methods present in a 32-bit dll, on a 64-bit Java application.</p>\n<p><a href=\"https://i.stack.imgur.com/XJ0Pv.png\" rel=\"nofollow noreferrer\">Image 1</a><a href=\"https://i.stack.imgur.com/HCD4Z.png\" rel=\"nofollow noreferrer\">image 2</a></p>\n<p>My idea was to use JNI in order to use the dll methods.</p>\n<p>I then tried to create a java class with native methods from which I then created the .h file to be used in C++.\n<a href=\"https://i.stack.imgur.com/dsXu5.png\" rel=\"nofollow noreferrer\">Java class with native method</a>\n<a href=\"https://i.stack.imgur.com/3rYzK.png\" rel=\"nofollow noreferrer\">cpp file</a>.</p>\n<pre><code>#include &lt;jni.h&gt;\n\n#include &quot;pfr_KCryptDll.h&quot;\n#include &lt;windows.h&gt;\n#include &lt;tchar.h&gt;\n#import &quot;KCrypt.dll&quot; raw_interfaces_only no_namespace\n\n//typedef int (__GPESTDCALL *pFc_Transaction) (int, int);\ntypedef jstring(CALLBACK* pFc_Transaction) (jstring, jstring);\n\n\nJNIEXPORT jstring JNICALL Java_pfr_KCryptDll_Encrypt (JNIEnv* env, jclass, jstring text, jstring key) {\n\n    pFc_Transaction lpfnDllFunc;    \n    HRESULT hrReturnVal = NULL;\n    HINSTANCE dllHandle = NULL;\n    jstring result = NULL;\n    \n \n    \n   \n    dllHandle = LoadLibrary(L&quot;KCrypt.dll&quot;);\n\n    if (NULL != dllHandle)\n    {\n       \n        lpfnDllFunc = (pFc_Transaction)GetProcAddress(dllHandle, &quot;Encrypt&quot;);\n        if (NULL != lpfnDllFunc)\n        {\n            \n            result = lpfnDllFunc(text, key);\n        }\n        else\n        {\n           \n           HRESULT hrReturnValErr = ERROR_DELAY_LOAD_FAILED;\n           return text;\n        }\n    }\n    else\n    {\n        HRESULT hrReturnValErr = ERROR_DELAY_LOAD_FAILED;\n        return key;\n    }\n\n\n    FreeLibrary(dllHandle);\n    return result;\n    }\n    \n\n\n}\n\n\n\ntypedef jstring(CALLBACK* pfr_test) (jstring);\n\nJNIEXPORT jstring JNICALL Java_pfr_KCryptDll_test(JNIEnv*, jclass, jstring input) {\n\n    return input;\n}\n\nint main(int argc, TCHAR* argv[]) {\n\n}\n</code></pre>\n<p>I'm definitely doing something wrong, partly because I'm not that knowledgeable about these things. Could you by any chance help me and especially tell me if it is possible to use dll com methods from java.</p>\n<p>Thank you very much.</p>\n"},{"tags":["java","android","kotlin","geolocation","latitude-longitude"],"comments":[{"owner":{"account_id":14244190,"reputation":205,"user_id":10289760,"display_name":"X-Byte Technolabs pvt. ltd."},"score":0,"creation_date":1554892038,"post_id":55610188,"comment_id":97914957,"body_markdown":"**val locality = addresses[0].locality** is your cityName in Address","body":"<b>val locality = addresses[0].locality</b> is your cityName in Address"},{"owner":{"account_id":13391272,"reputation":348,"user_id":9663575,"display_name":"Sandeep Insan"},"score":0,"creation_date":1554892189,"post_id":55610188,"comment_id":97915050,"body_markdown":"https://stackoverflow.com/questions/22323974/how-to-get-city-name-by-latitude-longitude-in-android\ncheck it out once","body":"<a href=\"https://stackoverflow.com/questions/22323974/how-to-get-city-name-by-latitude-longitude-in-android\" title=\"how to get city name by latitude longitude in android\">stackoverflow.com/questions/22323974/&hellip;</a> check it out once"},{"owner":{"account_id":2856521,"reputation":7352,"user_id":2452680,"accept_rate":68,"display_name":"Dan Bray"},"score":0,"creation_date":1554892197,"post_id":55610188,"comment_id":97915055,"body_markdown":"@X-ByteTechnolabspvt.ltd. Maybe for some addresses it is. In Leeds and Wakefield, `locality` returns a small suburb or null.","body":"@X-ByteTechnolabspvt.ltd. Maybe for some addresses it is. In Leeds and Wakefield, <code>locality</code> returns a small suburb or null."},{"owner":{"account_id":2856521,"reputation":7352,"user_id":2452680,"accept_rate":68,"display_name":"Dan Bray"},"score":0,"creation_date":1554892281,"post_id":55610188,"comment_id":97915093,"body_markdown":"@SandeepInsan I already checked that out before posting. I even mentioned it in my question. All the answers to that question do not work for me. The problem is there are too many variations to how the addresses are stored and too many edge cases to code for and I cannot test for all possible edge cases because there are too many cities and possible locations.","body":"@SandeepInsan I already checked that out before posting. I even mentioned it in my question. All the answers to that question do not work for me. The problem is there are too many variations to how the addresses are stored and too many edge cases to code for and I cannot test for all possible edge cases because there are too many cities and possible locations."}],"answers":[{"tags":[],"owner":{"account_id":10509350,"reputation":73,"user_id":7745543,"display_name":"navya sree"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1554894072,"creation_date":1554892607,"answer_id":55610438,"question_id":55610188,"body_markdown":"\r\n\r\n    Geocoder geocoder = new Geocoder(this, Locale.getDefault());\r\n    List addresses = geocoder.getFromLocation(MyLat, MyLong, 1); \r\n    String cityName = addresses.get(0).getAddressLine(0); \r\n    String stateName = addresses.get(0).getAddressLine(1); \r\n    String countryName = addresses.get(0).getAddressLine(2);","title":"How can I get city name from Geocoder?","body":"<pre><code>Geocoder geocoder = new Geocoder(this, Locale.getDefault());\nList addresses = geocoder.getFromLocation(MyLat, MyLong, 1); \nString cityName = addresses.get(0).getAddressLine(0); \nString stateName = addresses.get(0).getAddressLine(1); \nString countryName = addresses.get(0).getAddressLine(2);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28335622,"reputation":1,"user_id":21669212,"display_name":"Anil Pandey"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693392955,"creation_date":1693392955,"answer_id":77007350,"question_id":55610188,"body_markdown":"```\r\nGeocoder geocoder = new Geocoder(this, Locale.getDefault());\r\nList addresses = geocoder.getFromLocation(MyLat, MyLong, 1); \r\nString cityName = addresses.get(0).getLocality();\r\n","title":"How can I get city name from Geocoder?","body":"<pre><code>Geocoder geocoder = new Geocoder(this, Locale.getDefault());\nList addresses = geocoder.getFromLocation(MyLat, MyLong, 1); \nString cityName = addresses.get(0).getLocality();\n</code></pre>\n"}],"owner":{"account_id":2856521,"reputation":7352,"user_id":2452680,"accept_rate":68,"display_name":"Dan Bray"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":4196,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1693392955,"creation_date":1554891833,"question_id":55610188,"body_markdown":"In Android (either Java or Kotlin is fine) how can I get the city name from the longitude and latitude?\r\n\r\nBelow I&#39;ve written a function to display address data. I would like to modify it so that it returns the city name:\r\n\r\n    private fun getCity(context: Context, latitude: Float, longitude: Float) {\r\n        val gcd = Geocoder(context, Locale.getDefault())\r\n        val addresses = gcd.getFromLocation(latitude.toDouble(), longitude.toDouble(), 1)\r\n        Log.d(&quot;-----&quot;, &quot;-----&quot;)\r\n        Log.d(&quot;latitude&quot;, latitude.toString())\r\n        Log.d(&quot;longitude&quot;, longitude.toString())\r\n        if (addresses.size &gt; 0) {\r\n            val locality = addresses[0].locality\r\n            if (locality != null) {\r\n                Log.d(&quot;locality&quot;, locality.toString())\r\n            }\r\n            val adminArea = addresses[0].adminArea\r\n            if (adminArea != null) {\r\n                Log.d(&quot;adminArea&quot;, adminArea.toString())\r\n            }\r\n            val subAdminArea = addresses[0].subAdminArea\r\n            if (subAdminArea != null) {\r\n                Log.d(&quot;subAdminArea&quot;, subAdminArea.toString())\r\n            }\r\n            val subLocality = addresses[0].subLocality\r\n            if (subLocality != null) {\r\n                Log.d(&quot;subLocality&quot;, subLocality.toString())\r\n            }\r\n            val thoroughfare = addresses[0].thoroughfare\r\n            if (thoroughfare != null) {\r\n                Log.d(&quot;thoroughfare&quot;, thoroughfare.toString())\r\n            }\r\n            val subThoroughfare = addresses[0].subThoroughfare\r\n            if (subThoroughfare != null) {\r\n                Log.d(&quot;subThoroughfare&quot;, subThoroughfare.toString())\r\n            }\r\n            val extras = addresses[0].extras\r\n            if (extras != null) {\r\n                Log.d(&quot;extras&quot;, extras.toString())\r\n            }\r\n            val premises = addresses[0].premises\r\n            if (premises != null) {\r\n                Log.d(&quot;premises&quot;, premises.toString())\r\n            }\r\n            val postalCode = addresses[0].postalCode\r\n            if (postalCode != null) {\r\n                Log.d(&quot;postalCode&quot;, postalCode.toString())\r\n            }\r\n            val featureName = addresses[0].featureName\r\n            if (featureName != null) {\r\n                Log.d(&quot;featureName&quot;, featureName.toString())\r\n            }\r\n            val getAddressLine0 = addresses[0].getAddressLine(0)\r\n            if (getAddressLine0 != null)\r\n                Log.d(&quot;getAddressLine0&quot;, getAddressLine0.toString())\r\n            for (i in 0 until addresses[0].maxAddressLineIndex) {\r\n                Log.d(&quot;getAddressLine($i)&quot;, addresses[0].getAddressLine(i).toString())\r\n            }\r\n        }\r\n    }\r\n\r\nIf I run `getCity(context, 53.7f, -1.506f)`, `featureName` contains the correct city name, Wakefield.\r\n\r\nIf I run `getCity(context, 53.801f, -1.549f)`, `featureName` now contains the street name, Portland Place. `getAddressLine(0)` return Portland Place, 5 Calverley St, Leeds LS1 3DA, UK, which contains the correct city, Leeds. I could remove the street name, post code, and house number from getAddressLine(0) to be left with the city. Unfortunately, there are edge cases where that won&#39;t work because sometimes the street name contains abbreviations in `getAddressLine(0)` but not in `thoroughfare`.\r\n\r\nThis question [How to Get City Name by Latitude &amp;Longitude in android?][1] has answers that are completely different because the addresses in different countries are stored in a different way.\r\n\r\nThere seem to be quite a few variations and edge cases I need to code for just to get the city name for 2 neighbouring cities in the UK. How can I get the correct city name from any latitude or longitude world wide? There are way too many cities in the world to test my code against and code for, and there may be many edge cases and variations that I am unaware even exist.\r\n\r\n**Edit**\r\n\r\nThe function below correctly gets the city in the UK. Unfortunately, it fails in the USA and India and probably any country that has states.\r\n\r\n    private fun getCity(context: Context, latitude: Float, longitude: Float): String {\r\n        val gcd = Geocoder(context, Locale.getDefault())\r\n        val addresses = gcd.getFromLocation(latitude.toDouble(), longitude.toDouble(), 1)\r\n        if (addresses.size &gt; 0) {\r\n            val locality = addresses[0].locality\r\n            val getAddressLine0 = addresses[0].getAddressLine(0)\r\n            if (getAddressLine0 != null) {\r\n                val strs = getAddressLine0.split(&quot;,&quot;).toTypedArray()\r\n                if (strs.count() == 1) {\r\n                    if (locality != null &amp;&amp; locality != &quot;&quot;) {\r\n                        return &quot;$locality, ${strs[0]}&quot;\r\n                    }\r\n                    return strs[0]\r\n                }\r\n                for (str in strs) {\r\n                    var tempStr = str.replace(postalCode, &quot;&quot;)\r\n                    if (tempStr != str) {\r\n                        tempStr = tempStr.trim()\r\n                        if (locality != null &amp;&amp; locality != &quot;&quot; &amp;&amp; locality != tempStr) {\r\n                            return &quot;$locality, $tempStr&quot;\r\n                        }\r\n                        return tempStr\r\n                    }\r\n                }\r\n            }\r\n            if (locality != null) {\r\n                return locality\r\n            }\r\n        }\r\n        return &quot;&quot;\r\n    }\r\n\r\n  [1]: https://stackoverflow.com/questions/22323974/how-to-get-city-name-by-latitude-longitude-in-android","title":"How can I get city name from Geocoder?","body":"<p>In Android (either Java or Kotlin is fine) how can I get the city name from the longitude and latitude?</p>\n\n<p>Below I've written a function to display address data. I would like to modify it so that it returns the city name:</p>\n\n<pre><code>private fun getCity(context: Context, latitude: Float, longitude: Float) {\n    val gcd = Geocoder(context, Locale.getDefault())\n    val addresses = gcd.getFromLocation(latitude.toDouble(), longitude.toDouble(), 1)\n    Log.d(\"-----\", \"-----\")\n    Log.d(\"latitude\", latitude.toString())\n    Log.d(\"longitude\", longitude.toString())\n    if (addresses.size &gt; 0) {\n        val locality = addresses[0].locality\n        if (locality != null) {\n            Log.d(\"locality\", locality.toString())\n        }\n        val adminArea = addresses[0].adminArea\n        if (adminArea != null) {\n            Log.d(\"adminArea\", adminArea.toString())\n        }\n        val subAdminArea = addresses[0].subAdminArea\n        if (subAdminArea != null) {\n            Log.d(\"subAdminArea\", subAdminArea.toString())\n        }\n        val subLocality = addresses[0].subLocality\n        if (subLocality != null) {\n            Log.d(\"subLocality\", subLocality.toString())\n        }\n        val thoroughfare = addresses[0].thoroughfare\n        if (thoroughfare != null) {\n            Log.d(\"thoroughfare\", thoroughfare.toString())\n        }\n        val subThoroughfare = addresses[0].subThoroughfare\n        if (subThoroughfare != null) {\n            Log.d(\"subThoroughfare\", subThoroughfare.toString())\n        }\n        val extras = addresses[0].extras\n        if (extras != null) {\n            Log.d(\"extras\", extras.toString())\n        }\n        val premises = addresses[0].premises\n        if (premises != null) {\n            Log.d(\"premises\", premises.toString())\n        }\n        val postalCode = addresses[0].postalCode\n        if (postalCode != null) {\n            Log.d(\"postalCode\", postalCode.toString())\n        }\n        val featureName = addresses[0].featureName\n        if (featureName != null) {\n            Log.d(\"featureName\", featureName.toString())\n        }\n        val getAddressLine0 = addresses[0].getAddressLine(0)\n        if (getAddressLine0 != null)\n            Log.d(\"getAddressLine0\", getAddressLine0.toString())\n        for (i in 0 until addresses[0].maxAddressLineIndex) {\n            Log.d(\"getAddressLine($i)\", addresses[0].getAddressLine(i).toString())\n        }\n    }\n}\n</code></pre>\n\n<p>If I run <code>getCity(context, 53.7f, -1.506f)</code>, <code>featureName</code> contains the correct city name, Wakefield.</p>\n\n<p>If I run <code>getCity(context, 53.801f, -1.549f)</code>, <code>featureName</code> now contains the street name, Portland Place. <code>getAddressLine(0)</code> return Portland Place, 5 Calverley St, Leeds LS1 3DA, UK, which contains the correct city, Leeds. I could remove the street name, post code, and house number from getAddressLine(0) to be left with the city. Unfortunately, there are edge cases where that won't work because sometimes the street name contains abbreviations in <code>getAddressLine(0)</code> but not in <code>thoroughfare</code>.</p>\n\n<p>This question <a href=\"https://stackoverflow.com/questions/22323974/how-to-get-city-name-by-latitude-longitude-in-android\">How to Get City Name by Latitude &amp;Longitude in android?</a> has answers that are completely different because the addresses in different countries are stored in a different way.</p>\n\n<p>There seem to be quite a few variations and edge cases I need to code for just to get the city name for 2 neighbouring cities in the UK. How can I get the correct city name from any latitude or longitude world wide? There are way too many cities in the world to test my code against and code for, and there may be many edge cases and variations that I am unaware even exist.</p>\n\n<p><strong>Edit</strong></p>\n\n<p>The function below correctly gets the city in the UK. Unfortunately, it fails in the USA and India and probably any country that has states.</p>\n\n<pre><code>private fun getCity(context: Context, latitude: Float, longitude: Float): String {\n    val gcd = Geocoder(context, Locale.getDefault())\n    val addresses = gcd.getFromLocation(latitude.toDouble(), longitude.toDouble(), 1)\n    if (addresses.size &gt; 0) {\n        val locality = addresses[0].locality\n        val getAddressLine0 = addresses[0].getAddressLine(0)\n        if (getAddressLine0 != null) {\n            val strs = getAddressLine0.split(\",\").toTypedArray()\n            if (strs.count() == 1) {\n                if (locality != null &amp;&amp; locality != \"\") {\n                    return \"$locality, ${strs[0]}\"\n                }\n                return strs[0]\n            }\n            for (str in strs) {\n                var tempStr = str.replace(postalCode, \"\")\n                if (tempStr != str) {\n                    tempStr = tempStr.trim()\n                    if (locality != null &amp;&amp; locality != \"\" &amp;&amp; locality != tempStr) {\n                        return \"$locality, $tempStr\"\n                    }\n                    return tempStr\n                }\n            }\n        }\n        if (locality != null) {\n            return locality\n        }\n    }\n    return \"\"\n}\n</code></pre>\n"},{"tags":["java","vaadin","vaadin14"],"answers":[{"tags":[],"owner":{"account_id":1831742,"reputation":1989,"user_id":1662997,"display_name":"Knoobie"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1662546299,"creation_date":1662546299,"answer_id":73633890,"question_id":73633336,"body_markdown":"You are combining different Router features. The usage of Route template parameter (:orderId) has to be used in conjunction with `BeforeEnterObserver` instead of `HasUrlParamter`.","title":"Pass the parameter in Vaadin 14 between two routes","body":"<p>You are combining different Router features. The usage of Route template parameter (:orderId) has to be used in conjunction with <code>BeforeEnterObserver</code> instead of <code>HasUrlParamter</code>.</p>\n"}],"owner":{"account_id":26269281,"reputation":3,"user_id":19939412,"display_name":"Alex V."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":301,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73633890,"answer_count":1,"score":0,"last_activity_date":1693392503,"creation_date":1662543992,"question_id":73633336,"body_markdown":"Help me, please, to make navigating between views in vaadin application. \r\nIn OrdersView class I create a link like \r\n\r\n    UI.getCurrent().navigate(FullOrderView.class, new RouteParameters(&quot;orderId&quot;, &quot;123&quot;));\r\n\r\nIn FullOrderView class I specify a route like this\r\n\r\n    @Route(&quot;order/:orderId&quot;)\r\n    public class FullOrderView extends AppLayout implements HasUrlParameter&lt;String&gt;{\r\n    \t@Override\r\n    \tpublic void setParameter(BeforeEvent event, String parameter) {\r\n    \t}\r\nbut I get an error\r\n\r\n    java.lang.IllegalArgumentException: Navigation target &#39;com.example.crudwithvaadin.FullOrderView&#39; requires a parameter.\r\n\r\nIf I remove a &quot;implements HasUrlParameter&quot; and setParameter() I get an error\r\n\r\n    No route found for the given navigation target &#39;com.example.crudwithvaadin.FullOrderView&#39; and parameters &#39;{}&#39;\r\n\r\nHow do I fix the error and pass the parameter correctly?\r\nThanks! ","title":"Pass the parameter in Vaadin 14 between two routes","body":"<p>Help me, please, to make navigating between views in vaadin application.\nIn OrdersView class I create a link like</p>\n<pre><code>UI.getCurrent().navigate(FullOrderView.class, new RouteParameters(&quot;orderId&quot;, &quot;123&quot;));\n</code></pre>\n<p>In FullOrderView class I specify a route like this</p>\n<pre><code>@Route(&quot;order/:orderId&quot;)\npublic class FullOrderView extends AppLayout implements HasUrlParameter&lt;String&gt;{\n    @Override\n    public void setParameter(BeforeEvent event, String parameter) {\n    }\n</code></pre>\n<p>but I get an error</p>\n<pre><code>java.lang.IllegalArgumentException: Navigation target 'com.example.crudwithvaadin.FullOrderView' requires a parameter.\n</code></pre>\n<p>If I remove a &quot;implements HasUrlParameter&quot; and setParameter() I get an error</p>\n<pre><code>No route found for the given navigation target 'com.example.crudwithvaadin.FullOrderView' and parameters '{}'\n</code></pre>\n<p>How do I fix the error and pass the parameter correctly?\nThanks!</p>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1693399817,"post_id":77007126,"comment_id":135755458,"body_markdown":"First does your build work from root level (project?)... simply by using `mvn package`?","body":"First does your build work from root level (project?)... simply by using <code>mvn package</code>?"},{"owner":{"account_id":29302657,"reputation":1,"user_id":22450491,"display_name":"Alex"},"score":0,"creation_date":1693445807,"post_id":77007126,"comment_id":135763272,"body_markdown":"yes, build from root works fine.","body":"yes, build from root works fine."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1693502893,"post_id":77007126,"comment_id":135773212,"body_markdown":"If you like to build parts you have to initially do an `mvn clean install` from the root level afterwards you can do the things you have shown... (You migh try to use Apache Maven 4 alpha 7) which has a lot of improvements related to reactor...","body":"If you like to build parts you have to initially do an <code>mvn clean install</code> from the root level afterwards you can do the things you have shown... (You migh try to use Apache Maven 4 alpha 7) which has a lot of improvements related to reactor..."}],"owner":{"account_id":29302657,"reputation":1,"user_id":22450491,"display_name":"Alex"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693391992,"creation_date":1693390999,"question_id":77007126,"body_markdown":"here is my project module tree:\r\n\r\n```\r\nproject:\r\n    module A\r\n       module A1\r\n       module A2\r\n    module B\r\n       module B1\r\n       module B2\r\n```\r\n\r\nI know how to build module A, for example `mvnw clean package -pl A -am`\r\n\r\nbut try to build module A1 using `mvnw clean package -pl A1 -am` it will failed.\r\n\r\nI also tried `mvnw clean package -pl A/A1 -am` it runs, but build all A including A1 &amp; A2.\r\n\r\nis it possible build A1 and its related module only?","title":"How does mvn package single grandchild modules?","body":"<p>here is my project module tree:</p>\n<pre><code>project:\n    module A\n       module A1\n       module A2\n    module B\n       module B1\n       module B2\n</code></pre>\n<p>I know how to build module A, for example <code>mvnw clean package -pl A -am</code></p>\n<p>but try to build module A1 using <code>mvnw clean package -pl A1 -am</code> it will failed.</p>\n<p>I also tried <code>mvnw clean package -pl A/A1 -am</code> it runs, but build all A including A1 &amp; A2.</p>\n<p>is it possible build A1 and its related module only?</p>\n"},{"tags":["java","google-cloud-platform","google-cloud-dataflow","apache-beam","apache-beam-io"],"comments":[{"owner":{"account_id":23157436,"reputation":2052,"user_id":17258510,"display_name":"kiran mathew"},"score":1,"creation_date":1693750756,"post_id":77007134,"comment_id":135798855,"body_markdown":"Have you gone through  these [link1](https://cloud.google.com/dataflow/docs/guides/logging#LogControls),[link2](https://beam.apache.org/releases/javadoc/2.41.0/org/apache/beam/runners/dataflow/options/DataflowWorkerLoggingOptions.html) and [link3](https://cloud.google.com/knowledge/kb/disabling-fine-graining-dataflow-worker-logs-000004272)?.","body":"Have you gone through  these <a href=\"https://cloud.google.com/dataflow/docs/guides/logging#LogControls\" rel=\"nofollow noreferrer\">link1</a>,<a href=\"https://beam.apache.org/releases/javadoc/2.41.0/org/apache/beam/runners/dataflow/options/DataflowWorkerLoggingOptions.html\" rel=\"nofollow noreferrer\">link2</a> and <a href=\"https://cloud.google.com/knowledge/kb/disabling-fine-graining-dataflow-worker-logs-000004272\" rel=\"nofollow noreferrer\">link3</a>?."}],"owner":{"account_id":4306523,"reputation":7801,"user_id":3518757,"accept_rate":73,"display_name":"oikonomiyaki"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693391792,"creation_date":1693391066,"question_id":77007134,"body_markdown":"I have a Dataflow job written in Java (Beam version 2.43.0, Java 11), which reads messages from Pubsub that contains path to Cloud Storage files.\r\n\r\nDue to high volume of messages, especially during start of the job, Dataflow logging complains with:\r\n```\r\nThrottling logger worker. It used up its 30s quota for logs in only 24.528s\r\nThere was a high rate of log messages from the job and some of them were not sent to Cloud Logging.\r\n```\r\n\r\n[![Throttling logger worker][1]][1]\r\n\r\nThe above is caused by below:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nThese logs came from a particular function, I suspect `FileIO.matchAll()`, which automatically writes a matched file path to Dataflow logging.\r\n\r\nHere is the piece of Beam code (`gcsFilePath` is `PCollection&lt;String&gt;`)\r\n\r\n```\r\ngcsFilePath\r\n  .apply(FileIO.matchAll())\r\n  .apply(FileIO.readMatches())\r\n```\r\n\r\nIs there a way to disable this, without changing the current Cloud Logging settings (bec I need the logging for other purposes)?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/lfJFG.png\r\n  [2]: https://i.stack.imgur.com/nwqTJ.png","title":"Disable Dataflow/Beam logging on FileIO.matchAll()","body":"<p>I have a Dataflow job written in Java (Beam version 2.43.0, Java 11), which reads messages from Pubsub that contains path to Cloud Storage files.</p>\n<p>Due to high volume of messages, especially during start of the job, Dataflow logging complains with:</p>\n<pre><code>Throttling logger worker. It used up its 30s quota for logs in only 24.528s\nThere was a high rate of log messages from the job and some of them were not sent to Cloud Logging.\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/lfJFG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lfJFG.png\" alt=\"Throttling logger worker\" /></a></p>\n<p>The above is caused by below:</p>\n<p><a href=\"https://i.stack.imgur.com/nwqTJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nwqTJ.png\" alt=\"enter image description here\" /></a></p>\n<p>These logs came from a particular function, I suspect <code>FileIO.matchAll()</code>, which automatically writes a matched file path to Dataflow logging.</p>\n<p>Here is the piece of Beam code (<code>gcsFilePath</code> is <code>PCollection&lt;String&gt;</code>)</p>\n<pre><code>gcsFilePath\n  .apply(FileIO.matchAll())\n  .apply(FileIO.readMatches())\n</code></pre>\n<p>Is there a way to disable this, without changing the current Cloud Logging settings (bec I need the logging for other purposes)?</p>\n"},{"tags":["java","minikube","minio","druid"],"comments":[{"owner":{"account_id":22899239,"reputation":171,"user_id":17038259,"display_name":"Sergio Ferragut"},"score":0,"creation_date":1695166232,"post_id":77007209,"comment_id":135986983,"body_markdown":"Have you set the javaOptsArray property in the middle manager config? Middle Manager will spawn Peon JVMs for individual tasks. The javaOptsArray specifies heap and off-heap memory available to each Peon. Some docs: https://druid.apache.org/docs/latest/configuration/#middlemanager-configuration","body":"Have you set the javaOptsArray property in the middle manager config? Middle Manager will spawn Peon JVMs for individual tasks. The javaOptsArray specifies heap and off-heap memory available to each Peon. Some docs: <a href=\"https://druid.apache.org/docs/latest/configuration/#middlemanager-configuration\" rel=\"nofollow noreferrer\">druid.apache.org/docs/latest/configuration/&hellip;</a>"},{"owner":{"account_id":22899239,"reputation":171,"user_id":17038259,"display_name":"Sergio Ferragut"},"score":0,"creation_date":1695166374,"post_id":77007209,"comment_id":135986995,"body_markdown":"Also, although not exactly the same because this uses helm charts, here is a minikube deployment of Druid blog: https://imply.io/blog/apache-druid-for-preppers/","body":"Also, although not exactly the same because this uses helm charts, here is a minikube deployment of Druid blog: <a href=\"https://imply.io/blog/apache-druid-for-preppers/\" rel=\"nofollow noreferrer\">imply.io/blog/apache-druid-for-preppers</a>"}],"owner":{"account_id":20302807,"reputation":97,"user_id":14891818,"display_name":"Alexy Pulivelil"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693391764,"creation_date":1693391764,"question_id":77007209,"body_markdown":"I&#39;m trying to deploy Druid in Minikube with Minio and PostgrSQL. \r\nI&#39;m using Druid-Opearor and all druid-sds-cluster-brokers-0, druid-sds-cluster-coordinators-0,druid-sds-cluster-historicals-0, druid-sds-cluster-middlemanagers-0, druid-sds-cluster-routers-0 are stateful set. Its having status 1/1 and on port-forwarding I&#39;m getting Druid Console. \r\nIn druid console when I tried loading example data-source and the after few seconds the task goes to failed state. On checking the status of task from console it mentioned like this `errorMsg&quot;: &quot;Task execution process exited unsuccessfully with code[137]. See middleManager logs for more details...&quot;` and on checking logs it says `Request failed with status code 404` \r\n\r\n\r\nWill add the minio and psotgresql configuration below :\r\n\r\n```\r\n    s3service.s3-endpoint=192.168.59.xxx\r\n    s3service.s3-endpoint-http-port=30000\r\n    s3service.disable-dns-buckets=true\r\n    s3service.https-only=false\r\n```\r\n\r\n```\r\n    druid.metadata.storage.type=postgresql\r\n    druid.metadata.storage.connector.connectURI=jdbc:postgresql://postgres-service.dev.svc.cluster.local:5432/druid_db\r\n    druid.metadata.storage.connector.host=postgres-service.dev.svc.cluster.local\r\n    druid.metadata.storage.connector.port=5432\r\n    druid.metadata.storage.connector.user=postgres\r\n    druid.metadata.storage.connector.password=test\r\n    # druid.metadata.storage.connector.database=druid_db\r\n    druid.metadata.storage.connector.createTables=true\r\n```\r\n\r\n\r\n```\r\n    druid.storage.type=s3\r\n    druid.storage.bucket=test-bucket\r\n    druid.storage.baseKey=druid/segments-test-dev\r\n    druid.s3.accessKey=xxxxxxxxxxxx\r\n    druid.s3.secretKey=xxxxxxxxxxxxxxxxxxxxxxxxxxxxx\r\n    druid.s3.protocol=http\r\n    druid.s3.enabePathStyleAccess=true\r\n    druid.s3.region=us-east-1\r\n    druid.s3.endpoint.signingRegion=us-east-1\r\n    druid.s3.endpoint.url=http://192.168.59.xxx:30000/\r\n```\r\n\r\n\r\n\r\n\r\nI tried increasing the memory of Minikube to 8GB still no luck. I tried adding request and limit to middlemanager as \r\n\r\n\r\n```\r\n resources:\r\n        limits:\r\n          cpu: &quot;1&quot;\r\n          memory: 1Gi\r\n        requests:\r\n          cpu: &quot;1&quot;\r\n          memory: 1Gi\r\n```\r\n\r\n\r\nBut still the task is getting failed. I don&#39;t know what the issue. Looking for some insights or help. Thanks","title":"Druid Deployment with Minio and PostgreSQL in Minikube","body":"<p>I'm trying to deploy Druid in Minikube with Minio and PostgrSQL.\nI'm using Druid-Opearor and all druid-sds-cluster-brokers-0, druid-sds-cluster-coordinators-0,druid-sds-cluster-historicals-0, druid-sds-cluster-middlemanagers-0, druid-sds-cluster-routers-0 are stateful set. Its having status 1/1 and on port-forwarding I'm getting Druid Console.\nIn druid console when I tried loading example data-source and the after few seconds the task goes to failed state. On checking the status of task from console it mentioned like this <code>errorMsg&quot;: &quot;Task execution process exited unsuccessfully with code[137]. See middleManager logs for more details...&quot;</code> and on checking logs it says <code>Request failed with status code 404</code></p>\n<p>Will add the minio and psotgresql configuration below :</p>\n<pre><code>    s3service.s3-endpoint=192.168.59.xxx\n    s3service.s3-endpoint-http-port=30000\n    s3service.disable-dns-buckets=true\n    s3service.https-only=false\n</code></pre>\n<pre><code>    druid.metadata.storage.type=postgresql\n    druid.metadata.storage.connector.connectURI=jdbc:postgresql://postgres-service.dev.svc.cluster.local:5432/druid_db\n    druid.metadata.storage.connector.host=postgres-service.dev.svc.cluster.local\n    druid.metadata.storage.connector.port=5432\n    druid.metadata.storage.connector.user=postgres\n    druid.metadata.storage.connector.password=test\n    # druid.metadata.storage.connector.database=druid_db\n    druid.metadata.storage.connector.createTables=true\n</code></pre>\n<pre><code>    druid.storage.type=s3\n    druid.storage.bucket=test-bucket\n    druid.storage.baseKey=druid/segments-test-dev\n    druid.s3.accessKey=xxxxxxxxxxxx\n    druid.s3.secretKey=xxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n    druid.s3.protocol=http\n    druid.s3.enabePathStyleAccess=true\n    druid.s3.region=us-east-1\n    druid.s3.endpoint.signingRegion=us-east-1\n    druid.s3.endpoint.url=http://192.168.59.xxx:30000/\n</code></pre>\n<p>I tried increasing the memory of Minikube to 8GB still no luck. I tried adding request and limit to middlemanager as</p>\n<pre><code> resources:\n        limits:\n          cpu: &quot;1&quot;\n          memory: 1Gi\n        requests:\n          cpu: &quot;1&quot;\n          memory: 1Gi\n</code></pre>\n<p>But still the task is getting failed. I don't know what the issue. Looking for some insights or help. Thanks</p>\n"},{"tags":["java","caching","out-of-memory","weblogic12c","oracle-coherence"],"comments":[{"owner":{"account_id":1234315,"reputation":975,"user_id":1198243,"display_name":"rlubke"},"score":0,"creation_date":1693505490,"post_id":77006056,"comment_id":135773677,"body_markdown":"One thing that stands out is the backup count of 2.  That means for each cache entry, there will be two identical cache entries created and distributed amongst the members.  Typically a backup count of 1 is sufficient.  Is there a reason you&#39;re using 2?","body":"One thing that stands out is the backup count of 2.  That means for each cache entry, there will be two identical cache entries created and distributed amongst the members.  Typically a backup count of 1 is sufficient.  Is there a reason you&#39;re using 2?"},{"owner":{"account_id":975141,"reputation":2185,"user_id":2968729,"accept_rate":72,"display_name":"anat0lius"},"score":0,"creation_date":1693554550,"post_id":77006056,"comment_id":135779211,"body_markdown":"@rlubke We thought &#39;more redundancy the better&#39;, but yes, we could try with 1 as well. Nevertheless, shouldn&#39;t this be stable and not impact the performance in such ways?","body":"@rlubke We thought &#39;more redundancy the better&#39;, but yes, we could try with 1 as well. Nevertheless, shouldn&#39;t this be stable and not impact the performance in such ways?"},{"owner":{"account_id":1234315,"reputation":975,"user_id":1198243,"display_name":"rlubke"},"score":0,"creation_date":1693930358,"post_id":77006056,"comment_id":135823239,"body_markdown":"Yes, it could have an impact.  Each insert or mutation of an entry, with a backup count of 2 means that in order for the operation to return, each of the backup inserts/updates needs to be completed before being returned.  The larger the backup count, the larger the increase in latency in operations.","body":"Yes, it could have an impact.  Each insert or mutation of an entry, with a backup count of 2 means that in order for the operation to return, each of the backup inserts/updates needs to be completed before being returned.  The larger the backup count, the larger the increase in latency in operations."},{"owner":{"account_id":1234315,"reputation":975,"user_id":1198243,"display_name":"rlubke"},"score":0,"creation_date":1694794247,"post_id":77006056,"comment_id":135942598,"body_markdown":"were you able to resolve?","body":"were you able to resolve?"},{"owner":{"account_id":975141,"reputation":2185,"user_id":2968729,"accept_rate":72,"display_name":"anat0lius"},"score":0,"creation_date":1695148347,"post_id":77006056,"comment_id":135984317,"body_markdown":"We suggested to try to reduce the parallelism -20% of the application and it&#39;s being monitored. Since it was quite high. No changes in Coherence for now.","body":"We suggested to try to reduce the parallelism -20% of the application and it&#39;s being monitored. Since it was quite high. No changes in Coherence for now."}],"owner":{"account_id":975141,"reputation":2185,"user_id":2968729,"accept_rate":72,"display_name":"anat0lius"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693391376,"creation_date":1693382926,"question_id":77006056,"body_markdown":"We changed the Coherence cache from &quot;replicated&quot; to &quot;near-distributed-persistent&quot;, but now the servers get overloaded. \r\n\r\nThis is the current configuration:\r\n\r\n    &lt;?xml version=&#39;1.0&#39;?&gt;\r\n    &lt;cache-config xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n            xmlns=&quot;http://xmlns.oracle.com/coherence/coherence-cache-config&quot;\r\n            xsi:schemaLocation=&quot;http://xmlns.oracle.com/coherence/coherence-cache-config&quot;&gt;\r\n      &lt;caching-scheme-mapping&gt;\r\n        &lt;cache-mapping&gt;\r\n          &lt;cache-name&gt;app-*&lt;/cache-name&gt;\r\n          &lt;scheme-name&gt;app-refdata-near&lt;/scheme-name&gt;\r\n        &lt;/cache-mapping&gt;\r\n        &lt;cache-mapping&gt;\r\n          &lt;cache-name&gt;configConsultationCache&lt;/cache-name&gt;\r\n          &lt;scheme-name&gt;config&lt;/scheme-name&gt;\r\n        &lt;/cache-mapping&gt;\r\n      &lt;/caching-scheme-mapping&gt;\r\n    \r\n      &lt;caching-schemes&gt;\r\n        &lt;near-scheme&gt;\r\n          &lt;scheme-name&gt;app-refdata-near&lt;/scheme-name&gt;\r\n          &lt;front-scheme&gt;\r\n            &lt;local-scheme&gt;\r\n              &lt;scheme-ref&gt;app-refdata-local&lt;/scheme-ref&gt;\r\n            &lt;/local-scheme&gt;\r\n          &lt;/front-scheme&gt;\r\n          &lt;back-scheme&gt;\r\n            &lt;distributed-scheme&gt;\r\n              &lt;scheme-ref&gt;partitioned&lt;/scheme-ref&gt;\r\n            &lt;/distributed-scheme&gt;\r\n          &lt;/back-scheme&gt;\r\n        &lt;/near-scheme&gt;\r\n    \r\n        &lt;local-scheme&gt;\r\n          &lt;scheme-name&gt;app-refdata-local&lt;/scheme-name&gt;\r\n        &lt;/local-scheme&gt;\r\n    \r\n        &lt;distributed-scheme&gt;\r\n          &lt;scheme-name&gt;partitioned&lt;/scheme-name&gt;\r\n          &lt;backup-count&gt;2&lt;/backup-count&gt;\r\n          &lt;backing-map-scheme&gt;\r\n            &lt;local-scheme/&gt;\r\n          &lt;/backing-map-scheme&gt;\r\n          &lt;persistence&gt;\r\n            &lt;environment&gt;default-active&lt;/environment&gt;\r\n          &lt;/persistence&gt;\r\n          &lt;autostart&gt;true&lt;/autostart&gt;\r\n        &lt;/distributed-scheme&gt;\r\n    \r\n        &lt;local-scheme&gt;\r\n          &lt;scheme-name&gt;config&lt;/scheme-name&gt;\r\n          &lt;expiry-delay&gt;1h&lt;/expiry-delay&gt;\r\n        &lt;/local-scheme&gt;\r\n      &lt;/caching-schemes&gt;\r\n    \r\n    &lt;/cache-config&gt;\r\n\r\nWhich, by the way, is duplicated: is present in 2 jar, but under the same deployable ear. \r\n\r\nIn the [Oracle documentation][1], it is specified that for active-persistent mode, an additional allocation of 20-35% more memory is recommended, which has already been done.\r\n\r\nEach node has approximately 50g of physical memory available, and we have set the heap size between -Xmx=32g and -Xms=32g, but even with that, the memory usage reaches more than 90% of the total available. \r\n\r\nOn a nightly basis, the application refreshes the content of the cache.\r\n\r\nIt has been noticed that the overload becomes more pronounced when the application is used intensively (it&#39;s a high-throughput type of application), as a result, the cache is used (read) further.\r\n\r\nBy checking the MBeans of Coherence in the Enterprise Manager, we see multiple entries for the same cache name. For instance, 3 of them are NearCache types and the other 3 are LocalCache.\r\n\r\n\r\nWe have analyzed a heap dump, but there is nothing unusual. The heap dump weighs just 9g, not 32g. The biggest objects are, as expected, from Coherence.\r\n\r\n[![heap dump usage][2]][2]\r\n\r\nAny advice? **Does the coherence configuration look okay? Does the refresh of the complete cache conflict with the new configuration?**\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/middleware/fusion-middleware/coherence/12.2.1.4/administer/persisting-caches.html#GUID-1848628D-5423-4167-93F0-61196B4C35FE\r\n  [2]: https://i.stack.imgur.com/QeYJO.png","title":"Excecive memory usage after changing Coherence configuration","body":"<p>We changed the Coherence cache from &quot;replicated&quot; to &quot;near-distributed-persistent&quot;, but now the servers get overloaded.</p>\n<p>This is the current configuration:</p>\n<pre><code>&lt;?xml version='1.0'?&gt;\n&lt;cache-config xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n        xmlns=&quot;http://xmlns.oracle.com/coherence/coherence-cache-config&quot;\n        xsi:schemaLocation=&quot;http://xmlns.oracle.com/coherence/coherence-cache-config&quot;&gt;\n  &lt;caching-scheme-mapping&gt;\n    &lt;cache-mapping&gt;\n      &lt;cache-name&gt;app-*&lt;/cache-name&gt;\n      &lt;scheme-name&gt;app-refdata-near&lt;/scheme-name&gt;\n    &lt;/cache-mapping&gt;\n    &lt;cache-mapping&gt;\n      &lt;cache-name&gt;configConsultationCache&lt;/cache-name&gt;\n      &lt;scheme-name&gt;config&lt;/scheme-name&gt;\n    &lt;/cache-mapping&gt;\n  &lt;/caching-scheme-mapping&gt;\n\n  &lt;caching-schemes&gt;\n    &lt;near-scheme&gt;\n      &lt;scheme-name&gt;app-refdata-near&lt;/scheme-name&gt;\n      &lt;front-scheme&gt;\n        &lt;local-scheme&gt;\n          &lt;scheme-ref&gt;app-refdata-local&lt;/scheme-ref&gt;\n        &lt;/local-scheme&gt;\n      &lt;/front-scheme&gt;\n      &lt;back-scheme&gt;\n        &lt;distributed-scheme&gt;\n          &lt;scheme-ref&gt;partitioned&lt;/scheme-ref&gt;\n        &lt;/distributed-scheme&gt;\n      &lt;/back-scheme&gt;\n    &lt;/near-scheme&gt;\n\n    &lt;local-scheme&gt;\n      &lt;scheme-name&gt;app-refdata-local&lt;/scheme-name&gt;\n    &lt;/local-scheme&gt;\n\n    &lt;distributed-scheme&gt;\n      &lt;scheme-name&gt;partitioned&lt;/scheme-name&gt;\n      &lt;backup-count&gt;2&lt;/backup-count&gt;\n      &lt;backing-map-scheme&gt;\n        &lt;local-scheme/&gt;\n      &lt;/backing-map-scheme&gt;\n      &lt;persistence&gt;\n        &lt;environment&gt;default-active&lt;/environment&gt;\n      &lt;/persistence&gt;\n      &lt;autostart&gt;true&lt;/autostart&gt;\n    &lt;/distributed-scheme&gt;\n\n    &lt;local-scheme&gt;\n      &lt;scheme-name&gt;config&lt;/scheme-name&gt;\n      &lt;expiry-delay&gt;1h&lt;/expiry-delay&gt;\n    &lt;/local-scheme&gt;\n  &lt;/caching-schemes&gt;\n\n&lt;/cache-config&gt;\n</code></pre>\n<p>Which, by the way, is duplicated: is present in 2 jar, but under the same deployable ear.</p>\n<p>In the <a href=\"https://docs.oracle.com/en/middleware/fusion-middleware/coherence/12.2.1.4/administer/persisting-caches.html#GUID-1848628D-5423-4167-93F0-61196B4C35FE\" rel=\"nofollow noreferrer\">Oracle documentation</a>, it is specified that for active-persistent mode, an additional allocation of 20-35% more memory is recommended, which has already been done.</p>\n<p>Each node has approximately 50g of physical memory available, and we have set the heap size between -Xmx=32g and -Xms=32g, but even with that, the memory usage reaches more than 90% of the total available.</p>\n<p>On a nightly basis, the application refreshes the content of the cache.</p>\n<p>It has been noticed that the overload becomes more pronounced when the application is used intensively (it's a high-throughput type of application), as a result, the cache is used (read) further.</p>\n<p>By checking the MBeans of Coherence in the Enterprise Manager, we see multiple entries for the same cache name. For instance, 3 of them are NearCache types and the other 3 are LocalCache.</p>\n<p>We have analyzed a heap dump, but there is nothing unusual. The heap dump weighs just 9g, not 32g. The biggest objects are, as expected, from Coherence.</p>\n<p><a href=\"https://i.stack.imgur.com/QeYJO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QeYJO.png\" alt=\"heap dump usage\" /></a></p>\n<p>Any advice? <strong>Does the coherence configuration look okay? Does the refresh of the complete cache conflict with the new configuration?</strong></p>\n"},{"tags":["java","deserialization","unpack","msgpack"],"owner":{"account_id":29297453,"reputation":11,"user_id":22446482,"display_name":"Nicole"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693390968,"creation_date":1693390968,"question_id":77007123,"body_markdown":"I tried to unpack a msgPack message but I&#39;m getting the message &quot;Expected raw value, but got array value&quot;.\r\n\r\nMy unpack method:\r\n\r\n        private byte[] unpack(byte[] bytes) throws IOException {\r\n            \r\n            Template&lt;byte[]&gt; tmpl = Templates.TByteArray;\r\n            MessagePack msgpack = new MessagePack();\r\n            Unpacker unpacker = msgpack.createUnpacker(new ByteArrayInputStream(bytes));\r\n            \r\n            return unpacker.read(tmpl);\r\n        }","title":"How to unpack msgPack messages?","body":"<p>I tried to unpack a msgPack message but I'm getting the message &quot;Expected raw value, but got array value&quot;.</p>\n<p>My unpack method:</p>\n<pre><code>    private byte[] unpack(byte[] bytes) throws IOException {\n        \n        Template&lt;byte[]&gt; tmpl = Templates.TByteArray;\n        MessagePack msgpack = new MessagePack();\n        Unpacker unpacker = msgpack.createUnpacker(new ByteArrayInputStream(bytes));\n        \n        return unpacker.read(tmpl);\n    }\n</code></pre>\n"},{"tags":["java","path-separator"],"comments":[{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":2,"creation_date":1692106563,"post_id":76906375,"comment_id":135577404,"body_markdown":"You do not. You also can use `/` on every platform, the JVM will translate it to ``\\`` on Windows (which is the only platform that uses ``\\`` anyway).","body":"You do not. You also can use <code>&#47;</code> on every platform, the JVM will translate it to <code>\\</code> on Windows (which is the only platform that uses <code>\\</code> anyway)."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":13,"creation_date":1692106645,"post_id":76906375,"comment_id":135577419,"body_markdown":"Don&#39;t do it at all. Use `Path p = Path.of(&quot;x&quot;, &quot;y&quot;, &quot;z&quot;, &quot;foo.pdf&quot;);`","body":"Don&#39;t do it at all. Use <code>Path p = Path.of(&quot;x&quot;, &quot;y&quot;, &quot;z&quot;, &quot;foo.pdf&quot;);</code>"},{"owner":{"display_name":"user6073886"},"score":2,"creation_date":1692106663,"post_id":76906375,"comment_id":135577425,"body_markdown":"Escaping is something that only has to be done with String literals in your code. (Those things between `&quot;`).","body":"Escaping is something that only has to be done with String literals in your code. (Those things between <code>&quot;</code>)."},{"owner":{"account_id":1475,"reputation":533754,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"score":1,"creation_date":1692106743,"post_id":76906375,"comment_id":135577440,"body_markdown":"Regarding your comment in the first method: *why* do you prefer to write overly verbose code? That’s a bad habit that you should work on breaking ASAP.","body":"Regarding your comment in the first method: <i>why</i> do you prefer to write overly verbose code? That’s a bad habit that you should work on breaking ASAP."},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":1,"creation_date":1692106985,"post_id":76906375,"comment_id":135577501,"body_markdown":"Off topic but that SeparatorCharactor class doesn&#39;t add any value and adds noise to your code.","body":"Off topic but that SeparatorCharactor class doesn&#39;t add any value and adds noise to your code."},{"owner":{"account_id":2989348,"reputation":85,"user_id":12927325,"display_name":"3rdRockSoftware"},"score":0,"creation_date":1692107180,"post_id":76906375,"comment_id":135577554,"body_markdown":"@aled I was going to ask WHY but now I&#39;ve thought about it, is it because File.separator is static ?","body":"@aled I was going to ask WHY but now I&#39;ve thought about it, is it because File.separator is static ?"},{"owner":{"account_id":2396133,"reputation":2128,"user_id":2638227,"display_name":"Mustafa &#214;z&#231;etin"},"score":0,"creation_date":1692107434,"post_id":76906375,"comment_id":135577618,"body_markdown":"There is no point in struggling with combining things. Use the built-in `Paths` class for path operations. Example: `Path path = Paths.get(&quot;dir1&quot;, &quot;dir2&quot;, &quot;file.txt&quot;);` in `java.nio.file` package.","body":"There is no point in struggling with combining things. Use the built-in <code>Paths</code> class for path operations. Example: <code>Path path = Paths.get(&quot;dir1&quot;, &quot;dir2&quot;, &quot;file.txt&quot;);</code> in <code>java.nio.file</code> package."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1692107594,"post_id":76906375,"comment_id":135577664,"body_markdown":"@Mustafa&#214;z&#231;etin I already mentioned that","body":"@Mustafa&#214;z&#231;etin I already mentioned that"},{"owner":{"account_id":2396133,"reputation":2128,"user_id":2638227,"display_name":"Mustafa &#214;z&#231;etin"},"score":0,"creation_date":1692108107,"post_id":76906375,"comment_id":135577771,"body_markdown":"@g00se: Right, but mine is yet another alternative for older Java (7+) versions. `Path.of()` is newer.","body":"@g00se: Right, but mine is yet another alternative for older Java (7+) versions. <code>Path.of()</code> is newer."},{"owner":{"account_id":2989348,"reputation":85,"user_id":12927325,"display_name":"3rdRockSoftware"},"score":0,"creation_date":1692108194,"post_id":76906375,"comment_id":135577794,"body_markdown":"@g00se Thank you. I didn&#39;t know about the Path class. This makes life a lot easier. For anyone reading this in the future, the documentation is [here](https://docs.oracle.com/javase/tutorial/essential/io/pathClass.html)","body":"@g00se Thank you. I didn&#39;t know about the Path class. This makes life a lot easier. For anyone reading this in the future, the documentation is <a href=\"https://docs.oracle.com/javase/tutorial/essential/io/pathClass.html\" rel=\"nofollow noreferrer\">here</a>"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1692108206,"post_id":76906375,"comment_id":135577798,"body_markdown":"Ah right - missed that sorry","body":"Ah right - missed that sorry"},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":2,"creation_date":1692112815,"post_id":76906375,"comment_id":135578729,"body_markdown":"@3rdRockSoftware think about what behavior or benefit does that class add to your code. Does it justify to be added? it just exists to return the same value that File.separator has. It is just code bloat.","body":"@3rdRockSoftware think about what behavior or benefit does that class add to your code. Does it justify to be added? it just exists to return the same value that File.separator has. It is just code bloat."}],"answers":[{"tags":[],"owner":{"account_id":7655262,"reputation":7506,"user_id":5802417,"display_name":"Michael Gantman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692125263,"creation_date":1692107678,"answer_id":76906509,"question_id":76906375,"body_markdown":"Definitely not. You don&#39;t need to escape it. But also in your code `&quot;S&quot; + sep + sep + &quot;folder1&quot;` you rely that the value of your `sep` variable is &quot;`\\`&quot; which is not guaranteed. So if you wanted to escape it you would have to do `&quot;S&quot; + &quot;\\\\&quot; + sep + &quot;folder1&quot;`. But again not only you don&#39;t need to do it, but if you do you will get unexpected and incorrect result","title":"Do I need to escape a separator character in a file path in java","body":"<p>Definitely not. You don't need to escape it. But also in your code <code>&quot;S&quot; + sep + sep + &quot;folder1&quot;</code> you rely that the value of your <code>sep</code> variable is &quot;<code>\\</code>&quot; which is not guaranteed. So if you wanted to escape it you would have to do <code>&quot;S&quot; + &quot;\\\\&quot; + sep + &quot;folder1&quot;</code>. But again not only you don't need to do it, but if you do you will get unexpected and incorrect result</p>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1692124473,"creation_date":1692122556,"answer_id":76908194,"question_id":76906375,"body_markdown":"&gt;Do I need to escape the file separator ?\r\n\r\nNo, you do *not* need to escape the separator in a path in Java. \r\n\r\nJust use the forward-slash character (`/`) to indicate a file path separator in a generic sense. \r\n\r\nThe file-related libraries in Java automatically translate the forward-slash character to the platform-specific character. \r\n\r\nThe `/` translates to:\r\n\r\n - `/` on Unix-oriented platforms such as macOS, Linux, AIX, and BSD. \r\n - `\\` on Microsoft Windows. \r\n - `:` on [legacy Mac OS 9][1] and earlier. \r\n\r\n---------\r\n\r\n&gt;do I need : `&quot;S&quot; + sep + &quot;folder1&quot;` or `&quot;S&quot; + sep + sep + &quot;folder1&quot;`\r\n\r\nNeither.\r\n\r\nIn modern Java, use the convenient classes provided by [NIO][2]. See [`Path.of`][3] or [`Paths.get`][4].\r\n\r\n\r\n    Path path = Path.of( &quot;S&quot;, &quot;folder1&quot; , &quot;folder2&quot; );\r\n\r\n---------\r\n\r\n&gt;separator character which I am creating with this code\r\n\r\nNo, do not create a method for that purpose. Your method adds no value. Calling that method will only confuse anyone reading your code. \r\n\r\nIf you want to use a constant provided by the JVM, just use it. Just call `File.separator` directly. \r\n\r\n\r\n---------\r\n\r\n\r\nTip: Be careful in selecting a tutorial or article about file-handling in Java. \r\n\r\nThe early versions of Java had file-related classes that were awkward and confusing. Many pages were written in trying  to explain these. Avoid such outdated material. \r\n\r\nThose legacy file-handling classes were supplanted by the modern classes of [NIO][2] and NIO.2. Focus on these classes when studying Java. \r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Classic_Mac_OS\r\n  [2]: https://docs.oracle.com/javase/tutorial/essential/io/fileio.html\r\n  [3]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/nio/file/Path.html#of(java.lang.String,java.lang.String...)\r\n  [4]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/nio/file/Paths.html#get(java.lang.String,java.lang.String...)","title":"Do I need to escape a separator character in a file path in java","body":"<blockquote>\n<p>Do I need to escape the file separator ?</p>\n</blockquote>\n<p>No, you do <em>not</em> need to escape the separator in a path in Java.</p>\n<p>Just use the forward-slash character (<code>/</code>) to indicate a file path separator in a generic sense.</p>\n<p>The file-related libraries in Java automatically translate the forward-slash character to the platform-specific character.</p>\n<p>The <code>/</code> translates to:</p>\n<ul>\n<li><code>/</code> on Unix-oriented platforms such as macOS, Linux, AIX, and BSD.</li>\n<li><code>\\</code> on Microsoft Windows.</li>\n<li><code>:</code> on <a href=\"https://en.wikipedia.org/wiki/Classic_Mac_OS\" rel=\"nofollow noreferrer\">legacy Mac OS 9</a> and earlier.</li>\n</ul>\n<hr />\n<blockquote>\n<p>do I need : <code>&quot;S&quot; + sep + &quot;folder1&quot;</code> or <code>&quot;S&quot; + sep + sep + &quot;folder1&quot;</code></p>\n</blockquote>\n<p>Neither.</p>\n<p>In modern Java, use the convenient classes provided by <a href=\"https://docs.oracle.com/javase/tutorial/essential/io/fileio.html\" rel=\"nofollow noreferrer\">NIO</a>. See <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/nio/file/Path.html#of(java.lang.String,java.lang.String...)\" rel=\"nofollow noreferrer\"><code>Path.of</code></a> or <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/nio/file/Paths.html#get(java.lang.String,java.lang.String...)\" rel=\"nofollow noreferrer\"><code>Paths.get</code></a>.</p>\n<pre><code>Path path = Path.of( &quot;S&quot;, &quot;folder1&quot; , &quot;folder2&quot; );\n</code></pre>\n<hr />\n<blockquote>\n<p>separator character which I am creating with this code</p>\n</blockquote>\n<p>No, do not create a method for that purpose. Your method adds no value. Calling that method will only confuse anyone reading your code.</p>\n<p>If you want to use a constant provided by the JVM, just use it. Just call <code>File.separator</code> directly.</p>\n<hr />\n<p>Tip: Be careful in selecting a tutorial or article about file-handling in Java.</p>\n<p>The early versions of Java had file-related classes that were awkward and confusing. Many pages were written in trying  to explain these. Avoid such outdated material.</p>\n<p>Those legacy file-handling classes were supplanted by the modern classes of <a href=\"https://docs.oracle.com/javase/tutorial/essential/io/fileio.html\" rel=\"nofollow noreferrer\">NIO</a> and NIO.2. Focus on these classes when studying Java.</p>\n"},{"tags":[],"owner":{"account_id":2989348,"reputation":85,"user_id":12927325,"display_name":"3rdRockSoftware"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693390913,"creation_date":1693390913,"answer_id":77007112,"question_id":76906375,"body_markdown":"Thank you all for all your answers.\r\n\r\nI have now adapted my code to use the Path API like this:\r\n```\r\nimport java.nio.file.FileSystems;\r\nimport java.nio.file.Path;\r\n\r\nprivate Path path = FileSystems.getDefault().getPath(\r\n            &quot;Root&quot;,\r\n            &quot;folder1&quot;,\r\n            &quot;folder2&quot;,\r\n            &quot;filename.zzz&quot;\r\n    );\r\n```\r\nThis works perfectly.\r\n\r\nThe complete path can be accessed by using\r\n```path.toString() //&quot;C:\\Root\\folder1\\folder2\\filename.zzz&quot;```\r\n\r\nThe parent folder =\r\n```path.getParent() //&quot;C:\\Root\\folder1\\folder2&quot;```\r\n\r\nThe filename = \r\n```path.getFilename() //&quot;filename.zzz&quot;```","title":"Do I need to escape a separator character in a file path in java","body":"<p>Thank you all for all your answers.</p>\n<p>I have now adapted my code to use the Path API like this:</p>\n<pre><code>import java.nio.file.FileSystems;\nimport java.nio.file.Path;\n\nprivate Path path = FileSystems.getDefault().getPath(\n            &quot;Root&quot;,\n            &quot;folder1&quot;,\n            &quot;folder2&quot;,\n            &quot;filename.zzz&quot;\n    );\n</code></pre>\n<p>This works perfectly.</p>\n<p>The complete path can be accessed by using\n<code>path.toString() //&quot;C:\\Root\\folder1\\folder2\\filename.zzz&quot;</code></p>\n<p>The parent folder =\n<code>path.getParent() //&quot;C:\\Root\\folder1\\folder2&quot;</code></p>\n<p>The filename =\n<code>path.getFilename() //&quot;filename.zzz&quot;</code></p>\n"}],"owner":{"account_id":2989348,"reputation":85,"user_id":12927325,"display_name":"3rdRockSoftware"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":115,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76908194,"answer_count":3,"score":1,"last_activity_date":1693390913,"creation_date":1692106462,"question_id":76906375,"body_markdown":"There are many questions on escape characters but I seem unable to find an answer when using File.separator\r\n\r\nI am using a system dependant separator character which I am creating with this code:\r\n```\r\npublic class SeparatorCharactor\r\n{\r\n    public static String createSeparatorCharactor()\r\n    {\r\n        String sep = File.separator;\r\n        return sep;\r\n        //I could use *return File.separator;* but I prefer to do it in 2 steps.\r\n    }\r\n}\r\n```\r\nMy understanding is that this creates a file separator that will work on any operating system.\r\n\r\nI am then using the file separator like this :\r\n```\r\nprivate String sep = SeparatorCharactor.createSeparatorCharactor();\r\nprivate String path = &quot;S:&quot;\r\n   + sep + &quot;folder1&quot;\r\n   + sep + &quot;folder2&quot;;\r\n```\r\nMy Question is : Do I need to escape the file separator ?\r\n\r\nIn other words do I need : \r\n1. ```&quot;S&quot; + sep + &quot;folder1&quot;```\r\n\r\nor\r\n\r\n2. ```&quot;S&quot; + sep + sep + &quot;folder1&quot;```","title":"Do I need to escape a separator character in a file path in java","body":"<p>There are many questions on escape characters but I seem unable to find an answer when using File.separator</p>\n<p>I am using a system dependant separator character which I am creating with this code:</p>\n<pre><code>public class SeparatorCharactor\n{\n    public static String createSeparatorCharactor()\n    {\n        String sep = File.separator;\n        return sep;\n        //I could use *return File.separator;* but I prefer to do it in 2 steps.\n    }\n}\n</code></pre>\n<p>My understanding is that this creates a file separator that will work on any operating system.</p>\n<p>I am then using the file separator like this :</p>\n<pre><code>private String sep = SeparatorCharactor.createSeparatorCharactor();\nprivate String path = &quot;S:&quot;\n   + sep + &quot;folder1&quot;\n   + sep + &quot;folder2&quot;;\n</code></pre>\n<p>My Question is : Do I need to escape the file separator ?</p>\n<p>In other words do I need :</p>\n<ol>\n<li><code>&quot;S&quot; + sep + &quot;folder1&quot;</code></li>\n</ol>\n<p>or</p>\n<ol start=\"2\">\n<li><code>&quot;S&quot; + sep + sep + &quot;folder1&quot;</code></li>\n</ol>\n"},{"tags":["java","excel","apache-poi"],"comments":[{"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"score":2,"creation_date":1693393744,"post_id":77006993,"comment_id":135754110,"body_markdown":"Pretty sure that Excel actually stores the workbook references by ID, and Apache POI de-references that to the name for you (see `LinkTable.getExternalSheetIndex`) - what happens if you try adding the link to the new file to the links table first?","body":"Pretty sure that Excel actually stores the workbook references by ID, and Apache POI de-references that to the name for you (see <code>LinkTable.getExternalSheetIndex</code>) - what happens if you try adding the link to the new file to the links table first?"},{"owner":{"account_id":24500,"reputation":3838,"user_id":62349,"accept_rate":90,"display_name":"dajood"},"score":2,"creation_date":1693401067,"post_id":77006993,"comment_id":135755765,"body_markdown":"@Gagravarr I used the debugger to walk through the LinkTable External Block entries. The reference can be found in the encodedURL attribute of the block. So I did the replace operation in the LinkTable prior to changing the cells. This worked, thank you!!\nNow, I&#39;ll decide wether to access this stuff via reflection or use a local fork of POI.","body":"@Gagravarr I used the debugger to walk through the LinkTable External Block entries. The reference can be found in the encodedURL attribute of the block. So I did the replace operation in the LinkTable prior to changing the cells. This worked, thank you!! Now, I&#39;ll decide wether to access this stuff via reflection or use a local fork of POI."},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":2,"creation_date":1693408947,"post_id":77006993,"comment_id":135757726,"body_markdown":"What about using [InternalWorkbook.changeExternalReference](https://poi.apache.org/apidocs/dev/org/apache/poi/hssf/model/InternalWorkbook.html#changeExternalReference-java.lang.String-java.lang.String-)? That calls [LinkTable.changeExternalReference](https://svn.apache.org/viewvc/poi/tags/REL_5_2_3/poi/src/main/java/org/apache/poi/hssf/model/LinkTable.java?view=markup#l676).","body":"What about using <a href=\"https://poi.apache.org/apidocs/dev/org/apache/poi/hssf/model/InternalWorkbook.html#changeExternalReference-java.lang.String-java.lang.String-\" rel=\"nofollow noreferrer\">InternalWorkbook.changeExternalReference</a>? That calls <a href=\"https://svn.apache.org/viewvc/poi/tags/REL_5_2_3/poi/src/main/java/org/apache/poi/hssf/model/LinkTable.java?view=markup#l676\" rel=\"nofollow noreferrer\">LinkTable.changeExternalReference</a>."},{"owner":{"account_id":24500,"reputation":3838,"user_id":62349,"accept_rate":90,"display_name":"dajood"},"score":0,"creation_date":1693411732,"post_id":77006993,"comment_id":135758322,"body_markdown":"@AxelRichter I don&#39;t know the complete URL (I would have to search for it) upfront. That&#39;s why my idea was to replace just the part I know. On the other hand, I struggle to see how to enumerate through all existing ExternalReference URLs. \nIt would be a great pleasure to see that I could use POI without the hacky approach.","body":"@AxelRichter I don&#39;t know the complete URL (I would have to search for it) upfront. That&#39;s why my idea was to replace just the part I know. On the other hand, I struggle to see how to enumerate through all existing ExternalReference URLs.  It would be a great pleasure to see that I could use POI without the hacky approach."}],"owner":{"account_id":24500,"reputation":3838,"user_id":62349,"accept_rate":90,"display_name":"dajood"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693390903,"creation_date":1693389951,"question_id":77006993,"body_markdown":"My goal is to write a CLI tool to mass replace Strings that represent links to external Excel Workbooks. This is done to prepare for a network infrastructure change that will affect host names.\r\n\r\nThis is only about .xls files - not .xlsx!\r\n\r\nI&#39;m using Java and Apache POI, but I&#39;m open to use other libraries, if necessary.\r\n\r\nThe scenario is that in an ecosystem where Excel is massively used, interconnected Workbooks are spread on different network addresses. This applies only to references in formulas, there are no other data sources like databases.\r\n\r\nExample:\r\n\r\n```\r\n=&#39;\\\\srvszt03\\aevalutation$\\HR\\[HR 2013.xls]PGM&#39;!F17+&#39;\\\\srvszt03\\aevaluation$\\HR\\[HR 2013.xls]PGM&#39;!F18\r\n```\r\n\r\nThe goal would be to replace each occurance of `srvszt03` with `hosthr23` across all sheets of the workbook. After the infrastructure change, Excel users should be able to just continue their work without having to change those references manually.\r\n\r\nI tried to implement this using Apache POI 5.2.3 with a rather naive approach:\r\n\r\n```\r\n        for (int i = 0; i &lt; workbook.getNumberOfSheets(); i++) {\r\n            Sheet sheet = workbook.getSheetAt(i);\r\n\r\n            for (Row row : sheet) {\r\n\r\n                Iterator&lt;Cell&gt; cellIterator = row.cellIterator();\r\n                while (cellIterator.hasNext()) {\r\n                    Cell cell = cellIterator.next();\r\n                    if (cell.getCellType() == CellType.FORMULA) {\r\n                        String formula = cell.getCellFormula();\r\n\r\n                        if (formula.contains(searchString)) {\r\n                            String newFormula = formula.replace(searchString, replaceString);\r\n                            cell.setCellFormula(newFormula);\r\n                        }\r\n                    }\r\n                }\r\n```\r\n\r\nThis results in a `RuntimeException`:\r\n\r\n```\r\njava.lang.RuntimeException: No external workbook with name &#39;test-target.xls&#39;\r\n\tat org.apache.poi.hssf.model.LinkTable.getExternalSheetIndex(LinkTable.java:449)\r\n\tat org.apache.poi.hssf.model.InternalWorkbook.getExternalSheetIndex(InternalWorkbook.java:1575)\r\n\tat org.apache.poi.hssf.usermodel.HSSFEvaluationWorkbook.getSheetExtIx(HSSFEvaluationWorkbook.java:291)\r\n\tat org.apache.poi.hssf.usermodel.HSSFEvaluationWorkbook.get3DReferencePtg(HSSFEvaluationWorkbook.java:88)\r\n\tat org.apache.poi.ss.formula.FormulaParser.createAreaRefParseNode(FormulaParser.java:980)\r\n\tat org.apache.poi.ss.formula.FormulaParser.parseRangeable(FormulaParser.java:574)\r\n\tat org.apache.poi.ss.formula.FormulaParser.parseRangeExpression(FormulaParser.java:325)\r\n\tat org.apache.poi.ss.formula.FormulaParser.parseSimpleFactor(FormulaParser.java:1553)\r\n\tat org.apache.poi.ss.formula.FormulaParser.percentFactor(FormulaParser.java:1511)\r\n\tat org.apache.poi.ss.formula.FormulaParser.powerFactor(FormulaParser.java:1498)\r\n\tat org.apache.poi.ss.formula.FormulaParser.Term(FormulaParser.java:1872)\r\n\tat org.apache.poi.ss.formula.FormulaParser.additiveExpression(FormulaParser.java:1999)\r\n\tat org.apache.poi.ss.formula.FormulaParser.concatExpression(FormulaParser.java:1983)\r\n\tat org.apache.poi.ss.formula.FormulaParser.comparisonExpression(FormulaParser.java:1940)\r\n\tat org.apache.poi.ss.formula.FormulaParser.intersectionExpression(FormulaParser.java:1913)\r\n\tat org.apache.poi.ss.formula.FormulaParser.unionExpression(FormulaParser.java:1894)\r\n\tat org.apache.poi.ss.formula.FormulaParser.parse(FormulaParser.java:2041)\r\n\tat org.apache.poi.ss.formula.FormulaParser.parse(FormulaParser.java:173)\r\n\tat org.apache.poi.ss.formula.FormulaParser.parse(FormulaParser.java:193)\r\n\tat org.apache.poi.hssf.model.HSSFFormulaParser.parse(HSSFFormulaParser.java:79)\r\n\tat org.apache.poi.hssf.usermodel.HSSFCell.setCellFormulaImpl(HSSFCell.java:530)\r\n\tat org.apache.poi.ss.usermodel.CellBase.setCellFormula(CellBase.java:124)\r\n\tat com.foo.excell.HSSFReplace.replace(HSSFReplace.java:39)\r\n\tat com.foo.excell.Change.run(Change.java:77)\r\n\tat picocli.CommandLine.executeUserObject(CommandLine.java:2026)\r\n\tat picocli.CommandLine.access$1500(CommandLine.java:148)\r\n\tat \r\n\r\n```\r\n\r\nSo I assumed that POI verifies the reference in order to make sure the operation doesn&#39;t result in a broken file.\r\n\r\nI also expected there to be a way to disable the check. So according to an article, I tried to call this upfront:\r\n\r\n```\r\n FormulaEvaluator evaluator = workbook.getCreationHelper().createFormulaEvaluator();\r\n evaluator.setIgnoreMissingWorkbooks(true);\r\n```\r\n\r\nWhich had no effect.\r\n\r\nMy problem only appears for HSSF(.xls) Workbooks. With XSSF, all works fine by directly manipulating the `ExternalLinksTable`.\r\n\r\nSo, how can I stop Apache POI from checking for existing external Workbooks or what are alternative approaches to my problem?\r\n\r\n\r\n\r\n\r\n\r\n","title":"How to replace Strings in external links of .xls Workbooks?","body":"<p>My goal is to write a CLI tool to mass replace Strings that represent links to external Excel Workbooks. This is done to prepare for a network infrastructure change that will affect host names.</p>\n<p>This is only about .xls files - not .xlsx!</p>\n<p>I'm using Java and Apache POI, but I'm open to use other libraries, if necessary.</p>\n<p>The scenario is that in an ecosystem where Excel is massively used, interconnected Workbooks are spread on different network addresses. This applies only to references in formulas, there are no other data sources like databases.</p>\n<p>Example:</p>\n<pre><code>='\\\\srvszt03\\aevalutation$\\HR\\[HR 2013.xls]PGM'!F17+'\\\\srvszt03\\aevaluation$\\HR\\[HR 2013.xls]PGM'!F18\n</code></pre>\n<p>The goal would be to replace each occurance of <code>srvszt03</code> with <code>hosthr23</code> across all sheets of the workbook. After the infrastructure change, Excel users should be able to just continue their work without having to change those references manually.</p>\n<p>I tried to implement this using Apache POI 5.2.3 with a rather naive approach:</p>\n<pre><code>        for (int i = 0; i &lt; workbook.getNumberOfSheets(); i++) {\n            Sheet sheet = workbook.getSheetAt(i);\n\n            for (Row row : sheet) {\n\n                Iterator&lt;Cell&gt; cellIterator = row.cellIterator();\n                while (cellIterator.hasNext()) {\n                    Cell cell = cellIterator.next();\n                    if (cell.getCellType() == CellType.FORMULA) {\n                        String formula = cell.getCellFormula();\n\n                        if (formula.contains(searchString)) {\n                            String newFormula = formula.replace(searchString, replaceString);\n                            cell.setCellFormula(newFormula);\n                        }\n                    }\n                }\n</code></pre>\n<p>This results in a <code>RuntimeException</code>:</p>\n<pre><code>java.lang.RuntimeException: No external workbook with name 'test-target.xls'\n    at org.apache.poi.hssf.model.LinkTable.getExternalSheetIndex(LinkTable.java:449)\n    at org.apache.poi.hssf.model.InternalWorkbook.getExternalSheetIndex(InternalWorkbook.java:1575)\n    at org.apache.poi.hssf.usermodel.HSSFEvaluationWorkbook.getSheetExtIx(HSSFEvaluationWorkbook.java:291)\n    at org.apache.poi.hssf.usermodel.HSSFEvaluationWorkbook.get3DReferencePtg(HSSFEvaluationWorkbook.java:88)\n    at org.apache.poi.ss.formula.FormulaParser.createAreaRefParseNode(FormulaParser.java:980)\n    at org.apache.poi.ss.formula.FormulaParser.parseRangeable(FormulaParser.java:574)\n    at org.apache.poi.ss.formula.FormulaParser.parseRangeExpression(FormulaParser.java:325)\n    at org.apache.poi.ss.formula.FormulaParser.parseSimpleFactor(FormulaParser.java:1553)\n    at org.apache.poi.ss.formula.FormulaParser.percentFactor(FormulaParser.java:1511)\n    at org.apache.poi.ss.formula.FormulaParser.powerFactor(FormulaParser.java:1498)\n    at org.apache.poi.ss.formula.FormulaParser.Term(FormulaParser.java:1872)\n    at org.apache.poi.ss.formula.FormulaParser.additiveExpression(FormulaParser.java:1999)\n    at org.apache.poi.ss.formula.FormulaParser.concatExpression(FormulaParser.java:1983)\n    at org.apache.poi.ss.formula.FormulaParser.comparisonExpression(FormulaParser.java:1940)\n    at org.apache.poi.ss.formula.FormulaParser.intersectionExpression(FormulaParser.java:1913)\n    at org.apache.poi.ss.formula.FormulaParser.unionExpression(FormulaParser.java:1894)\n    at org.apache.poi.ss.formula.FormulaParser.parse(FormulaParser.java:2041)\n    at org.apache.poi.ss.formula.FormulaParser.parse(FormulaParser.java:173)\n    at org.apache.poi.ss.formula.FormulaParser.parse(FormulaParser.java:193)\n    at org.apache.poi.hssf.model.HSSFFormulaParser.parse(HSSFFormulaParser.java:79)\n    at org.apache.poi.hssf.usermodel.HSSFCell.setCellFormulaImpl(HSSFCell.java:530)\n    at org.apache.poi.ss.usermodel.CellBase.setCellFormula(CellBase.java:124)\n    at com.foo.excell.HSSFReplace.replace(HSSFReplace.java:39)\n    at com.foo.excell.Change.run(Change.java:77)\n    at picocli.CommandLine.executeUserObject(CommandLine.java:2026)\n    at picocli.CommandLine.access$1500(CommandLine.java:148)\n    at \n\n</code></pre>\n<p>So I assumed that POI verifies the reference in order to make sure the operation doesn't result in a broken file.</p>\n<p>I also expected there to be a way to disable the check. So according to an article, I tried to call this upfront:</p>\n<pre><code> FormulaEvaluator evaluator = workbook.getCreationHelper().createFormulaEvaluator();\n evaluator.setIgnoreMissingWorkbooks(true);\n</code></pre>\n<p>Which had no effect.</p>\n<p>My problem only appears for HSSF(.xls) Workbooks. With XSSF, all works fine by directly manipulating the <code>ExternalLinksTable</code>.</p>\n<p>So, how can I stop Apache POI from checking for existing external Workbooks or what are alternative approaches to my problem?</p>\n"},{"tags":["java","groovy","websocket","vert.x"],"owner":{"account_id":1857554,"reputation":20310,"user_id":1682820,"accept_rate":70,"display_name":"injecteer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693390493,"creation_date":1693390493,"question_id":77007060,"body_markdown":"After downgrading Vertx from `4.x` to `3.9.16` the code:\r\n\r\n```\r\nclass AvaHostVerticle extends AbstractVerticle {\r\n  @Override\r\n  void start( Promise startPromise ) throws Exception {\r\n    Router router = Router.router vertx\r\n    new WebsocketHandler( router )\r\n    vertx.createHttpServer().requestHandler router listen 7777, startPromise\r\n  }\r\n}\r\n\r\nclass WebsocketHandler implements Handler&lt;AsyncResult&lt;ServerWebSocket&gt;&gt; {\r\n  WebsocketHandler( Router router ) {\r\n    router.route &#39;/ws&#39; handler{ it.request().toWebSocket this }\r\n  }\r\n  \r\n  @Override\r\n  void handle( AsyncResult&lt;ServerWebSocket&gt; swsRes ) {\r\n    if( swsRes.failed() ){\r\n      log.error &#39;onWSConnect failed&#39;, swsRes.cause()\r\n      return\r\n    }\r\n\r\n    ServerWebSocket sws = swsRes.result()\r\n    // blah...\r\n    sws.accept()\r\n  }\r\n}\r\n```\r\n\r\nstopped working, throwing the exception:\r\n```\r\n11:55:06.716 [vert.x-eventloop-thread-0] ERROR my.controller.WebsocketHandler - onWSConnect failed\r\njava.lang.IllegalStateException: null\r\n\tat io.vertx.core.http.impl.Http1xServerConnection.createWebSocket(Http1xServerConnection.java:275)\r\n\tat io.vertx.core.http.impl.HttpServerRequestImpl.upgrade(HttpServerRequestImpl.java:420)\r\n\tat io.vertx.ext.web.impl.HttpServerRequestWrapper.upgrade(HttpServerRequestWrapper.java:313)\r\n\tat io.vertx.core.http.HttpServerRequest.toWebSocket(HttpServerRequest.java:386)\r\n\tat io.vertx.core.http.HttpServerRequest$toWebSocket.call(Unknown Source)\r\n\tat org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)\r\n\tat org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)\r\n\tat org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)\r\n\tat my.controller.WebsocketHandler$_closure1.doCall(WebsocketHandler.groovy:24)\r\n```\r\n\r\nThis is the code in Http1xServerConnection where the ISE is thrown:\r\n```\r\n  ServerWebSocketImpl createWebSocket(HttpServerRequestImpl request) {\r\n    if (ws != null) {\r\n      return ws;\r\n    }\r\n    if (!(request.nettyRequest() instanceof FullHttpRequest)) {\r\n      throw new IllegalStateException();\r\n    }\r\n```\r\n\r\nThe option with \r\n```\r\nvertx.createHttpServer().webSocketHandler wsHandler listen 8888\r\n```\r\nworks just fine.\r\n\r\nIs this a bug, or am I missing something?","title":"Vertx: toWebSocket() with router fails in 3.9.16","body":"<p>After downgrading Vertx from <code>4.x</code> to <code>3.9.16</code> the code:</p>\n<pre><code>class AvaHostVerticle extends AbstractVerticle {\n  @Override\n  void start( Promise startPromise ) throws Exception {\n    Router router = Router.router vertx\n    new WebsocketHandler( router )\n    vertx.createHttpServer().requestHandler router listen 7777, startPromise\n  }\n}\n\nclass WebsocketHandler implements Handler&lt;AsyncResult&lt;ServerWebSocket&gt;&gt; {\n  WebsocketHandler( Router router ) {\n    router.route '/ws' handler{ it.request().toWebSocket this }\n  }\n  \n  @Override\n  void handle( AsyncResult&lt;ServerWebSocket&gt; swsRes ) {\n    if( swsRes.failed() ){\n      log.error 'onWSConnect failed', swsRes.cause()\n      return\n    }\n\n    ServerWebSocket sws = swsRes.result()\n    // blah...\n    sws.accept()\n  }\n}\n</code></pre>\n<p>stopped working, throwing the exception:</p>\n<pre><code>11:55:06.716 [vert.x-eventloop-thread-0] ERROR my.controller.WebsocketHandler - onWSConnect failed\njava.lang.IllegalStateException: null\n    at io.vertx.core.http.impl.Http1xServerConnection.createWebSocket(Http1xServerConnection.java:275)\n    at io.vertx.core.http.impl.HttpServerRequestImpl.upgrade(HttpServerRequestImpl.java:420)\n    at io.vertx.ext.web.impl.HttpServerRequestWrapper.upgrade(HttpServerRequestWrapper.java:313)\n    at io.vertx.core.http.HttpServerRequest.toWebSocket(HttpServerRequest.java:386)\n    at io.vertx.core.http.HttpServerRequest$toWebSocket.call(Unknown Source)\n    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)\n    at my.controller.WebsocketHandler$_closure1.doCall(WebsocketHandler.groovy:24)\n</code></pre>\n<p>This is the code in Http1xServerConnection where the ISE is thrown:</p>\n<pre><code>  ServerWebSocketImpl createWebSocket(HttpServerRequestImpl request) {\n    if (ws != null) {\n      return ws;\n    }\n    if (!(request.nettyRequest() instanceof FullHttpRequest)) {\n      throw new IllegalStateException();\n    }\n</code></pre>\n<p>The option with</p>\n<pre><code>vertx.createHttpServer().webSocketHandler wsHandler listen 8888\n</code></pre>\n<p>works just fine.</p>\n<p>Is this a bug, or am I missing something?</p>\n"},{"tags":["java","intellij-idea","plugins","intellij-plugin"],"answers":[{"tags":[],"owner":{"account_id":28492010,"reputation":179,"user_id":21804501,"display_name":"Dino Letic"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693390280,"creation_date":1693390280,"answer_id":77007031,"question_id":76993698,"body_markdown":"Branch name is not stored there. \r\nYou take the files from the `CheckinProjectPanel`, find GitRepository for them (GitRepositoryManager), and call getCurrentBranch on it.","title":"find branch name inside CheckinHandlerFactory in Idea plugin","body":"<p>Branch name is not stored there.\nYou take the files from the <code>CheckinProjectPanel</code>, find GitRepository for them (GitRepositoryManager), and call getCurrentBranch on it.</p>\n"}],"owner":{"account_id":29315284,"reputation":1,"user_id":22460186,"display_name":"Vladimir Sabo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693390280,"creation_date":1693232898,"question_id":76993698,"body_markdown":"I&#39;m trying to write a plugin for an idea that will check the commit for the established writing rules. In particular, it is necessary to compare the commit message with the branch to which it will be sent. I tried to inherit from the CheckinHandlerFactory, the commit text is present in the CommitContext, but I don&#39;t understand how to get the branch name.\r\n\r\nhere is my code: \r\n\r\n```\r\npublic class BeforeCommitPlugin extends CheckinHandlerFactory {\r\n\r\n    @Override\r\n    public @NotNull CheckinHandler createHandler(@NotNull CheckinProjectPanel panel,\r\n                                                 @NotNull CommitContext commitContext) {\r\n        return new CheckinHandler() {\r\n            @Override\r\n            public @Nullable RefreshableOnComponent getBeforeCheckinConfigurationPanel() {\r\n                return super.getBeforeCheckinConfigurationPanel();\r\n            }\r\n\r\n            @Override\r\n            public @Nullable UnnamedConfigurable getBeforeCheckinSettings() {\r\n                return super.getBeforeCheckinSettings();\r\n            }\r\n\r\n            @Override\r\n            public @Nullable RefreshableOnComponent getAfterCheckinConfigurationPanel(Disposable parentDisposable) {\r\n                return super.getAfterCheckinConfigurationPanel(parentDisposable);\r\n            }\r\n\r\n            @Override\r\n            public ReturnResult beforeCheckin(@Nullable CommitExecutor executor, PairConsumer&lt;Object, Object&gt; additionalDataConsumer) {\r\n                return super.beforeCheckin(executor, additionalDataConsumer);\r\n            }\r\n\r\n            @Override\r\n            public ReturnResult beforeCheckin() {\r\n                CommitMessageStyleChecker checker = new CommitMessageStyleChecker(panel.getCommitMessage());\r\n                if (!checker.getCommitErrors().isEmpty()){\r\n                    return ReturnResult.CANCEL;\r\n                } else {\r\n                    return ReturnResult.COMMIT;\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void checkinSuccessful() {\r\n                super.checkinSuccessful();\r\n            }\r\n\r\n            @Override\r\n            public void checkinFailed(List&lt;VcsException&gt; exception) {\r\n                super.checkinFailed(exception);\r\n            }\r\n\r\n            @Override\r\n            public void includedChangesChanged() {\r\n                super.includedChangesChanged();\r\n            }\r\n\r\n            @Override\r\n            public boolean acceptExecutor(CommitExecutor executor) {\r\n                return super.acceptExecutor(executor);\r\n            }\r\n        };\r\n    }\r\n}\r\n```\r\n\r\n\r\nI tried to find the right field inside the panel, but failed","title":"find branch name inside CheckinHandlerFactory in Idea plugin","body":"<p>I'm trying to write a plugin for an idea that will check the commit for the established writing rules. In particular, it is necessary to compare the commit message with the branch to which it will be sent. I tried to inherit from the CheckinHandlerFactory, the commit text is present in the CommitContext, but I don't understand how to get the branch name.</p>\n<p>here is my code:</p>\n<pre><code>public class BeforeCommitPlugin extends CheckinHandlerFactory {\n\n    @Override\n    public @NotNull CheckinHandler createHandler(@NotNull CheckinProjectPanel panel,\n                                                 @NotNull CommitContext commitContext) {\n        return new CheckinHandler() {\n            @Override\n            public @Nullable RefreshableOnComponent getBeforeCheckinConfigurationPanel() {\n                return super.getBeforeCheckinConfigurationPanel();\n            }\n\n            @Override\n            public @Nullable UnnamedConfigurable getBeforeCheckinSettings() {\n                return super.getBeforeCheckinSettings();\n            }\n\n            @Override\n            public @Nullable RefreshableOnComponent getAfterCheckinConfigurationPanel(Disposable parentDisposable) {\n                return super.getAfterCheckinConfigurationPanel(parentDisposable);\n            }\n\n            @Override\n            public ReturnResult beforeCheckin(@Nullable CommitExecutor executor, PairConsumer&lt;Object, Object&gt; additionalDataConsumer) {\n                return super.beforeCheckin(executor, additionalDataConsumer);\n            }\n\n            @Override\n            public ReturnResult beforeCheckin() {\n                CommitMessageStyleChecker checker = new CommitMessageStyleChecker(panel.getCommitMessage());\n                if (!checker.getCommitErrors().isEmpty()){\n                    return ReturnResult.CANCEL;\n                } else {\n                    return ReturnResult.COMMIT;\n                }\n            }\n\n            @Override\n            public void checkinSuccessful() {\n                super.checkinSuccessful();\n            }\n\n            @Override\n            public void checkinFailed(List&lt;VcsException&gt; exception) {\n                super.checkinFailed(exception);\n            }\n\n            @Override\n            public void includedChangesChanged() {\n                super.includedChangesChanged();\n            }\n\n            @Override\n            public boolean acceptExecutor(CommitExecutor executor) {\n                return super.acceptExecutor(executor);\n            }\n        };\n    }\n}\n</code></pre>\n<p>I tried to find the right field inside the panel, but failed</p>\n"},{"tags":["java","regex","java-8"],"comments":[{"owner":{"account_id":1852014,"reputation":24139,"user_id":1678362,"display_name":"Aaron"},"score":0,"creation_date":1693388169,"post_id":77006727,"comment_id":135752920,"body_markdown":"the problem isn&#39;t with the regex but with the replacment. Just use two distinct regexs and that&#39;ll solve your problem","body":"the problem isn&#39;t with the regex but with the replacment. Just use two distinct regexs and that&#39;ll solve your problem"},{"owner":{"account_id":6286080,"reputation":345,"user_id":4885272,"accept_rate":50,"display_name":"Evgenia"},"score":0,"creation_date":1693388424,"post_id":77006727,"comment_id":135752984,"body_markdown":"@Aaron, but I don&#39;t understand how to avoide replacement of bind parameters in quotes if it will be distinct regexs.","body":"@Aaron, but I don&#39;t understand how to avoide replacement of bind parameters in quotes if it will be distinct regexs."}],"answers":[{"tags":[],"owner":{"account_id":4739783,"reputation":612574,"user_id":3832970,"display_name":"Wiktor Stribiżew"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1693389831,"creation_date":1693388652,"answer_id":77006823,"question_id":77006727,"body_markdown":"You can use a variable replacement with [*`public String replaceAll​(Function&lt;MatchResult,String&gt; replacer)`*](https://docs.oracle.com/javase/9/docs/api/java/util/regex/Matcher.html#replaceAll-java.util.function.Function-):\r\n```java\r\npublic static final Pattern regex = Pattern.compile(&quot;(&#39;[^\\\\n&#39;]*&#39;)|:\\\\s*\\\\w+&quot;);\r\npublic static String replaceBindVars(String value) {\r\n    return regex.matcher(value).replaceAll(m -&gt; m.group(1) != null ? m.group(1) : &quot;?&quot;); \r\n}\r\n```\r\nSee [this Java demo][1].\r\n\r\nIf Group 1 matches, Group 1 value is output (no change is made), else, the match is replaced with a `?` char (this way, there is no need in Group 2).\r\n\r\nIn Java 8 and older versions you can use\r\n```java\r\npublic static final Pattern regex = Pattern.compile(&quot;(&#39;[^\\\\n&#39;]*&#39;)|:\\\\s*\\\\w+&quot;);\r\npublic static String replaceBindVars(String value) {\r\n\tStringBuffer result = new StringBuffer();\r\n\tMatcher m = regex.matcher(value);\r\n\twhile (m.find()) {\r\n   \t\tif (m.group(1) != null) {\r\n   \t\t\tm.appendReplacement(result, Matcher.quoteReplacement(m.group(1)));\r\n   \t\t} else {\r\n   \t\t\tm.appendReplacement(result, &quot;?&quot;);\r\n   \t\t}\r\n\t}\r\n\tm.appendTail(result);\r\n    return result.toString(); \r\n}\r\n```\r\n\r\n  [1]: https://ideone.com/Y0Kj8A","title":"Regex to replace bind parameters that NOT in quotes","body":"<p>You can use a variable replacement with <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/regex/Matcher.html#replaceAll-java.util.function.Function-\" rel=\"nofollow noreferrer\"><em><code>public String replaceAll​(Function&lt;MatchResult,String&gt; replacer)</code></em></a>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static final Pattern regex = Pattern.compile(&quot;('[^\\\\n']*')|:\\\\s*\\\\w+&quot;);\npublic static String replaceBindVars(String value) {\n    return regex.matcher(value).replaceAll(m -&gt; m.group(1) != null ? m.group(1) : &quot;?&quot;); \n}\n</code></pre>\n<p>See <a href=\"https://ideone.com/Y0Kj8A\" rel=\"nofollow noreferrer\">this Java demo</a>.</p>\n<p>If Group 1 matches, Group 1 value is output (no change is made), else, the match is replaced with a <code>?</code> char (this way, there is no need in Group 2).</p>\n<p>In Java 8 and older versions you can use</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static final Pattern regex = Pattern.compile(&quot;('[^\\\\n']*')|:\\\\s*\\\\w+&quot;);\npublic static String replaceBindVars(String value) {\n    StringBuffer result = new StringBuffer();\n    Matcher m = regex.matcher(value);\n    while (m.find()) {\n        if (m.group(1) != null) {\n            m.appendReplacement(result, Matcher.quoteReplacement(m.group(1)));\n        } else {\n            m.appendReplacement(result, &quot;?&quot;);\n        }\n    }\n    m.appendTail(result);\n    return result.toString(); \n}\n</code></pre>\n"}],"owner":{"account_id":6286080,"reputation":345,"user_id":4885272,"accept_rate":50,"display_name":"Evgenia"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77006823,"answer_count":1,"score":1,"last_activity_date":1693389837,"creation_date":1693387988,"question_id":77006727,"body_markdown":"I have a regex that detects text in quotes (first group) and bind parameters (second group).\r\nGroup for text in quotes is required to avoid replacing bind parameters in it.\r\n\r\n    (&#39;[^\\\\n&#39;]*&#39;)|(:\\\\s*\\\\w+)\r\nI tried to keep first group and replace second one with &quot;?&quot;:\r\n\r\n    public static String replaceBindVars(String value) {\r\n    \treturn value.replaceAll(&quot;(&#39;[^\\\\n&#39;]*&#39;)|(:\\\\s*\\\\w+)&quot;, &quot;$1?&quot;); \r\n    }\r\nThe problem is that it adds &quot;?&quot; after first group.\r\n\r\nCode to test, the result should be true in all cases:\r\n\r\n    public static void main(String[] args) {\t\r\n    \tSystem.out.println(&quot;WHERE id = ? and productcode = ?&quot;\r\n    \t\t\t.equals(replaceBindVars(&quot;WHERE id = :id and productcode = :product_code&quot;)));\r\n    \t\r\n    \tSystem.out.println(&quot;WHERE id = ? and productcode = &#39;1:2 :3&#39;&quot;\r\n    \t\t\t.equals(replaceBindVars(&quot;WHERE id = :id and productcode = &#39;1:2 :3&#39;&quot;)));\r\n    \t\r\n    \tSystem.out.println(&quot;WHERE id = ? and code LIKE &#39;: some-string with :colon and :bind_parameters&#39; OR product_name LIKE ?&#39;&quot;.\r\n    \t\t\tequals(replaceBindVars(&quot;WHERE id = :id and code LIKE &#39;: some-string with :colon and :bind_parameters&#39; OR product_name LIKE :product_name&#39;&quot;)));\r\n    \t\r\n    \tSystem.out.println(&quot;SELECT ? and ? WHERE id = 2 and product_code = 3&quot;.\r\n    \t\t\tequals(replaceBindVars(&quot;SELECT :id and :product_code WHERE id = 2 and product_code = 3&quot;)));\r\n    \t\r\n    }\r\n\r\nIs there any way to modify my current regex to do not add &quot;?&quot; after bind parameters in quotes? Preferred Java version is 8.\r\n\r\nI saw [this](https://stackoverflow.com/q/64083453/4885272) similar question, but it doesn&#39;t help.","title":"Regex to replace bind parameters that NOT in quotes","body":"<p>I have a regex that detects text in quotes (first group) and bind parameters (second group).\nGroup for text in quotes is required to avoid replacing bind parameters in it.</p>\n<pre><code>('[^\\\\n']*')|(:\\\\s*\\\\w+)\n</code></pre>\n<p>I tried to keep first group and replace second one with &quot;?&quot;:</p>\n<pre><code>public static String replaceBindVars(String value) {\n    return value.replaceAll(&quot;('[^\\\\n']*')|(:\\\\s*\\\\w+)&quot;, &quot;$1?&quot;); \n}\n</code></pre>\n<p>The problem is that it adds &quot;?&quot; after first group.</p>\n<p>Code to test, the result should be true in all cases:</p>\n<pre><code>public static void main(String[] args) {    \n    System.out.println(&quot;WHERE id = ? and productcode = ?&quot;\n            .equals(replaceBindVars(&quot;WHERE id = :id and productcode = :product_code&quot;)));\n    \n    System.out.println(&quot;WHERE id = ? and productcode = '1:2 :3'&quot;\n            .equals(replaceBindVars(&quot;WHERE id = :id and productcode = '1:2 :3'&quot;)));\n    \n    System.out.println(&quot;WHERE id = ? and code LIKE ': some-string with :colon and :bind_parameters' OR product_name LIKE ?'&quot;.\n            equals(replaceBindVars(&quot;WHERE id = :id and code LIKE ': some-string with :colon and :bind_parameters' OR product_name LIKE :product_name'&quot;)));\n    \n    System.out.println(&quot;SELECT ? and ? WHERE id = 2 and product_code = 3&quot;.\n            equals(replaceBindVars(&quot;SELECT :id and :product_code WHERE id = 2 and product_code = 3&quot;)));\n    \n}\n</code></pre>\n<p>Is there any way to modify my current regex to do not add &quot;?&quot; after bind parameters in quotes? Preferred Java version is 8.</p>\n<p>I saw <a href=\"https://stackoverflow.com/q/64083453/4885272\">this</a> similar question, but it doesn't help.</p>\n"},{"tags":["java","spring","hibernate"],"answers":[{"tags":[],"owner":{"account_id":4199643,"reputation":2357,"user_id":3440100,"display_name":"alfcope"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1398554756,"creation_date":1398554756,"answer_id":23317608,"question_id":23314894,"body_markdown":"What does it mean &quot;neither worked&quot;? What&#39;s your problem?\r\n\r\nI think your problem is @EnableTransactionManagement and &lt;tx:annotation-driven/&gt; only looks for @Transactional on beans in the same application context they are defined in. This means that, if you put annotation driven configuration in a WebApplicationContext for a DispatcherServlet, it only checks for @Transactional beans in your controllers, and not your services.\r\n\r\nTry, in your application-context.xml\r\n\r\n    &lt;context:component-scan base-package=&quot;path.to.your.models, path.to.your.daos, path.to.your.services&quot;/&gt;\r\n\r\nIn your servlet-context.xml\r\n\r\n    &lt;context:component-scan base-package=&quot;com.springhibernatejpatest.controllers&quot;/&gt;\r\n\r\n\r\nAnother thread: [Spring @transactional not working][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/10019426/spring-transactional-not-working","title":"org.hibernate.HibernateException: No Session found for current thread 5","body":"<p>What does it mean \"neither worked\"? What's your problem?</p>\n\n<p>I think your problem is @EnableTransactionManagement and  only looks for @Transactional on beans in the same application context they are defined in. This means that, if you put annotation driven configuration in a WebApplicationContext for a DispatcherServlet, it only checks for @Transactional beans in your controllers, and not your services.</p>\n\n<p>Try, in your application-context.xml</p>\n\n<pre><code>&lt;context:component-scan base-package=\"path.to.your.models, path.to.your.daos, path.to.your.services\"/&gt;\n</code></pre>\n\n<p>In your servlet-context.xml</p>\n\n<pre><code>&lt;context:component-scan base-package=\"com.springhibernatejpatest.controllers\"/&gt;\n</code></pre>\n\n<p>Another thread: <a href=\"https://stackoverflow.com/questions/10019426/spring-transactional-not-working\">Spring @transactional not working</a></p>\n"},{"tags":[],"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1554788662,"creation_date":1554788662,"answer_id":55585836,"question_id":23314894,"body_markdown":"Your &quot;fix&quot; is actually a dangerous one, as you are opening a new session outside the scope of Springs transaction management. This will eventually leave to connection leaks, memory issues and stability issues. \r\n\r\nThe real problem is that you have `&lt;tx:annotation-driven /&gt;` in your root context and you do component scanning the context loaded by the `DispatcherServlet`. Move the `&lt;tx:annotation-driven /&gt;` to the context loaded by the `DispatcherServlet` to really fix your problem. \r\n\r\nOr split component-scanning into 2, the root context should scan everything but your controller\r\n\r\n```\r\n&lt;context:component-scan base-package=&quot;com.joe.recipes&quot;&gt;\r\n  &lt;context:exclude-filter type=&quot;annotation&quot; expression=&quot;org.springframework.stereotype.Controller&quot;/&gt; \r\n&lt;/context:component-scan&gt;\r\n```\r\n\r\n, and the dispatcher servlet one should detect only web related beans. \r\n\r\n```\r\n&lt;context:component-scan base-package=&quot;com.joe.recipes&quot; use-default-filters=&quot;false&quot;&gt;\r\n  &lt;context:include-filter type=&quot;annotation&quot; expression=&quot;org.springframework.stereotype.Controller&quot;/&gt; \r\n&lt;/context:component-scan&gt;\r\n```\r\n\r\nNow you can leave the `&lt;tx:annotation-driven /&gt;` where it is.\r\n","title":"org.hibernate.HibernateException: No Session found for current thread 5","body":"<p>Your \"fix\" is actually a dangerous one, as you are opening a new session outside the scope of Springs transaction management. This will eventually leave to connection leaks, memory issues and stability issues. </p>\n\n<p>The real problem is that you have <code>&lt;tx:annotation-driven /&gt;</code> in your root context and you do component scanning the context loaded by the <code>DispatcherServlet</code>. Move the <code>&lt;tx:annotation-driven /&gt;</code> to the context loaded by the <code>DispatcherServlet</code> to really fix your problem. </p>\n\n<p>Or split component-scanning into 2, the root context should scan everything but your controller</p>\n\n<pre><code>&lt;context:component-scan base-package=\"com.joe.recipes\"&gt;\n  &lt;context:exclude-filter type=\"annotation\" expression=\"org.springframework.stereotype.Controller\"/&gt; \n&lt;/context:component-scan&gt;\n</code></pre>\n\n<p>, and the dispatcher servlet one should detect only web related beans. </p>\n\n<pre><code>&lt;context:component-scan base-package=\"com.joe.recipes\" use-default-filters=\"false\"&gt;\n  &lt;context:include-filter type=\"annotation\" expression=\"org.springframework.stereotype.Controller\"/&gt; \n&lt;/context:component-scan&gt;\n</code></pre>\n\n<p>Now you can leave the <code>&lt;tx:annotation-driven /&gt;</code> where it is.</p>\n"}],"owner":{"account_id":1800971,"reputation":149,"user_id":1639346,"accept_rate":29,"display_name":"javajoe316"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13756,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"answer_count":2,"score":3,"last_activity_date":1693389835,"creation_date":1398536738,"question_id":23314894,"body_markdown":"I know this problem is asked a lot but I am stuck. I am basing my project off of this tutorial: http://www.cavalr.com/blog/Spring_3_and_Annotation_Based_Hibernate_4_Example\r\n\r\nThis is my root-context.xml\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n           xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n           xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;\r\n           xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans\r\n        http://www.springframework.org/schema/beans/spring-beans.xsd\r\n        http://www.springframework.org/schema/tx \r\n        http://www.springframework.org/schema/tx/spring-tx.xsd&quot;&gt;\r\n    \r\n      &lt;bean id=&quot;dataSource&quot; class=&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot; destroy-method=&quot;close&quot;&gt;\r\n        &lt;property name=&quot;driverClass&quot; value=&quot;${jdbc.driver}&quot;/&gt;\r\n        &lt;property name=&quot;jdbcUrl&quot; value=&quot;${jdbc.url}&quot;/&gt;\r\n        &lt;property name=&quot;user&quot; value=&quot;${jdbc.username}&quot;/&gt;\r\n        &lt;property name=&quot;password&quot; value=&quot;${jdbc.password}&quot;/&gt;\r\n        &lt;property name=&quot;initialPoolSize&quot; value=&quot;1&quot; /&gt;\r\n        &lt;property name=&quot;minPoolSize&quot; value=&quot;1&quot; /&gt;\r\n        &lt;property name=&quot;maxPoolSize&quot; value=&quot;20&quot; /&gt;\r\n      &lt;/bean&gt;\r\n    \r\n      &lt;bean id=&quot;propertyConfigurer&quot;\r\n            class=&quot;org.springframework.beans.factory.config.PropertyPlaceholderConfigurer&quot;&gt;\r\n        &lt;property name=&quot;locations&quot;&gt;\r\n          &lt;list&gt;\r\n            &lt;value&gt;classpath:db.properties&lt;/value&gt;\r\n          &lt;/list&gt;\r\n        &lt;/property&gt;\r\n      &lt;/bean&gt;\r\n    \r\n      &lt;bean id=&quot;sessionFactory&quot; class=&quot;org.springframework.orm.hibernate4.LocalSessionFactoryBean&quot;&gt;\r\n        &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;/&gt;\r\n        &lt;property name=&quot;packagesToScan&quot; value=&quot;com.joe.recipes.data&quot; /&gt;\r\n        &lt;property name=&quot;hibernateProperties&quot;&gt;\r\n          &lt;props&gt;\r\n            &lt;prop key=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQL5InnoDBDialect&lt;/prop&gt;\r\n            &lt;prop key=&quot;hibernate.show_sql&quot;&gt;true&lt;/prop&gt;\r\n          &lt;/props&gt;\r\n    \r\n        &lt;/property&gt;\r\n      &lt;/bean&gt;\r\n    \r\n      &lt;!-- Enables the Hibernate @Transactional programming model --&gt;\r\n      &lt;tx:annotation-driven transaction-manager=&quot;transactionManager&quot;/&gt;\r\n    \r\n      &lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.orm.hibernate4.HibernateTransactionManager&quot;&gt;\r\n        &lt;property name=&quot;sessionFactory&quot; ref=&quot;sessionFactory&quot;/&gt;\r\n      &lt;/bean&gt;\r\n    &lt;/beans&gt;\r\n\r\nThis is my servlet-context.xml\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;beans:beans xmlns=&quot;http://www.springframework.org/schema/mvc&quot;\r\n                 xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n                 xmlns:beans=&quot;http://www.springframework.org/schema/beans&quot;\r\n                 xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n                 xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;\r\n                 xsi:schemaLocation=&quot;http://www.springframework.org/schema/mvc \r\n        http://www.springframework.org/schema/mvc/spring-mvc.xsd\r\n        http://www.springframework.org/schema/beans \r\n        http://www.springframework.org/schema/beans/spring-beans.xsd\r\n        http://www.springframework.org/schema/context   \r\n        http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;\r\n    \r\n      &lt;!-- DispatcherServlet Context: defines this servlet&#39;s request-processing infrastructure --&gt;\r\n      &lt;context:component-scan base-package=&quot;com.joe.recipes&quot; /&gt;\r\n      &lt;!-- Enables the Spring MVC @Controller programming model --&gt;\r\n      &lt;mvc:annotation-driven /&gt;\r\n    \r\n      &lt;!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory --&gt;\r\n      &lt;resources mapping=&quot;/resources/**&quot; location=&quot;/resources/&quot; /&gt;\r\n    \r\n      &lt;!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory --&gt;\r\n      &lt;beans:bean class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;\r\n        &lt;beans:property name=&quot;prefix&quot; value=&quot;/WEB-INF/views/&quot; /&gt;\r\n        &lt;beans:property name=&quot;suffix&quot; value=&quot;.jsp&quot; /&gt;\r\n      &lt;/beans:bean&gt;\r\n    \r\n    &lt;/beans:beans&gt;\r\n\r\nThis is my AbstractDaoImpl\r\n\r\n    public abstract class AbstractDaoImpl&lt;E, I extends Serializable&gt; implements AbstractDao&lt;E,I&gt; {\r\n    \r\n        private Class&lt;E&gt; entityClass;\r\n    \r\n        protected AbstractDaoImpl(Class&lt;E&gt; entityClass) {\r\n            this.entityClass = entityClass;\r\n        }\r\n    \r\n        @Autowired\r\n        private SessionFactory sessionFactory;\r\n    \r\n        public Session getCurrentSession() {\r\n            return sessionFactory.getCurrentSession();\r\n        }\r\n    \r\n        @SuppressWarnings(&quot;unchecked&quot;)\r\n        @Override\r\n        public E findById(I id) {\r\n            return (E) getCurrentSession().get(entityClass, id);\r\n        }\r\n    \r\n        @Override\r\n        public void saveOrUpdate(E e) {\r\n            getCurrentSession().saveOrUpdate(e);\r\n        }\r\n    \r\n        @Override\r\n        public void delete(E e) {\r\n            getCurrentSession().delete(e);\r\n        }\r\n    \r\n        @Override\r\n        public List findByCriteria(Criterion criterion) {\r\n            Criteria criteria = getCurrentSession().createCriteria(entityClass);\r\n            criteria.add(criterion);\r\n            return criteria.list();\r\n        }\r\n    }\r\n\r\nThis is my `RecipeDaoImpl` class\r\n\r\n    @Repository\r\n    public class RecipeDaoImpl extends AbstractDaoImpl&lt;Recipe, String&gt; implements RecipeDao {\r\n    \r\n        protected RecipeDaoImpl() {\r\n            super(Recipe.class);\r\n        }\r\n    \r\n        @Override\r\n        public boolean saveRecipe(Recipe r) {\r\n            return saveRecipe(r);\r\n        }\r\n    \r\n        @Override\r\n        public Recipe getRecipe(String recipeId) {\r\n            return findById(recipeId);\r\n        }\r\n    \r\n        @SuppressWarnings(&quot;unchecked&quot;)\r\n        @Override\r\n        public List&lt;Recipe&gt; findRecipes(String keyword) {\r\n            return findByCriteria( Restrictions.and( Restrictions.like(&quot;name&quot;, keyword, MatchMode.ANYWHERE),\r\n                Restrictions.like(&quot;keywords&quot;, keyword, MatchMode.ANYWHERE) ) );\r\n        }\r\n    }\r\n\r\nThis is my `RecipeServiceImpl` class\r\n\r\n    @Service(&quot;recipeService&quot;)\r\n    @Transactional(readOnly = true)\r\n    public class RecipeServiceImpl implements RecipeService {\r\n        @Autowired\r\n        private RecipeDao recipeDao;\r\n    \r\n        @Override\r\n        @Transactional(readOnly = false)\r\n        public boolean saveRecipe(Recipe r) {\r\n            return recipeDao.saveRecipe(r);\r\n        }\r\n    \r\n        @Override\r\n        public Recipe getRecipe(String recipeId) {\r\n            return recipeDao.getRecipe(recipeId);\r\n        }\r\n    \r\n        @Override\r\n        public List&lt;Recipe&gt; findRecipes(String keyword) {\r\n            return recipeDao.findRecipes(keyword);\r\n        }\r\n    }\r\n\r\nThis is my `RecipeController`\r\n\r\n    /**\r\n     * Handles requests for the application home page.\r\n     */\r\n    @Controller\r\n    public class RecipeController {\r\n    \r\n        private static final Logger logger = LoggerFactory.getLogger(RecipeController.class);\r\n    \r\n        @Autowired\r\n        private RecipeService recipeService;\r\n    \r\n        /**\r\n         * Adds recipes to the DB\r\n         */\r\n        @RequestMapping(value = &quot;/add&quot;, method = RequestMethod.GET)\r\n        public String add(Locale locale, Model model) {\r\n            return &quot;add&quot;;\r\n        }\r\n    \r\n        /**\r\n         * Searches for recipes\r\n         */\r\n        @RequestMapping(value = &quot;/search&quot;, method = RequestMethod.POST)\r\n        public String search(@RequestParam(value=&quot;keyword&quot;, required=true) String keyword, Model model) {\r\n    \r\n            List&lt;Recipe&gt; recipes = recipeService.findRecipes(keyword);\r\n            System.out.println( &quot;Results:&quot;+ recipes.size() );\r\n            return &quot;results&quot;;\r\n        }\r\n    \r\n        /**\r\n         * Logs in the user\r\n         */\r\n        @RequestMapping(value = &quot;/login&quot;, method = RequestMethod.POST)\r\n        public String login(Locale locale, Model model) {\r\n    \r\n            return &quot;login&quot;;\r\n        }\r\n    }\r\n\r\nI&#39;ve tried putting the `@Transactional` on the `RecipeDaoImpl` class and the `AbstractDaoImpl` class and neither worked.\r\n\r\nEDIT:\r\nI fixed this by catching the exception and opening a new one:\r\n\r\n    public Session getCurrentSession() {\r\n    \tSession session = null;\r\n    \ttry { \r\n    \t\tsession = sessionFactory.getCurrentSession();\r\n    \t} catch ( HibernateException he ) {\r\n    \t\tsession = sessionFactory.openSession();\r\n    \t}\r\n    \treturn session;\r\n    }","title":"org.hibernate.HibernateException: No Session found for current thread 5","body":"<p>I know this problem is asked a lot but I am stuck. I am basing my project off of this tutorial: <a href=\"http://www.cavalr.com/blog/Spring_3_and_Annotation_Based_Hibernate_4_Example\" rel=\"nofollow\">http://www.cavalr.com/blog/Spring_3_and_Annotation_Based_Hibernate_4_Example</a></p>\n\n<p>This is my root-context.xml</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xmlns:tx=\"http://www.springframework.org/schema/tx\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n    http://www.springframework.org/schema/beans/spring-beans.xsd\n    http://www.springframework.org/schema/tx \n    http://www.springframework.org/schema/tx/spring-tx.xsd\"&gt;\n\n  &lt;bean id=\"dataSource\" class=\"com.mchange.v2.c3p0.ComboPooledDataSource\" destroy-method=\"close\"&gt;\n    &lt;property name=\"driverClass\" value=\"${jdbc.driver}\"/&gt;\n    &lt;property name=\"jdbcUrl\" value=\"${jdbc.url}\"/&gt;\n    &lt;property name=\"user\" value=\"${jdbc.username}\"/&gt;\n    &lt;property name=\"password\" value=\"${jdbc.password}\"/&gt;\n    &lt;property name=\"initialPoolSize\" value=\"1\" /&gt;\n    &lt;property name=\"minPoolSize\" value=\"1\" /&gt;\n    &lt;property name=\"maxPoolSize\" value=\"20\" /&gt;\n  &lt;/bean&gt;\n\n  &lt;bean id=\"propertyConfigurer\"\n        class=\"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer\"&gt;\n    &lt;property name=\"locations\"&gt;\n      &lt;list&gt;\n        &lt;value&gt;classpath:db.properties&lt;/value&gt;\n      &lt;/list&gt;\n    &lt;/property&gt;\n  &lt;/bean&gt;\n\n  &lt;bean id=\"sessionFactory\" class=\"org.springframework.orm.hibernate4.LocalSessionFactoryBean\"&gt;\n    &lt;property name=\"dataSource\" ref=\"dataSource\"/&gt;\n    &lt;property name=\"packagesToScan\" value=\"com.joe.recipes.data\" /&gt;\n    &lt;property name=\"hibernateProperties\"&gt;\n      &lt;props&gt;\n        &lt;prop key=\"hibernate.dialect\"&gt;org.hibernate.dialect.MySQL5InnoDBDialect&lt;/prop&gt;\n        &lt;prop key=\"hibernate.show_sql\"&gt;true&lt;/prop&gt;\n      &lt;/props&gt;\n\n    &lt;/property&gt;\n  &lt;/bean&gt;\n\n  &lt;!-- Enables the Hibernate @Transactional programming model --&gt;\n  &lt;tx:annotation-driven transaction-manager=\"transactionManager\"/&gt;\n\n  &lt;bean id=\"transactionManager\" class=\"org.springframework.orm.hibernate4.HibernateTransactionManager\"&gt;\n    &lt;property name=\"sessionFactory\" ref=\"sessionFactory\"/&gt;\n  &lt;/bean&gt;\n&lt;/beans&gt;\n</code></pre>\n\n<p>This is my servlet-context.xml</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans:beans xmlns=\"http://www.springframework.org/schema/mvc\"\n             xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n             xmlns:beans=\"http://www.springframework.org/schema/beans\"\n             xmlns:context=\"http://www.springframework.org/schema/context\"\n             xmlns:mvc=\"http://www.springframework.org/schema/mvc\"\n             xsi:schemaLocation=\"http://www.springframework.org/schema/mvc \n    http://www.springframework.org/schema/mvc/spring-mvc.xsd\n    http://www.springframework.org/schema/beans \n    http://www.springframework.org/schema/beans/spring-beans.xsd\n    http://www.springframework.org/schema/context   \n    http://www.springframework.org/schema/context/spring-context.xsd\"&gt;\n\n  &lt;!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure --&gt;\n  &lt;context:component-scan base-package=\"com.joe.recipes\" /&gt;\n  &lt;!-- Enables the Spring MVC @Controller programming model --&gt;\n  &lt;mvc:annotation-driven /&gt;\n\n  &lt;!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory --&gt;\n  &lt;resources mapping=\"/resources/**\" location=\"/resources/\" /&gt;\n\n  &lt;!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory --&gt;\n  &lt;beans:bean class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\"&gt;\n    &lt;beans:property name=\"prefix\" value=\"/WEB-INF/views/\" /&gt;\n    &lt;beans:property name=\"suffix\" value=\".jsp\" /&gt;\n  &lt;/beans:bean&gt;\n\n&lt;/beans:beans&gt;\n</code></pre>\n\n<p>This is my AbstractDaoImpl</p>\n\n<pre><code>public abstract class AbstractDaoImpl&lt;E, I extends Serializable&gt; implements AbstractDao&lt;E,I&gt; {\n\n    private Class&lt;E&gt; entityClass;\n\n    protected AbstractDaoImpl(Class&lt;E&gt; entityClass) {\n        this.entityClass = entityClass;\n    }\n\n    @Autowired\n    private SessionFactory sessionFactory;\n\n    public Session getCurrentSession() {\n        return sessionFactory.getCurrentSession();\n    }\n\n    @SuppressWarnings(\"unchecked\")\n    @Override\n    public E findById(I id) {\n        return (E) getCurrentSession().get(entityClass, id);\n    }\n\n    @Override\n    public void saveOrUpdate(E e) {\n        getCurrentSession().saveOrUpdate(e);\n    }\n\n    @Override\n    public void delete(E e) {\n        getCurrentSession().delete(e);\n    }\n\n    @Override\n    public List findByCriteria(Criterion criterion) {\n        Criteria criteria = getCurrentSession().createCriteria(entityClass);\n        criteria.add(criterion);\n        return criteria.list();\n    }\n}\n</code></pre>\n\n<p>This is my <code>RecipeDaoImpl</code> class</p>\n\n<pre><code>@Repository\npublic class RecipeDaoImpl extends AbstractDaoImpl&lt;Recipe, String&gt; implements RecipeDao {\n\n    protected RecipeDaoImpl() {\n        super(Recipe.class);\n    }\n\n    @Override\n    public boolean saveRecipe(Recipe r) {\n        return saveRecipe(r);\n    }\n\n    @Override\n    public Recipe getRecipe(String recipeId) {\n        return findById(recipeId);\n    }\n\n    @SuppressWarnings(\"unchecked\")\n    @Override\n    public List&lt;Recipe&gt; findRecipes(String keyword) {\n        return findByCriteria( Restrictions.and( Restrictions.like(\"name\", keyword, MatchMode.ANYWHERE),\n            Restrictions.like(\"keywords\", keyword, MatchMode.ANYWHERE) ) );\n    }\n}\n</code></pre>\n\n<p>This is my <code>RecipeServiceImpl</code> class</p>\n\n<pre><code>@Service(\"recipeService\")\n@Transactional(readOnly = true)\npublic class RecipeServiceImpl implements RecipeService {\n    @Autowired\n    private RecipeDao recipeDao;\n\n    @Override\n    @Transactional(readOnly = false)\n    public boolean saveRecipe(Recipe r) {\n        return recipeDao.saveRecipe(r);\n    }\n\n    @Override\n    public Recipe getRecipe(String recipeId) {\n        return recipeDao.getRecipe(recipeId);\n    }\n\n    @Override\n    public List&lt;Recipe&gt; findRecipes(String keyword) {\n        return recipeDao.findRecipes(keyword);\n    }\n}\n</code></pre>\n\n<p>This is my <code>RecipeController</code></p>\n\n<pre><code>/**\n * Handles requests for the application home page.\n */\n@Controller\npublic class RecipeController {\n\n    private static final Logger logger = LoggerFactory.getLogger(RecipeController.class);\n\n    @Autowired\n    private RecipeService recipeService;\n\n    /**\n     * Adds recipes to the DB\n     */\n    @RequestMapping(value = \"/add\", method = RequestMethod.GET)\n    public String add(Locale locale, Model model) {\n        return \"add\";\n    }\n\n    /**\n     * Searches for recipes\n     */\n    @RequestMapping(value = \"/search\", method = RequestMethod.POST)\n    public String search(@RequestParam(value=\"keyword\", required=true) String keyword, Model model) {\n\n        List&lt;Recipe&gt; recipes = recipeService.findRecipes(keyword);\n        System.out.println( \"Results:\"+ recipes.size() );\n        return \"results\";\n    }\n\n    /**\n     * Logs in the user\n     */\n    @RequestMapping(value = \"/login\", method = RequestMethod.POST)\n    public String login(Locale locale, Model model) {\n\n        return \"login\";\n    }\n}\n</code></pre>\n\n<p>I've tried putting the <code>@Transactional</code> on the <code>RecipeDaoImpl</code> class and the <code>AbstractDaoImpl</code> class and neither worked.</p>\n\n<p>EDIT:\nI fixed this by catching the exception and opening a new one:</p>\n\n<pre><code>public Session getCurrentSession() {\n    Session session = null;\n    try { \n        session = sessionFactory.getCurrentSession();\n    } catch ( HibernateException he ) {\n        session = sessionFactory.openSession();\n    }\n    return session;\n}\n</code></pre>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":7373320,"reputation":17364,"user_id":5612858,"display_name":"Arnaud"},"score":0,"creation_date":1693390129,"post_id":77006919,"comment_id":135753374,"body_markdown":"Do you successfully detect shake actions with your current code ?","body":"Do you successfully detect shake actions with your current code ?"},{"owner":{"account_id":28211308,"reputation":1,"user_id":21563512,"display_name":"e36_King"},"score":0,"creation_date":1693392164,"post_id":77006919,"comment_id":135753809,"body_markdown":"I will buy an android phone tomorrow and test it. I tested on my friends phone and it didn&#39;t work.","body":"I will buy an android phone tomorrow and test it. I tested on my friends phone and it didn&#39;t work."},{"owner":{"account_id":7373320,"reputation":17364,"user_id":5612858,"display_name":"Arnaud"},"score":0,"creation_date":1693396192,"post_id":77006919,"comment_id":135754613,"body_markdown":"Maybe you haven&#39;t registered the listener, see the answers here : https://stackoverflow.com/questions/5271448/how-to-detect-shake-event-with-android","body":"Maybe you haven&#39;t registered the listener, see the answers here : <a href=\"https://stackoverflow.com/questions/5271448/how-to-detect-shake-event-with-android\" title=\"how to detect shake event with android\">stackoverflow.com/questions/5271448/&hellip;</a>"}],"owner":{"account_id":28211308,"reputation":1,"user_id":21563512,"display_name":"e36_King"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693389396,"creation_date":1693389396,"question_id":77006919,"body_markdown":"I been trying to build my first application. It is a cowbell but for some reason, it isnt working. When I press the image button it makes the cowbell sound i implemented it when shaking the phone too but the shake to play is not working. Here are my codes:\r\n\r\n```\r\nMainActivity.java\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n    private ImageButton imageButton;\r\n    private SensorManager mSensorManager;\r\n    private Sensor mAccelerometer;\r\n    private ShakeDetector mShakeDetector;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        imageButton = findViewById(R.id.imageButton);\r\n        MediaPlayer mediaPlayer = MediaPlayer.create(this, R.raw.cowbell);\r\n        imageButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                mediaPlayer.start();\r\n            }\r\n        });\r\n\r\n        mSensorManager = (SensorManager) getSystemService(SENSOR_SERVICE);\r\n        mAccelerometer = mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);\r\n        mShakeDetector = new ShakeDetector(new OnShakeListener(){\r\n            public void onShake(){mediaPlayer.start();}\r\n        });\r\n\r\n    }\r\n}\r\n```\r\n\r\n```\r\n\r\n\r\nShakeDetector.java\r\n\r\nimport android.hardware.Sensor;\r\nimport android.hardware.SensorEvent;\r\nimport android.hardware.SensorEventListener;\r\n\r\npublic class ShakeDetector implements SensorEventListener {\r\n\r\n    // Minimum acceleration needed to count as a shake movement\r\n    private static final int MIN_SHAKE_ACCELERATION = 5;\r\n\r\n    // Minimum number of movements to register a shake\r\n    private static final int MIN_MOVEMENTS = 2;\r\n\r\n    // Maximum time (in milliseconds) for the whole shake to occur\r\n    private static final int MAX_SHAKE_DURATION = 500;\r\n\r\n    // Arrays to store gravity and linear acceleration values\r\n    private final float[] mGravity = { 0.0f, 0.0f, 0.0f };\r\n    private final float[] mLinearAcceleration = { 0.0f, 0.0f, 0.0f };\r\n\r\n    // Indexes for x, y, and z values\r\n    private static final int X = 0;\r\n    private static final int Y = 1;\r\n    private static final int Z = 2;\r\n\r\n    // OnShakeListener that will be notified when the shake is detected\r\n    private final OnShakeListener mShakeListener;\r\n\r\n    // Start time for the shake detection\r\n    long startTime = 0;\r\n\r\n    // Counter for shake movements\r\n    int moveCount = 0;\r\n\r\n    // Constructor that sets the shake listener\r\n    public ShakeDetector(OnShakeListener shakeListener) {\r\n        mShakeListener = shakeListener;\r\n    }\r\n\r\n    @Override\r\n    public void onSensorChanged(SensorEvent event) {\r\n        // This method will be called when the accelerometer detects a change.\r\n\r\n        // Call a helper method that wraps code from the Android developer site\r\n        setCurrentAcceleration(event);\r\n\r\n        // Get the max linear acceleration in any direction\r\n        float maxLinearAcceleration = getMaxCurrentLinearAcceleration();\r\n\r\n        // Check if the acceleration is greater than our minimum threshold\r\n        if (maxLinearAcceleration &gt; MIN_SHAKE_ACCELERATION) {\r\n            long now = System.currentTimeMillis();\r\n\r\n            // Set the startTime if it was reset to zero\r\n            if (startTime == 0) {\r\n                startTime = now;\r\n            }\r\n\r\n            long elapsedTime = now - startTime;\r\n\r\n            // Check if we&#39;re still in the shake window we defined\r\n            if (elapsedTime &gt; MAX_SHAKE_DURATION) {\r\n                // Too much time has passed. Start over!\r\n                resetShakeDetection();\r\n            }\r\n            else {\r\n                // Keep track of all the movements\r\n                moveCount++;\r\n\r\n                // Check if enough movements have been made to qualify as a shake\r\n                if (moveCount &gt; MIN_MOVEMENTS) {\r\n                    // It&#39;s a shake! Notify the listener.\r\n                    mShakeListener.onShake();\r\n\r\n                    // Reset for the next one!\r\n                    resetShakeDetection();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onAccuracyChanged(Sensor sensor, int accuracy) {\r\n        // Intentionally blank\r\n    }\r\n\r\n    private void setCurrentAcceleration(SensorEvent event) {\r\n        /*\r\n         *  BEGIN SECTION from Android developer site. This code accounts for\r\n         *  gravity using a high-pass filter\r\n         */\r\n\r\n        // alpha is calculated as t / (t + dT)\r\n        // with t, the low-pass filter&#39;s time-constant\r\n        // and dT, the event delivery rate\r\n\r\n        final float alpha = 0.8f;\r\n\r\n        // Gravity components of x, y, and z acceleration\r\n        mGravity[X] = alpha * mGravity[X] + (1 - alpha) * event.values[X];\r\n        mGravity[Y] = alpha * mGravity[Y] + (1 - alpha) * event.values[Y];\r\n        mGravity[Z] = alpha * mGravity[Z] + (1 - alpha) * event.values[Z];\r\n\r\n        // Linear acceleration along the x, y, and z axes (gravity effects removed)\r\n        mLinearAcceleration[X] = event.values[X] - mGravity[X];\r\n        mLinearAcceleration[Y] = event.values[Y] - mGravity[Y];\r\n        mLinearAcceleration[Z] = event.values[Z] - mGravity[Z];\r\n\r\n        /*\r\n         *  END SECTION from Android developer site\r\n         */\r\n    }\r\n\r\n    private float getMaxCurrentLinearAcceleration() {\r\n        // Start by setting the value to the x value\r\n        float maxLinearAcceleration = mLinearAcceleration[X];\r\n\r\n        // Check if the y value is greater\r\n        if (mLinearAcceleration[Y] &gt; maxLinearAcceleration) {\r\n            maxLinearAcceleration = mLinearAcceleration[Y];\r\n        }\r\n\r\n        // Check if the z value is greater\r\n        if (mLinearAcceleration[Z] &gt; maxLinearAcceleration) {\r\n            maxLinearAcceleration = mLinearAcceleration[Z];\r\n        }\r\n\r\n        // Return the greatest value\r\n        return maxLinearAcceleration;\r\n    }\r\n\r\n    private void resetShakeDetection() {\r\n        startTime = 0;\r\n        moveCount = 0;\r\n    }\r\n\r\n    /*\r\n     * Definition for OnShakeListener definition. I would normally put this\r\n     * into it&#39;s own .java file, but I included it here for quick reference\r\n     * and to make it easier to include this file in our project.\r\n     */\r\n    public interface OnShakeListener {\r\n        void onShake();\r\n    }\r\n}\r\n```\r\n\r\nI tried playing around with the codes. And I was expecting for the app to make the cowbell sound while shaking the phone.","title":"When shaking the phone, it doesnt make the sound of a cowbell","body":"<p>I been trying to build my first application. It is a cowbell but for some reason, it isnt working. When I press the image button it makes the cowbell sound i implemented it when shaking the phone too but the shake to play is not working. Here are my codes:</p>\n<pre><code>MainActivity.java\n\npublic class MainActivity extends AppCompatActivity {\n    private ImageButton imageButton;\n    private SensorManager mSensorManager;\n    private Sensor mAccelerometer;\n    private ShakeDetector mShakeDetector;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        imageButton = findViewById(R.id.imageButton);\n        MediaPlayer mediaPlayer = MediaPlayer.create(this, R.raw.cowbell);\n        imageButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                mediaPlayer.start();\n            }\n        });\n\n        mSensorManager = (SensorManager) getSystemService(SENSOR_SERVICE);\n        mAccelerometer = mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);\n        mShakeDetector = new ShakeDetector(new OnShakeListener(){\n            public void onShake(){mediaPlayer.start();}\n        });\n\n    }\n}\n</code></pre>\n<pre><code>\n\nShakeDetector.java\n\nimport android.hardware.Sensor;\nimport android.hardware.SensorEvent;\nimport android.hardware.SensorEventListener;\n\npublic class ShakeDetector implements SensorEventListener {\n\n    // Minimum acceleration needed to count as a shake movement\n    private static final int MIN_SHAKE_ACCELERATION = 5;\n\n    // Minimum number of movements to register a shake\n    private static final int MIN_MOVEMENTS = 2;\n\n    // Maximum time (in milliseconds) for the whole shake to occur\n    private static final int MAX_SHAKE_DURATION = 500;\n\n    // Arrays to store gravity and linear acceleration values\n    private final float[] mGravity = { 0.0f, 0.0f, 0.0f };\n    private final float[] mLinearAcceleration = { 0.0f, 0.0f, 0.0f };\n\n    // Indexes for x, y, and z values\n    private static final int X = 0;\n    private static final int Y = 1;\n    private static final int Z = 2;\n\n    // OnShakeListener that will be notified when the shake is detected\n    private final OnShakeListener mShakeListener;\n\n    // Start time for the shake detection\n    long startTime = 0;\n\n    // Counter for shake movements\n    int moveCount = 0;\n\n    // Constructor that sets the shake listener\n    public ShakeDetector(OnShakeListener shakeListener) {\n        mShakeListener = shakeListener;\n    }\n\n    @Override\n    public void onSensorChanged(SensorEvent event) {\n        // This method will be called when the accelerometer detects a change.\n\n        // Call a helper method that wraps code from the Android developer site\n        setCurrentAcceleration(event);\n\n        // Get the max linear acceleration in any direction\n        float maxLinearAcceleration = getMaxCurrentLinearAcceleration();\n\n        // Check if the acceleration is greater than our minimum threshold\n        if (maxLinearAcceleration &gt; MIN_SHAKE_ACCELERATION) {\n            long now = System.currentTimeMillis();\n\n            // Set the startTime if it was reset to zero\n            if (startTime == 0) {\n                startTime = now;\n            }\n\n            long elapsedTime = now - startTime;\n\n            // Check if we're still in the shake window we defined\n            if (elapsedTime &gt; MAX_SHAKE_DURATION) {\n                // Too much time has passed. Start over!\n                resetShakeDetection();\n            }\n            else {\n                // Keep track of all the movements\n                moveCount++;\n\n                // Check if enough movements have been made to qualify as a shake\n                if (moveCount &gt; MIN_MOVEMENTS) {\n                    // It's a shake! Notify the listener.\n                    mShakeListener.onShake();\n\n                    // Reset for the next one!\n                    resetShakeDetection();\n                }\n            }\n        }\n    }\n\n    @Override\n    public void onAccuracyChanged(Sensor sensor, int accuracy) {\n        // Intentionally blank\n    }\n\n    private void setCurrentAcceleration(SensorEvent event) {\n        /*\n         *  BEGIN SECTION from Android developer site. This code accounts for\n         *  gravity using a high-pass filter\n         */\n\n        // alpha is calculated as t / (t + dT)\n        // with t, the low-pass filter's time-constant\n        // and dT, the event delivery rate\n\n        final float alpha = 0.8f;\n\n        // Gravity components of x, y, and z acceleration\n        mGravity[X] = alpha * mGravity[X] + (1 - alpha) * event.values[X];\n        mGravity[Y] = alpha * mGravity[Y] + (1 - alpha) * event.values[Y];\n        mGravity[Z] = alpha * mGravity[Z] + (1 - alpha) * event.values[Z];\n\n        // Linear acceleration along the x, y, and z axes (gravity effects removed)\n        mLinearAcceleration[X] = event.values[X] - mGravity[X];\n        mLinearAcceleration[Y] = event.values[Y] - mGravity[Y];\n        mLinearAcceleration[Z] = event.values[Z] - mGravity[Z];\n\n        /*\n         *  END SECTION from Android developer site\n         */\n    }\n\n    private float getMaxCurrentLinearAcceleration() {\n        // Start by setting the value to the x value\n        float maxLinearAcceleration = mLinearAcceleration[X];\n\n        // Check if the y value is greater\n        if (mLinearAcceleration[Y] &gt; maxLinearAcceleration) {\n            maxLinearAcceleration = mLinearAcceleration[Y];\n        }\n\n        // Check if the z value is greater\n        if (mLinearAcceleration[Z] &gt; maxLinearAcceleration) {\n            maxLinearAcceleration = mLinearAcceleration[Z];\n        }\n\n        // Return the greatest value\n        return maxLinearAcceleration;\n    }\n\n    private void resetShakeDetection() {\n        startTime = 0;\n        moveCount = 0;\n    }\n\n    /*\n     * Definition for OnShakeListener definition. I would normally put this\n     * into it's own .java file, but I included it here for quick reference\n     * and to make it easier to include this file in our project.\n     */\n    public interface OnShakeListener {\n        void onShake();\n    }\n}\n</code></pre>\n<p>I tried playing around with the codes. And I was expecting for the app to make the cowbell sound while shaking the phone.</p>\n"},{"tags":["java","ssl"],"answers":[{"tags":[],"owner":{"account_id":6114838,"reputation":31,"user_id":4770209,"display_name":"Mark_F"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1428610584,"creation_date":1428610584,"answer_id":29548131,"question_id":29544788,"body_markdown":"I figured it out. The server is responding with gzip encoding once file sizes are over a certain size.\r\n\r\n `con.setRequestProperty(&quot;Accept-Encoding&quot;, &quot;gzip, deflate, sdch&quot;);`\r\n\r\nwas added to the request header as well as some code to handle the gzip stream.\r\n","title":"SSL peer shut down incorrectly","body":"<p>I figured it out. The server is responding with gzip encoding once file sizes are over a certain size.</p>\n\n<p><code>con.setRequestProperty(\"Accept-Encoding\", \"gzip, deflate, sdch\");</code></p>\n\n<p>was added to the request header as well as some code to handle the gzip stream.</p>\n"},{"tags":[],"owner":{"account_id":28325237,"reputation":1,"user_id":21660343,"display_name":"dark anyi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693389104,"creation_date":1693389104,"answer_id":77006871,"question_id":29544788,"body_markdown":"if small file can run ,but large file  get the following: \r\njavax.net.ssl.SSLException: SSL peer shut down incorrectly\r\n\r\nmabey  Nginx \r\n(crit 20033#0: *563 open()&quot;home/nginx/proxy temp/8/03/0000000038&quot; failed (13: Permission denied) while reading upstream\r\n\r\nThis reason may be because a temporary file will be generated when the forwarding exceeds the configuration. This temporary file may be caused by no permission, so give this temporary file the right to modify\r\n\r\n","title":"SSL peer shut down incorrectly","body":"<p>if small file can run ,but large file  get the following:\njavax.net.ssl.SSLException: SSL peer shut down incorrectly</p>\n<p>mabey  Nginx\n(crit 20033#0: *563 open()&quot;home/nginx/proxy temp/8/03/0000000038&quot; failed (13: Permission denied) while reading upstream</p>\n<p>This reason may be because a temporary file will be generated when the forwarding exceeds the configuration. This temporary file may be caused by no permission, so give this temporary file the right to modify</p>\n"}],"owner":{"account_id":6114838,"reputation":31,"user_id":4770209,"display_name":"Mark_F"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4358,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1693389104,"creation_date":1428599365,"question_id":29544788,"body_markdown":"This is my first post here. I am a hobbyist so please bear with me.\r\n\r\nI am attempting to to grab a webpage from https://eztv.it/shows/1/24/ with the following code.\r\n\r\n    public static void WriteHTMLToFile(String URL){\r\n\t\ttry {\r\n\t\t\t\r\n\t\t\tURI myURI=new URI(URL);\r\n\t\t\tURL url = myURI.toURL();\r\n\t\t\tHttpsURLConnection con= (HttpsURLConnection)url.openConnection();\r\n\t\t\tFile myFile=new File(&quot;c:\\\\project\\\\Test.txt&quot;);\r\n\t\t\tmyFile.createNewFile();\r\n\t\t\tFileWriter wr=new FileWriter(myFile);\r\n\t\t\tInputStream ins=con.getInputStream();\r\n\t\t\tInputStreamReader isr= new InputStreamReader(ins);\r\n\t\t\tBufferedReader reader = new BufferedReader(isr);\r\n\t\t\tString line;\r\n\t\t\twhile ((line = reader.readLine()) != null) {\r\n\t\t\t\twr.write(line+&quot;\\n&quot;);\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treader.close();\r\n\t\t\twr.close();\r\n\t\t}\r\n\t\tcatch(Exception e){\r\n\t\t\tlog(e.toString());\r\n\t\t\t}\t\r\n\t}\r\n\r\nWhen I run this I get the following:\r\n\r\n&gt; javax.net.ssl.SSLException: SSL peer shut down incorrectly\r\n\r\nIf I run the above code on this URL: https://eztv.it/shows/887/the-blacklist/ it works as intended. The difference between the two URL file sizes seems to be a contributing factor. In testing different URLs to the same server the above code only seemed to work for files less that ~30Kb. Anything over would generate the above exception.","title":"SSL peer shut down incorrectly","body":"<p>This is my first post here. I am a hobbyist so please bear with me.</p>\n\n<p>I am attempting to to grab a webpage from <a href=\"https://eztv.it/shows/1/24/\" rel=\"nofollow\">https://eztv.it/shows/1/24/</a> with the following code.</p>\n\n<pre><code>public static void WriteHTMLToFile(String URL){\n    try {\n\n        URI myURI=new URI(URL);\n        URL url = myURI.toURL();\n        HttpsURLConnection con= (HttpsURLConnection)url.openConnection();\n        File myFile=new File(\"c:\\\\project\\\\Test.txt\");\n        myFile.createNewFile();\n        FileWriter wr=new FileWriter(myFile);\n        InputStream ins=con.getInputStream();\n        InputStreamReader isr= new InputStreamReader(ins);\n        BufferedReader reader = new BufferedReader(isr);\n        String line;\n        while ((line = reader.readLine()) != null) {\n            wr.write(line+\"\\n\");    \n        }\n\n        reader.close();\n        wr.close();\n    }\n    catch(Exception e){\n        log(e.toString());\n        }   \n}\n</code></pre>\n\n<p>When I run this I get the following:</p>\n\n<blockquote>\n  <p>javax.net.ssl.SSLException: SSL peer shut down incorrectly</p>\n</blockquote>\n\n<p>If I run the above code on this URL: <a href=\"https://eztv.it/shows/887/the-blacklist/\" rel=\"nofollow\">https://eztv.it/shows/887/the-blacklist/</a> it works as intended. The difference between the two URL file sizes seems to be a contributing factor. In testing different URLs to the same server the above code only seemed to work for files less that ~30Kb. Anything over would generate the above exception.</p>\n"},{"tags":["javascript","java","performance","graalvm"],"comments":[{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1693361637,"post_id":77003734,"comment_id":135749423,"body_markdown":"Why are you expecting GraalVM to be more performant than other implementations? Have your read the documentation (https://www.graalvm.org/latest/reference-manual/js/FAQ/#performance)?","body":"Why are you expecting GraalVM to be more performant than other implementations? Have your read the documentation (<a href=\"https://www.graalvm.org/latest/reference-manual/js/FAQ/#performance\" rel=\"nofollow noreferrer\">graalvm.org/latest/reference-manual/js/FAQ/#performance</a>)?"},{"owner":{"account_id":25960213,"reputation":117,"user_id":19676962,"display_name":"Churro the Duck"},"score":0,"creation_date":1693369916,"post_id":77003734,"comment_id":135749988,"body_markdown":"Just wondering, should this be tagged with `java`? It seems to be about `javascript`","body":"Just wondering, should this be tagged with <code>java</code>? It seems to be about <code>javascript</code>"},{"owner":{"account_id":17512303,"reputation":329,"user_id":12700084,"display_name":"omar mahameed"},"score":0,"creation_date":1693379873,"post_id":77003734,"comment_id":135751227,"body_markdown":"yes it&#39;s a Java that invoking js script,, graal vm is a js engine that written in java","body":"yes it&#39;s a Java that invoking js script,, graal vm is a js engine that written in java"},{"owner":{"account_id":497130,"reputation":1166,"user_id":1885085,"display_name":"Gilles D."},"score":0,"creation_date":1693385541,"post_id":77003734,"comment_id":135752331,"body_markdown":"Is this using a polyglot runtime with compilation enabled? What does `Engine.create().getImplementationName()` return? You mention something being executed 6000 times, since it don&#39;t see a loop in the Java code i assume it&#39;s happening in the javascript code?","body":"Is this using a polyglot runtime with compilation enabled? What does <code>Engine.create().getImplementationName()</code> return? You mention something being executed 6000 times, since it don&#39;t see a loop in the Java code i assume it&#39;s happening in the javascript code?"},{"owner":{"account_id":17512303,"reputation":329,"user_id":12700084,"display_name":"omar mahameed"},"score":0,"creation_date":1693388736,"post_id":77003734,"comment_id":135753056,"body_markdown":"@GillesD.\n\nyes I&#39;m using a polyglot engine.\n\n\nthe snippest of code is a sample of a production issue, BUT imagine this code is execute 6000 time, and measuring the average time of the processor.execute(subjectJson)\n\nbut anyway, updated","body":"@GillesD.  yes I&#39;m using a polyglot engine.   the snippest of code is a sample of a production issue, BUT imagine this code is execute 6000 time, and measuring the average time of the processor.execute(subjectJson)  but anyway, updated"},{"owner":{"account_id":497130,"reputation":1166,"user_id":1885085,"display_name":"Gilles D."},"score":0,"creation_date":1693478710,"post_id":77003734,"comment_id":135767828,"body_markdown":"@omarmahameed, my question was about the exact setup of the polyglot engine. In particular, did you check that it&#39;s not using the slow &quot;Interpreted&quot; implementation which doesn&#39;t have any JIT compilation. Thanks for the details on the 6000&#215; repetition.","body":"@omarmahameed, my question was about the exact setup of the polyglot engine. In particular, did you check that it&#39;s not using the slow &quot;Interpreted&quot; implementation which doesn&#39;t have any JIT compilation. Thanks for the details on the 6000&#215; repetition."}],"owner":{"account_id":17512303,"reputation":329,"user_id":12700084,"display_name":"omar mahameed"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":145,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693388934,"creation_date":1693344278,"question_id":77003734,"body_markdown":"Hello Stack Overflow community,\r\n\r\nI&#39;ve encountered a performance problem while using the GraalVM Polyglot API to run JavaScript scripts as a script engine. The specific section of code that invokes the JavaScript function seems to have a significant delay, taking approximately 400 ms on average when executed 6,000 times.\r\n\r\nInterestingly, when I attempted to run the same JavaScript code using Node.js in the WebStorm IDE, it only took about 20 ms. This stark difference in rendering time has me wondering if such a substantial delay is to be expected when using GraalVM Polyglot.\r\n\r\nI noticed that other script engines, such as V8 and J2V8, tend to complete this task in approximately 50 ms, which further highlights the performance gap I&#39;m encountering with GraalVM.\r\n\r\nBelow is the code snippet I&#39;m using:\r\n\r\n\r\nExpected Behavior:\r\nI&#39;m hoping to optimize the execution time by utilizing the GraalVM Polyglot API more effectively. To provide some context, the story.json file contains around 50,000 rows of data, and the scripting method involves the usage of jsep for parsing and some Visitor Design Pattern, which includes recursion. The function call that contributes to the delay cotains a visitor design pattern and some call backs like this\r\n\r\njavascript\r\n```\r\nval = callee.call(args);\r\n```\r\nny Ideas?\r\nIf anyone has insights into how I might improve the performance of this code using GraalVM Polyglot, I&#39;d greatly appreciate your suggestions.\r\n\r\nThank you in advance for your help!\r\n\r\nRemember to adjust the title, expected behavior, and additional context as needed to accurately reflect your situation. Also, make sure to provide any relevant error messages, warnings, or any further information that might help the community understand your issue better.\r\n\r\n\r\n\r\n```\r\nimport org.graalvm.polyglot.*;\r\nimport java.io.FileNotFoundException;\r\nimport java.io.IOException;\r\nimport java.net.URL;\r\nimport java.nio.charset.Charset;\r\n\r\npublic class GraalVM {\r\n    public static void main(String[] args) {\r\n        try (Context context = Context.create()) {\r\n            URL resourceURL = GraalVM.class.getClassLoader().getResource(&quot;script.js&quot;);\r\n            URL resourceJson = GraalVM.class.getClassLoader().getResource(&quot;story.json&quot;);\r\n            \r\n            context.eval(&quot;js&quot;, Resources.toString(resourceURL, Charset.defaultCharset()));\r\n            \r\n            Value functionsObject = context.getBindings(&quot;js&quot;);\r\n            Value processor = functionsObject.getMember(&quot;scripting&quot;);\r\n            \r\n            String subjectJson = Resources.toString(resourceJson, Charset.defaultCharset());\r\n            \r\n                        long sum = 0;\r\n            int iteration = 6000;\r\n\r\n            for (int i = 0 ;i &lt; iteration; i++){\r\n                long start = System.currentTimeMillis();\r\n                processor.execute(subjectJson);\r\n                long end = System.currentTimeMillis();\r\n                sum += (end - start);\r\n            }\r\n\r\n            System.out.println(&quot;time took for invoking in average is: &quot; + (sum / iteration));\r\n\r\n        } catch (FileNotFoundException e) {\r\n            throw new RuntimeException(e);\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\n","title":"GraalVM - Performance Issue A lot of time for invoke js method","body":"<p>Hello Stack Overflow community,</p>\n<p>I've encountered a performance problem while using the GraalVM Polyglot API to run JavaScript scripts as a script engine. The specific section of code that invokes the JavaScript function seems to have a significant delay, taking approximately 400 ms on average when executed 6,000 times.</p>\n<p>Interestingly, when I attempted to run the same JavaScript code using Node.js in the WebStorm IDE, it only took about 20 ms. This stark difference in rendering time has me wondering if such a substantial delay is to be expected when using GraalVM Polyglot.</p>\n<p>I noticed that other script engines, such as V8 and J2V8, tend to complete this task in approximately 50 ms, which further highlights the performance gap I'm encountering with GraalVM.</p>\n<p>Below is the code snippet I'm using:</p>\n<p>Expected Behavior:\nI'm hoping to optimize the execution time by utilizing the GraalVM Polyglot API more effectively. To provide some context, the story.json file contains around 50,000 rows of data, and the scripting method involves the usage of jsep for parsing and some Visitor Design Pattern, which includes recursion. The function call that contributes to the delay cotains a visitor design pattern and some call backs like this</p>\n<p>javascript</p>\n<pre><code>val = callee.call(args);\n</code></pre>\n<p>ny Ideas?\nIf anyone has insights into how I might improve the performance of this code using GraalVM Polyglot, I'd greatly appreciate your suggestions.</p>\n<p>Thank you in advance for your help!</p>\n<p>Remember to adjust the title, expected behavior, and additional context as needed to accurately reflect your situation. Also, make sure to provide any relevant error messages, warnings, or any further information that might help the community understand your issue better.</p>\n<pre><code>import org.graalvm.polyglot.*;\nimport java.io.FileNotFoundException;\nimport java.io.IOException;\nimport java.net.URL;\nimport java.nio.charset.Charset;\n\npublic class GraalVM {\n    public static void main(String[] args) {\n        try (Context context = Context.create()) {\n            URL resourceURL = GraalVM.class.getClassLoader().getResource(&quot;script.js&quot;);\n            URL resourceJson = GraalVM.class.getClassLoader().getResource(&quot;story.json&quot;);\n            \n            context.eval(&quot;js&quot;, Resources.toString(resourceURL, Charset.defaultCharset()));\n            \n            Value functionsObject = context.getBindings(&quot;js&quot;);\n            Value processor = functionsObject.getMember(&quot;scripting&quot;);\n            \n            String subjectJson = Resources.toString(resourceJson, Charset.defaultCharset());\n            \n                        long sum = 0;\n            int iteration = 6000;\n\n            for (int i = 0 ;i &lt; iteration; i++){\n                long start = System.currentTimeMillis();\n                processor.execute(subjectJson);\n                long end = System.currentTimeMillis();\n                sum += (end - start);\n            }\n\n            System.out.println(&quot;time took for invoking in average is: &quot; + (sum / iteration));\n\n        } catch (FileNotFoundException e) {\n            throw new RuntimeException(e);\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","mongodb","spring-boot"],"comments":[{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1693298671,"post_id":76998576,"comment_id":135738854,"body_markdown":"[how-to-enable-auditing-for-mongodb-via-annotations-in-spring](https://stackoverflow.com/questions/21991293/how-to-enable-auditing-for-mongodb-via-annotations-in-spring)","body":"<a href=\"https://stackoverflow.com/questions/21991293/how-to-enable-auditing-for-mongodb-via-annotations-in-spring\">how-to-enable-auditing-for-mongodb-via-annotations-in-spring</a>"},{"owner":{"account_id":10432483,"reputation":2673,"user_id":7691891,"display_name":"Smaillns"},"score":0,"creation_date":1693304322,"post_id":76998576,"comment_id":135739862,"body_markdown":"It works with other entities, but the document I mentioned above it throws an exception when enabling mongo auditing","body":"It works with other entities, but the document I mentioned above it throws an exception when enabling mongo auditing"}],"answers":[{"tags":[],"owner":{"account_id":10432483,"reputation":2673,"user_id":7691891,"display_name":"Smaillns"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1693388863,"creation_date":1693388863,"answer_id":77006843,"question_id":76998576,"body_markdown":"I don&#39;t understand what exactly happens under the hood, But I was able to fix the problem by changing the type from `HashMap` to `Map`\r\n\r\n\r\n```\r\n@Builder\r\n@Data\r\n@Document(collection = &quot;contract-overdue&quot;)\r\npublic class MGReceiptContractOverdue {\r\n\r\n    @Id\r\n    private String id;\r\n    private String contractRef;\r\n\r\n    private Map&lt;String, Map&lt;Integer, Overdue&gt;&gt; overdueList;\r\n\r\n    // Constructor and methods...\r\n}\r\n```\r\n","title":"Issue with NullPointerException when using @EnableMongoAuditing in Spring Boot application","body":"<p>I don't understand what exactly happens under the hood, But I was able to fix the problem by changing the type from <code>HashMap</code> to <code>Map</code></p>\n<pre><code>@Builder\n@Data\n@Document(collection = &quot;contract-overdue&quot;)\npublic class MGReceiptContractOverdue {\n\n    @Id\n    private String id;\n    private String contractRef;\n\n    private Map&lt;String, Map&lt;Integer, Overdue&gt;&gt; overdueList;\n\n    // Constructor and methods...\n}\n</code></pre>\n"}],"owner":{"account_id":10432483,"reputation":2673,"user_id":7691891,"display_name":"Smaillns"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77006843,"answer_count":1,"score":0,"last_activity_date":1693388863,"creation_date":1693297694,"question_id":76998576,"body_markdown":"I&#39;m encountering a problem in my Spring Boot application when I use the **@EnableMongoAuditing** annotation.\r\n\r\nThe application throws a NullPointerException that seems to be related to the auditing mechanism. Interestingly, the issue disappears when I remove the `@EnableMongoAuditing` annotation, but I&#39;d like to use auditing in my application.\r\n\r\nHere&#39;s the relevant entity class that I&#39;m working with:\r\n```java\r\nimport ..*.model.ContractOverdue;\r\nimport *.model.Overdue;\r\nimport lombok.Builder;\r\nimport lombok.Data;\r\nimport org.springframework.data.annotation.Id;\r\nimport org.springframework.data.mongodb.core.mapping.Document;\r\n\r\nimport java.util.HashMap;\r\n\r\n@Builder\r\n@Data\r\n@Document(collection = &quot;contract-overdue&quot;)\r\npublic class MGReceiptContractOverdue {\r\n\r\n    @Id\r\n    private String id;\r\n    private String contractRef;\r\n\r\n    private HashMap&lt;String, HashMap&lt;Integer, Overdue&gt;&gt; overdueList;\r\n\r\n    // Constructor and methods...\r\n}\r\n\r\n```\r\nI don&#39;t have any auditing-related fields in my entity class, and the issue only arises when the **@EnableMongoAuditing** annotation is present in the configuration.\r\n\r\nHere&#39;s a part of the stack trace of the error:\r\n```\r\nCaused by: java.lang.NullPointerException: null\r\n\tat org.springframework.data.mapping.context.PersistentPropertyPathFactory.from(PersistentPropertyPathFactory.java:266) ~[spring-data-commons-2.6.3.jar:2.6.3]\r\n\tat org.springframework.data.mapping.context.PersistentPropertyPathFactory.lambda$from$2(PersistentPropertyPathFactory.java:262) ~[spring-data-commons-2.6.3.jar:2.6.3]\r\n\tat org.springframework.data.mapping.model.BasicPersistentEntity.doWithProperties(BasicPersistentEntity.java:360) ~[spring-data-commons-2.6.3.jar:2.6.3]\r\n\r\n```\r\nWhat could be causing this issue, and how can I use the **@EnableMongoAuditing** annotation without encountering a **NullPointerException**? Any guidance or suggestions would be greatly appreciated.\r\n\r\n\r\nThank you in advance for any help!\r\n","title":"Issue with NullPointerException when using @EnableMongoAuditing in Spring Boot application","body":"<p>I'm encountering a problem in my Spring Boot application when I use the <strong>@EnableMongoAuditing</strong> annotation.</p>\n<p>The application throws a NullPointerException that seems to be related to the auditing mechanism. Interestingly, the issue disappears when I remove the <code>@EnableMongoAuditing</code> annotation, but I'd like to use auditing in my application.</p>\n<p>Here's the relevant entity class that I'm working with:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import ..*.model.ContractOverdue;\nimport *.model.Overdue;\nimport lombok.Builder;\nimport lombok.Data;\nimport org.springframework.data.annotation.Id;\nimport org.springframework.data.mongodb.core.mapping.Document;\n\nimport java.util.HashMap;\n\n@Builder\n@Data\n@Document(collection = &quot;contract-overdue&quot;)\npublic class MGReceiptContractOverdue {\n\n    @Id\n    private String id;\n    private String contractRef;\n\n    private HashMap&lt;String, HashMap&lt;Integer, Overdue&gt;&gt; overdueList;\n\n    // Constructor and methods...\n}\n\n</code></pre>\n<p>I don't have any auditing-related fields in my entity class, and the issue only arises when the <strong>@EnableMongoAuditing</strong> annotation is present in the configuration.</p>\n<p>Here's a part of the stack trace of the error:</p>\n<pre><code>Caused by: java.lang.NullPointerException: null\n    at org.springframework.data.mapping.context.PersistentPropertyPathFactory.from(PersistentPropertyPathFactory.java:266) ~[spring-data-commons-2.6.3.jar:2.6.3]\n    at org.springframework.data.mapping.context.PersistentPropertyPathFactory.lambda$from$2(PersistentPropertyPathFactory.java:262) ~[spring-data-commons-2.6.3.jar:2.6.3]\n    at org.springframework.data.mapping.model.BasicPersistentEntity.doWithProperties(BasicPersistentEntity.java:360) ~[spring-data-commons-2.6.3.jar:2.6.3]\n\n</code></pre>\n<p>What could be causing this issue, and how can I use the <strong>@EnableMongoAuditing</strong> annotation without encountering a <strong>NullPointerException</strong>? Any guidance or suggestions would be greatly appreciated.</p>\n<p>Thank you in advance for any help!</p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1693396993,"post_id":77006826,"comment_id":135754782,"body_markdown":"i think you should create integration tests in this case, for more details i recommend to have look at this simple guide [testing-web](https://spring.io/guides/gs/testing-web/).","body":"i think you should create integration tests in this case, for more details i recommend to have look at this simple guide <a href=\"https://spring.io/guides/gs/testing-web/\" rel=\"nofollow noreferrer\">testing-web</a>."}],"owner":{"account_id":29328522,"reputation":1,"user_id":22470490,"display_name":"Gustavo Dias"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693388669,"creation_date":1693388669,"question_id":77006826,"body_markdown":"I have an activity than i need an CRUD(create, read, update, delete) operations on Java, and I&#39;d used Spring Framework to build a RESTful Api. But right now i&#39;m getting a few problems with UUID id, my generated value. \r\n\r\n\r\n```\r\npackage com.example.demo.controllers;\r\n\r\nimport com.example.demo.dtos.ProductRecordDTO;\r\nimport com.example.demo.models.ProductModel;\r\nimport com.example.demo.repositories.ProductRepository;\r\nimport jakarta.validation.Valid;\r\nimport org.springframework.beans.BeanUtils;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.http.HttpStatus;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.web.bind.annotation.*;\r\n\r\nimport java.util.List;\r\nimport java.util.Optional;\r\nimport java.util.UUID;\r\n\r\nimport static org.springframework.hateoas.server.mvc.WebMvcLinkBuilder.linkTo;\r\nimport static org.springframework.hateoas.server.mvc.WebMvcLinkBuilder.methodOn;\r\n\r\n@RestController\r\npublic class ProductController {\r\n\r\n    @Autowired\r\n    ProductRepository productRepository;\r\n\r\n    @PostMapping(&quot;/products&quot;)\r\n    public ResponseEntity&lt;ProductModel&gt; saveProduct(@RequestBody @Valid ProductRecordDTO productRecordDto) {\r\n        var productModel = new ProductModel();\r\n        BeanUtils.copyProperties(productRecordDto, productModel);\r\n        return ResponseEntity.status(HttpStatus.CREATED).body(productRepository.save(productModel));\r\n    }\r\n\r\n    @GetMapping(&quot;/products&quot;)\r\n    public ResponseEntity&lt;List&lt;ProductModel&gt;&gt; getAllProducts(){\r\n        List&lt;ProductModel&gt; productsList = productRepository.findAll();\r\n        if (!productsList.isEmpty()){\r\n            for (ProductModel product : productsList){\r\n                UUID id = product.getIdProduct();\r\n                product.add(linkTo(methodOn(ProductController.class).getOneProduct(id)).withSelfRel());\r\n            }\r\n        }\r\n        return ResponseEntity.status(HttpStatus.OK).body(productsList);\r\n    }\r\n\r\n    @GetMapping(&quot;/products/{id}&quot;)\r\n    public ResponseEntity&lt;Object&gt; getOneProduct(@PathVariable(value = &quot;id&quot;)UUID id){\r\n        Optional&lt;ProductModel&gt; productD = productRepository.findById(id);\r\n        if(productD.isEmpty()){\r\n            return ResponseEntity.status(HttpStatus.NOT_FOUND).body(&quot;Product Not Found&quot;);\r\n        }\r\n        productD.get().add(linkTo(methodOn(ProductController.class).getAllProducts()).withRel(&quot;ProductsList&quot;));\r\n        return ResponseEntity.status(HttpStatus.OK).body(productD.get());\r\n    }\r\n\r\n    @PutMapping(&quot;/products/{id}&quot;)\r\n    public ResponseEntity&lt;Object&gt; updateProduct(@PathVariable(value = &quot;id&quot;) UUID id,\r\n                                                @RequestBody @Valid ProductRecordDTO productRecordDTO\r\n                                                ){\r\n        Optional&lt;ProductModel&gt; productD = productRepository.findById(id);\r\n        if (productD.isEmpty()){\r\n            return ResponseEntity.status(HttpStatus.NOT_FOUND).body(&quot;Product Not Found&quot;);\r\n        }\r\n        var productModel = productD.get();\r\n        BeanUtils.copyProperties(productRecordDTO, productModel);\r\n        return ResponseEntity.status(HttpStatus.OK).body(productRepository.save(productModel));\r\n    }\r\n\r\n    @DeleteMapping(&quot;/products/{id}&quot;)\r\n    public ResponseEntity&lt;Object&gt; deleteProduct(@PathVariable(value = &quot;id&quot;) UUID id){\r\n        Optional&lt;ProductModel&gt; productD = productRepository.findById(id);\r\n        if (productD.isEmpty()){\r\n            return ResponseEntity.status(HttpStatus.NOT_FOUND).body(&quot;Product Not Found&quot;);\r\n        }\r\n        productRepository.delete(productD.get());\r\n        return ResponseEntity.status(HttpStatus.OK).body(&quot;Product was deleted sucefull&quot;);\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\nThis is my ProductController code. How can I implement JUnit tests for each one of these functions?\r\n","title":"junit test for my product controller on spring","body":"<p>I have an activity than i need an CRUD(create, read, update, delete) operations on Java, and I'd used Spring Framework to build a RESTful Api. But right now i'm getting a few problems with UUID id, my generated value.</p>\n<pre><code>package com.example.demo.controllers;\n\nimport com.example.demo.dtos.ProductRecordDTO;\nimport com.example.demo.models.ProductModel;\nimport com.example.demo.repositories.ProductRepository;\nimport jakarta.validation.Valid;\nimport org.springframework.beans.BeanUtils;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\nimport java.util.Optional;\nimport java.util.UUID;\n\nimport static org.springframework.hateoas.server.mvc.WebMvcLinkBuilder.linkTo;\nimport static org.springframework.hateoas.server.mvc.WebMvcLinkBuilder.methodOn;\n\n@RestController\npublic class ProductController {\n\n    @Autowired\n    ProductRepository productRepository;\n\n    @PostMapping(&quot;/products&quot;)\n    public ResponseEntity&lt;ProductModel&gt; saveProduct(@RequestBody @Valid ProductRecordDTO productRecordDto) {\n        var productModel = new ProductModel();\n        BeanUtils.copyProperties(productRecordDto, productModel);\n        return ResponseEntity.status(HttpStatus.CREATED).body(productRepository.save(productModel));\n    }\n\n    @GetMapping(&quot;/products&quot;)\n    public ResponseEntity&lt;List&lt;ProductModel&gt;&gt; getAllProducts(){\n        List&lt;ProductModel&gt; productsList = productRepository.findAll();\n        if (!productsList.isEmpty()){\n            for (ProductModel product : productsList){\n                UUID id = product.getIdProduct();\n                product.add(linkTo(methodOn(ProductController.class).getOneProduct(id)).withSelfRel());\n            }\n        }\n        return ResponseEntity.status(HttpStatus.OK).body(productsList);\n    }\n\n    @GetMapping(&quot;/products/{id}&quot;)\n    public ResponseEntity&lt;Object&gt; getOneProduct(@PathVariable(value = &quot;id&quot;)UUID id){\n        Optional&lt;ProductModel&gt; productD = productRepository.findById(id);\n        if(productD.isEmpty()){\n            return ResponseEntity.status(HttpStatus.NOT_FOUND).body(&quot;Product Not Found&quot;);\n        }\n        productD.get().add(linkTo(methodOn(ProductController.class).getAllProducts()).withRel(&quot;ProductsList&quot;));\n        return ResponseEntity.status(HttpStatus.OK).body(productD.get());\n    }\n\n    @PutMapping(&quot;/products/{id}&quot;)\n    public ResponseEntity&lt;Object&gt; updateProduct(@PathVariable(value = &quot;id&quot;) UUID id,\n                                                @RequestBody @Valid ProductRecordDTO productRecordDTO\n                                                ){\n        Optional&lt;ProductModel&gt; productD = productRepository.findById(id);\n        if (productD.isEmpty()){\n            return ResponseEntity.status(HttpStatus.NOT_FOUND).body(&quot;Product Not Found&quot;);\n        }\n        var productModel = productD.get();\n        BeanUtils.copyProperties(productRecordDTO, productModel);\n        return ResponseEntity.status(HttpStatus.OK).body(productRepository.save(productModel));\n    }\n\n    @DeleteMapping(&quot;/products/{id}&quot;)\n    public ResponseEntity&lt;Object&gt; deleteProduct(@PathVariable(value = &quot;id&quot;) UUID id){\n        Optional&lt;ProductModel&gt; productD = productRepository.findById(id);\n        if (productD.isEmpty()){\n            return ResponseEntity.status(HttpStatus.NOT_FOUND).body(&quot;Product Not Found&quot;);\n        }\n        productRepository.delete(productD.get());\n        return ResponseEntity.status(HttpStatus.OK).body(&quot;Product was deleted sucefull&quot;);\n    }\n\n}\n\n</code></pre>\n<p>This is my ProductController code. How can I implement JUnit tests for each one of these functions?</p>\n"},{"tags":["java","pattern-matching","java-14","preview-feature"],"comments":[{"owner":{"account_id":195331,"reputation":275398,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":0,"creation_date":1590240557,"post_id":61939967,"comment_id":109609104,"body_markdown":"Please edit your question. Include the compile time error&#39;s full message and what you didn&#39;t understand from it. Change your title to reflect the actual issue, not the concepts involved (which can be added as tags).","body":"Please edit your question. Include the compile time error&#39;s full message and what you didn&#39;t understand from it. Change your title to reflect the actual issue, not the concepts involved (which can be added as tags)."},{"owner":{"account_id":195331,"reputation":275398,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":0,"creation_date":1590863045,"post_id":61939967,"comment_id":109844662,"body_markdown":"Include the entire error message. Assuming you&#39;re compiling this in Intellij, the message continues in both the &quot;Quick Fixes&quot; subtab and in the &quot;Build&quot; window. If you&#39;re not compiling in Intellij, include the entire error message you&#39;re seeing from `javac` or the entire error message you&#39;re seeing in Eclipse (or whatever else compiler you&#39;re using).","body":"Include the entire error message. Assuming you&#39;re compiling this in Intellij, the message continues in both the &quot;Quick Fixes&quot; subtab and in the &quot;Build&quot; window. If you&#39;re not compiling in Intellij, include the entire error message you&#39;re seeing from <code>javac</code> or the entire error message you&#39;re seeing in Eclipse (or whatever else compiler you&#39;re using)."},{"owner":{"display_name":"user13120093"},"score":0,"creation_date":1590863206,"post_id":61939967,"comment_id":109844731,"body_markdown":"I never compiled it originally otherwise I would have known the actual cause lol","body":"I never compiled it originally otherwise I would have known the actual cause lol"}],"answers":[{"tags":[],"owner":{"account_id":7810904,"reputation":12490,"user_id":6099347,"accept_rate":100,"display_name":"Aniket Sahrawat"},"down_vote_count":0,"up_vote_count":19,"is_accepted":true,"score":19,"last_activity_date":1693388440,"creation_date":1590081258,"answer_id":61940033,"question_id":61939967,"body_markdown":"This is a *preview feature* in Java 14, see [JEP 305](https://openjdk.java.net/jeps/305) and [JEP 375](https://openjdk.java.net/jeps/375). To enable this, compile your class with:\r\n\r\n    javac MainClass.java --enable-preview --release 14\r\n\r\nAnd now you can do:\r\n\r\n    java MainClass --enable-preview\r\n\r\nExample of `instanceof`:\r\n\r\n    Object o = &quot;Hello World!&quot;;\r\n    if (o instanceof String s) {\r\n        // no explicit type casting\r\n        s = s.replaceFirst(&quot;World&quot;, &quot;Java&quot;); // No compile time issues\r\n        System.out.println(s);\r\n    }\r\n\r\nAnother example copied from JEP:\r\n\r\n    if (obj instanceof String s &amp;&amp; s.length() &gt; 5) {.. s.contains(..) ..}\r\n\r\n---\r\n# UPDATE\r\nSince Java 16 the &quot;*Pattern Matching for instanceof*&quot; is a fully finalized feature (i.e. not a preview anymore). So when using Java 16 or newer there is no need to separately enable this feature as it will be enabled out of the box.\r\n\r\nSee [**JEP-394**][1] for the details.\r\n\r\n\r\n  [1]: https://openjdk.org/jeps/394","title":"Pattern matching instanceof","body":"<p>This is a <em>preview feature</em> in Java 14, see <a href=\"https://openjdk.java.net/jeps/305\" rel=\"nofollow noreferrer\">JEP 305</a> and <a href=\"https://openjdk.java.net/jeps/375\" rel=\"nofollow noreferrer\">JEP 375</a>. To enable this, compile your class with:</p>\n<pre><code>javac MainClass.java --enable-preview --release 14\n</code></pre>\n<p>And now you can do:</p>\n<pre><code>java MainClass --enable-preview\n</code></pre>\n<p>Example of <code>instanceof</code>:</p>\n<pre><code>Object o = &quot;Hello World!&quot;;\nif (o instanceof String s) {\n    // no explicit type casting\n    s = s.replaceFirst(&quot;World&quot;, &quot;Java&quot;); // No compile time issues\n    System.out.println(s);\n}\n</code></pre>\n<p>Another example copied from JEP:</p>\n<pre><code>if (obj instanceof String s &amp;&amp; s.length() &gt; 5) {.. s.contains(..) ..}\n</code></pre>\n<hr />\n<h1>UPDATE</h1>\n<p>Since Java 16 the &quot;<em>Pattern Matching for instanceof</em>&quot; is a fully finalized feature (i.e. not a preview anymore). So when using Java 16 or newer there is no need to separately enable this feature as it will be enabled out of the box.</p>\n<p>See <a href=\"https://openjdk.org/jeps/394\" rel=\"nofollow noreferrer\"><strong>JEP-394</strong></a> for the details.</p>\n"},{"tags":[],"owner":{"account_id":23027967,"reputation":531,"user_id":17147888,"display_name":"Praj"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1634967423,"creation_date":1634967423,"answer_id":69685433,"question_id":61939967,"body_markdown":"This feature is finalized in Java 16 ([JEP 394][1]). \r\nFor the below versions, refer [this][2] link to enable this preview feature from IDEs such as IntelliJ, Eclipse, and STS.\r\n\r\n\r\n  [1]: https://openjdk.java.net/jeps/394\r\n  [2]: https://tedblob.com/java-pattern-matching-instanceof/","title":"Pattern matching instanceof","body":"<p>This feature is finalized in Java 16 (<a href=\"https://openjdk.java.net/jeps/394\" rel=\"nofollow noreferrer\">JEP 394</a>).\nFor the below versions, refer <a href=\"https://tedblob.com/java-pattern-matching-instanceof/\" rel=\"nofollow noreferrer\">this</a> link to enable this preview feature from IDEs such as IntelliJ, Eclipse, and STS.</p>\n"}],"owner":{"display_name":"user13120093"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5544,"favorite_count":0,"down_vote_count":5,"up_vote_count":12,"accepted_answer_id":61940033,"answer_count":2,"score":7,"last_activity_date":1693388440,"creation_date":1590081032,"question_id":61939967,"body_markdown":"I came across this amazing topic on https://www.baeldung.com/java-pattern-matching-instanceof. But when I try to run the following code, it throws compile time error:\r\n\r\n    if(obj instanceof String s) {\r\n        System.out.println(s);\r\n    }\r\n\r\nThe error says:\r\n\r\n&gt; Patterns in &#39;instanceof&#39; are not supported at language level &#39;14&#39;\r\n\r\n&gt; Error:(36, 34) java: pattern matching in instanceof is a preview feature and is disabled by default.\r\n  (use --enable-preview to enable pattern matching in instanceof)\r\n\r\nBut I have Java 14 installed.","title":"Pattern matching instanceof","body":"<p>I came across this amazing topic on <a href=\"https://www.baeldung.com/java-pattern-matching-instanceof\" rel=\"noreferrer\">https://www.baeldung.com/java-pattern-matching-instanceof</a>. But when I try to run the following code, it throws compile time error:</p>\n\n<pre><code>if(obj instanceof String s) {\n    System.out.println(s);\n}\n</code></pre>\n\n<p>The error says:</p>\n\n<blockquote>\n  <p>Patterns in 'instanceof' are not supported at language level '14'</p>\n  \n  <p>Error:(36, 34) java: pattern matching in instanceof is a preview feature and is disabled by default.\n    (use --enable-preview to enable pattern matching in instanceof)</p>\n</blockquote>\n\n<p>But I have Java 14 installed.</p>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":16435976,"reputation":162,"user_id":11873562,"display_name":"IceMajor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693388200,"creation_date":1693388200,"answer_id":77006765,"question_id":76987269,"body_markdown":"The problem, as usual, turned out to be a little more complicated.\r\n\r\nAs you may have noticed by the `@Import(DisabledVaadinContext.class)` annotation, I use Vaadin in this project. In the tests, however, Vaadin is useless most of the time. Vaadin is also time-consuming at launch and disabling it makes Spring Boot context reload about 5-7 seconds faster.\r\n\r\nWhen this configuration class was not used, then the tests would run perfectly fine, but much, much longer.\r\n\r\nThe `DisabledVaadinContext` class looked like this:\r\n```\r\n@EnableAutoConfiguration(exclude = {\r\n        VaadinScopesConfig.class,\r\n        SpringBootAutoConfiguration.class,\r\n        SpringSecurityAutoConfiguration.class\r\n})\r\npublic class DisabledVaadinContext {\r\n\r\n    @MockBean\r\n    private AuthController authController;\r\n\r\n    @MockBean\r\n    private AuthService authService;\r\n\r\n    @MockBean\r\n    private SecurityVaadinConfig securityVaadinConfig;\r\n}\r\n```\r\nI was playing around with the MockBeans a lot and finally figured out that this, incredibly simple, config worked:\r\n```\r\n@EnableAutoConfiguration(exclude = {\r\n        VaadinScopesConfig.class,\r\n        SpringBootAutoConfiguration.class,\r\n        SpringSecurityAutoConfiguration.class\r\n})\r\npublic class DisabledVaadinContext {\r\n\r\n    @MockBean\r\n    SecurityVaadinConfig securityVaadinConfig;\r\n}\r\n```\r\nOnce, I&#39;ve got the tests running again, I had still not solved the original problem: disabling the actual security. Well... not the entire Spring Security module, but just to the point where I do not have to be authenticated in order to access any endpoint in the tests.\r\n\r\nThe following profile works just fine for my needs.\r\n```\r\n@Configuration\r\n@Primary\r\n@EnableWebSecurity\r\n@EnableMethodSecurity(prePostEnabled = false)\r\n@Profile(&quot;no-security&quot;)\r\npublic class NoSecurityConfig {\r\n\r\n    @Bean\r\n    @Primary\r\n    @Order(Ordered.HIGHEST_PRECEDENCE - 8)\r\n    public SecurityFilterChain securityFilterChain2(HttpSecurity http) throws Exception {\r\n        http\r\n                .csrf(csrf -&gt; csrf.disable())\r\n                .authorizeHttpRequests((auth) -&gt; auth\r\n                        .requestMatchers(&quot;/**&quot;).permitAll()\r\n                        .anyRequest().permitAll());\r\n        return http.build();\r\n    }\r\n}\r\n```","title":"Disable Spring Security for testing","body":"<p>The problem, as usual, turned out to be a little more complicated.</p>\n<p>As you may have noticed by the <code>@Import(DisabledVaadinContext.class)</code> annotation, I use Vaadin in this project. In the tests, however, Vaadin is useless most of the time. Vaadin is also time-consuming at launch and disabling it makes Spring Boot context reload about 5-7 seconds faster.</p>\n<p>When this configuration class was not used, then the tests would run perfectly fine, but much, much longer.</p>\n<p>The <code>DisabledVaadinContext</code> class looked like this:</p>\n<pre><code>@EnableAutoConfiguration(exclude = {\n        VaadinScopesConfig.class,\n        SpringBootAutoConfiguration.class,\n        SpringSecurityAutoConfiguration.class\n})\npublic class DisabledVaadinContext {\n\n    @MockBean\n    private AuthController authController;\n\n    @MockBean\n    private AuthService authService;\n\n    @MockBean\n    private SecurityVaadinConfig securityVaadinConfig;\n}\n</code></pre>\n<p>I was playing around with the MockBeans a lot and finally figured out that this, incredibly simple, config worked:</p>\n<pre><code>@EnableAutoConfiguration(exclude = {\n        VaadinScopesConfig.class,\n        SpringBootAutoConfiguration.class,\n        SpringSecurityAutoConfiguration.class\n})\npublic class DisabledVaadinContext {\n\n    @MockBean\n    SecurityVaadinConfig securityVaadinConfig;\n}\n</code></pre>\n<p>Once, I've got the tests running again, I had still not solved the original problem: disabling the actual security. Well... not the entire Spring Security module, but just to the point where I do not have to be authenticated in order to access any endpoint in the tests.</p>\n<p>The following profile works just fine for my needs.</p>\n<pre><code>@Configuration\n@Primary\n@EnableWebSecurity\n@EnableMethodSecurity(prePostEnabled = false)\n@Profile(&quot;no-security&quot;)\npublic class NoSecurityConfig {\n\n    @Bean\n    @Primary\n    @Order(Ordered.HIGHEST_PRECEDENCE - 8)\n    public SecurityFilterChain securityFilterChain2(HttpSecurity http) throws Exception {\n        http\n                .csrf(csrf -&gt; csrf.disable())\n                .authorizeHttpRequests((auth) -&gt; auth\n                        .requestMatchers(&quot;/**&quot;).permitAll()\n                        .anyRequest().permitAll());\n        return http.build();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":16435976,"reputation":162,"user_id":11873562,"display_name":"IceMajor"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":144,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1693388200,"creation_date":1693141826,"question_id":76987269,"body_markdown":"I&#39;d like to create a Spring profile called `no-security`. As the name suggests, this profile would &quot;disable&quot; (disable may come in different forms, i.e. auto-configuration exclusion or permiting all requests) security.\r\n\r\nI have my endpoints secured in 2 ways. When the endpoint requests body - `@RequestBody` - then I secure it in the Security Config class using, for instance, `.requestMatchers(SOME_METHOD,SOME_ENDPOINT).hasAnyAuthority(ACCOUNTANT_AUTHORITIES)`. If the endpoint does not require a body, then it&#39;s secured using `@PreAuthorize` annotations.\r\n\r\nNow, when the tests are being executed, I want both forms of authorization to become disabled.\r\n\r\nI&#39;ve been playing around with that for an hour or so and I seem to be stuck. Here&#39;s the main, production class:\r\n```\r\n@Configuration\r\n@EnableWebSecurity\r\n@EnableMethodSecurity(prePostEnabled = true)\r\n@RequiredArgsConstructor\r\npublic class SecurityConfig {\r\n\r\n    private final RestAuthenticationEntryPoint authenticationEntryPoint;\r\n\r\n    private final JwtAuthenticationFilter jwtAuthenticationFilter;\r\n\r\n    private final CookieAuthenticationFilter cookieAuthenticationFilter;\r\n\r\n    private final AuthenticationProvider authenticationProvider;\r\n\r\n    private static final String[] ACCOUNTANT_AUTHORITIES = new String[]{&quot;ADMIN&quot;, &quot;ACCOUNTANT&quot;};\r\n\r\n    @Bean\r\n    @Order(Ordered.HIGHEST_PRECEDENCE + 8)\r\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n        http\r\n                .httpBasic(httpBasic -&gt; httpBasic\r\n                        .authenticationEntryPoint(authenticationEntryPoint))\r\n                .exceptionHandling(excHandler -&gt; excHandler\r\n                        .authenticationEntryPoint(authenticationEntryPoint)\r\n                        .accessDeniedHandler(authenticationEntryPoint))\r\n                .formLogin((form) -&gt; form\r\n                        .loginPage(&quot;/login&quot;)\r\n                        .permitAll())\r\n                .csrf(csrf -&gt; csrf.disable())\r\n                .authorizeHttpRequests((auth) -&gt; auth\r\n                        .requestMatchers(&quot;/api/auth/**&quot;).permitAll()\r\n                        .requestMatchers(&quot;/error&quot;).permitAll()\r\n                        // secured endpoints that request a valid body\r\n                        // needs to be specified below\r\n                        .requestMatchers(HttpMethod.POST, &quot;/api/entity&quot;).hasAnyAuthority(ACCOUNTANT_AUTHORITIES)\r\n                        // ... more endpoints\r\n                        .anyRequest().permitAll())\r\n                .sessionManagement(sessionManager -&gt; sessionManager\r\n                        .sessionCreationPolicy(SessionCreationPolicy.STATELESS))\r\n                .authenticationProvider(authenticationProvider)\r\n                .addFilterBefore(jwtAuthenticationFilter, UsernamePasswordAuthenticationFilter.class)\r\n                .addFilterBefore(cookieAuthenticationFilter, JwtAuthenticationFilter.class);\r\n        return http.build();\r\n    }\r\n}\r\n```\r\nNow, in the `test` folder I specified another security configuration class with `SecurityFilterChain` bean overriden (I&#39;ve enabled bean overriding for tests).\r\n```\r\n@Configuration\r\n@EnableWebSecurity\r\n@Profile(&quot;no-security&quot;)\r\n@EnableMethodSecurity(prePostEnabled = false)\r\npublic class DisabledSecurityConfig {\r\n\r\n    @MockBean\r\n    JwtAuthenticationFilter jwtAuthenticationFilter;\r\n\r\n    @MockBean\r\n    CookieAuthenticationFilter cookieAuthenticationFilter;\r\n\r\n    @MockBean\r\n    AuthenticationProvider authenticationProvider;\r\n\r\n    @MockBean\r\n    RestAuthenticationEntryPoint authenticationEntryPoint;\r\n\r\n    @Bean\r\n    @Primary\r\n    public SecurityFilterChain securityFilterChain2(HttpSecurity http) throws Exception {\r\n        http\r\n                .csrf(csrf -&gt; csrf.disable())\r\n                .authorizeHttpRequests((auth) -&gt; auth\r\n                        .anyRequest().permitAll()\r\n                );\r\n        return http.build();\r\n    }\r\n}\r\n```\r\nAnd here&#39;s an example of a call to my Rest API:\r\n```\r\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\r\n@Import({DisabledVaadinContext.class})\r\n@ActiveProfiles({&quot;main&quot;, &quot;no-security&quot;})\r\n@TestClassOrder(ClassOrderer.Random.class)\r\npublic class Test {\r\n\r\n    @Autowired\r\n    TestRestTemplate testRestTemplate;\r\n\r\n    @Test\r\n    void simpleTest() {\r\n        ResponseEntity&lt;String&gt; response = testRestTemplate\r\n\t\t\t\t.exchange(&quot;/api/entity&quot;, HttpMethod.DELETE, null, String.class);\r\n\t\tString body = response.getBody();\r\n\t\tHttpStatusCode code = response.getStatusCode();\r\n\t\tSystem.out.println(response.getBody());\r\n\t\tSystem.out.println(response.getStatusCode());\r\n\t\tassertThat(body).isEqualTo(EXPECTED_BODY);\r\n\t\tassertThat(code).isEqualTo(200);\r\n    }\r\n}\r\n```\r\nI always end up with `200 OK` and null response body. How do I get this disabling thing working? I&#39;d welcome any suggestions and explanations! :)","title":"Disable Spring Security for testing","body":"<p>I'd like to create a Spring profile called <code>no-security</code>. As the name suggests, this profile would &quot;disable&quot; (disable may come in different forms, i.e. auto-configuration exclusion or permiting all requests) security.</p>\n<p>I have my endpoints secured in 2 ways. When the endpoint requests body - <code>@RequestBody</code> - then I secure it in the Security Config class using, for instance, <code>.requestMatchers(SOME_METHOD,SOME_ENDPOINT).hasAnyAuthority(ACCOUNTANT_AUTHORITIES)</code>. If the endpoint does not require a body, then it's secured using <code>@PreAuthorize</code> annotations.</p>\n<p>Now, when the tests are being executed, I want both forms of authorization to become disabled.</p>\n<p>I've been playing around with that for an hour or so and I seem to be stuck. Here's the main, production class:</p>\n<pre><code>@Configuration\n@EnableWebSecurity\n@EnableMethodSecurity(prePostEnabled = true)\n@RequiredArgsConstructor\npublic class SecurityConfig {\n\n    private final RestAuthenticationEntryPoint authenticationEntryPoint;\n\n    private final JwtAuthenticationFilter jwtAuthenticationFilter;\n\n    private final CookieAuthenticationFilter cookieAuthenticationFilter;\n\n    private final AuthenticationProvider authenticationProvider;\n\n    private static final String[] ACCOUNTANT_AUTHORITIES = new String[]{&quot;ADMIN&quot;, &quot;ACCOUNTANT&quot;};\n\n    @Bean\n    @Order(Ordered.HIGHEST_PRECEDENCE + 8)\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        http\n                .httpBasic(httpBasic -&gt; httpBasic\n                        .authenticationEntryPoint(authenticationEntryPoint))\n                .exceptionHandling(excHandler -&gt; excHandler\n                        .authenticationEntryPoint(authenticationEntryPoint)\n                        .accessDeniedHandler(authenticationEntryPoint))\n                .formLogin((form) -&gt; form\n                        .loginPage(&quot;/login&quot;)\n                        .permitAll())\n                .csrf(csrf -&gt; csrf.disable())\n                .authorizeHttpRequests((auth) -&gt; auth\n                        .requestMatchers(&quot;/api/auth/**&quot;).permitAll()\n                        .requestMatchers(&quot;/error&quot;).permitAll()\n                        // secured endpoints that request a valid body\n                        // needs to be specified below\n                        .requestMatchers(HttpMethod.POST, &quot;/api/entity&quot;).hasAnyAuthority(ACCOUNTANT_AUTHORITIES)\n                        // ... more endpoints\n                        .anyRequest().permitAll())\n                .sessionManagement(sessionManager -&gt; sessionManager\n                        .sessionCreationPolicy(SessionCreationPolicy.STATELESS))\n                .authenticationProvider(authenticationProvider)\n                .addFilterBefore(jwtAuthenticationFilter, UsernamePasswordAuthenticationFilter.class)\n                .addFilterBefore(cookieAuthenticationFilter, JwtAuthenticationFilter.class);\n        return http.build();\n    }\n}\n</code></pre>\n<p>Now, in the <code>test</code> folder I specified another security configuration class with <code>SecurityFilterChain</code> bean overriden (I've enabled bean overriding for tests).</p>\n<pre><code>@Configuration\n@EnableWebSecurity\n@Profile(&quot;no-security&quot;)\n@EnableMethodSecurity(prePostEnabled = false)\npublic class DisabledSecurityConfig {\n\n    @MockBean\n    JwtAuthenticationFilter jwtAuthenticationFilter;\n\n    @MockBean\n    CookieAuthenticationFilter cookieAuthenticationFilter;\n\n    @MockBean\n    AuthenticationProvider authenticationProvider;\n\n    @MockBean\n    RestAuthenticationEntryPoint authenticationEntryPoint;\n\n    @Bean\n    @Primary\n    public SecurityFilterChain securityFilterChain2(HttpSecurity http) throws Exception {\n        http\n                .csrf(csrf -&gt; csrf.disable())\n                .authorizeHttpRequests((auth) -&gt; auth\n                        .anyRequest().permitAll()\n                );\n        return http.build();\n    }\n}\n</code></pre>\n<p>And here's an example of a call to my Rest API:</p>\n<pre><code>@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\n@Import({DisabledVaadinContext.class})\n@ActiveProfiles({&quot;main&quot;, &quot;no-security&quot;})\n@TestClassOrder(ClassOrderer.Random.class)\npublic class Test {\n\n    @Autowired\n    TestRestTemplate testRestTemplate;\n\n    @Test\n    void simpleTest() {\n        ResponseEntity&lt;String&gt; response = testRestTemplate\n                .exchange(&quot;/api/entity&quot;, HttpMethod.DELETE, null, String.class);\n        String body = response.getBody();\n        HttpStatusCode code = response.getStatusCode();\n        System.out.println(response.getBody());\n        System.out.println(response.getStatusCode());\n        assertThat(body).isEqualTo(EXPECTED_BODY);\n        assertThat(code).isEqualTo(200);\n    }\n}\n</code></pre>\n<p>I always end up with <code>200 OK</code> and null response body. How do I get this disabling thing working? I'd welcome any suggestions and explanations! :)</p>\n"},{"tags":["java","hibernate","hibernate-envers","hibernate-annotations","creation-timestamp"],"owner":{"account_id":1956083,"reputation":4432,"user_id":1759063,"accept_rate":53,"display_name":"Eljah"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693387738,"creation_date":1693387738,"question_id":77006699,"body_markdown":"We have an audit schema and `Hibernate enver` to audit the data:\r\n\r\n    spring:\r\n     jpa:\r\n      org:\r\n        hibernate:\r\n          envers:\r\n            default_schema: audit\r\n\r\nand here are the anoontations.\r\n\r\nBaseEntity:\r\n\r\n    @Data\r\n    @MappedSuperclass\r\n    @EqualsAndHashCode(of = {&quot;id&quot;})\r\n    public abstract class BaseEntity implements Serializable {\r\n    \r\n        @Id\r\n        @GeneratedValue(generator = &quot;UUID&quot;)\r\n        @GenericGenerator(name = &quot;UUID&quot;, strategy = &quot;org.hibernate.id.UUIDGenerator&quot;\r\n                ,parameters = {\r\n                @Parameter( name = &quot;uuid_gen_strategy_class&quot;, value = &quot;org.hibernate.id.uuid.CustomVersionOneStrategy&quot;)\r\n        })\r\n        @Column(name=&quot;id&quot;, updatable = false, nullable = false, columnDefinition = &quot;uuid&quot;)\r\n        private UUID id;\r\n    \r\n    \r\n        @CreationTimestamp\r\n        @Temporal(TemporalType.TIMESTAMP)\r\n        @Column(name = &quot;created_at&quot;, updatable = false, nullable = false)\r\n        private Date createdAt;    \r\n    }\r\n\r\nother entities extend it, as well as the audit set up on it too.\r\n\r\nSay, Contractor entity:\r\n\r\n    @Data\r\n    @NoArgsConstructor\r\n    @Entity\r\n    @Audited\r\n    @AuditTable(schema = &quot;audit&quot;, value = &quot;contractor&quot;)\r\n    @AuditOverride(forClass = BaseEntity.class, isAudited = true)\r\n    @Table(name = &quot;contractor&quot;, uniqueConstraints = {@UniqueConstraint(name = &quot;contractor_upi_uq&quot;, columnNames = {&quot;upi&quot;})})\r\n    @org.hibernate.annotations.Table(comment = &quot;Contractor data&quot;, appliesTo = &quot;contractor&quot;)\r\n    @EqualsAndHashCode(of = {}, callSuper = true)\r\n    @ToString(exclude = {&quot;contract&quot;, &quot;billingAccount&quot;, &quot;legalForm&quot;, &quot;services&quot;, &quot;contractorType&quot;, &quot;serviceGroups&quot;})\r\n    @JsonIgnoreProperties(value = {&quot;contract&quot;, &quot;billingAccount&quot;, &quot;legalForm&quot;, &quot;services&quot;, &quot;contractorType&quot;, &quot;serviceGroups&quot;})\r\n    public class Contractor extends BaseEntity {    \r\n    //specific fields are ommited as the problem are related to the field from the Base entity    \r\n    }\r\n\r\nor ServiceOrder entity\r\n\r\n    @Data\r\n    @NoArgsConstructor\r\n    @Entity\r\n    @Audited\r\n    @AuditTable(schema = &quot;audit&quot;, value = &quot;services_order&quot;)\r\n    @AuditOverride(forClass = BaseEntity.class, isAudited = true)\r\n    @Table(name = &quot;services_order&quot;)\r\n    @org.hibernate.annotations.Table(comment = &quot;Services order&quot;, appliesTo = &quot;services_order&quot;)\r\n    @EqualsAndHashCode(of = {}, callSuper = true)\r\n    @ToString\r\n    @JsonIgnoreProperties\r\n    public class ServicesOrder  extends BaseEntity {\r\n    //the same for the internals of this entity\r\n    }\r\n\r\nWe notices, that the entities of the same time of creation have different `created_at` values, for example: \r\n\r\n[![enter image description here][1]][1]\r\n\r\nThe `created_at` column has type `timestamp without timezone`, for some entries it was in the local timezone, while in others +3h, in others -3h (our timezone is +3 UTC).\r\n\r\nThat happened on UAT db, but never happened on dev db, where all entries are from the same time.\r\n\r\nI tired to find what the problem correlates with and have fount that despite the `created_at` has the same `timestamp without timezone` for the different tables of the main `public` schema, the same and corresponding `created_at` field has different type in audit `schema` for some tables. If the audit&#39;s field has type  `timestamp without timezone`, the date in the field of the main schema is as expected and fits the local timezone time. If the `audit` schema&#39;s field created_at has type  `timestamp with timezone`, the value in the main `public` schema&#39;s is -3 h (not as expected).\r\n\r\n[![enter image description here][2]][2] \r\n\r\nWhat could be the real reason for that? Does @CreationTimestamp really interacts with the enver and audit table before produce the output date to the main schema table? Is there a way to work this around not even touching the audit schema&gt;\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/5NHCz.png\r\n  [2]: https://i.stack.imgur.com/nIlSL.png","title":"How Hibernate&#39;s enver @AuditTable and @CreationTimestamp and different date format for main and public schema cause wrong values in the main schema?","body":"<p>We have an audit schema and <code>Hibernate enver</code> to audit the data:</p>\n<pre><code>spring:\n jpa:\n  org:\n    hibernate:\n      envers:\n        default_schema: audit\n</code></pre>\n<p>and here are the anoontations.</p>\n<p>BaseEntity:</p>\n<pre><code>@Data\n@MappedSuperclass\n@EqualsAndHashCode(of = {&quot;id&quot;})\npublic abstract class BaseEntity implements Serializable {\n\n    @Id\n    @GeneratedValue(generator = &quot;UUID&quot;)\n    @GenericGenerator(name = &quot;UUID&quot;, strategy = &quot;org.hibernate.id.UUIDGenerator&quot;\n            ,parameters = {\n            @Parameter( name = &quot;uuid_gen_strategy_class&quot;, value = &quot;org.hibernate.id.uuid.CustomVersionOneStrategy&quot;)\n    })\n    @Column(name=&quot;id&quot;, updatable = false, nullable = false, columnDefinition = &quot;uuid&quot;)\n    private UUID id;\n\n\n    @CreationTimestamp\n    @Temporal(TemporalType.TIMESTAMP)\n    @Column(name = &quot;created_at&quot;, updatable = false, nullable = false)\n    private Date createdAt;    \n}\n</code></pre>\n<p>other entities extend it, as well as the audit set up on it too.</p>\n<p>Say, Contractor entity:</p>\n<pre><code>@Data\n@NoArgsConstructor\n@Entity\n@Audited\n@AuditTable(schema = &quot;audit&quot;, value = &quot;contractor&quot;)\n@AuditOverride(forClass = BaseEntity.class, isAudited = true)\n@Table(name = &quot;contractor&quot;, uniqueConstraints = {@UniqueConstraint(name = &quot;contractor_upi_uq&quot;, columnNames = {&quot;upi&quot;})})\n@org.hibernate.annotations.Table(comment = &quot;Contractor data&quot;, appliesTo = &quot;contractor&quot;)\n@EqualsAndHashCode(of = {}, callSuper = true)\n@ToString(exclude = {&quot;contract&quot;, &quot;billingAccount&quot;, &quot;legalForm&quot;, &quot;services&quot;, &quot;contractorType&quot;, &quot;serviceGroups&quot;})\n@JsonIgnoreProperties(value = {&quot;contract&quot;, &quot;billingAccount&quot;, &quot;legalForm&quot;, &quot;services&quot;, &quot;contractorType&quot;, &quot;serviceGroups&quot;})\npublic class Contractor extends BaseEntity {    \n//specific fields are ommited as the problem are related to the field from the Base entity    \n}\n</code></pre>\n<p>or ServiceOrder entity</p>\n<pre><code>@Data\n@NoArgsConstructor\n@Entity\n@Audited\n@AuditTable(schema = &quot;audit&quot;, value = &quot;services_order&quot;)\n@AuditOverride(forClass = BaseEntity.class, isAudited = true)\n@Table(name = &quot;services_order&quot;)\n@org.hibernate.annotations.Table(comment = &quot;Services order&quot;, appliesTo = &quot;services_order&quot;)\n@EqualsAndHashCode(of = {}, callSuper = true)\n@ToString\n@JsonIgnoreProperties\npublic class ServicesOrder  extends BaseEntity {\n//the same for the internals of this entity\n}\n</code></pre>\n<p>We notices, that the entities of the same time of creation have different <code>created_at</code> values, for example:</p>\n<p><a href=\"https://i.stack.imgur.com/5NHCz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5NHCz.png\" alt=\"enter image description here\" /></a></p>\n<p>The <code>created_at</code> column has type <code>timestamp without timezone</code>, for some entries it was in the local timezone, while in others +3h, in others -3h (our timezone is +3 UTC).</p>\n<p>That happened on UAT db, but never happened on dev db, where all entries are from the same time.</p>\n<p>I tired to find what the problem correlates with and have fount that despite the <code>created_at</code> has the same <code>timestamp without timezone</code> for the different tables of the main <code>public</code> schema, the same and corresponding <code>created_at</code> field has different type in audit <code>schema</code> for some tables. If the audit's field has type  <code>timestamp without timezone</code>, the date in the field of the main schema is as expected and fits the local timezone time. If the <code>audit</code> schema's field created_at has type  <code>timestamp with timezone</code>, the value in the main <code>public</code> schema's is -3 h (not as expected).</p>\n<p><a href=\"https://i.stack.imgur.com/nIlSL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nIlSL.png\" alt=\"enter image description here\" /></a></p>\n<p>What could be the real reason for that? Does @CreationTimestamp really interacts with the enver and audit table before produce the output date to the main schema table? Is there a way to work this around not even touching the audit schema&gt;</p>\n"},{"tags":["java","oracle","jdeveloper"],"owner":{"account_id":27316723,"reputation":42,"user_id":20837394,"display_name":"Yevgeniy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693387607,"creation_date":1693299368,"question_id":76998735,"body_markdown":"Such a problem, I work in Oracle JDeveloper, version 12.2.1.0.0\r\nI have implemented a global search across all database tables. There are search fields i.e. search options. When I make a search query by parameters, records are returned to me - everything is fine. When I sort these records by some field and click reset search parameters, why the query does not work correctly and instead of just clearing the search parameters, it also displays all records from all tables. How to fix it? The code for my reset method is shown below.\r\n\r\nBean class:\r\n\r\n    public void gsearchQueryOperationListener(QueryOperationEvent queryOperationEvent){\r\n        if(queryOperationEvent.getOperation().name().toUpperCase().equals(&quot;RESET&quot;)){\r\n            ViewObject object = ADFUtils.findIterator(&quot;GeneralSearchV1Iterator&quot;).getViewObject();\r\n            object.executeEmptyRowSet();\r\n            oracle.jbo.ViewCriteria criteria = ADFUtils.findIterator(&quot;GeneralSearchV1Iterator&quot;).getViewCriteria();\r\n            object.applyViewCriteria(criteria);\r\n            result = false;\r\n        }\r\n    }\r\n\r\n\r\n.jsff class\r\n \r\n```\r\n&lt;af:panelGroupLayout id=&quot;pgl1&quot;&gt;\r\n        &lt;!--&lt;af:panelHeader text=&quot;Global search&quot; id=&quot;ph1&quot;/&gt;--&gt;\r\n        &lt;af:query id=&quot;gsearchQ&quot; headerText=&quot;Global search&quot; disclosed=&quot;true&quot;\r\n                  value=&quot;#{bindings.GeneralSearchVCriteriaQuery.queryDescriptor}&quot;\r\n                  model=&quot;#{bindings.GeneralSearchVCriteriaQuery.queryModel}&quot;\r\n                  queryListener=&quot;#{pageFlowScope.GSearchBean.gsearchQueryListener}&quot;\r\n                  queryOperationListener=&quot;#{pageFlowScope.GSearchBean.gsearchQueryOperationListener}&quot;\r\n                  partialTriggers=&quot;::t1:c4 ::t1:c18 ::t1&quot;\r\n                  saveQueryMode=&quot;hidden&quot; maxColumns=&quot;2&quot; rows=&quot;3&quot; modeChangeVisible=&quot;false&quot; resultComponentId=&quot;::t1&quot;/&gt;\r\n                  &lt;!--queryListener=&quot;#{pageFlowScope.GSearchBean.gsearchQueryListener}&quot;--&gt;\r\n                  &lt;!--queryOperationListener=&quot;#{pageFlowScope.GSearchBean.gsearchQueryOperationListener}&quot;--&gt;\r\n        &lt;af:table value=&quot;#{bindings.GeneralSearchV1.collectionModel}&quot; var=&quot;row&quot;\r\n                  rows=&quot;#{bindings.GeneralSearchV1.rangeSize}&quot; fetchSize=&quot;#{bindings.GeneralSearchV1.rangeSize}&quot;\r\n                  emptyText=&quot;&quot; id=&quot;t1&quot;\r\n                  autoHeightRows=&quot;10&quot; rowBandingInterval=&quot;0&quot; styleClass=&quot;AFStretchWidth&quot; columnStretching=&quot;last&quot;\r\n                  disableColumnReordering=&quot;true&quot; scrollPolicy=&quot;page&quot;&gt;\r\n```\r\n\r\nI tried to somehow fix it, but I did not succeed. Here is my code which i have tried\r\n\r\n```\r\n    public void gsearchQueryOperationListener(QueryOperationEvent queryOperationEvent){\r\n            if(queryOperationEvent.getOperation().name().toUpperCase().equals(&quot;RESET&quot;)){\r\n                       \r\n                log.info(&quot;STEP 1:&quot;);\r\n\r\n            ViewObject object = ADFUtils.findIterator(&quot;GeneralSearchV1Iterator&quot;).getViewObject();\r\n                       \r\n                       RichQuery queryComp1 = (RichQuery) UIComponentUtil.findComponent(&quot;gsearchQ&quot;);\r\n                       log.info(&quot;queryComp1.getAttributeChangeListeners(); &quot;+queryComp1.getAttributeChangeListeners());\r\n                       queryComp1.setValue(null);\r\n                       \r\n                       RichTable queryComp2 = (RichTable) UIComponentUtil.findComponent(&quot;t1&quot;);\r\n                       log.info(&quot;queryComp2.getAttributeChangeListeners(); &quot;+queryComp2.getAttributeChangeListeners());\r\n                       log.info(&quot;queryComp2.getSelectedRowKeys(); &quot;+queryComp2.getSelectedRowKeys());\r\n                       queryComp2.getSelectedRowKeys().clear(); \r\n                               queryComp2.setSelectedRowKeys(null); \r\n                               queryComp2.setValue(null);\r\n                               \r\n                     \r\n                       queryComp2.getSelectedRowKeys().clear(); \r\n                       queryComp2.setSelectedRowKeys(null); \r\n\r\n                       AdfFacesContext.getCurrentInstance().addPartialTarget(queryComp2); \r\n\r\n                        object.setOrderByClause(null);\r\n                       object.setSortBy(null);\r\n                       \r\n            object.executeEmptyRowSet();\r\n\r\n           oracle.jbo.ViewCriteria criteria = ADFUtils.findIterator(&quot;GeneralSearchV1Iterator&quot;).getViewCriteria();\r\n           object.applyViewCriteria(criteria);          \r\n            result = false;\r\n                   }\r\n```","title":"How to reset search options in Oracle JDeveloper 12.2.1.0.0","body":"<p>Such a problem, I work in Oracle JDeveloper, version 12.2.1.0.0\nI have implemented a global search across all database tables. There are search fields i.e. search options. When I make a search query by parameters, records are returned to me - everything is fine. When I sort these records by some field and click reset search parameters, why the query does not work correctly and instead of just clearing the search parameters, it also displays all records from all tables. How to fix it? The code for my reset method is shown below.</p>\n<p>Bean class:</p>\n<pre><code>public void gsearchQueryOperationListener(QueryOperationEvent queryOperationEvent){\n    if(queryOperationEvent.getOperation().name().toUpperCase().equals(&quot;RESET&quot;)){\n        ViewObject object = ADFUtils.findIterator(&quot;GeneralSearchV1Iterator&quot;).getViewObject();\n        object.executeEmptyRowSet();\n        oracle.jbo.ViewCriteria criteria = ADFUtils.findIterator(&quot;GeneralSearchV1Iterator&quot;).getViewCriteria();\n        object.applyViewCriteria(criteria);\n        result = false;\n    }\n}\n</code></pre>\n<p>.jsff class</p>\n<pre><code>&lt;af:panelGroupLayout id=&quot;pgl1&quot;&gt;\n        &lt;!--&lt;af:panelHeader text=&quot;Global search&quot; id=&quot;ph1&quot;/&gt;--&gt;\n        &lt;af:query id=&quot;gsearchQ&quot; headerText=&quot;Global search&quot; disclosed=&quot;true&quot;\n                  value=&quot;#{bindings.GeneralSearchVCriteriaQuery.queryDescriptor}&quot;\n                  model=&quot;#{bindings.GeneralSearchVCriteriaQuery.queryModel}&quot;\n                  queryListener=&quot;#{pageFlowScope.GSearchBean.gsearchQueryListener}&quot;\n                  queryOperationListener=&quot;#{pageFlowScope.GSearchBean.gsearchQueryOperationListener}&quot;\n                  partialTriggers=&quot;::t1:c4 ::t1:c18 ::t1&quot;\n                  saveQueryMode=&quot;hidden&quot; maxColumns=&quot;2&quot; rows=&quot;3&quot; modeChangeVisible=&quot;false&quot; resultComponentId=&quot;::t1&quot;/&gt;\n                  &lt;!--queryListener=&quot;#{pageFlowScope.GSearchBean.gsearchQueryListener}&quot;--&gt;\n                  &lt;!--queryOperationListener=&quot;#{pageFlowScope.GSearchBean.gsearchQueryOperationListener}&quot;--&gt;\n        &lt;af:table value=&quot;#{bindings.GeneralSearchV1.collectionModel}&quot; var=&quot;row&quot;\n                  rows=&quot;#{bindings.GeneralSearchV1.rangeSize}&quot; fetchSize=&quot;#{bindings.GeneralSearchV1.rangeSize}&quot;\n                  emptyText=&quot;&quot; id=&quot;t1&quot;\n                  autoHeightRows=&quot;10&quot; rowBandingInterval=&quot;0&quot; styleClass=&quot;AFStretchWidth&quot; columnStretching=&quot;last&quot;\n                  disableColumnReordering=&quot;true&quot; scrollPolicy=&quot;page&quot;&gt;\n</code></pre>\n<p>I tried to somehow fix it, but I did not succeed. Here is my code which i have tried</p>\n<pre><code>    public void gsearchQueryOperationListener(QueryOperationEvent queryOperationEvent){\n            if(queryOperationEvent.getOperation().name().toUpperCase().equals(&quot;RESET&quot;)){\n                       \n                log.info(&quot;STEP 1:&quot;);\n\n            ViewObject object = ADFUtils.findIterator(&quot;GeneralSearchV1Iterator&quot;).getViewObject();\n                       \n                       RichQuery queryComp1 = (RichQuery) UIComponentUtil.findComponent(&quot;gsearchQ&quot;);\n                       log.info(&quot;queryComp1.getAttributeChangeListeners(); &quot;+queryComp1.getAttributeChangeListeners());\n                       queryComp1.setValue(null);\n                       \n                       RichTable queryComp2 = (RichTable) UIComponentUtil.findComponent(&quot;t1&quot;);\n                       log.info(&quot;queryComp2.getAttributeChangeListeners(); &quot;+queryComp2.getAttributeChangeListeners());\n                       log.info(&quot;queryComp2.getSelectedRowKeys(); &quot;+queryComp2.getSelectedRowKeys());\n                       queryComp2.getSelectedRowKeys().clear(); \n                               queryComp2.setSelectedRowKeys(null); \n                               queryComp2.setValue(null);\n                               \n                     \n                       queryComp2.getSelectedRowKeys().clear(); \n                       queryComp2.setSelectedRowKeys(null); \n\n                       AdfFacesContext.getCurrentInstance().addPartialTarget(queryComp2); \n\n                        object.setOrderByClause(null);\n                       object.setSortBy(null);\n                       \n            object.executeEmptyRowSet();\n\n           oracle.jbo.ViewCriteria criteria = ADFUtils.findIterator(&quot;GeneralSearchV1Iterator&quot;).getViewCriteria();\n           object.applyViewCriteria(criteria);          \n            result = false;\n                   }\n</code></pre>\n"},{"tags":["java","android","sqlite","bitmap","out-of-memory"],"comments":[{"owner":{"account_id":21390158,"reputation":801,"user_id":15754377,"display_name":"Vivek Gupta"},"score":1,"creation_date":1693386541,"post_id":77006335,"comment_id":135752547,"body_markdown":"Always use uri for storing/retrieving images","body":"Always use uri for storing/retrieving images"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1693387980,"post_id":77006335,"comment_id":135752876,"body_markdown":"@Vivek Gupta, please explain how that would go. And explain how that would prevent OOM errors.","body":"@Vivek Gupta, please explain how that would go. And explain how that would prevent OOM errors."},{"owner":{"account_id":21390158,"reputation":801,"user_id":15754377,"display_name":"Vivek Gupta"},"score":0,"creation_date":1693397355,"post_id":77006335,"comment_id":135754849,"body_markdown":"Instead of storing raw image data, you store the path of the image in room database. OOM exceptions occurs when you try to load big images, you can use third party libraries like Glide, picasso  etc to load images in the app efficiently.","body":"Instead of storing raw image data, you store the path of the image in room database. OOM exceptions occurs when you try to load big images, you can use third party libraries like Glide, picasso  etc to load images in the app efficiently."}],"owner":{"account_id":27044422,"reputation":49,"user_id":20598818,"display_name":"Shankar Bhandari"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693387597,"creation_date":1693385091,"question_id":77006335,"body_markdown":"I&#39;ve developed a billing app that syncs items locally using a Room database for fast retrieval. Now, my client is interested in displaying images alongside the items, which are uploaded from a web domain.\r\n\r\nCurrently, I&#39;ve stored image raw data in the Room database and decoded it into bitmaps to display in the views. While this approach generally works well, I&#39;m encountering occasional Out of Memory (OOM) exceptions.\r\n\r\nHow can I efficiently manage images to avoid OOM issues while ensuring smooth integration of images from the web domain? Are there any best practices or libraries that can help with memory optimization when dealing with images in Android?","title":"what could be the best way to work with images in android specially images that are sent via api?","body":"<p>I've developed a billing app that syncs items locally using a Room database for fast retrieval. Now, my client is interested in displaying images alongside the items, which are uploaded from a web domain.</p>\n<p>Currently, I've stored image raw data in the Room database and decoded it into bitmaps to display in the views. While this approach generally works well, I'm encountering occasional Out of Memory (OOM) exceptions.</p>\n<p>How can I efficiently manage images to avoid OOM issues while ensuring smooth integration of images from the web domain? Are there any best practices or libraries that can help with memory optimization when dealing with images in Android?</p>\n"},{"tags":["java","jpa","jpa-2.0"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":2,"creation_date":1693328668,"post_id":76997729,"comment_id":135745174,"body_markdown":"@ShilaMosammami there seem to be 2 columns in the table, which should be expected accord to the JPA spec (&quot;some_table_id&quot; and &quot;values&quot;). So nothing is really wrong with it. Hibernate does funky stuff when sets are involved - maybe try a List, as it shouldn&#39;t be looking at table constraints or enforcing the table has particular constraints at all - the business side (set) makes it impossible for duplicates without the need to put overhead in the DB to enforce it.","body":"@ShilaMosammami there seem to be 2 columns in the table, which should be expected accord to the JPA spec (&quot;some_table_id&quot; and &quot;values&quot;). So nothing is really wrong with it. Hibernate does funky stuff when sets are involved - maybe try a List, as it shouldn&#39;t be looking at table constraints or enforcing the table has particular constraints at all - the business side (set) makes it impossible for duplicates without the need to put overhead in the DB to enforce it."},{"owner":{"account_id":18991005,"reputation":1312,"user_id":13860286,"display_name":"Shila Mosammami"},"score":1,"creation_date":1693387055,"post_id":76997729,"comment_id":135752661,"body_markdown":"@Chris you are right, I deleted my comment. Thanks","body":"@Chris you are right, I deleted my comment. Thanks"}],"answers":[{"tags":[],"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693387490,"creation_date":1693387490,"answer_id":77006664,"question_id":76997729,"body_markdown":"I think you must define `PRIMARY KEY` to `values_table`\r\n\r\nHere is code snippet shown below\r\n\r\n    CREATE TABLE values_table  (\r\n        id serial PRIMARY KEY, -- Add a primary key\r\n        some_table_id int NOT NULL,\r\n        values VARCHAR(500),\r\n        CONSTRAINT fk_values_table_some_table\r\n            FOREIGN KEY (some_table_id) \r\n            REFERENCES some_table(id)\r\n    );","title":"JPA ElementCollection foreign key mapping error","body":"<p>I think you must define <code>PRIMARY KEY</code> to <code>values_table</code></p>\n<p>Here is code snippet shown below</p>\n<pre><code>CREATE TABLE values_table  (\n    id serial PRIMARY KEY, -- Add a primary key\n    some_table_id int NOT NULL,\n    values VARCHAR(500),\n    CONSTRAINT fk_values_table_some_table\n        FOREIGN KEY (some_table_id) \n        REFERENCES some_table(id)\n);\n</code></pre>\n"}],"owner":{"account_id":14724841,"reputation":29,"user_id":10634215,"display_name":"GoldBug"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1693387490,"creation_date":1693289448,"question_id":76997729,"body_markdown":"My simple Entity class looks like this - \r\n\r\n\r\n```\r\nEntity\r\n@Table(name =&quot;my_class&quot;, uniqueConstraints = {@UniqueConstraint(name = &quot;AAndBAndCAndD&quot;, columnNames = { &quot;A&quot;,&quot;B&quot;,&quot;C&quot;,&quot;D&quot;}) })\r\npublic class MyClass implements Serializable {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy=GenerationType.AUTO)\r\n    private Integer id;\r\n\r\n    @Column(name = &quot;A&quot;)\r\n    private String A;\r\n\r\n    @Column(name = &quot;B&quot;)\r\n    private String B;\r\n\r\n    @Column(name = &quot;C&quot;)\r\n    private Integer C;\r\n\r\n    @Column(name = &quot;D&quot;)\r\n    private Integer D;\r\n\r\n    @Column(name = &quot;E&quot;)\r\n    private Long E;\r\n\r\n    @ElementCollection(targetClass = String.class, fetch = FetchType.EAGER)\r\n    @CollectionTable(name=&quot;values_table&quot;, joinColumns = @JoinColumn(name=&quot;some_table_id&quot;, referencedColumnName = &quot;id&quot;))\r\n    @Column(name=&quot;values&quot;)\r\n    private Set&lt;String&gt; values;\r\n\r\nAnd I created 2 tables like below - \r\n\r\nCREATE TABLE some_table (\r\n    id serial PRIMARY KEY,\r\n    A character varying(10) NOT NULL,\r\n    B character varying(10) NOT NULL,\r\n    C int NOT NULL,\r\n    D int NOT NULL,\r\n    E bigint,\r\n    UNIQUE (A,B,C,D)\r\n);\r\n\r\nCREATE TABLE values_table  (\r\n    some_table_id int NOT NULL,\r\n    values VARCHAR(500),\r\n    constraint fk_values_table_some_table\r\n    foreign key (some_table_id) \r\n    REFERENCES some_table(id)\r\n);\r\n```\r\nWhen I run it as part of a service, I see the following error\r\n\r\n&gt; Caused by: org.hibernate.MappingException: collection foreign key mapping has wrong number of columns: MyClass.values type: component[id,id]\r\n&gt; \tat org.hibernate.mapping.Collection.validate(Collection.java:309)\r\n&gt; \tat org.hibernate.mapping.Set.validate(Set.java:40)\r\n&gt; \tat org.hibernate.cfg.Configuration.validate(Configuration.java:1364)\r\n&gt; \tat org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1851)\r\n&gt; \tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl$4.perform(EntityManagerFactoryBuilderImpl.java:852)\r\n&gt; 26 more\r\n\r\nI tried different things but can&#39;t fix the error. Can anyone help me find out what&#39;s wrong with the above code? The names of the classes \r\n\r\nI tried to add an Id field to the values table but no luck. I don&#39;t understand what&#39;s wrong with the foreign key mapping.","title":"JPA ElementCollection foreign key mapping error","body":"<p>My simple Entity class looks like this -</p>\n<pre><code>Entity\n@Table(name =&quot;my_class&quot;, uniqueConstraints = {@UniqueConstraint(name = &quot;AAndBAndCAndD&quot;, columnNames = { &quot;A&quot;,&quot;B&quot;,&quot;C&quot;,&quot;D&quot;}) })\npublic class MyClass implements Serializable {\n\n    @Id\n    @GeneratedValue(strategy=GenerationType.AUTO)\n    private Integer id;\n\n    @Column(name = &quot;A&quot;)\n    private String A;\n\n    @Column(name = &quot;B&quot;)\n    private String B;\n\n    @Column(name = &quot;C&quot;)\n    private Integer C;\n\n    @Column(name = &quot;D&quot;)\n    private Integer D;\n\n    @Column(name = &quot;E&quot;)\n    private Long E;\n\n    @ElementCollection(targetClass = String.class, fetch = FetchType.EAGER)\n    @CollectionTable(name=&quot;values_table&quot;, joinColumns = @JoinColumn(name=&quot;some_table_id&quot;, referencedColumnName = &quot;id&quot;))\n    @Column(name=&quot;values&quot;)\n    private Set&lt;String&gt; values;\n\nAnd I created 2 tables like below - \n\nCREATE TABLE some_table (\n    id serial PRIMARY KEY,\n    A character varying(10) NOT NULL,\n    B character varying(10) NOT NULL,\n    C int NOT NULL,\n    D int NOT NULL,\n    E bigint,\n    UNIQUE (A,B,C,D)\n);\n\nCREATE TABLE values_table  (\n    some_table_id int NOT NULL,\n    values VARCHAR(500),\n    constraint fk_values_table_some_table\n    foreign key (some_table_id) \n    REFERENCES some_table(id)\n);\n</code></pre>\n<p>When I run it as part of a service, I see the following error</p>\n<blockquote>\n<p>Caused by: org.hibernate.MappingException: collection foreign key mapping has wrong number of columns: MyClass.values type: component[id,id]\nat org.hibernate.mapping.Collection.validate(Collection.java:309)\nat org.hibernate.mapping.Set.validate(Set.java:40)\nat org.hibernate.cfg.Configuration.validate(Configuration.java:1364)\nat org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1851)\nat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl$4.perform(EntityManagerFactoryBuilderImpl.java:852)\n26 more</p>\n</blockquote>\n<p>I tried different things but can't fix the error. Can anyone help me find out what's wrong with the above code? The names of the classes</p>\n<p>I tried to add an Id field to the values table but no luck. I don't understand what's wrong with the foreign key mapping.</p>\n"},{"tags":["java","junit","karate"],"comments":[{"owner":{"account_id":48302,"reputation":55353,"user_id":143475,"display_name":"Peter Thomas"},"score":0,"creation_date":1693390417,"post_id":77006656,"comment_id":135753429,"body_markdown":"if the linked answer does not answer your question, please contribute code","body":"if the linked answer does not answer your question, please contribute code"},{"owner":{"account_id":18326643,"reputation":443,"user_id":13346125,"display_name":"cyrilgeorge153"},"score":1,"creation_date":1693399976,"post_id":77006656,"comment_id":135755501,"body_markdown":"@Peter I was trying to get a clarity on Junit Runner and got it from your linked answer.","body":"@Peter I was trying to get a clarity on Junit Runner and got it from your linked answer."},{"owner":{"account_id":48302,"reputation":55353,"user_id":143475,"display_name":"Peter Thomas"},"score":1,"creation_date":1693400808,"post_id":77006656,"comment_id":135755700,"body_markdown":"yes, thanks. as far as I know, you should get a &quot;summary report&quot; from even the junit runner, so if it is not working, maybe karate needs fixes, but we hope others can contribute. our priority is to make sure the runner API works","body":"yes, thanks. as far as I know, you should get a &quot;summary report&quot; from even the junit runner, so if it is not working, maybe karate needs fixes, but we hope others can contribute. our priority is to make sure the runner API works"},{"owner":{"account_id":18326643,"reputation":443,"user_id":13346125,"display_name":"cyrilgeorge153"},"score":0,"creation_date":1693401252,"post_id":77006656,"comment_id":135755804,"body_markdown":"summary report is generating for junit runner when individual feature file is specified. But I have multiple feature files in com.tests package so I was trying to run all feature files by mentioning only the package name, but in this case karate summary report does not generated. So I checked with the parallel runner and it was working when package is mentioned. So I raised a question to check whether this is expected behaviour of junit runner.","body":"summary report is generating for junit runner when individual feature file is specified. But I have multiple feature files in com.tests package so I was trying to run all feature files by mentioning only the package name, but in this case karate summary report does not generated. So I checked with the parallel runner and it was working when package is mentioned. So I raised a question to check whether this is expected behaviour of junit runner."}],"owner":{"account_id":18326643,"reputation":443,"user_id":13346125,"display_name":"cyrilgeorge153"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1693390400,"answer_count":0,"score":1,"last_activity_date":1693387429,"creation_date":1693387429,"question_id":77006656,"body_markdown":"Junit5 Runner\r\n```\r\npackage com.tests;\r\n\r\nimport com.intuit.karate.junit5.Karate;\r\n\r\npublic class FakeJsonServerRunnerTest {\r\n\t@Karate.Test\r\n\tKarate testSample() {\r\n\t\treturn Karate.run(&quot;classpath:com/tests&quot;).relativeTo(getClass());\r\n\r\n\t}\r\n}\r\n\r\n```\r\n\r\nParallel Runner \r\n```\r\npackage com.tests;\r\n\r\nimport static org.junit.jupiter.api.Assertions.assertEquals;\r\n\r\nimport org.junit.jupiter.api.Test;\r\n\r\nimport com.intuit.karate.Results;\r\nimport com.intuit.karate.Runner;\r\n\r\npublic class FakeJsonServerParallelRunnerTest {\r\n\r\n\t@Test\r\n    void testParallel() {\r\n        Results results = Runner.path(&quot;classpath:com/tests&quot;)\r\n                .tags(&quot;~@ignore&quot;)\r\n                //.outputCucumberJson(true)\r\n                .parallel(9);\r\n        assertEquals(0, results.getFailCount(), results.getErrorMessages());\r\n    }\r\n}\r\n\r\n```\r\nJunit5 runner is not generating karate summary.html file in console when package path is given. Individual feature file reports is generating in target folder. Is it possible to view the summary report file in console, when package is mentioned.Same case is working for parallel runner. ","title":"Junit 5 runner not generating karate summary.html file in console when package path is given. Same case is working for parallel runner","body":"<p>Junit5 Runner</p>\n<pre><code>package com.tests;\n\nimport com.intuit.karate.junit5.Karate;\n\npublic class FakeJsonServerRunnerTest {\n    @Karate.Test\n    Karate testSample() {\n        return Karate.run(&quot;classpath:com/tests&quot;).relativeTo(getClass());\n\n    }\n}\n\n</code></pre>\n<p>Parallel Runner</p>\n<pre><code>package com.tests;\n\nimport static org.junit.jupiter.api.Assertions.assertEquals;\n\nimport org.junit.jupiter.api.Test;\n\nimport com.intuit.karate.Results;\nimport com.intuit.karate.Runner;\n\npublic class FakeJsonServerParallelRunnerTest {\n\n    @Test\n    void testParallel() {\n        Results results = Runner.path(&quot;classpath:com/tests&quot;)\n                .tags(&quot;~@ignore&quot;)\n                //.outputCucumberJson(true)\n                .parallel(9);\n        assertEquals(0, results.getFailCount(), results.getErrorMessages());\n    }\n}\n\n</code></pre>\n<p>Junit5 runner is not generating karate summary.html file in console when package path is given. Individual feature file reports is generating in target folder. Is it possible to view the summary report file in console, when package is mentioned.Same case is working for parallel runner.</p>\n"},{"tags":["java","spring","postgresql","jpa"],"comments":[{"owner":{"account_id":7427975,"reputation":537,"user_id":9862795,"display_name":"GoranLegenda"},"score":0,"creation_date":1692956852,"post_id":76975416,"comment_id":135698365,"body_markdown":"there seems to be a typo in your query - after `SELECT *` you have a comma, please remove it try again","body":"there seems to be a typo in your query - after <code>SELECT *</code> you have a comma, please remove it try again"},{"owner":{"account_id":17709408,"reputation":11,"user_id":15590004,"display_name":"niks"},"score":0,"creation_date":1692957697,"post_id":76975416,"comment_id":135698511,"body_markdown":"@GoranLegenda without a comma the query has an invalid structure","body":"@GoranLegenda without a comma the query has an invalid structure"},{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":0,"creation_date":1692958568,"post_id":76975416,"comment_id":135698689,"body_markdown":"The result of `pg_sleep(N)` for a given N is typically cached, and the function is not called every time. Try on the command line: `SELECT pg_sleep(2), pg_sleep(2)` sleeps for only 2 seconds. But `SELECT pg_sleep(2), pg_sleep(3)` sleeps for 5 seconds.","body":"The result of <code>pg_sleep(N)</code> for a given N is typically cached, and the function is not called every time. Try on the command line: <code>SELECT pg_sleep(2), pg_sleep(2)</code> sleeps for only 2 seconds. But <code>SELECT pg_sleep(2), pg_sleep(3)</code> sleeps for 5 seconds."},{"owner":{"account_id":17709408,"reputation":11,"user_id":15590004,"display_name":"niks"},"score":0,"creation_date":1692961835,"post_id":76975416,"comment_id":135699346,"body_markdown":"@k314159 tried it in IntelliJ IDEA SQL console, in both cases all mentioned pg_sleep() functions are invoked, thus no difference","body":"@k314159 tried it in IntelliJ IDEA SQL console, in both cases all mentioned pg_sleep() functions are invoked, thus no difference"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1692983565,"post_id":76975416,"comment_id":135704412,"body_markdown":"Opinion: Not sure what the purpose of this is exactly, but using a server side wait seems better than DB side waiting - why tie up a connection and DB resources unnecessarily? As to why it doesn&#39;t work for you - no clue. Check what exactly is being passed in and if Postgres support parameter binding to that function. Seems also from the docs that the sleep happens after the * data is processed, so you might get that first row of data too early and then cause the wait.","body":"Opinion: Not sure what the purpose of this is exactly, but using a server side wait seems better than DB side waiting - why tie up a connection and DB resources unnecessarily? As to why it doesn&#39;t work for you - no clue. Check what exactly is being passed in and if Postgres support parameter binding to that function. Seems also from the docs that the sleep happens after the * data is processed, so you might get that first row of data too early and then cause the wait."},{"owner":{"account_id":17709408,"reputation":11,"user_id":15590004,"display_name":"niks"},"score":0,"creation_date":1693034461,"post_id":76975416,"comment_id":135709101,"body_markdown":"@Chris thanks for the reply, after all I consider to wait on the server side, but still trying to make work pg_sleep:)","body":"@Chris thanks for the reply, after all I consider to wait on the server side, but still trying to make work pg_sleep:)"}],"answers":[{"tags":[],"owner":{"account_id":17709408,"reputation":11,"user_id":15590004,"display_name":"niks"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1693387262,"creation_date":1693386993,"answer_id":77006604,"question_id":76975416,"body_markdown":"Finally found the correct decision on my problem, it looks so:\r\n```\r\nWITH sleep AS (select pg_sleep(:delay) AS sleep), \r\nids AS \r\n(SELECT id FROM repayment_applications \r\nWHERE \r\nrepayment_applications.correlation_id =:correlationId \r\nAND \r\nrepayment_applications.status &lt;&gt;:status) \r\nSELECT * FROM repayment_applications \r\nWHERE id IN (SELECT * FROM ids) \r\nAND \r\n(SELECT * FROM sleep) IS NOT NULL\r\n```\r\nWorks both with direct query and using nativeQuery in JPA","title":"Query delay using JPA and pg_sleep in native query","body":"<p>Finally found the correct decision on my problem, it looks so:</p>\n<pre><code>WITH sleep AS (select pg_sleep(:delay) AS sleep), \nids AS \n(SELECT id FROM repayment_applications \nWHERE \nrepayment_applications.correlation_id =:correlationId \nAND \nrepayment_applications.status &lt;&gt;:status) \nSELECT * FROM repayment_applications \nWHERE id IN (SELECT * FROM ids) \nAND \n(SELECT * FROM sleep) IS NOT NULL\n</code></pre>\n<p>Works both with direct query and using nativeQuery in JPA</p>\n"}],"owner":{"account_id":17709408,"reputation":11,"user_id":15590004,"display_name":"niks"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":173,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77006604,"answer_count":1,"score":0,"last_activity_date":1693387262,"creation_date":1692950940,"question_id":76975416,"body_markdown":"trying to implement delay using `pg_sleep()` on PSQL side\r\n```java\r\n@Query(\r\n    nativeQuery = true,\r\n    value = &quot;SELECT *, pg_sleep(:delay) FROM repayment_applications &quot; +\r\n            &quot;WHERE repayment_applications.correlation_id = :correlationId &quot; +\r\n            &quot;AND repayment_applications.status &lt;&gt; :status&quot;)\r\nOptional&lt;RepaymentApplication&gt; findRepaymentApplicationCorrelationIdAndNotStatusWithDelay(\r\n    @Param(&quot;delay&quot;) Long delay,\r\n    @Param(&quot;correlationId&quot;) String correlationId,\r\n    @Param(&quot;status&quot;) String status);\r\n```\r\nThis query perfectly works in case of querying directly to DB with specified delay. \r\nBut when using JPA native query it occurs instantly without any delay.\r\n\r\nThe main task is to have a delay between queries to let other app update DB record. \r\n\r\nStack: \r\n- spring-boot-starter-parent:2.7.12 \r\n- postgresql:42.5.1.\r\n\r\nThere is also an idea to make a thread sleep like ```TimeUnit.MINUTES.sleep(1);```, but not sure it is a right decsision.\r\n\r\nIf there are any ideas how to make it work using current idea or using another approach to complete the task, please comment below. Thanks in advance\r\n\r\n\r\n","title":"Query delay using JPA and pg_sleep in native query","body":"<p>trying to implement delay using <code>pg_sleep()</code> on PSQL side</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Query(\n    nativeQuery = true,\n    value = &quot;SELECT *, pg_sleep(:delay) FROM repayment_applications &quot; +\n            &quot;WHERE repayment_applications.correlation_id = :correlationId &quot; +\n            &quot;AND repayment_applications.status &lt;&gt; :status&quot;)\nOptional&lt;RepaymentApplication&gt; findRepaymentApplicationCorrelationIdAndNotStatusWithDelay(\n    @Param(&quot;delay&quot;) Long delay,\n    @Param(&quot;correlationId&quot;) String correlationId,\n    @Param(&quot;status&quot;) String status);\n</code></pre>\n<p>This query perfectly works in case of querying directly to DB with specified delay.\nBut when using JPA native query it occurs instantly without any delay.</p>\n<p>The main task is to have a delay between queries to let other app update DB record.</p>\n<p>Stack:</p>\n<ul>\n<li>spring-boot-starter-parent:2.7.12</li>\n<li>postgresql:42.5.1.</li>\n</ul>\n<p>There is also an idea to make a thread sleep like <code>TimeUnit.MINUTES.sleep(1);</code>, but not sure it is a right decsision.</p>\n<p>If there are any ideas how to make it work using current idea or using another approach to complete the task, please comment below. Thanks in advance</p>\n"},{"tags":["java","spring-boot","set"],"comments":[{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1693375344,"post_id":77005270,"comment_id":135750524,"body_markdown":"You want to break a log message into multiple  lines? Really?","body":"You want to break a log message into multiple  lines? Really?"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1693375412,"post_id":77005270,"comment_id":135750533,"body_markdown":"Are `Email updated` &amp; `FirstName Updated` the value of the `String` objects in your set?","body":"Are <code>Email updated</code> &amp; <code>FirstName Updated</code> the value of the <code>String</code> objects in your set?"}],"answers":[{"tags":[],"owner":{"account_id":2641928,"reputation":3146,"user_id":2285394,"display_name":"Amit Mohanty"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693375372,"creation_date":1693375372,"answer_id":77005304,"question_id":77005270,"body_markdown":"Instead of using `String.join` to concatenate all the fields into a single line, we&#39;re using a loop to log each field separately.\r\n\r\n    if (!userModifiedFields.isEmpty()) {\r\n        log.info(&quot;Updated Fields:&quot;);\r\n        for (String field : userModifiedFields) {\r\n            log.info(field);\r\n        }\r\n    }\r\n\r\n","title":"How to log in separate lines while using set in java","body":"<p>Instead of using <code>String.join</code> to concatenate all the fields into a single line, we're using a loop to log each field separately.</p>\n<pre><code>if (!userModifiedFields.isEmpty()) {\n    log.info(&quot;Updated Fields:&quot;);\n    for (String field : userModifiedFields) {\n        log.info(field);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693376255,"creation_date":1693375892,"answer_id":77005347,"question_id":77005270,"body_markdown":"## tl;dr\r\n\r\nUse `Set#forEach`.\r\n\r\n    userUpdater.getUpdatedFields().forEach ( log :: info )\r\n\r\n\r\n## Details\r\n\r\nThe [Answer by Mohanty][1] is correct. \r\n\r\nWe can make an alternative version of that code by making an [`Iterable`][2] of the [`Set`][3] via [`Set#forEach`][4], and passing a [method reference][5].\r\n\r\nExample data:\r\n\r\n```java\r\nSet &lt; String &gt; set = Set.of ( &quot;Email updated&quot; , &quot;FirstName Updated&quot; );\r\n```\r\n\r\nExample code:\r\n\r\n```java\r\nset.forEach ( System.out :: println );\r\n```\r\n\r\nResult:\r\n\r\n```none\r\nFirstName Updated\r\nEmail updated\r\n```\r\n\r\nFor your specific case, replace that example method reference with `log :: info`.\r\n\r\n    set.forEach ( log :: info ) ; \r\n\r\nNotice how there is no need to check for `isEmpty`. \r\n\r\nYou can even drop your `var userModifiedFields`. \r\n\r\n    userUpdater.getUpdatedFields().forEach ( log :: info ) ; \r\n\r\n\r\n  [1]: https://stackoverflow.com/a/77005304/642706\r\n  [2]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Iterable.html\r\n  [3]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Set.html\r\n  [4]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Iterable.html#forEach(java.util.function.Consumer)\r\n  [5]: https://en.wikipedia.org/wiki/Java_syntax#Method_references","title":"How to log in separate lines while using set in java","body":"<h2>tl;dr</h2>\n<p>Use <code>Set#forEach</code>.</p>\n<pre><code>userUpdater.getUpdatedFields().forEach ( log :: info )\n</code></pre>\n<h2>Details</h2>\n<p>The <a href=\"https://stackoverflow.com/a/77005304/642706\">Answer by Mohanty</a> is correct.</p>\n<p>We can make an alternative version of that code by making an <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Iterable.html\" rel=\"nofollow noreferrer\"><code>Iterable</code></a> of the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Set.html\" rel=\"nofollow noreferrer\"><code>Set</code></a> via <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Iterable.html#forEach(java.util.function.Consumer)\" rel=\"nofollow noreferrer\"><code>Set#forEach</code></a>, and passing a <a href=\"https://en.wikipedia.org/wiki/Java_syntax#Method_references\" rel=\"nofollow noreferrer\">method reference</a>.</p>\n<p>Example data:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Set &lt; String &gt; set = Set.of ( &quot;Email updated&quot; , &quot;FirstName Updated&quot; );\n</code></pre>\n<p>Example code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>set.forEach ( System.out :: println );\n</code></pre>\n<p>Result:</p>\n<pre class=\"lang-none prettyprint-override\"><code>FirstName Updated\nEmail updated\n</code></pre>\n<p>For your specific case, replace that example method reference with <code>log :: info</code>.</p>\n<pre><code>set.forEach ( log :: info ) ; \n</code></pre>\n<p>Notice how there is no need to check for <code>isEmpty</code>.</p>\n<p>You can even drop your <code>var userModifiedFields</code>.</p>\n<pre><code>userUpdater.getUpdatedFields().forEach ( log :: info ) ; \n</code></pre>\n"},{"tags":[],"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693387165,"creation_date":1693387165,"answer_id":77006628,"question_id":77005270,"body_markdown":"You must **use** for each-loop for **field** underneath the **set** and get each **field** from the **set**.\r\n\r\nHere is the code shown below\r\n\r\n    final Set&lt;String&gt; userModifiedFields = userUpdater.getUpdatedFields();\r\n    \r\n    if (!userModifiedFields.isEmpty()) {\r\n        log.info(&quot;Updated Fields:&quot;);\r\n        for (String field : userModifiedFields) {\r\n            log.info(field + &quot; updated&quot;);\r\n        }\r\n\r\n    }","title":"How to log in separate lines while using set in java","body":"<p>You must <strong>use</strong> for each-loop for <strong>field</strong> underneath the <strong>set</strong> and get each <strong>field</strong> from the <strong>set</strong>.</p>\n<p>Here is the code shown below</p>\n<pre><code>final Set&lt;String&gt; userModifiedFields = userUpdater.getUpdatedFields();\n\nif (!userModifiedFields.isEmpty()) {\n    log.info(&quot;Updated Fields:&quot;);\n    for (String field : userModifiedFields) {\n        log.info(field + &quot; updated&quot;);\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":28730357,"reputation":73,"user_id":22002449,"display_name":"dracile"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":3,"score":-2,"last_activity_date":1693387165,"creation_date":1693374911,"question_id":77005270,"body_markdown":"I&#39;m logging All the updated Fields updated in an api call through set but they are logging in same line\r\n\r\nAnd I need to print them in different lines, like this\r\n\r\nREQUIRED\r\n```\r\nEmail updated \r\nFirstName Updated\r\n\r\n```\r\n**Service class:** logging like this\r\n```\r\n final var userModifiedFields =userUpdater.getUpdatedFields();\r\n\r\n            if ((!userModifiedFields.isEmpty())) {\r\n                log.info(&quot;Updated Fields : &quot; + String.join(&quot;  &quot;, userModifiedFields));\r\n            }\r\n\r\n public Set&lt;String&gt; getUpdatedFields() {\r\n            return updatedFields;\r\n        }\r\n```\r\n**Current Output**\r\n```\r\n Updated Fields : Email  FirstName \r\n```\r\nRequired output mentied above\r\n","title":"How to log in separate lines while using set in java","body":"<p>I'm logging All the updated Fields updated in an api call through set but they are logging in same line</p>\n<p>And I need to print them in different lines, like this</p>\n<p>REQUIRED</p>\n<pre><code>Email updated \nFirstName Updated\n\n</code></pre>\n<p><strong>Service class:</strong> logging like this</p>\n<pre><code> final var userModifiedFields =userUpdater.getUpdatedFields();\n\n            if ((!userModifiedFields.isEmpty())) {\n                log.info(&quot;Updated Fields : &quot; + String.join(&quot;  &quot;, userModifiedFields));\n            }\n\n public Set&lt;String&gt; getUpdatedFields() {\n            return updatedFields;\n        }\n</code></pre>\n<p><strong>Current Output</strong></p>\n<pre><code> Updated Fields : Email  FirstName \n</code></pre>\n<p>Required output mentied above</p>\n"},{"tags":["java","mongodb"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1693385985,"post_id":77006336,"comment_id":135752435,"body_markdown":"You&#39;d be better off leaving it like that and *presenting* it as an integral value. There&#39;s never a good reason for diminishing precision in your model","body":"You&#39;d be better off leaving it like that and <i>presenting</i> it as an integral value. There&#39;s never a good reason for diminishing precision in your model"}],"answers":[{"tags":[],"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1693386860,"creation_date":1693386860,"answer_id":77006586,"question_id":77006336,"body_markdown":"You can **use** the `$toInt` aggregation operator to convert the `floating-point` result to an `integer` before updating the field\r\n\r\nHere is the sample code shown below\r\n\r\n    Bson update = Updates.set(&quot;percent_view&quot;, new Document(&quot;$toInt&quot;, new Document(&quot;$multiply&quot;, Arrays.asList(&quot;$viewtime&quot;, percent))));","title":"How to convert float value to int while updating in MongoDB Java?","body":"<p>You can <strong>use</strong> the <code>$toInt</code> aggregation operator to convert the <code>floating-point</code> result to an <code>integer</code> before updating the field</p>\n<p>Here is the sample code shown below</p>\n<pre><code>Bson update = Updates.set(&quot;percent_view&quot;, new Document(&quot;$toInt&quot;, new Document(&quot;$multiply&quot;, Arrays.asList(&quot;$viewtime&quot;, percent))));\n</code></pre>\n"}],"owner":{"account_id":2008573,"reputation":5307,"user_id":1797689,"accept_rate":67,"display_name":"khateeb"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77006586,"answer_count":1,"score":0,"last_activity_date":1693386860,"creation_date":1693385099,"question_id":77006336,"body_markdown":"I am trying to update a field which will be the product of a field and a number. the result is coming as a float in the db but I want it to be an integer. How do I do it?\r\n\r\n\r\n    final Bson update = set(&quot;percent_view&quot;, new BasicDBObject(&quot;$multiply&quot;, Arrays.asList(&quot;$viewtime&quot;, percent)));","title":"How to convert float value to int while updating in MongoDB Java?","body":"<p>I am trying to update a field which will be the product of a field and a number. the result is coming as a float in the db but I want it to be an integer. How do I do it?</p>\n<pre><code>final Bson update = set(&quot;percent_view&quot;, new BasicDBObject(&quot;$multiply&quot;, Arrays.asList(&quot;$viewtime&quot;, percent)));\n</code></pre>\n"},{"tags":["java","spring-boot","maven","jar","endpoint"],"comments":[{"owner":{"account_id":2161358,"reputation":42669,"user_id":1915448,"accept_rate":96,"display_name":"g00glen00b"},"score":0,"creation_date":1693390907,"post_id":77006527,"comment_id":135753533,"body_markdown":"So if I understand it correctly, you want to remove some methods (= endpoints) of a Java class (= controller) during compilation? That sounds a lot like conditional compilation and I don&#39;t know if that&#39;s possible in Java.","body":"So if I understand it correctly, you want to remove some methods (= endpoints) of a Java class (= controller) during compilation? That sounds a lot like conditional compilation and I don&#39;t know if that&#39;s possible in Java."},{"owner":{"account_id":25192215,"reputation":184,"user_id":19032274,"display_name":"Lako12"},"score":0,"creation_date":1693391535,"post_id":77006527,"comment_id":135753659,"body_markdown":"Exact. I want to have the ability to create jars with different endpoints using the same project. Without having to create different branches","body":"Exact. I want to have the ability to create jars with different endpoints using the same project. Without having to create different branches"},{"owner":{"account_id":2161358,"reputation":42669,"user_id":1915448,"accept_rate":96,"display_name":"g00glen00b"},"score":0,"creation_date":1693394765,"post_id":77006527,"comment_id":135754296,"body_markdown":"Might be a duplicate of this then: [Java conditional compilation: how to prevent code chunks from being compiled?](https://stackoverflow.com/q/4526113/1915448)","body":"Might be a duplicate of this then: <a href=\"https://stackoverflow.com/q/4526113/1915448\">Java conditional compilation: how to prevent code chunks from being compiled?</a>"}],"owner":{"account_id":25192215,"reputation":184,"user_id":19032274,"display_name":"Lako12"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693386457,"creation_date":1693386457,"question_id":77006527,"body_markdown":"I have a multi module spring boot project. Each module has its own controller with N endpoints.\r\nI would like to be able to create jar with different endpoints based on the profile used during the build, perhaps with Maven profiles.\r\nWhereas I don&#39;t want to exclude a whole controller but only some controller endpoints.\r\n\r\nI know that maybe this thing can be done using the spring profile. But with using spring profiles, it means that the jar would always have all the endpoints. I want to remove them completely and not &quot;hide&quot; them. Once the jar is created with a certain profile, the endpoints ignored by that profile must not be accessible.\r\n\r\nIs there a possibility to do this or do I have to create separate branches?\r\n\r\n\r\nThank you\r\n","title":"Exclude endpoints by creating dynamic jars in a spring boot project","body":"<p>I have a multi module spring boot project. Each module has its own controller with N endpoints.\nI would like to be able to create jar with different endpoints based on the profile used during the build, perhaps with Maven profiles.\nWhereas I don't want to exclude a whole controller but only some controller endpoints.</p>\n<p>I know that maybe this thing can be done using the spring profile. But with using spring profiles, it means that the jar would always have all the endpoints. I want to remove them completely and not &quot;hide&quot; them. Once the jar is created with a certain profile, the endpoints ignored by that profile must not be accessible.</p>\n<p>Is there a possibility to do this or do I have to create separate branches?</p>\n<p>Thank you</p>\n"},{"tags":["java","algorithm"],"comments":[{"owner":{"account_id":1238100,"reputation":12185,"user_id":1201272,"accept_rate":80,"display_name":"AurA"},"score":3,"creation_date":1380267062,"post_id":19045103,"comment_id":28145240,"body_markdown":"Ideally the fabonacci starts with 0 1 1 2 3 5... and so on... in plain English next number is the sum of last two inputs","body":"Ideally the fabonacci starts with 0 1 1 2 3 5... and so on... in plain English next number is the sum of last two inputs"},{"owner":{"account_id":4680926,"reputation":2259,"user_id":3789665,"accept_rate":57,"display_name":"greybeard"},"score":0,"creation_date":1631515091,"post_id":19045103,"comment_id":122232594,"body_markdown":"This seems to be a confusion about the definition of the [Fibonacci sequence](https://en.m.wikipedia.org/wiki/Fibonacci_number). Each number is the **sum of the two preceding numbers/results** — not *arguments*, *inputs* or *ordinals/indices*. (And `fib(3-1) + fib(3-2)` = `fib(2) + fib(1)` = 1 + 1 = 2.","body":"This seems to be a confusion about the definition of the <a href=\"https://en.m.wikipedia.org/wiki/Fibonacci_number\" rel=\"nofollow noreferrer\">Fibonacci sequence</a>. Each number is the <b>sum of the two preceding numbers/results</b> — not <i>arguments</i>, <i>inputs</i> or <i>ordinals/indices</i>. (And <code>fib(3-1) + fib(3-2)</code> = <code>fib(2) + fib(1)</code> = 1 + 1 = 2."}],"answers":[{"tags":[],"owner":{"account_id":2489647,"reputation":228,"user_id":2167401,"accept_rate":60,"display_name":"hoekki"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1380267248,"creation_date":1380267248,"answer_id":19045203,"question_id":19045103,"body_markdown":"I think you are confusing the index (n) in the Fibonacci sequence with the actual value at that index. fib(n=3) = fib(n-1=2) + fib(n-2=1) = 1 + 1 = 2","title":"Fibonacci function result confusion","body":"<p>I think you are confusing the index (n) in the Fibonacci sequence with the actual value at that index. fib(n=3) = fib(n-1=2) + fib(n-2=1) = 1 + 1 = 2</p>\n"},{"tags":[],"owner":{"account_id":1612366,"reputation":780,"user_id":1490962,"accept_rate":60,"display_name":"Bhushankumar Lilapara"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1380267306,"creation_date":1380267306,"answer_id":19045225,"question_id":19045103,"body_markdown":"why dont you try this easy code.\r\nIt&#39;s same like we do in Fibonacci without recursion.\r\n\r\n\tpublic class FinnonnacciDemo2 {\r\n\t\r\n\t\tstatic int no = 0, n = 8;\r\n\t\r\n\t\tpublic static void main(String[] args) {\r\n\t\t\t// This will print series till 8\r\n\t\t\tfib(0, 1);\r\n\t\t}\r\n\t\r\n\t\tpublic static void fib(int a, int b) {\r\n\t\t\t// Terminating condition.\r\n\t\t\tif (a &gt;= n) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\r\n\t\t\telse {\r\n\t\t\t\tSystem.out.print(&quot;\\t&quot; + no);\r\n\t\t\t\tno = a + b;\r\n\t\t\t\ta = b;\r\n\t\t\t\tb = no;\r\n\t\t\t\tfib(a, b);\r\n\t\t\t}\r\n\t\t}\r\n\t} ","title":"Fibonacci function result confusion","body":"<p>why dont you try this easy code.\nIt's same like we do in Fibonacci without recursion.</p>\n\n<pre><code>public class FinnonnacciDemo2 {\n\n    static int no = 0, n = 8;\n\n    public static void main(String[] args) {\n        // This will print series till 8\n        fib(0, 1);\n    }\n\n    public static void fib(int a, int b) {\n        // Terminating condition.\n        if (a &gt;= n) {\n            return;\n        }\n\n        else {\n            System.out.print(\"\\t\" + no);\n            no = a + b;\n            a = b;\n            b = no;\n            fib(a, b);\n        }\n    }\n} \n</code></pre>\n"},{"tags":[],"owner":{"account_id":1132753,"reputation":930,"user_id":1118447,"accept_rate":60,"display_name":"Alex VII"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1380267372,"creation_date":1380267372,"answer_id":19045249,"question_id":19045103,"body_markdown":"If you pass 3 to your function it will do the following:\r\n\r\n    fib(3) = fib(2) + fib(1) //so we we are into the else statement, because 3 &gt; 1\r\n    = fib(2) + 1             //fib(1) = 1 because 1 &lt;= 1 so you return it (if statement)\r\n    = (fib(1) + fib(0)) + 1  //2 &gt; 1 =&gt; we go to the else statement\r\n    = (1 + 0) + 1            //0 &lt;= 1 &amp; 1 &lt;= 1 so we are into the if and return the values \r\n    = 2","title":"Fibonacci function result confusion","body":"<p>If you pass 3 to your function it will do the following:</p>\n\n<pre><code>fib(3) = fib(2) + fib(1) //so we we are into the else statement, because 3 &gt; 1\n= fib(2) + 1             //fib(1) = 1 because 1 &lt;= 1 so you return it (if statement)\n= (fib(1) + fib(0)) + 1  //2 &gt; 1 =&gt; we go to the else statement\n= (1 + 0) + 1            //0 &lt;= 1 &amp; 1 &lt;= 1 so we are into the if and return the values \n= 2\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1575299,"reputation":1856,"user_id":1461929,"display_name":"Christopher Gertz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1380267375,"creation_date":1380267375,"answer_id":19045252,"question_id":19045103,"body_markdown":"The Fibonacci series either starts with zero or with 1, non of which options has the 3 as the third number.\r\n\r\n1 1 2 3 5 ...\r\n\r\n0 1 1 2 3 5 8 ...\r\n\r\nThe usual way is to have the second option but starting at index 0 so that fib(0) = 0, fib(1) = fib(2) = 1, as stated for example here: http://oeis.org/A000045","title":"Fibonacci function result confusion","body":"<p>The Fibonacci series either starts with zero or with 1, non of which options has the 3 as the third number.</p>\n\n<p>1 1 2 3 5 ...</p>\n\n<p>0 1 1 2 3 5 8 ...</p>\n\n<p>The usual way is to have the second option but starting at index 0 so that fib(0) = 0, fib(1) = fib(2) = 1, as stated for example here: <a href=\"http://oeis.org/A000045\" rel=\"nofollow\">http://oeis.org/A000045</a></p>\n"},{"tags":[],"owner":{"account_id":3229314,"reputation":515,"user_id":2724934,"accept_rate":75,"display_name":"Milaci"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1395405225,"creation_date":1380267504,"answer_id":19045296,"question_id":19045103,"body_markdown":"Is a Recursion method... `fib(3)=fib(3-1)+fib(3-2)=\r\n                           fib(2)+fib(1)=(fib(2-1)+fib(1-1))+fib(1)=\r\n                                          fib(1)+fib(0)+fib(1)=\r\n                                             1  +   0  +  1`","title":"Fibonacci function result confusion","body":"<p>Is a Recursion method... <code>fib(3)=fib(3-1)+fib(3-2)=\n                           fib(2)+fib(1)=(fib(2-1)+fib(1-1))+fib(1)=\n                                          fib(1)+fib(0)+fib(1)=\n                                             1  +   0  +  1</code></p>\n"},{"tags":[],"owner":{"account_id":1105691,"reputation":2308,"user_id":1097125,"accept_rate":81,"display_name":"J.K"},"down_vote_count":1,"up_vote_count":16,"is_accepted":false,"score":15,"last_activity_date":1440513263,"creation_date":1380267607,"answer_id":19045323,"question_id":19045103,"body_markdown":"**This is a much simpler code to generate Fibonacci sequence like &#39;0 1 1 2 3 ...&#39;.**\r\n\r\n    public static void main (String[] args) {\r\n    \tint f = 0;\r\n    \tint g = 1;\r\n    \r\n    \tfor (int i = 1; i &lt;= 10; i++) {\r\n    \t\tSystem.out.print(f + &quot; &quot;);\r\n    \t\tf = f + g;\r\n    \t\tg = f - g;\r\n    \t} \r\n    \r\n    \tSystem.out.println();\r\n    }","title":"Fibonacci function result confusion","body":"<p><strong>This is a much simpler code to generate Fibonacci sequence like '0 1 1 2 3 ...'.</strong></p>\n\n<pre><code>public static void main (String[] args) {\n    int f = 0;\n    int g = 1;\n\n    for (int i = 1; i &lt;= 10; i++) {\n        System.out.print(f + \" \");\n        f = f + g;\n        g = f - g;\n    } \n\n    System.out.println();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2282187,"reputation":480,"user_id":2007021,"accept_rate":60,"display_name":"Imtiaz Zaman Nishith"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1380267853,"creation_date":1380267853,"answer_id":19045401,"question_id":19045103,"body_markdown":"Fibonacci numbers are the calculated sum of previous consecutive two numbers. It starts with 0 1 1 2 3 5 8... and so on. So its something like--\r\n\r\n\r\n    fib(3) = fib(2) + fib(1)\r\n           = fib(1) + fib(0) + 1 //fib(1) = 1\r\n           = 1 + 0 + 1 //fib(0) = 0\r\n           = 2\r\n\r\n\r\n***Recursion method is less efficient as it involves function calls which uses stack, also there are chances of stack overflow if function is called frequently for calculating larger Fibonacci numbers.***","title":"Fibonacci function result confusion","body":"<p>Fibonacci numbers are the calculated sum of previous consecutive two numbers. It starts with 0 1 1 2 3 5 8... and so on. So its something like--</p>\n\n<pre><code>fib(3) = fib(2) + fib(1)\n       = fib(1) + fib(0) + 1 //fib(1) = 1\n       = 1 + 0 + 1 //fib(0) = 0\n       = 2\n</code></pre>\n\n<p><em><strong>Recursion method is less efficient as it involves function calls which uses stack, also there are chances of stack overflow if function is called frequently for calculating larger Fibonacci numbers.</em></strong></p>\n"},{"tags":[],"owner":{"account_id":2922454,"reputation":161,"user_id":2504416,"display_name":"Amandeep Kamboj"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1393917698,"creation_date":1393917698,"answer_id":22165424,"question_id":19045103,"body_markdown":"                               F(n)\r\n                                /    \\\r\n                            F(n-1)   F(n-2)\r\n                            /   \\     /      \\\r\n                        F(n-2) F(n-3) F(n-3)  F(n-4)\r\n                       /    \\\r\n                     F(n-3) F(n-4)\r\nNotice that many computations are repeated!\r\nImportant point to note is this algorithm is exponential because it does not store the result of previous calculated numbers. eg F(n-3) is called 3 times.\r\n\r\nFor more details refer algorithm by dasgupta chapter 0.2","title":"Fibonacci function result confusion","body":"<pre><code>                           F(n)\n                            /    \\\n                        F(n-1)   F(n-2)\n                        /   \\     /      \\\n                    F(n-2) F(n-3) F(n-3)  F(n-4)\n                   /    \\\n                 F(n-3) F(n-4)\n</code></pre>\n\n<p>Notice that many computations are repeated!\nImportant point to note is this algorithm is exponential because it does not store the result of previous calculated numbers. eg F(n-3) is called 3 times.</p>\n\n<p>For more details refer algorithm by dasgupta chapter 0.2</p>\n"},{"tags":[],"owner":{"account_id":1131356,"reputation":1952,"user_id":1117353,"display_name":"codebusta"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1500464900,"creation_date":1407147292,"answer_id":25116410,"question_id":19045103,"body_markdown":"    public static int f(int n){\r\n        if (n &lt;= 1) {\r\n            return n;\r\n        } else {\r\n            return f(n - 1) + f(n - 2);\r\n        }\r\n    }\r\n\r\n    public static void main(String[] args){\r\n        Integer c = 4;\r\n        Integer answer = f(c);\r\n        System.out.println(&quot;Fibonacci &quot; + c + &quot;&#39;s number is: &quot; + answer);\r\n    }\r\n","title":"Fibonacci function result confusion","body":"<pre><code>public static int f(int n){\n    if (n &lt;= 1) {\n        return n;\n    } else {\n        return f(n - 1) + f(n - 2);\n    }\n}\n\npublic static void main(String[] args){\n    Integer c = 4;\n    Integer answer = f(c);\n    System.out.println(\"Fibonacci \" + c + \"'s number is: \" + answer);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5444867,"reputation":269,"user_id":4331788,"display_name":"Mcfaith"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1417868503,"creation_date":1417867411,"answer_id":27331480,"question_id":19045103,"body_markdown":"    import java.util.Scanner;\r\n    \r\n    public class Fibonacci2 {\r\n    \r\n        public static void main(String[]args){\r\n            \r\n            int a;\r\n            try (Scanner sc = new Scanner(System.in)) {\r\n                System.out.print(&quot;Number of Fibonacci numbers to print: &quot;);\r\n                a = sc.nextInt();\r\n                sc.close();\r\n            }\r\n            int c=1; /*c current number b last number*/\r\n            int b=0;\r\n            System.out.println(b);\r\n            System.out.println(c);\r\n            int bb;\r\n            for (int z = 2; z &lt; a ; z++){\r\n            bb = b; \r\n            b = c;\r\n            c = bb + b; /*bb last last number*/\r\n            System.out.println(z);\r\n            \r\n        }\r\n        }\r\n    }\r\n\r\n","title":"Fibonacci function result confusion","body":"<pre><code>import java.util.Scanner;\n\npublic class Fibonacci2 {\n\n    public static void main(String[]args){\n\n        int a;\n        try (Scanner sc = new Scanner(System.in)) {\n            System.out.print(\"Number of Fibonacci numbers to print: \");\n            a = sc.nextInt();\n            sc.close();\n        }\n        int c=1; /*c current number b last number*/\n        int b=0;\n        System.out.println(b);\n        System.out.println(c);\n        int bb;\n        for (int z = 2; z &lt; a ; z++){\n        bb = b; \n        b = c;\n        c = bb + b; /*bb last last number*/\n        System.out.println(z);\n\n    }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7801561,"reputation":113,"user_id":5900817,"display_name":"morphytronx"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1455345722,"creation_date":1454973792,"answer_id":35281227,"question_id":19045103,"body_markdown":"You can do it in two lines!\r\n\r\nShortest typing to do this (albeit, not the most efficient):\r\n\r\n        int fib( int x ) {\r\n            return x &gt; 1 ? fib(x - 1) + fib(x - 2) : x; }\r\n\r\nIf you want a fast algorithm, give this one a shot:\r\n\r\n            ///fast version fibbonacci sequence.\r\n            public static float fibonacci(int x){\r\n               float[] sequence = new float[x];\r\n               sequence[0] = 1;\r\n               sequence[1] = 1;\r\n              if (x &gt; 1){\r\n                 for (int i = 2; i &lt; x; i++){\r\n                   sequence[i] = sequence[i-1] + sequence[i-2];\r\n                 }\r\n              }\r\n              for (float z : sequence){\r\n                  System.out.print(&quot;{ &quot; + z + &quot;}, &quot;);\r\n              }\r\n              return sequence[x-1];\r\n            }\r\n","title":"Fibonacci function result confusion","body":"<p>You can do it in two lines!</p>\n\n<p>Shortest typing to do this (albeit, not the most efficient):</p>\n\n<pre><code>    int fib( int x ) {\n        return x &gt; 1 ? fib(x - 1) + fib(x - 2) : x; }\n</code></pre>\n\n<p>If you want a fast algorithm, give this one a shot:</p>\n\n<pre><code>        ///fast version fibbonacci sequence.\n        public static float fibonacci(int x){\n           float[] sequence = new float[x];\n           sequence[0] = 1;\n           sequence[1] = 1;\n          if (x &gt; 1){\n             for (int i = 2; i &lt; x; i++){\n               sequence[i] = sequence[i-1] + sequence[i-2];\n             }\n          }\n          for (float z : sequence){\n              System.out.print(\"{ \" + z + \"}, \");\n          }\n          return sequence[x-1];\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10402483,"reputation":1,"user_id":7670304,"display_name":"Olu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1488866247,"creation_date":1488864526,"answer_id":42640878,"question_id":19045103,"body_markdown":"    import java.math.BigDecimal;\r\n    \r\n    public abstract class Fibonacci {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tInteger max = Integer.valueOf(args[0]);\r\n    \t\tBigDecimal[] fibs = { new BigDecimal(0), new BigDecimal(1) };\r\n    \t\tBigDecimal current;\r\n    \t\tSystem.out.print(&quot;1 &quot;);\r\n    \t\tfor (int i = 0; i &lt; max + 1; i++) {\r\n    \t\t\tcurrent = fibs[1].add(fibs[0]);\r\n    \t\t\tSystem.out.print(current + &quot; &quot;);\r\n    \t\t\tfibs[0] = fibs[1];\r\n    \t\t\tfibs[1] = current;\r\n    \t\t}\r\n    \t}\r\n    }","title":"Fibonacci function result confusion","body":"<pre><code>import java.math.BigDecimal;\n\npublic abstract class Fibonacci {\n\n    public static void main(String[] args) {\n        Integer max = Integer.valueOf(args[0]);\n        BigDecimal[] fibs = { new BigDecimal(0), new BigDecimal(1) };\n        BigDecimal current;\n        System.out.print(\"1 \");\n        for (int i = 0; i &lt; max + 1; i++) {\n            current = fibs[1].add(fibs[0]);\n            System.out.print(current + \" \");\n            fibs[0] = fibs[1];\n            fibs[1] = current;\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7667256,"reputation":3111,"user_id":5810648,"accept_rate":75,"display_name":"Ihor Rybak"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1500068530,"creation_date":1500068530,"answer_id":45111978,"question_id":19045103,"body_markdown":"My solution using Java 8 Stream:\r\n\r\n   \r\n\r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            final int n = 7;\r\n            Fibonacci fibonacci = new Fibonacci();\r\n            Stream.generate(fibonacci::next)\r\n                    .limit(n)\r\n                    .forEach(System.out::println);\r\n        }\r\n    }\r\n    \r\n    public class Fibonacci {\r\n        private long next = 1;\r\n        private long current = 1;\r\n        private int count = 1;\r\n    \r\n        public FibonacciNumber next() {\r\n            FibonacciNumber fibonacciNumber = new FibonacciNumber(count++, current);\r\n            long previous = current;\r\n            current = next;\r\n            next = current + previous;\r\n            return fibonacciNumber;\r\n        }\r\n    }\r\n    \r\n    public class FibonacciNumber {\r\n        private final int count;\r\n        private final long value;\r\n    \r\n        public FibonacciNumber(int count, long value) {\r\n            this.count = count;\r\n            this.value = value;\r\n        }\r\n    \r\n        @Override\r\n        public String toString() {\r\n            return count + &quot;: &quot; + value;\r\n        }\r\n    }","title":"Fibonacci function result confusion","body":"<p>My solution using Java 8 Stream:</p>\n\n<pre><code>public class Main {\n    public static void main(String[] args) {\n        final int n = 7;\n        Fibonacci fibonacci = new Fibonacci();\n        Stream.generate(fibonacci::next)\n                .limit(n)\n                .forEach(System.out::println);\n    }\n}\n\npublic class Fibonacci {\n    private long next = 1;\n    private long current = 1;\n    private int count = 1;\n\n    public FibonacciNumber next() {\n        FibonacciNumber fibonacciNumber = new FibonacciNumber(count++, current);\n        long previous = current;\n        current = next;\n        next = current + previous;\n        return fibonacciNumber;\n    }\n}\n\npublic class FibonacciNumber {\n    private final int count;\n    private final long value;\n\n    public FibonacciNumber(int count, long value) {\n        this.count = count;\n        this.value = value;\n    }\n\n    @Override\n    public String toString() {\n        return count + \": \" + value;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2800999,"reputation":31,"user_id":2409254,"display_name":"toludav"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1520358836,"creation_date":1520358836,"answer_id":49137107,"question_id":19045103,"body_markdown":"**The method below returns the fibonacci number at index n.**  \r\n\r\n\r\n\r\n     public static long getFibonacci(int n) {\r\n                List&lt;Long&gt; fibonacciNumbers = new ArrayList();\r\n                long j = 0;\r\n                int k = 0;\r\n                for (int i = 0; i &lt;= n; i++) {\r\n                    System.out.println(&quot;i = &quot; + i);\r\n                    if (i == 2) {\r\n                        j += (i - 2);\r\n                    } else if (i &gt; 2) {\r\n                        j = fibonacciNumbers.get(i - 1) + fibonacciNumbers.get(k - 2);\r\n                    } else {\r\n                        j += i;\r\n                    }\r\n                    fibonacciNumbers.add(j);\r\n                    k++;\r\n                    System.out.println(&quot;Fibonacci Array = &quot; + Arrays.toString(fibonacciNumbers.toArray()));\r\n                }\r\n                return fibonacciNumbers.get(fibonacciNumbers.size() - 1);\r\n            } ","title":"Fibonacci function result confusion","body":"<p><strong>The method below returns the fibonacci number at index n.</strong>  </p>\n\n<pre><code> public static long getFibonacci(int n) {\n            List&lt;Long&gt; fibonacciNumbers = new ArrayList();\n            long j = 0;\n            int k = 0;\n            for (int i = 0; i &lt;= n; i++) {\n                System.out.println(\"i = \" + i);\n                if (i == 2) {\n                    j += (i - 2);\n                } else if (i &gt; 2) {\n                    j = fibonacciNumbers.get(i - 1) + fibonacciNumbers.get(k - 2);\n                } else {\n                    j += i;\n                }\n                fibonacciNumbers.add(j);\n                k++;\n                System.out.println(\"Fibonacci Array = \" + Arrays.toString(fibonacciNumbers.toArray()));\n            }\n            return fibonacciNumbers.get(fibonacciNumbers.size() - 1);\n        } \n</code></pre>\n"},{"tags":[],"owner":{"account_id":10259341,"reputation":89,"user_id":7571215,"display_name":"alexandru catanet"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1520625776,"creation_date":1520625776,"answer_id":49201340,"question_id":19045103,"body_markdown":"Why you don&#39;t use  the next formula:\r\n\r\n    private static int fibonacci(int n) {\r\n        if (n == 1) {\r\n            return 1;\r\n        } else if (n == 2) {\r\n            return 1;\r\n        } else {\r\n            return fibonacci(n - 1) + fibonacci(n - 2);\r\n        }\r\n    }","title":"Fibonacci function result confusion","body":"<p>Why you don't use  the next formula:</p>\n\n<pre><code>private static int fibonacci(int n) {\n    if (n == 1) {\n        return 1;\n    } else if (n == 2) {\n        return 1;\n    } else {\n        return fibonacci(n - 1) + fibonacci(n - 2);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9776263,"reputation":329,"user_id":7246174,"display_name":"Chris Michael"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1528220558,"creation_date":1528220558,"answer_id":50706028,"question_id":19045103,"body_markdown":"This is my dynamic programming implementation using BigInteger.\r\n\r\n       import java.math.BigInteger;\r\n       import java.util.HashMap;\r\n       import java.util.Map;\r\n       import java.util.Scanner;\r\n\r\n    /**\r\n     * Topic: Dynamic Programming\r\n     * Algorithm: Fib Algorithm Implementation\r\n     *\r\n     * Author: Chris M. Perez Santiago\r\n     * Date: 4 / 15 / 2018\r\n     **/\r\n\r\n\r\n      public class Main {\r\n         private static BigInteger[] b = new BigInteger[100000001];\r\n         private static Scanner console = new Scanner(System.in);\r\n\r\n      public static void main(String[] args) {\r\n         long n = console.nextLong();\r\n         for(long i=1;i&lt;=n;i++) System.out.println(initFib(i));\r\n      }\r\n\r\n      private static BigInteger dpFib(Map&lt;Long , BigInteger&gt; map , long n){\r\n         if(map.containsKey(n)) return map.get(n);\r\n\r\n         map.put(n - 1 , dpFib(map , n - 1));\r\n         map.put(n - 2 , dpFib(map , n - 2));\r\n         BigInteger sum = map.get(n - 1).add(map.get(n - 2));\r\n         map.put(n , sum);\r\n         return sum;\r\n      }\r\n\r\n      private static BigInteger initFib(long n){\r\n         if(BigInteger.valueOf(n).equals(BigInteger.ONE) || BigInteger.valueOf(n).equals(BigInteger.ZERO))\r\n           return BigInteger.ONE;\r\n         Map&lt;Long , BigInteger&gt; map = new HashMap&lt;&gt;();\r\n         map.put(1L , BigInteger.ONE);\r\n         map.put(2L , BigInteger.ONE);\r\n         return dpFib(map , n);\r\n      }\r\n    }","title":"Fibonacci function result confusion","body":"<p>This is my dynamic programming implementation using BigInteger.</p>\n\n<pre><code>   import java.math.BigInteger;\n   import java.util.HashMap;\n   import java.util.Map;\n   import java.util.Scanner;\n\n/**\n * Topic: Dynamic Programming\n * Algorithm: Fib Algorithm Implementation\n *\n * Author: Chris M. Perez Santiago\n * Date: 4 / 15 / 2018\n **/\n\n\n  public class Main {\n     private static BigInteger[] b = new BigInteger[100000001];\n     private static Scanner console = new Scanner(System.in);\n\n  public static void main(String[] args) {\n     long n = console.nextLong();\n     for(long i=1;i&lt;=n;i++) System.out.println(initFib(i));\n  }\n\n  private static BigInteger dpFib(Map&lt;Long , BigInteger&gt; map , long n){\n     if(map.containsKey(n)) return map.get(n);\n\n     map.put(n - 1 , dpFib(map , n - 1));\n     map.put(n - 2 , dpFib(map , n - 2));\n     BigInteger sum = map.get(n - 1).add(map.get(n - 2));\n     map.put(n , sum);\n     return sum;\n  }\n\n  private static BigInteger initFib(long n){\n     if(BigInteger.valueOf(n).equals(BigInteger.ONE) || BigInteger.valueOf(n).equals(BigInteger.ZERO))\n       return BigInteger.ONE;\n     Map&lt;Long , BigInteger&gt; map = new HashMap&lt;&gt;();\n     map.put(1L , BigInteger.ONE);\n     map.put(2L , BigInteger.ONE);\n     return dpFib(map , n);\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10474010,"reputation":101,"user_id":7721085,"display_name":"David William"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1575714001,"creation_date":1575712550,"answer_id":59224833,"question_id":19045103,"body_markdown":"```java\r\nimport java.util.Scanner;\r\npublic class Fibonacci {\r\n\tpublic static void main(String[] args) {\r\n\t\tScanner scn = new Scanner(System. in );\r\n\t\tSystem.out.println(&quot;Enter a number upto which fibonacci numbers should be displayed&quot;);\r\n\t\tint fib = scn.nextInt();\r\n\t\tint a = 0,\r\n\t\tb = 1,\r\n\t\tres = 0;\r\n\t\tSystem.out.print(a + &quot; &quot; + b + &quot; &quot;);\r\n\t\twhile (res &lt;= fib) {\r\n\t\t\tres = a + b;\r\n\t\t\ta = b;\r\n\t\t\tb = res;\r\n\t\t\tif (res &gt; fib) break;\r\n\t\t\tSystem.out.print(res + &quot; &quot;);\r\n\t\t}\r\n\t}\r\n}\r\n```","title":"Fibonacci function result confusion","body":"<pre class=\"lang-java prettyprint-override\"><code>import java.util.Scanner;\npublic class Fibonacci {\n    public static void main(String[] args) {\n        Scanner scn = new Scanner(System. in );\n        System.out.println(\"Enter a number upto which fibonacci numbers should be displayed\");\n        int fib = scn.nextInt();\n        int a = 0,\n        b = 1,\n        res = 0;\n        System.out.print(a + \" \" + b + \" \");\n        while (res &lt;= fib) {\n            res = a + b;\n            a = b;\n            b = res;\n            if (res &gt; fib) break;\n            System.out.print(res + \" \");\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6657042,"reputation":1171,"user_id":9150584,"display_name":"Meysam Keshvari"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1599625259,"creation_date":1599625259,"answer_id":63804696,"question_id":19045103,"body_markdown":"1 , 1 , 2 , 3 , 5 , 8 , 13 , 21 , 34 , 55 , 89\r\n\r\n    public void fibonacci(){\r\n        int n1 = 0;\r\n        int n2 = 1;\r\n        int n3;\r\n        int count = 10;\r\n        Log.d(&quot;DBG&quot;,n1 + &quot; , &quot; + n2);\r\n        for (int i = 1; i &lt;= count ; i++) {\r\n            n3 = n1 + n2;\r\n            Log.d(&quot;DBG&quot;,i + &quot;= &quot; + n3+&quot;&quot;);\r\n            n1 = n2;\r\n            n2 = n3;\r\n        }\r\n    }","title":"Fibonacci function result confusion","body":"<p>1 , 1 , 2 , 3 , 5 , 8 , 13 , 21 , 34 , 55 , 89</p>\n<pre><code>public void fibonacci(){\n    int n1 = 0;\n    int n2 = 1;\n    int n3;\n    int count = 10;\n    Log.d(&quot;DBG&quot;,n1 + &quot; , &quot; + n2);\n    for (int i = 1; i &lt;= count ; i++) {\n        n3 = n1 + n2;\n        Log.d(&quot;DBG&quot;,i + &quot;= &quot; + n3+&quot;&quot;);\n        n1 = n2;\n        n2 = n3;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8362258,"reputation":1639,"user_id":6280135,"display_name":"Maninder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1630107235,"creation_date":1630107235,"answer_id":68960249,"question_id":19045103,"body_markdown":"\r\n    package Loops;\r\n    import java.util.Scanner;\r\n    public class FibonacciClass {\r\n        public static void main(String[] args) {\r\n            Scanner sc= new Scanner(System.in);\r\n            System.out.println(&quot;Enter the number upto which you want to generate Fibonacci series&quot;);\r\n            int x= sc.nextInt();\r\n            int [] testing= new int[x];\r\n            int first_Value=0;\r\n            int second_value=1;\r\n            int third_value=0;\r\n            System.out.println(first_Value);\r\n            for(int i=1;i&lt;testing.length;i++){\r\n                first_Value=second_value;\r\n                second_value=third_value;\r\n                third_value=first_Value+second_value;\r\n                System.out.println(third_value);\r\n                }\r\n            }\r\n            }\r\n","title":"Fibonacci function result confusion","body":"<pre><code>package Loops;\nimport java.util.Scanner;\npublic class FibonacciClass {\n    public static void main(String[] args) {\n        Scanner sc= new Scanner(System.in);\n        System.out.println(&quot;Enter the number upto which you want to generate Fibonacci series&quot;);\n        int x= sc.nextInt();\n        int [] testing= new int[x];\n        int first_Value=0;\n        int second_value=1;\n        int third_value=0;\n        System.out.println(first_Value);\n        for(int i=1;i&lt;testing.length;i++){\n            first_Value=second_value;\n            second_value=third_value;\n            third_value=first_Value+second_value;\n            System.out.println(third_value);\n            }\n        }\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2179728,"reputation":73047,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662888840,"creation_date":1662840903,"answer_id":73674906,"question_id":19045103,"body_markdown":"To understand the code in your question, I recommend you first understand the concept of the [Fibonacci](https://en.wikipedia.org/wiki/Fibonacci_number) sequence, in which each number is the sum of the two preceding ones. The [accepted answer](https://stackoverflow.com/a/19045249/10819573) has explained nicely how the recursive calls are generating the sequence.\r\n\r\nI am writing this answer to show the use of Java-8 Stream API to generate a Fibonacci sequence.\r\n\r\n# Java-8 Stream API Solution\r\n\r\n    import java.util.stream.Stream;\r\n    \r\n    public class Solution {\r\n        public static void main(String[] args) {\r\n            int maxSize = 7;\r\n            Stream.iterate(new int[] { 1, 1 }, arr -&gt; new int[] { arr[1], arr[0] + arr[1] })\r\n                    .map(arr -&gt; arr[0])\r\n                    .limit(maxSize)\r\n                    .forEach(System.out::println);\r\n        }\r\n    }\r\n\r\n**Output:**\r\n\r\n    1\r\n    1\r\n    2\r\n    3\r\n    5\r\n    8\r\n    13\r\n\r\n# Explanation\r\n\r\n 1. Here, we are limiting the infinite sequential ordered Stream returned by [`Stream#iterate`](https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#iterate-T-java.util.function.UnaryOperator-) with the help of [`Stream#limit`](https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#limit-long-).\r\n 2. We are using `new int[] { 1, 1 }` as a seed where the first and second elements represent the first and second numbers in the Fibonacci sequence. If you want to start the sequence with `0`, you will use `new int[] { 0, 1 }`.\r\n 3. Out of the array of the two elements, we are getting the first element by `map`ping the array into its first element and then printing it.\r\n 4. The `UnaryOperator` is preparing a new array for the next iterations.\r\n","title":"Fibonacci function result confusion","body":"<p>To understand the code in your question, I recommend you first understand the concept of the <a href=\"https://en.wikipedia.org/wiki/Fibonacci_number\" rel=\"nofollow noreferrer\">Fibonacci</a> sequence, in which each number is the sum of the two preceding ones. The <a href=\"https://stackoverflow.com/a/19045249/10819573\">accepted answer</a> has explained nicely how the recursive calls are generating the sequence.</p>\n<p>I am writing this answer to show the use of Java-8 Stream API to generate a Fibonacci sequence.</p>\n<h1>Java-8 Stream API Solution</h1>\n<pre><code>import java.util.stream.Stream;\n\npublic class Solution {\n    public static void main(String[] args) {\n        int maxSize = 7;\n        Stream.iterate(new int[] { 1, 1 }, arr -&gt; new int[] { arr[1], arr[0] + arr[1] })\n                .map(arr -&gt; arr[0])\n                .limit(maxSize)\n                .forEach(System.out::println);\n    }\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>1\n1\n2\n3\n5\n8\n13\n</code></pre>\n<h1>Explanation</h1>\n<ol>\n<li>Here, we are limiting the infinite sequential ordered Stream returned by <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#iterate-T-java.util.function.UnaryOperator-\" rel=\"nofollow noreferrer\"><code>Stream#iterate</code></a> with the help of <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#limit-long-\" rel=\"nofollow noreferrer\"><code>Stream#limit</code></a>.</li>\n<li>We are using <code>new int[] { 1, 1 }</code> as a seed where the first and second elements represent the first and second numbers in the Fibonacci sequence. If you want to start the sequence with <code>0</code>, you will use <code>new int[] { 0, 1 }</code>.</li>\n<li>Out of the array of the two elements, we are getting the first element by <code>map</code>ping the array into its first element and then printing it.</li>\n<li>The <code>UnaryOperator</code> is preparing a new array for the next iterations.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":10474010,"reputation":101,"user_id":7721085,"display_name":"David William"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667283805,"creation_date":1667283805,"answer_id":74272232,"question_id":19045103,"body_markdown":"\r\n    import java.util.*;\r\n\r\n    public class FibonacciSeries {\r\n\r\n\r\n    public static void main(String[] args) {\r\n\tint x=0;\r\n\tint y=1;\r\n\tScanner in= new Scanner(System.in);\r\n\tSystem.out.println(&quot;Enter number of series you want?&quot;);\r\n\t//user will enter a number\r\n\tint z=in.nextInt();\r\n\tSystem.out.print(x+&quot; &quot;+y+&quot; &quot;);\r\n\twhile((z-2)&gt;0)\r\n\t{\r\n\tint a=x+y;\r\n\tSystem.out.print(a+&quot; &quot;);\r\n\tx=y;\r\n\ty=a;\r\n\tz--;\r\n\t}\r\n\t}\r\n\r\n}\r\n","title":"Fibonacci function result confusion","body":"<pre><code>import java.util.*;\n\npublic class FibonacciSeries {\n\n\npublic static void main(String[] args) {\nint x=0;\nint y=1;\nScanner in= new Scanner(System.in);\nSystem.out.println(&quot;Enter number of series you want?&quot;);\n//user will enter a number\nint z=in.nextInt();\nSystem.out.print(x+&quot; &quot;+y+&quot; &quot;);\nwhile((z-2)&gt;0)\n{\nint a=x+y;\nSystem.out.print(a+&quot; &quot;);\nx=y;\ny=a;\nz--;\n}\n}\n</code></pre>\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":11777498,"reputation":1,"user_id":8618365,"display_name":"ankit singh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693386410,"creation_date":1693386410,"answer_id":77006518,"question_id":19045103,"body_markdown":"We can do it using Java8 in much simpler ways as below.\r\n\r\n    Stream.iterate(new int[]{0, 1}, t -&gt; new int[]{t[1], t[0] + t[1]})\r\n                .limit(10)\r\n                .map(t -&gt; t[0])\r\n                .forEach(System.out::print);","title":"Fibonacci function result confusion","body":"<p>We can do it using Java8 in much simpler ways as below.</p>\n<pre><code>Stream.iterate(new int[]{0, 1}, t -&gt; new int[]{t[1], t[0] + t[1]})\n            .limit(10)\n            .map(t -&gt; t[0])\n            .forEach(System.out::print);\n</code></pre>\n"}],"owner":{"account_id":3360553,"reputation":255,"user_id":2822435,"accept_rate":60,"display_name":"Marz"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56210,"favorite_count":0,"down_vote_count":4,"up_vote_count":8,"accepted_answer_id":19045249,"answer_count":22,"score":4,"last_activity_date":1693386410,"creation_date":1380266902,"question_id":19045103,"body_markdown":"    public class Fibonacci {\r\n        public static long fib(int n) {\r\n            if (n &lt;= 1) return n;\r\n            else return fib(n-1) + fib(n-2);\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            int N = Integer.parseInt(args[0]);\r\n            for (int i = 1; i &lt;= N; i++)\r\n                System.out.println(i + &quot;: &quot; + fib(i));\r\n        }\r\n    }\r\n\r\nLet&#39;s assume that the user input &quot;java Fibonacci 7&quot;, so the result would be like this:\r\n&gt; 1: 1  \r\n2: 1  \r\n3: 2  \r\n4: 3  \r\n5: 5  \r\n6: 8  \r\n7: 13\r\n\r\nI seem to be totally confused with how this works, starting with argument 3. When the fib(i) method gets passed 3, shouldn&#39;t it return 3 as well since if n = 3 then the sum of fib(n-1) /**n-1 is 2**/ and fib(n-2) /**n-2 is 1**/ is 3. And so on the other numbers forward.","title":"Fibonacci function result confusion","body":"<pre><code>public class Fibonacci {\n    public static long fib(int n) {\n        if (n &lt;= 1) return n;\n        else return fib(n-1) + fib(n-2);\n    }\n\n    public static void main(String[] args) {\n        int N = Integer.parseInt(args[0]);\n        for (int i = 1; i &lt;= N; i++)\n            System.out.println(i + &quot;: &quot; + fib(i));\n    }\n}\n</code></pre>\n<p>Let's assume that the user input &quot;java Fibonacci 7&quot;, so the result would be like this:</p>\n<blockquote>\n<p>1: 1<br />\n2: 1<br />\n3: 2<br />\n4: 3<br />\n5: 5<br />\n6: 8<br />\n7: 13</p>\n</blockquote>\n<p>I seem to be totally confused with how this works, starting with argument 3. When the fib(i) method gets passed 3, shouldn't it return 3 as well since if n = 3 then the sum of fib(n-1) /<strong>n-1 is 2</strong>/ and fib(n-2) /<strong>n-2 is 1</strong>/ is 3. And so on the other numbers forward.</p>\n"},{"tags":["java","spring","hibernate","spring-data","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1693386154,"creation_date":1398544121,"answer_id":23316154,"question_id":23316118,"body_markdown":"The correct place to put `@Transactional` annotation is *any* layer if you want to add a transactional behaviour to your code. The code assumed to use a database access. Usually, you can use `@Transactional` on repositories. But if you need,  you can  add it on the service layer as well. \r\n\r\nSee [Understanding the Spring Framework&#39;s declarative transaction implementation][1]\r\n&gt;  You can place the `@Transactional` annotation before an interface definition, a method on an interface, a class definition, or a public method on a class. However, the mere presence of the `@Transactional` annotation is not enough to activate the transactional behavior. The `@Transactional` annotation is simply metadata that can be consumed by some runtime infrastructure that is `@Transactional`-aware and that can use the metadata to configure the appropriate beans with transactional behavior. \r\n\r\n\r\n  [1]: http://docs.spring.io/spring/docs/3.0.x/spring-framework-reference/html/transaction.html#tx-decl-explained","title":"Layer to use the @Transactional annotation in Spring Data JPA","body":"<p>The correct place to put <code>@Transactional</code> annotation is <em>any</em> layer if you want to add a transactional behaviour to your code. The code assumed to use a database access. Usually, you can use <code>@Transactional</code> on repositories. But if you need,  you can  add it on the service layer as well.</p>\n<p>See <a href=\"http://docs.spring.io/spring/docs/3.0.x/spring-framework-reference/html/transaction.html#tx-decl-explained\" rel=\"nofollow noreferrer\">Understanding the Spring Framework's declarative transaction implementation</a></p>\n<blockquote>\n<p>You can place the <code>@Transactional</code> annotation before an interface definition, a method on an interface, a class definition, or a public method on a class. However, the mere presence of the <code>@Transactional</code> annotation is not enough to activate the transactional behavior. The <code>@Transactional</code> annotation is simply metadata that can be consumed by some runtime infrastructure that is <code>@Transactional</code>-aware and that can use the metadata to configure the appropriate beans with transactional behavior.</p>\n</blockquote>\n"},{"tags":[],"owner":{"display_name":"user997172"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1504863081,"creation_date":1398545150,"answer_id":23316344,"question_id":23316118,"body_markdown":"Transactions belong to Service layer. For example if you have `HotelService`, then the code would look like this:\r\n\r\n    @Service(&quot;hotelService&quot;)\r\n    @Transactional\r\n    public class HotelServiceImpl implements HotelService {\r\n        @Autowired\r\n        HotelDao hotelDao;\r\n    \r\n        // The rest of code omited ...\r\n    }","title":"Layer to use the @Transactional annotation in Spring Data JPA","body":"<p>Transactions belong to Service layer. For example if you have <code>HotelService</code>, then the code would look like this:</p>\n\n<pre><code>@Service(\"hotelService\")\n@Transactional\npublic class HotelServiceImpl implements HotelService {\n    @Autowired\n    HotelDao hotelDao;\n\n    // The rest of code omited ...\n}\n</code></pre>\n"}],"owner":{"account_id":282080,"reputation":911,"user_id":578762,"accept_rate":86,"display_name":"Abhishek Ranjan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1523,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":23316344,"answer_count":2,"score":1,"last_activity_date":1693386154,"creation_date":1398543881,"question_id":23316118,"body_markdown":"I am using Spring Data JPA for my application, which has the following layers:\r\n\r\n 1. **Service layer** with Interfaces and Implements (annotated @service)\r\n 2. **CRUD repository layer** with Spring Data JPA, together with custom repository implementations\r\n 3. **Entity layer**\r\n\r\nI was wondering where exactly is the correct place to put `@Transactional`. Currently, I have it in the service layer, where the repositories are being used.\r\n","title":"Layer to use the @Transactional annotation in Spring Data JPA","body":"<p>I am using Spring Data JPA for my application, which has the following layers:</p>\n<ol>\n<li><strong>Service layer</strong> with Interfaces and Implements (annotated @service)</li>\n<li><strong>CRUD repository layer</strong> with Spring Data JPA, together with custom repository implementations</li>\n<li><strong>Entity layer</strong></li>\n</ol>\n<p>I was wondering where exactly is the correct place to put <code>@Transactional</code>. Currently, I have it in the service layer, where the repositories are being used.</p>\n"},{"tags":["java","swing","user-interface","tooltip","usability"],"comments":[{"owner":{"account_id":79742,"reputation":19393,"user_id":225899,"accept_rate":85,"display_name":"James P."},"score":1,"creation_date":1313933260,"post_id":7138511,"comment_id":8559885,"body_markdown":"Related: http://stackoverflow.com/questions/5852941/popup-messages-for-validation","body":"Related: <a href=\"http://stackoverflow.com/questions/5852941/popup-messages-for-validation\" title=\"popup messages for validation\">stackoverflow.com/questions/5852941/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1313935286,"creation_date":1313935286,"answer_id":7138695,"question_id":7138511,"body_markdown":"The link given by James Poulson probably provides a better solution, but I had to see if this were possible with some simple Java code using a DocumentFilter and a JWindow.  Here&#39;s one possible way to do this:\r\n\r\n    import java.awt.Color;\r\n    import java.awt.Dimension;\r\n    import java.awt.Point;\r\n    import java.awt.Window;\r\n    import javax.swing.*;\r\n    import javax.swing.text.AttributeSet;\r\n    import javax.swing.text.BadLocationException;\r\n    import javax.swing.text.DocumentFilter;\r\n    import javax.swing.text.PlainDocument;\r\n    \r\n    public class InfoBalloon extends JPanel {\r\n       private static final int PREF_WIDTH = 400;\r\n       private static final int PREF_HEIGHT = 300;\r\n       private static final String REGEX_TEST = &quot;\\\\d*&quot;;\r\n       private static final String ERROR_TEXT = &quot;Please only add numbers to the text field&quot;;\r\n       private JTextField textField = new JTextField(10);\r\n       private JWindow errorWindow;\r\n       \r\n    \r\n       public InfoBalloon() {\r\n          add(new JLabel(&quot;Please Enter Number&quot;));\r\n          add(textField);\r\n          \r\n          ((PlainDocument)textField.getDocument()).setDocumentFilter(new MyNumberDocFilter());\r\n       }\r\n       \r\n       @Override\r\n       public Dimension getPreferredSize() {\r\n          return new Dimension(PREF_WIDTH, PREF_HEIGHT);\r\n       }\r\n       \r\n       private void showErrorWin() {     \r\n          if (errorWindow == null) {\r\n             JLabel errorLabel = new JLabel(ERROR_TEXT);\r\n             Window topLevelWin = SwingUtilities.getWindowAncestor(this);\r\n             errorWindow = new JWindow(topLevelWin);\r\n             JPanel contentPane = (JPanel) errorWindow.getContentPane();\r\n             contentPane.add(errorLabel);\r\n             contentPane.setBackground(Color.white);\r\n             contentPane.setBorder(BorderFactory.createLineBorder(Color.LIGHT_GRAY));\r\n             errorWindow.pack();\r\n          }\r\n          \r\n          Point loc = textField.getLocationOnScreen();\r\n          errorWindow.setLocation(loc.x + 20, loc.y + 30);\r\n          errorWindow.setVisible(true);\r\n       }\r\n    \r\n       private boolean textOK(String text) {\r\n          if (text.matches(REGEX_TEST)) {\r\n             return true;\r\n          }\r\n          return false;\r\n       }\r\n    \r\n       private class MyNumberDocFilter extends DocumentFilter {\r\n          @Override\r\n          public void insertString(FilterBypass fb, int offset, String string,\r\n                   AttributeSet attr) throws BadLocationException {\r\n             if (textOK(string)) {\r\n                super.insertString(fb, offset, string, attr);\r\n                if (errorWindow != null &amp;&amp; errorWindow.isVisible()) {\r\n                   errorWindow.setVisible(false);\r\n                }\r\n             } else {\r\n                showErrorWin();\r\n             }\r\n          }\r\n          \r\n          @Override\r\n          public void replace(FilterBypass fb, int offset, int length, String text,\r\n                   AttributeSet attrs) throws BadLocationException {\r\n             if (textOK(text)) {\r\n                super.replace(fb, offset, length, text, attrs);\r\n                if (errorWindow != null &amp;&amp; errorWindow.isVisible()) {\r\n                   errorWindow.setVisible(false);\r\n                }\r\n             } else {\r\n                showErrorWin();\r\n             }\r\n          }\r\n          \r\n          @Override\r\n          public void remove(FilterBypass fb, int offset, int length)\r\n                   throws BadLocationException {\r\n             super.remove(fb, offset, length);\r\n             if (errorWindow != null &amp;&amp; errorWindow.isVisible()) {\r\n                errorWindow.setVisible(false);\r\n             }\r\n          }\r\n       }\r\n       \r\n       private static void createAndShowUI() {\r\n          JFrame frame = new JFrame(&quot;Info Balloon&quot;);\r\n          frame.getContentPane().add(new InfoBalloon());\r\n          frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n          frame.pack();\r\n          frame.setLocationRelativeTo(null);\r\n          frame.setVisible(true);\r\n       }\r\n    \r\n       public static void main(String[] args) {\r\n          java.awt.EventQueue.invokeLater(new Runnable() {\r\n             public void run() {\r\n                createAndShowUI();\r\n             }\r\n          });\r\n       }\r\n    }\r\n\r\nConstructive or destructive criticism is most welcome!","title":"How to display a temporary baloon tooltip during input validation?","body":"<p>The link given by James Poulson probably provides a better solution, but I had to see if this were possible with some simple Java code using a DocumentFilter and a JWindow.  Here's one possible way to do this:</p>\n\n<pre><code>import java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Point;\nimport java.awt.Window;\nimport javax.swing.*;\nimport javax.swing.text.AttributeSet;\nimport javax.swing.text.BadLocationException;\nimport javax.swing.text.DocumentFilter;\nimport javax.swing.text.PlainDocument;\n\npublic class InfoBalloon extends JPanel {\n   private static final int PREF_WIDTH = 400;\n   private static final int PREF_HEIGHT = 300;\n   private static final String REGEX_TEST = \"\\\\d*\";\n   private static final String ERROR_TEXT = \"Please only add numbers to the text field\";\n   private JTextField textField = new JTextField(10);\n   private JWindow errorWindow;\n\n\n   public InfoBalloon() {\n      add(new JLabel(\"Please Enter Number\"));\n      add(textField);\n\n      ((PlainDocument)textField.getDocument()).setDocumentFilter(new MyNumberDocFilter());\n   }\n\n   @Override\n   public Dimension getPreferredSize() {\n      return new Dimension(PREF_WIDTH, PREF_HEIGHT);\n   }\n\n   private void showErrorWin() {     \n      if (errorWindow == null) {\n         JLabel errorLabel = new JLabel(ERROR_TEXT);\n         Window topLevelWin = SwingUtilities.getWindowAncestor(this);\n         errorWindow = new JWindow(topLevelWin);\n         JPanel contentPane = (JPanel) errorWindow.getContentPane();\n         contentPane.add(errorLabel);\n         contentPane.setBackground(Color.white);\n         contentPane.setBorder(BorderFactory.createLineBorder(Color.LIGHT_GRAY));\n         errorWindow.pack();\n      }\n\n      Point loc = textField.getLocationOnScreen();\n      errorWindow.setLocation(loc.x + 20, loc.y + 30);\n      errorWindow.setVisible(true);\n   }\n\n   private boolean textOK(String text) {\n      if (text.matches(REGEX_TEST)) {\n         return true;\n      }\n      return false;\n   }\n\n   private class MyNumberDocFilter extends DocumentFilter {\n      @Override\n      public void insertString(FilterBypass fb, int offset, String string,\n               AttributeSet attr) throws BadLocationException {\n         if (textOK(string)) {\n            super.insertString(fb, offset, string, attr);\n            if (errorWindow != null &amp;&amp; errorWindow.isVisible()) {\n               errorWindow.setVisible(false);\n            }\n         } else {\n            showErrorWin();\n         }\n      }\n\n      @Override\n      public void replace(FilterBypass fb, int offset, int length, String text,\n               AttributeSet attrs) throws BadLocationException {\n         if (textOK(text)) {\n            super.replace(fb, offset, length, text, attrs);\n            if (errorWindow != null &amp;&amp; errorWindow.isVisible()) {\n               errorWindow.setVisible(false);\n            }\n         } else {\n            showErrorWin();\n         }\n      }\n\n      @Override\n      public void remove(FilterBypass fb, int offset, int length)\n               throws BadLocationException {\n         super.remove(fb, offset, length);\n         if (errorWindow != null &amp;&amp; errorWindow.isVisible()) {\n            errorWindow.setVisible(false);\n         }\n      }\n   }\n\n   private static void createAndShowUI() {\n      JFrame frame = new JFrame(\"Info Balloon\");\n      frame.getContentPane().add(new InfoBalloon());\n      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n      frame.pack();\n      frame.setLocationRelativeTo(null);\n      frame.setVisible(true);\n   }\n\n   public static void main(String[] args) {\n      java.awt.EventQueue.invokeLater(new Runnable() {\n         public void run() {\n            createAndShowUI();\n         }\n      });\n   }\n}\n</code></pre>\n\n<p>Constructive or destructive criticism is most welcome!</p>\n"},{"tags":[],"owner":{"account_id":114124,"reputation":10809,"user_id":300248,"accept_rate":74,"display_name":"simpatico"},"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1693385846,"creation_date":1314769859,"answer_id":7253064,"question_id":7138511,"body_markdown":"[Balloon Tip][1] (available on [Maven Central][2]) is a library that does that: \r\n\r\n    balloonTip = new BalloonTip(f, &quot;Tooltip msg&quot;);\r\n\r\n\r\nThat was all needed! If you insist on a having it be a tooltip too:\r\n\r\n    tooltipBalloon = new BalloonTip(someComponent, &quot;I&#39;m a balloon tooltip!&quot;);\r\n    // Now convert this balloon tip to a tooltip, such that the tooltip shows up after 500 milliseconds and stays visible for 3000 milliseconds\r\n    ToolTipUtils.balloonToToolTip(tooltipBalloon, 500, 3000);\r\n\r\n\r\n  [1]: https://github.com/timmolderez/balloontip\r\n  [2]: https://mvnrepository.com/artifact/net.java.balloontip/balloontip","title":"How to display a temporary baloon tooltip during input validation?","body":"<p><a href=\"https://github.com/timmolderez/balloontip\" rel=\"nofollow noreferrer\">Balloon Tip</a> (available on <a href=\"https://mvnrepository.com/artifact/net.java.balloontip/balloontip\" rel=\"nofollow noreferrer\">Maven Central</a>) is a library that does that:</p>\n<pre><code>balloonTip = new BalloonTip(f, &quot;Tooltip msg&quot;);\n</code></pre>\n<p>That was all needed! If you insist on a having it be a tooltip too:</p>\n<pre><code>tooltipBalloon = new BalloonTip(someComponent, &quot;I'm a balloon tooltip!&quot;);\n// Now convert this balloon tip to a tooltip, such that the tooltip shows up after 500 milliseconds and stays visible for 3000 milliseconds\nToolTipUtils.balloonToToolTip(tooltipBalloon, 500, 3000);\n</code></pre>\n"}],"owner":{"account_id":114124,"reputation":10809,"user_id":300248,"accept_rate":74,"display_name":"simpatico"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12259,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":7253064,"answer_count":2,"score":12,"last_activity_date":1693385846,"creation_date":1313932835,"question_id":7138511,"body_markdown":"I&#39;m somewhat used to the GUI idiom where when I type something wrong in a text input field a balloon pops up from the field with info about what I got wrong / expected input. It remains visible until I type again.\r\nBut now I couldn&#39;t find any example to point to.\r\n\r\nGiven a JTextfield do you know of any library/code that would display such a balloon when triggered by my keylistener?  \r\n\r\n@see http://www.javapractices.com/topic/TopicAction.do?Id=151","title":"How to display a temporary baloon tooltip during input validation?","body":"<p>I'm somewhat used to the GUI idiom where when I type something wrong in a text input field a balloon pops up from the field with info about what I got wrong / expected input. It remains visible until I type again.\nBut now I couldn't find any example to point to.</p>\n\n<p>Given a JTextfield do you know of any library/code that would display such a balloon when triggered by my keylistener?  </p>\n\n<p>@see <a href=\"http://www.javapractices.com/topic/TopicAction.do?Id=151\" rel=\"noreferrer\">http://www.javapractices.com/topic/TopicAction.do?Id=151</a></p>\n"},{"tags":["java","javafx-2"],"comments":[{"owner":{"account_id":128400,"reputation":3225,"user_id":326206,"accept_rate":76,"display_name":"Nicolas Mommaerts"},"score":1,"creation_date":1357141536,"post_id":14124804,"comment_id":19552545,"body_markdown":"Instead of constantly adding transforms, can&#39;t you combine the new transform with the previous one? So you always have only one transform of each type.","body":"Instead of constantly adding transforms, can&#39;t you combine the new transform with the previous one? So you always have only one transform of each type."},{"owner":{"account_id":8131,"reputation":17334,"user_id":14455,"accept_rate":58,"display_name":"akauppi"},"score":0,"creation_date":1357223636,"post_id":14124804,"comment_id":19581654,"body_markdown":"Yes, I did that but the even better approach is utilizing the Observable behaviour of the transform objects (i.e. &#39;.x&#39; is a DoubleProperty).","body":"Yes, I did that but the even better approach is utilizing the Observable behaviour of the transform objects (i.e. &#39;.x&#39; is a DoubleProperty)."}],"answers":[{"tags":[],"owner":{"account_id":8131,"reputation":17334,"user_id":14455,"accept_rate":58,"display_name":"akauppi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1357223558,"creation_date":1357223558,"answer_id":14140916,"question_id":14124804,"body_markdown":"It took a while to get to the &#39;thinking&#39; of JavaFX transformations. The idea is that one makes a list of transforms, and changes the Observable parameters of those transforms. This takes away the need to constantly add more and more transforms to the list.\r\n\r\nThis is actually a very cute way of handling it. Sadly it&#39;s not obvious from any of the docs I&#39;ve read (reason to leave this entry in SO me thinks).\r\n\r\nThe necessary code is something like:\r\n\r\n    private val panTrans = new Translate(0,0)\r\n        \r\n    transforms = \r\n      panTrans ::\r\n      Nil\r\n        \r\n    ...\r\n        \r\n    panTrans.x = panTrans.x() + dx\r\n    panTrans.y = panTrans.y() + dy\r\n\r\nI think it will be obvious from here.","title":"How to avoid a huge list of JavaFX coordinate translations (caused by UI responses)","body":"<p>It took a while to get to the 'thinking' of JavaFX transformations. The idea is that one makes a list of transforms, and changes the Observable parameters of those transforms. This takes away the need to constantly add more and more transforms to the list.</p>\n\n<p>This is actually a very cute way of handling it. Sadly it's not obvious from any of the docs I've read (reason to leave this entry in SO me thinks).</p>\n\n<p>The necessary code is something like:</p>\n\n<pre><code>private val panTrans = new Translate(0,0)\n\ntransforms = \n  panTrans ::\n  Nil\n\n...\n\npanTrans.x = panTrans.x() + dx\npanTrans.y = panTrans.y() + dy\n</code></pre>\n\n<p>I think it will be obvious from here.</p>\n"},{"tags":[],"owner":{"account_id":6540092,"reputation":1270,"user_id":5058026,"accept_rate":62,"display_name":"Martin CR"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693385745,"creation_date":1693328000,"answer_id":77002221,"question_id":14124804,"body_markdown":"The original question asked:\r\n\r\n&gt; Doesn&#39;t this imply that there&#39;s a list (even, an observable list) of potentially hundreds or thousands of entries long?\r\n\r\nYes that&#39;s correct.\r\n\r\n&gt; If so, I would like to flatten the list occasionally.\r\n\r\nIf you want to flatten the list then in most cases you can do so like this:\r\n \r\n    Transform aggregate = myGroup.getLocalToSceneTransform();\r\n    myGroup.getTransforms().clear();\r\n    myGroup.getTransforms().add(aggregate);\r\n\r\nA bit clunky but it works.\r\n\r\n**HOWEVER** as you point out a neater approach is to add a _single_ transform to the observable list of the `Node` and keep updating it.\r\n\r\nIn cases where you need to concatenate to the the existing transform use an `Affine` ([javafx.scene.transform.Affine][1]) because it has ‘append()’ methods. For example:\r\n\r\n\r\n    Affine affine = new Affine();\r\n    myGroup.getTransforms().add(affine);\r\n\r\n    // then in your event handler or loop\r\n    affine.append(myNewTransform);\r\n\r\n   \r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/javafx/api/javafx/scene/transform/Affine.html","title":"How to avoid a huge list of JavaFX coordinate translations (caused by UI responses)","body":"<p>The original question asked:</p>\n<blockquote>\n<p>Doesn't this imply that there's a list (even, an observable list) of potentially hundreds or thousands of entries long?</p>\n</blockquote>\n<p>Yes that's correct.</p>\n<blockquote>\n<p>If so, I would like to flatten the list occasionally.</p>\n</blockquote>\n<p>If you want to flatten the list then in most cases you can do so like this:</p>\n<pre><code>Transform aggregate = myGroup.getLocalToSceneTransform();\nmyGroup.getTransforms().clear();\nmyGroup.getTransforms().add(aggregate);\n</code></pre>\n<p>A bit clunky but it works.</p>\n<p><strong>HOWEVER</strong> as you point out a neater approach is to add a <em>single</em> transform to the observable list of the <code>Node</code> and keep updating it.</p>\n<p>In cases where you need to concatenate to the the existing transform use an <code>Affine</code> (<a href=\"https://docs.oracle.com/javase/8/javafx/api/javafx/scene/transform/Affine.html\" rel=\"nofollow noreferrer\">javafx.scene.transform.Affine</a>) because it has ‘append()’ methods. For example:</p>\n<pre><code>Affine affine = new Affine();\nmyGroup.getTransforms().add(affine);\n\n// then in your event handler or loop\naffine.append(myNewTransform);\n</code></pre>\n"}],"owner":{"account_id":8131,"reputation":17334,"user_id":14455,"accept_rate":58,"display_name":"akauppi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":472,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1693385745,"creation_date":1357141362,"question_id":14124804,"body_markdown":"I&#39;m making a ScalaFX (but use of Scala is irrelevant here) application with a user interface similar to i.e. Google maps. There&#39;s panning and zooming.\r\n\r\nFor each such change of the user&#39;s viewpoint, I add a transform into a Group&#39;s `.transforms`.\r\n\r\n    transforms += new Translate( dx, dy )\r\n\r\nor\r\n\r\n    transforms += new Scale( 1/f,1/f, cx, cy )\r\n\r\nThis seems like the only way to affect transformations (apart from `translateXYZ`, `layoutXYZ`, which I&#39;m ignoring), and it works.\r\n\r\nThe [docs][1] say this:\r\n\r\n&gt; Multiple transformations may be applied to a node by specifying an\r\n&gt; ordered chain of transforms. The order in which the transforms are\r\n&gt; applied is defined by the ObservableList specified in the transforms\r\n&gt; variable.\r\n\r\nDoesn&#39;t this imply that there&#39;s a list (even, an observable list) of potentially hundreds or thousands of entries long?\r\n\r\nIf so, I would like to flatten the list occasionally. Tried calling `.localToSceneTransoform` and `.localToParentTransform` for this (thinking I&#39;d then set the .transforms with the received overall affine matrix). That *crashed* the JVM. \r\n\r\nAm I doing something wrong here, or should I just stop caring about the list growing, well, indefinately?\r\n\r\nCan provide a short ScalaFX sample code to highlight all this (including the crash). Please ask.\r\n\r\nSystem: OS X, JVM 7u10\r\n\r\n\r\n  [1]: http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html","title":"How to avoid a huge list of JavaFX coordinate translations (caused by UI responses)","body":"<p>I'm making a ScalaFX (but use of Scala is irrelevant here) application with a user interface similar to i.e. Google maps. There's panning and zooming.</p>\n\n<p>For each such change of the user's viewpoint, I add a transform into a Group's <code>.transforms</code>.</p>\n\n<pre><code>transforms += new Translate( dx, dy )\n</code></pre>\n\n<p>or</p>\n\n<pre><code>transforms += new Scale( 1/f,1/f, cx, cy )\n</code></pre>\n\n<p>This seems like the only way to affect transformations (apart from <code>translateXYZ</code>, <code>layoutXYZ</code>, which I'm ignoring), and it works.</p>\n\n<p>The <a href=\"http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html\" rel=\"nofollow\">docs</a> say this:</p>\n\n<blockquote>\n  <p>Multiple transformations may be applied to a node by specifying an\n  ordered chain of transforms. The order in which the transforms are\n  applied is defined by the ObservableList specified in the transforms\n  variable.</p>\n</blockquote>\n\n<p>Doesn't this imply that there's a list (even, an observable list) of potentially hundreds or thousands of entries long?</p>\n\n<p>If so, I would like to flatten the list occasionally. Tried calling <code>.localToSceneTransoform</code> and <code>.localToParentTransform</code> for this (thinking I'd then set the .transforms with the received overall affine matrix). That <em>crashed</em> the JVM. </p>\n\n<p>Am I doing something wrong here, or should I just stop caring about the list growing, well, indefinately?</p>\n\n<p>Can provide a short ScalaFX sample code to highlight all this (including the crash). Please ask.</p>\n\n<p>System: OS X, JVM 7u10</p>\n"},{"tags":["java","spring","spring-boot","hibernate","jpa"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":3,"creation_date":1693222376,"post_id":76992390,"comment_id":135727264,"body_markdown":"Please add the complete stacktrace","body":"Please add the complete stacktrace"},{"owner":{"account_id":13128343,"reputation":912,"user_id":9483513,"display_name":"Sarangan"},"score":0,"creation_date":1693223072,"post_id":76992390,"comment_id":135727386,"body_markdown":"Added the Complete stacktrace","body":"Added the Complete stacktrace"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":1,"creation_date":1693223196,"post_id":76992390,"comment_id":135727423,"body_markdown":"*Unknown table &#39;SEQUENCES&#39; in information_schema* Do you have set the correct dialect?","body":"<i>Unknown table &#39;SEQUENCES&#39; in information_schema</i> Do you have set the correct dialect?"},{"owner":{"account_id":13128343,"reputation":912,"user_id":9483513,"display_name":"Sarangan"},"score":0,"creation_date":1693224693,"post_id":76992390,"comment_id":135727733,"body_markdown":"You are correct. The dialect is Postgresql in my context. Thank you. I changed the dialect to MySQL and it works. `spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect`","body":"You are correct. The dialect is Postgresql in my context. Thank you. I changed the dialect to MySQL and it works. <code>spring.jpa.properties.hibernate.dialect=org.hibernate.dialec&zwnj;&#8203;t.MySQLDialect</code>"},{"owner":{"account_id":2148452,"reputation":578,"user_id":1905511,"accept_rate":100,"display_name":"Herbert Yu"},"score":0,"creation_date":1693347518,"post_id":76992390,"comment_id":135748283,"body_markdown":"&quot;I changed the dialect to MySQL and it works.&quot;\nYou mean this can be closed? Give credit to @Jens, then close it.","body":"&quot;I changed the dialect to MySQL and it works.&quot; You mean this can be closed? Give credit to @Jens, then close it."},{"owner":{"account_id":13128343,"reputation":912,"user_id":9483513,"display_name":"Sarangan"},"score":0,"creation_date":1693385190,"post_id":76992390,"comment_id":135752237,"body_markdown":"@Jens Could you please post this as an answer? I can accept it and upvote that answer.","body":"@Jens Could you please post this as an answer? I can accept it and upvote that answer."},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1693385473,"post_id":76992390,"comment_id":135752317,"body_markdown":"@Sarangan Have done it.","body":"@Sarangan Have done it."}],"answers":[{"tags":[],"owner":{"account_id":26165800,"reputation":11,"user_id":19851647,"display_name":"boubaker asma"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693289523,"creation_date":1693223883,"answer_id":76992592,"question_id":76992390,"body_markdown":"Ensure that you have set the correct Hibernate dialect for MySQL in your application.properties :\r\n\r\n`spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect`\r\n\r\n[application.properties][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/wmTSD.png\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Hibernate SessionFactory Error with JPA in Spring Boot","body":"<p>Ensure that you have set the correct Hibernate dialect for MySQL in your application.properties :</p>\n<p><code>spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect</code></p>\n<p><a href=\"https://i.stack.imgur.com/wmTSD.png\" rel=\"nofollow noreferrer\">application.properties</a></p>\n"},{"tags":[],"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1693385454,"creation_date":1693385454,"answer_id":77006380,"question_id":76992390,"body_markdown":"The error message *Unknown table &#39;SEQUENCES&#39; in information_schema* indicates, that you have set the wrong dialect, because `GenerationType.AUTO` in mysql uses an `auto_increment`not a sequence. So change your dialect to the `MySQLDialect`\r\n\r\n    spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect","title":"Hibernate SessionFactory Error with JPA in Spring Boot","body":"<p>The error message <em>Unknown table 'SEQUENCES' in information_schema</em> indicates, that you have set the wrong dialect, because <code>GenerationType.AUTO</code> in mysql uses an <code>auto_increment</code>not a sequence. So change your dialect to the <code>MySQLDialect</code></p>\n<pre><code>spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect\n</code></pre>\n"}],"owner":{"account_id":13128343,"reputation":912,"user_id":9483513,"display_name":"Sarangan"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":135,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":77006380,"answer_count":2,"score":-1,"last_activity_date":1693385454,"creation_date":1693222022,"question_id":76992390,"body_markdown":"I&#39;m encountering an issue with my Spring Boot application when trying to create a Hibernate SessionFactory for a JPA entity named Customer. Here&#39;s my Customer entity class:\r\n\r\n    package com.flexPerk.flexCore.model;\r\n    \r\n    import jakarta.persistence.Entity;\r\n    import jakarta.persistence.GeneratedValue;\r\n    import jakarta.persistence.GenerationType;\r\n    import jakarta.persistence.Id;\r\n    \r\n    @Entity\r\n    public class Customer {\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.AUTO)\r\n        private Long id;\r\n        private String firstName;\r\n        private String lastName;\r\n    \r\n        protected Customer() {}\r\n    \r\n        @Override\r\n        public String toString() {\r\n            return String.format(&quot;Customer[id=%d, firstName=&#39;%s&#39;, lastName=&#39;%s&#39;]&quot;, id, firstName, lastName);\r\n        }\r\n    \r\n        public Long getId() {\r\n            return id;\r\n        }\r\n    \r\n        public String getFirstName() {\r\n            return firstName;\r\n        }\r\n    \r\n        public String getLastName() {\r\n            return lastName;\r\n        }\r\n    }\r\n\r\nHowever, I&#39;m encountering the following error message:\r\n\r\n    org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource \r\n\r\n    [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.MappingException: Could not instantiate id generator [entity-name=com.flexPerk.flexCore.model.Customer]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770) ~[spring-beans-6.0.11.jar:6.0.11]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.11.jar:6.0.11]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.11.jar:6.0.11]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.11.jar:6.0.11]\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.11.jar:6.0.11]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.11.jar:6.0.11]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.11.jar:6.0.11]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1155) ~[spring-context-6.0.11.jar:6.0.11]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932) ~[spring-context-6.0.11.jar:6.0.11]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608) ~[spring-context-6.0.11.jar:6.0.11]\r\n    \tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.2.jar:3.1.2]\r\n    \tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-3.1.2.jar:3.1.2]\r\n    \tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436) ~[spring-boot-3.1.2.jar:3.1.2]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:312) ~[spring-boot-3.1.2.jar:3.1.2]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-3.1.2.jar:3.1.2]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-3.1.2.jar:3.1.2]\r\n    \tat com.flexPerk.flexCore.FlexCoreApplication.main(FlexCoreApplication.java:10) ~[classes/:na]\r\n    Caused by: jakarta.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.MappingException: Could not instantiate id generator [entity-name=com.flexPerk.flexCore.model.Customer]\r\n    \tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:421) ~[spring-orm-6.0.11.jar:6.0.11]\r\n    \tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.0.11.jar:6.0.11]\r\n    \tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352) ~[spring-orm-6.0.11.jar:6.0.11]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1817) ~[spring-beans-6.0.11.jar:6.0.11]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766) ~[spring-beans-6.0.11.jar:6.0.11]\r\n    \t... 16 common frames omitted\r\n    Caused by: org.hibernate.MappingException: Could not instantiate id generator [entity-name=com.flexPerk.flexCore.model.Customer]\r\n    \tat org.hibernate.id.factory.internal.StandardIdentifierGeneratorFactory.createIdentifierGenerator(StandardIdentifierGeneratorFactory.java:230) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n    \tat org.hibernate.id.factory.internal.IdentifierGeneratorUtil.createLegacyIdentifierGenerator(IdentifierGeneratorUtil.java:126) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n    \tat org.hibernate.mapping.SimpleValue.createGenerator(SimpleValue.java:414) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n    \tat org.hibernate.internal.SessionFactoryImpl.lambda$createGenerators$1(SessionFactoryImpl.java:413) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n    \tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183) ~[na:na]\r\n    \tat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]\r\n    \tat java.base/java.util.HashMap$ValueSpliterator.forEachRemaining(HashMap.java:1787) ~[na:na]\r\n    \tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]\r\n    \tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]\r\n    \tat java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150) ~[na:na]\r\n    \tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173) ~[na:na]\r\n    \tat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]\r\n    \tat java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]\r\n    \tat org.hibernate.internal.SessionFactoryImpl.createGenerators(SessionFactoryImpl.java:412) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n    \tat org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:249) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n    \tat org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:431) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n    \tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1455) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n    \tat org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75) ~[spring-orm-6.0.11.jar:6.0.11]\r\n    \tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376) ~[spring-orm-6.0.11.jar:6.0.11]\r\n    \tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.0.11.jar:6.0.11]\r\n    \t... 20 common frames omitted\r\n    Caused by: org.hibernate.HibernateException: Could not fetch the SequenceInformation from the database\r\n    \tat org.hibernate.engine.jdbc.env.internal.ExtractedDatabaseMetaDataImpl.sequenceInformationList(ExtractedDatabaseMetaDataImpl.java:307) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n    \tat org.hibernate.engine.jdbc.env.internal.ExtractedDatabaseMetaDataImpl.getSequenceInformationList(ExtractedDatabaseMetaDataImpl.java:151) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n    \tat org.hibernate.id.enhanced.SequenceStyleGenerator.getSequenceIncrementValue(SequenceStyleGenerator.java:568) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n    \tat org.hibernate.id.enhanced.SequenceStyleGenerator.configure(SequenceStyleGenerator.java:216) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n    \tat org.hibernate.id.factory.internal.StandardIdentifierGeneratorFactory.createIdentifierGenerator(StandardIdentifierGeneratorFactory.java:224) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n    \t... 39 common frames omitted\r\n    Caused by: java.sql.SQLSyntaxErrorException: Unknown table &#39;SEQUENCES&#39; in information_schema\r\n    \tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121) ~[mysql-connector-j-8.0.33.jar:8.0.33]\r\n    \tat com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122) ~[mysql-connector-j-8.0.33.jar:8.0.33]\r\n    \tat com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916) ~[mysql-connector-j-8.0.33.jar:8.0.33]\r\n    \tat com.mysql.cj.jdbc.ClientPreparedStatement.executeQuery(ClientPreparedStatement.java:972) ~[mysql-connector-j-8.0.33.jar:8.0.33]\r\n    \tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52) ~[HikariCP-5.0.1.jar:na]\r\n    \tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java) ~[HikariCP-5.0.1.jar:na]\r\n    \tat org.hibernate.tool.schema.extract.spi.ExtractionContext.getQueryResults(ExtractionContext.java:49) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n    \tat org.hibernate.tool.schema.extract.internal.SequenceInformationExtractorLegacyImpl.extractMetadata(SequenceInformationExtractorLegacyImpl.java:39) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n    \tat org.hibernate.engine.jdbc.env.internal.ExtractedDatabaseMetaDataImpl.sequenceInformationList(ExtractedDatabaseMetaDataImpl.java:291) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n    \t... 43 common frames omitted\r\n\r\n\r\nI&#39;m using Spring Boot(3.1.2) with JPA with MySQL and Hibernate for this project. Can someone please help me understand what might be causing this error and how I can resolve it?\r\n\r\n\r\n\r\n\r\n","title":"Hibernate SessionFactory Error with JPA in Spring Boot","body":"<p>I'm encountering an issue with my Spring Boot application when trying to create a Hibernate SessionFactory for a JPA entity named Customer. Here's my Customer entity class:</p>\n<pre><code>package com.flexPerk.flexCore.model;\n\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.GenerationType;\nimport jakarta.persistence.Id;\n\n@Entity\npublic class Customer {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Long id;\n    private String firstName;\n    private String lastName;\n\n    protected Customer() {}\n\n    @Override\n    public String toString() {\n        return String.format(&quot;Customer[id=%d, firstName='%s', lastName='%s']&quot;, id, firstName, lastName);\n    }\n\n    public Long getId() {\n        return id;\n    }\n\n    public String getFirstName() {\n        return firstName;\n    }\n\n    public String getLastName() {\n        return lastName;\n    }\n}\n</code></pre>\n<p>However, I'm encountering the following error message:</p>\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource \n\n[org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.MappingException: Could not instantiate id generator [entity-name=com.flexPerk.flexCore.model.Customer]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1155) ~[spring-context-6.0.11.jar:6.0.11]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932) ~[spring-context-6.0.11.jar:6.0.11]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608) ~[spring-context-6.0.11.jar:6.0.11]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.2.jar:3.1.2]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-3.1.2.jar:3.1.2]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436) ~[spring-boot-3.1.2.jar:3.1.2]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:312) ~[spring-boot-3.1.2.jar:3.1.2]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-3.1.2.jar:3.1.2]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-3.1.2.jar:3.1.2]\n    at com.flexPerk.flexCore.FlexCoreApplication.main(FlexCoreApplication.java:10) ~[classes/:na]\nCaused by: jakarta.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.MappingException: Could not instantiate id generator [entity-name=com.flexPerk.flexCore.model.Customer]\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:421) ~[spring-orm-6.0.11.jar:6.0.11]\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.0.11.jar:6.0.11]\n    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352) ~[spring-orm-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1817) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766) ~[spring-beans-6.0.11.jar:6.0.11]\n    ... 16 common frames omitted\nCaused by: org.hibernate.MappingException: Could not instantiate id generator [entity-name=com.flexPerk.flexCore.model.Customer]\n    at org.hibernate.id.factory.internal.StandardIdentifierGeneratorFactory.createIdentifierGenerator(StandardIdentifierGeneratorFactory.java:230) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.id.factory.internal.IdentifierGeneratorUtil.createLegacyIdentifierGenerator(IdentifierGeneratorUtil.java:126) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.mapping.SimpleValue.createGenerator(SimpleValue.java:414) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.internal.SessionFactoryImpl.lambda$createGenerators$1(SessionFactoryImpl.java:413) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183) ~[na:na]\n    at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]\n    at java.base/java.util.HashMap$ValueSpliterator.forEachRemaining(HashMap.java:1787) ~[na:na]\n    at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]\n    at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]\n    at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150) ~[na:na]\n    at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173) ~[na:na]\n    at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]\n    at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]\n    at org.hibernate.internal.SessionFactoryImpl.createGenerators(SessionFactoryImpl.java:412) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:249) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:431) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1455) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75) ~[spring-orm-6.0.11.jar:6.0.11]\n    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376) ~[spring-orm-6.0.11.jar:6.0.11]\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.0.11.jar:6.0.11]\n    ... 20 common frames omitted\nCaused by: org.hibernate.HibernateException: Could not fetch the SequenceInformation from the database\n    at org.hibernate.engine.jdbc.env.internal.ExtractedDatabaseMetaDataImpl.sequenceInformationList(ExtractedDatabaseMetaDataImpl.java:307) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.engine.jdbc.env.internal.ExtractedDatabaseMetaDataImpl.getSequenceInformationList(ExtractedDatabaseMetaDataImpl.java:151) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.id.enhanced.SequenceStyleGenerator.getSequenceIncrementValue(SequenceStyleGenerator.java:568) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.id.enhanced.SequenceStyleGenerator.configure(SequenceStyleGenerator.java:216) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.id.factory.internal.StandardIdentifierGeneratorFactory.createIdentifierGenerator(StandardIdentifierGeneratorFactory.java:224) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    ... 39 common frames omitted\nCaused by: java.sql.SQLSyntaxErrorException: Unknown table 'SEQUENCES' in information_schema\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121) ~[mysql-connector-j-8.0.33.jar:8.0.33]\n    at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122) ~[mysql-connector-j-8.0.33.jar:8.0.33]\n    at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916) ~[mysql-connector-j-8.0.33.jar:8.0.33]\n    at com.mysql.cj.jdbc.ClientPreparedStatement.executeQuery(ClientPreparedStatement.java:972) ~[mysql-connector-j-8.0.33.jar:8.0.33]\n    at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52) ~[HikariCP-5.0.1.jar:na]\n    at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java) ~[HikariCP-5.0.1.jar:na]\n    at org.hibernate.tool.schema.extract.spi.ExtractionContext.getQueryResults(ExtractionContext.java:49) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.tool.schema.extract.internal.SequenceInformationExtractorLegacyImpl.extractMetadata(SequenceInformationExtractorLegacyImpl.java:39) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.engine.jdbc.env.internal.ExtractedDatabaseMetaDataImpl.sequenceInformationList(ExtractedDatabaseMetaDataImpl.java:291) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    ... 43 common frames omitted\n</code></pre>\n<p>I'm using Spring Boot(3.1.2) with JPA with MySQL and Hibernate for this project. Can someone please help me understand what might be causing this error and how I can resolve it?</p>\n"},{"tags":["java","rest","junit","resttemplate","http-patch"],"comments":[{"owner":{"account_id":174271,"reputation":1327,"user_id":403517,"display_name":"Brian Maltzan"},"score":1,"creation_date":1487259286,"post_id":41557069,"comment_id":71712733,"body_markdown":"http://stackoverflow.com/questions/29447382/resttemplate-patch-request","body":"<a href=\"http://stackoverflow.com/questions/29447382/resttemplate-patch-request\" title=\"resttemplate patch request\">stackoverflow.com/questions/29447382/resttemplate-patch-requ&zwnj;&#8203;est</a>"}],"answers":[{"tags":[],"owner":{"account_id":7527744,"reputation":1350,"user_id":5717245,"display_name":"Alexander Yanyshin"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1484039348,"creation_date":1484039348,"answer_id":41565021,"question_id":41557069,"body_markdown":"By default `RestTemplate` uses standard JDK `HttpURLConnection` HTTP client to make requests. This client does not support `PATCH` method. You can configure `RestTemplate` to use some other HTTP client via client factory, like `HttpComponentsClientHttpRequestFactory` or `OkHttpClientHttpRequestFactory`.\r\n\r\n    HttpClient client = HttpClients.createDefault();\r\n    RestTemplate template= new RestTemplate();\r\n    template.setRequestFactory(new HttpComponentsClientHttpRequestFactory(client)); \r\n\r\nYou will also need to add proper dependencies, something like `org.apache.httpcomponents:httpclient:$version` in case HTTP Components client.","title":"How do I implement a PATCH executed via RestTemplate?","body":"<p>By default <code>RestTemplate</code> uses standard JDK <code>HttpURLConnection</code> HTTP client to make requests. This client does not support <code>PATCH</code> method. You can configure <code>RestTemplate</code> to use some other HTTP client via client factory, like <code>HttpComponentsClientHttpRequestFactory</code> or <code>OkHttpClientHttpRequestFactory</code>.</p>\n\n<pre><code>HttpClient client = HttpClients.createDefault();\nRestTemplate template= new RestTemplate();\ntemplate.setRequestFactory(new HttpComponentsClientHttpRequestFactory(client)); \n</code></pre>\n\n<p>You will also need to add proper dependencies, something like <code>org.apache.httpcomponents:httpclient:$version</code> in case HTTP Components client.</p>\n"},{"tags":[],"owner":{"account_id":4802035,"reputation":321,"user_id":3878399,"accept_rate":69,"display_name":"LitterWalker"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1484058931,"creation_date":1484058931,"answer_id":41571360,"question_id":41557069,"body_markdown":"I discovered a solution that stays consistent with the rest of the JUnit code. Using postForObject(), you can pass in the HTTP method you need in this case:\r\n\r\n\t\tMessageModel pModel = restTemplate.postForObject(TestBase.URL + URL + &quot;/batchUpdateProductPositions?_method=patch&quot;, \r\n\t\t\t\tpps, MessageModel.class);\t\t\t\r\n\r\nThis runs correctly. Couldn&#39;t say if there are side effects I&#39;m not noticing.","title":"How do I implement a PATCH executed via RestTemplate?","body":"<p>I discovered a solution that stays consistent with the rest of the JUnit code. Using postForObject(), you can pass in the HTTP method you need in this case:</p>\n\n<pre><code>    MessageModel pModel = restTemplate.postForObject(TestBase.URL + URL + \"/batchUpdateProductPositions?_method=patch\", \n            pps, MessageModel.class);           \n</code></pre>\n\n<p>This runs correctly. Couldn't say if there are side effects I'm not noticing.</p>\n"},{"tags":[],"owner":{"account_id":12954637,"reputation":21,"user_id":9365894,"display_name":"Mayte Espi Hermida"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1518713778,"creation_date":1518711370,"answer_id":48811682,"question_id":41557069,"body_markdown":"This Solution  \r\n\r\n    MessageModel pModel = restTemplate.postForObject(TestBase.URL + URL + &quot;/batchUpdateProductPositions?_method=patch&quot;,pps, MessageModel.class);   \r\n\r\nIs useful if you are using a Post Method(`@PostMapping`), If you would like to use Patch Method(`@PatchMapping`), Try this:\r\n\r\n    restTemplate.patchForObject(&quot;http://localhost:8080/products/batchUpdateProductPositions&quot;, requestEntity, String.class);\r\n\r\n\r\n","title":"How do I implement a PATCH executed via RestTemplate?","body":"<p>This Solution  </p>\n\n<pre><code>MessageModel pModel = restTemplate.postForObject(TestBase.URL + URL + \"/batchUpdateProductPositions?_method=patch\",pps, MessageModel.class);   \n</code></pre>\n\n<p>Is useful if you are using a Post Method(<code>@PostMapping</code>), If you would like to use Patch Method(<code>@PatchMapping</code>), Try this:</p>\n\n<pre><code>restTemplate.patchForObject(\"http://localhost:8080/products/batchUpdateProductPositions\", requestEntity, String.class);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6577381,"reputation":185,"user_id":5082866,"display_name":"Harendra Kr. Jadon"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1521117801,"creation_date":1521117801,"answer_id":49299778,"question_id":41557069,"body_markdown":"This works for me, for execution of a PATCH request using RestTemplate:\r\n\r\n    RestTemplate restTemplate = new RestTemplate();\r\n    \r\n    HttpComponentsClientHttpRequestFactory httpRequestFactory = new HttpComponentsClientHttpRequestFactory();\r\n    httpRequestFactory.setConnectTimeout(timeout);\r\n    httpRequestFactory.setReadTimeout(timeout);\r\n    \r\n    restTemplate.setRequestFactory(httpRequestFactory);\r\n\r\nNow use this restTemplate with exchange().\r\n\r\n\r\nRequired Dependency\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\r\n        &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\r\n    &lt;/dependency&gt; \r\n\r\n","title":"How do I implement a PATCH executed via RestTemplate?","body":"<p>This works for me, for execution of a PATCH request using RestTemplate:</p>\n\n<pre><code>RestTemplate restTemplate = new RestTemplate();\n\nHttpComponentsClientHttpRequestFactory httpRequestFactory = new HttpComponentsClientHttpRequestFactory();\nhttpRequestFactory.setConnectTimeout(timeout);\nhttpRequestFactory.setReadTimeout(timeout);\n\nrestTemplate.setRequestFactory(httpRequestFactory);\n</code></pre>\n\n<p>Now use this restTemplate with exchange().</p>\n\n<p>Required Dependency</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\n    &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\n&lt;/dependency&gt; \n</code></pre>\n"},{"tags":[],"owner":{"account_id":10772454,"reputation":11,"user_id":7925550,"display_name":"Oluyide Olugbenga"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1557920763,"creation_date":1557916257,"answer_id":56147197,"question_id":41557069,"body_markdown":"Try this:\r\n\r\n    import org.springframework.http.client.HttpComponentsClientHttpRequestFactory;\r\n    //...\r\n    RestTemplate rest = new RestTemplate(new HttpComponentsClientHttpRequestFactory())\r\n\r\n    //Now make the PATCH call using Exchange\r\n    ResponseEntity&lt;Map&lt;String, Object&gt;&gt; response = rest.exchange(api, HttpMethod.PATCH, request, responseType);\r\n\r\nDo not forget to add this to your dependencies:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\r\n        &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\r\n        &lt;version&gt;4.4.1&lt;/version&gt;\r\n     &lt;/dependency&gt;","title":"How do I implement a PATCH executed via RestTemplate?","body":"<p>Try this:</p>\n\n<pre><code>import org.springframework.http.client.HttpComponentsClientHttpRequestFactory;\n//...\nRestTemplate rest = new RestTemplate(new HttpComponentsClientHttpRequestFactory())\n\n//Now make the PATCH call using Exchange\nResponseEntity&lt;Map&lt;String, Object&gt;&gt; response = rest.exchange(api, HttpMethod.PATCH, request, responseType);\n</code></pre>\n\n<p>Do not forget to add this to your dependencies:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\n    &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\n    &lt;version&gt;4.4.1&lt;/version&gt;\n &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10104128,"reputation":4849,"user_id":7467246,"accept_rate":67,"display_name":"Priyantha"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676922872,"creation_date":1676903959,"answer_id":75510671,"question_id":41557069,"body_markdown":"`WebClient` offers a modern alternative to the `RestTemplate` with efficient support for both sync and async, as well as streaming scenarios. You can implement this with WebClient.\r\n\r\nConfigure `WebClient` \r\n\r\n\r\n\r\n    @Configuration\r\n    public class WebConfig {\r\n        public WebClient.Builder webClientBuilder() {\r\n            return WebClient.builder();\r\n        }\r\n    }\r\n\r\nThen you can call method\r\n\r\n\r\n    //Constructor Injection \r\n    public YourClassName(WebClient.Builder webClientBuilder) {\r\n       this.webClientBuilder = webClientBuilder;\r\n    }\r\n\r\n    MessageModel response = webClientBuilder.build()\r\n                    .patch()\r\n                    .uri(&quot;http://localhost:8080/products/batchUpdateProductPositions&quot;)\r\n                    .contentType(MediaType.APPLICATION_JSON)\r\n                    .retrieve()\r\n                    .bodyToMono(MessageModel.class)\r\n                    .block();\r\n\r\n\r\nDependency for pom.xml \r\n\r\n    &lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\r\n\t&lt;/dependency&gt;\r\n         \r\n","title":"How do I implement a PATCH executed via RestTemplate?","body":"<p><code>WebClient</code> offers a modern alternative to the <code>RestTemplate</code> with efficient support for both sync and async, as well as streaming scenarios. You can implement this with WebClient.</p>\n<p>Configure <code>WebClient</code></p>\n<pre><code>@Configuration\npublic class WebConfig {\n    public WebClient.Builder webClientBuilder() {\n        return WebClient.builder();\n    }\n}\n</code></pre>\n<p>Then you can call method</p>\n<pre><code>//Constructor Injection \npublic YourClassName(WebClient.Builder webClientBuilder) {\n   this.webClientBuilder = webClientBuilder;\n}\n\nMessageModel response = webClientBuilder.build()\n                .patch()\n                .uri(&quot;http://localhost:8080/products/batchUpdateProductPositions&quot;)\n                .contentType(MediaType.APPLICATION_JSON)\n                .retrieve()\n                .bodyToMono(MessageModel.class)\n                .block();\n</code></pre>\n<p>Dependency for pom.xml</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\n&lt;/dependency&gt;\n     \n</code></pre>\n"},{"tags":[],"owner":{"account_id":26604654,"reputation":103,"user_id":20225739,"display_name":"Theri Muthu Selvam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693385341,"creation_date":1693385341,"answer_id":77006366,"question_id":41557069,"body_markdown":"Use the following code to overcome this issue,\r\n\r\nAdd the below dependency in `pom.xml`,\r\n\r\n    &lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.apache.httpcomponents.client5&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;httpclient5&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\r\nImport `CloseableHttpClient`, and `HttpClients` from the above dependency&#39;s jar file.\r\n\r\nTo make `HTTP Patch` request using `RestTemplate`, below configurations are mandatory, for other `HTTP` calls you may ignore it.\r\n\r\n    import org.apache.hc.client5.http.impl.classic.CloseableHttpClient;\r\n    import org.apache.hc.client5.http.impl.classic.HttpClients;\r\n    import org.springframework.http.client.HttpComponentsClientHttpRequestFactory;\r\n\r\n    @Bean\r\n    public RestTemplate restTemplate() {\r\n        LOGGER.info(&quot;restTemplate Bean has bean created&quot;);\r\n        CloseableHttpClient httpClient = HttpClients.createDefault();\r\n        HttpComponentsClientHttpRequestFactory factory = new HttpComponentsClientHttpRequestFactory(httpClient);\r\n        RestTemplate restTemplate = new RestTemplate(factory);\r\n        return restTemplate;\r\n    }\r\n\r\nIn the request class use the below code,\r\n\r\n    ResponseEntity&lt;Object&gt; response = restTemplate.exchange(url, HttpMethod.PATCH,  requestEntity, Object.class);","title":"How do I implement a PATCH executed via RestTemplate?","body":"<p>Use the following code to overcome this issue,</p>\n<p>Add the below dependency in <code>pom.xml</code>,</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.httpcomponents.client5&lt;/groupId&gt;\n    &lt;artifactId&gt;httpclient5&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n&lt;dependency&gt;\n</code></pre>\n<p>Import <code>CloseableHttpClient</code>, and <code>HttpClients</code> from the above dependency's jar file.</p>\n<p>To make <code>HTTP Patch</code> request using <code>RestTemplate</code>, below configurations are mandatory, for other <code>HTTP</code> calls you may ignore it.</p>\n<pre><code>import org.apache.hc.client5.http.impl.classic.CloseableHttpClient;\nimport org.apache.hc.client5.http.impl.classic.HttpClients;\nimport org.springframework.http.client.HttpComponentsClientHttpRequestFactory;\n\n@Bean\npublic RestTemplate restTemplate() {\n    LOGGER.info(&quot;restTemplate Bean has bean created&quot;);\n    CloseableHttpClient httpClient = HttpClients.createDefault();\n    HttpComponentsClientHttpRequestFactory factory = new HttpComponentsClientHttpRequestFactory(httpClient);\n    RestTemplate restTemplate = new RestTemplate(factory);\n    return restTemplate;\n}\n</code></pre>\n<p>In the request class use the below code,</p>\n<pre><code>ResponseEntity&lt;Object&gt; response = restTemplate.exchange(url, HttpMethod.PATCH,  requestEntity, Object.class);\n</code></pre>\n"}],"owner":{"account_id":4802035,"reputation":321,"user_id":3878399,"accept_rate":69,"display_name":"LitterWalker"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15264,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":41571360,"answer_count":7,"score":5,"last_activity_date":1693385341,"creation_date":1483996486,"question_id":41557069,"body_markdown":"I am coding JUnit tests, calling my application via `RestTemplate`. I have successfully implemented GETs, POSTs, and PUTs, but can not get a PATCH to run (though it works when a client sends in the URL). A POST, for example, runs with this code:\r\n\r\n    \tRestTemplate restTemplate = new RestTemplate(); \r\n\t\tProductModel postModel = restTemplate.postForObject(TestBase.URL + URL, pModel, ProductModel.class);\t\t\t\r\n\r\nBut when I tried to call restTemplate.patchForObject() - which I found online - STS returns an error saying that function is not defined. I thus used this:\r\n\r\n    \tRestTemplate restTemplate = new RestTemplate(); \r\n\t\tResponseEntity&lt;MessageModel&gt; retval = restTemplate.exchange(&quot;http://localhost:8080/products/batchUpdateProductPositions&quot;, \r\n\t\t\t\tHttpMethod.PATCH, new HttpEntity&lt;ProductPositionListModel&gt;(pps), MessageModel.class);\t\r\n\r\nWhich compiles, but gives me an error:\r\n\r\n    I/O Error on PATCH request for &quot;http://localhost:8080/products/batchUpdateProductPositions&quot;: Invalid HTTP method: PATCH\r\n\r\nIn the application, I have the operation defined in a Controller class:\r\n\r\n    @RequestMapping(value = &quot;/batchUpdateProductPositions&quot;, method = RequestMethod.PATCH)\r\n\tpublic MessageModel batchUpdatePosition(\r\n\t\t\t@RequestBody ProductPositionListModel productPositionList)\r\n\t\t\tthrows Exception {\r\n\t\ttry {\r\n\t\t\treturn productService.batchUpdatePosition(productPositionList);\r\n\t\t} catch (Exception e) {\r\n\r\nI put a breakpoint on the return statement inside the &#39;try&#39; block, but it never tripped when I ran it under debug.\r\n\r\nCan anyone tell me where I tripped up?","title":"How do I implement a PATCH executed via RestTemplate?","body":"<p>I am coding JUnit tests, calling my application via <code>RestTemplate</code>. I have successfully implemented GETs, POSTs, and PUTs, but can not get a PATCH to run (though it works when a client sends in the URL). A POST, for example, runs with this code:</p>\n<pre><code>    RestTemplate restTemplate = new RestTemplate(); \n    ProductModel postModel = restTemplate.postForObject(TestBase.URL + URL, pModel, ProductModel.class);            \n</code></pre>\n<p>But when I tried to call restTemplate.patchForObject() - which I found online - STS returns an error saying that function is not defined. I thus used this:</p>\n<pre><code>    RestTemplate restTemplate = new RestTemplate(); \n    ResponseEntity&lt;MessageModel&gt; retval = restTemplate.exchange(&quot;http://localhost:8080/products/batchUpdateProductPositions&quot;, \n            HttpMethod.PATCH, new HttpEntity&lt;ProductPositionListModel&gt;(pps), MessageModel.class);   \n</code></pre>\n<p>Which compiles, but gives me an error:</p>\n<pre><code>I/O Error on PATCH request for &quot;http://localhost:8080/products/batchUpdateProductPositions&quot;: Invalid HTTP method: PATCH\n</code></pre>\n<p>In the application, I have the operation defined in a Controller class:</p>\n<pre><code>@RequestMapping(value = &quot;/batchUpdateProductPositions&quot;, method = RequestMethod.PATCH)\npublic MessageModel batchUpdatePosition(\n        @RequestBody ProductPositionListModel productPositionList)\n        throws Exception {\n    try {\n        return productService.batchUpdatePosition(productPositionList);\n    } catch (Exception e) {\n</code></pre>\n<p>I put a breakpoint on the return statement inside the 'try' block, but it never tripped when I ran it under debug.</p>\n<p>Can anyone tell me where I tripped up?</p>\n"},{"tags":["java","threadpool"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1693385679,"post_id":77006362,"comment_id":135752362,"body_markdown":"It&#39;s using an [undocumented trick](https://stackoverflow.com/questions/52836178/parallelstream-queue-task-in-commonpool-rather-than-the-custom-pool) to run `parallelStream()` in a different threadpool than the common pool.","body":"It&#39;s using an <a href=\"https://stackoverflow.com/questions/52836178/parallelstream-queue-task-in-commonpool-rather-than-the-custom-pool\">undocumented trick</a> to run <code>parallelStream()</code> in a different threadpool than the common pool."}],"owner":{"account_id":11641375,"reputation":2253,"user_id":8525662,"display_name":"Koen Hendrikx"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693385298,"creation_date":1693385298,"question_id":77006362,"body_markdown":"I found this code and have a hard time understanding how this makes sense.\r\nAs I understand it, this will create a number of threads and then execute the tasks on a single one of those threads and wait for the result, and then stop the threads.\r\nIs there something I am missing?\r\n```\r\nreturn ThreadPoolUtils.parallel(parallelThreads)\r\n                                  .execute(() -&gt; someList.parallelStream().map(someFunction).collect(toList()))\r\n```\r\nWith this definition of ThreadPoolUtils:\r\n```\r\n@Slf4j\r\n@Builder\r\npublic class ThreadPoolUtils {\r\n    private final ExecutorService executorService;\r\n    public static ThreadPoolUtils parallel(int maxThreads) {\r\n        return ThreadPoolUtils.builder()\r\n                              .executorService(new ForkJoinPool(maxThreads))\r\n                              .build();\r\n    }\r\n    public &lt;T&gt; T execute(Callable&lt;T&gt; callable) throws ThreadPoolException {\r\n        try {\r\n            return executorService.submit(callable)\r\n                                  .get();\r\n        } catch (ExecutionException e) {\r\n            throw new ThreadPoolException(&quot;ExecutionException occurred during executing Thread&quot;, e);\r\n        } catch (InterruptedException e) {\r\n            Thread.currentThread().interrupt();\r\n            throw new ThreadPoolException(&quot;InterruptedException occurred during executing Thread&quot;, e);\r\n        } finally {\r\n            executorService.shutdown();\r\n        }\r\n    }\r\n}\r\n```\r\n","title":"How should threadpools be used in Java?","body":"<p>I found this code and have a hard time understanding how this makes sense.\nAs I understand it, this will create a number of threads and then execute the tasks on a single one of those threads and wait for the result, and then stop the threads.\nIs there something I am missing?</p>\n<pre><code>return ThreadPoolUtils.parallel(parallelThreads)\n                                  .execute(() -&gt; someList.parallelStream().map(someFunction).collect(toList()))\n</code></pre>\n<p>With this definition of ThreadPoolUtils:</p>\n<pre><code>@Slf4j\n@Builder\npublic class ThreadPoolUtils {\n    private final ExecutorService executorService;\n    public static ThreadPoolUtils parallel(int maxThreads) {\n        return ThreadPoolUtils.builder()\n                              .executorService(new ForkJoinPool(maxThreads))\n                              .build();\n    }\n    public &lt;T&gt; T execute(Callable&lt;T&gt; callable) throws ThreadPoolException {\n        try {\n            return executorService.submit(callable)\n                                  .get();\n        } catch (ExecutionException e) {\n            throw new ThreadPoolException(&quot;ExecutionException occurred during executing Thread&quot;, e);\n        } catch (InterruptedException e) {\n            Thread.currentThread().interrupt();\n            throw new ThreadPoolException(&quot;InterruptedException occurred during executing Thread&quot;, e);\n        } finally {\n            executorService.shutdown();\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","hibernate","typedquery"],"answers":[{"tags":[],"owner":{"account_id":12452913,"reputation":26,"user_id":10263562,"display_name":"Ruslan Macari"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693244655,"creation_date":1693244655,"answer_id":76994972,"question_id":76992217,"body_markdown":"I tried to replicate your issue but my project executed successfully.\r\nI believe there are some errors in your configurations, you can compare them with my example and check if something is wrong in your project.\r\n\r\n**build.gradle**\r\n\r\n    plugins {\r\n        id &#39;java&#39;\r\n        id &#39;org.springframework.boot&#39; version &#39;3.1.3&#39;\r\n        id &#39;io.spring.dependency-management&#39; version &#39;1.1.3&#39;\r\n    }\r\n    \r\n    group = &#39;com.example&#39;\r\n    version = &#39;0.0.1-SNAPSHOT&#39;\r\n    \r\n    java {\r\n        sourceCompatibility = &#39;17&#39;\r\n    }\r\n    \r\n    repositories {\r\n        mavenCentral()\r\n    }\r\n    \r\n    dependencies {\r\n        implementation &#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;\r\n        implementation  &#39;org.projectlombok:lombok:1.18.28&#39;\r\n        testImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n        implementation &#39;com.h2database:h2&#39;\r\n        annotationProcessor &#39;org.projectlombok:lombok:1.18.20&#39;\r\n    }\r\n    \r\n    tasks.named(&#39;test&#39;) {\r\n        useJUnitPlatform()\r\n    }\r\n\r\n**ContactDTO**\r\n\r\n    package com.example.typeddemo;\r\n    \r\n    import jakarta.persistence.Column;\r\n    import jakarta.persistence.Entity;\r\n    import jakarta.persistence.GeneratedValue;\r\n    import jakarta.persistence.GenerationType;\r\n    import jakarta.persistence.Id;\r\n    import lombok.Getter;\r\n    import lombok.Setter;\r\n    \r\n    @Entity\r\n    @Getter\r\n    @Setter\r\n    public class ContactDTO {\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.SEQUENCE)\r\n        @Column(name = &quot;id&quot;, nullable = false)\r\n        private Long id;\r\n    \r\n    }\r\n\r\n**Organization**\r\n\r\n    package com.example.typeddemo;\r\n    \r\n    import jakarta.persistence.Column;\r\n    import jakarta.persistence.Entity;\r\n    import jakarta.persistence.GeneratedValue;\r\n    import jakarta.persistence.GenerationType;\r\n    import jakarta.persistence.Id;\r\n    import jakarta.persistence.JoinColumn;\r\n    import jakarta.persistence.ManyToOne;\r\n    import lombok.Getter;\r\n    import lombok.Setter;\r\n    import lombok.ToString;\r\n    \r\n    @Entity\r\n    @Getter\r\n    @Setter\r\n    @ToString\r\n    public class Organization {\r\n    \r\n        @Getter\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.SEQUENCE)\r\n        @Column(name = &quot;id&quot;, nullable = false)\r\n        private Long id;\r\n        private String squad;\r\n        private String squadId;\r\n        private String creditHoldOverride;\r\n        private Double creditLimit;\r\n        private String creditTermName;\r\n        private Double creditTerm;\r\n        private String vatRegNumber;\r\n        private boolean isActive;\r\n        private Long accountManagerUUID;\r\n        private String accountManagerName;\r\n        private Long logisticManagerUUID;\r\n        private String logisticManagerName;\r\n        private Long escalationManagerUUID;\r\n        private String escalationManagerName;\r\n        private boolean portalAccess;\r\n        private int systemActive;\r\n        @ManyToOne\r\n        @JoinColumn(name = &quot;parent_id&quot;)\r\n        private Organization parent;\r\n    \r\n    }\r\n\r\n**OrganizationDetailDTO**\r\n\r\n    package com.example.typeddemo;\r\n    \r\n    import jakarta.persistence.Column;\r\n    import jakarta.persistence.Entity;\r\n    import jakarta.persistence.GeneratedValue;\r\n    import jakarta.persistence.GenerationType;\r\n    import jakarta.persistence.Id;\r\n    import jakarta.persistence.JoinColumn;\r\n    import jakarta.persistence.OneToOne;\r\n    import jakarta.persistence.Transient;\r\n    import lombok.Getter;\r\n    import lombok.Setter;\r\n    import lombok.ToString;\r\n    \r\n    @Setter\r\n    @Getter\r\n    @Entity\r\n    @ToString\r\n    public class OrganizationDetailDTO {\r\n        @Column(name = &quot;organization_id&quot;)\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.SEQUENCE)\r\n        private Long id;\r\n        private String squad;\r\n        private String squadId;\r\n        private String creditHoldOverride;\r\n        private Double creditLimit;\r\n        private String creditTermName;\r\n        private Double creditTerm;\r\n        private String vatRegNumber;\r\n        private boolean isActive;\r\n        private Long accountManagerUUID;\r\n        private String accountManagerName;\r\n        private Long logisticManagerUUID;\r\n        private String logisticManagerName;\r\n        private Long escalationManagerUUID;\r\n        private String escalationManagerName;\r\n        private boolean portalAccess;\r\n        private int  systemActive;\r\n        private Long parent;\r\n    \r\n        public OrganizationDetailDTO() {\r\n    \r\n        }\r\n        public OrganizationDetailDTO(Long id, String squad, String squadId, String creditHoldOverride, Double creditLimit, String creditTermName, Double creditTerm,\r\n                String vatRegNumber, boolean isActive, Long accountManagerUUID, String accountManagerName, Long logisticManagerUUID,\r\n                String logisticManagerName, Long escalationManagerUUID, String escalationManagerName,boolean portalAccess,Integer  systemActive,Long parent) {\r\n            this.id = id;\r\n            this.squad = squad;\r\n            this.squadId = squadId;\r\n            this.creditHoldOverride = creditHoldOverride;\r\n            this.creditLimit = creditLimit;\r\n            this.creditTermName = creditTermName;\r\n            this.creditTerm = creditTerm;\r\n            this.vatRegNumber = vatRegNumber;\r\n            this.isActive = isActive;\r\n            this.accountManagerUUID = accountManagerUUID;\r\n            this.accountManagerName = accountManagerName;\r\n            this.logisticManagerUUID = logisticManagerUUID;\r\n            this.logisticManagerName = logisticManagerName;\r\n            this.escalationManagerUUID = escalationManagerUUID;\r\n            this.escalationManagerName = escalationManagerName;\r\n            this.portalAccess=portalAccess;\r\n            this.systemActive=systemActive;\r\n            this.parent=parent;\r\n    \r\n        }\r\n    \r\n        @OneToOne\r\n        @JoinColumn(name = &quot;admin_info_id&quot;)\r\n        @Transient\r\n        private ContactDTO adminInfo = new ContactDTO();\r\n    \r\n    }\r\n\r\n\r\n**OrganizationService**\r\n\r\n    package com.example.typeddemo;\r\n    \r\n    import jakarta.persistence.EntityManager;\r\n    import jakarta.persistence.NoResultException;\r\n    import jakarta.persistence.TypedQuery;\r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.stereotype.Service;\r\n    \r\n    @Service\r\n    public class OrganizationService {\r\n    \r\n        Logger LOGGER = LoggerFactory.getLogger(OrganizationService.class);\r\n    \r\n        @Autowired\r\n        EntityManager entityManager;\r\n    \r\n        public OrganizationDetailDTO getOrganizationDetailForAgent(Long anOrganizationId)\r\n                throws Exception {\r\n            // Create DTO and necessary objects\r\n            OrganizationDetailDTO organizationDTO;\r\n            // Log request information\r\n            LOGGER.info(&quot;#2 Get OrganizationByIdWithParent request received in Organization Service with OrganizationId: &quot;\r\n                    + anOrganizationId);\r\n    \r\n            organizationDTO = this.findOrganizationDetailDTO(OrganizationDetailDTO.class, anOrganizationId);\r\n            // Retrieve organization by ID\r\n    \r\n            // Check if organization exists\r\n            if (organizationDTO == null) {\r\n                LOGGER.info(&quot;No Organization Found Against Id &quot; + anOrganizationId);\r\n                throw new Exception(&quot;No Organization Found Against Id&quot;);\r\n            }\r\n    \r\n            return organizationDTO;\r\n        }\r\n    \r\n        public &lt;T&gt; T findOrganizationDetailDTO(Class&lt;T&gt; organizationDetailDTOClass, Long id) {\r\n            String queryString =\r\n                    &quot;SELECT NEW com.example.typeddemo.OrganizationDetailDTO(o.id, o.squad, o.squadId, o.creditHoldOverride, o.creditLimit, o.creditTermName, &quot;\r\n                            +\r\n                            &quot;o.creditTerm, o.vatRegNumber, o.isActive, o.accountManagerUUID, o.accountManagerName, o.logisticManagerUUID, o.logisticManagerName, o.escalationManagerUUID, &quot;\r\n                            +\r\n                            &quot;o.escalationManagerName,o.portalAccess,o.systemActive,o.parent.id) FROM Organization o WHERE o.id = :id&quot;;\r\n            TypedQuery&lt;T&gt; query = entityManager.createQuery(queryString, organizationDetailDTOClass);\r\n            query.setParameter(&quot;id&quot;, id);\r\n    \r\n            try {\r\n                return query.getSingleResult();\r\n            } catch (NoResultException e) {\r\n                return null;\r\n            }\r\n        }\r\n    }\r\n\r\n**RepositoryOrganization**\r\n\r\n    package com.example.typeddemo;\r\n    \r\n    import org.springframework.data.jpa.repository.JpaRepository;\r\n    import org.springframework.stereotype.Repository;\r\n    \r\n    @Repository\r\n    public interface RepositoryOrganization extends JpaRepository&lt;Organization, Long&gt; {\r\n    \r\n    }\r\n\r\n**RepositoryOrgDetail**\r\n\r\n    package com.example.typeddemo;\r\n    \r\n    import org.springframework.data.jpa.repository.JpaRepository;\r\n    \r\n    @org.springframework.stereotype.Repository\r\n    public interface RepositoryOrgDetail extends JpaRepository&lt;OrganizationDetailDTO, Long&gt; {\r\n    \r\n    }\r\n\r\n**TypedDemoApplication**\r\n\r\n    package com.example.typeddemo;\r\n    \r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    \r\n    @SpringBootApplication\r\n    public class TypedDemoApplication {\r\n    \r\n        public static void main(String[] args) {\r\n            SpringApplication.run(TypedDemoApplication.class, args);\r\n        }\r\n    \r\n    }\r\n\r\n**TypedDemoApplicationTests**\r\n\r\n    package com.example.typeddemo;\r\n    \r\n    import org.junit.jupiter.api.Assertions;\r\n    import org.junit.jupiter.api.Test;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.boot.test.context.SpringBootTest;\r\n    \r\n    @SpringBootTest\r\n    class TypedDemoApplicationTests {\r\n    \r\n        @Autowired\r\n        OrganizationService organizationService;\r\n        @Autowired\r\n        RepositoryOrgDetail repositoryOrgDetail;\r\n        @Autowired\r\n        RepositoryOrganization repositoryOrganization;\r\n    \r\n        @Test\r\n        void contextLoads() throws Exception {\r\n    \r\n            Organization parent = new Organization();\r\n            repositoryOrganization.saveAndFlush(parent);\r\n            OrganizationDetailDTO organisation = new OrganizationDetailDTO(parent.getId(),\r\n                    &quot;squad&quot;,\r\n                    &quot;sq1&quot;,\r\n                    &quot;credit&quot;,\r\n                    Double.valueOf(20),\r\n                    &quot;term&quot;,\r\n                    Double.valueOf(10),\r\n                    &quot;vat&quot;,\r\n                    false,\r\n                    10L,\r\n                    &quot;account&quot;,\r\n                    10L,\r\n                    &quot;log&quot;,\r\n                    10L,\r\n                    &quot;esc&quot;,\r\n                    false,\r\n                    10,\r\n                    parent.getId());\r\n            repositoryOrgDetail.saveAndFlush(organisation);\r\n    \r\n            OrganizationDetailDTO organizationDetailForAgent = organizationService.getOrganizationDetailForAgent(parent.getId());\r\n            Assertions.assertNotNull(organizationDetailForAgent);\r\n        }\r\n    \r\n    }\r\n\r\nI hope this will help. Good luck!\r\n","title":"Hibernate Mapping Issue: Unable to Map DTO Using TypedQuery","body":"<p>I tried to replicate your issue but my project executed successfully.\nI believe there are some errors in your configurations, you can compare them with my example and check if something is wrong in your project.</p>\n<p><strong>build.gradle</strong></p>\n<pre><code>plugins {\n    id 'java'\n    id 'org.springframework.boot' version '3.1.3'\n    id 'io.spring.dependency-management' version '1.1.3'\n}\n\ngroup = 'com.example'\nversion = '0.0.1-SNAPSHOT'\n\njava {\n    sourceCompatibility = '17'\n}\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'\n    implementation  'org.projectlombok:lombok:1.18.28'\n    testImplementation 'org.springframework.boot:spring-boot-starter-test'\n    implementation 'com.h2database:h2'\n    annotationProcessor 'org.projectlombok:lombok:1.18.20'\n}\n\ntasks.named('test') {\n    useJUnitPlatform()\n}\n</code></pre>\n<p><strong>ContactDTO</strong></p>\n<pre><code>package com.example.typeddemo;\n\nimport jakarta.persistence.Column;\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.GenerationType;\nimport jakarta.persistence.Id;\nimport lombok.Getter;\nimport lombok.Setter;\n\n@Entity\n@Getter\n@Setter\npublic class ContactDTO {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.SEQUENCE)\n    @Column(name = &quot;id&quot;, nullable = false)\n    private Long id;\n\n}\n</code></pre>\n<p><strong>Organization</strong></p>\n<pre><code>package com.example.typeddemo;\n\nimport jakarta.persistence.Column;\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.GenerationType;\nimport jakarta.persistence.Id;\nimport jakarta.persistence.JoinColumn;\nimport jakarta.persistence.ManyToOne;\nimport lombok.Getter;\nimport lombok.Setter;\nimport lombok.ToString;\n\n@Entity\n@Getter\n@Setter\n@ToString\npublic class Organization {\n\n    @Getter\n    @Id\n    @GeneratedValue(strategy = GenerationType.SEQUENCE)\n    @Column(name = &quot;id&quot;, nullable = false)\n    private Long id;\n    private String squad;\n    private String squadId;\n    private String creditHoldOverride;\n    private Double creditLimit;\n    private String creditTermName;\n    private Double creditTerm;\n    private String vatRegNumber;\n    private boolean isActive;\n    private Long accountManagerUUID;\n    private String accountManagerName;\n    private Long logisticManagerUUID;\n    private String logisticManagerName;\n    private Long escalationManagerUUID;\n    private String escalationManagerName;\n    private boolean portalAccess;\n    private int systemActive;\n    @ManyToOne\n    @JoinColumn(name = &quot;parent_id&quot;)\n    private Organization parent;\n\n}\n</code></pre>\n<p><strong>OrganizationDetailDTO</strong></p>\n<pre><code>package com.example.typeddemo;\n\nimport jakarta.persistence.Column;\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.GenerationType;\nimport jakarta.persistence.Id;\nimport jakarta.persistence.JoinColumn;\nimport jakarta.persistence.OneToOne;\nimport jakarta.persistence.Transient;\nimport lombok.Getter;\nimport lombok.Setter;\nimport lombok.ToString;\n\n@Setter\n@Getter\n@Entity\n@ToString\npublic class OrganizationDetailDTO {\n    @Column(name = &quot;organization_id&quot;)\n    @Id\n    @GeneratedValue(strategy = GenerationType.SEQUENCE)\n    private Long id;\n    private String squad;\n    private String squadId;\n    private String creditHoldOverride;\n    private Double creditLimit;\n    private String creditTermName;\n    private Double creditTerm;\n    private String vatRegNumber;\n    private boolean isActive;\n    private Long accountManagerUUID;\n    private String accountManagerName;\n    private Long logisticManagerUUID;\n    private String logisticManagerName;\n    private Long escalationManagerUUID;\n    private String escalationManagerName;\n    private boolean portalAccess;\n    private int  systemActive;\n    private Long parent;\n\n    public OrganizationDetailDTO() {\n\n    }\n    public OrganizationDetailDTO(Long id, String squad, String squadId, String creditHoldOverride, Double creditLimit, String creditTermName, Double creditTerm,\n            String vatRegNumber, boolean isActive, Long accountManagerUUID, String accountManagerName, Long logisticManagerUUID,\n            String logisticManagerName, Long escalationManagerUUID, String escalationManagerName,boolean portalAccess,Integer  systemActive,Long parent) {\n        this.id = id;\n        this.squad = squad;\n        this.squadId = squadId;\n        this.creditHoldOverride = creditHoldOverride;\n        this.creditLimit = creditLimit;\n        this.creditTermName = creditTermName;\n        this.creditTerm = creditTerm;\n        this.vatRegNumber = vatRegNumber;\n        this.isActive = isActive;\n        this.accountManagerUUID = accountManagerUUID;\n        this.accountManagerName = accountManagerName;\n        this.logisticManagerUUID = logisticManagerUUID;\n        this.logisticManagerName = logisticManagerName;\n        this.escalationManagerUUID = escalationManagerUUID;\n        this.escalationManagerName = escalationManagerName;\n        this.portalAccess=portalAccess;\n        this.systemActive=systemActive;\n        this.parent=parent;\n\n    }\n\n    @OneToOne\n    @JoinColumn(name = &quot;admin_info_id&quot;)\n    @Transient\n    private ContactDTO adminInfo = new ContactDTO();\n\n}\n</code></pre>\n<p><strong>OrganizationService</strong></p>\n<pre><code>package com.example.typeddemo;\n\nimport jakarta.persistence.EntityManager;\nimport jakarta.persistence.NoResultException;\nimport jakarta.persistence.TypedQuery;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\n\n@Service\npublic class OrganizationService {\n\n    Logger LOGGER = LoggerFactory.getLogger(OrganizationService.class);\n\n    @Autowired\n    EntityManager entityManager;\n\n    public OrganizationDetailDTO getOrganizationDetailForAgent(Long anOrganizationId)\n            throws Exception {\n        // Create DTO and necessary objects\n        OrganizationDetailDTO organizationDTO;\n        // Log request information\n        LOGGER.info(&quot;#2 Get OrganizationByIdWithParent request received in Organization Service with OrganizationId: &quot;\n                + anOrganizationId);\n\n        organizationDTO = this.findOrganizationDetailDTO(OrganizationDetailDTO.class, anOrganizationId);\n        // Retrieve organization by ID\n\n        // Check if organization exists\n        if (organizationDTO == null) {\n            LOGGER.info(&quot;No Organization Found Against Id &quot; + anOrganizationId);\n            throw new Exception(&quot;No Organization Found Against Id&quot;);\n        }\n\n        return organizationDTO;\n    }\n\n    public &lt;T&gt; T findOrganizationDetailDTO(Class&lt;T&gt; organizationDetailDTOClass, Long id) {\n        String queryString =\n                &quot;SELECT NEW com.example.typeddemo.OrganizationDetailDTO(o.id, o.squad, o.squadId, o.creditHoldOverride, o.creditLimit, o.creditTermName, &quot;\n                        +\n                        &quot;o.creditTerm, o.vatRegNumber, o.isActive, o.accountManagerUUID, o.accountManagerName, o.logisticManagerUUID, o.logisticManagerName, o.escalationManagerUUID, &quot;\n                        +\n                        &quot;o.escalationManagerName,o.portalAccess,o.systemActive,o.parent.id) FROM Organization o WHERE o.id = :id&quot;;\n        TypedQuery&lt;T&gt; query = entityManager.createQuery(queryString, organizationDetailDTOClass);\n        query.setParameter(&quot;id&quot;, id);\n\n        try {\n            return query.getSingleResult();\n        } catch (NoResultException e) {\n            return null;\n        }\n    }\n}\n</code></pre>\n<p><strong>RepositoryOrganization</strong></p>\n<pre><code>package com.example.typeddemo;\n\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\n\n@Repository\npublic interface RepositoryOrganization extends JpaRepository&lt;Organization, Long&gt; {\n\n}\n</code></pre>\n<p><strong>RepositoryOrgDetail</strong></p>\n<pre><code>package com.example.typeddemo;\n\nimport org.springframework.data.jpa.repository.JpaRepository;\n\n@org.springframework.stereotype.Repository\npublic interface RepositoryOrgDetail extends JpaRepository&lt;OrganizationDetailDTO, Long&gt; {\n\n}\n</code></pre>\n<p><strong>TypedDemoApplication</strong></p>\n<pre><code>package com.example.typeddemo;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class TypedDemoApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(TypedDemoApplication.class, args);\n    }\n\n}\n</code></pre>\n<p><strong>TypedDemoApplicationTests</strong></p>\n<pre><code>package com.example.typeddemo;\n\nimport org.junit.jupiter.api.Assertions;\nimport org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.context.SpringBootTest;\n\n@SpringBootTest\nclass TypedDemoApplicationTests {\n\n    @Autowired\n    OrganizationService organizationService;\n    @Autowired\n    RepositoryOrgDetail repositoryOrgDetail;\n    @Autowired\n    RepositoryOrganization repositoryOrganization;\n\n    @Test\n    void contextLoads() throws Exception {\n\n        Organization parent = new Organization();\n        repositoryOrganization.saveAndFlush(parent);\n        OrganizationDetailDTO organisation = new OrganizationDetailDTO(parent.getId(),\n                &quot;squad&quot;,\n                &quot;sq1&quot;,\n                &quot;credit&quot;,\n                Double.valueOf(20),\n                &quot;term&quot;,\n                Double.valueOf(10),\n                &quot;vat&quot;,\n                false,\n                10L,\n                &quot;account&quot;,\n                10L,\n                &quot;log&quot;,\n                10L,\n                &quot;esc&quot;,\n                false,\n                10,\n                parent.getId());\n        repositoryOrgDetail.saveAndFlush(organisation);\n\n        OrganizationDetailDTO organizationDetailForAgent = organizationService.getOrganizationDetailForAgent(parent.getId());\n        Assertions.assertNotNull(organizationDetailForAgent);\n    }\n\n}\n</code></pre>\n<p>I hope this will help. Good luck!</p>\n"},{"tags":[],"owner":{"account_id":20119455,"reputation":36,"user_id":14754201,"display_name":"Farzeen Alam"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1693385003,"creation_date":1693385003,"answer_id":77006319,"question_id":76992217,"body_markdown":"I see no error in your code or configurations. Have you verified your `data` for `null values`? Try checking your record if it contains null values for the below mentioned keys. If it does, I will suggest that you use `Non-Primitive` data types in your DTO. Since you&#39;ve used `primitive data` types and they don&#39;t accept `null values`. \r\n\r\n        private Boolean portalAccess;\r\n        private Integer  systemActive;\r\n        private Integer  isActive;\r\n\r\nUse `Boolean` instead of `boolean` and `Integer` instead of `int`.\r\nHopefully this should resolve your issue.\r\n","title":"Hibernate Mapping Issue: Unable to Map DTO Using TypedQuery","body":"<p>I see no error in your code or configurations. Have you verified your <code>data</code> for <code>null values</code>? Try checking your record if it contains null values for the below mentioned keys. If it does, I will suggest that you use <code>Non-Primitive</code> data types in your DTO. Since you've used <code>primitive data</code> types and they don't accept <code>null values</code>.</p>\n<pre><code>    private Boolean portalAccess;\n    private Integer  systemActive;\n    private Integer  isActive;\n</code></pre>\n<p>Use <code>Boolean</code> instead of <code>boolean</code> and <code>Integer</code> instead of <code>int</code>.\nHopefully this should resolve your issue.</p>\n"}],"owner":{"account_id":4868030,"reputation":1930,"user_id":3925552,"accept_rate":40,"display_name":"HassanUsman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77006319,"answer_count":2,"score":1,"last_activity_date":1693385003,"creation_date":1693220366,"question_id":76992217,"body_markdown":"I&#39;m facing a problem while trying to map a `DTO` using `TypedQuery`. Despite trying several approaches, the mapping doesn&#39;t seem to work as expected. I have ensured that the parameters are correctly set, and the relationship with the child table is appropriately defined. \r\n\r\nI need assistance in identifying the mistakes in my code. Please review the following changes and point out any issues that might be causing the problem.\r\n\r\nMy Service class:\r\n\r\n    public OrganizationDetailDTO getOrganizationDetailForAgent(Long anOrganizationId) throws ApplicationException, AccessDeniedException {\r\n            // Create DTO and necessary objects\r\n            OrganizationDetailDTO organizationDTO;\r\n            try {\r\n                // Log request information\r\n                LOGGER.info(&quot;#2 Get OrganizationByIdWithParent request received in Organization Service with OrganizationId: &quot; + anOrganizationId);\r\n    \r\n                organizationDTO = this.findOrganizationDetailDTO(OrganizationDetailDTO.class, anOrganizationId);\r\n                // Retrieve organization by ID\r\n    \r\n                // Check if organization exists\r\n                if (organizationDTO == null) {\r\n                    LOGGER.info(&quot;No Organization Found Against Id &quot; + anOrganizationId);\r\n                    throw new Exception(&quot;No Organization Found Against Id&quot;);\r\n                }\r\n    }\r\n\r\n \r\n\r\n    public &lt;T&gt; T findOrganizationDetailDTO(Class&lt;T&gt; organizationDetailDTOClass, Long id) {\r\n            String queryString = &quot;SELECT NEW com.alsharqi.org.organization.OrganizationDetailDTO(o.id, o.squad, o.squadId, o.creditHoldOverride, o.creditLimit, o.creditTermName, &quot; +\r\n                    &quot;o.creditTerm, o.vatRegNumber, o.isActive, o.accountManagerUUID, o.accountManagerName, o.logisticManagerUUID, o.logisticManagerName, o.escalationManagerUUID, &quot; +\r\n                    &quot;o.escalationManagerName,o.portalAccess,o.systemActive,o.parent.id) FROM Organization o WHERE o.id = :id&quot;;\r\n            TypedQuery&lt;T&gt; query = entityManager.createQuery(queryString, organizationDetailDTOClass);\r\n            query.setParameter(&quot;id&quot;, id);\r\n    \r\n            try {\r\n                return query.getSingleResult();\r\n            } catch (NoResultException e) {\r\n                return null;\r\n            }\r\n        }\r\n\r\nOrganizationDTO class:\r\n\r\n    @Setter\r\n    @Getter\r\n    @NoArgsConstructor\r\n    public class OrganizationDetailDTO {\r\n        @Column(name = &quot;organization_id&quot;)\r\n        private Long id;\r\n    \r\n        private String squad;\r\n        private String squadId;\r\n    \r\n        private String creditHoldOverride;\r\n        private Double creditLimit;\r\n        private String creditTermName;\r\n        private Double creditTerm;\r\n        private String vatRegNumber;\r\n        private boolean isActive;\r\n    \r\n        private Long accountManagerUUID;\r\n        private String accountManagerName;\r\n        private Long logisticManagerUUID;\r\n        private String logisticManagerName;\r\n        private Long escalationManagerUUID;\r\n        private String escalationManagerName;\r\n        private boolean portalAccess;\r\n        private int  systemActive;\r\n        private Long parent;\r\n        public OrganizationDetailDTO(Long id, String squad, String squadId, String creditHoldOverride, Double creditLimit, String creditTermName, Double creditTerm,\r\n                                     String vatRegNumber, boolean isActive, Long accountManagerUUID, String accountManagerName, Long logisticManagerUUID,\r\n                                     String logisticManagerName, Long escalationManagerUUID, String escalationManagerName,boolean portalAccess,Integer  systemActive,Long parent) {\r\n            this.id = id;\r\n            this.squad = squad;\r\n            this.squadId = squadId;\r\n            this.creditHoldOverride = creditHoldOverride;\r\n            this.creditLimit = creditLimit;\r\n            this.creditTermName = creditTermName;\r\n            this.creditTerm = creditTerm;\r\n            this.vatRegNumber = vatRegNumber;\r\n            this.isActive = isActive;\r\n            this.accountManagerUUID = accountManagerUUID;\r\n            this.accountManagerName = accountManagerName;\r\n            this.logisticManagerUUID = logisticManagerUUID;\r\n            this.logisticManagerName = logisticManagerName;\r\n            this.escalationManagerUUID = escalationManagerUUID;\r\n            this.escalationManagerName = escalationManagerName;\r\n            this.portalAccess=portalAccess;\r\n            this.systemActive=systemActive;\r\n            this.parent=parent;\r\n    \r\n        }\r\n    \r\n    \r\n    \r\n        private ContactDTO adminInfo = new ContactDTO();\r\n    \r\n    }\r\n\r\nEntity Class:\r\n[![enter image description here][1]][1]\r\n\r\nTried all possible solutions but still facing this issue:\r\n\r\n    com.hp.org.util.ApplicationException: org.hibernate.QueryException: could not instantiate class [com.hp.org.organization.OrganizationDetailDTO] from tuple\r\n\tat com.hp.org.api.OrganizationService.getOrganizationDetailForAgent(OrganizationService.java:3347) ~[main/:?]\r\n\tat com.hp.org.api.OrganizationService$$FastClassBySpringCGLIB$$59b45cac.invoke(&lt;generated&gt;) ~[main/:?]\r\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204) ~[spring-core-5.0.13.RELEASE.jar:5.0.13.RELEASE]\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:746) ~[spring-aop-5.0.13.RELEASE.jar:5.0.13.RELEASE]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.0.13.RELEASE.jar:5.0.13.RELEASE]\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294) ~[spring-tx-5.0.13.RELEASE.jar:5.0.13.RELEASE]\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98) ~[spring-tx-5.0.13.RELEASE.jar:5.0.13.RELEASE]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185) ~[spring-aop-5.0.13.RELEASE.jar:5.0.13.RELEASE]\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688) ~[spring-aop-5.0.13.RELEASE.jar:5.0.13.RELEASE]\r\n\tat com.hp.org.api.OrganizationService$$EnhancerBySpringCGLIB$$c94a2754.getOrganizationDetailForAgent(&lt;generated&gt;) ~[main/:?]\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/V4r5B.png","title":"Hibernate Mapping Issue: Unable to Map DTO Using TypedQuery","body":"<p>I'm facing a problem while trying to map a <code>DTO</code> using <code>TypedQuery</code>. Despite trying several approaches, the mapping doesn't seem to work as expected. I have ensured that the parameters are correctly set, and the relationship with the child table is appropriately defined.</p>\n<p>I need assistance in identifying the mistakes in my code. Please review the following changes and point out any issues that might be causing the problem.</p>\n<p>My Service class:</p>\n<pre><code>public OrganizationDetailDTO getOrganizationDetailForAgent(Long anOrganizationId) throws ApplicationException, AccessDeniedException {\n        // Create DTO and necessary objects\n        OrganizationDetailDTO organizationDTO;\n        try {\n            // Log request information\n            LOGGER.info(&quot;#2 Get OrganizationByIdWithParent request received in Organization Service with OrganizationId: &quot; + anOrganizationId);\n\n            organizationDTO = this.findOrganizationDetailDTO(OrganizationDetailDTO.class, anOrganizationId);\n            // Retrieve organization by ID\n\n            // Check if organization exists\n            if (organizationDTO == null) {\n                LOGGER.info(&quot;No Organization Found Against Id &quot; + anOrganizationId);\n                throw new Exception(&quot;No Organization Found Against Id&quot;);\n            }\n}\n\n\n\npublic &lt;T&gt; T findOrganizationDetailDTO(Class&lt;T&gt; organizationDetailDTOClass, Long id) {\n        String queryString = &quot;SELECT NEW com.alsharqi.org.organization.OrganizationDetailDTO(o.id, o.squad, o.squadId, o.creditHoldOverride, o.creditLimit, o.creditTermName, &quot; +\n                &quot;o.creditTerm, o.vatRegNumber, o.isActive, o.accountManagerUUID, o.accountManagerName, o.logisticManagerUUID, o.logisticManagerName, o.escalationManagerUUID, &quot; +\n                &quot;o.escalationManagerName,o.portalAccess,o.systemActive,o.parent.id) FROM Organization o WHERE o.id = :id&quot;;\n        TypedQuery&lt;T&gt; query = entityManager.createQuery(queryString, organizationDetailDTOClass);\n        query.setParameter(&quot;id&quot;, id);\n\n        try {\n            return query.getSingleResult();\n        } catch (NoResultException e) {\n            return null;\n        }\n    }\n</code></pre>\n<p>OrganizationDTO class:</p>\n<pre><code>@Setter\n@Getter\n@NoArgsConstructor\npublic class OrganizationDetailDTO {\n    @Column(name = &quot;organization_id&quot;)\n    private Long id;\n\n    private String squad;\n    private String squadId;\n\n    private String creditHoldOverride;\n    private Double creditLimit;\n    private String creditTermName;\n    private Double creditTerm;\n    private String vatRegNumber;\n    private boolean isActive;\n\n    private Long accountManagerUUID;\n    private String accountManagerName;\n    private Long logisticManagerUUID;\n    private String logisticManagerName;\n    private Long escalationManagerUUID;\n    private String escalationManagerName;\n    private boolean portalAccess;\n    private int  systemActive;\n    private Long parent;\n    public OrganizationDetailDTO(Long id, String squad, String squadId, String creditHoldOverride, Double creditLimit, String creditTermName, Double creditTerm,\n                                 String vatRegNumber, boolean isActive, Long accountManagerUUID, String accountManagerName, Long logisticManagerUUID,\n                                 String logisticManagerName, Long escalationManagerUUID, String escalationManagerName,boolean portalAccess,Integer  systemActive,Long parent) {\n        this.id = id;\n        this.squad = squad;\n        this.squadId = squadId;\n        this.creditHoldOverride = creditHoldOverride;\n        this.creditLimit = creditLimit;\n        this.creditTermName = creditTermName;\n        this.creditTerm = creditTerm;\n        this.vatRegNumber = vatRegNumber;\n        this.isActive = isActive;\n        this.accountManagerUUID = accountManagerUUID;\n        this.accountManagerName = accountManagerName;\n        this.logisticManagerUUID = logisticManagerUUID;\n        this.logisticManagerName = logisticManagerName;\n        this.escalationManagerUUID = escalationManagerUUID;\n        this.escalationManagerName = escalationManagerName;\n        this.portalAccess=portalAccess;\n        this.systemActive=systemActive;\n        this.parent=parent;\n\n    }\n\n\n\n    private ContactDTO adminInfo = new ContactDTO();\n\n}\n</code></pre>\n<p>Entity Class:\n<a href=\"https://i.stack.imgur.com/V4r5B.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/V4r5B.png\" alt=\"enter image description here\" /></a></p>\n<p>Tried all possible solutions but still facing this issue:</p>\n<pre><code>com.hp.org.util.ApplicationException: org.hibernate.QueryException: could not instantiate class [com.hp.org.organization.OrganizationDetailDTO] from tuple\nat com.hp.org.api.OrganizationService.getOrganizationDetailForAgent(OrganizationService.java:3347) ~[main/:?]\nat com.hp.org.api.OrganizationService$$FastClassBySpringCGLIB$$59b45cac.invoke(&lt;generated&gt;) ~[main/:?]\nat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204) ~[spring-core-5.0.13.RELEASE.jar:5.0.13.RELEASE]\nat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:746) ~[spring-aop-5.0.13.RELEASE.jar:5.0.13.RELEASE]\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.0.13.RELEASE.jar:5.0.13.RELEASE]\nat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294) ~[spring-tx-5.0.13.RELEASE.jar:5.0.13.RELEASE]\nat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98) ~[spring-tx-5.0.13.RELEASE.jar:5.0.13.RELEASE]\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185) ~[spring-aop-5.0.13.RELEASE.jar:5.0.13.RELEASE]\nat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688) ~[spring-aop-5.0.13.RELEASE.jar:5.0.13.RELEASE]\nat com.hp.org.api.OrganizationService$$EnhancerBySpringCGLIB$$c94a2754.getOrganizationDetailForAgent(&lt;generated&gt;) ~[main/:?]\n</code></pre>\n"},{"tags":["java","java-8","java-time"],"comments":[{"owner":{"display_name":"user6073886"},"score":0,"creation_date":1693384416,"post_id":77006206,"comment_id":135752079,"body_markdown":"You could just use the modulo operator: `LocalTime.of(hours % 24, minutes % 60)`","body":"You could just use the modulo operator: <code>LocalTime.of(hours % 24, minutes % 60)</code>"},{"owner":{"account_id":3597514,"reputation":117145,"user_id":3001761,"display_name":"jonrsharpe"},"score":1,"creation_date":1693384447,"post_id":77006206,"comment_id":135752085,"body_markdown":"It sounds like you want to use a _duration_, not a time.","body":"It sounds like you want to use a <i>duration</i>, not a time."}],"answers":[{"tags":[],"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1693384705,"creation_date":1693384705,"answer_id":77006287,"question_id":77006206,"body_markdown":"You can use `DateTimeFormatter.withResolverStyle(ResolverStyle.LENIENT)` to git the expected behavier.\r\n\r\n`DateTimeFormatter.ofPattern(&quot;HH:mm&quot;).withResolverStyle(ResolverStyle.LENIENT).parse(&quot;25:15&quot;)`\r\n\r\nFor more information see the [javadoc](https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#withResolverStyle-java.time.format.ResolverStyle-)","title":"how can I support more than 24hours of time format","body":"<p>You can use <code>DateTimeFormatter.withResolverStyle(ResolverStyle.LENIENT)</code> to git the expected behavier.</p>\n<p><code>DateTimeFormatter.ofPattern(&quot;HH:mm&quot;).withResolverStyle(ResolverStyle.LENIENT).parse(&quot;25:15&quot;)</code></p>\n<p>For more information see the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#withResolverStyle-java.time.format.ResolverStyle-\" rel=\"nofollow noreferrer\">javadoc</a></p>\n"}],"owner":{"account_id":27499070,"reputation":33,"user_id":20983127,"display_name":"Arushi awasthi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1693385903,"accepted_answer_id":77006287,"answer_count":1,"score":-3,"last_activity_date":1693384705,"creation_date":1693384116,"question_id":77006206,"body_markdown":"I have a requirement to support more than 24 hours of time format, for example if the time is 25:15:00 then it should return 01:15:00, in java local Time API. I am unable to find solution for this can someone please help me in this.\r\n\r\n…","title":"how can I support more than 24hours of time format","body":"<p>I have a requirement to support more than 24 hours of time format, for example if the time is 25:15:00 then it should return 01:15:00, in java local Time API. I am unable to find solution for this can someone please help me in this.</p>\n<p>…</p>\n"},{"tags":["java","https","ssl-certificate","java-17","sslhandshakeexception"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1693395897,"post_id":77006233,"comment_id":135754548,"body_markdown":"Don’t post exception stack traces as pictures. Copy the text, just like you did with the source code.","body":"Don’t post exception stack traces as pictures. Copy the text, just like you did with the source code."},{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1693413053,"post_id":77006233,"comment_id":135758591,"body_markdown":"Please tell us how you have generated the HTTPS certificate for 192.168.14.193 and what certificates are saved in the used trustStore. Are you sure the used server supports TLS 1.3?","body":"Please tell us how you have generated the HTTPS certificate for 192.168.14.193 and what certificates are saved in the used trustStore. Are you sure the used server supports TLS 1.3?"},{"owner":{"account_id":19798459,"reputation":21,"user_id":14500000,"display_name":"Pasindu Ukwatta"},"score":0,"creation_date":1693454548,"post_id":77006233,"comment_id":135763943,"body_markdown":"I created certificates using key tool because I&#39;m using self signed certificates. I put that generated certificate into the trust store. I checked it with the tlsv1.3.But still I&#39;m getting the error.","body":"I created certificates using key tool because I&#39;m using self signed certificates. I put that generated certificate into the trust store. I checked it with the tlsv1.3.But still I&#39;m getting the error."}],"owner":{"account_id":19798459,"reputation":21,"user_id":14500000,"display_name":"Pasindu Ukwatta"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":92,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693384343,"creation_date":1693384343,"question_id":77006233,"body_markdown":"I&#39;m trying to send get reuest to the server.But i&#39;m always getting  &quot;javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure&quot; .I&#39;m using openjdk-17.0.1 .    \r\n   \r\n \r\n\r\n    \r\n\r\npackage org.example;\r\n    \r\n    import org.apache.http.client.methods.CloseableHttpResponse;\r\n    import org.apache.http.client.methods.HttpGet;\r\n    import org.apache.http.impl.client.CloseableHttpClient;\r\n    import org.apache.http.impl.client.HttpClients;\r\n    import org.apache.http.ssl.SSLContextBuilder;\r\n    import org.apache.http.util.EntityUtils;\r\n    \r\n    import javax.net.ssl.SSLContext;\r\n    import java.io.FileInputStream;\r\n    import java.security.KeyStore;\r\n    \r\n    public class HttpsGetWithCustomSSLExample {\r\n        public static void main(String[] args) {\r\n            try {\r\n                // URL of the API endpoint you want to query\r\n                String apiUrl = &quot;https://192.168.14.193:8050/sample-v1&quot;;\r\n    \r\n                // Load trust store\r\n                KeyStore trustStore = KeyStore.getInstance(&quot;JKS&quot;);\r\n                try (FileInputStream trustStoreInputStream = new FileInputStream(&quot;store/server.truststore&quot;)) {\r\n                    trustStore.load(trustStoreInputStream, &quot;WalletPasswd123&quot;.toCharArray());\r\n                }\r\n    \r\n                // Load keystore\r\n                KeyStore keyStore = KeyStore.getInstance(&quot;JKS&quot;);\r\n                try (FileInputStream keyStoreInputStream = new FileInputStream(&quot;store/server.keystore&quot;)) {\r\n                    keyStore.load(keyStoreInputStream, &quot;WalletPasswd123&quot;.toCharArray());\r\n                }\r\n    \r\n                // Create SSL context with custom trust store and keystore\r\n                SSLContext sslContext = SSLContextBuilder.create()\r\n                        .loadTrustMaterial(trustStore, null)\r\n                        .loadKeyMaterial(keyStore, &quot;WalletPasswd123&quot;.toCharArray())\r\n                        .setProtocol(&quot;TLSv1.3&quot;)\r\n                        .build();\r\n    \r\n                // Create a CloseableHttpClient with SSL context\r\n                CloseableHttpClient httpClient = HttpClients.custom().setSSLContext(sslContext).build();\r\n    \r\n                // Create an HttpGet request\r\n                HttpGet httpGet = new HttpGet(apiUrl);\r\n    \r\n                // Execute the request\r\n                try (CloseableHttpResponse response = httpClient.execute(httpGet)) {\r\n                    // Get the response code\r\n                    int responseCode = response.getStatusLine().getStatusCode();\r\n                    System.out.println(&quot;Response Code: &quot; + responseCode);\r\n    \r\n                    // Read the response content\r\n                    String responseBody = EntityUtils.toString(response.getEntity());\r\n                    System.out.println(&quot;Response Data: &quot; + responseBody);\r\n                }\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\nThis is the error massage I&#39;m getting.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/PPfCy.png","title":"javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure in java 17","body":"<p>I'm trying to send get reuest to the server.But i'm always getting  &quot;javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure&quot; .I'm using openjdk-17.0.1 .</p>\n<p>package org.example;</p>\n<pre><code>import org.apache.http.client.methods.CloseableHttpResponse;\nimport org.apache.http.client.methods.HttpGet;\nimport org.apache.http.impl.client.CloseableHttpClient;\nimport org.apache.http.impl.client.HttpClients;\nimport org.apache.http.ssl.SSLContextBuilder;\nimport org.apache.http.util.EntityUtils;\n\nimport javax.net.ssl.SSLContext;\nimport java.io.FileInputStream;\nimport java.security.KeyStore;\n\npublic class HttpsGetWithCustomSSLExample {\n    public static void main(String[] args) {\n        try {\n            // URL of the API endpoint you want to query\n            String apiUrl = &quot;https://192.168.14.193:8050/sample-v1&quot;;\n\n            // Load trust store\n            KeyStore trustStore = KeyStore.getInstance(&quot;JKS&quot;);\n            try (FileInputStream trustStoreInputStream = new FileInputStream(&quot;store/server.truststore&quot;)) {\n                trustStore.load(trustStoreInputStream, &quot;WalletPasswd123&quot;.toCharArray());\n            }\n\n            // Load keystore\n            KeyStore keyStore = KeyStore.getInstance(&quot;JKS&quot;);\n            try (FileInputStream keyStoreInputStream = new FileInputStream(&quot;store/server.keystore&quot;)) {\n                keyStore.load(keyStoreInputStream, &quot;WalletPasswd123&quot;.toCharArray());\n            }\n\n            // Create SSL context with custom trust store and keystore\n            SSLContext sslContext = SSLContextBuilder.create()\n                    .loadTrustMaterial(trustStore, null)\n                    .loadKeyMaterial(keyStore, &quot;WalletPasswd123&quot;.toCharArray())\n                    .setProtocol(&quot;TLSv1.3&quot;)\n                    .build();\n\n            // Create a CloseableHttpClient with SSL context\n            CloseableHttpClient httpClient = HttpClients.custom().setSSLContext(sslContext).build();\n\n            // Create an HttpGet request\n            HttpGet httpGet = new HttpGet(apiUrl);\n\n            // Execute the request\n            try (CloseableHttpResponse response = httpClient.execute(httpGet)) {\n                // Get the response code\n                int responseCode = response.getStatusLine().getStatusCode();\n                System.out.println(&quot;Response Code: &quot; + responseCode);\n\n                // Read the response content\n                String responseBody = EntityUtils.toString(response.getEntity());\n                System.out.println(&quot;Response Data: &quot; + responseBody);\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>This is the error massage I'm getting.</p>\n<p><a href=\"https://i.stack.imgur.com/PPfCy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PPfCy.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","ternary-operator"],"comments":[{"owner":{"account_id":45934,"reputation":203649,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":5,"creation_date":1430760555,"post_id":30036183,"comment_id":48188254,"body_markdown":"This is not possible with the ternary operator. You&#39;ll have to use `if` instead.","body":"This is not possible with the ternary operator. You&#39;ll have to use <code>if</code> instead."},{"owner":{"account_id":284541,"reputation":2987,"user_id":1000642,"accept_rate":19,"display_name":"Sandeep Kaul"},"score":0,"creation_date":1430760569,"post_id":30036183,"comment_id":48188262,"body_markdown":"I think it is supposed to be operations in all the three. throws is not an operation.","body":"I think it is supposed to be operations in all the three. throws is not an operation."},{"owner":{"display_name":"user4832640"},"score":0,"creation_date":1430760570,"post_id":30036183,"comment_id":48188265,"body_markdown":"@ryekayo I have compile time error, `illegal start of expression`","body":"@ryekayo I have compile time error, <code>illegal start of expression</code>"},{"owner":{"account_id":1064245,"reputation":85256,"user_id":1065197,"accept_rate":88,"display_name":"Luiggi Mendoza"},"score":0,"creation_date":1430760786,"post_id":30036183,"comment_id":48188399,"body_markdown":"Another dup: http://stackoverflow.com/q/19010399/1065197","body":"Another dup: <a href=\"http://stackoverflow.com/q/19010399/1065197\">stackoverflow.com/q/19010399/1065197</a>"},{"owner":{"account_id":79407,"reputation":14542,"user_id":225186,"accept_rate":65,"display_name":"alfC"},"score":1,"creation_date":1606937436,"post_id":30036183,"comment_id":115117674,"body_markdown":"For people falling in this question looking for a C++ answer. This is allowed in C++, either or both options in a ternary operator is allowed to `throw`. Maybe this is the origin of the confusion. https://stackoverflow.com/questions/7957696/throw-and-ternary-operator-in-c","body":"For people falling in this question looking for a C++ answer. This is allowed in C++, either or both options in a ternary operator is allowed to <code>throw</code>. Maybe this is the origin of the confusion. <a href=\"https://stackoverflow.com/questions/7957696/throw-and-ternary-operator-in-c\" title=\"throw and ternary operator in c\">stackoverflow.com/questions/7957696/&hellip;</a>"},{"owner":{"account_id":4876099,"reputation":421,"user_id":4455546,"display_name":"Clement Cherlin"},"score":0,"creation_date":1626708866,"post_id":30036183,"comment_id":120960135,"body_markdown":"You can if you want to abuse the language a little: `public static &lt;T&gt; T throwException(RuntimeException e) { throw e; }` _pretends_ to return a value of the expected type, satisfying the compiler, but throws an exception instead. In use: `return (n &lt; 0) ? throwException(new RuntimeException()) : list;`","body":"You can if you want to abuse the language a little: <code>public static &lt;T&gt; T throwException(RuntimeException e) { throw e; }</code> <i>pretends</i> to return a value of the expected type, satisfying the compiler, but throws an exception instead. In use: <code>return (n &lt; 0) ? throwException(new RuntimeException()) : list;</code>"}],"answers":[{"tags":[],"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"down_vote_count":0,"up_vote_count":31,"is_accepted":true,"score":31,"last_activity_date":1430760567,"creation_date":1430760567,"answer_id":30036227,"question_id":30036183,"body_markdown":"You can&#39;t throw an exception in a ternary clause. Both options must return a value, which `throw new Exception();` doesn&#39;t satisfy.\r\n\r\nSolution, use `if`.","title":"Throw new exception in Ternary condition","body":"<p>You can't throw an exception in a ternary clause. Both options must return a value, which <code>throw new Exception();</code> doesn't satisfy.</p>\n\n<p>Solution, use <code>if</code>.</p>\n"},{"tags":[],"owner":{"account_id":6062120,"reputation":1059,"user_id":4733587,"display_name":"Shondeslitch"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1430760662,"creation_date":1430760662,"answer_id":30036248,"question_id":30036183,"body_markdown":"It doesn&#39;t compile because what you want to do is not legal in Java. \r\nYou can&#39;t return `throw new RuntimeException()`. Your return always have to return a value.\r\n\r\nYou have to use if instead of that.","title":"Throw new exception in Ternary condition","body":"<p>It doesn't compile because what you want to do is not legal in Java. \nYou can't return <code>throw new RuntimeException()</code>. Your return always have to return a value.</p>\n\n<p>You have to use if instead of that.</p>\n"}],"owner":{"display_name":"user4832640"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22118,"favorite_count":0,"down_vote_count":1,"up_vote_count":22,"closed_date":1693385214,"accepted_answer_id":30036227,"answer_count":2,"score":21,"last_activity_date":1693384115,"creation_date":1430760421,"question_id":30036183,"body_markdown":"I have this lines of code:\r\n\r\n    List&lt;Long&gt; list = new ArrayList&lt;&gt;();\r\n\r\n    if (n &lt; 0) throw new RuntimeException();\r\n      \r\n    if (n == 0) return list;\r\n\r\nI want to use `Ternary condition` :\r\n\r\n    return (n &lt; 0) ? (throw new RuntimeException()) : list;\r\n\r\nBut i have compile time exception.","title":"Throw new exception in Ternary condition","body":"<p>I have this lines of code:</p>\n\n<pre><code>List&lt;Long&gt; list = new ArrayList&lt;&gt;();\n\nif (n &lt; 0) throw new RuntimeException();\n\nif (n == 0) return list;\n</code></pre>\n\n<p>I want to use <code>Ternary condition</code> :</p>\n\n<pre><code>return (n &lt; 0) ? (throw new RuntimeException()) : list;\n</code></pre>\n\n<p>But i have compile time exception.</p>\n"},{"tags":["java","java-8","java-stream"],"comments":[{"owner":{"account_id":249169,"reputation":19388,"user_id":525036,"accept_rate":25,"display_name":"Didier L"},"score":0,"creation_date":1473853273,"post_id":39487418,"comment_id":66296642,"body_markdown":"See also http://stackoverflow.com/questions/25988707/find-max-min-sum-and-average-of-a-list/25988761#25988761 (possible duplicate but without the `flatMap` part)","body":"See also <a href=\"http://stackoverflow.com/questions/25988707/find-max-min-sum-and-average-of-a-list/25988761#25988761\" title=\"find max min sum and average of a list\">stackoverflow.com/questions/25988707/&hellip;</a> (possible duplicate but without the <code>flatMap</code> part)"},{"owner":{"account_id":1936546,"reputation":133665,"user_id":1743880,"accept_rate":100,"display_name":"Tunaki"},"score":0,"creation_date":1473858504,"post_id":39487418,"comment_id":66300056,"body_markdown":"And for the `flatMap`, see http://stackoverflow.com/questions/25147094/turn-a-list-of-lists-into-a-list-using-lambdas","body":"And for the <code>flatMap</code>, see <a href=\"http://stackoverflow.com/questions/25147094/turn-a-list-of-lists-into-a-list-using-lambdas\" title=\"turn a list of lists into a list using lambdas\">stackoverflow.com/questions/25147094/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":6302434,"reputation":5409,"user_id":4896651,"accept_rate":75,"display_name":"Shadov"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1473846838,"creation_date":1473846838,"answer_id":39487490,"question_id":39487418,"body_markdown":"Try this:\r\n\r\n    largeList.stream().flatMap(List::stream).max(Integer::compare).get();","title":"Find the min and max number from a Collection using Java streams","body":"<p>Try this:</p>\n\n<pre><code>largeList.stream().flatMap(List::stream).max(Integer::compare).get();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1693384087,"creation_date":1473847038,"answer_id":39487571,"question_id":39487418,"body_markdown":"You have to flatten the elements of all the `List`s into a single `Stream&lt;Integer&gt;` in order for your code to work :\r\n\r\n    System.out.println(largeList.stream().flatMap(List::stream).max(Integer::compare).get());\r\n    System.out.println(largeList.stream().flatMap(List::stream).min(Integer::compare).get());\r\n\r\nThis is not very efficient, though, since you process the `List`s twice in order to find both `min` and `max`, and you can get the same data (and more) in a single processing by using `IntStream::summaryStatistics()` :\r\n\r\n    IntSummaryStatistics stats = largeList.stream().\r\n                                          .flatMap(List::stream)\r\n                                          .mapToInt(Integer::intValue)\r\n                                          .summaryStatistics();\r\n    System.out.println(stats.getMin());\r\n    System.out.println(stats.getMax());\r\n\r\nHere&#39;s another solution available since Java 12: \r\n\r\n    System.out.println (largeList.stream()\r\n                                 .flatMap(List::stream)\r\n                                 .collect(Collectors.teeing(\r\n                                              Collectors.maxBy (Integer::compare),\r\n                                              Collectors.minBy (Integer::compare),\r\n                                              List::of\r\n                                         )));\r\n\r\nUsing `Collectors.teeing` allows you to apply two `Collector`s on the same `Stream`, and then do whatever you wish on the result of the two `Collector`s. In this example the first `Collector` will compute the maximum element, the second `Collector` will compute the minimum element, and the two numbers will be collected into a single `List`. The output is a `List&lt;Optional&lt;Integer&gt;&gt;`, where the first element holds the maximum and the second element holds the minimum.","title":"Find the min and max number from a Collection using Java streams","body":"<p>You have to flatten the elements of all the <code>List</code>s into a single <code>Stream&lt;Integer&gt;</code> in order for your code to work :</p>\n<pre><code>System.out.println(largeList.stream().flatMap(List::stream).max(Integer::compare).get());\nSystem.out.println(largeList.stream().flatMap(List::stream).min(Integer::compare).get());\n</code></pre>\n<p>This is not very efficient, though, since you process the <code>List</code>s twice in order to find both <code>min</code> and <code>max</code>, and you can get the same data (and more) in a single processing by using <code>IntStream::summaryStatistics()</code> :</p>\n<pre><code>IntSummaryStatistics stats = largeList.stream().\n                                      .flatMap(List::stream)\n                                      .mapToInt(Integer::intValue)\n                                      .summaryStatistics();\nSystem.out.println(stats.getMin());\nSystem.out.println(stats.getMax());\n</code></pre>\n<p>Here's another solution available since Java 12:</p>\n<pre><code>System.out.println (largeList.stream()\n                             .flatMap(List::stream)\n                             .collect(Collectors.teeing(\n                                          Collectors.maxBy (Integer::compare),\n                                          Collectors.minBy (Integer::compare),\n                                          List::of\n                                     )));\n</code></pre>\n<p>Using <code>Collectors.teeing</code> allows you to apply two <code>Collector</code>s on the same <code>Stream</code>, and then do whatever you wish on the result of the two <code>Collector</code>s. In this example the first <code>Collector</code> will compute the maximum element, the second <code>Collector</code> will compute the minimum element, and the two numbers will be collected into a single <code>List</code>. The output is a <code>List&lt;Optional&lt;Integer&gt;&gt;</code>, where the first element holds the maximum and the second element holds the minimum.</p>\n"}],"owner":{"account_id":3842362,"reputation":2222,"user_id":3185056,"accept_rate":78,"display_name":"TheMonkWhoSoldHisCode"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2299,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":39487571,"answer_count":2,"score":3,"last_activity_date":1693384087,"creation_date":1473846624,"question_id":39487418,"body_markdown":"Below is the code snippet which, as expected, is failing at compile time. \r\n\r\nWhat I really want to do is to find the min and max from all the lists using streams. \r\n\r\n\r\n    public class Delete {\r\n    \r\n       public static void main(String[] args) {\r\n    \r\n          List&lt;Integer&gt; list = Arrays.asList(1, 2, 3, 4, 5, 677, 0);\r\n          List&lt;Integer&gt; list1 = Arrays.asList(11, 12, 23, 34, 25, 77);\r\n          List&lt;Integer&gt; list2 = Arrays.asList(12, 21, 30, 14, 25, 67);\r\n          List&lt;Integer&gt; list3 = Arrays.asList(41, 25, 37, 84, 95, 7);\r\n    \r\n          List&lt;List&lt;Integer&gt;&gt; largeList = Arrays.asList(list, list1, list2, list3);\r\n    \r\n          System.out.println(largeList.stream().max(Integer::compare).get());\r\n          System.out.println(largeList.stream().min(Integer::compare).get());\r\n       }\r\n    \r\n    }","title":"Find the min and max number from a Collection using Java streams","body":"<p>Below is the code snippet which, as expected, is failing at compile time. </p>\n\n<p>What I really want to do is to find the min and max from all the lists using streams. </p>\n\n<pre><code>public class Delete {\n\n   public static void main(String[] args) {\n\n      List&lt;Integer&gt; list = Arrays.asList(1, 2, 3, 4, 5, 677, 0);\n      List&lt;Integer&gt; list1 = Arrays.asList(11, 12, 23, 34, 25, 77);\n      List&lt;Integer&gt; list2 = Arrays.asList(12, 21, 30, 14, 25, 67);\n      List&lt;Integer&gt; list3 = Arrays.asList(41, 25, 37, 84, 95, 7);\n\n      List&lt;List&lt;Integer&gt;&gt; largeList = Arrays.asList(list, list1, list2, list3);\n\n      System.out.println(largeList.stream().max(Integer::compare).get());\n      System.out.println(largeList.stream().min(Integer::compare).get());\n   }\n\n}\n</code></pre>\n"},{"tags":["java","jdbc","resultset","rowset","cachedrowset"],"comments":[{"owner":{"account_id":213468,"reputation":103494,"user_id":466862,"display_name":"Mark Rotteveel"},"score":2,"creation_date":1693382684,"post_id":77006002,"comment_id":135751712,"body_markdown":"Packages with `com.sun` are not necessarily internal (there are libraries out there that use the same prefix), it is packages with `sun.*` which are internal. In any case, it would be helpful to know your Java version, the Java vendor, and whether or not you have a `module-info.java`, and if so, what its contents are.","body":"Packages with <code>com.sun</code> are not necessarily internal (there are libraries out there that use the same prefix), it is packages with <code>sun.*</code> which are internal. In any case, it would be helpful to know your Java version, the Java vendor, and whether or not you have a <code>module-info.java</code>, and if so, what its contents are."},{"owner":{"account_id":213468,"reputation":103494,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1693383015,"post_id":77006002,"comment_id":135751780,"body_markdown":"That said, the `com.sun.rowset.*` packages included in Java are considered &quot;not-public&quot; and should be accessed only through the `javax.sql.rowset.*` API.","body":"That said, the <code>com.sun.rowset.*</code> packages included in Java are considered &quot;not-public&quot; and should be accessed only through the <code>javax.sql.rowset.*</code> API."},{"owner":{"account_id":20712801,"reputation":65,"user_id":15227118,"display_name":"Anubhav kalra"},"score":0,"creation_date":1693383154,"post_id":77006002,"comment_id":135751813,"body_markdown":"@MarkRotteveel Apologies for the confusion, I&#39;ve edited my question by adding JDK version. I don&#39;t know whether I&#39;m right or not but `module-info.java` is not present in `jdk1.8.0_201 or earlier`. Please correct me if I am wrong.","body":"@MarkRotteveel Apologies for the confusion, I&#39;ve edited my question by adding JDK version. I don&#39;t know whether I&#39;m right or not but <code>module-info.java</code> is not present in <code>jdk1.8.0_201 or earlier</code>. Please correct me if I am wrong."},{"owner":{"account_id":213468,"reputation":103494,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1693383172,"post_id":77006002,"comment_id":135751817,"body_markdown":"Why are you using such an old Java version? The latest Java 8 is Java 8 update 381/382. Also, which vendor, is this Oracle, AdoptOpenJDK/Eclipse Adoptium, Azul, some other JVM vendor?","body":"Why are you using such an old Java version? The latest Java 8 is Java 8 update 381/382. Also, which vendor, is this Oracle, AdoptOpenJDK/Eclipse Adoptium, Azul, some other JVM vendor?"},{"owner":{"account_id":20712801,"reputation":65,"user_id":15227118,"display_name":"Anubhav kalra"},"score":0,"creation_date":1693384504,"post_id":77006002,"comment_id":135752096,"body_markdown":"@MarkRotteveel If I try with latest java 8 version, will this issue resolve?","body":"@MarkRotteveel If I try with latest java 8 version, will this issue resolve?"},{"owner":{"account_id":213468,"reputation":103494,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1693386572,"post_id":77006002,"comment_id":135752556,"body_markdown":"I don&#39;t know, try it, I&#39;d say.","body":"I don&#39;t know, try it, I&#39;d say."},{"owner":{"account_id":213468,"reputation":103494,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1693396503,"post_id":77006002,"comment_id":135754679,"body_markdown":"All I can say is that with Eclipse Adoptium Java 8 update 382, the line `RowSetProvider.newFactory().createCachedRowSet()` executes without an error and produces a rowset of type `com.sun.rowset.CachedRowSetImpl`.","body":"All I can say is that with Eclipse Adoptium Java 8 update 382, the line <code>RowSetProvider.newFactory().createCachedRowSet()</code> executes without an error and produces a rowset of type <code>com.sun.rowset.CachedRowSetImpl</code>."},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1693409167,"post_id":77006002,"comment_id":135757778,"body_markdown":"Also, while `com.sun` classes are internal, it *is* being used internally here. Your code is not referring to any `com.sun` classes, only `javax.sql` classes. So that need not concern you.","body":"Also, while <code>com.sun</code> classes are internal, it <i>is</i> being used internally here. Your code is not referring to any <code>com.sun</code> classes, only <code>javax.sql</code> classes. So that need not concern you."}],"owner":{"account_id":20712801,"reputation":65,"user_id":15227118,"display_name":"Anubhav kalra"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693384027,"creation_date":1693382404,"question_id":77006002,"body_markdown":"I&#39;ve asked a [question][1] on how to retrieve data from ResultSet before closing the connections.\r\n\r\nJDK Version: jdk1.8.0_201\r\n\r\n`CachedRowSet` class is suggested in an answer by someone in the above mentioned question. I&#39;ve tried going with that approach but got an exception when try to run the program.\r\n&gt; java.sql.SQLException: Provider com.sun.rowset.RowSetFactoryImpl not found\r\n\r\nAs per my analysis, packages of `com.sun` are internal and are subjected to change. They should never be used except by JDK developers.\r\n\r\nSuggest me something to resolve this.\r\n\r\nHere is my code\r\n\r\n    /*--- Imports of classes---*/\r\n    import javax.sql.rowset.CachedRowSet;\r\n    import javax.sql.rowset.RowSetProvider;\r\n    /*--- End of Imports ---*/\r\n\r\n    public ResultSet getUSStates() throws SQLException {\r\n\t\t_log.info(&quot;Calling stored proc for ocrt give data&quot;);\r\n\r\n\t\ttry(Connection inGlobalConnections = getConnection();\r\n\t\t\tCallableStatement callableStatement = inGlobalConnections.prepareCall(&quot;{call mst.USP_GetUSStates()}&quot;);\r\n\t\t\tResultSet resultSet = callableStatement.getResultSet();) {\r\n\r\n\t\t\tcallableStatement.execute();\r\n\r\n\t\t\tCachedRowSet cachedRowSet = RowSetProvider.newFactory().createCachedRowSet();\r\n\t\t\tcachedRowSet.populate(resultSet);\r\n\r\n\t\t\treturn cachedRowSet;\r\n\t\t} catch (Exception e) {\r\n\t\t\t_log.error(e, e);\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t}\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/77003081/retrieve-data-from-resultset-before-closing-the-connections?noredirect=1#comment135747373_77003081","title":"java.sql.SQLException: Provider com.sun.rowset.RowSetFactoryImpl not found","body":"<p>I've asked a <a href=\"https://stackoverflow.com/questions/77003081/retrieve-data-from-resultset-before-closing-the-connections?noredirect=1#comment135747373_77003081\">question</a> on how to retrieve data from ResultSet before closing the connections.</p>\n<p>JDK Version: jdk1.8.0_201</p>\n<p><code>CachedRowSet</code> class is suggested in an answer by someone in the above mentioned question. I've tried going with that approach but got an exception when try to run the program.</p>\n<blockquote>\n<p>java.sql.SQLException: Provider com.sun.rowset.RowSetFactoryImpl not found</p>\n</blockquote>\n<p>As per my analysis, packages of <code>com.sun</code> are internal and are subjected to change. They should never be used except by JDK developers.</p>\n<p>Suggest me something to resolve this.</p>\n<p>Here is my code</p>\n<pre><code>/*--- Imports of classes---*/\nimport javax.sql.rowset.CachedRowSet;\nimport javax.sql.rowset.RowSetProvider;\n/*--- End of Imports ---*/\n\npublic ResultSet getUSStates() throws SQLException {\n    _log.info(&quot;Calling stored proc for ocrt give data&quot;);\n\n    try(Connection inGlobalConnections = getConnection();\n        CallableStatement callableStatement = inGlobalConnections.prepareCall(&quot;{call mst.USP_GetUSStates()}&quot;);\n        ResultSet resultSet = callableStatement.getResultSet();) {\n\n        callableStatement.execute();\n\n        CachedRowSet cachedRowSet = RowSetProvider.newFactory().createCachedRowSet();\n        cachedRowSet.populate(resultSet);\n\n        return cachedRowSet;\n    } catch (Exception e) {\n        _log.error(e, e);\n    }\n\n    return null;\n}\n</code></pre>\n"},{"tags":["java","selenium-webdriver","automation","webdrivermanager-java","cft"],"comments":[{"owner":{"account_id":27938804,"reputation":102,"user_id":21335232,"display_name":"Bhairu"},"score":0,"creation_date":1693386415,"post_id":77005967,"comment_id":135752518,"body_markdown":"you are using webdrivermanager or seleniummanager to launching your application. if Yes?, then there is bug and was raised, you can also it in GitHub. but if you are not using these library for launching the methods, and then share your code here.","body":"you are using webdrivermanager or seleniummanager to launching your application. if Yes?, then there is bug and was raised, you can also it in GitHub. but if you are not using these library for launching the methods, and then share your code here."}],"owner":{"account_id":29327776,"reputation":1,"user_id":22469882,"display_name":"Sakthi Swarubini"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693384007,"creation_date":1693382062,"question_id":77005967,"body_markdown":"I am getting the below error in my Java selenium project\r\n````\r\norg.openqa.selenium.SessionNotCreatedException: Could not start a new session. Response code 500. Message: session not created: This version of ChromeDriver only supports Chrome version 114\r\nCurrent browser version is 116.0.5845.97 with binary path C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe \r\n````\r\nI have upgraded the selenium dependency to `4.11.0` and webdrivermanager version - `5.5.2` and my browser version is `116.0.5845.97`. But still getting the error. I could see some changes happened in the chrome link `C:\\Program Files\\Google\\Chrome\\Application` yesterday and after that I am facing this issue.(Please refer the attached image). In my company, it&#39;s restricted to CFT endpoint download.  Is there any workarounds to sort this error. ","title":"org.openqa.selenium.SessionNotCreatedException Response code 500. Message: session not created:","body":"<p>I am getting the below error in my Java selenium project</p>\n<pre><code>org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Response code 500. Message: session not created: This version of ChromeDriver only supports Chrome version 114\nCurrent browser version is 116.0.5845.97 with binary path C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe \n</code></pre>\n<p>I have upgraded the selenium dependency to <code>4.11.0</code> and webdrivermanager version - <code>5.5.2</code> and my browser version is <code>116.0.5845.97</code>. But still getting the error. I could see some changes happened in the chrome link <code>C:\\Program Files\\Google\\Chrome\\Application</code> yesterday and after that I am facing this issue.(Please refer the attached image). In my company, it's restricted to CFT endpoint download.  Is there any workarounds to sort this error.</p>\n"},{"tags":["java","alfresco","activiti","bpmn","flowable"],"comments":[{"owner":{"account_id":11950660,"reputation":256,"user_id":8744412,"display_name":"Saideep Ullal"},"score":0,"creation_date":1687068263,"post_id":76499153,"comment_id":134883634,"body_markdown":"If your goal is to have multiple instances of your sub process active in parallel, your isSequential flag must be &quot;false&quot; as setting it to true means task/sub process instances will be created &quot;one at a time&quot; until your completion condition/cardinality condition is met.","body":"If your goal is to have multiple instances of your sub process active in parallel, your isSequential flag must be &quot;false&quot; as setting it to true means task/sub process instances will be created &quot;one at a time&quot; until your completion condition/cardinality condition is met."},{"owner":{"account_id":14831311,"reputation":85,"user_id":10710730,"display_name":"Madhav kumar jha"},"score":0,"creation_date":1687069360,"post_id":76499153,"comment_id":134883690,"body_markdown":"Typo error in the post, sub process and user task inside in created in parallel,  concurrent completion execution of tasks are not happening due to optimistic lock","body":"Typo error in the post, sub process and user task inside in created in parallel,  concurrent completion execution of tasks are not happening due to optimistic lock"}],"owner":{"account_id":14831311,"reputation":85,"user_id":10710730,"display_name":"Madhav kumar jha"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":97,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693383443,"creation_date":1687066145,"question_id":76499153,"body_markdown":"Multi-instance sub process is set `isSequential=&quot;false&quot;`, while sub processes are created in parallel without any issues, users are not able to concurrently complete (Rollback due to optimistic lock exception) the user task (defined inside the sub process). This is quite a common use case, else completing them in sequence take lot of time.  Issue, remains even if multi-instance is designed on user task itself instead of enclosing them in sub process. The optimistic locking is caused due to multi-instance in built variables concurrent update(e.g. `nrOfCompletedInstances` and so on), not because of any custom variable updates ","title":"Activiti multi-instance sub process concurrent completion issue","body":"<p>Multi-instance sub process is set <code>isSequential=&quot;false&quot;</code>, while sub processes are created in parallel without any issues, users are not able to concurrently complete (Rollback due to optimistic lock exception) the user task (defined inside the sub process). This is quite a common use case, else completing them in sequence take lot of time.  Issue, remains even if multi-instance is designed on user task itself instead of enclosing them in sub process. The optimistic locking is caused due to multi-instance in built variables concurrent update(e.g. <code>nrOfCompletedInstances</code> and so on), not because of any custom variable updates</p>\n"},{"tags":["java","swing","intellij-idea"],"comments":[{"owner":{"account_id":17693330,"reputation":3781,"user_id":12844632,"display_name":"Egor Klepikov"},"score":1,"creation_date":1693384105,"post_id":77006049,"comment_id":135752012,"body_markdown":"You can try to select all the components you need to fold, right-click, and select `Folding | Fold Selection / Remove region`","body":"You can try to select all the components you need to fold, right-click, and select <code>Folding | Fold Selection &#47; Remove region</code>"},{"owner":{"account_id":20579921,"reputation":123,"user_id":15106272,"display_name":"loggeek"},"score":0,"creation_date":1693384204,"post_id":77006049,"comment_id":135752040,"body_markdown":"That&#39;s what I did (from the command menu).","body":"That&#39;s what I did (from the command menu)."},{"owner":{"account_id":10014547,"reputation":1156,"user_id":7406338,"display_name":"Morph21"},"score":1,"creation_date":1693471704,"post_id":77006049,"comment_id":135766378,"body_markdown":"Is this helpful? https://stackoverflow.com/questions/2344524/java-equivalent-to-region-in-c-sharp","body":"Is this helpful? <a href=\"https://stackoverflow.com/questions/2344524/java-equivalent-to-region-in-c-sharp\" title=\"java equivalent to region in c sharp\">stackoverflow.com/questions/2344524/&hellip;</a>"},{"owner":{"account_id":20579921,"reputation":123,"user_id":15106272,"display_name":"loggeek"},"score":0,"creation_date":1693472573,"post_id":77006049,"comment_id":135766573,"body_markdown":"@Morph21 yes thank you!","body":"@Morph21 yes thank you!"}],"answers":[{"tags":[],"owner":{"account_id":20579921,"reputation":123,"user_id":15106272,"display_name":"loggeek"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693383148,"creation_date":1693383148,"answer_id":77006085,"question_id":77006049,"body_markdown":"Found a solution:\r\n\r\n- Select the code block\r\n- Press `Shift` twice to bring up the search menu\r\n- Select the `Fold Selection/Remove Region` option, or use the `Ctrl+.` shortcut\r\n\r\nOn the upside it works with any block, but I have to redo that operation everytime I want to modify the UI, so it&#39;s not ideal.","title":"Fold or hide Swing UI components in IntelliJ IDEA","body":"<p>Found a solution:</p>\n<ul>\n<li>Select the code block</li>\n<li>Press <code>Shift</code> twice to bring up the search menu</li>\n<li>Select the <code>Fold Selection/Remove Region</code> option, or use the <code>Ctrl+.</code> shortcut</li>\n</ul>\n<p>On the upside it works with any block, but I have to redo that operation everytime I want to modify the UI, so it's not ideal.</p>\n"}],"owner":{"account_id":20579921,"reputation":123,"user_id":15106272,"display_name":"loggeek"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1693383148,"creation_date":1693382886,"question_id":77006049,"body_markdown":"I would like to fold or hide the Swing UI components in IntelliJ IDEA.\r\n\r\nI&#39;m working on a Swing Form class, and the components take over 65 lines as it is the main window of the application, and added up to the &quot;Usages&quot; hints take up a lot of space.\r\n\r\n[Here&#39;s a part of the file.](https://i.stack.imgur.com/u8hBW.png)\r\n\r\nThe lines can be identified by the small component symbol on the right of the line number. They are all on the same section (lines 18 to 85 in my case).\r\n\r\n**Note**: the `/unused/` hint is the IDEA shorthand for `@SuppressWarnings(&quot;unused&quot;)`.","title":"Fold or hide Swing UI components in IntelliJ IDEA","body":"<p>I would like to fold or hide the Swing UI components in IntelliJ IDEA.</p>\n<p>I'm working on a Swing Form class, and the components take over 65 lines as it is the main window of the application, and added up to the &quot;Usages&quot; hints take up a lot of space.</p>\n<p><a href=\"https://i.stack.imgur.com/u8hBW.png\" rel=\"nofollow noreferrer\">Here's a part of the file.</a></p>\n<p>The lines can be identified by the small component symbol on the right of the line number. They are all on the same section (lines 18 to 85 in my case).</p>\n<p><strong>Note</strong>: the <code>/unused/</code> hint is the IDEA shorthand for <code>@SuppressWarnings(&quot;unused&quot;)</code>.</p>\n"},{"tags":["java","junit4","junit5"],"comments":[{"owner":{"account_id":213468,"reputation":103494,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1693382522,"post_id":77005897,"comment_id":135751680,"body_markdown":"Also consider that almost no one actually uses a `SecurityManager`, especially not in contexts running unit tests, so that concern for JUnit 4 sounds rather exotic to me.","body":"Also consider that almost no one actually uses a <code>SecurityManager</code>, especially not in contexts running unit tests, so that concern for JUnit 4 sounds rather exotic to me."}],"answers":[{"tags":[],"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1693381894,"creation_date":1693381894,"answer_id":77005946,"question_id":77005897,"body_markdown":"JUnit 5 makes more extensive use of reflection. It has more power to find classes and methods, and also to inject values non-visible (private, package-private, etc.) members. I&#39;ve seen some of their code use `setAccessible(true)` to make non-public fields and methods accessible.\r\n\r\nHowever, this doesn&#39;t work well with the module system that was added in Java 9. You can solve that by using the `--add-opens` JVM flag. For more information about that, see https://stackoverflow.com/a/71296829/1180351","title":"How can JUnit 5 access/run test methods without the public modifer?","body":"<p>JUnit 5 makes more extensive use of reflection. It has more power to find classes and methods, and also to inject values non-visible (private, package-private, etc.) members. I've seen some of their code use <code>setAccessible(true)</code> to make non-public fields and methods accessible.</p>\n<p>However, this doesn't work well with the module system that was added in Java 9. You can solve that by using the <code>--add-opens</code> JVM flag. For more information about that, see <a href=\"https://stackoverflow.com/a/71296829/1180351\">https://stackoverflow.com/a/71296829/1180351</a></p>\n"}],"owner":{"account_id":16657935,"reputation":834,"user_id":13927534,"display_name":"Miss Skooter"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":146,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77005946,"answer_count":1,"score":0,"last_activity_date":1693382447,"creation_date":1693381536,"question_id":77005897,"body_markdown":"In [Why JUnit 5 default access modifier changed to package-private](https://stackoverflow.com/q/55215949/13927534), [Sam Brannen](https://stackoverflow.com/users/388980/sam-brannen)&#39;s [answer](https://stackoverflow.com/a/55230350/13927534) mentions how there is no need for defining public methods anymore following the principle of &quot;less is more&quot;, which explains the reasoning behind this change (I think it&#39;s great!).\r\n\r\nHowever, I still don&#39;t quite understand how it is technically possible.\r\n\r\nIn [Why Junit test cases(Methods) should be public?](https://stackoverflow.com/q/37019972/13927534) (this is about JUnit 4),  [the accepted answer](https://stackoverflow.com/a/37020017/13927534) states:\r\n\r\n&gt; If the methods were not `public`, calling them might fail (because the SecurityManager gets to veto that).\r\n\r\nHow and why is this no longer a problem in JUnit 5 when accessing package-private/protected methods through reflection?","title":"How can JUnit 5 access/run test methods without the public modifer?","body":"<p>In <a href=\"https://stackoverflow.com/q/55215949/13927534\">Why JUnit 5 default access modifier changed to package-private</a>, <a href=\"https://stackoverflow.com/users/388980/sam-brannen\">Sam Brannen</a>'s <a href=\"https://stackoverflow.com/a/55230350/13927534\">answer</a> mentions how there is no need for defining public methods anymore following the principle of &quot;less is more&quot;, which explains the reasoning behind this change (I think it's great!).</p>\n<p>However, I still don't quite understand how it is technically possible.</p>\n<p>In <a href=\"https://stackoverflow.com/q/37019972/13927534\">Why Junit test cases(Methods) should be public?</a> (this is about JUnit 4),  <a href=\"https://stackoverflow.com/a/37020017/13927534\">the accepted answer</a> states:</p>\n<blockquote>\n<p>If the methods were not <code>public</code>, calling them might fail (because the SecurityManager gets to veto that).</p>\n</blockquote>\n<p>How and why is this no longer a problem in JUnit 5 when accessing package-private/protected methods through reflection?</p>\n"},{"tags":["java","prepared-statement"],"comments":[{"owner":{"account_id":213468,"reputation":103494,"user_id":466862,"display_name":"Mark Rotteveel"},"score":3,"creation_date":1693381951,"post_id":77005819,"comment_id":135751579,"body_markdown":"Why do you care? This is something specific to the internals of the PostgreSQL JDBC driver implementation and/or the PostgreSQL wire protocol. To use a prepared statement you really do not need to know. And if you really need to know, you can find the source of the PostgreSQL JDBC driver at https://github.com/pgjdbc/pgjdbc, where you can find out what it does exactly.","body":"Why do you care? This is something specific to the internals of the PostgreSQL JDBC driver implementation and/or the PostgreSQL wire protocol. To use a prepared statement you really do not need to know. And if you really need to know, you can find the source of the PostgreSQL JDBC driver at <a href=\"https://github.com/pgjdbc/pgjdbc\" rel=\"nofollow noreferrer\">github.com/pgjdbc/pgjdbc</a>, where you can find out what it does exactly."},{"owner":{"account_id":213468,"reputation":103494,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1693382302,"post_id":77005819,"comment_id":135751643,"body_markdown":"In any case, given the name of the field, and the data type it is in, I guess it identifies the data type. It might be a PostgreSQL specific type code, or it might be the JDBC type code (`java.sql.Types.VARCHAR` has value 12 for example).","body":"In any case, given the name of the field, and the data type it is in, I guess it identifies the data type. It might be a PostgreSQL specific type code, or it might be the JDBC type code (<code>java.sql.Types.VARCHAR</code> has value 12 for example)."},{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1693394225,"post_id":77005819,"comment_id":135754194,"body_markdown":"@MarkRotteveel I believe [`JDBCType`](https://docs.oracle.com/en/java/javase/11/docs/api/java.sql/java/sql/JDBCType.html) 12 is also VARCHAR. And the `m_value` looks like a `String` (an ISO-8601 date as a String)","body":"@MarkRotteveel I believe <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.sql/java/sql/JDBCType.html\" rel=\"nofollow noreferrer\"><code>JDBCType</code></a> 12 is also VARCHAR. And the <code>m_value</code> looks like a <code>String</code> (an ISO-8601 date as a String)"},{"owner":{"account_id":213468,"reputation":103494,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1693395122,"post_id":77005819,"comment_id":135754373,"body_markdown":"@ElliottFrisch `java.sql.JDBCType` is an enum equivalent of `java.sql.Types`.","body":"@ElliottFrisch <code>java.sql.JDBCType</code> is an enum equivalent of <code>java.sql.Types</code>."},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1693437381,"post_id":77005819,"comment_id":135762701,"body_markdown":"On SO, there is &quot;This question does not show any research effort,&quot; but this is the seldom seen corollary, &quot;This question shows TOO MUCH research effort.&quot;","body":"On SO, there is &quot;This question does not show any research effort,&quot; but this is the seldom seen corollary, &quot;This question shows TOO MUCH research effort.&quot;"}],"owner":{"account_id":29327630,"reputation":1,"user_id":22469769,"display_name":"GaneshaS"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693382060,"creation_date":1693380819,"question_id":77005819,"body_markdown":"I have created a `PreparedStatement` object and I passed my SQL query to it.\r\nAfter that I set 9 parameters to that `PreparesStatement` object by reading an array.\r\n\r\nWhen I inspect the `PreparesStatement` object reference, I can see `m_type=12`. What is this `m_type=12`?\r\n\r\n![1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/LIPjB.png","title":"I have created a PreparedStatement object and when I inspect that element I can see m_type=12. What is this m_type=12","body":"<p>I have created a <code>PreparedStatement</code> object and I passed my SQL query to it.\nAfter that I set 9 parameters to that <code>PreparesStatement</code> object by reading an array.</p>\n<p>When I inspect the <code>PreparesStatement</code> object reference, I can see <code>m_type=12</code>. What is this <code>m_type=12</code>?</p>\n<p><img src=\"https://i.stack.imgur.com/LIPjB.png\" alt=\"1\" /></p>\n"},{"tags":["python","java","tabula-py"],"comments":[{"owner":{"account_id":6156261,"reputation":12796,"user_id":4799172,"accept_rate":94,"display_name":"roganjosh"},"score":0,"creation_date":1691332250,"post_id":76846312,"comment_id":135474411,"body_markdown":"JSON isn&#39;t  Java, it&#39;s JavaScript and they&#39;re unrelated. This has nothing to do with Java _or_ JS. Your file can&#39;t be parsed. I&#39;d wager that it&#39;s jsonlines","body":"JSON isn&#39;t  Java, it&#39;s JavaScript and they&#39;re unrelated. This has nothing to do with Java <i>or</i> JS. Your file can&#39;t be parsed. I&#39;d wager that it&#39;s jsonlines"},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1691342492,"post_id":76846312,"comment_id":135475582,"body_markdown":"How are you using Java with Python? It doesn&#39;t make sense as described.","body":"How are you using Java with Python? It doesn&#39;t make sense as described."},{"owner":{"account_id":3579159,"reputation":1083,"user_id":2987764,"accept_rate":40,"display_name":"Sahil Doshi"},"score":0,"creation_date":1691852377,"post_id":76846312,"comment_id":135548993,"body_markdown":"Are you using Mac? I am facing exactly same issue. Or this is because of some latest version of JAVA I feel","body":"Are you using Mac? I am facing exactly same issue. Or this is because of some latest version of JAVA I feel"},{"owner":{"account_id":16511191,"reputation":316,"user_id":11929884,"display_name":"RIPPLR"},"score":1,"creation_date":1691879417,"post_id":76846312,"comment_id":135551396,"body_markdown":"@SahilDoshi Yes I am using M1 mac. Tabula works perfectly fine on my Windows computer, but I run into a bunch of issues on mac.","body":"@SahilDoshi Yes I am using M1 mac. Tabula works perfectly fine on my Windows computer, but I run into a bunch of issues on mac."},{"owner":{"account_id":3579159,"reputation":1083,"user_id":2987764,"accept_rate":40,"display_name":"Sahil Doshi"},"score":0,"creation_date":1691915107,"post_id":76846312,"comment_id":135553307,"body_markdown":"Gut feel says it should be something related to Java &quot;Code Cache is full &quot; error","body":"Gut feel says it should be something related to Java &quot;Code Cache is full &quot; error"},{"owner":{"account_id":17592368,"reputation":13891,"user_id":12763954,"display_name":"Olivier"},"score":0,"creation_date":1691934158,"post_id":76846312,"comment_id":135555133,"body_markdown":"The Java warning is, well, just a warning emitted by the JIT compiler. It has nothing to do with the Python error.","body":"The Java warning is, well, just a warning emitted by the JIT compiler. It has nothing to do with the Python error."},{"owner":{"account_id":17592368,"reputation":13891,"user_id":12763954,"display_name":"Olivier"},"score":0,"creation_date":1691934516,"post_id":76846312,"comment_id":135555179,"body_markdown":"@SahilDoshi Are you experiencing the issue with all PDFs or only some?","body":"@SahilDoshi Are you experiencing the issue with all PDFs or only some?"},{"owner":{"account_id":24885,"reputation":30822,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1692608138,"post_id":76846312,"comment_id":135641494,"body_markdown":"The bounty attracted a [ChatGPT](https://meta.stackoverflow.com/questions/421831/temporary-policy-chatgpt-is-banned) plagiariser.","body":"The bounty attracted a <a href=\"https://meta.stackoverflow.com/questions/421831/temporary-policy-chatgpt-is-banned\">ChatGPT</a> plagiariser."}],"answers":[{"tags":[],"owner":{"account_id":376857,"reputation":1599,"user_id":1309503,"display_name":"divyang4481"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1692440431,"creation_date":1692440051,"answer_id":76934591,"question_id":76846312,"body_markdown":"tabula-py is wrapper around  https://github.com/tabulapdf/tabula-java lib,  hence your python code  will invoke JVM, and there you are facing issue with &quot;CodeCache is full&quot; which is related to JVM. So try to config JVM option. \r\n\r\n\r\nAPI Ref:\r\n\r\nhttps://tabula-py.readthedocs.io/en/latest/tabula.html\r\n\r\n\r\nHere I have put example code, but you find appropriate Java options to make it runable.\r\n\r\n    import tabula\r\n    \r\n    # Define the JVM options as a list of string\r\n    jvm_options = [&quot;-XX:ReservedCodeCacheSize=128m&quot;]\r\n    \r\n    # Pass the JVM options when calling read_pdf\r\n    tables = tabula.read_pdf(&#39;your_pdf_file.pdf&#39;, pages=&#39;all&#39;, java_options=jvm_options)\r\n    \r\n    for table in tables:\r\n        print(table)","title":"Tabula-py: Java HotSpot(TM) 64-Bit Server VM warning: CodeCache is full","body":"<p>tabula-py is wrapper around  <a href=\"https://github.com/tabulapdf/tabula-java\" rel=\"nofollow noreferrer\">https://github.com/tabulapdf/tabula-java</a> lib,  hence your python code  will invoke JVM, and there you are facing issue with &quot;CodeCache is full&quot; which is related to JVM. So try to config JVM option.</p>\n<p>API Ref:</p>\n<p><a href=\"https://tabula-py.readthedocs.io/en/latest/tabula.html\" rel=\"nofollow noreferrer\">https://tabula-py.readthedocs.io/en/latest/tabula.html</a></p>\n<p>Here I have put example code, but you find appropriate Java options to make it runable.</p>\n<pre><code>import tabula\n\n# Define the JVM options as a list of string\njvm_options = [&quot;-XX:ReservedCodeCacheSize=128m&quot;]\n\n# Pass the JVM options when calling read_pdf\ntables = tabula.read_pdf('your_pdf_file.pdf', pages='all', java_options=jvm_options)\n\nfor table in tables:\n    print(table)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14628623,"reputation":145,"user_id":10565188,"display_name":"John.Ludlum"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693381899,"creation_date":1693381899,"answer_id":77005947,"question_id":76846312,"body_markdown":"Way too late to be of help now, but for others who might get stuck here, this is what helped me with this exact same issue:\r\n\r\nSeems like the `CodeCache is full` error message ends up adding a log at the start of the JSON string we are trying to read, which then messes up the `json.loads(output)` function. My solution was to manually remove this padded log message at the start by using string functions.\r\n\r\nSo, in `../site-packages/tabula/io.py` in the function `read_pdf()`, change the corresponding line causing the error (in your case line 440) to:\r\n\r\n```{python}\r\nraw_json: List[Any] = json.loads(output.decode(encoding).split(&#39;\\n&#39;)[-1])\r\n```","title":"Tabula-py: Java HotSpot(TM) 64-Bit Server VM warning: CodeCache is full","body":"<p>Way too late to be of help now, but for others who might get stuck here, this is what helped me with this exact same issue:</p>\n<p>Seems like the <code>CodeCache is full</code> error message ends up adding a log at the start of the JSON string we are trying to read, which then messes up the <code>json.loads(output)</code> function. My solution was to manually remove this padded log message at the start by using string functions.</p>\n<p>So, in <code>../site-packages/tabula/io.py</code> in the function <code>read_pdf()</code>, change the corresponding line causing the error (in your case line 440) to:</p>\n<pre><code>raw_json: List[Any] = json.loads(output.decode(encoding).split('\\n')[-1])\n</code></pre>\n"}],"owner":{"account_id":16511191,"reputation":316,"user_id":11929884,"display_name":"RIPPLR"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":263,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":2,"score":1,"last_activity_date":1693381899,"creation_date":1691331778,"question_id":76846312,"body_markdown":"I installed both the tabula-py library and also Java to try and scrape tables from PDFs. I ran some simple code below with a sample pdf I found online:\r\n```python\r\nfrom tabula import read_pdf\r\n\r\npath = &quot;https://sedl.org/afterschool/toolkits/science/pdf/ast_sci_data_tables_sample.pdf&quot;\r\n\r\ntable = read_pdf(path,pages=1) \r\nprint(table[0])\r\n```\r\nI got the following error(s):\r\n\r\n    Got stderr: Java HotSpot(TM) 64-Bit Server VM warning: CodeCache is full. Compiler has been disabled.\r\n    Java HotSpot(TM) 64-Bit Server VM warning: Try increasing the code cache size using -XX:ReservedCodeCacheSize=\r\n\r\n    Traceback (most recent call last):\r\n      File &quot;/Users/default/Desktop/Schedule Data/Extraction.py&quot;, line 21, in &lt;module&gt;\r\n        tables = tabula.read_pdf(&#39;Brunswick Student Proof 1.pdf&#39;,pages = [14,20])\r\n      File &quot;/Users/default/Library/Python/3.9/lib/python/site-packages/tabula/io.py&quot;, line 440, in read_pdf\r\n        raw_json: List[Any] = json.loads(output.decode(encoding))\r\n      File &quot;/Applications/Xcode.app/Contents/Developer/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/json/__init__.py&quot;, line 346, in loads\r\n        return _default_decoder.decode(s)\r\n      File &quot;/Applications/Xcode.app/Contents/Developer/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/json/decoder.py&quot;, line 337, in decode\r\n        obj, end = self.raw_decode(s, idx=_w(s, 0).end())\r\n      File &quot;/Applications/Xcode.app/Contents/Developer/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/json/decoder.py&quot;, line 355, in raw_decode\r\n        raise JSONDecodeError(&quot;Expecting value&quot;, s, err.value) from None\r\n    json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\r\n\r\nI have searched for a potential fix to either the codecache error or the JSON decoder error, and the answers have not been very helpful, is the issue here with the Java end or the tabula library or both?","title":"Tabula-py: Java HotSpot(TM) 64-Bit Server VM warning: CodeCache is full","body":"<p>I installed both the tabula-py library and also Java to try and scrape tables from PDFs. I ran some simple code below with a sample pdf I found online:</p>\n<pre class=\"lang-py prettyprint-override\"><code>from tabula import read_pdf\n\npath = &quot;https://sedl.org/afterschool/toolkits/science/pdf/ast_sci_data_tables_sample.pdf&quot;\n\ntable = read_pdf(path,pages=1) \nprint(table[0])\n</code></pre>\n<p>I got the following error(s):</p>\n<pre><code>Got stderr: Java HotSpot(TM) 64-Bit Server VM warning: CodeCache is full. Compiler has been disabled.\nJava HotSpot(TM) 64-Bit Server VM warning: Try increasing the code cache size using -XX:ReservedCodeCacheSize=\n\nTraceback (most recent call last):\n  File &quot;/Users/default/Desktop/Schedule Data/Extraction.py&quot;, line 21, in &lt;module&gt;\n    tables = tabula.read_pdf('Brunswick Student Proof 1.pdf',pages = [14,20])\n  File &quot;/Users/default/Library/Python/3.9/lib/python/site-packages/tabula/io.py&quot;, line 440, in read_pdf\n    raw_json: List[Any] = json.loads(output.decode(encoding))\n  File &quot;/Applications/Xcode.app/Contents/Developer/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/json/__init__.py&quot;, line 346, in loads\n    return _default_decoder.decode(s)\n  File &quot;/Applications/Xcode.app/Contents/Developer/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/json/decoder.py&quot;, line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n  File &quot;/Applications/Xcode.app/Contents/Developer/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/json/decoder.py&quot;, line 355, in raw_decode\n    raise JSONDecodeError(&quot;Expecting value&quot;, s, err.value) from None\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n</code></pre>\n<p>I have searched for a potential fix to either the codecache error or the JSON decoder error, and the answers have not been very helpful, is the issue here with the Java end or the tabula library or both?</p>\n"},{"tags":["java","activiti","bpmn"],"answers":[{"tags":[],"owner":{"account_id":1339950,"reputation":767,"user_id":1281833,"display_name":"ATMTA"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1363270153,"creation_date":1363119571,"answer_id":15371320,"question_id":15336173,"body_markdown":"There is no way to solve this problem using standard Activiti capabilities. So the only option is using gateways or Java Service Task with class implementing `ActivityBehaviour` (not recommended) to control sequence flow. I prefer using `exclusiveGateway`s  . Check this links for additional information:\n\n 1. [Discussion at Activiti official forum][1]\n&lt;br/&gt;\n \n 2. [MultiInstanceActivityBehavior.java][2] - int resolveNrOfInstances(ActivityExecution execution)\n[ParallelMultiInstanceBehavior][3] - void createInstances(ActivityExecution execution);\n[SequentialMultiInstanceBehavior][4] - void createInstances(ActivityExecution execution);\n\n  [1]: http://forums.activiti.org/en/viewtopic.php?f=6&amp;t=1714\n  [2]: https://github.com/Activiti/Activiti/blob/master/modules/activiti-engine/src/main/java/org/activiti/engine/impl/bpmn/behavior/MultiInstanceActivityBehavior.java\n  [3]: https://github.com/Activiti/Activiti/blob/master/modules/activiti-engine/src/main/java/org/activiti/engine/impl/bpmn/behavior/ParallelMultiInstanceBehavior.java\n  [4]: https://github.com/Activiti/Activiti/blob/master/modules/activiti-engine/src/main/java/org/activiti/engine/impl/bpmn/behavior/SequentialMultiInstanceBehavior.java","title":"activiti multi-instance for each loop with empty collection","body":"<p>There is no way to solve this problem using standard Activiti capabilities. So the only option is using gateways or Java Service Task with class implementing <code>ActivityBehaviour</code> (not recommended) to control sequence flow. I prefer using <code>exclusiveGateway</code>s  . Check this links for additional information:</p>\n<ol>\n<li><p><a href=\"http://forums.activiti.org/en/viewtopic.php?f=6&amp;t=1714\" rel=\"nofollow noreferrer\">Discussion at Activiti official forum</a>\n<br/></p>\n</li>\n<li><p><a href=\"https://github.com/Activiti/Activiti/blob/master/modules/activiti-engine/src/main/java/org/activiti/engine/impl/bpmn/behavior/MultiInstanceActivityBehavior.java\" rel=\"nofollow noreferrer\">MultiInstanceActivityBehavior.java</a> - int resolveNrOfInstances(ActivityExecution execution)\n<a href=\"https://github.com/Activiti/Activiti/blob/master/modules/activiti-engine/src/main/java/org/activiti/engine/impl/bpmn/behavior/ParallelMultiInstanceBehavior.java\" rel=\"nofollow noreferrer\">ParallelMultiInstanceBehavior</a> - void createInstances(ActivityExecution execution);\n<a href=\"https://github.com/Activiti/Activiti/blob/master/modules/activiti-engine/src/main/java/org/activiti/engine/impl/bpmn/behavior/SequentialMultiInstanceBehavior.java\" rel=\"nofollow noreferrer\">SequentialMultiInstanceBehavior</a> - void createInstances(ActivityExecution execution);</p>\n</li>\n</ol>\n"}],"owner":{"account_id":228645,"reputation":587,"user_id":491085,"display_name":"mio"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2686,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":15371320,"answer_count":1,"score":3,"last_activity_date":1693381564,"creation_date":1362997431,"question_id":15336173,"body_markdown":"In our workflows we have several multi-instance call activities, like the following:\r\n\r\n```xml\r\n&lt;callActivity id=&quot;loopFoos&quot; calledElement=&quot;${workflowResolver.resolveWorkflowName(foo)}&quot;&gt;\r\n   &lt;multiInstanceLoopCharacteristics isSequential=&quot;false&quot; activiti:collection=&quot;${foos}&quot; activiti:elementVariable=&quot;foo&quot; /&gt;\r\n&lt;/callActivity&gt;\r\n```\r\n\r\nThe problem is that some of the collections are empty and that leads to exceptions because Activiti assumes that there is at least one element in the collection. We could make decisions around all the subworkflow calls but that would pollute the the workflow diagram with non-business-relevant details.\r\n\r\nWhat we would need is the behaviour of java for each like\r\n\r\n```java\r\nfor (Foo foo : foos) {\r\n    // call workflow\r\n}\r\n```\r\n\r\nwhere empty collections simply don&#39;t enter the loop.\r\n\r\nIs there a way to make Activiti behave like this? How would you model the workflow if there isn&#39;t?","title":"activiti multi-instance for each loop with empty collection","body":"<p>In our workflows we have several multi-instance call activities, like the following:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;callActivity id=&quot;loopFoos&quot; calledElement=&quot;${workflowResolver.resolveWorkflowName(foo)}&quot;&gt;\n   &lt;multiInstanceLoopCharacteristics isSequential=&quot;false&quot; activiti:collection=&quot;${foos}&quot; activiti:elementVariable=&quot;foo&quot; /&gt;\n&lt;/callActivity&gt;\n</code></pre>\n<p>The problem is that some of the collections are empty and that leads to exceptions because Activiti assumes that there is at least one element in the collection. We could make decisions around all the subworkflow calls but that would pollute the the workflow diagram with non-business-relevant details.</p>\n<p>What we would need is the behaviour of java for each like</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (Foo foo : foos) {\n    // call workflow\n}\n</code></pre>\n<p>where empty collections simply don't enter the loop.</p>\n<p>Is there a way to make Activiti behave like this? How would you model the workflow if there isn't?</p>\n"},{"tags":["java","smartcard"],"comments":[{"owner":{"account_id":18686983,"reputation":23,"user_id":13686027,"display_name":"Billie"},"score":0,"creation_date":1693562276,"post_id":77005434,"comment_id":135780693,"body_markdown":"I found a place where to find some code examples how to load .cap File onto smartcard: https://github.com/martinpaljak/GlobalPlatformPro.","body":"I found a place where to find some code examples how to load .cap File onto smartcard: <a href=\"https://github.com/martinpaljak/GlobalPlatformPro\" rel=\"nofollow noreferrer\">github.com/martinpaljak/GlobalPlatformPro</a>."}],"answers":[{"tags":[],"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1693381164,"creation_date":1693381164,"answer_id":77005852,"question_id":77005434,"body_markdown":"You need to look to Global Platform support which defines the lifetime of Applet&#39;s and the security state of the card. This includes mutual authentication to the *card manager* as well as applet installation. The global platform specifications [are available for free](https://globalplatform.org/wp-content/uploads/2018/05/GPC_CardSpecification_v2.3.1_PublicRelease_CC.pdf) (generally after registration). You can download the GP 2.1.1 card specifications relatively easily from other locations.\r\n\r\n\r\nThere are plenty of OS frameworks for this, no need to program this yourself. One of the most well known ones is [Global Platform Pro](https://github.com/martinpaljak/GlobalPlatformPro) library of Martin Paljak (no affiliation). Pro-tip: you can generally also execute or call upon scripts from your Java application - I&#39;ve used that strategy successfully using another proprietary framework.\r\n\r\nNotes:\r\n - In principle other methods of authentication / installation can be used of course, but in practice the applets are always managed by GP.\r\n - Note that Global Platform was previously known as Open Platform or OP, in case you find old references to that.","title":"How to load and install an applet onto the smart card via Java Code","body":"<p>You need to look to Global Platform support which defines the lifetime of Applet's and the security state of the card. This includes mutual authentication to the <em>card manager</em> as well as applet installation. The global platform specifications <a href=\"https://globalplatform.org/wp-content/uploads/2018/05/GPC_CardSpecification_v2.3.1_PublicRelease_CC.pdf\" rel=\"nofollow noreferrer\">are available for free</a> (generally after registration). You can download the GP 2.1.1 card specifications relatively easily from other locations.</p>\n<p>There are plenty of OS frameworks for this, no need to program this yourself. One of the most well known ones is <a href=\"https://github.com/martinpaljak/GlobalPlatformPro\" rel=\"nofollow noreferrer\">Global Platform Pro</a> library of Martin Paljak (no affiliation). Pro-tip: you can generally also execute or call upon scripts from your Java application - I've used that strategy successfully using another proprietary framework.</p>\n<p>Notes:</p>\n<ul>\n<li>In principle other methods of authentication / installation can be used of course, but in practice the applets are always managed by GP.</li>\n<li>Note that Global Platform was previously known as Open Platform or OP, in case you find old references to that.</li>\n</ul>\n"}],"owner":{"account_id":18686983,"reputation":23,"user_id":13686027,"display_name":"Billie"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77005852,"answer_count":1,"score":0,"last_activity_date":1693381164,"creation_date":1693377011,"question_id":77005434,"body_markdown":"I want to write a Java Programm that downloads and installs an Applet onto a Java Smartcard. I am using ACOSJ-DI 95K Java Card, https://www.cardomatic.de/en/p/acosj-di-95k-java-card-pack-of-5. Can anybody tell me where I can find examples? Can anybody explain me how the mutual authentication works?\r\n\r\nI did some research in the internet and have found a framework https://github.com/jnasmartcardio/jnasmartcardio. This framework has also some examples but I do not find any methods for downloading and installing an applet onto a smartcard. ","title":"How to load and install an applet onto the smart card via Java Code","body":"<p>I want to write a Java Programm that downloads and installs an Applet onto a Java Smartcard. I am using ACOSJ-DI 95K Java Card, <a href=\"https://www.cardomatic.de/en/p/acosj-di-95k-java-card-pack-of-5\" rel=\"nofollow noreferrer\">https://www.cardomatic.de/en/p/acosj-di-95k-java-card-pack-of-5</a>. Can anybody tell me where I can find examples? Can anybody explain me how the mutual authentication works?</p>\n<p>I did some research in the internet and have found a framework <a href=\"https://github.com/jnasmartcardio/jnasmartcardio\" rel=\"nofollow noreferrer\">https://github.com/jnasmartcardio/jnasmartcardio</a>. This framework has also some examples but I do not find any methods for downloading and installing an applet onto a smartcard.</p>\n"},{"tags":["java","apache-poi","powerpoint","clone"],"answers":[{"tags":[],"owner":{"account_id":29313303,"reputation":21,"user_id":22458577,"display_name":"Łukasz Walczak"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693380909,"creation_date":1693380909,"answer_id":77005829,"question_id":77005712,"body_markdown":"Okay, I solved my problem! It seems that Apache POI has made some changes in version 4 that affect the way you work with text in PPTX slides. The problem I&#39;m facing is due to these changes. Specifically, it relates to the use of XSLFTextParagraph and XSLFTextRun, which in newer versions of POI use an incorrect text body (CTTextBody) after copying shapes from other slides.\r\n\r\nI adjusted my code this way:\r\nInstead of using XSLFTextParagraph and XSLFTextRun, I used org.apache.poi.xddf.usermodel.text.XDDFTextParagraph and org.apache.poi.xddf.usermodel.text.XDDFTextRun, which are newer classes for working with text in Apache POI.","title":"Problem with Apache POI in Mendix: Changes to Cloned Slide Reflected on Original","body":"<p>Okay, I solved my problem! It seems that Apache POI has made some changes in version 4 that affect the way you work with text in PPTX slides. The problem I'm facing is due to these changes. Specifically, it relates to the use of XSLFTextParagraph and XSLFTextRun, which in newer versions of POI use an incorrect text body (CTTextBody) after copying shapes from other slides.</p>\n<p>I adjusted my code this way:\nInstead of using XSLFTextParagraph and XSLFTextRun, I used org.apache.poi.xddf.usermodel.text.XDDFTextParagraph and org.apache.poi.xddf.usermodel.text.XDDFTextRun, which are newer classes for working with text in Apache POI.</p>\n"}],"owner":{"account_id":29313303,"reputation":21,"user_id":22458577,"display_name":"Łukasz Walczak"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693380909,"creation_date":1693379634,"question_id":77005712,"body_markdown":"I&#39;m working on a Mendix project and am facing a peculiar issue with Apache POI. I&#39;ve got a function that&#39;s meant to modify a cloned PowerPoint slide, but instead, it seems to modify the original slide. I&#39;m surprised because other functions that add tables and change images work perfectly, reflecting changes in the expected places. It&#39;s almost as if Apache POI is ignoring the slide I&#39;m passing and operating on the original.\r\n\r\nHere&#39;s the code:\r\n```\r\npublic IMendixObject executeAction() throws Exception {\r\n    // Fetching presentation Slides from the Slides_ConfigurationBios relationship\r\n    IMendixObject slidesObj = Core.retrieveByPath(getContext(), this.ConfigurationBios.getMendixObject(), &quot;Exporter.Slides_ConfigurationBios&quot;).get(0);\r\n    InputStream originalContentStream = Core.getFileDocumentContent(getContext(), slidesObj);\r\n    XMLSlideShow mainPpt = new XMLSlideShow(originalContentStream);\r\n    XSLFSlide templateSlide = mainPpt.getSlides().get(0);\r\n\r\n    // Retrieving list of PersonsToExport associated with ConfigurationBios\r\n    List&lt;IMendixObject&gt; personsToExportList = Core.retrieveByPath(getContext(), this.ConfigurationBios.getMendixObject(), &quot;Exporter.PersonsToExport_ConfigurationBios&quot;);\r\n\r\n    // Iterating through the list of PersonsToExport\r\n    for (IMendixObject personToExport : personsToExportList) {\r\n        // Retrieving list of Person associated with PersonsToExport\r\n        List&lt;IMendixObject&gt; personList = Core.retrieveByPath(getContext(), personToExport, &quot;Exporter.PersonsToExport_Person&quot;);\r\n        for (IMendixObject person : personList) {\r\n            // Fetching the PersonImage object associated with the Person object\r\n            IMendixObject personImageObj = Core.retrieveByPath(getContext(), person, &quot;Persons.PersonImage_Person&quot;).get(0);\r\n            persons.proxies.PersonImage PersonImage = personImageObj == null ? null : persons.proxies.PersonImage.initialize(getContext(), personImageObj);\r\n\r\n            // Cloning the template slide\r\n            XSLFSlide clonedSlide = mainPpt.createSlide().importContent(templateSlide);\r\n\r\n            // Calling functions to modify the cloned slide\r\n            Map&lt;String, String&gt; replacements = generateReplacementsMap(clonedSlide, person);\r\n            replaceTextInSlide(clonedSlide, replacements);\r\n\r\n            if (PersonImage != null &amp;&amp; PersonImage.getMendixObject() != null) {\r\n                replaceImageInSlide(clonedSlide, PersonImage);\r\n            }\r\n\r\n            // [Other functions which seem to work fine]\r\n        }\r\n    }\r\n\r\n    // Removing the original template slide\r\n    mainPpt.removeSlide(0);\r\n\r\n    // Saving the modified presentation to the Slides object\r\n    ByteArrayOutputStream byteOutput = new ByteArrayOutputStream();\r\n    mainPpt.write(byteOutput);\r\n    Core.storeFileDocumentContent(getContext(), slidesObj, new ByteArrayInputStream(byteOutput.toByteArray()));\r\n\r\n    return slidesObj;\r\n}\r\n\r\nprivate Map&lt;String, String&gt; generateReplacementsMap(XSLFSlide slide, IMendixObject person) {\r\n    Map&lt;String, String&gt; replacements = new HashMap&lt;&gt;();\r\n    // Search for text on the slide contained between &quot;[#&quot; and &quot;#]&quot;\r\n    for (XSLFShape shape : slide.getShapes()) {\r\n        if (shape instanceof XSLFTextShape) {\r\n            XSLFTextShape textShape = (XSLFTextShape) shape;\r\n            for (XSLFTextParagraph paragraph : textShape.getTextParagraphs()) {\r\n                for (XSLFTextRun run : paragraph.getTextRuns()) {\r\n                    String text = run.getRawText();\r\n                    if (text.contains(&quot;[#&quot;) &amp;&amp; text.contains(&quot;#]&quot;)) {\r\n                        String attributeName = text.substring(text.indexOf(&quot;[#&quot;) + 2, text.indexOf(&quot;#]&quot;));\r\n                        IMendixObjectMember&lt;?&gt; member = person.getMember(getContext(), attributeName);\r\n                        if (member != null) {\r\n                            String replacementValue = member.getValue(getContext()) != null ? member.getValue(getContext()).toString() : &quot;[!FIELD MISSING!]&quot;;\r\n                            replacements.put(&quot;[#&quot; + attributeName + &quot;#]&quot;, replacementValue);\r\n                        } else {\r\n                            replacements.put(&quot;[#&quot; + attributeName + &quot;#]&quot;, &quot;[!FIELD MISSING!]&quot;);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return replacements;\r\n}\r\n\r\nprivate void replaceTextInSlide(XSLFSlide slide, Map&lt;String, String&gt; replacements) {\r\n    for (XSLFShape shape : slide.getShapes()) {\r\n        if (shape instanceof XSLFTextShape) {\r\n            XSLFTextShape textShape = (XSLFTextShape) shape;\r\n            for (Map.Entry&lt;String, String&gt; entry : replacements.entrySet()) {\r\n                String find = entry.getKey();\r\n                String replace = entry.getValue();\r\n                textShape.getTextParagraphs().forEach(paragraph -&gt; {\r\n                    paragraph.getTextRuns().forEach(run -&gt; {\r\n                        String text = run.getRawText();\r\n                        if (text.contains(find)) {\r\n                            run.setText(text.replace(find, replace));\r\n                        }\r\n                    });\r\n                });\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\nAfter the presentation is created, and before I remove the first slide (which is the original), I can see that changes regarding text replacements have been made to it. Other changes, however, are appropriately made to the cloned slides.\r\n\r\nAny insights or suggestions on why this might be happening or how to resolve it?","title":"Problem with Apache POI in Mendix: Changes to Cloned Slide Reflected on Original","body":"<p>I'm working on a Mendix project and am facing a peculiar issue with Apache POI. I've got a function that's meant to modify a cloned PowerPoint slide, but instead, it seems to modify the original slide. I'm surprised because other functions that add tables and change images work perfectly, reflecting changes in the expected places. It's almost as if Apache POI is ignoring the slide I'm passing and operating on the original.</p>\n<p>Here's the code:</p>\n<pre><code>public IMendixObject executeAction() throws Exception {\n    // Fetching presentation Slides from the Slides_ConfigurationBios relationship\n    IMendixObject slidesObj = Core.retrieveByPath(getContext(), this.ConfigurationBios.getMendixObject(), &quot;Exporter.Slides_ConfigurationBios&quot;).get(0);\n    InputStream originalContentStream = Core.getFileDocumentContent(getContext(), slidesObj);\n    XMLSlideShow mainPpt = new XMLSlideShow(originalContentStream);\n    XSLFSlide templateSlide = mainPpt.getSlides().get(0);\n\n    // Retrieving list of PersonsToExport associated with ConfigurationBios\n    List&lt;IMendixObject&gt; personsToExportList = Core.retrieveByPath(getContext(), this.ConfigurationBios.getMendixObject(), &quot;Exporter.PersonsToExport_ConfigurationBios&quot;);\n\n    // Iterating through the list of PersonsToExport\n    for (IMendixObject personToExport : personsToExportList) {\n        // Retrieving list of Person associated with PersonsToExport\n        List&lt;IMendixObject&gt; personList = Core.retrieveByPath(getContext(), personToExport, &quot;Exporter.PersonsToExport_Person&quot;);\n        for (IMendixObject person : personList) {\n            // Fetching the PersonImage object associated with the Person object\n            IMendixObject personImageObj = Core.retrieveByPath(getContext(), person, &quot;Persons.PersonImage_Person&quot;).get(0);\n            persons.proxies.PersonImage PersonImage = personImageObj == null ? null : persons.proxies.PersonImage.initialize(getContext(), personImageObj);\n\n            // Cloning the template slide\n            XSLFSlide clonedSlide = mainPpt.createSlide().importContent(templateSlide);\n\n            // Calling functions to modify the cloned slide\n            Map&lt;String, String&gt; replacements = generateReplacementsMap(clonedSlide, person);\n            replaceTextInSlide(clonedSlide, replacements);\n\n            if (PersonImage != null &amp;&amp; PersonImage.getMendixObject() != null) {\n                replaceImageInSlide(clonedSlide, PersonImage);\n            }\n\n            // [Other functions which seem to work fine]\n        }\n    }\n\n    // Removing the original template slide\n    mainPpt.removeSlide(0);\n\n    // Saving the modified presentation to the Slides object\n    ByteArrayOutputStream byteOutput = new ByteArrayOutputStream();\n    mainPpt.write(byteOutput);\n    Core.storeFileDocumentContent(getContext(), slidesObj, new ByteArrayInputStream(byteOutput.toByteArray()));\n\n    return slidesObj;\n}\n\nprivate Map&lt;String, String&gt; generateReplacementsMap(XSLFSlide slide, IMendixObject person) {\n    Map&lt;String, String&gt; replacements = new HashMap&lt;&gt;();\n    // Search for text on the slide contained between &quot;[#&quot; and &quot;#]&quot;\n    for (XSLFShape shape : slide.getShapes()) {\n        if (shape instanceof XSLFTextShape) {\n            XSLFTextShape textShape = (XSLFTextShape) shape;\n            for (XSLFTextParagraph paragraph : textShape.getTextParagraphs()) {\n                for (XSLFTextRun run : paragraph.getTextRuns()) {\n                    String text = run.getRawText();\n                    if (text.contains(&quot;[#&quot;) &amp;&amp; text.contains(&quot;#]&quot;)) {\n                        String attributeName = text.substring(text.indexOf(&quot;[#&quot;) + 2, text.indexOf(&quot;#]&quot;));\n                        IMendixObjectMember&lt;?&gt; member = person.getMember(getContext(), attributeName);\n                        if (member != null) {\n                            String replacementValue = member.getValue(getContext()) != null ? member.getValue(getContext()).toString() : &quot;[!FIELD MISSING!]&quot;;\n                            replacements.put(&quot;[#&quot; + attributeName + &quot;#]&quot;, replacementValue);\n                        } else {\n                            replacements.put(&quot;[#&quot; + attributeName + &quot;#]&quot;, &quot;[!FIELD MISSING!]&quot;);\n                        }\n                    }\n                }\n            }\n        }\n    }\n    return replacements;\n}\n\nprivate void replaceTextInSlide(XSLFSlide slide, Map&lt;String, String&gt; replacements) {\n    for (XSLFShape shape : slide.getShapes()) {\n        if (shape instanceof XSLFTextShape) {\n            XSLFTextShape textShape = (XSLFTextShape) shape;\n            for (Map.Entry&lt;String, String&gt; entry : replacements.entrySet()) {\n                String find = entry.getKey();\n                String replace = entry.getValue();\n                textShape.getTextParagraphs().forEach(paragraph -&gt; {\n                    paragraph.getTextRuns().forEach(run -&gt; {\n                        String text = run.getRawText();\n                        if (text.contains(find)) {\n                            run.setText(text.replace(find, replace));\n                        }\n                    });\n                });\n            }\n        }\n    }\n}\n</code></pre>\n<p>After the presentation is created, and before I remove the first slide (which is the original), I can see that changes regarding text replacements have been made to it. Other changes, however, are appropriately made to the cloned slides.</p>\n<p>Any insights or suggestions on why this might be happening or how to resolve it?</p>\n"},{"tags":["java","spring-boot","content-management-system","contentful-api"],"owner":{"account_id":5462638,"reputation":1,"user_id":4344238,"display_name":"Nilam Dhami"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693380857,"creation_date":1693380242,"question_id":77005763,"body_markdown":"I&#39;m creating an API in Java to create content in contentful, While running the job entries are getting created with updatedBy user as **ETL BOT**, I want to change it to custom name, so that i can filter the entries from UI as and when required.\r\n\r\n\r\nI&#39;ve below code,\r\n\r\n```\r\nCMAEntry entry = cmaClient.entries().fetchOne(entryId);\r\nentry.setField(&quot;id&quot;, &quot;en-US&quot;, id);\r\nCMAEntry updatedEntry = cmaClient.entries().update(entry);\r\nCMAEntry entryPublish = cmaClient.entries().fetchOne(updatedEntry.getId());\r\ncmaClient.entries().publish(entryPublish);\r\n\r\n```\r\nI have seen that CMAEntry has `setSystem(CMASystem system)` and CMASystem has `CMALink updatedBy`\r\n\r\nI can not see set method for updatedBy, Can anybody please help me how can i add custom name for updatedBy rather than **ETL BOT**.\r\n\r\nI understand that sys.updatedBy is kinda metadata and related to auth header who is trying to create the entry, but is there any way we can modify it?","title":"Modified updatedBy user name in contentful","body":"<p>I'm creating an API in Java to create content in contentful, While running the job entries are getting created with updatedBy user as <strong>ETL BOT</strong>, I want to change it to custom name, so that i can filter the entries from UI as and when required.</p>\n<p>I've below code,</p>\n<pre><code>CMAEntry entry = cmaClient.entries().fetchOne(entryId);\nentry.setField(&quot;id&quot;, &quot;en-US&quot;, id);\nCMAEntry updatedEntry = cmaClient.entries().update(entry);\nCMAEntry entryPublish = cmaClient.entries().fetchOne(updatedEntry.getId());\ncmaClient.entries().publish(entryPublish);\n\n</code></pre>\n<p>I have seen that CMAEntry has <code>setSystem(CMASystem system)</code> and CMASystem has <code>CMALink updatedBy</code></p>\n<p>I can not see set method for updatedBy, Can anybody please help me how can i add custom name for updatedBy rather than <strong>ETL BOT</strong>.</p>\n<p>I understand that sys.updatedBy is kinda metadata and related to auth header who is trying to create the entry, but is there any way we can modify it?</p>\n"},{"tags":["java","jpa","eclipselink"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1693324812,"post_id":77001158,"comment_id":135744400,"body_markdown":"The extra &quot;LEFT OUTER JOIN CHILD_ENTITY t2 &quot; is caused from you calling myEntityRoot.join(&quot;childEntities&quot;, JoinType.LEFT). This forces a join to be added to the query to be used for filtering - the SQL shows thought that you aren&#39;t really using it. The &#39;other&#39; join, CHILD_ENTITY t0, is used for fetching; they must be separate so that filtering doesn&#39;t affect the view of the data in entities.","body":"The extra &quot;LEFT OUTER JOIN CHILD_ENTITY t2 &quot; is caused from you calling myEntityRoot.join(&quot;childEntities&quot;, JoinType.LEFT). This forces a join to be added to the query to be used for filtering - the SQL shows thought that you aren&#39;t really using it. The &#39;other&#39; join, CHILD_ENTITY t0, is used for fetching; they must be separate so that filtering doesn&#39;t affect the view of the data in entities."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1693325096,"post_id":77001158,"comment_id":135744470,"body_markdown":"What exactly are you looking to build,- I don&#39;t see how you can get &quot;select entity.pk, entity.dateField, entity.stringField, entity.childEntities from Entity entity&quot; and work as you will get one row for every ChildEntity - so duplicate MyEntity instances, one per child. If you want to exclude certain fields from Entity instances, you might try using an EntityGraph as a fetchgraph to your query. This will cause anything not defined in the EntityGraph to be treated as lazy and so not be fetched without need of a multiselect. You could just mark the clob as lazy with @Basic(fetch=LAZY)","body":"What exactly are you looking to build,- I don&#39;t see how you can get &quot;select entity.pk, entity.dateField, entity.stringField, entity.childEntities from Entity entity&quot; and work as you will get one row for every ChildEntity - so duplicate MyEntity instances, one per child. If you want to exclude certain fields from Entity instances, you might try using an EntityGraph as a fetchgraph to your query. This will cause anything not defined in the EntityGraph to be treated as lazy and so not be fetched without need of a multiselect. You could just mark the clob as lazy with @Basic(fetch=LAZY)"},{"owner":{"account_id":29321866,"reputation":1,"user_id":22465275,"display_name":"Bugster"},"score":0,"creation_date":1693380841,"post_id":77001158,"comment_id":135751366,"body_markdown":"Sry, simplified to much. Problem is, I have 4 Childs. All of them are lazy loaded. Problem is, I do not get results, when one of them has no related dataset, because of the INNER JOIN, the multiselect builds. I will try the EntityGraph.","body":"Sry, simplified to much. Problem is, I have 4 Childs. All of them are lazy loaded. Problem is, I do not get results, when one of them has no related dataset, because of the INNER JOIN, the multiselect builds. I will try the EntityGraph."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1693396256,"post_id":77001158,"comment_id":135754623,"body_markdown":"You&#39;ll still have a problem with the childEntities relationship, as JPA will be required to do a fetch join (left or not) and return each in the collection individually. The join itself is because you call root.get(&quot;childEntities&quot;). You&#39;ll want to instead use the childEntityJoin you created earlier since it defined a left join.","body":"You&#39;ll still have a problem with the childEntities relationship, as JPA will be required to do a fetch join (left or not) and return each in the collection individually. The join itself is because you call root.get(&quot;childEntities&quot;). You&#39;ll want to instead use the childEntityJoin you created earlier since it defined a left join."}],"answers":[{"tags":[],"owner":{"account_id":29176687,"reputation":322,"user_id":22351796,"display_name":"Karsten"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693322970,"creation_date":1693322970,"answer_id":77001580,"question_id":77001158,"body_markdown":"`LEFT JOIN` and `LEFT OUTER JOIN` are the same.\r\n\r\nThe database driver will generate the SQL query for you. As long as you have the correct driver for your database version you shouldn&#39;t be concerned about this.","title":"JPA: multiselect and LEFT JOINS","body":"<p><code>LEFT JOIN</code> and <code>LEFT OUTER JOIN</code> are the same.</p>\n<p>The database driver will generate the SQL query for you. As long as you have the correct driver for your database version you shouldn't be concerned about this.</p>\n"}],"owner":{"account_id":29321866,"reputation":1,"user_id":22465275,"display_name":"Bugster"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693380641,"creation_date":1693319786,"question_id":77001158,"body_markdown":"I&#39;m working on a complex query construction using JPA Criteria API, and I&#39;m encountering a bit of an issue with my SQL result.\r\n\r\nI have an Entity like this:\r\n\r\n```\r\npublic class MyEntity {\r\n\r\n    @Id\r\n    @Column(name = &quot;ENTITY_ID&quot;, nullable = false)\r\n    private Long pk;\r\n\r\n    @Column(name = &quot;DATE_FIELD&quot;)\r\n    @EqualsAndHashCode.Exclude\r\n    private LocalDateTime dateField;\r\n\r\n    @Column(name = &quot;STRING_FIELD&quot;, nullable = false, length = 5)\r\n    @Enumerated(EnumType.STRING)\r\n    private SourceQueue stringField;\r\n\r\n    @OneToMany(fetch = FetchType.LAZY, cascade = CascadeType.ALL, orphanRemoval = true)\r\n    @JoinColumn(name = &quot;ENTITY_ID&quot;, referencedColumnName = &quot;PARENT_ID&quot;, nullable = false)\r\n    @EqualsAndHashCode.Exclude\r\n    @ToString.Exclude\r\n    private List&lt;ChildEntity&gt; childEntities;\r\n\r\n    @Column(name = &quot;CLOB_FIELD&quot;)\r\n    @EqualsAndHashCode.Exclude\r\n    @Lob\r\n    private String clobField;\r\n```\r\n\r\nI use a multiselect, because I want make it distinct and exclude the clobField. In order to construct a filter, I join the childEntity on a LEFT JOIN. But the criteria query constructs not only the LEFT JOIN, but also an old INNER JOIN (comma seperated table in FROM, link in WHERE), because the childEntity is (and has to be) part of the multiselect.\r\n\r\n```\r\n    @Override\r\n    public Collection&lt;MyEntity&gt; findAllWithLimit(QueryParameters queryParameters) {\r\n        final CriteriaBuilder criteriaBuilder = getEntityManager().getCriteriaBuilder();\r\n        final CriteriaQuery&lt;MyEntity&gt; criteriaQuery = criteriaBuilder.createQuery(MyEntity.class);\r\n        final Root&lt;MyEntity&gt; myEntityRoot = criteriaQuery.from(MyEntity.class);\r\n        final Join&lt;MyEntity, ChildEntity&gt; childEntityJoin = myEntityRoot.join(&quot;childEntities&quot;, JoinType.LEFT);\r\n\r\n        final List&lt;Selection&lt;?&gt;&gt; selections = getSelections(myEntityRoot);\r\n        List&lt;Predicate&gt; predicateList = new ArrayList&lt;&gt;();\r\n\r\n        predicateList.addAll(createChildEntityPredicates(criteriaBuilder, childEntityJoin, queryParameters));\r\n        \r\n        criteriaQuery.multiselect(selections);\r\n        criteriaQuery.distinct(true);\r\n\r\n        Predicate finalPredicate = criteriaBuilder.and(predicateList.toArray(new Predicate[0]));\r\n        criteriaQuery.where(finalPredicate);\r\n\r\n        Optional&lt;Order&gt; orderOptional = createOrderPredicate(criteriaBuilder,\r\n            myEntityRoot, queryParameters.getSortField(), queryParameters.getSortOrder());\r\n        orderOptional.ifPresent(criteriaQuery::orderBy);\r\n\r\n        TypedQuery&lt;MyEntity&gt; query = getEntityManager().createQuery(criteriaQuery);\r\n        query.setFirstResult(queryParameters.getFirstRowIndex());\r\n        query.setMaxResults(queryParameters.getPageSize());\r\n        query.setHint(QueryHints.MAINTAIN_CACHE, HintValues.FALSE);\r\n\r\n        return query.getResultList();\r\n    }\r\n\r\n\tprivate List&lt;Selection&lt;?&gt;&gt; getSelections(Root&lt;MyEntity&gt; root) {\r\n        List&lt;Selection&lt;?&gt;&gt; selections = new ArrayList&lt;&gt;();\r\n        List&lt;String&gt; attributeNames = Stream.of(&quot;pk&quot;,&quot;dateField&quot;,&quot;stringField&quot;,&quot;childEntities&quot;).collect(Collectors.toList());\r\n        attributeNames.forEach(attributeName -&gt; selections.add(root.get(attributeName)));\r\n\r\n        return selections;\r\n    }\r\n```\r\n\r\nThis creates an SQL like:\r\n\r\n```\r\nSELECT DISTINCT t1.ENTITY_ID AS a1, \r\n\t\t\t\tt1.DATE_FIELD AS a2, \r\n\t\t\t\tt1.STRING_FIELD AS a3,  \r\n\t\t\t\tt0.TUINFOID AS a4, \r\n\t\t\t\tt0.COMMENTS AS a5, \r\nFROM MY_ENTITY t1 \r\nLEFT OUTER JOIN CHILD_ENTITY t2 \r\n\tON (t2.PARENT_ID = t1.ENTITY_ID), \r\nCHILD_ENTITY t0 \r\nWHERE ((t0.PARENT_ID = t1.ENTITY_ID) ORDER BY t1.ENTITY_ID;\r\n```\r\n\r\nHow can I get the builder to leave the INNER JOIN out of the sql?\r\n\r\nOriginal Problem is the CLOB and the distinct. I already tried to do this with a DTO. So far the multiselect yields the best outcome, because this is a very simplified Version of my code and DTO got really messy (and had the same problems in the long run).","title":"JPA: multiselect and LEFT JOINS","body":"<p>I'm working on a complex query construction using JPA Criteria API, and I'm encountering a bit of an issue with my SQL result.</p>\n<p>I have an Entity like this:</p>\n<pre><code>public class MyEntity {\n\n    @Id\n    @Column(name = &quot;ENTITY_ID&quot;, nullable = false)\n    private Long pk;\n\n    @Column(name = &quot;DATE_FIELD&quot;)\n    @EqualsAndHashCode.Exclude\n    private LocalDateTime dateField;\n\n    @Column(name = &quot;STRING_FIELD&quot;, nullable = false, length = 5)\n    @Enumerated(EnumType.STRING)\n    private SourceQueue stringField;\n\n    @OneToMany(fetch = FetchType.LAZY, cascade = CascadeType.ALL, orphanRemoval = true)\n    @JoinColumn(name = &quot;ENTITY_ID&quot;, referencedColumnName = &quot;PARENT_ID&quot;, nullable = false)\n    @EqualsAndHashCode.Exclude\n    @ToString.Exclude\n    private List&lt;ChildEntity&gt; childEntities;\n\n    @Column(name = &quot;CLOB_FIELD&quot;)\n    @EqualsAndHashCode.Exclude\n    @Lob\n    private String clobField;\n</code></pre>\n<p>I use a multiselect, because I want make it distinct and exclude the clobField. In order to construct a filter, I join the childEntity on a LEFT JOIN. But the criteria query constructs not only the LEFT JOIN, but also an old INNER JOIN (comma seperated table in FROM, link in WHERE), because the childEntity is (and has to be) part of the multiselect.</p>\n<pre><code>    @Override\n    public Collection&lt;MyEntity&gt; findAllWithLimit(QueryParameters queryParameters) {\n        final CriteriaBuilder criteriaBuilder = getEntityManager().getCriteriaBuilder();\n        final CriteriaQuery&lt;MyEntity&gt; criteriaQuery = criteriaBuilder.createQuery(MyEntity.class);\n        final Root&lt;MyEntity&gt; myEntityRoot = criteriaQuery.from(MyEntity.class);\n        final Join&lt;MyEntity, ChildEntity&gt; childEntityJoin = myEntityRoot.join(&quot;childEntities&quot;, JoinType.LEFT);\n\n        final List&lt;Selection&lt;?&gt;&gt; selections = getSelections(myEntityRoot);\n        List&lt;Predicate&gt; predicateList = new ArrayList&lt;&gt;();\n\n        predicateList.addAll(createChildEntityPredicates(criteriaBuilder, childEntityJoin, queryParameters));\n        \n        criteriaQuery.multiselect(selections);\n        criteriaQuery.distinct(true);\n\n        Predicate finalPredicate = criteriaBuilder.and(predicateList.toArray(new Predicate[0]));\n        criteriaQuery.where(finalPredicate);\n\n        Optional&lt;Order&gt; orderOptional = createOrderPredicate(criteriaBuilder,\n            myEntityRoot, queryParameters.getSortField(), queryParameters.getSortOrder());\n        orderOptional.ifPresent(criteriaQuery::orderBy);\n\n        TypedQuery&lt;MyEntity&gt; query = getEntityManager().createQuery(criteriaQuery);\n        query.setFirstResult(queryParameters.getFirstRowIndex());\n        query.setMaxResults(queryParameters.getPageSize());\n        query.setHint(QueryHints.MAINTAIN_CACHE, HintValues.FALSE);\n\n        return query.getResultList();\n    }\n\n    private List&lt;Selection&lt;?&gt;&gt; getSelections(Root&lt;MyEntity&gt; root) {\n        List&lt;Selection&lt;?&gt;&gt; selections = new ArrayList&lt;&gt;();\n        List&lt;String&gt; attributeNames = Stream.of(&quot;pk&quot;,&quot;dateField&quot;,&quot;stringField&quot;,&quot;childEntities&quot;).collect(Collectors.toList());\n        attributeNames.forEach(attributeName -&gt; selections.add(root.get(attributeName)));\n\n        return selections;\n    }\n</code></pre>\n<p>This creates an SQL like:</p>\n<pre><code>SELECT DISTINCT t1.ENTITY_ID AS a1, \n                t1.DATE_FIELD AS a2, \n                t1.STRING_FIELD AS a3,  \n                t0.TUINFOID AS a4, \n                t0.COMMENTS AS a5, \nFROM MY_ENTITY t1 \nLEFT OUTER JOIN CHILD_ENTITY t2 \n    ON (t2.PARENT_ID = t1.ENTITY_ID), \nCHILD_ENTITY t0 \nWHERE ((t0.PARENT_ID = t1.ENTITY_ID) ORDER BY t1.ENTITY_ID;\n</code></pre>\n<p>How can I get the builder to leave the INNER JOIN out of the sql?</p>\n<p>Original Problem is the CLOB and the distinct. I already tried to do this with a DTO. So far the multiselect yields the best outcome, because this is a very simplified Version of my code and DTO got really messy (and had the same problems in the long run).</p>\n"},{"tags":["java","zip","corruption"],"comments":[{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1690894561,"post_id":76811821,"comment_id":135414348,"body_markdown":"Please provide a [minimal reproducible example](http://stackoverflow.com/help/minimal-reproducible-example). Your entire code is too big for this question. Also have you tried to use any of the methods you mentioned? Neither of them are in your code.","body":"Please provide a <a href=\"http://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Your entire code is too big for this question. Also have you tried to use any of the methods you mentioned? Neither of them are in your code."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1690894762,"post_id":76811821,"comment_id":135414391,"body_markdown":"What&#39;s the relevance of the uncompress code? And I notice you don&#39;t check the return value of `FileInputStream.read`.","body":"What&#39;s the relevance of the uncompress code? And I notice you don&#39;t check the return value of <code>FileInputStream.read</code>."},{"owner":{"account_id":1971679,"reputation":3447,"user_id":1770430,"accept_rate":74,"display_name":"Nzall"},"score":0,"creation_date":1690895967,"post_id":76811821,"comment_id":135414645,"body_markdown":"@tgdavies I had something happen while creating this question and lost my original question and had to recreate it. During that time I forgot to include the error I got when calling the uncompress code. As for the FileInputStream.read() return value part, I didn&#39;t touch that part when I last changed the code. The last change I made to this code was to use try-with-resources every time there used to be a try-finally.","body":"@tgdavies I had something happen while creating this question and lost my original question and had to recreate it. During that time I forgot to include the error I got when calling the uncompress code. As for the FileInputStream.read() return value part, I didn&#39;t touch that part when I last changed the code. The last change I made to this code was to use try-with-resources every time there used to be a try-finally."},{"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1690896210,"post_id":76811821,"comment_id":135414703,"body_markdown":"Your `getFileContents` method is just plain broken, the setup means it&#39;ll fail on large files, the security setup of ensuring no absolute paths end up in the zip file is dubious, and the exception handling is problematic. However, none of these issues explain what you are observing. Given that it occurs intermittently, and no obvious issues are in the code that explain it (you&#39;re right, you&#39;re closing the right things safely):","body":"Your <code>getFileContents</code> method is just plain broken, the setup means it&#39;ll fail on large files, the security setup of ensuring no absolute paths end up in the zip file is dubious, and the exception handling is problematic. However, none of these issues explain what you are observing. Given that it occurs intermittently, and no obvious issues are in the code that explain it (you&#39;re right, you&#39;re closing the right things safely):"},{"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1690896285,"post_id":76811821,"comment_id":135414720,"body_markdown":"[1] Write test code that uses this class to write a bunch of reliably-random data (reliably random: Generate it using `new Random(1234)` - some hardcoded seed value, so that every run it&#39;s the same) and run it a few times. Preferably in a script loop (using its own unzip code to check if did the job right). Your first job is to have a setup where you can reliably cause the problem to re-occur. And in considerably less time than an hour.","body":"[1] Write test code that uses this class to write a bunch of reliably-random data (reliably random: Generate it using <code>new Random(1234)</code> - some hardcoded seed value, so that every run it&#39;s the same) and run it a few times. Preferably in a script loop (using its own unzip code to check if did the job right). Your first job is to have a setup where you can reliably cause the problem to re-occur. And in considerably less time than an hour."},{"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1690896323,"post_id":76811821,"comment_id":135414737,"body_markdown":"[2] Then run it with `-Xint` and run it on Java17. Then run it on a different disk (a failing disk would also explain this, though you&#39;d expect more problems to show up on your system if that&#39;s the explanation).","body":"[2] Then run it with <code>-Xint</code> and run it on Java17. Then run it on a different disk (a failing disk would also explain this, though you&#39;d expect more problems to show up on your system if that&#39;s the explanation)."},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1690897648,"post_id":76811821,"comment_id":135415050,"body_markdown":"This seems to be a duplicated of [Java util zip creates &quot;corrupt&quot; zip files](https://stackoverflow.com/questions/17055650/java-util-zip-creates-corrupt-zip-files) and you just didn&#39;t follow the instructions of the answer in your code.","body":"This seems to be a duplicated of <a href=\"https://stackoverflow.com/questions/17055650/java-util-zip-creates-corrupt-zip-files\">Java util zip creates &quot;corrupt&quot; zip files</a> and you just didn&#39;t follow the instructions of the answer in your code."},{"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"score":1,"creation_date":1690899092,"post_id":76811821,"comment_id":135415452,"body_markdown":"@aled If you want to post a rather aggressive &#39;RTFM&#39; style instruction perhaps put some effort in before becoming part of the meme that SO just directs you to an unrelated question or otherwise tells you to take a hike. OP is _already_ doing what that other answer says to do and _still_ runs into the problem.","body":"@aled If you want to post a rather aggressive &#39;RTFM&#39; style instruction perhaps put some effort in before becoming part of the meme that SO just directs you to an unrelated question or otherwise tells you to take a hike. OP is <i>already</i> doing what that other answer says to do and <i>still</i> runs into the problem."},{"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1690899555,"post_id":76811821,"comment_id":135415565,"body_markdown":"@Nzall The question you linked to has 4 answers on it and they are all completely incorrect. Even the 34 upvote accepted one. You&#39;re right to ignore those. This is one of those places Stack Overflow just utterly fails. As per policy I&#39;m supposed to mark this as dupe of that, but that 34-upvote checked answer cannot be overcome without a botnet. Hence I refuse to VTC this. I wish I could help you more.","body":"@Nzall The question you linked to has 4 answers on it and they are all completely incorrect. Even the 34 upvote accepted one. You&#39;re right to ignore those. This is one of those places Stack Overflow just utterly fails. As per policy I&#39;m supposed to mark this as dupe of that, but that 34-upvote checked answer cannot be overcome without a botnet. Hence I refuse to VTC this. I wish I could help you more."},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1690902019,"post_id":76811821,"comment_id":135416115,"body_markdown":"@rzwitserloot OP code doesn&#39;t has any mention of zos.finish() and the question doesn&#39;t mention they tried to use them. They should at least try the method of the answer they mentioned.","body":"@rzwitserloot OP code doesn&#39;t has any mention of zos.finish() and the question doesn&#39;t mention they tried to use them. They should at least try the method of the answer they mentioned."},{"owner":{"account_id":1971679,"reputation":3447,"user_id":1770430,"accept_rate":74,"display_name":"Nzall"},"score":0,"creation_date":1690904506,"post_id":76811821,"comment_id":135416643,"body_markdown":"@aled zos.finish() gets called by zos.close() internally (or rather, zos.close() internally calls super.close(), and the superclass close method calls finish() which gets delegated to zos.finish. zos.close() is automatically called at the end of the try-with-resources in compress().","body":"@aled zos.finish() gets called by zos.close() internally (or rather, zos.close() internally calls super.close(), and the superclass close method calls finish() which gets delegated to zos.finish. zos.close() is automatically called at the end of the try-with-resources in compress()."},{"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1690905015,"post_id":76811821,"comment_id":135416729,"body_markdown":"@aled `close()` calls finish. Just open the ZipOutputStream source and check for yourself. I have also added a comment on the question you linked to (__every__ answer there is completely wrong. Unfortunate).","body":"@aled <code>close()</code> calls finish. Just open the ZipOutputStream source and check for yourself. I have also added a comment on the question you linked to (<b>every</b> answer there is completely wrong. Unfortunate)."}],"answers":[{"tags":[],"owner":{"account_id":14399835,"reputation":7,"user_id":10401911,"display_name":"Sergio Triana Escobedo"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1690896375,"creation_date":1690896375,"answer_id":76812118,"question_id":76811821,"body_markdown":"Based on the information and the code you provided, it seems that the issue might be related to the usage of zos.close() and zos.closeEntry() inside the compress method. The ZipOutputStream needs to be properly closed after writing the data, but it&#39;s also essential to close each entry before adding a new one. The close() method alone might not be sufficient in this case.\r\n\r\nTo fix the problem, you should modify the compress method to ensure that you properly close each entry after writing its contents. You can achieve this by moving the zos.closeEntry() call outside the inner loop. Here&#39;s the updated version of the compress method:\r\n\r\nprivate void compress(File zipFile, ZipOutputStream zos, File dir, File relativeDir) throws FileNotFoundException, IOException {\r\n    // ... existing code ...\r\n\r\n    for (int i = 0; i &lt; fileList.length; i++) {\r\n        // ... existing code ...\r\n\r\n        if (!zipFile.equals(fileList[i])) {\r\n            if (fileList[i].isDirectory()) {\r\n                compress(zipFile, zos, fileList[i], relativeDir);\r\n            } else {\r\n                byte[] buffer = getFileContents(fileList[i]);\r\n                if (buffer != null) {\r\n                    // ... existing code ...\r\n\r\n                    // Add the entry\r\n                    addEntry(zos, filePath, fileList[i].lastModified(), buffer);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    // Move this outside the loop to properly close the ZipOutputStream after writing all entries\r\n    zos.closeEntry();\r\n}\r\n\r\nBy moving zos.closeEntry() outside the inner loop, you ensure that each entry is closed before adding the next one. This should help in producing valid and correctly compressed zip archives.\r\n\r\nAdditionally, you are correct that the zos.close() call in the try-with-resources block should take care of calling zos.finish() and zos.flush(). So, you don&#39;t need to call these methods separately.\r\n\r\nChange to your ZipCompressor class, and it should help resolve the issue with invalid archives.","title":"ZipCompressor utility class sometimes produces invalid archives","body":"<p>Based on the information and the code you provided, it seems that the issue might be related to the usage of zos.close() and zos.closeEntry() inside the compress method. The ZipOutputStream needs to be properly closed after writing the data, but it's also essential to close each entry before adding a new one. The close() method alone might not be sufficient in this case.</p>\n<p>To fix the problem, you should modify the compress method to ensure that you properly close each entry after writing its contents. You can achieve this by moving the zos.closeEntry() call outside the inner loop. Here's the updated version of the compress method:</p>\n<p>private void compress(File zipFile, ZipOutputStream zos, File dir, File relativeDir) throws FileNotFoundException, IOException {\n// ... existing code ...</p>\n<pre><code>for (int i = 0; i &lt; fileList.length; i++) {\n    // ... existing code ...\n\n    if (!zipFile.equals(fileList[i])) {\n        if (fileList[i].isDirectory()) {\n            compress(zipFile, zos, fileList[i], relativeDir);\n        } else {\n            byte[] buffer = getFileContents(fileList[i]);\n            if (buffer != null) {\n                // ... existing code ...\n\n                // Add the entry\n                addEntry(zos, filePath, fileList[i].lastModified(), buffer);\n            }\n        }\n    }\n}\n\n// Move this outside the loop to properly close the ZipOutputStream after writing all entries\nzos.closeEntry();\n</code></pre>\n<p>}</p>\n<p>By moving zos.closeEntry() outside the inner loop, you ensure that each entry is closed before adding the next one. This should help in producing valid and correctly compressed zip archives.</p>\n<p>Additionally, you are correct that the zos.close() call in the try-with-resources block should take care of calling zos.finish() and zos.flush(). So, you don't need to call these methods separately.</p>\n<p>Change to your ZipCompressor class, and it should help resolve the issue with invalid archives.</p>\n"},{"tags":[],"owner":{"account_id":1971679,"reputation":3447,"user_id":1770430,"accept_rate":74,"display_name":"Nzall"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1693380560,"creation_date":1693380560,"answer_id":77005795,"question_id":76811821,"body_markdown":"After doing some additional testing, I have found that in fact the cause is NOT the Zip compression step. This code runs as part of a longer series of steps of which the compression step is one, and the step directly afterwards copies the created archive to another directory on a different drive. I have now verified that the archive before copying does work fine, but the archive AFTER copying doesn&#39;t. Hence the ZipCompressor does not seem related to this problem.","title":"ZipCompressor utility class sometimes produces invalid archives","body":"<p>After doing some additional testing, I have found that in fact the cause is NOT the Zip compression step. This code runs as part of a longer series of steps of which the compression step is one, and the step directly afterwards copies the created archive to another directory on a different drive. I have now verified that the archive before copying does work fine, but the archive AFTER copying doesn't. Hence the ZipCompressor does not seem related to this problem.</p>\n"}],"owner":{"account_id":1971679,"reputation":3447,"user_id":1770430,"accept_rate":74,"display_name":"Nzall"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77005795,"answer_count":2,"score":1,"last_activity_date":1693380560,"creation_date":1690894317,"question_id":76811821,"body_markdown":"I have the following ZipCompressor Java class:\r\n\r\n```\r\npackage lib.util.compressors.zip;\r\n\r\nimport java.util.Enumeration;\r\nimport java.io.BufferedInputStream;\r\nimport java.io.File;\r\nimport java.io.FileInputStream;\r\nimport java.io.FileNotFoundException;\r\nimport java.io.FileOutputStream;\r\nimport java.io.IOException;\r\nimport lib.util.compressors.Compressor;\r\nimport lib.util.compressors.CompressorException;\r\nimport lib.util.compressors.Entry;\r\n\r\nimport java.util.zip.ZipEntry;\r\nimport java.util.zip.ZipOutputStream;\r\nimport java.util.zip.ZipFile;\r\nimport java.util.ArrayList;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Map;\r\nimport java.util.zip.ZipInputStream;\r\n\r\n/**\r\n * The ZipCompressor class supplies a simple way of writing zip files. The default zip level is set\r\n * to maximum compression.\r\n * \r\n * @author REDACTED\r\n */\r\npublic class ZipCompressor extends Compressor {\r\n\r\n    private int zipLevel = 9;\r\n\r\n    /**\r\n     * @see lib.util.compressors.Compressor#compress\r\n     */\r\n    public void compress(String fileName, String dirName) throws CompressorException {\r\n\r\n    \tFile zipFile = new File(fileName);\r\n        try(FileOutputStream fos = new FileOutputStream(fileName);\r\n                ZipOutputStream zos = new ZipOutputStream(fos);\r\n                ) {\r\n\r\n            // Open the file and set the compression level\r\n            zos.setLevel(zipLevel);\r\n\r\n            // Zip the directory\r\n            File dir = new File(dirName);\r\n            compress(zipFile, zos, dir, dir);\r\n        } catch (FileNotFoundException fnfe) {\r\n            throw new CompressorException(fnfe);\r\n        } catch (IOException ioe) {\r\n            throw new CompressorException(ioe);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @see lib.util.compressors.Compressor#uncompress\r\n     */\r\n    public void uncompress(String fileName, String dirName) throws CompressorException {\r\n\r\n        try(// Open the zipfile\r\n            ZipFile zipFile = new ZipFile(fileName);\r\n        \t\t// Open streams\r\n                FileInputStream fis = new FileInputStream(zipFile.getName());\r\n                BufferedInputStream bis = new BufferedInputStream(fis);\r\n                ZipInputStream zis = new ZipInputStream(bis);) {\r\n\r\n            \r\n            // Get the size of each entry\r\n            Map&lt;String, Integer&gt; zipEntrySizes = new HashMap&lt;String, Integer&gt; ();\r\n            Enumeration&lt;? extends ZipEntry&gt; e = zipFile.entries();\r\n            while (e.hasMoreElements()) {\r\n                ZipEntry zipEntry = (ZipEntry) e.nextElement();\r\n                zipEntrySizes.put(zipEntry.getName(), Integer.valueOf((int) zipEntry.getSize()));\r\n            }\r\n\r\n            \r\n            // Start reading zipentries\r\n            ZipEntry zipEntry = null;\r\n            while ((zipEntry = zis.getNextEntry()) != null) {\r\n                \r\n                // Zipentry is a file\r\n                if (!zipEntry.isDirectory()) {\r\n\r\n                    // Get the size\r\n                    int size = (int) zipEntry.getSize();\r\n                    if (size == -1) {\r\n                        size = ((Integer) zipEntrySizes.get(zipEntry.getName())).intValue();\r\n                    }\r\n\r\n                    // Get the content\r\n                    byte[] buffer = new byte[size];\r\n                    int bytesInBuffer = 0;\r\n                    int bytesRead = 0;\r\n                    while (((int) size - bytesInBuffer) &gt; 0) {\r\n                        bytesRead = zis.read(buffer, bytesInBuffer, size - bytesInBuffer);\r\n                        if (bytesRead == -1) {\r\n                            break;\r\n                        }\r\n                        bytesInBuffer += bytesRead;\r\n                    }\r\n\r\n                    String zipEntryName = zipEntry.getName();\r\n                    // replace all &quot;\\&quot; with &quot;/&quot;\r\n                    zipEntryName = zipEntryName.replace(&#39;\\\\&#39;, &#39;/&#39;);\r\n\r\n                    // Get the full path name\r\n                    File file = new File(dirName, zipEntryName);\r\n\r\n                    // Create the parent directory\r\n                    if (!file.getParentFile().exists()) {\r\n                        file.getParentFile().mkdirs();\r\n                    }\r\n\r\n\t\t\t\t\t// Save file\r\n\t\t\t\t\ttry (FileOutputStream fos = new FileOutputStream(file.getPath());) {\r\n\t\t\t\t\t\tfos.write(buffer, 0, bytesInBuffer);\r\n\t\t\t\t\t}\r\n\r\n                    if (zipEntry.getTime() &gt;= 0L) {\r\n\t\t\t\t\t\t// Set modification date to the date in the zipEntry\r\n\t\t\t\t\t\tfile.setLastModified(zipEntry.getTime());\r\n\t\t\t\t\t}\r\n                }\r\n                // Zipentry is a directory\r\n                else {\r\n\r\n                    String zipEntryName = zipEntry.getName();\r\n                    // replace all &quot;\\&quot; with &quot;/&quot;\r\n                    zipEntryName = zipEntryName.replace(&#39;\\\\&#39;, &#39;/&#39;);\r\n\r\n                    // Create the directory\r\n                    File dir = new File(dirName, zipEntryName);\r\n                    dir.setLastModified(zipEntry.getTime());\r\n                    if (!dir.exists()) {\r\n                        dir.mkdirs();\r\n                    }\r\n                }\r\n            }\r\n        } catch (IOException ioe) {\r\n            throw new CompressorException(ioe);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @see lib.util.compressors.Compressor#getEntries\r\n     */\r\n    public List&lt;Entry&gt; getEntries(String fileName, boolean calculateCrc) throws CompressorException {\r\n\r\n        // List to return all entries\r\n        List&lt;Entry&gt; entries = new ArrayList&lt;Entry&gt;();\r\n        \r\n        try( // Open the zipfile\r\n                ZipFile zipFile = new ZipFile(fileName);) {\r\n\r\n           \r\n            // Get the size of each entry\r\n            Enumeration&lt;? extends ZipEntry&gt; e = zipFile.entries();\r\n            while (e.hasMoreElements()) {\r\n                ZipEntry zipEntry = (ZipEntry) e.nextElement();\r\n                Entry entry = new Entry();\r\n                entry.setName(zipEntry.getName());\r\n                if (calculateCrc) {\r\n                    entry.setCrc(zipEntry.getCrc());\r\n                } else {\r\n                    entry.setCrc(-1);\r\n                }\r\n                entry.setDirectory(zipEntry.isDirectory());\r\n                entry.setTime(zipEntry.getTime());\r\n                entry.setSize(zipEntry.getSize());\r\n                entries.add(entry);\r\n            }\r\n\r\n        \r\n            // Sort entries by ascending name\r\n            sortEntries(entries);\r\n            \r\n            // Return entries\r\n            return entries;\r\n            \r\n        } catch (IOException ioe) {\r\n            throw new CompressorException(ioe);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Sets the zip level (1..9).\r\n     * \r\n     * @param zipLevel the desired zip level.\r\n     * @throws CompressorException\r\n     */\r\n    public void setZipLevel(int zipLevel) throws CompressorException {\r\n        if ((zipLevel &lt; 1) || (zipLevel &gt; 9)) {\r\n            throw new CompressorException(&quot;Zip level &quot; + zipLevel + &quot; out of range (0 ... 9)&quot;);\r\n        }\r\n        this.zipLevel = zipLevel;\r\n    }\r\n\r\n    /**\r\n     * Add a new entry to the zip file.\r\n     * \r\n     * @param zos the output stream filter for writing files in the ZIP file format\r\n     * @param name the name of the entry.\r\n     * @param lastModified the modification date \r\n     * @param buffer an array of bytes\r\n     * @throws IOException\r\n     */\r\n    private void addEntry(ZipOutputStream zos, String name, long lastModified, byte[] buffer) throws IOException {\r\n        ZipEntry zipEntry = new ZipEntry(name);\r\n        if (buffer != null) {\r\n            zipEntry.setSize(buffer.length);\r\n        } \r\n        zipEntry.setTime(lastModified);\r\n        zos.putNextEntry(zipEntry);\r\n        if (buffer != null) {\r\n            zos.write(buffer);\r\n        }\r\n        zos.closeEntry();\r\n    }\r\n\r\n    /**\r\n     * Zip the files of the given directory.\r\n     * \r\n     * @param zipFile the File which is used to store the compressed data\r\n     * @param zos the output stream filter for writing files in the ZIP file format\r\n     * @param dir the directory to zip\r\n     * @param relativeDir the name of each zip entry will be relative to this directory\r\n     * @throws FileNotFoundException\r\n     * @throws IOException\r\n     */\r\n    private void compress(File zipFile, ZipOutputStream zos, File dir, File relativeDir) throws FileNotFoundException, IOException {\r\n\r\n        // Create an array of File objects\r\n        File[] fileList = dir.listFiles();\r\n\r\n        // Directory is not empty\r\n        if (fileList.length != 0) {\r\n\r\n            // Loop through File array\r\n            for (int i = 0; i &lt; fileList.length; i++) {\r\n\r\n                // The zipfile itself may not be added\r\n                if (!zipFile.equals(fileList[i])) {\r\n                    // Directory\r\n                    if (fileList[i].isDirectory()) {\r\n                        compress(zipFile, zos, fileList[i], relativeDir);\r\n                    }\r\n                    // File\r\n                    else {\r\n                        byte[] buffer = getFileContents(fileList[i]);\r\n                        if (buffer != null) {\r\n                            // Get the path names\r\n                            String filePath = fileList[i].getPath();\r\n                            String relativeDirPath = relativeDir.getPath();\r\n\r\n                            // Convert the absolute path name to a relative path name\r\n                            if (filePath.startsWith(relativeDirPath)) {\r\n                                filePath = filePath.substring(relativeDirPath.length());\r\n                                if (filePath.startsWith(&quot;/&quot;) || filePath.startsWith(&quot;\\\\&quot;)) {\r\n                                    if (filePath.length() == 1) {\r\n                                        filePath = &quot;&quot;;\r\n                                    } else {\r\n                                        filePath = filePath.substring(1);\r\n                                    }\r\n                                }\r\n                            }\r\n\r\n                            // Add the entry\r\n                            addEntry(zos, filePath, fileList[i].lastModified(), buffer);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        // Directory is empty\r\n        else {\r\n            // Get the path names\r\n            String filePath = dir.getPath();\r\n            String relativeDirPath = relativeDir.getPath();\r\n\r\n            // Convert the absolute path name to a relative path name\r\n            if (filePath.startsWith(relativeDirPath)) {\r\n                filePath = filePath.substring(relativeDirPath.length());\r\n                if (filePath.startsWith(&quot;/&quot;) || filePath.startsWith(&quot;\\\\&quot;)) {\r\n                    if (filePath.length() == 1) {\r\n                        filePath = &quot;&quot;;\r\n                    } else {\r\n                        filePath = filePath.substring(1);\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Add the entry\r\n            if (!filePath.endsWith(&quot;\\\\&quot;) &amp;&amp; !filePath.endsWith(&quot;/&quot;)) {\r\n                addEntry(zos, filePath + &quot;/&quot;, dir.lastModified(), null);\r\n            }\r\n            else {\r\n                addEntry(zos, filePath, dir.lastModified(), null);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Read the contents of a file for zipping.\r\n     * \r\n     * @param file the File to read\r\n     * @return an array of bytes\r\n     * @throws FileNotFoundException\r\n     * @throws IOException\r\n     */\r\n    private byte[] getFileContents(File file) throws FileNotFoundException, IOException {\r\n\r\n\t\ttry (FileInputStream fis = new FileInputStream(file);) {\r\n\t\t\tlong len = file.length();\r\n\t\t\tbyte[] buffer = new byte[(int) len];\r\n\t\t\tfis.read(buffer);\r\n\t\t\treturn buffer;\r\n\t\t}\r\n    }\r\n}\r\n```\r\n\r\nThe problem I have is that sometimes the compress() method produces an invalid archive with an incorrectly compressed first entry, that can&#39;t be opened by Windows or Java 11 and shows errors when opened with 7zip.\r\n\r\nIn Java, the error code I get is:\r\n\r\n    lib.util.compressors.CompressorException: java.util.zip.ZipException: invalid END header (bad central directory offset)\r\n    \tat lib.util.compressors.zip.ZipCompressor.uncompress(ZipCompressor.java:151)\r\n    \tat phases.core.deploy.UnCompressBuildResultPhase.execute(UnCompressBuildResultPhase.java:61)\r\n    \tat Proxy6f3235bf_85bf_485a_9577_a60fb3dad49c.execute(Unknown Source)\r\n    \tat phases.impl.DefaultPhaseExecutionImpl.execute(DefaultPhaseExecutionImpl.java:152)\r\n    \tat daemons.agent.deployer.DeployerThread.run(DeployerThread.java:144)\r\n    Caused by: java.util.zip.ZipException: invalid END header (bad central directory offset)\r\n    \tat java.base/java.util.zip.ZipFile$Source.zerror(ZipFile.java:1607)\r\n    \tat java.base/java.util.zip.ZipFile$Source.initCEN(ZipFile.java:1519)\r\n    \tat java.base/java.util.zip.ZipFile$Source.&lt;init&gt;(ZipFile.java:1308)\r\n    \tat java.base/java.util.zip.ZipFile$Source.get(ZipFile.java:1271)\r\n    \tat java.base/java.util.zip.ZipFile$CleanableResource.&lt;init&gt;(ZipFile.java:733)\r\n    \tat java.base/java.util.zip.ZipFile$CleanableResource.get(ZipFile.java:850)\r\n    \tat java.base/java.util.zip.ZipFile.&lt;init&gt;(ZipFile.java:248)\r\n    \tat java.base/java.util.zip.ZipFile.&lt;init&gt;(ZipFile.java:177)\r\n    \tat java.base/java.util.zip.ZipFile.&lt;init&gt;(ZipFile.java:148)\r\n    \tat lib.util.compressors.zip.ZipCompressor.uncompress(ZipCompressor.java:72)\r\n    \t... 4 more\r\n\r\nThe 7zip errors it shows when testing the archive are:\r\n\r\n```\r\nC:\\Users\\REDACTED\\Downloads\\b5_CONTBUILD_B-6-0-0_win.zip\r\nUnavailable start of archive\r\nWarning\r\nThe archive is open with offset\r\nUnavailable data : ant\\bin\\ant\r\n```\r\n\r\nAnd the properties of the archive as 7zip gives them are:\r\n\r\n```\r\nPath: C:\\Users\\REDACTED\\Downloads\\b5_CONTBUILD_B-6-0-0_win.zip\r\nType: zip\r\nOpen WARNING:: Cannot open the file as expected archive type\r\nError Type: zip\r\nErrors: Unavailable start of archive\r\nOffset: -1024\r\nPhysical Size: 722 598 855\r\n```\r\n\r\n\r\nThis is a transient error, in that it doesn&#39;t happen every time I try to create the same archive. However, when it happened the previous time, the error in the 7zip properties was slightly different:\r\n\r\n```\r\nPath: C:\\Users\\REDACTED\\Downloads\\b2355_CONTBUILD_win (1).zip\r\nType: zip\r\nOpen WARNING:: Cannot open the file as expected archive type\r\nError Type: zip\r\nErrors: Unavailable start of archive\r\nOffset: -256\r\nPhysical Size: 712 638 486\r\n```\r\n\r\nNote that both of these archives were generated using a Java 11.0.1.9 JVM.\r\n\r\nUsually rerunning the script fixes it, but the entire script can take up to an hour to complete, of which the archive creation is only a small part.\r\n\r\nI found some information on https://stackoverflow.com/questions/17055650/java-util-zip-creates-corrupt-zip-files that says I should call zos.finish() and zos.flush() at the end of the try-with-resources, but if I&#39;m not mistaken, zos.close() already calls those methods.\r\n\r\nEdit: As I said above, I already found that question recommended as duplicate, I even linked it above, and to the best of my knowledge the code I currently use already does what that answer recommends, because the try-with-resources already automatically closes the ZipOutputStream using close(), and close() calls finish(). I didn&#39;t check the full stack call to verify, but I think .flush() is also called somewhere in that close stack.","title":"ZipCompressor utility class sometimes produces invalid archives","body":"<p>I have the following ZipCompressor Java class:</p>\n<pre><code>package lib.util.compressors.zip;\n\nimport java.util.Enumeration;\nimport java.io.BufferedInputStream;\nimport java.io.File;\nimport java.io.FileInputStream;\nimport java.io.FileNotFoundException;\nimport java.io.FileOutputStream;\nimport java.io.IOException;\nimport lib.util.compressors.Compressor;\nimport lib.util.compressors.CompressorException;\nimport lib.util.compressors.Entry;\n\nimport java.util.zip.ZipEntry;\nimport java.util.zip.ZipOutputStream;\nimport java.util.zip.ZipFile;\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.zip.ZipInputStream;\n\n/**\n * The ZipCompressor class supplies a simple way of writing zip files. The default zip level is set\n * to maximum compression.\n * \n * @author REDACTED\n */\npublic class ZipCompressor extends Compressor {\n\n    private int zipLevel = 9;\n\n    /**\n     * @see lib.util.compressors.Compressor#compress\n     */\n    public void compress(String fileName, String dirName) throws CompressorException {\n\n        File zipFile = new File(fileName);\n        try(FileOutputStream fos = new FileOutputStream(fileName);\n                ZipOutputStream zos = new ZipOutputStream(fos);\n                ) {\n\n            // Open the file and set the compression level\n            zos.setLevel(zipLevel);\n\n            // Zip the directory\n            File dir = new File(dirName);\n            compress(zipFile, zos, dir, dir);\n        } catch (FileNotFoundException fnfe) {\n            throw new CompressorException(fnfe);\n        } catch (IOException ioe) {\n            throw new CompressorException(ioe);\n        }\n    }\n\n    /**\n     * @see lib.util.compressors.Compressor#uncompress\n     */\n    public void uncompress(String fileName, String dirName) throws CompressorException {\n\n        try(// Open the zipfile\n            ZipFile zipFile = new ZipFile(fileName);\n                // Open streams\n                FileInputStream fis = new FileInputStream(zipFile.getName());\n                BufferedInputStream bis = new BufferedInputStream(fis);\n                ZipInputStream zis = new ZipInputStream(bis);) {\n\n            \n            // Get the size of each entry\n            Map&lt;String, Integer&gt; zipEntrySizes = new HashMap&lt;String, Integer&gt; ();\n            Enumeration&lt;? extends ZipEntry&gt; e = zipFile.entries();\n            while (e.hasMoreElements()) {\n                ZipEntry zipEntry = (ZipEntry) e.nextElement();\n                zipEntrySizes.put(zipEntry.getName(), Integer.valueOf((int) zipEntry.getSize()));\n            }\n\n            \n            // Start reading zipentries\n            ZipEntry zipEntry = null;\n            while ((zipEntry = zis.getNextEntry()) != null) {\n                \n                // Zipentry is a file\n                if (!zipEntry.isDirectory()) {\n\n                    // Get the size\n                    int size = (int) zipEntry.getSize();\n                    if (size == -1) {\n                        size = ((Integer) zipEntrySizes.get(zipEntry.getName())).intValue();\n                    }\n\n                    // Get the content\n                    byte[] buffer = new byte[size];\n                    int bytesInBuffer = 0;\n                    int bytesRead = 0;\n                    while (((int) size - bytesInBuffer) &gt; 0) {\n                        bytesRead = zis.read(buffer, bytesInBuffer, size - bytesInBuffer);\n                        if (bytesRead == -1) {\n                            break;\n                        }\n                        bytesInBuffer += bytesRead;\n                    }\n\n                    String zipEntryName = zipEntry.getName();\n                    // replace all &quot;\\&quot; with &quot;/&quot;\n                    zipEntryName = zipEntryName.replace('\\\\', '/');\n\n                    // Get the full path name\n                    File file = new File(dirName, zipEntryName);\n\n                    // Create the parent directory\n                    if (!file.getParentFile().exists()) {\n                        file.getParentFile().mkdirs();\n                    }\n\n                    // Save file\n                    try (FileOutputStream fos = new FileOutputStream(file.getPath());) {\n                        fos.write(buffer, 0, bytesInBuffer);\n                    }\n\n                    if (zipEntry.getTime() &gt;= 0L) {\n                        // Set modification date to the date in the zipEntry\n                        file.setLastModified(zipEntry.getTime());\n                    }\n                }\n                // Zipentry is a directory\n                else {\n\n                    String zipEntryName = zipEntry.getName();\n                    // replace all &quot;\\&quot; with &quot;/&quot;\n                    zipEntryName = zipEntryName.replace('\\\\', '/');\n\n                    // Create the directory\n                    File dir = new File(dirName, zipEntryName);\n                    dir.setLastModified(zipEntry.getTime());\n                    if (!dir.exists()) {\n                        dir.mkdirs();\n                    }\n                }\n            }\n        } catch (IOException ioe) {\n            throw new CompressorException(ioe);\n        }\n    }\n\n    /**\n     * @see lib.util.compressors.Compressor#getEntries\n     */\n    public List&lt;Entry&gt; getEntries(String fileName, boolean calculateCrc) throws CompressorException {\n\n        // List to return all entries\n        List&lt;Entry&gt; entries = new ArrayList&lt;Entry&gt;();\n        \n        try( // Open the zipfile\n                ZipFile zipFile = new ZipFile(fileName);) {\n\n           \n            // Get the size of each entry\n            Enumeration&lt;? extends ZipEntry&gt; e = zipFile.entries();\n            while (e.hasMoreElements()) {\n                ZipEntry zipEntry = (ZipEntry) e.nextElement();\n                Entry entry = new Entry();\n                entry.setName(zipEntry.getName());\n                if (calculateCrc) {\n                    entry.setCrc(zipEntry.getCrc());\n                } else {\n                    entry.setCrc(-1);\n                }\n                entry.setDirectory(zipEntry.isDirectory());\n                entry.setTime(zipEntry.getTime());\n                entry.setSize(zipEntry.getSize());\n                entries.add(entry);\n            }\n\n        \n            // Sort entries by ascending name\n            sortEntries(entries);\n            \n            // Return entries\n            return entries;\n            \n        } catch (IOException ioe) {\n            throw new CompressorException(ioe);\n        }\n    }\n\n    /**\n     * Sets the zip level (1..9).\n     * \n     * @param zipLevel the desired zip level.\n     * @throws CompressorException\n     */\n    public void setZipLevel(int zipLevel) throws CompressorException {\n        if ((zipLevel &lt; 1) || (zipLevel &gt; 9)) {\n            throw new CompressorException(&quot;Zip level &quot; + zipLevel + &quot; out of range (0 ... 9)&quot;);\n        }\n        this.zipLevel = zipLevel;\n    }\n\n    /**\n     * Add a new entry to the zip file.\n     * \n     * @param zos the output stream filter for writing files in the ZIP file format\n     * @param name the name of the entry.\n     * @param lastModified the modification date \n     * @param buffer an array of bytes\n     * @throws IOException\n     */\n    private void addEntry(ZipOutputStream zos, String name, long lastModified, byte[] buffer) throws IOException {\n        ZipEntry zipEntry = new ZipEntry(name);\n        if (buffer != null) {\n            zipEntry.setSize(buffer.length);\n        } \n        zipEntry.setTime(lastModified);\n        zos.putNextEntry(zipEntry);\n        if (buffer != null) {\n            zos.write(buffer);\n        }\n        zos.closeEntry();\n    }\n\n    /**\n     * Zip the files of the given directory.\n     * \n     * @param zipFile the File which is used to store the compressed data\n     * @param zos the output stream filter for writing files in the ZIP file format\n     * @param dir the directory to zip\n     * @param relativeDir the name of each zip entry will be relative to this directory\n     * @throws FileNotFoundException\n     * @throws IOException\n     */\n    private void compress(File zipFile, ZipOutputStream zos, File dir, File relativeDir) throws FileNotFoundException, IOException {\n\n        // Create an array of File objects\n        File[] fileList = dir.listFiles();\n\n        // Directory is not empty\n        if (fileList.length != 0) {\n\n            // Loop through File array\n            for (int i = 0; i &lt; fileList.length; i++) {\n\n                // The zipfile itself may not be added\n                if (!zipFile.equals(fileList[i])) {\n                    // Directory\n                    if (fileList[i].isDirectory()) {\n                        compress(zipFile, zos, fileList[i], relativeDir);\n                    }\n                    // File\n                    else {\n                        byte[] buffer = getFileContents(fileList[i]);\n                        if (buffer != null) {\n                            // Get the path names\n                            String filePath = fileList[i].getPath();\n                            String relativeDirPath = relativeDir.getPath();\n\n                            // Convert the absolute path name to a relative path name\n                            if (filePath.startsWith(relativeDirPath)) {\n                                filePath = filePath.substring(relativeDirPath.length());\n                                if (filePath.startsWith(&quot;/&quot;) || filePath.startsWith(&quot;\\\\&quot;)) {\n                                    if (filePath.length() == 1) {\n                                        filePath = &quot;&quot;;\n                                    } else {\n                                        filePath = filePath.substring(1);\n                                    }\n                                }\n                            }\n\n                            // Add the entry\n                            addEntry(zos, filePath, fileList[i].lastModified(), buffer);\n                        }\n                    }\n                }\n            }\n        }\n        // Directory is empty\n        else {\n            // Get the path names\n            String filePath = dir.getPath();\n            String relativeDirPath = relativeDir.getPath();\n\n            // Convert the absolute path name to a relative path name\n            if (filePath.startsWith(relativeDirPath)) {\n                filePath = filePath.substring(relativeDirPath.length());\n                if (filePath.startsWith(&quot;/&quot;) || filePath.startsWith(&quot;\\\\&quot;)) {\n                    if (filePath.length() == 1) {\n                        filePath = &quot;&quot;;\n                    } else {\n                        filePath = filePath.substring(1);\n                    }\n                }\n            }\n\n            // Add the entry\n            if (!filePath.endsWith(&quot;\\\\&quot;) &amp;&amp; !filePath.endsWith(&quot;/&quot;)) {\n                addEntry(zos, filePath + &quot;/&quot;, dir.lastModified(), null);\n            }\n            else {\n                addEntry(zos, filePath, dir.lastModified(), null);\n            }\n        }\n    }\n\n    /**\n     * Read the contents of a file for zipping.\n     * \n     * @param file the File to read\n     * @return an array of bytes\n     * @throws FileNotFoundException\n     * @throws IOException\n     */\n    private byte[] getFileContents(File file) throws FileNotFoundException, IOException {\n\n        try (FileInputStream fis = new FileInputStream(file);) {\n            long len = file.length();\n            byte[] buffer = new byte[(int) len];\n            fis.read(buffer);\n            return buffer;\n        }\n    }\n}\n</code></pre>\n<p>The problem I have is that sometimes the compress() method produces an invalid archive with an incorrectly compressed first entry, that can't be opened by Windows or Java 11 and shows errors when opened with 7zip.</p>\n<p>In Java, the error code I get is:</p>\n<pre><code>lib.util.compressors.CompressorException: java.util.zip.ZipException: invalid END header (bad central directory offset)\n    at lib.util.compressors.zip.ZipCompressor.uncompress(ZipCompressor.java:151)\n    at phases.core.deploy.UnCompressBuildResultPhase.execute(UnCompressBuildResultPhase.java:61)\n    at Proxy6f3235bf_85bf_485a_9577_a60fb3dad49c.execute(Unknown Source)\n    at phases.impl.DefaultPhaseExecutionImpl.execute(DefaultPhaseExecutionImpl.java:152)\n    at daemons.agent.deployer.DeployerThread.run(DeployerThread.java:144)\nCaused by: java.util.zip.ZipException: invalid END header (bad central directory offset)\n    at java.base/java.util.zip.ZipFile$Source.zerror(ZipFile.java:1607)\n    at java.base/java.util.zip.ZipFile$Source.initCEN(ZipFile.java:1519)\n    at java.base/java.util.zip.ZipFile$Source.&lt;init&gt;(ZipFile.java:1308)\n    at java.base/java.util.zip.ZipFile$Source.get(ZipFile.java:1271)\n    at java.base/java.util.zip.ZipFile$CleanableResource.&lt;init&gt;(ZipFile.java:733)\n    at java.base/java.util.zip.ZipFile$CleanableResource.get(ZipFile.java:850)\n    at java.base/java.util.zip.ZipFile.&lt;init&gt;(ZipFile.java:248)\n    at java.base/java.util.zip.ZipFile.&lt;init&gt;(ZipFile.java:177)\n    at java.base/java.util.zip.ZipFile.&lt;init&gt;(ZipFile.java:148)\n    at lib.util.compressors.zip.ZipCompressor.uncompress(ZipCompressor.java:72)\n    ... 4 more\n</code></pre>\n<p>The 7zip errors it shows when testing the archive are:</p>\n<pre><code>C:\\Users\\REDACTED\\Downloads\\b5_CONTBUILD_B-6-0-0_win.zip\nUnavailable start of archive\nWarning\nThe archive is open with offset\nUnavailable data : ant\\bin\\ant\n</code></pre>\n<p>And the properties of the archive as 7zip gives them are:</p>\n<pre><code>Path: C:\\Users\\REDACTED\\Downloads\\b5_CONTBUILD_B-6-0-0_win.zip\nType: zip\nOpen WARNING:: Cannot open the file as expected archive type\nError Type: zip\nErrors: Unavailable start of archive\nOffset: -1024\nPhysical Size: 722 598 855\n</code></pre>\n<p>This is a transient error, in that it doesn't happen every time I try to create the same archive. However, when it happened the previous time, the error in the 7zip properties was slightly different:</p>\n<pre><code>Path: C:\\Users\\REDACTED\\Downloads\\b2355_CONTBUILD_win (1).zip\nType: zip\nOpen WARNING:: Cannot open the file as expected archive type\nError Type: zip\nErrors: Unavailable start of archive\nOffset: -256\nPhysical Size: 712 638 486\n</code></pre>\n<p>Note that both of these archives were generated using a Java 11.0.1.9 JVM.</p>\n<p>Usually rerunning the script fixes it, but the entire script can take up to an hour to complete, of which the archive creation is only a small part.</p>\n<p>I found some information on <a href=\"https://stackoverflow.com/questions/17055650/java-util-zip-creates-corrupt-zip-files\">Java util zip creates &quot;corrupt&quot; zip files</a> that says I should call zos.finish() and zos.flush() at the end of the try-with-resources, but if I'm not mistaken, zos.close() already calls those methods.</p>\n<p>Edit: As I said above, I already found that question recommended as duplicate, I even linked it above, and to the best of my knowledge the code I currently use already does what that answer recommends, because the try-with-resources already automatically closes the ZipOutputStream using close(), and close() calls finish(). I didn't check the full stack call to verify, but I think .flush() is also called somewhere in that close stack.</p>\n"},{"tags":["java","postgresql","spring-boot","hibernate","load-testing"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1693381308,"post_id":77005777,"comment_id":135751457,"body_markdown":"Why this construction... That is what sequences are meant for, if you a really want this you would need to use SERIALIZABLE isolation so that only 1 will update that record.","body":"Why this construction... That is what sequences are meant for, if you a really want this you would need to use SERIALIZABLE isolation so that only 1 will update that record."}],"owner":{"account_id":26237252,"reputation":41,"user_id":19912177,"display_name":"BefuddledBarberian"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693380392,"creation_date":1693380392,"question_id":77005777,"body_markdown":"I&#39;m working on a project when we create a unique ids for each product type in a warehouse. For doing that, I&#39;m creating a stored procedure which would incrementally generate a new number every time. Here is the repository layer and the procedure\r\n\r\nProcedure : \r\n\r\n    CREATE OR REPLACE FUNCTION create_id(dataname text) RETURNS bigint AS $$\r\n    DECLARE\r\n        data_value bigint;\r\n    BEGIN\r\n       \r\n          SET TRANSACTION ISOLATION LEVEL REPEATABLE READ;\r\n        BEGIN\r\n                UPDATE identifier\r\n                SET latest_id = latest_id + 1\r\n                WHERE identifier_type = dataname\r\n                RETURNING latest_id INTO data_value;\r\n        END;\r\n        -- Return the bigint value\r\n        RETURN data_value;\r\n    END;\r\n\r\nRepository : \r\n\r\n    @Repository\r\n    public interface ProductIdentifierRepository extends JpaRepository&lt;Identifier, Integer&gt; {\r\n    \r\n      @Procedure(value = &quot;create_id&quot;)\r\n      @Transactional(isolation = Isolation.REPEATABLE_READ)\r\n      public Long updateId(@Param(&quot;dataname&quot;) String type);\r\n    }\r\n\r\nWhile the code is working as expected for a few parallel api calls, it starts breaking when I make about 100 API calls in 30 seconds, and I get this exception : \r\n\r\n    Error calling CallableStatement.getMoreResults; SQL [create_id]; nested exception is org.hibernate.exception.LockAcquisitionException\r\n\r\nPlease help\r\n\r\n","title":"Getting LockAcquisitionException when making multiple requests simultaneously","body":"<p>I'm working on a project when we create a unique ids for each product type in a warehouse. For doing that, I'm creating a stored procedure which would incrementally generate a new number every time. Here is the repository layer and the procedure</p>\n<p>Procedure :</p>\n<pre><code>CREATE OR REPLACE FUNCTION create_id(dataname text) RETURNS bigint AS $$\nDECLARE\n    data_value bigint;\nBEGIN\n   \n      SET TRANSACTION ISOLATION LEVEL REPEATABLE READ;\n    BEGIN\n            UPDATE identifier\n            SET latest_id = latest_id + 1\n            WHERE identifier_type = dataname\n            RETURNING latest_id INTO data_value;\n    END;\n    -- Return the bigint value\n    RETURN data_value;\nEND;\n</code></pre>\n<p>Repository :</p>\n<pre><code>@Repository\npublic interface ProductIdentifierRepository extends JpaRepository&lt;Identifier, Integer&gt; {\n\n  @Procedure(value = &quot;create_id&quot;)\n  @Transactional(isolation = Isolation.REPEATABLE_READ)\n  public Long updateId(@Param(&quot;dataname&quot;) String type);\n}\n</code></pre>\n<p>While the code is working as expected for a few parallel api calls, it starts breaking when I make about 100 API calls in 30 seconds, and I get this exception :</p>\n<pre><code>Error calling CallableStatement.getMoreResults; SQL [create_id]; nested exception is org.hibernate.exception.LockAcquisitionException\n</code></pre>\n<p>Please help</p>\n"},{"tags":["java","java.util.scanner"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1693346160,"post_id":77003807,"comment_id":135748160,"body_markdown":"Generally speaking, you shouldn&#39;t be catching `RuntimeException`s at all. They indicate an error condition which your program flow should handle. Particularly in this case, where you want to continue to loop. Look at the inputs and display an apt message to the user, whie looping for the next try","body":"Generally speaking, you shouldn&#39;t be catching <code>RuntimeException</code>s at all. They indicate an error condition which your program flow should handle. Particularly in this case, where you want to continue to loop. Look at the inputs and display an apt message to the user, whie looping for the next try"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1693347910,"post_id":77003807,"comment_id":135748328,"body_markdown":"Multiple try blocks.  That’s why we *can* write multiple try blocks:  to address different failed operations differently.","body":"Multiple try blocks.  That’s why we <i>can</i> write multiple try blocks:  to address different failed operations differently."}],"answers":[{"tags":[],"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693376039,"creation_date":1693376039,"answer_id":77005357,"question_id":77003807,"body_markdown":"Code in a `catch` block is no different to [Java] code in any other kind of [code] block.  \r\nI suggest initializing the variables `num` and `price` (to an invalid value) and using `if` statements in the `catch` block.  \r\nIf the variable (i.e. `num` or `price`) has its initial value, that means an error occurred during user input of a value for that variable.  \r\nSince your valid value range for both `num` and `price` is non-negative, in the below code I initialize them both to -1 (minus one).\r\n```java\r\npublic static void main(String[] args) {\r\n    Scanner scan = new Scanner(System.in);\r\n    int num = -1;\r\n    double price = -1.0;\r\n    String item = null;\r\n    try {\r\n        System.out.println(&quot;Input must be an integer between 1-10&quot;);\r\n        num = scan.nextInt();\r\n        System.out.println(&quot;Input must be a double between 0.00-100.00&quot;);\r\n        price = scan.nextDouble();\r\n        scan.nextLine();\r\n        System.out.println(&quot;Input must be a string&quot;);\r\n        item = scan.nextLine();\r\n    }\r\n    catch(InputMismatchException e) {\r\n        if (num &lt; 0) {\r\n            System.out.println(&quot;Invalid &#39;num&#39;.&quot;);\r\n        }\r\n        else if (price &lt; 0.0D) {\r\n            System.out.println(&quot;Invalid &#39;price&#39;.&quot;);\r\n        }\r\n        else {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```","title":"How to create multiple custom InputMismatch Exception messages in Java?","body":"<p>Code in a <code>catch</code> block is no different to [Java] code in any other kind of [code] block.<br />\nI suggest initializing the variables <code>num</code> and <code>price</code> (to an invalid value) and using <code>if</code> statements in the <code>catch</code> block.<br />\nIf the variable (i.e. <code>num</code> or <code>price</code>) has its initial value, that means an error occurred during user input of a value for that variable.<br />\nSince your valid value range for both <code>num</code> and <code>price</code> is non-negative, in the below code I initialize them both to -1 (minus one).</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n    Scanner scan = new Scanner(System.in);\n    int num = -1;\n    double price = -1.0;\n    String item = null;\n    try {\n        System.out.println(&quot;Input must be an integer between 1-10&quot;);\n        num = scan.nextInt();\n        System.out.println(&quot;Input must be a double between 0.00-100.00&quot;);\n        price = scan.nextDouble();\n        scan.nextLine();\n        System.out.println(&quot;Input must be a string&quot;);\n        item = scan.nextLine();\n    }\n    catch(InputMismatchException e) {\n        if (num &lt; 0) {\n            System.out.println(&quot;Invalid 'num'.&quot;);\n        }\n        else if (price &lt; 0.0D) {\n            System.out.println(&quot;Invalid 'price'.&quot;);\n        }\n        else {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693379242,"creation_date":1693379242,"answer_id":77005674,"question_id":77003807,"body_markdown":"In my opinion, you shouldn&#39;t purposely want any try/catch mechanism for this sort of thing. Use code that doesn&#39;t require error trapping if you can, for example (read the comments in code):\r\n\r\n```\r\n        // OS related newline character sequence: \r\n        final String LS = System.lineSeparator();\r\n        \r\n        /* Open a Keyboard input stream. Don&#39;t close this object! \r\n           If you do then you will have to restart your application\r\n           to use it again. The JVM will automatically close this\r\n           Stream (System.in) when the application closes (ends). */\r\n        final Scanner userInput = new Scanner(System.in);\r\n        \r\n        int qty;\r\n        double price;\r\n        String item;\r\n    \r\n        // PROMPT #1 - Ask for an integer value between 1 and 10 (inclusive):\r\n        String entryString = &quot;&quot;;\r\n        \r\n        // Keep looping for as long as entryString is empty (&quot;&quot;) {null-String}:\r\n        while (entryString.isEmpty()) {\r\n            // The Actual Prompt displayed to User:\r\n            System.out.println(&quot;Enter a Quantity value between 1 and 10 (inclusive):&quot;);\r\n            System.out.print(&quot;Your Entry (or q to quit): -&gt;  &quot;);\r\n            \r\n            /* Get User&#39;s numerical input. Trim off any leading/trailing \r\n               whitespaces from the entry if they were accidently placed \r\n               there.            */\r\n            entryString = userInput.nextLine().trim();\r\n            \r\n            // Did User want to quit?\r\n            if (entryString.equalsIgnoreCase(&quot;q&quot;)) {\r\n                // Yes!...Then Quit!\r\n                System.out.println(&quot;Quitting - Bye Bye&quot;);\r\n                return;\r\n            }\r\n            \r\n            // Validate User&#39;s entry for this prompt:\r\n            // Was a proper entry made (1 to 10)?\r\n            if (!entryString.matches(&quot;[1-9]|10&quot;)) {\r\n                // No...Is it because not all characters supplied are numerical digits?\r\n                if (!entryString.matches(&quot;\\\\d+&quot;)) {\r\n                    //Yes...that&#39;s the problem...Inform User and allow to try again.\r\n                    System.out.println(&quot;Invalid Numerical Entry! (&quot; + entryString \r\n                            + &quot;) You must supply numerical digits only! Try Again...&quot; + LS);\r\n                }\r\n                /* No...Then it must be because the numerical value supplied\r\n                   does fall within the required inclusive range of 1 to 10. */\r\n                else {\r\n                    // Inform the User of the issue and allow to try again.\r\n                    System.out.println(&quot;Invalid Numerical Entry! (&quot; + entryString \r\n                            + &quot;) You must supply a numerical value from 1 to 10 only! &quot;\r\n                                    + &quot;Try Again...&quot; + LS);\r\n                }\r\n                \r\n                // For either reason...Empty varaible to ensure re-loop;\r\n                entryString = &quot;&quot;;\r\n            }\r\n        }\r\n        \r\n        // If we make it to this point in code then...the entry passed validation:\r\n        qty = Integer.parseInt(entryString);\r\n     \r\n        // ==============================================================================\r\n    \r\n        System.out.println();\r\n        // PROMPT #2 - Ask for a Floating Point Value from 0.0 to 100.0 (inclusive):\r\n        entryString = &quot;&quot;; // Empty the entryString variable for re-use:\r\n        \r\n        // Keep looping for as long as entryString is empty (&quot;&quot;) {null-String}:\r\n        while (entryString.isEmpty()) {\r\n            // The Actual Prompt displayed to User:\r\n            System.out.println(&quot;Enter a Price Per Item value between 0.00 and 100.00 (inclusive):&quot;);\r\n            System.out.print(&quot;Your Entry (or q to quit): -&gt;  &quot;);\r\n            \r\n            /* Get User&#39;s numerical input. Trim off any leading/trailing \r\n               whitespaces from the entry if they were accidently placed \r\n               there.            */\r\n            entryString = userInput.nextLine().trim(); \r\n            \r\n            // Did User want to quit?\r\n            if (entryString.equalsIgnoreCase(&quot;q&quot;)) {\r\n                // Yes!...Then Quit!\r\n                System.out.println(&quot;Quitting - Bye Bye&quot;);\r\n                return;\r\n            }\r\n            \r\n            // Validate User&#39;s entry for this prompt:\r\n            /* Was a proper entry made (1 to 100 OR 1.0 to 100.0)?\r\n               To be honest, it makes no difference if an integer \r\n               value is supplie from 1 to 100 or a floating point\r\n               value. It can save the User with the hassle of adding\r\n               .0 to the end of the entry. This is done when the \r\n               supplied value is converted to a double data type \r\n               anyway.*/\r\n            if (!entryString.matches(&quot;-?\\\\d+(\\\\.\\\\d+)?&quot;) \r\n                            || Double.parseDouble(entryString) &lt; 0.0d \r\n                                        || Double.parseDouble(entryString) &gt; 100.0d) {\r\n                /* No...Is it because not all characters supplied are\r\n                   numerical digits (ignoring the decimal point)?  */\r\n                if (!entryString.replace(&quot;.&quot;, &quot;&quot;).matches(&quot;\\\\d+&quot;)) {\r\n                    //Yes...that&#39;s the problem...Inform User and allow to try again.\r\n                    System.out.println(&quot;Invalid Numerical Entry! (&quot; + entryString \r\n                            + &quot;) You must supply numerical digits only&quot; + LS + &quot;(with or without &quot;\r\n                                    + &quot;the decimal point for whole values)! Try Again...&quot; + LS);\r\n                }\r\n                \r\n                /* No...Then it must be because the numerical value supplied\r\n                   does fall within the required inclusive range of 1 to 10. */\r\n                else {\r\n                    // Inform the User of the issue and allow to try again.\r\n                    System.out.println(&quot;Invalid Numerical Entry! (&quot; + entryString \r\n                            + &quot;) You must supply a numerical value from 0.0 to &quot;\r\n                                    + &quot;100.0 only! Try Again...&quot; + LS);\r\n                }\r\n                \r\n                // For either reason...Empty varaible to ensure re-loop;\r\n                entryString = &quot;&quot;;\r\n            }\r\n        }\r\n        \r\n        // If we make it to this point in code then...the entry passed validation:\r\n        price = Double.parseDouble(entryString);\r\n        \r\n     \r\n        // ==============================================================================\r\n        \r\n        System.out.println();\r\n        // PROMPT #3 - Ask for a Description String of any content other than empty:\r\n        entryString = &quot;&quot;; // Empty the entryString variable for re-use:\r\n        \r\n        // Keep looping for as long as entryString is empty (&quot;&quot;) {null-String}:\r\n        while (entryString.isEmpty()) {\r\n            // The Actual Prompt displayed to User:\r\n            System.out.println(&quot;Enter an Item Description of any length:&quot;);\r\n            System.out.print(&quot;Your Entry (or q to quit): -&gt;  &quot;);\r\n            \r\n            /* Get User&#39;s String input. Trim off any leading/trailing \r\n               whitespaces from the entry if they were accidently placed \r\n               there.            */\r\n            entryString = userInput.nextLine().trim(); \r\n            \r\n            // Did User want to quit?\r\n            if (entryString.equalsIgnoreCase(&quot;q&quot;)) {\r\n                // Yes!...Then Quit!\r\n                System.out.println(&quot;Quitting - Bye Bye&quot;);\r\n                return;\r\n            }\r\n            \r\n            // Validate User&#39;s entry for this prompt:\r\n            // Was a proper entry made (a String of any length other than 0)?\r\n            if (entryString.isEmpty()) {\r\n                System.out.println(&quot;Invalid Item Description Supplied! Your entry must &quot;\r\n                                          + &quot;contain something! Try Again...&quot; + LS);\r\n                entryString = &quot;&quot;;  // Empty varaible to ensure re-loop;\r\n            }\r\n        }\r\n        \r\n        // If we make it to this point in code then...the entry passed validation:\r\n        item = entryString;\r\n     \r\n        // ============================ DONE WITH PROMPTS ===============================\r\n        \r\n        \r\n        // Display input Results:\r\n        System.out.println();\r\n        System.out.println(&quot;Quantity:  &quot; + qty + &quot;  -  Price Each:  $&quot; \r\n                         + String.format(&quot;%.2f&quot;, price) + &quot;  -  Description:  &quot; \r\n                         + item + LS + &quot;TOTAL Price:  -&gt; $&quot; + String.format(&quot;%.2f&quot;, (qty * price)));\r\n```\r\n\r\nNow, this looks like a lot of code, but really it isn&#39;t. Most of it is comments which you can delete if you like.\r\n\r\nYou will also notice that only the [Scanner#nextLine()](https://www.tutorialspoint.com/java/util/scanner_nextline.htm) method is used to obtain User input. I like the flexibility of this method over the other methods.\r\n\r\nThere are three prompts and each is validated making use of the [String#matches()](https://www.tutorialspoint.com/java/java_string_matches.htm) method and small [Regular Expressions](https://www.vogella.com/tutorials/JavaRegularExpressions/article.html) (regex).\r\n\r\nExpressions Used:\r\n\r\n - `&quot;[1-9]|10&quot;` A string containing **any** value from **1** to **10** (*inclusive*);\r\n - `&quot;\\\\d+&quot;` A String containing **all** digits from **0** to **9**;\r\n - `&quot;-?\\\\d+(\\\\.\\\\d+)?&quot;` A String containing a representation of a\r\n   numerical signed or unsigned Integer or Floating Point value.\r\n\r\n \r\n\r\n","title":"How to create multiple custom InputMismatch Exception messages in Java?","body":"<p>In my opinion, you shouldn't purposely want any try/catch mechanism for this sort of thing. Use code that doesn't require error trapping if you can, for example (read the comments in code):</p>\n<pre><code>        // OS related newline character sequence: \n        final String LS = System.lineSeparator();\n        \n        /* Open a Keyboard input stream. Don't close this object! \n           If you do then you will have to restart your application\n           to use it again. The JVM will automatically close this\n           Stream (System.in) when the application closes (ends). */\n        final Scanner userInput = new Scanner(System.in);\n        \n        int qty;\n        double price;\n        String item;\n    \n        // PROMPT #1 - Ask for an integer value between 1 and 10 (inclusive):\n        String entryString = &quot;&quot;;\n        \n        // Keep looping for as long as entryString is empty (&quot;&quot;) {null-String}:\n        while (entryString.isEmpty()) {\n            // The Actual Prompt displayed to User:\n            System.out.println(&quot;Enter a Quantity value between 1 and 10 (inclusive):&quot;);\n            System.out.print(&quot;Your Entry (or q to quit): -&gt;  &quot;);\n            \n            /* Get User's numerical input. Trim off any leading/trailing \n               whitespaces from the entry if they were accidently placed \n               there.            */\n            entryString = userInput.nextLine().trim();\n            \n            // Did User want to quit?\n            if (entryString.equalsIgnoreCase(&quot;q&quot;)) {\n                // Yes!...Then Quit!\n                System.out.println(&quot;Quitting - Bye Bye&quot;);\n                return;\n            }\n            \n            // Validate User's entry for this prompt:\n            // Was a proper entry made (1 to 10)?\n            if (!entryString.matches(&quot;[1-9]|10&quot;)) {\n                // No...Is it because not all characters supplied are numerical digits?\n                if (!entryString.matches(&quot;\\\\d+&quot;)) {\n                    //Yes...that's the problem...Inform User and allow to try again.\n                    System.out.println(&quot;Invalid Numerical Entry! (&quot; + entryString \n                            + &quot;) You must supply numerical digits only! Try Again...&quot; + LS);\n                }\n                /* No...Then it must be because the numerical value supplied\n                   does fall within the required inclusive range of 1 to 10. */\n                else {\n                    // Inform the User of the issue and allow to try again.\n                    System.out.println(&quot;Invalid Numerical Entry! (&quot; + entryString \n                            + &quot;) You must supply a numerical value from 1 to 10 only! &quot;\n                                    + &quot;Try Again...&quot; + LS);\n                }\n                \n                // For either reason...Empty varaible to ensure re-loop;\n                entryString = &quot;&quot;;\n            }\n        }\n        \n        // If we make it to this point in code then...the entry passed validation:\n        qty = Integer.parseInt(entryString);\n     \n        // ==============================================================================\n    \n        System.out.println();\n        // PROMPT #2 - Ask for a Floating Point Value from 0.0 to 100.0 (inclusive):\n        entryString = &quot;&quot;; // Empty the entryString variable for re-use:\n        \n        // Keep looping for as long as entryString is empty (&quot;&quot;) {null-String}:\n        while (entryString.isEmpty()) {\n            // The Actual Prompt displayed to User:\n            System.out.println(&quot;Enter a Price Per Item value between 0.00 and 100.00 (inclusive):&quot;);\n            System.out.print(&quot;Your Entry (or q to quit): -&gt;  &quot;);\n            \n            /* Get User's numerical input. Trim off any leading/trailing \n               whitespaces from the entry if they were accidently placed \n               there.            */\n            entryString = userInput.nextLine().trim(); \n            \n            // Did User want to quit?\n            if (entryString.equalsIgnoreCase(&quot;q&quot;)) {\n                // Yes!...Then Quit!\n                System.out.println(&quot;Quitting - Bye Bye&quot;);\n                return;\n            }\n            \n            // Validate User's entry for this prompt:\n            /* Was a proper entry made (1 to 100 OR 1.0 to 100.0)?\n               To be honest, it makes no difference if an integer \n               value is supplie from 1 to 100 or a floating point\n               value. It can save the User with the hassle of adding\n               .0 to the end of the entry. This is done when the \n               supplied value is converted to a double data type \n               anyway.*/\n            if (!entryString.matches(&quot;-?\\\\d+(\\\\.\\\\d+)?&quot;) \n                            || Double.parseDouble(entryString) &lt; 0.0d \n                                        || Double.parseDouble(entryString) &gt; 100.0d) {\n                /* No...Is it because not all characters supplied are\n                   numerical digits (ignoring the decimal point)?  */\n                if (!entryString.replace(&quot;.&quot;, &quot;&quot;).matches(&quot;\\\\d+&quot;)) {\n                    //Yes...that's the problem...Inform User and allow to try again.\n                    System.out.println(&quot;Invalid Numerical Entry! (&quot; + entryString \n                            + &quot;) You must supply numerical digits only&quot; + LS + &quot;(with or without &quot;\n                                    + &quot;the decimal point for whole values)! Try Again...&quot; + LS);\n                }\n                \n                /* No...Then it must be because the numerical value supplied\n                   does fall within the required inclusive range of 1 to 10. */\n                else {\n                    // Inform the User of the issue and allow to try again.\n                    System.out.println(&quot;Invalid Numerical Entry! (&quot; + entryString \n                            + &quot;) You must supply a numerical value from 0.0 to &quot;\n                                    + &quot;100.0 only! Try Again...&quot; + LS);\n                }\n                \n                // For either reason...Empty varaible to ensure re-loop;\n                entryString = &quot;&quot;;\n            }\n        }\n        \n        // If we make it to this point in code then...the entry passed validation:\n        price = Double.parseDouble(entryString);\n        \n     \n        // ==============================================================================\n        \n        System.out.println();\n        // PROMPT #3 - Ask for a Description String of any content other than empty:\n        entryString = &quot;&quot;; // Empty the entryString variable for re-use:\n        \n        // Keep looping for as long as entryString is empty (&quot;&quot;) {null-String}:\n        while (entryString.isEmpty()) {\n            // The Actual Prompt displayed to User:\n            System.out.println(&quot;Enter an Item Description of any length:&quot;);\n            System.out.print(&quot;Your Entry (or q to quit): -&gt;  &quot;);\n            \n            /* Get User's String input. Trim off any leading/trailing \n               whitespaces from the entry if they were accidently placed \n               there.            */\n            entryString = userInput.nextLine().trim(); \n            \n            // Did User want to quit?\n            if (entryString.equalsIgnoreCase(&quot;q&quot;)) {\n                // Yes!...Then Quit!\n                System.out.println(&quot;Quitting - Bye Bye&quot;);\n                return;\n            }\n            \n            // Validate User's entry for this prompt:\n            // Was a proper entry made (a String of any length other than 0)?\n            if (entryString.isEmpty()) {\n                System.out.println(&quot;Invalid Item Description Supplied! Your entry must &quot;\n                                          + &quot;contain something! Try Again...&quot; + LS);\n                entryString = &quot;&quot;;  // Empty varaible to ensure re-loop;\n            }\n        }\n        \n        // If we make it to this point in code then...the entry passed validation:\n        item = entryString;\n     \n        // ============================ DONE WITH PROMPTS ===============================\n        \n        \n        // Display input Results:\n        System.out.println();\n        System.out.println(&quot;Quantity:  &quot; + qty + &quot;  -  Price Each:  $&quot; \n                         + String.format(&quot;%.2f&quot;, price) + &quot;  -  Description:  &quot; \n                         + item + LS + &quot;TOTAL Price:  -&gt; $&quot; + String.format(&quot;%.2f&quot;, (qty * price)));\n</code></pre>\n<p>Now, this looks like a lot of code, but really it isn't. Most of it is comments which you can delete if you like.</p>\n<p>You will also notice that only the <a href=\"https://www.tutorialspoint.com/java/util/scanner_nextline.htm\" rel=\"nofollow noreferrer\">Scanner#nextLine()</a> method is used to obtain User input. I like the flexibility of this method over the other methods.</p>\n<p>There are three prompts and each is validated making use of the <a href=\"https://www.tutorialspoint.com/java/java_string_matches.htm\" rel=\"nofollow noreferrer\">String#matches()</a> method and small <a href=\"https://www.vogella.com/tutorials/JavaRegularExpressions/article.html\" rel=\"nofollow noreferrer\">Regular Expressions</a> (regex).</p>\n<p>Expressions Used:</p>\n<ul>\n<li><code>&quot;[1-9]|10&quot;</code> A string containing <strong>any</strong> value from <strong>1</strong> to <strong>10</strong> (<em>inclusive</em>);</li>\n<li><code>&quot;\\\\d+&quot;</code> A String containing <strong>all</strong> digits from <strong>0</strong> to <strong>9</strong>;</li>\n<li><code>&quot;-?\\\\d+(\\\\.\\\\d+)?&quot;</code> A String containing a representation of a\nnumerical signed or unsigned Integer or Floating Point value.</li>\n</ul>\n"}],"owner":{"account_id":23161530,"reputation":9,"user_id":17262118,"display_name":"lighdhftr3456"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1693379242,"creation_date":1693345545,"question_id":77003807,"body_markdown":"Is it possible to have custom exception messages for each of the variables num, price, and item within 1 try-catch block, or do I need multiple try and catch blocks? So if the user inputs letters instead of an integer for &quot;num&quot; variable, the exception message will be &quot;must be an integer between 1-10&quot;. And if the user inputs letters instead of a double for &quot;price&quot; variable, the exception message will be &quot;must be a double between 0.00-100.00&quot;. \r\n\r\n    public static void main(String[] args) throws Exception {\r\n         Scanner scan = new Scanner(System.in);\r\n                int num;\r\n                double price\r\n                String item;\r\n        \r\n         try {\r\n                System.out.println(&quot;Input must be an integer between 1-10&quot;);\r\n                num = scan.nextInt();\r\n                System.out.println(&quot;Input must be a double between 0.00-100.00&quot;);\r\n                price = scan.nextDouble();\r\n                System.out.println(&quot;Input must be a string&quot;);\r\n                item = scan.next();\r\n                    \r\n         } catch(InputMismatchException e) {\r\n                System.out.println(&quot;Custom Message Here&quot;);    \r\n    \r\n         }\r\n    }\r\n\r\n\r\n\r\n","title":"How to create multiple custom InputMismatch Exception messages in Java?","body":"<p>Is it possible to have custom exception messages for each of the variables num, price, and item within 1 try-catch block, or do I need multiple try and catch blocks? So if the user inputs letters instead of an integer for &quot;num&quot; variable, the exception message will be &quot;must be an integer between 1-10&quot;. And if the user inputs letters instead of a double for &quot;price&quot; variable, the exception message will be &quot;must be a double between 0.00-100.00&quot;.</p>\n<pre><code>public static void main(String[] args) throws Exception {\n     Scanner scan = new Scanner(System.in);\n            int num;\n            double price\n            String item;\n    \n     try {\n            System.out.println(&quot;Input must be an integer between 1-10&quot;);\n            num = scan.nextInt();\n            System.out.println(&quot;Input must be a double between 0.00-100.00&quot;);\n            price = scan.nextDouble();\n            System.out.println(&quot;Input must be a string&quot;);\n            item = scan.next();\n                \n     } catch(InputMismatchException e) {\n            System.out.println(&quot;Custom Message Here&quot;);    \n\n     }\n}\n</code></pre>\n"},{"tags":["java","eclipse","selenium-webdriver"],"comments":[{"owner":{"account_id":10299692,"reputation":5719,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"score":1,"creation_date":1693309337,"post_id":76999868,"comment_id":135740821,"body_markdown":"Can you edit the question and share the error stack trace from the console?","body":"Can you edit the question and share the error stack trace from the console?"},{"owner":{"account_id":29321327,"reputation":13,"user_id":22464882,"display_name":"Ammad testh"},"score":0,"creation_date":1693309480,"post_id":76999868,"comment_id":135740849,"body_markdown":"I have added the comments. Please check @Shawn","body":"I have added the comments. Please check @Shawn"}],"answers":[{"tags":[],"owner":{"account_id":14399098,"reputation":952,"user_id":10401397,"display_name":"O_K"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693309706,"creation_date":1693309706,"answer_id":76999923,"question_id":76999868,"body_markdown":"You can use `WebDriverManager.chromedriver().setup();` to initiate the Chrome browser and use below in your pom file\r\n\r\n    &lt;dependencies&gt;\r\n    &lt;!-- Other dependencies --&gt;\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n        &lt;artifactId&gt;selenium-chrome-driver&lt;/artifactId&gt;\r\n        &lt;version&gt;4.11.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n&lt;/dependencies&gt;\r\n","title":"Chrome browser opens and closes immediately after it runs - Selenium web driver","body":"<p>You can use <code>WebDriverManager.chromedriver().setup();</code> to initiate the Chrome browser and use below in your pom file</p>\n<pre><code>&lt;dependencies&gt;\n&lt;!-- Other dependencies --&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n    &lt;artifactId&gt;selenium-chrome-driver&lt;/artifactId&gt;\n    &lt;version&gt;4.11.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n"},{"tags":[],"owner":{"account_id":10299692,"reputation":5719,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1693310156,"creation_date":1693310156,"answer_id":76999984,"question_id":76999868,"body_markdown":"Not sure which version of selenium you are using, since the chrome version in your system is `116`, you need to upgrade your selenium to latest one which is `4.11.0`. Check below:\r\n````\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\r\n\t&lt;version&gt;4.11.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n````\r\n\r\nAnd once you have upgraded, setting `System.setProperty` path is no longer mandatory, you can skip that line. Selenium will internally download and manage the drivers for you. Code can be simplified as below:\r\n````\r\npublic static void main(String[] args) {\r\n    // TODO Auto-generated method stub        \r\n    ChromeDriver driver = new ChromeDriver();\r\n    driver.get(&quot;https://www.google.com&quot;);\r\n    System.out.println(driver.getCurrentUrl());\r\n}\r\n````\r\n\r\nRefer these answers for questions with similar issues:\r\n\r\n - https://stackoverflow.com/a/76912466/7598774\r\n - https://stackoverflow.com/a/76927754/7598774\r\n - https://stackoverflow.com/a/76929533/7598774\r\n - https://stackoverflow.com/a/76463081/7598774","title":"Chrome browser opens and closes immediately after it runs - Selenium web driver","body":"<p>Not sure which version of selenium you are using, since the chrome version in your system is <code>116</code>, you need to upgrade your selenium to latest one which is <code>4.11.0</code>. Check below:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n    &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n    &lt;version&gt;4.11.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>And once you have upgraded, setting <code>System.setProperty</code> path is no longer mandatory, you can skip that line. Selenium will internally download and manage the drivers for you. Code can be simplified as below:</p>\n<pre><code>public static void main(String[] args) {\n    // TODO Auto-generated method stub        \n    ChromeDriver driver = new ChromeDriver();\n    driver.get(&quot;https://www.google.com&quot;);\n    System.out.println(driver.getCurrentUrl());\n}\n</code></pre>\n<p>Refer these answers for questions with similar issues:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/a/76912466/7598774\">https://stackoverflow.com/a/76912466/7598774</a></li>\n<li><a href=\"https://stackoverflow.com/a/76927754/7598774\">https://stackoverflow.com/a/76927754/7598774</a></li>\n<li><a href=\"https://stackoverflow.com/a/76929533/7598774\">https://stackoverflow.com/a/76929533/7598774</a></li>\n<li><a href=\"https://stackoverflow.com/a/76463081/7598774\">https://stackoverflow.com/a/76463081/7598774</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":24984903,"reputation":1,"user_id":18846815,"display_name":"Zubair Ul Amin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693379106,"creation_date":1693379106,"answer_id":77005657,"question_id":76999868,"body_markdown":"you should update the selenium version to 4.11","title":"Chrome browser opens and closes immediately after it runs - Selenium web driver","body":"<p>you should update the selenium version to 4.11</p>\n"}],"owner":{"account_id":29321327,"reputation":13,"user_id":22464882,"display_name":"Ammad testh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":135,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76999984,"answer_count":3,"score":1,"last_activity_date":1693379106,"creation_date":1693309185,"question_id":76999868,"body_markdown":"I am just invoking a chrome browser by entering a URL of the page. It opens a browser and closes immediately. However, I have added the dependencies on the POM.xml file. \r\n\r\nYou can find the code below,\r\n\r\n```java\r\n\r\n    package com.Rezaid.webdriver;\r\n    \r\n    \r\n    import org.openqa.selenium.chrome.ChromeDriver;\r\n    \r\n    \r\n    public class OpenBrowser {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\t// TODO Auto-generated method stub\r\n    \t\t\r\n    \t\tSystem.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C://Users//BiTS//Downloads//chromedrivers//chromedriver.exe&quot;);\r\n    \t\t\r\n    \t\t  ChromeDriver driver = new ChromeDriver();\r\n    \t\t    \r\n    \t\t    driver.get(&quot;https://www.google.com&quot;);\r\n    \t\t    \r\n    \t\t    System.out.println(driver.getCurrentUrl());\r\n    }\r\n```\r\nI want you to tell me the solution so that I can run the code.\r\n\r\nThe errors are shown below,\r\n```\r\nSLF4J: Failed to load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.\r\nSLF4J: Defaulting to no-operation (NOP) logger implementation\r\nSLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.\r\nStarting ChromeDriver 114.0.5735.90 (386bc09e8f4f2e025eddae123f36f6263096ae49-refs/branch-heads/5735@{#1052}) on port 10550\r\nOnly local connections are allowed.\r\nPlease see https://chromedriver.chromium.org/security-considerations for suggestions on keeping ChromeDriver safe.\r\nChromeDriver was started successfully.\r\nException in thread &quot;main&quot; org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Response code 500. Message: session not created: This version of ChromeDriver only supports Chrome version 114\r\nCurrent browser version is 116.0.5845.111 with binary path C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe \r\n```\r\n","title":"Chrome browser opens and closes immediately after it runs - Selenium web driver","body":"<p>I am just invoking a chrome browser by entering a URL of the page. It opens a browser and closes immediately. However, I have added the dependencies on the POM.xml file.</p>\n<p>You can find the code below,</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n    package com.Rezaid.webdriver;\n    \n    \n    import org.openqa.selenium.chrome.ChromeDriver;\n    \n    \n    public class OpenBrowser {\n    \n        public static void main(String[] args) {\n            // TODO Auto-generated method stub\n            \n            System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C://Users//BiTS//Downloads//chromedrivers//chromedriver.exe&quot;);\n            \n              ChromeDriver driver = new ChromeDriver();\n                \n                driver.get(&quot;https://www.google.com&quot;);\n                \n                System.out.println(driver.getCurrentUrl());\n    }\n</code></pre>\n<p>I want you to tell me the solution so that I can run the code.</p>\n<p>The errors are shown below,</p>\n<pre><code>SLF4J: Failed to load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.\nSLF4J: Defaulting to no-operation (NOP) logger implementation\nSLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.\nStarting ChromeDriver 114.0.5735.90 (386bc09e8f4f2e025eddae123f36f6263096ae49-refs/branch-heads/5735@{#1052}) on port 10550\nOnly local connections are allowed.\nPlease see https://chromedriver.chromium.org/security-considerations for suggestions on keeping ChromeDriver safe.\nChromeDriver was started successfully.\nException in thread &quot;main&quot; org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Response code 500. Message: session not created: This version of ChromeDriver only supports Chrome version 114\nCurrent browser version is 116.0.5845.111 with binary path C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe \n</code></pre>\n"},{"tags":["java","mongodb"],"owner":{"account_id":2008573,"reputation":5307,"user_id":1797689,"accept_rate":67,"display_name":"khateeb"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693377659,"creation_date":1693377659,"question_id":77005496,"body_markdown":"I am using MongoDB with Java driver. I am trying to update a field by multiplying another with a number and setting it. But instead of the result of the multiplication, the field is being set by a `BasicDBObject`. How do I make it so that the result is set?\r\n\r\nPlease give the answer using the [Update builders][1] of the Java driver?\r\n\r\n\r\n\r\n    Bson filter1 = and(\r\n            eq(&quot;platform&quot;, platform),\r\n            eq(&quot;channel&quot;, channel)\r\n    );\r\n    double percent = 20;\r\n    final Bson update = set(&quot;percent_view&quot;, new BasicDBObject(&quot;$multiply&quot;, Arrays.asList(&quot;$viewtime&quot;, percent)));\r\n\r\n    collection.updateOne(filter1, update);\r\n\r\n\r\n  [1]: https://www.mongodb.com/docs/drivers/java/sync/current/fundamentals/builders/updates/","title":"How to update a field in MongoDB using Java driver with the value of another field in the collection?","body":"<p>I am using MongoDB with Java driver. I am trying to update a field by multiplying another with a number and setting it. But instead of the result of the multiplication, the field is being set by a <code>BasicDBObject</code>. How do I make it so that the result is set?</p>\n<p>Please give the answer using the <a href=\"https://www.mongodb.com/docs/drivers/java/sync/current/fundamentals/builders/updates/\" rel=\"nofollow noreferrer\">Update builders</a> of the Java driver?</p>\n<pre><code>Bson filter1 = and(\n        eq(&quot;platform&quot;, platform),\n        eq(&quot;channel&quot;, channel)\n);\ndouble percent = 20;\nfinal Bson update = set(&quot;percent_view&quot;, new BasicDBObject(&quot;$multiply&quot;, Arrays.asList(&quot;$viewtime&quot;, percent)));\n\ncollection.updateOne(filter1, update);\n</code></pre>\n"},{"tags":["java","spring","spring-boot","azure-keyvault","azure-secrets"],"answers":[{"tags":[],"owner":{"account_id":10570207,"reputation":1,"user_id":8686278,"display_name":"Daniel Andres Zapata"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1669260166,"creation_date":1669260166,"answer_id":74555264,"question_id":73983720,"body_markdown":"try adding the endpoint of the resource:\r\n\r\n`spring.cloud.azure.keyvault.secret.property-sources[0].endpoint=`\r\n\r\nI hope it is useful","title":"Facing issue with getting secrets from Azure Key Vault in a Springboot Application","body":"<p>try adding the endpoint of the resource:</p>\n<p><code>spring.cloud.azure.keyvault.secret.property-sources[0].endpoint=</code></p>\n<p>I hope it is useful</p>\n"}],"owner":{"account_id":26257597,"reputation":1,"user_id":19929422,"display_name":"r_k047"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":621,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693376644,"creation_date":1665127354,"question_id":73983720,"body_markdown":"i am facing some issue while fetching secrets from azure key vault in a springboot project. I have created a sample springboot project and for that it is working fine but in my actual application it is not working as it is showing null for the secret values.\r\n\r\nThe actual application is different as it connects to the database. I don&#39;t have a controller in my actual application. I am new to this key vault concept.\r\nMy main aim is to get the DB credentials running from the key vault only but I am not able to fetch a sample value only in my actual project. Guide me how I can achieve this/what am I doing wrong\r\n\r\nSample project application.property file have this code \r\n\r\n    server.port=8090\r\n    spring.cloud.azure.keyvault.secret.property-sources[0].credential.client-id= xxxxxx\r\n    spring.cloud.azure.keyvault.secret.property-sources[0].credential.client-secret=xxxxx\r\n    spring.cloud.azure.keyvault.secret.property-sources[0].endpoint=https:xxxxxx\r\n    spring.cloud.azure.keyvault.secret.property-sources[0].profile.tenant-id=xxxxxx\r\n\r\nController\r\n\r\n    @SpringBootApplication\r\n    @RestController\r\n    public class DatafeedKeyvaultApplication implements CommandLineRunner{\r\n    \t\r\n    \t@Value(&quot;${connectionString}&quot;)\r\n    \tprivate String connectionString;\r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(DatafeedKeyvaultApplication.class, args);\r\n    \t}\r\n    \t\r\n    \t@GetMapping(&quot;get&quot;)\r\n        public String get() {\r\n    \t\treturn connectionString;\r\n        }\r\n    \r\n        public void run(String... varl) throws Exception {\r\n            System.out.println(String.format(&quot;\\nConnection String stored in Azure Key Vault:\\n%s\\n&quot;,connectionString));\r\n        }\r\n    \r\n    }\r\nhere im able to fetch the value from the keyvault.\r\n\r\nbut in my actual project application it is not happening, it is returning me null values only.\r\n\r\n\r\n    #azure.keyvault.enabled=true\r\n    #spring.cloud.azure.keyvault.secret.property-sources[0].enabled=true\r\n    \r\n    spring.cloud.azure.keyvault.secret.property-sources[0].credential.client-id=xxxxxx\r\n    spring.cloud.azure.keyvault.secret.property-sources[0].credential.client-secret=xxxx\r\n    spring.cloud.azure.keyvault.secret.property-sources[0].endpoint=xxxxxx\r\n    spring.cloud.azure.keyvault.secret.property-sources[0].profile.tenant-id=xxxxx\r\n    server.port=8090\r\n    \r\n    spring.jpa.properties.hibernate.default_schema=acn\r\n    spring.jpa.properties.hibernate.format_sql = false\r\n    spring.jpa.show-sql=false\r\n    spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl\r\n    spring.jpa.hibernate.ddl-auto = update\r\n    spring.jackson.default-property-inclusion = NON_NULL\r\n    spring.main.web-application-type=NONE\r\n    spring.main.banner-mode = off\r\n    logging.level.root=error\r\n        \r\n    ################ MSPS DB Configuration ################\r\n    INTEGRATION_MSPS_DBSERVER_URL=xxxxxxx\r\n    MSPS_DB_INTEGRATED_SECURTY =false\r\n    spring.datasource.driverClassName=com.microsoft.sqlserver.jdbc.SQLServerDriver\r\n    spring.datasource.url=jdbc:sqlserver://${INTEGRATION_MSPS_DBSERVER_URL};databaseName=ACN_MSPSJiraInteg;integratedSecurity=${MSPS_DB_INTEGRATED_SECURTY};\r\n    spring.datasource.username= xxxxx\r\n    spring.datasource.password=xxxxx\r\n    \r\n    \r\n\r\nI have checked the java version , dependencies, the credentials in property file everything is correct but still im not able to fetch the keyvault value in my actual project.\r\n\r\n    @SpringBootApplication\r\n    public class JiraMspsUtilityApplication implements CommandLineRunner {\r\n    \t\r\n    \t@Value(&quot;${datafeed-sample-value}&quot;)\r\n    \t private static String keyvault_value;\r\n    \r\n    \tprivate static final Logger loggerForWorkitemMetrics = LoggerFactory.getLogger(&quot;metricsUpdatAppender&quot;);\r\n    \tprivate static final Logger LoggerForSharedPlanUpdate = LoggerFactory.getLogger(&quot;sharedPlanUpdateAppender&quot;);\r\n    \r\n    \t@Autowired\r\n    \tConfigProperties configProp;\r\n    \r\n    \t@Autowired\r\n    \tJIRAMSPSService jiraMspsService;\r\n    \r\n    \tprivate static final Logger logger = LoggerFactory.getLogger(&quot;JiraMspsUtilityApplication&quot;);\r\n    \r\n    \tstatic {\r\n    \t\t\r\n    \t\tSystem.out.println(&quot;key vault value &quot;+ keyvault_value);\r\n    \t\tlogger.info(&quot;key vault value &quot;+ keyvault_value);\r\n    \t\t\r\n    \t\tboolean isExistEC = false;\r\n    \t\tProvider[] providers = Security.getProviders();\r\n    \t\tfor (Provider provider : providers) {\r\n    \t\t\tlogger.info(&quot;CRYPTO provider: &quot; + provider.getName().toString());\r\n    \t\t\tSet&lt;Provider.Service&gt; services = provider.getServices();\r\n    \t\t\tfor (Provider.Service service : services) {\r\n    \t\t\t\tlogger.info(&quot;CRYPTO algorithm: &quot; + service.getAlgorithm());\r\n    \t\t\t\tif (service.getAlgorithm().equals(&quot;EC&quot;)) {\r\n    \t\t\t\t\tisExistEC = true;\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\tif (isExistEC) {\r\n    \t\t\tlogger.info(&quot;BC security provider not added for EC algorithm as JRE already able to find it&quot;);\r\n    \t\t} else {\r\n    \t\t\tSecurity.addProvider(new BouncyCastleProvider());\r\n    \t\t\tlogger.info(&quot;BC security provider added for EC algorithm&quot;);\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication app = new SpringApplication(JiraMspsUtilityApplication.class);\r\n    \r\n    \t\tapp.run(args);\r\n    \t\t\r\n    \t\tSystem.out.println(String.format(&quot;\\n1. Key Valut value stored in Azure Key Vault:\\n%s\\n&quot;,keyvault_value));\r\n    \t\tlogger.info(&quot;\\n1. Key Valut value stored in Azure Key Vault:\\n%s\\n&quot;,keyvault_value);\r\n    \t\t\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void run(String... args) throws IOException {\r\n\r\n    \t System.out.println(String.format(&quot;\\n2. Key Valut value stored in Azure Key Vault:\\n%s\\n&quot;,keyvault_value));\r\n    \t\t \r\n    \t\t logger.info(&quot;\\n2. Key Valut value stored in Azure Key Vault:\\n%s\\n&quot;,keyvault_value);\r\n    \r\n    \t\tif (args.length == 0) {\r\n    \t\t\tloggerForWorkitemMetrics.info(&quot;There were no commandline arguments passed&quot;);\r\n    \t\t\tLoggerForSharedPlanUpdate.info(&quot;There were no commandline arguments passed&quot;);\r\n    \t\t\tSystem.exit(1);\r\n    \t\t} else if (args.length &gt; 1) {\r\n    \t\t\tloggerForWorkitemMetrics.info(&quot;More than one argument passed&quot;);\r\n    \t\t\tLoggerForSharedPlanUpdate.info(&quot;More than one argument passed&quot;);\r\n    \t\t\tSystem.exit(1);\r\n    \t\t} else {\r\n    \r\n    \t\t\tif (Integer.parseInt(args[0]) == 0) {\r\n    \t\t\t\tboolean flag = jiraMspsService.updateWorkRequestMetricsInJira();\r\n    \t\t\t\tif (flag) {\r\n    \t\t\t\t\tSystem.exit(0);\r\n    \t\t\t\t} else {\r\n    \t\t\t\t\tloggerForWorkitemMetrics.info(&quot;WORK REQUEST METRICS UPDATE PROCESS INCOMPLETE DUE TO ERROR&quot;);\r\n    \t\t\t\t}\r\n    \t\t\t} else if (Integer.parseInt(args[0]) == 1) {\r\n    \t\t\t\tboolean flag = jiraMspsService.updateSharedWorkplanEntries();\r\n    \t\t\t\tif (flag) {\r\n    \t\t\t\t\tSystem.exit(0);\r\n    \t\t\t\t} else {\r\n    \t\t\t\t\tLoggerForSharedPlanUpdate.info(&quot;SHARED PLANS UPDATE PROCESS INCOMPLETE DUE TO ERROR&quot;);\r\n    \t\t\t\t}\r\n    \r\n    \t\t\t} else {\r\n    \t\t\t\tloggerForWorkitemMetrics.info(\r\n    \t\t\t\t\t\t&quot;Invalid argument(s) passed.&quot;);\r\n    \t\t\t\tLoggerForSharedPlanUpdate.info(\r\n    \t\t\t\t\t\t&quot;Invalid argument(s) passed.&quot;);\r\n    \t\t\t\tSystem.exit(1);\r\n    \r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    }\r\n    \r\n        \r\n        \r\n        \r\n        \r\n        \r\n      \r\n    \r\n    \r\n    \r\n    \r\n\r\n\r\n\r\n","title":"Facing issue with getting secrets from Azure Key Vault in a Springboot Application","body":"<p>i am facing some issue while fetching secrets from azure key vault in a springboot project. I have created a sample springboot project and for that it is working fine but in my actual application it is not working as it is showing null for the secret values.</p>\n<p>The actual application is different as it connects to the database. I don't have a controller in my actual application. I am new to this key vault concept.\nMy main aim is to get the DB credentials running from the key vault only but I am not able to fetch a sample value only in my actual project. Guide me how I can achieve this/what am I doing wrong</p>\n<p>Sample project application.property file have this code</p>\n<pre><code>server.port=8090\nspring.cloud.azure.keyvault.secret.property-sources[0].credential.client-id= xxxxxx\nspring.cloud.azure.keyvault.secret.property-sources[0].credential.client-secret=xxxxx\nspring.cloud.azure.keyvault.secret.property-sources[0].endpoint=https:xxxxxx\nspring.cloud.azure.keyvault.secret.property-sources[0].profile.tenant-id=xxxxxx\n</code></pre>\n<p>Controller</p>\n<pre><code>@SpringBootApplication\n@RestController\npublic class DatafeedKeyvaultApplication implements CommandLineRunner{\n    \n    @Value(&quot;${connectionString}&quot;)\n    private String connectionString;\n    public static void main(String[] args) {\n        SpringApplication.run(DatafeedKeyvaultApplication.class, args);\n    }\n    \n    @GetMapping(&quot;get&quot;)\n    public String get() {\n        return connectionString;\n    }\n\n    public void run(String... varl) throws Exception {\n        System.out.println(String.format(&quot;\\nConnection String stored in Azure Key Vault:\\n%s\\n&quot;,connectionString));\n    }\n\n}\n</code></pre>\n<p>here im able to fetch the value from the keyvault.</p>\n<p>but in my actual project application it is not happening, it is returning me null values only.</p>\n<pre><code>#azure.keyvault.enabled=true\n#spring.cloud.azure.keyvault.secret.property-sources[0].enabled=true\n\nspring.cloud.azure.keyvault.secret.property-sources[0].credential.client-id=xxxxxx\nspring.cloud.azure.keyvault.secret.property-sources[0].credential.client-secret=xxxx\nspring.cloud.azure.keyvault.secret.property-sources[0].endpoint=xxxxxx\nspring.cloud.azure.keyvault.secret.property-sources[0].profile.tenant-id=xxxxx\nserver.port=8090\n\nspring.jpa.properties.hibernate.default_schema=acn\nspring.jpa.properties.hibernate.format_sql = false\nspring.jpa.show-sql=false\nspring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl\nspring.jpa.hibernate.ddl-auto = update\nspring.jackson.default-property-inclusion = NON_NULL\nspring.main.web-application-type=NONE\nspring.main.banner-mode = off\nlogging.level.root=error\n    \n################ MSPS DB Configuration ################\nINTEGRATION_MSPS_DBSERVER_URL=xxxxxxx\nMSPS_DB_INTEGRATED_SECURTY =false\nspring.datasource.driverClassName=com.microsoft.sqlserver.jdbc.SQLServerDriver\nspring.datasource.url=jdbc:sqlserver://${INTEGRATION_MSPS_DBSERVER_URL};databaseName=ACN_MSPSJiraInteg;integratedSecurity=${MSPS_DB_INTEGRATED_SECURTY};\nspring.datasource.username= xxxxx\nspring.datasource.password=xxxxx\n</code></pre>\n<p>I have checked the java version , dependencies, the credentials in property file everything is correct but still im not able to fetch the keyvault value in my actual project.</p>\n<pre><code>@SpringBootApplication\npublic class JiraMspsUtilityApplication implements CommandLineRunner {\n    \n    @Value(&quot;${datafeed-sample-value}&quot;)\n     private static String keyvault_value;\n\n    private static final Logger loggerForWorkitemMetrics = LoggerFactory.getLogger(&quot;metricsUpdatAppender&quot;);\n    private static final Logger LoggerForSharedPlanUpdate = LoggerFactory.getLogger(&quot;sharedPlanUpdateAppender&quot;);\n\n    @Autowired\n    ConfigProperties configProp;\n\n    @Autowired\n    JIRAMSPSService jiraMspsService;\n\n    private static final Logger logger = LoggerFactory.getLogger(&quot;JiraMspsUtilityApplication&quot;);\n\n    static {\n        \n        System.out.println(&quot;key vault value &quot;+ keyvault_value);\n        logger.info(&quot;key vault value &quot;+ keyvault_value);\n        \n        boolean isExistEC = false;\n        Provider[] providers = Security.getProviders();\n        for (Provider provider : providers) {\n            logger.info(&quot;CRYPTO provider: &quot; + provider.getName().toString());\n            Set&lt;Provider.Service&gt; services = provider.getServices();\n            for (Provider.Service service : services) {\n                logger.info(&quot;CRYPTO algorithm: &quot; + service.getAlgorithm());\n                if (service.getAlgorithm().equals(&quot;EC&quot;)) {\n                    isExistEC = true;\n                }\n            }\n        }\n        if (isExistEC) {\n            logger.info(&quot;BC security provider not added for EC algorithm as JRE already able to find it&quot;);\n        } else {\n            Security.addProvider(new BouncyCastleProvider());\n            logger.info(&quot;BC security provider added for EC algorithm&quot;);\n        }\n    }\n    \n    public static void main(String[] args) {\n        SpringApplication app = new SpringApplication(JiraMspsUtilityApplication.class);\n\n        app.run(args);\n        \n        System.out.println(String.format(&quot;\\n1. Key Valut value stored in Azure Key Vault:\\n%s\\n&quot;,keyvault_value));\n        logger.info(&quot;\\n1. Key Valut value stored in Azure Key Vault:\\n%s\\n&quot;,keyvault_value);\n        \n    }\n\n    @Override\n    public void run(String... args) throws IOException {\n\n     System.out.println(String.format(&quot;\\n2. Key Valut value stored in Azure Key Vault:\\n%s\\n&quot;,keyvault_value));\n         \n         logger.info(&quot;\\n2. Key Valut value stored in Azure Key Vault:\\n%s\\n&quot;,keyvault_value);\n\n        if (args.length == 0) {\n            loggerForWorkitemMetrics.info(&quot;There were no commandline arguments passed&quot;);\n            LoggerForSharedPlanUpdate.info(&quot;There were no commandline arguments passed&quot;);\n            System.exit(1);\n        } else if (args.length &gt; 1) {\n            loggerForWorkitemMetrics.info(&quot;More than one argument passed&quot;);\n            LoggerForSharedPlanUpdate.info(&quot;More than one argument passed&quot;);\n            System.exit(1);\n        } else {\n\n            if (Integer.parseInt(args[0]) == 0) {\n                boolean flag = jiraMspsService.updateWorkRequestMetricsInJira();\n                if (flag) {\n                    System.exit(0);\n                } else {\n                    loggerForWorkitemMetrics.info(&quot;WORK REQUEST METRICS UPDATE PROCESS INCOMPLETE DUE TO ERROR&quot;);\n                }\n            } else if (Integer.parseInt(args[0]) == 1) {\n                boolean flag = jiraMspsService.updateSharedWorkplanEntries();\n                if (flag) {\n                    System.exit(0);\n                } else {\n                    LoggerForSharedPlanUpdate.info(&quot;SHARED PLANS UPDATE PROCESS INCOMPLETE DUE TO ERROR&quot;);\n                }\n\n            } else {\n                loggerForWorkitemMetrics.info(\n                        &quot;Invalid argument(s) passed.&quot;);\n                LoggerForSharedPlanUpdate.info(\n                        &quot;Invalid argument(s) passed.&quot;);\n                System.exit(1);\n\n            }\n        }\n    }\n}\n\n    \n    \n    \n    \n    \n  \n</code></pre>\n"},{"tags":["java","android","kotlin","base64"],"comments":[{"owner":{"account_id":4192472,"reputation":1728,"user_id":3434763,"display_name":"TheLibrarian"},"score":2,"creation_date":1693331219,"post_id":77002528,"comment_id":135745685,"body_markdown":"Logcat doesn&#39;t show the full length of the log.","body":"Logcat doesn&#39;t show the full length of the log."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":1,"creation_date":1693332145,"post_id":77002528,"comment_id":135745856,"body_markdown":"Ment to say is: Log.d() or println() does not print the whole sting if the string is very long.","body":"Ment to say is: Log.d() or println() does not print the whole sting if the string is very long."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":2,"creation_date":1693332286,"post_id":77002528,"comment_id":135745874,"body_markdown":"You better save that base64 encoded string to file. Then use the file.","body":"You better save that base64 encoded string to file. Then use the file."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":2,"creation_date":1693332406,"post_id":77002528,"comment_id":135745898,"body_markdown":"`need the file in base64 format because I send it to an API.` Bad api as with base64 encoding you need to transfer 30% more bytes. Try to change the server script to accept the file itself.","body":"<code>need the file in base64 format because I send it to an API.</code> Bad api as with base64 encoding you need to transfer 30% more bytes. Try to change the server script to accept the file itself."},{"owner":{"account_id":19137403,"reputation":23,"user_id":13978119,"display_name":"Luca Strambeanu"},"score":0,"creation_date":1693333068,"post_id":77002528,"comment_id":135746021,"body_markdown":"@blackapps Thanks so much for the tip! I will do that &lt;3.","body":"@blackapps Thanks so much for the tip! I will do that &lt;3."}],"owner":{"account_id":19137403,"reputation":23,"user_id":13978119,"display_name":"Luca Strambeanu"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693376224,"creation_date":1693330990,"question_id":77002528,"body_markdown":"I am trying to parse the file that corresponds to the Uri that I recieve from the Photo Picker intent\r\n\r\nI tried making an InputStream as many people suggested on other questions, but it seems like it only parses one part of the file.  I need the file in base64 format because I send it to an API. For example, this my code:\r\n\r\nThis is the part where I get the Uri from the viewModel and try to read from the file:\r\n\r\n```val fileInputStream = context.contentResolver.openInputStream(viewModel.imageUri.value)\r\n\r\nval fileContents =  fileInputStream?.readAllBytes()\r\nval base64encodedPhoto = Base64.getEncoder().encodeToString(fileContents)\r\nprintln(base64encodedPhoto)\r\nfileInputStream?.close()\r\n```\r\n\r\nWhen I log the result image encoded, this is what I get(encoded photo):\r\n\r\n```\r\n/9j/4AAQSkZJRgABAQEAYABgAAD//gA7Q1JFQVRPUjogZ2QtanBlZyB2MS4wICh1c2luZyBJSkcgSlBFRyB2ODApLCBxdWFsaXR5ID0gODIK/9sAQwAGBAQFBAQGBQUFBgYGBwkOCQkICAkSDQ0KDhUSFhYVEhQUFxohHBcYHxkUFB0nHR8iIyUlJRYcKSwoJCshJCUk/9sAQwEGBgYJCAkRCQkRJBgUGCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQk/8AAEQgCrQQAAwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8A85RugzU6vgDms5JNvNSifPFfEygcLZfD08Pz6VTSWp0PNYuNiC2vIqeAY5quhqeLpz0rnkaWLKHHarsZwOlVIVBOTVtfauabM5FiIkA+9DsfWhCcYp/l5xXO5GEkRGonNTyDAqsSSacdTCQ9O9WIU6VDGueKuxR4AqJysXHUmjTirMS5qBfSrcC5PrXHNmyiWYY+lWUTBpsPGKm71hGWpnUiSJ2qzCdp4qsme3WrUQrSLuyIo0YJdwANT5zVOLg1aj+YV0xl0OiL0HikpcdqdtNVcsYRT1SlVfWngUIEhhXINQsKsnpUEgqJFMgPSopOlTNUMp4rKTM5FNzzSKOaVxyaEXmlFnP1LVs5U9avq4IrPiHGauRGuiMrG0GTDrS9aAvFOC1ZohuKVVp2ynhaEPlGhaZIKnxxUbjNKRViDFFKaaTxWbZDIpDUJyaleo8UU1dmExhpyGkIpUHNehCJiy3BV+LkVTgFX4V6VqoDQ4LmlKmplTNKyVTpjcSACgCpRHThHQqbFyjFWnYp+2lxVcg0hFFONAFLim1oaIRRT8UmKd2oSLQ2kNLSGoZQw0oPFDUlcspWY0SClFNBpc0KRY6lpop2a1TGLTSaCaYzVMpBcY55puc0jHmm5Nc7Zm2OJpM0maAam4XDmg0tNNJsLj1NPU1CDg1IDSjMaZKDRmmbqXNdCkMXrRSZpc1aYCUhpTSUANNIBTjQBS6gGKMc0/bRtrblHYRaeBTQOadQgHA09aipymmpDJaKaDS5rXmGOFOFMFOFUmMfRSA0tUmOwhpRSUqiqTCw8dKWgUV0ILBS0lFNSEKKeKYKcDW0JAPBpQabS5rZSAeDTs1HmjdWikBJupM0zdRmrUxjiaQ0maQmrUhCNUTU8mmN0q1IlkZ60lBpBS5yUAbBqUHIqKnK2OKXOXFjyM0hWnDmg0+csgZaryx1dZc1GyZFPnBmawwaiYc1bmjxVdhQ6hJEaZT2GKjJ5rN1BpinpULipjyKjYVm5miPlLcSOlKrUY4o2EVymLLMUmf/AK1XYuaz4lwRV+L7tc9Qlbl2MjIFWk6VRiJyKvx84NcNQ0LMQ4q3FVWM+lXIEJ5FcdRmciVFOeKtxxcZ9qZHHjqMGpx8oxXJKRk0U50ySKrmPBq/Iu6q7qAauEjnmhIUwa0IUyORVSEZNaMCcelZVZF00NVMNVyBcGohH82asRjBrlnK5sWUGKmHIqJOmamSuVysKSuSovNWou3rUEY79qsRjJFbU5GVrFhBVuHiqqVOpNdKkXFlkLTwuKZGc4qUVre50IAtO28Uq9adiqRaRA4qGReKtFc0x0yKzZLRRYYqvJVyVMVUkWsZGTRVZcmnxx0uzmpokpwRjbUdHEfWrMaYpETipAK6EjSMSQNmnrUWKkWqNESAVIF4zTFqVRxTRqkRuDUZWrDLzTCtKQOJUZe1RNVp0quw5rJmTRC4pmKmZaaErWjG7OeaIitPjTJqTy81LFFyK9SnAzUbk0EdaEKcc1FbxVdRMV1xpGqgKkdK0dTIuKXbmtfZqxfKQBMfWkK1My4ppWocCXEjApMVIVxSYrOSFyjQKeFpVTmnYoUClEYVpCKeaQ1nJFWGUhpTTTWEgGsKSlPNIa5ZjQq0+mCnClFlCilzSUHiqTACaY3SlJprHiolITZGTzTCaUnmm96xbMmxc06mU4GkmNMUmmkikJpuc1E5jHg08Golp4rOMhoeDzTgaYKdXRBlDs0ZpmaXNbJjQ8UU0NS5q0yrBjmnKtIKetXFagkOApCKWg10PYY3FFBpKybJFpRSUopAh4ozTc0ua0TKH5pwNRinA1SKQ8GlzTKXNUmMfTlqMGnA1rFgSUtNFGa3uMXNGaTNKKSZIop2aaKWtIsB2aN1NpM1fMA/dRmmZpatSEOBp2ajzSg1opDH5pCabmjNaKZLBqYx4pxNManzEsYaSlNIaTkJBQKTNANRzlEqmn1CDUgOapTLTHEcUxhT80hFXzlFeVM1SlTBrSZc1WmjzmolITRnOKgbrVqRcGq7CsnMgQdKa1KKQ0uc0R8riPjpUqQ5FTiLAqWOIkdK55VCGiuseO1WI8gVMtvlckUGLC9Kyc7kbDoThqvxDgGqUKE1fiHSuaqyrliFSzY6VqW0XPSqtlDuYe9bdvCFUYArgqyER+WQKNuKuGIYBxUZi55rlZDRWC7s1WkQlyBWgI6iMGXqVKzMZxGwQ+1X41wBTYocDpVpIxisKk7jgrDAp/GnLxT9uOlNINY3uWyaNs1ajGaqRDnBq5EO1YzJROin0qzGMVGi8Cp41yaqDBomQZqVVpsa1Oq5rqiCQ+IVOFqONatRgYFdFONzeCGomak2YFSKlO211KnobpFcpTTGas7M07y80vZBymdLBkdKqS25HatoxA1G9tu7VDoESp3MLySDTlQjtWt9kGelNe1wOlS6LRk6TKcfT3qQCmshU0qGkTYkC09UpF5qaMc00axVwVKmVOKVFzUqrxXRCnc1USEpTGSrJWkKcU5UhtFJlqAx1ddPamFc1g6ZjOJRZKFiqyY+acsddVCnqc8olfyqnhjp4j56VPHHivUhCwRiSwx4xVpVxTYkwKlxXTayNLCgYFOFMB5p69KlSuNIRqbintTetS9w5RjDimipSMimBeazktROI9V4pCKeopWFacug+UhIppqRhUZrmmiWhhppp+KaRXNJCsMoNLigiuaSBIQU6kAp4BqIotITFIaftppFNxBoZTWpx601+lZshkB60maGpua5mzIdmgmm5ozUcw0BNApKVazvcpC9DUic1G1PQ0J2dikiQU7tSClxXTBl2G0UuKCK3iwG0oakNJVhckBp4NQZqRTWsWNMmBpM00GlzWzY7gaUCkFPFRYkAKKXFJTGFFFFMBwpRSLTq0QxaSiimO4ZpwNMNKtVFhclBp2ajBpc1rcdx9OFMBpQaaYD6M03NGatSAdmkpM0Zp8whRS0gp1axY0hKOlKaaaq4MXNGaSkzT5iRSaaTRmg01IkaaaadTSOtJyFYQHmimng0vWo5hig04NimUZpqQ7lgGlNQRvzU2a0jI0TA1G65p+aa1NyGUZ4+tUZBg1rSrkGs65TBzWEnYzZWzTSaDxTSanmLR85JFlTVuC274qaC346fpVyODa\r\n```\r\n\r\nBy decoding it with a tool online, it amounts only to a quarter of the picture, so this:\r\n\r\n[![enter image description here](https://i.stack.imgur.com/c8tiD.jpg)](https://i.stack.imgur.com/c8tiD.jpg)\r\n\r\nInstead, it should have looked like this:\r\n\r\n[![enter image description here](https://i.stack.imgur.com/FWrOj.png)](https://i.stack.imgur.com/FWrOj.png)\r\n\r\nMay you help me? Thanks so much \\&lt;3.","title":"Cannot access entire content of file using Uri provided by Photo Picker(Android)","body":"<p>I am trying to parse the file that corresponds to the Uri that I recieve from the Photo Picker intent</p>\n<p>I tried making an InputStream as many people suggested on other questions, but it seems like it only parses one part of the file.  I need the file in base64 format because I send it to an API. For example, this my code:</p>\n<p>This is the part where I get the Uri from the viewModel and try to read from the file:</p>\n<pre><code>\nval fileContents =  fileInputStream?.readAllBytes()\nval base64encodedPhoto = Base64.getEncoder().encodeToString(fileContents)\nprintln(base64encodedPhoto)\nfileInputStream?.close()\n</code></pre>\n<p>When I log the result image encoded, this is what I get(encoded photo):</p>\n<pre><code>/9j/4AAQSkZJRgABAQEAYABgAAD//gA7Q1JFQVRPUjogZ2QtanBlZyB2MS4wICh1c2luZyBJSkcgSlBFRyB2ODApLCBxdWFsaXR5ID0gODIK/9sAQwAGBAQFBAQGBQUFBgYGBwkOCQkICAkSDQ0KDhUSFhYVEhQUFxohHBcYHxkUFB0nHR8iIyUlJRYcKSwoJCshJCUk/9sAQwEGBgYJCAkRCQkRJBgUGCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQk/8AAEQgCrQQAAwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8A85RugzU6vgDms5JNvNSifPFfEygcLZfD08Pz6VTSWp0PNYuNiC2vIqeAY5quhqeLpz0rnkaWLKHHarsZwOlVIVBOTVtfauabM5FiIkA+9DsfWhCcYp/l5xXO5GEkRGonNTyDAqsSSacdTCQ9O9WIU6VDGueKuxR4AqJysXHUmjTirMS5qBfSrcC5PrXHNmyiWYY+lWUTBpsPGKm71hGWpnUiSJ2qzCdp4qsme3WrUQrSLuyIo0YJdwANT5zVOLg1aj+YV0xl0OiL0HikpcdqdtNVcsYRT1SlVfWngUIEhhXINQsKsnpUEgqJFMgPSopOlTNUMp4rKTM5FNzzSKOaVxyaEXmlFnP1LVs5U9avq4IrPiHGauRGuiMrG0GTDrS9aAvFOC1ZohuKVVp2ynhaEPlGhaZIKnxxUbjNKRViDFFKaaTxWbZDIpDUJyaleo8UU1dmExhpyGkIpUHNehCJiy3BV+LkVTgFX4V6VqoDQ4LmlKmplTNKyVTpjcSACgCpRHThHQqbFyjFWnYp+2lxVcg0hFFONAFLim1oaIRRT8UmKd2oSLQ2kNLSGoZQw0oPFDUlcspWY0SClFNBpc0KRY6lpop2a1TGLTSaCaYzVMpBcY55puc0jHmm5Nc7Zm2OJpM0maAam4XDmg0tNNJsLj1NPU1CDg1IDSjMaZKDRmmbqXNdCkMXrRSZpc1aYCUhpTSUANNIBTjQBS6gGKMc0/bRtrblHYRaeBTQOadQgHA09aipymmpDJaKaDS5rXmGOFOFMFOFUmMfRSA0tUmOwhpRSUqiqTCw8dKWgUV0ILBS0lFNSEKKeKYKcDW0JAPBpQabS5rZSAeDTs1HmjdWikBJupM0zdRmrUxjiaQ0maQmrUhCNUTU8mmN0q1IlkZ60lBpBS5yUAbBqUHIqKnK2OKXOXFjyM0hWnDmg0+csgZaryx1dZc1GyZFPnBmawwaiYc1bmjxVdhQ6hJEaZT2GKjJ5rN1BpinpULipjyKjYVm5miPlLcSOlKrUY4o2EVymLLMUmf/AK1XYuaz4lwRV+L7tc9Qlbl2MjIFWk6VRiJyKvx84NcNQ0LMQ4q3FVWM+lXIEJ5FcdRmciVFOeKtxxcZ9qZHHjqMGpx8oxXJKRk0U50ySKrmPBq/Iu6q7qAauEjnmhIUwa0IUyORVSEZNaMCcelZVZF00NVMNVyBcGohH82asRjBrlnK5sWUGKmHIqJOmamSuVysKSuSovNWou3rUEY79qsRjJFbU5GVrFhBVuHiqqVOpNdKkXFlkLTwuKZGc4qUVre50IAtO28Uq9adiqRaRA4qGReKtFc0x0yKzZLRRYYqvJVyVMVUkWsZGTRVZcmnxx0uzmpokpwRjbUdHEfWrMaYpETipAK6EjSMSQNmnrUWKkWqNESAVIF4zTFqVRxTRqkRuDUZWrDLzTCtKQOJUZe1RNVp0quw5rJmTRC4pmKmZaaErWjG7OeaIitPjTJqTy81LFFyK9SnAzUbk0EdaEKcc1FbxVdRMV1xpGqgKkdK0dTIuKXbmtfZqxfKQBMfWkK1My4ppWocCXEjApMVIVxSYrOSFyjQKeFpVTmnYoUClEYVpCKeaQ1nJFWGUhpTTTWEgGsKSlPNIa5ZjQq0+mCnClFlCilzSUHiqTACaY3SlJprHiolITZGTzTCaUnmm96xbMmxc06mU4GkmNMUmmkikJpuc1E5jHg08Golp4rOMhoeDzTgaYKdXRBlDs0ZpmaXNbJjQ8UU0NS5q0yrBjmnKtIKetXFagkOApCKWg10PYY3FFBpKybJFpRSUopAh4ozTc0ua0TKH5pwNRinA1SKQ8GlzTKXNUmMfTlqMGnA1rFgSUtNFGa3uMXNGaTNKKSZIop2aaKWtIsB2aN1NpM1fMA/dRmmZpatSEOBp2ajzSg1opDH5pCabmjNaKZLBqYx4pxNManzEsYaSlNIaTkJBQKTNANRzlEqmn1CDUgOapTLTHEcUxhT80hFXzlFeVM1SlTBrSZc1WmjzmolITRnOKgbrVqRcGq7CsnMgQdKa1KKQ0uc0R8riPjpUqQ5FTiLAqWOIkdK55VCGiuseO1WI8gVMtvlckUGLC9Kyc7kbDoThqvxDgGqUKE1fiHSuaqyrliFSzY6VqW0XPSqtlDuYe9bdvCFUYArgqyER+WQKNuKuGIYBxUZi55rlZDRWC7s1WkQlyBWgI6iMGXqVKzMZxGwQ+1X41wBTYocDpVpIxisKk7jgrDAp/GnLxT9uOlNINY3uWyaNs1ajGaqRDnBq5EO1YzJROin0qzGMVGi8Cp41yaqDBomQZqVVpsa1Oq5rqiCQ+IVOFqONatRgYFdFONzeCGomak2YFSKlO211KnobpFcpTTGas7M07y80vZBymdLBkdKqS25HatoxA1G9tu7VDoESp3MLySDTlQjtWt9kGelNe1wOlS6LRk6TKcfT3qQCmshU0qGkTYkC09UpF5qaMc00axVwVKmVOKVFzUqrxXRCnc1USEpTGSrJWkKcU5UhtFJlqAx1ddPamFc1g6ZjOJRZKFiqyY+acsddVCnqc8olfyqnhjp4j56VPHHivUhCwRiSwx4xVpVxTYkwKlxXTayNLCgYFOFMB5p69KlSuNIRqbintTetS9w5RjDimipSMimBeazktROI9V4pCKeopWFacug+UhIppqRhUZrmmiWhhppp+KaRXNJCsMoNLigiuaSBIQU6kAp4BqIotITFIaftppFNxBoZTWpx601+lZshkB60maGpua5mzIdmgmm5ozUcw0BNApKVazvcpC9DUic1G1PQ0J2dikiQU7tSClxXTBl2G0UuKCK3iwG0oakNJVhckBp4NQZqRTWsWNMmBpM00GlzWzY7gaUCkFPFRYkAKKXFJTGFFFFMBwpRSLTq0QxaSiimO4ZpwNMNKtVFhclBp2ajBpc1rcdx9OFMBpQaaYD6M03NGatSAdmkpM0Zp8whRS0gp1axY0hKOlKaaaq4MXNGaSkzT5iRSaaTRmg01IkaaaadTSOtJyFYQHmimng0vWo5hig04NimUZpqQ7lgGlNQRvzU2a0jI0TA1G65p+aa1NyGUZ4+tUZBg1rSrkGs65TBzWEnYzZWzTSaDxTSanmLR85JFlTVuC274qaC346fpVyODa\n</code></pre>\n<p>By decoding it with a tool online, it amounts only to a quarter of the picture, so this:</p>\n<p><a href=\"https://i.stack.imgur.com/c8tiD.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/c8tiD.jpg\" alt=\"enter image description here\" /></a></p>\n<p>Instead, it should have looked like this:</p>\n<p><a href=\"https://i.stack.imgur.com/FWrOj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FWrOj.png\" alt=\"enter image description here\" /></a></p>\n<p>May you help me? Thanks so much &lt;3.</p>\n"},{"tags":["java","rest","loopbackjs","strongloop"],"comments":[{"owner":{"account_id":4975165,"reputation":57,"user_id":4001758,"accept_rate":0,"display_name":"Varun Jaiswal"},"score":0,"creation_date":1418929189,"post_id":27553708,"comment_id":43533756,"body_markdown":"Do I need set Access Token in LoopBack?","body":"Do I need set Access Token in LoopBack?"},{"owner":{"account_id":2868196,"reputation":2781,"user_id":2462044,"display_name":"superkhau"},"score":0,"creation_date":1418929493,"post_id":27553708,"comment_id":43533934,"body_markdown":"Did you try using curl to see if a request outside your app works? You will need an authentication token if your endpoint is protected.","body":"Did you try using curl to see if a request outside your app works? You will need an authentication token if your endpoint is protected."},{"owner":{"account_id":4975165,"reputation":57,"user_id":4001758,"accept_rate":0,"display_name":"Varun Jaiswal"},"score":0,"creation_date":1418938449,"post_id":27553708,"comment_id":43538364,"body_markdown":"I haven&#39;t done that yet, was not much familiar with Curl. Will do some research there. Though currently I have not set any access token , so my end point is open, it should be connected with httpPost.","body":"I haven&#39;t done that yet, was not much familiar with Curl. Will do some research there. Though currently I have not set any access token , so my end point is open, it should be connected with httpPost."},{"owner":{"account_id":4975165,"reputation":57,"user_id":4001758,"accept_rate":0,"display_name":"Varun Jaiswal"},"score":0,"creation_date":1418938831,"post_id":27553708,"comment_id":43538573,"body_markdown":"It worked, I saw some other post and found out that I was missing this  stringEntity.setContentType(&quot;application/json&quot;) and now I get response code 200. Now I need to research on how I can protect the protect at LoopBack and communicate with Java.","body":"It worked, I saw some other post and found out that I was missing this  stringEntity.setContentType(&quot;application/json&quot;) and now I get response code 200. Now I need to research on how I can protect the protect at LoopBack and communicate with Java."},{"owner":{"account_id":26743,"reputation":10715,"user_id":69868,"accept_rate":78,"display_name":"Miroslav Bajtoš"},"score":0,"creation_date":1423072736,"post_id":27553708,"comment_id":45003961,"body_markdown":"This is a know problem of the LoopBack SDK for Android, see https://github.com/strongloop/loopback-sdk-android/issues/54","body":"This is a know problem of the LoopBack SDK for Android, see <a href=\"https://github.com/strongloop/loopback-sdk-android/issues/54\" rel=\"nofollow noreferrer\">github.com/strongloop/loopback-sdk-android/issues/54</a>"},{"owner":{"account_id":4646883,"reputation":536,"user_id":3764884,"accept_rate":88,"display_name":"NZMAI"},"score":0,"creation_date":1568618450,"post_id":27553708,"comment_id":102316361,"body_markdown":"Where this code stringEntity.setContentType(&quot;application/json&quot;) should go in?","body":"Where this code stringEntity.setContentType(&quot;application/json&quot;) should go in?"}],"answers":[{"tags":[],"owner":{"account_id":2868196,"reputation":2781,"user_id":2462044,"display_name":"superkhau"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1418943134,"creation_date":1418943134,"answer_id":27557096,"question_id":27553708,"body_markdown":"For authentication, see this example https://github.com/strongloop/loopback-example-access-control.\r\n\r\nAs for the authentication token, you can set it in the query string of the request, like `http://localhost:3000/api/your-model?access_token=TOKEN`","title":"HTTP/1.1 422 Unprocessable Entity Error when sending data to LoopBack from Java client","body":"<p>For authentication, see this example <a href=\"https://github.com/strongloop/loopback-example-access-control\" rel=\"nofollow\">https://github.com/strongloop/loopback-example-access-control</a>.</p>\n\n<p>As for the authentication token, you can set it in the query string of the request, like <code>http://localhost:3000/api/your-model?access_token=TOKEN</code></p>\n"}],"owner":{"account_id":4975165,"reputation":57,"user_id":4001758,"accept_rate":0,"display_name":"Varun Jaiswal"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8266,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1693375260,"creation_date":1418928861,"question_id":27553708,"body_markdown":"I am doing an HttpPost to send data to LoopBack and get the response. I am getting an error as below from LoopBack :\r\n\r\nHTTP/1.1 422 Unprocessable Entity [X-Powered-By: Express, Vary: Origin, Accept-Encoding, Access-Control-Allow-Credentials: true, Content-Type: application/json; charset=utf-8, Content-Length: 1528, Date: Thu, 18 Dec 2014 18:13:45 GMT, Connection: keep-alive]\r\n\r\nSo, what I did in java is created a json from a java object , when I used this JSON in loopback api explorer, the data was inserted and gave me response 200, but doing from Java, I am getting this error. Does anyone have an idea about this.\r\nJava code is as below\r\n\r\n   \r\n\r\n     JSONObject json = new JSONObject(jsonString);\r\n     StringEntity stringEntity = new StringEntity(json.toString());\r\n     HttpClient client = new DefaultHttpClient();\r\n     HttpPost post = new HttpPost(POST_CLAIM_URL);\r\n     post.setEntity(stringEntity);\r\n     HttpResponse httpResponse = null;\r\n     httpResponse = client.execute(post);\r\n\r\n    \r\n\r\n  \r\nI had make sure , I am not adding a duplicate entry.\r\n\r\nRegards,\r\nVarun","title":"HTTP/1.1 422 Unprocessable Entity Error when sending data to LoopBack from Java client","body":"<p>I am doing an HttpPost to send data to LoopBack and get the response. I am getting an error as below from LoopBack :</p>\n\n<p>HTTP/1.1 422 Unprocessable Entity [X-Powered-By: Express, Vary: Origin, Accept-Encoding, Access-Control-Allow-Credentials: true, Content-Type: application/json; charset=utf-8, Content-Length: 1528, Date: Thu, 18 Dec 2014 18:13:45 GMT, Connection: keep-alive]</p>\n\n<p>So, what I did in java is created a json from a java object , when I used this JSON in loopback api explorer, the data was inserted and gave me response 200, but doing from Java, I am getting this error. Does anyone have an idea about this.\nJava code is as below</p>\n\n<pre><code> JSONObject json = new JSONObject(jsonString);\n StringEntity stringEntity = new StringEntity(json.toString());\n HttpClient client = new DefaultHttpClient();\n HttpPost post = new HttpPost(POST_CLAIM_URL);\n post.setEntity(stringEntity);\n HttpResponse httpResponse = null;\n httpResponse = client.execute(post);\n</code></pre>\n\n<p>I had make sure , I am not adding a duplicate entry.</p>\n\n<p>Regards,\nVarun</p>\n"},{"tags":["java","performance","coding-style"],"comments":[{"owner":{"account_id":130073,"reputation":21988,"user_id":329063,"accept_rate":75,"display_name":"glts"},"score":10,"creation_date":1453225651,"post_id":174093,"comment_id":57504893,"body_markdown":"Looks like the question has now been settled in a new blog post by Aleksey Shipilёv, [Arrays of Wisdom of the Ancients](http://shipilev.net/blog/2016/arrays-wisdom-ancients/)!","body":"Looks like the question has now been settled in a new blog post by Aleksey Shipilёv, <a href=\"http://shipilev.net/blog/2016/arrays-wisdom-ancients/\" rel=\"nofollow noreferrer\">Arrays of Wisdom of the Ancients</a>!"},{"owner":{"account_id":69386,"reputation":5102,"user_id":201891,"accept_rate":85,"display_name":"DavidS"},"score":9,"creation_date":1456341451,"post_id":174093,"comment_id":58906207,"body_markdown":"From the blog post: &quot;Bottom line: toArray(new T[0]) seems faster, safer, and contractually cleaner, and therefore should be the default choice now.&quot;","body":"From the blog post: &quot;Bottom line: toArray(new T[0]) seems faster, safer, and contractually cleaner, and therefore should be the default choice now.&quot;"}],"answers":[{"tags":[],"owner":{"account_id":2842,"reputation":31004,"user_id":4023,"accept_rate":89,"display_name":"Matthew Murdoch"},"down_vote_count":4,"up_vote_count":1,"is_accepted":false,"score":-3,"last_activity_date":1223297912,"creation_date":1223297038,"answer_id":174105,"question_id":174093,"body_markdown":"Using &#39;toArray&#39; with the array of the correct size will perform better as the alternative will create first the zero sized array then the array of the correct size. However, as you say the difference is likely to be negligible.\r\n\r\nAlso, note that the javac compiler does not perform any optimization. These days all optimizations are performed by the JIT/HotSpot compilers at runtime. I am not aware of any optimizations around &#39;toArray&#39; in any JVMs.\r\n\r\nThe answer to your question, then, is largely a matter of style but for consistency&#39;s sake should form part of any coding standards you adhere to (whether documented or otherwise).","title":".toArray(new MyClass[0]) or .toArray(new MyClass[myList.size()])?","body":"<p>Using 'toArray' with the array of the correct size will perform better as the alternative will create first the zero sized array then the array of the correct size. However, as you say the difference is likely to be negligible.</p>\n\n<p>Also, note that the javac compiler does not perform any optimization. These days all optimizations are performed by the JIT/HotSpot compilers at runtime. I am not aware of any optimizations around 'toArray' in any JVMs.</p>\n\n<p>The answer to your question, then, is largely a matter of style but for consistency's sake should form part of any coding standards you adhere to (whether documented or otherwise).</p>\n"},{"tags":[],"owner":{"account_id":10279,"reputation":10940,"user_id":19331,"accept_rate":76,"display_name":"Panagiotis Korros"},"down_vote_count":7,"up_vote_count":9,"is_accepted":false,"score":2,"last_activity_date":1223298655,"creation_date":1223297086,"answer_id":174108,"question_id":174093,"body_markdown":"The first case is more efficient.\r\n\r\nThat is because in the second case:\r\n\r\n    MyClass[] arr = myList.toArray(new MyClass[0]);\r\n\r\nthe runtime actually creates an empty array (with zero size) and then inside the toArray method creates another array to fit the actual data. This creation is done using reflection using the following code (taken from jdk1.5.0_10):\r\n\r\n    public &lt;T&gt; T[] toArray(T[] a) {\r\n        if (a.length &lt; size)\r\n            a = (T[])java.lang.reflect.Array.\r\n\t\tnewInstance(a.getClass().getComponentType(), size);\r\n\tSystem.arraycopy(elementData, 0, a, 0, size);\r\n        if (a.length &gt; size)\r\n            a[size] = null;\r\n        return a;\r\n    }\r\n\r\n\r\nBy using the first form, you avoid the creation of a second array and also avoid the reflection code.","title":".toArray(new MyClass[0]) or .toArray(new MyClass[myList.size()])?","body":"<p>The first case is more efficient.</p>\n\n<p>That is because in the second case:</p>\n\n<pre><code>MyClass[] arr = myList.toArray(new MyClass[0]);\n</code></pre>\n\n<p>the runtime actually creates an empty array (with zero size) and then inside the toArray method creates another array to fit the actual data. This creation is done using reflection using the following code (taken from jdk1.5.0_10):</p>\n\n<pre><code>public &lt;T&gt; T[] toArray(T[] a) {\n    if (a.length &lt; size)\n        a = (T[])java.lang.reflect.Array.\n    newInstance(a.getClass().getComponentType(), size);\nSystem.arraycopy(elementData, 0, a, 0, size);\n    if (a.length &gt; size)\n        a[size] = null;\n    return a;\n}\n</code></pre>\n\n<p>By using the first form, you avoid the creation of a second array and also avoid the reflection code.</p>\n"},{"tags":[],"owner":{"account_id":4327,"reputation":5635,"user_id":6449,"display_name":"Dave Cheney"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1223297200,"creation_date":1223297200,"answer_id":174110,"question_id":174093,"body_markdown":"toArray checks that the array passed is of the right size (that is, large enough to fit the elements from your list) and if so, uses that. Consequently if the size of the array provided it smaller than required, a new array will be reflexively created.\r\n\r\nIn your case, an array of size zero, is immutable, so could safely be elevated to a static final variable, which might make your code a little cleaner, which avoids creating the array on each invocation. A new array will be created inside the method anyway, so it&#39;s a readability optimisation.\r\n\r\nArguably the faster version is to pass the array of a correct size, but unless you can _prove_ this code is a performance bottleneck, prefer readability to runtime performance until proven otherwise.","title":".toArray(new MyClass[0]) or .toArray(new MyClass[myList.size()])?","body":"<p>toArray checks that the array passed is of the right size (that is, large enough to fit the elements from your list) and if so, uses that. Consequently if the size of the array provided it smaller than required, a new array will be reflexively created.</p>\n\n<p>In your case, an array of size zero, is immutable, so could safely be elevated to a static final variable, which might make your code a little cleaner, which avoids creating the array on each invocation. A new array will be created inside the method anyway, so it's a readability optimisation.</p>\n\n<p>Arguably the faster version is to pass the array of a correct size, but unless you can <em>prove</em> this code is a performance bottleneck, prefer readability to runtime performance until proven otherwise.</p>\n"},{"tags":[],"owner":{"account_id":7579,"reputation":4402,"user_id":13209,"accept_rate":75,"display_name":"Georgi"},"down_vote_count":12,"up_vote_count":134,"is_accepted":false,"score":122,"last_activity_date":1409181226,"creation_date":1223297848,"answer_id":174146,"question_id":174093,"body_markdown":"As of [ArrayList in Java 5][1], the array will be filled already if it has the right size (or is bigger). Consequently\r\n\r\n    MyClass[] arr = myList.toArray(new MyClass[myList.size()]);\r\n\r\nwill create one array object, fill it and return it to &quot;arr&quot;. On the other hand\r\n\r\n    MyClass[] arr = myList.toArray(new MyClass[0]);\r\n\r\nwill create two arrays. The second one is an array of MyClass with length 0. So there is an object creation for an object that will be thrown away immediately. As far as the source code suggests the compiler / JIT cannot optimize this one so that it is not created. Additionally, using the zero-length object results in casting(s) within the toArray() - method.\r\n\r\nSee the source of ArrayList.toArray():\r\n\r\n    public &lt;T&gt; T[] toArray(T[] a) {\r\n        if (a.length &lt; size)\r\n            // Make a new array of a&#39;s runtime type, but my contents:\r\n            return (T[]) Arrays.copyOf(elementData, size, a.getClass());\r\n        System.arraycopy(elementData, 0, a, 0, size);\r\n        if (a.length &gt; size)\r\n            a[size] = null;\r\n        return a;\r\n    }\r\n\r\nUse the first method so that only one object is created and avoid (implicit but nevertheless expensive) castings.\r\n\r\n  [1]: http://java.sun.com/j2se/1.5.0/docs/api/java/util/ArrayList.html#toArray(T[])","title":".toArray(new MyClass[0]) or .toArray(new MyClass[myList.size()])?","body":"<p>As of <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/util/ArrayList.html#toArray(T[])\" rel=\"noreferrer\">ArrayList in Java 5</a>, the array will be filled already if it has the right size (or is bigger). Consequently</p>\n\n<pre><code>MyClass[] arr = myList.toArray(new MyClass[myList.size()]);\n</code></pre>\n\n<p>will create one array object, fill it and return it to \"arr\". On the other hand</p>\n\n<pre><code>MyClass[] arr = myList.toArray(new MyClass[0]);\n</code></pre>\n\n<p>will create two arrays. The second one is an array of MyClass with length 0. So there is an object creation for an object that will be thrown away immediately. As far as the source code suggests the compiler / JIT cannot optimize this one so that it is not created. Additionally, using the zero-length object results in casting(s) within the toArray() - method.</p>\n\n<p>See the source of ArrayList.toArray():</p>\n\n<pre><code>public &lt;T&gt; T[] toArray(T[] a) {\n    if (a.length &lt; size)\n        // Make a new array of a's runtime type, but my contents:\n        return (T[]) Arrays.copyOf(elementData, size, a.getClass());\n    System.arraycopy(elementData, 0, a, 0, size);\n    if (a.length &gt; size)\n        a[size] = null;\n    return a;\n}\n</code></pre>\n\n<p>Use the first method so that only one object is created and avoid (implicit but nevertheless expensive) castings.</p>\n"},{"tags":[],"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1452080849,"creation_date":1223299045,"answer_id":174244,"question_id":174093,"body_markdown":"Modern JVMs optimise reflective array construction in this case, so the performance difference is tiny. Naming the collection twice in such boilerplate code is not a great idea, so I&#39;d avoid the first method. Another advantage of the second is that it works with synchronised and concurrent collections. If you want to make optimisation, reuse the empty array (empty arrays are immutable and can be shared), or use a profiler(!).","title":".toArray(new MyClass[0]) or .toArray(new MyClass[myList.size()])?","body":"<p>Modern JVMs optimise reflective array construction in this case, so the performance difference is tiny. Naming the collection twice in such boilerplate code is not a great idea, so I'd avoid the first method. Another advantage of the second is that it works with synchronised and concurrent collections. If you want to make optimisation, reuse the empty array (empty arrays are immutable and can be shared), or use a profiler(!).</p>\n"},{"tags":[],"owner":{"account_id":2309641,"reputation":4648,"user_id":2028066,"accept_rate":52,"display_name":"MiguelMunoz"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1376959002,"creation_date":1376959002,"answer_id":18325193,"question_id":174093,"body_markdown":"The second one is marginally mor readable, but there so little improvement that it&#39;s not worth it. The first method is faster, with no disadvantages at runtime, so that&#39;s what I use. But I write it the second way, because it&#39;s faster to type. Then my IDE flags it as a warning and offers to fix it. With a single keystroke, it converts the code from the second type to the first one.\r\n","title":".toArray(new MyClass[0]) or .toArray(new MyClass[myList.size()])?","body":"<p>The second one is marginally mor readable, but there so little improvement that it's not worth it. The first method is faster, with no disadvantages at runtime, so that's what I use. But I write it the second way, because it's faster to type. Then my IDE flags it as a warning and offers to fix it. With a single keystroke, it converts the code from the second type to the first one.</p>\n"},{"tags":[],"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"down_vote_count":0,"up_vote_count":159,"is_accepted":true,"score":159,"last_activity_date":1542106267,"creation_date":1428138326,"answer_id":29444594,"question_id":174093,"body_markdown":"Counterintuitively, the fastest version, on Hotspot 8, is:\r\n\r\n    MyClass[] arr = myList.toArray(new MyClass[0]);\r\n\r\nI have run a micro benchmark using jmh the results and code are below, showing that the version with an empty array consistently outperforms the version with a presized array. Note that if you can reuse an existing array of the correct size, the result may be different.\r\n\r\nBenchmark results (score in microseconds, smaller = better):\r\n\r\n    Benchmark                      (n)  Mode  Samples    Score   Error  Units\r\n    c.a.p.SO29378922.preSize         1  avgt       30    0.025 ▒ 0.001  us/op\r\n    c.a.p.SO29378922.preSize       100  avgt       30    0.155 ▒ 0.004  us/op\r\n    c.a.p.SO29378922.preSize      1000  avgt       30    1.512 ▒ 0.031  us/op\r\n    c.a.p.SO29378922.preSize      5000  avgt       30    6.884 ▒ 0.130  us/op\r\n    c.a.p.SO29378922.preSize     10000  avgt       30   13.147 ▒ 0.199  us/op\r\n    c.a.p.SO29378922.preSize    100000  avgt       30  159.977 ▒ 5.292  us/op\r\n    c.a.p.SO29378922.resize          1  avgt       30    0.019 ▒ 0.000  us/op\r\n    c.a.p.SO29378922.resize        100  avgt       30    0.133 ▒ 0.003  us/op\r\n    c.a.p.SO29378922.resize       1000  avgt       30    1.075 ▒ 0.022  us/op\r\n    c.a.p.SO29378922.resize       5000  avgt       30    5.318 ▒ 0.121  us/op\r\n    c.a.p.SO29378922.resize      10000  avgt       30   10.652 ▒ 0.227  us/op\r\n    c.a.p.SO29378922.resize     100000  avgt       30  139.692 ▒ 8.957  us/op\r\n\r\n&lt;!-- --&gt;\r\n\r\n-------\r\n\r\nFor reference, the code:\r\n\r\n    @State(Scope.Thread)\r\n    @BenchmarkMode(Mode.AverageTime)\r\n    public class SO29378922 {\r\n      @Param({&quot;1&quot;, &quot;100&quot;, &quot;1000&quot;, &quot;5000&quot;, &quot;10000&quot;, &quot;100000&quot;}) int n;\r\n      private final List&lt;Integer&gt; list = new ArrayList&lt;&gt;();\r\n      @Setup public void populateList() {\r\n        for (int i = 0; i &lt; n; i++) list.add(0);\r\n      }\r\n      @Benchmark public Integer[] preSize() {\r\n        return list.toArray(new Integer[n]);\r\n      }\r\n      @Benchmark public Integer[] resize() {\r\n        return list.toArray(new Integer[0]);\r\n      }\r\n    }\r\n\r\n---\r\nYou can find similar results, full analysis, and discussion in the blog post [_Arrays of Wisdom of the Ancients_](https://shipilev.net/blog/2016/arrays-wisdom-ancients/). To summarize: the JVM and JIT compiler contains several optimizations that enable it to cheaply create and initialize a new correctly sized array, and those optimizations can not be used if you create the array yourself.","title":".toArray(new MyClass[0]) or .toArray(new MyClass[myList.size()])?","body":"<p>Counterintuitively, the fastest version, on Hotspot 8, is:</p>\n\n<pre><code>MyClass[] arr = myList.toArray(new MyClass[0]);\n</code></pre>\n\n<p>I have run a micro benchmark using jmh the results and code are below, showing that the version with an empty array consistently outperforms the version with a presized array. Note that if you can reuse an existing array of the correct size, the result may be different.</p>\n\n<p>Benchmark results (score in microseconds, smaller = better):</p>\n\n<pre><code>Benchmark                      (n)  Mode  Samples    Score   Error  Units\nc.a.p.SO29378922.preSize         1  avgt       30    0.025 ▒ 0.001  us/op\nc.a.p.SO29378922.preSize       100  avgt       30    0.155 ▒ 0.004  us/op\nc.a.p.SO29378922.preSize      1000  avgt       30    1.512 ▒ 0.031  us/op\nc.a.p.SO29378922.preSize      5000  avgt       30    6.884 ▒ 0.130  us/op\nc.a.p.SO29378922.preSize     10000  avgt       30   13.147 ▒ 0.199  us/op\nc.a.p.SO29378922.preSize    100000  avgt       30  159.977 ▒ 5.292  us/op\nc.a.p.SO29378922.resize          1  avgt       30    0.019 ▒ 0.000  us/op\nc.a.p.SO29378922.resize        100  avgt       30    0.133 ▒ 0.003  us/op\nc.a.p.SO29378922.resize       1000  avgt       30    1.075 ▒ 0.022  us/op\nc.a.p.SO29378922.resize       5000  avgt       30    5.318 ▒ 0.121  us/op\nc.a.p.SO29378922.resize      10000  avgt       30   10.652 ▒ 0.227  us/op\nc.a.p.SO29378922.resize     100000  avgt       30  139.692 ▒ 8.957  us/op\n</code></pre>\n\n\n\n<hr>\n\n<p>For reference, the code:</p>\n\n<pre><code>@State(Scope.Thread)\n@BenchmarkMode(Mode.AverageTime)\npublic class SO29378922 {\n  @Param({\"1\", \"100\", \"1000\", \"5000\", \"10000\", \"100000\"}) int n;\n  private final List&lt;Integer&gt; list = new ArrayList&lt;&gt;();\n  @Setup public void populateList() {\n    for (int i = 0; i &lt; n; i++) list.add(0);\n  }\n  @Benchmark public Integer[] preSize() {\n    return list.toArray(new Integer[n]);\n  }\n  @Benchmark public Integer[] resize() {\n    return list.toArray(new Integer[0]);\n  }\n}\n</code></pre>\n\n<hr>\n\n<p>You can find similar results, full analysis, and discussion in the blog post <a href=\"https://shipilev.net/blog/2016/arrays-wisdom-ancients/\" rel=\"noreferrer\"><em>Arrays of Wisdom of the Ancients</em></a>. To summarize: the JVM and JIT compiler contains several optimizations that enable it to cheaply create and initialize a new correctly sized array, and those optimizations can not be used if you create the array yourself.</p>\n"},{"tags":[],"owner":{"account_id":1276047,"reputation":963,"user_id":1231300,"accept_rate":86,"display_name":"Антон Антонов"},"down_vote_count":0,"up_vote_count":45,"is_accepted":false,"score":45,"last_activity_date":1693375171,"creation_date":1528364512,"answer_id":50738003,"question_id":174093,"body_markdown":"*From [JetBrains IntelliJ IDEA inspection][1]:*\r\n\r\n&gt; &lt;p&gt;There are two styles to convert a collection to an array:&lt;/p&gt;\r\n&gt; &lt;ul&gt;\r\n&gt;   &lt;li&gt;A pre-sized array, for example, &lt;code&gt;c.toArray(new String[c.size()])&lt;/code&gt;&lt;/li&gt;\r\n&gt;   &lt;li&gt;An empty array, for example,  &lt;code&gt;c.toArray(new String[0])&lt;/code&gt;&lt;/li&gt;\r\n&gt; &lt;/ul&gt;\r\n&gt; &lt;p&gt;In older Java versions, using a pre-sized array was recommended, as the reflection\r\n&gt;   call necessary to create an array of proper size was quite slow.&lt;/p&gt;\r\n&gt; &lt;p&gt;However, since late updates of OpenJDK 6, this call was intrinsified, making\r\n&gt;   the performance of the empty array version the same, and sometimes even better, compared\r\n&gt;   to the pre-sized version. Also, passing a pre-sized array is dangerous for a concurrent or\r\n&gt;   synchronized collection as a data race is possible between the &lt;code&gt;size&lt;/code&gt; and &lt;code&gt;toArray&lt;/code&gt;\r\n&gt;   calls. This may result in extra &lt;code&gt;null&lt;/code&gt;s at the end of the array if the collection was concurrently\r\n&gt;   shrunk during the operation.&lt;/p&gt;\r\n&gt; &lt;!-- tooltip end --&gt;\r\n&gt; &lt;p&gt;Use the inspection options to select the preferred style.&lt;/p&gt;\r\n\r\n\r\n\r\n[1]: https://github.com/JetBrains/intellij-community/blob/master/java/java-impl/src/inspectionDescriptions/ToArrayCallWithZeroLengthArrayArgument.html","title":".toArray(new MyClass[0]) or .toArray(new MyClass[myList.size()])?","body":"<p><em>From <a href=\"https://github.com/JetBrains/intellij-community/blob/master/java/java-impl/src/inspectionDescriptions/ToArrayCallWithZeroLengthArrayArgument.html\" rel=\"nofollow noreferrer\">JetBrains IntelliJ IDEA inspection</a>:</em></p>\n<blockquote>\n<p>There are two styles to convert a collection to an array:</p>\n<ul>\n  <li>A pre-sized array, for example, <code>c.toArray(new String[c.size()])</code></li>\n  <li>An empty array, for example,  <code>c.toArray(new String[0])</code></li>\n</ul>\n<p>In older Java versions, using a pre-sized array was recommended, as the reflection\n  call necessary to create an array of proper size was quite slow.</p>\n<p>However, since late updates of OpenJDK 6, this call was intrinsified, making\n  the performance of the empty array version the same, and sometimes even better, compared\n  to the pre-sized version. Also, passing a pre-sized array is dangerous for a concurrent or\n  synchronized collection as a data race is possible between the <code>size</code> and <code>toArray</code>\n  calls. This may result in extra <code>null</code>s at the end of the array if the collection was concurrently\n  shrunk during the operation.</p>\n\n<p>Use the inspection options to select the preferred style.</p>\n</blockquote>\n"}],"owner":{"account_id":4892,"reputation":28982,"user_id":7581,"accept_rate":84,"display_name":"itsadok"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":94471,"favorite_count":0,"down_vote_count":1,"up_vote_count":220,"accepted_answer_id":29444594,"answer_count":8,"score":219,"last_activity_date":1693375171,"creation_date":1223296680,"question_id":174093,"body_markdown":"Assuming I have an ArrayList\r\n\r\n    ArrayList&lt;MyClass&gt; myList;\r\n\r\nAnd I want to call toArray, is there a performance reason to use\r\n\r\n    MyClass[] arr = myList.toArray(new MyClass[myList.size()]);\r\n\r\nover\r\n\r\n    MyClass[] arr = myList.toArray(new MyClass[0]);\r\n\r\n?\r\n\r\nI prefer the second style, since it&#39;s less verbose, and I assumed that the compiler will make sure the empty array doesn&#39;t really get created, but I&#39;ve been wondering if that&#39;s true.\r\n\r\nOf course, in 99% of the cases it doesn&#39;t make a difference one way or the other, but I&#39;d like to keep a consistent style between my normal code and my optimized inner loops...","title":".toArray(new MyClass[0]) or .toArray(new MyClass[myList.size()])?","body":"<p>Assuming I have an ArrayList</p>\n\n<pre><code>ArrayList&lt;MyClass&gt; myList;\n</code></pre>\n\n<p>And I want to call toArray, is there a performance reason to use</p>\n\n<pre><code>MyClass[] arr = myList.toArray(new MyClass[myList.size()]);\n</code></pre>\n\n<p>over</p>\n\n<pre><code>MyClass[] arr = myList.toArray(new MyClass[0]);\n</code></pre>\n\n<p>?</p>\n\n<p>I prefer the second style, since it's less verbose, and I assumed that the compiler will make sure the empty array doesn't really get created, but I've been wondering if that's true.</p>\n\n<p>Of course, in 99% of the cases it doesn't make a difference one way or the other, but I'd like to keep a consistent style between my normal code and my optimized inner loops...</p>\n"},{"tags":["java","kotlin","visual-studio-code"],"answers":[{"tags":[],"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693375109,"creation_date":1693375109,"answer_id":77005287,"question_id":76999639,"body_markdown":"### First the following need to be installed\r\n\r\n- **Java JDK**: *https://code.visualstudio.com/docs/java/java-tutorial*\r\n\r\n- **Kotlin**: *https://github.com/JetBrains/kotlin/releases*\r\n\r\n   *After unzipping, add the **bin** folder path to the system environment variables `path`*\r\n\r\n- **Kotlin Language**: *https://marketplace.visualstudio.com/items?itemName=mathiasfrohlich.Kotlin*\r\n\r\n- **Code Runner**: *https://marketplace.visualstudio.com/items?itemName=formulahendry.code-runner*\r\n\r\n### How to run Kotlin in VS code\r\n\r\n*Use the play button in the upper right corner or right-click to select **Run Code** to run the code*\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/1Wrg9.png\r\n","title":"Kotlin setup on vscode","body":"<h3>First the following need to be installed</h3>\n<ul>\n<li><p><strong>Java JDK</strong>: <em><a href=\"https://code.visualstudio.com/docs/java/java-tutorial\" rel=\"nofollow noreferrer\">https://code.visualstudio.com/docs/java/java-tutorial</a></em></p>\n</li>\n<li><p><strong>Kotlin</strong>: <em><a href=\"https://github.com/JetBrains/kotlin/releases\" rel=\"nofollow noreferrer\">https://github.com/JetBrains/kotlin/releases</a></em></p>\n<p><em>After unzipping, add the <strong>bin</strong> folder path to the system environment variables <code>path</code></em></p>\n</li>\n<li><p><strong>Kotlin Language</strong>: <em><a href=\"https://marketplace.visualstudio.com/items?itemName=mathiasfrohlich.Kotlin\" rel=\"nofollow noreferrer\">https://marketplace.visualstudio.com/items?itemName=mathiasfrohlich.Kotlin</a></em></p>\n</li>\n<li><p><strong>Code Runner</strong>: <em><a href=\"https://marketplace.visualstudio.com/items?itemName=formulahendry.code-runner\" rel=\"nofollow noreferrer\">https://marketplace.visualstudio.com/items?itemName=formulahendry.code-runner</a></em></p>\n</li>\n</ul>\n<h3>How to run Kotlin in VS code</h3>\n<p><em>Use the play button in the upper right corner or right-click to select <strong>Run Code</strong> to run the code</em></p>\n<p><a href=\"https://i.stack.imgur.com/1Wrg9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1Wrg9.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":25732045,"reputation":11,"user_id":21279700,"display_name":"achraf bouaddi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":191,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1693375109,"creation_date":1693307337,"question_id":76999639,"body_markdown":"I tried to setup the envirment following these steps :\r\n\r\n* installing kotlin compiler and jdk and adding the binaries dir to sys path\r\n*installed the following extensions : coderunner, kotlin v0.2.31 and kotlin language ext\r\n\r\nI kept getting the following error from code runner &#39;code language is not defined or supported&#39;\r\n\r\nVScode output\r\n```\r\nSLF4J: Failed to load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.\r\nSLF4J: Defaulting to no-operation (NOP) logger implementation\r\nSLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.\r\nAug 29, 2023 11:54:27 AM org.eclipse.lsp4j.jsonrpc.services.GenericEndpoint lambda$recursiveFindRpcMethods$2\r\nSEVERE: A delegate object is null, jsonrpc methods of &#39;public default org.eclipse.lsp4j.services.NotebookDocumentService org.eclipse.lsp4j.services.LanguageServer.getNotebookDocumentService()&#39; are ignored\r\n[Info  - 11:54:27 AM] main      Adding script definitions [null]\r\n[Info  - 11:54:27 AM] main      Kotlin Language Server: Version 1.3.3\r\n[Error - 11:54:27 AM] main      A delegate object is null, jsonrpc methods of &#39;public default org.eclipse.lsp4j.services.NotebookDocumentService org.eclipse.lsp4j.services.LanguageServer.getNotebookDocumentService()&#39; are ignored\r\n[Info  - 11:54:27 AM] main      Connected to client\r\n[Info  - 11:54:27 AM] async0    Adding workspace folder Kotlin\r\n[Info  - 11:54:27 AM] async0    Adding 0 files under c:\\Users\\Admin\\Desktop\\VS code\\Kotlin to source path\r\n[Info  - 11:54:27 AM] async0    Searching for dependencies and Java sources in workspace root c:\\Users\\Admin\\Desktop\\VS code\\Kotlin\r\n[Info  - 11:54:27 AM] async0    Could not resolve kotlin-stdlib using Maven: null\r\n[Info  - 11:54:27 AM] async0    Could not resolve kotlin-stdlib using Gradle: C:\\Users\\Admin\\.gradle\\caches\r\n[Info  - 11:54:27 AM] async0    Found kotlinc.bat at C:\\Program Files\\kotlinc\\bin\\kotlinc.bat\r\n[Info  - 11:54:27 AM] async0    Could not resolve kotlin-stdlib using Maven: null\r\n[Info  - 11:54:27 AM] async0    Could not resolve kotlin-stdlib using Gradle: C:\\Users\\Admin\\.gradle\\caches\r\n[Info  - 11:54:27 AM] async0    Found kotlinc.bat at C:\\Program Files\\kotlinc\\bin\\kotlinc.bat\r\n[Info  - 11:54:27 AM] async0    Adding [C:\\Program Files\\kotlinc\\lib\\kotlin-stdlib.jar] to class path\r\n[Info  - 11:54:27 AM] async0    Update build script path\r\n[Info  - 11:54:27 AM] async0    Could not resolve kotlin-stdlib using Maven: null\r\n[Info  - 11:54:27 AM] async0    Could not resolve kotlin-stdlib using Gradle: C:\\Users\\Admin\\.gradle\\caches\r\n[Info  - 11:54:27 AM] async0    Found kotlinc.bat at C:\\Program Files\\kotlinc\\bin\\kotlinc.bat\r\n[Info  - 11:54:27 AM] async0    Adding [C:\\Program Files\\kotlinc\\lib\\kotlin-stdlib.jar] to build script class path\r\n[Info  - 11:54:27 AM] async0    Reinstantiating compiler\r\n[Info  - 11:54:27 AM] async0    Adding script definitions [null]\r\n[Info  - 11:54:28 AM] async0    Adding script definitions [null]\r\n[Info  - 11:54:28 AM] client    Updated configuration: {&quot;kotlin&quot;:{&quot;java&quot;:{&quot;home&quot;:&quot;&quot;},&quot;languageServer&quot;:{&quot;enabled&quot;:true,&quot;path&quot;:&quot;&quot;,&quot;transport&quot;:&quot;stdio&quot;,&quot;port&quot;:0,&quot;debugAttach&quot;:{&quot;enabled&quot;:false,&quot;port&quot;:5005,&quot;autoSuspend&quot;:false}},&quot;trace&quot;:{&quot;server&quot;:&quot;off&quot;},&quot;compiler&quot;:{&quot;jvm&quot;:{&quot;target&quot;:&quot;default&quot;}},&quot;linting&quot;:{&quot;debounceTime&quot;:250},&quot;indexing&quot;:{&quot;enabled&quot;:true},&quot;completion&quot;:{&quot;snippets&quot;:{&quot;enabled&quot;:true}},&quot;debugAdapter&quot;:{&quot;enabled&quot;:true,&quot;path&quot;:&quot;&quot;},&quot;debounceTime&quot;:250,&quot;externalSources&quot;:{&quot;useKlsScheme&quot;:true,&quot;autoConvertToKotlin&quot;:false},&quot;snippetsEnabled&quot;:true}}\r\n[Info  - 11:54:28 AM] debounce0 Linting .../Kotlin/main\r\n[Info  - 11:54:28 AM] async2    Find symbols in .../Kotlin/main\r\n[Info  - 11:54:28 AM] async2    Finished in 517 ms\r\n[Info  - 11:54:31 AM] async2    Ranged semantic tokens in .../Kotlin/main\r\n[Info  - 11:54:31 AM] async2    Found 15 tokens\r\n[Info  - 11:54:31 AM] async2    Finished in 15 ms\r\n[Info  - 11:54:31 AM] async2    Full semantic tokens in .../Kotlin/main\r\n[Info  - 11:54:31 AM] async2    Found 15 tokens\r\n[Info  - 11:54:31 AM] async2    Finished in 1 ms\r\n[Info  - 11:54:32 AM] async3    Updating symbol index...\r\n[Info  - 11:54:32 AM] async3    Updated symbol index in 31 ms! (1 symbol(s))\r\n[Info  - 11:54:50 AM] async2    Hovering at .../Kotlin/main 3:1\r\n[Info  - 11:54:50 AM] async2    Re-parsing main 0:1-3:2\r\n[Info  - 11:54:50 AM] async2    Hovering BLOCK\r\n[Info  - 11:54:50 AM] async2    Re-parsing main 0:1-3:2\r\n[Info  - 11:54:50 AM] async2    Finished in 112 ms\r\n[Info  - 11:55:07 AM] async2    Full semantic tokens in .../Kotlin/main\r\n[Info  - 11:55:07 AM] async2    Found 15 tokens\r\n[Info  - 11:55:07 AM] async2    Finished in 1 ms\r\n[Info  - 11:55:11 AM] async2    Hovering at .../Kotlin/main 2:11\r\n[Info  - 11:55:11 AM] async2    Re-parsing main 0:1-3:2\r\n[Info  - 11:55:11 AM] async2    Hovering CALL_EXPRESSION\r\n[Info  - 11:55:11 AM] async2    Re-parsing main 0:1-3:2\r\n[Info  - 11:55:12 AM] async2    Finished in 1366 ms\r\n[Info  - 11:59:01 AM] async2    Full semantic tokens in .../Kotlin/main\r\n[Info  - 11:59:01 AM] async2    Found 15 tokens\r\n[Info  - 11:59:01 AM] async2    Finished in 1 ms\r\n```\r\nI tried removing the ext and installing them back but still the problem persists`","title":"Kotlin setup on vscode","body":"<p>I tried to setup the envirment following these steps :</p>\n<ul>\n<li>installing kotlin compiler and jdk and adding the binaries dir to sys path\n*installed the following extensions : coderunner, kotlin v0.2.31 and kotlin language ext</li>\n</ul>\n<p>I kept getting the following error from code runner 'code language is not defined or supported'</p>\n<p>VScode output</p>\n<pre><code>SLF4J: Failed to load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.\nSLF4J: Defaulting to no-operation (NOP) logger implementation\nSLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.\nAug 29, 2023 11:54:27 AM org.eclipse.lsp4j.jsonrpc.services.GenericEndpoint lambda$recursiveFindRpcMethods$2\nSEVERE: A delegate object is null, jsonrpc methods of 'public default org.eclipse.lsp4j.services.NotebookDocumentService org.eclipse.lsp4j.services.LanguageServer.getNotebookDocumentService()' are ignored\n[Info  - 11:54:27 AM] main      Adding script definitions [null]\n[Info  - 11:54:27 AM] main      Kotlin Language Server: Version 1.3.3\n[Error - 11:54:27 AM] main      A delegate object is null, jsonrpc methods of 'public default org.eclipse.lsp4j.services.NotebookDocumentService org.eclipse.lsp4j.services.LanguageServer.getNotebookDocumentService()' are ignored\n[Info  - 11:54:27 AM] main      Connected to client\n[Info  - 11:54:27 AM] async0    Adding workspace folder Kotlin\n[Info  - 11:54:27 AM] async0    Adding 0 files under c:\\Users\\Admin\\Desktop\\VS code\\Kotlin to source path\n[Info  - 11:54:27 AM] async0    Searching for dependencies and Java sources in workspace root c:\\Users\\Admin\\Desktop\\VS code\\Kotlin\n[Info  - 11:54:27 AM] async0    Could not resolve kotlin-stdlib using Maven: null\n[Info  - 11:54:27 AM] async0    Could not resolve kotlin-stdlib using Gradle: C:\\Users\\Admin\\.gradle\\caches\n[Info  - 11:54:27 AM] async0    Found kotlinc.bat at C:\\Program Files\\kotlinc\\bin\\kotlinc.bat\n[Info  - 11:54:27 AM] async0    Could not resolve kotlin-stdlib using Maven: null\n[Info  - 11:54:27 AM] async0    Could not resolve kotlin-stdlib using Gradle: C:\\Users\\Admin\\.gradle\\caches\n[Info  - 11:54:27 AM] async0    Found kotlinc.bat at C:\\Program Files\\kotlinc\\bin\\kotlinc.bat\n[Info  - 11:54:27 AM] async0    Adding [C:\\Program Files\\kotlinc\\lib\\kotlin-stdlib.jar] to class path\n[Info  - 11:54:27 AM] async0    Update build script path\n[Info  - 11:54:27 AM] async0    Could not resolve kotlin-stdlib using Maven: null\n[Info  - 11:54:27 AM] async0    Could not resolve kotlin-stdlib using Gradle: C:\\Users\\Admin\\.gradle\\caches\n[Info  - 11:54:27 AM] async0    Found kotlinc.bat at C:\\Program Files\\kotlinc\\bin\\kotlinc.bat\n[Info  - 11:54:27 AM] async0    Adding [C:\\Program Files\\kotlinc\\lib\\kotlin-stdlib.jar] to build script class path\n[Info  - 11:54:27 AM] async0    Reinstantiating compiler\n[Info  - 11:54:27 AM] async0    Adding script definitions [null]\n[Info  - 11:54:28 AM] async0    Adding script definitions [null]\n[Info  - 11:54:28 AM] client    Updated configuration: {&quot;kotlin&quot;:{&quot;java&quot;:{&quot;home&quot;:&quot;&quot;},&quot;languageServer&quot;:{&quot;enabled&quot;:true,&quot;path&quot;:&quot;&quot;,&quot;transport&quot;:&quot;stdio&quot;,&quot;port&quot;:0,&quot;debugAttach&quot;:{&quot;enabled&quot;:false,&quot;port&quot;:5005,&quot;autoSuspend&quot;:false}},&quot;trace&quot;:{&quot;server&quot;:&quot;off&quot;},&quot;compiler&quot;:{&quot;jvm&quot;:{&quot;target&quot;:&quot;default&quot;}},&quot;linting&quot;:{&quot;debounceTime&quot;:250},&quot;indexing&quot;:{&quot;enabled&quot;:true},&quot;completion&quot;:{&quot;snippets&quot;:{&quot;enabled&quot;:true}},&quot;debugAdapter&quot;:{&quot;enabled&quot;:true,&quot;path&quot;:&quot;&quot;},&quot;debounceTime&quot;:250,&quot;externalSources&quot;:{&quot;useKlsScheme&quot;:true,&quot;autoConvertToKotlin&quot;:false},&quot;snippetsEnabled&quot;:true}}\n[Info  - 11:54:28 AM] debounce0 Linting .../Kotlin/main\n[Info  - 11:54:28 AM] async2    Find symbols in .../Kotlin/main\n[Info  - 11:54:28 AM] async2    Finished in 517 ms\n[Info  - 11:54:31 AM] async2    Ranged semantic tokens in .../Kotlin/main\n[Info  - 11:54:31 AM] async2    Found 15 tokens\n[Info  - 11:54:31 AM] async2    Finished in 15 ms\n[Info  - 11:54:31 AM] async2    Full semantic tokens in .../Kotlin/main\n[Info  - 11:54:31 AM] async2    Found 15 tokens\n[Info  - 11:54:31 AM] async2    Finished in 1 ms\n[Info  - 11:54:32 AM] async3    Updating symbol index...\n[Info  - 11:54:32 AM] async3    Updated symbol index in 31 ms! (1 symbol(s))\n[Info  - 11:54:50 AM] async2    Hovering at .../Kotlin/main 3:1\n[Info  - 11:54:50 AM] async2    Re-parsing main 0:1-3:2\n[Info  - 11:54:50 AM] async2    Hovering BLOCK\n[Info  - 11:54:50 AM] async2    Re-parsing main 0:1-3:2\n[Info  - 11:54:50 AM] async2    Finished in 112 ms\n[Info  - 11:55:07 AM] async2    Full semantic tokens in .../Kotlin/main\n[Info  - 11:55:07 AM] async2    Found 15 tokens\n[Info  - 11:55:07 AM] async2    Finished in 1 ms\n[Info  - 11:55:11 AM] async2    Hovering at .../Kotlin/main 2:11\n[Info  - 11:55:11 AM] async2    Re-parsing main 0:1-3:2\n[Info  - 11:55:11 AM] async2    Hovering CALL_EXPRESSION\n[Info  - 11:55:11 AM] async2    Re-parsing main 0:1-3:2\n[Info  - 11:55:12 AM] async2    Finished in 1366 ms\n[Info  - 11:59:01 AM] async2    Full semantic tokens in .../Kotlin/main\n[Info  - 11:59:01 AM] async2    Found 15 tokens\n[Info  - 11:59:01 AM] async2    Finished in 1 ms\n</code></pre>\n<p>I tried removing the ext and installing them back but still the problem persists`</p>\n"},{"tags":["java","spring-boot","apache-kafka","apache-kafka-streams"],"answers":[{"tags":[],"owner":{"account_id":4243,"reputation":1301824,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1693374918,"creation_date":1693290896,"answer_id":76997846,"question_id":76949239,"body_markdown":"From the documentation you are referring to, the distinction between [user topics](https://kafka.apache.org/10/documentation/streams/developer-guide/manage-topics#streams-developer-guide-topics-user) vs. [internal topics](https://kafka.apache.org/10/documentation/streams/developer-guide/manage-topics#streams-developer-guide-topics-internal) is clear: User topics must be created manually, while internal topics are managed by Kafka Streams itself. Your issue deals with internal topics.\r\n\r\nThe documentation states that if security is enabled on Kafka brokers, admin permissions must be granted, so the application can create internal topics. Make sure that your ACLs grant these permissions specifically for the internal topics. That might be where your issue of &quot;`not authorized to access topics: [application id]`&quot; could arise.  \r\nSee &quot;[Required ACL setting for secure Kafka clusters](https://kafka.apache.org/34/documentation/streams/developer-guide/security.html#id1)&quot;.\r\n\r\nThe guide also mentions that default broker configurations are applied to internal topics. If needed, you can override these default configurations by adding configurations from [`TopicConfig`](https://kafka.apache.org/34/javadoc/org/apache/kafka/common/config/TopicConfig.html) to your [`StreamsConfig`](https://kafka.apache.org/34/javadoc/org/apache/kafka/streams/StreamsConfig.html) with the appropriate prefix. That may be relevant if you have specific requirements for the internal topics, such as segment time or retention periods.\r\n\r\n----\r\n\r\nThe [OP perplexeddev](https://stackoverflow.com/users/3985332/perplexeddev) adds in [the comments )(https://stackoverflow.com/questions/76949239/kafka-streams-use-manually-created-internal-topics-giving-topicauthorizationexce/76997846#comment135750117_76997846):\r\n\r\n&gt; I thought it had to do with ACLs and I had read the ACL setting document that you have sent earlier, but I somehow missed the last sentence on prefixed resource pattern `--resource-pattern-type prefixed --topic your.application.id --operation All`.  \r\nI added that and now it works.\r\n\r\nThe last sentence was:\r\n\r\n&gt; Since all internal topics as well as the embedded consumer group name are prefixed with the application id, it is recommended to use ACLs on prefixed resource pattern to configure control lists to allow client to manage all topics and consumer groups started with this prefix as `--resource-pattern-type prefixed --topic your.application.id --operation All` (see [KIP-277](https://cwiki.apache.org/confluence/display/KAFKA/KIP-277+-+Fine+Grained+ACL+for+CreateTopics+API) and [KIP-290](https://cwiki.apache.org/confluence/display/KAFKA/KIP-290%3A+Support+for+Prefixed+ACLs) for details). ","title":"Kafka Streams use manually created internal topics giving TopicAuthorizationException","body":"<p>From the documentation you are referring to, the distinction between <a href=\"https://kafka.apache.org/10/documentation/streams/developer-guide/manage-topics#streams-developer-guide-topics-user\" rel=\"nofollow noreferrer\">user topics</a> vs. <a href=\"https://kafka.apache.org/10/documentation/streams/developer-guide/manage-topics#streams-developer-guide-topics-internal\" rel=\"nofollow noreferrer\">internal topics</a> is clear: User topics must be created manually, while internal topics are managed by Kafka Streams itself. Your issue deals with internal topics.</p>\n<p>The documentation states that if security is enabled on Kafka brokers, admin permissions must be granted, so the application can create internal topics. Make sure that your ACLs grant these permissions specifically for the internal topics. That might be where your issue of &quot;<code>not authorized to access topics: [application id]</code>&quot; could arise.<br />\nSee &quot;<a href=\"https://kafka.apache.org/34/documentation/streams/developer-guide/security.html#id1\" rel=\"nofollow noreferrer\">Required ACL setting for secure Kafka clusters</a>&quot;.</p>\n<p>The guide also mentions that default broker configurations are applied to internal topics. If needed, you can override these default configurations by adding configurations from <a href=\"https://kafka.apache.org/34/javadoc/org/apache/kafka/common/config/TopicConfig.html\" rel=\"nofollow noreferrer\"><code>TopicConfig</code></a> to your <a href=\"https://kafka.apache.org/34/javadoc/org/apache/kafka/streams/StreamsConfig.html\" rel=\"nofollow noreferrer\"><code>StreamsConfig</code></a> with the appropriate prefix. That may be relevant if you have specific requirements for the internal topics, such as segment time or retention periods.</p>\n<hr />\n<p>The <a href=\"https://stackoverflow.com/users/3985332/perplexeddev\">OP perplexeddev</a> adds in [the comments )(https://stackoverflow.com/questions/76949239/kafka-streams-use-manually-created-internal-topics-giving-topicauthorizationexce/76997846#comment135750117_76997846):</p>\n<blockquote>\n<p>I thought it had to do with ACLs and I had read the ACL setting document that you have sent earlier, but I somehow missed the last sentence on prefixed resource pattern <code>--resource-pattern-type prefixed --topic your.application.id --operation All</code>.<br />\nI added that and now it works.</p>\n</blockquote>\n<p>The last sentence was:</p>\n<blockquote>\n<p>Since all internal topics as well as the embedded consumer group name are prefixed with the application id, it is recommended to use ACLs on prefixed resource pattern to configure control lists to allow client to manage all topics and consumer groups started with this prefix as <code>--resource-pattern-type prefixed --topic your.application.id --operation All</code> (see <a href=\"https://cwiki.apache.org/confluence/display/KAFKA/KIP-277+-+Fine+Grained+ACL+for+CreateTopics+API\" rel=\"nofollow noreferrer\">KIP-277</a> and <a href=\"https://cwiki.apache.org/confluence/display/KAFKA/KIP-290%3A+Support+for+Prefixed+ACLs\" rel=\"nofollow noreferrer\">KIP-290</a> for details).</p>\n</blockquote>\n"}],"owner":{"account_id":4949942,"reputation":827,"user_id":3985332,"accept_rate":45,"display_name":"perplexedDev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":240,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76997846,"answer_count":1,"score":1,"last_activity_date":1693374918,"creation_date":1692660369,"question_id":76949239,"body_markdown":"I use KStreams to consume data from a topic, do some logic on the data and write to KTable. Due to security reasons, the application cannot be given the permission to create the internal topics. \r\nBased on the documentation from [here][1] I understand we can create the topics manually and the application will use those manually created topics.\r\n\r\nI created the internal topics manually, made sure the partition count, replication factor is same as the input topic. I created ACL (operation all) for the application-id set in the application.\r\nHowever when I run the application i get the exception:\r\n\r\n    stream-thread [main] Unexpected error during topic description for test-KSTREAM-REDUCE-STATE-STORE-0000000004-changelog.\r\n    Error message was: org.apache.kafka.common.errors.TopicAuthorizationException: Topic authorization failed.\r\n     [Consumer clientId=test-3ed0ce81-765e-45da-bf30-345c83c35e6d-StreamThread-1-consumer, groupId=test1] Rebalance failed.\r\n    \r\n    org.apache.kafka.streams.errors.StreamsException: Could not create topic test-KSTREAM-REDUCE-STATE-STORE-0000000004-changelog.\r\n    \tat org.apache.kafka.streams.processor.internals.InternalTopicManager.getNumPartitions(InternalTopicManager.java) ~[kafka-streams-2.8.1.jar!/:na]\r\n    \tat org.apache.kafka.streams.processor.internals.InternalTopicManager.validateTopics(InternalTopicManager.java) ~[kafka-streams-2.8.1.jar!/:na]\r\n\r\nI saw [this][2] article on registering the internal topic with stream. However, I was not able to figure out the code to add the topic configuration to the stream.\r\nI looked in to [StreamConfig.Topic_Prefix][3] configurations but didn&#39;t find the option to set the internal topic name. \r\n\r\nCan some one help in understanding what I am missing here?  \r\n\r\n\r\n  [1]: https://kafka.apache.org/10/documentation/streams/developer-guide/security#:~:text=To%20avoid%20providing%20this%20permission%20to%20your%20application%2C%20you%20can%20create%20the%20required%20internal%20topics%20manually.\r\n  [2]: https://dev.to/ananddas/kafka-streams-disable-internal-topic-creation-454m#:~:text=Register%20the%20internal%20topics%20with%20the%20Streams%20instance\r\n  [3]: https://kafka.apache.org/10/documentation/streams/developer-guide/manage-topics#:~:text=any%20configs%20from-,TopicConfig,-to%20your%20StreamsConfig","title":"Kafka Streams use manually created internal topics giving TopicAuthorizationException","body":"<p>I use KStreams to consume data from a topic, do some logic on the data and write to KTable. Due to security reasons, the application cannot be given the permission to create the internal topics.\nBased on the documentation from <a href=\"https://kafka.apache.org/10/documentation/streams/developer-guide/security#:%7E:text=To%20avoid%20providing%20this%20permission%20to%20your%20application%2C%20you%20can%20create%20the%20required%20internal%20topics%20manually.\" rel=\"nofollow noreferrer\">here</a> I understand we can create the topics manually and the application will use those manually created topics.</p>\n<p>I created the internal topics manually, made sure the partition count, replication factor is same as the input topic. I created ACL (operation all) for the application-id set in the application.\nHowever when I run the application i get the exception:</p>\n<pre><code>stream-thread [main] Unexpected error during topic description for test-KSTREAM-REDUCE-STATE-STORE-0000000004-changelog.\nError message was: org.apache.kafka.common.errors.TopicAuthorizationException: Topic authorization failed.\n [Consumer clientId=test-3ed0ce81-765e-45da-bf30-345c83c35e6d-StreamThread-1-consumer, groupId=test1] Rebalance failed.\n\norg.apache.kafka.streams.errors.StreamsException: Could not create topic test-KSTREAM-REDUCE-STATE-STORE-0000000004-changelog.\n    at org.apache.kafka.streams.processor.internals.InternalTopicManager.getNumPartitions(InternalTopicManager.java) ~[kafka-streams-2.8.1.jar!/:na]\n    at org.apache.kafka.streams.processor.internals.InternalTopicManager.validateTopics(InternalTopicManager.java) ~[kafka-streams-2.8.1.jar!/:na]\n</code></pre>\n<p>I saw <a href=\"https://dev.to/ananddas/kafka-streams-disable-internal-topic-creation-454m#:%7E:text=Register%20the%20internal%20topics%20with%20the%20Streams%20instance\" rel=\"nofollow noreferrer\">this</a> article on registering the internal topic with stream. However, I was not able to figure out the code to add the topic configuration to the stream.\nI looked in to <a href=\"https://kafka.apache.org/10/documentation/streams/developer-guide/manage-topics#:%7E:text=any%20configs%20from-,TopicConfig,-to%20your%20StreamsConfig\" rel=\"nofollow noreferrer\">StreamConfig.Topic_Prefix</a> configurations but didn't find the option to set the internal topic name.</p>\n<p>Can some one help in understanding what I am missing here?</p>\n"},{"tags":["java","arrays","collections","boxing","autoboxing"],"comments":[{"owner":{"account_id":6145873,"reputation":83,"user_id":4791885,"display_name":"Saroj Kumar Sahoo"},"score":0,"creation_date":1589540474,"post_id":1073919,"comment_id":109341198,"body_markdown":"We can make use of IntStream.Of(array).collect(Collectors.toList)","body":"We can make use of IntStream.Of(array).collect(Collectors.toList)"},{"owner":{"account_id":13546471,"reputation":3498,"user_id":9772691,"display_name":"John McClane"},"score":1,"creation_date":1602462320,"post_id":1073919,"comment_id":113719656,"body_markdown":"@SarojKumarSahoo There is no one-argument `collect` in `IntStream`.","body":"@SarojKumarSahoo There is no one-argument <code>collect</code> in <code>IntStream</code>."},{"owner":{"account_id":14062814,"reputation":1724,"user_id":10158398,"display_name":"Zhou Haibo"},"score":1,"creation_date":1616575053,"post_id":1073919,"comment_id":118042245,"body_markdown":"There is no `build-in` way to do it. You must do it manually, declare an ArrayList and add each value in the int Array to ArrayList. What a miss!","body":"There is no <code>build-in</code> way to do it. You must do it manually, declare an ArrayList and add each value in the int Array to ArrayList. What a miss!"}],"answers":[{"tags":[],"owner":{"account_id":21211,"reputation":43403,"user_id":51382,"accept_rate":87,"display_name":"willcodejavaforfood"},"down_vote_count":9,"up_vote_count":360,"is_accepted":true,"score":351,"last_activity_date":1571465854,"creation_date":1246535525,"answer_id":1073933,"question_id":1073919,"body_markdown":"There is no shortcut for converting from `int[]` to `List&lt;Integer&gt;` as `Arrays.asList` does not deal with boxing and will just create a `List&lt;int[]&gt;` which is not what you want. You have to make a utility method.\r\n\r\n    int[] ints = {1, 2, 3};\r\n    List&lt;Integer&gt; intList = new ArrayList&lt;Integer&gt;(ints.length);\r\n    for (int i : ints)\r\n    {\r\n        intList.add(i);\r\n    }","title":"How to convert int[] into List&lt;Integer&gt; in Java?","body":"<p>There is no shortcut for converting from <code>int[]</code> to <code>List&lt;Integer&gt;</code> as <code>Arrays.asList</code> does not deal with boxing and will just create a <code>List&lt;int[]&gt;</code> which is not what you want. You have to make a utility method.</p>\n\n<pre><code>int[] ints = {1, 2, 3};\nList&lt;Integer&gt; intList = new ArrayList&lt;Integer&gt;(ints.length);\nfor (int i : ints)\n{\n    intList.add(i);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":43577,"reputation":54129,"user_id":127479,"accept_rate":95,"display_name":"Adamski"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1246536519,"creation_date":1246536519,"answer_id":1074002,"question_id":1073919,"body_markdown":"It&#39;s also worth checking out [this bug report][1], which was closed with reason &quot;Not a defect&quot; and the following text:\r\n\r\n&quot;Autoboxing of entire arrays is not specified behavior, for good reason.\r\nIt can be prohibitively expensive for large arrays.&quot;\r\n\r\n\r\n  [1]: https://bugs.java.com/bugdatabase/view_bug?bug_id=4993464","title":"How to convert int[] into List&lt;Integer&gt; in Java?","body":"<p>It's also worth checking out <a href=\"https://bugs.java.com/bugdatabase/view_bug?bug_id=4993464\" rel=\"nofollow noreferrer\">this bug report</a>, which was closed with reason &quot;Not a defect&quot; and the following text:</p>\n<p>&quot;Autoboxing of entire arrays is not specified behavior, for good reason.\nIt can be prohibitively expensive for large arrays.&quot;</p>\n"},{"tags":[],"owner":{"account_id":8636,"reputation":28679,"user_id":15649,"accept_rate":62,"display_name":"Leonel"},"down_vote_count":3,"up_vote_count":120,"is_accepted":false,"score":117,"last_activity_date":1246536716,"creation_date":1246536716,"answer_id":1074017,"question_id":1073919,"body_markdown":"Arrays.asList will not work as some of the other answers expect.\r\n\r\nThis code will **not** create a list of 10 integers. It will print **1**, not **10**:\r\n\r\n    int arr[] = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };\r\n    List lst = Arrays.asList(arr);\r\n    System.out.println(lst.size());\r\n\r\nThis will create a list of integers:\r\n\r\n    List&lt;Integer&gt; lst = Arrays.asList(1, 2, 3, 4, 5, 6, 7, 8, 9, 10);\r\n\r\nIf you already have the array of ints, there is not quick way to convert, you&#39;re better off with the loop.\r\n\r\nOn the other hand, if your array has Objects, not primitives in it, Arrays.asList will work:\r\n\r\n    String str[] = { &quot;Homer&quot;, &quot;Marge&quot;, &quot;Bart&quot;, &quot;Lisa&quot;, &quot;Maggie&quot; };\r\n    List&lt;String&gt; lst = Arrays.asList(str);\r\n","title":"How to convert int[] into List&lt;Integer&gt; in Java?","body":"<p>Arrays.asList will not work as some of the other answers expect.</p>\n\n<p>This code will <strong>not</strong> create a list of 10 integers. It will print <strong>1</strong>, not <strong>10</strong>:</p>\n\n<pre><code>int arr[] = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };\nList lst = Arrays.asList(arr);\nSystem.out.println(lst.size());\n</code></pre>\n\n<p>This will create a list of integers:</p>\n\n<pre><code>List&lt;Integer&gt; lst = Arrays.asList(1, 2, 3, 4, 5, 6, 7, 8, 9, 10);\n</code></pre>\n\n<p>If you already have the array of ints, there is not quick way to convert, you're better off with the loop.</p>\n\n<p>On the other hand, if your array has Objects, not primitives in it, Arrays.asList will work:</p>\n\n<pre><code>String str[] = { \"Homer\", \"Marge\", \"Bart\", \"Lisa\", \"Maggie\" };\nList&lt;String&gt; lst = Arrays.asList(str);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":32251,"reputation":114942,"user_id":89266,"accept_rate":91,"display_name":"dfa"},"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1246537476,"creation_date":1246537476,"answer_id":1074055,"question_id":1073919,"body_markdown":"give a try to this class:\r\n\r\n    class PrimitiveWrapper&lt;T&gt; extends AbstractList&lt;T&gt; {\r\n\r\n        private final T[] data;\r\n\r\n        private PrimitiveWrapper(T[] data) {\r\n            this.data = data; // you can clone this array for preventing aliasing\r\n        }\r\n\r\n        public static &lt;T&gt; List&lt;T&gt; ofIntegers(int... data) {\r\n            return new PrimitiveWrapper(toBoxedArray(Integer.class, data));\r\n        }\r\n      \r\n        public static &lt;T&gt; List&lt;T&gt; ofCharacters(char... data) {\r\n            return new PrimitiveWrapper(toBoxedArray(Character.class, data));\r\n        }\r\n        \r\n        public static &lt;T&gt; List&lt;T&gt; ofDoubles(double... data) {\r\n            return new PrimitiveWrapper(toBoxedArray(Double.class, data));\r\n        }  \r\n\r\n        // ditto for byte, float, boolean, long\r\n\r\n        private static &lt;T&gt; T[] toBoxedArray(Class&lt;T&gt; boxClass, Object components) {\r\n            final int length = Array.getLength(components);\r\n            Object res = Array.newInstance(boxClass, length);\r\n\r\n            for (int i = 0; i &lt; length; i++) {\r\n                Array.set(res, i, Array.get(components, i));\r\n            }\r\n\r\n            return (T[]) res;\r\n        }\r\n\r\n        @Override\r\n        public T get(int index) {\r\n            return data[index];\r\n        }\r\n\r\n        @Override\r\n        public int size() {\r\n            return data.length;\r\n        }\r\n    }\r\n\r\n\r\ntestcase:\r\n\r\n    List&lt;Integer&gt; ints = PrimitiveWrapper.ofIntegers(10, 20);\r\n    List&lt;Double&gt; doubles = PrimitiveWrapper.ofDoubles(10, 20);\r\n    // etc\r\n\r\n","title":"How to convert int[] into List&lt;Integer&gt; in Java?","body":"<p>give a try to this class:</p>\n\n<pre><code>class PrimitiveWrapper&lt;T&gt; extends AbstractList&lt;T&gt; {\n\n    private final T[] data;\n\n    private PrimitiveWrapper(T[] data) {\n        this.data = data; // you can clone this array for preventing aliasing\n    }\n\n    public static &lt;T&gt; List&lt;T&gt; ofIntegers(int... data) {\n        return new PrimitiveWrapper(toBoxedArray(Integer.class, data));\n    }\n\n    public static &lt;T&gt; List&lt;T&gt; ofCharacters(char... data) {\n        return new PrimitiveWrapper(toBoxedArray(Character.class, data));\n    }\n\n    public static &lt;T&gt; List&lt;T&gt; ofDoubles(double... data) {\n        return new PrimitiveWrapper(toBoxedArray(Double.class, data));\n    }  \n\n    // ditto for byte, float, boolean, long\n\n    private static &lt;T&gt; T[] toBoxedArray(Class&lt;T&gt; boxClass, Object components) {\n        final int length = Array.getLength(components);\n        Object res = Array.newInstance(boxClass, length);\n\n        for (int i = 0; i &lt; length; i++) {\n            Array.set(res, i, Array.get(components, i));\n        }\n\n        return (T[]) res;\n    }\n\n    @Override\n    public T get(int index) {\n        return data[index];\n    }\n\n    @Override\n    public int size() {\n        return data.length;\n    }\n}\n</code></pre>\n\n<p>testcase:</p>\n\n<pre><code>List&lt;Integer&gt; ints = PrimitiveWrapper.ofIntegers(10, 20);\nList&lt;Double&gt; doubles = PrimitiveWrapper.ofDoubles(10, 20);\n// etc\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8569,"reputation":12752,"user_id":15514,"accept_rate":95,"display_name":"Christoffer"},"down_vote_count":0,"up_vote_count":56,"is_accepted":false,"score":56,"last_activity_date":1462084190,"creation_date":1246537619,"answer_id":1074063,"question_id":1073919,"body_markdown":"I&#39;ll add another answer with a different method; no loop but an anonymous class that will utilize the autoboxing features:\r\n\r\n    public List&lt;Integer&gt; asList(final int[] is)\r\n    {\r\n        return new AbstractList&lt;Integer&gt;() {\r\n                public Integer get(int i) { return is[i]; }\r\n                public int size() { return is.length; }\r\n        };\r\n    }\r\n","title":"How to convert int[] into List&lt;Integer&gt; in Java?","body":"<p>I'll add another answer with a different method; no loop but an anonymous class that will utilize the autoboxing features:</p>\n\n<pre><code>public List&lt;Integer&gt; asList(final int[] is)\n{\n    return new AbstractList&lt;Integer&gt;() {\n            public Integer get(int i) { return is[i]; }\n            public int size() { return is.length; }\n    };\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19015,"reputation":16919,"user_id":44124,"accept_rate":84,"display_name":"Kannan Ekanath"},"down_vote_count":1,"up_vote_count":47,"is_accepted":false,"score":46,"last_activity_date":1462084230,"creation_date":1270814492,"answer_id":2607167,"question_id":1073919,"body_markdown":"The smallest piece of code would be:\r\n\r\n    public List&lt;Integer&gt; myWork(int[] array) {\r\n        return Arrays.asList(ArrayUtils.toObject(array));\r\n    }\r\n\r\nwhere ArrayUtils comes from commons-lang :)","title":"How to convert int[] into List&lt;Integer&gt; in Java?","body":"<p>The smallest piece of code would be:</p>\n\n<pre><code>public List&lt;Integer&gt; myWork(int[] array) {\n    return Arrays.asList(ArrayUtils.toObject(array));\n}\n</code></pre>\n\n<p>where ArrayUtils comes from commons-lang :)</p>\n"},{"tags":[],"owner":{"account_id":149335,"reputation":2414,"user_id":361752,"display_name":"louisgab"},"down_vote_count":0,"up_vote_count":194,"is_accepted":false,"score":194,"last_activity_date":1340817815,"creation_date":1276026827,"answer_id":3000758,"question_id":1073919,"body_markdown":"Also from [guava libraries][1]... com.google.common.primitives.Ints:\r\n\r\n    List&lt;Integer&gt; Ints.asList(int...)\r\n\r\n\r\n  [1]: http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/primitives/Ints.html","title":"How to convert int[] into List&lt;Integer&gt; in Java?","body":"<p>Also from <a href=\"http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/primitives/Ints.html\" rel=\"noreferrer\">guava libraries</a>... com.google.common.primitives.Ints:</p>\n\n<pre><code>List&lt;Integer&gt; Ints.asList(int...)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":954960,"reputation":13272,"user_id":980442,"accept_rate":25,"display_name":"Daniel De Le&#243;n"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1685803901,"creation_date":1339313328,"answer_id":10967033,"question_id":1073919,"body_markdown":"The best shot:\r\n\r\n```java\r\n    /**\r\n     * Integer modifiable fixed length list of an int array or many int&#39;s.\r\n     *\r\n     * @author Daniel De Leon.\r\n     */\r\n    public class IntegerListWrap extends AbstractList&lt;Integer&gt; {\r\n    \r\n        int[] data;\r\n    \r\n        public IntegerListWrap(int... data) {\r\n            this.data = data;\r\n        }\r\n    \r\n        @Override\r\n        public Integer get(int index) {\r\n            return data[index];\r\n        }\r\n    \r\n        @Override\r\n        public Integer set(int index, Integer element) {\r\n            int r = data[index];\r\n            data[index] = element;\r\n            return r;\r\n        }\r\n    \r\n        @Override\r\n        public int size() {\r\n            return data.length;\r\n        }\r\n    }\r\n```\r\n\r\n - Support get and set.\r\n - No memory data duplication.\r\n - No wasting time in loops.\r\n\r\nExamples:\r\n\r\n    int[] intArray = new int[]{1, 2, 3};\r\n    List&lt;Integer&gt; integerListWrap = new IntegerListWrap(intArray);\r\n    List&lt;Integer&gt; integerListWrap1 = new IntegerListWrap(1, 2, 3);","title":"How to convert int[] into List&lt;Integer&gt; in Java?","body":"<p>The best shot:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    /**\n     * Integer modifiable fixed length list of an int array or many int's.\n     *\n     * @author Daniel De Leon.\n     */\n    public class IntegerListWrap extends AbstractList&lt;Integer&gt; {\n    \n        int[] data;\n    \n        public IntegerListWrap(int... data) {\n            this.data = data;\n        }\n    \n        @Override\n        public Integer get(int index) {\n            return data[index];\n        }\n    \n        @Override\n        public Integer set(int index, Integer element) {\n            int r = data[index];\n            data[index] = element;\n            return r;\n        }\n    \n        @Override\n        public int size() {\n            return data.length;\n        }\n    }\n</code></pre>\n<ul>\n<li>Support get and set.</li>\n<li>No memory data duplication.</li>\n<li>No wasting time in loops.</li>\n</ul>\n<p>Examples:</p>\n<pre><code>int[] intArray = new int[]{1, 2, 3};\nList&lt;Integer&gt; integerListWrap = new IntegerListWrap(intArray);\nList&lt;Integer&gt; integerListWrap1 = new IntegerListWrap(1, 2, 3);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2322260,"reputation":491,"user_id":2037659,"display_name":"user2037659"},"down_vote_count":2,"up_vote_count":39,"is_accepted":false,"score":37,"last_activity_date":1451839466,"creation_date":1398686607,"answer_id":23340648,"question_id":1073919,"body_markdown":"In Java 8 with stream:\r\n\r\n    int[] ints = {1, 2, 3};\r\n    List&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;();\r\n    Collections.addAll(list, Arrays.stream(ints).boxed().toArray(Integer[]::new));\r\n    \r\nor with Collectors\r\n\r\n    List&lt;Integer&gt; list =  Arrays.stream(ints).boxed().collect(Collectors.toList());","title":"How to convert int[] into List&lt;Integer&gt; in Java?","body":"<p>In Java 8 with stream:</p>\n\n<pre><code>int[] ints = {1, 2, 3};\nList&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;();\nCollections.addAll(list, Arrays.stream(ints).boxed().toArray(Integer[]::new));\n</code></pre>\n\n<p>or with Collectors</p>\n\n<pre><code>List&lt;Integer&gt; list =  Arrays.stream(ints).boxed().collect(Collectors.toList());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":395717,"reputation":6603,"user_id":758816,"display_name":"mikeyreilly"},"down_vote_count":0,"up_vote_count":564,"is_accepted":false,"score":564,"last_activity_date":1625269022,"creation_date":1399568386,"answer_id":23548085,"question_id":1073919,"body_markdown":"# Streams\r\n\r\n 1. In Java 8+ you can make a stream of your `int` array. Call either [`Arrays.stream`][1] or [`IntStream.of`][2]. \r\n 2. Call [`IntStream#boxed`][3] to use boxing conversion from `int` primitive to [`Integer`][4] objects. \r\n 3. Collect into a list using `Stream.collect( Collectors.toList() )`. Or more simply in Java 16+, call [`Stream#toList()`][5].\r\n\r\nExample:\r\n\r\n    int[] ints = {1,2,3};\r\n    List&lt;Integer&gt; list = Arrays.stream(ints).boxed().collect(Collectors.toList());\r\n\r\nIn Java 16 and later:\r\n\r\n    List&lt;Integer&gt; list = Arrays.stream(ints).boxed().toList();\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Arrays.html#stream(int%5B%5D)\r\n  [2]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/stream/IntStream.html#of(int...)\r\n  [3]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/stream/IntStream.html#boxed()\r\n  [4]: https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/lang/Integer.html\r\n  [5]: https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/util/stream/Stream.html#toList()","title":"How to convert int[] into List&lt;Integer&gt; in Java?","body":"<h1>Streams</h1>\n<ol>\n<li>In Java 8+ you can make a stream of your <code>int</code> array. Call either <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Arrays.html#stream(int%5B%5D)\" rel=\"noreferrer\"><code>Arrays.stream</code></a> or <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/stream/IntStream.html#of(int...)\" rel=\"noreferrer\"><code>IntStream.of</code></a>.</li>\n<li>Call <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/stream/IntStream.html#boxed()\" rel=\"noreferrer\"><code>IntStream#boxed</code></a> to use boxing conversion from <code>int</code> primitive to <a href=\"https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/lang/Integer.html\" rel=\"noreferrer\"><code>Integer</code></a> objects.</li>\n<li>Collect into a list using <code>Stream.collect( Collectors.toList() )</code>. Or more simply in Java 16+, call <a href=\"https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/util/stream/Stream.html#toList()\" rel=\"noreferrer\"><code>Stream#toList()</code></a>.</li>\n</ol>\n<p>Example:</p>\n<pre><code>int[] ints = {1,2,3};\nList&lt;Integer&gt; list = Arrays.stream(ints).boxed().collect(Collectors.toList());\n</code></pre>\n<p>In Java 16 and later:</p>\n<pre><code>List&lt;Integer&gt; list = Arrays.stream(ints).boxed().toList();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1146772,"reputation":31458,"user_id":1129332,"accept_rate":61,"display_name":"Ilya Gazman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1454138157,"creation_date":1454138157,"answer_id":35099176,"question_id":1073919,"body_markdown":"Here is a generic way to convert array to ArrayList\r\n\r\n    &lt;T&gt; ArrayList&lt;T&gt; toArrayList(Object o, Class&lt;T&gt; type){\r\n        ArrayList&lt;T&gt; objects = new ArrayList&lt;&gt;();\r\n        for (int i = 0; i &lt; Array.getLength(o); i++) {\r\n            //noinspection unchecked\r\n            objects.add((T) Array.get(o, i));\r\n        }\r\n        return objects;\r\n    }\r\n\r\nUsage\r\n\r\n    ArrayList&lt;Integer&gt; list = toArrayList(new int[]{1,2,3}, Integer.class);","title":"How to convert int[] into List&lt;Integer&gt; in Java?","body":"<p>Here is a generic way to convert array to ArrayList</p>\n\n<pre><code>&lt;T&gt; ArrayList&lt;T&gt; toArrayList(Object o, Class&lt;T&gt; type){\n    ArrayList&lt;T&gt; objects = new ArrayList&lt;&gt;();\n    for (int i = 0; i &lt; Array.getLength(o); i++) {\n        //noinspection unchecked\n        objects.add((T) Array.get(o, i));\n    }\n    return objects;\n}\n</code></pre>\n\n<p>Usage</p>\n\n<pre><code>ArrayList&lt;Integer&gt; list = toArrayList(new int[]{1,2,3}, Integer.class);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1712726,"reputation":6528,"user_id":1570415,"display_name":"Donald Raab"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1491007768,"creation_date":1485662842,"answer_id":41917511,"question_id":1073919,"body_markdown":"If you&#39;re open to using a third party library, this will work in [Eclipse Collections][1]:\r\n\r\n    int[] a = {1, 2, 3};\r\n    List&lt;Integer&gt; integers = IntLists.mutable.with(a).collect(i -&gt; i);\r\n    Assert.assertEquals(Lists.mutable.with(1, 2, 3), integers);\r\n\r\nNote: I am a committer for [Eclipse Collections][1].\r\n\r\n\r\n  [1]: https://www.eclipse.org/collections/","title":"How to convert int[] into List&lt;Integer&gt; in Java?","body":"<p>If you're open to using a third party library, this will work in <a href=\"https://www.eclipse.org/collections/\" rel=\"nofollow noreferrer\">Eclipse Collections</a>:</p>\n\n<pre><code>int[] a = {1, 2, 3};\nList&lt;Integer&gt; integers = IntLists.mutable.with(a).collect(i -&gt; i);\nAssert.assertEquals(Lists.mutable.with(1, 2, 3), integers);\n</code></pre>\n\n<p>Note: I am a committer for <a href=\"https://www.eclipse.org/collections/\" rel=\"nofollow noreferrer\">Eclipse Collections</a>.</p>\n"},{"tags":[],"owner":{"account_id":9755346,"reputation":7480,"user_id":7232295,"accept_rate":86,"display_name":"Uddhav P. Gautam"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1502907806,"creation_date":1502907806,"answer_id":45720563,"question_id":1073919,"body_markdown":"       /* Integer[] to List&lt;Integer&gt; */\r\n    \r\n        \r\n    \r\n            Integer[] intArr = { 10, 20, 30, 40, 50, 60, 70, 80, 90, 100 };\r\n            List&lt;Integer&gt; arrList = new ArrayList&lt;&gt;();\r\n            arrList.addAll(Arrays.asList(intArr));\r\n            System.out.println(arrList);\r\n    \r\n    \r\n    /* Integer[] to Collection&lt;Integer&gt; */\r\n        \r\n    \r\n        Integer[] intArr = { 10, 20, 30, 40, 50, 60, 70, 80, 90, 100 };\r\n        Collection&lt;Integer&gt; c = Arrays.asList(intArr);\r\n\r\n\r\n","title":"How to convert int[] into List&lt;Integer&gt; in Java?","body":"<pre><code>   /* Integer[] to List&lt;Integer&gt; */\n\n\n\n        Integer[] intArr = { 10, 20, 30, 40, 50, 60, 70, 80, 90, 100 };\n        List&lt;Integer&gt; arrList = new ArrayList&lt;&gt;();\n        arrList.addAll(Arrays.asList(intArr));\n        System.out.println(arrList);\n\n\n/* Integer[] to Collection&lt;Integer&gt; */\n\n\n    Integer[] intArr = { 10, 20, 30, 40, 50, 60, 70, 80, 90, 100 };\n    Collection&lt;Integer&gt; c = Arrays.asList(intArr);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1789528,"reputation":2426,"user_id":1630255,"accept_rate":50,"display_name":"Neeraj"},"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1509612652,"creation_date":1509612652,"answer_id":47071040,"question_id":1073919,"body_markdown":"In Java 8 : \r\n\r\n    int[] arr = {1,2,3};\r\n    IntStream.of(arr).boxed().collect(Collectors.toList());","title":"How to convert int[] into List&lt;Integer&gt; in Java?","body":"<p>In Java 8 : </p>\n\n<pre><code>int[] arr = {1,2,3};\nIntStream.of(arr).boxed().collect(Collectors.toList());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7069039,"reputation":429,"user_id":5411342,"display_name":"humblefoolish"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1693374363,"creation_date":1521826270,"answer_id":49455403,"question_id":1073919,"body_markdown":"What about this:\r\n\r\n```java\r\nint[] a = {1,2,3};\r\nInteger[] b = ArrayUtils.toObject(a);\r\nList&lt;Integer&gt; c = Arrays.asList(b);\r\n```","title":"How to convert int[] into List&lt;Integer&gt; in Java?","body":"<p>What about this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>int[] a = {1,2,3};\nInteger[] b = ArrayUtils.toObject(a);\nList&lt;Integer&gt; c = Arrays.asList(b);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2149542,"reputation":767,"user_id":1906350,"display_name":"Amitabha Roy"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1524217200,"creation_date":1524217200,"answer_id":49938648,"question_id":1073919,"body_markdown":"Here is a solution:\r\n\r\n    int[] array = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };\r\n    \r\n    Integer[] iArray = Arrays.stream(array).boxed().toArray(Integer[]::new);\r\n    System.out.println(Arrays.toString(iArray));\r\n    \r\n    List&lt;Integer&gt; list = new ArrayList&lt;&gt;();\r\n    Collections.addAll(list, iArray);\r\n    System.out.println(list);\r\n\r\nOutput:\r\n\r\n    [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\r\n    [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]","title":"How to convert int[] into List&lt;Integer&gt; in Java?","body":"<p>Here is a solution:</p>\n\n<pre><code>int[] array = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };\n\nInteger[] iArray = Arrays.stream(array).boxed().toArray(Integer[]::new);\nSystem.out.println(Arrays.toString(iArray));\n\nList&lt;Integer&gt; list = new ArrayList&lt;&gt;();\nCollections.addAll(list, iArray);\nSystem.out.println(list);\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\n[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1202806,"reputation":23213,"user_id":1173112,"accept_rate":89,"display_name":"Koray Tugay"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1543119527,"creation_date":1543119527,"answer_id":53464620,"question_id":1073919,"body_markdown":"Here is another possibility, again with Java 8 Streams:\r\n\r\n    void intArrayToListOfIntegers(int[] arr, List&lt;Integer&gt; list) {\r\n        IntStream.range(0, arr.length).forEach(i -&gt; list.add(arr[i]));\r\n    }\r\n","title":"How to convert int[] into List&lt;Integer&gt; in Java?","body":"<p>Here is another possibility, again with Java 8 Streams:</p>\n\n<pre><code>void intArrayToListOfIntegers(int[] arr, List&lt;Integer&gt; list) {\n    IntStream.range(0, arr.length).forEach(i -&gt; list.add(arr[i]));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3214581,"reputation":1597,"user_id":2713696,"display_name":"Mukesh Kumar Gupta"},"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1563479141,"creation_date":1563479141,"answer_id":57101670,"question_id":1073919,"body_markdown":"If you are using java 8, we can use the stream API to convert it into a list. \r\n\r\n    List&lt;Integer&gt; list = Arrays.stream(arr)\t\t// IntStream \r\n\t\t\t\t\t\t\t\t\t.boxed()  \t\t// Stream&lt;Integer&gt;\r\n\t\t\t\t\t\t\t\t\t.collect(Collectors.toList());\r\nYou can also use the IntStream to convert as well. \r\n\r\n    List&lt;Integer&gt; list = IntStream.of(arr) // return Intstream\r\n    \t\t\t\t\t\t\t\t\t.boxed()  \t\t// Stream&lt;Integer&gt;\r\n    \t\t\t\t\t\t\t\t\t.collect(Collectors.toList());\r\nThere are other external library like guava and apache commons \r\n also available convert it. \r\n\r\ncheers.","title":"How to convert int[] into List&lt;Integer&gt; in Java?","body":"<p>If you are using java 8, we can use the stream API to convert it into a list. </p>\n\n<pre><code>List&lt;Integer&gt; list = Arrays.stream(arr)     // IntStream \n                                .boxed()        // Stream&lt;Integer&gt;\n                                .collect(Collectors.toList());\n</code></pre>\n\n<p>You can also use the IntStream to convert as well. </p>\n\n<pre><code>List&lt;Integer&gt; list = IntStream.of(arr) // return Intstream\n                                    .boxed()        // Stream&lt;Integer&gt;\n                                    .collect(Collectors.toList());\n</code></pre>\n\n<p>There are other external library like guava and apache commons \n also available convert it. </p>\n\n<p>cheers.</p>\n"},{"tags":[],"owner":{"account_id":14576942,"reputation":597,"user_id":10528552,"display_name":"hamidreza75"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1592208997,"creation_date":1592208997,"answer_id":62384103,"question_id":1073919,"body_markdown":"\tint[] arr = { 1, 2, 3, 4, 5 };\r\n\r\n\tList&lt;Integer&gt; list = Arrays.stream(arr)\t\t// IntStream\r\n\t\t\t\t\t\t\t\t.boxed()  \t\t// Stream&lt;Integer&gt;\r\n\t\t\t\t\t\t\t\t.collect(Collectors.toList());\r\n\r\nsee [this](https://www.techiedelight.com/convert-int-array-list-integer/)\r\n","title":"How to convert int[] into List&lt;Integer&gt; in Java?","body":"<pre><code>int[] arr = { 1, 2, 3, 4, 5 };\n\nList&lt;Integer&gt; list = Arrays.stream(arr)     // IntStream\n                            .boxed()        // Stream&lt;Integer&gt;\n                            .collect(Collectors.toList());\n</code></pre>\n\n<p>see <a href=\"https://www.techiedelight.com/convert-int-array-list-integer/\" rel=\"noreferrer\">this</a></p>\n"},{"tags":[],"owner":{"account_id":4228050,"reputation":1228,"user_id":3461120,"display_name":"prashant.kr.mod"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1612309491,"creation_date":1596318379,"answer_id":63210358,"question_id":1073919,"body_markdown":"```\r\nArrays.stream(ints).forEach(list::add);\r\n```","title":"How to convert int[] into List&lt;Integer&gt; in Java?","body":"<pre><code>Arrays.stream(ints).forEach(list::add);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5750035,"reputation":121,"user_id":4540015,"display_name":"Levik"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1672319584,"creation_date":1672319584,"answer_id":74951546,"question_id":1073919,"body_markdown":"You could use IntStream of and boxed it to Integer after that sorted using reverseOrder comparator.\r\n\r\n    List&lt;Integer&gt; listItems = IntStream.of(arrayItems)\r\n                    .boxed()\r\n                    .sorted(Collections.reverseOrder())\r\n                    .collect(Collectors.toList());\r\n\r\nThis approach has the advantage of being more flexible, as you can use different collectors to create different types of lists (e.g., an ArrayList, a LinkedList, etc.).","title":"How to convert int[] into List&lt;Integer&gt; in Java?","body":"<p>You could use IntStream of and boxed it to Integer after that sorted using reverseOrder comparator.</p>\n<pre><code>List&lt;Integer&gt; listItems = IntStream.of(arrayItems)\n                .boxed()\n                .sorted(Collections.reverseOrder())\n                .collect(Collectors.toList());\n</code></pre>\n<p>This approach has the advantage of being more flexible, as you can use different collectors to create different types of lists (e.g., an ArrayList, a LinkedList, etc.).</p>\n"}],"owner":{"account_id":4105,"reputation":281414,"user_id":6068,"accept_rate":65,"display_name":"Pablo Fernandez"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":746970,"favorite_count":0,"down_vote_count":0,"up_vote_count":571,"accepted_answer_id":1073933,"answer_count":21,"score":571,"last_activity_date":1693374363,"creation_date":1246535256,"question_id":1073919,"body_markdown":"How do I convert `int[]` into `List&lt;Integer&gt;` in Java?\r\n\r\nOf course, I&#39;m interested in any other answer than doing it in a loop, item by item. But if there&#39;s no other answer, I&#39;ll pick that one as the best to show the fact that this functionality is not part of Java.","title":"How to convert int[] into List&lt;Integer&gt; in Java?","body":"<p>How do I convert <code>int[]</code> into <code>List&lt;Integer&gt;</code> in Java?</p>\n\n<p>Of course, I'm interested in any other answer than doing it in a loop, item by item. But if there's no other answer, I'll pick that one as the best to show the fact that this functionality is not part of Java.</p>\n"},{"tags":["java","android","collections","boxing"],"comments":[{"owner":{"account_id":1885,"reputation":137382,"user_id":2598,"accept_rate":93,"display_name":"jjnguy"},"score":2,"creation_date":1305837138,"post_id":6064522,"comment_id":7021331,"body_markdown":"Core Java does not.  I&#39;m sure someone can provide a link to a 3rd party library that can do it for you.","body":"Core Java does not.  I&#39;m sure someone can provide a link to a 3rd party library that can do it for you."},{"owner":{"account_id":7052,"reputation":48090,"user_id":12048,"accept_rate":94,"display_name":"finnw"},"score":0,"creation_date":1305838982,"post_id":6064522,"comment_id":7021819,"body_markdown":"possible duplicate of [How to convert int\\[\\] into List&lt;Integer&gt; in Java?](http://stackoverflow.com/questions/1073919/how-to-convert-int-into-listinteger-in-java)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/1073919/how-to-convert-int-into-listinteger-in-java\">How to convert int&#91;&#93; into List&lt;Integer&gt; in Java?</a>"},{"owner":{"account_id":10085235,"reputation":441,"user_id":7454104,"display_name":"Flavio Oliva"},"score":0,"creation_date":1587050601,"post_id":6064522,"comment_id":108362452,"body_markdown":"You might wanna have a look at this thread: https://stackoverflow.com/questions/44297189/how-to-collect-the-results-of-a-stream-in-a-primitive-array","body":"You might wanna have a look at this thread: <a href=\"https://stackoverflow.com/questions/44297189/how-to-collect-the-results-of-a-stream-in-a-primitive-array\" title=\"how to collect the results of a stream in a primitive array\">stackoverflow.com/questions/44297189/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":10836,"reputation":196641,"user_id":20654,"accept_rate":80,"display_name":"OscarRyz"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1693374151,"creation_date":1305837579,"answer_id":6064610,"question_id":6064522,"body_markdown":"If you create a utility method, that would be a one call conversion. Perhaps, in your case, that would be better than adding a whole library (of which you might just use one function), although that should be too much burden for your app.\r\n\r\n\r\nHere&#39;s the [source code][1] for the h3xStream answer (glad it uses Apache license) ;)\r\n\r\n\r\n  [1]: http://www.docjar.com/docs/api/org/apache/commons/lang/ArrayUtils.html#toPrimitive%28Integer,%20int%29","title":"(Un)boxing primitive arrays in Java","body":"<p>If you create a utility method, that would be a one call conversion. Perhaps, in your case, that would be better than adding a whole library (of which you might just use one function), although that should be too much burden for your app.</p>\n<p>Here's the <a href=\"http://www.docjar.com/docs/api/org/apache/commons/lang/ArrayUtils.html#toPrimitive%28Integer,%20int%29\" rel=\"nofollow noreferrer\">source code</a> for the h3xStream answer (glad it uses Apache license) ;)</p>\n"},{"tags":[],"owner":{"account_id":7848,"reputation":108920,"user_id":13792,"accept_rate":100,"display_name":"ColinD"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1693374004,"creation_date":1305838506,"answer_id":6064779,"question_id":6064522,"body_markdown":"Using [Guava][1] ([Ints.asList(int...)][2] and [Ints.toArray(Collection&amp;lt;Integer&amp;gt;)][3]):\r\n\r\n    int[] intArray = ...\r\n    List&lt;Integer&gt; intArrayAsList = Ints.asList(intArray);\r\n    int[] intArray2 = Ints.toArray(intArrayAsList);\r\n\r\nNote that like `Arrays.asList`, `Ints.asList` returns a list that is a _view_ of the given array. You can&#39;t add to or remove from it, but you can `set` the value at a specific index. You can also copy it to a new `ArrayList` if you want:\r\n\r\n    List&lt;Integer&gt; arrayList = Lists.newArrayList(Ints.asList(intArray));\r\n\r\nGuava has the same methods for all primitive types.\r\n\r\n\r\n  [1]: https://github.com/google/guava\r\n  [2]: https://guava.dev/releases/32.1.2-jre/api/docs/com/google/common/primitives/Ints.html#asList(int...)\r\n  [3]: https://guava.dev/releases/32.1.2-jre/api/docs/com/google/common/primitives/Ints.html#toArray(java.util.Collection)","title":"(Un)boxing primitive arrays in Java","body":"<p>Using <a href=\"https://github.com/google/guava\" rel=\"nofollow noreferrer\">Guava</a> (<a href=\"https://guava.dev/releases/32.1.2-jre/api/docs/com/google/common/primitives/Ints.html#asList(int...)\" rel=\"nofollow noreferrer\">Ints.asList(int...)</a> and <a href=\"https://guava.dev/releases/32.1.2-jre/api/docs/com/google/common/primitives/Ints.html#toArray(java.util.Collection)\" rel=\"nofollow noreferrer\">Ints.toArray(Collection&lt;Integer&gt;)</a>):</p>\n<pre><code>int[] intArray = ...\nList&lt;Integer&gt; intArrayAsList = Ints.asList(intArray);\nint[] intArray2 = Ints.toArray(intArrayAsList);\n</code></pre>\n<p>Note that like <code>Arrays.asList</code>, <code>Ints.asList</code> returns a list that is a <em>view</em> of the given array. You can't add to or remove from it, but you can <code>set</code> the value at a specific index. You can also copy it to a new <code>ArrayList</code> if you want:</p>\n<pre><code>List&lt;Integer&gt; arrayList = Lists.newArrayList(Ints.asList(intArray));\n</code></pre>\n<p>Guava has the same methods for all primitive types.</p>\n"},{"tags":[],"owner":{"account_id":6467685,"reputation":560,"user_id":5008968,"accept_rate":100,"display_name":"Hamza Abbad"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1477056228,"creation_date":1477056228,"answer_id":40177834,"question_id":6064522,"body_markdown":"I managed to find a solution in *Java 8* :\r\n\r\n    import java.util.Arrays;\r\n    ...\r\n    double[] columnsValue = {...};\r\n    Double[] values = Arrays.stream(columnsValue).boxed().toArray(Double[]::new);\r\n\r\nI can&#39;t explain what `Double[]::new` means exactly, because I didn&#39;t know this feature of *Java 8* before (in fact, *IntelliJ IDEA* wrote this for me), but it looks like it is doing `new Double(double)` on every element of the array.\r\n\r\n_**Please note** : I tested this only on desktop, I don&#39;t know if it works in Android._","title":"(Un)boxing primitive arrays in Java","body":"<p>I managed to find a solution in <em>Java 8</em> :</p>\n\n<pre><code>import java.util.Arrays;\n...\ndouble[] columnsValue = {...};\nDouble[] values = Arrays.stream(columnsValue).boxed().toArray(Double[]::new);\n</code></pre>\n\n<p>I can't explain what <code>Double[]::new</code> means exactly, because I didn't know this feature of <em>Java 8</em> before (in fact, <em>IntelliJ IDEA</em> wrote this for me), but it looks like it is doing <code>new Double(double)</code> on every element of the array.</p>\n\n<p><em><strong>Please note</strong> : I tested this only on desktop, I don't know if it works in Android.</em></p>\n"},{"tags":[],"owner":{"account_id":5007360,"reputation":1982,"user_id":4024628,"display_name":"Allison"},"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1517718068,"creation_date":1516181470,"answer_id":48297692,"question_id":6064522,"body_markdown":"Boxing and unboxing (without special libraries):\r\n\r\n    // Necessary Imports:\r\n    import java.util.*;\r\n    import java.util.stream.*;\r\n\r\n    // Integers:\r\n\tint[] primitives = {1, 2, 3};\r\n\tInteger[] boxed = Arrays.stream(primitives).boxed().toArray(Integer[]::new);\r\n\tint[] unboxed = Arrays.stream(boxed).mapToInt(Integer::intValue).toArray();\r\n\r\n    // Doubles:\r\n\tdouble[] primitives = {1.0, 2.0, 3.0};\r\n\tDouble[] boxed = Arrays.stream(primitives).boxed().toArray(Double[]::new);\r\n\tdouble[] unboxed = Arrays.stream(boxed).mapToDouble(Double::doubleValue).toArray();\r\n\r\nNote that this requires *Java 8* ([Stream Documentation][1]).\r\n\r\nFor anyone unaware of what the `::` means, it&#39;s used to make a [Method Reference][2].\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/?java/util/stream/Stream.html &quot;Stream Documentation&quot;\r\n  [2]: https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html &quot;Method Reference&quot;","title":"(Un)boxing primitive arrays in Java","body":"<p>Boxing and unboxing (without special libraries):</p>\n\n<pre><code>// Necessary Imports:\nimport java.util.*;\nimport java.util.stream.*;\n\n// Integers:\nint[] primitives = {1, 2, 3};\nInteger[] boxed = Arrays.stream(primitives).boxed().toArray(Integer[]::new);\nint[] unboxed = Arrays.stream(boxed).mapToInt(Integer::intValue).toArray();\n\n// Doubles:\ndouble[] primitives = {1.0, 2.0, 3.0};\nDouble[] boxed = Arrays.stream(primitives).boxed().toArray(Double[]::new);\ndouble[] unboxed = Arrays.stream(boxed).mapToDouble(Double::doubleValue).toArray();\n</code></pre>\n\n<p>Note that this requires <em>Java 8</em> (<a href=\"https://docs.oracle.com/javase/8/docs/api/?java/util/stream/Stream.html\" rel=\"noreferrer\" title=\"Stream Documentation\">Stream Documentation</a>).</p>\n\n<p>For anyone unaware of what the <code>::</code> means, it's used to make a <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html\" rel=\"noreferrer\" title=\"Method Reference\">Method Reference</a>.</p>\n"}],"owner":{"account_id":76597,"reputation":60197,"user_id":219159,"accept_rate":75,"display_name":"Seva Alekseyev"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10396,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":48297692,"answer_count":4,"score":13,"last_activity_date":1693374151,"creation_date":1305837075,"question_id":6064522,"body_markdown":"in the Android Java world, is there a straighforward (ideally one-call) way to convert an array of `int` to an `ArrayList&lt;Integer&gt;` and back? Calling `toArray()` on the ArrayList returns an array of `Integer` - not quite what I want.\r\n\r\nI can easily do that by hand with a loop (already did, in fact). I&#39;m wondering if the library/language supports the same.\r\n\r\nEDIT: thanks all, I already wrote my own boxer and unboxer. I&#39;m just surprised the language/RTL designers didn&#39;t think of it themselves, especially with primitive types being by design ineligible for collections.","title":"(Un)boxing primitive arrays in Java","body":"<p>in the Android Java world, is there a straighforward (ideally one-call) way to convert an array of <code>int</code> to an <code>ArrayList&lt;Integer&gt;</code> and back? Calling <code>toArray()</code> on the ArrayList returns an array of <code>Integer</code> - not quite what I want.</p>\n\n<p>I can easily do that by hand with a loop (already did, in fact). I'm wondering if the library/language supports the same.</p>\n\n<p>EDIT: thanks all, I already wrote my own boxer and unboxer. I'm just surprised the language/RTL designers didn't think of it themselves, especially with primitive types being by design ineligible for collections.</p>\n"},{"tags":["java","selenium-webdriver","testing","automated-tests","galen"],"owner":{"account_id":10221807,"reputation":1,"user_id":22167933,"display_name":"Rishabh Batra"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693373940,"creation_date":1693373940,"question_id":77005219,"body_markdown":"I am using Galen framework for layout testing along with java selenium cucumber framework.\r\nSome information that might be useful- I have a 34-inch monitor but while running my test, I resize my browser window to 1440px width and 900px height.\r\nWhen I run my tests, the html report is generated fine.\r\nBut in the report, the highlighted area for elements is always misaligned.\r\nThis results in incorrect measurement of the element dimensions.\r\nBelow is an example , I have hidden some confidential information.\r\n[enter image description here](https://i.stack.imgur.com/k7NVq.png)\r\nNotice in the above image how the box for the element is misaligned.\r\n\r\nI was expecting Galen to generate accurate boxes highlighting element.\r\nI have tried changing the size of the browser window but the highlighted area remained misaligned.\r\nI also tried checking multiple elements but those were also misaligned.","title":"Galen framework is not recognizing the correct area of webelements","body":"<p>I am using Galen framework for layout testing along with java selenium cucumber framework.\nSome information that might be useful- I have a 34-inch monitor but while running my test, I resize my browser window to 1440px width and 900px height.\nWhen I run my tests, the html report is generated fine.\nBut in the report, the highlighted area for elements is always misaligned.\nThis results in incorrect measurement of the element dimensions.\nBelow is an example , I have hidden some confidential information.\n<a href=\"https://i.stack.imgur.com/k7NVq.png\" rel=\"nofollow noreferrer\">enter image description here</a>\nNotice in the above image how the box for the element is misaligned.</p>\n<p>I was expecting Galen to generate accurate boxes highlighting element.\nI have tried changing the size of the browser window but the highlighted area remained misaligned.\nI also tried checking multiple elements but those were also misaligned.</p>\n"},{"tags":["java","image","vaadin"],"comments":[{"owner":{"account_id":3837378,"reputation":35463,"user_id":3181392,"display_name":"cfrick"},"score":2,"creation_date":1693320060,"post_id":77001114,"comment_id":135743281,"body_markdown":"What part do you have a problem with?","body":"What part do you have a problem with?"},{"owner":{"account_id":27518510,"reputation":91,"user_id":20999057,"display_name":"Ji Lin"},"score":0,"creation_date":1693321513,"post_id":77001114,"comment_id":135743619,"body_markdown":"I tried using addons like zXingVaadin or even zXing but none of them are working for me, i only get empty elements with the size of 0x0. I want a method that i can hand over the String and get the QR Code as Vaadin Image. So i need help at creating the full method.","body":"I tried using addons like zXingVaadin or even zXing but none of them are working for me, i only get empty elements with the size of 0x0. I want a method that i can hand over the String and get the QR Code as Vaadin Image. So i need help at creating the full method."},{"owner":{"account_id":3837378,"reputation":35463,"user_id":3181392,"display_name":"cfrick"},"score":0,"creation_date":1693323522,"post_id":77001114,"comment_id":135744121,"body_markdown":"Please add the code you have tried and how it failed (e.g. errors,\nstacktraces, logs, ...) so we can improve on it.","body":"Please add the code you have tried and how it failed (e.g. errors, stacktraces, logs, ...) so we can improve on it."},{"owner":{"account_id":295383,"reputation":4686,"user_id":599765,"accept_rate":22,"display_name":"Andr&#233; Schild"},"score":1,"creation_date":1693343414,"post_id":77001114,"comment_id":135747836,"body_markdown":"You need a two step process, a java library which generates the qr image, then you store it somewhere on the server and then add it a a normal dynamic resource/image to your vaadin page","body":"You need a two step process, a java library which generates the qr image, then you store it somewhere on the server and then add it a a normal dynamic resource/image to your vaadin page"}],"answers":[{"tags":[],"owner":{"account_id":2515523,"reputation":1914,"user_id":2187063,"display_name":"mstahv"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1693373865,"creation_date":1693373865,"answer_id":77005211,"question_id":77001114,"body_markdown":"Here is an example class how to do it in two different ways. I&#39;d also check the [ZXingVaadin add-on](https://vaadin.com/directory/component/zxingvaadin), that probably does something similar (I have never tried it).\r\n\r\n    package org.example.views;\r\n    \r\n    import com.google.zxing.BarcodeFormat;\r\n    import com.google.zxing.client.j2se.MatrixToImageWriter;\r\n    import com.google.zxing.common.BitMatrix;\r\n    import com.google.zxing.oned.EAN13Writer;\r\n    import com.vaadin.flow.component.html.Image;\r\n    import com.vaadin.flow.component.orderedlayout.VerticalLayout;\r\n    import com.vaadin.flow.router.Route;\r\n    import com.vaadin.flow.server.AbstractStreamResource;\r\n    import com.vaadin.flow.server.StreamResource;\r\n    \r\n    import javax.imageio.ImageIO;\r\n    import java.awt.image.BufferedImage;\r\n    import java.io.ByteArrayOutputStream;\r\n    import java.io.IOException;\r\n    \r\n    @Route\r\n    public class BarcodeView extends VerticalLayout {\r\n    \r\n        public BarcodeView() {\r\n            String barcodeText = &quot;123456789012&quot;;\r\n    \r\n            Image barcode = new Image();\r\n            barcode.setSrc(asStreamResource(generateEAN13BarcodeImage(barcodeText)));\r\n            add(barcode);\r\n    \r\n            // Barcode images are typically small\r\n            // &amp; no need for caching, using as data URL is fine as well\r\n            Image asDataUrl = new Image();\r\n            asDataUrl.setSrc(toDataUrl(generateEAN13BarcodeImage(barcodeText)));\r\n            add(asDataUrl);\r\n    \r\n    \r\n        }\r\n    \r\n        private AbstractStreamResource asStreamResource(BufferedImage bufferedImage) {\r\n            return new StreamResource(&quot;barcode.png&quot;, (output, session) -&gt; {\r\n                try {\r\n                    ImageIO.write(bufferedImage, &quot;png&quot;, output);\r\n                } catch (Exception e) {\r\n                    throw new RuntimeException(e);\r\n                }\r\n            });\r\n        }\r\n    \r\n        public static final int BARCODE_W = 300;\r\n        public static final int BARCODE_H = 50;\r\n    \r\n        public static BufferedImage generateEAN13BarcodeImage(String barcodeText) {\r\n            EAN13Writer barcodeWriter = new EAN13Writer();\r\n            BitMatrix bitMatrix = barcodeWriter.encode(barcodeText, BarcodeFormat.EAN_13, BARCODE_W, BARCODE_H);\r\n            return MatrixToImageWriter.toBufferedImage(bitMatrix);\r\n        }\r\n    \r\n        public String toDataUrl(BufferedImage image) {\r\n            ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n            try {\r\n                ImageIO.write(image, &quot;png&quot;, baos);\r\n                return &quot;data:image/png;base64,&quot; + jakarta.xml.bind.DatatypeConverter.printBase64Binary(baos.toByteArray());\r\n            } catch (IOException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        }\r\n    \r\n    }\r\n","title":"How to convert String to QR Code Image in Vaadin?","body":"<p>Here is an example class how to do it in two different ways. I'd also check the <a href=\"https://vaadin.com/directory/component/zxingvaadin\" rel=\"nofollow noreferrer\">ZXingVaadin add-on</a>, that probably does something similar (I have never tried it).</p>\n<pre><code>package org.example.views;\n\nimport com.google.zxing.BarcodeFormat;\nimport com.google.zxing.client.j2se.MatrixToImageWriter;\nimport com.google.zxing.common.BitMatrix;\nimport com.google.zxing.oned.EAN13Writer;\nimport com.vaadin.flow.component.html.Image;\nimport com.vaadin.flow.component.orderedlayout.VerticalLayout;\nimport com.vaadin.flow.router.Route;\nimport com.vaadin.flow.server.AbstractStreamResource;\nimport com.vaadin.flow.server.StreamResource;\n\nimport javax.imageio.ImageIO;\nimport java.awt.image.BufferedImage;\nimport java.io.ByteArrayOutputStream;\nimport java.io.IOException;\n\n@Route\npublic class BarcodeView extends VerticalLayout {\n\n    public BarcodeView() {\n        String barcodeText = &quot;123456789012&quot;;\n\n        Image barcode = new Image();\n        barcode.setSrc(asStreamResource(generateEAN13BarcodeImage(barcodeText)));\n        add(barcode);\n\n        // Barcode images are typically small\n        // &amp; no need for caching, using as data URL is fine as well\n        Image asDataUrl = new Image();\n        asDataUrl.setSrc(toDataUrl(generateEAN13BarcodeImage(barcodeText)));\n        add(asDataUrl);\n\n\n    }\n\n    private AbstractStreamResource asStreamResource(BufferedImage bufferedImage) {\n        return new StreamResource(&quot;barcode.png&quot;, (output, session) -&gt; {\n            try {\n                ImageIO.write(bufferedImage, &quot;png&quot;, output);\n            } catch (Exception e) {\n                throw new RuntimeException(e);\n            }\n        });\n    }\n\n    public static final int BARCODE_W = 300;\n    public static final int BARCODE_H = 50;\n\n    public static BufferedImage generateEAN13BarcodeImage(String barcodeText) {\n        EAN13Writer barcodeWriter = new EAN13Writer();\n        BitMatrix bitMatrix = barcodeWriter.encode(barcodeText, BarcodeFormat.EAN_13, BARCODE_W, BARCODE_H);\n        return MatrixToImageWriter.toBufferedImage(bitMatrix);\n    }\n\n    public String toDataUrl(BufferedImage image) {\n        ByteArrayOutputStream baos = new ByteArrayOutputStream();\n        try {\n            ImageIO.write(image, &quot;png&quot;, baos);\n            return &quot;data:image/png;base64,&quot; + jakarta.xml.bind.DatatypeConverter.printBase64Binary(baos.toByteArray());\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":27518510,"reputation":91,"user_id":20999057,"display_name":"Ji Lin"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":103,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77005211,"answer_count":1,"score":0,"last_activity_date":1693373865,"creation_date":1693319397,"question_id":77001114,"body_markdown":"I have a string like\r\n\r\n    String s = &quot;123456789&quot;;\r\nand i want an Vaadin Image with the QrCode generated from the String, to display it in the window. So i want something like:\r\n\r\n    public Image toQr(String s) {\r\n        &lt;...&gt;\r\n        return imageOfQr;\r\n    }\r\n    add(toQr(&quot;Hello World&quot;));\r\n\r\nHow am I supposed to do this?\r\nCan you please help me giving the full method to have the same input and output. Im not interested in any other outputs.","title":"How to convert String to QR Code Image in Vaadin?","body":"<p>I have a string like</p>\n<pre><code>String s = &quot;123456789&quot;;\n</code></pre>\n<p>and i want an Vaadin Image with the QrCode generated from the String, to display it in the window. So i want something like:</p>\n<pre><code>public Image toQr(String s) {\n    &lt;...&gt;\n    return imageOfQr;\n}\nadd(toQr(&quot;Hello World&quot;));\n</code></pre>\n<p>How am I supposed to do this?\nCan you please help me giving the full method to have the same input and output. Im not interested in any other outputs.</p>\n"},{"tags":["java","spring","spring-boot","spring-session"],"owner":{"account_id":87230,"reputation":36816,"user_id":242042,"accept_rate":57,"display_name":"Archimedes Trajano"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693372557,"creation_date":1693367146,"question_id":77004867,"body_markdown":"[Serializing the Session using JSON](https://docs.spring.io/spring-session/reference/configuration/redis.html#serializing-session-using-json) specifies that I can create the following bean\r\n```java\r\n@Bean\r\nRedisSerializer&lt;Object&gt; springSessionDefaultRedisSerializer(ObjectMapper objectMapper) {\r\n  return new GenericJackson2JsonRedisSerializer(objectMapper);\r\n}\r\n```\r\nto make it serialize to JSON.  I do see the data being serialized (at least the initial data)\r\n\r\nMy data code is just a single field\r\n\r\n```\r\n@Data\r\npublic class MySessionData implements Serializable {\r\n  private String email;\r\n}\r\n```\r\n\r\nBut it fails on calling this method \r\n```java\r\n  @PostMapping(&quot;/storeSessionData&quot;)\r\n  public RedirectView storeSessionData(\r\n      final String email, @SessionAttribute MySessionData sessionData) {\r\n\r\n    sessionData.setEmail(email);\r\n    return new RedirectView(&quot;/all&quot;);\r\n  }\r\n```\r\n\r\nThe error log message says\r\n\r\n&gt; org.springframework.web.method.annotation.MethodArgumentConversionNotSupportedException: Failed to convert value of type &#39;java.util.LinkedHashMap&#39; to required type &#39;mvc.MySessionData&#39;; Cannot convert value of type &#39;java.util.LinkedHashMap&#39; to required type &#39;mvc.MySessionData&#39;: no matching editors or conversion strategy found\r\n\r\nAm I missing another step?\r\n\r\nI do know that if I do this test\r\n\r\n```\r\n  @Test\r\n  void convertMySessionData() {\r\n\r\n    final Map&lt;String, String&gt; linkedHashMap = new LinkedHashMap&lt;&gt;();\r\n    linkedHashMap.put(&quot;email&quot;, &quot;abc&quot;);\r\n    final var convert = conversionService.convert(linkedHashMap, MySessionData.class);\r\n    assertThat(convert.getEmail()).isEqualTo(&quot;abc&quot;);\r\n  }\r\n\r\n```\r\n\r\nI get a similar response\r\n```\r\norg.springframework.core.convert.ConverterNotFoundException: No converter found capable of converting from type [java.util.LinkedHashMap&lt;?, ?&gt;] to type [mvc.MySessionData]\r\n\tat org.springframework.core.convert.support.GenericConversionService.handleConverterNotFound(GenericConversionService.java:322)\r\n\tat org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:195)\r\n\tat org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:175)\r\n\tat template.HttpRequestTest.convertMySessionData(HttpRequestTest.java:84)\r\n...\r\n```","title":"Attempting to serialize the session as a JSON not converting types correctly","body":"<p><a href=\"https://docs.spring.io/spring-session/reference/configuration/redis.html#serializing-session-using-json\" rel=\"nofollow noreferrer\">Serializing the Session using JSON</a> specifies that I can create the following bean</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\nRedisSerializer&lt;Object&gt; springSessionDefaultRedisSerializer(ObjectMapper objectMapper) {\n  return new GenericJackson2JsonRedisSerializer(objectMapper);\n}\n</code></pre>\n<p>to make it serialize to JSON.  I do see the data being serialized (at least the initial data)</p>\n<p>My data code is just a single field</p>\n<pre><code>@Data\npublic class MySessionData implements Serializable {\n  private String email;\n}\n</code></pre>\n<p>But it fails on calling this method</p>\n<pre class=\"lang-java prettyprint-override\"><code>  @PostMapping(&quot;/storeSessionData&quot;)\n  public RedirectView storeSessionData(\n      final String email, @SessionAttribute MySessionData sessionData) {\n\n    sessionData.setEmail(email);\n    return new RedirectView(&quot;/all&quot;);\n  }\n</code></pre>\n<p>The error log message says</p>\n<blockquote>\n<p>org.springframework.web.method.annotation.MethodArgumentConversionNotSupportedException: Failed to convert value of type 'java.util.LinkedHashMap' to required type 'mvc.MySessionData'; Cannot convert value of type 'java.util.LinkedHashMap' to required type 'mvc.MySessionData': no matching editors or conversion strategy found</p>\n</blockquote>\n<p>Am I missing another step?</p>\n<p>I do know that if I do this test</p>\n<pre><code>  @Test\n  void convertMySessionData() {\n\n    final Map&lt;String, String&gt; linkedHashMap = new LinkedHashMap&lt;&gt;();\n    linkedHashMap.put(&quot;email&quot;, &quot;abc&quot;);\n    final var convert = conversionService.convert(linkedHashMap, MySessionData.class);\n    assertThat(convert.getEmail()).isEqualTo(&quot;abc&quot;);\n  }\n\n</code></pre>\n<p>I get a similar response</p>\n<pre><code>org.springframework.core.convert.ConverterNotFoundException: No converter found capable of converting from type [java.util.LinkedHashMap&lt;?, ?&gt;] to type [mvc.MySessionData]\n    at org.springframework.core.convert.support.GenericConversionService.handleConverterNotFound(GenericConversionService.java:322)\n    at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:195)\n    at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:175)\n    at template.HttpRequestTest.convertMySessionData(HttpRequestTest.java:84)\n...\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1693297441,"post_id":76998478,"comment_id":135738615,"body_markdown":"You are mixing different versions of Spring Security, don&#39;t. Also `hasRole` will check if a user has an authority with the name `ROLE_ADMIN` if it is named `ADMIN` in your actual database it won&#39;t match.","body":"You are mixing different versions of Spring Security, don&#39;t. Also <code>hasRole</code> will check if a user has an authority with the name <code>ROLE_ADMIN</code> if it is named <code>ADMIN</code> in your actual database it won&#39;t match."},{"owner":{"account_id":14524487,"reputation":1,"user_id":18534333,"display_name":"Aida"},"score":0,"creation_date":1693299234,"post_id":76998478,"comment_id":135738957,"body_markdown":"i changed Spring Security versions to 5.7.6\nand hasRole() to hasAuthority() \nhaving the same","body":"i changed Spring Security versions to 5.7.6 and hasRole() to hasAuthority()  having the same"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1693302146,"post_id":76998478,"comment_id":135739466,"body_markdown":"Is your filter working correctly with extracting the credentials? Do you have additional security with `@PreAuthorize` or `@Secured` in place?","body":"Is your filter working correctly with extracting the credentials? Do you have additional security with <code>@PreAuthorize</code> or <code>@Secured</code> in place?"},{"owner":{"account_id":14524487,"reputation":1,"user_id":18534333,"display_name":"Aida"},"score":0,"creation_date":1693302430,"post_id":76998478,"comment_id":135739526,"body_markdown":"Yes, some methods have @PreAuthorize/\n Shouldn&#39;t it be like this?","body":"Yes, some methods have @PreAuthorize/  Shouldn&#39;t it be like this?"},{"owner":{"account_id":14524487,"reputation":1,"user_id":18534333,"display_name":"Aida"},"score":0,"creation_date":1693302543,"post_id":76998478,"comment_id":135739547,"body_markdown":"And i deleted all @PreAuthorize \nStill having the same","body":"And i deleted all @PreAuthorize  Still having the same"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1693302544,"post_id":76998478,"comment_id":135739548,"body_markdown":"Are those correct and matching? What makes you think the matchers here are the problem and not the pre-authorize ones? And as stated is your JWT filter working properly.","body":"Are those correct and matching? What makes you think the matchers here are the problem and not the pre-authorize ones? And as stated is your JWT filter working properly."},{"owner":{"account_id":14524487,"reputation":1,"user_id":18534333,"display_name":"Aida"},"score":0,"creation_date":1693303267,"post_id":76998478,"comment_id":135739665,"body_markdown":"I didn&#39;t get what you mean) \nMaybe i can share my project on github?","body":"I didn&#39;t get what you mean)  Maybe i can share my project on github?"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1693303438,"post_id":76998478,"comment_id":135739701,"body_markdown":"Well does yuour jwt filte ractually extract the token properly and fill the security context, it appears as if it doesn&#39;t. I&#39;m not going to debug your whole project (unless you hire me for consultancy) so just add the needed information here. You also have a custom authenticationprovider does that work as well.","body":"Well does yuour jwt filte ractually extract the token properly and fill the security context, it appears as if it doesn&#39;t. I&#39;m not going to debug your whole project (unless you hire me for consultancy) so just add the needed information here. You also have a custom authenticationprovider does that work as well."},{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1693307456,"post_id":76998478,"comment_id":135740401,"body_markdown":"im going to be a bit strict here and ask why havn&#39;t you enabled spring security debug logs, and read the reason for your Forbidden response, also why do you have a custom JWTFilter, and why are you not using the built in JWT features of spring security. Im suspecting you have followed some poor tutorial and when that didnt work you asked here. I suggest you read the official spring docs instead.","body":"im going to be a bit strict here and ask why havn&#39;t you enabled spring security debug logs, and read the reason for your Forbidden response, also why do you have a custom JWTFilter, and why are you not using the built in JWT features of spring security. Im suspecting you have followed some poor tutorial and when that didnt work you asked here. I suggest you read the official spring docs instead."},{"owner":{"account_id":14524487,"reputation":1,"user_id":18534333,"display_name":"Aida"},"score":0,"creation_date":1693310917,"post_id":76998478,"comment_id":135741157,"body_markdown":"@M.Deinum i added my doFilterInternal method","body":"@M.Deinum i added my doFilterInternal method"}],"owner":{"account_id":14524487,"reputation":1,"user_id":18534333,"display_name":"Aida"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":110,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693372447,"creation_date":1693296817,"question_id":76998478,"body_markdown":"SecurityFilterChain does not work\r\nI&#39;m using Spring 2.7.8 \r\nSpring Security core -6.1.0\r\nspring-security-config - 5.7.6\r\nspring-security-web - 5.7.6\r\n\r\n\r\n```\r\n@Configuration\r\n@EnableWebSecurity\r\n@RequiredArgsConstructor\r\npublic class SecurityConfig {\r\n    private final JWTAuthFilter jwtAuthFilter;\r\n    private final AuthenticationProvider authenticationProvider;\r\n    private final LogoutHandler logoutHandler;\r\n\r\n    private static final String AUTH_END_POINT = &quot;/auth/**&quot;;\r\n    private static final String CATEGORY_ADMIN = &quot;/categories/admin/**&quot;;\r\n    private static final String ORDER_ADMIN = &quot;/orders/admin/**&quot;;\r\n    private static final String VENDOR_ADMIN = &quot;/vendors/admin/**&quot;;\r\n    private static final String PRODUCT_ADMIN = &quot;/products/admin/**&quot;;\r\n    private static final String USER_ADMIN = &quot;/users/admin/**&quot;;\r\n    private static final String ADMIN = &quot;ADMIN&quot;;\r\n\r\n    @Bean\r\n    public SecurityFilterChain securityFilterChain(@NotNull HttpSecurity http) throws Exception {\r\n        http\r\n                .csrf()\r\n                .disable()\r\n                .authorizeRequests()\r\n                .antMatchers(AUTH_END_POINT).permitAll()\r\n                .antMatchers(HttpMethod.GET, &quot;/vendors/**&quot;).permitAll()\r\n                .antMatchers(HttpMethod.GET, &quot;/categories/**&quot;).permitAll()\r\n                .antMatchers(HttpMethod.GET, &quot;/products/**&quot;).permitAll()\r\n                .antMatchers(HttpMethod.GET, &quot;/users/**&quot;).permitAll()\r\n                .antMatchers(HttpMethod.GET, &quot;/orders/**&quot;).permitAll()\r\n                .antMatchers(PRODUCT_ADMIN).hasAuthority(ADMIN)\r\n                .antMatchers(VENDOR_ADMIN).hasAuthority(ADMIN)\r\n                .antMatchers(USER_ADMIN).hasAuthority(ADMIN)\r\n                .antMatchers(CATEGORY_ADMIN).hasAuthority(ADMIN)\r\n                .antMatchers(ORDER_ADMIN).hasAuthority(ADMIN)\r\n                .anyRequest()\r\n                .authenticated()\r\n                .and()\r\n                .sessionManagement()\r\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n                .and()\r\n                .authenticationProvider(authenticationProvider)\r\n                .addFilterBefore(jwtAuthFilter, UsernamePasswordAuthenticationFilter.class)\r\n                .logout()\r\n                .logoutUrl(&quot;/auth/logout&quot;)\r\n                .addLogoutHandler(logoutHandler)\r\n                .logoutSuccessHandler((request, response, authentication) -&gt;\r\n                        SecurityContextHolder.clearContext());\r\n\r\n        return http.build();\r\n    }\r\n}\r\n\r\n```\r\nHere&#39;s my JWTAuthFilter class.\r\ndoFilterInternal extracts credentials from jwt\r\n\r\n```\r\n    @Override\r\n    protected void doFilterInternal(\r\n            @NonNull HttpServletRequest request,\r\n            @NonNull HttpServletResponse response,\r\n            @NonNull FilterChain filterChain\r\n    ) throws ServletException, IOException {\r\n        final String authHeader = request.getHeader(&quot;Authorization&quot;);\r\n        final String jwt;\r\n        final String userEmail;\r\n        if (authHeader == null || !authHeader.startsWith(&quot;Bearer &quot;)) {\r\n            filterChain.doFilter(request, response);\r\n            return;\r\n        }\r\n        jwt = authHeader.substring(7);\r\n        userEmail = jwtTokenProvider.extractUsername(jwt);\r\n        if (userEmail != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) {\r\n            UserDetails userDetails = this.userDetailsService.loadUserByUsername(userEmail);\r\n            var isTokenValid = tokenRepository.findByToken(jwt)\r\n                    .map(t -&gt; !t.isExpired() &amp;&amp; !t.isRevoked())\r\n                    .orElse(false);\r\n            if (jwtTokenProvider.isTokenValid(jwt, userDetails) &amp;&amp; isTokenValid) {\r\n                UsernamePasswordAuthenticationToken authToken = new UsernamePasswordAuthenticationToken(\r\n                        userDetails,\r\n                        null,\r\n                        userDetails.getAuthorities()\r\n                );\r\n                authToken.setDetails(\r\n                        new WebAuthenticationDetailsSource().buildDetails(request)\r\n                );\r\n                SecurityContextHolder.getContext().setAuthentication(authToken);\r\n            }\r\n        }\r\n        filterChain.doFilter(request, response);\r\n    }\r\n\r\n```\r\n\r\nGET `httpMethods` work with permitAll()\r\nBut endpoints with `hasRole(ADMIN)` do not work (I&#39;m getting Forbidden)","title":"Getting Forbidden Error Using SecurityFilterChain In SpringBoot","body":"<p>SecurityFilterChain does not work\nI'm using Spring 2.7.8\nSpring Security core -6.1.0\nspring-security-config - 5.7.6\nspring-security-web - 5.7.6</p>\n<pre><code>@Configuration\n@EnableWebSecurity\n@RequiredArgsConstructor\npublic class SecurityConfig {\n    private final JWTAuthFilter jwtAuthFilter;\n    private final AuthenticationProvider authenticationProvider;\n    private final LogoutHandler logoutHandler;\n\n    private static final String AUTH_END_POINT = &quot;/auth/**&quot;;\n    private static final String CATEGORY_ADMIN = &quot;/categories/admin/**&quot;;\n    private static final String ORDER_ADMIN = &quot;/orders/admin/**&quot;;\n    private static final String VENDOR_ADMIN = &quot;/vendors/admin/**&quot;;\n    private static final String PRODUCT_ADMIN = &quot;/products/admin/**&quot;;\n    private static final String USER_ADMIN = &quot;/users/admin/**&quot;;\n    private static final String ADMIN = &quot;ADMIN&quot;;\n\n    @Bean\n    public SecurityFilterChain securityFilterChain(@NotNull HttpSecurity http) throws Exception {\n        http\n                .csrf()\n                .disable()\n                .authorizeRequests()\n                .antMatchers(AUTH_END_POINT).permitAll()\n                .antMatchers(HttpMethod.GET, &quot;/vendors/**&quot;).permitAll()\n                .antMatchers(HttpMethod.GET, &quot;/categories/**&quot;).permitAll()\n                .antMatchers(HttpMethod.GET, &quot;/products/**&quot;).permitAll()\n                .antMatchers(HttpMethod.GET, &quot;/users/**&quot;).permitAll()\n                .antMatchers(HttpMethod.GET, &quot;/orders/**&quot;).permitAll()\n                .antMatchers(PRODUCT_ADMIN).hasAuthority(ADMIN)\n                .antMatchers(VENDOR_ADMIN).hasAuthority(ADMIN)\n                .antMatchers(USER_ADMIN).hasAuthority(ADMIN)\n                .antMatchers(CATEGORY_ADMIN).hasAuthority(ADMIN)\n                .antMatchers(ORDER_ADMIN).hasAuthority(ADMIN)\n                .anyRequest()\n                .authenticated()\n                .and()\n                .sessionManagement()\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n                .and()\n                .authenticationProvider(authenticationProvider)\n                .addFilterBefore(jwtAuthFilter, UsernamePasswordAuthenticationFilter.class)\n                .logout()\n                .logoutUrl(&quot;/auth/logout&quot;)\n                .addLogoutHandler(logoutHandler)\n                .logoutSuccessHandler((request, response, authentication) -&gt;\n                        SecurityContextHolder.clearContext());\n\n        return http.build();\n    }\n}\n\n</code></pre>\n<p>Here's my JWTAuthFilter class.\ndoFilterInternal extracts credentials from jwt</p>\n<pre><code>    @Override\n    protected void doFilterInternal(\n            @NonNull HttpServletRequest request,\n            @NonNull HttpServletResponse response,\n            @NonNull FilterChain filterChain\n    ) throws ServletException, IOException {\n        final String authHeader = request.getHeader(&quot;Authorization&quot;);\n        final String jwt;\n        final String userEmail;\n        if (authHeader == null || !authHeader.startsWith(&quot;Bearer &quot;)) {\n            filterChain.doFilter(request, response);\n            return;\n        }\n        jwt = authHeader.substring(7);\n        userEmail = jwtTokenProvider.extractUsername(jwt);\n        if (userEmail != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) {\n            UserDetails userDetails = this.userDetailsService.loadUserByUsername(userEmail);\n            var isTokenValid = tokenRepository.findByToken(jwt)\n                    .map(t -&gt; !t.isExpired() &amp;&amp; !t.isRevoked())\n                    .orElse(false);\n            if (jwtTokenProvider.isTokenValid(jwt, userDetails) &amp;&amp; isTokenValid) {\n                UsernamePasswordAuthenticationToken authToken = new UsernamePasswordAuthenticationToken(\n                        userDetails,\n                        null,\n                        userDetails.getAuthorities()\n                );\n                authToken.setDetails(\n                        new WebAuthenticationDetailsSource().buildDetails(request)\n                );\n                SecurityContextHolder.getContext().setAuthentication(authToken);\n            }\n        }\n        filterChain.doFilter(request, response);\n    }\n\n</code></pre>\n<p>GET <code>httpMethods</code> work with permitAll()\nBut endpoints with <code>hasRole(ADMIN)</code> do not work (I'm getting Forbidden)</p>\n"},{"tags":["java","date","datetime"],"comments":[{"owner":{"account_id":2310125,"reputation":1532,"user_id":2028440,"accept_rate":25,"display_name":"Bằng Rikimaru"},"score":0,"creation_date":1693367154,"post_id":77004841,"comment_id":135749795,"body_markdown":"@Mike&#39;Pomax&#39;Kamermans it doesn&#39;t matter if it is not 100% valid. I just need it parsed to DateTime object.","body":"@Mike&#39;Pomax&#39;Kamermans it doesn&#39;t matter if it is not 100% valid. I just need it parsed to DateTime object."},{"owner":{"account_id":2310125,"reputation":1532,"user_id":2028440,"accept_rate":25,"display_name":"Bằng Rikimaru"},"score":0,"creation_date":1693367383,"post_id":77004841,"comment_id":135749806,"body_markdown":"@Mike&#39;Pomax&#39;Kamermans I removed the word ISO format from the title and content, as my examples are flexible and not stricly valid to the standard","body":"@Mike&#39;Pomax&#39;Kamermans I removed the word ISO format from the title and content, as my examples are flexible and not stricly valid to the standard"},{"owner":{"account_id":384206,"reputation":50386,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"score":0,"creation_date":1693367537,"post_id":77004841,"comment_id":135749817,"body_markdown":"then my comments no longer apply.","body":"then my comments no longer apply."},{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1693367916,"post_id":77004841,"comment_id":135749846,"body_markdown":"Can you show what the correct outputs are, for the three last values?","body":"Can you show what the correct outputs are, for the three last values?"},{"owner":{"account_id":2310125,"reputation":1532,"user_id":2028440,"accept_rate":25,"display_name":"Bằng Rikimaru"},"score":0,"creation_date":1693368735,"post_id":77004841,"comment_id":135749898,"body_markdown":"@Sweeper Here are the correct outputs with timeoffsets\n\n&quot;2018-10-15T12:00:30.123-08:00&quot;,\n&quot;2018-10-15T12:00:30.123-08:00&quot;,\n&quot;2018-10-15T12:00:30.123+09:00&quot;\n\nIt is like the output from this command:         System.out.println(ZonedDateTime.parse(&quot;2018-10-15T12:00:30.123-08:00&quot;).toString());","body":"@Sweeper Here are the correct outputs with timeoffsets  &quot;2018-10-15T12:00:30.123-08:00&quot;, &quot;2018-10-15T12:00:30.123-08:00&quot;, &quot;2018-10-15T12:00:30.123+09:00&quot;  It is like the output from this command:         System.out.println(ZonedDateTime.parse(&quot;2018-10-15T12:00:30.&zwnj;&#8203;123-08:00&quot;).toString&zwnj;&#8203;());"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1693412574,"post_id":77004841,"comment_id":135758501,"body_markdown":"This one seems to fit, not perfectly, but pretty well: [More beautiful Multiple DateTimeFormatter?](https://stackoverflow.com/questions/67334271/more-beautiful-multiple-datetimeformatter). Does it answer your question?","body":"This one seems to fit, not perfectly, but pretty well: <a href=\"https://stackoverflow.com/questions/67334271/more-beautiful-multiple-datetimeformatter\">More beautiful Multiple DateTimeFormatter?</a>. Does it answer your question?"},{"owner":{"account_id":2310125,"reputation":1532,"user_id":2028440,"accept_rate":25,"display_name":"Bằng Rikimaru"},"score":0,"creation_date":1693468784,"post_id":77004841,"comment_id":135765802,"body_markdown":"@OleV.V. thanks for providing a reference, I got the answer for datetime parsing already from  https://stackoverflow.com/questions/52815456/parsing-an-iso-8601-date-in-java8-when-all-fields-including-separators-but-not/52823661#52823661","body":"@OleV.V. thanks for providing a reference, I got the answer for datetime parsing already from  <a href=\"https://stackoverflow.com/questions/52815456/parsing-an-iso-8601-date-in-java8-when-all-fields-including-separators-but-not/52823661#52823661\" title=\"parsing an iso 8601 date in java8 when all fields including separators but not\">stackoverflow.com/questions/52815456/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1693371335,"creation_date":1693370672,"answer_id":77005042,"question_id":77004841,"body_markdown":"You used `LocalDateTime.parse`, so of course only the local date time part of the string is outputted. \r\n\r\nWhen you use `ZonedDateTime.parse`, some of the strings cannot be parsed because there is no offset or zone information. We can partially solve this by adding a\r\n\r\n    .parseDefaulting(ChronoField.OFFSET_SECONDS, 0)\r\n\r\nHowever, this will not handle the cases when there is only timezone, but not offset information. (Note that &quot;UTC-08:00&quot; in &quot;2018-10-15T12:00:30.123UTC-08:00&quot; is considered a timezone ID) Such strings are actually ambiguous -  just having a timezone and a local date time is sometimes not enough to make a `ZonedDateTime` in an &quot;overlap&quot; timezone transition. The same local date time would happen twice, at different offsets. You would have to make a decision as to which one you choose.\r\n\r\nSo rather than using `parseDefaulting` also on the offset, directly use `dtf.parse(line)` and query on the `TemporalAccessor` you get. There are 3 cases:\r\n\r\n- the temporal accessor has offset information, use that offset to make a `ZonedDateTime`\r\n- the temporal accessor only has timezone information, use that timezone to make a `ZonedDateTime`, and remember to make a decision on which one to choose in case of an overlap transition\r\n- the temporal accessor has neither offset nor timezone information. Use UTC as the zone to make a `ZonedDateTime`.\r\n\r\nYou could also add a fourth case to handle when there is both offset and timezone information in the string and use both to create a `ZonedDateTime`, if needed.\r\n\r\n```\r\nvar accessor = dtf.parse(line);\r\nvar zone = accessor.query(TemporalQueries.zone());\r\nvar offset = accessor.query(TemporalQueries.offset());\r\nvar ldt = LocalDateTime.from(accessor);\r\nif (offset != null) {\r\n    System.out.println(ZonedDateTime.of(ldt, offset));\r\n} else if (zone != null) {\r\n    // this chooses the earlier time in an overlap\r\n    System.out.println(ZonedDateTime.of(ldt, zone));\r\n\r\n    // more generally...\r\n//    var transition = zone.getRules().getTransition(ldt);\r\n//    if (transition != null &amp;&amp; transition.isOverlap()) {\r\n//        ZonedDateTime.ofLocal(\r\n//                ldt, zone, \r\n//                transition.getOffsetAfter() // or getOffsetBefore()\r\n//        );\r\n//    }\r\n} else {\r\n    System.out.println(ZonedDateTime.of(ldt, ZoneOffset.UTC));\r\n}\r\n```\r\n\r\nThe above outputs:\r\n\r\n```\r\n2018-01-01T00:00Z\r\n2018-10-01T00:00Z\r\n2018-10-15T00:00Z\r\n2018-10-15T12:00Z\r\n2018-10-15T12:00:30Z\r\n2018-10-15T12:00:30.123Z\r\n2018-10-15T12:00:30.123-08:00\r\n2018-10-15T12:00:30.123-08:00[UTC-08:00]\r\n2018-10-15T12:00:30.123+09:00\r\n```\r\n\r\nIf you don&#39;t want the `[UTC-08:00]` timezone ID, use `toOffsetDateTime` to get a `OffsetDateTime` instead.","title":"java.time - How to parse datetime format in various patterns (with ALL optional time components, except YEAR)?","body":"<p>You used <code>LocalDateTime.parse</code>, so of course only the local date time part of the string is outputted.</p>\n<p>When you use <code>ZonedDateTime.parse</code>, some of the strings cannot be parsed because there is no offset or zone information. We can partially solve this by adding a</p>\n<pre><code>.parseDefaulting(ChronoField.OFFSET_SECONDS, 0)\n</code></pre>\n<p>However, this will not handle the cases when there is only timezone, but not offset information. (Note that &quot;UTC-08:00&quot; in &quot;2018-10-15T12:00:30.123UTC-08:00&quot; is considered a timezone ID) Such strings are actually ambiguous -  just having a timezone and a local date time is sometimes not enough to make a <code>ZonedDateTime</code> in an &quot;overlap&quot; timezone transition. The same local date time would happen twice, at different offsets. You would have to make a decision as to which one you choose.</p>\n<p>So rather than using <code>parseDefaulting</code> also on the offset, directly use <code>dtf.parse(line)</code> and query on the <code>TemporalAccessor</code> you get. There are 3 cases:</p>\n<ul>\n<li>the temporal accessor has offset information, use that offset to make a <code>ZonedDateTime</code></li>\n<li>the temporal accessor only has timezone information, use that timezone to make a <code>ZonedDateTime</code>, and remember to make a decision on which one to choose in case of an overlap transition</li>\n<li>the temporal accessor has neither offset nor timezone information. Use UTC as the zone to make a <code>ZonedDateTime</code>.</li>\n</ul>\n<p>You could also add a fourth case to handle when there is both offset and timezone information in the string and use both to create a <code>ZonedDateTime</code>, if needed.</p>\n<pre><code>var accessor = dtf.parse(line);\nvar zone = accessor.query(TemporalQueries.zone());\nvar offset = accessor.query(TemporalQueries.offset());\nvar ldt = LocalDateTime.from(accessor);\nif (offset != null) {\n    System.out.println(ZonedDateTime.of(ldt, offset));\n} else if (zone != null) {\n    // this chooses the earlier time in an overlap\n    System.out.println(ZonedDateTime.of(ldt, zone));\n\n    // more generally...\n//    var transition = zone.getRules().getTransition(ldt);\n//    if (transition != null &amp;&amp; transition.isOverlap()) {\n//        ZonedDateTime.ofLocal(\n//                ldt, zone, \n//                transition.getOffsetAfter() // or getOffsetBefore()\n//        );\n//    }\n} else {\n    System.out.println(ZonedDateTime.of(ldt, ZoneOffset.UTC));\n}\n</code></pre>\n<p>The above outputs:</p>\n<pre><code>2018-01-01T00:00Z\n2018-10-01T00:00Z\n2018-10-15T00:00Z\n2018-10-15T12:00Z\n2018-10-15T12:00:30Z\n2018-10-15T12:00:30.123Z\n2018-10-15T12:00:30.123-08:00\n2018-10-15T12:00:30.123-08:00[UTC-08:00]\n2018-10-15T12:00:30.123+09:00\n</code></pre>\n<p>If you don't want the <code>[UTC-08:00]</code> timezone ID, use <code>toOffsetDateTime</code> to get a <code>OffsetDateTime</code> instead.</p>\n"}],"owner":{"account_id":2310125,"reputation":1532,"user_id":2028440,"accept_rate":25,"display_name":"Bằng Rikimaru"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":77005042,"answer_count":1,"score":3,"last_activity_date":1693371335,"creation_date":1693366624,"question_id":77004841,"body_markdown":"I need to parse a String which represents  datetime to java 8 `DateTime` object to manipulate. For example, the valid strings are (**ALL datetime components (except year) are optional**):\r\n\r\n```\r\n2015\r\n2015-01\r\n2015-01-01\r\n2015-02-03T00\r\n2015-02-03T00:30\r\n2015-02-03T00:30:50\r\n2015-02-03T00:30:50Z\r\n2015-02-03T00:30:50.333Z\r\n2015-02-03T00:30:50.333+03:00\r\n2015-02-03T00:30:50.333+0300\r\n2015-02-03T00:30:50.333-08\r\n2015-02-03T00:30:50.333GMT+8\r\n2015-02-03GMT+8\r\n2015-02UTC-3\r\n2015-02PST\r\n...\r\n```\r\n\r\nThe best code (with my adjustments from https://stackoverflow.com/a/65985789/2028440) which I&#39;ve found from https://stackoverflow.com/a/52823661/2028440,\r\n\r\n```\r\n                DateTimeFormatter dtf = new DateTimeFormatterBuilder()\r\n                .appendValue(ChronoField.YEAR, 4)\r\n                .appendPattern(&quot;[[&#39;-&#39;]MM[[&#39;-&#39;]dd[[&#39;T&#39;]HH[[&#39;:&#39;]mm[[&#39;:&#39;]ss[&#39;.&#39;SSS]]]]]][Z][O][VV]&quot;)\r\n                .parseDefaulting(ChronoField.MONTH_OF_YEAR, 1)\r\n                .parseDefaulting(ChronoField.DAY_OF_MONTH, 1)\r\n                .parseDefaulting(ChronoField.HOUR_OF_DAY, 0)\r\n                .parseDefaulting(ChronoField.MINUTE_OF_HOUR, 0)\r\n                .parseDefaulting(ChronoField.SECOND_OF_MINUTE, 0)\r\n                .parseDefaulting(ChronoField.NANO_OF_SECOND, 0)\r\n                .toFormatter();\r\n\r\n        String[] s = {\r\n                &quot;2018&quot;,\r\n                &quot;2018-10&quot;,\r\n                &quot;2018-10-15&quot;,\r\n                &quot;2018-10-15T12:00&quot;,\r\n                &quot;2018-10-15T12:00:30&quot;,\r\n                &quot;2018-10-15T12:00:30.123Z&quot;,\r\n                &quot;2018-10-15T12:00:30.123-0800&quot;,\r\n                &quot;2018-10-15T12:00:30.123UTC-08:00&quot;,\r\n                &quot;2018-10-15T12:00:30.123GMT+9&quot;\r\n        };\r\n        for (String line : s) {\r\n            System.out.println(LocalDateTime.parse(line, dtf));\r\n        }\r\n```\r\n\r\nThe console output is:\r\n\r\n```\r\n2018-01-01T00:00\r\n2018-10-01T00:00\r\n2018-10-15T00:00\r\n2018-10-15T12:00\r\n2018-10-15T12:00:30\r\n2018-10-15T12:00:30.123\r\n2018-10-15T12:00:30.123\r\n2018-10-15T12:00:30.123\r\n2018-10-15T12:00:30.123\r\n```\r\n\r\n\r\nbut it doesn&#39;t parse the time offset properly as the for the three last values it prints `2018-10-15T12:00:30.123`. \r\n\r\nIt should **print the correct time offset** for each of them as well.\r\nHere are the correct outputs for the last 3 test strings:\r\n```\r\n&quot;2018-10-15T12:00:30.123-08:00&quot;\r\n&quot;2018-10-15T12:00:30.123-08:00&quot;\r\n&quot;2018-10-15T12:00:30.123+09:00&quot;\r\n```\r\nIt is like the output from this command: \r\n\r\n```\r\nSystem.out.println(ZonedDateTime.parse(&quot;2018-10-15T12:00:30.123-08:00&quot;).toString());\r\n\r\nprints\r\n\r\n2018-10-15T12:00:30.123-08:00\r\n```\r\n\r\n\r\n\r\nWhen I tried to change from:\r\n\r\n```\r\n            System.out.println(LocalDateTime.parse(line, dtf));\r\n```\r\n\r\nto:\r\n\r\n```\r\n            System.out.println(ZonedDateTime.parse(line, dtf));\r\n```\r\n\r\nI got this error:\r\n\r\n```\r\nException in thread &quot;main&quot; java.time.format.DateTimeParseException: Text &#39;2018&#39; could not be parsed: Unable to obtain ZonedDateTime from TemporalAccessor: {},ISO resolved to 2018-01-01T00:00 of type java.time.format.Parsed\r\n\tat java.base/java.time.format.DateTimeFormatter.createError(DateTimeFormatter.java:2017)\r\n\tat java.base/java.time.format.DateTimeFormatter.parse(DateTimeFormatter.java:1952)\r\n\tat java.base/java.time.ZonedDateTime.parse(ZonedDateTime.java:598)\r\n```\r\n\r\n\r\n\r\n","title":"java.time - How to parse datetime format in various patterns (with ALL optional time components, except YEAR)?","body":"<p>I need to parse a String which represents  datetime to java 8 <code>DateTime</code> object to manipulate. For example, the valid strings are (<strong>ALL datetime components (except year) are optional</strong>):</p>\n<pre><code>2015\n2015-01\n2015-01-01\n2015-02-03T00\n2015-02-03T00:30\n2015-02-03T00:30:50\n2015-02-03T00:30:50Z\n2015-02-03T00:30:50.333Z\n2015-02-03T00:30:50.333+03:00\n2015-02-03T00:30:50.333+0300\n2015-02-03T00:30:50.333-08\n2015-02-03T00:30:50.333GMT+8\n2015-02-03GMT+8\n2015-02UTC-3\n2015-02PST\n...\n</code></pre>\n<p>The best code (with my adjustments from <a href=\"https://stackoverflow.com/a/65985789/2028440\">https://stackoverflow.com/a/65985789/2028440</a>) which I've found from <a href=\"https://stackoverflow.com/a/52823661/2028440\">https://stackoverflow.com/a/52823661/2028440</a>,</p>\n<pre><code>                DateTimeFormatter dtf = new DateTimeFormatterBuilder()\n                .appendValue(ChronoField.YEAR, 4)\n                .appendPattern(&quot;[['-']MM[['-']dd[['T']HH[[':']mm[[':']ss['.'SSS]]]]]][Z][O][VV]&quot;)\n                .parseDefaulting(ChronoField.MONTH_OF_YEAR, 1)\n                .parseDefaulting(ChronoField.DAY_OF_MONTH, 1)\n                .parseDefaulting(ChronoField.HOUR_OF_DAY, 0)\n                .parseDefaulting(ChronoField.MINUTE_OF_HOUR, 0)\n                .parseDefaulting(ChronoField.SECOND_OF_MINUTE, 0)\n                .parseDefaulting(ChronoField.NANO_OF_SECOND, 0)\n                .toFormatter();\n\n        String[] s = {\n                &quot;2018&quot;,\n                &quot;2018-10&quot;,\n                &quot;2018-10-15&quot;,\n                &quot;2018-10-15T12:00&quot;,\n                &quot;2018-10-15T12:00:30&quot;,\n                &quot;2018-10-15T12:00:30.123Z&quot;,\n                &quot;2018-10-15T12:00:30.123-0800&quot;,\n                &quot;2018-10-15T12:00:30.123UTC-08:00&quot;,\n                &quot;2018-10-15T12:00:30.123GMT+9&quot;\n        };\n        for (String line : s) {\n            System.out.println(LocalDateTime.parse(line, dtf));\n        }\n</code></pre>\n<p>The console output is:</p>\n<pre><code>2018-01-01T00:00\n2018-10-01T00:00\n2018-10-15T00:00\n2018-10-15T12:00\n2018-10-15T12:00:30\n2018-10-15T12:00:30.123\n2018-10-15T12:00:30.123\n2018-10-15T12:00:30.123\n2018-10-15T12:00:30.123\n</code></pre>\n<p>but it doesn't parse the time offset properly as the for the three last values it prints <code>2018-10-15T12:00:30.123</code>.</p>\n<p>It should <strong>print the correct time offset</strong> for each of them as well.\nHere are the correct outputs for the last 3 test strings:</p>\n<pre><code>&quot;2018-10-15T12:00:30.123-08:00&quot;\n&quot;2018-10-15T12:00:30.123-08:00&quot;\n&quot;2018-10-15T12:00:30.123+09:00&quot;\n</code></pre>\n<p>It is like the output from this command:</p>\n<pre><code>System.out.println(ZonedDateTime.parse(&quot;2018-10-15T12:00:30.123-08:00&quot;).toString());\n\nprints\n\n2018-10-15T12:00:30.123-08:00\n</code></pre>\n<p>When I tried to change from:</p>\n<pre><code>            System.out.println(LocalDateTime.parse(line, dtf));\n</code></pre>\n<p>to:</p>\n<pre><code>            System.out.println(ZonedDateTime.parse(line, dtf));\n</code></pre>\n<p>I got this error:</p>\n<pre><code>Exception in thread &quot;main&quot; java.time.format.DateTimeParseException: Text '2018' could not be parsed: Unable to obtain ZonedDateTime from TemporalAccessor: {},ISO resolved to 2018-01-01T00:00 of type java.time.format.Parsed\n    at java.base/java.time.format.DateTimeFormatter.createError(DateTimeFormatter.java:2017)\n    at java.base/java.time.format.DateTimeFormatter.parse(DateTimeFormatter.java:1952)\n    at java.base/java.time.ZonedDateTime.parse(ZonedDateTime.java:598)\n</code></pre>\n"},{"tags":["java","apache-camel","apache-camel-3"],"comments":[{"owner":{"account_id":2269593,"reputation":43907,"user_id":1997376,"accept_rate":100,"display_name":"Nicolas Filotto"},"score":0,"creation_date":1693574337,"post_id":77005051,"comment_id":135782936,"body_markdown":"What you try to do/achieve is really unclear, would you mind clarifying a bit more?","body":"What you try to do/achieve is really unclear, would you mind clarifying a bit more?"},{"owner":{"account_id":20936085,"reputation":483,"user_id":15381219,"display_name":"Nishikant Tayade"},"score":0,"creation_date":1693663683,"post_id":77005051,"comment_id":135791991,"body_markdown":"@NicolasFilotto, I can&#39;t put code snippet as it is organizations code, but here is a sitaution, I have a seda endpoint with concurrent consumers, this consumer picks up a message from internal blocking queue right? once this consumer/thread sends this message to another endpoint, I want the thread to be available immediately for other message, but it seems to be blocked for 4-5 sec, I am checking if there is a timeout setting, for which thread is waiting, but in meanwhile I wanted to know is there any setting available with Apache camel seda, which will make thread not blocked?","body":"@NicolasFilotto, I can&#39;t put code snippet as it is organizations code, but here is a sitaution, I have a seda endpoint with concurrent consumers, this consumer picks up a message from internal blocking queue right? once this consumer/thread sends this message to another endpoint, I want the thread to be available immediately for other message, but it seems to be blocked for 4-5 sec, I am checking if there is a timeout setting, for which thread is waiting, but in meanwhile I wanted to know is there any setting available with Apache camel seda, which will make thread not blocked?"},{"owner":{"account_id":20936085,"reputation":483,"user_id":15381219,"display_name":"Nishikant Tayade"},"score":0,"creation_date":1693663704,"post_id":77005051,"comment_id":135791995,"body_markdown":"@NicolasFilotto, I will try to add some psuedo code.","body":"@NicolasFilotto, I will try to add some psuedo code."}],"owner":{"account_id":20936085,"reputation":483,"user_id":15381219,"display_name":"Nishikant Tayade"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693370890,"creation_date":1693370890,"question_id":77005051,"body_markdown":"I have a setup, one party is sending data, which is comes to seda endpoint with concurrent consumers defined as 10 in xml route defination, when the message is transformed, my guess is the message is picked up from queue by a thread and it starts working on it, when the message transformation is done, it sends the data to other party, other party responds to a different thread.\r\n\r\nSo, as other party is responding to diff thread, the first thread which sends the message, should not be blocked, it should be released.\r\n\r\n\r\n\r\nI tried adding \r\n\r\n\r\n```\r\n.process(exchange-&gt;{\r\nlog.info(&quot;TH STATE {} &quot;Thread.currentThread().getState();)\r\n});\r\n```\r\n\r\nto all the code in above setup code, but the thread state is always runnable not even running,\r\nis there any in Apache camel to log the cocurrent consumers seda threads in route definations in XML? or any other in-built class that can help?","title":"How to log concurrent consumer thread states in Apache camel seda?","body":"<p>I have a setup, one party is sending data, which is comes to seda endpoint with concurrent consumers defined as 10 in xml route defination, when the message is transformed, my guess is the message is picked up from queue by a thread and it starts working on it, when the message transformation is done, it sends the data to other party, other party responds to a different thread.</p>\n<p>So, as other party is responding to diff thread, the first thread which sends the message, should not be blocked, it should be released.</p>\n<p>I tried adding</p>\n<pre><code>.process(exchange-&gt;{\nlog.info(&quot;TH STATE {} &quot;Thread.currentThread().getState();)\n});\n</code></pre>\n<p>to all the code in above setup code, but the thread state is always runnable not even running,\nis there any in Apache camel to log the cocurrent consumers seda threads in route definations in XML? or any other in-built class that can help?</p>\n"},{"tags":["java","spring","spring-batch"],"answers":[{"tags":[],"owner":{"account_id":1218248,"reputation":757,"user_id":1185419,"accept_rate":62,"display_name":"The Anh Nguyen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1693369743,"creation_date":1693369743,"answer_id":77004993,"question_id":77004726,"body_markdown":"Solved it.\\\r\nI reconfigure the ItemReader to return the &quot;chunk&quot; that needs to be processed\r\n\r\n`Job.java`\r\n```\r\n@Bean\r\npublic Job job(JobBuilderFactory jobs, StepBuilderFactory steps) {\r\n    return jobs.get(&quot;job&quot;)\r\n            .start(steps.get(&quot;step&quot;)\r\n                    .&lt;List&lt;Item&gt;, List&lt;Item&gt;chunk(1) // Use chunk size of 1, as the reader now returns a chunk\r\n                    .reader(itemReader())\r\n                    .processor(itemProcessor())\r\n                    .writer(itemWriter())\r\n                    .build())\r\n            .build();\r\n}\r\n\r\n@Bean\r\n@StepScope\r\npublic ItemReader&lt;List&lt;Item&gt;&gt; itemReader() {\r\n        // Prepare the items from your data source ...\r\n\r\n        int chunkSize = 10; // Set your desired chunk size here\r\n        return new ChunkItemReader&lt;&gt;(items, chunkSize);\r\n    }\r\n```\r\n\r\n`ChunkItemReader.java`\r\n```\r\nimport org.springframework.batch.item.ItemReader;\r\n\r\nimport java.util.List;\r\n\r\npublic class ChunkItemReader&lt;T&gt; implements ItemReader&lt;List&lt;T&gt;&gt; {\r\n\r\n    private final List&lt;T&gt; items;\r\n    private final int chunkSize;\r\n    private int currentIndex;\r\n\r\n    public ChunkItemReader(List&lt;T&gt; items, int chunkSize) {\r\n        this.items = items;\r\n        this.chunkSize = chunkSize;\r\n        this.currentIndex = 0;\r\n    }\r\n\r\n    @Override\r\n    public List&lt;T&gt; read() {\r\n        int endIndex = Math.min(currentIndex + chunkSize, items.size());\r\n        if (currentIndex &lt; endIndex) {\r\n            List&lt;T&gt; chunk = items.subList(currentIndex, endIndex);\r\n            currentIndex = endIndex;\r\n            return chunk;\r\n        }\r\n        return null; // End of data\r\n    }\r\n}\r\n```","title":"Spring batch - processing a subset of multiple items at once","body":"<p>Solved it.<br />\nI reconfigure the ItemReader to return the &quot;chunk&quot; that needs to be processed</p>\n<p><code>Job.java</code></p>\n<pre><code>@Bean\npublic Job job(JobBuilderFactory jobs, StepBuilderFactory steps) {\n    return jobs.get(&quot;job&quot;)\n            .start(steps.get(&quot;step&quot;)\n                    .&lt;List&lt;Item&gt;, List&lt;Item&gt;chunk(1) // Use chunk size of 1, as the reader now returns a chunk\n                    .reader(itemReader())\n                    .processor(itemProcessor())\n                    .writer(itemWriter())\n                    .build())\n            .build();\n}\n\n@Bean\n@StepScope\npublic ItemReader&lt;List&lt;Item&gt;&gt; itemReader() {\n        // Prepare the items from your data source ...\n\n        int chunkSize = 10; // Set your desired chunk size here\n        return new ChunkItemReader&lt;&gt;(items, chunkSize);\n    }\n</code></pre>\n<p><code>ChunkItemReader.java</code></p>\n<pre><code>import org.springframework.batch.item.ItemReader;\n\nimport java.util.List;\n\npublic class ChunkItemReader&lt;T&gt; implements ItemReader&lt;List&lt;T&gt;&gt; {\n\n    private final List&lt;T&gt; items;\n    private final int chunkSize;\n    private int currentIndex;\n\n    public ChunkItemReader(List&lt;T&gt; items, int chunkSize) {\n        this.items = items;\n        this.chunkSize = chunkSize;\n        this.currentIndex = 0;\n    }\n\n    @Override\n    public List&lt;T&gt; read() {\n        int endIndex = Math.min(currentIndex + chunkSize, items.size());\n        if (currentIndex &lt; endIndex) {\n            List&lt;T&gt; chunk = items.subList(currentIndex, endIndex);\n            currentIndex = endIndex;\n            return chunk;\n        }\n        return null; // End of data\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1218248,"reputation":757,"user_id":1185419,"accept_rate":62,"display_name":"The Anh Nguyen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":89,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77004993,"answer_count":1,"score":0,"last_activity_date":1693369743,"creation_date":1693364307,"question_id":77004726,"body_markdown":"I have a list of numerous items that I split into chunks of 10 each.\\\r\nBut the `itemProcessor` only processes 1 by 1 item in a chunk.\r\n\r\nHow can I **aggregate all items in each chunk into a list** and then make a call (contains that list) to the external API because I don&#39;t want 1 API request per 1 item?\r\n\r\n```\r\n@Bean\r\npublic Job job(JobBuilderFactory jobs, StepBuilderFactory steps) {\r\n    return jobs.get(&quot;job&quot;)\r\n            .start(steps.get(&quot;step&quot;)\r\n                    .&lt;Item, Item&gt;chunk(10)\r\n                    .reader(itemReader())\r\n                    .processor(itemProcessor())\r\n                    .writer(itemWriter())\r\n                    .build())\r\n            .build();\r\n}\r\n```","title":"Spring batch - processing a subset of multiple items at once","body":"<p>I have a list of numerous items that I split into chunks of 10 each.<br />\nBut the <code>itemProcessor</code> only processes 1 by 1 item in a chunk.</p>\n<p>How can I <strong>aggregate all items in each chunk into a list</strong> and then make a call (contains that list) to the external API because I don't want 1 API request per 1 item?</p>\n<pre><code>@Bean\npublic Job job(JobBuilderFactory jobs, StepBuilderFactory steps) {\n    return jobs.get(&quot;job&quot;)\n            .start(steps.get(&quot;step&quot;)\n                    .&lt;Item, Item&gt;chunk(10)\n                    .reader(itemReader())\n                    .processor(itemProcessor())\n                    .writer(itemWriter())\n                    .build())\n            .build();\n}\n</code></pre>\n"},{"tags":["java","maven","maven-3"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1693664673,"post_id":77004989,"comment_id":135792070,"body_markdown":"Show your pom file also the full logging output of the error ... also I suppose there is a test failure?","body":"Show your pom file also the full logging output of the error ... also I suppose there is a test failure?"}],"owner":{"account_id":1979166,"reputation":145,"user_id":1776181,"accept_rate":62,"display_name":"deepakguna"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":128,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693369696,"creation_date":1693369696,"question_id":77004989,"body_markdown":"I was working on a project for quite some time and everything went fine including the compile, however from yesterday iam getting SurefireBooterForkException \r\n\r\nFollowing are the versions i use \r\n\r\n\r\nmaven-surefire-plugin version is 3.1.2\r\nOpenJDK 17\r\n\r\nBelow is the stack trace :\r\n\r\n\r\n    [ERROR] Please refer to dump files (if any exist) [date].dump, [date]-jvmRun[N].dump and [date].dumpstream.\r\n    [ERROR] There was an error in the forked process\r\n    [ERROR] org.apache.maven.surefire.booter.SurefireBooterForkException: There was an error in the forked process\r\n    [ERROR] \tat org.apache.maven.plugin.surefire.booterclient.ForkStarter.fork(ForkStarter.java:628)\r\n    [ERROR] \tat org.apache.maven.plugin.surefire.booterclient.ForkStarter.run(ForkStarter.java:285)\r\n    [ERROR] \tat org.apache.maven.plugin.surefire.booterclient.ForkStarter.run(ForkStarter.java:250)\r\n    [ERROR] \tat org.apache.maven.plugin.surefire.AbstractSurefireMojo.executeProvider(AbstractSurefireMojo.java:1203)\r\n\r\n\r\nyour insight on this is much appreciated. Thank you! ","title":"maven surefire plugin - org.apache.maven.surefire.booter.SurefireBooterForkException: There was an error in the forked process","body":"<p>I was working on a project for quite some time and everything went fine including the compile, however from yesterday iam getting SurefireBooterForkException</p>\n<p>Following are the versions i use</p>\n<p>maven-surefire-plugin version is 3.1.2\nOpenJDK 17</p>\n<p>Below is the stack trace :</p>\n<pre><code>[ERROR] Please refer to dump files (if any exist) [date].dump, [date]-jvmRun[N].dump and [date].dumpstream.\n[ERROR] There was an error in the forked process\n[ERROR] org.apache.maven.surefire.booter.SurefireBooterForkException: There was an error in the forked process\n[ERROR]     at org.apache.maven.plugin.surefire.booterclient.ForkStarter.fork(ForkStarter.java:628)\n[ERROR]     at org.apache.maven.plugin.surefire.booterclient.ForkStarter.run(ForkStarter.java:285)\n[ERROR]     at org.apache.maven.plugin.surefire.booterclient.ForkStarter.run(ForkStarter.java:250)\n[ERROR]     at org.apache.maven.plugin.surefire.AbstractSurefireMojo.executeProvider(AbstractSurefireMojo.java:1203)\n</code></pre>\n<p>your insight on this is much appreciated. Thank you!</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":28020964,"reputation":1205,"user_id":21401783,"display_name":"Dinux"},"score":1,"creation_date":1693367923,"post_id":77004877,"comment_id":135749849,"body_markdown":"Pls post a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example) of what you’ve tried.","body":"Pls post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of what you’ve tried."}],"answers":[{"tags":[],"owner":{"account_id":8433338,"reputation":20053,"user_id":6328256,"display_name":"Sash Sinha"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693368870,"creation_date":1693368534,"answer_id":77004937,"question_id":77004877,"body_markdown":"Consider utilizing [&lt;code&gt;itertools.&lt;b&gt;combinations&lt;/b&gt;&lt;/code&gt;][1] to implement an approach to solve your [Knapsack Problem](https://en.wikipedia.org/wiki/Knapsack_problem):\r\n\r\n    from itertools import combinations\r\n    from typing import Optional\r\n    \r\n    \r\n    def get_min_cost(cost: list[int], compatible1: list[int], compatible2: list[int],\r\n                     min_compatible: int) -&gt; Optional[int]:\r\n      n = len(cost)\r\n      min_cost = None\r\n      for num_items in range(min_compatible, n + 1):\r\n        for indices in combinations(range(n), num_items):\r\n          c1_count = sum(compatible1[i] for i in indices)\r\n          c2_count = sum(compatible2[i] for i in indices)\r\n          total_cost = sum(cost[i] for i in indices)\r\n          if c1_count &gt;= min_compatible and c2_count &gt;= min_compatible:\r\n            min_cost = min(min_cost,\r\n                           total_cost) if min_cost is not None else total_cost\r\n      return min_cost\r\n    \r\n    \r\n    result = get_min_cost(cost=[2, 3, 1, 6, 4],\r\n                          compatible1=[1, 1, 0, 1, 0],\r\n                          compatible2=[0, 1, 0, 0, 1],\r\n                          min_compatible=2)\r\n    print(result)\r\n\r\n**Output:**\r\n    \r\n    9\r\n\r\n\r\n  [1]: https://docs.python.org/3/library/itertools.html#itertools.combinations","title":"find min cost in selecting values","body":"<p>Consider utilizing <a href=\"https://docs.python.org/3/library/itertools.html#itertools.combinations\" rel=\"nofollow noreferrer\"><code>itertools.<b>combinations</b></code></a> to implement an approach to solve your <a href=\"https://en.wikipedia.org/wiki/Knapsack_problem\" rel=\"nofollow noreferrer\">Knapsack Problem</a>:</p>\n<pre><code>from itertools import combinations\nfrom typing import Optional\n\n\ndef get_min_cost(cost: list[int], compatible1: list[int], compatible2: list[int],\n                 min_compatible: int) -&gt; Optional[int]:\n  n = len(cost)\n  min_cost = None\n  for num_items in range(min_compatible, n + 1):\n    for indices in combinations(range(n), num_items):\n      c1_count = sum(compatible1[i] for i in indices)\n      c2_count = sum(compatible2[i] for i in indices)\n      total_cost = sum(cost[i] for i in indices)\n      if c1_count &gt;= min_compatible and c2_count &gt;= min_compatible:\n        min_cost = min(min_cost,\n                       total_cost) if min_cost is not None else total_cost\n  return min_cost\n\n\nresult = get_min_cost(cost=[2, 3, 1, 6, 4],\n                      compatible1=[1, 1, 0, 1, 0],\n                      compatible2=[0, 1, 0, 0, 1],\n                      min_compatible=2)\nprint(result)\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>9\n</code></pre>\n"}],"owner":{"account_id":9767330,"reputation":11,"user_id":7240338,"display_name":"Ravi Sanka"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1693368870,"creation_date":1693367409,"question_id":77004877,"body_markdown":"I have come across this question and not able to find optimal solution.\r\ngiven 3 lists and 1 number, cost - [2,3,1,6,4] - cost of picking the particular element compatible1 -[1,1,0,1,0]  compatible2 - [0,1,0,0,1] \r\nmin compatible - 2\r\n\r\nso here, we have to pick values from cost such that there are min 2 (given number) that are tagged as 1 in compatible 1 and compatible 2. The question is to find min total cost of picking those indexes.\r\n\r\nwe have to pick index 0, 1, 5 to get least total cost. ( index 0 and 1 for compatible 1, and 1, 5 for compatible 2) totalling to cost of 9.\r\n\r\n\r\ni tried to sort cost and fetch common first and then different ones but its not ideal.","title":"find min cost in selecting values","body":"<p>I have come across this question and not able to find optimal solution.\ngiven 3 lists and 1 number, cost - [2,3,1,6,4] - cost of picking the particular element compatible1 -[1,1,0,1,0]  compatible2 - [0,1,0,0,1]\nmin compatible - 2</p>\n<p>so here, we have to pick values from cost such that there are min 2 (given number) that are tagged as 1 in compatible 1 and compatible 2. The question is to find min total cost of picking those indexes.</p>\n<p>we have to pick index 0, 1, 5 to get least total cost. ( index 0 and 1 for compatible 1, and 1, 5 for compatible 2) totalling to cost of 9.</p>\n<p>i tried to sort cost and fetch common first and then different ones but its not ideal.</p>\n"},{"tags":["java","spring","spring-integration","spring-retry"],"answers":[{"tags":[],"owner":{"account_id":1288095,"reputation":169316,"user_id":1240763,"display_name":"Gary Russell"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1693347729,"creation_date":1693337884,"answer_id":77003201,"question_id":77002983,"body_markdown":"You need `include`. `exclude` means retry all exceptions except these.\r\n\r\nIn newer versions; these are deprecated and replaced with `retryFor` and `noRetryFor` respectively.\r\n\r\n```java\r\n\t/**\r\n\t * Exception types that are retryable. Defaults to empty (and, if exclude is also\r\n\t * empty, all exceptions are retried).\r\n\t * @return exception types to retry\r\n\t * @deprecated in favor of {@link #retryFor()}.\r\n\t */\r\n\t@AliasFor(&quot;retryFor&quot;)\r\n\t@Deprecated\r\n\tClass&lt;? extends Throwable&gt;[] include() default {};\r\n\r\n\t/**\r\n\t * Exception types that are retryable. Defaults to empty (and, if noRetryFor is also\r\n\t * empty, all exceptions are retried).\r\n\t * @return exception types to retry\r\n\t * @since 2.0\r\n\t */\r\n\t@AliasFor(&quot;include&quot;)\r\n\tClass&lt;? extends Throwable&gt;[] retryFor() default {};\r\n\r\n\t/**\r\n\t * Exception types that are not retryable. Defaults to empty (and if include is also\r\n\t * empty all exceptions are retried). If includes is empty but exclude is not, all\r\n\t * not excluded exceptions are retried\r\n\t * @return exception types not to retry\r\n\t * @deprecated in favor of {@link #noRetryFor()}.\r\n\t */\r\n\t@Deprecated\r\n\t@AliasFor(&quot;noRetryFor&quot;)\r\n\tClass&lt;? extends Throwable&gt;[] exclude() default {};\r\n\r\n\t/**\r\n\t * Exception types that are not retryable. Defaults to empty (and, if retryFor is also\r\n\t * empty, all exceptions are retried). If retryFor is empty but noRetryFor is not, all\r\n\t * other exceptions are retried\r\n\t * @return exception types not to retry\r\n\t * @since 2.0\r\n\t */\r\n\t@AliasFor(&quot;exclude&quot;)\r\n\tClass&lt;? extends Throwable&gt;[] noRetryFor() default {};\r\n```","title":"Spring Retry is not retrying based on exclude keyword","body":"<p>You need <code>include</code>. <code>exclude</code> means retry all exceptions except these.</p>\n<p>In newer versions; these are deprecated and replaced with <code>retryFor</code> and <code>noRetryFor</code> respectively.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    /**\n     * Exception types that are retryable. Defaults to empty (and, if exclude is also\n     * empty, all exceptions are retried).\n     * @return exception types to retry\n     * @deprecated in favor of {@link #retryFor()}.\n     */\n    @AliasFor(&quot;retryFor&quot;)\n    @Deprecated\n    Class&lt;? extends Throwable&gt;[] include() default {};\n\n    /**\n     * Exception types that are retryable. Defaults to empty (and, if noRetryFor is also\n     * empty, all exceptions are retried).\n     * @return exception types to retry\n     * @since 2.0\n     */\n    @AliasFor(&quot;include&quot;)\n    Class&lt;? extends Throwable&gt;[] retryFor() default {};\n\n    /**\n     * Exception types that are not retryable. Defaults to empty (and if include is also\n     * empty all exceptions are retried). If includes is empty but exclude is not, all\n     * not excluded exceptions are retried\n     * @return exception types not to retry\n     * @deprecated in favor of {@link #noRetryFor()}.\n     */\n    @Deprecated\n    @AliasFor(&quot;noRetryFor&quot;)\n    Class&lt;? extends Throwable&gt;[] exclude() default {};\n\n    /**\n     * Exception types that are not retryable. Defaults to empty (and, if retryFor is also\n     * empty, all exceptions are retried). If retryFor is empty but noRetryFor is not, all\n     * other exceptions are retried\n     * @return exception types not to retry\n     * @since 2.0\n     */\n    @AliasFor(&quot;exclude&quot;)\n    Class&lt;? extends Throwable&gt;[] noRetryFor() default {};\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15695377,"reputation":25,"user_id":11325128,"display_name":"lavin249"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693368641,"creation_date":1693367525,"answer_id":77004882,"question_id":77002983,"body_markdown":"I was able to figure out the issue. I used [SimpleRetryPolicy](https://docs.spring.io/spring-retry/docs/api/current/org/springframework/retry/policy/SimpleRetryPolicy.html)\r\n\r\n``` lang-java\r\npublic SimpleRetryPolicy(int maxAttempts,\r\n                         Map&lt;Class&lt;? extends Throwable&gt;,Boolean&gt; retryableExceptions,\r\n                         boolean traverseCauses)\r\n```\r\n\r\nKeeping flag for `traverseCauses` as `true` leads to matching the exception until match is found. \r\n\r\nHashMap has the exception which should not be retried and hence it&#39;s value i.e. the boolean flag is set to `false`. It simply states that `MessageTimeoutException` should not be retried. \r\n\r\n``` lang-java\r\n\t@Bean\r\n\tpublic RequestHandlerRetryAdvice retryAdvice() {\r\n\t\tRequestHandlerRetryAdvice retryAdvice = new RequestHandlerRetryAdvice();\r\n\t\tRetryTemplate retryTemplate = new RetryTemplate();\r\n\t\tFixedBackOffPolicy fixedBackOffPolicy = new FixedBackOffPolicy();\r\n\t\tfixedBackOffPolicy.setBackOffPeriod(50);\r\n\t\tMap&lt;Class&lt;? extends Throwable&gt;, Boolean&gt; mapExceptions = new HashMap&lt;Class&lt;? extends Throwable&gt;, Boolean&gt;();\r\n\t\tmapExceptions.put(MessageTimeoutException.class, false);\r\n\t\tSimpleRetryPolicy retryPolicy = new SimpleRetryPolicy(3, mapExceptions, true);\r\n\t\tretryTemplate.setBackOffPolicy(fixedBackOffPolicy);\r\n\t\tretryTemplate.setRetryPolicy(retryPolicy);\r\n\t\tretryAdvice.setRetryTemplate(retryTemplate);\r\n\t\treturn retryAdvice;\r\n\t}\r\n```\r\n\r\n\r\n","title":"Spring Retry is not retrying based on exclude keyword","body":"<p>I was able to figure out the issue. I used <a href=\"https://docs.spring.io/spring-retry/docs/api/current/org/springframework/retry/policy/SimpleRetryPolicy.html\" rel=\"nofollow noreferrer\">SimpleRetryPolicy</a></p>\n<pre class=\"lang-java prettyprint-override\"><code>public SimpleRetryPolicy(int maxAttempts,\n                         Map&lt;Class&lt;? extends Throwable&gt;,Boolean&gt; retryableExceptions,\n                         boolean traverseCauses)\n</code></pre>\n<p>Keeping flag for <code>traverseCauses</code> as <code>true</code> leads to matching the exception until match is found.</p>\n<p>HashMap has the exception which should not be retried and hence it's value i.e. the boolean flag is set to <code>false</code>. It simply states that <code>MessageTimeoutException</code> should not be retried.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Bean\n    public RequestHandlerRetryAdvice retryAdvice() {\n        RequestHandlerRetryAdvice retryAdvice = new RequestHandlerRetryAdvice();\n        RetryTemplate retryTemplate = new RetryTemplate();\n        FixedBackOffPolicy fixedBackOffPolicy = new FixedBackOffPolicy();\n        fixedBackOffPolicy.setBackOffPeriod(50);\n        Map&lt;Class&lt;? extends Throwable&gt;, Boolean&gt; mapExceptions = new HashMap&lt;Class&lt;? extends Throwable&gt;, Boolean&gt;();\n        mapExceptions.put(MessageTimeoutException.class, false);\n        SimpleRetryPolicy retryPolicy = new SimpleRetryPolicy(3, mapExceptions, true);\n        retryTemplate.setBackOffPolicy(fixedBackOffPolicy);\n        retryTemplate.setRetryPolicy(retryPolicy);\n        retryAdvice.setRetryTemplate(retryTemplate);\n        return retryAdvice;\n    }\n</code></pre>\n"}],"owner":{"account_id":15695377,"reputation":25,"user_id":11325128,"display_name":"lavin249"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1693368641,"creation_date":1693335591,"question_id":77002983,"body_markdown":"I am using Spring Retry. Earlier, I used `@Retryable(value= Exception.class)` &amp; it worked correctly with `retryAdvice()`. The code correctly retried after getting any kind of exception. Recently, we have a requirement to not retry when MessageTimeoutException is encountered. In all other exceptions, we need to retry.\r\n\r\n\r\n\r\n``` lang-java\r\n    @Override\r\n\t@Retryable(exclude = MessageTimeoutException.class)\r\n\t//@Retryable(exclude = org.springframework.integration.MessageTimeoutException.class)\r\n\tpublic byte[] sendMessage(byte[] message, String guid) {\t\r\n\t\tresponseBytes = tcpClientGateway.send(message);\r\n\t\treturn responseBytes;\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic RequestHandlerRetryAdvice retryAdvice() {\r\n\t\tRequestHandlerRetryAdvice retryAdvice = new RequestHandlerRetryAdvice();\r\n\t\tRetryTemplate retryTemplate = new RetryTemplate();\r\n\t\tFixedBackOffPolicy fixedBackOffPolicy = new FixedBackOffPolicy();\r\n\t\tfixedBackOffPolicy.setBackOffPeriod(50);\r\n\t\tSimpleRetryPolicy retryPolicy = new SimpleRetryPolicy();\r\n\t\tretryPolicy.setMaxAttempts(3);\r\n\t\tretryTemplate.setBackOffPolicy(fixedBackOffPolicy);\r\n\t\tretryTemplate.setRetryPolicy(retryPolicy);\r\n\t\tretryAdvice.setRetryTemplate(retryTemplate);\r\n\t\treturn retryAdvice;\r\n\t}\r\n\r\n    @Bean\r\n    @ServiceActivator(inputChannel = &quot;emirOutboundChannel&quot;)\r\n    public MessageHandler emirOutbound(AbstractClientConnectionFactory emirTcpCachedClientConnectionFactory) {\r\n        TcpOutboundGateway tcpOutboundGateway = new TcpOutboundGateway();\r\n        List&lt;Advice&gt; list = new ArrayList&lt;&gt;();\r\n        list.add(retryAdvice());\r\n        tcpOutboundGateway.setAdviceChain(list);\r\n        tcpOutboundGateway.setRemoteTimeout(16000);\r\n        tcpOutboundGateway.setRequestTimeout(16000);\r\n        tcpOutboundGateway.setSendTimeout(16000);\r\n        tcpOutboundGateway.setConnectionFactory(emirTcpCachedClientConnectionFactory);\r\n        return tcpOutboundGateway;\r\n    }\r\n```\r\nHere&#39;s the exception that I wish to perform re-try upon. I am wondering what am I missing?\r\n\r\n``` lang-java\r\n2023-08-16 21:47:54.635 my-project [Thread Id = 351182] ERROR org.springframework.integration.ip.tcp.TcpOutboundGateway:149 - Tcp Gateway exception\r\norg.springframework.integration.MessageTimeoutException: Timed out waiting for response; component: EmirOutbound\r\n\tat org.springframework.integration.ip.tcp.TcpOutboundGateway.getReply(TcpOutboundGateway.java:293) ~[spring-integration-ip-5.5.1.jar!/:5.5.1]\r\n\tat org.springframework.integration.ip.tcp.TcpOutboundGateway.handleRequestMessage(TcpOutboundGateway.java:234) ~[spring-integration-ip-5.5.1.jar!/:5.5.1]\r\n\tat org.springframework.integration.handler.AbstractReplyProducingMessageHandler$AdvisedRequestHandler.handleRequestMessage(AbstractReplyProducingMessageHandler.java:206) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\r\n\tat jdk.internal.reflect.GeneratedMethodAccessor153.invoke(Unknown Source) ~[?:?]\r\n\tat jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\r\n\tat java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.integration.handler.advice.AbstractRequestHandlerAdvice$CallbackImpl.cloneAndExecute(AbstractRequestHandlerAdvice.java:166) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\r\n\tat org.springframework.integration.handler.advice.RequestHandlerRetryAdvice.lambda$doInvoke$1(RequestHandlerRetryAdvice.java:86) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\r\n\tat org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:329) ~[spring-retry-1.3.1.jar!/:?]\r\n\tat org.springframework.retry.support.RetryTemplate.execute(RetryTemplate.java:255) ~[spring-retry-1.3.1.jar!/:?]\r\n\tat org.springframework.integration.handler.advice.RequestHandlerRetryAdvice.doInvoke(RequestHandlerRetryAdvice.java:86) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\r\n\tat org.springframework.integration.handler.advice.AbstractRequestHandlerAdvice.invoke(AbstractRequestHandlerAdvice.java:67) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat com.sun.proxy.$Proxy274.handleRequestMessage(Unknown Source) ~[?:?]\r\n\tat org.springframework.integration.handler.AbstractReplyProducingMessageHandler.doInvokeAdvisedRequestHandler(AbstractReplyProducingMessageHandler.java:153) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\r\n\tat org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal(AbstractReplyProducingMessageHandler.java:137) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\r\n\tat org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:56) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\r\n\tat org.springframework.integration.dispatcher.AbstractDispatcher.tryOptimizedDispatch(AbstractDispatcher.java:115) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\r\n\tat org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch(UnicastingDispatcher.java:133) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\r\n\tat org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch(UnicastingDispatcher.java:106) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\r\n\tat org.springframework.integration.channel.AbstractSubscribableChannel.doSend(AbstractSubscribableChannel.java:72) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\r\n\tat org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:317) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\r\n\tat org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:272) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:187) ~[spring-messaging-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSendAndReceive(GenericMessagingTemplate.java:233) ~[spring-messaging-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSendAndReceive(GenericMessagingTemplate.java:47) ~[spring-messaging-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.messaging.core.AbstractMessagingTemplate.sendAndReceive(AbstractMessagingTemplate.java:46) ~[spring-messaging-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.integration.core.MessagingTemplate.sendAndReceive(MessagingTemplate.java:97) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\r\n\tat org.springframework.integration.core.MessagingTemplate.sendAndReceive(MessagingTemplate.java:38) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\r\n\tat org.springframework.messaging.core.AbstractMessagingTemplate.convertSendAndReceive(AbstractMessagingTemplate.java:96) ~[spring-messaging-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.messaging.core.AbstractMessagingTemplate.convertSendAndReceive(AbstractMessagingTemplate.java:86) ~[spring-messaging-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.integration.gateway.MessagingGatewaySupport.doSendAndReceive(MessagingGatewaySupport.java:513) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\r\n\tat org.springframework.integration.gateway.MessagingGatewaySupport.sendAndReceive(MessagingGatewaySupport.java:486) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\r\n\tat org.springframework.integration.gateway.GatewayProxyFactoryBean.sendOrSendAndReceive(GatewayProxyFactoryBean.java:661) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\r\n\tat org.springframework.integration.gateway.GatewayProxyFactoryBean.invokeGatewayMethod(GatewayProxyFactoryBean.java:586) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\r\n\tat org.springframework.integration.gateway.GatewayProxyFactoryBean.doInvoke(GatewayProxyFactoryBean.java:553) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\r\n\tat org.springframework.integration.gateway.GatewayProxyFactoryBean.invoke(GatewayProxyFactoryBean.java:542) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat com.sun.proxy.$Proxy240.send(Unknown Source) ~[?:?]\r\n\tat com.famulus.claimadj.dao.Emir.service.impl.EmirTcpMessageServiceImpl.sendMessage(EmirTcpMessageServiceImpl.java:32) ~[famulus-claimadj-dao-Emir-1.0.0.jar!/:1.0.0]\r\n\tat com.famulus.claimadj.dao.Emir.service.impl.EmirTcpMessageServiceImpl$$FastClassBySpringCGLIB$$a2bdd82b.invoke(&lt;generated&gt;) ~[famulus-claimadj-dao-Emir-1.0.0.jar!/:1.0.0]\r\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.retry.interceptor.RetryOperationsInterceptor$1.doWithRetry(RetryOperationsInterceptor.java:93) ~[spring-retry-1.3.1.jar!/:?]\r\n\tat org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:329) ~[spring-retry-1.3.1.jar!/:?]\r\n\tat org.springframework.retry.support.RetryTemplate.execute(RetryTemplate.java:209) ~[spring-retry-1.3.1.jar!/:?]\r\n\tat org.springframework.retry.interceptor.RetryOperationsInterceptor.invoke(RetryOperationsInterceptor.java:119) ~[spring-retry-1.3.1.jar!/:?]\r\n\tat org.springframework.retry.annotation.AnnotationAwareRetryOperationsInterceptor.invoke(AnnotationAwareRetryOperationsInterceptor.java:163) ~[spring-retry-1.3.1.jar!/:?]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat com.famulus.claimadj.dao.Emir.service.impl.EmirTcpMessageServiceImpl$$EnhancerBySpringCGLIB$$e3eb27ea.sendMessage(&lt;generated&gt;) ~[famulus-claimadj-dao-Emir-1.0.0.jar!/:1.0.0]\r\n\tat com.famulus.claimadj.logic.services.impl.SendMessageToSocketServiceImpl.sendMessageToEmir(SendMessageToSocketServiceImpl.java:35) ~[famulus-claimadj-logic-1.0.0.jar!/:1.0.0]\r\n\tat com.famulus.claimadj.logic.services.impl.SendMessageToSocketServiceImpl$$FastClassBySpringCGLIB$$14e5b0a5.invoke(&lt;generated&gt;) ~[famulus-claimadj-logic-1.0.0.jar!/:1.0.0]\r\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat com.famulus.common.frameworks.logging.LoggingAspect.logAnnotateClass(LoggingAspect.java:44) ~[famulus-common-frameworks-1.0.0.jar!/:?]\r\n\tat jdk.internal.reflect.GeneratedMethodAccessor134.invoke(Unknown Source) ~[?:?]\r\n\tat jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\r\n\tat java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]\r\n\tat org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:634) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:624) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:72) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:64) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat com.famulus.claimadj.logic.services.impl.SendMessageToSocketServiceImpl$$EnhancerBySpringCGLIB$$622bf3ca.sendMessageToEmir(&lt;generated&gt;) ~[famulus-claimadj-logic-1.0.0.jar!/:1.0.0]\r\n\tat com.famulus.claimadj.logic.services.impl.ProcessB1ServiceImpl.processB1(ProcessB1ServiceImpl.java:227) ~[famulus-claimadj-logic-1.0.0.jar!/:1.0.0]\r\n\tat com.famulus.claimadj.logic.services.impl.ProcessB1ServiceImpl$$FastClassBySpringCGLIB$$2ffe53b4.invoke(&lt;generated&gt;) ~[famulus-claimadj-logic-1.0.0.jar!/:1.0.0]\r\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat com.famulus.common.frameworks.logging.LoggingAspect.logAnnotateClass(LoggingAspect.java:44) ~[famulus-common-frameworks-1.0.0.jar!/:?]\r\n\tat jdk.internal.reflect.GeneratedMethodAccessor134.invoke(Unknown Source) ~[?:?]\r\n\tat jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\r\n\tat java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]\r\n\tat org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:634) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:624) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:72) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:64) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat com.famulus.claimadj.logic.services.impl.ProcessB1ServiceImpl$$EnhancerBySpringCGLIB$$9090be57.processB1(&lt;generated&gt;) ~[famulus-claimadj-logic-1.0.0.jar!/:1.0.0]\r\n\tat com.famulus.claimadj.logic.services.impl.ClaimProcessingServiceImpl.processNcpdpRequest(ClaimProcessingServiceImpl.java:94) ~[famulus-claimadj-logic-1.0.0.jar!/:1.0.0]\r\n\tat com.famulus.claimadj.logic.services.impl.ClaimProcessingServiceImpl$$FastClassBySpringCGLIB$$c2ec1bc3.invoke(&lt;generated&gt;) ~[famulus-claimadj-logic-1.0.0.jar!/:1.0.0]\r\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat com.famulus.common.frameworks.logging.LoggingAspect.logAnnotateClass(LoggingAspect.java:44) ~[famulus-common-frameworks-1.0.0.jar!/:?]\r\n\tat jdk.internal.reflect.GeneratedMethodAccessor134.invoke(Unknown Source) ~[?:?]\r\n\tat jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\r\n\tat java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]\r\n\tat org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:634) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:624) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:72) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:64) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692) ~[spring-aop-5.3.8.jar!/:5.3.8]\r\n\tat com.famulus.claimadj.logic.services.impl.ClaimProcessingServiceImpl$$EnhancerBySpringCGLIB$$ae5417e4.processNcpdpRequest(&lt;generated&gt;) ~[famulus-claimadj-logic-1.0.0.jar!/:1.0.0]\r\n\tat com.famulus.claimadj.apis.setup.TcpServerEndpoint.processIncomingMessage(TcpServerEndpoint.java:23) ~[classes!/:1.0.0]\r\n\tat jdk.internal.reflect.GeneratedMethodAccessor154.invoke(Unknown Source) ~[?:?]\r\n\tat jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\r\n\tat java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:171) ~[spring-messaging-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120) ~[spring-messaging-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.integration.handler.support.MessagingMethodInvokerHelper$HandlerMethod.invoke(MessagingMethodInvokerHelper.java:1101) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\r\n\tat org.springframework.integration.handler.support.MessagingMethodInvokerHelper.invokeHandlerMethod(MessagingMethodInvokerHelper.java:583) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\r\n\tat org.springframework.integration.handler.support.MessagingMethodInvokerHelper.processInternal(MessagingMethodInvokerHelper.java:478) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\r\n\tat org.springframework.integration.handler.support.MessagingMethodInvokerHelper.process(MessagingMethodInvokerHelper.java:356) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\r\n\tat org.springframework.integration.handler.MethodInvokingMessageProcessor.processMessage(MethodInvokingMessageProcessor.java:108) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\r\n\tat org.springframework.integration.handler.ServiceActivatingHandler.handleRequestMessage(ServiceActivatingHandler.java:105) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\r\n\tat org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal(AbstractReplyProducingMessageHandler.java:134) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\r\n\tat org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:56) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\r\n\tat org.springframework.integration.dispatcher.AbstractDispatcher.tryOptimizedDispatch(AbstractDispatcher.java:115) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\r\n\tat org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch(UnicastingDispatcher.java:133) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\r\n\tat org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch(UnicastingDispatcher.java:106) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\r\n\tat org.springframework.integration.channel.AbstractSubscribableChannel.doSend(AbstractSubscribableChannel.java:72) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\r\n\tat org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:317) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:187) ~[spring-messaging-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSendAndReceive(GenericMessagingTemplate.java:233) ~[spring-messaging-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSendAndReceive(GenericMessagingTemplate.java:47) ~[spring-messaging-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.messaging.core.AbstractMessagingTemplate.sendAndReceive(AbstractMessagingTemplate.java:46) ~[spring-messaging-5.3.8.jar!/:5.3.8]\r\n\tat org.springframework.integration.core.MessagingTemplate.sendAndReceive(MessagingTemplate.java:97) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\r\n\tat org.springframework.integration.gateway.MessagingGatewaySupport.doSendAndReceive(MessagingGatewaySupport.java:521) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\r\n\tat org.springframework.integration.gateway.MessagingGatewaySupport.sendAndReceiveMessage(MessagingGatewaySupport.java:491) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\r\n\tat org.springframework.integration.ip.tcp.TcpInboundGateway.doOnMessage(TcpInboundGateway.java:123) ~[spring-integration-ip-5.5.1.jar!/:5.5.1]\r\n\tat org.springframework.integration.ip.tcp.TcpInboundGateway.onMessage(TcpInboundGateway.java:101) ~[spring-integration-ip-5.5.1.jar!/:5.5.1]\r\n\tat org.springframework.integration.ip.tcp.connection.TcpNioConnection.sendToChannel(TcpNioConnection.java:406) ~[spring-integration-ip-5.5.1.jar!/:5.5.1]\r\n\tat org.springframework.integration.ip.tcp.connection.TcpNioConnection.run(TcpNioConnection.java:270) ~[spring-integration-ip-5.5.1.jar!/:5.5.1]\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[?:?]\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[?:?]\r\n\tat java.lang.Thread.run(Thread.java:834) [?:?]\r\n","title":"Spring Retry is not retrying based on exclude keyword","body":"<p>I am using Spring Retry. Earlier, I used <code>@Retryable(value= Exception.class)</code> &amp; it worked correctly with <code>retryAdvice()</code>. The code correctly retried after getting any kind of exception. Recently, we have a requirement to not retry when MessageTimeoutException is encountered. In all other exceptions, we need to retry.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Override\n    @Retryable(exclude = MessageTimeoutException.class)\n    //@Retryable(exclude = org.springframework.integration.MessageTimeoutException.class)\n    public byte[] sendMessage(byte[] message, String guid) {    \n        responseBytes = tcpClientGateway.send(message);\n        return responseBytes;\n    }\n\n    @Bean\n    public RequestHandlerRetryAdvice retryAdvice() {\n        RequestHandlerRetryAdvice retryAdvice = new RequestHandlerRetryAdvice();\n        RetryTemplate retryTemplate = new RetryTemplate();\n        FixedBackOffPolicy fixedBackOffPolicy = new FixedBackOffPolicy();\n        fixedBackOffPolicy.setBackOffPeriod(50);\n        SimpleRetryPolicy retryPolicy = new SimpleRetryPolicy();\n        retryPolicy.setMaxAttempts(3);\n        retryTemplate.setBackOffPolicy(fixedBackOffPolicy);\n        retryTemplate.setRetryPolicy(retryPolicy);\n        retryAdvice.setRetryTemplate(retryTemplate);\n        return retryAdvice;\n    }\n\n    @Bean\n    @ServiceActivator(inputChannel = &quot;emirOutboundChannel&quot;)\n    public MessageHandler emirOutbound(AbstractClientConnectionFactory emirTcpCachedClientConnectionFactory) {\n        TcpOutboundGateway tcpOutboundGateway = new TcpOutboundGateway();\n        List&lt;Advice&gt; list = new ArrayList&lt;&gt;();\n        list.add(retryAdvice());\n        tcpOutboundGateway.setAdviceChain(list);\n        tcpOutboundGateway.setRemoteTimeout(16000);\n        tcpOutboundGateway.setRequestTimeout(16000);\n        tcpOutboundGateway.setSendTimeout(16000);\n        tcpOutboundGateway.setConnectionFactory(emirTcpCachedClientConnectionFactory);\n        return tcpOutboundGateway;\n    }\n</code></pre>\n<p>Here's the exception that I wish to perform re-try upon. I am wondering what am I missing?</p>\n<pre class=\"lang-java prettyprint-override\"><code>2023-08-16 21:47:54.635 my-project [Thread Id = 351182] ERROR org.springframework.integration.ip.tcp.TcpOutboundGateway:149 - Tcp Gateway exception\norg.springframework.integration.MessageTimeoutException: Timed out waiting for response; component: EmirOutbound\n    at org.springframework.integration.ip.tcp.TcpOutboundGateway.getReply(TcpOutboundGateway.java:293) ~[spring-integration-ip-5.5.1.jar!/:5.5.1]\n    at org.springframework.integration.ip.tcp.TcpOutboundGateway.handleRequestMessage(TcpOutboundGateway.java:234) ~[spring-integration-ip-5.5.1.jar!/:5.5.1]\n    at org.springframework.integration.handler.AbstractReplyProducingMessageHandler$AdvisedRequestHandler.handleRequestMessage(AbstractReplyProducingMessageHandler.java:206) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\n    at jdk.internal.reflect.GeneratedMethodAccessor153.invoke(Unknown Source) ~[?:?]\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\n    at java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]\n    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.integration.handler.advice.AbstractRequestHandlerAdvice$CallbackImpl.cloneAndExecute(AbstractRequestHandlerAdvice.java:166) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\n    at org.springframework.integration.handler.advice.RequestHandlerRetryAdvice.lambda$doInvoke$1(RequestHandlerRetryAdvice.java:86) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\n    at org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:329) ~[spring-retry-1.3.1.jar!/:?]\n    at org.springframework.retry.support.RetryTemplate.execute(RetryTemplate.java:255) ~[spring-retry-1.3.1.jar!/:?]\n    at org.springframework.integration.handler.advice.RequestHandlerRetryAdvice.doInvoke(RequestHandlerRetryAdvice.java:86) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\n    at org.springframework.integration.handler.advice.AbstractRequestHandlerAdvice.invoke(AbstractRequestHandlerAdvice.java:67) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at com.sun.proxy.$Proxy274.handleRequestMessage(Unknown Source) ~[?:?]\n    at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.doInvokeAdvisedRequestHandler(AbstractReplyProducingMessageHandler.java:153) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\n    at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal(AbstractReplyProducingMessageHandler.java:137) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\n    at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:56) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\n    at org.springframework.integration.dispatcher.AbstractDispatcher.tryOptimizedDispatch(AbstractDispatcher.java:115) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\n    at org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch(UnicastingDispatcher.java:133) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\n    at org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch(UnicastingDispatcher.java:106) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\n    at org.springframework.integration.channel.AbstractSubscribableChannel.doSend(AbstractSubscribableChannel.java:72) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\n    at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:317) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\n    at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:272) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\n    at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:187) ~[spring-messaging-5.3.8.jar!/:5.3.8]\n    at org.springframework.messaging.core.GenericMessagingTemplate.doSendAndReceive(GenericMessagingTemplate.java:233) ~[spring-messaging-5.3.8.jar!/:5.3.8]\n    at org.springframework.messaging.core.GenericMessagingTemplate.doSendAndReceive(GenericMessagingTemplate.java:47) ~[spring-messaging-5.3.8.jar!/:5.3.8]\n    at org.springframework.messaging.core.AbstractMessagingTemplate.sendAndReceive(AbstractMessagingTemplate.java:46) ~[spring-messaging-5.3.8.jar!/:5.3.8]\n    at org.springframework.integration.core.MessagingTemplate.sendAndReceive(MessagingTemplate.java:97) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\n    at org.springframework.integration.core.MessagingTemplate.sendAndReceive(MessagingTemplate.java:38) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\n    at org.springframework.messaging.core.AbstractMessagingTemplate.convertSendAndReceive(AbstractMessagingTemplate.java:96) ~[spring-messaging-5.3.8.jar!/:5.3.8]\n    at org.springframework.messaging.core.AbstractMessagingTemplate.convertSendAndReceive(AbstractMessagingTemplate.java:86) ~[spring-messaging-5.3.8.jar!/:5.3.8]\n    at org.springframework.integration.gateway.MessagingGatewaySupport.doSendAndReceive(MessagingGatewaySupport.java:513) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\n    at org.springframework.integration.gateway.MessagingGatewaySupport.sendAndReceive(MessagingGatewaySupport.java:486) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\n    at org.springframework.integration.gateway.GatewayProxyFactoryBean.sendOrSendAndReceive(GatewayProxyFactoryBean.java:661) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\n    at org.springframework.integration.gateway.GatewayProxyFactoryBean.invokeGatewayMethod(GatewayProxyFactoryBean.java:586) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\n    at org.springframework.integration.gateway.GatewayProxyFactoryBean.doInvoke(GatewayProxyFactoryBean.java:553) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\n    at org.springframework.integration.gateway.GatewayProxyFactoryBean.invoke(GatewayProxyFactoryBean.java:542) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at com.sun.proxy.$Proxy240.send(Unknown Source) ~[?:?]\n    at com.famulus.claimadj.dao.Emir.service.impl.EmirTcpMessageServiceImpl.sendMessage(EmirTcpMessageServiceImpl.java:32) ~[famulus-claimadj-dao-Emir-1.0.0.jar!/:1.0.0]\n    at com.famulus.claimadj.dao.Emir.service.impl.EmirTcpMessageServiceImpl$$FastClassBySpringCGLIB$$a2bdd82b.invoke(&lt;generated&gt;) ~[famulus-claimadj-dao-Emir-1.0.0.jar!/:1.0.0]\n    at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.retry.interceptor.RetryOperationsInterceptor$1.doWithRetry(RetryOperationsInterceptor.java:93) ~[spring-retry-1.3.1.jar!/:?]\n    at org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:329) ~[spring-retry-1.3.1.jar!/:?]\n    at org.springframework.retry.support.RetryTemplate.execute(RetryTemplate.java:209) ~[spring-retry-1.3.1.jar!/:?]\n    at org.springframework.retry.interceptor.RetryOperationsInterceptor.invoke(RetryOperationsInterceptor.java:119) ~[spring-retry-1.3.1.jar!/:?]\n    at org.springframework.retry.annotation.AnnotationAwareRetryOperationsInterceptor.invoke(AnnotationAwareRetryOperationsInterceptor.java:163) ~[spring-retry-1.3.1.jar!/:?]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at com.famulus.claimadj.dao.Emir.service.impl.EmirTcpMessageServiceImpl$$EnhancerBySpringCGLIB$$e3eb27ea.sendMessage(&lt;generated&gt;) ~[famulus-claimadj-dao-Emir-1.0.0.jar!/:1.0.0]\n    at com.famulus.claimadj.logic.services.impl.SendMessageToSocketServiceImpl.sendMessageToEmir(SendMessageToSocketServiceImpl.java:35) ~[famulus-claimadj-logic-1.0.0.jar!/:1.0.0]\n    at com.famulus.claimadj.logic.services.impl.SendMessageToSocketServiceImpl$$FastClassBySpringCGLIB$$14e5b0a5.invoke(&lt;generated&gt;) ~[famulus-claimadj-logic-1.0.0.jar!/:1.0.0]\n    at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at com.famulus.common.frameworks.logging.LoggingAspect.logAnnotateClass(LoggingAspect.java:44) ~[famulus-common-frameworks-1.0.0.jar!/:?]\n    at jdk.internal.reflect.GeneratedMethodAccessor134.invoke(Unknown Source) ~[?:?]\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\n    at java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]\n    at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:634) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:624) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:72) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:64) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at com.famulus.claimadj.logic.services.impl.SendMessageToSocketServiceImpl$$EnhancerBySpringCGLIB$$622bf3ca.sendMessageToEmir(&lt;generated&gt;) ~[famulus-claimadj-logic-1.0.0.jar!/:1.0.0]\n    at com.famulus.claimadj.logic.services.impl.ProcessB1ServiceImpl.processB1(ProcessB1ServiceImpl.java:227) ~[famulus-claimadj-logic-1.0.0.jar!/:1.0.0]\n    at com.famulus.claimadj.logic.services.impl.ProcessB1ServiceImpl$$FastClassBySpringCGLIB$$2ffe53b4.invoke(&lt;generated&gt;) ~[famulus-claimadj-logic-1.0.0.jar!/:1.0.0]\n    at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at com.famulus.common.frameworks.logging.LoggingAspect.logAnnotateClass(LoggingAspect.java:44) ~[famulus-common-frameworks-1.0.0.jar!/:?]\n    at jdk.internal.reflect.GeneratedMethodAccessor134.invoke(Unknown Source) ~[?:?]\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\n    at java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]\n    at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:634) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:624) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:72) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:64) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at com.famulus.claimadj.logic.services.impl.ProcessB1ServiceImpl$$EnhancerBySpringCGLIB$$9090be57.processB1(&lt;generated&gt;) ~[famulus-claimadj-logic-1.0.0.jar!/:1.0.0]\n    at com.famulus.claimadj.logic.services.impl.ClaimProcessingServiceImpl.processNcpdpRequest(ClaimProcessingServiceImpl.java:94) ~[famulus-claimadj-logic-1.0.0.jar!/:1.0.0]\n    at com.famulus.claimadj.logic.services.impl.ClaimProcessingServiceImpl$$FastClassBySpringCGLIB$$c2ec1bc3.invoke(&lt;generated&gt;) ~[famulus-claimadj-logic-1.0.0.jar!/:1.0.0]\n    at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at com.famulus.common.frameworks.logging.LoggingAspect.logAnnotateClass(LoggingAspect.java:44) ~[famulus-common-frameworks-1.0.0.jar!/:?]\n    at jdk.internal.reflect.GeneratedMethodAccessor134.invoke(Unknown Source) ~[?:?]\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\n    at java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]\n    at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:634) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:624) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:72) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:64) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692) ~[spring-aop-5.3.8.jar!/:5.3.8]\n    at com.famulus.claimadj.logic.services.impl.ClaimProcessingServiceImpl$$EnhancerBySpringCGLIB$$ae5417e4.processNcpdpRequest(&lt;generated&gt;) ~[famulus-claimadj-logic-1.0.0.jar!/:1.0.0]\n    at com.famulus.claimadj.apis.setup.TcpServerEndpoint.processIncomingMessage(TcpServerEndpoint.java:23) ~[classes!/:1.0.0]\n    at jdk.internal.reflect.GeneratedMethodAccessor154.invoke(Unknown Source) ~[?:?]\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\n    at java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]\n    at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:171) ~[spring-messaging-5.3.8.jar!/:5.3.8]\n    at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120) ~[spring-messaging-5.3.8.jar!/:5.3.8]\n    at org.springframework.integration.handler.support.MessagingMethodInvokerHelper$HandlerMethod.invoke(MessagingMethodInvokerHelper.java:1101) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\n    at org.springframework.integration.handler.support.MessagingMethodInvokerHelper.invokeHandlerMethod(MessagingMethodInvokerHelper.java:583) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\n    at org.springframework.integration.handler.support.MessagingMethodInvokerHelper.processInternal(MessagingMethodInvokerHelper.java:478) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\n    at org.springframework.integration.handler.support.MessagingMethodInvokerHelper.process(MessagingMethodInvokerHelper.java:356) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\n    at org.springframework.integration.handler.MethodInvokingMessageProcessor.processMessage(MethodInvokingMessageProcessor.java:108) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\n    at org.springframework.integration.handler.ServiceActivatingHandler.handleRequestMessage(ServiceActivatingHandler.java:105) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\n    at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal(AbstractReplyProducingMessageHandler.java:134) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\n    at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:56) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\n    at org.springframework.integration.dispatcher.AbstractDispatcher.tryOptimizedDispatch(AbstractDispatcher.java:115) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\n    at org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch(UnicastingDispatcher.java:133) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\n    at org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch(UnicastingDispatcher.java:106) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\n    at org.springframework.integration.channel.AbstractSubscribableChannel.doSend(AbstractSubscribableChannel.java:72) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\n    at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:317) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\n    at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:187) ~[spring-messaging-5.3.8.jar!/:5.3.8]\n    at org.springframework.messaging.core.GenericMessagingTemplate.doSendAndReceive(GenericMessagingTemplate.java:233) ~[spring-messaging-5.3.8.jar!/:5.3.8]\n    at org.springframework.messaging.core.GenericMessagingTemplate.doSendAndReceive(GenericMessagingTemplate.java:47) ~[spring-messaging-5.3.8.jar!/:5.3.8]\n    at org.springframework.messaging.core.AbstractMessagingTemplate.sendAndReceive(AbstractMessagingTemplate.java:46) ~[spring-messaging-5.3.8.jar!/:5.3.8]\n    at org.springframework.integration.core.MessagingTemplate.sendAndReceive(MessagingTemplate.java:97) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\n    at org.springframework.integration.gateway.MessagingGatewaySupport.doSendAndReceive(MessagingGatewaySupport.java:521) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\n    at org.springframework.integration.gateway.MessagingGatewaySupport.sendAndReceiveMessage(MessagingGatewaySupport.java:491) ~[spring-integration-core-5.5.1.jar!/:5.5.1]\n    at org.springframework.integration.ip.tcp.TcpInboundGateway.doOnMessage(TcpInboundGateway.java:123) ~[spring-integration-ip-5.5.1.jar!/:5.5.1]\n    at org.springframework.integration.ip.tcp.TcpInboundGateway.onMessage(TcpInboundGateway.java:101) ~[spring-integration-ip-5.5.1.jar!/:5.5.1]\n    at org.springframework.integration.ip.tcp.connection.TcpNioConnection.sendToChannel(TcpNioConnection.java:406) ~[spring-integration-ip-5.5.1.jar!/:5.5.1]\n    at org.springframework.integration.ip.tcp.connection.TcpNioConnection.run(TcpNioConnection.java:270) ~[spring-integration-ip-5.5.1.jar!/:5.5.1]\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[?:?]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[?:?]\n    at java.lang.Thread.run(Thread.java:834) [?:?]\n</code></pre>\n"},{"tags":["java","web-services"],"answers":[{"tags":[],"owner":{"account_id":438559,"reputation":418,"user_id":826900,"display_name":"LD."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1335312012,"creation_date":1335312012,"answer_id":10307639,"question_id":7479739,"body_markdown":"The exception says that message cannot be sent.\r\nIs it a firewall problem like for the same question here : http://www.coderanch.com/t/223309/Web-Services/java/Sending-Soap-requests-thru-Https","title":"java.security.PrivilegedActionException while hitting webservices over https","body":"<p>The exception says that message cannot be sent.\nIs it a firewall problem like for the same question here : <a href=\"http://www.coderanch.com/t/223309/Web-Services/java/Sending-Soap-requests-thru-Https\" rel=\"nofollow\">http://www.coderanch.com/t/223309/Web-Services/java/Sending-Soap-requests-thru-Https</a></p>\n"}],"owner":{"account_id":920281,"reputation":61,"user_id":952078,"display_name":"gurleen.guliani"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9936,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":1,"score":6,"last_activity_date":1693368506,"creation_date":1316488928,"question_id":7479739,"body_markdown":"I am getting the following exception, when i am trying to hit the webservice over https  using java client:\r\n\r\ncom.sun.xml.internal.messaging.saaj.client.p2p.HttpSOAPConnection post\r\nSEVERE: SAAJ0009: Message send failed\r\ncom.sun.xml.internal.messaging.saaj.SOAPExceptionImpl: java.security.PrivilegedActionException: com.sun.xml.internal.messaging.saaj.SOAPExceptionImpl: Message send failed\r\n\tat com.sun.xml.internal.messaging.saaj.client.p2p.HttpSOAPConnection.call(HttpSOAPConnection.java:157)\r\n\tat \r\n\r\nAlso if i use the same code for http , it works fine. Webservices are deployed on weblogic server.\r\nCould anyone help me in resolving the issue.\r\n\r\nRegards\r\nGurleen.","title":"java.security.PrivilegedActionException while hitting webservices over https","body":"<p>I am getting the following exception, when i am trying to hit the webservice over https  using java client:</p>\n\n<p>com.sun.xml.internal.messaging.saaj.client.p2p.HttpSOAPConnection post\nSEVERE: SAAJ0009: Message send failed\ncom.sun.xml.internal.messaging.saaj.SOAPExceptionImpl: java.security.PrivilegedActionException: com.sun.xml.internal.messaging.saaj.SOAPExceptionImpl: Message send failed\n    at com.sun.xml.internal.messaging.saaj.client.p2p.HttpSOAPConnection.call(HttpSOAPConnection.java:157)\n    at </p>\n\n<p>Also if i use the same code for http , it works fine. Webservices are deployed on weblogic server.\nCould anyone help me in resolving the issue.</p>\n\n<p>Regards\nGurleen.</p>\n"},{"tags":["java","arraylist","methods"],"comments":[{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1693334660,"post_id":77002850,"comment_id":135746327,"body_markdown":"You never use your new `PokerTHEMain` instance, maybe that&#39;s the cause of your issue.","body":"You never use your new <code>PokerTHEMain</code> instance, maybe that&#39;s the cause of your issue."},{"owner":{"display_name":"user20523676"},"score":0,"creation_date":1693334823,"post_id":77002850,"comment_id":135746354,"body_markdown":"Sorry, wasn&#39;t specific about the class name; made edits.","body":"Sorry, wasn&#39;t specific about the class name; made edits."},{"owner":{"account_id":11936753,"reputation":86,"user_id":8734970,"display_name":"bbart23"},"score":0,"creation_date":1693335054,"post_id":77002850,"comment_id":135746388,"body_markdown":"You are also accessing the private variable `deck` within your for-loop in your main method. Either make it public or have a `getDeck()` method for your `PokerTHEMain` class.","body":"You are also accessing the private variable <code>deck</code> within your for-loop in your main method. Either make it public or have a <code>getDeck()</code> method for your <code>PokerTHEMain</code> class."},{"owner":{"account_id":150415,"reputation":17357,"user_id":363592,"accept_rate":100,"display_name":"Lunivore"},"score":1,"creation_date":1693335243,"post_id":77002850,"comment_id":135746410,"body_markdown":"What @TimMcYeah is saying is: you appear to have a class with a (presumably static) main method inside it. You are creating a (presumably static) instance of `PokerTHEMain` inside that class.\n\nThe problem is that when you call `ResetDeck` on your `PokerTHEMain` instance, it sets `PokerTHEMain` to a *new* `PokerTHEMain`, but the deck it is initializing is the one belonging to the previous instance.\n\n(And you&#39;ve just changed the code, so it might actually work now.)","body":"What @TimMcYeah is saying is: you appear to have a class with a (presumably static) main method inside it. You are creating a (presumably static) instance of <code>PokerTHEMain</code> inside that class.  The problem is that when you call <code>ResetDeck</code> on your <code>PokerTHEMain</code> instance, it sets <code>PokerTHEMain</code> to a <i>new</i> <code>PokerTHEMain</code>, but the deck it is initializing is the one belonging to the previous instance.  (And you&#39;ve just changed the code, so it might actually work now.)"}],"answers":[{"tags":[],"owner":{"account_id":19272714,"reputation":31,"user_id":14086346,"display_name":"RVLTN72"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693368184,"creation_date":1693335521,"answer_id":77002970,"question_id":77002850,"body_markdown":"The proper way would be to use _getter_ and _setter_ methods. I would write a method `void setDeck()` in which you can execute the code from your current `reset` method. The deck variable should be globally defined. \r\nIn your `ArrayList&lt;String&gt; getDeck()` method you read the global `deck` variable and return it at the end of the method. \r\nAlso create the `deck` object in the main instance.","title":"Why is my ArrayList returning no elements when I try to add some inside a method?","body":"<p>The proper way would be to use <em>getter</em> and <em>setter</em> methods. I would write a method <code>void setDeck()</code> in which you can execute the code from your current <code>reset</code> method. The deck variable should be globally defined.\nIn your <code>ArrayList&lt;String&gt; getDeck()</code> method you read the global <code>deck</code> variable and return it at the end of the method.\nAlso create the <code>deck</code> object in the main instance.</p>\n"},{"tags":[],"owner":{"account_id":23587351,"reputation":60,"user_id":17625629,"display_name":"Vled"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1693336649,"creation_date":1693336649,"answer_id":77003090,"question_id":77002850,"body_markdown":"My guess is that you havent created a **main** method. In my example , in the main method I create a **new PokerTHEMain** Object and **Reset** the deck , then print it \r\n\r\n    package org.example;\r\n\r\n    import java.util.ArrayList;\r\n\r\n    public class PokerTHEMain {\r\n    // Objects\r\n\r\n     private String[] cardTypes = {&quot;Spades&quot;, &quot;Hearts&quot;, &quot;Clubs&quot;, &quot;Diamonds&quot;};\r\n     private String[] cardValues = {&quot;Ace&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot;, &quot;10&quot;, &quot;Jack&quot;, &quot;Queen&quot;, &quot;King&quot;};\r\n     private ArrayList&lt;String&gt; deck = new ArrayList&lt;String&gt;();\r\n\r\n    // Methods\r\n\r\n    void ResetDeck() {\r\n        this.deck.clear();\r\n        for (int cardTypesItem = 0; cardTypesItem &lt; this.cardTypes.length; cardTypesItem++) {\r\n            for (int cardValuesItem = 0; cardValuesItem &lt; this.cardValues.length; cardValuesItem++) {\r\n                this.deck.add(this.cardValues[cardValuesItem] + &quot; of &quot; + this.cardTypes[cardTypesItem]);\r\n            }\r\n        }\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        PokerTHEMain pokerTHEMain = new PokerTHEMain();\r\n        pokerTHEMain.ResetDeck();\r\n        System.out.println(pokerTHEMain.deck);\r\n    }}\r\n\r\n\r\n**Console output :**&lt;br&gt;\r\n[![enter image description here][1]][1]\r\n\r\nHope you find this helpfull!!!\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/m4caA.png","title":"Why is my ArrayList returning no elements when I try to add some inside a method?","body":"<p>My guess is that you havent created a <strong>main</strong> method. In my example , in the main method I create a <strong>new PokerTHEMain</strong> Object and <strong>Reset</strong> the deck , then print it</p>\n<pre><code>package org.example;\n\nimport java.util.ArrayList;\n\npublic class PokerTHEMain {\n// Objects\n\n private String[] cardTypes = {&quot;Spades&quot;, &quot;Hearts&quot;, &quot;Clubs&quot;, &quot;Diamonds&quot;};\n private String[] cardValues = {&quot;Ace&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot;, &quot;10&quot;, &quot;Jack&quot;, &quot;Queen&quot;, &quot;King&quot;};\n private ArrayList&lt;String&gt; deck = new ArrayList&lt;String&gt;();\n\n// Methods\n\nvoid ResetDeck() {\n    this.deck.clear();\n    for (int cardTypesItem = 0; cardTypesItem &lt; this.cardTypes.length; cardTypesItem++) {\n        for (int cardValuesItem = 0; cardValuesItem &lt; this.cardValues.length; cardValuesItem++) {\n            this.deck.add(this.cardValues[cardValuesItem] + &quot; of &quot; + this.cardTypes[cardTypesItem]);\n        }\n    }\n}\n\npublic static void main(String[] args) {\n    PokerTHEMain pokerTHEMain = new PokerTHEMain();\n    pokerTHEMain.ResetDeck();\n    System.out.println(pokerTHEMain.deck);\n}}\n</code></pre>\n<p><strong>Console output :</strong><br>\n<a href=\"https://i.stack.imgur.com/m4caA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/m4caA.png\" alt=\"enter image description here\" /></a></p>\n<p>Hope you find this helpfull!!!</p>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693361520,"creation_date":1693358623,"answer_id":77004457,"question_id":77002850,"body_markdown":"As a recommendation, you should encapsulate the suits and values.\r\n\r\n```java\r\nenum Suit { Spades, Hearts, Clubs, Diamonds }\r\nrecord Card(char value, Suit suit) {\r\n    @Override\r\n    public String toString() {\r\n        return switch (value) {\r\n            case &#39;T&#39; -&gt; &quot;Ten&quot;;\r\n            case &#39;J&#39; -&gt; &quot;Jack&quot;;\r\n            case &#39;Q&#39; -&gt; &quot;Queen&quot;;\r\n            case &#39;K&#39; -&gt; &quot;King&quot;;\r\n            case &#39;A&#39; -&gt; &quot;Ace&quot;;\r\n            default -&gt; value;\r\n        } + &quot; of &quot; + suit;\r\n    }\r\n}\r\nList&lt;Card&gt; deck\r\n    = new ArrayList&lt;&gt;(\r\n        Stream.of(&#39;2&#39;, &#39;3&#39;, &#39;4&#39;, &#39;5&#39;, &#39;6&#39;, &#39;7&#39;, &#39;8&#39;, &#39;9&#39;, &#39;T&#39;, &#39;J&#39;, &#39;Q&#39;, &#39;K&#39;, &#39;A&#39;)\r\n              .flatMap(x -&gt; Stream.of(Suit.values()).map(y -&gt; new Card(x, y)))\r\n              .toList());\r\n```\r\n\r\nYou could even implement the _[Comparable](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Comparable.html)_ interface.\r\n\r\n```java\r\n@Override\r\npublic int compareTo(Card o) {\r\n    return Integer.compare(numericValue(), o.numericValue());\r\n}\r\n        \r\nint numericValue() {\r\n    return switch (value) {\r\n        case &#39;T&#39; -&gt; 10;\r\n        case &#39;J&#39; -&gt; 11;\r\n        case &#39;Q&#39; -&gt; 12;\r\n        case &#39;K&#39; -&gt; 13;\r\n        case &#39;A&#39; -&gt; 14;\r\n        default -&gt; Character.digit(value, 10);\r\n    };\r\n}\r\n```","title":"Why is my ArrayList returning no elements when I try to add some inside a method?","body":"<p>As a recommendation, you should encapsulate the suits and values.</p>\n<pre class=\"lang-java prettyprint-override\"><code>enum Suit { Spades, Hearts, Clubs, Diamonds }\nrecord Card(char value, Suit suit) {\n    @Override\n    public String toString() {\n        return switch (value) {\n            case 'T' -&gt; &quot;Ten&quot;;\n            case 'J' -&gt; &quot;Jack&quot;;\n            case 'Q' -&gt; &quot;Queen&quot;;\n            case 'K' -&gt; &quot;King&quot;;\n            case 'A' -&gt; &quot;Ace&quot;;\n            default -&gt; value;\n        } + &quot; of &quot; + suit;\n    }\n}\nList&lt;Card&gt; deck\n    = new ArrayList&lt;&gt;(\n        Stream.of('2', '3', '4', '5', '6', '7', '8', '9', 'T', 'J', 'Q', 'K', 'A')\n              .flatMap(x -&gt; Stream.of(Suit.values()).map(y -&gt; new Card(x, y)))\n              .toList());\n</code></pre>\n<p>You could even implement the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Comparable.html\" rel=\"nofollow noreferrer\">Comparable</a></em> interface.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic int compareTo(Card o) {\n    return Integer.compare(numericValue(), o.numericValue());\n}\n        \nint numericValue() {\n    return switch (value) {\n        case 'T' -&gt; 10;\n        case 'J' -&gt; 11;\n        case 'Q' -&gt; 12;\n        case 'K' -&gt; 13;\n        case 'A' -&gt; 14;\n        default -&gt; Character.digit(value, 10);\n    };\n}\n</code></pre>\n"}],"owner":{"display_name":"user20523676"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":77003090,"answer_count":3,"score":-1,"last_activity_date":1693368184,"creation_date":1693334463,"question_id":77002850,"body_markdown":"For some reason, when I try to add new elements to an ArrayList called &quot;deck&quot; using a method, it doesn&#39;t return anything. I am trying to have an entire ArrayList have what you would typically see in a standard card deck.\r\n\r\nCode:\r\n\r\n```java\r\npublic class PokerTHEMain {\r\n    // Objects\r\n\r\n    private String[] cardTypes = {&quot;Spades&quot;, &quot;Hearts&quot;, &quot;Clubs&quot;, &quot;Diamonds&quot;} ;\r\n    private String[] cardValues = {&quot;Ace&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot;, &quot;10&quot;, &quot;Jack&quot;, &quot;Queen&quot;, &quot;King&quot;} ;\r\n    private ArrayList&lt;String&gt; deck = new ArrayList&lt;String&gt;();\r\n\r\n    // Methods\r\n\r\n    void ResetDeck() {\r\n        this.deck.clear() ;\r\n\r\n        for (int cardTypesItem = 0 ; cardTypesItem &lt; this.cardTypes.length ; cardTypesItem++) {\r\n            for (int cardValuesItem = 0 ; cardValuesItem &lt; this.cardValues.length ; cardValuesItem++) {\r\n                this.deck.add(this.cardValues[cardValuesItem] + &quot; of &quot; + this.cardTypes[cardTypesItem]) ;\r\n            }\r\n        }\r\n    }\r\n...\r\n```\r\nWhat I use to check for values (inside of the `main` method):\r\n```java\r\nfor (int i = 0 ; i &lt; PokerTHEMain.deck.size() ; i++) {\r\n            out.println(PokerTHEMain.deck.get(i)) ;\r\n}\r\n```\r\n\r\nFor some more information, I am using IntelliJ IDEA as my IDE.","title":"Why is my ArrayList returning no elements when I try to add some inside a method?","body":"<p>For some reason, when I try to add new elements to an ArrayList called &quot;deck&quot; using a method, it doesn't return anything. I am trying to have an entire ArrayList have what you would typically see in a standard card deck.</p>\n<p>Code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class PokerTHEMain {\n    // Objects\n\n    private String[] cardTypes = {&quot;Spades&quot;, &quot;Hearts&quot;, &quot;Clubs&quot;, &quot;Diamonds&quot;} ;\n    private String[] cardValues = {&quot;Ace&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot;, &quot;10&quot;, &quot;Jack&quot;, &quot;Queen&quot;, &quot;King&quot;} ;\n    private ArrayList&lt;String&gt; deck = new ArrayList&lt;String&gt;();\n\n    // Methods\n\n    void ResetDeck() {\n        this.deck.clear() ;\n\n        for (int cardTypesItem = 0 ; cardTypesItem &lt; this.cardTypes.length ; cardTypesItem++) {\n            for (int cardValuesItem = 0 ; cardValuesItem &lt; this.cardValues.length ; cardValuesItem++) {\n                this.deck.add(this.cardValues[cardValuesItem] + &quot; of &quot; + this.cardTypes[cardTypesItem]) ;\n            }\n        }\n    }\n...\n</code></pre>\n<p>What I use to check for values (inside of the <code>main</code> method):</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (int i = 0 ; i &lt; PokerTHEMain.deck.size() ; i++) {\n            out.println(PokerTHEMain.deck.get(i)) ;\n}\n</code></pre>\n<p>For some more information, I am using IntelliJ IDEA as my IDE.</p>\n"},{"tags":["java","android","kotlin","android-emulator","android-tv"],"comments":[{"owner":{"account_id":6500906,"reputation":2145,"user_id":14899369,"display_name":"Abhi"},"score":0,"creation_date":1693371309,"post_id":77004873,"comment_id":135750113,"body_markdown":"DRM uses security by obfuscation so it is a bit complex to test. You will need DRM licenses for the content you want to test.","body":"DRM uses security by obfuscation so it is a bit complex to test. You will need DRM licenses for the content you want to test."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1693375704,"post_id":77004873,"comment_id":135750580,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":28848644,"reputation":1,"user_id":22095028,"display_name":"mr raaju"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":298,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693367344,"creation_date":1693367344,"question_id":77004873,"body_markdown":"Is there any way to play DRM(Digital Right Management) content on Android TV Emulator for testing?\r\nif device not support widevine drm , how to make it supported, is there any way?\r\n Or Is there any other Tv emulator which can support this?\r\n\r\nI used Jwplayer(wrapper for exoplayer) for playing the video. Tried on real device, it worked. But I need to test it on android tv emulator.\r\n\r\non emulator it throws error below:\r\n\r\nCaused by: com.google.android.exoplayer2.drm.DrmSession$DrmSessionException: android.media.MediaDrmException: Attempting to open a session using a dummy ExoMediaDrm.","title":"Drm protected video play on Android Emulator","body":"<p>Is there any way to play DRM(Digital Right Management) content on Android TV Emulator for testing?\nif device not support widevine drm , how to make it supported, is there any way?\nOr Is there any other Tv emulator which can support this?</p>\n<p>I used Jwplayer(wrapper for exoplayer) for playing the video. Tried on real device, it worked. But I need to test it on android tv emulator.</p>\n<p>on emulator it throws error below:</p>\n<p>Caused by: com.google.android.exoplayer2.drm.DrmSession$DrmSessionException: android.media.MediaDrmException: Attempting to open a session using a dummy ExoMediaDrm.</p>\n"},{"tags":["java","authentication","sdk","oracle-cloud-infrastructure"],"owner":{"account_id":29320012,"reputation":1,"user_id":22463830,"display_name":"Hajira Begum"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":89,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693367303,"creation_date":1693367303,"question_id":77004871,"body_markdown":"Java code\r\n```\r\n`// Set up authentication details with hardcoded values\r\n                SimpleAuthenticationDetailsProvider authProvider = SimpleAuthenticationDetailsProvider.builder()\r\n                        .tenantId(tenantId)\r\n                        .userId(accountId)\r\n                        .fingerprint(accessKeyId)\r\n                        .privateKeySupplier(new SimplePrivateKeySupplier(file.getLocation()))\r\n                        .region(Region.valueOf(location.toUpperCase()))\r\n                        .build();\r\n                // Create an Identity client\r\n                Identity identityClient = new IdentityClient(authProvider);\r\n\r\n                // Make a simple API call to list availability domains\r\n                ListAvailabilityDomainsResponse response =\r\n                        identityClient.listAvailabilityDomains(\r\n                                ListAvailabilityDomainsRequest.builder()\r\n                                        .compartmentId(tenantId)\r\n                                        .build());\r\n\r\n                if (response.getItems() != null &amp;&amp; !response.getItems().isEmpty()) {\r\n                    logger.debug(&quot;Credentials are valid.&quot;);\r\n                } else {\r\n                    logger.debug(&quot;Credentials are invalid.&quot;);\r\n                }`\r\n```\r\n\r\nDependencies\r\n\r\n```\r\n&lt;!-- https://mvnrepository.com/artifact/com.oracle.oci.sdk/oci-java-sdk-core --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.oracle.oci.sdk&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;oci-java-sdk-core&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.23.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/com.oracle.oci.sdk/oci-java-sdk-identity --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.oracle.oci.sdk&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;oci-java-sdk-identity&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.23.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/com.oracle.oci.sdk/oci-java-sdk-common-httpclient-jersey --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.oracle.oci.sdk&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;oci-java-sdk-common-httpclient-jersey&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.23.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!-- Jersey Core --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.glassfish.jersey.core&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jersey-server&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.1.1&lt;/version&gt; &lt;!-- Use the latest version --&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!-- Jersey Jackson Support --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.glassfish.jersey.media&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jersey-media-json-jackson&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.1.1&lt;/version&gt; &lt;!-- Use the same version as jersey-server --&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/jakarta.ws.rs/jakarta.ws.rs-api --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;jakarta.ws.rs&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jakarta.ws.rs-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.1.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n```\r\nIm getting \r\nERROR THAT IM GETTING IS \r\nError returned by ListAvailabilityDomains operation in Identity service.(-1, null, false) Unknown error\r\nTimestamp: 2023-08-29T11:53:40.327Z\r\nClient version: Oracle-JavaSDK/3.23.2\r\nRequest Endpoint: https://identity.eu-frankfurt-1.oci.oraclecloud.com/20160918/availabilityDomains?compartmentId=&lt;tenancyId&gt;\r\nTroubleshooting Tips: See https://docs.oracle.com/en-us/iaas/Content/API/References/apierrors.htm#apierrors_-1__-1_ for more information about resolving this error.\r\ni even tried to authenticate using other methods which uses listRegions() or the one that uses listInstances() but they are also giving same error\r\n\r\n\r\n","title":"Error returned by ListAvailabilityDomains operation in Identity service.(-1, null, false) Unknown error Using OCI SDK Java","body":"<p>Java code</p>\n<pre><code>`// Set up authentication details with hardcoded values\n                SimpleAuthenticationDetailsProvider authProvider = SimpleAuthenticationDetailsProvider.builder()\n                        .tenantId(tenantId)\n                        .userId(accountId)\n                        .fingerprint(accessKeyId)\n                        .privateKeySupplier(new SimplePrivateKeySupplier(file.getLocation()))\n                        .region(Region.valueOf(location.toUpperCase()))\n                        .build();\n                // Create an Identity client\n                Identity identityClient = new IdentityClient(authProvider);\n\n                // Make a simple API call to list availability domains\n                ListAvailabilityDomainsResponse response =\n                        identityClient.listAvailabilityDomains(\n                                ListAvailabilityDomainsRequest.builder()\n                                        .compartmentId(tenantId)\n                                        .build());\n\n                if (response.getItems() != null &amp;&amp; !response.getItems().isEmpty()) {\n                    logger.debug(&quot;Credentials are valid.&quot;);\n                } else {\n                    logger.debug(&quot;Credentials are invalid.&quot;);\n                }`\n</code></pre>\n<p>Dependencies</p>\n<pre><code>&lt;!-- https://mvnrepository.com/artifact/com.oracle.oci.sdk/oci-java-sdk-core --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.oracle.oci.sdk&lt;/groupId&gt;\n            &lt;artifactId&gt;oci-java-sdk-core&lt;/artifactId&gt;\n            &lt;version&gt;3.23.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/com.oracle.oci.sdk/oci-java-sdk-identity --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.oracle.oci.sdk&lt;/groupId&gt;\n            &lt;artifactId&gt;oci-java-sdk-identity&lt;/artifactId&gt;\n            &lt;version&gt;3.23.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/com.oracle.oci.sdk/oci-java-sdk-common-httpclient-jersey --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.oracle.oci.sdk&lt;/groupId&gt;\n            &lt;artifactId&gt;oci-java-sdk-common-httpclient-jersey&lt;/artifactId&gt;\n            &lt;version&gt;3.23.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- Jersey Core --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.glassfish.jersey.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jersey-server&lt;/artifactId&gt;\n            &lt;version&gt;3.1.1&lt;/version&gt; &lt;!-- Use the latest version --&gt;\n        &lt;/dependency&gt;\n        &lt;!-- Jersey Jackson Support --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.glassfish.jersey.media&lt;/groupId&gt;\n            &lt;artifactId&gt;jersey-media-json-jackson&lt;/artifactId&gt;\n            &lt;version&gt;3.1.1&lt;/version&gt; &lt;!-- Use the same version as jersey-server --&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/jakarta.ws.rs/jakarta.ws.rs-api --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;jakarta.ws.rs&lt;/groupId&gt;\n            &lt;artifactId&gt;jakarta.ws.rs-api&lt;/artifactId&gt;\n            &lt;version&gt;3.1.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n</code></pre>\n<p>Im getting\nERROR THAT IM GETTING IS\nError returned by ListAvailabilityDomains operation in Identity service.(-1, null, false) Unknown error\nTimestamp: 2023-08-29T11:53:40.327Z\nClient version: Oracle-JavaSDK/3.23.2\nRequest Endpoint: <a href=\"https://identity.eu-frankfurt-1.oci.oraclecloud.com/20160918/availabilityDomains?compartmentId=\" rel=\"nofollow noreferrer\">https://identity.eu-frankfurt-1.oci.oraclecloud.com/20160918/availabilityDomains?compartmentId=</a>\nTroubleshooting Tips: See <a href=\"https://docs.oracle.com/en-us/iaas/Content/API/References/apierrors.htm#apierrors_-1__-1\" rel=\"nofollow noreferrer\">https://docs.oracle.com/en-us/iaas/Content/API/References/apierrors.htm#apierrors_-1__-1</a>_ for more information about resolving this error.\ni even tried to authenticate using other methods which uses listRegions() or the one that uses listInstances() but they are also giving same error</p>\n"},{"tags":["java","ssl","tls1.2"],"answers":[{"tags":[],"owner":{"account_id":3056901,"reputation":343,"user_id":2590316,"display_name":"Alican Beydemir"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1506350017,"creation_date":1506347239,"answer_id":46406809,"question_id":46406717,"body_markdown":"I&#39;think `con.getCipherSuite();` should do the trick for algorithm...\r\n\r\nhttps://docs.oracle.com/javase/7/docs/api/javax/net/ssl/HttpsURLConnection.html\r\n\r\n\t\r\nThis could be an odd solution for tls but if you manage to open a new SSL socket(maybe then you can close with `socket.close();`) \r\n`SSLSocket socket = (SSLSocket) con.getSSLSocketFactory().createSocket();` `String[] test = socket.getSSLParameters().getProtocols();` In test value Notice that : You can get usable TLS versions not just only one.","title":"How to get Cipher used by an HTTPS Connection","body":"<p>I'think <code>con.getCipherSuite();</code> should do the trick for algorithm...</p>\n\n<p><a href=\"https://docs.oracle.com/javase/7/docs/api/javax/net/ssl/HttpsURLConnection.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/7/docs/api/javax/net/ssl/HttpsURLConnection.html</a></p>\n\n<p>This could be an odd solution for tls but if you manage to open a new SSL socket(maybe then you can close with <code>socket.close();</code>) \n<code>SSLSocket socket = (SSLSocket) con.getSSLSocketFactory().createSocket();</code> <code>String[] test = socket.getSSLParameters().getProtocols();</code> In test value Notice that : You can get usable TLS versions not just only one.</p>\n"},{"tags":[],"owner":{"account_id":1809323,"reputation":11348,"user_id":1645712,"accept_rate":73,"display_name":"gusto2"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1506509584,"creation_date":1506509272,"answer_id":46445947,"question_id":46406717,"body_markdown":"You can print the protocol (TLSv1.2) and suite (TLS_ECDHE_RSA_WITH_AES) with following:\r\n\r\n    SSLSocket ss = (SSLSocket) SSLSocketFactory.getDefault().createSocket(&quot;host&quot;, 443);\r\n    System.out.println(&quot;protocol: &quot;+ss.getSession().getProtocol());\r\n    System.out.println(&quot;suite:    &quot;+ss.getSession().ss.getSession().getCipherSuite());\r\n","title":"How to get Cipher used by an HTTPS Connection","body":"<p>You can print the protocol (TLSv1.2) and suite (TLS_ECDHE_RSA_WITH_AES) with following:</p>\n\n<pre><code>SSLSocket ss = (SSLSocket) SSLSocketFactory.getDefault().createSocket(\"host\", 443);\nSystem.out.println(\"protocol: \"+ss.getSession().getProtocol());\nSystem.out.println(\"suite:    \"+ss.getSession().ss.getSession().getCipherSuite());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1693366975,"creation_date":1506509674,"answer_id":46446092,"question_id":46406717,"body_markdown":"Call `HttpsURLConnection.getCipherSuite()`.\r\n\r\nI earlier gave a longwinded answer that I now find is unnecessary.\r\n\r\n","title":"How to get Cipher used by an HTTPS Connection","body":"<p>Call <code>HttpsURLConnection.getCipherSuite()</code>.</p>\n<p>I earlier gave a longwinded answer that I now find is unnecessary.</p>\n"}],"owner":{"account_id":4110800,"reputation":23,"user_id":3373636,"display_name":"user3373636"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4097,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1693366975,"creation_date":1506346936,"question_id":46406717,"body_markdown":"How do I get the Cipher used by an HTTPS Connection in Java? I need to find the TLS version used whether it&#39;s TLS 1.1 or 1.2 after hitting the URLusing the below code:\r\n\r\n    url = new URL(https_url);\r\n    HttpsURLConnection con = (HttpsURLConnection)url.openConnection();\r\n\r\nScreenshot of the firefox browser is give below.\r\nCan any one help me in getting this?\r\n[TLS Version][1]\r\n\r\nI have tried\r\n\r\n    SSLSocket socket = (SSLSocket) con.getSSLSocketFactory().createSocket();\r\n    String[] test = socket.getSSLParameters().getProtocols();\r\n\r\nBut this gives the list of protocols that are enabled for the connection. Where as I need the the protocol that was used in the response from the server.\r\n\r\nThe screenshot attached shows what I expecting to read(TLS 1.2)\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Oqu62.png","title":"How to get Cipher used by an HTTPS Connection","body":"<p>How do I get the Cipher used by an HTTPS Connection in Java? I need to find the TLS version used whether it's TLS 1.1 or 1.2 after hitting the URLusing the below code:</p>\n\n<pre><code>url = new URL(https_url);\nHttpsURLConnection con = (HttpsURLConnection)url.openConnection();\n</code></pre>\n\n<p>Screenshot of the firefox browser is give below.\nCan any one help me in getting this?\n<a href=\"https://i.stack.imgur.com/Oqu62.png\" rel=\"nofollow noreferrer\">TLS Version</a></p>\n\n<p>I have tried</p>\n\n<pre><code>SSLSocket socket = (SSLSocket) con.getSSLSocketFactory().createSocket();\nString[] test = socket.getSSLParameters().getProtocols();\n</code></pre>\n\n<p>But this gives the list of protocols that are enabled for the connection. Where as I need the the protocol that was used in the response from the server.</p>\n\n<p>The screenshot attached shows what I expecting to read(TLS 1.2)</p>\n"},{"tags":["java","maven","build"],"answers":[{"tags":[],"owner":{"account_id":219754,"reputation":12930,"user_id":476828,"accept_rate":51,"display_name":"Subodh Joshi"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1440368142,"creation_date":1440368142,"answer_id":32172090,"question_id":32172065,"body_markdown":"You have to add `maven-assembly-plugin` in your `pom.xml` file\r\n\r\n \r\n\r\n   \r\n\r\n     &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n          &lt;configuration&gt;\r\n            &lt;archive&gt;\r\n              &lt;manifest&gt;\r\n                &lt;mainClass&gt;com.test.MainClassName&lt;/mainClass&gt;\r\n              &lt;/manifest&gt;\r\n            &lt;/archive&gt;\r\n            &lt;descriptorRefs&gt;\r\n              &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\r\n            &lt;/descriptorRefs&gt;\r\n          &lt;/configuration&gt;\r\n          &lt;executions&gt;\r\n            &lt;execution&gt;\r\n              &lt;id&gt;make-assembly&lt;/id&gt; \r\n              &lt;phase&gt;package&lt;/phase&gt; &lt;!-- packaging phase --&gt;\r\n              &lt;goals&gt;\r\n                &lt;goal&gt;single&lt;/goal&gt;\r\n              &lt;/goals&gt;\r\n            &lt;/execution&gt;\r\n          &lt;/executions&gt;\r\n        &lt;/plugin&gt;","title":"Maven build error - Failed to execute goal org.apache.maven.plugins:maven-assembly-plugin:2.5.5","body":"<p>You have to add <code>maven-assembly-plugin</code> in your <code>pom.xml</code> file</p>\n\n<pre><code> &lt;plugin&gt;\n      &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n      &lt;configuration&gt;\n        &lt;archive&gt;\n          &lt;manifest&gt;\n            &lt;mainClass&gt;com.test.MainClassName&lt;/mainClass&gt;\n          &lt;/manifest&gt;\n        &lt;/archive&gt;\n        &lt;descriptorRefs&gt;\n          &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n        &lt;/descriptorRefs&gt;\n      &lt;/configuration&gt;\n      &lt;executions&gt;\n        &lt;execution&gt;\n          &lt;id&gt;make-assembly&lt;/id&gt; \n          &lt;phase&gt;package&lt;/phase&gt; &lt;!-- packaging phase --&gt;\n          &lt;goals&gt;\n            &lt;goal&gt;single&lt;/goal&gt;\n          &lt;/goals&gt;\n        &lt;/execution&gt;\n      &lt;/executions&gt;\n    &lt;/plugin&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7078904,"reputation":345,"user_id":5417974,"display_name":"Luis Carlos"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1606255566,"creation_date":1606255237,"answer_id":64995492,"question_id":32172065,"body_markdown":"When I trying to work with Netbeans 12.0 OpenJDK 15, I needed import some library projects (.jar) that I developed using OracleJDK 8u231 for some code testings; the result was similiar to the question:\r\n\r\n     Failed to execute goal org.apache.maven.plugins:maven-assembly-plugin:2.6:single (make-assembly) \r\n    on project rgbfw-as-core-db: Execution make-assembly of goal org.apache.maven.plugins:maven-assembly-plugin:2.6:single \r\n    failed: An API incompatibility was encountered while executing \r\n    org.apache.maven.plugins:maven-assembly-plugin:2.6:single: java.lang.ExceptionInInitializerError: null\r\n\r\nFor me, the solution was update the version of the &quot;maven-compiler-plugin&quot; and &quot;maven-assembly-plugin&quot; on my library projects(.jar) before make new run of &quot;Clean and build&quot; of the Netbeans Project explorer.\r\nCurrent versions:\r\n\r\nmaven-compiler-plugin(3.8.1)\r\n\r\nmaven-assembly-plugin(3.3.0)","title":"Maven build error - Failed to execute goal org.apache.maven.plugins:maven-assembly-plugin:2.5.5","body":"<p>When I trying to work with Netbeans 12.0 OpenJDK 15, I needed import some library projects (.jar) that I developed using OracleJDK 8u231 for some code testings; the result was similiar to the question:</p>\n<pre><code> Failed to execute goal org.apache.maven.plugins:maven-assembly-plugin:2.6:single (make-assembly) \non project rgbfw-as-core-db: Execution make-assembly of goal org.apache.maven.plugins:maven-assembly-plugin:2.6:single \nfailed: An API incompatibility was encountered while executing \norg.apache.maven.plugins:maven-assembly-plugin:2.6:single: java.lang.ExceptionInInitializerError: null\n</code></pre>\n<p>For me, the solution was update the version of the &quot;maven-compiler-plugin&quot; and &quot;maven-assembly-plugin&quot; on my library projects(.jar) before make new run of &quot;Clean and build&quot; of the Netbeans Project explorer.\nCurrent versions:</p>\n<p>maven-compiler-plugin(3.8.1)</p>\n<p>maven-assembly-plugin(3.3.0)</p>\n"},{"tags":[],"owner":{"account_id":2396304,"reputation":164,"user_id":2095034,"display_name":"Ishmael Mavor Raines"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654697381,"creation_date":1654697381,"answer_id":72547217,"question_id":32172065,"body_markdown":"Do you have the dependecy for it in the pom.xml?\r\n\r\nnote the error its from maven-assembly-plugin:2.5.5\r\n\r\ngo to https://mvnrepository.com/ and search for &quot;maven-assembly-plugin&quot;\r\n\r\npick the right version 2.5.5 (or better ) and copy it to your \r\n&lt;dependencies&gt; list in your pom file\r\n\r\nIf you have a similar plugin under your &lt;plugins&gt; in your pom file...well\r\n\r\ndelete it and  voila","title":"Maven build error - Failed to execute goal org.apache.maven.plugins:maven-assembly-plugin:2.5.5","body":"<p>Do you have the dependecy for it in the pom.xml?</p>\n<p>note the error its from maven-assembly-plugin:2.5.5</p>\n<p>go to <a href=\"https://mvnrepository.com/\" rel=\"nofollow noreferrer\">https://mvnrepository.com/</a> and search for &quot;maven-assembly-plugin&quot;</p>\n<p>pick the right version 2.5.5 (or better ) and copy it to your\n list in your pom file</p>\n<p>If you have a similar plugin under your  in your pom file...well</p>\n<p>delete it and  voila</p>\n"},{"tags":[],"owner":{"account_id":2396304,"reputation":164,"user_id":2095034,"display_name":"Ishmael Mavor Raines"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654697886,"creation_date":1654697886,"answer_id":72547353,"question_id":32172065,"body_markdown":"\r\nGo to https://mvnrepository.com/ and search for &quot;maven-assembly-plugin&quot;\r\npick the right version 2.5.5 (or better ) and copy it to your \r\n\\&lt;dependencies\\&gt; list in your pom file\r\nDelete the plugin under your \\&lt;plugins\\&gt; in your pom file if its the same version as the dependency \r\n","title":"Maven build error - Failed to execute goal org.apache.maven.plugins:maven-assembly-plugin:2.5.5","body":"<p>Go to <a href=\"https://mvnrepository.com/\" rel=\"nofollow noreferrer\">https://mvnrepository.com/</a> and search for &quot;maven-assembly-plugin&quot;\npick the right version 2.5.5 (or better ) and copy it to your\n&lt;dependencies&gt; list in your pom file\nDelete the plugin under your &lt;plugins&gt; in your pom file if its the same version as the dependency</p>\n"},{"tags":[],"owner":{"account_id":29326516,"reputation":1,"user_id":22468874,"display_name":"Manoj Kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693366824,"creation_date":1693366824,"answer_id":77004849,"question_id":32172065,"body_markdown":"Make sure Maven software should be updated one and update the environment variable and path.\r\n\r\nEven not working, remove the environment variable and path.\r\n\r\nEclipse Preferences&gt;Maven&gt;Installations&gt;Add Maven Installed home path and name","title":"Maven build error - Failed to execute goal org.apache.maven.plugins:maven-assembly-plugin:2.5.5","body":"<p>Make sure Maven software should be updated one and update the environment variable and path.</p>\n<p>Even not working, remove the environment variable and path.</p>\n<p>Eclipse Preferences&gt;Maven&gt;Installations&gt;Add Maven Installed home path and name</p>\n"}],"owner":{"account_id":4169518,"reputation":817,"user_id":3417657,"accept_rate":94,"display_name":"NefariousOctopus"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56685,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"accepted_answer_id":32172090,"answer_count":5,"score":3,"last_activity_date":1693366824,"creation_date":1440367891,"question_id":32172065,"body_markdown":"I am trying to build project using Maven. Unfortunately I have no experience with maven so I am a bit helpless. It is most likely caused by the riak submodule. Here is the github repo with code: [YCSB][1]\r\n\r\nMy system:\r\n\r\n    Apache Maven 3.2.2 (NON-CANONICAL_2015-04-01T06:56:20_mockbuild; 2015-04-01T08:56:20+02:00)\r\n    Maven home: /usr/share/maven\r\n    Java version: 1.8.0_51, vendor: Oracle Corporation\r\n    Java home: /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.51-4.b16.fc21.x86_64/jre\r\n    Default locale: en_US, platform encoding: UTF-8\r\n    OS name: &quot;linux&quot;, version: &quot;4.1.5-100.fc21.x86_64&quot;, arch: &quot;amd64&quot;, family: &quot;unix&quot;\r\n\r\nMaven stack trace:\r\n\r\n    [ERROR] Failed to execute goal org.apache.maven.plugins:maven-assembly-plugin:2.5.5:single (default) on project ycsb: Failed to create assembly: Artifact: com.yahoo.ycsb:riak-binding:jar:0.3.1-RC1-SNAPSHOT (included by module) does not have an artifact with a file. Please ensure the package phase is run before the assembly is generated. -&gt; [Help 1]\r\n    org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-assembly-plugin:2.5.5:single (default) on project ycsb: Failed to create assembly: Artifact: com.yahoo.ycsb:riak-binding:jar:0.3.1-RC1-SNAPSHOT (included by module) does not have an artifact with a file. Please ensure the package phase is run before the assembly is generated.\r\n    \tat org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:216)\r\n    \tat org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)\r\n    \tat org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)\r\n    \tat org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:116)\r\n    \tat org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:80)\r\n    \tat org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build(SingleThreadedBuilder.java:51)\r\n    \tat org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:120)\r\n    \tat org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:347)\r\n    \tat org.apache.maven.DefaultMaven.execute(DefaultMaven.java:154)\r\n    \tat org.apache.maven.cli.MavenCli.execute(MavenCli.java:584)\r\n    \tat org.apache.maven.cli.MavenCli.doMain(MavenCli.java:213)\r\n    \tat org.apache.maven.cli.MavenCli.main(MavenCli.java:157)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:497)\r\n    \tat org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:289)\r\n    \tat org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:229)\r\n    \tat org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:415)\r\n    \tat org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:356)\r\n    Caused by: org.apache.maven.plugin.MojoExecutionException: Failed to create assembly: Artifact: com.yahoo.ycsb:riak-binding:jar:0.3.1-RC1-SNAPSHOT (included by module) does not have an artifact with a file. Please ensure the package phase is run before the assembly is generated.\r\n    \tat org.apache.maven.plugin.assembly.mojos.AbstractAssemblyMojo.execute(AbstractAssemblyMojo.java:541)\r\n    \tat org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:132)\r\n    \tat org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:208)\r\n    \t... 19 more\r\n    Caused by: org.apache.maven.plugin.assembly.archive.ArchiveCreationException: Artifact: com.yahoo.ycsb:riak-binding:jar:0.3.1-RC1-SNAPSHOT (included by module) does not have an artifact with a file. Please ensure the package phase is run before the assembly is generated.\r\n    \tat org.apache.maven.plugin.assembly.archive.phase.ModuleSetAssemblyPhase.addModuleArtifact(ModuleSetAssemblyPhase.java:337)\r\n    \tat org.apache.maven.plugin.assembly.archive.phase.ModuleSetAssemblyPhase.addModuleBinaries(ModuleSetAssemblyPhase.java:231)\r\n    \tat org.apache.maven.plugin.assembly.archive.phase.ModuleSetAssemblyPhase$1.accept(ModuleSetAssemblyPhase.java:140)\r\n    \tat org.apache.maven.plugin.assembly.model.Assemblies.forEachModuleSet(Assemblies.java:40)\r\n    \tat org.apache.maven.plugin.assembly.archive.phase.ModuleSetAssemblyPhase.execute(ModuleSetAssemblyPhase.java:126)\r\n    \tat org.apache.maven.plugin.assembly.archive.DefaultAssemblyArchiver.createArchive(DefaultAssemblyArchiver.java:178)\r\n    \tat org.apache.maven.plugin.assembly.mojos.AbstractAssemblyMojo.execute(AbstractAssemblyMojo.java:484)\r\n    \t... 21 more\r\n    [ERROR] \r\n    [ERROR] \r\n    [ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n    [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\r\n    [ERROR] \r\n    [ERROR] After correcting the problems, you can resume the build with the command\r\n    [ERROR]   mvn &lt;goals&gt; -rf :ycsb\r\n\r\nI have no idea what it means so I guess you are my only hope :D\r\n\r\nEDIT:\r\nAfter adding plugin suggested by Subodh Joshi:\r\n\r\n    [ERROR] Failed to execute goal org.apache.maven.plugins:maven-assembly-plugin:2.5.5:single (default) on project binding-parent: Failed to create assembly: Error creating assembly archive jar-with-dependencies: You must set at least one file.\r\n\r\nEDIT2:\r\n`mvn compile` works fine, but `mvn package` fails with above error.\r\n\r\n[1]: https://github.com/LordFazole/YCSB/tree/riak_binding","title":"Maven build error - Failed to execute goal org.apache.maven.plugins:maven-assembly-plugin:2.5.5","body":"<p>I am trying to build project using Maven. Unfortunately I have no experience with maven so I am a bit helpless. It is most likely caused by the riak submodule. Here is the github repo with code: <a href=\"https://github.com/LordFazole/YCSB/tree/riak_binding\" rel=\"nofollow\">YCSB</a></p>\n\n<p>My system:</p>\n\n<pre><code>Apache Maven 3.2.2 (NON-CANONICAL_2015-04-01T06:56:20_mockbuild; 2015-04-01T08:56:20+02:00)\nMaven home: /usr/share/maven\nJava version: 1.8.0_51, vendor: Oracle Corporation\nJava home: /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.51-4.b16.fc21.x86_64/jre\nDefault locale: en_US, platform encoding: UTF-8\nOS name: \"linux\", version: \"4.1.5-100.fc21.x86_64\", arch: \"amd64\", family: \"unix\"\n</code></pre>\n\n<p>Maven stack trace:</p>\n\n<pre><code>[ERROR] Failed to execute goal org.apache.maven.plugins:maven-assembly-plugin:2.5.5:single (default) on project ycsb: Failed to create assembly: Artifact: com.yahoo.ycsb:riak-binding:jar:0.3.1-RC1-SNAPSHOT (included by module) does not have an artifact with a file. Please ensure the package phase is run before the assembly is generated. -&gt; [Help 1]\norg.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-assembly-plugin:2.5.5:single (default) on project ycsb: Failed to create assembly: Artifact: com.yahoo.ycsb:riak-binding:jar:0.3.1-RC1-SNAPSHOT (included by module) does not have an artifact with a file. Please ensure the package phase is run before the assembly is generated.\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:216)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:116)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:80)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build(SingleThreadedBuilder.java:51)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:120)\n    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:347)\n    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:154)\n    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:584)\n    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:213)\n    at org.apache.maven.cli.MavenCli.main(MavenCli.java:157)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:497)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:289)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:229)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:415)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:356)\nCaused by: org.apache.maven.plugin.MojoExecutionException: Failed to create assembly: Artifact: com.yahoo.ycsb:riak-binding:jar:0.3.1-RC1-SNAPSHOT (included by module) does not have an artifact with a file. Please ensure the package phase is run before the assembly is generated.\n    at org.apache.maven.plugin.assembly.mojos.AbstractAssemblyMojo.execute(AbstractAssemblyMojo.java:541)\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:132)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:208)\n    ... 19 more\nCaused by: org.apache.maven.plugin.assembly.archive.ArchiveCreationException: Artifact: com.yahoo.ycsb:riak-binding:jar:0.3.1-RC1-SNAPSHOT (included by module) does not have an artifact with a file. Please ensure the package phase is run before the assembly is generated.\n    at org.apache.maven.plugin.assembly.archive.phase.ModuleSetAssemblyPhase.addModuleArtifact(ModuleSetAssemblyPhase.java:337)\n    at org.apache.maven.plugin.assembly.archive.phase.ModuleSetAssemblyPhase.addModuleBinaries(ModuleSetAssemblyPhase.java:231)\n    at org.apache.maven.plugin.assembly.archive.phase.ModuleSetAssemblyPhase$1.accept(ModuleSetAssemblyPhase.java:140)\n    at org.apache.maven.plugin.assembly.model.Assemblies.forEachModuleSet(Assemblies.java:40)\n    at org.apache.maven.plugin.assembly.archive.phase.ModuleSetAssemblyPhase.execute(ModuleSetAssemblyPhase.java:126)\n    at org.apache.maven.plugin.assembly.archive.DefaultAssemblyArchiver.createArchive(DefaultAssemblyArchiver.java:178)\n    at org.apache.maven.plugin.assembly.mojos.AbstractAssemblyMojo.execute(AbstractAssemblyMojo.java:484)\n    ... 21 more\n[ERROR] \n[ERROR] \n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\n[ERROR] \n[ERROR] After correcting the problems, you can resume the build with the command\n[ERROR]   mvn &lt;goals&gt; -rf :ycsb\n</code></pre>\n\n<p>I have no idea what it means so I guess you are my only hope :D</p>\n\n<p>EDIT:\nAfter adding plugin suggested by Subodh Joshi:</p>\n\n<pre><code>[ERROR] Failed to execute goal org.apache.maven.plugins:maven-assembly-plugin:2.5.5:single (default) on project binding-parent: Failed to create assembly: Error creating assembly archive jar-with-dependencies: You must set at least one file.\n</code></pre>\n\n<p>EDIT2:\n<code>mvn compile</code> works fine, but <code>mvn package</code> fails with above error.</p>\n"},{"tags":["java","android","flutter","dart"],"comments":[{"owner":{"account_id":29096682,"reputation":557,"user_id":22289437,"display_name":"mlodhi"},"score":0,"creation_date":1692600829,"post_id":76942931,"comment_id":135640113,"body_markdown":"Hello, Kindly, try Java 17 instead of 14. And make sure your JAVA_HOME is set to Java 17.","body":"Hello, Kindly, try Java 17 instead of 14. And make sure your JAVA_HOME is set to Java 17."},{"owner":{"account_id":28817456,"reputation":131,"user_id":22070751,"display_name":"Dinesh Kumar M"},"score":0,"creation_date":1692601249,"post_id":76942931,"comment_id":135640177,"body_markdown":"My java version was 17 before and it showed the same error","body":"My java version was 17 before and it showed the same error"},{"owner":{"account_id":17357380,"reputation":485,"user_id":12574439,"display_name":"Abhishek Doshi"},"score":0,"creation_date":1692643974,"post_id":76942931,"comment_id":135648974,"body_markdown":"Check this: https://stackoverflow.com/questions/68597899/bug-exception-in-phase-semantic-analysis-in-source-unit-buildscript-unsup","body":"Check this: <a href=\"https://stackoverflow.com/questions/68597899/bug-exception-in-phase-semantic-analysis-in-source-unit-buildscript-unsup\" title=\"bug exception in phase semantic analysis in source unit buildscript unsup\">stackoverflow.com/questions/68597899/&hellip;</a>"},{"owner":{"account_id":8334489,"reputation":5467,"user_id":6261890,"display_name":"Bowman Zhu-MSFT"},"score":0,"creation_date":1692697593,"post_id":76942931,"comment_id":135656160,"body_markdown":"What is the JAVA_HOME?","body":"What is the JAVA_HOME?"}],"owner":{"account_id":28817456,"reputation":131,"user_id":22070751,"display_name":"Dinesh Kumar M"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693365861,"creation_date":1692600283,"question_id":76942931,"body_markdown":"FAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nCould not open settings generic class cache for settings file &#39;C:\\Users\\Dines\\Desktop\\New folder (9)\\android\\settings.gradle&#39; (C:\\Users\\Dines\\.gradle\\caches\\6.5.1\\scripts\\nj0dc4o4zfdtg2l3tavvbnpv).\r\n&gt; BUG! exception in phase &#39;semantic analysis&#39; in source unit &#39;_BuildScript_&#39; Unsupported class file major version 61\r\n\r\nI tried to change my java version to 14 so that my gradle version matches but still I&#39;m getting an error.","title":"I&#39;m getting an error in my flutter code when I use BLoC. what should I do to get the code running. The error is shown as given below","body":"<p>FAILURE: Build failed with an exception.</p>\n<ul>\n<li>What went wrong:\nCould not open settings generic class cache for settings file 'C:\\Users\\Dines\\Desktop\\New folder (9)\\android\\settings.gradle' (C:\\Users\\Dines.gradle\\caches\\6.5.1\\scripts\\nj0dc4o4zfdtg2l3tavvbnpv).</li>\n</ul>\n<blockquote>\n<p>BUG! exception in phase 'semantic analysis' in source unit '<em>BuildScript</em>' Unsupported class file major version 61</p>\n</blockquote>\n<p>I tried to change my java version to 14 so that my gradle version matches but still I'm getting an error.</p>\n"},{"tags":["java","android","service","notifications","android-notifications"],"answers":[{"tags":[],"owner":{"account_id":6250157,"reputation":18427,"user_id":4860513,"display_name":"guipivoto"},"down_vote_count":0,"up_vote_count":31,"is_accepted":true,"score":31,"last_activity_date":1583340550,"creation_date":1583340550,"answer_id":60530985,"question_id":60529974,"body_markdown":"Issue is happening because you are creating a channel with an `ID` but sending the notification in a different `ID`:\r\n\r\n    // Here, you are using the package name as channel ID\r\n    NotificationChannel chan = new NotificationChannel(\r\n                  getApplicationContext().getPackageName(), \r\n                  &quot;My Foreground Service&quot;,\r\n                  NotificationManager.IMPORTANCE_LOW);\r\n\r\n    // But here, you are sending notifications to &quot;MyChannelId&quot;\r\n    NotificationCompat.Builder notificationBuilder = new NotificationCompat.Builder( \r\n                  this, &quot;MyChannelId&quot;);\r\n\r\nSo, I believe you just need to change Channel ID to `MyChannelID` as follows: \r\n\r\n    NotificationChannel chan = new NotificationChannel(\r\n                  &quot;MyChannelId&quot;,\r\n                  &quot;My Foreground Service&quot;,\r\n                  NotificationManager.IMPORTANCE_LOW);","title":"android.app.RemoteServiceException: Bad notification for startForeground","body":"<p>Issue is happening because you are creating a channel with an <code>ID</code> but sending the notification in a different <code>ID</code>:</p>\n\n<pre><code>// Here, you are using the package name as channel ID\nNotificationChannel chan = new NotificationChannel(\n              getApplicationContext().getPackageName(), \n              \"My Foreground Service\",\n              NotificationManager.IMPORTANCE_LOW);\n\n// But here, you are sending notifications to \"MyChannelId\"\nNotificationCompat.Builder notificationBuilder = new NotificationCompat.Builder( \n              this, \"MyChannelId\");\n</code></pre>\n\n<p>So, I believe you just need to change Channel ID to <code>MyChannelID</code> as follows: </p>\n\n<pre><code>NotificationChannel chan = new NotificationChannel(\n              \"MyChannelId\",\n              \"My Foreground Service\",\n              NotificationManager.IMPORTANCE_LOW);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10133889,"reputation":55,"user_id":7486189,"display_name":"mohammadjan naser"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1675598331,"creation_date":1675598331,"answer_id":75352050,"question_id":60529974,"body_markdown":"       Intent intent = new Intent(mContext, BaseActivity.class);\r\n        intent.putExtra(&quot;fragment&quot;,curapp.getSection());\r\n        intent.putExtra(&quot;appmodel&quot;,curapp);\r\n\r\n        PendingIntent pendingIntent = PendingIntent.getActivity(this.getApplicationContext(), 1, intent, PendingIntent.FLAG_IMMUTABLE);\r\n\r\n        mNotificationManager = new NotificationCompat.Builder(mContext,curapp.getId().toString());\r\n        notificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);\r\n\r\n        mNotificationManager.setContentTitle(curapp.getName())\r\n                .setContentText(mContext.getString(R.string.preparing_for_download))\r\n                .setSmallIcon(R.drawable.ic_white_logo)\r\n                .setProgress(100, 0, true)\r\n                .setContentIntent(pendingIntent)\r\n                .setOngoing(true)\r\n                .setAutoCancel(true);\r\n\r\n\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O)  {\r\n            NotificationChannel channel =\r\n                    new NotificationChannel(&quot;NOTIFICATION_ID&quot;, &quot;Downloading..&quot;,\r\n                            NotificationManager.IMPORTANCE_DEFAULT);\r\n            channel.setLightColor(Color.BLUE);\r\n            channel.setLockscreenVisibility(Notification.VISIBILITY_PRIVATE);\r\n            notificationManager.createNotificationChannel(channel);\r\n            mNotificationManager.setChannelId(&quot;NOTIFICATION_ID&quot;);\r\n        }\r\n\r\n        Notification notification = mNotificationManager.build();\r\n        startForeground(curapp.getId(), notification);","title":"android.app.RemoteServiceException: Bad notification for startForeground","body":"<pre><code>   Intent intent = new Intent(mContext, BaseActivity.class);\n    intent.putExtra(&quot;fragment&quot;,curapp.getSection());\n    intent.putExtra(&quot;appmodel&quot;,curapp);\n\n    PendingIntent pendingIntent = PendingIntent.getActivity(this.getApplicationContext(), 1, intent, PendingIntent.FLAG_IMMUTABLE);\n\n    mNotificationManager = new NotificationCompat.Builder(mContext,curapp.getId().toString());\n    notificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);\n\n    mNotificationManager.setContentTitle(curapp.getName())\n            .setContentText(mContext.getString(R.string.preparing_for_download))\n            .setSmallIcon(R.drawable.ic_white_logo)\n            .setProgress(100, 0, true)\n            .setContentIntent(pendingIntent)\n            .setOngoing(true)\n            .setAutoCancel(true);\n\n\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O)  {\n        NotificationChannel channel =\n                new NotificationChannel(&quot;NOTIFICATION_ID&quot;, &quot;Downloading..&quot;,\n                        NotificationManager.IMPORTANCE_DEFAULT);\n        channel.setLightColor(Color.BLUE);\n        channel.setLockscreenVisibility(Notification.VISIBILITY_PRIVATE);\n        notificationManager.createNotificationChannel(channel);\n        mNotificationManager.setChannelId(&quot;NOTIFICATION_ID&quot;);\n    }\n\n    Notification notification = mNotificationManager.build();\n    startForeground(curapp.getId(), notification);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7510682,"reputation":1003,"user_id":5705721,"display_name":"Makarand"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693365691,"creation_date":1693365691,"answer_id":77004796,"question_id":60529974,"body_markdown":"In my case I had created notification channel in `MyApplication` class but I did not register it in manifest file\r\n\r\n    &lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.POST_NOTIFICATIONS&quot; /&gt;\r\n    &lt;application\r\n        android:name=&quot;.MyApplication&quot;\r\n        android:allowBackup=&quot;true&quot;","title":"android.app.RemoteServiceException: Bad notification for startForeground","body":"<p>In my case I had created notification channel in <code>MyApplication</code> class but I did not register it in manifest file</p>\n<pre><code>&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\nxmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n&lt;uses-permission android:name=&quot;android.permission.POST_NOTIFICATIONS&quot; /&gt;\n&lt;application\n    android:name=&quot;.MyApplication&quot;\n    android:allowBackup=&quot;true&quot;\n</code></pre>\n"}],"owner":{"account_id":9356406,"reputation":546,"user_id":6944302,"display_name":"Perihan Mirkelam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20565,"favorite_count":0,"down_vote_count":0,"up_vote_count":20,"accepted_answer_id":60530985,"answer_count":3,"score":20,"last_activity_date":1693365691,"creation_date":1583337423,"question_id":60529974,"body_markdown":"I&#39;m trying to start foreground service as follow:   \r\n\r\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\r\n\r\n        NotificationChannel chan = new NotificationChannel(\r\n                getApplicationContext().getPackageName(),\r\n                &quot;My Foreground Service&quot;,\r\n                NotificationManager.IMPORTANCE_LOW);\r\n        chan.setLightColor(Color.BLUE);\r\n        chan.setLockscreenVisibility(Notification.VISIBILITY_SECRET);\r\n\r\n        NotificationManager manager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);\r\n        assert manager != null;\r\n        manager.createNotificationChannel(chan);\r\n\r\n        NotificationCompat.Builder notificationBuilder = new NotificationCompat.Builder( \r\n                this, &quot;MyChannelId&quot;);\r\n        Notification notification = notificationBuilder.setOngoing(true)\r\n                .setSmallIcon(R.mipmap.my_icon)\r\n                .setContentTitle(&quot;App is running on foreground&quot;)\r\n                .setPriority(NotificationManager.IMPORTANCE_LOW)\r\n                .setCategory(Notification.CATEGORY_SERVICE)\r\n                .setChannelId(&quot;MyChannelId&quot;)\r\n                .build();\r\n\r\n        startForeground(1, notification);\r\n    }\r\n\r\nThis solution works for Android 8.0 Emulator.\r\nBut I got the error below on Android 8.1, 9.0 and 10.0 Emulator.\r\n\r\n    android.app.RemoteServiceException: Bad notification for startForeground: java.lang.RuntimeException: invalid channel for service notification: Notification(channel=MyChannelId pri=2 contentView=null vibrate=null sound=null defaults=0x0 flags=0x42 color=0x00000000 category=service vis=PRIVATE)\r\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1945)\r\n        at android.os.Handler.dispatchMessage(Handler.java:107)\r\n        at android.os.Looper.loop(Looper.java:214)\r\n        at android.app.ActivityThread.main(ActivityThread.java:7356)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:492)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:930)\r\n\r\n\r\nPS: I tried on a non-emulator Android 9.0 device and didn&#39;t get this error.","title":"android.app.RemoteServiceException: Bad notification for startForeground","body":"<p>I'm trying to start foreground service as follow:   </p>\n\n<pre><code>if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n\n    NotificationChannel chan = new NotificationChannel(\n            getApplicationContext().getPackageName(),\n            \"My Foreground Service\",\n            NotificationManager.IMPORTANCE_LOW);\n    chan.setLightColor(Color.BLUE);\n    chan.setLockscreenVisibility(Notification.VISIBILITY_SECRET);\n\n    NotificationManager manager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);\n    assert manager != null;\n    manager.createNotificationChannel(chan);\n\n    NotificationCompat.Builder notificationBuilder = new NotificationCompat.Builder( \n            this, \"MyChannelId\");\n    Notification notification = notificationBuilder.setOngoing(true)\n            .setSmallIcon(R.mipmap.my_icon)\n            .setContentTitle(\"App is running on foreground\")\n            .setPriority(NotificationManager.IMPORTANCE_LOW)\n            .setCategory(Notification.CATEGORY_SERVICE)\n            .setChannelId(\"MyChannelId\")\n            .build();\n\n    startForeground(1, notification);\n}\n</code></pre>\n\n<p>This solution works for Android 8.0 Emulator.\nBut I got the error below on Android 8.1, 9.0 and 10.0 Emulator.</p>\n\n<pre><code>android.app.RemoteServiceException: Bad notification for startForeground: java.lang.RuntimeException: invalid channel for service notification: Notification(channel=MyChannelId pri=2 contentView=null vibrate=null sound=null defaults=0x0 flags=0x42 color=0x00000000 category=service vis=PRIVATE)\n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1945)\n    at android.os.Handler.dispatchMessage(Handler.java:107)\n    at android.os.Looper.loop(Looper.java:214)\n    at android.app.ActivityThread.main(ActivityThread.java:7356)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:492)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:930)\n</code></pre>\n\n<p>PS: I tried on a non-emulator Android 9.0 device and didn't get this error.</p>\n"},{"tags":["java","html","spring-boot","thymeleaf","spring-thymeleaf"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1693392571,"post_id":77004731,"comment_id":135753893,"body_markdown":"None of your tagged topics has anything to do with PDF. How is that involved?","body":"None of your tagged topics has anything to do with PDF. How is that involved?"},{"owner":{"account_id":5152799,"reputation":19357,"user_id":4126893,"display_name":"Metroids"},"score":0,"creation_date":1693438464,"post_id":77004731,"comment_id":135762780,"body_markdown":"Escape for special characters before inserting `&lt;br /&gt;`?","body":"Escape for special characters before inserting <code>&lt;br &#47;&gt;</code>?"}],"owner":{"account_id":29326233,"reputation":1,"user_id":22468651,"display_name":"Jagga"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693365306,"creation_date":1693364414,"question_id":77004731,"body_markdown":"I have a client name which can be 50 characters long and it can contain html special characters (\\&quot;&amp;&#39;&lt;&gt;]). This client name is printed in each row of a table. My requirement is I want to add new line after every 12 characters. \r\n\r\nI am adding new line `&lt;br&gt;` from Java code than I am escaping special characters using \r\n\r\n`StringEscapeUtils.escapeHtml4` \r\n\r\non HTML I am rendering it like this\r\n\r\n    &lt;td&gt;\r\n    &lt;div th:utext=&quot;${row.get(&#39;client&#39;)}&quot;&gt;&lt;/div&gt;\r\n    &lt;/td&gt;\r\n\r\nOn my PDF document I can see `&lt;br&gt;` printed instead of new line\r\n\r\nI debugged the code from Java and this my client name at different stages in Java application\r\n\r\nClient Name: `INVC _Client01 _Abcde_lkgyiop_ Kamal_nagar\\&quot;&amp;&#39;&lt;&gt;]a`\r\n\r\nClient Name after adding `&lt;br&gt;` : \r\n\r\n    INVC _Client&lt;br&gt;01 _Abcde_lk&lt;br&gt;gyiop_ Kamal&lt;br&gt;_nagar\\&quot;&amp;&#39;&lt;&gt;&lt;br&gt;]a\r\n\r\nClient Name after escaping HTML special characters: \r\n\r\n    INVC _Client&amp;lt;br&amp;gt;01 _Abcde_lk&amp;lt;br&amp;gt;gyiop_ Kamal&amp;lt;br&amp;gt;_nagar\\&amp;quot;&amp;amp;&#39;&amp;lt;&amp;gt;&amp;lt;br&amp;gt;]a\r\n\r\nEscaped Client name I am sending to PDF.\r\n\r\nI also tried adding new line directly on HTML like this\r\n\r\n    &lt;td&gt;\r\n        &lt;div th:with=&quot;formattedClient=${row.get(&#39;client&#39;)}&quot;&gt;\r\n          &lt;div  th:utext=&quot;${formattedClient.replaceAll(&#39;(.{12})&#39;, &#39;$1&lt;br/&gt;&#39;)}&quot;&gt;&lt;/div&gt;\r\n        &lt;/div&gt;\r\n     &lt;/td&gt;\r\n\r\nBut it is also failing since my client name is containing HTML special characters.\r\n\r\nAny help will be appreciated , Thank You","title":"Thymeleaf + Spring + text with html special characters not printing new line, instead printing &lt;br&gt;","body":"<p>I have a client name which can be 50 characters long and it can contain html special characters (&quot;&amp;'&lt;&gt;]). This client name is printed in each row of a table. My requirement is I want to add new line after every 12 characters.</p>\n<p>I am adding new line <code>&lt;br&gt;</code> from Java code than I am escaping special characters using</p>\n<p><code>StringEscapeUtils.escapeHtml4</code></p>\n<p>on HTML I am rendering it like this</p>\n<pre><code>&lt;td&gt;\n&lt;div th:utext=&quot;${row.get('client')}&quot;&gt;&lt;/div&gt;\n&lt;/td&gt;\n</code></pre>\n<p>On my PDF document I can see <code>&lt;br&gt;</code> printed instead of new line</p>\n<p>I debugged the code from Java and this my client name at different stages in Java application</p>\n<p>Client Name: <code>INVC _Client01 _Abcde_lkgyiop_ Kamal_nagar\\&quot;&amp;'&lt;&gt;]a</code></p>\n<p>Client Name after adding <code>&lt;br&gt;</code> :</p>\n<pre><code>INVC _Client&lt;br&gt;01 _Abcde_lk&lt;br&gt;gyiop_ Kamal&lt;br&gt;_nagar\\&quot;&amp;'&lt;&gt;&lt;br&gt;]a\n</code></pre>\n<p>Client Name after escaping HTML special characters:</p>\n<pre><code>INVC _Client&amp;lt;br&amp;gt;01 _Abcde_lk&amp;lt;br&amp;gt;gyiop_ Kamal&amp;lt;br&amp;gt;_nagar\\&amp;quot;&amp;amp;'&amp;lt;&amp;gt;&amp;lt;br&amp;gt;]a\n</code></pre>\n<p>Escaped Client name I am sending to PDF.</p>\n<p>I also tried adding new line directly on HTML like this</p>\n<pre><code>&lt;td&gt;\n    &lt;div th:with=&quot;formattedClient=${row.get('client')}&quot;&gt;\n      &lt;div  th:utext=&quot;${formattedClient.replaceAll('(.{12})', '$1&lt;br/&gt;')}&quot;&gt;&lt;/div&gt;\n    &lt;/div&gt;\n &lt;/td&gt;\n</code></pre>\n<p>But it is also failing since my client name is containing HTML special characters.</p>\n<p>Any help will be appreciated , Thank You</p>\n"},{"tags":["java","asynchronous","android-asynctask","http-post"],"comments":[{"owner":{"account_id":5145072,"reputation":1271,"user_id":4121301,"accept_rate":60,"display_name":"Liastre"},"score":0,"creation_date":1603446235,"post_id":64486039,"comment_id":114046208,"body_markdown":"Does this answer your question? [Android Asynctask deprecated. Need substitute examples](https://stackoverflow.com/questions/62438770/android-asynctask-deprecated-need-substitute-examples)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/62438770/android-asynctask-deprecated-need-substitute-examples\">Android Asynctask deprecated. Need substitute examples</a>"},{"owner":{"account_id":7350474,"reputation":349,"user_id":5596834,"accept_rate":0,"display_name":"Cristian "},"score":0,"creation_date":1603525041,"post_id":64486039,"comment_id":114069897,"body_markdown":"I prefere to convert java code into Kotlin coroutines with async","body":"I prefere to convert java code into Kotlin coroutines with async"}],"answers":[{"tags":[],"owner":{"account_id":15578012,"reputation":64,"user_id":11238652,"display_name":"Tarun Sharma"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1617875189,"creation_date":1617875189,"answer_id":67001432,"question_id":64486039,"body_markdown":"      ExecutorService executor = Executors.newSingleThreadExecutor();\r\n      Handler handler = new Handler(Looper.getMainLooper());\r\n      executor.execute(() -&gt; {\r\n            //Background work here\r\n            handler.post(() -&gt; {\r\n                //UI Thread work here\r\n            });\r\n      });","title":"Alternative to AsyncTask with HTTP POST request because it was deprecated","body":"<pre><code>  ExecutorService executor = Executors.newSingleThreadExecutor();\n  Handler handler = new Handler(Looper.getMainLooper());\n  executor.execute(() -&gt; {\n        //Background work here\n        handler.post(() -&gt; {\n            //UI Thread work here\n        });\n  });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":397301,"reputation":544,"user_id":761348,"accept_rate":71,"display_name":"Jayavinoth"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1621617673,"creation_date":1621617673,"answer_id":67641344,"question_id":64486039,"body_markdown":"Use ExecutorService with methods.\r\n\r\nInstead of calling the asynctask, call method with parameters.\r\n\r\n    String asyncResult = AsyncCall(UrlServer, jsonData.toString());\r\n    \r\nCreate method to handle the parameters.\r\n    \r\n    public String AsyncCall(String UrlServer, String jsonData) {\r\n    \r\n    private static final int CONNECTION_TIMEOUT=10000;\r\n    private static final int READ_TIMEOUT=15000;\r\n    private static String getResult = null;\r\n    \r\n      ExecutorService executor = Executors.newSingleThreadExecutor();\r\n      Handler handler = new Handler(Looper.getMainLooper());\r\n       \r\n      executor.execute(() -&gt; {\r\n            //Background work here\r\n    \t\t\r\n    \t//URL: params[0]\r\n    \tString URL = UrlServer;\r\n        //JSON Data: params[1]\r\n    \tString JSONData = jsonData;\r\n        \r\n        // I made HTTP URL CONNECTION and store server data in result variable\r\n    \t\r\n    \tgetResult = result;\r\n    \t\r\n        handler.post(() -&gt; {\r\n            //UI Thread work here\r\n     \t    return result;\r\n        });\r\n      });\r\n     }\r\n\r\n","title":"Alternative to AsyncTask with HTTP POST request because it was deprecated","body":"<p>Use ExecutorService with methods.</p>\n<p>Instead of calling the asynctask, call method with parameters.</p>\n<pre><code>String asyncResult = AsyncCall(UrlServer, jsonData.toString());\n</code></pre>\n<p>Create method to handle the parameters.</p>\n<pre><code>public String AsyncCall(String UrlServer, String jsonData) {\n\nprivate static final int CONNECTION_TIMEOUT=10000;\nprivate static final int READ_TIMEOUT=15000;\nprivate static String getResult = null;\n\n  ExecutorService executor = Executors.newSingleThreadExecutor();\n  Handler handler = new Handler(Looper.getMainLooper());\n   \n  executor.execute(() -&gt; {\n        //Background work here\n        \n    //URL: params[0]\n    String URL = UrlServer;\n    //JSON Data: params[1]\n    String JSONData = jsonData;\n    \n    // I made HTTP URL CONNECTION and store server data in result variable\n    \n    getResult = result;\n    \n    handler.post(() -&gt; {\n        //UI Thread work here\n        return result;\n    });\n  });\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15023841,"reputation":61,"user_id":10844418,"display_name":"Noman Zafar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1623935549,"creation_date":1623935549,"answer_id":68020104,"question_id":64486039,"body_markdown":"Use retrofit for http post request as it is easy and flexible.","title":"Alternative to AsyncTask with HTTP POST request because it was deprecated","body":"<p>Use retrofit for http post request as it is easy and flexible.</p>\n"},{"tags":[],"owner":{"account_id":18858502,"reputation":325,"user_id":13755907,"display_name":"basileus"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651122480,"creation_date":1651122480,"answer_id":72038293,"question_id":64486039,"body_markdown":"I couldn&#39;t get compiled what #Jayavinoth proposed, so I worked out of it solution, that worked for me. Additionally I put that in the external class for sanity and clarity purpose. But you can move it to the MainActivity and get rid of reference to it.\r\n\r\n    public class GetAsyncURL {\r\n    private final MainActivity mainActivity;\r\n\r\n    public GetAsyncURL (MainActivity mainActivity) {\r\n        this.mainActivity = mainActivity; \r\n    }\r\n\r\n\r\n    public void asyncCall(String urlServer) {\r\n\r\n        AtomicReference&lt;String&gt; getResult = new AtomicReference&lt;&gt;();\r\n\r\n        ExecutorService executor = Executors.newSingleThreadExecutor();\r\n        Handler handler = new Handler(Looper.getMainLooper());\r\n\r\n        executor.execute(() -&gt; {\r\n            //Background work here\r\n\r\n            String answerHTTP = null;\r\n            try {\r\n                answerHTTP = getUrlString(urlServer);\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n\r\n            getResult.set(answerHTTP);\r\n\r\n            handler.post(() -&gt; {\r\n                //UI Thread work here\r\n                if(getResult.get() != null &amp;&amp; !getResult.get().equals(&quot;&quot;)) {\r\n                    mainActivity.process_your_result_in_main(getResult.get());\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n\r\n\r\n    private static String getUrlString(String urlSpec) throws IOException {\r\n        URL url = new URL(urlSpec);\r\n        URLConnection connection = url.openConnection();\r\n\r\n        ByteArrayOutputStream out = new ByteArrayOutputStream();\r\n        InputStream in = connection.getInputStream();\r\n\r\n        int bytesRead;\r\n        byte[] buffer = new byte[65536];\r\n        while((bytesRead = in.read(buffer)) &gt; 0) {\r\n            out.write(buffer, 0, bytesRead);\r\n        }\r\n        out.close();\r\n        return out.toString();\r\n    }\r\n}\r\n\r\nThen you call it simply with:\r\n\r\n    new GetAsyncURL(this).asyncCall(your_url);","title":"Alternative to AsyncTask with HTTP POST request because it was deprecated","body":"<p>I couldn't get compiled what #Jayavinoth proposed, so I worked out of it solution, that worked for me. Additionally I put that in the external class for sanity and clarity purpose. But you can move it to the MainActivity and get rid of reference to it.</p>\n<pre><code>public class GetAsyncURL {\nprivate final MainActivity mainActivity;\n\npublic GetAsyncURL (MainActivity mainActivity) {\n    this.mainActivity = mainActivity; \n}\n\n\npublic void asyncCall(String urlServer) {\n\n    AtomicReference&lt;String&gt; getResult = new AtomicReference&lt;&gt;();\n\n    ExecutorService executor = Executors.newSingleThreadExecutor();\n    Handler handler = new Handler(Looper.getMainLooper());\n\n    executor.execute(() -&gt; {\n        //Background work here\n\n        String answerHTTP = null;\n        try {\n            answerHTTP = getUrlString(urlServer);\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n\n        getResult.set(answerHTTP);\n\n        handler.post(() -&gt; {\n            //UI Thread work here\n            if(getResult.get() != null &amp;&amp; !getResult.get().equals(&quot;&quot;)) {\n                mainActivity.process_your_result_in_main(getResult.get());\n            }\n        });\n    });\n}\n\n\n\nprivate static String getUrlString(String urlSpec) throws IOException {\n    URL url = new URL(urlSpec);\n    URLConnection connection = url.openConnection();\n\n    ByteArrayOutputStream out = new ByteArrayOutputStream();\n    InputStream in = connection.getInputStream();\n\n    int bytesRead;\n    byte[] buffer = new byte[65536];\n    while((bytesRead = in.read(buffer)) &gt; 0) {\n        out.write(buffer, 0, bytesRead);\n    }\n    out.close();\n    return out.toString();\n}\n</code></pre>\n<p>}</p>\n<p>Then you call it simply with:</p>\n<pre><code>new GetAsyncURL(this).asyncCall(your_url);\n</code></pre>\n"}],"owner":{"account_id":7350474,"reputation":349,"user_id":5596834,"accept_rate":0,"display_name":"Cristian "},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3163,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":4,"score":2,"last_activity_date":1693365151,"creation_date":1603382274,"question_id":64486039,"body_markdown":"I made an android app 5 years ago that use AsyncTask to create an HTTP POST request to send a receive data from server, with two parameters. Any help would be appreciated, thanks\r\n\r\nCall example:\r\n\r\n    String asyncResult = new AsyncCall().execute(UrlServer, jsonData.toString()).get();\r\n\r\nMy basic AsyncTask Class\r\n\r\n    public class AsyncCall extends AsyncTask&lt;String, String, String&gt;{\r\n\r\n    private static final int CONNECTION_TIMEOUT=10000;\r\n    private static final int READ_TIMEOUT=15000;\r\n\r\n    @Override\r\n    protected void onPreExecute() {\r\n        super.onPreExecute();\r\n\r\n    }\r\n    @Override\r\n    protected String doInBackground(String... params) {\r\n        //URL: params[0]\r\n        //JSON Data: params[1]\r\n        \r\n        // I made HTTP URL CONNECTION and store server data in result variable\r\n    }\r\n\r\n    @Override\r\n    protected void onPostExecute(String result) {\r\n\r\n        return result;\r\n    }","title":"Alternative to AsyncTask with HTTP POST request because it was deprecated","body":"<p>I made an android app 5 years ago that use AsyncTask to create an HTTP POST request to send a receive data from server, with two parameters. Any help would be appreciated, thanks</p>\n<p>Call example:</p>\n<pre><code>String asyncResult = new AsyncCall().execute(UrlServer, jsonData.toString()).get();\n</code></pre>\n<p>My basic AsyncTask Class</p>\n<pre><code>public class AsyncCall extends AsyncTask&lt;String, String, String&gt;{\n\nprivate static final int CONNECTION_TIMEOUT=10000;\nprivate static final int READ_TIMEOUT=15000;\n\n@Override\nprotected void onPreExecute() {\n    super.onPreExecute();\n\n}\n@Override\nprotected String doInBackground(String... params) {\n    //URL: params[0]\n    //JSON Data: params[1]\n    \n    // I made HTTP URL CONNECTION and store server data in result variable\n}\n\n@Override\nprotected void onPostExecute(String result) {\n\n    return result;\n}\n</code></pre>\n"},{"tags":["java","spring","tomcat","spring-boot"],"comments":[{"owner":{"account_id":2155152,"reputation":3994,"user_id":1910582,"accept_rate":88,"display_name":"Bond - Java Bond"},"score":0,"creation_date":1520352989,"post_id":49135156,"comment_id":85275480,"body_markdown":"Please share your config file &amp; pom.xml","body":"Please share your config file &amp; pom.xml"},{"owner":{"account_id":6759653,"reputation":5203,"user_id":5207023,"accept_rate":100,"display_name":"Mykola Yashchenko"},"score":0,"creation_date":1520360957,"post_id":49135156,"comment_id":85280381,"body_markdown":"@Bond-JavaBond done","body":"@Bond-JavaBond done"},{"owner":{"account_id":2155152,"reputation":3994,"user_id":1910582,"accept_rate":88,"display_name":"Bond - Java Bond"},"score":0,"creation_date":1520439711,"post_id":49135156,"comment_id":85318042,"body_markdown":"Also please share the `Application.java`","body":"Also please share the <code>Application.java</code>"},{"owner":{"account_id":6759653,"reputation":5203,"user_id":5207023,"accept_rate":100,"display_name":"Mykola Yashchenko"},"score":0,"creation_date":1520503611,"post_id":49135156,"comment_id":85345908,"body_markdown":"@Bond-JavaBond done. Nothing special in Application.java","body":"@Bond-JavaBond done. Nothing special in Application.java"},{"owner":{"account_id":9856796,"reputation":1340,"user_id":7301044,"display_name":"Saulius Next"},"score":0,"creation_date":1520925438,"post_id":49135156,"comment_id":85503934,"body_markdown":"Hi add &#39;spring-boot-starter-tomcat&#39; and plugin &#39;spring-boot-maven-plugin&#39; to dependencies. Override configure method in Application class  with return &quot;return application.sources(Application.class);&quot; this sould fix config initialization. Is there any reason why you excluding tomcat-annotations-api?","body":"Hi add &#39;spring-boot-starter-tomcat&#39; and plugin &#39;spring-boot-maven-plugin&#39; to dependencies. Override configure method in Application class  with return &quot;return application.sources(Application.class);&quot; this sould fix config initialization. Is there any reason why you excluding tomcat-annotations-api?"}],"answers":[{"tags":[],"owner":{"account_id":4069052,"reputation":2822,"user_id":3342866,"display_name":"CGS"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1693364733,"creation_date":1520924778,"answer_id":49250137,"question_id":49135156,"body_markdown":"There could be 2 scenarios in this.\r\n\r\n## Scenario 1\r\n\r\nApplication is up and running, the App Context is created and then some runtime exception occurs in the server and you want to do a graceful shutdown. In this scenario, you can use a utility like [Spring boot Graceful shutdown][1].\r\n\r\n[![Ref: https://github.com/corentin59/spring-boot-graceful-shutdown][2]][2]\r\n\r\n## Scenario 2\r\n\r\nThis is the scenario which occurs when Spring Boot is unable to create the Application context itself. Your scenario falls into this category. When application boots up, it tries to wire up the configurations from the application.properties and if there are any issues, the application context itself would not be created.\r\n\r\nHence in this scenario, you cannot opt for a graceful shutdown as you don&#39;t have an instance of Application context. In such cases, you can catch the exception, choose appropriate logging and do a system exit manually.\r\n\r\n```java\r\ntry{\r\n    SpringApplication.run(Application.class, args).close();;\r\n}\r\ncatch(Exception ex){\r\n\tSystem.out.println(&quot;Going to exit&quot;);\r\n\tSystem.exit(-1);\r\n}\r\n```\r\n\r\nAfter this, Tomcat instance will not be running and port would be available to use.\r\n\r\n\r\n  [1]: https://github.com/corentin59/spring-boot-graceful-shutdown\r\n  [2]: https://i.stack.imgur.com/dGc6K.png","title":"Properly terminate Spring Boot and Tomcat if initialization of AppContext fails","body":"<p>There could be 2 scenarios in this.</p>\n<h2>Scenario 1</h2>\n<p>Application is up and running, the App Context is created and then some runtime exception occurs in the server and you want to do a graceful shutdown. In this scenario, you can use a utility like <a href=\"https://github.com/corentin59/spring-boot-graceful-shutdown\" rel=\"nofollow noreferrer\">Spring boot Graceful shutdown</a>.</p>\n<p><a href=\"https://i.stack.imgur.com/dGc6K.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dGc6K.png\" alt=\"Ref: https://github.com/corentin59/spring-boot-graceful-shutdown\" /></a></p>\n<h2>Scenario 2</h2>\n<p>This is the scenario which occurs when Spring Boot is unable to create the Application context itself. Your scenario falls into this category. When application boots up, it tries to wire up the configurations from the application.properties and if there are any issues, the application context itself would not be created.</p>\n<p>Hence in this scenario, you cannot opt for a graceful shutdown as you don't have an instance of Application context. In such cases, you can catch the exception, choose appropriate logging and do a system exit manually.</p>\n<pre class=\"lang-java prettyprint-override\"><code>try{\n    SpringApplication.run(Application.class, args).close();;\n}\ncatch(Exception ex){\n    System.out.println(&quot;Going to exit&quot;);\n    System.exit(-1);\n}\n</code></pre>\n<p>After this, Tomcat instance will not be running and port would be available to use.</p>\n"}],"owner":{"account_id":6759653,"reputation":5203,"user_id":5207023,"accept_rate":100,"display_name":"Mykola Yashchenko"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3599,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":49250137,"answer_count":1,"score":4,"last_activity_date":1693364733,"creation_date":1520352091,"question_id":49135156,"body_markdown":"When I start Spring Boot application on embedded Tomcat and something fails during startup (for instance there is no connection to DB or Liquibase update fails or circular dependency found, etc), Tomcat continues listening on 8080 port.\r\n\r\nIf I send HTTP request to some endpoint, an application returns 404 NOT FOUND.\r\n\r\n 1. Is this expected behavior (should Tomcat continue listening)?\r\n 2. How to stop Spring Boot and Tomcat when initialization of the application context fails?\r\n\r\nHere EXAMPLE of the log:\r\n\r\n    org.springframework.context.ApplicationContextException: Unable to start embedded container; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;tomcatEmbeddedServletContainerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/web/EmbeddedServletContainerAutoConfiguration$EmbeddedTomcat.class]: Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;serverProperties&#39; defined in class path resource [org/springframework/boot/autoconfigure/web/ServerPropertiesAutoConfiguration.class]: Initialization of bean failed; nested exception is javax.validation.ValidationException: Unable to instantiate Configuration.\r\n    \tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.onRefresh(EmbeddedWebApplicationContext.java:137)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:536)\r\n        at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:122)\r\n    \tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:693)\r\n    \tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:360)\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:303)\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1118)\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1107)\r\n    \tat com.test.Application.main(Application.java:33)\r\n\r\nAfter this exception Tomcat still available on the specified port.\r\n\r\n**UPD**\r\n\r\napplication.properties:\r\n\r\n    spring.profiles.default=production\r\n    spring.application.name=test\r\n    \r\n    spring.datasource.url=jdbc:postgresql://localhost:5432/testdb\r\n    spring.datasource.username=test\r\n    spring.datasource.password=test123\r\n    spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect\r\n    \r\n    spring.jpa.hibernate.ddl-auto=none\r\n    \r\n    liquibase.change-log=classpath:/liquibase/changelog.xml\r\n\r\ndependencies:\r\n\r\n    &lt;properties&gt;\r\n        &lt;spring.boot.version&gt;1.5.9.RELEASE&lt;/spring.boot.version&gt;\r\n\r\n        &lt;liquibase.version&gt;3.5.3&lt;/liquibase.version&gt;\r\n        &lt;postgresql.version&gt;9.4-1201-jdbc41&lt;/postgresql.version&gt;\r\n        &lt;hsqldb.version&gt;2.4.0&lt;/hsqldb.version&gt;\r\n\r\n        &lt;powermock.version&gt;1.7.3&lt;/powermock.version&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n            &lt;version&gt;${spring.boot.version}&lt;/version&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;tomcat-embed-el&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;tomcat-annotations-api&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n            &lt;version&gt;${spring.boot.version}&lt;/version&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;tomcat-juli&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n            &lt;version&gt;${spring.boot.version}&lt;/version&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;org.codehaus.groovy&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;groovy&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;nz.net.ultraq.thymeleaf&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;thymeleaf-layout-dialect&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-autoconfigure&lt;/artifactId&gt;\r\n            &lt;version&gt;${spring.boot.version}&lt;/version&gt;\r\n            &lt;scope&gt;compile&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n            &lt;version&gt;${spring.boot.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;version&gt;${spring.boot.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-test&lt;/artifactId&gt;\r\n            &lt;version&gt;4.3.14.RELEASE&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n            &lt;version&gt;${postgresql.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.liquibase&lt;/groupId&gt;\r\n            &lt;artifactId&gt;liquibase-core&lt;/artifactId&gt;\r\n            &lt;version&gt;${liquibase.version}&lt;/version&gt;\r\n            &lt;scope&gt;compile&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hsqldb&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hsqldb&lt;/artifactId&gt;\r\n            &lt;version&gt;${hsqldb.version}&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.powermock&lt;/groupId&gt;\r\n            &lt;artifactId&gt;powermock-module-junit4&lt;/artifactId&gt;\r\n            &lt;version&gt;${powermock.version}&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.powermock&lt;/groupId&gt;\r\n            &lt;artifactId&gt;powermock-api-mockito&lt;/artifactId&gt;\r\n            &lt;version&gt;${powermock.version}&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hamcrest&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hamcrest-library&lt;/artifactId&gt;\r\n            &lt;version&gt;${hamcrest.version}&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hamcrest&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hamcrest-core&lt;/artifactId&gt;\r\n            &lt;version&gt;${hamcrest.version}&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.code.simple-spring-memcached&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-cache&lt;/artifactId&gt;\r\n            &lt;version&gt;3.6.1&lt;/version&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;org.hamcrest&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;hamcrest-core&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;commons-collections&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;commons-collections&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;junit&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n        \r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.codehaus.janino&lt;/groupId&gt;\r\n            &lt;artifactId&gt;janino&lt;/artifactId&gt;\r\n            &lt;version&gt;3.0.8&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\r\n            &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\r\n            &lt;version&gt;1.2.3&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\r\n            &lt;artifactId&gt;logback-core&lt;/artifactId&gt;\r\n            &lt;version&gt;1.2.3&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;dependencyManagement&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring.boot.version}&lt;/version&gt;\r\n                &lt;type&gt;pom&lt;/type&gt;\r\n                &lt;scope&gt;import&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    &lt;/dependencyManagement&gt;\r\n\r\n**UPD 2**\r\n\r\nApplication.java:\r\n\r\n    @SpringBootApplication\r\n    @EnableJpaRepositories(basePackages = &quot;com.test&quot;)\r\n    @EnableCaching\r\n    @EnableScheduling\r\n    public class Application extends SpringBootServletInitializer {\r\n    \r\n        public Application() {\r\n        }\r\n    \r\n        public static void main(final String[] args) {\r\n            SpringApplication.run(Application.class, args);\r\n        }\r\n    }","title":"Properly terminate Spring Boot and Tomcat if initialization of AppContext fails","body":"<p>When I start Spring Boot application on embedded Tomcat and something fails during startup (for instance there is no connection to DB or Liquibase update fails or circular dependency found, etc), Tomcat continues listening on 8080 port.</p>\n\n<p>If I send HTTP request to some endpoint, an application returns 404 NOT FOUND.</p>\n\n<ol>\n<li>Is this expected behavior (should Tomcat continue listening)?</li>\n<li>How to stop Spring Boot and Tomcat when initialization of the application context fails?</li>\n</ol>\n\n<p>Here EXAMPLE of the log:</p>\n\n<pre><code>org.springframework.context.ApplicationContextException: Unable to start embedded container; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'tomcatEmbeddedServletContainerFactory' defined in class path resource [org/springframework/boot/autoconfigure/web/EmbeddedServletContainerAutoConfiguration$EmbeddedTomcat.class]: Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'serverProperties' defined in class path resource [org/springframework/boot/autoconfigure/web/ServerPropertiesAutoConfiguration.class]: Initialization of bean failed; nested exception is javax.validation.ValidationException: Unable to instantiate Configuration.\n    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.onRefresh(EmbeddedWebApplicationContext.java:137)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:536)\n    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:122)\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:693)\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:360)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:303)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1118)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1107)\n    at com.test.Application.main(Application.java:33)\n</code></pre>\n\n<p>After this exception Tomcat still available on the specified port.</p>\n\n<p><strong>UPD</strong></p>\n\n<p>application.properties:</p>\n\n<pre><code>spring.profiles.default=production\nspring.application.name=test\n\nspring.datasource.url=jdbc:postgresql://localhost:5432/testdb\nspring.datasource.username=test\nspring.datasource.password=test123\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect\n\nspring.jpa.hibernate.ddl-auto=none\n\nliquibase.change-log=classpath:/liquibase/changelog.xml\n</code></pre>\n\n<p>dependencies:</p>\n\n<pre><code>&lt;properties&gt;\n    &lt;spring.boot.version&gt;1.5.9.RELEASE&lt;/spring.boot.version&gt;\n\n    &lt;liquibase.version&gt;3.5.3&lt;/liquibase.version&gt;\n    &lt;postgresql.version&gt;9.4-1201-jdbc41&lt;/postgresql.version&gt;\n    &lt;hsqldb.version&gt;2.4.0&lt;/hsqldb.version&gt;\n\n    &lt;powermock.version&gt;1.7.3&lt;/powermock.version&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;version&gt;${spring.boot.version}&lt;/version&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\n                &lt;artifactId&gt;tomcat-embed-el&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\n                &lt;artifactId&gt;tomcat-annotations-api&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;version&gt;${spring.boot.version}&lt;/version&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\n                &lt;artifactId&gt;tomcat-juli&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n        &lt;version&gt;${spring.boot.version}&lt;/version&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.codehaus.groovy&lt;/groupId&gt;\n                &lt;artifactId&gt;groovy&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;nz.net.ultraq.thymeleaf&lt;/groupId&gt;\n                &lt;artifactId&gt;thymeleaf-layout-dialect&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-autoconfigure&lt;/artifactId&gt;\n        &lt;version&gt;${spring.boot.version}&lt;/version&gt;\n        &lt;scope&gt;compile&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n        &lt;version&gt;${spring.boot.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;version&gt;${spring.boot.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-test&lt;/artifactId&gt;\n        &lt;version&gt;4.3.14.RELEASE&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n        &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n        &lt;version&gt;${postgresql.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.liquibase&lt;/groupId&gt;\n        &lt;artifactId&gt;liquibase-core&lt;/artifactId&gt;\n        &lt;version&gt;${liquibase.version}&lt;/version&gt;\n        &lt;scope&gt;compile&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hsqldb&lt;/groupId&gt;\n        &lt;artifactId&gt;hsqldb&lt;/artifactId&gt;\n        &lt;version&gt;${hsqldb.version}&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.powermock&lt;/groupId&gt;\n        &lt;artifactId&gt;powermock-module-junit4&lt;/artifactId&gt;\n        &lt;version&gt;${powermock.version}&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.powermock&lt;/groupId&gt;\n        &lt;artifactId&gt;powermock-api-mockito&lt;/artifactId&gt;\n        &lt;version&gt;${powermock.version}&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hamcrest&lt;/groupId&gt;\n        &lt;artifactId&gt;hamcrest-library&lt;/artifactId&gt;\n        &lt;version&gt;${hamcrest.version}&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hamcrest&lt;/groupId&gt;\n        &lt;artifactId&gt;hamcrest-core&lt;/artifactId&gt;\n        &lt;version&gt;${hamcrest.version}&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.google.code.simple-spring-memcached&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-cache&lt;/artifactId&gt;\n        &lt;version&gt;3.6.1&lt;/version&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.hamcrest&lt;/groupId&gt;\n                &lt;artifactId&gt;hamcrest-core&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;commons-collections&lt;/groupId&gt;\n                &lt;artifactId&gt;commons-collections&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;junit&lt;/groupId&gt;\n                &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.codehaus.janino&lt;/groupId&gt;\n        &lt;artifactId&gt;janino&lt;/artifactId&gt;\n        &lt;version&gt;3.0.8&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\n        &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\n        &lt;version&gt;1.2.3&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\n        &lt;artifactId&gt;logback-core&lt;/artifactId&gt;\n        &lt;version&gt;1.2.3&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n\n&lt;dependencyManagement&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;\n            &lt;version&gt;${spring.boot.version}&lt;/version&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n            &lt;scope&gt;import&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/dependencyManagement&gt;\n</code></pre>\n\n<p><strong>UPD 2</strong></p>\n\n<p>Application.java:</p>\n\n<pre><code>@SpringBootApplication\n@EnableJpaRepositories(basePackages = \"com.test\")\n@EnableCaching\n@EnableScheduling\npublic class Application extends SpringBootServletInitializer {\n\n    public Application() {\n    }\n\n    public static void main(final String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n}\n</code></pre>\n"},{"tags":["java","android","kotlin","huawei-mobile-services","huawei-developers"],"answers":[{"tags":[],"owner":{"account_id":1174345,"reputation":33174,"user_id":1150712,"accept_rate":72,"display_name":"zhangxaochen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1629880647,"creation_date":1629880647,"answer_id":68919541,"question_id":68919411,"body_markdown":"In demo there is condition for file that file should be externally add to application from internal storage.\r\n\r\nLike following:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/X62c1.jpg\r\n  [2]: https://i.stack.imgur.com/ZLYT4.jpg","title":"AV Pipeline Kit Demo not working, what&#39;s the problem?","body":"<p>In demo there is condition for file that file should be externally add to application from internal storage.</p>\n<p>Like following:</p>\n<p><a href=\"https://i.stack.imgur.com/X62c1.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/X62c1.jpg\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/ZLYT4.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZLYT4.jpg\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":22548344,"reputation":13,"user_id":16737854,"display_name":"kyouuu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8798,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1693364600,"creation_date":1629880121,"question_id":68919411,"body_markdown":"I downloaded the AV Pipeline Kit from [here](https://github.com/HMS-Core/hms-av-pipeline-demo), but it is not working. And don&#39;t give any error but the toast message say that need external storage document for working is it require for working with that kit. When I close the control code block this kit not working again please help me. \r\n\r\nI added the screen about my problem, any help would be appreciated.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/lHqgT.jpg","title":"AV Pipeline Kit Demo not working, what&#39;s the problem?","body":"<p>I downloaded the AV Pipeline Kit from <a href=\"https://github.com/HMS-Core/hms-av-pipeline-demo\" rel=\"nofollow noreferrer\">here</a>, but it is not working. And don't give any error but the toast message say that need external storage document for working is it require for working with that kit. When I close the control code block this kit not working again please help me.</p>\n<p>I added the screen about my problem, any help would be appreciated.</p>\n<p><a href=\"https://i.stack.imgur.com/lHqgT.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lHqgT.jpg\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring","spring-boot","exception","spring-security"],"comments":[{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1693326230,"post_id":77001460,"comment_id":135744699,"body_markdown":"Why do you have a custom filter that verifies the JWT when that functionality already is built into the framework?","body":"Why do you have a custom filter that verifies the JWT when that functionality already is built into the framework?"},{"owner":{"account_id":4703670,"reputation":141,"user_id":3806532,"display_name":"Tavo Sanchez"},"score":1,"creation_date":1693327584,"post_id":77001460,"comment_id":135744965,"body_markdown":"Verify what is the `AuthenticationException` you are using in the CustomGlobalExceptionHandler. I&#39;m guessing you have the one from spiring `org.springframework.security.core.AuthenticationException` and not the one from the logs `org.vitaliistf.twowheels4u.exception.AuthenticationException`","body":"Verify what is the <code>AuthenticationException</code> you are using in the CustomGlobalExceptionHandler. I&#39;m guessing you have the one from spiring <code>org.springframework.security.core.AuthenticationException</code> and not the one from the logs <code>org.vitaliistf.twowheels4u.exception.AuthenticationException</code>"}],"answers":[{"tags":[],"owner":{"account_id":2258060,"reputation":3689,"user_id":1988798,"accept_rate":83,"display_name":"Gaurav"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693330235,"creation_date":1693330235,"answer_id":77002449,"question_id":77001460,"body_markdown":"Your `AuthenticationException.class` handler comes into play once Spring Security is done authenticating and authorising the request - i.e. when control is in hands of MVC HandlerMapping.\r\n\r\nYou have to provide an implementation of `AuthenticationFailureHandler` to be handle `AuthenticationException` to Spring Security Config to handle it.","title":"Why AuthenticationException is not caught by my custom exception handler?","body":"<p>Your <code>AuthenticationException.class</code> handler comes into play once Spring Security is done authenticating and authorising the request - i.e. when control is in hands of MVC HandlerMapping.</p>\n<p>You have to provide an implementation of <code>AuthenticationFailureHandler</code> to be handle <code>AuthenticationException</code> to Spring Security Config to handle it.</p>\n"}],"owner":{"account_id":29108719,"reputation":1,"user_id":22300249,"display_name":"vitalii"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693364517,"creation_date":1693321979,"question_id":77001460,"body_markdown":"Handler and method for catching exception are looking like this:\r\n\r\n```java\r\n@ControllerAdvice\r\npublic class CustomGlobalExceptionHandler extends ResponseEntityExceptionHandler {\r\n\r\n    @ExceptionHandler(AuthenticationException.class)\r\n    public ResponseEntity&lt;ErrorResponse&gt; authenticationException(AuthenticationException ex) {\r\n        ErrorResponse errorResponse = new ErrorResponse(\r\n                HttpStatus.UNAUTHORIZED.value(),\r\n                List.of(ex.getMessage()),\r\n                LocalDateTime.now()\r\n        );\r\n        return new ResponseEntity&lt;&gt;(errorResponse, HttpStatus.UNAUTHORIZED);\r\n    }\r\n}\r\n```\r\n\r\nAnd exception: \r\n\r\n```none\r\norg.vitaliistf.twowheels4u.exception.AuthenticationException: JWT expired or invalid \r\n\tat org.vitaliistf.twowheels4u.security.jwt.JwtTokenService.validateToken(JwtTokenService.java:94) ~[classes/:na]\r\n\t...\r\nCaused by: io.jsonwebtoken.MalformedJwtException: Unable to read JSON value: z�alg&quot;:&quot;HS256&quot;}\r\n\tat io.jsonwebtoken.impl.DefaultJwtParser.readValue(DefaultJwtParser.java:554) ~[jjwt-0.9.1.jar:0.9.1]\r\n\t...\r\nCaused by: com.fasterxml.jackson.core.JsonParseException: Unrecognized token &#39;z&#39;: was expecting (JSON String, Number, Array, Object or token &#39;null&#39;, &#39;true&#39; or &#39;false&#39;)\r\n at [Source: (String)&quot;z�alg&quot;:&quot;HS256&quot;}&quot;; line: 1, column: 2]\r\n\tat com.fasterxml.jackson.core.JsonParser._constructError(JsonParser.java:2477) ~[jackson-core-2.15.2.jar:2.15.2]\r\n\tat com.fasterxml.jackson.core.base.ParserMinimalBase._reportError(ParserMinimalBase.java:760) ~[jackson-core-2.15.2.jar:2.15.2]\r\n\t...\r\n```\r\n\r\nI even tried to change method just to catch `Exception.class`, but it doesn&#39;t work. I expect to receive error response(json) from this method on the client, but getting html error page along with status 500.","title":"Why AuthenticationException is not caught by my custom exception handler?","body":"<p>Handler and method for catching exception are looking like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ControllerAdvice\npublic class CustomGlobalExceptionHandler extends ResponseEntityExceptionHandler {\n\n    @ExceptionHandler(AuthenticationException.class)\n    public ResponseEntity&lt;ErrorResponse&gt; authenticationException(AuthenticationException ex) {\n        ErrorResponse errorResponse = new ErrorResponse(\n                HttpStatus.UNAUTHORIZED.value(),\n                List.of(ex.getMessage()),\n                LocalDateTime.now()\n        );\n        return new ResponseEntity&lt;&gt;(errorResponse, HttpStatus.UNAUTHORIZED);\n    }\n}\n</code></pre>\n<p>And exception:</p>\n<pre class=\"lang-none prettyprint-override\"><code>org.vitaliistf.twowheels4u.exception.AuthenticationException: JWT expired or invalid \n    at org.vitaliistf.twowheels4u.security.jwt.JwtTokenService.validateToken(JwtTokenService.java:94) ~[classes/:na]\n    ...\nCaused by: io.jsonwebtoken.MalformedJwtException: Unable to read JSON value: z�alg&quot;:&quot;HS256&quot;}\n    at io.jsonwebtoken.impl.DefaultJwtParser.readValue(DefaultJwtParser.java:554) ~[jjwt-0.9.1.jar:0.9.1]\n    ...\nCaused by: com.fasterxml.jackson.core.JsonParseException: Unrecognized token 'z': was expecting (JSON String, Number, Array, Object or token 'null', 'true' or 'false')\n at [Source: (String)&quot;z�alg&quot;:&quot;HS256&quot;}&quot;; line: 1, column: 2]\n    at com.fasterxml.jackson.core.JsonParser._constructError(JsonParser.java:2477) ~[jackson-core-2.15.2.jar:2.15.2]\n    at com.fasterxml.jackson.core.base.ParserMinimalBase._reportError(ParserMinimalBase.java:760) ~[jackson-core-2.15.2.jar:2.15.2]\n    ...\n</code></pre>\n<p>I even tried to change method just to catch <code>Exception.class</code>, but it doesn't work. I expect to receive error response(json) from this method on the client, but getting html error page along with status 500.</p>\n"},{"tags":["java","string"],"comments":[{"owner":{"account_id":4362282,"reputation":92954,"user_id":3558960,"accept_rate":60,"display_name":"Robby Cornelissen"},"score":1,"creation_date":1693282961,"post_id":76997251,"comment_id":135736583,"body_markdown":"Why not just use a `NumberFormat` or `DecimalFormat` instance to `parse()` as well?","body":"Why not just use a <code>NumberFormat</code> or <code>DecimalFormat</code> instance to <code>parse()</code> as well?"}],"answers":[{"tags":[],"owner":{"account_id":16129841,"reputation":1,"user_id":11643823,"display_name":"edcoder123"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693282615,"creation_date":1693282601,"answer_id":76997271,"question_id":76997251,"body_markdown":"I think the best option is to first sanitize your input string to remove all of the commas. This can be done so with \r\n\r\n`String sanitizedString = num1.replaceAll(&quot;,&quot;, &quot;&quot;);`\r\n\r\nThe alternative would to be only run your addition logic if \r\n\r\n`num1.charAt(i).equals(&quot;,&quot;) == false`","title":"Adding two large numbers represented by string having comma","body":"<p>I think the best option is to first sanitize your input string to remove all of the commas. This can be done so with</p>\n<p><code>String sanitizedString = num1.replaceAll(&quot;,&quot;, &quot;&quot;);</code></p>\n<p>The alternative would to be only run your addition logic if</p>\n<p><code>num1.charAt(i).equals(&quot;,&quot;) == false</code></p>\n"},{"tags":[],"owner":{"account_id":2311315,"reputation":189,"user_id":2029389,"display_name":"Alex"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693285864,"creation_date":1693285864,"answer_id":76997457,"question_id":76997251,"body_markdown":"i&#39;m not sure if you are using the comma symbol as a decimal or hundred separator, but here&#39;s a possible solution as you seems to be using java.\r\n\r\n    \tpublic String addStrings(String num1, String num2) throws ParseException\r\n\t\t{\r\n\t\t\tDecimalFormat df = new DecimalFormat(&quot;#,##0.#&quot;);\r\n\t\t\tBigDecimal a = new BigDecimal(df.parse(num1).toString());\r\n\t\t\tBigDecimal b = new BigDecimal(df.parse(num2).toString());\r\n\t\t\treturn df.format(a.add(b));\r\n\t\t}\r\n\r\nthat should work for your test case, if you&#39;re indeed using the comma as hundred separator.\r\nelse adapt the parser to match your specific number format.","title":"Adding two large numbers represented by string having comma","body":"<p>i'm not sure if you are using the comma symbol as a decimal or hundred separator, but here's a possible solution as you seems to be using java.</p>\n<pre><code>    public String addStrings(String num1, String num2) throws ParseException\n    {\n        DecimalFormat df = new DecimalFormat(&quot;#,##0.#&quot;);\n        BigDecimal a = new BigDecimal(df.parse(num1).toString());\n        BigDecimal b = new BigDecimal(df.parse(num2).toString());\n        return df.format(a.add(b));\n    }\n</code></pre>\n<p>that should work for your test case, if you're indeed using the comma as hundred separator.\nelse adapt the parser to match your specific number format.</p>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693363162,"creation_date":1693292130,"answer_id":76997971,"question_id":76997251,"body_markdown":"&gt; _&#39;... I want to add two large numbers represented by string. `e.g. string1 = &quot;25,000&quot; string 2 = &quot;25,250&quot;_\r\n&gt;\r\n&gt; _Output = &quot;50,250&quot;` ..._\r\n&gt; \r\n&gt; _Another way i can think of is removing comma from input strings ...&#39;_\r\n\r\nUse the _[String#replace](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#replace(java.lang.CharSequence,java.lang.CharSequence))_ method and _[BigDecimal](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/math/BigDecimal.html)_ class.\r\n\r\n```java\r\npublic String addStrings(String num1, String num2) {\r\n    num1 = num1.replace(&quot;,&quot;, &quot;&quot;);\r\n    num2 = num2.replace(&quot;,&quot;, &quot;&quot;);\r\n    return new BigDecimal(num1).add(new BigDecimal(num2))\r\n                               .toPlainString();\r\n}\r\n```\r\n\r\nHere is an example using _[streams](https://docs.oracle.com/javase/tutorial/collections/streams/index.html)_ and a _[varargs](https://docs.oracle.com/javase/8/docs/technotes/guides/language/varargs.html)_ parameter.  \r\n\r\n```java\r\nString addStrings(String... strings) {\r\n    return Stream.of(strings)\r\n                 .map(x -&gt; new BigDecimal(x.replace(&quot;,&quot;, &quot;&quot;)))\r\n                 .reduce(BigDecimal::add)\r\n                 .get()\r\n                 .toPlainString();\r\n}\r\n```\r\n\r\n```java\r\nSystem.out.println(addStrings(&quot;25,000&quot;, &quot;25,250&quot;));\r\nSystem.out.println(addStrings(&quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot;));\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n50250\r\n45\r\n```\r\n\r\nYou could even utilize the _[BinaryOperator](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/function/BinaryOperator.html)_ class as an initial parameter.\r\n\r\n```java\r\nString eval(BinaryOperator&lt;BigDecimal&gt; op, String... strings) {\r\n    return Stream.of(strings)\r\n                 .map(x -&gt; new BigDecimal(x.replace(&quot;,&quot;, &quot;&quot;)))\r\n                 .reduce(op)\r\n                 .get().toPlainString();\r\n}\r\n```\r\n\r\n```java\r\nString[] strings = {\r\n    eval(BigDecimal::add, &quot;25,000&quot;, &quot;25,250&quot;),\r\n    eval(BigDecimal::subtract, &quot;25,000&quot;, &quot;25,250&quot;),\r\n    eval(BigDecimal::multiply, &quot;25,000&quot;, &quot;25,250&quot;),\r\n    eval((x, y) -&gt; x.divide(y, RoundingMode.HALF_UP), &quot;25,000&quot;, &quot;25,250&quot;)\r\n};\r\nSystem.out.printf(&quot;%s%n&quot;.repeat(4).formatted(strings));\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n50250\r\n-250\r\n631250000\r\n1\r\n```","title":"Adding two large numbers represented by string having comma","body":"<blockquote>\n<p><em>'... I want to add two large numbers represented by string. `e.g. string1 = &quot;25,000&quot; string 2 = &quot;25,250&quot;</em></p>\n<p><em>Output = &quot;50,250&quot;` ...</em></p>\n<p><em>Another way i can think of is removing comma from input strings ...'</em></p>\n</blockquote>\n<p>Use the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#replace(java.lang.CharSequence,java.lang.CharSequence)\" rel=\"nofollow noreferrer\">String#replace</a></em> method and <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/math/BigDecimal.html\" rel=\"nofollow noreferrer\">BigDecimal</a></em> class.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public String addStrings(String num1, String num2) {\n    num1 = num1.replace(&quot;,&quot;, &quot;&quot;);\n    num2 = num2.replace(&quot;,&quot;, &quot;&quot;);\n    return new BigDecimal(num1).add(new BigDecimal(num2))\n                               .toPlainString();\n}\n</code></pre>\n<p>Here is an example using <em><a href=\"https://docs.oracle.com/javase/tutorial/collections/streams/index.html\" rel=\"nofollow noreferrer\">streams</a></em> and a <em><a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/language/varargs.html\" rel=\"nofollow noreferrer\">varargs</a></em> parameter.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String addStrings(String... strings) {\n    return Stream.of(strings)\n                 .map(x -&gt; new BigDecimal(x.replace(&quot;,&quot;, &quot;&quot;)))\n                 .reduce(BigDecimal::add)\n                 .get()\n                 .toPlainString();\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println(addStrings(&quot;25,000&quot;, &quot;25,250&quot;));\nSystem.out.println(addStrings(&quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot;));\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>50250\n45\n</code></pre>\n<p>You could even utilize the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/function/BinaryOperator.html\" rel=\"nofollow noreferrer\">BinaryOperator</a></em> class as an initial parameter.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String eval(BinaryOperator&lt;BigDecimal&gt; op, String... strings) {\n    return Stream.of(strings)\n                 .map(x -&gt; new BigDecimal(x.replace(&quot;,&quot;, &quot;&quot;)))\n                 .reduce(op)\n                 .get().toPlainString();\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>String[] strings = {\n    eval(BigDecimal::add, &quot;25,000&quot;, &quot;25,250&quot;),\n    eval(BigDecimal::subtract, &quot;25,000&quot;, &quot;25,250&quot;),\n    eval(BigDecimal::multiply, &quot;25,000&quot;, &quot;25,250&quot;),\n    eval((x, y) -&gt; x.divide(y, RoundingMode.HALF_UP), &quot;25,000&quot;, &quot;25,250&quot;)\n};\nSystem.out.printf(&quot;%s%n&quot;.repeat(4).formatted(strings));\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>50250\n-250\n631250000\n1\n</code></pre>\n"}],"owner":{"account_id":27898215,"reputation":11,"user_id":21303035,"display_name":"Rohit Garg"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":187,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1693363162,"creation_date":1693282099,"question_id":76997251,"body_markdown":"I want to add two large numbers represented by string.\r\n`e.g. string1 = &quot;25,000&quot;\r\n      string 2 = &quot;25,250&quot;\r\n\r\nOutput = &quot;50,250&quot;`\r\n\r\nI am able to solve to add two large numbers but how to play with comma can some one share some hint.\r\n\r\n```\r\nclass Solution {\r\n    public String addStrings(String num1, String num2) \r\n    {\r\n        StringBuilder sb = new StringBuilder();\r\n        int i = num1.length() - 1, j = num2.length() - 1, carry = 0;\r\n        while (i &gt;= 0 || j &gt;= 0 || carry != 0) \r\n        {\r\n            int sum = carry;\r\n            if (i &gt;= 0) \r\n            sum += num1.charAt(i--) - &#39;0&#39;;\r\n            \r\n            if (j &gt;= 0) \r\n            sum += num2.charAt(j--) - &#39;0&#39;;\r\n            \r\n            sb.append(sum % 10);\r\n            carry = sum / 10;\r\n        }\r\n        return sb.reverse().toString();\r\n    }\r\n}\r\n```\r\n\r\nAnother way i can think of is removing comma from input strings then adding them and finally formatting output using below code\r\n\r\n```\r\nString number = &quot;1000500000.574&quot;;\r\ndouble amount = Double.parseDouble(number);\r\nDecimalFormat formatter = new DecimalFormat(&quot;#,###.00&quot;);\r\nSystem.out.println(formatter.format(amount));\r\n```\r\n\r\n","title":"Adding two large numbers represented by string having comma","body":"<p>I want to add two large numbers represented by string.\n`e.g. string1 = &quot;25,000&quot;\nstring 2 = &quot;25,250&quot;</p>\n<p>Output = &quot;50,250&quot;`</p>\n<p>I am able to solve to add two large numbers but how to play with comma can some one share some hint.</p>\n<pre><code>class Solution {\n    public String addStrings(String num1, String num2) \n    {\n        StringBuilder sb = new StringBuilder();\n        int i = num1.length() - 1, j = num2.length() - 1, carry = 0;\n        while (i &gt;= 0 || j &gt;= 0 || carry != 0) \n        {\n            int sum = carry;\n            if (i &gt;= 0) \n            sum += num1.charAt(i--) - '0';\n            \n            if (j &gt;= 0) \n            sum += num2.charAt(j--) - '0';\n            \n            sb.append(sum % 10);\n            carry = sum / 10;\n        }\n        return sb.reverse().toString();\n    }\n}\n</code></pre>\n<p>Another way i can think of is removing comma from input strings then adding them and finally formatting output using below code</p>\n<pre><code>String number = &quot;1000500000.574&quot;;\ndouble amount = Double.parseDouble(number);\nDecimalFormat formatter = new DecimalFormat(&quot;#,###.00&quot;);\nSystem.out.println(formatter.format(amount));\n</code></pre>\n"},{"tags":["java","null","nullpointerexception","overloading","api-design"],"answers":[{"tags":[],"owner":{"account_id":102991,"reputation":378282,"user_id":276101,"accept_rate":67,"display_name":"polygenelubricants"},"down_vote_count":0,"up_vote_count":216,"is_accepted":true,"score":216,"last_activity_date":1337297779,"creation_date":1277724082,"answer_id":3131884,"question_id":3131865,"body_markdown":"The issue is that `String.valueOf` method is _overloaded_:\r\n\r\n   * [`String.valueOf(Object)`](http://java.sun.com/javase/6/docs/api/java/lang/String.html#valueOf%28java.lang.Object%29)\r\n   * [`String.valueOf(char[])`](http://java.sun.com/javase/6/docs/api/java/lang/String.html#valueOf%28char%5B%5D%29)\r\n\r\nJava Specification Language mandates that in these kind of cases, _the most specific overload_ is chosen:\r\n\r\n### [JLS 15.12.2.5  Choosing the Most Specific Method][1]\r\n&gt; If more than one member method is both accessible and applicable to a method invocation, it is necessary to choose one to provide the descriptor for the run-time method dispatch. The Java programming language uses the rule that the _most specific_ method is chosen.\r\n\r\nA `char[]` _is-an_ `Object`, but not all `Object` _is-a_ `char[]`. Therefore, `char[]` is _more specific_ than `Object`, and as specified by the Java language, the `String.valueOf(char[])` overload is chosen in this case.\r\n\r\n`String.valueOf(char[])` expects the array to be non-`null`, and since `null` is given in this case, it then throws `NullPointerException`.\r\n\r\nThe easy &quot;fix&quot; is to cast the `null` explicitly to `Object` as follows:\r\n\r\n    System.out.println(String.valueOf((Object) null));\r\n    // prints &quot;null&quot;\r\n\r\n### Related questions\r\n\r\n* [How does polymorph ambiguity distinction work?](https://stackoverflow.com/questions/2659496/how-does-polymorph-ambiguity-distinction-work/)\r\n* [Which overload will get selected for null in Java?](https://stackoverflow.com/questions/1545501/which-overload-will-get-selected-for-null-in-java)\r\n\r\n---\r\n\r\n### Moral of the story\r\n\r\nThere are several important ones:\r\n\r\n* _Effective Java 2nd Edition, Item 41: Use overloading judiciously_\r\n   * Just because you can overload, doesn&#39;t mean you should every time\r\n   * They can cause confusion (especially if the methods do wildly different things)\r\n* Using good IDE, you can check which overload is selected at compile time\r\n   * With Eclipse, you can mouse-hover on the above expression and see that _indeed_, the `valueOf(char[])` overload is selected!\r\n* Sometimes you want to explicitly cast `null` (examples to follow)\r\n\r\n### See also\r\n\r\n* [Polymorphism vs Overriding vs Overloading](https://stackoverflow.com/questions/154577/polymorphism-vs-overriding-vs-overloading)\r\n* [Method Overloading. Can you overuse it?](https://stackoverflow.com/questions/248222/method-overloading-can-you-overuse-it)\r\n\r\n---\r\n\r\n### On casting `null`\r\n\r\nThere are at least two situations where explicitly casting `null` to a specific reference type is necessary:\r\n\r\n* To select overloading (as given in above example)\r\n* To give `null` as a single argument to a vararg parameter\r\n\r\nA simple example of the latter is the following:\r\n\r\n\tstatic void vararg(Object... os) {\r\n\t\tSystem.out.println(os.length);\r\n\t}\r\n\r\nThen, we can have the following:\r\n\r\n\tvararg(null, null, null); // prints &quot;3&quot;\r\n\tvararg(null, null);       // prints &quot;2&quot;\r\n\tvararg(null);             // throws NullPointerException!\r\n\r\n\tvararg((Object) null);    // prints &quot;1&quot;\r\n\r\n### See also\r\n\r\n* [Java Language Guide/varargs](http://java.sun.com/j2se/1.5.0/docs/guide/language/varargs.html) - to understand how it&#39;s implemented\r\n\r\n### Related questions\r\n\r\n* [Why null cast?](https://stackoverflow.com/questions/315846/why-null-cast)\r\n* [Difference between double… and double[] in formal parameter type declaration](https://stackoverflow.com/questions/2888305/difference-between-double-and-double-in-formal-parameter-type-declaration/)\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/specs/jls/se5.0/html/expressions.html#15.12.2.5","title":"Why does String.valueOf(null) throw a NullPointerException?","body":"<p>The issue is that <code>String.valueOf</code> method is <em>overloaded</em>:</p>\n\n<ul>\n<li><a href=\"http://java.sun.com/javase/6/docs/api/java/lang/String.html#valueOf%28java.lang.Object%29\" rel=\"noreferrer\"><code>String.valueOf(Object)</code></a></li>\n<li><a href=\"http://java.sun.com/javase/6/docs/api/java/lang/String.html#valueOf%28char%5B%5D%29\" rel=\"noreferrer\"><code>String.valueOf(char[])</code></a></li>\n</ul>\n\n<p>Java Specification Language mandates that in these kind of cases, <em>the most specific overload</em> is chosen:</p>\n\n<h3><a href=\"http://docs.oracle.com/javase/specs/jls/se5.0/html/expressions.html#15.12.2.5\" rel=\"noreferrer\">JLS 15.12.2.5  Choosing the Most Specific Method</a></h3>\n\n<blockquote>\n  <p>If more than one member method is both accessible and applicable to a method invocation, it is necessary to choose one to provide the descriptor for the run-time method dispatch. The Java programming language uses the rule that the <em>most specific</em> method is chosen.</p>\n</blockquote>\n\n<p>A <code>char[]</code> <em>is-an</em> <code>Object</code>, but not all <code>Object</code> <em>is-a</em> <code>char[]</code>. Therefore, <code>char[]</code> is <em>more specific</em> than <code>Object</code>, and as specified by the Java language, the <code>String.valueOf(char[])</code> overload is chosen in this case.</p>\n\n<p><code>String.valueOf(char[])</code> expects the array to be non-<code>null</code>, and since <code>null</code> is given in this case, it then throws <code>NullPointerException</code>.</p>\n\n<p>The easy \"fix\" is to cast the <code>null</code> explicitly to <code>Object</code> as follows:</p>\n\n<pre><code>System.out.println(String.valueOf((Object) null));\n// prints \"null\"\n</code></pre>\n\n<h3>Related questions</h3>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/2659496/how-does-polymorph-ambiguity-distinction-work/\">How does polymorph ambiguity distinction work?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/1545501/which-overload-will-get-selected-for-null-in-java\">Which overload will get selected for null in Java?</a></li>\n</ul>\n\n<hr>\n\n<h3>Moral of the story</h3>\n\n<p>There are several important ones:</p>\n\n<ul>\n<li><em>Effective Java 2nd Edition, Item 41: Use overloading judiciously</em>\n\n<ul>\n<li>Just because you can overload, doesn't mean you should every time</li>\n<li>They can cause confusion (especially if the methods do wildly different things)</li>\n</ul></li>\n<li>Using good IDE, you can check which overload is selected at compile time\n\n<ul>\n<li>With Eclipse, you can mouse-hover on the above expression and see that <em>indeed</em>, the <code>valueOf(char[])</code> overload is selected!</li>\n</ul></li>\n<li>Sometimes you want to explicitly cast <code>null</code> (examples to follow)</li>\n</ul>\n\n<h3>See also</h3>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/154577/polymorphism-vs-overriding-vs-overloading\">Polymorphism vs Overriding vs Overloading</a></li>\n<li><a href=\"https://stackoverflow.com/questions/248222/method-overloading-can-you-overuse-it\">Method Overloading. Can you overuse it?</a></li>\n</ul>\n\n<hr>\n\n<h3>On casting <code>null</code></h3>\n\n<p>There are at least two situations where explicitly casting <code>null</code> to a specific reference type is necessary:</p>\n\n<ul>\n<li>To select overloading (as given in above example)</li>\n<li>To give <code>null</code> as a single argument to a vararg parameter</li>\n</ul>\n\n<p>A simple example of the latter is the following:</p>\n\n<pre><code>static void vararg(Object... os) {\n    System.out.println(os.length);\n}\n</code></pre>\n\n<p>Then, we can have the following:</p>\n\n<pre><code>vararg(null, null, null); // prints \"3\"\nvararg(null, null);       // prints \"2\"\nvararg(null);             // throws NullPointerException!\n\nvararg((Object) null);    // prints \"1\"\n</code></pre>\n\n<h3>See also</h3>\n\n<ul>\n<li><a href=\"http://java.sun.com/j2se/1.5.0/docs/guide/language/varargs.html\" rel=\"noreferrer\">Java Language Guide/varargs</a> - to understand how it's implemented</li>\n</ul>\n\n<h3>Related questions</h3>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/315846/why-null-cast\">Why null cast?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/2888305/difference-between-double-and-double-in-formal-parameter-type-declaration/\">Difference between double… and double[] in formal parameter type declaration</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1277725973,"creation_date":1277724412,"answer_id":3131916,"question_id":3131865,"body_markdown":"The problem is that you&#39;re calling [`String.valueOf(char[])`][1] and **not** [`String.valueOf(Object)`][2].\r\n\r\nThe reason for this is that Java will always choose the most specific version of an overloaded method that works with the provided parameters. `null` is a valid value for an `Object` parameter, but it&#39;s also a valid value for a `char[]` parameter.\r\n\r\nTo make Java use the `Object` version, either pass in `null` via a variable or specify an explicit cast to Object:\r\n\r\n    Object o = null;\r\n    System.out.println(&quot;String.valueOf(null) = &quot; + String.valueOf(o));\r\n    // or\r\n    System.out.println(&quot;String.valueOf(null) = &quot; + String.valueOf((Object) null));\r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/lang/String.html#valueOf(char[])\r\n  [2]: http://java.sun.com/javase/6/docs/api/java/lang/String.html#valueOf(java.lang.Object)","title":"Why does String.valueOf(null) throw a NullPointerException?","body":"<p>The problem is that you're calling <a href=\"http://java.sun.com/javase/6/docs/api/java/lang/String.html#valueOf(char[])\" rel=\"noreferrer\"><code>String.valueOf(char[])</code></a> and <strong>not</strong> <a href=\"http://java.sun.com/javase/6/docs/api/java/lang/String.html#valueOf(java.lang.Object)\" rel=\"noreferrer\"><code>String.valueOf(Object)</code></a>.</p>\n\n<p>The reason for this is that Java will always choose the most specific version of an overloaded method that works with the provided parameters. <code>null</code> is a valid value for an <code>Object</code> parameter, but it's also a valid value for a <code>char[]</code> parameter.</p>\n\n<p>To make Java use the <code>Object</code> version, either pass in <code>null</code> via a variable or specify an explicit cast to Object:</p>\n\n<pre><code>Object o = null;\nSystem.out.println(\"String.valueOf(null) = \" + String.valueOf(o));\n// or\nSystem.out.println(\"String.valueOf(null) = \" + String.valueOf((Object) null));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":68215,"reputation":12120,"user_id":199166,"accept_rate":91,"display_name":"cbare"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1693363155,"creation_date":1351796175,"answer_id":13183699,"question_id":3131865,"body_markdown":"A bug, numbered [4867608](https://bugs.java.com/bugdatabase/view_bug?bug_id=4867608) was filed for this way back in 2003, which was resolved as &quot;won&#39;t fix&quot; with this explanation.\r\n\r\n&gt; We can&#39;t change this due to compatibility constraints. Note that it is\r\n&gt; the public static String valueOf(char data[]) method which ends up\r\n&gt; being invoked and it does not mention the replacement of &quot;null&quot; for\r\n&gt; null arguments.\r\n&gt; ### @###.### 2003-05-23\r\n\r\n","title":"Why does String.valueOf(null) throw a NullPointerException?","body":"<p>A bug, numbered <a href=\"https://bugs.java.com/bugdatabase/view_bug?bug_id=4867608\" rel=\"nofollow noreferrer\">4867608</a> was filed for this way back in 2003, which was resolved as &quot;won't fix&quot; with this explanation.</p>\n<blockquote>\n<p>We can't change this due to compatibility constraints. Note that it is\nthe public static String valueOf(char data[]) method which ends up\nbeing invoked and it does not mention the replacement of &quot;null&quot; for\nnull arguments.</p>\n<h3>@###.### 2003-05-23</h3>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":1950637,"reputation":167,"user_id":1754807,"display_name":"Profiterole"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1649671997,"creation_date":1593616834,"answer_id":62680066,"question_id":3131865,"body_markdown":"Use `String.valueOf(null: Any)` in Scala, otherwise `String.valueOf(null: Array[Char])` is inferred. Likewise in java you need an explicit cast if you&#39;re not happy with the implicit cast. In IntelliJ, Ctrl+B on your use of valueOf will get you to the version of valueOf you use among the many you can use.","title":"Why does String.valueOf(null) throw a NullPointerException?","body":"<p>Use <code>String.valueOf(null: Any)</code> in Scala, otherwise <code>String.valueOf(null: Array[Char])</code> is inferred. Likewise in java you need an explicit cast if you're not happy with the implicit cast. In IntelliJ, Ctrl+B on your use of valueOf will get you to the version of valueOf you use among the many you can use.</p>\n"}],"owner":{"account_id":106151,"reputation":3135,"user_id":282886,"accept_rate":100,"display_name":"user282886"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":118436,"favorite_count":0,"down_vote_count":1,"up_vote_count":142,"accepted_answer_id":3131884,"answer_count":4,"score":141,"last_activity_date":1693363155,"creation_date":1277723930,"question_id":3131865,"body_markdown":"according to the documentation, the method [`String.valueOf(Object obj)`][1] returns:\r\n\r\n&gt; if the argument is `null`, then a string equal to `&quot;null&quot;`; otherwise, the value of `obj.toString()` is returned.\r\n\r\nBut how come when I try do this:\r\n\r\n\tSystem.out.println(&quot;String.valueOf(null) = &quot; + String.valueOf(null));\r\n\r\nit throws NPE instead? (try it yourself if you don&#39;t believe!)\r\n\r\n&lt;pre&gt;\r\n    Exception in thread &quot;main&quot; java.lang.NullPointerException\r\n\tat java.lang.String.&lt;init&gt;(Unknown Source)\r\n\tat java.lang.String.valueOf(Unknown Source)\r\n&lt;/pre&gt;\r\n\r\nHow come this is happening? Is the documentation lying to me? Is this a major bug in Java?\r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/lang/String.html#valueOf(java.lang.Object)","title":"Why does String.valueOf(null) throw a NullPointerException?","body":"<p>according to the documentation, the method <a href=\"http://java.sun.com/javase/6/docs/api/java/lang/String.html#valueOf(java.lang.Object)\" rel=\"noreferrer\"><code>String.valueOf(Object obj)</code></a> returns:</p>\n\n<blockquote>\n  <p>if the argument is <code>null</code>, then a string equal to <code>\"null\"</code>; otherwise, the value of <code>obj.toString()</code> is returned.</p>\n</blockquote>\n\n<p>But how come when I try do this:</p>\n\n<pre><code>System.out.println(\"String.valueOf(null) = \" + String.valueOf(null));\n</code></pre>\n\n<p>it throws NPE instead? (try it yourself if you don't believe!)</p>\n\n<pre>\n    Exception in thread \"main\" java.lang.NullPointerException\n    at java.lang.String.(Unknown Source)\n    at java.lang.String.valueOf(Unknown Source)\n</pre>\n\n<p>How come this is happening? Is the documentation lying to me? Is this a major bug in Java?</p>\n"},{"tags":["java","android","kotlin","floating-action-button","appcompatactivity"],"owner":{"account_id":103637,"reputation":10150,"user_id":277480,"accept_rate":68,"display_name":"StealthRT"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693362827,"creation_date":1693362827,"question_id":77004643,"body_markdown":"Hey all I am trying to figure out why I am unable to interact with the background even though my app has a transparent background? The code below was modified from the official Google Android demos [here][1].\r\n\r\nHere is the code I am using:\r\n\r\n    class FabTransformationActivity : AppCompatActivity()  {\r\n        private val viewModel: FabTransformationViewModel by viewModels()\r\n        private lateinit var fab: FloatingActionButton\r\n        private  var  mWindowManager:/*@@psggbk@@*/WindowManager? = null\r\n    \r\n        private class ItemHolder(val parent: LinearLayout, listener: View.OnClickListener) {\r\n            val image: ImageView = parent.findViewById(R.id.image)\r\n            val name: TextView = parent.findViewById(R.id.name)\r\n    \r\n            init {\r\n                parent.setOnClickListener(listener)\r\n            }\r\n        }\r\n    \r\n        private val menuOnClick = View.OnClickListener { v -&gt;\r\n            val name = v.getTag(R.id.tag_name) as String\r\n    \r\n            fab.isExpanded = false\r\n        }\r\n    \r\n        override fun onCreate(savedInstanceState: Bundle?) {\r\n            super.onCreate(savedInstanceState)\r\n            var params: WindowManager.LayoutParams\r\n      \r\n            setContentView(R.layout.fab_transformation_activity)\r\n    \r\n            val root: CoordinatorLayout = findViewById(R.id.root)\r\n            val sheet: CircularRevealCardView = findViewById(R.id.sheet)\r\n            val menuHolders: List&lt;ItemHolder&gt; = listOf(\r\n                ItemHolder(findViewById(R.id.menu_1), menuOnClick),\r\n                ItemHolder(findViewById(R.id.menu_2), menuOnClick),\r\n                ItemHolder(findViewById(R.id.menu_3), menuOnClick),\r\n                ItemHolder(findViewById(R.id.menu_4), menuOnClick)\r\n            )\r\n    \r\n            fab = findViewById(R.id.fab)\r\n    \r\n            WindowCompat.setDecorFitsSystemWindows(window, false)\r\n    \r\n            val fabMargin = 16\r\n    \r\n            ViewCompat.setOnApplyWindowInsetsListener(root) { _, insets -&gt;\r\n                val systemBars = insets.getInsets(WindowInsetsCompat.Type.systemBars())\r\n    \r\n                fab.updateLayoutParams&lt;CoordinatorLayout.LayoutParams&gt; {\r\n                    leftMargin = fabMargin + systemBars.left\r\n                    rightMargin = fabMargin + systemBars.right\r\n                    bottomMargin = fabMargin + systemBars.bottom\r\n                }\r\n    \r\n                sheet.updateLayoutParams&lt;CoordinatorLayout.LayoutParams&gt; {\r\n                    leftMargin = fabMargin + systemBars.left\r\n                    rightMargin = fabMargin + systemBars.right\r\n                    bottomMargin = fabMargin + systemBars.bottom\r\n                }\r\n    \r\n                insets\r\n            }\r\n        \r\n            viewModel.items.observe(this) { items -&gt;\r\n                menuHolders.forEachIndexed { i, holder -&gt;\r\n                    if (items.size &gt; i) {\r\n                        val _item = items[i]\r\n    \r\n                        holder.parent.isVisible = true\r\n                        holder.parent.setTag(R.id.tag_name, _item.name)\r\n                        holder.name.text = _item.name\r\n    \r\n                        Glide.with(holder.image)\r\n                            .load(_item.image)\r\n                            .transform(CircleCrop())\r\n                            .into(holder.image)\r\n                    } else {\r\n                        holder.parent.isVisible = false\r\n                    }\r\n                }\r\n            }\r\n    \r\n            fab.setOnClickListener {\r\n                fab.isExpanded = true\r\n            }\r\n        }\r\n    \r\n        override fun onBackPressed() {\r\n            if (fab.isExpanded) {\r\n                fab.isExpanded = false\r\n            } else {\r\n                super.onBackPressed()\r\n            }\r\n        }\r\n    }\r\n\r\nThe layout:\r\n\r\n    &lt;androidx.coordinatorlayout.widget.CoordinatorLayout\r\n        xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:id=&quot;@+id/root&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:orientation=&quot;horizontal&quot;&gt;\r\n    \r\n        &lt;!-- A FAB that expands into a sheet. --&gt;\r\n        &lt;com.google.android.material.floatingactionbutton.FloatingActionButton\r\n            android:id=&quot;@+id/fab&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_gravity=&quot;end|bottom&quot;\r\n            android:layout_margin=&quot;16dp&quot;\r\n            app:elevation=&quot;8dp&quot;\r\n            android:contentDescription=&quot;&quot;\r\n            app:srcCompat=&quot;@drawable/ic_add&quot; /&gt;\r\n    \r\n        &lt;!--\r\n            A sheet that the FAB expands into.\r\n            Use CircularRevealCardView to apply circular reveal effect.\r\n        --&gt;\r\n        &lt;com.google.android.material.circularreveal.cardview.CircularRevealCardView\r\n            android:id=&quot;@+id/sheet&quot;\r\n            android:layout_width=&quot;256dp&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_gravity=&quot;end|bottom&quot;\r\n            android:layout_margin=&quot;16dp&quot;\r\n            android:background=&quot;?attr/colorSurface&quot;\r\n            android:visibility=&quot;invisible&quot;\r\n            app:elevation=&quot;8dp&quot;\r\n            app:layout_behavior=&quot;@string/fab_transformation_sheet_behavior&quot;\r\n            tools:visibility=&quot;visible&quot;&gt;\r\n    \r\n            &lt;LinearLayout\r\n                android:id=&quot;@+id/sheet_content&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:orientation=&quot;vertical&quot;\r\n                android:paddingTop=&quot;8dp&quot;\r\n                android:paddingBottom=&quot;8dp&quot;&gt;\r\n    \r\n                &lt;include\r\n                    android:id=&quot;@+id/menu_1&quot;\r\n                    layout=&quot;@layout/menuitems&quot; /&gt;\r\n    \r\n                &lt;include\r\n                    android:id=&quot;@+id/menu_2&quot;\r\n                    layout=&quot;@layout/menuitems&quot; /&gt;\r\n    \r\n                &lt;include\r\n                    android:id=&quot;@+id/menu_3&quot;\r\n                    layout=&quot;@layout/menuitems&quot; /&gt;\r\n    \r\n                &lt;include\r\n                    android:id=&quot;@+id/menu_4&quot;\r\n                    layout=&quot;@layout/menuitems&quot; /&gt;\r\n    \r\n            &lt;/LinearLayout&gt;\r\n    \r\n        &lt;/com.google.android.material.circularreveal.cardview.CircularRevealCardView&gt;\r\n    \r\n    &lt;/androidx.coordinatorlayout.widget.CoordinatorLayout&gt;\r\n\r\nI can interact with the FAB but when I try moving the background (which is just the standard Android home screen, I never moves.\r\n\r\nApp not running (can movie the home screen around):\r\n[![enter image description here][2]][2]\r\n\r\nNow with the transparent fab:\r\n[![enter image description here][3]][3]\r\n\r\nWhat can I change (or add) in order to get this to work? The goal is to have this FAB button floating regardless of what app is opened.\r\n\r\n\r\n  [1]: https://github.com/android/animation-samples/tree/main/Motion#layout--fab-transformation\r\n  [2]: https://i.stack.imgur.com/3TNYS.gif\r\n  [3]: https://i.stack.imgur.com/or9Ji.gif","title":"Transparent background FAB not allowing interaction/blocking interaction","body":"<p>Hey all I am trying to figure out why I am unable to interact with the background even though my app has a transparent background? The code below was modified from the official Google Android demos <a href=\"https://github.com/android/animation-samples/tree/main/Motion#layout--fab-transformation\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>Here is the code I am using:</p>\n<pre><code>class FabTransformationActivity : AppCompatActivity()  {\n    private val viewModel: FabTransformationViewModel by viewModels()\n    private lateinit var fab: FloatingActionButton\n    private  var  mWindowManager:/*@@psggbk@@*/WindowManager? = null\n\n    private class ItemHolder(val parent: LinearLayout, listener: View.OnClickListener) {\n        val image: ImageView = parent.findViewById(R.id.image)\n        val name: TextView = parent.findViewById(R.id.name)\n\n        init {\n            parent.setOnClickListener(listener)\n        }\n    }\n\n    private val menuOnClick = View.OnClickListener { v -&gt;\n        val name = v.getTag(R.id.tag_name) as String\n\n        fab.isExpanded = false\n    }\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        var params: WindowManager.LayoutParams\n  \n        setContentView(R.layout.fab_transformation_activity)\n\n        val root: CoordinatorLayout = findViewById(R.id.root)\n        val sheet: CircularRevealCardView = findViewById(R.id.sheet)\n        val menuHolders: List&lt;ItemHolder&gt; = listOf(\n            ItemHolder(findViewById(R.id.menu_1), menuOnClick),\n            ItemHolder(findViewById(R.id.menu_2), menuOnClick),\n            ItemHolder(findViewById(R.id.menu_3), menuOnClick),\n            ItemHolder(findViewById(R.id.menu_4), menuOnClick)\n        )\n\n        fab = findViewById(R.id.fab)\n\n        WindowCompat.setDecorFitsSystemWindows(window, false)\n\n        val fabMargin = 16\n\n        ViewCompat.setOnApplyWindowInsetsListener(root) { _, insets -&gt;\n            val systemBars = insets.getInsets(WindowInsetsCompat.Type.systemBars())\n\n            fab.updateLayoutParams&lt;CoordinatorLayout.LayoutParams&gt; {\n                leftMargin = fabMargin + systemBars.left\n                rightMargin = fabMargin + systemBars.right\n                bottomMargin = fabMargin + systemBars.bottom\n            }\n\n            sheet.updateLayoutParams&lt;CoordinatorLayout.LayoutParams&gt; {\n                leftMargin = fabMargin + systemBars.left\n                rightMargin = fabMargin + systemBars.right\n                bottomMargin = fabMargin + systemBars.bottom\n            }\n\n            insets\n        }\n    \n        viewModel.items.observe(this) { items -&gt;\n            menuHolders.forEachIndexed { i, holder -&gt;\n                if (items.size &gt; i) {\n                    val _item = items[i]\n\n                    holder.parent.isVisible = true\n                    holder.parent.setTag(R.id.tag_name, _item.name)\n                    holder.name.text = _item.name\n\n                    Glide.with(holder.image)\n                        .load(_item.image)\n                        .transform(CircleCrop())\n                        .into(holder.image)\n                } else {\n                    holder.parent.isVisible = false\n                }\n            }\n        }\n\n        fab.setOnClickListener {\n            fab.isExpanded = true\n        }\n    }\n\n    override fun onBackPressed() {\n        if (fab.isExpanded) {\n            fab.isExpanded = false\n        } else {\n            super.onBackPressed()\n        }\n    }\n}\n</code></pre>\n<p>The layout:</p>\n<pre><code>&lt;androidx.coordinatorlayout.widget.CoordinatorLayout\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:id=&quot;@+id/root&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:orientation=&quot;horizontal&quot;&gt;\n\n    &lt;!-- A FAB that expands into a sheet. --&gt;\n    &lt;com.google.android.material.floatingactionbutton.FloatingActionButton\n        android:id=&quot;@+id/fab&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_gravity=&quot;end|bottom&quot;\n        android:layout_margin=&quot;16dp&quot;\n        app:elevation=&quot;8dp&quot;\n        android:contentDescription=&quot;&quot;\n        app:srcCompat=&quot;@drawable/ic_add&quot; /&gt;\n\n    &lt;!--\n        A sheet that the FAB expands into.\n        Use CircularRevealCardView to apply circular reveal effect.\n    --&gt;\n    &lt;com.google.android.material.circularreveal.cardview.CircularRevealCardView\n        android:id=&quot;@+id/sheet&quot;\n        android:layout_width=&quot;256dp&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_gravity=&quot;end|bottom&quot;\n        android:layout_margin=&quot;16dp&quot;\n        android:background=&quot;?attr/colorSurface&quot;\n        android:visibility=&quot;invisible&quot;\n        app:elevation=&quot;8dp&quot;\n        app:layout_behavior=&quot;@string/fab_transformation_sheet_behavior&quot;\n        tools:visibility=&quot;visible&quot;&gt;\n\n        &lt;LinearLayout\n            android:id=&quot;@+id/sheet_content&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:orientation=&quot;vertical&quot;\n            android:paddingTop=&quot;8dp&quot;\n            android:paddingBottom=&quot;8dp&quot;&gt;\n\n            &lt;include\n                android:id=&quot;@+id/menu_1&quot;\n                layout=&quot;@layout/menuitems&quot; /&gt;\n\n            &lt;include\n                android:id=&quot;@+id/menu_2&quot;\n                layout=&quot;@layout/menuitems&quot; /&gt;\n\n            &lt;include\n                android:id=&quot;@+id/menu_3&quot;\n                layout=&quot;@layout/menuitems&quot; /&gt;\n\n            &lt;include\n                android:id=&quot;@+id/menu_4&quot;\n                layout=&quot;@layout/menuitems&quot; /&gt;\n\n        &lt;/LinearLayout&gt;\n\n    &lt;/com.google.android.material.circularreveal.cardview.CircularRevealCardView&gt;\n\n&lt;/androidx.coordinatorlayout.widget.CoordinatorLayout&gt;\n</code></pre>\n<p>I can interact with the FAB but when I try moving the background (which is just the standard Android home screen, I never moves.</p>\n<p>App not running (can movie the home screen around):\n<a href=\"https://i.stack.imgur.com/3TNYS.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3TNYS.gif\" alt=\"enter image description here\" /></a></p>\n<p>Now with the transparent fab:\n<a href=\"https://i.stack.imgur.com/or9Ji.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/or9Ji.gif\" alt=\"enter image description here\" /></a></p>\n<p>What can I change (or add) in order to get this to work? The goal is to have this FAB button floating regardless of what app is opened.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9779,"page":213,"page_size":100}
