{"items":[{"tags":["java","networking","process","runtime","port"],"answers":[{"tags":[],"owner":{"account_id":8634690,"reputation":91,"user_id":6465315,"display_name":"RainerZufall"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640083641,"creation_date":1640083641,"answer_id":70434209,"question_id":70432989,"body_markdown":"A program doesn&#39;t use/open a port by default.  \r\nYou (-&gt; a program) need to query the OS to get a (free) port.  \r\nThus there&#39;s no general way to query a running process for its&#39; used port.  \r\nMaybe this tutorial will help you: https://www.baeldung.com/java-free-port","title":"Get the current process port in Java","body":"<p>A program doesn't use/open a port by default.<br />\nYou (-&gt; a program) need to query the OS to get a (free) port.<br />\nThus there's no general way to query a running process for its' used port.<br />\nMaybe this tutorial will help you: <a href=\"https://www.baeldung.com/java-free-port\" rel=\"nofollow noreferrer\">https://www.baeldung.com/java-free-port</a></p>\n"}],"owner":{"account_id":18105612,"reputation":171,"user_id":13162956,"display_name":"StackerSapper"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":266,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1640083641,"creation_date":1640077985,"question_id":70432989,"body_markdown":"In order to get the process number of my java application I am using:\r\n\r\n    ManagementFactory.getRuntimeMXBean().getName()\r\n\r\nI also need to get the current port number the the process uses, but I can&#39;t seem to find how I can get it from the runtime.\r\n\r\nIs there any way for doing that?","title":"Get the current process port in Java","body":"<p>In order to get the process number of my java application I am using:</p>\n<pre><code>ManagementFactory.getRuntimeMXBean().getName()\n</code></pre>\n<p>I also need to get the current port number the the process uses, but I can't seem to find how I can get it from the runtime.</p>\n<p>Is there any way for doing that?</p>\n"},{"tags":["java","iterator","binary-search-tree"],"comments":[{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1397974647,"post_id":23178926,"comment_id":35449936,"body_markdown":"Can you add an explanation of what &quot;post order&quot; is?","body":"Can you add an explanation of what &quot;post order&quot; is?"},{"owner":{"account_id":4353990,"reputation":21,"user_id":3553265,"display_name":"user3553265"},"score":0,"creation_date":1398001127,"post_id":23178926,"comment_id":35456173,"body_markdown":"I added a description","body":"I added a description"},{"owner":{"account_id":1152371,"reputation":4169,"user_id":1133802,"accept_rate":90,"display_name":"mostruash"},"score":2,"creation_date":1398003001,"post_id":23178926,"comment_id":35456714,"body_markdown":"It&#39;s not possible to have a `next()` function that is `O(1)`. It will be `O(logn)`. Consider in-order traversal. When you first call the `next()`, it has to traverse from the root to the left-most leaf, so it is O(logn).","body":"It&#39;s not possible to have a <code>next()</code> function that is <code>O(1)</code>. It will be <code>O(logn)</code>. Consider in-order traversal. When you first call the <code>next()</code>, it has to traverse from the root to the left-most leaf, so it is O(logn)."},{"owner":{"account_id":4353990,"reputation":21,"user_id":3553265,"display_name":"user3553265"},"score":0,"creation_date":1398008892,"post_id":23178926,"comment_id":35458627,"body_markdown":"You are so right! How would I go about it not being in 0(1)?","body":"You are so right! How would I go about it not being in 0(1)?"},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1398071643,"post_id":23178926,"comment_id":35476166,"body_markdown":"@user3553265 Exactly the same as the Iterator for TreeSet does. ;)","body":"@user3553265 Exactly the same as the Iterator for TreeSet does. ;)"}],"answers":[{"tags":[],"owner":{"account_id":214939,"reputation":18275,"user_id":469220,"accept_rate":75,"display_name":"Vlad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1453326809,"creation_date":1453326809,"answer_id":34911340,"question_id":23178926,"body_markdown":"One fairly general way to achieve this is by starting from the recursive algorithm, and turning it into an iterative algorithm with an explicit stack. Then, you find points in the recursive algorithm where it would output data, and you pause your computation there (in this example, by returning from the `advance()` method, and making sure the stack is left in a good state for the next call to `advance()`).\r\n\r\nMy recursive algorithm (I&#39;m using Java 8 and a different `Node` class, but it&#39;s along the same lines) was:\r\n\r\n    private void postorder(Node&lt;V&gt; node, Consumer&lt;V&gt; c) {\r\n        // step 0\r\n        if (node == null) {\r\n            return; // pop\r\n        }  \r\n        postorder(node.left, onTraverse); // push\r\n        // step 1\r\n        postorder(node.right, onTraverse); // push\r\n        // step 2\r\n        c.accept(node.data);\r\n        // pop\r\n    }\r\n\r\nwhich turns into the following iterator:\r\n\r\n    class PostorderIterator&lt;V&gt; implements Iterator&lt;V&gt; {\r\n\r\n      class Frame {\r\n          int step;\r\n          Node&lt;V&gt; node;\r\n\r\n          public Frame(Node&lt;V&gt; node) {\r\n              this.node = node;\r\n              step = 0;\r\n          }\r\n      }\r\n\r\n      Stack&lt;Frame&gt; st = new Stack&lt;&gt;();\r\n      boolean ready;\r\n      V result;\r\n\r\n      public PostorderIterator(Node&lt;V&gt; node) {\r\n          st.push(new Frame(node));\r\n      }\r\n\r\n      private V advance() {\r\n          while (!st.isEmpty()) {\r\n              Frame f = st.peek();\r\n              switch (f.step) {\r\n                  case 0:\r\n                      if (f.node == null) {\r\n                          st.pop(); // return\r\n                      } else {\r\n                          f.step = 1;\r\n                          st.push(new Frame(f.node.left)); // ~postorder(node.left, ...)\r\n                      }\r\n                      break;\r\n                  case 1:\r\n                      f.step = 2;\r\n                      st.push(new Frame(f.node.right)); // ~postorder(node.right, ...)\r\n                      break;\r\n                  case 2:\r\n                      st.pop(); // ~return\r\n                      return f.node.data;\r\n                  default:\r\n                      throw new RuntimeException();\r\n              }\r\n          }\r\n          return null;\r\n      }\r\n\r\n      @Override\r\n      public void remove() {\r\n          throw new UnsupportedOperationException();\r\n      }\r\n\r\n      @Override\r\n      public boolean hasNext() {\r\n          if (!ready) {\r\n              result = advance();\r\n              ready = true;\r\n          }\r\n          return result != null;\r\n      }\r\n\r\n      @Override\r\n      public V next() {\r\n          if (!ready) {\r\n              result = advance();\r\n              ready = true;\r\n          }\r\n          if (result == null) {\r\n              throw new NoSuchElementException();\r\n          }\r\n          ready = false;\r\n          return result;\r\n      }\r\n    }\r\n\r\nThis approach might be a bit clunkier than necessary, but having an explicit `Frame` holding your local variables, arguments, and where you are in the code, should be a decent starting point to a cleaner algorithm.","title":"Post-order iterator in trees","body":"<p>One fairly general way to achieve this is by starting from the recursive algorithm, and turning it into an iterative algorithm with an explicit stack. Then, you find points in the recursive algorithm where it would output data, and you pause your computation there (in this example, by returning from the <code>advance()</code> method, and making sure the stack is left in a good state for the next call to <code>advance()</code>).</p>\n\n<p>My recursive algorithm (I'm using Java 8 and a different <code>Node</code> class, but it's along the same lines) was:</p>\n\n<pre><code>private void postorder(Node&lt;V&gt; node, Consumer&lt;V&gt; c) {\n    // step 0\n    if (node == null) {\n        return; // pop\n    }  \n    postorder(node.left, onTraverse); // push\n    // step 1\n    postorder(node.right, onTraverse); // push\n    // step 2\n    c.accept(node.data);\n    // pop\n}\n</code></pre>\n\n<p>which turns into the following iterator:</p>\n\n<pre><code>class PostorderIterator&lt;V&gt; implements Iterator&lt;V&gt; {\n\n  class Frame {\n      int step;\n      Node&lt;V&gt; node;\n\n      public Frame(Node&lt;V&gt; node) {\n          this.node = node;\n          step = 0;\n      }\n  }\n\n  Stack&lt;Frame&gt; st = new Stack&lt;&gt;();\n  boolean ready;\n  V result;\n\n  public PostorderIterator(Node&lt;V&gt; node) {\n      st.push(new Frame(node));\n  }\n\n  private V advance() {\n      while (!st.isEmpty()) {\n          Frame f = st.peek();\n          switch (f.step) {\n              case 0:\n                  if (f.node == null) {\n                      st.pop(); // return\n                  } else {\n                      f.step = 1;\n                      st.push(new Frame(f.node.left)); // ~postorder(node.left, ...)\n                  }\n                  break;\n              case 1:\n                  f.step = 2;\n                  st.push(new Frame(f.node.right)); // ~postorder(node.right, ...)\n                  break;\n              case 2:\n                  st.pop(); // ~return\n                  return f.node.data;\n              default:\n                  throw new RuntimeException();\n          }\n      }\n      return null;\n  }\n\n  @Override\n  public void remove() {\n      throw new UnsupportedOperationException();\n  }\n\n  @Override\n  public boolean hasNext() {\n      if (!ready) {\n          result = advance();\n          ready = true;\n      }\n      return result != null;\n  }\n\n  @Override\n  public V next() {\n      if (!ready) {\n          result = advance();\n          ready = true;\n      }\n      if (result == null) {\n          throw new NoSuchElementException();\n      }\n      ready = false;\n      return result;\n  }\n}\n</code></pre>\n\n<p>This approach might be a bit clunkier than necessary, but having an explicit <code>Frame</code> holding your local variables, arguments, and where you are in the code, should be a decent starting point to a cleaner algorithm.</p>\n"},{"tags":[],"owner":{"account_id":14640175,"reputation":21,"user_id":10572975,"display_name":"Jianfei Hua"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1540789873,"creation_date":1540789873,"answer_id":53039065,"question_id":23178926,"body_markdown":"I googled for a binary tree postorder iterator implementation but could not find a good one. So I implemented mine using two stacks.\r\n\r\n    public class BinaryTreePostorderIterator implements Iterator&lt;Integer&gt; {\r\n    private TreeNode root;\r\n    private Stack&lt;TreeNode&gt; nodes;\r\n    private Stack&lt;Boolean&gt; expanded;\r\n    public BinaryTreePostorderIterator(TreeNode root) {\r\n        this.root = root;\r\n        nodes = new Stack&lt;&gt;();\r\n        expanded = new Stack&lt;&gt;();\r\n        if (root != null) {\r\n            nodes.push(root);\r\n            expanded.push(false);\r\n        }\r\n    }\r\n    @Override\r\n    public Integer next() {\r\n        if (!hasNext()) {\r\n            throw new NoSuchElementException(&quot;End reached&quot;);\r\n        }\r\n        expanded.pop();\r\n        return nodes.pop().val;\r\n    }\r\n\r\n    @Override\r\n    public boolean hasNext() {\r\n        if (nodes.isEmpty()) {\r\n            return false;\r\n        }\r\n        while (!expanded.peek()) {\r\n            expanded.pop();\r\n            expanded.push(true);\r\n            TreeNode node = nodes.peek();\r\n            if (node.right != null) {\r\n                nodes.push(node.right);\r\n                expanded.push(false);\r\n            }\r\n            if (node.left != null) {\r\n                nodes.push(node.left);\r\n                expanded.push(false);\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        TreeNode root = new TreeNode(5);\r\n        root.left = new TreeNode(3);\r\n        root.left.right = new TreeNode(4);\r\n        root.left.left = new TreeNode(2);\r\n        root.right = new TreeNode(7);\r\n        root.right.right = new TreeNode(8);\r\n        root.right.left = new TreeNode(6);\r\n\r\n        BinaryTreePostorderIterator pi = new BinaryTreePostorderIterator(root);\r\n        while (pi.hasNext()) {\r\n            System.out.println(pi.next());\r\n        }\r\n    }\r\n}\r\n\r\n\r\n","title":"Post-order iterator in trees","body":"<p>I googled for a binary tree postorder iterator implementation but could not find a good one. So I implemented mine using two stacks.</p>\n\n<pre><code>public class BinaryTreePostorderIterator implements Iterator&lt;Integer&gt; {\nprivate TreeNode root;\nprivate Stack&lt;TreeNode&gt; nodes;\nprivate Stack&lt;Boolean&gt; expanded;\npublic BinaryTreePostorderIterator(TreeNode root) {\n    this.root = root;\n    nodes = new Stack&lt;&gt;();\n    expanded = new Stack&lt;&gt;();\n    if (root != null) {\n        nodes.push(root);\n        expanded.push(false);\n    }\n}\n@Override\npublic Integer next() {\n    if (!hasNext()) {\n        throw new NoSuchElementException(\"End reached\");\n    }\n    expanded.pop();\n    return nodes.pop().val;\n}\n\n@Override\npublic boolean hasNext() {\n    if (nodes.isEmpty()) {\n        return false;\n    }\n    while (!expanded.peek()) {\n        expanded.pop();\n        expanded.push(true);\n        TreeNode node = nodes.peek();\n        if (node.right != null) {\n            nodes.push(node.right);\n            expanded.push(false);\n        }\n        if (node.left != null) {\n            nodes.push(node.left);\n            expanded.push(false);\n        }\n    }\n    return true;\n}\n\npublic static void main(String[] args) {\n    TreeNode root = new TreeNode(5);\n    root.left = new TreeNode(3);\n    root.left.right = new TreeNode(4);\n    root.left.left = new TreeNode(2);\n    root.right = new TreeNode(7);\n    root.right.right = new TreeNode(8);\n    root.right.left = new TreeNode(6);\n\n    BinaryTreePostorderIterator pi = new BinaryTreePostorderIterator(root);\n    while (pi.hasNext()) {\n        System.out.println(pi.next());\n    }\n}\n</code></pre>\n\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":560191,"reputation":1880,"user_id":922340,"display_name":"Moshe Bixenshpaner"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1596814601,"creation_date":1596813486,"answer_id":63304648,"question_id":23178926,"body_markdown":"I just played a bit with post order iterator..\r\nThis is what I&#39;ve come up with:\r\n\r\n```\r\n    class PostOrderIterator\r\n    implements Iterator&lt;T&gt; {\r\n\r\n        private Stack&lt;Node&lt;T&gt;&gt; stack;\r\n        private Node&lt;T&gt; prev;\r\n\r\n        public PostOrderIterator() {\r\n            this.stack = new Stack&lt;&gt;();\r\n            recurse(root);\r\n            this.prev = this.stack.peek();\r\n        }\r\n\r\n        private void recurse(Node&lt;T&gt; node) {\r\n            if(node == null) {\r\n                return;\r\n            }\r\n\r\n            while(node != null) {\r\n                stack.push(node);\r\n                node = node.left;\r\n            }\r\n            recurse(stack.peek().right);\r\n        }\r\n\r\n        @Override\r\n        public boolean hasNext() {\r\n            return !stack.isEmpty();\r\n        }\r\n\r\n        @Override\r\n        public T next() {\r\n            if(stack.peek().right != this.prev) {\r\n                recurse(stack.peek().right);\r\n            }\r\n\r\n            Node&lt;T&gt; next = stack.pop();\r\n            this.prev = next;\r\n            return next.value;\r\n        }\r\n    }\r\n```\r\n\r\nBasically, the main idea is that you should think how the initialization process puts the first item to print on the top of the stack, while the rest of the stack follow the nodes that would have been touched by the recursion. The rest would just then become a lot easier to nail.\r\n\r\nAlso, from design perspective, `PostOrderIterator` is an internal class exposed via some factory method of the tree class as an `Iterator&lt;T&gt;`.","title":"Post-order iterator in trees","body":"<p>I just played a bit with post order iterator..\nThis is what I've come up with:</p>\n<pre><code>    class PostOrderIterator\n    implements Iterator&lt;T&gt; {\n\n        private Stack&lt;Node&lt;T&gt;&gt; stack;\n        private Node&lt;T&gt; prev;\n\n        public PostOrderIterator() {\n            this.stack = new Stack&lt;&gt;();\n            recurse(root);\n            this.prev = this.stack.peek();\n        }\n\n        private void recurse(Node&lt;T&gt; node) {\n            if(node == null) {\n                return;\n            }\n\n            while(node != null) {\n                stack.push(node);\n                node = node.left;\n            }\n            recurse(stack.peek().right);\n        }\n\n        @Override\n        public boolean hasNext() {\n            return !stack.isEmpty();\n        }\n\n        @Override\n        public T next() {\n            if(stack.peek().right != this.prev) {\n                recurse(stack.peek().right);\n            }\n\n            Node&lt;T&gt; next = stack.pop();\n            this.prev = next;\n            return next.value;\n        }\n    }\n</code></pre>\n<p>Basically, the main idea is that you should think how the initialization process puts the first item to print on the top of the stack, while the rest of the stack follow the nodes that would have been touched by the recursion. The rest would just then become a lot easier to nail.</p>\n<p>Also, from design perspective, <code>PostOrderIterator</code> is an internal class exposed via some factory method of the tree class as an <code>Iterator&lt;T&gt;</code>.</p>\n"}],"owner":{"account_id":4353990,"reputation":21,"user_id":3553265,"display_name":"user3553265"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7065,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1640083590,"creation_date":1397972876,"question_id":23178926,"body_markdown":"I am trying to create an `Iterator` implementation for post-order and I am in a slump. I was able to get in-order and pre-order implementations but I can&#39;t seem to get a post-order. If you guys can point me in the right direction and give me some tips, that would be amazing.\r\n\r\nHere&#39;s my in-order class:\r\n\r\n    public class InOrderIterator&lt;T&gt; implements Iterator&lt;T&gt; {\r\n    \r\n    \tprivate final Deque&lt;BinaryTreeNode&lt;T&gt;&gt; stack;\r\n    \tprivate BinaryTreeNode&lt;T&gt; current;\r\n    \r\n    \tpublic InOrderIterator(BinaryTreeNode&lt;T&gt; root){\r\n    \t\tstack = new LinkedList&lt;BinaryTreeNode&lt;T&gt;&gt;();\r\n    \t\tthis.current = root;\r\n    \t}\r\n    \r\n    \t@Override\r\n        public boolean hasNext() {\r\n            return (!stack.isEmpty() || current != null);\r\n        }\r\n    \t\r\n    \t@Override\r\n    \tpublic T next() {\r\n            while (current != null) {\r\n                stack.push(current);\r\n                if (current.hasLeftChild())\r\n                \tcurrent = current.getLeftChild();\r\n                else\r\n                \tcurrent = null;\r\n            }\r\n    \r\n            current = stack.pop();\r\n            BinaryTreeNode&lt;T&gt; node = current;\r\n            if (current.hasRightChild())\r\n            \tcurrent = current.getRightChild();\r\n            else\r\n            \tcurrent = null;\r\n    \r\n            return node.getData();\r\n        }\r\n    \r\n    \t@Override\r\n    \tpublic void remove() {\r\n    \t\tthrow new UnsupportedOperationException();\r\n    \t}\r\n    \r\n    }\r\n\r\n Here&#39;s a description of pre-, in-, and post-order:\r\n\r\n**Pre-order**\r\n\r\n 1. Visit the root.\r\n 2. Traverse the left subtree.\r\n 3. Traverse the right subtree.\r\n\r\n**In-order**\r\n\r\n 1. Traverse the left subtree.\r\n 2. Visit root.\r\n 3. Traverse the right subtree.\r\n\r\n**Post-order**\r\n\r\n 1. Traverse the left subtree.\r\n 2. Traverse the right subtree.\r\n 3. Visit the root.\r\n\r\nhttp://en.wikipedia.org/wiki/Tree_traversal#Types\r\n\r\n","title":"Post-order iterator in trees","body":"<p>I am trying to create an <code>Iterator</code> implementation for post-order and I am in a slump. I was able to get in-order and pre-order implementations but I can't seem to get a post-order. If you guys can point me in the right direction and give me some tips, that would be amazing.</p>\n\n<p>Here's my in-order class:</p>\n\n<pre><code>public class InOrderIterator&lt;T&gt; implements Iterator&lt;T&gt; {\n\n    private final Deque&lt;BinaryTreeNode&lt;T&gt;&gt; stack;\n    private BinaryTreeNode&lt;T&gt; current;\n\n    public InOrderIterator(BinaryTreeNode&lt;T&gt; root){\n        stack = new LinkedList&lt;BinaryTreeNode&lt;T&gt;&gt;();\n        this.current = root;\n    }\n\n    @Override\n    public boolean hasNext() {\n        return (!stack.isEmpty() || current != null);\n    }\n\n    @Override\n    public T next() {\n        while (current != null) {\n            stack.push(current);\n            if (current.hasLeftChild())\n                current = current.getLeftChild();\n            else\n                current = null;\n        }\n\n        current = stack.pop();\n        BinaryTreeNode&lt;T&gt; node = current;\n        if (current.hasRightChild())\n            current = current.getRightChild();\n        else\n            current = null;\n\n        return node.getData();\n    }\n\n    @Override\n    public void remove() {\n        throw new UnsupportedOperationException();\n    }\n\n}\n</code></pre>\n\n<p>Here's a description of pre-, in-, and post-order:</p>\n\n<p><strong>Pre-order</strong></p>\n\n<ol>\n<li>Visit the root.</li>\n<li>Traverse the left subtree.</li>\n<li>Traverse the right subtree.</li>\n</ol>\n\n<p><strong>In-order</strong></p>\n\n<ol>\n<li>Traverse the left subtree.</li>\n<li>Visit root.</li>\n<li>Traverse the right subtree.</li>\n</ol>\n\n<p><strong>Post-order</strong></p>\n\n<ol>\n<li>Traverse the left subtree.</li>\n<li>Traverse the right subtree.</li>\n<li>Visit the root.</li>\n</ol>\n\n<p><a href=\"http://en.wikipedia.org/wiki/Tree_traversal#Types\" rel=\"nofollow\">http://en.wikipedia.org/wiki/Tree_traversal#Types</a></p>\n"},{"tags":["java","unit-testing","junit","kotlin","annotation-processing"],"answers":[{"tags":[],"owner":{"account_id":1806762,"reputation":4128,"user_id":1643723,"display_name":"user1643723"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1484119383,"creation_date":1484119383,"answer_id":41584941,"question_id":41528471,"body_markdown":"Kotlin integrates with ordinary Java annotation processors by generating &quot;stubs&quot; (empty class carcasses, that have same semantic/methods/fields as target Kotlin classes) &lt;sup&gt;[[1]](https://blog.jetbrains.com/kotlin/2015/06/better-annotation-processing-supporting-stubs-in-kapt/)&lt;/sup&gt;. This means, that unit-testing Java annotation processors with `kapt` is essentially impossible — even if you somehow integrate the Kotlin tooling in your testing flow, you will end up testing `kapt` itself, rather then your own code.\r\n\r\nIf you want to ensure, that your annotation processing code works with Kotlin-generated stubs, just generate all possible invariants that may be produced by stub generator, and use those as test subjects like any ordinary Java code.","title":"Java annotation processor - Annotated Kotlin classes unit tests","body":"<p>Kotlin integrates with ordinary Java annotation processors by generating \"stubs\" (empty class carcasses, that have same semantic/methods/fields as target Kotlin classes) <sup><a href=\"https://blog.jetbrains.com/kotlin/2015/06/better-annotation-processing-supporting-stubs-in-kapt/\" rel=\"nofollow noreferrer\">[1]</a></sup>. This means, that unit-testing Java annotation processors with <code>kapt</code> is essentially impossible — even if you somehow integrate the Kotlin tooling in your testing flow, you will end up testing <code>kapt</code> itself, rather then your own code.</p>\n\n<p>If you want to ensure, that your annotation processing code works with Kotlin-generated stubs, just generate all possible invariants that may be produced by stub generator, and use those as test subjects like any ordinary Java code.</p>\n"},{"tags":[],"owner":{"account_id":8951272,"reputation":1,"user_id":6677204,"display_name":"Tristan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640083447,"creation_date":1640083447,"answer_id":70434176,"question_id":41528471,"body_markdown":"Old question but [kotlin-compile-testing](https://github.com/tschuchortdev/kotlin-compile-testing) is now available and widely used for this usage. It supports java and kotlin files as well.","title":"Java annotation processor - Annotated Kotlin classes unit tests","body":"<p>Old question but <a href=\"https://github.com/tschuchortdev/kotlin-compile-testing\" rel=\"nofollow noreferrer\">kotlin-compile-testing</a> is now available and widely used for this usage. It supports java and kotlin files as well.</p>\n"}],"owner":{"account_id":6480158,"reputation":143,"user_id":5017462,"display_name":"Robot Monkey"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1020,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":41584941,"answer_count":2,"score":5,"last_activity_date":1640083447,"creation_date":1483838577,"question_id":41528471,"body_markdown":"I have an annotation processor [library][1] that I would like to get working for Kotlin, however I have hit a snag in terms of my unit testing. I would really appreciate if someone could give me some advice.\r\n\r\nMy current unit testing implementation uses Google&#39;s [compile-testing][2] library. I create input and output classes and store them in the resources directory. Then during the unit test, the compile-testing library compiles the input java class, executes the annotation processor and then compares the generated classes against the expected output class from the resources directory.\r\n\r\nHere is an example (from my project) of what I am referring to:\r\n[Unit test class][3]\r\n[Resources (Input and expected output classes][4]\r\n\r\nThis is working great for all my current java based unit tests. However when I attempt to write some tests using Kotlin classes, my test fails to load the class.\r\n\r\nI believe this is due to the compile-testing library being first and foremost a Java specific library (I don&#39;t see any mention of Kotlin on their project)\r\n\r\nAt the moment I get the following issue:\r\n\r\n    java.lang.IllegalArgumentException: Compilation unit is not of SOURCE kind: &quot;/C:/dev/gsonpath/gsonpath-compiler/build/resources/test/adapter/auto/field_types/primitives/valid/TestValidPrimitives.kt&quot;\r\n    \r\n    at com.sun.tools.javac.api.JavacTool.getTask(JavacTool.java:137)\r\n    at com.sun.tools.javac.api.JavacTool.getTask(JavacTool.java:107)\r\n    at com.sun.tools.javac.api.JavacTool.getTask(JavacTool.java:64)\r\n    at com.google.testing.compile.Compilation.compile(Compilation.java:69)\r\n    at com.google.testing.compile.JavaSourcesSubject$CompilationClause.compilesWithoutError(JavaSourcesSubject.java:281)\r\n\r\nThe problem is fairly obvious that the incorrect compiler is being used. The exception itself is thrown when my file extension is not &#39;.java&#39;. If I attempt to load a Kotlin class with the &#39;.java&#39; file extension, it doesn&#39;t work since it is not correct Java syntax.\r\n\r\nHas anyone come across this issue before and solved it? I have had a look at a few other annotation processors (such as [DBFlow][5]), and they do not write unit tests in this manner.\r\n\r\nSince Kotlin is only recently dabbling in annotation processing, perhaps I am the first to have this problem?\r\n\r\n  [1]: https://github.com/LachlanMcKee/gsonpath\r\n  [2]: https://github.com/google/compile-testing\r\n  [3]: https://github.com/LachlanMcKee/gsonpath/blob/feature/updated-compiler-to-use-kotlin/gsonpath-compiler/src/test/java/gsonpath/generator/adapter/auto/FieldTypesTest.kt\r\n  [4]: https://github.com/LachlanMcKee/gsonpath/tree/feature/updated-compiler-to-use-kotlin/gsonpath-compiler/src/test/resources/adapter/auto/field_types/primitives/valid\r\n  [5]: https://github.com/Raizlabs/DBFlow/tree/master/dbflow-processor/src/test/java/com/raizlabs/android/dbflow/processor/test","title":"Java annotation processor - Annotated Kotlin classes unit tests","body":"<p>I have an annotation processor <a href=\"https://github.com/LachlanMcKee/gsonpath\" rel=\"noreferrer\">library</a> that I would like to get working for Kotlin, however I have hit a snag in terms of my unit testing. I would really appreciate if someone could give me some advice.</p>\n\n<p>My current unit testing implementation uses Google's <a href=\"https://github.com/google/compile-testing\" rel=\"noreferrer\">compile-testing</a> library. I create input and output classes and store them in the resources directory. Then during the unit test, the compile-testing library compiles the input java class, executes the annotation processor and then compares the generated classes against the expected output class from the resources directory.</p>\n\n<p>Here is an example (from my project) of what I am referring to:\n<a href=\"https://github.com/LachlanMcKee/gsonpath/blob/feature/updated-compiler-to-use-kotlin/gsonpath-compiler/src/test/java/gsonpath/generator/adapter/auto/FieldTypesTest.kt\" rel=\"noreferrer\">Unit test class</a>\n<a href=\"https://github.com/LachlanMcKee/gsonpath/tree/feature/updated-compiler-to-use-kotlin/gsonpath-compiler/src/test/resources/adapter/auto/field_types/primitives/valid\" rel=\"noreferrer\">Resources (Input and expected output classes</a></p>\n\n<p>This is working great for all my current java based unit tests. However when I attempt to write some tests using Kotlin classes, my test fails to load the class.</p>\n\n<p>I believe this is due to the compile-testing library being first and foremost a Java specific library (I don't see any mention of Kotlin on their project)</p>\n\n<p>At the moment I get the following issue:</p>\n\n<pre><code>java.lang.IllegalArgumentException: Compilation unit is not of SOURCE kind: \"/C:/dev/gsonpath/gsonpath-compiler/build/resources/test/adapter/auto/field_types/primitives/valid/TestValidPrimitives.kt\"\n\nat com.sun.tools.javac.api.JavacTool.getTask(JavacTool.java:137)\nat com.sun.tools.javac.api.JavacTool.getTask(JavacTool.java:107)\nat com.sun.tools.javac.api.JavacTool.getTask(JavacTool.java:64)\nat com.google.testing.compile.Compilation.compile(Compilation.java:69)\nat com.google.testing.compile.JavaSourcesSubject$CompilationClause.compilesWithoutError(JavaSourcesSubject.java:281)\n</code></pre>\n\n<p>The problem is fairly obvious that the incorrect compiler is being used. The exception itself is thrown when my file extension is not '.java'. If I attempt to load a Kotlin class with the '.java' file extension, it doesn't work since it is not correct Java syntax.</p>\n\n<p>Has anyone come across this issue before and solved it? I have had a look at a few other annotation processors (such as <a href=\"https://github.com/Raizlabs/DBFlow/tree/master/dbflow-processor/src/test/java/com/raizlabs/android/dbflow/processor/test\" rel=\"noreferrer\">DBFlow</a>), and they do not write unit tests in this manner.</p>\n\n<p>Since Kotlin is only recently dabbling in annotation processing, perhaps I am the first to have this problem?</p>\n"},{"tags":["java","batik"],"comments":[{"owner":{"account_id":3482475,"reputation":27230,"user_id":2914140,"accept_rate":69,"display_name":"CoolMind"},"score":0,"creation_date":1615650191,"post_id":66615175,"comment_id":117759565,"body_markdown":"Why do you need the library? SVG can be rasterized in many ways. Also, does exception depend on a file?","body":"Why do you need the library? SVG can be rasterized in many ways. Also, does exception depend on a file?"},{"owner":{"account_id":1725588,"reputation":5801,"user_id":1580348,"accept_rate":72,"display_name":"user1580348"},"score":0,"creation_date":1615650293,"post_id":66615175,"comment_id":117759597,"body_markdown":"Why are you asking?","body":"Why are you asking?"},{"owner":{"account_id":3482475,"reputation":27230,"user_id":2914140,"accept_rate":69,"display_name":"CoolMind"},"score":0,"creation_date":1615653965,"post_id":66615175,"comment_id":117760709,"body_markdown":"Sorry, I don&#39;t know this library.","body":"Sorry, I don&#39;t know this library."},{"owner":{"account_id":1852308,"reputation":490,"user_id":1678593,"accept_rate":75,"display_name":"Brian O Carroll"},"score":0,"creation_date":1639996804,"post_id":66615175,"comment_id":124481860,"body_markdown":"Did you ever get this resolved? I have the exact same problem (with a few of the batik sample SVGs). Batik 1.14, Java 8. Thanks","body":"Did you ever get this resolved? I have the exact same problem (with a few of the batik sample SVGs). Batik 1.14, Java 8. Thanks"}],"answers":[{"tags":[],"owner":{"account_id":1852308,"reputation":490,"user_id":1678593,"accept_rate":75,"display_name":"Brian O Carroll"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640082990,"creation_date":1640082286,"answer_id":70433930,"question_id":66615175,"body_markdown":"There is a [discussion here][1] that sheds some more light on this.\r\n\r\n**Workaround 1 - use &quot;one param&quot; stdDeviation in the SVG&#39;s feGaussianBlur.**\r\n\r\nThe specific SVG element that causes this error is the [stdDeviation][2] property of [feGaussianBlur][3]. If two params are provided, it does not work:\r\n\r\n    &lt;feGaussianBlur stdDeviation=&quot;2 3&quot; /&gt; &lt;!-- DOESN&#39;T WORK --&gt;\r\n\r\nHowever, if only one param is specified, it works fine:\r\n\r\n    &lt;feGaussianBlur stdDeviation=&quot;2&quot; /&gt; &lt;!-- WORKS! --&gt;\r\n\r\nThe &quot;two param&quot; version allows different blur to be applied on x and y axes. The &quot;one param&quot; version applies the same blur amount to both x and y.\r\n\r\n**Workaround 2 - Upgrade to Java 9 or higher.**\r\n\r\nIt seems to be a bug with Java 1.7 (and 1.8 in my experience - and possibly others). I can confirm that it is resolved in Java 9 (9.0.4 - Windows).\r\n\r\n  [1]: https://github.com/haraldk/TwelveMonkeys/issues/453\r\n  [2]: https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stdDeviation\r\n  [3]: https://developer.mozilla.org/en-US/docs/Web/SVG/Element/feGaussianBlur","title":"Batik 1.14 error when trying to rasterize SVG file","body":"<p>There is a <a href=\"https://github.com/haraldk/TwelveMonkeys/issues/453\" rel=\"nofollow noreferrer\">discussion here</a> that sheds some more light on this.</p>\n<p><strong>Workaround 1 - use &quot;one param&quot; stdDeviation in the SVG's feGaussianBlur.</strong></p>\n<p>The specific SVG element that causes this error is the <a href=\"https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stdDeviation\" rel=\"nofollow noreferrer\">stdDeviation</a> property of <a href=\"https://developer.mozilla.org/en-US/docs/Web/SVG/Element/feGaussianBlur\" rel=\"nofollow noreferrer\">feGaussianBlur</a>. If two params are provided, it does not work:</p>\n<pre><code>&lt;feGaussianBlur stdDeviation=&quot;2 3&quot; /&gt; &lt;!-- DOESN'T WORK --&gt;\n</code></pre>\n<p>However, if only one param is specified, it works fine:</p>\n<pre><code>&lt;feGaussianBlur stdDeviation=&quot;2&quot; /&gt; &lt;!-- WORKS! --&gt;\n</code></pre>\n<p>The &quot;two param&quot; version allows different blur to be applied on x and y axes. The &quot;one param&quot; version applies the same blur amount to both x and y.</p>\n<p><strong>Workaround 2 - Upgrade to Java 9 or higher.</strong></p>\n<p>It seems to be a bug with Java 1.7 (and 1.8 in my experience - and possibly others). I can confirm that it is resolved in Java 9 (9.0.4 - Windows).</p>\n"}],"owner":{"account_id":1725588,"reputation":5801,"user_id":1580348,"accept_rate":72,"display_name":"user1580348"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":271,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1640082990,"creation_date":1615649078,"question_id":66615175,"body_markdown":"In Windows 10 x64 with Java 8.281, I have downloaded BATIK 1.14 binaries from:\r\nhttps://xmlgraphics.apache.org/batik/download.html\r\n\r\nIn a Windows command prompt, I tried to rasterize one of the included SVG files, but it did not work:\r\n\r\n&gt; C:\\COMP\\_CLI_Tools\\batik-bin-1.14\\batik-1.14&gt;java -jar\r\n&gt; batik-rasterizer-1.14.jar samples\\textRotateShadows.svg About to\r\n&gt; transcode 1 SVG file(s)\r\n&gt; \r\n&gt; Converting textRotateShadows.svg to samples\\textRotateShadows.png ...\r\n&gt; org.apache.batik.transcoder.TranscoderException: null Enclosed\r\n&gt; Exception: Unable to transform src image\r\n&gt;         at org.apache.batik.transcoder.image.ImageTranscoder.transcode(ImageTranscoder.java:132)\r\n&gt;         at org.apache.batik.transcoder.XMLAbstractTranscoder.transcode(XMLAbstractTranscoder.java:142)\r\n&gt;         at org.apache.batik.transcoder.SVGAbstractTranscoder.transcode(SVGAbstractTranscoder.java:158)\r\n&gt;         at org.apache.batik.apps.rasterizer.SVGConverter.transcode(SVGConverter.java:1008)\r\n&gt;         at org.apache.batik.apps.rasterizer.SVGConverter.execute(SVGConverter.java:719)\r\n&gt;         at org.apache.batik.apps.rasterizer.Main.execute(Main.java:954)\r\n&gt;         at org.apache.batik.apps.rasterizer.Main.main(Main.java:1007) Caused by: java.awt.image.ImagingOpException: Unable to transform src\r\n&gt; image\r\n&gt;         at java.awt.image.AffineTransformOp.filter(AffineTransformOp.java:358)\r\n&gt;         at org.apache.batik.ext.awt.image.rendered.AffineRed.genRect(AffineRed.java:193)\r\n&gt;         at org.apache.batik.ext.awt.image.rendered.AffineRed.copyData(AffineRed.java:109)\r\n&gt;         at org.apache.batik.ext.awt.image.rendered.PadRed.copyData(PadRed.java:88)\r\n&gt;         at org.apache.batik.ext.awt.image.rendered.PadRed.copyData(PadRed.java:88)\r\n&gt;         at org.apache.batik.ext.awt.image.rendered.Any2sRGBRed.copyData(Any2sRGBRed.java:166)\r\n&gt;         at org.apache.batik.ext.awt.image.rendered.AbstractRed.getData(AbstractRed.java:523)\r\n&gt;         at org.apache.batik.ext.awt.image.GraphicsUtil.drawImage(GraphicsUtil.java:264)\r\n&gt;         at org.apache.batik.ext.awt.image.GraphicsUtil.drawImage(GraphicsUtil.java:455)\r\n&gt;         at org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:550)\r\n&gt;         at org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\r\n&gt;         at org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\r\n&gt;         at org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\r\n&gt;         at org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\r\n&gt;         at org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\r\n&gt;         at org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\r\n&gt;         at org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\r\n&gt;         at org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\r\n&gt;         at org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\r\n&gt;         at org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\r\n&gt;         at org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\r\n&gt;         at org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\r\n&gt;         at org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\r\n&gt;         at org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\r\n&gt;         at org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\r\n&gt;         at org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\r\n&gt;         at org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\r\n&gt;         at org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\r\n&gt;         at org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\r\n&gt;         at org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\r\n&gt;         at org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\r\n&gt;         at org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\r\n&gt;         at org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\r\n&gt;         at org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\r\n&gt;         at org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\r\n&gt;         at org.apache.batik.gvt.filter.GraphicsNodeRed8Bit.genRect(GraphicsNodeRed8Bit.java:141)\r\n&gt;         at org.apache.batik.gvt.filter.GraphicsNodeRed8Bit.copyData(GraphicsNodeRed8Bit.java:117)\r\n&gt;         at org.apache.batik.ext.awt.image.rendered.PadRed.copyData(PadRed.java:88)\r\n&gt;         at org.apache.batik.ext.awt.image.rendered.PadRed.copyData(PadRed.java:88)\r\n&gt;         at org.apache.batik.ext.awt.image.rendered.Any2LsRGBRed.copyData(Any2LsRGBRed.java:109)\r\n&gt;         at org.apache.batik.ext.awt.image.rendered.GaussianBlurRed8Bit.copyData(GaussianBlurRed8Bit.java:232)\r\n&gt;         at org.apache.batik.ext.awt.image.rendered.AbstractRed.getData(AbstractRed.java:523)\r\n&gt;         at org.apache.batik.ext.awt.image.rendered.AffineRed.genRect(AffineRed.java:146)\r\n&gt;         at org.apache.batik.ext.awt.image.rendered.AffineRed.copyData(AffineRed.java:109)\r\n&gt;         at org.apache.batik.ext.awt.image.rendered.PadRed.copyData(PadRed.java:88)\r\n&gt;         at org.apache.batik.ext.awt.image.rendered.PadRed.copyData(PadRed.java:88)\r\n&gt;         at org.apache.batik.ext.awt.image.rendered.Any2sRGBRed.copyData(Any2sRGBRed.java:166)\r\n&gt;         at org.apache.batik.ext.awt.image.GraphicsUtil.drawImage(GraphicsUtil.java:347)\r\n&gt;         at org.apache.batik.ext.awt.image.GraphicsUtil.drawImage(GraphicsUtil.java:455)\r\n&gt;         at org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:550)\r\n&gt;         at org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\r\n&gt;         at org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\r\n&gt;         at org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\r\n&gt;         at org.apache.batik.gvt.CanvasGraphicsNode.primitivePaint(CanvasGraphicsNode.java:159)\r\n&gt;         at org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\r\n&gt;         at org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\r\n&gt;         at org.apache.batik.gvt.filter.GraphicsNodeRed8Bit.genRect(GraphicsNodeRed8Bit.java:141)\r\n&gt;         at org.apache.batik.gvt.filter.GraphicsNodeRed8Bit.copyData(GraphicsNodeRed8Bit.java:117)\r\n&gt;         at org.apache.batik.ext.awt.image.rendered.TileCacheRed.genRect(TileCacheRed.java:63)\r\n&gt;         at org.apache.batik.ext.awt.image.rendered.AbstractTiledRed.drawBlockInPlace(AbstractTiledRed.java:625)\r\n&gt;         at org.apache.batik.ext.awt.image.rendered.AbstractTiledRed.drawBlock(AbstractTiledRed.java:544)\r\n&gt;         at org.apache.batik.ext.awt.image.rendered.AbstractTiledRed.copyToRasterByBlocks(AbstractTiledRed.java:430)\r\n&gt;         at org.apache.batik.ext.awt.image.rendered.AbstractTiledRed.copyData(AbstractTiledRed.java:297)\r\n&gt;         at org.apache.batik.ext.awt.image.rendered.TranslateRed.copyData(TranslateRed.java:105)\r\n&gt;         at org.apache.batik.ext.awt.image.rendered.PadRed.copyData(PadRed.java:88)\r\n&gt;         at org.apache.batik.gvt.renderer.StaticRenderer.repaint(StaticRenderer.java:393)\r\n&gt;         at org.apache.batik.gvt.renderer.StaticRenderer.repaint(StaticRenderer.java:343)\r\n&gt;         at org.apache.batik.transcoder.image.ImageTranscoder.transcode(ImageTranscoder.java:111)\r\n&gt;         ... 6 more ... error (SVGConverter.error.while.rasterizing.file)","title":"Batik 1.14 error when trying to rasterize SVG file","body":"<p>In Windows 10 x64 with Java 8.281, I have downloaded BATIK 1.14 binaries from:\n<a href=\"https://xmlgraphics.apache.org/batik/download.html\" rel=\"nofollow noreferrer\">https://xmlgraphics.apache.org/batik/download.html</a></p>\n<p>In a Windows command prompt, I tried to rasterize one of the included SVG files, but it did not work:</p>\n<blockquote>\n<p>C:\\COMP_CLI_Tools\\batik-bin-1.14\\batik-1.14&gt;java -jar\nbatik-rasterizer-1.14.jar samples\\textRotateShadows.svg About to\ntranscode 1 SVG file(s)</p>\n<p>Converting textRotateShadows.svg to samples\\textRotateShadows.png ...\norg.apache.batik.transcoder.TranscoderException: null Enclosed\nException: Unable to transform src image\nat org.apache.batik.transcoder.image.ImageTranscoder.transcode(ImageTranscoder.java:132)\nat org.apache.batik.transcoder.XMLAbstractTranscoder.transcode(XMLAbstractTranscoder.java:142)\nat org.apache.batik.transcoder.SVGAbstractTranscoder.transcode(SVGAbstractTranscoder.java:158)\nat org.apache.batik.apps.rasterizer.SVGConverter.transcode(SVGConverter.java:1008)\nat org.apache.batik.apps.rasterizer.SVGConverter.execute(SVGConverter.java:719)\nat org.apache.batik.apps.rasterizer.Main.execute(Main.java:954)\nat org.apache.batik.apps.rasterizer.Main.main(Main.java:1007) Caused by: java.awt.image.ImagingOpException: Unable to transform src\nimage\nat java.awt.image.AffineTransformOp.filter(AffineTransformOp.java:358)\nat org.apache.batik.ext.awt.image.rendered.AffineRed.genRect(AffineRed.java:193)\nat org.apache.batik.ext.awt.image.rendered.AffineRed.copyData(AffineRed.java:109)\nat org.apache.batik.ext.awt.image.rendered.PadRed.copyData(PadRed.java:88)\nat org.apache.batik.ext.awt.image.rendered.PadRed.copyData(PadRed.java:88)\nat org.apache.batik.ext.awt.image.rendered.Any2sRGBRed.copyData(Any2sRGBRed.java:166)\nat org.apache.batik.ext.awt.image.rendered.AbstractRed.getData(AbstractRed.java:523)\nat org.apache.batik.ext.awt.image.GraphicsUtil.drawImage(GraphicsUtil.java:264)\nat org.apache.batik.ext.awt.image.GraphicsUtil.drawImage(GraphicsUtil.java:455)\nat org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:550)\nat org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\nat org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\nat org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\nat org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\nat org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\nat org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\nat org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\nat org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\nat org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\nat org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\nat org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\nat org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\nat org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\nat org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\nat org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\nat org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\nat org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\nat org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\nat org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\nat org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\nat org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\nat org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\nat org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\nat org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\nat org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\nat org.apache.batik.gvt.filter.GraphicsNodeRed8Bit.genRect(GraphicsNodeRed8Bit.java:141)\nat org.apache.batik.gvt.filter.GraphicsNodeRed8Bit.copyData(GraphicsNodeRed8Bit.java:117)\nat org.apache.batik.ext.awt.image.rendered.PadRed.copyData(PadRed.java:88)\nat org.apache.batik.ext.awt.image.rendered.PadRed.copyData(PadRed.java:88)\nat org.apache.batik.ext.awt.image.rendered.Any2LsRGBRed.copyData(Any2LsRGBRed.java:109)\nat org.apache.batik.ext.awt.image.rendered.GaussianBlurRed8Bit.copyData(GaussianBlurRed8Bit.java:232)\nat org.apache.batik.ext.awt.image.rendered.AbstractRed.getData(AbstractRed.java:523)\nat org.apache.batik.ext.awt.image.rendered.AffineRed.genRect(AffineRed.java:146)\nat org.apache.batik.ext.awt.image.rendered.AffineRed.copyData(AffineRed.java:109)\nat org.apache.batik.ext.awt.image.rendered.PadRed.copyData(PadRed.java:88)\nat org.apache.batik.ext.awt.image.rendered.PadRed.copyData(PadRed.java:88)\nat org.apache.batik.ext.awt.image.rendered.Any2sRGBRed.copyData(Any2sRGBRed.java:166)\nat org.apache.batik.ext.awt.image.GraphicsUtil.drawImage(GraphicsUtil.java:347)\nat org.apache.batik.ext.awt.image.GraphicsUtil.drawImage(GraphicsUtil.java:455)\nat org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:550)\nat org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\nat org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\nat org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\nat org.apache.batik.gvt.CanvasGraphicsNode.primitivePaint(CanvasGraphicsNode.java:159)\nat org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:509)\nat org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:165)\nat org.apache.batik.gvt.filter.GraphicsNodeRed8Bit.genRect(GraphicsNodeRed8Bit.java:141)\nat org.apache.batik.gvt.filter.GraphicsNodeRed8Bit.copyData(GraphicsNodeRed8Bit.java:117)\nat org.apache.batik.ext.awt.image.rendered.TileCacheRed.genRect(TileCacheRed.java:63)\nat org.apache.batik.ext.awt.image.rendered.AbstractTiledRed.drawBlockInPlace(AbstractTiledRed.java:625)\nat org.apache.batik.ext.awt.image.rendered.AbstractTiledRed.drawBlock(AbstractTiledRed.java:544)\nat org.apache.batik.ext.awt.image.rendered.AbstractTiledRed.copyToRasterByBlocks(AbstractTiledRed.java:430)\nat org.apache.batik.ext.awt.image.rendered.AbstractTiledRed.copyData(AbstractTiledRed.java:297)\nat org.apache.batik.ext.awt.image.rendered.TranslateRed.copyData(TranslateRed.java:105)\nat org.apache.batik.ext.awt.image.rendered.PadRed.copyData(PadRed.java:88)\nat org.apache.batik.gvt.renderer.StaticRenderer.repaint(StaticRenderer.java:393)\nat org.apache.batik.gvt.renderer.StaticRenderer.repaint(StaticRenderer.java:343)\nat org.apache.batik.transcoder.image.ImageTranscoder.transcode(ImageTranscoder.java:111)\n... 6 more ... error (SVGConverter.error.while.rasterizing.file)</p>\n</blockquote>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":22365443,"reputation":396,"user_id":16581317,"display_name":"Youssef Idraiss"},"score":0,"creation_date":1640060941,"post_id":70430590,"comment_id":124500037,"body_markdown":"Prog_G i have a reference to the one I&#39;m willing to delete, so I use : departments.remove(department);","body":"Prog_G i have a reference to the one I&#39;m willing to delete, so I use : departments.remove(department);"},{"owner":{"account_id":1324952,"reputation":5977,"user_id":1270000,"accept_rate":100,"display_name":"sorifiend"},"score":1,"creation_date":1640062301,"post_id":70430590,"comment_id":124500271,"body_markdown":"The quick answer is to simply make a new stream again using `stream.flatMap` once the department has been removed, or iterate your employees list and remove them prior to deleting the department (Possible issues with duplicates?).","body":"The quick answer is to simply make a new stream again using <code>stream.flatMap</code> once the department has been removed, or iterate your employees list and remove them prior to deleting the department (Possible issues with duplicates?)."},{"owner":{"account_id":22365443,"reputation":396,"user_id":16581317,"display_name":"Youssef Idraiss"},"score":0,"creation_date":1640062438,"post_id":70430590,"comment_id":124500291,"body_markdown":"@sorifiend that&#39;s exactly what i thought to do, i was wondering if there will be better option, but it doesn&#39;t look so","body":"@sorifiend that&#39;s exactly what i thought to do, i was wondering if there will be better option, but it doesn&#39;t look so"},{"owner":{"account_id":1324952,"reputation":5977,"user_id":1270000,"accept_rate":100,"display_name":"sorifiend"},"score":1,"creation_date":1640062484,"post_id":70430590,"comment_id":124500300,"body_markdown":"If your list is not large then it&#39;s your best bet.","body":"If your list is not large then it&#39;s your best bet."},{"owner":{"account_id":8026267,"reputation":4734,"user_id":6053084,"display_name":"Turo"},"score":0,"creation_date":1640076926,"post_id":70430590,"comment_id":124503567,"body_markdown":"You could write a read-only List-Implementation backed by your Department-List. But there would be probably a bad performance when you access the List per get(index).","body":"You could write a read-only List-Implementation backed by your Department-List. But there would be probably a bad performance when you access the List per get(index)."}],"answers":[{"tags":[],"owner":{"account_id":10481421,"reputation":1559,"user_id":7726319,"accept_rate":0,"display_name":"Prog_G"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1640064211,"creation_date":1640061646,"answer_id":70430760,"question_id":70430590,"body_markdown":"There is no direct way to automatically delete the objects from the employee list. You can use one of the below options:\r\n\r\n**Option 1:**\r\nFirst, delete all the employees of the to-be-deleted department and delete the department from the department list.  \r\n\r\n    employees.removeAll(departement2.getEmployeesList());\r\n    departments.remove(departement2);\r\n\r\n**Option 2:**\r\nDelete the department from the department list and then recreate the employee list:\r\n\r\n    departments.remove(departement2);\r\n    employees = departments.stream().flatMap(departement -&gt;departement.getEmployeesList().stream()).collect(Collectors.toList());\r\n\r\n","title":"How to delete children objects in list made by stream.flatMap when parent gets deleted?","body":"<p>There is no direct way to automatically delete the objects from the employee list. You can use one of the below options:</p>\n<p><strong>Option 1:</strong>\nFirst, delete all the employees of the to-be-deleted department and delete the department from the department list.</p>\n<pre><code>employees.removeAll(departement2.getEmployeesList());\ndepartments.remove(departement2);\n</code></pre>\n<p><strong>Option 2:</strong>\nDelete the department from the department list and then recreate the employee list:</p>\n<pre><code>departments.remove(departement2);\nemployees = departments.stream().flatMap(departement -&gt;departement.getEmployeesList().stream()).collect(Collectors.toList());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8026267,"reputation":4734,"user_id":6053084,"display_name":"Turo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640082957,"creation_date":1640081961,"answer_id":70433861,"question_id":70430590,"body_markdown":"Just to try it I implemented a generic Type of a List backed by a parent List:\r\n\r\n    public class FlatMapList&lt;C,P&gt; implements List&lt;C&gt;\r\n    {\r\n    \r\n        private Function&lt;P,List&lt;C&gt;&gt; getter;\r\n        private List&lt;P&gt; parents;\r\n    \r\n    \r\n        public FlatMapList(List&lt;P&gt; parents, Function&lt;P,List&lt;C&gt;&gt; getter)\r\n        {\r\n           this.parents = parents;\r\n           this.getter = getter;\r\n    \r\n        }\r\n    \r\n        @Override\r\n        public int size()\r\n        {\r\n            return getList().size();\r\n        }\r\n    \r\n        @Override\r\n        public boolean isEmpty()\r\n        {\r\n            return getList().isEmpty();\r\n        }\r\n    \r\n        @Override\r\n        public boolean contains(Object o)\r\n        {\r\n            return getList().contains(o);\r\n        }\r\n    \r\n        @Override\r\n        public Iterator&lt;C&gt; iterator()\r\n        {\r\n            return getList().iterator();\r\n        }\r\n    \r\n        @Override\r\n        public Object[] toArray()\r\n        {\r\n            return getList().toArray();\r\n        }\r\n    \r\n        @Override\r\n        public &lt;T&gt; T[] toArray(T[] a)\r\n        {\r\n            return getList().toArray(a);\r\n        }\r\n    \r\n        @Override\r\n        public boolean add(C e)\r\n        {\r\n            throw new UnsupportedOperationException(&quot;List is readonly&quot;);\r\n        }\r\n    \r\n        @Override\r\n        public boolean remove(Object o)\r\n        {\r\n            throw new UnsupportedOperationException(&quot;List is readonly&quot;);\r\n        }\r\n    \r\n        @Override\r\n        public boolean containsAll(Collection&lt;?&gt; c)\r\n        {\r\n            throw new UnsupportedOperationException(&quot;List is readonly&quot;);\r\n        }\r\n    \r\n        @Override\r\n        public boolean addAll(Collection&lt;? extends C&gt; c)\r\n        {\r\n            throw new UnsupportedOperationException(&quot;List is readonly&quot;);\r\n        }\r\n    \r\n        @Override\r\n        public boolean addAll(int index, Collection&lt;? extends C&gt; c)\r\n        {\r\n            throw new UnsupportedOperationException(&quot;List is readonly&quot;);\r\n        }\r\n    \r\n        @Override\r\n        public boolean removeAll(Collection&lt;?&gt; c)\r\n        {\r\n            throw new UnsupportedOperationException(&quot;List is readonly&quot;);\r\n        }\r\n    \r\n        @Override\r\n        public boolean retainAll(Collection&lt;?&gt; c)\r\n        {\r\n            throw new UnsupportedOperationException(&quot;List is readonly&quot;);\r\n        }\r\n    \r\n        @Override\r\n        public void clear()\r\n        {\r\n            throw new UnsupportedOperationException(&quot;List is readonly&quot;);\r\n        }\r\n    \r\n        @Override\r\n        public C get(int index)\r\n        {\r\n            return getList().get(index);\r\n        }\r\n    \r\n        @Override\r\n        public C set(int index, C element)\r\n        {\r\n            throw new UnsupportedOperationException(&quot;List is readonly&quot;);\r\n        }\r\n    \r\n        @Override\r\n        public void add(int index, C element)\r\n        {\r\n            throw new UnsupportedOperationException(&quot;List is readonly&quot;);\r\n    \r\n        }\r\n    \r\n        @Override\r\n        public C remove(int index)\r\n        {\r\n            throw new UnsupportedOperationException(&quot;List is readonly&quot;);\r\n        }\r\n    \r\n        @Override\r\n        public int indexOf(Object o)\r\n        {\r\n            return getList().indexOf(o);\r\n        }\r\n    \r\n        @Override\r\n        public int lastIndexOf(Object o)\r\n        {\r\n            return getList().lastIndexOf(o);\r\n        }\r\n    \r\n        @Override\r\n        public ListIterator&lt;C&gt; listIterator()\r\n        {\r\n            return getList().listIterator();\r\n        }\r\n    \r\n        @Override\r\n        public ListIterator&lt;C&gt; listIterator(int index)\r\n        {\r\n            return getList().listIterator(index);\r\n        }\r\n    \r\n        @Override\r\n        public List&lt;C&gt; subList(int fromIndex, int toIndex)\r\n        {\r\n            return getList().subList(fromIndex,toIndex);\r\n        }\r\n    \r\n        @Override\r\n        public String toString( ) {\r\n            return getList().toString();\r\n        }\r\n    \r\n        private List&lt;C&gt; getList() {\r\n            return Collections.unmodifiableList(parents.stream().flatMap(p -&gt;\r\n                this.getter.apply(p).stream()).collect(Collectors.toList()));\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n    \r\n           Department dep1 = new Department();\r\n           dep1.setName(&quot;D1&quot;);\r\n           dep1.setEmployeesList(Arrays.asList(new Employee(&quot;e1&quot;),new Employee(&quot;e2&quot;)));\r\n           Department dep2 = new Department();\r\n           dep2.setName(&quot;D2&quot;);\r\n           dep2.setEmployeesList(Arrays.asList(new Employee(&quot;e3&quot;),new Employee(&quot;e4&quot;)));\r\n           List&lt;Department&gt; deps = new ArrayList&lt;&gt;(Arrays.asList(dep1,dep2));\r\n    \r\n           // Create a List backed with the parent list and the getter for the children\r\n           List&lt;Employee&gt; employees = new FlatMapList&lt;&gt;(deps,Department::getEmployeesList);\r\n           System.out.println(employees);\r\n           deps.remove(dep1);\r\n           System.out.println(employees);\r\n    \r\n        }\r\n    }\r\n\r\n\r\n**Output**\r\n\r\n    [Employee [name=e1], Employee [name=e2], Employee [name=e3], Employee [name=e4]] \r\n    [Employee [name=e3], Employee [name=e4]]\r\n\r\n","title":"How to delete children objects in list made by stream.flatMap when parent gets deleted?","body":"<p>Just to try it I implemented a generic Type of a List backed by a parent List:</p>\n<pre><code>public class FlatMapList&lt;C,P&gt; implements List&lt;C&gt;\n{\n\n    private Function&lt;P,List&lt;C&gt;&gt; getter;\n    private List&lt;P&gt; parents;\n\n\n    public FlatMapList(List&lt;P&gt; parents, Function&lt;P,List&lt;C&gt;&gt; getter)\n    {\n       this.parents = parents;\n       this.getter = getter;\n\n    }\n\n    @Override\n    public int size()\n    {\n        return getList().size();\n    }\n\n    @Override\n    public boolean isEmpty()\n    {\n        return getList().isEmpty();\n    }\n\n    @Override\n    public boolean contains(Object o)\n    {\n        return getList().contains(o);\n    }\n\n    @Override\n    public Iterator&lt;C&gt; iterator()\n    {\n        return getList().iterator();\n    }\n\n    @Override\n    public Object[] toArray()\n    {\n        return getList().toArray();\n    }\n\n    @Override\n    public &lt;T&gt; T[] toArray(T[] a)\n    {\n        return getList().toArray(a);\n    }\n\n    @Override\n    public boolean add(C e)\n    {\n        throw new UnsupportedOperationException(&quot;List is readonly&quot;);\n    }\n\n    @Override\n    public boolean remove(Object o)\n    {\n        throw new UnsupportedOperationException(&quot;List is readonly&quot;);\n    }\n\n    @Override\n    public boolean containsAll(Collection&lt;?&gt; c)\n    {\n        throw new UnsupportedOperationException(&quot;List is readonly&quot;);\n    }\n\n    @Override\n    public boolean addAll(Collection&lt;? extends C&gt; c)\n    {\n        throw new UnsupportedOperationException(&quot;List is readonly&quot;);\n    }\n\n    @Override\n    public boolean addAll(int index, Collection&lt;? extends C&gt; c)\n    {\n        throw new UnsupportedOperationException(&quot;List is readonly&quot;);\n    }\n\n    @Override\n    public boolean removeAll(Collection&lt;?&gt; c)\n    {\n        throw new UnsupportedOperationException(&quot;List is readonly&quot;);\n    }\n\n    @Override\n    public boolean retainAll(Collection&lt;?&gt; c)\n    {\n        throw new UnsupportedOperationException(&quot;List is readonly&quot;);\n    }\n\n    @Override\n    public void clear()\n    {\n        throw new UnsupportedOperationException(&quot;List is readonly&quot;);\n    }\n\n    @Override\n    public C get(int index)\n    {\n        return getList().get(index);\n    }\n\n    @Override\n    public C set(int index, C element)\n    {\n        throw new UnsupportedOperationException(&quot;List is readonly&quot;);\n    }\n\n    @Override\n    public void add(int index, C element)\n    {\n        throw new UnsupportedOperationException(&quot;List is readonly&quot;);\n\n    }\n\n    @Override\n    public C remove(int index)\n    {\n        throw new UnsupportedOperationException(&quot;List is readonly&quot;);\n    }\n\n    @Override\n    public int indexOf(Object o)\n    {\n        return getList().indexOf(o);\n    }\n\n    @Override\n    public int lastIndexOf(Object o)\n    {\n        return getList().lastIndexOf(o);\n    }\n\n    @Override\n    public ListIterator&lt;C&gt; listIterator()\n    {\n        return getList().listIterator();\n    }\n\n    @Override\n    public ListIterator&lt;C&gt; listIterator(int index)\n    {\n        return getList().listIterator(index);\n    }\n\n    @Override\n    public List&lt;C&gt; subList(int fromIndex, int toIndex)\n    {\n        return getList().subList(fromIndex,toIndex);\n    }\n\n    @Override\n    public String toString( ) {\n        return getList().toString();\n    }\n\n    private List&lt;C&gt; getList() {\n        return Collections.unmodifiableList(parents.stream().flatMap(p -&gt;\n            this.getter.apply(p).stream()).collect(Collectors.toList()));\n    }\n\n    public static void main(String[] args) {\n\n       Department dep1 = new Department();\n       dep1.setName(&quot;D1&quot;);\n       dep1.setEmployeesList(Arrays.asList(new Employee(&quot;e1&quot;),new Employee(&quot;e2&quot;)));\n       Department dep2 = new Department();\n       dep2.setName(&quot;D2&quot;);\n       dep2.setEmployeesList(Arrays.asList(new Employee(&quot;e3&quot;),new Employee(&quot;e4&quot;)));\n       List&lt;Department&gt; deps = new ArrayList&lt;&gt;(Arrays.asList(dep1,dep2));\n\n       // Create a List backed with the parent list and the getter for the children\n       List&lt;Employee&gt; employees = new FlatMapList&lt;&gt;(deps,Department::getEmployeesList);\n       System.out.println(employees);\n       deps.remove(dep1);\n       System.out.println(employees);\n\n    }\n}\n</code></pre>\n<p><strong>Output</strong></p>\n<pre><code>[Employee [name=e1], Employee [name=e2], Employee [name=e3], Employee [name=e4]] \n[Employee [name=e3], Employee [name=e4]]\n</code></pre>\n"}],"owner":{"account_id":22365443,"reputation":396,"user_id":16581317,"display_name":"Youssef Idraiss"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":449,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":70430760,"answer_count":2,"score":0,"last_activity_date":1640082957,"creation_date":1640059842,"question_id":70430590,"body_markdown":"Let&#39;s say I have a department class that contains a list of employees, as follows: \r\n\r\n    public class Departement {\r\n        List&lt;Employees&gt; employeesList;\r\n    \r\n        public List&lt;Employees&gt; getEmployeesList() {\r\n            return employeesList;\r\n        }\r\n    \r\n        public Departement setEmployeesList(List&lt;Employees&gt; employeesList) {\r\n            this.employeesList = employeesList;\r\n            return this;\r\n        }\r\n    }\r\n\r\nThere is a case where I need all employees on a separate list. To do that I&#39;m  using streams, as follows: \r\n\r\n    List&lt;Departement&gt; departments ...\r\n    List&lt;Employees&gt; employees = departments.stream().flatMap(departement -&gt; \r\n    departement.getEmployeesList().stream()).collect(Collectors.toList()));\r\n\r\nIn case I delete a department in the department list, is there a way to automatically delete its employees in the employees list made by `stream.flatMap`?","title":"How to delete children objects in list made by stream.flatMap when parent gets deleted?","body":"<p>Let's say I have a department class that contains a list of employees, as follows:</p>\n<pre><code>public class Departement {\n    List&lt;Employees&gt; employeesList;\n\n    public List&lt;Employees&gt; getEmployeesList() {\n        return employeesList;\n    }\n\n    public Departement setEmployeesList(List&lt;Employees&gt; employeesList) {\n        this.employeesList = employeesList;\n        return this;\n    }\n}\n</code></pre>\n<p>There is a case where I need all employees on a separate list. To do that I'm  using streams, as follows:</p>\n<pre><code>List&lt;Departement&gt; departments ...\nList&lt;Employees&gt; employees = departments.stream().flatMap(departement -&gt; \ndepartement.getEmployeesList().stream()).collect(Collectors.toList()));\n</code></pre>\n<p>In case I delete a department in the department list, is there a way to automatically delete its employees in the employees list made by <code>stream.flatMap</code>?</p>\n"},{"tags":["java","proguard"],"answers":[{"tags":[],"owner":{"account_id":8497379,"reputation":21,"user_id":6371567,"display_name":"user6371567"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640082789,"creation_date":1640082789,"answer_id":70434038,"question_id":70393883,"body_markdown":"So, it turned out that with new versions, the notation is not as it once was.\r\n\r\n    &lt;taskdef resource=&quot;proguard/ant/task.properties&quot; classpath=&quot;${proguard.path}/lib/proguard-ant.jar&quot; /&gt;","title":"Java and ProGuard - taskdef class proguard.ant.ProGuardTask cannot be found using the classloader AntClassLoader","body":"<p>So, it turned out that with new versions, the notation is not as it once was.</p>\n<pre><code>&lt;taskdef resource=&quot;proguard/ant/task.properties&quot; classpath=&quot;${proguard.path}/lib/proguard-ant.jar&quot; /&gt;\n</code></pre>\n"}],"owner":{"account_id":8497379,"reputation":21,"user_id":6371567,"display_name":"user6371567"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":155,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1640082789,"creation_date":1639747512,"question_id":70393883,"body_markdown":"I have the pleasure of working on a embeded java program, which was writen 10+ years ago from a third party company. Source and project files were included.\r\n\r\nIt was imported into Eclipse and ported to a higher java version (17).\r\n\r\nNow I&#39;m stuck when trying to build the program. It uses ProGuard. The newest version was added to the project files. Config file proguard.pro was changed to discard rt.jar utilization in favore of the new methods. However, now I&#39;m getting a error message:\r\n\r\n    BUILD FAILED\r\n    C:\\mypath\\build.xml:16: taskdef class proguard.ant.ProGuardTask cannot be found\r\n     using the classloader AntClassLoader[C:\\mypath\\obf\\proguard.jar]\r\n\r\n\r\nbuild.xml (original) is as follows:\r\n\r\n    &lt;target name=&quot;obfuscate&quot; description=&quot;obfuscate a jar file&quot; depends=&quot;jar&quot;&gt;\r\n    \t&lt;taskdef name=&quot;proguard&quot; classname=&quot;proguard.ant.ProGuardTask&quot; classpath=&quot;obf/proguard.jar&quot; /&gt;\r\n    \t&lt;proguard configuration=&quot;obf/proguard.pro&quot; /&gt;\r\n    &lt;/target&gt;\r\n\r\nThe &#39;obf&#39; folder is inside the project (sublevel of build.xml). File proguard.jar is inside of it. Anyone haveing any clues why would this error show? No other changes were made beside the listed ones.","title":"Java and ProGuard - taskdef class proguard.ant.ProGuardTask cannot be found using the classloader AntClassLoader","body":"<p>I have the pleasure of working on a embeded java program, which was writen 10+ years ago from a third party company. Source and project files were included.</p>\n<p>It was imported into Eclipse and ported to a higher java version (17).</p>\n<p>Now I'm stuck when trying to build the program. It uses ProGuard. The newest version was added to the project files. Config file proguard.pro was changed to discard rt.jar utilization in favore of the new methods. However, now I'm getting a error message:</p>\n<pre><code>BUILD FAILED\nC:\\mypath\\build.xml:16: taskdef class proguard.ant.ProGuardTask cannot be found\n using the classloader AntClassLoader[C:\\mypath\\obf\\proguard.jar]\n</code></pre>\n<p>build.xml (original) is as follows:</p>\n<pre><code>&lt;target name=&quot;obfuscate&quot; description=&quot;obfuscate a jar file&quot; depends=&quot;jar&quot;&gt;\n    &lt;taskdef name=&quot;proguard&quot; classname=&quot;proguard.ant.ProGuardTask&quot; classpath=&quot;obf/proguard.jar&quot; /&gt;\n    &lt;proguard configuration=&quot;obf/proguard.pro&quot; /&gt;\n&lt;/target&gt;\n</code></pre>\n<p>The 'obf' folder is inside the project (sublevel of build.xml). File proguard.jar is inside of it. Anyone haveing any clues why would this error show? No other changes were made beside the listed ones.</p>\n"},{"tags":["java","logging","configuration","log4j","log4j2"],"answers":[{"tags":[],"owner":{"account_id":1891192,"reputation":8826,"user_id":1709216,"display_name":"rgoers"},"down_vote_count":1,"up_vote_count":10,"is_accepted":true,"score":9,"last_activity_date":1631662392,"creation_date":1460750070,"answer_id":36655789,"question_id":36655486,"body_markdown":"[The Charset is specified on the Layout. `AbstractStringLayout` defaults to UTF-8.](https://logging.apache.org/log4j/log4j-2.5/manual/layouts.html)\r\n\r\nYou should be able to change that by specifying `charset=&quot;UTF-16&quot;` on the Layout configuration.","title":"What does log4j2 file appenders use for file encoding/format?","body":"<p><a href=\"https://logging.apache.org/log4j/log4j-2.5/manual/layouts.html\" rel=\"nofollow noreferrer\">The Charset is specified on the Layout. <code>AbstractStringLayout</code> defaults to UTF-8.</a></p>\n<p>You should be able to change that by specifying <code>charset=&quot;UTF-16&quot;</code> on the Layout configuration.</p>\n"},{"tags":[],"owner":{"account_id":1555751,"reputation":35615,"user_id":1446916,"display_name":"Remko Popma"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1460785511,"creation_date":1460785511,"answer_id":36660604,"question_id":36655486,"body_markdown":"Small correction on Ralph&#39;s answer: for PatternLayout the default charset is the *system default*. This is important because for example the Windows console won&#39;t be able to correctly display UTF-8 on Japanese Windows. ","title":"What does log4j2 file appenders use for file encoding/format?","body":"<p>Small correction on Ralph's answer: for PatternLayout the default charset is the <em>system default</em>. This is important because for example the Windows console won't be able to correctly display UTF-8 on Japanese Windows. </p>\n"},{"tags":[],"owner":{"account_id":2293223,"reputation":556,"user_id":2015398,"display_name":"user2015398"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640082661,"creation_date":1640082661,"answer_id":70434017,"question_id":36655486,"body_markdown":"If you use log4j.properties, configure it as follow:\r\n\r\n    appender.rolling.layout.charset = UTF-16\r\n\r\nor make the corresponding configurations in your xml configuration file.","title":"What does log4j2 file appenders use for file encoding/format?","body":"<p>If you use log4j.properties, configure it as follow:</p>\n<pre><code>appender.rolling.layout.charset = UTF-16\n</code></pre>\n<p>or make the corresponding configurations in your xml configuration file.</p>\n"}],"owner":{"account_id":2344416,"reputation":340,"user_id":2055044,"display_name":"Adam Marcionek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7499,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":36655789,"answer_count":3,"score":12,"last_activity_date":1640082661,"creation_date":1460748837,"question_id":36655486,"body_markdown":"What file format does log4j2 use when it writes to rollingfileappender? Furthermore, is there a way to change it?  What I&#39;d like to do use use UTF-16.","title":"What does log4j2 file appenders use for file encoding/format?","body":"<p>What file format does log4j2 use when it writes to rollingfileappender? Furthermore, is there a way to change it?  What I'd like to do use use UTF-16.</p>\n"},{"tags":["java","spring-boot","validation","spring-restcontroller","spring-validator"],"comments":[{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1640082585,"post_id":70433703,"comment_id":124505566,"body_markdown":"Have you tried to change the order of the annotations?","body":"Have you tried to change the order of the annotations?"},{"owner":{"account_id":16092544,"reputation":822,"user_id":11615575,"display_name":"Andrei Manolache"},"score":0,"creation_date":1640083072,"post_id":70433703,"comment_id":124505736,"body_markdown":"Yes, didn&#39;t work.","body":"Yes, didn&#39;t work."}],"answers":[{"tags":[],"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640082589,"creation_date":1640082589,"answer_id":70433997,"question_id":70433703,"body_markdown":"This could be because you have applied `@CustomValidator` annotation at class Level, and classes are loaded first before properties, and that could be the reason you see this order or execution.\r\n\r\nYou have a few options:\r\n\r\n1- Apply this `@CustomValidator` at specific property level,\r\n\r\n2- Set your `CustomValidator` as a `@Component`, and remove the `@CustomValidator` annotation from the class level.   Then in your controller method you do:\r\n\r\n       @Autowired\r\n       private CustomValidator customValidator;\r\n    \r\n        @PostMapping(value = &quot;/blablabla/&quot;, consumes = MediaType.APPLICATION_JSON_VALUE)\r\n        public List&lt;Object&gt; createDisconnectRequestRest(@RequestBody List&lt;@Valid RequestObj&gt; dtos) { // here at the validators is the question\r\n            customValidator.validate(xyz);\r\n        }\r\n\r\n--- Untested Theory ---\r\n\r\nCould you try with changing the order of the annotations applied at the method level and see if it makes a difference:\r\n\r\n\r\n    @PostMapping(value = &quot;/blablabla/&quot;, consumes = MediaType.APPLICATION_JSON_VALUE)\r\n    public List&lt;Object&gt; createDisconnectRequestRest(@RequestBody List&lt;@Valid @CustomValidator RequestObj&gt; dtos) { // here at the validators is the question\r\n        ... //nevermind\r\n       return null;\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"How to specify order validation in Request body Spring Boot Rest Controller","body":"<p>This could be because you have applied <code>@CustomValidator</code> annotation at class Level, and classes are loaded first before properties, and that could be the reason you see this order or execution.</p>\n<p>You have a few options:</p>\n<p>1- Apply this <code>@CustomValidator</code> at specific property level,</p>\n<p>2- Set your <code>CustomValidator</code> as a <code>@Component</code>, and remove the <code>@CustomValidator</code> annotation from the class level.   Then in your controller method you do:</p>\n<pre><code>   @Autowired\n   private CustomValidator customValidator;\n\n    @PostMapping(value = &quot;/blablabla/&quot;, consumes = MediaType.APPLICATION_JSON_VALUE)\n    public List&lt;Object&gt; createDisconnectRequestRest(@RequestBody List&lt;@Valid RequestObj&gt; dtos) { // here at the validators is the question\n        customValidator.validate(xyz);\n    }\n</code></pre>\n<p>--- Untested Theory ---</p>\n<p>Could you try with changing the order of the annotations applied at the method level and see if it makes a difference:</p>\n<pre><code>@PostMapping(value = &quot;/blablabla/&quot;, consumes = MediaType.APPLICATION_JSON_VALUE)\npublic List&lt;Object&gt; createDisconnectRequestRest(@RequestBody List&lt;@Valid @CustomValidator RequestObj&gt; dtos) { // here at the validators is the question\n    ... //nevermind\n   return null;\n}\n</code></pre>\n"}],"owner":{"account_id":16092544,"reputation":822,"user_id":11615575,"display_name":"Andrei Manolache"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1135,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1640082589,"creation_date":1640081306,"question_id":70433703,"body_markdown":"So I have a ```Rest Controller``` in ```Spring Boot``` and for an endpoint, I need to validate its ```Request Body```.\r\n\r\nController:\r\n\r\n&lt;br&gt;\r\n\r\n    @RestController\r\n    @Validated\r\n    @RequestMapping(&quot;/my_endpoint&quot;)\r\n    public class WorkflowController {\r\n    \r\n        @PostMapping(value = &quot;/blablabla/&quot;, consumes = MediaType.APPLICATION_JSON_VALUE)\r\n        public List&lt;Object&gt; createDisconnectRequestRest(@RequestBody List&lt;@CustomValidator @Valid RequestObj&gt; dtos) { // here at the validators is the question\r\n            ... //nevermind\r\n           return null;\r\n        }\r\n\r\nRequest object:\r\n\r\n    @Data\r\n    public class RequestObj{\r\n    \r\n        private String comment;\r\n    \r\n        @NotNull // this @NotNull annotation validator is triggered AFTER the custom validator is done. I want this to be first validated and then the custom validator should take place\r\n        private List&lt;Long&gt; ids = new ArrayList&lt;&gt;();\r\n    }\r\n\r\n\r\n\r\n    @Target({FIELD, TYPE_USE})\r\n    @Retention(RUNTIME)\r\n    @Constraint(validatedBy = CustomValidator.class)\r\n    @Documented\r\n    public @interface ValidRequest {\r\n    \r\n        String message() default &quot;Invalid request&quot;;\r\n    \r\n        Class&lt;?&gt;[] groups() default {};\r\n    \r\n        Class&lt;? extends Payload&gt;[] payload() default {};\r\n    }\r\n\r\n\r\n&lt;br&gt;\r\n\r\nCustomValidator:\r\n\r\n    public class CustomValidator implements ConstraintValidator&lt;ValidRequest, RequestObj&gt; {\r\n    \r\n     // repositories, constructor \r\n    \r\n        @Override\r\n        public boolean isValid(RequestObj request, ConstraintValidatorContext constraintValidatorContext) {\r\n         \r\n             myRepository.findAllById(request.getIds()); // I want the @NotNull annotation validate the object before this custom validator\r\n    \r\n            return true;\r\n        }\r\n    }\r\n\r\n\r\n\r\nHere is the **problem**:\r\n\r\nThe first one to be triggered is the **CustomValidator** and then the ```RequestObj``` is being validated. In other words, validation starts with the  ```@CustomValidator``` annotation and then the ```@Valid``` one. I&#39;d like that the first one to be triggered would be the ```@Valid``` annotation (so the ```@NotNull``` annotation would validate the object first) and then the ```@CustomValidator``` should do its job. For example, if the body field ```ids``` is NULL, I&#39;d like that the ```@CustomValidator``` not even start as the validation had already failed.","title":"How to specify order validation in Request body Spring Boot Rest Controller","body":"<p>So I have a <code>Rest Controller</code> in <code>Spring Boot</code> and for an endpoint, I need to validate its <code>Request Body</code>.</p>\n<p>Controller:</p>\n<br>\n<pre><code>@RestController\n@Validated\n@RequestMapping(&quot;/my_endpoint&quot;)\npublic class WorkflowController {\n\n    @PostMapping(value = &quot;/blablabla/&quot;, consumes = MediaType.APPLICATION_JSON_VALUE)\n    public List&lt;Object&gt; createDisconnectRequestRest(@RequestBody List&lt;@CustomValidator @Valid RequestObj&gt; dtos) { // here at the validators is the question\n        ... //nevermind\n       return null;\n    }\n</code></pre>\n<p>Request object:</p>\n<pre><code>@Data\npublic class RequestObj{\n\n    private String comment;\n\n    @NotNull // this @NotNull annotation validator is triggered AFTER the custom validator is done. I want this to be first validated and then the custom validator should take place\n    private List&lt;Long&gt; ids = new ArrayList&lt;&gt;();\n}\n\n\n\n@Target({FIELD, TYPE_USE})\n@Retention(RUNTIME)\n@Constraint(validatedBy = CustomValidator.class)\n@Documented\npublic @interface ValidRequest {\n\n    String message() default &quot;Invalid request&quot;;\n\n    Class&lt;?&gt;[] groups() default {};\n\n    Class&lt;? extends Payload&gt;[] payload() default {};\n}\n</code></pre>\n<br>\n<p>CustomValidator:</p>\n<pre><code>public class CustomValidator implements ConstraintValidator&lt;ValidRequest, RequestObj&gt; {\n\n // repositories, constructor \n\n    @Override\n    public boolean isValid(RequestObj request, ConstraintValidatorContext constraintValidatorContext) {\n     \n         myRepository.findAllById(request.getIds()); // I want the @NotNull annotation validate the object before this custom validator\n\n        return true;\n    }\n}\n</code></pre>\n<p>Here is the <strong>problem</strong>:</p>\n<p>The first one to be triggered is the <strong>CustomValidator</strong> and then the <code>RequestObj</code> is being validated. In other words, validation starts with the  <code>@CustomValidator</code> annotation and then the <code>@Valid</code> one. I'd like that the first one to be triggered would be the <code>@Valid</code> annotation (so the <code>@NotNull</code> annotation would validate the object first) and then the <code>@CustomValidator</code> should do its job. For example, if the body field <code>ids</code> is NULL, I'd like that the <code>@CustomValidator</code> not even start as the validation had already failed.</p>\n"},{"tags":["java","javafx","properties","javafx-8","listener"],"answers":[{"tags":[],"owner":{"account_id":7899184,"reputation":21451,"user_id":5966775,"display_name":"DVarga"},"down_vote_count":0,"up_vote_count":55,"is_accepted":true,"score":55,"last_activity_date":1494826196,"creation_date":1467783268,"answer_id":38216917,"question_id":38216268,"body_markdown":"You can listen to the changes of the [`widthProperty`][1] and the [`heightProperty`][2] of the `Stage`:\r\n\r\n    stage.widthProperty().addListener((obs, oldVal, newVal) -&gt; {\r\n    \t // Do whatever you want\r\n    });\r\n\t\r\n    stage.heightProperty().addListener((obs, oldVal, newVal) -&gt; {\r\n    \t // Do whatever you want\r\n    });\r\n\r\n______________________________________________________\r\n\r\n**Note:** To listen to both width and height changes, the same listener can be used really simply:\r\n\r\n\tChangeListener&lt;Number&gt; stageSizeListener = (observable, oldValue, newValue) -&gt;\r\n\t\tSystem.out.println(&quot;Height: &quot; + stage.getHeight() + &quot; Width: &quot; + stage.getWidth());\r\n\r\n\tstage.widthProperty().addListener(stageSizeListener);\r\n\tstage.heightProperty().addListener(stageSizeListener); \r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/javafx/api/javafx/stage/Window.html#widthProperty--\r\n  [2]: https://docs.oracle.com/javase/8/javafx/api/javafx/stage/Window.html#heightProperty--","title":"How to listen resize event of Stage in JavaFX?","body":"<p>You can listen to the changes of the <a href=\"https://docs.oracle.com/javase/8/javafx/api/javafx/stage/Window.html#widthProperty--\" rel=\"noreferrer\"><code>widthProperty</code></a> and the <a href=\"https://docs.oracle.com/javase/8/javafx/api/javafx/stage/Window.html#heightProperty--\" rel=\"noreferrer\"><code>heightProperty</code></a> of the <code>Stage</code>:</p>\n\n<pre><code>stage.widthProperty().addListener((obs, oldVal, newVal) -&gt; {\n     // Do whatever you want\n});\n\nstage.heightProperty().addListener((obs, oldVal, newVal) -&gt; {\n     // Do whatever you want\n});\n</code></pre>\n\n<hr>\n\n<p><strong>Note:</strong> To listen to both width and height changes, the same listener can be used really simply:</p>\n\n<pre><code>ChangeListener&lt;Number&gt; stageSizeListener = (observable, oldValue, newValue) -&gt;\n    System.out.println(\"Height: \" + stage.getHeight() + \" Width: \" + stage.getWidth());\n\nstage.widthProperty().addListener(stageSizeListener);\nstage.heightProperty().addListener(stageSizeListener); \n</code></pre>\n"},{"tags":[],"owner":{"account_id":7990930,"reputation":4132,"user_id":6028807,"display_name":"Miss Chanandler Bong"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1521650076,"creation_date":1521650076,"answer_id":49411865,"question_id":38216268,"body_markdown":"Keeping a fixed width to height ratio:\r\n\r\n    stage.minHeightProperty().bind(stage.widthProperty().multiply(0.5));\r\n    stage.maxHeightProperty().bind(stage.widthProperty().multiply(0.5));","title":"How to listen resize event of Stage in JavaFX?","body":"<p>Keeping a fixed width to height ratio:</p>\n\n<pre><code>stage.minHeightProperty().bind(stage.widthProperty().multiply(0.5));\nstage.maxHeightProperty().bind(stage.widthProperty().multiply(0.5));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6651349,"reputation":4535,"user_id":7756492,"display_name":"ucMedia"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640082510,"creation_date":1640082510,"answer_id":70433983,"question_id":38216268,"body_markdown":"Cut the long story short :\r\n\r\n    container.widthProperty().addListener(new ChangeListener&lt;Number&gt;() {\r\n            @Override\r\n            public void changed(ObservableValue&lt;? extends Number&gt; observable, Number oldValue, Number newValue) {\r\n                if (newValue.floatValue()!=oldValue.floatValue()) resizeKids(newValue);\r\n            }\r\n        });\r\n\r\n Also you may want to check new width/height with the old values for **prevent duplication**. ","title":"How to listen resize event of Stage in JavaFX?","body":"<p>Cut the long story short :</p>\n<pre><code>container.widthProperty().addListener(new ChangeListener&lt;Number&gt;() {\n        @Override\n        public void changed(ObservableValue&lt;? extends Number&gt; observable, Number oldValue, Number newValue) {\n            if (newValue.floatValue()!=oldValue.floatValue()) resizeKids(newValue);\n        }\n    });\n</code></pre>\n<p>Also you may want to check new width/height with the old values for <strong>prevent duplication</strong>.</p>\n"}],"owner":{"account_id":3557875,"reputation":1330,"user_id":2971117,"accept_rate":90,"display_name":"Amita Patil"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38222,"favorite_count":0,"down_vote_count":1,"up_vote_count":27,"accepted_answer_id":38216917,"answer_count":3,"score":26,"last_activity_date":1640082510,"creation_date":1467778759,"question_id":38216268,"body_markdown":"I want to perform some functionality on resize event of form (or `Scene` or `Stage` whatever it is).\r\n\r\nBut how can I detect resize event of form in JavaFX?","title":"How to listen resize event of Stage in JavaFX?","body":"<p>I want to perform some functionality on resize event of form (or <code>Scene</code> or <code>Stage</code> whatever it is).</p>\n\n<p>But how can I detect resize event of form in JavaFX?</p>\n"},{"tags":["java","spring","spring-boot","filter","spring-security"],"comments":[{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":1,"creation_date":1639702334,"post_id":70387209,"comment_id":124423321,"body_markdown":"why have you created a filter that already exists in spring security? please google the spring security reference and read the chapter on jwt","body":"why have you created a filter that already exists in spring security? please google the spring security reference and read the chapter on jwt"},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1639727001,"post_id":70387209,"comment_id":124427172,"body_markdown":"Your filter is an component, registered as part of the regular filter chain. It isn&#39;t part of the special security filter chain and thus will execute on each request.","body":"Your filter is an component, registered as part of the regular filter chain. It isn&#39;t part of the special security filter chain and thus will execute on each request."}],"answers":[{"tags":[],"owner":{"account_id":4642086,"reputation":23628,"user_id":3761628,"accept_rate":88,"display_name":"eol"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639731565,"creation_date":1639731565,"answer_id":70390638,"question_id":70387209,"body_markdown":"Your `JwtAuthenticationTokenFilter` will be picked up by Spring as a component and will be included in the filter chain and will **not** be automatically excluded through your `SecurityConfig`.\r\n\r\nSo overwriting `shouldNotFilter` seems like a valid approach and should work as expected.\r\n\r\nYou could try to use `request.getRequestURI()` instead of `request.getServletPath()` in order to ensure to match the actual request path. See [this][1] for further details.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/4931323/whats-the-difference-between-getrequesturi-and-getpathinfo-methods-in-httpservl","title":"Extends OncePerRequestFilter bypass specific URL","body":"<p>Your <code>JwtAuthenticationTokenFilter</code> will be picked up by Spring as a component and will be included in the filter chain and will <strong>not</strong> be automatically excluded through your <code>SecurityConfig</code>.</p>\n<p>So overwriting <code>shouldNotFilter</code> seems like a valid approach and should work as expected.</p>\n<p>You could try to use <code>request.getRequestURI()</code> instead of <code>request.getServletPath()</code> in order to ensure to match the actual request path. See <a href=\"https://stackoverflow.com/questions/4931323/whats-the-difference-between-getrequesturi-and-getpathinfo-methods-in-httpservl\">this</a> for further details.</p>\n"},{"tags":[],"owner":{"account_id":22498600,"reputation":46,"user_id":16695223,"display_name":"Vikas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1639824975,"creation_date":1639824975,"answer_id":70402820,"question_id":70387209,"body_markdown":"You can create a simple array inside `JwtAuthenticationTokenFilter` if you want to bypass for multiple Urls.\r\n\r\nFor example:\r\n```\r\n    private static final String[] excluded_urls = {\r\n            &quot;/login&quot;,\r\n            &quot;**/doc.html&quot;\r\n    };\r\n```\r\n\r\nAnd then override `shouldNotFilter` method:\r\n```\r\n    @Override\r\n    protected boolean shouldNotFilter(HttpServletRequest request) throws ServletException {\r\n        String url = request.getRequestURI();\r\n        return Stream.of(excluded_urls).anyMatch(x -&gt; pathMatcher.match(x, url));\r\n    }\r\n```\r\nWhere \r\n```\r\npathMatcher = new AntPathMatcher();\r\n//can be injected or create wherever required\r\n```","title":"Extends OncePerRequestFilter bypass specific URL","body":"<p>You can create a simple array inside <code>JwtAuthenticationTokenFilter</code> if you want to bypass for multiple Urls.</p>\n<p>For example:</p>\n<pre><code>    private static final String[] excluded_urls = {\n            &quot;/login&quot;,\n            &quot;**/doc.html&quot;\n    };\n</code></pre>\n<p>And then override <code>shouldNotFilter</code> method:</p>\n<pre><code>    @Override\n    protected boolean shouldNotFilter(HttpServletRequest request) throws ServletException {\n        String url = request.getRequestURI();\n        return Stream.of(excluded_urls).anyMatch(x -&gt; pathMatcher.match(x, url));\n    }\n</code></pre>\n<p>Where</p>\n<pre><code>pathMatcher = new AntPathMatcher();\n//can be injected or create wherever required\n</code></pre>\n"}],"owner":{"account_id":19609004,"reputation":19,"user_id":14351927,"display_name":"First Rain"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1856,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1640086297,"answer_count":2,"score":0,"last_activity_date":1640082296,"creation_date":1639701501,"question_id":70387209,"body_markdown":"I use Spring Boot 2.5.6. I want to skip specific URL (`/doc.html`).\r\n\r\nI have created a `JwtAuthenticationTokenFilter` extending `OncePerRequestFilter`\r\n\r\n```java\r\n@Component\r\npublic class JwtAuthenticationTokenFilter extends OncePerRequestFilter {\r\n    @Override\r\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain chain)\r\n            throws ServletException, IOException {\r\n        //the logic of authentication\r\n}\r\n```\r\n\r\nAnd then I create `SecurityConfig` extending `WebSecurityConfigurerAdapter`\r\n\r\n```java\r\n@Configuration\r\n@EnableWebSecurity\r\n@EnableGlobalMethodSecurity(prePostEnabled = true, securedEnabled = true)\r\n@Order(1)\r\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n    @Override\r\n    public void configure(WebSecurity web)\r\n            throws Exception {\r\n        web.ignoring()\r\n                .antMatchers(HttpMethod.OPTIONS, &quot;/**&quot;)\r\n                .antMatchers(&quot;/doc.html&quot;);\r\n    }\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity httpSecurity) throws Exception {\r\n        httpSecurity\r\n           .csrf().disable()\r\n           .sessionManagement()\r\n               .sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\r\n           .authorizeRequests()\r\n               .antMatchers(&quot;/doc.html&quot;).anonymous()\r\n               .and()\r\n           .requestMatchers().antMatchers(&quot;/doc.html&quot;);\r\n```\r\n\r\nbut when I access `localhost:8080/doc.html`, the **`/doc.html`** didn&#39;t skip;\r\n\r\nand I also try to override `shouldNotFilter` in `JwtAuthenticationTokenFilter.java`, but it did&#39;t work also:\r\n\r\n```java\r\n@Override\r\n    protected boolean shouldNotFilter(HttpServletRequest request) throws ServletException {\r\n        return (\r\n                new AntPathMatcher().match(&quot;/doc.html&quot;, request.getServletPath()));\r\n    }\r\n```","title":"Extends OncePerRequestFilter bypass specific URL","body":"<p>I use Spring Boot 2.5.6. I want to skip specific URL (<code>/doc.html</code>).</p>\n<p>I have created a <code>JwtAuthenticationTokenFilter</code> extending <code>OncePerRequestFilter</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class JwtAuthenticationTokenFilter extends OncePerRequestFilter {\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain chain)\n            throws ServletException, IOException {\n        //the logic of authentication\n}\n</code></pre>\n<p>And then I create <code>SecurityConfig</code> extending <code>WebSecurityConfigurerAdapter</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebSecurity\n@EnableGlobalMethodSecurity(prePostEnabled = true, securedEnabled = true)\n@Order(1)\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n    @Override\n    public void configure(WebSecurity web)\n            throws Exception {\n        web.ignoring()\n                .antMatchers(HttpMethod.OPTIONS, &quot;/**&quot;)\n                .antMatchers(&quot;/doc.html&quot;);\n    }\n\n    @Override\n    protected void configure(HttpSecurity httpSecurity) throws Exception {\n        httpSecurity\n           .csrf().disable()\n           .sessionManagement()\n               .sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\n           .authorizeRequests()\n               .antMatchers(&quot;/doc.html&quot;).anonymous()\n               .and()\n           .requestMatchers().antMatchers(&quot;/doc.html&quot;);\n</code></pre>\n<p>but when I access <code>localhost:8080/doc.html</code>, the <strong><code>/doc.html</code></strong> didn't skip;</p>\n<p>and I also try to override <code>shouldNotFilter</code> in <code>JwtAuthenticationTokenFilter.java</code>, but it did't work also:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\n    protected boolean shouldNotFilter(HttpServletRequest request) throws ServletException {\n        return (\n                new AntPathMatcher().match(&quot;/doc.html&quot;, request.getServletPath()));\n    }\n</code></pre>\n"},{"tags":["java","selenium-webdriver","xpath","css-selectors","webdriverwait"],"comments":[{"owner":{"account_id":12360572,"reputation":1730,"user_id":9014957,"accept_rate":17,"display_name":"pburgr"},"score":0,"creation_date":1549368103,"post_id":54533783,"comment_id":95869321,"body_markdown":"In case the textarea is not cleared, do you get any exception? Or your code overwrites default content? If page is beeing loaded you always need to wait, f.e. to element is clickable, see org.openqa.selenium.support.ui.ExpectedConditions","body":"In case the textarea is not cleared, do you get any exception? Or your code overwrites default content? If page is beeing loaded you always need to wait, f.e. to element is clickable, see org.openqa.selenium.support.ui.ExpectedConditions"}],"answers":[{"tags":[],"owner":{"account_id":15083819,"reputation":33038,"user_id":10885684,"display_name":"KunduK"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1549369415,"creation_date":1549369415,"answer_id":54534362,"question_id":54533783,"body_markdown":"Use Java Script executor it should work.\r\n\r\n    JavascriptExecutor executor = (JavascriptExecutor) driver;\r\n    \t\t \r\n    executor.executeScript(&quot;document.getElementById(&#39;CheckoutWelcomeTitle&#39;).value=&#39;&#39;&quot;);","title":"Unable to clear textarea which auto inputs text on clear and blur using Selenium WebDriver","body":"<p>Use Java Script executor it should work.</p>\n\n<pre><code>JavascriptExecutor executor = (JavascriptExecutor) driver;\n\nexecutor.executeScript(\"document.getElementById('CheckoutWelcomeTitle').value=''\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1549370660,"creation_date":1549370660,"answer_id":54534739,"question_id":54533783,"body_markdown":"The desired element is a dynamic element so to locate the element you have to induce _WebDriverWait_ for the _element to be clickable_ and you can use either of the following [Locator Strategies](https://stackoverflow.com/questions/48369043/official-locator-strategies-for-the-webdriver/48376890#48376890):\r\n\r\n\r\n- `cssSelector`:\r\n\r\n\t    WebElement myElement = new WebDriverWait(driver, 20).until(ExpectedConditions.elementToBeClickable(By.cssSelector(&quot;textarea.form-control.rd-control.rd-control--textarea.empty#CheckoutWelcomeTitle&quot;)));\r\n\t    myElement.click();\r\n\t    myElement.clear();\r\n           \t\r\n- `xpath`:\r\n\r\n\t    WebElement myElement = new WebDriverWait(driver, 20).until(ExpectedConditions.elementToBeClickable(By.xpath(&quot;//textarea[@class=&#39;form-control rd-control rd-control--textarea empty&#39; and @id=&#39;CheckoutWelcomeTitle&#39;]&quot;)));\r\n\t    myElement.click();\r\n\t    myElement.clear();","title":"Unable to clear textarea which auto inputs text on clear and blur using Selenium WebDriver","body":"<p>The desired element is a dynamic element so to locate the element you have to induce <em>WebDriverWait</em> for the <em>element to be clickable</em> and you can use either of the following <a href=\"https://stackoverflow.com/questions/48369043/official-locator-strategies-for-the-webdriver/48376890#48376890\">Locator Strategies</a>:</p>\n\n<ul>\n<li><p><code>cssSelector</code>:</p>\n\n<pre><code>WebElement myElement = new WebDriverWait(driver, 20).until(ExpectedConditions.elementToBeClickable(By.cssSelector(\"textarea.form-control.rd-control.rd-control--textarea.empty#CheckoutWelcomeTitle\")));\nmyElement.click();\nmyElement.clear();\n</code></pre></li>\n<li><p><code>xpath</code>:</p>\n\n<pre><code>WebElement myElement = new WebDriverWait(driver, 20).until(ExpectedConditions.elementToBeClickable(By.xpath(\"//textarea[@class='form-control rd-control rd-control--textarea empty' and @id='CheckoutWelcomeTitle']\")));\nmyElement.click();\nmyElement.clear();\n</code></pre></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1796955,"reputation":2964,"user_id":1636173,"accept_rate":100,"display_name":"Giulio Caccin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640081938,"creation_date":1640081938,"answer_id":70433852,"question_id":54533783,"body_markdown":"I think it&#39;s worth mentioning a solution that works without custom scripts; to take in account all the possible permutations of drivers and os, the most up-to-date solution to the problem is:\r\n\r\n    private fun clearField(element: WebElement) {\r\n        element.sendKeys(Keys.chord(Keys.SHIFT, Keys.ARROW_UP), Keys.DELETE)\r\n        element.sendKeys(Keys.chord(Keys.CONTROL, &quot;a&quot;), Keys.DELETE)\r\n        element.clear()\r\n    }\r\n\r\n\r\nThis is the quite redundant solution to the fact that clear does not always work, and to the fact that the first works on mac and the second on windows.  \r\nAll the three combined has been tested also on react app with validation and input mask.\r\n\r\nThe namespace to import is `import org.openqa.selenium.Keys`.\r\n\r\nThis is an example code, to avoid stale elements you should not pass `WebElements` around.","title":"Unable to clear textarea which auto inputs text on clear and blur using Selenium WebDriver","body":"<p>I think it's worth mentioning a solution that works without custom scripts; to take in account all the possible permutations of drivers and os, the most up-to-date solution to the problem is:</p>\n<pre><code>private fun clearField(element: WebElement) {\n    element.sendKeys(Keys.chord(Keys.SHIFT, Keys.ARROW_UP), Keys.DELETE)\n    element.sendKeys(Keys.chord(Keys.CONTROL, &quot;a&quot;), Keys.DELETE)\n    element.clear()\n}\n</code></pre>\n<p>This is the quite redundant solution to the fact that clear does not always work, and to the fact that the first works on mac and the second on windows.<br />\nAll the three combined has been tested also on react app with validation and input mask.</p>\n<p>The namespace to import is <code>import org.openqa.selenium.Keys</code>.</p>\n<p>This is an example code, to avoid stale elements you should not pass <code>WebElements</code> around.</p>\n"}],"owner":{"account_id":12069267,"reputation":109,"user_id":8825187,"display_name":"Dev Solanki"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1745,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":54534362,"answer_count":3,"score":2,"last_activity_date":1640081938,"creation_date":1549367453,"question_id":54533783,"body_markdown":"I&#39;m using Selenium WebDriver using Java.\r\nI&#39;m having a textarea and I would like to clear default content and enter new content in it. Functionality is such that if I clear text from textarea and hit Tab button, then default text will auto fill.\r\nBelow is HTML of textarea:\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;textarea autocomplete=&quot;off&quot; class=&quot;form-control rd-control rd-control--textarea empty&quot; cols=&quot;20&quot; data-bind=&quot;value: offerTitle, expandedTextArea: offerTitle, valueUpdate: &#39;afterkeydown&#39;, customerRequiredFieldsBinding&quot; id=&quot;CheckoutWelcomeTitle&quot; name=&quot;CheckoutWelcomeTitle&quot; placeholder=&quot;ex. Here comes the best offer&quot; rows=&quot;1&quot; type=&quot;text&quot; data-autosize-on=&quot;true&quot; style=&quot;overflow-y: hidden; height: 35.9792px;&quot; onblur=&quot;setTextColorDefault(this)&quot; oninput=&quot;setTextColor(this)&quot;&gt;Let&#39;s bid on a discount code!&lt;/textarea&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nI tried using:\r\n\r\n    driver.findElement(By.id(&quot;CheckoutWelcomeTitle&quot;)).clear()\r\n\r\nBut this didn&#39;t work.  \r\nI also tried this:\r\n\r\n    driver.findElement(By.id(&quot;CheckoutWelcomeTitle&quot;)).sendKeys(Keys.CONTROL + &quot;a&quot;) \r\n    driver.findElement(By.id(&quot;CheckoutWelcomeTitle&quot;)).sendKeys(Keys.DELETE)\r\n\r\nThis sometimes works but not always. Sometimes it clears data and refills default text.\r\n\r\nIs there any other way I can clear this textarea in a way that it would work every time?\r\n\r\nIn case if it helps, developers have used JavaScript to refill the text box on blur event.\r\n\r\nEdit: I have used explicit wait with the condition of the element to be clickable.","title":"Unable to clear textarea which auto inputs text on clear and blur using Selenium WebDriver","body":"<p>I'm using Selenium WebDriver using Java.\nI'm having a textarea and I would like to clear default content and enter new content in it. Functionality is such that if I clear text from textarea and hit Tab button, then default text will auto fill.\nBelow is HTML of textarea:</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;textarea autocomplete=&quot;off&quot; class=&quot;form-control rd-control rd-control--textarea empty&quot; cols=&quot;20&quot; data-bind=&quot;value: offerTitle, expandedTextArea: offerTitle, valueUpdate: 'afterkeydown', customerRequiredFieldsBinding&quot; id=&quot;CheckoutWelcomeTitle&quot; name=&quot;CheckoutWelcomeTitle&quot; placeholder=&quot;ex. Here comes the best offer&quot; rows=&quot;1&quot; type=&quot;text&quot; data-autosize-on=&quot;true&quot; style=&quot;overflow-y: hidden; height: 35.9792px;&quot; onblur=&quot;setTextColorDefault(this)&quot; oninput=&quot;setTextColor(this)&quot;&gt;Let's bid on a discount code!&lt;/textarea&gt;\n</code></pre>\n\n<p>I tried using:</p>\n<pre><code>driver.findElement(By.id(&quot;CheckoutWelcomeTitle&quot;)).clear()\n</code></pre>\n<p>But this didn't work.<br />\nI also tried this:</p>\n<pre><code>driver.findElement(By.id(&quot;CheckoutWelcomeTitle&quot;)).sendKeys(Keys.CONTROL + &quot;a&quot;) \ndriver.findElement(By.id(&quot;CheckoutWelcomeTitle&quot;)).sendKeys(Keys.DELETE)\n</code></pre>\n<p>This sometimes works but not always. Sometimes it clears data and refills default text.</p>\n<p>Is there any other way I can clear this textarea in a way that it would work every time?</p>\n<p>In case if it helps, developers have used JavaScript to refill the text box on blur event.</p>\n<p>Edit: I have used explicit wait with the condition of the element to be clickable.</p>\n"},{"tags":["java","spring-boot","logging","log4j2"],"comments":[{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":1,"creation_date":1640069387,"post_id":70424757,"comment_id":124501441,"body_markdown":"Your appender is a `File` appender, not a `RollingFile` appender, so it performs no rotation.","body":"Your appender is a <code>File</code> appender, not a <code>RollingFile</code> appender, so it performs no rotation."}],"answers":[{"tags":[],"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640079215,"creation_date":1640077944,"answer_id":70432979,"question_id":70424757,"body_markdown":"**Remark**: Spring Boot already defines a log file with rotation (cf. [`log4j2-file.xml`](https://github.com/spring-projects/spring-boot/blob/main/spring-boot-project/spring-boot/src/main/resources/org/springframework/boot/logging/log4j2/log4j2-file.xml)) with a size limit of 10 MiB (the limit is hardcoded). You just need to set:\r\n\r\n```\r\nlogging.file.path=D:\\\\Users\\\\User\\\\MyFiles\\\\Apache Camel github\\\\ChatServiceProject\\\\logs\r\nlogging.file.name=propertieslogs.log\r\n```\r\n\r\nin your `application.properties`.\r\n\r\nIf, however, you want to write your own configuration file, you should consider using the XML format:\r\n\r\n```lang-xml\r\n\t&lt;Properties&gt;\r\n\t\t&lt;Property name=&quot;LOG_PATH&quot;&gt;D:\\Users\\User\\MyFiles\\Apache Camel github\\ChatServiceProject\\logs&lt;/Property&gt;\r\n\t\t&lt;Property name=&quot;LOG_FILE&quot;&gt;${sys:LOG_PATH}/propertieslogs.log&lt;/Property&gt;\r\n\t&lt;/Properties&gt;\r\n\t&lt;Appenders&gt;\r\n\t\t&lt;RollingFile\r\n\t\t\tname=&quot;LOGFILE&quot;\r\n\t\t\tappend=&quot;true&quot;\r\n\t\t\tfileName=&quot;${sys:LOG_FILE}&quot;\r\n\t\t\tfilePattern=&quot;${sys:LOG_PATH}/propertieslogs.%i.log.gz&quot;&gt;\r\n\t\t\t&lt;PatternLayout pattern=&quot;[%-5level] %d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %c{1} - %msg%n&quot; /&gt;\r\n\t\t\t&lt;SizeBasedTriggeringPolicy size=&quot;1 KB&quot; /&gt;\r\n\t\t&lt;/RollingFile&gt;\r\n\t&lt;/Appenders&gt;\r\n```\r\n\r\nThe properties format uses a lot of arbitrary identifiers to emulate the hierarchical structure of XML:\r\n\r\n```\r\nproperty.LOG_PATH=D:\\Users\\User\\MyFiles\\Apache Camel github\\ChatServiceProject\\logs\r\nproperty.LOG_FILE=${sys:LOG_PATH}/propertieslogs.log\r\n\r\nappender.&lt;id1&gt;.type=RollingFile\r\nappender.&lt;id1&gt;.name=LOGFILE\r\nappender.&lt;id1&gt;.append=true\r\nappender.&lt;id1&gt;.fileName=${sys:LOG_FILE}\r\nappender.&lt;id1&gt;.filePattern=${sys:LOG_PATH}/propertieslogs.%i.log.gz\r\nappender.&lt;id1&gt;.&lt;id2&gt;.type=PatternLayout\r\nappender.&lt;id1&gt;.&lt;id2&gt;.pattern=[%-5level] %d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %c{1} - %msg%n\r\nappender.&lt;id1&gt;.&lt;id3&gt;.type=SizeBasedTriggeringPolicy\r\nappender.&lt;id1&gt;.&lt;id3&gt;.size=1 KB\r\n```\r\n\r\nwhere `&lt;id1&gt;`, `&lt;id2&gt;` and `&lt;id3&gt;` are strings chosen by you. They have no influence on the configuration.","title":"How to generate new log files based on size using log4j2 in spring boot application","body":"<p><strong>Remark</strong>: Spring Boot already defines a log file with rotation (cf. <a href=\"https://github.com/spring-projects/spring-boot/blob/main/spring-boot-project/spring-boot/src/main/resources/org/springframework/boot/logging/log4j2/log4j2-file.xml\" rel=\"nofollow noreferrer\"><code>log4j2-file.xml</code></a>) with a size limit of 10 MiB (the limit is hardcoded). You just need to set:</p>\n<pre><code>logging.file.path=D:\\\\Users\\\\User\\\\MyFiles\\\\Apache Camel github\\\\ChatServiceProject\\\\logs\nlogging.file.name=propertieslogs.log\n</code></pre>\n<p>in your <code>application.properties</code>.</p>\n<p>If, however, you want to write your own configuration file, you should consider using the XML format:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;Properties&gt;\n        &lt;Property name=&quot;LOG_PATH&quot;&gt;D:\\Users\\User\\MyFiles\\Apache Camel github\\ChatServiceProject\\logs&lt;/Property&gt;\n        &lt;Property name=&quot;LOG_FILE&quot;&gt;${sys:LOG_PATH}/propertieslogs.log&lt;/Property&gt;\n    &lt;/Properties&gt;\n    &lt;Appenders&gt;\n        &lt;RollingFile\n            name=&quot;LOGFILE&quot;\n            append=&quot;true&quot;\n            fileName=&quot;${sys:LOG_FILE}&quot;\n            filePattern=&quot;${sys:LOG_PATH}/propertieslogs.%i.log.gz&quot;&gt;\n            &lt;PatternLayout pattern=&quot;[%-5level] %d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %c{1} - %msg%n&quot; /&gt;\n            &lt;SizeBasedTriggeringPolicy size=&quot;1 KB&quot; /&gt;\n        &lt;/RollingFile&gt;\n    &lt;/Appenders&gt;\n</code></pre>\n<p>The properties format uses a lot of arbitrary identifiers to emulate the hierarchical structure of XML:</p>\n<pre><code>property.LOG_PATH=D:\\Users\\User\\MyFiles\\Apache Camel github\\ChatServiceProject\\logs\nproperty.LOG_FILE=${sys:LOG_PATH}/propertieslogs.log\n\nappender.&lt;id1&gt;.type=RollingFile\nappender.&lt;id1&gt;.name=LOGFILE\nappender.&lt;id1&gt;.append=true\nappender.&lt;id1&gt;.fileName=${sys:LOG_FILE}\nappender.&lt;id1&gt;.filePattern=${sys:LOG_PATH}/propertieslogs.%i.log.gz\nappender.&lt;id1&gt;.&lt;id2&gt;.type=PatternLayout\nappender.&lt;id1&gt;.&lt;id2&gt;.pattern=[%-5level] %d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %c{1} - %msg%n\nappender.&lt;id1&gt;.&lt;id3&gt;.type=SizeBasedTriggeringPolicy\nappender.&lt;id1&gt;.&lt;id3&gt;.size=1 KB\n</code></pre>\n<p>where <code>&lt;id1&gt;</code>, <code>&lt;id2&gt;</code> and <code>&lt;id3&gt;</code> are strings chosen by you. They have no influence on the configuration.</p>\n"},{"tags":[],"owner":{"account_id":10939897,"reputation":104,"user_id":8040148,"display_name":"shashi singh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640081653,"creation_date":1640081653,"answer_id":70433786,"question_id":70424757,"body_markdown":"The below properties can be used to override the default configuration (  **application.propertie**s)\r\n \r\n\r\n`logging.logback.rollingpolicy.max-index=10`\r\n\r\n`logging.logback.rollingpolicy.max-file-size=15MB`\r\n \r\n\r\n&gt; spring properties can be placed inside the log xml file.\r\n\r\n`&lt;springProperty scope=&quot;context&quot; name=&quot;MAX_INDEX&quot; source=&quot;logging.logback.rollingpolicy.max-index&quot;/&gt;`\r\n    \r\n`&lt;springProperty scope=&quot;context&quot; name=&quot;MAX_FILE_SIZE&quot; source=&quot;logging.logback.rollingpolicy.max-file-size&quot;/&gt;`\r\n\r\n&gt; sample:\r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;configuration&gt;\r\n    &lt;include resource=&quot;org/springframework/boot/logging/logback/defaults.xml&quot;/&gt;\r\n    &lt;property name=&quot;LOG_FILE&quot; value=&quot;${LOG_PATH:-${LOG_TEMP:-${java.io.tmpdir:-/tmp}}}/e2e-tools.${nodename:-local}.log}&quot;/&gt;\r\n    &lt;springProperty scope=&quot;context&quot; name=&quot;MAX_INDEX&quot; source=&quot;logging.logback.rollingpolicy.max-index&quot;/&gt;\r\n    &lt;springProperty scope=&quot;context&quot; name=&quot;MAX_FILE_SIZE&quot; source=&quot;logging.logback.rollingpolicy.max-file-size&quot; defaultValue=&quot;10MB&quot;/&gt;\r\n    &lt;appender name=&quot;FIX_WINDOW_BASED_FILE&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;\r\n        &lt;file&gt;${LOG_FILE}&lt;/file&gt;\r\n        &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.FixedWindowRollingPolicy&quot;&gt;\r\n            &lt;fileNamePattern&gt;${LOG_FILE}.%i&lt;/fileNamePattern&gt;\r\n            &lt;minIndex&gt;1&lt;/minIndex&gt;\r\n            &lt;maxIndex&gt;${MAX_INDEX}&lt;/maxIndex&gt;\r\n        &lt;/rollingPolicy&gt;\r\n\r\n        &lt;triggeringPolicy class=&quot;ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy&quot;&gt;\r\n            &lt;maxFileSize&gt;${MAX_FILE_SIZE}&lt;/maxFileSize&gt;\r\n        &lt;/triggeringPolicy&gt;\r\n\r\n        &lt;encoder&gt;\r\n            &lt;pattern&gt;%date{ISO8601} [%thread] %level: %msg%n&lt;/pattern&gt;\r\n        &lt;/encoder&gt;\r\n    &lt;/appender&gt;\r\n    &lt;appender name=&quot;CONSOLE&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n        &lt;encoder&gt;\r\n            &lt;pattern&gt;%date{ISO8601} [%thread] %level: %msg%n&lt;/pattern&gt;\r\n        &lt;/encoder&gt;\r\n    &lt;/appender&gt;\r\n\r\n    &lt;root level=&quot;INFO&quot;&gt;\r\n        &lt;appender-ref ref=&quot;FIX_WINDOW_BASED_FILE&quot;/&gt;\r\n        &lt;appender-ref ref=&quot;CONSOLE&quot;/&gt;\r\n    &lt;/root&gt;\r\n    &lt;/configuration&gt;\r\n\r\n\r\n\r\n","title":"How to generate new log files based on size using log4j2 in spring boot application","body":"<p>The below properties can be used to override the default configuration (  <strong>application.propertie</strong>s)</p>\n<p><code>logging.logback.rollingpolicy.max-index=10</code></p>\n<p><code>logging.logback.rollingpolicy.max-file-size=15MB</code></p>\n<blockquote>\n<p>spring properties can be placed inside the log xml file.</p>\n</blockquote>\n<p><code>&lt;springProperty scope=&quot;context&quot; name=&quot;MAX_INDEX&quot; source=&quot;logging.logback.rollingpolicy.max-index&quot;/&gt;</code></p>\n<p><code>&lt;springProperty scope=&quot;context&quot; name=&quot;MAX_FILE_SIZE&quot; source=&quot;logging.logback.rollingpolicy.max-file-size&quot;/&gt;</code></p>\n<blockquote>\n<p>sample:</p>\n</blockquote>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;configuration&gt;\n&lt;include resource=&quot;org/springframework/boot/logging/logback/defaults.xml&quot;/&gt;\n&lt;property name=&quot;LOG_FILE&quot; value=&quot;${LOG_PATH:-${LOG_TEMP:-${java.io.tmpdir:-/tmp}}}/e2e-tools.${nodename:-local}.log}&quot;/&gt;\n&lt;springProperty scope=&quot;context&quot; name=&quot;MAX_INDEX&quot; source=&quot;logging.logback.rollingpolicy.max-index&quot;/&gt;\n&lt;springProperty scope=&quot;context&quot; name=&quot;MAX_FILE_SIZE&quot; source=&quot;logging.logback.rollingpolicy.max-file-size&quot; defaultValue=&quot;10MB&quot;/&gt;\n&lt;appender name=&quot;FIX_WINDOW_BASED_FILE&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;\n    &lt;file&gt;${LOG_FILE}&lt;/file&gt;\n    &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.FixedWindowRollingPolicy&quot;&gt;\n        &lt;fileNamePattern&gt;${LOG_FILE}.%i&lt;/fileNamePattern&gt;\n        &lt;minIndex&gt;1&lt;/minIndex&gt;\n        &lt;maxIndex&gt;${MAX_INDEX}&lt;/maxIndex&gt;\n    &lt;/rollingPolicy&gt;\n\n    &lt;triggeringPolicy class=&quot;ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy&quot;&gt;\n        &lt;maxFileSize&gt;${MAX_FILE_SIZE}&lt;/maxFileSize&gt;\n    &lt;/triggeringPolicy&gt;\n\n    &lt;encoder&gt;\n        &lt;pattern&gt;%date{ISO8601} [%thread] %level: %msg%n&lt;/pattern&gt;\n    &lt;/encoder&gt;\n&lt;/appender&gt;\n&lt;appender name=&quot;CONSOLE&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\n    &lt;encoder&gt;\n        &lt;pattern&gt;%date{ISO8601} [%thread] %level: %msg%n&lt;/pattern&gt;\n    &lt;/encoder&gt;\n&lt;/appender&gt;\n\n&lt;root level=&quot;INFO&quot;&gt;\n    &lt;appender-ref ref=&quot;FIX_WINDOW_BASED_FILE&quot;/&gt;\n    &lt;appender-ref ref=&quot;CONSOLE&quot;/&gt;\n&lt;/root&gt;\n&lt;/configuration&gt;\n</code></pre>\n"}],"owner":{"account_id":18128966,"reputation":395,"user_id":13184263,"display_name":"Jenny"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1657,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1640081653,"creation_date":1640016801,"question_id":70424757,"body_markdown":"I am generating a log file using log4j2, but I need to generate a new one based on size each time it reaches the limit.\r\n\r\n**log4j2.properties** file:\r\n```\r\nname=PropertiesConfig\r\nproperty.filename =D:\\\\Users\\\\User\\\\MyFiles\\\\Apache Camel github\\\\ChatServiceProject\\\\logs\\\\propertieslogs.log\r\nappenders = console, file\r\n\r\nappender.console.type = Console\r\nappender.console.name = STDOUT\r\nappender.console.layout.type = PatternLayout\r\nappender.console.layout.pattern = [%-5level] %d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %c{1} - %msg%n\r\n\r\nappender.file.type = File\r\nappender.file.name = LOGFILE\r\nappender.file.fileName=${filename}\r\nappender.file.layout.type=PatternLayout\r\nappender.file.layout.pattern=[%-5level] %d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %c{1} - %msg%n\r\nappender.file.append=true\r\nappender.file=org.apache.log4j.RollingFileAppender\r\nappender.fileLogger.MaxFileSize=1KB\r\n\r\nloggers=file\r\nlogger.file.name=Processors\r\nlogger.file.level = trace\r\nlogger.file.appenderRefs = file\r\nlogger.file.appenderRef.file.ref = LOGFILE\r\n\r\nrootLogger.level = trace\r\nrootLogger.appenderRefs = stdout\r\nrootLogger.appenderRef.stdout.ref = STDOUT\r\nrootLogger= INFO, file, stdout\r\n```\r\nHowever the size of the log file is now 16KB and still it is not generating a new file but appending logs to the same file. So I need help to fix this.\r\nThank you","title":"How to generate new log files based on size using log4j2 in spring boot application","body":"<p>I am generating a log file using log4j2, but I need to generate a new one based on size each time it reaches the limit.</p>\n<p><strong>log4j2.properties</strong> file:</p>\n<pre><code>name=PropertiesConfig\nproperty.filename =D:\\\\Users\\\\User\\\\MyFiles\\\\Apache Camel github\\\\ChatServiceProject\\\\logs\\\\propertieslogs.log\nappenders = console, file\n\nappender.console.type = Console\nappender.console.name = STDOUT\nappender.console.layout.type = PatternLayout\nappender.console.layout.pattern = [%-5level] %d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %c{1} - %msg%n\n\nappender.file.type = File\nappender.file.name = LOGFILE\nappender.file.fileName=${filename}\nappender.file.layout.type=PatternLayout\nappender.file.layout.pattern=[%-5level] %d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %c{1} - %msg%n\nappender.file.append=true\nappender.file=org.apache.log4j.RollingFileAppender\nappender.fileLogger.MaxFileSize=1KB\n\nloggers=file\nlogger.file.name=Processors\nlogger.file.level = trace\nlogger.file.appenderRefs = file\nlogger.file.appenderRef.file.ref = LOGFILE\n\nrootLogger.level = trace\nrootLogger.appenderRefs = stdout\nrootLogger.appenderRef.stdout.ref = STDOUT\nrootLogger= INFO, file, stdout\n</code></pre>\n<p>However the size of the log file is now 16KB and still it is not generating a new file but appending logs to the same file. So I need help to fix this.\nThank you</p>\n"},{"tags":["java","spring","aop","spring-aop"],"comments":[{"owner":{"account_id":5278004,"reputation":6696,"user_id":4214241,"display_name":"R.G"},"score":0,"creation_date":1582100328,"post_id":60295366,"comment_id":106656055,"body_markdown":"Spring AOP can be only used to intercept method calls happening to Spring beans. Please read through the documentation [seciton](https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html#aop-spring-or-aspectj)","body":"Spring AOP can be only used to intercept method calls happening to Spring beans. Please read through the documentation <a href=\"https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html#aop-spring-or-aspectj\" rel=\"nofollow noreferrer\">seciton</a>"},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":2,"creation_date":1582101581,"post_id":60295366,"comment_id":106656633,"body_markdown":"Slightly off-topic: Please don&#39;t use `@Configuration` together with `@Aspect`. The Spring configuration belongs into a separate configuration class, an aspect is not the right place for it. I see this anti-pattern over and over again here. (Probably one person started doing this without thinking much and everybody just uses copy &amp; paste.) You should add `@Component` to the aspect instead.","body":"Slightly off-topic: Please don&#39;t use <code>@Configuration</code> together with <code>@Aspect</code>. The Spring configuration belongs into a separate configuration class, an aspect is not the right place for it. I see this anti-pattern over and over again here. (Probably one person started doing this without thinking much and everybody just uses copy &amp; paste.) You should add <code>@Component</code> to the aspect instead."},{"owner":{"account_id":5278004,"reputation":6696,"user_id":4214241,"display_name":"R.G"},"score":0,"creation_date":1582106165,"post_id":60295366,"comment_id":106659241,"body_markdown":"@SoftwareEngineer deduced based on the question that the method is not intercepted and my understanding that the point cut points to an external library class. I never posted this as an answer and the comment was a hint on what could be wrong. And there is no evidene here that the logger IS a spring-bean either","body":"@SoftwareEngineer deduced based on the question that the method is not intercepted and my understanding that the point cut points to an external library class. I never posted this as an answer and the comment was a hint on what could be wrong. And there is no evidene here that the logger IS a spring-bean either"}],"answers":[{"tags":[],"owner":{"account_id":38622,"reputation":1436,"user_id":110977,"accept_rate":90,"display_name":"Brendon Randall"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1582101086,"creation_date":1582098957,"answer_id":60295449,"question_id":60295366,"body_markdown":"Check this other answer out https://stackoverflow.com/questions/39189454/intercepting-third-party-functions-in-android-using-aspectj\r\n\r\nUnfortunately, you can only weave your own code. \r\n\r\nHowever, depending on what you actually need to do with Logback, you could create a custom Appender and do what you need to in there?\r\n\r\n**UPDATE**\r\n\r\nSeeing as you want to record some form of metric of these exceptions, you could configure a StatusListener according to the logstash-logback docs \r\n\r\nhttps://github.com/logstash/logstash-logback-encoder#status-listeners\r\n\r\nWith this, you could receive the event, and record whatever metrics you need","title":"How to monitor method execution at third party library?","body":"<p>Check this other answer out <a href=\"https://stackoverflow.com/questions/39189454/intercepting-third-party-functions-in-android-using-aspectj\">Intercepting third party functions in android using AspectJ</a></p>\n\n<p>Unfortunately, you can only weave your own code. </p>\n\n<p>However, depending on what you actually need to do with Logback, you could create a custom Appender and do what you need to in there?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Seeing as you want to record some form of metric of these exceptions, you could configure a StatusListener according to the logstash-logback docs </p>\n\n<p><a href=\"https://github.com/logstash/logstash-logback-encoder#status-listeners\" rel=\"nofollow noreferrer\">https://github.com/logstash/logstash-logback-encoder#status-listeners</a></p>\n\n<p>With this, you could receive the event, and record whatever metrics you need</p>\n"},{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1582276337,"creation_date":1582100456,"answer_id":60295799,"question_id":60295366,"body_markdown":"&gt; Unfortunately, you can only weave your own code.\r\n\r\nBrendon&#39;s answer is incorrect because it is focused on Android. On platforms with normal Java like Windows, MacOS, Linux you can intercept third-party code, given the following conditions:\r\n\r\n* You use full AspectJ, not Spring AOP. AspectJ can be used without Spring or also in Spring projects.\r\n* You use LTW (load-time weaving), usually via JVM parameter `-javaagent:/path/to/aspectjweaver.jar`, and configure _aop.xml_ correctly.\r\n* As an alternative you can use the AspectJ compiler _ajc_ directly via command line or via _AspectJ Maven Plugin_ in order to do binary weaving, i.e. weaving aspect code into your 3rd party library, creating new woven class files and re-packaging them into a new JAR. Then you would use that JAR in place of the original. _(BTW, this would also work for Android if the library is something you can deliver and install with your app and not some system class/library which cannot be replaced or overridden.)_\r\n\r\nI recommend LTW over binary weaving if you have no restrictions using Java command line parameters. There is even a chapter in the Spring manual describing how to use it directly in Spring.\r\n\r\n---\r\n\r\n**Update:** Here is an [MCVE](https://stackoverflow.com/help/mcve) showing you how to do that in plain Java + AspectJ LTW.\r\n\r\nLet&#39;s create an AspectJ project in Eclipse with installed AJDT (AspectJ Development Tools). Of course you can also create a Maven project with AspectJ Maven Plugin or even without because actually you do not need the AspectJ compiler if you use LTW via `-javaagent:/path/to/aspectjweaver.jar`. My sample project has this structure (Eclipse layout, not Maven, I just did it quickly):\r\n\r\n[![Eclipse AspectJ project][1]][1]\r\n\r\nThe file contents are as follows.\r\n\r\n***src/de/scrum_master/app/Application.java***\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    package de.scrum_master.app;\r\n    \r\n    import org.slf4j.LoggerFactory;\r\n    \r\n    import ch.qos.logback.classic.Logger;\r\n    \r\n    public class Application {\r\n      private static final Logger logger = (Logger) LoggerFactory.getLogger(Application.class);\r\n    \r\n      public static void main(String[] args) {\r\n        logger.info(&quot;Example log from {}&quot;, Application.class.getSimpleName());\r\n      }\r\n    }\r\n\r\n***src/logback.xml***\r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n    &lt;configuration&gt;\r\n      &lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n        &lt;encoder&gt;\r\n          &lt;pattern&gt;%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n&lt;/pattern&gt;\r\n        &lt;/encoder&gt;\r\n      &lt;/appender&gt;\r\n     \r\n      &lt;root level=&quot;debug&quot;&gt;\r\n        &lt;appender-ref ref=&quot;STDOUT&quot; /&gt;\r\n      &lt;/root&gt;\r\n    &lt;/configuration&gt;\r\n\r\n***src/de/scrum_master/aspect/LogbackAspect.aj (or simply LogbackAspect.java)***\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    package de.scrum_master.aspect;\r\n    \r\n    import org.aspectj.lang.JoinPoint;\r\n    import org.aspectj.lang.annotation.Aspect;\r\n    import org.aspectj.lang.annotation.Before;\r\n    \r\n    @Aspect\r\n    public class LogbackAspect {\r\n      @Before(value = &quot;execution(* ch.qos.logback.classic.Logger.*(..))&quot;)\r\n      public void getInfo(JoinPoint joinPoint) {\r\n        System.out.println(joinPoint);\r\n      }\r\n    }\r\n\r\n***src/META-INF/aop.xml***\r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;aspectj&gt;\r\n      &lt;aspects&gt;\r\n        &lt;aspect name=&quot;de.scrum_master.aspect.LogbackAspect&quot; /&gt;\r\n      &lt;/aspects&gt;\r\n      &lt;weaver options=&quot;-verbose -showWeaveInfo&quot; /&gt;\r\n    &lt;/aspectj&gt;\r\n\r\nNow create a simple Java run configuration for `Application` and add the Java agent to the command line:\r\n\r\n[![AspectJ LTW run configuration][2]][2]\r\n\r\nNow run the program and the console log will be like this:\r\n\r\n```none\r\n[AppClassLoader@18b4aac2] info AspectJ Weaver Version 1.9.5 built on Thursday Nov 28, 2019 at 11:28:53 PST\r\n[AppClassLoader@18b4aac2] info register classloader sun.misc.Launcher$AppClassLoader@18b4aac2\r\n[AppClassLoader@18b4aac2] info using configuration /C:/Users/alexa/Documents/java-src/SO_AJ_LTW_Logback_60295366/bin/META-INF/aop.xml\r\n[AppClassLoader@18b4aac2] info register aspect de.scrum_master.aspect.LogbackAspect\r\n[AppClassLoader@18b4aac2] weaveinfo Join point &#39;method-execution(ch.qos.logback.classic.Level ch.qos.logback.classic.Logger.getEffectiveLevel())&#39; in Type &#39;ch.qos.logback.classic.Logger&#39; (Logger.java:109) advised by before advice from &#39;de.scrum_master.aspect.LogbackAspect&#39; (LogbackAspect.aj)\r\n[AppClassLoader@18b4aac2] weaveinfo Join point &#39;method-execution(int ch.qos.logback.classic.Logger.getEffectiveLevelInt())&#39; in Type &#39;ch.qos.logback.classic.Logger&#39; (Logger.java:113) advised by before advice from &#39;de.scrum_master.aspect.LogbackAspect&#39; (LogbackAspect.aj)\r\n[AppClassLoader@18b4aac2] weaveinfo Join point &#39;method-execution(ch.qos.logback.classic.Level ch.qos.logback.classic.Logger.getLevel())&#39; in Type &#39;ch.qos.logback.classic.Logger&#39; (Logger.java:117) advised by before advice from &#39;de.scrum_master.aspect.LogbackAspect&#39; (LogbackAspect.aj)\r\n(...)\r\n[AppClassLoader@18b4aac2] weaveinfo Join point &#39;method-execution(java.lang.Object ch.qos.logback.classic.Logger.readResolve())&#39; in Type &#39;ch.qos.logback.classic.Logger&#39; (Logger.java:787) advised by before advice from &#39;de.scrum_master.aspect.LogbackAspect&#39; (LogbackAspect.aj)\r\n[AppClassLoader@18b4aac2] info processing reweavable type de.scrum_master.aspect.LogbackAspect: de\\scrum_master\\aspect\\LogbackAspect.aj\r\n[AppClassLoader@18b4aac2] info successfully verified type de.scrum_master.aspect.LogbackAspect exists.  Originates from de\\scrum_master\\aspect\\LogbackAspect.aj\r\nexecution(void ch.qos.logback.classic.Logger.setLevel(Level))\r\nexecution(void ch.qos.logback.classic.Logger.setLevel(Level))\r\nexecution(String ch.qos.logback.classic.Logger.toString())\r\nexecution(void ch.qos.logback.classic.Logger.addAppender(Appender))\r\nexecution(Logger ch.qos.logback.classic.Logger.getChildByName(String))\r\nexecution(Logger ch.qos.logback.classic.Logger.createChildByName(String))\r\nexecution(Logger ch.qos.logback.classic.Logger.getChildByName(String))\r\nexecution(Logger ch.qos.logback.classic.Logger.createChildByName(String))\r\nexecution(Logger ch.qos.logback.classic.Logger.getChildByName(String))\r\nexecution(Logger ch.qos.logback.classic.Logger.createChildByName(String))\r\nexecution(Logger ch.qos.logback.classic.Logger.getChildByName(String))\r\nexecution(Logger ch.qos.logback.classic.Logger.createChildByName(String))\r\nexecution(void ch.qos.logback.classic.Logger.info(String, Object))\r\nexecution(void ch.qos.logback.classic.Logger.filterAndLog_1(String, Marker, Level, String, Object, Throwable))\r\nexecution(void ch.qos.logback.classic.Logger.buildLoggingEventAndAppend(String, Marker, Level, String, Object[], Throwable))\r\nexecution(String ch.qos.logback.classic.Logger.getName())\r\nexecution(LoggerContext ch.qos.logback.classic.Logger.getLoggerContext())\r\nexecution(void ch.qos.logback.classic.Logger.callAppenders(ILoggingEvent))\r\nexecution(int ch.qos.logback.classic.Logger.appendLoopOnAppenders(ILoggingEvent))\r\nexecution(int ch.qos.logback.classic.Logger.appendLoopOnAppenders(ILoggingEvent))\r\nexecution(int ch.qos.logback.classic.Logger.appendLoopOnAppenders(ILoggingEvent))\r\nexecution(int ch.qos.logback.classic.Logger.appendLoopOnAppenders(ILoggingEvent))\r\nexecution(int ch.qos.logback.classic.Logger.appendLoopOnAppenders(ILoggingEvent))\r\n16:04:52.791 [main] INFO  de.scrum_master.app.Application - Example log from Application\r\n```\r\n\r\nI think this is exactly what you want. Please refer to the [Spring manual](https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html#aop-using-aspectj) in order to find out how to configure AspectJ LTW there.\r\n\r\n  [1]: https://i.stack.imgur.com/63C6c.png\r\n  [2]: https://i.stack.imgur.com/N0T30.png","title":"How to monitor method execution at third party library?","body":"<blockquote>\n  <p>Unfortunately, you can only weave your own code.</p>\n</blockquote>\n\n<p>Brendon's answer is incorrect because it is focused on Android. On platforms with normal Java like Windows, MacOS, Linux you can intercept third-party code, given the following conditions:</p>\n\n<ul>\n<li>You use full AspectJ, not Spring AOP. AspectJ can be used without Spring or also in Spring projects.</li>\n<li>You use LTW (load-time weaving), usually via JVM parameter <code>-javaagent:/path/to/aspectjweaver.jar</code>, and configure <em>aop.xml</em> correctly.</li>\n<li>As an alternative you can use the AspectJ compiler <em>ajc</em> directly via command line or via <em>AspectJ Maven Plugin</em> in order to do binary weaving, i.e. weaving aspect code into your 3rd party library, creating new woven class files and re-packaging them into a new JAR. Then you would use that JAR in place of the original. <em>(BTW, this would also work for Android if the library is something you can deliver and install with your app and not some system class/library which cannot be replaced or overridden.)</em></li>\n</ul>\n\n<p>I recommend LTW over binary weaving if you have no restrictions using Java command line parameters. There is even a chapter in the Spring manual describing how to use it directly in Spring.</p>\n\n<hr>\n\n<p><strong>Update:</strong> Here is an <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> showing you how to do that in plain Java + AspectJ LTW.</p>\n\n<p>Let's create an AspectJ project in Eclipse with installed AJDT (AspectJ Development Tools). Of course you can also create a Maven project with AspectJ Maven Plugin or even without because actually you do not need the AspectJ compiler if you use LTW via <code>-javaagent:/path/to/aspectjweaver.jar</code>. My sample project has this structure (Eclipse layout, not Maven, I just did it quickly):</p>\n\n<p><a href=\"https://i.stack.imgur.com/63C6c.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/63C6c.png\" alt=\"Eclipse AspectJ project\"></a></p>\n\n<p>The file contents are as follows.</p>\n\n<p><strong><em>src/de/scrum_master/app/Application.java</em></strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.app;\n\nimport org.slf4j.LoggerFactory;\n\nimport ch.qos.logback.classic.Logger;\n\npublic class Application {\n  private static final Logger logger = (Logger) LoggerFactory.getLogger(Application.class);\n\n  public static void main(String[] args) {\n    logger.info(\"Example log from {}\", Application.class.getSimpleName());\n  }\n}\n</code></pre>\n\n<p><strong><em>src/logback.xml</em></strong></p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;configuration&gt;\n  &lt;appender name=\"STDOUT\" class=\"ch.qos.logback.core.ConsoleAppender\"&gt;\n    &lt;encoder&gt;\n      &lt;pattern&gt;%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n&lt;/pattern&gt;\n    &lt;/encoder&gt;\n  &lt;/appender&gt;\n\n  &lt;root level=\"debug\"&gt;\n    &lt;appender-ref ref=\"STDOUT\" /&gt;\n  &lt;/root&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p><strong><em>src/de/scrum_master/aspect/LogbackAspect.aj (or simply LogbackAspect.java)</em></strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.aspect;\n\nimport org.aspectj.lang.JoinPoint;\nimport org.aspectj.lang.annotation.Aspect;\nimport org.aspectj.lang.annotation.Before;\n\n@Aspect\npublic class LogbackAspect {\n  @Before(value = \"execution(* ch.qos.logback.classic.Logger.*(..))\")\n  public void getInfo(JoinPoint joinPoint) {\n    System.out.println(joinPoint);\n  }\n}\n</code></pre>\n\n<p><strong><em>src/META-INF/aop.xml</em></strong></p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;aspectj&gt;\n  &lt;aspects&gt;\n    &lt;aspect name=\"de.scrum_master.aspect.LogbackAspect\" /&gt;\n  &lt;/aspects&gt;\n  &lt;weaver options=\"-verbose -showWeaveInfo\" /&gt;\n&lt;/aspectj&gt;\n</code></pre>\n\n<p>Now create a simple Java run configuration for <code>Application</code> and add the Java agent to the command line:</p>\n\n<p><a href=\"https://i.stack.imgur.com/N0T30.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/N0T30.png\" alt=\"AspectJ LTW run configuration\"></a></p>\n\n<p>Now run the program and the console log will be like this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>[AppClassLoader@18b4aac2] info AspectJ Weaver Version 1.9.5 built on Thursday Nov 28, 2019 at 11:28:53 PST\n[AppClassLoader@18b4aac2] info register classloader sun.misc.Launcher$AppClassLoader@18b4aac2\n[AppClassLoader@18b4aac2] info using configuration /C:/Users/alexa/Documents/java-src/SO_AJ_LTW_Logback_60295366/bin/META-INF/aop.xml\n[AppClassLoader@18b4aac2] info register aspect de.scrum_master.aspect.LogbackAspect\n[AppClassLoader@18b4aac2] weaveinfo Join point 'method-execution(ch.qos.logback.classic.Level ch.qos.logback.classic.Logger.getEffectiveLevel())' in Type 'ch.qos.logback.classic.Logger' (Logger.java:109) advised by before advice from 'de.scrum_master.aspect.LogbackAspect' (LogbackAspect.aj)\n[AppClassLoader@18b4aac2] weaveinfo Join point 'method-execution(int ch.qos.logback.classic.Logger.getEffectiveLevelInt())' in Type 'ch.qos.logback.classic.Logger' (Logger.java:113) advised by before advice from 'de.scrum_master.aspect.LogbackAspect' (LogbackAspect.aj)\n[AppClassLoader@18b4aac2] weaveinfo Join point 'method-execution(ch.qos.logback.classic.Level ch.qos.logback.classic.Logger.getLevel())' in Type 'ch.qos.logback.classic.Logger' (Logger.java:117) advised by before advice from 'de.scrum_master.aspect.LogbackAspect' (LogbackAspect.aj)\n(...)\n[AppClassLoader@18b4aac2] weaveinfo Join point 'method-execution(java.lang.Object ch.qos.logback.classic.Logger.readResolve())' in Type 'ch.qos.logback.classic.Logger' (Logger.java:787) advised by before advice from 'de.scrum_master.aspect.LogbackAspect' (LogbackAspect.aj)\n[AppClassLoader@18b4aac2] info processing reweavable type de.scrum_master.aspect.LogbackAspect: de\\scrum_master\\aspect\\LogbackAspect.aj\n[AppClassLoader@18b4aac2] info successfully verified type de.scrum_master.aspect.LogbackAspect exists.  Originates from de\\scrum_master\\aspect\\LogbackAspect.aj\nexecution(void ch.qos.logback.classic.Logger.setLevel(Level))\nexecution(void ch.qos.logback.classic.Logger.setLevel(Level))\nexecution(String ch.qos.logback.classic.Logger.toString())\nexecution(void ch.qos.logback.classic.Logger.addAppender(Appender))\nexecution(Logger ch.qos.logback.classic.Logger.getChildByName(String))\nexecution(Logger ch.qos.logback.classic.Logger.createChildByName(String))\nexecution(Logger ch.qos.logback.classic.Logger.getChildByName(String))\nexecution(Logger ch.qos.logback.classic.Logger.createChildByName(String))\nexecution(Logger ch.qos.logback.classic.Logger.getChildByName(String))\nexecution(Logger ch.qos.logback.classic.Logger.createChildByName(String))\nexecution(Logger ch.qos.logback.classic.Logger.getChildByName(String))\nexecution(Logger ch.qos.logback.classic.Logger.createChildByName(String))\nexecution(void ch.qos.logback.classic.Logger.info(String, Object))\nexecution(void ch.qos.logback.classic.Logger.filterAndLog_1(String, Marker, Level, String, Object, Throwable))\nexecution(void ch.qos.logback.classic.Logger.buildLoggingEventAndAppend(String, Marker, Level, String, Object[], Throwable))\nexecution(String ch.qos.logback.classic.Logger.getName())\nexecution(LoggerContext ch.qos.logback.classic.Logger.getLoggerContext())\nexecution(void ch.qos.logback.classic.Logger.callAppenders(ILoggingEvent))\nexecution(int ch.qos.logback.classic.Logger.appendLoopOnAppenders(ILoggingEvent))\nexecution(int ch.qos.logback.classic.Logger.appendLoopOnAppenders(ILoggingEvent))\nexecution(int ch.qos.logback.classic.Logger.appendLoopOnAppenders(ILoggingEvent))\nexecution(int ch.qos.logback.classic.Logger.appendLoopOnAppenders(ILoggingEvent))\nexecution(int ch.qos.logback.classic.Logger.appendLoopOnAppenders(ILoggingEvent))\n16:04:52.791 [main] INFO  de.scrum_master.app.Application - Example log from Application\n</code></pre>\n\n<p>I think this is exactly what you want. Please refer to the <a href=\"https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html#aop-using-aspectj\" rel=\"nofollow noreferrer\">Spring manual</a> in order to find out how to configure AspectJ LTW there.</p>\n"}],"owner":{"account_id":13969214,"reputation":33,"user_id":12912354,"display_name":"Arthur Fonzerelli"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1621,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1640081452,"creation_date":1582098609,"question_id":60295366,"body_markdown":"I have task to somehow monitor method calling at logback library. I started doing it with spring aop. So, for instance, i should catch all methods execution at ch.qos.logback.classic.Logger class. And there is my Aspect for it:\r\n\r\n    @Aspect\r\n    @Configuration\r\n    public class LogbackAspect {\r\n\r\n        @Before(value = &quot;execution(* ch.qos.logback.classic.Logger.*(..))&quot;)\r\n        public void getInfo(JoinPoint joinPoint) {\r\n             System.out.println(&quot;+++++AOP &quot; + joinPoint.getSignature().getName());\r\n    }\r\n    }\r\n\r\nBut it&#39;s not working for now, so, is there any possibility to intercept method execution with spring aop? Or there are some better ways to do it?","title":"How to monitor method execution at third party library?","body":"<p>I have task to somehow monitor method calling at logback library. I started doing it with spring aop. So, for instance, i should catch all methods execution at ch.qos.logback.classic.Logger class. And there is my Aspect for it:</p>\n\n<pre><code>@Aspect\n@Configuration\npublic class LogbackAspect {\n\n    @Before(value = \"execution(* ch.qos.logback.classic.Logger.*(..))\")\n    public void getInfo(JoinPoint joinPoint) {\n         System.out.println(\"+++++AOP \" + joinPoint.getSignature().getName());\n}\n}\n</code></pre>\n\n<p>But it's not working for now, so, is there any possibility to intercept method execution with spring aop? Or there are some better ways to do it?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":8834,"reputation":297144,"user_id":16076,"display_name":"Mitch Wheat"},"score":3,"creation_date":1327459271,"post_id":8997228,"comment_id":11276246,"body_markdown":"create the date and then retrieve the day from it (format)","body":"create the date and then retrieve the day from it (format)"},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":2,"creation_date":1327459309,"post_id":8997228,"comment_id":11276252,"body_markdown":"Search, my good man. [This SO Q&amp;A](http://stackoverflow.com/questions/4786169/first-day-of-next-month-with-java-joda-time) does it both the crappy way, and the Joda Time way. Coincidentally also asked today. Tons of hits.","body":"Search, my good man. <a href=\"http://stackoverflow.com/questions/4786169/first-day-of-next-month-with-java-joda-time\">This SO Q&amp;A</a> does it both the crappy way, and the Joda Time way. Coincidentally also asked today. Tons of hits."},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1327459648,"post_id":8997228,"comment_id":11276299,"body_markdown":"@RanRag It&#39;s over there on the right under the big &quot;Related&quot; header.","body":"@RanRag It&#39;s over there on the right under the big &quot;Related&quot; header."},{"owner":{"account_id":406517,"reputation":48699,"user_id":776084,"accept_rate":79,"display_name":"RanRag"},"score":0,"creation_date":1327459735,"post_id":8997228,"comment_id":11276306,"body_markdown":"oh yes sorry, i don&#39;t know why i wrote that comment. I think I have done too much coding for the day.","body":"oh yes sorry, i don&#39;t know why i wrote that comment. I think I have done too much coding for the day."},{"owner":{"account_id":6177253,"reputation":3107,"user_id":4813777,"display_name":"Taras Melnyk"},"score":0,"creation_date":1549355355,"post_id":8997228,"comment_id":95862066,"body_markdown":"It helped me: https://stackoverflow.com/a/14241940/4813777","body":"It helped me: <a href=\"https://stackoverflow.com/a/14241940/4813777\">stackoverflow.com/a/14241940/4813777</a>"}],"answers":[{"tags":[],"owner":{"account_id":48120,"reputation":93879,"user_id":142822,"display_name":"KV Prajapati"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1327459755,"creation_date":1327459335,"answer_id":8997248,"question_id":8997228,"body_markdown":"Create `java.util.Date` or `java.util.Calendar` object, set date value and use `java.text.SimpleDateFormat` class method to format it.\r\n\r\n     Calendar cal=Calendar.getInstance();\r\n     cal.set(Calendar.DATE,1);\r\n     cal.set(Calendar.MONTH,0);\r\n     cal.set(Calendar.YEAR,2012);\r\n            \r\n     SimpleDateFormat sdf=new SimpleDateFormat(&quot;EEEE&quot;);\r\n     System.out.println(sdf.format(cal.getTime()));","title":"How to get name of the first day of a month?","body":"<p>Create <code>java.util.Date</code> or <code>java.util.Calendar</code> object, set date value and use <code>java.text.SimpleDateFormat</code> class method to format it.</p>\n\n<pre><code> Calendar cal=Calendar.getInstance();\n cal.set(Calendar.DATE,1);\n cal.set(Calendar.MONTH,0);\n cal.set(Calendar.YEAR,2012);\n\n SimpleDateFormat sdf=new SimpleDateFormat(\"EEEE\");\n System.out.println(sdf.format(cal.getTime()));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":921430,"reputation":7972,"user_id":953068,"accept_rate":59,"display_name":"Joe"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1327460310,"creation_date":1327460310,"answer_id":8997351,"question_id":8997228,"body_markdown":"    public int getFirstDay(){\r\n    \tCalendar c=new GregorianCalendar();\r\n    \tc.set(Calendar.DAY_OF_MONTH, 1);\r\n    \treturn c.get(Calendar.DAY_OF_WEEK);\r\n    }\r\n\r\nFrom there you can see if the int is equal to Calendar.SUNDAY, Calendar.MONDAY, etc.  ","title":"How to get name of the first day of a month?","body":"<pre><code>public int getFirstDay(){\n    Calendar c=new GregorianCalendar();\n    c.set(Calendar.DAY_OF_MONTH, 1);\n    return c.get(Calendar.DAY_OF_WEEK);\n}\n</code></pre>\n\n<p>From there you can see if the int is equal to Calendar.SUNDAY, Calendar.MONDAY, etc.  </p>\n"},{"tags":[],"owner":{"account_id":1108799,"reputation":10647,"user_id":1099643,"accept_rate":80,"display_name":"Kushan"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1439393876,"creation_date":1327461928,"answer_id":8997469,"question_id":8997228,"body_markdown":"You can create a `Calendar` with whatever date you want and then do `set(Calendar.DAY_OF_MONTH, 1)` to get the first day of a month.\r\n\r\n         Calendar cal = Calendar.getInstance();\r\n    \t cal.set(Calendar.DATE, 25);\r\n         cal.set(Calendar.MONTH, Calendar.JANUARY);\r\n         cal.set(Calendar.YEAR, 2012);\r\n\r\n    \t cal.set(Calendar.DAY_OF_MONTH, 1);\r\n    \t Date firstDayOfMonth = cal.getTime();  \r\n    \t  \r\n         DateFormat sdf = new SimpleDateFormat(&quot;EEEEEEEE&quot;);   \r\n         System.out.println(&quot;First Day of Month: &quot; + sdf.format(firstDayOfMonth));  ","title":"How to get name of the first day of a month?","body":"<p>You can create a <code>Calendar</code> with whatever date you want and then do <code>set(Calendar.DAY_OF_MONTH, 1)</code> to get the first day of a month.</p>\n\n<pre><code>     Calendar cal = Calendar.getInstance();\n     cal.set(Calendar.DATE, 25);\n     cal.set(Calendar.MONTH, Calendar.JANUARY);\n     cal.set(Calendar.YEAR, 2012);\n\n     cal.set(Calendar.DAY_OF_MONTH, 1);\n     Date firstDayOfMonth = cal.getTime();  \n\n     DateFormat sdf = new SimpleDateFormat(\"EEEEEEEE\");   \n     System.out.println(\"First Day of Month: \" + sdf.format(firstDayOfMonth));  \n</code></pre>\n"},{"tags":[],"owner":{"account_id":1772206,"reputation":493,"user_id":1616764,"display_name":"Nadeeshani"},"down_vote_count":0,"up_vote_count":45,"is_accepted":false,"score":45,"last_activity_date":1456332591,"creation_date":1357621421,"answer_id":14208492,"question_id":8997228,"body_markdown":"To get the first date of the current month, use `java.util.Calendar`. First get an instance of it and set the field `Calendar.DAY_OF_MONTH` to the first date of the month.  Since the first day of any month is 1, inplace of `cal.getActualMinimum(Calendar.DAY_OF_MONTH)`, 1 can be used here.\r\n\r\n    private Date getFirstDateOfCurrentMonth() {\r\n      Calendar cal = Calendar.getInstance();\r\n      cal.set(Calendar.DAY_OF_MONTH, cal.getActualMinimum(Calendar.DAY_OF_MONTH));\r\n      return cal.getTime();\r\n    }","title":"How to get name of the first day of a month?","body":"<p>To get the first date of the current month, use <code>java.util.Calendar</code>. First get an instance of it and set the field <code>Calendar.DAY_OF_MONTH</code> to the first date of the month.  Since the first day of any month is 1, inplace of <code>cal.getActualMinimum(Calendar.DAY_OF_MONTH)</code>, 1 can be used here.</p>\n\n<pre><code>private Date getFirstDateOfCurrentMonth() {\n  Calendar cal = Calendar.getInstance();\n  cal.set(Calendar.DAY_OF_MONTH, cal.getActualMinimum(Calendar.DAY_OF_MONTH));\n  return cal.getTime();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1304932,"reputation":2021,"user_id":1254091,"display_name":"Gabriel"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1400254135,"creation_date":1400254135,"answer_id":23699152,"question_id":8997228,"body_markdown":"In the Java 8 you can use the **TemporalAdjusters:** \r\n\r\nThis is an example:\r\n\r\n    import java.time.DayOfWeek;\r\n    import java.time.LocalDate;\r\n    import java.time.temporal.TemporalAdjusters;\r\n    \r\n    /**\r\n     * Dates in Java8\r\n     *\r\n     */\r\n    public class App {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tLocalDate localDate = LocalDate.now();\r\n    \t\tSystem.out.println(&quot;Day of Month: &quot; + localDate.getDayOfMonth());\r\n    \t\tSystem.out.println(&quot;Month: &quot; + localDate.getMonth());\r\n    \t\tSystem.out.println(&quot;Year: &quot; + localDate.getYear());\r\n    \r\n    \t\tSystem.out.printf(&quot;first day of Month: %s%n&quot;,\r\n    \t\t\t\tlocalDate.with(TemporalAdjusters.firstDayOfMonth()));\r\n    \t\tSystem.out.printf(&quot;first Monday of Month: %s%n&quot;, localDate\r\n    \t\t\t\t.with(TemporalAdjusters.firstInMonth(DayOfWeek.MONDAY)));\r\n    \t\tSystem.out.printf(&quot;last day of Month: %s%n&quot;,\r\n    \t\t\t\tlocalDate.with(TemporalAdjusters.lastDayOfMonth()));\r\n    \t\tSystem.out.printf(&quot;first day of next Month: %s%n&quot;,\r\n    \t\t\t\tlocalDate.with(TemporalAdjusters.firstDayOfNextMonth()));\r\n    \t\tSystem.out.printf(&quot;first day of next Year: %s%n&quot;,\r\n    \t\t\t\tlocalDate.with(TemporalAdjusters.firstDayOfNextYear()));\r\n    \t\tSystem.out.printf(&quot;first day of Year: %s%n&quot;,\r\n    \t\t\t\tlocalDate.with(TemporalAdjusters.firstDayOfYear()));\r\n    \r\n    \t\tLocalDate tomorrow = localDate.plusDays(1);\r\n    \t\tSystem.out.println(&quot;Day of Month: &quot; + tomorrow.getDayOfMonth());\r\n    \t\tSystem.out.println(&quot;Month: &quot; + tomorrow.getMonth());\r\n    \t\tSystem.out.println(&quot;Year: &quot; + tomorrow.getYear());\r\n    \t}\r\n    \r\n    }\r\n\r\nThe results would be:\r\n\r\n    Day of Month: 16\r\n    Month: MAY\r\n    Year: 2014\r\n    first day of Month: 2014-05-01\r\n    first Monday of Month: 2014-05-05\r\n    last day of Month: 2014-05-31\r\n    first day of next Month: 2014-06-01\r\n    first day of next Year: 2015-01-01\r\n    first day of Year: 2014-01-01\r\n    Last in Month Tuesday: 2014-05-27\r\n    Day of Month: 17\r\n    Month: MAY\r\n    Year: 2014","title":"How to get name of the first day of a month?","body":"<p>In the Java 8 you can use the <strong>TemporalAdjusters:</strong> </p>\n\n<p>This is an example:</p>\n\n<pre><code>import java.time.DayOfWeek;\nimport java.time.LocalDate;\nimport java.time.temporal.TemporalAdjusters;\n\n/**\n * Dates in Java8\n *\n */\npublic class App {\n    public static void main(String[] args) {\n        LocalDate localDate = LocalDate.now();\n        System.out.println(\"Day of Month: \" + localDate.getDayOfMonth());\n        System.out.println(\"Month: \" + localDate.getMonth());\n        System.out.println(\"Year: \" + localDate.getYear());\n\n        System.out.printf(\"first day of Month: %s%n\",\n                localDate.with(TemporalAdjusters.firstDayOfMonth()));\n        System.out.printf(\"first Monday of Month: %s%n\", localDate\n                .with(TemporalAdjusters.firstInMonth(DayOfWeek.MONDAY)));\n        System.out.printf(\"last day of Month: %s%n\",\n                localDate.with(TemporalAdjusters.lastDayOfMonth()));\n        System.out.printf(\"first day of next Month: %s%n\",\n                localDate.with(TemporalAdjusters.firstDayOfNextMonth()));\n        System.out.printf(\"first day of next Year: %s%n\",\n                localDate.with(TemporalAdjusters.firstDayOfNextYear()));\n        System.out.printf(\"first day of Year: %s%n\",\n                localDate.with(TemporalAdjusters.firstDayOfYear()));\n\n        LocalDate tomorrow = localDate.plusDays(1);\n        System.out.println(\"Day of Month: \" + tomorrow.getDayOfMonth());\n        System.out.println(\"Month: \" + tomorrow.getMonth());\n        System.out.println(\"Year: \" + tomorrow.getYear());\n    }\n\n}\n</code></pre>\n\n<p>The results would be:</p>\n\n<pre><code>Day of Month: 16\nMonth: MAY\nYear: 2014\nfirst day of Month: 2014-05-01\nfirst Monday of Month: 2014-05-05\nlast day of Month: 2014-05-31\nfirst day of next Month: 2014-06-01\nfirst day of next Year: 2015-01-01\nfirst day of Year: 2014-01-01\nLast in Month Tuesday: 2014-05-27\nDay of Month: 17\nMonth: MAY\nYear: 2014\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1441075132,"creation_date":1435747821,"answer_id":31159201,"question_id":8997228,"body_markdown":"# java.time\r\n\r\nSince Java 8 we can also use [`YearMonth`][1] class which allows us to create [`LocalDate`][2] objects with specified days (first, last). Then We can simply convert these dates to [`DayOfWeek`][3] [Enum][4] ([Tutorial][5]) and read its [`name`][6] property.\r\n\r\n\tYearMonth ym = YearMonth.of(2012, 1);\r\n\t\r\n\tString firstDay = ym.atDay(1).getDayOfWeek().name();\r\n\tString lastDay = ym.atEndOfMonth().getDayOfWeek().name();\r\n\t\r\n\tSystem.out.println(firstDay);\r\n\tSystem.out.println(lastDay);\r\n\r\nresult:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    SUNDAY\r\n    TUESDAY\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/time/YearMonth.html\r\n  [2]: http://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html\r\n  [3]: http://docs.oracle.com/javase/8/docs/api/java/time/DayOfWeek.html\r\n  [4]: http://docs.oracle.com/javase/8/docs/api/java/lang/Enum.html\r\n  [5]: http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html\r\n  [6]: http://docs.oracle.com/javase/8/docs/api/java/lang/Enum.html#name--","title":"How to get name of the first day of a month?","body":"<h1>java.time</h1>\n\n<p>Since Java 8 we can also use <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/YearMonth.html\" rel=\"nofollow\"><code>YearMonth</code></a> class which allows us to create <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html\" rel=\"nofollow\"><code>LocalDate</code></a> objects with specified days (first, last). Then We can simply convert these dates to <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/DayOfWeek.html\" rel=\"nofollow\"><code>DayOfWeek</code></a> <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Enum.html\" rel=\"nofollow\">Enum</a> (<a href=\"http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html\" rel=\"nofollow\">Tutorial</a>) and read its <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Enum.html#name--\" rel=\"nofollow\"><code>name</code></a> property.</p>\n\n<pre><code>YearMonth ym = YearMonth.of(2012, 1);\n\nString firstDay = ym.atDay(1).getDayOfWeek().name();\nString lastDay = ym.atEndOfMonth().getDayOfWeek().name();\n\nSystem.out.println(firstDay);\nSystem.out.println(lastDay);\n</code></pre>\n\n<p>result:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>SUNDAY\nTUESDAY\n</code></pre>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1452491034,"creation_date":1441076014,"answer_id":32322812,"question_id":8997228,"body_markdown":"# java.time, soft-coded\r\n\r\nThe [Answer][1] by Pshemo was good and clever, but is hard-coded to English. Let&#39;s take a stab at it allowing for localization.\r\n\r\n    ZoneId zoneId = ZoneId.of( &quot;America/Montreal&quot; ); // Time zone is crucial to determining a date.\r\n    YearMonth yearMonth = YearMonth.now( zoneId );\r\n    LocalDate firstOfMonth = yearMonth.atDay( 1 );\r\n\r\n## Formatter\r\n\r\nGenerate a textual representation of that [`LocalDate`][2]. We specify a desired [`Locale`][3], in this case [`CANADA_FRENCH`][4]. If omitted, your JVM’s current default Locale is implicitly applied; better to specify explicit Locale.\r\n\r\n    DateTimeFormatter formatter = DateTimeFormatter.ofPattern( &quot;EEEE&quot; ).withZone( zoneId ).withLocale( Locale.CANADA_FRENCH );  // Exactly four &#39;E&#39; letters means full form. http://docs.oracle.com/javase/8/docs/api/java/time/format/TextStyle.html#FULL\r\n    String output = formatter.format( firstOfMonth );\r\n\r\nDump to console.\r\n\r\n    System.out.println( &quot;output: &quot; + output );\r\n\r\nWhen run.\r\n\r\n&gt;samedi\r\n\r\n## `DayOfWeek` Enum\r\n\r\nAnother route is to use the [`DayOfWeek`][5] enum. This enum includes a [`getDisplayName`][6] method where you specify both the [text style][7] (full name versus abbreviation) and a `Locale`.\r\n\r\n    DayOfWeek dayOfWeek = firstOfMonth.getDayOfWeek() ;\r\n    String output = dayOfWeek.getDisplayName( TextStyle.FULL_STANDALONE  , Locale.CANADA_FRENCH ) ;\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/31159201/642706\r\n  [2]: http://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html\r\n  [3]: http://docs.oracle.com/javase/8/docs/api/java/util/Locale.html\r\n  [4]: http://docs.oracle.com/javase/8/docs/api/java/util/Locale.html#CANADA_FRENCH\r\n  [5]: http://docs.oracle.com/javase/8/docs/api/java/time/DayOfWeek.html\r\n  [6]: http://docs.oracle.com/javase/8/docs/api/java/time/DayOfWeek.html#getDisplayName-java.time.format.TextStyle-java.util.Locale-\r\n  [7]: http://docs.oracle.com/javase/8/docs/api/java/time/format/TextStyle.html","title":"How to get name of the first day of a month?","body":"<h1>java.time, soft-coded</h1>\n\n<p>The <a href=\"https://stackoverflow.com/a/31159201/642706\">Answer</a> by Pshemo was good and clever, but is hard-coded to English. Let's take a stab at it allowing for localization.</p>\n\n<pre><code>ZoneId zoneId = ZoneId.of( \"America/Montreal\" ); // Time zone is crucial to determining a date.\nYearMonth yearMonth = YearMonth.now( zoneId );\nLocalDate firstOfMonth = yearMonth.atDay( 1 );\n</code></pre>\n\n<h2>Formatter</h2>\n\n<p>Generate a textual representation of that <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html\" rel=\"nofollow noreferrer\"><code>LocalDate</code></a>. We specify a desired <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Locale.html\" rel=\"nofollow noreferrer\"><code>Locale</code></a>, in this case <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Locale.html#CANADA_FRENCH\" rel=\"nofollow noreferrer\"><code>CANADA_FRENCH</code></a>. If omitted, your JVM’s current default Locale is implicitly applied; better to specify explicit Locale.</p>\n\n<pre><code>DateTimeFormatter formatter = DateTimeFormatter.ofPattern( \"EEEE\" ).withZone( zoneId ).withLocale( Locale.CANADA_FRENCH );  // Exactly four 'E' letters means full form. http://docs.oracle.com/javase/8/docs/api/java/time/format/TextStyle.html#FULL\nString output = formatter.format( firstOfMonth );\n</code></pre>\n\n<p>Dump to console.</p>\n\n<pre><code>System.out.println( \"output: \" + output );\n</code></pre>\n\n<p>When run.</p>\n\n<blockquote>\n  <p>samedi</p>\n</blockquote>\n\n<h2><code>DayOfWeek</code> Enum</h2>\n\n<p>Another route is to use the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/DayOfWeek.html\" rel=\"nofollow noreferrer\"><code>DayOfWeek</code></a> enum. This enum includes a <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/DayOfWeek.html#getDisplayName-java.time.format.TextStyle-java.util.Locale-\" rel=\"nofollow noreferrer\"><code>getDisplayName</code></a> method where you specify both the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/format/TextStyle.html\" rel=\"nofollow noreferrer\">text style</a> (full name versus abbreviation) and a <code>Locale</code>.</p>\n\n<pre><code>DayOfWeek dayOfWeek = firstOfMonth.getDayOfWeek() ;\nString output = dayOfWeek.getDisplayName( TextStyle.FULL_STANDALONE  , Locale.CANADA_FRENCH ) ;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1248750,"reputation":6094,"user_id":1209628,"accept_rate":100,"display_name":"Mark"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1540396806,"creation_date":1540391851,"answer_id":52971730,"question_id":8997228,"body_markdown":"# `TemporalAdjuster`\n\nIn java 8 you can use the new [LocalDate][1] and [LocalTime][2] API.\r\n\r\nTo achieve the coveted result, give a try to the following. It prints the name of the given day.\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n    \r\n    import java.time.*;\r\n    import java.time.temporal.*;\r\n\r\n    public class Main {\r\n      public static void main(String[] args) {\r\n        LocalDate l = LocalDate.now().with(TemporalAdjusters.firstDayOfMonth());\r\n        System.out.println(l.getDayOfWeek());\r\n      }\r\n    }\r\n\r\n\r\nExplanation:\r\n\r\n  - `now` gives you the current date.\r\n  - by calling `with` you can pass a [`TemporalAdjuster`][3] which are a key tool for modifying temporal objects.\r\n  - `getDayOfWeek` Gets the day-of-week field, which is an enum `DayOfWeek`.\r\nThis includes textual names of the values.\r\n\r\n`TemporalAdjuster` has a brother class, called [`TemporalAdjusters`][4] which contains static methods regarding the adjustments, like the one you are looking for, the `firstDayOfMonth`\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/time/LocalTime.html\r\n  [3]: https://docs.oracle.com/javase/8/docs/api/java/time/temporal/TemporalAdjuster.html\r\n  [4]: https://docs.oracle.com/javase/8/docs/api/java/time/temporal/TemporalAdjusters.html","title":"How to get name of the first day of a month?","body":"<h1><code>TemporalAdjuster</code></h1>\n\n<p>In java 8 you can use the new <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html\" rel=\"nofollow noreferrer\">LocalDate</a> and <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/LocalTime.html\" rel=\"nofollow noreferrer\">LocalTime</a> API.</p>\n\n<p>To achieve the coveted result, give a try to the following. It prints the name of the given day.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>import java.time.*;\nimport java.time.temporal.*;\n\npublic class Main {\n  public static void main(String[] args) {\n    LocalDate l = LocalDate.now().with(TemporalAdjusters.firstDayOfMonth());\n    System.out.println(l.getDayOfWeek());\n  }\n}\n</code></pre>\n\n<p>Explanation:</p>\n\n<ul>\n<li><code>now</code> gives you the current date.</li>\n<li>by calling <code>with</code> you can pass a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/temporal/TemporalAdjuster.html\" rel=\"nofollow noreferrer\"><code>TemporalAdjuster</code></a> which are a key tool for modifying temporal objects.</li>\n<li><code>getDayOfWeek</code> Gets the day-of-week field, which is an enum <code>DayOfWeek</code>.\nThis includes textual names of the values.</li>\n</ul>\n\n<p><code>TemporalAdjuster</code> has a brother class, called <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/temporal/TemporalAdjusters.html\" rel=\"nofollow noreferrer\"><code>TemporalAdjusters</code></a> which contains static methods regarding the adjustments, like the one you are looking for, the <code>firstDayOfMonth</code></p>\n"},{"tags":[],"owner":{"account_id":4106549,"reputation":715,"user_id":3370387,"display_name":"Suhad Bin Zubair"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640081291,"creation_date":1640081291,"answer_id":70433700,"question_id":8997228,"body_markdown":"**Simple and tricky answer**\r\n\r\n        val calendar = Date()    \r\n        val sdf = SimpleDateFormat(&quot;yyyy-MM-01 00:00:00&quot;, Locale.getDefault())\r\n        var result = sdf.format(calendar)\r\n\r\nyyyy-MM-01 -&gt; dd change to 01\r\n","title":"How to get name of the first day of a month?","body":"<p><strong>Simple and tricky answer</strong></p>\n<pre><code>    val calendar = Date()    \n    val sdf = SimpleDateFormat(&quot;yyyy-MM-01 00:00:00&quot;, Locale.getDefault())\n    var result = sdf.format(calendar)\n</code></pre>\n<p>yyyy-MM-01 -&gt; dd change to 01</p>\n"}],"owner":{"account_id":1193952,"reputation":321,"user_id":1166089,"display_name":"Austin Donovan"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74858,"favorite_count":0,"down_vote_count":0,"up_vote_count":32,"answer_count":9,"score":32,"last_activity_date":1640081291,"creation_date":1327459154,"question_id":8997228,"body_markdown":"How would I go about getting the first day of the month?  So for January, of this year, it would return Sunday.  And then for February it would return Wednesday.","title":"How to get name of the first day of a month?","body":"<p>How would I go about getting the first day of the month?  So for January, of this year, it would return Sunday.  And then for February it would return Wednesday.</p>\n"},{"tags":["java","android","playing-cards"],"comments":[{"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"score":1,"creation_date":1640082920,"post_id":70433217,"comment_id":124505695,"body_markdown":"You don&#39;t need a different `Random` instance for each value you generate. You just need one.","body":"You don&#39;t need a different <code>Random</code> instance for each value you generate. You just need one."}],"answers":[{"tags":[],"owner":{"account_id":6440866,"reputation":564,"user_id":4990927,"display_name":"Sean Powell"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1640080811,"creation_date":1640080811,"answer_id":70433583,"question_id":70433217,"body_markdown":"It would be best i think for you to create an object called Card\r\n\r\n    public class Card{\r\n        private int cardValue;\r\n\r\n        public Card(int cardValue){\r\n\r\n            this.cardValue = cardValue;\r\n        }\r\n\r\n        public int GetCardValue(){\r\n            return cardValue;\r\n        }\r\n    }\r\n\r\nI am not sure what other information you want to store on this card but it can easily be added by adding it to the constructor as was done with `cardValue` on the `Card` method. This will then allow you to store the `Card` object and when you want to compare them, you would call `card1.GetCardValue()` which will return the value in the `cardValue` variable. This will allow you to do the comparison which you are trying to do.\r\n\r\nyou would create a Card object with \r\n\r\n    Card card = new Card(5); // this would set the cards value to 5.\r\n\r\nIf you have any more questions feel free to comment an ill help you out as i am not entirely sure what other information about the card you need to store.","title":"Assign int value to image for compare with higher value wins (card game)","body":"<p>It would be best i think for you to create an object called Card</p>\n<pre><code>public class Card{\n    private int cardValue;\n\n    public Card(int cardValue){\n\n        this.cardValue = cardValue;\n    }\n\n    public int GetCardValue(){\n        return cardValue;\n    }\n}\n</code></pre>\n<p>I am not sure what other information you want to store on this card but it can easily be added by adding it to the constructor as was done with <code>cardValue</code> on the <code>Card</code> method. This will then allow you to store the <code>Card</code> object and when you want to compare them, you would call <code>card1.GetCardValue()</code> which will return the value in the <code>cardValue</code> variable. This will allow you to do the comparison which you are trying to do.</p>\n<p>you would create a Card object with</p>\n<pre><code>Card card = new Card(5); // this would set the cards value to 5.\n</code></pre>\n<p>If you have any more questions feel free to comment an ill help you out as i am not entirely sure what other information about the card you need to store.</p>\n"}],"owner":{"account_id":23708505,"reputation":29,"user_id":17730684,"display_name":"Sandman"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70433583,"answer_count":1,"score":0,"last_activity_date":1640080811,"creation_date":1640079077,"question_id":70433217,"body_markdown":"I&#39;m a rookie programmer and I&#39;m trying to develop a card game based on higher wins. \r\nThe problem is, I don&#39;t know how to assign int values to cards to compare. \r\nLet&#39;s say there are 46 cards, each one has a different value, something like:\r\n\r\n    int peter = 19; \r\n    int jack = 26; \r\n    int martin = 22; \r\n    //...and so on\r\nThere are two players, each one has four randomly generated cards (I did it like this, so I can cast  flip animation on each one, it&#39;s a bit clumsy but it works)\r\n\r\n        //Assign my cards\r\n        TypedArray my_cards = res.obtainTypedArray(R.array.mycards);\r\n        final Random random5 = new Random();\r\n        final Random random6 = new Random();\r\n        final Random random7 = new Random();\r\n        final Random random8 = new Random();\r\n\r\n        //Generate random indexes for my cards\r\n        int RandomCard5 = random5.nextInt(my_cards.length());\r\n        int RandomCard6 = random6.nextInt(my_cards.length());\r\n        int RandomCard7 = random7.nextInt(my_cards.length());\r\n        int RandomCard8 = random8.nextInt(my_cards.length());\r\n        //Generate my cards from RandomCard\r\n        int drawableCard5 = my_cards.getResourceId(RandomCard5,-1);\r\n        int drawableCard6 = my_cards.getResourceId(RandomCard6,-1);\r\n        int drawableCard7 = my_cards.getResourceId(RandomCard7,-1);\r\n        int drawableCard8 = my_cards.getResourceId(RandomCard8,-1);\r\n        //Deal my cards\r\n        card1.setImageResource(drawableCard5);\r\n        card2.setImageResource(drawableCard6);\r\n        card3.setImageResource(drawableCard7);\r\n        card4.setImageResource(drawableCard8);\r\n\r\nAs you can see, I&#39;m using typedArray (Not sure if it&#39;s a good idea for this).\r\nFor the enemy cards it&#39;s the same. \r\nAfter choosing a card for a fight (confirm button), it&#39;s transfered to other ImageView (fightcard1) and an enemy card is randomly choosen from those four random cards and transfered to ImageView (fightcard2).\r\n\r\nNow I need to compare those cards (let&#39;s say those cards will have values 19 and 24). \r\nThe compare function shouldn&#39;t be a problem, but I have no idea how to assign those specific int values to specific cards. \r\nIs there a way I could do this with my current &quot;garbage&quot; code, or is there a better and easier way with some/complete rewriting?\r\n\r\nThanks.","title":"Assign int value to image for compare with higher value wins (card game)","body":"<p>I'm a rookie programmer and I'm trying to develop a card game based on higher wins.\nThe problem is, I don't know how to assign int values to cards to compare.\nLet's say there are 46 cards, each one has a different value, something like:</p>\n<pre><code>int peter = 19; \nint jack = 26; \nint martin = 22; \n//...and so on\n</code></pre>\n<p>There are two players, each one has four randomly generated cards (I did it like this, so I can cast  flip animation on each one, it's a bit clumsy but it works)</p>\n<pre><code>    //Assign my cards\n    TypedArray my_cards = res.obtainTypedArray(R.array.mycards);\n    final Random random5 = new Random();\n    final Random random6 = new Random();\n    final Random random7 = new Random();\n    final Random random8 = new Random();\n\n    //Generate random indexes for my cards\n    int RandomCard5 = random5.nextInt(my_cards.length());\n    int RandomCard6 = random6.nextInt(my_cards.length());\n    int RandomCard7 = random7.nextInt(my_cards.length());\n    int RandomCard8 = random8.nextInt(my_cards.length());\n    //Generate my cards from RandomCard\n    int drawableCard5 = my_cards.getResourceId(RandomCard5,-1);\n    int drawableCard6 = my_cards.getResourceId(RandomCard6,-1);\n    int drawableCard7 = my_cards.getResourceId(RandomCard7,-1);\n    int drawableCard8 = my_cards.getResourceId(RandomCard8,-1);\n    //Deal my cards\n    card1.setImageResource(drawableCard5);\n    card2.setImageResource(drawableCard6);\n    card3.setImageResource(drawableCard7);\n    card4.setImageResource(drawableCard8);\n</code></pre>\n<p>As you can see, I'm using typedArray (Not sure if it's a good idea for this).\nFor the enemy cards it's the same.\nAfter choosing a card for a fight (confirm button), it's transfered to other ImageView (fightcard1) and an enemy card is randomly choosen from those four random cards and transfered to ImageView (fightcard2).</p>\n<p>Now I need to compare those cards (let's say those cards will have values 19 and 24).\nThe compare function shouldn't be a problem, but I have no idea how to assign those specific int values to specific cards.\nIs there a way I could do this with my current &quot;garbage&quot; code, or is there a better and easier way with some/complete rewriting?</p>\n<p>Thanks.</p>\n"},{"tags":["java","android","xml","datepicker","epoch"],"answers":[{"tags":[],"owner":{"account_id":11079440,"reputation":360,"user_id":8135043,"display_name":"Shahnawaz Ansari"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640076673,"creation_date":1640072762,"answer_id":70432061,"question_id":70431990,"body_markdown":"The format for your date is `EEE MMM dd HH:mm:ss zzzz yyyy`\r\n\r\n    String date = &quot;Tue Dec 28 16:55:00 GMT+05:30 2021&quot;;\r\n    try {\r\n        val sdf = SimpleDateFormat(&quot;EEE MMM dd HH:mm:ss zzzz yyyy&quot;)\r\n        val mDate = sdf.parse(date)\r\n        val epochTime = TimeUnit.MILLISECONDS.toSeconds(mDate.time)\r\n    } catch (e: ParseException) {\r\n        e.printStackTrace()\r\n    }\r\n       \r\nVariable `epochTime` will have the seconds stored in it.     \r\nTo convert it back to a format you can do -\r\n\r\n    val sdf = SimpleDateFormat(&quot;EEE MMM dd HH:mm:ss zzzz yyyy&quot;)\r\n    sdf.format(epochTime)\r\n\r\n**Latest Java 8 Requires Min Api Level 26**\r\n\r\n        String date = &quot;Tue Dec 28 16:55:00 GMT+05:30 2021&quot;;\r\n        DateTimeFormatter format = DateTimeFormatter.ofPattern(&quot;EEE MMM dd HH:mm:ss zzzz yyyy&quot;);\r\n        LocalDateTime parsedDate = LocalDateTime.parse(date, format);\r\n        val milliSeconds = parsedDate.atZone(ZoneId.systemDefault()).toInstant().toEpochMilli();","title":"How do I convert this time format into epoch in java? &quot;Tue Dec 28 16:55:00 GMT+05:30 2021&quot; to Epoch","body":"<p>The format for your date is <code>EEE MMM dd HH:mm:ss zzzz yyyy</code></p>\n<pre><code>String date = &quot;Tue Dec 28 16:55:00 GMT+05:30 2021&quot;;\ntry {\n    val sdf = SimpleDateFormat(&quot;EEE MMM dd HH:mm:ss zzzz yyyy&quot;)\n    val mDate = sdf.parse(date)\n    val epochTime = TimeUnit.MILLISECONDS.toSeconds(mDate.time)\n} catch (e: ParseException) {\n    e.printStackTrace()\n}\n   \n</code></pre>\n<p>Variable <code>epochTime</code> will have the seconds stored in it.<br />\nTo convert it back to a format you can do -</p>\n<pre><code>val sdf = SimpleDateFormat(&quot;EEE MMM dd HH:mm:ss zzzz yyyy&quot;)\nsdf.format(epochTime)\n</code></pre>\n<p><strong>Latest Java 8 Requires Min Api Level 26</strong></p>\n<pre><code>    String date = &quot;Tue Dec 28 16:55:00 GMT+05:30 2021&quot;;\n    DateTimeFormatter format = DateTimeFormatter.ofPattern(&quot;EEE MMM dd HH:mm:ss zzzz yyyy&quot;);\n    LocalDateTime parsedDate = LocalDateTime.parse(date, format);\n    val milliSeconds = parsedDate.atZone(ZoneId.systemDefault()).toInstant().toEpochMilli();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22523913,"reputation":98,"user_id":16925151,"display_name":"danklad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640075398,"creation_date":1640075398,"answer_id":70432507,"question_id":70431990,"body_markdown":"By Following Ansari&#39;s Answer, I did this to convert it into Epoch\r\n\r\n    SimpleDateFormat sdf3 = new SimpleDateFormat(&quot;EEE MMM dd HH:mm:ss zzzz yyyy&quot;, Locale.ENGLISH);\r\n    \r\n    Date d1 = null;\r\n    try{\r\n    d1 = sdf3.parse(&quot;Tue Dec 28 16:55:00 GMT+05:30 2021&quot;);\r\n    epochTime = TimeUnit.MILLISECONDS.toSeconds(d1.getTime());\r\n    Log.e(&quot;epoch time&quot;, &quot;onDateSelected: &quot;+epochTime );\r\n    }\r\n    catch (Exception e){ e.printStackTrace(); }","title":"How do I convert this time format into epoch in java? &quot;Tue Dec 28 16:55:00 GMT+05:30 2021&quot; to Epoch","body":"<p>By Following Ansari's Answer, I did this to convert it into Epoch</p>\n<pre><code>SimpleDateFormat sdf3 = new SimpleDateFormat(&quot;EEE MMM dd HH:mm:ss zzzz yyyy&quot;, Locale.ENGLISH);\n\nDate d1 = null;\ntry{\nd1 = sdf3.parse(&quot;Tue Dec 28 16:55:00 GMT+05:30 2021&quot;);\nepochTime = TimeUnit.MILLISECONDS.toSeconds(d1.getTime());\nLog.e(&quot;epoch time&quot;, &quot;onDateSelected: &quot;+epochTime );\n}\ncatch (Exception e){ e.printStackTrace(); }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1640080751,"creation_date":1640080283,"answer_id":70433464,"question_id":70431990,"body_markdown":"Alternative solution with `java.time.OffsetDateTime`\r\n---\r\n\r\nHere&#39;s an alternative solution that makes use of `java.time` keeping all the information of the input `String`:\r\n\r\n```java\r\npublic static void main(String[] args) throws IOException {\r\n\t// input\r\n\tString dpDate = &quot;Tue Dec 28 16:55:00 GMT+05:30 2021&quot;;\r\n\t// define a formatter with the pattern and locale of the input\r\n\tDateTimeFormatter dtf = DateTimeFormatter.ofPattern(\r\n\t\t\t&quot;EEE MMM dd HH:mm:ss OOOO uuuu&quot;, Locale.ENGLISH);\r\n\t// parse the input to an OffsetDateTime using the formatter\r\n\tOffsetDateTime odt = OffsetDateTime.parse(dpDate, dtf);\r\n\t// receive the moment in time represented by the OffsetDateTime\r\n\tInstant instant = odt.toInstant();\r\n\t// extract its epoch millis\r\n\tlong epochMillis = instant.toEpochMilli();\r\n\t// and the epoch seconds\r\n\tlong epochSeconds = instant.getEpochSecond();\r\n\t// and print all the values\r\n\tSystem.out.println(String.format(&quot;%s ---&gt; %d (ms), %d (s)&quot;,\r\n\t\t\t\t\t\t\t\t\t\todt, epochMillis, epochSeconds));\r\n}\r\n```\r\nOutput:\r\n\r\n```lang-none\r\n2021-12-28T16:55+05:30 ---&gt; 1640690700000 (ms), 1640690700 (s)\r\n```\r\n\r\nA `LocalDateTime` should not be used here, because you may lose the information about the offset and a `ZonedDateTime` can neither be used due to the input lacking information about a zone like `&quot;Asia/Kolkata&quot;` or `&quot;America/Chicago&quot;`, it just provides an offset from UTC.\r\n\r\nIf you simply want to get the epoch millis, you can write a short method:\r\n\r\n```java\r\n// define a constant formatter in the desired class\r\nprivate static final DateTimeFormatter DTF_INPUT =\r\n        DateTimeFormatter dtf = DateTimeFormatter.ofPattern(\r\n            &quot;EEE MMM dd HH:mm:ss OOOO uuuu&quot;, Locale.ENGLISH);\r\n\r\n…\r\n\r\n/**\r\n * parses the input, converts to an instant and returns the millis\r\n */\r\npublic static long getEpochMillisFrom(String input) {\r\n    return OffsetDateTime.parse(input, DTF_INPUT)\r\n\t\t\t\t         .toInstant()\r\n\t\t\t\t         .toEpochMilli();\r\n}\r\n```","title":"How do I convert this time format into epoch in java? &quot;Tue Dec 28 16:55:00 GMT+05:30 2021&quot; to Epoch","body":"<h2>Alternative solution with <code>java.time.OffsetDateTime</code></h2>\n<p>Here's an alternative solution that makes use of <code>java.time</code> keeping all the information of the input <code>String</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) throws IOException {\n    // input\n    String dpDate = &quot;Tue Dec 28 16:55:00 GMT+05:30 2021&quot;;\n    // define a formatter with the pattern and locale of the input\n    DateTimeFormatter dtf = DateTimeFormatter.ofPattern(\n            &quot;EEE MMM dd HH:mm:ss OOOO uuuu&quot;, Locale.ENGLISH);\n    // parse the input to an OffsetDateTime using the formatter\n    OffsetDateTime odt = OffsetDateTime.parse(dpDate, dtf);\n    // receive the moment in time represented by the OffsetDateTime\n    Instant instant = odt.toInstant();\n    // extract its epoch millis\n    long epochMillis = instant.toEpochMilli();\n    // and the epoch seconds\n    long epochSeconds = instant.getEpochSecond();\n    // and print all the values\n    System.out.println(String.format(&quot;%s ---&gt; %d (ms), %d (s)&quot;,\n                                        odt, epochMillis, epochSeconds));\n}\n</code></pre>\n<p>Output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>2021-12-28T16:55+05:30 ---&gt; 1640690700000 (ms), 1640690700 (s)\n</code></pre>\n<p>A <code>LocalDateTime</code> should not be used here, because you may lose the information about the offset and a <code>ZonedDateTime</code> can neither be used due to the input lacking information about a zone like <code>&quot;Asia/Kolkata&quot;</code> or <code>&quot;America/Chicago&quot;</code>, it just provides an offset from UTC.</p>\n<p>If you simply want to get the epoch millis, you can write a short method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// define a constant formatter in the desired class\nprivate static final DateTimeFormatter DTF_INPUT =\n        DateTimeFormatter dtf = DateTimeFormatter.ofPattern(\n            &quot;EEE MMM dd HH:mm:ss OOOO uuuu&quot;, Locale.ENGLISH);\n\n…\n\n/**\n * parses the input, converts to an instant and returns the millis\n */\npublic static long getEpochMillisFrom(String input) {\n    return OffsetDateTime.parse(input, DTF_INPUT)\n                         .toInstant()\n                         .toEpochMilli();\n}\n</code></pre>\n"}],"owner":{"account_id":22523913,"reputation":98,"user_id":16925151,"display_name":"danklad"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":529,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70433464,"answer_count":3,"score":0,"last_activity_date":1640080751,"creation_date":1640072270,"question_id":70431990,"body_markdown":"I am using &#39;Single Date and Time Picker&#39; Library in my Android Project but it only returns date and time in the below mentioned format.\r\n\r\n&quot;Tue Dec 28 16:55:00 GMT+05:30 2021&quot; \r\n\r\nI want to convert this into epoch time format. \r\n\r\nLibrary:\r\nhttps://github.com/florent37/SingleDateAndTimePicker","title":"How do I convert this time format into epoch in java? &quot;Tue Dec 28 16:55:00 GMT+05:30 2021&quot; to Epoch","body":"<p>I am using 'Single Date and Time Picker' Library in my Android Project but it only returns date and time in the below mentioned format.</p>\n<p>&quot;Tue Dec 28 16:55:00 GMT+05:30 2021&quot;</p>\n<p>I want to convert this into epoch time format.</p>\n<p>Library:\n<a href=\"https://github.com/florent37/SingleDateAndTimePicker\" rel=\"nofollow noreferrer\">https://github.com/florent37/SingleDateAndTimePicker</a></p>\n"},{"tags":["java","database","azure","azure-devops","dataverse"],"comments":[{"owner":{"account_id":2040965,"reputation":1492,"user_id":1822181,"display_name":"J-M"},"score":0,"creation_date":1639993499,"post_id":70418344,"comment_id":124480762,"body_markdown":"There are at least three different ways I could think of to achieve this in Dataverse. Please specify more detsils about your requirements. Do you need previous value of the changed field? Do you only need to detect changes to a single specific attribute, or maybe any attribute? Any other requirements that come to mind?","body":"There are at least three different ways I could think of to achieve this in Dataverse. Please specify more detsils about your requirements. Do you need previous value of the changed field? Do you only need to detect changes to a single specific attribute, or maybe any attribute? Any other requirements that come to mind?"},{"owner":{"account_id":23392463,"reputation":183,"user_id":17456952,"display_name":"anonymous"},"score":0,"creation_date":1639995451,"post_id":70418344,"comment_id":124481396,"body_markdown":"Hello @JevgenijMartynenko, I have added more details to the question. Please let me know if you need more details. Thanks","body":"Hello @JevgenijMartynenko, I have added more details to the question. Please let me know if you need more details. Thanks"}],"answers":[{"tags":[],"owner":{"account_id":2040965,"reputation":1492,"user_id":1822181,"display_name":"J-M"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640080378,"creation_date":1640077488,"answer_id":70432891,"question_id":70418344,"body_markdown":"Solution 1: Custom changes table\r\n================================\r\n*If you may and can extend your current Dataverse environment*\r\n\r\n1. Create a new table called **Employee Change**. Add a column of type Lookup named **Employee** and link it to your **Employee** table\r\n2. Modify Main Form and add **Employee** column to the form\r\n3. Create a workflow process which would fire on field change. Inside the workflow process you create an **Employee Change** record and set lookup column value to the changed record\r\n\r\nYou can now query Employee Change table for changed records. You would need to expand the lookup column to get required columns from Employee table. \r\n\r\nExample Web API query:\r\n\r\n    GET [Organization URI]/api/data/v9.1/employee?$select=createdon, employeeid\r\n    &amp;$expand=employeeid($select=employeeid,fullname,column2,column3) HTTP/1.1  \r\n    Accept: application/json  \r\n    OData-MaxVersion: 4.0  \r\n    OData-Version: 4.0\r\n\r\nMore info on expanding lookup columns can be found [here][1] \r\n\r\n\r\nSolution 2: Auditing\r\n====================\r\n*Use built-in auditing feature*\r\n\r\n1. Make sure auditing is enabled. Details can be found in [docs][2]\r\n2. Enable auditing on required column in **Employee** table\r\n3. [Query audit records][3] for changes in **Employee** table. You have to pay attention only to changes to specific attributes of interest\r\n4. You will get a list of records changed and then you have to query once again to retrieve columns of the records\r\n\r\nSolution 3: Push instead of pull\r\n================================\r\nIt might make more sense to push changes from Dataverse to your API instead of constantly querying for changes.\r\nYou could use Microsoft Power Automate to create a simple flow which would call your API / platform when change is detected in Dataverse  \r\n\r\nA good start could be exploring the following Power Automate template: [When a record is updated in Microsoft Dataverse, send an email][4]. You could then replace &quot;send email&quot; steps with querying other APIs\r\n\r\n  [1]: https://learn.microsoft.com/en-us/powerapps/developer/data-platform/webapi/query-data-web-api#retrieve-related-rows-records-by-expanding-both-single-valued-and-collection-valued-navigation-properties\r\n  [2]: https://learn.microsoft.com/en-us/powerapps/developer/data-platform/configure-entities-attributes-auditing\r\n  [3]: https://learn.microsoft.com/en-us/powerapps/developer/data-platform/retrieve-and-delete-the-history-of-audited-data-changes\r\n  [4]: https://powerautomate.microsoft.com/en-us/templates/details/4da7dbf98cec40e9bcce29c80d305307/when-a-record-is-updated-in-microsoft-dataverse-send-an-email/","title":"How to detect changes in records of Dataverse tables","body":"<h1>Solution 1: Custom changes table</h1>\n<p><em>If you may and can extend your current Dataverse environment</em></p>\n<ol>\n<li>Create a new table called <strong>Employee Change</strong>. Add a column of type Lookup named <strong>Employee</strong> and link it to your <strong>Employee</strong> table</li>\n<li>Modify Main Form and add <strong>Employee</strong> column to the form</li>\n<li>Create a workflow process which would fire on field change. Inside the workflow process you create an <strong>Employee Change</strong> record and set lookup column value to the changed record</li>\n</ol>\n<p>You can now query Employee Change table for changed records. You would need to expand the lookup column to get required columns from Employee table.</p>\n<p>Example Web API query:</p>\n<pre><code>GET [Organization URI]/api/data/v9.1/employee?$select=createdon, employeeid\n&amp;$expand=employeeid($select=employeeid,fullname,column2,column3) HTTP/1.1  \nAccept: application/json  \nOData-MaxVersion: 4.0  \nOData-Version: 4.0\n</code></pre>\n<p>More info on expanding lookup columns can be found <a href=\"https://learn.microsoft.com/en-us/powerapps/developer/data-platform/webapi/query-data-web-api#retrieve-related-rows-records-by-expanding-both-single-valued-and-collection-valued-navigation-properties\" rel=\"nofollow noreferrer\">here</a></p>\n<h1>Solution 2: Auditing</h1>\n<p><em>Use built-in auditing feature</em></p>\n<ol>\n<li>Make sure auditing is enabled. Details can be found in <a href=\"https://learn.microsoft.com/en-us/powerapps/developer/data-platform/configure-entities-attributes-auditing\" rel=\"nofollow noreferrer\">docs</a></li>\n<li>Enable auditing on required column in <strong>Employee</strong> table</li>\n<li><a href=\"https://learn.microsoft.com/en-us/powerapps/developer/data-platform/retrieve-and-delete-the-history-of-audited-data-changes\" rel=\"nofollow noreferrer\">Query audit records</a> for changes in <strong>Employee</strong> table. You have to pay attention only to changes to specific attributes of interest</li>\n<li>You will get a list of records changed and then you have to query once again to retrieve columns of the records</li>\n</ol>\n<h1>Solution 3: Push instead of pull</h1>\n<p>It might make more sense to push changes from Dataverse to your API instead of constantly querying for changes.\nYou could use Microsoft Power Automate to create a simple flow which would call your API / platform when change is detected in Dataverse</p>\n<p>A good start could be exploring the following Power Automate template: <a href=\"https://powerautomate.microsoft.com/en-us/templates/details/4da7dbf98cec40e9bcce29c80d305307/when-a-record-is-updated-in-microsoft-dataverse-send-an-email/\" rel=\"nofollow noreferrer\">When a record is updated in Microsoft Dataverse, send an email</a>. You could then replace &quot;send email&quot; steps with querying other APIs</p>\n"}],"owner":{"account_id":23392463,"reputation":183,"user_id":17456952,"display_name":"anonymous"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2568,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1640080378,"creation_date":1639983630,"question_id":70418344,"body_markdown":"I have a requirement to fetch the records from the Dataverse in which some changes have been done in specif columns values. For example, let&#39;s say we have a table named employee in which we have a field called position which can be changed over time from intern, software developer, development lead, etc. If we have 10 records currently and if the position of one of the employees gets changed, I need only that one employee record. I have gone through [Retrieve and detect changes to table definitions][1] but I believe it is related to changes in the schema and not related changes in the data. I am using the Spring Boot with Java 11 and to work with Dataverse I am using the [Olingo][2] library and also may use the Web APIs if required. Is there a way to detect the changes in the data as described above? \r\n\r\n\r\n----------\r\n**EDIT**\r\n\r\nTo add more details we will have a scheduled job that triggers at X minutes which needs to fetch the employee data for which position has changed from the last fetch time of X minutes. As we can see in the image below, all 3 records are being updated in that X minutes internal and last modified time has been updated for all. I need to fetch the records highlighted in green for which position attribute has changed. For a record with Id 2, I don&#39;t need to fetch it as the position is the same. \r\n\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://learn.microsoft.com/en-us/powerapps/developer/data-platform/org-service/metadata-retrieve-detect-changes\r\n  [2]: https://olingo.apache.org/doc/odata4/index.html\r\n  [3]: https://i.stack.imgur.com/JFOZv.png","title":"How to detect changes in records of Dataverse tables","body":"<p>I have a requirement to fetch the records from the Dataverse in which some changes have been done in specif columns values. For example, let's say we have a table named employee in which we have a field called position which can be changed over time from intern, software developer, development lead, etc. If we have 10 records currently and if the position of one of the employees gets changed, I need only that one employee record. I have gone through <a href=\"https://learn.microsoft.com/en-us/powerapps/developer/data-platform/org-service/metadata-retrieve-detect-changes\" rel=\"nofollow noreferrer\">Retrieve and detect changes to table definitions</a> but I believe it is related to changes in the schema and not related changes in the data. I am using the Spring Boot with Java 11 and to work with Dataverse I am using the <a href=\"https://olingo.apache.org/doc/odata4/index.html\" rel=\"nofollow noreferrer\">Olingo</a> library and also may use the Web APIs if required. Is there a way to detect the changes in the data as described above?</p>\n<hr />\n<p><strong>EDIT</strong></p>\n<p>To add more details we will have a scheduled job that triggers at X minutes which needs to fetch the employee data for which position has changed from the last fetch time of X minutes. As we can see in the image below, all 3 records are being updated in that X minutes internal and last modified time has been updated for all. I need to fetch the records highlighted in green for which position attribute has changed. For a record with Id 2, I don't need to fetch it as the position is the same.</p>\n<p><a href=\"https://i.stack.imgur.com/JFOZv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JFOZv.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring","spring-boot","projection"],"comments":[{"owner":{"account_id":10814530,"reputation":4195,"user_id":7954021,"display_name":"Renis1235"},"score":1,"creation_date":1640073910,"post_id":70431871,"comment_id":124502598,"body_markdown":"What does `demoRepository.findAll()` return?","body":"What does <code>demoRepository.findAll()</code> return?"},{"owner":{"display_name":"user17676679"},"score":0,"creation_date":1640074556,"post_id":70431871,"comment_id":124502800,"body_markdown":"It returns projection of course","body":"It returns projection of course"},{"owner":{"account_id":21330249,"reputation":297,"user_id":15702124,"display_name":"LenglBoy"},"score":0,"creation_date":1640074649,"post_id":70431871,"comment_id":124502832,"body_markdown":"`findAll()` seems to return more than 1 object and it is mapped to touples and not into just 1 single object. That means you can&#39;t access directly a field like you do with having a single object.\nYou should re-think your naming conventions.","body":"<code>findAll()</code> seems to return more than 1 object and it is mapped to touples and not into just 1 single object. That means you can&#39;t access directly a field like you do with having a single object. You should re-think your naming conventions."},{"owner":{"display_name":"user17676679"},"score":0,"creation_date":1640074784,"post_id":70431871,"comment_id":124502876,"body_markdown":"No, it returns exactly one single element in `DemoProjection` type.Sorry, I mistyped its name.","body":"No, it returns exactly one single element in <code>DemoProjection</code> type.Sorry, I mistyped its name."},{"owner":{"account_id":21330249,"reputation":297,"user_id":15702124,"display_name":"LenglBoy"},"score":0,"creation_date":1640075447,"post_id":70431871,"comment_id":124503094,"body_markdown":"Set a breakpoint and stop the code on `setLabel()`. You will see that your object might look different. MAybe not the main object itself but the label attribute.","body":"Set a breakpoint and stop the code on <code>setLabel()</code>. You will see that your object might look different. MAybe not the main object itself but the label attribute."},{"owner":{"display_name":"user17676679"},"score":0,"creation_date":1640076398,"post_id":70431871,"comment_id":124503402,"body_markdown":"my demo variable seems `org.springframework.data.jpa.repository.query.AbstractJpaQuery$TupleConverter$TupleBackedMap@20bdc2ce`","body":"my demo variable seems <code>org.springframework.data.jpa.repository.query.AbstractJpaQue&zwnj;&#8203;ry$TupleConverter$Tu&zwnj;&#8203;pleBackedMap@20bdc2c&zwnj;&#8203;e</code>"}],"answers":[{"tags":[],"owner":{"account_id":12173205,"reputation":101,"user_id":8887170,"display_name":"Aleksander Ndoci"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1640077915,"creation_date":1640077915,"answer_id":70432972,"question_id":70431871,"body_markdown":"You can&#39;t actually do that. Spring Data uses proxies and AOP to bind the query result to your projection interface, and since it&#39;s an interface you can&#39;t change that in a magical way. I would suggest creating a model/dto and map your projection values there: \r\n\r\n    public class DemoDto {\r\n      private String uuid;\r\n      private String name;\r\n      private String surname;\r\n      \r\n      //getters and setters ommited for brevity\r\n    }\r\n\r\nYou can create a DemoDto object with your desired values.\r\n\r\nIn alternative, you can use a projection class instead of a projection interface. Check spring docs on how to do that :) ","title":"How to set variable in Java projection?","body":"<p>You can't actually do that. Spring Data uses proxies and AOP to bind the query result to your projection interface, and since it's an interface you can't change that in a magical way. I would suggest creating a model/dto and map your projection values there:</p>\n<pre><code>public class DemoDto {\n  private String uuid;\n  private String name;\n  private String surname;\n  \n  //getters and setters ommited for brevity\n}\n</code></pre>\n<p>You can create a DemoDto object with your desired values.</p>\n<p>In alternative, you can use a projection class instead of a projection interface. Check spring docs on how to do that :)</p>\n"},{"tags":[],"owner":{"account_id":16657879,"reputation":2625,"user_id":12038714,"display_name":"J Asgarov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640080309,"creation_date":1640080309,"answer_id":70433470,"question_id":70431871,"body_markdown":"Just create a default method in your DemoProjection interface to return getLabel formatted as you wish:\r\n\r\n    public interface DemoProjection {\r\n      UUID getUuid();\r\n      String getName();\r\n      String getSurname();\r\n\r\n      default String getLabel() {\r\n          return String.format(\r\n                &quot;Name: %s%nSurnamame Surname: %s&quot;,\r\n                geteName(),\r\n                getSurname());\r\n      }\r\n    }\r\n\r\nthis is required as you can&#39;t set a Projection after it has been created by JPA but since you only need formatting there is no need to set anything - default method does the trick.","title":"How to set variable in Java projection?","body":"<p>Just create a default method in your DemoProjection interface to return getLabel formatted as you wish:</p>\n<pre><code>public interface DemoProjection {\n  UUID getUuid();\n  String getName();\n  String getSurname();\n\n  default String getLabel() {\n      return String.format(\n            &quot;Name: %s%nSurnamame Surname: %s&quot;,\n            geteName(),\n            getSurname());\n  }\n}\n</code></pre>\n<p>this is required as you can't set a Projection after it has been created by JPA but since you only need formatting there is no need to set anything - default method does the trick.</p>\n"}],"owner":{"display_name":"user17676679"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2605,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":70432972,"answer_count":2,"score":-1,"last_activity_date":1640080309,"creation_date":1640071373,"question_id":70431871,"body_markdown":"I have the following projection in my Java (Spring Boot) app:\r\n\r\n```\r\npublic interface DemoProjection {\r\n    UUID getUuid();\r\n    String getName();\r\n    String getSurname();\r\n\r\n    String getLabel();\r\n    void setLabel(String label);\r\n```\r\n\r\n\r\nI want to set this `label` field in my service:\r\n\r\n```\r\npublic DemoProjection findAByUuid(UUID uuid) {\r\n        // returns a single record\r\n        final DemoProjection demo =  demoRepository.findAByUuid(uuid);\r\n        final String label = String.format(\r\n                &quot;Name: %s%nSurnamame Surname: %s&quot;,\r\n                demo.geteName(),\r\n                demo.getSurname());\r\n\r\n        // ! this line throws error\r\n        demo.setLabel(label);\r\n        return demo;\r\n    }\r\n```\r\n\r\n`demo.setLabel(label);` throws error: *&quot;cannot set projection A TupleBackedMap cannot be modified.&quot;* \r\n\r\nSo, how can I set `label` field in the projection? \r\n","title":"How to set variable in Java projection?","body":"<p>I have the following projection in my Java (Spring Boot) app:</p>\n<pre><code>public interface DemoProjection {\n    UUID getUuid();\n    String getName();\n    String getSurname();\n\n    String getLabel();\n    void setLabel(String label);\n</code></pre>\n<p>I want to set this <code>label</code> field in my service:</p>\n<pre><code>public DemoProjection findAByUuid(UUID uuid) {\n        // returns a single record\n        final DemoProjection demo =  demoRepository.findAByUuid(uuid);\n        final String label = String.format(\n                &quot;Name: %s%nSurnamame Surname: %s&quot;,\n                demo.geteName(),\n                demo.getSurname());\n\n        // ! this line throws error\n        demo.setLabel(label);\n        return demo;\n    }\n</code></pre>\n<p><code>demo.setLabel(label);</code> throws error: <em>&quot;cannot set projection A TupleBackedMap cannot be modified.&quot;</em></p>\n<p>So, how can I set <code>label</code> field in the projection?</p>\n"},{"tags":["java","spring-boot","apache","spring-security","reverse-proxy"],"answers":[{"tags":[],"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640079859,"creation_date":1640079859,"answer_id":70433382,"question_id":70433229,"body_markdown":"My experience with Apache Proxy setup is limited, however based on my understanding, you will need to enable **SSLEngine** in order to support SSL Protocol:\r\n\r\nThe documentation:\r\n\r\n\r\n**SSLEngine Directive**\r\n\r\n    Description:\tSSL Engine Operation Switch\r\n    Syntax:\tSSLEngine on|off|optional\r\n    Default:\tSSLEngine off\r\n    Context:\tserver config, virtual host\r\n    Status:\tExtension\r\n    Module:\tmod_ssl\r\n\r\n&gt; This directive toggles the usage of the SSL/TLS Protocol Engine. This\r\n&gt; is should be used inside a &lt;VirtualHost&gt; section to enable SSL/TLS for\r\n&gt; a that virtual host. By default the SSL/TLS Protocol Engine is\r\n&gt; disabled for both the main server and all configured virtual hosts.\r\n\r\n**Example**\r\n\r\n    &lt;VirtualHost _default_:443&gt;\r\n    SSLEngine on\r\n    #...\r\n    &lt;/VirtualHost&gt;\r\n\r\n&gt; In Apache 2.1 and later, SSLEngine can be set to optional. This\r\n&gt; enables support for RFC 2817, Upgrading to TLS Within HTTP/1.1. At\r\n&gt; this time no web browsers support RFC 2817.\r\n\r\nhttps://httpd.apache.org/docs/2.4/mod/mod_ssl.html#page-header\r\n\r\n","title":"Spring security behind Apache reverse proxy","body":"<p>My experience with Apache Proxy setup is limited, however based on my understanding, you will need to enable <strong>SSLEngine</strong> in order to support SSL Protocol:</p>\n<p>The documentation:</p>\n<p><strong>SSLEngine Directive</strong></p>\n<pre><code>Description:    SSL Engine Operation Switch\nSyntax: SSLEngine on|off|optional\nDefault:    SSLEngine off\nContext:    server config, virtual host\nStatus: Extension\nModule: mod_ssl\n</code></pre>\n<blockquote>\n<p>This directive toggles the usage of the SSL/TLS Protocol Engine. This\nis should be used inside a  section to enable SSL/TLS for\na that virtual host. By default the SSL/TLS Protocol Engine is\ndisabled for both the main server and all configured virtual hosts.</p>\n</blockquote>\n<p><strong>Example</strong></p>\n<pre><code>&lt;VirtualHost _default_:443&gt;\nSSLEngine on\n#...\n&lt;/VirtualHost&gt;\n</code></pre>\n<blockquote>\n<p>In Apache 2.1 and later, SSLEngine can be set to optional. This\nenables support for RFC 2817, Upgrading to TLS Within HTTP/1.1. At\nthis time no web browsers support RFC 2817.</p>\n</blockquote>\n<p><a href=\"https://httpd.apache.org/docs/2.4/mod/mod_ssl.html#page-header\" rel=\"nofollow noreferrer\">https://httpd.apache.org/docs/2.4/mod/mod_ssl.html#page-header</a></p>\n"}],"owner":{"account_id":22498600,"reputation":46,"user_id":16695223,"display_name":"Vikas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":461,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1640085549,"answer_count":1,"score":0,"last_activity_date":1640079859,"creation_date":1640079135,"question_id":70433229,"body_markdown":"I have my Spring-boot app behind Apache proxy.\r\nMy app is working on `http` and SSL related tasks are handled by proxy server.\r\n\r\nI&#39;m using Spring-security&#39;s login page.\r\nBelow is my security configurations:\r\n\r\n```\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http.csrf().disable();\r\n        http.cors();\r\n\r\n        http.authorizeRequests()\r\n                .antMatchers(&quot;/admin/**&quot;).hasAuthority(&quot;Admin&quot;)\r\n                .anyRequest().permitAll()\r\n                .and()\r\n                .formLogin()\r\n                .defaultSuccessUrl(&quot;/admin&quot;, true);\r\n\r\n    }\r\n```\r\n\r\nSo as a person with Admin authority login successfully I redirect to /admin.\r\nThis was working fine until I used apache proxy.\r\n\r\nBefore using proxy it was working fine.\r\n\r\n&gt; ( http://myhost/login &gt;&gt; after successful login redirects To &gt;&gt; http://myhost/admin )\r\n\r\nAfter using proxy:\r\n&gt; ( https://myhost/login &gt;&gt; after successful login redirects To &gt;&gt; http://myhost/admin )\r\n\r\nThe main issue is that it redirecting to `http` instead of `https`.\r\n\r\nBelow is my apache proxy config:\r\n\r\n```\r\nProxyPreserveHost on\r\nProxyPass / http://127.0.0.1:8080/\r\nProxyPassReverse / http://127.0.0.1:8080/\r\n```\r\nMy question is how can I redirect to `https` after login.\r\n\r\nAny help would be appreciated !!!","title":"Spring security behind Apache reverse proxy","body":"<p>I have my Spring-boot app behind Apache proxy.\nMy app is working on <code>http</code> and SSL related tasks are handled by proxy server.</p>\n<p>I'm using Spring-security's login page.\nBelow is my security configurations:</p>\n<pre><code>    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.csrf().disable();\n        http.cors();\n\n        http.authorizeRequests()\n                .antMatchers(&quot;/admin/**&quot;).hasAuthority(&quot;Admin&quot;)\n                .anyRequest().permitAll()\n                .and()\n                .formLogin()\n                .defaultSuccessUrl(&quot;/admin&quot;, true);\n\n    }\n</code></pre>\n<p>So as a person with Admin authority login successfully I redirect to /admin.\nThis was working fine until I used apache proxy.</p>\n<p>Before using proxy it was working fine.</p>\n<blockquote>\n<p>( http://myhost/login &gt;&gt; after successful login redirects To &gt;&gt; http://myhost/admin )</p>\n</blockquote>\n<p>After using proxy:</p>\n<blockquote>\n<p>( https://myhost/login &gt;&gt; after successful login redirects To &gt;&gt; http://myhost/admin )</p>\n</blockquote>\n<p>The main issue is that it redirecting to <code>http</code> instead of <code>https</code>.</p>\n<p>Below is my apache proxy config:</p>\n<pre><code>ProxyPreserveHost on\nProxyPass / http://127.0.0.1:8080/\nProxyPassReverse / http://127.0.0.1:8080/\n</code></pre>\n<p>My question is how can I redirect to <code>https</code> after login.</p>\n<p>Any help would be appreciated !!!</p>\n"},{"tags":["java","arrays","arraylist","contains"],"comments":[{"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"score":0,"creation_date":1640079112,"post_id":70433197,"comment_id":124504301,"body_markdown":"You can use a `Map&lt;String,Card&gt;` instead of `ArrayList&lt;Card&gt;` and use `map.containsKey(split[2])`","body":"You can use a <code>Map&lt;String,Card&gt;</code> instead of <code>ArrayList&lt;Card&gt;</code> and use <code>map.containsKey(split[2])</code>"},{"owner":{"account_id":22488238,"reputation":165,"user_id":16686308,"display_name":"Luna"},"score":0,"creation_date":1640079207,"post_id":70433197,"comment_id":124504337,"body_markdown":"Additionally, does Card have an String constructor? You could do `player1hand.contains(new Card(split[2]))`. It is possible that you need to overload `equals` for this approach","body":"Additionally, does Card have an String constructor? You could do <code>player1hand.contains(new Card(split[2]))</code>. It is possible that you need to overload <code>equals</code> for this approach"}],"answers":[{"tags":[],"owner":{"account_id":23665009,"reputation":88,"user_id":17692595,"display_name":"Roggi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640079847,"creation_date":1640079847,"answer_id":70433376,"question_id":70433197,"body_markdown":"You should create a named constructor (from Effective Java J.Bloch) for your Card class and override `equals` and `hashCode` for it like this:\r\n\r\n```\r\nclass Card {\r\n    private String valueAsString;\r\n\r\n    /*your code here*/\r\n    \r\n    public static Card of(String valueAsString) {\r\n         Card card = /*create your card here*/\r\n         card.valueAsString = valueAsString;\r\n         return card;\r\n    }\r\n\r\n    @Override\r\n    public boolean equals(Object other) {\r\n         /*another part of equals*/\r\n         return Objects.equals(valueAsString, other.valueAsString);\r\n    }\r\n\r\n    @Override\r\n    public int hashCode() {\r\n         return Objects.hash(valueAsString);\r\n    }\r\n}\r\n```\r\n\r\nWith that named constructor you can just do the following thing:\r\n\r\n```\r\n    if (player1Hand.contains(Card.of(split[2]))) {\r\n         /*do something*/\r\n    }\r\n```\r\n\r\nThe explanation: as soon as `ArrayList` uses an `equals` method to compare elements in the array you need to define it properly. Besides, a named constructor helps you to create a placeholder object based on value of `split[2]`. With this two steps you will be able to use `contains` and it will work as you want to. Why should you override a `hashCode` too? You should do it, because there is an informal rule that you should always override `equals` and `hashCode` like a pair, because they have to do it&#39;s stuff with the same set of fields.","title":"Adding elements of different type to arraylist","body":"<p>You should create a named constructor (from Effective Java J.Bloch) for your Card class and override <code>equals</code> and <code>hashCode</code> for it like this:</p>\n<pre><code>class Card {\n    private String valueAsString;\n\n    /*your code here*/\n    \n    public static Card of(String valueAsString) {\n         Card card = /*create your card here*/\n         card.valueAsString = valueAsString;\n         return card;\n    }\n\n    @Override\n    public boolean equals(Object other) {\n         /*another part of equals*/\n         return Objects.equals(valueAsString, other.valueAsString);\n    }\n\n    @Override\n    public int hashCode() {\n         return Objects.hash(valueAsString);\n    }\n}\n</code></pre>\n<p>With that named constructor you can just do the following thing:</p>\n<pre><code>    if (player1Hand.contains(Card.of(split[2]))) {\n         /*do something*/\n    }\n</code></pre>\n<p>The explanation: as soon as <code>ArrayList</code> uses an <code>equals</code> method to compare elements in the array you need to define it properly. Besides, a named constructor helps you to create a placeholder object based on value of <code>split[2]</code>. With this two steps you will be able to use <code>contains</code> and it will work as you want to. Why should you override a <code>hashCode</code> too? You should do it, because there is an informal rule that you should always override <code>equals</code> and <code>hashCode</code> like a pair, because they have to do it's stuff with the same set of fields.</p>\n"}],"owner":{"account_id":23699676,"reputation":3,"user_id":17722990,"display_name":"KepaArizzabalaga"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1640079847,"creation_date":1640078981,"question_id":70433197,"body_markdown":"So I have an arraylist which looks like this `ArrayList&lt;Card&gt; player1Hand = Player.Player1(seed);`\r\nIt contains `[KH, 9L, 7L, 8L, KE]` Every combination represents one card.\r\nand an array `split[]` containing `[KH]`\r\n\r\nNow I tried this:\r\n`if (player1Hand.contains(split[2])) {//code}` Now the if statement does not get executed since split[] contains objects of type String and the arrayList contains objects of type `Card`. Is there an easy way to fix this?","title":"Adding elements of different type to arraylist","body":"<p>So I have an arraylist which looks like this <code>ArrayList&lt;Card&gt; player1Hand = Player.Player1(seed);</code>\nIt contains <code>[KH, 9L, 7L, 8L, KE]</code> Every combination represents one card.\nand an array <code>split[]</code> containing <code>[KH]</code></p>\n<p>Now I tried this:\n<code>if (player1Hand.contains(split[2])) {//code}</code> Now the if statement does not get executed since split[] contains objects of type String and the arrayList contains objects of type <code>Card</code>. Is there an easy way to fix this?</p>\n"},{"tags":["java","string-concatenation"],"comments":[{"owner":{"account_id":264582,"reputation":82175,"user_id":550966,"accept_rate":97,"display_name":"Pankaj Kumar"},"score":1,"creation_date":1325838069,"post_id":8755063,"comment_id":10909112,"body_markdown":"Read: http://stackoverflow.com/questions/693597/is-there-a-difference-between-string-concat-and-the-operator-in-java and http://stackoverflow.com/questions/47605/java-string-concatenation","body":"Read: <a href=\"http://stackoverflow.com/questions/693597/is-there-a-difference-between-string-concat-and-the-operator-in-java\" title=\"is there a difference between string concat and the operator in java\">stackoverflow.com/questions/693597/&hellip;</a> and <a href=\"http://stackoverflow.com/questions/47605/java-string-concatenation\" title=\"java string concatenation\">stackoverflow.com/questions/47605/java-string-concatenation</a>"},{"owner":{"account_id":264582,"reputation":82175,"user_id":550966,"accept_rate":97,"display_name":"Pankaj Kumar"},"score":0,"creation_date":1325838430,"post_id":8755063,"comment_id":10909181,"body_markdown":"About the only thing that looks different is when the string you are adding has zero length it just gives you back the original instead of creating a new String. The + operator can be a bit expensive ... if you are doing hundreds or thousands of string building operations look into StringBuffer.append(). It is common to see a method build up a StringBuffer and then return or use theBuffer.toString() at the end.","body":"About the only thing that looks different is when the string you are adding has zero length it just gives you back the original instead of creating a new String. The + operator can be a bit expensive ... if you are doing hundreds or thousands of string building operations look into StringBuffer.append(). It is common to see a method build up a StringBuffer and then return or use theBuffer.toString() at the end."},{"owner":{"account_id":261678,"reputation":2513,"user_id":546016,"accept_rate":69,"display_name":"ymajoros"},"score":0,"creation_date":1365059661,"post_id":8755063,"comment_id":22476589,"body_markdown":"@PankajKumar well, you probably want StringBuilder instead of StringBuffer","body":"@PankajKumar well, you probably want StringBuilder instead of StringBuffer"}],"answers":[{"tags":[],"owner":{"account_id":1080121,"reputation":4357,"user_id":1077325,"display_name":"Artem"},"down_vote_count":0,"up_vote_count":42,"is_accepted":true,"score":42,"last_activity_date":1496697802,"creation_date":1325837577,"answer_id":8755079,"question_id":8755063,"body_markdown":"The concat method always produces a new String with the result of concatenation. \r\n\r\nThe plus operator is backed by StringBuilder creation, appending all String values you need and further toString() calling on it.\r\n\r\nSo, if you need to concatenate two values, concat() will be better choice. If you need to concatenate 100 values, you should use the plus operator or explicitly use StringBuilder (e.g. in case of appending in a cycle).\r\n","title":"Concatenation operator (+) vs. concat()","body":"<p>The concat method always produces a new String with the result of concatenation. </p>\n\n<p>The plus operator is backed by StringBuilder creation, appending all String values you need and further toString() calling on it.</p>\n\n<p>So, if you need to concatenate two values, concat() will be better choice. If you need to concatenate 100 values, you should use the plus operator or explicitly use StringBuilder (e.g. in case of appending in a cycle).</p>\n"},{"tags":[],"owner":{"account_id":324087,"reputation":1527,"user_id":644474,"accept_rate":67,"display_name":"Ashish"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1496697851,"creation_date":1325837727,"answer_id":8755097,"question_id":8755063,"body_markdown":"Actually, both are the same. If you see the code of `concat(String paramString)` it will return a new object of string, and in the (+) operator it it will also generate a new string object.\r\n\r\nIf you don&#39;t want to create a new object then use string builder to concatenate two strings.\r\n","title":"Concatenation operator (+) vs. concat()","body":"<p>Actually, both are the same. If you see the code of <code>concat(String paramString)</code> it will return a new object of string, and in the (+) operator it it will also generate a new string object.</p>\n\n<p>If you don't want to create a new object then use string builder to concatenate two strings.</p>\n"},{"tags":[],"owner":{"account_id":83369,"reputation":15890,"user_id":233792,"accept_rate":72,"display_name":"Christian Kuetbach"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1496698047,"creation_date":1325837799,"answer_id":8755109,"question_id":8755063,"body_markdown":"In general it is a bad practice to concatenate Strings with `+` and with `concat()`. If you want to create a String use [`StringBuilder`][1] instead. \r\n\r\n  [1]: http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuilder.html\r\n","title":"Concatenation operator (+) vs. concat()","body":"<p>In general it is a bad practice to concatenate Strings with <code>+</code> and with <code>concat()</code>. If you want to create a String use <a href=\"http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuilder.html\" rel=\"nofollow noreferrer\"><code>StringBuilder</code></a> instead. </p>\n"},{"tags":[],"owner":{"account_id":169237,"reputation":39170,"user_id":395202,"accept_rate":59,"display_name":"Adrian Shum"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1496698321,"creation_date":1325838230,"answer_id":8755163,"question_id":8755063,"body_markdown":"I believe the &#39;style&#39; of concatenation is going to make a difference.\r\n\r\nFor concat(), it internally creates a new char array buffer, and returns a new string based on that char array.\r\n\r\nFor the + operator, the compiler in fact translate it to use StringBuffer/StringBuilder.\r\n\r\nTherefore, if you are concatenating two strings, concat() is definitely a better choice because the number of objects created is only the result String (and the char buffer used inside), while using the `+` operator will be translated to:\r\n\r\n    result = strA + strB;\r\n    -- translate to --&gt;\r\n    result = new StringBuilder(strA).append(strB).toString();\r\n\r\nAn extra StringBuilder instance is created.\r\n\r\nHowever, if you are concatenating, for example five strings in a row, each concat() will create a new String object. While using the `+` operator, the compiler will translate the statement to one StringBuilder with multiple append operations. It is definitely saving a lot of unnecessary temporary object instance:\r\n\r\n    result = strA + strB + strC + strD + strE;\r\n    -- translate to --&gt;\r\n    result = new StringBuilder(strA).append(strB).append(strC).append(strD).append(strE).toString();\r\n","title":"Concatenation operator (+) vs. concat()","body":"<p>I believe the 'style' of concatenation is going to make a difference.</p>\n\n<p>For concat(), it internally creates a new char array buffer, and returns a new string based on that char array.</p>\n\n<p>For the + operator, the compiler in fact translate it to use StringBuffer/StringBuilder.</p>\n\n<p>Therefore, if you are concatenating two strings, concat() is definitely a better choice because the number of objects created is only the result String (and the char buffer used inside), while using the <code>+</code> operator will be translated to:</p>\n\n<pre><code>result = strA + strB;\n-- translate to --&gt;\nresult = new StringBuilder(strA).append(strB).toString();\n</code></pre>\n\n<p>An extra StringBuilder instance is created.</p>\n\n<p>However, if you are concatenating, for example five strings in a row, each concat() will create a new String object. While using the <code>+</code> operator, the compiler will translate the statement to one StringBuilder with multiple append operations. It is definitely saving a lot of unnecessary temporary object instance:</p>\n\n<pre><code>result = strA + strB + strC + strD + strE;\n-- translate to --&gt;\nresult = new StringBuilder(strA).append(strB).append(strC).append(strD).append(strE).toString();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":280134,"reputation":9173,"user_id":575659,"accept_rate":93,"display_name":"dantuch"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1496698443,"creation_date":1325838257,"answer_id":8755169,"question_id":8755063,"body_markdown":"You can **always** use `+` if only you use  &gt;= Java 1.5 and you **don&#39;t** declare your base String (that you want concatenate) outside of the loop. In Java 1.5 it results in creating `new StringBuilder` and working on it till your string is complete. That&#39;s the fastest way.\r\n\r\nAnyway - if you are in a loop (and concatenating strings with `+`) - every iteration of the loop creates a `new StringBuilder` - that&#39;s not the best idea. So this is where you should force the use of `StringBuilder` or `StringBuffer` (thread safe) classes.\r\n\r\nGenerally, this link clearly answers your question, and gives you complete knowledge:\r\n\r\nhttp://littletutorials.com/2008/07/16/stringbuffer-vs-stringbuilder-performance-comparison/\r\n","title":"Concatenation operator (+) vs. concat()","body":"<p>You can <strong>always</strong> use <code>+</code> if only you use  >= Java 1.5 and you <strong>don't</strong> declare your base String (that you want concatenate) outside of the loop. In Java 1.5 it results in creating <code>new StringBuilder</code> and working on it till your string is complete. That's the fastest way.</p>\n\n<p>Anyway - if you are in a loop (and concatenating strings with <code>+</code>) - every iteration of the loop creates a <code>new StringBuilder</code> - that's not the best idea. So this is where you should force the use of <code>StringBuilder</code> or <code>StringBuffer</code> (thread safe) classes.</p>\n\n<p>Generally, this link clearly answers your question, and gives you complete knowledge:</p>\n\n<p><a href=\"http://littletutorials.com/2008/07/16/stringbuffer-vs-stringbuilder-performance-comparison/\" rel=\"nofollow noreferrer\">http://littletutorials.com/2008/07/16/stringbuffer-vs-stringbuilder-performance-comparison/</a></p>\n"},{"tags":[],"owner":{"account_id":1143007,"reputation":1974,"user_id":1126412,"accept_rate":50,"display_name":"Manikandan Sigamani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1496698548,"creation_date":1325838279,"answer_id":8755174,"question_id":8755063,"body_markdown":"Though both the operator and the method are giving the same output, the way they work internally differs.\r\n\r\nThe `concat()` method that just concatenates str1 with str2 and outputs a string, is more efficient for a small number of concatenations.\r\n\r\nBut with concatenation operator &#39;+&#39;, `str1+=str2`; will be interpreted as\r\n`str1 = new StringBuilder().append(str1).append(str2).toString();`\r\n\r\nYou can use the concat method when using a fewer number of strings to concatenate. But the StringBuilder method would be fast in terms of performance, if you are using a large number of strings.\r\n","title":"Concatenation operator (+) vs. concat()","body":"<p>Though both the operator and the method are giving the same output, the way they work internally differs.</p>\n\n<p>The <code>concat()</code> method that just concatenates str1 with str2 and outputs a string, is more efficient for a small number of concatenations.</p>\n\n<p>But with concatenation operator '+', <code>str1+=str2</code>; will be interpreted as\n<code>str1 = new StringBuilder().append(str1).append(str2).toString();</code></p>\n\n<p>You can use the concat method when using a fewer number of strings to concatenate. But the StringBuilder method would be fast in terms of performance, if you are using a large number of strings.</p>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1363476494,"creation_date":1325838306,"answer_id":8755178,"question_id":8755063,"body_markdown":"Your test needs to be running for at least 2 seconds with each loop in a separate method to be meaningful.  Short tests can be every difficult to reproduce and compare. From your timing it appears you are using Windows (i.e. because you times are 16 and 31 ms ;) Try System.nanoTime() instead.  When your loop iterates over 10,000 times the whole method is compiled.  This means your later method is already compiled when it is started.\r\n\r\nIn answer to your question concat is marginally faster when adding two Strings.  However, it comes with a typing and conceptual overhead which is likely to be much greater than the CPU you save.  Even based on your tests repeating 100,000 times it saves less than 15 ms, and yet it cost you far, far more than that in your time (which is likely to be worth more)  You could find in a future version of the JVM, the difference is optimised always and the complexity of your code is still there.\r\n\r\n---\r\n\r\nEDIT: I didn&#39;t notice that the memory result was suspect.\r\n\r\n    String str = null;\r\n\r\n    //------------Using Concatenation operator-------------\r\n    long time1 = System.currentTimeMillis();\r\n    long freeMemory1 = Runtime.getRuntime().freeMemory();\r\n    for (int i = 0; i &lt; 10000; i++) {\r\n        str = &quot;Hi&quot;;\r\n        str = str + &quot; Bye&quot;;\r\n    }\r\n    long time2 = System.currentTimeMillis();\r\n    long freeMemory2 = Runtime.getRuntime().freeMemory();\r\n\r\n    long timetaken1 = time2 - time1;\r\n    long memoryTaken1 = freeMemory1 - freeMemory2;\r\n    System.out.println(&quot;Concat operator  :&quot; + &quot;Time taken =&quot; + timetaken1 + &quot; Memory Consumed= &quot; + memoryTaken1);\r\n\r\n    str = null;\r\n    //------------Using Concat method-------------\r\n    long time3 = System.currentTimeMillis();\r\n    long freeMemory3 = Runtime.getRuntime().freeMemory();\r\n    for (int j = 0; j &lt; 10000; j++) {\r\n        str = &quot;Hi&quot;;\r\n        str = str.concat(&quot; Bye&quot;);\r\n\r\n    }\r\n    long time4 = System.currentTimeMillis();\r\n    long freeMemory4 = Runtime.getRuntime().freeMemory();\r\n\r\n    long timetaken2 = time4 - time3;\r\n    long memoryTaken2 = freeMemory3 - freeMemory4;\r\n    System.out.println(&quot;Concat method  :&quot; + &quot;Time taken =&quot; + timetaken2 + &quot; Memory Consumed= &quot; + memoryTaken2);\r\n\r\nprints when run with `-XX:-UseTLAB -mx1g`\r\n\r\n\r\n    Concat operator  :Time taken =12 Memory Consumed= 1291456\r\n    Concat method  :Time taken =7 Memory Consumed= 560000\r\n\r\nmaking the ratio of memory usage about 2:1.  In the original question the result vary every time you run it, sometimes the `.concat()` appears to use more.\r\n\r\n","title":"Concatenation operator (+) vs. concat()","body":"<p>Your test needs to be running for at least 2 seconds with each loop in a separate method to be meaningful.  Short tests can be every difficult to reproduce and compare. From your timing it appears you are using Windows (i.e. because you times are 16 and 31 ms ;) Try System.nanoTime() instead.  When your loop iterates over 10,000 times the whole method is compiled.  This means your later method is already compiled when it is started.</p>\n\n<p>In answer to your question concat is marginally faster when adding two Strings.  However, it comes with a typing and conceptual overhead which is likely to be much greater than the CPU you save.  Even based on your tests repeating 100,000 times it saves less than 15 ms, and yet it cost you far, far more than that in your time (which is likely to be worth more)  You could find in a future version of the JVM, the difference is optimised always and the complexity of your code is still there.</p>\n\n<hr>\n\n<p>EDIT: I didn't notice that the memory result was suspect.</p>\n\n<pre><code>String str = null;\n\n//------------Using Concatenation operator-------------\nlong time1 = System.currentTimeMillis();\nlong freeMemory1 = Runtime.getRuntime().freeMemory();\nfor (int i = 0; i &lt; 10000; i++) {\n    str = \"Hi\";\n    str = str + \" Bye\";\n}\nlong time2 = System.currentTimeMillis();\nlong freeMemory2 = Runtime.getRuntime().freeMemory();\n\nlong timetaken1 = time2 - time1;\nlong memoryTaken1 = freeMemory1 - freeMemory2;\nSystem.out.println(\"Concat operator  :\" + \"Time taken =\" + timetaken1 + \" Memory Consumed= \" + memoryTaken1);\n\nstr = null;\n//------------Using Concat method-------------\nlong time3 = System.currentTimeMillis();\nlong freeMemory3 = Runtime.getRuntime().freeMemory();\nfor (int j = 0; j &lt; 10000; j++) {\n    str = \"Hi\";\n    str = str.concat(\" Bye\");\n\n}\nlong time4 = System.currentTimeMillis();\nlong freeMemory4 = Runtime.getRuntime().freeMemory();\n\nlong timetaken2 = time4 - time3;\nlong memoryTaken2 = freeMemory3 - freeMemory4;\nSystem.out.println(\"Concat method  :\" + \"Time taken =\" + timetaken2 + \" Memory Consumed= \" + memoryTaken2);\n</code></pre>\n\n<p>prints when run with <code>-XX:-UseTLAB -mx1g</code></p>\n\n<pre><code>Concat operator  :Time taken =12 Memory Consumed= 1291456\nConcat method  :Time taken =7 Memory Consumed= 560000\n</code></pre>\n\n<p>making the ratio of memory usage about 2:1.  In the original question the result vary every time you run it, sometimes the <code>.concat()</code> appears to use more.</p>\n"},{"tags":[],"owner":{"account_id":2052678,"reputation":134073,"user_id":1831293,"accept_rate":91,"display_name":"Evgeniy Dorofeev"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1640079737,"creation_date":1354780651,"answer_id":13739225,"question_id":8755063,"body_markdown":"In fact `s1 + s2` and `s1.concat(s2)` are very different.\r\n\r\n`s1 + s2` is converted by javac into\r\n\r\n    (new StringBuilder(String.valueOf(s1)).append(s2).toString();\r\n\r\nYou can see it if you decompile .class. This construct is not very efficient; it involves up to three `new char[]` allocations and three `char[]` copy operations.\r\n\r\n`s1.concat(s2)` is always one `new char[]` + one copy operation, see String.java\r\n\r\n    public String concat(String str) {\r\n        int otherLen = str.length();\r\n        if (otherLen == 0) {\r\n            return this;\r\n        }\r\n        char buf[] = new char[count + otherLen];\r\n        getChars(0, count, buf, 0);\r\n        str.getChars(0, otherLen, buf, count);\r\n        return new String(0, count + otherLen, buf);\r\n    }\r\n\r\nNote that `new String(int, int, char[])` is `String`&#39;s package private constructor. It uses `char buf[]` directly, without the usual copying to ensure the `buf` invisibility for the `String` immutability.\r\n\r\n","title":"Concatenation operator (+) vs. concat()","body":"<p>In fact <code>s1 + s2</code> and <code>s1.concat(s2)</code> are very different.</p>\n<p><code>s1 + s2</code> is converted by javac into</p>\n<pre><code>(new StringBuilder(String.valueOf(s1)).append(s2).toString();\n</code></pre>\n<p>You can see it if you decompile .class. This construct is not very efficient; it involves up to three <code>new char[]</code> allocations and three <code>char[]</code> copy operations.</p>\n<p><code>s1.concat(s2)</code> is always one <code>new char[]</code> + one copy operation, see String.java</p>\n<pre><code>public String concat(String str) {\n    int otherLen = str.length();\n    if (otherLen == 0) {\n        return this;\n    }\n    char buf[] = new char[count + otherLen];\n    getChars(0, count, buf, 0);\n    str.getChars(0, otherLen, buf, count);\n    return new String(0, count + otherLen, buf);\n}\n</code></pre>\n<p>Note that <code>new String(int, int, char[])</code> is <code>String</code>'s package private constructor. It uses <code>char buf[]</code> directly, without the usual copying to ensure the <code>buf</code> invisibility for the <code>String</code> immutability.</p>\n"}],"owner":{"account_id":38907,"reputation":53159,"user_id":111988,"accept_rate":74,"display_name":"Sunil Kumar Sahoo"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44021,"favorite_count":0,"down_vote_count":1,"up_vote_count":29,"closed_date":1408495766,"accepted_answer_id":8755079,"answer_count":8,"score":28,"last_activity_date":1640079737,"creation_date":1325837472,"question_id":8755063,"body_markdown":"For string concatenation we can use either the `concat()` or concat operator `(+)`.\r\n\r\nI have tried the following performance test and found `concat()` is faster and a memory efficient way for string concatenation.\r\n\r\n**String concatenation comparison for 100,000 times**:\r\n\r\n    String str = null;\r\n\r\n    //------------Using Concatenation operator-------------\r\n    long time1 = System.currentTimeMillis();\r\n    long freeMemory1 = Runtime.getRuntime().freeMemory();\r\n\r\n    for(int i=0; i&lt;100000; i++){\r\n        str = &quot;Hi&quot;;\r\n        str = str+&quot; Bye&quot;;\r\n    }\r\n    long time2 = System.currentTimeMillis();\r\n    long freeMemory2 = Runtime.getRuntime().freeMemory();\r\n\r\n    long timetaken1 = time2-time1;\r\n    long memoryTaken1 = freeMemory1 - freeMemory2;\r\n    System.out.println(&quot;Concat operator  :&quot; + &quot;Time taken =&quot; + timetaken1 +\r\n                       &quot; Memory Consumed =&quot; + memoryTaken1);\r\n\r\n    //------------Using Concat method-------------\r\n    long time3 = System.currentTimeMillis();\r\n    long freeMemory3 = Runtime.getRuntime().freeMemory();\r\n    for(int j=0; j&lt;100000; j++){\r\n        str = &quot;Hi&quot;;\r\n        str = str.concat(&quot; Bye&quot;);\r\n    }\r\n    long time4 = System.currentTimeMillis();\r\n    long freeMemory4 = Runtime.getRuntime().freeMemory();\r\n    long timetaken2 = time4-time3;\r\n    long memoryTaken2 = freeMemory3 - freeMemory4;\r\n    System.out.println(&quot;Concat method  :&quot; + &quot;Time taken =&quot; + timetaken2 +\r\n                       &quot; Memory Consumed =&quot; + memoryTaken2);\r\n\r\n**Result**\r\n\r\n    Concat operator: Time taken = 31; Memory Consumed = 2259096\r\n    Concat method  : Time taken = 16; Memory Consumed = 299592\r\n\r\n**If `concat()` is faster than the operator then when should we use concatenation operator `(+)`?**\r\n","title":"Concatenation operator (+) vs. concat()","body":"<p>For string concatenation we can use either the <code>concat()</code> or concat operator <code>(+)</code>.</p>\n\n<p>I have tried the following performance test and found <code>concat()</code> is faster and a memory efficient way for string concatenation.</p>\n\n<p><strong>String concatenation comparison for 100,000 times</strong>:</p>\n\n<pre><code>String str = null;\n\n//------------Using Concatenation operator-------------\nlong time1 = System.currentTimeMillis();\nlong freeMemory1 = Runtime.getRuntime().freeMemory();\n\nfor(int i=0; i&lt;100000; i++){\n    str = \"Hi\";\n    str = str+\" Bye\";\n}\nlong time2 = System.currentTimeMillis();\nlong freeMemory2 = Runtime.getRuntime().freeMemory();\n\nlong timetaken1 = time2-time1;\nlong memoryTaken1 = freeMemory1 - freeMemory2;\nSystem.out.println(\"Concat operator  :\" + \"Time taken =\" + timetaken1 +\n                   \" Memory Consumed =\" + memoryTaken1);\n\n//------------Using Concat method-------------\nlong time3 = System.currentTimeMillis();\nlong freeMemory3 = Runtime.getRuntime().freeMemory();\nfor(int j=0; j&lt;100000; j++){\n    str = \"Hi\";\n    str = str.concat(\" Bye\");\n}\nlong time4 = System.currentTimeMillis();\nlong freeMemory4 = Runtime.getRuntime().freeMemory();\nlong timetaken2 = time4-time3;\nlong memoryTaken2 = freeMemory3 - freeMemory4;\nSystem.out.println(\"Concat method  :\" + \"Time taken =\" + timetaken2 +\n                   \" Memory Consumed =\" + memoryTaken2);\n</code></pre>\n\n<p><strong>Result</strong></p>\n\n<pre><code>Concat operator: Time taken = 31; Memory Consumed = 2259096\nConcat method  : Time taken = 16; Memory Consumed = 299592\n</code></pre>\n\n<p><strong>If <code>concat()</code> is faster than the operator then when should we use concatenation operator <code>(+)</code>?</strong></p>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":10751880,"reputation":3351,"user_id":7910980,"display_name":"Amit Phaltankar"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1520558706,"creation_date":1520556155,"answer_id":49184881,"question_id":49184683,"body_markdown":"You should use springs `@ConfigurationProperties` and heve nested classes in your `MyClass`\r\n\r\n    @ConfigurationProperties(prefix=&quot;my.prefix&quot;)\r\n    public class MyClass{\r\n      \r\n      private One id01;\r\n      private Two id02;\r\n      //GETTER SETTER\r\n \r\n      public static class One {\r\n        private String id;\r\n        // GETTER SETTER\r\n      }\r\n\r\n      public static class Two {\r\n        private String id;\r\n        // GETTER SETTER\r\n      }\r\n    }\r\n\r\nThen you can access it like\r\n\r\n    myClass.getOne().getId();\r\n\r\nBest thing for you to do is read through https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html#boot-features-external-config-typesafe-configuration-properties\r\n\r\n\r\n----------\r\n\r\n\r\n&gt; Update: OP doen&#39;t want to use nested classes to retrieve those fields\r\n\r\n        @ConfigurationProperties(prefix=&quot;my.prefix&quot;)\r\n        public class MyClass{\r\n          private String id01;\r\n          private String id02;\r\n    \r\n          @NotNull\r\n          private One one;\r\n          @NotNull\r\n          private Two two;\r\n         \r\n          public getId01(){\r\n            return one.id;\r\n          }\r\n          public getId02(){\r\n            return two.id;\r\n          }\r\n          \r\n          public static class One {\r\n            private String id;\r\n            // GETTER SETTER\r\n          }\r\n    \r\n          public static class Two {\r\n            private String id;\r\n            // GETTER SETTER\r\n          }\r\n        }\r\n\r\nand now you can use them like\r\n \r\n\r\n       myClass.getId01();\r\n       myClass.getId02();\r\n\r\n","title":"Is it possible to create multiple beans depending on prefix in application.properties in springboot","body":"<p>You should use springs <code>@ConfigurationProperties</code> and heve nested classes in your <code>MyClass</code></p>\n\n<pre><code>@ConfigurationProperties(prefix=\"my.prefix\")\npublic class MyClass{\n\n  private One id01;\n  private Two id02;\n  //GETTER SETTER\n\n  public static class One {\n    private String id;\n    // GETTER SETTER\n  }\n\n  public static class Two {\n    private String id;\n    // GETTER SETTER\n  }\n}\n</code></pre>\n\n<p>Then you can access it like</p>\n\n<pre><code>myClass.getOne().getId();\n</code></pre>\n\n<p>Best thing for you to do is read through <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html#boot-features-external-config-typesafe-configuration-properties\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html#boot-features-external-config-typesafe-configuration-properties</a></p>\n\n<hr>\n\n<blockquote>\n  <p>Update: OP doen't want to use nested classes to retrieve those fields</p>\n</blockquote>\n\n<pre><code>    @ConfigurationProperties(prefix=\"my.prefix\")\n    public class MyClass{\n      private String id01;\n      private String id02;\n\n      @NotNull\n      private One one;\n      @NotNull\n      private Two two;\n\n      public getId01(){\n        return one.id;\n      }\n      public getId02(){\n        return two.id;\n      }\n\n      public static class One {\n        private String id;\n        // GETTER SETTER\n      }\n\n      public static class Two {\n        private String id;\n        // GETTER SETTER\n      }\n    }\n</code></pre>\n\n<p>and now you can use them like</p>\n\n<pre><code>   myClass.getId01();\n   myClass.getId02();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4996148,"reputation":462,"user_id":4016683,"display_name":"Pavan Kumar"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1553358489,"creation_date":1553358489,"answer_id":55315886,"question_id":49184683,"body_markdown":"Since you are using springboot, you can also do:\r\n\r\n    @Configuration\r\n    public class AppBeanConfig {\r\n        @Bean\r\n        @ConfigurationProperties(prefix=&quot;my.prefix.one&quot;)  \r\n        public MyClass myClassOne(){\r\n          return new MyClass();\r\n       }\r\n    \r\n        @Bean\r\n        @ConfigurationProperties(prefix=&quot;my.prefix.two&quot;)  \r\n        public MyClass myClassTwo(){\r\n          return new MyClass();\r\n       }\r\n    }\r\n\r\nI am not aware of any meaningfull ways to avoid configuring individual beans.\r\n\r\nHowever, if that what you really want to do, you can gain access to ApplicationContext and manually process the properties and inject beans to Applicationcontext, personally I would prefer add multiple bean methods to configuration class than directly manipulating ApplicationContext.","title":"Is it possible to create multiple beans depending on prefix in application.properties in springboot","body":"<p>Since you are using springboot, you can also do:</p>\n\n<pre><code>@Configuration\npublic class AppBeanConfig {\n    @Bean\n    @ConfigurationProperties(prefix=\"my.prefix.one\")  \n    public MyClass myClassOne(){\n      return new MyClass();\n   }\n\n    @Bean\n    @ConfigurationProperties(prefix=\"my.prefix.two\")  \n    public MyClass myClassTwo(){\n      return new MyClass();\n   }\n}\n</code></pre>\n\n<p>I am not aware of any meaningfull ways to avoid configuring individual beans.</p>\n\n<p>However, if that what you really want to do, you can gain access to ApplicationContext and manually process the properties and inject beans to Applicationcontext, personally I would prefer add multiple bean methods to configuration class than directly manipulating ApplicationContext.</p>\n"},{"tags":[],"owner":{"account_id":3803727,"reputation":323,"user_id":3156671,"display_name":"Mick Belker - Pseudonym"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1589267468,"creation_date":1589267468,"answer_id":61745811,"question_id":49184683,"body_markdown":"If the properties for one, two are the same, simply use the same class. Lombok helps you to auto-create getter/setter methods, which are required in order to make it worke\r\n\r\n    @Getter\r\n    @Setter\r\n    @Configuration\r\n    @ConfigurationProperties(prefix=&quot;my.prefix&quot;)\r\n    public class MyClass {\r\n\r\n      private Child one;\r\n      private Child two;\r\n\r\n      @Getter\r\n      @Setter\r\n      public static class Child {\r\n\r\n        @NotNull\r\n        private String id;\r\n        @NotNull\r\n        private String name;\r\n      }\r\n    }","title":"Is it possible to create multiple beans depending on prefix in application.properties in springboot","body":"<p>If the properties for one, two are the same, simply use the same class. Lombok helps you to auto-create getter/setter methods, which are required in order to make it worke</p>\n\n<pre><code>@Getter\n@Setter\n@Configuration\n@ConfigurationProperties(prefix=\"my.prefix\")\npublic class MyClass {\n\n  private Child one;\n  private Child two;\n\n  @Getter\n  @Setter\n  public static class Child {\n\n    @NotNull\n    private String id;\n    @NotNull\n    private String name;\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":322960,"reputation":7711,"user_id":642680,"accept_rate":74,"display_name":"D-Dᴙum"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640079494,"creation_date":1640079494,"answer_id":70433307,"question_id":49184683,"body_markdown":"I have tried to do similar and as far as I am aware the only way to create multiple instances is to to get *all* properties with a specified prefix and parse them yourself. For your example you could construct a `@Configuration` like so:\r\n```\r\n@Configuration\r\npublic class MyConfig {\r\n\r\n    @Bean\r\n    @ConfigurationProperties(prefix = &quot;my.prefix&quot;)\r\n    protected Map&lt;String, String&gt; myProperties() {\r\n        return new HashMap&lt;&gt;();\r\n    }\r\n\r\n    @Bean\r\n    public List&lt;MyClass&gt; myObjects(@Qualifier(&quot;myProperties&quot;) final Map&lt;String, String&gt; myProperties) {\r\n\r\n        final Map&lt;String, Map&lt;String, String&gt;&gt; mappedSources = new HashMap&lt;&gt;();\r\n        myProperties.forEach((key1, value) -&gt; {\r\n            final String[] key = key1.split(&quot;\\\\.&quot;);\r\n            final Map&lt;String, String&gt; myInstanceParams = mappedSources.computeIfAbsent(key[0], s -&gt; new HashMap&lt;&gt;(2));\r\n            myInstanceParams.put(key[1], value);\r\n        });\r\n        return mappedSources.values().stream()\r\n                .map(stringStringMap -&gt; new MyClass(stringStringMap.get(&quot;id&quot;), stringStringMap.get(&quot;name&quot;)))\r\n                .collect(Collectors.toList());\r\n    }\r\n}\r\n```\r\n\r\nIn this simple instance the `@Qualifier` is not needed in `myObjects()` parameter list but if you introduce a second prefix where you want to do similar then you need to qualify which map of strings is to be passed into the `myObjects()` method so I would recommend just including it from the start.\r\n\r\nThis is a simple example but a more robust implementation would check for missing properties and property validity etc. Nor can I say if this solution is good practice/good Spring practice.\r\n\r\n","title":"Is it possible to create multiple beans depending on prefix in application.properties in springboot","body":"<p>I have tried to do similar and as far as I am aware the only way to create multiple instances is to to get <em>all</em> properties with a specified prefix and parse them yourself. For your example you could construct a <code>@Configuration</code> like so:</p>\n<pre><code>@Configuration\npublic class MyConfig {\n\n    @Bean\n    @ConfigurationProperties(prefix = &quot;my.prefix&quot;)\n    protected Map&lt;String, String&gt; myProperties() {\n        return new HashMap&lt;&gt;();\n    }\n\n    @Bean\n    public List&lt;MyClass&gt; myObjects(@Qualifier(&quot;myProperties&quot;) final Map&lt;String, String&gt; myProperties) {\n\n        final Map&lt;String, Map&lt;String, String&gt;&gt; mappedSources = new HashMap&lt;&gt;();\n        myProperties.forEach((key1, value) -&gt; {\n            final String[] key = key1.split(&quot;\\\\.&quot;);\n            final Map&lt;String, String&gt; myInstanceParams = mappedSources.computeIfAbsent(key[0], s -&gt; new HashMap&lt;&gt;(2));\n            myInstanceParams.put(key[1], value);\n        });\n        return mappedSources.values().stream()\n                .map(stringStringMap -&gt; new MyClass(stringStringMap.get(&quot;id&quot;), stringStringMap.get(&quot;name&quot;)))\n                .collect(Collectors.toList());\n    }\n}\n</code></pre>\n<p>In this simple instance the <code>@Qualifier</code> is not needed in <code>myObjects()</code> parameter list but if you introduce a second prefix where you want to do similar then you need to qualify which map of strings is to be passed into the <code>myObjects()</code> method so I would recommend just including it from the start.</p>\n<p>This is a simple example but a more robust implementation would check for missing properties and property validity etc. Nor can I say if this solution is good practice/good Spring practice.</p>\n"}],"owner":{"account_id":4071823,"reputation":567,"user_id":3344591,"accept_rate":24,"display_name":"user3344591"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2383,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"answer_count":4,"score":4,"last_activity_date":1640079494,"creation_date":1520554723,"question_id":49184683,"body_markdown":"I have the following in my application.properties in my springboot application (1.5.4.RELEASE)\r\n\r\n    my.prefix.one.id=id01\r\n    my.prefix.one.name=one\r\n    \r\n    my.prefix.two.id=id02\r\n    my.prefix.two.name=two\r\n\r\nAnd a class like the following\r\n\r\n    public class MyClass{\r\n     private String id;\r\n     private String name;\r\n     //getters and setters\r\n    }\r\n\r\nIf I use @ConfigurationProperties(prefix=&quot;my.prefix.one&quot;) then I get a MyClass bean with id field &quot;id01&quot;.\r\n\r\nIs there a way to indicate springboot to scan scan for all the properties with prefix &quot;my.prefix&quot; and create multiple beans. In this case two beans - bean with id field &quot;id01&quot; and bean with id field &quot;id02&quot; ?","title":"Is it possible to create multiple beans depending on prefix in application.properties in springboot","body":"<p>I have the following in my application.properties in my springboot application (1.5.4.RELEASE)</p>\n\n<pre><code>my.prefix.one.id=id01\nmy.prefix.one.name=one\n\nmy.prefix.two.id=id02\nmy.prefix.two.name=two\n</code></pre>\n\n<p>And a class like the following</p>\n\n<pre><code>public class MyClass{\n private String id;\n private String name;\n //getters and setters\n}\n</code></pre>\n\n<p>If I use @ConfigurationProperties(prefix=\"my.prefix.one\") then I get a MyClass bean with id field \"id01\".</p>\n\n<p>Is there a way to indicate springboot to scan scan for all the properties with prefix \"my.prefix\" and create multiple beans. In this case two beans - bean with id field \"id01\" and bean with id field \"id02\" ?</p>\n"},{"tags":["java","string","date","datetime","timestamp"],"comments":[{"owner":{"account_id":5004307,"reputation":3369,"user_id":4022390,"accept_rate":55,"display_name":"Viet"},"score":0,"creation_date":1478502190,"post_id":40459337,"comment_id":68164067,"body_markdown":"why not convert `stopDate1` to `TimeStamp` instead of `timeString ` ?","body":"why not convert <code>stopDate1</code> to <code>TimeStamp</code> instead of <code>timeString </code> ?"},{"owner":{"account_id":6009919,"reputation":547,"user_id":4720669,"display_name":"Aakash Patel"},"score":0,"creation_date":1478510559,"post_id":40459337,"comment_id":68168107,"body_markdown":"Beacuse stopDate1 has date and other time data as well. And i want only HH:MM. So i took them out in a string first. But nevermind,                 Object d1 = getMappedObjectValue(reportBeamDataMap, ReportBeamConstant.DAT_STOPDATE);\nDate stopDate12 = (Date)d1;\nSimpleDateFormat printFormat1 = new SimpleDateFormat(&quot;hh:mm&quot;);\nString timeString1 = printFormat.format(stopDate1);\t\t\t\t\t\nTimestamp tm1 = new Timestamp(printFormat1.parse(timeString1).getTime());  This worked perfectly fine. Thanks","body":"Beacuse stopDate1 has date and other time data as well. And i want only HH:MM. So i took them out in a string first. But nevermind,                 Object d1 = getMappedObjectValue(reportBeamDataMap, ReportBeamConstant.DAT_STOPDATE); Date stopDate12 = (Date)d1; SimpleDateFormat printFormat1 = new SimpleDateFormat(&quot;hh:mm&quot;); String timeString1 = printFormat.format(stopDate1);\t\t\t\t\t Timestamp tm1 = new Timestamp(printFormat1.parse(timeString1).getTime());  This worked perfectly fine. Thanks"}],"answers":[{"tags":[],"owner":{"account_id":5523724,"reputation":22000,"user_id":4385895,"accept_rate":58,"display_name":"Vasu"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1478503332,"creation_date":1478502126,"answer_id":40459484,"question_id":40459337,"body_markdown":"You can use LocalTime to store times (from a string and vice-versa) as shown below:\r\n\r\n**Option(1): With Java8**\r\n\r\nYou can use Java8&#39;s LocalTime API for this, you can look [here][1]\r\n\r\n    String timeString = printFormat.format(stopDate1);\r\n    //Get your localTime object from timeString\r\n    LocalTime localTime = LocalTime.parse(timeString);\r\n&gt; static LocalTime\tparse(CharSequence text) Obtains an instance of\r\n&gt; LocalTime from a text string such as 10:15.\r\n\r\n**Option(2): Without Java8**\r\n\r\nYou need to use jodatime library API, you can look [here][2]\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/time/LocalTime.html\r\n  [2]: http://www.joda.org/joda-time/","title":"How do I convert &quot;HH:MM&quot; format string to Timestamp in Java?","body":"<p>You can use LocalTime to store times (from a string and vice-versa) as shown below:</p>\n\n<p><strong>Option(1): With Java8</strong></p>\n\n<p>You can use Java8's LocalTime API for this, you can look <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/LocalTime.html\" rel=\"nofollow noreferrer\">here</a></p>\n\n<pre><code>String timeString = printFormat.format(stopDate1);\n//Get your localTime object from timeString\nLocalTime localTime = LocalTime.parse(timeString);\n</code></pre>\n\n<blockquote>\n  <p>static LocalTime  parse(CharSequence text) Obtains an instance of\n  LocalTime from a text string such as 10:15.</p>\n</blockquote>\n\n<p><strong>Option(2): Without Java8</strong></p>\n\n<p>You need to use jodatime library API, you can look <a href=\"http://www.joda.org/joda-time/\" rel=\"nofollow noreferrer\">here</a></p>\n"},{"tags":[],"owner":{"account_id":6663253,"reputation":1979,"user_id":5141632,"display_name":"Albin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1478502470,"creation_date":1478502470,"answer_id":40459559,"question_id":40459337,"body_markdown":"Timestamp format must be yyyy-mm-dd hh:mm:ss[.fffffffff]\r\n\r\nYou can convert date object to Timestamp directly by\r\n\r\n     Timestamp timestamp = new Timestamp(stopDate1.getTime());","title":"How do I convert &quot;HH:MM&quot; format string to Timestamp in Java?","body":"<p>Timestamp format must be yyyy-mm-dd hh:mm:ss[.fffffffff]</p>\n\n<p>You can convert date object to Timestamp directly by</p>\n\n<pre><code> Timestamp timestamp = new Timestamp(stopDate1.getTime());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7588258,"reputation":36,"user_id":5756650,"display_name":"Sai kiran"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1478503225,"creation_date":1478503225,"answer_id":40459752,"question_id":40459337,"body_markdown":"Please Use parse method to get Date Object and then construct Timestamp object.\r\n\r\n   \r\n\r\n     try {\r\n        Timestamp timestamp = new Timestamp(printFormat.parse(timeString).getTime());\r\n        } catch (ParseException e) {\r\n        \te.printStackTrace();\r\n        }","title":"How do I convert &quot;HH:MM&quot; format string to Timestamp in Java?","body":"<p>Please Use parse method to get Date Object and then construct Timestamp object.</p>\n\n<pre><code> try {\n    Timestamp timestamp = new Timestamp(printFormat.parse(timeString).getTime());\n    } catch (ParseException e) {\n        e.printStackTrace();\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23700353,"reputation":1,"user_id":17723600,"display_name":"Hadj"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640078933,"creation_date":1640078933,"answer_id":70433184,"question_id":40459337,"body_markdown":"if you are looking for the timestamp of today&#39;s hh:mm then try this\r\n\r\n    static String todaysFtoTimestamp(String f){\r\n        long todaystimestamp = ((System.currentTimeMillis() / 86400000 )  * 86400 );\r\n        //System.out.println(&quot;today: &quot; + todaystimestamp);\r\n        long todaysftimestamp = Integer.parseInt(fToTimestamp(f)) + todaystimestamp;\r\n        //System.out.println(&quot;todayF: &quot; + todaysftimestamp);\r\n        return todaysftimestamp+&quot;&quot;;\r\n    }\r\n    static String fToTimestamp(String f){\r\n        String[] fArray = f.split(&quot;:&quot;);\r\n        String r = &quot;null hehe&quot;;\r\n        int hours = Integer.parseInt(fArray[0]);\r\n        int minutes = Integer.parseInt(fArray[1]);\r\n        r = String.valueOf((minutes + (hours * 60))*60);\r\n        return r ;\r\n    }","title":"How do I convert &quot;HH:MM&quot; format string to Timestamp in Java?","body":"<p>if you are looking for the timestamp of today's hh:mm then try this</p>\n<pre><code>static String todaysFtoTimestamp(String f){\n    long todaystimestamp = ((System.currentTimeMillis() / 86400000 )  * 86400 );\n    //System.out.println(&quot;today: &quot; + todaystimestamp);\n    long todaysftimestamp = Integer.parseInt(fToTimestamp(f)) + todaystimestamp;\n    //System.out.println(&quot;todayF: &quot; + todaysftimestamp);\n    return todaysftimestamp+&quot;&quot;;\n}\nstatic String fToTimestamp(String f){\n    String[] fArray = f.split(&quot;:&quot;);\n    String r = &quot;null hehe&quot;;\n    int hours = Integer.parseInt(fArray[0]);\n    int minutes = Integer.parseInt(fArray[1]);\n    r = String.valueOf((minutes + (hours * 60))*60);\n    return r ;\n}\n</code></pre>\n"}],"owner":{"account_id":6009919,"reputation":547,"user_id":4720669,"display_name":"Aakash Patel"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4430,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":40459752,"answer_count":4,"score":2,"last_activity_date":1640078933,"creation_date":1478501446,"question_id":40459337,"body_markdown":"I have a string `09:28.` and I want to convert this string to `Timestamp` object.\r\n\r\nBelow is my coding:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    Object d = getMappedObjectValue(reportBeamDataMap, ReportBeamConstant.DAT_STOPDATE);\r\n    Date stopDate1 = (Date)d;\r\n    SimpleDateFormat printFormat = new SimpleDateFormat(&quot;hh:mm&quot;);\r\n    String timeString = printFormat.format(stopDate1);\r\n\r\nNow I want above `String` as `Timestamp` (only HH:MM). How to do that?\r\n","title":"How do I convert &quot;HH:MM&quot; format string to Timestamp in Java?","body":"<p>I have a string <code>09:28.</code> and I want to convert this string to <code>Timestamp</code> object.</p>\n\n<p>Below is my coding:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>Object d = getMappedObjectValue(reportBeamDataMap, ReportBeamConstant.DAT_STOPDATE);\nDate stopDate1 = (Date)d;\nSimpleDateFormat printFormat = new SimpleDateFormat(\"hh:mm\");\nString timeString = printFormat.format(stopDate1);\n</code></pre>\n\n<p>Now I want above <code>String</code> as <code>Timestamp</code> (only HH:MM). How to do that?</p>\n"},{"tags":["java","android","maven","android-studio","gradle"],"comments":[{"owner":{"account_id":2686715,"reputation":8194,"user_id":2320961,"display_name":"Nic3500"},"score":0,"creation_date":1535713093,"post_id":52113096,"comment_id":91178354,"body_markdown":"Improved readability + code formatting","body":"Improved readability + code formatting"},{"owner":{"account_id":52786,"reputation":8690,"user_id":157804,"accept_rate":86,"display_name":"mobibob"},"score":1,"creation_date":1604171512,"post_id":52113096,"comment_id":114267876,"body_markdown":"what is the &#39;Messages&#39; view?  I have searched every menu and submenu without any luck.","body":"what is the &#39;Messages&#39; view?  I have searched every menu and submenu without any luck."}],"answers":[{"tags":[],"owner":{"account_id":3964294,"reputation":961,"user_id":3270701,"display_name":"Akash"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1535710056,"creation_date":1535710056,"answer_id":52113139,"question_id":52113096,"body_markdown":"Can you please try with this\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-rules.pro&#39;\r\n        }\r\n    }","title":"Build APK(s): Errors while building APK. You can find the errors in the &#39;Messages&#39; view","body":"<p>Can you please try with this</p>\n\n<pre><code>buildTypes {\n    release {\n        minifyEnabled false\n        proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":10692781,"reputation":11,"user_id":7871050,"display_name":"Abdullahi isa"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8398,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1640078659,"creation_date":1535709913,"question_id":52113096,"body_markdown":"I cannot install app or build APK in android studio 3.1.4.  It continues showing this error:\r\n\r\n&gt; &quot;Build APK(s): Errors while building APK. You can find the errors in the &#39;Messages&#39; view.&quot;. \r\n\r\nHere is my gradle below.\r\n\r\n\r\n    \r\n\r\n 1. apply plugin: &#39;com.android.application&#39;\r\n        \r\n        android {\r\n            compileSdkVersion 27\r\n            buildToolsVersion &#39;27.0.3&#39;\r\n            defaultConfig {\r\n                applicationId &quot;XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&quot;\r\n                minSdkVersion 15\r\n                targetSdkVersion 27\r\n                versionCode 6\r\n                versionName &quot;6.0&quot;\r\n                testInstrumentationRunner &quot;android.support.test.runner.AndroidJUnitRunner&quot;\r\n                multiDexEnabled = true\r\n                javaCompileOptions {\r\n                    annotationProcessorOptions {\r\n                        includeCompileClasspath false\r\n                    }\r\n                }\r\n                lintOptions {\r\n                    checkReleaseBuilds false\r\n                    abortOnError false\r\n                }\r\n        \r\n            }\r\n        \r\n            buildTypes {\r\n                release {\r\n                    debuggable true\r\n                    minifyEnabled false\r\n                    proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-rules.pro&#39;\r\n                }\r\n            }\r\n        \r\n        \r\n        }\r\n        \r\n        // In the app build.gradle file\r\n        \r\n        \r\n        repositories {\r\n            mavenCentral()\r\n            maven { //url &quot;http://oss.sonatype.org/content/repositories/snapshots/&quot;\r\n                url &#39;https://maven.google.com&#39;\r\n        \r\n            }\r\n        }\r\n        repositories {\r\n            mavenCentral()\r\n            maven { url &quot;http://oss.sonatype.org/content/repositories/snapshots/&quot; }\r\n        }\r\n        \r\n        dependencies {\r\n            implementation &#39;com.jakewharton:butterknife:8.8.1&#39;\r\n            implementation &#39;com.jakewharton:butterknife-compiler:8.8.1&#39;\r\n            annotationProcessor &#39;com.jakewharton:butterknife-compiler:8.8.1&#39;\r\n            //compile &#39;com.amazonaws:aws-android-sdk-polly:2.3.8&#39;\r\n            implementation &#39;com.jakewharton.timber:timber:4.7.1&#39;\r\n            //implementation &#39;com.android.support:multidex:1.0.0&#39;\r\n            implementation &#39;com.android.support:multidex:1.0.3&#39;\r\n            implementation &#39;com.github.bumptech.glide:glide:3.7.0&#39;\r\n            implementation &#39;com.google.code.gson:gson:2.8.5&#39;\r\n            implementation &#39;com.github.pavlospt:circleview:1.2&#39;\r\n            implementation &#39;com.stripe:stripe-android:6.1.2&#39;\r\n            implementation &#39;com.facebook.android:facebook-login:[4,5)&#39;\r\n            //implementation &#39;com.google.android.gms:play-services:12.0.1&#39;\r\n            implementation &#39;com.google.android.gms:play-services-location:15.0.1&#39;\r\n            implementation &#39;com.google.android.gms:play-services-auth:16.0.0&#39;\r\n            implementation &#39;com.google.android.gms:play-services-maps:15.0.1&#39;\r\n            implementation &#39;com.ms-square:expandableTextView:0.1.4&#39;\r\n        }\r\n        \r\n        \r\n        dependencies {\r\n        \r\n            implementation (&#39;com.mapbox.mapboxsdk:mapbox-android-sdk:5.1.4@aar&#39;) {\r\n                transitive = true\r\n            }\r\n        \r\n        \r\n            implementation  &#39;com.mapbox.mapboxsdk:mapbox-android-navigation:0.6.3&#39;\r\n            implementation (&#39;com.mapbox.mapboxsdk:mapbox-android-navigation-ui:0.6.1&#39;) {\r\n                exclude group: &#39;android.arch.core&#39;\r\n                transitive = true\r\n            }\r\n        \r\n            implementation fileTree(dir: &#39;libs&#39;, include: &#39;Parse-*.jar&#39;)\r\n            implementation fileTree(include: [&#39;*.jar&#39;], dir: &#39;libs&#39;)\r\n        \r\n            implementation fileTree(dir: &#39;libs&#39;, include: [&#39;*.jar&#39;])\r\n        \r\n        \r\n            \r\n        androidTestImplementation(&#39;com.android.support.test.espresso:espresso-core:2.2.2&#39;,\r\n        {\r\n                exclude group: &#39;com.android.support&#39;, module: &#39;support-annotations&#39;\r\n            })\r\n            // compile fileTree(include: [&#39;*.jar&#39;], dir: &#39;libs&#39;)\r\n        \r\n        // fire base SDK gradle\r\n            implementation &#39;com.google.firebase:firebase-core:16.0.3&#39;\r\n            //apply plugin: &#39;com.google.gms.google-services&#39;\r\n        \r\n        \r\n        \r\n            //implementation  &#39;com.squareup.picasso:picasso:2.71282&#39;\r\n            implementation  &#39;com.nineoldandroids:library:2.4.0&#39;\r\n            implementation  &#39;com.daimajia.slider:library:1.1.5@aar&#39;\r\n            implementation  &#39;com.github.bumptech.glide:glide:4.0.0-RC1&#39;\r\n            implementation  &#39;com.jakewharton:butterknife:8.8.1&#39;\r\n            //noinspection GradleCompatible\r\n            implementation  &#39;com.android.support:appcompat-v7:27.1.1&#39;\r\n            implementation &#39;com.android.support:support-compat:27.1.1&#39;\r\n            implementation  &#39;com.android.support:mediarouter-v7:27.1.1&#39;\r\n            implementation &#39;com.android.support:cardview-v7:27.1.1&#39;\r\n            implementation  &#39;com.android.support:design:27.1.1&#39;\r\n            implementation &#39;com.android.support.constraint:constraint-layout:2.0.0-alpha2&#39;\r\n            implementation  &#39;com.android.volley:volley:1.0.0&#39;\r\n            implementation  &#39;com.android.support:support-annotations:27.1.1&#39;\r\n            implementation  &#39;com.android.support:recyclerview-v7:27.1.1&#39;\r\n            testImplementation &#39;junit:junit:4.12&#39;\r\n            annotationProcessor &#39;com.github.bumptech.glide:compiler:4.0.0-RC1&#39;\r\n        \r\n        \r\n        }","title":"Build APK(s): Errors while building APK. You can find the errors in the &#39;Messages&#39; view","body":"<p>I cannot install app or build APK in android studio 3.1.4.  It continues showing this error:</p>\n\n<blockquote>\n  <p>\"Build APK(s): Errors while building APK. You can find the errors in the 'Messages' view.\". </p>\n</blockquote>\n\n<p>Here is my gradle below.</p>\n\n<ol>\n<li><p>apply plugin: 'com.android.application'</p>\n\n<pre><code>android {\n    compileSdkVersion 27\n    buildToolsVersion '27.0.3'\n    defaultConfig {\n        applicationId \"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\"\n        minSdkVersion 15\n        targetSdkVersion 27\n        versionCode 6\n        versionName \"6.0\"\n        testInstrumentationRunner \"android.support.test.runner.AndroidJUnitRunner\"\n        multiDexEnabled = true\n        javaCompileOptions {\n            annotationProcessorOptions {\n                includeCompileClasspath false\n            }\n        }\n        lintOptions {\n            checkReleaseBuilds false\n            abortOnError false\n        }\n\n    }\n\n    buildTypes {\n        release {\n            debuggable true\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n\n\n}\n\n// In the app build.gradle file\n\n\nrepositories {\n    mavenCentral()\n    maven { //url \"http://oss.sonatype.org/content/repositories/snapshots/\"\n        url 'https://maven.google.com'\n\n    }\n}\nrepositories {\n    mavenCentral()\n    maven { url \"http://oss.sonatype.org/content/repositories/snapshots/\" }\n}\n\ndependencies {\n    implementation 'com.jakewharton:butterknife:8.8.1'\n    implementation 'com.jakewharton:butterknife-compiler:8.8.1'\n    annotationProcessor 'com.jakewharton:butterknife-compiler:8.8.1'\n    //compile 'com.amazonaws:aws-android-sdk-polly:2.3.8'\n    implementation 'com.jakewharton.timber:timber:4.7.1'\n    //implementation 'com.android.support:multidex:1.0.0'\n    implementation 'com.android.support:multidex:1.0.3'\n    implementation 'com.github.bumptech.glide:glide:3.7.0'\n    implementation 'com.google.code.gson:gson:2.8.5'\n    implementation 'com.github.pavlospt:circleview:1.2'\n    implementation 'com.stripe:stripe-android:6.1.2'\n    implementation 'com.facebook.android:facebook-login:[4,5)'\n    //implementation 'com.google.android.gms:play-services:12.0.1'\n    implementation 'com.google.android.gms:play-services-location:15.0.1'\n    implementation 'com.google.android.gms:play-services-auth:16.0.0'\n    implementation 'com.google.android.gms:play-services-maps:15.0.1'\n    implementation 'com.ms-square:expandableTextView:0.1.4'\n}\n\n\ndependencies {\n\n    implementation ('com.mapbox.mapboxsdk:mapbox-android-sdk:5.1.4@aar') {\n        transitive = true\n    }\n\n\n    implementation  'com.mapbox.mapboxsdk:mapbox-android-navigation:0.6.3'\n    implementation ('com.mapbox.mapboxsdk:mapbox-android-navigation-ui:0.6.1') {\n        exclude group: 'android.arch.core'\n        transitive = true\n    }\n\n    implementation fileTree(dir: 'libs', include: 'Parse-*.jar')\n    implementation fileTree(include: ['*.jar'], dir: 'libs')\n\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n\n\n\nandroidTestImplementation('com.android.support.test.espresso:espresso-core:2.2.2',\n{\n        exclude group: 'com.android.support', module: 'support-annotations'\n    })\n    // compile fileTree(include: ['*.jar'], dir: 'libs')\n\n// fire base SDK gradle\n    implementation 'com.google.firebase:firebase-core:16.0.3'\n    //apply plugin: 'com.google.gms.google-services'\n\n\n\n    //implementation  'com.squareup.picasso:picasso:2.71282'\n    implementation  'com.nineoldandroids:library:2.4.0'\n    implementation  'com.daimajia.slider:library:1.1.5@aar'\n    implementation  'com.github.bumptech.glide:glide:4.0.0-RC1'\n    implementation  'com.jakewharton:butterknife:8.8.1'\n    //noinspection GradleCompatible\n    implementation  'com.android.support:appcompat-v7:27.1.1'\n    implementation 'com.android.support:support-compat:27.1.1'\n    implementation  'com.android.support:mediarouter-v7:27.1.1'\n    implementation 'com.android.support:cardview-v7:27.1.1'\n    implementation  'com.android.support:design:27.1.1'\n    implementation 'com.android.support.constraint:constraint-layout:2.0.0-alpha2'\n    implementation  'com.android.volley:volley:1.0.0'\n    implementation  'com.android.support:support-annotations:27.1.1'\n    implementation  'com.android.support:recyclerview-v7:27.1.1'\n    testImplementation 'junit:junit:4.12'\n    annotationProcessor 'com.github.bumptech.glide:compiler:4.0.0-RC1'\n\n\n}\n</code></pre></li>\n</ol>\n"},{"tags":["java","biginteger"],"comments":[{"owner":{"account_id":85671,"reputation":40858,"user_id":238704,"display_name":"President James K. Polk"},"score":0,"creation_date":1640109677,"post_id":70433073,"comment_id":124516169,"body_markdown":"`sign = new BigInteger(mac.doFinal(baseStringBytes));` this will be a negative integer about half the time. You need to use the [sign-magnitude constructer for BigInteger](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/math/BigInteger.html#%3Cinit%3E(int,byte%5B%5D)).","body":"<code>sign = new BigInteger(mac.doFinal(baseStringBytes));</code> this will be a negative integer about half the time. You need to use the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/math/BigInteger.html#%3Cinit%3E(int,byte%5B%5D)\" rel=\"nofollow noreferrer\">sign-magnitude constructer for BigInteger</a>."},{"owner":{"account_id":23707955,"reputation":1,"user_id":17730190,"display_name":"江江涛"},"score":0,"creation_date":1640142124,"post_id":70433073,"comment_id":124523619,"body_markdown":"@PresidentJamesK.Polk thank you,and I want to ask another question,Why the method &#39;String.format(%032x, sign) &#39; may return a String of length 63?","body":"@PresidentJamesK.Polk thank you,and I want to ask another question,Why the method &#39;String.format(%032x, sign) &#39; may return a String of length 63?"},{"owner":{"account_id":85671,"reputation":40858,"user_id":238704,"display_name":"President James K. Polk"},"score":0,"creation_date":1640142921,"post_id":70433073,"comment_id":124523732,"body_markdown":"The 32 in `%032x` is the **minimum** width. If the result needs more than 32 characters then it is expanded. HMAC-sha-256 produces a 32 *byte* result, which requires 64 hex characters to represent.  You should use `String.format(%064x, sign)`","body":"The 32 in <code>%032x</code> is the <b>minimum</b> width. If the result needs more than 32 characters then it is expanded. HMAC-sha-256 produces a 32 <i>byte</i> result, which requires 64 hex characters to represent.  You should use <code>String.format(%064x, sign)</code>"},{"owner":{"account_id":23707955,"reputation":1,"user_id":17730190,"display_name":"江江涛"},"score":0,"creation_date":1640154807,"post_id":70433073,"comment_id":124525575,"body_markdown":"@PresidentJamesK.Polk thank you very much indeed","body":"@PresidentJamesK.Polk thank you very much indeed"}],"owner":{"account_id":23707955,"reputation":1,"user_id":17730190,"display_name":"江江涛"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":420,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1640078380,"creation_date":1640078380,"question_id":70433073,"body_markdown":"    public static String buildSignAndUrl(long partnerId, String secret, String path){\r\n                long timestamp = System.currentTimeMillis() / 1000L;\r\n                String base_String = String.format(&quot;%s%s%s&quot;, partnerId, path, timestamp);\r\n                byte[] baseStringBytes;\r\n                byte[] partner_key;\r\n                BigInteger sign = null;\r\n                try{\r\n                    baseStringBytes = base_String.getBytes(StandardCharsets.UTF_8);\r\n                    partner_key = secret.getBytes(StandardCharsets.UTF_8);\r\n                    Mac mac = Mac.getInstance(HmacAlgorithms.HMAC_SHA_256.toString());\r\n                    SecretKeySpec secret_key = new SecretKeySpec(partner_key, HmacAlgorithms.HMAC_SHA_256.toString());\r\n                    mac.init(secret_key);\r\n                    sign = new BigInteger(mac.doFinal(baseStringBytes));\r\n                } catch (Exception e){\r\n                    e.printStackTrace();\r\n                }\r\n                String url = SANDBOX_HOST + path + String.format(&quot;?partner_id=%s&amp;timestamp=%s&amp;sign=%s&quot;,\r\n                        partnerId, timestamp, String.format(&quot;%032x&quot;, sign));\r\n                return url;\r\n            }\r\n// Why use this url to send a post may cause &quot;Wrong sign&quot;? the timestamp in url and the timestamp to calculate a sign are same;","title":"when I use shopee open platform API,I use the follow method to build a url to send a post request,I often get the message &quot;Wrong sign&quot;,any solutions?","body":"<pre><code>public static String buildSignAndUrl(long partnerId, String secret, String path){\n            long timestamp = System.currentTimeMillis() / 1000L;\n            String base_String = String.format(&quot;%s%s%s&quot;, partnerId, path, timestamp);\n            byte[] baseStringBytes;\n            byte[] partner_key;\n            BigInteger sign = null;\n            try{\n                baseStringBytes = base_String.getBytes(StandardCharsets.UTF_8);\n                partner_key = secret.getBytes(StandardCharsets.UTF_8);\n                Mac mac = Mac.getInstance(HmacAlgorithms.HMAC_SHA_256.toString());\n                SecretKeySpec secret_key = new SecretKeySpec(partner_key, HmacAlgorithms.HMAC_SHA_256.toString());\n                mac.init(secret_key);\n                sign = new BigInteger(mac.doFinal(baseStringBytes));\n            } catch (Exception e){\n                e.printStackTrace();\n            }\n            String url = SANDBOX_HOST + path + String.format(&quot;?partner_id=%s&amp;timestamp=%s&amp;sign=%s&quot;,\n                    partnerId, timestamp, String.format(&quot;%032x&quot;, sign));\n            return url;\n        }\n</code></pre>\n<p>// Why use this url to send a post may cause &quot;Wrong sign&quot;? the timestamp in url and the timestamp to calculate a sign are same;</p>\n"},{"tags":["java","docx4j"],"comments":[{"owner":{"account_id":30580,"reputation":15467,"user_id":1031689,"accept_rate":67,"display_name":"JasonPlutext"},"score":0,"creation_date":1364433950,"post_id":15664726,"comment_id":22247512,"body_markdown":"I assume you&#39;re processing the 50 documents through a single JVM instance (so you&#39;re only incurring JAXB Context init delay once)?","body":"I assume you&#39;re processing the 50 documents through a single JVM instance (so you&#39;re only incurring JAXB Context init delay once)?"},{"owner":{"account_id":75286,"reputation":2896,"user_id":216011,"accept_rate":67,"display_name":"bertolami"},"score":0,"creation_date":1364451836,"post_id":15664726,"comment_id":22252175,"body_markdown":"yes. What I observed is that if the documents are generated concurrently, each in its own thread, the procedure takes even longer than if the documents are generated one after the other.","body":"yes. What I observed is that if the documents are generated concurrently, each in its own thread, the procedure takes even longer than if the documents are generated one after the other."}],"answers":[{"tags":[],"owner":{"account_id":30580,"reputation":15467,"user_id":1031689,"accept_rate":67,"display_name":"JasonPlutext"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1364463960,"creation_date":1364463960,"answer_id":15678574,"question_id":15664726,"body_markdown":"Please try http://www.docx4java.org/docx4j/docx4j-nightly-20130328.jar\r\n\r\nIt contains an experimental variableReplace method.  Assuming documentPart and mappings as per your question, you can call:\r\n\r\n\tdocumentPart.variableReplace(mappings);\r\n\r\nYou don&#39;t need documentPart.setJaxbElement.\r\n\r\nIn my testing with a 175 page document, processing took 1/3 sec (roughly 3 times faster).\r\n\r\nAny further performance improvements will come most easily from providing more resources (more cores, if you want to do it concurrently), and more RAM.\r\n\r\nLet me know what you think.","title":"Optimize docx4j performance","body":"<p>Please try <a href=\"http://www.docx4java.org/docx4j/docx4j-nightly-20130328.jar\" rel=\"nofollow\">http://www.docx4java.org/docx4j/docx4j-nightly-20130328.jar</a></p>\n\n<p>It contains an experimental variableReplace method.  Assuming documentPart and mappings as per your question, you can call:</p>\n\n<pre><code>documentPart.variableReplace(mappings);\n</code></pre>\n\n<p>You don't need documentPart.setJaxbElement.</p>\n\n<p>In my testing with a 175 page document, processing took 1/3 sec (roughly 3 times faster).</p>\n\n<p>Any further performance improvements will come most easily from providing more resources (more cores, if you want to do it concurrently), and more RAM.</p>\n\n<p>Let me know what you think.</p>\n"}],"owner":{"account_id":75286,"reputation":2896,"user_id":216011,"accept_rate":67,"display_name":"bertolami"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2146,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1640077642,"creation_date":1364403321,"question_id":15664726,"body_markdown":"I am using docx4j 2.8.1 to replace texts and a logo within the word files. Now I want to improve performance since the processing of about 50 documents is quite slow. What options are recommended to increase performance of docx4j?\r\n\r\nThe code to replace the strings (not the logo) looks like:\r\n\r\n     String xml = XmlUtils.marshaltoString(documentPart.getJaxbElement(), true);\r\n     HashMap&lt;String, String&gt; mappings = buildReplaceMap(userData);\r\n\r\n     Object obj = XmlUtils.unmarshallFromTemplate(xml, mappings);\r\n     documentPart.setJaxbElement(obj);","title":"Optimize docx4j performance","body":"<p>I am using docx4j 2.8.1 to replace texts and a logo within the word files. Now I want to improve performance since the processing of about 50 documents is quite slow. What options are recommended to increase performance of docx4j?</p>\n\n<p>The code to replace the strings (not the logo) looks like:</p>\n\n<pre><code> String xml = XmlUtils.marshaltoString(documentPart.getJaxbElement(), true);\n HashMap&lt;String, String&gt; mappings = buildReplaceMap(userData);\n\n Object obj = XmlUtils.unmarshallFromTemplate(xml, mappings);\n documentPart.setJaxbElement(obj);\n</code></pre>\n"},{"tags":["java","android-source","aidl"],"answers":[{"tags":[],"owner":{"account_id":22215880,"reputation":41,"user_id":16454332,"display_name":"Markusbug"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1640077397,"creation_date":1640077397,"answer_id":70432865,"question_id":70415713,"body_markdown":"Ok I found an answer:\r\n\r\nJust before the phone is booting you need to execute in the terminal `adb logcat`, once it boots it should show the logs.\r\n\r\nBut because there are so many logs you should pipe it into less, then a vim instance is started with all the logs:\r\n`adb logcat | less`","title":"How to debug System Service on AOSP?","body":"<p>Ok I found an answer:</p>\n<p>Just before the phone is booting you need to execute in the terminal <code>adb logcat</code>, once it boots it should show the logs.</p>\n<p>But because there are so many logs you should pipe it into less, then a vim instance is started with all the logs:\n<code>adb logcat | less</code></p>\n"}],"owner":{"account_id":22215880,"reputation":41,"user_id":16454332,"display_name":"Markusbug"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":243,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70432865,"answer_count":1,"score":0,"last_activity_date":1640077397,"creation_date":1639951700,"question_id":70415713,"body_markdown":"I wrote a simple system service that exposes the port 8545 on the localhost, but when I try to see if it runs, there is no open port.\r\n\r\nIs there any way I can debug my System Service and/or gain insight into the logs?","title":"How to debug System Service on AOSP?","body":"<p>I wrote a simple system service that exposes the port 8545 on the localhost, but when I try to see if it runs, there is no open port.</p>\n<p>Is there any way I can debug my System Service and/or gain insight into the logs?</p>\n"},{"tags":["java","jpa","db2","websphere","jpql"],"comments":[{"owner":{"account_id":16755858,"reputation":2962,"user_id":12111821,"display_name":"nfgl"},"score":0,"creation_date":1640072718,"post_id":70430432,"comment_id":124502259,"body_markdown":"Not your question but `DISTINCT` is not needed since you select _one_ row with the tables primary key, If you remove it then you have what this query was supposed to return.","body":"Not your question but <code>DISTINCT</code> is not needed since you select <i>one</i> row with the tables primary key, If you remove it then you have what this query was supposed to return."},{"owner":{"account_id":23706373,"reputation":3,"user_id":17728778,"display_name":"Peeranut Jeensopa"},"score":0,"creation_date":1640074205,"post_id":70430432,"comment_id":124502683,"body_markdown":"@nfgl I apologized for my mistake, this is a example code.","body":"@nfgl I apologized for my mistake, this is a example code."}],"answers":[{"tags":[],"owner":{"account_id":4558101,"reputation":17722,"user_id":3701228,"display_name":"Gas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1640077362,"creation_date":1640077362,"answer_id":70432856,"question_id":70430432,"body_markdown":"If `freetext` is a Clob column, try to annotate it properly with `@Lob` . Check this post https://stackoverflow.com/questions/11793320/using-eclipselink-jpa-to-bind-strings-larger-than-255-characters  . \r\n\r\nThe error might be related to the JPA provider change between WAS7 and 9 (previously it was OpenJPA). If you dont care abouth JPA 2.1, you can switch back to 2.0 OpenJPA, for example like this using `wsadmin`:\r\n\r\n```\r\nwsadmin&gt;AdminTask.modifyJPASpecLevel(&#39;[-node myNode -server server1 -specLevel 2.0]&#39;)  \r\nCWWJP8813I: The JPA specification compliance level for Server server1 has been successfully set to JPA 2.0.\r\n```\r\nSee the following link for details: https://www.ibm.com/docs/en/was/9.0.5?topic=applications-identifying-modifying-jpa-specification-level\r\n\r\n","title":"JPQL SELECT Distinct Query with clob Column works fine on WAS7, but WAS9 doesn&#39;t","body":"<p>If <code>freetext</code> is a Clob column, try to annotate it properly with <code>@Lob</code> . Check this post <a href=\"https://stackoverflow.com/questions/11793320/using-eclipselink-jpa-to-bind-strings-larger-than-255-characters\">Using EclipseLink JPA to bind Strings larger than 255 characters</a>  .</p>\n<p>The error might be related to the JPA provider change between WAS7 and 9 (previously it was OpenJPA). If you dont care abouth JPA 2.1, you can switch back to 2.0 OpenJPA, for example like this using <code>wsadmin</code>:</p>\n<pre><code>wsadmin&gt;AdminTask.modifyJPASpecLevel('[-node myNode -server server1 -specLevel 2.0]')  \nCWWJP8813I: The JPA specification compliance level for Server server1 has been successfully set to JPA 2.0.\n</code></pre>\n<p>See the following link for details: <a href=\"https://www.ibm.com/docs/en/was/9.0.5?topic=applications-identifying-modifying-jpa-specification-level\" rel=\"nofollow noreferrer\">https://www.ibm.com/docs/en/was/9.0.5?topic=applications-identifying-modifying-jpa-specification-level</a></p>\n"}],"owner":{"account_id":23706373,"reputation":3,"user_id":17728778,"display_name":"Peeranut Jeensopa"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":553,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70432856,"answer_count":1,"score":0,"last_activity_date":1640077362,"creation_date":1640058230,"question_id":70430432,"body_markdown":"I&#39;m Using Spring 3.0 based JPA2.0\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;MY_TABLE&quot;, schema = &quot;DB2XXXX&quot;)\r\npublic class MyTable  implements java.io.Serializable,Comparable&lt;MyTable&gt; {\r\n\tprivate static final long serialVersionUID = 1L;\r\n\t\r\n\t@Id\r\n\t@GeneratedValue(strategy=GenerationType.IDENTITY)\r\n\t@Column(name = &quot;MY_TABLE_ID&quot;)\r\n\tprivate BigInteger myTableId;\r\n\t\r\n\t@Column(name = &quot;FREETEXT&quot;)\r\n\tprivate String freetext;\r\n\t\r\n\tpublic MyTable() {\r\n\t}\r\n\t\r\n\tpublic MyTable(BigInteger myTableId,String freetext) {\r\n\t\tsuper();\r\n\t\tthis.myTableId = myTableId;\r\n\t\tthis.freetext = freetext\r\n\t}\r\n\t\r\n\tpublic BigInteger getMyTableId() {\r\n\t\treturn myTableId;\r\n\t}\r\n\tpublic void setMyTableId(myTableId) {\r\n\t\tthis.myTableId = myTableId;\r\n\t}\r\n\tpublic String getFreetext() {\r\n\t\treturn freetext;\r\n\t}\r\n\tpublic void setFreetext(String freetext) {\r\n\t\tthis.freetext = freetext;\r\n\t}\r\n}\r\n\r\n```\r\n\r\n**freetext is clob column**\r\n\r\n```\r\n\tpublic List&lt;MyTable&gt; getData(BigInteger myTableId) throws Exception {\r\n\t\tStringBuilder jpql = new StringBuilder();\r\n\t\tList&lt;MyTable&gt; resultList = null;\r\n\t\ttry {\r\n\t\t\tjpql.append(&quot;SELECT distinct data FROM MyTable data &quot;)\r\n\t\t\tresultList = findWithJpql(entityManager, jpql.toString(), null,false, 0, 0);\r\n\t\t} catch (Exception e) {\r\n\t\t}\r\n\t\treturn resultList;\r\n\t}\r\n```\r\n\r\n\r\n```\r\n    @TransactionAttribute(value = TransactionAttributeType.REQUIRED)\r\n\t@SuppressWarnings(&quot;unchecked&quot;)\r\n\tpublic &lt;T&gt; T findWithJpql(EntityManager em, String jpql, Map&lt;String, Object&gt; conditions, boolean singleResult, int firstResult, int maxResult) {\r\n\t\tQuery query = em.createQuery(jpql);\r\n\t\tif(firstResult &gt; 0){\r\n\t\t\tquery.setFirstResult(firstResult);\r\n\t\t}\r\n\t\tif(maxResult &gt; 0){\r\n\t\t\tquery.setMaxResults(maxResult);\r\n\t\t}\r\n\r\n\t\tif(conditions != null &amp;&amp; conditions.size() &gt; 0){\r\n\t\t\tfor(String condition : conditions.keySet()){\r\n\t\t\t\tquery.setParameter(condition, conditions.get(condition));\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(singleResult){\r\n\t\t\ttry{\r\n\t\t\t\treturn (T)query.getSingleResult();\r\n\t\t\t}catch(NoResultException nrex){\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tT a = (T)query.getResultList();\r\n\t\t\treturn a;\r\n\t\t}\r\n\t}\r\n```\r\n\r\nwhen call query method in WAS9 **Db2 error code -134** :\r\nA string value with a length attribute greater than 255 bytes is not allowed in a SELECT list that also specifies DISTINCT.\r\n**But this  query works fine on WAS7 **\r\n\r\n\r\n[21/12/2564, 10:28:10:731 ICT] 0000018e eclipselink   W   Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.6.8.WAS-v20181218-0accd7f): org.eclipse.persistence.exceptions.DatabaseException\r\nInternal Exception: com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2 SQL Error: SQLCODE=-134, SQLSTATE=42907, SQLERRMC=REMARK, DRIVER=4.25.13\r\nError Code: -134\r\n\r\nInternal Exception: com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2 SQL Error: SQLCODE=-134, SQLSTATE=42907, SQLERRMC=REMARK, DRIVER=4.25.13\r\nError Code: -134\r\n\r\n\r\n","title":"JPQL SELECT Distinct Query with clob Column works fine on WAS7, but WAS9 doesn&#39;t","body":"<p>I'm Using Spring 3.0 based JPA2.0</p>\n<pre><code>@Entity\n@Table(name = &quot;MY_TABLE&quot;, schema = &quot;DB2XXXX&quot;)\npublic class MyTable  implements java.io.Serializable,Comparable&lt;MyTable&gt; {\n    private static final long serialVersionUID = 1L;\n    \n    @Id\n    @GeneratedValue(strategy=GenerationType.IDENTITY)\n    @Column(name = &quot;MY_TABLE_ID&quot;)\n    private BigInteger myTableId;\n    \n    @Column(name = &quot;FREETEXT&quot;)\n    private String freetext;\n    \n    public MyTable() {\n    }\n    \n    public MyTable(BigInteger myTableId,String freetext) {\n        super();\n        this.myTableId = myTableId;\n        this.freetext = freetext\n    }\n    \n    public BigInteger getMyTableId() {\n        return myTableId;\n    }\n    public void setMyTableId(myTableId) {\n        this.myTableId = myTableId;\n    }\n    public String getFreetext() {\n        return freetext;\n    }\n    public void setFreetext(String freetext) {\n        this.freetext = freetext;\n    }\n}\n\n</code></pre>\n<p><strong>freetext is clob column</strong></p>\n<pre><code>    public List&lt;MyTable&gt; getData(BigInteger myTableId) throws Exception {\n        StringBuilder jpql = new StringBuilder();\n        List&lt;MyTable&gt; resultList = null;\n        try {\n            jpql.append(&quot;SELECT distinct data FROM MyTable data &quot;)\n            resultList = findWithJpql(entityManager, jpql.toString(), null,false, 0, 0);\n        } catch (Exception e) {\n        }\n        return resultList;\n    }\n</code></pre>\n<pre><code>    @TransactionAttribute(value = TransactionAttributeType.REQUIRED)\n    @SuppressWarnings(&quot;unchecked&quot;)\n    public &lt;T&gt; T findWithJpql(EntityManager em, String jpql, Map&lt;String, Object&gt; conditions, boolean singleResult, int firstResult, int maxResult) {\n        Query query = em.createQuery(jpql);\n        if(firstResult &gt; 0){\n            query.setFirstResult(firstResult);\n        }\n        if(maxResult &gt; 0){\n            query.setMaxResults(maxResult);\n        }\n\n        if(conditions != null &amp;&amp; conditions.size() &gt; 0){\n            for(String condition : conditions.keySet()){\n                query.setParameter(condition, conditions.get(condition));\n            }\n        }\n        if(singleResult){\n            try{\n                return (T)query.getSingleResult();\n            }catch(NoResultException nrex){\n                return null;\n            }\n        }else{\n            T a = (T)query.getResultList();\n            return a;\n        }\n    }\n</code></pre>\n<p>when call query method in WAS9 <strong>Db2 error code -134</strong> :\nA string value with a length attribute greater than 255 bytes is not allowed in a SELECT list that also specifies DISTINCT.\n**But this  query works fine on WAS7 **</p>\n<p>[21/12/2564, 10:28:10:731 ICT] 0000018e eclipselink   W   Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.6.8.WAS-v20181218-0accd7f): org.eclipse.persistence.exceptions.DatabaseException\nInternal Exception: com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2 SQL Error: SQLCODE=-134, SQLSTATE=42907, SQLERRMC=REMARK, DRIVER=4.25.13\nError Code: -134</p>\n<p>Internal Exception: com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2 SQL Error: SQLCODE=-134, SQLSTATE=42907, SQLERRMC=REMARK, DRIVER=4.25.13\nError Code: -134</p>\n"},{"tags":["java","spring-boot","api","authentication","ldap"],"answers":[{"tags":[],"owner":{"account_id":22498600,"reputation":46,"user_id":16695223,"display_name":"Vikas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639811488,"creation_date":1639811488,"answer_id":70401620,"question_id":70398672,"body_markdown":"You can do this with Spring Data Ldap.\r\nJust map Java class with Ldap Entry, that way you will also be able to do CRUD operations on Ldap.\r\n\r\nCreate one LdapUserService which extends UserDetail from Spring security.\r\n\r\nAnd then use this LdapUserService in Spring security configurations.\r\n\r\nNow you can perform authentication, authorization along with CRUD operations.","title":"LDAP authentication using Spring Boot","body":"<p>You can do this with Spring Data Ldap.\nJust map Java class with Ldap Entry, that way you will also be able to do CRUD operations on Ldap.</p>\n<p>Create one LdapUserService which extends UserDetail from Spring security.</p>\n<p>And then use this LdapUserService in Spring security configurations.</p>\n<p>Now you can perform authentication, authorization along with CRUD operations.</p>\n"}],"owner":{"account_id":23678540,"reputation":343,"user_id":17704418,"display_name":"salam_verdim_alana_panyatkasi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1306,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1640075841,"creation_date":1639773654,"question_id":70398672,"body_markdown":"I have created a Restful API. I am using in here LDAP authentication. Our company has an LDAP directory server and I am using the below method `as utility` in my `service layer`.\r\n\r\nThis is my LDAP authentication method, which I am using this method as a utility in my service layer.\r\n\r\n        public Map&lt;String, Object&gt; authenticate(String user, String pass) {\r\n        String returnedAtts[] = {&quot;sn&quot;, &quot;givenName&quot;, &quot;name&quot;, &quot;userPrincipalName&quot;, &quot;displayName&quot;, &quot;memberOf&quot;};\r\n        String searchFilter = &quot;(&amp;(objectClass=User)(sAMAccountName=&quot; + user + &quot;))&quot;;\r\n        // Create the search controls\r\n        SearchControls searchCtls = new SearchControls();\r\n        searchCtls.setReturningAttributes(returnedAtts);\r\n        // Specify the search scope\r\n        searchCtls.setSearchScope(SearchControls.SUBTREE_SCOPE);\r\n        Hashtable&lt;String, String&gt; env = new Hashtable&lt;String, String&gt;();\r\n        env.put(Context.INITIAL_CONTEXT_FACTORY, &quot;com.sun.jndi.ldap.LdapCtxFactory&quot;);\r\n        env.put(Context.PROVIDER_URL, ldapHost);\r\n        env.put(Context.SECURITY_AUTHENTICATION, &quot;simple&quot;);\r\n\r\n        env.put(Context.SECURITY_PRINCIPAL, user + &quot;@&quot; + domain);\r\n        env.put(Context.SECURITY_CREDENTIALS, pass);\r\n        env.put(Context.SECURITY_PROTOCOL, &quot;SSL&quot;);\r\n        LdapContext ctxGC = null;\r\n        NamingEnumeration&lt;SearchResult&gt; answer = null;\r\n        Attributes attrs = null;\r\n        SearchResult sr = null;\r\n        NamingEnumeration&lt;?&gt; ne = null;\r\n        Attribute attr = null;\r\n\r\n        try {\r\n            ctxGC = new InitialLdapContext(env, null);\r\n            if (ctxGC != null) {\r\n                answer = ctxGC.search(searchBase, searchFilter, searchCtls);\r\n                if (answer != null) {\r\n                    while (answer.hasMoreElements()) {\r\n                        sr = (SearchResult) answer.next();\r\n                        attrs = sr.getAttributes();\r\n                        if (attrs != null) {\r\n                            amap = new HashMap&lt;String, Object&gt;();\r\n                            ne = attrs.getAll();\r\n                            attr = (Attribute) ne.next();\r\n                            amap.put(attr.getID(), attr.get());\r\n                            ne.close();\r\n                        }\r\n                        ctxGC.close();         // Close and clean up\r\n                    }\r\n                } else {\r\n                    System.out.println(&quot;Answer from domen controller is null!&quot;);\r\n                }\r\n            } else {\r\n                System.out.println(&quot;Login or Password is wrong! &quot;);\r\n            }\r\n\r\n        } catch (NamingException ex) {\r\n            System.out.println(&quot;Exception: &quot;+ex.toString());\r\n        } finally {\r\n            System.out.println(&quot;&quot;);\r\n        }\r\n        return amap;\r\n    }\r\n\r\nThis is my service layer class and I am making utility class as an injection that can be used authentication method as you know. When I send a request in swagger or postman username and password, given the values that come from the request, I persist them into to database of the table. but before persisting, the authentication method controls my username and password. if the password or username is not correct I return an error response to the client otherwise I return a success response to the client. In both situations, I insert given values to the database of the table from the request.\r\n\r\n    @Override\r\n        public Optional&lt;ResponseEntity&lt;? extends ResponseDto&gt;&gt; login(String username, String password, String type) {\r\n\r\n    //Is there any method or feature that spring boot provides us instead of the method you see here?\r\n            Map&lt;String, Object&gt; authenticate = this.controlDomainLogin.authenticate(username, password);\r\n    //Is there any method or feature that spring boot provides us instead of the method you see here?\r\n\r\n \r\n            if (authenticate != null) {\r\n                DomainLogin domainLogin = new DomainLogin();\r\n                domainLogin.setUsername(username);\r\n                domainLogin.setType(type);\r\n                domainLogin.setLogDate(new Date());\r\n                ResponseEntity&lt;ResponseDto&gt; responseDtoResponseEntity = new ResponseEntity&lt;&gt;(new SuccessResponseDto(SUCCESS_OPERATION.getMessage(), SUCCESS_OPERATION.getCode(), authenticate), HttpStatus.OK);\r\n                domainLogin.setResponse(Objects.requireNonNull(responseDtoResponseEntity.getBody()).getMessage() + &quot;,&quot; + responseDtoResponseEntity.getBody().getCode());\r\n                this.domainLoginRepository.save(domainLogin);\r\n                return Optional.of(responseDtoResponseEntity);\r\n            } else {\r\n                DomainLogin domainLogin = new DomainLogin();\r\n                domainLogin.setUsername(username);\r\n                domainLogin.setType(type);\r\n                domainLogin.setLogDate(new Date());\r\n                ResponseEntity&lt;ResponseDto&gt; responseDtoResponseEntity = new ResponseEntity&lt;&gt;(new ErrorResponseDto(WRONG_USERNAME.getMessage(), WRONG_USERNAME.getCode()), HttpStatus.NOT_FOUND);\r\n                domainLogin.setResponse(Objects.requireNonNull(responseDtoResponseEntity.getBody()).getMessage() + &quot;,&quot; + responseDtoResponseEntity.getBody().getCode());\r\n                domainLogin.setException(Objects.requireNonNull(responseDtoResponseEntity.getBody()).getMessage() + &quot;,&quot; + responseDtoResponseEntity.getBody().getCode());\r\n                this.domainLoginRepository.save(domainLogin);\r\n                return Optional.of(responseDtoResponseEntity);\r\n            }\r\n        }\r\n\r\n\r\n\r\nNow I don&#39;t need to use this method, instead, does spring boot itself have a similar method or any feature, just like the method I showed above? I mean I shouldn&#39;t use this method, instead, is there something spring boot gave us that does the same thing?\r\n\r\nThe same operations will be repeated, but the difference is that I will delete the method that I wrote in java and use the spring boot&#39;s LDAP authentication method instead.\r\n\r\n\r\n\r\nIf it is the class I have shown below, when I run the project, the login page that spring has given by default appears, when I type my username and password there, it performs the validation process successfully, if it fails, it gives the following warning.\r\n\r\n    ctiveDirectoryLdapAuthenticationProvider : Active Directory authentication failed: Supplied password was invalid\r\n\r\n    \r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.security.authentication.AuthenticationManager;\r\n    import org.springframework.security.authentication.AuthenticationProvider;\r\n    import org.springframework.security.authentication.ProviderManager;\r\n    import org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\r\n    import org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\n    import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\n    import org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\r\n    import org.springframework.security.ldap.authentication.ad.ActiveDirectoryLdapAuthenticationProvider;\r\n    \r\n    import java.util.Arrays;\r\n    \r\n    import org.springframework.beans.factory.annotation.Value;\r\n    \r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class WebSecurityConfig extends WebSecurityConfigurerAdapter {\r\n    \r\n        @Value(&quot;${ad.domain}&quot;)\r\n        private String AD_DOMAIN;\r\n    \r\n        @Value(&quot;${ad.url}&quot;)\r\n        private String AD_URL;\r\n    \r\n        @Override\r\n        protected void configure(HttpSecurity http) throws Exception {\r\n            http\r\n                    .authorizeRequests()\r\n                    .anyRequest().fullyAuthenticated()\r\n                    .and()\r\n                    .formLogin();\r\n        }\r\n    \r\n        @Override\r\n        protected void configure(AuthenticationManagerBuilder authManagerBuilder) throws Exception {\r\n            authManagerBuilder.authenticationProvider(activeDirectoryLdapAuthenticationProvider()).userDetailsService(userDetailsService());\r\n        }\r\n    \r\n        @Bean\r\n        public AuthenticationManager authenticationManager() {\r\n            return new ProviderManager(Arrays.asList(activeDirectoryLdapAuthenticationProvider()));\r\n        }\r\n        @Bean\r\n        public AuthenticationProvider activeDirectoryLdapAuthenticationProvider() {\r\n            ActiveDirectoryLdapAuthenticationProvider provider = new ActiveDirectoryLdapAuthenticationProvider(AD_DOMAIN, AD_URL);\r\n            provider.setConvertSubErrorCodesToExceptions(true);\r\n            provider.setUseAuthenticationRequestCredentials(true);\r\n    \r\n            return provider;\r\n        }\r\n    }","title":"LDAP authentication using Spring Boot","body":"<p>I have created a Restful API. I am using in here LDAP authentication. Our company has an LDAP directory server and I am using the below method <code>as utility</code> in my <code>service layer</code>.</p>\n<p>This is my LDAP authentication method, which I am using this method as a utility in my service layer.</p>\n<pre><code>    public Map&lt;String, Object&gt; authenticate(String user, String pass) {\n    String returnedAtts[] = {&quot;sn&quot;, &quot;givenName&quot;, &quot;name&quot;, &quot;userPrincipalName&quot;, &quot;displayName&quot;, &quot;memberOf&quot;};\n    String searchFilter = &quot;(&amp;(objectClass=User)(sAMAccountName=&quot; + user + &quot;))&quot;;\n    // Create the search controls\n    SearchControls searchCtls = new SearchControls();\n    searchCtls.setReturningAttributes(returnedAtts);\n    // Specify the search scope\n    searchCtls.setSearchScope(SearchControls.SUBTREE_SCOPE);\n    Hashtable&lt;String, String&gt; env = new Hashtable&lt;String, String&gt;();\n    env.put(Context.INITIAL_CONTEXT_FACTORY, &quot;com.sun.jndi.ldap.LdapCtxFactory&quot;);\n    env.put(Context.PROVIDER_URL, ldapHost);\n    env.put(Context.SECURITY_AUTHENTICATION, &quot;simple&quot;);\n\n    env.put(Context.SECURITY_PRINCIPAL, user + &quot;@&quot; + domain);\n    env.put(Context.SECURITY_CREDENTIALS, pass);\n    env.put(Context.SECURITY_PROTOCOL, &quot;SSL&quot;);\n    LdapContext ctxGC = null;\n    NamingEnumeration&lt;SearchResult&gt; answer = null;\n    Attributes attrs = null;\n    SearchResult sr = null;\n    NamingEnumeration&lt;?&gt; ne = null;\n    Attribute attr = null;\n\n    try {\n        ctxGC = new InitialLdapContext(env, null);\n        if (ctxGC != null) {\n            answer = ctxGC.search(searchBase, searchFilter, searchCtls);\n            if (answer != null) {\n                while (answer.hasMoreElements()) {\n                    sr = (SearchResult) answer.next();\n                    attrs = sr.getAttributes();\n                    if (attrs != null) {\n                        amap = new HashMap&lt;String, Object&gt;();\n                        ne = attrs.getAll();\n                        attr = (Attribute) ne.next();\n                        amap.put(attr.getID(), attr.get());\n                        ne.close();\n                    }\n                    ctxGC.close();         // Close and clean up\n                }\n            } else {\n                System.out.println(&quot;Answer from domen controller is null!&quot;);\n            }\n        } else {\n            System.out.println(&quot;Login or Password is wrong! &quot;);\n        }\n\n    } catch (NamingException ex) {\n        System.out.println(&quot;Exception: &quot;+ex.toString());\n    } finally {\n        System.out.println(&quot;&quot;);\n    }\n    return amap;\n}\n</code></pre>\n<p>This is my service layer class and I am making utility class as an injection that can be used authentication method as you know. When I send a request in swagger or postman username and password, given the values that come from the request, I persist them into to database of the table. but before persisting, the authentication method controls my username and password. if the password or username is not correct I return an error response to the client otherwise I return a success response to the client. In both situations, I insert given values to the database of the table from the request.</p>\n<pre><code>@Override\n    public Optional&lt;ResponseEntity&lt;? extends ResponseDto&gt;&gt; login(String username, String password, String type) {\n\n//Is there any method or feature that spring boot provides us instead of the method you see here?\n        Map&lt;String, Object&gt; authenticate = this.controlDomainLogin.authenticate(username, password);\n//Is there any method or feature that spring boot provides us instead of the method you see here?\n\n\n        if (authenticate != null) {\n            DomainLogin domainLogin = new DomainLogin();\n            domainLogin.setUsername(username);\n            domainLogin.setType(type);\n            domainLogin.setLogDate(new Date());\n            ResponseEntity&lt;ResponseDto&gt; responseDtoResponseEntity = new ResponseEntity&lt;&gt;(new SuccessResponseDto(SUCCESS_OPERATION.getMessage(), SUCCESS_OPERATION.getCode(), authenticate), HttpStatus.OK);\n            domainLogin.setResponse(Objects.requireNonNull(responseDtoResponseEntity.getBody()).getMessage() + &quot;,&quot; + responseDtoResponseEntity.getBody().getCode());\n            this.domainLoginRepository.save(domainLogin);\n            return Optional.of(responseDtoResponseEntity);\n        } else {\n            DomainLogin domainLogin = new DomainLogin();\n            domainLogin.setUsername(username);\n            domainLogin.setType(type);\n            domainLogin.setLogDate(new Date());\n            ResponseEntity&lt;ResponseDto&gt; responseDtoResponseEntity = new ResponseEntity&lt;&gt;(new ErrorResponseDto(WRONG_USERNAME.getMessage(), WRONG_USERNAME.getCode()), HttpStatus.NOT_FOUND);\n            domainLogin.setResponse(Objects.requireNonNull(responseDtoResponseEntity.getBody()).getMessage() + &quot;,&quot; + responseDtoResponseEntity.getBody().getCode());\n            domainLogin.setException(Objects.requireNonNull(responseDtoResponseEntity.getBody()).getMessage() + &quot;,&quot; + responseDtoResponseEntity.getBody().getCode());\n            this.domainLoginRepository.save(domainLogin);\n            return Optional.of(responseDtoResponseEntity);\n        }\n    }\n</code></pre>\n<p>Now I don't need to use this method, instead, does spring boot itself have a similar method or any feature, just like the method I showed above? I mean I shouldn't use this method, instead, is there something spring boot gave us that does the same thing?</p>\n<p>The same operations will be repeated, but the difference is that I will delete the method that I wrote in java and use the spring boot's LDAP authentication method instead.</p>\n<p>If it is the class I have shown below, when I run the project, the login page that spring has given by default appears, when I type my username and password there, it performs the validation process successfully, if it fails, it gives the following warning.</p>\n<pre><code>ctiveDirectoryLdapAuthenticationProvider : Active Directory authentication failed: Supplied password was invalid\n\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.authentication.AuthenticationProvider;\nimport org.springframework.security.authentication.ProviderManager;\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\nimport org.springframework.security.ldap.authentication.ad.ActiveDirectoryLdapAuthenticationProvider;\n\nimport java.util.Arrays;\n\nimport org.springframework.beans.factory.annotation.Value;\n\n@Configuration\n@EnableWebSecurity\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\n\n    @Value(&quot;${ad.domain}&quot;)\n    private String AD_DOMAIN;\n\n    @Value(&quot;${ad.url}&quot;)\n    private String AD_URL;\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http\n                .authorizeRequests()\n                .anyRequest().fullyAuthenticated()\n                .and()\n                .formLogin();\n    }\n\n    @Override\n    protected void configure(AuthenticationManagerBuilder authManagerBuilder) throws Exception {\n        authManagerBuilder.authenticationProvider(activeDirectoryLdapAuthenticationProvider()).userDetailsService(userDetailsService());\n    }\n\n    @Bean\n    public AuthenticationManager authenticationManager() {\n        return new ProviderManager(Arrays.asList(activeDirectoryLdapAuthenticationProvider()));\n    }\n    @Bean\n    public AuthenticationProvider activeDirectoryLdapAuthenticationProvider() {\n        ActiveDirectoryLdapAuthenticationProvider provider = new ActiveDirectoryLdapAuthenticationProvider(AD_DOMAIN, AD_URL);\n        provider.setConvertSubErrorCodesToExceptions(true);\n        provider.setUseAuthenticationRequestCredentials(true);\n\n        return provider;\n    }\n}\n</code></pre>\n"},{"tags":["java","kubernetes","jvm","cgroups"],"comments":[{"owner":{"account_id":4210603,"reputation":94356,"user_id":3448419,"display_name":"apangin"},"score":2,"creation_date":1640079129,"post_id":70432565,"comment_id":124504310,"body_markdown":"Are you using ZGC? It&#39;s purposely reserves a huge amount of address space in order to use extra bits in the pointers ([colored pointers](https://stackoverflow.com/questions/62926652/the-java-zgc-garbage-collector-uses-a-lot-of-memory/62934057#62934057)). It&#39;s OK to have that much &quot;reserved&quot; memory. The reservation of address space costs nothing.","body":"Are you using ZGC? It&#39;s purposely reserves a huge amount of address space in order to use extra bits in the pointers (<a href=\"https://stackoverflow.com/questions/62926652/the-java-zgc-garbage-collector-uses-a-lot-of-memory/62934057#62934057\">colored pointers</a>). It&#39;s OK to have that much &quot;reserved&quot; memory. The reservation of address space costs nothing."},{"owner":{"account_id":10090818,"reputation":487,"user_id":7457872,"display_name":"bruto"},"score":0,"creation_date":1640100560,"post_id":70432565,"comment_id":124512518,"body_markdown":"@apangin Indeed, ZGC is the difference - the numbers are back to normal with G1\n\nthanks for clearing this up","body":"@apangin Indeed, ZGC is the difference - the numbers are back to normal with G1  thanks for clearing this up"}],"owner":{"account_id":10090818,"reputation":487,"user_id":7457872,"display_name":"bruto"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":272,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1640075746,"creation_date":1640075746,"question_id":70432565,"body_markdown":"Running my app in a container (adoptopenjdk11.0.13:debian) with 1g memory limit and maxrampercentage of 50\r\n\r\nNMT reports shows this:\r\n\r\n```\r\nTotal: reserved=17180391287KB, committed=817523KB\r\n                 Java Heap (reserved=17179869184KB, committed=557056KB)\r\n                            (mmap: reserved=17179869184KB, committed=557056KB)\r\n```\r\n\r\n&#39;cat /sys/fs/cgroup/memory/memory.limit_in_bytes&#39; shows 104857600 as expected\r\n\r\nHow exactly does JVM calculate available memory if not by looking at cgroups limits?","title":"Native memory tracking reports unrealistic reserved heap size","body":"<p>Running my app in a container (adoptopenjdk11.0.13:debian) with 1g memory limit and maxrampercentage of 50</p>\n<p>NMT reports shows this:</p>\n<pre><code>Total: reserved=17180391287KB, committed=817523KB\n                 Java Heap (reserved=17179869184KB, committed=557056KB)\n                            (mmap: reserved=17179869184KB, committed=557056KB)\n</code></pre>\n<p>'cat /sys/fs/cgroup/memory/memory.limit_in_bytes' shows 104857600 as expected</p>\n<p>How exactly does JVM calculate available memory if not by looking at cgroups limits?</p>\n"},{"tags":["java","cucumber","gherkin"],"answers":[{"tags":[],"owner":{"account_id":5700778,"reputation":8968,"user_id":4512398,"display_name":"Grasshopper"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1476995888,"creation_date":1476995888,"answer_id":40164099,"question_id":40163721,"body_markdown":"Modify your step definition to take in a String for the whole date. Maybe use something like (.*?) instead of 3 integers.\r\n\r\n    @Given(&quot;^the date of (.*?)$&quot;)\r\n    public void storeDate(@Transform(DateMapper.class) LocalDate date){\r\n    \r\n    }\r\n\r\nTransformer class\r\n\r\n    public class DateMapper extends Transformer&lt;LocalDate&gt;{\r\n    \r\n        @Override\r\n    \tpublic LocalDate transform(String date) {\r\n            \r\n            //Not too sure about the date pattern though, check it out if it gives correct result\r\n            DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&quot;);\r\n            \r\n            return LocalDate.parse(date, formatter); \r\n       }\r\n    \r\n    }\r\n\r\nCucumber should transform the string format into a date object for you","title":"Date object in Cucumber","body":"<p>Modify your step definition to take in a String for the whole date. Maybe use something like (.*?) instead of 3 integers.</p>\n\n<pre><code>@Given(\"^the date of (.*?)$\")\npublic void storeDate(@Transform(DateMapper.class) LocalDate date){\n\n}\n</code></pre>\n\n<p>Transformer class</p>\n\n<pre><code>public class DateMapper extends Transformer&lt;LocalDate&gt;{\n\n    @Override\n    public LocalDate transform(String date) {\n\n        //Not too sure about the date pattern though, check it out if it gives correct result\n        DateTimeFormatter formatter = DateTimeFormatter.ofPattern(\"yyyy-MM-dd\");\n\n        return LocalDate.parse(date, formatter); \n   }\n\n}\n</code></pre>\n\n<p>Cucumber should transform the string format into a date object for you</p>\n"},{"tags":[],"owner":{"account_id":9056085,"reputation":1023,"user_id":6744397,"display_name":"Anish Pillai"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1477007539,"creation_date":1477007539,"answer_id":40166295,"question_id":40163721,"body_markdown":"Please check if this works - \r\n\r\n    Scenario Outline: Date\t\r\n    Given the date of &lt;date&gt;\r\n    When blah blah\r\n    Then x y and z\r\n    Examples:\r\n    |date      |\r\n    |2015-01-01|\r\n    |2045-01-01|\r\n\r\nI have modified the default step definition like this - \r\n\r\n    @Given(&quot;^the date of (.*?)$&quot;)\r\n\tpublic void the_date_of(String strDate) throws Throwable {\r\n\t\tSimpleDateFormat format = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;, Locale.ENGLISH);\r\n\t\tDate date = format.parse(strDate);\r\n\t\tSystem.out.println(date);\r\n\t}\r\n\r\nThis prints the code like this - \r\n\r\n    Thu Jan 01 00:00:00 AEDT 2015\r\n    Sun Jan 01 00:00:00 AEDT 2045","title":"Date object in Cucumber","body":"<p>Please check if this works - </p>\n\n<pre><code>Scenario Outline: Date  \nGiven the date of &lt;date&gt;\nWhen blah blah\nThen x y and z\nExamples:\n|date      |\n|2015-01-01|\n|2045-01-01|\n</code></pre>\n\n<p>I have modified the default step definition like this - </p>\n\n<pre><code>@Given(\"^the date of (.*?)$\")\npublic void the_date_of(String strDate) throws Throwable {\n    SimpleDateFormat format = new SimpleDateFormat(\"yyyy-MM-dd\", Locale.ENGLISH);\n    Date date = format.parse(strDate);\n    System.out.println(date);\n}\n</code></pre>\n\n<p>This prints the code like this - </p>\n\n<pre><code>Thu Jan 01 00:00:00 AEDT 2015\nSun Jan 01 00:00:00 AEDT 2045\n</code></pre>\n"},{"tags":[],"owner":{"account_id":357783,"reputation":5010,"user_id":698168,"display_name":"Julien Kronegg"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1640075548,"creation_date":1640075548,"answer_id":70432532,"question_id":40163721,"body_markdown":"With Cucumber 7, I&#39;m defining a new `@ParameterType` :\r\n\r\n    @ParameterType(&quot;\\\\d{2}\\\\.\\\\d{2}\\\\.\\\\d{4}&quot;)\r\n    public LocalDate mydate(String dateString) {\r\n        return LocalDate.parse(dateString, DateTimeFormatter.ofPattern(&quot;dd.MM.yyyy&quot;));\r\n    }\r\n\r\nThen I can use step definition `@Given` such as :\r\n\r\n    @Given(&quot;person has birthdate {mydate}&quot;)\r\n    public void person_birthdate(LocalDate birthDate) {\r\n        ... // do something\r\n    }\r\n\r\nThe placeholder name `{mydate}` is the name of the mapping method, but you can override it through `@ParameterType.name`.","title":"Date object in Cucumber","body":"<p>With Cucumber 7, I'm defining a new <code>@ParameterType</code> :</p>\n<pre><code>@ParameterType(&quot;\\\\d{2}\\\\.\\\\d{2}\\\\.\\\\d{4}&quot;)\npublic LocalDate mydate(String dateString) {\n    return LocalDate.parse(dateString, DateTimeFormatter.ofPattern(&quot;dd.MM.yyyy&quot;));\n}\n</code></pre>\n<p>Then I can use step definition <code>@Given</code> such as :</p>\n<pre><code>@Given(&quot;person has birthdate {mydate}&quot;)\npublic void person_birthdate(LocalDate birthDate) {\n    ... // do something\n}\n</code></pre>\n<p>The placeholder name <code>{mydate}</code> is the name of the mapping method, but you can override it through <code>@ParameterType.name</code>.</p>\n"}],"owner":{"account_id":443973,"reputation":4509,"user_id":835523,"accept_rate":85,"display_name":"Steve"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21675,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":70432532,"answer_count":3,"score":7,"last_activity_date":1640075548,"creation_date":1476994452,"question_id":40163721,"body_markdown":"I have a cucumber stepdef like this\r\n\r\n    Given the date of &lt;date&gt;\r\n    When blah blah\r\n    Then x y and z\r\n    Examples:\r\n    |2015-01-01|\r\n    |2045-01-01|\r\nWhen I generate stepdefs off of this, I get `@Given(&quot;^the date of (\\\\d+)-(\\\\d+)-(\\\\d+)$&quot;)`\r\nAnd the method is generated with three integers as parameters.\r\nHow can I tell Cucumber to treat it like a Java.Time LocalDate? Is there a way to create a mapper that Cucumber will understand? Or at the very least, is there a way to treat that date object as a string instead of three numbers?","title":"Date object in Cucumber","body":"<p>I have a cucumber stepdef like this</p>\n\n<pre><code>Given the date of &lt;date&gt;\nWhen blah blah\nThen x y and z\nExamples:\n|2015-01-01|\n|2045-01-01|\n</code></pre>\n\n<p>When I generate stepdefs off of this, I get <code>@Given(\"^the date of (\\\\d+)-(\\\\d+)-(\\\\d+)$\")</code>\nAnd the method is generated with three integers as parameters.\nHow can I tell Cucumber to treat it like a Java.Time LocalDate? Is there a way to create a mapper that Cucumber will understand? Or at the very least, is there a way to treat that date object as a string instead of three numbers?</p>\n"},{"tags":["java","eclipse","wildfly"],"comments":[{"owner":{"account_id":3159259,"reputation":109668,"user_id":2670892,"display_name":"greg-449"},"score":1,"creation_date":1640076021,"post_id":70432399,"comment_id":124503280,"body_markdown":"The version of Java you use to run Eclipse can be different from the version of Java you use to run applications - so use the latest Eclipse.","body":"The version of Java you use to run Eclipse can be different from the version of Java you use to run applications - so use the latest Eclipse."},{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1640096277,"post_id":70432399,"comment_id":124510721,"body_markdown":"Don&#39;t use an Eclipse older than the Wildfly release you&#39;re trying to work on. Get the latest one.","body":"Don&#39;t use an Eclipse older than the Wildfly release you&#39;re trying to work on. Get the latest one."}],"owner":{"account_id":16710708,"reputation":1,"user_id":12077996,"display_name":"Marc"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":89,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1640075127,"creation_date":1640074791,"question_id":70432399,"body_markdown":"How can I configure a WildFly 23 on a Eclipse 2020-06? I installed the JbossTools from Eclipse Marketplace (4.16.0.Final) but in the server list only appears until Wildfly 20.\r\n\r\nI want to work with Eclipse 2020-06 beacuse is the last version that runs in Java 8 according the eclipse documentation (1) and Wildfly 23 is also compatible with Java 8 (2).\r\n\r\n(1) https://wiki.eclipse.org/Eclipse/Installation\r\n\r\n(2) https://docs.wildfly.org/23/Getting_Started_Guide.html\r\n\r\nThanks!\r\n\r\n","title":"Using WildFly23 with eclipse 2020-06","body":"<p>How can I configure a WildFly 23 on a Eclipse 2020-06? I installed the JbossTools from Eclipse Marketplace (4.16.0.Final) but in the server list only appears until Wildfly 20.</p>\n<p>I want to work with Eclipse 2020-06 beacuse is the last version that runs in Java 8 according the eclipse documentation (1) and Wildfly 23 is also compatible with Java 8 (2).</p>\n<p>(1) <a href=\"https://wiki.eclipse.org/Eclipse/Installation\" rel=\"nofollow noreferrer\">https://wiki.eclipse.org/Eclipse/Installation</a></p>\n<p>(2) <a href=\"https://docs.wildfly.org/23/Getting_Started_Guide.html\" rel=\"nofollow noreferrer\">https://docs.wildfly.org/23/Getting_Started_Guide.html</a></p>\n<p>Thanks!</p>\n"},{"tags":["java","spring-boot","docusignapi"],"comments":[{"owner":{"account_id":4297204,"reputation":2499,"user_id":9926179,"display_name":"b.s"},"score":0,"creation_date":1613718091,"post_id":66273005,"comment_id":117167196,"body_markdown":"If it&#39;s working with the postman then you should first check whether you&#39;r requesting the docu sign service with proper grant type and request method using rest template.","body":"If it&#39;s working with the postman then you should first check whether you&#39;r requesting the docu sign service with proper grant type and request method using rest template."},{"owner":{"account_id":4027315,"reputation":175,"user_id":3314970,"accept_rate":0,"display_name":"fongfong"},"score":0,"creation_date":1649787858,"post_id":66273005,"comment_id":126963227,"body_markdown":"Hi @nani. Are you using spring security with spring boot? Which java code example did you download? Thanks!","body":"Hi @nani. Are you using spring security with spring boot? Which java code example did you download? Thanks!"},{"owner":{"account_id":8033968,"reputation":167,"user_id":6057802,"display_name":"Nani"},"score":0,"creation_date":1651160864,"post_id":66273005,"comment_id":127303107,"body_markdown":"I have built my own application using those two. @fongfong","body":"I have built my own application using those two. @fongfong"}],"answers":[{"tags":[],"owner":{"account_id":11599388,"reputation":1310,"user_id":8497060,"display_name":"Matt King DS"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1617438266,"creation_date":1614117007,"answer_id":66341608,"question_id":66273005,"body_markdown":"The Code Example Launchers that we have for Java do operate on SpringBoot and has an example framework for creating JWT tokens, they should work for you out of the box.\r\n\r\nUsually when we see someone getting stuck at a 302 it&#39;s because the application isn&#39;t following provided redirects -- most commonly when the baseUrl being targeted is using http over https.\r\n\r\nCan you doublecheck your baseUrl and make sure that&#39;s the case? It&#39;s common to see 302s like this but not so much for them to be a roadblock.","title":"Is there any example source code for java and spring boot integration available for docusign?","body":"<p>The Code Example Launchers that we have for Java do operate on SpringBoot and has an example framework for creating JWT tokens, they should work for you out of the box.</p>\n<p>Usually when we see someone getting stuck at a 302 it's because the application isn't following provided redirects -- most commonly when the baseUrl being targeted is using http over https.</p>\n<p>Can you doublecheck your baseUrl and make sure that's the case? It's common to see 302s like this but not so much for them to be a roadblock.</p>\n"},{"tags":[],"owner":{"account_id":8033968,"reputation":167,"user_id":6057802,"display_name":"Nani"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1614151599,"creation_date":1614151599,"answer_id":66346410,"question_id":66273005,"body_markdown":"I have figured out the solution myself. It&#39;s the issue with the session management and security in the example code. If I call any API from rest template there is no session at the beginning and it requires a JWT. So I need to pass a session Id in the header which is active and holds the value of the current user.","title":"Is there any example source code for java and spring boot integration available for docusign?","body":"<p>I have figured out the solution myself. It's the issue with the session management and security in the example code. If I call any API from rest template there is no session at the beginning and it requires a JWT. So I need to pass a session Id in the header which is active and holds the value of the current user.</p>\n"}],"owner":{"account_id":8033968,"reputation":167,"user_id":6057802,"display_name":"Nani"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":377,"favorite_count":0,"down_vote_count":2,"up_vote_count":3,"accepted_answer_id":66346410,"answer_count":2,"score":1,"last_activity_date":1640074772,"creation_date":1613717693,"question_id":66273005,"body_markdown":"I am trying to integrate my spring boot application with docusign for sending the documents and getting it signed from the users. I am not able to do it because I am not getting as how to get the JWT token to call the API&#39;s. I have downloaded the java code example from the docusign and configured accordingly. I am able to call the API&#39;s from the postman properly, But when I call any API from my application by rest template it gives me 302 redirect found. Is there any example project with java available for this ? Am I missing something.","title":"Is there any example source code for java and spring boot integration available for docusign?","body":"<p>I am trying to integrate my spring boot application with docusign for sending the documents and getting it signed from the users. I am not able to do it because I am not getting as how to get the JWT token to call the API's. I have downloaded the java code example from the docusign and configured accordingly. I am able to call the API's from the postman properly, But when I call any API from my application by rest template it gives me 302 redirect found. Is there any example project with java available for this ? Am I missing something.</p>\n"},{"tags":["java","hibernate"],"answers":[{"tags":[],"owner":{"account_id":93007,"reputation":51990,"user_id":254643,"display_name":"Raghuram"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1286179914,"creation_date":1286179914,"answer_id":3853567,"question_id":3853106,"body_markdown":"It looks like, `cargo` can have one or more `item`.  Each item would have a reference to its corresponding `cargo`.\r\n\r\nFrom the log, `item` object is *inserted* first and then an attempt is made to *update* the `cargo` object (which does not exist).  \r\n\r\nI guess what you actually want is `cargo` object to be created first and then the `item` object to be created with the *id* of the cargo object as the reference - so, essentally re-look at the *save*() method in the *Action* class.","title":"org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1","body":"<p>It looks like, <code>cargo</code> can have one or more <code>item</code>.  Each item would have a reference to its corresponding <code>cargo</code>.</p>\n\n<p>From the log, <code>item</code> object is <em>inserted</em> first and then an attempt is made to <em>update</em> the <code>cargo</code> object (which does not exist).  </p>\n\n<p>I guess what you actually want is <code>cargo</code> object to be created first and then the <code>item</code> object to be created with the <em>id</em> of the cargo object as the reference - so, essentally re-look at the <em>save</em>() method in the <em>Action</em> class.</p>\n"},{"tags":[],"owner":{"account_id":67639,"reputation":16346,"user_id":197831,"accept_rate":89,"display_name":"M.J."},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1286198378,"creation_date":1286198378,"answer_id":3855589,"question_id":3853106,"body_markdown":"It looks like, when you try to delete the same object and then again update the same object, then it gives you this error. As after every update hibernate for safe checking fires how many rows were updated, but during the code the data must have been deleted. Over here hibernate distinguish between the objects based on the key what u have assigned or the equals method. \r\n\r\nso, just go through once through your code for this check, or try with implementing equals &amp; hashcode method correctly which might help.","title":"org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1","body":"<p>It looks like, when you try to delete the same object and then again update the same object, then it gives you this error. As after every update hibernate for safe checking fires how many rows were updated, but during the code the data must have been deleted. Over here hibernate distinguish between the objects based on the key what u have assigned or the equals method. </p>\n\n<p>so, just go through once through your code for this check, or try with implementing equals &amp; hashcode method correctly which might help.</p>\n"},{"tags":[],"owner":{"account_id":2217906,"reputation":471,"user_id":1958075,"display_name":"srinivasulu p"},"down_vote_count":0,"up_vote_count":47,"is_accepted":false,"score":47,"last_activity_date":1357649380,"creation_date":1357648051,"answer_id":14214940,"question_id":3853106,"body_markdown":"In the Hibernate mapping file for the `id` property, if you use any generator class, for that property you should not set the value explicitly by using a setter method.\r\n\r\nIf you set the value of the Id property explicitly, it will lead the error above. Check this to avoid this error.","title":"org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1","body":"<p>In the Hibernate mapping file for the <code>id</code> property, if you use any generator class, for that property you should not set the value explicitly by using a setter method.</p>\n\n<p>If you set the value of the Id property explicitly, it will lead the error above. Check this to avoid this error.</p>\n"},{"tags":[],"owner":{"account_id":2401048,"reputation":11,"user_id":2098689,"display_name":"joel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1361524861,"creation_date":1361523577,"answer_id":15020301,"question_id":3853106,"body_markdown":"    /*\r\n    * Thrown when a version number or timestamp check failed, indicating that the\r\n    * Session contained stale data (when using long transactions with versioning). \r\n    * Also occurs if we try delete or update a row that does not exist.\r\n    *\r\n    */\r\n\r\n    if ( expectedRowCount &gt; rowCount ) {\r\n       throw new StaleStateException(\t\t\t\r\n      &quot;Batch update returned unexpected row count from update [&quot; + batchPosition +&quot;]; actual row count: &quot; + rowCount +&quot;; expected: &quot; + expectedRowCount);\r\n       }\r\n\r\n`&lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;`\r\n This should show you the SQL that is executed and causes the problem.\r\n\r\n*The StaleStateException would be thrown only after we successfully deleted one object, and then tried to delete another. The reason for this is, while persisting the  objects across sessions, objects must first be deleted from the Session before deleted. Otherwise, subsequent deletes will cause the  `StaleStateException` to be  thrown. \r\n\r\n     Session.Remove(obj); \r\n     objectDAO.Delete(obj);\r\n\r\n*The problem was that a table must have only one field that is primary key (I had a composite key and this is not a good idea, except for the many to many relation). I  have solved using a new id table field auto incremental.\r\n\r\n*It can be fix by using `Hibernate session.update()` -- you need to have the table/view&#39;s primary key equal your corresponding bean property (eg. id).\r\n\r\n*","title":"org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1","body":"<pre><code>/*\n* Thrown when a version number or timestamp check failed, indicating that the\n* Session contained stale data (when using long transactions with versioning). \n* Also occurs if we try delete or update a row that does not exist.\n*\n*/\n\nif ( expectedRowCount &gt; rowCount ) {\n   throw new StaleStateException(           \n  \"Batch update returned unexpected row count from update [\" + batchPosition +\"]; actual row count: \" + rowCount +\"; expected: \" + expectedRowCount);\n   }\n</code></pre>\n\n<p><code>&lt;property name=\"show_sql\"&gt;true&lt;/property&gt;</code>\n This should show you the SQL that is executed and causes the problem.</p>\n\n<p>*The StaleStateException would be thrown only after we successfully deleted one object, and then tried to delete another. The reason for this is, while persisting the  objects across sessions, objects must first be deleted from the Session before deleted. Otherwise, subsequent deletes will cause the  <code>StaleStateException</code> to be  thrown. </p>\n\n<pre><code> Session.Remove(obj); \n objectDAO.Delete(obj);\n</code></pre>\n\n<p>*The problem was that a table must have only one field that is primary key (I had a composite key and this is not a good idea, except for the many to many relation). I  have solved using a new id table field auto incremental.</p>\n\n<p>*It can be fix by using <code>Hibernate session.update()</code> -- you need to have the table/view's primary key equal your corresponding bean property (eg. id).</p>\n\n<p>*</p>\n"},{"tags":[],"owner":{"account_id":1681180,"reputation":229,"user_id":1545379,"display_name":"Sumit Singh"},"down_vote_count":1,"up_vote_count":17,"is_accepted":false,"score":16,"last_activity_date":1381999324,"creation_date":1381998795,"answer_id":19421779,"question_id":3853106,"body_markdown":"its happen when you try to delete the same object and then again update the same object\r\nuse this after delete \r\n\r\n    session.clear();","title":"org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1","body":"<p>its happen when you try to delete the same object and then again update the same object\nuse this after delete </p>\n\n<pre><code>session.clear();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1464103,"reputation":2882,"user_id":1377498,"accept_rate":88,"display_name":"Muhammad Suleman"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1400755866,"creation_date":1400755866,"answer_id":23804739,"question_id":3853106,"body_markdown":"what i have experienced is that this exception raise when updating object have an id which  not exist in table. if you read exception message it says &quot;Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1&quot; which means it was unable to found record with your given id.\r\n\r\nTo avoid this i always read record with same id if i found record back then i call update otherwise throw &quot;exception record not found&quot;.","title":"org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1","body":"<p>what i have experienced is that this exception raise when updating object have an id which  not exist in table. if you read exception message it says \"Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1\" which means it was unable to found record with your given id.</p>\n\n<p>To avoid this i always read record with same id if i found record back then i call update otherwise throw \"exception record not found\".</p>\n"},{"tags":[],"owner":{"account_id":6635791,"reputation":41,"user_id":5122986,"display_name":"Emrah Denizer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1441183075,"creation_date":1441183075,"answer_id":32348368,"question_id":3853106,"body_markdown":"I had the same as well.Making the Id (0) doing &quot;(your Model value).setId(0)&quot; solved my problem.  ","title":"org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1","body":"<p>I had the same as well.Making the Id (0) doing \"(your Model value).setId(0)\" solved my problem.  </p>\n"},{"tags":[],"owner":{"account_id":8427709,"reputation":1,"user_id":6324430,"display_name":"manjunath"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1463046186,"creation_date":1463046186,"answer_id":37183118,"question_id":3853106,"body_markdown":"if The given id is not exist in the DB ,then you may get this exception.\r\n\r\n    Exception in thread &quot;main&quot; org.springframework.orm.hibernate3.HibernateOptimisticLockingFailureException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; nested exception is org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1","title":"org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1","body":"<p>if The given id is not exist in the DB ,then you may get this exception.</p>\n\n<pre><code>Exception in thread \"main\" org.springframework.orm.hibernate3.HibernateOptimisticLockingFailureException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; nested exception is org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1\n</code></pre>\n"},{"tags":[],"owner":{"account_id":97189,"reputation":11,"user_id":263769,"display_name":"Blanford Robinson"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640074757,"creation_date":1468254024,"answer_id":38311706,"question_id":3853106,"body_markdown":"This often happens when SQL statements are implemented in some performance costly way (implicit type conversions etc.).  \r\n\r\nI advice to debug the resulting SQL statements.\r\n\r\n### To debug turn on SQL logging\r\nTurn on hibernate SQL logging by adding the following lines to your log4j properties file:\r\n```\r\n# logs the SQL statements\r\nlog4j.logger.org.hibernate.SQL=debug\r\n\r\n# Logs the JDBC parameters passed to a query\r\nlog4j.logger.org.hibernate.type=trace\r\n```\r\n\r\nBefore failing you will see the last SQL statement attempted in your log, copy and paste this SQL into an external SQL client and run it. ","title":"org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1","body":"<p>This often happens when SQL statements are implemented in some performance costly way (implicit type conversions etc.).</p>\n<p>I advice to debug the resulting SQL statements.</p>\n<h3>To debug turn on SQL logging</h3>\n<p>Turn on hibernate SQL logging by adding the following lines to your log4j properties file:</p>\n<pre><code># logs the SQL statements\nlog4j.logger.org.hibernate.SQL=debug\n\n# Logs the JDBC parameters passed to a query\nlog4j.logger.org.hibernate.type=trace\n</code></pre>\n<p>Before failing you will see the last SQL statement attempted in your log, copy and paste this SQL into an external SQL client and run it.</p>\n"},{"tags":[],"owner":{"account_id":9797649,"reputation":11,"user_id":7260064,"display_name":"user7260064"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1481083731,"creation_date":1481077786,"answer_id":41008433,"question_id":3853106,"body_markdown":"For `update()` and `saveOrUpdate()` methods, `id` generator value should be there in the database. For the `save()` method, `id` generator is not required.  ","title":"org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1","body":"<p>For <code>update()</code> and <code>saveOrUpdate()</code> methods, <code>id</code> generator value should be there in the database. For the <code>save()</code> method, <code>id</code> generator is not required.  </p>\n"},{"tags":[],"owner":{"account_id":10826431,"reputation":1,"user_id":7962204,"display_name":"r.jatt"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1501148294,"creation_date":1501148294,"answer_id":45346896,"question_id":3853106,"body_markdown":"*please do not set id of child class which is generator class is foreign only set parent class id if your parent class id is assigned...\r\njust do one thing dont set id of child class via setter method your problem will be fix.....definately*.\r\n\r\n","title":"org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1","body":"<p><em>please do not set id of child class which is generator class is foreign only set parent class id if your parent class id is assigned...\njust do one thing dont set id of child class via setter method your problem will be fix.....definately</em>.</p>\n"},{"tags":[],"owner":{"account_id":1618137,"reputation":1034,"user_id":1495261,"display_name":"Bashar Ali Labadi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1511538282,"creation_date":1511538282,"answer_id":47476483,"question_id":3853106,"body_markdown":"So For my case I noticed hibernate is trying to update the record rather than inserting it and that thrown the exception mentioned.\r\n\r\nI finally came to find that my entity had an updatedAt timestamp column:\r\n\r\n    &lt;timestamp name=&quot;updatedDate&quot; column=&quot;updated_date&quot; /&gt;\r\n\r\nand when I was trying to initialize the object i found that the code was \r\nsetting this field explicitly. \r\n\r\nafter removing that setUpdateDate(new Date()) it worked and did an insert instead.","title":"org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1","body":"<p>So For my case I noticed hibernate is trying to update the record rather than inserting it and that thrown the exception mentioned.</p>\n\n<p>I finally came to find that my entity had an updatedAt timestamp column:</p>\n\n<pre><code>&lt;timestamp name=\"updatedDate\" column=\"updated_date\" /&gt;\n</code></pre>\n\n<p>and when I was trying to initialize the object i found that the code was \nsetting this field explicitly. </p>\n\n<p>after removing that setUpdateDate(new Date()) it worked and did an insert instead.</p>\n"},{"tags":[],"owner":{"account_id":3738655,"reputation":573,"user_id":3110605,"display_name":"real_paul"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1515765246,"creation_date":1515765246,"answer_id":48227689,"question_id":3853106,"body_markdown":"As mentioned above, be sure that you don&#39;t set any id fields which are supposed to be auto-generated.\r\n\r\nTo cause this problem during testing, make sure that the db &#39;sees&#39; aka flush this SQL, otherwise everything may seem fine when really its not.\r\n\r\nI encountered this problem when inserting my parent with a child into the db:\r\n\r\n1. Insert parent (with manual ID)\r\n2. Insert child (with autogenerated ID)\r\n3. Update foreign key in Child table to parent.\r\n\r\nThe 3. statement failed. Indeed the entry with the autogenerated ID (by Hibernate) was not in the table as a trigger changed the ID upon each insertion, thus letting the update fail with no matching row found.\r\n\r\nSince the table can be updated without any Hibernate I added a check whether the ID is null and only fill it in then to the trigger.\r\n","title":"org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1","body":"<p>As mentioned above, be sure that you don't set any id fields which are supposed to be auto-generated.</p>\n\n<p>To cause this problem during testing, make sure that the db 'sees' aka flush this SQL, otherwise everything may seem fine when really its not.</p>\n\n<p>I encountered this problem when inserting my parent with a child into the db:</p>\n\n<ol>\n<li>Insert parent (with manual ID)</li>\n<li>Insert child (with autogenerated ID)</li>\n<li>Update foreign key in Child table to parent.</li>\n</ol>\n\n<p>The 3. statement failed. Indeed the entry with the autogenerated ID (by Hibernate) was not in the table as a trigger changed the ID upon each insertion, thus letting the update fail with no matching row found.</p>\n\n<p>Since the table can be updated without any Hibernate I added a check whether the ID is null and only fill it in then to the trigger.</p>\n"},{"tags":[],"owner":{"account_id":97204,"reputation":4979,"user_id":263801,"accept_rate":74,"display_name":"Archie"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1605198289,"creation_date":1605198289,"answer_id":64807735,"question_id":3853106,"body_markdown":"FYI, another way this exception can occur is if:\r\n  * Your transaction isolation is `READ_COMMITTED`\r\n  * Transaction #1 queries for an entity, then deletes that entity\r\n  * A simultaneous transaction #2 does the same thing\r\n\r\nThen this can happen: TX #1 successfully commits before TX #2, then when TX #2 tries to delete the entity (again) it&#39;s not there any more - even though it was found by a query earlier in that same transaction. Note this anomaly is allowed with `READ_COMMITTED` isolation.\r\n\r\nIn my case the resulting exception looked like this:\r\n\r\n```\r\nHHH000315: Exception executing batch [org.hibernate.StaleStateException:\r\n  Batch update returned unexpected row count from update [0]; actual row\r\n  count: 0; expected: 1; statement executed: delete from Foobar where id=?],\r\n  SQL: delete from Foobar where id=?\r\n```","title":"org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1","body":"<p>FYI, another way this exception can occur is if:</p>\n<ul>\n<li>Your transaction isolation is <code>READ_COMMITTED</code></li>\n<li>Transaction #1 queries for an entity, then deletes that entity</li>\n<li>A simultaneous transaction #2 does the same thing</li>\n</ul>\n<p>Then this can happen: TX #1 successfully commits before TX #2, then when TX #2 tries to delete the entity (again) it's not there any more - even though it was found by a query earlier in that same transaction. Note this anomaly is allowed with <code>READ_COMMITTED</code> isolation.</p>\n<p>In my case the resulting exception looked like this:</p>\n<pre><code>HHH000315: Exception executing batch [org.hibernate.StaleStateException:\n  Batch update returned unexpected row count from update [0]; actual row\n  count: 0; expected: 1; statement executed: delete from Foobar where id=?],\n  SQL: delete from Foobar where id=?\n</code></pre>\n"}],"owner":{"account_id":212611,"reputation":271,"user_id":465539,"display_name":"subbu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":109462,"favorite_count":0,"down_vote_count":0,"up_vote_count":27,"answer_count":14,"score":27,"last_activity_date":1640074757,"creation_date":1286170661,"question_id":3853106,"body_markdown":"I am using struts and hibernate. I have a parent and child relation using set in hbm.\r\nIn the action I am using `session.saveOrUpdate()` method to save but while saving it is showing the below error. Can anyone help regardng this with explanation where I made the mistake?\r\n\r\nHere is my hbm.file\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot;?&gt;\r\n    &lt;!DOCTYPE hibernate-mapping PUBLIC \r\n    &quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;\r\n    &quot;http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd&quot;&gt;\r\n    \r\n    &lt;hibernate-mapping&gt;\r\n    \r\n     &lt;class name=&quot;com.model.cargo&quot; table=&quot;cargo&quot;&gt;\r\n      &lt;id name=&quot;id&quot; column=&quot;id&quot; type=&quot;java.lang.Long&quot;&gt;\r\n       &lt;generator class=&quot;increment&quot; /&gt;\r\n      &lt;/id&gt;\r\n      &lt;property name=&quot;cname&quot; column=&quot;cname&quot; /&gt;\r\n      &lt;property name=&quot;cdate&quot; column=&quot;cdate&quot; /&gt;\r\n      &lt;property name=&quot;csource&quot; column=&quot;csource&quot; /&gt;\r\n      &lt;property name=&quot;cdestination&quot; column=&quot;cdestination&quot; /&gt;\r\n      &lt;property name=&quot;create&quot; column=&quot;createby&quot; /&gt;\r\n      &lt;property name=&quot;status&quot; column=&quot;status&quot; /&gt;\r\n      \r\n      &lt;set name=&quot;itemList&quot; table=&quot;item&quot; inverse=&quot;true&quot;\r\n       cascade=&quot;all-delete-orphan&quot;&gt;\r\n       &lt;key&gt;\r\n        &lt;column name=&quot;id&quot; /&gt;\r\n       &lt;/key&gt;\r\n       &lt;one-to-many class=&quot;com.model.Item&quot; /&gt;\r\n      &lt;/set&gt;\r\n     &lt;/class&gt;\r\n     \r\n     &lt;class name=&quot;com.model.Item&quot; table=&quot;item&quot;&gt;\r\n      &lt;id name=&quot;itemid&quot; column=&quot;itemid&quot; type=&quot;java.lang.Long&quot;&gt;\r\n       &lt;generator class=&quot;increment&quot; /&gt;\r\n      &lt;/id&gt;\r\n      &lt;property name=&quot;itemName&quot; column=&quot;itemname&quot; /&gt;\r\n      &lt;property name=&quot;weight&quot; column=&quot;weight&quot; /&gt;\r\n      &lt;many-to-one class=&quot;com.model.cargo&quot; name=&quot;cargo&quot;\r\n       column=&quot;id&quot; /&gt;\r\n     &lt;/class&gt;\r\n    &lt;/hibernate-mapping&gt;\r\n\r\nMy action \r\n\r\n    package com.action;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.Collection;\r\n    import java.util.HashSet;\r\n    import java.util.Iterator;\r\n    import java.util.List;\r\n    import java.util.Set;\r\n    \r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpServletResponse;\r\n    import javax.servlet.http.HttpSession;\r\n    \r\n    import org.apache.commons.beanutils.BeanUtils;\r\n    \r\n    import org.apache.struts.action.ActionForm;\r\n    import org.apache.struts.action.ActionForward;\r\n    import org.apache.struts.action.ActionMapping;\r\n    import org.apache.struts.actions.DispatchAction;\r\n    import org.hibernate.Query;\r\n    import org.hibernate.Session;\r\n    import org.hibernate.SessionFactory;\r\n    import org.hibernate.Transaction;\r\n    import com.plugin.HibernatePlugIn;\r\n    import com.form.cargoForm;\r\n    import com.model.cargo;\r\n    import com.model.Item;\r\n    \r\n    \r\n    public class CargoAction extends DispatchAction {\r\n    \r\n    \r\n     public ActionForward add(ActionMapping mapping, ActionForm form,\r\n       HttpServletRequest request, HttpServletResponse response)\r\n       throws Exception {\r\n    \r\n      if (log.isDebugEnabled()) {\r\n       log.debug(&quot;Entering Master add method&quot;);\r\n      }\r\n    \r\n      try {\r\n    \r\n       cargoForm cargoForm = (cargoForm) form;\r\n       //System.out.println(&quot;ID&quot; + cargoForm.getId());\r\n       cargo cargo = new cargo();\r\n       System.out.println(&quot;in cargo Action&quot;);\r\n       // copy customerform to model\r\n       cargoForm.reset(mapping, request);\r\n       BeanUtils.copyProperties(cargo, cargoForm);\r\n       cargoForm.reset(mapping, request);\r\n      // cargoForm.setInputParam(&quot;new&quot;);\r\n       // updateFormBean(mapping, request, cargoForm);\r\n    \r\n      }\r\n    \r\n      catch (Exception ex) {\r\n       ex.printStackTrace();\r\n       return mapping.findForward(&quot;failure&quot;);\r\n      }\r\n    \r\n      return mapping.findForward(&quot;success1&quot;);\r\n     }\r\n    \r\n     public ActionForward save(ActionMapping mapping, ActionForm form,\r\n       HttpServletRequest request, HttpServletResponse response)\r\n       throws Exception {\r\n                  \r\n      SessionFactory sessionFactory=null;\r\n      Session session =null;\r\n      System.out.println(&quot;in cargo Action&quot;);\r\n      try{\r\n      sessionFactory = (SessionFactory) servlet\r\n        .getServletContext().getAttribute(HibernatePlugIn.KEY_NAME);  \r\n      session = sessionFactory.openSession();\r\n      Transaction tx = session.beginTransaction();\r\n      \r\n      cargoForm carForm = (cargoForm) form;\r\n     \r\n      \r\n      cargo cargo = new cargo();\r\n       \r\n      System.out.println(&quot;in cargo Action&quot;);\r\n     \r\n      BeanUtils.copyProperties(cargo,carForm);\r\n      System.out.println(&quot;id&quot;+ carForm.getId()); \r\n      System.out.println(&quot;item id&quot;+ carForm.getItemid()); \r\n      Set itemset = carForm.getItemDtl();\r\n      \r\n        System.out.println(&quot;size&quot;+itemset.size()); \r\n        Iterator iterator =itemset.iterator();   \r\n        while(iterator.hasNext()) { \r\n         Item it = (Item)iterator.next();\r\n        System.out.println(&quot;name&quot;+it.getItemName()); //log.debug(&quot;HERE&quot;);\r\n       it.setCargo(cargo); } \r\n        \r\n      cargo.setItemList(itemset);\r\n      System.out.println(&quot;size&quot;+ itemset.size()); \r\n      session.saveOrUpdate(&quot;cargo&quot;,cargo);\r\n      tx.commit();\r\n      }catch(Exception e){\r\n       e.printStackTrace();\r\n      }\r\n      return mapping.findForward(&quot;success&quot;);\r\n    \r\n     }\r\n    \r\n     public ActionForward search(ActionMapping mapping, ActionForm form,\r\n       HttpServletRequest request, HttpServletResponse response)\r\n       throws Exception {\r\n      System.out.println(&quot;in cargo search Action&quot;);\r\n      SessionFactory sessionFactory = (SessionFactory) servlet\r\n        .getServletContext().getAttribute(HibernatePlugIn.KEY_NAME);\r\n      HttpSession session1 = request.getSession();\r\n      Session session = sessionFactory.openSession();\r\n      Transaction tx = session.beginTransaction();\r\n      cargoForm cargoform = (cargoForm) form;\r\n      // System.out.println(&quot;Name&quot;+cargoForm.getName());\r\n      cargo cargo = new cargo();\r\n      System.out.println(&quot;in cargo search Action&quot;);\r\n      // copy customerform to model\r\n      BeanUtils.copyProperties(cargo, cargoform);\r\n      String name;\r\n      String status;\r\n      String createby;\r\n    \r\n      name = cargo.getCname();\r\n      status = cargo.getStatus();\r\n      createby = cargo.getCreate();\r\n      System.out.println(&quot;Name...&quot; + name);\r\n      System.out.println(&quot;status...&quot; + status);\r\n      System.out.println(&quot;createby...&quot; + createby);\r\n      try {\r\n       if ((name.equals(&quot;&quot;)) &amp;&amp; (createby.equals(&quot;&quot;))\r\n         &amp;&amp; (status.equals(&quot;&quot;)))\r\n        return mapping.findForward(&quot;failure&quot;);\r\n       String SQL_QUERY = &quot;from cargo c where c.cname=:name or c.status=:status or c.create=:createby&quot;;\r\n       Query query = session.createQuery(SQL_QUERY);\r\n       query.setParameter(&quot;name&quot;, name);\r\n       query.setParameter(&quot;status&quot;, status);\r\n       query.setParameter(&quot;createby&quot;, createby);\r\n       ArrayList al = new ArrayList();\r\n       for (Iterator i = query.iterate(); i.hasNext();) {\r\n        cargo cargo1 = (cargo) i.next();\r\n        al.add(cargo1);\r\n        System.out.println(&quot;Cargo ID is:&quot; + cargo1.getId());\r\n       }\r\n       System.out.println(&quot;Cargo list is:&quot; + al.size());\r\n       session1.setAttribute(&quot;clist&quot;, al);\r\n      } catch (Exception e) {\r\n       e.printStackTrace();\r\n       return mapping.findForward(&quot;failure&quot;);\r\n      }\r\n      System.out.println(&quot;search Cargo list is success&quot;);\r\n    \r\n      return mapping.findForward(&quot;success&quot;);\r\n     }\r\n\r\n \r\n\r\n     \r\n     public ActionForward edit(ActionMapping mapping, ActionForm form,\r\n       HttpServletRequest request, HttpServletResponse response)\r\n       throws Exception {\r\n      SessionFactory sessionFactory=null;\r\n      Session session =null;\r\n      if (log.isDebugEnabled()) {\r\n       log.debug(&quot;Entering Master Edit method&quot;);\r\n      }\r\n    \r\n      try {\r\n       sessionFactory = (SessionFactory) servlet\r\n         .getServletContext().getAttribute(HibernatePlugIn.KEY_NAME);\r\n       session = sessionFactory.openSession();\r\n       Transaction transaction=session.beginTransaction();\r\n       cargoForm carForm = (cargoForm) form;\r\n       // System.out.println(carForm.getStatus());\r\n       // System.out.println(carForm.getCreate());\r\n       cargo cargo = new cargo();\r\n       BeanUtils.copyProperties(cargo, carForm);\r\n          System.out.println(&quot;In Cargo Edit &quot;+cargo.getId());\r\n          String qstring = &quot;from cargo c where c.id=:id&quot;;\r\n       Query query = session.createQuery(qstring);\r\n       query.setParameter(&quot;id&quot;, cargo.getId());\r\n       ArrayList all = new ArrayList();\r\n       cargo c = (cargo) query.iterate().next();\r\n       \r\n       System.out.println(&quot;Edit Cargo list &quot; + all.size()); \r\n       \r\n       \r\n         Set purchaseArray = new HashSet();\r\n               System.out.println(&quot;Edit&quot;+c.getItemList().size());\r\n               carForm.setItemDtl(purchaseArray);\r\n               BeanUtils.copyProperties(carForm,c);\r\n               // transaction.commit();\r\n                session.flush();\r\n      } catch (Exception e) {\r\n       e.printStackTrace();\r\n       return mapping.findForward(&quot;failure&quot;);\r\n      }\r\n      \r\n      // return a forward to edit forward\r\n      System.out.println(&quot;Edit Cargo list is success&quot;);\r\n      return mapping.findForward(&quot;succ&quot;);\r\n     }\r\n     \r\n     public ActionForward delete(ActionMapping mapping, ActionForm form,\r\n       HttpServletRequest request, HttpServletResponse response)\r\n       throws Exception {\r\n    \r\n      try {\r\n       SessionFactory sessionFactory = (SessionFactory) servlet\r\n         .getServletContext().getAttribute(HibernatePlugIn.KEY_NAME);\r\n       Session session = sessionFactory.openSession();\r\n       Transaction tx = session.beginTransaction();\r\n       cargoForm carForm = (cargoForm) form;\r\n       // System.out.println(carForm.getStatus());\r\n       // System.out.println(carForm.getCreate());\r\n       cargo cargo = new cargo();\r\n       BeanUtils.copyProperties(cargo, carForm);\r\n          System.out.println(&quot;In Cargo Delete &quot;+cargo.getId());\r\n       //String qstring = &quot;delete from cargo c where c.id=:id&quot;;\r\n       //Query query = session.createQuery(qstring);\r\n       session.delete(&quot;cargo&quot;,cargo);\r\n         // session.delete(cargo);\r\n         // session.flush();\r\n       //query.setParameter(&quot;id&quot;, cargo.getId());\r\n       //int row=query.executeUpdate();\r\n       //System.out.println(&quot;deleted row&quot;+row);\r\n       tx.commit();\r\n       \r\n      } catch (Exception e) {\r\n       e.printStackTrace();\r\n       return mapping.findForward(&quot;failure&quot;);\r\n      }\r\n      // return a forward to edit forward\r\n      System.out.println(&quot;Deleted success&quot;);\r\n      return mapping.findForward(&quot;succes&quot;);\r\n     }\r\n     \r\n    }\r\n    \r\n      \r\n\r\nMy parent model\r\n    \r\n    package com.model;\r\n    \r\n    import java.util.HashSet;\r\n    import java.util.Set;\r\n    \r\n    public class cargo {\r\n     \r\n     private Long id;\r\n     private String cname;\r\n     private String cdate;\r\n     private String csource;\r\n     private String cdestination;\r\n     private String create;\r\n     private String status;\r\n     \r\n     private Set itemList = new HashSet();\r\n    \r\n     public Long getId() {\r\n      return id;\r\n     }\r\n    \r\n     public void setId(Long id) {\r\n      this.id = id;\r\n     }\r\n    \r\n     public String getCname() {\r\n      return cname;\r\n     }\r\n    \r\n     public void setCname(String cname) {\r\n      this.cname = cname;\r\n     }\r\n    \r\n     public String getCdate() {\r\n      return cdate;\r\n     }\r\n    \r\n     public void setCdate(String cdate) {\r\n      this.cdate = cdate;\r\n     }\r\n    \r\n     public String getCsource() {\r\n      return csource;\r\n     }\r\n    \r\n     public void setCsource(String csource) {\r\n      this.csource = csource;\r\n     }\r\n    \r\n     public String getCdestination() {\r\n      return cdestination;\r\n     }\r\n    \r\n     public void setCdestination(String cdestination) {\r\n      this.cdestination = cdestination;\r\n     }\r\n    \r\n     public String getCreate() {\r\n      return create;\r\n     }\r\n    \r\n     public void setCreate(String create) {\r\n      this.create = create;\r\n     }\r\n    \r\n     public String getStatus() {\r\n      return status;\r\n     }\r\n    \r\n     public void setStatus(String status) {\r\n      this.status = status;\r\n     }\r\n    \r\n     public Set getItemList() {\r\n      return itemList;\r\n     }\r\n    \r\n     public void setItemList(Set itemList) {\r\n      this.itemList = itemList;\r\n     }\r\n    \r\n     \r\n    }  \r\n\r\nMy child model   \r\n\r\n    package com.model;\r\n    \r\n    public class Item{\r\n     \r\n     private Long itemid;\r\n     private String itemName;\r\n     private String weight;\r\n     private cargo cargo;\r\n     \r\n     public Long getItemid() {\r\n      return itemid;\r\n     }\r\n     public void setItemid(Long itemid) {\r\n      this.itemid = itemid;\r\n     }\r\n     public String getItemName() {\r\n      return itemName;\r\n     }\r\n     public void setItemName(String itemName) {\r\n      this.itemName = itemName;\r\n     }\r\n     public String getWeight() {\r\n      return weight;\r\n     }\r\n     public void setWeight(String weight) {\r\n      this.weight = weight;\r\n     }\r\n     public cargo getCargo() {\r\n      return cargo;\r\n     }\r\n     public void setCargo(cargo cargo) {\r\n      this.cargo = cargo;\r\n     }\r\n    \r\n     \r\n    } \r\n      \r\n\r\nAnd my form\r\n\r\n    \r\n    \r\n    package com.form;\r\n    \r\n    import java.util.HashSet;\r\n    import java.util.Set;\r\n    \r\n    import javax.servlet.http.HttpServletRequest;\r\n    \r\n    import org.apache.struts.action.ActionForm;\r\n    import org.apache.struts.action.ActionMapping;\r\n    \r\n    import com.model.Item;\r\n    \r\n    public class cargoForm extends ActionForm {\r\n     private Long id;\r\n     private String cname;\r\n     private String cdate;\r\n     private String csource;\r\n     private String cdestination;\r\n     private String create;\r\n     private String status;\r\n    \r\n     private Long[] itemid;\r\n     private String[] itemName;\r\n     private String[] weight;\r\n    \r\n     private Set itemset = new HashSet();\r\n    \r\n     public Long getId() {\r\n      return id;\r\n     }\r\n    \r\n     public void setId(Long id) {\r\n      this.id = id;\r\n     }\r\n    \r\n     public String getCname() {\r\n      return cname;\r\n     }\r\n    \r\n     public void setCname(String cname) {\r\n      this.cname = cname;\r\n     }\r\n    \r\n     public String getCdate() {\r\n      return cdate;\r\n     }\r\n    \r\n     public void setCdate(String cdate) {\r\n      this.cdate = cdate;\r\n     }\r\n    \r\n     public String getCsource() {\r\n      return csource;\r\n     }\r\n    \r\n     public void setCsource(String csource) {\r\n      this.csource = csource;\r\n     }\r\n    \r\n     public String getCdestination() {\r\n      return cdestination;\r\n     }\r\n    \r\n     public void setCdestination(String cdestination) {\r\n      this.cdestination = cdestination;\r\n     }\r\n    \r\n     public String getCreate() {\r\n      return create;\r\n     }\r\n    \r\n     public void setCreate(String create) {\r\n      this.create = create;\r\n     }\r\n    \r\n     public String getStatus() {\r\n      return status;\r\n     }\r\n    \r\n     public void setStatus(String status) {\r\n      this.status = status;\r\n     }\r\n    \r\n     public Long[] getItemid() {\r\n      return itemid;\r\n     }\r\n    \r\n     public void setItemid(Long[] itemid) {\r\n      this.itemid = itemid;\r\n     }\r\n    \r\n     public String[] getItemName() {\r\n      return itemName;\r\n     }\r\n    \r\n     public void setItemName(String[] itemName) {\r\n      this.itemName = itemName;\r\n     }\r\n    \r\n     public String[] getWeight() {\r\n      return weight;\r\n     }\r\n    \r\n     public void setWeight(String[] weight) {\r\n      this.weight = weight;\r\n     }\r\n    \r\n     /*\r\n      * public Set getItemset() { return itemset; }\r\n      * \r\n      * public void setItemset(Set itemset) { this.itemset = itemset; }\r\n      */\r\n     public Set getItemDtl() {\r\n      if (itemid != null) {\r\n       itemset = new HashSet();\r\n       System.out.println(&quot;cargadd form&quot; + itemid);\r\n       for (int i = 0; i &lt; itemid.length; i++) {\r\n        Item it = new Item();\r\n        // it.setItemId(itemId[i]);\r\n        it.setItemName(itemName[i]);\r\n        System.out.println(&quot;cargadd form&quot; + itemName[i]);\r\n        it.setWeight(weight[i]);\r\n    \r\n        itemset.add(it);\r\n        System.out.println(&quot;cargadd form&quot; + itemset.size());\r\n       }\r\n      }\r\n      return itemset;\r\n     }\r\n    \r\n     public void setItemDtl(Set itemset) {\r\n      System.out.println(&quot;cargadd form&quot; + itemset.size());\r\n      this.itemset = itemset;\r\n      System.out.println(&quot;cargadd form&quot; + itemset.size());\r\n     }\r\n    \r\n     public void reset(ActionMapping mapping, HttpServletRequest request) {\r\n    \r\n      cname = &quot;&quot;;\r\n      csource = &quot;&quot;;\r\n      cdestination = &quot;&quot;;\r\n      cdate = &quot;&quot;;\r\n      status = &quot;&quot;;\r\n      create = &quot;&quot;;\r\n    \r\n     }\r\n    \r\n    }\r\n\r\n\r\nThe error:\r\n\r\n    Hibernate: select max(itemid) from item\r\n    Hibernate: insert into item (itemname, weight, position, id, itemid) values (?, ?, ?, ?, ?)\r\n    Hibernate: update cargo set name=?, date=?, source=?, destination=?, createby=?, status=? where id=?\r\n    Oct 4, 2010 10:44:08 AM org.hibernate.jdbc.BatchingBatcher doExecuteBatch\r\n    SEVERE: Exception executing batch: \r\n    org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1\r\n     at org.hibernate.jdbc.Expectations$BasicExpectation.checkBatched(Expectations.java:61)\r\n     at org.hibernate.jdbc.Expectations$BasicExpectation.verifyOutcome(Expectations.java:46)\r\n     at org.hibernate.jdbc.BatchingBatcher.checkRowCounts(BatchingBatcher.java:68)\r\n     at org.hibernate.jdbc.BatchingBatcher.doExecuteBatch(BatchingBatcher.java:48)\r\n     at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:242)\r\n     at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:235)\r\n     at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:140)\r\n     at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:298)\r\n     at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:27)\r\n     at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1000)\r\n     at org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:338)\r\n     at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:106)\r\n     at com.action.CargoAction.save(CargoAction.java:125)\r\n     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n     at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n     at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n     at java.lang.reflect.Method.invoke(Unknown Source)\r\n     at org.apache.struts.actions.DispatchAction.dispatchMethod(DispatchAction.java:269)\r\n     at org.apache.struts.actions.DispatchAction.execute(DispatchAction.java:170)\r\n     at org.apache.struts.chain.commands.servlet.ExecuteAction.execute(ExecuteAction.java:58)\r\n     at org.apache.struts.chain.commands.AbstractExecuteAction.execute(AbstractExecuteAction.java:67)\r\n     at org.apache.struts.chain.commands.ActionCommandBase.execute(ActionCommandBase.java:51)\r\n     at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:191)\r\n     at org.apache.commons.chain.generic.LookupCommand.execute(LookupCommand.java:305)\r\n     at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:191)\r\n     at org.apache.struts.chain.ComposableRequestProcessor.process(ComposableRequestProcessor.java:283)\r\n     at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)\r\n     at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:462)\r\n     at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)\r\n     at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)\r\n     at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:269)\r\n     at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)\r\n     at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)\r\n     at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:172)\r\n     at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)\r\n     at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)\r\n     at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)\r\n     at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:174)\r\n     at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:879)\r\n     at org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:665)\r\n     at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:528)\r\n     at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81)\r\n     at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689)\r\n     at java.lang.Thread.run(Unknown Source)\r\n    Oct 4, 2010 10:44:08 AM org.hibernate.event.def.AbstractFlushingEventListener performExecutions\r\n    SEVERE: Could not synchronize database state with session\r\n    org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1\r\n     at org.hibernate.jdbc.Expectations$BasicExpectation.checkBatched(Expectations.java:61)\r\n     at org.hibernate.jdbc.Expectations$BasicExpectation.verifyOutcome(Expectations.java:46)\r\n     at org.hibernate.jdbc.BatchingBatcher.checkRowCounts(BatchingBatcher.java:68)\r\n     at org.hibernate.jdbc.BatchingBatcher.doExecuteBatch(BatchingBatcher.java:48)\r\n     at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:242)\r\n     at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:235)\r\n     at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:140)\r\n     at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:298)\r\n     at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:27)\r\n     at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1000)\r\n     at org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:338)\r\n     at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:106)\r\n     at com.action.CargoAction.save(CargoAction.java:125)\r\n     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n     at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n     at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n     at java.lang.reflect.Method.invoke(Unknown Source)\r\n     at org.apache.struts.actions.DispatchAction.dispatchMethod(DispatchAction.java:269)\r\n     at org.apache.struts.actions.DispatchAction.execute(DispatchAction.java:170)\r\n     at org.apache.struts.chain.commands.servlet.ExecuteAction.execute(ExecuteAction.java:58)\r\n     at org.apache.struts.chain.commands.AbstractExecuteAction.execute(AbstractExecuteAction.java:67)\r\n     at org.apache.struts.chain.commands.ActionCommandBase.execute(ActionCommandBase.java:51)\r\n     at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:191)\r\n     at org.apache.commons.chain.generic.LookupCommand.execute(LookupCommand.java:305)\r\n     at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:191)\r\n     at org.apache.struts.chain.ComposableRequestProcessor.process(ComposableRequestProcessor.java:283)\r\n     at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)\r\n     at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:462)\r\n     at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)\r\n     at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)\r\n     at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:269)\r\n     at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)\r\n     at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)\r\n     at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:172)\r\n     at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)\r\n     at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)\r\n     at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)\r\n     at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:174)\r\n     at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:879)\r\n     at org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:665)\r\n     at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:528)\r\n     at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81)\r\n     at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689)\r\n     at java.lang.Thread.run(Unknown Source)\r\n    org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1\r\n     at org.hibernate.jdbc.Expectations$BasicExpectation.checkBatched(Expectations.java:61)\r\n     at org.hibernate.jdbc.Expectations$BasicExpectation.verifyOutcome(Expectations.java:46)\r\n     at org.hibernate.jdbc.BatchingBatcher.checkRowCounts(BatchingBatcher.java:68)\r\n     at org.hibernate.jdbc.BatchingBatcher.doExecuteBatch(BatchingBatcher.java:48)\r\n     at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:242)\r\n     at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:235)\r\n     at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:140)\r\n     at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:298)\r\n     at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:27)\r\n     at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1000)\r\n     at org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:338)\r\n     at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:106)\r\n     at com.action.CargoAction.save(CargoAction.java:125)\r\n     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n     at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n     at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n     at java.lang.reflect.Method.invoke(Unknown Source)\r\n     at org.apache.struts.actions.DispatchAction.dispatchMethod(DispatchAction.java:269)\r\n     at org.apache.struts.actions.DispatchAction.execute(DispatchAction.java:170)\r\n     at org.apache.struts.chain.commands.servlet.ExecuteAction.execute(ExecuteAction.java:58)\r\n     at org.apache.struts.chain.commands.AbstractExecuteAction.execute(AbstractExecuteAction.java:67)\r\n     at org.apache.struts.chain.commands.ActionCommandBase.execute(ActionCommandBase.java:51)\r\n     at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:191)\r\n     at org.apache.commons.chain.generic.LookupCommand.execute(LookupCommand.java:305)\r\n     at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:191)\r\n     at org.apache.struts.chain.ComposableRequestProcessor.process(ComposableRequestProcessor.java:283)\r\n     at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)\r\n     at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:462)\r\n     at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)\r\n     at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)\r\n     at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:269)\r\n     at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)\r\n     at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)\r\n     at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:172)\r\n     at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)\r\n     at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)\r\n     at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)\r\n     at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:174)\r\n     at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:879)\r\n     at org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:665)\r\n     at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:528)\r\n     at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81)\r\n     at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689)\r\n     at java.lang.Thread.run(Unknown Source)\r\n\r\n","title":"org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1","body":"<p>I am using struts and hibernate. I have a parent and child relation using set in hbm.\nIn the action I am using <code>session.saveOrUpdate()</code> method to save but while saving it is showing the below error. Can anyone help regardng this with explanation where I made the mistake?</p>\n\n<p>Here is my hbm.file</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;!DOCTYPE hibernate-mapping PUBLIC \n\"-//Hibernate/Hibernate Mapping DTD 3.0//EN\"\n\"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd\"&gt;\n\n&lt;hibernate-mapping&gt;\n\n &lt;class name=\"com.model.cargo\" table=\"cargo\"&gt;\n  &lt;id name=\"id\" column=\"id\" type=\"java.lang.Long\"&gt;\n   &lt;generator class=\"increment\" /&gt;\n  &lt;/id&gt;\n  &lt;property name=\"cname\" column=\"cname\" /&gt;\n  &lt;property name=\"cdate\" column=\"cdate\" /&gt;\n  &lt;property name=\"csource\" column=\"csource\" /&gt;\n  &lt;property name=\"cdestination\" column=\"cdestination\" /&gt;\n  &lt;property name=\"create\" column=\"createby\" /&gt;\n  &lt;property name=\"status\" column=\"status\" /&gt;\n\n  &lt;set name=\"itemList\" table=\"item\" inverse=\"true\"\n   cascade=\"all-delete-orphan\"&gt;\n   &lt;key&gt;\n    &lt;column name=\"id\" /&gt;\n   &lt;/key&gt;\n   &lt;one-to-many class=\"com.model.Item\" /&gt;\n  &lt;/set&gt;\n &lt;/class&gt;\n\n &lt;class name=\"com.model.Item\" table=\"item\"&gt;\n  &lt;id name=\"itemid\" column=\"itemid\" type=\"java.lang.Long\"&gt;\n   &lt;generator class=\"increment\" /&gt;\n  &lt;/id&gt;\n  &lt;property name=\"itemName\" column=\"itemname\" /&gt;\n  &lt;property name=\"weight\" column=\"weight\" /&gt;\n  &lt;many-to-one class=\"com.model.cargo\" name=\"cargo\"\n   column=\"id\" /&gt;\n &lt;/class&gt;\n&lt;/hibernate-mapping&gt;\n</code></pre>\n\n<p>My action </p>\n\n<pre><code>package com.action;\n\nimport java.util.ArrayList;\nimport java.util.Collection;\nimport java.util.HashSet;\nimport java.util.Iterator;\nimport java.util.List;\nimport java.util.Set;\n\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\nimport javax.servlet.http.HttpSession;\n\nimport org.apache.commons.beanutils.BeanUtils;\n\nimport org.apache.struts.action.ActionForm;\nimport org.apache.struts.action.ActionForward;\nimport org.apache.struts.action.ActionMapping;\nimport org.apache.struts.actions.DispatchAction;\nimport org.hibernate.Query;\nimport org.hibernate.Session;\nimport org.hibernate.SessionFactory;\nimport org.hibernate.Transaction;\nimport com.plugin.HibernatePlugIn;\nimport com.form.cargoForm;\nimport com.model.cargo;\nimport com.model.Item;\n\n\npublic class CargoAction extends DispatchAction {\n\n\n public ActionForward add(ActionMapping mapping, ActionForm form,\n   HttpServletRequest request, HttpServletResponse response)\n   throws Exception {\n\n  if (log.isDebugEnabled()) {\n   log.debug(\"Entering Master add method\");\n  }\n\n  try {\n\n   cargoForm cargoForm = (cargoForm) form;\n   //System.out.println(\"ID\" + cargoForm.getId());\n   cargo cargo = new cargo();\n   System.out.println(\"in cargo Action\");\n   // copy customerform to model\n   cargoForm.reset(mapping, request);\n   BeanUtils.copyProperties(cargo, cargoForm);\n   cargoForm.reset(mapping, request);\n  // cargoForm.setInputParam(\"new\");\n   // updateFormBean(mapping, request, cargoForm);\n\n  }\n\n  catch (Exception ex) {\n   ex.printStackTrace();\n   return mapping.findForward(\"failure\");\n  }\n\n  return mapping.findForward(\"success1\");\n }\n\n public ActionForward save(ActionMapping mapping, ActionForm form,\n   HttpServletRequest request, HttpServletResponse response)\n   throws Exception {\n\n  SessionFactory sessionFactory=null;\n  Session session =null;\n  System.out.println(\"in cargo Action\");\n  try{\n  sessionFactory = (SessionFactory) servlet\n    .getServletContext().getAttribute(HibernatePlugIn.KEY_NAME);  \n  session = sessionFactory.openSession();\n  Transaction tx = session.beginTransaction();\n\n  cargoForm carForm = (cargoForm) form;\n\n\n  cargo cargo = new cargo();\n\n  System.out.println(\"in cargo Action\");\n\n  BeanUtils.copyProperties(cargo,carForm);\n  System.out.println(\"id\"+ carForm.getId()); \n  System.out.println(\"item id\"+ carForm.getItemid()); \n  Set itemset = carForm.getItemDtl();\n\n    System.out.println(\"size\"+itemset.size()); \n    Iterator iterator =itemset.iterator();   \n    while(iterator.hasNext()) { \n     Item it = (Item)iterator.next();\n    System.out.println(\"name\"+it.getItemName()); //log.debug(\"HERE\");\n   it.setCargo(cargo); } \n\n  cargo.setItemList(itemset);\n  System.out.println(\"size\"+ itemset.size()); \n  session.saveOrUpdate(\"cargo\",cargo);\n  tx.commit();\n  }catch(Exception e){\n   e.printStackTrace();\n  }\n  return mapping.findForward(\"success\");\n\n }\n\n public ActionForward search(ActionMapping mapping, ActionForm form,\n   HttpServletRequest request, HttpServletResponse response)\n   throws Exception {\n  System.out.println(\"in cargo search Action\");\n  SessionFactory sessionFactory = (SessionFactory) servlet\n    .getServletContext().getAttribute(HibernatePlugIn.KEY_NAME);\n  HttpSession session1 = request.getSession();\n  Session session = sessionFactory.openSession();\n  Transaction tx = session.beginTransaction();\n  cargoForm cargoform = (cargoForm) form;\n  // System.out.println(\"Name\"+cargoForm.getName());\n  cargo cargo = new cargo();\n  System.out.println(\"in cargo search Action\");\n  // copy customerform to model\n  BeanUtils.copyProperties(cargo, cargoform);\n  String name;\n  String status;\n  String createby;\n\n  name = cargo.getCname();\n  status = cargo.getStatus();\n  createby = cargo.getCreate();\n  System.out.println(\"Name...\" + name);\n  System.out.println(\"status...\" + status);\n  System.out.println(\"createby...\" + createby);\n  try {\n   if ((name.equals(\"\")) &amp;&amp; (createby.equals(\"\"))\n     &amp;&amp; (status.equals(\"\")))\n    return mapping.findForward(\"failure\");\n   String SQL_QUERY = \"from cargo c where c.cname=:name or c.status=:status or c.create=:createby\";\n   Query query = session.createQuery(SQL_QUERY);\n   query.setParameter(\"name\", name);\n   query.setParameter(\"status\", status);\n   query.setParameter(\"createby\", createby);\n   ArrayList al = new ArrayList();\n   for (Iterator i = query.iterate(); i.hasNext();) {\n    cargo cargo1 = (cargo) i.next();\n    al.add(cargo1);\n    System.out.println(\"Cargo ID is:\" + cargo1.getId());\n   }\n   System.out.println(\"Cargo list is:\" + al.size());\n   session1.setAttribute(\"clist\", al);\n  } catch (Exception e) {\n   e.printStackTrace();\n   return mapping.findForward(\"failure\");\n  }\n  System.out.println(\"search Cargo list is success\");\n\n  return mapping.findForward(\"success\");\n }\n\n\n\n\n public ActionForward edit(ActionMapping mapping, ActionForm form,\n   HttpServletRequest request, HttpServletResponse response)\n   throws Exception {\n  SessionFactory sessionFactory=null;\n  Session session =null;\n  if (log.isDebugEnabled()) {\n   log.debug(\"Entering Master Edit method\");\n  }\n\n  try {\n   sessionFactory = (SessionFactory) servlet\n     .getServletContext().getAttribute(HibernatePlugIn.KEY_NAME);\n   session = sessionFactory.openSession();\n   Transaction transaction=session.beginTransaction();\n   cargoForm carForm = (cargoForm) form;\n   // System.out.println(carForm.getStatus());\n   // System.out.println(carForm.getCreate());\n   cargo cargo = new cargo();\n   BeanUtils.copyProperties(cargo, carForm);\n      System.out.println(\"In Cargo Edit \"+cargo.getId());\n      String qstring = \"from cargo c where c.id=:id\";\n   Query query = session.createQuery(qstring);\n   query.setParameter(\"id\", cargo.getId());\n   ArrayList all = new ArrayList();\n   cargo c = (cargo) query.iterate().next();\n\n   System.out.println(\"Edit Cargo list \" + all.size()); \n\n\n     Set purchaseArray = new HashSet();\n           System.out.println(\"Edit\"+c.getItemList().size());\n           carForm.setItemDtl(purchaseArray);\n           BeanUtils.copyProperties(carForm,c);\n           // transaction.commit();\n            session.flush();\n  } catch (Exception e) {\n   e.printStackTrace();\n   return mapping.findForward(\"failure\");\n  }\n\n  // return a forward to edit forward\n  System.out.println(\"Edit Cargo list is success\");\n  return mapping.findForward(\"succ\");\n }\n\n public ActionForward delete(ActionMapping mapping, ActionForm form,\n   HttpServletRequest request, HttpServletResponse response)\n   throws Exception {\n\n  try {\n   SessionFactory sessionFactory = (SessionFactory) servlet\n     .getServletContext().getAttribute(HibernatePlugIn.KEY_NAME);\n   Session session = sessionFactory.openSession();\n   Transaction tx = session.beginTransaction();\n   cargoForm carForm = (cargoForm) form;\n   // System.out.println(carForm.getStatus());\n   // System.out.println(carForm.getCreate());\n   cargo cargo = new cargo();\n   BeanUtils.copyProperties(cargo, carForm);\n      System.out.println(\"In Cargo Delete \"+cargo.getId());\n   //String qstring = \"delete from cargo c where c.id=:id\";\n   //Query query = session.createQuery(qstring);\n   session.delete(\"cargo\",cargo);\n     // session.delete(cargo);\n     // session.flush();\n   //query.setParameter(\"id\", cargo.getId());\n   //int row=query.executeUpdate();\n   //System.out.println(\"deleted row\"+row);\n   tx.commit();\n\n  } catch (Exception e) {\n   e.printStackTrace();\n   return mapping.findForward(\"failure\");\n  }\n  // return a forward to edit forward\n  System.out.println(\"Deleted success\");\n  return mapping.findForward(\"succes\");\n }\n\n}\n</code></pre>\n\n<p>My parent model</p>\n\n<pre><code>package com.model;\n\nimport java.util.HashSet;\nimport java.util.Set;\n\npublic class cargo {\n\n private Long id;\n private String cname;\n private String cdate;\n private String csource;\n private String cdestination;\n private String create;\n private String status;\n\n private Set itemList = new HashSet();\n\n public Long getId() {\n  return id;\n }\n\n public void setId(Long id) {\n  this.id = id;\n }\n\n public String getCname() {\n  return cname;\n }\n\n public void setCname(String cname) {\n  this.cname = cname;\n }\n\n public String getCdate() {\n  return cdate;\n }\n\n public void setCdate(String cdate) {\n  this.cdate = cdate;\n }\n\n public String getCsource() {\n  return csource;\n }\n\n public void setCsource(String csource) {\n  this.csource = csource;\n }\n\n public String getCdestination() {\n  return cdestination;\n }\n\n public void setCdestination(String cdestination) {\n  this.cdestination = cdestination;\n }\n\n public String getCreate() {\n  return create;\n }\n\n public void setCreate(String create) {\n  this.create = create;\n }\n\n public String getStatus() {\n  return status;\n }\n\n public void setStatus(String status) {\n  this.status = status;\n }\n\n public Set getItemList() {\n  return itemList;\n }\n\n public void setItemList(Set itemList) {\n  this.itemList = itemList;\n }\n\n\n}  \n</code></pre>\n\n<p>My child model   </p>\n\n<pre><code>package com.model;\n\npublic class Item{\n\n private Long itemid;\n private String itemName;\n private String weight;\n private cargo cargo;\n\n public Long getItemid() {\n  return itemid;\n }\n public void setItemid(Long itemid) {\n  this.itemid = itemid;\n }\n public String getItemName() {\n  return itemName;\n }\n public void setItemName(String itemName) {\n  this.itemName = itemName;\n }\n public String getWeight() {\n  return weight;\n }\n public void setWeight(String weight) {\n  this.weight = weight;\n }\n public cargo getCargo() {\n  return cargo;\n }\n public void setCargo(cargo cargo) {\n  this.cargo = cargo;\n }\n\n\n} \n</code></pre>\n\n<p>And my form</p>\n\n<pre><code>package com.form;\n\nimport java.util.HashSet;\nimport java.util.Set;\n\nimport javax.servlet.http.HttpServletRequest;\n\nimport org.apache.struts.action.ActionForm;\nimport org.apache.struts.action.ActionMapping;\n\nimport com.model.Item;\n\npublic class cargoForm extends ActionForm {\n private Long id;\n private String cname;\n private String cdate;\n private String csource;\n private String cdestination;\n private String create;\n private String status;\n\n private Long[] itemid;\n private String[] itemName;\n private String[] weight;\n\n private Set itemset = new HashSet();\n\n public Long getId() {\n  return id;\n }\n\n public void setId(Long id) {\n  this.id = id;\n }\n\n public String getCname() {\n  return cname;\n }\n\n public void setCname(String cname) {\n  this.cname = cname;\n }\n\n public String getCdate() {\n  return cdate;\n }\n\n public void setCdate(String cdate) {\n  this.cdate = cdate;\n }\n\n public String getCsource() {\n  return csource;\n }\n\n public void setCsource(String csource) {\n  this.csource = csource;\n }\n\n public String getCdestination() {\n  return cdestination;\n }\n\n public void setCdestination(String cdestination) {\n  this.cdestination = cdestination;\n }\n\n public String getCreate() {\n  return create;\n }\n\n public void setCreate(String create) {\n  this.create = create;\n }\n\n public String getStatus() {\n  return status;\n }\n\n public void setStatus(String status) {\n  this.status = status;\n }\n\n public Long[] getItemid() {\n  return itemid;\n }\n\n public void setItemid(Long[] itemid) {\n  this.itemid = itemid;\n }\n\n public String[] getItemName() {\n  return itemName;\n }\n\n public void setItemName(String[] itemName) {\n  this.itemName = itemName;\n }\n\n public String[] getWeight() {\n  return weight;\n }\n\n public void setWeight(String[] weight) {\n  this.weight = weight;\n }\n\n /*\n  * public Set getItemset() { return itemset; }\n  * \n  * public void setItemset(Set itemset) { this.itemset = itemset; }\n  */\n public Set getItemDtl() {\n  if (itemid != null) {\n   itemset = new HashSet();\n   System.out.println(\"cargadd form\" + itemid);\n   for (int i = 0; i &lt; itemid.length; i++) {\n    Item it = new Item();\n    // it.setItemId(itemId[i]);\n    it.setItemName(itemName[i]);\n    System.out.println(\"cargadd form\" + itemName[i]);\n    it.setWeight(weight[i]);\n\n    itemset.add(it);\n    System.out.println(\"cargadd form\" + itemset.size());\n   }\n  }\n  return itemset;\n }\n\n public void setItemDtl(Set itemset) {\n  System.out.println(\"cargadd form\" + itemset.size());\n  this.itemset = itemset;\n  System.out.println(\"cargadd form\" + itemset.size());\n }\n\n public void reset(ActionMapping mapping, HttpServletRequest request) {\n\n  cname = \"\";\n  csource = \"\";\n  cdestination = \"\";\n  cdate = \"\";\n  status = \"\";\n  create = \"\";\n\n }\n\n}\n</code></pre>\n\n<p>The error:</p>\n\n<pre><code>Hibernate: select max(itemid) from item\nHibernate: insert into item (itemname, weight, position, id, itemid) values (?, ?, ?, ?, ?)\nHibernate: update cargo set name=?, date=?, source=?, destination=?, createby=?, status=? where id=?\nOct 4, 2010 10:44:08 AM org.hibernate.jdbc.BatchingBatcher doExecuteBatch\nSEVERE: Exception executing batch: \norg.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1\n at org.hibernate.jdbc.Expectations$BasicExpectation.checkBatched(Expectations.java:61)\n at org.hibernate.jdbc.Expectations$BasicExpectation.verifyOutcome(Expectations.java:46)\n at org.hibernate.jdbc.BatchingBatcher.checkRowCounts(BatchingBatcher.java:68)\n at org.hibernate.jdbc.BatchingBatcher.doExecuteBatch(BatchingBatcher.java:48)\n at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:242)\n at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:235)\n at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:140)\n at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:298)\n at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:27)\n at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1000)\n at org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:338)\n at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:106)\n at com.action.CargoAction.save(CargoAction.java:125)\n at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n at java.lang.reflect.Method.invoke(Unknown Source)\n at org.apache.struts.actions.DispatchAction.dispatchMethod(DispatchAction.java:269)\n at org.apache.struts.actions.DispatchAction.execute(DispatchAction.java:170)\n at org.apache.struts.chain.commands.servlet.ExecuteAction.execute(ExecuteAction.java:58)\n at org.apache.struts.chain.commands.AbstractExecuteAction.execute(AbstractExecuteAction.java:67)\n at org.apache.struts.chain.commands.ActionCommandBase.execute(ActionCommandBase.java:51)\n at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:191)\n at org.apache.commons.chain.generic.LookupCommand.execute(LookupCommand.java:305)\n at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:191)\n at org.apache.struts.chain.ComposableRequestProcessor.process(ComposableRequestProcessor.java:283)\n at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)\n at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:462)\n at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)\n at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)\n at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:269)\n at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)\n at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)\n at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:172)\n at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)\n at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)\n at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)\n at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:174)\n at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:879)\n at org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:665)\n at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:528)\n at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81)\n at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689)\n at java.lang.Thread.run(Unknown Source)\nOct 4, 2010 10:44:08 AM org.hibernate.event.def.AbstractFlushingEventListener performExecutions\nSEVERE: Could not synchronize database state with session\norg.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1\n at org.hibernate.jdbc.Expectations$BasicExpectation.checkBatched(Expectations.java:61)\n at org.hibernate.jdbc.Expectations$BasicExpectation.verifyOutcome(Expectations.java:46)\n at org.hibernate.jdbc.BatchingBatcher.checkRowCounts(BatchingBatcher.java:68)\n at org.hibernate.jdbc.BatchingBatcher.doExecuteBatch(BatchingBatcher.java:48)\n at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:242)\n at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:235)\n at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:140)\n at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:298)\n at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:27)\n at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1000)\n at org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:338)\n at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:106)\n at com.action.CargoAction.save(CargoAction.java:125)\n at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n at java.lang.reflect.Method.invoke(Unknown Source)\n at org.apache.struts.actions.DispatchAction.dispatchMethod(DispatchAction.java:269)\n at org.apache.struts.actions.DispatchAction.execute(DispatchAction.java:170)\n at org.apache.struts.chain.commands.servlet.ExecuteAction.execute(ExecuteAction.java:58)\n at org.apache.struts.chain.commands.AbstractExecuteAction.execute(AbstractExecuteAction.java:67)\n at org.apache.struts.chain.commands.ActionCommandBase.execute(ActionCommandBase.java:51)\n at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:191)\n at org.apache.commons.chain.generic.LookupCommand.execute(LookupCommand.java:305)\n at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:191)\n at org.apache.struts.chain.ComposableRequestProcessor.process(ComposableRequestProcessor.java:283)\n at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)\n at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:462)\n at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)\n at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)\n at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:269)\n at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)\n at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)\n at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:172)\n at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)\n at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)\n at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)\n at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:174)\n at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:879)\n at org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:665)\n at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:528)\n at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81)\n at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689)\n at java.lang.Thread.run(Unknown Source)\norg.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1\n at org.hibernate.jdbc.Expectations$BasicExpectation.checkBatched(Expectations.java:61)\n at org.hibernate.jdbc.Expectations$BasicExpectation.verifyOutcome(Expectations.java:46)\n at org.hibernate.jdbc.BatchingBatcher.checkRowCounts(BatchingBatcher.java:68)\n at org.hibernate.jdbc.BatchingBatcher.doExecuteBatch(BatchingBatcher.java:48)\n at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:242)\n at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:235)\n at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:140)\n at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:298)\n at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:27)\n at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1000)\n at org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:338)\n at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:106)\n at com.action.CargoAction.save(CargoAction.java:125)\n at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n at java.lang.reflect.Method.invoke(Unknown Source)\n at org.apache.struts.actions.DispatchAction.dispatchMethod(DispatchAction.java:269)\n at org.apache.struts.actions.DispatchAction.execute(DispatchAction.java:170)\n at org.apache.struts.chain.commands.servlet.ExecuteAction.execute(ExecuteAction.java:58)\n at org.apache.struts.chain.commands.AbstractExecuteAction.execute(AbstractExecuteAction.java:67)\n at org.apache.struts.chain.commands.ActionCommandBase.execute(ActionCommandBase.java:51)\n at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:191)\n at org.apache.commons.chain.generic.LookupCommand.execute(LookupCommand.java:305)\n at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:191)\n at org.apache.struts.chain.ComposableRequestProcessor.process(ComposableRequestProcessor.java:283)\n at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)\n at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:462)\n at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)\n at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)\n at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:269)\n at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)\n at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)\n at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:172)\n at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)\n at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)\n at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)\n at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:174)\n at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:879)\n at org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:665)\n at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:528)\n at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81)\n at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689)\n at java.lang.Thread.run(Unknown Source)\n</code></pre>\n"},{"tags":["java","string","integer"],"answers":[{"tags":[],"owner":{"account_id":19690456,"reputation":1,"user_id":14415525,"display_name":"Rangga Surya Prayoga"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640074642,"creation_date":1639927781,"answer_id":70412779,"question_id":70395440,"body_markdown":"And the answer: \r\nhttps://www.youtube.com/watch?v=TdgQW8T-KeQ&amp;t (this is my video) &lt;br&gt;\r\nhttps://www.youtube.com/watch?v=NQOK2cam3js&amp;t (this is my inspiration video)\r\n\r\n    String jumlahString = Objects.requireNonNull(String.valueOf(layoutJumlah.getEditText().getText()));\r\n    jumlahString = jumlahString.replaceAll(&quot;[^0-9]&quot;, &quot;&quot;);\r\n    jumlah = Integer.parseInt(jumlahString);\r\n\r\n\r\n\r\n","title":"Convert formatCurrency (rupiah) to int","body":"<p>And the answer:\n<a href=\"https://www.youtube.com/watch?v=TdgQW8T-KeQ&amp;t\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=TdgQW8T-KeQ&amp;t</a> (this is my video) <br>\n<a href=\"https://www.youtube.com/watch?v=NQOK2cam3js&amp;t\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=NQOK2cam3js&amp;t</a> (this is my inspiration video)</p>\n<pre><code>String jumlahString = Objects.requireNonNull(String.valueOf(layoutJumlah.getEditText().getText()));\njumlahString = jumlahString.replaceAll(&quot;[^0-9]&quot;, &quot;&quot;);\njumlah = Integer.parseInt(jumlahString);\n</code></pre>\n"}],"owner":{"account_id":19690456,"reputation":1,"user_id":14415525,"display_name":"Rangga Surya Prayoga"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":439,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1640074642,"creation_date":1639755240,"question_id":70395440,"body_markdown":"Here I have a method like this:\r\n\r\n    // method currency format\r\n        private String formatRupiah(Double number) {\r\n            Locale locale = new Locale(&quot;IND&quot;, &quot;ID&quot;);\r\n            NumberFormat numberFormat = NumberFormat.getCurrencyInstance(locale);\r\n            String formatRupiah = numberFormat.format(number);\r\n            String[] split = formatRupiah.split(&quot;,&quot;);\r\n            int length = split[0].length();\r\n            String formatRupiahString = split[0].substring(0, 2) + &quot; &quot; + split[0].substring(2, length);\r\n            return formatRupiahString;\r\n        }\r\n\r\nAnd also have this method to change the text that is in the edit text into the currency format:\r\n\r\n    private void editTextToFormatCurrency() {\r\n            etJumlah.addTextChangedListener(new TextWatcher() {\r\n    \r\n                private String jumlahFormat = Objects.requireNonNull(etJumlah.getText()).toString().trim();\r\n    \r\n                @Override\r\n                public void beforeTextChanged(CharSequence s, int start, int count, int after) {\r\n    \r\n                }\r\n    \r\n                @Override\r\n                public void onTextChanged(CharSequence s, int start, int before, int count) {\r\n                    if (!s.toString().equals(jumlahFormat)) {\r\n                        etJumlah.removeTextChangedListener(this);\r\n                        String replace = s.toString().replaceAll(&quot;[Rp. ]&quot;, &quot;&quot;);\r\n                        if (!replace.isEmpty()) {\r\n                            jumlahFormat = formatRupiah(Double.parseDouble(replace));\r\n                        } else {\r\n                            jumlahFormat = &quot;&quot;;\r\n                        }\r\n                        etJumlah.setText(jumlahFormat);\r\n                        etJumlah.setSelection(jumlahFormat.length());\r\n                        etJumlah.addTextChangedListener(this);\r\n                    }\r\n                }\r\n    \r\n                @Override\r\n                public void afterTextChanged(Editable s) {\r\n    \r\n                }\r\n            });\r\n        }\r\n\r\nAnd now my question is how to change TextToFormatCurrencycto int or Integer without format currency ? &lt;br&gt;\r\nMy goal of changing back to Integer or int is so I can upload to Firestore with data type number.&lt;br&gt;","title":"Convert formatCurrency (rupiah) to int","body":"<p>Here I have a method like this:</p>\n<pre><code>// method currency format\n    private String formatRupiah(Double number) {\n        Locale locale = new Locale(&quot;IND&quot;, &quot;ID&quot;);\n        NumberFormat numberFormat = NumberFormat.getCurrencyInstance(locale);\n        String formatRupiah = numberFormat.format(number);\n        String[] split = formatRupiah.split(&quot;,&quot;);\n        int length = split[0].length();\n        String formatRupiahString = split[0].substring(0, 2) + &quot; &quot; + split[0].substring(2, length);\n        return formatRupiahString;\n    }\n</code></pre>\n<p>And also have this method to change the text that is in the edit text into the currency format:</p>\n<pre><code>private void editTextToFormatCurrency() {\n        etJumlah.addTextChangedListener(new TextWatcher() {\n\n            private String jumlahFormat = Objects.requireNonNull(etJumlah.getText()).toString().trim();\n\n            @Override\n            public void beforeTextChanged(CharSequence s, int start, int count, int after) {\n\n            }\n\n            @Override\n            public void onTextChanged(CharSequence s, int start, int before, int count) {\n                if (!s.toString().equals(jumlahFormat)) {\n                    etJumlah.removeTextChangedListener(this);\n                    String replace = s.toString().replaceAll(&quot;[Rp. ]&quot;, &quot;&quot;);\n                    if (!replace.isEmpty()) {\n                        jumlahFormat = formatRupiah(Double.parseDouble(replace));\n                    } else {\n                        jumlahFormat = &quot;&quot;;\n                    }\n                    etJumlah.setText(jumlahFormat);\n                    etJumlah.setSelection(jumlahFormat.length());\n                    etJumlah.addTextChangedListener(this);\n                }\n            }\n\n            @Override\n            public void afterTextChanged(Editable s) {\n\n            }\n        });\n    }\n</code></pre>\n<p>And now my question is how to change TextToFormatCurrencycto int or Integer without format currency ? <br>\nMy goal of changing back to Integer or int is so I can upload to Firestore with data type number.<br></p>\n"},{"tags":["java","tomcat","virtualhost","tomcat8"],"answers":[{"tags":[],"owner":{"account_id":8497217,"reputation":37834,"user_id":6371459,"accept_rate":25,"display_name":"pedrofb"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1640074121,"creation_date":1483005806,"answer_id":41377349,"question_id":41376063,"body_markdown":"You have defined two hosts with the same deployment directory `webapps`\r\n\r\nIf you want `localhost` to be different than `mydomain` define two deployment directories and rename the root context war to ROOT.war. it is not recommended to use `&lt;Context` tag\r\n\r\n    &lt;Host name=&quot;localhost&quot; autoDeploy=&quot;true&quot; unpackWARs=&quot;true&quot; appBase=&quot;webapps&quot;&gt;\r\n   &lt;/Host&gt;\r\n\r\n    &lt;Host name=&quot;www.mydomain.com&quot; autoDeploy=&quot;true&quot; unpackWARs=&quot;true&quot; appBase=&quot;mydomain&quot;&gt;\r\n    &lt;/Host&gt;\r\n\r\nYou do not need `alias` since the host name contains the domain name. All others requests coming from a DNS entry different to `www.mydomain.com` will be served by `localhost`\r\n\r\nIf `localhost` and `www.mydomain.com` are the same, then you just need a `&lt;Host` and deploy a `ROOT.war`\r\n\r\n     &lt;Host name=&quot;localhost&quot; autoDeploy=&quot;true&quot; unpackWARs=&quot;true&quot; appBase=&quot;webapps&quot;&gt;\r\n     &lt;/Host&gt;\r\n\r\n","title":"Virtual Host in Tomcat 8","body":"<p>You have defined two hosts with the same deployment directory <code>webapps</code></p>\n<p>If you want <code>localhost</code> to be different than <code>mydomain</code> define two deployment directories and rename the root context war to ROOT.war. it is not recommended to use <code>&lt;Context</code> tag</p>\n<pre><code>&lt;Host name=&quot;localhost&quot; autoDeploy=&quot;true&quot; unpackWARs=&quot;true&quot; appBase=&quot;webapps&quot;&gt;\n</code></pre>\n   \n<pre><code>&lt;Host name=&quot;www.mydomain.com&quot; autoDeploy=&quot;true&quot; unpackWARs=&quot;true&quot; appBase=&quot;mydomain&quot;&gt;\n&lt;/Host&gt;\n</code></pre>\n<p>You do not need <code>alias</code> since the host name contains the domain name. All others requests coming from a DNS entry different to <code>www.mydomain.com</code> will be served by <code>localhost</code></p>\n<p>If <code>localhost</code> and <code>www.mydomain.com</code> are the same, then you just need a <code>&lt;Host</code> and deploy a <code>ROOT.war</code></p>\n<pre><code> &lt;Host name=&quot;localhost&quot; autoDeploy=&quot;true&quot; unpackWARs=&quot;true&quot; appBase=&quot;webapps&quot;&gt;\n &lt;/Host&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":957088,"reputation":3922,"user_id":982198,"accept_rate":79,"display_name":"ddarellis"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1483005815,"creation_date":1483005815,"answer_id":41377355,"question_id":41376063,"body_markdown":"What worked for me was to map my applications like this in the server.xml file.\r\n\r\nDelete the host entry you added and inside the host entry you had from the start put this:\r\n\r\n    &lt;Context path=&quot;/&quot; docBase=&quot;yourApp&quot;&gt;\r\n        &lt;WatchedResource&gt;WEB-INF/web.xml&lt;/WatchedResource&gt;\r\n    &lt;/Context&gt;\r\n    &lt;Context path=&quot;/ROOT&quot; docBase=&quot;ROOT&quot;&gt;\r\n        &lt;WatchedResource&gt;WEB-INF/web.xml&lt;/WatchedResource&gt;\r\n    &lt;/Context&gt;\r\n\r\nDont forget to change yourApp","title":"Virtual Host in Tomcat 8","body":"<p>What worked for me was to map my applications like this in the server.xml file.</p>\n\n<p>Delete the host entry you added and inside the host entry you had from the start put this:</p>\n\n<pre><code>&lt;Context path=\"/\" docBase=\"yourApp\"&gt;\n    &lt;WatchedResource&gt;WEB-INF/web.xml&lt;/WatchedResource&gt;\n&lt;/Context&gt;\n&lt;Context path=\"/ROOT\" docBase=\"ROOT\"&gt;\n    &lt;WatchedResource&gt;WEB-INF/web.xml&lt;/WatchedResource&gt;\n&lt;/Context&gt;\n</code></pre>\n\n<p>Dont forget to change yourApp</p>\n"}],"owner":{"account_id":2390378,"reputation":1410,"user_id":2090332,"accept_rate":68,"display_name":"0bj3ct"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3241,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":41377349,"answer_count":2,"score":0,"last_activity_date":1640074121,"creation_date":1483001232,"question_id":41376063,"body_markdown":"I want to map a domain `mydomain.com` to an application. I added a `&lt;Host&gt;` entry into `server.xml`, but when I go to `www.mydomain.com` it shows the Tomcat start page instead of my application.\r\n\r\nserver.xml:\r\n\r\n    &lt;Engine name=&quot;Catalina&quot; defaultHost=&quot;localhost&quot;&gt;\r\n \r\n      &lt;Realm className=&quot;org.apache.catalina.realm.LockOutRealm&quot;&gt;\r\n       &lt;Realm className=&quot;org.apache.catalina.realm.UserDatabaseRealm&quot; resourceName=&quot;UserDatabase&quot;/&gt;\r\n      &lt;/Realm&gt;\r\n\r\n      &lt;Host name=&quot;localhost&quot; autoDeploy=&quot;true&quot; unpackWARs=&quot;true&quot; appBase=&quot;webapps&quot;&gt;\r\n        &lt;Valve className=&quot;org.apache.catalina.valves.AccessLogValve&quot; pattern=&quot;%h %l %u %t &quot;%r&quot; %s %b&quot; suffix=&quot;.txt&quot; prefix=&quot;localhost_access_log&quot; directory=&quot;logs&quot;/&gt;\r\n      &lt;/Host&gt;\r\n\r\n\r\n      &lt;Host name=&quot;mydomain.com&quot; autoDeploy=&quot;true&quot; unpackWARs=&quot;true&quot; appBase=&quot;webapps&quot;&gt;\r\n        &lt;Alias&gt;www.mydomain.com&lt;/Alias&gt;\r\n        &lt;Context privileged=&quot;true&quot; debug=&quot;0&quot; docBase=&quot;/opt/tomcat/webapps/MyDomain&quot; path=&quot;&quot;/&gt;\r\n        &lt;Valve className=&quot;org.apache.catalina.valves.AccessLogValve&quot; pattern=&quot;%h %l %u %t &quot;%r&quot; %s %b&quot; suffix=&quot;.txt&quot; prefix=&quot;localhost_access_log.&quot; directory=&quot;logs&quot; resolveHosts=&quot;false&quot;/&gt;\r\n      &lt;/Host&gt;\r\n\r\n    &lt;/Engine&gt;\r\n\r\nThanks in advance!","title":"Virtual Host in Tomcat 8","body":"<p>I want to map a domain <code>mydomain.com</code> to an application. I added a <code>&lt;Host&gt;</code> entry into <code>server.xml</code>, but when I go to <code>www.mydomain.com</code> it shows the Tomcat start page instead of my application.</p>\n\n<p>server.xml:</p>\n\n<pre><code>&lt;Engine name=\"Catalina\" defaultHost=\"localhost\"&gt;\n\n  &lt;Realm className=\"org.apache.catalina.realm.LockOutRealm\"&gt;\n   &lt;Realm className=\"org.apache.catalina.realm.UserDatabaseRealm\" resourceName=\"UserDatabase\"/&gt;\n  &lt;/Realm&gt;\n\n  &lt;Host name=\"localhost\" autoDeploy=\"true\" unpackWARs=\"true\" appBase=\"webapps\"&gt;\n    &lt;Valve className=\"org.apache.catalina.valves.AccessLogValve\" pattern=\"%h %l %u %t \"%r\" %s %b\" suffix=\".txt\" prefix=\"localhost_access_log\" directory=\"logs\"/&gt;\n  &lt;/Host&gt;\n\n\n  &lt;Host name=\"mydomain.com\" autoDeploy=\"true\" unpackWARs=\"true\" appBase=\"webapps\"&gt;\n    &lt;Alias&gt;www.mydomain.com&lt;/Alias&gt;\n    &lt;Context privileged=\"true\" debug=\"0\" docBase=\"/opt/tomcat/webapps/MyDomain\" path=\"\"/&gt;\n    &lt;Valve className=\"org.apache.catalina.valves.AccessLogValve\" pattern=\"%h %l %u %t \"%r\" %s %b\" suffix=\".txt\" prefix=\"localhost_access_log.\" directory=\"logs\" resolveHosts=\"false\"/&gt;\n  &lt;/Host&gt;\n\n&lt;/Engine&gt;\n</code></pre>\n\n<p>Thanks in advance!</p>\n"},{"tags":["java","colors","bit","argb"],"comments":[{"owner":{"account_id":16914570,"reputation":1532,"user_id":12232870,"display_name":"terrorrussia-keeps-killing"},"score":0,"creation_date":1640073549,"post_id":70432097,"comment_id":124502497,"body_markdown":"You forgot to apply (the `0xFF000000` mask optionally to the shift result of `alpha`: left-most bits will be discarded anyway, and the right-most bits will be zeroes) `0xFF0000` to the shift result of `red`, `0xFF00` to the shift result of green, and `0xFF` to `blue`. If I still remember how bit math works. :D","body":"You forgot to apply (the <code>0xFF000000</code> mask optionally to the shift result of <code>alpha</code>: left-most bits will be discarded anyway, and the right-most bits will be zeroes) <code>0xFF0000</code> to the shift result of <code>red</code>, <code>0xFF00</code> to the shift result of green, and <code>0xFF</code> to <code>blue</code>. If I still remember how bit math works. :D"},{"owner":{"account_id":11901543,"reputation":2366,"user_id":8709389,"accept_rate":14,"display_name":"zhh"},"score":1,"creation_date":1640073839,"post_id":70432097,"comment_id":124502580,"body_markdown":"You need to check whether these values are in [0, 255) or not. If they are, then your implementation is correct.","body":"You need to check whether these values are in [0, 255) or not. If they are, then your implementation is correct."}],"answers":[{"tags":[],"owner":{"account_id":22338599,"reputation":73,"user_id":16558721,"display_name":"Ahmad"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1640074043,"creation_date":1640074043,"answer_id":70432288,"question_id":70432097,"body_markdown":"You should also add a mask to each input to make sure they are not greater than `0xFF`:\r\n\r\n    int argb = (0xFF &amp; alpha) &lt;&lt; 24 | (0xFF &amp; red) &lt;&lt; 16 | (0xFF &amp; green) &lt;&lt; 8 | (0xFF &amp; blue)","title":"Convert int colours to argb","body":"<p>You should also add a mask to each input to make sure they are not greater than <code>0xFF</code>:</p>\n<pre><code>int argb = (0xFF &amp; alpha) &lt;&lt; 24 | (0xFF &amp; red) &lt;&lt; 16 | (0xFF &amp; green) &lt;&lt; 8 | (0xFF &amp; blue)\n</code></pre>\n"}],"owner":{"account_id":23699676,"reputation":3,"user_id":17722990,"display_name":"KepaArizzabalaga"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1640074043,"creation_date":1640072968,"question_id":70432097,"body_markdown":"```\r\npublic static int getARGB(final int red, final int green, final int blue, final int alpha) {\r\n        int argb = (alpha&lt;&lt;24)|(red&lt;&lt;16)|(green&lt;&lt;8)|blue;\r\n        return argb;\r\n    }\r\n```\r\nSo I have to convert the different colour ints to an argb value. Is the way I have done correct?","title":"Convert int colours to argb","body":"<pre><code>public static int getARGB(final int red, final int green, final int blue, final int alpha) {\n        int argb = (alpha&lt;&lt;24)|(red&lt;&lt;16)|(green&lt;&lt;8)|blue;\n        return argb;\n    }\n</code></pre>\n<p>So I have to convert the different colour ints to an argb value. Is the way I have done correct?</p>\n"},{"tags":["java","jackson","polymorphism","unmarshalling"],"answers":[{"tags":[],"owner":{"account_id":5797834,"reputation":2627,"user_id":4573065,"accept_rate":100,"display_name":"ST-DDT"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1640074025,"creation_date":1484566459,"answer_id":41675485,"question_id":41674776,"body_markdown":"You could use Jackson Mixins to fake a `@JsonDeserialize(using=CustomDeserializer.class)` annotation on the class/field in question.\r\nThen you can try to create the instances yourself in the given deserializer class.\r\n\r\n    // I&#39;m not sure whether annotations (@JsonTypeInfo) on class level are supported as well to allow the polymorphistic type decision.\r\n    abstract class MixIn {\r\n\r\n      // make constructor usable if available\r\n      MixIn(@JsonProperty(&quot;id&quot;) int a, @JsonProperty(&quot;name&quot;) String b) { }\r\n\r\n      @JsonDeserialize(using=CustomDeserializer.class) abstract TypeX getTypeX();\r\n      \r\n    }\r\n\r\nAnd then you can use it like this\r\n\r\n    objectMapper.addMixIn(TypeXContainer.class, MixIn.class);\r\n\r\nDoks: http://wiki.fasterxml.com/JacksonMixInAnnotations\r\n","title":"Jackson deserialize polymorphic types not under my control","body":"<p>You could use Jackson Mixins to fake a <code>@JsonDeserialize(using=CustomDeserializer.class)</code> annotation on the class/field in question.\nThen you can try to create the instances yourself in the given deserializer class.</p>\n<pre><code>// I'm not sure whether annotations (@JsonTypeInfo) on class level are supported as well to allow the polymorphistic type decision.\nabstract class MixIn {\n\n  // make constructor usable if available\n  MixIn(@JsonProperty(&quot;id&quot;) int a, @JsonProperty(&quot;name&quot;) String b) { }\n\n  @JsonDeserialize(using=CustomDeserializer.class) abstract TypeX getTypeX();\n  \n}\n</code></pre>\n<p>And then you can use it like this</p>\n<pre><code>objectMapper.addMixIn(TypeXContainer.class, MixIn.class);\n</code></pre>\n<p>Doks: <a href=\"http://wiki.fasterxml.com/JacksonMixInAnnotations\" rel=\"nofollow noreferrer\">http://wiki.fasterxml.com/JacksonMixInAnnotations</a></p>\n"}],"owner":{"account_id":201157,"reputation":12723,"user_id":447426,"accept_rate":62,"display_name":"dermoritz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":470,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":41675485,"answer_count":1,"score":1,"last_activity_date":1640074025,"creation_date":1484564233,"question_id":41674776,"body_markdown":"I want to (un)marshal an Object that contains a field of [this type][1]. While the serialization works well i am not able to deserialize it.\r\nThe implementing classes are not under my control. I guess in general it is not possible to deserialize to the original implementing class due to missing constructors and or setters.\r\n\r\nOn the other hand i want to save all information (as java object) contained in the json.\r\n\r\nWhat are my options to achieve this, are there best or good practices?\r\n\r\n\r\n  [1]: https://camel.apache.org/maven/camel-2.14.0/camel-core/apidocs/org/apache/camel/NamedNode.html","title":"Jackson deserialize polymorphic types not under my control","body":"<p>I want to (un)marshal an Object that contains a field of <a href=\"https://camel.apache.org/maven/camel-2.14.0/camel-core/apidocs/org/apache/camel/NamedNode.html\" rel=\"nofollow noreferrer\">this type</a>. While the serialization works well i am not able to deserialize it.\nThe implementing classes are not under my control. I guess in general it is not possible to deserialize to the original implementing class due to missing constructors and or setters.</p>\n\n<p>On the other hand i want to save all information (as java object) contained in the json.</p>\n\n<p>What are my options to achieve this, are there best or good practices?</p>\n"},{"tags":["java","string","substring"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":1,"creation_date":1640055006,"post_id":70430140,"comment_id":124499247,"body_markdown":"I don&#39;t think this is possible.  You should show the code that you are currently using.","body":"I don&#39;t think this is possible.  You should show the code that you are currently using."}],"answers":[{"tags":[],"owner":{"account_id":2094057,"reputation":506072,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640055265,"creation_date":1640055265,"answer_id":70430168,"question_id":70430140,"body_markdown":"The best you could perhaps do would be to use an iterative regex approach:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    String str = &quot;She was born on DATE at TIME on DAY&quot;;\r\n    Map&lt;String, String&gt; repl = new HashMap&lt;&gt;();\r\n    repl.put(&quot;DATE&quot;, &quot;DATE_REPL&quot;);\r\n    repl.put(&quot;TIME&quot;, &quot;TIME_REPL&quot;);\r\n    repl.put(&quot;DAY&quot;, &quot;DAY_REPL&quot;);\r\n\r\n    Pattern pattern = Pattern.compile(&quot;\\\\b(DATE|TIME|DAY)\\\\b&quot;);\r\n    Matcher m = pattern.matcher(str);\r\n    StringBuffer buffer = new StringBuffer();\r\n      \r\n    while(m.find()) {\r\n        m.appendReplacement(buffer, repl.get(m.group(1)));\r\n      }\r\n    m.appendTail(buffer);\r\n\r\n    System.out.println(&quot;input:  &quot; + str);\r\n    System.out.println(&quot;output: &quot; + buffer.toString());\r\n\r\nThis prints:\r\n\r\n    input:  She was born on DATE at TIME on DAY\r\n    output: She was born on DATE_REPL at TIME_REPL on DAY_REPL\r\n\r\nHere we are searching on the regex alternation `\\b(DATE|TIME|DAY)\\b`.  Each time we find a match in the string, we do a lookup in a hashmap for the replacement string.","title":"How to replace substrings of string with different substrings in JAVA?","body":"<p>The best you could perhaps do would be to use an iterative regex approach:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String str = &quot;She was born on DATE at TIME on DAY&quot;;\nMap&lt;String, String&gt; repl = new HashMap&lt;&gt;();\nrepl.put(&quot;DATE&quot;, &quot;DATE_REPL&quot;);\nrepl.put(&quot;TIME&quot;, &quot;TIME_REPL&quot;);\nrepl.put(&quot;DAY&quot;, &quot;DAY_REPL&quot;);\n\nPattern pattern = Pattern.compile(&quot;\\\\b(DATE|TIME|DAY)\\\\b&quot;);\nMatcher m = pattern.matcher(str);\nStringBuffer buffer = new StringBuffer();\n  \nwhile(m.find()) {\n    m.appendReplacement(buffer, repl.get(m.group(1)));\n  }\nm.appendTail(buffer);\n\nSystem.out.println(&quot;input:  &quot; + str);\nSystem.out.println(&quot;output: &quot; + buffer.toString());\n</code></pre>\n<p>This prints:</p>\n<pre><code>input:  She was born on DATE at TIME on DAY\noutput: She was born on DATE_REPL at TIME_REPL on DAY_REPL\n</code></pre>\n<p>Here we are searching on the regex alternation <code>\\b(DATE|TIME|DAY)\\b</code>.  Each time we find a match in the string, we do a lookup in a hashmap for the replacement string.</p>\n"},{"tags":[],"owner":{"account_id":23667337,"reputation":1467,"user_id":17694626,"display_name":"Cheng Thao"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640058514,"creation_date":1640055615,"answer_id":70430193,"question_id":70430140,"body_markdown":"The built-in String replace doesn&#39;t support replacing multiple occurrences.  So, you will need to write your own method to do so.\r\n\r\nThe code below assumes ``oldstuff`` contains unique strings.  If they are not unique, you would have to write a different solution.\r\n\r\n```\r\n   public static void main(String[] args) {\r\n        String original = &quot; She was born on DATE at TIME on DAY&quot;;\r\n        String[] oldstuff = {&quot;DATE&quot;, &quot;TIME&quot;, &quot;DAY&quot;};\r\n        String[] newstuff = {&quot;Feb 14, 2000&quot;, &quot;midnight&quot;, &quot;Tuesday&quot;};\r\n\r\n        System.out.println(original);\r\n        String updated = replace(original, oldstuff, newstuff);\r\n        System.out.println(updated);\r\n\r\n    }\r\n\r\n    static String replace(String str, String[] oldstuff, String[] newstuff) {\r\n        for (int i = 0; i &lt; oldstuff.length; i++) {\r\n            str = str.replace(oldstuff[i], newstuff[i]);\r\n        }\r\n        return str;\r\n    }\r\n```\r\n\r\nOutput:\r\n\r\n```\r\n She was born on DATE at TIME on DAY\r\n She was born on Feb 14, 2000 at midnight on Tuesday\r\n```\r\n\r\nA better solution would be to scan word by word, replacing only a match is found.  \r\n\r\n```\r\n    static String replace2(String str, String[] oldstuff, String[] newstuff){\r\n        StringBuilder sb = new StringBuilder();\r\n        java.util.Scanner s = new Scanner(str);\r\n        int index = 0;\r\n        while(s.hasNext()){\r\n            String word = s.next();\r\n            if (word.equals(oldstuff[index])){\r\n                sb.append(&quot; &quot;).append(newstuff[index]).append(&quot; &quot;);\r\n                index++;\r\n            } else {\r\n                sb.append(&quot; &quot;).append(word).append(&quot; &quot;);\r\n            }\r\n        }\r\n        \r\n        return sb.toString();\r\n    }\r\n\r\n```","title":"How to replace substrings of string with different substrings in JAVA?","body":"<p>The built-in String replace doesn't support replacing multiple occurrences.  So, you will need to write your own method to do so.</p>\n<p>The code below assumes <code>oldstuff</code> contains unique strings.  If they are not unique, you would have to write a different solution.</p>\n<pre><code>   public static void main(String[] args) {\n        String original = &quot; She was born on DATE at TIME on DAY&quot;;\n        String[] oldstuff = {&quot;DATE&quot;, &quot;TIME&quot;, &quot;DAY&quot;};\n        String[] newstuff = {&quot;Feb 14, 2000&quot;, &quot;midnight&quot;, &quot;Tuesday&quot;};\n\n        System.out.println(original);\n        String updated = replace(original, oldstuff, newstuff);\n        System.out.println(updated);\n\n    }\n\n    static String replace(String str, String[] oldstuff, String[] newstuff) {\n        for (int i = 0; i &lt; oldstuff.length; i++) {\n            str = str.replace(oldstuff[i], newstuff[i]);\n        }\n        return str;\n    }\n</code></pre>\n<p>Output:</p>\n<pre><code> She was born on DATE at TIME on DAY\n She was born on Feb 14, 2000 at midnight on Tuesday\n</code></pre>\n<p>A better solution would be to scan word by word, replacing only a match is found.</p>\n<pre><code>    static String replace2(String str, String[] oldstuff, String[] newstuff){\n        StringBuilder sb = new StringBuilder();\n        java.util.Scanner s = new Scanner(str);\n        int index = 0;\n        while(s.hasNext()){\n            String word = s.next();\n            if (word.equals(oldstuff[index])){\n                sb.append(&quot; &quot;).append(newstuff[index]).append(&quot; &quot;);\n                index++;\n            } else {\n                sb.append(&quot; &quot;).append(word).append(&quot; &quot;);\n            }\n        }\n        \n        return sb.toString();\n    }\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23706429,"reputation":11,"user_id":17728828,"display_name":"itsbenchase"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640056592,"creation_date":1640056592,"answer_id":70430281,"question_id":70430140,"body_markdown":"The easiest way to do so would be to make date, time, and day separate variables, so that\r\n\r\n```\r\nString str = &quot;She was born on &quot; + date + &quot; at &quot; + time + &quot; on &quot; + day;\r\n```","title":"How to replace substrings of string with different substrings in JAVA?","body":"<p>The easiest way to do so would be to make date, time, and day separate variables, so that</p>\n<pre><code>String str = &quot;She was born on &quot; + date + &quot; at &quot; + time + &quot; on &quot; + day;\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user17233545"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640071511,"creation_date":1640060691,"answer_id":70430664,"question_id":70430140,"body_markdown":"Try this.\r\n\r\n    public static void main(String[] args) {\r\n        String str =&quot; She was born on DATE at TIME on DAY&quot;;\r\n\r\n        List&lt;String&gt; list = List.of(&quot;(date)&quot;, &quot;(time)&quot;, &quot;(day)&quot;);\r\n        Iterator&lt;String&gt; iterator = list.iterator();\r\n        String output = Pattern.compile(&quot;DATE|TIME|DAY&quot;).matcher(str)\r\n            .replaceAll(m -&gt; iterator.next());\r\n\r\n        System.out.println(output);\r\n    }\r\n\r\noutput:\r\n\r\n     She was born on (date) at (time) on (day)\r\n\r\nOr\r\n\r\n        Map&lt;String, String&gt; map = Map.of(&quot;DATE&quot;, &quot;(date)&quot;, &quot;TIME&quot;, &quot;(time)&quot;, &quot;DAY&quot;, &quot;(day)&quot;);\r\n        String output = Pattern.compile(String.join(&quot;|&quot;, map.keySet())).matcher(str)\r\n            .replaceAll(m -&gt; map.get(m.group()));\r\n        System.out.println(output);\r\n","title":"How to replace substrings of string with different substrings in JAVA?","body":"<p>Try this.</p>\n<pre><code>public static void main(String[] args) {\n    String str =&quot; She was born on DATE at TIME on DAY&quot;;\n\n    List&lt;String&gt; list = List.of(&quot;(date)&quot;, &quot;(time)&quot;, &quot;(day)&quot;);\n    Iterator&lt;String&gt; iterator = list.iterator();\n    String output = Pattern.compile(&quot;DATE|TIME|DAY&quot;).matcher(str)\n        .replaceAll(m -&gt; iterator.next());\n\n    System.out.println(output);\n}\n</code></pre>\n<p>output:</p>\n<pre><code> She was born on (date) at (time) on (day)\n</code></pre>\n<p>Or</p>\n<pre><code>    Map&lt;String, String&gt; map = Map.of(&quot;DATE&quot;, &quot;(date)&quot;, &quot;TIME&quot;, &quot;(time)&quot;, &quot;DAY&quot;, &quot;(day)&quot;);\n    String output = Pattern.compile(String.join(&quot;|&quot;, map.keySet())).matcher(str)\n        .replaceAll(m -&gt; map.get(m.group()));\n    System.out.println(output);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17849762,"reputation":104,"user_id":12965752,"display_name":"Bhushan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640065919,"creation_date":1640065919,"answer_id":70431172,"question_id":70430140,"body_markdown":"**In one go**\r\n\r\n    String str =&quot; She was born on DATE at TIME on DAY&quot;;\r\n\tstr = str.replaceAll(&quot;DATE&quot;, &quot;2021-12-21&quot;).replaceAll(&quot;TIME&quot;, &quot;11:20&quot;).replaceAll(&quot;DAY&quot;, &quot;Tue&quot;);","title":"How to replace substrings of string with different substrings in JAVA?","body":"<p><strong>In one go</strong></p>\n<pre><code>String str =&quot; She was born on DATE at TIME on DAY&quot;;\nstr = str.replaceAll(&quot;DATE&quot;, &quot;2021-12-21&quot;).replaceAll(&quot;TIME&quot;, &quot;11:20&quot;).replaceAll(&quot;DAY&quot;, &quot;Tue&quot;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1710753,"reputation":993,"user_id":1568881,"accept_rate":40,"display_name":"Aguid"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640073917,"creation_date":1640073917,"answer_id":70432260,"question_id":70430140,"body_markdown":"You can simply use String.format(&quot; She was born on %s at %s on %s&quot;,date ,time,day) ","title":"How to replace substrings of string with different substrings in JAVA?","body":"<p>You can simply use String.format(&quot; She was born on %s at %s on %s&quot;,date ,time,day)</p>\n"}],"owner":{"account_id":15635634,"reputation":151,"user_id":11280615,"display_name":"Saloni Singhal"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":132,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":6,"score":-1,"last_activity_date":1640073917,"creation_date":1640054905,"question_id":70430140,"body_markdown":"I have to replace different substrings of a single string with different strings. For e.g.\r\n\r\n     String str =&quot; She was born on DATE at TIME on DAY&quot;;\r\n\r\nI want to replace DATE, TIME and DAY parts of string with different string values. Using replace(), I am able to replace just one part of the string. But I am working looking for is a solution to replace all these substrings with different strings at one go.","title":"How to replace substrings of string with different substrings in JAVA?","body":"<p>I have to replace different substrings of a single string with different strings. For e.g.</p>\n<pre><code> String str =&quot; She was born on DATE at TIME on DAY&quot;;\n</code></pre>\n<p>I want to replace DATE, TIME and DAY parts of string with different string values. Using replace(), I am able to replace just one part of the string. But I am working looking for is a solution to replace all these substrings with different strings at one go.</p>\n"},{"tags":["java","apache-poi","aspose-cells","spire.xls"],"comments":[{"owner":{"account_id":964210,"reputation":1018,"user_id":987959,"display_name":"PJ Fanning"},"score":0,"creation_date":1640195715,"post_id":70431909,"comment_id":124540287,"body_markdown":"https://github.com/dhatim/fastexcel is an alternative to POI SXSSF","body":"<a href=\"https://github.com/dhatim/fastexcel\" rel=\"nofollow noreferrer\">github.com/dhatim/fastexcel</a> is an alternative to POI SXSSF"}],"answers":[{"tags":[],"owner":{"account_id":10814530,"reputation":4195,"user_id":7954021,"display_name":"Renis1235"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640073359,"creation_date":1640072074,"answer_id":70431962,"question_id":70431909,"body_markdown":"### Update - User wants to append, my suggestion is not able to read workbooks. Leaving it here for any reference.\r\n\r\nUse a `SXSSFWorkbook` which is part of the Streaming API of POI. It makes it possible to keep only a specific limit of rows in memory while writing. It is a lot faster than using a normal Workbook.\r\n\r\nThis is for the newer format though. You should know that using the old `.xls` format, you are more limited on row and column count. Check [this][1] for more.\r\n\r\n```java\r\nSXSSFWorkbook workbook = new SXSSFWorkbook(10); // 10 is the row access window. It keeps only the last 10 rows in memory, then they are removed and the next ten are loaded\r\n```\r\n\r\nFor more take a look at [this][2], in the **SXSSF (Streaming Usermodel API)** part.\r\n\r\nP.S: Do not forget to `workbook.dispose()`.\r\n\r\n\r\n  [1]: https://docs.aspose.com/cells/net/find-maximum-rows-and-columns-supported-by-xls-and-xlsx-formats/#:~:text=For%20example%2C%20XLS%20supports%2065536,1048576%20rows%20and%2016384%20columns.\r\n  [2]: https://poi.apache.org/components/spreadsheet/how-to.html","title":"Write huge rows in Excel file (.xls format older version) in chunks without loading complete file in memory","body":"<h3>Update - User wants to append, my suggestion is not able to read workbooks. Leaving it here for any reference.</h3>\n<p>Use a <code>SXSSFWorkbook</code> which is part of the Streaming API of POI. It makes it possible to keep only a specific limit of rows in memory while writing. It is a lot faster than using a normal Workbook.</p>\n<p>This is for the newer format though. You should know that using the old <code>.xls</code> format, you are more limited on row and column count. Check <a href=\"https://docs.aspose.com/cells/net/find-maximum-rows-and-columns-supported-by-xls-and-xlsx-formats/#:%7E:text=For%20example%2C%20XLS%20supports%2065536,1048576%20rows%20and%2016384%20columns.\" rel=\"nofollow noreferrer\">this</a> for more.</p>\n<pre class=\"lang-java prettyprint-override\"><code>SXSSFWorkbook workbook = new SXSSFWorkbook(10); // 10 is the row access window. It keeps only the last 10 rows in memory, then they are removed and the next ten are loaded\n</code></pre>\n<p>For more take a look at <a href=\"https://poi.apache.org/components/spreadsheet/how-to.html\" rel=\"nofollow noreferrer\">this</a>, in the <strong>SXSSF (Streaming Usermodel API)</strong> part.</p>\n<p>P.S: Do not forget to <code>workbook.dispose()</code>.</p>\n"}],"owner":{"account_id":23707782,"reputation":1,"user_id":17730045,"display_name":"ved prakash kamma"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1069,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1640073359,"creation_date":1640071678,"question_id":70431909,"body_markdown":"I&#39;m working on a feature to export data into Excel file (**.xls** (Older version) format support).\r\n\r\nI have to append chunks into **.xls** file, **without loading file into memory.** The file should be in .xls format. chunks size can very in each steps and there are millions of rows . divided in chunks.\r\nIf I load file in memory, there can be a situation of **memory-overflow.** Can someone can suggest any free or paid api or solution in java which can help. ","title":"Write huge rows in Excel file (.xls format older version) in chunks without loading complete file in memory","body":"<p>I'm working on a feature to export data into Excel file (<strong>.xls</strong> (Older version) format support).</p>\n<p>I have to append chunks into <strong>.xls</strong> file, <strong>without loading file into memory.</strong> The file should be in .xls format. chunks size can very in each steps and there are millions of rows . divided in chunks.\nIf I load file in memory, there can be a situation of <strong>memory-overflow.</strong> Can someone can suggest any free or paid api or solution in java which can help.</p>\n"},{"tags":["java","json","string","jwk"],"answers":[{"tags":[],"owner":{"account_id":7865489,"reputation":380,"user_id":5944412,"display_name":"Bipin Kumar Chaurasia"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640073129,"creation_date":1640069208,"answer_id":70431588,"question_id":70431503,"body_markdown":"Please refer to the following logic implemented with `org.json` library.\r\n```\r\npublic void generateJSONObject() {\r\n    String a = &quot;{ \\&quot;kty\\&quot;: \\&quot;someText\\&quot;, \\&quot;e\\&quot;: \\&quot;someText\\&quot;, \\&quot;use\\&quot;: \\&quot;sig\\&quot;, \\&quot;kid\\&quot;: \\&quot;someText\\&quot;, \\&quot;alg\\&quot;: \\&quot;someText\\&quot;, \\&quot;n\\&quot;: \\&quot;someText\\&quot;}&quot;;\r\n    String b = &quot;{ \\&quot;kty\\&quot;: \\&quot;someText\\&quot;, \\&quot;e\\&quot;: \\&quot;someText\\&quot;, \\&quot;use\\&quot;: \\&quot;enc\\&quot;, \\&quot;kid\\&quot;: \\&quot;someText\\&quot;, \\&quot;alg\\&quot;: \\&quot;someText\\&quot;, \\&quot;n\\&quot;: \\&quot;someText\\&quot; }&quot;;\r\n    JSONObject jsonObject1 = new JSONObject(a);\r\n    JSONObject jsonObject2 = new JSONObject(b);\r\n    JSONObject jsonObject = new JSONObject();\r\n    jsonObject.append(&quot;keys&quot;, jsonObject1);\r\n    jsonObject.append(&quot;keys&quot;, jsonObject2);\r\n    System.out.println(jsonObject);\r\n  }\r\n```","title":"How to create a JSON Key Set from two JSON string","body":"<p>Please refer to the following logic implemented with <code>org.json</code> library.</p>\n<pre><code>public void generateJSONObject() {\n    String a = &quot;{ \\&quot;kty\\&quot;: \\&quot;someText\\&quot;, \\&quot;e\\&quot;: \\&quot;someText\\&quot;, \\&quot;use\\&quot;: \\&quot;sig\\&quot;, \\&quot;kid\\&quot;: \\&quot;someText\\&quot;, \\&quot;alg\\&quot;: \\&quot;someText\\&quot;, \\&quot;n\\&quot;: \\&quot;someText\\&quot;}&quot;;\n    String b = &quot;{ \\&quot;kty\\&quot;: \\&quot;someText\\&quot;, \\&quot;e\\&quot;: \\&quot;someText\\&quot;, \\&quot;use\\&quot;: \\&quot;enc\\&quot;, \\&quot;kid\\&quot;: \\&quot;someText\\&quot;, \\&quot;alg\\&quot;: \\&quot;someText\\&quot;, \\&quot;n\\&quot;: \\&quot;someText\\&quot; }&quot;;\n    JSONObject jsonObject1 = new JSONObject(a);\n    JSONObject jsonObject2 = new JSONObject(b);\n    JSONObject jsonObject = new JSONObject();\n    jsonObject.append(&quot;keys&quot;, jsonObject1);\n    jsonObject.append(&quot;keys&quot;, jsonObject2);\n    System.out.println(jsonObject);\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10481421,"reputation":1559,"user_id":7726319,"accept_rate":0,"display_name":"Prog_G"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1640069503,"creation_date":1640069503,"answer_id":70431619,"question_id":70431503,"body_markdown":"Try the below code :\r\n\r\n    public void test(){\r\n            String a=&quot;{ \\&quot;kty\\&quot;: \\&quot;someText\\&quot;, \\&quot;e\\&quot;: \\&quot;someText\\&quot;, \\&quot;use\\&quot;: \\&quot;sig\\&quot;, \\&quot;kid\\&quot;: \\&quot;someText\\&quot;, \\&quot;alg\\&quot;: \\&quot;someText\\&quot;, \\&quot;n\\&quot;: \\&quot;someText\\&quot;}&quot;;\r\n            String b= &quot;{ \\&quot;kty\\&quot;: \\&quot;someText\\&quot;, \\&quot;e\\&quot;: \\&quot;someText\\&quot;, \\&quot;use\\&quot;: \\&quot;enc\\&quot;, \\&quot;kid\\&quot;: \\&quot;someText\\&quot;, \\&quot;alg\\&quot;: \\&quot;someText\\&quot;, \\&quot;n\\&quot;: \\&quot;someText\\&quot; }&quot;;\r\n            JSONObject jsonObject = new JSONObject(a);\r\n            JSONObject jsonObject1 = new JSONObject(b);\r\n            JSONArray objects1 = new JSONArray();\r\n            objects1.put(jsonObject);\r\n            objects1.put(jsonObject1);\r\n    \r\n            JSONObject jsonObject2 = new JSONObject();\r\n            jsonObject2.put(&quot;keys&quot;,objects1);\r\n            System.out.println(jsonObject2);\r\n        }\r\n\r\n**Output:**\r\n\r\n    {&quot;keys&quot;:[{&quot;kty&quot;:&quot;someText&quot;,&quot;e&quot;:&quot;someText&quot;,&quot;use&quot;:&quot;sig&quot;,&quot;kid&quot;:&quot;someText&quot;,&quot;alg&quot;:&quot;someText&quot;,&quot;n&quot;:&quot;someText&quot;},{&quot;kty&quot;:&quot;someText&quot;,&quot;e&quot;:&quot;someText&quot;,&quot;use&quot;:&quot;enc&quot;,&quot;kid&quot;:&quot;someText&quot;,&quot;alg&quot;:&quot;someText&quot;,&quot;n&quot;:&quot;someText&quot;}]}\r\n\r\nLibrary used : [org.json][1]\r\n\r\n\r\n  [1]: https://mvnrepository.com/artifact/org.json/json/20211205","title":"How to create a JSON Key Set from two JSON string","body":"<p>Try the below code :</p>\n<pre><code>public void test(){\n        String a=&quot;{ \\&quot;kty\\&quot;: \\&quot;someText\\&quot;, \\&quot;e\\&quot;: \\&quot;someText\\&quot;, \\&quot;use\\&quot;: \\&quot;sig\\&quot;, \\&quot;kid\\&quot;: \\&quot;someText\\&quot;, \\&quot;alg\\&quot;: \\&quot;someText\\&quot;, \\&quot;n\\&quot;: \\&quot;someText\\&quot;}&quot;;\n        String b= &quot;{ \\&quot;kty\\&quot;: \\&quot;someText\\&quot;, \\&quot;e\\&quot;: \\&quot;someText\\&quot;, \\&quot;use\\&quot;: \\&quot;enc\\&quot;, \\&quot;kid\\&quot;: \\&quot;someText\\&quot;, \\&quot;alg\\&quot;: \\&quot;someText\\&quot;, \\&quot;n\\&quot;: \\&quot;someText\\&quot; }&quot;;\n        JSONObject jsonObject = new JSONObject(a);\n        JSONObject jsonObject1 = new JSONObject(b);\n        JSONArray objects1 = new JSONArray();\n        objects1.put(jsonObject);\n        objects1.put(jsonObject1);\n\n        JSONObject jsonObject2 = new JSONObject();\n        jsonObject2.put(&quot;keys&quot;,objects1);\n        System.out.println(jsonObject2);\n    }\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>{&quot;keys&quot;:[{&quot;kty&quot;:&quot;someText&quot;,&quot;e&quot;:&quot;someText&quot;,&quot;use&quot;:&quot;sig&quot;,&quot;kid&quot;:&quot;someText&quot;,&quot;alg&quot;:&quot;someText&quot;,&quot;n&quot;:&quot;someText&quot;},{&quot;kty&quot;:&quot;someText&quot;,&quot;e&quot;:&quot;someText&quot;,&quot;use&quot;:&quot;enc&quot;,&quot;kid&quot;:&quot;someText&quot;,&quot;alg&quot;:&quot;someText&quot;,&quot;n&quot;:&quot;someText&quot;}]}\n</code></pre>\n<p>Library used : <a href=\"https://mvnrepository.com/artifact/org.json/json/20211205\" rel=\"nofollow noreferrer\">org.json</a></p>\n"}],"owner":{"account_id":18226753,"reputation":95,"user_id":13266400,"display_name":"Q2Dev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":327,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1640073129,"creation_date":1640068608,"question_id":70431503,"body_markdown":"I have two json string coresponding to &quot;**sig**&quot; and &quot;**enc**&quot;.\r\n\r\n`String a={\r\n      &quot;kty&quot;: &quot;someText&quot;,\r\n      &quot;e&quot;: &quot;someText&quot;,\r\n      &quot;use&quot;: &quot;sig&quot;,\r\n      &quot;kid&quot;: &quot;someText&quot;,\r\n      &quot;alg&quot;: &quot;someText&quot;,\r\n      &quot;n&quot;: &quot;someText&quot;}`\r\n\r\n`String b= {\r\n      &quot;kty&quot;: &quot;someText&quot;,\r\n      &quot;e&quot;: &quot;someText&quot;,\r\n      &quot;use&quot;: &quot;enc&quot;,\r\n      &quot;kid&quot;: &quot;someText&quot;,\r\n      &quot;alg&quot;: &quot;someText&quot;,\r\n      &quot;n&quot;: &quot;someText&quot;\r\n    }`\r\n\r\nI need to combine them both like this:\r\n\r\n`{\r\n  &quot;keys&quot;: [\r\n    {\r\n      &quot;kty&quot;: &quot;someText&quot;,\r\n      &quot;e&quot;: &quot;someText&quot;,\r\n      &quot;use&quot;: &quot;sig&quot;,\r\n      &quot;kid&quot;: &quot;someText&quot;,\r\n      &quot;alg&quot;: &quot;someText&quot;,\r\n      &quot;n&quot;: &quot;someText&quot;\r\n    },\r\n    {\r\n      &quot;kty&quot;: &quot;someText&quot;,\r\n      &quot;e&quot;: &quot;someText&quot;,\r\n      &quot;use&quot;: &quot;enc&quot;,\r\n      &quot;kid&quot;: &quot;someText&quot;,\r\n      &quot;alg&quot;: &quot;someText&quot;,\r\n      &quot;n&quot;: &quot;someText&quot;\r\n    }\r\n  ]\r\n}`\r\n\r\nThe resulting JSON is nothing but JWKS which includes both **sig** and **enc** public keys. I have replaced the actual values for these parameters.","title":"How to create a JSON Key Set from two JSON string","body":"<p>I have two json string coresponding to &quot;<strong>sig</strong>&quot; and &quot;<strong>enc</strong>&quot;.</p>\n<p><code>String a={ &quot;kty&quot;: &quot;someText&quot;, &quot;e&quot;: &quot;someText&quot;, &quot;use&quot;: &quot;sig&quot;, &quot;kid&quot;: &quot;someText&quot;, &quot;alg&quot;: &quot;someText&quot;, &quot;n&quot;: &quot;someText&quot;}</code></p>\n<p><code>String b= { &quot;kty&quot;: &quot;someText&quot;, &quot;e&quot;: &quot;someText&quot;, &quot;use&quot;: &quot;enc&quot;, &quot;kid&quot;: &quot;someText&quot;, &quot;alg&quot;: &quot;someText&quot;, &quot;n&quot;: &quot;someText&quot; }</code></p>\n<p>I need to combine them both like this:</p>\n<p><code>{ &quot;keys&quot;: [ { &quot;kty&quot;: &quot;someText&quot;, &quot;e&quot;: &quot;someText&quot;, &quot;use&quot;: &quot;sig&quot;, &quot;kid&quot;: &quot;someText&quot;, &quot;alg&quot;: &quot;someText&quot;, &quot;n&quot;: &quot;someText&quot; }, { &quot;kty&quot;: &quot;someText&quot;, &quot;e&quot;: &quot;someText&quot;, &quot;use&quot;: &quot;enc&quot;, &quot;kid&quot;: &quot;someText&quot;, &quot;alg&quot;: &quot;someText&quot;, &quot;n&quot;: &quot;someText&quot; } ] }</code></p>\n<p>The resulting JSON is nothing but JWKS which includes both <strong>sig</strong> and <strong>enc</strong> public keys. I have replaced the actual values for these parameters.</p>\n"},{"tags":["java","android","firebase-realtime-database","google-cloud-platform"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1639994838,"post_id":70418404,"comment_id":124481198,"body_markdown":"Where in your code are you adding that Map to the Bundle object?","body":"Where in your code are you adding that Map to the Bundle object?"},{"owner":{"account_id":21845664,"reputation":3,"user_id":16138542,"display_name":"Jhank Tatar"},"score":0,"creation_date":1639998361,"post_id":70418404,"comment_id":124482375,"body_markdown":"I edited question.I&#39;m trying add to Detail _Struct in second activity.","body":"I edited question.I&#39;m trying add to Detail _Struct in second activity."},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1639998951,"post_id":70418404,"comment_id":124482605,"body_markdown":"Does `newModel.getBasket()` return what you need?","body":"Does <code>newModel.getBasket()</code> return what you need?"},{"owner":{"account_id":21845664,"reputation":3,"user_id":16138542,"display_name":"Jhank Tatar"},"score":0,"creation_date":1640011876,"post_id":70418404,"comment_id":124487315,"body_markdown":"Yes it does however, I&#39;m not parsing the detail(Detail_Struct) in second activity","body":"Yes it does however, I&#39;m not parsing the detail(Detail_Struct) in second activity"},{"owner":{"account_id":21845664,"reputation":3,"user_id":16138542,"display_name":"Jhank Tatar"},"score":0,"creation_date":1640081436,"post_id":70418404,"comment_id":124505149,"body_markdown":"Do you have any idea this problem Alex?","body":"Do you have any idea this problem Alex?"},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1640091510,"post_id":70418404,"comment_id":124508764,"body_markdown":"Since it returns what you need, most likely it&#39;s a matter of how you send to the second activity, right?","body":"Since it returns what you need, most likely it&#39;s a matter of how you send to the second activity, right?"},{"owner":{"account_id":21845664,"reputation":3,"user_id":16138542,"display_name":"Jhank Tatar"},"score":0,"creation_date":1640093898,"post_id":70418404,"comment_id":124509651,"body_markdown":"Yes, actually ı observe in second activity as array. But ı can not parsing array  (in second activity) so ı cannot send to second adapter(Log.d(&quot;Map_object:&quot;+ map1.get(&quot;orderid&quot;) //null);)","body":"Yes, actually ı observe in second activity as array. But ı can not parsing array  (in second activity) so ı cannot send to second adapter(Log.d(&quot;Map_object:&quot;+ map1.get(&quot;orderid&quot;) //null);)"}],"owner":{"account_id":21845664,"reputation":3,"user_id":16138542,"display_name":"Jhank Tatar"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":84,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1640072722,"creation_date":1639983972,"question_id":70418404,"body_markdown":"I want to pass data from first activity to second activity. But when I want to read the data in the second activity response is null. How can I solve this problem?\r\n\r\n Firebase Node\r\n\r\n    Pro_:\r\n         Basket:\r\n            ID_1:\r\n               cat: “Tech”\r\n               info:”iOS” \r\n               orderid:”Ref_1” \r\n            ID_2:\r\n               cat: “Tech”\r\n               info:”Android” \r\n               orderid:”Ref_2” \r\n         name:”Mike”\r\n\r\nMy struct\r\n\r\n    public class Name_Struct implements Serializable {\r\n       private String name;\r\n       private Map&lt;String, Object&gt; basket;\r\n      public String getName() {\r\n           return name;\r\n       }\r\n       public void setName(String name) {\r\n           this.name = name;\r\n       }\r\n       @PropertyName(&quot;Basket&quot;)\r\n       public Map&lt;String, Object&gt; getBasket() {\r\n           return basket;\r\n       }\r\n       public void setBasket(Map&lt;String, Object&gt; basket) {\r\n           this.basket = basket;\r\n       }\r\n    }\r\n\r\nFirst Activity\r\n\r\n    private void retrieve_data(){\r\n        Query query = FirebaseDatabase.getInstance().getReference()\r\n                .child(“Pro_”);\r\n        query.addListenerForSingleValueEvent(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                mName.clear();\r\n                for(DataSnapshot snp : snapshot.getChildren()){\r\n                    Name_Struct names = snp.getValue(Name_Struct.class);\r\n                        mName.add(names);\r\n                    \r\n                }\r\n                mName_adapter.notifyDataSetChanged();\r\n            }\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n            }\r\n        });\r\n    }\r\n\r\nEDIT_1 First Adapter\r\n\r\n    final Name_Struct newModel = Name_Struct(position);\r\n\r\n            Bundle bundle1=new Bundle();\r\n            bundle1.putSerializable(&quot;basket&quot;, (Serializable) newModel.getBasket());\r\n            intent.putExtras(bundle1);\r\n\r\nEDIT_1 Second Activity\r\n\r\n    Map &lt;String, Object&gt; map1 = (Map)bundle.getSerializable(&quot;basket&quot;);\r\n       Detail_Struct detail = new Detail_Struct(\r\n              map1.get(&quot;cat&quot;),map1.get(&quot;info&quot;),map1.get(&quot;orderid&quot;));\r\n        mDetail_Struct.add(detail);\r\n\r\n    for (Map.Entry&lt;String, Object&gt; entry : map1.entrySet()) {\r\n        Log.d(&quot;Map_array:&quot;+ map1);\r\n\r\n&gt; Map_array:{ID_1={cat=Tech, info=iOS, orderid=Ref_1}, D_2={cat=Tech,\r\n&gt; info=Android, orderid=Ref_2}}\r\n\r\n            Log.d(&quot;Map_value:&quot;+ entry.getValue());\r\n\r\n&gt; Map_value:{cat=Tech, info=iOS, orderid=Ref_1} Map_value:{cat=Tech,\r\n&gt; info=Android, orderid=Ref_2}\r\n\r\n            Log.d(&quot;Map_object:&quot;+ map1.get(&quot;orderid&quot;));\r\nnull line???\r\n&gt; Map_object:null Map_object:null\r\n\r\n\r\n        }\r\nEDIT_1 Detail Struct\r\n\r\n    public class Detail_Struct {\r\n        private String cat;\r\n        private String info;\r\n        private String orderid;\r\n    \r\n    public String getCat() {\r\n        return cat;\r\n    }\r\n    public void setCat(String cat) {\r\n        this.cat = cat;\r\n    }\r\n    public String getInfo() {\r\n        return info;\r\n    }\r\n    public void setInfo(String info) {\r\n        this.info = info;\r\n    }\r\n    public String getOrderid() {\r\n        return orderid;\r\n    }\r\n    public void setOrderid(String orderid) {\r\n        this.orderid = orderid;\r\n    }\r\n\r\n","title":"Android Firebase pass data iterate map","body":"<p>I want to pass data from first activity to second activity. But when I want to read the data in the second activity response is null. How can I solve this problem?</p>\n<p>Firebase Node</p>\n<pre><code>Pro_:\n     Basket:\n        ID_1:\n           cat: “Tech”\n           info:”iOS” \n           orderid:”Ref_1” \n        ID_2:\n           cat: “Tech”\n           info:”Android” \n           orderid:”Ref_2” \n     name:”Mike”\n</code></pre>\n<p>My struct</p>\n<pre><code>public class Name_Struct implements Serializable {\n   private String name;\n   private Map&lt;String, Object&gt; basket;\n  public String getName() {\n       return name;\n   }\n   public void setName(String name) {\n       this.name = name;\n   }\n   @PropertyName(&quot;Basket&quot;)\n   public Map&lt;String, Object&gt; getBasket() {\n       return basket;\n   }\n   public void setBasket(Map&lt;String, Object&gt; basket) {\n       this.basket = basket;\n   }\n}\n</code></pre>\n<p>First Activity</p>\n<pre><code>private void retrieve_data(){\n    Query query = FirebaseDatabase.getInstance().getReference()\n            .child(“Pro_”);\n    query.addListenerForSingleValueEvent(new ValueEventListener() {\n        @Override\n        public void onDataChange(@NonNull DataSnapshot snapshot) {\n            mName.clear();\n            for(DataSnapshot snp : snapshot.getChildren()){\n                Name_Struct names = snp.getValue(Name_Struct.class);\n                    mName.add(names);\n                \n            }\n            mName_adapter.notifyDataSetChanged();\n        }\n        @Override\n        public void onCancelled(@NonNull DatabaseError error) {\n        }\n    });\n}\n</code></pre>\n<p>EDIT_1 First Adapter</p>\n<pre><code>final Name_Struct newModel = Name_Struct(position);\n\n        Bundle bundle1=new Bundle();\n        bundle1.putSerializable(&quot;basket&quot;, (Serializable) newModel.getBasket());\n        intent.putExtras(bundle1);\n</code></pre>\n<p>EDIT_1 Second Activity</p>\n<pre><code>Map &lt;String, Object&gt; map1 = (Map)bundle.getSerializable(&quot;basket&quot;);\n   Detail_Struct detail = new Detail_Struct(\n          map1.get(&quot;cat&quot;),map1.get(&quot;info&quot;),map1.get(&quot;orderid&quot;));\n    mDetail_Struct.add(detail);\n\nfor (Map.Entry&lt;String, Object&gt; entry : map1.entrySet()) {\n    Log.d(&quot;Map_array:&quot;+ map1);\n</code></pre>\n<blockquote>\n<p>Map_array:{ID_1={cat=Tech, info=iOS, orderid=Ref_1}, D_2={cat=Tech,\ninfo=Android, orderid=Ref_2}}</p>\n</blockquote>\n<pre><code>        Log.d(&quot;Map_value:&quot;+ entry.getValue());\n</code></pre>\n<blockquote>\n<p>Map_value:{cat=Tech, info=iOS, orderid=Ref_1} Map_value:{cat=Tech,\ninfo=Android, orderid=Ref_2}</p>\n</blockquote>\n<pre><code>        Log.d(&quot;Map_object:&quot;+ map1.get(&quot;orderid&quot;));\n</code></pre>\n<p>null line???</p>\n<blockquote>\n<p>Map_object:null Map_object:null</p>\n</blockquote>\n<pre><code>    }\n</code></pre>\n<p>EDIT_1 Detail Struct</p>\n<pre><code>public class Detail_Struct {\n    private String cat;\n    private String info;\n    private String orderid;\n\npublic String getCat() {\n    return cat;\n}\npublic void setCat(String cat) {\n    this.cat = cat;\n}\npublic String getInfo() {\n    return info;\n}\npublic void setInfo(String info) {\n    this.info = info;\n}\npublic String getOrderid() {\n    return orderid;\n}\npublic void setOrderid(String orderid) {\n    this.orderid = orderid;\n}\n</code></pre>\n"},{"tags":["java","server","client","communication","system-design"],"comments":[{"owner":{"account_id":10814530,"reputation":4195,"user_id":7954021,"display_name":"Renis1235"},"score":0,"creation_date":1640074012,"post_id":70431862,"comment_id":124502624,"body_markdown":"Do you mean two-way communication?","body":"Do you mean two-way communication?"},{"owner":{"account_id":7593789,"reputation":25,"user_id":5760563,"display_name":"Alex Stepanenko"},"score":0,"creation_date":1640086502,"post_id":70431862,"comment_id":124506928,"body_markdown":"Yes, but mostly in cases when the client should receive messages from the server, not as callbacks. Consider all probable problems with connection, like closed ports or restricted access from your ISP provider (clients aren&#39;t visible for all users on the internet, usually not visible at all).","body":"Yes, but mostly in cases when the client should receive messages from the server, not as callbacks. Consider all probable problems with connection, like closed ports or restricted access from your ISP provider (clients aren&#39;t visible for all users on the internet, usually not visible at all)."},{"owner":{"account_id":10814530,"reputation":4195,"user_id":7954021,"display_name":"Renis1235"},"score":0,"creation_date":1640096066,"post_id":70431862,"comment_id":124510619,"body_markdown":"WebSockets should be able to help you. The closed ports and restricted access should not affect anything, as long as the ISP does not block websites :)","body":"WebSockets should be able to help you. The closed ports and restricted access should not affect anything, as long as the ISP does not block websites :)"},{"owner":{"account_id":12810899,"reputation":143,"user_id":9269160,"display_name":"Changsong Li"},"score":0,"creation_date":1640860867,"post_id":70431862,"comment_id":124676502,"body_markdown":"You can use WebSocket for your needs.","body":"You can use WebSocket for your needs."}],"owner":{"account_id":7593789,"reputation":25,"user_id":5760563,"display_name":"Alex Stepanenko"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1640071281,"creation_date":1640071281,"question_id":70431862,"body_markdown":"I have a server built on Java that interacts with the client written on C# via REST (Client makes requests and somehow behaves out of responses). The client sometimes sends a heartbeat, also via rest, and now I want to implement the client-message system when the server can send info messages to the client while it works. Which level and which technology I should use in this case to have the most efficient and lightweight path to have a messaging system?\r\n\r\n I think in way of good old socket connections, as I think that creating a web-server for REST requests/responses on the desktop client is an overhead and probably not all clients would be the accessible cause of NAT of ISP&#39;s.","title":"Which Client-server model communication fit&#39;s nowadays?","body":"<p>I have a server built on Java that interacts with the client written on C# via REST (Client makes requests and somehow behaves out of responses). The client sometimes sends a heartbeat, also via rest, and now I want to implement the client-message system when the server can send info messages to the client while it works. Which level and which technology I should use in this case to have the most efficient and lightweight path to have a messaging system?</p>\n<p>I think in way of good old socket connections, as I think that creating a web-server for REST requests/responses on the desktop client is an overhead and probably not all clients would be the accessible cause of NAT of ISP's.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":1,"creation_date":1640015330,"post_id":70424341,"comment_id":124488744,"body_markdown":"Why do you need to create them in advance, and what&#39;s the use in storing them in a database? If you can programmatically create them, it&#39;s faster to generate them than read them from the database. What are you [actually trying to do](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)?","body":"Why do you need to create them in advance, and what&#39;s the use in storing them in a database? If you can programmatically create them, it&#39;s faster to generate them than read them from the database. What are you <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">actually trying to do</a>?"},{"owner":{"account_id":175930,"reputation":2593,"user_id":406290,"accept_rate":43,"display_name":"Kevin Hooke"},"score":1,"creation_date":1640016640,"post_id":70424341,"comment_id":124489296,"body_markdown":"Take a look at load testing and data generator tools. If you are are going to pre-generate and store them for later use, does it really matter how efficient or effective the approach is? You could run it for days as long as you know beforehand when you&#39;re going to start the &#39;real&#39; app that requires them?","body":"Take a look at load testing and data generator tools. If you are are going to pre-generate and store them for later use, does it really matter how efficient or effective the approach is? You could run it for days as long as you know beforehand when you&#39;re going to start the &#39;real&#39; app that requires them?"},{"owner":{"account_id":23701818,"reputation":1,"user_id":17724887,"display_name":"Omnis"},"score":0,"creation_date":1640028822,"post_id":70424341,"comment_id":124493617,"body_markdown":"@Kayaman the idea is to later create a weighting algorithm based on the attributes and their value to pick which combination of attribute/value will be better for a given situation. Also, I would like to have a global vision of what&#39;s available, this part does not have a pratical use so to speak it&#39;s just a personal preference.","body":"@Kayaman the idea is to later create a weighting algorithm based on the attributes and their value to pick which combination of attribute/value will be better for a given situation. Also, I would like to have a global vision of what&#39;s available, this part does not have a pratical use so to speak it&#39;s just a personal preference."},{"owner":{"account_id":23701818,"reputation":1,"user_id":17724887,"display_name":"Omnis"},"score":0,"creation_date":1640029120,"post_id":70424341,"comment_id":124493708,"body_markdown":"@KevinHooke Thanks I will take a look at that. It is in fact not that important that the generation code is efficient but I&#39;d prefer not to have my computer run for hours, maybe even days, to simulate all the possibilities. Another factor is that the range of available values may increases and so is the number of possible attributes. Therefore I fear that when the time comes for me to rerun the generation algorithm with new values, it will have to generate already existing combination plus the new ones.","body":"@KevinHooke Thanks I will take a look at that. It is in fact not that important that the generation code is efficient but I&#39;d prefer not to have my computer run for hours, maybe even days, to simulate all the possibilities. Another factor is that the range of available values may increases and so is the number of possible attributes. Therefore I fear that when the time comes for me to rerun the generation algorithm with new values, it will have to generate already existing combination plus the new ones."},{"owner":{"account_id":175930,"reputation":2593,"user_id":406290,"accept_rate":43,"display_name":"Kevin Hooke"},"score":0,"creation_date":1640033026,"post_id":70424341,"comment_id":124494975,"body_markdown":"This is what the cloud is for :-)","body":"This is what the cloud is for :-)"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1640069006,"post_id":70424341,"comment_id":124501367,"body_markdown":"&quot;I would have over 500k uniques instances&quot;  — No, I don&#39;t think so. Every possible combination of 5 factors, each with set of 64 values, produces a *billion* elements, billion with a &quot;b&quot;, not a half million, by my calculation of (64 ^ 5) = 1,073,741,824.","body":"&quot;I would have over 500k uniques instances&quot;  — No, I don&#39;t think so. Every possible combination of 5 factors, each with set of 64 values, produces a <i>billion</i> elements, billion with a &quot;b&quot;, not a half million, by my calculation of (64 ^ 5) = 1,073,741,824."}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640070808,"creation_date":1640070808,"answer_id":70431803,"question_id":70424341,"body_markdown":"# Creating half million objects takes a half second\r\n\r\nCreating a half million objects with five fields takes under a half second. See example code below. So it seems you have fallen into the trap of *premature optimization*, expecting a performance problem before actually proving one. \r\n\r\nAs [I commented][1], your math confuses me. You expect 500K instances by combining each of 64 values for each of five attributes. But a Cartesian product of 64 ^ 5 = 1,073,741,824 — over a billion rather than a half million.\r\n\r\nSo in my example below I used 3 attributes with 64 values each, and created those twice for a total of 524,288, close to your desired half million.\r\n\r\nTo mix things up, I varied the data type for the three attributes: A custom enum, `LocalDate` objects, and `Locale` objects. \r\n\r\nTo make things more challenging, the example dynamically generates a UUID and captures the current moment.\r\n\r\n```java\r\npackage work.basil.many;\r\n\r\nimport java.time.Duration;\r\nimport java.time.Instant;\r\nimport java.time.LocalDate;\r\nimport java.time.Month;\r\nimport java.util.*;\r\n\r\npublic class Many\r\n{\r\n    public static void main ( String[] args )\r\n    {\r\n        Many app = new Many();\r\n        app.demo();\r\n    }\r\n\r\n    private void demo ( )\r\n    {\r\n        // Initialize.\r\n        long start = System.nanoTime();\r\n        enum Color\r\n        {\r\n            AliceBlue, AntiqueWhite, Aqua, Aquamarine, Azure, Beige, Bisque, Black, BlanchedAlmond, Blue, BlueViolet, Brown, BurlyWood, CadetBlue, Chocolate, Coral,\r\n            CornflowerBlue, Cornsilk, Crimson, Cyan, DarkBlue, DarkCyan, DarkGoldenRod, DarkGray, DarkGreen, DarkKhaki, DarkMagenta, DarkOliveGreen, DarkOrange,\r\n            DarkOrchid, DarkRed, DarkSalmon, DarkSeaGreen, DarkSlateBlue, DarkSlateGray, DarkTurquoise, DarkViolet, DeepPink, DeepSkyBlue, DimGray, DodgerBlue,\r\n            FireBrick, FloralWhite, ForestGreen, Fuchsia, Gainsboro, GhostWhite, Gold, GoldenRod, Gray, Green, GreenYellow, HoneyDew, HotPink, IndianRed, Indigo,\r\n            Ivory, Khaki, Lavender, LavenderBlush, LawnGreen, LemonChiffon, LightBlue, LightCoral\r\n        }\r\n\r\n        LocalDate startDate = LocalDate.of( 2022 , Month.JANUARY , 1 );\r\n        List &lt; LocalDate &gt; dates = startDate.datesUntil( startDate.plusDays( 64 ) ).toList();\r\n\r\n        List &lt; Locale &gt; locales = Arrays.stream( Locale.getAvailableLocales() ).limit( 64 ).toList();\r\n\r\n        record Blah( UUID id , Instant instant , Color color , LocalDate date , Locale locale )\r\n        {\r\n        }\r\n\r\n        // Populate.\r\n        List &lt; Blah &gt; blahs = new ArrayList &lt;&gt;( ( int ) Math.pow( 64 , 3 ) * 2 );\r\n        for ( int i = 1 ; i &lt;= 2 ; i++ )\r\n        {\r\n            for ( Color color : Color.values() )\r\n            {\r\n                for ( LocalDate date : dates )\r\n                {\r\n                    for ( Locale locale : locales )\r\n                    {\r\n                        blahs.add( new Blah( UUID.randomUUID() , Instant.now() , color , date , locale ) );\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // Report.\r\n        System.out.println( &quot;blahs.size() = &quot; + blahs.size() );\r\n        System.out.println( &quot;blahs.get(0) = &quot; + blahs.get( 0 ) );  // First.\r\n        System.out.println( &quot;blahs.get(blahs.size()) = &quot; + blahs.get( blahs.size() - 1 ) );  // Last.\r\n\r\n        Duration elapsed = Duration.ofNanos( System.nanoTime() - start );\r\n        System.out.println( &quot;elapsed = &quot; + elapsed );\r\n    }\r\n}\r\n```\r\n\r\nWhen running this code in Java 17 on a [MacBook Pro with Apple Silicon M1][2] chip, and 16 gigs of memory.\r\n\r\n```none\r\nblahs.size() = 524288\r\nblahs.get(0) = Blah[id=68f1478b-de38-4217-b28a-8f3b65c82e47, instant=2021-12-21T07:11:35.896362Z, color=AliceBlue, date=2022-01-01, locale=]\r\nblahs.get(blahs.size()) = Blah[id=58b1e46f-e09a-42a2-819f-e35bae197a27, instant=2021-12-21T07:11:36.224003Z, color=LightCoral, date=2022-03-05, locale=pl_PL_#Latn]\r\nelapsed = PT0.406977625S\r\n```\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/70424341/how-to-generate-a-large-number-of-instances-effectively-in-java/70431803#comment124501367_70424341\r\n  [2]: https://en.wikipedia.org/wiki/MacBook_Pro#Apple_Silicon_revision","title":"How to generate a large number of instances effectively in Java","body":"<h1>Creating half million objects takes a half second</h1>\n<p>Creating a half million objects with five fields takes under a half second. See example code below. So it seems you have fallen into the trap of <em>premature optimization</em>, expecting a performance problem before actually proving one.</p>\n<p>As <a href=\"https://stackoverflow.com/questions/70424341/how-to-generate-a-large-number-of-instances-effectively-in-java/70431803#comment124501367_70424341\">I commented</a>, your math confuses me. You expect 500K instances by combining each of 64 values for each of five attributes. But a Cartesian product of 64 ^ 5 = 1,073,741,824 — over a billion rather than a half million.</p>\n<p>So in my example below I used 3 attributes with 64 values each, and created those twice for a total of 524,288, close to your desired half million.</p>\n<p>To mix things up, I varied the data type for the three attributes: A custom enum, <code>LocalDate</code> objects, and <code>Locale</code> objects.</p>\n<p>To make things more challenging, the example dynamically generates a UUID and captures the current moment.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.many;\n\nimport java.time.Duration;\nimport java.time.Instant;\nimport java.time.LocalDate;\nimport java.time.Month;\nimport java.util.*;\n\npublic class Many\n{\n    public static void main ( String[] args )\n    {\n        Many app = new Many();\n        app.demo();\n    }\n\n    private void demo ( )\n    {\n        // Initialize.\n        long start = System.nanoTime();\n        enum Color\n        {\n            AliceBlue, AntiqueWhite, Aqua, Aquamarine, Azure, Beige, Bisque, Black, BlanchedAlmond, Blue, BlueViolet, Brown, BurlyWood, CadetBlue, Chocolate, Coral,\n            CornflowerBlue, Cornsilk, Crimson, Cyan, DarkBlue, DarkCyan, DarkGoldenRod, DarkGray, DarkGreen, DarkKhaki, DarkMagenta, DarkOliveGreen, DarkOrange,\n            DarkOrchid, DarkRed, DarkSalmon, DarkSeaGreen, DarkSlateBlue, DarkSlateGray, DarkTurquoise, DarkViolet, DeepPink, DeepSkyBlue, DimGray, DodgerBlue,\n            FireBrick, FloralWhite, ForestGreen, Fuchsia, Gainsboro, GhostWhite, Gold, GoldenRod, Gray, Green, GreenYellow, HoneyDew, HotPink, IndianRed, Indigo,\n            Ivory, Khaki, Lavender, LavenderBlush, LawnGreen, LemonChiffon, LightBlue, LightCoral\n        }\n\n        LocalDate startDate = LocalDate.of( 2022 , Month.JANUARY , 1 );\n        List &lt; LocalDate &gt; dates = startDate.datesUntil( startDate.plusDays( 64 ) ).toList();\n\n        List &lt; Locale &gt; locales = Arrays.stream( Locale.getAvailableLocales() ).limit( 64 ).toList();\n\n        record Blah( UUID id , Instant instant , Color color , LocalDate date , Locale locale )\n        {\n        }\n\n        // Populate.\n        List &lt; Blah &gt; blahs = new ArrayList &lt;&gt;( ( int ) Math.pow( 64 , 3 ) * 2 );\n        for ( int i = 1 ; i &lt;= 2 ; i++ )\n        {\n            for ( Color color : Color.values() )\n            {\n                for ( LocalDate date : dates )\n                {\n                    for ( Locale locale : locales )\n                    {\n                        blahs.add( new Blah( UUID.randomUUID() , Instant.now() , color , date , locale ) );\n                    }\n                }\n            }\n        }\n\n        // Report.\n        System.out.println( &quot;blahs.size() = &quot; + blahs.size() );\n        System.out.println( &quot;blahs.get(0) = &quot; + blahs.get( 0 ) );  // First.\n        System.out.println( &quot;blahs.get(blahs.size()) = &quot; + blahs.get( blahs.size() - 1 ) );  // Last.\n\n        Duration elapsed = Duration.ofNanos( System.nanoTime() - start );\n        System.out.println( &quot;elapsed = &quot; + elapsed );\n    }\n}\n</code></pre>\n<p>When running this code in Java 17 on a <a href=\"https://en.wikipedia.org/wiki/MacBook_Pro#Apple_Silicon_revision\" rel=\"nofollow noreferrer\">MacBook Pro with Apple Silicon M1</a> chip, and 16 gigs of memory.</p>\n<pre class=\"lang-none prettyprint-override\"><code>blahs.size() = 524288\nblahs.get(0) = Blah[id=68f1478b-de38-4217-b28a-8f3b65c82e47, instant=2021-12-21T07:11:35.896362Z, color=AliceBlue, date=2022-01-01, locale=]\nblahs.get(blahs.size()) = Blah[id=58b1e46f-e09a-42a2-819f-e35bae197a27, instant=2021-12-21T07:11:36.224003Z, color=LightCoral, date=2022-03-05, locale=pl_PL_#Latn]\nelapsed = PT0.406977625S\n</code></pre>\n"}],"owner":{"account_id":23701818,"reputation":1,"user_id":17724887,"display_name":"Omnis"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":185,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1640073777,"answer_count":1,"score":-2,"last_activity_date":1640070808,"creation_date":1640015089,"question_id":70424341,"body_markdown":"I have a class with 5 possible different attributes, each of those attributes have a specific range of values (64 different values to be precise) and I&#39;m trying to generate each different possible outcome.  \r\nI estimated that in total I would have over 500k uniques instances of that class. My goal is to generate all unique outcome and store them in a database for later use. It would be nice if that &quot;generator&quot; can be easily upgradable or reused efficiently.  \r\n  \r\nThe reason why I created that post is that I want to know if there is a way for me to generate effectively and not doing each one of them with a slight difference one after another. I initially thought of trying multi-threading but I&#39;m not used to it, so it may not even be close to what I&#39;m looking for.    \r\n\r\nI&#39;m using java 8 but I&#39;m not bound to that version.\r\n\r\nI&#39;m sorry if I&#39;m not clear enough in my explanation and please excuse me if I made some mistakes in writting this post. Thanks for reading and have a nice day.","title":"How to generate a large number of instances effectively in Java","body":"<p>I have a class with 5 possible different attributes, each of those attributes have a specific range of values (64 different values to be precise) and I'm trying to generate each different possible outcome.<br />\nI estimated that in total I would have over 500k uniques instances of that class. My goal is to generate all unique outcome and store them in a database for later use. It would be nice if that &quot;generator&quot; can be easily upgradable or reused efficiently.</p>\n<p>The reason why I created that post is that I want to know if there is a way for me to generate effectively and not doing each one of them with a slight difference one after another. I initially thought of trying multi-threading but I'm not used to it, so it may not even be close to what I'm looking for.</p>\n<p>I'm using java 8 but I'm not bound to that version.</p>\n<p>I'm sorry if I'm not clear enough in my explanation and please excuse me if I made some mistakes in writting this post. Thanks for reading and have a nice day.</p>\n"},{"tags":["java","mybatis"],"comments":[{"owner":{"account_id":244028,"reputation":300,"user_id":516574,"display_name":"cgi"},"score":0,"creation_date":1423803354,"post_id":28051240,"comment_id":45306025,"body_markdown":"I think you could add full stack trace for error.","body":"I think you could add full stack trace for error."}],"answers":[{"tags":[],"owner":{"account_id":129028,"reputation":39302,"user_id":327301,"accept_rate":66,"display_name":"yankee"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1425583524,"creation_date":1425583524,"answer_id":28886023,"question_id":28051240,"body_markdown":"I see two problems here:\r\n\r\n1. The separator for the name of an inner class to its surrounding class is `$` and not `.`. So instead of `com.test.ObjectA.ObjectB` your path should be `com.test.ObjectA$ObjectB`.\r\n2. You ObjectB has not default constructor and you don&#39;t specify a constructor mapping. In addition to your explicit argument, remember that an inner class always has its outer class as implicit constructor argument unless you declare that class as static (`public static class ObjectB...`).","title":"Mybatis &quot;java.lang.IllegalArgumentException: Result Maps collection already contains value for&quot; error when mapping nested classes","body":"<p>I see two problems here:</p>\n\n<ol>\n<li>The separator for the name of an inner class to its surrounding class is <code>$</code> and not <code>.</code>. So instead of <code>com.test.ObjectA.ObjectB</code> your path should be <code>com.test.ObjectA$ObjectB</code>.</li>\n<li>You ObjectB has not default constructor and you don't specify a constructor mapping. In addition to your explicit argument, remember that an inner class always has its outer class as implicit constructor argument unless you declare that class as static (<code>public static class ObjectB...</code>).</li>\n</ol>\n"}],"owner":{"account_id":3014557,"reputation":1292,"user_id":2557108,"accept_rate":50,"display_name":"Yonoss"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10441,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"answer_count":1,"score":2,"last_activity_date":1640070130,"creation_date":1421773904,"question_id":28051240,"body_markdown":"I&#39;m getting a java.lang.IllegalArgumentException: Result Maps collection already contains value for&quot; error when trying to do some XML mappings on a nested class:\r\n\r\nI have the following nested classes structure:\r\n\r\n    package com.test;   \r\n    public class ObjectA {\r\n\t  private List&lt;ObjectB&gt;\tentries;\r\n\t\r\n\t  public ObjectA(List&lt;ObjectB&gt;\tentries) {\r\n\t\tthis.entries = entries;\r\n\t  }\r\n\t\r\n\t  public void setEntries(List&lt;ObjectB&gt; entries) {\r\n\t\tthis.entries = entries;\r\n\t  }\r\n\t\r\n\t  public List&lt;ObjectB&gt; getEntries() {\r\n\t\treturn this.entries;\r\n\t  }\r\n\r\n\t  public class ObjectB {\r\n\t\tprivate String param1;\r\n\t\t\r\n\t\tpublic ObjectB(String param1) {\r\n\t\t\tthis.param1 = param1;\r\n\t\t}\r\n\t\t\r\n\t\tpublic void setParam1(String param1) {\r\n\t\t\tthis.param1 = param1;\r\n\t\t}\r\n\t\t\r\n\t\tpublic String getParam1() {\r\n\t\t\treturn this.param1;\r\n\t\t}\r\n\t\r\n\t  }\r\n    }\r\n\r\nAnd the xml mappers look like this:\r\n\r\n    &lt;resultMap id=&quot;ObjectA&quot; type=&quot;com.test.ObjectA&quot;&gt;\r\n        &lt;collection property=&quot;entries&quot; resultMap=&quot;Entries&quot;/&gt;\r\n    &lt;/resultMap&gt;\r\n    &lt;resultMap id=&quot;Entries&quot; type=&quot;com.test.ObjectA.ObjectB&quot;&gt;\r\n        &lt;result property=&quot;param1&quot; column=&quot;column1&quot;/&gt;\r\n    &lt;/resultMap&gt;\r\n\r\nIf i take the ObjectB class outside of ObjectA class, the mapping works fine. But the thing is that i don&#39;t want to do that. I want to have it nested.\r\n\r\nThanks ","title":"Mybatis &quot;java.lang.IllegalArgumentException: Result Maps collection already contains value for&quot; error when mapping nested classes","body":"<p>I'm getting a java.lang.IllegalArgumentException: Result Maps collection already contains value for\" error when trying to do some XML mappings on a nested class:</p>\n\n<p>I have the following nested classes structure:</p>\n\n<pre><code>package com.test;   \npublic class ObjectA {\n  private List&lt;ObjectB&gt; entries;\n\n  public ObjectA(List&lt;ObjectB&gt;  entries) {\n    this.entries = entries;\n  }\n\n  public void setEntries(List&lt;ObjectB&gt; entries) {\n    this.entries = entries;\n  }\n\n  public List&lt;ObjectB&gt; getEntries() {\n    return this.entries;\n  }\n\n  public class ObjectB {\n    private String param1;\n\n    public ObjectB(String param1) {\n        this.param1 = param1;\n    }\n\n    public void setParam1(String param1) {\n        this.param1 = param1;\n    }\n\n    public String getParam1() {\n        return this.param1;\n    }\n\n  }\n}\n</code></pre>\n\n<p>And the xml mappers look like this:</p>\n\n<pre><code>&lt;resultMap id=\"ObjectA\" type=\"com.test.ObjectA\"&gt;\n    &lt;collection property=\"entries\" resultMap=\"Entries\"/&gt;\n&lt;/resultMap&gt;\n&lt;resultMap id=\"Entries\" type=\"com.test.ObjectA.ObjectB\"&gt;\n    &lt;result property=\"param1\" column=\"column1\"/&gt;\n&lt;/resultMap&gt;\n</code></pre>\n\n<p>If i take the ObjectB class outside of ObjectA class, the mapping works fine. But the thing is that i don't want to do that. I want to have it nested.</p>\n\n<p>Thanks </p>\n"},{"tags":["java","design-patterns"],"comments":[{"owner":{"account_id":2366187,"reputation":60152,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":2,"creation_date":1640066583,"post_id":70431225,"comment_id":124500940,"body_markdown":"Looks like a builder to me.","body":"Looks like a builder to me."},{"owner":{"account_id":16914570,"reputation":1532,"user_id":12232870,"display_name":"terrorrussia-keeps-killing"},"score":1,"creation_date":1640066883,"post_id":70431225,"comment_id":124500983,"body_markdown":"Yeah, looks like a need of the Builder pattern since Java supports neither named parameters nor default arguments (I didn&#39;t pick a deep look into your methods, but in general dispatching overloads from one to another may be better than copying the same code to multiple places). Welcome to the Java world...","body":"Yeah, looks like a need of the Builder pattern since Java supports neither named parameters nor default arguments (I didn&#39;t pick a deep look into your methods, but in general dispatching overloads from one to another may be better than copying the same code to multiple places). Welcome to the Java world..."},{"owner":{"account_id":10481421,"reputation":1559,"user_id":7726319,"accept_rate":0,"display_name":"Prog_G"},"score":1,"creation_date":1640067980,"post_id":70431225,"comment_id":124501157,"body_markdown":"You can use the builder pattern","body":"You can use the builder pattern"}],"answers":[{"tags":[],"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1640069716,"creation_date":1640069716,"answer_id":70431657,"question_id":70431225,"body_markdown":"Yes: it looks like the builder pattern.\r\n\r\nYou would only need two `compressor` methods that would return an instance of the `Compressor` class (the builder):\r\n\r\n\r\n    public class ImageCompressionUtil {\r\n        public Compressor compressor(InputStream image) {\r\n            return new Compressor(image);\r\n        }\r\n    \r\n        public Compressor compressor(byte[] image) {\r\n            return new Compressor(new ByteArrayInputStream(image));\r\n        }\r\n    }\r\n\r\nThe `Compressor` class would look like this:\r\n\r\n\r\n    public class Compressor {\r\n        private final Thumbnail thumbnail;\r\n    \r\n        public Compressor(InputStream image) {\r\n            this.thumbnail = Thumbnail.of(image).scale(1);\r\n        }\r\n    \r\n        public Compressor quality(double quality) {\r\n            thumbnail.outputQuality(quality);\r\n            return this;\r\n        }\r\n    \r\n        public Compressor outputFormat(String format) {\r\n            thumbnail.outputFormat(format);\r\n            return this;\r\n        }\r\n    \r\n        public void writeTo(OutputStream outputStream) {\r\n            thumbnail.toOutputStream(outputStream);\r\n        }\r\n    \r\n        public byte[] toBytes() {\r\n            ByteArrayOutputStream out = new ByteArrayOutputStream();\r\n            writeTo(out);\r\n            return out.toByteArray();\r\n        }\r\n    }\r\n\r\nSo you would first create a compressor, then set the parameters, and then either write the result to an `OutputStream` or get it as an array of bytes.\r\n\r\nOne thing that is not clear is which class should close the `InputStream`.\r\n\r\nNote that the `Compressor` class is not much different than what I have called the `Thumbnail` class (what is returned by `Thumbnails.of()`), and you could directly return the result of `Thumbnails.of(image).scale(1)` instead of creating another class.\r\n\r\n","title":"design pattern: how to add optional params for methods?","body":"<p>Yes: it looks like the builder pattern.</p>\n<p>You would only need two <code>compressor</code> methods that would return an instance of the <code>Compressor</code> class (the builder):</p>\n<pre><code>public class ImageCompressionUtil {\n    public Compressor compressor(InputStream image) {\n        return new Compressor(image);\n    }\n\n    public Compressor compressor(byte[] image) {\n        return new Compressor(new ByteArrayInputStream(image));\n    }\n}\n</code></pre>\n<p>The <code>Compressor</code> class would look like this:</p>\n<pre><code>public class Compressor {\n    private final Thumbnail thumbnail;\n\n    public Compressor(InputStream image) {\n        this.thumbnail = Thumbnail.of(image).scale(1);\n    }\n\n    public Compressor quality(double quality) {\n        thumbnail.outputQuality(quality);\n        return this;\n    }\n\n    public Compressor outputFormat(String format) {\n        thumbnail.outputFormat(format);\n        return this;\n    }\n\n    public void writeTo(OutputStream outputStream) {\n        thumbnail.toOutputStream(outputStream);\n    }\n\n    public byte[] toBytes() {\n        ByteArrayOutputStream out = new ByteArrayOutputStream();\n        writeTo(out);\n        return out.toByteArray();\n    }\n}\n</code></pre>\n<p>So you would first create a compressor, then set the parameters, and then either write the result to an <code>OutputStream</code> or get it as an array of bytes.</p>\n<p>One thing that is not clear is which class should close the <code>InputStream</code>.</p>\n<p>Note that the <code>Compressor</code> class is not much different than what I have called the <code>Thumbnail</code> class (what is returned by <code>Thumbnails.of()</code>), and you could directly return the result of <code>Thumbnails.of(image).scale(1)</code> instead of creating another class.</p>\n"}],"owner":{"account_id":15968441,"reputation":373,"user_id":11523294,"display_name":"Criwran"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70431657,"answer_count":1,"score":0,"last_activity_date":1640069716,"creation_date":1640066307,"question_id":70431225,"body_markdown":"I hava a util class:\r\n```\r\npublic class ImageCompressionUtil {\r\n\r\n  public static void compressor(InputStream image, OutputStream outputStream, double quality,\r\n      String outputFormat) throws IOException {\r\n    Thumbnails.of(image).scale(1).outputQuality(quality).outputFormat(outputFormat).\r\n        toOutputStream(outputStream);\r\n  }\r\n\r\n  public static void compressor(byte[] image, OutputStream outputStream, double quality,\r\n      String outputFormat) throws IOException {\r\n    ByteArrayInputStream inputStream = new ByteArrayInputStream(image);\r\n    Thumbnails.of(inputStream).scale(1).outputQuality(quality).\r\n        outputFormat(outputFormat).toOutputStream(outputStream);\r\n  }\r\n\r\n  public static byte[] compressor(InputStream image, double quality, String outputFormat)\r\n      throws IOException {\r\n    ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\r\n    Thumbnails.of(image).scale(1).outputQuality(quality).\r\n        outputFormat(outputFormat).toOutputStream(outputStream);\r\n    return outputStream.toByteArray();\r\n  }\r\n\r\n  public static byte[] compressor(byte[] image, double quality, String outputFormat) throws IOException {\r\n    ByteArrayInputStream inputStream = new ByteArrayInputStream(image);\r\n    ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\r\n    Thumbnails.of(inputStream).scale(1).outputQuality(quality).\r\n        outputFormat(outputFormat).toOutputStream(outputStream);\r\n    return outputStream.toByteArray();\r\n  }\r\n}\r\n```\r\nAmong these methods, we could see some duplicated params like `outputStream`,`quality`,`outputFormat`.\r\nHow to rewrite this class so that I can use this class like such patterns:\r\n```\r\n// no outputstream/quality/outputFormat specified, default values are used;\r\nImageCompressionUtil.compressor(image);\r\n\r\n// specifiy outputstream or quality or outputFormat\r\nImageCompressionUtil.compressor(image, outputstream);\r\nImageCompressionUtil.compressor(image).quality(quality);\r\nImageCompressionUtil.compressor(image).outputFormat(outputFormat);\r\n\r\n// both quality and outputFormat are specified\r\nImageCompressionUtil.compressor(image).quality(quality).outputFormat(outputFormat);\r\n\r\n...\r\n```","title":"design pattern: how to add optional params for methods?","body":"<p>I hava a util class:</p>\n<pre><code>public class ImageCompressionUtil {\n\n  public static void compressor(InputStream image, OutputStream outputStream, double quality,\n      String outputFormat) throws IOException {\n    Thumbnails.of(image).scale(1).outputQuality(quality).outputFormat(outputFormat).\n        toOutputStream(outputStream);\n  }\n\n  public static void compressor(byte[] image, OutputStream outputStream, double quality,\n      String outputFormat) throws IOException {\n    ByteArrayInputStream inputStream = new ByteArrayInputStream(image);\n    Thumbnails.of(inputStream).scale(1).outputQuality(quality).\n        outputFormat(outputFormat).toOutputStream(outputStream);\n  }\n\n  public static byte[] compressor(InputStream image, double quality, String outputFormat)\n      throws IOException {\n    ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\n    Thumbnails.of(image).scale(1).outputQuality(quality).\n        outputFormat(outputFormat).toOutputStream(outputStream);\n    return outputStream.toByteArray();\n  }\n\n  public static byte[] compressor(byte[] image, double quality, String outputFormat) throws IOException {\n    ByteArrayInputStream inputStream = new ByteArrayInputStream(image);\n    ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\n    Thumbnails.of(inputStream).scale(1).outputQuality(quality).\n        outputFormat(outputFormat).toOutputStream(outputStream);\n    return outputStream.toByteArray();\n  }\n}\n</code></pre>\n<p>Among these methods, we could see some duplicated params like <code>outputStream</code>,<code>quality</code>,<code>outputFormat</code>.\nHow to rewrite this class so that I can use this class like such patterns:</p>\n<pre><code>// no outputstream/quality/outputFormat specified, default values are used;\nImageCompressionUtil.compressor(image);\n\n// specifiy outputstream or quality or outputFormat\nImageCompressionUtil.compressor(image, outputstream);\nImageCompressionUtil.compressor(image).quality(quality);\nImageCompressionUtil.compressor(image).outputFormat(outputFormat);\n\n// both quality and outputFormat are specified\nImageCompressionUtil.compressor(image).quality(quality).outputFormat(outputFormat);\n\n...\n</code></pre>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":5559956,"reputation":13819,"user_id":9840318,"display_name":"Madhu Bhat"},"score":1,"creation_date":1535642355,"post_id":52100384,"comment_id":91151624,"body_markdown":"Why are you running tests in prod? Is it a prod-like build environment? Coz you need to run tests only on build right?","body":"Why are you running tests in prod? Is it a prod-like build environment? Coz you need to run tests only on build right?"},{"owner":{"account_id":5559956,"reputation":13819,"user_id":9840318,"display_name":"Madhu Bhat"},"score":0,"creation_date":1535642684,"post_id":52100384,"comment_id":91151830,"body_markdown":"To find out if it&#39;s prod environment or not, you might need to use an environment variable or have another property in your config to specify the environment and then set the active profile for the test accordingly. Doesn&#39;t look like a good design to run tests in prod though.","body":"To find out if it&#39;s prod environment or not, you might need to use an environment variable or have another property in your config to specify the environment and then set the active profile for the test accordingly. Doesn&#39;t look like a good design to run tests in prod though."},{"owner":{"account_id":3450311,"reputation":137,"user_id":2890126,"accept_rate":40,"display_name":"smastika"},"score":0,"creation_date":1535642691,"post_id":52100384,"comment_id":91151835,"body_markdown":"Sorry I forgot to mention that it is a Maven project so the tests will be run when building and this will not happen on my machine. I just want to skip needing to change settings on my machine while developing locally :)","body":"Sorry I forgot to mention that it is a Maven project so the tests will be run when building and this will not happen on my machine. I just want to skip needing to change settings on my machine while developing locally :)"},{"owner":{"account_id":5559956,"reputation":13819,"user_id":9840318,"display_name":"Madhu Bhat"},"score":0,"creation_date":1535643095,"post_id":52100384,"comment_id":91152089,"body_markdown":"For your requirement, it is advisable not to dynamically set the @ActiveProfile as it would be kind of a hack and unnecessary config that you would need to add.","body":"For your requirement, it is advisable not to dynamically set the @ActiveProfile as it would be kind of a hack and unnecessary config that you would need to add."},{"owner":{"account_id":3450311,"reputation":137,"user_id":2890126,"accept_rate":40,"display_name":"smastika"},"score":0,"creation_date":1535643292,"post_id":52100384,"comment_id":91152205,"body_markdown":"I see, any suggestions then? Because I can add a .properties file for my test profile that points at the mongoserver, that works fine but I would need to outcomment it everytime I want to run tests on my local machine (Or thats what I can come up with right now at least :)).","body":"I see, any suggestions then? Because I can add a .properties file for my test profile that points at the mongoserver, that works fine but I would need to outcomment it everytime I want to run tests on my local machine (Or thats what I can come up with right now at least :))."},{"owner":{"account_id":5559956,"reputation":13819,"user_id":9840318,"display_name":"Madhu Bhat"},"score":0,"creation_date":1535643535,"post_id":52100384,"comment_id":91152328,"body_markdown":"Yes that&#39;s what would be advisable. Have a profile with local Mongo server and another with the prod Mongo server. Commit the code with the the prod test profile, but locally use the local test profile. See my answer :)","body":"Yes that&#39;s what would be advisable. Have a profile with local Mongo server and another with the prod Mongo server. Commit the code with the the prod test profile, but locally use the local test profile. See my answer :)"},{"owner":{"account_id":3450311,"reputation":137,"user_id":2890126,"accept_rate":40,"display_name":"smastika"},"score":0,"creation_date":1535644783,"post_id":52100384,"comment_id":91153162,"body_markdown":"ok I will, just waiting a bit more to see if something genius pops up otherwise I&#39;ll accept :) Thanks!","body":"ok I will, just waiting a bit more to see if something genius pops up otherwise I&#39;ll accept :) Thanks!"},{"owner":{"account_id":5559956,"reputation":13819,"user_id":9840318,"display_name":"Madhu Bhat"},"score":0,"creation_date":1535645024,"post_id":52100384,"comment_id":91153294,"body_markdown":"Sure that&#39;s better :)","body":"Sure that&#39;s better :)"}],"answers":[{"tags":[],"owner":{"account_id":6365827,"reputation":3652,"user_id":4939853,"accept_rate":69,"display_name":"Oreste Viron"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1535642478,"creation_date":1535642478,"answer_id":52100513,"question_id":52100384,"body_markdown":"Maybe you can use environment variables. Instead of providing an url in your application-test.yaml, define a variable like : ${MONGO_TEST_URL}\r\n\r\nYou will be able to run your jar using java -jar -DMONGO_TEST_URL=localhost or whatever address you want to use.","title":"Conditionally set @Activeprofile before database test in spring boot","body":"<p>Maybe you can use environment variables. Instead of providing an url in your application-test.yaml, define a variable like : ${MONGO_TEST_URL}</p>\n\n<p>You will be able to run your jar using java -jar -DMONGO_TEST_URL=localhost or whatever address you want to use.</p>\n"},{"tags":[],"owner":{"account_id":5559956,"reputation":13819,"user_id":9840318,"display_name":"Madhu Bhat"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1535643339,"creation_date":1535643339,"answer_id":52100761,"question_id":52100384,"body_markdown":"It is not advisable to dynamically change the @ActiveProfile based on the environment since it would need you to add extra config to find out which environment it is and set the @ActiveProfile for the tests based on that. The extra config and work that you do would not be a good design and would be unnecessary. If running the tests on your local is the only hiccup, I would advise you to always set the @ActiveProfile to `test-prod` and change it locally to `test` whenever you are developing on your machine. Do be careful not to commit the local @ActiveProfile though :) ","title":"Conditionally set @Activeprofile before database test in spring boot","body":"<p>It is not advisable to dynamically change the @ActiveProfile based on the environment since it would need you to add extra config to find out which environment it is and set the @ActiveProfile for the tests based on that. The extra config and work that you do would not be a good design and would be unnecessary. If running the tests on your local is the only hiccup, I would advise you to always set the @ActiveProfile to <code>test-prod</code> and change it locally to <code>test</code> whenever you are developing on your machine. Do be careful not to commit the local @ActiveProfile though :) </p>\n"},{"tags":[],"owner":{"account_id":2573819,"reputation":15175,"user_id":2231972,"display_name":"Roman-Stop RU aggression in UA"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1535665250,"creation_date":1535645963,"answer_id":52101540,"question_id":52100384,"body_markdown":"You can use resolver to dynamically set profile based on for example environment variable\r\n\r\n    @ActiveProfiles(resolver = MyActiveProfileResolver.class)\r\n    class MyTest { ... }\r\n\r\nAnd profile resolver:\r\n\r\n    public class MyActiveProfilesResolver  implements ActiveProfilesResolver{\r\n      @Override\r\n      public String[] resolve(Class&lt;?&gt; testClass) {\r\n          Map&lt;String, String&gt; env =  System.getenv();\r\n          String profile;\r\n          if (env.hasKey(&quot;TEST_ENV&quot;)) {\r\n              profile = env.get(&quot;TEST_ENV&quot;);\r\n          } else {\r\n              profile = &quot;local-test&quot;; // it is more convenient to to have this as default to be used in dev env and override it on test env\r\n          }\r\n          return new String[]{profile};\r\n      }\r\n    }\r\n\r\nCreate three profiles `test`, `local-test` and `prod`. Resolver should return `test` or `local-test` depending on the env variable `TEST_ENV`.","title":"Conditionally set @Activeprofile before database test in spring boot","body":"<p>You can use resolver to dynamically set profile based on for example environment variable</p>\n\n<pre><code>@ActiveProfiles(resolver = MyActiveProfileResolver.class)\nclass MyTest { ... }\n</code></pre>\n\n<p>And profile resolver:</p>\n\n<pre><code>public class MyActiveProfilesResolver  implements ActiveProfilesResolver{\n  @Override\n  public String[] resolve(Class&lt;?&gt; testClass) {\n      Map&lt;String, String&gt; env =  System.getenv();\n      String profile;\n      if (env.hasKey(\"TEST_ENV\")) {\n          profile = env.get(\"TEST_ENV\");\n      } else {\n          profile = \"local-test\"; // it is more convenient to to have this as default to be used in dev env and override it on test env\n      }\n      return new String[]{profile};\n  }\n}\n</code></pre>\n\n<p>Create three profiles <code>test</code>, <code>local-test</code> and <code>prod</code>. Resolver should return <code>test</code> or <code>local-test</code> depending on the env variable <code>TEST_ENV</code>.</p>\n"},{"tags":[],"owner":{"account_id":8915876,"reputation":3560,"user_id":6654475,"accept_rate":100,"display_name":"Francislainy Campos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640069353,"creation_date":1640069353,"answer_id":70431599,"question_id":52100384,"body_markdown":"Same as [@romal&#39;s answer][1] but a bit smaller, using `System.getProperty()` instead of `getEnv()`.\r\n\r\n    @ActiveProfiles(resolver = MyActiveProfileResolver.class)\r\n    class MyTest { ... }\r\n\r\nAnd\r\n\r\n    public class MyActiveProfileResolver implements ActiveProfilesResolver {\r\n        @NotNull\r\n        @Override\r\n        public String[] resolve(@NotNull Class&lt;?&gt; testClass) {\r\n            return new String[]{System.getProperty(&quot;testEnvt&quot;, &quot;dev&quot;)};\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/52101540/6654475","title":"Conditionally set @Activeprofile before database test in spring boot","body":"<p>Same as <a href=\"https://stackoverflow.com/a/52101540/6654475\">@romal's answer</a> but a bit smaller, using <code>System.getProperty()</code> instead of <code>getEnv()</code>.</p>\n<pre><code>@ActiveProfiles(resolver = MyActiveProfileResolver.class)\nclass MyTest { ... }\n</code></pre>\n<p>And</p>\n<pre><code>public class MyActiveProfileResolver implements ActiveProfilesResolver {\n    @NotNull\n    @Override\n    public String[] resolve(@NotNull Class&lt;?&gt; testClass) {\n        return new String[]{System.getProperty(&quot;testEnvt&quot;, &quot;dev&quot;)};\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":3450311,"reputation":137,"user_id":2890126,"accept_rate":40,"display_name":"smastika"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1579,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":52101540,"answer_count":4,"score":3,"last_activity_date":1640069353,"creation_date":1535641968,"question_id":52100384,"body_markdown":"I have a spring-boot application with a test class that tests some crud operations and services against my mongodb. Until now everything was done on my machine (mongo was on localhost). When running tests I set the active profile to &quot;test&quot; to skip some authentication methods used in my services. Right now we are setting up a prod environment where mongo is on a dedicated server and I have setup different profiles using different application.properties files. That part works fine but when running the tests on the hosted environment the tests fail because mongo is not on localhost. I looked around a lot for some kind of solution.\r\n\r\nMy idea is to somehow before the tests are run to check if the active profile is &quot;prod&quot; and then set the active profile to something like &quot;test-prod&quot; that uses the hosted mongo, and if the active profile is &quot;default or dev&quot; set active profile to &quot;test&quot; that runs against localhost.\r\n\r\nAny ideas or solutions would be much appreciated.","title":"Conditionally set @Activeprofile before database test in spring boot","body":"<p>I have a spring-boot application with a test class that tests some crud operations and services against my mongodb. Until now everything was done on my machine (mongo was on localhost). When running tests I set the active profile to \"test\" to skip some authentication methods used in my services. Right now we are setting up a prod environment where mongo is on a dedicated server and I have setup different profiles using different application.properties files. That part works fine but when running the tests on the hosted environment the tests fail because mongo is not on localhost. I looked around a lot for some kind of solution.</p>\n\n<p>My idea is to somehow before the tests are run to check if the active profile is \"prod\" and then set the active profile to something like \"test-prod\" that uses the hosted mongo, and if the active profile is \"default or dev\" set active profile to \"test\" that runs against localhost.</p>\n\n<p>Any ideas or solutions would be much appreciated.</p>\n"},{"tags":["java","eclipse","debugging"],"comments":[{"owner":{"account_id":3159259,"reputation":109668,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1639761644,"post_id":70396044,"comment_id":124439635,"body_markdown":"You appear to be making copies of the two objects (p1, p2) - are the copies making deep copies of the `coefficients` map? You are then removing entries from the map, if you haven&#39;t make a deep copy you are removing the values from the original maps as well. You really need to show a [mre] that people can actually test.","body":"You appear to be making copies of the two objects (p1, p2) - are the copies making deep copies of the <code>coefficients</code> map? You are then removing entries from the map, if you haven&#39;t make a deep copy you are removing the values from the original maps as well. You really need to show a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that people can actually test."},{"owner":{"account_id":21299102,"reputation":39,"user_id":15675174,"display_name":"Flyleaf"},"score":0,"creation_date":1639762567,"post_id":70396044,"comment_id":124439947,"body_markdown":"yes, these are deep copies as i would change the polynomials value if i were to remove values from the original map\nthis whole project is fairly large... over 10 files and the ones talked about are over 300 lines each\nand the thing is, i cannot recreate it at all \ni know this indicates that the issue is most likely somewhere else... but still im not sure what to do\nid add a minimal example as u suggested if ill find a way to recreate the issue but i doubt ill be able to as ive been trying for the past 4 hours with no success","body":"yes, these are deep copies as i would change the polynomials value if i were to remove values from the original map this whole project is fairly large... over 10 files and the ones talked about are over 300 lines each and the thing is, i cannot recreate it at all  i know this indicates that the issue is most likely somewhere else... but still im not sure what to do id add a minimal example as u suggested if ill find a way to recreate the issue but i doubt ill be able to as ive been trying for the past 4 hours with no success"}],"answers":[{"tags":[],"owner":{"account_id":21299102,"reputation":39,"user_id":15675174,"display_name":"Flyleaf"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1640069000,"creation_date":1640049959,"answer_id":70429729,"question_id":70396044,"body_markdown":"My mistake was making `.toString()` change the state of the object so the debugger didn&#39;t tell the whole story.\r\n\r\nThanks a lot guys!","title":"different sort outcome(SortedSet) in debug mode vs normal run","body":"<p>My mistake was making <code>.toString()</code> change the state of the object so the debugger didn't tell the whole story.</p>\n<p>Thanks a lot guys!</p>\n"}],"owner":{"account_id":21299102,"reputation":39,"user_id":15675174,"display_name":"Flyleaf"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":90,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70429729,"answer_count":1,"score":0,"last_activity_date":1640069000,"creation_date":1639757963,"question_id":70396044,"body_markdown":"so i wrote a comparator to sort out objects of the type Polynom (polynomials but in my lang basically). when i iterate slowly over it with a debugger i seem to get the result im expecting. yet when i run it, one of them craps out and returns the wrong value in the comparison which should be very straight forward.\r\n\r\nthe Polynom object is as follows:\r\n\r\n    public class Polynom&lt;E&gt; implements IPolynom&lt;E&gt; , Comparable&lt;Polynom&lt;E&gt;&gt;{\r\n\t    private SortedMap&lt;Integer, FieldMember&lt;E&gt;&gt; coefficients = new TreeMap&lt;&gt;();\r\n\r\nwhile IPolynom is just an interface to define the methods\r\nE can be either a complex number (which i also wrote and includes its methods and two fields real and image but its irrelevant to the error) \r\n\r\n    \tpublic int compareTo(Polynom&lt;E&gt; o) {\r\n\t\tPolynom&lt;E&gt; p1 = new Polynom&lt;&gt;(this);\r\n\t\tPolynom&lt;E&gt; p2 = new Polynom&lt;&gt;(o);\r\n\t\tint deg,co;\r\n\t\twhile(!p1.coefficients.isEmpty() &amp;&amp; !p2.coefficients.isEmpty())\r\n\t\t{\r\n\t\tdeg = p1.degree() - p2.degree();\r\n\t\tif(deg != 0)\r\n\t\t\treturn deg;\r\n\t\tco = p1.getCoefficient(p1.degree()).compareTo(p2.getCoefficient(p2.degree()));\r\n\t\tif(co != 0)\r\n\t\t\treturn co;\r\n\t\tp1.coefficients.remove(p1.degree());\r\n\t\tp2.coefficients.remove(p2.degree());\r\n\t\t\r\n\t\t}\r\n\t\treturn (p1.degree() - p2.degree());\r\n\t}\r\nthis is the compareTo method that i wrote\r\nand the method degree() simply returns the degree of x in this scenario\r\nthe coefficient part is never reached in this example so ill skip over it\r\nthe objects being compared are as follows: \r\n\r\np1 = Polynom: (1.00+0.00i)x^5\r\n\r\np2 = Polynom: (-1.00-5.00i)x^7\r\n\r\n\r\nthe comparison should be straight forward and indicate that p2 is greater than p1\r\nhowever when i run the opposite is returned\r\nwhen i debug (and specifically iterate over the lines as they happen) the method returns the correct result. if i skip over it even in debug it still returns the wrong result\r\nin my main method im adding a bunch of Polynom&lt;Complex&gt; type objects to a SortedSet and the ordering turns out to be wrong only on a single object (the one being p1 in this case which should be the &quot;smallest&quot; of them and go first up in the sorted set)\r\nim really at loss here... \r\n\r\nplease tell me if theres any other details that i need to add that would make the situation clearer as this is a fairly large project\r\n\r\np.s. all of this is done in eclipse (without any extensions)","title":"different sort outcome(SortedSet) in debug mode vs normal run","body":"<p>so i wrote a comparator to sort out objects of the type Polynom (polynomials but in my lang basically). when i iterate slowly over it with a debugger i seem to get the result im expecting. yet when i run it, one of them craps out and returns the wrong value in the comparison which should be very straight forward.</p>\n<p>the Polynom object is as follows:</p>\n<pre><code>public class Polynom&lt;E&gt; implements IPolynom&lt;E&gt; , Comparable&lt;Polynom&lt;E&gt;&gt;{\n    private SortedMap&lt;Integer, FieldMember&lt;E&gt;&gt; coefficients = new TreeMap&lt;&gt;();\n</code></pre>\n<p>while IPolynom is just an interface to define the methods\nE can be either a complex number (which i also wrote and includes its methods and two fields real and image but its irrelevant to the error)</p>\n<pre><code>    public int compareTo(Polynom&lt;E&gt; o) {\n    Polynom&lt;E&gt; p1 = new Polynom&lt;&gt;(this);\n    Polynom&lt;E&gt; p2 = new Polynom&lt;&gt;(o);\n    int deg,co;\n    while(!p1.coefficients.isEmpty() &amp;&amp; !p2.coefficients.isEmpty())\n    {\n    deg = p1.degree() - p2.degree();\n    if(deg != 0)\n        return deg;\n    co = p1.getCoefficient(p1.degree()).compareTo(p2.getCoefficient(p2.degree()));\n    if(co != 0)\n        return co;\n    p1.coefficients.remove(p1.degree());\n    p2.coefficients.remove(p2.degree());\n    \n    }\n    return (p1.degree() - p2.degree());\n}\n</code></pre>\n<p>this is the compareTo method that i wrote\nand the method degree() simply returns the degree of x in this scenario\nthe coefficient part is never reached in this example so ill skip over it\nthe objects being compared are as follows:</p>\n<p>p1 = Polynom: (1.00+0.00i)x^5</p>\n<p>p2 = Polynom: (-1.00-5.00i)x^7</p>\n<p>the comparison should be straight forward and indicate that p2 is greater than p1\nhowever when i run the opposite is returned\nwhen i debug (and specifically iterate over the lines as they happen) the method returns the correct result. if i skip over it even in debug it still returns the wrong result\nin my main method im adding a bunch of Polynom type objects to a SortedSet and the ordering turns out to be wrong only on a single object (the one being p1 in this case which should be the &quot;smallest&quot; of them and go first up in the sorted set)\nim really at loss here...</p>\n<p>please tell me if theres any other details that i need to add that would make the situation clearer as this is a fairly large project</p>\n<p>p.s. all of this is done in eclipse (without any extensions)</p>\n"},{"tags":["java","serialization"],"comments":[{"owner":{"account_id":7608172,"reputation":715,"user_id":5770084,"display_name":"whiplash"},"score":0,"creation_date":1640071465,"post_id":70431414,"comment_id":124501967,"body_markdown":"You might as well write `while(true)`. At least saves a CPU cycle by not having to perform the actual `1 != 2` evaluation every time. This looks like it might result in an infinite loop which gets broken when no more objects are left to read leading to an Exception which you catch. This is not a good approach. You might end up quitting for any Exception and you will not know what went wrong.","body":"You might as well write <code>while(true)</code>. At least saves a CPU cycle by not having to perform the actual <code>1 != 2</code> evaluation every time. This looks like it might result in an infinite loop which gets broken when no more objects are left to read leading to an Exception which you catch. This is not a good approach. You might end up quitting for any Exception and you will not know what went wrong."}],"answers":[{"tags":[],"owner":{"account_id":10481421,"reputation":1559,"user_id":7726319,"accept_rate":0,"display_name":"Prog_G"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1640068873,"creation_date":1640068873,"answer_id":70431536,"question_id":70431414,"body_markdown":"You can use java [Generics][1]. Please find the code below:\r\n\r\n    public static &lt;T&gt; ArrayList&lt;T&gt; ReadProducts(String fileName, Class&lt;T&gt; t) {\r\n            ArrayList p = null;\r\n            try {\r\n                ObjectInputStream in = new ObjectInputStream(\r\n                        new BufferedInputStream(\r\n                                new FileInputStream(fileName)));\r\n                p = new ArrayList&lt;T&gt;();\r\n    \r\n                while (1 != 2) {\r\n                    p.add(t.cast(in.readObject()));\r\n                }\r\n            } catch (Exception e) {\r\n                ;\r\n            }\r\n            return p;\r\n        }\r\n\r\n\r\n\r\n  [1]: https://www.tutorialspoint.com/java/java_generics.htm","title":"Java - Passing a class to a function","body":"<p>You can use java <a href=\"https://www.tutorialspoint.com/java/java_generics.htm\" rel=\"nofollow noreferrer\">Generics</a>. Please find the code below:</p>\n<pre><code>public static &lt;T&gt; ArrayList&lt;T&gt; ReadProducts(String fileName, Class&lt;T&gt; t) {\n        ArrayList p = null;\n        try {\n            ObjectInputStream in = new ObjectInputStream(\n                    new BufferedInputStream(\n                            new FileInputStream(fileName)));\n            p = new ArrayList&lt;T&gt;();\n\n            while (1 != 2) {\n                p.add(t.cast(in.readObject()));\n            }\n        } catch (Exception e) {\n            ;\n        }\n        return p;\n    }\n</code></pre>\n"}],"owner":{"account_id":22310675,"reputation":349,"user_id":16534694,"display_name":"Ryan Fu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":70431536,"answer_count":1,"score":-1,"last_activity_date":1640068873,"creation_date":1640068029,"question_id":70431414,"body_markdown":"I&#39;m implementing serialization, and am trying to make everything as modular as possible. When reading objects from files, I&#39;m trying to use just one function to pass everything to an ArrayList, or something of that sort. Currently I&#39;m doing something like this:\r\n\r\n    public static ArrayList&lt;Class1&gt; ReadClass1(String fileName) {\r\n    \tArrayList p = null;\r\n        try {\r\n        \tObjectInputStream in = new ObjectInputStream(\r\n                    new BufferedInputStream(\r\n                            new FileInputStream(fileName)));\r\n        \tp = new ArrayList&lt;Class1&gt;();\r\n        \twhile (1 != 2) {\r\n        \t\tp.add((Class1) in.readObject());\r\n        \t}\r\n        } catch (Exception e) {\r\n        \t;\r\n        }\r\n        \r\n        return p;\r\n\r\n    }\r\n\r\nHowever, I want to read other classes, let&#39;s say ```Class2``` or ```Class3```, and right now I&#39;m copy-pasting the code and just editing everything that says &quot;Class1&quot; to &quot;Class2&quot;. Is there a way to pass in a specific type I want to use, like this?\r\n\r\n    public static ArrayList&lt;myClass&gt; ReadProducts(String fileName, myClass) { //where myClass is a class\r\n    \tArrayList p = null;\r\n        try {\r\n        \tObjectInputStream in = new ObjectInputStream(\r\n                    new BufferedInputStream(\r\n                            new FileInputStream(fileName)));\r\n        \tp = new ArrayList&lt;myClass&gt;();\r\n        \twhile (1 != 2) {\r\n        \t\tp.add((myClass) in.readObject());\r\n        \t}\r\n        } catch (Exception e) {\r\n        \t;\r\n        }\r\n        \r\n        return p;\r\n\r\n    }\r\n\r\nSo that I could reuse the function for different classes?","title":"Java - Passing a class to a function","body":"<p>I'm implementing serialization, and am trying to make everything as modular as possible. When reading objects from files, I'm trying to use just one function to pass everything to an ArrayList, or something of that sort. Currently I'm doing something like this:</p>\n<pre><code>public static ArrayList&lt;Class1&gt; ReadClass1(String fileName) {\n    ArrayList p = null;\n    try {\n        ObjectInputStream in = new ObjectInputStream(\n                new BufferedInputStream(\n                        new FileInputStream(fileName)));\n        p = new ArrayList&lt;Class1&gt;();\n        while (1 != 2) {\n            p.add((Class1) in.readObject());\n        }\n    } catch (Exception e) {\n        ;\n    }\n    \n    return p;\n\n}\n</code></pre>\n<p>However, I want to read other classes, let's say <code>Class2</code> or <code>Class3</code>, and right now I'm copy-pasting the code and just editing everything that says &quot;Class1&quot; to &quot;Class2&quot;. Is there a way to pass in a specific type I want to use, like this?</p>\n<pre><code>public static ArrayList&lt;myClass&gt; ReadProducts(String fileName, myClass) { //where myClass is a class\n    ArrayList p = null;\n    try {\n        ObjectInputStream in = new ObjectInputStream(\n                new BufferedInputStream(\n                        new FileInputStream(fileName)));\n        p = new ArrayList&lt;myClass&gt;();\n        while (1 != 2) {\n            p.add((myClass) in.readObject());\n        }\n    } catch (Exception e) {\n        ;\n    }\n    \n    return p;\n\n}\n</code></pre>\n<p>So that I could reuse the function for different classes?</p>\n"},{"tags":["java","focus","tableview","javafx-8","treetableview"],"comments":[{"owner":{"account_id":348041,"reputation":48805,"user_id":682495,"accept_rate":77,"display_name":"Uluk Biy"},"score":0,"creation_date":1405083044,"post_id":24694616,"comment_id":38299199,"body_markdown":"The linked tutorial and the official tableview example (Example 12-11 Alternative Solution Of Cell Editing) use the approach of adding listener to textField.focusedProperty(). What do you mean by that approach is not working as I hoped? And which &quot;editingProperty&quot; are you mentioning?","body":"The linked tutorial and the official tableview example (Example 12-11 Alternative Solution Of Cell Editing) use the approach of adding listener to textField.focusedProperty(). What do you mean by that approach is not working as I hoped? And which &quot;editingProperty&quot; are you mentioning?"},{"owner":{"account_id":72918,"reputation":6140,"user_id":210290,"accept_rate":85,"display_name":"crusam"},"score":0,"creation_date":1405084369,"post_id":24694616,"comment_id":38300023,"body_markdown":"The offical example is unfortunatly not working (at least since 8u5). The value is only commited, when you leave the cell with pressing enter, but not due to focus lost. With not working as I hoped I just mean it doens`t work at all. It just sets the old value back again when focus is lost instead of commiting the value.","body":"The offical example is unfortunatly not working (at least since 8u5). The value is only commited, when you leave the cell with pressing enter, but not due to focus lost. With not working as I hoped I just mean it doens`t work at all. It just sets the old value back again when focus is lost instead of commiting the value."},{"owner":{"account_id":72918,"reputation":6140,"user_id":210290,"accept_rate":85,"display_name":"crusam"},"score":0,"creation_date":1405084517,"post_id":24694616,"comment_id":38300115,"body_markdown":"the reason is (at least I believe that) the editing Property, which is already set to editing=false, when focus is lost. therefore commitEdit can never succeed, since the cell wont be in editing state anymore. Editing is a boolean property of javafx.scene.control.Cell and therefore inherited to all Cell-Implementations (see for example at the first if-check in commitEdit()).","body":"the reason is (at least I believe that) the editing Property, which is already set to editing=false, when focus is lost. therefore commitEdit can never succeed, since the cell wont be in editing state anymore. Editing is a boolean property of javafx.scene.control.Cell and therefore inherited to all Cell-Implementations (see for example at the first if-check in commitEdit())."},{"owner":{"account_id":348041,"reputation":48805,"user_id":682495,"accept_rate":77,"display_name":"Uluk Biy"},"score":0,"creation_date":1405087083,"post_id":24694616,"comment_id":38301849,"body_markdown":"I have tested the official Example 12-11 Alternative Solution Of Cell Editing on JavaFX 8.0.5-b13, and it is committing the changes on focus lost (But note that it is not committing if focus is lost by clicking another item of tableview, which another problem).","body":"I have tested the official Example 12-11 Alternative Solution Of Cell Editing on JavaFX 8.0.5-b13, and it is committing the changes on focus lost (But note that it is not committing if focus is lost by clicking another item of tableview, which another problem)."},{"owner":{"account_id":348041,"reputation":48805,"user_id":682495,"accept_rate":77,"display_name":"Uluk Biy"},"score":0,"creation_date":1405087152,"post_id":24694616,"comment_id":38301898,"body_markdown":"By the way I was on Win7. What is yours?","body":"By the way I was on Win7. What is yours?"},{"owner":{"account_id":72918,"reputation":6140,"user_id":210290,"accept_rate":85,"display_name":"crusam"},"score":0,"creation_date":1405094515,"post_id":24694616,"comment_id":38306564,"body_markdown":"First of all thanks for your interest. I am not sure, if I really understand the difference between committing the value due to loosing focus and loosing focus by clicking another item of tableview. Maybe I get something wrong, would you mind explaining the difference? The only thing I try to achieve is, whereever the user clicks in the application, while editing a cell, the tableview should try to commit the current value in the textfield and closing the editmode. I am also using Win7.","body":"First of all thanks for your interest. I am not sure, if I really understand the difference between committing the value due to loosing focus and loosing focus by clicking another item of tableview. Maybe I get something wrong, would you mind explaining the difference? The only thing I try to achieve is, whereever the user clicks in the application, while editing a cell, the tableview should try to commit the current value in the textfield and closing the editmode. I am also using Win7."},{"owner":{"account_id":348041,"reputation":48805,"user_id":682495,"accept_rate":77,"display_name":"Uluk Biy"},"score":0,"creation_date":1405101129,"post_id":24694616,"comment_id":38310028,"body_markdown":"Did you run Example 12-11? Double click the cell then edit it. Click to empty space (where there is no item) of tableview. The changes should be committed. Just to be sure, check the version of javafx by printing out the com.sun.javafx.runtime.VersionInfo.getRuntimeVersion();.","body":"Did you run Example 12-11? Double click the cell then edit it. Click to empty space (where there is no item) of tableview. The changes should be committed. Just to be sure, check the version of javafx by printing out the com.sun.javafx.runtime.VersionInfo.getRuntimeVersion();."},{"owner":{"account_id":72918,"reputation":6140,"user_id":210290,"accept_rate":85,"display_name":"crusam"},"score":0,"creation_date":1405102431,"post_id":24694616,"comment_id":38310654,"body_markdown":"Yeah, I did run it. But I am pretty sure I clicked a different cell instead of free space, will test it again as soon as I can. So what you are saying is: there is a difference between &quot;the user clicking on a empty space&quot; and &quot;the user clicks on a different cell of the table&quot;, while editing an entry of the tableview? Is there any possibility to handle these identical? I&#39;d like the tableview to react the same. In both cases, the table should try to commit the changes in the cell, no matter where the user is going to click next.","body":"Yeah, I did run it. But I am pretty sure I clicked a different cell instead of free space, will test it again as soon as I can. So what you are saying is: there is a difference between &quot;the user clicking on a empty space&quot; and &quot;the user clicks on a different cell of the table&quot;, while editing an entry of the tableview? Is there any possibility to handle these identical? I&#39;d like the tableview to react the same. In both cases, the table should try to commit the changes in the cell, no matter where the user is going to click next."},{"owner":{"account_id":1389321,"reputation":1564,"user_id":1320555,"accept_rate":77,"display_name":"user555"},"score":0,"creation_date":1405293993,"post_id":24694616,"comment_id":38357080,"body_markdown":"When one clicks outside the current cell `cancelEdit` gets called and calling `commitEdit` has no effect due to `TableCell.isEditing` returning false. Is your issue related to [mine](http://stackoverflow.com/questions/23632884/how-to-commit-when-clicking-outside-an-editable-tableview-cell-in-javafx)? There is a [jira issue](https://javafx-jira.kenai.com/browse/RT-18492) for something like this dating back to december 2011.","body":"When one clicks outside the current cell <code>cancelEdit</code> gets called and calling <code>commitEdit</code> has no effect due to <code>TableCell.isEditing</code> returning false. Is your issue related to <a href=\"http://stackoverflow.com/questions/23632884/how-to-commit-when-clicking-outside-an-editable-tableview-cell-in-javafx\">mine</a>? There is a <a href=\"https://javafx-jira.kenai.com/browse/RT-18492\" rel=\"nofollow noreferrer\">jira issue</a> for something like this dating back to december 2011."},{"owner":{"account_id":1389321,"reputation":1564,"user_id":1320555,"accept_rate":77,"display_name":"user555"},"score":0,"creation_date":1405294171,"post_id":24694616,"comment_id":38357115,"body_markdown":"I fail to understand why committing when clicking outside the cell is not the default method of the the tableView API. No table implementation I&#39;ve seen behaves in this way, not to mention how bad this is from a UI and usability perspective.","body":"I fail to understand why committing when clicking outside the cell is not the default method of the the tableView API. No table implementation I&#39;ve seen behaves in this way, not to mention how bad this is from a UI and usability perspective."},{"owner":{"account_id":72918,"reputation":6140,"user_id":210290,"accept_rate":85,"display_name":"crusam"},"score":0,"creation_date":1405326857,"post_id":24694616,"comment_id":38365882,"body_markdown":"You are right, I also can`t understand, why the default behaviour is chosen to be like this. Unfortunatly the focuslistener approach doest work anymore. I am not sure how to provide a satisfying user experience in this case. My current approach is not really the way to go there I think. Thank you for pointing me to the jira issue.","body":"You are right, I also can`t understand, why the default behaviour is chosen to be like this. Unfortunatly the focuslistener approach doest work anymore. I am not sure how to provide a satisfying user experience in this case. My current approach is not really the way to go there I think. Thank you for pointing me to the jira issue."}],"answers":[{"tags":[],"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1640061653,"creation_date":1407946336,"answer_id":25291137,"question_id":24694616,"body_markdown":"After some digging, turned out that the culprit (aka: the collaborator that cancels the edit before the textField looses focus) is the TableCellBehaviour/Base in its processing of a mousePressed: \r\n\r\n- mousePressed calls `simpleSelect(..)`\r\n- on detecting a single click it calls `edit(-1, null)`\r\n- which calls the same method on TableView\r\n- which sets its editingCell property to null\r\n- a tableCell listens to that property and reacts by canceling its own edit\r\n\r\nUnfortunately, a hackaround requires 3 collaborators\r\n\r\n- a TableView with additional api to terminate an edit\r\n- a TableCellBehaviour with overridden `simpleSelect(...)` that calls the additional api (instead of edit(-1..)) before calling super\r\n- a TableCell that is configured with the extended behaviour _and_ is aware of table&#39;s extended properties\r\n\r\nSome code snippets ([full code][1]) :\r\n\r\n    // on XTableView:\r\n    public void terminateEdit() {\r\n        if (!isEditing()) return;\r\n        // terminatingCell is a property that supporting TableCells can listen to\r\n        setTerminatingCell(getEditingCell());\r\n        if (isEditing()) throw new IllegalStateException(\r\n              &quot;expected editing to be terminated but was &quot; + getEditingCell());\r\n        setTerminatingCell(null);\r\n    }\r\n\r\n    // on XTableCellBehaviour: override simpleSelect\r\n    @Override\r\n    protected void simpleSelect(MouseEvent e) {\r\n        TableCell&lt;S, T&gt; cell = getControl();\r\n        TableView&lt;S&gt; table = cell.getTableColumn().getTableView();\r\n        if (table instanceof XTableView) {\r\n            ((XTableView&lt;S&gt;) table).terminateEdit();\r\n        }\r\n        super.simpleSelect(e);\r\n    }\r\n\r\n    // on XTextFieldTableCell - this method is called from listener\r\n    // to table&#39;s terminatingCell property\r\n    protected void terminateEdit(TablePosition&lt;S, ?&gt; newPosition) {\r\n        if (!isEditing() || !match(newPosition)) return;\r\n        commitEdit();\r\n    }\r\n    \r\n    protected void commitEdit() {\r\n        T edited = getConverter().fromString(myTextField.getText());\r\n        commitEdit(edited);\r\n    }\r\n\r\n    /**\r\n     * Implemented to create XTableCellSkin which supports terminating edits.\r\n     */\r\n    @Override\r\n    protected Skin&lt;?&gt; createDefaultSkin() {\r\n        return new XTableCellSkin&lt;S, T&gt;(this);\r\n    }\r\n\r\nNote: the implementation of TableCellBehaviour changed massively between jdk8u5 and jdk8u20 (joys of hacking - not fit for production use ;-) - the method to override in the latter is `handleClicks(..)` \r\n\r\nBTW: massive votingfor [JDK-8089514][2] (was RT-18492 in old jira) might speed up a core fix. Unfortunately, at least the author role is needed to vote/comment bugs in the new tracker.\r\n\r\n\r\n  [1]: https://github.com/kleopatra/swingempire-fx/blob/master/fx8-swingempire/src/java/de/swingempire/fx/scene/control/XTableView.java\r\n  [2]: https://bugs.openjdk.java.net/browse/JDK-8089514","title":"How to enable commit on focusLost for TableView/TreeTableView?","body":"<p>After some digging, turned out that the culprit (aka: the collaborator that cancels the edit before the textField looses focus) is the TableCellBehaviour/Base in its processing of a mousePressed:</p>\n<ul>\n<li>mousePressed calls <code>simpleSelect(..)</code></li>\n<li>on detecting a single click it calls <code>edit(-1, null)</code></li>\n<li>which calls the same method on TableView</li>\n<li>which sets its editingCell property to null</li>\n<li>a tableCell listens to that property and reacts by canceling its own edit</li>\n</ul>\n<p>Unfortunately, a hackaround requires 3 collaborators</p>\n<ul>\n<li>a TableView with additional api to terminate an edit</li>\n<li>a TableCellBehaviour with overridden <code>simpleSelect(...)</code> that calls the additional api (instead of edit(-1..)) before calling super</li>\n<li>a TableCell that is configured with the extended behaviour <em>and</em> is aware of table's extended properties</li>\n</ul>\n<p>Some code snippets (<a href=\"https://github.com/kleopatra/swingempire-fx/blob/master/fx8-swingempire/src/java/de/swingempire/fx/scene/control/XTableView.java\" rel=\"nofollow noreferrer\">full code</a>) :</p>\n<pre><code>// on XTableView:\npublic void terminateEdit() {\n    if (!isEditing()) return;\n    // terminatingCell is a property that supporting TableCells can listen to\n    setTerminatingCell(getEditingCell());\n    if (isEditing()) throw new IllegalStateException(\n          &quot;expected editing to be terminated but was &quot; + getEditingCell());\n    setTerminatingCell(null);\n}\n\n// on XTableCellBehaviour: override simpleSelect\n@Override\nprotected void simpleSelect(MouseEvent e) {\n    TableCell&lt;S, T&gt; cell = getControl();\n    TableView&lt;S&gt; table = cell.getTableColumn().getTableView();\n    if (table instanceof XTableView) {\n        ((XTableView&lt;S&gt;) table).terminateEdit();\n    }\n    super.simpleSelect(e);\n}\n\n// on XTextFieldTableCell - this method is called from listener\n// to table's terminatingCell property\nprotected void terminateEdit(TablePosition&lt;S, ?&gt; newPosition) {\n    if (!isEditing() || !match(newPosition)) return;\n    commitEdit();\n}\n\nprotected void commitEdit() {\n    T edited = getConverter().fromString(myTextField.getText());\n    commitEdit(edited);\n}\n\n/**\n * Implemented to create XTableCellSkin which supports terminating edits.\n */\n@Override\nprotected Skin&lt;?&gt; createDefaultSkin() {\n    return new XTableCellSkin&lt;S, T&gt;(this);\n}\n</code></pre>\n<p>Note: the implementation of TableCellBehaviour changed massively between jdk8u5 and jdk8u20 (joys of hacking - not fit for production use ;-) - the method to override in the latter is <code>handleClicks(..)</code></p>\n<p>BTW: massive votingfor <a href=\"https://bugs.openjdk.java.net/browse/JDK-8089514\" rel=\"nofollow noreferrer\">JDK-8089514</a> (was RT-18492 in old jira) might speed up a core fix. Unfortunately, at least the author role is needed to vote/comment bugs in the new tracker.</p>\n"},{"tags":[],"owner":{"account_id":5454893,"reputation":91,"user_id":4338629,"display_name":"keyo"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1418070219,"creation_date":1418065641,"answer_id":27365088,"question_id":24694616,"body_markdown":"I also needed this functionality and did some study. I faced some stability issues with XTableView hacking mentioned above.\r\n\r\nAs problem seems to be commitEdit() won&#39;t take effect when focus is lost, why you don&#39;t just call your own commit callback from TableCell as follows:\r\n\r\n    public class SimpleEditingTextTableCell extends TableCell {\r\n        private TextArea textArea;\r\n        Callback commitChange;\r\n    \r\n        public SimpleEditingTextTableCell(Callback commitChange) {\r\n            this.commitChange = commitChange;\r\n        }\r\n    \r\n        @Override\r\n        public void startEdit() {\r\n             ...\r\n    \r\n            getTextArea().focusedProperty().addListener(new ChangeListener&lt;Boolean&gt;() {\r\n                @Override\r\n                public void changed(ObservableValue&lt;? extends Boolean&gt; arg0, Boolean arg1, Boolean arg2) {\r\n                    if (!arg2) {\r\n                        //commitEdit is replaced with own callback\r\n                        //commitEdit(getTextArea().getText());\r\n                        \r\n                        //Update item now since otherwise, it won&#39;t get refreshed\r\n                        setItem(getTextArea().getText());\r\n                        //Example, provide TableRow and index to get Object of TableView in callback implementation\r\n                        commitChange.call(new TableCellChangeInfo(getTableRow(), getTableRow().getIndex(), getTextArea().getText()));\r\n                    }\r\n                }\r\n            });\r\n           ...\r\n        }\r\n        ...\r\n    }\r\n\r\nIn cell factory, you just store committed value to the object or do whatever necessary to make it permanent:\r\n\r\n\r\n    col.setCellFactory(new Callback&lt;TableColumn&lt;Object, String&gt;, TableCell&lt;Object, String&gt;&gt;() {\r\n                @Override\r\n                public TableCell&lt;Object, String&gt; call(TableColumn&lt;Object, String&gt; p) {\r\n                    return new SimpleEditingTextTableCell(cellChange -&gt; {\r\n                                TableCellChangeInfo changeInfo = (TableCellChangeInfo)cellChange;\r\n                                Object obj = myTableView.getItems().get(changeInfo.getRowIndex());\r\n                                //Save committed value to the object in tableview (and maybe to DB)\r\n                                obj.field = changeInfo.getChangedObj().toString();\r\n                                return true;\r\n                            });\r\n                }\r\n            });\r\n\r\nSo far, I have not been able to find any problems with this workaround. On the other hand, I haven&#39;t been yet done extensive testing on this either.\r\n\r\nEDIT: Well, after some testing noticed, the workaround was working well with big data in tableview but with empty tableview cell was not getting updated after focus lost, only when double clicking it again. There would be ways to refresh table view but that too much hacking for me...\r\n\r\nEDIT2: Added setItem(getTextArea().getText()); before calling callback -&gt; works with empty tableview as well.\r\n","title":"How to enable commit on focusLost for TableView/TreeTableView?","body":"<p>I also needed this functionality and did some study. I faced some stability issues with XTableView hacking mentioned above.</p>\n\n<p>As problem seems to be commitEdit() won't take effect when focus is lost, why you don't just call your own commit callback from TableCell as follows:</p>\n\n<pre><code>public class SimpleEditingTextTableCell extends TableCell {\n    private TextArea textArea;\n    Callback commitChange;\n\n    public SimpleEditingTextTableCell(Callback commitChange) {\n        this.commitChange = commitChange;\n    }\n\n    @Override\n    public void startEdit() {\n         ...\n\n        getTextArea().focusedProperty().addListener(new ChangeListener&lt;Boolean&gt;() {\n            @Override\n            public void changed(ObservableValue&lt;? extends Boolean&gt; arg0, Boolean arg1, Boolean arg2) {\n                if (!arg2) {\n                    //commitEdit is replaced with own callback\n                    //commitEdit(getTextArea().getText());\n\n                    //Update item now since otherwise, it won't get refreshed\n                    setItem(getTextArea().getText());\n                    //Example, provide TableRow and index to get Object of TableView in callback implementation\n                    commitChange.call(new TableCellChangeInfo(getTableRow(), getTableRow().getIndex(), getTextArea().getText()));\n                }\n            }\n        });\n       ...\n    }\n    ...\n}\n</code></pre>\n\n<p>In cell factory, you just store committed value to the object or do whatever necessary to make it permanent:</p>\n\n<pre><code>col.setCellFactory(new Callback&lt;TableColumn&lt;Object, String&gt;, TableCell&lt;Object, String&gt;&gt;() {\n            @Override\n            public TableCell&lt;Object, String&gt; call(TableColumn&lt;Object, String&gt; p) {\n                return new SimpleEditingTextTableCell(cellChange -&gt; {\n                            TableCellChangeInfo changeInfo = (TableCellChangeInfo)cellChange;\n                            Object obj = myTableView.getItems().get(changeInfo.getRowIndex());\n                            //Save committed value to the object in tableview (and maybe to DB)\n                            obj.field = changeInfo.getChangedObj().toString();\n                            return true;\n                        });\n            }\n        });\n</code></pre>\n\n<p>So far, I have not been able to find any problems with this workaround. On the other hand, I haven't been yet done extensive testing on this either.</p>\n\n<p>EDIT: Well, after some testing noticed, the workaround was working well with big data in tableview but with empty tableview cell was not getting updated after focus lost, only when double clicking it again. There would be ways to refresh table view but that too much hacking for me...</p>\n\n<p>EDIT2: Added setItem(getTextArea().getText()); before calling callback -> works with empty tableview as well.</p>\n"},{"tags":[],"owner":{"account_id":2835528,"reputation":1834,"user_id":2436221,"accept_rate":81,"display_name":"Jonatan Stenbacka"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1446120017,"creation_date":1446111802,"answer_id":33410688,"question_id":24694616,"body_markdown":"With reservation of this being a dumb suggestion. Seems too easy. But why don&#39;t you just override `TableCell#cancelEdit()` and save the values manually when it is invoked? When the cell loses focus, `cancelEdit()` is always invoked to cancel the edit.\r\n\r\n    class EditableCell extends TableCell&lt;ObservableList&lt;StringProperty&gt;, String&gt; {\r\n\r\n\t\tprivate TextField textfield = new TextField();\r\n\t\tprivate int colIndex;\r\n\t\tprivate String originalValue = null;\r\n\r\n\t\tpublic EditableCell(int colIndex) {\r\n\t\t\tthis.colIndex = colIndex;\r\n\t\t\ttextfield.prefHeightProperty().bind(heightProperty().subtract(2.0d));\r\n\t\t\tthis.setPadding(new Insets(0));\r\n\t\t\tthis.setAlignment(Pos.CENTER);\r\n\t\t\t\r\n\t\t\ttextfield.setOnAction(e -&gt; {\r\n\t\t\t\tcancelEdit();\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\ttextfield.setOnKeyPressed(e -&gt; {\r\n\t\t\t\tif (e.getCode().equals(KeyCode.ESCAPE)) {\r\n\t\t\t\t\ttextfield.setText(originalValue);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic void updateItem(String item, boolean empty) {\r\n\t\t\tsuper.updateItem(item, empty);\r\n\t\t\tif (isEmpty()) {\r\n\t\t\t\tsetText(null);\r\n\t\t\t\tsetGraphic(null);\r\n\t\t\t} else {\r\n\t\t\t\tif (isEditing()) {\r\n\t\t\t\t\ttextfield.setText(item);\r\n\t\t\t\t\tsetGraphic(textfield);\r\n\t\t\t\t\tsetText(null);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetText(item);\r\n\t\t\t\t\tsetGraphic(null);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic void startEdit() {\r\n\t\t\tsuper.startEdit();\r\n\t\t\toriginalValue = getItem();\r\n\t\t\ttextfield.setText(getItem());\r\n\t\t\tsetGraphic(textfield);\r\n\t\t\tsetText(null);\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic void cancelEdit() {\r\n\t\t\tsuper.cancelEdit();\r\n\t\t\tsetGraphic(null);\r\n\t\t\tsetText(textfield.getText());\r\n\t\t\tObservableList&lt;StringProperty&gt; row = getTableView().getItems().get(getIndex());\r\n\t\t\trow.get(colIndex).set(getText());\r\n\t\t}\r\n\t}\r\n\r\nI don&#39;t know. Maybe I&#39;m missing something. But it seems to work for me.\r\n\r\n**Update:** Added cancel edit functionality. You can now cancel the edit by pressing escape while focusing the text field. Also added so that you can save the edit by pressing enter while focusing the textfield.","title":"How to enable commit on focusLost for TableView/TreeTableView?","body":"<p>With reservation of this being a dumb suggestion. Seems too easy. But why don't you just override <code>TableCell#cancelEdit()</code> and save the values manually when it is invoked? When the cell loses focus, <code>cancelEdit()</code> is always invoked to cancel the edit.</p>\n\n<pre><code>class EditableCell extends TableCell&lt;ObservableList&lt;StringProperty&gt;, String&gt; {\n\n    private TextField textfield = new TextField();\n    private int colIndex;\n    private String originalValue = null;\n\n    public EditableCell(int colIndex) {\n        this.colIndex = colIndex;\n        textfield.prefHeightProperty().bind(heightProperty().subtract(2.0d));\n        this.setPadding(new Insets(0));\n        this.setAlignment(Pos.CENTER);\n\n        textfield.setOnAction(e -&gt; {\n            cancelEdit();\n        });\n\n        textfield.setOnKeyPressed(e -&gt; {\n            if (e.getCode().equals(KeyCode.ESCAPE)) {\n                textfield.setText(originalValue);\n            }\n        });\n    }\n\n    @Override\n    public void updateItem(String item, boolean empty) {\n        super.updateItem(item, empty);\n        if (isEmpty()) {\n            setText(null);\n            setGraphic(null);\n        } else {\n            if (isEditing()) {\n                textfield.setText(item);\n                setGraphic(textfield);\n                setText(null);\n            } else {\n                setText(item);\n                setGraphic(null);\n            }\n        }\n    }\n\n    @Override\n    public void startEdit() {\n        super.startEdit();\n        originalValue = getItem();\n        textfield.setText(getItem());\n        setGraphic(textfield);\n        setText(null);\n    }\n\n    @Override\n    public void cancelEdit() {\n        super.cancelEdit();\n        setGraphic(null);\n        setText(textfield.getText());\n        ObservableList&lt;StringProperty&gt; row = getTableView().getItems().get(getIndex());\n        row.get(colIndex).set(getText());\n    }\n}\n</code></pre>\n\n<p>I don't know. Maybe I'm missing something. But it seems to work for me.</p>\n\n<p><strong>Update:</strong> Added cancel edit functionality. You can now cancel the edit by pressing escape while focusing the text field. Also added so that you can save the edit by pressing enter while focusing the textfield.</p>\n"},{"tags":[],"owner":{"account_id":2487644,"reputation":19,"user_id":2165790,"display_name":"A. Karali"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1593635121,"creation_date":1458206243,"answer_id":36056150,"question_id":24694616,"body_markdown":"Since `TextFieldTableCell` is missing functionality (as reckoned in the [JDK bug tracker][1]), an alternative solution may work. Forget about `TextFieldTableCell` and use a custom `TableCell` class with a `TextField` in it. The custom `TableCell`:\r\n\r\n    public class CommentCell extends TableCell&lt;ListItem, String&gt; {\r\n    \r\n        private final TextField comment = new TextField();\r\n    \r\n        public CommentCell() {\r\n            this.comment.setMaxWidth( Integer.MAX_VALUE );\r\n            this.comment.setDisable( true );\r\n            this.comment.focusedProperty().addListener( new ChangeListener&lt;Boolean&gt;() {\r\n                @Override\r\n                public void changed( ObservableValue&lt;? extends Boolean&gt; arg0, Boolean oldPropertyValue,\r\n                        Boolean newPropertyValue ) {\r\n                    if ( !newPropertyValue ) {\r\n                        // Binding the TextField text to the model\r\n                        MainController.getInstance().setComment( getTableRow().getIndex(), comment.getText() );\r\n                    }\r\n                }\r\n            } );\r\n            this.setGraphic( this.comment );\r\n        }\r\n    \r\n        @Override\r\n        protected void updateItem( String s, boolean empty ) {\r\n            // Checking if the TextField should be editable (based on model condition)\r\n            if ( MainController.getInstance().isDependency( getTableRow().getIndex() ) ) {\r\n                this.comment.setDisable( false );\r\n                this.comment.setEditable( true );\r\n            }\r\n            // Setting the model value as the text for the TextField\r\n            if ( s != null &amp;&amp; !s.isEmpty() ) {\r\n                this.comment.setText( s );\r\n            }\r\n        }\r\n    }\r\n\r\nThe UI display might differ from a `TextFieldTableCell` but at least, it allows for better usability:\r\n\r\n[UI Display][2]\r\n\r\n\r\n  [1]: https://bugs.openjdk.java.net/browse/JDK-8089514\r\n  [2]: http://i.stack.imgur.com/u4aRn.png","title":"How to enable commit on focusLost for TableView/TreeTableView?","body":"<p>Since <code>TextFieldTableCell</code> is missing functionality (as reckoned in the <a href=\"https://bugs.openjdk.java.net/browse/JDK-8089514\" rel=\"nofollow noreferrer\">JDK bug tracker</a>), an alternative solution may work. Forget about <code>TextFieldTableCell</code> and use a custom <code>TableCell</code> class with a <code>TextField</code> in it. The custom <code>TableCell</code>:</p>\n<pre><code>public class CommentCell extends TableCell&lt;ListItem, String&gt; {\n\n    private final TextField comment = new TextField();\n\n    public CommentCell() {\n        this.comment.setMaxWidth( Integer.MAX_VALUE );\n        this.comment.setDisable( true );\n        this.comment.focusedProperty().addListener( new ChangeListener&lt;Boolean&gt;() {\n            @Override\n            public void changed( ObservableValue&lt;? extends Boolean&gt; arg0, Boolean oldPropertyValue,\n                    Boolean newPropertyValue ) {\n                if ( !newPropertyValue ) {\n                    // Binding the TextField text to the model\n                    MainController.getInstance().setComment( getTableRow().getIndex(), comment.getText() );\n                }\n            }\n        } );\n        this.setGraphic( this.comment );\n    }\n\n    @Override\n    protected void updateItem( String s, boolean empty ) {\n        // Checking if the TextField should be editable (based on model condition)\n        if ( MainController.getInstance().isDependency( getTableRow().getIndex() ) ) {\n            this.comment.setDisable( false );\n            this.comment.setEditable( true );\n        }\n        // Setting the model value as the text for the TextField\n        if ( s != null &amp;&amp; !s.isEmpty() ) {\n            this.comment.setText( s );\n        }\n    }\n}\n</code></pre>\n<p>The UI display might differ from a <code>TextFieldTableCell</code> but at least, it allows for better usability:</p>\n<p><a href=\"https://i.stack.imgur.com/u4aRn.png\" rel=\"nofollow noreferrer\">UI Display</a></p>\n"},{"tags":[],"owner":{"account_id":535038,"reputation":567,"user_id":904735,"accept_rate":64,"display_name":"Grigor Nazaryan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1469811905,"creation_date":1469811905,"answer_id":38664060,"question_id":24694616,"body_markdown":"I found a simple solution to this, one just needs to provide the commit function to column specific to data type:\r\n\r\n    TableColumn msgstr = new TableColumn(&quot;msgstr&quot;);\r\n    msgstr.setMinWidth(100);\r\n    msgstr.prefWidthProperty().bind(widthProperty().divide(3));\r\n    msgstr.setCellValueFactory(\r\n            new PropertyValueFactory&lt;&gt;(&quot;msgstr&quot;)\r\n    );\r\n    msgstr.setOnEditCommit(new EventHandler&lt;CellEditEvent&lt;PoEntry, String&gt;&gt;() {\r\n    @Override\r\n    public void handle(CellEditEvent&lt;PoEntry, String&gt; t) {\r\n        ((PoEntry)t.getTableView().getItems().get(t.getTablePosition().getRow())).setMsgstr(t.getNewValue());\r\n    }\r\n    });","title":"How to enable commit on focusLost for TableView/TreeTableView?","body":"<p>I found a simple solution to this, one just needs to provide the commit function to column specific to data type:</p>\n\n<pre><code>TableColumn msgstr = new TableColumn(\"msgstr\");\nmsgstr.setMinWidth(100);\nmsgstr.prefWidthProperty().bind(widthProperty().divide(3));\nmsgstr.setCellValueFactory(\n        new PropertyValueFactory&lt;&gt;(\"msgstr\")\n);\nmsgstr.setOnEditCommit(new EventHandler&lt;CellEditEvent&lt;PoEntry, String&gt;&gt;() {\n@Override\npublic void handle(CellEditEvent&lt;PoEntry, String&gt; t) {\n    ((PoEntry)t.getTableView().getItems().get(t.getTablePosition().getRow())).setMsgstr(t.getNewValue());\n}\n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2172815,"reputation":646,"user_id":1924321,"display_name":"Ogmios"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1526481944,"creation_date":1525963461,"answer_id":50275614,"question_id":24694616,"body_markdown":"I prefer building as much as possible on the existing code, and since this behaviour is still not fixed w/ Java 10, here&#39;s a more general approach based on [J. Duke&#39;s solution][2] from bug: [JDK-8089311][1].\r\n\r\n    public class TextFieldTableCellAutoCmt&lt;S, T&gt; extends TextFieldTableCell&lt;S, T&gt; {\r\n    \r\n        protected TextField txtFldRef;\r\n        protected boolean isEdit;\r\n    \r\n        public TextFieldTableCellAutoCmt() {\r\n            this(null);\r\n        }\r\n    \r\n        public TextFieldTableCellAutoCmt(final StringConverter&lt;T&gt; conv) {\r\n            super(conv);\r\n        }\r\n    \r\n        public static &lt;S&gt; Callback&lt;TableColumn&lt;S, String&gt;, TableCell&lt;S, String&gt;&gt; forTableColumn() {\r\n            return forTableColumn(new DefaultStringConverter());\r\n        }\r\n    \r\n        public static &lt;S, T&gt; Callback&lt;TableColumn&lt;S, T&gt;, TableCell&lt;S, T&gt;&gt; forTableColumn(final StringConverter&lt;T&gt; conv) {\r\n            return list -&gt; new TextFieldTableCellAutoCmt&lt;S, T&gt;(conv);\r\n        }\r\n    \r\n        @Override\r\n        public void startEdit() {\r\n            super.startEdit();\r\n            isEdit = true;\r\n            if (updTxtFldRef()) {\r\n                txtFldRef.focusedProperty().addListener(this::onFocusChg);\r\n                txtFldRef.setOnKeyPressed(this::onKeyPrs);\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * @return whether {@link #txtFldRef} has been changed\r\n         */\r\n        protected boolean updTxtFldRef() {\r\n            final Node g = getGraphic();\r\n            final boolean isUpd = g != null &amp;&amp; txtFldRef != g;\r\n            if (isUpd) {\r\n                txtFldRef = g instanceof TextField ? (TextField) g : null;\r\n            }\r\n            return isUpd;\r\n        }\r\n    \r\n        @Override\r\n        public void commitEdit(final T valNew) {\r\n            if (isEditing()) {\r\n                super.commitEdit(valNew);\r\n            } else {\r\n                final TableView&lt;S&gt; tbl = getTableView();\r\n                if (tbl != null) {\r\n                    final TablePosition&lt;S, T&gt; pos = new TablePosition&lt;&gt;(tbl, getTableRow().getIndex(), getTableColumn()); // instead of tbl.getEditingCell()\r\n                    final CellEditEvent&lt;S, T&gt; ev  = new CellEditEvent&lt;&gt;(tbl, pos, TableColumn.editCommitEvent(), valNew);\r\n                    Event.fireEvent(getTableColumn(), ev);\r\n                }\r\n                updateItem(valNew, false);\r\n                if (tbl != null) {\r\n                    tbl.edit(-1, null);\r\n                }\r\n                // TODO ControlUtils.requestFocusOnControlOnlyIfCurrentFocusOwnerIsChild(tbl);\r\n            }\r\n        }\r\n    \r\n        public void onFocusChg(final ObservableValue&lt;? extends Boolean&gt; obs, final boolean v0, final boolean v1) {\r\n            if (isEdit &amp;&amp; !v1) {\r\n                commitEdit(getConverter().fromString(txtFldRef.getText()));\r\n            }\r\n        }\r\n    \r\n        protected void onKeyPrs(final KeyEvent e) {\r\n            switch (e.getCode()) {\r\n            case ESCAPE:\r\n                isEdit = false;\r\n                cancelEdit(); // see CellUtils#createTextField(...)\r\n                e.consume();\r\n                break;\r\n            case TAB:\r\n                if (e.isShiftDown()) {\r\n                    getTableView().getSelectionModel().selectPrevious();\r\n                } else {\r\n                    getTableView().getSelectionModel().selectNext();\r\n                }\r\n                e.consume();\r\n                break;\r\n            case UP:\r\n                getTableView().getSelectionModel().selectAboveCell();\r\n                e.consume();\r\n                break;\r\n            case DOWN:\r\n                getTableView().getSelectionModel().selectBelowCell();\r\n                e.consume();\r\n                break;\r\n            default:\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n  [1]: https://bugs.openjdk.java.net/browse/JDK-8089311\r\n  [2]: https://bugs.openjdk.java.net/browse/JDK-8089311?focusedCommentId=13810219&amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-13810219","title":"How to enable commit on focusLost for TableView/TreeTableView?","body":"<p>I prefer building as much as possible on the existing code, and since this behaviour is still not fixed w/ Java 10, here's a more general approach based on <a href=\"https://bugs.openjdk.java.net/browse/JDK-8089311?focusedCommentId=13810219&amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-13810219\" rel=\"nofollow noreferrer\">J. Duke's solution</a> from bug: <a href=\"https://bugs.openjdk.java.net/browse/JDK-8089311\" rel=\"nofollow noreferrer\">JDK-8089311</a>.</p>\n\n<pre><code>public class TextFieldTableCellAutoCmt&lt;S, T&gt; extends TextFieldTableCell&lt;S, T&gt; {\n\n    protected TextField txtFldRef;\n    protected boolean isEdit;\n\n    public TextFieldTableCellAutoCmt() {\n        this(null);\n    }\n\n    public TextFieldTableCellAutoCmt(final StringConverter&lt;T&gt; conv) {\n        super(conv);\n    }\n\n    public static &lt;S&gt; Callback&lt;TableColumn&lt;S, String&gt;, TableCell&lt;S, String&gt;&gt; forTableColumn() {\n        return forTableColumn(new DefaultStringConverter());\n    }\n\n    public static &lt;S, T&gt; Callback&lt;TableColumn&lt;S, T&gt;, TableCell&lt;S, T&gt;&gt; forTableColumn(final StringConverter&lt;T&gt; conv) {\n        return list -&gt; new TextFieldTableCellAutoCmt&lt;S, T&gt;(conv);\n    }\n\n    @Override\n    public void startEdit() {\n        super.startEdit();\n        isEdit = true;\n        if (updTxtFldRef()) {\n            txtFldRef.focusedProperty().addListener(this::onFocusChg);\n            txtFldRef.setOnKeyPressed(this::onKeyPrs);\n        }\n    }\n\n    /**\n     * @return whether {@link #txtFldRef} has been changed\n     */\n    protected boolean updTxtFldRef() {\n        final Node g = getGraphic();\n        final boolean isUpd = g != null &amp;&amp; txtFldRef != g;\n        if (isUpd) {\n            txtFldRef = g instanceof TextField ? (TextField) g : null;\n        }\n        return isUpd;\n    }\n\n    @Override\n    public void commitEdit(final T valNew) {\n        if (isEditing()) {\n            super.commitEdit(valNew);\n        } else {\n            final TableView&lt;S&gt; tbl = getTableView();\n            if (tbl != null) {\n                final TablePosition&lt;S, T&gt; pos = new TablePosition&lt;&gt;(tbl, getTableRow().getIndex(), getTableColumn()); // instead of tbl.getEditingCell()\n                final CellEditEvent&lt;S, T&gt; ev  = new CellEditEvent&lt;&gt;(tbl, pos, TableColumn.editCommitEvent(), valNew);\n                Event.fireEvent(getTableColumn(), ev);\n            }\n            updateItem(valNew, false);\n            if (tbl != null) {\n                tbl.edit(-1, null);\n            }\n            // TODO ControlUtils.requestFocusOnControlOnlyIfCurrentFocusOwnerIsChild(tbl);\n        }\n    }\n\n    public void onFocusChg(final ObservableValue&lt;? extends Boolean&gt; obs, final boolean v0, final boolean v1) {\n        if (isEdit &amp;&amp; !v1) {\n            commitEdit(getConverter().fromString(txtFldRef.getText()));\n        }\n    }\n\n    protected void onKeyPrs(final KeyEvent e) {\n        switch (e.getCode()) {\n        case ESCAPE:\n            isEdit = false;\n            cancelEdit(); // see CellUtils#createTextField(...)\n            e.consume();\n            break;\n        case TAB:\n            if (e.isShiftDown()) {\n                getTableView().getSelectionModel().selectPrevious();\n            } else {\n                getTableView().getSelectionModel().selectNext();\n            }\n            e.consume();\n            break;\n        case UP:\n            getTableView().getSelectionModel().selectAboveCell();\n            e.consume();\n            break;\n        case DOWN:\n            getTableView().getSelectionModel().selectBelowCell();\n            e.consume();\n            break;\n        default:\n            break;\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23551,"reputation":30672,"user_id":59087,"accept_rate":99,"display_name":"Dave Jarvis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640068830,"creation_date":1640068830,"answer_id":70431526,"question_id":24694616,"body_markdown":"You&#39;ll need:\r\n\r\n* a `CellEditor`;\r\n* a `TableCell` or `TreeCell` subclass; and\r\n* a cell factory method.\r\n\r\n\r\nFor more details on the classes shown below, see:\r\n\r\n* [CellEditor](https://github.com/DaveJarvis/keenwrite/tree/master/src/main/java/com/keenwrite/ui/common)\r\n* [AltTableCell](https://github.com/DaveJarvis/keenwrite/tree/master/src/main/java/com/keenwrite/ui/table)\r\n* [AltTreeCell](https://github.com/DaveJarvis/keenwrite/tree/master/src/main/java/com/keenwrite/ui/tree)\r\n\r\n# CellEditor\r\n\r\nThe `CellEditor` is responsible for handling the &lt;kbd&gt;Esc&lt;/kbd&gt; and &lt;kbd&gt;Enter&lt;/kbd&gt;, as well as focus loss:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    import javafx.beans.property.ObjectProperty;\r\n    import javafx.beans.property.Property;\r\n    import javafx.beans.property.SimpleStringProperty;\r\n    import javafx.beans.value.ChangeListener;\r\n    import javafx.beans.value.ObservableValue;\r\n    import javafx.event.EventHandler;\r\n    import javafx.scene.Node;\r\n    import javafx.scene.control.TableCell;\r\n    import javafx.scene.control.TextField;\r\n    import javafx.scene.control.TreeCell;\r\n    import javafx.scene.input.KeyEvent;\r\n    \r\n    import java.util.function.Consumer;\r\n    \r\n    import static javafx.application.Platform.runLater;\r\n    import static javafx.scene.input.KeyCode.ENTER;\r\n    import static javafx.scene.input.KeyCode.TAB;\r\n    import static javafx.scene.input.KeyEvent.KEY_RELEASED;\r\n    \r\n    public class CellEditor {\r\n      private FocusListener mFocusListener;\r\n      private final Property&lt;String&gt; mInputText = new SimpleStringProperty();\r\n      private final Consumer&lt;String&gt; mConsumer;\r\n    \r\n      /**\r\n       * Responsible for accepting the text when users press the Enter or Tab key.\r\n       */\r\n      private class KeyHandler implements EventHandler&lt;KeyEvent&gt; {\r\n        @Override\r\n        public void handle( final KeyEvent event ) {\r\n          if( event.getCode() == ENTER || event.getCode() == TAB ) {\r\n            commitEdit();\r\n            event.consume();\r\n          }\r\n        }\r\n      }\r\n    \r\n      /**\r\n       * Responsible for committing edits when focus is lost. This will also\r\n       * deselect the input field when focus is gained so that typing text won&#39;t\r\n       * overwrite the entire existing text.\r\n       */\r\n      private class FocusListener implements ChangeListener&lt;Boolean&gt; {\r\n        private final TextField mInput;\r\n    \r\n        private FocusListener( final TextField input ) {\r\n          mInput = input;\r\n        }\r\n    \r\n        @Override\r\n        public void changed(\r\n          final ObservableValue&lt;? extends Boolean&gt; c,\r\n          final Boolean endedFocus, final Boolean beganFocus ) {\r\n    \r\n          if( beganFocus ) {\r\n            runLater( mInput::deselect );\r\n          }\r\n          else if( endedFocus ) {\r\n            commitEdit();\r\n          }\r\n        }\r\n      }\r\n    \r\n      /**\r\n       * Generalized cell editor suitable for use with {@link TableCell} or\r\n       * {@link TreeCell} instances.\r\n       *\r\n       * @param consumer        Converts the field input text to the required\r\n       *                        data type.\r\n       * @param graphicProperty Defines the graphical user input field.\r\n       */\r\n      public CellEditor(\r\n        final Consumer&lt;String&gt; consumer,\r\n        final ObjectProperty&lt;Node&gt; graphicProperty ) {\r\n        assert consumer != null;\r\n        mConsumer = consumer;\r\n    \r\n        init( graphicProperty );\r\n      }\r\n    \r\n      private void init( final ObjectProperty&lt;Node&gt; graphicProperty ) {\r\n        final var keyHandler = new KeyHandler();\r\n    \r\n        // When the text field is added as the graphics context, we hook into\r\n        // the changed value to get a handle on the text field. From there it is\r\n        // possible to add change the keyboard and focus behaviours.\r\n        graphicProperty.addListener( ( c, o, n ) -&gt; {\r\n          if( o instanceof TextField ) {\r\n            o.removeEventHandler( KEY_RELEASED, keyHandler );\r\n            o.focusedProperty().removeListener( mFocusListener );\r\n          }\r\n    \r\n          if( n instanceof final TextField input ) {\r\n            n.addEventFilter( KEY_RELEASED, keyHandler );\r\n            mInputText.bind( input.textProperty() );\r\n            mFocusListener = new FocusListener( input );\r\n            n.focusedProperty().addListener( mFocusListener );\r\n          }\r\n        } );\r\n      }\r\n    \r\n      private void commitEdit() {\r\n        mConsumer.accept( mInputText.getValue() );\r\n      }\r\n    }\r\n\r\n# AltTableCell\r\n\r\nThe only difference between an `AltTableCell` and an `AltTreeCell` is the inheritance hierarchy. They are otherwise identical:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    public class AltTableCell&lt;S, T&gt; extends TextFieldTableCell&lt;S, T&gt; {\r\n      public AltTableCell( final StringConverter&lt;T&gt; converter ) {\r\n        super( converter );\r\n    \r\n        assert converter != null;\r\n    \r\n        new CellEditor(\r\n          input -&gt; commitEdit( getConverter().fromString( input ) ),\r\n          graphicProperty()\r\n        );\r\n      }\r\n    }\r\n\r\nTo be concrete, the `AltTreeCell` would begin:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    public class AltTreeCell&lt;T&gt; extends TextFieldTreeCell&lt;T&gt;\r\n\r\n# Cell factory method\r\n\r\nAssign the alternate table cell to the table column&#39;s cell factory:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    final var column = new TableColumn&lt;Entry&lt;K, V&gt;, T&gt;( label );\r\n\r\n    column.setEditable( true );\r\n    column.setCellFactory(\r\n      tableColumn -&gt; new AltTableCell&lt;&gt;(\r\n        new StringConverter&lt;&gt;() {\r\n          @Override\r\n          public String toString( final T object ) {\r\n            return object.toString();\r\n          }\r\n\r\n          @Override\r\n          public T fromString( final String string ) {\r\n            return (T) string;\r\n          }\r\n        }\r\n      )\r\n    );\r\n\r\nFor a tree cell, it&#39;s fairly similar:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    final var view = new TreeView&lt;&gt;(); // ...\r\n\r\n    view.setEditable( true );\r\n    view.setCellFactory( treeView -&gt; new AltTreeCell&lt;&gt;( converter ) );\r\n","title":"How to enable commit on focusLost for TableView/TreeTableView?","body":"<p>You'll need:</p>\n<ul>\n<li>a <code>CellEditor</code>;</li>\n<li>a <code>TableCell</code> or <code>TreeCell</code> subclass; and</li>\n<li>a cell factory method.</li>\n</ul>\n<p>For more details on the classes shown below, see:</p>\n<ul>\n<li><a href=\"https://github.com/DaveJarvis/keenwrite/tree/master/src/main/java/com/keenwrite/ui/common\" rel=\"nofollow noreferrer\">CellEditor</a></li>\n<li><a href=\"https://github.com/DaveJarvis/keenwrite/tree/master/src/main/java/com/keenwrite/ui/table\" rel=\"nofollow noreferrer\">AltTableCell</a></li>\n<li><a href=\"https://github.com/DaveJarvis/keenwrite/tree/master/src/main/java/com/keenwrite/ui/tree\" rel=\"nofollow noreferrer\">AltTreeCell</a></li>\n</ul>\n<h1>CellEditor</h1>\n<p>The <code>CellEditor</code> is responsible for handling the <kbd>Esc</kbd> and <kbd>Enter</kbd>, as well as focus loss:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import javafx.beans.property.ObjectProperty;\nimport javafx.beans.property.Property;\nimport javafx.beans.property.SimpleStringProperty;\nimport javafx.beans.value.ChangeListener;\nimport javafx.beans.value.ObservableValue;\nimport javafx.event.EventHandler;\nimport javafx.scene.Node;\nimport javafx.scene.control.TableCell;\nimport javafx.scene.control.TextField;\nimport javafx.scene.control.TreeCell;\nimport javafx.scene.input.KeyEvent;\n\nimport java.util.function.Consumer;\n\nimport static javafx.application.Platform.runLater;\nimport static javafx.scene.input.KeyCode.ENTER;\nimport static javafx.scene.input.KeyCode.TAB;\nimport static javafx.scene.input.KeyEvent.KEY_RELEASED;\n\npublic class CellEditor {\n  private FocusListener mFocusListener;\n  private final Property&lt;String&gt; mInputText = new SimpleStringProperty();\n  private final Consumer&lt;String&gt; mConsumer;\n\n  /**\n   * Responsible for accepting the text when users press the Enter or Tab key.\n   */\n  private class KeyHandler implements EventHandler&lt;KeyEvent&gt; {\n    @Override\n    public void handle( final KeyEvent event ) {\n      if( event.getCode() == ENTER || event.getCode() == TAB ) {\n        commitEdit();\n        event.consume();\n      }\n    }\n  }\n\n  /**\n   * Responsible for committing edits when focus is lost. This will also\n   * deselect the input field when focus is gained so that typing text won't\n   * overwrite the entire existing text.\n   */\n  private class FocusListener implements ChangeListener&lt;Boolean&gt; {\n    private final TextField mInput;\n\n    private FocusListener( final TextField input ) {\n      mInput = input;\n    }\n\n    @Override\n    public void changed(\n      final ObservableValue&lt;? extends Boolean&gt; c,\n      final Boolean endedFocus, final Boolean beganFocus ) {\n\n      if( beganFocus ) {\n        runLater( mInput::deselect );\n      }\n      else if( endedFocus ) {\n        commitEdit();\n      }\n    }\n  }\n\n  /**\n   * Generalized cell editor suitable for use with {@link TableCell} or\n   * {@link TreeCell} instances.\n   *\n   * @param consumer        Converts the field input text to the required\n   *                        data type.\n   * @param graphicProperty Defines the graphical user input field.\n   */\n  public CellEditor(\n    final Consumer&lt;String&gt; consumer,\n    final ObjectProperty&lt;Node&gt; graphicProperty ) {\n    assert consumer != null;\n    mConsumer = consumer;\n\n    init( graphicProperty );\n  }\n\n  private void init( final ObjectProperty&lt;Node&gt; graphicProperty ) {\n    final var keyHandler = new KeyHandler();\n\n    // When the text field is added as the graphics context, we hook into\n    // the changed value to get a handle on the text field. From there it is\n    // possible to add change the keyboard and focus behaviours.\n    graphicProperty.addListener( ( c, o, n ) -&gt; {\n      if( o instanceof TextField ) {\n        o.removeEventHandler( KEY_RELEASED, keyHandler );\n        o.focusedProperty().removeListener( mFocusListener );\n      }\n\n      if( n instanceof final TextField input ) {\n        n.addEventFilter( KEY_RELEASED, keyHandler );\n        mInputText.bind( input.textProperty() );\n        mFocusListener = new FocusListener( input );\n        n.focusedProperty().addListener( mFocusListener );\n      }\n    } );\n  }\n\n  private void commitEdit() {\n    mConsumer.accept( mInputText.getValue() );\n  }\n}\n</code></pre>\n<h1>AltTableCell</h1>\n<p>The only difference between an <code>AltTableCell</code> and an <code>AltTreeCell</code> is the inheritance hierarchy. They are otherwise identical:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class AltTableCell&lt;S, T&gt; extends TextFieldTableCell&lt;S, T&gt; {\n  public AltTableCell( final StringConverter&lt;T&gt; converter ) {\n    super( converter );\n\n    assert converter != null;\n\n    new CellEditor(\n      input -&gt; commitEdit( getConverter().fromString( input ) ),\n      graphicProperty()\n    );\n  }\n}\n</code></pre>\n<p>To be concrete, the <code>AltTreeCell</code> would begin:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class AltTreeCell&lt;T&gt; extends TextFieldTreeCell&lt;T&gt;\n</code></pre>\n<h1>Cell factory method</h1>\n<p>Assign the alternate table cell to the table column's cell factory:</p>\n<pre class=\"lang-java prettyprint-override\"><code>final var column = new TableColumn&lt;Entry&lt;K, V&gt;, T&gt;( label );\n\ncolumn.setEditable( true );\ncolumn.setCellFactory(\n  tableColumn -&gt; new AltTableCell&lt;&gt;(\n    new StringConverter&lt;&gt;() {\n      @Override\n      public String toString( final T object ) {\n        return object.toString();\n      }\n\n      @Override\n      public T fromString( final String string ) {\n        return (T) string;\n      }\n    }\n  )\n);\n</code></pre>\n<p>For a tree cell, it's fairly similar:</p>\n<pre class=\"lang-java prettyprint-override\"><code>final var view = new TreeView&lt;&gt;(); // ...\n\nview.setEditable( true );\nview.setCellFactory( treeView -&gt; new AltTreeCell&lt;&gt;( converter ) );\n</code></pre>\n"}],"owner":{"account_id":72918,"reputation":6140,"user_id":210290,"accept_rate":85,"display_name":"crusam"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10419,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"answer_count":7,"score":15,"last_activity_date":1640068830,"creation_date":1405071364,"question_id":24694616,"body_markdown":"Is there any simple approach to let the TreeTableView (or TableView) try to commit values on focus lost?\r\n\r\nUnfortunatly I didn&#39;t succed with any default-implementations of javafx TableCellFactories, which is why I tried my own TreeTableCell implementations and also some different tableCell implementations like the one from [Graham Smith][1], which seemed the most straight forward, since it already implemented a hook for focus lost, but nevertheless the value is never committed and the userchanges are resetted to the original value.\r\n\r\nMy guess is, whenever focus is lost, the editingProperty of the affected Cell is always already false which causes the Cell never to commit a value on focusLost. Here the relevant part from the original (oracle-)TreeTableCell Implementation (8u20ea), which causes my approaches to fail:\r\n\r\n\r\n     @Override public void commitEdit(T newValue) {\r\n            if (! isEditing()) return; // &lt;-- here my approaches are blocked, because on focus lost its not editing anymore.\r\n            \r\n            final TreeTableView&lt;S&gt; table = getTreeTableView();\r\n            if (table != null) {\r\n                @SuppressWarnings(&quot;unchecked&quot;)\r\n                TreeTablePosition&lt;S,T&gt; editingCell = (TreeTablePosition&lt;S,T&gt;) table.getEditingCell();\r\n                \r\n                // Inform the TableView of the edit being ready to be committed.\r\n                CellEditEvent&lt;S,T&gt; editEvent = new CellEditEvent&lt;S,T&gt;(\r\n                    table,\r\n                    editingCell,\r\n                    TreeTableColumn.&lt;S,T&gt;editCommitEvent(),\r\n                    newValue\r\n                );\r\n    \r\n                Event.fireEvent(getTableColumn(), editEvent);\r\n            }\r\n    \r\n            // inform parent classes of the commit, so that they can switch us\r\n            // out of the editing state.\r\n            // This MUST come before the updateItem call below, otherwise it will\r\n            // call cancelEdit(), resulting in both commit and cancel events being\r\n            // fired (as identified in RT-29650)\r\n            super.commitEdit(newValue);\r\n    \r\n            // update the item within this cell, so that it represents the new value\r\n            updateItem(newValue, false);\r\n    \r\n            if (table != null) {\r\n                // reset the editing cell on the TableView\r\n                table.edit(-1, null);\r\n    \r\n                // request focus back onto the table, only if the current focus\r\n                // owner has the table as a parent (otherwise the user might have\r\n                // clicked out of the table entirely and given focus to something else.\r\n                // It would be rude of us to request it back again.\r\n                ControlUtils.requestFocusOnControlOnlyIfCurrentFocusOwnerIsChild(table);\r\n            }\r\n        }\r\n\r\nI succeded with overriding this method and commiting the value &quot;by hand&quot; before the original commitEdit() method is called, but this causes the commit on keys like enter to commit the value twice (on key + on focus lost). Moreover I dont really like my approach at all, so I wonder, if anyone else has solved this in a &quot;nicer&quot; way?\r\n\r\n\r\n  [1]: http://www.wobblycogs.co.uk/index.php/computing/javafx/93-complete-javafx-2-editable-table-example","title":"How to enable commit on focusLost for TableView/TreeTableView?","body":"<p>Is there any simple approach to let the TreeTableView (or TableView) try to commit values on focus lost?</p>\n\n<p>Unfortunatly I didn't succed with any default-implementations of javafx TableCellFactories, which is why I tried my own TreeTableCell implementations and also some different tableCell implementations like the one from <a href=\"http://www.wobblycogs.co.uk/index.php/computing/javafx/93-complete-javafx-2-editable-table-example\">Graham Smith</a>, which seemed the most straight forward, since it already implemented a hook for focus lost, but nevertheless the value is never committed and the userchanges are resetted to the original value.</p>\n\n<p>My guess is, whenever focus is lost, the editingProperty of the affected Cell is always already false which causes the Cell never to commit a value on focusLost. Here the relevant part from the original (oracle-)TreeTableCell Implementation (8u20ea), which causes my approaches to fail:</p>\n\n<pre><code> @Override public void commitEdit(T newValue) {\n        if (! isEditing()) return; // &lt;-- here my approaches are blocked, because on focus lost its not editing anymore.\n\n        final TreeTableView&lt;S&gt; table = getTreeTableView();\n        if (table != null) {\n            @SuppressWarnings(\"unchecked\")\n            TreeTablePosition&lt;S,T&gt; editingCell = (TreeTablePosition&lt;S,T&gt;) table.getEditingCell();\n\n            // Inform the TableView of the edit being ready to be committed.\n            CellEditEvent&lt;S,T&gt; editEvent = new CellEditEvent&lt;S,T&gt;(\n                table,\n                editingCell,\n                TreeTableColumn.&lt;S,T&gt;editCommitEvent(),\n                newValue\n            );\n\n            Event.fireEvent(getTableColumn(), editEvent);\n        }\n\n        // inform parent classes of the commit, so that they can switch us\n        // out of the editing state.\n        // This MUST come before the updateItem call below, otherwise it will\n        // call cancelEdit(), resulting in both commit and cancel events being\n        // fired (as identified in RT-29650)\n        super.commitEdit(newValue);\n\n        // update the item within this cell, so that it represents the new value\n        updateItem(newValue, false);\n\n        if (table != null) {\n            // reset the editing cell on the TableView\n            table.edit(-1, null);\n\n            // request focus back onto the table, only if the current focus\n            // owner has the table as a parent (otherwise the user might have\n            // clicked out of the table entirely and given focus to something else.\n            // It would be rude of us to request it back again.\n            ControlUtils.requestFocusOnControlOnlyIfCurrentFocusOwnerIsChild(table);\n        }\n    }\n</code></pre>\n\n<p>I succeded with overriding this method and commiting the value \"by hand\" before the original commitEdit() method is called, but this causes the commit on keys like enter to commit the value twice (on key + on focus lost). Moreover I dont really like my approach at all, so I wonder, if anyone else has solved this in a \"nicer\" way?</p>\n"},{"tags":["java","certificate","keystore","x509","azure-keyvault"],"comments":[{"owner":{"account_id":8497217,"reputation":37834,"user_id":6371459,"accept_rate":25,"display_name":"pedrofb"},"score":0,"creation_date":1594101827,"post_id":62701407,"comment_id":111000016,"body_markdown":"`keyStore.load()` requires a PKCS#12 file, but you are providing a privateKey, which is usually in pcks1 or pkcs8 (java needs pcks8). Your private key doesn&#39;t seem to be in pkcs8 either because you converted it from a string, and pkcs8 is binary (DER encoding). `String privateKey = secret.getValue ();` I have looked at the AzureKeyVault API for java and it is not clear what `secret.getValue ()` returns. Maybe you have to look for an example, or if you prefer, paste an example in the question and take a look at the content","body":"<code>keyStore.load()</code> requires a PKCS#12 file, but you are providing a privateKey, which is usually in pcks1 or pkcs8 (java needs pcks8). Your private key doesn&#39;t seem to be in pkcs8 either because you converted it from a string, and pkcs8 is binary (DER encoding). <code>String privateKey = secret.getValue ();</code> I have looked at the AzureKeyVault API for java and it is not clear what <code>secret.getValue ()</code> returns. Maybe you have to look for an example, or if you prefer, paste an example in the question and take a look at the content"},{"owner":{"account_id":496401,"reputation":25022,"user_id":4148708,"accept_rate":70,"display_name":"evilSnobu"},"score":0,"creation_date":1594111498,"post_id":62701407,"comment_id":111004087,"body_markdown":"`secret.getValue()` returns a string that starts with &quot;MII..&quot;, so base64. If i base64 decode that i get a bunch of binary. Is that DER?","body":"<code>secret.getValue()</code> returns a string that starts with &quot;MII..&quot;, so base64. If i base64 decode that i get a bunch of binary. Is that DER?"},{"owner":{"account_id":8497217,"reputation":37834,"user_id":6371459,"accept_rate":25,"display_name":"pedrofb"},"score":0,"creation_date":1594113631,"post_id":62701407,"comment_id":111005228,"body_markdown":"Yes, it is base64. To get binary DER just decode it. What is not clear is if it is a private key or a pcks12. If `KeyStore.load()` still doesn&#39;t work, they try to load the private key directly. https://stackoverflow.com/a/19387517/6371459","body":"Yes, it is base64. To get binary DER just decode it. What is not clear is if it is a private key or a pcks12. If <code>KeyStore.load()</code> still doesn&#39;t work, they try to load the private key directly. <a href=\"https://stackoverflow.com/a/19387517/6371459\">stackoverflow.com/a/19387517/6371459</a>"},{"owner":{"account_id":496401,"reputation":25022,"user_id":4148708,"accept_rate":70,"display_name":"evilSnobu"},"score":0,"creation_date":1594114236,"post_id":62701407,"comment_id":111005537,"body_markdown":"Alright, but `SSLContexts.custom().loadKeyMaterial(...` expects a KeyStore object, so i guess i&#39;ve gone nowhere.","body":"Alright, but <code>SSLContexts.custom().loadKeyMaterial(...</code> expects a KeyStore object, so i guess i&#39;ve gone nowhere."},{"owner":{"account_id":8497217,"reputation":37834,"user_id":6371459,"accept_rate":25,"display_name":"pedrofb"},"score":1,"creation_date":1594123058,"post_id":62701407,"comment_id":111010079,"body_markdown":"You can add programmatically an entry to your `KeyStore` using `PrivateKey` and  `Certificate`. Use `KeyStore.load(null,null)` and `keystore.setKeyEntry()`. Alternatively you can download the keying material and create a pkcs12 file using openssl or KeystoreExplorer tool","body":"You can add programmatically an entry to your <code>KeyStore</code> using <code>PrivateKey</code> and  <code>Certificate</code>. Use <code>KeyStore.load(null,null)</code> and <code>keystore.setKeyEntry()</code>. Alternatively you can download the keying material and create a pkcs12 file using openssl or KeystoreExplorer tool"},{"owner":{"account_id":496401,"reputation":25022,"user_id":4148708,"accept_rate":70,"display_name":"evilSnobu"},"score":0,"creation_date":1594146642,"post_id":62701407,"comment_id":111022823,"body_markdown":"Thanks. I think i&#39;m very close, however now i&#39;m getting a `java.security.InvalidKeyException: IOException : version mismatch: (supported:     00, parsed:     03` for the private key which i&#39;m not sure what it means. My key is RSA2048 generated by `openssl req -x509 -days 365 -newkey rsa:2048 -keyout key.pem -out cert.pem`","body":"Thanks. I think i&#39;m very close, however now i&#39;m getting a <code>java.security.InvalidKeyException: IOException : version mismatch: (supported:     00, parsed:     03</code> for the private key which i&#39;m not sure what it means. My key is RSA2048 generated by <code>openssl req -x509 -days 365 -newkey rsa:2048 -keyout key.pem -out cert.pem</code>"},{"owner":{"account_id":8497217,"reputation":37834,"user_id":6371459,"accept_rate":25,"display_name":"pedrofb"},"score":0,"creation_date":1594150084,"post_id":62701407,"comment_id":111024240,"body_markdown":"Openssl generates private keys in pkcs#1 format, but java only supports pkcs#8. You probably need to convert the key to pkcs8 format using openssl or bouncycastle. See https://stackoverflow.com/a/7473874/6371459 or https://stackoverflow.com/a/41953072/6371459","body":"Openssl generates private keys in pkcs#1 format, but java only supports pkcs#8. You probably need to convert the key to pkcs8 format using openssl or bouncycastle. See <a href=\"https://stackoverflow.com/a/7473874/6371459\">stackoverflow.com/a/7473874/6371459</a> or <a href=\"https://stackoverflow.com/a/41953072/6371459\">stackoverflow.com/a/41953072/6371459</a>"},{"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1594604043,"post_id":62701407,"comment_id":111173953,"body_markdown":"@pedrofb: that&#39;s mostly wrong for OpenSSL since 1.0.0 in 2010. `genrsa rsa` still write PKCS1, but `genpkey pkey pkcs12 (import)` and (as here) `req -newkey` all write PKCS8 for PEM (though not DER, weirdly). But _both_ PKCS1-private _and_ PKCS8-clear have version=00, or 01 for rfc5958 which isn&#39;t really PKCS8 and anyway neither OpenSSL nor JCE supports; only PKCS12 has version=03, suggesting this was (base64&#39;ed) PKCS12 after all, but then I don&#39;t know why KeyStore type PKCS12 had trouble reading it, without looking in detail at data that shouldn&#39;t be made public.","body":"@pedrofb: that&#39;s mostly wrong for OpenSSL since 1.0.0 in 2010. <code>genrsa rsa</code> still write PKCS1, but <code>genpkey pkey pkcs12 (import)</code> and (as here) <code>req -newkey</code> all write PKCS8 for PEM (though not DER, weirdly). But <i>both</i> PKCS1-private <i>and</i> PKCS8-clear have version=00, or 01 for rfc5958 which isn&#39;t really PKCS8 and anyway neither OpenSSL nor JCE supports; only PKCS12 has version=03, suggesting this was (base64&#39;ed) PKCS12 after all, but then I don&#39;t know why KeyStore type PKCS12 had trouble reading it, without looking in detail at data that shouldn&#39;t be made public."},{"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1594604115,"post_id":62701407,"comment_id":111173961,"body_markdown":"Snobu: can you reproduce the problem with a _throwaway_ key that you don&#39;t need to keep secure and can safely post for us to look at? And specify Java version(s)?","body":"Snobu: can you reproduce the problem with a <i>throwaway</i> key that you don&#39;t need to keep secure and can safely post for us to look at? And specify Java version(s)?"},{"owner":{"account_id":496401,"reputation":25022,"user_id":4148708,"accept_rate":70,"display_name":"evilSnobu"},"score":0,"creation_date":1594658929,"post_id":62701407,"comment_id":111196044,"body_markdown":"Here it is: https://gist.github.com/snobu/ebf9258717691ac93784398a9b54922b (as `.pem`). This is the exact private key that makes the code throw version mismatch `supported: 00, parsed: 03`.","body":"Here it is: <a href=\"https://gist.github.com/snobu/ebf9258717691ac93784398a9b54922b\" rel=\"nofollow noreferrer\">gist.github.com/snobu/ebf9258717691ac93784398a9b54922b</a> (as <code>.pem</code>). This is the exact private key that makes the code throw version mismatch <code>supported: 00, parsed: 03</code>."},{"owner":{"account_id":8497217,"reputation":37834,"user_id":6371459,"accept_rate":25,"display_name":"pedrofb"},"score":0,"creation_date":1594805280,"post_id":62701407,"comment_id":111252405,"body_markdown":"@dave_thompson_085, the documentation doesn&#39;t make any reference to the type of key it generates, but I&#39;ve tested it and you&#39;re right","body":"@dave_thompson_085, the documentation doesn&#39;t make any reference to the type of key it generates, but I&#39;ve tested it and you&#39;re right"},{"owner":{"account_id":8497217,"reputation":37834,"user_id":6371459,"accept_rate":25,"display_name":"pedrofb"},"score":0,"creation_date":1594805395,"post_id":62701407,"comment_id":111252465,"body_markdown":"@evilSnobu, your key is pkcs8 so you should have no problem loading it as a `PrivateKey` object (not using `KeyStore`) as I indicated above","body":"@evilSnobu, your key is pkcs8 so you should have no problem loading it as a <code>PrivateKey</code> object (not using <code>KeyStore</code>) as I indicated above"},{"owner":{"account_id":24662336,"reputation":504,"user_id":18558424,"display_name":"Abe"},"score":0,"creation_date":1677561785,"post_id":62701407,"comment_id":133357579,"body_markdown":"@evilSnobu Did you figure out what secret.getValue() returns? I have same issue. My testing shows it is not any of certificate/public/private key https://stackoverflow.com/questions/75577031/what-is- it-that-i-get-in-java-from-azure-keyvault-certificate","body":"@evilSnobu Did you figure out what secret.getValue() returns? I have same issue. My testing shows it is not any of certificate/public/private key <a href=\"https://stackoverflow.com/questions/75577031/what-is-\">stackoverflow.com/questions/75577031/what-is-</a> it-that-i-get-in-java-from-azure-keyvault-certificate"},{"owner":{"account_id":496401,"reputation":25022,"user_id":4148708,"accept_rate":70,"display_name":"evilSnobu"},"score":0,"creation_date":1677847008,"post_id":62701407,"comment_id":133422488,"body_markdown":"Sorry, no, it was so long ago i don&#39;t even remember why i needed it :) You could revive this issue here - https://github.com/Azure/azure-sdk-for-java/issues/6681 - hopefully it gets more traction this time around.","body":"Sorry, no, it was so long ago i don&#39;t even remember why i needed it :) You could revive this issue here - <a href=\"https://github.com/Azure/azure-sdk-for-java/issues/6681\" rel=\"nofollow noreferrer\">github.com/Azure/azure-sdk-for-java/issues/6681</a> - hopefully it gets more traction this time around."}],"answers":[{"tags":[],"owner":{"account_id":11125108,"reputation":5965,"user_id":8166854,"display_name":"Michael Fehr"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1594456878,"creation_date":1594456878,"answer_id":62847027,"question_id":62701407,"body_markdown":"It sounds to me that the import is a &quot;one time job&quot; and do not need to get solved programmatically.\r\nI recommend (same as @pedrofb) that you use the Keystore Explorer for this job - it worked perfectly in my testcase:\r\n\r\nHere are my steps to do the import, all files are available in my GitHub-Repo (https://github.com/java-crypto/Stackoverflow/tree/master/Load_certificate_and_private_key_into_Java_KeyStore):\r\n\r\n1) create the private key + certificate file with open ssl:\r\n\r\nopenssl req -x509 -days 365 -newkey rsa:2048 -keyout key.pem -out cert.pem\r\n\r\nThis will create the 2 files key.pem (encrypted private key) and cert.pem (certificate with public key). I used some sample data and the password for key.pem is 123456.\r\n\r\n2) download the Keystore Explorer from https://keystore-explorer.org/downloads.html\r\n\r\n3) run explorer and create a new KeyStore\r\n\r\n[![create new keystore][1]][1]\r\n\r\n4) select KeyStore type = PKCS12\r\n\r\n[![select Key Store type][2]][2]\r\n\r\n5) Import KeyPair with &quot;Tools&quot; - &quot;Import Key Pair&quot;\r\n\r\n[![import Key Pair][3]][3]\r\n\r\n6) Select Key Pair Type as PKCS #8\r\n\r\n[![select Key Pair type][4]][4]\r\n\r\n7) Set the password (123456) and choose the key- and cert-file and press &quot;Import&quot;\r\n\r\n[![set the password][5]][5]\r\n\r\n8) Choose the alias for the key (default is the given email in the certificate\r\n\r\n[![choose an alias][6]][6]\r\n\r\n9) Set a Key Pair Entry password: kpe123456\r\n\r\n[![set Key Pair Entry password][7]][7]\r\n\r\n10) Message: Key Pair Import successful\r\n\r\n[![Message Key Pair Import successful][8]][8]\r\n\r\n[![save your new keystore][9]][9]\r\n\r\n11) save your new keystore with &quot;File&quot; - &quot;Save as&quot;\r\n\r\n[![save your new Key Store][10]][10]\r\n\r\n12) Set a password for the Key Store: ks123456\r\n\r\n[![Set a password for the Key Store][11]][11]\r\n\r\n13) choose path + filename: keystore.p12\r\n\r\n14) ready - your private and certificate are imported in the new created Key Store keystore.p12\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/icKUX.png\r\n  [2]: https://i.stack.imgur.com/a9oOj.png\r\n  [3]: https://i.stack.imgur.com/YPkDn.png\r\n  [4]: https://i.stack.imgur.com/A75HB.png\r\n  [5]: https://i.stack.imgur.com/JzpeJ.png\r\n  [6]: https://i.stack.imgur.com/2W9BJ.png\r\n  [7]: https://i.stack.imgur.com/W5fmF.png\r\n  [8]: https://i.stack.imgur.com/xcLvl.png\r\n  [9]: https://i.stack.imgur.com/KtKoa.png\r\n  [10]: https://i.stack.imgur.com/WbsXQ.png\r\n  [11]: https://i.stack.imgur.com/8iTiu.png","title":"Load certificate and private key into Java KeyStore","body":"<p>It sounds to me that the import is a &quot;one time job&quot; and do not need to get solved programmatically.\nI recommend (same as @pedrofb) that you use the Keystore Explorer for this job - it worked perfectly in my testcase:</p>\n<p>Here are my steps to do the import, all files are available in my GitHub-Repo (<a href=\"https://github.com/java-crypto/Stackoverflow/tree/master/Load_certificate_and_private_key_into_Java_KeyStore\" rel=\"nofollow noreferrer\">https://github.com/java-crypto/Stackoverflow/tree/master/Load_certificate_and_private_key_into_Java_KeyStore</a>):</p>\n<ol>\n<li>create the private key + certificate file with open ssl:</li>\n</ol>\n<p>openssl req -x509 -days 365 -newkey rsa:2048 -keyout key.pem -out cert.pem</p>\n<p>This will create the 2 files key.pem (encrypted private key) and cert.pem (certificate with public key). I used some sample data and the password for key.pem is 123456.</p>\n<ol start=\"2\">\n<li><p>download the Keystore Explorer from <a href=\"https://keystore-explorer.org/downloads.html\" rel=\"nofollow noreferrer\">https://keystore-explorer.org/downloads.html</a></p>\n</li>\n<li><p>run explorer and create a new KeyStore</p>\n</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/icKUX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/icKUX.png\" alt=\"create new keystore\" /></a></p>\n<ol start=\"4\">\n<li>select KeyStore type = PKCS12</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/a9oOj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/a9oOj.png\" alt=\"select Key Store type\" /></a></p>\n<ol start=\"5\">\n<li>Import KeyPair with &quot;Tools&quot; - &quot;Import Key Pair&quot;</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/YPkDn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YPkDn.png\" alt=\"import Key Pair\" /></a></p>\n<ol start=\"6\">\n<li>Select Key Pair Type as PKCS #8</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/A75HB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/A75HB.png\" alt=\"select Key Pair type\" /></a></p>\n<ol start=\"7\">\n<li>Set the password (123456) and choose the key- and cert-file and press &quot;Import&quot;</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/JzpeJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JzpeJ.png\" alt=\"set the password\" /></a></p>\n<ol start=\"8\">\n<li>Choose the alias for the key (default is the given email in the certificate</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/2W9BJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2W9BJ.png\" alt=\"choose an alias\" /></a></p>\n<ol start=\"9\">\n<li>Set a Key Pair Entry password: kpe123456</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/W5fmF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/W5fmF.png\" alt=\"set Key Pair Entry password\" /></a></p>\n<ol start=\"10\">\n<li>Message: Key Pair Import successful</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/xcLvl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xcLvl.png\" alt=\"Message Key Pair Import successful\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/KtKoa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KtKoa.png\" alt=\"save your new keystore\" /></a></p>\n<ol start=\"11\">\n<li>save your new keystore with &quot;File&quot; - &quot;Save as&quot;</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/WbsXQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WbsXQ.png\" alt=\"save your new Key Store\" /></a></p>\n<ol start=\"12\">\n<li>Set a password for the Key Store: ks123456</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/8iTiu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8iTiu.png\" alt=\"Set a password for the Key Store\" /></a></p>\n<ol start=\"13\">\n<li><p>choose path + filename: keystore.p12</p>\n</li>\n<li><p>ready - your private and certificate are imported in the new created Key Store keystore.p12</p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":11125108,"reputation":5965,"user_id":8166854,"display_name":"Michael Fehr"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1594598361,"creation_date":1594598361,"answer_id":62867597,"question_id":62701407,"body_markdown":"When searching via Google and &quot;azure key vault get private key&quot; I found a GitHub-issue that describes in detail\r\nhow to retrieve a private key from Azure Key Vault:\r\n\r\nhttps://github.com/Azure/azure-sdk-for-js/issues/7647\r\n\r\nScrolling down to answer https://github.com/Azure/azure-sdk-for-js/issues/7647#issuecomment-594935307 there is this statement\r\nfrom one of the Dev&#39;s:\r\n\r\n**How to obtain the private key**\r\n\r\nKnowing that the private key is stored in a KeyVault Secret, with the public certificate included, we can retrieve it by using the KeyVault-Secrets client, as follows:\r\n\r\n    // Using the same credential object we used before,\r\n    // and the same keyVaultUrl,\r\n    // let&#39;s create a SecretClient\r\n    const secretClient = new SecretClient(keyVaultUrl, credential);\r\n    \r\n    // Assuming you&#39;ve already created a KeyVault certificate,\r\n    // and that certificateName contains the name of your certificate\r\n    const certificateSecret = await secretClient.getSecret(certificateName);\r\n    \r\n    // Here we can find both the private key and the public certificate, in PKCS 12 format:\r\n    const PKCS12Certificate = certificateSecret.value!;\r\n    \r\n    // You can write this into a file:\r\n    fs.writeFileSync(&quot;myCertificate.p12&quot;, PKCS12Certificate);\r\n\r\n**Note that, by default, the contentType of the certificates is PKCS 12**. Though specifying the content type of your certificate will make it trivial to get it&#39;s secret key in PEM format, let&#39;s explore how to retrieve a PEM secret key from a PKCS 12 certificate first.\r\n\r\n    Using openssl, you can retrieve the public certificate in PEM format by using the following command:\r\n    openssl pkcs12 -in myCertificate.p12 -out myCertificate.crt.pem -clcerts -nokeys\r\n    You can also use openssl to retrieve the private key, as follows:\r\n    openssl pkcs12 -in myCertificate.p12 -out myCertificate.key.pem -nocerts -nodes\r\n\r\nIn short: **You do not need to &quot;rebuild&quot; a PKCS12-keystore from separate &quot;files&quot; (private key-PEM and certificate-PEM) as you get the PKCS12/P12-keystore as shown in the example**.\r\n\r\n","title":"Load certificate and private key into Java KeyStore","body":"<p>When searching via Google and &quot;azure key vault get private key&quot; I found a GitHub-issue that describes in detail\nhow to retrieve a private key from Azure Key Vault:</p>\n<p><a href=\"https://github.com/Azure/azure-sdk-for-js/issues/7647\" rel=\"nofollow noreferrer\">https://github.com/Azure/azure-sdk-for-js/issues/7647</a></p>\n<p>Scrolling down to answer <a href=\"https://github.com/Azure/azure-sdk-for-js/issues/7647#issuecomment-594935307\" rel=\"nofollow noreferrer\">https://github.com/Azure/azure-sdk-for-js/issues/7647#issuecomment-594935307</a> there is this statement\nfrom one of the Dev's:</p>\n<p><strong>How to obtain the private key</strong></p>\n<p>Knowing that the private key is stored in a KeyVault Secret, with the public certificate included, we can retrieve it by using the KeyVault-Secrets client, as follows:</p>\n<pre><code>// Using the same credential object we used before,\n// and the same keyVaultUrl,\n// let's create a SecretClient\nconst secretClient = new SecretClient(keyVaultUrl, credential);\n\n// Assuming you've already created a KeyVault certificate,\n// and that certificateName contains the name of your certificate\nconst certificateSecret = await secretClient.getSecret(certificateName);\n\n// Here we can find both the private key and the public certificate, in PKCS 12 format:\nconst PKCS12Certificate = certificateSecret.value!;\n\n// You can write this into a file:\nfs.writeFileSync(&quot;myCertificate.p12&quot;, PKCS12Certificate);\n</code></pre>\n<p><strong>Note that, by default, the contentType of the certificates is PKCS 12</strong>. Though specifying the content type of your certificate will make it trivial to get it's secret key in PEM format, let's explore how to retrieve a PEM secret key from a PKCS 12 certificate first.</p>\n<pre><code>Using openssl, you can retrieve the public certificate in PEM format by using the following command:\nopenssl pkcs12 -in myCertificate.p12 -out myCertificate.crt.pem -clcerts -nokeys\nYou can also use openssl to retrieve the private key, as follows:\nopenssl pkcs12 -in myCertificate.p12 -out myCertificate.key.pem -nocerts -nodes\n</code></pre>\n<p>In short: <strong>You do not need to &quot;rebuild&quot; a PKCS12-keystore from separate &quot;files&quot; (private key-PEM and certificate-PEM) as you get the PKCS12/P12-keystore as shown in the example</strong>.</p>\n"},{"tags":[],"owner":{"account_id":1088907,"reputation":1550,"user_id":1083981,"display_name":"nurisezgin"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1640068216,"creation_date":1608570475,"answer_id":65397023,"question_id":62701407,"body_markdown":"It is a bit late, but I want to place a resolution that I have practiced whilst retrieving a certificate from Azure Keyvault then putting it into the java Keystore.\r\n\r\nThe dependencies that I utilized are the following.\r\n\r\n    com.azure:azure-security-keyvault-certificates:jar:4.1.3\r\n    com.azure:azure-identity:jar:1.0.4\r\n    com.azure:azure-security-keyvault-secrets:jar:4.1.1\r\n\r\n\r\nThen, the code block is below.\r\n\r\n    public class RestTemplateProvider {\r\n    \r\n    \t@Value(&quot;${azure.keyvault.service.cert-alias}&quot;)\r\n    \tprivate String alias;\r\n    \t@Value(&quot;${azure.keyvault.tenant-id}&quot;)\r\n    \tprivate String tenantId;\r\n    \t@Value(&quot;${azure.keyvault.client-key}&quot;)\r\n    \tprivate String clientSecret;\r\n    \t@Value(&quot;${azure.keyvault.client-id}&quot;)\r\n    \tprivate String clientId;\r\n    \t@Value(&quot;${azure.keyvault.uri}&quot;)\r\n    \tprivate String vaultUri;\r\n    \r\n    \tpublic RestTemplate provideRestTemplate() {\r\n    \t\tchar[] emptyPass = {};\r\n    \t\tCloseIoStream closeableIoStream = CloseIoStream.newInstance();\r\n    \r\n    \t\ttry {\r\n    \t\t\t// Azure KeyVault Credentials\r\n    \t\t\tClientSecretCredential credential = new ClientSecretCredentialBuilder()\r\n    \t\t\t\t.tenantId(tenantId)\r\n    \t\t\t\t.clientId(clientId)\r\n    \t\t\t\t.clientSecret(clientSecret)\r\n    \t\t\t\t.build();\r\n    \r\n    \t\t\tCertificateClient certificateClient = new CertificateClientBuilder()\r\n    \t\t\t\t.vaultUrl(vaultUri)\r\n    \t\t\t\t.credential(credential)\r\n    \t\t\t\t.buildClient();\r\n    \r\n    \t\t\tSecretClient secretClient = new SecretClientBuilder()\r\n    \t\t\t\t.vaultUrl(vaultUri)\r\n    \t\t\t\t.credential(credential)\r\n    \t\t\t\t.buildClient();\r\n    \t\t\t// Azure KeyVault Credentials\r\n    \r\n    \t\t\t// Retrieving certificate\r\n    \t\t\tKeyVaultCertificateWithPolicy certificateWithPolicy = certificateClient.getCertificate(alias);\r\n    \t\t\tKeyVaultSecret secret = secretClient.getSecret(alias, certificateWithPolicy.getProperties().getVersion());\r\n    \r\n    \t\t\tbyte[] rawCertificate = certificateWithPolicy.getCer();\r\n    \t\t\tCertificateFactory cf = CertificateFactory.getInstance(&quot;X.509&quot;);\r\n    \t\t\tByteArrayInputStream certificateStream = new ByteArrayInputStream(rawCertificate);\r\n    \t\t\tCertificate certificate = cf.generateCertificate(certificateStream);\r\n    \r\n    \t\t\tclose(certificateStream);\r\n    \t\t\t// Retrieving certificate\r\n    \r\n    \t\t\t// Retrieving private key\r\n    \t\t\tString base64PrivateKey = secret.getValue();\r\n    \t\t\tbyte[] rawPrivateKey = Base64.getDecoder().decode(base64PrivateKey);\r\n    \r\n    \t\t\tKeyStore rsaKeyGenerator = KeyStore.getInstance(KeyStore.getDefaultType());\r\n    \t\t\tByteArrayInputStream keyStream = new ByteArrayInputStream(rawPrivateKey);\r\n    \t\t\trsaKeyGenerator.load(keyStream, null);\r\n    \r\n    \t\t\tclose(keyStream);\r\n    \r\n    \t\t\tKey rsaPrivateKey = rsaKeyGenerator.getKey(rsaKeyGenerator.aliases().nextElement(), emptyPass);\r\n    \t\t\t// Retrieving private key\r\n    \r\n    \t\t\t// Importing certificate and private key into the KeyStore\r\n    \t\t\tKeyStore keyStore = KeyStore.getInstance(KeyStore.getDefaultType());\r\n    \t\t\tkeyStore.load(null);\r\n    \t\t\tkeyStore.setKeyEntry(alias, rsaPrivateKey, emptyPass, new Certificate[] {certificate});\r\n    \t\t\t// Importing certificate and private key into the KeyStore\r\n    \r\n    \t\t\tSSLConnectionSocketFactory socketFactory = new SSLConnectionSocketFactory(\r\n    \t\t\t\tnew SSLContextBuilder()\r\n    \t\t\t\t\t.loadTrustMaterial(null, new TrustAllStrategy())\r\n    \t\t\t\t\t.loadKeyMaterial(keyStore, emptyPass)\r\n    \t\t\t\t\t.build(),\r\n    \t\t\t\tNoopHostnameVerifier.INSTANCE);\r\n    \r\n                // It is just a sample, except for the sslsocketfactory please use the configuration which is right for you.\r\n    \t\t\tCloseableHttpClient httpClient = HttpClients.custom()\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t.setSSLSocketFactory(socketFactory)\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t.setConnectionTimeToLive(1000, TimeUnit.MILLISECONDS)\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t.setKeepAliveStrategy((httpResponse, httpContext) -&gt; 10 * 1000)\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t.build();\r\n    \r\n    \t\t\tClientHttpRequestFactory requestFactory = new HttpComponentsClientHttpRequestFactory(httpClient);\r\n    \t\t\tRestTemplate restTemplate = new RestTemplate(requestFactory);\r\n    \r\n    \t\t\treturn restTemplate;\r\n    \t\t} catch (IOException | CertificateException\r\n    \t\t\t| NoSuchAlgorithmException | UnrecoverableKeyException\r\n    \t\t\t| KeyStoreException | KeyManagementException e) {\r\n    \t\t\tlog.error(&quot;Error!!!&quot;)\r\n    \t\t}\r\n    \r\n    \t\treturn null;\r\n    \t}\r\n    \r\n        private void close(Closeable c) {\r\n    \t\tif (c != null) {\r\n    \t\t\ttry {\r\n    \t\t\t\tc.close();\r\n    \t\t\t} catch (IOException e) {\r\n    \t\t\t\t// log\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nI hope someone looking for a solution around using Azure Keyvault certificates in java Keystores can benefit from it.\r\n","title":"Load certificate and private key into Java KeyStore","body":"<p>It is a bit late, but I want to place a resolution that I have practiced whilst retrieving a certificate from Azure Keyvault then putting it into the java Keystore.</p>\n<p>The dependencies that I utilized are the following.</p>\n<pre><code>com.azure:azure-security-keyvault-certificates:jar:4.1.3\ncom.azure:azure-identity:jar:1.0.4\ncom.azure:azure-security-keyvault-secrets:jar:4.1.1\n</code></pre>\n<p>Then, the code block is below.</p>\n<pre><code>public class RestTemplateProvider {\n\n    @Value(&quot;${azure.keyvault.service.cert-alias}&quot;)\n    private String alias;\n    @Value(&quot;${azure.keyvault.tenant-id}&quot;)\n    private String tenantId;\n    @Value(&quot;${azure.keyvault.client-key}&quot;)\n    private String clientSecret;\n    @Value(&quot;${azure.keyvault.client-id}&quot;)\n    private String clientId;\n    @Value(&quot;${azure.keyvault.uri}&quot;)\n    private String vaultUri;\n\n    public RestTemplate provideRestTemplate() {\n        char[] emptyPass = {};\n        CloseIoStream closeableIoStream = CloseIoStream.newInstance();\n\n        try {\n            // Azure KeyVault Credentials\n            ClientSecretCredential credential = new ClientSecretCredentialBuilder()\n                .tenantId(tenantId)\n                .clientId(clientId)\n                .clientSecret(clientSecret)\n                .build();\n\n            CertificateClient certificateClient = new CertificateClientBuilder()\n                .vaultUrl(vaultUri)\n                .credential(credential)\n                .buildClient();\n\n            SecretClient secretClient = new SecretClientBuilder()\n                .vaultUrl(vaultUri)\n                .credential(credential)\n                .buildClient();\n            // Azure KeyVault Credentials\n\n            // Retrieving certificate\n            KeyVaultCertificateWithPolicy certificateWithPolicy = certificateClient.getCertificate(alias);\n            KeyVaultSecret secret = secretClient.getSecret(alias, certificateWithPolicy.getProperties().getVersion());\n\n            byte[] rawCertificate = certificateWithPolicy.getCer();\n            CertificateFactory cf = CertificateFactory.getInstance(&quot;X.509&quot;);\n            ByteArrayInputStream certificateStream = new ByteArrayInputStream(rawCertificate);\n            Certificate certificate = cf.generateCertificate(certificateStream);\n\n            close(certificateStream);\n            // Retrieving certificate\n\n            // Retrieving private key\n            String base64PrivateKey = secret.getValue();\n            byte[] rawPrivateKey = Base64.getDecoder().decode(base64PrivateKey);\n\n            KeyStore rsaKeyGenerator = KeyStore.getInstance(KeyStore.getDefaultType());\n            ByteArrayInputStream keyStream = new ByteArrayInputStream(rawPrivateKey);\n            rsaKeyGenerator.load(keyStream, null);\n\n            close(keyStream);\n\n            Key rsaPrivateKey = rsaKeyGenerator.getKey(rsaKeyGenerator.aliases().nextElement(), emptyPass);\n            // Retrieving private key\n\n            // Importing certificate and private key into the KeyStore\n            KeyStore keyStore = KeyStore.getInstance(KeyStore.getDefaultType());\n            keyStore.load(null);\n            keyStore.setKeyEntry(alias, rsaPrivateKey, emptyPass, new Certificate[] {certificate});\n            // Importing certificate and private key into the KeyStore\n\n            SSLConnectionSocketFactory socketFactory = new SSLConnectionSocketFactory(\n                new SSLContextBuilder()\n                    .loadTrustMaterial(null, new TrustAllStrategy())\n                    .loadKeyMaterial(keyStore, emptyPass)\n                    .build(),\n                NoopHostnameVerifier.INSTANCE);\n\n            // It is just a sample, except for the sslsocketfactory please use the configuration which is right for you.\n            CloseableHttpClient httpClient = HttpClients.custom()\n                                                        .setSSLSocketFactory(socketFactory)\n                                                        .setConnectionTimeToLive(1000, TimeUnit.MILLISECONDS)\n                                                        .setKeepAliveStrategy((httpResponse, httpContext) -&gt; 10 * 1000)\n                                                        .build();\n\n            ClientHttpRequestFactory requestFactory = new HttpComponentsClientHttpRequestFactory(httpClient);\n            RestTemplate restTemplate = new RestTemplate(requestFactory);\n\n            return restTemplate;\n        } catch (IOException | CertificateException\n            | NoSuchAlgorithmException | UnrecoverableKeyException\n            | KeyStoreException | KeyManagementException e) {\n            log.error(&quot;Error!!!&quot;)\n        }\n\n        return null;\n    }\n\n    private void close(Closeable c) {\n        if (c != null) {\n            try {\n                c.close();\n            } catch (IOException e) {\n                // log\n            }\n        }\n    }\n}\n</code></pre>\n<p>I hope someone looking for a solution around using Azure Keyvault certificates in java Keystores can benefit from it.</p>\n"}],"owner":{"account_id":496401,"reputation":25022,"user_id":4148708,"accept_rate":70,"display_name":"evilSnobu"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6350,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":3,"score":7,"last_activity_date":1640068216,"creation_date":1593708932,"question_id":62701407,"body_markdown":"I&#39;m trying to fetch a certificate and its private key from Azure Key Vault then call a remote server and do client certificate authentication.\r\n\r\nThe first part works well (fetching from Key Vault), however i&#39;m completely stuck at importing the public and private material into KeyStore.\r\n\r\nI&#39;ve tried\r\n```\r\nkeyStore.load(publicKey, null);\r\nkeyStore.load(new ByteArrayInputStream(privateKey.getBytes()),\r\n    &quot;thePassphrase&quot;.toCharArray());\r\n```\r\nbut this leads to\r\n```\r\njava.io.IOException: DER input, Integer tag error\r\n        at java.base/sun.security.util.DerInputStream.getInteger(DerInputStream.java:192)\r\n        at java.base/sun.security.pkcs12.PKCS12KeyStore.engineLoad(PKCS12KeyStore.java:1995)\r\n        at java.base/sun.security.util.KeyStoreDelegator.engineLoad(KeyStoreDelegator.java:222)\r\n        at java.base/java.security.KeyStore.load(KeyStore.java:1479)\r\n```\r\n\r\nHere&#39;s the full thing minus what i don&#39;t know how to implement -\r\n\r\n```java\r\nDefaultAzureCredential credential = new DefaultAzureCredentialBuilder().build();\r\n\r\nSecretClient secretClient = new SecretClientBuilder()\r\n    .vaultUrl(&quot;https://&lt;myvault&gt;.vault.azure.net&quot;)\r\n\t.credential(credential)\r\n    .buildClient();\r\n\r\nCertificateClient certClient = new CertificateClientBuilder()\r\n    .vaultUrl(&quot;https://&lt;myvault&gt;.vault.azure.net&quot;)\r\n\t.credential(credential)\r\n    .buildClient();\r\n\r\n// Get the public part of the cert\r\nKeyVaultCertificateWithPolicy certificate = certClient.getCertificate(&quot;Joes-Crab-Shack&quot;);\r\nbyte[] publicKey = certificate.getCer();\r\n\r\n// Get the private key\r\nKeyVaultSecret secret = secretClient.getSecret(\r\n    certificate.getName(),\r\n    certificate.getProperties().getVersion());\r\nString privateKey = secret.getValue();\r\n\r\n// ***************\r\n// How do i get the cert and its private key into KeyStore?\r\nKeyStore keyStore = KeyStore.getInstance(&quot;PKCS12&quot;);\r\n// I&#39;ve also tried &quot;JKS&quot; but that leads to\r\n//    java.io.IOException: Invalid keystore format\r\nkeyStore.load(...)\r\n// ***************\r\n\r\n// Do client certificate authentication\r\nSSLContext sslContext = SSLContexts.custom().loadKeyMaterial(keyStore, null).build();\r\n\r\nCloseableHttpClient httpClient = HttpClients.custom().setSSLContext(sslContext).build();\r\nresponse = httpClient.execute(new HttpGet(&quot;https://remote.that.asks.for.client.cert/&quot;));\r\n\r\nInputStream inputStream = response.getEntity().getContent();\r\n\r\nbody = IOUtils.readInputStreamToString(inputStream, Charsets.UTF_8);\r\n```\r\n\r\nHow do i get the certificate and its private key into KeyStore so i can then use it in my HTTP client?","title":"Load certificate and private key into Java KeyStore","body":"<p>I'm trying to fetch a certificate and its private key from Azure Key Vault then call a remote server and do client certificate authentication.</p>\n<p>The first part works well (fetching from Key Vault), however i'm completely stuck at importing the public and private material into KeyStore.</p>\n<p>I've tried</p>\n<pre><code>keyStore.load(publicKey, null);\nkeyStore.load(new ByteArrayInputStream(privateKey.getBytes()),\n    &quot;thePassphrase&quot;.toCharArray());\n</code></pre>\n<p>but this leads to</p>\n<pre><code>java.io.IOException: DER input, Integer tag error\n        at java.base/sun.security.util.DerInputStream.getInteger(DerInputStream.java:192)\n        at java.base/sun.security.pkcs12.PKCS12KeyStore.engineLoad(PKCS12KeyStore.java:1995)\n        at java.base/sun.security.util.KeyStoreDelegator.engineLoad(KeyStoreDelegator.java:222)\n        at java.base/java.security.KeyStore.load(KeyStore.java:1479)\n</code></pre>\n<p>Here's the full thing minus what i don't know how to implement -</p>\n<pre class=\"lang-java prettyprint-override\"><code>DefaultAzureCredential credential = new DefaultAzureCredentialBuilder().build();\n\nSecretClient secretClient = new SecretClientBuilder()\n    .vaultUrl(&quot;https://&lt;myvault&gt;.vault.azure.net&quot;)\n    .credential(credential)\n    .buildClient();\n\nCertificateClient certClient = new CertificateClientBuilder()\n    .vaultUrl(&quot;https://&lt;myvault&gt;.vault.azure.net&quot;)\n    .credential(credential)\n    .buildClient();\n\n// Get the public part of the cert\nKeyVaultCertificateWithPolicy certificate = certClient.getCertificate(&quot;Joes-Crab-Shack&quot;);\nbyte[] publicKey = certificate.getCer();\n\n// Get the private key\nKeyVaultSecret secret = secretClient.getSecret(\n    certificate.getName(),\n    certificate.getProperties().getVersion());\nString privateKey = secret.getValue();\n\n// ***************\n// How do i get the cert and its private key into KeyStore?\nKeyStore keyStore = KeyStore.getInstance(&quot;PKCS12&quot;);\n// I've also tried &quot;JKS&quot; but that leads to\n//    java.io.IOException: Invalid keystore format\nkeyStore.load(...)\n// ***************\n\n// Do client certificate authentication\nSSLContext sslContext = SSLContexts.custom().loadKeyMaterial(keyStore, null).build();\n\nCloseableHttpClient httpClient = HttpClients.custom().setSSLContext(sslContext).build();\nresponse = httpClient.execute(new HttpGet(&quot;https://remote.that.asks.for.client.cert/&quot;));\n\nInputStream inputStream = response.getEntity().getContent();\n\nbody = IOUtils.readInputStreamToString(inputStream, Charsets.UTF_8);\n</code></pre>\n<p>How do i get the certificate and its private key into KeyStore so i can then use it in my HTTP client?</p>\n"},{"tags":["java","android","android-studio","interstitial","mopub"],"comments":[{"owner":{"account_id":5055380,"reputation":256,"user_id":4058773,"display_name":"Adi Oz"},"score":0,"creation_date":1641043421,"post_id":70431351,"comment_id":124710986,"body_markdown":"Do you use proguard when building your app? did you check which proguard rules are required by MoPub?","body":"Do you use proguard when building your app? did you check which proguard rules are required by MoPub?"},{"owner":{"account_id":16445373,"reputation":613,"user_id":11880323,"display_name":"cmak"},"score":0,"creation_date":1641758625,"post_id":70431351,"comment_id":124884336,"body_markdown":"MoPub platform is going to get deprecated","body":"MoPub platform is going to get deprecated"}],"owner":{"account_id":6574621,"reputation":13,"user_id":5081218,"display_name":"zaryab tahir"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1640067516,"creation_date":1640067516,"question_id":70431351,"body_markdown":"**MoPub SDK Version** :\r\n5.18.0\r\n\r\n**Android Studio Version** :\r\n2020.3.1\r\n\r\n**Gradle Version** :\r\n7.0.0\r\n\r\n**Device model and OS Version** :\r\nandroid, any model and version\r\n\r\n**Ad Unit IDs used in reproducing the issue** :\r\nInterstitial\r\n\r\n**Steps to reproduce the behavior** :\r\nCrash produced in only my firebase crashlytics that put my App in bad behaviour.\r\n\r\n**Crash Log** :\r\n\r\nFatal Exception: java.lang.RuntimeException\r\nUnable to start activity ComponentInfo{com.../com.mopub.mobileads.MoPubFullscreenActivity}: java.lang.ClassCastException: l8.o cannot be cast to java.lang.Comparable\r\n\r\n\r\nCaused by java.lang.ClassCastException: l8.o cannot be cast to java.lang.Comparable\r\n       at java.util.ComparableTimSort.countRunAndMakeAscending(ComparableTimSort.java:320)\r\n       at java.util.ComparableTimSort.sort(ComparableTimSort.java:188)\r\n       at java.util.Arrays.sort(Arrays.java:1302)\r\n       at java.util.Arrays.sort(Arrays.java:1485)\r\n       at java.util.ArrayList.sort(ArrayList.java:1470)\r\n       at java.util.Collections.sort(Collections.java:206)\r\n       at java.util.Collections.sort(Collections.java:159)\r\n       at kotlin.collections.CollectionsKt__MutableCollectionsJVMKt.sort(CollectionsKt__MutableCollectionsJVMKt.java:31)\r\n       at com.mopub.mobileads.VastVideoConfig.addFractionalTrackers(VastVideoConfig.kt:223)\r\n       at com.mopub.mobileads.VastVideoViewProgressRunnable.&lt;init&gt;(VastVideoViewProgressRunnable.kt:79)\r\n       at com.mopub.mobileads.VastVideoViewController.&lt;init&gt;(VastVideoViewController.kt:306)\r\n       at com.mopub.mobileads.FullscreenAdController.createVideoViewController(FullscreenAdController.java:350)\r\n       at com.mopub.mobileads.FullscreenAdController.&lt;init&gt;(FullscreenAdController.java:219)\r\n       at com.mopub.mobileads.MoPubFullscreenActivity.onCreate(MoPubFullscreenActivity.java:73)\r\n       at android.app.Activity.performCreate(Activity.java:8142)\r\n       at android.app.Activity.performCreate(Activity.java:8114)\r\n       at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1309)\r\n       at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3565)\r\n       at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3752)\r\n       at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:85)\r\n       at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\r\n       at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\r\n       at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2178)\r\n       at android.os.Handler.dispatchMessage(Handler.java:106)\r\n       at android.os.Looper.loop(Looper.java:236)\r\n       at android.app.ActivityThread.main(ActivityThread.java:8051)\r\n       at java.lang.reflect.Method.invoke(Method.java)\r\n       at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:620)\r\n       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1011)","title":"com.mopub.mobileads.MoPubFullscreenActivity: java.lang.ClassCastException: l8.o cannot be cast to java.lang.Comparable","body":"<p><strong>MoPub SDK Version</strong> :\n5.18.0</p>\n<p><strong>Android Studio Version</strong> :\n2020.3.1</p>\n<p><strong>Gradle Version</strong> :\n7.0.0</p>\n<p><strong>Device model and OS Version</strong> :\nandroid, any model and version</p>\n<p><strong>Ad Unit IDs used in reproducing the issue</strong> :\nInterstitial</p>\n<p><strong>Steps to reproduce the behavior</strong> :\nCrash produced in only my firebase crashlytics that put my App in bad behaviour.</p>\n<p><strong>Crash Log</strong> :</p>\n<p>Fatal Exception: java.lang.RuntimeException\nUnable to start activity ComponentInfo{com.../com.mopub.mobileads.MoPubFullscreenActivity}: java.lang.ClassCastException: l8.o cannot be cast to java.lang.Comparable</p>\n<p>Caused by java.lang.ClassCastException: l8.o cannot be cast to java.lang.Comparable\nat java.util.ComparableTimSort.countRunAndMakeAscending(ComparableTimSort.java:320)\nat java.util.ComparableTimSort.sort(ComparableTimSort.java:188)\nat java.util.Arrays.sort(Arrays.java:1302)\nat java.util.Arrays.sort(Arrays.java:1485)\nat java.util.ArrayList.sort(ArrayList.java:1470)\nat java.util.Collections.sort(Collections.java:206)\nat java.util.Collections.sort(Collections.java:159)\nat kotlin.collections.CollectionsKt__MutableCollectionsJVMKt.sort(CollectionsKt__MutableCollectionsJVMKt.java:31)\nat com.mopub.mobileads.VastVideoConfig.addFractionalTrackers(VastVideoConfig.kt:223)\nat com.mopub.mobileads.VastVideoViewProgressRunnable.(VastVideoViewProgressRunnable.kt:79)\nat com.mopub.mobileads.VastVideoViewController.(VastVideoViewController.kt:306)\nat com.mopub.mobileads.FullscreenAdController.createVideoViewController(FullscreenAdController.java:350)\nat com.mopub.mobileads.FullscreenAdController.(FullscreenAdController.java:219)\nat com.mopub.mobileads.MoPubFullscreenActivity.onCreate(MoPubFullscreenActivity.java:73)\nat android.app.Activity.performCreate(Activity.java:8142)\nat android.app.Activity.performCreate(Activity.java:8114)\nat android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1309)\nat android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3565)\nat android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3752)\nat android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:85)\nat android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\nat android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\nat android.app.ActivityThread$H.handleMessage(ActivityThread.java:2178)\nat android.os.Handler.dispatchMessage(Handler.java:106)\nat android.os.Looper.loop(Looper.java:236)\nat android.app.ActivityThread.main(ActivityThread.java:8051)\nat java.lang.reflect.Method.invoke(Method.java)\nat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:620)\nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1011)</p>\n"},{"tags":["java","netbeans","out-of-memory"],"answers":[{"tags":[],"owner":{"account_id":1419439,"reputation":1433,"user_id":1344386,"accept_rate":100,"display_name":"Stefan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1396946700,"creation_date":1396938165,"answer_id":22929121,"question_id":22929009,"body_markdown":"What is the file size of the file you&#39;re trying to open? The only time I have seen this is when the file Netbeans is going to open is relatively large (not sure what threshold Netbeans uses to show this warning).\r\n\r\n\r\nIf it&#39;s a large text file with data you&#39;re reading (or writing) with your software, open it outside of Netbeans with something like [Notepad++][1].\r\n\r\n\r\n**Update**\r\n\r\nOkay, so it&#39;s clear now that a file that contains code is relatively large, and Netbeans is already warning you that it might be too large to be opened. I strongly recommend that you split that file into multiple files (multiple classes maybe)?\r\n\r\nExample:\r\n\r\n**Old situation**\r\n\r\n    public class Class1\r\n    {\r\n    \tpublic void doSomething()\r\n    \t{\r\n    \t\t//do stuff (1)\r\n    \t\t//do stuff (2)\r\n    \t}\r\n    }\r\n\r\n\r\n**New situation**\r\n\r\n    public class Class1\r\n    {\r\n    \r\n    \tprivate NewClass1 newClass1;\r\n    \tprivate NewClass2 newClass2;\r\n    \tprivate JComponent jComponent;\r\n    \r\n    \tpublic Class1()\r\n    \t{\r\n    \t\tnewClass1 = new NewClass1();\r\n    \t\tnewClass2 = new NewClass2();\r\n    \t\t//instantiating jComponent\r\n    \t}\r\n    \r\n    \tpublic void doSomething()\r\n    \t{\r\n    \t\tnewClass1.doSomethingSmaller(jComponent); //possibly with some return value\r\n    \t\tnewClass2.doSomethingSmallerToo(jComponent); //possibly with some return value\r\n    \t}\r\n    }\r\n    \r\n    public class NewClass1\r\n    {\r\n    \tpublic void doSomethingSmaller(JComponent jComponent)\r\n    \t{\r\n    \t\t//do stuff (1)\r\n    \t\tjComponent.doStuff();\r\n    \t}\r\n    }\r\n    \r\n    public class NewClass2\r\n    {\r\n    \tpublic void doSomethingSmallerToo(JComponent jComponent)\r\n    \t{\r\n    \t\t//do stuff (2)\r\n    \t\tjComponent.doOtherStuff();\r\n    \t]\r\n    }\r\n\r\nThose new classes should then be in separate files, which reduces the size of your file. It also encourages reusing (parts of) your code in other places in your code.\r\n\r\n  [1]: http://notepad-plus-plus.org/","title":"NetBeans is Showing Error file could cause outofmemoryerror netbeans","body":"<p>What is the file size of the file you're trying to open? The only time I have seen this is when the file Netbeans is going to open is relatively large (not sure what threshold Netbeans uses to show this warning).</p>\n\n<p>If it's a large text file with data you're reading (or writing) with your software, open it outside of Netbeans with something like <a href=\"http://notepad-plus-plus.org/\" rel=\"nofollow\">Notepad++</a>.</p>\n\n<p><strong>Update</strong></p>\n\n<p>Okay, so it's clear now that a file that contains code is relatively large, and Netbeans is already warning you that it might be too large to be opened. I strongly recommend that you split that file into multiple files (multiple classes maybe)?</p>\n\n<p>Example:</p>\n\n<p><strong>Old situation</strong></p>\n\n<pre><code>public class Class1\n{\n    public void doSomething()\n    {\n        //do stuff (1)\n        //do stuff (2)\n    }\n}\n</code></pre>\n\n<p><strong>New situation</strong></p>\n\n<pre><code>public class Class1\n{\n\n    private NewClass1 newClass1;\n    private NewClass2 newClass2;\n    private JComponent jComponent;\n\n    public Class1()\n    {\n        newClass1 = new NewClass1();\n        newClass2 = new NewClass2();\n        //instantiating jComponent\n    }\n\n    public void doSomething()\n    {\n        newClass1.doSomethingSmaller(jComponent); //possibly with some return value\n        newClass2.doSomethingSmallerToo(jComponent); //possibly with some return value\n    }\n}\n\npublic class NewClass1\n{\n    public void doSomethingSmaller(JComponent jComponent)\n    {\n        //do stuff (1)\n        jComponent.doStuff();\n    }\n}\n\npublic class NewClass2\n{\n    public void doSomethingSmallerToo(JComponent jComponent)\n    {\n        //do stuff (2)\n        jComponent.doOtherStuff();\n    ]\n}\n</code></pre>\n\n<p>Those new classes should then be in separate files, which reduces the size of your file. It also encourages reusing (parts of) your code in other places in your code.</p>\n"},{"tags":[],"owner":{"account_id":4226365,"reputation":394,"user_id":3459806,"accept_rate":82,"display_name":"Raider"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1396940554,"creation_date":1396940554,"answer_id":22929853,"question_id":22929009,"body_markdown":"If you couldn&#39;t reduce your class size try to add this in your **\\NetBeans\\harness\\etc\\app.conf**\r\n\r\n    default_options=&quot;-J-Xms24m -J-Xmx1024m&quot; ","title":"NetBeans is Showing Error file could cause outofmemoryerror netbeans","body":"<p>If you couldn't reduce your class size try to add this in your <strong>\\NetBeans\\harness\\etc\\app.conf</strong></p>\n\n<pre><code>default_options=\"-J-Xms24m -J-Xmx1024m\" \n</code></pre>\n"},{"tags":[],"owner":{"account_id":14943360,"reputation":1,"user_id":10789330,"display_name":"Adarsh Balachandran"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640067445,"creation_date":1640067445,"answer_id":70431342,"question_id":22929009,"body_markdown":"I just got this warning and i was not able to open it directly from a reference to that class&#39;s method.\r\nso i did this to open(in case if its not opening through reference from a class)\r\nGo to Navigator -&gt;\r\nlocate file -&gt;\r\nopen , click YES\r\n","title":"NetBeans is Showing Error file could cause outofmemoryerror netbeans","body":"<p>I just got this warning and i was not able to open it directly from a reference to that class's method.\nso i did this to open(in case if its not opening through reference from a class)\nGo to Navigator -&gt;\nlocate file -&gt;\nopen , click YES</p>\n"}],"owner":{"account_id":3281906,"reputation":3459,"user_id":2762311,"accept_rate":74,"display_name":"Kishan Bheemajiyani"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1190,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":22929121,"answer_count":3,"score":0,"last_activity_date":1640067445,"creation_date":1396937815,"question_id":22929009,"body_markdown":"Hello I am using netbeans editor for my Java Desktop application and i am getting error i mean warning like this\r\n\r\n    opening this file could cause outofmemoryerror netbeans\r\n\r\nThis warning shows up because I have a file containing code which is &gt;1MB. And after that I am not able to see error too its not pointing so how could i fix it?","title":"NetBeans is Showing Error file could cause outofmemoryerror netbeans","body":"<p>Hello I am using netbeans editor for my Java Desktop application and i am getting error i mean warning like this</p>\n\n<pre><code>opening this file could cause outofmemoryerror netbeans\n</code></pre>\n\n<p>This warning shows up because I have a file containing code which is >1MB. And after that I am not able to see error too its not pointing so how could i fix it?</p>\n"},{"tags":["java","spring","lru"],"answers":[{"tags":[],"owner":{"account_id":75804,"reputation":94815,"user_id":217324,"accept_rate":96,"display_name":"Nathan Hughes"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640059597,"creation_date":1640056439,"answer_id":70430260,"question_id":70430066,"body_markdown":"Take a closer look at the get method. The choices made   to maximize the number of concurrent readers mean the code doesn&#39;t enforce the exclusion needed to be able to use non-threadsafe collections. \r\n\r\nThe cache is accessed without any lock held. The authors want to avoid having to acquire a lock just to read from the cache. \r\n\r\nThe queue is accessed with a read lock, so there can be multiple concurrent readers. That requires the queue implementation to be threadsafe. \r\n\r\n(Of course if the code used a read lock to read from the cache, then the same issue with multiple readers would be true for the cache as well.)\r\n\r\n\r\nFor the question about using hashmap instead of CHM, part of what you get from using locks is memory visibility. If you use HashMap then when the cache is updated the get method also needs to lock in order to avoid all the issues around insufficiently-synchronized code like JIT optimizations and reorderings. \r\n\r\n","title":"Why does ConcurrentLruCache in Spring still use thread-safe maps and queues instead of ordinary maps and queues even when read-write lock are used?","body":"<p>Take a closer look at the get method. The choices made   to maximize the number of concurrent readers mean the code doesn't enforce the exclusion needed to be able to use non-threadsafe collections.</p>\n<p>The cache is accessed without any lock held. The authors want to avoid having to acquire a lock just to read from the cache.</p>\n<p>The queue is accessed with a read lock, so there can be multiple concurrent readers. That requires the queue implementation to be threadsafe.</p>\n<p>(Of course if the code used a read lock to read from the cache, then the same issue with multiple readers would be true for the cache as well.)</p>\n<p>For the question about using hashmap instead of CHM, part of what you get from using locks is memory visibility. If you use HashMap then when the cache is updated the get method also needs to lock in order to avoid all the issues around insufficiently-synchronized code like JIT optimizations and reorderings.</p>\n"}],"owner":{"account_id":7909307,"reputation":409,"user_id":5973816,"display_name":"Poison"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":615,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1640066258,"creation_date":1640053959,"question_id":70430066,"body_markdown":"[spring-framework/ConcurrentLruCache.java at main &#183; spring-projects/spring-framework &#183; GitHub](https://github.com/spring-projects/spring-framework/blob/main/spring-core/src/main/java/org/springframework/util/ConcurrentLruCache.java)\r\n\r\n#### Update\r\nBecause there may be multiple readers writing to the queue concurrently, the queue must use a thread-safe data structure, and the put operation of the cache is done in the write lock, can the implementation of the cache be replaced with a HashMap? Because the get method of ConcurrentHashMap is implemented without lock.\r\n\r\n&gt; Retrieval operations (including get) generally do not block, so may overlap with update operations (including put and remove). Retrievals reflect the results of the most recently completed update operations holding upon their onset. (More formally, an update operation for a given key bears a happens-before relation with any (non-null) retrieval for that key reporting the updated value.)\r\n\r\nFrom [ConcurrentHashMap (Java Platform SE 8 )](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentHashMap.html)","title":"Why does ConcurrentLruCache in Spring still use thread-safe maps and queues instead of ordinary maps and queues even when read-write lock are used?","body":"<p><a href=\"https://github.com/spring-projects/spring-framework/blob/main/spring-core/src/main/java/org/springframework/util/ConcurrentLruCache.java\" rel=\"nofollow noreferrer\">spring-framework/ConcurrentLruCache.java at main · spring-projects/spring-framework · GitHub</a></p>\n<h4>Update</h4>\n<p>Because there may be multiple readers writing to the queue concurrently, the queue must use a thread-safe data structure, and the put operation of the cache is done in the write lock, can the implementation of the cache be replaced with a HashMap? Because the get method of ConcurrentHashMap is implemented without lock.</p>\n<blockquote>\n<p>Retrieval operations (including get) generally do not block, so may overlap with update operations (including put and remove). Retrievals reflect the results of the most recently completed update operations holding upon their onset. (More formally, an update operation for a given key bears a happens-before relation with any (non-null) retrieval for that key reporting the updated value.)</p>\n</blockquote>\n<p>From <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentHashMap.html\" rel=\"nofollow noreferrer\">ConcurrentHashMap (Java Platform SE 8 )</a></p>\n"},{"tags":["java","graphql","reactive-feign-client"],"owner":{"account_id":6911872,"reputation":25,"user_id":5307396,"display_name":"Radar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":125,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1640065829,"creation_date":1640051351,"question_id":70429836,"body_markdown":"I have a GraphQL application running. In another application, I am trying to send mutation request in which a field is omitted (using Java). How can I ensure that GraphQL can handle my request as expected. For example if I have MyInput = {field1: &quot;val1&quot;, field2: null}, and I want to update field1 only. How can I construct a request such that GraphQL handles it as {field1: &quot;val1&quot;}?   \r\n```\r\nclass MyInput {\r\n    String field1;\r\n    String field2;\r\n}\r\n\r\nclass MyClient {\r\npublic void callGraphQlApi(String query, MyInput input, String optName) {\r\nMap&lt;String, Object&gt; vars = new HashMap&lt;&gt;();\r\nvars.put(&quot;request&quot;, input);\r\n//send GraphGL request using FeignClient POST request\r\n}\r\n}\r\n```","title":"Handle not present field in GraphQL request in Java","body":"<p>I have a GraphQL application running. In another application, I am trying to send mutation request in which a field is omitted (using Java). How can I ensure that GraphQL can handle my request as expected. For example if I have MyInput = {field1: &quot;val1&quot;, field2: null}, and I want to update field1 only. How can I construct a request such that GraphQL handles it as {field1: &quot;val1&quot;}?</p>\n<pre><code>class MyInput {\n    String field1;\n    String field2;\n}\n\nclass MyClient {\npublic void callGraphQlApi(String query, MyInput input, String optName) {\nMap&lt;String, Object&gt; vars = new HashMap&lt;&gt;();\nvars.put(&quot;request&quot;, input);\n//send GraphGL request using FeignClient POST request\n}\n}\n</code></pre>\n"},{"tags":["java","apache-kafka","microservices","batch-processing","apache-kafka-streams"],"answers":[{"tags":[],"owner":{"account_id":175930,"reputation":2593,"user_id":406290,"accept_rate":43,"display_name":"Kevin Hooke"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1640018258,"creation_date":1640018258,"answer_id":70425098,"question_id":70424979,"body_markdown":"&gt; How can I signal a Stream that all of the messages have arrived\r\n\r\nYou can do this using Streams and joins. Since joins are limited to 2 topics you&#39;ll need to do 2 joins to get the event where all 3 have occurred.\r\n\r\nJoin TopicA and TopicB to get the event when A and B have occurred. Join AB with TopicC to get the event where A, B and C occur.","title":"Are Kafka Streams Appropriate for Triggering Batch Processing of Records?","body":"<blockquote>\n<p>How can I signal a Stream that all of the messages have arrived</p>\n</blockquote>\n<p>You can do this using Streams and joins. Since joins are limited to 2 topics you'll need to do 2 joins to get the event where all 3 have occurred.</p>\n<p>Join TopicA and TopicB to get the event when A and B have occurred. Join AB with TopicC to get the event where A, B and C occur.</p>\n"}],"owner":{"account_id":7337005,"reputation":352,"user_id":5588032,"accept_rate":60,"display_name":"Pmsmm"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":603,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":70425098,"answer_count":1,"score":3,"last_activity_date":1640065757,"creation_date":1640017784,"question_id":70424979,"body_markdown":"**Context**\r\n==============\r\n\r\nI have three services in place, each of which generate a certain JSON payload (**and take different times to do so**) that is needed to be able to process a message which is the result of combining all three JSON payloads into a single payload. This final payload in turn is to be sent to another Kafka Topic so that it can then be consumed by another service.\r\n\r\nBelow you can find a diagram that better explains the problem at hand. The information aggregator service receives a request to aggregate information, it sends that request to a Kafka topic so that Service 1, Service 2 and Service 3 consume that request and send their data (JSON Payload) to 3 different Kafka Topics.\r\n\r\n[![Architecture of the Application with their main components][2]][2]\r\n\r\nThe Information Aggregator has to consume the messages from the three services (Which are sent to their respective Kafka Topics at very different times e.g. Service 1 takes half an hour to respond while service 2 and 3 take under 10 minutes) so that it can generate a final payload (Represented as **Aggregated Information**) to send to another Kafka Topic.\r\n\r\n**Research**\r\n-----------\r\n\r\nAfter having researched a lot about Kafka and Kafka Streams, I came across [this article][1] that provides some great insights on how this should be elaborated. \r\n\r\nIn this article, the author consumes messages from a single topic while in my specific use case I must consume from three different topics, wait for each message from each topic with a certain ID to arrive so that I can then signal my process that it can proceed to consume the 3 messages with the same ID in different topics to generate the final message and send that final message to another Kafka topic (Which then another service will consume that message).\r\n\r\n**Thought Out Solution**\r\n---\r\n\r\nMy thoughts are that I need to have a Kafka Stream checking all three topics and when it sees that has all the 3 messages available, send a message to a kafka topic called e.g. TopicEvents from which the Information Aggregator will be consuming and by consuming the message will know exactly which messages to get from which topic, partition and offset and then can proceed to send the final payload to another Kafka Topic.\r\n\r\nQuestions\r\n==\r\n\r\n - Am I making a very wrong use of Kafka Streams and Batch\r\n   Processing?\r\n\r\n - How can I signal a Stream that all of the messages have arrived so that it can generate the message to place in the TopicEvent so as to signal the Information Aggregator that all the messages in the different topics have arrived and are ready to be consumed?\r\n\r\nSorry for this long post, any pointers that you can provide will be very helpful and thank you in advance\r\n\r\n  [1]: https://www.xeotek.com/batch-processing-with-apache-kafka/\r\n  [2]: https://i.stack.imgur.com/CKA7t.png","title":"Are Kafka Streams Appropriate for Triggering Batch Processing of Records?","body":"<h1><strong>Context</strong></h1>\n<p>I have three services in place, each of which generate a certain JSON payload (<strong>and take different times to do so</strong>) that is needed to be able to process a message which is the result of combining all three JSON payloads into a single payload. This final payload in turn is to be sent to another Kafka Topic so that it can then be consumed by another service.</p>\n<p>Below you can find a diagram that better explains the problem at hand. The information aggregator service receives a request to aggregate information, it sends that request to a Kafka topic so that Service 1, Service 2 and Service 3 consume that request and send their data (JSON Payload) to 3 different Kafka Topics.</p>\n<p><a href=\"https://i.stack.imgur.com/CKA7t.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CKA7t.png\" alt=\"Architecture of the Application with their main components\" /></a></p>\n<p>The Information Aggregator has to consume the messages from the three services (Which are sent to their respective Kafka Topics at very different times e.g. Service 1 takes half an hour to respond while service 2 and 3 take under 10 minutes) so that it can generate a final payload (Represented as <strong>Aggregated Information</strong>) to send to another Kafka Topic.</p>\n<h2><strong>Research</strong></h2>\n<p>After having researched a lot about Kafka and Kafka Streams, I came across <a href=\"https://www.xeotek.com/batch-processing-with-apache-kafka/\" rel=\"nofollow noreferrer\">this article</a> that provides some great insights on how this should be elaborated.</p>\n<p>In this article, the author consumes messages from a single topic while in my specific use case I must consume from three different topics, wait for each message from each topic with a certain ID to arrive so that I can then signal my process that it can proceed to consume the 3 messages with the same ID in different topics to generate the final message and send that final message to another Kafka topic (Which then another service will consume that message).</p>\n<h2><strong>Thought Out Solution</strong></h2>\n<p>My thoughts are that I need to have a Kafka Stream checking all three topics and when it sees that has all the 3 messages available, send a message to a kafka topic called e.g. TopicEvents from which the Information Aggregator will be consuming and by consuming the message will know exactly which messages to get from which topic, partition and offset and then can proceed to send the final payload to another Kafka Topic.</p>\n<h1>Questions</h1>\n<ul>\n<li><p>Am I making a very wrong use of Kafka Streams and Batch\nProcessing?</p>\n</li>\n<li><p>How can I signal a Stream that all of the messages have arrived so that it can generate the message to place in the TopicEvent so as to signal the Information Aggregator that all the messages in the different topics have arrived and are ready to be consumed?</p>\n</li>\n</ul>\n<p>Sorry for this long post, any pointers that you can provide will be very helpful and thank you in advance</p>\n"},{"tags":["java","file","delete-file"],"comments":[{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1640058900,"post_id":70430329,"comment_id":124499722,"body_markdown":"This question is too broad.   There is no specific question here. Perhaps it would be better asked on CodeReview ... although I doubt that they will be happy reviewing code where the identifiers and comments are not in English.  Perhaps you could ask on https://es.stackoverflow.com","body":"This question is too broad.   There is no specific question here. Perhaps it would be better asked on CodeReview ... although I doubt that they will be happy reviewing code where the identifiers and comments are not in English.  Perhaps you could ask on <a href=\"https://es.stackoverflow.com\">es.stackoverflow.com</a>"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1640059103,"post_id":70430329,"comment_id":124499750,"body_markdown":"However, one problem I can see is that your I/O methods have potential resource leaks in them because the streams are not closed when there is an exception.  Read about Java 7+ *try with resources*.  That&#39;s the best way to fix the problem.","body":"However, one problem I can see is that your I/O methods have potential resource leaks in them because the streams are not closed when there is an exception.  Read about Java 7+ <i>try with resources</i>.  That&#39;s the best way to fix the problem."}],"answers":[{"tags":[],"owner":{"account_id":23707148,"reputation":21,"user_id":17729476,"display_name":"AKSHAY BHADERIYA"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640064933,"creation_date":1640064933,"answer_id":70431077,"question_id":70430329,"body_markdown":"You can use libraries like Java.File for doing this operation.","title":"java delete text from a file","body":"<p>You can use libraries like Java.File for doing this operation.</p>\n"}],"owner":{"account_id":4221948,"reputation":1,"user_id":3456516,"display_name":"user3456516"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1640075527,"answer_count":1,"score":-2,"last_activity_date":1640064933,"creation_date":1640057200,"question_id":70430329,"body_markdown":"i created a method that removes text from a file. but it is not the best solution. can you please help me improve it\r\n\r\nit work as follow:\r\n\r\n1.use the method buscarIndiceLibro to find the position of the  text to delete\r\n2.call the method listarLibros to load the content of the hole file.\r\n3.remove from the array the text using the position\r\n4.  write again in the file.\r\n///////////////////////\r\n\r\n\r\n    @Override\r\n        public void borrarLibroDeArchivo(String nombrelibroBorrar, String nombreRecurso) throws ErrorEscrituraDatos {\r\n                   \r\n    try {\r\n                \r\n                int posicion =  this.buscarIndiceLibro(nombrelibroBorrar, nombreRecurso);\r\n                System.out.println(&quot;posicion&quot;+ posicion+&quot;\\n&quot;);\r\n                var catalogocompleto=   this.listarLibros(nombreRecurso);\r\n                System.out.println(&quot;catalogo completo&quot;+ catalogocompleto+&quot;\\n&quot;);\r\n                catalogocompleto.remove(posicion);\r\n               \r\n            \r\n                try {\r\n                    PrintWriter sobreEscribir = new PrintWriter(new FileWriter(nombreRecurso));\r\n                    \r\n                    for( libro posicionArray: catalogocompleto){\r\n                    \r\n                        libro agregarArchivo =posicionArray;\r\n                    \r\n                    sobreEscribir.println(agregarArchivo.toString());\r\n                    }\r\n                    \r\n                    \r\n                    \r\n                    \r\n                    \r\n                    \r\n                    \r\n                    sobreEscribir.close();\r\n                    \r\n                    // System.out.println(&quot;el nuevo catalogo de libros es: &quot;+ this.listarLibros(nombreRecurso));\r\n                } catch (IOException ex) {\r\n                    ex.printStackTrace(System.out);\r\n                    System.out.println(&quot; error al escribir el archivo&quot;);\r\n                }\r\n                \r\n                \r\n            } catch (ErrorLeyendoDatos ex) {\r\n                ex.printStackTrace(System.out);\r\n            }\r\n    \r\n    \r\n    \r\n        }\r\n\r\n\r\n    \r\n //////////////       \r\n\r\n    @Override\r\n        public List&lt;libro&gt; listarLibros(String nombreRecurso) throws ErrorLeyendoDatos {\r\n            var archivo = new File(nombreRecurso);\r\n            List&lt;libro&gt; catalogoLibros = new ArrayList&lt;&gt;();\r\n            try {\r\n                //cargar el contenido del archivo en memoria\r\n                BufferedReader datosEntrada = new BufferedReader(new FileReader(archivo));\r\n                // creo una variable para leer cada linea\r\n                String leerLinea = null;\r\n                leerLinea = datosEntrada.readLine();\r\n                while (leerLinea != null) {\r\n                    // se crea un objeto tipo libro para meter al array\r\n                    libro nombreLibro = new libro(leerLinea);\r\n                    catalogoLibros.add(nombreLibro);\r\n                    leerLinea = datosEntrada.readLine();\r\n                }\r\n                datosEntrada.close();\r\n            } catch (FileNotFoundException ex) {\r\n                // atrapa el error al leer el archivo\r\n                ex.printStackTrace(System.out);\r\n                throw new ErrorLeyendoDatos(&quot;error al listar las peliculas&quot; + ex.getMessage());\r\n            } catch (IOException ex) {\r\n                // atrapa el erro al leer la linea\r\n                ex.printStackTrace();\r\n                throw new ErrorLeyendoDatos(&quot;error al leer la Pelicula&quot; + ex.getMessage());\r\n            }\r\n            return catalogoLibros;\r\n        }\r\n\r\n////////////////////////////////\r\n\r\n\r\n    public int buscarIndiceLibro(String nombreLibroBuscar, String nombreRecurso) throws ErrorLeyendoDatos {\r\n            var archivo = new File(nombreRecurso);\r\n            int posicion = 0;\r\n            try {\r\n                var datosEntrada = new BufferedReader(new FileReader(archivo));\r\n                var leerlinea = datosEntrada.readLine();\r\n                int index = 0;\r\n                while (leerlinea != null) {\r\n                    if (nombreLibroBuscar != null &amp;&amp; nombreLibroBuscar.equalsIgnoreCase(leerlinea)) {\r\n                        posicion = index;\r\n                        break;\r\n                    }\r\n                    leerlinea = datosEntrada.readLine();\r\n                    index++;\r\n                }\r\n                datosEntrada.close();\r\n            } catch (FileNotFoundException ex) {\r\n                ex.printStackTrace();\r\n                throw new ErrorLeyendoDatos(&quot;error leyendo el archivo&quot; + ex.getMessage());\r\n            } catch (IOException ex) {\r\n                ex.printStackTrace(System.out);\r\n                throw new ErrorLeyendoDatos(&quot;error leyendo el archivo&quot; + ex.getMessage());\r\n            }\r\n            return posicion;\r\n        }\r\n\r\n///////////////////////////////**\r\n\r\nalso tried to use  replaceall without success\r\n\r\n\r\n     **// metodo no funciono\r\n    //\r\n    //        try {\r\n    //            \r\n    //            \r\n    //            \r\n    //            \r\n    //            BufferedReader leerarchivo = new BufferedReader(new FileReader(archivo));\r\n    //            String archivoCompleto = leerarchivo.toString();\r\n    //            System.out.println(&quot;El contenido completo del archivo es &quot; + archivoCompleto);\r\n    //          ///borrar la pelicula\r\n    //            var archivoEditado = archivoCompleto.replaceAll(nombrelibroBorrar, &quot;&quot;);\r\n    //            //volver a escribir el archivo\r\n    //            PrintWriter sobreescribir = new PrintWriter(new FileWriter(nombreRecurso));\r\n    //            sobreescribir.append(archivoEditado);\r\n    //             sobreescribir.close();\r\n    //\r\n    //            leerarchivo.close();\r\n    //           \r\n    //\r\n    //        } catch (IOException ex) {\r\n    //            ex.printStackTrace(System.out);\r\n    //            throw new ErrorEscrituraDatos(&quot;error al eliminar la pelicula&quot; + ex.getMessage());\r\n    //        }\r\n    \r\n    // fin metodo no funciono**\r\n\r\n\r\nThank you for your assistance\r\n\r\n\r\n\r\n","title":"java delete text from a file","body":"<p>i created a method that removes text from a file. but it is not the best solution. can you please help me improve it</p>\n<p>it work as follow:</p>\n<p>1.use the method buscarIndiceLibro to find the position of the  text to delete\n2.call the method listarLibros to load the content of the hole file.\n3.remove from the array the text using the position\n4.  write again in the file.\n///////////////////////</p>\n<pre><code>@Override\n    public void borrarLibroDeArchivo(String nombrelibroBorrar, String nombreRecurso) throws ErrorEscrituraDatos {\n               \ntry {\n            \n            int posicion =  this.buscarIndiceLibro(nombrelibroBorrar, nombreRecurso);\n            System.out.println(&quot;posicion&quot;+ posicion+&quot;\\n&quot;);\n            var catalogocompleto=   this.listarLibros(nombreRecurso);\n            System.out.println(&quot;catalogo completo&quot;+ catalogocompleto+&quot;\\n&quot;);\n            catalogocompleto.remove(posicion);\n           \n        \n            try {\n                PrintWriter sobreEscribir = new PrintWriter(new FileWriter(nombreRecurso));\n                \n                for( libro posicionArray: catalogocompleto){\n                \n                    libro agregarArchivo =posicionArray;\n                \n                sobreEscribir.println(agregarArchivo.toString());\n                }\n                \n                \n                \n                \n                \n                \n                \n                sobreEscribir.close();\n                \n                // System.out.println(&quot;el nuevo catalogo de libros es: &quot;+ this.listarLibros(nombreRecurso));\n            } catch (IOException ex) {\n                ex.printStackTrace(System.out);\n                System.out.println(&quot; error al escribir el archivo&quot;);\n            }\n            \n            \n        } catch (ErrorLeyendoDatos ex) {\n            ex.printStackTrace(System.out);\n        }\n\n\n\n    }\n</code></pre>\n<p>//////////////</p>\n<pre><code>@Override\n    public List&lt;libro&gt; listarLibros(String nombreRecurso) throws ErrorLeyendoDatos {\n        var archivo = new File(nombreRecurso);\n        List&lt;libro&gt; catalogoLibros = new ArrayList&lt;&gt;();\n        try {\n            //cargar el contenido del archivo en memoria\n            BufferedReader datosEntrada = new BufferedReader(new FileReader(archivo));\n            // creo una variable para leer cada linea\n            String leerLinea = null;\n            leerLinea = datosEntrada.readLine();\n            while (leerLinea != null) {\n                // se crea un objeto tipo libro para meter al array\n                libro nombreLibro = new libro(leerLinea);\n                catalogoLibros.add(nombreLibro);\n                leerLinea = datosEntrada.readLine();\n            }\n            datosEntrada.close();\n        } catch (FileNotFoundException ex) {\n            // atrapa el error al leer el archivo\n            ex.printStackTrace(System.out);\n            throw new ErrorLeyendoDatos(&quot;error al listar las peliculas&quot; + ex.getMessage());\n        } catch (IOException ex) {\n            // atrapa el erro al leer la linea\n            ex.printStackTrace();\n            throw new ErrorLeyendoDatos(&quot;error al leer la Pelicula&quot; + ex.getMessage());\n        }\n        return catalogoLibros;\n    }\n</code></pre>\n<p>////////////////////////////////</p>\n<pre><code>public int buscarIndiceLibro(String nombreLibroBuscar, String nombreRecurso) throws ErrorLeyendoDatos {\n        var archivo = new File(nombreRecurso);\n        int posicion = 0;\n        try {\n            var datosEntrada = new BufferedReader(new FileReader(archivo));\n            var leerlinea = datosEntrada.readLine();\n            int index = 0;\n            while (leerlinea != null) {\n                if (nombreLibroBuscar != null &amp;&amp; nombreLibroBuscar.equalsIgnoreCase(leerlinea)) {\n                    posicion = index;\n                    break;\n                }\n                leerlinea = datosEntrada.readLine();\n                index++;\n            }\n            datosEntrada.close();\n        } catch (FileNotFoundException ex) {\n            ex.printStackTrace();\n            throw new ErrorLeyendoDatos(&quot;error leyendo el archivo&quot; + ex.getMessage());\n        } catch (IOException ex) {\n            ex.printStackTrace(System.out);\n            throw new ErrorLeyendoDatos(&quot;error leyendo el archivo&quot; + ex.getMessage());\n        }\n        return posicion;\n    }\n</code></pre>\n<p>///////////////////////////////**</p>\n<p>also tried to use  replaceall without success</p>\n<pre><code> **// metodo no funciono\n//\n//        try {\n//            \n//            \n//            \n//            \n//            BufferedReader leerarchivo = new BufferedReader(new FileReader(archivo));\n//            String archivoCompleto = leerarchivo.toString();\n//            System.out.println(&quot;El contenido completo del archivo es &quot; + archivoCompleto);\n//          ///borrar la pelicula\n//            var archivoEditado = archivoCompleto.replaceAll(nombrelibroBorrar, &quot;&quot;);\n//            //volver a escribir el archivo\n//            PrintWriter sobreescribir = new PrintWriter(new FileWriter(nombreRecurso));\n//            sobreescribir.append(archivoEditado);\n//             sobreescribir.close();\n//\n//            leerarchivo.close();\n//           \n//\n//        } catch (IOException ex) {\n//            ex.printStackTrace(System.out);\n//            throw new ErrorEscrituraDatos(&quot;error al eliminar la pelicula&quot; + ex.getMessage());\n//        }\n\n// fin metodo no funciono**\n</code></pre>\n<p>Thank you for your assistance</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":3146783,"reputation":11131,"user_id":2661118,"display_name":"Gopal Gopi"},"score":0,"creation_date":1384152760,"post_id":19900402,"comment_id":29606999,"body_markdown":"how and what you want to display then?","body":"how and what you want to display then?"},{"owner":{"account_id":1112634,"reputation":3922,"user_id":1102799,"accept_rate":56,"display_name":"Rethinavel"},"score":1,"creation_date":1384152853,"post_id":19900402,"comment_id":29607033,"body_markdown":"@Software sainath For the 3rd one 100/250 = 0.04. The result above is o.0.","body":"@Software sainath For the 3rd one 100/250 = 0.04. The result above is o.0."},{"owner":{"account_id":2602697,"reputation":820,"user_id":2254638,"accept_rate":39,"display_name":"pitu"},"score":0,"creation_date":1384152883,"post_id":19900402,"comment_id":29607042,"body_markdown":"100/250=0.4 &amp; 1/5 =0.2 ,so how it is correct, why 0.0 ?","body":"100/250=0.4 &amp; 1/5 =0.2 ,so how it is correct, why 0.0 ?"},{"owner":{"account_id":1588352,"reputation":273,"user_id":1472234,"display_name":"Pawan Kumar"},"score":1,"creation_date":1384152943,"post_id":19900402,"comment_id":29607057,"body_markdown":"I think you&#39;re looking to get a floating point values in the log. You should be doing `Float.toString(100f/50)` instead of `Float.toString(100/50)`","body":"I think you&#39;re looking to get a floating point values in the log. You should be doing <code>Float.toString(100f&#47;50)</code> instead of <code>Float.toString(100&#47;50)</code>"},{"owner":{"account_id":1875383,"reputation":1040,"user_id":1696704,"accept_rate":35,"display_name":"Software Sainath"},"score":0,"creation_date":1384152999,"post_id":19900402,"comment_id":29607081,"body_markdown":"Yeah You are doing Integer Division and result is definitely an integer and later you are casting to float thats why it is adding .0 to the int","body":"Yeah You are doing Integer Division and result is definitely an integer and later you are casting to float thats why it is adding .0 to the int"},{"owner":{"account_id":2602697,"reputation":820,"user_id":2254638,"accept_rate":39,"display_name":"pitu"},"score":0,"creation_date":1384153195,"post_id":19900402,"comment_id":29607151,"body_markdown":"ok thnak you all, all you are right,","body":"ok thnak you all, all you are right,"}],"answers":[{"tags":[],"owner":{"account_id":2409874,"reputation":2850,"user_id":2105241,"accept_rate":33,"display_name":"Ahmad Raza"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1384152876,"creation_date":1384152876,"answer_id":19900506,"question_id":19900402,"body_markdown":"Use this code.\r\n\r\nLog.i(&quot;100/50&quot;, Float.toString(100/50f));\r\nLog.i(&quot;100/100&quot;, Float.toString(100/100f));\r\nLog.i(&quot;100/250&quot;, Float.toString(100/250f));\r\nLog.i(&quot;1/5&quot;, Float.toString(1/5f));\r\n\r\nHope it will work for you.","title":"Float to String conversion in android","body":"<p>Use this code.</p>\n\n<p>Log.i(\"100/50\", Float.toString(100/50f));\nLog.i(\"100/100\", Float.toString(100/100f));\nLog.i(\"100/250\", Float.toString(100/250f));\nLog.i(\"1/5\", Float.toString(1/5f));</p>\n\n<p>Hope it will work for you.</p>\n"},{"tags":[],"owner":{"account_id":2052678,"reputation":134073,"user_id":1831293,"accept_rate":91,"display_name":"Evgeniy Dorofeev"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1384152892,"creation_date":1384152892,"answer_id":19900509,"question_id":19900402,"body_markdown":"You need to use floats instead of ints, try `Log.i(&quot;100/50&quot;, Float.toString(100f/50));` this makes Java to use float arithmetic, otherwise it does int division then converts the result to float\r\n","title":"Float to String conversion in android","body":"<p>You need to use floats instead of ints, try <code>Log.i(\"100/50\", Float.toString(100f/50));</code> this makes Java to use float arithmetic, otherwise it does int division then converts the result to float</p>\n"},{"tags":[],"owner":{"account_id":2072408,"reputation":6907,"user_id":1846558,"accept_rate":25,"display_name":"Jitender Dev"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1384153412,"creation_date":1384153009,"answer_id":19900541,"question_id":19900402,"body_markdown":"Do like this\r\n\r\n    Log.i(&quot;100/250&quot;, Float.toString(100f/250f));\r\n    Log.i(&quot;1/5&quot;, Float.toString(1f/5f));\r\n\r\noutput is\r\n\r\n    11-11 12:25:32.198: I/100/250(351): 0.4\r\n    11-11 12:25:32.208: I/1/5(351): 0.2\r\n\r\nFloat.toString takes an input floating point\r\n\r\n    public static String toString (float f)\r\n\r\n    where f is the float to convert to a string.\r\n\r\nMore information is available on [Developers Website][1].\r\n\r\n\r\n  [1]: http://developer.android.com/reference/java/lang/Float.html","title":"Float to String conversion in android","body":"<p>Do like this</p>\n\n<pre><code>Log.i(\"100/250\", Float.toString(100f/250f));\nLog.i(\"1/5\", Float.toString(1f/5f));\n</code></pre>\n\n<p>output is</p>\n\n<pre><code>11-11 12:25:32.198: I/100/250(351): 0.4\n11-11 12:25:32.208: I/1/5(351): 0.2\n</code></pre>\n\n<p>Float.toString takes an input floating point</p>\n\n<pre><code>public static String toString (float f)\n\nwhere f is the float to convert to a string.\n</code></pre>\n\n<p>More information is available on <a href=\"http://developer.android.com/reference/java/lang/Float.html\" rel=\"nofollow\">Developers Website</a>.</p>\n"},{"tags":[],"owner":{"account_id":38907,"reputation":53159,"user_id":111988,"accept_rate":74,"display_name":"Sunil Kumar Sahoo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640064859,"creation_date":1384153028,"answer_id":19900546,"question_id":19900402,"body_markdown":"You are performing division of two integers. So by default output will be in integer. Instead of that try to type cast the dividend into float e.g. (float)100/250, so the output will be in float and you will get proper result.\r\n\r\nE.g. instead of 100/250 try (float)100/250 or 100f/250.","title":"Float to String conversion in android","body":"<p>You are performing division of two integers. So by default output will be in integer. Instead of that try to type cast the dividend into float e.g. (float)100/250, so the output will be in float and you will get proper result.</p>\n<p>E.g. instead of 100/250 try (float)100/250 or 100f/250.</p>\n"}],"owner":{"account_id":2602697,"reputation":820,"user_id":2254638,"accept_rate":39,"display_name":"pitu"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11653,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":19900509,"answer_count":4,"score":0,"last_activity_date":1640064859,"creation_date":1384152395,"question_id":19900402,"body_markdown":"i am trying simple calculation of float value but the output are not proper\r\n\r\n    Log.i(&quot;100/50&quot;, Float.toString(100/50));\r\n    Log.i(&quot;100/100&quot;, Float.toString(100/100));\r\n    Log.i(&quot;100/250&quot;, Float.toString(100/250));\r\n    Log.i(&quot;1/5&quot;, Float.toString(1/5));\r\n\r\nlogcat output\r\n\r\n    11-10 23:36:23.677: I/100/50(28562): 2.0\r\n    11-10 23:36:23.677: I/100/100(28562): 1.0\r\n    11-10 23:36:23.685: I/100/250(28562): 0.0\r\n    11-10 23:38:23.685: I/1/5(28562): 0.0\r\n\r\nits a simple calculation of float, why its displaying such answer\r\n","title":"Float to String conversion in android","body":"<p>i am trying simple calculation of float value but the output are not proper</p>\n\n<pre><code>Log.i(\"100/50\", Float.toString(100/50));\nLog.i(\"100/100\", Float.toString(100/100));\nLog.i(\"100/250\", Float.toString(100/250));\nLog.i(\"1/5\", Float.toString(1/5));\n</code></pre>\n\n<p>logcat output</p>\n\n<pre><code>11-10 23:36:23.677: I/100/50(28562): 2.0\n11-10 23:36:23.677: I/100/100(28562): 1.0\n11-10 23:36:23.685: I/100/250(28562): 0.0\n11-10 23:38:23.685: I/1/5(28562): 0.0\n</code></pre>\n\n<p>its a simple calculation of float, why its displaying such answer</p>\n"},{"tags":["java","if-statement","conditional-statements"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1639941681,"post_id":70414609,"comment_id":124471262,"body_markdown":"Please read: [Why not upload images of code/errors when asking a question?](https://meta.stackoverflow.com/questions/285551/why-not-upload-images-of-code-errors-when-asking-a-question) --- Please read: [Why is “Can someone help me?” not an actual question?](https://meta.stackoverflow.com/questions/284236/why-is-can-someone-help-me-not-an-actual-question)","body":"Please read: <a href=\"https://meta.stackoverflow.com/questions/285551/why-not-upload-images-of-code-errors-when-asking-a-question\">Why not upload images of code/errors when asking a question?</a> --- Please read: <a href=\"https://meta.stackoverflow.com/questions/284236/why-is-can-someone-help-me-not-an-actual-question\">Why is “Can someone help me?” not an actual question?</a>"},{"owner":{"account_id":23667337,"reputation":1467,"user_id":17694626,"display_name":"Cheng Thao"},"score":0,"creation_date":1639941953,"post_id":70414609,"comment_id":124471319,"body_markdown":"HOw did you get a negative value for c?","body":"HOw did you get a negative value for c?"}],"answers":[{"tags":[],"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1639942433,"creation_date":1639942433,"answer_id":70414712,"question_id":70414609,"body_markdown":"We want to display the temperature closest to `0`, i.e. the temperature whose absolute value is smallest. The code presented is already pretty close. There is just one small bug in this line:\r\n\r\n    if (Math.abs(inp) &lt; c)\r\n\r\nWe compare the absolute value of `inp` against the value of `c`. Looking at the body of the `if`, we see that `c` is set to the value of `inp`. The value of `inp` can be negative, thus `c` can be negative. Going back to the `if`-condition: as soon as `c` is negative, `Math.abs(inp) &lt; c` will always evaluate to `false`. Hence, we have to also take the absolute value of `c` in the condition:\r\n\r\n    if (Math.abs(inp) &lt; Math.abs(c))\r\n\r\n[&lt;kbd&gt;Ideone demo&lt;/kbd&gt;][Ideone]\r\n\r\nThis will produce the expected output.\r\n\r\n[Ideone]: https://ideone.com/BfQxdN","title":"Unexpected output while trying to display the temperature closest to zero (java)","body":"<p>We want to display the temperature closest to <code>0</code>, i.e. the temperature whose absolute value is smallest. The code presented is already pretty close. There is just one small bug in this line:</p>\n<pre><code>if (Math.abs(inp) &lt; c)\n</code></pre>\n<p>We compare the absolute value of <code>inp</code> against the value of <code>c</code>. Looking at the body of the <code>if</code>, we see that <code>c</code> is set to the value of <code>inp</code>. The value of <code>inp</code> can be negative, thus <code>c</code> can be negative. Going back to the <code>if</code>-condition: as soon as <code>c</code> is negative, <code>Math.abs(inp) &lt; c</code> will always evaluate to <code>false</code>. Hence, we have to also take the absolute value of <code>c</code> in the condition:</p>\n<pre><code>if (Math.abs(inp) &lt; Math.abs(c))\n</code></pre>\n<p><a href=\"https://ideone.com/BfQxdN\" rel=\"nofollow noreferrer\"><kbd>Ideone demo</kbd></a></p>\n<p>This will produce the expected output.</p>\n"},{"tags":[],"owner":{"account_id":15006333,"reputation":66,"user_id":10832295,"display_name":"Aziz Gasimov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639999664,"creation_date":1639999664,"answer_id":70421100,"question_id":70414609,"body_markdown":"The question is not asked properly but nevertheless, I will try to answer according to my best understanding. So the problem is when you run the program you are entering input in the wrong way for example you enter the number of temperatures that will be compared and then add the temperatures one after the other which in this case it is not accepted as a valid number instead it should be followed by Enter. Also, your code is not producing the correct result you have a logic error.","title":"Unexpected output while trying to display the temperature closest to zero (java)","body":"<p>The question is not asked properly but nevertheless, I will try to answer according to my best understanding. So the problem is when you run the program you are entering input in the wrong way for example you enter the number of temperatures that will be compared and then add the temperatures one after the other which in this case it is not accepted as a valid number instead it should be followed by Enter. Also, your code is not producing the correct result you have a logic error.</p>\n"}],"owner":{"account_id":23406965,"reputation":13,"user_id":17469215,"display_name":"Aqua"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":70414712,"answer_count":2,"score":0,"last_activity_date":1640064682,"creation_date":1639941620,"question_id":70414609,"body_markdown":"```\r\nimport java.util.*;\r\nclass Solution\r\n{\r\n\r\n    public static void main(String args[]) \r\n    {\r\n        Scanner sc = new Scanner(System.in);\r\n        int n = sc.nextInt();\r\n        int c=5526;\r\n        int inp;\r\n        for(int a=0;a&lt;n;a++)\r\n        {\r\n            inp=sc.nextInt();\r\n            if(Math.abs(inp)&lt;c)\r\n            {\r\n                c=inp;\r\n            }\r\n        }\r\n        System.out.print(c);\r\n    }\r\n}\r\n```\r\n\r\nInput:  \r\n![Inputs][1]\r\n\r\nError:  \r\n![Error][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/kBZal.png\r\n  [2]: https://i.stack.imgur.com/EiKvX.png\r\n\r\nI don&#39;t know what the problem is, I cant *try* anything cuz I don&#39;t even know where the bug is.","title":"Unexpected output while trying to display the temperature closest to zero (java)","body":"<pre><code>import java.util.*;\nclass Solution\n{\n\n    public static void main(String args[]) \n    {\n        Scanner sc = new Scanner(System.in);\n        int n = sc.nextInt();\n        int c=5526;\n        int inp;\n        for(int a=0;a&lt;n;a++)\n        {\n            inp=sc.nextInt();\n            if(Math.abs(inp)&lt;c)\n            {\n                c=inp;\n            }\n        }\n        System.out.print(c);\n    }\n}\n</code></pre>\n<p>Input:<br />\n<img src=\"https://i.stack.imgur.com/kBZal.png\" alt=\"Inputs\" /></p>\n<p>Error:<br />\n<img src=\"https://i.stack.imgur.com/EiKvX.png\" alt=\"Error\" /></p>\n<p>I don't know what the problem is, I cant <em>try</em> anything cuz I don't even know where the bug is.</p>\n"},{"tags":["java","gradle","aop","aspectj"],"answers":[{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1535788831,"creation_date":1535788831,"answer_id":52126155,"question_id":52113214,"body_markdown":"The aspect is unrelated to your annotation, but I understand you tried the simplest pointcut first.\r\n\r\nAs your around advice returns `void`, it can only intercept methods also returning `void`. Probably you are trying to intercept methods with other return types, though, I can only speculate because you did not share your target code. Make sure the around advice returns `Object` (or whichever return type your target methods have) and the result of `proceed()` is returned by the advice.\r\n\r\nBTW, your decision not to use Spring just because of its &quot;AOP lite&quot; framework Spring AOP was a good one, AspectJ is much more powerful and efficient. It would be crazy to use Spring just for its limited AOP capabilities. I really don&#39;t know why people think about Spring AOP first when it comes to AOP in Java, not about AspectJ.","title":"Apply aspect only on annotated methods using AspectJ(without Spring)","body":"<p>The aspect is unrelated to your annotation, but I understand you tried the simplest pointcut first.</p>\n\n<p>As your around advice returns <code>void</code>, it can only intercept methods also returning <code>void</code>. Probably you are trying to intercept methods with other return types, though, I can only speculate because you did not share your target code. Make sure the around advice returns <code>Object</code> (or whichever return type your target methods have) and the result of <code>proceed()</code> is returned by the advice.</p>\n\n<p>BTW, your decision not to use Spring just because of its \"AOP lite\" framework Spring AOP was a good one, AspectJ is much more powerful and efficient. It would be crazy to use Spring just for its limited AOP capabilities. I really don't know why people think about Spring AOP first when it comes to AOP in Java, not about AspectJ.</p>\n"},{"tags":[],"owner":{"account_id":40662,"reputation":20954,"user_id":117839,"accept_rate":74,"display_name":"Michael Wiles"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1536048719,"creation_date":1536048719,"answer_id":52161698,"question_id":52113214,"body_markdown":"At some point the aspect needs to be &quot;weaved&quot; into the classes so they can run. This can be done at [runtime][1] or at [compile][2] time.\r\n\r\nI would in fact suggest you use compile time as I think it significantly simplifies using aspectj (I&#39;ve used compile time quite successfully for a long time now). \r\n\r\nYou&#39;re just going to need to find and configure the gradle plugin for this (I use maven).\r\n\r\n  [1]: https://www.eclipse.org/aspectj/doc/released/devguide/ltw-configuration.html#enabling-load-time-weaving\r\n  [2]: https://www.eclipse.org/aspectj/doc/released/devguide/ajc-ref.html","title":"Apply aspect only on annotated methods using AspectJ(without Spring)","body":"<p>At some point the aspect needs to be \"weaved\" into the classes so they can run. This can be done at <a href=\"https://www.eclipse.org/aspectj/doc/released/devguide/ltw-configuration.html#enabling-load-time-weaving\" rel=\"nofollow noreferrer\">runtime</a> or at <a href=\"https://www.eclipse.org/aspectj/doc/released/devguide/ajc-ref.html\" rel=\"nofollow noreferrer\">compile</a> time.</p>\n\n<p>I would in fact suggest you use compile time as I think it significantly simplifies using aspectj (I've used compile time quite successfully for a long time now). </p>\n\n<p>You're just going to need to find and configure the gradle plugin for this (I use maven).</p>\n"},{"tags":[],"owner":{"account_id":7401461,"reputation":771,"user_id":5631767,"display_name":"Yorgos Lamprakis"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1536696530,"creation_date":1536696530,"answer_id":52283532,"question_id":52113214,"body_markdown":"Have you tried something like:\r\n\r\n    @Around(&quot;@annotation(mycustomannotation.package.MyCustomAnnotation)&quot;)\r\n\r\nwhere mycustomannotation.package.MyCustomAnnotation is the interface of the anotation you created","title":"Apply aspect only on annotated methods using AspectJ(without Spring)","body":"<p>Have you tried something like:</p>\n\n<pre><code>@Around(\"@annotation(mycustomannotation.package.MyCustomAnnotation)\")\n</code></pre>\n\n<p>where mycustomannotation.package.MyCustomAnnotation is the interface of the anotation you created</p>\n"}],"owner":{"account_id":304562,"reputation":12355,"user_id":614141,"accept_rate":96,"display_name":"javing"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1445,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":52283532,"answer_count":3,"score":2,"last_activity_date":1640064092,"creation_date":1535710362,"question_id":52113214,"body_markdown":"I want to use aspects in a Java that has some resources limitations so I can&#39;t use Spring aspects due to it&#39;s big memory footprint. \r\n\r\nSo want I want to do without Spring, is to create a custom annotation and which will trigger an aspect on the annotated methods.\r\n\r\nI have some implementation but I can&#39;t see the Apect being triggered when the method runs. This is what I have:\r\n\r\n**My custom annotation**\r\n\r\n\r\n\r\n\r\n\r\n     @Retention(RetentionPolicy.RUNTIME)\r\n    @Target(ElementType.METHOD)\r\n    public @interface MyCustomAnnotation {}\r\n\r\n **Where the annotation is used**\r\n   \r\n\r\n    @MyCustomAnnotation\r\n         public void someMethod() {\r\n            System.out.println(&quot;Method runnning...&quot;);\r\n         }\r\n\r\n**The aspect I created**\r\n\r\n    @Aspect\r\n    public class MyAspect {\r\n    \r\n        @Pointcut(&quot;execution(* *(..))&quot;)\r\n        public void callAt() {}\r\n    \r\n        @Around((&quot;callAt()&quot;))\r\n        public void doSomething(ProceedingJoinPoint point)  {\r\n          point.proceed();\r\n          System.out.println(&quot;Aspect is runnning...&quot;);\r\n    }\r\n\r\n**The configurations I have in my gradle file**\r\n\r\n\r\n    dependencies {\r\n            classpath &quot;gradle.plugin.aspectj:gradle-aspectj:0.1.6&quot;\r\n        }\r\n    \r\n    apply plugin: &#39;aspectj-gradle&#39;\r\n    \r\n        compile &#39;org.aspectj:aspectjrt:1.9.1&#39;\r\n        compile &#39;org.aspectj:aspectjweaver:1.9.1&#39;\r\n\r\nI have no idea why the aspect it&#39;s not being triggered, I can&#39;t see the message from that aspect in my console when the app runs.\r\n Any idea what I am missing?","title":"Apply aspect only on annotated methods using AspectJ(without Spring)","body":"<p>I want to use aspects in a Java that has some resources limitations so I can't use Spring aspects due to it's big memory footprint. </p>\n\n<p>So want I want to do without Spring, is to create a custom annotation and which will trigger an aspect on the annotated methods.</p>\n\n<p>I have some implementation but I can't see the Apect being triggered when the method runs. This is what I have:</p>\n\n<p><strong>My custom annotation</strong></p>\n\n<pre><code> @Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.METHOD)\npublic @interface MyCustomAnnotation {}\n</code></pre>\n\n<p><strong>Where the annotation is used</strong></p>\n\n<pre><code>@MyCustomAnnotation\n     public void someMethod() {\n        System.out.println(\"Method runnning...\");\n     }\n</code></pre>\n\n<p><strong>The aspect I created</strong></p>\n\n<pre><code>@Aspect\npublic class MyAspect {\n\n    @Pointcut(\"execution(* *(..))\")\n    public void callAt() {}\n\n    @Around((\"callAt()\"))\n    public void doSomething(ProceedingJoinPoint point)  {\n      point.proceed();\n      System.out.println(\"Aspect is runnning...\");\n}\n</code></pre>\n\n<p><strong>The configurations I have in my gradle file</strong></p>\n\n<pre><code>dependencies {\n        classpath \"gradle.plugin.aspectj:gradle-aspectj:0.1.6\"\n    }\n\napply plugin: 'aspectj-gradle'\n\n    compile 'org.aspectj:aspectjrt:1.9.1'\n    compile 'org.aspectj:aspectjweaver:1.9.1'\n</code></pre>\n\n<p>I have no idea why the aspect it's not being triggered, I can't see the message from that aspect in my console when the app runs.\n Any idea what I am missing?</p>\n"},{"tags":["java","android","android-studio","kotlin"],"answers":[{"tags":[],"owner":{"account_id":16815196,"reputation":166,"user_id":12157167,"display_name":"Mihir Akoliya"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640063936,"creation_date":1640063936,"answer_id":70430973,"question_id":69575197,"body_markdown":"A few day ago, i faced same problem on my android studio setup. i found solution for that issues but not exact. you can follow this manners: First i did unintstall android studio and clear the cache, and install again then after Update the classpath, gradle buildToolsVersion, plugin... \r\n\r\nit&#39;s Working for me","title":"Android Studio 2020.3.1, Can&#39;t Export Project to Zip file","body":"<p>A few day ago, i faced same problem on my android studio setup. i found solution for that issues but not exact. you can follow this manners: First i did unintstall android studio and clear the cache, and install again then after Update the classpath, gradle buildToolsVersion, plugin...</p>\n<p>it's Working for me</p>\n"}],"owner":{"account_id":14888784,"reputation":83,"user_id":10751172,"display_name":"John Alway"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":503,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1640063936,"creation_date":1634233602,"question_id":69575197,"body_markdown":"I&#39;m trying to use ***Android Studio 2020.3.1*** to export my project to a zip file, but it&#39;s not working.  I&#39;m using *File-&gt;Export-&gt;Export To Zip*.   No matter which folder or drive I try to save it to, I can&#39;t see it.\r\n\r\nI&#39;m on Windows 10.  Btw, I just updated to **Artic Fox**.  **I was at 4.2.1** and it was failing then, and is still failing after the Artic Fox update.  Is anyone else having his problem?   Are there any solutions?\r\n\r\n\r\n\r\n","title":"Android Studio 2020.3.1, Can&#39;t Export Project to Zip file","body":"<p>I'm trying to use <em><strong>Android Studio 2020.3.1</strong></em> to export my project to a zip file, but it's not working.  I'm using <em>File-&gt;Export-&gt;Export To Zip</em>.   No matter which folder or drive I try to save it to, I can't see it.</p>\n<p>I'm on Windows 10.  Btw, I just updated to <strong>Artic Fox</strong>.  <strong>I was at 4.2.1</strong> and it was failing then, and is still failing after the Artic Fox update.  Is anyone else having his problem?   Are there any solutions?</p>\n"},{"tags":["java","httpurlconnection"],"comments":[{"owner":{"account_id":1060181,"reputation":1400,"user_id":1061977,"accept_rate":65,"display_name":"Abhishek bhutra"},"score":0,"creation_date":1343652623,"post_id":11721821,"comment_id":15551400,"body_markdown":"500 is for internal server error","body":"500 is for internal server error"},{"owner":{"account_id":218061,"reputation":6484,"user_id":474193,"display_name":"sunil"},"score":0,"creation_date":1343654111,"post_id":11721821,"comment_id":15552117,"body_markdown":"whats `theurl` that you have tried ?","body":"whats <code>theurl</code> that you have tried ?"},{"owner":{"account_id":1070134,"reputation":561,"user_id":1069624,"accept_rate":57,"display_name":"user1069624"},"score":0,"creation_date":1343655073,"post_id":11721821,"comment_id":15552594,"body_markdown":"@sunil I was trying http://www.rassd.com/1-23544.htm","body":"@sunil I was trying <a href=\"http://www.rassd.com/1-23544.htm\" rel=\"nofollow noreferrer\">rassd.com/1-23544.htm</a>"}],"answers":[{"tags":[],"owner":{"account_id":185612,"reputation":10597,"user_id":422437,"accept_rate":84,"display_name":"Sandeep Pathak"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1343652352,"creation_date":1343652352,"answer_id":11721878,"question_id":11721821,"body_markdown":"The status code 500 suggests that the code at web server have been crashed .Use [HttpURLConnection#getErrorStream()][1] to get more idea of the error. Refer [Http Status Code 500][2]\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/net/HttpURLConnection.html#getErrorStream%28%29\r\n  [2]: http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.5.1","title":"Java HTTPUrlConnection returns 500 status code","body":"<p>The status code 500 suggests that the code at web server have been crashed .Use <a href=\"http://docs.oracle.com/javase/6/docs/api/java/net/HttpURLConnection.html#getErrorStream%28%29\" rel=\"noreferrer\">HttpURLConnection#getErrorStream()</a> to get more idea of the error. Refer <a href=\"http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.5.1\" rel=\"noreferrer\">Http Status Code 500</a></p>\n"},{"tags":[],"owner":{"account_id":1318015,"reputation":3345,"user_id":1264476,"display_name":"Germann Arlington"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1343653060,"creation_date":1343653060,"answer_id":11722087,"question_id":11721821,"body_markdown":"Make sure that your connection allows following redirects - this is one of the possible reasons for difference in behaviour between your connection and the browser (allows redirect by default).\r\n\r\nIt should be returning code 3xx, but there maybe something else somewhere that changes it to 500 for your connection.","title":"Java HTTPUrlConnection returns 500 status code","body":"<p>Make sure that your connection allows following redirects - this is one of the possible reasons for difference in behaviour between your connection and the browser (allows redirect by default).</p>\n\n<p>It should be returning code 3xx, but there maybe something else somewhere that changes it to 500 for your connection.</p>\n"},{"tags":[],"owner":{"account_id":2303960,"reputation":982,"user_id":2023625,"display_name":"Desphilboy"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1401926419,"creation_date":1401926419,"answer_id":24049548,"question_id":11721821,"body_markdown":"This is mostly happening because of encoding.\r\nIf you are using browser OK, but getting 500 ( internal server error ) in your program,it is because the browsers have a highly sophisticated code regarding charsets and content-types.\r\n\r\nHere is my code and it works in the case of ISO8859_1 as charset and english language.\r\n\r\n    public void sendPost(String Url, String params) throws Exception {\r\n\r\n\t\t\r\n\t\tString url=Url;\r\n\t\tURL obj = new URL(url);\r\n\t\tHttpsURLConnection con = (HttpsURLConnection) obj.openConnection();\r\n\r\n\t\tcon.setRequestProperty(&quot;Acceptcharset&quot;, &quot;en-us&quot;);\r\n\t\tcon.setRequestProperty(&quot;Accept-Language&quot;, &quot;en-US,en;q=0.5&quot;);\r\n\t\tcon.setRequestProperty(&quot;charset&quot;, &quot;EN-US&quot;);\r\n\t    con.setRequestProperty(&quot;Accept&quot;, &quot;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&quot;);\r\n\t\tString urlParameters=params;\r\n\t\t// Send post request\r\n\t\tcon.setDoOutput(true);\r\n\t\tcon.setDoInput(true);\r\n\t\tcon.connect();\r\n\t\t//con.\r\n\t\t\r\n\t\tDataOutputStream wr = new DataOutputStream(con.getOutputStream());\r\n\t\twr.writeBytes(urlParameters);\r\n\t\twr.flush();\r\n\t\twr.close();\r\n\r\n\t\tint responseCode = con.getResponseCode();\r\n\t\tSystem.out.println(&quot;\\nSending &#39;POST&#39; request to URL : &quot; + url);\r\n\t\tSystem.out.println(&quot;Post parameters : &quot; + urlParameters);\r\n\t\tSystem.out.println(&quot;Response Code : &quot; + responseCode);\r\n\r\n\t\tBufferedReader in = new BufferedReader(\r\n\t\t        new InputStreamReader(con.getInputStream()));\r\n\t\tString inputLine;\r\n\t\tStringBuffer response = new StringBuffer();\r\n\r\n\t\twhile ((inputLine = in.readLine()) != null) {\r\n\t\t\tresponse.append(inputLine);\r\n\t\t}\r\n\t\tin.close();\r\n\r\n\t\t//print result\r\n\t\tSystem.out.println(response.toString());\r\n\t\tthis.response=response.toString();\r\n\t\tcon.disconnect();\r\n\r\n\t}\r\n\r\n\r\nand in the main program , call it like this:\r\n\r\n    myclassname.sendPost(&quot;https://change.this2webaddress.desphilboy.com/websitealias/orwebpath/someaction&quot;,&quot;paramname=&quot;+URLEncoder.encode(urlparam,&quot;ISO8859_1&quot;))","title":"Java HTTPUrlConnection returns 500 status code","body":"<p>This is mostly happening because of encoding.\nIf you are using browser OK, but getting 500 ( internal server error ) in your program,it is because the browsers have a highly sophisticated code regarding charsets and content-types.</p>\n\n<p>Here is my code and it works in the case of ISO8859_1 as charset and english language.</p>\n\n<pre><code>public void sendPost(String Url, String params) throws Exception {\n\n\n    String url=Url;\n    URL obj = new URL(url);\n    HttpsURLConnection con = (HttpsURLConnection) obj.openConnection();\n\n    con.setRequestProperty(\"Acceptcharset\", \"en-us\");\n    con.setRequestProperty(\"Accept-Language\", \"en-US,en;q=0.5\");\n    con.setRequestProperty(\"charset\", \"EN-US\");\n    con.setRequestProperty(\"Accept\", \"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\");\n    String urlParameters=params;\n    // Send post request\n    con.setDoOutput(true);\n    con.setDoInput(true);\n    con.connect();\n    //con.\n\n    DataOutputStream wr = new DataOutputStream(con.getOutputStream());\n    wr.writeBytes(urlParameters);\n    wr.flush();\n    wr.close();\n\n    int responseCode = con.getResponseCode();\n    System.out.println(\"\\nSending 'POST' request to URL : \" + url);\n    System.out.println(\"Post parameters : \" + urlParameters);\n    System.out.println(\"Response Code : \" + responseCode);\n\n    BufferedReader in = new BufferedReader(\n            new InputStreamReader(con.getInputStream()));\n    String inputLine;\n    StringBuffer response = new StringBuffer();\n\n    while ((inputLine = in.readLine()) != null) {\n        response.append(inputLine);\n    }\n    in.close();\n\n    //print result\n    System.out.println(response.toString());\n    this.response=response.toString();\n    con.disconnect();\n\n}\n</code></pre>\n\n<p>and in the main program , call it like this:</p>\n\n<pre><code>myclassname.sendPost(\"https://change.this2webaddress.desphilboy.com/websitealias/orwebpath/someaction\",\"paramname=\"+URLEncoder.encode(urlparam,\"ISO8859_1\"))\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6185662,"reputation":31,"user_id":4819854,"display_name":"FX Swede"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1429734770,"creation_date":1429734770,"answer_id":29808223,"question_id":11721821,"body_markdown":"I ran into the problem of &quot;URL works in browser, but when I do http-get in java I get a 500 Error&quot;.\r\n\r\nIn my case the problem was that the regular http-get ended up in an infinite redirect loop between /default.aspx and /login.aspx\r\n\r\n            URL oUrl = new URL(url);\r\n\t\t\tHttpURLConnection con = (HttpURLConnection) oUrl.openConnection();\r\n\t\t\tcon.setRequestMethod(&quot;GET&quot;);\r\n\t\t\t...\r\n\t\t\tint responseCode = con.getResponseCode();\r\n\r\nWhat was happening was: The server serves up a three-part cookie and con.getResponseCode() only used one of the parts. The cookie data in the header looked like this:\r\n\r\n    header.key = null\r\n         value = HTTP/1.1 302 Found\r\n    ...\r\n    header.key = Location\r\n         value = /default.aspx\r\n    header.key = Set-Cookie\r\n         value = WebCom-lbal=qxmgueUmKZvx8zjxPftC/bHT/g/rUrJXyOoX3YKnYJxEHwILnR13ojZmkkocFI7ZzU0aX9pVtJ93yNg=; path=/\r\n         value = USE_RESPONSIVE_GUI=1; expires=Wed, 17-Apr-2115 18:22:11 GMT; path=/\r\n         value = ASP.NET_SessionId=bf0bxkfawdwfr10ipmvviq3d; path=/; HttpOnly\r\n    ...\r\n\r\nSo the server when receiving only a third of the needed data got confused: You&#39;re logged in! No wait, you have to login. No, you&#39;re logged in, ...\r\n\r\nTo work around the infinite redirect-loop I had to manually look for re-directs and manually parse through the header for &quot;Set-cookie&quot; entries.\r\n\r\n            \tcon = (HttpURLConnection) oUrl.openConnection();\r\n\t\t\t\tcon.setRequestMethod(&quot;GET&quot;);\r\n\t\t\t\t...\r\n\t\t\t\tlog.debug(&quot;Disable auto-redirect. We have to look at each redirect manually&quot;);\r\n\t\t\t\tcon.setInstanceFollowRedirects(false);\r\n\t\t\t\t....\r\n\t\t\t\tint responseCode = con.getResponseCode();\r\n\r\nWith this code the parsing of the cookie, if we get a redirect in the responseCode:\r\n\r\n\tprivate String getNewCookiesIfAny(String origCookies, HttpURLConnection con) {\r\n\t\tString result = null;\r\n\t\tString key;\r\n\t\tSet&lt;Map.Entry&lt;String, List&lt;String&gt;&gt;&gt; allHeaders = con.getHeaderFields().entrySet();\r\n\t\tfor (Map.Entry&lt;String, List&lt;String&gt;&gt; header : allHeaders) {\r\n\t\t\tkey = header.getKey();\r\n\r\n\t\t\tif (key != null &amp;&amp; key.equalsIgnoreCase(HttpHeaders.SET_COOKIE)) {\r\n\t\t\t\t// get the cookie if need, for login\r\n\t\t\t\tList&lt;String&gt; values = header.getValue();\r\n\t\t\t\tfor (String value : values) {\r\n\t\t\t\t\tif (result == null || result.isEmpty()) {\r\n\t\t\t\t\t\tresult = value;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresult = result + &quot;; &quot; + value;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (result == null) {\r\n\t\t\tlog.debug(&quot;Reuse the original cookie&quot;);\r\n\t\t\tresult = origCookies;\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n","title":"Java HTTPUrlConnection returns 500 status code","body":"<p>I ran into the problem of \"URL works in browser, but when I do http-get in java I get a 500 Error\".</p>\n\n<p>In my case the problem was that the regular http-get ended up in an infinite redirect loop between /default.aspx and /login.aspx</p>\n\n<pre><code>        URL oUrl = new URL(url);\n        HttpURLConnection con = (HttpURLConnection) oUrl.openConnection();\n        con.setRequestMethod(\"GET\");\n        ...\n        int responseCode = con.getResponseCode();\n</code></pre>\n\n<p>What was happening was: The server serves up a three-part cookie and con.getResponseCode() only used one of the parts. The cookie data in the header looked like this:</p>\n\n<pre><code>header.key = null\n     value = HTTP/1.1 302 Found\n...\nheader.key = Location\n     value = /default.aspx\nheader.key = Set-Cookie\n     value = WebCom-lbal=qxmgueUmKZvx8zjxPftC/bHT/g/rUrJXyOoX3YKnYJxEHwILnR13ojZmkkocFI7ZzU0aX9pVtJ93yNg=; path=/\n     value = USE_RESPONSIVE_GUI=1; expires=Wed, 17-Apr-2115 18:22:11 GMT; path=/\n     value = ASP.NET_SessionId=bf0bxkfawdwfr10ipmvviq3d; path=/; HttpOnly\n...\n</code></pre>\n\n<p>So the server when receiving only a third of the needed data got confused: You're logged in! No wait, you have to login. No, you're logged in, ...</p>\n\n<p>To work around the infinite redirect-loop I had to manually look for re-directs and manually parse through the header for \"Set-cookie\" entries.</p>\n\n<pre><code>            con = (HttpURLConnection) oUrl.openConnection();\n            con.setRequestMethod(\"GET\");\n            ...\n            log.debug(\"Disable auto-redirect. We have to look at each redirect manually\");\n            con.setInstanceFollowRedirects(false);\n            ....\n            int responseCode = con.getResponseCode();\n</code></pre>\n\n<p>With this code the parsing of the cookie, if we get a redirect in the responseCode:</p>\n\n<pre><code>private String getNewCookiesIfAny(String origCookies, HttpURLConnection con) {\n    String result = null;\n    String key;\n    Set&lt;Map.Entry&lt;String, List&lt;String&gt;&gt;&gt; allHeaders = con.getHeaderFields().entrySet();\n    for (Map.Entry&lt;String, List&lt;String&gt;&gt; header : allHeaders) {\n        key = header.getKey();\n\n        if (key != null &amp;&amp; key.equalsIgnoreCase(HttpHeaders.SET_COOKIE)) {\n            // get the cookie if need, for login\n            List&lt;String&gt; values = header.getValue();\n            for (String value : values) {\n                if (result == null || result.isEmpty()) {\n                    result = value;\n                } else {\n                    result = result + \"; \" + value;\n                }\n            }\n        }\n    }\n    if (result == null) {\n        log.debug(\"Reuse the original cookie\");\n        result = origCookies;\n    }\n    return result;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6574158,"reputation":15,"user_id":5159604,"display_name":"wulf 21"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1466605750,"creation_date":1466605750,"answer_id":37971059,"question_id":11721821,"body_markdown":"In my case it turned out that the server always returns HTTP/1.1 500 (in Browser as in Java) for the page I wanted to access, but successfully delivers the webpage content nonetheless.\r\n\r\nA human accessing the specific page via Browser just doesn&#39;t notice, since he will see the page and no error message, in Java I had to read the error stream instead of the input stream (thanks @Muse).\r\n\r\nI have no idea why, though. Might be some obscure way to keep Crawlers out.","title":"Java HTTPUrlConnection returns 500 status code","body":"<p>In my case it turned out that the server always returns HTTP/1.1 500 (in Browser as in Java) for the page I wanted to access, but successfully delivers the webpage content nonetheless.</p>\n\n<p>A human accessing the specific page via Browser just doesn't notice, since he will see the page and no error message, in Java I had to read the error stream instead of the input stream (thanks @Muse).</p>\n\n<p>I have no idea why, though. Might be some obscure way to keep Crawlers out.</p>\n"},{"tags":[],"owner":{"account_id":3711000,"reputation":31781,"user_id":3088349,"accept_rate":100,"display_name":"Maytham Fahmi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1477480931,"creation_date":1477480931,"answer_id":40261013,"question_id":11721821,"body_markdown":"This is an old question, but I have had same issue and solved it this way.\r\n\r\nThis might help other is same situation.\r\n\r\nIn my case I was developing system on local environment, and every thing worked fine when I checked my Rest Api from browser but I got all the time thrown HTTP error 500 in my Android system.\r\n\r\nThe problem is when you work on Android, it works on VM (Virtual Machine), that said it means your local computer firewall might preventing your Virtual Machine accessing the local URL (IP) address.\r\n\r\nYou need just to allow that in your computer firewall. The same thing apply if you trying to access system from out side your network.","title":"Java HTTPUrlConnection returns 500 status code","body":"<p>This is an old question, but I have had same issue and solved it this way.</p>\n\n<p>This might help other is same situation.</p>\n\n<p>In my case I was developing system on local environment, and every thing worked fine when I checked my Rest Api from browser but I got all the time thrown HTTP error 500 in my Android system.</p>\n\n<p>The problem is when you work on Android, it works on VM (Virtual Machine), that said it means your local computer firewall might preventing your Virtual Machine accessing the local URL (IP) address.</p>\n\n<p>You need just to allow that in your computer firewall. The same thing apply if you trying to access system from out side your network.</p>\n"},{"tags":[],"owner":{"account_id":4580566,"reputation":235,"user_id":3717695,"display_name":"Raghu Teja"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1495025837,"creation_date":1495025837,"answer_id":44025553,"question_id":11721821,"body_markdown":"I faced the same issue, and our issue was there was a special symbol in one of the parameter values. We fixed it by using `URLEncoder.encode(String, String)`","title":"Java HTTPUrlConnection returns 500 status code","body":"<p>I faced the same issue, and our issue was there was a special symbol in one of the parameter values. We fixed it by using <code>URLEncoder.encode(String, String)</code></p>\n"},{"tags":[],"owner":{"account_id":23706975,"reputation":1,"user_id":17729321,"display_name":"user17729321"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640063260,"creation_date":1640062470,"answer_id":70430829,"question_id":11721821,"body_markdown":"Check the parameter\r\n\r\n`httpURLConnection.setDoOutput(false)`;\r\n\r\nOnly for `GET` Method and set to `true` on `POST`, this save me lot of time!!!\r\n\r\n","title":"Java HTTPUrlConnection returns 500 status code","body":"<p>Check the parameter</p>\n<p><code>httpURLConnection.setDoOutput(false)</code>;</p>\n<p>Only for <code>GET</code> Method and set to <code>true</code> on <code>POST</code>, this save me lot of time!!!</p>\n"}],"owner":{"account_id":1070134,"reputation":561,"user_id":1069624,"accept_rate":57,"display_name":"user1069624"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31529,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":8,"score":8,"last_activity_date":1640063260,"creation_date":1343652111,"question_id":11721821,"body_markdown":"I&#39;m trying to GET a url using HTTPUrlConnection, however I&#39;m always getting a 500 code, but when I try to access that same url from the browser or using curl, it works fine!\r\n\r\nThis is the code\r\n\r\n    try{\r\n\t\tURL url = new URL(&quot;theurl&quot;); \r\n\t\tHttpURLConnection httpcon = (HttpURLConnection) url.openConnection();\r\n\t\thttpcon.setRequestProperty(&quot;Accept&quot;, &quot;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&quot;);\r\n\t\thttpcon.setRequestProperty(&quot;User-Agent&quot;, &quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:14.0) Gecko/20100101 Firefox/14.0.1&quot;);\r\n\t\tSystem.out.println(httpcon.getHeaderFields());\r\n\t\t}catch (Exception e) {\r\n\t\t\tSystem.out.println(&quot;exception &quot;+e);\r\n\t\t}\r\n\r\nWhen I print the headerfields, it shows the 500 code.. when I change the URL to something else like google.com , it works fine. But I don&#39;t understand why it doesn&#39;t work here but it works fine on the browser and with curl.\r\n\r\nAny help would be highly appreciated..\r\n\r\nThank you,\r\n","title":"Java HTTPUrlConnection returns 500 status code","body":"<p>I'm trying to GET a url using HTTPUrlConnection, however I'm always getting a 500 code, but when I try to access that same url from the browser or using curl, it works fine!</p>\n\n<p>This is the code</p>\n\n<pre><code>try{\n    URL url = new URL(\"theurl\"); \n    HttpURLConnection httpcon = (HttpURLConnection) url.openConnection();\n    httpcon.setRequestProperty(\"Accept\", \"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\");\n    httpcon.setRequestProperty(\"User-Agent\", \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:14.0) Gecko/20100101 Firefox/14.0.1\");\n    System.out.println(httpcon.getHeaderFields());\n    }catch (Exception e) {\n        System.out.println(\"exception \"+e);\n    }\n</code></pre>\n\n<p>When I print the headerfields, it shows the 500 code.. when I change the URL to something else like google.com , it works fine. But I don't understand why it doesn't work here but it works fine on the browser and with curl.</p>\n\n<p>Any help would be highly appreciated..</p>\n\n<p>Thank you,</p>\n"},{"tags":["java","eclipse","maven","certificate"],"answers":[{"tags":[],"owner":{"account_id":6530913,"reputation":16,"user_id":5052068,"display_name":"RoPa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1640062979,"creation_date":1525926883,"answer_id":50265538,"question_id":50264870,"body_markdown":"https://stackoverflow.com/questions/25911623/problems-using-maven-and-ssl-behind-proxy\r\n\r\nHere is the thread looks similar to your issue, where you are trying to try to connect to an https remote repository - &quot;https://repo.maven.apache.org/maven2/&quot;. \r\nMostly certificate to support HTTPS connections is not included in included in the cacerts file.\r\n\r\n","title":"Certification path error when creating Maven project in Eclipse","body":"<p><a href=\"https://stackoverflow.com/questions/25911623/problems-using-maven-and-ssl-behind-proxy\">Problems using Maven and SSL behind proxy</a></p>\n<p>Here is the thread looks similar to your issue, where you are trying to try to connect to an https remote repository - &quot;https://repo.maven.apache.org/maven2/&quot;.\nMostly certificate to support HTTPS connections is not included in included in the cacerts file.</p>\n"},{"tags":[],"owner":{"account_id":540110,"reputation":957,"user_id":268764,"display_name":"Makatun"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640060400,"creation_date":1640060400,"answer_id":70430638,"question_id":50264870,"body_markdown":"Add SSL certificate to your JDK and then add this in eclipse.ini\r\n\r\n-Djavax.net.ssl.trustStore=C:\\Program Files\\Java\\jdk1.8.0_311\\jre\\lib\\security\\cacerts","title":"Certification path error when creating Maven project in Eclipse","body":"<p>Add SSL certificate to your JDK and then add this in eclipse.ini</p>\n<p>-Djavax.net.ssl.trustStore=C:\\Program Files\\Java\\jdk1.8.0_311\\jre\\lib\\security\\cacerts</p>\n"}],"owner":{"account_id":4382011,"reputation":1790,"user_id":3573403,"accept_rate":62,"display_name":"user3573403"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11128,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":50265538,"answer_count":2,"score":0,"last_activity_date":1640062979,"creation_date":1525921636,"question_id":50264870,"body_markdown":"I am trying to create a Maven project in Eclipse Oxygen but errors resulted. These are the steps that I did:\r\n\r\n1. Select File -&gt; New -&gt; Maven Project.\r\n2. On the pop-up window, check &quot;Create a simple project (skip archetype selection), and check &quot;Use default Workspace location&quot; (leaving the location field blank).\r\n3. Click Next.\r\n4. Enter &quot;com.xyz&quot; for &quot;Group Id&quot;, &quot;test&quot; for &quot;Artifact Id&quot;, &quot;0.0.1-SNAPSHOT&quot; for &quot;Version&quot;, and &quot;jar&quot; for &quot;Packaging&quot;.\r\n5. Leaving the rest of the fields blank, click Finish.\r\n\r\nThe project was created with errors. In the Workspace Log, I can see the following:\r\n\r\n        Could not calculate build plan: Plugin org.apache.maven.plugins:maven-resources-plugin:2.6 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.maven.plugins:maven-resources-plugin:jar:2.6\r\n\r\n\r\nWhen I opened the newly created pom.xml, I can see an error:\r\n\r\n    Multiple annotations found at this line:\r\n\t- CoreException: Could not calculate build plan: Plugin org.apache.maven.plugins:maven-compiler-plugin:3.1 or one of its dependencies could not be \r\n\t resolved: Failed to read artifact descriptor for org.apache.maven.plugins:maven-compiler-plugin:jar:3.1: ArtifactResolutionException: Failure to transfer \r\n\t org.apache.maven.plugins:maven-compiler-plugin:pom:3.1 from https://repo.maven.apache.org/maven2 was cached in the local repository, resolution will not be \r\n\t reattempted until the update interval of central has elapsed or updates are forced. Original error: Could not transfer artifact org.apache.maven.plugins:maven-\r\n\t compiler-plugin:pom:3.1 from/to central (https://repo.maven.apache.org/maven2): sun.security.validator.ValidatorException: PKIX path building failed: \r\n\t sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n\t- Plugin execution not covered by lifecycle configuration: org.apache.maven.plugins:maven-compiler-plugin:3.1:testCompile (execution: default-\r\n\t testCompile, phase: test-compile)\r\n\t- Failure to transfer org.apache.maven.plugins:maven-resources-plugin:pom:2.6 from https://repo.maven.apache.org/maven2 was cached in the local \r\n\t repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced. Original error: Could not transfer artifact \r\n\t org.apache.maven.plugins:maven-resources-plugin:pom:2.6 from/to central (https://repo.maven.apache.org/maven2): repo.maven.apache.org\r\n\t- Plugin execution not covered by lifecycle configuration: org.apache.maven.plugins:maven-compiler-plugin:3.1:compile (execution: default-compile, \r\n\t phase: compile)\r\n\r\n\r\nBelow is what I had previously put in the settings.xml, which contains the proxy settings as I am behind firewall.\r\n\r\n        &lt;settings xmlns=&quot;http://maven.apache.org/SETTINGS/1.0.0&quot;\r\n              xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n              xsi:schemaLocation=&quot;http://maven.apache.org/SETTINGS/1.0.0\r\n                                  https://maven.apache.org/xsd/settings-1.0.0.xsd&quot;&gt;\r\n        &lt;localRepository/&gt;\r\n        &lt;interactiveMode/&gt;\r\n        &lt;usePluginRegistry/&gt;\r\n        &lt;offline/&gt;\r\n        &lt;pluginGroups/&gt;\r\n        &lt;servers/&gt;\r\n        &lt;mirrors/&gt;\r\n        &lt;proxies&gt;\r\n                &lt;proxy&gt;\r\n                        &lt;id&gt;example-proxy&lt;/id&gt;\r\n                        &lt;active&gt;true&lt;/active&gt;\r\n                        &lt;protocol&gt;http&lt;/protocol&gt;\r\n                        &lt;host&gt;xx.xx.xx.xx&lt;/host&gt;\r\n                        &lt;port&gt;80&lt;/port&gt;\r\n                        &lt;username&gt;xxxxxxxx&lt;/username&gt;\r\n                        &lt;password&gt;xxxxxxxx&lt;/password&gt;\r\n                        &lt;nonProxyHosts&gt;localhost|127.0.0.1&lt;/nonProxyHosts&gt;\r\n                &lt;/proxy&gt;\r\n        &lt;/proxies&gt;\r\n        &lt;profiles/&gt;\r\n        &lt;activeProfiles/&gt;\r\n    &lt;/settings&gt;\r\n\r\nIt seems that my main problem has got to do with certification path, as shown by the following line which I extracted out from the above errors.\r\n\r\n    sun.security.validator.ValidatorException: PKIX path building failed: \r\n\t sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n\r\nSo how do I resolve this certification path error?","title":"Certification path error when creating Maven project in Eclipse","body":"<p>I am trying to create a Maven project in Eclipse Oxygen but errors resulted. These are the steps that I did:</p>\n\n<ol>\n<li>Select File -> New -> Maven Project.</li>\n<li>On the pop-up window, check \"Create a simple project (skip archetype selection), and check \"Use default Workspace location\" (leaving the location field blank).</li>\n<li>Click Next.</li>\n<li>Enter \"com.xyz\" for \"Group Id\", \"test\" for \"Artifact Id\", \"0.0.1-SNAPSHOT\" for \"Version\", and \"jar\" for \"Packaging\".</li>\n<li>Leaving the rest of the fields blank, click Finish.</li>\n</ol>\n\n<p>The project was created with errors. In the Workspace Log, I can see the following:</p>\n\n<pre><code>    Could not calculate build plan: Plugin org.apache.maven.plugins:maven-resources-plugin:2.6 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.maven.plugins:maven-resources-plugin:jar:2.6\n</code></pre>\n\n<p>When I opened the newly created pom.xml, I can see an error:</p>\n\n<pre><code>Multiple annotations found at this line:\n- CoreException: Could not calculate build plan: Plugin org.apache.maven.plugins:maven-compiler-plugin:3.1 or one of its dependencies could not be \n resolved: Failed to read artifact descriptor for org.apache.maven.plugins:maven-compiler-plugin:jar:3.1: ArtifactResolutionException: Failure to transfer \n org.apache.maven.plugins:maven-compiler-plugin:pom:3.1 from https://repo.maven.apache.org/maven2 was cached in the local repository, resolution will not be \n reattempted until the update interval of central has elapsed or updates are forced. Original error: Could not transfer artifact org.apache.maven.plugins:maven-\n compiler-plugin:pom:3.1 from/to central (https://repo.maven.apache.org/maven2): sun.security.validator.ValidatorException: PKIX path building failed: \n sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n- Plugin execution not covered by lifecycle configuration: org.apache.maven.plugins:maven-compiler-plugin:3.1:testCompile (execution: default-\n testCompile, phase: test-compile)\n- Failure to transfer org.apache.maven.plugins:maven-resources-plugin:pom:2.6 from https://repo.maven.apache.org/maven2 was cached in the local \n repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced. Original error: Could not transfer artifact \n org.apache.maven.plugins:maven-resources-plugin:pom:2.6 from/to central (https://repo.maven.apache.org/maven2): repo.maven.apache.org\n- Plugin execution not covered by lifecycle configuration: org.apache.maven.plugins:maven-compiler-plugin:3.1:compile (execution: default-compile, \n phase: compile)\n</code></pre>\n\n<p>Below is what I had previously put in the settings.xml, which contains the proxy settings as I am behind firewall.</p>\n\n<pre><code>    &lt;settings xmlns=\"http://maven.apache.org/SETTINGS/1.0.0\"\n          xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n          xsi:schemaLocation=\"http://maven.apache.org/SETTINGS/1.0.0\n                              https://maven.apache.org/xsd/settings-1.0.0.xsd\"&gt;\n    &lt;localRepository/&gt;\n    &lt;interactiveMode/&gt;\n    &lt;usePluginRegistry/&gt;\n    &lt;offline/&gt;\n    &lt;pluginGroups/&gt;\n    &lt;servers/&gt;\n    &lt;mirrors/&gt;\n    &lt;proxies&gt;\n            &lt;proxy&gt;\n                    &lt;id&gt;example-proxy&lt;/id&gt;\n                    &lt;active&gt;true&lt;/active&gt;\n                    &lt;protocol&gt;http&lt;/protocol&gt;\n                    &lt;host&gt;xx.xx.xx.xx&lt;/host&gt;\n                    &lt;port&gt;80&lt;/port&gt;\n                    &lt;username&gt;xxxxxxxx&lt;/username&gt;\n                    &lt;password&gt;xxxxxxxx&lt;/password&gt;\n                    &lt;nonProxyHosts&gt;localhost|127.0.0.1&lt;/nonProxyHosts&gt;\n            &lt;/proxy&gt;\n    &lt;/proxies&gt;\n    &lt;profiles/&gt;\n    &lt;activeProfiles/&gt;\n&lt;/settings&gt;\n</code></pre>\n\n<p>It seems that my main problem has got to do with certification path, as shown by the following line which I extracted out from the above errors.</p>\n\n<pre><code>sun.security.validator.ValidatorException: PKIX path building failed: \n sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n</code></pre>\n\n<p>So how do I resolve this certification path error?</p>\n"},{"tags":["java","java-stream","hashset","collectors"],"comments":[{"owner":{"account_id":10595663,"reputation":4835,"user_id":7804477,"display_name":"Gautham M"},"score":0,"creation_date":1639710692,"post_id":70387087,"comment_id":124424465,"body_markdown":"Are you looking for a way to get a Set of status codes for each description?","body":"Are you looking for a way to get a Set of status codes for each description?"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1639733453,"post_id":70387087,"comment_id":124429265,"body_markdown":"As the compilation error says, there is no `collect` method with two parameters. There is a method with one parameters and a method with three parameters. Performing a linear search through the set for each element in the accumulator function is one of the worst things someone could come up with, anyway.","body":"As the compilation error says, there is no <code>collect</code> method with two parameters. There is a method with one parameters and a method with three parameters. Performing a linear search through the set for each element in the accumulator function is one of the worst things someone could come up with, anyway."},{"owner":{"account_id":86631,"reputation":1226,"user_id":9692178,"display_name":"ThrowableException"},"score":0,"creation_date":1640014808,"post_id":70387087,"comment_id":124488537,"body_markdown":"@Holger I agree with your linear search comment. \nFor background, this is a change in existing code, Input is fixed as `Map&lt;Integer, String&gt;` and new calling code requires a `Set&lt;ComplexObject&gt;`.  \nI&#39;m now allowed to change any of those.\nI can write this code in imperative way. but couldn&#39;t figure out by stream pipeline. You already said no `Stream::collect`  method with 2 parameter. \nI added a sample code to depict what I expect, not a working code.  \nI believe my main question is &quot;how to have a `Collision resolution strategy` when collecting into `Set`&quot; ?","body":"@Holger I agree with your linear search comment.  For background, this is a change in existing code, Input is fixed as <code>Map&lt;Integer, String&gt;</code> and new calling code requires a <code>Set&lt;ComplexObject&gt;</code>.   I&#39;m now allowed to change any of those. I can write this code in imperative way. but couldn&#39;t figure out by stream pipeline. You already said no <code>Stream::collect</code>  method with 2 parameter.  I added a sample code to depict what I expect, not a working code.   I believe my main question is &quot;how to have a <code>Collision resolution strategy</code> when collecting into <code>Set</code>&quot; ?"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1640024271,"post_id":70387087,"comment_id":124492167,"body_markdown":"Did you try the answer?","body":"Did you try the answer?"},{"owner":{"account_id":86631,"reputation":1226,"user_id":9692178,"display_name":"ThrowableException"},"score":0,"creation_date":1640025660,"post_id":70387087,"comment_id":124492647,"body_markdown":"Answer is sort of wrong and uncompilable even when I provided the whole sample code... But it gives a direction to use 2 pipelines. I already upvoted it... Let me check more and maybe I&#39;ll update the working solution in question","body":"Answer is sort of wrong and uncompilable even when I provided the whole sample code... But it gives a direction to use 2 pipelines. I already upvoted it... Let me check more and maybe I&#39;ll update the working solution in question"},{"owner":{"account_id":86631,"reputation":1226,"user_id":9692178,"display_name":"ThrowableException"},"score":0,"creation_date":1640025763,"post_id":70387087,"comment_id":124492678,"body_markdown":"In my previous comment there is a typo I meant &quot; I&#39;m NOT  allowed to change any of those&quot; I typed now instead of not.","body":"In my previous comment there is a typo I meant &quot; I&#39;m NOT  allowed to change any of those&quot; I typed now instead of not."}],"answers":[{"tags":[],"owner":{"account_id":10595663,"reputation":4835,"user_id":7804477,"display_name":"Gautham M"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1640062035,"creation_date":1639712473,"answer_id":70388161,"question_id":70387087,"body_markdown":"You could have used `Collectors.groupingBy` to solve this:\r\n\r\n```java\r\nMap&lt;String, Set&lt;Integer&gt;&gt; map \r\n    = descMap.entrySet()\r\n             .stream()\r\n             .collect(Collectors.groupingBy(Entry::getValue, \r\n                                            Collectors.mapping(Entry::getKey, Collectors.toSet())));                                       \r\n```\r\n\r\nHere, a map would be generated with the description as the key. `Collectors.mapping` maps each entry to the status code and then combines them into a `Set`\r\n\r\nI think that a `Set&lt;Integer&gt;` instead of `Map&lt;Integer, Integer&gt;` would have been sufficient within the `StatusCounts` class. This is because from the code, it seems like you just want to know the different codes under a description. In that case you could try the below:\r\n```java\r\nreturn map.entrySet()\r\n          .stream()\r\n          .map(entry -&gt; new StatusCounts(entry.getKey(), entry.getValue()))\r\n          .collect(Collectors.toSet());\r\n```\r\n______________________________\r\n\r\n**UPDATE**\r\n--\r\n\r\nIf you are not allowed to change the existing `StatusCounts` class, then you could try the below:\r\n\r\n```java\r\nMap&lt;String, Map&lt;Integer, Integer&gt;&gt; tempMap\r\n    = descMap.entrySet()\r\n             .stream()\r\n             .collect(Collectors.groupingBy(Entry::getValue, \r\n                                            Collectors.mapping(Entry::getKey, Collectors.toMap(Function.identity(), v -&gt; 0))));\r\n\r\n// You may combine the below code with above instead of using a tempMap.\r\n// I have separated it for simplicity\r\nSet&lt;StatusCounts&gt; result \r\n    = tempMap.entrySet()\r\n             .stream()\r\n             .map(entry -&gt; new StatusCounts(entry.getKey(), entry.getValue()))\r\n             .collect(Collectors.toSet());\r\n```","title":"Unable to apply Merge function to convert to get Set on a Stream output","body":"<p>You could have used <code>Collectors.groupingBy</code> to solve this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String, Set&lt;Integer&gt;&gt; map \n    = descMap.entrySet()\n             .stream()\n             .collect(Collectors.groupingBy(Entry::getValue, \n                                            Collectors.mapping(Entry::getKey, Collectors.toSet())));                                       \n</code></pre>\n<p>Here, a map would be generated with the description as the key. <code>Collectors.mapping</code> maps each entry to the status code and then combines them into a <code>Set</code></p>\n<p>I think that a <code>Set&lt;Integer&gt;</code> instead of <code>Map&lt;Integer, Integer&gt;</code> would have been sufficient within the <code>StatusCounts</code> class. This is because from the code, it seems like you just want to know the different codes under a description. In that case you could try the below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>return map.entrySet()\n          .stream()\n          .map(entry -&gt; new StatusCounts(entry.getKey(), entry.getValue()))\n          .collect(Collectors.toSet());\n</code></pre>\n<hr />\n<h2><strong>UPDATE</strong></h2>\n<p>If you are not allowed to change the existing <code>StatusCounts</code> class, then you could try the below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String, Map&lt;Integer, Integer&gt;&gt; tempMap\n    = descMap.entrySet()\n             .stream()\n             .collect(Collectors.groupingBy(Entry::getValue, \n                                            Collectors.mapping(Entry::getKey, Collectors.toMap(Function.identity(), v -&gt; 0))));\n\n// You may combine the below code with above instead of using a tempMap.\n// I have separated it for simplicity\nSet&lt;StatusCounts&gt; result \n    = tempMap.entrySet()\n             .stream()\n             .map(entry -&gt; new StatusCounts(entry.getKey(), entry.getValue()))\n             .collect(Collectors.toSet());\n</code></pre>\n"}],"owner":{"account_id":86631,"reputation":1226,"user_id":9692178,"display_name":"ThrowableException"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":271,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70388161,"answer_count":1,"score":0,"last_activity_date":1640062035,"creation_date":1639700273,"question_id":70387087,"body_markdown":"Here is a sample source data structure to simplify the problem case data for my scenario. \r\nThis Map has duplicate descriptions for different codes.\r\n```java\r\nMap&lt;Integer, String&gt; descriptionsByCode = new HashMap();\r\ndescriptionsByCode.put(1, &quot;description 1&quot;);\r\ndescriptionsByCode.put(2, &quot;description 2&quot;);\r\ndescriptionsByCode.put(4, &quot;description 3&quot;);\r\ndescriptionsByCode.put(5, &quot;description 4&quot;);\r\ndescriptionsByCode.put(6, &quot;description 5&quot;);\r\ndescriptionsByCode.put(7, &quot;description 5&quot;);\r\ndescriptionsByCode.put(8, &quot;description 5&quot;);\r\ndescriptionsByCode.put(9, &quot;description 2&quot;);\r\ndescriptionsByCode.put(10, &quot;description 2&quot;);\r\ndescriptionsByCode.put(11, &quot;description 3&quot;);\r\ndescriptionsByCode.put(12, &quot;description 4&quot;);\r\ndescriptionsByCode.put(13, &quot;description 1&quot;);\r\ndescriptionsByCode.put(14, &quot;description 6&quot;);\r\ndescriptionsByCode.put(15, &quot;description 8&quot;);\r\n```\r\nI also have a complex business object, but for simplicity purpose lets assume there is an object with only 2 field.\r\n\r\n    @Data\r\n    @AllArgsConstructor\r\n    class StatusCounts {\r\n        private String description;\r\n        private Map&lt;Integer, Integer&gt; someIemCountByStatusCode; //defaults to zero for our example\r\n    }\r\n\r\n \r\nIf, I want to have a map of `StatusCount` object By Description.\r\nI can have it easily. Below is a working code, added here to concentrate on the main problem mentioned after this\r\n\r\n         Map&lt;String, StatusCounts&gt; statusCountsByDescription\r\n                = descriptionsByCode\r\n                .entrySet()\r\n                .stream()\r\n                .collect(Collectors.toMap(\r\n                        e -&gt; e.getValue(),  //key function\r\n                        e -&gt; new StatusCounts(e.getValue(),   //value function \r\n                                Collections.singletonMap(e.getKey(), 0)),\r\n                        (e, v) -&gt;  // merge function for collision \r\n                        { // is there a better way to write below code ? \r\n                            Map m = new HashMap();\r\n                            m.putAll(e.getItemCountByStatusCode());\r\n                            m.putAll(v.getItemCountByStatusCode());\r\n                            e.setItemCountByStatusCode(m);\r\n                            return e;\r\n                        }\r\n                ));\r\n\r\nAbove code is not clean, but working well.\r\nWhat I actually want is, a Set instead of Map \r\n\r\nI am unable to find a way, in `reduce` or `collect` functions, to provide a handling for `collision detection` (like merge function does in case of `Collectors.toMap`). \r\n\r\n\r\nThe combiner function in both reduce or collect, doesn&#39;t work for collision.  \r\n`Collectors.toSet` doesn&#39;t even accept any parameter. \r\nSo I though I can write collision detection handling in `accumulator` in case of `reduce` or in or `Biconsumer` in case of `collect`. So I tried below using `collect` &amp; `BiConsumer`\r\nBut this one is uncompilable same is happening with `reduce`\r\n\r\n    Set&lt;StatusCounts&gt; statusCounts\r\n                = descriptionsByCode\r\n                .entrySet()\r\n                .stream()\r\n                .collect(() -&gt; new HashSet&lt;StatusCounts&gt;(),\r\n                        (set, entry) -&gt; {\r\n                            Optional&lt;StatusCounts&gt; statusCount\r\n                                    = findStatusCountWithSameDescription(set, entry.getValue());\r\n\r\n                            if (statusCount.isPresent()) {\r\n                                statusCount.get()\r\n                                            .getItemCountByStatusCode()\r\n                                            .put(entry.getKey(), 0);\r\n                            } else {\r\n                                set.add(new StatusCounts(\r\n                                        entry.getValue(),\r\n                                        Collections.singletonMap(entry.getKey(), 0)));\r\n                            }\r\n                            return set;\r\n                        }\r\n                );\r\n\r\n \r\n\r\n    private static Optional&lt;StatusCounts&gt; findStatusCountWithSameDescription\r\n           (HashSet&lt;StatusCounts&gt; set, String description) {\r\n            return set.stream()\r\n                      .filter(e -&gt; e.getDescription()\r\n                                    .equalsIgnoreCase(description))\r\n                      .findFirst();\r\n        }\r\n\r\nThis is the compilation error\r\n\r\n    Cannot resolve method &#39;collect(&lt;lambda expression&gt;, &lt;lambda expression&gt;)&#39;","title":"Unable to apply Merge function to convert to get Set on a Stream output","body":"<p>Here is a sample source data structure to simplify the problem case data for my scenario.\nThis Map has duplicate descriptions for different codes.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;Integer, String&gt; descriptionsByCode = new HashMap();\ndescriptionsByCode.put(1, &quot;description 1&quot;);\ndescriptionsByCode.put(2, &quot;description 2&quot;);\ndescriptionsByCode.put(4, &quot;description 3&quot;);\ndescriptionsByCode.put(5, &quot;description 4&quot;);\ndescriptionsByCode.put(6, &quot;description 5&quot;);\ndescriptionsByCode.put(7, &quot;description 5&quot;);\ndescriptionsByCode.put(8, &quot;description 5&quot;);\ndescriptionsByCode.put(9, &quot;description 2&quot;);\ndescriptionsByCode.put(10, &quot;description 2&quot;);\ndescriptionsByCode.put(11, &quot;description 3&quot;);\ndescriptionsByCode.put(12, &quot;description 4&quot;);\ndescriptionsByCode.put(13, &quot;description 1&quot;);\ndescriptionsByCode.put(14, &quot;description 6&quot;);\ndescriptionsByCode.put(15, &quot;description 8&quot;);\n</code></pre>\n<p>I also have a complex business object, but for simplicity purpose lets assume there is an object with only 2 field.</p>\n<pre><code>@Data\n@AllArgsConstructor\nclass StatusCounts {\n    private String description;\n    private Map&lt;Integer, Integer&gt; someIemCountByStatusCode; //defaults to zero for our example\n}\n</code></pre>\n<p>If, I want to have a map of <code>StatusCount</code> object By Description.\nI can have it easily. Below is a working code, added here to concentrate on the main problem mentioned after this</p>\n<pre><code>     Map&lt;String, StatusCounts&gt; statusCountsByDescription\n            = descriptionsByCode\n            .entrySet()\n            .stream()\n            .collect(Collectors.toMap(\n                    e -&gt; e.getValue(),  //key function\n                    e -&gt; new StatusCounts(e.getValue(),   //value function \n                            Collections.singletonMap(e.getKey(), 0)),\n                    (e, v) -&gt;  // merge function for collision \n                    { // is there a better way to write below code ? \n                        Map m = new HashMap();\n                        m.putAll(e.getItemCountByStatusCode());\n                        m.putAll(v.getItemCountByStatusCode());\n                        e.setItemCountByStatusCode(m);\n                        return e;\n                    }\n            ));\n</code></pre>\n<p>Above code is not clean, but working well.\nWhat I actually want is, a Set instead of Map</p>\n<p>I am unable to find a way, in <code>reduce</code> or <code>collect</code> functions, to provide a handling for <code>collision detection</code> (like merge function does in case of <code>Collectors.toMap</code>).</p>\n<p>The combiner function in both reduce or collect, doesn't work for collision.<br />\n<code>Collectors.toSet</code> doesn't even accept any parameter.\nSo I though I can write collision detection handling in <code>accumulator</code> in case of <code>reduce</code> or in or <code>Biconsumer</code> in case of <code>collect</code>. So I tried below using <code>collect</code> &amp; <code>BiConsumer</code>\nBut this one is uncompilable same is happening with <code>reduce</code></p>\n<pre><code>Set&lt;StatusCounts&gt; statusCounts\n            = descriptionsByCode\n            .entrySet()\n            .stream()\n            .collect(() -&gt; new HashSet&lt;StatusCounts&gt;(),\n                    (set, entry) -&gt; {\n                        Optional&lt;StatusCounts&gt; statusCount\n                                = findStatusCountWithSameDescription(set, entry.getValue());\n\n                        if (statusCount.isPresent()) {\n                            statusCount.get()\n                                        .getItemCountByStatusCode()\n                                        .put(entry.getKey(), 0);\n                        } else {\n                            set.add(new StatusCounts(\n                                    entry.getValue(),\n                                    Collections.singletonMap(entry.getKey(), 0)));\n                        }\n                        return set;\n                    }\n            );\n\n\n\nprivate static Optional&lt;StatusCounts&gt; findStatusCountWithSameDescription\n       (HashSet&lt;StatusCounts&gt; set, String description) {\n        return set.stream()\n                  .filter(e -&gt; e.getDescription()\n                                .equalsIgnoreCase(description))\n                  .findFirst();\n    }\n</code></pre>\n<p>This is the compilation error</p>\n<pre><code>Cannot resolve method 'collect(&lt;lambda expression&gt;, &lt;lambda expression&gt;)'\n</code></pre>\n"},{"tags":["java","android","firebase","firebase-realtime-database","arraylist"],"answers":[{"tags":[],"owner":{"account_id":72426,"reputation":573714,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640061620,"creation_date":1640061620,"answer_id":70430758,"question_id":70430673,"body_markdown":"To add an item to an array, you must know the number of existing items that are in that array. So you will first have to read the existing items from the database, then add an item to the array in code, and then finally write the resulting array (or just the new item by its index) back into the database.\r\n\r\nThis is quite inefficient, which is why Firebase recommends against using array structures for list, and instead provides its own built-in `push()` method that generates unique, always-incrementing keys. For more on this, see the Firebase documentation on [adding an item to a list](https://firebase.google.com/docs/database/android/lists-of-data#append_to_a_list_of_data).\r\n\r\nTo learn more about why arrays are not a great data structure for Firebase, read Kato&#39;s classic article on [Best Practices: Arrays in Firebase](https://firebase.googleblog.com/2014/04/best-practices-arrays-in-firebase.html).","title":"Every time array list overrides the old values. How can I insert new values to array?","body":"<p>To add an item to an array, you must know the number of existing items that are in that array. So you will first have to read the existing items from the database, then add an item to the array in code, and then finally write the resulting array (or just the new item by its index) back into the database.</p>\n<p>This is quite inefficient, which is why Firebase recommends against using array structures for list, and instead provides its own built-in <code>push()</code> method that generates unique, always-incrementing keys. For more on this, see the Firebase documentation on <a href=\"https://firebase.google.com/docs/database/android/lists-of-data#append_to_a_list_of_data\" rel=\"nofollow noreferrer\">adding an item to a list</a>.</p>\n<p>To learn more about why arrays are not a great data structure for Firebase, read Kato's classic article on <a href=\"https://firebase.googleblog.com/2014/04/best-practices-arrays-in-firebase.html\" rel=\"nofollow noreferrer\">Best Practices: Arrays in Firebase</a>.</p>\n"}],"owner":{"account_id":2268208,"reputation":3,"user_id":1996286,"display_name":"Mano"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1640061620,"creation_date":1640060816,"question_id":70430673,"body_markdown":"\r\nI’m creating a simple cafe purchase module for an app, for a specific set of users, in android studio (java) using firebase. \r\nIn which, I have the user list under which a field called “cafeTrans” is specified to get the “datewise” purchases of the user. I want to record the bill amount of every purchases. made by the user. I have created a list and everytime the user purchases something the old values are getting overridden. I want to save every purchase amount. \r\n\r\nWhat to do? Could someone help me as to what to do? \r\nI would much appreciate the help. Been pondering over this for almost a week now, since I’m a newbie.\r\n\r\n**Function Code:**\r\n```\r\ncafeTransList = new ArrayList&lt;&gt;(); // Initiated at onCreate\r\n\r\n\r\npublic void uploadBillAmount(){\r\n\r\n    cafeTransListLevel = userLevel.child(&quot;cafeTrans&quot;).child(&quot;20211127&quot;);\r\n\r\n    cafeTransList.add(String.valueOf(billAmtInt));\r\n\r\n\r\n    cafeTransListLevel.setValue(cafeTransList).addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\r\n        @Override\r\n        public void onComplete(@NonNull Task&lt;Void&gt; task) {\r\n            if(task.isSuccessful()){\r\n                Log.i(&quot;Data Added&quot;, String.valueOf(billAmtInt));\r\n\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\n**userLevel indicates the DB node of the individual user\r\n**billAmtInt indicates the purchase value\r\n```\r\n\r\n**My User Model Class:**\r\n```\r\npublic class User {\r\n\r\n    private String lastUpdate, username, level, score, busNo, email, cash, dailylimit;\r\n    private List&lt;String&gt; cafeTransList;\r\n\r\n\r\n    public User(String lastUpdate, String username, String level, String score, String busNo, String email, String cash, String dailylimit, List&lt;String&gt; cafeTransList) {\r\n        this.lastUpdate = lastUpdate;\r\n        this.username = username;\r\n        this.level = level;\r\n        this.score = score;\r\n        this.busNo = busNo;\r\n        this.email = email;\r\n        this.cash = cash;\r\n        this.dailylimit = dailylimit;\r\n        this.cafeTransList = cafeTransList;\r\n    }\r\n\r\n    public User() {\r\n    }\r\n\r\n    public String getLastUpdate() { return lastUpdate; }\r\n\r\n    public void setLastUpdate(String lastUpdate) {\r\n        this.lastUpdate = lastUpdate;\r\n    }\r\n\r\n    public String getUsername() {\r\n        return username;\r\n    }\r\n\r\n    public void setUsername(String username) {\r\n        this.username = username;\r\n    }\r\n\r\n\r\n    public String getLevel() {\r\n        return level;\r\n    }\r\n\r\n    public void setLevel(String level) {\r\n        this.level = level;\r\n    }\r\n\r\n    public String getScore() {\r\n        return score;\r\n    }\r\n\r\n    public void setScore(String score) {\r\n        this.score = score;\r\n    }\r\n\r\n    public String getBusNo() {\r\n        return busNo;\r\n    }\r\n\r\n    public void setBusNo(String busNo) {\r\n        this.busNo = busNo;\r\n    }\r\n\r\n    public String getEmail() {\r\n        return email;\r\n    }\r\n\r\n    public void setEmail(String email) {\r\n        this.email = email;\r\n    }\r\n\r\n    public String getCash() {\r\n        return cash;\r\n    }\r\n\r\n    public void setCash(String cash) {\r\n        this.cash = cash;\r\n    }\r\n\r\n\r\n    public String getDailylimit() {\r\n        return dailylimit;\r\n    }\r\n\r\n    public void setDailylimit(String dailylimit) {\r\n        this.dailylimit = dailylimit;\r\n    }\r\n\r\n    public List&lt;String&gt; getcafeTransList() {\r\n        return cafeTransList;\r\n    }\r\n\r\n    public void setcafeTransList(List cafeTransList) {\r\n        this.cafeTransList = cafeTransList;\r\n    }\r\n}\r\n\r\n```\r\n***My DB Structure:***\r\n\r\n```\r\n“User-ID XXXXXXXXXXXXXXXXXXXX” : {\r\n      &quot;busNo&quot; : &quot;2&quot;,\r\n      &quot;cafeTrans&quot; : \r\n        {\r\n        &quot;20211127&quot; : [ &quot;10&quot; ] // this list values are getting overridden every time a new purchase is made for the date.\r\n        },\r\n      &quot;cash&quot; : &quot;30&quot;,\r\n      &quot;dailylimit&quot; : &quot;0&quot;,\r\n      &quot;email&quot; : &quot;a@b.com&quot;,\r\n      &quot;lastUpdate&quot; : &quot;20211209&quot;,\r\n      &quot;level&quot; : &quot;6&quot;,\r\n      &quot;score&quot; : “0”\r\n      &quot;username&quot; : &quot;Demo&quot;\r\n```","title":"Every time array list overrides the old values. How can I insert new values to array?","body":"<p>I’m creating a simple cafe purchase module for an app, for a specific set of users, in android studio (java) using firebase.\nIn which, I have the user list under which a field called “cafeTrans” is specified to get the “datewise” purchases of the user. I want to record the bill amount of every purchases. made by the user. I have created a list and everytime the user purchases something the old values are getting overridden. I want to save every purchase amount.</p>\n<p>What to do? Could someone help me as to what to do?\nI would much appreciate the help. Been pondering over this for almost a week now, since I’m a newbie.</p>\n<p><strong>Function Code:</strong></p>\n<pre><code>cafeTransList = new ArrayList&lt;&gt;(); // Initiated at onCreate\n\n\npublic void uploadBillAmount(){\n\n    cafeTransListLevel = userLevel.child(&quot;cafeTrans&quot;).child(&quot;20211127&quot;);\n\n    cafeTransList.add(String.valueOf(billAmtInt));\n\n\n    cafeTransListLevel.setValue(cafeTransList).addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\n        @Override\n        public void onComplete(@NonNull Task&lt;Void&gt; task) {\n            if(task.isSuccessful()){\n                Log.i(&quot;Data Added&quot;, String.valueOf(billAmtInt));\n\n            }\n        }\n    });\n}\n\n**userLevel indicates the DB node of the individual user\n**billAmtInt indicates the purchase value\n</code></pre>\n<p><strong>My User Model Class:</strong></p>\n<pre><code>public class User {\n\n    private String lastUpdate, username, level, score, busNo, email, cash, dailylimit;\n    private List&lt;String&gt; cafeTransList;\n\n\n    public User(String lastUpdate, String username, String level, String score, String busNo, String email, String cash, String dailylimit, List&lt;String&gt; cafeTransList) {\n        this.lastUpdate = lastUpdate;\n        this.username = username;\n        this.level = level;\n        this.score = score;\n        this.busNo = busNo;\n        this.email = email;\n        this.cash = cash;\n        this.dailylimit = dailylimit;\n        this.cafeTransList = cafeTransList;\n    }\n\n    public User() {\n    }\n\n    public String getLastUpdate() { return lastUpdate; }\n\n    public void setLastUpdate(String lastUpdate) {\n        this.lastUpdate = lastUpdate;\n    }\n\n    public String getUsername() {\n        return username;\n    }\n\n    public void setUsername(String username) {\n        this.username = username;\n    }\n\n\n    public String getLevel() {\n        return level;\n    }\n\n    public void setLevel(String level) {\n        this.level = level;\n    }\n\n    public String getScore() {\n        return score;\n    }\n\n    public void setScore(String score) {\n        this.score = score;\n    }\n\n    public String getBusNo() {\n        return busNo;\n    }\n\n    public void setBusNo(String busNo) {\n        this.busNo = busNo;\n    }\n\n    public String getEmail() {\n        return email;\n    }\n\n    public void setEmail(String email) {\n        this.email = email;\n    }\n\n    public String getCash() {\n        return cash;\n    }\n\n    public void setCash(String cash) {\n        this.cash = cash;\n    }\n\n\n    public String getDailylimit() {\n        return dailylimit;\n    }\n\n    public void setDailylimit(String dailylimit) {\n        this.dailylimit = dailylimit;\n    }\n\n    public List&lt;String&gt; getcafeTransList() {\n        return cafeTransList;\n    }\n\n    public void setcafeTransList(List cafeTransList) {\n        this.cafeTransList = cafeTransList;\n    }\n}\n\n</code></pre>\n<p><em><strong>My DB Structure:</strong></em></p>\n<pre><code>“User-ID XXXXXXXXXXXXXXXXXXXX” : {\n      &quot;busNo&quot; : &quot;2&quot;,\n      &quot;cafeTrans&quot; : \n        {\n        &quot;20211127&quot; : [ &quot;10&quot; ] // this list values are getting overridden every time a new purchase is made for the date.\n        },\n      &quot;cash&quot; : &quot;30&quot;,\n      &quot;dailylimit&quot; : &quot;0&quot;,\n      &quot;email&quot; : &quot;a@b.com&quot;,\n      &quot;lastUpdate&quot; : &quot;20211209&quot;,\n      &quot;level&quot; : &quot;6&quot;,\n      &quot;score&quot; : “0”\n      &quot;username&quot; : &quot;Demo&quot;\n</code></pre>\n"},{"tags":["java","maven","wsdl","cxf","soap-client"],"answers":[{"tags":[],"owner":{"account_id":1130089,"reputation":24025,"user_id":1116391,"display_name":"Bogdan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639928636,"creation_date":1639928636,"answer_id":70412911,"question_id":70392479,"body_markdown":"Since you downloaded the WSDL locally, you now have control over it. So it might work if you change the SOAP addresses within the WSDL file itself to point to whichever address you want to call from your client.\r\n\r\nAlternatively, you could try with the [`BindingProvider.ENDPOINT_ADDRESS_PROPERTY`][1] as shown [here][2], although from what I remember you need to do this for each request, instead of configuring it for the whole service client:\r\n\r\n    MyService service = new MyService(wsdlURL, serviceName);\r\n    ServicePort client = service.getServicePort();\r\n    BindingProvider provider = (BindingProvider)client;\r\n    // You can set the address per request here\r\n    provider.getRequestContext().put(\r\n         BindingProvider.ENDPOINT_ADDRESS_PROPERTY,\r\n         &quot;http://my/new/url/to/the/service&quot;);\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/javax/xml/ws/BindingProvider.html#ENDPOINT_ADDRESS_PROPERTY\r\n  [2]: https://cxf.apache.org/docs/client-http-transport-including-ssl-support.html#ClientHTTPTransport(includingSSLsupport)-Howtooverridetheserviceaddress?\r\n","title":"Java, apache.CXF plugin - Using local WSDL to consume remotely hosted services","body":"<p>Since you downloaded the WSDL locally, you now have control over it. So it might work if you change the SOAP addresses within the WSDL file itself to point to whichever address you want to call from your client.</p>\n<p>Alternatively, you could try with the <a href=\"https://docs.oracle.com/javase/8/docs/api/javax/xml/ws/BindingProvider.html#ENDPOINT_ADDRESS_PROPERTY\" rel=\"nofollow noreferrer\"><code>BindingProvider.ENDPOINT_ADDRESS_PROPERTY</code></a> as shown <a href=\"https://cxf.apache.org/docs/client-http-transport-including-ssl-support.html#ClientHTTPTransport(includingSSLsupport)-Howtooverridetheserviceaddress?\" rel=\"nofollow noreferrer\">here</a>, although from what I remember you need to do this for each request, instead of configuring it for the whole service client:</p>\n<pre><code>MyService service = new MyService(wsdlURL, serviceName);\nServicePort client = service.getServicePort();\nBindingProvider provider = (BindingProvider)client;\n// You can set the address per request here\nprovider.getRequestContext().put(\n     BindingProvider.ENDPOINT_ADDRESS_PROPERTY,\n     &quot;http://my/new/url/to/the/service&quot;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":384402,"reputation":1902,"user_id":740888,"display_name":"httPants"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640061130,"creation_date":1640061130,"answer_id":70430707,"question_id":70392479,"body_markdown":"You should copy your wsdl file somewhere under the src/main/resources folder so that it is packaged in the jar file for your project (for the example below I use src/main/resources/META-INF/wsdl).  When configuring the cxf-codegen-plugin, specify the wsdlLocation configuration value, as shown below.\r\n\r\n    &lt;plugin&gt;\r\n      &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\r\n      &lt;artifactId&gt;cxf-codegen-plugin&lt;/artifactId&gt;\r\n      &lt;version&gt;3.3.0&lt;/version&gt;\r\n      &lt;executions&gt;\r\n        &lt;execution&gt;\r\n          &lt;id&gt;my-wsdl&lt;/id&gt;\r\n          &lt;phase&gt;generate-sources&lt;/phase&gt;\r\n          &lt;goals&gt;\r\n            &lt;goal&gt;wsdl2java&lt;/goal&gt;\r\n          &lt;/goals&gt;\r\n          &lt;configuration&gt;\r\n            &lt;encoding&gt;UTF-8&lt;/encoding&gt;\r\n            &lt;wsdlOptions&gt;\r\n              &lt;wsdlOption&gt;\r\n                &lt;wsdl&gt;${project.basedir}\\src\\main\\resources\\META-INF\\wsdl\\helloWorld.wsdl&lt;/wsdl&gt;\r\n                &lt;wsdlLocation&gt;classpath:/META-INF/wsdl/helloWorld.wsdl&lt;/wsdlLocation&gt;\r\n              &lt;/wsdlOption&gt;\r\n            &lt;/wsdlOptions&gt;\r\n          &lt;/configuration&gt;\r\n        &lt;/execution&gt;\r\n      &lt;/executions&gt;\r\n    &lt;/plugin&gt;\r\n\r\nYou generated WebServiceClient code should then load the wsdl from the classpath, similar to this...\r\n\r\n    @WebServiceClient(name = &quot;HelloWorldService&quot;,\r\n                      wsdlLocation = &quot;classpath:/META-INF/wsdl/helloWorld.wsdl&quot;,\r\n                      targetNamespace = &quot;http://example.com/helloWorld&quot;)\r\n    public class HelloWorldService extends Service {\r\n    \r\n        public final static URL WSDL_LOCATION;\r\n    \r\n        public final static QName SERVICE = new QName(&quot;http://example.com/helloWorld&quot;, &quot;HelloWorldService&quot;);\r\n        public final static QName HelloWorldProxyPort = new QName(&quot;http://example.com/helloWorld&quot;, &quot;HelloWorldProxyPort&quot;);\r\n        static {\r\n            URL url = HelloWorldService.class.getClassLoader().getResource(&quot;/META-INF/wsdl/helloWorld.wsdl&quot;);\r\n            if (url == null) {\r\n                url = HelloWorldService.class.getClassLoader().getResource(&quot;META-INF/wsdl/helloWorld.wsdl&quot;);\r\n            }\r\n            if (url == null) {\r\n                java.util.logging.Logger.getLogger(HelloWorldService.class.getName())\r\n                    .log(java.util.logging.Level.INFO,\r\n                         &quot;Can not initialize the default wsdl from {0}&quot;, &quot;classpath:/META-INF/wsdl/helloWorld.wsdl&quot;);\r\n            }\r\n            WSDL_LOCATION = url;\r\n        }\r\n    \r\n        ...\r\n    }\r\n\r\nWhen using the service, you can set the endpoint address for the service as follows...\r\n\r\n    HelloWorldService helloWorldService = new HelloWorldService();\r\n    HelloWorldPort client = service.getHelloWorldPort();\r\n    BindingProvider provider = (BindingProvider)client;\r\n    // You can set the address per request here\r\n    provider.getRequestContext().put(\r\n         BindingProvider.ENDPOINT_ADDRESS_PROPERTY,\r\n         &quot;http://my/new/url/to/the/service&quot;);\r\n\r\n","title":"Java, apache.CXF plugin - Using local WSDL to consume remotely hosted services","body":"<p>You should copy your wsdl file somewhere under the src/main/resources folder so that it is packaged in the jar file for your project (for the example below I use src/main/resources/META-INF/wsdl).  When configuring the cxf-codegen-plugin, specify the wsdlLocation configuration value, as shown below.</p>\n<pre><code>&lt;plugin&gt;\n  &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\n  &lt;artifactId&gt;cxf-codegen-plugin&lt;/artifactId&gt;\n  &lt;version&gt;3.3.0&lt;/version&gt;\n  &lt;executions&gt;\n    &lt;execution&gt;\n      &lt;id&gt;my-wsdl&lt;/id&gt;\n      &lt;phase&gt;generate-sources&lt;/phase&gt;\n      &lt;goals&gt;\n        &lt;goal&gt;wsdl2java&lt;/goal&gt;\n      &lt;/goals&gt;\n      &lt;configuration&gt;\n        &lt;encoding&gt;UTF-8&lt;/encoding&gt;\n        &lt;wsdlOptions&gt;\n          &lt;wsdlOption&gt;\n            &lt;wsdl&gt;${project.basedir}\\src\\main\\resources\\META-INF\\wsdl\\helloWorld.wsdl&lt;/wsdl&gt;\n            &lt;wsdlLocation&gt;classpath:/META-INF/wsdl/helloWorld.wsdl&lt;/wsdlLocation&gt;\n          &lt;/wsdlOption&gt;\n        &lt;/wsdlOptions&gt;\n      &lt;/configuration&gt;\n    &lt;/execution&gt;\n  &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>You generated WebServiceClient code should then load the wsdl from the classpath, similar to this...</p>\n<pre><code>@WebServiceClient(name = &quot;HelloWorldService&quot;,\n                  wsdlLocation = &quot;classpath:/META-INF/wsdl/helloWorld.wsdl&quot;,\n                  targetNamespace = &quot;http://example.com/helloWorld&quot;)\npublic class HelloWorldService extends Service {\n\n    public final static URL WSDL_LOCATION;\n\n    public final static QName SERVICE = new QName(&quot;http://example.com/helloWorld&quot;, &quot;HelloWorldService&quot;);\n    public final static QName HelloWorldProxyPort = new QName(&quot;http://example.com/helloWorld&quot;, &quot;HelloWorldProxyPort&quot;);\n    static {\n        URL url = HelloWorldService.class.getClassLoader().getResource(&quot;/META-INF/wsdl/helloWorld.wsdl&quot;);\n        if (url == null) {\n            url = HelloWorldService.class.getClassLoader().getResource(&quot;META-INF/wsdl/helloWorld.wsdl&quot;);\n        }\n        if (url == null) {\n            java.util.logging.Logger.getLogger(HelloWorldService.class.getName())\n                .log(java.util.logging.Level.INFO,\n                     &quot;Can not initialize the default wsdl from {0}&quot;, &quot;classpath:/META-INF/wsdl/helloWorld.wsdl&quot;);\n        }\n        WSDL_LOCATION = url;\n    }\n\n    ...\n}\n</code></pre>\n<p>When using the service, you can set the endpoint address for the service as follows...</p>\n<pre><code>HelloWorldService helloWorldService = new HelloWorldService();\nHelloWorldPort client = service.getHelloWorldPort();\nBindingProvider provider = (BindingProvider)client;\n// You can set the address per request here\nprovider.getRequestContext().put(\n     BindingProvider.ENDPOINT_ADDRESS_PROPERTY,\n     &quot;http://my/new/url/to/the/service&quot;);\n</code></pre>\n"}],"owner":{"account_id":23674452,"reputation":11,"user_id":17700854,"display_name":"David Tkeshelashvili"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":964,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1640061130,"creation_date":1639740486,"question_id":70392479,"body_markdown":"Soap services are hosted remotely, but due to some restrictions on our server I got WSDL and stored it locally. Using maven, org.apache.cxf plugin and generate sources command I&#39;ve generated classes from local WSDL. \r\n\r\nWebServiceClient Class properties : \r\n\r\n    @WebServiceClient(name = &quot;ManageCredit&quot;,\r\n                      wsdlLocation = localWSDLAddress,\r\n                      targetNamespace = targetNamespace)\r\n    public class ManageCredit extends Service {\r\n        public final static URL WSDL_LOCATION;\r\n    \r\n        public final static QName SERVICE = new QName(targetNamespace, &quot;ManageCredit&quot;);\r\n        public final static QName ManageCreditEndpoint = new QName(targetNamespace, &quot;ManageCreditEndpoint&quot;);\r\n        static {\r\n            URL url = null;\r\n            try {\r\n                url = new URL(localWSDLAddress);\r\n            } catch (MalformedURLException e) {\r\n                java.util.logging.Logger.getLogger(ManageCredit.class.getName())\r\n                    .log(java.util.logging.Level.INFO,\r\n                         &quot;Can not initialize the default wsdl from {0}&quot;, localWSDLAddress);\r\n            }\r\n            WSDL_LOCATION = url;\r\n        }\r\n\r\nClient setUp :\r\n\r\n    ManageCredit manageCreditService = new ManageCredit();\r\n    ManageCreditPortType manageCreditPortType = manageCreditService.getManageCreditEndpoint();\r\n    SignContractRequest signContractRequest = new SignContractRequest();\r\n    signContractRequest.setRequestID(&quot;123&quot;);\r\n    signContractRequest.setApplicationID(&quot;1111&quot;);\r\n    signContractRequest.setChannelID(&quot;someValue&quot;);\r\n    manageCreditPortType.signContract(signContractRequest);\r\n\r\nUsing this code, calls are made to http://localhost:8080/....\r\nI need to call remote server, for example https://example.google:1820, instead of localhost. How can I change the endpoint that my client calls, without changing wsdl location.\r\n","title":"Java, apache.CXF plugin - Using local WSDL to consume remotely hosted services","body":"<p>Soap services are hosted remotely, but due to some restrictions on our server I got WSDL and stored it locally. Using maven, org.apache.cxf plugin and generate sources command I've generated classes from local WSDL.</p>\n<p>WebServiceClient Class properties :</p>\n<pre><code>@WebServiceClient(name = &quot;ManageCredit&quot;,\n                  wsdlLocation = localWSDLAddress,\n                  targetNamespace = targetNamespace)\npublic class ManageCredit extends Service {\n    public final static URL WSDL_LOCATION;\n\n    public final static QName SERVICE = new QName(targetNamespace, &quot;ManageCredit&quot;);\n    public final static QName ManageCreditEndpoint = new QName(targetNamespace, &quot;ManageCreditEndpoint&quot;);\n    static {\n        URL url = null;\n        try {\n            url = new URL(localWSDLAddress);\n        } catch (MalformedURLException e) {\n            java.util.logging.Logger.getLogger(ManageCredit.class.getName())\n                .log(java.util.logging.Level.INFO,\n                     &quot;Can not initialize the default wsdl from {0}&quot;, localWSDLAddress);\n        }\n        WSDL_LOCATION = url;\n    }\n</code></pre>\n<p>Client setUp :</p>\n<pre><code>ManageCredit manageCreditService = new ManageCredit();\nManageCreditPortType manageCreditPortType = manageCreditService.getManageCreditEndpoint();\nSignContractRequest signContractRequest = new SignContractRequest();\nsignContractRequest.setRequestID(&quot;123&quot;);\nsignContractRequest.setApplicationID(&quot;1111&quot;);\nsignContractRequest.setChannelID(&quot;someValue&quot;);\nmanageCreditPortType.signContract(signContractRequest);\n</code></pre>\n<p>Using this code, calls are made to http://localhost:8080/....\nI need to call remote server, for example <a href=\"https://example.google:1820\" rel=\"nofollow noreferrer\">https://example.google:1820</a>, instead of localhost. How can I change the endpoint that my client calls, without changing wsdl location.</p>\n"},{"tags":["java","swing","jframe"],"comments":[{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1640059546,"post_id":70430495,"comment_id":124499818,"body_markdown":"`frame.getContentPane().setBackground(Color.red);`","body":"<code>frame.getContentPane().setBackground(Color.red);</code>"},{"owner":{"account_id":20417160,"reputation":138,"user_id":17667932,"display_name":"Agzam"},"score":0,"creation_date":1640088748,"post_id":70430495,"comment_id":124507751,"body_markdown":"@EminK.L. Advice for the future: [What should I do when someone answers my question?](https://stackoverflow.com/help/someone-answers)","body":"@EminK.L. Advice for the future: <a href=\"https://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}],"answers":[{"tags":[],"owner":{"account_id":20417160,"reputation":138,"user_id":17667932,"display_name":"Agzam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1640060507,"creation_date":1640060507,"answer_id":70430647,"question_id":70430495,"body_markdown":"### Code:\r\n```\r\nimport javax.swing.JFrame;\r\nimport java.awt.Color;\r\n\r\npublic class Main extends MyFrame {\r\n\t\r\n    public static void main(String[]args){\r\n        JFrame frame = new JFrame(&quot;Title&quot;);\r\n        frame.setSize(500,500);\r\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        frame.getContentPane().setBackground(Color.RED); // &lt;-----\r\n        frame.setVisible(true);\r\n    }\r\n}\r\n```\r\n### Result:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/SqkyV.png","title":"Java how to set JFrame background","body":"<h3>Code:</h3>\n<pre><code>import javax.swing.JFrame;\nimport java.awt.Color;\n\npublic class Main extends MyFrame {\n    \n    public static void main(String[]args){\n        JFrame frame = new JFrame(&quot;Title&quot;);\n        frame.setSize(500,500);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.getContentPane().setBackground(Color.RED); // &lt;-----\n        frame.setVisible(true);\n    }\n}\n</code></pre>\n<h3>Result:</h3>\n<p><a href=\"https://i.stack.imgur.com/SqkyV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SqkyV.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":23706601,"reputation":23,"user_id":17728983,"display_name":"Emin K.L."},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1640068035,"accepted_answer_id":70430647,"answer_count":1,"score":1,"last_activity_date":1640060507,"creation_date":1640058807,"question_id":70430495,"body_markdown":"I simplified my original code to this problematic part. I know it seems quite simple, that&#39;s why it confused me when it doesn&#39;t work as I intended. It has no compilation or runtime errors yet I have failed to set the background color anything other than default. I&#39;ve tried to create a new Color instance and invert the setVisible and setBackground methods, which wouldn&#39;t make a difference and my Google search wouldn&#39;t show anything different than I have done. \r\n\r\n    import javax.swing.JFrame;\r\n    import java.awt.Color;\r\n    \r\n    public class Main extends MyFrame{\r\n    \tpublic static void main(String[]args){\r\n    \t\t//new MyFrame();\r\n    \t\tJFrame frame=new JFrame(&quot;Title&quot;);\r\n    \t\tframe.setSize(500,500);\r\n    \t\tframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n    \t\tframe.setBackground(Color.red);\r\n    \t\tframe.setVisible(true);\r\n    \t}\r\n    }","title":"Java how to set JFrame background","body":"<p>I simplified my original code to this problematic part. I know it seems quite simple, that's why it confused me when it doesn't work as I intended. It has no compilation or runtime errors yet I have failed to set the background color anything other than default. I've tried to create a new Color instance and invert the setVisible and setBackground methods, which wouldn't make a difference and my Google search wouldn't show anything different than I have done.</p>\n<pre><code>import javax.swing.JFrame;\nimport java.awt.Color;\n\npublic class Main extends MyFrame{\n    public static void main(String[]args){\n        //new MyFrame();\n        JFrame frame=new JFrame(&quot;Title&quot;);\n        frame.setSize(500,500);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.setBackground(Color.red);\n        frame.setVisible(true);\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","aop","aspectj","spring-aop"],"answers":[{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1559264961,"creation_date":1559264961,"answer_id":56387481,"question_id":56376303,"body_markdown":"Probably you are not using AspectJ but Spring AOP. So there are a few things to consider:\r\n\r\n* Usually Spring AOP aspects work on `@Component`s anyway, not on non-Spring stuff. For that you would really need AspectJ. So in a way your Spring AOP aspects look for that annotation anyway.\r\n* Spring AOP aspects should be `@Component`s too, but are excluded from aspect weaving automatically. In AspectJ you would need special precautions to exclude one aspect weaving another one bearing the same annotation as normal application code. You would need to consider that in situations where you combine Spring AOP with full AspectJ.\r\n\r\nNow as for your AOP question, you cannot intercept joinpoints in an annotated class via `@annotation()` pointcut, as you already noticed. You need to use `@within()` instead, e.g.:\r\n\r\n&lt;!-- language: none --&gt;\r\n\r\n    @within(org.springframework.stereotype.Component)\r\n\r\nPlease note that this will intercept all joinpoints in annotated classes, i.e. in the case of Spring AOP all method executions. It will not intercept bean creation, if as your log message suggests that is your goal.","title":"AspectJ Pointcut doesn&#39;t work on Annotations with Element.TYPE like @Component","body":"<p>Probably you are not using AspectJ but Spring AOP. So there are a few things to consider:</p>\n\n<ul>\n<li>Usually Spring AOP aspects work on <code>@Component</code>s anyway, not on non-Spring stuff. For that you would really need AspectJ. So in a way your Spring AOP aspects look for that annotation anyway.</li>\n<li>Spring AOP aspects should be <code>@Component</code>s too, but are excluded from aspect weaving automatically. In AspectJ you would need special precautions to exclude one aspect weaving another one bearing the same annotation as normal application code. You would need to consider that in situations where you combine Spring AOP with full AspectJ.</li>\n</ul>\n\n<p>Now as for your AOP question, you cannot intercept joinpoints in an annotated class via <code>@annotation()</code> pointcut, as you already noticed. You need to use <code>@within()</code> instead, e.g.:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>@within(org.springframework.stereotype.Component)\n</code></pre>\n\n<p>Please note that this will intercept all joinpoints in annotated classes, i.e. in the case of Spring AOP all method executions. It will not intercept bean creation, if as your log message suggests that is your goal.</p>\n"}],"owner":{"account_id":10142585,"reputation":904,"user_id":7491837,"accept_rate":49,"display_name":"Adriano"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2152,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":56387481,"answer_count":1,"score":2,"last_activity_date":1640060300,"creation_date":1559211605,"question_id":56376303,"body_markdown":"I&#39;m using AspectJ and I trying to Pointcut on @Component annotation.\r\n\r\n \r\n\r\n    @Pointcut(&quot;@annotation(org.springframework.stereotype.Component)&quot;)\r\n       public void bean() {\r\n    }\r\n    \r\n    @Before(&quot;bean()&quot;)\r\n    public void beforeBeanCreation(JoinPoint jp) {\r\n        System.out.println(&quot;Works!&quot;);\r\n    }\r\n\r\nMy configuration looks like below: \r\n\r\n    @Configuration\r\n    @ComponentScan({&quot;com.app.pl&quot;})\r\n    @EnableAspectJAutoProxy(proxyTargetClass = true)\r\n    @EnableLoadTimeWeaving(aspectjWeaving = AspectJWeaving.ENABLED)\r\n    public class AppConfiguration{\r\n    \r\n    }\r\n\r\nEverything works when I want to pointcut on annotation with ElementType.METHOD, or on a bean with specific name. But Pointcut on annotation with ElementType.TYPE dosen&#39;t work. I speculate that is a problem related with annotations that they are readed earlier then AspectJ proxy stand up. \r\n\r\nAny idea how to solve this?","title":"AspectJ Pointcut doesn&#39;t work on Annotations with Element.TYPE like @Component","body":"<p>I'm using AspectJ and I trying to Pointcut on @Component annotation.</p>\n\n<pre><code>@Pointcut(\"@annotation(org.springframework.stereotype.Component)\")\n   public void bean() {\n}\n\n@Before(\"bean()\")\npublic void beforeBeanCreation(JoinPoint jp) {\n    System.out.println(\"Works!\");\n}\n</code></pre>\n\n<p>My configuration looks like below: </p>\n\n<pre><code>@Configuration\n@ComponentScan({\"com.app.pl\"})\n@EnableAspectJAutoProxy(proxyTargetClass = true)\n@EnableLoadTimeWeaving(aspectjWeaving = AspectJWeaving.ENABLED)\npublic class AppConfiguration{\n\n}\n</code></pre>\n\n<p>Everything works when I want to pointcut on annotation with ElementType.METHOD, or on a bean with specific name. But Pointcut on annotation with ElementType.TYPE dosen't work. I speculate that is a problem related with annotations that they are readed earlier then AspectJ proxy stand up. </p>\n\n<p>Any idea how to solve this?</p>\n"},{"tags":["java","spring","aop","aspectj","spring-aop"],"comments":[{"owner":{"account_id":978967,"reputation":1738,"user_id":999264,"accept_rate":39,"display_name":"John Donn"},"score":0,"creation_date":1471723182,"post_id":39057664,"comment_id":65465847,"body_markdown":"you don&#39;t give enough information; if the join point is at doSomething method (assuming it is public), then it should be enough to put try catch block around return proceedingJoinPoint.proceed(). &quot;What it is good for..&quot; you may log when you enter into doSomething, and when the method returns; actually it is strange that this is missing in your code.","body":"you don&#39;t give enough information; if the join point is at doSomething method (assuming it is public), then it should be enough to put try catch block around return proceedingJoinPoint.proceed(). &quot;What it is good for..&quot; you may log when you enter into doSomething, and when the method returns; actually it is strange that this is missing in your code."},{"owner":{"account_id":3176068,"reputation":65,"user_id":2683906,"accept_rate":50,"display_name":"user2683906"},"score":0,"creation_date":1471769442,"post_id":39057664,"comment_id":65473793,"body_markdown":"when i put the try catch block around return proceedingJoinPoint.proceed() the iteration ends and application exits. When i put the try catch block around host.doSomething() the iteration continues, but i can&#39;t log anything in the logAround","body":"when i put the try catch block around return proceedingJoinPoint.proceed() the iteration ends and application exits. When i put the try catch block around host.doSomething() the iteration continues, but i can&#39;t log anything in the logAround"},{"owner":{"account_id":978967,"reputation":1738,"user_id":999264,"accept_rate":39,"display_name":"John Donn"},"score":0,"creation_date":1471781537,"post_id":39057664,"comment_id":65476747,"body_markdown":"first find out what is the joinpoint: put a breakpoint in your IDE on return proceedingJoinPoint.proceed() and inspect the various fields of ProceedingJoinPoint - you should see which method is intercepted. Try to reason from there.","body":"first find out what is the joinpoint: put a breakpoint in your IDE on return proceedingJoinPoint.proceed() and inspect the various fields of ProceedingJoinPoint - you should see which method is intercepted. Try to reason from there."}],"answers":[{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1471785327,"creation_date":1471785327,"answer_id":39064610,"question_id":39057664,"body_markdown":"Firstly, your aspect class should have an `@Aspect` annotation. Secondly, if you want to use Spring AOP and not full AspectJ your aspect and all target classes should also be Spring `@Component`s.\r\n\r\nHaving said that, here is a little sample. I created it with plain AspectJ, but the aspect code should be the same in Spring AOP.\r\n\r\n**Helper classes to make the code compile and run:**\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    package de.scrum_master.app;\r\n    \r\n    import java.util.Random;\r\n    \r\n    public class Host {\r\n        private static final Random RANDOM = new Random();\r\n    \r\n        private String name;\r\n    \r\n        public Host(String name) {\r\n            this.name = name;\r\n        }\r\n    \r\n        public void doSomething() {\r\n            if (RANDOM.nextBoolean())\r\n                throw new RuntimeException(&quot;oops!&quot;);\r\n        }\r\n    \r\n        @Override\r\n        public String toString() {\r\n            return &quot;Host(name=&quot; + name + &quot;)&quot;;\r\n        }\r\n    }\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    package de.scrum_master.app;\r\n    \r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    \r\n    public class ConfigReader {\r\n        private Map&lt;Integer, Host&gt; hostMap = new HashMap&lt;&gt;();\r\n    \r\n        public ConfigReader() {\r\n            hostMap.put(1, new Host(&quot;mercury&quot;));\r\n            hostMap.put(2, new Host(&quot;venus&quot;));\r\n            hostMap.put(3, new Host(&quot;earth&quot;));\r\n            hostMap.put(4, new Host(&quot;mars&quot;));\r\n        }\r\n    \r\n        public Map&lt;Integer, Host&gt; getHostMap() {\r\n            return hostMap;\r\n        }\r\n    }\r\n\r\n**Driver application:**\r\n\r\nI did not like the `Iterator` which is a relic from older JDK versions, so I replaced it by more modern Java style `for` loop.\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    package de.scrum_master.app;\r\n    \r\n    class MyClass {\r\n        private ConfigReader configReader = new ConfigReader();\r\n    \r\n        void check() throws Exception {\r\n            for (Host host : configReader.getHostMap().values()) {\r\n                System.out.println(host);\r\n                host.doSomething();\r\n            }\r\n        }\r\n    \r\n        public static void main(String[] args) throws Exception {\r\n            new MyClass().check();\r\n        }\r\n    }\r\n\r\n**Aspect with pointcut/advice doing logging and exception handling at the same time:**\r\n\r\nPlease also note my comment at the very end of the code.\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    package de.scrum_master.aspect;\r\n    \r\n    import org.aspectj.lang.ProceedingJoinPoint;\r\n    import org.aspectj.lang.annotation.Around;\r\n    import org.aspectj.lang.annotation.Aspect;\r\n    \r\n    @Aspect\r\n    public class AopLogger {\r\n        private static final InheritableThreadLocal&lt;String&gt; indent = new InheritableThreadLocal&lt;String&gt;() {\r\n            @Override\r\n            protected String initialValue() {\r\n                return &quot;&quot;;\r\n            }\r\n        };\r\n    \r\n        @Around(&quot;execution(* de.scrum_master.app..*(..)) &amp;&amp; !execution(* toString())&quot;)\r\n        public Object logAround(ProceedingJoinPoint thisJoinPoint) throws Throwable {\r\n            Object result = null;\r\n            System.out.println(indent.get() + &quot;&gt;&gt; &quot; + thisJoinPoint);\r\n            try {\r\n                indent.set(indent.get() + &quot;  &quot;);\r\n                result = thisJoinPoint.proceed();\r\n                indent.set(indent.get().substring(2));\r\n            } catch (Exception e) {\r\n                System.out.println(indent.get() + &quot;Caught exception: &quot; + e);\r\n                indent.set(indent.get().substring(2));\r\n            }\r\n            System.out.println(indent.get() + &quot;&lt;&lt; &quot; + thisJoinPoint);\r\n    \r\n            // Attention: If a method with a caught exception does not have &#39;void&#39;\r\n            // return type, we return a (probably unexpected) result of &#39;null&#39; here.\r\n            // So maybe we should not catch all execptions but rather pick more\r\n            // specific joinpoints where we are sure we can cleanly handle the\r\n            // corresponding exceptions.\r\n            return result;\r\n        }\r\n    }\r\n\r\n**Console log:**\r\n\r\n&lt;!-- language: none --&gt;\r\n\r\n    &gt;&gt; execution(void de.scrum_master.app.MyClass.main(String[]))\r\n      &gt;&gt; execution(void de.scrum_master.app.MyClass.check())\r\n        &gt;&gt; execution(Map de.scrum_master.app.ConfigReader.getHostMap())\r\n        &lt;&lt; execution(Map de.scrum_master.app.ConfigReader.getHostMap())\r\n    Host(name=mercury)\r\n        &gt;&gt; execution(void de.scrum_master.app.Host.doSomething())\r\n          Caught exception: java.lang.RuntimeException: oops!\r\n        &lt;&lt; execution(void de.scrum_master.app.Host.doSomething())\r\n    Host(name=venus)\r\n        &gt;&gt; execution(void de.scrum_master.app.Host.doSomething())\r\n        &lt;&lt; execution(void de.scrum_master.app.Host.doSomething())\r\n    Host(name=earth)\r\n        &gt;&gt; execution(void de.scrum_master.app.Host.doSomething())\r\n          Caught exception: java.lang.RuntimeException: oops!\r\n        &lt;&lt; execution(void de.scrum_master.app.Host.doSomething())\r\n    Host(name=mars)\r\n        &gt;&gt; execution(void de.scrum_master.app.Host.doSomething())\r\n          Caught exception: java.lang.RuntimeException: oops!\r\n        &lt;&lt; execution(void de.scrum_master.app.Host.doSomething())\r\n      &lt;&lt; execution(void de.scrum_master.app.MyClass.check())\r\n    &lt;&lt; execution(void de.scrum_master.app.MyClass.main(String[]))\r\n\r\n**Second aspect variant separating logging from exception handling:**\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    package de.scrum_master.aspect;\r\n    \r\n    import org.aspectj.lang.ProceedingJoinPoint;\r\n    import org.aspectj.lang.annotation.Around;\r\n    import org.aspectj.lang.annotation.Aspect;\r\n    \r\n    @Aspect\r\n    public class AopLogger {\r\n        private static final InheritableThreadLocal&lt;String&gt; indent = new InheritableThreadLocal&lt;String&gt;() {\r\n            @Override\r\n            protected String initialValue() {\r\n                return &quot;&quot;;\r\n            }\r\n        };\r\n    \r\n        @Around(&quot;execution(* de.scrum_master.app..*(..)) &amp;&amp; !execution(* toString())&quot;)\r\n        public Object logAround(ProceedingJoinPoint thisJoinPoint) throws Throwable {\r\n            System.out.println(indent.get() + &quot;&gt;&gt; &quot; + thisJoinPoint);\r\n            try {\r\n                indent.set(indent.get() + &quot;  &quot;);\r\n                Object result = thisJoinPoint.proceed();\r\n                indent.set(indent.get().substring(2));\r\n                System.out.println(indent.get() + &quot;&lt;&lt; &quot; + thisJoinPoint);\r\n                return result;\r\n            } catch (Exception e) {\r\n                indent.set(indent.get().substring(2));\r\n                System.out.println(indent.get() + &quot;&lt;&lt; &quot; + thisJoinPoint);\r\n                throw e;\r\n            }\r\n        }\r\n    \r\n        @Around(&quot;execution(void de.scrum_master.app.Host.doSomething())&quot;)\r\n        public void handleException(ProceedingJoinPoint thisJoinPoint) throws Throwable {\r\n            try {\r\n                thisJoinPoint.proceed();\r\n            } catch (Exception e) {\r\n                System.out.println(indent.get() + &quot;Caught exception: &quot; + e);\r\n            }\r\n        }\r\n    }\r\n\r\nThe log output stays the same, but this time the exception handling is in a separate advice with a more precise pointcut. The logging advice only takes care of logging (it would not even need try-catch if it was not for the correct indentation). The exception handling advice does only its own job.\r\n\r\nFeel free to ask follow-up questions.","title":"Spring AOP continues iteration after throwing","body":"<p>Firstly, your aspect class should have an <code>@Aspect</code> annotation. Secondly, if you want to use Spring AOP and not full AspectJ your aspect and all target classes should also be Spring <code>@Component</code>s.</p>\n\n<p>Having said that, here is a little sample. I created it with plain AspectJ, but the aspect code should be the same in Spring AOP.</p>\n\n<p><strong>Helper classes to make the code compile and run:</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.app;\n\nimport java.util.Random;\n\npublic class Host {\n    private static final Random RANDOM = new Random();\n\n    private String name;\n\n    public Host(String name) {\n        this.name = name;\n    }\n\n    public void doSomething() {\n        if (RANDOM.nextBoolean())\n            throw new RuntimeException(\"oops!\");\n    }\n\n    @Override\n    public String toString() {\n        return \"Host(name=\" + name + \")\";\n    }\n}\n</code></pre>\n\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.app;\n\nimport java.util.HashMap;\nimport java.util.Map;\n\npublic class ConfigReader {\n    private Map&lt;Integer, Host&gt; hostMap = new HashMap&lt;&gt;();\n\n    public ConfigReader() {\n        hostMap.put(1, new Host(\"mercury\"));\n        hostMap.put(2, new Host(\"venus\"));\n        hostMap.put(3, new Host(\"earth\"));\n        hostMap.put(4, new Host(\"mars\"));\n    }\n\n    public Map&lt;Integer, Host&gt; getHostMap() {\n        return hostMap;\n    }\n}\n</code></pre>\n\n<p><strong>Driver application:</strong></p>\n\n<p>I did not like the <code>Iterator</code> which is a relic from older JDK versions, so I replaced it by more modern Java style <code>for</code> loop.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.app;\n\nclass MyClass {\n    private ConfigReader configReader = new ConfigReader();\n\n    void check() throws Exception {\n        for (Host host : configReader.getHostMap().values()) {\n            System.out.println(host);\n            host.doSomething();\n        }\n    }\n\n    public static void main(String[] args) throws Exception {\n        new MyClass().check();\n    }\n}\n</code></pre>\n\n<p><strong>Aspect with pointcut/advice doing logging and exception handling at the same time:</strong></p>\n\n<p>Please also note my comment at the very end of the code.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.aspect;\n\nimport org.aspectj.lang.ProceedingJoinPoint;\nimport org.aspectj.lang.annotation.Around;\nimport org.aspectj.lang.annotation.Aspect;\n\n@Aspect\npublic class AopLogger {\n    private static final InheritableThreadLocal&lt;String&gt; indent = new InheritableThreadLocal&lt;String&gt;() {\n        @Override\n        protected String initialValue() {\n            return \"\";\n        }\n    };\n\n    @Around(\"execution(* de.scrum_master.app..*(..)) &amp;&amp; !execution(* toString())\")\n    public Object logAround(ProceedingJoinPoint thisJoinPoint) throws Throwable {\n        Object result = null;\n        System.out.println(indent.get() + \"&gt;&gt; \" + thisJoinPoint);\n        try {\n            indent.set(indent.get() + \"  \");\n            result = thisJoinPoint.proceed();\n            indent.set(indent.get().substring(2));\n        } catch (Exception e) {\n            System.out.println(indent.get() + \"Caught exception: \" + e);\n            indent.set(indent.get().substring(2));\n        }\n        System.out.println(indent.get() + \"&lt;&lt; \" + thisJoinPoint);\n\n        // Attention: If a method with a caught exception does not have 'void'\n        // return type, we return a (probably unexpected) result of 'null' here.\n        // So maybe we should not catch all execptions but rather pick more\n        // specific joinpoints where we are sure we can cleanly handle the\n        // corresponding exceptions.\n        return result;\n    }\n}\n</code></pre>\n\n<p><strong>Console log:</strong></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>&gt;&gt; execution(void de.scrum_master.app.MyClass.main(String[]))\n  &gt;&gt; execution(void de.scrum_master.app.MyClass.check())\n    &gt;&gt; execution(Map de.scrum_master.app.ConfigReader.getHostMap())\n    &lt;&lt; execution(Map de.scrum_master.app.ConfigReader.getHostMap())\nHost(name=mercury)\n    &gt;&gt; execution(void de.scrum_master.app.Host.doSomething())\n      Caught exception: java.lang.RuntimeException: oops!\n    &lt;&lt; execution(void de.scrum_master.app.Host.doSomething())\nHost(name=venus)\n    &gt;&gt; execution(void de.scrum_master.app.Host.doSomething())\n    &lt;&lt; execution(void de.scrum_master.app.Host.doSomething())\nHost(name=earth)\n    &gt;&gt; execution(void de.scrum_master.app.Host.doSomething())\n      Caught exception: java.lang.RuntimeException: oops!\n    &lt;&lt; execution(void de.scrum_master.app.Host.doSomething())\nHost(name=mars)\n    &gt;&gt; execution(void de.scrum_master.app.Host.doSomething())\n      Caught exception: java.lang.RuntimeException: oops!\n    &lt;&lt; execution(void de.scrum_master.app.Host.doSomething())\n  &lt;&lt; execution(void de.scrum_master.app.MyClass.check())\n&lt;&lt; execution(void de.scrum_master.app.MyClass.main(String[]))\n</code></pre>\n\n<p><strong>Second aspect variant separating logging from exception handling:</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.aspect;\n\nimport org.aspectj.lang.ProceedingJoinPoint;\nimport org.aspectj.lang.annotation.Around;\nimport org.aspectj.lang.annotation.Aspect;\n\n@Aspect\npublic class AopLogger {\n    private static final InheritableThreadLocal&lt;String&gt; indent = new InheritableThreadLocal&lt;String&gt;() {\n        @Override\n        protected String initialValue() {\n            return \"\";\n        }\n    };\n\n    @Around(\"execution(* de.scrum_master.app..*(..)) &amp;&amp; !execution(* toString())\")\n    public Object logAround(ProceedingJoinPoint thisJoinPoint) throws Throwable {\n        System.out.println(indent.get() + \"&gt;&gt; \" + thisJoinPoint);\n        try {\n            indent.set(indent.get() + \"  \");\n            Object result = thisJoinPoint.proceed();\n            indent.set(indent.get().substring(2));\n            System.out.println(indent.get() + \"&lt;&lt; \" + thisJoinPoint);\n            return result;\n        } catch (Exception e) {\n            indent.set(indent.get().substring(2));\n            System.out.println(indent.get() + \"&lt;&lt; \" + thisJoinPoint);\n            throw e;\n        }\n    }\n\n    @Around(\"execution(void de.scrum_master.app.Host.doSomething())\")\n    public void handleException(ProceedingJoinPoint thisJoinPoint) throws Throwable {\n        try {\n            thisJoinPoint.proceed();\n        } catch (Exception e) {\n            System.out.println(indent.get() + \"Caught exception: \" + e);\n        }\n    }\n}\n</code></pre>\n\n<p>The log output stays the same, but this time the exception handling is in a separate advice with a more precise pointcut. The logging advice only takes care of logging (it would not even need try-catch if it was not for the correct indentation). The exception handling advice does only its own job.</p>\n\n<p>Feel free to ask follow-up questions.</p>\n"}],"owner":{"account_id":3176068,"reputation":65,"user_id":2683906,"accept_rate":50,"display_name":"user2683906"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1491,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1640060266,"creation_date":1471719251,"question_id":39057664,"body_markdown":"I have `MyClass` and `AopLogger`. The iteration stops if `doSomething` has an exception. \r\n\r\nHow to prevent exiting in `logAround` and continue with the next host? And what is the `Object` returned by `logAround` good for, what can we do with this `Object`?\r\n\r\n\r\n    class MyClass{\r\n        void check() throws Exception {    \r\n            Iterator&lt;Host&gt; iter_host = configReader.getHostMap().values().iterator();\t\t\r\n\t\t    while (iter_host.hasNext()) {\t\t\t\t\r\n\t\t\t    Host host = (Host) iter_host.next();\r\n                host.doSomething();\r\n            }\r\n        }\r\n        void doSomething(){} //Exception \r\n    }\r\n    \r\n    class AopLogger {    \r\n        @Around(&quot;execution(* com.mypackage..*.*(..))&quot;)\r\n\t    Object logAround(ProceedingJoinPoint proceedingJoinPoint) throws Throwable{\t\r\n\t\t    return proceedingJoinPoint.proceed();\t\r\n\t    } \r\n    }\r\n\r\n","title":"Spring AOP continues iteration after throwing","body":"<p>I have <code>MyClass</code> and <code>AopLogger</code>. The iteration stops if <code>doSomething</code> has an exception. </p>\n\n<p>How to prevent exiting in <code>logAround</code> and continue with the next host? And what is the <code>Object</code> returned by <code>logAround</code> good for, what can we do with this <code>Object</code>?</p>\n\n<pre><code>class MyClass{\n    void check() throws Exception {    \n        Iterator&lt;Host&gt; iter_host = configReader.getHostMap().values().iterator();       \n        while (iter_host.hasNext()) {               \n            Host host = (Host) iter_host.next();\n            host.doSomething();\n        }\n    }\n    void doSomething(){} //Exception \n}\n\nclass AopLogger {    \n    @Around(\"execution(* com.mypackage..*.*(..))\")\n    Object logAround(ProceedingJoinPoint proceedingJoinPoint) throws Throwable{ \n        return proceedingJoinPoint.proceed();   \n    } \n}\n</code></pre>\n"},{"tags":["java","spring","aop","aspectj","spring-aop"],"comments":[{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1568943598,"post_id":58019622,"comment_id":102444657,"body_markdown":"If we disregard the fact that this would never compile because in your switch-case you need to return something in order to avoid that always `proceed()` is called later, that `getB` and `getC` have the wrong signatures (should take `String` and `int` as input) and that you need to cast `getArgs[i]`, this could kinda work. Difficult to say from pseudo code what you want to achieve. E.g. none of the 4 local variables created at the beginning of your advice are ever re-used.","body":"If we disregard the fact that this would never compile because in your switch-case you need to return something in order to avoid that always <code>proceed()</code> is called later, that <code>getB</code> and <code>getC</code> have the wrong signatures (should take <code>String</code> and <code>int</code> as input) and that you need to cast <code>getArgs[i]</code>, this could kinda work. Difficult to say from pseudo code what you want to achieve. E.g. none of the 4 local variables created at the beginning of your advice are ever re-used."},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1568943710,"post_id":58019622,"comment_id":102444678,"body_markdown":"The following questions remain: Why you want to have everything in one advice method in the first place? Is your goal spaghetti code? You could have one advice per method signature and make it type-safe without casts. I am also wondering why you need the marker annotations because the sample method signatures have different return types. Wouldn&#39;t that be enough for the aspect to figure out which mock to return?","body":"The following questions remain: Why you want to have everything in one advice method in the first place? Is your goal spaghetti code? You could have one advice per method signature and make it type-safe without casts. I am also wondering why you need the marker annotations because the sample method signatures have different return types. Wouldn&#39;t that be enough for the aspect to figure out which mock to return?"}],"answers":[{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1568944752,"creation_date":1568944752,"answer_id":58020831,"question_id":58019622,"body_markdown":"Let us make your sample code compile first and then continue talking, shall we? Here is my [MCVE](https://stackoverflow.com/help/mcve):\r\n\r\n**Helper classes:**\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    package de.scrum_master.app;\r\n    \r\n    public class ARequest {}\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    package de.scrum_master.app;\r\n    \r\n    public class BRequest {}\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    package de.scrum_master.app;\r\n    \r\n    public class CRequest {}\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    package de.scrum_master.app;\r\n    \r\n    public class AResponse {\r\n      private String content;\r\n    \r\n      public AResponse(String content) {\r\n        this.content = content;\r\n      }\r\n    \r\n      @Override\r\n      public String toString() {\r\n        return &quot;AResponse[content=&quot; + content + &quot;]&quot;;\r\n      }\r\n    }\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    package de.scrum_master.app;\r\n    \r\n    public class BResponse {\r\n      private String content;\r\n    \r\n      public BResponse(String content) {\r\n        this.content = content;\r\n      }\r\n    \r\n      @Override\r\n      public String toString() {\r\n        return &quot;BResponse[content=&quot; + content + &quot;]&quot;;\r\n      }\r\n    }\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    package de.scrum_master.app;\r\n    \r\n    public class CResponse {\r\n      private String content;\r\n    \r\n      public CResponse(String content) {\r\n        this.content = content;\r\n      }\r\n    \r\n      @Override\r\n      public String toString() {\r\n        return &quot;CResponse[content=&quot; + content + &quot;]&quot;;\r\n      }\r\n    }\r\n\r\n**Marker annotation:**\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    package de.scrum_master.app;\r\n    \r\n    import static java.lang.annotation.ElementType.METHOD;\r\n    import static java.lang.annotation.RetentionPolicy.RUNTIME;\r\n    \r\n    import java.lang.annotation.Retention;\r\n    import java.lang.annotation.Target;\r\n    \r\n    @Retention(RUNTIME)\r\n    @Target(METHOD)\r\n    public @interface MyMock {\r\n      String name();\r\n    }\r\n\r\n**Driver application:**\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    package de.scrum_master.app;\r\n    \r\n    public class Application {\r\n      @MyMock(name = &quot;ABC&quot;)\r\n      public AResponse getAResponse(ARequest aRequest) {\r\n        // make a REST call\r\n        return new AResponse(&quot;real A response&quot;);\r\n      }\r\n    \r\n      @MyMock(name = &quot;DEF&quot;)\r\n      public BResponse getBResponse(String fruit, BRequest bRequest) {\r\n        // make a REST call\r\n        return new BResponse(&quot;real B response&quot;);\r\n      }\r\n    \r\n      @MyMock(name = &quot;GHJ&quot;)\r\n      public CResponse getCResponse(String vehicle, CRequest cRequest, int id) {\r\n        // make a REST call\r\n        return new CResponse(&quot;real C response&quot;);\r\n      }\r\n    \r\n      public static void main(String[] args) {\r\n        Application application = new Application();\r\n        System.out.println(application.getAResponse(new ARequest()));\r\n        System.out.println(application.getBResponse(&quot;apple&quot;, new BRequest()));\r\n        System.out.println(application.getCResponse(&quot;bicycle&quot;, new CRequest(), 11));\r\n      }\r\n    }\r\n\r\n**Console log without aspect:**\r\n\r\n```none\r\nAResponse[content=real A response]\r\nBResponse[content=real B response]\r\nCResponse[content=real C response]\r\n```\r\n\r\n**Aspect, variant A, using marker annotation:**\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    package de.scrum_master.aspect;\r\n    \r\n    import org.aspectj.lang.ProceedingJoinPoint;\r\n    import org.aspectj.lang.annotation.Around;\r\n    import org.aspectj.lang.annotation.Aspect;\r\n    \r\n    import de.scrum_master.app.ARequest;\r\n    import de.scrum_master.app.AResponse;\r\n    import de.scrum_master.app.BResponse;\r\n    import de.scrum_master.app.CResponse;\r\n    import de.scrum_master.app.MyMock;\r\n    \r\n    @Aspect\r\n    public class MockResponseAspect {\r\n      @Around(&quot;@annotation(myMock)&quot;)\r\n      public Object getMockedData(ProceedingJoinPoint pjp, MyMock myMock) throws Throwable {\r\n        // Whatever this does...\r\n        //String servName = performMocking.name();\r\n        Object[] methodArguments = pjp.getArgs();\r\n    \r\n        switch (myMock.name()) {\r\n          case &quot;ABC&quot;: return getA((ARequest) methodArguments[0]);\r\n          case &quot;DEF&quot;: return getB((String) methodArguments[0]);\r\n          case &quot;GHJ&quot;: return getC((int) methodArguments[2]);\r\n          default: return pjp.proceed(methodArguments); \r\n        }\r\n      }\r\n    \r\n      private AResponse getA(ARequest aRequest) {\r\n        return new AResponse(&quot;mock A response&quot;);\r\n      }\r\n    \r\n      private BResponse getB(String fruit) {\r\n        return new BResponse(&quot;mock B response&quot;);\r\n      }\r\n    \r\n      private CResponse getC(int id) {\r\n        return new CResponse(&quot;mock C response&quot;);\r\n      }\r\n    }\r\n\r\n**Console log using aspect:**\r\n\r\n```none\r\nAResponse[content=mock A response]\r\nBResponse[content=mock B response]\r\nCResponse[content=mock C response]\r\n```\r\n\r\n**Aspect, variant B, using return type:**\r\n\r\nThis is a simplified version of an aspect not using the mock annotation at all. Instead it could use the method name like in my example or maybe another existing method annotation like `@Response` or whatever else all response methods have in common.\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    package de.scrum_master.aspect;\r\n    \r\n    import org.aspectj.lang.ProceedingJoinPoint;\r\n    import org.aspectj.lang.annotation.Around;\r\n    import org.aspectj.lang.annotation.Aspect;\r\n    import org.aspectj.lang.reflect.MethodSignature;\r\n    \r\n    import de.scrum_master.app.ARequest;\r\n    import de.scrum_master.app.AResponse;\r\n    import de.scrum_master.app.BResponse;\r\n    import de.scrum_master.app.CResponse;\r\n    \r\n    @Aspect\r\n    public class MockResponseAspect {\r\n      @Around(&quot;execution(* get*Response(..))&quot;)\r\n      public Object getMockedData(ProceedingJoinPoint pjp) throws Throwable {\r\n        // Whatever this does...\r\n        //String servName = performMocking.name();\r\n        Object[] methodArguments = pjp.getArgs();\r\n        MethodSignature signature = (MethodSignature) pjp.getSignature();\r\n        Class&lt;?&gt; returnType = signature.getReturnType();\r\n    \r\n        switch (returnType.getSimpleName()) {\r\n          case &quot;AResponse&quot;: return getA((ARequest) methodArguments[0]);\r\n          case &quot;BResponse&quot;: return getB((String) methodArguments[0]);\r\n          case &quot;CResponse&quot;: return getC((int) methodArguments[2]);\r\n          default: return pjp.proceed(methodArguments); \r\n        }\r\n      }\r\n    \r\n      private AResponse getA(ARequest aRequest) {\r\n        return new AResponse(&quot;mock A response&quot;);\r\n      }\r\n    \r\n      private BResponse getB(String fruit) {\r\n        return new BResponse(&quot;mock B response&quot;);\r\n      }\r\n    \r\n      private CResponse getC(int id) {\r\n        return new CResponse(&quot;mock C response&quot;);\r\n      }\r\n    }\r\n\r\nThe console log is the same as for the first aspect.\r\n\r\nNow we have something to discuss. What is it you do not like about this? What do you want to achieve?","title":"How to write an aspect to cater to different objects and method arguments","body":"<p>Let us make your sample code compile first and then continue talking, shall we? Here is my <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>:</p>\n\n<p><strong>Helper classes:</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.app;\n\npublic class ARequest {}\n</code></pre>\n\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.app;\n\npublic class BRequest {}\n</code></pre>\n\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.app;\n\npublic class CRequest {}\n</code></pre>\n\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.app;\n\npublic class AResponse {\n  private String content;\n\n  public AResponse(String content) {\n    this.content = content;\n  }\n\n  @Override\n  public String toString() {\n    return \"AResponse[content=\" + content + \"]\";\n  }\n}\n</code></pre>\n\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.app;\n\npublic class BResponse {\n  private String content;\n\n  public BResponse(String content) {\n    this.content = content;\n  }\n\n  @Override\n  public String toString() {\n    return \"BResponse[content=\" + content + \"]\";\n  }\n}\n</code></pre>\n\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.app;\n\npublic class CResponse {\n  private String content;\n\n  public CResponse(String content) {\n    this.content = content;\n  }\n\n  @Override\n  public String toString() {\n    return \"CResponse[content=\" + content + \"]\";\n  }\n}\n</code></pre>\n\n<p><strong>Marker annotation:</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.app;\n\nimport static java.lang.annotation.ElementType.METHOD;\nimport static java.lang.annotation.RetentionPolicy.RUNTIME;\n\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.Target;\n\n@Retention(RUNTIME)\n@Target(METHOD)\npublic @interface MyMock {\n  String name();\n}\n</code></pre>\n\n<p><strong>Driver application:</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.app;\n\npublic class Application {\n  @MyMock(name = \"ABC\")\n  public AResponse getAResponse(ARequest aRequest) {\n    // make a REST call\n    return new AResponse(\"real A response\");\n  }\n\n  @MyMock(name = \"DEF\")\n  public BResponse getBResponse(String fruit, BRequest bRequest) {\n    // make a REST call\n    return new BResponse(\"real B response\");\n  }\n\n  @MyMock(name = \"GHJ\")\n  public CResponse getCResponse(String vehicle, CRequest cRequest, int id) {\n    // make a REST call\n    return new CResponse(\"real C response\");\n  }\n\n  public static void main(String[] args) {\n    Application application = new Application();\n    System.out.println(application.getAResponse(new ARequest()));\n    System.out.println(application.getBResponse(\"apple\", new BRequest()));\n    System.out.println(application.getCResponse(\"bicycle\", new CRequest(), 11));\n  }\n}\n</code></pre>\n\n<p><strong>Console log without aspect:</strong></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>AResponse[content=real A response]\nBResponse[content=real B response]\nCResponse[content=real C response]\n</code></pre>\n\n<p><strong>Aspect, variant A, using marker annotation:</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.aspect;\n\nimport org.aspectj.lang.ProceedingJoinPoint;\nimport org.aspectj.lang.annotation.Around;\nimport org.aspectj.lang.annotation.Aspect;\n\nimport de.scrum_master.app.ARequest;\nimport de.scrum_master.app.AResponse;\nimport de.scrum_master.app.BResponse;\nimport de.scrum_master.app.CResponse;\nimport de.scrum_master.app.MyMock;\n\n@Aspect\npublic class MockResponseAspect {\n  @Around(\"@annotation(myMock)\")\n  public Object getMockedData(ProceedingJoinPoint pjp, MyMock myMock) throws Throwable {\n    // Whatever this does...\n    //String servName = performMocking.name();\n    Object[] methodArguments = pjp.getArgs();\n\n    switch (myMock.name()) {\n      case \"ABC\": return getA((ARequest) methodArguments[0]);\n      case \"DEF\": return getB((String) methodArguments[0]);\n      case \"GHJ\": return getC((int) methodArguments[2]);\n      default: return pjp.proceed(methodArguments); \n    }\n  }\n\n  private AResponse getA(ARequest aRequest) {\n    return new AResponse(\"mock A response\");\n  }\n\n  private BResponse getB(String fruit) {\n    return new BResponse(\"mock B response\");\n  }\n\n  private CResponse getC(int id) {\n    return new CResponse(\"mock C response\");\n  }\n}\n</code></pre>\n\n<p><strong>Console log using aspect:</strong></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>AResponse[content=mock A response]\nBResponse[content=mock B response]\nCResponse[content=mock C response]\n</code></pre>\n\n<p><strong>Aspect, variant B, using return type:</strong></p>\n\n<p>This is a simplified version of an aspect not using the mock annotation at all. Instead it could use the method name like in my example or maybe another existing method annotation like <code>@Response</code> or whatever else all response methods have in common.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.aspect;\n\nimport org.aspectj.lang.ProceedingJoinPoint;\nimport org.aspectj.lang.annotation.Around;\nimport org.aspectj.lang.annotation.Aspect;\nimport org.aspectj.lang.reflect.MethodSignature;\n\nimport de.scrum_master.app.ARequest;\nimport de.scrum_master.app.AResponse;\nimport de.scrum_master.app.BResponse;\nimport de.scrum_master.app.CResponse;\n\n@Aspect\npublic class MockResponseAspect {\n  @Around(\"execution(* get*Response(..))\")\n  public Object getMockedData(ProceedingJoinPoint pjp) throws Throwable {\n    // Whatever this does...\n    //String servName = performMocking.name();\n    Object[] methodArguments = pjp.getArgs();\n    MethodSignature signature = (MethodSignature) pjp.getSignature();\n    Class&lt;?&gt; returnType = signature.getReturnType();\n\n    switch (returnType.getSimpleName()) {\n      case \"AResponse\": return getA((ARequest) methodArguments[0]);\n      case \"BResponse\": return getB((String) methodArguments[0]);\n      case \"CResponse\": return getC((int) methodArguments[2]);\n      default: return pjp.proceed(methodArguments); \n    }\n  }\n\n  private AResponse getA(ARequest aRequest) {\n    return new AResponse(\"mock A response\");\n  }\n\n  private BResponse getB(String fruit) {\n    return new BResponse(\"mock B response\");\n  }\n\n  private CResponse getC(int id) {\n    return new CResponse(\"mock C response\");\n  }\n}\n</code></pre>\n\n<p>The console log is the same as for the first aspect.</p>\n\n<p>Now we have something to discuss. What is it you do not like about this? What do you want to achieve?</p>\n"}],"owner":{"account_id":16730095,"reputation":11,"user_id":12092693,"display_name":"ambersleek"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":123,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1640060251,"creation_date":1568932290,"question_id":58019622,"body_markdown":"I am looking to write an Aspect which can be used to mock data depending on some value passed in the method. This mock will replace the actual REST call. If the value doesn&#39;t match, go back to the actual method and make the call to the REST endpoint.\r\n\r\nI already have an aspect written that works in production but is very messy and had to implement multiple different methods in there to accommodate the need to return different objects and handle different method arguments. Is there a way I could generalise this so that I could have like a single method to perform the work and able to use if for future cases where I do not have to worry about object types and method signatures.\r\n\r\nCurrent implementation as follows. How could I amend this to work as a single method which can cater to future methods and response types without having to change my Aspect? \r\n\r\nTo clarify I have the following 3 methods which I want to mock by using Aspect. as you can see I have a custom annotation that takes in a name. None of the method&#39;s arguments line up.  \r\n\r\n    @MyMock(name = &quot;ABC&quot;)\r\n    public AResponse getAResponse(ARequest aRequest){\r\n        // make a REST call\r\n    }\r\n    \r\n    @MyMock(name = &quot;DEF&quot;)\r\n    public BResponse getBResponse(String fruit, BRequest bRequest){\r\n        // make a REST call\r\n    }\r\n    \r\n    @MyMock(name = &quot;GHJ&quot;)\r\n    public CResponse getCResponse(String vehicle, CRequest cRequest, int id){\r\n        // make a REST call\r\n    }\r\n\r\nThe Aspect Class currently is as follows. I use the name value in the annotation to determine which method to call and which value type to return. As you can see this is not very scalable. I need to write a new method and logic every single time I implement new mocks.   \r\n\r\n    @Around(&quot;@annotation(myMock)&quot;)\r\n    public Object getMockedData(ProceedingJoinPoint pjp, MyMock myMock) throws Throwable {\r\n        String servName = performMocking.name();\r\n    \tObject[] methodArguments = pjp.getArgs();\r\n        MethodSignature signature = (MethodSignature) pjp.getSignature();\r\n    \tClass returnType = signature.getReturnType();\r\n        \r\n        switch (myMock.name()) {\r\n            case &quot;ABC&quot;:\r\n            getA(methodArguments[0]);\r\n    \t\tbreak;\r\n            case &quot;DEF&quot;:\r\n            getB(methodArguments[0]);\r\n    \t\tbreak;\r\n            case &quot;GHJ&quot;:\r\n            getC(methodArguments[2]);\r\n    \t\tbreak;\r\n        }\r\n        return pjp.proceed(methodArguments);\r\n    }\r\n\r\n    private AResponse getA(ARequest aRequest){\r\n         // I use methodArguments[0] (which is aRequest) to decide what value to return as a mock response here.\r\n         // There is a getName value in that object which I use to reference  \r\n    }\r\n    \r\n    private BResponse getB(BRequest bRequest){\r\n         // I use methodArguments[0] (which is a String) to decide what value to return as a mock response here. \r\n    }\r\n    \r\n    private CResponse getC(CRequest cRequest){\r\n         // I use methodArguments[2] (which is an int) to decide what value to return as a mock response here. \r\n    }\r\n\r\nAll the above get methods makes a call to an external JSON file to fetch the mock data. The files content as follows. If the keys match, a mock response would be given else go back to making actual REST call. \r\n\r\n    {\r\n        &quot;ABC&quot;: {\r\n            &quot;enabled&quot;: &quot;true&quot;,\r\n            &quot;responses&quot;: [\r\n                {\r\n                    &quot;a_name&quot;: &quot;{some valid json response matching the AResponse Object structure}&quot;\r\n                }\r\n            ]\r\n        },\r\n        &quot;DEF&quot;: {\r\n            &quot;enabled&quot;: &quot;true&quot;,\r\n            &quot;responses&quot;: [\r\n                {\r\n                    &quot;d_name&quot;: &quot;{some valid json response matching the BResponse Object structure}&quot;\r\n                }\r\n            ]\r\n        },\r\n        &quot;GHJ&quot;: {\r\n            &quot;enabled&quot;: &quot;true&quot;,\r\n            &quot;responses&quot;: [\r\n                {\r\n                    &quot;123&quot;: &quot;{some valid json response matching the CResponse Object structure}&quot;\r\n                }\r\n            ]\r\n        }\r\n    }\r\n\r\nEDIT: Added my ASPECT class as follows: \r\n\r\n    package com.company.a.b.mock;\r\n    \r\n    import com.domain.abc.b.logging.util.MyLogger;\r\n    import com.domain.abc.a.util.generic.ConfigHelper;\r\n    import com.fasterxml.jackson.databind.DeserializationFeature;\r\n    import com.fasterxml.jackson.databind.ObjectMapper;\r\n    import org.aspectj.lang.ProceedingJoinPoint;\r\n    import org.aspectj.lang.annotation.Around;\r\n    import org.aspectj.lang.annotation.Aspect;\r\n    import org.aspectj.lang.reflect.MethodSignature;\r\n    import org.springframework.stereotype.Component;\r\n    \r\n    import java.io.IOException;\r\n    import java.util.List;\r\n    import java.util.Map;\r\n    \r\n    @Aspect\r\n    @Component\r\n    public class AspectMocking {\r\n    \r\n    \tprivate final ConfigHelper configHelper;\r\n    \tprivate final MyLogger myLogger;\r\n    \r\n    \tpublic AspectMocking(ConfigHelper configHelper, MyLogger myLogger) {\r\n    \t\tthis.configHelper = configHelper;\r\n    \t\tthis.myLogger = myLogger;\r\n    \t}\r\n    \r\n    \t@Around(&quot;@annotation(myMock)&quot;)\r\n    \tpublic Object getMockedData(ProceedingJoinPoint pjp, MyMock myMock) throws Throwable {\r\n    \r\n    \t\tfinal String env = System.getProperty(&quot;spring.profiles.active&quot;);\r\n    \t\tString response = null;\r\n    \t\tObject returnObject = null;\r\n    \t\tString logMessage = null;\r\n    \t\tString servName = myMock.name();\r\n    \t\tObject[] methodArguments = pjp.getArgs();\r\n    \t\ttry {\r\n    \t\t\tif (&quot;test_env1&quot;.equals(env) || &quot;test_env2&quot;.equals(env)) {\r\n    \r\n    \t\t\t\tMethodSignature signature = (MethodSignature) pjp.getSignature();\r\n    \t\t\t\tClass returnType = signature.getReturnType();\r\n    \r\n    \t\t\t\tMap allDataFromMockedFile = getMockedDataFromFile();\r\n    \t\t\t\tMap getResultForKey = (Map) allDataFromMockedFile.get(myMock.name());\r\n    \r\n    \t\t\t\tList result = null;\r\n    \t\t\t\tif(getResultForKey != null){\r\n    \t\t\t\t\tresult \t= (List) getResultForKey.get(&quot;responses&quot;);\r\n    \t\t\t\t}\r\n    \r\n    \t\t\t\tswitch (myMock.name()) {\r\n    \t\t\t\tcase &quot;ABC&quot;:\r\n    \t\t\t\t\tresponse = fetchABCMockedData(result, (String) methodArguments[0]);\r\n    \t\t\t\t\tlogMessage = &quot;Fetching ABC mock data for ABC Response: &quot; + response;\r\n    \t\t\t\t\tbreak;\r\n    \t\t\t\tcase &quot;V2_ABC&quot;:\r\n    \t\t\t\t\tresponse = fetchABCMockedData(getIntlResult(myMock.name(), (String)methodArguments[2]), (String) methodArguments[0]);\r\n    \t\t\t\t\tlogMessage = &quot;Fetching V2 ABC mock data for V2 ABC Response: &quot; + response;\r\n    \t\t\t\t\tbreak;\r\n    \t\t\t\tcase &quot;DEF&quot;:\r\n    \t\t\t\t\tresponse = fetchDEFMockedData(result, (String) methodArguments[0]);\r\n    \t\t\t\t\tlogMessage = &quot;Fetching DEF mock data: &quot; + response;\r\n    \t\t\t\t\tbreak;\r\n    \t\t\t\tcase &quot;GHJ&quot;:\r\n    \t\t\t\t\tresponse = fetchGHJMockedOfferData(result, (String) methodArguments[0], (String) methodArguments[1], (String) methodArguments[2]);\r\n    \t\t\t\t\tlogMessage = &quot;Fetching GHJ mock data: &quot; + response;\r\n    \t\t\t\t\tbreak;\r\n    \t\t\t\t}\r\n    \t\t\t\t\r\n    \t\t\t\tObjectMapper mapper = new ObjectMapper().configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\r\n    \t\t\t\treturnObject = mapper.readValue(response, returnType);\r\n    \t\t\t}\r\n    \t\t} catch (Exception exp) {\r\n    \t\t\tmyLogger.addMessageAsWarning(String\r\n    \t\t\t\t\t.format(&quot;Exception occured for service %s while loading the mocked json, so hitting the actual service:&quot;\r\n    \t\t\t\t\t\t\t+ exp.getMessage(), servName));\r\n    \t\t}\r\n    \r\n    \t\tif (returnObject == null) {\r\n    \t\t\treturnObject = pjp.proceed(methodArguments);\r\n    \t\t}\r\n    \r\n    \t\tmyLogger.addMessage(logMessage);\r\n    \t\treturn returnObject;\r\n    \t}\r\n    \r\n    \r\n    \tprivate List getIntlResult(String name, String locale){\r\n    \t\tMap localBasedMockFile = getMockedDataFromFile(locale.toLowerCase());\r\n    \t\tMap localeSpecificMockedData = (Map) localBasedMockFile.get(name);\r\n    \t\treturn (List) localeSpecificMockedData.get(&quot;responses&quot;);\r\n    \t}\r\n    \r\n        // had to add this recently as we needed locale values now to go to a diff file. \r\n    \tprivate Map getMockedDataFromFile(String countryCode){\r\n    \t\tfinal String DATA_URL = String.format(&quot;/a/b/c/%s/data.json&quot;, countryCode);\r\n    \t\treturn configHelper.getMAVDataAsObject(DATA_URL, Map.class);\r\n    \t}\r\n    \r\n    \tprivate Map getMockedDataFromFile() {\r\n    \t\tfinal String DATA_URL = &quot;/a/b/c/zh/mock.json&quot;;\r\n    \t\treturn configHelper.getMAVDataAsObject(DATA_URL, Map.class);\r\n    \t}\r\n    \r\n    \tprivate String fetchABCMockedData(List&lt;Map&gt; allResponses, String vinNumber) throws IOException {\r\n    \t\tString response = null;\r\n    \t\tfor (Map m : allResponses) {\r\n    \t\t\tString mockedVinNumber = m.keySet().toString().replaceAll(&quot;[\\\\[\\\\]]&quot;, &quot;&quot;);\r\n    \t\t\tif (vinNumber.equals(mockedVinNumber)) {\r\n    \t\t\t\tresponse = (String) m.get(mockedVinNumber);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\treturn response;\r\n    \t}\r\n    \r\n    \tprivate String fetchDEFMockedData(List&lt;String&gt; allResponses, String vinNumber) {\r\n    \t\treturn allResponses.contains(vinNumber) ? &quot;true&quot; : &quot;false&quot;;\r\n    \t}\r\n    \t\r\n    \tprivate String fetchGHJMockedOfferData(List&lt;Map&gt; allResponses, String journey, String name, String pin) {\r\n    \t\tString response = null;\r\n    \t\tString key = journey+&quot;_&quot;+name + &quot;_&quot; + pin;\r\n    \r\n    \t\tfor (Map m : allResponses) {\r\n    \t\t\tString mockedKey = m.keySet().toString().replaceAll(&quot;[\\\\[\\\\]]&quot;, &quot;&quot;);\r\n    \t\t\tif (mockedKey.equals(key)) {\r\n    \t\t\t\tresponse = (String) m.get(mockedKey);\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t\treturn response;\r\n    \t}\r\n    }","title":"How to write an aspect to cater to different objects and method arguments","body":"<p>I am looking to write an Aspect which can be used to mock data depending on some value passed in the method. This mock will replace the actual REST call. If the value doesn't match, go back to the actual method and make the call to the REST endpoint.</p>\n\n<p>I already have an aspect written that works in production but is very messy and had to implement multiple different methods in there to accommodate the need to return different objects and handle different method arguments. Is there a way I could generalise this so that I could have like a single method to perform the work and able to use if for future cases where I do not have to worry about object types and method signatures.</p>\n\n<p>Current implementation as follows. How could I amend this to work as a single method which can cater to future methods and response types without having to change my Aspect? </p>\n\n<p>To clarify I have the following 3 methods which I want to mock by using Aspect. as you can see I have a custom annotation that takes in a name. None of the method's arguments line up.  </p>\n\n<pre><code>@MyMock(name = \"ABC\")\npublic AResponse getAResponse(ARequest aRequest){\n    // make a REST call\n}\n\n@MyMock(name = \"DEF\")\npublic BResponse getBResponse(String fruit, BRequest bRequest){\n    // make a REST call\n}\n\n@MyMock(name = \"GHJ\")\npublic CResponse getCResponse(String vehicle, CRequest cRequest, int id){\n    // make a REST call\n}\n</code></pre>\n\n<p>The Aspect Class currently is as follows. I use the name value in the annotation to determine which method to call and which value type to return. As you can see this is not very scalable. I need to write a new method and logic every single time I implement new mocks.   </p>\n\n<pre><code>@Around(\"@annotation(myMock)\")\npublic Object getMockedData(ProceedingJoinPoint pjp, MyMock myMock) throws Throwable {\n    String servName = performMocking.name();\n    Object[] methodArguments = pjp.getArgs();\n    MethodSignature signature = (MethodSignature) pjp.getSignature();\n    Class returnType = signature.getReturnType();\n\n    switch (myMock.name()) {\n        case \"ABC\":\n        getA(methodArguments[0]);\n        break;\n        case \"DEF\":\n        getB(methodArguments[0]);\n        break;\n        case \"GHJ\":\n        getC(methodArguments[2]);\n        break;\n    }\n    return pjp.proceed(methodArguments);\n}\n\nprivate AResponse getA(ARequest aRequest){\n     // I use methodArguments[0] (which is aRequest) to decide what value to return as a mock response here.\n     // There is a getName value in that object which I use to reference  \n}\n\nprivate BResponse getB(BRequest bRequest){\n     // I use methodArguments[0] (which is a String) to decide what value to return as a mock response here. \n}\n\nprivate CResponse getC(CRequest cRequest){\n     // I use methodArguments[2] (which is an int) to decide what value to return as a mock response here. \n}\n</code></pre>\n\n<p>All the above get methods makes a call to an external JSON file to fetch the mock data. The files content as follows. If the keys match, a mock response would be given else go back to making actual REST call. </p>\n\n<pre><code>{\n    \"ABC\": {\n        \"enabled\": \"true\",\n        \"responses\": [\n            {\n                \"a_name\": \"{some valid json response matching the AResponse Object structure}\"\n            }\n        ]\n    },\n    \"DEF\": {\n        \"enabled\": \"true\",\n        \"responses\": [\n            {\n                \"d_name\": \"{some valid json response matching the BResponse Object structure}\"\n            }\n        ]\n    },\n    \"GHJ\": {\n        \"enabled\": \"true\",\n        \"responses\": [\n            {\n                \"123\": \"{some valid json response matching the CResponse Object structure}\"\n            }\n        ]\n    }\n}\n</code></pre>\n\n<p>EDIT: Added my ASPECT class as follows: </p>\n\n<pre><code>package com.company.a.b.mock;\n\nimport com.domain.abc.b.logging.util.MyLogger;\nimport com.domain.abc.a.util.generic.ConfigHelper;\nimport com.fasterxml.jackson.databind.DeserializationFeature;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport org.aspectj.lang.ProceedingJoinPoint;\nimport org.aspectj.lang.annotation.Around;\nimport org.aspectj.lang.annotation.Aspect;\nimport org.aspectj.lang.reflect.MethodSignature;\nimport org.springframework.stereotype.Component;\n\nimport java.io.IOException;\nimport java.util.List;\nimport java.util.Map;\n\n@Aspect\n@Component\npublic class AspectMocking {\n\n    private final ConfigHelper configHelper;\n    private final MyLogger myLogger;\n\n    public AspectMocking(ConfigHelper configHelper, MyLogger myLogger) {\n        this.configHelper = configHelper;\n        this.myLogger = myLogger;\n    }\n\n    @Around(\"@annotation(myMock)\")\n    public Object getMockedData(ProceedingJoinPoint pjp, MyMock myMock) throws Throwable {\n\n        final String env = System.getProperty(\"spring.profiles.active\");\n        String response = null;\n        Object returnObject = null;\n        String logMessage = null;\n        String servName = myMock.name();\n        Object[] methodArguments = pjp.getArgs();\n        try {\n            if (\"test_env1\".equals(env) || \"test_env2\".equals(env)) {\n\n                MethodSignature signature = (MethodSignature) pjp.getSignature();\n                Class returnType = signature.getReturnType();\n\n                Map allDataFromMockedFile = getMockedDataFromFile();\n                Map getResultForKey = (Map) allDataFromMockedFile.get(myMock.name());\n\n                List result = null;\n                if(getResultForKey != null){\n                    result  = (List) getResultForKey.get(\"responses\");\n                }\n\n                switch (myMock.name()) {\n                case \"ABC\":\n                    response = fetchABCMockedData(result, (String) methodArguments[0]);\n                    logMessage = \"Fetching ABC mock data for ABC Response: \" + response;\n                    break;\n                case \"V2_ABC\":\n                    response = fetchABCMockedData(getIntlResult(myMock.name(), (String)methodArguments[2]), (String) methodArguments[0]);\n                    logMessage = \"Fetching V2 ABC mock data for V2 ABC Response: \" + response;\n                    break;\n                case \"DEF\":\n                    response = fetchDEFMockedData(result, (String) methodArguments[0]);\n                    logMessage = \"Fetching DEF mock data: \" + response;\n                    break;\n                case \"GHJ\":\n                    response = fetchGHJMockedOfferData(result, (String) methodArguments[0], (String) methodArguments[1], (String) methodArguments[2]);\n                    logMessage = \"Fetching GHJ mock data: \" + response;\n                    break;\n                }\n\n                ObjectMapper mapper = new ObjectMapper().configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\n                returnObject = mapper.readValue(response, returnType);\n            }\n        } catch (Exception exp) {\n            myLogger.addMessageAsWarning(String\n                    .format(\"Exception occured for service %s while loading the mocked json, so hitting the actual service:\"\n                            + exp.getMessage(), servName));\n        }\n\n        if (returnObject == null) {\n            returnObject = pjp.proceed(methodArguments);\n        }\n\n        myLogger.addMessage(logMessage);\n        return returnObject;\n    }\n\n\n    private List getIntlResult(String name, String locale){\n        Map localBasedMockFile = getMockedDataFromFile(locale.toLowerCase());\n        Map localeSpecificMockedData = (Map) localBasedMockFile.get(name);\n        return (List) localeSpecificMockedData.get(\"responses\");\n    }\n\n    // had to add this recently as we needed locale values now to go to a diff file. \n    private Map getMockedDataFromFile(String countryCode){\n        final String DATA_URL = String.format(\"/a/b/c/%s/data.json\", countryCode);\n        return configHelper.getMAVDataAsObject(DATA_URL, Map.class);\n    }\n\n    private Map getMockedDataFromFile() {\n        final String DATA_URL = \"/a/b/c/zh/mock.json\";\n        return configHelper.getMAVDataAsObject(DATA_URL, Map.class);\n    }\n\n    private String fetchABCMockedData(List&lt;Map&gt; allResponses, String vinNumber) throws IOException {\n        String response = null;\n        for (Map m : allResponses) {\n            String mockedVinNumber = m.keySet().toString().replaceAll(\"[\\\\[\\\\]]\", \"\");\n            if (vinNumber.equals(mockedVinNumber)) {\n                response = (String) m.get(mockedVinNumber);\n            }\n        }\n        return response;\n    }\n\n    private String fetchDEFMockedData(List&lt;String&gt; allResponses, String vinNumber) {\n        return allResponses.contains(vinNumber) ? \"true\" : \"false\";\n    }\n\n    private String fetchGHJMockedOfferData(List&lt;Map&gt; allResponses, String journey, String name, String pin) {\n        String response = null;\n        String key = journey+\"_\"+name + \"_\" + pin;\n\n        for (Map m : allResponses) {\n            String mockedKey = m.keySet().toString().replaceAll(\"[\\\\[\\\\]]\", \"\");\n            if (mockedKey.equals(key)) {\n                response = (String) m.get(mockedKey);\n            }\n        }\n\n        return response;\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","aop","aspectj","spring-aop"],"comments":[{"owner":{"account_id":2853075,"reputation":7038,"user_id":2699901,"display_name":"N&#225;ndor Előd Fekete"},"score":0,"creation_date":1484750762,"post_id":41721239,"comment_id":70639318,"body_markdown":"If you&#39;re using Java8, I would do it with a helper method taking a lambda, it&#39;s minimal overhead in both code and runtime, and doesn&#39;t need a new dependency like AspectJ. If you&#39;re using Java7 or less, AspectJ could be an option, using `around()` advice is a typical textbook example for your use case.","body":"If you&#39;re using Java8, I would do it with a helper method taking a lambda, it&#39;s minimal overhead in both code and runtime, and doesn&#39;t need a new dependency like AspectJ. If you&#39;re using Java7 or less, AspectJ could be an option, using <code>around()</code> advice is a typical textbook example for your use case."},{"owner":{"account_id":59449,"reputation":53532,"user_id":177883,"accept_rate":96,"display_name":"DarthVader"},"score":0,"creation_date":1484753229,"post_id":41721239,"comment_id":70641146,"body_markdown":"Using JDK 6. will look into your advice","body":"Using JDK 6. will look into your advice"}],"answers":[{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1484822955,"creation_date":1484822955,"answer_id":41739918,"question_id":41721239,"body_markdown":"I recreated your situation with plain Java + native AspectJ because I am not a Spring user. But the aspect as such and its pointcut should be the same in Spring AOP, only the aspect also needs to be a `@Component`.\r\n\r\n**Several dummy classes:**\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    package de.scrum_master.app;\r\n    \r\n    import java.lang.annotation.ElementType;\r\n    import java.lang.annotation.Retention;\r\n    import java.lang.annotation.RetentionPolicy;\r\n    import java.lang.annotation.Target;\r\n    \r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @Target(ElementType.METHOD)\r\n    public @interface ResponseBody {}\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    package de.scrum_master.app;\r\n    \r\n    public class BaseError {\r\n        private Exception e;\r\n    \r\n        public BaseError(Exception e) {\r\n            this.e= e;\r\n        }\r\n    \r\n        public String getMessage() {\r\n            return e.getMessage();\r\n        }\r\n    }\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    package de.scrum_master.app;\r\n    \r\n    public class ExceptionHandler {\r\n        public static BaseError errorResponse(Exception e) {\r\n            return new BaseError(e);\r\n        }\r\n    }\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    package de.scrum_master.app;\r\n    \r\n    public class BaseResponse&lt;T&gt; {\r\n        private String body;\r\n        private String error = &quot;OK&quot;;\r\n    \r\n        public void setBody(String body) {\r\n            this.body = body;\r\n        }\r\n    \r\n        public void setError(BaseError be) {\r\n            error = be.getMessage();\r\n        }\r\n    \r\n        @Override\r\n        public String toString() {\r\n            return &quot;BaseResponse [body=&quot; + body + &quot;, error=&quot; + error + &quot;]&quot;;\r\n        }\r\n    }\r\n\r\n**Driver application:**\r\n\r\nThere are two target methods returning `BaseResponse&lt;String&gt;`, basically doing the same as your sample method, throwing exceptions randomly, but with exception handling stripped off. I guess this is what you want to achieve.\r\n\r\nThere also is anoter method not to be targeted by the aspect (as a negative test case).\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    package de.scrum_master.app;\r\n    \r\n    import java.util.Random;\r\n    \r\n    public class Application {\r\n        private static final Random RANDOM = new Random();\r\n    \r\n        public static void main(String[] args) {\r\n            Application application = new Application();\r\n            for (int i = 0; i &lt; 5; i++) {\r\n                System.out.println(application.doSomething());\r\n                System.out.println(application.getSomething());\r\n                System.out.println(application.getSomethingElse());\r\n            }\r\n        }\r\n    \r\n        public String doSomething() {\r\n            return &quot;Doing something&quot;;\r\n        }\r\n    \r\n        public @ResponseBody BaseResponse&lt;String&gt; getSomething() {\r\n            BaseResponse&lt;String&gt; response = new BaseResponse&lt;String&gt;();\r\n            if (RANDOM.nextBoolean())\r\n                throw new RuntimeException(&quot;cannot get something&quot;);\r\n            response.setBody(&quot;getting something&quot;);\r\n            return response;\r\n        }\r\n    \r\n        public @ResponseBody BaseResponse&lt;String&gt; getSomethingElse() {\r\n            BaseResponse&lt;String&gt; response = new BaseResponse&lt;String&gt;();\r\n            if (RANDOM.nextBoolean())\r\n                throw new RuntimeException(&quot;cannot get something else&quot;);\r\n            response.setBody(&quot;getting something else&quot;);\r\n            return response;\r\n        }\r\n    }\r\n\r\n**Error handling aspect:**\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    package de.scrum_master.aspect;\r\n    \r\n    import org.aspectj.lang.ProceedingJoinPoint;\r\n    import org.aspectj.lang.annotation.Around;\r\n    import org.aspectj.lang.annotation.Aspect;\r\n    \r\n    import de.scrum_master.app.BaseError;\r\n    import de.scrum_master.app.BaseResponse;\r\n    import de.scrum_master.app.ExceptionHandler;\r\n    \r\n    @Aspect\r\n    public class ErrorHandler {\r\n        @Around(&quot;execution(de.scrum_master.app.BaseResponse&lt;String&gt; *(..))&quot;)\r\n        public Object handleError(ProceedingJoinPoint thisJoinPoint) throws Throwable {\r\n            //System.out.println(thisJoinPoint);\r\n            try {\r\n                return thisJoinPoint.proceed();\r\n            } catch (Exception e) {\r\n                BaseError be = ExceptionHandler.errorResponse(e);\r\n                BaseResponse&lt;String&gt; response = new BaseResponse&lt;String&gt;();\r\n                response.setBody(&quot;uh-oh!&quot;);\r\n                response.setError(be);\r\n                return response;\r\n            }\r\n        }\r\n    }\r\n\r\n**Console log:**\r\n\r\nHere you can see nicely how each `BaseResponse` is either created and populated by cour application code or by the error handling aspect:\r\n\r\n&lt;!-- language: none --&gt;\r\n\r\n    Doing something\r\n    BaseResponse [body=getting something, error=OK]\r\n    BaseResponse [body=uh-oh!, error=cannot get something else]\r\n    Doing something\r\n    BaseResponse [body=uh-oh!, error=cannot get something]\r\n    BaseResponse [body=getting something else, error=OK]\r\n    Doing something\r\n    BaseResponse [body=getting something, error=OK]\r\n    BaseResponse [body=getting something else, error=OK]\r\n    Doing something\r\n    BaseResponse [body=getting something, error=OK]\r\n    BaseResponse [body=getting something else, error=OK]\r\n    Doing something\r\n    BaseResponse [body=getting something, error=OK]\r\n    BaseResponse [body=uh-oh!, error=cannot get something else]\r\n","title":"Refactoring exceptions to aspect?","body":"<p>I recreated your situation with plain Java + native AspectJ because I am not a Spring user. But the aspect as such and its pointcut should be the same in Spring AOP, only the aspect also needs to be a <code>@Component</code>.</p>\n\n<p><strong>Several dummy classes:</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.app;\n\nimport java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\n\n@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.METHOD)\npublic @interface ResponseBody {}\n</code></pre>\n\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.app;\n\npublic class BaseError {\n    private Exception e;\n\n    public BaseError(Exception e) {\n        this.e= e;\n    }\n\n    public String getMessage() {\n        return e.getMessage();\n    }\n}\n</code></pre>\n\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.app;\n\npublic class ExceptionHandler {\n    public static BaseError errorResponse(Exception e) {\n        return new BaseError(e);\n    }\n}\n</code></pre>\n\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.app;\n\npublic class BaseResponse&lt;T&gt; {\n    private String body;\n    private String error = \"OK\";\n\n    public void setBody(String body) {\n        this.body = body;\n    }\n\n    public void setError(BaseError be) {\n        error = be.getMessage();\n    }\n\n    @Override\n    public String toString() {\n        return \"BaseResponse [body=\" + body + \", error=\" + error + \"]\";\n    }\n}\n</code></pre>\n\n<p><strong>Driver application:</strong></p>\n\n<p>There are two target methods returning <code>BaseResponse&lt;String&gt;</code>, basically doing the same as your sample method, throwing exceptions randomly, but with exception handling stripped off. I guess this is what you want to achieve.</p>\n\n<p>There also is anoter method not to be targeted by the aspect (as a negative test case).</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.app;\n\nimport java.util.Random;\n\npublic class Application {\n    private static final Random RANDOM = new Random();\n\n    public static void main(String[] args) {\n        Application application = new Application();\n        for (int i = 0; i &lt; 5; i++) {\n            System.out.println(application.doSomething());\n            System.out.println(application.getSomething());\n            System.out.println(application.getSomethingElse());\n        }\n    }\n\n    public String doSomething() {\n        return \"Doing something\";\n    }\n\n    public @ResponseBody BaseResponse&lt;String&gt; getSomething() {\n        BaseResponse&lt;String&gt; response = new BaseResponse&lt;String&gt;();\n        if (RANDOM.nextBoolean())\n            throw new RuntimeException(\"cannot get something\");\n        response.setBody(\"getting something\");\n        return response;\n    }\n\n    public @ResponseBody BaseResponse&lt;String&gt; getSomethingElse() {\n        BaseResponse&lt;String&gt; response = new BaseResponse&lt;String&gt;();\n        if (RANDOM.nextBoolean())\n            throw new RuntimeException(\"cannot get something else\");\n        response.setBody(\"getting something else\");\n        return response;\n    }\n}\n</code></pre>\n\n<p><strong>Error handling aspect:</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.aspect;\n\nimport org.aspectj.lang.ProceedingJoinPoint;\nimport org.aspectj.lang.annotation.Around;\nimport org.aspectj.lang.annotation.Aspect;\n\nimport de.scrum_master.app.BaseError;\nimport de.scrum_master.app.BaseResponse;\nimport de.scrum_master.app.ExceptionHandler;\n\n@Aspect\npublic class ErrorHandler {\n    @Around(\"execution(de.scrum_master.app.BaseResponse&lt;String&gt; *(..))\")\n    public Object handleError(ProceedingJoinPoint thisJoinPoint) throws Throwable {\n        //System.out.println(thisJoinPoint);\n        try {\n            return thisJoinPoint.proceed();\n        } catch (Exception e) {\n            BaseError be = ExceptionHandler.errorResponse(e);\n            BaseResponse&lt;String&gt; response = new BaseResponse&lt;String&gt;();\n            response.setBody(\"uh-oh!\");\n            response.setError(be);\n            return response;\n        }\n    }\n}\n</code></pre>\n\n<p><strong>Console log:</strong></p>\n\n<p>Here you can see nicely how each <code>BaseResponse</code> is either created and populated by cour application code or by the error handling aspect:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Doing something\nBaseResponse [body=getting something, error=OK]\nBaseResponse [body=uh-oh!, error=cannot get something else]\nDoing something\nBaseResponse [body=uh-oh!, error=cannot get something]\nBaseResponse [body=getting something else, error=OK]\nDoing something\nBaseResponse [body=getting something, error=OK]\nBaseResponse [body=getting something else, error=OK]\nDoing something\nBaseResponse [body=getting something, error=OK]\nBaseResponse [body=getting something else, error=OK]\nDoing something\nBaseResponse [body=getting something, error=OK]\nBaseResponse [body=uh-oh!, error=cannot get something else]\n</code></pre>\n"}],"owner":{"account_id":59449,"reputation":53532,"user_id":177883,"accept_rate":96,"display_name":"DarthVader"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":41739918,"answer_count":1,"score":0,"last_activity_date":1640060215,"creation_date":1484747524,"question_id":41721239,"body_markdown":"We have a large code base that was developed in Spring MVC. The following code repeats all over the place. \r\n\r\n     public @ResponseBody BaseResponse&lt;String&gt; getSomething() {\r\n\t\tBaseResponse&lt;String&gt; response = new BaseResponse&lt;String&gt;();\r\n\t\ttry {\r\n\t\t\t//something\r\n\t\t} catch (Exception e) {\r\n\t\t\tBaseError be = ExceptionHandler.errorResponse(e);\r\n\t\t\tresponse.setError(be);\r\n\t\t}\r\n\t\treturn response;\r\n\t}\r\n\r\nI am curious if this can be refactored or simplified using aspects?\r\n\r\nie: ExceptionHandler can be called within the aspect but how about setting the error in response?\r\n\r\nThanks. ","title":"Refactoring exceptions to aspect?","body":"<p>We have a large code base that was developed in Spring MVC. The following code repeats all over the place. </p>\n\n<pre><code> public @ResponseBody BaseResponse&lt;String&gt; getSomething() {\n    BaseResponse&lt;String&gt; response = new BaseResponse&lt;String&gt;();\n    try {\n        //something\n    } catch (Exception e) {\n        BaseError be = ExceptionHandler.errorResponse(e);\n        response.setError(be);\n    }\n    return response;\n}\n</code></pre>\n\n<p>I am curious if this can be refactored or simplified using aspects?</p>\n\n<p>ie: ExceptionHandler can be called within the aspect but how about setting the error in response?</p>\n\n<p>Thanks. </p>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1640052996,"post_id":70429956,"comment_id":124498960,"body_markdown":"...name of what?","body":"...name of what?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1640053195,"post_id":70429956,"comment_id":124498988,"body_markdown":"It isn&#39;t clear to me what you want to do. Exactly what does &quot;get the ThreadLocal instance by name&quot; mean? Please edit your question and explain.","body":"It isn&#39;t clear to me what you want to do. Exactly what does &quot;get the ThreadLocal instance by name&quot; mean? Please edit your question and explain."},{"owner":{"account_id":13869174,"reputation":166,"user_id":10012914,"display_name":"Zeus"},"score":0,"creation_date":1640053322,"post_id":70429956,"comment_id":124499009,"body_markdown":"I need to set the name to the instance of ThreadLocal similar to what we do to Thread by using Thread.setName() and Thread.getName().","body":"I need to set the name to the instance of ThreadLocal similar to what we do to Thread by using Thread.setName() and Thread.getName()."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1640054683,"post_id":70429956,"comment_id":124499198,"body_markdown":"Looking at your example, I can&#39;t understand why you need a name.  Please show us the code that illustrates why the `ThreadLocal` &quot;needs&quot; a name ... and we can (maybe) suggest an alternative that is actually going to be viable.","body":"Looking at your example, I can&#39;t understand why you need a name.  Please show us the code that illustrates why the <code>ThreadLocal</code> &quot;needs&quot; a name ... and we can (maybe) suggest an alternative that is actually going to be viable."}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1640060191,"creation_date":1640053265,"answer_id":70429997,"question_id":70429956,"body_markdown":"&gt; Is there a way to set and get ThreadLocal instance by name?\r\n\r\nNo, there isn&#39;t a way.\r\n\r\n`ThreadLocal` variables don&#39;t have names, and cannot be accessed by name.  That is not part of the `ThreadLocal` API.\r\n\r\nIt is not clear what you are trying to achieve here, but one possibility is to create a `ThreadLocal` whose type is `Map&lt;String, Object&gt;` and store your &quot;named&quot; variables in the maps.","title":"How to set name to instance of ThreadLocal","body":"<blockquote>\n<p>Is there a way to set and get ThreadLocal instance by name?</p>\n</blockquote>\n<p>No, there isn't a way.</p>\n<p><code>ThreadLocal</code> variables don't have names, and cannot be accessed by name.  That is not part of the <code>ThreadLocal</code> API.</p>\n<p>It is not clear what you are trying to achieve here, but one possibility is to create a <code>ThreadLocal</code> whose type is <code>Map&lt;String, Object&gt;</code> and store your &quot;named&quot; variables in the maps.</p>\n"}],"owner":{"account_id":13869174,"reputation":166,"user_id":10012914,"display_name":"Zeus"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":176,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"closed_date":1640073382,"accepted_answer_id":70429997,"answer_count":1,"score":-1,"last_activity_date":1640060191,"creation_date":1640052810,"question_id":70429956,"body_markdown":"I want to set name to each instance of the ThreadLocal variable of type WebDriver. And then get the ThreadLocal instance by name. Is there a way to set and get ThreadLocal instance by name?\r\n\r\nHere is my class where I want to add the set and get functions.\r\n\r\n```\r\npublic class DFactory {\r\n\tprivate DFactory() {\r\n\r\n\t}\r\n\r\n\tprivate static DFactory dInstance= new DFactory();\r\n\r\n\tpublic static DFactory getInstance() {\r\n\t\treturn dInstance;\r\n\t}\r\n\r\n\tThreadLocal&lt;WebDriver&gt; driver = new ThreadLocal&lt;WebDriver&gt;();\r\n\r\n\tpublic WebDriver getDriver() {\r\n\t\treturn driver.get();\r\n\t}\r\n\r\n\tpublic void setDriver(WebDriver driverParam) {\r\n\t\tdriver.set(driverParam);\r\n\t}\r\n}\r\n```","title":"How to set name to instance of ThreadLocal","body":"<p>I want to set name to each instance of the ThreadLocal variable of type WebDriver. And then get the ThreadLocal instance by name. Is there a way to set and get ThreadLocal instance by name?</p>\n<p>Here is my class where I want to add the set and get functions.</p>\n<pre><code>public class DFactory {\n    private DFactory() {\n\n    }\n\n    private static DFactory dInstance= new DFactory();\n\n    public static DFactory getInstance() {\n        return dInstance;\n    }\n\n    ThreadLocal&lt;WebDriver&gt; driver = new ThreadLocal&lt;WebDriver&gt;();\n\n    public WebDriver getDriver() {\n        return driver.get();\n    }\n\n    public void setDriver(WebDriver driverParam) {\n        driver.set(driverParam);\n    }\n}\n</code></pre>\n"},{"tags":["java","selenium-webdriver","wait"],"answers":[{"tags":[],"owner":{"account_id":4655188,"reputation":1943,"user_id":3770951,"accept_rate":64,"display_name":"Rupesh Shinde"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1418212174,"creation_date":1418212174,"answer_id":27400270,"question_id":27398295,"body_markdown":"To answer which wait to use will be very specific beacuse the answer may change depending on the Web-element  you are focusing , Platform and many more. But what i can suggest you to use explicit wait in your situation as you specified that you are using multiple browsers and Web-element loading time is varying as per Browser. So the best deal is to use  wait with Until. \r\nYour can set the WebDriver wait  time to the maximum time you have observed so far, Because even if the webelement get click-able/visible it will not wait unnecessarily for the remaining time. \r\n\r\nBelow is the example of one how i implemented in my project.\r\n\r\n    WebDriverWait wait = new WebDriverWait(driver, 20);\r\n    wait.until(ExpectedConditions.elementToBeClickable(By.xpath(&quot;.//*[@id=&#39;login&#39;]&quot;))).click();\r\n\r\n","title":"Which wait is more preferred in selenium Webdriver using Java? (Implicit or Explicit)","body":"<p>To answer which wait to use will be very specific beacuse the answer may change depending on the Web-element  you are focusing , Platform and many more. But what i can suggest you to use explicit wait in your situation as you specified that you are using multiple browsers and Web-element loading time is varying as per Browser. So the best deal is to use  wait with Until. \nYour can set the WebDriver wait  time to the maximum time you have observed so far, Because even if the webelement get click-able/visible it will not wait unnecessarily for the remaining time. </p>\n\n<p>Below is the example of one how i implemented in my project.</p>\n\n<pre><code>WebDriverWait wait = new WebDriverWait(driver, 20);\nwait.until(ExpectedConditions.elementToBeClickable(By.xpath(\".//*[@id='login']\"))).click();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23373916,"reputation":11,"user_id":17444308,"display_name":"Chamara Perera"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640060095,"creation_date":1640060095,"answer_id":70430611,"question_id":27398295,"body_markdown":"To wait until a header element is loaded in the page in the success page I used this method:\r\n\r\n    WebDriverWait wait = new WebDriverWait(seleniumDriver, timeInterval);\r\n    wait.until(ExpectedConditions.presenceOfElementLocated(By.xpath(xpath)));","title":"Which wait is more preferred in selenium Webdriver using Java? (Implicit or Explicit)","body":"<p>To wait until a header element is loaded in the page in the success page I used this method:</p>\n<pre><code>WebDriverWait wait = new WebDriverWait(seleniumDriver, timeInterval);\nwait.until(ExpectedConditions.presenceOfElementLocated(By.xpath(xpath)));\n</code></pre>\n"}],"owner":{"account_id":5433396,"reputation":51,"user_id":4323531,"display_name":"User31"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7017,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"closed_date":1640101022,"accepted_answer_id":27400270,"answer_count":2,"score":1,"last_activity_date":1640060095,"creation_date":1418206373,"question_id":27398295,"body_markdown":"I am aware of the differences between them and how they actually behaves during execution. My Question is which one is more preferred in Automation using Selenium? I am using Selenium Webdriver with Java and Automating my Test-cases in TestNG framework.For some Browser the test fails because Webelement is not clickable so i doubt I have re-implement the wait time for such Web-elements. \r\n\r\nPlease suggest me some alternative. ","title":"Which wait is more preferred in selenium Webdriver using Java? (Implicit or Explicit)","body":"<p>I am aware of the differences between them and how they actually behaves during execution. My Question is which one is more preferred in Automation using Selenium? I am using Selenium Webdriver with Java and Automating my Test-cases in TestNG framework.For some Browser the test fails because Webelement is not clickable so i doubt I have re-implement the wait time for such Web-elements. </p>\n\n<p>Please suggest me some alternative. </p>\n"},{"tags":["java","spring","unit-testing","aspectj","spring-aop"],"answers":[{"tags":[],"owner":{"account_id":751067,"reputation":251,"user_id":748689,"display_name":"Joop Eggen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1316102934,"creation_date":1316102934,"answer_id":7433992,"question_id":7433658,"body_markdown":"I can only guess:\r\nThe first thing is to have a separate Spring applicationContext-test.xml,\r\nwithout component-scan;\r\nIn maven you can add a phase runtime excluding weaving jars for test.","title":"Disabling certain aspects during unit test runs","body":"<p>I can only guess:\nThe first thing is to have a separate Spring applicationContext-test.xml,\nwithout component-scan;\nIn maven you can add a phase runtime excluding weaving jars for test.</p>\n"},{"tags":[],"owner":{"account_id":70704,"reputation":49440,"user_id":204788,"display_name":"Biju Kunjummen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1316105065,"creation_date":1316105065,"answer_id":7434474,"question_id":7433658,"body_markdown":"Compile time weaving would inline the advice calls in the targeted methods identified by the pointcuts that you have. I personally feel that it is good to unit test with the compile time weaving in place, because at runtime your unit does include the class with the advice inlined?\r\n\r\nThe thought I have to not include advice would be to have two different compile targets, one with compile time weaving, and one without, you should be able to do this through maven profiles, a dev profile not weaving advice in  and a prod profile to weave the aspects in.","title":"Disabling certain aspects during unit test runs","body":"<p>Compile time weaving would inline the advice calls in the targeted methods identified by the pointcuts that you have. I personally feel that it is good to unit test with the compile time weaving in place, because at runtime your unit does include the class with the advice inlined?</p>\n\n<p>The thought I have to not include advice would be to have two different compile targets, one with compile time weaving, and one without, you should be able to do this through maven profiles, a dev profile not weaving advice in  and a prod profile to weave the aspects in.</p>\n"},{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1448100196,"creation_date":1364058358,"answer_id":15589588,"question_id":7433658,"body_markdown":"The answer is simple: You want to use an [`if()` pointcut expression][1].\r\n\r\n  [1]: http://www.eclipse.org/aspectj/doc/next/adk15notebook/ataspectj-pcadvice.html#d0e3697\r\n\r\n----------\r\n\r\n**Update** (after the question has also been updated): The originally provided link above should contain enough information, but for what it is worth, a short explanation and a simple example:\r\n\r\nAn `if()` pointcut is a `static` aspect method returning a `boolean`. If the return value is `true`, it means that any combined pointcut like `myPointcut() &amp;&amp; if()` matches as long as `myPointcut()` matches. For a return value of `false` the whole combined pointcut does not match, effectively deactivating any advice connected to the pointcut.\r\n\r\nSo what can you do in a static `if()` pointcut?\r\n\r\n* evaluate a static boolean member of some tool class like `TestMode.ACTIVE` which is only true during unit or integration testing\r\n* evaluate an environment variable which is only set during testing\r\n* evaluate a Java system property which is only set during testing\r\n* and many more things\r\n\r\nIf you want to do something fancier (and trickier) and performance is not so important, you can also try to dynamically determine whether the auto-wired aspect member variable equals null or not and only activate your pointcuts if the injected object is actually present. The only problem here is how to determine a member variable from a static method. I have no idea about Spring AOP, but in plain AspectJ there is the helper class `Aspects` with several overloaded methods named `aspectOf(..)`. Assuming that your aspect is instantiated as a singleton, you could do something like this:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n\t@Pointcut(&quot;if()&quot;)\r\n\tpublic static boolean isActive() {\r\n\t\treturn Aspects.aspectOf(PerformanceMonitorAspect.class).eventJournalService != null;\r\n\t}\r\n\r\n    // ...\r\n\r\n    @AfterReturning(pointcut = &quot;isActive() &amp;&amp; anyPublicMethod() &amp;&amp; inService() &amp;&amp; @annotation(eventJournal) &amp;&amp; args(entity,..)&quot;, returning = &quot;id&quot;)\r\n    // ...\r\n\r\n    @AfterThrowing(pointcut = &quot;isActive() &amp;&amp; anyPublicMethod() &amp;&amp; inService() &amp;&amp; @annotation(eventJournal) &amp;&amp; args(entity,..)&quot;, throwing=&quot;ex&quot;)\r\n    // ...\r\n","title":"Disabling certain aspects during unit test runs","body":"<p>The answer is simple: You want to use an <a href=\"http://www.eclipse.org/aspectj/doc/next/adk15notebook/ataspectj-pcadvice.html#d0e3697\" rel=\"noreferrer\"><code>if()</code> pointcut expression</a>.</p>\n\n<hr>\n\n<p><strong>Update</strong> (after the question has also been updated): The originally provided link above should contain enough information, but for what it is worth, a short explanation and a simple example:</p>\n\n<p>An <code>if()</code> pointcut is a <code>static</code> aspect method returning a <code>boolean</code>. If the return value is <code>true</code>, it means that any combined pointcut like <code>myPointcut() &amp;&amp; if()</code> matches as long as <code>myPointcut()</code> matches. For a return value of <code>false</code> the whole combined pointcut does not match, effectively deactivating any advice connected to the pointcut.</p>\n\n<p>So what can you do in a static <code>if()</code> pointcut?</p>\n\n<ul>\n<li>evaluate a static boolean member of some tool class like <code>TestMode.ACTIVE</code> which is only true during unit or integration testing</li>\n<li>evaluate an environment variable which is only set during testing</li>\n<li>evaluate a Java system property which is only set during testing</li>\n<li>and many more things</li>\n</ul>\n\n<p>If you want to do something fancier (and trickier) and performance is not so important, you can also try to dynamically determine whether the auto-wired aspect member variable equals null or not and only activate your pointcuts if the injected object is actually present. The only problem here is how to determine a member variable from a static method. I have no idea about Spring AOP, but in plain AspectJ there is the helper class <code>Aspects</code> with several overloaded methods named <code>aspectOf(..)</code>. Assuming that your aspect is instantiated as a singleton, you could do something like this:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Pointcut(\"if()\")\npublic static boolean isActive() {\n    return Aspects.aspectOf(PerformanceMonitorAspect.class).eventJournalService != null;\n}\n\n// ...\n\n@AfterReturning(pointcut = \"isActive() &amp;&amp; anyPublicMethod() &amp;&amp; inService() &amp;&amp; @annotation(eventJournal) &amp;&amp; args(entity,..)\", returning = \"id\")\n// ...\n\n@AfterThrowing(pointcut = \"isActive() &amp;&amp; anyPublicMethod() &amp;&amp; inService() &amp;&amp; @annotation(eventJournal) &amp;&amp; args(entity,..)\", throwing=\"ex\")\n// ...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4926760,"reputation":94,"user_id":3967818,"display_name":"Juan Manuel Reina Morales"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1448041701,"creation_date":1448041701,"answer_id":33832983,"question_id":7433658,"body_markdown":"You can write a method that returns if current execution was launched using JUnit framework.\r\n\r\nThe method can check stack trace with Thread.currentThread().getStackTrace() and search for MockitoJUnitRunner presence.\r\n\r\nI tested this solution using a SpringJUnit4ClassRunner but I think could work with MockitoJUnitRunner.\r\n\r\nAlso, you can have got a static boolean field like:\r\n\r\n    private static boolean TEST_ENVIRONMENT = false;\r\n\r\nIn a class present in your project (not in your tests) and check the value in the control method instead of use stack trace.\r\n\r\nWhen you run your tests, you can use @BeforeClass annotation to set TEST_ENVIRONMENT = true.\r\n\r\nThis solution only gives you a way to know if your code is running from a test or not.","title":"Disabling certain aspects during unit test runs","body":"<p>You can write a method that returns if current execution was launched using JUnit framework.</p>\n\n<p>The method can check stack trace with Thread.currentThread().getStackTrace() and search for MockitoJUnitRunner presence.</p>\n\n<p>I tested this solution using a SpringJUnit4ClassRunner but I think could work with MockitoJUnitRunner.</p>\n\n<p>Also, you can have got a static boolean field like:</p>\n\n<pre><code>private static boolean TEST_ENVIRONMENT = false;\n</code></pre>\n\n<p>In a class present in your project (not in your tests) and check the value in the control method instead of use stack trace.</p>\n\n<p>When you run your tests, you can use @BeforeClass annotation to set TEST_ENVIRONMENT = true.</p>\n\n<p>This solution only gives you a way to know if your code is running from a test or not.</p>\n"}],"owner":{"account_id":913906,"reputation":508,"user_id":947155,"accept_rate":64,"display_name":"netta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9264,"favorite_count":0,"down_vote_count":0,"up_vote_count":20,"answer_count":4,"score":20,"last_activity_date":1640060055,"creation_date":1316101523,"question_id":7433658,"body_markdown":"I have integration tests (load context) and unit tests running together. My code does aspectj compile time weaving using spring. \r\n\r\nMy problem is that my declared advises also run during some of my unit tests. This kills the notion of a unit test, which is why I would like to disable them.\r\n\r\nIs there something I can put on the pointcut declaration, some method I can call, some spring configuration, or maven command that disables these advises for something like all *UnitTest.java?\r\n\r\nThanks for the help.\r\n\r\n---------------------\r\n\r\nexample:\r\n\r\nI have the following unit test:\r\n\r\n \r\n    @RunWith(MockitoJUnitRunner.class)\r\n    public class CompanyServiceImplTest {\r\n        @Test\r\n        public void createCampaignTest() throws Exception {\r\n            when(companyDaoMock.saveCompany(any(Campaign.class))).thenReturn(77L);\r\n    \r\n            Long campaignId = companyService.createCampaign(campaignMock);\r\n    \r\n            assertEquals(Long.valueOf(77L), Long.valueOf(campaignId));\r\n        }\r\n    }\r\n\r\nand following service method:\r\n\r\n    @Override\r\n    @Transactional\r\n    @EventJournal(type = EventType.CAMPAIGN_CREATE, owner = EventOwner.TERMINAL_USER)\r\n    public Long createCampaign(Campaign campaign) {\r\n        return companyDao.saveCompany(campaign);\r\n    }\r\n\r\naspect:\r\n\r\n    @Aspect\r\n    public class EventJournalAspect {\r\n    \r\n        @Autowired\r\n        private EventJournalService eventJournalService;\r\n    \r\n        @Pointcut(value=&quot;execution(public * *(..))&quot;)\r\n        public void anyPublicMethod() {}\r\n    \r\n        @Pointcut(&quot;within(com.terminal.service..*)&quot;)\r\n        private void inService() {}\r\n    \r\n    \t@AfterReturning(pointcut = &quot;anyPublicMethod() &amp;&amp; inService() &amp;&amp; @annotation(eventJournal) &amp;&amp; args(entity,..)&quot;, returning = &quot;id&quot;)\r\n    \tpublic void process(Object id, EventJournal eventJournal, AbstractDomainEntity entity)\r\n    \t\t\tthrows Throwable {\r\n    \t\tif (eventJournal.type() != EventType.CAMPAIGN_PAYMENT || id != null) {\r\n    \t\t\tsaveEvent(eventJournal, EventStatus.SUCCESS, entity, (Long) id);\r\n    \t\t}\r\n    \t}\r\n    \r\n        @AfterThrowing(pointcut = &quot;anyPublicMethod() &amp;&amp; inService() &amp;&amp; @annotation(eventJournal) &amp;&amp; args(entity,..)&quot;, throwing=&quot;ex&quot;)\r\n        public void processException(EventJournal eventJournal, AbstractDomainEntity entity, Exception ex) throws Throwable {\r\n            saveEvent(eventJournal, EventStatus.FAILURE, entity, null);\r\n        }\r\n    \r\n        private void saveEvent(EventJournal eventJournal, EventStatus status, AbstractDomainEntity entity, Long persistentId)   {\r\n            EventType type = eventJournal.type();\r\n            EventOwner owner = eventJournal.owner();\r\n            eventJournalService.saveEvent(type, owner, EventStatus.SUCCESS, entity, persistentId);\r\n        }\r\n    \r\n    }\r\n\r\n\r\nWhen test executes - `eventJournalService` is null. Thus I see `NullPointerException`","title":"Disabling certain aspects during unit test runs","body":"<p>I have integration tests (load context) and unit tests running together. My code does aspectj compile time weaving using spring. </p>\n\n<p>My problem is that my declared advises also run during some of my unit tests. This kills the notion of a unit test, which is why I would like to disable them.</p>\n\n<p>Is there something I can put on the pointcut declaration, some method I can call, some spring configuration, or maven command that disables these advises for something like all *UnitTest.java?</p>\n\n<p>Thanks for the help.</p>\n\n<hr>\n\n<p>example:</p>\n\n<p>I have the following unit test:</p>\n\n<pre><code>@RunWith(MockitoJUnitRunner.class)\npublic class CompanyServiceImplTest {\n    @Test\n    public void createCampaignTest() throws Exception {\n        when(companyDaoMock.saveCompany(any(Campaign.class))).thenReturn(77L);\n\n        Long campaignId = companyService.createCampaign(campaignMock);\n\n        assertEquals(Long.valueOf(77L), Long.valueOf(campaignId));\n    }\n}\n</code></pre>\n\n<p>and following service method:</p>\n\n<pre><code>@Override\n@Transactional\n@EventJournal(type = EventType.CAMPAIGN_CREATE, owner = EventOwner.TERMINAL_USER)\npublic Long createCampaign(Campaign campaign) {\n    return companyDao.saveCompany(campaign);\n}\n</code></pre>\n\n<p>aspect:</p>\n\n<pre><code>@Aspect\npublic class EventJournalAspect {\n\n    @Autowired\n    private EventJournalService eventJournalService;\n\n    @Pointcut(value=\"execution(public * *(..))\")\n    public void anyPublicMethod() {}\n\n    @Pointcut(\"within(com.terminal.service..*)\")\n    private void inService() {}\n\n    @AfterReturning(pointcut = \"anyPublicMethod() &amp;&amp; inService() &amp;&amp; @annotation(eventJournal) &amp;&amp; args(entity,..)\", returning = \"id\")\n    public void process(Object id, EventJournal eventJournal, AbstractDomainEntity entity)\n            throws Throwable {\n        if (eventJournal.type() != EventType.CAMPAIGN_PAYMENT || id != null) {\n            saveEvent(eventJournal, EventStatus.SUCCESS, entity, (Long) id);\n        }\n    }\n\n    @AfterThrowing(pointcut = \"anyPublicMethod() &amp;&amp; inService() &amp;&amp; @annotation(eventJournal) &amp;&amp; args(entity,..)\", throwing=\"ex\")\n    public void processException(EventJournal eventJournal, AbstractDomainEntity entity, Exception ex) throws Throwable {\n        saveEvent(eventJournal, EventStatus.FAILURE, entity, null);\n    }\n\n    private void saveEvent(EventJournal eventJournal, EventStatus status, AbstractDomainEntity entity, Long persistentId)   {\n        EventType type = eventJournal.type();\n        EventOwner owner = eventJournal.owner();\n        eventJournalService.saveEvent(type, owner, EventStatus.SUCCESS, entity, persistentId);\n    }\n\n}\n</code></pre>\n\n<p>When test executes - <code>eventJournalService</code> is null. Thus I see <code>NullPointerException</code></p>\n"},{"tags":["java","spring","annotations","aspectj","spring-aop"],"comments":[{"owner":{"account_id":2521457,"reputation":3774,"user_id":2191746,"display_name":"sheltem"},"score":0,"creation_date":1429264498,"post_id":29681675,"comment_id":47527986,"body_markdown":"possible duplicate of [Pointcut matching methods with annotated parameters](http://stackoverflow.com/questions/2766844/pointcut-matching-methods-with-annotated-parameters)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/2766844/pointcut-matching-methods-with-annotated-parameters\">Pointcut matching methods with annotated parameters</a>"},{"owner":{"account_id":1077512,"reputation":2115,"user_id":1075330,"accept_rate":82,"display_name":"Stormcloud"},"score":0,"creation_date":1429267285,"post_id":29681675,"comment_id":47529892,"body_markdown":"@sheltem, Thanks for pointing me that this. Unfortunately this was one of the things I tried, but failed. The logs contained the error: Pointcut is not well-formed: expecting &#39;name pattern&#39; at character position 56\nexecution(public * *(.., @aspects.VerifyMe(*), ..))","body":"@sheltem, Thanks for pointing me that this. Unfortunately this was one of the things I tried, but failed. The logs contained the error: Pointcut is not well-formed: expecting &#39;name pattern&#39; at character position 56 execution(public * <i>(.., @aspects.VerifyMe(</i>), ..))"},{"owner":{"account_id":1077512,"reputation":2115,"user_id":1075330,"accept_rate":82,"display_name":"Stormcloud"},"score":0,"creation_date":1429267715,"post_id":29681675,"comment_id":47530195,"body_markdown":"BTW: there are two stars seperated by a space after the word &#39;public&#39; - stackoverflow has interpreted them as italic!","body":"BTW: there are two stars seperated by a space after the word &#39;public&#39; - stackoverflow has interpreted them as italic!"},{"owner":{"account_id":2521457,"reputation":3774,"user_id":2191746,"display_name":"sheltem"},"score":0,"creation_date":1429269077,"post_id":29681675,"comment_id":47531114,"body_markdown":"You may want to edit your question to add that information then. Telling us what you tried so far and what happened/did not work helps to avoid repitition.","body":"You may want to edit your question to add that information then. Telling us what you tried so far and what happened/did not work helps to avoid repitition."},{"owner":{"account_id":1077512,"reputation":2115,"user_id":1075330,"accept_rate":82,"display_name":"Stormcloud"},"score":0,"creation_date":1429276463,"post_id":29681675,"comment_id":47536246,"body_markdown":"Good point. I&#39;ll update","body":"Good point. I&#39;ll update"},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":1,"creation_date":1429341869,"post_id":29681675,"comment_id":47563575,"body_markdown":"I have edited the question: There is no such thing as a &quot;cut-point&quot;, but the technical term in AOP is &quot;pointcut&quot;. I also added syntax highlighting. I hope you do not mind. BTW, in one of your comments you say &quot;cut-point method&quot;. If you mean the method which is bound to a pointcut and executed when a pointcut is intercepted, that one is called an &quot;advice&quot;. :-)","body":"I have edited the question: There is no such thing as a &quot;cut-point&quot;, but the technical term in AOP is &quot;pointcut&quot;. I also added syntax highlighting. I hope you do not mind. BTW, in one of your comments you say &quot;cut-point method&quot;. If you mean the method which is bound to a pointcut and executed when a pointcut is intercepted, that one is called an &quot;advice&quot;. :-)"}],"answers":[{"tags":[],"owner":{"account_id":2521457,"reputation":3774,"user_id":2191746,"display_name":"sheltem"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1429278301,"creation_date":1429278301,"answer_id":29701027,"question_id":29681675,"body_markdown":"This is what I ended up at after fiddling about with it (imports omitted):\r\n\r\n    @Aspect\r\n    public class VerifyAspect {\r\n\r\n    \t@Before(&quot;execution(* *(.., @annotations.MyAnnotation (*), ..)) &amp;&amp; args(.., verifyMe)&quot;)\r\n    \tpublic void verifyInvestigationId(final Object verifyMe) {\r\n\t    \tSystem.out.println(&quot;Aspect verifying: &quot; + verifyMe);\r\n\t    }\r\n    }\r\n\r\nNo need for anything Spring-specific, as AspectJ already provides you with the parameters if so desired.","title":"How to write an Aspect pointcut based on an annotated parameter","body":"<p>This is what I ended up at after fiddling about with it (imports omitted):</p>\n\n<pre><code>@Aspect\npublic class VerifyAspect {\n\n    @Before(\"execution(* *(.., @annotations.MyAnnotation (*), ..)) &amp;&amp; args(.., verifyMe)\")\n    public void verifyInvestigationId(final Object verifyMe) {\n        System.out.println(\"Aspect verifying: \" + verifyMe);\n    }\n}\n</code></pre>\n\n<p>No need for anything Spring-specific, as AspectJ already provides you with the parameters if so desired.</p>\n"},{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"down_vote_count":0,"up_vote_count":20,"is_accepted":true,"score":20,"last_activity_date":1547267463,"creation_date":1429343573,"answer_id":29714549,"question_id":29681675,"body_markdown":"Very similar to [my answer here](https://stackoverflow.com/a/15605403/1082681) which *sheltem* already pointed to, the solution looks like this (in annotation-style syntax this time because in Spring AOP you cannot use native AspectJ syntax):\r\n\r\n**Original poster&#39;s annotation:**\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n\tpackage annotations;\r\n\t\r\n\timport java.lang.annotation.ElementType;\r\n\timport java.lang.annotation.Retention;\r\n\timport java.lang.annotation.RetentionPolicy;\r\n\timport java.lang.annotation.Target;\r\n\t\r\n\t@Retention(RetentionPolicy.RUNTIME)\r\n\t@Target({ ElementType.PARAMETER })\r\n\tpublic @interface MyAnnotation {}\r\n\r\n**Driver Application:**\r\n\r\nI use the driver application in order to test my AspectJ solution. In Spring the class as well as the aspect need to be Spring beans/components in order for this to work.\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n\tpackage de.scrum_master.app;\r\n\r\n\timport java.util.ArrayList;\r\n\timport java.util.HashSet;\r\n\timport java.util.List;\r\n\timport java.util.Set;\r\n\t\r\n\timport annotations.MyAnnotation;\r\n\t\r\n\tpublic class Application {\r\n\t\tpublic void method1(@MyAnnotation int i) {}\r\n\t\tpublic void method2(String id, @MyAnnotation float f) {}\r\n\t\tpublic void method3(int i, @MyAnnotation List&lt;String&gt; strings, @MyAnnotation String s) {}\r\n\t\tpublic void method4(int i, @MyAnnotation Set&lt;Integer&gt; numbers, float f, boolean b) {}\r\n\t\tpublic void method5(boolean b, String s, @MyAnnotation String s2, float f, int i) {}\r\n\t\tpublic void notIntercepted(boolean b, String s, String s2, float f, int i) {}\r\n\t\r\n\t\tpublic static void main(String[] args) {\r\n\t\t\tList&lt;String&gt; strings = new ArrayList&lt;String&gt;();\r\n\t\t\tstrings.add(&quot;foo&quot;);\r\n\t\t\tstrings.add(&quot;bar&quot;);\r\n\t\t\tSet&lt;Integer&gt; numbers = new HashSet&lt;Integer&gt;();\r\n\t\t\tnumbers.add(11);\r\n\t\t\tnumbers.add(22);\r\n\t\t\tnumbers.add(33);\r\n\t\r\n\t\t\tApplication app = new Application();\r\n\t\t\tapp.method1(1);\r\n\t\t\tapp.method2(&quot;foo&quot;, 1f);\r\n\t\t\tapp.method3(1, strings, &quot;foo&quot;);\r\n\t\t\tapp.method4(1, numbers, 1f, true);\r\n\t\t\tapp.method5(false, &quot;foo&quot;, &quot;bar&quot;, 1f, 1);\r\n\t\t\tapp.notIntercepted(false, &quot;foo&quot;, &quot;bar&quot;, 1f, 1);\r\n\t\t}\r\n\t}\r\n\r\n**Aspect:**\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n\tpackage de.scrum_master.aspect;\r\n\t\r\n\timport java.lang.annotation.Annotation;\r\n\t\r\n\timport org.aspectj.lang.JoinPoint;\r\n\timport org.aspectj.lang.SoftException;\r\n\timport org.aspectj.lang.annotation.Aspect;\r\n\timport org.aspectj.lang.annotation.Before;\r\n\timport org.aspectj.lang.reflect.MethodSignature;\r\n\t\r\n\timport annotations.MyAnnotation;\r\n\t\r\n\t@Aspect\r\n\tpublic class ArgCatcherAspect {\r\n\t\t@Before(&quot;execution(public * *(.., @MyAnnotation (*), ..))&quot;)\r\n\t\tpublic void interceptMethodsWithAnnotatedParameters(JoinPoint thisJoinPoint) {\r\n\t\t\tSystem.out.println(thisJoinPoint);\r\n\t\t\tMethodSignature signature = (MethodSignature) thisJoinPoint.getSignature();\r\n\t\t\tString methodName = signature.getMethod().getName();\r\n\t\t\tClass&lt;?&gt;[] parameterTypes = signature.getMethod().getParameterTypes();\r\n\t\t\tAnnotation[][] annotations;\r\n\t\t\ttry {\r\n\t\t\t\tannotations = thisJoinPoint.getTarget().getClass().\r\n\t\t\t\t\tgetMethod(methodName, parameterTypes).getParameterAnnotations();\r\n\t\t\t} catch (Exception e) {\r\n\t\t\t\tthrow new SoftException(e);\r\n\t\t\t}\r\n\t\t\tint i = 0;\r\n\t\t\tfor (Object arg : thisJoinPoint.getArgs()) {\r\n\t\t\t\tfor (Annotation annotation : annotations[i]) {\r\n\t\t\t\t\tif (annotation.annotationType() == MyAnnotation.class) {\r\n\t\t\t\t\t\tSystem.out.println(&quot;  &quot; + annotation + &quot; -&gt; &quot; + arg);\r\n\t\t\t\t\t\t// Verify &#39;arg&#39; here or do whatever\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n**Console log:**\r\n\r\n&lt;!-- language: none --&gt;\r\n\r\n    execution(void de.scrum_master.app.Application.method1(int))\r\n      @annotations.MyAnnotation() -&gt; 1\r\n    execution(void de.scrum_master.app.Application.method2(String, float))\r\n      @annotations.MyAnnotation() -&gt; 1.0\r\n    execution(void de.scrum_master.app.Application.method3(int, List, String))\r\n      @annotations.MyAnnotation() -&gt; [foo, bar]\r\n      @annotations.MyAnnotation() -&gt; foo\r\n    execution(void de.scrum_master.app.Application.method4(int, Set, float, boolean))\r\n      @annotations.MyAnnotation() -&gt; [33, 22, 11]\r\n    execution(void de.scrum_master.app.Application.method5(boolean, String, String, float, int))\r\n      @annotations.MyAnnotation() -&gt; bar\r\n","title":"How to write an Aspect pointcut based on an annotated parameter","body":"<p>Very similar to <a href=\"https://stackoverflow.com/a/15605403/1082681\">my answer here</a> which <em>sheltem</em> already pointed to, the solution looks like this (in annotation-style syntax this time because in Spring AOP you cannot use native AspectJ syntax):</p>\n\n<p><strong>Original poster's annotation:</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package annotations;\n\nimport java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\n\n@Retention(RetentionPolicy.RUNTIME)\n@Target({ ElementType.PARAMETER })\npublic @interface MyAnnotation {}\n</code></pre>\n\n<p><strong>Driver Application:</strong></p>\n\n<p>I use the driver application in order to test my AspectJ solution. In Spring the class as well as the aspect need to be Spring beans/components in order for this to work.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.app;\n\nimport java.util.ArrayList;\nimport java.util.HashSet;\nimport java.util.List;\nimport java.util.Set;\n\nimport annotations.MyAnnotation;\n\npublic class Application {\n    public void method1(@MyAnnotation int i) {}\n    public void method2(String id, @MyAnnotation float f) {}\n    public void method3(int i, @MyAnnotation List&lt;String&gt; strings, @MyAnnotation String s) {}\n    public void method4(int i, @MyAnnotation Set&lt;Integer&gt; numbers, float f, boolean b) {}\n    public void method5(boolean b, String s, @MyAnnotation String s2, float f, int i) {}\n    public void notIntercepted(boolean b, String s, String s2, float f, int i) {}\n\n    public static void main(String[] args) {\n        List&lt;String&gt; strings = new ArrayList&lt;String&gt;();\n        strings.add(\"foo\");\n        strings.add(\"bar\");\n        Set&lt;Integer&gt; numbers = new HashSet&lt;Integer&gt;();\n        numbers.add(11);\n        numbers.add(22);\n        numbers.add(33);\n\n        Application app = new Application();\n        app.method1(1);\n        app.method2(\"foo\", 1f);\n        app.method3(1, strings, \"foo\");\n        app.method4(1, numbers, 1f, true);\n        app.method5(false, \"foo\", \"bar\", 1f, 1);\n        app.notIntercepted(false, \"foo\", \"bar\", 1f, 1);\n    }\n}\n</code></pre>\n\n<p><strong>Aspect:</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.aspect;\n\nimport java.lang.annotation.Annotation;\n\nimport org.aspectj.lang.JoinPoint;\nimport org.aspectj.lang.SoftException;\nimport org.aspectj.lang.annotation.Aspect;\nimport org.aspectj.lang.annotation.Before;\nimport org.aspectj.lang.reflect.MethodSignature;\n\nimport annotations.MyAnnotation;\n\n@Aspect\npublic class ArgCatcherAspect {\n    @Before(\"execution(public * *(.., @MyAnnotation (*), ..))\")\n    public void interceptMethodsWithAnnotatedParameters(JoinPoint thisJoinPoint) {\n        System.out.println(thisJoinPoint);\n        MethodSignature signature = (MethodSignature) thisJoinPoint.getSignature();\n        String methodName = signature.getMethod().getName();\n        Class&lt;?&gt;[] parameterTypes = signature.getMethod().getParameterTypes();\n        Annotation[][] annotations;\n        try {\n            annotations = thisJoinPoint.getTarget().getClass().\n                getMethod(methodName, parameterTypes).getParameterAnnotations();\n        } catch (Exception e) {\n            throw new SoftException(e);\n        }\n        int i = 0;\n        for (Object arg : thisJoinPoint.getArgs()) {\n            for (Annotation annotation : annotations[i]) {\n                if (annotation.annotationType() == MyAnnotation.class) {\n                    System.out.println(\"  \" + annotation + \" -&gt; \" + arg);\n                    // Verify 'arg' here or do whatever\n                }\n            }\n            i++;\n        }\n    }\n}\n</code></pre>\n\n<p><strong>Console log:</strong></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>execution(void de.scrum_master.app.Application.method1(int))\n  @annotations.MyAnnotation() -&gt; 1\nexecution(void de.scrum_master.app.Application.method2(String, float))\n  @annotations.MyAnnotation() -&gt; 1.0\nexecution(void de.scrum_master.app.Application.method3(int, List, String))\n  @annotations.MyAnnotation() -&gt; [foo, bar]\n  @annotations.MyAnnotation() -&gt; foo\nexecution(void de.scrum_master.app.Application.method4(int, Set, float, boolean))\n  @annotations.MyAnnotation() -&gt; [33, 22, 11]\nexecution(void de.scrum_master.app.Application.method5(boolean, String, String, float, int))\n  @annotations.MyAnnotation() -&gt; bar\n</code></pre>\n"}],"owner":{"account_id":1077512,"reputation":2115,"user_id":1075330,"accept_rate":82,"display_name":"Stormcloud"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7502,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"accepted_answer_id":29714549,"answer_count":2,"score":15,"last_activity_date":1640060016,"creation_date":1429204433,"question_id":29681675,"body_markdown":"I&#39;m having a bit of trouble working out how to create a pointcut that will operate on beans that have a specific annotated parameter. My eventual aim is to validate the value of the parameter before it&#39;s processed, but for the moment I just need to create the pointcut.\r\n\r\nConsider the following annotation\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @Target({ ElementType.PARAMETER })\r\n    public @interface MyAnnotation {}\r\n\r\nI&#39;d then like to apply this to a number of methods like:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    public void method1(@MyAnnotation long i) {}\r\n    public void method2(String someThing, @MyAnnotation long i) {}\r\n    public void method3(String someThing, @MyAnnotation long i, byte value) {}\r\n\r\nSo\r\n\r\n - I don&#39;t care which class (or package) the methods are in\r\n - The position of the annotated argument will vary. \r\n - I do know that annotated value will only apply to a specific type\r\n\r\nMy pointcut implementation needs to be _something_ along the lines of:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    @Before(value = &quot;* *(..) &amp;&amp; args(verifyMe)&quot;)\r\n    public void verifyInvestigationId(long verifyMe) {}\r\n\r\nI&#39;m getting a bit confused about exactly what that `@Before` value needs to be and how to tie in the annotation and its type. At this point it&#39;s probably not worth listing the things I&#39;ve tried!\r\n\r\n**Update**: Based on the advice I&#39;ve seen in [http://stackoverflow.com/questions/3565718/pointcut-matching-methods-with-annotated-parameters/3567170#3567170](here) (and correcting a couple of misunderstandings and adding space I overlooked) I&#39;ve got to the point where the following works:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    @Before(&quot;execution(public * *(.., @full.path.to.MyAnnotation (*), ..))&quot;)\r\n    public void beforeMethod(JoinPoint joinPoint) {\r\n        System.out.println(&quot;At least one of the parameters are annotated with @MyAnnotation&quot;);\r\n    }\r\n\r\nThis is almost what I need - all I need to do is pass the value of the annotated argument as an parameter to the method. I can&#39;t quite work out the syntax to get Spring to do this (the linked answer does not show this).","title":"How to write an Aspect pointcut based on an annotated parameter","body":"<p>I'm having a bit of trouble working out how to create a pointcut that will operate on beans that have a specific annotated parameter. My eventual aim is to validate the value of the parameter before it's processed, but for the moment I just need to create the pointcut.</p>\n\n<p>Consider the following annotation</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Retention(RetentionPolicy.RUNTIME)\n@Target({ ElementType.PARAMETER })\npublic @interface MyAnnotation {}\n</code></pre>\n\n<p>I'd then like to apply this to a number of methods like:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public void method1(@MyAnnotation long i) {}\npublic void method2(String someThing, @MyAnnotation long i) {}\npublic void method3(String someThing, @MyAnnotation long i, byte value) {}\n</code></pre>\n\n<p>So</p>\n\n<ul>\n<li>I don't care which class (or package) the methods are in</li>\n<li>The position of the annotated argument will vary. </li>\n<li>I do know that annotated value will only apply to a specific type</li>\n</ul>\n\n<p>My pointcut implementation needs to be <em>something</em> along the lines of:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Before(value = \"* *(..) &amp;&amp; args(verifyMe)\")\npublic void verifyInvestigationId(long verifyMe) {}\n</code></pre>\n\n<p>I'm getting a bit confused about exactly what that <code>@Before</code> value needs to be and how to tie in the annotation and its type. At this point it's probably not worth listing the things I've tried!</p>\n\n<p><strong>Update</strong>: Based on the advice I've seen in http://stackoverflow.com/questions/3565718/pointcut-matching-methods-with-annotated-parameters/3567170#3567170 (and correcting a couple of misunderstandings and adding space I overlooked) I've got to the point where the following works:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Before(\"execution(public * *(.., @full.path.to.MyAnnotation (*), ..))\")\npublic void beforeMethod(JoinPoint joinPoint) {\n    System.out.println(\"At least one of the parameters are annotated with @MyAnnotation\");\n}\n</code></pre>\n\n<p>This is almost what I need - all I need to do is pass the value of the annotated argument as an parameter to the method. I can't quite work out the syntax to get Spring to do this (the linked answer does not show this).</p>\n"},{"tags":["java","spring","aspectj","spring-aop"],"comments":[{"owner":{"account_id":27171,"reputation":9206,"user_id":71420,"accept_rate":87,"display_name":"Igor Konoplyanko"},"score":0,"creation_date":1593687166,"post_id":62694633,"comment_id":110870193,"body_markdown":"are you using Spring AOP or AspectJ?","body":"are you using Spring AOP or AspectJ?"},{"owner":{"account_id":1796449,"reputation":55,"user_id":1635764,"display_name":"koushik"},"score":0,"creation_date":1593689274,"post_id":62694633,"comment_id":110871209,"body_markdown":"@IgorKonoplyanko AspectJ. Sorry i would have tagged properly :)","body":"@IgorKonoplyanko AspectJ. Sorry i would have tagged properly :)"},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1593692245,"post_id":62694633,"comment_id":110872601,"body_markdown":"Well, now you tagged both, so it is even more unclear. In order to help you, I need to see what you replaced by comments. Then I can suggest how to refactor the existing code to allow for a logging aspect to do its job.","body":"Well, now you tagged both, so it is even more unclear. In order to help you, I need to see what you replaced by comments. Then I can suggest how to refactor the existing code to allow for a logging aspect to do its job."},{"owner":{"account_id":1796449,"reputation":55,"user_id":1635764,"display_name":"koushik"},"score":0,"creation_date":1593693225,"post_id":62694633,"comment_id":110873107,"body_markdown":"@kriegaex corrected,","body":"@kriegaex corrected,"},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1593699241,"post_id":62694633,"comment_id":110876529,"body_markdown":"Yeah, but where is the additional code I requested? I cannot read your mind, unfortunately.","body":"Yeah, but where is the additional code I requested? I cannot read your mind, unfortunately."},{"owner":{"account_id":1796449,"reputation":55,"user_id":1635764,"display_name":"koushik"},"score":0,"creation_date":1593775928,"post_id":62694633,"comment_id":110904201,"body_markdown":"@kriegaex  Added the aspect class as well. Is this what you wanted ? Or anything else i am missing ?","body":"@kriegaex  Added the aspect class as well. Is this what you wanted ? Or anything else i am missing ?"},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1593779006,"post_id":62694633,"comment_id":110905597,"body_markdown":"By _&quot;I need to see what you replaced by comments&quot;_ I meant this: `//rest of the business logic here`. I still do not see it. You want to learn what an [MCVE](https://stackoverflow.com/help/mcve) is and ask better questions next time. Please read! Anyway, I think I can answer your question in general, just not specific to your code because I still cannot see it.","body":"By <i>&quot;I need to see what you replaced by comments&quot;</i> I meant this: <code>&#47;&#47;rest of the business logic here</code>. I still do not see it. You want to learn what an <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> is and ask better questions next time. Please read! Anyway, I think I can answer your question in general, just not specific to your code because I still cannot see it."}],"answers":[{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1593779729,"creation_date":1593779729,"answer_id":62715579,"question_id":62694633,"body_markdown":"The simple answer is: With Spring AOP you can intercept method calls, not single lines of code. Even if you could, it would be a maintenance nightmare because code inside a method changes frequently. Even if you have a stable API of public methods, they are black boxes and you (or one of your colleagues) can change their internal implementation at any time.\r\n\r\nBut the solution is simple: Apply &quot;Clean Code&quot; principles (I hope you have read the book or know about the software craftsmanship movement from other sources already), i.e. use short methods, factoring out more complex code into smaller, re-useable, well named and maintainable pieces with low complexity. Factor out methods to the granularity level you need for logging, e.g.\r\n\r\n```java\r\npublic void myBusinessLogicMethod() {\r\n  if (myVariable == 0)\r\n    smallerBusinessLogicA(myVariable, someParameter);\r\n  else\r\n    smallerBusinessLogicB(myVariable);\r\n}\r\n```\r\n\r\nThen target those factored out methods with your logging pointcut and log their names, parameters and/or results (whatever you need). In order for this to work with Spring AOP, you need to be careful to\r\n\r\n  * either factor out the helper methods into other Spring component classes because Spring AOP does not support self-invocation interception\r\n  * or self-inject the bean so you can call the helper methods using the injected bean (i.e. you use the AOP proxy and not the real implementation class underneath that does not know anything about AOP)\r\n  * or switch from Spring AOP to full AspectJ which does not use proxies and works with self-invocation.\r\n\r\nAnother difference between Spring AOP and AspectJ is that the former can only target non-private methods, while AspectJ has no such limitation.","title":"Is there a way of calling an advice method after execution of certain line of code using spring AOP","body":"<p>The simple answer is: With Spring AOP you can intercept method calls, not single lines of code. Even if you could, it would be a maintenance nightmare because code inside a method changes frequently. Even if you have a stable API of public methods, they are black boxes and you (or one of your colleagues) can change their internal implementation at any time.</p>\n<p>But the solution is simple: Apply &quot;Clean Code&quot; principles (I hope you have read the book or know about the software craftsmanship movement from other sources already), i.e. use short methods, factoring out more complex code into smaller, re-useable, well named and maintainable pieces with low complexity. Factor out methods to the granularity level you need for logging, e.g.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void myBusinessLogicMethod() {\n  if (myVariable == 0)\n    smallerBusinessLogicA(myVariable, someParameter);\n  else\n    smallerBusinessLogicB(myVariable);\n}\n</code></pre>\n<p>Then target those factored out methods with your logging pointcut and log their names, parameters and/or results (whatever you need). In order for this to work with Spring AOP, you need to be careful to</p>\n<ul>\n<li>either factor out the helper methods into other Spring component classes because Spring AOP does not support self-invocation interception</li>\n<li>or self-inject the bean so you can call the helper methods using the injected bean (i.e. you use the AOP proxy and not the real implementation class underneath that does not know anything about AOP)</li>\n<li>or switch from Spring AOP to full AspectJ which does not use proxies and works with self-invocation.</li>\n</ul>\n<p>Another difference between Spring AOP and AspectJ is that the former can only target non-private methods, while AspectJ has no such limitation.</p>\n"}],"owner":{"account_id":1796449,"reputation":55,"user_id":1635764,"display_name":"koushik"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":590,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":62715579,"answer_count":1,"score":1,"last_activity_date":1640059929,"creation_date":1593686935,"question_id":62694633,"body_markdown":"I have been wring Aspect for logging purpose. Now i am able to use before and after advice. But is it possible to call an advice after execution of certain line of business logic. Here is my current code and i want to substitute my code with advice. How to do that?\r\n\r\n    @ComponentScan\r\n    @EnableCaching\r\n    @EnableAutoConfiguration(exclude = {MetricFilterAutoConfiguration.class, MetricRepositoryAutoConfiguration.class})\r\n    public class Application {\r\n    \r\n        private final Logger log = LoggerFactory.getLogger(Application.class);\r\n    \r\n        @Inject\r\n        private Environment env;\r\n    \r\n        @Inject\r\n        private AppConfig appConfig;\r\n        public void myBusinessLogicMethod(){\r\n        if (myVariable == 0) {\r\n            \t\tlog.info(&quot;No Spring profile configured, running with default configuration&quot;);\r\n                    //rest of the business logic here\r\n            \t} else {\r\n            \t\tlog.info(&quot;Running with number profile(s) : {}&quot;,myVariable);\r\n        //    \t\t //rest of the business logic here\r\n        \r\n        }\r\nMy Aspect class\r\n\r\n    @Aspect\r\n    @Order(0)\r\n    public class LoggingAspect {\r\n    \r\n    \tprivate final Logger log = LoggerFactory.getLogger(this.getClass());\r\n    \r\n    \t@Inject\r\n    \tprivate HttpServletRequest request;\r\n    \r\n    \t@Inject\r\n    \tprivate HttpServletResponse response;\r\n    \r\n    \t@Inject\r\n    \tprivate Environment env;\r\n    \r\n    \t@Pointcut(&quot;(within(com.repository.*) || within(com.service.*) || &quot;\r\n    \t\t\t+ &quot;within(com.web.rest.*)) &amp;&amp; &quot;\r\n    \t\t\t+ &quot;!@annotation(com.aop.logging.NoLogging)&quot;)\r\n    \tpublic void loggingPoincut() {\r\n    \r\n    \t}\r\n    \r\n    \t@Before(&quot;within(com.web.rest.*) &amp;&amp; &quot;\r\n    \t\t\t+ &quot;!@annotation(com.aop.logging.NoLogging)&quot;)\r\n    \tpublic void beforeRest(JoinPoint point) throws UnknownHostException {\r\n    \t\tString ipAddress = getIpAddress();\r\n    \t\tif (log.isDebugEnabled()) {\r\n    \t\t\tlog.debug(&quot;&gt;&gt;&gt;&gt;&gt;&gt; From IP {}&quot;, isIpAvailble(ipAddress));\r\n    \t\t\tlog.debug(&quot;Enter: {}.{}() with argument[s] = {}&quot;, point.getSignature().getDeclaringTypeName(),\r\n    \t\t\t\t\tpoint.getSignature().getName(), Arrays.toString(point.getArgs()));\r\n    \t\t}\r\n    \t}\r\n    \r\n    \t@After(&quot;within(com.web.rest.*) &amp;&amp; &quot;\r\n    \t\t\t+ &quot;!@annotation(com.aop.logging.NoLogging)&quot;)\r\n    \tpublic void afterRest(JoinPoint point) throws UnknownHostException {\r\n    \t\tif (log.isDebugEnabled()) {\r\n    \t\t\tlog.debug(&quot;Exit: {}.{}()&quot;, point.getSignature().getDeclaringTypeName(), point.getSignature()\r\n    \t\t\t\t\t.getName());\r\n    \t\t\tlog.debug(&quot;&lt;&lt;&lt;&lt;&lt;&lt; Rest Call Finished {} &quot;, response.getStatus());\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \t}\r\n\r\nHow can i replace tightly coupled log with an advice in my aspect class.","title":"Is there a way of calling an advice method after execution of certain line of code using spring AOP","body":"<p>I have been wring Aspect for logging purpose. Now i am able to use before and after advice. But is it possible to call an advice after execution of certain line of business logic. Here is my current code and i want to substitute my code with advice. How to do that?</p>\n<pre><code>@ComponentScan\n@EnableCaching\n@EnableAutoConfiguration(exclude = {MetricFilterAutoConfiguration.class, MetricRepositoryAutoConfiguration.class})\npublic class Application {\n\n    private final Logger log = LoggerFactory.getLogger(Application.class);\n\n    @Inject\n    private Environment env;\n\n    @Inject\n    private AppConfig appConfig;\n    public void myBusinessLogicMethod(){\n    if (myVariable == 0) {\n                log.info(&quot;No Spring profile configured, running with default configuration&quot;);\n                //rest of the business logic here\n            } else {\n                log.info(&quot;Running with number profile(s) : {}&quot;,myVariable);\n    //           //rest of the business logic here\n    \n    }\n</code></pre>\n<p>My Aspect class</p>\n<pre><code>@Aspect\n@Order(0)\npublic class LoggingAspect {\n\n    private final Logger log = LoggerFactory.getLogger(this.getClass());\n\n    @Inject\n    private HttpServletRequest request;\n\n    @Inject\n    private HttpServletResponse response;\n\n    @Inject\n    private Environment env;\n\n    @Pointcut(&quot;(within(com.repository.*) || within(com.service.*) || &quot;\n            + &quot;within(com.web.rest.*)) &amp;&amp; &quot;\n            + &quot;!@annotation(com.aop.logging.NoLogging)&quot;)\n    public void loggingPoincut() {\n\n    }\n\n    @Before(&quot;within(com.web.rest.*) &amp;&amp; &quot;\n            + &quot;!@annotation(com.aop.logging.NoLogging)&quot;)\n    public void beforeRest(JoinPoint point) throws UnknownHostException {\n        String ipAddress = getIpAddress();\n        if (log.isDebugEnabled()) {\n            log.debug(&quot;&gt;&gt;&gt;&gt;&gt;&gt; From IP {}&quot;, isIpAvailble(ipAddress));\n            log.debug(&quot;Enter: {}.{}() with argument[s] = {}&quot;, point.getSignature().getDeclaringTypeName(),\n                    point.getSignature().getName(), Arrays.toString(point.getArgs()));\n        }\n    }\n\n    @After(&quot;within(com.web.rest.*) &amp;&amp; &quot;\n            + &quot;!@annotation(com.aop.logging.NoLogging)&quot;)\n    public void afterRest(JoinPoint point) throws UnknownHostException {\n        if (log.isDebugEnabled()) {\n            log.debug(&quot;Exit: {}.{}()&quot;, point.getSignature().getDeclaringTypeName(), point.getSignature()\n                    .getName());\n            log.debug(&quot;&lt;&lt;&lt;&lt;&lt;&lt; Rest Call Finished {} &quot;, response.getStatus());\n        }\n    }\n    \n    }\n</code></pre>\n<p>How can i replace tightly coupled log with an advice in my aspect class.</p>\n"},{"tags":["java","opc-ua","milo"],"comments":[{"owner":{"account_id":13379160,"reputation":43,"user_id":9655018,"display_name":"a bc"},"score":0,"creation_date":1640072858,"post_id":70430594,"comment_id":124502305,"body_markdown":"DataValue{value=Variant{value=1000.0}, status=StatusCode{name=Good, value=0x00000000, quality=good}, sourceTime=DateTime{utcTime=0, javaDate=Mon Jan 01 09:00:00 KST 1601}, serverTime=DateTime{utcTime=132845349750036630, javaDate=Tue Dec 21 13:36:15 KST 2021}}\n\nDataValue{value=Variant{value=1000.0}, status=StatusCode{name=Good, value=0x00000000, quality=good}, sourceTime=DateTime{utcTime=0, javaDate=Mon Jan 01 09:00:00 KST 1601}, serverTime=DateTime{utcTime=132845349770193000, javaDate=Tue Dec 21 13:36:17 KST 2021}}","body":"DataValue{value=Variant{value=1000.0}, status=StatusCode{name=Good, value=0x00000000, quality=good}, sourceTime=DateTime{utcTime=0, javaDate=Mon Jan 01 09:00:00 KST 1601}, serverTime=DateTime{utcTime=132845349750036630, javaDate=Tue Dec 21 13:36:15 KST 2021}}  DataValue{value=Variant{value=1000.0}, status=StatusCode{name=Good, value=0x00000000, quality=good}, sourceTime=DateTime{utcTime=0, javaDate=Mon Jan 01 09:00:00 KST 1601}, serverTime=DateTime{utcTime=132845349770193000, javaDate=Tue Dec 21 13:36:17 KST 2021}}"},{"owner":{"account_id":13379160,"reputation":43,"user_id":9655018,"display_name":"a bc"},"score":0,"creation_date":1640072933,"post_id":70430594,"comment_id":124502330,"body_markdown":"This problem is occurred by ServerTime field change\n\nif ServerTime is null, subscription normal work?\nTo Fixed ServerTime  null, do i have to fix server&#39;s source?","body":"This problem is occurred by ServerTime field change  if ServerTime is null, subscription normal work? To Fixed ServerTime  null, do i have to fix server&#39;s source?"},{"owner":{"account_id":13379160,"reputation":43,"user_id":9655018,"display_name":"a bc"},"score":0,"creation_date":1640073564,"post_id":70430594,"comment_id":124502502,"body_markdown":"attention serverTime=DateTime{utcTime= ~~~)","body":"attention serverTime=DateTime{utcTime= ~~~)"}],"owner":{"account_id":13379160,"reputation":43,"user_id":9655018,"display_name":"a bc"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":465,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1640059875,"creation_date":1640059875,"question_id":70430594,"body_markdown":"this milo github\r\nhttps://github.com/eclipse/milo\r\n\r\n\r\nI use \r\n\r\n   \r\n    ManagedSubscription subscription = ManagedSubscription.create(client);\r\n\r\n    subscription.addChangeListener(new ChangeListener() {\r\n\r\n    @Override\r\n    public void onDataReceived(List&lt;ManagedDataItem&gt; dataItems, List&lt;DataValue&gt; dataValues) {\r\n\r\n       // I added data log code\r\n    }\r\n    });\r\n\r\n    ManagedDataItem dataItem = subscription.createDataItem(Identifiers.Server_ServerStatus_CurrentTime);\r\n    if (!dataItem.getStatusCode.isGood()) {\r\n    throw new RuntimeException(&quot;uh oh!&quot;)\r\n    }\r\n\r\n\r\nand i attempt to change server&#39;s node data \r\nbut client data log is not appear\r\n\r\n\r\nso I fixed listener\r\n\r\n     subscription.addDataChangeListener((items, values) -&gt; {\r\n                for (int i = 0; i &lt; items.size(); i++) {\r\n                    log.info(\r\n                        &quot;subscription value received: item={}, value={}&quot;,\r\n                        items.get(i).getNodeId(), values.get(i).getValue()\r\n                    );\r\n                }\r\n            });\r\n\r\n\r\n\r\nbut subscription is running only interval time, not data changed time\r\n\r\nwhat is problem?","title":"Milo OPC Ua Subscription not operated at node&#39;s data change , only Interval","body":"<p>this milo github\n<a href=\"https://github.com/eclipse/milo\" rel=\"nofollow noreferrer\">https://github.com/eclipse/milo</a></p>\n<p>I use</p>\n<pre><code>ManagedSubscription subscription = ManagedSubscription.create(client);\n\nsubscription.addChangeListener(new ChangeListener() {\n\n@Override\npublic void onDataReceived(List&lt;ManagedDataItem&gt; dataItems, List&lt;DataValue&gt; dataValues) {\n\n   // I added data log code\n}\n});\n\nManagedDataItem dataItem = subscription.createDataItem(Identifiers.Server_ServerStatus_CurrentTime);\nif (!dataItem.getStatusCode.isGood()) {\nthrow new RuntimeException(&quot;uh oh!&quot;)\n}\n</code></pre>\n<p>and i attempt to change server's node data\nbut client data log is not appear</p>\n<p>so I fixed listener</p>\n<pre><code> subscription.addDataChangeListener((items, values) -&gt; {\n            for (int i = 0; i &lt; items.size(); i++) {\n                log.info(\n                    &quot;subscription value received: item={}, value={}&quot;,\n                    items.get(i).getNodeId(), values.get(i).getValue()\n                );\n            }\n        });\n</code></pre>\n<p>but subscription is running only interval time, not data changed time</p>\n<p>what is problem?</p>\n"},{"tags":["java","spring","aspectj","spring-aop"],"comments":[{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1587180318,"post_id":50486156,"comment_id":108414946,"body_markdown":"It would be nice if even after such a long time you would decide to provide some feedback and accept &amp; upvote my answer if it is appropriate. I think it is. Afterwards, I can delete this comment again. It is not nice to ask questions and then ignore answers after someone else put a lot of effort in preparing a comprehensive sample for you.","body":"It would be nice if even after such a long time you would decide to provide some feedback and accept &amp; upvote my answer if it is appropriate. I think it is. Afterwards, I can delete this comment again. It is not nice to ask questions and then ignore answers after someone else put a lot of effort in preparing a comprehensive sample for you."}],"answers":[{"tags":[],"owner":{"account_id":6365827,"reputation":3652,"user_id":4939853,"accept_rate":69,"display_name":"Oreste Viron"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1527072977,"creation_date":1527072977,"answer_id":50486613,"question_id":50486156,"body_markdown":"Maybe you should write the full path of @RequestBody :\r\n\r\n    @annotation(org.springframework...RequestBody) requestBody","title":"How to log request body using spring boot and aspect","body":"<p>Maybe you should write the full path of @RequestBody :</p>\n\n<pre><code>@annotation(org.springframework...RequestBody) requestBody\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1587180064,"creation_date":1527320332,"answer_id":50540489,"question_id":50486156,"body_markdown":"You already found my related answer, but I just noticed the link in the comment under the wrong answer here after preparing an example for you. BTW, I used pure POJO + AspectJ, not Spring AOP (only Spring libs on the classpath so as to be able to resolve the annotations), but the aspect should be the same there.\r\n\r\nP.S.: My example is better suited to your problem because the pointcut here specifically matches target methods bearing the `@RequestBody` annotation. In the other example you would have to match all methods and then filter during runtime.\r\n\r\n**Dummy target classes:**\r\n\r\nI use two classes to test both of your package names. Otherwise they are the same.\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    package com.test.test.test.controller;\r\n    \r\n    import org.springframework.web.bind.annotation.*;\r\n    \r\n    public class MyController {\r\n      // These should trigger the aspect\r\n      @RequestMapping public String one(int number, @RequestBody String name) { return &quot;Hey!&quot;; }\r\n      @PostMapping public void two(int number, @RequestBody String name) {}\r\n      @PutMapping public String three(@RequestBody String name) { return &quot;Ho!&quot;; }\r\n      @ExceptionHandler public void four(@RequestBody String name) {}\r\n    \r\n      // These should *not* trigger the aspect\r\n      public String noAnnotation(@RequestBody String name) { return &quot;No annotation&quot;; }\r\n      public String alsoNoAnnotation(String name) { return &quot;Also no annotation&quot;; }\r\n      @RequestMapping public String five(int number, String name) { return &quot;foo&quot;; }\r\n      @PostMapping public void six(int number, String name) {}\r\n      @PutMapping public String seven(String name) { return &quot;bar&quot;; }\r\n      @ExceptionHandler public void eight(String name) {}\r\n    }\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    package com.test.test.common.exception;\r\n    \r\n    import org.springframework.web.bind.annotation.*;\r\n    \r\n    public class MyExceptionHandler {\r\n      // These should trigger the aspect\r\n      @RequestMapping public String one(int number, @RequestBody String name) { return &quot;Hey!&quot;; }\r\n      @PostMapping public void two(int number, @RequestBody String name) {}\r\n      @PutMapping public String three(@RequestBody String name) { return &quot;Ho!&quot;; }\r\n      @ExceptionHandler public void four(@RequestBody String name) {}\r\n    \r\n      // These should *not* trigger the aspect\r\n      public String noAnnotation(@RequestBody String name) { return &quot;No annotation&quot;; }\r\n      public String alsoNoAnnotation(String name) { return &quot;Also no annotation&quot;; }\r\n      @RequestMapping public String five(int number, String name) { return &quot;foo&quot;; }\r\n      @PostMapping public void six(int number, String name) {}\r\n      @PutMapping public String seven(String name) { return &quot;bar&quot;; }\r\n      @ExceptionHandler public void eight(String name) {}\r\n    }\r\n\r\n**Driver application:**\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    package de.scrum_master.app;\r\n    \r\n    import com.test.test.common.exception.MyExceptionHandler;\r\n    import com.test.test.test.controller.MyController;\r\n    \r\n    public class Application {\r\n      public static void main(String[] args) {\r\n        MyController controller = new MyController();\r\n        // These should trigger the aspect\r\n        controller.one(1, &quot;one&quot;);\r\n        controller.two(2, &quot;two&quot;);\r\n        controller.three(&quot;three&quot;);\r\n        controller.four(&quot;four&quot;);\r\n        // These should *not* trigger the aspect\r\n        controller.noAnnotation(&quot;none&quot;);\r\n        controller.five(1, &quot;five&quot;);\r\n        controller.six(2, &quot;six&quot;);\r\n        controller.seven(&quot;seven&quot;);\r\n        controller.eight(&quot;eight&quot;);\r\n        controller.alsoNoAnnotation(&quot;none either&quot;);\r\n    \r\n        MyExceptionHandler handler = new MyExceptionHandler();\r\n        // These should trigger the aspect\r\n        handler.one(1, &quot;one&quot;);\r\n        handler.two(2, &quot;two&quot;);\r\n        handler.three(&quot;three&quot;);\r\n        handler.four(&quot;four&quot;);\r\n        // These should *not* trigger the aspect\r\n        handler.noAnnotation(&quot;none&quot;);\r\n        handler.five(1, &quot;five&quot;);\r\n        handler.six(2, &quot;six&quot;);\r\n        handler.seven(&quot;seven&quot;);\r\n        handler.eight(&quot;eight&quot;);\r\n        handler.alsoNoAnnotation(&quot;none either&quot;);\r\n      }\r\n    }\r\n\r\n**Aspect:**\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    package de.scrum_master.aspect;\r\n    \r\n    import java.lang.annotation.Annotation;\r\n    \r\n    import org.aspectj.lang.JoinPoint;\r\n    import org.aspectj.lang.annotation.Aspect;\r\n    import org.aspectj.lang.annotation.Before;\r\n    import org.aspectj.lang.annotation.Pointcut;\r\n    import org.aspectj.lang.reflect.MethodSignature;\r\n    import org.springframework.web.bind.annotation.RequestBody;\r\n    \r\n    @Aspect\r\n    public class MyAspect {\r\n      @Pointcut(&quot;execution(* com.test.test.test.controller..*(.., @org.springframework.web.bind.annotation.RequestBody (*), ..))&quot;)\r\n      public void executeController() {}\r\n    \r\n      @Pointcut(&quot;execution(* com.test.test.common.exception..*(.., @org.springframework.web.bind.annotation.RequestBody (*), ..))&quot;)\r\n      public void executeExceptionAdvice() {}\r\n    \r\n      @Pointcut(\r\n          &quot;@annotation(org.springframework.web.bind.annotation.RequestMapping) || &quot; +\r\n          &quot;@annotation(org.springframework.web.bind.annotation.PostMapping) || &quot; +\r\n          &quot;@annotation(org.springframework.web.bind.annotation.PutMapping) ||&quot; +\r\n          &quot;@annotation(org.springframework.web.bind.annotation.ExceptionHandler)&quot;\r\n        )\r\n      public void logRequestMapping() {}\r\n    \r\n      @Before(\r\n        &quot;logRequestMapping() &amp;&amp;&quot; +\r\n        &quot;(executeController() || executeExceptionAdvice())&quot;\r\n      )\r\n      public void logRequestBody(JoinPoint thisJoinPoint) {\r\n        MethodSignature methodSignature = (MethodSignature) thisJoinPoint.getSignature();\r\n        Annotation[][] annotationMatrix = methodSignature.getMethod().getParameterAnnotations();\r\n        int index = -1;\r\n        for (Annotation[] annotations : annotationMatrix) {\r\n          index++;\r\n          for (Annotation annotation : annotations) {\r\n            if (!(annotation instanceof RequestBody))\r\n              continue;\r\n            Object requestBody = thisJoinPoint.getArgs()[index];\r\n            System.out.println(thisJoinPoint);\r\n            System.out.println(&quot;  Request body = &quot; + requestBody);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n**Console log:**\r\n\r\n&lt;!-- language: none --&gt;\r\n\r\n    execution(String com.test.test.test.controller.MyController.one(int, String))\r\n      Request body = one\r\n    execution(void com.test.test.test.controller.MyController.two(int, String))\r\n      Request body = two\r\n    execution(String com.test.test.test.controller.MyController.three(String))\r\n      Request body = three\r\n    execution(void com.test.test.test.controller.MyController.four(String))\r\n      Request body = four\r\n    execution(String com.test.test.common.exception.MyExceptionHandler.one(int, String))\r\n      Request body = one\r\n    execution(void com.test.test.common.exception.MyExceptionHandler.two(int, String))\r\n      Request body = two\r\n    execution(String com.test.test.common.exception.MyExceptionHandler.three(String))\r\n      Request body = three\r\n    execution(void com.test.test.common.exception.MyExceptionHandler.four(String))\r\n      Request body = four\r\n","title":"How to log request body using spring boot and aspect","body":"<p>You already found my related answer, but I just noticed the link in the comment under the wrong answer here after preparing an example for you. BTW, I used pure POJO + AspectJ, not Spring AOP (only Spring libs on the classpath so as to be able to resolve the annotations), but the aspect should be the same there.</p>\n\n<p>P.S.: My example is better suited to your problem because the pointcut here specifically matches target methods bearing the <code>@RequestBody</code> annotation. In the other example you would have to match all methods and then filter during runtime.</p>\n\n<p><strong>Dummy target classes:</strong></p>\n\n<p>I use two classes to test both of your package names. Otherwise they are the same.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package com.test.test.test.controller;\n\nimport org.springframework.web.bind.annotation.*;\n\npublic class MyController {\n  // These should trigger the aspect\n  @RequestMapping public String one(int number, @RequestBody String name) { return \"Hey!\"; }\n  @PostMapping public void two(int number, @RequestBody String name) {}\n  @PutMapping public String three(@RequestBody String name) { return \"Ho!\"; }\n  @ExceptionHandler public void four(@RequestBody String name) {}\n\n  // These should *not* trigger the aspect\n  public String noAnnotation(@RequestBody String name) { return \"No annotation\"; }\n  public String alsoNoAnnotation(String name) { return \"Also no annotation\"; }\n  @RequestMapping public String five(int number, String name) { return \"foo\"; }\n  @PostMapping public void six(int number, String name) {}\n  @PutMapping public String seven(String name) { return \"bar\"; }\n  @ExceptionHandler public void eight(String name) {}\n}\n</code></pre>\n\n<pre class=\"lang-java prettyprint-override\"><code>package com.test.test.common.exception;\n\nimport org.springframework.web.bind.annotation.*;\n\npublic class MyExceptionHandler {\n  // These should trigger the aspect\n  @RequestMapping public String one(int number, @RequestBody String name) { return \"Hey!\"; }\n  @PostMapping public void two(int number, @RequestBody String name) {}\n  @PutMapping public String three(@RequestBody String name) { return \"Ho!\"; }\n  @ExceptionHandler public void four(@RequestBody String name) {}\n\n  // These should *not* trigger the aspect\n  public String noAnnotation(@RequestBody String name) { return \"No annotation\"; }\n  public String alsoNoAnnotation(String name) { return \"Also no annotation\"; }\n  @RequestMapping public String five(int number, String name) { return \"foo\"; }\n  @PostMapping public void six(int number, String name) {}\n  @PutMapping public String seven(String name) { return \"bar\"; }\n  @ExceptionHandler public void eight(String name) {}\n}\n</code></pre>\n\n<p><strong>Driver application:</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.app;\n\nimport com.test.test.common.exception.MyExceptionHandler;\nimport com.test.test.test.controller.MyController;\n\npublic class Application {\n  public static void main(String[] args) {\n    MyController controller = new MyController();\n    // These should trigger the aspect\n    controller.one(1, \"one\");\n    controller.two(2, \"two\");\n    controller.three(\"three\");\n    controller.four(\"four\");\n    // These should *not* trigger the aspect\n    controller.noAnnotation(\"none\");\n    controller.five(1, \"five\");\n    controller.six(2, \"six\");\n    controller.seven(\"seven\");\n    controller.eight(\"eight\");\n    controller.alsoNoAnnotation(\"none either\");\n\n    MyExceptionHandler handler = new MyExceptionHandler();\n    // These should trigger the aspect\n    handler.one(1, \"one\");\n    handler.two(2, \"two\");\n    handler.three(\"three\");\n    handler.four(\"four\");\n    // These should *not* trigger the aspect\n    handler.noAnnotation(\"none\");\n    handler.five(1, \"five\");\n    handler.six(2, \"six\");\n    handler.seven(\"seven\");\n    handler.eight(\"eight\");\n    handler.alsoNoAnnotation(\"none either\");\n  }\n}\n</code></pre>\n\n<p><strong>Aspect:</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.aspect;\n\nimport java.lang.annotation.Annotation;\n\nimport org.aspectj.lang.JoinPoint;\nimport org.aspectj.lang.annotation.Aspect;\nimport org.aspectj.lang.annotation.Before;\nimport org.aspectj.lang.annotation.Pointcut;\nimport org.aspectj.lang.reflect.MethodSignature;\nimport org.springframework.web.bind.annotation.RequestBody;\n\n@Aspect\npublic class MyAspect {\n  @Pointcut(\"execution(* com.test.test.test.controller..*(.., @org.springframework.web.bind.annotation.RequestBody (*), ..))\")\n  public void executeController() {}\n\n  @Pointcut(\"execution(* com.test.test.common.exception..*(.., @org.springframework.web.bind.annotation.RequestBody (*), ..))\")\n  public void executeExceptionAdvice() {}\n\n  @Pointcut(\n      \"@annotation(org.springframework.web.bind.annotation.RequestMapping) || \" +\n      \"@annotation(org.springframework.web.bind.annotation.PostMapping) || \" +\n      \"@annotation(org.springframework.web.bind.annotation.PutMapping) ||\" +\n      \"@annotation(org.springframework.web.bind.annotation.ExceptionHandler)\"\n    )\n  public void logRequestMapping() {}\n\n  @Before(\n    \"logRequestMapping() &amp;&amp;\" +\n    \"(executeController() || executeExceptionAdvice())\"\n  )\n  public void logRequestBody(JoinPoint thisJoinPoint) {\n    MethodSignature methodSignature = (MethodSignature) thisJoinPoint.getSignature();\n    Annotation[][] annotationMatrix = methodSignature.getMethod().getParameterAnnotations();\n    int index = -1;\n    for (Annotation[] annotations : annotationMatrix) {\n      index++;\n      for (Annotation annotation : annotations) {\n        if (!(annotation instanceof RequestBody))\n          continue;\n        Object requestBody = thisJoinPoint.getArgs()[index];\n        System.out.println(thisJoinPoint);\n        System.out.println(\"  Request body = \" + requestBody);\n      }\n    }\n  }\n}\n</code></pre>\n\n<p><strong>Console log:</strong></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>execution(String com.test.test.test.controller.MyController.one(int, String))\n  Request body = one\nexecution(void com.test.test.test.controller.MyController.two(int, String))\n  Request body = two\nexecution(String com.test.test.test.controller.MyController.three(String))\n  Request body = three\nexecution(void com.test.test.test.controller.MyController.four(String))\n  Request body = four\nexecution(String com.test.test.common.exception.MyExceptionHandler.one(int, String))\n  Request body = one\nexecution(void com.test.test.common.exception.MyExceptionHandler.two(int, String))\n  Request body = two\nexecution(String com.test.test.common.exception.MyExceptionHandler.three(String))\n  Request body = three\nexecution(void com.test.test.common.exception.MyExceptionHandler.four(String))\n  Request body = four\n</code></pre>\n"}],"owner":{"account_id":6092020,"reputation":1484,"user_id":4753991,"accept_rate":83,"display_name":"Atul Agrawal"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8783,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1640059844,"creation_date":1527071721,"question_id":50486156,"body_markdown":"I have created an aspect to log the request body passed in a controller function:\r\n\r\nThis is what i am trying\r\n\r\n    @Pointcut(&quot;execution(* com.test.test.test.controller.*.* (..))&quot;)\r\n      public void executeController() {}\r\n    \r\n      @Pointcut(&quot;execution(* com.test.test.common.exception.*.* (..))&quot;)\r\n      public void executeExceptionAdvice() {}\r\n    \r\n      @Pointcut(&quot;@annotation(org.springframework.web.bind.annotation.RequestMapping) || &quot;\r\n          + &quot;@annotation(org.springframework.web.bind.annotation.PostMapping) || &quot;\r\n          + &quot;@annotation(org.springframework.web.bind.annotation.PutMapping) ||&quot;\r\n          + &quot;@annotation(org.springframework.web.bind.annotation.ExceptionHandler)&quot;)\r\n      public void logRequestMapping() {}\r\n    \r\n      @Before(&quot;logRequestMapping() &amp;&amp; executeController() &amp;&amp; args(..,@RequestBody requestBody) &quot;)\r\n      public void logRequestBody(JoinPoint joinPoint, Object requestBody) {\r\n        LOGGER = LoggerFactory.getLogger(joinPoint.getTarget().getClass());\r\n        LOGGER.info(&quot;Method : {},Request Body:{}&quot;,\r\n            LOGGER.getName() + &quot;.&quot; + joinPoint.getSignature().getName(),\r\n            MaskingUtil.jsonifyAndMask(requestBody));\r\n      }\r\n\r\nNow instead of matching with @RequestBody spring is matching arguments with **..** i.e. generalize arguments and logging everything which is passed instead of the request body.I want to log only request body and if it is null the it won&#39;t print anything.","title":"How to log request body using spring boot and aspect","body":"<p>I have created an aspect to log the request body passed in a controller function:</p>\n\n<p>This is what i am trying</p>\n\n<pre><code>@Pointcut(\"execution(* com.test.test.test.controller.*.* (..))\")\n  public void executeController() {}\n\n  @Pointcut(\"execution(* com.test.test.common.exception.*.* (..))\")\n  public void executeExceptionAdvice() {}\n\n  @Pointcut(\"@annotation(org.springframework.web.bind.annotation.RequestMapping) || \"\n      + \"@annotation(org.springframework.web.bind.annotation.PostMapping) || \"\n      + \"@annotation(org.springframework.web.bind.annotation.PutMapping) ||\"\n      + \"@annotation(org.springframework.web.bind.annotation.ExceptionHandler)\")\n  public void logRequestMapping() {}\n\n  @Before(\"logRequestMapping() &amp;&amp; executeController() &amp;&amp; args(..,@RequestBody requestBody) \")\n  public void logRequestBody(JoinPoint joinPoint, Object requestBody) {\n    LOGGER = LoggerFactory.getLogger(joinPoint.getTarget().getClass());\n    LOGGER.info(\"Method : {},Request Body:{}\",\n        LOGGER.getName() + \".\" + joinPoint.getSignature().getName(),\n        MaskingUtil.jsonifyAndMask(requestBody));\n  }\n</code></pre>\n\n<p>Now instead of matching with @RequestBody spring is matching arguments with <strong>..</strong> i.e. generalize arguments and logging everything which is passed instead of the request body.I want to log only request body and if it is null the it won't print anything.</p>\n"},{"tags":["java","netbeans"],"comments":[{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1640060204,"post_id":70430570,"comment_id":124499939,"body_markdown":"key works in other programs/apps? upper case `S` works!? (now i am confused!!xDxD)","body":"key works in other programs/apps? upper case <code>S</code> works!? (now i am confused!!xDxD)"},{"owner":{"account_id":1324952,"reputation":5977,"user_id":1270000,"accept_rate":100,"display_name":"sorifiend"},"score":0,"creation_date":1640060683,"post_id":70430570,"comment_id":124499984,"body_markdown":"Possibly related: https://stackoverflow.com/questions/14041853/stop-netbeans-beeping Are you certian that the &#39;ctrl&#39; key is not stuck in a pressed down state, or that you have some macro or hot key application that is misbehaving? And out of interest, which OS are you using? And just in case, have you tried a different keyboard (or plugged in an external one if using a laptop)?","body":"Possibly related: <a href=\"https://stackoverflow.com/questions/14041853/stop-netbeans-beeping\" title=\"stop netbeans beeping\">stackoverflow.com/questions/14041853/stop-netbeans-beeping</a> Are you certian that the &#39;ctrl&#39; key is not stuck in a pressed down state, or that you have some macro or hot key application that is misbehaving? And out of interest, which OS are you using? And just in case, have you tried a different keyboard (or plugged in an external one if using a laptop)?"},{"owner":{"account_id":9302685,"reputation":13,"user_id":6952253,"display_name":"Tim Hofheins"},"score":0,"creation_date":1640062362,"post_id":70430570,"comment_id":124500281,"body_markdown":"These are all good suggestions. I will try them out. I am using Windows 10 w/ latest patches.","body":"These are all good suggestions. I will try them out. I am using Windows 10 w/ latest patches."},{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":0,"creation_date":1640128239,"post_id":70430570,"comment_id":124521477,"body_markdown":"A strange problem. [1] It&#39;s trivial to use **Tools &gt; Options &gt; Keymap** to map a keyboard shortcut to a specific action in NetBeans (e.g. The shortcut `Ctrl+s` maps to the action **File &gt; Save**), so that might explain your problem. That said, I don&#39;t see how you could map the character &#39;s&#39; as a shortcut to the action &quot;beep&quot;. [2] Does this issue only occur when typing in the edit window, or does it permeate NetBeans? For example, what happens if you create and save a file containing the character &#39;s&#39;? Do you get a beep? If not then the problem is obviously specific to the edit window...","body":"A strange problem. [1] It&#39;s trivial to use <b>Tools &gt; Options &gt; Keymap</b> to map a keyboard shortcut to a specific action in NetBeans (e.g. The shortcut <code>Ctrl+s</code> maps to the action <b>File &gt; Save</b>), so that might explain your problem. That said, I don&#39;t see how you could map the character &#39;s&#39; as a shortcut to the action &quot;beep&quot;. [2] Does this issue only occur when typing in the edit window, or does it permeate NetBeans? For example, what happens if you create and save a file containing the character &#39;s&#39;? Do you get a beep? If not then the problem is obviously specific to the edit window..."},{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":0,"creation_date":1640128847,"post_id":70430570,"comment_id":124521598,"body_markdown":"... [3] Also, press &#39;s&#39; to provoke the beep, then navigate to **View &gt; IDE Log**. Anything of interest logged? [4] It is safe to instantiate a second installation of NetBeans 12.6 temporarily in some other directory from a zip file, being careful not to import existing settings. That won&#39;t impact your existing installation. If you do that, does the problem also occur in your new installation? If not then you know that the issue is specific to your older installation, and you can use the new one instead. That approach wouldn&#39;t explain **_why_** you got the problem, but it might resolve it.","body":"... [3] Also, press &#39;s&#39; to provoke the beep, then navigate to <b>View &gt; IDE Log</b>. Anything of interest logged? [4] It is safe to instantiate a second installation of NetBeans 12.6 temporarily in some other directory from a zip file, being careful not to import existing settings. That won&#39;t impact your existing installation. If you do that, does the problem also occur in your new installation? If not then you know that the issue is specific to your older installation, and you can use the new one instead. That approach wouldn&#39;t explain <b><i>why</i></b> you got the problem, but it might resolve it."},{"owner":{"account_id":9302685,"reputation":13,"user_id":6952253,"display_name":"Tim Hofheins"},"score":0,"creation_date":1640130097,"post_id":70430570,"comment_id":124521839,"body_markdown":"I tried plugging in a different keyboard but it still has the problem. Saving a file containing the character &#39;s&#39; works. I can&#39;t see a keyboard shortcut mapped to &#39;s&#39;. It seems to be specific to the edit window.","body":"I tried plugging in a different keyboard but it still has the problem. Saving a file containing the character &#39;s&#39; works. I can&#39;t see a keyboard shortcut mapped to &#39;s&#39;. It seems to be specific to the edit window."},{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":0,"creation_date":1640233793,"post_id":70430570,"comment_id":124548207,"body_markdown":"OK, so hardware is clearly not an issue, and the beep only occurs in the NetBeans edit window. A really unusual problem! As stated in my previous comment, if there is nothing written to the log file after pressing &#39;s&#39; my only suggestion is to set up a second NetBeans 12.6 installation to see if the problem goes away. Of course you could simply reinstall NetBeans 12.6, but that seems unnecessarily drastic unless you are completely stuck.","body":"OK, so hardware is clearly not an issue, and the beep only occurs in the NetBeans edit window. A really unusual problem! As stated in my previous comment, if there is nothing written to the log file after pressing &#39;s&#39; my only suggestion is to set up a second NetBeans 12.6 installation to see if the problem goes away. Of course you could simply reinstall NetBeans 12.6, but that seems unnecessarily drastic unless you are completely stuck."},{"owner":{"account_id":9302685,"reputation":13,"user_id":6952253,"display_name":"Tim Hofheins"},"score":0,"creation_date":1640643500,"post_id":70430570,"comment_id":124624453,"body_markdown":"I reinstalled Netbeans 12.6 and it didn&#39;t help. I have a 12.5 installation still. The same thing happens when I run 12.5.","body":"I reinstalled Netbeans 12.6 and it didn&#39;t help. I have a 12.5 installation still. The same thing happens when I run 12.5."},{"owner":{"account_id":9302685,"reputation":13,"user_id":6952253,"display_name":"Tim Hofheins"},"score":0,"creation_date":1640965759,"post_id":70430570,"comment_id":124700721,"body_markdown":"Here is the log entry after I pressed &#39;s&#39;.","body":"Here is the log entry after I pressed &#39;s&#39;."},{"owner":{"account_id":9302685,"reputation":13,"user_id":6952253,"display_name":"Tim Hofheins"},"score":0,"creation_date":1640965773,"post_id":70430570,"comment_id":124700725,"body_markdown":"WARNING [org.netbeans.modules.options.keymap.LayersBridge]: Invalid shortcut: org.openide.loaders.XMLDataObject@3b2899bf[MultiFileObject@22943189[Actions/Help/master-help.xml]]","body":"WARNING [org.netbeans.modules.options.keymap.LayersBridge]: Invalid shortcut: org.openide.loaders.XMLDataObject@3b2899bf[MultiFileObject@2&zwnj;&#8203;2943189[Actions/Help&zwnj;&#8203;/master-help.xml]]"},{"owner":{"account_id":9302685,"reputation":13,"user_id":6952253,"display_name":"Tim Hofheins"},"score":0,"creation_date":1640965926,"post_id":70430570,"comment_id":124700774,"body_markdown":"So it looks like it is a problem with a &quot;Invalid shortcut&quot;. I will look into it further.","body":"So it looks like it is a problem with a &quot;Invalid shortcut&quot;. I will look into it further."}],"owner":{"account_id":9302685,"reputation":13,"user_id":6952253,"display_name":"Tim Hofheins"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1640059611,"creation_date":1640059611,"question_id":70430570,"body_markdown":"I am not expecting anyone to know the answer to this question but I thought I would try. When I am in Netbeans and typing in code it won&#39;t let me type a lower case s. It beeps at me. I can copy and paste an s without a problem. I have rebooted and it doesn&#39;t help. Any ideas?","title":"Netbeans 12.6 editor not allowing me to type a lower case s","body":"<p>I am not expecting anyone to know the answer to this question but I thought I would try. When I am in Netbeans and typing in code it won't let me type a lower case s. It beeps at me. I can copy and paste an s without a problem. I have rebooted and it doesn't help. Any ideas?</p>\n"},{"tags":["java","spring","aop","aspectj","spring-aop"],"answers":[{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1594859849,"creation_date":1594859849,"answer_id":62925729,"question_id":62917394,"body_markdown":"You have a strange web site for downloading JARs there. I recommend not to download dependency JARs manually but to use a build tool like Maven to take care of that for you. Anyway, if you want to make your life as a developer harder, you can do it manually. You can search for and download dependencies here:\r\n\r\nhttps://mvnrepository.com/artifact/org.aspectj/aspectjweaver\r\n\r\nJust search, select the version you need and then download.\r\n\r\nThe reason for your problem is that, guessing by your link URL, you downloaded the AspectJ runtime library `aspectjrt.jar`, but that one is the smallest one there is and meant to be used with ApsectJ compile-time weaving. You are using Spring AOP, which depends on the AspectJ load-time weaving library `aspectjweaver.jar`. Put that one on your classpath, then your error should go away. BTW, the weaver library contains a superset of the runtime classes, so you do not need the runtime anymore in this case.\r\n\r\nI also recommend to read some more documentation. The Spring manual tells you to use the weaver, not the runtime, see chapter [Enabling @AspectJ Support](https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html#aop-aspectj-support).","title":"Adding @Aspect throws BeanCreationException","body":"<p>You have a strange web site for downloading JARs there. I recommend not to download dependency JARs manually but to use a build tool like Maven to take care of that for you. Anyway, if you want to make your life as a developer harder, you can do it manually. You can search for and download dependencies here:</p>\n<p><a href=\"https://mvnrepository.com/artifact/org.aspectj/aspectjweaver\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/org.aspectj/aspectjweaver</a></p>\n<p>Just search, select the version you need and then download.</p>\n<p>The reason for your problem is that, guessing by your link URL, you downloaded the AspectJ runtime library <code>aspectjrt.jar</code>, but that one is the smallest one there is and meant to be used with ApsectJ compile-time weaving. You are using Spring AOP, which depends on the AspectJ load-time weaving library <code>aspectjweaver.jar</code>. Put that one on your classpath, then your error should go away. BTW, the weaver library contains a superset of the runtime classes, so you do not need the runtime anymore in this case.</p>\n<p>I also recommend to read some more documentation. The Spring manual tells you to use the weaver, not the runtime, see chapter <a href=\"https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html#aop-aspectj-support\" rel=\"nofollow noreferrer\">Enabling @AspectJ Support</a>.</p>\n"}],"owner":{"account_id":11387984,"reputation":645,"user_id":8349044,"display_name":"Ricky"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":420,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":62925729,"answer_count":1,"score":0,"last_activity_date":1640059487,"creation_date":1594823725,"question_id":62917394,"body_markdown":"I am trying to use AOP in Spring. When I am using old DTD methods in XML, things are working fine. But when I am trying to use `AspectJ` notations, I am facing some issues. I downloaded the JAR files for aspectj from [here][1]. I added them to the build path and the code containing `@Aspect` annotations compiled successfully. But during runtime, nothing is getting executed. Even the beans which are using XML based configuration for aspects, are not getting created. It is throwing some `BeanCreationException`. The full error log is as follows:\r\n\r\n&lt;!-- language: none --&gt;\r\n\r\n    WARNING: Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;emp1&#39; defined in class path resource [Beans.xml]: BeanPostProcessor before instantiation of bean failed; nested exception is java.lang.NoClassDefFoundError: org/aspectj/weaver/reflect/ReflectionWorld$ReflectionWorldException\r\n    Exception in thread &quot;main&quot; org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;emp1&#39; defined in class path resource [Beans.xml]: BeanPostProcessor before instantiation of bean failed; nested exception is java.lang.NoClassDefFoundError: org/aspectj/weaver/reflect/ReflectionWorld$ReflectionWorldException\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:512)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:323)\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:321)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:879)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:878)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:550)\r\n    \tat org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:144)\r\n    \tat org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:85)\r\n    \tat com.demo.Tester.main(Tester.java:11)\r\n    Caused by: java.lang.NoClassDefFoundError: org/aspectj/weaver/reflect/ReflectionWorld$ReflectionWorldException\r\n    \tat org.springframework.aop.aspectj.annotation.ReflectiveAspectJAdvisorFactory.getPointcut(ReflectiveAspectJAdvisorFactory.java:210)\r\n    \tat org.springframework.aop.aspectj.annotation.ReflectiveAspectJAdvisorFactory.getAdvisor(ReflectiveAspectJAdvisorFactory.java:192)\r\n    \tat org.springframework.aop.aspectj.annotation.ReflectiveAspectJAdvisorFactory.getAdvisors(ReflectiveAspectJAdvisorFactory.java:126)\r\n    \tat org.springframework.aop.aspectj.annotation.BeanFactoryAspectJAdvisorsBuilder.buildAspectJAdvisors(BeanFactoryAspectJAdvisorsBuilder.java:110)\r\n    \tat org.springframework.aop.aspectj.annotation.AnnotationAwareAspectJAutoProxyCreator.findCandidateAdvisors(AnnotationAwareAspectJAutoProxyCreator.java:95)\r\n    \tat org.springframework.aop.aspectj.autoproxy.AspectJAwareAdvisorAutoProxyCreator.shouldSkip(AspectJAwareAdvisorAutoProxyCreator.java:101)\r\n    \tat org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.postProcessBeforeInstantiation(AbstractAutoProxyCreator.java:251)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInstantiation(AbstractAutowireCapableBeanFactory.java:1141)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.resolveBeforeInstantiation(AbstractAutowireCapableBeanFactory.java:1114)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:506) ... 10 more\r\n    Caused by: java.lang.ClassNotFoundException: org.aspectj.weaver.reflect.ReflectionWorld$ReflectionWorldException\r\n        at java.net.URLClassLoader.findClass(Unknown Source)\r\n        at java.lang.ClassLoader.loadClass(Unknown Source)\r\n        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)\r\n        at java.lang.ClassLoader.loadClass(Unknown Source)\r\n\r\nCan someone help me out in finding out what is the error? I am understanding that the JVM is unable to find out the `@Aspect` annotation somehow, but why is it happening even after adding the JAR file?\r\n\r\n  [1]: http://www.java2s.com/Code/JarDownload/aspectjrt/","title":"Adding @Aspect throws BeanCreationException","body":"<p>I am trying to use AOP in Spring. When I am using old DTD methods in XML, things are working fine. But when I am trying to use <code>AspectJ</code> notations, I am facing some issues. I downloaded the JAR files for aspectj from <a href=\"http://www.java2s.com/Code/JarDownload/aspectjrt/\" rel=\"nofollow noreferrer\">here</a>. I added them to the build path and the code containing <code>@Aspect</code> annotations compiled successfully. But during runtime, nothing is getting executed. Even the beans which are using XML based configuration for aspects, are not getting created. It is throwing some <code>BeanCreationException</code>. The full error log is as follows:</p>\n<pre class=\"lang-none prettyprint-override\"><code>WARNING: Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'emp1' defined in class path resource [Beans.xml]: BeanPostProcessor before instantiation of bean failed; nested exception is java.lang.NoClassDefFoundError: org/aspectj/weaver/reflect/ReflectionWorld$ReflectionWorldException\nException in thread &quot;main&quot; org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'emp1' defined in class path resource [Beans.xml]: BeanPostProcessor before instantiation of bean failed; nested exception is java.lang.NoClassDefFoundError: org/aspectj/weaver/reflect/ReflectionWorld$ReflectionWorldException\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:512)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:323)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:321)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:879)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:878)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:550)\n    at org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:144)\n    at org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:85)\n    at com.demo.Tester.main(Tester.java:11)\nCaused by: java.lang.NoClassDefFoundError: org/aspectj/weaver/reflect/ReflectionWorld$ReflectionWorldException\n    at org.springframework.aop.aspectj.annotation.ReflectiveAspectJAdvisorFactory.getPointcut(ReflectiveAspectJAdvisorFactory.java:210)\n    at org.springframework.aop.aspectj.annotation.ReflectiveAspectJAdvisorFactory.getAdvisor(ReflectiveAspectJAdvisorFactory.java:192)\n    at org.springframework.aop.aspectj.annotation.ReflectiveAspectJAdvisorFactory.getAdvisors(ReflectiveAspectJAdvisorFactory.java:126)\n    at org.springframework.aop.aspectj.annotation.BeanFactoryAspectJAdvisorsBuilder.buildAspectJAdvisors(BeanFactoryAspectJAdvisorsBuilder.java:110)\n    at org.springframework.aop.aspectj.annotation.AnnotationAwareAspectJAutoProxyCreator.findCandidateAdvisors(AnnotationAwareAspectJAutoProxyCreator.java:95)\n    at org.springframework.aop.aspectj.autoproxy.AspectJAwareAdvisorAutoProxyCreator.shouldSkip(AspectJAwareAdvisorAutoProxyCreator.java:101)\n    at org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.postProcessBeforeInstantiation(AbstractAutoProxyCreator.java:251)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInstantiation(AbstractAutowireCapableBeanFactory.java:1141)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.resolveBeforeInstantiation(AbstractAutowireCapableBeanFactory.java:1114)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:506) ... 10 more\nCaused by: java.lang.ClassNotFoundException: org.aspectj.weaver.reflect.ReflectionWorld$ReflectionWorldException\n    at java.net.URLClassLoader.findClass(Unknown Source)\n    at java.lang.ClassLoader.loadClass(Unknown Source)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)\n    at java.lang.ClassLoader.loadClass(Unknown Source)\n</code></pre>\n<p>Can someone help me out in finding out what is the error? I am understanding that the JVM is unable to find out the <code>@Aspect</code> annotation somehow, but why is it happening even after adding the JAR file?</p>\n"},{"tags":["java","static","static-methods","utilities"],"comments":[{"owner":{"account_id":16914570,"reputation":1532,"user_id":12232870,"display_name":"terrorrussia-keeps-killing"},"score":0,"creation_date":1640063327,"post_id":70430534,"comment_id":124500431,"body_markdown":"None. You can always extend a `public` `abstract` class with a non-_protected_ constructor (if no ex). As an alternative, put your utilities in a non-extensible empty `enum` (why?). Or better consider creating a `final` class instead with a `private` constructor throwing an `AssertionError` in case someone attempts to instantiate a utility class using reflection (does not applies to using the `Unsafe` class to instantiate objects without constructors if I recall correctly). The latter approach is also used by Lombok `@UtilityClass`: https://projectlombok.org/features/experimental/UtilityClass","body":"None. You can always extend a <code>public</code> <code>abstract</code> class with a non-<i>protected</i> constructor (if no ex). As an alternative, put your utilities in a non-extensible empty <code>enum</code> (why?). Or better consider creating a <code>final</code> class instead with a <code>private</code> constructor throwing an <code>AssertionError</code> in case someone attempts to instantiate a utility class using reflection (does not applies to using the <code>Unsafe</code> class to instantiate objects without constructors if I recall correctly). The latter approach is also used by Lombok <code>@UtilityClass</code>: <a href=\"https://projectlombok.org/features/experimental/UtilityClass\" rel=\"nofollow noreferrer\">projectlombok.org/features/experimental/UtilityClass</a>"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1640065746,"post_id":70430534,"comment_id":124500815,"body_markdown":"Duplicate of https://stackoverflow.com/questions/20593278 ?","body":"Duplicate of <a href=\"https://stackoverflow.com/questions/20593278\">stackoverflow.com/questions/20593278</a> ?"},{"owner":{"account_id":4951627,"reputation":1332,"user_id":3985356,"accept_rate":74,"display_name":"CHANist"},"score":0,"creation_date":1640069950,"post_id":70430534,"comment_id":124501573,"body_markdown":"Yes, thanks. I will close the question, would referencing to that question.","body":"Yes, thanks. I will close the question, would referencing to that question."}],"owner":{"account_id":4951627,"reputation":1332,"user_id":3985356,"accept_rate":74,"display_name":"CHANist"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1640069920,"answer_count":0,"score":1,"last_activity_date":1640059231,"creation_date":1640059231,"question_id":70430534,"body_markdown":"When I am creating static utilities method, I always go with the below logic. \r\n```java\r\npublic class XXXUtils {\r\n    // to prevent utilities class accidentally instantiated\r\n    private XXXUtils() {}\r\n\r\n    public static XXX getXXX(YYY yyy) {\r\n        // ...\r\n    }\r\n}\r\n```\r\n\r\nwhich I think is the de-facto standard, and is used by jdk (e.g. `java.util.Collections`), guava (e.g. `com.google.common.collect.Collections2`). \r\n\r\n\r\nHowever today when I am browsing the `SpringMVC` source code, I found that utilities class are created in the following. \r\n```java\r\npublic abstract class XXXUtils {\r\n    public static XXX getXXX(YYY yyy) {\r\n        // ...\r\n    }\r\n}\r\n```\r\nThis is found in SpringWeb `org.springframework.web.context.support.WebApplicationContextUtils`. \r\nThis is an interesting idea that I did not think of previously. \r\n\r\n\r\nAnd of course, both mechanism works well for disallowing the instance from initializing. But which way is a better way of creating utilities class that only contains static field and methods. and Why? ","title":"Java utilities class setup issue [Abstract or Private Constructor]","body":"<p>When I am creating static utilities method, I always go with the below logic.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class XXXUtils {\n    // to prevent utilities class accidentally instantiated\n    private XXXUtils() {}\n\n    public static XXX getXXX(YYY yyy) {\n        // ...\n    }\n}\n</code></pre>\n<p>which I think is the de-facto standard, and is used by jdk (e.g. <code>java.util.Collections</code>), guava (e.g. <code>com.google.common.collect.Collections2</code>).</p>\n<p>However today when I am browsing the <code>SpringMVC</code> source code, I found that utilities class are created in the following.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public abstract class XXXUtils {\n    public static XXX getXXX(YYY yyy) {\n        // ...\n    }\n}\n</code></pre>\n<p>This is found in SpringWeb <code>org.springframework.web.context.support.WebApplicationContextUtils</code>.\nThis is an interesting idea that I did not think of previously.</p>\n<p>And of course, both mechanism works well for disallowing the instance from initializing. But which way is a better way of creating utilities class that only contains static field and methods. and Why?</p>\n"},{"tags":["java","spring","aop","aspectj","spring-aop"],"comments":[{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1578019469,"post_id":59247646,"comment_id":105312726,"body_markdown":"Welcome to SO. Please learn how to ask questions by reading what an [MCVE](https://stackoverflow.com/help/mcve) is. You have aspect questions but don&#39;t share any aspect code and only fragments of your target classes. So other people who like to help you have to guess.","body":"Welcome to SO. Please learn how to ask questions by reading what an <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> is. You have aspect questions but don&#39;t share any aspect code and only fragments of your target classes. So other people who like to help you have to guess."}],"answers":[{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1578019768,"creation_date":1578019768,"answer_id":59572618,"question_id":59247646,"body_markdown":"&gt; I want to set `b`, `c`, `d` to `null` using `@Around` around their respective setters inside the `fetchA()` method. Is it feasible using AspectJ and spring? How do I access the setters for `b`, `c`, `d` inside the `fetchA()` method?\r\n\r\nAs I said in my comment, your question is unclear and I have to guess what you want to do because there is no aspect code. My assumption is that you want to intercept setter methods if (and only if) they are being called from inside a certain other method. I.e. you need a control-flow-dependent pointcut like `cflow()` or `cflowbelow()`. According to the [Spring manual](https://docs.spring.io/spring/docs/5.2.1.RELEASE/spring-framework-reference/core.html#aop-pointcuts-designators) these pointcuts are not supported by Spring AOP, but you can configure Spring to use full [AspectJ with LTW (load-time weaving)](https://docs.spring.io/spring/docs/5.2.1.RELEASE/spring-framework-reference/core.html#aop-using-aspectj) instead.\r\n\r\nFor more details I suggest you show me yours ([MCVE](https://stackoverflow.com/help/mcve), ideally on GitHub with Maven build), then I show you mine (concrete solution).","title":"Capture setters inside mapper method using AspectJ in Spring","body":"<blockquote>\n  <p>I want to set <code>b</code>, <code>c</code>, <code>d</code> to <code>null</code> using <code>@Around</code> around their respective setters inside the <code>fetchA()</code> method. Is it feasible using AspectJ and spring? How do I access the setters for <code>b</code>, <code>c</code>, <code>d</code> inside the <code>fetchA()</code> method?</p>\n</blockquote>\n\n<p>As I said in my comment, your question is unclear and I have to guess what you want to do because there is no aspect code. My assumption is that you want to intercept setter methods if (and only if) they are being called from inside a certain other method. I.e. you need a control-flow-dependent pointcut like <code>cflow()</code> or <code>cflowbelow()</code>. According to the <a href=\"https://docs.spring.io/spring/docs/5.2.1.RELEASE/spring-framework-reference/core.html#aop-pointcuts-designators\" rel=\"nofollow noreferrer\">Spring manual</a> these pointcuts are not supported by Spring AOP, but you can configure Spring to use full <a href=\"https://docs.spring.io/spring/docs/5.2.1.RELEASE/spring-framework-reference/core.html#aop-using-aspectj\" rel=\"nofollow noreferrer\">AspectJ with LTW (load-time weaving)</a> instead.</p>\n\n<p>For more details I suggest you show me yours (<a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>, ideally on GitHub with Maven build), then I show you mine (concrete solution).</p>\n"}],"owner":{"account_id":11202647,"reputation":27,"user_id":8219164,"display_name":"Lakshya Yadav"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":247,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":59572618,"answer_count":1,"score":0,"last_activity_date":1640059196,"creation_date":1575889936,"question_id":59247646,"body_markdown":"I have java classes like this : \r\n    \r\n    @Data\r\n    public class Lead {\r\n        private A a;\r\n        ...\r\n    }\r\n\r\n    @Data\r\n    public class A {\r\n        private B b;\r\n        private String c;\r\n        private List&lt;Integer&gt; d;\r\n    }\r\n    \r\n    @Data \r\n    public class B {\r\n        private String e;\r\n        private String f;\r\n    }\r\n\r\nI have a mapper method with annotation like this : \r\n\r\n    @FieldPermissionAnnotation(&quot;a&quot;)\r\n    public A fetchA(//Some DB Entities) {\r\n        A a = new A();\r\n        ...\r\n        a.setB(fetchB());\r\n        ...\r\n        a.setC(fetchC());\r\n        ...\r\n        a.setD(fetchD());\r\n    }\r\n\r\nMy FieldPermissionAspect fetches the permission-field mapping from db for a user and sets field to null if user does not have permission for given field.\r\n\r\nI get a list of string field hierarchy like this : \r\n\r\n    [&quot;a-b-e&quot;, &quot;a-b-f&quot;, &quot;a-c&quot;, &quot;a-d&quot;]\r\n\r\nI want to set b, c, d to null using @Around around their respective setters inside the fetchA() method. \r\nIs it feasible using AspectJ and spring?\r\nHow do I access the setters for b, c, d inside the fetchA() method?","title":"Capture setters inside mapper method using AspectJ in Spring","body":"<p>I have java classes like this : </p>\n\n<pre><code>@Data\npublic class Lead {\n    private A a;\n    ...\n}\n\n@Data\npublic class A {\n    private B b;\n    private String c;\n    private List&lt;Integer&gt; d;\n}\n\n@Data \npublic class B {\n    private String e;\n    private String f;\n}\n</code></pre>\n\n<p>I have a mapper method with annotation like this : </p>\n\n<pre><code>@FieldPermissionAnnotation(\"a\")\npublic A fetchA(//Some DB Entities) {\n    A a = new A();\n    ...\n    a.setB(fetchB());\n    ...\n    a.setC(fetchC());\n    ...\n    a.setD(fetchD());\n}\n</code></pre>\n\n<p>My FieldPermissionAspect fetches the permission-field mapping from db for a user and sets field to null if user does not have permission for given field.</p>\n\n<p>I get a list of string field hierarchy like this : </p>\n\n<pre><code>[\"a-b-e\", \"a-b-f\", \"a-c\", \"a-d\"]\n</code></pre>\n\n<p>I want to set b, c, d to null using @Around around their respective setters inside the fetchA() method. \nIs it feasible using AspectJ and spring?\nHow do I access the setters for b, c, d inside the fetchA() method?</p>\n"},{"tags":["java","debugging","gdb","jdb","jstack"],"owner":{"account_id":3134874,"reputation":390,"user_id":2651597,"accept_rate":50,"display_name":"EvanL00"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":383,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1640059136,"creation_date":1639447787,"question_id":70343004,"body_markdown":"I have a program written in C++, it will use JNI to launch a JVM and run the java code. But now the program crashed and generate a core file. \r\n\r\nWhen I attach the core with the gdb by `gdb &lt;my_program&gt; &lt;core&gt;, only the top two frames are shown, and others are ??\r\n```\r\n(gdb) bt\r\n#0  0x00007f635bf98596 in __memmove_avx_unaligned () from /var/lib/jenkins/Projects/libc.so.6\r\n#1  0x00007f634aa1d142 in Unsafe_CopyMemory0 () from /RELEASE/BIN/Linux/_jre/lib/server/libjvm.so\r\n#2  0x00007f63285c20a4 in ?? ()\r\n#3  0x00000000000014ea in ?? ()\r\n#4  0x00000000b5330948 in ?? ()\r\n#5  0x0000000000000000 in ?? ()\r\n```\r\n\r\nI think those ?? are java stack trace, I try to print them with `jstack &lt;my_program&gt; &lt;core&gt;`, but it errs as follow\r\n```\r\nError: More than one non-option argument\r\nCannot connect to the core dump or remote debug server. Use jhsdb jstack instead\r\n```\r\n\r\nI also tried `jhsdb jstack --exe &lt;my_pogram&gt; --core &lt;core&gt;`, but get the following error\r\n```\r\nError attaching to core file: Can&#39;t attach to the core file\r\nsun.jvm.hotspot.debugger.DebuggerException: Can&#39;t attach to the core file\r\n        at jdk.hotspot.agent/sun.jvm.hotspot.debugger.linux.LinuxDebuggerLocal.attach0(Native Method)\r\n        at jdk.hotspot.agent/sun.jvm.hotspot.debugger.linux.LinuxDebuggerLocal.attach(LinuxDebuggerLocal.java:282)\r\n        at jdk.hotspot.agent/sun.jvm.hotspot.HotSpotAgent.attachDebugger(HotSpotAgent.java:674)\r\n        at jdk.hotspot.agent/sun.jvm.hotspot.HotSpotAgent.setupDebuggerLinux(HotSpotAgent.java:612)\r\n        at jdk.hotspot.agent/sun.jvm.hotspot.HotSpotAgent.setupDebugger(HotSpotAgent.java:338)\r\n        at jdk.hotspot.agent/sun.jvm.hotspot.HotSpotAgent.go(HotSpotAgent.java:305)\r\n        at jdk.hotspot.agent/sun.jvm.hotspot.HotSpotAgent.attach(HotSpotAgent.java:157)\r\n        at jdk.hotspot.agent/sun.jvm.hotspot.tools.Tool.start(Tool.java:191)\r\n        at jdk.hotspot.agent/sun.jvm.hotspot.tools.Tool.execute(Tool.java:118)\r\n        at jdk.hotspot.agent/sun.jvm.hotspot.tools.JStack.runWithArgs(JStack.java:90)\r\n        at jdk.hotspot.agent/sun.jvm.hotspot.SALauncher.runJSTACK(SALauncher.java:297)\r\n        at jdk.hotspot.agent/sun.jvm.hotspot.SALauncher.main(SALauncher.java:533)\r\n```\r\n\r\nIs there a way to print those ?? frames?\r\n\r\n\r\nUpdated\r\n======\r\nAfter debugging the jhsdb, the cause of failure of attaching to the the core file is the interpreter cannot be located telled by the following code\r\n```\r\n  // now read segments from interp (i.e ld.so or ld-linux.so or ld-elf.so)\r\n  if (read_interp_segments(ph) != true) {\r\n      return false;\r\n  }\r\n\r\n```\r\n\r\nAnd after reading the source code of JDK, I find the following env variable can print more information\r\n```\r\n{\r\n                &quot;name&quot;: &quot;LIBSAPROC_DEBUG&quot;,\r\n                &quot;value&quot;: &quot;DEBGUG&quot;\r\n            }\r\n```","title":"How to print the stack trace of the java side from a core file","body":"<p>I have a program written in C++, it will use JNI to launch a JVM and run the java code. But now the program crashed and generate a core file.</p>\n<p>When I attach the core with the gdb by `gdb &lt;my_program&gt; , only the top two frames are shown, and others are ??</p>\n<pre><code>(gdb) bt\n#0  0x00007f635bf98596 in __memmove_avx_unaligned () from /var/lib/jenkins/Projects/libc.so.6\n#1  0x00007f634aa1d142 in Unsafe_CopyMemory0 () from /RELEASE/BIN/Linux/_jre/lib/server/libjvm.so\n#2  0x00007f63285c20a4 in ?? ()\n#3  0x00000000000014ea in ?? ()\n#4  0x00000000b5330948 in ?? ()\n#5  0x0000000000000000 in ?? ()\n</code></pre>\n<p>I think those ?? are java stack trace, I try to print them with <code>jstack &lt;my_program&gt; &lt;core&gt;</code>, but it errs as follow</p>\n<pre><code>Error: More than one non-option argument\nCannot connect to the core dump or remote debug server. Use jhsdb jstack instead\n</code></pre>\n<p>I also tried <code>jhsdb jstack --exe &lt;my_pogram&gt; --core &lt;core&gt;</code>, but get the following error</p>\n<pre><code>Error attaching to core file: Can't attach to the core file\nsun.jvm.hotspot.debugger.DebuggerException: Can't attach to the core file\n        at jdk.hotspot.agent/sun.jvm.hotspot.debugger.linux.LinuxDebuggerLocal.attach0(Native Method)\n        at jdk.hotspot.agent/sun.jvm.hotspot.debugger.linux.LinuxDebuggerLocal.attach(LinuxDebuggerLocal.java:282)\n        at jdk.hotspot.agent/sun.jvm.hotspot.HotSpotAgent.attachDebugger(HotSpotAgent.java:674)\n        at jdk.hotspot.agent/sun.jvm.hotspot.HotSpotAgent.setupDebuggerLinux(HotSpotAgent.java:612)\n        at jdk.hotspot.agent/sun.jvm.hotspot.HotSpotAgent.setupDebugger(HotSpotAgent.java:338)\n        at jdk.hotspot.agent/sun.jvm.hotspot.HotSpotAgent.go(HotSpotAgent.java:305)\n        at jdk.hotspot.agent/sun.jvm.hotspot.HotSpotAgent.attach(HotSpotAgent.java:157)\n        at jdk.hotspot.agent/sun.jvm.hotspot.tools.Tool.start(Tool.java:191)\n        at jdk.hotspot.agent/sun.jvm.hotspot.tools.Tool.execute(Tool.java:118)\n        at jdk.hotspot.agent/sun.jvm.hotspot.tools.JStack.runWithArgs(JStack.java:90)\n        at jdk.hotspot.agent/sun.jvm.hotspot.SALauncher.runJSTACK(SALauncher.java:297)\n        at jdk.hotspot.agent/sun.jvm.hotspot.SALauncher.main(SALauncher.java:533)\n</code></pre>\n<p>Is there a way to print those ?? frames?</p>\n<h1>Updated</h1>\n<p>After debugging the jhsdb, the cause of failure of attaching to the the core file is the interpreter cannot be located telled by the following code</p>\n<pre><code>  // now read segments from interp (i.e ld.so or ld-linux.so or ld-elf.so)\n  if (read_interp_segments(ph) != true) {\n      return false;\n  }\n\n</code></pre>\n<p>And after reading the source code of JDK, I find the following env variable can print more information</p>\n<pre><code>{\n                &quot;name&quot;: &quot;LIBSAPROC_DEBUG&quot;,\n                &quot;value&quot;: &quot;DEBGUG&quot;\n            }\n</code></pre>\n"},{"tags":["java","spring","aop","aspectj","spring-aop"],"answers":[{"tags":[],"owner":{"account_id":308584,"reputation":5209,"user_id":620554,"accept_rate":40,"display_name":"Judge Mental"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1343887206,"creation_date":1343855935,"answer_id":11767732,"question_id":11765996,"body_markdown":"I think you want `execution(public * *.*(.., @com.example.Constraint *, ..)`, modulo some syntax.","title":"AspectJ pointcut expression match parameter annotations at any position","body":"<p>I think you want <code>execution(public * *.*(.., @com.example.Constraint *, ..)</code>, modulo some syntax.</p>\n"},{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"down_vote_count":0,"up_vote_count":18,"is_accepted":true,"score":18,"last_activity_date":1414989335,"creation_date":1364167723,"answer_id":15605403,"question_id":11765996,"body_markdown":"You cannot bind an argument at an arbitrary position via `args()` in AspectJ because this could lead to ambiguity. Just imagine you have two or more parameters of the same type (or annotated by the same annotation type in this case). Which one of them should be bound to the named `args()` parameter? So while\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    execution(public * *(.., @Deprecated (*), ..))\r\n\r\nis possible as a stand-alone expression (please note the parentheses around the star), it is not possible in combination with `args()`. So if you do not just want to intercept the method execution itself, but also find the first or all parameters with the given annotation you need to do just what I showed in the other article. I am kinda repeating myself, but so be it in order for the answer not to be deleted again:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    import java.lang.annotation.Retention;\r\n    import java.lang.annotation.RetentionPolicy;\r\n    \r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    public @interface Constraint {}\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.HashSet;\r\n    import java.util.List;\r\n    import java.util.Set;\r\n    \r\n    public class Application {\r\n    \tpublic void method1(@Constraint int i) {}\r\n    \tpublic void method2(String id, @Constraint float f) {}\r\n    \tpublic void method3(int i, @Constraint List&lt;String&gt; strings, @Constraint String s) {}\r\n    \tpublic void method4(int i, @Constraint Set&lt;Integer&gt; numbers, float f, boolean b) {}\r\n    \tpublic void method5(boolean b, String s, @Constraint String s2, float f, int i) {}\r\n    \tpublic void notIntercepted(boolean b, String s, String s2, float f, int i) {}\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tList&lt;String&gt; strings = new ArrayList&lt;String&gt;();\r\n    \t\tstrings.add(&quot;foo&quot;);\r\n    \t\tstrings.add(&quot;bar&quot;);\r\n    \t\tSet&lt;Integer&gt; numbers = new HashSet&lt;Integer&gt;();\r\n    \t\tnumbers.add(11);\r\n    \t\tnumbers.add(22);\r\n    \t\tnumbers.add(33);\r\n    \r\n    \t\tApplication app = new Application();\r\n    \t\tapp.method1(1);\r\n    \t\tapp.method2(&quot;foo&quot;, 1f);\r\n    \t\tapp.method3(1, strings, &quot;foo&quot;);\r\n    \t\tapp.method4(1, numbers, 1f, true);\r\n    \t\tapp.method5(false, &quot;foo&quot;, &quot;bar&quot;, 1f, 1);\r\n    \t\tapp.notIntercepted(false, &quot;foo&quot;, &quot;bar&quot;, 1f, 1);\r\n    \t}\r\n    }\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    import java.lang.annotation.Annotation;\r\n    \r\n    import org.aspectj.lang.SoftException;\r\n    import org.aspectj.lang.reflect.MethodSignature;\r\n    \r\n    public aspect ArgCatcherAspect {\r\n    \tbefore() : execution(public * *(.., @Constraint (*), ..)) {\r\n    \t\tSystem.out.println(thisJoinPointStaticPart);\r\n    \t\tMethodSignature signature = (MethodSignature) thisJoinPoint.getSignature();\r\n    \t\tString methodName = signature.getMethod().getName();\r\n    \t\tClass&lt;?&gt;[] parameterTypes = signature.getMethod().getParameterTypes();\r\n    \t\tAnnotation[][] annotations;\r\n    \t\ttry {\r\n    \t\t\tannotations = thisJoinPoint.getTarget().getClass().\r\n    \t\t\t\tgetMethod(methodName, parameterTypes).getParameterAnnotations();\r\n    \t\t} catch (Exception e) {\r\n    \t\t\tthrow new SoftException(e);\r\n    \t\t}\r\n    \t\tint i = 0;\r\n    \t\tfor (Object arg : thisJoinPoint.getArgs()) {\r\n    \t\t\tfor (Annotation annotation : annotations[i]) {\r\n    \t\t\t\tif (annotation.annotationType() == Constraint.class)\r\n    \t\t\t\t\tSystem.out.println(&quot;  &quot; + annotation + &quot; -&gt; &quot; + arg);\r\n    \t\t\t}\r\n    \t\t\ti++;\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nAs you can see, it is a bit trickier to get the annotations of a given parameter than just its declared type, but basically it works the same way as in my previous post, i.e. by iterating over the list of arguments.\r\n\r\n  [1]: http://stackoverflow.com/questions/265680/aspectj-parameter-in-a-pointcut\r\n  [2]: http://stackoverflow.com/a/11882677/1082681\r\n\r\n\r\n","title":"AspectJ pointcut expression match parameter annotations at any position","body":"<p>You cannot bind an argument at an arbitrary position via <code>args()</code> in AspectJ because this could lead to ambiguity. Just imagine you have two or more parameters of the same type (or annotated by the same annotation type in this case). Which one of them should be bound to the named <code>args()</code> parameter? So while</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>execution(public * *(.., @Deprecated (*), ..))\n</code></pre>\n\n<p>is possible as a stand-alone expression (please note the parentheses around the star), it is not possible in combination with <code>args()</code>. So if you do not just want to intercept the method execution itself, but also find the first or all parameters with the given annotation you need to do just what I showed in the other article. I am kinda repeating myself, but so be it in order for the answer not to be deleted again:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>import java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\n\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface Constraint {}\n</code></pre>\n\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.ArrayList;\nimport java.util.HashSet;\nimport java.util.List;\nimport java.util.Set;\n\npublic class Application {\n    public void method1(@Constraint int i) {}\n    public void method2(String id, @Constraint float f) {}\n    public void method3(int i, @Constraint List&lt;String&gt; strings, @Constraint String s) {}\n    public void method4(int i, @Constraint Set&lt;Integer&gt; numbers, float f, boolean b) {}\n    public void method5(boolean b, String s, @Constraint String s2, float f, int i) {}\n    public void notIntercepted(boolean b, String s, String s2, float f, int i) {}\n\n    public static void main(String[] args) {\n        List&lt;String&gt; strings = new ArrayList&lt;String&gt;();\n        strings.add(\"foo\");\n        strings.add(\"bar\");\n        Set&lt;Integer&gt; numbers = new HashSet&lt;Integer&gt;();\n        numbers.add(11);\n        numbers.add(22);\n        numbers.add(33);\n\n        Application app = new Application();\n        app.method1(1);\n        app.method2(\"foo\", 1f);\n        app.method3(1, strings, \"foo\");\n        app.method4(1, numbers, 1f, true);\n        app.method5(false, \"foo\", \"bar\", 1f, 1);\n        app.notIntercepted(false, \"foo\", \"bar\", 1f, 1);\n    }\n}\n</code></pre>\n\n<pre class=\"lang-java prettyprint-override\"><code>import java.lang.annotation.Annotation;\n\nimport org.aspectj.lang.SoftException;\nimport org.aspectj.lang.reflect.MethodSignature;\n\npublic aspect ArgCatcherAspect {\n    before() : execution(public * *(.., @Constraint (*), ..)) {\n        System.out.println(thisJoinPointStaticPart);\n        MethodSignature signature = (MethodSignature) thisJoinPoint.getSignature();\n        String methodName = signature.getMethod().getName();\n        Class&lt;?&gt;[] parameterTypes = signature.getMethod().getParameterTypes();\n        Annotation[][] annotations;\n        try {\n            annotations = thisJoinPoint.getTarget().getClass().\n                getMethod(methodName, parameterTypes).getParameterAnnotations();\n        } catch (Exception e) {\n            throw new SoftException(e);\n        }\n        int i = 0;\n        for (Object arg : thisJoinPoint.getArgs()) {\n            for (Annotation annotation : annotations[i]) {\n                if (annotation.annotationType() == Constraint.class)\n                    System.out.println(\"  \" + annotation + \" -&gt; \" + arg);\n            }\n            i++;\n        }\n    }\n}\n</code></pre>\n\n<p>As you can see, it is a bit trickier to get the annotations of a given parameter than just its declared type, but basically it works the same way as in my previous post, i.e. by iterating over the list of arguments.</p>\n"}],"owner":{"account_id":219387,"reputation":11651,"user_id":476260,"accept_rate":75,"display_name":"driangle"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10353,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"accepted_answer_id":15605403,"answer_count":2,"score":18,"last_activity_date":1640059039,"creation_date":1343848586,"question_id":11765996,"body_markdown":"I&#39;m trying to define a pointcut expression to match methods which contain a parameter annotated with a specific annotation, regardless of what position the parameter is in. In my case I&#39;m looking for the `@Constraint` annotation. For example:\r\n\r\nMatching methods:\r\n\r\n    public void method1(@Constraint Car car)\r\n    \r\n    public void method2(String id, @Constraint Plane plane)\r\n    \r\n    public void method3(Wheel wheel, @Constraint List&lt;Train&gt; trains, @Constraint Plane plane)\r\n    \r\n    public void method4(Motor motor, @Constraint Set&lt;Train&gt; trains, Bicycle bike, Wheel wheel)\r\n    \r\n    public void method5(Wing wing, Motorcycle moto, @Constraint Truck truck, Bicycle bike, Wheel wheel)\r\n\r\nSo far I&#39;ve tried the following expressions with no luck:\r\n\r\n    @Before(&quot;execution(public * *.*(..)) and @args(com.example.Constraint)&quot;) // there can be only one parameter\r\n    @Before(&quot;execution(public * *.*(..)) and @args(..,com.example.Constraint)&quot;) // parameter must be in last position\r\n    @Before(&quot;execution(public * *.*(..)) and @args(com.example.Constraint,..)&quot;) // parameter must be in first position\r\n    @Before(&quot;execution(public * *.*(..)) and (@args(com.example.Constraint,..) or @args(..,com.example.Constraint))&quot;) // parameter must be in first or last position, nothing in between\r\n    @Before(&quot;execution(public * *.*(..)) and @args(..,com.example.Constraint,..)&quot;) // Invalid\r\n\r\nCan someone point me to the right solution? is it even possible?\r\n\r\n\r\n","title":"AspectJ pointcut expression match parameter annotations at any position","body":"<p>I'm trying to define a pointcut expression to match methods which contain a parameter annotated with a specific annotation, regardless of what position the parameter is in. In my case I'm looking for the <code>@Constraint</code> annotation. For example:</p>\n\n<p>Matching methods:</p>\n\n<pre><code>public void method1(@Constraint Car car)\n\npublic void method2(String id, @Constraint Plane plane)\n\npublic void method3(Wheel wheel, @Constraint List&lt;Train&gt; trains, @Constraint Plane plane)\n\npublic void method4(Motor motor, @Constraint Set&lt;Train&gt; trains, Bicycle bike, Wheel wheel)\n\npublic void method5(Wing wing, Motorcycle moto, @Constraint Truck truck, Bicycle bike, Wheel wheel)\n</code></pre>\n\n<p>So far I've tried the following expressions with no luck:</p>\n\n<pre><code>@Before(\"execution(public * *.*(..)) and @args(com.example.Constraint)\") // there can be only one parameter\n@Before(\"execution(public * *.*(..)) and @args(..,com.example.Constraint)\") // parameter must be in last position\n@Before(\"execution(public * *.*(..)) and @args(com.example.Constraint,..)\") // parameter must be in first position\n@Before(\"execution(public * *.*(..)) and (@args(com.example.Constraint,..) or @args(..,com.example.Constraint))\") // parameter must be in first or last position, nothing in between\n@Before(\"execution(public * *.*(..)) and @args(..,com.example.Constraint,..)\") // Invalid\n</code></pre>\n\n<p>Can someone point me to the right solution? is it even possible?</p>\n"},{"tags":["java","multithreading","concurrency","thread-safety"],"comments":[{"owner":{"account_id":13429972,"reputation":1807,"user_id":9690075,"display_name":"zysaaa"},"score":1,"creation_date":1640059522,"post_id":70430514,"comment_id":124499812,"body_markdown":"synchronized on a ```null``` object will cause a ```NullPointerException```","body":"synchronized on a <code>null</code> object will cause a <code>NullPointerException</code>"},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1640059968,"post_id":70430514,"comment_id":124499896,"body_markdown":"You would need to use database-level locking for this.","body":"You would need to use database-level locking for this."},{"owner":{"account_id":3546793,"reputation":1587,"user_id":2962555,"accept_rate":44,"display_name":"Laodao"},"score":0,"creation_date":1640067286,"post_id":70430514,"comment_id":124501053,"body_markdown":"@TimMoore, can I get more detail or an example for this case, please?","body":"@TimMoore, can I get more detail or an example for this case, please?"},{"owner":{"account_id":3546793,"reputation":1587,"user_id":2962555,"accept_rate":44,"display_name":"Laodao"},"score":0,"creation_date":1640067322,"post_id":70430514,"comment_id":124501062,"body_markdown":"@zysaaa, thanks for the remind. Any idea how to deal with this code block, then?","body":"@zysaaa, thanks for the remind. Any idea how to deal with this code block, then?"},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1640082102,"post_id":70430514,"comment_id":124505378,"body_markdown":"This page has a good overview: http://vladmihalcea.com/a-beginners-guide-to-database-locking-and-the-lost-update-phenomena/ The specific details depend on the database used and the way it’s accessed from Java.","body":"This page has a good overview: <a href=\"http://vladmihalcea.com/a-beginners-guide-to-database-locking-and-the-lost-update-phenomena/\" rel=\"nofollow noreferrer\">vladmihalcea.com/&hellip;</a> The specific details depend on the database used and the way it’s accessed from Java."}],"owner":{"account_id":3546793,"reputation":1587,"user_id":2962555,"accept_rate":44,"display_name":"Laodao"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1640059021,"creation_date":1640059021,"question_id":70430514,"body_markdown":"I have the following code (will be hit by api call to generate a access token if login succeed) to check if the user actually hit the upper limit of the login times. I am thinking use synchronized keyword for thread safe.\r\n\r\n            UserDTO userDTO = null;\r\n    \t\tsynchronized (userDTO) {\r\n                // load user info (including failed times) from db\r\n    \t\t\tuserDTO = userDao.findUser(username);\r\n\r\n    \t\t\tif (userDTO != null) {\r\n    \r\n    \t\t\t\t// when exceeded max allowed times\r\n    \t\t\t\tif (userDTO.getFailedLoginCount() &gt; maxAllowed) {\r\n                        // failed the login directly cause account locked.\r\n    \t\t\t\t\tthrow new AuthenticationException(401, &quot;Account Locked!!&quot;);\r\n    \t\t\t\t}\r\n    \t\t\t\t\r\n                    // if password matches, login succeed\r\n    \t\t\t\tif (PasswordUtil.match(userDTO.getPassword(), loginInfo.getPassword())) {\r\n    \t\t\t\t\t// reset the login failure in db\t\t\t\t\t\t \r\n                        userDao.resetUserLoginFailure(username);\r\n\r\n    \t\t\t\t\treturn generateAccessToken(userDTO);\r\n    \t\t\t\t}\r\n                    // update db with failed time + 1\r\n    \t\t\t\tuserDao.updateUserLoginFailure(username, userDTO.getFailedLoginCount()); \r\n    \t\t\t}\r\n    \t\t}\r\n    \t\tthrow new AuthenticationException(401, &quot;Invalid Login!!&quot;);","title":"Thread safe for user login limits code block","body":"<p>I have the following code (will be hit by api call to generate a access token if login succeed) to check if the user actually hit the upper limit of the login times. I am thinking use synchronized keyword for thread safe.</p>\n<pre><code>        UserDTO userDTO = null;\n        synchronized (userDTO) {\n            // load user info (including failed times) from db\n            userDTO = userDao.findUser(username);\n\n            if (userDTO != null) {\n\n                // when exceeded max allowed times\n                if (userDTO.getFailedLoginCount() &gt; maxAllowed) {\n                    // failed the login directly cause account locked.\n                    throw new AuthenticationException(401, &quot;Account Locked!!&quot;);\n                }\n                \n                // if password matches, login succeed\n                if (PasswordUtil.match(userDTO.getPassword(), loginInfo.getPassword())) {\n                    // reset the login failure in db                         \n                    userDao.resetUserLoginFailure(username);\n\n                    return generateAccessToken(userDTO);\n                }\n                // update db with failed time + 1\n                userDao.updateUserLoginFailure(username, userDTO.getFailedLoginCount()); \n            }\n        }\n        throw new AuthenticationException(401, &quot;Invalid Login!!&quot;);\n</code></pre>\n"},{"tags":["java","spring","exception","aspectj","spring-aop"],"comments":[{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1403702543,"post_id":24408945,"comment_id":37760590,"body_markdown":"No you have to catch and wrap it. As `Throwable` isn&#39;t declared in the interface. So you cannot ignore it. Also why don&#39;t you use the provided [`RetryOperationsInterceptor`](https://github.com/spring-projects/spring-retry/blob/master/src/main/java/org/springframework/retry/interceptor/RetryOperationsInterceptor.java) but are writing your own?","body":"No you have to catch and wrap it. As <code>Throwable</code> isn&#39;t declared in the interface. So you cannot ignore it. Also why don&#39;t you use the provided <a href=\"https://github.com/spring-projects/spring-retry/blob/master/src/main/java/org/springframework/retry/interceptor/RetryOperationsInterceptor.java\" rel=\"nofollow noreferrer\"><code>RetryOperationsInterceptor</code></a> but are writing your own?"},{"owner":{"account_id":455917,"reputation":6566,"user_id":854386,"accept_rate":86,"display_name":"Andrey"},"score":0,"creation_date":1403856455,"post_id":24408945,"comment_id":37829026,"body_markdown":"@M.Deinum Please post your comment as an answer I will accept it. Thanks for pointing out RetryOperationsInterceptor, I will try to use this, it does pretty much the same what I have implemented and handles Throwable in the similar way.","body":"@M.Deinum Please post your comment as an answer I will accept it. Thanks for pointing out RetryOperationsInterceptor, I will try to use this, it does pretty much the same what I have implemented and handles Throwable in the similar way."}],"answers":[{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1403968113,"creation_date":1403956113,"answer_id":24466491,"question_id":24408945,"body_markdown":"M. Deinum is right, but you do not need to use your own `RetryWrappedException` because AspectJ already offers a `SoftException` (extends `RuntimeException`) for softening/wrapping checked exceptions, but it also works for other `Throwable`s.\r\n\r\nBecause I found your question interesting, but am not a Spring user, I replicated some of your sample classes as dummies or minimal implementations in order to create a fully working POJO + AspectJ example without any Spring dependency. I also extended the around advice so as to do the retry loop by itself, reading a `maxRetries` value from the `Retryable` annotation. I know it is not 100% your use case, but it illustrates the problem and a few other things:\r\n\r\n**Dummy classes/interfaces:**\r\n\r\n\tpackage de.scrum_master.app;\r\n\t\r\n\timport java.lang.annotation.Retention;\r\n\timport java.lang.annotation.RetentionPolicy;\r\n\t\r\n\t@Retention(RetentionPolicy.RUNTIME)\r\n\tpublic @interface Retryable {\r\n\t\tint maxRetries();\r\n\t}\r\n\r\n--\r\n\r\n\tpackage de.scrum_master.app;\r\n\t\r\n\tpublic class RetryContext {}\r\n\r\n--\r\n\r\n\tpackage de.scrum_master.app;\r\n\t\r\n\tpublic interface RetryCallback&lt;T&gt; {\r\n\t\tObject doWithRetry(RetryContext context) throws Exception;\r\n\t}\r\n\r\n--\r\n\r\n\tpackage de.scrum_master.app;\r\n\t\r\n\tpublic class RetryTemplate {\r\n\t\tpublic Object execute(RetryCallback&lt;Object&gt; retryCallback) throws Exception {\r\n\t\t\treturn retryCallback.doWithRetry(new RetryContext());\r\n\t\t}\r\n\t}\r\n\r\n**Driver application:**\r\n\r\n\tpackage de.scrum_master.app;\r\n\t\r\n\timport java.util.Random;\r\n\t\r\n\tpublic class Application {\r\n\t\tprivate static final Random RANDOM = new Random();\r\n\t\r\n\t\tpublic static void main(String[] args) throws Exception {\r\n\t\t\tnew Application().performOperation();\r\n\t\t}\r\n\t\r\n\t\t@Retryable(maxRetries = 2)\r\n\t\tpublic void performOperation() throws Exception {\r\n\t\t\tSystem.out.println(&quot;Performing some operation&quot;);\r\n\t\t\tif (RANDOM.nextBoolean())\r\n\t\t\t\tthrow new Exception(&quot;Operation failed&quot;);\r\n\t\t\tSystem.out.println(&quot;Operation succeeded&quot;);\r\n\t\t}\r\n\t}\r\n\r\nWithout an aspect, there will be no retries and `performOperation()` will randomly either succeed\r\n\r\n&lt;!-- language: none --&gt;\r\n\r\n    Performing some operation\r\n    Operation succeeded\r\n\r\nor fail\r\n\r\n&lt;!-- language: none --&gt;\r\n\r\n    Performing some operationException in thread &quot;main&quot; \r\n    java.lang.Exception: Operation failed\r\n        at de.scrum_master.app.Application.performOperation(Application.java:16)\r\n        at de.scrum_master.app.Application.main(Application.java:9)\r\n\r\n**Intercept/retry aspect:**\r\n\r\nNow with the following aspect we can\r\n\r\n* intercept methods annotated by `Retryable`,\r\n* get the number of maximum retries and\r\n* loop and try joinpoint execution via `proceed()` as many times as specified (`maxRetries + 1` because even if zero retries are requested we call the method at least once).\r\n\r\nAs you can also see, we use different error handling depending on error type:\r\n\r\n* An `Exception` will either be just printed if the maximum number of retries has not been reached yet or re-thrown otherwise, i.e. if the final retry also fails, its the exception will be thrown.\r\n* An Error will always be re-thrown because an error is usually thrown by the JVM and non-recoverable, i.e. in this case there will be no more retries.\r\n* A `Throwable` (should never occur) will be wrapped into a `SoftException` and the latter re-thrown.\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n\tpackage de.scrum_master.aspect;\r\n\t\r\n\timport org.aspectj.lang.ProceedingJoinPoint;\r\n\timport org.aspectj.lang.SoftException;\r\n\timport org.aspectj.lang.annotation.Around;\r\n\timport org.aspectj.lang.annotation.Aspect;\r\n\t\r\n\timport de.scrum_master.app.RetryCallback;\r\n\timport de.scrum_master.app.RetryContext;\r\n\timport de.scrum_master.app.RetryTemplate;\r\n\timport de.scrum_master.app.Retryable;\r\n\t\r\n\t@Aspect\r\n\tpublic class RetryableOperationFailureInterceptor {\r\n\t\t@Around(&quot;@annotation(retryable) &amp;&amp; execution(* *(..))&quot;)\r\n\t\tpublic Object performOperation(final ProceedingJoinPoint pjp, final Retryable retryable) throws Throwable {\r\n\t\t\tfinal int maxRetries = retryable.maxRetries();\r\n\t\t\tSystem.out.println(pjp + &quot; - maxRetries = &quot; + maxRetries);\r\n\t\t\tRetryTemplate retryTemplate = getRetryTemplate(retryable);\r\n\t\t\treturn retryTemplate.execute(\r\n\t\t\t\tnew RetryCallback&lt;Object&gt;() {\r\n\t\t\t\t\t@Override\r\n\t\t\t\t\tpublic Object doWithRetry(RetryContext context) throws Exception {\r\n\t\t\t\t\t\tfor (int i = 0; i &lt;= maxRetries; i++) {\r\n\t\t\t\t\t\t\tSystem.out.println(&quot;Retry #&quot; + i);\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\treturn pjp.proceed();\r\n\t\t\t\t\t\t\t} catch (Exception e) {\r\n\t\t\t\t\t\t\t\tif (i == maxRetries)\r\n\t\t\t\t\t\t\t\t\tthrow e;\r\n\t\t\t\t\t\t\t\tSystem.out.println(e);\r\n\t\t\t\t\t\t\t} catch (Error e) {\r\n\t\t\t\t\t\t\t\tthrow e;\r\n\t\t\t\t\t\t\t} catch (Throwable t) {\r\n\t\t\t\t\t\t\t\tthrow new SoftException(t);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t}\r\n\t\r\n\t\tprivate RetryTemplate getRetryTemplate(Retryable retryable) {\r\n\t\t\treturn new RetryTemplate();\r\n\t\t}\r\n\t}\r\n\r\n**Resulting output with active Aspect:**\r\n\r\nImmediate success (no retries necessary):\r\n\r\n&lt;!-- language: none --&gt;\r\n\r\n    execution(void de.scrum_master.app.Application.performOperation()) - maxRetries = 2\r\n    Retry #0\r\n    Performing some operation\r\n    Operation succeeded\r\n\r\nSuccess after retries:\r\n\r\n&lt;!-- language: none --&gt;\r\n\r\n    execution(void de.scrum_master.app.Application.performOperation()) - maxRetries = 2\r\n    Retry #0\r\n    Performing some operation\r\n    java.lang.Exception: Operation failed\r\n    Retry #1\r\n    Performing some operation\r\n    java.lang.Exception: Operation failed\r\n    Retry #2\r\n    Performing some operation\r\n    Operation succeeded\r\n\r\nFailure after final retry:\r\n\r\n&lt;!-- language: none --&gt;\r\n\r\n    execution(void de.scrum_master.app.Application.performOperation()) - maxRetries = 2\r\n    Retry #0\r\n    Performing some operation\r\n    java.lang.Exception: Operation failed\r\n    Retry #1\r\n    Performing some operation\r\n    java.lang.Exception: Operation failed\r\n    Retry #2\r\n    Performing some operation\r\n    Exception in thread &quot;main&quot; java.lang.Exception: Operation failed\r\n        at de.scrum_master.app.Application.performOperation_aroundBody0(Application.java:16)\r\n        at de.scrum_master.app.Application$AjcClosure1.run(Application.java:1)\r\n        at org.aspectj.runtime.reflect.JoinPointImpl.proceed(JoinPointImpl.java:149)\r\n        at de.scrum_master.aspect.RetryableOperationFailureInterceptor$1.doWithRetry(RetryableOperationFailureInterceptor.java:27)\r\n        at de.scrum_master.app.RetryTemplate.execute(RetryTemplate.java:5)\r\n        at de.scrum_master.aspect.RetryableOperationFailureInterceptor.performOperation(RetryableOperationFailureInterceptor.java:20)\r\n        at de.scrum_master.app.Application.performOperation(Application.java:13)\r\n        at de.scrum_master.app.Application.main(Application.java:9)\r\n","title":"Re-throw Throwable from inside callback","body":"<p>M. Deinum is right, but you do not need to use your own <code>RetryWrappedException</code> because AspectJ already offers a <code>SoftException</code> (extends <code>RuntimeException</code>) for softening/wrapping checked exceptions, but it also works for other <code>Throwable</code>s.</p>\n\n<p>Because I found your question interesting, but am not a Spring user, I replicated some of your sample classes as dummies or minimal implementations in order to create a fully working POJO + AspectJ example without any Spring dependency. I also extended the around advice so as to do the retry loop by itself, reading a <code>maxRetries</code> value from the <code>Retryable</code> annotation. I know it is not 100% your use case, but it illustrates the problem and a few other things:</p>\n\n<p><strong>Dummy classes/interfaces:</strong></p>\n\n<pre><code>package de.scrum_master.app;\n\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\n\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface Retryable {\n    int maxRetries();\n}\n</code></pre>\n\n<p>--</p>\n\n<pre><code>package de.scrum_master.app;\n\npublic class RetryContext {}\n</code></pre>\n\n<p>--</p>\n\n<pre><code>package de.scrum_master.app;\n\npublic interface RetryCallback&lt;T&gt; {\n    Object doWithRetry(RetryContext context) throws Exception;\n}\n</code></pre>\n\n<p>--</p>\n\n<pre><code>package de.scrum_master.app;\n\npublic class RetryTemplate {\n    public Object execute(RetryCallback&lt;Object&gt; retryCallback) throws Exception {\n        return retryCallback.doWithRetry(new RetryContext());\n    }\n}\n</code></pre>\n\n<p><strong>Driver application:</strong></p>\n\n<pre><code>package de.scrum_master.app;\n\nimport java.util.Random;\n\npublic class Application {\n    private static final Random RANDOM = new Random();\n\n    public static void main(String[] args) throws Exception {\n        new Application().performOperation();\n    }\n\n    @Retryable(maxRetries = 2)\n    public void performOperation() throws Exception {\n        System.out.println(\"Performing some operation\");\n        if (RANDOM.nextBoolean())\n            throw new Exception(\"Operation failed\");\n        System.out.println(\"Operation succeeded\");\n    }\n}\n</code></pre>\n\n<p>Without an aspect, there will be no retries and <code>performOperation()</code> will randomly either succeed</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Performing some operation\nOperation succeeded\n</code></pre>\n\n<p>or fail</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Performing some operationException in thread \"main\" \njava.lang.Exception: Operation failed\n    at de.scrum_master.app.Application.performOperation(Application.java:16)\n    at de.scrum_master.app.Application.main(Application.java:9)\n</code></pre>\n\n<p><strong>Intercept/retry aspect:</strong></p>\n\n<p>Now with the following aspect we can</p>\n\n<ul>\n<li>intercept methods annotated by <code>Retryable</code>,</li>\n<li>get the number of maximum retries and</li>\n<li>loop and try joinpoint execution via <code>proceed()</code> as many times as specified (<code>maxRetries + 1</code> because even if zero retries are requested we call the method at least once).</li>\n</ul>\n\n<p>As you can also see, we use different error handling depending on error type:</p>\n\n<ul>\n<li>An <code>Exception</code> will either be just printed if the maximum number of retries has not been reached yet or re-thrown otherwise, i.e. if the final retry also fails, its the exception will be thrown.</li>\n<li>An Error will always be re-thrown because an error is usually thrown by the JVM and non-recoverable, i.e. in this case there will be no more retries.</li>\n<li>A <code>Throwable</code> (should never occur) will be wrapped into a <code>SoftException</code> and the latter re-thrown.</li>\n</ul>\n\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.aspect;\n\nimport org.aspectj.lang.ProceedingJoinPoint;\nimport org.aspectj.lang.SoftException;\nimport org.aspectj.lang.annotation.Around;\nimport org.aspectj.lang.annotation.Aspect;\n\nimport de.scrum_master.app.RetryCallback;\nimport de.scrum_master.app.RetryContext;\nimport de.scrum_master.app.RetryTemplate;\nimport de.scrum_master.app.Retryable;\n\n@Aspect\npublic class RetryableOperationFailureInterceptor {\n    @Around(\"@annotation(retryable) &amp;&amp; execution(* *(..))\")\n    public Object performOperation(final ProceedingJoinPoint pjp, final Retryable retryable) throws Throwable {\n        final int maxRetries = retryable.maxRetries();\n        System.out.println(pjp + \" - maxRetries = \" + maxRetries);\n        RetryTemplate retryTemplate = getRetryTemplate(retryable);\n        return retryTemplate.execute(\n            new RetryCallback&lt;Object&gt;() {\n                @Override\n                public Object doWithRetry(RetryContext context) throws Exception {\n                    for (int i = 0; i &lt;= maxRetries; i++) {\n                        System.out.println(\"Retry #\" + i);\n                        try {\n                            return pjp.proceed();\n                        } catch (Exception e) {\n                            if (i == maxRetries)\n                                throw e;\n                            System.out.println(e);\n                        } catch (Error e) {\n                            throw e;\n                        } catch (Throwable t) {\n                            throw new SoftException(t);\n                        }\n                    }\n                    return null;\n                }\n            }\n        );\n    }\n\n    private RetryTemplate getRetryTemplate(Retryable retryable) {\n        return new RetryTemplate();\n    }\n}\n</code></pre>\n\n<p><strong>Resulting output with active Aspect:</strong></p>\n\n<p>Immediate success (no retries necessary):</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>execution(void de.scrum_master.app.Application.performOperation()) - maxRetries = 2\nRetry #0\nPerforming some operation\nOperation succeeded\n</code></pre>\n\n<p>Success after retries:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>execution(void de.scrum_master.app.Application.performOperation()) - maxRetries = 2\nRetry #0\nPerforming some operation\njava.lang.Exception: Operation failed\nRetry #1\nPerforming some operation\njava.lang.Exception: Operation failed\nRetry #2\nPerforming some operation\nOperation succeeded\n</code></pre>\n\n<p>Failure after final retry:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>execution(void de.scrum_master.app.Application.performOperation()) - maxRetries = 2\nRetry #0\nPerforming some operation\njava.lang.Exception: Operation failed\nRetry #1\nPerforming some operation\njava.lang.Exception: Operation failed\nRetry #2\nPerforming some operation\nException in thread \"main\" java.lang.Exception: Operation failed\n    at de.scrum_master.app.Application.performOperation_aroundBody0(Application.java:16)\n    at de.scrum_master.app.Application$AjcClosure1.run(Application.java:1)\n    at org.aspectj.runtime.reflect.JoinPointImpl.proceed(JoinPointImpl.java:149)\n    at de.scrum_master.aspect.RetryableOperationFailureInterceptor$1.doWithRetry(RetryableOperationFailureInterceptor.java:27)\n    at de.scrum_master.app.RetryTemplate.execute(RetryTemplate.java:5)\n    at de.scrum_master.aspect.RetryableOperationFailureInterceptor.performOperation(RetryableOperationFailureInterceptor.java:20)\n    at de.scrum_master.app.Application.performOperation(Application.java:13)\n    at de.scrum_master.app.Application.main(Application.java:9)\n</code></pre>\n"}],"owner":{"account_id":455917,"reputation":6566,"user_id":854386,"accept_rate":86,"display_name":"Andrey"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2595,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1640058996,"creation_date":1403699994,"question_id":24408945,"body_markdown":"I am implementing an AOP interceptor which process the logic in `RetryTemplate`. And problem is that `ProceedingJoinPoint#execute` is declared to throw `Throwable`, but `RetryTemplate#doWithRetry` allows to re-throw an `Exception` only. So I have to wrap `Throwable` and then unwrap it back.\r\n\r\nMy best try looks like this:\r\n\r\n    @Aspect\r\n    @Component\r\n    public class RetryableOperationFailureInterceptor {\r\n    \r\n        @Around(&quot;@annotation(retryable)&quot;)\r\n        public Object performOperation(final ProceedingJoinPoint pjp, Retryable retryable)\r\n                throws Throwable {\r\n            \r\n            RetryTemplate retryTemplate = getRetryTemplate(retryable);\r\n            try {\r\n                return retryTemplate.execute(new RetryCallback&lt;Object&gt;() {\r\n                    @Override\r\n                    public Object doWithRetry(RetryContext context)\r\n                            throws Exception {\r\n                        \r\n                        try {\r\n                            return pjp.proceed(); // throws Throwable\r\n                        } catch (Exception e) {\r\n                            throw e;\r\n                        } catch (Error e) {\r\n                            throw e;\r\n                        } catch (Throwable e) {\r\n                            throw new RetryWrappedException(e);\r\n                        }\r\n                    }\r\n                });\r\n            } catch (RetryWrappedException e) {\r\n                throw e.getCause();\r\n            }\r\n        }\r\n    }\r\n\r\nIs there any way to avoid wrapping or/and catching `Throwable`? The latest is more important for me, as catching `Throwable` trigger a code style violation.","title":"Re-throw Throwable from inside callback","body":"<p>I am implementing an AOP interceptor which process the logic in <code>RetryTemplate</code>. And problem is that <code>ProceedingJoinPoint#execute</code> is declared to throw <code>Throwable</code>, but <code>RetryTemplate#doWithRetry</code> allows to re-throw an <code>Exception</code> only. So I have to wrap <code>Throwable</code> and then unwrap it back.</p>\n\n<p>My best try looks like this:</p>\n\n<pre><code>@Aspect\n@Component\npublic class RetryableOperationFailureInterceptor {\n\n    @Around(\"@annotation(retryable)\")\n    public Object performOperation(final ProceedingJoinPoint pjp, Retryable retryable)\n            throws Throwable {\n\n        RetryTemplate retryTemplate = getRetryTemplate(retryable);\n        try {\n            return retryTemplate.execute(new RetryCallback&lt;Object&gt;() {\n                @Override\n                public Object doWithRetry(RetryContext context)\n                        throws Exception {\n\n                    try {\n                        return pjp.proceed(); // throws Throwable\n                    } catch (Exception e) {\n                        throw e;\n                    } catch (Error e) {\n                        throw e;\n                    } catch (Throwable e) {\n                        throw new RetryWrappedException(e);\n                    }\n                }\n            });\n        } catch (RetryWrappedException e) {\n            throw e.getCause();\n        }\n    }\n}\n</code></pre>\n\n<p>Is there any way to avoid wrapping or/and catching <code>Throwable</code>? The latest is more important for me, as catching <code>Throwable</code> trigger a code style violation.</p>\n"},{"tags":["java","enums","initialization","scjp","open-closed-principle"],"comments":[{"owner":{"account_id":1726292,"reputation":2791,"user_id":1580864,"accept_rate":74,"display_name":"Mark W"},"score":0,"creation_date":1387224978,"post_id":20619950,"comment_id":30860015,"body_markdown":"for #4: Classes arent loaded until they have had meaningful use. This could be calling a static method on the class, or creating an instance, or calling Class.forName() or whatever. I believe this is to keep the number of classes currently loaded into the perma gen to a minimum.","body":"for #4: Classes arent loaded until they have had meaningful use. This could be calling a static method on the class, or creating an instance, or calling Class.forName() or whatever. I believe this is to keep the number of classes currently loaded into the perma gen to a minimum."}],"answers":[{"tags":[],"owner":{"account_id":195331,"reputation":275408,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1387225156,"creation_date":1387224843,"answer_id":20620025,"question_id":20619950,"body_markdown":"The [Java Language Specification says this about `enum` constants][1]\r\n\r\n&gt; In addition to the members that an enum type E inherits from Enum&lt;E&gt;,\r\n&gt; **for each declared enum constant with the name n, the enum type has an\r\n&gt; implicitly declared public static final field named n of type E. These\r\n&gt; fields are considered to be declared in the same order as the\r\n&gt; corresponding enum constants, before any static fields explicitly\r\n&gt; declared in the enum type.** Each such field is initialized to the enum\r\n&gt; constant that corresponds to it.\r\n\r\nSo \r\n\r\n    enum Color {    \r\n        RED, BLUE, GREEN;\r\n        ...\r\n    }\r\n\r\nis actually \r\n\r\n    public static final Color RED = new Color();\r\n    public static final Color BLUE = new Color();\r\n    public static final Color GREEN = new Color();\r\n\r\nwhich will get evaluated before the `static` blocks you have.\r\n\r\n\r\n&gt;  Why do the init blocks marked static run last in an enum?\r\n\r\nSee above.\r\n\r\n&gt; Can an enum have instance init blocks?\r\n\r\nYes, compile your code and you will see.\r\n\r\n\r\n&gt; Why do the blocks I thought were instance init blocks run only once when the enum is loaded and not each time a new enum value is referenced?\r\n\r\nEnum constants are created (instantiated) once the enum type is initialized. You don&#39;t create a new `enum` any time you do\r\n\r\n    Color color = Color.RED;\r\n\r\nYou are just referencing an already created, existing object.\r\n\r\n&gt; Class static init blocks run when a class is &quot;loaded&quot;. What does loaded mean? Does it occur just once when an object is instantiated in the class?\r\n\r\nWhen a class is referenced in the JVM for the first time, it is loaded by the `ClassLoader` and initialized. [Read more about it here.][2]\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.9.2\r\n  [2]: https://stackoverflow.com/questions/3499214/java-static-class-initialization","title":"Why do static and instance init blocks in Enums behave differently from those in Classes","body":"<p>The <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.9.2\" rel=\"nofollow noreferrer\">Java Language Specification says this about <code>enum</code> constants</a></p>\n\n<blockquote>\n  <p>In addition to the members that an enum type E inherits from Enum,\n  <strong>for each declared enum constant with the name n, the enum type has an\n  implicitly declared public static final field named n of type E. These\n  fields are considered to be declared in the same order as the\n  corresponding enum constants, before any static fields explicitly\n  declared in the enum type.</strong> Each such field is initialized to the enum\n  constant that corresponds to it.</p>\n</blockquote>\n\n<p>So </p>\n\n<pre><code>enum Color {    \n    RED, BLUE, GREEN;\n    ...\n}\n</code></pre>\n\n<p>is actually </p>\n\n<pre><code>public static final Color RED = new Color();\npublic static final Color BLUE = new Color();\npublic static final Color GREEN = new Color();\n</code></pre>\n\n<p>which will get evaluated before the <code>static</code> blocks you have.</p>\n\n<blockquote>\n  <p>Why do the init blocks marked static run last in an enum?</p>\n</blockquote>\n\n<p>See above.</p>\n\n<blockquote>\n  <p>Can an enum have instance init blocks?</p>\n</blockquote>\n\n<p>Yes, compile your code and you will see.</p>\n\n<blockquote>\n  <p>Why do the blocks I thought were instance init blocks run only once when the enum is loaded and not each time a new enum value is referenced?</p>\n</blockquote>\n\n<p>Enum constants are created (instantiated) once the enum type is initialized. You don't create a new <code>enum</code> any time you do</p>\n\n<pre><code>Color color = Color.RED;\n</code></pre>\n\n<p>You are just referencing an already created, existing object.</p>\n\n<blockquote>\n  <p>Class static init blocks run when a class is \"loaded\". What does loaded mean? Does it occur just once when an object is instantiated in the class?</p>\n</blockquote>\n\n<p>When a class is referenced in the JVM for the first time, it is loaded by the <code>ClassLoader</code> and initialized. <a href=\"https://stackoverflow.com/questions/3499214/java-static-class-initialization\">Read more about it here.</a></p>\n"},{"tags":[],"owner":{"account_id":23177743,"reputation":43,"user_id":17275989,"display_name":"Liveon Phoenix"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640058932,"creation_date":1640058529,"answer_id":70430468,"question_id":20619950,"body_markdown":"In `enum` the `static init block` is executed last.\r\n\r\n    Enums\r\n        1st  - instance init block \r\n        2nd  - constructor block\r\n        last - static init block or any other declared static (only once and will be always last executed)\r\n\r\n    Classes\r\n        1st - static init block or any other declared static (only once, always first to be executed)\r\n        2nd - instance init block\r\n        3rd - constructor\r\n    ","title":"Why do static and instance init blocks in Enums behave differently from those in Classes","body":"<p>In <code>enum</code> the <code>static init block</code> is executed last.</p>\n<pre><code>Enums\n    1st  - instance init block \n    2nd  - constructor block\n    last - static init block or any other declared static (only once and will be always last executed)\n\nClasses\n    1st - static init block or any other declared static (only once, always first to be executed)\n    2nd - instance init block\n    3rd - constructor\n</code></pre>\n"}],"owner":{"account_id":2090753,"reputation":903,"user_id":1860661,"accept_rate":93,"display_name":"paniclater"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1962,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":20620025,"answer_count":2,"score":5,"last_activity_date":1640058932,"creation_date":1387224553,"question_id":20619950,"body_markdown":"In studying for the Java certification test I learned that static initialization blocks run once when the class is loaded, in order of appearance within the source code, that instance initialization blocks run each time an instance is created, and that code in constructors runs each time an instance is created after that. To test that I created a class with some static and instance init blocks and a contructor with print stuff. Everything worked as expected -- except I thought &quot;loaded&quot; meant just at runtime, but I guess it happens when the first instance is created, since I don&#39;t get any output at all unless I create at least 1 instance of the class. Then I tried the same with an enum and the order was all off. First, the initialization blocks run one time for each value the enum has when the enum is first referenced in code, secondly -- the init blocks marked static run after what I assumed were instance init blocks! This is the opposite of what I expected. Here is a breakdown of my questions.\r\n\r\n\r\n2. Why do the init blocks marked static run last in an enum? \r\n3. Can an enum have instance init blocks?\r\n4. Why do the blocks I thought were instance init blocks run only once when the enum is loaded and not each time a new enum value is referenced?\r\n5. Class static init blocks run when a class is &quot;loaded&quot;. What does loaded mean? Does it occur just once when an object is instantiated in the class?\r\n\r\nThanks! This is very confusing to me.\r\n\r\n    public class EnumInit {\r\n\tpublic static void main(String[] args) {\r\n\t\tSystem.out.println(Color.RED.toString() + &quot; Main&quot;);\r\n\t\tMyInit myInit = new MyInit();\r\n\t\tSystem.out.println(Color.BLUE.toString() + &quot; Main&quot;);\r\n\t\tMyInit mySecondInit = new MyInit();\r\n\t\t\r\n\t}\r\n    }\r\n\r\n    enum Color {\t\r\n\tRED, BLUE, GREEN;\r\n \tString instanceVar = &quot;Enum Instance Variable Text&quot;;\r\n\tstatic { System.out.println(&quot;Enum Static init block 1&quot;); }\r\n\t{ System.out.println(&quot;Enum Instance init block 1&quot;); }\r\n\tstatic { System.out.println(&quot;Enum Static static init block 2&quot;); }\r\n\tColor() { \r\n\t\tSystem.out.println(instanceVar);\r\n\t\tSystem.out.println(&quot;Enum String Literal&quot;); \r\n\t}\r\n\t{ System.out.println(&quot;Enum Instance init block 2&quot;); }\t\r\n    }\r\n\r\n    class MyInit {\r\n \tString instanceVar = &quot;Class Instance Variable Text&quot;;\r\n\tstatic { System.out.println(&quot;Class Static init block 1&quot;); }\r\n\t{ System.out.println(&quot;Class Instance init block 1&quot;); }\r\n\tstatic { System.out.println(&quot;Class Static static init block 2&quot;); }\r\n\tMyInit() { \r\n\t\tSystem.out.println(instanceVar);\r\n\t\tSystem.out.println(&quot;Class String Literal&quot;); \r\n\t}\r\n\t{ System.out.println(&quot;Class Instance init block 2&quot;); }\t\r\n    }","title":"Why do static and instance init blocks in Enums behave differently from those in Classes","body":"<p>In studying for the Java certification test I learned that static initialization blocks run once when the class is loaded, in order of appearance within the source code, that instance initialization blocks run each time an instance is created, and that code in constructors runs each time an instance is created after that. To test that I created a class with some static and instance init blocks and a contructor with print stuff. Everything worked as expected -- except I thought \"loaded\" meant just at runtime, but I guess it happens when the first instance is created, since I don't get any output at all unless I create at least 1 instance of the class. Then I tried the same with an enum and the order was all off. First, the initialization blocks run one time for each value the enum has when the enum is first referenced in code, secondly -- the init blocks marked static run after what I assumed were instance init blocks! This is the opposite of what I expected. Here is a breakdown of my questions.</p>\n\n<ol>\n<li>Why do the init blocks marked static run last in an enum? </li>\n<li>Can an enum have instance init blocks?</li>\n<li>Why do the blocks I thought were instance init blocks run only once when the enum is loaded and not each time a new enum value is referenced?</li>\n<li>Class static init blocks run when a class is \"loaded\". What does loaded mean? Does it occur just once when an object is instantiated in the class?</li>\n</ol>\n\n<p>Thanks! This is very confusing to me.</p>\n\n<pre><code>public class EnumInit {\npublic static void main(String[] args) {\n    System.out.println(Color.RED.toString() + \" Main\");\n    MyInit myInit = new MyInit();\n    System.out.println(Color.BLUE.toString() + \" Main\");\n    MyInit mySecondInit = new MyInit();\n\n}\n}\n\nenum Color {    \nRED, BLUE, GREEN;\nString instanceVar = \"Enum Instance Variable Text\";\nstatic { System.out.println(\"Enum Static init block 1\"); }\n{ System.out.println(\"Enum Instance init block 1\"); }\nstatic { System.out.println(\"Enum Static static init block 2\"); }\nColor() { \n    System.out.println(instanceVar);\n    System.out.println(\"Enum String Literal\"); \n}\n{ System.out.println(\"Enum Instance init block 2\"); }   \n}\n\nclass MyInit {\nString instanceVar = \"Class Instance Variable Text\";\nstatic { System.out.println(\"Class Static init block 1\"); }\n{ System.out.println(\"Class Instance init block 1\"); }\nstatic { System.out.println(\"Class Static static init block 2\"); }\nMyInit() { \n    System.out.println(instanceVar);\n    System.out.println(\"Class String Literal\"); \n}\n{ System.out.println(\"Class Instance init block 2\"); }  \n}\n</code></pre>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":14707092,"reputation":69,"user_id":10621453,"display_name":"fobidlim"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640055076,"creation_date":1640055076,"answer_id":70430155,"question_id":70429255,"body_markdown":"[BroadcastReceiver](https://developer.android.com/reference/android/content/BroadcastReceiver) is not deprecated, but [LocalBroadcastManager](https://developer.android.com/reference/androidx/localbroadcastmanager/content/LocalBroadcastManager) is deprecated.\r\n\r\nyou can register receiver without `LocalBroadcastManager`, using `Context.registerReceiver()`.\r\n\r\nAnd put your response result into [SharedPreferences](https://developer.android.com/reference/android/content/SharedPreferences), and use the value of `SharedPreferences` as [LiveData](https://developer.android.com/topic/libraries/architecture/livedata) or [Flow](https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.flow/-flow/) in your `Activity`, `Fragment` or `ViewModel`.\r\n\r\nOr, use event bus with [RxJava](https://github.com/ReactiveX/RxJava) or [Flow](https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.flow/-flow/) whatever","title":"How to access my layout from onNewToken() of FirebaseMessagingService?","body":"<p><a href=\"https://developer.android.com/reference/android/content/BroadcastReceiver\" rel=\"nofollow noreferrer\">BroadcastReceiver</a> is not deprecated, but <a href=\"https://developer.android.com/reference/androidx/localbroadcastmanager/content/LocalBroadcastManager\" rel=\"nofollow noreferrer\">LocalBroadcastManager</a> is deprecated.</p>\n<p>you can register receiver without <code>LocalBroadcastManager</code>, using <code>Context.registerReceiver()</code>.</p>\n<p>And put your response result into <a href=\"https://developer.android.com/reference/android/content/SharedPreferences\" rel=\"nofollow noreferrer\">SharedPreferences</a>, and use the value of <code>SharedPreferences</code> as <a href=\"https://developer.android.com/topic/libraries/architecture/livedata\" rel=\"nofollow noreferrer\">LiveData</a> or <a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.flow/-flow/\" rel=\"nofollow noreferrer\">Flow</a> in your <code>Activity</code>, <code>Fragment</code> or <code>ViewModel</code>.</p>\n<p>Or, use event bus with <a href=\"https://github.com/ReactiveX/RxJava\" rel=\"nofollow noreferrer\">RxJava</a> or <a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.flow/-flow/\" rel=\"nofollow noreferrer\">Flow</a> whatever</p>\n"}],"owner":{"account_id":14033656,"reputation":105,"user_id":13463349,"display_name":"Chris972"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":93,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1640058885,"creation_date":1640044488,"question_id":70429255,"body_markdown":"First of all, I am a great newbie in aAndroid development (and with a English not really perfect).\r\n\r\nWhat is the simplest way to access my layout (simple TextView, here named &quot;text&quot;) from onNewToken() method from FirebaseMessagingService class ?\r\nI saw that we regularly talked about BroadcastReceivers but I also read that it was deprecated.\r\nOf course I have errors with findViewById().\r\n\r\n    public class MyFirebaseMessagingService extends FirebaseMessagingService {\r\n    \t@Override\r\n    \tpublic void onNewToken(String device_token) {\r\n    \t\t@SuppressLint(&quot;HardwareIds&quot;) String device_id = Settings.Secure.getString(getContentResolver(), Settings.Secure.ANDROID_ID);\r\n    \t\tDeviceService service = DeviceService.retrofit.create(DeviceService.class);\r\n    \t\tCall&lt;String&gt; call = service.insertToken(device_token,device_id);\r\n    \t\tcall.enqueue(new Callback&lt;String&gt;() {\r\n    \t\t\t@Override\r\n    \t\t\tpublic void onResponse(Call&lt;String&gt; call, Response&lt;String&gt; response) {\r\n    \t\t\t\tif (response.isSuccessful()) {\r\n    \t\t\t\t\ttext.setText(&quot;Token registered&quot;);\r\n    \t\t\t\t}\telse {\r\n    \t\t\t\t\ttext.setText(&quot;Token registering error&quot;);\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\t@Override\r\n    \t\t\tpublic void onFailure(Call&lt;String&gt; call, Throwable t) {\r\n    \t\t\t\ttext.setText(&quot;Token not transmitted&quot;);\r\n    \t\t\t}\r\n    \t\t});\r\n    \t}\r\n    }","title":"How to access my layout from onNewToken() of FirebaseMessagingService?","body":"<p>First of all, I am a great newbie in aAndroid development (and with a English not really perfect).</p>\n<p>What is the simplest way to access my layout (simple TextView, here named &quot;text&quot;) from onNewToken() method from FirebaseMessagingService class ?\nI saw that we regularly talked about BroadcastReceivers but I also read that it was deprecated.\nOf course I have errors with findViewById().</p>\n<pre><code>public class MyFirebaseMessagingService extends FirebaseMessagingService {\n    @Override\n    public void onNewToken(String device_token) {\n        @SuppressLint(&quot;HardwareIds&quot;) String device_id = Settings.Secure.getString(getContentResolver(), Settings.Secure.ANDROID_ID);\n        DeviceService service = DeviceService.retrofit.create(DeviceService.class);\n        Call&lt;String&gt; call = service.insertToken(device_token,device_id);\n        call.enqueue(new Callback&lt;String&gt;() {\n            @Override\n            public void onResponse(Call&lt;String&gt; call, Response&lt;String&gt; response) {\n                if (response.isSuccessful()) {\n                    text.setText(&quot;Token registered&quot;);\n                }   else {\n                    text.setText(&quot;Token registering error&quot;);\n                }\n            }\n            @Override\n            public void onFailure(Call&lt;String&gt; call, Throwable t) {\n                text.setText(&quot;Token not transmitted&quot;);\n            }\n        });\n    }\n}\n</code></pre>\n"},{"tags":["java","arrays","javafx","text"],"comments":[{"owner":{"account_id":5534380,"reputation":268,"user_id":4472711,"display_name":"MNEMO"},"score":0,"creation_date":1640055508,"post_id":70430098,"comment_id":124499313,"body_markdown":"Please show your code for initializing each element of that Text array.","body":"Please show your code for initializing each element of that Text array."},{"owner":{"account_id":19022679,"reputation":125,"user_id":13886429,"display_name":"Royginald"},"score":0,"creation_date":1640058172,"post_id":70430098,"comment_id":124499641,"body_markdown":"@MNEMO I didn&#39;t initialize each element, I just tried setting the text of each one. Another person suggested doing something like this: ```for (Text text : texts) { text = new Text(); text.setText(&quot;&quot;); }```\nBut that didn&#39;t work either","body":"@MNEMO I didn&#39;t initialize each element, I just tried setting the text of each one. Another person suggested doing something like this: <code>for (Text text : texts) { text = new Text(); text.setText(&quot;&quot;); }</code> But that didn&#39;t work either"},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":2,"creation_date":1640059448,"post_id":70430098,"comment_id":124499800,"body_markdown":"I advise you take some time for additional study of foundational Java programming courses before writing JavaFX applications.  Ensure that you use high quality training resources rather than relying on another person or stack overflow questions.","body":"I advise you take some time for additional study of foundational Java programming courses before writing JavaFX applications.  Ensure that you use high quality training resources rather than relying on another person or stack overflow questions."}],"answers":[{"tags":[],"owner":{"account_id":23667337,"reputation":1467,"user_id":17694626,"display_name":"Cheng Thao"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1640058384,"creation_date":1640056015,"answer_id":70430233,"question_id":70430098,"body_markdown":"It&#39;s because your array contains only null values.  You need to populate the array with Text objects.\r\n\r\n```\r\npublic Text[] texts = new Text[10];\r\nfor(int i=0; i&lt;texts.length; i++){\r\n  texts[i] = new Text();\r\n  texts[i].setText(&quot;&quot;);\r\n}\r\n\r\n```\r\n\r\nBelow will cause the array to be initialized before used.\r\n\r\n```\r\n    public Text[] texts = { new Text(&quot;&quot;), new Text(&quot;&quot;),\r\n                            new Text(&quot;&quot;), new Text(&quot;&quot;), \r\n                            new Text(&quot;&quot;), new Text(&quot;&quot;), \r\n                            new Text(&quot;&quot;), new Text(&quot;&quot;), \r\n                            new Text(&quot;&quot;), new Text(&quot;&quot;), };\r\n```\r\n\r\n","title":"Java FX Text array not Initalized","body":"<p>It's because your array contains only null values.  You need to populate the array with Text objects.</p>\n<pre><code>public Text[] texts = new Text[10];\nfor(int i=0; i&lt;texts.length; i++){\n  texts[i] = new Text();\n  texts[i].setText(&quot;&quot;);\n}\n\n</code></pre>\n<p>Below will cause the array to be initialized before used.</p>\n<pre><code>    public Text[] texts = { new Text(&quot;&quot;), new Text(&quot;&quot;),\n                            new Text(&quot;&quot;), new Text(&quot;&quot;), \n                            new Text(&quot;&quot;), new Text(&quot;&quot;), \n                            new Text(&quot;&quot;), new Text(&quot;&quot;), \n                            new Text(&quot;&quot;), new Text(&quot;&quot;), };\n</code></pre>\n"}],"owner":{"account_id":19022679,"reputation":125,"user_id":13886429,"display_name":"Royginald"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1640067594,"accepted_answer_id":70430233,"answer_count":1,"score":0,"last_activity_date":1640058384,"creation_date":1640054339,"question_id":70430098,"body_markdown":"I&#39;m working with Java FX and I&#39;m making and array of Text objects to display a text in different points on my GUI. I declare the array as follows:\r\n\r\n```\r\npublic Text[] texts = new Text[10];\r\n```\r\n\r\nAt the very beginning of my start() method I try to make all of the Texts be blank like so:\r\n\r\n```\r\nfor (Text text : texts) \r\n    text.setText(&quot;&quot;);\r\n```\r\n\r\nbut when I run this I get the following error:\r\n\r\n```\r\nException in Application start method\r\njava.lang.reflect.InvocationTargetException\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:564)\r\n\tat javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplicationWithArgs(LauncherImpl.java:473)\r\n\tat javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplication(LauncherImpl.java:372)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:564)\r\n\tat java.base/sun.launcher.LauncherHelper$FXHelper.main(LauncherHelper.java:941)\r\nCaused by: java.lang.RuntimeException: Exception in Application start method\r\n\tat javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:973)\r\n\tat javafx.graphics/com.sun.javafx.application.LauncherImpl.lambda$launchApplication$2(LauncherImpl.java:198)\r\n\tat java.base/java.lang.Thread.run(Thread.java:844)\r\nCaused by: java.lang.NullPointerException\r\n\tat sample.Main.start(Main.java:93)\r\n\tat javafx.graphics/com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$9(LauncherImpl.java:919)\r\n\tat javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runAndWait$11(PlatformImpl.java:449)\r\n\tat javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runLater$9(PlatformImpl.java:418)\r\n\tat java.base/java.security.AccessController.doPrivileged(Native Method)\r\n\tat javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runLater$10(PlatformImpl.java:417)\r\n\tat javafx.graphics/com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:96)\r\n\tat javafx.graphics/com.sun.glass.ui.win.WinApplication._runLoop(Native Method)\r\n\tat javafx.graphics/com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:175)\r\n\t... 1 more\r\nException running application sample.Main\r\n```\r\n\r\nThe for loop above where I reference the Text array is on line 93. I think the compiler thinks the array is empty (Hence the nullpointer exception). Is there an easy way around this?\r\n\r\nThanks in advance!","title":"Java FX Text array not Initalized","body":"<p>I'm working with Java FX and I'm making and array of Text objects to display a text in different points on my GUI. I declare the array as follows:</p>\n<pre><code>public Text[] texts = new Text[10];\n</code></pre>\n<p>At the very beginning of my start() method I try to make all of the Texts be blank like so:</p>\n<pre><code>for (Text text : texts) \n    text.setText(&quot;&quot;);\n</code></pre>\n<p>but when I run this I get the following error:</p>\n<pre><code>Exception in Application start method\njava.lang.reflect.InvocationTargetException\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:564)\n    at javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplicationWithArgs(LauncherImpl.java:473)\n    at javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplication(LauncherImpl.java:372)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:564)\n    at java.base/sun.launcher.LauncherHelper$FXHelper.main(LauncherHelper.java:941)\nCaused by: java.lang.RuntimeException: Exception in Application start method\n    at javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:973)\n    at javafx.graphics/com.sun.javafx.application.LauncherImpl.lambda$launchApplication$2(LauncherImpl.java:198)\n    at java.base/java.lang.Thread.run(Thread.java:844)\nCaused by: java.lang.NullPointerException\n    at sample.Main.start(Main.java:93)\n    at javafx.graphics/com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$9(LauncherImpl.java:919)\n    at javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runAndWait$11(PlatformImpl.java:449)\n    at javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runLater$9(PlatformImpl.java:418)\n    at java.base/java.security.AccessController.doPrivileged(Native Method)\n    at javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runLater$10(PlatformImpl.java:417)\n    at javafx.graphics/com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:96)\n    at javafx.graphics/com.sun.glass.ui.win.WinApplication._runLoop(Native Method)\n    at javafx.graphics/com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:175)\n    ... 1 more\nException running application sample.Main\n</code></pre>\n<p>The for loop above where I reference the Text array is on line 93. I think the compiler thinks the array is empty (Hence the nullpointer exception). Is there an easy way around this?</p>\n<p>Thanks in advance!</p>\n"},{"tags":["java","spring-boot","aop","aspectj","spring-aop"],"comments":[{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1604734457,"post_id":64718434,"comment_id":114442527,"body_markdown":"Before I look into it, I would like to know why `MyService` is a separate class at all. It seems to specifically cater to the aspect with its `around` method. Is it used outside the aspect too for other purposes? And why do you add extra indirection with method reference or lambda if you could just canonically call `proceed()`? It would be good to see the full picture here, otherwise there is danger that you are stuck in an [XY problem](https://meta.stackexchange.com/a/66378/309898), focusing on the technical solution instead of what you want to achieve. I would like to see the full picture.","body":"Before I look into it, I would like to know why <code>MyService</code> is a separate class at all. It seems to specifically cater to the aspect with its <code>around</code> method. Is it used outside the aspect too for other purposes? And why do you add extra indirection with method reference or lambda if you could just canonically call <code>proceed()</code>? It would be good to see the full picture here, otherwise there is danger that you are stuck in an <a href=\"https://meta.stackexchange.com/a/66378/309898\">XY problem</a>, focusing on the technical solution instead of what you want to achieve. I would like to see the full picture."},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1604734527,"post_id":64718434,"comment_id":114442538,"body_markdown":"Ideally, post an [MCVE](https://stackoverflow.com/help/mcve) on GitHub. That would make it easier for me to reproduce your problem without having to make assumptions when filling in the gaps in the code and speculate about your intent. The question is interesting, I am willing to take a closer look.","body":"Ideally, post an <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> on GitHub. That would make it easier for me to reproduce your problem without having to make assumptions when filling in the gaps in the code and speculate about your intent. The question is interesting, I am willing to take a closer look."},{"owner":{"account_id":19914056,"reputation":53,"user_id":14591481,"display_name":"Viktor Magyari"},"score":0,"creation_date":1604788139,"post_id":64718434,"comment_id":114454994,"body_markdown":"`MyService` doesn&#39;t have to be a separate class, I just thought it&#39;d make sense to keep the aspect separate. Same reasoning for the indirection - maybe, sometime in the future, I&#39;d find a better way of hooking into the machinery (unlikely, but still), and `MyService` could remain as it is. I&#39;ll be able to provide an MVCE on monday. Thanks for taking the time!","body":"<code>MyService</code> doesn&#39;t have to be a separate class, I just thought it&#39;d make sense to keep the aspect separate. Same reasoning for the indirection - maybe, sometime in the future, I&#39;d find a better way of hooking into the machinery (unlikely, but still), and <code>MyService</code> could remain as it is. I&#39;ll be able to provide an MVCE on monday. Thanks for taking the time!"},{"owner":{"account_id":19914056,"reputation":53,"user_id":14591481,"display_name":"Viktor Magyari"},"score":0,"creation_date":1604928196,"post_id":64718434,"comment_id":114488133,"body_markdown":"@kriegaex https://github.com/moxaj/aspect-mcve. Instructions in the readme.","body":"@kriegaex <a href=\"https://github.com/moxaj/aspect-mcve\" rel=\"nofollow noreferrer\">github.com/moxaj/aspect-mcve</a>. Instructions in the readme."}],"answers":[{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1605066501,"creation_date":1605001981,"answer_id":64766543,"question_id":64718434,"body_markdown":"I reproduced your problem and also compared a similar setup in plain Java + AspectJ (i.e. without Spring or Spring AOP, only using two Spring annotations used in aspect pointcuts). There the problem does not occur. It is something specific to Spring AOP, that much is sure.\r\n\r\nNow Spring uses AspectJ&#39;s pointcut matching in combination with its own AOP framework based on proxies and delegation. Somewhere in there this edge case must mess up the status of Spring aspect matching, causing the behaviour you see. I have not debugged into it so far, but from what I see now I would suggest to create an issue and see what the maintainers say about it.\r\n\r\nHere is my AspectJ [MCVE](https://stackoverflow.com/help/mcve) proving that the problem does not occur there. BTW, I had to rename the package `aspect` to `aop` because in AspectJ `aspect` is a reserved keyword. But I also renamed it in the Spring project in order to make sure it is unrelated to the problem at hand, and it is unrelated.\r\n\r\n```java\r\npackage aop.mcve;\r\n\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\n@RestController\r\npublic class MyController {\r\n  public void controllerMethod() {}\r\n}\r\n```\r\n\r\n```java\r\npackage aop.mcve;\r\n\r\nimport org.springframework.stereotype.Service;\r\n\r\n@Service\r\npublic class MyService {\r\n  public Object delegateTo(MyAspect.Callable&lt;?&gt; callable) throws Throwable {\r\n    return callable.call();\r\n  }\r\n\r\n  public void serviceMethod() {}\r\n}\r\n```\r\n\r\n```java\r\npackage aop.mcve;\r\n\r\nimport org.aspectj.lang.ProceedingJoinPoint;\r\nimport org.aspectj.lang.annotation.Around;\r\nimport org.aspectj.lang.annotation.Aspect;\r\nimport org.aspectj.lang.annotation.Pointcut;\r\n\r\n@Aspect\r\npublic class MyAspect {\r\n  private final MyService myService = new MyService();\r\n\r\n  @Pointcut(&quot;within(aop.mcve..*) &amp;&amp; !within(MyAspect) &amp;&amp; execution(* *(..))&quot;)\r\n  public void inDomain() {}\r\n\r\n  @Pointcut(&quot;@target(org.springframework.stereotype.Service)&quot;)\r\n  public void inService() {}\r\n\r\n  @Pointcut(&quot;execution(* aop.mcve.MyService.*(..))&quot;)\r\n  public void inMyService() {}\r\n\r\n  @Pointcut(&quot;@target(org.springframework.web.bind.annotation.RestController)&quot;)\r\n  public void inController() {}\r\n\r\n  @Around(&quot;inDomain() &amp;&amp; inController()&quot;)\r\n  public Object aroundController(ProceedingJoinPoint joinPoint) throws Throwable {\r\n    System.out.println(&quot;aroundController -&gt; &quot; + joinPoint);\r\n    return myService.delegateTo(joinPoint::proceed);\r\n  }\r\n\r\n  @Around(&quot;inDomain() &amp;&amp; inService() &amp;&amp; !inMyService()&quot;)\r\n  public Object aroundService(ProceedingJoinPoint joinPoint) throws Throwable {\r\n    System.out.println(&quot;aroundService -&gt; &quot; + joinPoint);\r\n    System.out.println(&quot;You should never see this message!&quot;);\r\n    return joinPoint.proceed();\r\n  }\r\n\r\n  public interface Callable&lt;T&gt; {\r\n    T call() throws Throwable;\r\n  }\r\n}\r\n```\r\n\r\n```java\r\npackage aop.mcve;\r\n\r\npublic class AspectMcveApplication {\r\n  public static void main(String[] args) throws Throwable {\r\n    new MyService().serviceMethod();\r\n    new MyController().controllerMethod();\r\n  }\r\n}\r\n```\r\n\r\nThe console log:\r\n\r\n```none\r\naroundController -&gt; execution(void aop.mcve.MyController.controllerMethod())\r\n```\r\n\r\nAs you can see, the advice method `aroundService(..)` does not get triggered like in Spring AOP.\r\n\r\n---\r\n\r\n**Update:** I modified your MCVE in order to make it runnable with both Spring AOP and AspectJ, it automatically detects AspectJ&#39;s load-time weaver when active. I sent you this [pull request](https://github.com/moxaj/aspect-mcve/pull/1).","title":"Spring AOP - Pointcut applying to method only when joinPoint.proceed is invoked from a lambda","body":"<p>I reproduced your problem and also compared a similar setup in plain Java + AspectJ (i.e. without Spring or Spring AOP, only using two Spring annotations used in aspect pointcuts). There the problem does not occur. It is something specific to Spring AOP, that much is sure.</p>\n<p>Now Spring uses AspectJ's pointcut matching in combination with its own AOP framework based on proxies and delegation. Somewhere in there this edge case must mess up the status of Spring aspect matching, causing the behaviour you see. I have not debugged into it so far, but from what I see now I would suggest to create an issue and see what the maintainers say about it.</p>\n<p>Here is my AspectJ <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> proving that the problem does not occur there. BTW, I had to rename the package <code>aspect</code> to <code>aop</code> because in AspectJ <code>aspect</code> is a reserved keyword. But I also renamed it in the Spring project in order to make sure it is unrelated to the problem at hand, and it is unrelated.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package aop.mcve;\n\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\npublic class MyController {\n  public void controllerMethod() {}\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package aop.mcve;\n\nimport org.springframework.stereotype.Service;\n\n@Service\npublic class MyService {\n  public Object delegateTo(MyAspect.Callable&lt;?&gt; callable) throws Throwable {\n    return callable.call();\n  }\n\n  public void serviceMethod() {}\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package aop.mcve;\n\nimport org.aspectj.lang.ProceedingJoinPoint;\nimport org.aspectj.lang.annotation.Around;\nimport org.aspectj.lang.annotation.Aspect;\nimport org.aspectj.lang.annotation.Pointcut;\n\n@Aspect\npublic class MyAspect {\n  private final MyService myService = new MyService();\n\n  @Pointcut(&quot;within(aop.mcve..*) &amp;&amp; !within(MyAspect) &amp;&amp; execution(* *(..))&quot;)\n  public void inDomain() {}\n\n  @Pointcut(&quot;@target(org.springframework.stereotype.Service)&quot;)\n  public void inService() {}\n\n  @Pointcut(&quot;execution(* aop.mcve.MyService.*(..))&quot;)\n  public void inMyService() {}\n\n  @Pointcut(&quot;@target(org.springframework.web.bind.annotation.RestController)&quot;)\n  public void inController() {}\n\n  @Around(&quot;inDomain() &amp;&amp; inController()&quot;)\n  public Object aroundController(ProceedingJoinPoint joinPoint) throws Throwable {\n    System.out.println(&quot;aroundController -&gt; &quot; + joinPoint);\n    return myService.delegateTo(joinPoint::proceed);\n  }\n\n  @Around(&quot;inDomain() &amp;&amp; inService() &amp;&amp; !inMyService()&quot;)\n  public Object aroundService(ProceedingJoinPoint joinPoint) throws Throwable {\n    System.out.println(&quot;aroundService -&gt; &quot; + joinPoint);\n    System.out.println(&quot;You should never see this message!&quot;);\n    return joinPoint.proceed();\n  }\n\n  public interface Callable&lt;T&gt; {\n    T call() throws Throwable;\n  }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package aop.mcve;\n\npublic class AspectMcveApplication {\n  public static void main(String[] args) throws Throwable {\n    new MyService().serviceMethod();\n    new MyController().controllerMethod();\n  }\n}\n</code></pre>\n<p>The console log:</p>\n<pre class=\"lang-none prettyprint-override\"><code>aroundController -&gt; execution(void aop.mcve.MyController.controllerMethod())\n</code></pre>\n<p>As you can see, the advice method <code>aroundService(..)</code> does not get triggered like in Spring AOP.</p>\n<hr />\n<p><strong>Update:</strong> I modified your MCVE in order to make it runnable with both Spring AOP and AspectJ, it automatically detects AspectJ's load-time weaver when active. I sent you this <a href=\"https://github.com/moxaj/aspect-mcve/pull/1\" rel=\"nofollow noreferrer\">pull request</a>.</p>\n"}],"owner":{"account_id":19914056,"reputation":53,"user_id":14591481,"display_name":"Viktor Magyari"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1326,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":64766543,"answer_count":1,"score":3,"last_activity_date":1640058239,"creation_date":1604680680,"question_id":64718434,"body_markdown":"(Title isn&#39;t the best, but I couldn&#39;t find a good way to phrase the following problem)\r\n\r\nGiven\r\n\r\n```java\r\n@Aspect\r\n@Component\r\nclass MyAspect {\r\n  @Autowired private MyService service;\r\n\r\n  @Around(&quot;@target(org.springframework.ws.server.endpoint.annotation.Endpoint)&quot;)\r\n  public Object aroundEndpoint(ProceedingJoinPoint joinPoint) {\r\n    return service.around(joinPoint::proceed);\r\n  }\r\n\r\n  @Around(&quot;@target(org.springframework.stereotype.Service)&quot;) // And some other expressions to exclude `MyService`\r\n  public Object aroundService(ProceedingJoinPoint joinPoint) throws Throwable {\r\n    // ...\r\n  }\r\n}\r\n\r\n@Service\r\nclass MyService {\r\n  // My own Callable&lt;T&gt; with Throwable instead of Exception\r\n  public Object around(Callable&lt;?&gt; callable) throws Throwable {\r\n    // Do stuff\r\n    Object returnValue = callable.call();\r\n    // Do stuff\r\n    return returnValue;\r\n  }\r\n}\r\n```\r\n\r\nWhen an endpoint method is invoked, it is intercepted by `aroundEndpoint`. If I were to invoke `joinPoint.proceed()` right away, everything would work as expected. However, if I pass it as a method reference (or a lambda) into `MyService.around`, and **then** invoke it, it is matched against my service pointcut and my around service advice is applied to it.\r\n\r\nI did some debugging, and here&#39;s what I see: in `AspectJExpressionPointcut.matches`, `thisObject` and `targetObject` refer to my endpoint in the former case, but refer to my service in the latter case. This is probably because it uses `ExposeInvocationInterceptor.currentInvocation()`, and doing another method call messes with it.\r\n\r\nIs this a bug? Some limitation of the proxy-based approach? Or do I have to simply inline `MyService.aroundService`?","title":"Spring AOP - Pointcut applying to method only when joinPoint.proceed is invoked from a lambda","body":"<p>(Title isn't the best, but I couldn't find a good way to phrase the following problem)</p>\n<p>Given</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Aspect\n@Component\nclass MyAspect {\n  @Autowired private MyService service;\n\n  @Around(&quot;@target(org.springframework.ws.server.endpoint.annotation.Endpoint)&quot;)\n  public Object aroundEndpoint(ProceedingJoinPoint joinPoint) {\n    return service.around(joinPoint::proceed);\n  }\n\n  @Around(&quot;@target(org.springframework.stereotype.Service)&quot;) // And some other expressions to exclude `MyService`\n  public Object aroundService(ProceedingJoinPoint joinPoint) throws Throwable {\n    // ...\n  }\n}\n\n@Service\nclass MyService {\n  // My own Callable&lt;T&gt; with Throwable instead of Exception\n  public Object around(Callable&lt;?&gt; callable) throws Throwable {\n    // Do stuff\n    Object returnValue = callable.call();\n    // Do stuff\n    return returnValue;\n  }\n}\n</code></pre>\n<p>When an endpoint method is invoked, it is intercepted by <code>aroundEndpoint</code>. If I were to invoke <code>joinPoint.proceed()</code> right away, everything would work as expected. However, if I pass it as a method reference (or a lambda) into <code>MyService.around</code>, and <strong>then</strong> invoke it, it is matched against my service pointcut and my around service advice is applied to it.</p>\n<p>I did some debugging, and here's what I see: in <code>AspectJExpressionPointcut.matches</code>, <code>thisObject</code> and <code>targetObject</code> refer to my endpoint in the former case, but refer to my service in the latter case. This is probably because it uses <code>ExposeInvocationInterceptor.currentInvocation()</code>, and doing another method call messes with it.</p>\n<p>Is this a bug? Some limitation of the proxy-based approach? Or do I have to simply inline <code>MyService.aroundService</code>?</p>\n"},{"tags":["java","spring","aop","aspectj","spring-aop"],"comments":[{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1533273094,"post_id":51580725,"comment_id":90294398,"body_markdown":"How can you expect it to work for `MyService`? The class does not extend or implement anything related to `Reporitory`. or `@CrudRepository`. Or do you want to target another class? If so, please show that class incl. package name.","body":"How can you expect it to work for <code>MyService</code>? The class does not extend or implement anything related to <code>Reporitory</code>. or <code>@CrudRepository</code>. Or do you want to target another class? If so, please show that class incl. package name."},{"owner":{"account_id":13427211,"reputation":1113,"user_id":9688154,"display_name":"sam"},"score":0,"creation_date":1533275493,"post_id":51580725,"comment_id":90295111,"body_markdown":"It is just sample that I have wanted to show it is working on concrate class which has @tenantable anotation. But it is not working for repositories.","body":"It is just sample that I have wanted to show it is working on concrate class which has @tenantable anotation. But it is not working for repositories."},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1533276231,"post_id":51580725,"comment_id":90295327,"body_markdown":"Exactly! So where is your example for what is _not_ working? This is what you are looking for answers here, are you not? Please provide an [MCVE](http://stackoverflow.com/help/mcve), this is how you get your answeres around here.","body":"Exactly! So where is your example for what is <i>not</i> working? This is what you are looking for answers here, are you not? Please provide an <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>, this is how you get your answeres around here."},{"owner":{"account_id":13427211,"reputation":1113,"user_id":9688154,"display_name":"sam"},"score":0,"creation_date":1533393703,"post_id":51580725,"comment_id":90335278,"body_markdown":"@kriegaex I have edited","body":"@kriegaex I have edited"},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1533440283,"post_id":51580725,"comment_id":90344085,"body_markdown":"All you did is add the `MyRepository` interface. Where is a class implementing that interface and how is it used? What about [MCVE](http://stackoverflow.com/help/mcve) do you not understand? Did you even read the article? I cannot compile and run your code, as it is incomplete. You are hiding exactly those parts of the application which you have problems with. This does not make much sense.","body":"All you did is add the <code>MyRepository</code> interface. Where is a class implementing that interface and how is it used? What about <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a> do you not understand? Did you even read the article? I cannot compile and run your code, as it is incomplete. You are hiding exactly those parts of the application which you have problems with. This does not make much sense."}],"answers":[{"tags":[],"owner":{"account_id":11583471,"reputation":17797,"user_id":8486518,"display_name":"Mạnh Quyết Nguyễn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1532870994,"creation_date":1532870819,"answer_id":51580763,"question_id":51580725,"body_markdown":"Your `repositoryExec` pointcut should end with `+` to advice all subclass of `Repository`\n\n      @Pointcut(&quot;this(org.springframework.data.repository.Repository+)&quot;)","title":"Spring + AspectJ pointcut on CrudRepository and Annotation","body":"<p>Your <code>repositoryExec</code> pointcut should end with <code>+</code> to advice all subclass of <code>Repository</code></p>\n\n<pre><code>  @Pointcut(\"this(org.springframework.data.repository.Repository+)\")\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1563797584,"creation_date":1533441683,"answer_id":51691278,"question_id":51580725,"body_markdown":"Having taken another look, I think I know what is going on here: You are assuming that just because you made your annotation `@Inherited`, it will be inherited by implementing classes if you annotate an interface. But this assumption is wrong. `@Inherited` only works in exactly one case: when extending an annotated base class. It does not work for annotated interfaces, methods etc. This is also documented [here](https://docs.oracle.com/javase/8/docs/api/java/lang/annotation/Inherited.html):\r\n\r\n&gt; Note that this meta-annotation type has no effect if the annotated type is used to annotate anything other than a class. Note also that this meta-annotation only causes annotations to be inherited from superclasses; annotations on implemented interfaces have no effect.\r\n\r\nAs soon as you annotate your implementing class, it works.","title":"Spring + AspectJ pointcut on CrudRepository and Annotation","body":"<p>Having taken another look, I think I know what is going on here: You are assuming that just because you made your annotation <code>@Inherited</code>, it will be inherited by implementing classes if you annotate an interface. But this assumption is wrong. <code>@Inherited</code> only works in exactly one case: when extending an annotated base class. It does not work for annotated interfaces, methods etc. This is also documented <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/annotation/Inherited.html\" rel=\"nofollow noreferrer\">here</a>:</p>\n\n<blockquote>\n  <p>Note that this meta-annotation type has no effect if the annotated type is used to annotate anything other than a class. Note also that this meta-annotation only causes annotations to be inherited from superclasses; annotations on implemented interfaces have no effect.</p>\n</blockquote>\n\n<p>As soon as you annotate your implementing class, it works.</p>\n"}],"owner":{"account_id":13427211,"reputation":1113,"user_id":9688154,"display_name":"sam"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2573,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":51691278,"answer_count":2,"score":-1,"last_activity_date":1640058096,"creation_date":1532870502,"question_id":51580725,"body_markdown":"I have @Tenantable annotation to decide for pointCut : \r\n\r\n    @Target({ElementType.TYPE, ElementType.METHOD})\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @Inherited\r\n    public @interface Tenantable {\r\n    }\r\nthis my aspect : \r\n\r\n   \r\n\r\n     @Slf4j\r\n        @Aspect\r\n        @Configuration\r\n        public class TenancyAspect {\r\n        \r\n            @Pointcut(&quot;execution(public * *(..))&quot;)\r\n            public void publicMethod() {}\r\n        \r\n            @Around(&quot;publicMethod() &amp;&amp; @within(com.sam.example.aspect.aspectexample.model.Tenantable)&quot;)\r\n            public Object tenatable(ProceedingJoinPoint joinPoint) throws Throwable {\r\n                System.out.println(&quot;my operations ...&quot;);\r\n                return joinPoint.proceed();\r\n            }\r\n        }\r\n\r\n     \r\n\r\nThis is working without any problem for this service class : \r\n\r\n    @Tenantable\r\n    @Service\r\n    public class MyService(){\r\n        public void doSomething(){\r\n                ...\r\n        }\r\n    }\r\n\r\nmy aspect is running when I call doSomething() method, It is ok but I want to implement aspect for CrudRepository interface that belongs spring data.\r\n\r\nI have changed my Aspect to achieve this like below : \r\n\r\n\r\n    @Slf4j\r\n    @Aspect\r\n    @Configuration\r\n    public class TenancyAspect {\r\n    \r\n        @Pointcut(&quot;execution(public * *(..))&quot;)\r\n        public void publicMethod() {}\r\n    \r\n    \r\n        @Pointcut(&quot;this(org.springframework.data.repository.Repository)&quot;)\r\n        public void repositoryExec(){}\r\n    \r\n    \r\n        @Around(&quot;publicMethod() &amp;&amp; repositoryExec() &amp;&amp; @within(com.sam.example.aspect.aspectexample.model.Tenantable)&quot;)\r\n        public Object tenatable(ProceedingJoinPoint joinPoint) throws Throwable {\r\n            System.out.println(&quot;my operations ...&quot;);\r\n            return joinPoint.proceed();\r\n        }\r\n    }\r\n\r\nthis is repository : \r\n\r\n    @Tenantable\r\n    @Repository\r\n    public interface MyRepository extends CrudRepository{\r\n    }\r\n\r\n\r\n But it doesn&#39;t work when I call any method inside of  MyRepository.\r\n\r\nIs there anyway to do this?\r\n\r\n\r\n**Edit :** \r\nIt works for all repositories when I apply these : \r\n\r\n    @Pointcut(&quot;execution(public * org.springframework.data.repository.Repository+.*(..))&quot;)\r\n\r\n  and  exclude this : \r\n\r\n`@within(com.sam.example.aspect.aspectexample.model.Tenantable)`\r\n\r\nBut I need this anotation to apply it for  specific repositories.\r\n\r\n\r\n\r\n\r\n\r\n","title":"Spring + AspectJ pointcut on CrudRepository and Annotation","body":"<p>I have @Tenantable annotation to decide for pointCut : </p>\n\n<pre><code>@Target({ElementType.TYPE, ElementType.METHOD})\n@Retention(RetentionPolicy.RUNTIME)\n@Inherited\npublic @interface Tenantable {\n}\n</code></pre>\n\n<p>this my aspect : </p>\n\n<pre><code> @Slf4j\n    @Aspect\n    @Configuration\n    public class TenancyAspect {\n\n        @Pointcut(\"execution(public * *(..))\")\n        public void publicMethod() {}\n\n        @Around(\"publicMethod() &amp;&amp; @within(com.sam.example.aspect.aspectexample.model.Tenantable)\")\n        public Object tenatable(ProceedingJoinPoint joinPoint) throws Throwable {\n            System.out.println(\"my operations ...\");\n            return joinPoint.proceed();\n        }\n    }\n</code></pre>\n\n<p>This is working without any problem for this service class : </p>\n\n<pre><code>@Tenantable\n@Service\npublic class MyService(){\n    public void doSomething(){\n            ...\n    }\n}\n</code></pre>\n\n<p>my aspect is running when I call doSomething() method, It is ok but I want to implement aspect for CrudRepository interface that belongs spring data.</p>\n\n<p>I have changed my Aspect to achieve this like below : </p>\n\n<pre><code>@Slf4j\n@Aspect\n@Configuration\npublic class TenancyAspect {\n\n    @Pointcut(\"execution(public * *(..))\")\n    public void publicMethod() {}\n\n\n    @Pointcut(\"this(org.springframework.data.repository.Repository)\")\n    public void repositoryExec(){}\n\n\n    @Around(\"publicMethod() &amp;&amp; repositoryExec() &amp;&amp; @within(com.sam.example.aspect.aspectexample.model.Tenantable)\")\n    public Object tenatable(ProceedingJoinPoint joinPoint) throws Throwable {\n        System.out.println(\"my operations ...\");\n        return joinPoint.proceed();\n    }\n}\n</code></pre>\n\n<p>this is repository : </p>\n\n<pre><code>@Tenantable\n@Repository\npublic interface MyRepository extends CrudRepository{\n}\n</code></pre>\n\n<p>But it doesn't work when I call any method inside of  MyRepository.</p>\n\n<p>Is there anyway to do this?</p>\n\n<p><strong>Edit :</strong> \nIt works for all repositories when I apply these : </p>\n\n<pre><code>@Pointcut(\"execution(public * org.springframework.data.repository.Repository+.*(..))\")\n</code></pre>\n\n<p>and  exclude this : </p>\n\n<p><code>@within(com.sam.example.aspect.aspectexample.model.Tenantable)</code></p>\n\n<p>But I need this anotation to apply it for  specific repositories.</p>\n"},{"tags":["java","spring-boot","aop","aspectj","spring-aop"],"comments":[{"owner":{"account_id":10108456,"reputation":3914,"user_id":7470253,"display_name":"M. Prokhorov"},"score":0,"creation_date":1564497322,"post_id":57274028,"comment_id":101046336,"body_markdown":"I&#39;m guessing it&#39;s because AspectJ doesn&#39;t know what the first parameter to your pointcut method is. You need to somehow instruct it that it&#39;s a method&#39;s returned value.","body":"I&#39;m guessing it&#39;s because AspectJ doesn&#39;t know what the first parameter to your pointcut method is. You need to somehow instruct it that it&#39;s a method&#39;s returned value."},{"owner":{"account_id":8034427,"reputation":1287,"user_id":6058076,"accept_rate":100,"display_name":"LearningPhase"},"score":0,"creation_date":1564497433,"post_id":57274028,"comment_id":101046421,"body_markdown":"Make sure that the class you import is org.aspectj.lang.JoinPoint","body":"Make sure that the class you import is org.aspectj.lang.JoinPoint"},{"owner":{"account_id":10108456,"reputation":3914,"user_id":7470253,"display_name":"M. Prokhorov"},"score":0,"creation_date":1564497443,"post_id":57274028,"comment_id":101046425,"body_markdown":"Also, shouldn&#39;t it be `@AfterReturning`, since you want the returned value?","body":"Also, shouldn&#39;t it be <code>@AfterReturning</code>, since you want the returned value?"}],"answers":[{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1564535693,"creation_date":1564535693,"answer_id":57281893,"question_id":57274028,"body_markdown":"_Before I answer, let me constructively criticise your way of asking the question: The question is unclear. Why do you provide incoherent code snippets instead of full classes or methods? Specifically, you do not show which method parameters you actually want to use in your aspect advice. So now I have to guess (which I don&#39;t like because now I have 4x more work than necessary, see below). I kindly suggest you to learn what an [MCVE](http://stackoverflow.com/help/mcve) is - a 4k reputation user should know already - and try to compose better questions in the future._\r\n\r\n---\r\n\r\nYou cannot use advice method parameters which do not occur in your pointcut or result, other than a `JoinPoint` parameter which is always implicitly available. You should read some AspectJ documentation in order to learn more about pointcut and advice syntax.\r\n\r\nYou have a choice: Either in your advice method you don&#39;t need the return value and the annotation...\r\n\r\n```java\r\n@After(&quot;@annotation(br.com.powertiss.utils.transaction.PublishMQ)&quot;)\r\npublic Object publishChangeToMQ(JoinPoint thisJoinPoint) throws Throwable {\r\n```\r\n\r\n... or you need the annotation value only ...\r\n\r\n```java\r\n@After(&quot;@annotation(publishMQ)&quot;)\r\npublic Object publishChangeToMQ(JoinPoint thisJoinPoint, PublishMQ publishMQ) throws Throwable {\r\n```\r\n\r\n... or you need the return value only...\r\n\r\n```java\r\n@AfterReturning(pointcut = &quot;@annotation(br.com.powertiss.utils.transaction.PublishMQ)&quot;, returning = &quot;returnValue&quot;)\r\npublic Object publishChangeToMQ(JoinPoint thisJoinPoint, Object returnValue) throws Throwable {\r\n```\r\n\r\n... or you need both the return value and the annotation...\r\n\r\n```java\r\n@AfterReturning(pointcut = &quot;@annotation(publishMQ)&quot;, returning = &quot;returnValue&quot;)\r\npublic Object publishChangeToMQ(JoinPoint thisJoinPoint, PublishMQ publishMQ, Object returnValue) throws Throwable {\r\n```\r\n","title":"Exception using @After(@annotation) pointcut with AspectJ + SpringBoot","body":"<p><em>Before I answer, let me constructively criticise your way of asking the question: The question is unclear. Why do you provide incoherent code snippets instead of full classes or methods? Specifically, you do not show which method parameters you actually want to use in your aspect advice. So now I have to guess (which I don't like because now I have 4x more work than necessary, see below). I kindly suggest you to learn what an <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a> is - a 4k reputation user should know already - and try to compose better questions in the future.</em></p>\n\n<hr>\n\n<p>You cannot use advice method parameters which do not occur in your pointcut or result, other than a <code>JoinPoint</code> parameter which is always implicitly available. You should read some AspectJ documentation in order to learn more about pointcut and advice syntax.</p>\n\n<p>You have a choice: Either in your advice method you don't need the return value and the annotation...</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@After(\"@annotation(br.com.powertiss.utils.transaction.PublishMQ)\")\npublic Object publishChangeToMQ(JoinPoint thisJoinPoint) throws Throwable {\n</code></pre>\n\n<p>... or you need the annotation value only ...</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@After(\"@annotation(publishMQ)\")\npublic Object publishChangeToMQ(JoinPoint thisJoinPoint, PublishMQ publishMQ) throws Throwable {\n</code></pre>\n\n<p>... or you need the return value only...</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@AfterReturning(pointcut = \"@annotation(br.com.powertiss.utils.transaction.PublishMQ)\", returning = \"returnValue\")\npublic Object publishChangeToMQ(JoinPoint thisJoinPoint, Object returnValue) throws Throwable {\n</code></pre>\n\n<p>... or you need both the return value and the annotation...</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@AfterReturning(pointcut = \"@annotation(publishMQ)\", returning = \"returnValue\")\npublic Object publishChangeToMQ(JoinPoint thisJoinPoint, PublishMQ publishMQ, Object returnValue) throws Throwable {\n</code></pre>\n"}],"owner":{"account_id":33969,"reputation":7690,"user_id":95504,"accept_rate":80,"display_name":"razenha"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1010,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1640057998,"creation_date":1564496836,"question_id":57274028,"body_markdown":"Hello there fellow programmers.\r\n\r\nI have a SpringBoot Rest API I&#39;m working on and I&#39;m trying to use an Aspect that performs some actions after the execution of a method with a custom annotation.\r\n\r\nSo I have this custom annotation:\r\n\r\n    @Retention(RUNTIME)\r\n    @Target(METHOD)\r\n    public @interface PublishMQ {\r\n    \tString destinyName() default &quot;&quot;;\r\n    \tboolean skipNull() default true;\r\n    }\r\n\r\nAnd I have this aspect:\r\n\r\n    @Aspect\r\n    @Component\r\n    public class PublishMQAspect {\r\n    \r\n    // ...\r\n    \t@After(&quot;@annotation(br.com.powertiss.utils.transaction.PublishMQ)&quot;)\r\n    \tpublic Object publishChangeToMQ(Object returnValue, PublishMQ publishMQ) throws Throwable {\r\n    // ...\r\n\r\nI&#39;m trying to use them in a service:\r\n\r\n    @Service\r\n    public class OperatorService {\r\n    // ...\r\n    \t@PublishMQ(destinyName = &quot;queues/Opera&quot;)\r\n    \tpublic Operator salve(Operadora operator) {\r\n    // ...\r\n\r\nBut I&#39;m getting the given exception on startup:\r\n\r\n    java.lang.IllegalArgumentException: error at ::0 formal unbound in pointcut\r\n\r\nThe PublishMQ and PublishMQAspect are in a separate jar from OperatorService, but I don&#39;t believe this should be an issue.\r\n\r\nI tried many things for several hours but couldn&#39;t understand why AspectJ is raising this exception. Can you guys help? Thanks.","title":"Exception using @After(@annotation) pointcut with AspectJ + SpringBoot","body":"<p>Hello there fellow programmers.</p>\n\n<p>I have a SpringBoot Rest API I'm working on and I'm trying to use an Aspect that performs some actions after the execution of a method with a custom annotation.</p>\n\n<p>So I have this custom annotation:</p>\n\n<pre><code>@Retention(RUNTIME)\n@Target(METHOD)\npublic @interface PublishMQ {\n    String destinyName() default \"\";\n    boolean skipNull() default true;\n}\n</code></pre>\n\n<p>And I have this aspect:</p>\n\n<pre><code>@Aspect\n@Component\npublic class PublishMQAspect {\n\n// ...\n    @After(\"@annotation(br.com.powertiss.utils.transaction.PublishMQ)\")\n    public Object publishChangeToMQ(Object returnValue, PublishMQ publishMQ) throws Throwable {\n// ...\n</code></pre>\n\n<p>I'm trying to use them in a service:</p>\n\n<pre><code>@Service\npublic class OperatorService {\n// ...\n    @PublishMQ(destinyName = \"queues/Opera\")\n    public Operator salve(Operadora operator) {\n// ...\n</code></pre>\n\n<p>But I'm getting the given exception on startup:</p>\n\n<pre><code>java.lang.IllegalArgumentException: error at ::0 formal unbound in pointcut\n</code></pre>\n\n<p>The PublishMQ and PublishMQAspect are in a separate jar from OperatorService, but I don't believe this should be an issue.</p>\n\n<p>I tried many things for several hours but couldn't understand why AspectJ is raising this exception. Can you guys help? Thanks.</p>\n"},{"tags":["java","spring-boot","aop","aspectj","spring-aop"],"comments":[{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1603416455,"post_id":64491694,"comment_id":114038036,"body_markdown":"Before we proceed, I want to double-check: Are you 100% sure you use AspectJ and not just Spring AOP? Did you explicitly configure Spring to use load-time weaving? Another question is if your target class name really is `com.aop.service` with a lower-case &quot;s&quot;. Usually Java class names start with a capital letter.","body":"Before we proceed, I want to double-check: Are you 100% sure you use AspectJ and not just Spring AOP? Did you explicitly configure Spring to use load-time weaving? Another question is if your target class name really is <code>com.aop.service</code> with a lower-case &quot;s&quot;. Usually Java class names start with a capital letter."},{"owner":{"account_id":17186888,"reputation":43,"user_id":12441349,"display_name":"Raghu"},"score":0,"creation_date":1603421494,"post_id":64491694,"comment_id":114038954,"body_markdown":"@kriegaex - I&#39;m using Spring AOP in my project. Based on yu comment, I assume conditional if for a Pointcut in only for AspectJ but not Spring AOP?\n&quot;com.aop.service&quot; is an arbitrary name I&#39;ve given in the code, no need to concern about that!","body":"@kriegaex - I&#39;m using Spring AOP in my project. Based on yu comment, I assume conditional if for a Pointcut in only for AspectJ but not Spring AOP? &quot;com.aop.service&quot; is an arbitrary name I&#39;ve given in the code, no need to concern about that!"}],"answers":[{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1603507011,"creation_date":1603421984,"answer_id":64493239,"question_id":64491694,"body_markdown":"After having verified that you use Spring AOP,  the answer is indeed that both `if()` and `call()` are not supported, see also the Spring manual section about [pointcut designators](https://docs.spring.io/spring-framework/docs/current/spring-framework-reference/core.html#aop-pointcuts-designators).\r\n\r\nIf you want to use those designators, you need to activate [AspectJ via LTW (load-time weaving)](https://docs.spring.io/spring-framework/docs/current/spring-framework-reference/core.html#aop-using-aspectj).\r\n\r\nA workaround for Spring AOP would be to simply use a regular `if` at the beginning of your advice method and, if there are no specific reasons for using `call()`, use `execution()` instead, which is what most people want anyway. I am not going to elaborate about the difference between call and execution joinpoints here, but you can e.g. consult [my answer there](https://stackoverflow.com/a/18149106/1082681) for more information.\r\n\r\n---\r\n\r\n**Update:** There are other things which look a little bit strange in your code snippet, but what I explained is the biggest issue for now.","title":"AOP AspectJ Pointcut if() throwing ArrayIndexOutOfBoundsException:","body":"<p>After having verified that you use Spring AOP,  the answer is indeed that both <code>if()</code> and <code>call()</code> are not supported, see also the Spring manual section about <a href=\"https://docs.spring.io/spring-framework/docs/current/spring-framework-reference/core.html#aop-pointcuts-designators\" rel=\"nofollow noreferrer\">pointcut designators</a>.</p>\n<p>If you want to use those designators, you need to activate <a href=\"https://docs.spring.io/spring-framework/docs/current/spring-framework-reference/core.html#aop-using-aspectj\" rel=\"nofollow noreferrer\">AspectJ via LTW (load-time weaving)</a>.</p>\n<p>A workaround for Spring AOP would be to simply use a regular <code>if</code> at the beginning of your advice method and, if there are no specific reasons for using <code>call()</code>, use <code>execution()</code> instead, which is what most people want anyway. I am not going to elaborate about the difference between call and execution joinpoints here, but you can e.g. consult <a href=\"https://stackoverflow.com/a/18149106/1082681\">my answer there</a> for more information.</p>\n<hr />\n<p><strong>Update:</strong> There are other things which look a little bit strange in your code snippet, but what I explained is the biggest issue for now.</p>\n"}],"owner":{"account_id":17186888,"reputation":43,"user_id":12441349,"display_name":"Raghu"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":309,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":64493239,"answer_count":1,"score":0,"last_activity_date":1640057890,"creation_date":1603407860,"question_id":64491694,"body_markdown":"I am trying to write an Aspect, trying to implement Pointcut&#39;s if() condition but receiving ArrayIndexOutOfBoundsException. here is the code snippet.\r\n\r\n    @Pointcut(&quot;call(* com.aop.Service.activate(..)) &amp;&amp; args(iActivate,..) &amp;&amp; if()&quot;)\r\n    \tpublic static boolean saveActivate(Activate iActivate) {\r\n    \t\treturn true; //if false @before she not be invoked\r\n    \t};\r\n\r\n    @Before(&quot;saveActivate(iActivate)&quot;)\r\n\t    public void saveActivateBefore(JoinPoint ijoinPoint, ActivateInstallmentRequest iActivateInstallmentRequest) {\r\n            System.out.println(&quot;Log from @before&quot;);    \r\n    }\r\n\r\nThis code is giving me below exception:\r\n\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;objectMapperConfigurer&#39; defined in class path resource [springfox/documentation/spring/web/SpringfoxWebMvcConfiguration.class]: Initialization of bean failed; nested exception is java.lang.ArrayIndexOutOfBoundsException: Index 1 out of bounds for length 1\r\n\r\nCan Someone help me what I&#39;m missing here?\r\nPS: I have also referred [AspectJ][1].\r\n\r\n\r\n  [1]: https://www.eclipse.org/aspectj/doc/next/adk15notebook/ataspectj-pcadvice.html#d0e3697","title":"AOP AspectJ Pointcut if() throwing ArrayIndexOutOfBoundsException:","body":"<p>I am trying to write an Aspect, trying to implement Pointcut's if() condition but receiving ArrayIndexOutOfBoundsException. here is the code snippet.</p>\n<pre><code>@Pointcut(&quot;call(* com.aop.Service.activate(..)) &amp;&amp; args(iActivate,..) &amp;&amp; if()&quot;)\n    public static boolean saveActivate(Activate iActivate) {\n        return true; //if false @before she not be invoked\n    };\n\n@Before(&quot;saveActivate(iActivate)&quot;)\n    public void saveActivateBefore(JoinPoint ijoinPoint, ActivateInstallmentRequest iActivateInstallmentRequest) {\n        System.out.println(&quot;Log from @before&quot;);    \n}\n</code></pre>\n<p>This code is giving me below exception:</p>\n<pre><code>Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'objectMapperConfigurer' defined in class path resource [springfox/documentation/spring/web/SpringfoxWebMvcConfiguration.class]: Initialization of bean failed; nested exception is java.lang.ArrayIndexOutOfBoundsException: Index 1 out of bounds for length 1\n</code></pre>\n<p>Can Someone help me what I'm missing here?\nPS: I have also referred <a href=\"https://www.eclipse.org/aspectj/doc/next/adk15notebook/ataspectj-pcadvice.html#d0e3697\" rel=\"nofollow noreferrer\">AspectJ</a>.</p>\n"},{"tags":["java","spring","spring-boot","aspectj","spring-aop"],"comments":[{"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"score":0,"creation_date":1631875168,"post_id":69221447,"comment_id":122347190,"body_markdown":"I am curious as to why you think its AOP that is causing it problems?  Perhaps include the stacktrace, and code of how you are creating ConfigurationProperties using record","body":"I am curious as to why you think its AOP that is causing it problems?  Perhaps include the stacktrace, and code of how you are creating ConfigurationProperties using record"},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1631878680,"post_id":69221447,"comment_id":122348689,"body_markdown":"Without seeing your actual classes this would be quite impossible to answer, but I suspect you also have something like `@Valid` on there or using JSR-330 for validation of properties. So please add some code as currently I would say there is too little information to answer this question.","body":"Without seeing your actual classes this would be quite impossible to answer, but I suspect you also have something like <code>@Valid</code> on there or using JSR-330 for validation of properties. So please add some code as currently I would say there is too little information to answer this question."},{"owner":{"account_id":971515,"reputation":1711,"user_id":994006,"accept_rate":75,"display_name":"Nice Books"},"score":0,"creation_date":1631952818,"post_id":69221447,"comment_id":122366473,"body_markdown":"Is this even possible ?","body":"Is this even possible ?"},{"owner":{"account_id":19914056,"reputation":53,"user_id":14591481,"display_name":"Viktor Magyari"},"score":0,"creation_date":1632141263,"post_id":69221447,"comment_id":122405413,"body_markdown":"@M.Deinum added an mcve, see my latest edit","body":"@M.Deinum added an mcve, see my latest edit"},{"owner":{"account_id":1473276,"reputation":110999,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"score":1,"creation_date":1632144968,"post_id":69221447,"comment_id":122406968,"body_markdown":"Your pointcut is applying too broadly. My AspectJ is a little rusty, but I suspect that you want `@within` rather than `@target`.","body":"Your pointcut is applying too broadly. My AspectJ is a little rusty, but I suspect that you want <code>@within</code> rather than <code>@target</code>."},{"owner":{"account_id":19914056,"reputation":53,"user_id":14591481,"display_name":"Viktor Magyari"},"score":0,"creation_date":1632147151,"post_id":69221447,"comment_id":122407921,"body_markdown":"@AndyWilkinson I just realized I missed an `&amp;&amp;`, but still: I have both within (my domain) and @target (so that it only applies to @Service annotated classes). Why would that apply to a @ConfigurationProperties?","body":"@AndyWilkinson I just realized I missed an <code>&amp;&amp;</code>, but still: I have both within (my domain) and @target (so that it only applies to @Service annotated classes). Why would that apply to a @ConfigurationProperties?"},{"owner":{"account_id":1473276,"reputation":110999,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"score":0,"creation_date":1632148427,"post_id":69221447,"comment_id":122408539,"body_markdown":"Your existing `within` is fine. It&#39;s `@target` that I think should be `@within`, making the whole pointcut `&quot;within(foo.bar..*) &amp;&amp; @within(org.springframework.stereotype.Service)&quot;`","body":"Your existing <code>within</code> is fine. It&#39;s <code>@target</code> that I think should be <code>@within</code>, making the whole pointcut <code>&quot;within(foo.bar..*) &amp;&amp; @within(org.springframework.stereotype.Service)&quot;</code>"},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1634718394,"post_id":69221447,"comment_id":123097472,"body_markdown":"@ViktorMagyari, how about some feedback to my answer? I solved your problem a week ago.","body":"@ViktorMagyari, how about some feedback to my answer? I solved your problem a week ago."},{"owner":{"account_id":19914056,"reputation":53,"user_id":14591481,"display_name":"Viktor Magyari"},"score":0,"creation_date":1634807541,"post_id":69221447,"comment_id":123127052,"body_markdown":"@kriegaex hey, i&#39;m sure your solution works as well, but I simply ended up dropping the first `@within`, thus not restricting it to my domain (hopefully the spring internals do not define any services..). So the end result is simply `@within(org.springframework.stereotype.Service)`.","body":"@kriegaex hey, i&#39;m sure your solution works as well, but I simply ended up dropping the first <code>@within</code>, thus not restricting it to my domain (hopefully the spring internals do not define any services..). So the end result is simply <code>@within(org.springframework.stereotype.Service)</code>."}],"answers":[{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1634205058,"creation_date":1634205058,"answer_id":69568585,"question_id":69221447,"body_markdown":"I cloned your [MCVE](https://stackoverflow.com/help/mcve) repository. Thanks, that was helpful.\r\n\r\nPlease note that Java records are implicitly final. Therefore, Spring AOP cannot subclass them in order to create dynamic proxies.\r\n\r\nYou need to change\r\n\r\n```java\r\n@Pointcut(&quot;within(foo.bar..*) @target(org.springframework.stereotype.Service)&quot;)\r\n```\r\n\r\n(please also note the syntax error, missing `&amp;&amp;`) to\r\n\r\n```java\r\n@Pointcut(\r\n  &quot;within(foo.bar..*) &amp;&amp; &quot; +\r\n  &quot;@target(org.springframework.stereotype.Service) &amp;&amp; &quot; +\r\n  &quot;!@within(org.springframework.boot.context.properties.ConfigurationProperties)&quot;\r\n)\r\n```\r\n\r\nI just added a few line breaks in order to make the pointcut more readable.","title":"Spring is trying to subclass a record component when aop is present","body":"<p>I cloned your <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> repository. Thanks, that was helpful.</p>\n<p>Please note that Java records are implicitly final. Therefore, Spring AOP cannot subclass them in order to create dynamic proxies.</p>\n<p>You need to change</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Pointcut(&quot;within(foo.bar..*) @target(org.springframework.stereotype.Service)&quot;)\n</code></pre>\n<p>(please also note the syntax error, missing <code>&amp;&amp;</code>) to</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Pointcut(\n  &quot;within(foo.bar..*) &amp;&amp; &quot; +\n  &quot;@target(org.springframework.stereotype.Service) &amp;&amp; &quot; +\n  &quot;!@within(org.springframework.boot.context.properties.ConfigurationProperties)&quot;\n)\n</code></pre>\n<p>I just added a few line breaks in order to make the pointcut more readable.</p>\n"}],"owner":{"account_id":19914056,"reputation":53,"user_id":14591481,"display_name":"Viktor Magyari"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":879,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":69568585,"answer_count":1,"score":1,"last_activity_date":1640057860,"creation_date":1631872790,"question_id":69221447,"body_markdown":"I have a spring boot application in which I make use of aspects. Recently, I tried converting my `@ConfigurationProperties` classes to java records, but it fails with `&quot;Cannot subclass final class {..}Properties&quot;`. It seems spring is trying to make cglib proxies for my records, which obviously fail. Is there any way to tell spring not to make proxies for specific classes?\r\n\r\nEdit:\r\n\r\nThe properties:\r\n\r\n    @ConfigurationProperties(prefix = &quot;foo.bar&quot;)\r\n    public record MyProperties(String a,\r\n                               String b) {\r\n    \r\n    }\r\n\r\nStacktrace:\r\n\r\n    Caused by: org.springframework.aop.framework.AopConfigException: Could not generate CGLIB subclass of class {...}.MyProperties: Common causes of this problem include using a final class or a non-visible class; nested exception is java.lang.IllegalArgumentException: Cannot subclass final class {...}.MyProperties\r\n\tat org.springframework.aop.framework.CglibAopProxy.getProxy(CglibAopProxy.java:209)\r\n\tat org.springframework.aop.framework.ProxyFactory.getProxy(ProxyFactory.java:110)\r\n\tat org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.createProxy(AbstractAutoProxyCreator.java:478)\r\n\tat org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.wrapIfNecessary(AbstractAutoProxyCreator.java:342)\r\n\tat org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.postProcessAfterInitialization(AbstractAutoProxyCreator.java:291)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsAfterInitialization(AbstractAutowireCapableBeanFactory.java:437)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1790)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:602)\r\n\t... 48 common frames omitted\r\n    Caused by: java.lang.IllegalArgumentException: Cannot subclass final class {...}.MyProperties\r\n\tat org.springframework.cglib.proxy.Enhancer.generateClass(Enhancer.java:660)\r\n\tat org.springframework.cglib.core.DefaultGeneratorStrategy.generate(DefaultGeneratorStrategy.java:25)\r\n\tat org.springframework.cglib.core.ClassLoaderAwareGeneratorStrategy.generate(ClassLoaderAwareGeneratorStrategy.java:57)\r\n\tat org.springframework.cglib.core.AbstractClassGenerator.generate(AbstractClassGenerator.java:358)\r\n\tat org.springframework.cglib.proxy.Enhancer.generate(Enhancer.java:585)\r\n\tat org.springframework.cglib.core.AbstractClassGenerator$ClassLoaderData.get(AbstractClassGenerator.java:131)\r\n\tat org.springframework.cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:319)\r\n\tat org.springframework.cglib.proxy.Enhancer.createHelper(Enhancer.java:572)\r\n\tat org.springframework.cglib.proxy.Enhancer.createClass(Enhancer.java:419)\r\n\tat org.springframework.aop.framework.ObjenesisCglibAopProxy.createProxyClassAndInstance(ObjenesisCglibAopProxy.java:57)\r\n\tat org.springframework.aop.framework.CglibAopProxy.getProxy(CglibAopProxy.java:206)\r\n\t... 55 common frames omitted\r\n\r\nEdit 2: A minimal, reproducible example: https://github.com/moxaj/aspect-mcve-2","title":"Spring is trying to subclass a record component when aop is present","body":"<p>I have a spring boot application in which I make use of aspects. Recently, I tried converting my <code>@ConfigurationProperties</code> classes to java records, but it fails with <code>&quot;Cannot subclass final class {..}Properties&quot;</code>. It seems spring is trying to make cglib proxies for my records, which obviously fail. Is there any way to tell spring not to make proxies for specific classes?</p>\n<p>Edit:</p>\n<p>The properties:</p>\n<pre><code>@ConfigurationProperties(prefix = &quot;foo.bar&quot;)\npublic record MyProperties(String a,\n                           String b) {\n\n}\n</code></pre>\n<p>Stacktrace:</p>\n<pre><code>Caused by: org.springframework.aop.framework.AopConfigException: Could not generate CGLIB subclass of class {...}.MyProperties: Common causes of this problem include using a final class or a non-visible class; nested exception is java.lang.IllegalArgumentException: Cannot subclass final class {...}.MyProperties\nat org.springframework.aop.framework.CglibAopProxy.getProxy(CglibAopProxy.java:209)\nat org.springframework.aop.framework.ProxyFactory.getProxy(ProxyFactory.java:110)\nat org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.createProxy(AbstractAutoProxyCreator.java:478)\nat org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.wrapIfNecessary(AbstractAutoProxyCreator.java:342)\nat org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.postProcessAfterInitialization(AbstractAutoProxyCreator.java:291)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsAfterInitialization(AbstractAutowireCapableBeanFactory.java:437)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1790)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:602)\n... 48 common frames omitted\nCaused by: java.lang.IllegalArgumentException: Cannot subclass final class {...}.MyProperties\nat org.springframework.cglib.proxy.Enhancer.generateClass(Enhancer.java:660)\nat org.springframework.cglib.core.DefaultGeneratorStrategy.generate(DefaultGeneratorStrategy.java:25)\nat org.springframework.cglib.core.ClassLoaderAwareGeneratorStrategy.generate(ClassLoaderAwareGeneratorStrategy.java:57)\nat org.springframework.cglib.core.AbstractClassGenerator.generate(AbstractClassGenerator.java:358)\nat org.springframework.cglib.proxy.Enhancer.generate(Enhancer.java:585)\nat org.springframework.cglib.core.AbstractClassGenerator$ClassLoaderData.get(AbstractClassGenerator.java:131)\nat org.springframework.cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:319)\nat org.springframework.cglib.proxy.Enhancer.createHelper(Enhancer.java:572)\nat org.springframework.cglib.proxy.Enhancer.createClass(Enhancer.java:419)\nat org.springframework.aop.framework.ObjenesisCglibAopProxy.createProxyClassAndInstance(ObjenesisCglibAopProxy.java:57)\nat org.springframework.aop.framework.CglibAopProxy.getProxy(CglibAopProxy.java:206)\n... 55 common frames omitted\n</code></pre>\n<p>Edit 2: A minimal, reproducible example: <a href=\"https://github.com/moxaj/aspect-mcve-2\" rel=\"nofollow noreferrer\">https://github.com/moxaj/aspect-mcve-2</a></p>\n"},{"tags":["java","spring","spring-boot","aspectj","spring-aop"],"comments":[{"owner":{"account_id":5278004,"reputation":6696,"user_id":4214241,"display_name":"R.G"},"score":0,"creation_date":1631789761,"post_id":69207046,"comment_id":122320040,"body_markdown":"Could you try with the complete path of the annotation in the pointcut expression . example : `@annotation(xxx.yyy.abc.AJTest)`","body":"Could you try with the complete path of the annotation in the pointcut expression . example : <code>@annotation(xxx.yyy.abc.AJTest)</code>"},{"owner":{"account_id":11501917,"reputation":105,"user_id":8429488,"display_name":"Yegor Saliev"},"score":0,"creation_date":1631789958,"post_id":69207046,"comment_id":122320109,"body_markdown":"all classes in the same package, but it is not working aswell\n`@Pointcut(&quot;@annotation(com.test.company.AJTest)&quot;)`","body":"all classes in the same package, but it is not working aswell <code>@Pointcut(&quot;@annotation(com.test.company.AJTest)&quot;)</code>"},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1631796460,"post_id":69207046,"comment_id":122323032,"body_markdown":"How are you running this? You have multiple configuration? How are those loaded? Is this Spring Boot or plain Spring or ... For `@AspectJ` you also need to `@EnableAspectJAutoProxy` on your configuration (if this isn&#39;t a Spring Boot app).","body":"How are you running this? You have multiple configuration? How are those loaded? Is this Spring Boot or plain Spring or ... For <code>@AspectJ</code> you also need to <code>@EnableAspectJAutoProxy</code> on your configuration (if this isn&#39;t a Spring Boot app)."},{"owner":{"account_id":11501917,"reputation":105,"user_id":8429488,"display_name":"Yegor Saliev"},"score":0,"creation_date":1631796657,"post_id":69207046,"comment_id":122323139,"body_markdown":"This is spring-boot demo project for the example with 1 endpoint","body":"This is spring-boot demo project for the example with 1 endpoint"},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1631796754,"post_id":69207046,"comment_id":122323182,"body_markdown":"Please include the packages in your sources and include your `@SpringBootApplication` annotated class.","body":"Please include the packages in your sources and include your <code>@SpringBootApplication</code> annotated class."},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1631874764,"post_id":69207046,"comment_id":122347022,"body_markdown":"You talk about AspectJ vs. Spring AOP. To me it looks as if you use Spring AOP in both cases, just a full-blown aspect in one case and an advisor in the other case. If you want to convince me that you use native AspectJ, please explain how you weave the aspect: compile-time or load-time weaving? I guess, an [MCVE](https://stackoverflow.com/help/mcve) on GitHub would be the easiest way to make your problem reproducible and help other to analyse the situation instead of relying on textual descriptions only.","body":"You talk about AspectJ vs. Spring AOP. To me it looks as if you use Spring AOP in both cases, just a full-blown aspect in one case and an advisor in the other case. If you want to convince me that you use native AspectJ, please explain how you weave the aspect: compile-time or load-time weaving? I guess, an <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> on GitHub would be the easiest way to make your problem reproducible and help other to analyse the situation instead of relying on textual descriptions only."}],"answers":[{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1631877301,"creation_date":1631877301,"answer_id":69222513,"question_id":69207046,"body_markdown":"Your interceptor does not proceed correctly. Please read the `MethodInterceptor` javadoc. The interceptor should look like this:\r\n\r\n```java\r\npublic class SAOPInterceptor implements MethodInterceptor {\r\n  @Override\r\n  public Object invoke(MethodInvocation methodInvocation) throws Throwable {\r\n    System.out.println(&quot;Number of parameters &quot; + methodInvocation.getArguments().length);\r\n    return methodInvocation.proceed();\r\n  }\r\n}\r\n```\r\n\r\nBesides, your aspect calculates time wrong, too. First, you say `finish = System.currentTimeMillis() - start` and later you print `start - finish`. Either you should subtract `finish - start` or calculate the time spent in the variable, but not both and not `start - finish`. Why not simply `System.out.println(&quot;Method execution time: &quot; + (System.currentTimeMillis() - start));`?","title":"Spring AOP and AspectJ on same method","body":"<p>Your interceptor does not proceed correctly. Please read the <code>MethodInterceptor</code> javadoc. The interceptor should look like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class SAOPInterceptor implements MethodInterceptor {\n  @Override\n  public Object invoke(MethodInvocation methodInvocation) throws Throwable {\n    System.out.println(&quot;Number of parameters &quot; + methodInvocation.getArguments().length);\n    return methodInvocation.proceed();\n  }\n}\n</code></pre>\n<p>Besides, your aspect calculates time wrong, too. First, you say <code>finish = System.currentTimeMillis() - start</code> and later you print <code>start - finish</code>. Either you should subtract <code>finish - start</code> or calculate the time spent in the variable, but not both and not <code>start - finish</code>. Why not simply <code>System.out.println(&quot;Method execution time: &quot; + (System.currentTimeMillis() - start));</code>?</p>\n"}],"owner":{"account_id":11501917,"reputation":105,"user_id":8429488,"display_name":"Yegor Saliev"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1192,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69222513,"answer_count":1,"score":0,"last_activity_date":1640057801,"creation_date":1631789161,"question_id":69207046,"body_markdown":"I have a question about using aspectJ and spring aop method intercepting. I created 2 annotations: `@AJTest` and `@SAOPTest`.\r\n\r\n\r\n    package com.test.company;\r\n\r\n    import org.aspectj.lang.ProceedingJoinPoint;\r\n    import org.aspectj.lang.annotation.Around;\r\n    import org.aspectj.lang.annotation.Aspect;\r\n    import org.aspectj.lang.annotation.Pointcut;\r\n    \r\n    @Aspect\r\n    public class AJTestAspect {\r\n    \r\n        @Pointcut(&quot;@annotation(AJTest)&quot;)\r\n        public void aJTest() {\r\n        }\r\n    \r\n        @Around(&quot;aJTest()&quot;)\r\n        public Object profile(ProceedingJoinPoint joinPoint) throws Throwable {\r\n            final long start = System.currentTimeMillis();\r\n            try {\r\n                return joinPoint.proceed();\r\n            } finally {\r\n                long finish = System.currentTimeMillis() - start;\r\n                System.out.println(&quot;Method execution time: &quot; + (start - finish));\r\n            }\r\n        }\r\n    }\r\n\r\nregistered it\r\n\r\n    package com.test.company;\r\n\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    \r\n    @Configuration\r\n    public class AJConfiguration {\r\n    \r\n        @Bean\r\n        public AJTestAspect ajTestAspect() {\r\n            return new AJTestAspect();\r\n        }\r\n    }\r\n\r\nand other\r\n\r\n    package com.test.company;\r\n\r\n    import org.aopalliance.intercept.MethodInterceptor;\r\n    import org.aopalliance.intercept.MethodInvocation;\r\n    \r\n    public class SAOPInterceptor implements MethodInterceptor {\r\n    \r\n        @Override\r\n        public Object invoke(MethodInvocation methodInvocation) throws Throwable {\r\n            System.out.println(&quot;Number of parameters &quot; + methodInvocation.getArguments().length);\r\n            return methodInvocation.getMethod().invoke(methodInvocation.getThis(), methodInvocation.getArguments());\r\n        }\r\n    }\r\n\r\nand register it\r\n\r\n    package com.test.company;\r\n\r\n    import org.springframework.aop.Advisor;\r\n    import org.springframework.aop.aspectj.AspectJExpressionPointcut;\r\n    import org.springframework.aop.support.DefaultPointcutAdvisor;\r\n    import org.springframework.boot.context.properties.EnableConfigurationProperties;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    \r\n    @Configuration\r\n    @EnableConfigurationProperties\r\n    public class SpringSAOPTestConfiguration {\r\n    \r\n        @Bean\r\n        public Advisor springAopTestAdvisor() {\r\n            AspectJExpressionPointcut pointcut = new AspectJExpressionPointcut();\r\n            pointcut.setExpression(&quot;@annotation(com.test.company.SAOPTest)&quot;);\r\n            return new DefaultPointcutAdvisor(pointcut, new SAOPInterceptor());\r\n        }\r\n    }\r\n\r\nand added it to my method in controller\r\n\r\n    package com.test.company;\r\n    \r\n    import org.springframework.web.bind.annotation.GetMapping;\r\n    import org.springframework.web.bind.annotation.RequestParam;\r\n    import org.springframework.web.bind.annotation.RestController;\r\n    \r\n        @RestController\r\n        public class TestController {\r\n        \r\n            @SAOPTest\r\n            @AJTest\r\n            @GetMapping(&quot;/test&quot;)\r\n            public String doSomething(@RequestParam(&quot;firstParam&quot;) String firstParam, @RequestParam(&quot;secondParam&quot;) Integer secondParam) throws InterruptedException {\r\n                Thread.sleep(2_500);\r\n                return firstParam + &quot; &quot; + secondParam;\r\n            }\r\n        }\r\n\r\nApplication class\r\n\r\n    package com.test.company;\r\n    \r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    import org.springframework.context.annotation.EnableAspectJAutoProxy;\r\n    \r\n    @EnableAspectJAutoProxy\r\n    @SpringBootApplication\r\n    public class AopTestApplication {\r\n        public static void main(String[] args) {\r\n            SpringApplication.run(AopTestApplication.class, args);\r\n        }\r\n    }\r\n\r\nbut when i call it by `http://localhost:8080/test?firstParam=test&amp;secondParam=2` i can&#39;t see message with time of execution of the method, but can see how many parameters were passed to the method. If I&#39;ll remove `@SAOPTest` - method time of execution is worked as expected, but it is not working with both annotations. Is it the problem with proxy object created by spring, or I missed something?","title":"Spring AOP and AspectJ on same method","body":"<p>I have a question about using aspectJ and spring aop method intercepting. I created 2 annotations: <code>@AJTest</code> and <code>@SAOPTest</code>.</p>\n<pre><code>package com.test.company;\n\nimport org.aspectj.lang.ProceedingJoinPoint;\nimport org.aspectj.lang.annotation.Around;\nimport org.aspectj.lang.annotation.Aspect;\nimport org.aspectj.lang.annotation.Pointcut;\n\n@Aspect\npublic class AJTestAspect {\n\n    @Pointcut(&quot;@annotation(AJTest)&quot;)\n    public void aJTest() {\n    }\n\n    @Around(&quot;aJTest()&quot;)\n    public Object profile(ProceedingJoinPoint joinPoint) throws Throwable {\n        final long start = System.currentTimeMillis();\n        try {\n            return joinPoint.proceed();\n        } finally {\n            long finish = System.currentTimeMillis() - start;\n            System.out.println(&quot;Method execution time: &quot; + (start - finish));\n        }\n    }\n}\n</code></pre>\n<p>registered it</p>\n<pre><code>package com.test.company;\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\npublic class AJConfiguration {\n\n    @Bean\n    public AJTestAspect ajTestAspect() {\n        return new AJTestAspect();\n    }\n}\n</code></pre>\n<p>and other</p>\n<pre><code>package com.test.company;\n\nimport org.aopalliance.intercept.MethodInterceptor;\nimport org.aopalliance.intercept.MethodInvocation;\n\npublic class SAOPInterceptor implements MethodInterceptor {\n\n    @Override\n    public Object invoke(MethodInvocation methodInvocation) throws Throwable {\n        System.out.println(&quot;Number of parameters &quot; + methodInvocation.getArguments().length);\n        return methodInvocation.getMethod().invoke(methodInvocation.getThis(), methodInvocation.getArguments());\n    }\n}\n</code></pre>\n<p>and register it</p>\n<pre><code>package com.test.company;\n\nimport org.springframework.aop.Advisor;\nimport org.springframework.aop.aspectj.AspectJExpressionPointcut;\nimport org.springframework.aop.support.DefaultPointcutAdvisor;\nimport org.springframework.boot.context.properties.EnableConfigurationProperties;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\n@EnableConfigurationProperties\npublic class SpringSAOPTestConfiguration {\n\n    @Bean\n    public Advisor springAopTestAdvisor() {\n        AspectJExpressionPointcut pointcut = new AspectJExpressionPointcut();\n        pointcut.setExpression(&quot;@annotation(com.test.company.SAOPTest)&quot;);\n        return new DefaultPointcutAdvisor(pointcut, new SAOPInterceptor());\n    }\n}\n</code></pre>\n<p>and added it to my method in controller</p>\n<pre><code>package com.test.company;\n\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestParam;\nimport org.springframework.web.bind.annotation.RestController;\n\n    @RestController\n    public class TestController {\n    \n        @SAOPTest\n        @AJTest\n        @GetMapping(&quot;/test&quot;)\n        public String doSomething(@RequestParam(&quot;firstParam&quot;) String firstParam, @RequestParam(&quot;secondParam&quot;) Integer secondParam) throws InterruptedException {\n            Thread.sleep(2_500);\n            return firstParam + &quot; &quot; + secondParam;\n        }\n    }\n</code></pre>\n<p>Application class</p>\n<pre><code>package com.test.company;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.annotation.EnableAspectJAutoProxy;\n\n@EnableAspectJAutoProxy\n@SpringBootApplication\npublic class AopTestApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(AopTestApplication.class, args);\n    }\n}\n</code></pre>\n<p>but when i call it by <code>http://localhost:8080/test?firstParam=test&amp;secondParam=2</code> i can't see message with time of execution of the method, but can see how many parameters were passed to the method. If I'll remove <code>@SAOPTest</code> - method time of execution is worked as expected, but it is not working with both annotations. Is it the problem with proxy object created by spring, or I missed something?</p>\n"},{"tags":["java","spring","spring-boot","aspectj","spring-aop"],"comments":[{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1618291366,"post_id":67051840,"comment_id":118550398,"body_markdown":"Remove `JoinPoint` from your `@Pointcut` annotated method.","body":"Remove <code>JoinPoint</code> from your <code>@Pointcut</code> annotated method."},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1619152875,"post_id":67051840,"comment_id":118823742,"body_markdown":"@Power_tile, please be so polite as to provide feedback to the comments and answers other users spent time on writing for your benefit here. Ideally, accept an adequate answer of your own choice. Thank you.","body":"@Power_tile, please be so polite as to provide feedback to the comments and answers other users spent time on writing for your benefit here. Ideally, accept an adequate answer of your own choice. Thank you."}],"answers":[{"tags":[],"owner":{"account_id":20782891,"reputation":439,"user_id":15262845,"display_name":"justthink"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1618195075,"creation_date":1618195075,"answer_id":67052010,"question_id":67051840,"body_markdown":"Since you are working on a Springboot-based project, I recommend you use Spring Security features or other authorization &amp; authentication frameworks such as Shiro.\r\n\r\nIf you wish to use none of them anyway, you can use `@ModelAttributes` in a super class to invoke a method before any controller method is invoked.\r\n\r\n```java\r\n@Controller\r\npublic class ExampleController extends BaseController {...}\r\n```\r\n```java\r\npublic class BaseController {\r\n    @ModelAttribute\r\n    public void invokeBefore(HttpServletRequest request,\r\n                        HttpServletResponse response) {\r\n         // Check the auth info (e.g., Authorization header) of the request.\r\n    }\r\n}\r\n```\r\n\r\nBesides, to my experience, it is a bad practice to directly use `@Pointcut` in a SpringBoot application. Use a [customized Spring annotation][1] instead.\r\n\r\n\r\n  [1]: https://www.baeldung.com/spring-aop-annotation","title":"Spring AOP @Pointcut and @Before yields IllegalArgumentException: error at ::0 formal unbound in pointcut","body":"<p>Since you are working on a Springboot-based project, I recommend you use Spring Security features or other authorization &amp; authentication frameworks such as Shiro.</p>\n<p>If you wish to use none of them anyway, you can use <code>@ModelAttributes</code> in a super class to invoke a method before any controller method is invoked.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Controller\npublic class ExampleController extends BaseController {...}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class BaseController {\n    @ModelAttribute\n    public void invokeBefore(HttpServletRequest request,\n                        HttpServletResponse response) {\n         // Check the auth info (e.g., Authorization header) of the request.\n    }\n}\n</code></pre>\n<p>Besides, to my experience, it is a bad practice to directly use <code>@Pointcut</code> in a SpringBoot application. Use a <a href=\"https://www.baeldung.com/spring-aop-annotation\" rel=\"nofollow noreferrer\">customized Spring annotation</a> instead.</p>\n"},{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1618338016,"creation_date":1618285318,"answer_id":67068434,"question_id":67051840,"body_markdown":"The problem is that you define a `JoinPoint` parameter in the pointcut. It only belongs in the advice method using the pointcut, not in the pointcut itself. You are not using it there anyway because a pointcut is never executed, the method is just a dummy to be decorated by the `@Poinctut` annotation. So what you want is this:\r\n\r\n```java\r\n@Pointcut(&quot;execution(* show.xianwu.game.frisbeescorer.controller.*.*(..))&quot;)\r\npublic void validateLogin() {\r\n    // check the login information\r\n}\r\n```\r\n\r\nBesides (and unrelated to your problem), the `.*.*` is quite specific and only matches a method in a class which is exactly in package `show.xianwu.game.frisbeescorer.controller`. If you want to also include classes in subpackages, use the `..` syntax instead, in this case `show.xianwu.game.frisbeescorer.controller..*`.","title":"Spring AOP @Pointcut and @Before yields IllegalArgumentException: error at ::0 formal unbound in pointcut","body":"<p>The problem is that you define a <code>JoinPoint</code> parameter in the pointcut. It only belongs in the advice method using the pointcut, not in the pointcut itself. You are not using it there anyway because a pointcut is never executed, the method is just a dummy to be decorated by the <code>@Poinctut</code> annotation. So what you want is this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Pointcut(&quot;execution(* show.xianwu.game.frisbeescorer.controller.*.*(..))&quot;)\npublic void validateLogin() {\n    // check the login information\n}\n</code></pre>\n<p>Besides (and unrelated to your problem), the <code>.*.*</code> is quite specific and only matches a method in a class which is exactly in package <code>show.xianwu.game.frisbeescorer.controller</code>. If you want to also include classes in subpackages, use the <code>..</code> syntax instead, in this case <code>show.xianwu.game.frisbeescorer.controller..*</code>.</p>\n"}],"owner":{"account_id":15008191,"reputation":608,"user_id":10833496,"display_name":"Power_tile"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":389,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":67068434,"answer_count":2,"score":1,"last_activity_date":1640057676,"creation_date":1618193245,"question_id":67051840,"body_markdown":"I am doing a springboot project that includes login and accounts. I am trying to ```@Pointcut``` all controller method calls and validate the login information, and ```@Before``` the pointcut to make sure the session exists. Hence the code:\r\n\r\n```java\r\n@Aspect\r\n@Component\r\npublic class AuthAspect {\r\n    Logger logger = LoggerFactory.getLogger(AuthAspect.class);\r\n\r\n    @Pointcut(&quot;execution(* show.xianwu.game.frisbeescorer.controller.*.*(..))&quot;)\r\n    public void validateLogin(JoinPoint joinPoint) {\r\n        // check the login information\r\n    }\r\n\r\n    @Before(&quot;validateLogin()&quot;)\r\n    public void validateSession(JoinPoint joinPoint) {\r\n        // check the session\r\n    }\r\n}\r\n```\r\n\r\nHowever, this yields ```org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;projectingArgumentResolverBeanPostProcessor&#39; defined in class path resource [org/springframework/data/web/config/ProjectingArgumentResolverRegistrar.class]: \r\nBeanPostProcessor before instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration&#39;: Initialization of bean failed; nested exception is java.lang.IllegalArgumentException: error at ::0 formal unbound in pointcut```.\r\n\r\nDeleting the ```validateSession()``` and ```@Before``` makes the ```@Pointcut``` work. How can I fix this?","title":"Spring AOP @Pointcut and @Before yields IllegalArgumentException: error at ::0 formal unbound in pointcut","body":"<p>I am doing a springboot project that includes login and accounts. I am trying to <code>@Pointcut</code> all controller method calls and validate the login information, and <code>@Before</code> the pointcut to make sure the session exists. Hence the code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Aspect\n@Component\npublic class AuthAspect {\n    Logger logger = LoggerFactory.getLogger(AuthAspect.class);\n\n    @Pointcut(&quot;execution(* show.xianwu.game.frisbeescorer.controller.*.*(..))&quot;)\n    public void validateLogin(JoinPoint joinPoint) {\n        // check the login information\n    }\n\n    @Before(&quot;validateLogin()&quot;)\n    public void validateSession(JoinPoint joinPoint) {\n        // check the session\n    }\n}\n</code></pre>\n<p>However, this yields <code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'projectingArgumentResolverBeanPostProcessor' defined in class path resource [org/springframework/data/web/config/ProjectingArgumentResolverRegistrar.class]:  BeanPostProcessor before instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration': Initialization of bean failed; nested exception is java.lang.IllegalArgumentException: error at ::0 formal unbound in pointcut</code>.</p>\n<p>Deleting the <code>validateSession()</code> and <code>@Before</code> makes the <code>@Pointcut</code> work. How can I fix this?</p>\n"},{"tags":["java","spring-boot","aspectj","spring-aop","spring-transactions"],"comments":[{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1628462894,"post_id":68701450,"comment_id":121420074,"body_markdown":"The transaction starts when the annotated method is entered (i.e. when calling `proceed()`) , not **before**. I am not a Spring user, but did you try to also make the aspect advice method transactional?","body":"The transaction starts when the annotated method is entered (i.e. when calling <code>proceed()</code>) , not <b>before</b>. I am not a Spring user, but did you try to also make the aspect advice method transactional?"}],"answers":[{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1628470118,"creation_date":1628468140,"answer_id":68705642,"question_id":68701450,"body_markdown":"Like I said in my comment, what your around advice does must be declared transactional too. You cannot do that directly, because `@Transactional` internally uses Spring AOP via dynamic proxies. However, Spring AOP aspects cannot be the target of other aspects. But you can simply create a new helper `@Component` which you delegate your advice&#39;s action to.\r\n\r\nLet us assume that the goal is to log the arguments of the `@Transactional` method targeted by your aspect. Then simply do this:\r\n\r\n```java\r\npackage com.example.managingtransactions;\r\n\r\nimport org.aspectj.lang.ProceedingJoinPoint;\r\nimport org.aspectj.lang.annotation.Around;\r\nimport org.aspectj.lang.annotation.Aspect;\r\nimport org.aspectj.lang.annotation.Pointcut;\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Component;\r\n\r\n@Aspect\r\n@Component\r\npublic class TxLogAspect {\r\n  private final static Logger logger = LoggerFactory.getLogger(TxLogAspect.class);\r\n\r\n  @Autowired\r\n  TxLogService txLogService;\r\n\r\n  @Pointcut(\r\n    &quot;@annotation(org.springframework.transaction.annotation.Transactional) &amp;&amp; &quot; +\r\n    &quot;!within(com.example.managingtransactions.TxLogService)&quot;\r\n  )\r\n  public void applicationServicePointcut() {}\r\n\r\n  @Around(&quot;applicationServicePointcut()&quot;)\r\n  public Object process(ProceedingJoinPoint joinPoint) throws Throwable {\r\n    logger.info(joinPoint.toString());\r\n    // Delegate to helper component in order to be able to use @Transactional\r\n    return txLogService.logToDB(joinPoint);\r\n  }\r\n}\r\n```\r\n\r\n```java\r\npackage com.example.managingtransactions;\r\n\r\nimport org.aspectj.lang.ProceedingJoinPoint;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.jdbc.core.JdbcTemplate;\r\nimport org.springframework.stereotype.Component;\r\nimport org.springframework.transaction.annotation.Transactional;\r\n\r\nimport java.util.Arrays;\r\nimport java.util.List;\r\n\r\n/**\r\n * Helper component to delegate aspect advice execution to in order to make the\r\n * advice transactional.\r\n * &lt;p&gt;\r\n * Aspect methods themselves cannot be @Transactional, because Spring AOP aspects\r\n * cannot be targeted by other aspects. Delegation is a simple and elegant\r\n * workaround.\r\n */\r\n@Component\r\npublic class TxLogService {\r\n  @Autowired\r\n  private JdbcTemplate jdbcTemplate;\r\n\r\n  @Transactional\r\n  public Object logToDB(ProceedingJoinPoint joinPoint) throws Throwable {\r\n    jdbcTemplate.update(\r\n      &quot;insert into TX_LOG(MESSAGE) values (?)&quot;,\r\n      Arrays.deepToString(joinPoint.getArgs())\r\n    );\r\n    return joinPoint.proceed();\r\n  }\r\n\r\n  public List&lt;String&gt; findAllTxLogs() {\r\n    return jdbcTemplate.query(\r\n      &quot;select MESSAGE from TX_LOG&quot;,\r\n      (rs, rowNum) -&gt; rs.getString(&quot;MESSAGE&quot;)\r\n    );\r\n  }\r\n}\r\n```\r\n\r\nSee? We are passing through the joinpoint instance to the helper component&#39;s own `@Transactional` method, which means that the transaction is started when entering that method and committed or rolled back depending on the result of `joinPoint.proceed()`. I.e. what the aspect helper writes to the DB itself will also be rolled back if something goes wrong in the aspect&#39;s target method.\r\n\r\nBTW, because I never used Spring transactions before, I simply took the example from https://spring.io/guides/gs/managing-transactions/ and added the two classes above. Before, I also added this to `schema.sql`:\r\n\r\n```sql\r\ncreate table TX_LOG(ID serial, MESSAGE varchar(255) NOT NULL);\r\n```\r\n\r\nNext, I added made sure that `TxLogService` is injected into `AppRunner`:\r\n\r\n```java\r\n  private final BookingService bookingService;\r\n  private final TxLogService txLogService;\r\n\r\n  public AppRunner(BookingService bookingService, TxLogService txLogger) {\r\n    this.bookingService = bookingService;\r\n    this.txLogService = txLogger;\r\n  }\r\n```\r\n\r\nIf then at the end of `AppRunner.run(String...)` you add these two statements\r\n\r\n```java\r\n    logger.info(&quot;BOOKINGS: &quot; + bookingService.findAllBookings().toString());\r\n    logger.info(&quot;TX_LOGS: &quot; + txLogService.findAllTxLogs().toString());\r\n```\r\n\r\nyou should see something like this at the end of the console log:\r\n\r\n```none\r\nc.e.managingtransactions.AppRunner       : BOOKINGS: [Alice, Bob, Carol]\r\nc.e.managingtransactions.AppRunner       : TX_LOGS: [[[Alice, Bob, Carol]]]\r\n```\r\n\r\nI.e. you see that only for the successful booking transaction a log message something was written to the DB, not for the two failed ones.","title":"Not able to rollback DB changes in Aspect in Spring boot application","body":"<p>Like I said in my comment, what your around advice does must be declared transactional too. You cannot do that directly, because <code>@Transactional</code> internally uses Spring AOP via dynamic proxies. However, Spring AOP aspects cannot be the target of other aspects. But you can simply create a new helper <code>@Component</code> which you delegate your advice's action to.</p>\n<p>Let us assume that the goal is to log the arguments of the <code>@Transactional</code> method targeted by your aspect. Then simply do this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.managingtransactions;\n\nimport org.aspectj.lang.ProceedingJoinPoint;\nimport org.aspectj.lang.annotation.Around;\nimport org.aspectj.lang.annotation.Aspect;\nimport org.aspectj.lang.annotation.Pointcut;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Component;\n\n@Aspect\n@Component\npublic class TxLogAspect {\n  private final static Logger logger = LoggerFactory.getLogger(TxLogAspect.class);\n\n  @Autowired\n  TxLogService txLogService;\n\n  @Pointcut(\n    &quot;@annotation(org.springframework.transaction.annotation.Transactional) &amp;&amp; &quot; +\n    &quot;!within(com.example.managingtransactions.TxLogService)&quot;\n  )\n  public void applicationServicePointcut() {}\n\n  @Around(&quot;applicationServicePointcut()&quot;)\n  public Object process(ProceedingJoinPoint joinPoint) throws Throwable {\n    logger.info(joinPoint.toString());\n    // Delegate to helper component in order to be able to use @Transactional\n    return txLogService.logToDB(joinPoint);\n  }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.managingtransactions;\n\nimport org.aspectj.lang.ProceedingJoinPoint;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.jdbc.core.JdbcTemplate;\nimport org.springframework.stereotype.Component;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.util.Arrays;\nimport java.util.List;\n\n/**\n * Helper component to delegate aspect advice execution to in order to make the\n * advice transactional.\n * &lt;p&gt;\n * Aspect methods themselves cannot be @Transactional, because Spring AOP aspects\n * cannot be targeted by other aspects. Delegation is a simple and elegant\n * workaround.\n */\n@Component\npublic class TxLogService {\n  @Autowired\n  private JdbcTemplate jdbcTemplate;\n\n  @Transactional\n  public Object logToDB(ProceedingJoinPoint joinPoint) throws Throwable {\n    jdbcTemplate.update(\n      &quot;insert into TX_LOG(MESSAGE) values (?)&quot;,\n      Arrays.deepToString(joinPoint.getArgs())\n    );\n    return joinPoint.proceed();\n  }\n\n  public List&lt;String&gt; findAllTxLogs() {\n    return jdbcTemplate.query(\n      &quot;select MESSAGE from TX_LOG&quot;,\n      (rs, rowNum) -&gt; rs.getString(&quot;MESSAGE&quot;)\n    );\n  }\n}\n</code></pre>\n<p>See? We are passing through the joinpoint instance to the helper component's own <code>@Transactional</code> method, which means that the transaction is started when entering that method and committed or rolled back depending on the result of <code>joinPoint.proceed()</code>. I.e. what the aspect helper writes to the DB itself will also be rolled back if something goes wrong in the aspect's target method.</p>\n<p>BTW, because I never used Spring transactions before, I simply took the example from <a href=\"https://spring.io/guides/gs/managing-transactions/\" rel=\"nofollow noreferrer\">https://spring.io/guides/gs/managing-transactions/</a> and added the two classes above. Before, I also added this to <code>schema.sql</code>:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>create table TX_LOG(ID serial, MESSAGE varchar(255) NOT NULL);\n</code></pre>\n<p>Next, I added made sure that <code>TxLogService</code> is injected into <code>AppRunner</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  private final BookingService bookingService;\n  private final TxLogService txLogService;\n\n  public AppRunner(BookingService bookingService, TxLogService txLogger) {\n    this.bookingService = bookingService;\n    this.txLogService = txLogger;\n  }\n</code></pre>\n<p>If then at the end of <code>AppRunner.run(String...)</code> you add these two statements</p>\n<pre class=\"lang-java prettyprint-override\"><code>    logger.info(&quot;BOOKINGS: &quot; + bookingService.findAllBookings().toString());\n    logger.info(&quot;TX_LOGS: &quot; + txLogService.findAllTxLogs().toString());\n</code></pre>\n<p>you should see something like this at the end of the console log:</p>\n<pre class=\"lang-none prettyprint-override\"><code>c.e.managingtransactions.AppRunner       : BOOKINGS: [Alice, Bob, Carol]\nc.e.managingtransactions.AppRunner       : TX_LOGS: [[[Alice, Bob, Carol]]]\n</code></pre>\n<p>I.e. you see that only for the successful booking transaction a log message something was written to the DB, not for the two failed ones.</p>\n"}],"owner":{"account_id":2043101,"reputation":4295,"user_id":1823822,"accept_rate":29,"display_name":"Joy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":418,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":68705642,"answer_count":1,"score":1,"last_activity_date":1640057526,"creation_date":1628430962,"question_id":68701450,"body_markdown":"I have written one aspect around a service class. In the aspect, I am doing some operation in the before section, which I would like to be rolled back if some exception occurs in the enclosed service method.\r\n\r\nThe service class is as follows:\r\n\r\n\r\n    @Service\r\n    @Transactional\r\n    class ServiceA {\r\n       ...\r\n       public void doSomething() {\r\n          ...\r\n       }\r\n       ...\r\n    }\r\n\r\nThe aspect is as follows:\r\n\r\n      @Aspect\r\n      @Order(2)\r\n      public class TcStateManagementAspect {\r\n      \r\n      ...\r\n\r\n      @Around(value = &quot;applicationServicePointcut()&quot;, argNames = &quot;joinPoint&quot;)\r\n      public Object process(ProceedingJoinPoint joinPoint)\r\n          throws Throwable {\r\n        ...\r\n        */Before section */\r\n\r\n        do some processing and persist in DB\r\n        ...\r\n        Object object = joinPoint.proceed();\r\n        ...\r\n        do some post-processing\r\n      }\r\n    }\r\n\r\nI am seeing an exception in the service method is not rolling back the DB operation in the `Begin Section`. I tried putting `@Transactional` on `@Around`, but it did not help.\r\n\r\nIn this context, I have gone through the following posts:\r\n\r\n 1. https://stackoverflow.com/questions/27711615/spring-transactional-in-an-aspect-aop\r\n 2. https://stackoverflow.com/questions/32057910/custom-spring-aop-around-transactional\r\n \r\n\r\nBut I am not able to get any concrete idea regarding how to achieve this. Could anyone please help here? Thanks.\r\n\r\n","title":"Not able to rollback DB changes in Aspect in Spring boot application","body":"<p>I have written one aspect around a service class. In the aspect, I am doing some operation in the before section, which I would like to be rolled back if some exception occurs in the enclosed service method.</p>\n<p>The service class is as follows:</p>\n<pre><code>@Service\n@Transactional\nclass ServiceA {\n   ...\n   public void doSomething() {\n      ...\n   }\n   ...\n}\n</code></pre>\n<p>The aspect is as follows:</p>\n<pre><code>  @Aspect\n  @Order(2)\n  public class TcStateManagementAspect {\n  \n  ...\n\n  @Around(value = &quot;applicationServicePointcut()&quot;, argNames = &quot;joinPoint&quot;)\n  public Object process(ProceedingJoinPoint joinPoint)\n      throws Throwable {\n    ...\n    */Before section */\n\n    do some processing and persist in DB\n    ...\n    Object object = joinPoint.proceed();\n    ...\n    do some post-processing\n  }\n}\n</code></pre>\n<p>I am seeing an exception in the service method is not rolling back the DB operation in the <code>Begin Section</code>. I tried putting <code>@Transactional</code> on <code>@Around</code>, but it did not help.</p>\n<p>In this context, I have gone through the following posts:</p>\n<ol>\n<li><a href=\"https://stackoverflow.com/questions/27711615/spring-transactional-in-an-aspect-aop\">Spring @Transactional in an Aspect (AOP)</a></li>\n<li><a href=\"https://stackoverflow.com/questions/32057910/custom-spring-aop-around-transactional\">Custom Spring AOP Around + @Transactional</a></li>\n</ol>\n<p>But I am not able to get any concrete idea regarding how to achieve this. Could anyone please help here? Thanks.</p>\n"},{"tags":["java","multithreading","timer","interrupt","interrupt-handling"],"answers":[{"tags":[],"owner":{"account_id":13429972,"reputation":1807,"user_id":9690075,"display_name":"zysaaa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640056861,"creation_date":1639972172,"answer_id":70417216,"question_id":70415500,"body_markdown":"Compiler tells you the exception is never throw is beacuse your ```executeExperiment``` method is uninterruptable(Unlike some blocking methods, e.g. ```Object#wait```), so [thread.interrupt][1] does not make the thread executing this method receive an [InterruptedException][2].\r\n\r\nMaybe you need to check whether the current thread has been interrupted every time you iterate ```files``` in your ```executeExperiment``` method, if it is, then throw an ```InterruptedException```.(But this may still be inaccurate, because the ```executeCase``` method may be executed for a long time.)\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/lang/Thread.html#interrupt--\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/index.html?java/lang/InterruptedException.html","title":"How do you stop a java method execution with a timer?","body":"<p>Compiler tells you the exception is never throw is beacuse your <code>executeExperiment</code> method is uninterruptable(Unlike some blocking methods, e.g. <code>Object#wait</code>), so <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Thread.html#interrupt--\" rel=\"nofollow noreferrer\">thread.interrupt</a> does not make the thread executing this method receive an <a href=\"https://docs.oracle.com/javase/8/docs/api/index.html?java/lang/InterruptedException.html\" rel=\"nofollow noreferrer\">InterruptedException</a>.</p>\n<p>Maybe you need to check whether the current thread has been interrupted every time you iterate <code>files</code> in your <code>executeExperiment</code> method, if it is, then throw an <code>InterruptedException</code>.(But this may still be inaccurate, because the <code>executeCase</code> method may be executed for a long time.)</p>\n"},{"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1640012857,"creation_date":1640012857,"answer_id":70423852,"question_id":70415500,"body_markdown":"You will need to do more than add `throws InterruptedException` to all of those ‘submethods’ (and your own methods).  The body of each of those methods must be altered to properly respond to interrupts.\r\n\r\nIt is not possible to arbitrarily stop running code.  Interrupts are cooperative—they only mean something if the thread being interrupted pays attention to them.\r\n\r\nYour `run()` method does this properly:  by placing the entire loop inside a try/catch, any InterruptedException will cause the loop to terminate and thus the thread will terminate.\r\n\r\nBut the methods it calls must do the same thing.  Your `run` method calls `executeExperiment`, which does this:\r\n\r\n    String[] files = getFiles(carpeta);\r\n\r\nI don’t know how long that method takes, but if it takes any significant amount of time at all (more than a fraction of a second), it needs to be capable of throwing InterruptedException in the middle of the file reading.\r\n\r\nexecuteExperiment also calls `executeCase`, which calls the ‘submethods’ readDataToGraph, ExactSolution, and addNewCase.  As above, each of those methods which takes more than a fraction of a second needs to respond to an interrupt by throw InterruptedException.  So, I’m afraid you will need to modify them.\r\n\r\nAn example would be:\r\n\r\n    private Graph readDataToGraph(String filename)\r\n    throws InterruptedException {\r\n\r\n        Graph graph = new Graph();\r\n        try (BufferedReader reader = Files.newBufferedReader(Path.of(filename))) {\r\n            String line;\r\n            while ((line = reader.readLine()) != null) {\r\n                graph.addData(convertDataToGraphEntry(line));\r\n\r\n                if (Thread.interrupted()) {\r\n                    throw new InterruptedException();\r\n                }\r\n            }\r\n        } catch (IOException e) {\r\n            throw new UncheckedIOException(e);\r\n        }\r\n\r\n    }\r\n","title":"How do you stop a java method execution with a timer?","body":"<p>You will need to do more than add <code>throws InterruptedException</code> to all of those ‘submethods’ (and your own methods).  The body of each of those methods must be altered to properly respond to interrupts.</p>\n<p>It is not possible to arbitrarily stop running code.  Interrupts are cooperative—they only mean something if the thread being interrupted pays attention to them.</p>\n<p>Your <code>run()</code> method does this properly:  by placing the entire loop inside a try/catch, any InterruptedException will cause the loop to terminate and thus the thread will terminate.</p>\n<p>But the methods it calls must do the same thing.  Your <code>run</code> method calls <code>executeExperiment</code>, which does this:</p>\n<pre><code>String[] files = getFiles(carpeta);\n</code></pre>\n<p>I don’t know how long that method takes, but if it takes any significant amount of time at all (more than a fraction of a second), it needs to be capable of throwing InterruptedException in the middle of the file reading.</p>\n<p>executeExperiment also calls <code>executeCase</code>, which calls the ‘submethods’ readDataToGraph, ExactSolution, and addNewCase.  As above, each of those methods which takes more than a fraction of a second needs to respond to an interrupt by throw InterruptedException.  So, I’m afraid you will need to modify them.</p>\n<p>An example would be:</p>\n<pre><code>private Graph readDataToGraph(String filename)\nthrows InterruptedException {\n\n    Graph graph = new Graph();\n    try (BufferedReader reader = Files.newBufferedReader(Path.of(filename))) {\n        String line;\n        while ((line = reader.readLine()) != null) {\n            graph.addData(convertDataToGraphEntry(line));\n\n            if (Thread.interrupted()) {\n                throw new InterruptedException();\n            }\n        }\n    } catch (IOException e) {\n        throw new UncheckedIOException(e);\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":23694870,"reputation":53,"user_id":17718726,"display_name":"Marcos Robles"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":295,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70423852,"answer_count":2,"score":1,"last_activity_date":1640056861,"creation_date":1639949541,"question_id":70415500,"body_markdown":"I am trying to stop a long running method after 10 seconds of execution, so far i followed the timer instructions on baeldung.\r\n\r\nhttps://www.baeldung.com/java-stop-execution-after-certain-time#1-using-a-timer\r\n\r\nWhen the method is a simple call to a thread sleep it works, but when I call my function with sub methods it doesn&#39;t stop.\r\n\r\nMy implementation looks like this:\r\n\r\n```lang-java\r\n class TimeOutTask extends TimerTask {\r\n        private Thread t;\r\n        private Timer timer;\r\n\r\n        TimeOutTask(Thread t, Timer timer){\r\n            this.t = t;\r\n            this.timer = timer;\r\n        }\r\n\r\n        public void run() {\r\n            if (t != null &amp;&amp; t.isAlive()) {\r\n                t.interrupt();\r\n                timer.cancel();\r\n            }\r\n        }\r\n    }\r\n    class Execution implements Runnable {\r\n\r\n        private String carpeta;\r\n        private Experiment exp;\r\n\r\n        public Execution(String carpeta, Experiment exp) {\r\n            this.carpeta = carpeta;\r\n            this.exp = exp;\r\n        }\r\n\r\n        @Override\r\n        public void run() {\r\n            try {\r\n                while (!Thread.currentThread().isInterrupted()) {\r\n                   exp.executeExperiment(carpeta);\r\n                }\r\n            } catch (InterruptedException e) {\r\n                System.out.println(&quot;Fin de ejecuci&#243;n por tiempo&quot;);\r\n            }\r\n        }\r\n    }\r\n```\r\n\r\nAnd the way I am calling this execution is throught the executeTimedExperiment method\r\n\r\n```lang-java\r\n    public Experiment() {\r\n        this.cases = new ArrayList&lt;&gt;();\r\n    }\r\n\r\n\r\n    private void executeTimedExperiment(String carpeta){\r\n        Thread t = new Thread(new Execution(carpeta,this));\r\n        Timer timer = new Timer();\r\n        timer.schedule(new TimeOutTask(t, timer), 10000);\r\n        t.start();\r\n    }\r\n\r\n    private void executeExperiment(String carpeta) throws InterruptedException {\r\n\r\n        String[] files = getFiles(carpeta);\r\n        Arrays.sort(files);\r\n\r\n        for (String file : files) {\r\n             executeCase(carpeta, file);\r\n        }\r\n\r\n    }\r\n\r\n    private boolean executeCase(String carpeta, String file) {\r\n\r\n        Graph g = readDataToGraph(carpeta + &quot;/&quot; + file);\r\n        Solution s = new ExactSolutionGenerator().ExactSolution(g);\r\n        addNewCase(file, s);\r\n\r\n    }\r\n```\r\n\r\nThe executeExperiment method is the long running and I marked it with InterruptedException but the compiler tells me the exception is never throw.\r\n\r\nWhat happens now when I execute it is that it runs normally without stoppping.\r\n\r\nI am not sure if I need to add InterruptedException to the submethods or something else, but I would like to not touch the submethods if possible.\r\n\r\nThanks in advance.\r\n","title":"How do you stop a java method execution with a timer?","body":"<p>I am trying to stop a long running method after 10 seconds of execution, so far i followed the timer instructions on baeldung.</p>\n<p><a href=\"https://www.baeldung.com/java-stop-execution-after-certain-time#1-using-a-timer\" rel=\"nofollow noreferrer\">https://www.baeldung.com/java-stop-execution-after-certain-time#1-using-a-timer</a></p>\n<p>When the method is a simple call to a thread sleep it works, but when I call my function with sub methods it doesn't stop.</p>\n<p>My implementation looks like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code> class TimeOutTask extends TimerTask {\n        private Thread t;\n        private Timer timer;\n\n        TimeOutTask(Thread t, Timer timer){\n            this.t = t;\n            this.timer = timer;\n        }\n\n        public void run() {\n            if (t != null &amp;&amp; t.isAlive()) {\n                t.interrupt();\n                timer.cancel();\n            }\n        }\n    }\n    class Execution implements Runnable {\n\n        private String carpeta;\n        private Experiment exp;\n\n        public Execution(String carpeta, Experiment exp) {\n            this.carpeta = carpeta;\n            this.exp = exp;\n        }\n\n        @Override\n        public void run() {\n            try {\n                while (!Thread.currentThread().isInterrupted()) {\n                   exp.executeExperiment(carpeta);\n                }\n            } catch (InterruptedException e) {\n                System.out.println(&quot;Fin de ejecución por tiempo&quot;);\n            }\n        }\n    }\n</code></pre>\n<p>And the way I am calling this execution is throught the executeTimedExperiment method</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public Experiment() {\n        this.cases = new ArrayList&lt;&gt;();\n    }\n\n\n    private void executeTimedExperiment(String carpeta){\n        Thread t = new Thread(new Execution(carpeta,this));\n        Timer timer = new Timer();\n        timer.schedule(new TimeOutTask(t, timer), 10000);\n        t.start();\n    }\n\n    private void executeExperiment(String carpeta) throws InterruptedException {\n\n        String[] files = getFiles(carpeta);\n        Arrays.sort(files);\n\n        for (String file : files) {\n             executeCase(carpeta, file);\n        }\n\n    }\n\n    private boolean executeCase(String carpeta, String file) {\n\n        Graph g = readDataToGraph(carpeta + &quot;/&quot; + file);\n        Solution s = new ExactSolutionGenerator().ExactSolution(g);\n        addNewCase(file, s);\n\n    }\n</code></pre>\n<p>The executeExperiment method is the long running and I marked it with InterruptedException but the compiler tells me the exception is never throw.</p>\n<p>What happens now when I execute it is that it runs normally without stoppping.</p>\n<p>I am not sure if I need to add InterruptedException to the submethods or something else, but I would like to not touch the submethods if possible.</p>\n<p>Thanks in advance.</p>\n"},{"tags":["java","android","android-studio","webview","mobile-application"],"answers":[{"tags":[],"owner":{"account_id":14707092,"reputation":69,"user_id":10621453,"display_name":"fobidlim"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640056608,"creation_date":1640056608,"answer_id":70430283,"question_id":70420202,"body_markdown":"Try this;\r\n```java\r\nlayout.addView(webView, layout.getChildCount())\r\n```","title":"how to insert an android webview programatically next to a textview?","body":"<p>Try this;</p>\n<pre class=\"lang-java prettyprint-override\"><code>layout.addView(webView, layout.getChildCount())\n</code></pre>\n"}],"owner":{"account_id":23664262,"reputation":69,"user_id":17691949,"display_name":"nias fathima"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":112,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1640056608,"creation_date":1639994801,"question_id":70420202,"body_markdown":"I need to insert my `Webview` right next to a `textview` with unique id, is there something like javascript&#39;s ```Node.insertBefore();``` in java.\r\nI have tried the following: ex:\r\n```\r\n    LinearLayout layout = findViewById(R.id.linear_view);\r\n    webview = new WebView(this);\r\n    webview.setId(10);\r\n    webview.getSettings().setJavaScriptEnabled(true);\r\n    webview.setWebContentsDebuggingEnabled(true);\r\n    webview.setWebViewClient(new WebViewClient());\r\n    webview.loadUrl(&quot;https://www.google.co.in/&quot;);\r\n    layout.addView(webview);\r\n```\r\nbut in my case i can&#39;t get layout id, i will get the textview id only.","title":"how to insert an android webview programatically next to a textview?","body":"<p>I need to insert my <code>Webview</code> right next to a <code>textview</code> with unique id, is there something like javascript's <code>Node.insertBefore();</code> in java.\nI have tried the following: ex:</p>\n<pre><code>    LinearLayout layout = findViewById(R.id.linear_view);\n    webview = new WebView(this);\n    webview.setId(10);\n    webview.getSettings().setJavaScriptEnabled(true);\n    webview.setWebContentsDebuggingEnabled(true);\n    webview.setWebViewClient(new WebViewClient());\n    webview.loadUrl(&quot;https://www.google.co.in/&quot;);\n    layout.addView(webview);\n</code></pre>\n<p>but in my case i can't get layout id, i will get the textview id only.</p>\n"},{"tags":["java","algorithm"],"comments":[{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1632368142,"post_id":69293622,"comment_id":122474348,"body_markdown":"May be a duplicate of [others](https://duckduckgo.com/?q=site%3Astackoverflow.com+generate+numbers+in+general+distribution&amp;t=osx&amp;ia=web) as well. Always search Stack Overflow before posting.","body":"May be a duplicate of <a href=\"https://duckduckgo.com/?q=site%3Astackoverflow.com+generate+numbers+in+general+distribution&amp;t=osx&amp;ia=web\" rel=\"nofollow noreferrer\">others</a> as well. Always search Stack Overflow before posting."},{"owner":{"account_id":9238279,"reputation":1211,"user_id":6862189,"accept_rate":17,"display_name":"DachuanZhao"},"score":0,"creation_date":1632369255,"post_id":69293622,"comment_id":122474508,"body_markdown":"I&#39;m sure it&#39;s not a duplicate question . Please remove the tag .","body":"I&#39;m sure it&#39;s not a duplicate question . Please remove the tag ."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1632370906,"post_id":69293622,"comment_id":122474777,"body_markdown":"Please explain what you mean by &quot;numbers in [1,10] by given string&quot; and &quot;numbers in [a,b] by given string&quot;.  I see your code, and understand what your code actually does ... but I cannot figure out how that your characterization of what it does.  (The result of calling your method is not a number in the range `[1,10]`, it doesn&#39;t contain 1 to 10 decimal digits if you print it in decimal, it doesn&#39;t in any way constrain the digits you can display the number in.  I am at a total loss as to what you mean.)","body":"Please explain what you mean by &quot;numbers in [1,10] by given string&quot; and &quot;numbers in [a,b] by given string&quot;.  I see your code, and understand what your code actually does ... but I cannot figure out how that your characterization of what it does.  (The result of calling your method is not a number in the range <code>[1,10]</code>, it doesn&#39;t contain 1 to 10 decimal digits if you print it in decimal, it doesn&#39;t in any way constrain the digits you can display the number in.  I am at a total loss as to what you mean.)"},{"owner":{"account_id":1951203,"reputation":10695,"user_id":1755242,"accept_rate":80,"display_name":"sunleo"},"score":0,"creation_date":1632371055,"post_id":69293622,"comment_id":122474803,"body_markdown":"List&lt;Integer&gt; numbers = Stream.iterate(Integer.parseInt(a), n -&gt; n + 1)\n                              .limit(Integer.parseInt(b))\n                              .collect(Collectors.toList());","body":"List&lt;Integer&gt; numbers = Stream.iterate(Integer.parseInt(a), n -&gt; n + 1)                               .limit(Integer.parseInt(b))                               .collect(Collectors.toList());"},{"owner":{"account_id":1951203,"reputation":10695,"user_id":1755242,"accept_rate":80,"display_name":"sunleo"},"score":0,"creation_date":1632371208,"post_id":69293622,"comment_id":122474827,"body_markdown":"List&lt;Integer&gt; range = IntStream.rangeClosed(typeCased a, typecasted b)\n    .boxed().collect(Collectors.toList());","body":"List&lt;Integer&gt; range = IntStream.rangeClosed(typeCased a, typecasted b)     .boxed().collect(Collectors.toList());"},{"owner":{"account_id":9238279,"reputation":1211,"user_id":6862189,"accept_rate":17,"display_name":"DachuanZhao"},"score":0,"creation_date":1632377532,"post_id":69293622,"comment_id":122476141,"body_markdown":"I have edited my question , thanks all .","body":"I have edited my question , thanks all ."},{"owner":{"account_id":17592368,"reputation":13891,"user_id":12763954,"display_name":"Olivier"},"score":0,"creation_date":1632379896,"post_id":69293622,"comment_id":122476795,"body_markdown":"Why should there be a normal distribution involved here? Not to mention that the normal distribution is defined for real numbers, not integers.","body":"Why should there be a normal distribution involved here? Not to mention that the normal distribution is defined for real numbers, not integers."},{"owner":{"account_id":9238279,"reputation":1211,"user_id":6862189,"accept_rate":17,"display_name":"DachuanZhao"},"score":0,"creation_date":1632380421,"post_id":69293622,"comment_id":122476938,"body_markdown":"Uniform distribution ... It&#39;s a mistake ...","body":"Uniform distribution ... It&#39;s a mistake ..."},{"owner":{"account_id":17592368,"reputation":13891,"user_id":12763954,"display_name":"Olivier"},"score":1,"creation_date":1632381128,"post_id":69293622,"comment_id":122477146,"body_markdown":"Well, it should be more or less uniform, yes.","body":"Well, it should be more or less uniform, yes."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1632383789,"post_id":69293622,"comment_id":122478283,"body_markdown":"There are significantly more efficient ways to generate uniformly distributed numbers from strings.  For a start, you don&#39;t need to use `BigInteger` or turn the digest into a hex string.","body":"There are significantly more efficient ways to generate uniformly distributed numbers from strings.  For a start, you don&#39;t need to use <code>BigInteger</code> or turn the digest into a hex string."},{"owner":{"account_id":9238279,"reputation":1211,"user_id":6862189,"accept_rate":17,"display_name":"DachuanZhao"},"score":0,"creation_date":1632387825,"post_id":69293622,"comment_id":122480105,"body_markdown":"@StephenC Could you add an answer to show that ？ thanks ~","body":"@StephenC Could you add an answer to show that ？ thanks ~"}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1632448986,"creation_date":1632394224,"answer_id":69298589,"question_id":69293622,"body_markdown":"&gt; Does the method Generating int number in `[0,x]` by given string follow uniform distribution？\r\n\r\nAlmost.  It is difficult to entirely eliminate non-uniformity ... unless 2&lt;sup&gt;256&lt;/sup&gt; happens to be evenly divisible by `x`.\r\n\r\nNote that you are actually generating a number in `[0,x)` ... since the result cannot be `x`.\r\n\r\n----------------------\r\n\r\nYou also asked about more efficient implementations than the one in your question.\r\n\r\n    public class BaseUtil {\r\n    \r\n        public static int getIntValueV1(String stringText, int x) {\r\n            if (x &lt;= 0) {\r\n                throw new InvalidArgumentException(&quot;x must be strictly positive&quot;);\r\n            }\r\n            MessageDigest digest = MessageDigest.getInstance(&quot;SHA-256&quot;);\r\n            byte[] hash = digest.digest(\r\n                stringText.getBytes(StandardCharsets.UTF_8));\r\n            return new BigInteger(hash).mod(new BigInteger(x)).intValue()\r\n        }\r\n    \r\n        public static int getIntValueV2(String stringText, int x) {\r\n            if (x &lt;= 0) {\r\n                throw new InvalidArgumentException(&quot;x must be strictly positive&quot;);\r\n            }\r\n            MessageDigest digest = MessageDigest.getInstance(&quot;SHA-256&quot;);\r\n            byte[] hash = digest.digest(\r\n                stringText.getBytes(StandardCharsets.UTF_8));\r\n            ByteBuffer buff = new ByteBuffer(hash);\r\n            long number = 0;\r\n            for (int i = 0; i &lt; 8; i++) {\r\n                number = number ^ buff.getLong();\r\n            }\r\n            return (int)(number % x);\r\n        }\r\n    }\r\n\r\nPreconditions:\r\n\r\n  - Since the result of your method is an `int`, that implies that `x` must also be an `int`.\r\n\r\n  - Since you want numbers in the range `[0,x)`, that implies that `x` must be greater than zero.\r\n\r\nImplementations:\r\n\r\nI am using the standard `MessageDigest` class since it has been in Java SE since Java 5 (if not earlier).\r\n\r\nThe first version uses `BigInteger` to minimize the non-uniformity when we reduce the bytes into a number in the range `[0, x)`  \r\n\r\nThe second version uses `long` arithmetic to compute the remainder.  I think that means that the distribution might be a bit more non-uniform than the first version.  (My math skills are too rusty ...)  It would also be possible to eliminate the use of `ByteBuffer` to convert the bytes to a sequence of longs.\r\n\r\nI have not benchmarked these versions to see which is faster.  But both should be faster than producing an intermediate hexadecimal string and parsing it.\r\n\r\nNote that you could probably get away with using a less expensive hashing algorithm, depending on the actual use-case for this generator.\r\n\r\n","title":"Does the number generated by this function obey uniform distribution ？","body":"<blockquote>\n<p>Does the method Generating int number in <code>[0,x]</code> by given string follow uniform distribution？</p>\n</blockquote>\n<p>Almost.  It is difficult to entirely eliminate non-uniformity ... unless 2<sup>256</sup> happens to be evenly divisible by <code>x</code>.</p>\n<p>Note that you are actually generating a number in <code>[0,x)</code> ... since the result cannot be <code>x</code>.</p>\n<hr />\n<p>You also asked about more efficient implementations than the one in your question.</p>\n<pre><code>public class BaseUtil {\n\n    public static int getIntValueV1(String stringText, int x) {\n        if (x &lt;= 0) {\n            throw new InvalidArgumentException(&quot;x must be strictly positive&quot;);\n        }\n        MessageDigest digest = MessageDigest.getInstance(&quot;SHA-256&quot;);\n        byte[] hash = digest.digest(\n            stringText.getBytes(StandardCharsets.UTF_8));\n        return new BigInteger(hash).mod(new BigInteger(x)).intValue()\n    }\n\n    public static int getIntValueV2(String stringText, int x) {\n        if (x &lt;= 0) {\n            throw new InvalidArgumentException(&quot;x must be strictly positive&quot;);\n        }\n        MessageDigest digest = MessageDigest.getInstance(&quot;SHA-256&quot;);\n        byte[] hash = digest.digest(\n            stringText.getBytes(StandardCharsets.UTF_8));\n        ByteBuffer buff = new ByteBuffer(hash);\n        long number = 0;\n        for (int i = 0; i &lt; 8; i++) {\n            number = number ^ buff.getLong();\n        }\n        return (int)(number % x);\n    }\n}\n</code></pre>\n<p>Preconditions:</p>\n<ul>\n<li><p>Since the result of your method is an <code>int</code>, that implies that <code>x</code> must also be an <code>int</code>.</p>\n</li>\n<li><p>Since you want numbers in the range <code>[0,x)</code>, that implies that <code>x</code> must be greater than zero.</p>\n</li>\n</ul>\n<p>Implementations:</p>\n<p>I am using the standard <code>MessageDigest</code> class since it has been in Java SE since Java 5 (if not earlier).</p>\n<p>The first version uses <code>BigInteger</code> to minimize the non-uniformity when we reduce the bytes into a number in the range <code>[0, x)</code></p>\n<p>The second version uses <code>long</code> arithmetic to compute the remainder.  I think that means that the distribution might be a bit more non-uniform than the first version.  (My math skills are too rusty ...)  It would also be possible to eliminate the use of <code>ByteBuffer</code> to convert the bytes to a sequence of longs.</p>\n<p>I have not benchmarked these versions to see which is faster.  But both should be faster than producing an intermediate hexadecimal string and parsing it.</p>\n<p>Note that you could probably get away with using a less expensive hashing algorithm, depending on the actual use-case for this generator.</p>\n"}],"owner":{"account_id":9238279,"reputation":1211,"user_id":6862189,"accept_rate":17,"display_name":"DachuanZhao"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":90,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1632411426,"accepted_answer_id":69298589,"answer_count":1,"score":-3,"last_activity_date":1640056283,"creation_date":1632367215,"question_id":69293622,"body_markdown":"I have implemented a function Generating numbers in [0,x] by given string :\r\n```Java\r\n\r\nimport org.apache.commons.codec.digest.DigestUtils;\r\n\r\npublic class BaseUtil {\r\n\r\n    public static int getIntValue(String stringText, String x) {\r\n        var modNum = new BigInteger(x);\r\n        String sha256hex = DigestUtils.sha256Hex(stringText);\r\n        var result = new BigInteger(sha256hex, 16);\r\n        int intValue = result.mod(modNum).intValue();\r\n        return intValue;\r\n    }\r\n}\r\n```\r\nDoes the return intValue obey uniform distribution in [0,x] for much random string？","title":"Does the number generated by this function obey uniform distribution ？","body":"<p>I have implemented a function Generating numbers in [0,x] by given string :</p>\n<pre><code>\nimport org.apache.commons.codec.digest.DigestUtils;\n\npublic class BaseUtil {\n\n    public static int getIntValue(String stringText, String x) {\n        var modNum = new BigInteger(x);\n        String sha256hex = DigestUtils.sha256Hex(stringText);\n        var result = new BigInteger(sha256hex, 16);\n        int intValue = result.mod(modNum).intValue();\n        return intValue;\n    }\n}\n</code></pre>\n<p>Does the return intValue obey uniform distribution in [0,x] for much random string？</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8248,"page":1744,"page_size":100}
