{"items":[{"tags":["java","quarkus","optaplanner"],"comments":[{"owner":{"account_id":9133364,"reputation":4450,"user_id":6794063,"display_name":"Luk&#225;š Petrovick&#253;"},"score":1,"creation_date":1634668632,"post_id":69631653,"comment_id":123086005,"body_markdown":"This problem, I&#39;m afraid, has nothing to do with either OptaPlanner or Quarkus. It is XStream who is making those illegal reflective calls - and the way to avoid those is to not use XStream. You are welcome to use other persistence mechanisms supported by OptaPlanner, such as JAXB, JSON etc.","body":"This problem, I&#39;m afraid, has nothing to do with either OptaPlanner or Quarkus. It is XStream who is making those illegal reflective calls - and the way to avoid those is to not use XStream. You are welcome to use other persistence mechanisms supported by OptaPlanner, such as JAXB, JSON etc."},{"owner":{"account_id":3001234,"reputation":578,"user_id":2546702,"accept_rate":100,"display_name":"minioim"},"score":0,"creation_date":1634717018,"post_id":69631653,"comment_id":123096869,"body_markdown":"@Luk&#225;šPetrovick&#253; thanks for your comment, I will try it and let you know :)","body":"@Luk&#225;šPetrovick&#253; thanks for your comment, I will try it and let you know :)"},{"owner":{"account_id":216698,"reputation":26495,"user_id":472109,"accept_rate":85,"display_name":"Geoffrey De Smet"},"score":0,"creation_date":1634736918,"post_id":69631653,"comment_id":123105509,"body_markdown":"Which version of OptaPlanner and Quarkus are you using?","body":"Which version of OptaPlanner and Quarkus are you using?"},{"owner":{"account_id":3001234,"reputation":578,"user_id":2546702,"accept_rate":100,"display_name":"minioim"},"score":1,"creation_date":1635103735,"post_id":69631653,"comment_id":123200330,"body_markdown":"@GeoffreyDeSmet for quarkus it&#39;s 2.3.0.Final\nfor optaplanner it&#39;s 8.11.1.Final","body":"@GeoffreyDeSmet for quarkus it&#39;s 2.3.0.Final for optaplanner it&#39;s 8.11.1.Final"}],"answers":[{"tags":[],"owner":{"account_id":3001234,"reputation":578,"user_id":2546702,"accept_rate":100,"display_name":"minioim"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634657908,"creation_date":1634657908,"answer_id":69633837,"question_id":69631653,"body_markdown":"I actually add the --add-opens... line to the javac parameters\r\nThat was breaking the livereload.\r\n\r\nBy using this add-opens parameters only on JVMArgs on quarkus-maven-plugin, it works as intended. and Live Reload is working also.\r\n\r\nBtw I&#39;m still looking for a solution to not have to add any add-opens parameters","title":"quarkus optaplanner illegal reflective call","body":"<p>I actually add the --add-opens... line to the javac parameters\nThat was breaking the livereload.</p>\n<p>By using this add-opens parameters only on JVMArgs on quarkus-maven-plugin, it works as intended. and Live Reload is working also.</p>\n<p>Btw I'm still looking for a solution to not have to add any add-opens parameters</p>\n"},{"tags":[],"owner":{"account_id":216698,"reputation":26495,"user_id":472109,"accept_rate":85,"display_name":"Geoffrey De Smet"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634737159,"creation_date":1634737159,"answer_id":69647089,"question_id":69631653,"body_markdown":"I see 2 possible causes for this issue (I can&#39;t see which one it is):\r\n\r\n1) You&#39;re using OptaPlanner 7.\r\nFix: Upgrade to OptaPlanner 8, which uses JAXB instead of XStream. The Quarkus extension for OptaPlanner 8 is stable and reliable (the one in 7 is not).\r\n\r\n2) You&#39;re loading a dataset with XStream, before calling OptaPlanner, possibly through using optaplanner-persistence-xstream. That&#39;s an XStream issue with JDK 17. (See Lukas&#39;s comment.) Maybe upgrading to a new version of XStream fixes it, I hope.","title":"quarkus optaplanner illegal reflective call","body":"<p>I see 2 possible causes for this issue (I can't see which one it is):</p>\n<ol>\n<li><p>You're using OptaPlanner 7.\nFix: Upgrade to OptaPlanner 8, which uses JAXB instead of XStream. The Quarkus extension for OptaPlanner 8 is stable and reliable (the one in 7 is not).</p>\n</li>\n<li><p>You're loading a dataset with XStream, before calling OptaPlanner, possibly through using optaplanner-persistence-xstream. That's an XStream issue with JDK 17. (See Lukas's comment.) Maybe upgrading to a new version of XStream fixes it, I hope.</p>\n</li>\n</ol>\n"}],"owner":{"account_id":3001234,"reputation":578,"user_id":2546702,"accept_rate":100,"display_name":"minioim"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":452,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1634737159,"creation_date":1634649783,"question_id":69631653,"body_markdown":"I have upgraded my JDK to version 17.\r\nNow when I try to run parametized unit tests with optaplanner running on Quarkus I get the following stacktrace: \r\n\r\n    java.lang.ExceptionInInitializerError\r\n    Caused by: java.lang.reflect.InaccessibleObjectException: Unable to make field private transient java.util.NavigableMap java.util.TreeSet.m accessible: module java.base does not &quot;opens java.util&quot; to unnamed module @724b93a8\r\n    \r\n    [ERROR] org.m.s.c.score.constraints.SecConflictTest.secConflictTest(String, int, Agent)[2]  Time elapsed: 0.011 s  &lt;&lt;&lt; ERROR!\r\n    java.lang.NoClassDefFoundError: Could not initialize class com.thoughtworks.xstream.converters.collections.TreeSetConverter$Reflections\r\n    \r\n    [ERROR] org.m.s.c.score.constraints.SecConflictTest.secConflictTest(String, int, Agent)[3]  Time elapsed: 0.014 s  &lt;&lt;&lt; ERROR!\r\n    java.lang.NoClassDefFoundError: Could not initialize class com.thoughtworks.xstream.converters.collections.TreeSetConverter$Reflections\r\n\r\nAfter reading a bit about this kind of problem I have added \r\n\r\n    --add-opens java.base/java.lang.reflect=ALL-UNNAMED --add-opens java.base/java.util=ALL-UNNAMED --add-opens java.base/java.text=ALL-UNNAMED --add-opens java.desktop/java.awt.font=ALL-UNNAMED\r\n\r\nto my Maven POM in the following sections: Quarkus-maven-plugin config and maven-surefire-config\r\n\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;${quarkus.platform.group-id}&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;quarkus-maven-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;${quarkus.platform.version}&lt;/version&gt;\r\n                    &lt;extensions&gt;true&lt;/extensions&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;source&gt;${maven.compiler.source}&lt;/source&gt;\r\n                        &lt;target&gt;${maven.compiler.target}&lt;/target&gt;\r\n                        &lt;compilerArgs&gt;\r\n                            &lt;arg&gt;--enable-preview --add-opens java.base/java.lang.reflect=ALL-UNNAMED --add-opens java.base/java.util=ALL-UNNAMED --add-opens java.base/java.text=ALL-UNNAMED --add-opens java.desktop/java.awt.font=ALL-UNNAMED&lt;/arg&gt;\r\n                        &lt;/compilerArgs&gt;\r\n                        &lt;jvmArgs&gt;--enable-preview --add-opens java.base/java.lang.reflect=ALL-UNNAMED --add-opens java.base/java.util=ALL-UNNAMED --add-opens java.base/java.text=ALL-UNNAMED --add-opens java.desktop/java.awt.font=ALL-UNNAMED&lt;/jvmArgs&gt;\r\n                    &lt;/configuration&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;build&lt;/goal&gt;\r\n                                &lt;goal&gt;generate-code&lt;/goal&gt;\r\n                                &lt;goal&gt;generate-code-tests&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;${compiler-plugin.version}&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;parameters&gt;${maven.compiler.parameters}&lt;/parameters&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;${surefire-plugin.version}&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;argLine&gt;\r\n                            --add-opens java.base/java.lang.reflect=ALL-UNNAMED --add-opens java.base/java.util=ALL-UNNAMED --add-opens java.base/java.text=ALL-UNNAMED --add-opens java.desktop/java.awt.font=ALL-UNNAMED\r\n                        &lt;/argLine&gt;\r\n                        &lt;systemPropertyVariables&gt;\r\n                            &lt;java.util.logging.manager&gt;org.jboss.logmanager.LogManager&lt;/java.util.logging.manager&gt;\r\n                            &lt;maven.home&gt;${maven.home}&lt;/maven.home&gt;\r\n                        &lt;/systemPropertyVariables&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n\r\nand in maven-failsafe-plugin config for profile native: \r\n\r\n    &lt;profiles&gt;\r\n            &lt;profile&gt;\r\n                &lt;id&gt;native&lt;/id&gt;\r\n                &lt;activation&gt;\r\n                    &lt;property&gt;\r\n                        &lt;name&gt;native&lt;/name&gt;\r\n                    &lt;/property&gt;\r\n                &lt;/activation&gt;\r\n                &lt;build&gt;\r\n                    &lt;plugins&gt;\r\n                        &lt;plugin&gt;\r\n                            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt;\r\n                            &lt;version&gt;${surefire-plugin.version}&lt;/version&gt;\r\n                            &lt;executions&gt;\r\n                                &lt;execution&gt;\r\n                                    &lt;goals&gt;\r\n                                        &lt;goal&gt;integration-test&lt;/goal&gt;\r\n                                        &lt;goal&gt;verify&lt;/goal&gt;\r\n                                    &lt;/goals&gt;\r\n                                    &lt;configuration&gt;\r\n                                        &lt;argLine&gt;\r\n                                            --add-opens java.base/java.lang.reflect=ALL-UNNAMED\r\n                                            --add-opens java.base/java.util=ALL-UNNAMED\r\n                                            --add-opens java.base/java.text=ALL-UNNAMED\r\n                                            --add-opens java.desktop/java.awt.font=ALL-UNNAMED\r\n                                        &lt;/argLine&gt;\r\n                                        &lt;systemPropertyVariables&gt;\r\n                                            &lt;native.image.path&gt;${project.build.directory}/${project.build.finalName}-runner&lt;/native.image.path&gt;\r\n                                            &lt;java.util.logging.manager&gt;org.jboss.logmanager.LogManager&lt;/java.util.logging.manager&gt;\r\n                                            &lt;maven.home&gt;${maven.home}&lt;/maven.home&gt;\r\n                                        &lt;/systemPropertyVariables&gt;\r\n                                    &lt;/configuration&gt;\r\n                                &lt;/execution&gt;\r\n                            &lt;/executions&gt;\r\n                        &lt;/plugin&gt;\r\n                    &lt;/plugins&gt;\r\n                &lt;/build&gt;\r\n                &lt;properties&gt;\r\n                    &lt;quarkus.package.type&gt;native&lt;/quarkus.package.type&gt;\r\n                &lt;/properties&gt;\r\n            &lt;/profile&gt;\r\n        &lt;/profiles&gt;\r\n\r\n**It does work as intended: tests are running fine, but I have &quot;lost&quot; live reload feature of quarkus**\r\nIf I change anything in my code and call a WS again, here is the error: \r\n\r\n    Error restarting Quarkus\r\n    java.lang.IllegalArgumentException: error: invalid flag: --enable-preview --add-opens\r\n\t\t\t\tjava.base/java.lang.reflect=ALL-UNNAMED --add-opens java.base/java.util=ALL-UNNAMED --add-opens\r\n\t\t\t\tjava.base/java.text=ALL-UNNAMED --add-opens java.desktop/java.awt.font=ALL-UNNAMED\r\n\r\n\r\nI&#39;m looking for a configuration allowing Quarkus with Optaplanner to run on Java 17, with ParametizedTests running fine and live reloading still working. \r\nFor information, with simple tests (no Parametized), it does work without specific `--add-open` config.\r\n\r\nHere is the post that leads me on the path for my first fix:\r\nhttps://github.com/quarkusio/quarkus/issues/10303#issuecomment-666492921","title":"quarkus optaplanner illegal reflective call","body":"<p>I have upgraded my JDK to version 17.\nNow when I try to run parametized unit tests with optaplanner running on Quarkus I get the following stacktrace:</p>\n<pre><code>java.lang.ExceptionInInitializerError\nCaused by: java.lang.reflect.InaccessibleObjectException: Unable to make field private transient java.util.NavigableMap java.util.TreeSet.m accessible: module java.base does not &quot;opens java.util&quot; to unnamed module @724b93a8\n\n[ERROR] org.m.s.c.score.constraints.SecConflictTest.secConflictTest(String, int, Agent)[2]  Time elapsed: 0.011 s  &lt;&lt;&lt; ERROR!\njava.lang.NoClassDefFoundError: Could not initialize class com.thoughtworks.xstream.converters.collections.TreeSetConverter$Reflections\n\n[ERROR] org.m.s.c.score.constraints.SecConflictTest.secConflictTest(String, int, Agent)[3]  Time elapsed: 0.014 s  &lt;&lt;&lt; ERROR!\njava.lang.NoClassDefFoundError: Could not initialize class com.thoughtworks.xstream.converters.collections.TreeSetConverter$Reflections\n</code></pre>\n<p>After reading a bit about this kind of problem I have added</p>\n<pre><code>--add-opens java.base/java.lang.reflect=ALL-UNNAMED --add-opens java.base/java.util=ALL-UNNAMED --add-opens java.base/java.text=ALL-UNNAMED --add-opens java.desktop/java.awt.font=ALL-UNNAMED\n</code></pre>\n<p>to my Maven POM in the following sections: Quarkus-maven-plugin config and maven-surefire-config</p>\n<pre><code>        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;${quarkus.platform.group-id}&lt;/groupId&gt;\n                &lt;artifactId&gt;quarkus-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${quarkus.platform.version}&lt;/version&gt;\n                &lt;extensions&gt;true&lt;/extensions&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;${maven.compiler.source}&lt;/source&gt;\n                    &lt;target&gt;${maven.compiler.target}&lt;/target&gt;\n                    &lt;compilerArgs&gt;\n                        &lt;arg&gt;--enable-preview --add-opens java.base/java.lang.reflect=ALL-UNNAMED --add-opens java.base/java.util=ALL-UNNAMED --add-opens java.base/java.text=ALL-UNNAMED --add-opens java.desktop/java.awt.font=ALL-UNNAMED&lt;/arg&gt;\n                    &lt;/compilerArgs&gt;\n                    &lt;jvmArgs&gt;--enable-preview --add-opens java.base/java.lang.reflect=ALL-UNNAMED --add-opens java.base/java.util=ALL-UNNAMED --add-opens java.base/java.text=ALL-UNNAMED --add-opens java.desktop/java.awt.font=ALL-UNNAMED&lt;/jvmArgs&gt;\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;build&lt;/goal&gt;\n                            &lt;goal&gt;generate-code&lt;/goal&gt;\n                            &lt;goal&gt;generate-code-tests&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${compiler-plugin.version}&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;parameters&gt;${maven.compiler.parameters}&lt;/parameters&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${surefire-plugin.version}&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;argLine&gt;\n                        --add-opens java.base/java.lang.reflect=ALL-UNNAMED --add-opens java.base/java.util=ALL-UNNAMED --add-opens java.base/java.text=ALL-UNNAMED --add-opens java.desktop/java.awt.font=ALL-UNNAMED\n                    &lt;/argLine&gt;\n                    &lt;systemPropertyVariables&gt;\n                        &lt;java.util.logging.manager&gt;org.jboss.logmanager.LogManager&lt;/java.util.logging.manager&gt;\n                        &lt;maven.home&gt;${maven.home}&lt;/maven.home&gt;\n                    &lt;/systemPropertyVariables&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n</code></pre>\n<p>and in maven-failsafe-plugin config for profile native:</p>\n<pre><code>&lt;profiles&gt;\n        &lt;profile&gt;\n            &lt;id&gt;native&lt;/id&gt;\n            &lt;activation&gt;\n                &lt;property&gt;\n                    &lt;name&gt;native&lt;/name&gt;\n                &lt;/property&gt;\n            &lt;/activation&gt;\n            &lt;build&gt;\n                &lt;plugins&gt;\n                    &lt;plugin&gt;\n                        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                        &lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt;\n                        &lt;version&gt;${surefire-plugin.version}&lt;/version&gt;\n                        &lt;executions&gt;\n                            &lt;execution&gt;\n                                &lt;goals&gt;\n                                    &lt;goal&gt;integration-test&lt;/goal&gt;\n                                    &lt;goal&gt;verify&lt;/goal&gt;\n                                &lt;/goals&gt;\n                                &lt;configuration&gt;\n                                    &lt;argLine&gt;\n                                        --add-opens java.base/java.lang.reflect=ALL-UNNAMED\n                                        --add-opens java.base/java.util=ALL-UNNAMED\n                                        --add-opens java.base/java.text=ALL-UNNAMED\n                                        --add-opens java.desktop/java.awt.font=ALL-UNNAMED\n                                    &lt;/argLine&gt;\n                                    &lt;systemPropertyVariables&gt;\n                                        &lt;native.image.path&gt;${project.build.directory}/${project.build.finalName}-runner&lt;/native.image.path&gt;\n                                        &lt;java.util.logging.manager&gt;org.jboss.logmanager.LogManager&lt;/java.util.logging.manager&gt;\n                                        &lt;maven.home&gt;${maven.home}&lt;/maven.home&gt;\n                                    &lt;/systemPropertyVariables&gt;\n                                &lt;/configuration&gt;\n                            &lt;/execution&gt;\n                        &lt;/executions&gt;\n                    &lt;/plugin&gt;\n                &lt;/plugins&gt;\n            &lt;/build&gt;\n            &lt;properties&gt;\n                &lt;quarkus.package.type&gt;native&lt;/quarkus.package.type&gt;\n            &lt;/properties&gt;\n        &lt;/profile&gt;\n    &lt;/profiles&gt;\n</code></pre>\n<p><strong>It does work as intended: tests are running fine, but I have &quot;lost&quot; live reload feature of quarkus</strong>\nIf I change anything in my code and call a WS again, here is the error:</p>\n<pre><code>Error restarting Quarkus\njava.lang.IllegalArgumentException: error: invalid flag: --enable-preview --add-opens\n            java.base/java.lang.reflect=ALL-UNNAMED --add-opens java.base/java.util=ALL-UNNAMED --add-opens\n            java.base/java.text=ALL-UNNAMED --add-opens java.desktop/java.awt.font=ALL-UNNAMED\n</code></pre>\n<p>I'm looking for a configuration allowing Quarkus with Optaplanner to run on Java 17, with ParametizedTests running fine and live reloading still working.\nFor information, with simple tests (no Parametized), it does work without specific <code>--add-open</code> config.</p>\n<p>Here is the post that leads me on the path for my first fix:\n<a href=\"https://github.com/quarkusio/quarkus/issues/10303#issuecomment-666492921\" rel=\"nofollow noreferrer\">https://github.com/quarkusio/quarkus/issues/10303#issuecomment-666492921</a></p>\n"},{"tags":["java","sql","spring-boot","snowflake-cloud-data-platform"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1634734862,"post_id":69646400,"comment_id":123104474,"body_markdown":"&quot;unexpected &#39;INOT&quot; - it seems you&#39;re not sending `INTO` but `INOT`. Please check your code.","body":"&quot;unexpected &#39;INOT&quot; - it seems you&#39;re not sending <code>INTO</code> but <code>INOT</code>. Please check your code."},{"owner":{"account_id":4418961,"reputation":1927,"user_id":9347049,"display_name":"user9347049"},"score":0,"creation_date":1634734961,"post_id":69646400,"comment_id":123104527,"body_markdown":"Sorry I updated it was not that :(","body":"Sorry I updated it was not that :("},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1634735073,"post_id":69646400,"comment_id":123104579,"body_markdown":"`WHERE&quot;ID\\&quot;=?&quot;` - you&#39;re missing the parameter here. Also, the query seems to miss the semi-colon at the end: I&#39;d say it should be `&quot;  file_format = CSV_TEST;&quot;;`","body":"<code>WHERE&quot;ID\\&quot;=?&quot;</code> - you&#39;re missing the parameter here. Also, the query seems to miss the semi-colon at the end: I&#39;d say it should be <code>&quot;  file_format = CSV_TEST;&quot;;</code>"},{"owner":{"account_id":4418961,"reputation":1927,"user_id":9347049,"display_name":"user9347049"},"score":0,"creation_date":1634735229,"post_id":69646400,"comment_id":123104658,"body_markdown":"I have fixed parameter now I HAVE THIS ERROR: `SQL access control error:\nInsufficient privileges to operate on integration &#39;S3_INT&#39;`","body":"I have fixed parameter now I HAVE THIS ERROR: <code>SQL access control error: Insufficient privileges to operate on integration &#39;S3_INT&#39;</code>"}],"answers":[{"tags":[],"owner":{"account_id":17326670,"reputation":9493,"user_id":12550965,"display_name":"Gokhan Atil"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1634737122,"creation_date":1634737122,"answer_id":69647079,"question_id":69646400,"body_markdown":"As the latest error message is &quot;SQL access control error: Insufficient privileges to operate on integration &#39;S3_INT&#39;&quot;, can you try to grant USAGE permission on s3_int to your role? Are you sure you set the correct role when connecting?\r\n\r\n    String url = &quot;jdbc:snowflake://&lt;account_identifier&gt;.snowflakecomputing.com&quot;;\r\n    Properties prop = new Properties();\r\n    prop.put(&quot;user&quot;, &quot;&lt;user&gt;&quot;);\r\n    prop.put(&quot;privateKey&quot;, PrivateKeyReader.get(PRIVATE_KEY_FILE));\r\n    prop.put(&quot;db&quot;, &quot;&lt;database_name&gt;&quot;);\r\n    prop.put(&quot;schema&quot;, &quot;&lt;schema_name&gt;&quot;);\r\n    prop.put(&quot;warehouse&quot;, &quot;&lt;warehouse_name&gt;&quot;);\r\n    prop.put(&quot;role&quot;, &quot;&lt;role_name&gt;&quot;);  \r\n\r\n  ","title":"How to write SQL query in Java to get data from Snowflake","body":"<p>As the latest error message is &quot;SQL access control error: Insufficient privileges to operate on integration 'S3_INT'&quot;, can you try to grant USAGE permission on s3_int to your role? Are you sure you set the correct role when connecting?</p>\n<pre><code>String url = &quot;jdbc:snowflake://&lt;account_identifier&gt;.snowflakecomputing.com&quot;;\nProperties prop = new Properties();\nprop.put(&quot;user&quot;, &quot;&lt;user&gt;&quot;);\nprop.put(&quot;privateKey&quot;, PrivateKeyReader.get(PRIVATE_KEY_FILE));\nprop.put(&quot;db&quot;, &quot;&lt;database_name&gt;&quot;);\nprop.put(&quot;schema&quot;, &quot;&lt;schema_name&gt;&quot;);\nprop.put(&quot;warehouse&quot;, &quot;&lt;warehouse_name&gt;&quot;);\nprop.put(&quot;role&quot;, &quot;&lt;role_name&gt;&quot;);  \n</code></pre>\n"}],"owner":{"account_id":4418961,"reputation":1927,"user_id":9347049,"display_name":"user9347049"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":429,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":69647079,"answer_count":1,"score":2,"last_activity_date":1634737122,"creation_date":1634734651,"question_id":69646400,"body_markdown":"I am trying to write this Snowflake query into Java code:\r\n\r\n    copy into s3://snowflake171\r\n      from USER_TABLE\r\n      storage_integration = s3_int\r\n      file_format = CSV_TEST;\r\n\r\nI am writing it like this:\r\n\r\n \r\n\r\n     String q =&quot;COPY INTO s3://snowflake171\\n&quot; +\r\n                        &quot;  FROM \\&quot;TEST\\&quot;.\\&quot;PUBLIC\\&quot;.\\&quot;USER_TABLE\\&quot;WHERE\\&quot;ID\\\\\\&quot;=?\\&quot;\\n&quot; +\r\n                        &quot;  storage_integration = s3_int\\n&quot; +\r\n                        &quot;  file_format = CSV_TEST&quot;;\r\n\r\nBut I am getting this error:\r\n\r\n    org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.jdbc.BadSqlGrammarException: PreparedStatementCallback; bad SQL grammar [COPY INTO s3://snowflake171\r\n      FROM &quot;TEST&quot;.&quot;PUBLIC&quot;.&quot;USER_TABLE&quot;WHERE&quot;ID\\&quot;=?&quot;\r\n      storage_integration = s3_int\r\n      file_format = CSV_TEST]; nested exception is net.snowflake.client.jdbc.SnowflakeSQLException: SQL compilation error:\r\n    syntax error line 1 at position 5 unexpected &#39;&lt;EOF&gt;&#39;.\r\n\r\nWhat am I missing?","title":"How to write SQL query in Java to get data from Snowflake","body":"<p>I am trying to write this Snowflake query into Java code:</p>\n<pre><code>copy into s3://snowflake171\n  from USER_TABLE\n  storage_integration = s3_int\n  file_format = CSV_TEST;\n</code></pre>\n<p>I am writing it like this:</p>\n<pre><code> String q =&quot;COPY INTO s3://snowflake171\\n&quot; +\n                    &quot;  FROM \\&quot;TEST\\&quot;.\\&quot;PUBLIC\\&quot;.\\&quot;USER_TABLE\\&quot;WHERE\\&quot;ID\\\\\\&quot;=?\\&quot;\\n&quot; +\n                    &quot;  storage_integration = s3_int\\n&quot; +\n                    &quot;  file_format = CSV_TEST&quot;;\n</code></pre>\n<p>But I am getting this error:</p>\n<pre><code>org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.jdbc.BadSqlGrammarException: PreparedStatementCallback; bad SQL grammar [COPY INTO s3://snowflake171\n  FROM &quot;TEST&quot;.&quot;PUBLIC&quot;.&quot;USER_TABLE&quot;WHERE&quot;ID\\&quot;=?&quot;\n  storage_integration = s3_int\n  file_format = CSV_TEST]; nested exception is net.snowflake.client.jdbc.SnowflakeSQLException: SQL compilation error:\nsyntax error line 1 at position 5 unexpected '&lt;EOF&gt;'.\n</code></pre>\n<p>What am I missing?</p>\n"},{"tags":["java","spring","rest"],"answers":[{"tags":[],"owner":{"account_id":11253290,"reputation":1289,"user_id":9167731,"display_name":"Semyon Kirekov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634737054,"creation_date":1634737054,"answer_id":69647058,"question_id":69646943,"body_markdown":"On a browser side query params are usually encoded with `encodeUriComponent`. So, the special characters can be transferred correctly. Then the server application decodes the string to original value.\r\n\r\nTherefore, I see no problems with the approach you proposed.","title":"Spring Web REST call special characters encoding","body":"<p>On a browser side query params are usually encoded with <code>encodeUriComponent</code>. So, the special characters can be transferred correctly. Then the server application decodes the string to original value.</p>\n<p>Therefore, I see no problems with the approach you proposed.</p>\n"}],"owner":{"account_id":1391304,"reputation":3822,"user_id":1322076,"accept_rate":56,"display_name":"johnny-b-goode"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1087,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1634737082,"creation_date":1634736657,"question_id":69646943,"body_markdown":"I am having troubles transferring strings, containing special characters from one java service to another java service. Here&#39;s what&#39;s happening. On the &#39;client&#39; im having a following call:\r\n\r\n    final String url = baseUrl() + &quot;/getOrders&quot;;\r\n    final UriComponentsBuilder builder = UriComponentsBuilder.fromHttpUrl(url);\r\n    builder.queryParam(&quot;username&quot;, username);\r\n    \r\n    final ResponseEntity&lt;TResponse&gt; restResp = restTemplate.exchange(builder.build().toString(), HttpMethod.GET, entity, OrdersResult.class);\r\n\r\nOn a &#39;server&#39; side there is a method with a following signature:\r\n\r\n    @RequestMapping(value = &quot;getOrders&quot;, method = RequestMethod.GET)\r\n    public OrdersResult getOrders(@RequestParam(value = &quot;username&quot;) String username)\r\n\r\nThe problem is that if username contains any special character, like &#39;+&#39; or &#39;|&#39;, username string gets to server with a white spaces instead of an actual character. For instance:\r\n\r\n&gt; &quot;I+Am|A+User&quot; -&gt; &quot;I Am A User&quot;\r\n\r\nI can fix it by manually encode url parameter on client:\r\n\r\n    builder.queryParam(&quot;username&quot;, URLEncoder.encode(username, &#39;UTF-8&#39;));\r\n\r\nand then decode on server.\r\n\r\nIs there any way to avoid manual encoding/decoding?","title":"Spring Web REST call special characters encoding","body":"<p>I am having troubles transferring strings, containing special characters from one java service to another java service. Here's what's happening. On the 'client' im having a following call:</p>\n<pre><code>final String url = baseUrl() + &quot;/getOrders&quot;;\nfinal UriComponentsBuilder builder = UriComponentsBuilder.fromHttpUrl(url);\nbuilder.queryParam(&quot;username&quot;, username);\n\nfinal ResponseEntity&lt;TResponse&gt; restResp = restTemplate.exchange(builder.build().toString(), HttpMethod.GET, entity, OrdersResult.class);\n</code></pre>\n<p>On a 'server' side there is a method with a following signature:</p>\n<pre><code>@RequestMapping(value = &quot;getOrders&quot;, method = RequestMethod.GET)\npublic OrdersResult getOrders(@RequestParam(value = &quot;username&quot;) String username)\n</code></pre>\n<p>The problem is that if username contains any special character, like '+' or '|', username string gets to server with a white spaces instead of an actual character. For instance:</p>\n<blockquote>\n<p>&quot;I+Am|A+User&quot; -&gt; &quot;I Am A User&quot;</p>\n</blockquote>\n<p>I can fix it by manually encode url parameter on client:</p>\n<pre><code>builder.queryParam(&quot;username&quot;, URLEncoder.encode(username, 'UTF-8'));\n</code></pre>\n<p>and then decode on server.</p>\n<p>Is there any way to avoid manual encoding/decoding?</p>\n"},{"tags":["java","jdbc","clickhouse"],"comments":[{"owner":{"account_id":16130481,"reputation":12029,"user_id":11644308,"display_name":"Denny Crane"},"score":1,"creation_date":1615402904,"post_id":66569817,"comment_id":117682388,"body_markdown":"everything is wrong here. CH does not support transactions. It&#39;s not a batch insert in terms of Clickhouse. Clickhouse does not return a number of inserted rows (it always 0).","body":"everything is wrong here. CH does not support transactions. It&#39;s not a batch insert in terms of Clickhouse. Clickhouse does not return a number of inserted rows (it always 0)."},{"owner":{"account_id":16130481,"reputation":12029,"user_id":11644308,"display_name":"Denny Crane"},"score":0,"creation_date":1615402907,"post_id":66569817,"comment_id":117682390,"body_markdown":"example for CH\nhttps://github.com/ClickHouse/clickhouse-jdbc/blob/master/src/test/java/ru/yandex/clickhouse/integration/BatchInsertsTest.java#L168","body":"example for CH <a href=\"https://github.com/ClickHouse/clickhouse-jdbc/blob/master/src/test/java/ru/yandex/clickhouse/integration/BatchInsertsTest.java#L168\" rel=\"nofollow noreferrer\">github.com/ClickHouse/clickhouse-jdbc/blob/master/src/test/j&zwnj;&#8203;ava/&hellip;</a>"},{"owner":{"account_id":13410337,"reputation":302,"user_id":9677056,"display_name":"Jo&#227;o Ramiro"},"score":0,"creation_date":1615552024,"post_id":66569817,"comment_id":117732364,"body_markdown":"Yup turns out all I had to change is use  preparedstatements instead of statemtns just like in the documentation","body":"Yup turns out all I had to change is use  preparedstatements instead of statemtns just like in the documentation"}],"answers":[{"tags":[],"owner":{"account_id":12878859,"reputation":16,"user_id":9314537,"display_name":"wuleice"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634736996,"creation_date":1634736996,"answer_id":69647038,"question_id":66569817,"body_markdown":"Try preprocessing to insert data:\r\n```\r\n// Setting Preprocessing Strings\r\nString query = &quot;INSERT INTO bank.test (numero,palavra) VALUES (?,?);&quot;;\r\n```\r\n\r\nthen, insert each parameter, and add the parameters to the batch, and submit the parameters:\r\n```\r\nPreparedStatement stmt = con.preparedStatement(query);\r\n// setting first parameter\r\nstmt.setInt(1, 3);\r\n// setting second parameter\r\nstmt.setString(2, &quot;girassol&quot;);\r\nstmt.addBatch();\r\nstmt.executeBatch();\r\n\r\ncon.commit();\r\n```\r\n","title":"Clickhouse Batch Execution not inserting new rows","body":"<p>Try preprocessing to insert data:</p>\n<pre><code>// Setting Preprocessing Strings\nString query = &quot;INSERT INTO bank.test (numero,palavra) VALUES (?,?);&quot;;\n</code></pre>\n<p>then, insert each parameter, and add the parameters to the batch, and submit the parameters:</p>\n<pre><code>PreparedStatement stmt = con.preparedStatement(query);\n// setting first parameter\nstmt.setInt(1, 3);\n// setting second parameter\nstmt.setString(2, &quot;girassol&quot;);\nstmt.addBatch();\nstmt.executeBatch();\n\ncon.commit();\n</code></pre>\n"}],"owner":{"account_id":13410337,"reputation":302,"user_id":9677056,"display_name":"Jo&#227;o Ramiro"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1280,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1634736996,"creation_date":1615396945,"question_id":66569817,"body_markdown":"I have just installed a clickhouse server locally, with package `clickhouse-server` linux package.\r\nI created some java code to insert N rows in table and it works well via JDBC.\r\nHowever to improve, performance I am now implementing it using batch instead of separate INSERTS, but the code below is not working and the executeBatch function is returning an array with length 0.\r\n\r\nFor testing purposes i created the following code:\r\n\r\n```java \r\n    public static void main(String[] args) throws PulsarClientException, SQLException {\r\n\r\n       Connection con = null;\r\n       String connectionString = &quot;jdbc:clickhouse://localhost:8123/bank&quot;;\r\n\r\n        try {\r\n            con = DriverManager.getConnection(connectionString);\r\n        } catch (SQLException throwables) {\r\n            throwables.printStackTrace();\r\n     \r\n        String query = &quot;INSERT INTO bank.test (numero,palavra) VALUES (3,&#39;girassol&#39;);&quot;;\r\n\r\n        Statement stmt = con.createStatement();\r\n\r\n        con.setAutoCommit(false);      \r\n        try {\r\n            stmt.addBatch(query);\r\n            stmt.addBatch(query);\r\n            stmt.executeBatch();\r\n\r\n            con.commit()\r\n        \r\n        }catch (Exception e)\r\n        {\r\n            e.printStackTrace();\r\n        }\r\n        con.close();\r\n\r\n    }\r\n```\r\n\r\nThe `stmt.executeBatch();` returns 0 elements and nothing is inserted onto the clickhouse server. I tested the same code on a Postgres DB just by replacing the connectionstring and it worked as expected.\r\nIs there any configuration that I am missing on clickhouse?","title":"Clickhouse Batch Execution not inserting new rows","body":"<p>I have just installed a clickhouse server locally, with package <code>clickhouse-server</code> linux package.\nI created some java code to insert N rows in table and it works well via JDBC.\nHowever to improve, performance I am now implementing it using batch instead of separate INSERTS, but the code below is not working and the executeBatch function is returning an array with length 0.</p>\n<p>For testing purposes i created the following code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public static void main(String[] args) throws PulsarClientException, SQLException {\n\n       Connection con = null;\n       String connectionString = &quot;jdbc:clickhouse://localhost:8123/bank&quot;;\n\n        try {\n            con = DriverManager.getConnection(connectionString);\n        } catch (SQLException throwables) {\n            throwables.printStackTrace();\n     \n        String query = &quot;INSERT INTO bank.test (numero,palavra) VALUES (3,'girassol');&quot;;\n\n        Statement stmt = con.createStatement();\n\n        con.setAutoCommit(false);      \n        try {\n            stmt.addBatch(query);\n            stmt.addBatch(query);\n            stmt.executeBatch();\n\n            con.commit()\n        \n        }catch (Exception e)\n        {\n            e.printStackTrace();\n        }\n        con.close();\n\n    }\n</code></pre>\n<p>The <code>stmt.executeBatch();</code> returns 0 elements and nothing is inserted onto the clickhouse server. I tested the same code on a Postgres DB just by replacing the connectionstring and it worked as expected.\nIs there any configuration that I am missing on clickhouse?</p>\n"},{"tags":["java","spring","spring-mvc","classpath","webjars"],"answers":[{"tags":[],"owner":{"account_id":90063,"reputation":9824,"user_id":248082,"accept_rate":64,"display_name":"nobeh"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1495811888,"creation_date":1495800083,"answer_id":44201118,"question_id":44200423,"body_markdown":"Let&#39;s say that the context root path is `/ctx`. With your configuration, a resource path as `/webjars/RESOURCE` is *actually* mapped to `/ctx/webjars/RESOURCE`; in contrary to common expectation that it should be mapped to `/webjars/RESOURCE`. \r\n\r\nBased on [Spring 4.2.x documentation][1] and [an example similar issue][2], you need to map `/webjars/**` to the default dispatcher servlet as:\r\n\r\n&gt; This allows for mapping the DispatcherServlet to &quot;/&quot; (thus overriding the mapping of the container’s default Servlet), while still allowing static resource requests to be handled by the container’s default Servlet. It configures a DefaultServletHttpRequestHandler with a URL mapping of &quot;/**&quot; and the lowest priority relative to other URL mappings.\r\n\r\nwhich means adding the following should fix the issue:\r\n\r\n    &lt;mvc:resources mapping=&quot;/webjars/**&quot; location=&quot;/webjars/&quot;&gt;\r\n    \t&lt;mvc:resource-chain&gt;\r\n\t    \t&lt;mvc:resource-cache /&gt;\r\n\t    &lt;/mvc:resource-chain&gt;\r\n    &lt;/mvc:resources&gt;\r\n    &lt;mvc:annotation-driven /&gt;\r\n    &lt;mvc:default-servlet-handler /&gt;\r\n\r\n\r\nAnother note that is [the example petclinic][3] uses `location=&quot;classpath:/META-INF/resources/webjars/&quot;` for webjars which I am not sure is relevant here. \r\n\r\nHope this helps.\r\n\r\n[1]: http://docs.spring.io/spring/docs/4.2.x/spring-framework-reference/htmlsingle/#mvc-config-static-resources\r\n[2]: https://stackoverflow.com/questions/25061237/spring-4-addresourcehandlers-not-resolving-the-static-resources\r\n[3]: https://github.com/spring-petclinic/spring-framework-petclinic/blob/master/src/main/resources/spring/mvc-core-config.xml#L37\r\n \r\n-----\r\nAdded by @Andremoniy:\r\n\r\nfor `Spring 4` it has slightly different markup:\r\n\r\n    &lt;mvc:resources mapping=&quot;/webjars/**&quot; location=&quot;/webjars/&quot;&gt;\r\n        &lt;mvc:resource-chain resource-cache=&quot;true&quot;/&gt;\r\n    &lt;/mvc:resources&gt;","title":"Webjars-locator doesn&#39;t work with XML based Spring MVC 4.2.x configuration?","body":"<p>Let's say that the context root path is <code>/ctx</code>. With your configuration, a resource path as <code>/webjars/RESOURCE</code> is <em>actually</em> mapped to <code>/ctx/webjars/RESOURCE</code>; in contrary to common expectation that it should be mapped to <code>/webjars/RESOURCE</code>. </p>\n\n<p>Based on <a href=\"http://docs.spring.io/spring/docs/4.2.x/spring-framework-reference/htmlsingle/#mvc-config-static-resources\" rel=\"nofollow noreferrer\">Spring 4.2.x documentation</a> and <a href=\"https://stackoverflow.com/questions/25061237/spring-4-addresourcehandlers-not-resolving-the-static-resources\">an example similar issue</a>, you need to map <code>/webjars/**</code> to the default dispatcher servlet as:</p>\n\n<blockquote>\n  <p>This allows for mapping the DispatcherServlet to \"/\" (thus overriding the mapping of the container’s default Servlet), while still allowing static resource requests to be handled by the container’s default Servlet. It configures a DefaultServletHttpRequestHandler with a URL mapping of \"/**\" and the lowest priority relative to other URL mappings.</p>\n</blockquote>\n\n<p>which means adding the following should fix the issue:</p>\n\n<pre><code>&lt;mvc:resources mapping=\"/webjars/**\" location=\"/webjars/\"&gt;\n    &lt;mvc:resource-chain&gt;\n        &lt;mvc:resource-cache /&gt;\n    &lt;/mvc:resource-chain&gt;\n&lt;/mvc:resources&gt;\n&lt;mvc:annotation-driven /&gt;\n&lt;mvc:default-servlet-handler /&gt;\n</code></pre>\n\n<p>Another note that is <a href=\"https://github.com/spring-petclinic/spring-framework-petclinic/blob/master/src/main/resources/spring/mvc-core-config.xml#L37\" rel=\"nofollow noreferrer\">the example petclinic</a> uses <code>location=\"classpath:/META-INF/resources/webjars/\"</code> for webjars which I am not sure is relevant here. </p>\n\n<p>Hope this helps.</p>\n\n<hr>\n\n<p>Added by @Andremoniy:</p>\n\n<p>for <code>Spring 4</code> it has slightly different markup:</p>\n\n<pre><code>&lt;mvc:resources mapping=\"/webjars/**\" location=\"/webjars/\"&gt;\n    &lt;mvc:resource-chain resource-cache=\"true\"/&gt;\n&lt;/mvc:resources&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23081327,"reputation":21,"user_id":17193564,"display_name":"Jaco de Groot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634736965,"creation_date":1634736965,"answer_id":69647026,"question_id":44200423,"body_markdown":"To answer your remaining question [&quot;why it isn&#39;t described in webjar documentation&quot;][1]:\r\n\r\nIt is/was an issue that has been reported on May 3, 2016:\r\n\r\nhttps://github.com/webjars/webjars/issues/1395\r\n\r\nAs described on this page this issue also mentions that Spring MVC requires the resourceChain() method. I created a PR today to fix the issue:\r\n\r\nhttps://github.com/webjars/webjars/pull/1946\r\n\r\nFYI: I tried to get version agnostic url&#39;s working the way it was described in the documentation but didn&#39;t succeed. Along the way I also found the following issue that mentions that &quot;The resourceChain() method must be called for version-agnostic WebJars&quot;:\r\n\r\nhttps://github.com/spring-projects/spring-framework/issues/25410\r\n\r\n[1]: https://stackoverflow.com/questions/44200423/webjars-locator-doesnt-work-with-xml-based-spring-mvc-4-2-x-configuration#comment75422542_44201118\r\n","title":"Webjars-locator doesn&#39;t work with XML based Spring MVC 4.2.x configuration?","body":"<p>To answer your remaining question <a href=\"https://stackoverflow.com/questions/44200423/webjars-locator-doesnt-work-with-xml-based-spring-mvc-4-2-x-configuration#comment75422542_44201118\">&quot;why it isn't described in webjar documentation&quot;</a>:</p>\n<p>It is/was an issue that has been reported on May 3, 2016:</p>\n<p><a href=\"https://github.com/webjars/webjars/issues/1395\" rel=\"nofollow noreferrer\">https://github.com/webjars/webjars/issues/1395</a></p>\n<p>As described on this page this issue also mentions that Spring MVC requires the resourceChain() method. I created a PR today to fix the issue:</p>\n<p><a href=\"https://github.com/webjars/webjars/pull/1946\" rel=\"nofollow noreferrer\">https://github.com/webjars/webjars/pull/1946</a></p>\n<p>FYI: I tried to get version agnostic url's working the way it was described in the documentation but didn't succeed. Along the way I also found the following issue that mentions that &quot;The resourceChain() method must be called for version-agnostic WebJars&quot;:</p>\n<p><a href=\"https://github.com/spring-projects/spring-framework/issues/25410\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-framework/issues/25410</a></p>\n"}],"owner":{"account_id":1597725,"reputation":34231,"user_id":1479414,"accept_rate":71,"display_name":"Andremoniy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1868,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":44201118,"answer_count":2,"score":3,"last_activity_date":1634736965,"creation_date":1495798008,"question_id":44200423,"body_markdown":"I have a `Spring MVC 4.2.x` project. I am configuring it via `XML` based configuration file:\r\n\r\n    &lt;servlet&gt;\r\n        &lt;servlet-name&gt;foo&lt;/servlet-name&gt;\r\n        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\r\n        &lt;init-param&gt;\r\n            &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\r\n            &lt;param-value&gt;/WEB-INF/context.xml&lt;/param-value&gt;\r\n        &lt;/init-param&gt;\r\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\r\n    &lt;/servlet&gt;\r\n\r\nIn the `context.xml` file I have configured resources and `annotation-driven` mode:\r\n\r\n    &lt;mvc:resources mapping=&quot;/webjars/**&quot; location=&quot;/webjars/&quot;/&gt;\r\n    &lt;mvc:annotation-driven/&gt;\r\n\r\nEverything works fine except the one thing: `webjars-locator` - **Webjars locator doesn&#39;t work at all**. \r\n\r\n\r\n----\r\n\r\nI&#39;ve started look into the Spring MVC sources to understand what&#39;s going wrong, and found, that `webjars-locator` works through `WebJarsResourceResolver` class, which&#39;s object is added in the `ResourceChainRegistration.getResourceResolvers()` class method.\r\n\r\nThe full sequence looks like:\r\n\r\n`WebMvcConfigurationSupport.resourceHandlerMapping()` &gt;&gt; `ResourceHandlerRegistration.getHandlerMapping()` &gt;&gt; `ResourceHandlerRegistration.getRequestHandler()` &gt;&gt;\r\n`ResourceChainRegistration.getResourceResolvers()`, where it is added as:\r\n\r\n\tif (isWebJarsAssetLocatorPresent) {\r\n\t\tresult.add(new WebJarsResourceResolver());\r\n\t}\r\n\r\nThe problem, is that in case of XML based configuration described above, this sequence is not invoked, neither `WebMvcConfigurationSupport` class is used.\r\n\r\nFurthermore, if I add \r\n\r\n    @EnableWebMvc\r\n    @Configuration\r\n    public class WebConfig {\r\n    }\r\n\r\ninto project, `WebMvcConfigurationSupport` obviously works, but in `ResourceHandlerRegistration.getHandlerMapping()`:\r\n\r\n\tprotected AbstractHandlerMapping getHandlerMapping() {\r\n\t\tif (registrations.isEmpty()) {\r\n\t\t\treturn null;\r\n\t\t}\r\n    ...\r\n    }\r\n\r\n`registrations` **is empty!**\r\n\r\n---\r\n\r\nAfter all, the only one way how to forcibly make Spring to add `WebJarsResourceResolver` into the resolver chain, is:\r\n\r\n1) remove `&lt;mvc:resources mapping=&quot;/webjars/**&quot; location=&quot;/webjars/&quot;/&gt;` from the `context.xml` and \r\n\r\n2) add `addResourceHandlers` into `WebConfig`:\r\n\r\n    @Override\r\n    public void addResourceHandlers(ResourceHandlerRegistry registry) {\r\n        registry\r\n                .addResourceHandler(&quot;/webjars/**&quot;)\r\n                .addResourceLocations(&quot;/webjars/&quot;)\r\n                .setCachePeriod(3600)\r\n                .resourceChain(true)  // !!! very important\r\n        ;\r\n    }\r\n\r\n ----\r\n\r\n**My question is**: what am I doing wrong? Why XML bases configuration doesn&#39;t cause `WebJarsResourceResolver` to be registered?\r\n\r\n\r\n","title":"Webjars-locator doesn&#39;t work with XML based Spring MVC 4.2.x configuration?","body":"<p>I have a <code>Spring MVC 4.2.x</code> project. I am configuring it via <code>XML</code> based configuration file:</p>\n\n<pre><code>&lt;servlet&gt;\n    &lt;servlet-name&gt;foo&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n    &lt;init-param&gt;\n        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n        &lt;param-value&gt;/WEB-INF/context.xml&lt;/param-value&gt;\n    &lt;/init-param&gt;\n    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n&lt;/servlet&gt;\n</code></pre>\n\n<p>In the <code>context.xml</code> file I have configured resources and <code>annotation-driven</code> mode:</p>\n\n<pre><code>&lt;mvc:resources mapping=\"/webjars/**\" location=\"/webjars/\"/&gt;\n&lt;mvc:annotation-driven/&gt;\n</code></pre>\n\n<p>Everything works fine except the one thing: <code>webjars-locator</code> - <strong>Webjars locator doesn't work at all</strong>. </p>\n\n<hr>\n\n<p>I've started look into the Spring MVC sources to understand what's going wrong, and found, that <code>webjars-locator</code> works through <code>WebJarsResourceResolver</code> class, which's object is added in the <code>ResourceChainRegistration.getResourceResolvers()</code> class method.</p>\n\n<p>The full sequence looks like:</p>\n\n<p><code>WebMvcConfigurationSupport.resourceHandlerMapping()</code> >> <code>ResourceHandlerRegistration.getHandlerMapping()</code> >> <code>ResourceHandlerRegistration.getRequestHandler()</code> >>\n<code>ResourceChainRegistration.getResourceResolvers()</code>, where it is added as:</p>\n\n<pre><code>if (isWebJarsAssetLocatorPresent) {\n    result.add(new WebJarsResourceResolver());\n}\n</code></pre>\n\n<p>The problem, is that in case of XML based configuration described above, this sequence is not invoked, neither <code>WebMvcConfigurationSupport</code> class is used.</p>\n\n<p>Furthermore, if I add </p>\n\n<pre><code>@EnableWebMvc\n@Configuration\npublic class WebConfig {\n}\n</code></pre>\n\n<p>into project, <code>WebMvcConfigurationSupport</code> obviously works, but in <code>ResourceHandlerRegistration.getHandlerMapping()</code>:</p>\n\n<pre><code>protected AbstractHandlerMapping getHandlerMapping() {\n    if (registrations.isEmpty()) {\n        return null;\n    }\n...\n}\n</code></pre>\n\n<p><code>registrations</code> <strong>is empty!</strong></p>\n\n<hr>\n\n<p>After all, the only one way how to forcibly make Spring to add <code>WebJarsResourceResolver</code> into the resolver chain, is:</p>\n\n<p>1) remove <code>&lt;mvc:resources mapping=\"/webjars/**\" location=\"/webjars/\"/&gt;</code> from the <code>context.xml</code> and </p>\n\n<p>2) add <code>addResourceHandlers</code> into <code>WebConfig</code>:</p>\n\n<pre><code>@Override\npublic void addResourceHandlers(ResourceHandlerRegistry registry) {\n    registry\n            .addResourceHandler(\"/webjars/**\")\n            .addResourceLocations(\"/webjars/\")\n            .setCachePeriod(3600)\n            .resourceChain(true)  // !!! very important\n    ;\n}\n</code></pre>\n\n<hr>\n\n<p><strong>My question is</strong>: what am I doing wrong? Why XML bases configuration doesn't cause <code>WebJarsResourceResolver</code> to be registered?</p>\n"},{"tags":["java","macos","android-studio"],"comments":[{"owner":{"account_id":389829,"reputation":2926,"user_id":749509,"accept_rate":71,"display_name":"O&#39;Rooney"},"score":0,"creation_date":1638324714,"post_id":43188266,"comment_id":124056828,"body_markdown":"Also, using the built-in AS JVM seems like a good idea for compatibility ie. the tools will be tested with that version.","body":"Also, using the built-in AS JVM seems like a good idea for compatibility ie. the tools will be tested with that version."}],"answers":[{"tags":[],"owner":{"account_id":875804,"reputation":12526,"user_id":925478,"accept_rate":38,"display_name":"Myk Willis"},"down_vote_count":0,"up_vote_count":32,"is_accepted":false,"score":32,"last_activity_date":1634736925,"creation_date":1495552652,"answer_id":44138853,"question_id":43188266,"body_markdown":"Add this to your `~/.profile` or similar:\r\n\r\n    # Use the JDK embedded with Android Studio 2020.3+ for command-line builds\r\n    export JAVA_HOME=&#39;/Applications/Android Studio.app/Contents/jre/Contents/Home&#39;\r\n\r\n    # (Use the next line instead for older Android Studio 2.2+)\r\n    #export JAVA_HOME=&#39;/Applications/Android Studio.app/Contents/jre/jdk/Contents/Home&#39;\r\n\r\nCommand-line builds via `gradlew`, and any other well-behaved script, will then use the version of the SDK that ships with Android Studio 2.2+.\r\n","title":"Using Android Studio&#39;s built-in Java on the command line in MacOS","body":"<p>Add this to your <code>~/.profile</code> or similar:</p>\n<pre><code># Use the JDK embedded with Android Studio 2020.3+ for command-line builds\nexport JAVA_HOME='/Applications/Android Studio.app/Contents/jre/Contents/Home'\n\n# (Use the next line instead for older Android Studio 2.2+)\n#export JAVA_HOME='/Applications/Android Studio.app/Contents/jre/jdk/Contents/Home'\n</code></pre>\n<p>Command-line builds via <code>gradlew</code>, and any other well-behaved script, will then use the version of the SDK that ships with Android Studio 2.2+.</p>\n"}],"owner":{"account_id":1017495,"reputation":1670,"user_id":1028733,"accept_rate":50,"display_name":"Taryn"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8035,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"answer_count":1,"score":18,"last_activity_date":1634736925,"creation_date":1491232365,"question_id":43188266,"body_markdown":"There&#39;s lots of info here (much obsolete) on installing Java on the mac, and getting Android Studio to use the right versions.\r\nBut recent builds of Android Studio (2.2 and on?) provide their own Java, and for most Mac users, there&#39;s just no reason (or desire) to install a browser or command line Java anymore ... until you want to use any of the Studio&#39;s shell tools, and realize they&#39;re all in java, and the studio&#39;s Java is not integrated into the wonder that is java_home.\r\n\r\nObviously, your path vars need to be updated to include the Android SDK, and JAVA_HOME and JDK_HOME need to be set, but the actual details of doing so are thin on the ground.\r\n\r\nSo ... what are the correct paths and settings needed to simply use the Studio&#39;s embedded java and android tools in MacOS shells, instead of installing extra Java instances from Oracle?","title":"Using Android Studio&#39;s built-in Java on the command line in MacOS","body":"<p>There's lots of info here (much obsolete) on installing Java on the mac, and getting Android Studio to use the right versions.\nBut recent builds of Android Studio (2.2 and on?) provide their own Java, and for most Mac users, there's just no reason (or desire) to install a browser or command line Java anymore ... until you want to use any of the Studio's shell tools, and realize they're all in java, and the studio's Java is not integrated into the wonder that is java_home.</p>\n\n<p>Obviously, your path vars need to be updated to include the Android SDK, and JAVA_HOME and JDK_HOME need to be set, but the actual details of doing so are thin on the ground.</p>\n\n<p>So ... what are the correct paths and settings needed to simply use the Studio's embedded java and android tools in MacOS shells, instead of installing extra Java instances from Oracle?</p>\n"},{"tags":["java","spring","redis"],"owner":{"account_id":4091337,"reputation":655,"user_id":3359236,"accept_rate":40,"display_name":"Farwell_Liu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1744,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":0,"score":5,"last_activity_date":1634736836,"creation_date":1559125992,"question_id":56358501,"body_markdown":"I am using java spring redisTemplate to access redis server. I want to get a value from redis by a key. The key does not exits probably, or it existed but the value is empty. But the redisTemplate always return null. \r\n\r\nI can use this code to determine if the key exists:\r\n```\r\nredisTemplate.hasKey(&quot;name&quot;);\r\n```\r\nBut the problem is that I need to access the redis server again to get the value :\r\n```\r\n//it always returns null when key doesn&#39;t exist or value is empty\r\nvar v = redisTemplate.opsForValue().get(&quot;name&quot;);\r\n```\r\nBecause I want the step 1 and step 2 is atomic. If I use code in step 1 to get existing or not firstly, it may be changed when execute step 2. Another reason that I think it performances better.\r\n\r\nSo could you help me please? Thank you!","title":"Spring redisTemplate, how to determine the key doesn&#39;t exist or the value is empty by access redis once?","body":"<p>I am using java spring redisTemplate to access redis server. I want to get a value from redis by a key. The key does not exits probably, or it existed but the value is empty. But the redisTemplate always return null. </p>\n\n<p>I can use this code to determine if the key exists:</p>\n\n<pre><code>redisTemplate.hasKey(\"name\");\n</code></pre>\n\n<p>But the problem is that I need to access the redis server again to get the value :</p>\n\n<pre><code>//it always returns null when key doesn't exist or value is empty\nvar v = redisTemplate.opsForValue().get(\"name\");\n</code></pre>\n\n<p>Because I want the step 1 and step 2 is atomic. If I use code in step 1 to get existing or not firstly, it may be changed when execute step 2. Another reason that I think it performances better.</p>\n\n<p>So could you help me please? Thank you!</p>\n"},{"tags":["java","facebook-insights","restfb"],"comments":[{"owner":{"account_id":1466941,"reputation":1440,"user_id":1379528,"display_name":"Norbert"},"score":0,"creation_date":1550224707,"post_id":54647752,"comment_id":96199155,"body_markdown":"Can you please check what&#39;s your role on that page. Maybe it is &quot;Analytics&quot; only, so you can see insight but no monetization information.","body":"Can you please check what&#39;s your role on that page. Maybe it is &quot;Analytics&quot; only, so you can see insight but no monetization information."},{"owner":{"account_id":8615720,"reputation":39,"user_id":6452654,"display_name":"Tom Good"},"score":0,"creation_date":1550224938,"post_id":54647752,"comment_id":96199268,"body_markdown":"@Norbert i have the solution, it’s because it was trying to get a video that wasn’t monetised.","body":"@Norbert i have the solution, it’s because it was trying to get a video that wasn’t monetised."},{"owner":{"account_id":242931,"reputation":1540,"user_id":514786,"accept_rate":56,"display_name":"Milovan Zogovic"},"score":0,"creation_date":1574069651,"post_id":54647752,"comment_id":104085108,"body_markdown":"@TomGood is there a way to check via api whether the video is monetized or not?","body":"@TomGood is there a way to check via api whether the video is monetized or not?"},{"owner":{"account_id":8258039,"reputation":976,"user_id":6210552,"display_name":"Filippo Loddo"},"score":0,"creation_date":1616679385,"post_id":54647752,"comment_id":118082485,"body_markdown":"Getting same error when accessing in python or just a direct browser query on the API monetization metrics. How to solve it?","body":"Getting same error when accessing in python or just a direct browser query on the API monetization metrics. How to solve it?"}],"owner":{"account_id":8615720,"reputation":39,"user_id":6452654,"display_name":"Tom Good"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":550,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1634736393,"creation_date":1549966760,"question_id":54647752,"body_markdown":"For some reason i get the error:\r\n\r\n&quot;Received Facebook error response of type OAuthException: (#200) Monetization metrics are only visible for Page admins with access to monetization insights. (code 200, subcode null) &#39;null - null&#39;&quot;\r\n\r\nAlthough when I access the same video insight through Facebook&#39;s Graph API, it gives me the value no problem. \r\n\r\n    private void totalCpm() {\r\n        if (tickBox2.isSelected()) {\r\n            FacebookClient fbClient2 = new DefaultFacebookClient(pageToken, com.restfb.Version.VERSION_3_2); \r\n            int i=0;\r\n            for (i=0; i&lt;=x-1; i++){    \r\n                Connection&lt;Insight&gt; insightCon2 = fbClient2.fetchConnection(vidList[i] + &quot;/video_insights&quot;, Insight.class, Parameter.with(&quot;metric&quot;, &quot;total_video_ad_break_ad_cpm&quot;));\r\n                \r\n                for (List&lt;Insight&gt; insights: insightCon2) {\r\n                    for (Insight insight : insights) {\r\n                        insightList4 = (insight.getValues().toString());\r\n                        insightList5 = insightList4.replaceAll(&quot;\\\\D+&quot;,&quot;&quot;);\r\n                        totalCpmList[i] = insightList5;\r\n                        insightValue = insight.getValues().toString();\r\n                    }\r\n                }               \r\n            }  \r\n        }\r\n    }\r\n\r\nI&#39;m also able to access other video insights through my application with the same format without any issues. So I&#39;m wondering if I&#39;m missing something when it comes to monetary values.","title":"How do I get monetization insights for my page with Facebook API using java?","body":"<p>For some reason i get the error:</p>\n\n<p>\"Received Facebook error response of type OAuthException: (#200) Monetization metrics are only visible for Page admins with access to monetization insights. (code 200, subcode null) 'null - null'\"</p>\n\n<p>Although when I access the same video insight through Facebook's Graph API, it gives me the value no problem. </p>\n\n<pre><code>private void totalCpm() {\n    if (tickBox2.isSelected()) {\n        FacebookClient fbClient2 = new DefaultFacebookClient(pageToken, com.restfb.Version.VERSION_3_2); \n        int i=0;\n        for (i=0; i&lt;=x-1; i++){    \n            Connection&lt;Insight&gt; insightCon2 = fbClient2.fetchConnection(vidList[i] + \"/video_insights\", Insight.class, Parameter.with(\"metric\", \"total_video_ad_break_ad_cpm\"));\n\n            for (List&lt;Insight&gt; insights: insightCon2) {\n                for (Insight insight : insights) {\n                    insightList4 = (insight.getValues().toString());\n                    insightList5 = insightList4.replaceAll(\"\\\\D+\",\"\");\n                    totalCpmList[i] = insightList5;\n                    insightValue = insight.getValues().toString();\n                }\n            }               \n        }  \n    }\n}\n</code></pre>\n\n<p>I'm also able to access other video insights through my application with the same format without any issues. So I'm wondering if I'm missing something when it comes to monetary values.</p>\n"},{"tags":["java","jms","solace"],"answers":[{"tags":[],"owner":{"account_id":6842557,"reputation":1693,"user_id":5262399,"display_name":"Russell Sim"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1556871795,"creation_date":1556871795,"answer_id":55965914,"question_id":55957866,"body_markdown":"`Message VPN Not Allowed` is caused by attempting to connect to a Message VPN that does not exist.\r\n\r\nPlease verify whether the Message VPN that is specified by your application/configuration files exists on the Solace message broker.\r\n\r\n&gt; I have provided all the details and able to connect to queue with out\r\n&gt; failure (Logger is displaying success messages). But post deployment,\r\n&gt; it starts throwing error message : Error Code 403 Message VPN Not\r\n&gt; Allowed.\r\n\r\nFrom your description, it appears that your testing/debugging/development environment is not the same after deploying.","title":"Solace error 403: Message VPN Not Allowed","body":"<p><code>Message VPN Not Allowed</code> is caused by attempting to connect to a Message VPN that does not exist.</p>\n\n<p>Please verify whether the Message VPN that is specified by your application/configuration files exists on the Solace message broker.</p>\n\n<blockquote>\n  <p>I have provided all the details and able to connect to queue with out\n  failure (Logger is displaying success messages). But post deployment,\n  it starts throwing error message : Error Code 403 Message VPN Not\n  Allowed.</p>\n</blockquote>\n\n<p>From your description, it appears that your testing/debugging/development environment is not the same after deploying.</p>\n"}],"owner":{"account_id":3228532,"reputation":133,"user_id":2724291,"display_name":"Nilesh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4551,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1634736361,"creation_date":1556819924,"question_id":55957866,"body_markdown":"I am trying to connect to solace queue using solace APIs. After Successful connection, I am getting error : Error Code 403 Message VPN Not Allowed. \r\n\r\nI have written code to connect WAR file to Solace queue. I have provided all the details and able to connect to queue with out failure (Logger is displaying success messages). But post deployment, it starts throwing  error message : Error Code 403 Message VPN Not Allowed.\r\n\r\nThe java doc describes &quot;The Message VPN does not contain a username that matches the one provided by the REST HTTP client&quot;, but I feel this could not be issue as I am able to connect to sollace at first instance and then JBoss reverts build and undeploys it because of above error.\r\n\r\nI am unable to find/debug root cause of this issue as I am unable to find call hierarchy of failed code.","title":"Solace error 403: Message VPN Not Allowed","body":"<p>I am trying to connect to solace queue using solace APIs. After Successful connection, I am getting error : Error Code 403 Message VPN Not Allowed. </p>\n\n<p>I have written code to connect WAR file to Solace queue. I have provided all the details and able to connect to queue with out failure (Logger is displaying success messages). But post deployment, it starts throwing  error message : Error Code 403 Message VPN Not Allowed.</p>\n\n<p>The java doc describes \"The Message VPN does not contain a username that matches the one provided by the REST HTTP client\", but I feel this could not be issue as I am able to connect to sollace at first instance and then JBoss reverts build and undeploys it because of above error.</p>\n\n<p>I am unable to find/debug root cause of this issue as I am unable to find call hierarchy of failed code.</p>\n"},{"tags":["java","javafx","multidimensional-array","sudoku","txt"],"comments":[{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1622660099,"post_id":67810843,"comment_id":119858868,"body_markdown":"What is supposed to happen when the button is pressed?","body":"What is supposed to happen when the button is pressed?"},{"owner":{"account_id":21638250,"reputation":235,"user_id":15960888,"display_name":"OnlyProblems"},"score":0,"creation_date":1622660281,"post_id":67810843,"comment_id":119858935,"body_markdown":"ohh im sorry! i want to show the numbers in my sudoku grid","body":"ohh im sorry! i want to show the numbers in my sudoku grid"},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":1,"creation_date":1622660372,"post_id":67810843,"comment_id":119858974,"body_markdown":"So in the event handler: 1. get the `int[][]` array from your import class, 2. iterate through it, and set the text of each text field to the corresponding value from the array. Right now you are loading the entire text file 81 times (why?????)","body":"So in the event handler: 1. get the <code>int[][]</code> array from your import class, 2. iterate through it, and set the text of each text field to the corresponding value from the array. Right now you are loading the entire text file 81 times (why?????)"}],"owner":{"account_id":21638250,"reputation":235,"user_id":15960888,"display_name":"OnlyProblems"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":188,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1634735949,"creation_date":1622659722,"question_id":67810843,"body_markdown":"I want to load the date from the `sudoku3000.txt` file into my javafx interface over an Example button. Scann the sudoku3000.txt file into a 2d araay is working but im not sure how to override the textFiles with my new 2d array. Thanks for help!  \r\n\r\nthis is my `MyFxApp`:\r\n\r\n    TextField[][] textFields = new TextField[9][9];\r\n\r\n    @Override\r\n    public void start(Stage primaryStage) throws Exception {\r\n\r\n\r\n        GridPane grid = new GridPane();\r\n        grid.setAlignment(Pos.CENTER);\r\n        grid.setHgap(10);\r\n        grid.setVgap(10);\r\n        grid.setPadding(new Insets(25, 25, 25, 25));\r\n        //Insert the the text fields into the grid\r\n        for (int r = 0; r &lt; 9; r++) {\r\n            for (int c = 0; c &lt; 9; c++) {\r\n                TextField t = new TextField();\r\n                t.setAlignment((Pos.CENTER));\r\n                textFields[c][r] = t;\r\n                grid.add(t, c, r);\r\n            }\r\n        }\r\n\r\n      \r\n        //This is the Example button that i want to override\r\n        btn = new Button(&quot;Example&quot;);\r\n        hBox = new HBox(10);\r\n        hBox.getChildren().add(btn);\r\n        hBox.setAlignment(Pos.BOTTOM_CENTER);\r\n        grid.add(hBox, 3, 9, 3, 1);\r\n\r\n        btn.setOnAction(new EventHandler&lt;ActionEvent&gt;() {\r\n            @Override\r\n            public void handle(ActionEvent event) {\r\n                ImportText importT = new ImportText();\r\n                for (int r = 0; r &lt; 9; r++) {\r\n                    for (int c = 0; c &lt; 9; c++) {\r\n                        try {\r\n                            int[][] newArray = importT.text();\r\n                            newArray[c][r] = Integer.valueOf(textFields[c][r].getText().trim());\r\n                        } catch (FileNotFoundException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n      \r\n\r\n        Scene scene = new Scene(grid, 400, 400);\r\n        primaryStage.setScene(scene);\r\n        primaryStage.show();\r\n    }\r\n\r\nthis is my `ImportText` class\r\n\r\n    public ImportText() {\r\n    }\r\n\r\n    public int[][] text() throws FileNotFoundException {\r\n\r\n        Scanner sc = new Scanner(new BufferedReader(new FileReader(&quot;src/main/resources/sudoku.txt&quot;)));\r\n        int[][] myArray = new int[9][9];\r\n            for (int c = 0; c &lt; myArray.length; c++) {\r\n                String[] line = sc.nextLine().trim().split(&quot; &quot;);\r\n                for (int r = 0; r &lt; line.length; r++) {\r\n                    myArray[c][r] = Integer.parseInt(line[r]);\r\n                }\r\n\r\n        }\r\n        //System.out.println(Arrays.deepToString(myArray));\r\n        return myArray;\r\n    }\r\n\r\nthis is my sudoku.txt file\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    4 8 3 9 2 1 6 5 7\r\n    9 6 7 3 4 5 8 2 1\r\n    2 5 1 8 7 6 4 9 3\r\n    5 4 8 1 3 2 9 7 6\r\n    7 2 9 5 6 4 1 3 8\r\n    1 3 6 7 9 8 2 4 5\r\n    3 7 2 6 8 9 5 1 4\r\n    8 1 4 2 5 3 7 6 9\r\n    6 9 5 4 1 7 3 8 2","title":"2d array from a txt file into JavaFx(sudoku)","body":"<p>I want to load the date from the <code>sudoku3000.txt</code> file into my javafx interface over an Example button. Scann the sudoku3000.txt file into a 2d araay is working but im not sure how to override the textFiles with my new 2d array. Thanks for help!</p>\n<p>this is my <code>MyFxApp</code>:</p>\n<pre><code>TextField[][] textFields = new TextField[9][9];\n\n@Override\npublic void start(Stage primaryStage) throws Exception {\n\n\n    GridPane grid = new GridPane();\n    grid.setAlignment(Pos.CENTER);\n    grid.setHgap(10);\n    grid.setVgap(10);\n    grid.setPadding(new Insets(25, 25, 25, 25));\n    //Insert the the text fields into the grid\n    for (int r = 0; r &lt; 9; r++) {\n        for (int c = 0; c &lt; 9; c++) {\n            TextField t = new TextField();\n            t.setAlignment((Pos.CENTER));\n            textFields[c][r] = t;\n            grid.add(t, c, r);\n        }\n    }\n\n  \n    //This is the Example button that i want to override\n    btn = new Button(&quot;Example&quot;);\n    hBox = new HBox(10);\n    hBox.getChildren().add(btn);\n    hBox.setAlignment(Pos.BOTTOM_CENTER);\n    grid.add(hBox, 3, 9, 3, 1);\n\n    btn.setOnAction(new EventHandler&lt;ActionEvent&gt;() {\n        @Override\n        public void handle(ActionEvent event) {\n            ImportText importT = new ImportText();\n            for (int r = 0; r &lt; 9; r++) {\n                for (int c = 0; c &lt; 9; c++) {\n                    try {\n                        int[][] newArray = importT.text();\n                        newArray[c][r] = Integer.valueOf(textFields[c][r].getText().trim());\n                    } catch (FileNotFoundException e) {\n                        e.printStackTrace();\n                    }\n                }\n            }\n        }\n    });\n\n  \n\n    Scene scene = new Scene(grid, 400, 400);\n    primaryStage.setScene(scene);\n    primaryStage.show();\n}\n</code></pre>\n<p>this is my <code>ImportText</code> class</p>\n<pre><code>public ImportText() {\n}\n\npublic int[][] text() throws FileNotFoundException {\n\n    Scanner sc = new Scanner(new BufferedReader(new FileReader(&quot;src/main/resources/sudoku.txt&quot;)));\n    int[][] myArray = new int[9][9];\n        for (int c = 0; c &lt; myArray.length; c++) {\n            String[] line = sc.nextLine().trim().split(&quot; &quot;);\n            for (int r = 0; r &lt; line.length; r++) {\n                myArray[c][r] = Integer.parseInt(line[r]);\n            }\n\n    }\n    //System.out.println(Arrays.deepToString(myArray));\n    return myArray;\n}\n</code></pre>\n<p>this is my sudoku.txt file</p>\n<pre class=\"lang-none prettyprint-override\"><code>4 8 3 9 2 1 6 5 7\n9 6 7 3 4 5 8 2 1\n2 5 1 8 7 6 4 9 3\n5 4 8 1 3 2 9 7 6\n7 2 9 5 6 4 1 3 8\n1 3 6 7 9 8 2 4 5\n3 7 2 6 8 9 5 1 4\n8 1 4 2 5 3 7 6 9\n6 9 5 4 1 7 3 8 2\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":18243171,"reputation":19300,"user_id":13279831,"display_name":"Nowhere Man"},"score":0,"creation_date":1634732196,"post_id":69645639,"comment_id":123103255,"body_markdown":"It seems that you&#39;re abusing constructor of Shop (constructors are supposed to create instance of a class, not run the entire process) as well as static and instance members/fields in class `Tokens` and possibly `Bank`","body":"It seems that you&#39;re abusing constructor of Shop (constructors are supposed to create instance of a class, not run the entire process) as well as static and instance members/fields in class <code>Tokens</code> and possibly <code>Bank</code>"},{"owner":{"account_id":18958423,"reputation":377,"user_id":13834503,"display_name":"egemenakturk"},"score":0,"creation_date":1634732919,"post_id":69645639,"comment_id":123103565,"body_markdown":"@AlexRudenko is right. Consturctor are supposed to create instance. You have to do all the process under void main(){}.","body":"@AlexRudenko is right. Consturctor are supposed to create instance. You have to do all the process under void main(){}."},{"owner":{"account_id":23077013,"reputation":73,"user_id":17189826,"display_name":"Sdev"},"score":0,"creation_date":1634733841,"post_id":69645639,"comment_id":123103981,"body_markdown":"So @AlexRudenko, should I transfer all of this code into my main.java ? Or just under public class Shop {","body":"So @AlexRudenko, should I transfer all of this code into my main.java ? Or just under public class Shop {"},{"owner":{"account_id":18243171,"reputation":19300,"user_id":13279831,"display_name":"Nowhere Man"},"score":0,"creation_date":1634735668,"post_id":69645639,"comment_id":123104872,"body_markdown":"@Sdev, my point is that you should separate creation of `Shop`, `Bank`, `Tokens` from their processing/handling in driver class(es).","body":"@Sdev, my point is that you should separate creation of <code>Shop</code>, <code>Bank</code>, <code>Tokens</code> from their processing/handling in driver class(es)."},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1634739017,"post_id":69645639,"comment_id":123106631,"body_markdown":"Your code for buying tokens doesn&#39;t have an `if` and an `else` case - it has two `if` cases. Assuming that the starting amount in the bank account was 1500 when you type in `/buy Tokens` then both cases will execute because the code in the first `if` reduces the amount in the bank account by 1000, leading to the condition `Bank.amount &lt; 1000` also being true.","body":"Your code for buying tokens doesn&#39;t have an <code>if</code> and an <code>else</code> case - it has two <code>if</code> cases. Assuming that the starting amount in the bank account was 1500 when you type in <code>&#47;buy Tokens</code> then both cases will execute because the code in the first <code>if</code> reduces the amount in the bank account by 1000, leading to the condition <code>Bank.amount &lt; 1000</code> also being true."}],"answers":[{"tags":[],"owner":{"account_id":18958423,"reputation":377,"user_id":13834503,"display_name":"egemenakturk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634735882,"creation_date":1634735882,"answer_id":69646728,"question_id":69645639,"body_markdown":"put your process stage into the main class. other 3 class is your Objects. You can&#39;t handle the process into an Object constructor.","title":"Int won&#39;t add to a variable even if code has no errors","body":"<p>put your process stage into the main class. other 3 class is your Objects. You can't handle the process into an Object constructor.</p>\n"}],"owner":{"account_id":23077013,"reputation":73,"user_id":17189826,"display_name":"Sdev"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1634735882,"creation_date":1634731358,"question_id":69645639,"body_markdown":"I&#39;m working on my first java project and I have a problem with my code, when buying &quot;tokens&quot; from shop.\r\n\r\nThe code has no errors but it won&#39;t give me tokens.\r\nWhen I do /buy Token it will also not work properly, here is some output from the command :\r\n\r\n/buy Token\r\nYou&#39;ve successfully bought a Token! \r\n                                     &lt; - Doesn&#39;t work properly, and put the if and else output. \r\n\r\nYou don&#39;t have enough coins to buy a Token!\r\n\r\n/tokens &lt; - trying to do another command, it won&#39;t work. \r\n\r\n/tokens &lt; - trying to do another command, it won&#39;t work. \r\n\r\nThanks for helping if you do so. \r\n\r\n\r\nClass 1 : \r\n``` \r\npackage Main;\r\nimport mining.Betterfarm;\r\nimport coins.Tokens;\r\nimport java.util.Scanner;  // Import the Scanner class to write text for buying in the shop\r\nimport coins.Bank;\r\n\r\npublic class Shop {\r\n    public Shop() {\r\n        Scanner input = new Scanner(System.in);\r\n        boolean BetterFarm;\r\n        boolean running;\r\n        BetterFarm = false;\r\n        boolean ShorterDelay;\r\n        ShorterDelay = false;\r\n        boolean Token;\r\n        Token = false;\r\n        running = true;\r\n\r\n\r\n        System.out.println(&quot;\\n&quot;);\r\n        System.out.println(&quot;\\t\\t            •••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••   &quot;);\r\n        System.out.println(&quot;\\t\\t           •••                                                                  •••   &quot;);\r\n        System.out.println(&quot;\\t\\t          •••                       Welcome to our shop!                         •••   &quot;);\r\n        System.out.println(&quot;\\t\\t           •••                                                                  •••   &quot;);\r\n        System.out.println(&quot;\\t\\t            •••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••   &quot;);\r\n        System.out.println(&quot;\\n&quot;);\r\n        System.out.println(&quot;\\t\\t               ⛏ 1. Buy BetterFarm - 3000 Coins (farm faster and more efficient!) ⛏&quot;);\r\n        System.out.println(&quot;\\t\\t               \\uD83D\\uDCA8 2. Buy ShorterDelay - 2000 Coins (this way you don&#39;t have to wait so long!) \\uD83D\\uDCA8&quot;);\r\n        System.out.println(&quot;\\t\\t               \\uD83C\\uDFB0 3. Buy Token for Casino - 1000 Coins \\uD83C\\uDFB0&quot;);\r\n        System.out.println(&quot;\\n&quot;);\r\n        System.out.println(&quot;\\t\\t               \\uD83D\\uDCD9 Commands:&quot;);\r\n        System.out.println(&quot;\\t\\t               \\uD83D\\uDCD9 BetterFarm: /buy BetterFarm \\uD83D\\uDCD9&quot;);\r\n        System.out.println(&quot;\\t\\t               \\uD83D\\uDCD9 ShorterDelay: /buy ShorterDelay \\uD83D\\uDCD9&quot;);\r\n        System.out.println(&quot;\\t\\t               \\uD83D\\uDCD9 Token: /buy Token \\uD83D\\uDCD9&quot;);\r\n        System.out.println(&quot;\\n&quot;);\r\n\r\n        while (running) {\r\n            String in = input.nextLine();\r\n\r\n            if (in.equals(&quot;/buy BetterFarm&quot;)) {\r\n                BetterFarm = true;\r\n            }\r\n\r\n            while (BetterFarm) {\r\n                if (Bank.amount &gt;= 3000) {\r\n                    System.out.println(&quot;You&#39;ve successfully bought BetterFarm!&quot;);\r\n                    Betterfarm.lvlup();\r\n                    Bank.amount = Bank.amount - 3000;\r\n\r\n                    break;\r\n                } else {\r\n                    System.out.println(&quot;You don&#39;t have enough coins to buy BetterFarm!&quot;);\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if (in.equals(&quot;/buy ShorterDelay&quot;)) {\r\n                ShorterDelay = true;\r\n            }\r\n\r\n            while (ShorterDelay) {\r\n                if (Tokens.amount &gt;= 2000) {\r\n                    System.out.println(&quot;You&#39;ve successfully bought ShorterDelay!&quot;);\r\n                    Tokens.amount = Tokens.amount - 2000;\r\n                    break;\r\n                } else {\r\n                    System.out.println(&quot;You don&#39;t have enough coins to buy ShorterDelay!&quot;);\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if (in.equals(&quot;/buy Token&quot;) &amp;&amp; Bank.amount &gt;= 1000) {\r\n                System.out.println(&quot;You&#39;ve successfully bought a Token!&quot;);\r\n                Bank.amount = Bank.amount - 1000;\r\n                Tokens.amount = Tokens.amount + 1;\r\n            }\r\n\r\n            if (in.equals(&quot;/buy Token&quot;) &amp;&amp; Bank.amount &lt; 1000) {\r\n                System.out.println(&quot;You don&#39;t have enough coins to buy a Token!&quot;);\r\n\r\n            }\r\n\r\n\r\n            if (in.equals(&quot;/tokens&quot;)) {\r\n                Tokens.getAmount();\r\n            }\r\n\r\n\r\n            if (in.equals(&quot;/stop&quot;)) {\r\n                break; }\r\n\r\n            if (in.equals(&quot;/shop&quot;)) {\r\n                Shop shop = new Shop();\r\n            }\r\n\r\n            }\r\n        }\r\n    }\r\n\r\n```\r\n\r\nClass 2 : \r\n\r\n```\r\npackage coins;\r\n\r\npublic class Tokens {\r\n    public static int amount = 1;\r\n\r\n    public static int getAmount() {\r\n        return amount;\r\n    }\r\n\r\n    public void add(int amount) {\r\n        this.amount = this.amount + 1;\r\n    }\r\n\r\n    public void del(int amount) {\r\n        this.amount -= 1;\r\n\r\n    }\r\n}\r\n```","title":"Int won&#39;t add to a variable even if code has no errors","body":"<p>I'm working on my first java project and I have a problem with my code, when buying &quot;tokens&quot; from shop.</p>\n<p>The code has no errors but it won't give me tokens.\nWhen I do /buy Token it will also not work properly, here is some output from the command :</p>\n<p>/buy Token\nYou've successfully bought a Token!\n&lt; - Doesn't work properly, and put the if and else output.</p>\n<p>You don't have enough coins to buy a Token!</p>\n<p>/tokens &lt; - trying to do another command, it won't work.</p>\n<p>/tokens &lt; - trying to do another command, it won't work.</p>\n<p>Thanks for helping if you do so.</p>\n<p>Class 1 :</p>\n<pre><code>package Main;\nimport mining.Betterfarm;\nimport coins.Tokens;\nimport java.util.Scanner;  // Import the Scanner class to write text for buying in the shop\nimport coins.Bank;\n\npublic class Shop {\n    public Shop() {\n        Scanner input = new Scanner(System.in);\n        boolean BetterFarm;\n        boolean running;\n        BetterFarm = false;\n        boolean ShorterDelay;\n        ShorterDelay = false;\n        boolean Token;\n        Token = false;\n        running = true;\n\n\n        System.out.println(&quot;\\n&quot;);\n        System.out.println(&quot;\\t\\t            •••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••   &quot;);\n        System.out.println(&quot;\\t\\t           •••                                                                  •••   &quot;);\n        System.out.println(&quot;\\t\\t          •••                       Welcome to our shop!                         •••   &quot;);\n        System.out.println(&quot;\\t\\t           •••                                                                  •••   &quot;);\n        System.out.println(&quot;\\t\\t            •••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••   &quot;);\n        System.out.println(&quot;\\n&quot;);\n        System.out.println(&quot;\\t\\t               ⛏ 1. Buy BetterFarm - 3000 Coins (farm faster and more efficient!) ⛏&quot;);\n        System.out.println(&quot;\\t\\t               \\uD83D\\uDCA8 2. Buy ShorterDelay - 2000 Coins (this way you don't have to wait so long!) \\uD83D\\uDCA8&quot;);\n        System.out.println(&quot;\\t\\t               \\uD83C\\uDFB0 3. Buy Token for Casino - 1000 Coins \\uD83C\\uDFB0&quot;);\n        System.out.println(&quot;\\n&quot;);\n        System.out.println(&quot;\\t\\t               \\uD83D\\uDCD9 Commands:&quot;);\n        System.out.println(&quot;\\t\\t               \\uD83D\\uDCD9 BetterFarm: /buy BetterFarm \\uD83D\\uDCD9&quot;);\n        System.out.println(&quot;\\t\\t               \\uD83D\\uDCD9 ShorterDelay: /buy ShorterDelay \\uD83D\\uDCD9&quot;);\n        System.out.println(&quot;\\t\\t               \\uD83D\\uDCD9 Token: /buy Token \\uD83D\\uDCD9&quot;);\n        System.out.println(&quot;\\n&quot;);\n\n        while (running) {\n            String in = input.nextLine();\n\n            if (in.equals(&quot;/buy BetterFarm&quot;)) {\n                BetterFarm = true;\n            }\n\n            while (BetterFarm) {\n                if (Bank.amount &gt;= 3000) {\n                    System.out.println(&quot;You've successfully bought BetterFarm!&quot;);\n                    Betterfarm.lvlup();\n                    Bank.amount = Bank.amount - 3000;\n\n                    break;\n                } else {\n                    System.out.println(&quot;You don't have enough coins to buy BetterFarm!&quot;);\n                    break;\n                }\n            }\n\n            if (in.equals(&quot;/buy ShorterDelay&quot;)) {\n                ShorterDelay = true;\n            }\n\n            while (ShorterDelay) {\n                if (Tokens.amount &gt;= 2000) {\n                    System.out.println(&quot;You've successfully bought ShorterDelay!&quot;);\n                    Tokens.amount = Tokens.amount - 2000;\n                    break;\n                } else {\n                    System.out.println(&quot;You don't have enough coins to buy ShorterDelay!&quot;);\n                    break;\n                }\n            }\n\n            if (in.equals(&quot;/buy Token&quot;) &amp;&amp; Bank.amount &gt;= 1000) {\n                System.out.println(&quot;You've successfully bought a Token!&quot;);\n                Bank.amount = Bank.amount - 1000;\n                Tokens.amount = Tokens.amount + 1;\n            }\n\n            if (in.equals(&quot;/buy Token&quot;) &amp;&amp; Bank.amount &lt; 1000) {\n                System.out.println(&quot;You don't have enough coins to buy a Token!&quot;);\n\n            }\n\n\n            if (in.equals(&quot;/tokens&quot;)) {\n                Tokens.getAmount();\n            }\n\n\n            if (in.equals(&quot;/stop&quot;)) {\n                break; }\n\n            if (in.equals(&quot;/shop&quot;)) {\n                Shop shop = new Shop();\n            }\n\n            }\n        }\n    }\n\n</code></pre>\n<p>Class 2 :</p>\n<pre><code>package coins;\n\npublic class Tokens {\n    public static int amount = 1;\n\n    public static int getAmount() {\n        return amount;\n    }\n\n    public void add(int amount) {\n        this.amount = this.amount + 1;\n    }\n\n    public void del(int amount) {\n        this.amount -= 1;\n\n    }\n}\n</code></pre>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":6023206,"reputation":7990,"user_id":4729721,"display_name":"a_local_nobody"},"score":1,"creation_date":1634734044,"post_id":69646155,"comment_id":123104087,"body_markdown":"well, what is `this` in `myAdapter =  new adapter1(this, list);`?","body":"well, what is <code>this</code> in <code>myAdapter =  new adapter1(this, list);</code>?"},{"owner":{"account_id":16817104,"reputation":804,"user_id":12158652,"display_name":"Alex Rmcf"},"score":0,"creation_date":1634734133,"post_id":69646155,"comment_id":123104127,"body_markdown":"code you shared is not containing problem. probably you pass Menu like this into your adapter constructor. But you better share stacktrace","body":"code you shared is not containing problem. probably you pass Menu like this into your adapter constructor. But you better share stacktrace"},{"owner":{"account_id":1301014,"reputation":8110,"user_id":1250929,"accept_rate":72,"display_name":"Kristy Welsh"},"score":1,"creation_date":1634734296,"post_id":69646155,"comment_id":123104200,"body_markdown":"Yeah we need to see more code.","body":"Yeah we need to see more code."},{"owner":{"account_id":6023206,"reputation":7990,"user_id":4729721,"display_name":"a_local_nobody"},"score":0,"creation_date":1634736407,"post_id":69646155,"comment_id":123105228,"body_markdown":"@AlexRmcf there&#39;s probably no stack trace here","body":"@AlexRmcf there&#39;s probably no stack trace here"}],"answers":[{"tags":[],"owner":{"account_id":20417309,"reputation":716,"user_id":14979180,"display_name":"Danish"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1634735827,"creation_date":1634735827,"answer_id":69646719,"question_id":69646155,"body_markdown":"For fragment use getContext() instead of **this** as an argument to your adapter.\r\n\r\n     list = new ArrayList&lt;&gt;();\r\n    myAdapter =  new adapter1(getContext(), list);\r\n    recyclerView.setAdapter(myAdapter);","title":"Android studio Fragments and Adapter are not connecting","body":"<p>For fragment use getContext() instead of <strong>this</strong> as an argument to your adapter.</p>\n<pre><code> list = new ArrayList&lt;&gt;();\nmyAdapter =  new adapter1(getContext(), list);\nrecyclerView.setAdapter(myAdapter);\n</code></pre>\n"}],"owner":{"account_id":9839524,"reputation":13,"user_id":7288863,"display_name":"Bochiii"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1634880501,"accepted_answer_id":69646719,"answer_count":1,"score":1,"last_activity_date":1634735827,"creation_date":1634733603,"question_id":69646155,"body_markdown":"still very new at java android and I wanna make a recycler view on a fragment. Found an online tutorial on YouTube and I try to recreate the code. But instead of placing the recycler on my main activity I put it on my fragment which is in my main activity. Also I only include some part which I think is the root of my error.\r\n\r\nThe code on my fragment file\r\n\r\n    list = new ArrayList&lt;&gt;();\r\n        myAdapter =  new adapter1(this, list);\r\n        recyclerView.setAdapter(myAdapter);\r\n\r\nThe code on my adapter\r\n\r\n    public class adapter1 extends RecyclerView.Adapter&lt;adapter1.MyViewHolder&gt; {\r\n\r\n\r\n    Context context;\r\n\r\n    ArrayList&lt;itemFile&gt; list;\r\n\r\n    public adapter1(Context context, ArrayList&lt;itemFile&gt; list) {\r\n        this.context = context;\r\n        this.list = list;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public MyViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        View v = LayoutInflater.from(context).inflate(R.layout.item,parent,false);\r\n        return new MyViewHolder(v);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull MyViewHolder holder, int position) {\r\n\r\n        itemFile user = list.get(position);\r\n        holder.itemName.setText(user.getItemName());\r\n        holder.price.setText(user.getItemPrice());\r\n\r\n    }\r\n\r\n   \r\n\r\nit says that Menu cannot be converted into Context","title":"Android studio Fragments and Adapter are not connecting","body":"<p>still very new at java android and I wanna make a recycler view on a fragment. Found an online tutorial on YouTube and I try to recreate the code. But instead of placing the recycler on my main activity I put it on my fragment which is in my main activity. Also I only include some part which I think is the root of my error.</p>\n<p>The code on my fragment file</p>\n<pre><code>list = new ArrayList&lt;&gt;();\n    myAdapter =  new adapter1(this, list);\n    recyclerView.setAdapter(myAdapter);\n</code></pre>\n<p>The code on my adapter</p>\n<pre><code>public class adapter1 extends RecyclerView.Adapter&lt;adapter1.MyViewHolder&gt; {\n\n\nContext context;\n\nArrayList&lt;itemFile&gt; list;\n\npublic adapter1(Context context, ArrayList&lt;itemFile&gt; list) {\n    this.context = context;\n    this.list = list;\n}\n\n@NonNull\n@Override\npublic MyViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n    View v = LayoutInflater.from(context).inflate(R.layout.item,parent,false);\n    return new MyViewHolder(v);\n}\n\n@Override\npublic void onBindViewHolder(@NonNull MyViewHolder holder, int position) {\n\n    itemFile user = list.get(position);\n    holder.itemName.setText(user.getItemName());\n    holder.price.setText(user.getItemPrice());\n\n}\n</code></pre>\n<p>it says that Menu cannot be converted into Context</p>\n"},{"tags":["java","arraylist","sublist"],"comments":[{"owner":{"display_name":"user6073886"},"score":1,"creation_date":1634735640,"post_id":69646600,"comment_id":123104854,"body_markdown":"passing `list.size()` as the second parameter will give you every element from the beginning index to the end. So `list.sublist(0, list.size())` will return the complete original list.","body":"passing <code>list.size()</code> as the second parameter will give you every element from the beginning index to the end. So <code>list.sublist(0, list.size())</code> will return the complete original list."},{"owner":{"account_id":10389194,"reputation":14819,"user_id":7661119,"display_name":"Ervin Szilagyi"},"score":1,"creation_date":1634735682,"post_id":69646600,"comment_id":123104878,"body_markdown":"`sublist` is exclusiv, so `list.subList(startIndex, list.size())`","body":"<code>sublist</code> is exclusiv, so <code>list.subList(startIndex, list.size())</code>"}],"answers":[{"tags":[],"owner":{"account_id":2825991,"reputation":2000,"user_id":2428631,"display_name":"McPringle"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1634735824,"creation_date":1634735824,"answer_id":69646716,"question_id":69646600,"body_markdown":"You can find the correct method including a description in the JavaDoc:\r\n\r\nhttps://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/AbstractList.html#subList(int,int)\r\n\r\n```\r\npublic List&lt;E&gt; subList(int fromIndex,\r\n                       int toIndex)\r\n```\r\n\r\nWith this method, you can create a new list including all the elements from an existing list, you want to have in your new list.\r\n\r\nExample: `final var newList = oldList.subList(7, oldList.size());`\r\n\r\nThis will create a new list containing the objects from position 8 to the end of the old list.","title":"Java - ArrayList method for a sublist including the last element?","body":"<p>You can find the correct method including a description in the JavaDoc:</p>\n<p><a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/AbstractList.html#subList(int,int)\" rel=\"nofollow noreferrer\">https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/AbstractList.html#subList(int,int)</a></p>\n<pre><code>public List&lt;E&gt; subList(int fromIndex,\n                       int toIndex)\n</code></pre>\n<p>With this method, you can create a new list including all the elements from an existing list, you want to have in your new list.</p>\n<p>Example: <code>final var newList = oldList.subList(7, oldList.size());</code></p>\n<p>This will create a new list containing the objects from position 8 to the end of the old list.</p>\n"}],"owner":{"account_id":21021479,"reputation":13,"user_id":16573128,"display_name":"Tthis"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":686,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69646716,"answer_count":1,"score":0,"last_activity_date":1634735824,"creation_date":1634735401,"question_id":69646600,"body_markdown":"For a sublist of an `ArrayList`, how do I get the sublist including the last element in the list? If I&#39;m using the wrong method, can you direct me towards the correct one? \r\n\r\n```\r\nlist.subList(startIndex, index + list.size()) // obviously doesn&#39;t work, outside of range\r\nlist.sublist(startIndex) // doesn&#39;t work because this method requires two parameters\r\n```","title":"Java - ArrayList method for a sublist including the last element?","body":"<p>For a sublist of an <code>ArrayList</code>, how do I get the sublist including the last element in the list? If I'm using the wrong method, can you direct me towards the correct one?</p>\n<pre><code>list.subList(startIndex, index + list.size()) // obviously doesn't work, outside of range\nlist.sublist(startIndex) // doesn't work because this method requires two parameters\n</code></pre>\n"},{"tags":["java","rgb","pixel","bufferedimage","16-bit"],"answers":[{"tags":[],"owner":{"account_id":1531514,"reputation":26639,"user_id":1428606,"accept_rate":71,"display_name":"Harald K"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634735084,"creation_date":1385644668,"answer_id":20267282,"question_id":20264768,"body_markdown":"If you want to create an image with 16 bits *per sample* (or 48 bits per pixel), there is no  `BufferedImage.TYPE_...` constant for that. `TYPE_USHORT_565_RGB` creates an image with 16 bits *per pixel*, with samples of 5 (red), 6 (green) and 5 (blue) bits respectively. I think these USHORT RGB values are leftovers from a time when some computes actually had the option of a 16 bit display (aka &quot;Thousands of colors&quot;).\r\n\r\nWhat you need to do, to actually create an image with 16 bits per sample, is:\r\n\r\n    ColorModel cm;\r\n    WritableRaster raster;\r\n    \r\n    BufferedImage result = new BufferedImage(cm, raster, cm.isAlphaPremultiplied(), null);\r\n\r\nThe raster is created from a data buffer of type `DataBufferUShort` with either 3 banks and a `BandedSampleModel` with 3 bands, or use a single bank and a `PixelInterleavedSampleModel` with a `pixelStride` of 3, `scanLineStride` of 3 * `width` and `bandOffsets` `{0, 1, 2}`.\r\n\r\nHere&#39;s a full sample, using interleaved sample model:\r\n\r\n    ColorSpace sRGB = ColorSpace.getInstance(ColorSpace.CS_sRGB)\r\n    ColorModel cm = new ComponentColorModel(sRGB, false, false, Transparency.OPAQUE, DataBuffer.TYPE_USHORT);\r\n    WritableRaster raster = Raster.createInterleavedRaster(DataBuffer.TYPE_USHORT, w, h, 3, null);\r\n    BufferedImage rgb = new BufferedImage(cm, raster, cm.isAlphaPremultiplied(), null);\r\n\r\nPS: With the data buffer exposed, you can access the `short` samples directly, to manipulate the pixels. This is much faster than using `BufferedImage.getRGB(...)/setRGB(...)`, and will keep the original 16 bit per sample precision. `BufferedImage.getRGB(...)` will convert the pixel values to 32 bit pixel/8 bit per sample, and thus lose the extra precision.","title":"How to set RGB pixel in a BufferedImage to display a 16-bit-depth PNG?","body":"<p>If you want to create an image with 16 bits <em>per sample</em> (or 48 bits per pixel), there is no  <code>BufferedImage.TYPE_...</code> constant for that. <code>TYPE_USHORT_565_RGB</code> creates an image with 16 bits <em>per pixel</em>, with samples of 5 (red), 6 (green) and 5 (blue) bits respectively. I think these USHORT RGB values are leftovers from a time when some computes actually had the option of a 16 bit display (aka &quot;Thousands of colors&quot;).</p>\n<p>What you need to do, to actually create an image with 16 bits per sample, is:</p>\n<pre><code>ColorModel cm;\nWritableRaster raster;\n\nBufferedImage result = new BufferedImage(cm, raster, cm.isAlphaPremultiplied(), null);\n</code></pre>\n<p>The raster is created from a data buffer of type <code>DataBufferUShort</code> with either 3 banks and a <code>BandedSampleModel</code> with 3 bands, or use a single bank and a <code>PixelInterleavedSampleModel</code> with a <code>pixelStride</code> of 3, <code>scanLineStride</code> of 3 * <code>width</code> and <code>bandOffsets</code> <code>{0, 1, 2}</code>.</p>\n<p>Here's a full sample, using interleaved sample model:</p>\n<pre><code>ColorSpace sRGB = ColorSpace.getInstance(ColorSpace.CS_sRGB)\nColorModel cm = new ComponentColorModel(sRGB, false, false, Transparency.OPAQUE, DataBuffer.TYPE_USHORT);\nWritableRaster raster = Raster.createInterleavedRaster(DataBuffer.TYPE_USHORT, w, h, 3, null);\nBufferedImage rgb = new BufferedImage(cm, raster, cm.isAlphaPremultiplied(), null);\n</code></pre>\n<p>PS: With the data buffer exposed, you can access the <code>short</code> samples directly, to manipulate the pixels. This is much faster than using <code>BufferedImage.getRGB(...)/setRGB(...)</code>, and will keep the original 16 bit per sample precision. <code>BufferedImage.getRGB(...)</code> will convert the pixel values to 32 bit pixel/8 bit per sample, and thus lose the extra precision.</p>\n"},{"tags":[],"owner":{"account_id":1230714,"reputation":2655,"user_id":1195383,"accept_rate":86,"display_name":"dragon66"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1419863273,"creation_date":1419862182,"answer_id":27690437,"question_id":20264768,"body_markdown":"@haraldK has pointed in the right direction. I&#39;m providing some working code which is from &quot;PNGReader&quot; of &quot;[icafe][1]&quot; Java image library.\r\n\r\n    if(bitsPerPixel == 16) {\r\n\t\tif(interlace_method==NON_INTERLACED)\r\n\t\t   spixels = generate16BitRGBPixels(compr_data, false);\r\n\t\telse {\r\n\t\t   spixels = generate16BitRGBInterlacedPixels(compr_data, false);\r\n\t\t\t\t   }\r\n        int[] off = {0, 1, 2}; //band offset, we have 3 bands\r\n\t\tint numOfBands = 3;\r\n\t\tboolean hasAlpha = false;\r\n\t\tint trans = Transparency.OPAQUE;\r\n\t\tint[] nBits = {16, 16, 16};\t\r\n\t\tif(alpha != null) { // Deal with single color transparency\r\n\t\t   off = new int[] {0, 1, 2, 3}; //band offset, we have 4 bands\r\n\t\t   numOfBands = 4;\r\n\t\t   hasAlpha = true;\r\n\t\t   trans = Transparency.TRANSLUCENT;\r\n\t\t   nBits = new int[] {16, 16, 16, 16};\t\t\t\t\t\t\r\n\t\t}\r\n\t\tdb = new DataBufferUShort(spixels, spixels.length);\r\n\t\traster = Raster.createInterleavedRaster(db, width, height, width*numOfBands, numOfBands, off, null);\r\n\t    cm = new ComponentColorModel(colorSpace, nBits, hasAlpha, false, trans, DataBuffer.TYPE_USHORT);\r\n\t}\r\n\treturn new BufferedImage(cm, raster, false, null);\r\n\r\nHere is the generate16BitRGBPixels() method: \r\n\r\n    private short[] generate16BitRGBPixels(byte[] compr_data, boolean fullAlpha) throws Exception {\r\n\t\t //\r\n\t\t int bytesPerPixel = 0;\r\n\t\t byte[] pixBytes;\r\n\t\t\t\t \r\n\t\t if (fullAlpha)\r\n\t\t\t bytesPerPixel = 8;\r\n\t\t else \r\n\t\t\t bytesPerPixel = 6;\r\n\t\t \t \r\n\t\t bytesPerScanLine = width*bytesPerPixel;\t\t \r\n\r\n\t\t // Now inflate the data.\r\n\t\t pixBytes = new byte[height * bytesPerScanLine];\r\n\t\t \r\n         // Wrap an InflaterInputStream with a bufferedInputStream to speed up reading\r\n\t\t BufferedInputStream bis = new BufferedInputStream(new InflaterInputStream(new ByteArrayInputStream(compr_data)));\r\n        \r\n\t\t apply_defilter(bis, pixBytes, height, bytesPerPixel, bytesPerScanLine);\r\n\t\t \r\n\t\t short[] spixels = null;\r\n\t\t \r\n\t\t if(alpha != null) { // Deal with single color transparency\r\n\t\t\t spixels = new short[width*height*4];\r\n\t\t\t short redMask = (short)((alpha[1]&amp;0xff)|(alpha[0]&amp;0xff)&lt;&lt;8);\r\n\t\t\t short greenMask = (short)((alpha[3]&amp;0xff)|(alpha[2]&amp;0xff)&lt;&lt;8);;\r\n\t\t\t short blueMask = (short)((alpha[5]&amp;0xff)|(alpha[4]&amp;0xff)&lt;&lt;8);\r\n\t\t\r\n\t\t\t for(int i = 0, index = 0; i &lt; pixBytes.length; index += 4) {\r\n\t\t\t\t short red = (short)((pixBytes[i++]&amp;0xff)&lt;&lt;8|(pixBytes[i++]&amp;0xff));\r\n\t\t\t\t short green = (short)((pixBytes[i++]&amp;0xff)&lt;&lt;8|(pixBytes[i++]&amp;0xff));\r\n\t\t\t\t short blue = (short)((pixBytes[i++]&amp;0xff)&lt;&lt;8|(pixBytes[i++]&amp;0xff));\r\n\t\t\t\t spixels[index] = red;\r\n\t\t\t\t spixels[index + 1] = green;\r\n\t\t\t\t spixels[index + 2] = blue;\r\n\t\t\t\t if(spixels[index] == redMask &amp;&amp; spixels[index + 1] == greenMask &amp;&amp; spixels[index + 2] == blueMask) {\r\n\t\t\t\t\t spixels[index + 3] = (short)0x0000;\t\t\t\t\t\t\t   \r\n\t\t\t\t } else {\r\n\t\t\t\t\t spixels[index + 3] = (short)0xffff;\r\n\t\t\t\t }\r\n\t\t\t }\r\n\t\t } else\r\n\t\t\t spixels = ArrayUtils.toShortArray(pixBytes, true);\r\n\t\t \r\n\t\t return spixels;\t\t \r\n\t }\r\n \r\nand the ArrayUtils.toShortArray() method:\r\n\r\n    public static short[] toShortArray(byte[] data, int offset, int len, boolean bigEndian) {\r\n\t\t\r\n\t\tByteBuffer byteBuffer = ByteBuffer.wrap(data, offset, len);\r\n\t\t\r\n\t\tif (bigEndian) {\r\n\t\t\tbyteBuffer.order(ByteOrder.BIG_ENDIAN);\r\n\t\t} else {\r\n\t\t\tbyteBuffer.order(ByteOrder.LITTLE_ENDIAN);\r\n\t\t}\r\n\t\t\r\n\t\tShortBuffer shortBuf = byteBuffer.asShortBuffer();\r\n\t\tshort[] array = new short[shortBuf.remaining()];\r\n\t\tshortBuf.get(array);\r\n\t\t\r\n\t\treturn array;\r\n\t}\r\n\r\n\r\n  [1]: https://github.com/dragon66/icafe","title":"How to set RGB pixel in a BufferedImage to display a 16-bit-depth PNG?","body":"<p>@haraldK has pointed in the right direction. I'm providing some working code which is from \"PNGReader\" of \"<a href=\"https://github.com/dragon66/icafe\" rel=\"nofollow\">icafe</a>\" Java image library.</p>\n\n<pre><code>if(bitsPerPixel == 16) {\n    if(interlace_method==NON_INTERLACED)\n       spixels = generate16BitRGBPixels(compr_data, false);\n    else {\n       spixels = generate16BitRGBInterlacedPixels(compr_data, false);\n               }\n    int[] off = {0, 1, 2}; //band offset, we have 3 bands\n    int numOfBands = 3;\n    boolean hasAlpha = false;\n    int trans = Transparency.OPAQUE;\n    int[] nBits = {16, 16, 16}; \n    if(alpha != null) { // Deal with single color transparency\n       off = new int[] {0, 1, 2, 3}; //band offset, we have 4 bands\n       numOfBands = 4;\n       hasAlpha = true;\n       trans = Transparency.TRANSLUCENT;\n       nBits = new int[] {16, 16, 16, 16};                      \n    }\n    db = new DataBufferUShort(spixels, spixels.length);\n    raster = Raster.createInterleavedRaster(db, width, height, width*numOfBands, numOfBands, off, null);\n    cm = new ComponentColorModel(colorSpace, nBits, hasAlpha, false, trans, DataBuffer.TYPE_USHORT);\n}\nreturn new BufferedImage(cm, raster, false, null);\n</code></pre>\n\n<p>Here is the generate16BitRGBPixels() method: </p>\n\n<pre><code>private short[] generate16BitRGBPixels(byte[] compr_data, boolean fullAlpha) throws Exception {\n     //\n     int bytesPerPixel = 0;\n     byte[] pixBytes;\n\n     if (fullAlpha)\n         bytesPerPixel = 8;\n     else \n         bytesPerPixel = 6;\n\n     bytesPerScanLine = width*bytesPerPixel;         \n\n     // Now inflate the data.\n     pixBytes = new byte[height * bytesPerScanLine];\n\n     // Wrap an InflaterInputStream with a bufferedInputStream to speed up reading\n     BufferedInputStream bis = new BufferedInputStream(new InflaterInputStream(new ByteArrayInputStream(compr_data)));\n\n     apply_defilter(bis, pixBytes, height, bytesPerPixel, bytesPerScanLine);\n\n     short[] spixels = null;\n\n     if(alpha != null) { // Deal with single color transparency\n         spixels = new short[width*height*4];\n         short redMask = (short)((alpha[1]&amp;0xff)|(alpha[0]&amp;0xff)&lt;&lt;8);\n         short greenMask = (short)((alpha[3]&amp;0xff)|(alpha[2]&amp;0xff)&lt;&lt;8);;\n         short blueMask = (short)((alpha[5]&amp;0xff)|(alpha[4]&amp;0xff)&lt;&lt;8);\n\n         for(int i = 0, index = 0; i &lt; pixBytes.length; index += 4) {\n             short red = (short)((pixBytes[i++]&amp;0xff)&lt;&lt;8|(pixBytes[i++]&amp;0xff));\n             short green = (short)((pixBytes[i++]&amp;0xff)&lt;&lt;8|(pixBytes[i++]&amp;0xff));\n             short blue = (short)((pixBytes[i++]&amp;0xff)&lt;&lt;8|(pixBytes[i++]&amp;0xff));\n             spixels[index] = red;\n             spixels[index + 1] = green;\n             spixels[index + 2] = blue;\n             if(spixels[index] == redMask &amp;&amp; spixels[index + 1] == greenMask &amp;&amp; spixels[index + 2] == blueMask) {\n                 spixels[index + 3] = (short)0x0000;                               \n             } else {\n                 spixels[index + 3] = (short)0xffff;\n             }\n         }\n     } else\n         spixels = ArrayUtils.toShortArray(pixBytes, true);\n\n     return spixels;         \n }\n</code></pre>\n\n<p>and the ArrayUtils.toShortArray() method:</p>\n\n<pre><code>public static short[] toShortArray(byte[] data, int offset, int len, boolean bigEndian) {\n\n    ByteBuffer byteBuffer = ByteBuffer.wrap(data, offset, len);\n\n    if (bigEndian) {\n        byteBuffer.order(ByteOrder.BIG_ENDIAN);\n    } else {\n        byteBuffer.order(ByteOrder.LITTLE_ENDIAN);\n    }\n\n    ShortBuffer shortBuf = byteBuffer.asShortBuffer();\n    short[] array = new short[shortBuf.remaining()];\n    shortBuf.get(array);\n\n    return array;\n}\n</code></pre>\n"}],"owner":{"account_id":3059296,"reputation":113,"user_id":2592317,"accept_rate":67,"display_name":"Shadow Template"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5637,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1634735084,"creation_date":1385637587,"question_id":20264768,"body_markdown":"I am trying to read and show a PNG file.\r\nI have no problem dealing with images with 8-bit depth.\r\nI proceed as follow:\r\n\r\n    BufferedImage result = new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB);\r\n\r\nThen I read the 3*8=24 bits of each pixel, save them in an array of byte `data` and put them in the image with:\r\n\r\n    for (int y = 0; y &lt; height; y++)\r\n       for (int x = 0; x &lt; width; x++)\r\n         result.setRGB(x, y, ((data[x * 3 + 0] &amp; 0xff) &lt;&lt; 16)\r\n                           + ((data[x * 3 + 1] &amp; 0xff) &lt;&lt; 8)\r\n                           + ((data[x * 3 + 2] &amp; 0xff)));\r\n\r\nThe problem is now with 16-bit depth images. Of course `data` is bigger now and it contains 48bits, divided in 6 bytes, for each RGB triple: from the debugger `data` has the values I expect.\r\nHow can I set the RGB pixel? Do I have to change the BufferedImage declaration? Maybe with: \r\n\r\n    BufferedImage result = new BufferedImage(width, height, BufferedImage.TYPE_USHORT_565_RGB);\r\n\r\nMany thanks in advance!\r\n\r\nP.S.: following PNG standars, the image has color type 2 (RGB without alpha). \r\n\r\n---\r\nMaybe I&#39;ll have to use http://docs.oracle.com/javase/7/docs/api/java/awt/image/ColorModel.html","title":"How to set RGB pixel in a BufferedImage to display a 16-bit-depth PNG?","body":"<p>I am trying to read and show a PNG file.\nI have no problem dealing with images with 8-bit depth.\nI proceed as follow:</p>\n\n<pre><code>BufferedImage result = new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB);\n</code></pre>\n\n<p>Then I read the 3*8=24 bits of each pixel, save them in an array of byte <code>data</code> and put them in the image with:</p>\n\n<pre><code>for (int y = 0; y &lt; height; y++)\n   for (int x = 0; x &lt; width; x++)\n     result.setRGB(x, y, ((data[x * 3 + 0] &amp; 0xff) &lt;&lt; 16)\n                       + ((data[x * 3 + 1] &amp; 0xff) &lt;&lt; 8)\n                       + ((data[x * 3 + 2] &amp; 0xff)));\n</code></pre>\n\n<p>The problem is now with 16-bit depth images. Of course <code>data</code> is bigger now and it contains 48bits, divided in 6 bytes, for each RGB triple: from the debugger <code>data</code> has the values I expect.\nHow can I set the RGB pixel? Do I have to change the BufferedImage declaration? Maybe with: </p>\n\n<pre><code>BufferedImage result = new BufferedImage(width, height, BufferedImage.TYPE_USHORT_565_RGB);\n</code></pre>\n\n<p>Many thanks in advance!</p>\n\n<p>P.S.: following PNG standars, the image has color type 2 (RGB without alpha). </p>\n\n<hr>\n\n<p>Maybe I'll have to use <a href=\"http://docs.oracle.com/javase/7/docs/api/java/awt/image/ColorModel.html\" rel=\"nofollow\">http://docs.oracle.com/javase/7/docs/api/java/awt/image/ColorModel.html</a></p>\n"},{"tags":["java","spring-boot","caching","ehcache-3"],"answers":[{"tags":[],"owner":{"account_id":2380591,"reputation":1098,"user_id":2082699,"accept_rate":62,"display_name":"Tom Cools"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1587202020,"creation_date":1587201575,"answer_id":61286826,"question_id":61284393,"body_markdown":"## Solution\r\n\r\nIt&#39;s doable, but you need to wrap 2 @Cachable annotations in a @Caching annotation.\r\n\r\n    @Caching(\r\n          cacheable = {\r\n                @Cacheable(cacheNames = &quot;cache_name_&quot;, key = &quot;#name + &#39;_&#39; + #id&quot;, condition = &quot;#id != null&quot;),\r\n                @Cacheable(cacheNames = &quot;cache_name_&quot;, key = &quot;#name&quot;, condition = &quot;#id == null&quot;)\r\n          }\r\n    \t)\r\n    public JSONObject getData(String name, String id) throws Exception {\r\n\r\n## Note on private methods \r\n\r\nYou are using the @Caching annotation on a private method. This doesn&#39;t work. Those annotations only work on public methods being called from outside the class. See this Stack Overflow answer: https://stackoverflow.com/a/16899739/2082699\r\n\r\n","title":"How to create multiple cache key in @Cacheable when parameter value is null","body":"<h2>Solution</h2>\n\n<p>It's doable, but you need to wrap 2 @Cachable annotations in a @Caching annotation.</p>\n\n<pre><code>@Caching(\n      cacheable = {\n            @Cacheable(cacheNames = \"cache_name_\", key = \"#name + '_' + #id\", condition = \"#id != null\"),\n            @Cacheable(cacheNames = \"cache_name_\", key = \"#name\", condition = \"#id == null\")\n      }\n    )\npublic JSONObject getData(String name, String id) throws Exception {\n</code></pre>\n\n<h2>Note on private methods</h2>\n\n<p>You are using the @Caching annotation on a private method. This doesn't work. Those annotations only work on public methods being called from outside the class. See this Stack Overflow answer: <a href=\"https://stackoverflow.com/a/16899739/2082699\">https://stackoverflow.com/a/16899739/2082699</a></p>\n"}],"owner":{"account_id":8254087,"reputation":578,"user_id":6207762,"accept_rate":0,"display_name":"r123"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4990,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":61286826,"answer_count":1,"score":2,"last_activity_date":1634735075,"creation_date":1587185785,"question_id":61284393,"body_markdown":"I am trying to create a cache key with multiple parameter values.\r\n\r\n    @Cacheable(cacheNames = &quot;cache_name_&quot;, key = &quot;#name + &#39;_&#39; + #id&quot;)\r\n    private JSONObject getData(String name, String id) throws Exception {\r\n\r\nFrom the above scenario, I name is a mandatory field while id is optional. I want to create key in such a way that,\r\n\r\n 1. If name = &quot;test&quot; and id = null, cache key must be cache_name_test\r\n 2. If name = &quot;test&quot; and id = &quot;2&quot;, cache key must be cache_name_test_2\r\n\r\nCurrently, the key is forming something like &quot;cache_name_test_null&quot; if the id is not passed in the parameter value\r\n\r\nIs it possible to create such key with @Cacheable annotation?","title":"How to create multiple cache key in @Cacheable when parameter value is null","body":"<p>I am trying to create a cache key with multiple parameter values.</p>\n\n<pre><code>@Cacheable(cacheNames = \"cache_name_\", key = \"#name + '_' + #id\")\nprivate JSONObject getData(String name, String id) throws Exception {\n</code></pre>\n\n<p>From the above scenario, I name is a mandatory field while id is optional. I want to create key in such a way that,</p>\n\n<ol>\n<li>If name = \"test\" and id = null, cache key must be cache_name_test</li>\n<li>If name = \"test\" and id = \"2\", cache key must be cache_name_test_2</li>\n</ol>\n\n<p>Currently, the key is forming something like \"cache_name_test_null\" if the id is not passed in the parameter value</p>\n\n<p>Is it possible to create such key with @Cacheable annotation?</p>\n"},{"tags":["c#","java","process","version"],"comments":[{"owner":{"account_id":943249,"reputation":1829,"user_id":970971,"accept_rate":88,"display_name":"casaout"},"score":0,"creation_date":1347265933,"post_id":12347215,"comment_id":16579127,"body_markdown":"I found a very good hint here at StackOverflow: http://stackoverflow.com/questions/8052862/how-to-get-the-file-description-of-a-dll-or-exe?lq=1\n\nWith that I was able to get the file version. Unfortunately I was unable to adapt it to my needs to ghet the FileDescriptions.","body":"I found a very good hint here at StackOverflow: <a href=\"http://stackoverflow.com/questions/8052862/how-to-get-the-file-description-of-a-dll-or-exe?lq=1\" title=\"how to get the file description of a dll or exe\">stackoverflow.com/questions/8052862/&hellip;</a>  With that I was able to get the file version. Unfortunately I was unable to adapt it to my needs to ghet the FileDescriptions."}],"answers":[{"tags":[],"owner":{"account_id":282589,"reputation":8239,"user_id":579580,"accept_rate":85,"display_name":"aviad"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1347263596,"creation_date":1347263596,"answer_id":12347372,"question_id":12347215,"body_markdown":"I am not aware of such API in Java. However, what you can do is as follows:\r\n\r\n 1. Create a C# project with the required method that returns program name.\r\n 2. Export this project to DLL.\r\n 3. In your java code you can use JNI to call the native code from you DLL project. You can check these examples:    [SUN JNI Example][1] , [Making Native Windows API calls from within a Java Application][2] \r\n\r\n(I would suggest you to consider whether you absolutely need this description.)\r\nGood luck!\r\n\r\n \r\n\r\n\r\n  [1]: http://java.sun.com/developer/onlineTraining/Programming/JDCBook/jniexamp.html\r\n  [2]: http://edn.embarcadero.com/article/20679","title":"Get FileDescription (ProgramName) from .exe","body":"<p>I am not aware of such API in Java. However, what you can do is as follows:</p>\n\n<ol>\n<li>Create a C# project with the required method that returns program name.</li>\n<li>Export this project to DLL.</li>\n<li>In your java code you can use JNI to call the native code from you DLL project. You can check these examples:    <a href=\"http://java.sun.com/developer/onlineTraining/Programming/JDCBook/jniexamp.html\" rel=\"nofollow\">SUN JNI Example</a> , <a href=\"http://edn.embarcadero.com/article/20679\" rel=\"nofollow\">Making Native Windows API calls from within a Java Application</a> </li>\n</ol>\n\n<p>(I would suggest you to consider whether you absolutely need this description.)\nGood luck!</p>\n"},{"tags":[],"owner":{"display_name":"user16511707"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634734989,"creation_date":1634734989,"answer_id":69646488,"question_id":12347215,"body_markdown":"It took me forever to find this, but I finally was able to piece together this inline script:\r\n```(get-command *.exe).fileversioninfo.filedescription```\r\nNow I used ```*.exe``` and ```.filedescription``` because I was attempting to return the prettified file names for every ```exe``` in a directory, but you can use any of the available variables.","title":"Get FileDescription (ProgramName) from .exe","body":"<p>It took me forever to find this, but I finally was able to piece together this inline script:\n<code>(get-command *.exe).fileversioninfo.filedescription</code>\nNow I used <code>*.exe</code> and <code>.filedescription</code> because I was attempting to return the prettified file names for every <code>exe</code> in a directory, but you can use any of the available variables.</p>\n"}],"owner":{"account_id":943249,"reputation":1829,"user_id":970971,"accept_rate":88,"display_name":"casaout"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2858,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":12347372,"answer_count":2,"score":4,"last_activity_date":1634734989,"creation_date":1347262868,"question_id":12347215,"body_markdown":"I am developing an activity tracker for my development work in Eclipse (with Java). I now have the program&#39;s path and the duration i spent in it. \r\n\r\ne.g.: `7min\tC:\\Program Files (x86)\\Internet Explorer\\iexplore.exe` and\r\n`10min\tC:\\Program Files\\Microsoft Office\\Office14\\OUTLOOK.EXE`\r\n\r\nI now want to know the name of the program. In C# I get it like this:\r\n\r\n\r\n    System.Diagnostics.FileVersionInfo versionInfo = System.Diagnostics.FileVersionInfo.GetVersionInfo(file);\r\n    return (versionInfo.FileDescription == string.Empty) ? null : versionInfo.FileDescription;\r\n\r\n\r\nUnfortunately, I found no such way in Java and i am not sure if this is even possible?\r\n\r\nThank you!\r\n\r\n**Edit**: I also read this [post][1] and the accepted answer but was unable to get the FileDescription...\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/6918022/get-version-info-for-exe?rq=1","title":"Get FileDescription (ProgramName) from .exe","body":"<p>I am developing an activity tracker for my development work in Eclipse (with Java). I now have the program's path and the duration i spent in it. </p>\n\n<p>e.g.: <code>7min C:\\Program Files (x86)\\Internet Explorer\\iexplore.exe</code> and\n<code>10min  C:\\Program Files\\Microsoft Office\\Office14\\OUTLOOK.EXE</code></p>\n\n<p>I now want to know the name of the program. In C# I get it like this:</p>\n\n<pre><code>System.Diagnostics.FileVersionInfo versionInfo = System.Diagnostics.FileVersionInfo.GetVersionInfo(file);\nreturn (versionInfo.FileDescription == string.Empty) ? null : versionInfo.FileDescription;\n</code></pre>\n\n<p>Unfortunately, I found no such way in Java and i am not sure if this is even possible?</p>\n\n<p>Thank you!</p>\n\n<p><strong>Edit</strong>: I also read this <a href=\"https://stackoverflow.com/questions/6918022/get-version-info-for-exe?rq=1\">post</a> and the accepted answer but was unable to get the FileDescription...</p>\n"},{"tags":["java","string","arraylist"],"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":2,"creation_date":1634622626,"post_id":69625623,"comment_id":123066980,"body_markdown":"What have you tried so far?","body":"What have you tried so far?"}],"answers":[{"tags":[],"owner":{"account_id":12878859,"reputation":16,"user_id":9314537,"display_name":"wuleice"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634642388,"creation_date":1634638246,"answer_id":69628962,"question_id":69625623,"body_markdown":"The ideas for dealing with this problem are as follows:\r\n1. Split each character string into a name and a value.\r\n2. Collect statistics on each character string. Sum up and count the characters with the same name.\r\n3. Store the result in the map.\r\n4. Print the statistics result.\r\n\r\n```\r\nArrayList&lt;String&gt; al=new ArrayList&lt;&gt;();\r\nal.add(&quot;aa-10.00&quot;);\r\nal.add(&quot;bb-15.00&quot;);\r\nal.add(&quot;aa-20.00&quot;);\r\nal.add(&quot;aa-30.00&quot;);\r\nal.add(&quot;bb-10.00&quot;);\r\n\r\n// Map&lt;data name such as &quot;aa&quot;, Pair&lt;sum, count&gt; &gt;\r\nMap&lt;String, Pair&lt;Double, Integer&gt;&gt; result = new HashMap&lt;&gt;();\r\nal.forEach(record -&gt; {\r\n    // split data by &quot;-&quot;, and split aa-10.00 to &quot;aa&quot; and &quot;10.00&quot;\r\n    String [] splitRecord = record.split(&quot;-&quot;);\r\n    // if already exsit, sum and cardinality\r\n    if (result.containsKey(splitRecord[0])) {\r\n        result.put(splitRecord[0], new Pair&lt;&gt;(Double.valueOf(splitRecord[1]) + result.get(splitRecord[0]).first(), result.get(splitRecord[0]).second() + 1));\r\n    } else {\r\n        result.put(splitRecord[0], new Pair&lt;&gt;(Double.valueOf(splitRecord[1]), 1));\r\n    }\r\n});\r\n\r\nSystem.out.println(result);\r\n```","title":"How to find duplicate values with counts and total amount of duplicate values in arraylist","body":"<p>The ideas for dealing with this problem are as follows:</p>\n<ol>\n<li>Split each character string into a name and a value.</li>\n<li>Collect statistics on each character string. Sum up and count the characters with the same name.</li>\n<li>Store the result in the map.</li>\n<li>Print the statistics result.</li>\n</ol>\n<pre><code>ArrayList&lt;String&gt; al=new ArrayList&lt;&gt;();\nal.add(&quot;aa-10.00&quot;);\nal.add(&quot;bb-15.00&quot;);\nal.add(&quot;aa-20.00&quot;);\nal.add(&quot;aa-30.00&quot;);\nal.add(&quot;bb-10.00&quot;);\n\n// Map&lt;data name such as &quot;aa&quot;, Pair&lt;sum, count&gt; &gt;\nMap&lt;String, Pair&lt;Double, Integer&gt;&gt; result = new HashMap&lt;&gt;();\nal.forEach(record -&gt; {\n    // split data by &quot;-&quot;, and split aa-10.00 to &quot;aa&quot; and &quot;10.00&quot;\n    String [] splitRecord = record.split(&quot;-&quot;);\n    // if already exsit, sum and cardinality\n    if (result.containsKey(splitRecord[0])) {\n        result.put(splitRecord[0], new Pair&lt;&gt;(Double.valueOf(splitRecord[1]) + result.get(splitRecord[0]).first(), result.get(splitRecord[0]).second() + 1));\n    } else {\n        result.put(splitRecord[0], new Pair&lt;&gt;(Double.valueOf(splitRecord[1]), 1));\n    }\n});\n\nSystem.out.println(result);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18243171,"reputation":19300,"user_id":13279831,"display_name":"Nowhere Man"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1634734928,"creation_date":1634734928,"answer_id":69646472,"question_id":69625623,"body_markdown":"Since release of Java 8 back in March 2014, Java provides Stream API which allows group by elements of collections and collect some statistical data.\r\n\r\nSo, the input strings should be split into parts: name and amount separated with dash `-`, grouped by String name, and statistics should be collected for `double` amount.\r\n\r\nUsing [`Collection::stream`](https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html#stream--), [`String::split`](https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#split-java.lang.String-), [`Collectors.groupingBy`](https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#groupingBy-java.util.function.Function-java.util.function.Supplier-java.util.stream.Collector-) (with the Supplier&lt;Map&gt; and downstream collector), [`Collectors.summarizingDouble`](https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#summarizingDouble-java.util.function.ToDoubleFunction-) returning the [`DoubleSummaryStatistics`](https://docs.oracle.com/javase/8/docs/api/java/util/DoubleSummaryStatistics.html) the following solution can be implemented:\r\n```java\r\nList&lt;String&gt; al = Arrays.asList(\r\n    &quot;aa-10.00&quot;, &quot;bb-15.00&quot;, &quot;aa-20.00&quot;, &quot;aa-30.00&quot;, &quot;bb-10.00&quot;\r\n);\r\n\r\nMap&lt;String, DoubleSummaryStatistics&gt; stats = al\r\n    .stream()\r\n    .map(s -&gt; s.split(&quot;-&quot;)) // Stream&lt;String[]&gt;\r\n    .collect(Collectors.groupingBy(\r\n        arr -&gt; arr[0],\r\n        LinkedHashMap::new,\r\n        Collectors.summarizingDouble(arr -&gt; Double.parseDouble(arr[1]))\r\n    ));\r\n\r\nSystem.out.println(&quot;data  amount  count&quot;);\r\nstats.forEach((name, stat) -&gt; System.out.printf(&quot;%4s  %6.2f  %3d%n&quot;, \r\n    name, stat.getSum(), stat.getCount()\r\n));\r\n```\r\nOutput:\r\n```\r\ndata  amount  count\r\n  aa   60.00    3\r\n  bb   25.00    2\r\n```\r\n`LinkedHashMap` ensures that the elements appear in the insertion order (as they appeared in the input list).","title":"How to find duplicate values with counts and total amount of duplicate values in arraylist","body":"<p>Since release of Java 8 back in March 2014, Java provides Stream API which allows group by elements of collections and collect some statistical data.</p>\n<p>So, the input strings should be split into parts: name and amount separated with dash <code>-</code>, grouped by String name, and statistics should be collected for <code>double</code> amount.</p>\n<p>Using <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html#stream--\" rel=\"nofollow noreferrer\"><code>Collection::stream</code></a>, <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#split-java.lang.String-\" rel=\"nofollow noreferrer\"><code>String::split</code></a>, <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#groupingBy-java.util.function.Function-java.util.function.Supplier-java.util.stream.Collector-\" rel=\"nofollow noreferrer\"><code>Collectors.groupingBy</code></a> (with the Supplier and downstream collector), <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#summarizingDouble-java.util.function.ToDoubleFunction-\" rel=\"nofollow noreferrer\"><code>Collectors.summarizingDouble</code></a> returning the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/DoubleSummaryStatistics.html\" rel=\"nofollow noreferrer\"><code>DoubleSummaryStatistics</code></a> the following solution can be implemented:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;String&gt; al = Arrays.asList(\n    &quot;aa-10.00&quot;, &quot;bb-15.00&quot;, &quot;aa-20.00&quot;, &quot;aa-30.00&quot;, &quot;bb-10.00&quot;\n);\n\nMap&lt;String, DoubleSummaryStatistics&gt; stats = al\n    .stream()\n    .map(s -&gt; s.split(&quot;-&quot;)) // Stream&lt;String[]&gt;\n    .collect(Collectors.groupingBy(\n        arr -&gt; arr[0],\n        LinkedHashMap::new,\n        Collectors.summarizingDouble(arr -&gt; Double.parseDouble(arr[1]))\n    ));\n\nSystem.out.println(&quot;data  amount  count&quot;);\nstats.forEach((name, stat) -&gt; System.out.printf(&quot;%4s  %6.2f  %3d%n&quot;, \n    name, stat.getSum(), stat.getCount()\n));\n</code></pre>\n<p>Output:</p>\n<pre><code>data  amount  count\n  aa   60.00    3\n  bb   25.00    2\n</code></pre>\n<p><code>LinkedHashMap</code> ensures that the elements appear in the insertion order (as they appeared in the input list).</p>\n"}],"owner":{"account_id":5481479,"reputation":25,"user_id":4357788,"display_name":"arun"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":148,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":69646472,"answer_count":2,"score":-2,"last_activity_date":1634734928,"creation_date":1634621931,"question_id":69625623,"body_markdown":"I have list of data with amount, I want to separate duplicate data with that count and that total amount.\r\n\r\n    ArrayList&lt;String&gt; al=new ArrayList&lt;String&gt;();\r\n    al.add(&quot;aa-10.00&quot;);\r\n    al.add(&quot;bb-15.00&quot;);\r\n    al.add(&quot;aa-20.00&quot;);\r\n    al.add(&quot;aa-30.00&quot;);\r\n    al.add(&quot;bb-10.00&quot;);\r\n    \r\n    Output data amount count\r\n            aa  60.00    3\r\n            bb  25.00    2\r\n\r\n","title":"How to find duplicate values with counts and total amount of duplicate values in arraylist","body":"<p>I have list of data with amount, I want to separate duplicate data with that count and that total amount.</p>\n<pre><code>ArrayList&lt;String&gt; al=new ArrayList&lt;String&gt;();\nal.add(&quot;aa-10.00&quot;);\nal.add(&quot;bb-15.00&quot;);\nal.add(&quot;aa-20.00&quot;);\nal.add(&quot;aa-30.00&quot;);\nal.add(&quot;bb-10.00&quot;);\n\nOutput data amount count\n        aa  60.00    3\n        bb  25.00    2\n</code></pre>\n"},{"tags":["java","spring","maven","applicationcontext"],"comments":[{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1476183303,"post_id":39975524,"comment_id":67230035,"body_markdown":"Add `spring-context` as a dependency.","body":"Add <code>spring-context</code> as a dependency."},{"owner":{"account_id":9132122,"reputation":3607,"user_id":6793312,"accept_rate":50,"display_name":"Moshe Arad"},"score":0,"creation_date":1476186475,"post_id":39975524,"comment_id":67231753,"body_markdown":"Why are you executing java commands instead of maven commands, in order to package, build and compile your project?","body":"Why are you executing java commands instead of maven commands, in order to package, build and compile your project?"},{"owner":{"account_id":6365703,"reputation":90,"user_id":4939761,"display_name":"Adnan"},"score":0,"creation_date":1476189093,"post_id":39975524,"comment_id":67233209,"body_markdown":"added spring-context - still same error","body":"added spring-context - still same error"},{"owner":{"account_id":6365703,"reputation":90,"user_id":4939761,"display_name":"Adnan"},"score":0,"creation_date":1476189120,"post_id":39975524,"comment_id":67233228,"body_markdown":"Moshe  i am using mvn package to pack and compile the project but using the java command to run the java application","body":"Moshe  i am using mvn package to pack and compile the project but using the java command to run the java application"},{"owner":{"account_id":9132122,"reputation":3607,"user_id":6793312,"accept_rate":50,"display_name":"Moshe Arad"},"score":0,"creation_date":1476189377,"post_id":39975524,"comment_id":67233386,"body_markdown":"Then try my solution: http://stackoverflow.com/questions/39675845/classnotfoundexception-for-included-dependency/39687000#39687000","body":"Then try my solution: <a href=\"http://stackoverflow.com/questions/39675845/classnotfoundexception-for-included-dependency/39687000#39687000\" title=\"classnotfoundexception for included dependency\">stackoverflow.com/questions/39675845/&hellip;</a>"},{"owner":{"account_id":6365703,"reputation":90,"user_id":4939761,"display_name":"Adnan"},"score":0,"creation_date":1476192654,"post_id":39975524,"comment_id":67235569,"body_markdown":"tried all those steps but still doesnt work - quite bizzare - ive ever deleted the dependency files and re-built but still not working","body":"tried all those steps but still doesnt work - quite bizzare - ive ever deleted the dependency files and re-built but still not working"},{"owner":{"account_id":6365703,"reputation":90,"user_id":4939761,"display_name":"Adnan"},"score":0,"creation_date":1476193664,"post_id":39975524,"comment_id":67236307,"body_markdown":"when running the App.java via eclipse, it works but not via command line using mvn","body":"when running the App.java via eclipse, it works but not via command line using mvn"}],"answers":[{"tags":[],"owner":{"account_id":4830178,"reputation":456,"user_id":3898555,"display_name":"jaysee"},"down_vote_count":0,"up_vote_count":16,"is_accepted":true,"score":16,"last_activity_date":1477209542,"creation_date":1477155321,"answer_id":40194689,"question_id":39975524,"body_markdown":"Your `pom.xml` creates a jar file which contains only the classes defined in your project. But all the other dependencies (spring-core, spring-context-support) which are required by your application aren&#39;t included.\r\n\r\nIf your application is started within eclipse, eclipse integrates these required jar files to the classpath of the application and so it is able to run.  \r\nIf your application is started from CMD the spring classes can&#39;t be found in the classpath and you get a `java.lang.NoClassDefFoundError`.\r\n\r\nIt&#39;s possible to name all the required jars manually when the application is started from CMD (classpath), but is much easier to created a so called self contained jar file, which has all of them already included. This can be done using [maven-assembly-plugin](http://maven.apache.org/plugins/maven-assembly-plugin).\r\n\r\nAn example how to create a self contained jar file can be found [here](https://www.staldal.nu/tech/2014/10/26/create-a-self-contained-jar-file-with-maven).\r\n\r\nThe application in a self contained jar can be started now from CMD:  \r\njava -jar *name_of_your_project*-jar-with-dependencies.jar \r\n\r\n","title":"java.lang.NoClassDefFoundError: org/springframework/context/ApplicationContext maven","body":"<p>Your <code>pom.xml</code> creates a jar file which contains only the classes defined in your project. But all the other dependencies (spring-core, spring-context-support) which are required by your application aren't included.</p>\n\n<p>If your application is started within eclipse, eclipse integrates these required jar files to the classpath of the application and so it is able to run.<br>\nIf your application is started from CMD the spring classes can't be found in the classpath and you get a <code>java.lang.NoClassDefFoundError</code>.</p>\n\n<p>It's possible to name all the required jars manually when the application is started from CMD (classpath), but is much easier to created a so called self contained jar file, which has all of them already included. This can be done using <a href=\"http://maven.apache.org/plugins/maven-assembly-plugin\" rel=\"noreferrer\">maven-assembly-plugin</a>.</p>\n\n<p>An example how to create a self contained jar file can be found <a href=\"https://www.staldal.nu/tech/2014/10/26/create-a-self-contained-jar-file-with-maven\" rel=\"noreferrer\">here</a>.</p>\n\n<p>The application in a self contained jar can be started now from CMD:<br>\njava -jar <em>name_of_your_project</em>-jar-with-dependencies.jar </p>\n"},{"tags":[],"owner":{"account_id":7812311,"reputation":2813,"user_id":5908154,"accept_rate":10,"display_name":"Abhishek Galoda"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1540894902,"creation_date":1540894902,"answer_id":53062105,"question_id":39975524,"body_markdown":"I was getting the same error when running from Intellij as a main class (In Spring Boot project) \r\n\r\nAfter opening Module settings, In the Deopendencies tab I saw that for spring-context for some reason the scope was provided, changing to compile/ even removing the scope fixed the issue for for me\r\n\r\n     &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\r\n            &lt;version&gt;## Put your desired version here ##&lt;/version&gt;   \r\n        &lt;/dependency&gt;","title":"java.lang.NoClassDefFoundError: org/springframework/context/ApplicationContext maven","body":"<p>I was getting the same error when running from Intellij as a main class (In Spring Boot project) </p>\n\n<p>After opening Module settings, In the Deopendencies tab I saw that for spring-context for some reason the scope was provided, changing to compile/ even removing the scope fixed the issue for for me</p>\n\n<pre><code> &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n        &lt;version&gt;## Put your desired version here ##&lt;/version&gt;   \n    &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2078662,"reputation":2458,"user_id":1851286,"display_name":"Oleksii Kyslytsyn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1622978145,"creation_date":1622976701,"answer_id":67858276,"question_id":39975524,"body_markdown":"In my similar case both @jaysee answer or: \r\n\r\n    &lt;plugin&gt;\r\n        &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n        &lt;configuration&gt;\r\n          &lt;descriptorRefs&gt;\r\n            &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\r\n          &lt;/descriptorRefs&gt;\r\n          &lt;archive&gt;\r\n            &lt;manifest&gt;\r\n              &lt;mainClass&gt;com.example.MyMainClass &lt;/mainClass&gt;\r\n            &lt;/manifest&gt;\r\n          &lt;/archive&gt;\r\n        &lt;/configuration&gt;\r\n        &lt;executions&gt;\r\n          &lt;execution&gt;\r\n            &lt;phase&gt;package&lt;/phase&gt;\r\n            &lt;goals&gt;\r\n              &lt;goal&gt;single&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n          &lt;/execution&gt;\r\n        &lt;/executions&gt;\r\n    &lt;/plugin&gt;\r\n\r\nor\r\n\r\n    &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;2.5.0&lt;/version&gt;\r\n\r\nhelped.","title":"java.lang.NoClassDefFoundError: org/springframework/context/ApplicationContext maven","body":"<p>In my similar case both @jaysee answer or:</p>\n<pre><code>&lt;plugin&gt;\n    &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n    &lt;configuration&gt;\n      &lt;descriptorRefs&gt;\n        &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n      &lt;/descriptorRefs&gt;\n      &lt;archive&gt;\n        &lt;manifest&gt;\n          &lt;mainClass&gt;com.example.MyMainClass &lt;/mainClass&gt;\n        &lt;/manifest&gt;\n      &lt;/archive&gt;\n    &lt;/configuration&gt;\n    &lt;executions&gt;\n      &lt;execution&gt;\n        &lt;phase&gt;package&lt;/phase&gt;\n        &lt;goals&gt;\n          &lt;goal&gt;single&lt;/goal&gt;\n        &lt;/goals&gt;\n      &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>or</p>\n<pre><code>&lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.5.0&lt;/version&gt;\n</code></pre>\n<p>helped.</p>\n"},{"tags":[],"owner":{"account_id":12243278,"reputation":762,"user_id":10275600,"display_name":"Shtefan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1632018498,"creation_date":1632018498,"answer_id":69239844,"question_id":39975524,"body_markdown":"The below fixed similar issue for me. \r\n\r\nbuild plugins section should be put right after /dependencies:\r\n\r\n    &lt;build&gt;\r\n      &lt;plugins&gt;\r\n        &lt;plugin&gt;\r\n        \t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        \t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n        \t\t&lt;version&gt;2.5.4&lt;/version&gt;\r\n        \t\t&lt;configuration&gt;\r\n        \t\t\t&lt;layout&gt;ZIP&lt;/layout&gt;\r\n        \t\t&lt;/configuration&gt;\r\n        \t\t&lt;executions&gt;\r\n        \t\t\t&lt;execution&gt;\r\n        \t\t\t  &lt;goals&gt;\r\n        \t\t\t    &lt;goal&gt;repackage&lt;/goal&gt;\r\n        \t\t\t  &lt;/goals&gt;\r\n        \t\t\t&lt;/execution&gt;\r\n        \t\t&lt;/executions&gt;\r\n        &lt;/plugin&gt;\r\n      &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n","title":"java.lang.NoClassDefFoundError: org/springframework/context/ApplicationContext maven","body":"<p>The below fixed similar issue for me.</p>\n<p>build plugins section should be put right after /dependencies:</p>\n<pre><code>&lt;build&gt;\n  &lt;plugins&gt;\n    &lt;plugin&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.5.4&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;layout&gt;ZIP&lt;/layout&gt;\n            &lt;/configuration&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                  &lt;goals&gt;\n                    &lt;goal&gt;repackage&lt;/goal&gt;\n                  &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n    &lt;/plugin&gt;\n  &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11213388,"reputation":51,"user_id":11719375,"display_name":"sumit singh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634734292,"creation_date":1634734292,"answer_id":69646324,"question_id":39975524,"body_markdown":"I was facing the same issue. I am using the intellij 2021 but the above solution didn&#39;t work. Also in eclipse it was working fine . The solution that worked for me was:\r\n1)Go to edit run/debug configuraiton\r\n2)Modify option\r\n3)Check &quot;include dependency with provided scope&quot;\r\n[![enter image description here][1]][1]\r\n\r\n[![configure setting][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/DGQAW.png\r\n  [2]: https://i.stack.imgur.com/kPFoc.png","title":"java.lang.NoClassDefFoundError: org/springframework/context/ApplicationContext maven","body":"<p>I was facing the same issue. I am using the intellij 2021 but the above solution didn't work. Also in eclipse it was working fine . The solution that worked for me was:\n1)Go to edit run/debug configuraiton\n2)Modify option\n3)Check &quot;include dependency with provided scope&quot;\n<a href=\"https://i.stack.imgur.com/DGQAW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DGQAW.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/kPFoc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kPFoc.png\" alt=\"configure setting\" /></a></p>\n"}],"owner":{"account_id":6365703,"reputation":90,"user_id":4939761,"display_name":"Adnan"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45952,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":40194689,"answer_count":5,"score":5,"last_activity_date":1634734292,"creation_date":1476182613,"question_id":39975524,"body_markdown":"I am new to spring and maven. I have a simple hello world project using Spring . The project builds successfully but i face the following error at runtime: \r\n\r\n    Error: A JNI error has occurred, please check your installation and try again\r\n    Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/springframework/context/ApplicationContext\r\n\r\nThis is the main app: App.java \r\n\r\n    package com.test.SpringMaven2;\r\n    \r\n    import org.springframework.context.ApplicationContext;\r\n    import org.springframework.context.annotation.AnnotationConfigApplicationContext;\r\n    \r\n    \r\n    \r\n    /**\r\n     * Hello world!\r\n     *\r\n     */\r\n    public class App \r\n    {\r\n        public static void main( String[] args )\r\n        {\r\n            System.out.println( &quot;Hello World!&quot; );\r\n            System.out.println( &quot;Hello World!&quot; );\r\n            ApplicationContext context = new AnnotationConfigApplicationContext(HelloWorldConfig.class);\r\n            \r\n            HelloWorld hello = (HelloWorld) context.getBean(&quot;helloWorld&quot;); \r\n            hello.setName(&quot;Adnan&quot;);\r\n            hello.getName();\r\n        }\r\n    }\r\n\r\nThis is the HelloWorld bean \r\n\r\n    package com.test.SpringMaven2;\r\n    \r\n    public class HelloWorld{\r\n    \t\r\n    \t\r\n    \tprivate String name; \r\n    \t\r\n    \tpublic void setName(String name){\r\n    \t\tthis.name = name;\r\n    \t}\r\n    \r\n    \tpublic void getName(){\r\n    \t\tSystem.out.println(&quot;Hello, &quot; + name);\r\n    \t}\r\n    }\r\n\r\nThis is the annotation based configuration file: \r\n\r\n    package com.test.SpringMaven2;\r\n    \r\n    \r\n    import org.springframework.context.annotation.*;\r\n    \r\n    @Configuration\r\n    public class HelloWorldConfig{\r\n    \t\r\n    \t@Bean\r\n    \tpublic HelloWorld helloWorld(){\r\n    \t\treturn new HelloWorld(); \r\n    \t}\r\n    \t\r\n    }\r\n\r\nThis is my pom.xml \r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n      xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n      &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n      &lt;groupId&gt;com.test&lt;/groupId&gt;\r\n      &lt;artifactId&gt;SpringMaven2&lt;/artifactId&gt;\r\n      &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n      &lt;packaging&gt;jar&lt;/packaging&gt;\r\n    \r\n      &lt;name&gt;SpringMaven2&lt;/name&gt;\r\n      &lt;url&gt;http://maven.apache.org&lt;/url&gt;\r\n    \r\n      &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n      &lt;/properties&gt;\r\n    \r\n      &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;junit&lt;/groupId&gt;\r\n          &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n          &lt;version&gt;3.8.1&lt;/version&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;4.3.3.RELEASE&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n     &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n     &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\r\n     &lt;version&gt;4.3.3.RELEASE&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n      &lt;/dependencies&gt;\r\n    &lt;/project&gt;\r\n\r\nI am running the following command in CMD to run the application: \r\njava -cp {nameofresultjarfile} com.test.SpringMaven2.App\r\n\r\nBut getting the error messsage above \r\n\r\nAny advice? \r\n\r\nThanks\r\n\r\n\r\n\r\n","title":"java.lang.NoClassDefFoundError: org/springframework/context/ApplicationContext maven","body":"<p>I am new to spring and maven. I have a simple hello world project using Spring . The project builds successfully but i face the following error at runtime: </p>\n\n<pre><code>Error: A JNI error has occurred, please check your installation and try again\nException in thread \"main\" java.lang.NoClassDefFoundError: org/springframework/context/ApplicationContext\n</code></pre>\n\n<p>This is the main app: App.java </p>\n\n<pre><code>package com.test.SpringMaven2;\n\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.annotation.AnnotationConfigApplicationContext;\n\n\n\n/**\n * Hello world!\n *\n */\npublic class App \n{\n    public static void main( String[] args )\n    {\n        System.out.println( \"Hello World!\" );\n        System.out.println( \"Hello World!\" );\n        ApplicationContext context = new AnnotationConfigApplicationContext(HelloWorldConfig.class);\n\n        HelloWorld hello = (HelloWorld) context.getBean(\"helloWorld\"); \n        hello.setName(\"Adnan\");\n        hello.getName();\n    }\n}\n</code></pre>\n\n<p>This is the HelloWorld bean </p>\n\n<pre><code>package com.test.SpringMaven2;\n\npublic class HelloWorld{\n\n\n    private String name; \n\n    public void setName(String name){\n        this.name = name;\n    }\n\n    public void getName(){\n        System.out.println(\"Hello, \" + name);\n    }\n}\n</code></pre>\n\n<p>This is the annotation based configuration file: </p>\n\n<pre><code>package com.test.SpringMaven2;\n\n\nimport org.springframework.context.annotation.*;\n\n@Configuration\npublic class HelloWorldConfig{\n\n    @Bean\n    public HelloWorld helloWorld(){\n        return new HelloWorld(); \n    }\n\n}\n</code></pre>\n\n<p>This is my pom.xml </p>\n\n<pre><code>&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n  xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n  &lt;groupId&gt;com.test&lt;/groupId&gt;\n  &lt;artifactId&gt;SpringMaven2&lt;/artifactId&gt;\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n  &lt;packaging&gt;jar&lt;/packaging&gt;\n\n  &lt;name&gt;SpringMaven2&lt;/name&gt;\n  &lt;url&gt;http://maven.apache.org&lt;/url&gt;\n\n  &lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n  &lt;/properties&gt;\n\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;junit&lt;/groupId&gt;\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\n      &lt;version&gt;3.8.1&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;\n            &lt;version&gt;4.3.3.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n &lt;version&gt;4.3.3.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n  &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>I am running the following command in CMD to run the application: \njava -cp {nameofresultjarfile} com.test.SpringMaven2.App</p>\n\n<p>But getting the error messsage above </p>\n\n<p>Any advice? </p>\n\n<p>Thanks</p>\n"},{"tags":["java","spring-boot","jpa"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1569319362,"post_id":58077668,"comment_id":102550115,"body_markdown":"Which database are you using? One approach is to do partitioning in the database, and have the application only see a single table, even though the physical data layout is dependent on the state property.","body":"Which database are you using? One approach is to do partitioning in the database, and have the application only see a single table, even though the physical data layout is dependent on the state property."},{"owner":{"account_id":3421306,"reputation":1370,"user_id":2868835,"accept_rate":0,"display_name":"user2868835"},"score":0,"creation_date":1569323493,"post_id":58077668,"comment_id":102552407,"body_markdown":"No database chosen yet - it will probably be either MySQL or Postgres. I&#39;d prefer two tables.  I&#39;m envisaging the use of a scheduled task to move &#39;completed&#39; records from the &#39;Live&#39; to the &#39;Archive&#39; tables","body":"No database chosen yet - it will probably be either MySQL or Postgres. I&#39;d prefer two tables.  I&#39;m envisaging the use of a scheduled task to move &#39;completed&#39; records from the &#39;Live&#39; to the &#39;Archive&#39; tables"}],"answers":[{"tags":[],"owner":{"account_id":22912280,"reputation":1,"user_id":17049360,"display_name":"Khan"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1634734249,"creation_date":1634734249,"answer_id":69646313,"question_id":58077668,"body_markdown":"\r\n\r\nI&#39;m building a Java Spring Boot micro-service that has an object that represents a business transaction that I am mapping to a SQL database via JPA. The object has a &#39;state&#39; property with two values of &#39;open&#39; and &#39;completed&#39;. Given the large data volumes associated with this object I want to move objects with a state equal to &#39;completed&#39; to an archive table. The ideal solution is to have two tables: one &#39;live&#39; table for objects that are open or only recently completed, and a second table for archived completed objects.\r\n\r\nAny suggestions of how I can do this with JPA? I also want to have a facility to join the &#39;live&#39; and &#39;archive&#39; tables for running queries across all data.","title":"How to design &#39;open&#39; and &#39;archive&#39; tables for same object with Java JPA?","body":"<p>I'm building a Java Spring Boot micro-service that has an object that represents a business transaction that I am mapping to a SQL database via JPA. The object has a 'state' property with two values of 'open' and 'completed'. Given the large data volumes associated with this object I want to move objects with a state equal to 'completed' to an archive table. The ideal solution is to have two tables: one 'live' table for objects that are open or only recently completed, and a second table for archived completed objects.</p>\n<p>Any suggestions of how I can do this with JPA? I also want to have a facility to join the 'live' and 'archive' tables for running queries across all data.</p>\n"}],"owner":{"account_id":3421306,"reputation":1370,"user_id":2868835,"accept_rate":0,"display_name":"user2868835"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1150,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1634734249,"creation_date":1569318956,"question_id":58077668,"body_markdown":"I&#39;m building a Java Spring Boot micro-service that has an object that represents a business transaction that I am mapping to a SQL database via JPA. The object has a &#39;state&#39; property with two values of &#39;open&#39; and &#39;completed&#39;.  Given the large data volumes associated with this object I want to move objects with a state equal to &#39;completed&#39; to an archive table. The ideal solution is to have two tables: one &#39;live&#39; table for objects that are open or only recently completed, and a second table for archived completed objects.\r\n\r\nAny suggestions of how I can do this with JPA?  I also want to have a facility to join the &#39;live&#39; and &#39;archive&#39; tables for running queries across all data. \r\n\r\nTIA","title":"How to design &#39;open&#39; and &#39;archive&#39; tables for same object with Java JPA?","body":"<p>I'm building a Java Spring Boot micro-service that has an object that represents a business transaction that I am mapping to a SQL database via JPA. The object has a 'state' property with two values of 'open' and 'completed'.  Given the large data volumes associated with this object I want to move objects with a state equal to 'completed' to an archive table. The ideal solution is to have two tables: one 'live' table for objects that are open or only recently completed, and a second table for archived completed objects.</p>\n\n<p>Any suggestions of how I can do this with JPA?  I also want to have a facility to join the 'live' and 'archive' tables for running queries across all data. </p>\n\n<p>TIA</p>\n"},{"tags":["java","spring","azure","azure-keyvault","key-value-store"],"comments":[{"owner":{"account_id":20573746,"reputation":440,"user_id":15101500,"display_name":"Sven"},"score":0,"creation_date":1634736286,"post_id":69643661,"comment_id":123105167,"body_markdown":"As Ken W MSFT said, you shouldnt use Key Vault for this case. I would use a simple storage table with key and the brand and restrict the storage accordingly. \n\nThis also has the advantage that you can add more properties later if necessary without any problems. A key vault simply restricts you too much. And the problem of performance is also eliminated. \n\n\nFrom a security point of view, you should not use the storage master key. If you also host your app in Azure, then it is best to use a managed identity.","body":"As Ken W MSFT said, you shouldnt use Key Vault for this case. I would use a simple storage table with key and the brand and restrict the storage accordingly.   This also has the advantage that you can add more properties later if necessary without any problems. A key vault simply restricts you too much. And the problem of performance is also eliminated.    From a security point of view, you should not use the storage master key. If you also host your app in Azure, then it is best to use a managed identity."}],"answers":[{"tags":[],"owner":{"account_id":2278465,"reputation":3603,"user_id":4800789,"display_name":"Ken W - Zero Networks"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634734114,"creation_date":1634734114,"answer_id":69646272,"question_id":69643661,"body_markdown":"Key Vault is designed for your own services secrets. If you are storing your customers&#39; secrets (especially for high-throughput key storage scenarios), consider putting the keys in a database or storage account with encryption, and storing just the master key in Azure Key Vault.\r\n\r\n## Throttling\r\nIf you are seeing error code 429, you should the following are **best practices** you should implement:\r\n\r\n - Reduce the number of operations per request.\r\n - Reduce the frequency of requests.\r\n - Avoid immediate retries.\r\n   - All requests accrue against your usage limits.\r\n\r\n### Backoff code example\r\n&lt;pre&gt;&lt;coded&gt;\r\nSecretClientOptions options = new SecretClientOptions()\r\n    {\r\n        Retry =\r\n        {\r\n            Delay= TimeSpan.FromSeconds(2),\r\n            MaxDelay = TimeSpan.FromSeconds(16),\r\n            MaxRetries = 5,\r\n            Mode = RetryMode.Exponential\r\n         }\r\n    };\r\n    var client = new SecretClient(new Uri(&quot;https://keyVaultName.vault.azure.net&quot;), new DefaultAzureCredential(),options);\r\n                                 \r\n    //Retrieve Secret\r\n    secret = client.GetSecret(secretName);\r\n&lt;/code&gt;&lt;/pre&gt;\r\n\r\nhttps://learn.microsoft.com/en-us/azure/key-vault/general/overview-throttling","title":"Get secret name by value from azure Key vault","body":"<p>Key Vault is designed for your own services secrets. If you are storing your customers' secrets (especially for high-throughput key storage scenarios), consider putting the keys in a database or storage account with encryption, and storing just the master key in Azure Key Vault.</p>\n<h2>Throttling</h2>\n<p>If you are seeing error code 429, you should the following are <strong>best practices</strong> you should implement:</p>\n<ul>\n<li>Reduce the number of operations per request.</li>\n<li>Reduce the frequency of requests.</li>\n<li>Avoid immediate retries.\n<ul>\n<li>All requests accrue against your usage limits.</li>\n</ul>\n</li>\n</ul>\n<h3>Backoff code example</h3>\n<pre>\nSecretClientOptions options = new SecretClientOptions()\n    {\n        Retry =\n        {\n            Delay= TimeSpan.FromSeconds(2),\n            MaxDelay = TimeSpan.FromSeconds(16),\n            MaxRetries = 5,\n            Mode = RetryMode.Exponential\n         }\n    };\n    var client = new SecretClient(new Uri(\"https://keyVaultName.vault.azure.net\"), new DefaultAzureCredential(),options);\n                                 \n    //Retrieve Secret\n    secret = client.GetSecret(secretName);\n</pre>\n<p><a href=\"https://learn.microsoft.com/en-us/azure/key-vault/general/overview-throttling\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/azure/key-vault/general/overview-throttling</a></p>\n"}],"owner":{"account_id":15704117,"reputation":83,"user_id":11916606,"display_name":"Artem Causelove"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":853,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1634734114,"creation_date":1634722775,"question_id":69643661,"body_markdown":"The idea is that user send me an api-key and I return him a name of his brand. The api key it&#39;s a GUID so I can&#39;t store it as a secret name.\r\n\r\nI am looking for a way to **retrieve a secret name by value from a keyvault**. That&#39;s what my team came up with but it very slow and dramatically increases when adding new secrets to key vault.\r\n\r\n    public String getClientApiKeyName(final String apiKeyValue) {\r\n            for (SecretProperties secretProperties : secretClient.listPropertiesOfSecrets()) {\r\n                if (secretProperties.isEnabled()) {\r\n                    final KeyVaultSecret secretWithValue = secretClient.getSecret(\r\n                            secretProperties.getName(),\r\n                            secretProperties.getVersion()\r\n                    );\r\n                    if (secretWithValue.getValue().equals(apiKeyValue)) {\r\n                        return secretWithValue.getName();\r\n                    }\r\n                }\r\n            }\r\n            return null;\r\n        }","title":"Get secret name by value from azure Key vault","body":"<p>The idea is that user send me an api-key and I return him a name of his brand. The api key it's a GUID so I can't store it as a secret name.</p>\n<p>I am looking for a way to <strong>retrieve a secret name by value from a keyvault</strong>. That's what my team came up with but it very slow and dramatically increases when adding new secrets to key vault.</p>\n<pre><code>public String getClientApiKeyName(final String apiKeyValue) {\n        for (SecretProperties secretProperties : secretClient.listPropertiesOfSecrets()) {\n            if (secretProperties.isEnabled()) {\n                final KeyVaultSecret secretWithValue = secretClient.getSecret(\n                        secretProperties.getName(),\n                        secretProperties.getVersion()\n                );\n                if (secretWithValue.getValue().equals(apiKeyValue)) {\n                    return secretWithValue.getName();\n                }\n            }\n        }\n        return null;\n    }\n</code></pre>\n"},{"tags":["java","trie"],"comments":[{"owner":{"account_id":1734091,"reputation":92376,"user_id":1587046,"accept_rate":62,"display_name":"Alexis C."},"score":1,"creation_date":1390931824,"post_id":21413138,"comment_id":32302325,"body_markdown":"Are you making a pre-order traversal when printing the output?","body":"Are you making a pre-order traversal when printing the output?"},{"owner":{"account_id":357630,"reputation":10123,"user_id":697911,"accept_rate":53,"display_name":"user697911"},"score":0,"creation_date":1390933863,"post_id":21413138,"comment_id":32303528,"body_markdown":"Yes， pre-order. Since &#39;doll&#39; is first inserted, it must be output first even in pre-order. Under the root, the first level of characters are &#39;d  b s&#39;. With pre-order, it prints all words with &#39;d&#39; prefix first.","body":"Yes， pre-order. Since &#39;doll&#39; is first inserted, it must be output first even in pre-order. Under the root, the first level of characters are &#39;d  b s&#39;. With pre-order, it prints all words with &#39;d&#39; prefix first."},{"owner":{"account_id":357630,"reputation":10123,"user_id":697911,"accept_rate":53,"display_name":"user697911"},"score":0,"creation_date":1390934416,"post_id":21413138,"comment_id":32303879,"body_markdown":"Just think about the standard Trie data structure and the 2-step algorithm described above, there isn&#39;t any piece of information to guarantee lexicographical ordering. How could that be possible？","body":"Just think about the standard Trie data structure and the 2-step algorithm described above, there isn&#39;t any piece of information to guarantee lexicographical ordering. How could that be possible？"},{"owner":{"account_id":235018,"reputation":364834,"user_id":501557,"accept_rate":90,"display_name":"templatetypedef"},"score":2,"creation_date":1390935144,"post_id":21413138,"comment_id":32304300,"body_markdown":"If you do an inorder traversal and visit the children of each node in sorted order, you should get back all of the elements in sorted order. Could you show us the code you&#39;re using for an inorder traversal and for storing the nodes in the trie?","body":"If you do an inorder traversal and visit the children of each node in sorted order, you should get back all of the elements in sorted order. Could you show us the code you&#39;re using for an inorder traversal and for storing the nodes in the trie?"},{"owner":{"account_id":357630,"reputation":10123,"user_id":697911,"accept_rate":53,"display_name":"user697911"},"score":0,"creation_date":1390935444,"post_id":21413138,"comment_id":32304480,"body_markdown":"But wiki says it&#39;s pre-order to achieve lexicographical ordering.","body":"But wiki says it&#39;s pre-order to achieve lexicographical ordering."},{"owner":{"account_id":357630,"reputation":10123,"user_id":697911,"accept_rate":53,"display_name":"user697911"},"score":0,"creation_date":1390935549,"post_id":21413138,"comment_id":32304542,"body_markdown":"Just take the tree above as one example, your inorder algorithm won&#39;t work either. It seems the nodes have to be inserted in some order. Otherwise, no way to do that.","body":"Just take the tree above as one example, your inorder algorithm won&#39;t work either. It seems the nodes have to be inserted in some order. Otherwise, no way to do that."},{"owner":{"account_id":398094,"reputation":636,"user_id":762588,"display_name":"Viktor Seifert"},"score":0,"creation_date":1503050216,"post_id":21413138,"comment_id":78464535,"body_markdown":"Seems to the children are not sorted by the trie and your code does not sort the children.  Have you tried sorting the children by `data_`?","body":"Seems to the children are not sorted by the trie and your code does not sort the children.  Have you tried sorting the children by <code>data_</code>?"}],"answers":[{"tags":[],"owner":{"account_id":3182281,"reputation":880,"user_id":2688733,"accept_rate":30,"display_name":"Lanc"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1418807602,"creation_date":1418807602,"answer_id":27521901,"question_id":21413138,"body_markdown":"The correct way of saying about lexicographical sorting using tries is :\r\n\r\nThe preorder of the nodes in a trie is the same as the lexicographical order of the strings they represent assuming the children of a node are ordered by the edge labels.\r\n\r\nNow, if you tried this in your code, pre-order traversal should give you strings in lexicographic order.\r\n\r\nHere is the reference which has an example : [http://www.cs.helsinki.fi/u/tpkarkka/opetus/12s/spa/lecture02.pdf][1]\r\n\r\n\r\n  [1]: http://www.cs.helsinki.fi/u/tpkarkka/opetus/12s/spa/lecture02.pdf","title":"Lexicographic sorting with a Trie","body":"<p>The correct way of saying about lexicographical sorting using tries is :</p>\n\n<p>The preorder of the nodes in a trie is the same as the lexicographical order of the strings they represent assuming the children of a node are ordered by the edge labels.</p>\n\n<p>Now, if you tried this in your code, pre-order traversal should give you strings in lexicographic order.</p>\n\n<p>Here is the reference which has an example : <a href=\"http://www.cs.helsinki.fi/u/tpkarkka/opetus/12s/spa/lecture02.pdf\" rel=\"nofollow\">http://www.cs.helsinki.fi/u/tpkarkka/opetus/12s/spa/lecture02.pdf</a></p>\n"},{"tags":[],"owner":{"account_id":3324728,"reputation":605,"user_id":2795050,"accept_rate":25,"display_name":"AnukuL"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1503048709,"creation_date":1503048709,"answer_id":45753293,"question_id":21413138,"body_markdown":"According to me, it should be `Inorder` traversal. One can traverse the trie such that all branches having keys less than root&#39;s value are processed first, then root&#39;s value is printed, and lastly all values greater than root&#39;s value. This is **standard** `inorder` traversal but the only point I wanted to make was, you will have to write custom logic for processing all branches having keys less than root&#39;s key first, which in a regular binary tree would just have been root.left, but since there is not left/right in trie we&#39;ll have to fall back on the essence of left and right in a BST.( whose inorder also outputs lexicographically sorted values.`) ","title":"Lexicographic sorting with a Trie","body":"<p>According to me, it should be <code>Inorder</code> traversal. One can traverse the trie such that all branches having keys less than root's value are processed first, then root's value is printed, and lastly all values greater than root's value. This is <strong>standard</strong> <code>inorder</code> traversal but the only point I wanted to make was, you will have to write custom logic for processing all branches having keys less than root's key first, which in a regular binary tree would just have been root.left, but since there is not left/right in trie we'll have to fall back on the essence of left and right in a BST.( whose inorder also outputs lexicographically sorted values.`) </p>\n"},{"tags":[],"owner":{"account_id":1338563,"reputation":1,"user_id":16134259,"display_name":"Naveen Kumar Singh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634734096,"creation_date":1634734096,"answer_id":69646266,"question_id":21413138,"body_markdown":"Can Also be done by TreeMap -\r\n\r\n    \r\n\r\n\r\n    import java.util.Map;\r\n    import java.util.TreeMap;\r\n\r\n    class TrieNodeTreeMap{\r\n        Map&lt;Character, TrieNodeTreeMap&gt; children;\r\n        String key;\r\n    \r\n        public TrieNodeTreeMap(){\r\n            key = null;\r\n            children = new TreeMap&lt;&gt;();\r\n        }\r\n    }\r\n    public class LexicographPrint {\r\n        public static TrieNodeTreeMap root;\r\n    \r\n        public static void main(String[] args) {\r\n    \r\n            root = new TrieNodeTreeMap();\r\n            //String s = &quot;lexicographic sorting of a set&quot;;\r\n            String s = &quot;lexicographic sorting of a set of keys can be accomplished with &quot; +\r\n                    &quot;a simple trie based algorithm we insert all keys in a trie output &quot; +\r\n                    &quot;all keys in the trie by means of preorder traversal which results &quot; +\r\n                    &quot;in output that is in lexicographically increasing order preorder &quot; +\r\n                    &quot;traversal is a kind of depth first traversal&quot;;\r\n            String dict[] = s.split(&quot; &quot;);\r\n            for (String word : dict){\r\n                insertion(root,word);\r\n            }\r\n    \r\n            lexicographlySort(root);\r\n        }\r\n    \r\n        private static void insertion(TrieNodeTreeMap root, String str){\r\n            TrieNodeTreeMap curr = root;\r\n    \r\n            for (char ch : str.toCharArray()){\r\n                if (!curr.children.containsKey(ch)){\r\n                    curr.children.put(ch, new TrieNodeTreeMap());\r\n                }\r\n    \r\n                curr  = curr.children.get(ch);\r\n            }\r\n    \r\n            curr.key = str;\r\n        }\r\n    \r\n        private static void lexicographlySort(TrieNodeTreeMap root){\r\n            TrieNodeTreeMap curr = root;\r\n            if (curr == null)\r\n                return;\r\n    \r\n            for (Map.Entry&lt;Character, TrieNodeTreeMap&gt; entry : curr.children.entrySet()){\r\n                TrieNodeTreeMap tmp = entry.getValue();\r\n                if (tmp.key != null)\r\n                    System.out.println(tmp.key);\r\n                lexicographlySort(entry.getValue());\r\n            }\r\n        }\r\n    }","title":"Lexicographic sorting with a Trie","body":"<p>Can Also be done by TreeMap -</p>\n<pre><code>import java.util.Map;\nimport java.util.TreeMap;\n\nclass TrieNodeTreeMap{\n    Map&lt;Character, TrieNodeTreeMap&gt; children;\n    String key;\n\n    public TrieNodeTreeMap(){\n        key = null;\n        children = new TreeMap&lt;&gt;();\n    }\n}\npublic class LexicographPrint {\n    public static TrieNodeTreeMap root;\n\n    public static void main(String[] args) {\n\n        root = new TrieNodeTreeMap();\n        //String s = &quot;lexicographic sorting of a set&quot;;\n        String s = &quot;lexicographic sorting of a set of keys can be accomplished with &quot; +\n                &quot;a simple trie based algorithm we insert all keys in a trie output &quot; +\n                &quot;all keys in the trie by means of preorder traversal which results &quot; +\n                &quot;in output that is in lexicographically increasing order preorder &quot; +\n                &quot;traversal is a kind of depth first traversal&quot;;\n        String dict[] = s.split(&quot; &quot;);\n        for (String word : dict){\n            insertion(root,word);\n        }\n\n        lexicographlySort(root);\n    }\n\n    private static void insertion(TrieNodeTreeMap root, String str){\n        TrieNodeTreeMap curr = root;\n\n        for (char ch : str.toCharArray()){\n            if (!curr.children.containsKey(ch)){\n                curr.children.put(ch, new TrieNodeTreeMap());\n            }\n\n            curr  = curr.children.get(ch);\n        }\n\n        curr.key = str;\n    }\n\n    private static void lexicographlySort(TrieNodeTreeMap root){\n        TrieNodeTreeMap curr = root;\n        if (curr == null)\n            return;\n\n        for (Map.Entry&lt;Character, TrieNodeTreeMap&gt; entry : curr.children.entrySet()){\n            TrieNodeTreeMap tmp = entry.getValue();\n            if (tmp.key != null)\n                System.out.println(tmp.key);\n            lexicographlySort(entry.getValue());\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":357630,"reputation":10123,"user_id":697911,"accept_rate":53,"display_name":"user697911"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6220,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":3,"score":4,"last_activity_date":1634734096,"creation_date":1390931721,"question_id":21413138,"body_markdown":"![enter image description here][1]According to Wikipedia, regarding a trie:\r\n\r\n&gt; Lexicographic sorting of a set of keys can be accomplished with a simple trie-based algorithm as follows:\r\n&gt;\r\n&gt; * Insert all keys in a trie.\r\n&gt; * Output all keys in the trie by means of pre-order traversal, which results in output that is in lexicographically increasing order.\r\n\r\nHowever, this is my testing with my standard trie implementation:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    Trie trie = new Trie();\r\n    trie.add(&quot;doll&quot;);\r\n    trie.add(&quot;ball&quot;);\r\n    trie.add(&quot;bat&quot;);\r\n    trie.add(&quot;dork&quot;);\r\n    trie.add(&quot;dorm&quot;);\r\n    trie.add(&quot;send&quot;);\r\n    trie.add(&quot;sense&quot;);\r\n    trie.add(&quot;sent&quot;);\r\n\r\n Pre-order printout:\r\n    \r\n         public List&lt;String&gt; allWords(){\r\n\t\t\r\n\t\tList&lt;String&gt; words = new ArrayList&lt;String&gt;();\r\n\t\t\r\n\t\tif(root == null){\r\n\t\t\treturn words;\r\n\t\t}\r\n\r\n\t\tStringBuilder prefix = new StringBuilder();\r\n\t\tgetAllWords(root.children,prefix,words);\r\n\r\n\t\treturn words;\r\n\t}\r\n\t\r\n\t// depth first search\r\n\tprivate void getAllWords(List&lt;TrieNode&gt; children, StringBuilder prefix,  List&lt;String&gt; words){\r\n\t\t\r\n\t\tfor(int i= 0; i&lt;children.size(); i++){\r\n\t\t\tTrieNode child = children.get(i);\r\n\t\t\tif(!child.isWord_){\r\n\t\t\t\tprefix.append(child.data_);\r\n\t\t\t\tallWordsHelper(child.children, prefix, words);\r\n\t\t\t}else{\r\n\t\t\t\tprefix.append(child.data_);\r\n\t\t\t\twords.add(prefix.toString());\r\n\t\t\t}\r\n\t\t\tprefix.deleteCharAt(prefix.length()-1);\r\n\t\t}\r\n\t}\r\n\r\n\r\nAnd the output order is: `doll dork dorm ball bat send sense sent`\r\n\r\nWhat does the &#39;lexicographic sorting&#39; mean? It seems the output order is more related to the insertion order, not lexicographic order. Am I getting something wrong?\r\nTake this tree as one example, the pre-order printout would be &quot;to tea ted ten a inn&quot;. Where is the lexicographic order?\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/p68Cf.png","title":"Lexicographic sorting with a Trie","body":"<p><img src=\"https://i.stack.imgur.com/p68Cf.png\" alt=\"enter image description here\">According to Wikipedia, regarding a trie:</p>\n\n<blockquote>\n  <p>Lexicographic sorting of a set of keys can be accomplished with a simple trie-based algorithm as follows:</p>\n  \n  <ul>\n  <li>Insert all keys in a trie.</li>\n  <li>Output all keys in the trie by means of pre-order traversal, which results in output that is in lexicographically increasing order.</li>\n  </ul>\n</blockquote>\n\n<p>However, this is my testing with my standard trie implementation:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>Trie trie = new Trie();\ntrie.add(\"doll\");\ntrie.add(\"ball\");\ntrie.add(\"bat\");\ntrie.add(\"dork\");\ntrie.add(\"dorm\");\ntrie.add(\"send\");\ntrie.add(\"sense\");\ntrie.add(\"sent\");\n</code></pre>\n\n<p>Pre-order printout:</p>\n\n<pre><code>     public List&lt;String&gt; allWords(){\n\n    List&lt;String&gt; words = new ArrayList&lt;String&gt;();\n\n    if(root == null){\n        return words;\n    }\n\n    StringBuilder prefix = new StringBuilder();\n    getAllWords(root.children,prefix,words);\n\n    return words;\n}\n\n// depth first search\nprivate void getAllWords(List&lt;TrieNode&gt; children, StringBuilder prefix,  List&lt;String&gt; words){\n\n    for(int i= 0; i&lt;children.size(); i++){\n        TrieNode child = children.get(i);\n        if(!child.isWord_){\n            prefix.append(child.data_);\n            allWordsHelper(child.children, prefix, words);\n        }else{\n            prefix.append(child.data_);\n            words.add(prefix.toString());\n        }\n        prefix.deleteCharAt(prefix.length()-1);\n    }\n}\n</code></pre>\n\n<p>And the output order is: <code>doll dork dorm ball bat send sense sent</code></p>\n\n<p>What does the 'lexicographic sorting' mean? It seems the output order is more related to the insertion order, not lexicographic order. Am I getting something wrong?\nTake this tree as one example, the pre-order printout would be \"to tea ted ten a inn\". Where is the lexicographic order?</p>\n"},{"tags":["java","timer"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1634734318,"post_id":69646184,"comment_id":123104213,"body_markdown":"It&#39;s hard to tell what&#39;s going on since the code you&#39;ve shared doesn&#39;t actually contain much relevant code. BUT: you&#39;re very likely blocking the event dispatch thread (EDT) and thus repaints might not happen at the time you expect. You probably want a separate thread for your entire game logic and let th main thread (which is the EDT) repaint whenever it needs to.","body":"It&#39;s hard to tell what&#39;s going on since the code you&#39;ve shared doesn&#39;t actually contain much relevant code. BUT: you&#39;re very likely blocking the event dispatch thread (EDT) and thus repaints might not happen at the time you expect. You probably want a separate thread for your entire game logic and let th main thread (which is the EDT) repaint whenever it needs to."},{"owner":{"account_id":20349473,"reputation":139,"user_id":14926466,"display_name":"Virgil Nauleau"},"score":0,"creation_date":1634735015,"post_id":69646184,"comment_id":123104555,"body_markdown":"yea the problem is i can&#39;t put a &#39;little piece of code&#39; that do how im doing right now.\nHow would you do that ? I need to wait while doing this piece of code because i don&#39;t need to wait if im not in the if. (still begginer with java) Do i need to do the whole thing in another thread ? (i only put the timer last time) @Thomas","body":"yea the problem is i can&#39;t put a &#39;little piece of code&#39; that do how im doing right now. How would you do that ? I need to wait while doing this piece of code because i don&#39;t need to wait if im not in the if. (still begginer with java) Do i need to do the whole thing in another thread ? (i only put the timer last time) @Thomas"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":1,"creation_date":1634735343,"post_id":69646184,"comment_id":123104725,"body_markdown":"Yes, I would put the entire _game logic_ (or at least the actions triggered by button presses) into a separate thread and update the UI accordingly. However, &quot;still begginer with java&quot; is an indicator you might be in over your head atm and would need to step back a little.","body":"Yes, I would put the entire <i>game logic</i> (or at least the actions triggered by button presses) into a separate thread and update the UI accordingly. However, &quot;still begginer with java&quot; is an indicator you might be in over your head atm and would need to step back a little."},{"owner":{"account_id":20349473,"reputation":139,"user_id":14926466,"display_name":"Virgil Nauleau"},"score":0,"creation_date":1634735745,"post_id":69646184,"comment_id":123104909,"body_markdown":"How can i do that ? Any advice ? It&#39;s only my second years of dev im trying to do good practice all i can but google is not enough for everything i do &gt;&lt;","body":"How can i do that ? Any advice ? It&#39;s only my second years of dev im trying to do good practice all i can but google is not enough for everything i do &gt;&lt;"},{"owner":{"account_id":20349473,"reputation":139,"user_id":14926466,"display_name":"Virgil Nauleau"},"score":0,"creation_date":1634736628,"post_id":69646184,"comment_id":123105338,"body_markdown":"Thanks it worked ! I needed to do the whole thing in another thread, i didnt know it wouldn&#39;t repaint if the thread did not finish @Thomas","body":"Thanks it worked ! I needed to do the whole thing in another thread, i didnt know it wouldn&#39;t repaint if the thread did not finish @Thomas"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1634740200,"post_id":69646184,"comment_id":123107230,"body_markdown":"You should read up on the UI concepts in that case :)","body":"You should read up on the UI concepts in that case :)"}],"owner":{"account_id":20349473,"reputation":139,"user_id":14926466,"display_name":"Virgil Nauleau"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1634733735,"creation_date":1634733735,"question_id":69646184,"body_markdown":"I got trouble to wait with a timer but i don&#39;t want to wait the end of the timer to redraw everything, i want when player as the same card to wait 1s draw an hidden card for both then wait 1s but the program should already show it, then drawing the next card. I&#39;ve tryed timer to stop the program but it doesn&#39;t refresh the frame even with .pack() .revalidate() .repaint() . And if i do another thread it doesn&#39;t wait at all.\r\n\r\n    ArrayList&lt;Card&gt; bet = Controller.getInstance().playCard();\r\n        for(int i=0;i&lt; bet.size();i++){\r\n            if( (i==0 || i%2==0) ){\r\n                if(i==0||i == (bet.size()-2)){\r\n                    playerOne.setPlayedCard(bet.get(i));\r\n                }else {\r\n                    signe.setText(&quot;=&quot;);\r\n                    WaitHere();\r\n                    playerOne.setPlayedCard(new Carte(-1,backCarte));\r\n                    frame.pack();\r\n                    WaitHere();\r\n                }\r\n            }else{\r\n                if(i&lt;2||i == bet.size()-1){\r\n                    playerTwo.setPlayedCard(bet.get(i));\r\n                }else {\r\n                    signe.setText(&quot;=&quot;);\r\n                    playerTwo.setPlayedCard(new Carte(-1,backCarte));\r\n                }\r\n            }\r\n        }","title":"Java doesnt wait end of timer to repaint","body":"<p>I got trouble to wait with a timer but i don't want to wait the end of the timer to redraw everything, i want when player as the same card to wait 1s draw an hidden card for both then wait 1s but the program should already show it, then drawing the next card. I've tryed timer to stop the program but it doesn't refresh the frame even with .pack() .revalidate() .repaint() . And if i do another thread it doesn't wait at all.</p>\n<pre><code>ArrayList&lt;Card&gt; bet = Controller.getInstance().playCard();\n    for(int i=0;i&lt; bet.size();i++){\n        if( (i==0 || i%2==0) ){\n            if(i==0||i == (bet.size()-2)){\n                playerOne.setPlayedCard(bet.get(i));\n            }else {\n                signe.setText(&quot;=&quot;);\n                WaitHere();\n                playerOne.setPlayedCard(new Carte(-1,backCarte));\n                frame.pack();\n                WaitHere();\n            }\n        }else{\n            if(i&lt;2||i == bet.size()-1){\n                playerTwo.setPlayedCard(bet.get(i));\n            }else {\n                signe.setText(&quot;=&quot;);\n                playerTwo.setPlayedCard(new Carte(-1,backCarte));\n            }\n        }\n    }\n</code></pre>\n"},{"tags":["java","android","firebase","google-cloud-firestore"],"comments":[{"owner":{"account_id":426109,"reputation":302012,"user_id":807126,"display_name":"Doug Stevenson"},"score":1,"creation_date":1594848435,"post_id":62923988,"comment_id":111274855,"body_markdown":"Please edit the question to show the code that you&#39;ve attempted so far.  Please be clear where that code is not working the way you expect, or where you are stuck with that code.","body":"Please edit the question to show the code that you&#39;ve attempted so far.  Please be clear where that code is not working the way you expect, or where you are stuck with that code."},{"owner":{"account_id":18897647,"reputation":77,"user_id":13786408,"display_name":"Mohammad AL - Haque"},"score":0,"creation_date":1594850154,"post_id":62923988,"comment_id":111275438,"body_markdown":"@DougStevenson I have uploaded the code which I have attempted so far and the point where I am getting stuck. Please help me now","body":"@DougStevenson I have uploaded the code which I have attempted so far and the point where I am getting stuck. Please help me now"}],"answers":[{"tags":[],"owner":{"account_id":426109,"reputation":302012,"user_id":807126,"display_name":"Doug Stevenson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1594852283,"creation_date":1594852283,"answer_id":62924712,"question_id":62923988,"body_markdown":"Map type document fields show up in Java as type `Map&lt;String, Object&gt;`.  If you are accessing a map, you can simply cast it:\r\n\r\n    Map&lt;String, Object&gt; address = (Map&lt;String, Object&gt;) document.getData().get(&quot;Address&quot;);\r\n\r\nNow you can use that map to access its individual fields:\r\n\r\n    String address1 = (String) address.get(&quot;Address1&quot;);\r\n\r\nIdeally you should also check the type a nullity of each value before you cast it, or you might throw an exception.","title":"How to retrieve data from a map inside a particular document of firestore","body":"<p>Map type document fields show up in Java as type <code>Map&lt;String, Object&gt;</code>.  If you are accessing a map, you can simply cast it:</p>\n<pre><code>Map&lt;String, Object&gt; address = (Map&lt;String, Object&gt;) document.getData().get(&quot;Address&quot;);\n</code></pre>\n<p>Now you can use that map to access its individual fields:</p>\n<pre><code>String address1 = (String) address.get(&quot;Address1&quot;);\n</code></pre>\n<p>Ideally you should also check the type a nullity of each value before you cast it, or you might throw an exception.</p>\n"},{"tags":[],"owner":{"account_id":13749502,"reputation":575,"user_id":9922061,"display_name":"Kimanthi K."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634733630,"creation_date":1634733630,"answer_id":69646162,"question_id":62923988,"body_markdown":"This is how you would do it in Kotlin.\r\n\r\n    db.collection(&quot;app-version&quot;)\r\n            .get()\r\n            .addOnSuccessListener { result -&gt;\r\n                for (document in result) {\r\n\r\n                    val versionNum = document.get(&quot;versionNumber&quot;).toString()\r\n                    binding.txtAppVersion.text = versionNum\r\n\r\n\r\n                }\r\n            }\r\n            .addOnFailureListener { exception -&gt;\r\n\r\n                Toast.makeText(\r\n                    this, &quot;No such document&quot;, Toast.LENGTH_SHORT\r\n                )\r\n                    .show()\r\n            }","title":"How to retrieve data from a map inside a particular document of firestore","body":"<p>This is how you would do it in Kotlin.</p>\n<pre><code>db.collection(&quot;app-version&quot;)\n        .get()\n        .addOnSuccessListener { result -&gt;\n            for (document in result) {\n\n                val versionNum = document.get(&quot;versionNumber&quot;).toString()\n                binding.txtAppVersion.text = versionNum\n\n\n            }\n        }\n        .addOnFailureListener { exception -&gt;\n\n            Toast.makeText(\n                this, &quot;No such document&quot;, Toast.LENGTH_SHORT\n            )\n                .show()\n        }\n</code></pre>\n"}],"owner":{"account_id":18897647,"reputation":77,"user_id":13786408,"display_name":"Mohammad AL - Haque"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1056,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":62924712,"answer_count":2,"score":0,"last_activity_date":1634733630,"creation_date":1594848206,"question_id":62923988,"body_markdown":"The document is user Id and I want to retrieve &quot;Address1&quot;  of a particular user from the map &quot;Address&quot;. [![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/b0QK4.png\r\n\r\n  \r\n\r\n     private FirebaseFirestore mfirestore;\r\n        DocumentReference docRef;\r\n    \r\n        private FirebaseAuth mAuth;\r\n        private FirebaseUser user;\r\n\r\n   \r\n\r\n     @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_user_address);\r\n       mAuth = FirebaseAuth.getInstance();\r\n            user = mAuth.getCurrentUser();\r\n            uid = user.getUid();\r\n            docRef = mfirestore.collection(&quot;user&quot;).document(uid);\r\n    \r\n    \r\n        }\r\n\r\n       @Override\r\n        protected void onStart() {\r\n            super.onStart();\r\n            docRef.get().addOnCompleteListener(new OnCompleteListener&lt;DocumentSnapshot&gt;() {\r\n                @Override\r\n                public void onComplete(@NonNull Task&lt;DocumentSnapshot&gt; task) {\r\n                    if (task.isSuccessful()) {\r\n                        DocumentSnapshot document = task.getResult();\r\n                        if (document.exists()) {\r\n                            if (document.getData().get(&quot;Address&quot;)!=null){\r\n                                String Address=document.getData().get(&quot;Address&quot;).toString();\r\n                               \r\n                            }\r\n                           \r\n                        }\r\n    \r\n    \r\n    \r\n    \r\n    \r\n                    } else {\r\n                        Toast.makeText(UserAddress.this, task.getException().toString(), Toast.LENGTH_SHORT).show();\r\n                    }\r\n                }\r\n            });\r\n\r\nI have retrieve the whole &quot;Address&quot; but not able to find a way to get address1 of the user seperately.","title":"How to retrieve data from a map inside a particular document of firestore","body":"<p>The document is user Id and I want to retrieve &quot;Address1&quot;  of a particular user from the map &quot;Address&quot;. <a href=\"https://i.stack.imgur.com/b0QK4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/b0QK4.png\" alt=\"enter image description here\" /></a></p>\n<pre><code> private FirebaseFirestore mfirestore;\n    DocumentReference docRef;\n\n    private FirebaseAuth mAuth;\n    private FirebaseUser user;\n\n\n\n @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_user_address);\n   mAuth = FirebaseAuth.getInstance();\n        user = mAuth.getCurrentUser();\n        uid = user.getUid();\n        docRef = mfirestore.collection(&quot;user&quot;).document(uid);\n\n\n    }\n\n   @Override\n    protected void onStart() {\n        super.onStart();\n        docRef.get().addOnCompleteListener(new OnCompleteListener&lt;DocumentSnapshot&gt;() {\n            @Override\n            public void onComplete(@NonNull Task&lt;DocumentSnapshot&gt; task) {\n                if (task.isSuccessful()) {\n                    DocumentSnapshot document = task.getResult();\n                    if (document.exists()) {\n                        if (document.getData().get(&quot;Address&quot;)!=null){\n                            String Address=document.getData().get(&quot;Address&quot;).toString();\n                           \n                        }\n                       \n                    }\n\n\n\n\n\n                } else {\n                    Toast.makeText(UserAddress.this, task.getException().toString(), Toast.LENGTH_SHORT).show();\n                }\n            }\n        });\n</code></pre>\n<p>I have retrieve the whole &quot;Address&quot; but not able to find a way to get address1 of the user seperately.</p>\n"},{"tags":["java","multithreading","sockets"],"answers":[{"tags":[],"owner":{"account_id":248187,"reputation":22658,"user_id":523391,"display_name":"prunge"},"down_vote_count":1,"up_vote_count":18,"is_accepted":true,"score":17,"last_activity_date":1320121614,"creation_date":1320121614,"answer_id":7962459,"question_id":7962121,"body_markdown":"Close the socket, which will stop the receive() call from blocking.  If you first set a closed flag then in the catch (IOException) block you can safely ignore the exception if the flag is set.  (You could probably also use isClosed() method on DatagramSocket instead of a flag)","title":"how can i stop the block method DatagramSocket.receive() in a thread","body":"<p>Close the socket, which will stop the receive() call from blocking.  If you first set a closed flag then in the catch (IOException) block you can safely ignore the exception if the flag is set.  (You could probably also use isClosed() method on DatagramSocket instead of a flag)</p>\n"},{"tags":[],"owner":{"account_id":395272,"reputation":24521,"user_id":758133,"accept_rate":100,"display_name":"Martin James"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1320138567,"creation_date":1320138567,"answer_id":7964383,"question_id":7962121,"body_markdown":"With UDP, you could send the socket a datagram from another thread, so unblocking the read().  The datagran could, (depending on your protocol), contain a &#39;suicide&#39; command or you could use an additional &#39;shutdown&#39; boolean that the thread reads after read() returns.","title":"how can i stop the block method DatagramSocket.receive() in a thread","body":"<p>With UDP, you could send the socket a datagram from another thread, so unblocking the read().  The datagran could, (depending on your protocol), contain a 'suicide' command or you could use an additional 'shutdown' boolean that the thread reads after read() returns.</p>\n"},{"tags":[],"owner":{"account_id":1596227,"reputation":17124,"user_id":1478290,"accept_rate":83,"display_name":"Cheng"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1415157258,"creation_date":1415157258,"answer_id":26749102,"question_id":7962121,"body_markdown":"Socket.close() does the trick. Or you can use socket.setSoTimeout(1000); the setSoTimeout() method allows you to define a timeout period in milliseconds. For example:\r\n\r\n    //if the socket does not receive anything in 1 second, \r\n    //it will timeout and throw a SocketTimeoutException\r\n    //you can catch the exception if you need to log, or you can ignore it\r\n    socket.setSoTimeout(1000); \r\n    socket.receive();\r\n\r\nHere is the [javadoc for setSoTimeout()][1]; \r\n\r\nBy default, the timeout is 0 which is indefinite, by changing it to a positive number, it will only block for the amount you specified. (Make sure you set it before calling socket.receive())\r\n\r\nHere is an example answered on this site:\r\nhttps://stackoverflow.com/questions/10055913/set-timeout-for-socket-receive\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/net/Socket.html#setSoTimeout(int)","title":"how can i stop the block method DatagramSocket.receive() in a thread","body":"<p>Socket.close() does the trick. Or you can use socket.setSoTimeout(1000); the setSoTimeout() method allows you to define a timeout period in milliseconds. For example:</p>\n\n<pre><code>//if the socket does not receive anything in 1 second, \n//it will timeout and throw a SocketTimeoutException\n//you can catch the exception if you need to log, or you can ignore it\nsocket.setSoTimeout(1000); \nsocket.receive();\n</code></pre>\n\n<p>Here is the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/net/Socket.html#setSoTimeout(int)\" rel=\"nofollow noreferrer\">javadoc for setSoTimeout()</a>; </p>\n\n<p>By default, the timeout is 0 which is indefinite, by changing it to a positive number, it will only block for the amount you specified. (Make sure you set it before calling socket.receive())</p>\n\n<p>Here is an example answered on this site:\n<a href=\"https://stackoverflow.com/questions/10055913/set-timeout-for-socket-receive\">set timeout for socket receive</a></p>\n"},{"tags":[],"owner":{"account_id":2473440,"reputation":4508,"user_id":2154661,"display_name":"Ronald Coarite"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634733548,"creation_date":1634733548,"answer_id":69646137,"question_id":7962121,"body_markdown":"Change code to\r\n\r\n        while(udpSocket!=null &amp;&amp; !udpSocket.isClosed())\r\n        {\r\n            byte[] buffer = new byte[1024];\r\n            DatagramPacket dp = new DatagramPacket(buffer, buffer.length);\r\n            try {\r\n                udpSocket.receive(dp);//blocked here\r\n                byte[] data = dp.getData();\r\n                String message = new String(data, 0 , dp.getLength());\r\n                setTxtAreaShowMessage(message);\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n\r\nThen to end the socket perform \r\n\r\n        socket.close();\r\n        try {\r\n            socket.setSoTimeout(1);\r\n        } catch (SocketException e) {}\r\n        socket.disconnect();\r\n        socket = null;","title":"how can i stop the block method DatagramSocket.receive() in a thread","body":"<p>Change code to</p>\n<pre><code>    while(udpSocket!=null &amp;&amp; !udpSocket.isClosed())\n    {\n        byte[] buffer = new byte[1024];\n        DatagramPacket dp = new DatagramPacket(buffer, buffer.length);\n        try {\n            udpSocket.receive(dp);//blocked here\n            byte[] data = dp.getData();\n            String message = new String(data, 0 , dp.getLength());\n            setTxtAreaShowMessage(message);\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre>\n<p>Then to end the socket perform</p>\n<pre><code>    socket.close();\n    try {\n        socket.setSoTimeout(1);\n    } catch (SocketException e) {}\n    socket.disconnect();\n    socket = null;\n</code></pre>\n"}],"owner":{"account_id":387150,"reputation":517,"user_id":745329,"accept_rate":92,"display_name":"cloud"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18286,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":7962459,"answer_count":4,"score":13,"last_activity_date":1634733548,"creation_date":1320117668,"question_id":7962121,"body_markdown":"i create a `DatagramSocket` in the main thread,and then create a inner class thread to listen the port. when i close the `DatagramSocket` in the main thread, it always came across an error `socket closed` because in the inner class thread i called the `receive()` method,and it blocked the inner class thread. here is the code of the inner class:\r\n\r\n    class ReceiveText extends Thread\r\n    {\r\n\t\t@Override\r\n\t\tpublic void run()\r\n\t\t{\r\n\t\t\twhile(true)\r\n\t\t\t{\r\n\t\t\t\tbyte[] buffer = new byte[1024];\r\n\t\t\t\tDatagramPacket dp = new DatagramPacket(buffer, buffer.length);\r\n\t\t\t\ttry {\r\n\t\t\t\t\tudpSocket.receive(dp);//blocked here\r\n\t\t\t\t\tbyte[] data = dp.getData();\r\n\t\t\t\t\tString message = new String(data, 0 , dp.getLength());\r\n\t\t\t\t\tsetTxtAreaShowMessage(message);\r\n\t\t\t\t} catch (IOException e) {\r\n\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n    }\r\n\r\ni want to stop the inner class thread before close the DatagramSocket, but the `stop()` method is not recommended. how can i do that?","title":"how can i stop the block method DatagramSocket.receive() in a thread","body":"<p>i create a <code>DatagramSocket</code> in the main thread,and then create a inner class thread to listen the port. when i close the <code>DatagramSocket</code> in the main thread, it always came across an error <code>socket closed</code> because in the inner class thread i called the <code>receive()</code> method,and it blocked the inner class thread. here is the code of the inner class:</p>\n\n<pre><code>class ReceiveText extends Thread\n{\n    @Override\n    public void run()\n    {\n        while(true)\n        {\n            byte[] buffer = new byte[1024];\n            DatagramPacket dp = new DatagramPacket(buffer, buffer.length);\n            try {\n                udpSocket.receive(dp);//blocked here\n                byte[] data = dp.getData();\n                String message = new String(data, 0 , dp.getLength());\n                setTxtAreaShowMessage(message);\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>i want to stop the inner class thread before close the DatagramSocket, but the <code>stop()</code> method is not recommended. how can i do that?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":1,"creation_date":1634729527,"post_id":69645147,"comment_id":123102055,"body_markdown":"You are asking too much. Instead you should try some examples/exercices for implementing a list view. Internet is full of it. Further: the image in the subject is not in your post.","body":"You are asking too much. Instead you should try some examples/exercices for implementing a list view. Internet is full of it. Further: the image in the subject is not in your post."},{"owner":{"account_id":483434,"reputation":25487,"user_id":898478,"accept_rate":86,"display_name":"m0skit0"},"score":2,"creation_date":1634729673,"post_id":69645147,"comment_id":123102113,"body_markdown":"You&#39;re basically asking us to code this for you. Please show us what you have implemented so far and where exactly you are blocked.","body":"You&#39;re basically asking us to code this for you. Please show us what you have implemented so far and where exactly you are blocked."},{"owner":{"account_id":23032757,"reputation":1,"user_id":17151992,"display_name":"JackCohen"},"score":0,"creation_date":1634730493,"post_id":69645147,"comment_id":123102464,"body_markdown":"I understand that I am asking a lot ... I just don&#39;t understand how to implement this code at all.\nI looked for some ways on the Internet, but I didn&#39;t find anything ..","body":"I understand that I am asking a lot ... I just don&#39;t understand how to implement this code at all. I looked for some ways on the Internet, but I didn&#39;t find anything .."},{"owner":{"account_id":23032757,"reputation":1,"user_id":17151992,"display_name":"JackCohen"},"score":0,"creation_date":1634730719,"post_id":69645147,"comment_id":123102571,"body_markdown":"I continue to search .. I just decided to leave the question, maybe someone can help ...","body":"I continue to search .. I just decided to leave the question, maybe someone can help ..."}],"answers":[{"tags":[],"owner":{"account_id":11289841,"reputation":392,"user_id":8279321,"display_name":"Taha alam"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1634729763,"creation_date":1634729763,"answer_id":69645251,"question_id":69645147,"body_markdown":"you can use RecyclerView instead of ListView. You can place an ImageView in the Item made recyclerView which you can hide and display based on the click on the RecycelerView Item.","title":"How to add an image to the Textview","body":"<p>you can use RecyclerView instead of ListView. You can place an ImageView in the Item made recyclerView which you can hide and display based on the click on the RecycelerView Item.</p>\n"},{"tags":[],"owner":{"account_id":8214416,"reputation":72,"user_id":6181356,"display_name":"Shashi Patel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1634733514,"creation_date":1634733514,"answer_id":69646132,"question_id":69645147,"body_markdown":"I&#39;ve implemented an easy way for your task / issue\r\n- Assume you&#39;ve used RecyclerView\r\n- Do change in onBindViewHolder \r\n- I&#39;ve used ImageView for check icon\r\n\r\n        int selectedindex = 0;\r\n            @Override\r\n            public void onBindViewHolder(MyViewHolder holder, final int position) {\r\n                holder.YourView.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View view) {\r\n                        selectedindex = position;\r\n                        notifyDataSetChanged();\r\n                    }\r\n                });\r\n        \r\n                if(selectedindex == position)\r\n                    holder.ivCheck.setVisibility(Visibility.VISIBLE);\r\n                else holder.ivCheck.setVisibility(Visibility.GONE);\r\n            }  ","title":"How to add an image to the Textview","body":"<p>I've implemented an easy way for your task / issue</p>\n<ul>\n<li><p>Assume you've used RecyclerView</p>\n</li>\n<li><p>Do change in onBindViewHolder</p>\n</li>\n<li><p>I've used ImageView for check icon</p>\n<pre><code>  int selectedindex = 0;\n      @Override\n      public void onBindViewHolder(MyViewHolder holder, final int position) {\n          holder.YourView.setOnClickListener(new View.OnClickListener() {\n              @Override\n              public void onClick(View view) {\n                  selectedindex = position;\n                  notifyDataSetChanged();\n              }\n          });\n\n          if(selectedindex == position)\n              holder.ivCheck.setVisibility(Visibility.VISIBLE);\n          else holder.ivCheck.setVisibility(Visibility.GONE);\n      }  \n</code></pre>\n</li>\n</ul>\n"}],"owner":{"account_id":23032757,"reputation":1,"user_id":17151992,"display_name":"JackCohen"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1635148622,"accepted_answer_id":69646132,"answer_count":2,"score":-2,"last_activity_date":1634733514,"creation_date":1634729252,"question_id":69645147,"body_markdown":"I want to show an image in start or end of the `TextView` on when I click it. The `TextView` is in the `ListView`.\r\nFor and example I have attached an image below.\r\n[an example of what I want][1]\r\n\r\nI need that when I clicked on any text, a checkmark appeared next to the text.\r\nIn the example with the picture, I showed text 3 with a check mark.\r\n\r\nAfter all this, when the checkmark is in the right place (where it was clicked). I click the submit button and it sends me to another page with a checkmarked text. the example was text 3.\r\n\r\nPlease help me to do this. I will be glad for any help. Thanks!\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Ix5Lj.jpg","title":"How to add an image to the Textview","body":"<p>I want to show an image in start or end of the <code>TextView</code> on when I click it. The <code>TextView</code> is in the <code>ListView</code>.\nFor and example I have attached an image below.\n<a href=\"https://i.stack.imgur.com/Ix5Lj.jpg\" rel=\"nofollow noreferrer\">an example of what I want</a></p>\n<p>I need that when I clicked on any text, a checkmark appeared next to the text.\nIn the example with the picture, I showed text 3 with a check mark.</p>\n<p>After all this, when the checkmark is in the right place (where it was clicked). I click the submit button and it sends me to another page with a checkmarked text. the example was text 3.</p>\n<p>Please help me to do this. I will be glad for any help. Thanks!</p>\n"},{"tags":["java","string","character","lowercase"],"comments":[{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":1,"creation_date":1634633095,"post_id":69627418,"comment_id":123070724,"body_markdown":"You can use char literals instead of int literals, e.g. `&#39;A&#39;` instead of `65`, `&#39;a&#39;` instead of `97`. That would make it easier to see what &quot;sum&quot; you are actually doing.","body":"You can use char literals instead of int literals, e.g. <code>&#39;A&#39;</code> instead of <code>65</code>, <code>&#39;a&#39;</code> instead of <code>97</code>. That would make it easier to see what &quot;sum&quot; you are actually doing."},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":1,"creation_date":1634633285,"post_id":69627418,"comment_id":123070792,"body_markdown":"Also, define a variable `char c = str.charAt(i);`, then you don&#39;t need to keep repeating `str.charAt(i)`, which would make the code easier to read.","body":"Also, define a variable <code>char c = str.charAt(i);</code>, then you don&#39;t need to keep repeating <code>str.charAt(i)</code>, which would make the code easier to read."}],"answers":[{"tags":[],"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1634634239,"creation_date":1634632133,"answer_id":69627467,"question_id":69627418,"body_markdown":"`&#39;A&#39;` is 65. `&#39;a&#39;` is 97. Use 97 instead of 65 in your final loop. \r\n\r\nAlternatively use `&#39;a&#39;` directly instead of the number. This makes it more obvious what you&#39;re doing in that code.","title":"Produce lowercase character instead of uppercase in Java","body":"<p><code>'A'</code> is 65. <code>'a'</code> is 97. Use 97 instead of 65 in your final loop.</p>\n<p>Alternatively use <code>'a'</code> directly instead of the number. This makes it more obvious what you're doing in that code.</p>\n"},{"tags":[],"owner":{"account_id":12353708,"reputation":40,"user_id":9011065,"display_name":"Mitchel Abrahams"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1634633097,"creation_date":1634633097,"answer_id":69627699,"question_id":69627418,"body_markdown":"Check out this post with a accepted answer https://stackoverflow.com/questions/1951856/how-do-i-convert-strings-between-uppercase-and-lowercase-in-java\r\n\r\nYou could probably do something like this\r\n\r\n```\r\nimport java.util.Scanner;\r\n\r\npublic class Q2 {\r\n      \r\n        public static void main(String[] args) {\r\n            int a[]=new int[26];\r\n            Scanner sc =  new Scanner (System.in);\r\n            String str=sc.nextLine();\r\n            String lowerCaseInput = str.toLowerCase();\r\n            System.out.print(lowerCaseInput);\r\n        }\r\n}\r\n\r\n```","title":"Produce lowercase character instead of uppercase in Java","body":"<p>Check out this post with a accepted answer <a href=\"https://stackoverflow.com/questions/1951856/how-do-i-convert-strings-between-uppercase-and-lowercase-in-java\">How do I convert strings between uppercase and lowercase in Java?</a></p>\n<p>You could probably do something like this</p>\n<pre><code>import java.util.Scanner;\n\npublic class Q2 {\n      \n        public static void main(String[] args) {\n            int a[]=new int[26];\n            Scanner sc =  new Scanner (System.in);\n            String str=sc.nextLine();\n            String lowerCaseInput = str.toLowerCase();\n            System.out.print(lowerCaseInput);\n        }\n}\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18243171,"reputation":19300,"user_id":13279831,"display_name":"Nowhere Man"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634733368,"creation_date":1634733368,"answer_id":69646093,"question_id":69627418,"body_markdown":"It may be more straightforward to convert the entire string to lower case to avoid checking for upper case letters.\r\n\r\nAlso, as suggested earlier using character literals as `a` instead of 97 would make the code more readable.\r\n\r\n```java\r\nScanner sc = new Scanner(System.in);\r\nint a[] = new int[26];\r\n\r\nString str = sc.nextLine().toLowerCase();\r\n\r\nfor (char c : str.toCharArray()) {\r\n    if (c &gt;= &#39;a&#39; &amp;&amp; c &lt;= &#39;z&#39;) {\r\n        a[c - &#39;a&#39;]++;\r\n    }\r\n}\r\nfor (char c = &#39;a&#39;; c &lt;= &#39;z&#39;; c++) {\r\n    int i = c - &#39;a&#39;;\r\n    if (a[i] &gt; 0) {\r\n        System.out.print(&quot; &quot;+ c + &quot;(&quot; + a[i] + &quot;)&quot;);\r\n    }\r\n}\r\n```","title":"Produce lowercase character instead of uppercase in Java","body":"<p>It may be more straightforward to convert the entire string to lower case to avoid checking for upper case letters.</p>\n<p>Also, as suggested earlier using character literals as <code>a</code> instead of 97 would make the code more readable.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Scanner sc = new Scanner(System.in);\nint a[] = new int[26];\n\nString str = sc.nextLine().toLowerCase();\n\nfor (char c : str.toCharArray()) {\n    if (c &gt;= 'a' &amp;&amp; c &lt;= 'z') {\n        a[c - 'a']++;\n    }\n}\nfor (char c = 'a'; c &lt;= 'z'; c++) {\n    int i = c - 'a';\n    if (a[i] &gt; 0) {\n        System.out.print(&quot; &quot;+ c + &quot;(&quot; + a[i] + &quot;)&quot;);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":23077081,"reputation":1,"user_id":17189891,"display_name":"iman farhana"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":140,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1634733368,"creation_date":1634631896,"question_id":69627418,"body_markdown":"The output is fine but the output is in Uppercase letter, I want the output to be lowercase character, what should I do?\r\n\r\n```\r\nimport java.util.Scanner;\r\n\r\npublic class Q2 {\r\n\t  \r\n\t    public static void main(String[] args) {\r\n\t    \tint a[]=new int[26];\r\n\t    \tScanner sc =  new Scanner (System.in);\r\n\t    \tString str=sc.nextLine();\r\n\t    \tfor(int i = 0; i&lt;str.length();i++) {\r\n\t    \t\tif(str.charAt(i)&gt;=65 &amp;&amp; str.charAt(i)&lt;=90) {\r\n\t    \t\t\ta[str.charAt(i)-65]++;\r\n\t    \t\t}\r\n\t    \t\telse if(str.charAt(i)&gt;=97 &amp;&amp; str.charAt(i)&lt;=122) {\r\n\t    \t\t\ta[str.charAt(i)-97]++;\r\n\t    \t\t}\r\n\t    \t}\r\n\t    \tfor(int i=0;i&lt;26;i++) {\r\n\t    \t\tif(a[i]&gt;0) {\r\n\t    \t\t\tSystem.out.print(&quot; &quot;+(char )(i+65)+ &quot;(&quot; + a[i]+&quot;)&quot;);\r\n\t    \t\t}\r\n\t    \t\t\r\n\t    \t}\r\n\t    \t        \r\n\t    }\t\t\r\n\r\n}\r\n```","title":"Produce lowercase character instead of uppercase in Java","body":"<p>The output is fine but the output is in Uppercase letter, I want the output to be lowercase character, what should I do?</p>\n<pre><code>import java.util.Scanner;\n\npublic class Q2 {\n      \n        public static void main(String[] args) {\n            int a[]=new int[26];\n            Scanner sc =  new Scanner (System.in);\n            String str=sc.nextLine();\n            for(int i = 0; i&lt;str.length();i++) {\n                if(str.charAt(i)&gt;=65 &amp;&amp; str.charAt(i)&lt;=90) {\n                    a[str.charAt(i)-65]++;\n                }\n                else if(str.charAt(i)&gt;=97 &amp;&amp; str.charAt(i)&lt;=122) {\n                    a[str.charAt(i)-97]++;\n                }\n            }\n            for(int i=0;i&lt;26;i++) {\n                if(a[i]&gt;0) {\n                    System.out.print(&quot; &quot;+(char )(i+65)+ &quot;(&quot; + a[i]+&quot;)&quot;);\n                }\n                \n            }\n                    \n        }       \n\n}\n</code></pre>\n"},{"tags":["java","spring-boot","spring-test","spring-restcontroller","springmockito"],"comments":[{"owner":{"account_id":9182993,"reputation":1925,"user_id":6826223,"accept_rate":80,"display_name":"rdj7"},"score":1,"creation_date":1519903659,"post_id":49046667,"comment_id":85101535,"body_markdown":"try writing `Mockito.when(myDAO.findAll()).thenReturn(myItems);` inside @Test not in setup. Also make sure `myItems` are accessible inside @Test","body":"try writing <code>Mockito.when(myDAO.findAll()).thenReturn(myItems);</code> inside @Test not in setup. Also make sure <code>myItems</code> are accessible inside @Test"}],"answers":[{"tags":[],"owner":{"account_id":6951350,"reputation":1730,"user_id":5333879,"display_name":"borino"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1520057396,"creation_date":1520057396,"answer_id":49081258,"question_id":49046667,"body_markdown":"For @Mock annotation you need additional initialization:\r\n\r\n        @Before\r\n        public void initMocks() {\r\n            MockitoAnnotations.initMocks(this);\r\n        }\r\nOr change runner to the `@RunWith(MockitoJUnitRunner...` , but not sure about spring context initialization in this case.","title":"Impossible to write integration test controller with DAO mock?","body":"<p>For @Mock annotation you need additional initialization:</p>\n\n<pre><code>    @Before\n    public void initMocks() {\n        MockitoAnnotations.initMocks(this);\n    }\n</code></pre>\n\n<p>Or change runner to the <code>@RunWith(MockitoJUnitRunner...</code> , but not sure about spring context initialization in this case.</p>\n"},{"tags":[],"owner":{"account_id":12807353,"reputation":221,"user_id":9266617,"accept_rate":40,"display_name":"Danton"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1520412778,"creation_date":1520412778,"answer_id":49147641,"question_id":49046667,"body_markdown":" I finally did like that (but not satisfied because it does not mock HSQLDB DataBase, it creates a test one), whereas I wanted to mock DAO :\r\n\r\n    @RunWith(SpringRunner.class)\r\n    @SpringBootTest(classes = {MySpringApplication.class})\r\n    @WebAppConfiguration\r\n    public myTestClass {\r\n        MockMvc mockMvc;\r\n\r\n        @Autowired\r\n        ItemDAO itemDAO;\r\n\r\n        @Autowired\r\n        WebApplicationContext webApplicationContext;\r\n\r\n        @Before\r\n        public void setUp() throws Exception {\r\n            this.mockMvc = webAppContextSetup(webApplicationContext).build();\r\n        }\r\n\r\n        @After\r\n        public void tearDown() throws Exception {\r\n            itemDAO.deleteAll();\r\n        }\r\n\r\n        @Test\r\n        public void testMethod() {\r\n            // DB init by saving objects: create a item and save it via DAO, use real test DB\r\n\r\n            // Only mocking about rest call:\r\n            String res = mockMvc.perform(get(&quot;/items&quot;)).andExpect(status().isOk()).andReturn().getResponse().getContentAsString();\r\n        }\r\n\r\n}","title":"Impossible to write integration test controller with DAO mock?","body":"<p>I finally did like that (but not satisfied because it does not mock HSQLDB DataBase, it creates a test one), whereas I wanted to mock DAO :</p>\n\n<pre><code>@RunWith(SpringRunner.class)\n@SpringBootTest(classes = {MySpringApplication.class})\n@WebAppConfiguration\npublic myTestClass {\n    MockMvc mockMvc;\n\n    @Autowired\n    ItemDAO itemDAO;\n\n    @Autowired\n    WebApplicationContext webApplicationContext;\n\n    @Before\n    public void setUp() throws Exception {\n        this.mockMvc = webAppContextSetup(webApplicationContext).build();\n    }\n\n    @After\n    public void tearDown() throws Exception {\n        itemDAO.deleteAll();\n    }\n\n    @Test\n    public void testMethod() {\n        // DB init by saving objects: create a item and save it via DAO, use real test DB\n\n        // Only mocking about rest call:\n        String res = mockMvc.perform(get(\"/items\")).andExpect(status().isOk()).andReturn().getResponse().getContentAsString();\n    }\n</code></pre>\n\n<p>}</p>\n"}],"owner":{"account_id":12807353,"reputation":221,"user_id":9266617,"accept_rate":40,"display_name":"Danton"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1393,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":49147641,"answer_count":2,"score":1,"last_activity_date":1634732874,"creation_date":1519897022,"question_id":49046667,"body_markdown":"I become crazy, I tried all possible combination of various test Runners and possibles annotation for testing, the nearest solution of my need is following :\r\n  \r\n    @RunWith(SpringRunner.class)\r\n    @SpringBootTest(classes = {MyApplication.class})\r\n    @WebAppConfiguration\r\n    public class MyControllerTest {\r\n    \r\n        MockMvc mockMvc;\r\n    \r\n        // My DAO is an interface extending JpaRepository\r\n        @Mock\r\n        MyDAO myDAO;\r\n    \r\n        @Autowired\r\n        WebApplicationContext webApplicationContext;\r\n    \r\n        @Before\r\n        public void setUp() throws Exception {\r\n            List&lt;MyItem&gt; myItems = new ArrayList(){{\r\n                // Items init ...\r\n            }}\r\n            Mockito.when(myDAO.findAll()).thenReturn(myItems);\r\n            /* Other solution I tried with different annotations: \r\n            * given(myDAO.findAll()).willReturn(myItems);\r\n            * this.mockMvc = MockMvcBuilders.standaloneSetup(myController).build();\r\n            */\r\n            this.mockMvc = webAppContextSetup(webApplicationContext).build();\r\n    \r\n        }\r\n    \r\n        @After\r\n        public void tearDown() throws Exception {\r\n    //        Mockito.reset(myDAO);\r\n        }\r\n    \r\n        @Test\r\n        public void getItems() {\r\n            String res = mockMvc.perform(get(&quot;/items&quot;))/*.andExpect(status().isOk())*/.andReturn().getResponse().getContentAsString();\r\n            assertThat(res, is(&quot;TODO : string representation of myItems ...&quot;));\r\n            assertNull(res); // For checking change in test functionning\r\n        }\r\n    }\r\n\r\nI well enter in debug mode in my controller method, in service method but when I see DAO type, it is not a Mock and findAll() always return empty ArrayList(), even when I do : \r\n\r\n    Mockito.when(myDAO.findAll()).thenReturn(myItems);\r\n\r\nI do not have exception raised, my DAO is not mocked and I don&#39;t know how to do despite all tuto I found.\r\nThe nearest tuto of my need I found was this [Unit Test Controllers with Spring MVC Test][1] but not enought because he wants mock service injected into controller in order to test controller, I wand to mock DAO injected into real Service injected into Controller (I want to test Controller + Service).\r\n\r\nIt seems to me that I already did that by using an annotation on the test class which specified what class had to be instanciate by spring application in test mode and what class had to be mocked but I don&#39;t remember &#39;-_-.\r\n\r\nNeed your help, its making me crasy !\r\n\r\nThank you very much !!!\r\n\r\n\r\n  [1]: https://www.luckyryan.com/2013/08/24/unit-test-controllers-spring-mvc-test/","title":"Impossible to write integration test controller with DAO mock?","body":"<p>I become crazy, I tried all possible combination of various test Runners and possibles annotation for testing, the nearest solution of my need is following :</p>\n\n<pre><code>@RunWith(SpringRunner.class)\n@SpringBootTest(classes = {MyApplication.class})\n@WebAppConfiguration\npublic class MyControllerTest {\n\n    MockMvc mockMvc;\n\n    // My DAO is an interface extending JpaRepository\n    @Mock\n    MyDAO myDAO;\n\n    @Autowired\n    WebApplicationContext webApplicationContext;\n\n    @Before\n    public void setUp() throws Exception {\n        List&lt;MyItem&gt; myItems = new ArrayList(){{\n            // Items init ...\n        }}\n        Mockito.when(myDAO.findAll()).thenReturn(myItems);\n        /* Other solution I tried with different annotations: \n        * given(myDAO.findAll()).willReturn(myItems);\n        * this.mockMvc = MockMvcBuilders.standaloneSetup(myController).build();\n        */\n        this.mockMvc = webAppContextSetup(webApplicationContext).build();\n\n    }\n\n    @After\n    public void tearDown() throws Exception {\n//        Mockito.reset(myDAO);\n    }\n\n    @Test\n    public void getItems() {\n        String res = mockMvc.perform(get(\"/items\"))/*.andExpect(status().isOk())*/.andReturn().getResponse().getContentAsString();\n        assertThat(res, is(\"TODO : string representation of myItems ...\"));\n        assertNull(res); // For checking change in test functionning\n    }\n}\n</code></pre>\n\n<p>I well enter in debug mode in my controller method, in service method but when I see DAO type, it is not a Mock and findAll() always return empty ArrayList(), even when I do : </p>\n\n<pre><code>Mockito.when(myDAO.findAll()).thenReturn(myItems);\n</code></pre>\n\n<p>I do not have exception raised, my DAO is not mocked and I don't know how to do despite all tuto I found.\nThe nearest tuto of my need I found was this <a href=\"https://www.luckyryan.com/2013/08/24/unit-test-controllers-spring-mvc-test/\" rel=\"nofollow noreferrer\">Unit Test Controllers with Spring MVC Test</a> but not enought because he wants mock service injected into controller in order to test controller, I wand to mock DAO injected into real Service injected into Controller (I want to test Controller + Service).</p>\n\n<p>It seems to me that I already did that by using an annotation on the test class which specified what class had to be instanciate by spring application in test mode and what class had to be mocked but I don't remember '-_-.</p>\n\n<p>Need your help, its making me crasy !</p>\n\n<p>Thank you very much !!!</p>\n"},{"tags":["java","cryptography","itext","digital-signature","java-security"],"comments":[{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1634723703,"post_id":69642806,"comment_id":123099761,"body_markdown":"Please first of all share the PDF in question for analysis. Adobe Reader accepts some really broken signatures which a decent validator will reject...","body":"Please first of all share the PDF in question for analysis. Adobe Reader accepts some really broken signatures which a decent validator will reject..."},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":2,"creation_date":1634724460,"post_id":69642806,"comment_id":123100088,"body_markdown":"Ah, but in your case your approach is simply wrong. You don&#39;t check the signature integrated in the PDF, you take the signature of some X.509 certificate and check whether that signature is a valid detached signature of the PDF. Which doesn&#39;t make sense. You should instead look for some PDF library that supports validation of integrated signatures. Like iText which you have tagged your question with but not used at all therein.","body":"Ah, but in your case your approach is simply wrong. You don&#39;t check the signature integrated in the PDF, you take the signature of some X.509 certificate and check whether that signature is a valid detached signature of the PDF. Which doesn&#39;t make sense. You should instead look for some PDF library that supports validation of integrated signatures. Like iText which you have tagged your question with but not used at all therein."},{"owner":{"account_id":11324921,"reputation":69,"user_id":8304177,"display_name":"Shivam Kumar"},"score":0,"creation_date":1634733069,"post_id":69642806,"comment_id":123103626,"body_markdown":"@mkl I tried with itext library also. It is verifying the signature But It is not reflecting anything on the pdf. After opening the pdf I am still getting &quot;Signature not verified&quot;.","body":"@mkl I tried with itext library also. It is verifying the signature But It is not reflecting anything on the pdf. After opening the pdf I am still getting &quot;Signature not verified&quot;."},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1634740167,"post_id":69642806,"comment_id":123107203,"body_markdown":"*&#39;But It is not reflecting anything on the pdf.&#39;* - What do you mean by that? *&#39;After opening the pdf I am still getting &quot;Signature not verified&quot;.&#39;* - Opening in what program? Getting as what output of what action? If it&#39;s in a program with a GUI, screenshots might clarify. Also please share the PDF in question.","body":"<i>&#39;But It is not reflecting anything on the pdf.&#39;</i> - What do you mean by that? <i>&#39;After opening the pdf I am still getting &quot;Signature not verified&quot;.&#39;</i> - Opening in what program? Getting as what output of what action? If it&#39;s in a program with a GUI, screenshots might clarify. Also please share the PDF in question."}],"owner":{"account_id":11324921,"reputation":69,"user_id":8304177,"display_name":"Shivam Kumar"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":137,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1634732702,"creation_date":1634719041,"question_id":69642806,"body_markdown":"I have a digitally signed pdf file and I am trying to verify the signature in that. But Signature is not getting verified. Below is the code\r\n\r\n  \r\n\r\n    public static void main(String[] args) throws Exception {\r\n    \r\n            HashMap&lt;String, Object&gt; keyPair = new HashMap&lt;&gt;();\r\n            String password = &quot;123&quot;;\r\n    \r\n            KeyStore keyStore = KeyStore.getInstance(&quot;pkcs12&quot;); //, &quot;BC&quot;);\r\n            keyStore.load(new FileInputStream(&quot;/Users/shivam/Documents/Projects/label-processor/src/main/resources/DigitalSignatureFile.pfx&quot;), password.toCharArray());\r\n    \r\n            Enumeration&lt;String&gt; keyStoreAliasEnum = keyStore.aliases();\r\n            String alias = null;\r\n            PublicKey publicKey = null;\r\n            PrivateKey privateKey = null;\r\n            byte[] signature = null;\r\n            while ( keyStoreAliasEnum.hasMoreElements() ) {\r\n                alias = keyStoreAliasEnum.nextElement();\r\n                if (password != null) {\r\n                    privateKey = (PrivateKey) keyStore.getKey(alias, password.toCharArray());\r\n    \r\n                    X509Certificate x509Certificate = (X509Certificate) keyStore.getCertificate(alias);\r\n                    publicKey = x509Certificate.getPublicKey();\r\n                    signature = x509Certificate.getSignature();\r\n                    keyPair.put(&quot;Alias&quot;, alias);\r\n                    keyPair.put(&quot;PublicKey&quot;, publicKey);\r\n                    keyPair.put(&quot;PrivateKey&quot;, privateKey);\r\n                    keyPair.put(&quot;X509Certificate&quot;, x509Certificate);\r\n                }\r\n            }\r\n            verify(publicKey, signature);\r\n        }\r\n    \r\n        public static void verify(PublicKey publicKey, byte[] sigBytes) throws Exception {\r\n    \r\n            Signature sig = Signature.getInstance(&quot;SHA256withRSA&quot;);\r\n            sig.initVerify(publicKey);\r\n            FileInputStream datafis = new FileInputStream(&quot;/Users/shivam/Desktop/DigitallySignedFile.pdf&quot;);\r\n            byte[] data = IOUtils.toByteArray(datafis);\r\n            sig.update(data);\r\n            boolean verifies = sig.verify(sigBytes);\r\n            System.out.println(&quot;signature verifies: &quot; + verifies);\r\n            FileUtils.writeByteArrayToFile(\r\n                    new File(&quot;/Users/shivam/Documents/Projects/label-processor/src/main/resources/VerifiedFile.pdf&quot;),\r\n                    data\r\n            );\r\n        }\r\n\r\nAbove program is giving &quot;**Signature verifies: false**&quot;. And In **VerifiedFile.pdf** I am still seeing signature not verified. But when I am trying to verify in **Adobe Reader** it is verifying correctly.\r\n\r\nI tried verifying with the help of **itext** library also. It is verifying signature But In pdf it still shows **signature not verified**.\r\n\r\n    public static void main(String[] args) throws Exception {\r\n\r\n        byte[] pdfBytes = Files.readAllBytes(\r\n                Paths.get(&quot;/Users/shivam/Desktop/DigitallySignedFile.pdf&quot;)\r\n        );\r\n        PdfReader pdfReader = new PdfReader(pdfBytes);\r\n        AcroFields acroFields = pdfReader.getAcroFields();\r\n        List&lt;String&gt; signatures = acroFields.getSignatureNames();\r\n        boolean valid = false;\r\n        if (!signatures.isEmpty()) {\r\n            for (String signature : signatures) {\r\n                if (acroFields.signatureCoversWholeDocument(signature)) {\r\n                    PdfPKCS7 pkcs7 = acroFields.verifySignature(signature);\r\n                    valid = pkcs7.verify();\r\n                    String reason = pkcs7.getReason();\r\n                    Calendar signedAt = pkcs7.getSignDate();\r\n                    X509Certificate x509Certificate = pkcs7.getSigningCertificate();\r\n                    Principal issuerDN = x509Certificate.getIssuerDN();\r\n                    Principal subjectDN = x509Certificate.getSubjectDN();\r\n                    logger.info(&quot;valid = {}, date = {}, reason = &#39;{}&#39;, issuer = &#39;{}&#39;, subject = &#39;{}&#39;&quot;,\r\n                            valid, signedAt.getTime(), reason, issuerDN, subjectDN);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        FileUtils.writeByteArrayToFile(\r\n                new File(&quot;/Users/shivam/Documents/Projects/label-processor/src/main/resources/VerifiedFile.pdf&quot;),\r\n                pdfBytes\r\n        );\r\n    }\r\n\r\nI appreciate any help.","title":"Not able to verify digital signature in Pdf file","body":"<p>I have a digitally signed pdf file and I am trying to verify the signature in that. But Signature is not getting verified. Below is the code</p>\n<pre><code>public static void main(String[] args) throws Exception {\n\n        HashMap&lt;String, Object&gt; keyPair = new HashMap&lt;&gt;();\n        String password = &quot;123&quot;;\n\n        KeyStore keyStore = KeyStore.getInstance(&quot;pkcs12&quot;); //, &quot;BC&quot;);\n        keyStore.load(new FileInputStream(&quot;/Users/shivam/Documents/Projects/label-processor/src/main/resources/DigitalSignatureFile.pfx&quot;), password.toCharArray());\n\n        Enumeration&lt;String&gt; keyStoreAliasEnum = keyStore.aliases();\n        String alias = null;\n        PublicKey publicKey = null;\n        PrivateKey privateKey = null;\n        byte[] signature = null;\n        while ( keyStoreAliasEnum.hasMoreElements() ) {\n            alias = keyStoreAliasEnum.nextElement();\n            if (password != null) {\n                privateKey = (PrivateKey) keyStore.getKey(alias, password.toCharArray());\n\n                X509Certificate x509Certificate = (X509Certificate) keyStore.getCertificate(alias);\n                publicKey = x509Certificate.getPublicKey();\n                signature = x509Certificate.getSignature();\n                keyPair.put(&quot;Alias&quot;, alias);\n                keyPair.put(&quot;PublicKey&quot;, publicKey);\n                keyPair.put(&quot;PrivateKey&quot;, privateKey);\n                keyPair.put(&quot;X509Certificate&quot;, x509Certificate);\n            }\n        }\n        verify(publicKey, signature);\n    }\n\n    public static void verify(PublicKey publicKey, byte[] sigBytes) throws Exception {\n\n        Signature sig = Signature.getInstance(&quot;SHA256withRSA&quot;);\n        sig.initVerify(publicKey);\n        FileInputStream datafis = new FileInputStream(&quot;/Users/shivam/Desktop/DigitallySignedFile.pdf&quot;);\n        byte[] data = IOUtils.toByteArray(datafis);\n        sig.update(data);\n        boolean verifies = sig.verify(sigBytes);\n        System.out.println(&quot;signature verifies: &quot; + verifies);\n        FileUtils.writeByteArrayToFile(\n                new File(&quot;/Users/shivam/Documents/Projects/label-processor/src/main/resources/VerifiedFile.pdf&quot;),\n                data\n        );\n    }\n</code></pre>\n<p>Above program is giving &quot;<strong>Signature verifies: false</strong>&quot;. And In <strong>VerifiedFile.pdf</strong> I am still seeing signature not verified. But when I am trying to verify in <strong>Adobe Reader</strong> it is verifying correctly.</p>\n<p>I tried verifying with the help of <strong>itext</strong> library also. It is verifying signature But In pdf it still shows <strong>signature not verified</strong>.</p>\n<pre><code>public static void main(String[] args) throws Exception {\n\n    byte[] pdfBytes = Files.readAllBytes(\n            Paths.get(&quot;/Users/shivam/Desktop/DigitallySignedFile.pdf&quot;)\n    );\n    PdfReader pdfReader = new PdfReader(pdfBytes);\n    AcroFields acroFields = pdfReader.getAcroFields();\n    List&lt;String&gt; signatures = acroFields.getSignatureNames();\n    boolean valid = false;\n    if (!signatures.isEmpty()) {\n        for (String signature : signatures) {\n            if (acroFields.signatureCoversWholeDocument(signature)) {\n                PdfPKCS7 pkcs7 = acroFields.verifySignature(signature);\n                valid = pkcs7.verify();\n                String reason = pkcs7.getReason();\n                Calendar signedAt = pkcs7.getSignDate();\n                X509Certificate x509Certificate = pkcs7.getSigningCertificate();\n                Principal issuerDN = x509Certificate.getIssuerDN();\n                Principal subjectDN = x509Certificate.getSubjectDN();\n                logger.info(&quot;valid = {}, date = {}, reason = '{}', issuer = '{}', subject = '{}'&quot;,\n                        valid, signedAt.getTime(), reason, issuerDN, subjectDN);\n                break;\n            }\n        }\n    }\n    FileUtils.writeByteArrayToFile(\n            new File(&quot;/Users/shivam/Documents/Projects/label-processor/src/main/resources/VerifiedFile.pdf&quot;),\n            pdfBytes\n    );\n}\n</code></pre>\n<p>I appreciate any help.</p>\n"},{"tags":["java","android","java-8","dependencies","java-11"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1634721688,"post_id":69643374,"comment_id":123098879,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."},{"owner":{"account_id":1546239,"reputation":3192,"user_id":1439733,"display_name":"Stefan Zobel"},"score":2,"creation_date":1634748170,"post_id":69643374,"comment_id":123110733,"body_markdown":"There is a difference between Java language features and Java APIs available. For example, your third link says that you can use Java 11 language features. That doesn&#39;t mean that Java 11 APIs are available (in fact, these are currently in the making and will probably be available in Android 13). Your best bet is to use Java 8 and you will mostly be compatible with API level 24. You can go below that and still compile with Java 8 but then you have to check if the Java 8 API you use is actually available. For example, `CompletableFuture` is a Java 8 API that wasn&#39;t available until API level 24.","body":"There is a difference between Java language features and Java APIs available. For example, your third link says that you can use Java 11 language features. That doesn&#39;t mean that Java 11 APIs are available (in fact, these are currently in the making and will probably be available in Android 13). Your best bet is to use Java 8 and you will mostly be compatible with API level 24. You can go below that and still compile with Java 8 but then you have to check if the Java 8 API you use is actually available. For example, <code>CompletableFuture</code> is a Java 8 API that wasn&#39;t available until API level 24."},{"owner":{"account_id":6586021,"reputation":564,"user_id":5088764,"display_name":"sbernard"},"score":0,"creation_date":1634801595,"post_id":69643374,"comment_id":123124678,"body_markdown":"@StefanZobel thx for this useful answer. I understand that &quot;compiling with Java 8&quot; + &quot;limiting API usage with animal-sniffer-maven-plugin&quot; should be good enough.","body":"@StefanZobel thx for this useful answer. I understand that &quot;compiling with Java 8&quot; + &quot;limiting API usage with animal-sniffer-maven-plugin&quot; should be good enough."}],"owner":{"account_id":6586021,"reputation":564,"user_id":5088764,"display_name":"sbernard"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":290,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1634732396,"creation_date":1634721483,"question_id":69643374,"body_markdown":"I&#39;m maintainer of an Open Source Java library.\r\n\r\nI have no experience at all in Android development but **I would like that my library could be used in an Android app as dependency.** (at least I would avoid the main blocker issue)\r\n\r\nIt&#39;s not crystal clear to me but I understand there is several kind of Java Compatibility with Android : \r\n 1. API level\r\n 2. byte code compatibility\r\n 3. source code compatibility. \r\n\r\n(Please to not hesitate to better explain this ☝ or correct me if I&#39;m wrong)\r\n\r\nI guess in my case I&#39;m mainly concerned by the 2 first points.\r\n\r\nCurrently : \r\n - we check API level with [animal-sniffer-maven-plugin](https://stackoverflow.com/a/49153640/5088764). (api-level-19)\r\n - our releases are compiled against java7 with a openjdk7.\r\n\r\n\r\nBut I would like to upgrade to a more recent version of Java. (probably java8, but maybe java11)\r\n\r\n**Can I use those jdk versions (openjdk8, openjdk11) to compile a library which could be used in android project ?** \r\n\r\nMy current research about this, but still not clear to me : \r\n - https://developer.android.com/studio/write/java8-support\r\n - https://jakewharton.com/androids-java-9-10-11-and-12-support/\r\n - https://developer.android.com/studio/releases/gradle-plugin?utm_source=android-studio-2020-3-1&amp;utm_medium=studio-assistant-stable#java-11","title":"Which Java version should I use to create a library usable with Android","body":"<p>I'm maintainer of an Open Source Java library.</p>\n<p>I have no experience at all in Android development but <strong>I would like that my library could be used in an Android app as dependency.</strong> (at least I would avoid the main blocker issue)</p>\n<p>It's not crystal clear to me but I understand there is several kind of Java Compatibility with Android :</p>\n<ol>\n<li>API level</li>\n<li>byte code compatibility</li>\n<li>source code compatibility.</li>\n</ol>\n<p>(Please to not hesitate to better explain this ☝ or correct me if I'm wrong)</p>\n<p>I guess in my case I'm mainly concerned by the 2 first points.</p>\n<p>Currently :</p>\n<ul>\n<li>we check API level with <a href=\"https://stackoverflow.com/a/49153640/5088764\">animal-sniffer-maven-plugin</a>. (api-level-19)</li>\n<li>our releases are compiled against java7 with a openjdk7.</li>\n</ul>\n<p>But I would like to upgrade to a more recent version of Java. (probably java8, but maybe java11)</p>\n<p><strong>Can I use those jdk versions (openjdk8, openjdk11) to compile a library which could be used in android project ?</strong></p>\n<p>My current research about this, but still not clear to me :</p>\n<ul>\n<li><a href=\"https://developer.android.com/studio/write/java8-support\" rel=\"nofollow noreferrer\">https://developer.android.com/studio/write/java8-support</a></li>\n<li><a href=\"https://jakewharton.com/androids-java-9-10-11-and-12-support/\" rel=\"nofollow noreferrer\">https://jakewharton.com/androids-java-9-10-11-and-12-support/</a></li>\n<li><a href=\"https://developer.android.com/studio/releases/gradle-plugin?utm_source=android-studio-2020-3-1&amp;utm_medium=studio-assistant-stable#java-11\" rel=\"nofollow noreferrer\">https://developer.android.com/studio/releases/gradle-plugin?utm_source=android-studio-2020-3-1&amp;utm_medium=studio-assistant-stable#java-11</a></li>\n</ul>\n"},{"tags":["javascript","java","html","jsp"],"comments":[{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1634701388,"post_id":69640001,"comment_id":123092845,"body_markdown":"Unrelated, but the inline `onClick` won’t work as written since the string isn’t quoted.","body":"Unrelated, but the inline <code>onClick</code> won’t work as written since the string isn’t quoted."},{"owner":{"account_id":11641250,"reputation":185,"user_id":8525580,"accept_rate":60,"display_name":"S.P."},"score":0,"creation_date":1634701962,"post_id":69640001,"comment_id":123092936,"body_markdown":"@DaveNewton onClick is working and I am getting the alert. The problem is list.get(i) is not fetching the list elements.","body":"@DaveNewton onClick is working and I am getting the alert. The problem is list.get(i) is not fetching the list elements."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1634702667,"post_id":69640001,"comment_id":123093045,"body_markdown":"What HTML is generated when you render the JSP?","body":"What HTML is generated when you render the JSP?"},{"owner":{"account_id":11641250,"reputation":185,"user_id":8525580,"accept_rate":60,"display_name":"S.P."},"score":0,"creation_date":1634703131,"post_id":69640001,"comment_id":123093126,"body_markdown":"Inside the OpenHierarchyWindow() another window is opening```window.open(&quot;list.htm?ACTION=loadData&amp;DIMENSIONS=&quot;+id.value,&quot;WindowDimension1&quot;,&quot;width=600,height=570,top=100,left=200,scrollbars=1&quot;);```.  This window is opened but ```DIMENSIONS=&quot;+id.value``` is generated as Dimensions=undefined because of above said issue (list.get(i) is coming as undefined inside anchor tag)","body":"Inside the OpenHierarchyWindow() another window is opening<code>window.open(&quot;list.htm?ACTION=loadData&amp;DIMENSIONS=&quot;+id&zwnj;&#8203;.value,&quot;WindowDimens&zwnj;&#8203;ion1&quot;,&quot;width=600,hei&zwnj;&#8203;ght=570,top=100,left&zwnj;&#8203;=200,scrollbars=1&quot;);</code>&zwnj;&#8203;.  This window is opened but <code>DIMENSIONS=&quot;+id.value</code> is generated as Dimensions=undefined because of above said issue (list.get(i) is coming as undefined inside anchor tag)"},{"owner":{"account_id":20689108,"reputation":17578,"user_id":15273968,"display_name":"the Hutt"},"score":0,"creation_date":1634705123,"post_id":69640001,"comment_id":123093468,"body_markdown":"`&lt;%@ attribute name=&quot;list&quot; type=&quot;java.util.Collection&quot; %&gt;`? post complete code or at least reproducible code.","body":"<code>&lt;%@ attribute name=&quot;list&quot; type=&quot;java.util.Collection&quot; %&gt;</code>? post complete code or at least reproducible code."},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1634732953,"post_id":69640001,"comment_id":123103581,"body_markdown":"It’s a lost of strings, there’s no `id.value`. If this snippet is not what the code actually is there’s no way to help.","body":"It’s a lost of strings, there’s no <code>id.value</code>. If this snippet is not what the code actually is there’s no way to help."}],"answers":[{"tags":[],"owner":{"account_id":22946308,"reputation":69,"user_id":17078245,"display_name":"kody-technolab"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634732099,"creation_date":1634712502,"answer_id":69641459,"question_id":69640001,"body_markdown":"here JSP scriplets inside onClick javascript function should be quoted.\r\nYou can replace \r\n\r\n```\r\nonClick=&quot;openWindow(&lt;%=list.get(i)%&gt;);&quot;\r\n```\r\nWith \r\n\r\n\r\n```\r\nonClick=&quot;openWindow(&#39;&lt;%=list.get(i)%&gt;&#39;);&quot;\r\n```\r\n\r\nBelow is complete code for the same.\r\n\r\n```\r\n&lt;%@ page import=&quot;java.util.List&quot;%&gt;\r\n&lt;%@ page import=&quot;java.util.Arrays&quot;%&gt;\r\n\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html&gt;\r\n&lt;head&gt;\r\n&lt;title&gt;JSP Scriplets And Java Script&lt;/title&gt;\r\n\r\n&lt;script type=&quot;text/javascript&quot;&gt;\r\n\tfunction OpenHierarchyWindow(id) {\r\n\t\talert(&quot;id value &quot; + id);\r\n\t}\r\n&lt;/script&gt;\r\n\r\n&lt;/head&gt;\r\n&lt;body&gt;\r\n\r\n\t&lt;%\r\n\tList&lt;String&gt; list = Arrays.asList(&quot;Abc&quot;, &quot;Def&quot;);\r\n\t\r\n\tfor (int i = 0; i &lt; list.size(); i++) {%&gt;\r\n\t&lt;a id=&quot;&lt;%=list.get(i)%&gt;&quot; href=&quot;javascript:;&quot; onClick=&quot;OpenHierarchyWindow(&#39;&lt;%=list.get(i)%&gt;&#39;);&quot; align=&quot;left&quot;&gt;Proceed&lt;/a&gt;\r\n    &lt;%}%&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n```","title":"Java List element is undefined inside anchor tag","body":"<p>here JSP scriplets inside onClick javascript function should be quoted.\nYou can replace</p>\n<pre><code>onClick=&quot;openWindow(&lt;%=list.get(i)%&gt;);&quot;\n</code></pre>\n<p>With</p>\n<pre><code>onClick=&quot;openWindow('&lt;%=list.get(i)%&gt;');&quot;\n</code></pre>\n<p>Below is complete code for the same.</p>\n<pre><code>&lt;%@ page import=&quot;java.util.List&quot;%&gt;\n&lt;%@ page import=&quot;java.util.Arrays&quot;%&gt;\n\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;JSP Scriplets And Java Script&lt;/title&gt;\n\n&lt;script type=&quot;text/javascript&quot;&gt;\n    function OpenHierarchyWindow(id) {\n        alert(&quot;id value &quot; + id);\n    }\n&lt;/script&gt;\n\n&lt;/head&gt;\n&lt;body&gt;\n\n    &lt;%\n    List&lt;String&gt; list = Arrays.asList(&quot;Abc&quot;, &quot;Def&quot;);\n    \n    for (int i = 0; i &lt; list.size(); i++) {%&gt;\n    &lt;a id=&quot;&lt;%=list.get(i)%&gt;&quot; href=&quot;javascript:;&quot; onClick=&quot;OpenHierarchyWindow('&lt;%=list.get(i)%&gt;');&quot; align=&quot;left&quot;&gt;Proceed&lt;/a&gt;\n    &lt;%}%&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"}],"owner":{"account_id":11641250,"reputation":185,"user_id":8525580,"accept_rate":60,"display_name":"S.P."},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":134,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1634732099,"creation_date":1634700680,"question_id":69640001,"body_markdown":"There is a list defined as:\r\n\r\n    List&lt;String&gt; list = Arrays.asList(&quot;Abc&quot;, &quot;Def&quot;);\r\n\r\nThe problem is inside anchor tag the list element is coming as undefined.\r\n\r\n    for (int i = 0; i &lt; list.size(); i++) {\r\n      &lt;a id=&quot;&lt;%=list.get(i)%&gt;&quot; href=&quot;javascript:;&quot; onClick=&quot;openWindow(&lt;%=list.get(i)%&gt;);&quot; align=&quot;left&quot;&gt;Proceed&lt;/a&gt;\r\n     }\r\n\r\nThe openWindow function is defined as below:\r\n\r\n    function OpenHierarchyWindow(id) {\r\n\t  alert(&quot;id value &quot;+id.value);\r\n    }\r\n\r\nThe alert function is giving output as undefined. Why the `list.get(i)` is unable to fetch the data inside the anchor tag.","title":"Java List element is undefined inside anchor tag","body":"<p>There is a list defined as:</p>\n<pre><code>List&lt;String&gt; list = Arrays.asList(&quot;Abc&quot;, &quot;Def&quot;);\n</code></pre>\n<p>The problem is inside anchor tag the list element is coming as undefined.</p>\n<pre><code>for (int i = 0; i &lt; list.size(); i++) {\n  &lt;a id=&quot;&lt;%=list.get(i)%&gt;&quot; href=&quot;javascript:;&quot; onClick=&quot;openWindow(&lt;%=list.get(i)%&gt;);&quot; align=&quot;left&quot;&gt;Proceed&lt;/a&gt;\n }\n</code></pre>\n<p>The openWindow function is defined as below:</p>\n<pre><code>function OpenHierarchyWindow(id) {\n  alert(&quot;id value &quot;+id.value);\n}\n</code></pre>\n<p>The alert function is giving output as undefined. Why the <code>list.get(i)</code> is unable to fetch the data inside the anchor tag.</p>\n"},{"tags":["java","xml","hadoop","configuration"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1634723477,"post_id":69643347,"comment_id":123099666,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1634760371,"post_id":69643347,"comment_id":123115431,"body_markdown":"Sounds like you are not using Java8 or 11","body":"Sounds like you are not using Java8 or 11"}],"owner":{"account_id":22475324,"reputation":1,"user_id":16675130,"display_name":"zirconium"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1634732005,"creation_date":1634721360,"question_id":69643347,"body_markdown":"The real condition of my terminal shows that: [enter image description here][1]\r\n\r\nAfter I look it up in the log, it says \r\n\r\n    Caused by: java.lang.reflect.Inaccessible0bjectException: Unable to make protected final java.lang.class java.lang.classloader.defineClass(java.lang.String,byte[],int,int,java.security.ProtectionDomain) throws java.lang.ClassFormatError a ccessible: module java.base does not &quot;opens java.lang&quot; to unnamed module @7cc0cdad\r\n\r\n  \r\nMy java version is the jdk16,and I am not sure whether is the problem of the java version\r\n\r\nHere are my configuration XML files:\r\n------------------------------------\r\n\r\n**1. My core-site.xml configuration:** [enter image description here][2]\r\n\r\n**2. My hdfs-site.xml configuration:** [enter image description here][3]\r\n\r\n**3. My yarn-site.xml configuration:** [enter image description here][4]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/YG6BB.png\r\n  [2]: https://i.stack.imgur.com/DwqK1.png\r\n  [3]: https://i.stack.imgur.com/7KihY.png\r\n  [4]: https://i.stack.imgur.com/pfH3b.png","title":"I fell to start resourcemanger ,datanode and the &quot;http://localhost:8088/cluster&quot; after I start-all.sh of hadoop 3.3.1","body":"<p>The real condition of my terminal shows that: <a href=\"https://i.stack.imgur.com/YG6BB.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>After I look it up in the log, it says</p>\n<pre><code>Caused by: java.lang.reflect.Inaccessible0bjectException: Unable to make protected final java.lang.class java.lang.classloader.defineClass(java.lang.String,byte[],int,int,java.security.ProtectionDomain) throws java.lang.ClassFormatError a ccessible: module java.base does not &quot;opens java.lang&quot; to unnamed module @7cc0cdad\n</code></pre>\n<p>My java version is the jdk16,and I am not sure whether is the problem of the java version</p>\n<h2>Here are my configuration XML files:</h2>\n<p><strong>1. My core-site.xml configuration:</strong> <a href=\"https://i.stack.imgur.com/DwqK1.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p><strong>2. My hdfs-site.xml configuration:</strong> <a href=\"https://i.stack.imgur.com/7KihY.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p><strong>3. My yarn-site.xml configuration:</strong> <a href=\"https://i.stack.imgur.com/pfH3b.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":["java","c#","serialization","protocol-buffers","protobuf-net"],"comments":[{"owner":{"account_id":3436240,"reputation":30827,"user_id":12342238,"display_name":"JonasH"},"score":0,"creation_date":1634731904,"post_id":69645098,"comment_id":123103122,"body_markdown":"I think the polymorphism support is an extension, and I&#39;m not sure how well that is supported in Java. Hopefully Marc Gravell will see this and provide more details.","body":"I think the polymorphism support is an extension, and I&#39;m not sure how well that is supported in Java. Hopefully Marc Gravell will see this and provide more details."},{"owner":{"account_id":11975,"reputation":1033822,"user_id":23354,"accept_rate":100,"display_name":"Marc Gravell"},"score":0,"creation_date":1634732509,"post_id":69645098,"comment_id":123103380,"body_markdown":"@JonasH nah, they&#39;re very unreliable, and almost never respond to questions","body":"@JonasH nah, they&#39;re very unreliable, and almost never respond to questions"}],"answers":[{"tags":[],"owner":{"account_id":11975,"reputation":1033822,"user_id":23354,"accept_rate":100,"display_name":"Marc Gravell"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1634731999,"creation_date":1634731999,"answer_id":69645787,"question_id":69645098,"body_markdown":"This is happening because of the inheritance, basically; inheritance isn&#39;t a concept that protobuf directly supports, so protobuf-net models inheritance via nested sub-objects; to avoid some complexity, when serializing this, protobuf-net always starts by writing the inheritance parts *first* - so: when serializing `BasePaintHolder`, it might serialize field 400 (the sub-type data for `BaseSmokePaintHolder`), *then* field 1 (`materialId`). This means that when it comes to deserialize, it has an obvious construction path, i.e. by the time it gets *field* data, it has already constructed the final concrete type. \r\n\r\nThis is fine, for protobuf-net to protobuf-net scenarios, but when we work with the same data in Java, it doesn&#39;t know or care about this, and elects to serialize in ascending field order, i.e. field 1, then field 400. It is explicit in the specification that fields *may* be out of order, but Java can choose to do whatever it wants.\r\n\r\nSo: now we take that data back to protobuf-net, and we see field 1 *first*; at that point, we have no clue what the final type will be, and nowhere (yet) to stick the data. With no better options, the library *tries* to use the base type `BasePaintHolder` as a placeholder until it can make better decisions, but it turns out that this type is `abstract`, so: even that fails.\r\n\r\nSo: that&#39;s the *why*, and some back-story. What can we do?\r\n\r\nWell, the first thing we could try might be to remove the `abstract`, making it *technically* constructable. To prevent external code accidentally creating instances, you might also make the constructors `protected`, `internal`, or `private protected` (which means the intersection of `protected` and `internal`). We could also try using the `SkipConstructor=true` modifier on `[ProtoContract]`.\r\n\r\nIf that doesn&#39;t work: it might be necessary to basically work with 2 different object models; one that is simple - essentially more like the Java version, perhaps by running your schema through https://protogen.marcgravell.com/ - and one that has the inheritance; use the simple version for deserialization (and optionally serialization, although that shouldn&#39;t matter), and then re-map the data in your own code to the actual model. The other option is for me to figure out a way of doing all this magically and automatically; which: isn&#39;t a small job.","title":"Serialization / Desealization via protobuf-net between C# and Java","body":"<p>This is happening because of the inheritance, basically; inheritance isn't a concept that protobuf directly supports, so protobuf-net models inheritance via nested sub-objects; to avoid some complexity, when serializing this, protobuf-net always starts by writing the inheritance parts <em>first</em> - so: when serializing <code>BasePaintHolder</code>, it might serialize field 400 (the sub-type data for <code>BaseSmokePaintHolder</code>), <em>then</em> field 1 (<code>materialId</code>). This means that when it comes to deserialize, it has an obvious construction path, i.e. by the time it gets <em>field</em> data, it has already constructed the final concrete type.</p>\n<p>This is fine, for protobuf-net to protobuf-net scenarios, but when we work with the same data in Java, it doesn't know or care about this, and elects to serialize in ascending field order, i.e. field 1, then field 400. It is explicit in the specification that fields <em>may</em> be out of order, but Java can choose to do whatever it wants.</p>\n<p>So: now we take that data back to protobuf-net, and we see field 1 <em>first</em>; at that point, we have no clue what the final type will be, and nowhere (yet) to stick the data. With no better options, the library <em>tries</em> to use the base type <code>BasePaintHolder</code> as a placeholder until it can make better decisions, but it turns out that this type is <code>abstract</code>, so: even that fails.</p>\n<p>So: that's the <em>why</em>, and some back-story. What can we do?</p>\n<p>Well, the first thing we could try might be to remove the <code>abstract</code>, making it <em>technically</em> constructable. To prevent external code accidentally creating instances, you might also make the constructors <code>protected</code>, <code>internal</code>, or <code>private protected</code> (which means the intersection of <code>protected</code> and <code>internal</code>). We could also try using the <code>SkipConstructor=true</code> modifier on <code>[ProtoContract]</code>.</p>\n<p>If that doesn't work: it might be necessary to basically work with 2 different object models; one that is simple - essentially more like the Java version, perhaps by running your schema through <a href=\"https://protogen.marcgravell.com/\" rel=\"nofollow noreferrer\">https://protogen.marcgravell.com/</a> - and one that has the inheritance; use the simple version for deserialization (and optionally serialization, although that shouldn't matter), and then re-map the data in your own code to the actual model. The other option is for me to figure out a way of doing all this magically and automatically; which: isn't a small job.</p>\n"}],"owner":{"account_id":16674913,"reputation":124,"user_id":12051567,"display_name":"Aceccop"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":720,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":69645787,"answer_count":1,"score":2,"last_activity_date":1634731999,"creation_date":1634729026,"question_id":69645098,"body_markdown":"I have 2 applications using protobuf in between. First one (C#) using protobuf-net with serializable object VisualSettings:\r\n``` \r\n[ProtoContract]\r\npublic class VisualSettings\r\n{\r\n\t[ProtoContract]\r\n\tpublic class BodyPartHolder\r\n\t{\r\n\t\t[ProtoMember(1)]\r\n\t\tpublic BodyPartType type;\r\n\t\t[ProtoMember(2)]\r\n\t\tpublic int id;\r\n\r\n\t\tpublic BodyPartHolder() { }\r\n\t\tpublic BodyPartHolder(BodyPartType type, int id)\r\n\t\t{\r\n\t\t\tthis.type = type;\r\n\t\t\tthis.id = id;\r\n\t\t}\r\n\r\n\t\tpublic BodyPartHolder Copy()\r\n\t\t{\r\n\t\t\treturn new BodyPartHolder(type, id);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic interface IPaintHolder\r\n\t{\r\n\t\tint id { get; set; }\r\n\t}\r\n\r\n\tpublic interface ICustomPaintHolder\r\n\t{\r\n\t\tHSBColor hsb { get; set; }\r\n\t}\r\n\r\n\t[ProtoContract]\r\n\t[ProtoInclude(100, typeof(BaseBodyPaintHolder)), ProtoInclude(200, typeof(BaseWheelPaintHolder)), ProtoInclude(300, typeof(BaseGlassPaintHolder))]\r\n\t[ProtoInclude(400, typeof(BaseSmokePaintHolder)), ProtoInclude(500, typeof(BaseSuspensionPaintHolder)), ProtoInclude(600, typeof(BaseInteriorPaintHolder))]\r\n\tpublic abstract class BasePaintHolder\r\n\t{\r\n\t\t[JsonIgnore]\r\n\t\tpublic bool isCustom =&gt; this is ICustomPaintHolder;\r\n\t\t[JsonIgnore]\r\n\t\tpublic string materialName =&gt; CarPaintMaterials.GetName(material);\r\n\t\t[JsonIgnore]\r\n\t\tpublic CarPaintType material =&gt; materials[materialId];\r\n\r\n\t\t[ProtoMember(1)]\r\n\t\tpublic int materialId;\r\n\r\n\t\tprotected abstract CarPaintType[] materials { get; }\r\n\r\n\t\tpublic BasePaintHolder() { }\r\n\t\tpublic BasePaintHolder(int materialId)\r\n\t\t{\r\n\t\t\tthis.materialId = materialId;\r\n\t\t}\r\n\r\n\t\tpublic virtual float GetCategoryCostCoefficient(CarSharedMeta carMeta)\r\n\t\t{\r\n\t\t\treturn BasePaintItem.DefaultCostCoefficient;\r\n\t\t}\r\n\r\n\t\tpublic float GetMaterialCostCoefficient(CarSharedMeta carMeta)\r\n\t\t{\r\n\t\t\treturn carMeta.GetPaintMaterialCostCoefficient(material);\r\n\t\t}\r\n\r\n\t\tpublic abstract bool Equals(BasePaintHolder other);\r\n\t}\r\n\r\n\t[ProtoContract]\r\n\t[ProtoInclude(100, typeof(BodyPaintHolder)), ProtoInclude(200, typeof(BodyCustomPaintHolder))]\r\n\tpublic abstract class BaseBodyPaintHolder : BasePaintHolder\r\n\t{\r\n\t\t[ProtoMember(1)]\r\n\t\tpublic BodyPartType part;\r\n\r\n\t\tprotected override CarPaintType[] materials =&gt; CarPaintMaterials.Body;\r\n\r\n\t\tpublic BaseBodyPaintHolder() { }\r\n\t\tpublic BaseBodyPaintHolder(BodyPartType part, int materialId) : base(materialId)\r\n\t\t{\r\n\t\t\tthis.part = part;\r\n\t\t}\r\n\r\n\t\tpublic override float GetCategoryCostCoefficient(CarSharedMeta carMeta)\r\n\t\t{\r\n\t\t\treturn carMeta.GetPaintCategoryCostCoefficient(part);\r\n\t\t}\r\n\r\n\t\tpublic abstract BaseBodyPaintHolder Copy();\r\n\t}\r\n\r\n\t[ProtoContract]\r\n\tpublic class BodyPaintHolder : BaseBodyPaintHolder, IPaintHolder\r\n\t{\r\n\t\t[ProtoMember(1)]\r\n\t\tpublic int id { get; set; }\r\n\r\n\t\tpublic BodyPaintHolder() { }\r\n\t\tpublic BodyPaintHolder(BodyPartType part, int materialId, int id) : base(part, materialId)\r\n\t\t{\r\n\t\t\tthis.id = id;\r\n\t\t}\r\n\r\n\t\tpublic override BaseBodyPaintHolder Copy()\r\n\t\t{\r\n\t\t\treturn new BodyPaintHolder(part, materialId, id);\r\n\t\t}\r\n\r\n\t\tpublic override bool Equals(BasePaintHolder other)\r\n\t\t{\r\n\t\t\tvar otherPaint = other as BodyPaintHolder;\r\n\t\t\treturn (otherPaint != null) &amp;&amp; (otherPaint.part == part) &amp;&amp; (otherPaint.materialId == materialId) &amp;&amp; (otherPaint.id == id);\r\n\t\t}\r\n\t}\r\n\r\n\t[ProtoContract]\r\n\tpublic class BodyCustomPaintHolder : BaseBodyPaintHolder, ICustomPaintHolder\r\n\t{\r\n\t\t[ProtoMember(1)]\r\n\t\tpublic HSBColor hsb { get; set; }\r\n\r\n\t\tpublic BodyCustomPaintHolder() { }\r\n\t\tpublic BodyCustomPaintHolder(BodyPartType part, int materialId, HSBColor hsb) : base(part, materialId)\r\n\t\t{\r\n\t\t\tthis.hsb = hsb;\r\n\t\t}\r\n\r\n\t\tpublic override BaseBodyPaintHolder Copy()\r\n\t\t{\r\n\t\t\treturn new BodyCustomPaintHolder(part, materialId, hsb);\r\n\t\t}\r\n\r\n\t\tpublic override bool Equals(BasePaintHolder other)\r\n\t\t{\r\n\t\t\tvar otherPaint = other as BodyCustomPaintHolder;\r\n\t\t\treturn (otherPaint != null) &amp;&amp; (otherPaint.part == part) &amp;&amp; (otherPaint.materialId == materialId) &amp;&amp; HSBColor.EqualsOpaque(otherPaint.hsb, hsb);\r\n\t\t}\r\n\t}\r\n\r\n\t[ProtoContract]\r\n\t[ProtoInclude(100, typeof(WheelPaintHolder)), ProtoInclude(200, typeof(WheelCustomPaintHolder))]\r\n\tpublic abstract class BaseWheelPaintHolder : BasePaintHolder\r\n\t{\r\n\t\t[ProtoMember(1)]\r\n\t\tpublic WheelPaintPart part;\r\n\r\n\t\tprotected override CarPaintType[] materials =&gt; CarPaintMaterials.Wheel;\r\n\r\n\t\tpublic BaseWheelPaintHolder() { }\r\n\t\tpublic BaseWheelPaintHolder(WheelPaintPart part, int materialId) : base(materialId)\r\n\t\t{\r\n\t\t\tthis.part = part;\r\n\t\t}\r\n\r\n\t\tpublic abstract BaseWheelPaintHolder Copy();\r\n\t}\r\n\r\n\t[ProtoContract]\r\n\tpublic class WheelPaintHolder : BaseWheelPaintHolder, IPaintHolder\r\n\t{\r\n\t\t[ProtoMember(1)]\r\n\t\tpublic int id { get; set; }\r\n\r\n\t\tpublic WheelPaintHolder() { }\r\n\t\tpublic WheelPaintHolder(WheelPaintPart part, int materialId, int id) : base(part, materialId)\r\n\t\t{\r\n\t\t\tthis.id = id;\r\n\t\t}\r\n\r\n\t\tpublic override BaseWheelPaintHolder Copy()\r\n\t\t{\r\n\t\t\treturn new WheelPaintHolder(part, materialId, id);\r\n\t\t}\r\n\r\n\t\tpublic override bool Equals(BasePaintHolder other)\r\n\t\t{\r\n\t\t\tvar otherPaint = other as WheelPaintHolder;\r\n\t\t\treturn (otherPaint != null) &amp;&amp; (otherPaint.part == part) &amp;&amp; (otherPaint.materialId == materialId) &amp;&amp; (otherPaint.id == id);\r\n\t\t}\r\n\t}\r\n\r\n\t[ProtoContract]\r\n\tpublic class WheelCustomPaintHolder : BaseWheelPaintHolder, ICustomPaintHolder\r\n\t{\r\n\t\t[ProtoMember(1)]\r\n\t\tpublic HSBColor hsb { get; set; }\r\n\r\n\t\tpublic WheelCustomPaintHolder() { }\r\n\t\tpublic WheelCustomPaintHolder(WheelPaintPart part, int materialId, HSBColor hsb) : base(part, materialId)\r\n\t\t{\r\n\t\t\tthis.hsb = hsb;\r\n\t\t}\r\n\r\n\t\tpublic override BaseWheelPaintHolder Copy()\r\n\t\t{\r\n\t\t\treturn new WheelCustomPaintHolder(part, materialId, hsb);\r\n\t\t}\r\n\r\n\t\tpublic override bool Equals(BasePaintHolder other)\r\n\t\t{\r\n\t\t\tvar otherPaint = other as WheelCustomPaintHolder;\r\n\t\t\treturn (otherPaint != null) &amp;&amp; (otherPaint.part == part) &amp;&amp; (otherPaint.materialId == materialId) &amp;&amp; HSBColor.EqualsOpaque(otherPaint.hsb, hsb);\r\n\t\t}\r\n\t}\r\n\r\n\t[ProtoContract]\r\n\t[ProtoInclude(100, typeof(GlassPaintHolder)), ProtoInclude(200, typeof(GlassCustomPaintHolder))]\r\n\tpublic abstract class BaseGlassPaintHolder : BasePaintHolder\r\n\t{\r\n\t\t[ProtoMember(1)]\r\n\t\tpublic GlassPaintPart part { get; set; }\r\n\t\t\r\n\t\tprotected override CarPaintType[] materials =&gt; CarPaintMaterials.Glass;\r\n\r\n\t\tpublic BaseGlassPaintHolder() { }\r\n\r\n\t\tpublic BaseGlassPaintHolder(GlassPaintPart part, int materialId) : base(materialId)\r\n\t\t{\r\n\t\t\tthis.part = part;\r\n\t\t}\r\n\r\n\t\tpublic abstract BaseGlassPaintHolder Copy();\r\n\t}\r\n\r\n\t[ProtoContract]\r\n\tpublic class GlassPaintHolder : BaseGlassPaintHolder, IPaintHolder\r\n\t{\r\n\t\t[ProtoMember(1)]\r\n\t\tpublic int id { get; set; }\r\n\r\n\t\tpublic GlassPaintHolder() { }\r\n\t\tpublic GlassPaintHolder(GlassPaintPart part, int materialId, int id) : base(part, materialId)\r\n\t\t{\r\n\t\t\tthis.id = id;\r\n\t\t}\r\n\r\n\t\tpublic override BaseGlassPaintHolder Copy()\r\n\t\t{\r\n\t\t\treturn new GlassPaintHolder(part, materialId, id);\r\n\t\t}\r\n\r\n\t\tpublic override bool Equals(BasePaintHolder other)\r\n\t\t{\r\n\t\t\tvar otherPaint = other as GlassPaintHolder;\r\n\t\t\treturn (otherPaint != null) &amp;&amp; (otherPaint.materialId == materialId) &amp;&amp; (otherPaint.id == id);\r\n\t\t}\r\n\t}\r\n\r\n\t[ProtoContract]\r\n\tpublic class GlassCustomPaintHolder : BaseGlassPaintHolder, ICustomPaintHolder\r\n\t{\r\n\t\t[ProtoMember(1)]\r\n\t\tpublic HSBColor hsb { get; set; }\r\n\r\n\t\tpublic GlassCustomPaintHolder() { }\r\n\t\tpublic GlassCustomPaintHolder(GlassPaintPart part, int materialId, HSBColor hsb) : base(part, materialId)\r\n\t\t{\r\n\t\t\tthis.hsb = hsb;\r\n\t\t}\r\n\r\n\t\tpublic override BaseGlassPaintHolder Copy()\r\n\t\t{\r\n\t\t\treturn new GlassCustomPaintHolder(part, materialId, hsb);\r\n\t\t}\r\n\r\n\t\tpublic override bool Equals(BasePaintHolder other)\r\n\t\t{\r\n\t\t\tvar otherPaint = other as GlassCustomPaintHolder;\r\n\t\t\treturn (otherPaint != null) &amp;&amp; (otherPaint.materialId == materialId) &amp;&amp; HSBColor.EqualsOpaque(otherPaint.hsb, hsb);\r\n\t\t}\r\n\t}\r\n\r\n\t[ProtoContract]\r\n\t[ProtoInclude(100, typeof(SmokePaintHolder)), ProtoInclude(200, typeof(SmokeCustomPaintHolder))]\r\n\tpublic abstract class BaseSmokePaintHolder : BasePaintHolder\r\n\t{\r\n\t\tprotected override CarPaintType[] materials =&gt; CarPaintMaterials.Smoke;\r\n\r\n\t\tpublic BaseSmokePaintHolder() { }\r\n\t\tpublic BaseSmokePaintHolder(int materialId) : base(materialId) { }\r\n\r\n\t\tpublic abstract BaseSmokePaintHolder Copy();\r\n\t}\r\n\r\n\t[ProtoContract]\r\n\tpublic class SmokePaintHolder : BaseSmokePaintHolder, IPaintHolder\r\n\t{\r\n\t\t[ProtoMember(1)]\r\n\t\tpublic int id { get; set; }\r\n\r\n\t\tpublic SmokePaintHolder() { }\r\n\t\tpublic SmokePaintHolder(int materialId, int id) : base(materialId)\r\n\t\t{\r\n\t\t\tthis.id = id;\r\n\t\t}\r\n\r\n\t\tpublic override BaseSmokePaintHolder Copy()\r\n\t\t{\r\n\t\t\treturn new SmokePaintHolder(materialId, id);\r\n\t\t}\r\n\r\n\t\tpublic override bool Equals(BasePaintHolder other)\r\n\t\t{\r\n\t\t\tvar otherPaint = other as SmokePaintHolder;\r\n\t\t\treturn (otherPaint != null) &amp;&amp; (otherPaint.materialId == materialId) &amp;&amp; (otherPaint.id == id);\r\n\t\t}\r\n\t}\r\n\r\n\t[ProtoContract]\r\n\tpublic class SmokeCustomPaintHolder : BaseSmokePaintHolder, ICustomPaintHolder\r\n\t{\r\n\t\t[ProtoMember(1)]\r\n\t\tpublic HSBColor hsb { get; set; }\r\n\r\n\t\tpublic SmokeCustomPaintHolder() { }\r\n\t\tpublic SmokeCustomPaintHolder(int materialId, HSBColor hsb) : base(materialId)\r\n\t\t{\r\n\t\t\tthis.hsb = hsb;\r\n\t\t}\r\n\r\n\t\tpublic override BaseSmokePaintHolder Copy()\r\n\t\t{\r\n\t\t\treturn new SmokeCustomPaintHolder(materialId, hsb);\r\n\t\t}\r\n\r\n\t\tpublic override bool Equals(BasePaintHolder other)\r\n\t\t{\r\n\t\t\tvar otherPaint = other as SmokeCustomPaintHolder;\r\n\t\t\treturn (otherPaint != null) &amp;&amp; (otherPaint.materialId == materialId) &amp;&amp; HSBColor.EqualsOpaque(otherPaint.hsb, hsb);\r\n\t\t}\r\n\t}\r\n\r\n\t[ProtoContract]\r\n\t[ProtoInclude(100, typeof(SuspensionPaintHolder)), ProtoInclude(200, typeof(SuspensionCustomPaintHolder))]\r\n\tpublic abstract class BaseSuspensionPaintHolder : BasePaintHolder\r\n\t{\r\n\t\t[ProtoMember(1)]\r\n\t\tpublic SuspensionPaintPart part { get; set; }\r\n\r\n\t\tprotected override CarPaintType[] materials =&gt; CarPaintMaterials.Suspension;\r\n\r\n\t\tpublic BaseSuspensionPaintHolder() { }\r\n\t\tpublic BaseSuspensionPaintHolder(SuspensionPaintPart part, int materialId) : base(materialId)\r\n\t\t{\r\n\t\t\tthis.part = part;\r\n\t\t}\r\n\r\n\t\tpublic override float GetCategoryCostCoefficient(CarSharedMeta carMeta)\r\n\t\t{\r\n\t\t\treturn carMeta.GetPaintCategoryCostCoefficient(BodyPartType.Suspension);\r\n\t\t}\r\n\r\n\t\tpublic abstract BaseSuspensionPaintHolder Copy();\r\n\t}\r\n\r\n\t[ProtoContract]\r\n\tpublic class SuspensionPaintHolder : BaseSuspensionPaintHolder, IPaintHolder\r\n\t{\r\n\t\t[ProtoMember(1)]\r\n\t\tpublic int id { get; set; }\r\n\r\n\t\tpublic SuspensionPaintHolder() { }\r\n\t\tpublic SuspensionPaintHolder(SuspensionPaintPart part, int id, int materialId) : base(part, materialId)\r\n\t\t{\r\n\t\t\tthis.id = id;\r\n\t\t}\r\n\r\n\t\tpublic override BaseSuspensionPaintHolder Copy()\r\n\t\t{\r\n\t\t\treturn new SuspensionPaintHolder(part, id, materialId);\r\n\t\t}\r\n\r\n\t\tpublic override bool Equals(BasePaintHolder other)\r\n\t\t{\r\n\t\t\tvar otherPaint = other as SuspensionPaintHolder;\r\n\t\t\treturn (otherPaint != null) &amp;&amp; (otherPaint.materialId == materialId) &amp;&amp; (otherPaint.id == id);\r\n\t\t}\r\n\t}\r\n\r\n\t[ProtoContract]\r\n\tpublic class SuspensionCustomPaintHolder : BaseSuspensionPaintHolder, ICustomPaintHolder\r\n\t{\r\n\t\t[ProtoMember(1)]\r\n\t\tpublic HSBColor hsb { get; set; }\r\n\r\n\t\tpublic SuspensionCustomPaintHolder() { }\r\n\t\tpublic SuspensionCustomPaintHolder(SuspensionPaintPart part, HSBColor hsb, int materialId) : base(part, materialId)\r\n\t\t{\r\n\t\t\tthis.hsb = hsb;\r\n\t\t}\r\n\r\n\t\tpublic override BaseSuspensionPaintHolder Copy()\r\n\t\t{\r\n\t\t\treturn new SuspensionCustomPaintHolder(part, hsb, materialId);\r\n\t\t}\r\n\r\n\t\tpublic override bool Equals(BasePaintHolder other)\r\n\t\t{\r\n\t\t\tvar otherPaint = other as SuspensionCustomPaintHolder;\r\n\t\t\treturn (otherPaint != null) &amp;&amp; (otherPaint.materialId == materialId) &amp;&amp; HSBColor.EqualsOpaque(otherPaint.hsb, hsb);\r\n\t\t}\r\n\t}\r\n\r\n\t[ProtoContract]\r\n\t[ProtoInclude(100, typeof(InteriorPaintHolder)), ProtoInclude(200, typeof(InteriorCustomPaintHolder))]\r\n\tpublic abstract class BaseInteriorPaintHolder : BasePaintHolder\r\n\t{\r\n\t\t[ProtoMember(1)]\r\n\t\tpublic InteriorPaintPart part { get; set; }\r\n\r\n\t\tprotected override CarPaintType[] materials =&gt; CarPaintMaterials.Interior;\r\n\r\n\t\tpublic BaseInteriorPaintHolder() { }\r\n\t\tpublic BaseInteriorPaintHolder(InteriorPaintPart part, int materialId) : base(materialId)\r\n\t\t{\r\n\t\t\tthis.part = part;\r\n\t\t}\r\n\r\n\t\tpublic override float GetCategoryCostCoefficient(CarSharedMeta carMeta)\r\n\t\t{\r\n\t\t\treturn carMeta.GetPaintCategoryCostCoefficient(BodyPartType.SeatLeft);\r\n\t\t}\r\n\r\n\t\tpublic abstract BaseInteriorPaintHolder Copy();\r\n\t}\r\n\r\n\t[ProtoContract]\r\n\tpublic class InteriorPaintHolder : BaseInteriorPaintHolder, IPaintHolder\r\n\t{\r\n\t\t[ProtoMember(1)]\r\n\t\tpublic int id { get; set; }\r\n\r\n\t\tpublic InteriorPaintHolder() { }\r\n\t\tpublic InteriorPaintHolder(InteriorPaintPart part, int id, int materialId) : base(part, materialId)\r\n\t\t{\r\n\t\t\tthis.id = id;\r\n\t\t}\r\n\r\n\t\tpublic override BaseInteriorPaintHolder Copy()\r\n\t\t{\r\n\t\t\treturn new InteriorPaintHolder(part, id, materialId);\r\n\t\t}\r\n\r\n\t\tpublic override bool Equals(BasePaintHolder other)\r\n\t\t{\r\n\t\t\treturn (other is InteriorPaintHolder otherPaint) &amp;&amp; (otherPaint.materialId == materialId) &amp;&amp; (otherPaint.id == id);\r\n\t\t}\r\n\t}\r\n\r\n\t[ProtoContract]\r\n\tpublic class InteriorCustomPaintHolder : BaseInteriorPaintHolder, ICustomPaintHolder\r\n\t{\r\n\t\t[ProtoMember(1)]\r\n\t\tpublic HSBColor hsb { get; set; }\r\n\r\n\t\tpublic InteriorCustomPaintHolder() { }\r\n\t\tpublic InteriorCustomPaintHolder(InteriorPaintPart part, HSBColor hsb, int materialId) : base(part, materialId)\r\n\t\t{\r\n\t\t\tthis.hsb = hsb;\r\n\t\t}\r\n\r\n\t\tpublic override BaseInteriorPaintHolder Copy()\r\n\t\t{\r\n\t\t\treturn new InteriorCustomPaintHolder(part, hsb, materialId);\r\n\t\t}\r\n\r\n\t\tpublic override bool Equals(BasePaintHolder other)\r\n\t\t{\r\n\t\t\treturn (other is InteriorCustomPaintHolder otherPaint) &amp;&amp; (otherPaint.materialId == materialId) &amp;&amp; HSBColor.EqualsOpaque(otherPaint.hsb, hsb);\r\n\t\t}\r\n\t}\r\n\r\n\t[ProtoContract]\r\n\t[ProtoInclude(100, typeof(GenericPaintHolder)), ProtoInclude(200, typeof(GenericCustomPaintHolder))]\r\n\tpublic abstract class BaseGenericPaintHolder : BasePaintHolder\r\n\t{\r\n\t\tprotected override CarPaintType[] materials =&gt; CarPaintMaterials.Generic;\r\n\r\n\t\tpublic BaseGenericPaintHolder() { }\r\n\t\tpublic BaseGenericPaintHolder(int materialId) : base(materialId) { }\r\n\r\n\t\tpublic abstract BaseGenericPaintHolder Copy();\r\n\t}\r\n\r\n\t[ProtoContract]\r\n\tpublic class GenericPaintHolder : BaseGenericPaintHolder, IPaintHolder\r\n\t{\r\n\t\t[ProtoMember(1)]\r\n\t\tpublic int id { get; set; }\r\n\r\n\t\tpublic GenericPaintHolder() { }\r\n\t\tpublic GenericPaintHolder(int materialId, int id) : base(materialId)\r\n\t\t{\r\n\t\t\tthis.id = id;\r\n\t\t}\r\n\r\n\t\tpublic override BaseGenericPaintHolder Copy()\r\n\t\t{\r\n\t\t\treturn new GenericPaintHolder(materialId, id);\r\n\t\t}\r\n\r\n\t\tpublic override bool Equals(BasePaintHolder other)\r\n\t\t{\r\n\t\t\tvar otherPaint = other as GenericPaintHolder;\r\n\t\t\treturn (otherPaint != null) &amp;&amp; (otherPaint.materialId == materialId) &amp;&amp; (otherPaint.id == id);\r\n\t\t}\r\n\t}\r\n\r\n\t[ProtoContract]\r\n\tpublic class GenericCustomPaintHolder : BaseGenericPaintHolder, ICustomPaintHolder\r\n\t{\r\n\t\t[ProtoMember(1)]\r\n\t\tpublic HSBColor hsb { get; set; }\r\n\r\n\t\tpublic GenericCustomPaintHolder() { }\r\n\t\tpublic GenericCustomPaintHolder(int materialId, HSBColor hsb) : base(materialId)\r\n\t\t{\r\n\t\t\tthis.hsb = hsb;\r\n\t\t}\r\n\r\n\t\tpublic override BaseGenericPaintHolder Copy()\r\n\t\t{\r\n\t\t\treturn new GenericCustomPaintHolder(materialId, hsb);\r\n\t\t}\r\n\r\n\t\tpublic override bool Equals(BasePaintHolder other)\r\n\t\t{\r\n\t\t\tvar otherPaint = other as GenericCustomPaintHolder;\r\n\t\t\treturn (otherPaint != null) &amp;&amp; (otherPaint.materialId == materialId) &amp;&amp; HSBColor.EqualsOpaque(otherPaint.hsb, hsb);\r\n\t\t}\r\n\t}\r\n\r\n\t[ProtoMember(1)]\r\n\tpublic List&lt;BaseBodyPaintHolder&gt; bodyPaints = null;\r\n\t[ProtoMember(2)]\r\n\tpublic List&lt;BaseWheelPaintHolder&gt; frontWheelPaints = null;\r\n\t[ProtoMember(3)]\r\n\tpublic List&lt;BaseWheelPaintHolder&gt; rearWheelPaints = null;\r\n\t[ProtoMember(4)]\r\n\tpublic List&lt;BaseSuspensionPaintHolder&gt; suspensionPaints = null;\r\n\t[ProtoMember(5)]\r\n\tpublic BaseGlassPaintHolder glassPaint = null;\r\n\t[ProtoMember(6)]\r\n\tpublic BaseSmokePaintHolder smokePaint = null;\r\n\t[ProtoMember(14)]\r\n\tpublic BaseGenericPaintHolder genericPaint = null;\r\n\t[ProtoMember(15)]\r\n\tpublic List&lt;BaseInteriorPaintHolder&gt; interiorPaints = null;\r\n\t[ProtoMember(16)]\r\n\tpublic List&lt;BaseGlassPaintHolder&gt; lightGlassesPaints = null;\r\n\t[ProtoMember(7)]\r\n\tpublic Dictionary&lt;WheelAxles, int&gt; wheelTires = null;\r\n\r\n\t[ProtoMember(8)]\r\n\tpublic List&lt;BodyPartHolder&gt; bodyParts = null;\r\n\t[ProtoMember(9)]\r\n\tpublic int frontRimPartId = 1;\r\n\t[ProtoMember(10)]\r\n\tpublic int rearRimPartId = 1;\r\n\t[ProtoMember(11)]\r\n\tpublic int bodyKitId;\r\n\r\n\t[ProtoMember(12)]\r\n\tpublic List&lt;VinylLayer&gt; vinylLayers = null;\r\n\r\n\t[ProtoMember(13)]\r\n\tpublic string workshopItemId = null;\r\n\r\n\tpublic VisualSettings()\r\n\t{\r\n\t\tbodyPaints = new List&lt;BaseBodyPaintHolder&gt;();\r\n\t\trearWheelPaints = new List&lt;BaseWheelPaintHolder&gt;();\r\n\t\tfrontWheelPaints = new List&lt;BaseWheelPaintHolder&gt;();\r\n\t\tsuspensionPaints = new List&lt;BaseSuspensionPaintHolder&gt;();\r\n\t\tinteriorPaints = new List&lt;BaseInteriorPaintHolder&gt;();\r\n\t\tlightGlassesPaints = new List&lt;BaseGlassPaintHolder&gt;();\r\n\t\tbodyParts = new List&lt;BodyPartHolder&gt;();\r\n\t\tvinylLayers = new List&lt;VinylLayer&gt;();\r\n\t\twheelTires = new Dictionary&lt;WheelAxles, int&gt;();\r\n\t}\r\n\r\n\tpublic VisualSettings(VisualSettings copyFrom)\r\n\t{\r\n\t\tbodyPaints = new List&lt;BaseBodyPaintHolder&gt;(copyFrom.bodyPaints);\r\n\t\trearWheelPaints = new List&lt;BaseWheelPaintHolder&gt;(copyFrom.rearWheelPaints);\r\n\t\tfrontWheelPaints = new List&lt;BaseWheelPaintHolder&gt;(copyFrom.frontWheelPaints);\r\n\t\tsuspensionPaints = new List&lt;BaseSuspensionPaintHolder&gt;(copyFrom.suspensionPaints);\r\n\t\tinteriorPaints = new List&lt;BaseInteriorPaintHolder&gt;(copyFrom.interiorPaints);\r\n\t\tlightGlassesPaints = new List&lt;BaseGlassPaintHolder&gt;(copyFrom.lightGlassesPaints);\r\n\t\tbodyParts  = new List&lt;BodyPartHolder&gt;(copyFrom.bodyParts);\r\n\t\tvinylLayers = new List&lt;VinylLayer&gt;(copyFrom.vinylLayers);\r\n\t\twheelTires = new Dictionary&lt;WheelAxles, int&gt;(copyFrom.wheelTires);\r\n\t\tglassPaint = copyFrom.glassPaint;\r\n\t\tsmokePaint = copyFrom.smokePaint;\r\n\t\tgenericPaint = copyFrom.genericPaint;\r\n\t\tfrontRimPartId = copyFrom.frontRimPartId;\r\n\t\trearRimPartId = copyFrom.rearRimPartId;\r\n\t\tbodyKitId = copyFrom.bodyKitId;\r\n\t\tworkshopItemId = copyFrom.workshopItemId;\r\n\t}\r\n\r\n}\r\n```\r\n\r\nI generated .proto file via ```Serializer.GetProto&lt;VisualSettings&gt;()``` and generate Java classes (for second one app) with using that .proto file. \r\nProto file genereted by protobuf-net:\r\n```\r\nsyntax = &quot;proto2&quot;;\r\n\r\npackage visual_settings;\r\n\r\noption java_multiple_files = true;\r\noption java_package = &quot;com.test&quot;;\r\noption java_outer_classname = &quot;VisualSettingsProto&quot;;\r\n\r\nmessage BaseBodyPaintHolder {\r\n  optional BodyPartType part = 1 [default = Chassis];\r\n  // the following represent sub-types; at most 1 should have a value\r\n  optional BodyPaintHolder BodyPaintHolder = 100;\r\n  optional BodyCustomPaintHolder BodyCustomPaintHolder = 200;\r\n}\r\nmessage BaseGenericPaintHolder {\r\n  // the following represent sub-types; at most 1 should have a value\r\n  optional GenericPaintHolder GenericPaintHolder = 100;\r\n  optional GenericCustomPaintHolder GenericCustomPaintHolder = 200;\r\n}\r\nmessage BaseGlassPaintHolder {\r\n  optional GlassPaintPart part = 1 [default = Glasses];\r\n  // the following represent sub-types; at most 1 should have a value\r\n  optional GlassPaintHolder GlassPaintHolder = 100;\r\n  optional GlassCustomPaintHolder GlassCustomPaintHolder = 200;\r\n}\r\nmessage BaseInteriorPaintHolder {\r\n  optional InteriorPaintPart part = 1 [default = SteeringWheelAlcantar];\r\n  // the following represent sub-types; at most 1 should have a value\r\n  optional InteriorPaintHolder InteriorPaintHolder = 100;\r\n  optional InteriorCustomPaintHolder InteriorCustomPaintHolder = 200;\r\n}\r\nmessage BasePaintHolder {\r\n  optional int32 materialId = 1 [default = 0];\r\n  // the following represent sub-types; at most 1 should have a value\r\n  optional BaseBodyPaintHolder BaseBodyPaintHolder = 100;\r\n  optional BaseWheelPaintHolder BaseWheelPaintHolder = 200;\r\n  optional BaseGlassPaintHolder BaseGlassPaintHolder = 300;\r\n  optional BaseSmokePaintHolder BaseSmokePaintHolder = 400;\r\n  optional BaseSuspensionPaintHolder BaseSuspensionPaintHolder = 500;\r\n  optional BaseInteriorPaintHolder BaseInteriorPaintHolder = 600;\r\n}\r\nmessage BaseSmokePaintHolder {\r\n  // the following represent sub-types; at most 1 should have a value\r\n  optional SmokePaintHolder SmokePaintHolder = 100;\r\n  optional SmokeCustomPaintHolder SmokeCustomPaintHolder = 200;\r\n}\r\nmessage BaseSuspensionPaintHolder {\r\n  optional SuspensionPaintPart part = 1 [default = Arm];\r\n  // the following represent sub-types; at most 1 should have a value\r\n  optional SuspensionPaintHolder SuspensionPaintHolder = 100;\r\n  optional SuspensionCustomPaintHolder SuspensionCustomPaintHolder = 200;\r\n}\r\nmessage BaseWheelPaintHolder {\r\n  optional WheelPaintPart part = 1 [default = SpokeFront];\r\n  // the following represent sub-types; at most 1 should have a value\r\n  optional WheelPaintHolder WheelPaintHolder = 100;\r\n  optional WheelCustomPaintHolder WheelCustomPaintHolder = 200;\r\n}\r\nmessage BodyCustomPaintHolder {\r\n  optional HSBColor hsb = 1;\r\n}\r\nmessage BodyPaintHolder {\r\n  optional int32 id = 1 [default = 0];\r\n}\r\nmessage BodyPartHolder {\r\n  optional BodyPartType type = 1 [default = Chassis];\r\n  optional int32 id = 2 [default = 0];\r\n}\r\nenum BodyPartType {\r\n  Chassis = 0;\r\n  BumperFront = 1;\r\n  BumperRear = 2;\r\n  Skirts = 3;\r\n  Doors = 4;\r\n  Roof = 5;\r\n  Mirrors = 6;\r\n  Bonnet = 7;\r\n  Trunk = 8;\r\n  Spoiler = 9;\r\n  LightsFront = 10;\r\n  LightsRear = 11;\r\n  Exhaust = 12;\r\n  Cage = 13;\r\n  Suspension = 14;\r\n  Interior = 15;\r\n  SeatLeft = 16;\r\n  SeatRight = 17;\r\n  SteeringWheel = 18;\r\n  Handbrake = 19;\r\n  Shifter = 20;\r\n  Dashboard = 21;\r\n  Engine = 22;\r\n  BlobShadow = 23;\r\n}\r\nmessage GenericCustomPaintHolder {\r\n  optional HSBColor hsb = 1;\r\n}\r\nmessage GenericPaintHolder {\r\n  optional int32 id = 1 [default = 0];\r\n}\r\nmessage GlassCustomPaintHolder {\r\n  optional HSBColor hsb = 1;\r\n}\r\nmessage GlassPaintHolder {\r\n  optional int32 id = 1 [default = 0];\r\n}\r\nenum GlassPaintPart {\r\n  Glasses = 0;\r\n  FrontLight = 1;\r\n  RearLight = 2;\r\n  FogLight = 3;\r\n}\r\nmessage HSBColor {\r\n  optional float h = 1 [default = 0];\r\n  optional float s = 2 [default = 0];\r\n  optional float b = 3 [default = 0];\r\n  optional float a = 4 [default = 0];\r\n}\r\nmessage InteriorCustomPaintHolder {\r\n  optional HSBColor hsb = 1;\r\n}\r\nmessage InteriorPaintHolder {\r\n  optional int32 id = 1 [default = 0];\r\n}\r\nenum InteriorPaintPart {\r\n  SteeringWheelAlcantar = 0;\r\n  SteeringWheelStrings = 1;\r\n  SteeringWheelSpokes = 2;\r\n  LeftSeatBase = 3;\r\n  LeftSeatBottom = 4;\r\n  RightSeatBase = 5;\r\n  RightSeatBottom = 6;\r\n  GearBoxHandle = 7;\r\n  HandbrakeHandle = 8;\r\n}\r\nmessage KeyValuePair_WheelAxles_Int32 {\r\n  optional WheelAxles Key = 1;\r\n  optional int32 Value = 2;\r\n}\r\nmessage SmokeCustomPaintHolder {\r\n  optional HSBColor hsb = 1;\r\n}\r\nmessage SmokePaintHolder {\r\n  optional int32 id = 1 [default = 0];\r\n}\r\nmessage SuspensionCustomPaintHolder {\r\n  optional HSBColor hsb = 1;\r\n}\r\nmessage SuspensionPaintHolder {\r\n  optional int32 id = 1 [default = 0];\r\n}\r\nenum SuspensionPaintPart {\r\n  Arm = 0;\r\n  Rack = 1;\r\n  Spring = 2;\r\n  BrakeCaliper = 3;\r\n}\r\nmessage VinylLayerSurrogate {\r\n  optional int32 rawId = 1 [default = 0];\r\n  optional float angle = 2 [default = 0];\r\n  optional bool isSymmetry = 3 [default = false];\r\n  optional bool isHorizontalFlip = 4 [default = false];\r\n  optional bool isVerticalFlip = 5 [default = false];\r\n  optional bool isPassThrough = 6 [default = false];\r\n  optional bytes colors = 7;\r\n  optional bytes transform = 8;\r\n  optional int32 groupMask = 9 [default = 0];\r\n  optional float clipMaskShift = 10 [default = 0];\r\n}\r\nmessage VisualSettings {\r\n  repeated BasePaintHolder bodyPaints = 1;\r\n  repeated BasePaintHolder frontWheelPaints = 2;\r\n  repeated BasePaintHolder rearWheelPaints = 3;\r\n  repeated BasePaintHolder suspensionPaints = 4;\r\n  optional BasePaintHolder glassPaint = 5;\r\n  optional BasePaintHolder smokePaint = 6;\r\n  repeated KeyValuePair_WheelAxles_Int32 wheelTires = 7;\r\n  repeated BodyPartHolder bodyParts = 8;\r\n  optional int32 frontRimPartId = 9 [default = 0];\r\n  optional int32 rearRimPartId = 10 [default = 0];\r\n  optional int32 bodyKitId = 11 [default = 0];\r\n  repeated VinylLayerSurrogate vinylLayers = 12;\r\n  optional string workshopItemId = 13;\r\n  optional BaseGenericPaintHolder genericPaint = 14;\r\n  repeated BasePaintHolder interiorPaints = 15;\r\n  repeated BasePaintHolder lightGlassesPaints = 16;\r\n}\r\nenum WheelAxles {\r\n  Front = 0;\r\n  Rear = 1;\r\n}\r\nmessage WheelCustomPaintHolder {\r\n  optional HSBColor hsb = 1;\r\n}\r\nmessage WheelPaintHolder {\r\n  optional int32 id = 1 [default = 0];\r\n}\r\nenum WheelPaintPart {\r\n  SpokeFront = 0;\r\n  SpokeRear = 1;\r\n  RimFront = 2;\r\n  RimRear = 3;\r\n}\r\n\r\n```\r\n\r\nWith generated java classes I can deserialize data from C# without problems, but when I&#39;m serialising data (VisualSetting) on Java side, C# couldn&#39;t deserialize it, I&#39;m receiving the error:\r\n```ProtoException: No parameterless constructor found for BasePaintHolder```.\r\nBut java can deserialize own serialized data. \r\nI&#39;m suspecting, what protobuf-net generated .proto template not in right way. Could I improve my .proto file? Or I&#39;m doing something wrong?","title":"Serialization / Desealization via protobuf-net between C# and Java","body":"<p>I have 2 applications using protobuf in between. First one (C#) using protobuf-net with serializable object VisualSettings:</p>\n<pre><code>[ProtoContract]\npublic class VisualSettings\n{\n    [ProtoContract]\n    public class BodyPartHolder\n    {\n        [ProtoMember(1)]\n        public BodyPartType type;\n        [ProtoMember(2)]\n        public int id;\n\n        public BodyPartHolder() { }\n        public BodyPartHolder(BodyPartType type, int id)\n        {\n            this.type = type;\n            this.id = id;\n        }\n\n        public BodyPartHolder Copy()\n        {\n            return new BodyPartHolder(type, id);\n        }\n    }\n\n    public interface IPaintHolder\n    {\n        int id { get; set; }\n    }\n\n    public interface ICustomPaintHolder\n    {\n        HSBColor hsb { get; set; }\n    }\n\n    [ProtoContract]\n    [ProtoInclude(100, typeof(BaseBodyPaintHolder)), ProtoInclude(200, typeof(BaseWheelPaintHolder)), ProtoInclude(300, typeof(BaseGlassPaintHolder))]\n    [ProtoInclude(400, typeof(BaseSmokePaintHolder)), ProtoInclude(500, typeof(BaseSuspensionPaintHolder)), ProtoInclude(600, typeof(BaseInteriorPaintHolder))]\n    public abstract class BasePaintHolder\n    {\n        [JsonIgnore]\n        public bool isCustom =&gt; this is ICustomPaintHolder;\n        [JsonIgnore]\n        public string materialName =&gt; CarPaintMaterials.GetName(material);\n        [JsonIgnore]\n        public CarPaintType material =&gt; materials[materialId];\n\n        [ProtoMember(1)]\n        public int materialId;\n\n        protected abstract CarPaintType[] materials { get; }\n\n        public BasePaintHolder() { }\n        public BasePaintHolder(int materialId)\n        {\n            this.materialId = materialId;\n        }\n\n        public virtual float GetCategoryCostCoefficient(CarSharedMeta carMeta)\n        {\n            return BasePaintItem.DefaultCostCoefficient;\n        }\n\n        public float GetMaterialCostCoefficient(CarSharedMeta carMeta)\n        {\n            return carMeta.GetPaintMaterialCostCoefficient(material);\n        }\n\n        public abstract bool Equals(BasePaintHolder other);\n    }\n\n    [ProtoContract]\n    [ProtoInclude(100, typeof(BodyPaintHolder)), ProtoInclude(200, typeof(BodyCustomPaintHolder))]\n    public abstract class BaseBodyPaintHolder : BasePaintHolder\n    {\n        [ProtoMember(1)]\n        public BodyPartType part;\n\n        protected override CarPaintType[] materials =&gt; CarPaintMaterials.Body;\n\n        public BaseBodyPaintHolder() { }\n        public BaseBodyPaintHolder(BodyPartType part, int materialId) : base(materialId)\n        {\n            this.part = part;\n        }\n\n        public override float GetCategoryCostCoefficient(CarSharedMeta carMeta)\n        {\n            return carMeta.GetPaintCategoryCostCoefficient(part);\n        }\n\n        public abstract BaseBodyPaintHolder Copy();\n    }\n\n    [ProtoContract]\n    public class BodyPaintHolder : BaseBodyPaintHolder, IPaintHolder\n    {\n        [ProtoMember(1)]\n        public int id { get; set; }\n\n        public BodyPaintHolder() { }\n        public BodyPaintHolder(BodyPartType part, int materialId, int id) : base(part, materialId)\n        {\n            this.id = id;\n        }\n\n        public override BaseBodyPaintHolder Copy()\n        {\n            return new BodyPaintHolder(part, materialId, id);\n        }\n\n        public override bool Equals(BasePaintHolder other)\n        {\n            var otherPaint = other as BodyPaintHolder;\n            return (otherPaint != null) &amp;&amp; (otherPaint.part == part) &amp;&amp; (otherPaint.materialId == materialId) &amp;&amp; (otherPaint.id == id);\n        }\n    }\n\n    [ProtoContract]\n    public class BodyCustomPaintHolder : BaseBodyPaintHolder, ICustomPaintHolder\n    {\n        [ProtoMember(1)]\n        public HSBColor hsb { get; set; }\n\n        public BodyCustomPaintHolder() { }\n        public BodyCustomPaintHolder(BodyPartType part, int materialId, HSBColor hsb) : base(part, materialId)\n        {\n            this.hsb = hsb;\n        }\n\n        public override BaseBodyPaintHolder Copy()\n        {\n            return new BodyCustomPaintHolder(part, materialId, hsb);\n        }\n\n        public override bool Equals(BasePaintHolder other)\n        {\n            var otherPaint = other as BodyCustomPaintHolder;\n            return (otherPaint != null) &amp;&amp; (otherPaint.part == part) &amp;&amp; (otherPaint.materialId == materialId) &amp;&amp; HSBColor.EqualsOpaque(otherPaint.hsb, hsb);\n        }\n    }\n\n    [ProtoContract]\n    [ProtoInclude(100, typeof(WheelPaintHolder)), ProtoInclude(200, typeof(WheelCustomPaintHolder))]\n    public abstract class BaseWheelPaintHolder : BasePaintHolder\n    {\n        [ProtoMember(1)]\n        public WheelPaintPart part;\n\n        protected override CarPaintType[] materials =&gt; CarPaintMaterials.Wheel;\n\n        public BaseWheelPaintHolder() { }\n        public BaseWheelPaintHolder(WheelPaintPart part, int materialId) : base(materialId)\n        {\n            this.part = part;\n        }\n\n        public abstract BaseWheelPaintHolder Copy();\n    }\n\n    [ProtoContract]\n    public class WheelPaintHolder : BaseWheelPaintHolder, IPaintHolder\n    {\n        [ProtoMember(1)]\n        public int id { get; set; }\n\n        public WheelPaintHolder() { }\n        public WheelPaintHolder(WheelPaintPart part, int materialId, int id) : base(part, materialId)\n        {\n            this.id = id;\n        }\n\n        public override BaseWheelPaintHolder Copy()\n        {\n            return new WheelPaintHolder(part, materialId, id);\n        }\n\n        public override bool Equals(BasePaintHolder other)\n        {\n            var otherPaint = other as WheelPaintHolder;\n            return (otherPaint != null) &amp;&amp; (otherPaint.part == part) &amp;&amp; (otherPaint.materialId == materialId) &amp;&amp; (otherPaint.id == id);\n        }\n    }\n\n    [ProtoContract]\n    public class WheelCustomPaintHolder : BaseWheelPaintHolder, ICustomPaintHolder\n    {\n        [ProtoMember(1)]\n        public HSBColor hsb { get; set; }\n\n        public WheelCustomPaintHolder() { }\n        public WheelCustomPaintHolder(WheelPaintPart part, int materialId, HSBColor hsb) : base(part, materialId)\n        {\n            this.hsb = hsb;\n        }\n\n        public override BaseWheelPaintHolder Copy()\n        {\n            return new WheelCustomPaintHolder(part, materialId, hsb);\n        }\n\n        public override bool Equals(BasePaintHolder other)\n        {\n            var otherPaint = other as WheelCustomPaintHolder;\n            return (otherPaint != null) &amp;&amp; (otherPaint.part == part) &amp;&amp; (otherPaint.materialId == materialId) &amp;&amp; HSBColor.EqualsOpaque(otherPaint.hsb, hsb);\n        }\n    }\n\n    [ProtoContract]\n    [ProtoInclude(100, typeof(GlassPaintHolder)), ProtoInclude(200, typeof(GlassCustomPaintHolder))]\n    public abstract class BaseGlassPaintHolder : BasePaintHolder\n    {\n        [ProtoMember(1)]\n        public GlassPaintPart part { get; set; }\n        \n        protected override CarPaintType[] materials =&gt; CarPaintMaterials.Glass;\n\n        public BaseGlassPaintHolder() { }\n\n        public BaseGlassPaintHolder(GlassPaintPart part, int materialId) : base(materialId)\n        {\n            this.part = part;\n        }\n\n        public abstract BaseGlassPaintHolder Copy();\n    }\n\n    [ProtoContract]\n    public class GlassPaintHolder : BaseGlassPaintHolder, IPaintHolder\n    {\n        [ProtoMember(1)]\n        public int id { get; set; }\n\n        public GlassPaintHolder() { }\n        public GlassPaintHolder(GlassPaintPart part, int materialId, int id) : base(part, materialId)\n        {\n            this.id = id;\n        }\n\n        public override BaseGlassPaintHolder Copy()\n        {\n            return new GlassPaintHolder(part, materialId, id);\n        }\n\n        public override bool Equals(BasePaintHolder other)\n        {\n            var otherPaint = other as GlassPaintHolder;\n            return (otherPaint != null) &amp;&amp; (otherPaint.materialId == materialId) &amp;&amp; (otherPaint.id == id);\n        }\n    }\n\n    [ProtoContract]\n    public class GlassCustomPaintHolder : BaseGlassPaintHolder, ICustomPaintHolder\n    {\n        [ProtoMember(1)]\n        public HSBColor hsb { get; set; }\n\n        public GlassCustomPaintHolder() { }\n        public GlassCustomPaintHolder(GlassPaintPart part, int materialId, HSBColor hsb) : base(part, materialId)\n        {\n            this.hsb = hsb;\n        }\n\n        public override BaseGlassPaintHolder Copy()\n        {\n            return new GlassCustomPaintHolder(part, materialId, hsb);\n        }\n\n        public override bool Equals(BasePaintHolder other)\n        {\n            var otherPaint = other as GlassCustomPaintHolder;\n            return (otherPaint != null) &amp;&amp; (otherPaint.materialId == materialId) &amp;&amp; HSBColor.EqualsOpaque(otherPaint.hsb, hsb);\n        }\n    }\n\n    [ProtoContract]\n    [ProtoInclude(100, typeof(SmokePaintHolder)), ProtoInclude(200, typeof(SmokeCustomPaintHolder))]\n    public abstract class BaseSmokePaintHolder : BasePaintHolder\n    {\n        protected override CarPaintType[] materials =&gt; CarPaintMaterials.Smoke;\n\n        public BaseSmokePaintHolder() { }\n        public BaseSmokePaintHolder(int materialId) : base(materialId) { }\n\n        public abstract BaseSmokePaintHolder Copy();\n    }\n\n    [ProtoContract]\n    public class SmokePaintHolder : BaseSmokePaintHolder, IPaintHolder\n    {\n        [ProtoMember(1)]\n        public int id { get; set; }\n\n        public SmokePaintHolder() { }\n        public SmokePaintHolder(int materialId, int id) : base(materialId)\n        {\n            this.id = id;\n        }\n\n        public override BaseSmokePaintHolder Copy()\n        {\n            return new SmokePaintHolder(materialId, id);\n        }\n\n        public override bool Equals(BasePaintHolder other)\n        {\n            var otherPaint = other as SmokePaintHolder;\n            return (otherPaint != null) &amp;&amp; (otherPaint.materialId == materialId) &amp;&amp; (otherPaint.id == id);\n        }\n    }\n\n    [ProtoContract]\n    public class SmokeCustomPaintHolder : BaseSmokePaintHolder, ICustomPaintHolder\n    {\n        [ProtoMember(1)]\n        public HSBColor hsb { get; set; }\n\n        public SmokeCustomPaintHolder() { }\n        public SmokeCustomPaintHolder(int materialId, HSBColor hsb) : base(materialId)\n        {\n            this.hsb = hsb;\n        }\n\n        public override BaseSmokePaintHolder Copy()\n        {\n            return new SmokeCustomPaintHolder(materialId, hsb);\n        }\n\n        public override bool Equals(BasePaintHolder other)\n        {\n            var otherPaint = other as SmokeCustomPaintHolder;\n            return (otherPaint != null) &amp;&amp; (otherPaint.materialId == materialId) &amp;&amp; HSBColor.EqualsOpaque(otherPaint.hsb, hsb);\n        }\n    }\n\n    [ProtoContract]\n    [ProtoInclude(100, typeof(SuspensionPaintHolder)), ProtoInclude(200, typeof(SuspensionCustomPaintHolder))]\n    public abstract class BaseSuspensionPaintHolder : BasePaintHolder\n    {\n        [ProtoMember(1)]\n        public SuspensionPaintPart part { get; set; }\n\n        protected override CarPaintType[] materials =&gt; CarPaintMaterials.Suspension;\n\n        public BaseSuspensionPaintHolder() { }\n        public BaseSuspensionPaintHolder(SuspensionPaintPart part, int materialId) : base(materialId)\n        {\n            this.part = part;\n        }\n\n        public override float GetCategoryCostCoefficient(CarSharedMeta carMeta)\n        {\n            return carMeta.GetPaintCategoryCostCoefficient(BodyPartType.Suspension);\n        }\n\n        public abstract BaseSuspensionPaintHolder Copy();\n    }\n\n    [ProtoContract]\n    public class SuspensionPaintHolder : BaseSuspensionPaintHolder, IPaintHolder\n    {\n        [ProtoMember(1)]\n        public int id { get; set; }\n\n        public SuspensionPaintHolder() { }\n        public SuspensionPaintHolder(SuspensionPaintPart part, int id, int materialId) : base(part, materialId)\n        {\n            this.id = id;\n        }\n\n        public override BaseSuspensionPaintHolder Copy()\n        {\n            return new SuspensionPaintHolder(part, id, materialId);\n        }\n\n        public override bool Equals(BasePaintHolder other)\n        {\n            var otherPaint = other as SuspensionPaintHolder;\n            return (otherPaint != null) &amp;&amp; (otherPaint.materialId == materialId) &amp;&amp; (otherPaint.id == id);\n        }\n    }\n\n    [ProtoContract]\n    public class SuspensionCustomPaintHolder : BaseSuspensionPaintHolder, ICustomPaintHolder\n    {\n        [ProtoMember(1)]\n        public HSBColor hsb { get; set; }\n\n        public SuspensionCustomPaintHolder() { }\n        public SuspensionCustomPaintHolder(SuspensionPaintPart part, HSBColor hsb, int materialId) : base(part, materialId)\n        {\n            this.hsb = hsb;\n        }\n\n        public override BaseSuspensionPaintHolder Copy()\n        {\n            return new SuspensionCustomPaintHolder(part, hsb, materialId);\n        }\n\n        public override bool Equals(BasePaintHolder other)\n        {\n            var otherPaint = other as SuspensionCustomPaintHolder;\n            return (otherPaint != null) &amp;&amp; (otherPaint.materialId == materialId) &amp;&amp; HSBColor.EqualsOpaque(otherPaint.hsb, hsb);\n        }\n    }\n\n    [ProtoContract]\n    [ProtoInclude(100, typeof(InteriorPaintHolder)), ProtoInclude(200, typeof(InteriorCustomPaintHolder))]\n    public abstract class BaseInteriorPaintHolder : BasePaintHolder\n    {\n        [ProtoMember(1)]\n        public InteriorPaintPart part { get; set; }\n\n        protected override CarPaintType[] materials =&gt; CarPaintMaterials.Interior;\n\n        public BaseInteriorPaintHolder() { }\n        public BaseInteriorPaintHolder(InteriorPaintPart part, int materialId) : base(materialId)\n        {\n            this.part = part;\n        }\n\n        public override float GetCategoryCostCoefficient(CarSharedMeta carMeta)\n        {\n            return carMeta.GetPaintCategoryCostCoefficient(BodyPartType.SeatLeft);\n        }\n\n        public abstract BaseInteriorPaintHolder Copy();\n    }\n\n    [ProtoContract]\n    public class InteriorPaintHolder : BaseInteriorPaintHolder, IPaintHolder\n    {\n        [ProtoMember(1)]\n        public int id { get; set; }\n\n        public InteriorPaintHolder() { }\n        public InteriorPaintHolder(InteriorPaintPart part, int id, int materialId) : base(part, materialId)\n        {\n            this.id = id;\n        }\n\n        public override BaseInteriorPaintHolder Copy()\n        {\n            return new InteriorPaintHolder(part, id, materialId);\n        }\n\n        public override bool Equals(BasePaintHolder other)\n        {\n            return (other is InteriorPaintHolder otherPaint) &amp;&amp; (otherPaint.materialId == materialId) &amp;&amp; (otherPaint.id == id);\n        }\n    }\n\n    [ProtoContract]\n    public class InteriorCustomPaintHolder : BaseInteriorPaintHolder, ICustomPaintHolder\n    {\n        [ProtoMember(1)]\n        public HSBColor hsb { get; set; }\n\n        public InteriorCustomPaintHolder() { }\n        public InteriorCustomPaintHolder(InteriorPaintPart part, HSBColor hsb, int materialId) : base(part, materialId)\n        {\n            this.hsb = hsb;\n        }\n\n        public override BaseInteriorPaintHolder Copy()\n        {\n            return new InteriorCustomPaintHolder(part, hsb, materialId);\n        }\n\n        public override bool Equals(BasePaintHolder other)\n        {\n            return (other is InteriorCustomPaintHolder otherPaint) &amp;&amp; (otherPaint.materialId == materialId) &amp;&amp; HSBColor.EqualsOpaque(otherPaint.hsb, hsb);\n        }\n    }\n\n    [ProtoContract]\n    [ProtoInclude(100, typeof(GenericPaintHolder)), ProtoInclude(200, typeof(GenericCustomPaintHolder))]\n    public abstract class BaseGenericPaintHolder : BasePaintHolder\n    {\n        protected override CarPaintType[] materials =&gt; CarPaintMaterials.Generic;\n\n        public BaseGenericPaintHolder() { }\n        public BaseGenericPaintHolder(int materialId) : base(materialId) { }\n\n        public abstract BaseGenericPaintHolder Copy();\n    }\n\n    [ProtoContract]\n    public class GenericPaintHolder : BaseGenericPaintHolder, IPaintHolder\n    {\n        [ProtoMember(1)]\n        public int id { get; set; }\n\n        public GenericPaintHolder() { }\n        public GenericPaintHolder(int materialId, int id) : base(materialId)\n        {\n            this.id = id;\n        }\n\n        public override BaseGenericPaintHolder Copy()\n        {\n            return new GenericPaintHolder(materialId, id);\n        }\n\n        public override bool Equals(BasePaintHolder other)\n        {\n            var otherPaint = other as GenericPaintHolder;\n            return (otherPaint != null) &amp;&amp; (otherPaint.materialId == materialId) &amp;&amp; (otherPaint.id == id);\n        }\n    }\n\n    [ProtoContract]\n    public class GenericCustomPaintHolder : BaseGenericPaintHolder, ICustomPaintHolder\n    {\n        [ProtoMember(1)]\n        public HSBColor hsb { get; set; }\n\n        public GenericCustomPaintHolder() { }\n        public GenericCustomPaintHolder(int materialId, HSBColor hsb) : base(materialId)\n        {\n            this.hsb = hsb;\n        }\n\n        public override BaseGenericPaintHolder Copy()\n        {\n            return new GenericCustomPaintHolder(materialId, hsb);\n        }\n\n        public override bool Equals(BasePaintHolder other)\n        {\n            var otherPaint = other as GenericCustomPaintHolder;\n            return (otherPaint != null) &amp;&amp; (otherPaint.materialId == materialId) &amp;&amp; HSBColor.EqualsOpaque(otherPaint.hsb, hsb);\n        }\n    }\n\n    [ProtoMember(1)]\n    public List&lt;BaseBodyPaintHolder&gt; bodyPaints = null;\n    [ProtoMember(2)]\n    public List&lt;BaseWheelPaintHolder&gt; frontWheelPaints = null;\n    [ProtoMember(3)]\n    public List&lt;BaseWheelPaintHolder&gt; rearWheelPaints = null;\n    [ProtoMember(4)]\n    public List&lt;BaseSuspensionPaintHolder&gt; suspensionPaints = null;\n    [ProtoMember(5)]\n    public BaseGlassPaintHolder glassPaint = null;\n    [ProtoMember(6)]\n    public BaseSmokePaintHolder smokePaint = null;\n    [ProtoMember(14)]\n    public BaseGenericPaintHolder genericPaint = null;\n    [ProtoMember(15)]\n    public List&lt;BaseInteriorPaintHolder&gt; interiorPaints = null;\n    [ProtoMember(16)]\n    public List&lt;BaseGlassPaintHolder&gt; lightGlassesPaints = null;\n    [ProtoMember(7)]\n    public Dictionary&lt;WheelAxles, int&gt; wheelTires = null;\n\n    [ProtoMember(8)]\n    public List&lt;BodyPartHolder&gt; bodyParts = null;\n    [ProtoMember(9)]\n    public int frontRimPartId = 1;\n    [ProtoMember(10)]\n    public int rearRimPartId = 1;\n    [ProtoMember(11)]\n    public int bodyKitId;\n\n    [ProtoMember(12)]\n    public List&lt;VinylLayer&gt; vinylLayers = null;\n\n    [ProtoMember(13)]\n    public string workshopItemId = null;\n\n    public VisualSettings()\n    {\n        bodyPaints = new List&lt;BaseBodyPaintHolder&gt;();\n        rearWheelPaints = new List&lt;BaseWheelPaintHolder&gt;();\n        frontWheelPaints = new List&lt;BaseWheelPaintHolder&gt;();\n        suspensionPaints = new List&lt;BaseSuspensionPaintHolder&gt;();\n        interiorPaints = new List&lt;BaseInteriorPaintHolder&gt;();\n        lightGlassesPaints = new List&lt;BaseGlassPaintHolder&gt;();\n        bodyParts = new List&lt;BodyPartHolder&gt;();\n        vinylLayers = new List&lt;VinylLayer&gt;();\n        wheelTires = new Dictionary&lt;WheelAxles, int&gt;();\n    }\n\n    public VisualSettings(VisualSettings copyFrom)\n    {\n        bodyPaints = new List&lt;BaseBodyPaintHolder&gt;(copyFrom.bodyPaints);\n        rearWheelPaints = new List&lt;BaseWheelPaintHolder&gt;(copyFrom.rearWheelPaints);\n        frontWheelPaints = new List&lt;BaseWheelPaintHolder&gt;(copyFrom.frontWheelPaints);\n        suspensionPaints = new List&lt;BaseSuspensionPaintHolder&gt;(copyFrom.suspensionPaints);\n        interiorPaints = new List&lt;BaseInteriorPaintHolder&gt;(copyFrom.interiorPaints);\n        lightGlassesPaints = new List&lt;BaseGlassPaintHolder&gt;(copyFrom.lightGlassesPaints);\n        bodyParts  = new List&lt;BodyPartHolder&gt;(copyFrom.bodyParts);\n        vinylLayers = new List&lt;VinylLayer&gt;(copyFrom.vinylLayers);\n        wheelTires = new Dictionary&lt;WheelAxles, int&gt;(copyFrom.wheelTires);\n        glassPaint = copyFrom.glassPaint;\n        smokePaint = copyFrom.smokePaint;\n        genericPaint = copyFrom.genericPaint;\n        frontRimPartId = copyFrom.frontRimPartId;\n        rearRimPartId = copyFrom.rearRimPartId;\n        bodyKitId = copyFrom.bodyKitId;\n        workshopItemId = copyFrom.workshopItemId;\n    }\n\n}\n</code></pre>\n<p>I generated .proto file via <code>Serializer.GetProto&lt;VisualSettings&gt;()</code> and generate Java classes (for second one app) with using that .proto file.\nProto file genereted by protobuf-net:</p>\n<pre><code>syntax = &quot;proto2&quot;;\n\npackage visual_settings;\n\noption java_multiple_files = true;\noption java_package = &quot;com.test&quot;;\noption java_outer_classname = &quot;VisualSettingsProto&quot;;\n\nmessage BaseBodyPaintHolder {\n  optional BodyPartType part = 1 [default = Chassis];\n  // the following represent sub-types; at most 1 should have a value\n  optional BodyPaintHolder BodyPaintHolder = 100;\n  optional BodyCustomPaintHolder BodyCustomPaintHolder = 200;\n}\nmessage BaseGenericPaintHolder {\n  // the following represent sub-types; at most 1 should have a value\n  optional GenericPaintHolder GenericPaintHolder = 100;\n  optional GenericCustomPaintHolder GenericCustomPaintHolder = 200;\n}\nmessage BaseGlassPaintHolder {\n  optional GlassPaintPart part = 1 [default = Glasses];\n  // the following represent sub-types; at most 1 should have a value\n  optional GlassPaintHolder GlassPaintHolder = 100;\n  optional GlassCustomPaintHolder GlassCustomPaintHolder = 200;\n}\nmessage BaseInteriorPaintHolder {\n  optional InteriorPaintPart part = 1 [default = SteeringWheelAlcantar];\n  // the following represent sub-types; at most 1 should have a value\n  optional InteriorPaintHolder InteriorPaintHolder = 100;\n  optional InteriorCustomPaintHolder InteriorCustomPaintHolder = 200;\n}\nmessage BasePaintHolder {\n  optional int32 materialId = 1 [default = 0];\n  // the following represent sub-types; at most 1 should have a value\n  optional BaseBodyPaintHolder BaseBodyPaintHolder = 100;\n  optional BaseWheelPaintHolder BaseWheelPaintHolder = 200;\n  optional BaseGlassPaintHolder BaseGlassPaintHolder = 300;\n  optional BaseSmokePaintHolder BaseSmokePaintHolder = 400;\n  optional BaseSuspensionPaintHolder BaseSuspensionPaintHolder = 500;\n  optional BaseInteriorPaintHolder BaseInteriorPaintHolder = 600;\n}\nmessage BaseSmokePaintHolder {\n  // the following represent sub-types; at most 1 should have a value\n  optional SmokePaintHolder SmokePaintHolder = 100;\n  optional SmokeCustomPaintHolder SmokeCustomPaintHolder = 200;\n}\nmessage BaseSuspensionPaintHolder {\n  optional SuspensionPaintPart part = 1 [default = Arm];\n  // the following represent sub-types; at most 1 should have a value\n  optional SuspensionPaintHolder SuspensionPaintHolder = 100;\n  optional SuspensionCustomPaintHolder SuspensionCustomPaintHolder = 200;\n}\nmessage BaseWheelPaintHolder {\n  optional WheelPaintPart part = 1 [default = SpokeFront];\n  // the following represent sub-types; at most 1 should have a value\n  optional WheelPaintHolder WheelPaintHolder = 100;\n  optional WheelCustomPaintHolder WheelCustomPaintHolder = 200;\n}\nmessage BodyCustomPaintHolder {\n  optional HSBColor hsb = 1;\n}\nmessage BodyPaintHolder {\n  optional int32 id = 1 [default = 0];\n}\nmessage BodyPartHolder {\n  optional BodyPartType type = 1 [default = Chassis];\n  optional int32 id = 2 [default = 0];\n}\nenum BodyPartType {\n  Chassis = 0;\n  BumperFront = 1;\n  BumperRear = 2;\n  Skirts = 3;\n  Doors = 4;\n  Roof = 5;\n  Mirrors = 6;\n  Bonnet = 7;\n  Trunk = 8;\n  Spoiler = 9;\n  LightsFront = 10;\n  LightsRear = 11;\n  Exhaust = 12;\n  Cage = 13;\n  Suspension = 14;\n  Interior = 15;\n  SeatLeft = 16;\n  SeatRight = 17;\n  SteeringWheel = 18;\n  Handbrake = 19;\n  Shifter = 20;\n  Dashboard = 21;\n  Engine = 22;\n  BlobShadow = 23;\n}\nmessage GenericCustomPaintHolder {\n  optional HSBColor hsb = 1;\n}\nmessage GenericPaintHolder {\n  optional int32 id = 1 [default = 0];\n}\nmessage GlassCustomPaintHolder {\n  optional HSBColor hsb = 1;\n}\nmessage GlassPaintHolder {\n  optional int32 id = 1 [default = 0];\n}\nenum GlassPaintPart {\n  Glasses = 0;\n  FrontLight = 1;\n  RearLight = 2;\n  FogLight = 3;\n}\nmessage HSBColor {\n  optional float h = 1 [default = 0];\n  optional float s = 2 [default = 0];\n  optional float b = 3 [default = 0];\n  optional float a = 4 [default = 0];\n}\nmessage InteriorCustomPaintHolder {\n  optional HSBColor hsb = 1;\n}\nmessage InteriorPaintHolder {\n  optional int32 id = 1 [default = 0];\n}\nenum InteriorPaintPart {\n  SteeringWheelAlcantar = 0;\n  SteeringWheelStrings = 1;\n  SteeringWheelSpokes = 2;\n  LeftSeatBase = 3;\n  LeftSeatBottom = 4;\n  RightSeatBase = 5;\n  RightSeatBottom = 6;\n  GearBoxHandle = 7;\n  HandbrakeHandle = 8;\n}\nmessage KeyValuePair_WheelAxles_Int32 {\n  optional WheelAxles Key = 1;\n  optional int32 Value = 2;\n}\nmessage SmokeCustomPaintHolder {\n  optional HSBColor hsb = 1;\n}\nmessage SmokePaintHolder {\n  optional int32 id = 1 [default = 0];\n}\nmessage SuspensionCustomPaintHolder {\n  optional HSBColor hsb = 1;\n}\nmessage SuspensionPaintHolder {\n  optional int32 id = 1 [default = 0];\n}\nenum SuspensionPaintPart {\n  Arm = 0;\n  Rack = 1;\n  Spring = 2;\n  BrakeCaliper = 3;\n}\nmessage VinylLayerSurrogate {\n  optional int32 rawId = 1 [default = 0];\n  optional float angle = 2 [default = 0];\n  optional bool isSymmetry = 3 [default = false];\n  optional bool isHorizontalFlip = 4 [default = false];\n  optional bool isVerticalFlip = 5 [default = false];\n  optional bool isPassThrough = 6 [default = false];\n  optional bytes colors = 7;\n  optional bytes transform = 8;\n  optional int32 groupMask = 9 [default = 0];\n  optional float clipMaskShift = 10 [default = 0];\n}\nmessage VisualSettings {\n  repeated BasePaintHolder bodyPaints = 1;\n  repeated BasePaintHolder frontWheelPaints = 2;\n  repeated BasePaintHolder rearWheelPaints = 3;\n  repeated BasePaintHolder suspensionPaints = 4;\n  optional BasePaintHolder glassPaint = 5;\n  optional BasePaintHolder smokePaint = 6;\n  repeated KeyValuePair_WheelAxles_Int32 wheelTires = 7;\n  repeated BodyPartHolder bodyParts = 8;\n  optional int32 frontRimPartId = 9 [default = 0];\n  optional int32 rearRimPartId = 10 [default = 0];\n  optional int32 bodyKitId = 11 [default = 0];\n  repeated VinylLayerSurrogate vinylLayers = 12;\n  optional string workshopItemId = 13;\n  optional BaseGenericPaintHolder genericPaint = 14;\n  repeated BasePaintHolder interiorPaints = 15;\n  repeated BasePaintHolder lightGlassesPaints = 16;\n}\nenum WheelAxles {\n  Front = 0;\n  Rear = 1;\n}\nmessage WheelCustomPaintHolder {\n  optional HSBColor hsb = 1;\n}\nmessage WheelPaintHolder {\n  optional int32 id = 1 [default = 0];\n}\nenum WheelPaintPart {\n  SpokeFront = 0;\n  SpokeRear = 1;\n  RimFront = 2;\n  RimRear = 3;\n}\n\n</code></pre>\n<p>With generated java classes I can deserialize data from C# without problems, but when I'm serialising data (VisualSetting) on Java side, C# couldn't deserialize it, I'm receiving the error:\n<code>ProtoException: No parameterless constructor found for BasePaintHolder</code>.\nBut java can deserialize own serialized data.\nI'm suspecting, what protobuf-net generated .proto template not in right way. Could I improve my .proto file? Or I'm doing something wrong?</p>\n"},{"tags":["java","data-structures","set","guava","bloom-filter"],"answers":[{"tags":[],"owner":{"account_id":364193,"reputation":27495,"user_id":708434,"accept_rate":70,"display_name":"Grzegorz Rożniecki"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1634731854,"creation_date":1634731854,"answer_id":69645750,"question_id":69644359,"body_markdown":"&gt; 1. Is putAll() the correct way to get the union of two bloom filters?\r\n\r\nYes, [`BloomFilter#putAll(BloomFilter)` JavaDoc][1] says:\r\n\r\n&gt; Combines this Bloom filter with another Bloom filter by performing a bitwise OR of the underlying data. The mutations happen to this instance. Callers must ensure the Bloom filters are appropriately sized to avoid saturating them.\r\n\r\nThe catch is that it&#39;ll throw `IllegalArgumentException - if isCompatible(that) == false`, so if you want to use this method you must make sure that [`isCompatible`][2] returns true:\r\n\r\n&gt; Determines whether a given Bloom filter is compatible with this Bloom filter. For two Bloom filters to be compatible, they must:\r\n&gt;  - not be the same instance\r\n&gt;  - have the same number of hash functions\r\n&gt;  - have the same bit size\r\n&gt;  - have the same strategy\r\n&gt;  - have equal funnels\r\n\r\nThat said, let&#39;s try to answer the second question and find an easier solution.\r\n\r\n&gt; 2. Is there a non-reflective way to get the intersection of two or more bloom filters?\r\n\r\nYes, you can use the fact that `BloomFilter`s implement [`Predicate`][3] and use its `.and()` and `.or()` methods, remembering that `mightContain` behavior depends on BloomFilter&#39;s parameters.\r\n\r\nExample:\r\n\r\n    // bloomFilter1: [0, 100], expected size 200, FPP 1%\r\n    BloomFilter&lt;Integer&gt; bloomFilter1 = IntStream.rangeClosed(0, 100)\r\n            .boxed()\r\n            .collect(toBloomFilter(Funnels.integerFunnel(), 200L, 0.01d));\r\n\r\n    // bloomFilter2: [80, 200], expected size 200, FPP 1%\r\n    BloomFilter&lt;Integer&gt; bloomFilter2 = IntStream.rangeClosed(80, 200)\r\n            .boxed()\r\n            .collect(toBloomFilter(Funnels.integerFunnel(), 200L, 0.01d));\r\n\r\n    // bloomFilter2: [80, 200], expected size 1000, FPP 0.1%\r\n    BloomFilter&lt;Integer&gt; bloomFilter3 = IntStream.rangeClosed(80, 200)\r\n            .boxed()\r\n            .collect(toBloomFilter(Funnels.integerFunnel(), 1000L, 0.001d));\r\n\r\n    assertThat(bloomFilter1.isCompatible(bloomFilter2)).isTrue(); // same parameters\r\n    assertThat(bloomFilter1.isCompatible(bloomFilter3)).isFalse(); // different parameters\r\n\r\n    BloomFilter&lt;Integer&gt; bloomFilterUnion = bloomFilter1.copy(); // preserves BF parameters\r\n    bloomFilterUnion.putAll(bloomFilter2);\r\n    // note that bloomFilterUnion.putAll(bloomFilter3) would throw IAE\r\n\r\n    // using AssertJ Predicate asserts https://joel-costigliola.github.io/assertj/core-8/api/org/assertj/core/api/PredicateAssert.html\r\n\r\n    // or == union == putAll\r\n    assertThat(bloomFilterUnion).accepts(90);\r\n    assertThat(bloomFilter1.or(bloomFilter2)).accepts(90);\r\n    assertThat(bloomFilter1.or(bloomFilter3)).accepts(90);\r\n    assertThat(bloomFilterUnion).accepts(42);\r\n    assertThat(bloomFilter1.or(bloomFilter2)).accepts(42);\r\n    assertThat(bloomFilter1.or(bloomFilter3)).accepts(42);\r\n    assertThat(bloomFilterUnion).accepts(180);\r\n    assertThat(bloomFilter1.or(bloomFilter2)).accepts(180);\r\n    assertThat(bloomFilter1.or(bloomFilter3)).accepts(180);\r\n    assertThat(bloomFilterUnion).rejects(300);\r\n    assertThat(bloomFilter1.or(bloomFilter2)).rejects(300);\r\n    assertThat(bloomFilter1.or(bloomFilter3)).rejects(300);\r\n\r\n    // and == intersection\r\n    assertThat(bloomFilter1.and(bloomFilter2)).accepts(90);\r\n    assertThat(bloomFilter1.and(bloomFilter3)).accepts(90);\r\n    assertThat(bloomFilter1.and(bloomFilter2)).rejects(42);\r\n    assertThat(bloomFilter1.and(bloomFilter3)).rejects(42);\r\n    assertThat(bloomFilter1.and(bloomFilter2)).rejects(180);\r\n    assertThat(bloomFilter1.and(bloomFilter3)).rejects(180);\r\n    assertThat(bloomFilter1.and(bloomFilter2)).rejects(300);\r\n    assertThat(bloomFilter1.and(bloomFilter3)).rejects(300);\r\n\r\n&gt; 3. In case one is okay with reflection, can we safely perform biwise operations (or, and) on the &#39;data&#39; field?\r\n\r\nI personally wouldn&#39;t mess with internals of any class, but here IMO there&#39;s no need to do so.\r\n\r\n\r\n  [1]: https://guava.dev/releases/31.0.1-jre/api/docs/com/google/common/hash/BloomFilter.html#putAll(com.google.common.hash.BloomFilter)\r\n  [2]: https://guava.dev/releases/31.0.1-jre/api/docs/com/google/common/hash/BloomFilter.html#isCompatible(com.google.common.hash.BloomFilter)\r\n  [3]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/function/Predicate.html","title":"Intersections and unions of Bloom filters in Java using the Guava library","body":"<blockquote>\n<ol>\n<li>Is putAll() the correct way to get the union of two bloom filters?</li>\n</ol>\n</blockquote>\n<p>Yes, <a href=\"https://guava.dev/releases/31.0.1-jre/api/docs/com/google/common/hash/BloomFilter.html#putAll(com.google.common.hash.BloomFilter)\" rel=\"nofollow noreferrer\"><code>BloomFilter#putAll(BloomFilter)</code> JavaDoc</a> says:</p>\n<blockquote>\n<p>Combines this Bloom filter with another Bloom filter by performing a bitwise OR of the underlying data. The mutations happen to this instance. Callers must ensure the Bloom filters are appropriately sized to avoid saturating them.</p>\n</blockquote>\n<p>The catch is that it'll throw <code>IllegalArgumentException - if isCompatible(that) == false</code>, so if you want to use this method you must make sure that <a href=\"https://guava.dev/releases/31.0.1-jre/api/docs/com/google/common/hash/BloomFilter.html#isCompatible(com.google.common.hash.BloomFilter)\" rel=\"nofollow noreferrer\"><code>isCompatible</code></a> returns true:</p>\n<blockquote>\n<p>Determines whether a given Bloom filter is compatible with this Bloom filter. For two Bloom filters to be compatible, they must:</p>\n<ul>\n<li>not be the same instance</li>\n<li>have the same number of hash functions</li>\n<li>have the same bit size</li>\n<li>have the same strategy</li>\n<li>have equal funnels</li>\n</ul>\n</blockquote>\n<p>That said, let's try to answer the second question and find an easier solution.</p>\n<blockquote>\n<ol start=\"2\">\n<li>Is there a non-reflective way to get the intersection of two or more bloom filters?</li>\n</ol>\n</blockquote>\n<p>Yes, you can use the fact that <code>BloomFilter</code>s implement <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/function/Predicate.html\" rel=\"nofollow noreferrer\"><code>Predicate</code></a> and use its <code>.and()</code> and <code>.or()</code> methods, remembering that <code>mightContain</code> behavior depends on BloomFilter's parameters.</p>\n<p>Example:</p>\n<pre><code>// bloomFilter1: [0, 100], expected size 200, FPP 1%\nBloomFilter&lt;Integer&gt; bloomFilter1 = IntStream.rangeClosed(0, 100)\n        .boxed()\n        .collect(toBloomFilter(Funnels.integerFunnel(), 200L, 0.01d));\n\n// bloomFilter2: [80, 200], expected size 200, FPP 1%\nBloomFilter&lt;Integer&gt; bloomFilter2 = IntStream.rangeClosed(80, 200)\n        .boxed()\n        .collect(toBloomFilter(Funnels.integerFunnel(), 200L, 0.01d));\n\n// bloomFilter2: [80, 200], expected size 1000, FPP 0.1%\nBloomFilter&lt;Integer&gt; bloomFilter3 = IntStream.rangeClosed(80, 200)\n        .boxed()\n        .collect(toBloomFilter(Funnels.integerFunnel(), 1000L, 0.001d));\n\nassertThat(bloomFilter1.isCompatible(bloomFilter2)).isTrue(); // same parameters\nassertThat(bloomFilter1.isCompatible(bloomFilter3)).isFalse(); // different parameters\n\nBloomFilter&lt;Integer&gt; bloomFilterUnion = bloomFilter1.copy(); // preserves BF parameters\nbloomFilterUnion.putAll(bloomFilter2);\n// note that bloomFilterUnion.putAll(bloomFilter3) would throw IAE\n\n// using AssertJ Predicate asserts https://joel-costigliola.github.io/assertj/core-8/api/org/assertj/core/api/PredicateAssert.html\n\n// or == union == putAll\nassertThat(bloomFilterUnion).accepts(90);\nassertThat(bloomFilter1.or(bloomFilter2)).accepts(90);\nassertThat(bloomFilter1.or(bloomFilter3)).accepts(90);\nassertThat(bloomFilterUnion).accepts(42);\nassertThat(bloomFilter1.or(bloomFilter2)).accepts(42);\nassertThat(bloomFilter1.or(bloomFilter3)).accepts(42);\nassertThat(bloomFilterUnion).accepts(180);\nassertThat(bloomFilter1.or(bloomFilter2)).accepts(180);\nassertThat(bloomFilter1.or(bloomFilter3)).accepts(180);\nassertThat(bloomFilterUnion).rejects(300);\nassertThat(bloomFilter1.or(bloomFilter2)).rejects(300);\nassertThat(bloomFilter1.or(bloomFilter3)).rejects(300);\n\n// and == intersection\nassertThat(bloomFilter1.and(bloomFilter2)).accepts(90);\nassertThat(bloomFilter1.and(bloomFilter3)).accepts(90);\nassertThat(bloomFilter1.and(bloomFilter2)).rejects(42);\nassertThat(bloomFilter1.and(bloomFilter3)).rejects(42);\nassertThat(bloomFilter1.and(bloomFilter2)).rejects(180);\nassertThat(bloomFilter1.and(bloomFilter3)).rejects(180);\nassertThat(bloomFilter1.and(bloomFilter2)).rejects(300);\nassertThat(bloomFilter1.and(bloomFilter3)).rejects(300);\n</code></pre>\n<blockquote>\n<ol start=\"3\">\n<li>In case one is okay with reflection, can we safely perform biwise operations (or, and) on the 'data' field?</li>\n</ol>\n</blockquote>\n<p>I personally wouldn't mess with internals of any class, but here IMO there's no need to do so.</p>\n"}],"owner":{"account_id":1635471,"reputation":166,"user_id":1509097,"display_name":"ranban282"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":541,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69645750,"answer_count":1,"score":1,"last_activity_date":1634731854,"creation_date":1634725847,"question_id":69644359,"body_markdown":"Bloom filters seem promising for a real-world problem I&#39;m working on. A popular java implementation seems to be Google&#39;s [guava][1] library. \r\n\r\nI need to use bloom filter&#39;s union operation, and an intersection operation would be good to have, but I can work around it. \r\n\r\nIn the java docs, I could find no method which performs intersection, while the putAll method seems to work like the union operation. \r\n\r\nSo my questions are these:\r\n1. Is putAll() the correct way to get the union of two bloom filters? \r\n2. Is there a non-reflective way to get the intersection of two or more bloom filters? \r\n3. In case one is okay with reflection, can we safely perform biwise operations (or, and) on the &#39;data&#39; field? \r\n\r\nIf someone could recommend any another popular and well-tested library which is available on maven&#39;s repository,and has intersection and union, that&#39;d also solve my needs. \r\n\r\n\r\n  [1]: https://guava.dev/releases/23.0/api/docs/com/google/common/hash/BloomFilter.html","title":"Intersections and unions of Bloom filters in Java using the Guava library","body":"<p>Bloom filters seem promising for a real-world problem I'm working on. A popular java implementation seems to be Google's <a href=\"https://guava.dev/releases/23.0/api/docs/com/google/common/hash/BloomFilter.html\" rel=\"nofollow noreferrer\">guava</a> library.</p>\n<p>I need to use bloom filter's union operation, and an intersection operation would be good to have, but I can work around it.</p>\n<p>In the java docs, I could find no method which performs intersection, while the putAll method seems to work like the union operation.</p>\n<p>So my questions are these:</p>\n<ol>\n<li>Is putAll() the correct way to get the union of two bloom filters?</li>\n<li>Is there a non-reflective way to get the intersection of two or more bloom filters?</li>\n<li>In case one is okay with reflection, can we safely perform biwise operations (or, and) on the 'data' field?</li>\n</ol>\n<p>If someone could recommend any another popular and well-tested library which is available on maven's repository,and has intersection and union, that'd also solve my needs.</p>\n"},{"tags":["java","swing"],"answers":[{"tags":[],"owner":{"account_id":16257655,"reputation":379,"user_id":11739931,"display_name":"retoen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1634731700,"creation_date":1634731700,"answer_id":69645719,"question_id":69643866,"body_markdown":"use `combo.setSelectedIndex(-1);` to unselect.\r\n[Source][1]\r\n\r\n\r\n  [1]: http://www.jidesoft.com/javadoc/com/jidesoft/combobox/MultiSelectListComboBox.html#setSelectedIndex(int)","title":"CheckBoxListComboBox unseelct the selection programatically","body":"<p>use <code>combo.setSelectedIndex(-1);</code> to unselect.\n<a href=\"http://www.jidesoft.com/javadoc/com/jidesoft/combobox/MultiSelectListComboBox.html#setSelectedIndex(int)\" rel=\"nofollow noreferrer\">Source</a></p>\n"}],"owner":{"account_id":399239,"reputation":10891,"user_id":764446,"accept_rate":69,"display_name":"junaidp"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":69645719,"answer_count":1,"score":-1,"last_activity_date":1634731700,"creation_date":1634723656,"question_id":69643866,"body_markdown":"I am using com.jidesoft.combobox.CheckBoxListComboBox\r\n\r\nI made the selection of the checkboxes programatically with \r\n\r\n         int[] indecesToSelect =..\r\n\r\n         combo.setSelectedIndices(indecesToSelect);\r\n\r\nBut i dont see any way to unselect any selection.\r\n\r\nI tried \r\n\r\n         combo.setSelectedItem(item, false);\r\nBut this is not unselecting , this is also selecting\r\n\r\nAlso tried \r\n\r\n         combo.getList().clearSelection();\r\nno effect\r\n\r\n\r\n\r\n\r\nPlease help\r\n\r\n","title":"CheckBoxListComboBox unseelct the selection programatically","body":"<p>I am using com.jidesoft.combobox.CheckBoxListComboBox</p>\n<p>I made the selection of the checkboxes programatically with</p>\n<pre><code>     int[] indecesToSelect =..\n\n     combo.setSelectedIndices(indecesToSelect);\n</code></pre>\n<p>But i dont see any way to unselect any selection.</p>\n<p>I tried</p>\n<pre><code>     combo.setSelectedItem(item, false);\n</code></pre>\n<p>But this is not unselecting , this is also selecting</p>\n<p>Also tried</p>\n<pre><code>     combo.getList().clearSelection();\n</code></pre>\n<p>no effect</p>\n<p>Please help</p>\n"},{"tags":["java","database","jpa","exception"],"answers":[{"tags":[],"owner":{"account_id":17076275,"reputation":596,"user_id":12355831,"display_name":"stefan-dan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1634728828,"creation_date":1634728828,"answer_id":69645062,"question_id":69639961,"body_markdown":"If you search on **Stackoverflow** about the [`javax.persistence.EntityNotFoundException`][1], you will find that the problem is in your `IdRoles` configuration. You defined it like this:\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private int idRoles;\r\n    \r\n    @Id  // should be removed\r\n    @Column(name = &quot;IdRoles&quot;, nullable = false) // should be moved to field, int can&#39;t be null\r\n    public int getIdRoles() {\r\n        return idRoles;\r\n    }\r\n\r\nYou can place `javax.persistence` annoutations on fields or on getters, but not on both. \r\n\r\nSee: [Hibernate Annoutations - Which is better, field or property access?][2]\r\n\r\nIn your case, sometimes the persistence layer is reading properties from getter, and  it is missing the `@GeneratedValue()` annotation, so it is wainting for you to set an `id` for the entity.\r\n\r\n  [1]: https://stackoverflow.com/questions/25326993/entitynotfoundexception-entity-no-longer-exists-in-the-database-on-em-refresh\r\n  [2]: https://stackoverflow.com/questions/594597/hibernate-annotations-which-is-better-field-or-property-access","title":"Problem javax.persistence.EntityNotFoundException","body":"<p>If you search on <strong>Stackoverflow</strong> about the <a href=\"https://stackoverflow.com/questions/25326993/entitynotfoundexception-entity-no-longer-exists-in-the-database-on-em-refresh\"><code>javax.persistence.EntityNotFoundException</code></a>, you will find that the problem is in your <code>IdRoles</code> configuration. You defined it like this:</p>\n<pre><code>@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\nprivate int idRoles;\n\n@Id  // should be removed\n@Column(name = &quot;IdRoles&quot;, nullable = false) // should be moved to field, int can't be null\npublic int getIdRoles() {\n    return idRoles;\n}\n</code></pre>\n<p>You can place <code>javax.persistence</code> annoutations on fields or on getters, but not on both.</p>\n<p>See: <a href=\"https://stackoverflow.com/questions/594597/hibernate-annotations-which-is-better-field-or-property-access\">Hibernate Annoutations - Which is better, field or property access?</a></p>\n<p>In your case, sometimes the persistence layer is reading properties from getter, and  it is missing the <code>@GeneratedValue()</code> annotation, so it is wainting for you to set an <code>id</code> for the entity.</p>\n"}],"owner":{"account_id":19094675,"reputation":43,"user_id":13944229,"display_name":"Axel Bauduin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1668,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69645062,"answer_count":1,"score":1,"last_activity_date":1634731539,"creation_date":1634700251,"question_id":69639961,"body_markdown":"I&#39;m creating a role with my form and this is the first time I&#39;ve had this error, and I&#39;ve been at it for 20 days.\r\n\r\nApparently, the problem is with my save and/or my &quot;roles&quot; entity.\r\nHow can I solve this problem?\r\nHere are the files: \r\nMy error : \r\n\r\n    20-Oct-2021 05:07:51.658 AVERTISSEMENT [http-nio-8080-exec-1] com.sun.faces.lifecycle.ApplyRequestValuesPhase.execute #{rolesBean.newRoles}: javax.persistence.EntityNotFoundException: Entity no longer exists in the database: entities.Roles@780b0a91.\r\n    \tjavax.faces.FacesException: #{rolesBean.newRoles}: javax.persistence.EntityNotFoundException: Entity no longer exists in the database: entities.Roles@780b0a91.\r\n    \t\tat com.sun.faces.application.ActionListenerImpl.getNavigationOutcome(ActionListenerImpl.java:96)\r\n    \t\tat com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:71)\r\n    \t\tat javax.faces.component.UICommand.broadcast(UICommand.java:222)\r\n    \t\tat javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:847)\r\n    \t\tat javax.faces.component.UIViewRoot.processDecodes(UIViewRoot.java:1012)\r\n    \t\tat com.sun.faces.lifecycle.ApplyRequestValuesPhase.execute(ApplyRequestValuesPhase.java:55)\r\n    \t\tat com.sun.faces.lifecycle.Phase.doPhase(Phase.java:76)\r\n    \t\tat com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:177)\r\n    \t\tat javax.faces.webapp.FacesServlet.executeLifecyle(FacesServlet.java:707)\r\n    \t\tat javax.faces.webapp.FacesServlet.service(FacesServlet.java:451)\r\n    \t\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)\r\n    \t\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n    \t\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n    \t\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n    \t\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n    \t\tat org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:61)\r\n    \t\tat org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:108)\r\n    \t\tat org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:137)\r\n    \t\tat org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)\r\n    \t\tat org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:66)\r\n    \t\tat org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:108)\r\n    \t\tat org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:137)\r\n    \t\tat org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)\r\n    \t\tat org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:66)\r\n    \t\tat org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:450)\r\n    \t\tat org.apache.shiro.web.servlet.AbstractShiroFilter$1.call(AbstractShiroFilter.java:365)\r\n    \t\tat org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:90)\r\n    \t\tat org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:83)\r\n    \t\tat org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:387)\r\n    \t\tat org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:362)\r\n    \t\tat org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)\r\n    \t\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n    \t\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n    \t\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)\r\n    \t\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n    \t\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)\r\n    \t\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)\r\n    \t\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n    \t\tat org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:690)\r\n    \t\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n    \t\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)\r\n    \t\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)\r\n    \t\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n    \t\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868)\r\n    \t\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1590)\r\n    \t\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n    \t\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n    \t\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n    \t\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n    \t\tat java.lang.Thread.run(Thread.java:748)\r\n    \tCaused by: javax.faces.el.EvaluationException: javax.persistence.EntityNotFoundException: Entity no longer exists in the database: entities.Roles@780b0a91.\r\n    \t\tat com.sun.faces.application.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:76)\r\n    \t\tat com.sun.faces.application.ActionListenerImpl.getNavigationOutcome(ActionListenerImpl.java:82)\r\n    \t\t... 49 more\r\n    \tCaused by: javax.persistence.EntityNotFoundException: Entity no longer exists in the database: entities.Roles@780b0a91.\r\n    \t\tat org.eclipse.persistence.internal.jpa.EntityManagerImpl.refresh(EntityManagerImpl.java:1160)\r\n    \t\tat org.eclipse.persistence.internal.jpa.EntityManagerImpl.refresh(EntityManagerImpl.java:1042)\r\n    \t\tat services.Service.refreshEntity(Service.java:55)\r\n    \t\tat managedBean.RolesBean.save(RolesBean.java:257)\r\n    \t\tat managedBean.RolesBean.newRoles(RolesBean.java:166)\r\n    \t\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \t\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \t\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \t\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n    \t\tat org.apache.el.parser.AstValue.invoke(AstValue.java:247)\r\n    \t\tat org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:267)\r\n    \t\tat org.jboss.weld.module.web.util.el.ForwardingMethodExpression.invoke(ForwardingMethodExpression.java:40)\r\n    \t\tat org.jboss.weld.module.web.el.WeldMethodExpression.invoke(WeldMethodExpression.java:50)\r\n    \t\tat com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:65)\r\n    \t\tat com.sun.faces.application.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:66)\r\n    \t\t... 50 more\r\n    20-Oct-2021 05:07:51.661 GRAVE [http-nio-8080-exec-1] com.sun.faces.context.AjaxExceptionHandlerImpl.handlePartialResponseError javax.faces.el.EvaluationException: javax.persistence.EntityNotFoundException: Entity no longer exists in the database: entities.Roles@780b0a91.\r\n    \tat com.sun.faces.application.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:76)\r\n    \tat com.sun.faces.application.ActionListenerImpl.getNavigationOutcome(ActionListenerImpl.java:82)\r\n    \tat com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:71)\r\n    \tat javax.faces.component.UICommand.broadcast(UICommand.java:222)\r\n    \tat javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:847)\r\n    \tat javax.faces.component.UIViewRoot.processDecodes(UIViewRoot.java:1012)\r\n    \tat com.sun.faces.lifecycle.ApplyRequestValuesPhase.execute(ApplyRequestValuesPhase.java:55)\r\n    \tat com.sun.faces.lifecycle.Phase.doPhase(Phase.java:76)\r\n    \tat com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:177)\r\n    \tat javax.faces.webapp.FacesServlet.executeLifecyle(FacesServlet.java:707)\r\n    \tat javax.faces.webapp.FacesServlet.service(FacesServlet.java:451)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n    \tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n    \tat org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:61)\r\n    \tat org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:108)\r\n    \tat org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:137)\r\n    \tat org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)\r\n    \tat org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:66)\r\n    \tat org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:108)\r\n    \tat org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:137)\r\n    \tat org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)\r\n    \tat org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:66)\r\n    \tat org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:450)\r\n    \tat org.apache.shiro.web.servlet.AbstractShiroFilter$1.call(AbstractShiroFilter.java:365)\r\n    \tat org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:90)\r\n    \tat org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:83)\r\n    \tat org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:387)\r\n    \tat org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:362)\r\n    \tat org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n    \tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)\r\n    \tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n    \tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)\r\n    \tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)\r\n    \tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n    \tat org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:690)\r\n    \tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n    \tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)\r\n    \tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)\r\n    \tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n    \tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868)\r\n    \tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1590)\r\n    \tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n    \tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n    \tat java.lang.Thread.run(Thread.java:748)\r\n    Caused by: javax.persistence.EntityNotFoundException: Entity no longer exists in the database: entities.Roles@780b0a91.\r\n    \tat org.eclipse.persistence.internal.jpa.EntityManagerImpl.refresh(EntityManagerImpl.java:1160)\r\n    \tat org.eclipse.persistence.internal.jpa.EntityManagerImpl.refresh(EntityManagerImpl.java:1042)\r\n    \tat services.Service.refreshEntity(Service.java:55)\r\n    \tat managedBean.RolesBean.save(RolesBean.java:257)\r\n    \tat managedBean.RolesBean.newRoles(RolesBean.java:166)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n    \tat org.apache.el.parser.AstValue.invoke(AstValue.java:247)\r\n    \tat org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:267)\r\n    \tat org.jboss.weld.module.web.util.el.ForwardingMethodExpression.invoke(ForwardingMethodExpression.java:40)\r\n    \tat org.jboss.weld.module.web.el.WeldMethodExpression.invoke(WeldMethodExpression.java:50)\r\n    \tat com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:65)\r\n    \tat com.sun.faces.application.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:66)\r\n    \t... 50 more\r\n\r\nEntity role : \r\n\r\n    public class Roles implements Serializable {\r\n        private static final long serialVersionUID = 1L;\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private int idRoles;\r\n        private String denomination;\r\n        private boolean actif = true;\r\n        @OneToMany(mappedBy = &quot;role&quot;)\r\n        private Collection&lt;PermissionsRoles&gt; permissionsRoles;\r\n        @OneToMany(mappedBy = &quot;roles&quot;)\r\n        private Collection&lt;Utilisateurs&gt; utilisateurs;\r\n    \r\n        @Id\r\n        @Column(name = &quot;IdRoles&quot;, nullable = false)\r\n        public int getIdRoles() {\r\n            return idRoles;\r\n        }\r\n    \r\n        public void setIdRoles(int idRoles) {\r\n            this.idRoles = idRoles;\r\n        }\r\n    \r\n        @Basic\r\n        @Column(name = &quot;Denomination&quot;, nullable = false, length = 150)\r\n        public String getDenomination() {\r\n            return denomination;\r\n        }\r\n    \r\n        public void setDenomination(String denomination) {\r\n            this.denomination = denomination;\r\n        }\r\n    \r\n    \r\n        @Basic\r\n        @Column(name = &quot;Actif&quot;, nullable = false)\r\n        public boolean isActif() {\r\n            return actif;\r\n        }\r\n    \r\n        public void setActif(boolean actif) {\r\n            this.actif = actif;\r\n        }\r\n    \r\n        @Override\r\n        public boolean equals(Object o) {\r\n            if (this == o) return true;\r\n            if (o == null || getClass() != o.getClass()) return false;\r\n            Roles roles = (Roles) o;\r\n            return idRoles == roles.idRoles &amp;&amp;\r\n                    actif == roles.actif &amp;&amp;\r\n                    Objects.equals(denomination, roles.denomination);\r\n        }\r\n    \r\n        @Override\r\n        public int hashCode() {\r\n            return Objects.hash(idRoles, denomination, actif);\r\n        }\r\n    \r\n        public Collection&lt;PermissionsRoles&gt; getPermissionsRoles() {\r\n            return permissionsRoles;\r\n        }\r\n    \r\n        public void setPermissionsRoles(Collection&lt;PermissionsRoles&gt; pr) {\r\n            this.permissionsRoles = pr;\r\n        }\r\n    \r\n    \r\n        public Collection&lt;Utilisateurs&gt; getUtilisateurs() {\r\n            return utilisateurs;\r\n        }\r\n    \r\n        public void setUtilisateurs(Collection&lt;Utilisateurs&gt; user) {\r\n            this.utilisateurs = user;\r\n        }\r\n    \r\n        @Override\r\n        public Roles clone(){\r\n            Roles role = null;\r\n            try{\r\n                role = (Roles) super.clone();\r\n            }catch (CloneNotSupportedException e) {\r\n                e.printStackTrace(System.err);\r\n            }\r\n            return role;\r\n        }\r\n    \r\n        public void setFields(Roles role) {\r\n            this.denomination = role.denomination;\r\n            this.actif = role.actif;\r\n            this.permissionsRoles = role.permissionsRoles;\r\n            this.utilisateurs = role.utilisateurs;\r\n        }\r\n\r\nMy service : \r\n\r\n    public class SvcRoles extends Service&lt;Roles&gt; implements Serializable {\r\n    \t// D&#233;claration des variables\r\n    \tprivate static final Logger log = Logger.getLogger(SvcRoles.class);\r\n    \tprivate static final long serialVersionUID = 1L;\r\n    \tMap&lt;String, Object&gt; params = new HashMap&lt;String, Object&gt;();\r\n    \r\n    \tpublic SvcRoles() {\r\n    \t\tsuper();\r\n    \t}\r\n    \r\n    \t// M&#233;thode qui permet de sauver un role et de le mettre en DB\r\n    \t@Override\r\n    \tpublic Roles save(Roles roles) {\r\n    \t\tif (roles.getIdRoles() == 0) {\r\n    \t\t\tem.persist(roles);\r\n    \t\t} else {\r\n    \t\t\troles = em.merge(roles);\r\n    \t\t}\r\n    \r\n    \t\treturn roles;\r\n    \t}\r\n\r\nand my save()\r\n\r\n    public void save()\r\n        {\r\n            SvcRoles serviceR = new SvcRoles();\r\n            SvcPermissions serviceP = new SvcPermissions();\r\n            SvcPermissionRoles servicePR = new SvcPermissionRoles();\r\n            servicePR.setEm(serviceR.getEm());\r\n            EntityTransaction transaction = serviceR.getTransaction();\r\n            transaction.begin();\r\n            try {\r\n                serviceR.save(role);\r\n                serviceR.refreshEntity(role);\r\n                if(role.getPermissionsRoles().size()&gt;0){\r\n                    for(PermissionsRoles pr : role.getPermissionsRoles())\r\n                    {\r\n                        servicePR.delete(pr.getIdPermissionsRoles());\r\n                    }\r\n                }\r\n                for(Permissions p : listPerm)\r\n                {\r\n                    if(serviceP.findOnePermission(p).size()&gt;0){\r\n                        servicePR.save(servicePR.createPermissionRoles(serviceP.findOnePermission(p).get(0),role));\r\n                    }\r\n                    else{\r\n                        transaction.rollback();\r\n                        FacesContext fc = FacesContext.getCurrentInstance();\r\n                        fc.getExternalContext().getFlash().setKeepMessages(true);\r\n                        fc.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,&quot;L&#39;operation n&#39;a pas reussie&quot;,null));\r\n                        break;\r\n                    }\r\n                }\r\n                transaction.commit();\r\n                FacesContext fc = FacesContext.getCurrentInstance();\r\n                fc.getExternalContext().getFlash().setKeepMessages(true);\r\n                fc.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,&quot;L&#39;operation a reussie&quot;,null));\r\n            } finally {\r\n                if (transaction.isActive()) {\r\n                    transaction.rollback();\r\n                    FacesContext fc = FacesContext.getCurrentInstance();\r\n                    fc.getExternalContext().getFlash().setKeepMessages(true);\r\n                    fc.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,&quot;L&#39;operation n&#39;a pas reussie&quot;,null));\r\n                }\r\n                serviceR.close();\r\n            }\r\n    \r\n        }\r\n\r\nand my web page : \r\n\r\n    &lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39; ?&gt;\r\n    &lt;!DOCTYPE html&gt;\r\n    &lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;\r\n          xmlns:ui=&quot;http://java.sun.com/jsf/facelets&quot;\r\n          xmlns:c=&quot;http://java.sun.com/jsp/jstl/core&quot;\r\n          xmlns:f = &quot;http://java.sun.com/jsf/core&quot;\r\n          xmlns:h=&quot;http://java.sun.com/jsf/html&quot;\r\n          xmlns:shiro=&quot;http://shiro.apache.org/tags&quot;\r\n          xmlns:p=&quot;http://primefaces.org/ui&quot;&gt;\r\n    &lt;ui:composition template=&quot;Template/template.xhtml&quot;&gt;\r\n        &lt;ui:define name=&quot;title&quot;&gt;#{I18N[&#39;role.form.nouveau.titre&#39;]}&lt;/ui:define&gt;\r\n    \r\n        &lt;ui:define name=&quot;content&quot;&gt;\r\n            &lt;p:growl id=&quot;growl&quot; showDetail=&quot;true&quot; sticky=&quot;true&quot; /&gt;\r\n            &lt;shiro:hasPermission name=&quot;Roles:Creer&quot;&gt;\r\n                &lt;h:form id=&quot;form&quot; prependId=&quot;false&quot;&gt;\r\n                    &lt;h:head&gt;\r\n                        &lt;title&gt;#{I18N[&#39;role.form.nouveau.titre&#39;]}&lt;/title&gt;\r\n                    &lt;/h:head&gt;\r\n                    &lt;h2 style=&quot;text-align:center&quot;&gt;#{I18N[&#39;role.form.nouveau.titre&#39;]}&lt;/h2&gt;\r\n                    &lt;p:panelGrid style=&quot;margin: 0 auto;&quot; styleClass=&quot;ui-noborder&quot; id=&quot;newrecform&quot; columns=&quot;2&quot; columnClasses=&quot;col1Newrec,col2Newrec,col3Newrec&quot;&gt;\r\n    \r\n                        &lt;p:outputLabel value = &quot;#{I18N[&#39;role.label.Denomination&#39;]}&quot; indicateRequired=&quot;true&quot;/&gt;\r\n                        &lt;p:inputText id=&quot;roleDenomination&quot;\r\n                                     validatorMessage=&quot;La valeur doit &#234;tre entre 2 et 100 caracteres&quot;\r\n                                     value=&quot;#{rolesBean.role.denomination}&quot;\r\n                                     required=&quot;true&quot;\r\n                                     requiredMessage=&quot;#{I18N[&#39;formulaire.message.required.denomination&#39;]}&quot;\r\n                                     maxlength=&quot;100&quot;&gt;\r\n                            &lt;f:validateLength minimum=&quot;2&quot; maximum=&quot;100&quot;/&gt;\r\n                            &lt;p:tooltip for=&quot;roleDenomination&quot; value=&quot;#{I18N[&#39;tooltip.role.deno&#39;]}&quot; position=&quot;right&quot;/&gt;\r\n                        &lt;/p:inputText&gt;\r\n    \r\n                        &lt;p:outputLabel value = &quot;#{I18N[&#39;Permissions.label.Type&#39;]}&quot; indicateRequired=&quot;true&quot;/&gt;\r\n                        &lt;p:selectOneMenu value = &quot;#{permissionsBean.type}&quot; id=&quot;type&quot; &gt;\r\n                            &lt;f:selectItem itemValue=&quot;#{null}&quot;/&gt;\r\n                            &lt;f:selectItems value = &quot;#{permissionsBean.permissionsType}&quot; var=&quot;ty&quot;\r\n                                           itemLabel=&quot;#{ty}&quot;\r\n                                           itemValue=&quot;#{ty}&quot;/&gt;\r\n                            &lt;p:ajax event=&quot;change&quot; listener=&quot;#{permissionsBean.getPermissionsAction}&quot; update=&quot;form:action&quot; /&gt;\r\n                        &lt;/p:selectOneMenu&gt;\r\n    \r\n                        &lt;p:outputLabel value = &quot;#{I18N[&#39;Permissions.label.Action&#39;]}&quot; indicateRequired=&quot;true&quot;/&gt;\r\n                        &lt;p:selectOneMenu value = &quot;#{permissionsBean.action}&quot; id=&quot;action&quot;&gt;\r\n                            &lt;f:selectItems value = &quot;#{permissionsBean.listAction}&quot; var=&quot;ac&quot;\r\n                                           itemLabel=&quot;#{ac}&quot;\r\n                                           itemValue=&quot;#{ac}&quot;/&gt;\r\n                        &lt;/p:selectOneMenu&gt;\r\n                        &lt;p:commandButton rendered=&quot;#{permissionsBean.action ne null}&quot; icon=&quot;fa fa-fw fa-check-circle&quot; value=&quot;#{I18N[&#39;permissions.label.add&#39;]}&quot; action=&quot;#{rolesBean.addPermission}&quot; ajax=&quot;false&quot;&gt;\r\n                            &lt;f:setPropertyActionListener target=&quot;#{rolesBean.pe.type}&quot; value=&quot;#{permissionsBean.type}&quot; /&gt;\r\n                            &lt;f:setPropertyActionListener target=&quot;#{rolesBean.pe.action}&quot; value=&quot;#{permissionsBean.action}&quot; /&gt;\r\n                        &lt;/p:commandButton&gt;\r\n                    &lt;/p:panelGrid&gt;\r\n    \r\n                    &lt;p:dataTable value=&quot;#{rolesBean.listPerm}&quot; emptyMessage=&quot;Aucun enregistrement trouv&#233;&quot; var=&quot;pe&quot; id=&quot;tableListPerm&quot;\r\n                                 Class=&quot;table&quot; headerClass=&quot;table-header&quot; rowClasses=&quot;table-odd-row,table-even-row&quot;&gt;\r\n    \r\n                    &lt;p:column&gt;\r\n                        &lt;!-- column header --&gt;\r\n                        &lt;f:facet name=&quot;header&quot;&gt;Type de permission&lt;/f:facet&gt;\r\n                        &lt;!-- row record --&gt;\r\n                        &lt;p:outputLabel value =&quot;#{pe.type}&quot;/&gt;\r\n                    &lt;/p:column&gt;\r\n                    &lt;p:column&gt;\r\n                        &lt;!-- column header --&gt;\r\n                        &lt;f:facet name=&quot;header&quot;&gt;Action&lt;/f:facet&gt;\r\n                        &lt;!-- row record --&gt;\r\n                        &lt;p:outputLabel value =&quot;#{pe.action}&quot;/&gt;\r\n                    &lt;/p:column&gt;\r\n                        &lt;p:column&gt;\r\n                            &lt;!-- column header --&gt;\r\n                            &lt;f:facet name=&quot;header&quot;&gt;Supprimer la permission&lt;/f:facet&gt;\r\n                            &lt;!-- row record --&gt;\r\n                            &lt;p:commandButton icon=&quot;fa fa-fw fa-check-circle&quot;  action=&quot;#{rolesBean.supPermission}&quot; ajax=&quot;false&quot;&gt;\r\n                            &lt;f:setPropertyActionListener target=&quot;#{rolesBean.pe}&quot; value=&quot;#{pe}&quot; /&gt;\r\n                            &lt;/p:commandButton&gt;\r\n                        &lt;/p:column&gt;\r\n                    &lt;/p:dataTable&gt;\r\n    \r\n                    &lt;p:commandButton style=&quot;float: right&quot; icon=&quot;fa fa-fw fa-check-circle&quot; value=&quot;#{I18N[&#39;application.button.validate&#39;]}&quot; action=&quot;#{rolesBean.newRoles}&quot; immediate=&quot;true&quot;/&gt;\r\n                    &lt;p:commandButton style=&quot;float: left&quot; icon=&quot;fa fa-fw fa-home&quot; value=&quot;#{I18N[&#39;application.button.return&#39;]}&quot; action=&quot;#{rolesBean.flushRol}&quot; immediate=&quot;true&quot;/&gt;\r\n                &lt;/h:form&gt;\r\n            &lt;/shiro:hasPermission&gt;\r\n            &lt;shiro:lacksPermission name=&quot;Roles:Creer&quot;&gt;\r\n                &lt;p:outputLabel value=&quot;#{I18N[&#39;application.page.accessrefuse&#39;]}&quot;/&gt;\r\n            &lt;/shiro:lacksPermission&gt;\r\n        &lt;/ui:define&gt;\r\n    &lt;/ui:composition&gt;\r\n    \r\n    &lt;/html&gt;\r\n\r\n\r\nThanks a lot guys","title":"Problem javax.persistence.EntityNotFoundException","body":"<p>I'm creating a role with my form and this is the first time I've had this error, and I've been at it for 20 days.</p>\n<p>Apparently, the problem is with my save and/or my &quot;roles&quot; entity.\nHow can I solve this problem?\nHere are the files:\nMy error :</p>\n<pre><code>20-Oct-2021 05:07:51.658 AVERTISSEMENT [http-nio-8080-exec-1] com.sun.faces.lifecycle.ApplyRequestValuesPhase.execute #{rolesBean.newRoles}: javax.persistence.EntityNotFoundException: Entity no longer exists in the database: entities.Roles@780b0a91.\n    javax.faces.FacesException: #{rolesBean.newRoles}: javax.persistence.EntityNotFoundException: Entity no longer exists in the database: entities.Roles@780b0a91.\n        at com.sun.faces.application.ActionListenerImpl.getNavigationOutcome(ActionListenerImpl.java:96)\n        at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:71)\n        at javax.faces.component.UICommand.broadcast(UICommand.java:222)\n        at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:847)\n        at javax.faces.component.UIViewRoot.processDecodes(UIViewRoot.java:1012)\n        at com.sun.faces.lifecycle.ApplyRequestValuesPhase.execute(ApplyRequestValuesPhase.java:55)\n        at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:76)\n        at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:177)\n        at javax.faces.webapp.FacesServlet.executeLifecyle(FacesServlet.java:707)\n        at javax.faces.webapp.FacesServlet.service(FacesServlet.java:451)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n        at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n        at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:61)\n        at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:108)\n        at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:137)\n        at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)\n        at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:66)\n        at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:108)\n        at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:137)\n        at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)\n        at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:66)\n        at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:450)\n        at org.apache.shiro.web.servlet.AbstractShiroFilter$1.call(AbstractShiroFilter.java:365)\n        at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:90)\n        at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:83)\n        at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:387)\n        at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:362)\n        at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)\n        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\n        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\n        at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:690)\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)\n        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)\n        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\n        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868)\n        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1590)\n        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n        at java.lang.Thread.run(Thread.java:748)\n    Caused by: javax.faces.el.EvaluationException: javax.persistence.EntityNotFoundException: Entity no longer exists in the database: entities.Roles@780b0a91.\n        at com.sun.faces.application.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:76)\n        at com.sun.faces.application.ActionListenerImpl.getNavigationOutcome(ActionListenerImpl.java:82)\n        ... 49 more\n    Caused by: javax.persistence.EntityNotFoundException: Entity no longer exists in the database: entities.Roles@780b0a91.\n        at org.eclipse.persistence.internal.jpa.EntityManagerImpl.refresh(EntityManagerImpl.java:1160)\n        at org.eclipse.persistence.internal.jpa.EntityManagerImpl.refresh(EntityManagerImpl.java:1042)\n        at services.Service.refreshEntity(Service.java:55)\n        at managedBean.RolesBean.save(RolesBean.java:257)\n        at managedBean.RolesBean.newRoles(RolesBean.java:166)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at org.apache.el.parser.AstValue.invoke(AstValue.java:247)\n        at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:267)\n        at org.jboss.weld.module.web.util.el.ForwardingMethodExpression.invoke(ForwardingMethodExpression.java:40)\n        at org.jboss.weld.module.web.el.WeldMethodExpression.invoke(WeldMethodExpression.java:50)\n        at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:65)\n        at com.sun.faces.application.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:66)\n        ... 50 more\n20-Oct-2021 05:07:51.661 GRAVE [http-nio-8080-exec-1] com.sun.faces.context.AjaxExceptionHandlerImpl.handlePartialResponseError javax.faces.el.EvaluationException: javax.persistence.EntityNotFoundException: Entity no longer exists in the database: entities.Roles@780b0a91.\n    at com.sun.faces.application.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:76)\n    at com.sun.faces.application.ActionListenerImpl.getNavigationOutcome(ActionListenerImpl.java:82)\n    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:71)\n    at javax.faces.component.UICommand.broadcast(UICommand.java:222)\n    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:847)\n    at javax.faces.component.UIViewRoot.processDecodes(UIViewRoot.java:1012)\n    at com.sun.faces.lifecycle.ApplyRequestValuesPhase.execute(ApplyRequestValuesPhase.java:55)\n    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:76)\n    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:177)\n    at javax.faces.webapp.FacesServlet.executeLifecyle(FacesServlet.java:707)\n    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:451)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n    at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:61)\n    at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:108)\n    at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:137)\n    at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)\n    at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:66)\n    at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:108)\n    at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:137)\n    at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)\n    at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:66)\n    at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:450)\n    at org.apache.shiro.web.servlet.AbstractShiroFilter$1.call(AbstractShiroFilter.java:365)\n    at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:90)\n    at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:83)\n    at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:387)\n    at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:362)\n    at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\n    at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:690)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1590)\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    at java.lang.Thread.run(Thread.java:748)\nCaused by: javax.persistence.EntityNotFoundException: Entity no longer exists in the database: entities.Roles@780b0a91.\n    at org.eclipse.persistence.internal.jpa.EntityManagerImpl.refresh(EntityManagerImpl.java:1160)\n    at org.eclipse.persistence.internal.jpa.EntityManagerImpl.refresh(EntityManagerImpl.java:1042)\n    at services.Service.refreshEntity(Service.java:55)\n    at managedBean.RolesBean.save(RolesBean.java:257)\n    at managedBean.RolesBean.newRoles(RolesBean.java:166)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.apache.el.parser.AstValue.invoke(AstValue.java:247)\n    at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:267)\n    at org.jboss.weld.module.web.util.el.ForwardingMethodExpression.invoke(ForwardingMethodExpression.java:40)\n    at org.jboss.weld.module.web.el.WeldMethodExpression.invoke(WeldMethodExpression.java:50)\n    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:65)\n    at com.sun.faces.application.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:66)\n    ... 50 more\n</code></pre>\n<p>Entity role :</p>\n<pre><code>public class Roles implements Serializable {\n    private static final long serialVersionUID = 1L;\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private int idRoles;\n    private String denomination;\n    private boolean actif = true;\n    @OneToMany(mappedBy = &quot;role&quot;)\n    private Collection&lt;PermissionsRoles&gt; permissionsRoles;\n    @OneToMany(mappedBy = &quot;roles&quot;)\n    private Collection&lt;Utilisateurs&gt; utilisateurs;\n\n    @Id\n    @Column(name = &quot;IdRoles&quot;, nullable = false)\n    public int getIdRoles() {\n        return idRoles;\n    }\n\n    public void setIdRoles(int idRoles) {\n        this.idRoles = idRoles;\n    }\n\n    @Basic\n    @Column(name = &quot;Denomination&quot;, nullable = false, length = 150)\n    public String getDenomination() {\n        return denomination;\n    }\n\n    public void setDenomination(String denomination) {\n        this.denomination = denomination;\n    }\n\n\n    @Basic\n    @Column(name = &quot;Actif&quot;, nullable = false)\n    public boolean isActif() {\n        return actif;\n    }\n\n    public void setActif(boolean actif) {\n        this.actif = actif;\n    }\n\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n        Roles roles = (Roles) o;\n        return idRoles == roles.idRoles &amp;&amp;\n                actif == roles.actif &amp;&amp;\n                Objects.equals(denomination, roles.denomination);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(idRoles, denomination, actif);\n    }\n\n    public Collection&lt;PermissionsRoles&gt; getPermissionsRoles() {\n        return permissionsRoles;\n    }\n\n    public void setPermissionsRoles(Collection&lt;PermissionsRoles&gt; pr) {\n        this.permissionsRoles = pr;\n    }\n\n\n    public Collection&lt;Utilisateurs&gt; getUtilisateurs() {\n        return utilisateurs;\n    }\n\n    public void setUtilisateurs(Collection&lt;Utilisateurs&gt; user) {\n        this.utilisateurs = user;\n    }\n\n    @Override\n    public Roles clone(){\n        Roles role = null;\n        try{\n            role = (Roles) super.clone();\n        }catch (CloneNotSupportedException e) {\n            e.printStackTrace(System.err);\n        }\n        return role;\n    }\n\n    public void setFields(Roles role) {\n        this.denomination = role.denomination;\n        this.actif = role.actif;\n        this.permissionsRoles = role.permissionsRoles;\n        this.utilisateurs = role.utilisateurs;\n    }\n</code></pre>\n<p>My service :</p>\n<pre><code>public class SvcRoles extends Service&lt;Roles&gt; implements Serializable {\n    // Déclaration des variables\n    private static final Logger log = Logger.getLogger(SvcRoles.class);\n    private static final long serialVersionUID = 1L;\n    Map&lt;String, Object&gt; params = new HashMap&lt;String, Object&gt;();\n\n    public SvcRoles() {\n        super();\n    }\n\n    // Méthode qui permet de sauver un role et de le mettre en DB\n    @Override\n    public Roles save(Roles roles) {\n        if (roles.getIdRoles() == 0) {\n            em.persist(roles);\n        } else {\n            roles = em.merge(roles);\n        }\n\n        return roles;\n    }\n</code></pre>\n<p>and my save()</p>\n<pre><code>public void save()\n    {\n        SvcRoles serviceR = new SvcRoles();\n        SvcPermissions serviceP = new SvcPermissions();\n        SvcPermissionRoles servicePR = new SvcPermissionRoles();\n        servicePR.setEm(serviceR.getEm());\n        EntityTransaction transaction = serviceR.getTransaction();\n        transaction.begin();\n        try {\n            serviceR.save(role);\n            serviceR.refreshEntity(role);\n            if(role.getPermissionsRoles().size()&gt;0){\n                for(PermissionsRoles pr : role.getPermissionsRoles())\n                {\n                    servicePR.delete(pr.getIdPermissionsRoles());\n                }\n            }\n            for(Permissions p : listPerm)\n            {\n                if(serviceP.findOnePermission(p).size()&gt;0){\n                    servicePR.save(servicePR.createPermissionRoles(serviceP.findOnePermission(p).get(0),role));\n                }\n                else{\n                    transaction.rollback();\n                    FacesContext fc = FacesContext.getCurrentInstance();\n                    fc.getExternalContext().getFlash().setKeepMessages(true);\n                    fc.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,&quot;L'operation n'a pas reussie&quot;,null));\n                    break;\n                }\n            }\n            transaction.commit();\n            FacesContext fc = FacesContext.getCurrentInstance();\n            fc.getExternalContext().getFlash().setKeepMessages(true);\n            fc.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,&quot;L'operation a reussie&quot;,null));\n        } finally {\n            if (transaction.isActive()) {\n                transaction.rollback();\n                FacesContext fc = FacesContext.getCurrentInstance();\n                fc.getExternalContext().getFlash().setKeepMessages(true);\n                fc.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,&quot;L'operation n'a pas reussie&quot;,null));\n            }\n            serviceR.close();\n        }\n\n    }\n</code></pre>\n<p>and my web page :</p>\n<pre><code>&lt;?xml version='1.0' encoding='UTF-8' ?&gt;\n&lt;!DOCTYPE html&gt;\n&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;\n      xmlns:ui=&quot;http://java.sun.com/jsf/facelets&quot;\n      xmlns:c=&quot;http://java.sun.com/jsp/jstl/core&quot;\n      xmlns:f = &quot;http://java.sun.com/jsf/core&quot;\n      xmlns:h=&quot;http://java.sun.com/jsf/html&quot;\n      xmlns:shiro=&quot;http://shiro.apache.org/tags&quot;\n      xmlns:p=&quot;http://primefaces.org/ui&quot;&gt;\n&lt;ui:composition template=&quot;Template/template.xhtml&quot;&gt;\n    &lt;ui:define name=&quot;title&quot;&gt;#{I18N['role.form.nouveau.titre']}&lt;/ui:define&gt;\n\n    &lt;ui:define name=&quot;content&quot;&gt;\n        &lt;p:growl id=&quot;growl&quot; showDetail=&quot;true&quot; sticky=&quot;true&quot; /&gt;\n        &lt;shiro:hasPermission name=&quot;Roles:Creer&quot;&gt;\n            &lt;h:form id=&quot;form&quot; prependId=&quot;false&quot;&gt;\n                &lt;h:head&gt;\n                    &lt;title&gt;#{I18N['role.form.nouveau.titre']}&lt;/title&gt;\n                &lt;/h:head&gt;\n                &lt;h2 style=&quot;text-align:center&quot;&gt;#{I18N['role.form.nouveau.titre']}&lt;/h2&gt;\n                &lt;p:panelGrid style=&quot;margin: 0 auto;&quot; styleClass=&quot;ui-noborder&quot; id=&quot;newrecform&quot; columns=&quot;2&quot; columnClasses=&quot;col1Newrec,col2Newrec,col3Newrec&quot;&gt;\n\n                    &lt;p:outputLabel value = &quot;#{I18N['role.label.Denomination']}&quot; indicateRequired=&quot;true&quot;/&gt;\n                    &lt;p:inputText id=&quot;roleDenomination&quot;\n                                 validatorMessage=&quot;La valeur doit être entre 2 et 100 caracteres&quot;\n                                 value=&quot;#{rolesBean.role.denomination}&quot;\n                                 required=&quot;true&quot;\n                                 requiredMessage=&quot;#{I18N['formulaire.message.required.denomination']}&quot;\n                                 maxlength=&quot;100&quot;&gt;\n                        &lt;f:validateLength minimum=&quot;2&quot; maximum=&quot;100&quot;/&gt;\n                        &lt;p:tooltip for=&quot;roleDenomination&quot; value=&quot;#{I18N['tooltip.role.deno']}&quot; position=&quot;right&quot;/&gt;\n                    &lt;/p:inputText&gt;\n\n                    &lt;p:outputLabel value = &quot;#{I18N['Permissions.label.Type']}&quot; indicateRequired=&quot;true&quot;/&gt;\n                    &lt;p:selectOneMenu value = &quot;#{permissionsBean.type}&quot; id=&quot;type&quot; &gt;\n                        &lt;f:selectItem itemValue=&quot;#{null}&quot;/&gt;\n                        &lt;f:selectItems value = &quot;#{permissionsBean.permissionsType}&quot; var=&quot;ty&quot;\n                                       itemLabel=&quot;#{ty}&quot;\n                                       itemValue=&quot;#{ty}&quot;/&gt;\n                        &lt;p:ajax event=&quot;change&quot; listener=&quot;#{permissionsBean.getPermissionsAction}&quot; update=&quot;form:action&quot; /&gt;\n                    &lt;/p:selectOneMenu&gt;\n\n                    &lt;p:outputLabel value = &quot;#{I18N['Permissions.label.Action']}&quot; indicateRequired=&quot;true&quot;/&gt;\n                    &lt;p:selectOneMenu value = &quot;#{permissionsBean.action}&quot; id=&quot;action&quot;&gt;\n                        &lt;f:selectItems value = &quot;#{permissionsBean.listAction}&quot; var=&quot;ac&quot;\n                                       itemLabel=&quot;#{ac}&quot;\n                                       itemValue=&quot;#{ac}&quot;/&gt;\n                    &lt;/p:selectOneMenu&gt;\n                    &lt;p:commandButton rendered=&quot;#{permissionsBean.action ne null}&quot; icon=&quot;fa fa-fw fa-check-circle&quot; value=&quot;#{I18N['permissions.label.add']}&quot; action=&quot;#{rolesBean.addPermission}&quot; ajax=&quot;false&quot;&gt;\n                        &lt;f:setPropertyActionListener target=&quot;#{rolesBean.pe.type}&quot; value=&quot;#{permissionsBean.type}&quot; /&gt;\n                        &lt;f:setPropertyActionListener target=&quot;#{rolesBean.pe.action}&quot; value=&quot;#{permissionsBean.action}&quot; /&gt;\n                    &lt;/p:commandButton&gt;\n                &lt;/p:panelGrid&gt;\n\n                &lt;p:dataTable value=&quot;#{rolesBean.listPerm}&quot; emptyMessage=&quot;Aucun enregistrement trouvé&quot; var=&quot;pe&quot; id=&quot;tableListPerm&quot;\n                             Class=&quot;table&quot; headerClass=&quot;table-header&quot; rowClasses=&quot;table-odd-row,table-even-row&quot;&gt;\n\n                &lt;p:column&gt;\n                    &lt;!-- column header --&gt;\n                    &lt;f:facet name=&quot;header&quot;&gt;Type de permission&lt;/f:facet&gt;\n                    &lt;!-- row record --&gt;\n                    &lt;p:outputLabel value =&quot;#{pe.type}&quot;/&gt;\n                &lt;/p:column&gt;\n                &lt;p:column&gt;\n                    &lt;!-- column header --&gt;\n                    &lt;f:facet name=&quot;header&quot;&gt;Action&lt;/f:facet&gt;\n                    &lt;!-- row record --&gt;\n                    &lt;p:outputLabel value =&quot;#{pe.action}&quot;/&gt;\n                &lt;/p:column&gt;\n                    &lt;p:column&gt;\n                        &lt;!-- column header --&gt;\n                        &lt;f:facet name=&quot;header&quot;&gt;Supprimer la permission&lt;/f:facet&gt;\n                        &lt;!-- row record --&gt;\n                        &lt;p:commandButton icon=&quot;fa fa-fw fa-check-circle&quot;  action=&quot;#{rolesBean.supPermission}&quot; ajax=&quot;false&quot;&gt;\n                        &lt;f:setPropertyActionListener target=&quot;#{rolesBean.pe}&quot; value=&quot;#{pe}&quot; /&gt;\n                        &lt;/p:commandButton&gt;\n                    &lt;/p:column&gt;\n                &lt;/p:dataTable&gt;\n\n                &lt;p:commandButton style=&quot;float: right&quot; icon=&quot;fa fa-fw fa-check-circle&quot; value=&quot;#{I18N['application.button.validate']}&quot; action=&quot;#{rolesBean.newRoles}&quot; immediate=&quot;true&quot;/&gt;\n                &lt;p:commandButton style=&quot;float: left&quot; icon=&quot;fa fa-fw fa-home&quot; value=&quot;#{I18N['application.button.return']}&quot; action=&quot;#{rolesBean.flushRol}&quot; immediate=&quot;true&quot;/&gt;\n            &lt;/h:form&gt;\n        &lt;/shiro:hasPermission&gt;\n        &lt;shiro:lacksPermission name=&quot;Roles:Creer&quot;&gt;\n            &lt;p:outputLabel value=&quot;#{I18N['application.page.accessrefuse']}&quot;/&gt;\n        &lt;/shiro:lacksPermission&gt;\n    &lt;/ui:define&gt;\n&lt;/ui:composition&gt;\n\n&lt;/html&gt;\n</code></pre>\n<p>Thanks a lot guys</p>\n"},{"tags":["java","eclipse","loadlibrary","buildpath","java.library.path"],"comments":[{"owner":{"account_id":3159259,"reputation":109668,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1634732825,"post_id":69645678,"comment_id":123103536,"body_markdown":"In newer versions of Java ClassLoader doesn&#39;t have a field called `sys_path` and even if it did Java will no longer let you change it like that.","body":"In newer versions of Java ClassLoader doesn&#39;t have a field called <code>sys_path</code> and even if it did Java will no longer let you change it like that."},{"owner":{"account_id":20476605,"reputation":65,"user_id":15025802,"display_name":"umpapa"},"score":0,"creation_date":1634734316,"post_id":69645678,"comment_id":123104210,"body_markdown":"Do you understand how it was possible to load that library nonetheless?(from the other laptop, which uses a new version too)","body":"Do you understand how it was possible to load that library nonetheless?(from the other laptop, which uses a new version too)"},{"owner":{"account_id":3159259,"reputation":109668,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1634739222,"post_id":69645678,"comment_id":123106734,"body_markdown":"You can always try `System.load` which lets you specify the full path directly.","body":"You can always try <code>System.load</code> which lets you specify the full path directly."}],"owner":{"account_id":20476605,"reputation":65,"user_id":15025802,"display_name":"umpapa"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":593,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1634731492,"creation_date":1634731492,"question_id":69645678,"body_markdown":"i am using a local .jar file in my eclipse project which loads a .dll itself:\r\n```\r\nprivate static void ForceReloadLibraryPath() {\r\n/*      */       try {\r\n/*  731 */          Field fieldSysPath = ClassLoader.class.getDeclaredField(&quot;sys_paths&quot;);\r\n/*  732 */          fieldSysPath.setAccessible(true);\r\n/*  733 */          fieldSysPath.set((Object)null, (Object)null);\r\n/*      */ \r\n/*  735 */       } catch (NoSuchFieldException var1) {\r\n/*      */ \r\n/*  737 */          System.out.println(&quot;Failed to adapt the java library path!&quot;);\r\n/*      */ \r\n/*  739 */       } catch (IllegalAccessException var2) {\r\n/*      */ \r\n/*  741 */          System.out.println(&quot;Failed to adapt the java library path!&quot;);\r\n/*      */       }\r\n/*      */ \r\n/*  744 */    }\r\n/*      */ \r\n/*      */    static {\r\n/*  752 */       String bitness = System.getProperty(&quot;sun.arch.data.model&quot;);\r\n/*  753 */       String libpath = System.getProperty(&quot;java.library.path&quot;);\r\n/*  763 */       boolean retry = false;\r\n/*      */ \r\n/*      */       do {\r\n/*  766 */          retry = false;\r\n/*      */ \r\n/*      */ \r\n/*      */          try {\r\n/*  770 */             System.setProperty(&quot;java.library.path&quot;, libpath);\r\n/*  771 */             ForceReloadLibraryPath();\r\n/*  772 */             System.loadLibrary(&quot;AdsToJava&quot;);\r\n/*      */ \r\n/*  774 */          } catch (UnsatisfiedLinkError var6) {\r\n/*      */ \r\n/*      */ \r\n/*  777 */             if (var6.getMessage().equals(&quot;no AdsToJava in java.library.path&quot;)) {\r\n/*      */ \r\n/*  779 */                System.out.println(&quot;AdsToJava.dll not found. Check your PATH environment variable!&quot;);\r\n/*      */ \r\n```\r\nI am adding the AdsToJava.dll like properties -&gt; build path -&gt; Libraries -&gt; JRE System Library -&gt; Native Library Location but get the error messages\r\n```\r\nFailed to adapt the java library path!\r\n\r\nno AdsToJava in java.library.path:...\r\n```\r\nThe first message seem to be rather insignificant - i tried the same project on another laptop where I get the first message but not the second one and everything works properly. The second line I do not understand - I am adding the correct dll to the library path it should be there.\r\nThank you for any suggestions!","title":"How to add dll to java library path properly","body":"<p>i am using a local .jar file in my eclipse project which loads a .dll itself:</p>\n<pre><code>private static void ForceReloadLibraryPath() {\n/*      */       try {\n/*  731 */          Field fieldSysPath = ClassLoader.class.getDeclaredField(&quot;sys_paths&quot;);\n/*  732 */          fieldSysPath.setAccessible(true);\n/*  733 */          fieldSysPath.set((Object)null, (Object)null);\n/*      */ \n/*  735 */       } catch (NoSuchFieldException var1) {\n/*      */ \n/*  737 */          System.out.println(&quot;Failed to adapt the java library path!&quot;);\n/*      */ \n/*  739 */       } catch (IllegalAccessException var2) {\n/*      */ \n/*  741 */          System.out.println(&quot;Failed to adapt the java library path!&quot;);\n/*      */       }\n/*      */ \n/*  744 */    }\n/*      */ \n/*      */    static {\n/*  752 */       String bitness = System.getProperty(&quot;sun.arch.data.model&quot;);\n/*  753 */       String libpath = System.getProperty(&quot;java.library.path&quot;);\n/*  763 */       boolean retry = false;\n/*      */ \n/*      */       do {\n/*  766 */          retry = false;\n/*      */ \n/*      */ \n/*      */          try {\n/*  770 */             System.setProperty(&quot;java.library.path&quot;, libpath);\n/*  771 */             ForceReloadLibraryPath();\n/*  772 */             System.loadLibrary(&quot;AdsToJava&quot;);\n/*      */ \n/*  774 */          } catch (UnsatisfiedLinkError var6) {\n/*      */ \n/*      */ \n/*  777 */             if (var6.getMessage().equals(&quot;no AdsToJava in java.library.path&quot;)) {\n/*      */ \n/*  779 */                System.out.println(&quot;AdsToJava.dll not found. Check your PATH environment variable!&quot;);\n/*      */ \n</code></pre>\n<p>I am adding the AdsToJava.dll like properties -&gt; build path -&gt; Libraries -&gt; JRE System Library -&gt; Native Library Location but get the error messages</p>\n<pre><code>Failed to adapt the java library path!\n\nno AdsToJava in java.library.path:...\n</code></pre>\n<p>The first message seem to be rather insignificant - i tried the same project on another laptop where I get the first message but not the second one and everything works properly. The second line I do not understand - I am adding the correct dll to the library path it should be there.\nThank you for any suggestions!</p>\n"},{"tags":["java","sorting","java-stream","localdate"],"comments":[{"owner":{"account_id":8005552,"reputation":628,"user_id":6426446,"accept_rate":78,"display_name":"bramhaag"},"score":0,"creation_date":1634726226,"post_id":69644278,"comment_id":123100768,"body_markdown":"I cannot reproduce this problem. Some example input and output would be good, and the version of Java that you are using.","body":"I cannot reproduce this problem. Some example input and output would be good, and the version of Java that you are using."}],"answers":[{"tags":[],"owner":{"account_id":7091735,"reputation":2510,"user_id":5426703,"display_name":"Spyros K"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1634731163,"creation_date":1634725952,"answer_id":69644384,"question_id":69644278,"body_markdown":"**Update**\r\nIt seems that the implementation in the question calls client.getOrders() many times. \r\nNot sure if `client.getOrders()` returns the same result every time it is called. Also it is sorting only the dates, not the orders.\r\n\r\nThe following code only makes a single `client.getOrders()` invocation and sorts the orders.\r\n\r\n    final List&lt;Order&gt; orders = clients.stream().map(clients -&gt; client.getOrders())\r\n    .filter(Objects::nonNull)\r\n    .flatMap(orders -&gt; orders.stream()) \r\n    .sorted(Comparator.comparing(Order::getDate))\r\n    .collect(Collectors.toList());\r\n    //Printing orders&#39; dates\r\n    orders.stream().map(Order::getDate).forEach(System.out::println);\r\n\r\n**Information based on first question version**\r\n\r\nBased on the original information available, this should normally work: \r\n\r\n    clients.getOrders().stream()\r\n    .sorted(Comparator.comparing(Order::getDate)) \r\n    .forEach(System.out::println)\r\n\r\nBut you already mention you tried it. \r\n\r\nAnother way could be using collections. \r\n\r\n    final List&lt;Order&gt; orders=clients.getOrders();\r\n    Collections.sort(orders,Comparator.comparing(Order::getDate));\r\n    orders.stream().forEach(System.out::println);\r\n\r\n","title":"Sort by LocalDate a mapped stream","body":"<p><strong>Update</strong>\nIt seems that the implementation in the question calls client.getOrders() many times.\nNot sure if <code>client.getOrders()</code> returns the same result every time it is called. Also it is sorting only the dates, not the orders.</p>\n<p>The following code only makes a single <code>client.getOrders()</code> invocation and sorts the orders.</p>\n<pre><code>final List&lt;Order&gt; orders = clients.stream().map(clients -&gt; client.getOrders())\n.filter(Objects::nonNull)\n.flatMap(orders -&gt; orders.stream()) \n.sorted(Comparator.comparing(Order::getDate))\n.collect(Collectors.toList());\n//Printing orders' dates\norders.stream().map(Order::getDate).forEach(System.out::println);\n</code></pre>\n<p><strong>Information based on first question version</strong></p>\n<p>Based on the original information available, this should normally work:</p>\n<pre><code>clients.getOrders().stream()\n.sorted(Comparator.comparing(Order::getDate)) \n.forEach(System.out::println)\n</code></pre>\n<p>But you already mention you tried it.</p>\n<p>Another way could be using collections.</p>\n<pre><code>final List&lt;Order&gt; orders=clients.getOrders();\nCollections.sort(orders,Comparator.comparing(Order::getDate));\norders.stream().forEach(System.out::println);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13459822,"reputation":1807,"user_id":9712270,"display_name":"magicmn"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1634727101,"creation_date":1634727101,"answer_id":69644669,"question_id":69644278,"body_markdown":"I think you are sorting the wrong stream. If you use `flatMap` first and then `sorted` it should work.\r\n\r\n    clients.stream().filter(client -&gt; client.getOrders() != null).flatMap(c -&gt; c.getOrders().stream()).sorted(Comparator.comparing(Order::getDate)).forEach(System.out::println)","title":"Sort by LocalDate a mapped stream","body":"<p>I think you are sorting the wrong stream. If you use <code>flatMap</code> first and then <code>sorted</code> it should work.</p>\n<pre><code>clients.stream().filter(client -&gt; client.getOrders() != null).flatMap(c -&gt; c.getOrders().stream()).sorted(Comparator.comparing(Order::getDate)).forEach(System.out::println)\n</code></pre>\n"}],"owner":{"account_id":21239663,"reputation":104,"user_id":15623353,"display_name":"Kiji_T"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2582,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":69644669,"answer_count":2,"score":-1,"last_activity_date":1634731163,"creation_date":1634725550,"question_id":69644278,"body_markdown":"I have a class **client** that contains a list of **Orders**, that also contains a `LocalDate order_date`. \r\n\r\nAnd using Java 8 streams, I want to sort my list of Orders by Date.\r\n\r\nI have the following code : \r\n\r\n`clients.getOrders().stream().map(Order::getDate).sorted(LocalDate::compareTo)).forEach(System.out::println)`\r\n\r\nBut that does absolutely not sort. I also tried with `sorted(Comparator.comparing(Order::getDate))` but it prints the same.\r\n\r\n\r\n**EDIT** :\r\n\r\nDates are differents and my whole code line is this \r\n\r\n    clients.stream().filter(client -&gt; client.getOrders() != null).flatMap(c -&gt; c.getOrders().stream().map(Order::getDate).sorted(LocalDate::compareTo)).forEach(System.out::println)\r\n\r\nAnd the output I have is \r\n\r\n    2019-02-17\r\n    2019-12-05\r\n    2020-03-15\r\n    2018-10-05\r\n    2020-07-15\r\n    2021-01-01\r\n\r\n    Process finished with exit code 0\r\n\r\nand I want this \r\n\r\n    2018-10-05\r\n    2019-02-17\r\n    2019-12-05\r\n    2020-03-15\r\n    2020-07-15\r\n    2021-01-01","title":"Sort by LocalDate a mapped stream","body":"<p>I have a class <strong>client</strong> that contains a list of <strong>Orders</strong>, that also contains a <code>LocalDate order_date</code>.</p>\n<p>And using Java 8 streams, I want to sort my list of Orders by Date.</p>\n<p>I have the following code :</p>\n<p><code>clients.getOrders().stream().map(Order::getDate).sorted(LocalDate::compareTo)).forEach(System.out::println)</code></p>\n<p>But that does absolutely not sort. I also tried with <code>sorted(Comparator.comparing(Order::getDate))</code> but it prints the same.</p>\n<p><strong>EDIT</strong> :</p>\n<p>Dates are differents and my whole code line is this</p>\n<pre><code>clients.stream().filter(client -&gt; client.getOrders() != null).flatMap(c -&gt; c.getOrders().stream().map(Order::getDate).sorted(LocalDate::compareTo)).forEach(System.out::println)\n</code></pre>\n<p>And the output I have is</p>\n<pre><code>2019-02-17\n2019-12-05\n2020-03-15\n2018-10-05\n2020-07-15\n2021-01-01\n\nProcess finished with exit code 0\n</code></pre>\n<p>and I want this</p>\n<pre><code>2018-10-05\n2019-02-17\n2019-12-05\n2020-03-15\n2020-07-15\n2021-01-01\n</code></pre>\n"},{"tags":["java","logging","log4j","log4j2"],"comments":[{"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1634731114,"post_id":69645543,"comment_id":123102742,"body_markdown":"I&#39;m not aware of any libraries that do this. For what its worth, it epically fails the &#39;hard crash&#39; rule, _or_ it&#39;s useless: Either the log framework writes these to a temporary file (incurring just as much of a penalty), or it doesn&#39;t, and a VM or computer hard crash makes the logs poof out of existence. I don&#39;t think that&#39;s a showstopper, but it -might- explain why log frameworks aren&#39;t exactly knocking the door down to add this. I&#39;d look into logging via TCP to another system on local net to solve these issues more thoroughly.","body":"I&#39;m not aware of any libraries that do this. For what its worth, it epically fails the &#39;hard crash&#39; rule, <i>or</i> it&#39;s useless: Either the log framework writes these to a temporary file (incurring just as much of a penalty), or it doesn&#39;t, and a VM or computer hard crash makes the logs poof out of existence. I don&#39;t think that&#39;s a showstopper, but it -might- explain why log frameworks aren&#39;t exactly knocking the door down to add this. I&#39;d look into logging via TCP to another system on local net to solve these issues more thoroughly."},{"owner":{"account_id":4821703,"reputation":5934,"user_id":3892213,"accept_rate":80,"display_name":"best wishes"},"score":0,"creation_date":1634731397,"post_id":69645543,"comment_id":123102880,"body_markdown":"@rzwitserloot is it possible(are there frameworks?) that can achieve this out side logging frameworks? for example logging library may still log everything but there is a periodic job which filters higher latency logs from log file","body":"@rzwitserloot is it possible(are there frameworks?) that can achieve this out side logging frameworks? for example logging library may still log everything but there is a periodic job which filters higher latency logs from log file"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1634731717,"post_id":69645543,"comment_id":123103038,"body_markdown":"Why don&#39;t you add a correlation id to your log statements, ingest them into a log analysis tool and filter there? That way you could look for processes that have run into an error or were slow and look at their statements.","body":"Why don&#39;t you add a correlation id to your log statements, ingest them into a log analysis tool and filter there? That way you could look for processes that have run into an error or were slow and look at their statements."},{"owner":{"account_id":4821703,"reputation":5934,"user_id":3892213,"accept_rate":80,"display_name":"best wishes"},"score":0,"creation_date":1634731847,"post_id":69645543,"comment_id":123103096,"body_markdown":"this is next best option, as the log analysis tool like splunk are very costly.","body":"this is next best option, as the log analysis tool like splunk are very costly."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":1,"creation_date":1634731967,"post_id":69645543,"comment_id":123103152,"body_markdown":"Well, the ELK stack (Elasticsearch, Logstash, Kibana) should be free.","body":"Well, the ELK stack (Elasticsearch, Logstash, Kibana) should be free."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":1,"creation_date":1634732439,"post_id":69645543,"comment_id":123103349,"body_markdown":"Another, somewhat more radical, option might be to use events as log statements. For example, you could publish the &quot;log&quot; events to a broker like Kafka and use Kafka Streams to join events on correlation id (and most importantly the &quot;A ended&quot; event that might contain the exception or timing), filter them and publish the important ones into a topic. Then have a consumer that writes the filtered events to any storage you like (file, database, log analysis system etc.).","body":"Another, somewhat more radical, option might be to use events as log statements. For example, you could publish the &quot;log&quot; events to a broker like Kafka and use Kafka Streams to join events on correlation id (and most importantly the &quot;A ended&quot; event that might contain the exception or timing), filter them and publish the important ones into a topic. Then have a consumer that writes the filtered events to any storage you like (file, database, log analysis system etc.)."}],"owner":{"account_id":4821703,"reputation":5934,"user_id":3892213,"accept_rate":80,"display_name":"best wishes"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1634730896,"creation_date":1634730896,"question_id":69645543,"body_markdown":"Logging and log filtering is a solved problem and many libraries provide this out of box. But the filtering most of libraries provide is based on current context of log statement i.e. log level or MDC value or Class name etc. Is it possible to filter logs in hindsight? i.e.\r\n\r\nlet&#39;s say call graph looks like this\r\n```\r\nmethodA() -&gt; methodB() -&gt; methodC() \r\n```\r\nEach of methodA, methodB, methodC has a log statement in it. I want to log all of them if time overallTime taken in methodA is greater than X or if we caught an exception in methodA. \r\n\r\nThis will make sure that I can add aggressive log statements in my application, still the logs getting printed would be fairly less. \r\n\r\nThis might even be considered an antipattern considering the logs have to be stored in application buffer till the time we decide to print or drop them.","title":"Java Logging only latent or errored calls","body":"<p>Logging and log filtering is a solved problem and many libraries provide this out of box. But the filtering most of libraries provide is based on current context of log statement i.e. log level or MDC value or Class name etc. Is it possible to filter logs in hindsight? i.e.</p>\n<p>let's say call graph looks like this</p>\n<pre><code>methodA() -&gt; methodB() -&gt; methodC() \n</code></pre>\n<p>Each of methodA, methodB, methodC has a log statement in it. I want to log all of them if time overallTime taken in methodA is greater than X or if we caught an exception in methodA.</p>\n<p>This will make sure that I can add aggressive log statements in my application, still the logs getting printed would be fairly less.</p>\n<p>This might even be considered an antipattern considering the logs have to be stored in application buffer till the time we decide to print or drop them.</p>\n"},{"tags":["java","spring","intellij-idea"],"answers":[{"tags":[],"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634728595,"creation_date":1634728595,"answer_id":69645010,"question_id":67748105,"body_markdown":"Oddly this section of the dialog &quot;Override compiler parameters per module&quot; is not currently documented in the Idea help guide.\r\n\r\nWhat it does is add parameters to the `javac` compiler when compiling a specified module.\r\n\r\nAn example usage is to allow the compiler to access a class which is in a package not exported by a module (java platform module, not IDE or Maven module) that you are relying on.\r\n\r\nFor example, let&#39;s say you have the issue detailed here:\r\n\r\n * https://stackoverflow.com/questions/57167872/webconsolelistener-illegalaccesserror-in-javafx-12\r\n\r\nWhere you are using the JavaFX WebView, and want to listen to console messages generated by JavaScript running in the WebView.  There is a class (`com.sun.javafx.webkit.WebConsoleListener`) to allow listening to console message log events in the `com.sun.javafx.webkit` package.  But that package is private, internal API for the module and not exported by it.\r\n\r\nSo when you try to use the `WebConsoleListener` class, Idea will just highlight it in red and give a message that it can&#39;t find the class when you try to compile.  \r\n\r\nTo fix that you can press alt+enter on the red line and Idea will prompt you if you want to add an export statement to the module compilation options, if you say yes, it will record that option here, using, for example, the &quot;Compilation options&quot; for the module as:\r\n\r\n    --add-exports javafx.web/com.sun.javafx.webkit=com.example.webviewloadtest\r\n\r\nWhere, is this example, `com.example.webviewloadtest` is your own custom module name used within your application (the name of the module in the `module-info.java` file).\r\n\r\nOnce that is done, the classes in the specified package will be visible to your module during compilation and the IDE will no longer highlight the import and usage of the `WebConsoleListener` class in red (because the intelligent editor in IDE now also knows about the class, so can perform error checking during editing and auto-completion of its methods, etc).\r\n\r\nNote, that the options specified in the &quot;Override compiler parameters per-module&quot; options are only compiler options, they are *not* runtime options.\r\n\r\nIf you also want the class in this example visible at runtime you also need to manually add the  same `--add-exports` statement to the VM options of the runtime configuration that you use to run the application.\r\n\r\n    --add-exports javafx.web/com.sun.javafx.webkit=com.example.webviewloadtest\r\n\r\nNote, Eclipse IDE also has a similar feature to &quot;Override compiler parameters per module&quot;, see:\r\n\r\n * https://stackoverflow.com/questions/54068992/how-to-tell-eclipse-to-add-exports-when-compiling\r\n\r\n","title":"In IntelliJ, what the meaning of -- override compiler parameters per module?","body":"<p>Oddly this section of the dialog &quot;Override compiler parameters per module&quot; is not currently documented in the Idea help guide.</p>\n<p>What it does is add parameters to the <code>javac</code> compiler when compiling a specified module.</p>\n<p>An example usage is to allow the compiler to access a class which is in a package not exported by a module (java platform module, not IDE or Maven module) that you are relying on.</p>\n<p>For example, let's say you have the issue detailed here:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/57167872/webconsolelistener-illegalaccesserror-in-javafx-12\">WebConsoleListener IllegalAccessError in JavaFX 12</a></li>\n</ul>\n<p>Where you are using the JavaFX WebView, and want to listen to console messages generated by JavaScript running in the WebView.  There is a class (<code>com.sun.javafx.webkit.WebConsoleListener</code>) to allow listening to console message log events in the <code>com.sun.javafx.webkit</code> package.  But that package is private, internal API for the module and not exported by it.</p>\n<p>So when you try to use the <code>WebConsoleListener</code> class, Idea will just highlight it in red and give a message that it can't find the class when you try to compile.</p>\n<p>To fix that you can press alt+enter on the red line and Idea will prompt you if you want to add an export statement to the module compilation options, if you say yes, it will record that option here, using, for example, the &quot;Compilation options&quot; for the module as:</p>\n<pre><code>--add-exports javafx.web/com.sun.javafx.webkit=com.example.webviewloadtest\n</code></pre>\n<p>Where, is this example, <code>com.example.webviewloadtest</code> is your own custom module name used within your application (the name of the module in the <code>module-info.java</code> file).</p>\n<p>Once that is done, the classes in the specified package will be visible to your module during compilation and the IDE will no longer highlight the import and usage of the <code>WebConsoleListener</code> class in red (because the intelligent editor in IDE now also knows about the class, so can perform error checking during editing and auto-completion of its methods, etc).</p>\n<p>Note, that the options specified in the &quot;Override compiler parameters per-module&quot; options are only compiler options, they are <em>not</em> runtime options.</p>\n<p>If you also want the class in this example visible at runtime you also need to manually add the  same <code>--add-exports</code> statement to the VM options of the runtime configuration that you use to run the application.</p>\n<pre><code>--add-exports javafx.web/com.sun.javafx.webkit=com.example.webviewloadtest\n</code></pre>\n<p>Note, Eclipse IDE also has a similar feature to &quot;Override compiler parameters per module&quot;, see:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/54068992/how-to-tell-eclipse-to-add-exports-when-compiling\">How to tell eclipse to add-exports when compiling</a></li>\n</ul>\n"}],"owner":{"account_id":10940933,"reputation":571,"user_id":8040821,"display_name":"Ishan Garg"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":675,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1634730702,"creation_date":1622266601,"question_id":67748105,"body_markdown":"I am new to Intellj. What the meaning of   - override compiler parameters per module? what happen if i remove parameter ?The screen shot for more detail.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/CC1m2.png","title":"In IntelliJ, what the meaning of -- override compiler parameters per module?","body":"<p>I am new to Intellj. What the meaning of   - override compiler parameters per module? what happen if i remove parameter ?The screen shot for more detail.</p>\n<p><a href=\"https://i.stack.imgur.com/CC1m2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CC1m2.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","flowable"],"answers":[{"tags":[],"owner":{"account_id":23070791,"reputation":11,"user_id":17190050,"display_name":"Vamshi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634633633,"creation_date":1634633633,"answer_id":69627844,"question_id":69432474,"body_markdown":"You can first deploy the dmn into the dmn engine.\r\nThen you can have a bpmn with a Decision Task(a service task with type as dmn).\r\nThis will internally call the dmn engine to evaluate the result.\r\nYou can refer this [Flowable BPMN DmnActivityBehavior][1] to check the java api calling from bpmn to dmn.\r\n\r\n\r\n  [1]: https://github.com/flowable/flowable-engine/blob/main/modules/flowable-engine/src/main/java/org/flowable/engine/impl/bpmn/behavior/DmnActivityBehavior.java","title":"Flowable BPMN with DMN using Java API","body":"<p>You can first deploy the dmn into the dmn engine.\nThen you can have a bpmn with a Decision Task(a service task with type as dmn).\nThis will internally call the dmn engine to evaluate the result.\nYou can refer this <a href=\"https://github.com/flowable/flowable-engine/blob/main/modules/flowable-engine/src/main/java/org/flowable/engine/impl/bpmn/behavior/DmnActivityBehavior.java\" rel=\"nofollow noreferrer\">Flowable BPMN DmnActivityBehavior</a> to check the java api calling from bpmn to dmn.</p>\n"},{"tags":[],"owner":{"account_id":2141493,"reputation":2417,"user_id":1900006,"accept_rate":36,"display_name":"Samy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634730685,"creation_date":1634730685,"answer_id":69645499,"question_id":69432474,"body_markdown":"All we got to do is to make process engine aware of the DMN resource xml and DMNEngineConfigurator. Below snippet for reference\r\n\r\n    private static void deployProcess(ProcessEngine processEngine) {\r\n        RepositoryService repositoryService = processEngine.getRepositoryService();\r\n        Deployment deployment = repositoryService.createDeployment()\r\n                .addClasspathResource(&quot;LoanRequest.bpmn20.xml&quot;)\r\n                .addClasspathResource(&quot;EvaluateLoanCreate.dmn.xml&quot;)\r\n                .deploy();\r\n    }\r\n\r\n        private static DmnEngineConfigurator getDMNEngineConfigurator(){\r\n        DmnEngineConfiguration dmnEngineConfiguration = new DmnEngineConfiguration()\r\n                .setJdbcUrl(&quot;jdbc:h2:tcp://localhost/C:/user/Program Files/h2-2019-03-13/test;SCHEMA=flowabledemo;DB_CLOSE_DELAY=-1&quot;)\r\n                .setJdbcUsername(&quot;user&quot;)\r\n                .setJdbcPassword(&quot;Password&quot;)\r\n                .setJdbcDriver(&quot;org.h2.Driver&quot;)\r\n                .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_TRUE);\r\n        DmnEngineConfigurator dmnEngineConfigurator = new DmnEngineConfigurator()\r\n                .setDmnEngineConfiguration(dmnEngineConfiguration);\r\n\r\n\r\n        return dmnEngineConfigurator;\r\n    }\r\n\r\n    ProcessEngineConfiguration cfg = (ProcessEngineConfiguration) new StandaloneProcessEngineConfiguration().setConfigurators(Arrays.asList(getDMNEngineConfigurator()));\r\n","title":"Flowable BPMN with DMN using Java API","body":"<p>All we got to do is to make process engine aware of the DMN resource xml and DMNEngineConfigurator. Below snippet for reference</p>\n<pre><code>private static void deployProcess(ProcessEngine processEngine) {\n    RepositoryService repositoryService = processEngine.getRepositoryService();\n    Deployment deployment = repositoryService.createDeployment()\n            .addClasspathResource(&quot;LoanRequest.bpmn20.xml&quot;)\n            .addClasspathResource(&quot;EvaluateLoanCreate.dmn.xml&quot;)\n            .deploy();\n}\n\n    private static DmnEngineConfigurator getDMNEngineConfigurator(){\n    DmnEngineConfiguration dmnEngineConfiguration = new DmnEngineConfiguration()\n            .setJdbcUrl(&quot;jdbc:h2:tcp://localhost/C:/user/Program Files/h2-2019-03-13/test;SCHEMA=flowabledemo;DB_CLOSE_DELAY=-1&quot;)\n            .setJdbcUsername(&quot;user&quot;)\n            .setJdbcPassword(&quot;Password&quot;)\n            .setJdbcDriver(&quot;org.h2.Driver&quot;)\n            .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_TRUE);\n    DmnEngineConfigurator dmnEngineConfigurator = new DmnEngineConfigurator()\n            .setDmnEngineConfiguration(dmnEngineConfiguration);\n\n\n    return dmnEngineConfigurator;\n}\n\nProcessEngineConfiguration cfg = (ProcessEngineConfiguration) new StandaloneProcessEngineConfiguration().setConfigurators(Arrays.asList(getDMNEngineConfigurator()));\n</code></pre>\n"}],"owner":{"account_id":2141493,"reputation":2417,"user_id":1900006,"accept_rate":36,"display_name":"Samy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":383,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1634730685,"creation_date":1633333285,"question_id":69432474,"body_markdown":"I am new to Flowable and exploring its features by using Flowable JAVA API.\r\n\r\nHave managed to design a bpmn flow and execute it using ProcessEngine of flowable-engine java library from Flowable.\r\n\r\n      &lt;groupId&gt;org.flowable&lt;/groupId&gt;\r\n      &lt;artifactId&gt;flowable-engine&lt;/artifactId&gt;\r\n      &lt;version&gt;6.7.0&lt;/version&gt;\r\n\r\nLater, I managed to create a Decision table(*.dmn.xml) and also referenced it to a business process flow(*.bpmn.xml) file by following reference link mentioned below \r\n\r\nhttps://flowable.com/open-source/docs/dmn/ch06-DMN-Introduction/\r\n\r\n\r\nPlease let me know how do I use dmn with bpmn using Flowable JAVA API.","title":"Flowable BPMN with DMN using Java API","body":"<p>I am new to Flowable and exploring its features by using Flowable JAVA API.</p>\n<p>Have managed to design a bpmn flow and execute it using ProcessEngine of flowable-engine java library from Flowable.</p>\n<pre><code>  &lt;groupId&gt;org.flowable&lt;/groupId&gt;\n  &lt;artifactId&gt;flowable-engine&lt;/artifactId&gt;\n  &lt;version&gt;6.7.0&lt;/version&gt;\n</code></pre>\n<p>Later, I managed to create a Decision table(<em>.dmn.xml) and also referenced it to a business process flow(</em>.bpmn.xml) file by following reference link mentioned below</p>\n<p><a href=\"https://flowable.com/open-source/docs/dmn/ch06-DMN-Introduction/\" rel=\"nofollow noreferrer\">https://flowable.com/open-source/docs/dmn/ch06-DMN-Introduction/</a></p>\n<p>Please let me know how do I use dmn with bpmn using Flowable JAVA API.</p>\n"},{"tags":["java","select","embedded","android-room"],"answers":[{"tags":[],"owner":{"account_id":6077735,"reputation":52951,"user_id":4744514,"accept_rate":96,"display_name":"MikeT"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1634730346,"creation_date":1634729060,"answer_id":69645106,"question_id":69644334,"body_markdown":"As your TaskWithProject class has the project embedded, then it expects, to get the columns for the project and then build the task(s) from that and hence when you use `SELECT * FROM Task` it doesn&#39;t have the pertinent columns (with the join it does BUT may not work as expected).\r\n\r\n- really TaskWithProject is ProjectWithTask.\r\n\r\nSo either use `SELECT * FROM project` or use a POJO with the Task Embedded and the Project as the @Relation (with `SELECT * FROM task`).\r\n\r\n","title":"Room Android, select on two tables","body":"<p>As your TaskWithProject class has the project embedded, then it expects, to get the columns for the project and then build the task(s) from that and hence when you use <code>SELECT * FROM Task</code> it doesn't have the pertinent columns (with the join it does BUT may not work as expected).</p>\n<ul>\n<li>really TaskWithProject is ProjectWithTask.</li>\n</ul>\n<p>So either use <code>SELECT * FROM project</code> or use a POJO with the Task Embedded and the Project as the @Relation (with <code>SELECT * FROM task</code>).</p>\n"}],"owner":{"account_id":22435751,"reputation":21,"user_id":16641030,"display_name":"Emmcy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":309,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69645106,"answer_count":1,"score":1,"last_activity_date":1634730346,"creation_date":1634725748,"question_id":69644334,"body_markdown":"I am new to Room and I&#39;m struggling with it.\r\nI would like to do a simple select over two tables named Project and Tasks. These are the two classes and a third to link them : \r\n\r\n```\r\n\r\n    @Entity\r\n    public class Project {\r\n        @PrimaryKey(autoGenerate = true)\r\n        private final long id;\r\n        @NonNull\r\n        private final String name;\r\n        @ColorInt\r\n        private final Integer color;\r\n       }\r\n    \r\n    @Entity(foreignKeys = @ForeignKey(entity = Project.class, parentColumns = &quot;id&quot;, childColumns = &quot;projectId&quot;))\r\n    public class Task {\r\n    \r\n        @PrimaryKey(autoGenerate = true)\r\n        private long idTask;\r\n    \r\n        // cl&#233; commune\r\n        private long projectId;\r\n    \r\n        @NonNull\r\n        private String nameTask;\r\n    \r\n        public long creationTimestamp;\r\n    // constructor, getters, setters\r\n       }\r\n    \r\n    public class TaskWithProject {\r\n        @Embedded public Project project;\r\n        @Relation(parentColumn = &quot;id&quot;, entityColumn = &quot;projectId&quot;)\r\n        public Task task;\r\n    }\r\n\r\n```\r\n\r\nI have tried many things in my Dao class. Here are two of those : \r\n```\r\n\r\n    @Dao\r\n    public interface TaskDao {\r\n    (...)\r\n    \r\n    // Solution 1\r\n    @Query(&quot;SELECT * FROM Task t JOIN Project p ON t.projectId = p.id&quot;)\r\n        LiveData&lt;List&lt;TaskWithProject&gt;&gt; getTaskWithProject();\r\n    \r\n    // Solution 2 from https://developer.android.com/training/data-storage/room/relationships\r\n    @Transaction\r\n    @Query(&quot;SELECT * FROM Task&quot;)\r\n    LiveData&lt;List&lt;TaskWithProject&gt;&gt; getTaskWithProject();\r\n\r\n```\r\n\r\nMy database is populated with these datas (no problem in the database inspector) : \r\n```\r\n\r\n    projectDao.insertProject(new Project(0, &quot;Projet Tartampion&quot;, 0xFFEADAD1));\r\n                    projectDao.insertProject(new Project(0, &quot;Projet Lucidia&quot;, 0xFFB4CDBA));\r\n                    projectDao.insertProject(new Project(0, &quot;Projet &quot; + &quot;Circus&quot;, 0xFFA3CED2));\r\n                    taskDao.insertTask(new Task(0, 1, &quot;Task 1 - Tartampion&quot;));\r\n                    taskDao.insertTask(new Task(0, 1, &quot;Task 2 - Tartampion&quot;));\r\n                    taskDao.insertTask(new Task(0, 2, &quot;Task 1 - Lucidia&quot;));\r\n\r\n```\r\n\r\nI get the data with this function : \r\n\r\n```\r\n\r\n    public LiveData&lt;List&lt;TaskViewStateItem&gt;&gt; getAllTasks() {\r\n            return Transformations.map(repository.getTaskWithProject(), tasks -&gt; {\r\n                List&lt;TaskViewStateItem&gt; liststateitems = new ArrayList&lt;&gt;();\r\n                    for (TaskWithProject t : tasks) {\r\n                        Log.i(TAG, &quot;getAllTasks: &quot;+ t.toString());\r\n                        liststateitems.add(new TaskViewStateItem(t.task.getIdTask(), t.task.getNameTask(), t.project.getName(), t.project.getColor(), t.task.getCreationTimestamp()));\r\n                    }\r\n                }\r\n                return liststateitems;\r\n            });\r\n        }\r\n\r\n```\r\n\r\nWith the solution 1 above I have 3 entries as expected but with a duplicate one.\r\n\r\n```\r\n\r\n    I/Log&#160;ViewModel: getAllTasks: TaskWithProject{project=Project{id=1, name=&#39;Projet Tartampion&#39;, color=-1385775}, task=Task{idTask=2, projectId=1, nameTask=&#39;Task 2 - Tartampion&#39;, creationTimestamp=1634723235}}\r\n    I/Log&#160;ViewModel: getAllTasks: TaskWithProject{project=Project{id=1, name=&#39;Projet Tartampion&#39;, color=-1385775}, task=Task{idTask=2, projectId=1, nameTask=&#39;Task 2 - Tartampion&#39;, creationTimestamp=1634723235}}\r\n        getAllTasks: TaskWithProject{project=Project{id=2, name=&#39;Projet Lucidia&#39;, color=-4928070}, task=Task{idTask=3, projectId=2, nameTask=&#39;Task 1 - Lucidia&#39;, creationTimestamp=1634723235}}\r\n\r\n```\r\n\r\nThe solution 2 does not compile\r\n```\r\n\r\n    error: Not sure how to convert a Cursor to this method&#39;s return type (com.cleanup.todoc.model.TaskWithProject).\r\n        LiveData&lt;List&lt;TaskWithProject&gt;&gt; getTaskWithProject();\r\n                                        ^\r\n\r\n```\r\n\r\nI have no idea what I did wrong. So thank you very much for any help you can give me\r\n\r\n","title":"Room Android, select on two tables","body":"<p>I am new to Room and I'm struggling with it.\nI would like to do a simple select over two tables named Project and Tasks. These are the two classes and a third to link them :</p>\n<pre><code>\n    @Entity\n    public class Project {\n        @PrimaryKey(autoGenerate = true)\n        private final long id;\n        @NonNull\n        private final String name;\n        @ColorInt\n        private final Integer color;\n       }\n    \n    @Entity(foreignKeys = @ForeignKey(entity = Project.class, parentColumns = &quot;id&quot;, childColumns = &quot;projectId&quot;))\n    public class Task {\n    \n        @PrimaryKey(autoGenerate = true)\n        private long idTask;\n    \n        // clé commune\n        private long projectId;\n    \n        @NonNull\n        private String nameTask;\n    \n        public long creationTimestamp;\n    // constructor, getters, setters\n       }\n    \n    public class TaskWithProject {\n        @Embedded public Project project;\n        @Relation(parentColumn = &quot;id&quot;, entityColumn = &quot;projectId&quot;)\n        public Task task;\n    }\n\n</code></pre>\n<p>I have tried many things in my Dao class. Here are two of those :</p>\n<pre><code>\n    @Dao\n    public interface TaskDao {\n    (...)\n    \n    // Solution 1\n    @Query(&quot;SELECT * FROM Task t JOIN Project p ON t.projectId = p.id&quot;)\n        LiveData&lt;List&lt;TaskWithProject&gt;&gt; getTaskWithProject();\n    \n    // Solution 2 from https://developer.android.com/training/data-storage/room/relationships\n    @Transaction\n    @Query(&quot;SELECT * FROM Task&quot;)\n    LiveData&lt;List&lt;TaskWithProject&gt;&gt; getTaskWithProject();\n\n</code></pre>\n<p>My database is populated with these datas (no problem in the database inspector) :</p>\n<pre><code>\n    projectDao.insertProject(new Project(0, &quot;Projet Tartampion&quot;, 0xFFEADAD1));\n                    projectDao.insertProject(new Project(0, &quot;Projet Lucidia&quot;, 0xFFB4CDBA));\n                    projectDao.insertProject(new Project(0, &quot;Projet &quot; + &quot;Circus&quot;, 0xFFA3CED2));\n                    taskDao.insertTask(new Task(0, 1, &quot;Task 1 - Tartampion&quot;));\n                    taskDao.insertTask(new Task(0, 1, &quot;Task 2 - Tartampion&quot;));\n                    taskDao.insertTask(new Task(0, 2, &quot;Task 1 - Lucidia&quot;));\n\n</code></pre>\n<p>I get the data with this function :</p>\n<pre><code>\n    public LiveData&lt;List&lt;TaskViewStateItem&gt;&gt; getAllTasks() {\n            return Transformations.map(repository.getTaskWithProject(), tasks -&gt; {\n                List&lt;TaskViewStateItem&gt; liststateitems = new ArrayList&lt;&gt;();\n                    for (TaskWithProject t : tasks) {\n                        Log.i(TAG, &quot;getAllTasks: &quot;+ t.toString());\n                        liststateitems.add(new TaskViewStateItem(t.task.getIdTask(), t.task.getNameTask(), t.project.getName(), t.project.getColor(), t.task.getCreationTimestamp()));\n                    }\n                }\n                return liststateitems;\n            });\n        }\n\n</code></pre>\n<p>With the solution 1 above I have 3 entries as expected but with a duplicate one.</p>\n<pre><code>\n    I/Log ViewModel: getAllTasks: TaskWithProject{project=Project{id=1, name='Projet Tartampion', color=-1385775}, task=Task{idTask=2, projectId=1, nameTask='Task 2 - Tartampion', creationTimestamp=1634723235}}\n    I/Log ViewModel: getAllTasks: TaskWithProject{project=Project{id=1, name='Projet Tartampion', color=-1385775}, task=Task{idTask=2, projectId=1, nameTask='Task 2 - Tartampion', creationTimestamp=1634723235}}\n        getAllTasks: TaskWithProject{project=Project{id=2, name='Projet Lucidia', color=-4928070}, task=Task{idTask=3, projectId=2, nameTask='Task 1 - Lucidia', creationTimestamp=1634723235}}\n\n</code></pre>\n<p>The solution 2 does not compile</p>\n<pre><code>\n    error: Not sure how to convert a Cursor to this method's return type (com.cleanup.todoc.model.TaskWithProject).\n        LiveData&lt;List&lt;TaskWithProject&gt;&gt; getTaskWithProject();\n                                        ^\n\n</code></pre>\n<p>I have no idea what I did wrong. So thank you very much for any help you can give me</p>\n"},{"tags":["java","binary","bit"],"answers":[{"tags":[],"owner":{"account_id":45865,"reputation":11735,"user_id":135351,"accept_rate":80,"display_name":"dave"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1480400301,"creation_date":1480400301,"answer_id":40859001,"question_id":40858915,"body_markdown":"I think the line generating the error is:\r\n\r\n    bin_nums[i] = (String.format(&quot;%032d&quot;, (Long.parseLong(Long.toBinaryString(dec_nums[i])))));\r\n\r\nYou are converting `dec_nums[i]` to a binary string and then trying to parse that as a `long`. That&#39;s probably what&#39;s triggering your error.\r\n\r\nIt looks like you just want to store the `string` value of your numbers as binaries in `bin_nums`, so what I think you want is simply:\r\n\r\n    bin_nums[i] = Long.toBinaryString(dec_nums[i]);\r\n\r\nThat should get you over the first hurdle. There may be other issues.","title":"Error while flipping bits","body":"<p>I think the line generating the error is:</p>\n\n<pre><code>bin_nums[i] = (String.format(\"%032d\", (Long.parseLong(Long.toBinaryString(dec_nums[i])))));\n</code></pre>\n\n<p>You are converting <code>dec_nums[i]</code> to a binary string and then trying to parse that as a <code>long</code>. That's probably what's triggering your error.</p>\n\n<p>It looks like you just want to store the <code>string</code> value of your numbers as binaries in <code>bin_nums</code>, so what I think you want is simply:</p>\n\n<pre><code>bin_nums[i] = Long.toBinaryString(dec_nums[i]);\n</code></pre>\n\n<p>That should get you over the first hurdle. There may be other issues.</p>\n"},{"tags":[],"owner":{"account_id":8472478,"reputation":4135,"user_id":6354622,"accept_rate":76,"display_name":"User_Targaryen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1480507789,"creation_date":1480507789,"answer_id":40888020,"question_id":40858915,"body_markdown":"I have modified your solution to keep it simple and concise and clean!!! Please have a look:\r\n\r\n    import java.io.*;\r\n    import java.util.*;\r\n    \r\n    public class Solution {\r\n    \r\n    public static void main(String[] args) {\r\n        Scanner input = new Scanner(System.in);\r\n        int cases = input.nextInt(); // N&#250;mero de casos\r\n        /*Long[] dec_nums = new Long[cases]; You don&#39;t need this. Read a number and flip it on the go, without storing*/\r\n        long n;\r\n        int bin[] = new int[32];\r\n        for (int i = 0; i &lt; cases; i++) {\r\n            n = input.nextLong(); // Almacenamiento de casos\r\n            for(int j = 0; j &lt; 32; j++){\r\n                bin[j] = 0;\r\n            }\r\n            long num = n;\r\n            int k = 0;\r\n            while(num != 0){\r\n                bin[k++] = (int)num%2;\r\n                num = num/2;\r\n            }\r\n            //Flipping the binary digits now\r\n            k = 0;\r\n            while(k &lt; 32){\r\n                bin[k] = (bin[k] + 1)%2;\r\n                k++;\r\n            }\r\n            long ans = 0;\r\n            long p = 1;\r\n            k = 0;\r\n            while(k &lt; 32){\r\n                ans = ans + (bin[k]*p);\r\n                k++;\r\n                p = p*2;\r\n            }\r\n            System.out.println(ans);\r\n        }\r\n        \r\n    }\r\n    }","title":"Error while flipping bits","body":"<p>I have modified your solution to keep it simple and concise and clean!!! Please have a look:</p>\n\n<pre><code>import java.io.*;\nimport java.util.*;\n\npublic class Solution {\n\npublic static void main(String[] args) {\n    Scanner input = new Scanner(System.in);\n    int cases = input.nextInt(); // Número de casos\n    /*Long[] dec_nums = new Long[cases]; You don't need this. Read a number and flip it on the go, without storing*/\n    long n;\n    int bin[] = new int[32];\n    for (int i = 0; i &lt; cases; i++) {\n        n = input.nextLong(); // Almacenamiento de casos\n        for(int j = 0; j &lt; 32; j++){\n            bin[j] = 0;\n        }\n        long num = n;\n        int k = 0;\n        while(num != 0){\n            bin[k++] = (int)num%2;\n            num = num/2;\n        }\n        //Flipping the binary digits now\n        k = 0;\n        while(k &lt; 32){\n            bin[k] = (bin[k] + 1)%2;\n            k++;\n        }\n        long ans = 0;\n        long p = 1;\n        k = 0;\n        while(k &lt; 32){\n            ans = ans + (bin[k]*p);\n            k++;\n            p = p*2;\n        }\n        System.out.println(ans);\n    }\n\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18875627,"reputation":41,"user_id":13769225,"display_name":"sachin rai"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634730143,"creation_date":1634729669,"answer_id":69645231,"question_id":40858915,"body_markdown":" 1. Convert the given string to Base2 that is binary\r\n 2. Then create a array and fill it with Zero before appending it to converted binary form of the number and then invert the number using map and join it\r\n\r\n```javascript\r\nfunction flippingBits(n: number): number {\r\n    const binaryForm = n.toString(2)\r\n    let bit32 = (new Array(32 - binaryForm.length).fill(0).join(&#39;&#39;) + binaryForm).split(&#39;&#39;).map((x) =&gt; 1 - Number(x)).join(&#39;&#39;)\r\n    return (parseInt(bit32, 2))\r\n}\r\n```","title":"Error while flipping bits","body":"<ol>\n<li>Convert the given string to Base2 that is binary</li>\n<li>Then create a array and fill it with Zero before appending it to converted binary form of the number and then invert the number using map and join it</li>\n</ol>\n<pre class=\"lang-js prettyprint-override\"><code>function flippingBits(n: number): number {\n    const binaryForm = n.toString(2)\n    let bit32 = (new Array(32 - binaryForm.length).fill(0).join('') + binaryForm).split('').map((x) =&gt; 1 - Number(x)).join('')\n    return (parseInt(bit32, 2))\n}\n</code></pre>\n"}],"owner":{"account_id":9160206,"reputation":33,"user_id":6811780,"display_name":"Jonathan Herrej&#243;n"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":168,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1634730143,"creation_date":1480399930,"question_id":40858915,"body_markdown":"I was solving a challenge from HackerRank, it&#39;s called Flipping Bits\r\nFrom here: https://www.hackerrank.com/challenges/flipping-bits\r\nAs I see every case that I have tried is correct\r\nYou first input the number of numbers you want to convert.\r\nThen given a number, it converts it to a 32 unsigned bit binary. Then it flips all the bits 0-&gt;1 &amp; 1-&gt;0 and then it is converted to decimal and printed.\r\nHere&#39;s my code, I know it&#39;s not optimal and it would give me runtime error but i want to start from here, having the code right.\r\n\r\n\r\n\r\n    import java.io.*;\r\n    import java.util.*;\r\n\r\n    public class Solution {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tScanner input = new Scanner(System.in);\r\n\t\tint cases = input.nextInt(); // N&#250;mero de casos\r\n\t\tLong[] dec_nums = new Long[cases]; // Arreglo contenedor de casos\r\n\t\tfor (int i = 0; i &lt; cases; i++) {\r\n\t\t\tdec_nums[i] = input.nextLong(); // Almacenamiento de casos\r\n\t\t}\r\n\t\tString[] bin_nums = new String[cases]; // Arreglo con dec-bin\r\n\t\tfor (int i = 0; i &lt; cases; i++) { //Convertir cada decimal a binario\r\n\t\t\tbin_nums[i] = (String.format(&quot;%032d&quot;, (Long.parseLong(Long.toBinaryString(dec_nums[i]))))); \r\n\t\t\t\t\t\t\t\t\t\t//Rellenar con 0&#39;s\r\n\t\t}\r\n\t\tString[] final_bin=new String[cases];\r\n\t\tfor(int i=0;i&lt;cases;i++){\r\n\t\t\tfinal_bin[i]=&quot;&quot;;\r\n\t\t\tfor(int j=0;j&lt;bin_nums[i].length();j++){\r\n\t\t\t\tif(bin_nums[i].charAt(j)==&#39;0&#39;){\r\n\t\t\t\t\tfinal_bin[i]+=&quot;1&quot;;\r\n\t\t\t\t}\r\n\t\t\t\tif(bin_nums[i].charAt(j)==&#39;1&#39;){\r\n\t\t\t\t\tfinal_bin[i]+=&quot;0&quot;;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tlong[]final_dec= new long[cases];\r\n\t\tfor(int i=0; i&lt;cases;i++){\r\n\t\t\tfinal_dec[i]=0;\r\n\t\t\tfor(int j=0; j&lt;32;j++){\r\n\t\t\t\tif (final_bin[i].charAt(j)==&#39;1&#39;){\r\n\t\t\t\t\tfinal_dec[i]=Long.parseLong(final_bin[i], 2);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t//Imprimir binarios\r\n\t\tSystem.out.println(&quot;Binarios:&quot;);\r\n\t\tfor (int i = 0; i &lt; cases; i++) {\r\n\t\t\tSystem.out.println(bin_nums[i]);\r\n\t\t}\r\n\t\t//Imprimir binarios flipped\r\n\t\tSystem.out.print(&quot;Flipped: &quot;);\r\n\t\tSystem.out.println(&quot; &quot;);\r\n\t\tfor(int i=0; i&lt;cases; i++){\r\n\t\t\tSystem.out.println(final_bin[i]);\r\n\t\t}\r\n\t\t\r\n\t\tSystem.out.println(&quot;Decimales&quot;);\r\n\t\tSystem.out.println(&quot; &quot;);\r\n\t\tfor(int i=0; i&lt;cases; i++){\r\n\t\t\tSystem.out.println(final_dec[i]);\r\n\t\t}\r\n\t}\r\n    }\r\n\r\nThe problem is where I input 2147483647\r\nIt shows:\r\n    &gt;Exception in thread &quot;main&quot; java.lang.NumberFormatException: For input     &gt;string: &quot;1111111111111111111111111111111&quot;\r\n&gt;\tat &gt;java.lang.NumberFormatException.forInputString(NumberFormatException.java&gt;:65)\r\n&gt;\tat java.lang.Long.parseLong(Long.java:592)\r\n&gt;\tat java.lang.Long.parseLong(Long.java:631)\r\n&gt;\tat flipping_bits_v3.Solution.main(Solution.java:17)\r\n\r\nand I don&#39;t know what it could be, is it a special case i haven&#39;t handled?\r\nThank you.\r\n","title":"Error while flipping bits","body":"<p>I was solving a challenge from HackerRank, it's called Flipping Bits\nFrom here: <a href=\"https://www.hackerrank.com/challenges/flipping-bits\" rel=\"nofollow noreferrer\">https://www.hackerrank.com/challenges/flipping-bits</a>\nAs I see every case that I have tried is correct\nYou first input the number of numbers you want to convert.\nThen given a number, it converts it to a 32 unsigned bit binary. Then it flips all the bits 0->1 &amp; 1->0 and then it is converted to decimal and printed.\nHere's my code, I know it's not optimal and it would give me runtime error but i want to start from here, having the code right.</p>\n\n<pre><code>import java.io.*;\nimport java.util.*;\n\npublic class Solution {\n\npublic static void main(String[] args) {\n    Scanner input = new Scanner(System.in);\n    int cases = input.nextInt(); // Número de casos\n    Long[] dec_nums = new Long[cases]; // Arreglo contenedor de casos\n    for (int i = 0; i &lt; cases; i++) {\n        dec_nums[i] = input.nextLong(); // Almacenamiento de casos\n    }\n    String[] bin_nums = new String[cases]; // Arreglo con dec-bin\n    for (int i = 0; i &lt; cases; i++) { //Convertir cada decimal a binario\n        bin_nums[i] = (String.format(\"%032d\", (Long.parseLong(Long.toBinaryString(dec_nums[i]))))); \n                                    //Rellenar con 0's\n    }\n    String[] final_bin=new String[cases];\n    for(int i=0;i&lt;cases;i++){\n        final_bin[i]=\"\";\n        for(int j=0;j&lt;bin_nums[i].length();j++){\n            if(bin_nums[i].charAt(j)=='0'){\n                final_bin[i]+=\"1\";\n            }\n            if(bin_nums[i].charAt(j)=='1'){\n                final_bin[i]+=\"0\";\n            }\n        }\n    }\n    long[]final_dec= new long[cases];\n    for(int i=0; i&lt;cases;i++){\n        final_dec[i]=0;\n        for(int j=0; j&lt;32;j++){\n            if (final_bin[i].charAt(j)=='1'){\n                final_dec[i]=Long.parseLong(final_bin[i], 2);\n            }\n        }\n    }\n    //Imprimir binarios\n    System.out.println(\"Binarios:\");\n    for (int i = 0; i &lt; cases; i++) {\n        System.out.println(bin_nums[i]);\n    }\n    //Imprimir binarios flipped\n    System.out.print(\"Flipped: \");\n    System.out.println(\" \");\n    for(int i=0; i&lt;cases; i++){\n        System.out.println(final_bin[i]);\n    }\n\n    System.out.println(\"Decimales\");\n    System.out.println(\" \");\n    for(int i=0; i&lt;cases; i++){\n        System.out.println(final_dec[i]);\n    }\n}\n}\n</code></pre>\n\n<p>The problem is where I input 2147483647\nIt shows:</p>\n\n<blockquote>\n  <p>Exception in thread \"main\" java.lang.NumberFormatException: For input     >string: \"1111111111111111111111111111111\"\n    at >java.lang.NumberFormatException.forInputString(NumberFormatException.java>:65)\n    at java.lang.Long.parseLong(Long.java:592)\n    at java.lang.Long.parseLong(Long.java:631)\n    at flipping_bits_v3.Solution.main(Solution.java:17)</p>\n</blockquote>\n\n<p>and I don't know what it could be, is it a special case i haven't handled?\nThank you.</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":8005552,"reputation":628,"user_id":6426446,"accept_rate":78,"display_name":"bramhaag"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634730045,"creation_date":1634730045,"answer_id":69645332,"question_id":69645056,"body_markdown":"`-Xincgc` is an old JVM option that enabled incremental garbage collection. It has been removed in the latest versions of Java. To start the JVM, you should remove this flag.\r\n\r\nIf for whatever reason you still need to tune the garbage collector, follow [this guide][1] to find the flags that work for your specific application.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/gctuning/introduction-garbage-collection-tuning.html#GUID-326EB4CF-8C8C-4267-8355-21AB04F0D304","title":"Java Virtual Machine Manager","body":"<p><code>-Xincgc</code> is an old JVM option that enabled incremental garbage collection. It has been removed in the latest versions of Java. To start the JVM, you should remove this flag.</p>\n<p>If for whatever reason you still need to tune the garbage collector, follow <a href=\"https://docs.oracle.com/en/java/javase/17/gctuning/introduction-garbage-collection-tuning.html#GUID-326EB4CF-8C8C-4267-8355-21AB04F0D304\" rel=\"nofollow noreferrer\">this guide</a> to find the flags that work for your specific application.</p>\n"}],"owner":{"account_id":23090090,"reputation":9,"user_id":17201081,"display_name":"Chan does things"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1634751164,"answer_count":1,"score":0,"last_activity_date":1634730045,"creation_date":1634728796,"question_id":69645056,"body_markdown":"Error: Could not create the Java Virtual Machine.\r\nError: A fatal exception has occurred. Program will exit.\r\nConsole errors: Picked up _JAVA_OPTIONS: -Xmx512M\r\nUnrecognized option: -Xincgc\r\n","title":"Java Virtual Machine Manager","body":"<p>Error: Could not create the Java Virtual Machine.\nError: A fatal exception has occurred. Program will exit.\nConsole errors: Picked up _JAVA_OPTIONS: -Xmx512M\nUnrecognized option: -Xincgc</p>\n"},{"tags":["java","mysql","jdbc","mysql-connector"],"comments":[{"owner":{"account_id":442447,"reputation":3141,"user_id":833070,"accept_rate":100,"display_name":"Draken"},"score":0,"creation_date":1634729899,"post_id":69644941,"comment_id":123102218,"body_markdown":"From TheGlovner: *&quot;Do you know the version of the jdbc driver you are using, online searches seem to suggest there was a bug in 3.0.7 with an infinite loop. Which would lead to the stackoverflow.\n\nhttp://www.websina.com/bugzero/faq/exception-mysql-overflow.html&quot;*\n\n(https://stackoverflow.com/a/69645225/833070)","body":"From TheGlovner: <i>&quot;Do you know the version of the jdbc driver you are using, online searches seem to suggest there was a bug in 3.0.7 with an infinite loop. Which would lead to the stackoverflow.  <a href=\"http://www.websina.com/bugzero/faq/exception-mysql-overflow.html\" rel=\"nofollow noreferrer\">websina.com/bugzero/faq/exception-mysql-overflow.html</a>&quot;</i>  (<a href=\"https://stackoverflow.com/a/69645225/833070\">stackoverflow.com/a/69645225/833070</a>)"},{"owner":{"account_id":9749074,"reputation":27,"user_id":7227963,"accept_rate":12,"display_name":"KSV97"},"score":0,"creation_date":1634735135,"post_id":69644941,"comment_id":123104610,"body_markdown":"I am actually using a higher version, but thanks for the hint.","body":"I am actually using a higher version, but thanks for the hint."}],"answers":[{"tags":[],"owner":{"account_id":71085,"reputation":105190,"user_id":205608,"accept_rate":69,"display_name":"O. Jones"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1634729478,"creation_date":1634729478,"answer_id":69645188,"question_id":69644941,"body_markdown":"The [documentation for Connector/J connection establishment][1] suggests using this line.\r\n\r\n    Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;).newInstance();\r\n\r\nTry that.\r\n\r\n\r\n  [1]: https://dev.mysql.com/doc/connector-j/8.0/en/connector-j-usagenotes-connect-drivermanager.html","title":"StackOverflowError when trying to establish connection to MySQL database","body":"<p>The <a href=\"https://dev.mysql.com/doc/connector-j/8.0/en/connector-j-usagenotes-connect-drivermanager.html\" rel=\"nofollow noreferrer\">documentation for Connector/J connection establishment</a> suggests using this line.</p>\n<pre><code>Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;).newInstance();\n</code></pre>\n<p>Try that.</p>\n"}],"owner":{"account_id":9749074,"reputation":27,"user_id":7227963,"accept_rate":12,"display_name":"KSV97"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":266,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1634729622,"creation_date":1634728283,"question_id":69644941,"body_markdown":"I am currently getting a very strange error when I try to establish a connection to my MySQL database by using the Java jdbc driver. The error is not really helping me to solve the issue. How can I fix this?\r\n\r\nPlease find the code and the error message below:\r\n\r\n```\r\n    public static void main (String[] args) throws ClassNotFoundException, SQLException, InstantiationException, IllegalAccessException{\r\n        \r\n        Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\r\n        Connection connect = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3305/testDB&quot;, &quot;root&quot;, &quot;&quot;);\r\n    }\r\n```\r\n\r\n```\r\nException in thread &quot;main&quot; java.lang.StackOverflowError\r\n        at java.base/javax.crypto.Cipher.init(Cipher.java:1430)\r\n        at java.base/sun.security.ssl.SSLCipher$T13GcmWriteCipherGenerator$GcmWriteCipher.encrypt(SSLCipher.java:2019)\r\n        at java.base/sun.security.ssl.OutputRecord.t13Encrypt(OutputRecord.java:451)\r\n        at java.base/sun.security.ssl.OutputRecord.encrypt(OutputRecord.java:414)\r\n        at java.base/sun.security.ssl.SSLSocketOutputRecord.deliver(SSLSocketOutputRecord.java:316)\r\n        at java.base/sun.security.ssl.SSLSocketImpl$AppOutputStream.write(SSLSocketImpl.java:1212)\r\n        at java.base/java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:81)\r\n        at java.base/java.io.BufferedOutputStream.flush(BufferedOutputStream.java:142)\r\n        at com.mysql.cj.protocol.a.SimplePacketSender.send(SimplePacketSender.java:55)\r\n        at com.mysql.cj.protocol.a.TimeTrackingPacketSender.send(TimeTrackingPacketSender.java:50)\r\n        at com.mysql.cj.protocol.a.NativeProtocol.send(NativeProtocol.java:568)\r\n        at com.mysql.cj.protocol.a.NativeProtocol.sendCommand(NativeProtocol.java:632)\r\n        at com.mysql.cj.protocol.a.NativeProtocol.convertShowWarningsToSQLWarnings(NativeProtocol.java:2107)\r\n        at com.mysql.cj.protocol.a.NativeProtocol.scanForAndThrowDataTruncation(NativeProtocol.java:1938)\r\n        at com.mysql.cj.protocol.a.NativeProtocol.readAllResults(NativeProtocol.java:1670)\r\n        at com.mysql.cj.protocol.a.NativeProtocol.convertShowWarningsToSQLWarnings(NativeProtocol.java:2109)\r\n        at com.mysql.cj.protocol.a.NativeProtocol.scanForAndThrowDataTruncation(NativeProtocol.java:1938)\r\n        at com.mysql.cj.protocol.a.NativeProtocol.readAllResults(NativeProtocol.java:1670)\r\n        at com.mysql.cj.protocol.a.NativeProtocol.convertShowWarningsToSQLWarnings(NativeProtocol.java:2109)\r\n       ...\r\n        at com.mysql.cj.protocol.a.NativeProtocol.scanForAndThrowDataTruncation(NativeProtocol.java:1938)\r\n        at com.mysql.cj.protocol.a.NativeProtocol.readAllResults(NativeProtocol.java:1670)\r\n        at com.mysql.cj.protocol.a.NativeProtocol.convertShowWarningsToSQLWarnings(NativeProtocol.java:2109)\r\n```\r\nAdditional remarks: mysql_connector is added to classpath, port 3305 is active \r\n\r\n\r\n","title":"StackOverflowError when trying to establish connection to MySQL database","body":"<p>I am currently getting a very strange error when I try to establish a connection to my MySQL database by using the Java jdbc driver. The error is not really helping me to solve the issue. How can I fix this?</p>\n<p>Please find the code and the error message below:</p>\n<pre><code>    public static void main (String[] args) throws ClassNotFoundException, SQLException, InstantiationException, IllegalAccessException{\n        \n        Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\n        Connection connect = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3305/testDB&quot;, &quot;root&quot;, &quot;&quot;);\n    }\n</code></pre>\n<pre><code>Exception in thread &quot;main&quot; java.lang.StackOverflowError\n        at java.base/javax.crypto.Cipher.init(Cipher.java:1430)\n        at java.base/sun.security.ssl.SSLCipher$T13GcmWriteCipherGenerator$GcmWriteCipher.encrypt(SSLCipher.java:2019)\n        at java.base/sun.security.ssl.OutputRecord.t13Encrypt(OutputRecord.java:451)\n        at java.base/sun.security.ssl.OutputRecord.encrypt(OutputRecord.java:414)\n        at java.base/sun.security.ssl.SSLSocketOutputRecord.deliver(SSLSocketOutputRecord.java:316)\n        at java.base/sun.security.ssl.SSLSocketImpl$AppOutputStream.write(SSLSocketImpl.java:1212)\n        at java.base/java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:81)\n        at java.base/java.io.BufferedOutputStream.flush(BufferedOutputStream.java:142)\n        at com.mysql.cj.protocol.a.SimplePacketSender.send(SimplePacketSender.java:55)\n        at com.mysql.cj.protocol.a.TimeTrackingPacketSender.send(TimeTrackingPacketSender.java:50)\n        at com.mysql.cj.protocol.a.NativeProtocol.send(NativeProtocol.java:568)\n        at com.mysql.cj.protocol.a.NativeProtocol.sendCommand(NativeProtocol.java:632)\n        at com.mysql.cj.protocol.a.NativeProtocol.convertShowWarningsToSQLWarnings(NativeProtocol.java:2107)\n        at com.mysql.cj.protocol.a.NativeProtocol.scanForAndThrowDataTruncation(NativeProtocol.java:1938)\n        at com.mysql.cj.protocol.a.NativeProtocol.readAllResults(NativeProtocol.java:1670)\n        at com.mysql.cj.protocol.a.NativeProtocol.convertShowWarningsToSQLWarnings(NativeProtocol.java:2109)\n        at com.mysql.cj.protocol.a.NativeProtocol.scanForAndThrowDataTruncation(NativeProtocol.java:1938)\n        at com.mysql.cj.protocol.a.NativeProtocol.readAllResults(NativeProtocol.java:1670)\n        at com.mysql.cj.protocol.a.NativeProtocol.convertShowWarningsToSQLWarnings(NativeProtocol.java:2109)\n       ...\n        at com.mysql.cj.protocol.a.NativeProtocol.scanForAndThrowDataTruncation(NativeProtocol.java:1938)\n        at com.mysql.cj.protocol.a.NativeProtocol.readAllResults(NativeProtocol.java:1670)\n        at com.mysql.cj.protocol.a.NativeProtocol.convertShowWarningsToSQLWarnings(NativeProtocol.java:2109)\n</code></pre>\n<p>Additional remarks: mysql_connector is added to classpath, port 3305 is active</p>\n"},{"tags":["java","arrays","image","encoding","base64"],"comments":[{"owner":{"account_id":3415784,"reputation":60457,"user_id":2864740,"accept_rate":78,"display_name":"user2864740"},"score":0,"creation_date":1514674585,"post_id":48038555,"comment_id":83047461,"body_markdown":"The &quot;code that uses the file system&quot; simply *loads* the image. That step can be skipped or replaced. Do that: Given an `java.awt.Image` (this kind?), what is needed next to obtain the &quot;base 64&quot;? What does the &quot;base 64&quot; require? What steps can be taken to get from one to the other? The answer will probably be in Streams and writing the file to a *memory stream*.","body":"The &quot;code that uses the file system&quot; simply <i>loads</i> the image. That step can be skipped or replaced. Do that: Given an <code>java.awt.Image</code> (this kind?), what is needed next to obtain the &quot;base 64&quot;? What does the &quot;base 64&quot; require? What steps can be taken to get from one to the other? The answer will probably be in Streams and writing the file to a <i>memory stream</i>."},{"owner":{"account_id":3415784,"reputation":60457,"user_id":2864740,"accept_rate":78,"display_name":"user2864740"},"score":0,"creation_date":1514674801,"post_id":48038555,"comment_id":83047504,"body_markdown":"https://stackoverflow.com/a/17595742/2864740","body":"<a href=\"https://stackoverflow.com/a/17595742/2864740\">stackoverflow.com/a/17595742/2864740</a>"},{"owner":{"account_id":10581466,"reputation":141,"user_id":7795111,"accept_rate":75,"display_name":"chd"},"score":0,"creation_date":1514674839,"post_id":48038555,"comment_id":83047512,"body_markdown":"Yes, it&#39;s java.awt.Image. In order to obtain base64, I need first (I think) to obtain a bytearray of the image.","body":"Yes, it&#39;s java.awt.Image. In order to obtain base64, I need first (I think) to obtain a bytearray of the image."},{"owner":{"account_id":3415784,"reputation":60457,"user_id":2864740,"accept_rate":78,"display_name":"user2864740"},"score":0,"creation_date":1514674970,"post_id":48038555,"comment_id":83047543,"body_markdown":"Good - in that case, see the link above. That should be enough to get a good start!","body":"Good - in that case, see the link above. That should be enough to get a good start!"},{"owner":{"account_id":10581466,"reputation":141,"user_id":7795111,"accept_rate":75,"display_name":"chd"},"score":0,"creation_date":1514675199,"post_id":48038555,"comment_id":83047598,"body_markdown":"OK, I&#39;ll have a look, thanks.","body":"OK, I&#39;ll have a look, thanks."}],"answers":[{"tags":[],"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1514679477,"creation_date":1514679019,"answer_id":48038939,"question_id":48038555,"body_markdown":"Once you have a `BufferedImage`, you can try [this][1] code. Then if you need to convert it to base64 there&#39;s a lot of utilities.\r\n\r\nOne of the image converter I found [here][2]. There should be a lot more such APIs.\r\n\r\nI have found that I did the same by `Base64Encoder` in [this][3] answer.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/42752967/573032\r\n  [2]: http://www.askapache.com/online-tools/base64-image-converter/\r\n  [3]: https://stackoverflow.com/a/31205300/573032","title":"Encoding an image to Base64 without filename in Java","body":"<p>Once you have a <code>BufferedImage</code>, you can try <a href=\"https://stackoverflow.com/a/42752967/573032\">this</a> code. Then if you need to convert it to base64 there's a lot of utilities.</p>\n\n<p>One of the image converter I found <a href=\"http://www.askapache.com/online-tools/base64-image-converter/\" rel=\"nofollow noreferrer\">here</a>. There should be a lot more such APIs.</p>\n\n<p>I have found that I did the same by <code>Base64Encoder</code> in <a href=\"https://stackoverflow.com/a/31205300/573032\">this</a> answer.</p>\n"},{"tags":[],"owner":{"account_id":4008749,"reputation":3475,"user_id":3302747,"accept_rate":61,"display_name":"Baked Inhalf"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1514988880,"creation_date":1514988567,"answer_id":48079035,"question_id":48038555,"body_markdown":"This should get you an idea on how to encode to base64, if you only have access to the image data. Let&#39;s say your image data is a byte array, then you can do this:\r\n\r\n    byte[] image = // your image data here;\t\t\r\n\tbyte[] encodedImage = java.util.Base64.getEncoder().encode(image);\r\n\r\nThis is how to convert from image to byte array:\r\nhttps://stackoverflow.com/a/3211685/3302747","title":"Encoding an image to Base64 without filename in Java","body":"<p>This should get you an idea on how to encode to base64, if you only have access to the image data. Let's say your image data is a byte array, then you can do this:</p>\n\n<pre><code>byte[] image = // your image data here;     \nbyte[] encodedImage = java.util.Base64.getEncoder().encode(image);\n</code></pre>\n\n<p>This is how to convert from image to byte array:\n<a href=\"https://stackoverflow.com/a/3211685/3302747\">https://stackoverflow.com/a/3211685/3302747</a></p>\n"}],"owner":{"account_id":10581466,"reputation":141,"user_id":7795111,"accept_rate":75,"display_name":"chd"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":276,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1634729341,"creation_date":1514674374,"question_id":48038555,"body_markdown":"Every answer I found on Internet needed to know the filename or the URL of the image in order to make conversion. I only have access to the image instance, I can&#39;t access it on the filesystem. I don&#39;t have its URL nor filename.\r\n\r\nTypically, that&#39;s the kind of code I found but it&#39;s not relevant :\r\n\r\n    File imgPath = new File(ImageName);\r\n    BufferedImage bufferedImage = ImageIO.read(imgPath);","title":"Encoding an image to Base64 without filename in Java","body":"<p>Every answer I found on Internet needed to know the filename or the URL of the image in order to make conversion. I only have access to the image instance, I can't access it on the filesystem. I don't have its URL nor filename.</p>\n<p>Typically, that's the kind of code I found but it's not relevant :</p>\n<pre><code>File imgPath = new File(ImageName);\nBufferedImage bufferedImage = ImageIO.read(imgPath);\n</code></pre>\n"},{"tags":["java","eclipse","cordova"],"comments":[{"owner":{"account_id":44379,"reputation":14328,"user_id":130224,"accept_rate":84,"display_name":"reprogrammer"},"score":4,"creation_date":1354143690,"post_id":13615964,"comment_id":18670612,"body_markdown":"Make sure `org.apache.cordova` is on your classpath.","body":"Make sure <code>org.apache.cordova</code> is on your classpath."},{"owner":{"account_id":1888431,"reputation":5060,"user_id":1707160,"accept_rate":98,"display_name":"Andrew Rhyne"},"score":3,"creation_date":1354144686,"post_id":13615964,"comment_id":18670971,"body_markdown":"sorry if this is a stupid question, but HOW?","body":"sorry if this is a stupid question, but HOW?"},{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1354146295,"post_id":13615964,"comment_id":18671522,"body_markdown":"Are you in a Java Project (as Eclipse considers it)?  Open its Properties and add the necessary libraries to the Build Path.","body":"Are you in a Java Project (as Eclipse considers it)?  Open its Properties and add the necessary libraries to the Build Path."},{"owner":{"account_id":18257,"reputation":23253,"user_id":41679,"accept_rate":100,"display_name":"Simon MacDonald"},"score":0,"creation_date":1354154220,"post_id":13615964,"comment_id":18673461,"body_markdown":"Do you see a cordova-2.2.0.jar in your project libs directory?","body":"Do you see a cordova-2.2.0.jar in your project libs directory?"}],"answers":[{"tags":[],"owner":{"account_id":1102504,"reputation":66096,"user_id":1094597,"accept_rate":94,"display_name":"kosa"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1354143752,"creation_date":1354143752,"answer_id":13615984,"question_id":13615964,"body_markdown":"Download [apache cordova][1] jar and add it to lib folder and classpath.\r\n\r\n\r\n  [1]: http://incubator.apache.org/cordova/#download","title":"The import org.apache.cordova cannot be resolved","body":"<p>Download <a href=\"http://incubator.apache.org/cordova/#download\" rel=\"nofollow\">apache cordova</a> jar and add it to lib folder and classpath.</p>\n"},{"tags":[],"owner":{"account_id":35885,"reputation":16104,"user_id":101970,"display_name":"Tom Clarkson"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1354148862,"creation_date":1354148862,"answer_id":13616863,"question_id":13615964,"body_markdown":"Step 4 in the getting started guide is the only part specific to phonegap. The rest is setting up a general android development environment. Instead of eclipse classic, get the ADT bundle from http://developer.android.com/sdk/index.html - that includes a custom version of eclipse with most of the android stuff ready to go.\r\n\r\nThe default link to cordova-2.2.0.jar worked fine for me, though it did take a bit of effort to work out that if you want to use a custom build of cordova it needs to be set up as an android library dependency in project properties.","title":"The import org.apache.cordova cannot be resolved","body":"<p>Step 4 in the getting started guide is the only part specific to phonegap. The rest is setting up a general android development environment. Instead of eclipse classic, get the ADT bundle from <a href=\"http://developer.android.com/sdk/index.html\" rel=\"nofollow\">http://developer.android.com/sdk/index.html</a> - that includes a custom version of eclipse with most of the android stuff ready to go.</p>\n\n<p>The default link to cordova-2.2.0.jar worked fine for me, though it did take a bit of effort to work out that if you want to use a custom build of cordova it needs to be set up as an android library dependency in project properties.</p>\n"},{"tags":[],"owner":{"account_id":180454,"reputation":8232,"user_id":413785,"accept_rate":87,"display_name":"tkit"},"down_vote_count":0,"up_vote_count":23,"is_accepted":true,"score":23,"last_activity_date":1355746671,"creation_date":1354181426,"answer_id":13622615,"question_id":13615964,"body_markdown":"I just ran into the same problem. Following what was written in [here][1], I finally made it work.\r\n\r\nAfter you download cordova from [phonegap github page][2], you will find cordova-2.2.0.jar and cordova-2.2.0.js in lib/android folder. After running &quot;./create ...&quot;, copy cordova-2.2.0.jar into your projects libs folder and cordova-2.2.0.js into your www folder. Then import the project into eclipse and it should work. \r\n\r\nI had to go to &quot;Project -&gt; Properties -&gt; Android&quot; and select a newer SDK (I selected the latest one available on the list) and than run the &quot;Project -&gt; Clean&quot; as well.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/13399662/413785\r\n  [2]: https://github.com/phonegap/phonegap/zipball/2.2.0","title":"The import org.apache.cordova cannot be resolved","body":"<p>I just ran into the same problem. Following what was written in <a href=\"https://stackoverflow.com/a/13399662/413785\">here</a>, I finally made it work.</p>\n\n<p>After you download cordova from <a href=\"https://github.com/phonegap/phonegap/zipball/2.2.0\" rel=\"nofollow noreferrer\">phonegap github page</a>, you will find cordova-2.2.0.jar and cordova-2.2.0.js in lib/android folder. After running \"./create ...\", copy cordova-2.2.0.jar into your projects libs folder and cordova-2.2.0.js into your www folder. Then import the project into eclipse and it should work. </p>\n\n<p>I had to go to \"Project -> Properties -> Android\" and select a newer SDK (I selected the latest one available on the list) and than run the \"Project -> Clean\" as well.</p>\n"},{"tags":[],"owner":{"account_id":439160,"reputation":262,"user_id":827910,"accept_rate":56,"display_name":"Ruudt"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1354703685,"creation_date":1354703685,"answer_id":13721214,"question_id":13615964,"body_markdown":"In addition to copying cordova-2.2.0.jar from the phonegapp download to the libs folder of the project I had to manually add it to the projects libraries.\r\n\r\n**Procedure:** Project -&gt; properties -&gt; Java Build Path -&gt; Libraries -&gt; Add JARs... Then select the libs from the project itself","title":"The import org.apache.cordova cannot be resolved","body":"<p>In addition to copying cordova-2.2.0.jar from the phonegapp download to the libs folder of the project I had to manually add it to the projects libraries.</p>\n\n<p><strong>Procedure:</strong> Project -> properties -> Java Build Path -> Libraries -> Add JARs... Then select the libs from the project itself</p>\n"},{"tags":[],"owner":{"account_id":2120409,"reputation":51,"user_id":1883777,"display_name":"Webdevd"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1354831211,"creation_date":1354831211,"answer_id":13753388,"question_id":13615964,"body_markdown":"I initially got around this using one of the solutions posted above: about downloading the phonegap from github and pasting in the cordova-2.2.0.jar and cordova-2.2.0.js files into the generated directories.\r\n\r\nAfter fiddling around with the path and environment variables these files are already in place (project/libs/cordova-2.2.0.jar and project/assets/www/cordova-2.2.0.js) now for me after running the &quot;create&quot; command on command line.\r\n\r\nI am using the ANT that came bundled with Eclipse so my PATH variable includes:\r\n\r\n**C:\\Program Files\\Eclipse\\plugins\\org.apache.ant_1.8.3.v20120321-1730\\bin;**\r\n\r\nand I added an environment variable for ANT_HOME of:\r\n**C:\\Program Files\\Eclipse\\plugins\\org.apache.ant_1.8.3.v20120321-1730**\r\n\r\nI tested adding \\bin or removing it to both the PATH and environment variable for ANT_HOME and this was the winning combination.","title":"The import org.apache.cordova cannot be resolved","body":"<p>I initially got around this using one of the solutions posted above: about downloading the phonegap from github and pasting in the cordova-2.2.0.jar and cordova-2.2.0.js files into the generated directories.</p>\n\n<p>After fiddling around with the path and environment variables these files are already in place (project/libs/cordova-2.2.0.jar and project/assets/www/cordova-2.2.0.js) now for me after running the \"create\" command on command line.</p>\n\n<p>I am using the ANT that came bundled with Eclipse so my PATH variable includes:</p>\n\n<p><strong>C:\\Program Files\\Eclipse\\plugins\\org.apache.ant_1.8.3.v20120321-1730\\bin;</strong></p>\n\n<p>and I added an environment variable for ANT_HOME of:\n<strong>C:\\Program Files\\Eclipse\\plugins\\org.apache.ant_1.8.3.v20120321-1730</strong></p>\n\n<p>I tested adding \\bin or removing it to both the PATH and environment variable for ANT_HOME and this was the winning combination.</p>\n"},{"tags":[],"owner":{"account_id":974210,"reputation":1403,"user_id":996028,"accept_rate":57,"display_name":"Sawny"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1376301766,"creation_date":1376301766,"answer_id":18184258,"question_id":13615964,"body_markdown":"Run `cordova -d build`. If it says anything about &quot;Unable to locate tools.jar&quot;, fix that. Then  completely rebuild the application by running `cordova platform rm android`. Also remove the project from eclispe. Then recreate the app by running `cordova platform add android` + `cordova build`. Finally add the project in eclipse again.\r\n\r\n`org.apache.cordova` should now be included and everything should be working.","title":"The import org.apache.cordova cannot be resolved","body":"<p>Run <code>cordova -d build</code>. If it says anything about \"Unable to locate tools.jar\", fix that. Then  completely rebuild the application by running <code>cordova platform rm android</code>. Also remove the project from eclispe. Then recreate the app by running <code>cordova platform add android</code> + <code>cordova build</code>. Finally add the project in eclipse again.</p>\n\n<p><code>org.apache.cordova</code> should now be included and everything should be working.</p>\n"},{"tags":[],"owner":{"account_id":448148,"reputation":832,"user_id":842200,"accept_rate":90,"display_name":"suraj mahajan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1425425644,"creation_date":1425425644,"answer_id":28844102,"question_id":13615964,"body_markdown":"Replace  your header with some miner changes   like bellow\r\n\r\n\r\n     import com.google.android.gcm.GCMRegistrar;\r\n    import org.apache.cordova.api.CallbackContext;\r\n    import org.apache.cordova.api.CordovaInterface;\r\n    import org.apache.cordova.api.CordovaPlugin;\r\n","title":"The import org.apache.cordova cannot be resolved","body":"<p>Replace  your header with some miner changes   like bellow</p>\n\n<pre><code> import com.google.android.gcm.GCMRegistrar;\nimport org.apache.cordova.api.CallbackContext;\nimport org.apache.cordova.api.CordovaInterface;\nimport org.apache.cordova.api.CordovaPlugin;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12491594,"reputation":658,"user_id":9092944,"display_name":"Moshe Yamini"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1634729273,"creation_date":1634729273,"answer_id":69645152,"question_id":13615964,"body_markdown":"Android studio: File -&gt; Invalidate cache / Restart. Worked for me...","title":"The import org.apache.cordova cannot be resolved","body":"<p>Android studio: File -&gt; Invalidate cache / Restart. Worked for me...</p>\n"}],"owner":{"account_id":1888431,"reputation":5060,"user_id":1707160,"accept_rate":98,"display_name":"Andrew Rhyne"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52086,"favorite_count":0,"down_vote_count":0,"up_vote_count":25,"accepted_answer_id":13622615,"answer_count":8,"score":25,"last_activity_date":1634729273,"creation_date":1354143645,"question_id":13615964,"body_markdown":"For some reason, after going through Phonegap&#39;s non-inclusive instructions (it doesn&#39;t even mention setting up ANT, or the headaches with Ant and JDK), this doesn&#39;t work at all:\r\n\r\n\r\n    package com.HealthTrustSoftware.AndroidTemplate3;\r\n    \r\n    import android.app.Activity;\r\n    import android.os.Bundle;\r\n    import org.apache.cordova.*;\r\n    \r\n    public class AndroidTemplate3 extends DroidGap\r\n    {\r\n        @Override\r\n        public void onCreate(Bundle savedInstanceState)\r\n        {\r\n            super.onCreate(savedInstanceState);\r\n            super.loadUrl(&quot;file:///android_asset/www/index.html&quot;);\r\n        }\r\n    }\r\n\r\nIt gives 5 errors referencing the fact that org.apache.cordova can&#39;t be resolved.  I&#39;m entirely sure what to do at this point.  Please help.  This is after 3 hours of trying to get the sdk working and finally being able to open a project within eclipse.  After following the steps on their documentation, I am left with a wasted 3 hours unless I can figure this out.  \r\n","title":"The import org.apache.cordova cannot be resolved","body":"<p>For some reason, after going through Phonegap's non-inclusive instructions (it doesn't even mention setting up ANT, or the headaches with Ant and JDK), this doesn't work at all:</p>\n\n<pre><code>package com.HealthTrustSoftware.AndroidTemplate3;\n\nimport android.app.Activity;\nimport android.os.Bundle;\nimport org.apache.cordova.*;\n\npublic class AndroidTemplate3 extends DroidGap\n{\n    @Override\n    public void onCreate(Bundle savedInstanceState)\n    {\n        super.onCreate(savedInstanceState);\n        super.loadUrl(\"file:///android_asset/www/index.html\");\n    }\n}\n</code></pre>\n\n<p>It gives 5 errors referencing the fact that org.apache.cordova can't be resolved.  I'm entirely sure what to do at this point.  Please help.  This is after 3 hours of trying to get the sdk working and finally being able to open a project within eclipse.  After following the steps on their documentation, I am left with a wasted 3 hours unless I can figure this out.  </p>\n"},{"tags":["java","android","kotlin","android-service","android-sensors"],"comments":[{"owner":{"account_id":17401558,"reputation":13663,"user_id":12610347,"display_name":"x00"},"score":0,"creation_date":1633719551,"post_id":69437659,"comment_id":122844059,"body_markdown":"Can your question be rephrased as &quot;Is there any system notification that fires when the phone was moved?&quot; or your question more like &quot;There is a system notification that fires when the phone was moved, but all my attempts to listen to it failed&quot;","body":"Can your question be rephrased as &quot;Is there any system notification that fires when the phone was moved?&quot; or your question more like &quot;There is a system notification that fires when the phone was moved, but all my attempts to listen to it failed&quot;"},{"owner":{"account_id":17401558,"reputation":13663,"user_id":12610347,"display_name":"x00"},"score":1,"creation_date":1633721060,"post_id":69437659,"comment_id":122844517,"body_markdown":"But the main question is &quot;why?&quot; https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\nWhy do you need this? If for example - to save battery... then your&#39;re probably going the wrong way.","body":"But the main question is &quot;why?&quot; <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\" title=\"what is the xy problem\">meta.stackexchange.com/questions/66377/what-is-the-xy-proble&zwnj;&#8203;m</a> Why do you need this? If for example - to save battery... then your&#39;re probably going the wrong way."},{"owner":{"account_id":3045528,"reputation":18505,"user_id":2581314,"accept_rate":82,"display_name":"erluxman"},"score":0,"creation_date":1633761072,"post_id":69437659,"comment_id":122850970,"body_markdown":"@x00 I like to believe the first one, but it might be a case of second as well if I had not executed it properly.","body":"@x00 I like to believe the first one, but it might be a case of second as well if I had not executed it properly."},{"owner":{"account_id":3045528,"reputation":18505,"user_id":2581314,"accept_rate":82,"display_name":"erluxman"},"score":0,"creation_date":1633761250,"post_id":69437659,"comment_id":122850995,"body_markdown":"What would you suggest for saving battery and not showing notifications all the time (this will annoy users) . But both cases will have the almost same solution. \n\nNow my curiosity is, what would you think is the better way to be able to record sensor&#39;s (accelerometer and magnetometer) only when user is moving.","body":"What would you suggest for saving battery and not showing notifications all the time (this will annoy users) . But both cases will have the almost same solution.   Now my curiosity is, what would you think is the better way to be able to record sensor&#39;s (accelerometer and magnetometer) only when user is moving."}],"answers":[{"tags":[],"owner":{"account_id":17401558,"reputation":13663,"user_id":12610347,"display_name":"x00"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1633769934,"creation_date":1633769383,"answer_id":69505158,"question_id":69437659,"body_markdown":"Too big for a comment, so I&#39;ll post it as an answer. And it is in some way an answer, but without proofs, just my experience.\r\n\r\nI&#39;m in no way an expert in the Android. But I know a thing or two about sensors in general. And the main thing is that they are always active (if not turned off entirely), and that there is always some **noise**. So\r\n\r\n1. One can&#39;t say with 100% certainty is there any movement or not. Instead you **need** to collect all events, choose your **thresholds** and **decide it yourself**. (Probably you&#39;d want to aggregate the measurements from several sensors to make that decision, and even to consider the history of measurements - e.g. if a user is in a car on a bumpy road the noise will be higher for a prolonged period).\r\n1. There is virtually no difference in energy consumption if the corresponding code will be executed by the OS, or by your service. But there is a lot more opportunities to customize the thresholds, the aggregation and other logic with your code. That&#39;s why I believe that OS keeps API to the bare minimum, and there is no such events as `moving starts`/`moving stops`.\r\n1. The only thing that drains energy above the minimum is **your code**. And no one else, but your code decides to annoy users with a constant stream of notifications or not.\r\n\r\nSo, think of aggregation strategy and thresholds, don&#39;t show notifications if thresholds are not passed, and make your code fast (so that it won&#39;t use too much energy). And your are done... more or less... because these decisions are not easy to make. A lot of apps from big companies fail to make them right in all the cases. Just install a couple of pedometer-apps and you&#39;ll see that they all will show different counts of steps.","title":"Run Service to collect sensor data only when user is moving","body":"<p>Too big for a comment, so I'll post it as an answer. And it is in some way an answer, but without proofs, just my experience.</p>\n<p>I'm in no way an expert in the Android. But I know a thing or two about sensors in general. And the main thing is that they are always active (if not turned off entirely), and that there is always some <strong>noise</strong>. So</p>\n<ol>\n<li>One can't say with 100% certainty is there any movement or not. Instead you <strong>need</strong> to collect all events, choose your <strong>thresholds</strong> and <strong>decide it yourself</strong>. (Probably you'd want to aggregate the measurements from several sensors to make that decision, and even to consider the history of measurements - e.g. if a user is in a car on a bumpy road the noise will be higher for a prolonged period).</li>\n<li>There is virtually no difference in energy consumption if the corresponding code will be executed by the OS, or by your service. But there is a lot more opportunities to customize the thresholds, the aggregation and other logic with your code. That's why I believe that OS keeps API to the bare minimum, and there is no such events as <code>moving starts</code>/<code>moving stops</code>.</li>\n<li>The only thing that drains energy above the minimum is <strong>your code</strong>. And no one else, but your code decides to annoy users with a constant stream of notifications or not.</li>\n</ol>\n<p>So, think of aggregation strategy and thresholds, don't show notifications if thresholds are not passed, and make your code fast (so that it won't use too much energy). And your are done... more or less... because these decisions are not easy to make. A lot of apps from big companies fail to make them right in all the cases. Just install a couple of pedometer-apps and you'll see that they all will show different counts of steps.</p>\n"},{"tags":[],"owner":{"account_id":3935937,"reputation":698,"user_id":3252344,"display_name":"user3252344"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1634179442,"creation_date":1634179442,"answer_id":69564501,"question_id":69437659,"body_markdown":"The thresholds for what is &#39;movement&#39; depends on your application so there&#39;s not a lot of ready-made options (e.g. do you care if the user shakes their phone, or just if they move somewhere in a car for a few streets?).\r\n\r\nThere are sensor types which detect movement start/stop. See [here](https://developer.android.com/reference/android/hardware/SensorEvent#sensor). Whether or not they&#39;re good for your app depends on your app.\r\n\r\n1. Stop sensor:\r\n\r\n`TYPE_STATIONARY_DETECT` fires an event when the user has not moved for 5 seconds. Listen for it, and use it to stop your service. If you want faster than that, you&#39;ll have to do it yourself.\r\n\r\n2. Start sensor\r\n\r\n`TYPE_MOVEMENT_DETECT` is the opposite of stationary-detect, and fires when the user has been moving for 5 seconds. You could listen for this to start the service back up if the 5 second latency isn&#39;t a deal-breaker.\r\n\r\nType `SIGNIFICANT_MOTION` is also useable if you want your movement to wake the app from sleep, but I&#39;ve never had much luck finding what counts as &#39;significant&#39; for that sensor type.\r\n\r\nIf your movement isn&#39;t one of those two things - a 5-second sustained movement or whatever sets off the &#39;significant&#39; flag - then you will need to implement the start and the stop yourself, because *a sensor can&#39;t detect what movement to start on if it&#39;s not already started &amp; detecting movement*. For example I&#39;ve used something like this pseudocode\r\n\r\n```\r\nclass MotionSensorMediator:\r\n    \r\n    enum state=[waiting, active]\r\n\r\n    def ctor():\r\n        state = waiting\r\n\r\n    def onSensorEvent(SensorEvent event):\r\n        switch state:\r\n             case waiting:\r\n                  checkMovementThreshold(event)\r\n                  break\r\n             case active:\r\n                  checkMovementThreshold(event)\r\n                  sendToListener(event)\r\n                  break\r\n\r\n    def checkMovementThreshold(SensorEvent event):\r\n        results = //some distance calculations\r\n        if result &gt; threshold &amp;&amp; state == waiting:\r\n             state = active\r\n        else if result &lt; threshold &amp;&amp; state == active:\r\n             state = waiting\r\n```","title":"Run Service to collect sensor data only when user is moving","body":"<p>The thresholds for what is 'movement' depends on your application so there's not a lot of ready-made options (e.g. do you care if the user shakes their phone, or just if they move somewhere in a car for a few streets?).</p>\n<p>There are sensor types which detect movement start/stop. See <a href=\"https://developer.android.com/reference/android/hardware/SensorEvent#sensor\" rel=\"nofollow noreferrer\">here</a>. Whether or not they're good for your app depends on your app.</p>\n<ol>\n<li>Stop sensor:</li>\n</ol>\n<p><code>TYPE_STATIONARY_DETECT</code> fires an event when the user has not moved for 5 seconds. Listen for it, and use it to stop your service. If you want faster than that, you'll have to do it yourself.</p>\n<ol start=\"2\">\n<li>Start sensor</li>\n</ol>\n<p><code>TYPE_MOVEMENT_DETECT</code> is the opposite of stationary-detect, and fires when the user has been moving for 5 seconds. You could listen for this to start the service back up if the 5 second latency isn't a deal-breaker.</p>\n<p>Type <code>SIGNIFICANT_MOTION</code> is also useable if you want your movement to wake the app from sleep, but I've never had much luck finding what counts as 'significant' for that sensor type.</p>\n<p>If your movement isn't one of those two things - a 5-second sustained movement or whatever sets off the 'significant' flag - then you will need to implement the start and the stop yourself, because <em>a sensor can't detect what movement to start on if it's not already started &amp; detecting movement</em>. For example I've used something like this pseudocode</p>\n<pre><code>class MotionSensorMediator:\n    \n    enum state=[waiting, active]\n\n    def ctor():\n        state = waiting\n\n    def onSensorEvent(SensorEvent event):\n        switch state:\n             case waiting:\n                  checkMovementThreshold(event)\n                  break\n             case active:\n                  checkMovementThreshold(event)\n                  sendToListener(event)\n                  break\n\n    def checkMovementThreshold(SensorEvent event):\n        results = //some distance calculations\n        if result &gt; threshold &amp;&amp; state == waiting:\n             state = active\n        else if result &lt; threshold &amp;&amp; state == active:\n             state = waiting\n</code></pre>\n"}],"owner":{"account_id":3045528,"reputation":18505,"user_id":2581314,"accept_rate":82,"display_name":"erluxman"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":723,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":2,"score":8,"last_activity_date":1634729086,"creation_date":1633357440,"question_id":69437659,"body_markdown":"### I wanted to track sensor data (accelerometer, gyro) when user is moving/ phone is not stationary.\r\n\r\n__Things I was able to do :__ \r\n\r\n1. Listen to sensor data using Sensor Listener\r\n   \r\n```kotlin\r\n        sensorManager = getSystemService(SENSOR_SERVICE) as SensorManager\r\n        \r\n        val accelerometerSensor = \r\n        sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER)\r\n    \r\n        sensorManager.registerListener(\r\n                accSensor,\r\n                accelerometerSensor,\r\n                SensorManager.SENSOR_DELAY_NORMAL\r\n            )\r\n```\r\n\r\n\r\n2. Run a foreground service that always keeps running in the background to track the sensors even when the app is swiped off from recent apps\r\n\r\n```kotlin\r\nserviceIntent = Intent(context, SensorService::class.java)\r\ncontext.startForegroundService(serviceIntent)\r\n```\r\n\r\n\r\n3. Start the service as soon as the app is rebooted using broadcast listeners which listen to Boot completed event.\r\n\r\n__But I was not able to:__ \r\n\r\n1. Stop sensor service that collects sensor data when the device stops moving.\r\n2. Start sensor (which is not running) when the user&#39;s device starts to move and collect sensor data. \r\n\r\n\r\nWhat might be the way to receive the Motion start and Motion end notifications/callback from the system so that we can decide to start/end foreground services.\r\n\r\n","title":"Run Service to collect sensor data only when user is moving","body":"<h3>I wanted to track sensor data (accelerometer, gyro) when user is moving/ phone is not stationary.</h3>\n<p><strong>Things I was able to do :</strong></p>\n<ol>\n<li>Listen to sensor data using Sensor Listener</li>\n</ol>\n<pre class=\"lang-kotlin prettyprint-override\"><code>        sensorManager = getSystemService(SENSOR_SERVICE) as SensorManager\n        \n        val accelerometerSensor = \n        sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER)\n    \n        sensorManager.registerListener(\n                accSensor,\n                accelerometerSensor,\n                SensorManager.SENSOR_DELAY_NORMAL\n            )\n</code></pre>\n<ol start=\"2\">\n<li>Run a foreground service that always keeps running in the background to track the sensors even when the app is swiped off from recent apps</li>\n</ol>\n<pre class=\"lang-kotlin prettyprint-override\"><code>serviceIntent = Intent(context, SensorService::class.java)\ncontext.startForegroundService(serviceIntent)\n</code></pre>\n<ol start=\"3\">\n<li>Start the service as soon as the app is rebooted using broadcast listeners which listen to Boot completed event.</li>\n</ol>\n<p><strong>But I was not able to:</strong></p>\n<ol>\n<li>Stop sensor service that collects sensor data when the device stops moving.</li>\n<li>Start sensor (which is not running) when the user's device starts to move and collect sensor data.</li>\n</ol>\n<p>What might be the way to receive the Motion start and Motion end notifications/callback from the system so that we can decide to start/end foreground services.</p>\n"},{"tags":["java","windows","winapi"],"comments":[{"owner":{"account_id":237126,"reputation":604212,"user_id":505088,"accept_rate":91,"display_name":"David Heffernan"},"score":0,"creation_date":1312204717,"post_id":6898361,"comment_id":8213471,"body_markdown":"Creating an interactive process from a Windows service is an exceedingly onerous task. Have a read of [this](http://blogs.msdn.com/b/winsdk/archive/2009/07/14/launching-an-interactive-process-from-windows-service-in-windows-vista-and-later.aspx) for more background.","body":"Creating an interactive process from a Windows service is an exceedingly onerous task. Have a read of <a href=\"http://blogs.msdn.com/b/winsdk/archive/2009/07/14/launching-an-interactive-process-from-windows-service-in-windows-vista-and-later.aspx\" rel=\"nofollow noreferrer\">this</a> for more background."}],"answers":[{"tags":[],"owner":{"account_id":461690,"reputation":7669,"user_id":863564,"accept_rate":93,"display_name":"Lorenzo Dematt&#233;"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1312297117,"creation_date":1312297117,"answer_id":6914118,"question_id":6898361,"body_markdown":"They way windows deals with services and how they can interact changed around NT 6.0 (Vista, Server 2003 R2). It is usually a complicated subject, because it involves the creation of processes and especially UI from a something that is supposed to be non interactive.\r\nMaking sense out of it often involves good knowledge of what is a Session, a Winsta and a Desktop on Windows.\r\n\r\nThe change (named &quot;Session 0 isolation&quot;) is documented here:\r\nhttp://msdn.microsoft.com/en-us/windows/hardware/gg463353. \r\nIt states that the correct way to display UI from a service is spawn a new process using CreateProcessAsUser, but you already knew that since your Windows 7 machine runs.\r\n\r\nIf I remember correctly, the behaviour of CreateProcessAsUser changed too: in previous versions, it did NOT added automatically the user to the winsta and desktop (which are securable objects, i.e. objects with an ACL, like files):\r\n\r\n&quot;If the application specifies a desktop in the lpDesktop member, it is\r\nthe responsibility of the application to add permission for the\r\nspecified user account to the specified window station and desktop.&quot;\r\n\r\nThis quote is taken from here:\r\nhttp://support.microsoft.com/kb/165194\r\nVery useful article! Includes code samples on how to do all the ACL\r\nstuff (unfortunately, unmanaged code...)\r\n\r\nAlso, you may find additional same info here:\r\nhttp://msdn.microsoft.com/en-us/library/aa379608%28v=vs.85%29.aspx\r\n","title":"CreateProcessAsUser win api is not working on non win7 platforms","body":"<p>They way windows deals with services and how they can interact changed around NT 6.0 (Vista, Server 2003 R2). It is usually a complicated subject, because it involves the creation of processes and especially UI from a something that is supposed to be non interactive.\nMaking sense out of it often involves good knowledge of what is a Session, a Winsta and a Desktop on Windows.</p>\n\n<p>The change (named \"Session 0 isolation\") is documented here:\n<a href=\"http://msdn.microsoft.com/en-us/windows/hardware/gg463353\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/windows/hardware/gg463353</a>. \nIt states that the correct way to display UI from a service is spawn a new process using CreateProcessAsUser, but you already knew that since your Windows 7 machine runs.</p>\n\n<p>If I remember correctly, the behaviour of CreateProcessAsUser changed too: in previous versions, it did NOT added automatically the user to the winsta and desktop (which are securable objects, i.e. objects with an ACL, like files):</p>\n\n<p>\"If the application specifies a desktop in the lpDesktop member, it is\nthe responsibility of the application to add permission for the\nspecified user account to the specified window station and desktop.\"</p>\n\n<p>This quote is taken from here:\n<a href=\"http://support.microsoft.com/kb/165194\" rel=\"nofollow\">http://support.microsoft.com/kb/165194</a>\nVery useful article! Includes code samples on how to do all the ACL\nstuff (unfortunately, unmanaged code...)</p>\n\n<p>Also, you may find additional same info here:\n<a href=\"http://msdn.microsoft.com/en-us/library/aa379608%28v=vs.85%29.aspx\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/library/aa379608%28v=vs.85%29.aspx</a></p>\n"},{"tags":[],"owner":{"account_id":7929713,"reputation":713,"user_id":5988023,"display_name":"Marc Magon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634728043,"creation_date":1634728043,"answer_id":69644878,"question_id":6898361,"body_markdown":"With Java you can now use the JNA-API to execute the CreateProcess function on a windows system - \r\n\r\nThis starts a cmd console on the current users desktop (from a windows service running on session 0) that runs a program - tested windows 7-11\r\n\r\nUse like\r\n```\r\nnew CreateProcessAsUser(&quot;notepad.exe&quot;);\r\nnew CreateProcessAsUser(&quot;start PowerShell &quot;);\r\n```\r\n\r\n```\r\nimport com.sun.jna.*;\r\nimport com.sun.jna.platform.win32.*;\r\nimport com.sun.jna.platform.win32.WinBase.*;\r\n\r\npublic class CreateProcessAsUser\r\n{\r\n\tpublic CreateProcessAsUser(String toExecute)\r\n\t{\r\n\t\tWString nullW = null;\r\n\t\tPROCESS_INFORMATION processInformation = new PROCESS_INFORMATION();\r\n\t\tSTARTUPINFO startupInfo = new STARTUPINFO();\r\n\t\tboolean result = MoreAdvApi32.INSTANCE.CreateProcessWithLogonW\r\n\t\t\t\t                                      (new WString(&quot;username&quot;),                         // user\r\n\t\t\t\t\t\t                                      nullW,                                           // domain , null if local\r\n\t\t\t\t\t\t                                      new WString(&quot;password&quot;),                         // password\r\n\t\t\t\t\t\t                                      MoreAdvApi32.LOGON_WITH_PROFILE,                 // dwLogonFlags\r\n\t\t\t\t\t\t                                      nullW,                                           // lpApplicationName\r\n\t\t\t\t\t\t                                      new WString(&quot;c:\\\\windows\\\\system32\\\\cmd.exe /c &quot; + toExecute),   // command line\r\n\t\t\t\t\t\t                                      MoreAdvApi32.CREATE_NEW_CONSOLE,                 // dwCreationFlags\r\n\t\t\t\t\t\t                                      null,                                            // lpEnvironment\r\n\t\t\t\t\t\t                                      nullW,                   // directory\r\n\t\t\t\t\t\t                                      startupInfo,\r\n\t\t\t\t\t\t                                      processInformation);\r\n\t\t\r\n\t\tif (!result)\r\n\t\t{\r\n\t\t\tint error = Kernel32.INSTANCE.GetLastError();\r\n\t\t\tSystem.out.println(&quot;OS error #&quot; + error);\r\n\t\t\tSystem.out.println(Kernel32Util.formatMessageFromLastErrorCode(error));\r\n\t\t}\r\n\t}\r\n}\r\n\r\ninterface MoreAdvApi32 extends Advapi32\r\n{\r\n\tMoreAdvApi32 INSTANCE =\r\n\t\t\t(MoreAdvApi32) Native.loadLibrary(&quot;AdvApi32&quot;, MoreAdvApi32.class);\r\n\t\r\n\t/*\r\n\t * BOOL WINAPI CreateProcessWithLogonW( __in LPCWSTR lpUsername,\r\n\t * __in_opt LPCWSTR lpDomain, __in LPCWSTR lpPassword, __in DWORD\r\n\t * dwLogonFlags, __in_opt LPCWSTR lpApplicationName, __inout_opt LPWSTR\r\n\t * lpCommandLine, __in DWORD dwCreationFlags, __in_opt LPVOID\r\n\t * lpEnvironment, __in_opt LPCWSTR lpCurrentDirectory, __in\r\n\t * LPSTARTUPINFOW lpStartupInfo, __out LPPROCESS_INFORMATION\r\n\t * lpProcessInfo );\r\n\t */\r\n\t\r\n\t// http://msdn.microsoft.com/en-us/library/windows/desktop/ms682431%28v=vs.85%29.aspx\r\n\tboolean CreateProcessWithLogonW\r\n\t(WString lpUsername,\r\n\t WString lpDomain,\r\n\t WString lpPassword,\r\n\t int dwLogonFlags,\r\n\t WString lpApplicationName,\r\n\t WString lpCommandLine,\r\n\t int dwCreationFlags,\r\n\t Pointer lpEnvironment,\r\n\t WString lpCurrentDirectory,\r\n\t STARTUPINFO lpStartupInfo,\r\n\t PROCESS_INFORMATION lpProcessInfo);\r\n\t\r\n\tpublic static final int LOGON_WITH_PROFILE = 0x00000001;\r\n\tpublic static final int LOGON_NETCREDENTIALS_ONLY = 0x00000002;\r\n\t\r\n\t\r\n\tint CREATE_NO_WINDOW = 0x08000000;\r\n\tint CREATE_UNICODE_ENVIRONMENT = 0x00000400;\r\n\tint CREATE_NEW_CONSOLE = 0x00000010;\r\n\tint DETACHED_PROCESS = 0x00000008;\r\n}\r\n```","title":"CreateProcessAsUser win api is not working on non win7 platforms","body":"<p>With Java you can now use the JNA-API to execute the CreateProcess function on a windows system -</p>\n<p>This starts a cmd console on the current users desktop (from a windows service running on session 0) that runs a program - tested windows 7-11</p>\n<p>Use like</p>\n<pre><code>new CreateProcessAsUser(&quot;notepad.exe&quot;);\nnew CreateProcessAsUser(&quot;start PowerShell &quot;);\n</code></pre>\n<pre><code>import com.sun.jna.*;\nimport com.sun.jna.platform.win32.*;\nimport com.sun.jna.platform.win32.WinBase.*;\n\npublic class CreateProcessAsUser\n{\n    public CreateProcessAsUser(String toExecute)\n    {\n        WString nullW = null;\n        PROCESS_INFORMATION processInformation = new PROCESS_INFORMATION();\n        STARTUPINFO startupInfo = new STARTUPINFO();\n        boolean result = MoreAdvApi32.INSTANCE.CreateProcessWithLogonW\n                                                      (new WString(&quot;username&quot;),                         // user\n                                                              nullW,                                           // domain , null if local\n                                                              new WString(&quot;password&quot;),                         // password\n                                                              MoreAdvApi32.LOGON_WITH_PROFILE,                 // dwLogonFlags\n                                                              nullW,                                           // lpApplicationName\n                                                              new WString(&quot;c:\\\\windows\\\\system32\\\\cmd.exe /c &quot; + toExecute),   // command line\n                                                              MoreAdvApi32.CREATE_NEW_CONSOLE,                 // dwCreationFlags\n                                                              null,                                            // lpEnvironment\n                                                              nullW,                   // directory\n                                                              startupInfo,\n                                                              processInformation);\n        \n        if (!result)\n        {\n            int error = Kernel32.INSTANCE.GetLastError();\n            System.out.println(&quot;OS error #&quot; + error);\n            System.out.println(Kernel32Util.formatMessageFromLastErrorCode(error));\n        }\n    }\n}\n\ninterface MoreAdvApi32 extends Advapi32\n{\n    MoreAdvApi32 INSTANCE =\n            (MoreAdvApi32) Native.loadLibrary(&quot;AdvApi32&quot;, MoreAdvApi32.class);\n    \n    /*\n     * BOOL WINAPI CreateProcessWithLogonW( __in LPCWSTR lpUsername,\n     * __in_opt LPCWSTR lpDomain, __in LPCWSTR lpPassword, __in DWORD\n     * dwLogonFlags, __in_opt LPCWSTR lpApplicationName, __inout_opt LPWSTR\n     * lpCommandLine, __in DWORD dwCreationFlags, __in_opt LPVOID\n     * lpEnvironment, __in_opt LPCWSTR lpCurrentDirectory, __in\n     * LPSTARTUPINFOW lpStartupInfo, __out LPPROCESS_INFORMATION\n     * lpProcessInfo );\n     */\n    \n    // http://msdn.microsoft.com/en-us/library/windows/desktop/ms682431%28v=vs.85%29.aspx\n    boolean CreateProcessWithLogonW\n    (WString lpUsername,\n     WString lpDomain,\n     WString lpPassword,\n     int dwLogonFlags,\n     WString lpApplicationName,\n     WString lpCommandLine,\n     int dwCreationFlags,\n     Pointer lpEnvironment,\n     WString lpCurrentDirectory,\n     STARTUPINFO lpStartupInfo,\n     PROCESS_INFORMATION lpProcessInfo);\n    \n    public static final int LOGON_WITH_PROFILE = 0x00000001;\n    public static final int LOGON_NETCREDENTIALS_ONLY = 0x00000002;\n    \n    \n    int CREATE_NO_WINDOW = 0x08000000;\n    int CREATE_UNICODE_ENVIRONMENT = 0x00000400;\n    int CREATE_NEW_CONSOLE = 0x00000010;\n    int DETACHED_PROCESS = 0x00000008;\n}\n</code></pre>\n"}],"owner":{"account_id":715778,"reputation":177,"user_id":642578,"accept_rate":33,"display_name":"yonatan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":962,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1634728043,"creation_date":1312201443,"question_id":6898361,"body_markdown":"i am using the win-api functions:\r\nlogonUser\r\nloadProfile\r\nCreateProcessAsUser\r\n\r\nusing java and jniwrapper.\r\n\r\ni run my application as service process (local system account).\r\n\r\nif i am using the CreateProcessWithLogon - it works only if i am not running from service (just regular stand alone application).\r\n\r\nthe process created successfully on windows 7, and doesn&#39;t on win xp and win 2003 server.\r\n\r\ndo you have any clue?\r\nhow do i manage the process / user privileges on win platform?\r\n\r\nthanks....\r\n","title":"CreateProcessAsUser win api is not working on non win7 platforms","body":"<p>i am using the win-api functions:\nlogonUser\nloadProfile\nCreateProcessAsUser</p>\n\n<p>using java and jniwrapper.</p>\n\n<p>i run my application as service process (local system account).</p>\n\n<p>if i am using the CreateProcessWithLogon - it works only if i am not running from service (just regular stand alone application).</p>\n\n<p>the process created successfully on windows 7, and doesn't on win xp and win 2003 server.</p>\n\n<p>do you have any clue?\nhow do i manage the process / user privileges on win platform?</p>\n\n<p>thanks....</p>\n"},{"tags":["java","spring-boot","spring-batch","spring-async"],"owner":{"account_id":5531610,"reputation":392,"user_id":4391429,"accept_rate":45,"display_name":"zafirov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":423,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1634727927,"creation_date":1634727927,"question_id":69644853,"body_markdown":"I need to start spring batch job in Async method, but I got lazy exception in item processor:\r\n\r\nThis is my Approach:\r\n\r\nService that contains Async method looks like:\r\n```\r\n@Service\r\n@RequiredArgsConstructor\r\n@Slf4j\r\npublic class BatchService {\r\n\r\n    @Qualifier(value = &quot;attachmentsJob&quot;)\r\n    private final Job job;\r\n    @Qualifier(value = &quot;asyncJobLauncher&quot;)\r\n    private final JobLauncher jobLauncher;\r\n    private final JobLogService jobLogService;\r\n\r\n    @Async\r\n    public void migrateAttachments() {\r\n        JobLogDB jobLogDB = jobLogService.createStartJobLog(job);\r\n        try {\r\n            Map&lt;String, JobParameter&gt; parameters = new HashMap&lt;&gt;();\r\n            parameters.put(&quot;jobId&quot;, new JobParameter(jobLogDB.getId()));\r\n            jobLauncher.run(job, new JobParameters(parameters));\r\n        } catch (JobExecutionAlreadyRunningException | JobRestartException | JobInstanceAlreadyCompleteException | JobParametersInvalidException e) {\r\n            e.printStackTrace();\r\n            jobLogService.markJobAsFailed(jobLogDB.getId());\r\n        }\r\n    }\r\n}\r\n```\r\nThe Batch Config is:\r\n```\r\n@Configuration\r\n@RequiredArgsConstructor\r\n@EnableBatchProcessing\r\npublic class BatchConfig {\r\n\r\n    private final JobBuilderFactory jobBuilderFactory;\r\n    private final JobRepository jobRepository;\r\n    private final StepBuilderFactory stepBuilderFactory;\r\n    private final MessageRepository messageRepository;\r\n    private final PlatformTransactionManager platformTransactionManager;\r\n    private final MessageDbAttachmentsProcessor messageDbAttachmentsProcessor;\r\n\r\n    @Bean(name = &quot;asyncBatchTaskExecutor&quot;)\r\n    public TaskExecutor taskExecutor() {\r\n        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();\r\n        executor.setCorePoolSize(64);\r\n        executor.setMaxPoolSize(64);\r\n        executor.setQueueCapacity(64);\r\n        executor.setRejectedExecutionHandler(new ThreadPoolExecutor.CallerRunsPolicy());\r\n        executor.setThreadNamePrefix(&quot;MigrateAttachmentsThread-&quot;);\r\n        executor.initialize();\r\n        return executor;\r\n    }\r\n\r\n    /**\r\n     * Batch Reader\r\n     */\r\n    @Bean\r\n    public RepositoryItemReader&lt;MessageDB&gt; reader() {\r\n        return new RepositoryItemReaderBuilder&lt;MessageDB&gt;().name(&quot;readerName&quot;)\r\n                .repository(messageRepository)\r\n                .methodName(&quot;findAllByTaskIdIsNotNull&quot;)\r\n                .pageSize(10)\r\n                .sorts(Collections.singletonMap(&quot;taskId&quot;, Sort.Direction.ASC))\r\n                .build();\r\n    }\r\n\r\n    /**\r\n     * Batch Processor\r\n     */\r\n    @Bean\r\n    public AsyncItemProcessor&lt;MessageDB, MessageDB&gt; processor() {\r\n        AsyncItemProcessor&lt;MessageDB, MessageDB&gt; asyncItemProcessor = new AsyncItemProcessor&lt;&gt;();\r\n        asyncItemProcessor.setDelegate(messageDbAttachmentsProcessor);\r\n        asyncItemProcessor.setTaskExecutor(taskExecutor());\r\n        return asyncItemProcessor;\r\n    }\r\n\r\n    /**\r\n     * Batch Writer\r\n     */\r\n    @Bean\r\n    public RepositoryItemWriter&lt;MessageDB&gt; writer() {\r\n        RepositoryItemWriter repositoryItemWriter = new RepositoryItemWriter();\r\n        repositoryItemWriter.setRepository(messageRepository);\r\n        repositoryItemWriter.setMethodName(&quot;save&quot;);\r\n        return repositoryItemWriter;\r\n    }\r\n\r\n    @Bean\r\n    public AsyncItemWriter&lt;MessageDB&gt; asyncWriter() {\r\n        AsyncItemWriter&lt;MessageDB&gt; asyncItemWriter = new AsyncItemWriter&lt;&gt;();\r\n        asyncItemWriter.setDelegate(writer());\r\n        return asyncItemWriter;\r\n    }\r\n\r\n    @Bean(name = &quot;attachmentsJob&quot;)\r\n    public Job migrateTaskAttachmentsJob(JobCompletionNotificationListener listener, Step step) {\r\n        return jobBuilderFactory.get(&quot;taskAttachmentsJob&quot;)\r\n                .incrementer(new RunIdIncrementer())\r\n                .listener(listener)\r\n                .flow(step)\r\n                .end()\r\n                .build();\r\n    }\r\n\r\n    @Bean\r\n    public Step step() {\r\n        return stepBuilderFactory.get(&quot;step&quot;)\r\n                .&lt;MessageDB, Future&lt;MessageDB&gt;&gt;chunk(5)\r\n                .reader(reader())\r\n                .processor(processor())\r\n                .writer(asyncWriter())\r\n                .transactionManager(platformTransactionManager)\r\n                .build();\r\n    }\r\n\r\n    @Bean(name = &quot;asyncJobLauncher&quot;)\r\n    public JobLauncher asyncJobLauncher() throws Exception {\r\n        SimpleJobLauncher jobLauncher = new SimpleJobLauncher();\r\n        jobLauncher.setJobRepository(jobRepository);\r\n        jobLauncher.setTaskExecutor(taskExecutor());\r\n        return jobLauncher;\r\n    }\r\n}\r\n```\r\nWhen I call the method in the MessageDbAttachmentsProcessor I get lazy exception:\r\n\r\n```\r\norg.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: xxx.xxx.xxx.xxx, could not initialize proxy - no Session\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:606)\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:218)\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:585)\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection.write(AbstractPersistentCollection.java:409)\r\n\tat org.hibernate.collection.internal.PersistentBag.add(PersistentBag.java:407)\r\n\r\n```\r\nI tried to fix it by adding @Transactional(propagation = Propagation.REQUIRES_NEW) on migrateAttachments method but without success, after I added I got following exception:\r\n\r\n```\r\njava.lang.IllegalStateException: Existing transaction detected in JobRepository. Please fix this and try again (e.g. remove @Transactional annotations from client).\r\n```\r\n\r\nI do not know what to change and in which direction to modify. Any help is welcomed.","title":"Start Spring Batch job in Async method throws lazy exception","body":"<p>I need to start spring batch job in Async method, but I got lazy exception in item processor:</p>\n<p>This is my Approach:</p>\n<p>Service that contains Async method looks like:</p>\n<pre><code>@Service\n@RequiredArgsConstructor\n@Slf4j\npublic class BatchService {\n\n    @Qualifier(value = &quot;attachmentsJob&quot;)\n    private final Job job;\n    @Qualifier(value = &quot;asyncJobLauncher&quot;)\n    private final JobLauncher jobLauncher;\n    private final JobLogService jobLogService;\n\n    @Async\n    public void migrateAttachments() {\n        JobLogDB jobLogDB = jobLogService.createStartJobLog(job);\n        try {\n            Map&lt;String, JobParameter&gt; parameters = new HashMap&lt;&gt;();\n            parameters.put(&quot;jobId&quot;, new JobParameter(jobLogDB.getId()));\n            jobLauncher.run(job, new JobParameters(parameters));\n        } catch (JobExecutionAlreadyRunningException | JobRestartException | JobInstanceAlreadyCompleteException | JobParametersInvalidException e) {\n            e.printStackTrace();\n            jobLogService.markJobAsFailed(jobLogDB.getId());\n        }\n    }\n}\n</code></pre>\n<p>The Batch Config is:</p>\n<pre><code>@Configuration\n@RequiredArgsConstructor\n@EnableBatchProcessing\npublic class BatchConfig {\n\n    private final JobBuilderFactory jobBuilderFactory;\n    private final JobRepository jobRepository;\n    private final StepBuilderFactory stepBuilderFactory;\n    private final MessageRepository messageRepository;\n    private final PlatformTransactionManager platformTransactionManager;\n    private final MessageDbAttachmentsProcessor messageDbAttachmentsProcessor;\n\n    @Bean(name = &quot;asyncBatchTaskExecutor&quot;)\n    public TaskExecutor taskExecutor() {\n        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();\n        executor.setCorePoolSize(64);\n        executor.setMaxPoolSize(64);\n        executor.setQueueCapacity(64);\n        executor.setRejectedExecutionHandler(new ThreadPoolExecutor.CallerRunsPolicy());\n        executor.setThreadNamePrefix(&quot;MigrateAttachmentsThread-&quot;);\n        executor.initialize();\n        return executor;\n    }\n\n    /**\n     * Batch Reader\n     */\n    @Bean\n    public RepositoryItemReader&lt;MessageDB&gt; reader() {\n        return new RepositoryItemReaderBuilder&lt;MessageDB&gt;().name(&quot;readerName&quot;)\n                .repository(messageRepository)\n                .methodName(&quot;findAllByTaskIdIsNotNull&quot;)\n                .pageSize(10)\n                .sorts(Collections.singletonMap(&quot;taskId&quot;, Sort.Direction.ASC))\n                .build();\n    }\n\n    /**\n     * Batch Processor\n     */\n    @Bean\n    public AsyncItemProcessor&lt;MessageDB, MessageDB&gt; processor() {\n        AsyncItemProcessor&lt;MessageDB, MessageDB&gt; asyncItemProcessor = new AsyncItemProcessor&lt;&gt;();\n        asyncItemProcessor.setDelegate(messageDbAttachmentsProcessor);\n        asyncItemProcessor.setTaskExecutor(taskExecutor());\n        return asyncItemProcessor;\n    }\n\n    /**\n     * Batch Writer\n     */\n    @Bean\n    public RepositoryItemWriter&lt;MessageDB&gt; writer() {\n        RepositoryItemWriter repositoryItemWriter = new RepositoryItemWriter();\n        repositoryItemWriter.setRepository(messageRepository);\n        repositoryItemWriter.setMethodName(&quot;save&quot;);\n        return repositoryItemWriter;\n    }\n\n    @Bean\n    public AsyncItemWriter&lt;MessageDB&gt; asyncWriter() {\n        AsyncItemWriter&lt;MessageDB&gt; asyncItemWriter = new AsyncItemWriter&lt;&gt;();\n        asyncItemWriter.setDelegate(writer());\n        return asyncItemWriter;\n    }\n\n    @Bean(name = &quot;attachmentsJob&quot;)\n    public Job migrateTaskAttachmentsJob(JobCompletionNotificationListener listener, Step step) {\n        return jobBuilderFactory.get(&quot;taskAttachmentsJob&quot;)\n                .incrementer(new RunIdIncrementer())\n                .listener(listener)\n                .flow(step)\n                .end()\n                .build();\n    }\n\n    @Bean\n    public Step step() {\n        return stepBuilderFactory.get(&quot;step&quot;)\n                .&lt;MessageDB, Future&lt;MessageDB&gt;&gt;chunk(5)\n                .reader(reader())\n                .processor(processor())\n                .writer(asyncWriter())\n                .transactionManager(platformTransactionManager)\n                .build();\n    }\n\n    @Bean(name = &quot;asyncJobLauncher&quot;)\n    public JobLauncher asyncJobLauncher() throws Exception {\n        SimpleJobLauncher jobLauncher = new SimpleJobLauncher();\n        jobLauncher.setJobRepository(jobRepository);\n        jobLauncher.setTaskExecutor(taskExecutor());\n        return jobLauncher;\n    }\n}\n</code></pre>\n<p>When I call the method in the MessageDbAttachmentsProcessor I get lazy exception:</p>\n<pre><code>org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: xxx.xxx.xxx.xxx, could not initialize proxy - no Session\n    at org.hibernate.collection.internal.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:606)\n    at org.hibernate.collection.internal.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:218)\n    at org.hibernate.collection.internal.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:585)\n    at org.hibernate.collection.internal.AbstractPersistentCollection.write(AbstractPersistentCollection.java:409)\n    at org.hibernate.collection.internal.PersistentBag.add(PersistentBag.java:407)\n\n</code></pre>\n<p>I tried to fix it by adding @Transactional(propagation = Propagation.REQUIRES_NEW) on migrateAttachments method but without success, after I added I got following exception:</p>\n<pre><code>java.lang.IllegalStateException: Existing transaction detected in JobRepository. Please fix this and try again (e.g. remove @Transactional annotations from client).\n</code></pre>\n<p>I do not know what to change and in which direction to modify. Any help is welcomed.</p>\n"},{"tags":["java","xml","overriding"],"answers":[{"tags":[],"owner":{"account_id":18143740,"reputation":21,"user_id":13197287,"display_name":"DACRUZ"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634724145,"creation_date":1634724145,"answer_id":69643973,"question_id":69643461,"body_markdown":"I would use some XML Serialization and Deserialization Library like [jackson][1] or [simplexml][2] for that. \r\n\r\n\r\n  [1]: http:///https://www.baeldung.com/jackson-xml-serialization-and-deserialization\r\n  [2]: http://simple.sourceforge.net/","title":"XML override component Java","body":"<p>I would use some XML Serialization and Deserialization Library like <a href=\"http:///https://www.baeldung.com/jackson-xml-serialization-and-deserialization\" rel=\"nofollow noreferrer\">jackson</a> or <a href=\"http://simple.sourceforge.net/\" rel=\"nofollow noreferrer\">simplexml</a> for that.</p>\n"}],"owner":{"account_id":17779952,"reputation":117,"user_id":12911346,"display_name":"iftwMZ"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1634727682,"creation_date":1634721875,"question_id":69643461,"body_markdown":"I am having a component that I need to override, the problem is I don&#39;t know-how. \r\n\r\nMy XML looks like this:\r\n-----------------------\r\n\r\n```\r\n&lt;border-layout&gt;\r\n\r\n&lt;component name=&quot;myFirstComponent&quot;&gt; \r\n&lt;fix-layout&gt; \r\n&lt;component name=&quot;myController&quot;&gt; \r\nsome options...\r\n&lt;/component&gt;\r\n\r\n &lt;component name=&quot;needToOverride&quot;&gt;\r\n        &lt;fix-position x=&quot;222&quot; y=&quot;222&quot; width=&quot;111&quot; height=&quot;10&quot; opaque=&quot;false&quot; visible=&quot;true&quot;/&gt;\r\n      &lt;/component&gt;\r\n&lt;/fix-layout&gt;\r\n\r\n&lt;/border-layout&gt;\r\n```\r\n\r\nI could escape some closing tags at the end, but don&#39;t take it insight. How can I override &quot;needTOOverride&quot; to modify my positions? the current XML is read-only, and I can&#39;t modify it.\r\n\r\nI tried some google solutions but did not manage to make this work. Sorry for the dumb question, if it is.\r\n","title":"XML override component Java","body":"<p>I am having a component that I need to override, the problem is I don't know-how.</p>\n<h2>My XML looks like this:</h2>\n<pre><code>&lt;border-layout&gt;\n\n&lt;component name=&quot;myFirstComponent&quot;&gt; \n&lt;fix-layout&gt; \n&lt;component name=&quot;myController&quot;&gt; \nsome options...\n&lt;/component&gt;\n\n &lt;component name=&quot;needToOverride&quot;&gt;\n        &lt;fix-position x=&quot;222&quot; y=&quot;222&quot; width=&quot;111&quot; height=&quot;10&quot; opaque=&quot;false&quot; visible=&quot;true&quot;/&gt;\n      &lt;/component&gt;\n&lt;/fix-layout&gt;\n\n&lt;/border-layout&gt;\n</code></pre>\n<p>I could escape some closing tags at the end, but don't take it insight. How can I override &quot;needTOOverride&quot; to modify my positions? the current XML is read-only, and I can't modify it.</p>\n<p>I tried some google solutions but did not manage to make this work. Sorry for the dumb question, if it is.</p>\n"},{"tags":["java","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":10433138,"reputation":984,"user_id":7692352,"display_name":"Aris"},"score":0,"creation_date":1634584323,"post_id":69619036,"comment_id":123059517,"body_markdown":"Hello, You use the object for a key? The hashcode? Can you provide an example of a key?","body":"Hello, You use the object for a key? The hashcode? Can you provide an example of a key?"},{"owner":{"account_id":4501201,"reputation":4375,"user_id":3659670,"display_name":"Conffusion"},"score":0,"creation_date":1634672627,"post_id":69619036,"comment_id":123087380,"body_markdown":"Can you fix the saveCustomer code ? customerCompositeKey and competitorItemAttributesDB are undefined and you have a local variable customer and a parameter called customer. Don&#39;t think this will even compile. if the combination of keyOne and keyTwo values in the provided customer argument, does not exist it will create a new one, otherwise apply an update.","body":"Can you fix the saveCustomer code ? customerCompositeKey and competitorItemAttributesDB are undefined and you have a local variable customer and a parameter called customer. Don&#39;t think this will even compile. if the combination of keyOne and keyTwo values in the provided customer argument, does not exist it will create a new one, otherwise apply an update."}],"owner":{"account_id":7542825,"reputation":71,"user_id":5726895,"display_name":"Mish"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":740,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1634727586,"creation_date":1634572317,"question_id":69619036,"body_markdown":"How to save an entity with custom primary key?\r\n\r\nFor example, I have an entity like below:\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;customer&quot;)\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\npublic class Customer {\r\n  @EmbeddedId\r\n  private CustomerCompositeKey identity;\r\n  private String otherdata;\r\n}\r\n@Embeddable\r\n@Data\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\npublic class CustomerCompositeKey implements Serializable {\r\n  @Column(name = &quot;key_one&quot;)\r\n  private String keyOne;\r\n  @Column(name = &quot;key_two&quot;)\r\n  private String keyTwo;\r\n  \r\n   @Override\r\n    public boolean equals(Object o) {\r\n      if (this == o) {\r\n        return true;\r\n      }\r\n      if (!(o instanceof CustomerCompositeKey)) {\r\n        return false;\r\n      }\r\n      CustomerCompositeKey that = (CustomerCompositeKey) o;\r\n      return Objects.equals(keyOne, that.keyOne) &amp;&amp; Objects\r\n          .equals(keyTwo, that.keyTwo));\r\n    }\r\n\r\n    @Override\r\n    public int hashCode() {\r\n      return Objects.hash(keyOne, keyTwo);\r\n    }\r\n\r\n}\r\n```\r\nRepository class:\r\n\r\n```\r\n@Repository\r\npublic interface CustomerRepository extends\r\n    JpaRepository&lt;Customer, CustomerCompositeKey&gt; {\r\n}\r\n```\r\nCurrently, if I simply save I am getting a unique constraint exception. So I modified the code with a select update like below. Save code:\r\n```\r\n@Transactional\r\npublic void saveCustomer(CustomerBO customer){\r\n  Optional&lt;Customer&gt; customer = customerRepository.findById(customerCompositeKey);\r\nif(customer.isPresent()) {\r\n\r\n}else{\r\n}\r\ncustomerRepository.save(customer);\r\n}\r\n```\r\n\r\nThis is increasing my latency while saving. Is there any other way to just save without a select query? this block will be executed concurrently. \r\n`customerRepository.save(customer)` is already having select/update. But why am I getting a unique constraint error?\r\n\r\n","title":"Spring boot JPA save with custom primary key","body":"<p>How to save an entity with custom primary key?</p>\n<p>For example, I have an entity like below:</p>\n<pre><code>@Entity\n@Table(name = &quot;customer&quot;)\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Customer {\n  @EmbeddedId\n  private CustomerCompositeKey identity;\n  private String otherdata;\n}\n@Embeddable\n@Data\n@AllArgsConstructor\n@NoArgsConstructor\npublic class CustomerCompositeKey implements Serializable {\n  @Column(name = &quot;key_one&quot;)\n  private String keyOne;\n  @Column(name = &quot;key_two&quot;)\n  private String keyTwo;\n  \n   @Override\n    public boolean equals(Object o) {\n      if (this == o) {\n        return true;\n      }\n      if (!(o instanceof CustomerCompositeKey)) {\n        return false;\n      }\n      CustomerCompositeKey that = (CustomerCompositeKey) o;\n      return Objects.equals(keyOne, that.keyOne) &amp;&amp; Objects\n          .equals(keyTwo, that.keyTwo));\n    }\n\n    @Override\n    public int hashCode() {\n      return Objects.hash(keyOne, keyTwo);\n    }\n\n}\n</code></pre>\n<p>Repository class:</p>\n<pre><code>@Repository\npublic interface CustomerRepository extends\n    JpaRepository&lt;Customer, CustomerCompositeKey&gt; {\n}\n</code></pre>\n<p>Currently, if I simply save I am getting a unique constraint exception. So I modified the code with a select update like below. Save code:</p>\n<pre><code>@Transactional\npublic void saveCustomer(CustomerBO customer){\n  Optional&lt;Customer&gt; customer = customerRepository.findById(customerCompositeKey);\nif(customer.isPresent()) {\n\n}else{\n}\ncustomerRepository.save(customer);\n}\n</code></pre>\n<p>This is increasing my latency while saving. Is there any other way to just save without a select query? this block will be executed concurrently.\n<code>customerRepository.save(customer)</code> is already having select/update. But why am I getting a unique constraint error?</p>\n"},{"tags":["java","spring","mockito","junit5"],"comments":[{"owner":{"account_id":21181428,"reputation":177,"user_id":15575750,"display_name":"Ruslan"},"score":0,"creation_date":1634657841,"post_id":69632863,"comment_id":123081966,"body_markdown":"Have you done MockitoAnnotations.initMocks() before test?","body":"Have you done MockitoAnnotations.initMocks() before test?"},{"owner":{"account_id":22813064,"reputation":60,"user_id":16964059,"display_name":"sobhan nami"},"score":0,"creation_date":1634658007,"post_id":69632863,"comment_id":123082048,"body_markdown":"yes\ni use annotations Mock on dependency and InjectMock and Spy on class under test","body":"yes i use annotations Mock on dependency and InjectMock and Spy on class under test"}],"answers":[{"tags":[],"owner":{"account_id":3481319,"reputation":876,"user_id":2913290,"accept_rate":50,"display_name":"Daniel Vilas-Boas"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1634668725,"creation_date":1634654614,"answer_id":69632958,"question_id":69632863,"body_markdown":"Do nothing works for me. Just pay attention to the calling order\r\n\r\n\r\n    import static org.mockito.ArgumentMatchers.any;\r\n    import static org.mockito.Mockito.doNothing;\r\n    import static org.mockito.Mockito.when;\r\n    \r\n    doNothing().when(yourMock).yourMethod(yourArgs);\r\n\r\n\r\nThis [thread][1] treats a similar problem, using a spy to mock specific methods with static factories should work. I&#39;ve seen people doing to reverse operation (Use a Mock and then call the real method in some specific cases), but never tried it personally..\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/2276271/how-to-mock-void-methods-with-mockito","title":"Mocking a void method in the same class that is under test with mockito and junit5?","body":"<p>Do nothing works for me. Just pay attention to the calling order</p>\n<pre><code>import static org.mockito.ArgumentMatchers.any;\nimport static org.mockito.Mockito.doNothing;\nimport static org.mockito.Mockito.when;\n\ndoNothing().when(yourMock).yourMethod(yourArgs);\n</code></pre>\n<p>This <a href=\"https://stackoverflow.com/questions/2276271/how-to-mock-void-methods-with-mockito\">thread</a> treats a similar problem, using a spy to mock specific methods with static factories should work. I've seen people doing to reverse operation (Use a Mock and then call the real method in some specific cases), but never tried it personally..</p>\n"}],"owner":{"account_id":22813064,"reputation":60,"user_id":16964059,"display_name":"sobhan nami"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7328,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":69632958,"answer_count":1,"score":1,"last_activity_date":1634727500,"creation_date":1634654289,"question_id":69632863,"body_markdown":"i want to mock a void method in the same class that is under test with mockito.\r\ni can do that for not void method with annotating test class with @Spy and then use below code to return data i want.\r\n\r\n            willAnswer(arg -&gt; arg.getArgument(0))\r\n                .given(customerService)\r\n                .saveCustomer(any(Customer.class));\r\n\r\nbut how can do that for void method.\r\n(i already try willDoNothing().given() function)\r\n\r\nthis is my real method:\r\n\r\n    public void deleteCustomersByTenantId(TenantId tenantId) throws ThingsboardException {\r\n        log.trace(&quot;Executing deleteCustomersByTenantId, tenantId [{}]&quot;, tenantId);\r\n        Validator.validateId(tenantId, &quot;Incorrect tenantId &quot; + tenantId);\r\n        customersByTenantRemover.removeEntities(tenantId, tenantId);\r\n    }\r\n\r\n    public void deleteCustomer(TenantId tenantId, CustomerId customerId) throws ThingsboardException {\r\n        log.trace(&quot;Executing deleteCustomer [{}]&quot;, customerId);\r\n        Validator.validateId(customerId, INCORRECT_CUSTOMER_ID + customerId);\r\n        Customer customer = findCustomerById(tenantId, customerId);\r\n        if (customer == null) {\r\n            throw new IncorrectParameterException(&quot;Unable to delete non-existent customer.&quot;);\r\n        }\r\n        entityViewService.unassignCustomerEntityViews(customer.getTenantId(), customerId);\r\n        assetService.unassignCustomerAssets(customer.getTenantId(), customerId);\r\n        userService.deleteCustomerUsers(customer.getTenantId(), customerId);\r\n        deleteEntityRelations(tenantId, customerId);\r\n        entityGroupDao.deleteEntityGroupsByTenantIdAndCustomerId(customer.getTenantId(), customerId);\r\n        customerDao.removeById(tenantId, customerId.getId());\r\n    }\r\n\r\n    private final PaginatedRemover&lt;TenantId, Customer&gt; customersByTenantRemover =\r\n            new PaginatedRemover&lt;&gt;() {\r\n\r\n                @Override\r\n                protected PageData&lt;Customer&gt; findEntities(TenantId tenantId, TenantId id, PageLink pageLink) {\r\n                    return customerDao.findCustomersByTenantId(id.getId(), pageLink);\r\n                }\r\n\r\n                @Override\r\n                protected void removeEntity(TenantId tenantId, Customer entity) throws ThingsboardException {\r\n                    deleteCustomer(tenantId, new CustomerId(entity.getUuidId()));\r\n                }\r\n            };\r\n\r\nand this is the test:\r\n\r\n    void deleteCustomersByTenantId() throws ThingsboardException {\r\n        //given\r\n        Customer customer = new Customer();\r\n        customer.setId(CUSTOMER_ID);\r\n        customer.setTenantId(TENANT_ID);\r\n\r\n        ArgumentCaptor&lt;CustomerId&gt; customerIdArgumentCaptor = ArgumentCaptor.forClass(CustomerId.class);\r\n\r\n        var pageData = new PageData&lt;&gt;(Collections.singletonList(customer), 1 ,1 , false);\r\n\r\n        given(customerDao.findCustomersByTenantId(any(UUID.class), any(PageLink.class)))\r\n                .willReturn(pageData);\r\n        doNothing()\r\n                .when(customerService)\r\n                .deleteCustomer(any(), any());\r\n\r\n        //when\r\n        customerService.deleteCustomersByTenantId(TENANT_ID);\r\n\r\n        //then\r\n        then(customerDao)\r\n                .should(times(1))\r\n                .findCustomersByTenantId(any(UUID.class), any(PageLink.class));\r\n        then(customerService)\r\n                .should(times(1))\r\n                .deleteCustomer(any(TenantId.class), customerIdArgumentCaptor.capture());\r\n        assertEquals(CUSTOMER_ID, customerIdArgumentCaptor.getValue());\r\n    }\r\n\r\nthis is the Mocks:\r\n\r\n    //other mocks...\r\n\r\n    @Mock\r\n    private RelationService relationService;\r\n\r\n    @Mock\r\n    private CustomerValidator customerValidator;\r\n\r\n    @InjectMocks\r\n    @Spy\r\n    private CustomerServiceImpl customerService;\r\n\r\nevery dependency is mock with @Mock.","title":"Mocking a void method in the same class that is under test with mockito and junit5?","body":"<p>i want to mock a void method in the same class that is under test with mockito.\ni can do that for not void method with annotating test class with @Spy and then use below code to return data i want.</p>\n<pre><code>        willAnswer(arg -&gt; arg.getArgument(0))\n            .given(customerService)\n            .saveCustomer(any(Customer.class));\n</code></pre>\n<p>but how can do that for void method.\n(i already try willDoNothing().given() function)</p>\n<p>this is my real method:</p>\n<pre><code>public void deleteCustomersByTenantId(TenantId tenantId) throws ThingsboardException {\n    log.trace(&quot;Executing deleteCustomersByTenantId, tenantId [{}]&quot;, tenantId);\n    Validator.validateId(tenantId, &quot;Incorrect tenantId &quot; + tenantId);\n    customersByTenantRemover.removeEntities(tenantId, tenantId);\n}\n\npublic void deleteCustomer(TenantId tenantId, CustomerId customerId) throws ThingsboardException {\n    log.trace(&quot;Executing deleteCustomer [{}]&quot;, customerId);\n    Validator.validateId(customerId, INCORRECT_CUSTOMER_ID + customerId);\n    Customer customer = findCustomerById(tenantId, customerId);\n    if (customer == null) {\n        throw new IncorrectParameterException(&quot;Unable to delete non-existent customer.&quot;);\n    }\n    entityViewService.unassignCustomerEntityViews(customer.getTenantId(), customerId);\n    assetService.unassignCustomerAssets(customer.getTenantId(), customerId);\n    userService.deleteCustomerUsers(customer.getTenantId(), customerId);\n    deleteEntityRelations(tenantId, customerId);\n    entityGroupDao.deleteEntityGroupsByTenantIdAndCustomerId(customer.getTenantId(), customerId);\n    customerDao.removeById(tenantId, customerId.getId());\n}\n\nprivate final PaginatedRemover&lt;TenantId, Customer&gt; customersByTenantRemover =\n        new PaginatedRemover&lt;&gt;() {\n\n            @Override\n            protected PageData&lt;Customer&gt; findEntities(TenantId tenantId, TenantId id, PageLink pageLink) {\n                return customerDao.findCustomersByTenantId(id.getId(), pageLink);\n            }\n\n            @Override\n            protected void removeEntity(TenantId tenantId, Customer entity) throws ThingsboardException {\n                deleteCustomer(tenantId, new CustomerId(entity.getUuidId()));\n            }\n        };\n</code></pre>\n<p>and this is the test:</p>\n<pre><code>void deleteCustomersByTenantId() throws ThingsboardException {\n    //given\n    Customer customer = new Customer();\n    customer.setId(CUSTOMER_ID);\n    customer.setTenantId(TENANT_ID);\n\n    ArgumentCaptor&lt;CustomerId&gt; customerIdArgumentCaptor = ArgumentCaptor.forClass(CustomerId.class);\n\n    var pageData = new PageData&lt;&gt;(Collections.singletonList(customer), 1 ,1 , false);\n\n    given(customerDao.findCustomersByTenantId(any(UUID.class), any(PageLink.class)))\n            .willReturn(pageData);\n    doNothing()\n            .when(customerService)\n            .deleteCustomer(any(), any());\n\n    //when\n    customerService.deleteCustomersByTenantId(TENANT_ID);\n\n    //then\n    then(customerDao)\n            .should(times(1))\n            .findCustomersByTenantId(any(UUID.class), any(PageLink.class));\n    then(customerService)\n            .should(times(1))\n            .deleteCustomer(any(TenantId.class), customerIdArgumentCaptor.capture());\n    assertEquals(CUSTOMER_ID, customerIdArgumentCaptor.getValue());\n}\n</code></pre>\n<p>this is the Mocks:</p>\n<pre><code>//other mocks...\n\n@Mock\nprivate RelationService relationService;\n\n@Mock\nprivate CustomerValidator customerValidator;\n\n@InjectMocks\n@Spy\nprivate CustomerServiceImpl customerService;\n</code></pre>\n<p>every dependency is mock with @Mock.</p>\n"},{"tags":["java","android","xml","android-fragments"],"answers":[{"tags":[],"owner":{"account_id":13402978,"reputation":344,"user_id":9671883,"display_name":"Sohail Ahmad Khan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634716415,"creation_date":1634716415,"answer_id":69642249,"question_id":69639451,"body_markdown":"You can use BottomSheetDialogFragment to achieve required results. This is a dialog fragment in Android Material Library.\r\n\r\nYou have to have to extend your Palette fragment with BottomSheetDialogFragment and simply use following lines to show it in Activity:\r\n\r\n    PaletteFragment paletteFragment = new PaletteFragment();\r\n    paletteFragment.show(getSupportFragmentManager(), &quot;TAGTEXT&quot;);\r\n\r\nIn your PaletteFragment, add listener for palette to slide using BottomSheetBehavior.BottomSheetCallback(). On this callback you can update palette height on slide.","title":"Drag fragment up and down","body":"<p>You can use BottomSheetDialogFragment to achieve required results. This is a dialog fragment in Android Material Library.</p>\n<p>You have to have to extend your Palette fragment with BottomSheetDialogFragment and simply use following lines to show it in Activity:</p>\n<pre><code>PaletteFragment paletteFragment = new PaletteFragment();\npaletteFragment.show(getSupportFragmentManager(), &quot;TAGTEXT&quot;);\n</code></pre>\n<p>In your PaletteFragment, add listener for palette to slide using BottomSheetBehavior.BottomSheetCallback(). On this callback you can update palette height on slide.</p>\n"}],"owner":{"account_id":14613181,"reputation":45,"user_id":10554061,"display_name":"Fernando Albuquerque"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":111,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1634727436,"creation_date":1634694975,"question_id":69639451,"body_markdown":"I have the main activity which is composed by two fragments one called Canvas and the other is the Palette. In the main activity, the palette only appears on 25% of the screen and I want to make it possible so that the user can drag it up and down to choose colors from it. I have no idea how to do it.\r\n\r\nmain.xml:\r\n---------\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    android:orientation=&quot;vertical&quot;\r\n    android:weightSum=&quot;2&quot;&gt;\r\n\r\n    &lt;FrameLayout\r\n        android:id=&quot;@+id/canvasFragment&quot;\r\n        android:name=&quot;com.example.FragmentOne&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;0dp&quot;\r\n        android:layout_weight=&quot;1.5&quot; /&gt;\r\n\r\n    &lt;FrameLayout\r\n        android:id=&quot;@+id/paletteFragment&quot;\r\n        android:name=&quot;com.example.FragmentTwo&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;0dp&quot;\r\n        android:layout_weight=&quot;0.5&quot; /&gt;\r\n\r\n&lt;/LinearLayout&gt;\r\n```\r\n\r\nmainActivity.java:\r\n------------------\r\n\r\n```\r\npackage com.example.paint;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.fragment.app.FragmentTransaction;\r\n\r\nimport android.annotation.SuppressLint;\r\nimport android.content.Intent;\r\nimport android.graphics.Color;\r\nimport android.os.Bundle;\r\nimport android.view.Menu;\r\nimport android.view.MenuItem;\r\nimport android.view.View;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n\r\n        /**Canvas**/\r\n        // Create new fragment and transaction\r\n        Fragment canvasFragment = new CanvasFragment();\r\n        //canvasFragment.getView().setBackgroundColor(this.cor);\r\n        FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();\r\n        // Replace whatever is in the fragment_container view with this fragment,\r\n        // and add the transaction to the back stack\r\n        transaction.replace(R.id.canvasFragment, canvasFragment);\r\n        transaction.addToBackStack(null);\r\n        // Commit the transaction\r\n        transaction.commit();\r\n\r\n        /**Palette**/\r\n        // Create new fragment and transaction\r\n        Fragment paletteFragment = new PaletteFragment();\r\n        FragmentTransaction transaction2 = getSupportFragmentManager().beginTransaction();\r\n        // Replace whatever is in the fragment_container view with this fragment,\r\n        // and add the transaction to the back stack\r\n        transaction2.replace(R.id.paletteFragment, paletteFragment);\r\n        transaction2.addToBackStack(null);\r\n        // Commit the transaction\r\n        transaction2.commit();\r\n\r\n        setContentView(R.layout.activity_main);\r\n    }\r\n\r\n\r\n}\r\n```\r\n\r\nPaletteFragment.java:\r\n------------------\r\n\r\n```\r\npackage com.example.paint;\r\n\r\nimport android.os.Bundle;\r\n\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\n\r\nimport com.google.android.material.bottomsheet.BottomSheetBehavior;\r\nimport com.google.android.material.bottomsheet.BottomSheetDialogFragment;\r\n\r\npublic class PaletteFragment extends BottomSheetDialogFragment {\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n// Inflate the layout for this fragment\r\n        return inflater.inflate(R.layout.fragment_palette, container, false);\r\n    }\r\n\r\n}\r\n```\r\n\r\nThanks for any help given.","title":"Drag fragment up and down","body":"<p>I have the main activity which is composed by two fragments one called Canvas and the other is the Palette. In the main activity, the palette only appears on 25% of the screen and I want to make it possible so that the user can drag it up and down to choose colors from it. I have no idea how to do it.</p>\n<h2>main.xml:</h2>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:orientation=&quot;vertical&quot;\n    android:weightSum=&quot;2&quot;&gt;\n\n    &lt;FrameLayout\n        android:id=&quot;@+id/canvasFragment&quot;\n        android:name=&quot;com.example.FragmentOne&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;0dp&quot;\n        android:layout_weight=&quot;1.5&quot; /&gt;\n\n    &lt;FrameLayout\n        android:id=&quot;@+id/paletteFragment&quot;\n        android:name=&quot;com.example.FragmentTwo&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;0dp&quot;\n        android:layout_weight=&quot;0.5&quot; /&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n<h2>mainActivity.java:</h2>\n<pre><code>package com.example.paint;\n\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.fragment.app.Fragment;\nimport androidx.fragment.app.FragmentTransaction;\n\nimport android.annotation.SuppressLint;\nimport android.content.Intent;\nimport android.graphics.Color;\nimport android.os.Bundle;\nimport android.view.Menu;\nimport android.view.MenuItem;\nimport android.view.View;\n\npublic class MainActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n\n        /**Canvas**/\n        // Create new fragment and transaction\n        Fragment canvasFragment = new CanvasFragment();\n        //canvasFragment.getView().setBackgroundColor(this.cor);\n        FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();\n        // Replace whatever is in the fragment_container view with this fragment,\n        // and add the transaction to the back stack\n        transaction.replace(R.id.canvasFragment, canvasFragment);\n        transaction.addToBackStack(null);\n        // Commit the transaction\n        transaction.commit();\n\n        /**Palette**/\n        // Create new fragment and transaction\n        Fragment paletteFragment = new PaletteFragment();\n        FragmentTransaction transaction2 = getSupportFragmentManager().beginTransaction();\n        // Replace whatever is in the fragment_container view with this fragment,\n        // and add the transaction to the back stack\n        transaction2.replace(R.id.paletteFragment, paletteFragment);\n        transaction2.addToBackStack(null);\n        // Commit the transaction\n        transaction2.commit();\n\n        setContentView(R.layout.activity_main);\n    }\n\n\n}\n</code></pre>\n<h2>PaletteFragment.java:</h2>\n<pre><code>package com.example.paint;\n\nimport android.os.Bundle;\n\nimport androidx.fragment.app.Fragment;\n\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\n\nimport com.google.android.material.bottomsheet.BottomSheetBehavior;\nimport com.google.android.material.bottomsheet.BottomSheetDialogFragment;\n\npublic class PaletteFragment extends BottomSheetDialogFragment {\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\n                             Bundle savedInstanceState) {\n// Inflate the layout for this fragment\n        return inflater.inflate(R.layout.fragment_palette, container, false);\n    }\n\n}\n</code></pre>\n<p>Thanks for any help given.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":18716710,"reputation":1336,"user_id":14291243,"display_name":"Abhishek Dutt"},"score":0,"creation_date":1634790031,"post_id":69643938,"comment_id":123121569,"body_markdown":"You should consider a single activity architecture.","body":"You should consider a single activity architecture."}],"answers":[{"tags":[],"owner":{"account_id":23002935,"reputation":86,"user_id":17126650,"display_name":"Fahad-Android"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1634727086,"creation_date":1634727086,"answer_id":69644666,"question_id":69643938,"body_markdown":"Use sharedPreferences for such scenarios rather than sending data with intents. \r\n\r\nYou can have similar code inside activity A where you have the session token:\r\n\r\n    SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(context);\r\n    SharedPreferences.Editor editor = preferences.edit();\r\n    editor.putString(&quot;session_token&quot;,session_token);\r\n    editor.apply();\r\n\r\nAnd then inside activity C\r\n\r\n     SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(context);\r\n     session_token = preferences.getString(&quot;session_token&quot;,&quot;&quot;);\r\n\r\nHope it works for you.","title":"Passing data from Activity to another one","body":"<p>Use sharedPreferences for such scenarios rather than sending data with intents.</p>\n<p>You can have similar code inside activity A where you have the session token:</p>\n<pre><code>SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(context);\nSharedPreferences.Editor editor = preferences.edit();\neditor.putString(&quot;session_token&quot;,session_token);\neditor.apply();\n</code></pre>\n<p>And then inside activity C</p>\n<pre><code> SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(context);\n session_token = preferences.getString(&quot;session_token&quot;,&quot;&quot;);\n</code></pre>\n<p>Hope it works for you.</p>\n"}],"owner":{"account_id":23089188,"reputation":1,"user_id":17200286,"display_name":"Younes Be"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1634800289,"accepted_answer_id":69644666,"answer_count":1,"score":-3,"last_activity_date":1634727086,"creation_date":1634723985,"question_id":69643938,"body_markdown":"In my case i have 3 activities A,B,C i start on A and go to B but when i start C activity i want to get data from A activity.\r\n\r\nA: login page that get a session token that i get from an API.\r\n\r\nB: home page  that contains some card view that they have on click listener which start C activity.\r\n\r\nC: activity that i want to get data from A (API session token) so i can get some info in my text views.\r\n\r\nI did try to use\r\n`Intent intent=getIntent();\r\n        String session_token=intent.getStringExtra(Loginscreen.EXTRA_TEXT);`\r\n\r\nAny help would be appreciated thank you.","title":"Passing data from Activity to another one","body":"<p>In my case i have 3 activities A,B,C i start on A and go to B but when i start C activity i want to get data from A activity.</p>\n<p>A: login page that get a session token that i get from an API.</p>\n<p>B: home page  that contains some card view that they have on click listener which start C activity.</p>\n<p>C: activity that i want to get data from A (API session token) so i can get some info in my text views.</p>\n<p>I did try to use\n<code>Intent intent=getIntent(); String session_token=intent.getStringExtra(Loginscreen.EXTRA_TEXT);</code></p>\n<p>Any help would be appreciated thank you.</p>\n"},{"tags":["javascript","java"],"comments":[{"owner":{"account_id":4541793,"reputation":26875,"user_id":3689450,"display_name":"VLAZ"},"score":0,"creation_date":1634726503,"post_id":69644406,"comment_id":123100888,"body_markdown":"Sounds like [an XY problem](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem). What is your end goal here?","body":"Sounds like <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">an XY problem</a>. What is your end goal here?"},{"owner":{"account_id":22825676,"reputation":387,"user_id":16974979,"display_name":"KRISTIJAN TOMASINI"},"score":0,"creation_date":1634727879,"post_id":69644406,"comment_id":123101440,"body_markdown":"No, it is not XY, this was just a hypothetical question. I do not have an actual need to inject a method. I just wanted to know is this possible in Java since I could not find any guide online about how to do it.","body":"No, it is not XY, this was just a hypothetical question. I do not have an actual need to inject a method. I just wanted to know is this possible in Java since I could not find any guide online about how to do it."}],"answers":[{"tags":[],"owner":{"account_id":8005552,"reputation":628,"user_id":6426446,"accept_rate":78,"display_name":"bramhaag"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1634726821,"creation_date":1634726461,"answer_id":69644512,"question_id":69644406,"body_markdown":"This is possible to do during runtime. But the simple answer is that you do not want to do that. Bytecode modification is extremely fragile and complex. Let alone that your code also won&#39;t compile if you directly call the new method you have injected, meaning you have to resort to expensive methods such as Reflection.\r\n\r\nYour best alternative would be to make a utility class for Strings that has this multiply method. Something like this:\r\n\r\n    public class StringUtil {\r\n        public static String multiply(String s1, int i) { ... }\r\n    }\r\n\r\nFor non-final classes (so, not the String class), you can also choose to extend the class and add your methods to the newly created class:\r\n\r\n    public class MyType extends Type {\r\n        public static SomeType someMethod() { ... }\r\n    }\r\nThis will require you to replace all types of type `Type` with `MyType`\r\n\r\nI do not fully understand your example, but it sounds like [String#repeat(int)][1] might do the same as what you are trying to achieve.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#repeat(int)","title":"Is it possible to inject a method in built-in class in Java?","body":"<p>This is possible to do during runtime. But the simple answer is that you do not want to do that. Bytecode modification is extremely fragile and complex. Let alone that your code also won't compile if you directly call the new method you have injected, meaning you have to resort to expensive methods such as Reflection.</p>\n<p>Your best alternative would be to make a utility class for Strings that has this multiply method. Something like this:</p>\n<pre><code>public class StringUtil {\n    public static String multiply(String s1, int i) { ... }\n}\n</code></pre>\n<p>For non-final classes (so, not the String class), you can also choose to extend the class and add your methods to the newly created class:</p>\n<pre><code>public class MyType extends Type {\n    public static SomeType someMethod() { ... }\n}\n</code></pre>\n<p>This will require you to replace all types of type <code>Type</code> with <code>MyType</code></p>\n<p>I do not fully understand your example, but it sounds like <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#repeat(int)\" rel=\"nofollow noreferrer\">String#repeat(int)</a> might do the same as what you are trying to achieve.</p>\n"}],"owner":{"account_id":22825676,"reputation":387,"user_id":16974979,"display_name":"KRISTIJAN TOMASINI"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"closed_date":1634727035,"accepted_answer_id":69644512,"answer_count":1,"score":0,"last_activity_date":1634726821,"creation_date":1634726027,"question_id":69644406,"body_markdown":"In JavaScript it is easy to modify (or even replace entirely) built-in classes. One could simply write a name of a method and inject it into built-in class in JavaScript simply by typing ```=``` and defining a function. Then this method can be used on every instance of that class.\r\n\r\nFor example, I injected a method ```multiply``` into ```String``` JavaScript built-in class which multiplies string which string object contains given number of times.\r\n\r\nCan I do something similar in Java?\r\n\r\nI know that I can extend some built-in class and in my custom class define this method. But, is it possible to inject a method in a built-in Java class like in JavaScript so that everywhere where that class is used in the program this custom method is available?","title":"Is it possible to inject a method in built-in class in Java?","body":"<p>In JavaScript it is easy to modify (or even replace entirely) built-in classes. One could simply write a name of a method and inject it into built-in class in JavaScript simply by typing <code>=</code> and defining a function. Then this method can be used on every instance of that class.</p>\n<p>For example, I injected a method <code>multiply</code> into <code>String</code> JavaScript built-in class which multiplies string which string object contains given number of times.</p>\n<p>Can I do something similar in Java?</p>\n<p>I know that I can extend some built-in class and in my custom class define this method. But, is it possible to inject a method in a built-in Java class like in JavaScript so that everywhere where that class is used in the program this custom method is available?</p>\n"},{"tags":["java","reactjs","spring-boot"],"comments":[{"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"score":0,"creation_date":1634653619,"post_id":69632564,"comment_id":123079874,"body_markdown":"Kindly put code next time @Alice","body":"Kindly put code next time @Alice"},{"owner":{"account_id":23079389,"reputation":1,"user_id":17191894,"display_name":"Alice"},"score":0,"creation_date":1634662198,"post_id":69632564,"comment_id":123083770,"body_markdown":"Will make sure to copypaste code directly in next time, apologies.","body":"Will make sure to copypaste code directly in next time, apologies."}],"answers":[{"tags":[],"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634653470,"creation_date":1634653470,"answer_id":69632660,"question_id":69632564,"body_markdown":"415 is Unsupported Media Type.   This is generally related to your Content-Type\r\n\r\nhttps://developer.mozilla.org/en-US/docs/Web/HTTP/Status/415\r\n\r\nYou are passing a custom content-type, therefore you need to define it on your backend controller as well.\r\n\r\n\r\n    @PostMapping(path = &quot;users&quot;, \r\n            consumes = &quot;nology-brainstorm/json&quot;, \r\n            produces = &quot;nology-brainstorm/json&quot;)\r\n\r\n","title":"React.js: POSTMapping fetch from JavaSpring-boot backend sends request, but does nothing","body":"<p>415 is Unsupported Media Type.   This is generally related to your Content-Type</p>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/415\" rel=\"nofollow noreferrer\">https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/415</a></p>\n<p>You are passing a custom content-type, therefore you need to define it on your backend controller as well.</p>\n<pre><code>@PostMapping(path = &quot;users&quot;, \n        consumes = &quot;nology-brainstorm/json&quot;, \n        produces = &quot;nology-brainstorm/json&quot;)\n</code></pre>\n"}],"owner":{"account_id":23079389,"reputation":1,"user_id":17191894,"display_name":"Alice"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":215,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1634726762,"creation_date":1634653091,"question_id":69632564,"body_markdown":"I&#39;m the midst of creating a fullstack project consisting of a React-js frontend, a Java Spring-Boot backend, and an SQL database. I have a simple set of classes/interfaces/controllers set up for getting a list of objects in the database, as well as creating/deleting/modifying individual objects.\r\n\r\nAfter linking the database and back-end and confirming all the controller requests were all functional, I tried to use them on the front-end. The GET requests all worked fine, but trying to use any request that required passing a **request body** did not seem to function. Here&#39;s how it went down:\r\n\r\n[Image 1][1]\r\n\r\nFirst, here&#39;s a POSTMapping request in the back-end. I am using Autowired for these requests.\r\n\r\n    const createNewIS = (e) =&gt; {\r\n        return fetch(&quot;http://localhost:8080/ideas/create&quot;, {\r\n            method: &#39;POST&#39;,\r\n            crossDomain: true,\r\n            headers: {\r\n              &#39;Accept&#39;: &#39;nology-brainstorm/json&#39;,\r\n              &#39;Content-Type&#39;: &#39;nology-brainstorm/json&#39;,\r\n              &#39;API-Key&#39;: &#39;secret&#39;\r\n            },\r\n            body: JSON.stringify({\r\n                &quot;spaceid&quot;: 4,\r\n                &quot;name&quot;: newISName,\r\n                &quot;description&quot;: newISDesc\r\n            })\r\n        }).then((nothing) =&gt; {\r\n            updateNewISPopUp(e);\r\n        })\r\n    }\r\n\r\nSecond, here&#39;s the fetching function on the front-end. I have tried running this function without the API-Key header, without the .then() proceeding the first clause, and also without encapsulating the class&#39;s key names in speech marks. None of these seemed to have any effect, and the result was always as follows:\r\n\r\n[Image 2 (Browser Console)][2]\r\n\r\nThe request seems to be made, and the body appears to have been successfully passed. But when I check the database or the state in my front-end that stores its retrieved objects, the new object is not added to it. Apologies if the solution is an obvious one here, but does anyone know why the request is not properly running? I have been looking at this for hours with no luck.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/dAOFx.png\r\n  [2]: https://i.stack.imgur.com/8LYs7.png","title":"React.js: POSTMapping fetch from JavaSpring-boot backend sends request, but does nothing","body":"<p>I'm the midst of creating a fullstack project consisting of a React-js frontend, a Java Spring-Boot backend, and an SQL database. I have a simple set of classes/interfaces/controllers set up for getting a list of objects in the database, as well as creating/deleting/modifying individual objects.</p>\n<p>After linking the database and back-end and confirming all the controller requests were all functional, I tried to use them on the front-end. The GET requests all worked fine, but trying to use any request that required passing a <strong>request body</strong> did not seem to function. Here's how it went down:</p>\n<p><a href=\"https://i.stack.imgur.com/dAOFx.png\" rel=\"nofollow noreferrer\">Image 1</a></p>\n<p>First, here's a POSTMapping request in the back-end. I am using Autowired for these requests.</p>\n<pre><code>const createNewIS = (e) =&gt; {\n    return fetch(&quot;http://localhost:8080/ideas/create&quot;, {\n        method: 'POST',\n        crossDomain: true,\n        headers: {\n          'Accept': 'nology-brainstorm/json',\n          'Content-Type': 'nology-brainstorm/json',\n          'API-Key': 'secret'\n        },\n        body: JSON.stringify({\n            &quot;spaceid&quot;: 4,\n            &quot;name&quot;: newISName,\n            &quot;description&quot;: newISDesc\n        })\n    }).then((nothing) =&gt; {\n        updateNewISPopUp(e);\n    })\n}\n</code></pre>\n<p>Second, here's the fetching function on the front-end. I have tried running this function without the API-Key header, without the .then() proceeding the first clause, and also without encapsulating the class's key names in speech marks. None of these seemed to have any effect, and the result was always as follows:</p>\n<p><a href=\"https://i.stack.imgur.com/8LYs7.png\" rel=\"nofollow noreferrer\">Image 2 (Browser Console)</a></p>\n<p>The request seems to be made, and the body appears to have been successfully passed. But when I check the database or the state in my front-end that stores its retrieved objects, the new object is not added to it. Apologies if the solution is an obvious one here, but does anyone know why the request is not properly running? I have been looking at this for hours with no luck.</p>\n"},{"tags":["java","proxy"],"comments":[{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1634727711,"post_id":69644415,"comment_id":123101377,"body_markdown":"Why do you use `JAVA_TOOL_OPTIONS`? (concluding from your program(main) and your command (cli, java).., you could just &quot;pass &#39;em&quot;!?) ... [like shown here](https://stackoverflow.com/a/120802/592355) ...[see also!](https://stackoverflow.com/q/28327620/592355)","body":"Why do you use <code>JAVA_TOOL_OPTIONS</code>? (concluding from your program(main) and your command (cli, java).., you could just &quot;pass &#39;em&quot;!?) ... <a href=\"https://stackoverflow.com/a/120802/592355\">like shown here</a> ...<a href=\"https://stackoverflow.com/q/28327620/592355\">see also!</a>"},{"owner":{"account_id":8500862,"reputation":2930,"user_id":8737144,"display_name":"1Z10"},"score":0,"creation_date":1634727974,"post_id":69644415,"comment_id":123101470,"body_markdown":"I have different Java apps that needs to use the proxy, and it seems to me as a good solution. I did see the links in the beginning of my googling. Is there some counter indication?","body":"I have different Java apps that needs to use the proxy, and it seems to me as a good solution. I did see the links in the beginning of my googling. Is there some counter indication?"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1634728585,"post_id":69644415,"comment_id":123101698,"body_markdown":"ok, sorry, then [more focus! :-)](https://docs.oracle.com/javase/6/docs/technotes/guides/net/proxies.html) have you tried `http://...`, `https://` (in your command)? ..setting `socksProxyHost/Port`? ... (2.4:)&quot;Here, during the execution of the code, **every outgoing TCP socket** will go through the SOCKS proxy server at...&quot; ...","body":"ok, sorry, then <a href=\"https://docs.oracle.com/javase/6/docs/technotes/guides/net/proxies.html\" rel=\"nofollow noreferrer\">more focus! :-)</a> have you tried <code>http:&#47;&#47;...</code>, <code>https:&#47;&#47;</code> (in your command)? ..setting <code>socksProxyHost&#47;Port</code>? ... (2.4:)&quot;Here, during the execution of the code, <b>every outgoing TCP socket</b> will go through the SOCKS proxy server at...&quot; ..."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":1,"creation_date":1634728612,"post_id":69644415,"comment_id":123101710,"body_markdown":"...(quote on): &quot;Now, what happens when both a SOCKS proxy and a HTTP proxy are defined? Well the rule is that settings for higher level protocols, like HTTP or FTP, take precedence over SOCKS settings. So, in that particular case, when establishing a HTTP connection, the SOCKS proxy settings will be ignored and the HTTP proxy will be contacted. Let&#39;s look at an example..&quot;","body":"...(quote on): &quot;Now, what happens when both a SOCKS proxy and a HTTP proxy are defined? Well the rule is that settings for higher level protocols, like HTTP or FTP, take precedence over SOCKS settings. So, in that particular case, when establishing a HTTP connection, the SOCKS proxy settings will be ignored and the HTTP proxy will be contacted. Let&#39;s look at an example..&quot;"},{"owner":{"account_id":8500862,"reputation":2930,"user_id":8737144,"display_name":"1Z10"},"score":0,"creation_date":1634735030,"post_id":69644415,"comment_id":123104563,"body_markdown":"It seems that http{s}ProxyHost{Port} are only used by HttpURLConnection, not by Socket. See https://stackoverflow.com/a/28035322/8737144","body":"It seems that http{s}ProxyHost{Port} are only used by HttpURLConnection, not by Socket. See <a href=\"https://stackoverflow.com/a/28035322/8737144\">stackoverflow.com/a/28035322/8737144</a>"}],"owner":{"account_id":8500862,"reputation":2930,"user_id":8737144,"display_name":"1Z10"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":275,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1634726690,"creation_date":1634726046,"question_id":69644415,"body_markdown":"How to make all Java connections to use proxy provided via **JAVA_TOOL_OPTIONS** environment variable?\r\n\r\nThe simple app I&#39;m using as a test is taken from [GitHub][1]:\r\n\r\n    package to.noc.sslping;\r\n    \r\n    import javax.net.ssl.SSLParameters;\r\n    import javax.net.ssl.SSLSocket;\r\n    import javax.net.ssl.SSLSocketFactory;\r\n    import java.io.OutputStream;\r\n    public class SSLPing {\r\n    \r\n        public static void main(String[] args) {\r\n            if (args.length != 2) {\r\n                System.out.println(&quot;Usage: java -jar SSLPing.jar &lt;host&gt; &lt;port&gt;&quot;);\r\n                System.exit(1);\r\n            }\r\n            try {\r\n    \r\n                String hostname = args[0];\r\n                int port = Integer.parseInt(args[1]);\r\n    \r\n                System.out.println(&quot;About to connect to &#39;&quot; + hostname + &quot;&#39; on port &quot; + port);\r\n    \r\n                SSLSocketFactory sslsocketfactory = (SSLSocketFactory) SSLSocketFactory.getDefault();\r\n                SSLSocket sslsocket = (SSLSocket) sslsocketfactory.createSocket(hostname, port);\r\n    \r\n                // Hostname verification is not done by default in Java with raw SSL connections.\r\n                // The next 3 lines enable it.\r\n                SSLParameters sslParams = new SSLParameters();\r\n                sslParams.setEndpointIdentificationAlgorithm(&quot;HTTPS&quot;);\r\n                sslsocket.setSSLParameters(sslParams);\r\n    \r\n                // we only send 1 byte, so don&#39;t buffer\r\n                sslsocket.setTcpNoDelay(true);\r\n    \r\n                // Write a test byte to trigger the SSL handshake\r\n                OutputStream out = sslsocket.getOutputStream();\r\n                out.write(1);\r\n    \r\n                // If no exception happened, we connected successfully\r\n                System.out.println(&quot;Successfully connected&quot;);\r\n    \r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\nWhat I want is to be able to provide the PROXY settings via environment variables without having to configure it in the Java code.\r\nI found that it is possible to provide some settings via the **JAVA_TOOL_OPTIONS** env.\r\n\r\n    JAVA_TOOL_OPTIONS=&quot;-Dhttp.proxyHost=161.xxx.xxx.xxx\r\n                       -Dhttp.proxyPort=8080\r\n                       -Dhttp.proxySet=true\r\n                       -Dhttps.proxyHost=161.xxx.xxx.xxx\r\n                       -Dhttps.proxyPort=8080\r\n                       -Dhttps.proxySet=true&quot;\r\n\r\nIt is correctly seen by the command\r\n\r\n    java -jar SSLPing.jar google.com 443\r\n    Picked up JAVA_TOOL_OPTIONS: -Dhttp.proxyHost=161.xxx.xxx.xxx\r\n                       -Dhttp.proxyPort=8080\r\n                       -Dhttp.proxySet=true\r\n                       -Dhttps.proxyHost=161.xxx.xxx.xxx\r\n                       -Dhttps.proxyPort=8080\r\n                       -Dhttps.proxySet=true\r\n    About to connect to &#39;google.com&#39; on port 443\r\n    Successfully connected\r\n\r\nHowever when I need to reach a particular URL that requires the proxy, it fails to connect.\r\n\r\nHow do I make any socket to use the proxy from `JAVA_TOOL_OPTIONS` env?\r\nHow to check if the sockets are using the proxy?\r\n\r\n  [1]: https://github.com/dimalinux/SSLPing/blob/master/src/main/java/to/noc/sslping/SSLPing.java\r\n","title":"Java Socket not using proxy from JAVA_TOOL_OPTIONS","body":"<p>How to make all Java connections to use proxy provided via <strong>JAVA_TOOL_OPTIONS</strong> environment variable?</p>\n<p>The simple app I'm using as a test is taken from <a href=\"https://github.com/dimalinux/SSLPing/blob/master/src/main/java/to/noc/sslping/SSLPing.java\" rel=\"nofollow noreferrer\">GitHub</a>:</p>\n<pre><code>package to.noc.sslping;\n\nimport javax.net.ssl.SSLParameters;\nimport javax.net.ssl.SSLSocket;\nimport javax.net.ssl.SSLSocketFactory;\nimport java.io.OutputStream;\npublic class SSLPing {\n\n    public static void main(String[] args) {\n        if (args.length != 2) {\n            System.out.println(&quot;Usage: java -jar SSLPing.jar &lt;host&gt; &lt;port&gt;&quot;);\n            System.exit(1);\n        }\n        try {\n\n            String hostname = args[0];\n            int port = Integer.parseInt(args[1]);\n\n            System.out.println(&quot;About to connect to '&quot; + hostname + &quot;' on port &quot; + port);\n\n            SSLSocketFactory sslsocketfactory = (SSLSocketFactory) SSLSocketFactory.getDefault();\n            SSLSocket sslsocket = (SSLSocket) sslsocketfactory.createSocket(hostname, port);\n\n            // Hostname verification is not done by default in Java with raw SSL connections.\n            // The next 3 lines enable it.\n            SSLParameters sslParams = new SSLParameters();\n            sslParams.setEndpointIdentificationAlgorithm(&quot;HTTPS&quot;);\n            sslsocket.setSSLParameters(sslParams);\n\n            // we only send 1 byte, so don't buffer\n            sslsocket.setTcpNoDelay(true);\n\n            // Write a test byte to trigger the SSL handshake\n            OutputStream out = sslsocket.getOutputStream();\n            out.write(1);\n\n            // If no exception happened, we connected successfully\n            System.out.println(&quot;Successfully connected&quot;);\n\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>What I want is to be able to provide the PROXY settings via environment variables without having to configure it in the Java code.\nI found that it is possible to provide some settings via the <strong>JAVA_TOOL_OPTIONS</strong> env.</p>\n<pre><code>JAVA_TOOL_OPTIONS=&quot;-Dhttp.proxyHost=161.xxx.xxx.xxx\n                   -Dhttp.proxyPort=8080\n                   -Dhttp.proxySet=true\n                   -Dhttps.proxyHost=161.xxx.xxx.xxx\n                   -Dhttps.proxyPort=8080\n                   -Dhttps.proxySet=true&quot;\n</code></pre>\n<p>It is correctly seen by the command</p>\n<pre><code>java -jar SSLPing.jar google.com 443\nPicked up JAVA_TOOL_OPTIONS: -Dhttp.proxyHost=161.xxx.xxx.xxx\n                   -Dhttp.proxyPort=8080\n                   -Dhttp.proxySet=true\n                   -Dhttps.proxyHost=161.xxx.xxx.xxx\n                   -Dhttps.proxyPort=8080\n                   -Dhttps.proxySet=true\nAbout to connect to 'google.com' on port 443\nSuccessfully connected\n</code></pre>\n<p>However when I need to reach a particular URL that requires the proxy, it fails to connect.</p>\n<p>How do I make any socket to use the proxy from <code>JAVA_TOOL_OPTIONS</code> env?\nHow to check if the sockets are using the proxy?</p>\n"},{"tags":["java","csv","jackson-dataformat-csv"],"comments":[{"owner":{"account_id":16914570,"reputation":1532,"user_id":12232870,"display_name":"terrorrussia-keeps-killing"},"score":0,"creation_date":1634715112,"post_id":69641209,"comment_id":123096107,"body_markdown":"It&#39;s not clear: is your code producing `&lt;CSV_DATA_LINE&gt;\\n` OR `&lt;CSV_DATA_LINE&gt;\\n\\n`?","body":"It&#39;s not clear: is your code producing <code>&lt;CSV_DATA_LINE&gt;\\n</code> OR <code>&lt;CSV_DATA_LINE&gt;\\n\\n</code>?"},{"owner":{"account_id":14496530,"reputation":135,"user_id":10470910,"display_name":"Hanh Nguyen"},"score":0,"creation_date":1634716003,"post_id":69641209,"comment_id":123096457,"body_markdown":"@fluffy for example this is my result csv file:\n\n    line 1: &quot;acc&quot;, &quot;name&quot;\n    line 2: &quot;111&quot;, &quot;test&quot;\n    line 3: &quot;222&quot;, &quot;test2&quot;\n    line 4:","body":"@fluffy for example this is my result csv file:      line 1: &quot;acc&quot;, &quot;name&quot;     line 2: &quot;111&quot;, &quot;test&quot;     line 3: &quot;222&quot;, &quot;test2&quot;     line 4:"},{"owner":{"account_id":16914570,"reputation":1532,"user_id":12232870,"display_name":"terrorrussia-keeps-killing"},"score":1,"creation_date":1634716236,"post_id":69641209,"comment_id":123096543,"body_markdown":"I can&#39;t understand anything of that. Could you please not use comments for that but rather edit your question providing an example CSV file output? Additionally, **what** I really asked is, is your result file ending with single or double `\\n` (essentially `\\n` or `\\n\\n`; or `\\r\\n` vs `\\r\\n\\r\\n` if CRLF is a part of the CSV standard)?","body":"I can&#39;t understand anything of that. Could you please not use comments for that but rather edit your question providing an example CSV file output? Additionally, <b>what</b> I really asked is, is your result file ending with single or double <code>\\n</code> (essentially <code>\\n</code> or <code>\\n\\n</code>; or <code>\\r\\n</code> vs <code>\\r\\n\\r\\n</code> if CRLF is a part of the CSV standard)?"},{"owner":{"account_id":14496530,"reputation":135,"user_id":10470910,"display_name":"Hanh Nguyen"},"score":0,"creation_date":1634717092,"post_id":69641209,"comment_id":123096892,"body_markdown":"@fluffy it is \\r\\n in windows","body":"@fluffy it is \\r\\n in windows"},{"owner":{"account_id":16914570,"reputation":1532,"user_id":12232870,"display_name":"terrorrussia-keeps-killing"},"score":1,"creation_date":1634717303,"post_id":69641209,"comment_id":123096983,"body_markdown":"I _guess_ you&#39;re just confused with how some editors show last lines.","body":"I <i>guess</i> you&#39;re just confused with how some editors show last lines."},{"owner":{"account_id":14496530,"reputation":135,"user_id":10470910,"display_name":"Hanh Nguyen"},"score":0,"creation_date":1634726407,"post_id":69641209,"comment_id":123100850,"body_markdown":"@fluffy Thank you very much. It seems that. I have another problem that when my list is null, I  want to write header to my csv file, but its result is an empty file. Do you know the reason?","body":"@fluffy Thank you very much. It seems that. I have another problem that when my list is null, I  want to write header to my csv file, but its result is an empty file. Do you know the reason?"}],"owner":{"account_id":14496530,"reputation":135,"user_id":10470910,"display_name":"Hanh Nguyen"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":334,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1634726579,"creation_date":1634711005,"question_id":69641209,"body_markdown":"I am writing a list of object to CSV file using jackson-dataformat-csv lib. But when I open it, there is an empty line in the last. How can I remove this line when writting? Below is my code.\r\n\r\n    public static void writeAccountToFile(List&lt;Map&lt;String, Object&gt;&gt; list, String filePath) {\r\n\t\tSystem.out.println(&quot;Write data to csv file start&quot;);\r\n\t\ttry {\r\n\t\t\tFile file = new File(filePath);\r\n\t\t\tWriter writer = new OutputStreamWriter(new FileOutputStream(file), &quot;UTF-8&quot;);\r\n\t\t\tCsvSchema schema = null;\r\n\t\t\tCsvSchema.Builder schemaBuilder = CsvSchema.builder();\r\n\t\t\tif (list != null &amp;&amp; !list.isEmpty()) {\r\n\t\t\t\tfor (String col : list.get(0).keySet()) {\r\n\t\t\t\t\tschemaBuilder.addColumn(col);\r\n\t\t\t\t}\t\r\n\t\t\t} else {\r\n                  schemaBuilder.addColumn(&quot;test1&quot;);\r\n                  schemaBuilder.addColumn(&quot;test2&quot;);\r\n            }\r\n            schema = schemaBuilder.build().withLineSeparator(&quot;\\r&quot;).withHeader();\r\n\t\t\tCsvMapper mapper = new CsvMapper();\r\n\t\t\tmapper.configure(CsvGenerator.Feature.STRICT_CHECK_FOR_QUOTING, true);\r\n\t\t\tmapper.writer(schema).writeValues(writer).writeAll(list);\r\n\t\t\twriter.flush();\r\n\t\t} catch (IOException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n    }\r\n\r\nThanks for your reading. ","title":"CSV file contains empty line in the last","body":"<p>I am writing a list of object to CSV file using jackson-dataformat-csv lib. But when I open it, there is an empty line in the last. How can I remove this line when writting? Below is my code.</p>\n<pre><code>public static void writeAccountToFile(List&lt;Map&lt;String, Object&gt;&gt; list, String filePath) {\n    System.out.println(&quot;Write data to csv file start&quot;);\n    try {\n        File file = new File(filePath);\n        Writer writer = new OutputStreamWriter(new FileOutputStream(file), &quot;UTF-8&quot;);\n        CsvSchema schema = null;\n        CsvSchema.Builder schemaBuilder = CsvSchema.builder();\n        if (list != null &amp;&amp; !list.isEmpty()) {\n            for (String col : list.get(0).keySet()) {\n                schemaBuilder.addColumn(col);\n            }   \n        } else {\n              schemaBuilder.addColumn(&quot;test1&quot;);\n              schemaBuilder.addColumn(&quot;test2&quot;);\n        }\n        schema = schemaBuilder.build().withLineSeparator(&quot;\\r&quot;).withHeader();\n        CsvMapper mapper = new CsvMapper();\n        mapper.configure(CsvGenerator.Feature.STRICT_CHECK_FOR_QUOTING, true);\n        mapper.writer(schema).writeValues(writer).writeAll(list);\n        writer.flush();\n    } catch (IOException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    }\n}\n</code></pre>\n<p>Thanks for your reading.</p>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":9073858,"reputation":2807,"user_id":6756090,"display_name":"slauth"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634720775,"creation_date":1634720775,"answer_id":69643214,"question_id":69643138,"body_markdown":"One reason I can think of is when you want to make the application available behind a reverse proxy that routes incoming traffic via path prefixes, e.g.:\r\n\r\n```\r\nhttps://example.com                   --&gt; Web App\r\nhttps://example.com/v1/something      --&gt; V1 App\r\nhttps://example.com/v2/something-else --&gt; V2 App\r\n```","title":"Why would we want to change the servlet context path in Spring Boot?","body":"<p>One reason I can think of is when you want to make the application available behind a reverse proxy that routes incoming traffic via path prefixes, e.g.:</p>\n<pre><code>https://example.com                   --&gt; Web App\nhttps://example.com/v1/something      --&gt; V1 App\nhttps://example.com/v2/something-else --&gt; V2 App\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1546031,"reputation":1931,"user_id":1439560,"display_name":"Huy Nguyen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634724621,"creation_date":1634724621,"answer_id":69644080,"question_id":69643138,"body_markdown":"Here is my real situation. \r\n\r\nWe have an dev server which is deployed with below context path:\r\n\r\n    /dev-context\r\n\r\nQA or tester have different server and dev can&#39;t deploy without permissions and we only able to deploy after important bugs were fixed, if not , we only able to deploy at Friday with approval of managers to avoid regression test (regression test take so long). \r\n\r\n    /tester-context\r\n\r\nTo avoid conflicting on dev server, so our team decide to have more context path to test real data of test server sometimes... due to many complicated situations\r\n\r\n    /dev-connect-with-tester-sever-db","title":"Why would we want to change the servlet context path in Spring Boot?","body":"<p>Here is my real situation.</p>\n<p>We have an dev server which is deployed with below context path:</p>\n<pre><code>/dev-context\n</code></pre>\n<p>QA or tester have different server and dev can't deploy without permissions and we only able to deploy after important bugs were fixed, if not , we only able to deploy at Friday with approval of managers to avoid regression test (regression test take so long).</p>\n<pre><code>/tester-context\n</code></pre>\n<p>To avoid conflicting on dev server, so our team decide to have more context path to test real data of test server sometimes... due to many complicated situations</p>\n<pre><code>/dev-connect-with-tester-sever-db\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1674243,"reputation":10043,"user_id":1553537,"accept_rate":29,"display_name":"Giorgi Tsiklauri"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634726517,"creation_date":1634725934,"answer_id":69644376,"question_id":69643138,"body_markdown":"First you need to understand, that:\r\n\r\n&gt; context, in terms of web applications, is a way to differentiate between different (more than one) web applications on the same host; i.e. one context is one web-application, and another - is another, both served on the host.\r\n\r\n\r\nContext is usually identified by the context address/name, that immediately follows that `/` after the host (and optionally - port) name.\r\n\r\nHence, different contexts on the same host will constitute different/disparate web-applications, or different instances/versions of the same web application (that is effectively, again - different applications).\r\n\r\nRoot context, for example, is the case if your application (its index.html, in some cases) is available and accessible on `hostname:port/`.\r\n\r\nHaving different contexts can be useful for:\r\n\r\n1. Having different applications on the same host;\r\n2. Having different versions of the same application;\r\n3. Having different instances of the same application (dev, test, prod, etc.)\r\n4. etc.","title":"Why would we want to change the servlet context path in Spring Boot?","body":"<p>First you need to understand, that:</p>\n<blockquote>\n<p>context, in terms of web applications, is a way to differentiate between different (more than one) web applications on the same host; i.e. one context is one web-application, and another - is another, both served on the host.</p>\n</blockquote>\n<p>Context is usually identified by the context address/name, that immediately follows that <code>/</code> after the host (and optionally - port) name.</p>\n<p>Hence, different contexts on the same host will constitute different/disparate web-applications, or different instances/versions of the same web application (that is effectively, again - different applications).</p>\n<p>Root context, for example, is the case if your application (its index.html, in some cases) is available and accessible on <code>hostname:port/</code>.</p>\n<p>Having different contexts can be useful for:</p>\n<ol>\n<li>Having different applications on the same host;</li>\n<li>Having different versions of the same application;</li>\n<li>Having different instances of the same application (dev, test, prod, etc.)</li>\n<li>etc.</li>\n</ol>\n"}],"owner":{"account_id":23088426,"reputation":41,"user_id":17199607,"display_name":"Elif Nur Cevik"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":523,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1634726517,"creation_date":1634720401,"question_id":69643138,"body_markdown":"There are many articles on the Internet about how to change the servlet context path.\r\n\r\nToday, while examining the codes in a legacy project, I saw that the following definition was made in the `application.yaml`\r\n\r\n    server:\r\n      servlet:\r\n        context-path: /v1\r\n\r\n\r\nFrankly, I was wondering. Why would we want to change the servlet context path?","title":"Why would we want to change the servlet context path in Spring Boot?","body":"<p>There are many articles on the Internet about how to change the servlet context path.</p>\n<p>Today, while examining the codes in a legacy project, I saw that the following definition was made in the <code>application.yaml</code></p>\n<pre><code>server:\n  servlet:\n    context-path: /v1\n</code></pre>\n<p>Frankly, I was wondering. Why would we want to change the servlet context path?</p>\n"},{"tags":["java","inheritance","design-patterns","domain-driven-design"],"answers":[{"tags":[],"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1634726427,"creation_date":1634726427,"answer_id":69644504,"question_id":69631008,"body_markdown":"You could use something like the [Visitor Pattern](https://www.baeldung.com/java-visitor-pattern) to implement [double dispatch](https://www.baeldung.com/ddd-double-dispatch).\r\n\r\nIn this example, it could look something like this:\r\n\r\n    public abstract class Rule {\r\n        // Maps a rule to a result type T\r\n        public interface Mapper&lt;T&gt; {\r\n            T mapIpRule(IpRule rule);\r\n            T mapBlackListRule(BlackListRule rule);\r\n        }\r\n    \r\n        public abstract &lt;T&gt; T map(Mapper&lt;T&gt; mapper);\r\n        \r\n        // ...\r\n    }\r\n    \r\n    public class IpRule extends Rule {\r\n        @Override\r\n        public &lt;T&gt; T map(Mapper&lt;T&gt; mapper) {\r\n            return mapper.mapIpRule(this);\r\n        }\r\n    \r\n        // ...\r\n    }\r\n    \r\n    public class BlackListRule extends Rule {\r\n        @Override\r\n        public &lt;T&gt; T map(Mapper&lt;T&gt; mapper) {\r\n            return mapper.mapBlackListRule(this);\r\n        }\r\n    \r\n        // ...\r\n    }\r\n    \r\n    public class RuleMapper implements Rule.Mapper&lt;RuleEntity&gt; {\r\n    \r\n      public RuleEntity mapToEntity(Rule rule) {\r\n        return rule.map(this);\r\n      }\r\n    \r\n      @Override\r\n      public RuleEntity mapIpRule(IpRule rule) {\r\n        return new IpRuleEntity();\r\n      }\r\n    \r\n      @Override\r\n      public RuleEntity mapBlackListRule(BlackListRule rule) {\r\n        return new BlackListRuleEntity();\r\n      }\r\n    }\r\n\r\nIt has a nice property that there is compile-time check that all subtypes are handled correctly. If a new subtype of `Rule` is added later, it will need to implement the `map` method, which will require adding a method to the `Rule.Mapper` interface, which in turn will require the `RuleMapper` implementation to implement that method. In the example given in the question that uses runtime type checks with `instanceof`, it&#39;s possible to miss a case, resulting in an `IllegalArgumentException` at runtime.\r\n\r\nHowever, you will need to judge whether the extra complexity is worthwhile for your specific situation. It might be that your existing `RuleMapper` is just fine.\r\n","title":"Create a mapping function depending on type hierarchy","body":"<p>You could use something like the <a href=\"https://www.baeldung.com/java-visitor-pattern\" rel=\"nofollow noreferrer\">Visitor Pattern</a> to implement <a href=\"https://www.baeldung.com/ddd-double-dispatch\" rel=\"nofollow noreferrer\">double dispatch</a>.</p>\n<p>In this example, it could look something like this:</p>\n<pre><code>public abstract class Rule {\n    // Maps a rule to a result type T\n    public interface Mapper&lt;T&gt; {\n        T mapIpRule(IpRule rule);\n        T mapBlackListRule(BlackListRule rule);\n    }\n\n    public abstract &lt;T&gt; T map(Mapper&lt;T&gt; mapper);\n    \n    // ...\n}\n\npublic class IpRule extends Rule {\n    @Override\n    public &lt;T&gt; T map(Mapper&lt;T&gt; mapper) {\n        return mapper.mapIpRule(this);\n    }\n\n    // ...\n}\n\npublic class BlackListRule extends Rule {\n    @Override\n    public &lt;T&gt; T map(Mapper&lt;T&gt; mapper) {\n        return mapper.mapBlackListRule(this);\n    }\n\n    // ...\n}\n\npublic class RuleMapper implements Rule.Mapper&lt;RuleEntity&gt; {\n\n  public RuleEntity mapToEntity(Rule rule) {\n    return rule.map(this);\n  }\n\n  @Override\n  public RuleEntity mapIpRule(IpRule rule) {\n    return new IpRuleEntity();\n  }\n\n  @Override\n  public RuleEntity mapBlackListRule(BlackListRule rule) {\n    return new BlackListRuleEntity();\n  }\n}\n</code></pre>\n<p>It has a nice property that there is compile-time check that all subtypes are handled correctly. If a new subtype of <code>Rule</code> is added later, it will need to implement the <code>map</code> method, which will require adding a method to the <code>Rule.Mapper</code> interface, which in turn will require the <code>RuleMapper</code> implementation to implement that method. In the example given in the question that uses runtime type checks with <code>instanceof</code>, it's possible to miss a case, resulting in an <code>IllegalArgumentException</code> at runtime.</p>\n<p>However, you will need to judge whether the extra complexity is worthwhile for your specific situation. It might be that your existing <code>RuleMapper</code> is just fine.</p>\n"}],"owner":{"account_id":4679232,"reputation":2061,"user_id":3788470,"accept_rate":100,"display_name":"thchp"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":269,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69644504,"answer_count":1,"score":0,"last_activity_date":1634726427,"creation_date":1634647209,"question_id":69631008,"body_markdown":"I have an application that follows *Domain Driven Design* rules. One of the rules of *DDD* is that the domain layer should not depend on the infrastructure layer. I have a tool that checks if there are any dependencies (*imports*) from domain to infrastructure. \r\nIn my infrastructure layer, I have a class hierarchy like this:\r\n\r\n[![infrastructure][1]][1]  \r\n\r\nIn my domain layer, like this:\r\n\r\n\r\n[![domain][2]][2]\r\n\r\nNow, I need to map my domain classes to the infrastructure entities in order to save them in my database. \r\n\r\nI have an out port in my domain which is an interface:\r\n```java\r\n// infra/ports/out/RuleRepository.java\r\npublic interface RuleRepository {\r\n  Rule save(Rule rule);\r\n}\r\n```\r\n\r\nThis interface in implemented in the infrastructure layer:\r\n```java\r\n// domain/RuleRepositoryJpaAdapter.java\r\npublic class RuleRepositoryJpaAdapter implements RuleRepository {\r\n\r\n  // extends CrudRepository&lt;RuleEntity, Long&gt;\r\n  RuleCrudRepository jpaRepository;\r\n  RuleMapper mapper;\r\n\r\n  @Override\r\n  public Rule save(Rule rule) {\r\n    return jpaRepository.save(mapper.mapToEntity(rule))\r\n      .mapToDomain();\r\n  }\r\n}\r\n```\r\n\r\nI&#39;m looking for a way to implement `mapToEntity` without having to check the type of the rule. The best way would be to add a `mapToEntity` method to `Rule`, `IpRule`, `BlackListRule` but this would break the unit tests that check if there is any imports between the domain and infrastructure layer. If there any other way?\r\n\r\nWhat I have right now:\r\n```java\r\npublic class RuleMapper {\r\n\r\n  public RuleEntity mapToEntity(Rule rule) {\r\n    if (rule instanceof IpRule) {\r\n      return new IpRuleEntity().mapFromDomain(rule);\r\n    } else if (rule instanceof BlackListRule) {\r\n      return new BlackListRuleEntity().mapFromDomain(rule);\r\n    } else {\r\n      throw new IllegalArgumentException(&quot;Unexpected argument of type &quot; + (rule == null ? &quot;null&quot; : rule.getClass().getName()));\r\n    }\r\n  }\r\n\r\n}\r\n```\r\n\r\n  [1]: https://i.stack.imgur.com/jk4Zlm.png\r\n  [2]: https://i.stack.imgur.com/01MdHm.png","title":"Create a mapping function depending on type hierarchy","body":"<p>I have an application that follows <em>Domain Driven Design</em> rules. One of the rules of <em>DDD</em> is that the domain layer should not depend on the infrastructure layer. I have a tool that checks if there are any dependencies (<em>imports</em>) from domain to infrastructure.\nIn my infrastructure layer, I have a class hierarchy like this:</p>\n<p><a href=\"https://i.stack.imgur.com/jk4Zlm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jk4Zlm.png\" alt=\"infrastructure\" /></a></p>\n<p>In my domain layer, like this:</p>\n<p><a href=\"https://i.stack.imgur.com/01MdHm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/01MdHm.png\" alt=\"domain\" /></a></p>\n<p>Now, I need to map my domain classes to the infrastructure entities in order to save them in my database.</p>\n<p>I have an out port in my domain which is an interface:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// infra/ports/out/RuleRepository.java\npublic interface RuleRepository {\n  Rule save(Rule rule);\n}\n</code></pre>\n<p>This interface in implemented in the infrastructure layer:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// domain/RuleRepositoryJpaAdapter.java\npublic class RuleRepositoryJpaAdapter implements RuleRepository {\n\n  // extends CrudRepository&lt;RuleEntity, Long&gt;\n  RuleCrudRepository jpaRepository;\n  RuleMapper mapper;\n\n  @Override\n  public Rule save(Rule rule) {\n    return jpaRepository.save(mapper.mapToEntity(rule))\n      .mapToDomain();\n  }\n}\n</code></pre>\n<p>I'm looking for a way to implement <code>mapToEntity</code> without having to check the type of the rule. The best way would be to add a <code>mapToEntity</code> method to <code>Rule</code>, <code>IpRule</code>, <code>BlackListRule</code> but this would break the unit tests that check if there is any imports between the domain and infrastructure layer. If there any other way?</p>\n<p>What I have right now:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class RuleMapper {\n\n  public RuleEntity mapToEntity(Rule rule) {\n    if (rule instanceof IpRule) {\n      return new IpRuleEntity().mapFromDomain(rule);\n    } else if (rule instanceof BlackListRule) {\n      return new BlackListRuleEntity().mapFromDomain(rule);\n    } else {\n      throw new IllegalArgumentException(&quot;Unexpected argument of type &quot; + (rule == null ? &quot;null&quot; : rule.getClass().getName()));\n    }\n  }\n\n}\n</code></pre>\n"},{"tags":["java","android","android-fragments","navigation-drawer","android-architecture-navigation"],"comments":[{"owner":{"account_id":1849514,"reputation":193868,"user_id":1676363,"accept_rate":100,"display_name":"ianhanniballake"},"score":1,"creation_date":1633826265,"post_id":69511294,"comment_id":122863849,"body_markdown":"Did you [read the documentation](https://developer.android.com/guide/navigation/navigation-programmatic#modify_inflated)? It uses this exact case as an example.","body":"Did you <a href=\"https://developer.android.com/guide/navigation/navigation-programmatic#modify_inflated\" rel=\"nofollow noreferrer\">read the documentation</a>? It uses this exact case as an example."},{"owner":{"account_id":10358025,"reputation":2474,"user_id":7639296,"accept_rate":75,"display_name":"Dr Mido"},"score":0,"creation_date":1633828102,"post_id":69511294,"comment_id":122864024,"body_markdown":"@ianhanniballake Thanks I&#39;ve read it now, I&#39;ll continue looking if there&#39;s other ways to do this rather than switch the `navGraph.startDestination`","body":"@ianhanniballake Thanks I&#39;ve read it now, I&#39;ll continue looking if there&#39;s other ways to do this rather than switch the <code>navGraph.startDestination</code>"}],"answers":[{"tags":[],"owner":{"account_id":13654747,"reputation":38532,"user_id":9851608,"display_name":"Zain"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1634726002,"creation_date":1634341094,"answer_id":69591594,"question_id":69511294,"body_markdown":"#### Disclaimer:\r\n\r\nAs the `SharedPreference` will be deprecated soon or later, there is an Update below using `DataStore`.\r\n\r\n---\r\n\r\n## Using `SharedPreference` \r\n\r\n`onSaveInstanceState` &amp; `onRestoreInstanceState` can&#39;t be used to store/restore values after the app is closed/shut. \r\n\r\nEven if the app is not closed, you can&#39;t rely on them for storing large objects or storing objects for a long time.\r\n\r\nInstead of that you can use `SharedPreference`  to store a value that maps to last open fragment before the app exists. \r\n\r\nHere I store some arbitrary value, as it&#39;s recommended not to store application IDs, as they can vary from app launch to another. So, you can store arbitrary values and map them to the generated IDs in the current app launch.\r\n\r\nI picked those values as array indices:\r\n\r\n\t// Array of fragments\r\n\tprivate Integer[] fragments = {\r\n\t\tR.id.nav_home, \r\n\t\tR.id.nav_accessory,\r\n\t\tR.id.nav_arcade, \r\n\t\tR.id.nav_fashion,\r\n\t\tR.id.nav_food, \r\n\t\tR.id.nav_heath,\r\n\t\tR.id.nav_lifestyle, \r\n\t\tR.id.nav_sports, \r\n\t\tR.id.about\r\n\t};\r\n\r\nThen for every launch of the app; i.e. in `onCreate()` method, you can pick the current index from the `SharedPreference`, and call `graph.setStartDestination()`:\r\n\r\n\t// Getting the last fragment:\r\n\tSharedPreferences mSharedPrefs = getSharedPreferences(&quot;SHARED_PREFS&quot;, MODE_PRIVATE);\r\n\tint fragIndex = mSharedPrefs.getInt(LAST_FRAGMENT, -1); // The last fragment index \r\n\t// Check if it&#39;s a valid index\r\n\tif (fragIndex &gt;= 0 &amp;&amp; fragIndex &lt; fragments.length) {\r\n\t\t// Navigate to this fragment\r\n\t\tint currentFragment = fragments[fragIndex];\r\n\t\tgraph.setStartDestination(currentFragment);\r\n\r\n\t    // Change the current navGraph\r\n\t    navController.setGraph(graph);\r\n\t} \r\n\t\r\n\r\n\r\nAnd you can register new values to the sharedPreference once the destination is changed using `OnDestinationChangedListener` of the `navController`:\r\n\r\n\t// Listener to the change in fragments, so that we can updated the shared preference\r\n\tnavController.addOnDestinationChangedListener((controller, destination, arguments) -&gt; {\r\n\t\tint fragmentIndex = Arrays.asList(fragments).indexOf(destination.getId());\r\n\t\tSharedPreferences.Editor editor = mSharedPrefs.edit();\r\n\t\teditor.putInt(LAST_FRAGMENT, fragmentIndex).apply();\r\n\t});\r\n\t\r\n\r\n\r\nIntegrating this into your code with:\r\n\r\n```\r\n@AndroidEntryPoint\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    private static final String TAG = &quot;MainActivity&quot;;\r\n    @SuppressWarnings(&quot;unused&quot;)\r\n    private AppBarConfiguration mAppBarConfiguration;\r\n    private NavHostFragment navHostFragment;\r\n    private  NavController navController;\r\n    NavGraph navGraph;\r\n\r\n\t\r\n\t// Array of fragments\r\n\tprivate Integer[] fragments = {\r\n\t\tR.id.nav_home, \r\n\t\tR.id.nav_accessory,\r\n\t\tR.id.nav_arcade, \r\n\t\tR.id.nav_fashion,\r\n\t\tR.id.nav_food, \r\n\t\tR.id.nav_heath,\r\n\t\tR.id.nav_lifestyle, \r\n\t\tR.id.nav_sports, \r\n\t\tR.id.about\r\n\t};\r\n\t\r\n\t// Key for saving the last fragment in the Shared Preferences\r\n    private static final String LAST_FRAGMENT = &quot;LAST_FRAGMENT&quot;;\r\n\t\r\n\t\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        ActivityMainBinding binding = ActivityMainBinding.inflate(getLayoutInflater());\r\n        setContentView(binding.getRoot());\r\n\r\n\r\n        setSupportActionBar(binding.appBarMain.toolbar);\r\n        mAppBarConfiguration = new AppBarConfiguration.Builder(R.id.nav_home, R.id.nav_accessory,\r\n                R.id.nav_arcade, R.id.nav_fashion,\r\n                R.id.nav_food, R.id.nav_heath,\r\n                R.id.nav_lifestyle, R.id.nav_sports, R.id.about)\r\n                .setOpenableLayout(binding.drawerLayout)\r\n                .build();\r\n\r\n\r\n        navHostFragment = (NavHostFragment)\r\n                getSupportFragmentManager().findFragmentById(R.id.nav_host_fragment);\r\n\r\n        if(navHostFragment !=null) {\r\n          navController = navHostFragment.getNavController();\r\n        }\r\n\r\n        NavigationUI.setupActionBarWithNavController(this, navController, mAppBarConfiguration);\r\n        NavigationUI.setupWithNavController(binding.navView, navController);\r\n\r\n        navGraph = navController.getNavInflater().inflate(R.navigation.mobile_navigation);\r\n\r\n\t\t\r\n\t\t// Getting the last fragment:\r\n\t\tSharedPreferences mSharedPrefs = getSharedPreferences(&quot;SHARED_PREFS&quot;, MODE_PRIVATE);\r\n\t\tint fragIndex = mSharedPrefs.getInt(LAST_FRAGMENT, -1); // The last fragment index \r\n\t\t// Check if it&#39;s a valid index\r\n\t\tif (fragIndex &gt;= 0 &amp;&amp; fragIndex &lt; fragments.length) {\r\n\t\t\t// Navigate to this fragment\r\n\t\t\tint currentFragment = fragments[fragIndex];\r\n\t\t\tgraph.setStartDestination(currentFragment);\r\n\r\n\t\t    // Change the current navGraph\r\n\t\t    navController.setGraph(graph);\r\n\t\t} \r\n\t\t\r\n\r\n\t\t\r\n\t\t// Listener to the change in fragments, so that we can updated the shared preference\r\n\t\tnavController.addOnDestinationChangedListener((controller, destination, arguments) -&gt; {\r\n\t\t\tint fragmentIndex = Arrays.asList(fragments).indexOf(destination.getId());\r\n\t\t\tSharedPreferences.Editor editor = mSharedPrefs.edit();\r\n\t\t\teditor.putInt(LAST_FRAGMENT, fragmentIndex).apply();\r\n\t\t});\r\n\t\t\r\n\r\n    }\r\n\r\n\r\n    @Override\r\n    public boolean onSupportNavigateUp() {\r\n        return NavigationUI.navigateUp(navController, mAppBarConfiguration)\r\n                || super.onSupportNavigateUp();\r\n    }\r\n\r\n}\r\n```\r\n---\r\n\r\n## Using DataStore\r\n\r\n&gt; Since I migrated from sharedpreferences to dataStore in this project, I tried to do the same as your solution but it doesn&#39;t work, I&#39;ll post my try and you can look at it to see what&#39;s wrong, then you can edit your answer with dataStore soultion\r\n\r\nSo, I am going to use the same approach but with the DataStore (same fragment array, store indices instead of fragment destination IDs).\r\n\r\nSo, you need to add the array of fragment IDs so that it can be read in the DataStore process:\r\n\r\n\r\n\t// Array of fragment IDs\r\n\tprivate Integer[] fragments = {\r\n\t\tR.id.nav_home, \r\n\t\tR.id.nav_accessory,\r\n\t\tR.id.nav_arcade, \r\n\t\tR.id.nav_fashion,\r\n\t\tR.id.nav_food, \r\n\t\tR.id.nav_heath,\r\n\t\tR.id.nav_lifestyle, \r\n\t\tR.id.nav_sports, \r\n\t\tR.id.about\r\n\t};\r\n\r\nThen in the Repository change the logic to use the indices instead of the fragment IDs:\r\n\r\n\r\n\t@Inject\r\n\tpublic DataStoreRepository(@ApplicationContext Context context) {\r\n\t\tdataStore =\r\n\t\t\t\tnew RxPreferenceDataStoreBuilder(Objects.requireNonNull(context), /*name=*/ &quot;settings&quot;).build();\r\n\t\t\t\r\n\t\treadCurrentDestination =\r\n\t\t\tdataStore.data().map(preferences -&gt; {\r\n\r\n\t\t\t\tInteger fragIndex = preferences.get(CURRENT_DESTINATION);\r\n\t\t\t\tif (fragIndex == null) fragIndex = 0;\r\n\r\n\t\t\t\tif (fragIndex &gt;= 0 &amp;&amp; fragIndex &lt;= fragments.length) {\r\n\t\t\t\t\t// Navigate to the fragIndex\r\n\t\t\t\t\treturn fragments[fragIndex];\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn R.id.nav_home;\r\n\t\t\t\t}\r\n\t\t\t});\t\r\n\t\t\r\n\t}\t\r\n\r\n\r\nAnd in the `ViewModel`, you should not subscribe a permanent Observable to the `Flowable` because this will submit any change to the observed data permanently, but instead you can convert the `Flowable` to a `Single` so that you can just get a single (first) value of the fragment ID only once at the app launch, and no more observers are registered. [Check Documentation][1] for more details.\r\n\r\nApplying that in your `ViewModel`:\r\n\r\n    @Inject\r\n    public PostViewModel(Repository repository, Utils.DataStoreRepository dataStoreRepository) {\r\n        this.repository = repository;\r\n        getAllItemsFromDataBase = repository.localDataSource.getAllItems();\r\n        this.dataStoreRepository = dataStoreRepository;\r\n\r\n\t\tdataStoreRepository.readCurrentDestination.firstOrError().subscribeWith(new DisposableSingleObserver&lt;Integer&gt;() {\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void onSuccess(@NotNull Integer destination) {\r\n\t\t\t\r\n\t\t\t\t// Must be run at UI/Main Thread\r\n\t\t\t\trunOnUiThread(() -&gt; {\r\n\t\t\t\t\tcurrentDestination.setValue(destination);\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void onError(@NotNull Throwable error) {\r\n\t\t\t\terror.printStackTrace();\r\n\t\t\t}\r\n\t\t}).dispose();\r\n\r\n    }\r\n\t\r\nThen as you observe the `currentDestination` MutableLiveData in the activity: change the current destination there (You already did that well):\r\n\r\n\tpostViewModel.currentDestination.observe(this,currentDestination -&gt; {\r\n\t\tLog.d(TAG, &quot;currentDestination: &quot; + currentDestination);\r\n\t\tToast.makeText(this,&quot;currentDestination&quot; + currentDestination,Toast.LENGTH_SHORT).show();\r\n\t\tnavGraph.setStartDestination(currentDestination);\r\n\t\tnavController.setGraph(navGraph);\r\n\t});\r\n\r\n\r\nSaving the current fragment to the `DataStore` whenever the destination changes:\r\n\r\nIn the `ViewModel`:\r\n\r\n\tpublic void saveCurrentDestination(int value){\r\n\t\tint fragmentIndex = Arrays.asList(fragments).indexOf(value);\r\n\t\tCURRENT_DESTINATION = PreferencesKeys.intKey(keyName);\r\n\t\tdataStore.updateDataAsync(prefsIn -&gt; {\r\n\t\t\tMutablePreferences mutablePreferences = prefsIn.toMutablePreferences();\r\n\t\t\tmutablePreferences.set(CURRENT_DESTINATION, fragmentIndex);\r\n\t\t\treturn Single.just(mutablePreferences);\r\n\t\t}).subscribe();\r\n\r\n\t}\r\n\t\r\n\r\n\r\n\r\n\r\n  [1]: http://reactivex.io/RxJava/3.x/javadoc/io/reactivex/rxjava3/core/Single.html","title":"How to open the last fragment opened after closed app and reopen it using Navigation drawer and Navigation Component","body":"<h4>Disclaimer:</h4>\n<p>As the <code>SharedPreference</code> will be deprecated soon or later, there is an Update below using <code>DataStore</code>.</p>\n<hr />\n<h2>Using <code>SharedPreference</code></h2>\n<p><code>onSaveInstanceState</code> &amp; <code>onRestoreInstanceState</code> can't be used to store/restore values after the app is closed/shut.</p>\n<p>Even if the app is not closed, you can't rely on them for storing large objects or storing objects for a long time.</p>\n<p>Instead of that you can use <code>SharedPreference</code>  to store a value that maps to last open fragment before the app exists.</p>\n<p>Here I store some arbitrary value, as it's recommended not to store application IDs, as they can vary from app launch to another. So, you can store arbitrary values and map them to the generated IDs in the current app launch.</p>\n<p>I picked those values as array indices:</p>\n<pre><code>// Array of fragments\nprivate Integer[] fragments = {\n    R.id.nav_home, \n    R.id.nav_accessory,\n    R.id.nav_arcade, \n    R.id.nav_fashion,\n    R.id.nav_food, \n    R.id.nav_heath,\n    R.id.nav_lifestyle, \n    R.id.nav_sports, \n    R.id.about\n};\n</code></pre>\n<p>Then for every launch of the app; i.e. in <code>onCreate()</code> method, you can pick the current index from the <code>SharedPreference</code>, and call <code>graph.setStartDestination()</code>:</p>\n<pre><code>// Getting the last fragment:\nSharedPreferences mSharedPrefs = getSharedPreferences(&quot;SHARED_PREFS&quot;, MODE_PRIVATE);\nint fragIndex = mSharedPrefs.getInt(LAST_FRAGMENT, -1); // The last fragment index \n// Check if it's a valid index\nif (fragIndex &gt;= 0 &amp;&amp; fragIndex &lt; fragments.length) {\n    // Navigate to this fragment\n    int currentFragment = fragments[fragIndex];\n    graph.setStartDestination(currentFragment);\n\n    // Change the current navGraph\n    navController.setGraph(graph);\n} \n</code></pre>\n<p>And you can register new values to the sharedPreference once the destination is changed using <code>OnDestinationChangedListener</code> of the <code>navController</code>:</p>\n<pre><code>// Listener to the change in fragments, so that we can updated the shared preference\nnavController.addOnDestinationChangedListener((controller, destination, arguments) -&gt; {\n    int fragmentIndex = Arrays.asList(fragments).indexOf(destination.getId());\n    SharedPreferences.Editor editor = mSharedPrefs.edit();\n    editor.putInt(LAST_FRAGMENT, fragmentIndex).apply();\n});\n</code></pre>\n<p>Integrating this into your code with:</p>\n<pre><code>@AndroidEntryPoint\npublic class MainActivity extends AppCompatActivity {\n\n    private static final String TAG = &quot;MainActivity&quot;;\n    @SuppressWarnings(&quot;unused&quot;)\n    private AppBarConfiguration mAppBarConfiguration;\n    private NavHostFragment navHostFragment;\n    private  NavController navController;\n    NavGraph navGraph;\n\n    \n    // Array of fragments\n    private Integer[] fragments = {\n        R.id.nav_home, \n        R.id.nav_accessory,\n        R.id.nav_arcade, \n        R.id.nav_fashion,\n        R.id.nav_food, \n        R.id.nav_heath,\n        R.id.nav_lifestyle, \n        R.id.nav_sports, \n        R.id.about\n    };\n    \n    // Key for saving the last fragment in the Shared Preferences\n    private static final String LAST_FRAGMENT = &quot;LAST_FRAGMENT&quot;;\n    \n    \n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        ActivityMainBinding binding = ActivityMainBinding.inflate(getLayoutInflater());\n        setContentView(binding.getRoot());\n\n\n        setSupportActionBar(binding.appBarMain.toolbar);\n        mAppBarConfiguration = new AppBarConfiguration.Builder(R.id.nav_home, R.id.nav_accessory,\n                R.id.nav_arcade, R.id.nav_fashion,\n                R.id.nav_food, R.id.nav_heath,\n                R.id.nav_lifestyle, R.id.nav_sports, R.id.about)\n                .setOpenableLayout(binding.drawerLayout)\n                .build();\n\n\n        navHostFragment = (NavHostFragment)\n                getSupportFragmentManager().findFragmentById(R.id.nav_host_fragment);\n\n        if(navHostFragment !=null) {\n          navController = navHostFragment.getNavController();\n        }\n\n        NavigationUI.setupActionBarWithNavController(this, navController, mAppBarConfiguration);\n        NavigationUI.setupWithNavController(binding.navView, navController);\n\n        navGraph = navController.getNavInflater().inflate(R.navigation.mobile_navigation);\n\n        \n        // Getting the last fragment:\n        SharedPreferences mSharedPrefs = getSharedPreferences(&quot;SHARED_PREFS&quot;, MODE_PRIVATE);\n        int fragIndex = mSharedPrefs.getInt(LAST_FRAGMENT, -1); // The last fragment index \n        // Check if it's a valid index\n        if (fragIndex &gt;= 0 &amp;&amp; fragIndex &lt; fragments.length) {\n            // Navigate to this fragment\n            int currentFragment = fragments[fragIndex];\n            graph.setStartDestination(currentFragment);\n\n            // Change the current navGraph\n            navController.setGraph(graph);\n        } \n        \n\n        \n        // Listener to the change in fragments, so that we can updated the shared preference\n        navController.addOnDestinationChangedListener((controller, destination, arguments) -&gt; {\n            int fragmentIndex = Arrays.asList(fragments).indexOf(destination.getId());\n            SharedPreferences.Editor editor = mSharedPrefs.edit();\n            editor.putInt(LAST_FRAGMENT, fragmentIndex).apply();\n        });\n        \n\n    }\n\n\n    @Override\n    public boolean onSupportNavigateUp() {\n        return NavigationUI.navigateUp(navController, mAppBarConfiguration)\n                || super.onSupportNavigateUp();\n    }\n\n}\n</code></pre>\n<hr />\n<h2>Using DataStore</h2>\n<blockquote>\n<p>Since I migrated from sharedpreferences to dataStore in this project, I tried to do the same as your solution but it doesn't work, I'll post my try and you can look at it to see what's wrong, then you can edit your answer with dataStore soultion</p>\n</blockquote>\n<p>So, I am going to use the same approach but with the DataStore (same fragment array, store indices instead of fragment destination IDs).</p>\n<p>So, you need to add the array of fragment IDs so that it can be read in the DataStore process:</p>\n<pre><code>// Array of fragment IDs\nprivate Integer[] fragments = {\n    R.id.nav_home, \n    R.id.nav_accessory,\n    R.id.nav_arcade, \n    R.id.nav_fashion,\n    R.id.nav_food, \n    R.id.nav_heath,\n    R.id.nav_lifestyle, \n    R.id.nav_sports, \n    R.id.about\n};\n</code></pre>\n<p>Then in the Repository change the logic to use the indices instead of the fragment IDs:</p>\n<pre><code>@Inject\npublic DataStoreRepository(@ApplicationContext Context context) {\n    dataStore =\n            new RxPreferenceDataStoreBuilder(Objects.requireNonNull(context), /*name=*/ &quot;settings&quot;).build();\n        \n    readCurrentDestination =\n        dataStore.data().map(preferences -&gt; {\n\n            Integer fragIndex = preferences.get(CURRENT_DESTINATION);\n            if (fragIndex == null) fragIndex = 0;\n\n            if (fragIndex &gt;= 0 &amp;&amp; fragIndex &lt;= fragments.length) {\n                // Navigate to the fragIndex\n                return fragments[fragIndex];\n            } else {\n                return R.id.nav_home;\n            }\n        }); \n    \n}   \n</code></pre>\n<p>And in the <code>ViewModel</code>, you should not subscribe a permanent Observable to the <code>Flowable</code> because this will submit any change to the observed data permanently, but instead you can convert the <code>Flowable</code> to a <code>Single</code> so that you can just get a single (first) value of the fragment ID only once at the app launch, and no more observers are registered. <a href=\"http://reactivex.io/RxJava/3.x/javadoc/io/reactivex/rxjava3/core/Single.html\" rel=\"nofollow noreferrer\">Check Documentation</a> for more details.</p>\n<p>Applying that in your <code>ViewModel</code>:</p>\n<pre><code>@Inject\npublic PostViewModel(Repository repository, Utils.DataStoreRepository dataStoreRepository) {\n    this.repository = repository;\n    getAllItemsFromDataBase = repository.localDataSource.getAllItems();\n    this.dataStoreRepository = dataStoreRepository;\n\n    dataStoreRepository.readCurrentDestination.firstOrError().subscribeWith(new DisposableSingleObserver&lt;Integer&gt;() {\n\n        @Override\n        public void onSuccess(@NotNull Integer destination) {\n        \n            // Must be run at UI/Main Thread\n            runOnUiThread(() -&gt; {\n                currentDestination.setValue(destination);\n            });\n            \n        }\n\n        @Override\n        public void onError(@NotNull Throwable error) {\n            error.printStackTrace();\n        }\n    }).dispose();\n\n}\n</code></pre>\n<p>Then as you observe the <code>currentDestination</code> MutableLiveData in the activity: change the current destination there (You already did that well):</p>\n<pre><code>postViewModel.currentDestination.observe(this,currentDestination -&gt; {\n    Log.d(TAG, &quot;currentDestination: &quot; + currentDestination);\n    Toast.makeText(this,&quot;currentDestination&quot; + currentDestination,Toast.LENGTH_SHORT).show();\n    navGraph.setStartDestination(currentDestination);\n    navController.setGraph(navGraph);\n});\n</code></pre>\n<p>Saving the current fragment to the <code>DataStore</code> whenever the destination changes:</p>\n<p>In the <code>ViewModel</code>:</p>\n<pre><code>public void saveCurrentDestination(int value){\n    int fragmentIndex = Arrays.asList(fragments).indexOf(value);\n    CURRENT_DESTINATION = PreferencesKeys.intKey(keyName);\n    dataStore.updateDataAsync(prefsIn -&gt; {\n        MutablePreferences mutablePreferences = prefsIn.toMutablePreferences();\n        mutablePreferences.set(CURRENT_DESTINATION, fragmentIndex);\n        return Single.just(mutablePreferences);\n    }).subscribe();\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":263656,"reputation":1,"user_id":549372,"accept_rate":100,"display_name":"Martin Zeitler"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634423800,"creation_date":1634422433,"answer_id":69599915,"question_id":69511294,"body_markdown":"How you store the current location within the navigation graph doesn&#39;t matter much (we are actually talking about storing a single one `long` value and eventually some argument values).\r\n\r\nThe preconditions by themselves should already explain how it works:\r\n\r\n - being able to navigate to each destination with a [global][1] `NavAction`.\r\n - being able to resolve the stored destination ID to a [global][1] `NavAction`.\r\n - not to forget about navigation arguments (eg. alike an `itemId`).\r\n\r\nAlike this one may loose the back-stack entries, but one can navigate directly. If this shouldn&#39;t suffice, store the `NavController` back-stack entries and them play them back (not suggested).\r\n\r\n  [1]: https://developer.android.com/guide/navigation/navigation-global-action","title":"How to open the last fragment opened after closed app and reopen it using Navigation drawer and Navigation Component","body":"<p>How you store the current location within the navigation graph doesn't matter much (we are actually talking about storing a single one <code>long</code> value and eventually some argument values).</p>\n<p>The preconditions by themselves should already explain how it works:</p>\n<ul>\n<li>being able to navigate to each destination with a <a href=\"https://developer.android.com/guide/navigation/navigation-global-action\" rel=\"nofollow noreferrer\">global</a> <code>NavAction</code>.</li>\n<li>being able to resolve the stored destination ID to a <a href=\"https://developer.android.com/guide/navigation/navigation-global-action\" rel=\"nofollow noreferrer\">global</a> <code>NavAction</code>.</li>\n<li>not to forget about navigation arguments (eg. alike an <code>itemId</code>).</li>\n</ul>\n<p>Alike this one may loose the back-stack entries, but one can navigate directly. If this shouldn't suffice, store the <code>NavController</code> back-stack entries and them play them back (not suggested).</p>\n"}],"owner":{"account_id":10358025,"reputation":2474,"user_id":7639296,"accept_rate":75,"display_name":"Dr Mido"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":822,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69591594,"answer_count":2,"score":1,"last_activity_date":1634726002,"creation_date":1633823527,"question_id":69511294,"body_markdown":"&lt;h2&gt; Update &lt;/h2&gt;\r\n\r\nSince `onSaveInstanceState` &amp; `onRestoreInstanceState` can&#39;t be used to store/restore values after closed the app, I tried to use dataStore to solve it, but it dosen&#39;t work, here&#39;s my trying\r\n\r\n**`DataStoreRepository`**\r\n\r\n```\r\n@ActivityRetainedScoped\r\n    public static class DataStoreRepository {\r\n        RxDataStore&lt;Preferences&gt; dataStore;\r\n\r\n        public static Preferences.Key&lt;Integer&gt; CURRENT_DESTINATION =\r\n                PreferencesKeys.intKey(&quot;CURRENT_DESTINATION&quot;);\r\n\r\n        public final Flowable&lt;Integer&gt; readCurrentDestination;\r\n\r\n        @Inject\r\n        public DataStoreRepository(@ApplicationContext Context context) {\r\n            dataStore =\r\n                    new RxPreferenceDataStoreBuilder(Objects.requireNonNull(context), /*name=*/ &quot;settings&quot;).build();\r\n\r\n            readCurrentDestination = dataStore.data().map(preferences -&gt; {\r\n                if (preferences.get(CURRENT_DESTINATION) != null) {\r\n                    return preferences.get(CURRENT_DESTINATION);\r\n                } else {\r\n                    return R.id.nav_home;\r\n                }\r\n\r\n            });\r\n        }\r\n\r\n\r\n        public void saveCurrentDestination(String keyName, int value){\r\n\r\n            CURRENT_DESTINATION = PreferencesKeys.intKey(keyName);\r\n            dataStore.updateDataAsync(prefsIn -&gt; {\r\n                MutablePreferences mutablePreferences = prefsIn.toMutablePreferences();\r\n                Integer currentKey = prefsIn.get(CURRENT_DESTINATION);\r\n\r\n                if (currentKey == null) {\r\n                    saveCurrentDestination(keyName,value);\r\n                }\r\n\r\n                mutablePreferences.set(CURRENT_DESTINATION,\r\n                        currentKey != null ? value : R.id.nav_home);\r\n                return Single.just(mutablePreferences);\r\n            }).subscribe();\r\n\r\n        }\r\n\r\n    }\r\n```\r\n\r\n**read and save in ViewModel**\r\n\r\n```\r\npublic final MutableLiveData&lt;Integer&gt; currentDestination = new MutableLiveData&lt;&gt;();\r\n\r\n\r\n @Inject\r\n    public PostViewModel(Repository repository, Utils.DataStoreRepository dataStoreRepository) {\r\n        this.repository = repository;\r\n        getAllItemsFromDataBase = repository.localDataSource.getAllItems();\r\n        this.dataStoreRepository = dataStoreRepository;\r\n\r\n        dataStoreRepository.readCurrentDestination\r\n                .subscribeOn(Schedulers.io())\r\n                .observeOn(AndroidSchedulers.mainThread())\r\n                .subscribe(new FlowableSubscriber&lt;Integer&gt;() {\r\n                    @Override\r\n                    public void onSubscribe(@NonNull Subscription s) {\r\n                        s.request(Long.MAX_VALUE);\r\n                    }\r\n\r\n                    @Override\r\n                    public void onNext(Integer integer) {\r\n\r\n                    }\r\n\r\n                    @Override\r\n                    public void onError(Throwable t) {\r\n                        Log.e(TAG, &quot;onError: &quot; + t.getMessage());\r\n                    }\r\n\r\n                    @Override\r\n                    public void onComplete() {\r\n\r\n                    }\r\n                });\r\n\r\n    }\r\n\r\n    public void saveCurrentDestination(int currentDestination) {\r\n        dataStoreRepository\r\n                .saveCurrentDestination(&quot;CURRENT_DESTINATION&quot;, currentDestination);\r\n    }\r\n\r\n```\r\n\r\n**and finally MainActivity**\r\n\r\n```\r\n@AndroidEntryPoint\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    private static final String TAG = &quot;MainActivity&quot;;\r\n    @SuppressWarnings(&quot;unused&quot;)\r\n    private AppBarConfiguration mAppBarConfiguration;\r\n    private NavHostFragment navHostFragment;\r\n    private  NavController navController;\r\n    NavGraph navGraph;\r\n    private PostViewModel postViewModel;\r\n\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        ActivityMainBinding binding = ActivityMainBinding.inflate(getLayoutInflater());\r\n        setContentView(binding.getRoot());\r\n        postViewModel = new ViewModelProvider(this).get(PostViewModel.class);\r\n\r\n\r\n        setSupportActionBar(binding.appBarMain.toolbar);\r\n        mAppBarConfiguration = new AppBarConfiguration.Builder(R.id.nav_home, R.id.nav_accessory,\r\n                R.id.nav_arcade, R.id.nav_fashion,\r\n                R.id.nav_food, R.id.nav_heath,\r\n                R.id.nav_lifestyle, R.id.nav_sports, R.id.about)\r\n                .setOpenableLayout(binding.drawerLayout)\r\n                .build();\r\n\r\n\r\n        navHostFragment = (NavHostFragment)\r\n                getSupportFragmentManager().findFragmentById(R.id.nav_host_fragment);\r\n\r\n        if(navHostFragment !=null) {\r\n          navController = navHostFragment.getNavController();\r\n        }\r\n\r\n        NavigationUI.setupActionBarWithNavController(this, navController, mAppBarConfiguration);\r\n        NavigationUI.setupWithNavController(binding.navView, navController);\r\n\r\n        navGraph = navController.getNavInflater().inflate(R.navigation.mobile_navigation);\r\n\r\n        postViewModel.currentDestination.observe(this,currentDestination -&gt; {\r\n            Log.d(TAG, &quot;currentDestination: &quot; + currentDestination);\r\n            Toast.makeText(this,&quot;currentDestination&quot; + currentDestination,Toast.LENGTH_SHORT).show();\r\n            navGraph.setStartDestination(currentDestination);\r\n            navController.setGraph(navGraph);\r\n        });\r\n\r\n        navController.addOnDestinationChangedListener((controller, destination, arguments) -&gt; {\r\n            Log.d(TAG, &quot;addOnDestinationChangedListener: &quot; + destination.getId());\r\n            postViewModel.saveCurrentDestination(destination.getId());\r\n        });\r\n\r\n\r\n\r\n    }\r\n\r\n\r\n    @Override\r\n    public boolean onSupportNavigateUp() {\r\n        return NavigationUI.navigateUp(navController, mAppBarConfiguration)\r\n                || super.onSupportNavigateUp();\r\n    }\r\n\r\n}\r\n```\r\n\r\n**Problem in detail**\r\n\r\nIn this app I have 9 menu items and fragments in navigation drawer, I want to save the last opened fragment in `savedInstanceState` or `datastore` and after the user closed the app and re open it again display the last opend fragment, but I don&#39;t know which method I&#39;ll use\r\n\r\n**`Navigation.findNavController(activity,nav_graph).navigate();`**\r\n\r\nor\r\n        \r\n**`binding.navView.setNavigationItemSelectedListener(item -&gt; false);`**\r\n\r\n**activity_main.xml**\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;androidx.drawerlayout.widget.DrawerLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:id=&quot;@+id/drawer_layout&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    android:fitsSystemWindows=&quot;true&quot;\r\n    tools:openDrawer=&quot;start&quot;&gt;\r\n\r\n    &lt;include\r\n        android:id=&quot;@+id/app_bar_main&quot;\r\n        layout=&quot;@layout/app_bar_main&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot; /&gt;\r\n\r\n    &lt;com.google.android.material.navigation.NavigationView\r\n        android:id=&quot;@+id/nav_view&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:layout_gravity=&quot;start&quot;\r\n        android:fitsSystemWindows=&quot;true&quot;\r\n        android:background=&quot;@color/color_navigation_list_background&quot;\r\n        app:headerLayout=&quot;@layout/nav_header_main&quot;\r\n        app:menu=&quot;@menu/activity_main_drawer&quot; /&gt;\r\n\r\n&lt;/androidx.drawerlayout.widget.DrawerLayout&gt;\r\n```\r\n\r\n**activity_main_drawer.xml**\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;menu xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    tools:showIn=&quot;navigation_view&quot;&gt;\r\n\r\n    &lt;group android:checkableBehavior=&quot;single&quot;&gt;\r\n        &lt;item\r\n            android:id=&quot;@+id/nav_home&quot;\r\n            android:title=&quot;@string/home&quot;\r\n            android:icon=&quot;@drawable/home&quot;\r\n            /&gt;\r\n\r\n        &lt;item\r\n            android:id=&quot;@+id/nav_accessory&quot;\r\n            android:title=&quot;@string/accessory&quot;\r\n            android:icon=&quot;@drawable/necklace&quot;\r\n            /&gt;\r\n        &lt;item\r\n            android:id=&quot;@+id/nav_arcade&quot;\r\n            android:title=&quot;@string/arcade&quot;\r\n            android:icon=&quot;@drawable/arcade_cabinet&quot;\r\n            /&gt;\r\n        &lt;item\r\n            android:id=&quot;@+id/nav_fashion&quot;\r\n            android:title=&quot;@string/fashion&quot;\r\n            android:icon=&quot;@drawable/fashion_trend&quot;\r\n            /&gt;\r\n        &lt;item\r\n            android:id=&quot;@+id/nav_food&quot;\r\n            android:title=&quot;@string/food&quot;\r\n            android:icon=&quot;@drawable/hamburger&quot;\r\n            /&gt;\r\n        &lt;item\r\n            android:id=&quot;@+id/nav_heath&quot;\r\n            android:title=&quot;@string/heath&quot;\r\n            android:icon=&quot;@drawable/clinic&quot;\r\n            /&gt;\r\n        &lt;item\r\n            android:id=&quot;@+id/nav_lifestyle&quot;\r\n            android:title=&quot;@string/lifestyle&quot;\r\n            android:icon=&quot;@drawable/yoga&quot;\r\n            /&gt;\r\n        &lt;item\r\n            android:id=&quot;@+id/nav_sports&quot;\r\n            android:title=&quot;@string/sports&quot;\r\n            android:icon=&quot;@drawable/soccer&quot;\r\n            /&gt;\r\n\r\n        &lt;item\r\n            android:id=&quot;@+id/nav_favorites&quot;\r\n            android:title=&quot;@string/favorites_posts&quot;\r\n            android:icon=&quot;@drawable/ic_favorite&quot;\r\n            /&gt;\r\n\r\n        &lt;item\r\n            android:id=&quot;@+id/about&quot;\r\n            android:title=&quot;@string/about&quot;\r\n            android:icon=&quot;@drawable/about&quot;\r\n            /&gt;\r\n\r\n    &lt;/group&gt;\r\n\r\n&lt;/menu&gt;\r\n```\r\n\r\n**nav_graph.xml**\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;navigation xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:id=&quot;@+id/mobile_navigation&quot;\r\n    app:startDestination=&quot;@id/nav_home&quot;&gt;\r\n\r\n    &lt;fragment\r\n        android:id=&quot;@+id/nav_home&quot;\r\n        android:name=&quot;com.blogspot.abtallaldigital.ui.HomeFragment&quot;\r\n        android:label=&quot;@string/home&quot;\r\n        tools:layout=&quot;@layout/fragment_home&quot;&gt;\r\n        &lt;action\r\n            android:id=&quot;@+id/action_nav_home_to_detailsFragment&quot;\r\n            app:destination=&quot;@id/detailsFragment&quot;\r\n            app:popUpTo=&quot;@id/nav_home&quot; /&gt;\r\n    &lt;/fragment&gt;\r\n\r\n    &lt;fragment\r\n        android:id=&quot;@+id/nav_accessory&quot;\r\n        android:name=&quot;com.blogspot.abtallaldigital.ui.AccessoryFragment&quot;\r\n        android:label=&quot;@string/accessory&quot;\r\n        tools:layout=&quot;@layout/fragment_accessory&quot; &gt;\r\n        &lt;action\r\n            android:id=&quot;@+id/action_nav_Accessory_to_detailsFragment&quot;\r\n            app:destination=&quot;@id/detailsFragment&quot; /&gt;\r\n    &lt;/fragment&gt;\r\n\r\n    &lt;fragment\r\n        android:id=&quot;@+id/nav_arcade&quot;\r\n        android:name=&quot;com.blogspot.abtallaldigital.ui.ArcadeFragment&quot;\r\n        android:label=&quot;@string/arcade&quot;\r\n        tools:layout=&quot;@layout/fragment_arcade&quot; &gt;\r\n        &lt;action\r\n            android:id=&quot;@+id/action_nav_Arcade_to_detailsFragment&quot;\r\n            app:destination=&quot;@id/detailsFragment&quot; /&gt;\r\n    &lt;/fragment&gt;\r\n\r\n    &lt;fragment\r\n        android:id=&quot;@+id/nav_fashion&quot;\r\n        android:name=&quot;com.blogspot.abtallaldigital.ui.FashionFragment&quot;\r\n        android:label=&quot;@string/fashion&quot;\r\n        tools:layout=&quot;@layout/fragment_fashion&quot; &gt;\r\n        &lt;action\r\n            android:id=&quot;@+id/action_nav_Fashion_to_detailsFragment&quot;\r\n            app:destination=&quot;@id/detailsFragment&quot; /&gt;\r\n    &lt;/fragment&gt;\r\n    &lt;fragment\r\n        android:id=&quot;@+id/nav_food&quot;\r\n        android:name=&quot;com.blogspot.abtallaldigital.ui.FoodFragment&quot;\r\n        android:label=&quot;@string/food&quot;\r\n        tools:layout=&quot;@layout/food_fragment&quot; &gt;\r\n        &lt;action\r\n            android:id=&quot;@+id/action_nav_Food_to_detailsFragment&quot;\r\n            app:destination=&quot;@id/detailsFragment&quot; /&gt;\r\n    &lt;/fragment&gt;\r\n    &lt;fragment\r\n        android:id=&quot;@+id/nav_heath&quot;\r\n        android:name=&quot;com.blogspot.abtallaldigital.ui.HeathFragment&quot;\r\n        android:label=&quot;@string/heath&quot;\r\n        tools:layout=&quot;@layout/heath_fragment&quot; &gt;\r\n        &lt;action\r\n            android:id=&quot;@+id/action_nav_Heath_to_detailsFragment&quot;\r\n            app:destination=&quot;@id/detailsFragment&quot; /&gt;\r\n    &lt;/fragment&gt;\r\n    &lt;fragment\r\n        android:id=&quot;@+id/nav_lifestyle&quot;\r\n        android:name=&quot;com.blogspot.abtallaldigital.ui.LifestyleFragment&quot;\r\n        android:label=&quot;@string/lifestyle&quot;\r\n        tools:layout=&quot;@layout/lifestyle_fragment&quot; &gt;\r\n        &lt;action\r\n            android:id=&quot;@+id/action_nav_Lifestyle_to_detailsFragment&quot;\r\n            app:destination=&quot;@id/detailsFragment&quot; /&gt;\r\n    &lt;/fragment&gt;\r\n    &lt;fragment\r\n        android:id=&quot;@+id/nav_sports&quot;\r\n        android:name=&quot;com.blogspot.abtallaldigital.ui.SportsFragment&quot;\r\n        android:label=&quot;@string/sports&quot;\r\n        tools:layout=&quot;@layout/sports_fragment&quot; &gt;\r\n        &lt;action\r\n            android:id=&quot;@+id/action_nav_Sports_to_detailsFragment&quot;\r\n            app:destination=&quot;@id/detailsFragment&quot; /&gt;\r\n    &lt;/fragment&gt;\r\n    &lt;dialog\r\n        android:id=&quot;@+id/about&quot;\r\n        android:name=&quot;com.blogspot.abtallaldigital.ui.AboutFragment&quot;\r\n        android:label=&quot;about&quot;\r\n        tools:layout=&quot;@layout/about&quot; /&gt;\r\n    &lt;fragment\r\n        android:id=&quot;@+id/detailsFragment&quot;\r\n        android:name=&quot;com.blogspot.abtallaldigital.ui.DetailsFragment&quot;\r\n        android:label=&quot;Post details&quot;\r\n        tools:layout=&quot;@layout/fragment_details&quot; &gt;\r\n        &lt;argument\r\n            android:name=&quot;postItem&quot;\r\n            app:argType=&quot;com.blogspot.abtallaldigital.pojo.Item&quot; /&gt;\r\n    &lt;/fragment&gt;\r\n    &lt;fragment\r\n        android:id=&quot;@+id/nav_favorites&quot;\r\n        android:name=&quot;com.blogspot.abtallaldigital.ui.FavoritesFragment&quot;\r\n        android:label=&quot;Favorites posts&quot;\r\n        tools:layout=&quot;@layout/fragment_favorites&quot; &gt;\r\n        &lt;action\r\n            android:id=&quot;@+id/action_favoritesFragment_to_detailsFragment&quot;\r\n            app:destination=&quot;@id/detailsFragment&quot; /&gt;\r\n    &lt;/fragment&gt;\r\n&lt;/navigation&gt;\r\n```\r\n\r\n\r\n**MainActivity class**\r\n\r\n```\r\n@AndroidEntryPoint\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    @SuppressWarnings(&quot;unused&quot;)\r\n    private AppBarConfiguration mAppBarConfiguration;\r\n    public static Utils.DataStoreRepository DATA_STORE_REPOSITORY;\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        ActivityMainBinding binding = ActivityMainBinding.inflate(getLayoutInflater());\r\n        setContentView(binding.getRoot());\r\n\r\n\r\n        setSupportActionBar(binding.appBarMain.toolbar);\r\n        mAppBarConfiguration = new AppBarConfiguration.Builder(R.id.nav_home, R.id.nav_accessory,\r\n                R.id.nav_arcade, R.id.nav_fashion,\r\n                R.id.nav_food, R.id.nav_heath,\r\n                R.id.nav_lifestyle, R.id.nav_sports, R.id.about)\r\n                .setOpenableLayout(binding.drawerLayout)\r\n                .build();\r\n\r\n\r\n        NavHostFragment navHostFragment = (NavHostFragment)\r\n                getSupportFragmentManager().findFragmentById(R.id.nav_host_fragment);\r\n\r\n        assert navHostFragment != null;\r\n        NavController navController = navHostFragment.getNavController();\r\n\r\n        NavigationUI.setupActionBarWithNavController(this, navController, mAppBarConfiguration);\r\n        NavigationUI.setupWithNavController(binding.navView, navController);\r\n\r\n\r\n    }\r\n\r\n\r\n    @Override\r\n    public boolean onSupportNavigateUp() {\r\n        NavController navController = Navigation.findNavController(this, R.id.nav_host_fragment);\r\n        return NavigationUI.navigateUp(navController, mAppBarConfiguration)\r\n                || super.onSupportNavigateUp();\r\n    }\r\n\r\n}\r\n```","title":"How to open the last fragment opened after closed app and reopen it using Navigation drawer and Navigation Component","body":"<h2> Update </h2>\n<p>Since <code>onSaveInstanceState</code> &amp; <code>onRestoreInstanceState</code> can't be used to store/restore values after closed the app, I tried to use dataStore to solve it, but it dosen't work, here's my trying</p>\n<p><strong><code>DataStoreRepository</code></strong></p>\n<pre><code>@ActivityRetainedScoped\n    public static class DataStoreRepository {\n        RxDataStore&lt;Preferences&gt; dataStore;\n\n        public static Preferences.Key&lt;Integer&gt; CURRENT_DESTINATION =\n                PreferencesKeys.intKey(&quot;CURRENT_DESTINATION&quot;);\n\n        public final Flowable&lt;Integer&gt; readCurrentDestination;\n\n        @Inject\n        public DataStoreRepository(@ApplicationContext Context context) {\n            dataStore =\n                    new RxPreferenceDataStoreBuilder(Objects.requireNonNull(context), /*name=*/ &quot;settings&quot;).build();\n\n            readCurrentDestination = dataStore.data().map(preferences -&gt; {\n                if (preferences.get(CURRENT_DESTINATION) != null) {\n                    return preferences.get(CURRENT_DESTINATION);\n                } else {\n                    return R.id.nav_home;\n                }\n\n            });\n        }\n\n\n        public void saveCurrentDestination(String keyName, int value){\n\n            CURRENT_DESTINATION = PreferencesKeys.intKey(keyName);\n            dataStore.updateDataAsync(prefsIn -&gt; {\n                MutablePreferences mutablePreferences = prefsIn.toMutablePreferences();\n                Integer currentKey = prefsIn.get(CURRENT_DESTINATION);\n\n                if (currentKey == null) {\n                    saveCurrentDestination(keyName,value);\n                }\n\n                mutablePreferences.set(CURRENT_DESTINATION,\n                        currentKey != null ? value : R.id.nav_home);\n                return Single.just(mutablePreferences);\n            }).subscribe();\n\n        }\n\n    }\n</code></pre>\n<p><strong>read and save in ViewModel</strong></p>\n<pre><code>public final MutableLiveData&lt;Integer&gt; currentDestination = new MutableLiveData&lt;&gt;();\n\n\n @Inject\n    public PostViewModel(Repository repository, Utils.DataStoreRepository dataStoreRepository) {\n        this.repository = repository;\n        getAllItemsFromDataBase = repository.localDataSource.getAllItems();\n        this.dataStoreRepository = dataStoreRepository;\n\n        dataStoreRepository.readCurrentDestination\n                .subscribeOn(Schedulers.io())\n                .observeOn(AndroidSchedulers.mainThread())\n                .subscribe(new FlowableSubscriber&lt;Integer&gt;() {\n                    @Override\n                    public void onSubscribe(@NonNull Subscription s) {\n                        s.request(Long.MAX_VALUE);\n                    }\n\n                    @Override\n                    public void onNext(Integer integer) {\n\n                    }\n\n                    @Override\n                    public void onError(Throwable t) {\n                        Log.e(TAG, &quot;onError: &quot; + t.getMessage());\n                    }\n\n                    @Override\n                    public void onComplete() {\n\n                    }\n                });\n\n    }\n\n    public void saveCurrentDestination(int currentDestination) {\n        dataStoreRepository\n                .saveCurrentDestination(&quot;CURRENT_DESTINATION&quot;, currentDestination);\n    }\n\n</code></pre>\n<p><strong>and finally MainActivity</strong></p>\n<pre><code>@AndroidEntryPoint\npublic class MainActivity extends AppCompatActivity {\n\n    private static final String TAG = &quot;MainActivity&quot;;\n    @SuppressWarnings(&quot;unused&quot;)\n    private AppBarConfiguration mAppBarConfiguration;\n    private NavHostFragment navHostFragment;\n    private  NavController navController;\n    NavGraph navGraph;\n    private PostViewModel postViewModel;\n\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        ActivityMainBinding binding = ActivityMainBinding.inflate(getLayoutInflater());\n        setContentView(binding.getRoot());\n        postViewModel = new ViewModelProvider(this).get(PostViewModel.class);\n\n\n        setSupportActionBar(binding.appBarMain.toolbar);\n        mAppBarConfiguration = new AppBarConfiguration.Builder(R.id.nav_home, R.id.nav_accessory,\n                R.id.nav_arcade, R.id.nav_fashion,\n                R.id.nav_food, R.id.nav_heath,\n                R.id.nav_lifestyle, R.id.nav_sports, R.id.about)\n                .setOpenableLayout(binding.drawerLayout)\n                .build();\n\n\n        navHostFragment = (NavHostFragment)\n                getSupportFragmentManager().findFragmentById(R.id.nav_host_fragment);\n\n        if(navHostFragment !=null) {\n          navController = navHostFragment.getNavController();\n        }\n\n        NavigationUI.setupActionBarWithNavController(this, navController, mAppBarConfiguration);\n        NavigationUI.setupWithNavController(binding.navView, navController);\n\n        navGraph = navController.getNavInflater().inflate(R.navigation.mobile_navigation);\n\n        postViewModel.currentDestination.observe(this,currentDestination -&gt; {\n            Log.d(TAG, &quot;currentDestination: &quot; + currentDestination);\n            Toast.makeText(this,&quot;currentDestination&quot; + currentDestination,Toast.LENGTH_SHORT).show();\n            navGraph.setStartDestination(currentDestination);\n            navController.setGraph(navGraph);\n        });\n\n        navController.addOnDestinationChangedListener((controller, destination, arguments) -&gt; {\n            Log.d(TAG, &quot;addOnDestinationChangedListener: &quot; + destination.getId());\n            postViewModel.saveCurrentDestination(destination.getId());\n        });\n\n\n\n    }\n\n\n    @Override\n    public boolean onSupportNavigateUp() {\n        return NavigationUI.navigateUp(navController, mAppBarConfiguration)\n                || super.onSupportNavigateUp();\n    }\n\n}\n</code></pre>\n<p><strong>Problem in detail</strong></p>\n<p>In this app I have 9 menu items and fragments in navigation drawer, I want to save the last opened fragment in <code>savedInstanceState</code> or <code>datastore</code> and after the user closed the app and re open it again display the last opend fragment, but I don't know which method I'll use</p>\n<p><strong><code>Navigation.findNavController(activity,nav_graph).navigate();</code></strong></p>\n<p>or</p>\n<p><strong><code>binding.navView.setNavigationItemSelectedListener(item -&gt; false);</code></strong></p>\n<p><strong>activity_main.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.drawerlayout.widget.DrawerLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:id=&quot;@+id/drawer_layout&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:fitsSystemWindows=&quot;true&quot;\n    tools:openDrawer=&quot;start&quot;&gt;\n\n    &lt;include\n        android:id=&quot;@+id/app_bar_main&quot;\n        layout=&quot;@layout/app_bar_main&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot; /&gt;\n\n    &lt;com.google.android.material.navigation.NavigationView\n        android:id=&quot;@+id/nav_view&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;match_parent&quot;\n        android:layout_gravity=&quot;start&quot;\n        android:fitsSystemWindows=&quot;true&quot;\n        android:background=&quot;@color/color_navigation_list_background&quot;\n        app:headerLayout=&quot;@layout/nav_header_main&quot;\n        app:menu=&quot;@menu/activity_main_drawer&quot; /&gt;\n\n&lt;/androidx.drawerlayout.widget.DrawerLayout&gt;\n</code></pre>\n<p><strong>activity_main_drawer.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;menu xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    tools:showIn=&quot;navigation_view&quot;&gt;\n\n    &lt;group android:checkableBehavior=&quot;single&quot;&gt;\n        &lt;item\n            android:id=&quot;@+id/nav_home&quot;\n            android:title=&quot;@string/home&quot;\n            android:icon=&quot;@drawable/home&quot;\n            /&gt;\n\n        &lt;item\n            android:id=&quot;@+id/nav_accessory&quot;\n            android:title=&quot;@string/accessory&quot;\n            android:icon=&quot;@drawable/necklace&quot;\n            /&gt;\n        &lt;item\n            android:id=&quot;@+id/nav_arcade&quot;\n            android:title=&quot;@string/arcade&quot;\n            android:icon=&quot;@drawable/arcade_cabinet&quot;\n            /&gt;\n        &lt;item\n            android:id=&quot;@+id/nav_fashion&quot;\n            android:title=&quot;@string/fashion&quot;\n            android:icon=&quot;@drawable/fashion_trend&quot;\n            /&gt;\n        &lt;item\n            android:id=&quot;@+id/nav_food&quot;\n            android:title=&quot;@string/food&quot;\n            android:icon=&quot;@drawable/hamburger&quot;\n            /&gt;\n        &lt;item\n            android:id=&quot;@+id/nav_heath&quot;\n            android:title=&quot;@string/heath&quot;\n            android:icon=&quot;@drawable/clinic&quot;\n            /&gt;\n        &lt;item\n            android:id=&quot;@+id/nav_lifestyle&quot;\n            android:title=&quot;@string/lifestyle&quot;\n            android:icon=&quot;@drawable/yoga&quot;\n            /&gt;\n        &lt;item\n            android:id=&quot;@+id/nav_sports&quot;\n            android:title=&quot;@string/sports&quot;\n            android:icon=&quot;@drawable/soccer&quot;\n            /&gt;\n\n        &lt;item\n            android:id=&quot;@+id/nav_favorites&quot;\n            android:title=&quot;@string/favorites_posts&quot;\n            android:icon=&quot;@drawable/ic_favorite&quot;\n            /&gt;\n\n        &lt;item\n            android:id=&quot;@+id/about&quot;\n            android:title=&quot;@string/about&quot;\n            android:icon=&quot;@drawable/about&quot;\n            /&gt;\n\n    &lt;/group&gt;\n\n&lt;/menu&gt;\n</code></pre>\n<p><strong>nav_graph.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;navigation xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:id=&quot;@+id/mobile_navigation&quot;\n    app:startDestination=&quot;@id/nav_home&quot;&gt;\n\n    &lt;fragment\n        android:id=&quot;@+id/nav_home&quot;\n        android:name=&quot;com.blogspot.abtallaldigital.ui.HomeFragment&quot;\n        android:label=&quot;@string/home&quot;\n        tools:layout=&quot;@layout/fragment_home&quot;&gt;\n        &lt;action\n            android:id=&quot;@+id/action_nav_home_to_detailsFragment&quot;\n            app:destination=&quot;@id/detailsFragment&quot;\n            app:popUpTo=&quot;@id/nav_home&quot; /&gt;\n    &lt;/fragment&gt;\n\n    &lt;fragment\n        android:id=&quot;@+id/nav_accessory&quot;\n        android:name=&quot;com.blogspot.abtallaldigital.ui.AccessoryFragment&quot;\n        android:label=&quot;@string/accessory&quot;\n        tools:layout=&quot;@layout/fragment_accessory&quot; &gt;\n        &lt;action\n            android:id=&quot;@+id/action_nav_Accessory_to_detailsFragment&quot;\n            app:destination=&quot;@id/detailsFragment&quot; /&gt;\n    &lt;/fragment&gt;\n\n    &lt;fragment\n        android:id=&quot;@+id/nav_arcade&quot;\n        android:name=&quot;com.blogspot.abtallaldigital.ui.ArcadeFragment&quot;\n        android:label=&quot;@string/arcade&quot;\n        tools:layout=&quot;@layout/fragment_arcade&quot; &gt;\n        &lt;action\n            android:id=&quot;@+id/action_nav_Arcade_to_detailsFragment&quot;\n            app:destination=&quot;@id/detailsFragment&quot; /&gt;\n    &lt;/fragment&gt;\n\n    &lt;fragment\n        android:id=&quot;@+id/nav_fashion&quot;\n        android:name=&quot;com.blogspot.abtallaldigital.ui.FashionFragment&quot;\n        android:label=&quot;@string/fashion&quot;\n        tools:layout=&quot;@layout/fragment_fashion&quot; &gt;\n        &lt;action\n            android:id=&quot;@+id/action_nav_Fashion_to_detailsFragment&quot;\n            app:destination=&quot;@id/detailsFragment&quot; /&gt;\n    &lt;/fragment&gt;\n    &lt;fragment\n        android:id=&quot;@+id/nav_food&quot;\n        android:name=&quot;com.blogspot.abtallaldigital.ui.FoodFragment&quot;\n        android:label=&quot;@string/food&quot;\n        tools:layout=&quot;@layout/food_fragment&quot; &gt;\n        &lt;action\n            android:id=&quot;@+id/action_nav_Food_to_detailsFragment&quot;\n            app:destination=&quot;@id/detailsFragment&quot; /&gt;\n    &lt;/fragment&gt;\n    &lt;fragment\n        android:id=&quot;@+id/nav_heath&quot;\n        android:name=&quot;com.blogspot.abtallaldigital.ui.HeathFragment&quot;\n        android:label=&quot;@string/heath&quot;\n        tools:layout=&quot;@layout/heath_fragment&quot; &gt;\n        &lt;action\n            android:id=&quot;@+id/action_nav_Heath_to_detailsFragment&quot;\n            app:destination=&quot;@id/detailsFragment&quot; /&gt;\n    &lt;/fragment&gt;\n    &lt;fragment\n        android:id=&quot;@+id/nav_lifestyle&quot;\n        android:name=&quot;com.blogspot.abtallaldigital.ui.LifestyleFragment&quot;\n        android:label=&quot;@string/lifestyle&quot;\n        tools:layout=&quot;@layout/lifestyle_fragment&quot; &gt;\n        &lt;action\n            android:id=&quot;@+id/action_nav_Lifestyle_to_detailsFragment&quot;\n            app:destination=&quot;@id/detailsFragment&quot; /&gt;\n    &lt;/fragment&gt;\n    &lt;fragment\n        android:id=&quot;@+id/nav_sports&quot;\n        android:name=&quot;com.blogspot.abtallaldigital.ui.SportsFragment&quot;\n        android:label=&quot;@string/sports&quot;\n        tools:layout=&quot;@layout/sports_fragment&quot; &gt;\n        &lt;action\n            android:id=&quot;@+id/action_nav_Sports_to_detailsFragment&quot;\n            app:destination=&quot;@id/detailsFragment&quot; /&gt;\n    &lt;/fragment&gt;\n    &lt;dialog\n        android:id=&quot;@+id/about&quot;\n        android:name=&quot;com.blogspot.abtallaldigital.ui.AboutFragment&quot;\n        android:label=&quot;about&quot;\n        tools:layout=&quot;@layout/about&quot; /&gt;\n    &lt;fragment\n        android:id=&quot;@+id/detailsFragment&quot;\n        android:name=&quot;com.blogspot.abtallaldigital.ui.DetailsFragment&quot;\n        android:label=&quot;Post details&quot;\n        tools:layout=&quot;@layout/fragment_details&quot; &gt;\n        &lt;argument\n            android:name=&quot;postItem&quot;\n            app:argType=&quot;com.blogspot.abtallaldigital.pojo.Item&quot; /&gt;\n    &lt;/fragment&gt;\n    &lt;fragment\n        android:id=&quot;@+id/nav_favorites&quot;\n        android:name=&quot;com.blogspot.abtallaldigital.ui.FavoritesFragment&quot;\n        android:label=&quot;Favorites posts&quot;\n        tools:layout=&quot;@layout/fragment_favorites&quot; &gt;\n        &lt;action\n            android:id=&quot;@+id/action_favoritesFragment_to_detailsFragment&quot;\n            app:destination=&quot;@id/detailsFragment&quot; /&gt;\n    &lt;/fragment&gt;\n&lt;/navigation&gt;\n</code></pre>\n<p><strong>MainActivity class</strong></p>\n<pre><code>@AndroidEntryPoint\npublic class MainActivity extends AppCompatActivity {\n\n    @SuppressWarnings(&quot;unused&quot;)\n    private AppBarConfiguration mAppBarConfiguration;\n    public static Utils.DataStoreRepository DATA_STORE_REPOSITORY;\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        ActivityMainBinding binding = ActivityMainBinding.inflate(getLayoutInflater());\n        setContentView(binding.getRoot());\n\n\n        setSupportActionBar(binding.appBarMain.toolbar);\n        mAppBarConfiguration = new AppBarConfiguration.Builder(R.id.nav_home, R.id.nav_accessory,\n                R.id.nav_arcade, R.id.nav_fashion,\n                R.id.nav_food, R.id.nav_heath,\n                R.id.nav_lifestyle, R.id.nav_sports, R.id.about)\n                .setOpenableLayout(binding.drawerLayout)\n                .build();\n\n\n        NavHostFragment navHostFragment = (NavHostFragment)\n                getSupportFragmentManager().findFragmentById(R.id.nav_host_fragment);\n\n        assert navHostFragment != null;\n        NavController navController = navHostFragment.getNavController();\n\n        NavigationUI.setupActionBarWithNavController(this, navController, mAppBarConfiguration);\n        NavigationUI.setupWithNavController(binding.navView, navController);\n\n\n    }\n\n\n    @Override\n    public boolean onSupportNavigateUp() {\n        NavController navController = Navigation.findNavController(this, R.id.nav_host_fragment);\n        return NavigationUI.navigateUp(navController, mAppBarConfiguration)\n                || super.onSupportNavigateUp();\n    }\n\n}\n</code></pre>\n"},{"tags":["java","android","xml","rss","retrofit"],"answers":[{"tags":[],"owner":{"account_id":5516187,"reputation":109,"user_id":4380880,"display_name":"Hani"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1454518157,"creation_date":1454518157,"answer_id":35182946,"question_id":35178057,"body_markdown":"I have find the solution inspired from those post in stackoverflow.com:\r\n[First link][1] and [Second link][2]\r\n\r\nhave already create new api and entities :\r\n\r\nThe api interface :\r\n\r\n    public interface RssAdapter{\r\n    @GET(&quot;/storage/rss/rss/karlsruhe.xml&quot;)\r\n    void getItems(Callback&lt;Feed&gt; callback);\r\n    }\r\n\r\nFeed class :\r\n\r\n    @Root(name = &quot;rss&quot;, strict = false)\r\n    public class Feed implements Serializable {\r\n    @Element(name = &quot;channel&quot;)\r\n    private Channel mChannel;\r\n\r\n    public Channel getmChannel() {\r\n        return mChannel;\r\n    }\r\n\r\n    public Feed() {\r\n    }\r\n\r\n    public Feed(Channel mChannel) {\r\n        this.mChannel = mChannel;\r\n    }\r\n    }\r\n\r\nand channel class:\r\n\r\n    @Root(name = &quot;channel&quot;, strict = false)\r\n    public class Channel implements Serializable {\r\n    @ElementList(inline = true, name=&quot;item&quot;)\r\n    private List&lt;FeedItem&gt; mFeedItems;\r\n\r\n    public List&lt;FeedItem&gt; getFeedItems() {\r\n        return mFeedItems;\r\n    }\r\n\r\n    public Channel() {\r\n    }\r\n\r\n    public Channel(List&lt;FeedItem&gt; mFeedItems) {\r\n        this.mFeedItems = mFeedItems;\r\n    }\r\n    }\r\n\r\nand the last one it&#39;s item:\r\n\r\n    \r\n    @Root(name = &quot;item&quot;, strict = false)\r\n    public class FeedItem implements Serializable {\r\n    @Element(name = &quot;pubDate&quot;)\r\n    private String mpubDate;\r\n    @Element(name = &quot;title&quot;)\r\n    private String mtitle;\r\n    @Element(name = &quot;link&quot;)\r\n    private String mlink;\r\n    @Element(name = &quot;description&quot;)\r\n    private String mdescription;\r\n\r\n    public FeedItem() {\r\n            }\r\n\r\n    public FeedItem(String mdescription, String mlink, String mtitle, String mpubDate) {\r\n        this.mdescription = mdescription;\r\n        this.mlink = mlink;\r\n        this.mtitle = mtitle;\r\n        this.mpubDate = mpubDate;\r\n    }\r\n\r\n    public String getMpubDate() {\r\n        return mpubDate;\r\n    }\r\n\r\n    public void setMpubDate(String mpubDate) {\r\n        this.mpubDate = mpubDate;\r\n    }\r\n\r\n    public String getMtitle() {\r\n        return mtitle;\r\n    }\r\n\r\n    public void setMtitle(String mtitle) {\r\n        this.mtitle = mtitle;\r\n    }\r\n\r\n    public String getMlink() {\r\n        return mlink;\r\n    }\r\n\r\n    public void setMlink(String mlink) {\r\n        this.mlink = mlink;\r\n    }\r\n\r\n    public String getMdescription() {\r\n        return mdescription;\r\n    }\r\n\r\n    public void setMdescription(String mdescription) {\r\n        this.mdescription = mdescription;\r\n    }\r\n    }\r\n\r\nof course in my main activity i will put that :\r\n\r\n    RestAdapter restAdapter = new RestAdapter.Builder()\r\n\t\t\t\t.setEndpoint(&quot;http://www.ka-news.de&quot;)\r\n\t\t\t\t.setConverter(new SimpleXmlConverter())\r\n\t\t\t\t.build();\r\n\r\n\t\tRssAdapter rssAdapter = restAdapter.create(RssAdapter.class);\r\n\t\trssAdapter.getItems(new Callback&lt;Feed&gt;() {\r\n\t\t\t@Override\r\n\t\t\tpublic void success(Feed newsitems, Response response) {\r\n\t\t\t\tToast.makeText(getContext(), &quot;oki&quot;, Toast.LENGTH_LONG).show();\r\n\r\n\r\n\t\t\t\tList&lt;FeedItem&gt; mItems = new ArrayList&lt;&gt;();\r\n\r\n\t\t\t\tmItems = newsitems.getmChannel().getFeedItems();\r\n\t\t\t\t// Crear un nuevo adaptador\r\n\t\t\t\tadapter = new AnimeAdapter(mItems);\r\n\t\t\t\trecycler.setAdapter(adapter);\r\n\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void failure(RetrofitError error) {\r\n\t\t\t\tSystem.out.println(error);\r\n\r\n\t\t\t\tToast.makeText(getContext(), &quot;Error&quot; + error.getMessage(),           Toast.LENGTH_LONG).show();\r\n\r\n\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\nand the items getting from the parsing using the retrofit api i will set on the adapter constructor to show that in the listview or RecyclerView.\r\n\r\nGood Luck\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/33528543/cant-read-rss-xml-with-simple-xml-and-retrofit\r\n  [2]: https://stackoverflow.com/questions/31202666/valuerequiredexception-during-rss-feed-parsing-in-retrofit","title":"How to parse RSS xml feed using Retrofit lib","body":"<p>I have find the solution inspired from those post in stackoverflow.com:\n<a href=\"https://stackoverflow.com/questions/33528543/cant-read-rss-xml-with-simple-xml-and-retrofit\">First link</a> and <a href=\"https://stackoverflow.com/questions/31202666/valuerequiredexception-during-rss-feed-parsing-in-retrofit\">Second link</a></p>\n\n<p>have already create new api and entities :</p>\n\n<p>The api interface :</p>\n\n<pre><code>public interface RssAdapter{\n@GET(\"/storage/rss/rss/karlsruhe.xml\")\nvoid getItems(Callback&lt;Feed&gt; callback);\n}\n</code></pre>\n\n<p>Feed class :</p>\n\n<pre><code>@Root(name = \"rss\", strict = false)\npublic class Feed implements Serializable {\n@Element(name = \"channel\")\nprivate Channel mChannel;\n\npublic Channel getmChannel() {\n    return mChannel;\n}\n\npublic Feed() {\n}\n\npublic Feed(Channel mChannel) {\n    this.mChannel = mChannel;\n}\n}\n</code></pre>\n\n<p>and channel class:</p>\n\n<pre><code>@Root(name = \"channel\", strict = false)\npublic class Channel implements Serializable {\n@ElementList(inline = true, name=\"item\")\nprivate List&lt;FeedItem&gt; mFeedItems;\n\npublic List&lt;FeedItem&gt; getFeedItems() {\n    return mFeedItems;\n}\n\npublic Channel() {\n}\n\npublic Channel(List&lt;FeedItem&gt; mFeedItems) {\n    this.mFeedItems = mFeedItems;\n}\n}\n</code></pre>\n\n<p>and the last one it's item:</p>\n\n<pre><code>@Root(name = \"item\", strict = false)\npublic class FeedItem implements Serializable {\n@Element(name = \"pubDate\")\nprivate String mpubDate;\n@Element(name = \"title\")\nprivate String mtitle;\n@Element(name = \"link\")\nprivate String mlink;\n@Element(name = \"description\")\nprivate String mdescription;\n\npublic FeedItem() {\n        }\n\npublic FeedItem(String mdescription, String mlink, String mtitle, String mpubDate) {\n    this.mdescription = mdescription;\n    this.mlink = mlink;\n    this.mtitle = mtitle;\n    this.mpubDate = mpubDate;\n}\n\npublic String getMpubDate() {\n    return mpubDate;\n}\n\npublic void setMpubDate(String mpubDate) {\n    this.mpubDate = mpubDate;\n}\n\npublic String getMtitle() {\n    return mtitle;\n}\n\npublic void setMtitle(String mtitle) {\n    this.mtitle = mtitle;\n}\n\npublic String getMlink() {\n    return mlink;\n}\n\npublic void setMlink(String mlink) {\n    this.mlink = mlink;\n}\n\npublic String getMdescription() {\n    return mdescription;\n}\n\npublic void setMdescription(String mdescription) {\n    this.mdescription = mdescription;\n}\n}\n</code></pre>\n\n<p>of course in my main activity i will put that :</p>\n\n<pre><code>RestAdapter restAdapter = new RestAdapter.Builder()\n            .setEndpoint(\"http://www.ka-news.de\")\n            .setConverter(new SimpleXmlConverter())\n            .build();\n\n    RssAdapter rssAdapter = restAdapter.create(RssAdapter.class);\n    rssAdapter.getItems(new Callback&lt;Feed&gt;() {\n        @Override\n        public void success(Feed newsitems, Response response) {\n            Toast.makeText(getContext(), \"oki\", Toast.LENGTH_LONG).show();\n\n\n            List&lt;FeedItem&gt; mItems = new ArrayList&lt;&gt;();\n\n            mItems = newsitems.getmChannel().getFeedItems();\n            // Crear un nuevo adaptador\n            adapter = new AnimeAdapter(mItems);\n            recycler.setAdapter(adapter);\n\n        }\n\n        @Override\n        public void failure(RetrofitError error) {\n            System.out.println(error);\n\n            Toast.makeText(getContext(), \"Error\" + error.getMessage(),           Toast.LENGTH_LONG).show();\n\n\n        }\n    });\n</code></pre>\n\n<p>and the items getting from the parsing using the retrofit api i will set on the adapter constructor to show that in the listview or RecyclerView.</p>\n\n<p>Good Luck</p>\n"}],"owner":{"account_id":5516187,"reputation":109,"user_id":4380880,"display_name":"Hani"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5721,"favorite_count":0,"down_vote_count":3,"up_vote_count":5,"accepted_answer_id":35182946,"answer_count":1,"score":2,"last_activity_date":1634725836,"creation_date":1454505167,"question_id":35178057,"body_markdown":"I am trying to parse an XML feed with Retrofit API but I was blocked, I don&#39;t know how to access those attributes I think the problem is the Root RSS!\r\n\r\nThis is the feed : [http://www.ka-news.de/storage/rss/rss/karlsruhe.xml][1]\r\n\r\nThe main activity is where I will pass the data (list of items) to the adapter.\r\n\r\n    @Override\r\n\tpublic View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n\t\t\tBundle savedInstanceState) {\r\n\t\t// TODO Auto-generated method stub\t\t\r\n\t\tView rootView = inflater.inflate(R.layout.fragment_main, container, false);\r\n\r\n\t\tRestAdapter restAdapter = new RestAdapter.Builder()\r\n\t\t\t\t.setEndpoint(&quot;http://www.ka-news.de&quot;)\r\n\t\t\t\t.setConverter(new SimpleXmlConverter())\r\n\t\t\t\t.setLogLevel(RestAdapter.LogLevel.FULL)\r\n\t\t\t\t.build();\r\n\r\n\t\tapi apiService = restAdapter.create(api.class);\r\n\t\tRss rss = apiService.getRss();\r\n        List&lt;Item&gt; items = rss.getChannel().getItemList();\r\n\t\t// Obtener el Recycler\r\n\t\trecycler = (RecyclerView) rootView.findViewById(R.id.reciclador);\r\n\t\trecycler.setHasFixedSize(true);\r\n\r\n\t\t// Usar un administrador para LinearLayout\r\n\t\tlManager = new LinearLayoutManager(getContext());\r\n\t\trecycler.setLayoutManager(lManager);\r\n\r\n\t\t// Crear un nuevo adaptador\r\n\t\tadapter = new AnimeAdapter(items);\r\n\t\trecycler.setAdapter(adapter);\r\n\r\n\r\n\t\trootView.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.MATCH_PARENT ));\t\t\r\n\t\treturn rootView;\t\t\r\n\t}\r\n\r\napi interface :\r\n\r\n    public interface api {\r\n    @GET(&quot;/storage/rss/rss/karlsruhe.xml&quot;)\r\n    public Rss getRss();\r\n    }\r\n\r\nI have created three entities :\r\n\r\nChannel :\r\n\r\n    @Root(strict = false)\r\n    public class Channel {\r\n        @ElementList(name = &quot;item&quot;, required = true, inline = true)\r\n        public List&lt;Item&gt; itemList;\r\n\r\n    public List&lt;Item&gt; getItemList() {\r\n        return itemList;\r\n    }\r\n\r\n    public void setItemList(List&lt;Item&gt; itemList) {\r\n        this.itemList = itemList;\r\n    }\r\n}\r\n\r\n\r\nItem:\r\n\r\n    @Root(name = &quot;item&quot;, strict = false)\r\n    public  class Item {\r\n    @Element(name = &quot;title&quot;, required = true)\r\n    String title;\r\n    @Element(name = &quot;link&quot;, required = true)\r\n    String link;\r\n    @Element(name = &quot;description&quot;, required = true)\r\n    String description;\r\n    @Element(name = &quot;pubDate&quot;, required = false)\r\n    String pubDate;\r\n\r\n\r\n    public String getTitle() {\r\n        return title;\r\n    }\r\n\r\n    public void setTitle(String title) {\r\n        this.title = title;\r\n    }\r\n\r\n    public String getLink() {\r\n        return link;\r\n    }\r\n\r\n    public void setLink(String link) {\r\n        this.link = link;\r\n    }\r\n\r\n    public String getDescription() {\r\n        return description;\r\n    }\r\n\r\n    public void setDescription(String description) {\r\n        this.description = description;\r\n    }\r\n\r\n    public String getPubDate() {\r\n        return pubDate;\r\n    }\r\n\r\n    public void setPubDate(String pubDate) {\r\n        this.pubDate = pubDate;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;Item{&quot; +\r\n                &quot;title=&#39;&quot; + title + &#39;\\&#39;&#39; +\r\n                &quot;, link=&#39;&quot; + link + &#39;\\&#39;&#39; +\r\n                &quot;, description=&#39;&quot; + description + &#39;\\&#39;&#39; +\r\n                &quot;, pubDate=&#39;&quot; + pubDate + &#39;\\&#39;&#39; +\r\n                &#39;}&#39;;\r\n    }\r\n}\r\n\r\nRss:\r\n\r\n    @Root\r\n    public class Rss {\r\n\r\n    @Attribute\r\n    String version;\r\n\r\n    @Element\r\n    Channel channel;\r\n\r\n\r\n    public Channel getChannel() {\r\n        return channel;\r\n    }\r\n\r\n    public String getVersion() {\r\n        return version;\r\n    }\r\n\r\n    public void setVersion(String version) {\r\n        this.version = version;\r\n    }\r\n\r\n    public void setChannel(Channel channel) {\r\n        this.channel = channel;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;RSS{&quot; +\r\n                &quot;version=&#39;&quot; + version + &#39;\\&#39;&#39; +\r\n                &quot;, channel=&quot; + channel +\r\n                &#39;}&#39;;\r\n    }\r\n}\r\n\r\n    \r\n\r\n\r\nthe problem showing in log is :\r\n\r\n    FATAL EXCEPTION: main\r\n    retrofit.RetrofitError\r\n    at retrofit.RestAdapter$RestHandler.invokeRequest(RestAdapter.java:394)\r\n    at retrofit.RestAdapter$RestHandler.invoke(RestAdapter.java:240)\r\n    at $Proxy1.getRss(Native Method)\r\n    at br.liveo.ndrawer.ui.fragment.MainFragment.onCreateView(MainFragment.java:109)\r\n\r\nthis line : \r\n\r\n    Rss rss = apiService.getRss();\r\n\r\n\r\n  [1]: http://www.ka-news.de/storage/rss/rss/karlsruhe.xml","title":"How to parse RSS xml feed using Retrofit lib","body":"<p>I am trying to parse an XML feed with Retrofit API but I was blocked, I don't know how to access those attributes I think the problem is the Root RSS!</p>\n<p>This is the feed : <a href=\"http://www.ka-news.de/storage/rss/rss/karlsruhe.xml\" rel=\"nofollow noreferrer\">http://www.ka-news.de/storage/rss/rss/karlsruhe.xml</a></p>\n<p>The main activity is where I will pass the data (list of items) to the adapter.</p>\n<pre><code>@Override\npublic View onCreateView(LayoutInflater inflater, ViewGroup container,\n        Bundle savedInstanceState) {\n    // TODO Auto-generated method stub      \n    View rootView = inflater.inflate(R.layout.fragment_main, container, false);\n\n    RestAdapter restAdapter = new RestAdapter.Builder()\n            .setEndpoint(&quot;http://www.ka-news.de&quot;)\n            .setConverter(new SimpleXmlConverter())\n            .setLogLevel(RestAdapter.LogLevel.FULL)\n            .build();\n\n    api apiService = restAdapter.create(api.class);\n    Rss rss = apiService.getRss();\n    List&lt;Item&gt; items = rss.getChannel().getItemList();\n    // Obtener el Recycler\n    recycler = (RecyclerView) rootView.findViewById(R.id.reciclador);\n    recycler.setHasFixedSize(true);\n\n    // Usar un administrador para LinearLayout\n    lManager = new LinearLayoutManager(getContext());\n    recycler.setLayoutManager(lManager);\n\n    // Crear un nuevo adaptador\n    adapter = new AnimeAdapter(items);\n    recycler.setAdapter(adapter);\n\n\n    rootView.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.MATCH_PARENT ));       \n    return rootView;        \n}\n</code></pre>\n<p>api interface :</p>\n<pre><code>public interface api {\n@GET(&quot;/storage/rss/rss/karlsruhe.xml&quot;)\npublic Rss getRss();\n}\n</code></pre>\n<p>I have created three entities :</p>\n<p>Channel :</p>\n<pre><code>@Root(strict = false)\npublic class Channel {\n    @ElementList(name = &quot;item&quot;, required = true, inline = true)\n    public List&lt;Item&gt; itemList;\n\npublic List&lt;Item&gt; getItemList() {\n    return itemList;\n}\n\npublic void setItemList(List&lt;Item&gt; itemList) {\n    this.itemList = itemList;\n}\n</code></pre>\n<p>}</p>\n<p>Item:</p>\n<pre><code>@Root(name = &quot;item&quot;, strict = false)\npublic  class Item {\n@Element(name = &quot;title&quot;, required = true)\nString title;\n@Element(name = &quot;link&quot;, required = true)\nString link;\n@Element(name = &quot;description&quot;, required = true)\nString description;\n@Element(name = &quot;pubDate&quot;, required = false)\nString pubDate;\n\n\npublic String getTitle() {\n    return title;\n}\n\npublic void setTitle(String title) {\n    this.title = title;\n}\n\npublic String getLink() {\n    return link;\n}\n\npublic void setLink(String link) {\n    this.link = link;\n}\n\npublic String getDescription() {\n    return description;\n}\n\npublic void setDescription(String description) {\n    this.description = description;\n}\n\npublic String getPubDate() {\n    return pubDate;\n}\n\npublic void setPubDate(String pubDate) {\n    this.pubDate = pubDate;\n}\n\n@Override\npublic String toString() {\n    return &quot;Item{&quot; +\n            &quot;title='&quot; + title + '\\'' +\n            &quot;, link='&quot; + link + '\\'' +\n            &quot;, description='&quot; + description + '\\'' +\n            &quot;, pubDate='&quot; + pubDate + '\\'' +\n            '}';\n}\n</code></pre>\n<p>}</p>\n<p>Rss:</p>\n<pre><code>@Root\npublic class Rss {\n\n@Attribute\nString version;\n\n@Element\nChannel channel;\n\n\npublic Channel getChannel() {\n    return channel;\n}\n\npublic String getVersion() {\n    return version;\n}\n\npublic void setVersion(String version) {\n    this.version = version;\n}\n\npublic void setChannel(Channel channel) {\n    this.channel = channel;\n}\n\n@Override\npublic String toString() {\n    return &quot;RSS{&quot; +\n            &quot;version='&quot; + version + '\\'' +\n            &quot;, channel=&quot; + channel +\n            '}';\n}\n</code></pre>\n<p>}</p>\n<p>the problem showing in log is :</p>\n<pre><code>FATAL EXCEPTION: main\nretrofit.RetrofitError\nat retrofit.RestAdapter$RestHandler.invokeRequest(RestAdapter.java:394)\nat retrofit.RestAdapter$RestHandler.invoke(RestAdapter.java:240)\nat $Proxy1.getRss(Native Method)\nat br.liveo.ndrawer.ui.fragment.MainFragment.onCreateView(MainFragment.java:109)\n</code></pre>\n<p>this line :</p>\n<pre><code>Rss rss = apiService.getRss();\n</code></pre>\n"},{"tags":["java","google-cloud-storage","firebase-storage"],"answers":[{"tags":[],"owner":{"account_id":2914299,"reputation":9061,"user_id":2497859,"display_name":"Omatt"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1634725822,"creation_date":1634725822,"answer_id":69644353,"question_id":69642385,"body_markdown":"Turns out that I need to use [Google Cloud Storage API][1]. The [docs][2] for Firebase Cloud Storage for Admin SDK is barren. I hope that the docs were clearer.\r\n\r\nHere&#39;s the snippet on how I modified the contentType for my file upload. This changed the contentType from `application/octet-stream` to `text/csv`\r\n\r\n```java\r\nDate date = new Date();\r\nSimpleDateFormat dateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd_HH:mm:ss&quot;);\r\nString timestamp = dateFormat.format(date);\r\nStorageClient storageClient = StorageClient.getInstance();\r\n\r\ntry {\r\n  String bucketName = &quot;&lt;YOUR_BUCKET_NAME&gt;&quot;;\r\n  String objectName = backupFolderPath + fileNamePrefix + &quot;_&quot; + timestamp + &quot;.csv&quot;;\r\n  BlobId blobId = BlobId.of(bucketName, objectName);\r\n  \r\n  // Configure BlobInfo\r\n  BlobInfo blob = BlobInfo.newBuilder(blobId)\r\n      .setContentType(&quot;text/csv&quot;)\r\n      .setContentEncoding(&quot;utf-8&quot;).build();\r\n\r\n  // Use fetch `storage` from the bucket\r\n  // https://cloud.google.com/storage/docs/uploading-objects#storage-upload-object-code-sample\r\n  storageClient.bucket().getStorage().create(blob, \r\n      Files.readAllBytes(Paths.get(&quot;backup/accounts.csv&quot;)));\r\n} catch (IOException e) {\r\n  logger.error(&quot;&gt;&gt;&gt;&gt;&gt; Message from Scheduled Job &quot; + e);\r\n}\r\n```\r\n\r\nI&#39;m still unable to download the uploaded file on [Firebase Storage dashboard][3], but the uploaded file can be downloaded through [Google Cloud Storage dashboard][4].\r\n\r\n\r\n  [1]: https://cloud.google.com/storage/docs/uploading-objects#storage-upload-object-code-sample\r\n  [2]: https://firebase.google.com/docs/storage/admin/start\r\n  [3]: https://console.firebase.google.com/u/0/project/_/storage/\r\n  [4]: https://console.cloud.google.com/storage/browser","title":"Firebase Cloud Storage Java Admin SDK upload file with contentType","body":"<p>Turns out that I need to use <a href=\"https://cloud.google.com/storage/docs/uploading-objects#storage-upload-object-code-sample\" rel=\"nofollow noreferrer\">Google Cloud Storage API</a>. The <a href=\"https://firebase.google.com/docs/storage/admin/start\" rel=\"nofollow noreferrer\">docs</a> for Firebase Cloud Storage for Admin SDK is barren. I hope that the docs were clearer.</p>\n<p>Here's the snippet on how I modified the contentType for my file upload. This changed the contentType from <code>application/octet-stream</code> to <code>text/csv</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>Date date = new Date();\nSimpleDateFormat dateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd_HH:mm:ss&quot;);\nString timestamp = dateFormat.format(date);\nStorageClient storageClient = StorageClient.getInstance();\n\ntry {\n  String bucketName = &quot;&lt;YOUR_BUCKET_NAME&gt;&quot;;\n  String objectName = backupFolderPath + fileNamePrefix + &quot;_&quot; + timestamp + &quot;.csv&quot;;\n  BlobId blobId = BlobId.of(bucketName, objectName);\n  \n  // Configure BlobInfo\n  BlobInfo blob = BlobInfo.newBuilder(blobId)\n      .setContentType(&quot;text/csv&quot;)\n      .setContentEncoding(&quot;utf-8&quot;).build();\n\n  // Use fetch `storage` from the bucket\n  // https://cloud.google.com/storage/docs/uploading-objects#storage-upload-object-code-sample\n  storageClient.bucket().getStorage().create(blob, \n      Files.readAllBytes(Paths.get(&quot;backup/accounts.csv&quot;)));\n} catch (IOException e) {\n  logger.error(&quot;&gt;&gt;&gt;&gt;&gt; Message from Scheduled Job &quot; + e);\n}\n</code></pre>\n<p>I'm still unable to download the uploaded file on <a href=\"https://console.firebase.google.com/u/0/project/_/storage/\" rel=\"nofollow noreferrer\">Firebase Storage dashboard</a>, but the uploaded file can be downloaded through <a href=\"https://console.cloud.google.com/storage/browser\" rel=\"nofollow noreferrer\">Google Cloud Storage dashboard</a>.</p>\n"}],"owner":{"account_id":2914299,"reputation":9061,"user_id":2497859,"display_name":"Omatt"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":686,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69644353,"answer_count":1,"score":0,"last_activity_date":1634725822,"creation_date":1634717035,"question_id":69642385,"body_markdown":"I&#39;m able to upload files on Google Cloud Storage using Firebase Admin SDK. However, I&#39;m unable to set the correct contentType for the file and the uploaded file defaults to `application/octet-stream`. I&#39;m unable to any documentations for setting the correct contentType/metadata using Java Admin SDK. How I can change the default contentType?\r\n\r\nHere&#39;s the code snippet on how I upload the file.\r\n\r\n```java\r\nDate date = new Date();\r\nSimpleDateFormat dateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd_HH:mm:ss&quot;);\r\nString timestamp = dateFormat.format(date);\r\nStorageClient storageClient = StorageClient.getInstance();\r\nBucket storageBucket = storageClient.bucket();\r\n\r\n// Not sure if I&#39;m doing this correctly\r\nBlobInfo blobInfo = BlobInfo.newBuilder(storageBucket.getName(), &quot;filename&quot;)\r\n        .setContentType(&quot;vnd.ms-excel&quot;).build();\r\n\r\n// File upload task\r\nstorageClient.bucket().create(backupFolderPath + fileNamePrefix + &quot;_&quot; + timestamp + &quot;.csv&quot;, file);\r\n```","title":"Firebase Cloud Storage Java Admin SDK upload file with contentType","body":"<p>I'm able to upload files on Google Cloud Storage using Firebase Admin SDK. However, I'm unable to set the correct contentType for the file and the uploaded file defaults to <code>application/octet-stream</code>. I'm unable to any documentations for setting the correct contentType/metadata using Java Admin SDK. How I can change the default contentType?</p>\n<p>Here's the code snippet on how I upload the file.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Date date = new Date();\nSimpleDateFormat dateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd_HH:mm:ss&quot;);\nString timestamp = dateFormat.format(date);\nStorageClient storageClient = StorageClient.getInstance();\nBucket storageBucket = storageClient.bucket();\n\n// Not sure if I'm doing this correctly\nBlobInfo blobInfo = BlobInfo.newBuilder(storageBucket.getName(), &quot;filename&quot;)\n        .setContentType(&quot;vnd.ms-excel&quot;).build();\n\n// File upload task\nstorageClient.bucket().create(backupFolderPath + fileNamePrefix + &quot;_&quot; + timestamp + &quot;.csv&quot;, file);\n</code></pre>\n"},{"tags":["java","precision","bigdecimal"],"comments":[{"owner":{"account_id":1136217,"reputation":14336,"user_id":1121249,"accept_rate":86,"display_name":"rkosegi"},"score":0,"creation_date":1634723492,"post_id":69643721,"comment_id":123099670,"body_markdown":"just rearrange equation as you are loosing precision with rounding `c.divide(b).multiply(a) ==&gt; 300.0`","body":"just rearrange equation as you are loosing precision with rounding <code>c.divide(b).multiply(a) ==&gt; 300.0</code>"},{"owner":{"account_id":85671,"reputation":40858,"user_id":238704,"display_name":"President James K. Polk"},"score":0,"creation_date":1634728659,"post_id":69643721,"comment_id":123101721,"body_markdown":"Or you can find and use one of the BigRational classes on github.","body":"Or you can find and use one of the BigRational classes on github."}],"answers":[{"tags":[],"owner":{"account_id":8005552,"reputation":628,"user_id":6426446,"accept_rate":78,"display_name":"bramhaag"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1634725665,"creation_date":1634725304,"answer_id":69644223,"question_id":69643721,"body_markdown":"You can use the [MathContext][1] parameter in the `divide` method for this.\r\n\r\nFor example, `a.divide(b, MathContext.DECIMAL128).multiply(c);` will give you the precision you need (with an error of magnitude `1e-32`). If you do not want to lose any precision, you can use `MathContext.UNLIMITED`, but this will result in a non-terminating decimal expansion.\r\n\r\nIn your case specifically, you can also try to rewrite the equation to prevent any rounding from happening: `a / b * c = c / b * a`.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/math/MathContext.html","title":"How to properly calculate rational by using BigDecimal","body":"<p>You can use the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/math/MathContext.html\" rel=\"nofollow noreferrer\">MathContext</a> parameter in the <code>divide</code> method for this.</p>\n<p>For example, <code>a.divide(b, MathContext.DECIMAL128).multiply(c);</code> will give you the precision you need (with an error of magnitude <code>1e-32</code>). If you do not want to lose any precision, you can use <code>MathContext.UNLIMITED</code>, but this will result in a non-terminating decimal expansion.</p>\n<p>In your case specifically, you can also try to rewrite the equation to prevent any rounding from happening: <code>a / b * c = c / b * a</code>.</p>\n"}],"owner":{"account_id":13478640,"reputation":33,"user_id":9724673,"display_name":"mimichaelckc"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":124,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":69644223,"answer_count":1,"score":2,"last_activity_date":1634725665,"creation_date":1634722979,"question_id":69643721,"body_markdown":"How can I get the correct answer when I need to use BigDecimal without losing precision.\r\n```\r\nBigDecimal a = new BigDecimal(0.5);\r\nBigDecimal b = new BigDecimal(30);\r\nBigDecimal c = new BigDecimal(18000);\r\n\r\na.divide(b).multiply(c);\r\n```\r\nHow could I get the exact 300 in this case?\r\n\r\nThanks!\r\n","title":"How to properly calculate rational by using BigDecimal","body":"<p>How can I get the correct answer when I need to use BigDecimal without losing precision.</p>\n<pre><code>BigDecimal a = new BigDecimal(0.5);\nBigDecimal b = new BigDecimal(30);\nBigDecimal c = new BigDecimal(18000);\n\na.divide(b).multiply(c);\n</code></pre>\n<p>How could I get the exact 300 in this case?</p>\n<p>Thanks!</p>\n"},{"tags":["java","or-tools"],"answers":[{"tags":[],"owner":{"account_id":7517199,"reputation":8382,"user_id":5710233,"display_name":"Mizux"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634652325,"creation_date":1634652325,"answer_id":69632343,"question_id":69614300,"body_markdown":"note AddDisjunction take index not node so basically your code :\r\n```java\r\n    //No penalty in case multi-trip visit is skipped when not required\r\n    for(int i = 1; i &lt;= data.multiTrips - 1; i++) {\r\n        int fromNode = manager.indexToNode(i);\r\n        routing.addDisjunction(new long[] { fromNode }, 0);\r\n    }\r\n```\r\nis wrong you need the opposite\r\n```java\r\n    //No penalty in case multi-trip visit is skipped when not required\r\n    for(int i = 1; i &lt;= data.multiTrips - 1; i++) {\r\n        int fromIndex = manager.nodeToIndex(i);\r\n        routing.addDisjunction(new long[] { fromIndex }, 0);\r\n    }\r\n```","title":"OR tools CVRP reload using single vehicle","body":"<p>note AddDisjunction take index not node so basically your code :</p>\n<pre class=\"lang-java prettyprint-override\"><code>    //No penalty in case multi-trip visit is skipped when not required\n    for(int i = 1; i &lt;= data.multiTrips - 1; i++) {\n        int fromNode = manager.indexToNode(i);\n        routing.addDisjunction(new long[] { fromNode }, 0);\n    }\n</code></pre>\n<p>is wrong you need the opposite</p>\n<pre class=\"lang-java prettyprint-override\"><code>    //No penalty in case multi-trip visit is skipped when not required\n    for(int i = 1; i &lt;= data.multiTrips - 1; i++) {\n        int fromIndex = manager.nodeToIndex(i);\n        routing.addDisjunction(new long[] { fromIndex }, 0);\n    }\n</code></pre>\n"}],"owner":{"account_id":376881,"reputation":2025,"user_id":728630,"accept_rate":53,"display_name":"user728630"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":210,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1634725642,"creation_date":1634551869,"question_id":69614300,"body_markdown":"Following the python examples [here][1]\r\n\r\nI am trying to build the same feature in java which is - load the stuff and deliver to customers and if the next demand is more than the left over capacity then go to depot and reload. All this is happening without any time constraints, however there is only 1 vehicle in my case. The problem is that the solution is null for many cases.\r\n\r\nFor example: demand: `[0, -30, -30, -30, 17, 17, 18, 18, 18, 18]` with a vehicle capacity of 30 results into null. However, the same demand with different vehicle capacity works fine like `-18`, `36`, `48`, `96`.\r\n\r\nThe first demand is 0 coz that&#39;s the start location. \r\n\r\nHere is the code that I am using:\r\n\r\n```java\r\nfinal OrDataModel data = buildDataModel();\r\n\r\nRoutingIndexManager manager = new RoutingIndexManager(data.distanceMatrix.length, data.vehicleNumber, data.depot);\r\n\r\nRoutingModel routing = new RoutingModel(manager);\r\n\r\nfinal int transitCallbackIndex =\r\nrouting.registerTransitCallback((long fromIndex, long toIndex) -&gt; {\r\n  int fromNode = manager.indexToNode(fromIndex);\r\n  int toNode = manager.indexToNode(toIndex);\r\n  return data.distanceMatrix[fromNode][toNode];\r\n});\r\n\r\nrouting.setArcCostEvaluatorOfAllVehicles(transitCallbackIndex);\r\nrouting.addDimension(transitCallbackIndex, 0, 1000000, true, &quot;Distance&quot;);\r\nRoutingDimension distanceDimension = routing.getDimensionOrDie(&quot;Distance&quot;);\r\ndistanceDimension.setGlobalSpanCostCoefficient(100);\r\n\r\nfinal int demandCallbackIndex = routing.registerUnaryTransitCallback(\r\n  (long fromIndex) -&gt; {\r\n  // Convert from routing variable Index to user NodeIndex.\r\n  int fromNode = manager.indexToNode(fromIndex);\r\n  return data.demands[fromNode];\r\n});\r\n\r\nrouting.addDimension(demandCallbackIndex, data.vehicleCapacity, data.vehicleCapacity, true, &quot;Capacity&quot;);\r\nRoutingDimension capacityDimension = routing.getDimensionOrDie(&quot;Capacity&quot;);\r\n\r\n//No penalty in case multi-trip visit is skipped when not required\r\nfor(int i = 1; i &lt;= data.multiTrips - 1; i++) {\r\n  int fromNode = manager.indexToNode(i);\r\n  routing.addDisjunction(new long[] { fromNode }, 0);\r\n}\r\n\r\n// Setting first solution heuristic.\r\nRoutingSearchParameters searchParameters =\r\n  main.defaultRoutingSearchParameters()\r\n  .toBuilder()\r\n  .setFirstSolutionStrategy(FirstSolutionStrategy.Value.PATH_CHEAPEST_ARC)\r\n  .setLocalSearchMetaheuristic(LocalSearchMetaheuristic.Value.GUIDED_LOCAL_SEARCH)\r\n  .setTimeLimit(Duration.newBuilder().setSeconds(1).build())\r\n  .build();\r\n\r\n// Solve the problem.\r\nAssignment solution = routing.solveWithParameters(searchParameters);\r\n\r\nif(solution != null) {\r\n   printSolution(data, routing, manager, solution);\r\n} else {\r\n  System.out.print(&quot;no results&quot;);\r\n}\r\n```\r\n\r\n    private static OrDataModel buildDataModel() {\r\n        \r\n        List&lt;Long&gt; volumes = new ArrayList&lt;&gt;();\r\n        List&lt;double[]&gt; locations = new ArrayList&lt;&gt;();\r\n        readCsvFile(volumes, locations);\r\n        \r\n        double totalVolume = LCollectionUtils.sumDoubleProperty(volumes, volume -&gt; volume);\r\n        \r\n        int maxCapacity = 30;\r\n        \r\n        int multiTrips = calculateMultiTrips(totalVolume, maxCapacity);\r\n        \r\n        List&lt;double[]&gt; multiTripLocations = new ArrayList&lt;&gt;();\r\n        for(int i = 0; i &lt; multiTrips; i++) {\r\n            multiTripLocations.add(new double[] { 24.3653, 54.7136 });\r\n        }\r\n        \r\n        List&lt;double[]&gt; allLocations = new ArrayList&lt;double[]&gt;(multiTripLocations);\r\n        allLocations.addAll(locations);\r\n        double[][] matrix = new double[allLocations.size()][];\r\n        matrix = allLocations.toArray(matrix);\r\n        \r\n        long[][] distanceMatrix = buildDistanceMatrix(matrix, multiTrips);\r\n        long[][] timeMatrix = buildTimeMatrix(matrix, multiTrips);\r\n        long[] demands = fillDemands(multiTrips, matrix.length, volumes, maxCapacity);\r\n        \r\n        long[][] timeWindows = fillTimeWindow(allLocations.size(), multiTrips);\r\n        \r\n        return OrDataModel.from(matrix, distanceMatrix, timeMatrix, demands, allLocations.size(), multiTrips, maxCapacity, timeWindows, totalVolume);\r\n    }\r\n    \r\n    private static long[] fillDemands(int minimumMultiTrips, int numberOfLocations, List&lt;Long&gt; allVolumes, long vehicleCapacity) {\r\n        \r\n        long[] demands = new long[numberOfLocations];\r\n        \r\n        //first demand is at depot so 0\r\n        demands[0] = 0;\r\n        \r\n        int index;\r\n        for(index = 1; index &lt; minimumMultiTrips; index++) {\r\n            demands[index] = (long)-vehicleCapacity;\r\n        }\r\n        \r\n        for(int j = 0; j &lt; allVolumes.size(); j++) {\r\n            demands[index] = allVolumes.get(j);\r\n            index++;\r\n        }\r\n        \r\n        return demands;\r\n    }\r\n    \r\n    \r\n    private static int calculateMultiTrips(double totalVolume, int capacity) {\r\n        double remainder = totalVolume % capacity;\r\n        double quotient = totalVolume / capacity;\r\n        double multiTrip = remainder == 0 ? quotient : quotient + 1;\r\n        return (int)multiTrip;\r\n    }\r\n\r\n    private static long[][] buildDistanceMatrix(double[][] locations, int minimumMultiTrips) {\r\n\r\n        long[][] distanceData = new long[locations.length][locations.length];\r\n\r\n        for (int i = 0; i &lt; locations.length; i++) {\r\n            \r\n            LatLng fromLatLng = new LatLng().lat(locations[i][0]).lng(locations[i][1]);\r\n\r\n            for (int j = 0; j &lt; locations.length; j++) {\r\n\r\n                if (i == j) {\r\n                    distanceData[i][j] = 0;\r\n                }\r\n                \r\n                else if(i &lt; minimumMultiTrips &amp;&amp; j &lt; minimumMultiTrips) {\r\n                    distanceData[i][j] = 100000;\r\n                }\r\n                \r\n                else {\r\n                    LatLng toLatLng = new LatLng().lat(locations[j][0]).lng(locations[j][1]);\r\n                    LatLngQueryDataFetcher distanceFetcher = new HaversineDistanceFetcher(30, 1.25);\r\n                    sh.locus.pjp.server.model.distance.TimeDistancePair response = distanceFetcher.fetch(fromLatLng, toLatLng);\r\n                    distanceData[i][j] = response.getDistance();\r\n                }\r\n            }\r\n        }\r\n\r\n        return distanceData;\r\n    }\r\n\r\nThe code is simple. Reading demand, lat and long from a csv file. Hardcoded the homebase location for this sample. Built the distance and time matrix but only using distance matrix. What possibly am I missing?\r\n\r\n  [1]: https://github.com/google/or-tools/blob/master/ortools/constraint_solver/samples/cvrp_reload.py","title":"OR tools CVRP reload using single vehicle","body":"<p>Following the python examples <a href=\"https://github.com/google/or-tools/blob/master/ortools/constraint_solver/samples/cvrp_reload.py\" rel=\"nofollow noreferrer\">here</a></p>\n<p>I am trying to build the same feature in java which is - load the stuff and deliver to customers and if the next demand is more than the left over capacity then go to depot and reload. All this is happening without any time constraints, however there is only 1 vehicle in my case. The problem is that the solution is null for many cases.</p>\n<p>For example: demand: <code>[0, -30, -30, -30, 17, 17, 18, 18, 18, 18]</code> with a vehicle capacity of 30 results into null. However, the same demand with different vehicle capacity works fine like <code>-18</code>, <code>36</code>, <code>48</code>, <code>96</code>.</p>\n<p>The first demand is 0 coz that's the start location.</p>\n<p>Here is the code that I am using:</p>\n<pre class=\"lang-java prettyprint-override\"><code>final OrDataModel data = buildDataModel();\n\nRoutingIndexManager manager = new RoutingIndexManager(data.distanceMatrix.length, data.vehicleNumber, data.depot);\n\nRoutingModel routing = new RoutingModel(manager);\n\nfinal int transitCallbackIndex =\nrouting.registerTransitCallback((long fromIndex, long toIndex) -&gt; {\n  int fromNode = manager.indexToNode(fromIndex);\n  int toNode = manager.indexToNode(toIndex);\n  return data.distanceMatrix[fromNode][toNode];\n});\n\nrouting.setArcCostEvaluatorOfAllVehicles(transitCallbackIndex);\nrouting.addDimension(transitCallbackIndex, 0, 1000000, true, &quot;Distance&quot;);\nRoutingDimension distanceDimension = routing.getDimensionOrDie(&quot;Distance&quot;);\ndistanceDimension.setGlobalSpanCostCoefficient(100);\n\nfinal int demandCallbackIndex = routing.registerUnaryTransitCallback(\n  (long fromIndex) -&gt; {\n  // Convert from routing variable Index to user NodeIndex.\n  int fromNode = manager.indexToNode(fromIndex);\n  return data.demands[fromNode];\n});\n\nrouting.addDimension(demandCallbackIndex, data.vehicleCapacity, data.vehicleCapacity, true, &quot;Capacity&quot;);\nRoutingDimension capacityDimension = routing.getDimensionOrDie(&quot;Capacity&quot;);\n\n//No penalty in case multi-trip visit is skipped when not required\nfor(int i = 1; i &lt;= data.multiTrips - 1; i++) {\n  int fromNode = manager.indexToNode(i);\n  routing.addDisjunction(new long[] { fromNode }, 0);\n}\n\n// Setting first solution heuristic.\nRoutingSearchParameters searchParameters =\n  main.defaultRoutingSearchParameters()\n  .toBuilder()\n  .setFirstSolutionStrategy(FirstSolutionStrategy.Value.PATH_CHEAPEST_ARC)\n  .setLocalSearchMetaheuristic(LocalSearchMetaheuristic.Value.GUIDED_LOCAL_SEARCH)\n  .setTimeLimit(Duration.newBuilder().setSeconds(1).build())\n  .build();\n\n// Solve the problem.\nAssignment solution = routing.solveWithParameters(searchParameters);\n\nif(solution != null) {\n   printSolution(data, routing, manager, solution);\n} else {\n  System.out.print(&quot;no results&quot;);\n}\n</code></pre>\n<pre><code>private static OrDataModel buildDataModel() {\n    \n    List&lt;Long&gt; volumes = new ArrayList&lt;&gt;();\n    List&lt;double[]&gt; locations = new ArrayList&lt;&gt;();\n    readCsvFile(volumes, locations);\n    \n    double totalVolume = LCollectionUtils.sumDoubleProperty(volumes, volume -&gt; volume);\n    \n    int maxCapacity = 30;\n    \n    int multiTrips = calculateMultiTrips(totalVolume, maxCapacity);\n    \n    List&lt;double[]&gt; multiTripLocations = new ArrayList&lt;&gt;();\n    for(int i = 0; i &lt; multiTrips; i++) {\n        multiTripLocations.add(new double[] { 24.3653, 54.7136 });\n    }\n    \n    List&lt;double[]&gt; allLocations = new ArrayList&lt;double[]&gt;(multiTripLocations);\n    allLocations.addAll(locations);\n    double[][] matrix = new double[allLocations.size()][];\n    matrix = allLocations.toArray(matrix);\n    \n    long[][] distanceMatrix = buildDistanceMatrix(matrix, multiTrips);\n    long[][] timeMatrix = buildTimeMatrix(matrix, multiTrips);\n    long[] demands = fillDemands(multiTrips, matrix.length, volumes, maxCapacity);\n    \n    long[][] timeWindows = fillTimeWindow(allLocations.size(), multiTrips);\n    \n    return OrDataModel.from(matrix, distanceMatrix, timeMatrix, demands, allLocations.size(), multiTrips, maxCapacity, timeWindows, totalVolume);\n}\n\nprivate static long[] fillDemands(int minimumMultiTrips, int numberOfLocations, List&lt;Long&gt; allVolumes, long vehicleCapacity) {\n    \n    long[] demands = new long[numberOfLocations];\n    \n    //first demand is at depot so 0\n    demands[0] = 0;\n    \n    int index;\n    for(index = 1; index &lt; minimumMultiTrips; index++) {\n        demands[index] = (long)-vehicleCapacity;\n    }\n    \n    for(int j = 0; j &lt; allVolumes.size(); j++) {\n        demands[index] = allVolumes.get(j);\n        index++;\n    }\n    \n    return demands;\n}\n\n\nprivate static int calculateMultiTrips(double totalVolume, int capacity) {\n    double remainder = totalVolume % capacity;\n    double quotient = totalVolume / capacity;\n    double multiTrip = remainder == 0 ? quotient : quotient + 1;\n    return (int)multiTrip;\n}\n\nprivate static long[][] buildDistanceMatrix(double[][] locations, int minimumMultiTrips) {\n\n    long[][] distanceData = new long[locations.length][locations.length];\n\n    for (int i = 0; i &lt; locations.length; i++) {\n        \n        LatLng fromLatLng = new LatLng().lat(locations[i][0]).lng(locations[i][1]);\n\n        for (int j = 0; j &lt; locations.length; j++) {\n\n            if (i == j) {\n                distanceData[i][j] = 0;\n            }\n            \n            else if(i &lt; minimumMultiTrips &amp;&amp; j &lt; minimumMultiTrips) {\n                distanceData[i][j] = 100000;\n            }\n            \n            else {\n                LatLng toLatLng = new LatLng().lat(locations[j][0]).lng(locations[j][1]);\n                LatLngQueryDataFetcher distanceFetcher = new HaversineDistanceFetcher(30, 1.25);\n                sh.locus.pjp.server.model.distance.TimeDistancePair response = distanceFetcher.fetch(fromLatLng, toLatLng);\n                distanceData[i][j] = response.getDistance();\n            }\n        }\n    }\n\n    return distanceData;\n}\n</code></pre>\n<p>The code is simple. Reading demand, lat and long from a csv file. Hardcoded the homebase location for this sample. Built the distance and time matrix but only using distance matrix. What possibly am I missing?</p>\n"},{"tags":["java","asynchronous","concurrency","completable-future"],"answers":[{"tags":[],"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1634725242,"creation_date":1634725242,"answer_id":69644206,"question_id":69591166,"body_markdown":"```\r\n    CompletableFuture&lt;?&gt;[] responses = requests.stream()\r\n            .map(request -&gt; client.sendAsync(request, HttpResponse.BodyHandlers.ofString())\r\n                    .thenApply(HttpResponse::body)\r\n                    .exceptionally(e -&gt; &quot;Error: &quot; + e.getMessage())\r\n                    .thenAccept(llll::add))\r\n            .toArray(CompletableFuture&lt;?&gt;[]::new);\r\n```\r\n\r\nThis block of code takes all of your `HttpRequest` objects, calls `sendAsync()` on them, and then gives each of them some tasks to do after completing their respective call. Those tasks are the `thenApply()`, `exceptionally()`, and `thenAccept()`.\r\n\r\nThe issue comes when you call these 2 lines.\r\n\r\n```\r\nCompletableFuture.allOf(responses).join();\r\n\r\nllll.stream().forEach(System.out::println);\r\n```\r\n\r\nThe `join()` does exactly what you would expect - block the thread and wait for all the requests to finish and receive their responses. More specifically, the `join()` will not let the code continue until each of the `HttpRequest` objects has at least reached the `client.sendAsync()` line.\r\n\r\nHowever, that&#39;s exactly the problem - the code hasn&#39;t had a chance to ***go past*** `client.sendAsync`, which means that it may or may not have enough time to be added to your list `llll`. Remember, being added to that list is one of the tasks we gave each `HttpResponse` object, but depending on how things run, it may or may not be fast enough to add the response to `llll` before we print the contents of `llll`.\r\n\r\nThis is why your solution is inconsistent - you have a [race condition][1]. If you wish to avoid your race condition, you must use the `collect(Collectors.toList())` function to store all of your responses into `llll`, and then you must replace your `CompletableFurure.allOf().join()` with individual calls to `join()` as part of a `CompletionStage`. Here is an example.\r\n\r\n```\r\nimport java.net.http.HttpClient;\r\nimport java.net.http.HttpResponse;\r\nimport java.net.http.HttpRequest;\r\nimport java.net.URI;\r\nimport java.time.Duration;\r\nimport java.util.ArrayList;\r\nimport java.util.Arrays;\r\nimport java.util.List;\r\nimport java.util.concurrent.CompletableFuture;\r\nimport java.util.concurrent.CompletionException;\r\nimport java.util.concurrent.ExecutionException;\r\nimport java.util.stream.Collectors;\r\n\r\nclass HelloWorld {\r\n\r\n   private static void concurrentCalls(List&lt;String&gt; paths) {\r\n      var client = HttpClient.newHttpClient();\r\n   \r\n      List&lt;HttpRequest&gt; requests = paths.stream()\r\n               .map(URI::create)\r\n               .map(uri -&gt; HttpRequest.newBuilder(uri).GET().timeout(Duration.ofSeconds(20)).build())\r\n               .collect(Collectors.toList());\r\n   \r\n      List&lt;CompletableFuture&lt;HttpResponse&lt;String&gt;&gt;&gt; inProgressResponses = requests.stream()\r\n               .map(request -&gt; client.sendAsync(request, HttpResponse.BodyHandlers.ofString()))\r\n               .collect(Collectors.toList());\r\n               \r\n      List&lt;String&gt; completedResponses = inProgressResponses.stream()\r\n            .map(response -&gt; response\r\n                  .thenApply(HttpResponse::body)\r\n                  .exceptionally(e -&gt; &quot;Error: &quot; + e.getMessage())\r\n                  .join())\r\n            .collect(Collectors.toList())\r\n            ;\r\n      \r\n      completedResponses.stream().forEach(System.out::println);\r\n      \r\n   }\r\n\r\n   public static void main(String[] args) {\r\n      List&lt;String&gt; listOfUrls = new ArrayList&lt;&gt;();\r\n      listOfUrls.add(&quot;https://postman-echo.com/get?foo1=bar1&amp;foo2=bar2&quot;);\r\n      listOfUrls.add(&quot;https://postman-echo.com/response-headers?foo1=bar1&amp;foo2=bar2&quot;);\r\n      concurrentCalls(listOfUrls);\r\n   }\r\n\r\n}\r\n```\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Race_condition#Example","title":"Issue with CompletableFuture - does not wait for all URLs to be called","body":"<pre><code>    CompletableFuture&lt;?&gt;[] responses = requests.stream()\n            .map(request -&gt; client.sendAsync(request, HttpResponse.BodyHandlers.ofString())\n                    .thenApply(HttpResponse::body)\n                    .exceptionally(e -&gt; &quot;Error: &quot; + e.getMessage())\n                    .thenAccept(llll::add))\n            .toArray(CompletableFuture&lt;?&gt;[]::new);\n</code></pre>\n<p>This block of code takes all of your <code>HttpRequest</code> objects, calls <code>sendAsync()</code> on them, and then gives each of them some tasks to do after completing their respective call. Those tasks are the <code>thenApply()</code>, <code>exceptionally()</code>, and <code>thenAccept()</code>.</p>\n<p>The issue comes when you call these 2 lines.</p>\n<pre><code>CompletableFuture.allOf(responses).join();\n\nllll.stream().forEach(System.out::println);\n</code></pre>\n<p>The <code>join()</code> does exactly what you would expect - block the thread and wait for all the requests to finish and receive their responses. More specifically, the <code>join()</code> will not let the code continue until each of the <code>HttpRequest</code> objects has at least reached the <code>client.sendAsync()</code> line.</p>\n<p>However, that's exactly the problem - the code hasn't had a chance to <em><strong>go past</strong></em> <code>client.sendAsync</code>, which means that it may or may not have enough time to be added to your list <code>llll</code>. Remember, being added to that list is one of the tasks we gave each <code>HttpResponse</code> object, but depending on how things run, it may or may not be fast enough to add the response to <code>llll</code> before we print the contents of <code>llll</code>.</p>\n<p>This is why your solution is inconsistent - you have a <a href=\"https://en.wikipedia.org/wiki/Race_condition#Example\" rel=\"nofollow noreferrer\">race condition</a>. If you wish to avoid your race condition, you must use the <code>collect(Collectors.toList())</code> function to store all of your responses into <code>llll</code>, and then you must replace your <code>CompletableFurure.allOf().join()</code> with individual calls to <code>join()</code> as part of a <code>CompletionStage</code>. Here is an example.</p>\n<pre><code>import java.net.http.HttpClient;\nimport java.net.http.HttpResponse;\nimport java.net.http.HttpRequest;\nimport java.net.URI;\nimport java.time.Duration;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.List;\nimport java.util.concurrent.CompletableFuture;\nimport java.util.concurrent.CompletionException;\nimport java.util.concurrent.ExecutionException;\nimport java.util.stream.Collectors;\n\nclass HelloWorld {\n\n   private static void concurrentCalls(List&lt;String&gt; paths) {\n      var client = HttpClient.newHttpClient();\n   \n      List&lt;HttpRequest&gt; requests = paths.stream()\n               .map(URI::create)\n               .map(uri -&gt; HttpRequest.newBuilder(uri).GET().timeout(Duration.ofSeconds(20)).build())\n               .collect(Collectors.toList());\n   \n      List&lt;CompletableFuture&lt;HttpResponse&lt;String&gt;&gt;&gt; inProgressResponses = requests.stream()\n               .map(request -&gt; client.sendAsync(request, HttpResponse.BodyHandlers.ofString()))\n               .collect(Collectors.toList());\n               \n      List&lt;String&gt; completedResponses = inProgressResponses.stream()\n            .map(response -&gt; response\n                  .thenApply(HttpResponse::body)\n                  .exceptionally(e -&gt; &quot;Error: &quot; + e.getMessage())\n                  .join())\n            .collect(Collectors.toList())\n            ;\n      \n      completedResponses.stream().forEach(System.out::println);\n      \n   }\n\n   public static void main(String[] args) {\n      List&lt;String&gt; listOfUrls = new ArrayList&lt;&gt;();\n      listOfUrls.add(&quot;https://postman-echo.com/get?foo1=bar1&amp;foo2=bar2&quot;);\n      listOfUrls.add(&quot;https://postman-echo.com/response-headers?foo1=bar1&amp;foo2=bar2&quot;);\n      concurrentCalls(listOfUrls);\n   }\n\n}\n</code></pre>\n"}],"owner":{"account_id":23046551,"reputation":29,"user_id":17164037,"display_name":"Ionutz Asaftei"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":903,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"answer_count":1,"score":2,"last_activity_date":1634725242,"creation_date":1634336306,"question_id":69591166,"body_markdown":"Regarding concurrent async calls, the problem i have is that, after consecutive runs, the code does not wait until both of calls are finished and with a response included. Sometimes is executing both, sometimes only one of the URLs\r\n\r\nWhat i am looking to achieve is:\r\n\r\na) to make CompletableFutures to wait until all responses are received\r\n\r\nb) to extract in a List&lt;HttpResponse&gt; all the responses of provided calls\r\n\r\nc) to be able to categorize them by a key-value pair (ex: request1, request2, request3WithInvalidData etc) and after completion to iterate over the List&lt;HttpResponse&gt; and extract what response and data per each request (statusCode, body etc) and to further make assertions.\r\n\r\nIf anybody can help me, it would be highly appreciated ! I&#39;m new to multithreading and it&#39;s hard to grasp. A little help and explanation of solution would help me a lot !\r\n\r\n\r\nThank you ! (below is my code)\r\n\r\n    class HelloWorld {\r\n\r\n    private static void concurrentCalls(List&lt;String&gt; paths) {\r\n        var client = HttpClient.newHttpClient();\r\n\r\n        List&lt;HttpRequest&gt; requests = paths.stream()\r\n                .map(URI::create)\r\n                .map(uri -&gt; HttpRequest.newBuilder(uri).GET().timeout(Duration.ofSeconds(20)).build())\r\n                .collect(Collectors.toList());\r\n\r\n        List&lt;String&gt; llll = new ArrayList&lt;&gt;();\r\n\r\n        CompletableFuture&lt;?&gt;[] responses = requests.stream()\r\n                .map(request -&gt; client.sendAsync(request, HttpResponse.BodyHandlers.ofString())\r\n                        .thenApply(HttpResponse::body)\r\n                        .exceptionally(e -&gt; &quot;Error: &quot; + e.getMessage())\r\n                        .thenAccept(llll::add))\r\n                .toArray(CompletableFuture&lt;?&gt;[]::new);\r\n\r\n       \r\n        CompletableFuture.allOf(responses).join();\r\n\r\n        llll.stream().forEach(System.out::println);\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        List&lt;String&gt; listOfUrls = new ArrayList&lt;&gt;();\r\n        listOfUrls.add(&quot;https://postman-echo.com/get?foo1=bar1&amp;foo2=bar2&quot;);\r\n        listOfUrls.add(&quot;https://postman-echo.com/response-headers?foo1=bar1&amp;foo2=bar2&quot;);\r\n        concurrentCalls(listOfUrls);\r\n    }\r\n","title":"Issue with CompletableFuture - does not wait for all URLs to be called","body":"<p>Regarding concurrent async calls, the problem i have is that, after consecutive runs, the code does not wait until both of calls are finished and with a response included. Sometimes is executing both, sometimes only one of the URLs</p>\n<p>What i am looking to achieve is:</p>\n<p>a) to make CompletableFutures to wait until all responses are received</p>\n<p>b) to extract in a List all the responses of provided calls</p>\n<p>c) to be able to categorize them by a key-value pair (ex: request1, request2, request3WithInvalidData etc) and after completion to iterate over the List and extract what response and data per each request (statusCode, body etc) and to further make assertions.</p>\n<p>If anybody can help me, it would be highly appreciated ! I'm new to multithreading and it's hard to grasp. A little help and explanation of solution would help me a lot !</p>\n<p>Thank you ! (below is my code)</p>\n<pre><code>class HelloWorld {\n\nprivate static void concurrentCalls(List&lt;String&gt; paths) {\n    var client = HttpClient.newHttpClient();\n\n    List&lt;HttpRequest&gt; requests = paths.stream()\n            .map(URI::create)\n            .map(uri -&gt; HttpRequest.newBuilder(uri).GET().timeout(Duration.ofSeconds(20)).build())\n            .collect(Collectors.toList());\n\n    List&lt;String&gt; llll = new ArrayList&lt;&gt;();\n\n    CompletableFuture&lt;?&gt;[] responses = requests.stream()\n            .map(request -&gt; client.sendAsync(request, HttpResponse.BodyHandlers.ofString())\n                    .thenApply(HttpResponse::body)\n                    .exceptionally(e -&gt; &quot;Error: &quot; + e.getMessage())\n                    .thenAccept(llll::add))\n            .toArray(CompletableFuture&lt;?&gt;[]::new);\n\n   \n    CompletableFuture.allOf(responses).join();\n\n    llll.stream().forEach(System.out::println);\n}\n\npublic static void main(String[] args) {\n    List&lt;String&gt; listOfUrls = new ArrayList&lt;&gt;();\n    listOfUrls.add(&quot;https://postman-echo.com/get?foo1=bar1&amp;foo2=bar2&quot;);\n    listOfUrls.add(&quot;https://postman-echo.com/response-headers?foo1=bar1&amp;foo2=bar2&quot;);\n    concurrentCalls(listOfUrls);\n}\n</code></pre>\n"},{"tags":["java","file","url"],"comments":[{"owner":{"account_id":250544,"reputation":7921,"user_id":527333,"accept_rate":60,"display_name":"btiernay"},"score":2,"creation_date":1323694857,"post_id":8474694,"comment_id":10481907,"body_markdown":"Shouldn&#39;t you be prefixing the file path with file:// ?","body":"Shouldn&#39;t you be prefixing the file path with file:// ?"},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":2,"creation_date":1323695009,"post_id":8474694,"comment_id":10481944,"body_markdown":"It thinks the `C:` its the protocol.  BTW: You can&#39;t use plain \\ you need \\\\ or `/`","body":"It thinks the <code>C:</code> its the protocol.  BTW: You can&#39;t use plain \\ you need \\\\ or <code>&#47;</code>"},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":1,"creation_date":1323695560,"post_id":8474694,"comment_id":10482094,"body_markdown":"And again you are posting uncompilable code snippets!  What is it about &quot;`String imageUrl = &quot;C:\\Users\\MyUser\\image.jpg&quot;;` will not compile&quot;, do you *not* understand?!?","body":"And again you are posting uncompilable code snippets!  What is it about &quot;<code>String imageUrl = &quot;C:\\Users\\MyUser\\image.jpg&quot;;</code> will not compile&quot;, do you <i>not</i> understand?!?"}],"answers":[{"tags":[],"owner":{"account_id":138790,"reputation":61721,"user_id":343955,"accept_rate":85,"display_name":"adarshr"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1323694869,"creation_date":1323694869,"answer_id":8474715,"question_id":8474694,"body_markdown":"Try with\r\n\r\n    String imageUrl = &quot;file:///C:/Users/MyUser/image.jpg&quot;;\r\n\r\n","title":"Java URL: Unknown Protocol &quot;C&quot;","body":"<p>Try with</p>\n\n<pre><code>String imageUrl = \"file:///C:/Users/MyUser/image.jpg\";\n</code></pre>\n"},{"tags":[],"owner":{"account_id":30922,"reputation":8920,"user_id":84619,"accept_rate":100,"display_name":"Andy"},"down_vote_count":0,"up_vote_count":99,"is_accepted":true,"score":99,"last_activity_date":1323695459,"creation_date":1323694893,"answer_id":8474725,"question_id":8474694,"body_markdown":"You need to turn the path to the image.jpg file into a [file:// URL][1], like this:\r\n\r\n    String imageUrl = &quot;file:///C:/Users/MyUser/image.jpg&quot;;\r\n\r\nOtherwise it interprets the C as the URL protocol.\r\n\r\n  [1]: http://en.wikipedia.org/wiki/File_URI_scheme","title":"Java URL: Unknown Protocol &quot;C&quot;","body":"<p>You need to turn the path to the image.jpg file into a <a href=\"http://en.wikipedia.org/wiki/File_URI_scheme\" rel=\"noreferrer\">file:// URL</a>, like this:</p>\n\n<pre><code>String imageUrl = \"file:///C:/Users/MyUser/image.jpg\";\n</code></pre>\n\n<p>Otherwise it interprets the C as the URL protocol.</p>\n"},{"tags":[],"owner":{"account_id":1091259,"reputation":3399,"user_id":1085861,"display_name":"korifey"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1323694905,"creation_date":1323694905,"answer_id":8474730,"question_id":8474694,"body_markdown":"Try this\r\n\r\n    try {\r\n        String imageUrl = &quot;file:///C:/Users/MyUser/image.jpg&quot;;\r\n        Jpeg image = new Jpeg(new URL(imageUrl));\r\n    } catch(Exception exc) {\r\n        System.out.println(exc.getMessage());\r\n    }","title":"Java URL: Unknown Protocol &quot;C&quot;","body":"<p>Try this</p>\n\n<pre><code>try {\n    String imageUrl = \"file:///C:/Users/MyUser/image.jpg\";\n    Jpeg image = new Jpeg(new URL(imageUrl));\n} catch(Exception exc) {\n    System.out.println(exc.getMessage());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15309472,"reputation":1,"user_id":11045195,"display_name":"Nunes"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1551671738,"creation_date":1551655118,"answer_id":54974790,"question_id":8474694,"body_markdown":"Searching the file with its directory and adding in the image to assign to the ImageView\r\n    \r\n    File file = new File(&quot;F:/a.jpg&quot;);\r\n    Image image = new Image(arquivo.toURI().toString()); //here is magic happens\r\n    imageView.setImage(image);\r\n\r\n","title":"Java URL: Unknown Protocol &quot;C&quot;","body":"<p>Searching the file with its directory and adding in the image to assign to the ImageView</p>\n\n<pre><code>File file = new File(\"F:/a.jpg\");\nImage image = new Image(arquivo.toURI().toString()); //here is magic happens\nimageView.setImage(image);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19114960,"reputation":508,"user_id":14438633,"display_name":"Gilad Dahan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634725145,"creation_date":1634725145,"answer_id":69644182,"question_id":8474694,"body_markdown":"In my case the issue was that I was having &quot;%&quot; in my file name. Once I changed it, the file was loaded successfully. So I guess special characters are not allowed in file names, at least in windows.","title":"Java URL: Unknown Protocol &quot;C&quot;","body":"<p>In my case the issue was that I was having &quot;%&quot; in my file name. Once I changed it, the file was loaded successfully. So I guess special characters are not allowed in file names, at least in windows.</p>\n"}],"owner":{"account_id":490670,"reputation":55804,"user_id":892029,"accept_rate":84,"display_name":"IAmYourFaja"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64151,"favorite_count":0,"down_vote_count":1,"up_vote_count":30,"accepted_answer_id":8474725,"answer_count":5,"score":29,"last_activity_date":1634725145,"creation_date":1323694763,"question_id":8474694,"body_markdown":"I know there are *similar* questions to this one on SO (like [this](https://stackoverflow.com/questions/7243550/unknown-protocol-c-jdom-a-saxbuilder) one), however, after reading through the list of &quot;Questions with similar titles&quot;, I still feel strongly that this is unique.\r\n\r\nI am working with the [iText](http://itextpdf.com/) library to generate PDFs from inside a Swing application. iText&#39;s `Jpeg` class requires a [`URL`](http://docs.oracle.com/javase/6/docs/api/java/net/URL.html) in its constructor to locate an image/jpg that you want to add to the PDF file.\r\n\r\nWhen I set this `URL` to the absolute file path of my JPG file, I get a `MalformedURLException` claiming **unknown protocol: c** (&quot;c&quot; being the `C:\\` drive on my local disk).\r\n\r\nIs there any hack/circumvention to this, or do I *have* to host this JPG somewhere and have the `URL` find it over the net?  Here is the code that is failing:\r\n\r\n    try {\r\n        String imageUrl = &quot;C:\\Users\\MyUser\\image.jpg&quot;;\r\n        Jpeg image = new Jpeg(new URL(imageUrl));\r\n    } catch(Exception exc) {\r\n        System.out.println(exc.getMessage());\r\n    }\r\n\r\n**Please note:** The `URL` does properly escape the string (thus &quot;\\&quot; are converted to &quot;\\ \\&quot;, etc.).\r\n\r\nThanks in advance!","title":"Java URL: Unknown Protocol &quot;C&quot;","body":"<p>I know there are <em>similar</em> questions to this one on SO (like <a href=\"https://stackoverflow.com/questions/7243550/unknown-protocol-c-jdom-a-saxbuilder\">this</a> one), however, after reading through the list of \"Questions with similar titles\", I still feel strongly that this is unique.</p>\n\n<p>I am working with the <a href=\"http://itextpdf.com/\" rel=\"noreferrer\">iText</a> library to generate PDFs from inside a Swing application. iText's <code>Jpeg</code> class requires a <a href=\"http://docs.oracle.com/javase/6/docs/api/java/net/URL.html\" rel=\"noreferrer\"><code>URL</code></a> in its constructor to locate an image/jpg that you want to add to the PDF file.</p>\n\n<p>When I set this <code>URL</code> to the absolute file path of my JPG file, I get a <code>MalformedURLException</code> claiming <strong>unknown protocol: c</strong> (\"c\" being the <code>C:\\</code> drive on my local disk).</p>\n\n<p>Is there any hack/circumvention to this, or do I <em>have</em> to host this JPG somewhere and have the <code>URL</code> find it over the net?  Here is the code that is failing:</p>\n\n<pre><code>try {\n    String imageUrl = \"C:\\Users\\MyUser\\image.jpg\";\n    Jpeg image = new Jpeg(new URL(imageUrl));\n} catch(Exception exc) {\n    System.out.println(exc.getMessage());\n}\n</code></pre>\n\n<p><strong>Please note:</strong> The <code>URL</code> does properly escape the string (thus \"\\\" are converted to \"\\ \\\", etc.).</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["java","spring-boot","hibernate","jpa"],"comments":[{"owner":{"account_id":1148924,"reputation":839,"user_id":1131057,"accept_rate":75,"display_name":"crig"},"score":0,"creation_date":1627315556,"post_id":68532948,"comment_id":121117842,"body_markdown":"Your post does not really say what the problem you are trying to solve is. Are you receiving an error?   It looks like you are missing the Id member in your MyEntity class.","body":"Your post does not really say what the problem you are trying to solve is. Are you receiving an error?   It looks like you are missing the Id member in your MyEntity class."},{"owner":{"account_id":1431000,"reputation":158,"user_id":1353431,"accept_rate":100,"display_name":"Arun"},"score":0,"creation_date":1627371087,"post_id":68532948,"comment_id":121131085,"body_markdown":"Hi @crig, I have added more detail in the post. I am trying to improve performance using batch but it seems like it&#39;s not working and I am also not getting any error,","body":"Hi @crig, I have added more detail in the post. I am trying to improve performance using batch but it seems like it&#39;s not working and I am also not getting any error,"}],"answers":[{"tags":[],"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1627374432,"creation_date":1627374432,"answer_id":68541409,"question_id":68532948,"body_markdown":"Just because you see the queries in the database logs does not mean that batching does not work. JDBC batching is a protocol level optimization and is dependent on the driver support. A JDBC driver may implement this by issuing individual statements. The optimization usually comes from reusing the same server handle though and sending values in batches. The gain might be too small for 1000 elements though. You should consult your driver vendor about this if you do not see any improvements. You are not showing what kind of queries are logged though, are you sure that no other statements are executed in between the update statements?","title":"Spring boot hibernate/jpa batch update not working","body":"<p>Just because you see the queries in the database logs does not mean that batching does not work. JDBC batching is a protocol level optimization and is dependent on the driver support. A JDBC driver may implement this by issuing individual statements. The optimization usually comes from reusing the same server handle though and sending values in batches. The gain might be too small for 1000 elements though. You should consult your driver vendor about this if you do not see any improvements. You are not showing what kind of queries are logged though, are you sure that no other statements are executed in between the update statements?</p>\n"},{"tags":[],"owner":{"account_id":6470949,"reputation":382,"user_id":5011127,"accept_rate":0,"display_name":"jpl"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634724751,"creation_date":1634724751,"answer_id":69644109,"question_id":68532948,"body_markdown":"Hibernate disables insert batching at the JDBC level transparently if you use an identity identifier generator.\r\n\r\n&gt; https://docs.jboss.org/hibernate/core/4.3/devguide/en-US/html_single/#batch","title":"Spring boot hibernate/jpa batch update not working","body":"<p>Hibernate disables insert batching at the JDBC level transparently if you use an identity identifier generator.</p>\n<blockquote>\n<p><a href=\"https://docs.jboss.org/hibernate/core/4.3/devguide/en-US/html_single/#batch\" rel=\"nofollow noreferrer\">https://docs.jboss.org/hibernate/core/4.3/devguide/en-US/html_single/#batch</a></p>\n</blockquote>\n"}],"owner":{"account_id":1431000,"reputation":158,"user_id":1353431,"accept_rate":100,"display_name":"Arun"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1321,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1634724751,"creation_date":1627314750,"question_id":68532948,"body_markdown":"**application property**\r\n\r\n    spring.datasource.url=jdbc:as400://localhost/\r\n    \r\n    spring.jpa.properties.hibernate.jdbc.batch_size = 30\r\n    spring.jpa.properties.hibernate.order_updates = true\r\n    spring.jpa.properties.hibernate.batch_versioned_data = true\r\n\r\n**Entity -**\r\n\r\n    @Data\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @Builder\r\n    @Entity(name = &quot;entity&quot;)\r\n    public class MyEntity {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        @Column(name = &quot;ID&quot;, nullable = false);\r\n    \r\n       @ManyToOne\r\n       @JoinColumn(name = &quot;HDR_ID&quot;, referencedColumnName = &quot;HDR_ID&quot;)\r\n       @JsonIgnore\r\n       private Header header;\r\n    \r\n       @ManyToOne\r\n       @JoinColumn(name = &quot;STS_ID&quot;, referencedColumnName = &quot;STS_ID&quot;)\r\n       private Status status;\r\n    }\r\n\r\n**Service -**\r\n\r\n    this.myRepository.saveAll(MyEntitylist);\r\n\r\nGradle -\r\n\r\n        implementation &#39;org.springframework.boot:spring-boot-starter-actuator&#39;\r\n    \timplementation &#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;\r\n    \timplementation &#39;org.springframework.boot:spring-boot-starter-data-elasticsearch&#39;\r\n    \timplementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n\r\n\r\nI am using Spring boot 2.3.5.RELEASE. \r\nI am trying to update bulk records using hibernate batch but it seems like it&#39;s not working. I am not getting any errors, Records are updating in DB without any problem but there is no performance improvement. Actually, I could not find any difference with or without Hibernate batch process. I checked with logs and their query is logging for every single record, for example, if I try to save 1000 records then there will be 1000 update queries in logs.\r\n\r\nI am expecting fewer update queries after batch, depends on batch size and it should take comparatively less time than without batch queries.\r\n\r\n\r\n\r\nIs there any configuration issue in my code?\r\nIs there any option like reWriteBatchedInserts for jdbc:as400  to show a multi-row insert query?","title":"Spring boot hibernate/jpa batch update not working","body":"<p><strong>application property</strong></p>\n<pre><code>spring.datasource.url=jdbc:as400://localhost/\n\nspring.jpa.properties.hibernate.jdbc.batch_size = 30\nspring.jpa.properties.hibernate.order_updates = true\nspring.jpa.properties.hibernate.batch_versioned_data = true\n</code></pre>\n<p><strong>Entity -</strong></p>\n<pre><code>@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@Builder\n@Entity(name = &quot;entity&quot;)\npublic class MyEntity {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;ID&quot;, nullable = false);\n\n   @ManyToOne\n   @JoinColumn(name = &quot;HDR_ID&quot;, referencedColumnName = &quot;HDR_ID&quot;)\n   @JsonIgnore\n   private Header header;\n\n   @ManyToOne\n   @JoinColumn(name = &quot;STS_ID&quot;, referencedColumnName = &quot;STS_ID&quot;)\n   private Status status;\n}\n</code></pre>\n<p><strong>Service -</strong></p>\n<pre><code>this.myRepository.saveAll(MyEntitylist);\n</code></pre>\n<p>Gradle -</p>\n<pre><code>    implementation 'org.springframework.boot:spring-boot-starter-actuator'\n    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'\n    implementation 'org.springframework.boot:spring-boot-starter-data-elasticsearch'\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n</code></pre>\n<p>I am using Spring boot 2.3.5.RELEASE.\nI am trying to update bulk records using hibernate batch but it seems like it's not working. I am not getting any errors, Records are updating in DB without any problem but there is no performance improvement. Actually, I could not find any difference with or without Hibernate batch process. I checked with logs and their query is logging for every single record, for example, if I try to save 1000 records then there will be 1000 update queries in logs.</p>\n<p>I am expecting fewer update queries after batch, depends on batch size and it should take comparatively less time than without batch queries.</p>\n<p>Is there any configuration issue in my code?\nIs there any option like reWriteBatchedInserts for jdbc:as400  to show a multi-row insert query?</p>\n"},{"tags":["java","sql","spring","postgresql","spring-mvc"],"comments":[{"owner":{"display_name":"user9841721"},"score":1,"creation_date":1634722570,"post_id":69643566,"comment_id":123099261,"body_markdown":"you can use `&quot;Banana, Apple, Orange&quot;.split(&quot;,&quot;)` so you get an array of those 3 strings and then you can do a `.trim()` to each String to remove spaces","body":"you can use <code>&quot;Banana, Apple, Orange&quot;.split(&quot;,&quot;)</code> so you get an array of those 3 strings and then you can do a <code>.trim()</code> to each String to remove spaces"},{"owner":{"account_id":23088986,"reputation":11,"user_id":17200118,"display_name":"Daniel Ford"},"score":0,"creation_date":1634722740,"post_id":69643566,"comment_id":123099335,"body_markdown":"But my setFruit is String, I get an error when I try to do this: inputParameters.setFruit(fruits.split(&quot;,&quot;); `fruits` object contain the `&quot;Banana, Apple, Orange&quot;`","body":"But my setFruit is String, I get an error when I try to do this: inputParameters.setFruit(fruits.split(&quot;,&quot;); <code>fruits</code> object contain the <code>&quot;Banana, Apple, Orange&quot;</code>"},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1634723172,"post_id":69643566,"comment_id":123099512,"body_markdown":"What type does `inputParameters.getFruit()` actually return?","body":"What type does <code>inputParameters.getFruit()</code> actually return?"},{"owner":{"account_id":23088986,"reputation":11,"user_id":17200118,"display_name":"Daniel Ford"},"score":0,"creation_date":1634723333,"post_id":69643566,"comment_id":123099590,"body_markdown":"`inputParameters.getFruit()` returns a String. What I am trying to achieve is that my SQL query above should accept the 3 data &#39;Banana&#39;, Apple&#39;, &#39;Orange&#39; rather than it being only one String","body":"<code>inputParameters.getFruit()</code> returns a String. What I am trying to achieve is that my SQL query above should accept the 3 data &#39;Banana&#39;, Apple&#39;, &#39;Orange&#39; rather than it being only one String"},{"owner":{"display_name":"user9841721"},"score":0,"creation_date":1634727813,"post_id":69643566,"comment_id":123101413,"body_markdown":"with the data you get from the split ( `String[]`) you have to do a String template if that&#39;s what you wish, you have each fruit on 0,1, 2 indexes","body":"with the data you get from the split ( <code>String[]</code>) you have to do a String template if that&#39;s what you wish, you have each fruit on 0,1, 2 indexes"}],"answers":[{"tags":[],"owner":{"account_id":9735990,"reputation":168,"user_id":7219217,"display_name":"gantoin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634724471,"creation_date":1634723338,"answer_id":69643811,"question_id":69643566,"body_markdown":"I think this could help you :&#160;\r\n\r\n```java\r\nString oneStringFruit = &quot;Banana, Apple, Orange&quot;;\r\nStringBuilder sql = new StringBuilder(&quot;SELECT * FROM fruit f where f.name IN (&quot;);\r\nString[] fruits = oneStringFruit.split(&quot;,&quot;);\r\n\r\nSet.of(fruits).forEach(fruit -&gt; sql.append(&quot;&#39;&quot;).append(fruit.trim()).append(&quot;&#39;, &quot;));\r\nsql.replace(sql.lastIndexOf(&quot;,&quot;), sql.lastIndexOf(&quot;,&quot;) + 1, &quot;)&quot;);\r\nSystem.out.println(sql);\r\n```\r\n\r\nEnjoy!","title":"Convert a String to pass multiple values in SQL WHERE IN clause in Java","body":"<p>I think this could help you : </p>\n<pre class=\"lang-java prettyprint-override\"><code>String oneStringFruit = &quot;Banana, Apple, Orange&quot;;\nStringBuilder sql = new StringBuilder(&quot;SELECT * FROM fruit f where f.name IN (&quot;);\nString[] fruits = oneStringFruit.split(&quot;,&quot;);\n\nSet.of(fruits).forEach(fruit -&gt; sql.append(&quot;'&quot;).append(fruit.trim()).append(&quot;', &quot;));\nsql.replace(sql.lastIndexOf(&quot;,&quot;), sql.lastIndexOf(&quot;,&quot;) + 1, &quot;)&quot;);\nSystem.out.println(sql);\n</code></pre>\n<p>Enjoy!</p>\n"},{"tags":[],"owner":{"account_id":17588583,"reputation":611,"user_id":12760895,"display_name":"cogitoergosum"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634723936,"creation_date":1634723936,"answer_id":69643928,"question_id":69643566,"body_markdown":"The simplest way to do this is passing the whole `&quot;Banana, Apple, Orange&quot;` string to postgres and letting postgres explode the string via string_to_array and unnest():\r\n\r\n    StringBuilder sql = new StringBuilder(\r\n    &quot;SELECT * FROM fruit f where &quot;);\r\n\r\n    if (!inputParameters.getFruit().isEmpty()) {\r\n      sql.append(&quot;f.name IN (SELECT UNNEST(string_to_array(:fruit, &#39;, &#39;)) &quot;);\r\n      parameterSource.addValue(&quot;fruit&quot;, inputParameters.getFruit());\r\n      ) \r\n    }\r\n\r\n`string_to_array` will explode the `:fruit` string into an array, and `UNNEST` will transform that array into a recordset suitable for IN","title":"Convert a String to pass multiple values in SQL WHERE IN clause in Java","body":"<p>The simplest way to do this is passing the whole <code>&quot;Banana, Apple, Orange&quot;</code> string to postgres and letting postgres explode the string via string_to_array and unnest():</p>\n<pre><code>StringBuilder sql = new StringBuilder(\n&quot;SELECT * FROM fruit f where &quot;);\n\nif (!inputParameters.getFruit().isEmpty()) {\n  sql.append(&quot;f.name IN (SELECT UNNEST(string_to_array(:fruit, ', ')) &quot;);\n  parameterSource.addValue(&quot;fruit&quot;, inputParameters.getFruit());\n  ) \n}\n</code></pre>\n<p><code>string_to_array</code> will explode the <code>:fruit</code> string into an array, and <code>UNNEST</code> will transform that array into a recordset suitable for IN</p>\n"},{"tags":[],"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634724136,"creation_date":1634724136,"answer_id":69643969,"question_id":69643566,"body_markdown":"In SQL, string literals need to be enclosed in single quote characters. Hence you want to replace `:fruit` (in the text of your SQL query) with the following\r\n```none\r\n&#39;Banana&#39;,&#39;Apple&#39;,&#39;Orange&#39;\r\n```\r\nIn other words you don&#39;t need to split the string that is returned by method `getFruit`, you just need to change it a little. The following code does that.\r\n```java\r\nString fruit = &quot;Banana, Apple, Orange&quot;; // value returned from method `getFruit`\r\nString sql = &quot;SELECT * FROM fruit f where f.name IN (:fruit)&quot;;\r\nSystem.out.println(sql.replaceFirst(&quot;:fruit&quot;, fruit.replaceAll(&quot;([A-Z][a-z]+)&quot;, &quot;&#39;$1&#39;&quot;)));\r\n```\r\nRunning the above code produces the following:\r\n```none\r\nSELECT * FROM fruit f where f.name IN (&#39;Banana&#39;, &#39;Apple&#39;, &#39;Orange&#39;)\r\n```\r\n","title":"Convert a String to pass multiple values in SQL WHERE IN clause in Java","body":"<p>In SQL, string literals need to be enclosed in single quote characters. Hence you want to replace <code>:fruit</code> (in the text of your SQL query) with the following</p>\n<pre class=\"lang-none prettyprint-override\"><code>'Banana','Apple','Orange'\n</code></pre>\n<p>In other words you don't need to split the string that is returned by method <code>getFruit</code>, you just need to change it a little. The following code does that.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String fruit = &quot;Banana, Apple, Orange&quot;; // value returned from method `getFruit`\nString sql = &quot;SELECT * FROM fruit f where f.name IN (:fruit)&quot;;\nSystem.out.println(sql.replaceFirst(&quot;:fruit&quot;, fruit.replaceAll(&quot;([A-Z][a-z]+)&quot;, &quot;'$1'&quot;)));\n</code></pre>\n<p>Running the above code produces the following:</p>\n<pre class=\"lang-none prettyprint-override\"><code>SELECT * FROM fruit f where f.name IN ('Banana', 'Apple', 'Orange')\n</code></pre>\n"}],"owner":{"account_id":23088986,"reputation":11,"user_id":17200118,"display_name":"Daniel Ford"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1239,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":3,"score":-1,"last_activity_date":1634724471,"creation_date":1634722366,"question_id":69643566,"body_markdown":"I have a String parameter ```fruit``` which should accept comma separated string for example: ```&quot;Banana, Apple, Orange&quot;```. How do I split this String into 3 data like ```&quot;Banana&quot;, &quot;Apple&quot;, &quot;Orange&quot;``` so it can be passed to my SQL below:\r\n\r\n```\r\nStringBuilder sql = new StringBuilder(\r\n&quot;SELECT * FROM fruit f where &quot;);\r\n\r\n if (!inputParameters.getFruit().isEmpty()) {\r\n   sql.append(&quot;f.name IN (:fruit) &quot;);\r\n   parameterSource.addValue(&quot;fruit&quot;, inputParameters.getFruit());\r\n ) \r\n}\r\n```\r\n\r\nHere, I want to pass the value of ```getFruit``` in the ```SQL IN``` clause which is already converted into 3 data: ```&quot;Banana&quot;, &quot;Apple&quot;, &quot;Orange&quot;``` rather than only 1 String data ```&quot;Banana, Apple, Orange&quot;```","title":"Convert a String to pass multiple values in SQL WHERE IN clause in Java","body":"<p>I have a String parameter <code>fruit</code> which should accept comma separated string for example: <code>&quot;Banana, Apple, Orange&quot;</code>. How do I split this String into 3 data like <code>&quot;Banana&quot;, &quot;Apple&quot;, &quot;Orange&quot;</code> so it can be passed to my SQL below:</p>\n<pre><code>StringBuilder sql = new StringBuilder(\n&quot;SELECT * FROM fruit f where &quot;);\n\n if (!inputParameters.getFruit().isEmpty()) {\n   sql.append(&quot;f.name IN (:fruit) &quot;);\n   parameterSource.addValue(&quot;fruit&quot;, inputParameters.getFruit());\n ) \n}\n</code></pre>\n<p>Here, I want to pass the value of <code>getFruit</code> in the <code>SQL IN</code> clause which is already converted into 3 data: <code>&quot;Banana&quot;, &quot;Apple&quot;, &quot;Orange&quot;</code> rather than only 1 String data <code>&quot;Banana, Apple, Orange&quot;</code></p>\n"},{"tags":["java","relative-path"],"comments":[{"owner":{"account_id":88922,"reputation":28816,"user_id":245679,"accept_rate":99,"display_name":"MD Sayem Ahmed"},"score":0,"creation_date":1378198470,"post_id":18587939,"comment_id":27353547,"body_markdown":"Your program should ask for the path as input from the user. There&#39;s no way you can cover all possible paths. Or, you can create a config file, where you/user will provide the path to the process, and then read it in your program.","body":"Your program should ask for the path as input from the user. There&#39;s no way you can cover all possible paths. Or, you can create a config file, where you/user will provide the path to the process, and then read it in your program."},{"owner":{"account_id":202467,"reputation":9985,"user_id":449553,"accept_rate":54,"display_name":"msangel"},"score":0,"creation_date":1378198532,"post_id":18587939,"comment_id":27353581,"body_markdown":"Does &#39;Cognity&#39; folder has relative path to this java program itself?","body":"Does &#39;Cognity&#39; folder has relative path to this java program itself?"},{"owner":{"account_id":976596,"reputation":3543,"user_id":997555,"accept_rate":52,"display_name":"maress"},"score":0,"creation_date":1378198627,"post_id":18587939,"comment_id":27353633,"body_markdown":"You can check forcing a requirement for system path to the application","body":"You can check forcing a requirement for system path to the application"},{"owner":{"account_id":2978244,"reputation":1562,"user_id":2528840,"accept_rate":92,"display_name":"Schadenfreude"},"score":0,"creation_date":1378199659,"post_id":18587939,"comment_id":27354221,"body_markdown":"Cognity is a repository, it&#39;s usual path is either C:\\Cognity, D:\\Cognity, E:\\Cognity, etc. you get the drift - usually only the directory could be different, the rest of the path stays the same.","body":"Cognity is a repository, it&#39;s usual path is either C:\\Cognity, D:\\Cognity, E:\\Cognity, etc. you get the drift - usually only the directory could be different, the rest of the path stays the same."}],"answers":[{"tags":[],"owner":{"account_id":226324,"reputation":3864,"user_id":487305,"accept_rate":74,"display_name":"sara"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1634724382,"creation_date":1378198526,"answer_id":18587975,"question_id":18587939,"body_markdown":"Call `System.getProperty(&quot;user.dir&quot;);` to get your current dir, and concat the relative path to the result.\r\n\r\ne.g.\r\n\r\n    String path = System.getProperty(&quot;user.dir&quot;);\r\n    path += relativePath;\r\n\r\n**EDIT:**\r\n\r\nClarification:\r\n\r\nFor example:\r\nThe program you want to run is always located two folders backwards, and then at Temp dir.\r\n\r\nSo the relative path is `..\\\\..\\Temp\\prog.exe.`\r\n\r\nLet&#39;s say that in one computer you have your program located at `C:\\Users\\user\\Documents\\Program`, so this is the working directory.\r\n\r\nSo:\r\n\r\n    String path = System.getProperty(&quot;user.dir&quot;); //returns the working directory\r\n    String relativePath = &quot;\\\\ ..\\\\..\\\\Temp&quot;; //no matter what is the first path, this is the relative location to the current dir\r\n    path += relativePath;\r\n    //in this example, path now equals C:\\Users\\user\\Documents\\Program\\..\\..\\Temp\\prog.exe = C:\\Users\\user\\Temp\\prog.exe\r\n    Process p = Runtime.getRuntime().exec(command.toString(), null, new File(path));\r\n","title":"Relative file path in java","body":"<p>Call <code>System.getProperty(&quot;user.dir&quot;);</code> to get your current dir, and concat the relative path to the result.</p>\n<p>e.g.</p>\n<pre><code>String path = System.getProperty(&quot;user.dir&quot;);\npath += relativePath;\n</code></pre>\n<p><strong>EDIT:</strong></p>\n<p>Clarification:</p>\n<p>For example:\nThe program you want to run is always located two folders backwards, and then at Temp dir.</p>\n<p>So the relative path is <code>..\\\\..\\Temp\\prog.exe.</code></p>\n<p>Let's say that in one computer you have your program located at <code>C:\\Users\\user\\Documents\\Program</code>, so this is the working directory.</p>\n<p>So:</p>\n<pre><code>String path = System.getProperty(&quot;user.dir&quot;); //returns the working directory\nString relativePath = &quot;\\\\ ..\\\\..\\\\Temp&quot;; //no matter what is the first path, this is the relative location to the current dir\npath += relativePath;\n//in this example, path now equals C:\\Users\\user\\Documents\\Program\\..\\..\\Temp\\prog.exe = C:\\Users\\user\\Temp\\prog.exe\nProcess p = Runtime.getRuntime().exec(command.toString(), null, new File(path));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3091735,"reputation":851,"user_id":2617699,"accept_rate":71,"display_name":"JavaDM"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1378198560,"creation_date":1378198560,"answer_id":18587991,"question_id":18587939,"body_markdown":"You could use a config-File to set the absolute-path or you create that directory in a relative path to the jar-file.","title":"Relative file path in java","body":"<p>You could use a config-File to set the absolute-path or you create that directory in a relative path to the jar-file.</p>\n"},{"tags":[],"owner":{"account_id":3103686,"reputation":96,"user_id":2627110,"display_name":"mickfagan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1378208200,"creation_date":1378200588,"answer_id":18588723,"question_id":18587939,"body_markdown":"As `System.getProperty(&quot;user.dir&quot;));` returns the directory from which the JVM was launched you still can&#39;t guarantee whether you&#39;re in C:\\ or D:\\\r\nMy advice would be to pass the *Cognity* location in as a -D commandline argument and use it like this:\r\n\r\n`Process p = Runtime.getRuntime().exec(command.toString(), null, new   File(System.getProperty(&quot;cognity.dir&quot;)));`\r\n\r\n","title":"Relative file path in java","body":"<p>As <code>System.getProperty(\"user.dir\"));</code> returns the directory from which the JVM was launched you still can't guarantee whether you're in C:\\ or D:\\\nMy advice would be to pass the <em>Cognity</em> location in as a -D commandline argument and use it like this:</p>\n\n<p><code>Process p = Runtime.getRuntime().exec(command.toString(), null, new   File(System.getProperty(\"cognity.dir\")));</code></p>\n"}],"owner":{"account_id":2978244,"reputation":1562,"user_id":2528840,"accept_rate":92,"display_name":"Schadenfreude"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9544,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":18588723,"answer_count":3,"score":3,"last_activity_date":1634724382,"creation_date":1378198397,"question_id":18587939,"body_markdown":"I have this code:\r\n\r\n     Process p = Runtime.getRuntime().exec(command.toString(), null, \r\n                                              new File(&quot;D:\\\\Cognity&quot;));\r\nBut the thing is the Cognity directory is not always in D:\\\\, it could be in C:\\ etc. So my question is if there is **a way to give it a relative path so I don&#39;t have to change this code depending on the PC that uses the program?**\r\n\r\n","title":"Relative file path in java","body":"<p>I have this code:</p>\n\n<pre><code> Process p = Runtime.getRuntime().exec(command.toString(), null, \n                                          new File(\"D:\\\\Cognity\"));\n</code></pre>\n\n<p>But the thing is the Cognity directory is not always in D:\\, it could be in C:\\ etc. So my question is if there is <strong>a way to give it a relative path so I don't have to change this code depending on the PC that uses the program?</strong></p>\n"},{"tags":["java","xml","xpath"],"comments":[{"owner":{"account_id":109492,"reputation":107225,"user_id":290085,"display_name":"kjhughes"},"score":0,"creation_date":1467584841,"post_id":38173348,"comment_id":63777002,"body_markdown":"Angel, welcome to Stack Overflow.  You&#39;ve been here a few months, and asked 9 questions, but have yet to [**accept**](http://meta.stackoverflow.com/q/5234/234215) or [**upvote**](http://stackoverflow.com/help/why-vote) any answers.  Please read the linked pages and consider accepting and/or upvoting answers that have helped you.   Thanks.","body":"Angel, welcome to Stack Overflow.  You&#39;ve been here a few months, and asked 9 questions, but have yet to <a href=\"http://meta.stackoverflow.com/q/5234/234215\"><b>accept</b></a> or <a href=\"http://stackoverflow.com/help/why-vote\"><b>upvote</b></a> any answers.  Please read the linked pages and consider accepting and/or upvoting answers that have helped you.   Thanks."}],"answers":[{"tags":[],"owner":{"account_id":109492,"reputation":107225,"user_id":290085,"display_name":"kjhughes"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1467578503,"creation_date":1467577384,"answer_id":38174002,"question_id":38173348,"body_markdown":"Realize that a colon (`:`) [***should***][1] only be used in an element or attribute name if part of namespace prefix:\r\n\r\n&gt; **Note**:\r\n&gt; \r\n&gt; The Namespaces in XML Recommendation [\\[XML Names\\]][2] assigns a meaning to\r\n&gt; names containing colon characters. Therefore, authors should not use\r\n&gt; the colon in XML names except for namespace purposes, but XML\r\n&gt; processors must accept the colon as a name character.\r\n\r\n\r\nSo,\r\n\r\n    /root/row/ELEMENT1/@at:it\r\n\r\nwill work to select `&quot;true&quot;` *provided that you change your XML by defining the `at` namespace prefix in your XML (preferable)*,\r\n\r\n    &lt;root xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n          xmlns:at=&quot;http://example.com/at&quot;&gt;\r\n      &lt;row&gt;\r\n        &lt;ELEMENT1 at:it=&quot;true&quot;&gt;W&lt;/ELEMENT1&gt;------\r\n        &lt;ELEMENT2&gt;IN&lt;/ELEMENT2&gt;\r\n        &lt;ELEMENT3&gt;RP&lt;/ELEMENT3&gt;\r\n        &lt;ELEMENT4&gt;KKK&lt;/ELEMENT4&gt;\r\n      &lt;/row&gt;\r\n      &lt;row&gt;\r\n        &lt;ELEMENT1 ac&#243;n=&#39;sys&#39;&gt;2&lt;/ELEMENT1&gt;------\r\n        &lt;ELEMENT2&gt;ARQ&lt;/ELEMENT2&gt;\r\n        &lt;ELEMENT3&gt;MR&lt;/ELEMENT3&gt;\r\n        &lt;ELEMENT4&gt;AC&lt;/ELEMENT4&gt;\r\n      &lt;/row&gt;\r\n      &lt;row&gt;\r\n         &lt;ELEMENT1&gt;3&lt;/ELEMENT1&gt;\r\n        &lt;ELEMENT2&gt;I&lt;/ELEMENT2&gt;\r\n        &lt;ELEMENT3 at:it=&quot;true&quot; &gt;RP&lt;/ELEMENT3&gt;------\r\n        &lt;ELEMENT4&gt;KKK&lt;/ELEMENT4&gt;\r\n      &lt;/row&gt;\r\n      &lt;row&gt;\r\n        &lt;ELEMENT1&gt;1&lt;/ELEMENT1&gt;\r\n        &lt;ELEMENT2&gt;CC&lt;/ELEMENT2&gt;\r\n        &lt;ELEMENT3&gt;XX&lt;/ELEMENT3&gt;\r\n        &lt;ELEMENT4 el&#233;ct=&#39;false&#39; &gt;I&lt;/ELEMENT4&gt;------\r\n      &lt;/row&gt;\r\n      &lt;row&gt;\r\n         &lt;ELEMENT1&gt;12&lt;/ELEMENT1&gt;\r\n        &lt;ELEMENT2 at:it=&quot;true&quot; &gt;IN&lt;/ELEMENT2&gt;------\r\n        &lt;ELEMENT3&gt;3&lt;/ELEMENT3&gt;\r\n        &lt;ELEMENT4&gt;&lt;/ELEMENT4&gt;\r\n      &lt;/row&gt;\r\n    &lt;/root&gt;\r\n\r\nor instruct your XML processor to ignore XML namespaces (***not*** a best practice).\r\n\r\nThe next two cases are fine:\r\n\r\n    /root/row/ELEMENT1/@ac&#243;n\r\n\r\nwill select `&quot;sys&quot;` without problem provided your XPath processor supports UTF-8 encoding (and it should).\r\n\r\n\r\n    /root/row/ELEMENT4/@el&#233;ct\r\n\r\nwill select `&quot;false&quot;` similarly.\r\n\r\n\r\n  [1]: https://www.w3.org/TR/REC-xml/#sec-common-syn\r\n  [2]: https://www.w3.org/TR/REC-xml/#xml-names","title":"XPath to access an attribute value with a name that has special characters","body":"<p>Realize that a colon (<code>:</code>) <a href=\"https://www.w3.org/TR/REC-xml/#sec-common-syn\" rel=\"nofollow\"><strong><em>should</em></strong></a> only be used in an element or attribute name if part of namespace prefix:</p>\n\n<blockquote>\n  <p><strong>Note</strong>:</p>\n  \n  <p>The Namespaces in XML Recommendation <a href=\"https://www.w3.org/TR/REC-xml/#xml-names\" rel=\"nofollow\">[XML Names]</a> assigns a meaning to\n  names containing colon characters. Therefore, authors should not use\n  the colon in XML names except for namespace purposes, but XML\n  processors must accept the colon as a name character.</p>\n</blockquote>\n\n<p>So,</p>\n\n<pre><code>/root/row/ELEMENT1/@at:it\n</code></pre>\n\n<p>will work to select <code>\"true\"</code> <em>provided that you change your XML by defining the <code>at</code> namespace prefix in your XML (preferable)</em>,</p>\n\n<pre><code>&lt;root xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n      xmlns:at=\"http://example.com/at\"&gt;\n  &lt;row&gt;\n    &lt;ELEMENT1 at:it=\"true\"&gt;W&lt;/ELEMENT1&gt;------\n    &lt;ELEMENT2&gt;IN&lt;/ELEMENT2&gt;\n    &lt;ELEMENT3&gt;RP&lt;/ELEMENT3&gt;\n    &lt;ELEMENT4&gt;KKK&lt;/ELEMENT4&gt;\n  &lt;/row&gt;\n  &lt;row&gt;\n    &lt;ELEMENT1 acón='sys'&gt;2&lt;/ELEMENT1&gt;------\n    &lt;ELEMENT2&gt;ARQ&lt;/ELEMENT2&gt;\n    &lt;ELEMENT3&gt;MR&lt;/ELEMENT3&gt;\n    &lt;ELEMENT4&gt;AC&lt;/ELEMENT4&gt;\n  &lt;/row&gt;\n  &lt;row&gt;\n     &lt;ELEMENT1&gt;3&lt;/ELEMENT1&gt;\n    &lt;ELEMENT2&gt;I&lt;/ELEMENT2&gt;\n    &lt;ELEMENT3 at:it=\"true\" &gt;RP&lt;/ELEMENT3&gt;------\n    &lt;ELEMENT4&gt;KKK&lt;/ELEMENT4&gt;\n  &lt;/row&gt;\n  &lt;row&gt;\n    &lt;ELEMENT1&gt;1&lt;/ELEMENT1&gt;\n    &lt;ELEMENT2&gt;CC&lt;/ELEMENT2&gt;\n    &lt;ELEMENT3&gt;XX&lt;/ELEMENT3&gt;\n    &lt;ELEMENT4 eléct='false' &gt;I&lt;/ELEMENT4&gt;------\n  &lt;/row&gt;\n  &lt;row&gt;\n     &lt;ELEMENT1&gt;12&lt;/ELEMENT1&gt;\n    &lt;ELEMENT2 at:it=\"true\" &gt;IN&lt;/ELEMENT2&gt;------\n    &lt;ELEMENT3&gt;3&lt;/ELEMENT3&gt;\n    &lt;ELEMENT4&gt;&lt;/ELEMENT4&gt;\n  &lt;/row&gt;\n&lt;/root&gt;\n</code></pre>\n\n<p>or instruct your XML processor to ignore XML namespaces (<strong><em>not</em></strong> a best practice).</p>\n\n<p>The next two cases are fine:</p>\n\n<pre><code>/root/row/ELEMENT1/@acón\n</code></pre>\n\n<p>will select <code>\"sys\"</code> without problem provided your XPath processor supports UTF-8 encoding (and it should).</p>\n\n<pre><code>/root/row/ELEMENT4/@eléct\n</code></pre>\n\n<p>will select <code>\"false\"</code> similarly.</p>\n"},{"tags":[],"owner":{"account_id":208830,"reputation":10240,"user_id":459557,"display_name":"vanje"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1467577653,"creation_date":1467577653,"answer_id":38174038,"question_id":38173348,"body_markdown":"I tried it with Java 6 and had no problems to access attributes with accents. The colon is a special case, because it is used to denote element/attribute names with namespace prefixes. The XML doesn&#39;t use namespaces otherwise there were a namespace declaration for prefix `at`. \r\n\r\nThe XML parser has a switch to treat colons as part of the name but the XPath engine is always namespace aware. But with a little trick it is also possible:\r\n\r\n    File xmlFile = new File(&quot;in.xml&quot;);\r\n    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\r\n    // Parse without namespaces. Otherwise parsing leads to an error \r\n    // because there is no namespace declaration for prefix &#39;at&#39;.\r\n    factory.setNamespaceAware(false);\r\n    DocumentBuilder builder = factory.newDocumentBuilder();\r\n    Document doc = builder.parse(xmlFile);\r\n\r\n    XPathFactory xPathfactory = XPathFactory.newInstance();\r\n    XPath xpath = xPathfactory.newXPath();\r\n    \r\n    XPathExpression expr1 = xpath.compile(&quot;/root/row/ELEMENT1/@ac&#243;n&quot;);\r\n    //XPathExpression expr2 = xpath.compile(&quot;/root/row/ELEMENT1/@at:it&quot;);  Doesn&#39;t work!\r\n    XPathExpression expr2 = xpath.compile(&quot;/root/row/ELEMENT1/@*[name() = &#39;at:it&#39;]&quot;);\r\n    XPathExpression expr3 = xpath.compile(&quot;/root/row/ELEMENT4/@el&#233;ct&quot;);\r\n\r\n    System.out.println((String) expr1.evaluate(doc, XPathConstants.STRING));\r\n    System.out.println((String) expr2.evaluate(doc, XPathConstants.STRING));\r\n    System.out.println((String) expr3.evaluate(doc, XPathConstants.STRING));\r\n\r\n\r\nThe output is:\r\n\r\n    sys\r\n    true\r\n    false","title":"XPath to access an attribute value with a name that has special characters","body":"<p>I tried it with Java 6 and had no problems to access attributes with accents. The colon is a special case, because it is used to denote element/attribute names with namespace prefixes. The XML doesn't use namespaces otherwise there were a namespace declaration for prefix <code>at</code>. </p>\n\n<p>The XML parser has a switch to treat colons as part of the name but the XPath engine is always namespace aware. But with a little trick it is also possible:</p>\n\n<pre><code>File xmlFile = new File(\"in.xml\");\nDocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\n// Parse without namespaces. Otherwise parsing leads to an error \n// because there is no namespace declaration for prefix 'at'.\nfactory.setNamespaceAware(false);\nDocumentBuilder builder = factory.newDocumentBuilder();\nDocument doc = builder.parse(xmlFile);\n\nXPathFactory xPathfactory = XPathFactory.newInstance();\nXPath xpath = xPathfactory.newXPath();\n\nXPathExpression expr1 = xpath.compile(\"/root/row/ELEMENT1/@acón\");\n//XPathExpression expr2 = xpath.compile(\"/root/row/ELEMENT1/@at:it\");  Doesn't work!\nXPathExpression expr2 = xpath.compile(\"/root/row/ELEMENT1/@*[name() = 'at:it']\");\nXPathExpression expr3 = xpath.compile(\"/root/row/ELEMENT4/@eléct\");\n\nSystem.out.println((String) expr1.evaluate(doc, XPathConstants.STRING));\nSystem.out.println((String) expr2.evaluate(doc, XPathConstants.STRING));\nSystem.out.println((String) expr3.evaluate(doc, XPathConstants.STRING));\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>sys\ntrue\nfalse\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15990918,"reputation":1,"user_id":11540144,"display_name":"Sofia smile"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634724169,"creation_date":1634724169,"answer_id":69643980,"question_id":38173348,"body_markdown":"1. first get the attributes from your nodes and then check their name.\r\n2. Something like:\r\n ` XPath xpath = XPathFactory.newInstance().newXPath();\r\n      NodeList nodes = (NodeList) xpath.evaluate(filteringExpression, xmlDocument,                         XPathConstants.NODESET);`\r\n    \r\n\r\n3. Then iterate through nodes and for each node get its attribute:\r\n       ` Node node = nodes.item(idx);\r\n        NamedNodeMap nl = node.getAttributes();`\r\n4. Then iterate through attributes and if the name matches ,get its value:\r\n       ` Attr attr = (Attr) nl.item(i);\r\n        if(attr.getName().equals(...))\r\n        String attributeValue = attr.getValue();`\r\n","title":"XPath to access an attribute value with a name that has special characters","body":"<ol>\n<li><p>first get the attributes from your nodes and then check their name.</p>\n</li>\n<li><p>Something like:\n<code> XPath xpath = XPathFactory.newInstance().newXPath(); NodeList nodes = (NodeList) xpath.evaluate(filteringExpression, xmlDocument,                         XPathConstants.NODESET);</code></p>\n</li>\n<li><p>Then iterate through nodes and for each node get its attribute:\n<code> Node node = nodes.item(idx); NamedNodeMap nl = node.getAttributes();</code></p>\n</li>\n<li><p>Then iterate through attributes and if the name matches ,get its value:\n<code> Attr attr = (Attr) nl.item(i); if(attr.getName().equals(...)) String attributeValue = attr.getValue();</code></p>\n</li>\n</ol>\n"}],"owner":{"account_id":8185157,"reputation":69,"user_id":6161189,"accept_rate":0,"display_name":"Angel Picallo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1896,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":3,"score":4,"last_activity_date":1634724169,"creation_date":1467572391,"question_id":38173348,"body_markdown":"I&#39;m trying to access to attribute value, but the attribute name has special characters, for example:\r\n\r\n    &lt;root xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;\r\n      &lt;row&gt;\r\n        &lt;ELEMENT1 at:it=&quot;true&quot;&gt;W&lt;/ELEMENT1&gt;------\r\n        &lt;ELEMENT2&gt;IN&lt;/ELEMENT2&gt;\r\n        &lt;ELEMENT3&gt;RP&lt;/ELEMENT3&gt;\r\n        &lt;ELEMENT4&gt;KKK&lt;/ELEMENT4&gt;\r\n      &lt;/row&gt;\r\n      &lt;row&gt;\r\n        &lt;ELEMENT1 ac&#243;n=&#39;sys&#39;&gt;2&lt;/ELEMENT1&gt;------\r\n        &lt;ELEMENT2&gt;ARQ&lt;/ELEMENT2&gt;\r\n        &lt;ELEMENT3&gt;MR&lt;/ELEMENT3&gt;\r\n        &lt;ELEMENT4&gt;AC&lt;/ELEMENT4&gt;\r\n      &lt;/row&gt;\r\n      &lt;row&gt;\r\n         &lt;ELEMENT1&gt;3&lt;/ELEMENT1&gt;\r\n        &lt;ELEMENT2&gt;I&lt;/ELEMENT2&gt;\r\n        &lt;ELEMENT3 at:it=&quot;true&quot; &gt;RP&lt;/ELEMENT3&gt;------\r\n        &lt;ELEMENT4&gt;KKK&lt;/ELEMENT4&gt;\r\n      &lt;/row&gt;\r\n      &lt;row&gt;\r\n        &lt;ELEMENT1&gt;1&lt;/ELEMENT1&gt;\r\n        &lt;ELEMENT2&gt;CC&lt;/ELEMENT2&gt;\r\n        &lt;ELEMENT3&gt;XX&lt;/ELEMENT3&gt;\r\n        &lt;ELEMENT4 el&#233;ct=&#39;false&#39; &gt;I&lt;/ELEMENT4&gt;------\r\n      &lt;/row&gt;\r\n      &lt;row&gt;\r\n         &lt;ELEMENT1&gt;12&lt;/ELEMENT1&gt;\r\n        &lt;ELEMENT2 at:it=&quot;true&quot; &gt;IN&lt;/ELEMENT2&gt;------\r\n        &lt;ELEMENT3&gt;3&lt;/ELEMENT3&gt;\r\n        &lt;ELEMENT4&gt;&lt;/ELEMENT4&gt;\r\n      &lt;/row&gt;\r\n    &lt;/root&gt;\r\n\r\nif I change the names of the attributes and remove them special characters, I can access them:\r\n\r\n    at:it ------&gt; atit\r\n    Ac&#243;n ------&gt; Acon\r\n    el&#233;ctr ------&gt; elect\r\n\r\nbut attribute names with special characters I can not access them with XPath query expression.\r\n\r\nHow I can access an XML file to values of attributes with names that have special characters?\r\n\r\nTo transform the XML file to DOM I used Java6, javax.xml.*, org.w3c.dom.*\r\n","title":"XPath to access an attribute value with a name that has special characters","body":"<p>I'm trying to access to attribute value, but the attribute name has special characters, for example:</p>\n\n<pre><code>&lt;root xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"&gt;\n  &lt;row&gt;\n    &lt;ELEMENT1 at:it=\"true\"&gt;W&lt;/ELEMENT1&gt;------\n    &lt;ELEMENT2&gt;IN&lt;/ELEMENT2&gt;\n    &lt;ELEMENT3&gt;RP&lt;/ELEMENT3&gt;\n    &lt;ELEMENT4&gt;KKK&lt;/ELEMENT4&gt;\n  &lt;/row&gt;\n  &lt;row&gt;\n    &lt;ELEMENT1 acón='sys'&gt;2&lt;/ELEMENT1&gt;------\n    &lt;ELEMENT2&gt;ARQ&lt;/ELEMENT2&gt;\n    &lt;ELEMENT3&gt;MR&lt;/ELEMENT3&gt;\n    &lt;ELEMENT4&gt;AC&lt;/ELEMENT4&gt;\n  &lt;/row&gt;\n  &lt;row&gt;\n     &lt;ELEMENT1&gt;3&lt;/ELEMENT1&gt;\n    &lt;ELEMENT2&gt;I&lt;/ELEMENT2&gt;\n    &lt;ELEMENT3 at:it=\"true\" &gt;RP&lt;/ELEMENT3&gt;------\n    &lt;ELEMENT4&gt;KKK&lt;/ELEMENT4&gt;\n  &lt;/row&gt;\n  &lt;row&gt;\n    &lt;ELEMENT1&gt;1&lt;/ELEMENT1&gt;\n    &lt;ELEMENT2&gt;CC&lt;/ELEMENT2&gt;\n    &lt;ELEMENT3&gt;XX&lt;/ELEMENT3&gt;\n    &lt;ELEMENT4 eléct='false' &gt;I&lt;/ELEMENT4&gt;------\n  &lt;/row&gt;\n  &lt;row&gt;\n     &lt;ELEMENT1&gt;12&lt;/ELEMENT1&gt;\n    &lt;ELEMENT2 at:it=\"true\" &gt;IN&lt;/ELEMENT2&gt;------\n    &lt;ELEMENT3&gt;3&lt;/ELEMENT3&gt;\n    &lt;ELEMENT4&gt;&lt;/ELEMENT4&gt;\n  &lt;/row&gt;\n&lt;/root&gt;\n</code></pre>\n\n<p>if I change the names of the attributes and remove them special characters, I can access them:</p>\n\n<pre><code>at:it ------&gt; atit\nAcón ------&gt; Acon\neléctr ------&gt; elect\n</code></pre>\n\n<p>but attribute names with special characters I can not access them with XPath query expression.</p>\n\n<p>How I can access an XML file to values of attributes with names that have special characters?</p>\n\n<p>To transform the XML file to DOM I used Java6, javax.xml.<em>, org.w3c.dom.</em></p>\n"},{"tags":["java","selenium","selenium-webdriver","selenium-grid","remotewebdriver"],"answers":[{"tags":[],"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1593181126,"creation_date":1593178856,"answer_id":62596057,"question_id":62595459,"body_markdown":"This error message...\r\n\r\n\tException in thread &quot;main&quot; org.openqa.selenium.InvalidArgumentException: Attempting to upload file &#39;C:\\daten\\test2.xml&#39; which does not exist.\r\n\r\n...implies that the desired file doesn&#39;t exist on the client machine.\r\n\r\n\r\n----------\r\n\r\n\r\nLocal file detector\r\n-------------------\r\nThe [Local File Detector](https://www.selenium.dev/documentation/en/remote_webdriver/remote_webdriver_client/#local-file-detector) allows the transfer of files from the client machine to the remote server. In case a test needs to upload a file to a web application, a remote [WebDriver](https://stackoverflow.com/questions/48079120/what-is-the-difference-between-chromedriver-and-webdriver-in-selenium/48080871#48080871) can automatically transfer the file from the local machine to the remote web server during runtime. This allows the file to be uploaded from the remote machine running the test. It is not enabled by default and can be enabled as follows:\r\n\r\n- _Java_:\r\n\r\n\t  driver.setFileDetector(new LocalFileDetector());\r\n\r\n- _Python_:\r\n\r\n\t  from selenium.webdriver.remote.file_detector import LocalFileDetector\r\n\r\n\t  driver.file_detector = LocalFileDetector()\r\n\r\n- _C#_:\r\n\r\n\t  var allowsDetection = this.driver as IAllowsFileDetection;\r\n\t  if (allowsDetection != null)\r\n\t  {\r\n\t     allowsDetection.FileDetector = new LocalFileDetector();\r\n\t  }\r\n\r\n- _Ruby_:\r\n\r\n\t  @driver.file_detector = lambda do |args|\r\n\t    # args =&gt; [&quot;/path/to/file&quot;]\r\n\t    str = args.first.to_s\r\n\t    str if File.exist?(str)\r\n\t  end\r\n\r\n- _JavaScript_:\r\n\r\n\t  var remote = require(&#39;selenium-webdriver/remote&#39;);\r\n\t  driver.setFileDetector(new remote.FileDetector); \r\n\r\n- _Kotlin_:\r\n\r\n\t  driver.fileDetector = LocalFileDetector()\r\n\r\n\r\n----------\r\n\r\n\r\n\t  \r\nThis usecase\r\n------------\r\nIf you are running your tests on [Selenium Grid](https://stackoverflow.com/questions/59647961/what-is-the-exact-purpose-of-selenium-grid/59648301#59648301) then you need to let your remote driver know that the file that needs to be uploaded is residing on the local machine and not on remote machine. In those cases, to upload a file from the client machine to the remote server, _WebDriver_ can automatically transfer the file from the local machine to the remote web server during runtime you can use the following code block:\r\n\r\n\tWebElement addFile = driver.findElement(By.xpath(&quot;//input[@type=&#39;file&#39;]&quot;));\r\n\t((RemoteWebElement)addFile).setFileDetector(new LocalFileDetector());\r\n\taddFile.sendKeys(&quot;C:\\\\daten\\\\test2.xml&quot;);\r\n\r\n\r\n----------\r\n\r\n\r\nOutro\r\n-----\r\n[Selecting and uploading files while running your tests on Selenium Grid](https://muthutechno.wordpress.com/2014/07/09/uploading-files-in-selenium-webdriver/)","title":"How to upload a file by transfering the file from the local machine to the remote web server using Selenium Grid","body":"<p>This error message...</p>\n<pre><code>Exception in thread &quot;main&quot; org.openqa.selenium.InvalidArgumentException: Attempting to upload file 'C:\\daten\\test2.xml' which does not exist.\n</code></pre>\n<p>...implies that the desired file doesn't exist on the client machine.</p>\n<hr />\n<h2>Local file detector</h2>\n<p>The <a href=\"https://www.selenium.dev/documentation/en/remote_webdriver/remote_webdriver_client/#local-file-detector\" rel=\"noreferrer\">Local File Detector</a> allows the transfer of files from the client machine to the remote server. In case a test needs to upload a file to a web application, a remote <a href=\"https://stackoverflow.com/questions/48079120/what-is-the-difference-between-chromedriver-and-webdriver-in-selenium/48080871#48080871\">WebDriver</a> can automatically transfer the file from the local machine to the remote web server during runtime. This allows the file to be uploaded from the remote machine running the test. It is not enabled by default and can be enabled as follows:</p>\n<ul>\n<li><p><em>Java</em>:</p>\n<pre><code>driver.setFileDetector(new LocalFileDetector());\n</code></pre>\n</li>\n<li><p><em>Python</em>:</p>\n<pre><code>from selenium.webdriver.remote.file_detector import LocalFileDetector\n\ndriver.file_detector = LocalFileDetector()\n</code></pre>\n</li>\n<li><p><em>C#</em>:</p>\n<pre><code>var allowsDetection = this.driver as IAllowsFileDetection;\nif (allowsDetection != null)\n{\n   allowsDetection.FileDetector = new LocalFileDetector();\n}\n</code></pre>\n</li>\n<li><p><em>Ruby</em>:</p>\n<pre><code>@driver.file_detector = lambda do |args|\n  # args =&gt; [&quot;/path/to/file&quot;]\n  str = args.first.to_s\n  str if File.exist?(str)\nend\n</code></pre>\n</li>\n<li><p><em>JavaScript</em>:</p>\n<pre><code>var remote = require('selenium-webdriver/remote');\ndriver.setFileDetector(new remote.FileDetector); \n</code></pre>\n</li>\n<li><p><em>Kotlin</em>:</p>\n<pre><code>driver.fileDetector = LocalFileDetector()\n</code></pre>\n</li>\n</ul>\n<hr />\n<h2>This usecase</h2>\n<p>If you are running your tests on <a href=\"https://stackoverflow.com/questions/59647961/what-is-the-exact-purpose-of-selenium-grid/59648301#59648301\">Selenium Grid</a> then you need to let your remote driver know that the file that needs to be uploaded is residing on the local machine and not on remote machine. In those cases, to upload a file from the client machine to the remote server, <em>WebDriver</em> can automatically transfer the file from the local machine to the remote web server during runtime you can use the following code block:</p>\n<pre><code>WebElement addFile = driver.findElement(By.xpath(&quot;//input[@type='file']&quot;));\n((RemoteWebElement)addFile).setFileDetector(new LocalFileDetector());\naddFile.sendKeys(&quot;C:\\\\daten\\\\test2.xml&quot;);\n</code></pre>\n<hr />\n<h2>Outro</h2>\n<p><a href=\"https://muthutechno.wordpress.com/2014/07/09/uploading-files-in-selenium-webdriver/\" rel=\"noreferrer\">Selecting and uploading files while running your tests on Selenium Grid</a></p>\n"},{"tags":[],"owner":{"account_id":3624100,"reputation":370,"user_id":3022175,"display_name":"PeterOeClausen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1631697197,"creation_date":1631697197,"answer_id":69190228,"question_id":62595459,"body_markdown":"Thank you @DebanjanB for helping me finding the solution - I&#39;ve upvoted your response, and this is another answer to state it indeed works.\r\n\r\n**My problem:**\r\n\r\nLocally, I was running Selenium tests against a locally running Selenium server (running `selenium-server-4.0.0-beta-4.jar` file), and I was using `chromedriver.exe` file too.\r\n\r\nMy tests (written in TypeScript) that uploaded files using:\r\n\r\n```nodejs\r\nawait (\r\n  await driver.findElement(By.xpath(&quot;//form//input[@id=&#39;upload-input&#39;]&quot;))\r\n).sendKeys(join(__dirname, &quot;testfile.txt&quot;));\r\n```\r\n\r\nRan without problems locally. But in our DevOps pipeline, running Docker using the `selenium/standalone-chrome` image, it was like the driver couldn&#39;t find the file:\r\n\r\n```\r\nInvalidArgumentError: invalid argument: File not found: /home/vsts/work/1/s/selenium/tests/flows/testfile.txt\r\n```\r\n\r\nEven though we had confirmed that the file was indeed found in the correct folder by running:\r\n\r\n```sh\r\n&gt; pwd\r\n/home/vsts/work/1/s\r\n&gt; find . -name testfile.txt\r\n./selenium/tests/flows/testfile.txt\r\n```\r\n\r\nMeaning the file was indeed located at `/home/vsts/work/1/s/selenium/tests/flows/testfile.txt`.\r\n\r\nMy team and I Googled and searched why this was and found @DebanjanB&#39;s answer.\r\n\r\nWhat we didn&#39;t realize was that the `selenium/standalone-chrome` Docker image is running a Selenium Grid server, which is &quot;remote&quot; rather than &quot;local&quot;. And so the driver can&#39;t find the file when running &quot;remote&quot;.\r\n\r\n**The solution**\r\n\r\nWe added \r\n```nodejs\r\ndriver.setFileDetector(new FileDetector());\r\n```\r\n\r\nBefore\r\n```nodejs\r\nawait (\r\n  await driver.findElement(By.xpath(&quot;//form//input[@id=&#39;upload-input&#39;]&quot;))\r\n).sendKeys(join(__dirname, &quot;testfile.txt&quot;));\r\n```\r\n\r\nAnd now our tests pass when running against the docker container in our pipeline too!\r\n\r\nFrom Selenium&#39;s documentation:\r\n\r\n&gt; The Local File Detector allows the transfer of files from the client machine to the remote server. For example, if a test needs to upload a file to a web application, a remote WebDriver can automatically transfer the file from the local machine to the remote web server during runtime. This allows the file to be uploaded from the remote machine running the test.\r\n\r\nSource: https://www.selenium.dev/documentation/webdriver/remote_webdriver/#local-file-detector\r\n\r\nI hope this will help someone struggling with the same problem :-)","title":"How to upload a file by transfering the file from the local machine to the remote web server using Selenium Grid","body":"<p>Thank you @DebanjanB for helping me finding the solution - I've upvoted your response, and this is another answer to state it indeed works.</p>\n<p><strong>My problem:</strong></p>\n<p>Locally, I was running Selenium tests against a locally running Selenium server (running <code>selenium-server-4.0.0-beta-4.jar</code> file), and I was using <code>chromedriver.exe</code> file too.</p>\n<p>My tests (written in TypeScript) that uploaded files using:</p>\n<pre class=\"lang-js prettyprint-override\"><code>await (\n  await driver.findElement(By.xpath(&quot;//form//input[@id='upload-input']&quot;))\n).sendKeys(join(__dirname, &quot;testfile.txt&quot;));\n</code></pre>\n<p>Ran without problems locally. But in our DevOps pipeline, running Docker using the <code>selenium/standalone-chrome</code> image, it was like the driver couldn't find the file:</p>\n<pre><code>InvalidArgumentError: invalid argument: File not found: /home/vsts/work/1/s/selenium/tests/flows/testfile.txt\n</code></pre>\n<p>Even though we had confirmed that the file was indeed found in the correct folder by running:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>&gt; pwd\n/home/vsts/work/1/s\n&gt; find . -name testfile.txt\n./selenium/tests/flows/testfile.txt\n</code></pre>\n<p>Meaning the file was indeed located at <code>/home/vsts/work/1/s/selenium/tests/flows/testfile.txt</code>.</p>\n<p>My team and I Googled and searched why this was and found @DebanjanB's answer.</p>\n<p>What we didn't realize was that the <code>selenium/standalone-chrome</code> Docker image is running a Selenium Grid server, which is &quot;remote&quot; rather than &quot;local&quot;. And so the driver can't find the file when running &quot;remote&quot;.</p>\n<p><strong>The solution</strong></p>\n<p>We added</p>\n<pre class=\"lang-js prettyprint-override\"><code>driver.setFileDetector(new FileDetector());\n</code></pre>\n<p>Before</p>\n<pre class=\"lang-js prettyprint-override\"><code>await (\n  await driver.findElement(By.xpath(&quot;//form//input[@id='upload-input']&quot;))\n).sendKeys(join(__dirname, &quot;testfile.txt&quot;));\n</code></pre>\n<p>And now our tests pass when running against the docker container in our pipeline too!</p>\n<p>From Selenium's documentation:</p>\n<blockquote>\n<p>The Local File Detector allows the transfer of files from the client machine to the remote server. For example, if a test needs to upload a file to a web application, a remote WebDriver can automatically transfer the file from the local machine to the remote web server during runtime. This allows the file to be uploaded from the remote machine running the test.</p>\n</blockquote>\n<p>Source: <a href=\"https://www.selenium.dev/documentation/webdriver/remote_webdriver/#local-file-detector\" rel=\"nofollow noreferrer\">https://www.selenium.dev/documentation/webdriver/remote_webdriver/#local-file-detector</a></p>\n<p>I hope this will help someone struggling with the same problem :-)</p>\n"}],"owner":{"account_id":18938607,"reputation":53,"user_id":13819162,"display_name":"Andreas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10582,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":62596057,"answer_count":2,"score":5,"last_activity_date":1634724152,"creation_date":1593177018,"question_id":62595459,"body_markdown":"File Upload with a Selenium Grid:\r\n\r\n**Code**\r\n``` \r\nimport java.net.MalformedURLException;\r\nimport java.net.URL;\r\nimport java.util.concurrent.TimeUnit;\r\nimport org.openqa.selenium.By;\r\nimport org.openqa.selenium.WebElement;\r\nimport org.openqa.selenium.remote.DesiredCapabilities;\r\nimport org.openqa.selenium.remote.LocalFileDetector;\r\nimport org.openqa.selenium.remote.RemoteWebDriver;\r\n\r\npublic class Main \r\n{\r\n    \r\n    public static void main(String[] args) throws MalformedURLException\r\n    {\r\n          DesiredCapabilities capabilities = DesiredCapabilities.internetExplorer();\r\n          capabilities.setBrowserName(&quot;internet explorer&quot;);\r\n    \r\n          RemoteWebDriver driver = new RemoteWebDriver(new URL(&quot;http://URL:4444/wd/hub&quot;), capabilities);\r\n          driver.setFileDetector(new LocalFileDetector());\r\n          driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);\r\n    \r\n          driver.get(&quot;https://url.de/index.xhtml&quot;);\r\n          driver.findElement(By.xpath(&quot;//*[@id=&#39;form:sdsupload&#39;]/span&quot;)).click();\r\n        \r\n          WebElement addFile = driver.findElement(By.xpath(&quot;//input[@type=&#39;file&#39;]&quot;));\r\n          ((RemoteWebElement) addFile ).setFileDetector(new LocalFileDetector());\r\n          addFile.sendKeys(&quot;C:\\\\daten\\\\test\\\\test2.xml&quot;);\r\n    }\r\n}\r\n``` \r\n\r\n**Exception**\r\n``` \r\nJun 26, 2020 3:47:43 PM org.openqa.selenium.remote.ProtocolHandshake createSession\r\nINFORMATION: Detected dialect: W3C\r\nException in thread &quot;main&quot; org.openqa.selenium.InvalidArgumentException: Attempting to upload file &#39;C:\\daten\\test\\test2.xml&#39; which does not exist.\r\nBuild info: version: &#39;3.141.59&#39;, revision: &#39;e82be7d358&#39;, time: &#39;2018-11-14T08:17:03&#39;\r\nSystem info: host: &#39;xxx&#39;, ip: &#39;xxx&#39;, os.name: &#39;Windows 10&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;10.0&#39;, java.version: &#39;1.8.0_171&#39;\r\nDriver info: org.openqa.selenium.remote.RemoteWebDriver\r\nCapabilities {acceptInsecureCerts: false, browserName: internet explorer, browserVersion: 11, javascriptEnabled: true, pageLoadStrategy: normal, platform: WINDOWS, platformName: WINDOWS, proxy: Proxy(), se:ieOptions: {browserAttachTimeout: 0, elementScrollBehavior: 0, enablePersistentHover: true, ie.browserCommandLineSwitches: , ie.ensureCleanSession: false, ie.fileUploadDialogTimeout: 3000, ie.forceCreateProcessApi: false, ignoreProtectedModeSettings: false, ignoreZoomSetting: false, initialBrowserUrl: http://localhost:5494/, nativeEvents: true, requireWindowFocus: false}, setWindowRect: true, timeouts: {implicit: 0, pageLoad: 300000, script: 30000}, webdriver.remote.sessionid: ae053a22-c088-402e-8de1-f25...}\r\nSession ID: ae053a22-c088-402e-8de1-f25c4398ccbf\r\nat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\r\n    at org.openqa.selenium.remote.http.W3CHttpResponseCodec.createException(W3CHttpResponseCodec.java:187)\r\n    at org.openqa.selenium.remote.http.W3CHttpResponseCodec.decode(W3CHttpResponseCodec.java:122)\r\n    at org.openqa.selenium.remote.http.W3CHttpResponseCodec.decode(W3CHttpResponseCodec.java:49)\r\n    at org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:158)\r\n    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:552)\r\n    at org.openqa.selenium.remote.RemoteWebElement.execute(RemoteWebElement.java:285)\r\n    at org.openqa.selenium.remote.RemoteWebElement.sendKeys(RemoteWebElement.java:106)\r\n    at de.xxx.xxx.keywords.Main.main(Main.java:41)\r\n``` \r\n\r\nThe file exists on the local node, but not on the remote node. If the file is on the remote node, it works great. The File exists on local node, but not on remote node: https://i.stack.imgur.com/f31Wb.png\r\n\r\n**I read this:**\r\n- https://www.selenium.dev/documentation/en/remote_webdriver/remote_webdriver_client/\r\n- https://www.lambdatest.com/blog/how-to-download-upload-files-using-selenium-with-java/\r\n\r\nHow can I pass a file to the remote node? \r\n\r\n**Edit**\r\n\r\nThe same Error with Firefox, IE and Edge Chromium\r\n\r\nFirefox:\r\n``` \r\nException in thread &quot;main&quot; org.openqa.selenium.InvalidArgumentException: File not found: C:\\daten\\test\\test3.xml\r\nBuild info: version: &#39;3.141.59&#39;, revision: &#39;e82be7d358&#39;, time: &#39;2018-11-14T08:17:03&#39;\r\nSystem info: host: &#39;xxx&#39;, ip: &#39;xxx&#39;, os.name: &#39;Windows 10&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;10.0&#39;, java.version: &#39;1.8.0_171&#39;\r\nDriver info: org.openqa.selenium.remote.RemoteWebDriver\r\nCapabilities {acceptInsecureCerts: true, browserName: firefox, browserVersion: 60.5.0, javascriptEnabled: true, moz:accessibilityChecks: false, moz:geckodriverVersion: 0.25.0, moz:headless: false, moz:processID: 624, moz:profile: C:\\Users\\username\\Ap..., moz:useNonSpecCompliantPointerOrigin: false, moz:webdriverClick: true, pageLoadStrategy: normal, platform: XP, platformName: XP, platformVersion: 10.0, rotatable: false, timeouts: {implicit: 0, pageLoad: 300000, script: 30000}, webdriver.remote.sessionid: 8801c61e-6d61-488b-8f86-c0a...}\r\nSession ID: 8801c61e-6d61-488b-8f86-c0a1fb2f2df8\r\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n\tat java.lang.reflect.Constructor.newInstance(Constructor.java:423)\r\n\tat org.openqa.selenium.remote.http.W3CHttpResponseCodec.createException(W3CHttpResponseCodec.java:187)\r\n\tat org.openqa.selenium.remote.http.W3CHttpResponseCodec.decode(W3CHttpResponseCodec.java:122)\r\n\tat org.openqa.selenium.remote.http.W3CHttpResponseCodec.decode(W3CHttpResponseCodec.java:49)\r\n\tat org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:158)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:552)\r\n\tat org.openqa.selenium.remote.RemoteWebElement.execute(RemoteWebElement.java:285)\r\n\tat org.openqa.selenium.remote.RemoteWebElement.sendKeys(RemoteWebElement.java:106)\r\n\tat de.xxx.xxx.keywords.Main.main(Main.java:52)\r\n``` \r\n\r\nWhen I copy the file to the remote client it works great again :(\r\n\r\nDebug:\r\n[Debug with Firefox][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/NLnSw.png","title":"How to upload a file by transfering the file from the local machine to the remote web server using Selenium Grid","body":"<p>File Upload with a Selenium Grid:</p>\n<p><strong>Code</strong></p>\n<pre><code>import java.net.MalformedURLException;\nimport java.net.URL;\nimport java.util.concurrent.TimeUnit;\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.WebElement;\nimport org.openqa.selenium.remote.DesiredCapabilities;\nimport org.openqa.selenium.remote.LocalFileDetector;\nimport org.openqa.selenium.remote.RemoteWebDriver;\n\npublic class Main \n{\n    \n    public static void main(String[] args) throws MalformedURLException\n    {\n          DesiredCapabilities capabilities = DesiredCapabilities.internetExplorer();\n          capabilities.setBrowserName(&quot;internet explorer&quot;);\n    \n          RemoteWebDriver driver = new RemoteWebDriver(new URL(&quot;http://URL:4444/wd/hub&quot;), capabilities);\n          driver.setFileDetector(new LocalFileDetector());\n          driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);\n    \n          driver.get(&quot;https://url.de/index.xhtml&quot;);\n          driver.findElement(By.xpath(&quot;//*[@id='form:sdsupload']/span&quot;)).click();\n        \n          WebElement addFile = driver.findElement(By.xpath(&quot;//input[@type='file']&quot;));\n          ((RemoteWebElement) addFile ).setFileDetector(new LocalFileDetector());\n          addFile.sendKeys(&quot;C:\\\\daten\\\\test\\\\test2.xml&quot;);\n    }\n}\n</code></pre>\n<p><strong>Exception</strong></p>\n<pre><code>Jun 26, 2020 3:47:43 PM org.openqa.selenium.remote.ProtocolHandshake createSession\nINFORMATION: Detected dialect: W3C\nException in thread &quot;main&quot; org.openqa.selenium.InvalidArgumentException: Attempting to upload file 'C:\\daten\\test\\test2.xml' which does not exist.\nBuild info: version: '3.141.59', revision: 'e82be7d358', time: '2018-11-14T08:17:03'\nSystem info: host: 'xxx', ip: 'xxx', os.name: 'Windows 10', os.arch: 'amd64', os.version: '10.0', java.version: '1.8.0_171'\nDriver info: org.openqa.selenium.remote.RemoteWebDriver\nCapabilities {acceptInsecureCerts: false, browserName: internet explorer, browserVersion: 11, javascriptEnabled: true, pageLoadStrategy: normal, platform: WINDOWS, platformName: WINDOWS, proxy: Proxy(), se:ieOptions: {browserAttachTimeout: 0, elementScrollBehavior: 0, enablePersistentHover: true, ie.browserCommandLineSwitches: , ie.ensureCleanSession: false, ie.fileUploadDialogTimeout: 3000, ie.forceCreateProcessApi: false, ignoreProtectedModeSettings: false, ignoreZoomSetting: false, initialBrowserUrl: http://localhost:5494/, nativeEvents: true, requireWindowFocus: false}, setWindowRect: true, timeouts: {implicit: 0, pageLoad: 300000, script: 30000}, webdriver.remote.sessionid: ae053a22-c088-402e-8de1-f25...}\nSession ID: ae053a22-c088-402e-8de1-f25c4398ccbf\nat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\n    at org.openqa.selenium.remote.http.W3CHttpResponseCodec.createException(W3CHttpResponseCodec.java:187)\n    at org.openqa.selenium.remote.http.W3CHttpResponseCodec.decode(W3CHttpResponseCodec.java:122)\n    at org.openqa.selenium.remote.http.W3CHttpResponseCodec.decode(W3CHttpResponseCodec.java:49)\n    at org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:158)\n    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:552)\n    at org.openqa.selenium.remote.RemoteWebElement.execute(RemoteWebElement.java:285)\n    at org.openqa.selenium.remote.RemoteWebElement.sendKeys(RemoteWebElement.java:106)\n    at de.xxx.xxx.keywords.Main.main(Main.java:41)\n</code></pre>\n<p>The file exists on the local node, but not on the remote node. If the file is on the remote node, it works great. The File exists on local node, but not on remote node: <a href=\"https://i.stack.imgur.com/f31Wb.png\" rel=\"noreferrer\">https://i.stack.imgur.com/f31Wb.png</a></p>\n<p><strong>I read this:</strong></p>\n<ul>\n<li><a href=\"https://www.selenium.dev/documentation/en/remote_webdriver/remote_webdriver_client/\" rel=\"noreferrer\">https://www.selenium.dev/documentation/en/remote_webdriver/remote_webdriver_client/</a></li>\n<li><a href=\"https://www.lambdatest.com/blog/how-to-download-upload-files-using-selenium-with-java/\" rel=\"noreferrer\">https://www.lambdatest.com/blog/how-to-download-upload-files-using-selenium-with-java/</a></li>\n</ul>\n<p>How can I pass a file to the remote node?</p>\n<p><strong>Edit</strong></p>\n<p>The same Error with Firefox, IE and Edge Chromium</p>\n<p>Firefox:</p>\n<pre><code>Exception in thread &quot;main&quot; org.openqa.selenium.InvalidArgumentException: File not found: C:\\daten\\test\\test3.xml\nBuild info: version: '3.141.59', revision: 'e82be7d358', time: '2018-11-14T08:17:03'\nSystem info: host: 'xxx', ip: 'xxx', os.name: 'Windows 10', os.arch: 'amd64', os.version: '10.0', java.version: '1.8.0_171'\nDriver info: org.openqa.selenium.remote.RemoteWebDriver\nCapabilities {acceptInsecureCerts: true, browserName: firefox, browserVersion: 60.5.0, javascriptEnabled: true, moz:accessibilityChecks: false, moz:geckodriverVersion: 0.25.0, moz:headless: false, moz:processID: 624, moz:profile: C:\\Users\\username\\Ap..., moz:useNonSpecCompliantPointerOrigin: false, moz:webdriverClick: true, pageLoadStrategy: normal, platform: XP, platformName: XP, platformVersion: 10.0, rotatable: false, timeouts: {implicit: 0, pageLoad: 300000, script: 30000}, webdriver.remote.sessionid: 8801c61e-6d61-488b-8f86-c0a...}\nSession ID: 8801c61e-6d61-488b-8f86-c0a1fb2f2df8\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\n    at org.openqa.selenium.remote.http.W3CHttpResponseCodec.createException(W3CHttpResponseCodec.java:187)\n    at org.openqa.selenium.remote.http.W3CHttpResponseCodec.decode(W3CHttpResponseCodec.java:122)\n    at org.openqa.selenium.remote.http.W3CHttpResponseCodec.decode(W3CHttpResponseCodec.java:49)\n    at org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:158)\n    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:552)\n    at org.openqa.selenium.remote.RemoteWebElement.execute(RemoteWebElement.java:285)\n    at org.openqa.selenium.remote.RemoteWebElement.sendKeys(RemoteWebElement.java:106)\n    at de.xxx.xxx.keywords.Main.main(Main.java:52)\n</code></pre>\n<p>When I copy the file to the remote client it works great again :(</p>\n<p>Debug:\n<a href=\"https://i.stack.imgur.com/NLnSw.png\" rel=\"noreferrer\">Debug with Firefox</a></p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":12400527,"reputation":425,"user_id":9038008,"display_name":"Shikhar Chaudhary"},"score":0,"creation_date":1609216126,"post_id":65486942,"comment_id":115778739,"body_markdown":"what is the content type for the POST API?\nAlso, what is the structure of your customer class?","body":"what is the content type for the POST API? Also, what is the structure of your customer class?"},{"owner":{"account_id":15723245,"reputation":99,"user_id":11345613,"display_name":"ashil"},"score":0,"creation_date":1609216517,"post_id":65486942,"comment_id":115778805,"body_markdown":"I have added the model above.Content type of POST api is &quot; MediaType.APPLICATION_JSON &quot;","body":"I have added the model above.Content type of POST api is &quot; MediaType.APPLICATION_JSON &quot;"}],"answers":[{"tags":[],"owner":{"account_id":9451216,"reputation":301,"user_id":7028016,"display_name":"Zack"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1634723762,"creation_date":1609215050,"answer_id":65487191,"question_id":65486942,"body_markdown":"You need to mock the `save()` method on your repository as well. Returning `null` from the `Optional.map()` method will return an empty Optional, which will cause the `orElseThrow()` to execute its supplier.\r\n\r\nSee [Optional.map][1].\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html#map-java.util.function.Function-","title":"my unit test case is failing for the PUT api controller in spring boot","body":"<p>You need to mock the <code>save()</code> method on your repository as well. Returning <code>null</code> from the <code>Optional.map()</code> method will return an empty Optional, which will cause the <code>orElseThrow()</code> to execute its supplier.</p>\n<p>See <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html#map-java.util.function.Function-\" rel=\"nofollow noreferrer\">Optional.map</a>.</p>\n"}],"owner":{"account_id":15723245,"reputation":99,"user_id":11345613,"display_name":"ashil"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":205,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":65487191,"answer_count":1,"score":0,"last_activity_date":1634723762,"creation_date":1609212170,"question_id":65486942,"body_markdown":"i have created a Basic CRUD api.i have written test cases for all the api&#39;s ,Every test cases works fine but not PUT. It always gives me Resource Not Found Error.\r\n\r\n**model**\r\n\r\n    package com.example.crudrestapi.model;\r\n    \r\n    \r\n    import lombok.AllArgsConstructor;\r\n    import lombok.Builder;\r\n    import lombok.Data;\r\n    import lombok.NoArgsConstructor;\r\n    \r\n    import javax.persistence.Entity;\r\n    import javax.persistence.GeneratedValue;\r\n    import javax.persistence.Id;\r\n    \r\n    @Data\r\n    @Entity\r\n    @Builder\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    public class Customer {\r\n    \r\n        @Id\r\n        @GeneratedValue private Long id;\r\n        private String name;\r\n        private String address;\r\n        private String phoneNumber;\r\n        private String gstin;\r\n        private float outstandingBalance;\r\n    }\r\n\r\n\r\n**Test**\r\n\r\n    @ExtendWith(SpringExtension.class)\r\n    @WebMvcTest(CrudController.class)\r\n    class CrudControllerTest {\r\n    \r\n        @Autowired\r\n        MockMvc mockMvc;\r\n    \r\n        @MockBean\r\n        CustomerRepo customerRepo;\r\n        \r\n        @Test\r\n        void putApiTest() throws Exception {\r\n\r\n            Customer customer = Customer.builder().build();\r\n            given(customerRepo.findById(Long.parseLong(&quot;1&quot;))).willReturn(Optional.of(customer));\r\n\r\n            mockMvc.perform(put(&quot;/customers/{customerId}&quot;, 1)\r\n                    .content(&quot;{ \\&quot;name\\&quot; : \\&quot;test\\&quot;, \\&quot;address\\&quot; : \\&quot;test\\&quot; }&quot;)\r\n                    .contentType(MediaType.APPLICATION_JSON))\r\n                    .andExpect(status().isOk());\r\n        }\r\n\r\n**controller**\r\n  \r\n\r\n    @PutMapping(&quot;customers/{customerId}&quot;)\r\n        public Customer updateCustomer(@RequestBody Customer newCustomer, @PathVariable Long customerId) throws ResourceNotFoundException {\r\n    \r\n            return customerRepo.findById(customerId)\r\n                    .map(customer -&gt; {\r\n                        if (newCustomer.getName() != null)\r\n                            customer.setName(newCustomer.getName());\r\n                        if (newCustomer.getGstin() != null)\r\n                            customer.setGstin(newCustomer.getGstin());\r\n                        if (newCustomer.getPhoneNumber() != null)\r\n                            customer.setPhoneNumber(newCustomer.getPhoneNumber());\r\n                        if (newCustomer.getAddress() != null)\r\n                            customer.setAddress(newCustomer.getAddress());\r\n                        if (newCustomer.getOutstandingBalance() != 0.0f)\r\n                            customer.setOutstandingBalance(newCustomer.getOutstandingBalance());\r\n                        return customerRepo.save(customer);\r\n                    }).orElseThrow( () -&gt;new ResourceNotFoundException());\r\n    \r\n        }\r\n\r\n\r\n\r\n **Error i&#39;m Getting**\r\n\r\n    2020-12-29 08:36:04.789  INFO 2564 --- [           main] c.e.c.controller.CrudControllerTest      : Starting CrudControllerTest using Java 11.0.9 on Acer-Aspire7 with PID 2564 (started by Ashil in C:\\Users\\Ashil\\Documents\\Java+SpringBoot\\crudRestApi)\r\n    2020-12-29 08:36:04.792  INFO 2564 --- [           main] c.e.c.controller.CrudControllerTest      : No active profile set, falling back to default profiles: default\r\n    2020-12-29 08:36:06.607  INFO 2564 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService &#39;applicationTaskExecutor&#39;\r\n    2020-12-29 08:36:07.103  INFO 2564 --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet &#39;&#39;\r\n    2020-12-29 08:36:07.103  INFO 2564 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet &#39;&#39;\r\n    2020-12-29 08:36:07.106  INFO 2564 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 3 ms\r\n    2020-12-29 08:36:07.155  INFO 2564 --- [           main] c.e.c.controller.CrudControllerTest      : Started CrudControllerTest in 2.943 seconds (JVM running for 5.294)\r\n    \r\n    MockHttpServletRequest:\r\n          HTTP Method = PUT\r\n          Request URI = /customers/1\r\n           Parameters = {}\r\n              Headers = [Content-Type:&quot;application/json;charset=UTF-8&quot;, Content-Length:&quot;39&quot;]\r\n                 Body = { &quot;name&quot; : &quot;test&quot;, &quot;address&quot; : &quot;test&quot; }\r\n        Session Attrs = {}\r\n    \r\n    Handler:\r\n                 Type = com.example.crudrestapi.controller.CrudController\r\n               Method = com.example.crudrestapi.controller.CrudController#updateCustomer(Customer, Long)\r\n    \r\n    Async:\r\n        Async started = false\r\n         Async result = null\r\n    \r\n    Resolved Exception:\r\n                 Type = java.lang.IllegalStateException\r\n    \r\n    ModelAndView:\r\n            View name = null\r\n                 View = null\r\n                Model = null\r\n    \r\n    FlashMap:\r\n           Attributes = null\r\n    \r\n    MockHttpServletResponse:\r\n               Status = 404\r\n        Error message = null\r\n              Headers = [Content-Type:&quot;text/plain;charset=UTF-8&quot;, Content-Length:&quot;18&quot;]\r\n         Content type = text/plain;charset=UTF-8\r\n                 Body = Resource Not Found\r\n        Forwarded URL = null\r\n       Redirected URL = null\r\n              Cookies = []\r\n    \r\n    java.lang.AssertionError: Status expected:&lt;200&gt; but was:&lt;404&gt;\r\n    Expected :200\r\n    Actual   :404\r\n    &lt;Click to see difference&gt;\r\n    \r\n    \r\n    \tat org.springframework.test.util.AssertionErrors.fail(AssertionErrors.java:59)\r\n    \tat org.springframework.test.util.AssertionErrors.assertEquals(AssertionErrors.java:122)\r\n    \tat org.springframework.test.web.servlet.result.StatusResultMatchers.lambda$matcher$9(StatusResultMatchers.java:627)\r\n    \tat org.springframework.test.web.servlet.MockMvc$1.andExpect(MockMvc.java:196)\r\n    \tat com.example.crudrestapi.controller.CrudControllerTest.putApiTest(CrudControllerTest.java:85)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n    \tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:688)\r\n    \tat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\r\n    \tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\r\n    \tat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\r\n    \tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\r\n    \tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)\r\n    \tat org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\r\n    \tat org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\r\n    \tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\r\n    \tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\r\n    \tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\r\n    \tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\r\n    \tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\r\n    \tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\r\n    \tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:210)\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n    \tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:206)\r\n    \tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:131)\r\n    \tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:65)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\r\n    \tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\r\n    \tat java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\r\n    \tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\r\n    \tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\r\n    \tat java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\r\n    \tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\r\n    \tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\r\n    \tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\r\n    \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n    \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\r\n    \tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108)\r\n    \tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\r\n    \tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\r\n    \tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\r\n    \tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\r\n    \tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96)\r\n    \tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75)\r\n    \tat com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:71)\r\n    \tat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)\r\n    \tat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:220)\r\n    \tat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:53)\r\n    \r\n    2020-12-29 08:36:07.506  INFO 2564 --- [extShutdownHook] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService &#39;applicationTaskExecutor&#39;\r\n    \r\n    Process finished with exit code -1\r\n\r\ni don&#39;t understand why i get **404**.The Object is not created by the builder..??\r\n\r\nShould i specify the **id** in the builder..??\r\n","title":"my unit test case is failing for the PUT api controller in spring boot","body":"<p>i have created a Basic CRUD api.i have written test cases for all the api's ,Every test cases works fine but not PUT. It always gives me Resource Not Found Error.</p>\n<p><strong>model</strong></p>\n<pre><code>package com.example.crudrestapi.model;\n\n\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.Id;\n\n@Data\n@Entity\n@Builder\n@AllArgsConstructor\n@NoArgsConstructor\npublic class Customer {\n\n    @Id\n    @GeneratedValue private Long id;\n    private String name;\n    private String address;\n    private String phoneNumber;\n    private String gstin;\n    private float outstandingBalance;\n}\n</code></pre>\n<p><strong>Test</strong></p>\n<pre><code>@ExtendWith(SpringExtension.class)\n@WebMvcTest(CrudController.class)\nclass CrudControllerTest {\n\n    @Autowired\n    MockMvc mockMvc;\n\n    @MockBean\n    CustomerRepo customerRepo;\n    \n    @Test\n    void putApiTest() throws Exception {\n\n        Customer customer = Customer.builder().build();\n        given(customerRepo.findById(Long.parseLong(&quot;1&quot;))).willReturn(Optional.of(customer));\n\n        mockMvc.perform(put(&quot;/customers/{customerId}&quot;, 1)\n                .content(&quot;{ \\&quot;name\\&quot; : \\&quot;test\\&quot;, \\&quot;address\\&quot; : \\&quot;test\\&quot; }&quot;)\n                .contentType(MediaType.APPLICATION_JSON))\n                .andExpect(status().isOk());\n    }\n</code></pre>\n<p><strong>controller</strong></p>\n<pre><code>@PutMapping(&quot;customers/{customerId}&quot;)\n    public Customer updateCustomer(@RequestBody Customer newCustomer, @PathVariable Long customerId) throws ResourceNotFoundException {\n\n        return customerRepo.findById(customerId)\n                .map(customer -&gt; {\n                    if (newCustomer.getName() != null)\n                        customer.setName(newCustomer.getName());\n                    if (newCustomer.getGstin() != null)\n                        customer.setGstin(newCustomer.getGstin());\n                    if (newCustomer.getPhoneNumber() != null)\n                        customer.setPhoneNumber(newCustomer.getPhoneNumber());\n                    if (newCustomer.getAddress() != null)\n                        customer.setAddress(newCustomer.getAddress());\n                    if (newCustomer.getOutstandingBalance() != 0.0f)\n                        customer.setOutstandingBalance(newCustomer.getOutstandingBalance());\n                    return customerRepo.save(customer);\n                }).orElseThrow( () -&gt;new ResourceNotFoundException());\n\n    }\n</code></pre>\n<p><strong>Error i'm Getting</strong></p>\n<pre><code>2020-12-29 08:36:04.789  INFO 2564 --- [           main] c.e.c.controller.CrudControllerTest      : Starting CrudControllerTest using Java 11.0.9 on Acer-Aspire7 with PID 2564 (started by Ashil in C:\\Users\\Ashil\\Documents\\Java+SpringBoot\\crudRestApi)\n2020-12-29 08:36:04.792  INFO 2564 --- [           main] c.e.c.controller.CrudControllerTest      : No active profile set, falling back to default profiles: default\n2020-12-29 08:36:06.607  INFO 2564 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'applicationTaskExecutor'\n2020-12-29 08:36:07.103  INFO 2564 --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''\n2020-12-29 08:36:07.103  INFO 2564 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''\n2020-12-29 08:36:07.106  INFO 2564 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 3 ms\n2020-12-29 08:36:07.155  INFO 2564 --- [           main] c.e.c.controller.CrudControllerTest      : Started CrudControllerTest in 2.943 seconds (JVM running for 5.294)\n\nMockHttpServletRequest:\n      HTTP Method = PUT\n      Request URI = /customers/1\n       Parameters = {}\n          Headers = [Content-Type:&quot;application/json;charset=UTF-8&quot;, Content-Length:&quot;39&quot;]\n             Body = { &quot;name&quot; : &quot;test&quot;, &quot;address&quot; : &quot;test&quot; }\n    Session Attrs = {}\n\nHandler:\n             Type = com.example.crudrestapi.controller.CrudController\n           Method = com.example.crudrestapi.controller.CrudController#updateCustomer(Customer, Long)\n\nAsync:\n    Async started = false\n     Async result = null\n\nResolved Exception:\n             Type = java.lang.IllegalStateException\n\nModelAndView:\n        View name = null\n             View = null\n            Model = null\n\nFlashMap:\n       Attributes = null\n\nMockHttpServletResponse:\n           Status = 404\n    Error message = null\n          Headers = [Content-Type:&quot;text/plain;charset=UTF-8&quot;, Content-Length:&quot;18&quot;]\n     Content type = text/plain;charset=UTF-8\n             Body = Resource Not Found\n    Forwarded URL = null\n   Redirected URL = null\n          Cookies = []\n\njava.lang.AssertionError: Status expected:&lt;200&gt; but was:&lt;404&gt;\nExpected :200\nActual   :404\n&lt;Click to see difference&gt;\n\n\n    at org.springframework.test.util.AssertionErrors.fail(AssertionErrors.java:59)\n    at org.springframework.test.util.AssertionErrors.assertEquals(AssertionErrors.java:122)\n    at org.springframework.test.web.servlet.result.StatusResultMatchers.lambda$matcher$9(StatusResultMatchers.java:627)\n    at org.springframework.test.web.servlet.MockMvc$1.andExpect(MockMvc.java:196)\n    at com.example.crudrestapi.controller.CrudControllerTest.putApiTest(CrudControllerTest.java:85)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:688)\n    at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:210)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:206)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:131)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:65)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75)\n    at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:71)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:220)\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:53)\n\n2020-12-29 08:36:07.506  INFO 2564 --- [extShutdownHook] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'applicationTaskExecutor'\n\nProcess finished with exit code -1\n</code></pre>\n<p>i don't understand why i get <strong>404</strong>.The Object is not created by the builder..??</p>\n<p>Should i specify the <strong>id</strong> in the builder..??</p>\n"},{"tags":["java","spring-boot","postconstruct"],"answers":[{"tags":[],"owner":{"account_id":4754242,"reputation":883,"user_id":3843392,"display_name":"jumb0jet"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634720260,"creation_date":1634720260,"answer_id":69643096,"question_id":69642970,"body_markdown":"The `@PostConstruct` annotation is used on a method that needs to be executed after dependency injection is done to perform any initialization.\r\nThis method will be invoked by a framework, only if a framework controls the creation of an object.\r\n\r\nSince you instantiate `Banana` manually -  you also have to call it manually.","title":"How to call PostConstruct method when creating an object with new keyword","body":"<p>The <code>@PostConstruct</code> annotation is used on a method that needs to be executed after dependency injection is done to perform any initialization.\nThis method will be invoked by a framework, only if a framework controls the creation of an object.</p>\n<p>Since you instantiate <code>Banana</code> manually -  you also have to call it manually.</p>\n"},{"tags":[],"owner":{"account_id":298886,"reputation":40480,"user_id":605153,"accept_rate":67,"display_name":"Mark Bramnik"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1634720665,"creation_date":1634720665,"answer_id":69643191,"question_id":69642970,"body_markdown":"All the annotations honored by spring (`@PostConstruct`, `@PreDestroy`, `@Autowired` and many others) are applicable when the object is created by spring itself.\r\nIn this case spring can analyze the class, handle the annotations, etc.\r\n\r\nWhen you instantiate by yourself (`new Banana()`) - spring doesn&#39;t even know that your object exists and hence can&#39;t call any of its method, so you&#39;re forced doing it by yourself.\r\nSo yes, in this case you will have to call the method annotated with `@PostConstruct` manually, which means that the `@PostConstruct` annotation is pretty useless can can be omitted at all.","title":"How to call PostConstruct method when creating an object with new keyword","body":"<p>All the annotations honored by spring (<code>@PostConstruct</code>, <code>@PreDestroy</code>, <code>@Autowired</code> and many others) are applicable when the object is created by spring itself.\nIn this case spring can analyze the class, handle the annotations, etc.</p>\n<p>When you instantiate by yourself (<code>new Banana()</code>) - spring doesn't even know that your object exists and hence can't call any of its method, so you're forced doing it by yourself.\nSo yes, in this case you will have to call the method annotated with <code>@PostConstruct</code> manually, which means that the <code>@PostConstruct</code> annotation is pretty useless can can be omitted at all.</p>\n"}],"owner":{"account_id":23088254,"reputation":3,"user_id":17199460,"display_name":"dexprs"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2164,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69643191,"answer_count":2,"score":0,"last_activity_date":1634723706,"creation_date":1634719816,"question_id":69642970,"body_markdown":"I have a class `Banana` which has a `@PostConstruct` method that I want to run after the class object is created. I am creating the object of this class using these calls \r\n```java\r\nCat cat = new Cat();\r\nBanana b = new Banana(cat);\r\n```\r\nSo from the logs I understand that this `@PostConstruct` method is not being called when the `Banana` object is being created. I think the way I have implemented is not the correct usage. Can someone guide me how do I correctly implement this as this is my first task on Java project with Spring Boot. I need that setup code to run after `Banana` object is created, so is there any other way apart from `@PostConstruct`\r\n\r\n```java\r\n@Slf4j\r\npublic class Banana {\r\n    public Banana(Cat cat) {\r\n        this.cat = cat;\r\n    }\r\n    private Cat cat;\r\n\r\n    @PostConstruct\r\n    public void setup() {\r\n        // some code\r\n    }\r\n\r\n    public void execute() {\r\n        // some code\r\n    }\r\n}\r\n```","title":"How to call PostConstruct method when creating an object with new keyword","body":"<p>I have a class <code>Banana</code> which has a <code>@PostConstruct</code> method that I want to run after the class object is created. I am creating the object of this class using these calls</p>\n<pre class=\"lang-java prettyprint-override\"><code>Cat cat = new Cat();\nBanana b = new Banana(cat);\n</code></pre>\n<p>So from the logs I understand that this <code>@PostConstruct</code> method is not being called when the <code>Banana</code> object is being created. I think the way I have implemented is not the correct usage. Can someone guide me how do I correctly implement this as this is my first task on Java project with Spring Boot. I need that setup code to run after <code>Banana</code> object is created, so is there any other way apart from <code>@PostConstruct</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Slf4j\npublic class Banana {\n    public Banana(Cat cat) {\n        this.cat = cat;\n    }\n    private Cat cat;\n\n    @PostConstruct\n    public void setup() {\n        // some code\n    }\n\n    public void execute() {\n        // some code\n    }\n}\n</code></pre>\n"},{"tags":["java","mongodb","mongotemplate"],"comments":[{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":0,"creation_date":1634717544,"post_id":69642377,"comment_id":123097088,"body_markdown":"Can you print `bson.toJson()` result and add it to your question by [edit] it ?","body":"Can you print <code>bson.toJson()</code> result and add it to your question by <a href=\"https://stackoverflow.com/posts/69642377/edit\">edit</a> it ?"},{"owner":{"account_id":22838330,"reputation":33,"user_id":16985777,"display_name":"zhu mo"},"score":0,"creation_date":1634719143,"post_id":69642377,"comment_id":123097792,"body_markdown":"mongoSql like this: db.knowledge_resource_copy1.find(\n{_id:ObjectId(&quot;61517de29946587296c7c375&quot;)},\n\n)\n\n.forEach(\n\tfunction(item){\n\t\tdb.knowledge_resource_copy1.update(\n\t\t{_id:item._id},\n\t\t{$set:{description:item.description.substr(0,4)+&quot;h3&quot;}}\n\t\t)\n\t}\n\t\n);","body":"mongoSql like this: db.knowledge_resource_copy1.find( {_id:ObjectId(&quot;61517de29946587296c7c375&quot;)},  )  .forEach( \tfunction(item){ \t\tdb.knowledge_resource_copy1.update( \t\t{_id:item._id}, \t\t{$set:{description:item.description.substr(0,4)+&quot;h3&quot;}} \t\t) \t} \t );"},{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":0,"creation_date":1634720194,"post_id":69642377,"comment_id":123098269,"body_markdown":"Are you sure `db` is well define ? Also, it seem to have an error because there is missing an argument like this: `fun([json}, )`","body":"Are you sure <code>db</code> is well define ? Also, it seem to have an error because there is missing an argument like this: <code>fun([json}, )</code>"},{"owner":{"account_id":22838330,"reputation":33,"user_id":16985777,"display_name":"zhu mo"},"score":0,"creation_date":1634722404,"post_id":69642377,"comment_id":123099192,"body_markdown":"this can run ok :System.out.println(MongoUtils.MONGO_TEMPLATE.getDb());","body":"this can run ok :System.out.println(MongoUtils.MONGO_TEMPLATE.getDb());"},{"owner":{"account_id":22838330,"reputation":33,"user_id":16985777,"display_name":"zhu mo"},"score":0,"creation_date":1634722495,"post_id":69642377,"comment_id":123099227,"body_markdown":"The js sql also can run ok in navicat","body":"The js sql also can run ok in navicat"},{"owner":{"account_id":22838330,"reputation":33,"user_id":16985777,"display_name":"zhu mo"},"score":0,"creation_date":1634723775,"post_id":69642377,"comment_id":123099787,"body_markdown":"or is there any way to use mongoTemplate to update data, the js sql like this: db.knowledge_resource_copy1.update(\n\t\t{_id:item._id},\n\t\t{$set:{description:item.description.substr(0,5)+&quot;h3&quot;}}\n\t\t)","body":"or is there any way to use mongoTemplate to update data, the js sql like this: db.knowledge_resource_copy1.update( \t\t{_id:item._id}, \t\t{$set:{description:item.description.substr(0,5)+&quot;h3&quot;}} \t\t)"}],"owner":{"account_id":22838330,"reputation":33,"user_id":16985777,"display_name":"zhu mo"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":374,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1634723396,"creation_date":1634716973,"question_id":69642377,"body_markdown":"I&#39;m trying to run JS code for MongoDB like this :\r\n\r\n```java\r\nString mongoSql = &quot;db.knowledge_resource_copy1.find({_id:ObjectId(\\&quot;61517de29946587296c7c375\\&quot;)}, ).forEach(function(item){\r\n\tdb.knowledge_resource_copy1.update({_id:item._id}, {$set:{description:item.description.substr(0,5)+\\&quot;h3\\&quot;}} )\r\n});&quot;;\r\nBasicDBObject bson = new BasicDBObject();\r\nbson.put(&quot;$eval&quot;, mongoSql);\r\nMongoUtils.MONGO_TEMPLATE.executeCommand(bson.toJson());\r\n```\r\n\r\nBut I got this error :\r\n\r\n    com.mongodb.MongoCommandException: Command failed with error 13 (Unauthorized): &#39;not authorized.\r\n\r\n\r\nHow to solve this?\r\n\r\n","title":"mongoTemplate executeCommand error : not authorized","body":"<p>I'm trying to run JS code for MongoDB like this :</p>\n<pre class=\"lang-java prettyprint-override\"><code>String mongoSql = &quot;db.knowledge_resource_copy1.find({_id:ObjectId(\\&quot;61517de29946587296c7c375\\&quot;)}, ).forEach(function(item){\n    db.knowledge_resource_copy1.update({_id:item._id}, {$set:{description:item.description.substr(0,5)+\\&quot;h3\\&quot;}} )\n});&quot;;\nBasicDBObject bson = new BasicDBObject();\nbson.put(&quot;$eval&quot;, mongoSql);\nMongoUtils.MONGO_TEMPLATE.executeCommand(bson.toJson());\n</code></pre>\n<p>But I got this error :</p>\n<pre><code>com.mongodb.MongoCommandException: Command failed with error 13 (Unauthorized): 'not authorized.\n</code></pre>\n<p>How to solve this?</p>\n"},{"tags":["java","spring","spring-boot","tomcat"],"comments":[{"owner":{"account_id":9073858,"reputation":2807,"user_id":6756090,"display_name":"slauth"},"score":1,"creation_date":1634720175,"post_id":69642973,"comment_id":123098254,"body_markdown":"Not answering your question, but when using Spring Boot, instead of directly defining dependencies you&#39;d normally use so called &quot;starters&quot; that pull in all required dependencies with supported and tested versions. It&#39;s `spring-boot-starter-thymeleaf` in case of Thymeleaf.","body":"Not answering your question, but when using Spring Boot, instead of directly defining dependencies you&#39;d normally use so called &quot;starters&quot; that pull in all required dependencies with supported and tested versions. It&#39;s <code>spring-boot-starter-thymeleaf</code> in case of Thymeleaf."},{"owner":{"account_id":2843847,"reputation":55833,"user_id":2442804,"accept_rate":80,"display_name":"luk2302"},"score":0,"creation_date":1634720181,"post_id":69642973,"comment_id":123098259,"body_markdown":"You are comparing a very basic javascript functionality (lodash) to an entire ecosystem of frameworks in java (spring). Yes, learning and understanding spring takes months, that is how it is. It is like trying to learn react based on the imports: ain&#39;t gonna work / be fun.","body":"You are comparing a very basic javascript functionality (lodash) to an entire ecosystem of frameworks in java (spring). Yes, learning and understanding spring takes months, that is how it is. It is like trying to learn react based on the imports: ain&#39;t gonna work / be fun."},{"owner":{"account_id":1718670,"reputation":4778,"user_id":1575188,"display_name":"fantaghirocco"},"score":0,"creation_date":1634720279,"post_id":69642973,"comment_id":123098309,"body_markdown":"*Any solution to this?* ... the short answer is no in my opinion. Welcome to the J-jungle :D","body":"<i>Any solution to this?</i> ... the short answer is no in my opinion. Welcome to the J-jungle :D"}],"answers":[{"tags":[],"owner":{"account_id":298886,"reputation":40480,"user_id":605153,"accept_rate":67,"display_name":"Mark Bramnik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634721219,"creation_date":1634721219,"answer_id":69643314,"question_id":69642973,"body_markdown":"Yeah, this is a kind of weird question indeed.\r\nAll-in all I think its a matter of time that takes to migrate from one ecosystem to another. Also I believe, probably you&#39;ve picked a bad example. \r\n\r\nHow about something more simple (and yes, lodash conceptually is very simple):\r\nWhat about, say, logging:\r\n\r\nso you import a logging library (say you&#39;re using slf4j with loback/log4j2 whatever -- pretty common these days)\r\nthen in the import you do:\r\n\r\n~~~\r\nimport org.slf4j.Logger;\r\n~~~\r\nYou see the package slf4j - and have a documentation in google just like with lodash\r\nThen you use the logger and that&#39;s easy.\r\n\r\nNow with spring its way more complicated because there is nothing I&#39;m aware so &quot;powerful&quot; and &quot;complex&quot; at the same time the java script parlance. So it provides plethora of APIs and classes, it takes quite a while to grasp its concepts. But in general when you see `import org.springframework` something - you can google for springframework and you&#39;ll get to the documentation. The documentation is huge though, but again, its another story.\r\n","title":"How to know what a Java artifact is exactly used for?","body":"<p>Yeah, this is a kind of weird question indeed.\nAll-in all I think its a matter of time that takes to migrate from one ecosystem to another. Also I believe, probably you've picked a bad example.</p>\n<p>How about something more simple (and yes, lodash conceptually is very simple):\nWhat about, say, logging:</p>\n<p>so you import a logging library (say you're using slf4j with loback/log4j2 whatever -- pretty common these days)\nthen in the import you do:</p>\n<pre><code>import org.slf4j.Logger;\n</code></pre>\n<p>You see the package slf4j - and have a documentation in google just like with lodash\nThen you use the logger and that's easy.</p>\n<p>Now with spring its way more complicated because there is nothing I'm aware so &quot;powerful&quot; and &quot;complex&quot; at the same time the java script parlance. So it provides plethora of APIs and classes, it takes quite a while to grasp its concepts. But in general when you see <code>import org.springframework</code> something - you can google for springframework and you'll get to the documentation. The documentation is huge though, but again, its another story.</p>\n"},{"tags":[],"owner":{"account_id":1023013,"reputation":16655,"user_id":1032890,"accept_rate":100,"display_name":"GeertPt"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634723223,"creation_date":1634723223,"answer_id":69643781,"question_id":69642973,"body_markdown":"It&#39;s not a complete answer, but this might help:\r\n\r\nIt&#39;s a best practice for libraries to use a unique prefix for class packages, e.g. &#39;org.thymeleaf&#39; for thymeleaf.jar, &#39;org.thymeleaf.spring5&#39; for thymeleaf-spring5.jar.\r\n\r\nYou can lookup which class belongs to which jar (if they are in the central maven repository) via https://search.maven.org/, e.g. using the full class name `fc:org.thymeleaf.spring5.SpringTemplateEngine` or the simple class name `c:SpringTemplateEngine`.\r\n\r\nUnfortunately search.maven.org does not show the list of all classes or packages in a jar, you actually have to either download them or find a javadoc page on the library&#39;s own website.\r\n\r\nIIRC, bintray was better at this, but unfortunately, JFrog stopped that free service.\r\n","title":"How to know what a Java artifact is exactly used for?","body":"<p>It's not a complete answer, but this might help:</p>\n<p>It's a best practice for libraries to use a unique prefix for class packages, e.g. 'org.thymeleaf' for thymeleaf.jar, 'org.thymeleaf.spring5' for thymeleaf-spring5.jar.</p>\n<p>You can lookup which class belongs to which jar (if they are in the central maven repository) via <a href=\"https://search.maven.org/\" rel=\"nofollow noreferrer\">https://search.maven.org/</a>, e.g. using the full class name <code>fc:org.thymeleaf.spring5.SpringTemplateEngine</code> or the simple class name <code>c:SpringTemplateEngine</code>.</p>\n<p>Unfortunately search.maven.org does not show the list of all classes or packages in a jar, you actually have to either download them or find a javadoc page on the library's own website.</p>\n<p>IIRC, bintray was better at this, but unfortunately, JFrog stopped that free service.</p>\n"}],"owner":{"account_id":2595877,"reputation":3223,"user_id":2249582,"accept_rate":68,"display_name":"Radioreve"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":166,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1634723223,"creation_date":1634719821,"question_id":69642973,"body_markdown":"This may sound as a weird question but here it goes. I&#39;m learning java coming from node, and although I&#39;m getting fairly comfortable with the syntax/language/ecosystem, I still find it **very difficult** to know what a given package is exactly used for, in terms of code. For example\r\n\r\n**Node.js**\r\n\r\n`&quot;lodash: 4.0.0&quot;` -&gt; `import _ from lodash` -&gt; `_.shuffle()` \r\n\r\nEasy to see what lodash is used for and besides, googling lodash directs you straight to the documentation website.\r\n\r\n**Java**\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\r\n      &lt;artifactId&gt;thymeleaf-spring5&lt;/artifactId&gt;\r\n      &lt;version&gt;3.0.12.RELEASE&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\nLooking at the code gives you stuff like : \r\n\r\n    import org.thymeleaf.spring5.SpringTemplateEngine;\r\n    import org.springframework.context.MessageSource;\r\n\r\nMeaning you have to understand Spring design to understand what this package will be used for. How about a google search ? It&#39;s even worse! Only a list of all the package versions. What and how it is exactly used for, on the other hand, is not listed at all ! \r\n\r\nIt makes mastering what package is needed for somewhat painful for me. \r\n\r\nAny solution to this?","title":"How to know what a Java artifact is exactly used for?","body":"<p>This may sound as a weird question but here it goes. I'm learning java coming from node, and although I'm getting fairly comfortable with the syntax/language/ecosystem, I still find it <strong>very difficult</strong> to know what a given package is exactly used for, in terms of code. For example</p>\n<p><strong>Node.js</strong></p>\n<p><code>&quot;lodash: 4.0.0&quot;</code> -&gt; <code>import _ from lodash</code> -&gt; <code>_.shuffle()</code></p>\n<p>Easy to see what lodash is used for and besides, googling lodash directs you straight to the documentation website.</p>\n<p><strong>Java</strong></p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\n  &lt;artifactId&gt;thymeleaf-spring5&lt;/artifactId&gt;\n  &lt;version&gt;3.0.12.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Looking at the code gives you stuff like :</p>\n<pre><code>import org.thymeleaf.spring5.SpringTemplateEngine;\nimport org.springframework.context.MessageSource;\n</code></pre>\n<p>Meaning you have to understand Spring design to understand what this package will be used for. How about a google search ? It's even worse! Only a list of all the package versions. What and how it is exactly used for, on the other hand, is not listed at all !</p>\n<p>It makes mastering what package is needed for somewhat painful for me.</p>\n<p>Any solution to this?</p>\n"},{"tags":["java","spring","spring-boot","unit-testing","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":4754242,"reputation":883,"user_id":3843392,"display_name":"jumb0jet"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1634723191,"creation_date":1634723191,"answer_id":69643778,"question_id":69634994,"body_markdown":"According to the [Spring Boot Reference][1]:\r\n\r\nIf you use a [test annotation to test a more specific slice of your application][2], you should avoid adding configuration settings that are specific to a particular area on the [main method’s application class][3]. \r\n\r\nThe underlying component scan configuration of `@SpringBootApplication` defines exclude filters that are used to make sure slicing works as expected. If you are using an explicit `@ComponentScan` directive on your `@SpringBootApplication`-annotated class, be aware that those filters will be disabled. If you are using slicing, you should define them again.\r\n\r\nSo in your case consider to move annotations like `@EnableCaching`, `@EnableAsync` to a separate class.\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#features.testing.spring-boot-applications.detecting-configuration\r\n  [2]: https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#features.testing.spring-boot-applications.autoconfigured-tests\r\n  [3]: https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#features.testing.spring-boot-applications.user-configuration-and-slicing","title":"@DataJpaTest - loads configuration from @SpringBootApplication class","body":"<p>According to the <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#features.testing.spring-boot-applications.detecting-configuration\" rel=\"nofollow noreferrer\">Spring Boot Reference</a>:</p>\n<p>If you use a <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#features.testing.spring-boot-applications.autoconfigured-tests\" rel=\"nofollow noreferrer\">test annotation to test a more specific slice of your application</a>, you should avoid adding configuration settings that are specific to a particular area on the <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#features.testing.spring-boot-applications.user-configuration-and-slicing\" rel=\"nofollow noreferrer\">main method’s application class</a>.</p>\n<p>The underlying component scan configuration of <code>@SpringBootApplication</code> defines exclude filters that are used to make sure slicing works as expected. If you are using an explicit <code>@ComponentScan</code> directive on your <code>@SpringBootApplication</code>-annotated class, be aware that those filters will be disabled. If you are using slicing, you should define them again.</p>\n<p>So in your case consider to move annotations like <code>@EnableCaching</code>, <code>@EnableAsync</code> to a separate class.</p>\n"}],"owner":{"account_id":372117,"reputation":2909,"user_id":1486762,"accept_rate":47,"display_name":"Bilbo Baggins"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":401,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1634723191,"creation_date":1634662926,"question_id":69634994,"body_markdown":"I am confused a bit,based on this [documentation][1], I should be only putting this annotation `@DataJpaTest` and it will configure my application context to be only for JPA repositories and that too for an in-memory database. Now the problem is in my application I have a Main class which is annotated with `@SpringBootApplication` and it is loading rest of the configuration for Web interceptor and many other things from there. In fact it is trying to load the bootstrap.properties file too.\r\n\r\nIn my understanding it should NOT be using this configuration.\r\n \r\n\r\nBelow is my test code and main class.\r\n\r\n    @OpenAPIDefinition(info = @Info(title = &quot;Test API&quot;, version = &quot;0.1.10-SNAPSHOT&quot;, description = &quot;Test API&quot;, contact = @Contact(name = &quot;My Team&quot;, email = &quot;sample@mycompany.com&quot;)), servers = {\r\n    \t\t@Server(description = &quot;Current Stage Server url&quot;, url = &quot;https://mycompany.com/testapics&quot;),\r\n    \t\t@Server(description = &quot;Stable Stage Server url&quot;, url = &quot;https://mycompany.com/testapi&quot;) })\r\n    @SpringBootApplication(scanBasePackages = { &quot;com.mycompany.utility&quot;, &quot;com.mycompany.sample.users&quot;,\r\n    \t\t&quot;com.mycompany.sample.utility&quot;, &quot;com.mycompany.another.sample.interceptor&quot;,\r\n    \t\t&quot;com.mycompany.sample.security.vulnerableinput&quot;, &quot;com.mycompany.sample.security.nocache.filter&quot;,\r\n    \t\t&quot;com.mycompany.sample.security.common&quot;, &quot;com.mycompany.sample.security.csrf&quot;,\r\n    \t\t&quot;com.mycompany.sample.security.nocache&quot; })\r\n    @EnableCaching\r\n    @EnableAsync\r\n    public class SampleApiApplication implements WebMvcConfigurer {\r\n\r\nThe main class has a bunch of other bean configurations in it. (Omitting those for clarity).\r\n\r\nBelow is my test class.\r\n\r\n    @DataJpaTest\r\n    public class UsersRepositoryTest {\r\n    \r\n        @Autowired\r\n        private UsersRepository usersRepository;\r\n    \r\n        @Test\r\n        public void test_usersRepository_findByEmplId() {\r\n            List&lt;User&gt; users = getUsersData();\r\n            UsersRepository.saveAll(users);\r\n            for (User user : users) {\r\n                Assert.assertTrue(user.getId() != null);\r\n            }\r\n        }\r\n    \r\n        private List&lt;User&gt; getUsersData() {\r\n            List&lt;User&gt; userList = new ArrayList&lt;&gt;();\r\n            User user = new User();\r\n            user.setEmpId(&quot;XYZ_001&quot;);\r\n            user.setUserUUID(UUID.randomUUID().toString());\r\n            userList.add(user);\r\n            return userList;\r\n        }\r\n    \r\n    }\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/test/autoconfigure/orm/jpa/DataJpaTest.html","title":"@DataJpaTest - loads configuration from @SpringBootApplication class","body":"<p>I am confused a bit,based on this <a href=\"https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/test/autoconfigure/orm/jpa/DataJpaTest.html\" rel=\"nofollow noreferrer\">documentation</a>, I should be only putting this annotation <code>@DataJpaTest</code> and it will configure my application context to be only for JPA repositories and that too for an in-memory database. Now the problem is in my application I have a Main class which is annotated with <code>@SpringBootApplication</code> and it is loading rest of the configuration for Web interceptor and many other things from there. In fact it is trying to load the bootstrap.properties file too.</p>\n<p>In my understanding it should NOT be using this configuration.</p>\n<p>Below is my test code and main class.</p>\n<pre><code>@OpenAPIDefinition(info = @Info(title = &quot;Test API&quot;, version = &quot;0.1.10-SNAPSHOT&quot;, description = &quot;Test API&quot;, contact = @Contact(name = &quot;My Team&quot;, email = &quot;sample@mycompany.com&quot;)), servers = {\n        @Server(description = &quot;Current Stage Server url&quot;, url = &quot;https://mycompany.com/testapics&quot;),\n        @Server(description = &quot;Stable Stage Server url&quot;, url = &quot;https://mycompany.com/testapi&quot;) })\n@SpringBootApplication(scanBasePackages = { &quot;com.mycompany.utility&quot;, &quot;com.mycompany.sample.users&quot;,\n        &quot;com.mycompany.sample.utility&quot;, &quot;com.mycompany.another.sample.interceptor&quot;,\n        &quot;com.mycompany.sample.security.vulnerableinput&quot;, &quot;com.mycompany.sample.security.nocache.filter&quot;,\n        &quot;com.mycompany.sample.security.common&quot;, &quot;com.mycompany.sample.security.csrf&quot;,\n        &quot;com.mycompany.sample.security.nocache&quot; })\n@EnableCaching\n@EnableAsync\npublic class SampleApiApplication implements WebMvcConfigurer {\n</code></pre>\n<p>The main class has a bunch of other bean configurations in it. (Omitting those for clarity).</p>\n<p>Below is my test class.</p>\n<pre><code>@DataJpaTest\npublic class UsersRepositoryTest {\n\n    @Autowired\n    private UsersRepository usersRepository;\n\n    @Test\n    public void test_usersRepository_findByEmplId() {\n        List&lt;User&gt; users = getUsersData();\n        UsersRepository.saveAll(users);\n        for (User user : users) {\n            Assert.assertTrue(user.getId() != null);\n        }\n    }\n\n    private List&lt;User&gt; getUsersData() {\n        List&lt;User&gt; userList = new ArrayList&lt;&gt;();\n        User user = new User();\n        user.setEmpId(&quot;XYZ_001&quot;);\n        user.setUserUUID(UUID.randomUUID().toString());\n        userList.add(user);\n        return userList;\n    }\n\n}\n</code></pre>\n"},{"tags":["java","gaussian","noise","gauss"],"answers":[{"tags":[],"owner":{"account_id":11180480,"reputation":7021,"user_id":8207228,"display_name":"Ralf Kleberhoff"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634723021,"creation_date":1634723021,"answer_id":69643733,"question_id":69643180,"body_markdown":"You are creating a 3*3 Gauss template `w`, but you are using only the center element `w[1][1]` instead of computing a weighted combination of the 9 pixels around your current position.\r\n\r\nThis effectively multiplies all pixel values with a constant value `w[1][1]`, which has a value below 1, producing just a darker version of the original image.","title":"java remove gaussian noise","body":"<p>You are creating a 3*3 Gauss template <code>w</code>, but you are using only the center element <code>w[1][1]</code> instead of computing a weighted combination of the 9 pixels around your current position.</p>\n<p>This effectively multiplies all pixel values with a constant value <code>w[1][1]</code>, which has a value below 1, producing just a darker version of the original image.</p>\n"}],"owner":{"account_id":21408028,"reputation":121,"user_id":15768868,"display_name":"rulila52"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":130,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1634723021,"creation_date":1634720623,"question_id":69643180,"body_markdown":"I am trying to write a program that would remove noise from an image with a Gaussian filter. I am trying to write the following code:\r\n\r\n```\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        File file = new File(&quot;src/main/resources/123.jpg&quot;);\r\n        BufferedImage source;\r\n\r\n        try {\r\n            source = ImageIO.read(file);\r\n            BufferedImage result = new BufferedImage(source.getWidth(), source.getHeight(), source.getType());\r\n\r\n            int n = 3;\r\n            double[][] w = new double[n][n];\r\n            genGaussTemplate(w, n, 0.5);\r\n            for (int i = 1; i &lt; source.getWidth() - 1; i++) {\r\n                for (int j = 1; j &lt; source.getHeight() - 1; j++) {\r\n\r\n                    // Получаем цвет текущего пикселя\r\n                    Color color = new Color(source.getRGB(i, j));\r\n\r\n                    // Получаем каналы этого цвета\r\n                    int blue = color.getBlue();\r\n                    int red = color.getRed();\r\n                    int green = color.getGreen();\r\n\r\n                    red = (int) ((float) red * w[1][1]);\r\n                    green = (int) ((float) green * w[1][1]);\r\n                    blue = (int) ((float) blue * w[1][1]);\r\n\r\n                    //  Cоздаем новый цвет\r\n                    Color newColor = new Color(red, green, blue);\r\n\r\n                    // И устанавливаем этот цвет в текущий пиксель результирующего изображения\r\n                    result.setRGB(i, j, newColor.getRGB());\r\n                }\r\n            }\r\n            // Сохраняем результат в новый файл\r\n            File output = new File(&quot;src/main/resources/output/321.jpg&quot;);\r\n            ImageIO.write(result, &quot;jpg&quot;, output);\r\n        }\r\n        catch (IOException e) {\r\n            System.out.println(&quot;Произошла ошибка - &quot; + e.getMessage());\r\n        }\r\n    }\r\n\r\n    static void genGaussTemplate(double[][] window, int ksize, double sigma) {\r\n        final double pi = 3.1415926;\r\n        int center = ksize / 2;\r\n        double x2, y2;\r\n        double sum = 0;\r\n        for (int i = 0; i &lt; ksize; i++) {\r\n            x2 = Math.pow(i - center, 2);\r\n            for (int j = 0; j &lt; ksize; j++) {\r\n                y2 = Math.pow(j - center, 2);\r\n                double g = Math.exp(-(x2 + y2) / (2 * sigma * sigma));\r\n                g /= 2 * pi * sigma * sigma;\r\n                sum += g;\r\n                window[i][j] =g;\r\n            }\r\n        }\r\n        for (int i = 0; i &lt; ksize; i++) {\r\n            for (int j = 0; j &lt; ksize; j++) {\r\n                window[i][j] /=sum;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\nBut instead of removing noise i&#39;m getting darkening the image. What&#39;s i do wrong?\r\n\r\n[![before][1]][1]\r\n\r\n\r\n[![after][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Blb7v.jpg\r\n  [2]: https://i.stack.imgur.com/SjcYJ.png\r\n\r\nGaussian noise is statistical noise having a probability density equal to the probability density of a normal distribution, also known as Gaussian. In other words, the values that such noise can take have a Gaussian distribution. Named after Karl Gauss.\r\n\r\nA special case is white Gaussian noise, then the values at any given time are independent and equally distributed random variables (which means that together they do not correlate). When testing and modeling communication channels, Gaussian noise is used as additive white noise to generate additive white Gaussian noise.\r\n\r\nIn telecommunications, communication channels can be affected by broadband Gaussian noise coming from various natural sources, such as thermal vibrations of atoms in conductors (thermal noise or Johnson-Nyquist noise), shot noise, blackbody radiation from the earth or other warm objects, and from celestial sources such as the Sun","title":"java remove gaussian noise","body":"<p>I am trying to write a program that would remove noise from an image with a Gaussian filter. I am trying to write the following code:</p>\n<pre><code>public class Main {\n    public static void main(String[] args) {\n        File file = new File(&quot;src/main/resources/123.jpg&quot;);\n        BufferedImage source;\n\n        try {\n            source = ImageIO.read(file);\n            BufferedImage result = new BufferedImage(source.getWidth(), source.getHeight(), source.getType());\n\n            int n = 3;\n            double[][] w = new double[n][n];\n            genGaussTemplate(w, n, 0.5);\n            for (int i = 1; i &lt; source.getWidth() - 1; i++) {\n                for (int j = 1; j &lt; source.getHeight() - 1; j++) {\n\n                    // Получаем цвет текущего пикселя\n                    Color color = new Color(source.getRGB(i, j));\n\n                    // Получаем каналы этого цвета\n                    int blue = color.getBlue();\n                    int red = color.getRed();\n                    int green = color.getGreen();\n\n                    red = (int) ((float) red * w[1][1]);\n                    green = (int) ((float) green * w[1][1]);\n                    blue = (int) ((float) blue * w[1][1]);\n\n                    //  Cоздаем новый цвет\n                    Color newColor = new Color(red, green, blue);\n\n                    // И устанавливаем этот цвет в текущий пиксель результирующего изображения\n                    result.setRGB(i, j, newColor.getRGB());\n                }\n            }\n            // Сохраняем результат в новый файл\n            File output = new File(&quot;src/main/resources/output/321.jpg&quot;);\n            ImageIO.write(result, &quot;jpg&quot;, output);\n        }\n        catch (IOException e) {\n            System.out.println(&quot;Произошла ошибка - &quot; + e.getMessage());\n        }\n    }\n\n    static void genGaussTemplate(double[][] window, int ksize, double sigma) {\n        final double pi = 3.1415926;\n        int center = ksize / 2;\n        double x2, y2;\n        double sum = 0;\n        for (int i = 0; i &lt; ksize; i++) {\n            x2 = Math.pow(i - center, 2);\n            for (int j = 0; j &lt; ksize; j++) {\n                y2 = Math.pow(j - center, 2);\n                double g = Math.exp(-(x2 + y2) / (2 * sigma * sigma));\n                g /= 2 * pi * sigma * sigma;\n                sum += g;\n                window[i][j] =g;\n            }\n        }\n        for (int i = 0; i &lt; ksize; i++) {\n            for (int j = 0; j &lt; ksize; j++) {\n                window[i][j] /=sum;\n            }\n        }\n    }\n}\n\n</code></pre>\n<p>But instead of removing noise i'm getting darkening the image. What's i do wrong?</p>\n<p><a href=\"https://i.stack.imgur.com/Blb7v.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Blb7v.jpg\" alt=\"before\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/SjcYJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SjcYJ.png\" alt=\"after\" /></a></p>\n<p>Gaussian noise is statistical noise having a probability density equal to the probability density of a normal distribution, also known as Gaussian. In other words, the values that such noise can take have a Gaussian distribution. Named after Karl Gauss.</p>\n<p>A special case is white Gaussian noise, then the values at any given time are independent and equally distributed random variables (which means that together they do not correlate). When testing and modeling communication channels, Gaussian noise is used as additive white noise to generate additive white Gaussian noise.</p>\n<p>In telecommunications, communication channels can be affected by broadband Gaussian noise coming from various natural sources, such as thermal vibrations of atoms in conductors (thermal noise or Johnson-Nyquist noise), shot noise, blackbody radiation from the earth or other warm objects, and from celestial sources such as the Sun</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":36137,"reputation":178789,"user_id":102937,"accept_rate":90,"display_name":"Robert Harvey"},"score":2,"creation_date":1626875992,"post_id":68470784,"comment_id":121009062,"body_markdown":"The link you provided states that an anonymous class is a class *that has no name.*  None of your examples use non-named classes.","body":"The link you provided states that an anonymous class is a class <i>that has no name.</i>  None of your examples use non-named classes."},{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":0,"creation_date":1626875995,"post_id":68470784,"comment_id":121009063,"body_markdown":"It really _is_ a class - a subclass of the named class; and it&#39;s _also_ an instantiation of this anonymous subclass. It is an anonumous class because it really has no name. It is not an instance of InnerClass, but an instance of an anonymous class _derived from_ InnerClass.","body":"It really <i>is</i> a class - a subclass of the named class; and it&#39;s <i>also</i> an instantiation of this anonymous subclass. It is an anonumous class because it really has no name. It is not an instance of InnerClass, but an instance of an anonymous class <i>derived from</i> InnerClass."},{"owner":{"account_id":2645973,"reputation":65777,"user_id":2288659,"accept_rate":90,"display_name":"Silvio Mayolo"},"score":2,"creation_date":1626876042,"post_id":68470784,"comment_id":121009088,"body_markdown":"What is `InnerClass` supposed to refer to in the first example? Anonymous classes have to have a parent. You can do `Object foo = new Object() { ... }` if you want the parent to be `Object`, but every class has to have a parent, even anonymous ones.","body":"What is <code>InnerClass</code> supposed to refer to in the first example? Anonymous classes have to have a parent. You can do <code>Object foo = new Object() { ... }</code> if you want the parent to be <code>Object</code>, but every class has to have a parent, even anonymous ones."},{"owner":{"account_id":13047412,"reputation":2792,"user_id":9428851,"display_name":"Victor Gubin"},"score":0,"creation_date":1626876067,"post_id":68470784,"comment_id":121009097,"body_markdown":"In fact no difference at all. For all from the above javac compiler will crate additional class file. I.e. something like OuterClass#InnerClass.class  Everything else, including anonym classes and lambdas - are syntax sugar.","body":"In fact no difference at all. For all from the above javac compiler will crate additional class file. I.e. something like OuterClass#InnerClass.class  Everything else, including anonym classes and lambdas - are syntax sugar."},{"owner":{"account_id":36137,"reputation":178789,"user_id":102937,"accept_rate":90,"display_name":"Robert Harvey"},"score":0,"creation_date":1626876194,"post_id":68470784,"comment_id":121009157,"body_markdown":"Your third example is the only one that looks like the anonymous class Pizza example in the link you provided.  Look very carefully at that code.","body":"Your third example is the only one that looks like the anonymous class Pizza example in the link you provided.  Look very carefully at that code."},{"owner":{"display_name":"user16148657"},"score":0,"creation_date":1626876235,"post_id":68470784,"comment_id":121009174,"body_markdown":"@SilvioMayolo - The first example is what I am confused about. If we are calling this an anonymous CLASS, why does it need a parent at all?","body":"@SilvioMayolo - The first example is what I am confused about. If we are calling this an anonymous CLASS, why does it need a parent at all?"},{"owner":{"display_name":"user16148657"},"score":0,"creation_date":1626876284,"post_id":68470784,"comment_id":121009201,"body_markdown":"@RobertHarvey - is the second example not an example of an anon class?","body":"@RobertHarvey - is the second example not an example of an anon class?"},{"owner":{"account_id":2645973,"reputation":65777,"user_id":2288659,"accept_rate":90,"display_name":"Silvio Mayolo"},"score":0,"creation_date":1626876304,"post_id":68470784,"comment_id":121009210,"body_markdown":"It&#39;s a class. Every class has a parent. The &quot;anonymous&quot; part doesn&#39;t come into play at that point. &quot;Anonymous&quot; means you don&#39;t give the class a name, but every class has a parent, even anonymous ones.","body":"It&#39;s a class. Every class has a parent. The &quot;anonymous&quot; part doesn&#39;t come into play at that point. &quot;Anonymous&quot; means you don&#39;t give the class a name, but every class has a parent, even anonymous ones."},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1626876433,"post_id":68470784,"comment_id":121009270,"body_markdown":"Related: https://stackoverflow.com/a/21557857","body":"Related: <a href=\"https://stackoverflow.com/a/21557857\">stackoverflow.com/a/21557857</a>"},{"owner":{"display_name":"user16148657"},"score":1,"creation_date":1626876445,"post_id":68470784,"comment_id":121009275,"body_markdown":"@SilvioMayolo, ah ok so anon classes are merely children of their parent class without name, that makes sense. I guess I dont really see the point of using this though.","body":"@SilvioMayolo, ah ok so anon classes are merely children of their parent class without name, that makes sense. I guess I dont really see the point of using this though."},{"owner":{"account_id":10595663,"reputation":4835,"user_id":7804477,"display_name":"Gautham M"},"score":0,"creation_date":1626876545,"post_id":68470784,"comment_id":121009319,"body_markdown":"@madmaxx01 The official [doc](https://docs.oracle.com/javase/tutorial/java/javaOO/anonymousclasses.html) provides more details and might make the concept more clear","body":"@madmaxx01 The official <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/anonymousclasses.html\" rel=\"nofollow noreferrer\">doc</a> provides more details and might make the concept more clear"},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":2,"creation_date":1626876590,"post_id":68470784,"comment_id":121009345,"body_markdown":"&quot;I guess I dont really see the point of using this though&quot; it is useful for instance in swing applications where we often use something along `component.add*SomeListenerType*(new TypeOfListener(){ void listeningMethod(){ usually unique code for that specific listener } });`. Here we don&#39;t want to reuse `usually unique code for that specific listener` anywhere else so we don&#39;t really need to create class for it.","body":"&quot;I guess I dont really see the point of using this though&quot; it is useful for instance in swing applications where we often use something along <code>component.add*SomeListenerType*(new TypeOfListener(){ void listeningMethod(){ usually unique code for that specific listener } });</code>. Here we don&#39;t want to reuse <code>usually unique code for that specific listener</code> anywhere else so we don&#39;t really need to create class for it."},{"owner":{"account_id":2645973,"reputation":65777,"user_id":2288659,"accept_rate":90,"display_name":"Silvio Mayolo"},"score":3,"creation_date":1626876620,"post_id":68470784,"comment_id":121009356,"body_markdown":"Yeah, you&#39;ve got the right idea. It can be very useful for implemented interfaces like `Listener`-type things. Often, you want an event listener with a specific behavior, but you only need that behavior in one place. It just saves you the trouble of making a named class that you&#39;re going to only use once ever.","body":"Yeah, you&#39;ve got the right idea. It can be very useful for implemented interfaces like <code>Listener</code>-type things. Often, you want an event listener with a specific behavior, but you only need that behavior in one place. It just saves you the trouble of making a named class that you&#39;re going to only use once ever."},{"owner":{"account_id":2645973,"reputation":65777,"user_id":2288659,"accept_rate":90,"display_name":"Silvio Mayolo"},"score":0,"creation_date":1626876640,"post_id":68470784,"comment_id":121009365,"body_markdown":"@Pshemo Hah, great minds, I suppose :P","body":"@Pshemo Hah, great minds, I suppose :P"},{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":0,"creation_date":1626876723,"post_id":68470784,"comment_id":121009420,"body_markdown":"@SilvioMayolo &quot;Every class has a parent&quot; -- nitpick: every class except Object ;-)","body":"@SilvioMayolo &quot;Every class has a parent&quot; -- nitpick: every class except Object ;-)"},{"owner":{"display_name":"user16148657"},"score":0,"creation_date":1626876773,"post_id":68470784,"comment_id":121009440,"body_markdown":"@SilvioMayolo so its kind of the same as saying `class Parent{}` and then `class Child extends Parent{}` but you&#39;re only using this instantiation one time so why bother naming it?","body":"@SilvioMayolo so its kind of the same as saying <code>class Parent{}</code> and then <code>class Child extends Parent{}</code> but you&#39;re only using this instantiation one time so why bother naming it?"},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1626876858,"post_id":68470784,"comment_id":121009477,"body_markdown":"Please consider to rework your question. People shouldnt be forced to read through 20 comments to understand what you are asking for. Start by making sure the title (anonymous classes) fits your actual question (inner classes).","body":"Please consider to rework your question. People shouldnt be forced to read through 20 comments to understand what you are asking for. Start by making sure the title (anonymous classes) fits your actual question (inner classes)."},{"owner":{"display_name":"user16148657"},"score":0,"creation_date":1626877413,"post_id":68470784,"comment_id":121009788,"body_markdown":"The bigger question now is why am I allowed to write the same methods with different implementations from the parent class the anon class extends from w/o having to use @Override?","body":"The bigger question now is why am I allowed to write the same methods with different implementations from the parent class the anon class extends from w/o having to use @Override?"},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1626878071,"post_id":68470784,"comment_id":121010090,"body_markdown":"`@Override` annotation isn&#39;t mandatory to actually override a method. That annotation was added in Java 1.5 and overriding was available since Java 1.0. Purpose of `@Override` annotation is to let compiler inform us about failed attempt to override a method (like when we didn&#39;t provide correct name of method or parameter types). More info: [When do you use Java&#39;s @Override annotation and why?](https://stackoverflow.com/q/94361)","body":"<code>@Override</code> annotation isn&#39;t mandatory to actually override a method. That annotation was added in Java 1.5 and overriding was available since Java 1.0. Purpose of <code>@Override</code> annotation is to let compiler inform us about failed attempt to override a method (like when we didn&#39;t provide correct name of method or parameter types). More info: <a href=\"https://stackoverflow.com/q/94361\">When do you use Java&#39;s @Override annotation and why?</a>"}],"answers":[{"tags":[],"owner":{"account_id":2182934,"reputation":2525,"user_id":1932011,"accept_rate":71,"display_name":"JayC667"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1626876635,"creation_date":1626876635,"answer_id":68471067,"question_id":68470784,"body_markdown":"Two points about that what you&#39;re doing there with `InnerClass innerClass = new InnerClass() {};`\r\n\r\nFirst you&#39;re using the class `InnerClass` as a template that you extend by another anonymous class, instantiate that and save that reference to the variable `innerClass`.\r\nSo `InnerClass` has to be defined.\r\nAnd because there is no available named class definition for the object named `innerclass`, this is why it&#39;s anonymous.\r\n\r\nSecond, your comment `//DO SOMETHING` in there is wrong. The only thing you can do in there is to override already existing methods. Yes, you can also add new methods, but you cannot call the from the outside directly.\r\n`InnerClass` could be a normal class, an abstract class, or an interface.\r\n\r\nDefining `class InnerClass {}` inside another class would be a nested class. The way you do it it is dependent on the state of the `OuterClass`.\r\nThis could also be static, i.e. decoupled from any instance that `Outerclass` and its generica parameters would have.\r\n\r\nYour third example is a normal (additional) class definition inside a file. But because Java Language Specification defines that there can not be two top-level public classes in one file, this second class definition cannot be public. Because JLS also states that the one top-level public class inside a file has to have the same name as the file it&#39;s defined in.\r\n\r\nAnd to answer your last question, in reference to what I said about &#39;not being able to acces other methods&#39;: In your last example you explicitly define the method `innerClassMethod()` in a names class, and so it can be accessed.","title":"Do anonymous classes always have to exist elsewhere?","body":"<p>Two points about that what you're doing there with <code>InnerClass innerClass = new InnerClass() {};</code></p>\n<p>First you're using the class <code>InnerClass</code> as a template that you extend by another anonymous class, instantiate that and save that reference to the variable <code>innerClass</code>.\nSo <code>InnerClass</code> has to be defined.\nAnd because there is no available named class definition for the object named <code>innerclass</code>, this is why it's anonymous.</p>\n<p>Second, your comment <code>//DO SOMETHING</code> in there is wrong. The only thing you can do in there is to override already existing methods. Yes, you can also add new methods, but you cannot call the from the outside directly.\n<code>InnerClass</code> could be a normal class, an abstract class, or an interface.</p>\n<p>Defining <code>class InnerClass {}</code> inside another class would be a nested class. The way you do it it is dependent on the state of the <code>OuterClass</code>.\nThis could also be static, i.e. decoupled from any instance that <code>Outerclass</code> and its generica parameters would have.</p>\n<p>Your third example is a normal (additional) class definition inside a file. But because Java Language Specification defines that there can not be two top-level public classes in one file, this second class definition cannot be public. Because JLS also states that the one top-level public class inside a file has to have the same name as the file it's defined in.</p>\n<p>And to answer your last question, in reference to what I said about 'not being able to acces other methods': In your last example you explicitly define the method <code>innerClassMethod()</code> in a names class, and so it can be accessed.</p>\n"},{"tags":[],"owner":{"account_id":17066586,"reputation":4526,"user_id":12348584,"display_name":"H3AR7B3A7"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1634722848,"creation_date":1626876939,"answer_id":68471164,"question_id":68470784,"body_markdown":"- Everywhere you have written &#39;DO SOMETHING&#39; you are actually creating a new class that inherits from whatever type is behind the &#39;new&#39; Keyword...\r\n\r\n- This temporary class has no name of its own, hence anonymous.\r\n\r\n- It ends with ; because it is actually just a parameter of the outer class.\r\n\r\n- As Silvio pointed out in the comments all classes extend some class, even if it just the Object class.\r\n\r\nYou can&#39;t do this:\r\n\r\n```java\r\nclass OuterClass {\r\n\r\n    InnerClass innerClass = new InnerClass() {\r\n        //DO SOMETHING\r\n    };\r\n}\r\n```\r\nBecause InnerClass does not exist yet to inherit from.","title":"Do anonymous classes always have to exist elsewhere?","body":"<ul>\n<li><p>Everywhere you have written 'DO SOMETHING' you are actually creating a new class that inherits from whatever type is behind the 'new' Keyword...</p>\n</li>\n<li><p>This temporary class has no name of its own, hence anonymous.</p>\n</li>\n<li><p>It ends with ; because it is actually just a parameter of the outer class.</p>\n</li>\n<li><p>As Silvio pointed out in the comments all classes extend some class, even if it just the Object class.</p>\n</li>\n</ul>\n<p>You can't do this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class OuterClass {\n\n    InnerClass innerClass = new InnerClass() {\n        //DO SOMETHING\n    };\n}\n</code></pre>\n<p>Because InnerClass does not exist yet to inherit from.</p>\n"}],"owner":{"display_name":"user16148657"},"comment_count":19,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":91,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":68471067,"answer_count":2,"score":1,"last_activity_date":1634722848,"creation_date":1626875638,"question_id":68470784,"body_markdown":"I&#39;ve been trying to understand the difference between nested, local, anonymous classes and I&#39;m confused about a few things, but mostly why you cannot do this:\r\n\r\n    class OuterClass {\r\n \r\n        InnerClass innerClass = new InnerClass() {\r\n            //DO SOMETHING\r\n        };\r\n    }\r\n\r\nw/o doing this...\r\n\r\n    class OuterClass {\r\n        class InnerClass {\r\n        }\r\n    \r\n        InnerClass innerClass = new InnerClass() {\r\n            //DO SOMETHING\r\n        };\r\n    }\r\n\r\nor this...\r\n\r\n     class OuterClass {\r\n           \r\n            InnerClass innerClass = new InnerClass() {\r\n                //DO SOMETHING\r\n            };\r\n     }\r\n    \r\n     class InnerClass {\r\n     }\r\n\r\nHow is this at all different from this really?\r\n\r\n    class OuterClass {\r\n               \r\n                InnerClass innerClass = new InnerClass();\r\n                innerClass.innerClassMethod(); \r\n\r\n         }\r\n        \r\n         class InnerClass {\r\n             public void innerClassMethod() {\r\n             }\r\n         }\r\n\r\nAnd why is it called anonymous? I dont understand that. Reading this link [here](https://beginnersbook.com/2013/05/inner-class/) I understand the logistical differences (i.e. no name, only 1 instantiation, only accessible where defined, etc. But it&#39;s really not a class so why is it called a class? It&#39;s actually, from what I can see an instantiation of a class. I see you can have other methods as well from the class it is derived from, but how are you allowed to have completely different methods than the base class w/o having to use @Override? ","title":"Do anonymous classes always have to exist elsewhere?","body":"<p>I've been trying to understand the difference between nested, local, anonymous classes and I'm confused about a few things, but mostly why you cannot do this:</p>\n<pre><code>class OuterClass {\n\n    InnerClass innerClass = new InnerClass() {\n        //DO SOMETHING\n    };\n}\n</code></pre>\n<p>w/o doing this...</p>\n<pre><code>class OuterClass {\n    class InnerClass {\n    }\n\n    InnerClass innerClass = new InnerClass() {\n        //DO SOMETHING\n    };\n}\n</code></pre>\n<p>or this...</p>\n<pre><code> class OuterClass {\n       \n        InnerClass innerClass = new InnerClass() {\n            //DO SOMETHING\n        };\n }\n\n class InnerClass {\n }\n</code></pre>\n<p>How is this at all different from this really?</p>\n<pre><code>class OuterClass {\n           \n            InnerClass innerClass = new InnerClass();\n            innerClass.innerClassMethod(); \n\n     }\n    \n     class InnerClass {\n         public void innerClassMethod() {\n         }\n     }\n</code></pre>\n<p>And why is it called anonymous? I dont understand that. Reading this link <a href=\"https://beginnersbook.com/2013/05/inner-class/\" rel=\"nofollow noreferrer\">here</a> I understand the logistical differences (i.e. no name, only 1 instantiation, only accessible where defined, etc. But it's really not a class so why is it called a class? It's actually, from what I can see an instantiation of a class. I see you can have other methods as well from the class it is derived from, but how are you allowed to have completely different methods than the base class w/o having to use @Override?</p>\n"},{"tags":["java","android","application-design"],"comments":[{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":2,"creation_date":1634630311,"post_id":69626974,"comment_id":123069601,"body_markdown":"As an aside - these are *methods* that happen to have a void return type. There&#39;s no such thing as &quot;a void&quot;. (And I don&#39;t think in this case the return type of the method is particularly relevant to the question.)","body":"As an aside - these are <i>methods</i> that happen to have a void return type. There&#39;s no such thing as &quot;a void&quot;. (And I don&#39;t think in this case the return type of the method is particularly relevant to the question.)"},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1634631939,"post_id":69626974,"comment_id":123070224,"body_markdown":"You&#39;re going to need to the code in blink to check for a condition and stop. I also think you need to start blink asynchronously so it doesn&#39;t consume the api.","body":"You&#39;re going to need to the code in blink to check for a condition and stop. I also think you need to start blink asynchronously so it doesn&#39;t consume the api."},{"owner":{"account_id":732315,"reputation":4996,"user_id":681444,"display_name":"racraman"},"score":0,"creation_date":1634632661,"post_id":69626974,"comment_id":123070542,"body_markdown":"When you say “forever loop”, I hope you don’t mean an empty loop repeatedly checking (s as is bad practice, chewing up the CPU). Instead, you could create a `java.util.Timer` - see https://stackoverflow.com/questions/9053383/creating-a-repeating-timer-reminder-in-java/9053469 to control the blink-on and blink-off;  To stop, simply call its  `cancel` method.","body":"When you say “forever loop”, I hope you don’t mean an empty loop repeatedly checking (s as is bad practice, chewing up the CPU). Instead, you could create a <code>java.util.Timer</code> - see <a href=\"https://stackoverflow.com/questions/9053383/creating-a-repeating-timer-reminder-in-java/9053469\" title=\"creating a repeating timer reminder in java\">stackoverflow.com/questions/9053383/&hellip;</a> to control the blink-on and blink-off;  To stop, simply call its  <code>cancel</code> method."},{"owner":{"account_id":23076592,"reputation":1,"user_id":17189461,"display_name":"Malay Patra"},"score":0,"creation_date":1634635407,"post_id":69626974,"comment_id":123071682,"body_markdown":"How to impliment this cancel method","body":"How to impliment this cancel method"}],"answers":[{"tags":[],"owner":{"account_id":8320356,"reputation":258,"user_id":6252285,"display_name":"Kęstutis Ramulionis"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1634631885,"creation_date":1634631732,"answer_id":69627367,"question_id":69626974,"body_markdown":"    volatile bool condition = false;\r\n    public void _blink()\r\n    {\r\n        if (condition == true) return;\r\n    }\r\n    public void _stop()\r\n    {\r\n        condition = true;\r\n    }","title":"Stopping a running void in java","body":"<pre><code>volatile bool condition = false;\npublic void _blink()\n{\n    if (condition == true) return;\n}\npublic void _stop()\n{\n    condition = true;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":137890,"reputation":8718,"user_id":995052,"accept_rate":56,"display_name":"Kris"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634631868,"creation_date":1634631868,"answer_id":69627413,"question_id":69626974,"body_markdown":"You can solve it with a flag variable itself right ?\r\nSee below:\r\n\r\n    public class MainActivity extends Activity \r\n    {\r\n        \r\n        TextView tv1;\r\n        Button btn;\r\n        private boolean isBlinking=false;\r\n        \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState)\r\n        {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.main);\r\n        @Override\r\n        public void onClick(View _view) {\r\n          _blink();\r\n    }\r\n    \r\n        @Override\r\n        public void onClick(View _view) {\r\n          _stop();\r\n    } \r\n    \r\n    public void _blink(){\r\n      this.isBlinking = true;\r\n      while(this.isBlinking){...}\r\n    //here is my code which I want to perform as a forever loop\r\n    \r\n    \r\n    }\r\n    \r\n    public void _stop(){\r\n      this.isBlinking = false;\r\n    \r\n      //here I want the code which will stop the running method blink()\r\n    \r\n    }\r\n\r\nThis works, if the activity runs as a thread (I&#39;m not an Android guy :-) ). Otherwise, you have to run the _blink() in a thread and check the flag inside the loop of thread.","title":"Stopping a running void in java","body":"<p>You can solve it with a flag variable itself right ?\nSee below:</p>\n<pre><code>public class MainActivity extends Activity \n{\n    \n    TextView tv1;\n    Button btn;\n    private boolean isBlinking=false;\n    \n    @Override\n    protected void onCreate(Bundle savedInstanceState)\n    {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.main);\n    @Override\n    public void onClick(View _view) {\n      _blink();\n}\n\n    @Override\n    public void onClick(View _view) {\n      _stop();\n} \n\npublic void _blink(){\n  this.isBlinking = true;\n  while(this.isBlinking){...}\n//here is my code which I want to perform as a forever loop\n\n\n}\n\npublic void _stop(){\n  this.isBlinking = false;\n\n  //here I want the code which will stop the running method blink()\n\n}\n</code></pre>\n<p>This works, if the activity runs as a thread (I'm not an Android guy :-) ). Otherwise, you have to run the _blink() in a thread and check the flag inside the loop of thread.</p>\n"}],"owner":{"account_id":23076592,"reputation":1,"user_id":17189461,"display_name":"Malay Patra"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":147,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1634722751,"creation_date":1634630015,"question_id":69626974,"body_markdown":"What&#39;s the way to stop a running method in Java?\r\n\r\nI have a method called `main` in my `MainActivity.java` file and also I have two methods into it. They are blink() [which is a forever loop] and stop() . after a button(id=btn1) clicked I call the method blink() and I have an another button (id=btn2), on clicking on this button It will call the method stop(). Now I want that when ever i click on the button(btn2) the running method blink() will be stopped exactly on that moment. \r\n\r\nWhat I actually need is - \r\n\r\n    public class MainActivity extends Activity {\r\n    \tTextView tv1;\r\n    \tButton btn;\r\n    \t\r\n    \t@Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.main);\r\n\r\n    \t    @Override\r\n    \t    public void onClick(View _view) {\r\n                _blink();\r\n            }\r\n    \r\n    \t    @Override\r\n    \t    public void onClick(View _view) {\r\n                _stop();\r\n            } \r\n    \r\n            public void _blink() {\r\n                // Here is my code which I want to perform as a forever loop\r\n            }\r\n    \r\n            public void _stop() {\r\n                //here I want the code which will stop the running method blink()\r\n            }\r\n        }\r\n    }","title":"Stopping a running void in java","body":"<p>What's the way to stop a running method in Java?</p>\n<p>I have a method called <code>main</code> in my <code>MainActivity.java</code> file and also I have two methods into it. They are blink() [which is a forever loop] and stop() . after a button(id=btn1) clicked I call the method blink() and I have an another button (id=btn2), on clicking on this button It will call the method stop(). Now I want that when ever i click on the button(btn2) the running method blink() will be stopped exactly on that moment.</p>\n<p>What I actually need is -</p>\n<pre><code>public class MainActivity extends Activity {\n    TextView tv1;\n    Button btn;\n    \n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.main);\n\n        @Override\n        public void onClick(View _view) {\n            _blink();\n        }\n\n        @Override\n        public void onClick(View _view) {\n            _stop();\n        } \n\n        public void _blink() {\n            // Here is my code which I want to perform as a forever loop\n        }\n\n        public void _stop() {\n            //here I want the code which will stop the running method blink()\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","android","gradle"],"answers":[{"tags":[],"owner":{"account_id":20553557,"reputation":41,"user_id":15085693,"display_name":"Abhishek"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634678955,"creation_date":1634678955,"answer_id":69637857,"question_id":69636307,"body_markdown":"You could possibly turn off your internet on your PC before opening this project. There would be a prompt asking you to run the project offline, if you click Yes, it might throw an error saying dependencies not found and that could be the time when you could change the target versions.\r\n\r\nBut nevertheless, the size of the old gradle versions will be just around 100 mb which should have a huge impact on your storage.","title":"Change gradle version on projects before sync on projects from github","body":"<p>You could possibly turn off your internet on your PC before opening this project. There would be a prompt asking you to run the project offline, if you click Yes, it might throw an error saying dependencies not found and that could be the time when you could change the target versions.</p>\n<p>But nevertheless, the size of the old gradle versions will be just around 100 mb which should have a huge impact on your storage.</p>\n"},{"tags":[],"owner":{"account_id":21684711,"reputation":122,"user_id":16000346,"display_name":"Tarique Anowar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634686281,"creation_date":1634686281,"answer_id":69638674,"question_id":69636307,"body_markdown":"If you want to run that project you need to download that particular gradle build. If you try otherwise it will be waste of your time. Trust me I&#39;ve tried. ","title":"Change gradle version on projects before sync on projects from github","body":"<p>If you want to run that project you need to download that particular gradle build. If you try otherwise it will be waste of your time. Trust me I've tried.</p>\n"},{"tags":[],"owner":{"account_id":132271,"reputation":1079,"user_id":1564125,"display_name":"Felipe Duarte"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634686450,"creation_date":1634686450,"answer_id":69638690,"question_id":69636307,"body_markdown":"What you tried to change is the Android Gradle plugin not Gradle executable itself. To change Gradle&#39;s version you need to open file `gradle/wrapper/gradle-wrapper.properties` and then change to the version you expect there. Be aware that there&#39;s a relation between the Android Gradle plugin and Gradle versions so they might not play nice together, that&#39;s why Google did this: https://developer.android.com/studio/releases/gradle-plugin#versioning-update","title":"Change gradle version on projects before sync on projects from github","body":"<p>What you tried to change is the Android Gradle plugin not Gradle executable itself. To change Gradle's version you need to open file <code>gradle/wrapper/gradle-wrapper.properties</code> and then change to the version you expect there. Be aware that there's a relation between the Android Gradle plugin and Gradle versions so they might not play nice together, that's why Google did this: <a href=\"https://developer.android.com/studio/releases/gradle-plugin#versioning-update\" rel=\"nofollow noreferrer\">https://developer.android.com/studio/releases/gradle-plugin#versioning-update</a></p>\n"},{"tags":[],"owner":{"account_id":22653134,"reputation":680,"user_id":16827453,"display_name":"Polymath"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634722061,"creation_date":1634720188,"answer_id":69643074,"question_id":69636307,"body_markdown":"While using\r\nAndroid Studio Arctic Fox 2020.3.1 Patch 1 \r\n\r\n\r\nI have faced this problem while trying to use the Codelabs from github. I waited for 45 minutes once and still it didn&#39;t finish rebuilding the project. It was impossible to work that way. \r\n\r\nWhat I did to use the project was create an empty project and copy:\r\n\r\n    layout/*.xml\r\n    navigation/*.xml\r\n    menu/*.xml\r\n    &#39;package&#39;/*.kt\r\n\r\nAnd the .kt Kotlin or java files to the corresponding locations in the fresh project.\r\n\r\n - Now change the package information in all the .kt files to point to your package.\r\n\r\n - Add dependencies in the project level and module level build gradle files\r\n\r\n - Remove unused import from the .kt files\r\n\r\n - Set viewBinding, dataBinding in the module level build gradle if needed\r\n\r\n - Finally check the manifest in the downloaded project file to see any changes need to be done.\r\n\r\nNow you will be able to successfully build the project and run it. Correct errors if you encounter them. \r\n\r\nThis is a better way to learn by doing than just copying the project and waiting endlessly.\r\n\r\nI did all the &#39;codelabs&#39; from \r\nhttps://developer.android.com/courses/kotlin-android-fundamentals/toc\r\n\r\nusing this method. I could never open a project downloaded from the github directly.\r\n\r\n\r\n\r\n","title":"Change gradle version on projects before sync on projects from github","body":"<p>While using\nAndroid Studio Arctic Fox 2020.3.1 Patch 1</p>\n<p>I have faced this problem while trying to use the Codelabs from github. I waited for 45 minutes once and still it didn't finish rebuilding the project. It was impossible to work that way.</p>\n<p>What I did to use the project was create an empty project and copy:</p>\n<pre><code>layout/*.xml\nnavigation/*.xml\nmenu/*.xml\n'package'/*.kt\n</code></pre>\n<p>And the .kt Kotlin or java files to the corresponding locations in the fresh project.</p>\n<ul>\n<li><p>Now change the package information in all the .kt files to point to your package.</p>\n</li>\n<li><p>Add dependencies in the project level and module level build gradle files</p>\n</li>\n<li><p>Remove unused import from the .kt files</p>\n</li>\n<li><p>Set viewBinding, dataBinding in the module level build gradle if needed</p>\n</li>\n<li><p>Finally check the manifest in the downloaded project file to see any changes need to be done.</p>\n</li>\n</ul>\n<p>Now you will be able to successfully build the project and run it. Correct errors if you encounter them.</p>\n<p>This is a better way to learn by doing than just copying the project and waiting endlessly.</p>\n<p>I did all the 'codelabs' from\n<a href=\"https://developer.android.com/courses/kotlin-android-fundamentals/toc\" rel=\"nofollow noreferrer\">https://developer.android.com/courses/kotlin-android-fundamentals/toc</a></p>\n<p>using this method. I could never open a project downloaded from the github directly.</p>\n"}],"owner":{"account_id":9843029,"reputation":1738,"user_id":7291498,"accept_rate":44,"display_name":"Rifat"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":352,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":4,"score":1,"last_activity_date":1634722061,"creation_date":1634669715,"question_id":69636307,"body_markdown":"While checking out my own projects or others projects from github, android studio first tries to download gradle version mentioned in that project. However downloading so many versions of gradle takes up space, time and I dont want so many versions of them. But I can not find a way to change the gradle version and sync project with newer gradle version. I tried editing the build.gradle file with classpath of newer gradle but that did not work. What can I do to sync projects without downloading an older version of gradle? \r\nI understand the possibility of not working or syncing project properly with another gradle version but is this possible?\r\n\r\nBelow image shows, classpath changed and tried to resync but still downloaded older gradle version mentioned in the file while syncing, so kept as is.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/XxhMU.png","title":"Change gradle version on projects before sync on projects from github","body":"<p>While checking out my own projects or others projects from github, android studio first tries to download gradle version mentioned in that project. However downloading so many versions of gradle takes up space, time and I dont want so many versions of them. But I can not find a way to change the gradle version and sync project with newer gradle version. I tried editing the build.gradle file with classpath of newer gradle but that did not work. What can I do to sync projects without downloading an older version of gradle?\nI understand the possibility of not working or syncing project properly with another gradle version but is this possible?</p>\n<p>Below image shows, classpath changed and tried to resync but still downloaded older gradle version mentioned in the file while syncing, so kept as is.</p>\n<p><a href=\"https://i.stack.imgur.com/XxhMU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XxhMU.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","android","dialog","indexoutofboundsexception"],"comments":[{"owner":{"account_id":1718670,"reputation":4778,"user_id":1575188,"display_name":"fantaghirocco"},"score":0,"creation_date":1634656917,"post_id":69633281,"comment_id":123081467,"body_markdown":"`java.lang.IndexOutOfBoundsException: Index: 6, Size: 0` it&#39;s pretty self explainatory: the list is empty and the code is trying to access index `6`","body":"<code>java.lang.IndexOutOfBoundsException: Index: 6, Size: 0</code> it&#39;s pretty self explainatory: the list is empty and the code is trying to access index <code>6</code>"},{"owner":{"account_id":22378635,"reputation":11,"user_id":16592547,"display_name":"rholmes97"},"score":0,"creation_date":1634657304,"post_id":69633281,"comment_id":123081675,"body_markdown":"No, I understand what the error is saying. What I don&#39;t understand is why the list is empty when calling the method from my dialog but isn&#39;t empty if I call it in my main activity.","body":"No, I understand what the error is saying. What I don&#39;t understand is why the list is empty when calling the method from my dialog but isn&#39;t empty if I call it in my main activity."},{"owner":{"account_id":14584795,"reputation":2961,"user_id":10534012,"display_name":"Darkman"},"score":0,"creation_date":1634657728,"post_id":69633281,"comment_id":123081902,"body_markdown":"In your `yes()` function, how do you get the `position` variable. I&#39;m sure it works for the first time though. You need to make sure to update/get the variable correctly.","body":"In your <code>yes()</code> function, how do you get the <code>position</code> variable. I&#39;m sure it works for the first time though. You need to make sure to update/get the variable correctly."},{"owner":{"account_id":1301014,"reputation":8110,"user_id":1250929,"accept_rate":72,"display_name":"Kristy Welsh"},"score":0,"creation_date":1634657979,"post_id":69633281,"comment_id":123082039,"body_markdown":"Yes, where are you calling deleteItemRow?  Can we see that code?","body":"Yes, where are you calling deleteItemRow?  Can we see that code?"},{"owner":{"account_id":22378635,"reputation":11,"user_id":16592547,"display_name":"rholmes97"},"score":0,"creation_date":1634658607,"post_id":69633281,"comment_id":123082292,"body_markdown":"@Darkman I get the position using the recycler view position. So the 4th item will be position = 3. I then pass that to the dialog using a bundle. At this point the position is correct because I&#39;ve used system outs to check. There&#39;s also a system out in the yes function which tells me that it&#39;s correct at that point too. The issue seems to be my ArrayList is empty if I use the ```deleteItemRow``` function in my dialog instead of my main activity but I can&#39;t figure out why.","body":"@Darkman I get the position using the recycler view position. So the 4th item will be position = 3. I then pass that to the dialog using a bundle. At this point the position is correct because I&#39;ve used system outs to check. There&#39;s also a system out in the yes function which tells me that it&#39;s correct at that point too. The issue seems to be my ArrayList is empty if I use the <code>deleteItemRow</code> function in my dialog instead of my main activity but I can&#39;t figure out why."},{"owner":{"account_id":22378635,"reputation":11,"user_id":16592547,"display_name":"rholmes97"},"score":0,"creation_date":1634658729,"post_id":69633281,"comment_id":123082337,"body_markdown":"@KristyWelsh It&#39;s called in my dialog using ```mainActivity.deleteItemRow(position)``` in the ```yes()``` function (It&#39;s already in the body of the question).","body":"@KristyWelsh It&#39;s called in my dialog using <code>mainActivity.deleteItemRow(position)</code> in the <code>yes()</code> function (It&#39;s already in the body of the question)."},{"owner":{"account_id":14584795,"reputation":2961,"user_id":10534012,"display_name":"Darkman"},"score":0,"creation_date":1634658958,"post_id":69633281,"comment_id":123082429,"body_markdown":"Print the `allStock` size. I&#39;m sure this was the problem.","body":"Print the <code>allStock</code> size. I&#39;m sure this was the problem."}],"answers":[{"tags":[],"owner":{"account_id":22378635,"reputation":11,"user_id":16592547,"display_name":"rholmes97"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1634721953,"creation_date":1634665973,"answer_id":69635580,"question_id":69633281,"body_markdown":"I managed to &#39;fix&#39; this by making my DBHandler, ArrayList, Adapter and Button static. However this creates memory leaks so I&#39;m going to find another way round it. Thanks for the replies though.\r\n\r\nEdit: I just had to change ```mainActivity = new MainActivity();``` to ```mainActivity = ((MainActivity)getActivity());``` in my Dialog. The ```arrayList``` was empty because it was creating a new mainActivity every time the dialog was opened.","title":"Why am I getting an IndexOutOfBoundsException error when calling an activity method from my dialog?","body":"<p>I managed to 'fix' this by making my DBHandler, ArrayList, Adapter and Button static. However this creates memory leaks so I'm going to find another way round it. Thanks for the replies though.</p>\n<p>Edit: I just had to change <code>mainActivity = new MainActivity();</code> to <code>mainActivity = ((MainActivity)getActivity());</code> in my Dialog. The <code>arrayList</code> was empty because it was creating a new mainActivity every time the dialog was opened.</p>\n"}],"owner":{"account_id":22378635,"reputation":11,"user_id":16592547,"display_name":"rholmes97"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":223,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1634897527,"accepted_answer_id":69635580,"answer_count":1,"score":-2,"last_activity_date":1634721953,"creation_date":1634655799,"question_id":69633281,"body_markdown":"I have a Recycler View full of items, when you long press on a row, a remove buttons appears to allow the user to delete the row - I managed to get that working correctly but I then wanted to add a bit of safety to it by adding a dialog which asks the user whether or not they want to delete the row. However when I call the method in my dialog I get an ```IndexOutOfBoundsException``` as below:\r\n```\r\n2021-10-19 15:52:06.774 16238-16238/com.example.it_stock E/AndroidRuntime: FATAL EXCEPTION: main\r\n    Process: com.example.it_stock, PID: 16238\r\n    java.lang.IndexOutOfBoundsException: Index: 6, Size: 0\r\n        at java.util.ArrayList.get(ArrayList.java:411)\r\n        at com.example.it_stock.MainActivity.deleteItemRow(MainActivity.java:93)\r\n        at com.example.it_stock.ConfirmDeleteDialog.lambda$yes$1$ConfirmDeleteDialog(ConfirmDeleteDialog.java:48)\r\n        at com.example.it_stock.-$$Lambda$ConfirmDeleteDialog$VgpDlH3zTD1jVLwQl8Gp5RaCjYw.onClick(lambda)\r\n        at android.view.View.performClick(View.java:5637)\r\n        at com.google.android.material.button.MaterialButton.performClick(MaterialButton.java:1119)\r\n        at android.view.View$PerformClick.run(View.java:22433)\r\n        at android.os.Handler.handleCallback(Handler.java:751)\r\n        at android.os.Handler.dispatchMessage(Handler.java:95)\r\n        at android.os.Looper.loop(Looper.java:154)\r\n        at android.app.ActivityThread.main(ActivityThread.java:6121)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:889)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:779)\r\n```\r\nI am using an interface to long click on the recycler view rows:\r\n```\r\npackage com.example.it_stock;\r\n\r\npublic interface StockViewInterface {\r\n    void onItemClick(int position);\r\n    void onLongItemClick(int position);\r\n}\r\n```\r\nThis is in my Adapter:\r\n```\r\n// Uses the StockViewInterface to implement click listeners. These can then be used in Main Activity.\r\n            stockView.setOnClickListener(v -&gt; {\r\n                stockViewInterface.onItemClick(getAdapterPosition());\r\n                notifyItemChanged(selectedPosition);\r\n                selectedPosition = RecyclerView.NO_POSITION;\r\n                notifyItemChanged(selectedPosition);\r\n            });\r\n\r\n            stockView.setOnLongClickListener(v -&gt; {\r\n                stockViewInterface.onLongItemClick(getAdapterPosition());\r\n                // Highlight row\r\n                notifyItemChanged(selectedPosition);\r\n                selectedPosition = getAdapterPosition();\r\n                notifyItemChanged(selectedPosition);\r\n                return true; // doesn&#39;t allow multiple rows to be selected. False would highlight multiple rows but the remove method only allows one deletion at a time for now.\r\n            });\r\n```\r\nThese are the long click and delete row methods in my Main Activity:\r\n```\r\n    // Long tap on a row in the Recycler View. Remove button becomes visible and once clicked opens the confirmation dialog.\r\n    @Override\r\n    public void onLongItemClick(int position) {\r\n        btnRemoveItem.setVisibility(View.VISIBLE);\r\n        btnRemoveItem.setOnClickListener(v -&gt; {\r\n            ConfirmDeleteDialog confirmDeleteDialog = new ConfirmDeleteDialog();\r\n            Bundle bundle = new Bundle();\r\n            bundle.putInt(&quot;position&quot;, position);\r\n            confirmDeleteDialog.setArguments(bundle);\r\n            confirmDeleteDialog.show((MainActivity.this).getSupportFragmentManager(),&quot;confirm&quot;);\r\n        });\r\n        System.out.println(position);\r\n    }\r\n\r\n    // Deletes row.\r\n    public void deleteItemRow(int position) {\r\n        String stock = allStock.get(position).getItem();\r\n        db.deleteStockItem(db.getStockItem(allStock.get(position).getID()));\r\n        allStock.remove(position);\r\n        stockAdapter.notifyItemRemoved(position);\r\n        stockAdapter.notifyDataSetChanged();\r\n        btnRemoveItem.setVisibility(View.INVISIBLE);\r\n        stockAdapter.selectedPosition = RecyclerView.NO_POSITION;\r\n        Toast.makeText(this, stock + &quot; successfully deleted!&quot;, Toast.LENGTH_SHORT).show();\r\n    }\r\n```\r\nThe issue occurs in that ```deleteItemRow()``` method when I call it from my Dialog in the ```yes()``` method:\r\n```\r\npublic class ConfirmDeleteDialog extends DialogFragment {\r\n    private MainActivity mainActivity;\r\n    public static final String TAG = &quot;confirm&quot;;\r\n    int position;\r\n    Button no, yes;\r\n\r\n    @NonNull\r\n    @Override\r\n    public Dialog onCreateDialog(@Nullable Bundle savedInstanceState) {\r\n        LayoutInflater inflater = getActivity().getLayoutInflater();\r\n        View v = inflater.inflate(R.layout.dialog_confirm_delete, null);\r\n        Bundle bundle = getArguments();\r\n        position = bundle.getInt(&quot;position&quot;, position);\r\n        no = v.findViewById(R.id.btnNo);\r\n        yes = v.findViewById(R.id.btnYes);\r\n        mainActivity = new MainActivity();\r\n        System.out.println(position);\r\n        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());\r\n        builder.setView(v);\r\n        no();\r\n        yes();\r\n        return builder.create();\r\n    }\r\n\r\n    private void no() {\r\n        no.setOnClickListener(v -&gt; {\r\n            dismiss();\r\n        });\r\n    }\r\n\r\n    private void yes() {\r\n        yes.setOnClickListener(v -&gt; {\r\n            mainActivity.deleteItemRow(position);\r\n            System.out.println(position);\r\n            dismiss();\r\n        });\r\n    }\r\n}\r\n```\r\n\r\nAs mentioned at the start, the ```deleteItemRow()``` works correctly if I call it on the remove item button press if I do this:\r\n```\r\n@Override\r\n    public void onLongItemClick(int position) {\r\n        btnRemoveItem.setVisibility(View.VISIBLE);\r\n        btnRemoveItem.setOnClickListener(v -&gt; {\r\n            deleteItemRow(position);\r\n            \r\n        });\r\n        System.out.println(position);\r\n    }\r\n```\r\n\r\nI have used the ```System.out``` lines to makes sure ```position``` is correct.\r\n\r\nCan anyone help me understand why the list is empty when calling the method from my dialog but isn&#39;t empty if I call it in my main activity. And is there a way to fix this? Thanks in advance.\r\n\r\nEDIT: My ```allStock``` ArrayList is empty when the method is called from the dialog. This is how I get the ArrayList:\r\n```\r\nprivate DBHandlerStock db;\r\nprivate ArrayList&lt;Stock&gt; allStock = new ArrayList&lt;&gt;();\r\n\r\ndb = new DBHandlerStock(this);\r\nallStock = db.getAllStock();\r\n```","title":"Why am I getting an IndexOutOfBoundsException error when calling an activity method from my dialog?","body":"<p>I have a Recycler View full of items, when you long press on a row, a remove buttons appears to allow the user to delete the row - I managed to get that working correctly but I then wanted to add a bit of safety to it by adding a dialog which asks the user whether or not they want to delete the row. However when I call the method in my dialog I get an <code>IndexOutOfBoundsException</code> as below:</p>\n<pre><code>2021-10-19 15:52:06.774 16238-16238/com.example.it_stock E/AndroidRuntime: FATAL EXCEPTION: main\n    Process: com.example.it_stock, PID: 16238\n    java.lang.IndexOutOfBoundsException: Index: 6, Size: 0\n        at java.util.ArrayList.get(ArrayList.java:411)\n        at com.example.it_stock.MainActivity.deleteItemRow(MainActivity.java:93)\n        at com.example.it_stock.ConfirmDeleteDialog.lambda$yes$1$ConfirmDeleteDialog(ConfirmDeleteDialog.java:48)\n        at com.example.it_stock.-$$Lambda$ConfirmDeleteDialog$VgpDlH3zTD1jVLwQl8Gp5RaCjYw.onClick(lambda)\n        at android.view.View.performClick(View.java:5637)\n        at com.google.android.material.button.MaterialButton.performClick(MaterialButton.java:1119)\n        at android.view.View$PerformClick.run(View.java:22433)\n        at android.os.Handler.handleCallback(Handler.java:751)\n        at android.os.Handler.dispatchMessage(Handler.java:95)\n        at android.os.Looper.loop(Looper.java:154)\n        at android.app.ActivityThread.main(ActivityThread.java:6121)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:889)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:779)\n</code></pre>\n<p>I am using an interface to long click on the recycler view rows:</p>\n<pre><code>package com.example.it_stock;\n\npublic interface StockViewInterface {\n    void onItemClick(int position);\n    void onLongItemClick(int position);\n}\n</code></pre>\n<p>This is in my Adapter:</p>\n<pre><code>// Uses the StockViewInterface to implement click listeners. These can then be used in Main Activity.\n            stockView.setOnClickListener(v -&gt; {\n                stockViewInterface.onItemClick(getAdapterPosition());\n                notifyItemChanged(selectedPosition);\n                selectedPosition = RecyclerView.NO_POSITION;\n                notifyItemChanged(selectedPosition);\n            });\n\n            stockView.setOnLongClickListener(v -&gt; {\n                stockViewInterface.onLongItemClick(getAdapterPosition());\n                // Highlight row\n                notifyItemChanged(selectedPosition);\n                selectedPosition = getAdapterPosition();\n                notifyItemChanged(selectedPosition);\n                return true; // doesn't allow multiple rows to be selected. False would highlight multiple rows but the remove method only allows one deletion at a time for now.\n            });\n</code></pre>\n<p>These are the long click and delete row methods in my Main Activity:</p>\n<pre><code>    // Long tap on a row in the Recycler View. Remove button becomes visible and once clicked opens the confirmation dialog.\n    @Override\n    public void onLongItemClick(int position) {\n        btnRemoveItem.setVisibility(View.VISIBLE);\n        btnRemoveItem.setOnClickListener(v -&gt; {\n            ConfirmDeleteDialog confirmDeleteDialog = new ConfirmDeleteDialog();\n            Bundle bundle = new Bundle();\n            bundle.putInt(&quot;position&quot;, position);\n            confirmDeleteDialog.setArguments(bundle);\n            confirmDeleteDialog.show((MainActivity.this).getSupportFragmentManager(),&quot;confirm&quot;);\n        });\n        System.out.println(position);\n    }\n\n    // Deletes row.\n    public void deleteItemRow(int position) {\n        String stock = allStock.get(position).getItem();\n        db.deleteStockItem(db.getStockItem(allStock.get(position).getID()));\n        allStock.remove(position);\n        stockAdapter.notifyItemRemoved(position);\n        stockAdapter.notifyDataSetChanged();\n        btnRemoveItem.setVisibility(View.INVISIBLE);\n        stockAdapter.selectedPosition = RecyclerView.NO_POSITION;\n        Toast.makeText(this, stock + &quot; successfully deleted!&quot;, Toast.LENGTH_SHORT).show();\n    }\n</code></pre>\n<p>The issue occurs in that <code>deleteItemRow()</code> method when I call it from my Dialog in the <code>yes()</code> method:</p>\n<pre><code>public class ConfirmDeleteDialog extends DialogFragment {\n    private MainActivity mainActivity;\n    public static final String TAG = &quot;confirm&quot;;\n    int position;\n    Button no, yes;\n\n    @NonNull\n    @Override\n    public Dialog onCreateDialog(@Nullable Bundle savedInstanceState) {\n        LayoutInflater inflater = getActivity().getLayoutInflater();\n        View v = inflater.inflate(R.layout.dialog_confirm_delete, null);\n        Bundle bundle = getArguments();\n        position = bundle.getInt(&quot;position&quot;, position);\n        no = v.findViewById(R.id.btnNo);\n        yes = v.findViewById(R.id.btnYes);\n        mainActivity = new MainActivity();\n        System.out.println(position);\n        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());\n        builder.setView(v);\n        no();\n        yes();\n        return builder.create();\n    }\n\n    private void no() {\n        no.setOnClickListener(v -&gt; {\n            dismiss();\n        });\n    }\n\n    private void yes() {\n        yes.setOnClickListener(v -&gt; {\n            mainActivity.deleteItemRow(position);\n            System.out.println(position);\n            dismiss();\n        });\n    }\n}\n</code></pre>\n<p>As mentioned at the start, the <code>deleteItemRow()</code> works correctly if I call it on the remove item button press if I do this:</p>\n<pre><code>@Override\n    public void onLongItemClick(int position) {\n        btnRemoveItem.setVisibility(View.VISIBLE);\n        btnRemoveItem.setOnClickListener(v -&gt; {\n            deleteItemRow(position);\n            \n        });\n        System.out.println(position);\n    }\n</code></pre>\n<p>I have used the <code>System.out</code> lines to makes sure <code>position</code> is correct.</p>\n<p>Can anyone help me understand why the list is empty when calling the method from my dialog but isn't empty if I call it in my main activity. And is there a way to fix this? Thanks in advance.</p>\n<p>EDIT: My <code>allStock</code> ArrayList is empty when the method is called from the dialog. This is how I get the ArrayList:</p>\n<pre><code>private DBHandlerStock db;\nprivate ArrayList&lt;Stock&gt; allStock = new ArrayList&lt;&gt;();\n\ndb = new DBHandlerStock(this);\nallStock = db.getAllStock();\n</code></pre>\n"},{"tags":["java","spring","mongodb","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":16960225,"reputation":11,"user_id":12267541,"display_name":"Samuel Darracq"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1571906889,"creation_date":1571906889,"answer_id":58537605,"question_id":58537059,"body_markdown":"I have an option but there is probably more optimal, I did the best I could for now (beginner). You can with only one query do something like that :\r\n\r\n - $match:{_id:{$in:ids}} // Select all the elems matching any of id in ids\r\n - $project:{index:{$indexOfArray:[ids, &quot;$_id&quot;]} //add an index field showing you the position of each item into the ids array you are passing\r\n With those results you can retrieve which index never appear on results and so know they dont exist in your database. I know there must be simpler than that but that&#39;s all I have ^^ \r\n\r\n ","title":"Batch exists query in Spring MongoDB / exists for multiple ids","body":"<p>I have an option but there is probably more optimal, I did the best I could for now (beginner). You can with only one query do something like that :</p>\n\n<ul>\n<li>$match:{_id:{$in:ids}} // Select all the elems matching any of id in ids</li>\n<li>$project:{index:{$indexOfArray:[ids, \"$_id\"]} //add an index field showing you the position of each item into the ids array you are passing\nWith those results you can retrieve which index never appear on results and so know they dont exist in your database. I know there must be simpler than that but that's all I have ^^ </li>\n</ul>\n"},{"tags":[],"owner":{"account_id":5684060,"reputation":1093,"user_id":4494166,"accept_rate":0,"display_name":"Ravi Soni"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1609070547,"creation_date":1609070547,"answer_id":65465512,"question_id":58537059,"body_markdown":"just fetch the id field (ignore other fields) of every document and then in your application, check which exists or not.","title":"Batch exists query in Spring MongoDB / exists for multiple ids","body":"<p>just fetch the id field (ignore other fields) of every document and then in your application, check which exists or not.</p>\n"},{"tags":[],"owner":{"account_id":9706906,"reputation":3705,"user_id":7200088,"accept_rate":100,"display_name":"Michael Dz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1634721755,"creation_date":1634721755,"answer_id":69643438,"question_id":58537059,"body_markdown":"I believe Ravi Soni&#39;s approach is the optimal approach and I&#39;m going to show how to achieve it:\r\n\r\n    List&lt;String&gt; ids = getIds();    \r\n    Query query = new Query(Criteria.where(&quot;_id&quot;).in(ids));\r\n    //Now we only request the _id field and leave all other fields blank\r\n    query.fields().include(&quot;_id&quot;);\r\n    List&lt;YourClass&gt; result = repository.findAll(query);\r\n    List&lt;String&gt; existingIds = result.stream().map(e -&gt; e.getId()).collect(Collectors.toList());\r\n\r\n","title":"Batch exists query in Spring MongoDB / exists for multiple ids","body":"<p>I believe Ravi Soni's approach is the optimal approach and I'm going to show how to achieve it:</p>\n<pre><code>List&lt;String&gt; ids = getIds();    \nQuery query = new Query(Criteria.where(&quot;_id&quot;).in(ids));\n//Now we only request the _id field and leave all other fields blank\nquery.fields().include(&quot;_id&quot;);\nList&lt;YourClass&gt; result = repository.findAll(query);\nList&lt;String&gt; existingIds = result.stream().map(e -&gt; e.getId()).collect(Collectors.toList());\n</code></pre>\n"}],"owner":{"account_id":9706906,"reputation":3705,"user_id":7200088,"accept_rate":100,"display_name":"Michael Dz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1345,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":69643438,"answer_count":3,"score":3,"last_activity_date":1634721755,"creation_date":1571905047,"question_id":58537059,"body_markdown":"I have a list of thousands ids and based on these ids I want to determine which entities exist in my DB, because the list is big I can&#39;t afford sending thousands of queries synchronously, `BulkOperations` won&#39;t help me because it only supports insert,update and remove operations. I can&#39;t use `findAll(Query query..)` because each entity contains massive binary fields and from what I know Spring doesn&#39;t support lazy loading in MongoDB. \r\n\r\nWhat I want to achieve:\r\n\r\n    List&lt;String&gt; ids = getIds();\r\n    List&lt;Boolean&gt; existsList = repository.exists(ids);\r\n\r\n","title":"Batch exists query in Spring MongoDB / exists for multiple ids","body":"<p>I have a list of thousands ids and based on these ids I want to determine which entities exist in my DB, because the list is big I can't afford sending thousands of queries synchronously, <code>BulkOperations</code> won't help me because it only supports insert,update and remove operations. I can't use <code>findAll(Query query..)</code> because each entity contains massive binary fields and from what I know Spring doesn't support lazy loading in MongoDB. </p>\n\n<p>What I want to achieve:</p>\n\n<pre><code>List&lt;String&gt; ids = getIds();\nList&lt;Boolean&gt; existsList = repository.exists(ids);\n</code></pre>\n"},{"tags":["java","selenium","date"],"comments":[{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1634715656,"post_id":69641932,"comment_id":123096309,"body_markdown":"You could try to use a `Wait` that explicitly waits until `ExpectedConditions.elementToBeClickable(WebElement element)`... Have you tried to `Wait` already?","body":"You could try to use a <code>Wait</code> that explicitly waits until <code>ExpectedConditions.elementToBeClickable(WebElement element)</code>... Have you tried to <code>Wait</code> already?"},{"owner":{"account_id":21772995,"reputation":17,"user_id":16075854,"display_name":"RaviS"},"score":0,"creation_date":1634717213,"post_id":69641932,"comment_id":123096953,"body_markdown":"Tried using wait and ExpectedConditions but getting timeout exception. Code that I updated was:  \t\tWebDriverWait wait = new WebDriverWait(driver, 10);\n\t\t\n\t\twait.until(ExpectedConditions.elementToBeClickable(driver.findElement(By.xpath(&quot;//div[@class=&#39;datepicker dropdown-menu&#39;][4]/div[@class=&#39;datepicker-days&#39;]/table[@class=&#39; table-condensed&#39;]/thead/tr[1]/th[3]&quot;))));\n\t\t\n\t\tdriver.findElement(By.xpath(&quot;//div[@class=&#39;datepicker dropdown-menu&#39;][4]/div[@class=&#39;datepicker-days&#39;]/table[@class=&#39; table-condensed&#39;]/thead/tr[1]/th[3]&quot;)).click();","body":"Tried using wait and ExpectedConditions but getting timeout exception. Code that I updated was:  \t\tWebDriverWait wait = new WebDriverWait(driver, 10); \t\t \t\twait.until(ExpectedConditions.elementToBeClickable(driver.&zwnj;&#8203;findElement(By.xpath&zwnj;&#8203;(&quot;//div[@class=&#39;date&zwnj;&#8203;picker dropdown-menu&#39;][4]/div[@class=&#39;datepicker-days&#39;]/table[@clas&zwnj;&#8203;s=&#39; table-condensed&#39;]/thead/tr[1]/th[3]&quot;)))); \t\t \t\tdriver.findElement(By.xpath(&quot;//div[@class=&#39;datepicker dropdown-menu&#39;][4]/div[@class=&#39;datepicker-days&#39;]/table[@clas&zwnj;&#8203;s=&#39; table-condensed&#39;]/thead/tr[1]/th[3]&quot;)).click();"},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1634717691,"post_id":69641932,"comment_id":123097146,"body_markdown":"Have you tried a `Wait&lt;WebDriver&gt; wait = FluentWait&lt;WebDriver&gt;(driver)...` instead? You can apply a polling interval and some timeout.","body":"Have you tried a <code>Wait&lt;WebDriver&gt; wait = FluentWait&lt;WebDriver&gt;(driver)...</code> instead? You can apply a polling interval and some timeout."},{"owner":{"account_id":21772995,"reputation":17,"user_id":16075854,"display_name":"RaviS"},"score":0,"creation_date":1634718209,"post_id":69641932,"comment_id":123097387,"body_markdown":"Getting similar timeOut exception on using FluentWait","body":"Getting similar timeOut exception on using FluentWait"},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1634718821,"post_id":69641932,"comment_id":123097664,"body_markdown":"OK, then it&#39;s some different issue. Looks like you are trying to select an item of a dropdown menu, which you could alternatively try to get using a `Select`. Have you tried that so far?","body":"OK, then it&#39;s some different issue. Looks like you are trying to select an item of a dropdown menu, which you could alternatively try to get using a <code>Select</code>. Have you tried that so far?"},{"owner":{"account_id":21772995,"reputation":17,"user_id":16075854,"display_name":"RaviS"},"score":0,"creation_date":1634719240,"post_id":69641932,"comment_id":123097838,"body_markdown":"Its not the dropdown menu but rather the date field. I&#39;m trying to select the date in the &quot;Date of Return&quot; field of the &quot;Flights&quot; page. For that, I&#39;m looking to navigate to a particular month (e.g. December 2021, January 2022 etc) by clicking on the &quot;&gt;&quot; button within the date field.","body":"Its not the dropdown menu but rather the date field. I&#39;m trying to select the date in the &quot;Date of Return&quot; field of the &quot;Flights&quot; page. For that, I&#39;m looking to navigate to a particular month (e.g. December 2021, January 2022 etc) by clicking on the &quot;&gt;&quot; button within the date field."},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1634719332,"post_id":69641932,"comment_id":123097864,"body_markdown":"Could you post the particular html/css snippet and maybe an image of how it looks rendered?","body":"Could you post the particular html/css snippet and maybe an image of how it looks rendered?"},{"owner":{"account_id":21772995,"reputation":17,"user_id":16075854,"display_name":"RaviS"},"score":0,"creation_date":1634721869,"post_id":69641932,"comment_id":123098952,"body_markdown":"You can find the html code within the flight booking section of the http://www.mercurytravels.co.in website. Sharing across the snippet as requested::::&lt;div class=&quot;datepicker dropdown-menu&quot; style=&quot;display: block; top: 393.05px; left: 357.767px;&quot;&gt;\n\t&lt;div class=&quot;datepicker-days&quot; style=&quot;display: block;&quot;&gt;\n\t\t&lt;table class=&quot; table-condensed&quot;&gt;\n\t\t\t&lt;thead&gt;\n\t\t\t\t&lt;tr&gt;\n\t\t\t\t\t&lt;th class=&quot;prev&quot;&gt;‹&lt;/th&gt;\n\t\t\t\t\t&lt;th colspan=&quot;5&quot; class=&quot;switch&quot;&gt;November 2021&lt;/th&gt;\n\t\t\t\t\t&lt;th class=&quot;next&quot;&gt;›&lt;/th&gt;\n\t\t\t\t&lt;/tr&gt;\n\t\t\t\t&lt;tr&gt;","body":"You can find the html code within the flight booking section of the <a href=\"http://www.mercurytravels.co.in\" rel=\"nofollow noreferrer\">mercurytravels.co.in</a> website. Sharing across the snippet as requested::::&lt;div class=&quot;datepicker dropdown-menu&quot; style=&quot;display: block; top: 393.05px; left: 357.767px;&quot;&gt; \t&lt;div class=&quot;datepicker-days&quot; style=&quot;display: block;&quot;&gt; \t\t&lt;table class=&quot; table-condensed&quot;&gt; \t\t\t&lt;thead&gt; \t\t\t\t&lt;tr&gt; \t\t\t\t\t&lt;th class=&quot;prev&quot;&gt;‹&lt;/th&gt; \t\t\t\t\t&lt;th colspan=&quot;5&quot; class=&quot;switch&quot;&gt;November 2021&lt;/th&gt; \t\t\t\t\t&lt;th class=&quot;next&quot;&gt;›&lt;/th&gt; \t\t\t\t&lt;/tr&gt; \t\t\t\t&lt;tr&gt;"}],"answers":[{"tags":[],"owner":{"account_id":10489136,"reputation":2762,"user_id":7731623,"display_name":"Nandan A"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634721749,"creation_date":1634721749,"answer_id":69643435,"question_id":69641932,"body_markdown":"`org.openqa.selenium.ElementNotInteractableException` Indicates that a click could not be properly executed because the target element was obscured in some way. ElementNotInteractableException is Thrown to indicate that although an element is present on the DOM, it is not in a state that can be interacted with.\r\n\r\n**Using `Explicit` wait**:\r\n\r\n\t\tdriver.findElement(By.cssSelector(&quot;input[name=&#39;returnDate&#39;]&quot;)).click();\r\n\t\tWebElement next = (new WebDriverWait(driver, 30)).until(ExpectedConditions.elementToBeClickable(By.xpath(\r\n\t\t\t\t&quot;//div[@class=&#39;datepicker dropdown-menu&#39;][4]/div[@class=&#39;datepicker-days&#39;]/table[@class=&#39; table-condensed&#39;]/thead/tr[1]/th[3]&quot;)));\r\n\t\tnext.click();\r\n\r\n**Using `Actions`**:\r\n\r\n\t\tdriver.findElement(By.cssSelector(&quot;input[name=&#39;returnDate&#39;]&quot;)).click();\r\n\t\tWebElement next = (new WebDriverWait(driver, 30)).until(ExpectedConditions.elementToBeClickable(By.xpath(\r\n\t\t\t\t&quot;//div[@class=&#39;datepicker dropdown-menu&#39;][4]/div[@class=&#39;datepicker-days&#39;]/table[@class=&#39; table-condensed&#39;]/thead/tr[1]/th[3]&quot;)));\r\n\t\tActions action = new Actions(driver);\r\n\t\taction.moveToElement(next).click().build().perform();\r\n\r\n**Using `JavascriptExecutor`**:\r\n\r\n\t\tdriver.findElement(By.cssSelector(&quot;input[name=&#39;returnDate&#39;]&quot;)).click();\r\n\t\tWebElement next = (new WebDriverWait(driver, 30)).until(ExpectedConditions.elementToBeClickable(By.xpath(\r\n\t\t\t\t&quot;//div[@class=&#39;datepicker dropdown-menu&#39;][4]/div[@class=&#39;datepicker-days&#39;]/table[@class=&#39; table-condensed&#39;]/thead/tr[1]/th[3]&quot;)));\r\n\t\tJavascriptExecutor javascriptExecutor = (JavascriptExecutor) driver;\r\n\t\tjavascriptExecutor.executeScript(&quot;arguments[0].click();&quot;, next);","title":"Unable to identify and click on the &quot;Next&quot; button in date field","body":"<p><code>org.openqa.selenium.ElementNotInteractableException</code> Indicates that a click could not be properly executed because the target element was obscured in some way. ElementNotInteractableException is Thrown to indicate that although an element is present on the DOM, it is not in a state that can be interacted with.</p>\n<p><strong>Using <code>Explicit</code> wait</strong>:</p>\n<pre><code>    driver.findElement(By.cssSelector(&quot;input[name='returnDate']&quot;)).click();\n    WebElement next = (new WebDriverWait(driver, 30)).until(ExpectedConditions.elementToBeClickable(By.xpath(\n            &quot;//div[@class='datepicker dropdown-menu'][4]/div[@class='datepicker-days']/table[@class=' table-condensed']/thead/tr[1]/th[3]&quot;)));\n    next.click();\n</code></pre>\n<p><strong>Using <code>Actions</code></strong>:</p>\n<pre><code>    driver.findElement(By.cssSelector(&quot;input[name='returnDate']&quot;)).click();\n    WebElement next = (new WebDriverWait(driver, 30)).until(ExpectedConditions.elementToBeClickable(By.xpath(\n            &quot;//div[@class='datepicker dropdown-menu'][4]/div[@class='datepicker-days']/table[@class=' table-condensed']/thead/tr[1]/th[3]&quot;)));\n    Actions action = new Actions(driver);\n    action.moveToElement(next).click().build().perform();\n</code></pre>\n<p><strong>Using <code>JavascriptExecutor</code></strong>:</p>\n<pre><code>    driver.findElement(By.cssSelector(&quot;input[name='returnDate']&quot;)).click();\n    WebElement next = (new WebDriverWait(driver, 30)).until(ExpectedConditions.elementToBeClickable(By.xpath(\n            &quot;//div[@class='datepicker dropdown-menu'][4]/div[@class='datepicker-days']/table[@class=' table-condensed']/thead/tr[1]/th[3]&quot;)));\n    JavascriptExecutor javascriptExecutor = (JavascriptExecutor) driver;\n    javascriptExecutor.executeScript(&quot;arguments[0].click();&quot;, next);\n</code></pre>\n"}],"owner":{"account_id":21772995,"reputation":17,"user_id":16075854,"display_name":"RaviS"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1634721749,"creation_date":1634714854,"question_id":69641932,"body_markdown":"I am trying to automate the flight booking of http://www.mercurytravels.co.in using Selenium+java.\r\nThe issue that I am facing is that I&#39;m unable to click on the &quot;&gt;&quot; (next button) of the &quot;Date of Return&quot; date field in the Book Flights Online page.\r\n\r\nGetting error message that --&gt; Exception in thread &quot;main&quot; org.openqa.selenium.ElementNotInteractableException: element not interactable\r\n\r\nThe code that I&#39;ve written is:\r\n\t\t\t\r\n\t\tdriver.findElement(By.cssSelector(&quot;input[name=&#39;returnDate&#39;]&quot;)).click();\r\n\t\t\r\n        //Retrieving current year value\r\n\t\tString currentReturnMonthYear = driver.findElement(By.xpath(&quot;//div[@class=&#39;datepicker dropdown-menu&#39;][4]/div[@class=&#39;datepicker-days&#39;]/table[@class=&#39; table-condensed&#39;]/thead/tr[1]/th[2]&quot;)).getAttribute(&quot;innerHTML&quot;);\r\n\t\t\r\n\t\tdriver.findElement(By.xpath(&quot;//div[@class=&#39;datepicker dropdown-menu&#39;][4]/div[@class=&#39;datepicker-days&#39;]/table[@class=&#39; table-condensed&#39;]/thead/tr[1]/th[3]&quot;)).click();\r\n\t\r\n\r\nRequest any inputs on issue that I&#39;m facing?","title":"Unable to identify and click on the &quot;Next&quot; button in date field","body":"<p>I am trying to automate the flight booking of <a href=\"http://www.mercurytravels.co.in\" rel=\"nofollow noreferrer\">http://www.mercurytravels.co.in</a> using Selenium+java.\nThe issue that I am facing is that I'm unable to click on the &quot;&gt;&quot; (next button) of the &quot;Date of Return&quot; date field in the Book Flights Online page.</p>\n<p>Getting error message that --&gt; Exception in thread &quot;main&quot; org.openqa.selenium.ElementNotInteractableException: element not interactable</p>\n<p>The code that I've written is:</p>\n<pre><code>    driver.findElement(By.cssSelector(&quot;input[name='returnDate']&quot;)).click();\n    \n    //Retrieving current year value\n    String currentReturnMonthYear = driver.findElement(By.xpath(&quot;//div[@class='datepicker dropdown-menu'][4]/div[@class='datepicker-days']/table[@class=' table-condensed']/thead/tr[1]/th[2]&quot;)).getAttribute(&quot;innerHTML&quot;);\n    \n    driver.findElement(By.xpath(&quot;//div[@class='datepicker dropdown-menu'][4]/div[@class='datepicker-days']/table[@class=' table-condensed']/thead/tr[1]/th[3]&quot;)).click();\n</code></pre>\n<p>Request any inputs on issue that I'm facing?</p>\n"},{"tags":["java","json","jackson","jackson-databind","jackson-annotations"],"answers":[{"tags":[],"owner":{"account_id":8442315,"reputation":1,"user_id":17192894,"display_name":"Khaldoun bhy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634720682,"creation_date":1634720620,"answer_id":69643179,"question_id":69643094,"body_markdown":"Hello this a example to bind the json into the object \r\nhttps://www.tutorialspoint.com/jackson/jackson_data_binding.htm\r\n","title":"How to map unwrapped JSON field to wrapped object with Jackson?","body":"<p>Hello this a example to bind the json into the object\n<a href=\"https://www.tutorialspoint.com/jackson/jackson_data_binding.htm\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/jackson/jackson_data_binding.htm</a></p>\n"},{"tags":[],"owner":{"account_id":4468601,"reputation":7627,"user_id":3635454,"accept_rate":75,"display_name":"pleft"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1634721633,"creation_date":1634721313,"answer_id":69643338,"question_id":69643094,"body_markdown":"Just add `@JsonUnrapped` annotation over `Person person;` in your `Response` class. And by the way, classes in Java are defined by **class** not **Class**. Doesn&#39;t your code fails to compile? And you should add getters/setters to your classes if you haven&#39;t done already\r\n\r\n**Response** class:\r\n\r\n    public class Response {\r\n        @JsonUnwrapped\r\n        Person person;\r\n\r\n        public Person getPerson() {\r\n            return person;\r\n        }\r\n\r\n        public void setPerson(Person person) {\r\n            this.person = person;\r\n        }\r\n    }\r\n\r\n**Person** class:\r\n\r\n    public class Person {\r\n        String name;\r\n        String age;\r\n\r\n        public String getName() {\r\n            return name;\r\n        }\r\n\r\n        public void setName(String name) {\r\n            this.name = name;\r\n        }\r\n\r\n        public String getAge() {\r\n            return age;\r\n        }\r\n\r\n        public void setAge(String age) {\r\n            this.age = age;\r\n        }\r\n    }\r\n\r\nAnd here is a small test code to verify it:\r\n\r\n        String json=&quot;{\\n&quot; +\r\n                &quot;  \\&quot;name\\&quot;: \\&quot;Joe\\&quot;,\\n&quot; +\r\n                &quot;  \\&quot;age\\&quot;: \\&quot;30\\&quot;\\n&quot; +\r\n                &quot;}&quot;;\r\n\r\n        ObjectMapper mapper = new ObjectMapper();\r\n        \r\n        // convert JSON to Response\r\n        final Response response = mapper.readValue(json, Response.class);\r\n        System.out.println(response.getPerson().getName());\r\n        System.out.println(response.getPerson().getAge());\r\n\r\n        // convert Response to JSON string\r\n        final String s = mapper.writeValueAsString(response);\r\n        System.out.println(s);","title":"How to map unwrapped JSON field to wrapped object with Jackson?","body":"<p>Just add <code>@JsonUnrapped</code> annotation over <code>Person person;</code> in your <code>Response</code> class. And by the way, classes in Java are defined by <strong>class</strong> not <strong>Class</strong>. Doesn't your code fails to compile? And you should add getters/setters to your classes if you haven't done already</p>\n<p><strong>Response</strong> class:</p>\n<pre><code>public class Response {\n    @JsonUnwrapped\n    Person person;\n\n    public Person getPerson() {\n        return person;\n    }\n\n    public void setPerson(Person person) {\n        this.person = person;\n    }\n}\n</code></pre>\n<p><strong>Person</strong> class:</p>\n<pre><code>public class Person {\n    String name;\n    String age;\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getAge() {\n        return age;\n    }\n\n    public void setAge(String age) {\n        this.age = age;\n    }\n}\n</code></pre>\n<p>And here is a small test code to verify it:</p>\n<pre><code>    String json=&quot;{\\n&quot; +\n            &quot;  \\&quot;name\\&quot;: \\&quot;Joe\\&quot;,\\n&quot; +\n            &quot;  \\&quot;age\\&quot;: \\&quot;30\\&quot;\\n&quot; +\n            &quot;}&quot;;\n\n    ObjectMapper mapper = new ObjectMapper();\n    \n    // convert JSON to Response\n    final Response response = mapper.readValue(json, Response.class);\n    System.out.println(response.getPerson().getName());\n    System.out.println(response.getPerson().getAge());\n\n    // convert Response to JSON string\n    final String s = mapper.writeValueAsString(response);\n    System.out.println(s);\n</code></pre>\n"}],"owner":{"account_id":20439299,"reputation":105,"user_id":14996394,"display_name":"Ajay Sabarish"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1183,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69643338,"answer_count":2,"score":1,"last_activity_date":1634721633,"creation_date":1634720259,"question_id":69643094,"body_markdown":"I have a JSON of structure\r\n\r\n```\r\n{\r\n  &quot;name&quot;: &quot;...&quot;,\r\n  &quot;age&quot;: &quot;...&quot;\r\n}\r\n```\r\nI have to map this JSON to following class object\r\n\r\n```\r\nClass Response {\r\n  Person person;\r\n}\r\n\r\nClass Person {\r\n String name;\r\n String age;\r\n}\r\n```\r\n\r\nIs there any Jackson annotation that helps me do this without changing the JSON structure or modifying the class structure?","title":"How to map unwrapped JSON field to wrapped object with Jackson?","body":"<p>I have a JSON of structure</p>\n<pre><code>{\n  &quot;name&quot;: &quot;...&quot;,\n  &quot;age&quot;: &quot;...&quot;\n}\n</code></pre>\n<p>I have to map this JSON to following class object</p>\n<pre><code>Class Response {\n  Person person;\n}\n\nClass Person {\n String name;\n String age;\n}\n</code></pre>\n<p>Is there any Jackson annotation that helps me do this without changing the JSON structure or modifying the class structure?</p>\n"},{"tags":["java","mvn-repo"],"comments":[{"owner":{"account_id":2139538,"reputation":42511,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1634639687,"post_id":69629214,"comment_id":123073521,"body_markdown":"You say you have a &quot;repository&quot;, but [there are only 20 repos in total in there](https://mvnrepository.com/repos) and they are mostly owned by big companies. I suspect you don&#39;t mean &#39;repo&#39;, because you refer to a POM file and a POM file would belong to a specific artifact, not an entire repo. Can you clarify what you actually mean?","body":"You say you have a &quot;repository&quot;, but <a href=\"https://mvnrepository.com/repos\" rel=\"nofollow noreferrer\">there are only 20 repos in total in there</a> and they are mostly owned by big companies. I suspect you don&#39;t mean &#39;repo&#39;, because you refer to a POM file and a POM file would belong to a specific artifact, not an entire repo. Can you clarify what you actually mean?"},{"owner":{"account_id":12000421,"reputation":1,"user_id":8780546,"display_name":"Edea_Barby"},"score":0,"creation_date":1634651408,"post_id":69629214,"comment_id":123078777,"body_markdown":"Yes, I meant the artifact ;)","body":"Yes, I meant the artifact ;)"},{"owner":{"account_id":12000421,"reputation":1,"user_id":8780546,"display_name":"Edea_Barby"},"score":0,"creation_date":1634651665,"post_id":69629214,"comment_id":123078903,"body_markdown":"Is there a possibility to add something like\n&lt;description&gt;The maven project description&lt;/description&gt; in the pom file\nand then I will find this description as annotation in the artifact?","body":"Is there a possibility to add something like &lt;description&gt;The maven project description&lt;/description&gt; in the pom file and then I will find this description as annotation in the artifact?"},{"owner":{"account_id":2139538,"reputation":42511,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1634653423,"post_id":69629214,"comment_id":123079766,"body_markdown":"Maven POM [has a &lt;description&gt; tag](https://maven.apache.org/pom.html). It does appear like this website will use that information (e.g. if you look at [this Spring project](https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-test), the description starts &quot;Starter for testing...&quot; and the same can be found [in their POM](https://repo1.maven.org/maven2/org/springframework/boot/spring-boot-starter-test/2.5.5/spring-boot-starter-test-2.5.5.pom)). I don&#39;t see any documentation on the website to that effect though. ... (1/2)","body":"Maven POM <a href=\"https://maven.apache.org/pom.html\" rel=\"nofollow noreferrer\">has a &lt;description&gt; tag</a>. It does appear like this website will use that information (e.g. if you look at <a href=\"https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-test\" rel=\"nofollow noreferrer\">this Spring project</a>, the description starts &quot;Starter for testing...&quot; and the same can be found <a href=\"https://repo1.maven.org/maven2/org/springframework/boot/spring-boot-starter-test/2.5.5/spring-boot-starter-test-2.5.5.pom\" rel=\"nofollow noreferrer\">in their POM</a>). I don&#39;t see any documentation on the website to that effect though. ... (1/2)"},{"owner":{"account_id":2139538,"reputation":42511,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1634653509,"post_id":69629214,"comment_id":123079813,"body_markdown":"(2/2) The owner has his Twitter profile linked on the website, and there&#39;s an email address too. If you wanted a definitive answer, you could just ask him.","body":"(2/2) The owner has his Twitter profile linked on the website, and there&#39;s an email address too. If you wanted a definitive answer, you could just ask him."},{"owner":{"account_id":12000421,"reputation":1,"user_id":8780546,"display_name":"Edea_Barby"},"score":0,"creation_date":1634657386,"post_id":69629214,"comment_id":123081720,"body_markdown":"Thanks a lot @Michael :)","body":"Thanks a lot @Michael :)"}],"owner":{"account_id":12000421,"reputation":1,"user_id":8780546,"display_name":"Edea_Barby"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1634721592,"creation_date":1634639322,"question_id":69629214,"body_markdown":"I have a public artifact in mvnrepository.com, and I need to add an important annotation like the date until I&#39;m gonna do the maintenance of it.\r\nIs there any way to add or change a description of the artifact itself? I&#39;m not an expert with Java but I guess there should be a way through the pom file, but I didn&#39;t find any way to do that.\r\n\r\nFor instance, for PHP I can add this info in the composer.json description and then this annotation will be added in Packagist.\r\n\r\nCould you please help me? I did a lot of research but I didn&#39;t find anything.\r\n\r\n\r\n\r\nThanks :)\r\n","title":"Mvn repository - changing description","body":"<p>I have a public artifact in mvnrepository.com, and I need to add an important annotation like the date until I'm gonna do the maintenance of it.\nIs there any way to add or change a description of the artifact itself? I'm not an expert with Java but I guess there should be a way through the pom file, but I didn't find any way to do that.</p>\n<p>For instance, for PHP I can add this info in the composer.json description and then this annotation will be added in Packagist.</p>\n<p>Could you please help me? I did a lot of research but I didn't find anything.</p>\n<p>Thanks :)</p>\n"},{"tags":["java","mongodb-java","mongodb-java-3.3.0","mongodb-java-3.8"],"comments":[{"owner":{"account_id":13459822,"reputation":1807,"user_id":9712270,"display_name":"magicmn"},"score":0,"creation_date":1634722354,"post_id":69643309,"comment_id":123099169,"body_markdown":"I&#39;m not sure if it will fix your problem, but `Optional` is not designed to be a variable of a POJO. Optional is mostly used as a container around a nullable object returned by methods.","body":"I&#39;m not sure if it will fix your problem, but <code>Optional</code> is not designed to be a variable of a POJO. Optional is mostly used as a container around a nullable object returned by methods."},{"owner":{"account_id":1189122,"reputation":15753,"user_id":1162409,"accept_rate":40,"display_name":"San Jaisy"},"score":0,"creation_date":1634733991,"post_id":69643309,"comment_id":123104057,"body_markdown":"You are right, I found this link for more details https://stackoverflow.com/questions/26327957/should-java-8-getters-return-optional-type/26328555#26328555","body":"You are right, I found this link for more details <a href=\"https://stackoverflow.com/questions/26327957/should-java-8-getters-return-optional-type/26328555#26328555\" title=\"should java 8 getters return optional type\">stackoverflow.com/questions/26327957/&hellip;</a>"}],"owner":{"account_id":1189122,"reputation":15753,"user_id":1162409,"accept_rate":40,"display_name":"San Jaisy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":576,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1634721199,"creation_date":1634721199,"question_id":69643309,"body_markdown":"I have register codec registry for POJOs as below\r\n\r\n    @Singleton\r\n    public record Repository(MongodbConfiguration mongodbConfiguration) implements IRepository {\r\n        @Override\r\n        public &lt;T&gt; MongoCollection&lt;T&gt; getCollection(String collectionName, Class&lt;T&gt; typeParameterClass) {\r\n            // create codec registry for POJOs\r\n            CodecRegistry pojoCodecRegistry = fromRegistries(MongoClientSettings.getDefaultCodecRegistry(),\r\n                    fromProviders(PojoCodecProvider.builder().automatic(true).build()));\r\n    \r\n            MongoClientSettings settings = MongoClientSettings.builder().addCommandListener(new MongoCommand()).build();\r\n    \r\n            MongoClient client = MongoClients.create(settings);\r\n    \r\n            return client\r\n                    .getDatabase(mongodbConfiguration.database())\r\n                    .withCodecRegistry(pojoCodecRegistry)\r\n                    .getCollection(collectionName, typeParameterClass);\r\n        }\r\n    }\r\n\r\nWhen I insert or find some record I get an exception as \r\n\r\n    Caused by: org.bson.codecs.configuration.CodecConfigurationException: Failed to decode &#39;CollectionOrProduct&#39;. Decoding &#39;collection&#39; errored with: Cannot find a public constructor for &#39;Optional&#39;.\r\n    \tat org.bson.codecs.pojo.PojoCodecImpl.decodePropertyModel(PojoCodecImpl.java:206)\r\n    \tat org.bson.codecs.pojo.PojoCodecImpl.decodeProperties(PojoCodecImpl.java:179)\r\n    \tat org.bson.codecs.pojo.PojoCodecImpl.decode(PojoCodecImpl.java:103)\r\n    \tat org.bson.codecs.pojo.PojoCodecImpl.decode(PojoCodecImpl.java:107)\r\n    \tat org.bson.codecs.pojo.LazyPropertyModelCodec.decode(LazyPropertyModelCodec.java:51)\r\n    \tat org.bson.codecs.DecoderContext.decodeWithChildContext(DecoderContext.java:96)\r\n    \tat org.bson.codecs.pojo.PojoCodecImpl.decodePropertyModel(PojoCodecImpl.java:200)\r\n\r\nI do have a public constructor\r\n\r\n    @Introspected\r\n    public class CollectionOrProduct {\r\n        private Optional&lt;List&lt;SelectOptionModel&gt;&gt; product;\r\n        private Optional&lt;List&lt;SelectOptionModel&gt;&gt; collection;\r\n    \r\n        public CollectionOrProduct() {\r\n        }\r\n    \r\n        public CollectionOrProduct(Optional&lt;List&lt;SelectOptionModel&gt;&gt; product, Optional&lt;List&lt;SelectOptionModel&gt;&gt; collection) {\r\n            this.product = product;\r\n            this.collection = collection;\r\n        }\r\n    }","title":"Cannot find a public constructor for &#39;Optional&#39; java mongodb driver","body":"<p>I have register codec registry for POJOs as below</p>\n<pre><code>@Singleton\npublic record Repository(MongodbConfiguration mongodbConfiguration) implements IRepository {\n    @Override\n    public &lt;T&gt; MongoCollection&lt;T&gt; getCollection(String collectionName, Class&lt;T&gt; typeParameterClass) {\n        // create codec registry for POJOs\n        CodecRegistry pojoCodecRegistry = fromRegistries(MongoClientSettings.getDefaultCodecRegistry(),\n                fromProviders(PojoCodecProvider.builder().automatic(true).build()));\n\n        MongoClientSettings settings = MongoClientSettings.builder().addCommandListener(new MongoCommand()).build();\n\n        MongoClient client = MongoClients.create(settings);\n\n        return client\n                .getDatabase(mongodbConfiguration.database())\n                .withCodecRegistry(pojoCodecRegistry)\n                .getCollection(collectionName, typeParameterClass);\n    }\n}\n</code></pre>\n<p>When I insert or find some record I get an exception as</p>\n<pre><code>Caused by: org.bson.codecs.configuration.CodecConfigurationException: Failed to decode 'CollectionOrProduct'. Decoding 'collection' errored with: Cannot find a public constructor for 'Optional'.\n    at org.bson.codecs.pojo.PojoCodecImpl.decodePropertyModel(PojoCodecImpl.java:206)\n    at org.bson.codecs.pojo.PojoCodecImpl.decodeProperties(PojoCodecImpl.java:179)\n    at org.bson.codecs.pojo.PojoCodecImpl.decode(PojoCodecImpl.java:103)\n    at org.bson.codecs.pojo.PojoCodecImpl.decode(PojoCodecImpl.java:107)\n    at org.bson.codecs.pojo.LazyPropertyModelCodec.decode(LazyPropertyModelCodec.java:51)\n    at org.bson.codecs.DecoderContext.decodeWithChildContext(DecoderContext.java:96)\n    at org.bson.codecs.pojo.PojoCodecImpl.decodePropertyModel(PojoCodecImpl.java:200)\n</code></pre>\n<p>I do have a public constructor</p>\n<pre><code>@Introspected\npublic class CollectionOrProduct {\n    private Optional&lt;List&lt;SelectOptionModel&gt;&gt; product;\n    private Optional&lt;List&lt;SelectOptionModel&gt;&gt; collection;\n\n    public CollectionOrProduct() {\n    }\n\n    public CollectionOrProduct(Optional&lt;List&lt;SelectOptionModel&gt;&gt; product, Optional&lt;List&lt;SelectOptionModel&gt;&gt; collection) {\n        this.product = product;\n        this.collection = collection;\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","resttemplate"],"comments":[{"owner":{"account_id":1625750,"reputation":5627,"user_id":1501345,"accept_rate":60,"display_name":"Amit Kumar Lal"},"score":1,"creation_date":1540348513,"post_id":52960242,"comment_id":92827573,"body_markdown":"there is a similar question being asked https://stackoverflow.com/questions/45152484/how-to-set-respond-header-values-in-spring-boot-rest-service-method however I have checked and Found out they are using the same approach as you are.","body":"there is a similar question being asked <a href=\"https://stackoverflow.com/questions/45152484/how-to-set-respond-header-values-in-spring-boot-rest-service-method\" title=\"how to set respond header values in spring boot rest service method\">stackoverflow.com/questions/45152484/&hellip;</a> however I have checked and Found out they are using the same approach as you are."}],"answers":[{"tags":[],"owner":{"account_id":5126886,"reputation":20904,"user_id":4108590,"accept_rate":57,"display_name":"Ravindra Ranwala"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1540348730,"creation_date":1540348730,"answer_id":52960332,"question_id":52960242,"body_markdown":"You can create an interceptor which intercepts all the requests sent by the rest template and add the custom headers like so,\r\n\r\n    public class TokenAuthorizationInterceptor implements ClientHttpRequestInterceptor {\r\n    \t@Override\r\n    \tpublic ClientHttpResponse intercept(HttpRequest request, byte[] body, ClientHttpRequestExecution execution)\r\n    \t\t\tthrows IOException {\r\n    \t\trequest.getHeaders().add(&quot;ContentType&quot;, MediaType.APPLICATION_JSON);\r\n    \t\trequest.getHeaders().add(&quot;muh Header&quot;, &quot;muh value&quot;);\r\n    \t\treturn execution.execute(request, body);\r\n    \t}\r\n    \r\n    }\r\n\r\n    this.restTemplate = new RestTemplate();\r\n    this.restTemplate.getInterceptors().add(new TokenAuthorizationInterceptor());\r\n\r\nThis will work fine if you want to add the same custom headers to all your requests sent through this rest template. One advantage of this approach is you can set custom HTTP headers only in one single place, rather than doing it in everywhere you submit a request.\r\n\r\n","title":"Send custom headers RestTemplate","body":"<p>You can create an interceptor which intercepts all the requests sent by the rest template and add the custom headers like so,</p>\n\n<pre><code>public class TokenAuthorizationInterceptor implements ClientHttpRequestInterceptor {\n    @Override\n    public ClientHttpResponse intercept(HttpRequest request, byte[] body, ClientHttpRequestExecution execution)\n            throws IOException {\n        request.getHeaders().add(\"ContentType\", MediaType.APPLICATION_JSON);\n        request.getHeaders().add(\"muh Header\", \"muh value\");\n        return execution.execute(request, body);\n    }\n\n}\n\nthis.restTemplate = new RestTemplate();\nthis.restTemplate.getInterceptors().add(new TokenAuthorizationInterceptor());\n</code></pre>\n\n<p>This will work fine if you want to add the same custom headers to all your requests sent through this rest template. One advantage of this approach is you can set custom HTTP headers only in one single place, rather than doing it in everywhere you submit a request.</p>\n"},{"tags":[],"owner":{"account_id":1857056,"reputation":106,"user_id":1682393,"display_name":"Thina Garan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1540350853,"creation_date":1540350489,"answer_id":52960534,"question_id":52960242,"body_markdown":"I would go with something like this:\r\n\r\n    import org.springframework.http.HttpHeaders;\r\n    import org.springframework.http.HttpStatus;\r\n    import org.springframework.http.MediaType;\r\n    import org.springframework.http.ResponseEntity;\r\n    import org.springframework.web.bind.annotation.RequestMapping;\r\n    import org.springframework.web.bind.annotation.RequestParam;\r\n    import org.springframework.web.bind.annotation.RestController;\r\n    \r\n    @RestController\r\n    public class WebController {\r\n    \tprivate static final String template = &quot;Hello, %s!&quot;;\r\n    \r\n    \t@RequestMapping(&quot;/greeting&quot;)\r\n    \tpublic ResponseEntity&lt;String&gt; greeting(@RequestParam(value=&quot;name&quot;, defaultValue=&quot;World&quot;) String name){\r\n    \t\tHttpHeaders headers = new HttpHeaders();\r\n    \t\theaders.setContentType(MediaType.APPLICATION_JSON);\r\n    \t\theaders.add(&quot;thisiskey&quot;, &quot;this is value&quot;);\r\n    \t\treturn new ResponseEntity&lt;&gt;(name, headers, HttpStatus.ACCEPTED);\r\n    \t}\r\n    }\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/GlGeb.png\r\n\r\n\r\nPoints to ponder :\r\n\r\n1. How often do you want to add a custom header and how often do they vary?\r\nIf it is only applicable to one or two, you may consider this option however if it is more then twice i would suggest to use a http interceptor.\r\n\r\n2. header.add(&quot;&quot;,&quot;&quot;) -&gt; which implements MultiValueMap&lt;K,V&gt; does not accept a header.add(&quot;mua key&quot;, &quot;...&quot;) -&gt; as there is a space in the key.","title":"Send custom headers RestTemplate","body":"<p>I would go with something like this:</p>\n\n<pre><code>import org.springframework.http.HttpHeaders;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.MediaType;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestParam;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\npublic class WebController {\n    private static final String template = \"Hello, %s!\";\n\n    @RequestMapping(\"/greeting\")\n    public ResponseEntity&lt;String&gt; greeting(@RequestParam(value=\"name\", defaultValue=\"World\") String name){\n        HttpHeaders headers = new HttpHeaders();\n        headers.setContentType(MediaType.APPLICATION_JSON);\n        headers.add(\"thisiskey\", \"this is value\");\n        return new ResponseEntity&lt;&gt;(name, headers, HttpStatus.ACCEPTED);\n    }\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/GlGeb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GlGeb.png\" alt=\"enter image description here\"></a></p>\n\n<p>Points to ponder :</p>\n\n<ol>\n<li><p>How often do you want to add a custom header and how often do they vary?\nIf it is only applicable to one or two, you may consider this option however if it is more then twice i would suggest to use a http interceptor.</p></li>\n<li><p>header.add(\"\",\"\") -> which implements MultiValueMap does not accept a header.add(\"mua key\", \"...\") -> as there is a space in the key.</p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":4646546,"reputation":808,"user_id":3764651,"accept_rate":100,"display_name":"chao_chang"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1540353216,"creation_date":1540353216,"answer_id":52960862,"question_id":52960242,"body_markdown":"The package you are using is wrong, in order to add headers when using Spring restTemplate, you should use `org.springframework.http.HttpHeaders.HttpHeaders` instead of `java.net.http.HttpHeaders`, the latter is what you are trying to use. \r\n\r\nHere is the code snippet that adds request headers.\r\n\r\n\r\n    // request resource\r\n    HttpHeaders headers = new HttpHeaders();\r\n    headers.set(&quot;headerName&quot;, &quot;headerValue&quot;);\r\n    \r\n    HttpEntity entity = new HttpEntity(headers);\r\n    \r\n    ResponseEntity&lt;String&gt; response = restTemplate.exchange(&quot;some url&quot;, HttpMethod.GET, entity, String.class);\r\n\r\n","title":"Send custom headers RestTemplate","body":"<p>The package you are using is wrong, in order to add headers when using Spring restTemplate, you should use <code>org.springframework.http.HttpHeaders.HttpHeaders</code> instead of <code>java.net.http.HttpHeaders</code>, the latter is what you are trying to use. </p>\n\n<p>Here is the code snippet that adds request headers.</p>\n\n<pre><code>// request resource\nHttpHeaders headers = new HttpHeaders();\nheaders.set(\"headerName\", \"headerValue\");\n\nHttpEntity entity = new HttpEntity(headers);\n\nResponseEntity&lt;String&gt; response = restTemplate.exchange(\"some url\", HttpMethod.GET, entity, String.class);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12795274,"reputation":595,"user_id":9258519,"display_name":"Saad Joudi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634721140,"creation_date":1634721140,"answer_id":69643296,"question_id":52960242,"body_markdown":"Cleaner way to do so :\r\n\r\n        return ResponseEntity\r\n                .ok()\r\n                .header(&quot;key&quot;,&quot;value&quot;)\r\n                .contentType(-----)\r\n                .body(----------);\r\n    }","title":"Send custom headers RestTemplate","body":"<p>Cleaner way to do so :</p>\n<pre><code>    return ResponseEntity\n            .ok()\n            .header(&quot;key&quot;,&quot;value&quot;)\n            .contentType(-----)\n            .body(----------);\n}\n</code></pre>\n"}],"owner":{"account_id":1626837,"reputation":2279,"user_id":1502207,"accept_rate":100,"display_name":"Paul McLoughlin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2328,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":52960534,"answer_count":4,"score":1,"last_activity_date":1634721140,"creation_date":1540347831,"question_id":52960242,"body_markdown":"I am trying to set a custom header on my ``RestTemplate`` requests. I&#39;m using ``Spring Boot 2.0.6.RELEASE``\r\n\r\nI try setting them like so, inside of my public method\r\n\r\n    HttpHeaders headers = new HttpHeaders();\r\n    headers.setContentType(MediaType.APPLICATION_JSON);\r\n    headers.add(&quot;muh Header&quot;, &quot;muh value&quot;);\r\n    \r\nEvery time I try and do this, it generates the following error\r\n\r\n``&#39;HttpHeaders(java.util.Map&lt;java.lang.String,java.util.List&lt;java.lang.String&gt;&gt;)&#39; has private access in &#39;java.net.http.``\r\n\r\nI understand the error message to mean that I&#39;m trying to instantiate a private class outside of the class where the private class is declared. \r\n\r\nSo what is the best course of action?","title":"Send custom headers RestTemplate","body":"<p>I am trying to set a custom header on my <code>RestTemplate</code> requests. I'm using <code>Spring Boot 2.0.6.RELEASE</code></p>\n\n<p>I try setting them like so, inside of my public method</p>\n\n<pre><code>HttpHeaders headers = new HttpHeaders();\nheaders.setContentType(MediaType.APPLICATION_JSON);\nheaders.add(\"muh Header\", \"muh value\");\n</code></pre>\n\n<p>Every time I try and do this, it generates the following error</p>\n\n<p><code>'HttpHeaders(java.util.Map&lt;java.lang.String,java.util.List&lt;java.lang.String&gt;&gt;)' has private access in 'java.net.http.</code></p>\n\n<p>I understand the error message to mean that I'm trying to instantiate a private class outside of the class where the private class is declared. </p>\n\n<p>So what is the best course of action?</p>\n"},{"tags":["java","asynchronous","quarkus","mutiny"],"answers":[{"tags":[],"owner":{"account_id":7091735,"reputation":2510,"user_id":5426703,"display_name":"Spyros K"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1634720716,"creation_date":1619792087,"answer_id":67335461,"question_id":67335319,"body_markdown":"A [CompletionStage][1] is an interface that models a stage of a possibly asynchronous computation, that performs an action or computes a value when another CompletionStage completes. \r\n\r\nSo it can be the result of a synchronous or an asynchronous operation. \r\n\r\nThe `CompletableFuture` is a JRE class tha implements the `CompletionStage` interface. \r\n You can create and return a completed `CompletableFuture`, which implements the [CompletionStage][1] using the [CompletableFuture.completedFuture][2] static method. \r\n\r\n     return CompletableFuture.completedFuture(Response.status(Response.Status.BAD_REQUEST).build())\r\n\r\nThe result returned will be already completed with the response provided. \r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletionStage.html\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html#completedFuture-U-","title":"How to return CompletionStage&lt;Response&gt; both synchronously and asynchronously in Quarkus?","body":"<p>A <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletionStage.html\" rel=\"nofollow noreferrer\">CompletionStage</a> is an interface that models a stage of a possibly asynchronous computation, that performs an action or computes a value when another CompletionStage completes.</p>\n<p>So it can be the result of a synchronous or an asynchronous operation.</p>\n<p>The <code>CompletableFuture</code> is a JRE class tha implements the <code>CompletionStage</code> interface.\nYou can create and return a completed <code>CompletableFuture</code>, which implements the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletionStage.html\" rel=\"nofollow noreferrer\">CompletionStage</a> using the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html#completedFuture-U-\" rel=\"nofollow noreferrer\">CompletableFuture.completedFuture</a> static method.</p>\n<pre><code> return CompletableFuture.completedFuture(Response.status(Response.Status.BAD_REQUEST).build())\n</code></pre>\n<p>The result returned will be already completed with the response provided.</p>\n"},{"tags":[],"owner":{"account_id":17473036,"reputation":141,"user_id":12668485,"display_name":"jzimmerli"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1620203832,"creation_date":1620203832,"answer_id":67397821,"question_id":67335319,"body_markdown":"As you tagged this as mutiny. \r\nI assume the async function is a uni or a multy.\r\nIf you use restaesy-mutiny, you just can return the mutly/uni itself, as described in the guide: https://quarkus.io/guides/getting-started-reactive\r\n\r\n     @GET\r\n    @Path(&quot;{id}&quot;)\r\n    public Uni&lt;Response&gt; getSingle(Long id) {\r\n        return Fruit.findById(client, id)\r\n                .onItem().transform(fruit -&gt; fruit != null ? Response.ok(fruit) : Response.status(Status.NOT_FOUND))\r\n                .onItem().transform(ResponseBuilder::build);\r\n    }\r\n\r\nTo handle precondition, you can create an uni with the response itself. Something like:\r\n\r\n    Uni.createFrom()\r\n                .item(Response.status(Response.Status.BAD_REQUEST).build())\r\n\r\nBest is to check out Mutiny guides itself:\r\nhttps://smallrye.io/smallrye-mutiny/guides\r\nTo understand how to handle errors etc.","title":"How to return CompletionStage&lt;Response&gt; both synchronously and asynchronously in Quarkus?","body":"<p>As you tagged this as mutiny.\nI assume the async function is a uni or a multy.\nIf you use restaesy-mutiny, you just can return the mutly/uni itself, as described in the guide: <a href=\"https://quarkus.io/guides/getting-started-reactive\" rel=\"nofollow noreferrer\">https://quarkus.io/guides/getting-started-reactive</a></p>\n<pre><code> @GET\n@Path(&quot;{id}&quot;)\npublic Uni&lt;Response&gt; getSingle(Long id) {\n    return Fruit.findById(client, id)\n            .onItem().transform(fruit -&gt; fruit != null ? Response.ok(fruit) : Response.status(Status.NOT_FOUND))\n            .onItem().transform(ResponseBuilder::build);\n}\n</code></pre>\n<p>To handle precondition, you can create an uni with the response itself. Something like:</p>\n<pre><code>Uni.createFrom()\n            .item(Response.status(Response.Status.BAD_REQUEST).build())\n</code></pre>\n<p>Best is to check out Mutiny guides itself:\n<a href=\"https://smallrye.io/smallrye-mutiny/guides\" rel=\"nofollow noreferrer\">https://smallrye.io/smallrye-mutiny/guides</a>\nTo understand how to handle errors etc.</p>\n"}],"owner":{"account_id":94736,"reputation":48421,"user_id":258483,"accept_rate":46,"display_name":"Dims"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2877,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1634720716,"creation_date":1619791465,"question_id":67335319,"body_markdown":"I have endpoint, which can return both sync and async results\r\n\r\n    @POST\r\n    @Path(&quot;/create-account&quot;)\r\n    public CompletionStage&lt;Response&gt; createAccount(...) {\r\n\r\n       if (preconditions) {\r\n           return myAsyncFunction(...);\r\n       }\r\n       else {\r\n           // how to return error immediately???\r\n           return Response.status(Response.Status.BAD_REQUEST).build(); // incorrect return type\r\n       }\r\n\r\n    }\r\n\r\nHow to return something deliberately, i.e. sync?","title":"How to return CompletionStage&lt;Response&gt; both synchronously and asynchronously in Quarkus?","body":"<p>I have endpoint, which can return both sync and async results</p>\n<pre><code>@POST\n@Path(&quot;/create-account&quot;)\npublic CompletionStage&lt;Response&gt; createAccount(...) {\n\n   if (preconditions) {\n       return myAsyncFunction(...);\n   }\n   else {\n       // how to return error immediately???\n       return Response.status(Response.Status.BAD_REQUEST).build(); // incorrect return type\n   }\n\n}\n</code></pre>\n<p>How to return something deliberately, i.e. sync?</p>\n"},{"tags":["java","mp3","ubuntu-11.04","jmf","javasound"],"comments":[{"owner":{"account_id":145430,"reputation":5284,"user_id":355232,"accept_rate":62,"display_name":"sbrattla"},"score":0,"creation_date":1323122593,"post_id":8392241,"comment_id":10361074,"body_markdown":"Check out JavaZoom (Google it). It does not require you to install JMF, and will of course run wherever java runs.","body":"Check out JavaZoom (Google it). It does not require you to install JMF, and will of course run wherever java runs."},{"owner":{"account_id":1086839,"reputation":173,"user_id":1082359,"display_name":"Reem"},"score":0,"creation_date":1323136853,"post_id":8392241,"comment_id":10364077,"body_markdown":"thanks, I&#39;ll check about it ...","body":"thanks, I&#39;ll check about it ..."}],"answers":[{"tags":[],"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"down_vote_count":0,"up_vote_count":31,"is_accepted":true,"score":31,"last_activity_date":1634720590,"creation_date":1323124668,"answer_id":8392893,"question_id":8392241,"body_markdown":"That is the link from which I downloaded the Jar some time ago, but it seems broken now.  It leads to a page with a long list of APIs for download, none of which are that archive.  :(\r\n\r\n----\r\nFortunately, I use it in various web start apps.  You can get it direct from my [share drive](https://drive.google.com/file/d/0B5B9wDXIGw9lRmpSbEUtenljd1k/view?usp=sharing&amp;resourcekey=0-miuzcGB8fsXn2EQh3sVolA). ","title":"Where can I download the mp3plugin.jar to play MP3s in Java code?","body":"<p>That is the link from which I downloaded the Jar some time ago, but it seems broken now.  It leads to a page with a long list of APIs for download, none of which are that archive.  :(</p>\n<hr />\n<p>Fortunately, I use it in various web start apps.  You can get it direct from my <a href=\"https://drive.google.com/file/d/0B5B9wDXIGw9lRmpSbEUtenljd1k/view?usp=sharing&amp;resourcekey=0-miuzcGB8fsXn2EQh3sVolA\" rel=\"nofollow noreferrer\">share drive</a>.</p>\n"}],"owner":{"account_id":1086839,"reputation":173,"user_id":1082359,"display_name":"Reem"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19369,"favorite_count":0,"down_vote_count":0,"up_vote_count":17,"accepted_answer_id":8392893,"answer_count":1,"score":17,"last_activity_date":1634720590,"creation_date":1323121107,"question_id":8392241,"body_markdown":"I need to Play a MP3 File in Java code under Linux environment (**Ubuntu 11.04**).\r\n\r\nI tried to download the **MP3plugin.jar** file from http://www.oracle.com/technetwork/java/javase/download-137625.html ,but I can&#39;t see it in the list.\r\n\r\nNote : &quot;I downloaded the sun Java Media Framework&quot;\r\n  ","title":"Where can I download the mp3plugin.jar to play MP3s in Java code?","body":"<p>I need to Play a MP3 File in Java code under Linux environment (<strong>Ubuntu 11.04</strong>).</p>\n\n<p>I tried to download the <strong>MP3plugin.jar</strong> file from <a href=\"http://www.oracle.com/technetwork/java/javase/download-137625.html\" rel=\"noreferrer\">http://www.oracle.com/technetwork/java/javase/download-137625.html</a> ,but I can't see it in the list.</p>\n\n<p>Note : \"I downloaded the sun Java Media Framework\"</p>\n"},{"tags":["java","ubuntu","jmf"],"answers":[{"tags":[],"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634720553,"creation_date":1304499684,"answer_id":5881003,"question_id":5880850,"body_markdown":"It is not necessary to install JMF just to be able to play MP3 files.  Instead, add the &lt;a href=&quot;https://drive.google.com/file/d/0B5B9wDXIGw9lRmpSbEUtenljd1k/view?usp=sharing&amp;resourcekey=0-miuzcGB8fsXn2EQh3sVolA&quot;&gt;mp3plugin.jar&lt;/a&gt; to the application&#39;s run-time class-path and Java Sound will be able to load it.  (Yes, `mp3plugin.jar` is part of the JMF, but it is also usable separately.)","title":"How to let Java Media Framework mp3Plugin work on Ubuntu 11.04?","body":"<p>It is not necessary to install JMF just to be able to play MP3 files.  Instead, add the <a href=\"https://drive.google.com/file/d/0B5B9wDXIGw9lRmpSbEUtenljd1k/view?usp=sharing&resourcekey=0-miuzcGB8fsXn2EQh3sVolA\" rel=\"nofollow noreferrer\">mp3plugin.jar</a> to the application's run-time class-path and Java Sound will be able to load it.  (Yes, <code>mp3plugin.jar</code> is part of the JMF, but it is also usable separately.)</p>\n"},{"tags":[],"owner":{"account_id":776,"reputation":4705,"user_id":1009,"accept_rate":83,"display_name":"jassuncao"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1304499686,"creation_date":1304499686,"answer_id":5881004,"question_id":5880850,"body_markdown":"Put the jar mp3plugin.jar that you can find in [here][1] in JAVA_HOME/lib/ext and run the following command:\r\n\r\n    java com.sun.media.codec.audio.mp3.JavaDecoder\r\n\r\n\r\n  [1]: http://www.oracle.com/technetwork/java/javase/download-137625.html","title":"How to let Java Media Framework mp3Plugin work on Ubuntu 11.04?","body":"<p>Put the jar mp3plugin.jar that you can find in <a href=\"http://www.oracle.com/technetwork/java/javase/download-137625.html\" rel=\"nofollow\">here</a> in JAVA_HOME/lib/ext and run the following command:</p>\n\n<pre><code>java com.sun.media.codec.audio.mp3.JavaDecoder\n</code></pre>\n"}],"owner":{"account_id":775730,"reputation":1,"user_id":737630,"display_name":"vincenzo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1232,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1634720553,"creation_date":1304498881,"question_id":5880850,"body_markdown":"Hello i need to run my &quot;java mp3Player&quot; on ubuntu, my code uses JMF to play mp3 files! &lt;br&gt;Since i coded and tested in windows nothing goes wrong but now that i need my app works on ubuntu i can&#39;t install the JMF.&lt;br&gt; I used bentokit installer for the JMF but don&#39;t know what to do to install the mp3Plugin!&lt;br&gt; In other the jmf installer for linux does not have the file sound.jar but other release (windows and solaris) have it! somenone know why?&lt;br&gt; Thanks for the attention!","title":"How to let Java Media Framework mp3Plugin work on Ubuntu 11.04?","body":"<p>Hello i need to run my \"java mp3Player\" on ubuntu, my code uses JMF to play mp3 files! <br>Since i coded and tested in windows nothing goes wrong but now that i need my app works on ubuntu i can't install the JMF.<br> I used bentokit installer for the JMF but don't know what to do to install the mp3Plugin!<br> In other the jmf installer for linux does not have the file sound.jar but other release (windows and solaris) have it! somenone know why?<br> Thanks for the attention!</p>\n"},{"tags":["java","encoding","mp3","jmf","decoding"],"answers":[{"tags":[],"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1634720531,"creation_date":1344904139,"answer_id":11944154,"question_id":11935545,"body_markdown":"The [mp3plugin.jar](https://drive.google.com/file/d/0B5B9wDXIGw9lRmpSbEUtenljd1k/view?usp=sharing&amp;resourcekey=0-miuzcGB8fsXn2EQh3sVolA) of JMF is an SPI for **decoding** MP3.  It does not provide an SPI for encoding.","title":"Java Media Framework MP3 plugin","body":"<p>The <a href=\"https://drive.google.com/file/d/0B5B9wDXIGw9lRmpSbEUtenljd1k/view?usp=sharing&amp;resourcekey=0-miuzcGB8fsXn2EQh3sVolA\" rel=\"nofollow noreferrer\">mp3plugin.jar</a> of JMF is an SPI for <strong>decoding</strong> MP3.  It does not provide an SPI for encoding.</p>\n"}],"owner":{"account_id":1523995,"reputation":391,"user_id":1422867,"accept_rate":44,"display_name":"yasserbn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1800,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1634720531,"creation_date":1344865430,"question_id":11935545,"body_markdown":"I am looking for a library that can encode/decode mp3 files. I want to write a program that can change the bit rate of mp3 files.\r\n\r\nDoes anyone know if the JMF MP3 plugin from Oracle do this job. Here is its link:\r\n[JMF MP3 plugin][1]\r\n\r\n\r\n\r\n  [1]: http://www.oracle.com/technetwork/java/javase/download-137625.html","title":"Java Media Framework MP3 plugin","body":"<p>I am looking for a library that can encode/decode mp3 files. I want to write a program that can change the bit rate of mp3 files.</p>\n\n<p>Does anyone know if the JMF MP3 plugin from Oracle do this job. Here is its link:\n<a href=\"http://www.oracle.com/technetwork/java/javase/download-137625.html\" rel=\"nofollow\">JMF MP3 plugin</a></p>\n"},{"tags":["java","swing","audio","applet"],"comments":[{"owner":{"account_id":40721,"reputation":357288,"user_id":118068,"display_name":"Marc B"},"score":6,"creation_date":1319061616,"post_id":7828708,"comment_id":9542847,"body_markdown":"Ooof. .au files are basically uncompressesd raw pcm (8bit/11khz, I think?) Definitely want to switch over to a lossy compressed format. They&#39;ll probably turn into 200kb mp3s or something.","body":"Ooof. .au files are basically uncompressesd raw pcm (8bit/11khz, I think?) Definitely want to switch over to a lossy compressed format. They&#39;ll probably turn into 200kb mp3s or something."}],"answers":[{"tags":[],"owner":{"account_id":271709,"reputation":8427,"user_id":562388,"accept_rate":100,"display_name":"alf"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1319061606,"creation_date":1319061606,"answer_id":7828741,"question_id":7828708,"body_markdown":"Check out any [download time calculator](http://www.t1shopper.com/tools/calculate/downloadcalculator.php) — it&#39;s more than a minute on a very good line. Sounds like extremely heavy.","title":"Applet size (15 megabytes) too heavy to load?","body":"<p>Check out any <a href=\"http://www.t1shopper.com/tools/calculate/downloadcalculator.php\" rel=\"nofollow\">download time calculator</a> — it's more than a minute on a very good line. Sounds like extremely heavy.</p>\n"},{"tags":[],"owner":{"account_id":944792,"reputation":1565,"user_id":972241,"accept_rate":100,"display_name":"xthexder"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1319062644,"creation_date":1319061617,"answer_id":7828746,"question_id":7828708,"body_markdown":"You could use [JLayer](http://www.javazoom.net/javalayer/javalayer.html) for using mp3&#39;s.\r\n\r\nOne option to lower your applet size is load the audio separately or stream it, that way you can at least have a loading bar/image while it&#39;s getting the music.","title":"Applet size (15 megabytes) too heavy to load?","body":"<p>You could use <a href=\"http://www.javazoom.net/javalayer/javalayer.html\" rel=\"nofollow\">JLayer</a> for using mp3's.</p>\n\n<p>One option to lower your applet size is load the audio separately or stream it, that way you can at least have a loading bar/image while it's getting the music.</p>\n"},{"tags":[],"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1634720511,"creation_date":1319062600,"answer_id":7828890,"question_id":7828708,"body_markdown":"&gt; Anybody has suggestion of how to use mp3 maybe instead ..\r\n\r\nAdd the [mp3plugin.jar](https://drive.google.com/file/d/0B5B9wDXIGw9lRmpSbEUtenljd1k/view?usp=sharing&amp;resourcekey=0-miuzcGB8fsXn2EQh3sVolA) of the JMF to the run-time class-path of the applet (in the archive element) and Java Sound will be able to open the MP3s as though they were a wav or au.\r\n\r\nThe MP3 plugin will not be able to parse some of the more modern MP3s that do non-standard things like including cover art in the MP3, but encode them using a standard MP3 format and it will handle them OK.\r\n\r\n---------------\r\n\r\n&gt; ..what did you mean to add the mp3plugin.jar to the run time class path of the applet (in the archive element)?\r\n\r\n    &lt;HTML&gt; \r\n    &lt;BODY&gt; \r\n    &lt;APPLET \r\n        archive=&quot;MyGame.jar,mp3plugin.jar&quot; \r\n        code=&quot;GUI.JPanelGameApplet&quot; \r\n        width=800 \r\n        height=580&gt;\r\n    &lt;/APPLET&gt; \r\n    &lt;/P&gt; \r\n    &lt;/BODY&gt; \r\n    &lt;/HTML&gt;\r\n\r\nNote that I also changed `Archive` to `archive` (just to keep things consistent) and \r\n\r\n    code=&quot;GUI/JPanelGameApplet.class&quot;\r\n\r\n(generally tolerated, but not correct) to \r\n\r\n    code=&quot;GUI.JPanelGameApplet&quot; \r\n\r\n(which presumes the applet is in the `GUI` package).  If the applet is **not** in the GUI package, the element should be written differently.\r\n\r\n--------------------------\r\n&gt; I&#39;ve downloaded the MP3 plugin in the exe format ..\r\n\r\nIgnore the EXE link and download the Zip! \r\n\r\n&gt; ..I installed it&quot; \r\n\r\nDon&#39;t bother to run/install the EXE (an EXE is no use to end users on Mac. or Unix/Linux). Just expand the Zip and add the Jar to the run-time class-path \r\n\r\n&gt; I&#39;ll definitely do that code changes in the HTML..\r\n\r\nThat will be &#39;problem solved&#39; (for the embedded applet).","title":"Applet size (15 megabytes) too heavy to load?","body":"<blockquote>\n<p>Anybody has suggestion of how to use mp3 maybe instead ..</p>\n</blockquote>\n<p>Add the <a href=\"https://drive.google.com/file/d/0B5B9wDXIGw9lRmpSbEUtenljd1k/view?usp=sharing&amp;resourcekey=0-miuzcGB8fsXn2EQh3sVolA\" rel=\"nofollow noreferrer\">mp3plugin.jar</a> of the JMF to the run-time class-path of the applet (in the archive element) and Java Sound will be able to open the MP3s as though they were a wav or au.</p>\n<p>The MP3 plugin will not be able to parse some of the more modern MP3s that do non-standard things like including cover art in the MP3, but encode them using a standard MP3 format and it will handle them OK.</p>\n<hr />\n<blockquote>\n<p>..what did you mean to add the mp3plugin.jar to the run time class path of the applet (in the archive element)?</p>\n</blockquote>\n<pre><code>&lt;HTML&gt; \n&lt;BODY&gt; \n&lt;APPLET \n    archive=&quot;MyGame.jar,mp3plugin.jar&quot; \n    code=&quot;GUI.JPanelGameApplet&quot; \n    width=800 \n    height=580&gt;\n&lt;/APPLET&gt; \n&lt;/P&gt; \n&lt;/BODY&gt; \n&lt;/HTML&gt;\n</code></pre>\n<p>Note that I also changed <code>Archive</code> to <code>archive</code> (just to keep things consistent) and</p>\n<pre><code>code=&quot;GUI/JPanelGameApplet.class&quot;\n</code></pre>\n<p>(generally tolerated, but not correct) to</p>\n<pre><code>code=&quot;GUI.JPanelGameApplet&quot; \n</code></pre>\n<p>(which presumes the applet is in the <code>GUI</code> package).  If the applet is <strong>not</strong> in the GUI package, the element should be written differently.</p>\n<hr />\n<blockquote>\n<p>I've downloaded the MP3 plugin in the exe format ..</p>\n</blockquote>\n<p>Ignore the EXE link and download the Zip!</p>\n<blockquote>\n<p>..I installed it&quot;</p>\n</blockquote>\n<p>Don't bother to run/install the EXE (an EXE is no use to end users on Mac. or Unix/Linux). Just expand the Zip and add the Jar to the run-time class-path</p>\n<blockquote>\n<p>I'll definitely do that code changes in the HTML..</p>\n</blockquote>\n<p>That will be 'problem solved' (for the embedded applet).</p>\n"}],"owner":{"account_id":937023,"reputation":5933,"user_id":965778,"accept_rate":70,"display_name":"JavaSa"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":304,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1634720511,"creation_date":1319061435,"question_id":7828708,"body_markdown":"I would like to know whether 15 mega is quite heavy applet to load?  \r\nMy main problem are two sound files(.Au) that its weight is about 9 mega bytes.  \r\nAnybody has suggestion of how to use mp3 maybe instead or other ideas of reducing weight?  \r\nThanks\r\n\r\nRelevant code:\r\n\r\n \r\n\r\n       public class DJ \r\n        {\r\n        \r\n            private ArrayList&lt;Clip&gt; m_Records = new ArrayList&lt;Clip&gt;();\r\n            private int m_CurrentRecored = 0;\r\n            private Thread m_MusicThread = null;\r\n            private AppletContext m_AppletContext;\r\n            //java.net.URL m_CodeBase;\r\n            //AppletContext ac;\r\n        \r\n            public DJ() \r\n            {\r\n                try \r\n                {\r\n                    createClip(getClass().getResourceAsStream(&quot;/Music/train.mp3&quot;));\r\n                    createClip(getClass().getResourceAsStream(&quot;/Music/machine.mp3&quot;));\r\n                }\r\n                catch (Exception ex)\r\n                {\r\n                    Logger.getLogger(DJ.class.getName()).log(Level.SEVERE, null, ex);\r\n                }\r\n        \r\n            }\r\n        \r\n            private void createClip(java.io.InputStream i_SoundFileStream) throws Exception\r\n            {\r\n        \r\n                InputStream i = new AudioStream(i_SoundFileStream);\r\n        \r\n                AudioInputStream sound = AudioSystem.getAudioInputStream(i);\r\n                // load the sound into memory (a Clip)\r\n                DataLine.Info info = new DataLine.Info(Clip.class, sound.getFormat());\r\n                Clip clip = (Clip) AudioSystem.getLine(info);\r\n                clip.open(sound);\r\n                m_Records.add(clip);\r\n            }\r\n\r\n","title":"Applet size (15 megabytes) too heavy to load?","body":"<p>I would like to know whether 15 mega is quite heavy applet to load?<br>\nMy main problem are two sound files(.Au) that its weight is about 9 mega bytes.<br>\nAnybody has suggestion of how to use mp3 maybe instead or other ideas of reducing weight?<br>\nThanks</p>\n\n<p>Relevant code:</p>\n\n<pre><code>   public class DJ \n    {\n\n        private ArrayList&lt;Clip&gt; m_Records = new ArrayList&lt;Clip&gt;();\n        private int m_CurrentRecored = 0;\n        private Thread m_MusicThread = null;\n        private AppletContext m_AppletContext;\n        //java.net.URL m_CodeBase;\n        //AppletContext ac;\n\n        public DJ() \n        {\n            try \n            {\n                createClip(getClass().getResourceAsStream(\"/Music/train.mp3\"));\n                createClip(getClass().getResourceAsStream(\"/Music/machine.mp3\"));\n            }\n            catch (Exception ex)\n            {\n                Logger.getLogger(DJ.class.getName()).log(Level.SEVERE, null, ex);\n            }\n\n        }\n\n        private void createClip(java.io.InputStream i_SoundFileStream) throws Exception\n        {\n\n            InputStream i = new AudioStream(i_SoundFileStream);\n\n            AudioInputStream sound = AudioSystem.getAudioInputStream(i);\n            // load the sound into memory (a Clip)\n            DataLine.Info info = new DataLine.Info(Clip.class, sound.getFormat());\n            Clip clip = (Clip) AudioSystem.getLine(info);\n            clip.open(sound);\n            m_Records.add(clip);\n        }\n</code></pre>\n"},{"tags":["java","audio","mp3","javasound","jlayer"],"answers":[{"tags":[],"owner":{"account_id":269227,"reputation":18215,"user_id":558433,"accept_rate":72,"display_name":"Marcos Vasconcelos"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1302894590,"creation_date":1302894590,"answer_id":5681252,"question_id":5681213,"body_markdown":"You can&#39;t do that with the Default Player implementation.\r\n\r\nYou need to implement the stream classes and read data which those DataSourceLine classes.\r\nIt&#39;s a bit hard work, but it&#39;s possible. I did it 2 years ago, if I found my code I post it to you.","title":"pausing mp3 in java","body":"<p>You can't do that with the Default Player implementation.</p>\n\n<p>You need to implement the stream classes and read data which those DataSourceLine classes.\nIt's a bit hard work, but it's possible. I did it 2 years ago, if I found my code I post it to you.</p>\n"},{"tags":[],"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1634720490,"creation_date":1302897274,"answer_id":5681697,"question_id":5681213,"body_markdown":"Standard Java Sound provides all the functionality stated in the question.  To add MP3 (decoding) support to Java Sound, add the &lt;a href=&quot;https://drive.google.com/file/d/0B5B9wDXIGw9lRmpSbEUtenljd1k/view?usp=sharing&amp;resourcekey=0-miuzcGB8fsXn2EQh3sVolA&quot;&gt;mp3plugin.jar&lt;/a&gt; (of the JMF) to the run-time class-path of the application.","title":"pausing mp3 in java","body":"<p>Standard Java Sound provides all the functionality stated in the question.  To add MP3 (decoding) support to Java Sound, add the <a href=\"https://drive.google.com/file/d/0B5B9wDXIGw9lRmpSbEUtenljd1k/view?usp=sharing&resourcekey=0-miuzcGB8fsXn2EQh3sVolA\" rel=\"nofollow noreferrer\">mp3plugin.jar</a> (of the JMF) to the run-time class-path of the application.</p>\n"}],"owner":{"account_id":365431,"reputation":4956,"user_id":2057091,"accept_rate":89,"display_name":"Aserre"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1640,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":5681252,"answer_count":2,"score":3,"last_activity_date":1634720490,"creation_date":1302894282,"question_id":5681213,"body_markdown":"I&#39;m currently working on a project in which i need to play a background mp3 sound. I managed to do that using the Jlayer library and a piece of code found [here][1]\r\n\r\nHowever, I needed to add some more features to this code, such as loop playing and pause.  \r\nThe loop function was fairly easy to implement, but i&#39;ve spent hours looking for a way to pause and resume mp3 files.\r\n\r\nMy guess would have been to use the play(int frames) method in the Player class, using the getPosition() method and the mp3 total frame number, but i can&#39;t manage to get the total frame number.\r\n\r\nAny clue ? I just need this pause/resume method, so if you know one way different from this, feel free to post\r\n\r\ni&#39;ve also been trying some stuff with the BasicPlayer library (link [here][2]), but i always end up getting javax.sound.sampled.UnsupportedAudioFileException when trying to read any mp3 file\r\n\r\n\r\n  [1]: http://introcs.cs.princeton.edu/faq/mp3/mp3.html\r\n  [2]: http://www.javazoom.net/jlgui/sources.html","title":"pausing mp3 in java","body":"<p>I'm currently working on a project in which i need to play a background mp3 sound. I managed to do that using the Jlayer library and a piece of code found <a href=\"http://introcs.cs.princeton.edu/faq/mp3/mp3.html\" rel=\"nofollow\">here</a></p>\n\n<p>However, I needed to add some more features to this code, such as loop playing and pause.<br>\nThe loop function was fairly easy to implement, but i've spent hours looking for a way to pause and resume mp3 files.</p>\n\n<p>My guess would have been to use the play(int frames) method in the Player class, using the getPosition() method and the mp3 total frame number, but i can't manage to get the total frame number.</p>\n\n<p>Any clue ? I just need this pause/resume method, so if you know one way different from this, feel free to post</p>\n\n<p>i've also been trying some stuff with the BasicPlayer library (link <a href=\"http://www.javazoom.net/jlgui/sources.html\" rel=\"nofollow\">here</a>), but i always end up getting javax.sound.sampled.UnsupportedAudioFileException when trying to read any mp3 file</p>\n"},{"tags":["java","mp3","javasound","visualizer"],"answers":[{"tags":[],"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1634720454,"creation_date":1332107118,"answer_id":9762594,"question_id":9762421,"body_markdown":"&gt; However, the jdk.. \r\n\r\nIt is not the JDK that matters, but the JRE.\r\n\r\n&gt; ..can only load .wav files. ..\r\n\r\nIt can load (a subset of) the types returned by [`AudioSystem.getAudioFileTypes()`](http://docs.oracle.com/javase/7/docs/api/javax/sound/sampled/AudioSystem.html#getAudioFileTypes%28%29).  If you check the docs for [`AudioFileFormat.Type`](http://docs.oracle.com/javase/7/docs/api/javax/sound/sampled/AudioFileFormat.Type.html) in Java 7, you&#39;ll see a list of 5 types, but the ultimate check is what the JRE returns.\r\n\r\n&gt; .. So I&#39;m looking for a flexible addon that&#39;ll enable me to load .mp3.\r\n\r\nThe [`mp3plugin.jar`](https://drive.google.com/file/d/0B5B9wDXIGw9lRmpSbEUtenljd1k/view?usp=sharing&amp;resourcekey=0-miuzcGB8fsXn2EQh3sVolA) of the JMF can be added to the run-time class-path to add support for MP3 decoding to JavaSound.  \r\n\r\n&gt; Lemme know if you&#39;ve attempted music visualizers before.\r\n\r\n![Music Visualizer][1]\r\n\r\n[Yup](https://www.youtube.com/user/DrewTubeish/videos) ;)\r\n\r\n---\r\n\r\n&gt; I made this wonderful starry background and thought the stars should twinkle and glow based on the music. Do you think it&#39;s possible to detect the odd instrument that&#39;s playing? Like drums or strings? \r\n\r\nI recently broke my own player and am busy with other things, as such I&#39;m using WinAmp to play my favorite tracks and watching some of the (300+) visualizations WinAmp offers.  The reason I mention that is that my traces are of two types, &#39;oscilloscope&#39; style &amp; a &#39;Lissajous&#39; style.  Check the YouYube site linked above for examples of each.\r\n\r\nWinAmp OTOH offers a plethora of seemingly quite different styles, some of which are closely tied to the music visually, and others which are entirely unrelated (just pretty animations in their own right).  I figure the ones that have a linkage to the music (beyond representing the trace itself - like my software), are basing their graphics on the volume of the signal, which can then sometimes represent a beat.\r\n\r\nThe correct way to calculate the volume is to come up with a number in decibels (dB), but in my software I implemented a simpler algorithm to detect the RMS of each channel.  You can see those volume bars in a Rasputina Track.\r\n\r\n![Visualization with RMS levels][2]\r\n\r\nThey are not especially clear in (the lower left/right of) that image, but watch [the video](https://www.youtube.com/watch?v=TIHwTMKj9PU&amp;feature=plcp&amp;context=C4e1091eVDvjVQa1PpcFNcyNNUmyAUN0WoThOVaCR7bPczt1XQMnc=) &amp; I think you&#39;ll find they are easier to see &amp; offer a good basis for the &#39;pulsating stars&#39; type of effect you are after (a number to multiply a basic brightness by).  To get stars to twinkle differently according to frequency (e.g. bass - low, violins - high) you&#39;d need to look to something like spectrum analysis - a Fast Fourier Transform is one way to do that.\r\n\r\n  [1]: http://i.stack.imgur.com/ZYuI6.jpg\r\n  [2]: http://i.stack.imgur.com/c3eHt.jpg","title":"Best addon for reading data from .mp3 with JDK 1.6","body":"<blockquote>\n<p>However, the jdk..</p>\n</blockquote>\n<p>It is not the JDK that matters, but the JRE.</p>\n<blockquote>\n<p>..can only load .wav files. ..</p>\n</blockquote>\n<p>It can load (a subset of) the types returned by <a href=\"http://docs.oracle.com/javase/7/docs/api/javax/sound/sampled/AudioSystem.html#getAudioFileTypes%28%29\" rel=\"nofollow noreferrer\"><code>AudioSystem.getAudioFileTypes()</code></a>.  If you check the docs for <a href=\"http://docs.oracle.com/javase/7/docs/api/javax/sound/sampled/AudioFileFormat.Type.html\" rel=\"nofollow noreferrer\"><code>AudioFileFormat.Type</code></a> in Java 7, you'll see a list of 5 types, but the ultimate check is what the JRE returns.</p>\n<blockquote>\n<p>.. So I'm looking for a flexible addon that'll enable me to load .mp3.</p>\n</blockquote>\n<p>The <a href=\"https://drive.google.com/file/d/0B5B9wDXIGw9lRmpSbEUtenljd1k/view?usp=sharing&amp;resourcekey=0-miuzcGB8fsXn2EQh3sVolA\" rel=\"nofollow noreferrer\"><code>mp3plugin.jar</code></a> of the JMF can be added to the run-time class-path to add support for MP3 decoding to JavaSound.</p>\n<blockquote>\n<p>Lemme know if you've attempted music visualizers before.</p>\n</blockquote>\n<p><img src=\"https://i.stack.imgur.com/ZYuI6.jpg\" alt=\"Music Visualizer\" /></p>\n<p><a href=\"https://www.youtube.com/user/DrewTubeish/videos\" rel=\"nofollow noreferrer\">Yup</a> ;)</p>\n<hr />\n<blockquote>\n<p>I made this wonderful starry background and thought the stars should twinkle and glow based on the music. Do you think it's possible to detect the odd instrument that's playing? Like drums or strings?</p>\n</blockquote>\n<p>I recently broke my own player and am busy with other things, as such I'm using WinAmp to play my favorite tracks and watching some of the (300+) visualizations WinAmp offers.  The reason I mention that is that my traces are of two types, 'oscilloscope' style &amp; a 'Lissajous' style.  Check the YouYube site linked above for examples of each.</p>\n<p>WinAmp OTOH offers a plethora of seemingly quite different styles, some of which are closely tied to the music visually, and others which are entirely unrelated (just pretty animations in their own right).  I figure the ones that have a linkage to the music (beyond representing the trace itself - like my software), are basing their graphics on the volume of the signal, which can then sometimes represent a beat.</p>\n<p>The correct way to calculate the volume is to come up with a number in decibels (dB), but in my software I implemented a simpler algorithm to detect the RMS of each channel.  You can see those volume bars in a Rasputina Track.</p>\n<p><img src=\"https://i.stack.imgur.com/c3eHt.jpg\" alt=\"Visualization with RMS levels\" /></p>\n<p>They are not especially clear in (the lower left/right of) that image, but watch <a href=\"https://www.youtube.com/watch?v=TIHwTMKj9PU&amp;feature=plcp&amp;context=C4e1091eVDvjVQa1PpcFNcyNNUmyAUN0WoThOVaCR7bPczt1XQMnc=\" rel=\"nofollow noreferrer\">the video</a> &amp; I think you'll find they are easier to see &amp; offer a good basis for the 'pulsating stars' type of effect you are after (a number to multiply a basic brightness by).  To get stars to twinkle differently according to frequency (e.g. bass - low, violins - high) you'd need to look to something like spectrum analysis - a Fast Fourier Transform is one way to do that.</p>\n"},{"tags":[],"owner":{"account_id":424804,"reputation":7765,"user_id":805007,"accept_rate":83,"display_name":"Phil Freihofner"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1332114743,"creation_date":1332114743,"answer_id":9763397,"question_id":9762421,"body_markdown":"Javazoom has a library for mp3 format.\r\n\r\nhttp://www.javazoom.net/javalayer/javalayer.html\r\n\r\nI&#39;ve not used it myself. But I know others have done so successfully.\r\n\r\nTools for extracting instruments from a mix HAS become a reality, but I don&#39;t know if they have been realized in Java. I&#39;m guessing it is possible but only with considerable effort and limited success at this point. One must contend with aspects of Java that make this sort of thing trickier than they might be in a &quot;C&quot; family language (lack of real-time guarantees: variance in garbage collection timing, thread switching).","title":"Best addon for reading data from .mp3 with JDK 1.6","body":"<p>Javazoom has a library for mp3 format.</p>\n\n<p><a href=\"http://www.javazoom.net/javalayer/javalayer.html\" rel=\"nofollow\">http://www.javazoom.net/javalayer/javalayer.html</a></p>\n\n<p>I've not used it myself. But I know others have done so successfully.</p>\n\n<p>Tools for extracting instruments from a mix HAS become a reality, but I don't know if they have been realized in Java. I'm guessing it is possible but only with considerable effort and limited success at this point. One must contend with aspects of Java that make this sort of thing trickier than they might be in a \"C\" family language (lack of real-time guarantees: variance in garbage collection timing, thread switching).</p>\n"}],"owner":{"account_id":1333437,"reputation":883,"user_id":1276759,"accept_rate":79,"display_name":"Perry Monschau"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":918,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"closed_date":1546083221,"accepted_answer_id":9762594,"answer_count":2,"score":3,"last_activity_date":1634720454,"creation_date":1332105911,"question_id":9762421,"body_markdown":"I&#39;m attempting to write a music visualizer. I&#39;ve looked into it and sound.sampled looks like a good library for reading the data. However, the jdk can only load .wav files. So I&#39;m looking for a flexible addon that&#39;ll enable me to load .mp3.\r\n\r\nThe classes I&#39;ll be using are here: \r\nhttp://uk.answers.yahoo.com/question/index?qid=20100125081723AAdnYzf\r\n\r\nP.S. Lemme know if you&#39;ve attempted music visualizers before.","title":"Best addon for reading data from .mp3 with JDK 1.6","body":"<p>I'm attempting to write a music visualizer. I've looked into it and sound.sampled looks like a good library for reading the data. However, the jdk can only load .wav files. So I'm looking for a flexible addon that'll enable me to load .mp3.</p>\n\n<p>The classes I'll be using are here: \n<a href=\"http://uk.answers.yahoo.com/question/index?qid=20100125081723AAdnYzf\" rel=\"nofollow\">http://uk.answers.yahoo.com/question/index?qid=20100125081723AAdnYzf</a></p>\n\n<p>P.S. Lemme know if you've attempted music visualizers before.</p>\n"},{"tags":["java","mp3"],"comments":[{"owner":{"account_id":120605,"reputation":24173,"user_id":313137,"display_name":"Romain Hippeau"},"score":1,"creation_date":1301245781,"post_id":5448511,"comment_id":6175752,"body_markdown":"This code works: http://stackoverflow.com/questions/3125934/lineunavailableexception-for-playing-mp3-with-java/3126243#3126243","body":"This code works: <a href=\"http://stackoverflow.com/questions/3125934/lineunavailableexception-for-playing-mp3-with-java/3126243#3126243\" title=\"lineunavailableexception for playing mp3 with java\">stackoverflow.com/questions/3125934/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634720381,"creation_date":1301222271,"answer_id":5448696,"question_id":5448511,"body_markdown":"If you can figure how to play a sound file using Java Sound (avoid Clip(1)), then it is possible to play MP3 files by adding the JMF based &lt;a href=&quot;https://drive.google.com/file/d/0B5B9wDXIGw9lRmpSbEUtenljd1k/view?usp=sharing&amp;resourcekey=0-miuzcGB8fsXn2EQh3sVolA&quot;&gt;mp3plugin.jar&lt;/a&gt; to the run-time class-path of the application.\r\n\r\n 1. Clip is fine for small sound samples, but is has a limit of just 2 seconds of 16 bit stereo, 44.1 KHz sound, on most Sun JREs.","title":"How to play mp3 with FMJ?","body":"<p>If you can figure how to play a sound file using Java Sound (avoid Clip(1)), then it is possible to play MP3 files by adding the JMF based <a href=\"https://drive.google.com/file/d/0B5B9wDXIGw9lRmpSbEUtenljd1k/view?usp=sharing&resourcekey=0-miuzcGB8fsXn2EQh3sVolA\" rel=\"nofollow noreferrer\">mp3plugin.jar</a> to the run-time class-path of the application.</p>\n<ol>\n<li>Clip is fine for small sound samples, but is has a limit of just 2 seconds of 16 bit stereo, 44.1 KHz sound, on most Sun JREs.</li>\n</ol>\n"}],"owner":{"account_id":730557,"reputation":11,"user_id":678796,"display_name":"SamySam"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":810,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1634720381,"creation_date":1301220262,"question_id":5448511,"body_markdown":"I read in the API, but still not found out how to play a mp3. \r\nI have not found any tutorials...\r\n\r\nCan someone tell me how to use FMJ ? Or give me some tutorial links?\r\n\r\nThank you","title":"How to play mp3 with FMJ?","body":"<p>I read in the API, but still not found out how to play a mp3. \nI have not found any tutorials...</p>\n\n<p>Can someone tell me how to use FMJ ? Or give me some tutorial links?</p>\n\n<p>Thank you</p>\n"},{"tags":["java","mp3","javasound"],"comments":[{"owner":{"account_id":417300,"reputation":218,"user_id":793215,"display_name":"Collecter"},"score":0,"creation_date":1311952193,"post_id":6875186,"comment_id":8180299,"body_markdown":"Did you actually add it to the build path? I know you need to in eclipse, and I imagine netbeans would be the same way.","body":"Did you actually add it to the build path? I know you need to in eclipse, and I imagine netbeans would be the same way."},{"owner":{"account_id":387064,"reputation":2640,"user_id":745191,"accept_rate":65,"display_name":"program-o-steve"},"score":0,"creation_date":1311952309,"post_id":6875186,"comment_id":8180330,"body_markdown":"@ Collecter I have just included the jar file in my project library .","body":"@ Collecter I have just included the jar file in my project library ."}],"answers":[{"tags":[],"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1634720352,"creation_date":1311953195,"answer_id":6875417,"question_id":6875186,"body_markdown":"It is not necessary to import a Service Provider Interface at compile time.  Simply add it to the run-time class-path and it will be able to play mp3&#39;s as well as its (default) wave/pcm/midi files.\r\n\r\nI use the [`mp3plugin.jar`](https://drive.google.com/file/d/0B5B9wDXIGw9lRmpSbEUtenljd1k/view?usp=sharing&amp;resourcekey=0-miuzcGB8fsXn2EQh3sVolA) this way for DukeBox, a little player for M3U style playlists, and it works just fine.  Note that it will add the ability to read MP3 format using JavaSound (`javax.sound.sampled`).  If you intend playing the MP3 using the JMF player (which is unnecessary, and I do not recommend), you&#39;ll need to add the main JMF jar at both compile &amp; run-time.\r\n\r\n----------------\r\nHere is an example &lt;a href=&quot;http://www.jsresources.org/examples/SimpleAudioPlayer.java.html&quot;&gt;code for playing sounds&lt;/a&gt; using JavaSound.  Don&#39;t be put off by the length of the code, most of that is comments and explanation.\r\n\r\nIt will compile without importing *any* of JMF.  If the `mp3plugin.jar` is on the *run-time* class-path, it should be capable of playing MP3s.\r\n\r\n\r\n  [1]: http://www.oracle.com/technetwork/java/javase/download-137625.html","title":"unable to import javax.media.*; (package does not exist) Why does it say so?","body":"<p>It is not necessary to import a Service Provider Interface at compile time.  Simply add it to the run-time class-path and it will be able to play mp3's as well as its (default) wave/pcm/midi files.</p>\n<p>I use the <a href=\"https://drive.google.com/file/d/0B5B9wDXIGw9lRmpSbEUtenljd1k/view?usp=sharing&amp;resourcekey=0-miuzcGB8fsXn2EQh3sVolA\" rel=\"nofollow noreferrer\"><code>mp3plugin.jar</code></a> this way for DukeBox, a little player for M3U style playlists, and it works just fine.  Note that it will add the ability to read MP3 format using JavaSound (<code>javax.sound.sampled</code>).  If you intend playing the MP3 using the JMF player (which is unnecessary, and I do not recommend), you'll need to add the main JMF jar at both compile &amp; run-time.</p>\n<hr />\n<p>Here is an example <a href=\"http://www.jsresources.org/examples/SimpleAudioPlayer.java.html\" rel=\"nofollow noreferrer\">code for playing sounds</a> using JavaSound.  Don't be put off by the length of the code, most of that is comments and explanation.</p>\n<p>It will compile without importing <em>any</em> of JMF.  If the <code>mp3plugin.jar</code> is on the <em>run-time</em> class-path, it should be capable of playing MP3s.</p>\n"},{"tags":[],"owner":{"account_id":15387,"reputation":63718,"user_id":32453,"accept_rate":92,"display_name":"rogerdpack"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1332264331,"creation_date":1332263762,"answer_id":9791696,"question_id":6875186,"body_markdown":"appears that it&#39;s not distributed by default with the JDK (at least 1.6 JDK).   javax.sound.sampled is though I guess.  Also see the other answer, but note that apparently using javax.sound for mp3&#39;s isn&#39;t always compatible with all mp3&#39;s see  https://stackoverflow.com/a/7040010/32453","title":"unable to import javax.media.*; (package does not exist) Why does it say so?","body":"<p>appears that it's not distributed by default with the JDK (at least 1.6 JDK).   javax.sound.sampled is though I guess.  Also see the other answer, but note that apparently using javax.sound for mp3's isn't always compatible with all mp3's see  <a href=\"https://stackoverflow.com/a/7040010/32453\">https://stackoverflow.com/a/7040010/32453</a></p>\n"}],"owner":{"account_id":387064,"reputation":2640,"user_id":745191,"accept_rate":65,"display_name":"program-o-steve"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13568,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":6875417,"answer_count":2,"score":0,"last_activity_date":1634720352,"creation_date":1311952101,"question_id":6875186,"body_markdown":"I have downloaded [JMF MP3 PLUGIN ][1] to play mp3 files. After downloading i place `mp3plugin.jar` into the project library of netbeans.\r\n\r\nThen i start the code with the line :\r\n `import javax.media.*; `\r\n\r\nBut there is an error corresponding to this statement which says package `javax.media` does not exist. Why do i get this error ? I have tried searching about it but haven&#39;t found the solution. Please help me in this.\r\nI have also placed `C:\\Program Files\\Java\\jdk1.7.0\\jre\\lib\\ext\\mp3plugin.jar` in the classpath variable.  \r\n\r\n\r\n  [1]: http://www.oracle.com/technetwork/java/javase/download-137625.html","title":"unable to import javax.media.*; (package does not exist) Why does it say so?","body":"<p>I have downloaded <a href=\"http://www.oracle.com/technetwork/java/javase/download-137625.html\" rel=\"nofollow\">JMF MP3 PLUGIN </a> to play mp3 files. After downloading i place <code>mp3plugin.jar</code> into the project library of netbeans.</p>\n\n<p>Then i start the code with the line :\n <code>import javax.media.*;</code></p>\n\n<p>But there is an error corresponding to this statement which says package <code>javax.media</code> does not exist. Why do i get this error ? I have tried searching about it but haven't found the solution. Please help me in this.\nI have also placed <code>C:\\Program Files\\Java\\jdk1.7.0\\jre\\lib\\ext\\mp3plugin.jar</code> in the classpath variable.  </p>\n"},{"tags":["java","mp3","media-queries","javasound","pcm"],"comments":[{"owner":{"account_id":1336768,"reputation":4924,"user_id":1279334,"accept_rate":59,"display_name":"MikkoP"},"score":2,"creation_date":1347716292,"post_id":12437804,"comment_id":16723724,"body_markdown":"Tell us what you&#39;ve tried, what is the problem and what is the question.","body":"Tell us what you&#39;ve tried, what is the problem and what is the question."},{"owner":{"account_id":67082,"reputation":12759,"user_id":196480,"accept_rate":81,"display_name":"Tushar Ahirrao"},"score":0,"creation_date":1347716367,"post_id":12437804,"comment_id":16723739,"body_markdown":"@MikkoP I am searching for any Java library/API which will convert mp3 to PCM...","body":"@MikkoP I am searching for any Java library/API which will convert mp3 to PCM..."},{"owner":{"account_id":1777092,"reputation":68282,"user_id":1620671,"accept_rate":87,"display_name":"Philipp"},"score":0,"creation_date":1347716975,"post_id":12437804,"comment_id":16723860,"body_markdown":"This question where the OP tries the exact opposite might be interesting (as soon as there is a solution): http://stackoverflow.com/questions/12424659/flex-java-byte-to-mp3/12424832#12424832","body":"This question where the OP tries the exact opposite might be interesting (as soon as there is a solution): <a href=\"http://stackoverflow.com/questions/12424659/flex-java-byte-to-mp3/12424832#12424832\" title=\"flex java byte to mp3\">stackoverflow.com/questions/12424659/flex-java-byte-to-mp3/&hellip;</a>"},{"owner":{"account_id":1015060,"reputation":11794,"user_id":1026805,"accept_rate":86,"display_name":"Sri Harsha Chilakapati"},"score":0,"creation_date":1347717491,"post_id":12437804,"comment_id":16723959,"body_markdown":"Try this http://java2everyone.blogspot.in/2011/01/create-java-mp3-to-wav-converter.html","body":"Try this <a href=\"http://java2everyone.blogspot.in/2011/01/create-java-mp3-to-wav-converter.html\" rel=\"nofollow noreferrer\">java2everyone.blogspot.in/2011/01/&hellip;</a>"},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":0,"creation_date":1347749648,"post_id":12437804,"comment_id":16730845,"body_markdown":"@Philipp There has been a J2SE+JMF solution to this specific requirement since Java 1.3.","body":"@Philipp There has been a J2SE+JMF solution to this specific requirement since Java 1.3."},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":0,"creation_date":1347749781,"post_id":12437804,"comment_id":16730868,"body_markdown":"@Sri Maybe you should add JavaZoom as an answer.","body":"@Sri Maybe you should add JavaZoom as an answer."}],"answers":[{"tags":[],"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1634720273,"creation_date":1347747164,"answer_id":12442889,"question_id":12437804,"body_markdown":"- Get the [`mp3plugin.jar`](https://drive.google.com/file/d/0B5B9wDXIGw9lRmpSbEUtenljd1k/view?usp=sharing&amp;resourcekey=0-miuzcGB8fsXn2EQh3sVolA) of the JMF.\r\n- Add it to the run-time class-path of the app. to provide a decoder SPI for MP3.\r\n- Get an [`AudioInputStream`](http://docs.oracle.com/javase/8/docs/api/javax/sound/sampled/AudioInputStream.html) for the MP3 from the [`AudioSystem`](http://docs.oracle.com/javase/8/docs/api/javax/sound/sampled/AudioSystem.html) of Java Sound.\r\n- Convert it to PCM using [`getAudioInputStream(AudioFormat,AudioInputStream)`](http://docs.oracle.com/javase/8/docs/api/javax/sound/sampled/AudioSystem.html#getAudioInputStream-javax.sound.sampled.AudioFormat-javax.sound.sampled.AudioInputStream-).","title":"Convert MP3 to PCM in Java","body":"<ul>\n<li>Get the <a href=\"https://drive.google.com/file/d/0B5B9wDXIGw9lRmpSbEUtenljd1k/view?usp=sharing&amp;resourcekey=0-miuzcGB8fsXn2EQh3sVolA\" rel=\"nofollow noreferrer\"><code>mp3plugin.jar</code></a> of the JMF.</li>\n<li>Add it to the run-time class-path of the app. to provide a decoder SPI for MP3.</li>\n<li>Get an <a href=\"http://docs.oracle.com/javase/8/docs/api/javax/sound/sampled/AudioInputStream.html\" rel=\"nofollow noreferrer\"><code>AudioInputStream</code></a> for the MP3 from the <a href=\"http://docs.oracle.com/javase/8/docs/api/javax/sound/sampled/AudioSystem.html\" rel=\"nofollow noreferrer\"><code>AudioSystem</code></a> of Java Sound.</li>\n<li>Convert it to PCM using <a href=\"http://docs.oracle.com/javase/8/docs/api/javax/sound/sampled/AudioSystem.html#getAudioInputStream-javax.sound.sampled.AudioFormat-javax.sound.sampled.AudioInputStream-\" rel=\"nofollow noreferrer\"><code>getAudioInputStream(AudioFormat,AudioInputStream)</code></a>.</li>\n</ul>\n"}],"owner":{"account_id":67082,"reputation":12759,"user_id":196480,"accept_rate":81,"display_name":"Tushar Ahirrao"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8615,"favorite_count":0,"down_vote_count":6,"up_vote_count":7,"accepted_answer_id":12442889,"answer_count":1,"score":1,"last_activity_date":1634720273,"creation_date":1347716033,"question_id":12437804,"body_markdown":"I want to convert MP3 file to PCM in Java. \r\n\r\nHow to do that?","title":"Convert MP3 to PCM in Java","body":"<p>I want to convert MP3 file to PCM in Java. </p>\n\n<p>How to do that?</p>\n"},{"tags":["java","url","audio","mp3","javasound"],"comments":[{"owner":{"account_id":1439522,"reputation":9489,"user_id":1360074,"accept_rate":85,"display_name":"Nikolay Kuznetsov"},"score":1,"creation_date":1355069245,"post_id":13789063,"comment_id":18963176,"body_markdown":"How it does not work? Exception or nothing happens? The constructor you use does not seem right.","body":"How it does not work? Exception or nothing happens? The constructor you use does not seem right."},{"owner":{"account_id":1421913,"reputation":11238,"user_id":1346369,"accept_rate":57,"display_name":"vels4j"},"score":1,"creation_date":1355069835,"post_id":13789063,"comment_id":18963346,"body_markdown":"How did you expect that url returns a sound file ?","body":"How did you expect that url returns a sound file ?"},{"owner":{"account_id":916011,"reputation":1878,"user_id":951467,"accept_rate":75,"display_name":"Marek"},"score":3,"creation_date":1355069944,"post_id":13789063,"comment_id":18963378,"body_markdown":"Actually, real URL is: http://www.howjsay.com/mp3/car.mp3","body":"Actually, real URL is: <a href=\"http://www.howjsay.com/mp3/car.mp3\" rel=\"nofollow noreferrer\">howjsay.com/mp3/car.mp3</a>"},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":0,"creation_date":1355071138,"post_id":13789063,"comment_id":18963675,"body_markdown":"`AudioStream`, `AudioPlayer`?  Not in J2SE 7 docs.  Is this for Android?","body":"<code>AudioStream</code>, <code>AudioPlayer</code>?  Not in J2SE 7 docs.  Is this for Android?"},{"owner":{"account_id":1439522,"reputation":9489,"user_id":1360074,"accept_rate":85,"display_name":"Nikolay Kuznetsov"},"score":0,"creation_date":1355071688,"post_id":13789063,"comment_id":18963798,"body_markdown":"@AndrewThompson, it is sun.audio . Is this outdated/deprecated?","body":"@AndrewThompson, it is sun.audio . Is this outdated/deprecated?"},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":0,"creation_date":1355104466,"post_id":13789063,"comment_id":18971936,"body_markdown":"@NikolayKuznetsov  The compiler itself warns us not to use them.  Since 1.3 we have Java Sound (see my answer &amp; links).","body":"@NikolayKuznetsov  The compiler itself warns us not to use them.  Since 1.3 we have Java Sound (see my answer &amp; links)."}],"answers":[{"tags":[],"owner":{"account_id":1439522,"reputation":9489,"user_id":1360074,"accept_rate":85,"display_name":"Nikolay Kuznetsov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1355070661,"creation_date":1355070661,"answer_id":13789293,"question_id":13789063,"body_markdown":"If you don&#39;t care much about the site then you try to use Google Translate API\r\n\r\n    try{\r\n            String word=&quot;car&quot;;\r\n            word=java.net.URLEncoder.encode(word, &quot;UTF-8&quot;);\r\n            URL url = new URL(&quot;http://translate.google.com/translate_tts?ie=UTF-8&amp;tl=ja&amp;q=&quot;+word);\r\n            HttpURLConnection urlConn = (HttpURLConnection) url.openConnection();\r\n            urlConn.addRequestProperty(&quot;User-Agent&quot;, &quot;Mozilla/4.76&quot;);\r\n            InputStream audioSrc = urlConn.getInputStream();\r\n            DataInputStream read = new DataInputStream(audioSrc);\r\n            AudioStream as = new AudioStream(read);\r\n            AudioPlayer.player.start(as);\r\n            AudioPlayer.player.stop(as);\r\n    }\r\n\r\nWith help from here:\r\nhttps://stackoverflow.com/questions/13339421/java-download-text-to-speech-from-google-translate\r\n\r\nIf for every `word` the site guarantees to have mp3 file with link `howjsay.com/mp3/word.mp3` then you just need to change URL to\r\n\r\n`URL url = new URL(&quot;howjsay.com/mp3/&quot; + word + &quot;.mp3&quot;);`","title":"Get sound from a URL with Java","body":"<p>If you don't care much about the site then you try to use Google Translate API</p>\n\n<pre><code>try{\n        String word=\"car\";\n        word=java.net.URLEncoder.encode(word, \"UTF-8\");\n        URL url = new URL(\"http://translate.google.com/translate_tts?ie=UTF-8&amp;tl=ja&amp;q=\"+word);\n        HttpURLConnection urlConn = (HttpURLConnection) url.openConnection();\n        urlConn.addRequestProperty(\"User-Agent\", \"Mozilla/4.76\");\n        InputStream audioSrc = urlConn.getInputStream();\n        DataInputStream read = new DataInputStream(audioSrc);\n        AudioStream as = new AudioStream(read);\n        AudioPlayer.player.start(as);\n        AudioPlayer.player.stop(as);\n}\n</code></pre>\n\n<p>With help from here:\n<a href=\"https://stackoverflow.com/questions/13339421/java-download-text-to-speech-from-google-translate\">Java: download Text to Speech from Google Translate</a></p>\n\n<p>If for every <code>word</code> the site guarantees to have mp3 file with link <code>howjsay.com/mp3/word.mp3</code> then you just need to change URL to</p>\n\n<p><code>URL url = new URL(\"howjsay.com/mp3/\" + word + \".mp3\");</code></p>\n"},{"tags":[],"owner":{"account_id":916011,"reputation":1878,"user_id":951467,"accept_rate":75,"display_name":"Marek"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1355072315,"creation_date":1355072315,"answer_id":13789526,"question_id":13789063,"body_markdown":"Here you go \r\n\r\n    import javax.sound.sampled.*;\r\n    import java.io.IOException;\r\n    import java.net.URL;\r\n    \r\n    public class HowJSay\r\n    {\r\n    public static void main(String[] args) {\r\n        AudioInputStream din = null;\r\n        try {\r\n            AudioInputStream in = AudioSystem.getAudioInputStream(new URL(&quot;http://www.howjsay.com/mp3/&quot;+ args[0] +&quot;.mp3&quot;));\r\n            AudioFormat baseFormat = in.getFormat();\r\n            AudioFormat decodedFormat = new AudioFormat(\r\n                    AudioFormat.Encoding.PCM_SIGNED,\r\n                    baseFormat.getSampleRate(), 16, baseFormat.getChannels(),\r\n                    baseFormat.getChannels() * 2, baseFormat.getSampleRate(),\r\n                    false);\r\n            din = AudioSystem.getAudioInputStream(decodedFormat, in);\r\n            DataLine.Info info = new DataLine.Info(SourceDataLine.class, decodedFormat);\r\n            SourceDataLine line = (SourceDataLine) AudioSystem.getLine(info);\r\n            if(line != null) {\r\n                line.open(decodedFormat);\r\n                byte[] data = new byte[4096];\r\n                // Start\r\n                line.start();\r\n\r\n                int nBytesRead;\r\n                while ((nBytesRead = din.read(data, 0, data.length)) != -1) {\r\n                    line.write(data, 0, nBytesRead);\r\n                }\r\n                // Stop\r\n                line.drain();\r\n                line.stop();\r\n                line.close();\r\n                din.close();\r\n            }\r\n\r\n        }\r\n        catch(Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n        finally {\r\n            if(din != null) {\r\n                try { din.close(); } catch(IOException e) { }\r\n            }\r\n        }\r\n    }\r\n\r\n    }\r\n","title":"Get sound from a URL with Java","body":"<p>Here you go </p>\n\n<pre><code>import javax.sound.sampled.*;\nimport java.io.IOException;\nimport java.net.URL;\n\npublic class HowJSay\n{\npublic static void main(String[] args) {\n    AudioInputStream din = null;\n    try {\n        AudioInputStream in = AudioSystem.getAudioInputStream(new URL(\"http://www.howjsay.com/mp3/\"+ args[0] +\".mp3\"));\n        AudioFormat baseFormat = in.getFormat();\n        AudioFormat decodedFormat = new AudioFormat(\n                AudioFormat.Encoding.PCM_SIGNED,\n                baseFormat.getSampleRate(), 16, baseFormat.getChannels(),\n                baseFormat.getChannels() * 2, baseFormat.getSampleRate(),\n                false);\n        din = AudioSystem.getAudioInputStream(decodedFormat, in);\n        DataLine.Info info = new DataLine.Info(SourceDataLine.class, decodedFormat);\n        SourceDataLine line = (SourceDataLine) AudioSystem.getLine(info);\n        if(line != null) {\n            line.open(decodedFormat);\n            byte[] data = new byte[4096];\n            // Start\n            line.start();\n\n            int nBytesRead;\n            while ((nBytesRead = din.read(data, 0, data.length)) != -1) {\n                line.write(data, 0, nBytesRead);\n            }\n            // Stop\n            line.drain();\n            line.stop();\n            line.close();\n            din.close();\n        }\n\n    }\n    catch(Exception e) {\n        e.printStackTrace();\n    }\n    finally {\n        if(din != null) {\n            try { din.close(); } catch(IOException e) { }\n        }\n    }\n}\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1634720223,"creation_date":1355104389,"answer_id":13793955,"question_id":13789063,"body_markdown":"[Java Sound](https://stackoverflow.com/tags/javasound/info) can play short clips easily, but supports a limited number of formats out of the box.  The formats it supports by default are given by [`AudioSystem.getAudioFileTypes()`](http://docs.oracle.com/javase/7/docs/api/javax/sound/sampled/AudioSystem.html#getAudioFileTypes%28%29) &amp; that list will not include MP3.\r\n\r\nThe solution to the lack of support for MP3 is to add a decoder to the run-time class-path of the app.  Since Java Sound works on a Service Provider Interface, it only needs to be on the class-path to be useful.  An MP3 decoder can be found in [`mp3plugin.jar`](https://drive.google.com/file/d/0B5B9wDXIGw9lRmpSbEUtenljd1k/view?usp=sharing&amp;resourcekey=0-miuzcGB8fsXn2EQh3sVolA).\r\n\r\nAs to the code for playing the MP3, the short source on the info. page should suffice so long as the clips are short.  Viz.\r\n\r\n    import java.net.URL;\r\n    import javax.swing.*;\r\n    import javax.sound.sampled.*;\r\n    \r\n    public class LoopSound {\r\n    \r\n        public static void main(String[] args) throws Exception {\r\n            URL url = new URL(\r\n                &quot;http://pscode.org/media/leftright.wav&quot;);\r\n            Clip clip = AudioSystem.getClip();\r\n            // getAudioInputStream() also accepts a File or InputStream\r\n            AudioInputStream ais = AudioSystem.\r\n                getAudioInputStream( url );\r\n            clip.open(ais);\r\n            clip.loop(Clip.LOOP_CONTINUOUSLY);\r\n            SwingUtilities.invokeLater(new Runnable() {\r\n                public void run() {\r\n                    // A GUI element to prevent the Clip&#39;s daemon Thread\r\n                    // from terminating at the end of the main()\r\n                    JOptionPane.showMessageDialog(null, &quot;Close to exit!&quot;);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n","title":"Get sound from a URL with Java","body":"<p><a href=\"https://stackoverflow.com/tags/javasound/info\">Java Sound</a> can play short clips easily, but supports a limited number of formats out of the box.  The formats it supports by default are given by <a href=\"http://docs.oracle.com/javase/7/docs/api/javax/sound/sampled/AudioSystem.html#getAudioFileTypes%28%29\" rel=\"nofollow noreferrer\"><code>AudioSystem.getAudioFileTypes()</code></a> &amp; that list will not include MP3.</p>\n<p>The solution to the lack of support for MP3 is to add a decoder to the run-time class-path of the app.  Since Java Sound works on a Service Provider Interface, it only needs to be on the class-path to be useful.  An MP3 decoder can be found in <a href=\"https://drive.google.com/file/d/0B5B9wDXIGw9lRmpSbEUtenljd1k/view?usp=sharing&amp;resourcekey=0-miuzcGB8fsXn2EQh3sVolA\" rel=\"nofollow noreferrer\"><code>mp3plugin.jar</code></a>.</p>\n<p>As to the code for playing the MP3, the short source on the info. page should suffice so long as the clips are short.  Viz.</p>\n<pre><code>import java.net.URL;\nimport javax.swing.*;\nimport javax.sound.sampled.*;\n\npublic class LoopSound {\n\n    public static void main(String[] args) throws Exception {\n        URL url = new URL(\n            &quot;http://pscode.org/media/leftright.wav&quot;);\n        Clip clip = AudioSystem.getClip();\n        // getAudioInputStream() also accepts a File or InputStream\n        AudioInputStream ais = AudioSystem.\n            getAudioInputStream( url );\n        clip.open(ais);\n        clip.loop(Clip.LOOP_CONTINUOUSLY);\n        SwingUtilities.invokeLater(new Runnable() {\n            public void run() {\n                // A GUI element to prevent the Clip's daemon Thread\n                // from terminating at the end of the main()\n                JOptionPane.showMessageDialog(null, &quot;Close to exit!&quot;);\n            }\n        });\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12468623,"reputation":1,"user_id":9077596,"display_name":"Xaethriux"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1512849549,"creation_date":1512849549,"answer_id":47732600,"question_id":13789063,"body_markdown":"If you&#39;re having issues with the code provided by Marek, make sure you&#39;re meeting this criteria:\r\n\r\n 1. Use a supported audio format, such as 16 bit .wav\r\n 2. Make sure that the URL you&#39;re using is actually playing audio automatically. \r\n\r\nIt isn&#39;t sufficient to simply reference the download page for an audio file. It has to be streaming the audio. YouTube URLs won&#39;t work, as they&#39;re videos. Audacity is a good approach to converting your audio file to a compatible 16 bit .wav file, and if you have your own domain / website, you can provide a direct link to the file from there.\r\n\r\n ","title":"Get sound from a URL with Java","body":"<p>If you're having issues with the code provided by Marek, make sure you're meeting this criteria:</p>\n\n<ol>\n<li>Use a supported audio format, such as 16 bit .wav</li>\n<li>Make sure that the URL you're using is actually playing audio automatically. </li>\n</ol>\n\n<p>It isn't sufficient to simply reference the download page for an audio file. It has to be streaming the audio. YouTube URLs won't work, as they're videos. Audacity is a good approach to converting your audio file to a compatible 16 bit .wav file, and if you have your own domain / website, you can provide a direct link to the file from there.</p>\n"}],"owner":{"account_id":1784182,"reputation":139,"user_id":1626057,"accept_rate":0,"display_name":"javando"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19302,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":4,"score":1,"last_activity_date":1634720223,"creation_date":1355068916,"question_id":13789063,"body_markdown":"I&#39;m learning english and I&#39;d like to develop a software to help me with the pronunciation.\r\n\r\nThere is a site called HowJSay, if you enter here: http://www.howjsay.com/index.php?word=car\r\nimmediatly you&#39;ll hear the pronunciation of the word car . I&#39;d like to develop a software in JAVA that could play this sound without necessity of enter in the site =]\r\n\r\nI tried this, but doesn&#39;t work =/\r\n\r\n    public static void main(String[] args) throws Exception {\r\n\t\tURL url = new URL(&quot;http://www.howjsay.com/index.php?word=car&quot;);\r\n\t\turl.openConnection();\r\n\t\tAudioStream as = new AudioStream(url.openStream());\r\n\t\tAudioPlayer.player.start(as);\r\n\t\tAudioPlayer.player.stop(as);\r\n\t}\r\n\r\n Any Ideas? Please.","title":"Get sound from a URL with Java","body":"<p>I'm learning english and I'd like to develop a software to help me with the pronunciation.</p>\n\n<p>There is a site called HowJSay, if you enter here: <a href=\"http://www.howjsay.com/index.php?word=car\" rel=\"nofollow\">http://www.howjsay.com/index.php?word=car</a>\nimmediatly you'll hear the pronunciation of the word car . I'd like to develop a software in JAVA that could play this sound without necessity of enter in the site =]</p>\n\n<p>I tried this, but doesn't work =/</p>\n\n<pre><code>public static void main(String[] args) throws Exception {\n    URL url = new URL(\"http://www.howjsay.com/index.php?word=car\");\n    url.openConnection();\n    AudioStream as = new AudioStream(url.openStream());\n    AudioPlayer.player.start(as);\n    AudioPlayer.player.stop(as);\n}\n</code></pre>\n\n<p>Any Ideas? Please.</p>\n"},{"tags":["java","spring","spring-boot","tomcat"],"answers":[{"tags":[],"owner":{"account_id":21317699,"reputation":49,"user_id":17046414,"display_name":"me at stackexchange"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634716510,"creation_date":1634716510,"answer_id":69642277,"question_id":69639841,"body_markdown":"I think your question is about sharing the data of one singleton Bean between different application containers deployed in the same webserver.\r\n\r\nThis is not possible for security reasons. Each deployed application has its own classloader and hence cannot easily access beans residing in the memory of the other containers.\r\n\r\nI suggest you add a microservice that is accessed by the different deployed applications and use that instead. It can easily be accessed via e.g OpenFeign as a client and almost looks like a bean with getters and setters if done right.\r\n\r\n\r\n\r\n   ","title":"How to register beans that can be shared by multiple WARs (Spring boot + Tomcat)","body":"<p>I think your question is about sharing the data of one singleton Bean between different application containers deployed in the same webserver.</p>\n<p>This is not possible for security reasons. Each deployed application has its own classloader and hence cannot easily access beans residing in the memory of the other containers.</p>\n<p>I suggest you add a microservice that is accessed by the different deployed applications and use that instead. It can easily be accessed via e.g OpenFeign as a client and almost looks like a bean with getters and setters if done right.</p>\n"},{"tags":[],"owner":{"account_id":3930229,"reputation":2278,"user_id":4412979,"accept_rate":50,"display_name":"Vasily Liaskovsky"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634719746,"creation_date":1634719746,"answer_id":69642956,"question_id":69639841,"body_markdown":"There are several approaches to your problem, solving it on different levels.\r\n\r\n1. Create a **shared library** with required stuff and install it to Tomcat server. &quot;Install&quot; normally means to put assemled jars to `$CATALINA_HOME/lib` directory or similar. [Class Loader HOW-TO][1] can give you more details. Not sure how it works with shared  *instances* of classes, but it&#39;s definitely possible to share *classes* (factories, for example) and configurations through shared library. With shared configuration and factories you can at least produce identical beans (not necessary the *same*, but it seems enough for you case).\r\n\r\n2. Define a **JNDI resource** shared between all applications. Of course, this requires your class to be accessible by Tomcat, so you first have to go through option 1. This way you can have &quot;published&quot; *instance* of a class shared between all applications. Details can be found at [JNDI Resources HOW-TO][2]. With this approach you can inject published resource with `@Resource` annotation.\r\n\r\n3. Create a **microservice** (as one of other answers suggests) that can provide you data and features and access it from your application. This gives you maximum flexibility but also brings complexity requiring actual *communication* to the microservice.\r\n\r\n\r\nObviously, options 1 and 2 require direct access to the server configuration.\r\n\r\n  [1]: https://tomcat.apache.org/tomcat-8.0-doc/class-loader-howto.html\r\n  [2]: https://tomcat.apache.org/tomcat-8.0-doc/jndi-resources-howto.html","title":"How to register beans that can be shared by multiple WARs (Spring boot + Tomcat)","body":"<p>There are several approaches to your problem, solving it on different levels.</p>\n<ol>\n<li><p>Create a <strong>shared library</strong> with required stuff and install it to Tomcat server. &quot;Install&quot; normally means to put assemled jars to <code>$CATALINA_HOME/lib</code> directory or similar. <a href=\"https://tomcat.apache.org/tomcat-8.0-doc/class-loader-howto.html\" rel=\"nofollow noreferrer\">Class Loader HOW-TO</a> can give you more details. Not sure how it works with shared  <em>instances</em> of classes, but it's definitely possible to share <em>classes</em> (factories, for example) and configurations through shared library. With shared configuration and factories you can at least produce identical beans (not necessary the <em>same</em>, but it seems enough for you case).</p>\n</li>\n<li><p>Define a <strong>JNDI resource</strong> shared between all applications. Of course, this requires your class to be accessible by Tomcat, so you first have to go through option 1. This way you can have &quot;published&quot; <em>instance</em> of a class shared between all applications. Details can be found at <a href=\"https://tomcat.apache.org/tomcat-8.0-doc/jndi-resources-howto.html\" rel=\"nofollow noreferrer\">JNDI Resources HOW-TO</a>. With this approach you can inject published resource with <code>@Resource</code> annotation.</p>\n</li>\n<li><p>Create a <strong>microservice</strong> (as one of other answers suggests) that can provide you data and features and access it from your application. This gives you maximum flexibility but also brings complexity requiring actual <em>communication</em> to the microservice.</p>\n</li>\n</ol>\n<p>Obviously, options 1 and 2 require direct access to the server configuration.</p>\n"}],"owner":{"account_id":23085873,"reputation":65,"user_id":17197401,"display_name":"sksm216"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":610,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1634719746,"creation_date":1634699006,"question_id":69639841,"body_markdown":"I am developing an application with Spring boot and deploying multiple WARs to an external tomcat.\r\nI want to register a shareable bean with these WARs when tomcat starts.\r\n\r\nI use: Java8, Spring boot(2.5.5) and Tomcat9\r\n\r\nBean I want to be shared by Apps:\r\n    \r\n    public class TestData {\r\n        private String username;\r\n        \r\n        public String getUsername() {\r\n            return username;\r\n        }\r\n        public void setUsername(String username) {\r\n            this.username = username;\r\n        }\r\n    }\r\n\r\nSampleApp(There are multiple apps that Autowire an instance of TestData in the same way):\r\n\r\n    @SpringBootApplication\r\n    @RestController\r\n    public class App extends SpringBootServletInitializer {\r\n        @Autowired\r\n        TestData testData;\r\n        \r\n        public static void main(String[] args) {\r\n            SpringApplication.run(App.class, args);\r\n        }\r\n\r\n        @Override\r\n        protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {\r\n            return application.sources(App.class);\r\n        }\r\n\r\n        @RequestMapping(value = &quot;SampleApp1&quot;, method = RequestMethod.GET)\r\n        public String getUsername() {\r\n            return testData.getUsername();\r\n        }\r\n    }\r\n","title":"How to register beans that can be shared by multiple WARs (Spring boot + Tomcat)","body":"<p>I am developing an application with Spring boot and deploying multiple WARs to an external tomcat.\nI want to register a shareable bean with these WARs when tomcat starts.</p>\n<p>I use: Java8, Spring boot(2.5.5) and Tomcat9</p>\n<p>Bean I want to be shared by Apps:</p>\n<pre><code>public class TestData {\n    private String username;\n    \n    public String getUsername() {\n        return username;\n    }\n    public void setUsername(String username) {\n        this.username = username;\n    }\n}\n</code></pre>\n<p>SampleApp(There are multiple apps that Autowire an instance of TestData in the same way):</p>\n<pre><code>@SpringBootApplication\n@RestController\npublic class App extends SpringBootServletInitializer {\n    @Autowired\n    TestData testData;\n    \n    public static void main(String[] args) {\n        SpringApplication.run(App.class, args);\n    }\n\n    @Override\n    protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {\n        return application.sources(App.class);\n    }\n\n    @RequestMapping(value = &quot;SampleApp1&quot;, method = RequestMethod.GET)\n    public String getUsername() {\n        return testData.getUsername();\n    }\n}\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8064,"page":1928,"page_size":100}
