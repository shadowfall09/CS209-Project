{"items":[{"tags":["java","apache-arrow"],"comments":[{"owner":{"account_id":22873466,"reputation":5410,"user_id":17016144,"display_name":"ProDec"},"score":0,"creation_date":1634431342,"post_id":69600514,"comment_id":123022593,"body_markdown":"not expert, but you can have a look at `java.nio.channels.FileChannel.transferTo` and `sun.nio.ch.FileChannelImpl`","body":"not expert, but you can have a look at <code>java.nio.channels.FileChannel.transferTo</code> and <code>sun.nio.ch.FileChannelImpl</code>"}],"owner":{"account_id":4642219,"reputation":97,"user_id":3761728,"accept_rate":83,"display_name":"user3761728"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":202,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1634430407,"creation_date":1634430407,"question_id":69600514,"body_markdown":"Is there a way to do zero-copy/mmap read on Arrow file in Java?\r\nI was reading the doc and it seems such method exists in Python or C++ implementation\r\n(eg: https://arrow.apache.org/docs/python/memory.html)\r\n\r\nBut doesn&#39;t seem to have any Java method method to do the same\r\n(eg: https://arrow.apache.org/docs/java/ipc.html)\r\n\r\nI could do a mmap on a Arrow file, then wrap it in a seekableChannel and pass it to ArrowFileReader. However, I looked at the source code and found out that the ArrowReader itself is making copies.","title":"Java methods to do zero-copy read on Arrow file?","body":"<p>Is there a way to do zero-copy/mmap read on Arrow file in Java?\nI was reading the doc and it seems such method exists in Python or C++ implementation\n(eg: <a href=\"https://arrow.apache.org/docs/python/memory.html\" rel=\"nofollow noreferrer\">https://arrow.apache.org/docs/python/memory.html</a>)</p>\n<p>But doesn't seem to have any Java method method to do the same\n(eg: <a href=\"https://arrow.apache.org/docs/java/ipc.html\" rel=\"nofollow noreferrer\">https://arrow.apache.org/docs/java/ipc.html</a>)</p>\n<p>I could do a mmap on a Arrow file, then wrap it in a seekableChannel and pass it to ArrowFileReader. However, I looked at the source code and found out that the ArrowReader itself is making copies.</p>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1630793800,"post_id":69059227,"comment_id":122053907,"body_markdown":"My honest opinion is that JavaFX or Java Swing are the wrong tools for something like a video game.  Look at something like LWJGL or LibGDX for Java game development.  (As for your actual question, I&#39;m going to have to look, it&#39;s tricky at best.)","body":"My honest opinion is that JavaFX or Java Swing are the wrong tools for something like a video game.  Look at something like LWJGL or LibGDX for Java game development.  (As for your actual question, I&#39;m going to have to look, it&#39;s tricky at best.)"},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":1,"creation_date":1630793922,"post_id":69059227,"comment_id":122053926,"body_markdown":"Here are some potential answers I found on SO: https://stackoverflow.com/questions/29962395/how-to-write-a-keylistener-for-javafx","body":"Here are some potential answers I found on SO: <a href=\"https://stackoverflow.com/questions/29962395/how-to-write-a-keylistener-for-javafx\" title=\"how to write a keylistener for javafx\">stackoverflow.com/questions/29962395/&hellip;</a>"},{"owner":{"account_id":8104852,"reputation":53,"user_id":6244646,"display_name":"Carlos Martins"},"score":0,"creation_date":1630793937,"post_id":69059227,"comment_id":122053929,"body_markdown":"Can&#39;t its a college project.","body":"Can&#39;t its a college project."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1630793987,"post_id":69059227,"comment_id":122053937,"body_markdown":"What does that have to do with anything?  Those aren&#39;t commercial products, they&#39;re free open source frameworks.","body":"What does that have to do with anything?  Those aren&#39;t commercial products, they&#39;re free open source frameworks."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1630794194,"post_id":69059227,"comment_id":122053970,"body_markdown":"Here&#39;s a post on event handlers: https://docs.oracle.com/javafx/2/events/handlers.htm","body":"Here&#39;s a post on event handlers: <a href=\"https://docs.oracle.com/javafx/2/events/handlers.htm\" rel=\"nofollow noreferrer\">docs.oracle.com/javafx/2/events/handlers.htm</a>"},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1630795969,"post_id":69059227,"comment_id":122054245,"body_markdown":"[mcve] please .. and keep the tags focused - javafx2 certainly is _not_ the version you are using","body":"<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please .. and keep the tags focused - javafx2 certainly is <i>not</i> the version you are using"},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1630796074,"post_id":69059227,"comment_id":122054254,"body_markdown":"@markspace College projects, by which I assume the OP means a homework assignment/class project (instead of e.g. a research project), often have relatively strict requirements regarding what you can and can&#39;t use.","body":"@markspace College projects, by which I assume the OP means a homework assignment/class project (instead of e.g. a research project), often have relatively strict requirements regarding what you can and can&#39;t use."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":2,"creation_date":1630800606,"post_id":69059227,"comment_id":122054736,"body_markdown":"Register a key listener with the scene.","body":"Register a key listener with the scene."}],"answers":[{"tags":[],"owner":{"account_id":8104852,"reputation":53,"user_id":6244646,"display_name":"Carlos Martins"},"down_vote_count":2,"up_vote_count":0,"is_accepted":true,"score":-2,"last_activity_date":1630800871,"creation_date":1630800871,"answer_id":69059753,"question_id":69059227,"body_markdown":"I managed to find a very simple working solution but I don&#39;t fully undestand why it does work. I Noticed that **if I set the handler in the same class the node was instanciated the handler would work fine** But if I tried to get the node with a method to the main fuction via `root.getChildren().get(1)` and then cast it to the VBox element the handler would not work.\r\n\r\nAs a solution **I made the VBox a field** and wrote a **setter method for the VBox event Handler in the TitleCard Class**. This fixed the problem.\r\n\r\n&gt; I marked the code added as solution code with comments\r\n\r\n```java\r\n\r\npublic class TitleCard extends BackgroundImangeDisplayPane {\r\n    \r\n    Label title = new Label(&quot;Boats &amp; Docks&quot;); // lable 1\r\n    Label subtitle = new Label(&quot;Press any key to continue ...&quot;); label2\r\n    VBox vbox = new VBox; // solution code\r\n    \r\npublic TitleCard(){\r\n        super();\r\n        VBox vbox = new VBox();\r\n        vbox.getChildren().add(title);\r\n        vbox.getChildren().add(subtitle);\r\n        \r\n        this.setCenter(vbox);\r\n        this.setAlignment(vbox, Pos.CENTER);\r\n        vbox.setAlignment(Pos.CENTER);\r\n        title.setFont(new Font(170)); // set to Label\r\n        title.setTextFill(Color.SNOW);\r\n        title.setEffect(new DropShadow());\r\n        subtitle.setFont( new Font (30));\r\n          \r\n    }\r\n// Solution Code\r\npublic void setVBoxHandler(EventHandler&lt;? super MouseEvent&gt; value){\r\n      vbox.setOnMouseClicked(value); \r\n }\r\n}\r\n\r\n```\r\n\r\nThen I set the handler in the start method:\r\n\r\n```java\r\npublic void start(Stage primaryStage) throws Exception {\r\n\r\n        TitleCard root = new TitleCard();\r\n        VBox vBox =(VBox) root.getChildren().get(1);\r\n        root.setVBoxHandler(e-&gt;changeSceneToLoginMenu() ); // solution Code\r\n        \r\n        Scene scene = new Scene(root, 1280, 720);\r\n        primaryStage.setScene(scene);\r\n        primaryStage.show();\r\n\r\n        this.primaryStage = primaryStage;\r\n\r\n    }\r\n\r\n    public void changeSceneToLoginMenu() {\r\n        System.out.println(&quot;It finally worked&quot;);\r\n        Scene currentScene = new Scene(new Group(),100,100); // just a demo\r\n        primaryStage.setScene(currentScene);\r\n\r\n    }\r\n``` \r\nnotes: The type of value on the method `setVBoxHandler(EventHandler&lt;? super MouseEvent&gt; value)` will depend on the `setOnXXX` method used. For example I tested and this soultion also works for buttons just need to change the type to `EventHandler&lt;ActionEvent&gt; value`.\r\n\r\n&gt; Some coments on the question posted links on &quot;how to use handlers&quot;, this posts used anomimous classes. I belived This way is outdated. I used lambdas in the code the end result is the same but more redable code\r\n\r\nJust for reference if future readers are using anomimous classes the solution would be the same just change the way you set up the handler:\r\n\r\n```java\r\n\r\n// lambdas\r\nsetVBoxHandler( e -&gt; System.out.println(&quot;Code run if mouse is clicked &quot;));\r\n\r\n// anomimous classes\r\nsetVBoxHandler(new EventHandler&lt;ActionEvent&gt;() {\r\n    @Override\r\n    public void handle(ActionEvent event){\r\n        System.out.println(&quot;Code run if mouse is clicked &quot;);\r\n    }\r\n});\r\n\r\n```","title":"How to set an action to occur on pressing of any keyboard key in JavaFX?","body":"<p>I managed to find a very simple working solution but I don't fully undestand why it does work. I Noticed that <strong>if I set the handler in the same class the node was instanciated the handler would work fine</strong> But if I tried to get the node with a method to the main fuction via <code>root.getChildren().get(1)</code> and then cast it to the VBox element the handler would not work.</p>\n<p>As a solution <strong>I made the VBox a field</strong> and wrote a <strong>setter method for the VBox event Handler in the TitleCard Class</strong>. This fixed the problem.</p>\n<blockquote>\n<p>I marked the code added as solution code with comments</p>\n</blockquote>\n<pre class=\"lang-java prettyprint-override\"><code>\npublic class TitleCard extends BackgroundImangeDisplayPane {\n    \n    Label title = new Label(&quot;Boats &amp; Docks&quot;); // lable 1\n    Label subtitle = new Label(&quot;Press any key to continue ...&quot;); label2\n    VBox vbox = new VBox; // solution code\n    \npublic TitleCard(){\n        super();\n        VBox vbox = new VBox();\n        vbox.getChildren().add(title);\n        vbox.getChildren().add(subtitle);\n        \n        this.setCenter(vbox);\n        this.setAlignment(vbox, Pos.CENTER);\n        vbox.setAlignment(Pos.CENTER);\n        title.setFont(new Font(170)); // set to Label\n        title.setTextFill(Color.SNOW);\n        title.setEffect(new DropShadow());\n        subtitle.setFont( new Font (30));\n          \n    }\n// Solution Code\npublic void setVBoxHandler(EventHandler&lt;? super MouseEvent&gt; value){\n      vbox.setOnMouseClicked(value); \n }\n}\n\n</code></pre>\n<p>Then I set the handler in the start method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void start(Stage primaryStage) throws Exception {\n\n        TitleCard root = new TitleCard();\n        VBox vBox =(VBox) root.getChildren().get(1);\n        root.setVBoxHandler(e-&gt;changeSceneToLoginMenu() ); // solution Code\n        \n        Scene scene = new Scene(root, 1280, 720);\n        primaryStage.setScene(scene);\n        primaryStage.show();\n\n        this.primaryStage = primaryStage;\n\n    }\n\n    public void changeSceneToLoginMenu() {\n        System.out.println(&quot;It finally worked&quot;);\n        Scene currentScene = new Scene(new Group(),100,100); // just a demo\n        primaryStage.setScene(currentScene);\n\n    }\n</code></pre>\n<p>notes: The type of value on the method <code>setVBoxHandler(EventHandler&lt;? super MouseEvent&gt; value)</code> will depend on the <code>setOnXXX</code> method used. For example I tested and this soultion also works for buttons just need to change the type to <code>EventHandler&lt;ActionEvent&gt; value</code>.</p>\n<blockquote>\n<p>Some coments on the question posted links on &quot;how to use handlers&quot;, this posts used anomimous classes. I belived This way is outdated. I used lambdas in the code the end result is the same but more redable code</p>\n</blockquote>\n<p>Just for reference if future readers are using anomimous classes the solution would be the same just change the way you set up the handler:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n// lambdas\nsetVBoxHandler( e -&gt; System.out.println(&quot;Code run if mouse is clicked &quot;));\n\n// anomimous classes\nsetVBoxHandler(new EventHandler&lt;ActionEvent&gt;() {\n    @Override\n    public void handle(ActionEvent event){\n        System.out.println(&quot;Code run if mouse is clicked &quot;);\n    }\n});\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1630976687,"creation_date":1630976687,"answer_id":69081454,"question_id":69059227,"body_markdown":"As proposed by James in comments, when a [key is pressed on the scene](https://openjfx.io/javadoc/16/javafx.graphics/javafx/scene/Scene.html#setOnKeyPressed(javafx.event.EventHandler)), navigate to the next scene (or replace the root in the current scene, and remove the key press handler).\r\n\r\n    scene.setOnKeyPressed(e -&gt; navigateToNextScene());","title":"How to set an action to occur on pressing of any keyboard key in JavaFX?","body":"<p>As proposed by James in comments, when a <a href=\"https://openjfx.io/javadoc/16/javafx.graphics/javafx/scene/Scene.html#setOnKeyPressed(javafx.event.EventHandler)\" rel=\"nofollow noreferrer\">key is pressed on the scene</a>, navigate to the next scene (or replace the root in the current scene, and remove the key press handler).</p>\n<pre><code>scene.setOnKeyPressed(e -&gt; navigateToNextScene());\n</code></pre>\n"}],"owner":{"account_id":8104852,"reputation":53,"user_id":6244646,"display_name":"Carlos Martins"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":486,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":69059753,"answer_count":2,"score":-1,"last_activity_date":1634429069,"creation_date":1630793025,"question_id":69059227,"body_markdown":"So I want to do a title Menu for a video game project for college. I want to display a message press any key to continue... then when the user pressed any key, including the mouse, a method would run to set the stage to the next menu. \r\n\r\n[![enter image description here][1]][1] \r\n\r\nI posted all the relevant code bellow but short version is: \r\n* `BackgroundImangeDisplayPane` extends display pane and adds a background image.\r\n* `TitleCard` extends `BackgroundImangeDisplayPane` adds a VBox and 2 labels to the VBox\r\n* I&#39;m using `public void start(Stage primaryStage) throws Exception` as the main, I set the `setOnActionxxx` methods here\r\n\r\nI have tried using the set on action method on root and Vbox and non of them work... when I click nothing happens... But when I resize the window The `root.setOnActionXXX` &quot;activates&quot;.\r\n\r\nIf I write the setOnAction methods on the `TitleCard` class It kind of works but then I cant switch the stage. \r\n\r\nI will post the code bellow as well an explanation of the Scene structure its not to complicated:\r\n\r\n```java\r\n\r\n// this will be the borderpane for every scene it recives a backgund \r\n//images that will be present in every menu\r\npublic BackgroundImangeDisplayPane() {\r\n        try {\r\n            stream = new FileInputStream(imagePath.toString());\r\n            Image image = new Image(stream);\r\n            ImageView imageView = new ImageView();\r\n            imageView.setImage(image);\r\n            imageView.setFitWidth(1920);\r\n            imageView.setPreserveRatio(true);\r\n            this.getChildren().add(imageView);\r\n\r\n            BackgroundSize backgoundSize = new BackgroundSize(AUTO, AUTO, true, true, true, true);\r\n            BackgroundImage backgroundImage = new BackgroundImage(image, NO_REPEAT, NO_REPEAT, CENTER, backgoundSize);\r\n            Background background = new Background(backgroundImage);\r\n            this.setBackground(background);\r\n\r\n        } catch (Exception e) {\r\n\r\n        }\r\n    }\r\n\r\n```\r\n\r\n```java\r\n\r\n//This extends `BackgroundImangeDisplayPane` and places on top of it a A Vbox with two lables: the title and &quot;press any key to continue...&quot;\r\n// it then adds styles to the labels\r\npublic class TitleCard extends BackgroundImangeDisplayPane {\r\n    Label title = new Label(&quot;Boats &amp; Docks&quot;); // lable 1\r\n    Label subtitle = new Label(&quot;Press any key to continue ...&quot;); label2\r\n    \r\n    public TitleCard(){\r\n        super();\r\n        VBox vbox = new VBox();\r\n        vbox.getChildren().add(title);\r\n        vbox.getChildren().add(subtitle);\r\n        \r\n        this.setCenter(vbox);\r\n        this.setAlignment(vbox, Pos.CENTER);\r\n        vbox.setAlignment(Pos.CENTER);\r\n        title.setFont(new Font(170)); // set to Label\r\n        title.setTextFill(Color.SNOW);\r\n        title.setEffect(new DropShadow());\r\n        subtitle.setFont( new Font (30));\r\n          \r\n    }\r\n}\r\n\r\n```\r\n\r\n```java\r\n... \r\n//Works as the &quot;main&quot; in javaFX\r\nprivate Stage primaryStage;\r\n\r\n    @Override\r\n    public void start(Stage primaryStage) throws Exception {\r\n\r\n        TitleCard root = new TitleCard();\r\n        /*BasicMenu menu = new BasicMenu(5);\r\n        menu.ButtonSetOnAction(0, e -&gt; changeScene() );\r\n        BackgroundImangeWithCustomMenu background = new \r\n        BackgroundImangeWithCustomMenu(menu,50,50);\r\n        root.setCenter(background);*/\r\n        Button b = new Button();\r\n        b.setOnAction(e -&gt; changeSceneToLoginMenu());\r\n        System.out.println(root.getChildren().get(1).getClass());\r\n        root.getChildren().get(1).setFocusTraversable(true);\r\n        root.getChildren().get(1).setOnMouseClicked(e -&gt; changeSceneToLoginMenu());\r\n        root.getChildren().get(1).setOnKeyPressed(e -&gt; changeSceneToLoginMenu());\r\n        root.getChildren().get(0).setOnMouseClicked(e -&gt; changeSceneToLoginMenu());\r\n        root.getChildren().get(0).setOnKeyPressed(e -&gt; changeSceneToLoginMenu());\r\n/*\r\n        root.setOnMouseClicked(e -&gt; changeSceneToLoginMenu());\r\n        root.setOnKeyReleased(e -&gt; changeSceneToLoginMenu());\r\n        root.setOnKeyPressed(e -&gt; changeSceneToLoginMenu());\r\n*/\r\n        Scene scene = new Scene(root, 1280, 720);\r\n        primaryStage.setScene(scene);\r\n        primaryStage.show();\r\n\r\n        this.primaryStage = primaryStage;\r\n\r\n    }\r\n\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/X5ait.jpg","title":"How to set an action to occur on pressing of any keyboard key in JavaFX?","body":"<p>So I want to do a title Menu for a video game project for college. I want to display a message press any key to continue... then when the user pressed any key, including the mouse, a method would run to set the stage to the next menu.</p>\n<p><a href=\"https://i.stack.imgur.com/X5ait.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/X5ait.jpg\" alt=\"enter image description here\" /></a></p>\n<p>I posted all the relevant code bellow but short version is:</p>\n<ul>\n<li><code>BackgroundImangeDisplayPane</code> extends display pane and adds a background image.</li>\n<li><code>TitleCard</code> extends <code>BackgroundImangeDisplayPane</code> adds a VBox and 2 labels to the VBox</li>\n<li>I'm using <code>public void start(Stage primaryStage) throws Exception</code> as the main, I set the <code>setOnActionxxx</code> methods here</li>\n</ul>\n<p>I have tried using the set on action method on root and Vbox and non of them work... when I click nothing happens... But when I resize the window The <code>root.setOnActionXXX</code> &quot;activates&quot;.</p>\n<p>If I write the setOnAction methods on the <code>TitleCard</code> class It kind of works but then I cant switch the stage.</p>\n<p>I will post the code bellow as well an explanation of the Scene structure its not to complicated:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n// this will be the borderpane for every scene it recives a backgund \n//images that will be present in every menu\npublic BackgroundImangeDisplayPane() {\n        try {\n            stream = new FileInputStream(imagePath.toString());\n            Image image = new Image(stream);\n            ImageView imageView = new ImageView();\n            imageView.setImage(image);\n            imageView.setFitWidth(1920);\n            imageView.setPreserveRatio(true);\n            this.getChildren().add(imageView);\n\n            BackgroundSize backgoundSize = new BackgroundSize(AUTO, AUTO, true, true, true, true);\n            BackgroundImage backgroundImage = new BackgroundImage(image, NO_REPEAT, NO_REPEAT, CENTER, backgoundSize);\n            Background background = new Background(backgroundImage);\n            this.setBackground(background);\n\n        } catch (Exception e) {\n\n        }\n    }\n\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>\n//This extends `BackgroundImangeDisplayPane` and places on top of it a A Vbox with two lables: the title and &quot;press any key to continue...&quot;\n// it then adds styles to the labels\npublic class TitleCard extends BackgroundImangeDisplayPane {\n    Label title = new Label(&quot;Boats &amp; Docks&quot;); // lable 1\n    Label subtitle = new Label(&quot;Press any key to continue ...&quot;); label2\n    \n    public TitleCard(){\n        super();\n        VBox vbox = new VBox();\n        vbox.getChildren().add(title);\n        vbox.getChildren().add(subtitle);\n        \n        this.setCenter(vbox);\n        this.setAlignment(vbox, Pos.CENTER);\n        vbox.setAlignment(Pos.CENTER);\n        title.setFont(new Font(170)); // set to Label\n        title.setTextFill(Color.SNOW);\n        title.setEffect(new DropShadow());\n        subtitle.setFont( new Font (30));\n          \n    }\n}\n\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>... \n//Works as the &quot;main&quot; in javaFX\nprivate Stage primaryStage;\n\n    @Override\n    public void start(Stage primaryStage) throws Exception {\n\n        TitleCard root = new TitleCard();\n        /*BasicMenu menu = new BasicMenu(5);\n        menu.ButtonSetOnAction(0, e -&gt; changeScene() );\n        BackgroundImangeWithCustomMenu background = new \n        BackgroundImangeWithCustomMenu(menu,50,50);\n        root.setCenter(background);*/\n        Button b = new Button();\n        b.setOnAction(e -&gt; changeSceneToLoginMenu());\n        System.out.println(root.getChildren().get(1).getClass());\n        root.getChildren().get(1).setFocusTraversable(true);\n        root.getChildren().get(1).setOnMouseClicked(e -&gt; changeSceneToLoginMenu());\n        root.getChildren().get(1).setOnKeyPressed(e -&gt; changeSceneToLoginMenu());\n        root.getChildren().get(0).setOnMouseClicked(e -&gt; changeSceneToLoginMenu());\n        root.getChildren().get(0).setOnKeyPressed(e -&gt; changeSceneToLoginMenu());\n/*\n        root.setOnMouseClicked(e -&gt; changeSceneToLoginMenu());\n        root.setOnKeyReleased(e -&gt; changeSceneToLoginMenu());\n        root.setOnKeyPressed(e -&gt; changeSceneToLoginMenu());\n*/\n        Scene scene = new Scene(root, 1280, 720);\n        primaryStage.setScene(scene);\n        primaryStage.show();\n\n        this.primaryStage = primaryStage;\n\n    }\n\n</code></pre>\n"},{"tags":["java","eclipse","var"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1634339463,"post_id":69591418,"comment_id":123006396,"body_markdown":"If you&#39;re able to use it as a Map, it&#39;s probably an Eclipse glitch","body":"If you&#39;re able to use it as a Map, it&#39;s probably an Eclipse glitch"},{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1634346731,"post_id":69591418,"comment_id":123007309,"body_markdown":"Which release of Eclipse is this, and what is your project&#39;s compiler compliance set to?","body":"Which release of Eclipse is this, and what is your project&#39;s compiler compliance set to?"},{"owner":{"account_id":268799,"reputation":2122,"user_id":557771,"accept_rate":83,"display_name":"threenplusone"},"score":0,"creation_date":1634347368,"post_id":69591418,"comment_id":123007380,"body_markdown":"@nitind Sorry, I definitely should have included that. Eclipse 4.21.0 (20210910-1417), JDK Compliance 11 (Generated class &amp; Source compatibility are also both 11)","body":"@nitind Sorry, I definitely should have included that. Eclipse 4.21.0 (20210910-1417), JDK Compliance 11 (Generated class &amp; Source compatibility are also both 11)"},{"owner":{"account_id":3159259,"reputation":109668,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1634367683,"post_id":69591418,"comment_id":123009626,"body_markdown":"I also see this sometimes, it just seems to be the hover information - you are not misunderstanding var this is definitely an Eclipse issue.","body":"I also see this sometimes, it just seems to be the hover information - you are not misunderstanding var this is definitely an Eclipse issue."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1634423774,"post_id":69591418,"comment_id":123021588,"body_markdown":"I cannot reproduce this in Eclipse 2021-09 (4.21). Please show a minimal reproducible example that can be compiled of its own.","body":"I cannot reproduce this in Eclipse 2021-09 (4.21). Please show a minimal reproducible example that can be compiled of its own."},{"owner":{"account_id":268799,"reputation":2122,"user_id":557771,"accept_rate":83,"display_name":"threenplusone"},"score":0,"creation_date":1634428623,"post_id":69591418,"comment_id":123022304,"body_markdown":"@howlger Sure thing, I have added an edit with a small self-contained example","body":"@howlger Sure thing, I have added an edit with a small self-contained example"},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1634458332,"post_id":69591418,"comment_id":123025668,"body_markdown":"Thanks for the example. I&#39;m not able to reproduce this with the given example in Eclipse 2021-09 (4.21) on Windows 10. Do you have the Java 17 support plugin or other additional plugins installed? Do you get this always or only the first time when hovering?","body":"Thanks for the example. I&#39;m not able to reproduce this with the given example in Eclipse 2021-09 (4.21) on Windows 10. Do you have the Java 17 support plugin or other additional plugins installed? Do you get this always or only the first time when hovering?"},{"owner":{"account_id":268799,"reputation":2122,"user_id":557771,"accept_rate":83,"display_name":"threenplusone"},"score":0,"creation_date":1634514425,"post_id":69591418,"comment_id":123038081,"body_markdown":"@howlger I do not believe I have the Java 17 support plugin. It is a vanilla install of Eclipse under Debian 11 and the project was migrated from an older version of Eclipse. It happens every time I hover over that particular variable.","body":"@howlger I do not believe I have the Java 17 support plugin. It is a vanilla install of Eclipse under Debian 11 and the project was migrated from an older version of Eclipse. It happens every time I hover over that particular variable."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1634537497,"post_id":69591418,"comment_id":123041377,"body_markdown":"@threenplusone What happens if you delete all in the line before `fakeConfirmations` , hit Ctrl+1 and choose _Assign statement to new local variable_?","body":"@threenplusone What happens if you delete all in the line before <code>fakeConfirmations</code> , hit Ctrl+1 and choose <i>Assign statement to new local variable</i>?"},{"owner":{"account_id":268799,"reputation":2122,"user_id":557771,"accept_rate":83,"display_name":"threenplusone"},"score":0,"creation_date":1634604375,"post_id":69591418,"comment_id":123064165,"body_markdown":"@howlger When I do that it generates the correct type : Map&lt;Integer, Set&lt;Integer&gt;&gt;","body":"@howlger When I do that it generates the correct type : Map&lt;Integer, Set&lt;Integer&gt;&gt;"},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1634628287,"post_id":69591418,"comment_id":123068814,"body_markdown":"@threenplusone That&#39;s strange. Which Java version do you use in your project?","body":"@threenplusone That&#39;s strange. Which Java version do you use in your project?"},{"owner":{"account_id":268799,"reputation":2122,"user_id":557771,"accept_rate":83,"display_name":"threenplusone"},"score":0,"creation_date":1634692463,"post_id":69591418,"comment_id":123091521,"body_markdown":"@howlger I&#39;m using Java 11 for the project, and I have installed &quot;OpenJDK 64-Bit Server VM (build 11.0.12+7-post-Debian-2, mixed mode, sharing)&quot;","body":"@howlger I&#39;m using Java 11 for the project, and I have installed &quot;OpenJDK 64-Bit Server VM (build 11.0.12+7-post-Debian-2, mixed mode, sharing)&quot;"},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1634709624,"post_id":69591418,"comment_id":123094356,"body_markdown":"@threenplusone Thx. And in the _Javadoc_ view? When I select `var`, in the _Javadoc_ view I get also `java.util.Map&lt;Integer, Set&lt;Integer&gt;&gt;` (with both, Java 11 and 16). Is the hover and _Javadoc_ view different for you?","body":"@threenplusone Thx. And in the <i>Javadoc</i> view? When I select <code>var</code>, in the <i>Javadoc</i> view I get also <code>java.util.Map&lt;Integer, Set&lt;Integer&gt;&gt;</code> (with both, Java 11 and 16). Is the hover and <i>Javadoc</i> view different for you?"},{"owner":{"account_id":268799,"reputation":2122,"user_id":557771,"accept_rate":83,"display_name":"threenplusone"},"score":0,"creation_date":1634792329,"post_id":69591418,"comment_id":123121923,"body_markdown":"@howlger When I hover of the &#39;var&#39; keyword it shows me the correct Javadoc `java.util.Map&lt;Integer, Set&lt;Integer&gt;&gt;`","body":"@howlger When I hover of the &#39;var&#39; keyword it shows me the correct Javadoc <code>java.util.Map&lt;Integer, Set&lt;Integer&gt;&gt;</code>"},{"owner":{"account_id":268799,"reputation":2122,"user_id":557771,"accept_rate":83,"display_name":"threenplusone"},"score":0,"creation_date":1634792647,"post_id":69591418,"comment_id":123121974,"body_markdown":"I have just noticed something further, it is only an `Object` if my keyMapper is `Entry::getKey`. If I change it to `(o) -&gt; o.getKey()` the hover shows correctly","body":"I have just noticed something further, it is only an <code>Object</code> if my keyMapper is <code>Entry::getKey</code>. If I change it to <code>(o) -&gt; o.getKey()</code> the hover shows correctly"}],"owner":{"account_id":268799,"reputation":2122,"user_id":557771,"accept_rate":83,"display_name":"threenplusone"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":332,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1634428555,"creation_date":1634339087,"question_id":69591418,"body_markdown":"I am new to the `var` keyword, and I am trying to understand something in Eclipse.\r\n\r\nThe code I have is:\r\n```\r\nMap&lt;Integer, Set&lt;Integer&gt;&gt; savedConfirmations = USERS.fetchStaffAccessConfirmed(managerId, dates)\r\n    .entrySet()\r\n    .stream()\r\n    .collect(Collectors.toMap(Entry::getKey, (o) -&gt; o.getValue().keySet()));\r\n```\r\n\r\nWhen I change the type from `Map&lt;Integer, Set&lt;Integer&gt;&gt;` to `var` Eclipse tells me it is an `Object` when I hover over it.\r\n\r\n![Correct type][1]\r\n\r\n![Incorrect type][2]\r\n\r\nHowever I am able to use the variable as if it is a `Map&lt;Integer, Set&lt;Integer&gt;&gt;` in both ways without error.\r\n\r\nEg:\r\n```\r\nsavedConfirmations.get(1);\r\n```\r\n\r\nIt appears to only effect `Collectors.toMap`, as if I collect to a List the hover shows its correct type.\r\n\r\nIs there something I am misunderstanding about `var`?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/qNo15.png\r\n  [2]: https://i.stack.imgur.com/rMQdl.png\r\n\r\n\r\n---\r\n\r\nEdit\r\n\r\nHere is a small class which replicates the issue:\r\n\r\n```\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\nimport java.util.Map.Entry;\r\nimport java.util.Set;\r\nimport java.util.stream.Collectors;\r\n\r\npublic class Test {\r\n\tpublic int test() {\r\n\t\tMap&lt;Integer, Map&lt;Integer, String&gt;&gt; fakeConfirmations = new HashMap&lt;&gt;();\r\n\r\n\t\t// Change this line to &#39;var&#39;\r\n\t\tMap&lt;Integer, Set&lt;Integer&gt;&gt; confirmations = fakeConfirmations\r\n                .entrySet()\r\n                .stream()\r\n                .collect(Collectors.toMap(Entry::getKey,\r\n                                          (o) -&gt; o.getValue().keySet()));\r\n\r\n\t\treturn confirmations.size();\r\n\t}\r\n}\r\n````","title":"Eclipse showing &#39;Object&#39; instead of correct type for var","body":"<p>I am new to the <code>var</code> keyword, and I am trying to understand something in Eclipse.</p>\n<p>The code I have is:</p>\n<pre><code>Map&lt;Integer, Set&lt;Integer&gt;&gt; savedConfirmations = USERS.fetchStaffAccessConfirmed(managerId, dates)\n    .entrySet()\n    .stream()\n    .collect(Collectors.toMap(Entry::getKey, (o) -&gt; o.getValue().keySet()));\n</code></pre>\n<p>When I change the type from <code>Map&lt;Integer, Set&lt;Integer&gt;&gt;</code> to <code>var</code> Eclipse tells me it is an <code>Object</code> when I hover over it.</p>\n<p><img src=\"https://i.stack.imgur.com/qNo15.png\" alt=\"Correct type\" /></p>\n<p><img src=\"https://i.stack.imgur.com/rMQdl.png\" alt=\"Incorrect type\" /></p>\n<p>However I am able to use the variable as if it is a <code>Map&lt;Integer, Set&lt;Integer&gt;&gt;</code> in both ways without error.</p>\n<p>Eg:</p>\n<pre><code>savedConfirmations.get(1);\n</code></pre>\n<p>It appears to only effect <code>Collectors.toMap</code>, as if I collect to a List the hover shows its correct type.</p>\n<p>Is there something I am misunderstanding about <code>var</code>?</p>\n<hr />\n<p>Edit</p>\n<p>Here is a small class which replicates the issue:</p>\n<pre><code>import java.util.HashMap;\nimport java.util.Map;\nimport java.util.Map.Entry;\nimport java.util.Set;\nimport java.util.stream.Collectors;\n\npublic class Test {\n    public int test() {\n        Map&lt;Integer, Map&lt;Integer, String&gt;&gt; fakeConfirmations = new HashMap&lt;&gt;();\n\n        // Change this line to 'var'\n        Map&lt;Integer, Set&lt;Integer&gt;&gt; confirmations = fakeConfirmations\n                .entrySet()\n                .stream()\n                .collect(Collectors.toMap(Entry::getKey,\n                                          (o) -&gt; o.getValue().keySet()));\n\n        return confirmations.size();\n    }\n}\n</code></pre>\n"},{"tags":["java","exception"],"comments":[{"owner":{"account_id":10079574,"reputation":1734,"user_id":7450414,"display_name":"AndiCover"},"score":2,"creation_date":1627576250,"post_id":68579656,"comment_id":121199223,"body_markdown":"I would say it is up to you where you catch exceptions. There are scenarios where you want to catch the exception where it occurs and others where you want the caller to catch them.","body":"I would say it is up to you where you catch exceptions. There are scenarios where you want to catch the exception where it occurs and others where you want the caller to catch them."},{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":1,"creation_date":1627591115,"post_id":68579656,"comment_id":121204431,"body_markdown":"Catch the exceptions where you can actually handle them gracefully.","body":"Catch the exceptions where you can actually handle them gracefully."},{"owner":{"account_id":2339925,"reputation":15581,"user_id":2051454,"accept_rate":60,"display_name":"Software Engineer"},"score":1,"creation_date":1634479720,"post_id":68579656,"comment_id":123030437,"body_markdown":"I can&#39;t add an answer because this is closed, but... Each layer of your app should produce it&#39;s own custom exceptions and not bubble up exceptions from a lower layer. e.g. a SQL exception should never leave the persistence layer -- it should be caught and dealt within within the persistence layer. If that exception stops you from processing a request, then a new exception should be raised to that effect (while logging the lower level exception). This applies to all layers -- each layer should have its own exception and not expose lower-level exceptions.","body":"I can&#39;t add an answer because this is closed, but... Each layer of your app should produce it&#39;s own custom exceptions and not bubble up exceptions from a lower layer. e.g. a SQL exception should never leave the persistence layer -- it should be caught and dealt within within the persistence layer. If that exception stops you from processing a request, then a new exception should be raised to that effect (while logging the lower level exception). This applies to all layers -- each layer should have its own exception and not expose lower-level exceptions."}],"answers":[{"tags":[],"owner":{"account_id":137890,"reputation":8718,"user_id":995052,"accept_rate":56,"display_name":"Kris"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1627577481,"creation_date":1627577481,"answer_id":68579992,"question_id":68579656,"body_markdown":"This question can lead to answers which are opinionated depending on the structuring approaches used. But I can just share the standards I follow or my team follows which seems to be very effective and reasonable. \r\n\r\nThere are some standard assumptions we make before writing any code\r\n\r\n 1. A method serves a single responsibility. (inline with SR of a class )\r\n 2. A method either returns a expected output or raises an exception. \r\n 3. We have a set of custom exception classes with a base parent class extended from Exception / Throwable for every unique error scenario\r\n\r\n\r\nThese assumptions / rules has helped us in structuring the code not only in terms of exception but also in having a better maintainable code base. Coming to the exception handling keeping the assumptions in mind, \r\n\r\n 1. The method bodies are written inside a try/catch block which will potentially catch all possible exceptions (Not RuntimeException / Exception / Throwable)\r\n 2. A custom exception can be raised by the method which is relevant to the context with some parameters like a message, error code, or more info defined in the custom exception base. \r\n 3. The top most layer of application will catch the base custom exception and can work with the messages and codes accordingly. This layer will also catch a Throwable, to catch all other exceptions and do something like sending a 500 in case of REST API. \r\n\r\nIn no case, the application will suffer a crash. So IMO, every method with some logical context should use a try/catch block and raise a context oriented exception. The layer just above can catch such an exception and then further customize the exception or throw a different one if needed. \r\n\r\n\r\n","title":"How to organize exception handling in java on large projects?","body":"<p>This question can lead to answers which are opinionated depending on the structuring approaches used. But I can just share the standards I follow or my team follows which seems to be very effective and reasonable.</p>\n<p>There are some standard assumptions we make before writing any code</p>\n<ol>\n<li>A method serves a single responsibility. (inline with SR of a class )</li>\n<li>A method either returns a expected output or raises an exception.</li>\n<li>We have a set of custom exception classes with a base parent class extended from Exception / Throwable for every unique error scenario</li>\n</ol>\n<p>These assumptions / rules has helped us in structuring the code not only in terms of exception but also in having a better maintainable code base. Coming to the exception handling keeping the assumptions in mind,</p>\n<ol>\n<li>The method bodies are written inside a try/catch block which will potentially catch all possible exceptions (Not RuntimeException / Exception / Throwable)</li>\n<li>A custom exception can be raised by the method which is relevant to the context with some parameters like a message, error code, or more info defined in the custom exception base.</li>\n<li>The top most layer of application will catch the base custom exception and can work with the messages and codes accordingly. This layer will also catch a Throwable, to catch all other exceptions and do something like sending a 500 in case of REST API.</li>\n</ol>\n<p>In no case, the application will suffer a crash. So IMO, every method with some logical context should use a try/catch block and raise a context oriented exception. The layer just above can catch such an exception and then further customize the exception or throw a different one if needed.</p>\n"}],"owner":{"account_id":8104852,"reputation":53,"user_id":6244646,"display_name":"Carlos Martins"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":406,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"closed_date":1627591120,"accepted_answer_id":68579992,"answer_count":1,"score":-1,"last_activity_date":1634428367,"creation_date":1627575947,"question_id":68579656,"body_markdown":"I&#39;m familiar with the basic of exception handling including the `try`, `catch`, `throw` and `throws` keywords.\r\n\r\nMy question is about how one should organize his exception handling on a large project. I could not find a single book or resource that explains how to implement exception in a &quot;standard&quot; way, every resource I found only teaches you the basics.\r\n\r\nFor example **where should I put the try-catch block?** If we imagine a chain of methods the top link of the chain being the main and the bottom is the method that throws the exception is there a convention for where the try-catch block should be? \r\n * in the main ?\r\n * in the method that call the method that throws the exception ?\r\n * some where in between ?\r\n\r\nThank you. ","title":"How to organize exception handling in java on large projects?","body":"<p>I'm familiar with the basic of exception handling including the <code>try</code>, <code>catch</code>, <code>throw</code> and <code>throws</code> keywords.</p>\n<p>My question is about how one should organize his exception handling on a large project. I could not find a single book or resource that explains how to implement exception in a &quot;standard&quot; way, every resource I found only teaches you the basics.</p>\n<p>For example <strong>where should I put the try-catch block?</strong> If we imagine a chain of methods the top link of the chain being the main and the bottom is the method that throws the exception is there a convention for where the try-catch block should be?</p>\n<ul>\n<li>in the main ?</li>\n<li>in the method that call the method that throws the exception ?</li>\n<li>some where in between ?</li>\n</ul>\n<p>Thank you.</p>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":4501373,"reputation":954,"user_id":3659807,"display_name":"Omar Abdel Bari"},"score":1,"creation_date":1634395017,"post_id":69596546,"comment_id":123015171,"body_markdown":"Because character is converted to it&#39;s computer representation value (int equivalent) and added to the length. If you converted np[1] to a string and left the rest of the same you should no longer see this issue.","body":"Because character is converted to it&#39;s computer representation value (int equivalent) and added to the length. If you converted np[1] to a string and left the rest of the same you should no longer see this issue."},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1634395018,"post_id":69596546,"comment_id":123015172,"body_markdown":"Because, on bytecode level, all primitves that are &quot;`&lt;= int`&quot; are converted to `int`. Thus, `char`s get upcasted to `int` (by converting them to their UTF8 value) before they are &quot;added&quot;. In the second example, the `&quot;&quot; + np[1]` is evaluated first and since the left-handed side of the binary operator is a `String`, the right-handed side must be converted to a `String` as well and gives the correct output.","body":"Because, on bytecode level, all primitves that are &quot;<code>&lt;= int</code>&quot; are converted to <code>int</code>. Thus, <code>char</code>s get upcasted to <code>int</code> (by converting them to their UTF8 value) before they are &quot;added&quot;. In the second example, the <code>&quot;&quot; + np[1]</code> is evaluated first and since the left-handed side of the binary operator is a <code>String</code>, the right-handed side must be converted to a <code>String</code> as well and gives the correct output."}],"answers":[{"tags":[],"owner":{"account_id":4501373,"reputation":954,"user_id":3659807,"display_name":"Omar Abdel Bari"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1634402395,"creation_date":1634395599,"answer_id":69596651,"question_id":69596546,"body_markdown":"`&#39;s&#39; + &#39;f&#39;` will convert each character to its byte representation based on the encoding and auto convert it to an `int` value. These are based on the [widening primitive conversions](https://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html) rules. Basically, `char` is treated as a more specific type of `int` and when added together, the more general of the two (`int`) will be the type returned.\r\n\r\nTo solve this, you can convert one of the variables to a type which will prevent the compiler from interpreting it as an `int` addition. One way would be to add a `String` at the start as you have above. Another way could be to modify `np[1]` to `String.valueOf(np[1])` in the equation.","title":"why is it giving numbers as output instead of elements in the array?","body":"<p><code>'s' + 'f'</code> will convert each character to its byte representation based on the encoding and auto convert it to an <code>int</code> value. These are based on the <a href=\"https://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html\" rel=\"nofollow noreferrer\">widening primitive conversions</a> rules. Basically, <code>char</code> is treated as a more specific type of <code>int</code> and when added together, the more general of the two (<code>int</code>) will be the type returned.</p>\n<p>To solve this, you can convert one of the variables to a type which will prevent the compiler from interpreting it as an <code>int</code> addition. One way would be to add a <code>String</code> at the start as you have above. Another way could be to modify <code>np[1]</code> to <code>String.valueOf(np[1])</code> in the equation.</p>\n"},{"tags":[],"owner":{"account_id":7168170,"reputation":43,"user_id":5476598,"display_name":"Syn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634427991,"creation_date":1634398724,"answer_id":69597069,"question_id":69596546,"body_markdown":"Syntax `np[1]+np[np.length-1` is converted to `&#39;s&#39; + &#39;f&#39;`, which is treated by java as an addition operation. Hence JAVA converts &#39;s&#39; and &#39;f&#39; to their **[ASCII integer][1]** values 115 and 102 and adds them to 217.\r\n\r\nOn the second statement including a **double quote(&quot;&quot;)** locks that value as a string and hence, JAVA no longer treats the operation as an addition but a string combination, thus the result.\r\n\r\n\r\n  [1]: https://www.cs.cmu.edu/~pattis/15-1XX/common/handouts/ascii.html","title":"why is it giving numbers as output instead of elements in the array?","body":"<p>Syntax <code>np[1]+np[np.length-1</code> is converted to <code>'s' + 'f'</code>, which is treated by java as an addition operation. Hence JAVA converts 's' and 'f' to their <strong><a href=\"https://www.cs.cmu.edu/%7Epattis/15-1XX/common/handouts/ascii.html\" rel=\"nofollow noreferrer\">ASCII integer</a></strong> values 115 and 102 and adds them to 217.</p>\n<p>On the second statement including a <strong>double quote(&quot;&quot;)</strong> locks that value as a string and hence, JAVA no longer treats the operation as an addition but a string combination, thus the result.</p>\n"},{"tags":[],"owner":{"account_id":1743680,"reputation":7925,"user_id":1594359,"display_name":"xdeepakv"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634406395,"creation_date":1634406395,"answer_id":69598141,"question_id":69596546,"body_markdown":"With the new String formatted, You can simplify this.\r\n\r\n```java\r\nchar[] np = { &#39;a&#39;, &#39;s&#39;, &#39;d&#39;, &#39;f&#39; };\r\nSystem.out.println(&quot;%s%s&quot;.formatted(np[1], np[np.length - 1]));\r\n```\r\nBy default, np[1] trying to use the ASCII code value `int+int`","title":"why is it giving numbers as output instead of elements in the array?","body":"<p>With the new String formatted, You can simplify this.</p>\n<pre class=\"lang-java prettyprint-override\"><code>char[] np = { 'a', 's', 'd', 'f' };\nSystem.out.println(&quot;%s%s&quot;.formatted(np[1], np[np.length - 1]));\n</code></pre>\n<p>By default, np[1] trying to use the ASCII code value <code>int+int</code></p>\n"}],"owner":{"account_id":21382293,"reputation":41,"user_id":15748014,"display_name":"Sumanth"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":145,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":69596651,"answer_count":3,"score":0,"last_activity_date":1634427991,"creation_date":1634394867,"question_id":69596546,"body_markdown":"```\r\nchar[] np={&#39;a&#39;,&#39;s&#39;,&#39;d&#39;,&#39;f&#39;};\r\nSystem.out.println(np[1]+np[np.length-1]);\r\n\r\n// this print statement is giving output:217\r\n\r\nSystem.out.println(&quot;&quot;+np[1]+np[np.length-1]);\r\n// this print statement is giving output:af\r\n```\r\nI just want to know why the first one is giving numbers as output ?\r\nand this is in java.","title":"why is it giving numbers as output instead of elements in the array?","body":"<pre><code>char[] np={'a','s','d','f'};\nSystem.out.println(np[1]+np[np.length-1]);\n\n// this print statement is giving output:217\n\nSystem.out.println(&quot;&quot;+np[1]+np[np.length-1]);\n// this print statement is giving output:af\n</code></pre>\n<p>I just want to know why the first one is giving numbers as output ?\nand this is in java.</p>\n"},{"tags":["java","spring-boot","file","reader"],"comments":[{"owner":{"account_id":255453,"reputation":3554,"user_id":535515,"accept_rate":100,"display_name":"Gus"},"score":1,"creation_date":1634310255,"post_id":69585214,"comment_id":122997581,"body_markdown":"Is your application a web app?  if so you&#39;ll want to have the user upload the file first (https://spring.io/guides/gs/uploading-files/), then your app can decide the local file path/file name to assign to it before reading like @Lajos has indicated.","body":"Is your application a web app?  if so you&#39;ll want to have the user upload the file first (<a href=\"https://spring.io/guides/gs/uploading-files/\" rel=\"nofollow noreferrer\">spring.io/guides/gs/uploading-files</a>), then your app can decide the local file path/file name to assign to it before reading like @Lajos has indicated."}],"answers":[{"tags":[],"owner":{"account_id":194308,"reputation":66720,"user_id":436560,"accept_rate":87,"display_name":"Lajos Arpad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634303890,"creation_date":1634303890,"answer_id":69585359,"question_id":69585214,"body_markdown":"You could have a `String path` parameter instead. Then you could do something like this:\r\n\r\n    File file = new File(path);\r\n    FileInputStream excelFile = new FileInputStream(file);","title":"How do I use Java to read from a file that is real life?","body":"<p>You could have a <code>String path</code> parameter instead. Then you could do something like this:</p>\n<pre><code>File file = new File(path);\nFileInputStream excelFile = new FileInputStream(file);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":263656,"reputation":1,"user_id":549372,"accept_rate":100,"display_name":"Martin Zeitler"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634425116,"creation_date":1634424830,"answer_id":69600110,"question_id":69585214,"body_markdown":"The issue likely is this non-sensical `targetPath` which you build up there:\r\n\r\n    Path sourcePath = Paths.get(String.valueOf(file));\r\n    Path targetPath = Paths.get(&quot;C:\\\\Users\\\\User\\\\Desktop\\\\ko\\\\&quot; + sourcePath.getFileName());\r\n\r\nThis might fail already:\r\n\r\n    assertTrue(Files.exists(Paths.get(&quot;C:\\\\Users\\\\User\\\\Desktop\\\\ko\\\\&quot;)));\r\n\r\n`Files.exists(Path)` also returns `false`, when not being permitted to list the directory.","title":"How do I use Java to read from a file that is real life?","body":"<p>The issue likely is this non-sensical <code>targetPath</code> which you build up there:</p>\n<pre><code>Path sourcePath = Paths.get(String.valueOf(file));\nPath targetPath = Paths.get(&quot;C:\\\\Users\\\\User\\\\Desktop\\\\ko\\\\&quot; + sourcePath.getFileName());\n</code></pre>\n<p>This might fail already:</p>\n<pre><code>assertTrue(Files.exists(Paths.get(&quot;C:\\\\Users\\\\User\\\\Desktop\\\\ko\\\\&quot;)));\n</code></pre>\n<p><code>Files.exists(Path)</code> also returns <code>false</code>, when not being permitted to list the directory.</p>\n"},{"tags":[],"owner":{"account_id":23020749,"reputation":302,"user_id":17141839,"display_name":"zordu-nickim-agzivi-sikm"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634427595,"creation_date":1634427595,"answer_id":69600327,"question_id":69585214,"body_markdown":"In the end I have successfully solved all the problems and everything is working fine.In this case, What I wanted to do was to take the excel file using MultipartFile and print the values in it to the appropriate columns in the database, and then the most difficult thing was to assign the excel file I got from the user to the folder I specified on the computer.\r\n\r\n     @Override\r\n        public Response acceptExcellFileAndInsertToDatabase2(MultipartFile file) throws IOException {\r\n            System.out.println(file.getContentType());\r\n            String fileName = file.getOriginalFilename();\r\n            if (fileName.substring(fileName.length() - 5).equals(&quot;.xlsx&quot;)) {\r\n                try (InputStream excelFile = file.getInputStream()) {\r\n                    String phoneNumber = &quot;&quot;;\r\n                    String textMessage = &quot;&quot;;\r\n                    Workbook workbook = new XSSFWorkbook(excelFile);\r\n                    Sheet datatypeSheet = workbook.getSheetAt(0);\r\n                    for (Row currentRow : datatypeSheet) {\r\n                        for (Cell currentCell : currentRow) {\r\n                            if (currentCell.getCellTypeEnum() == CellType.NUMERIC) {\r\n                                phoneNumber = NumberToTextConverter.toText(currentCell.getNumericCellValue());\r\n                            } else if (currentCell.getCellTypeEnum() == CellType.STRING) {\r\n                                textMessage = String.valueOf(currentCell.getStringCellValue());\r\n                            }\r\n                        }\r\n                    }\r\n                    UserDetail userDetail = new UserDetail();\r\n                    userDetail.setPhoneNumber(phoneNumber);\r\n                    userDetail.setTextMessage(textMessage);\r\n                    this.userDetailRepository.save(userDetail);\r\n                    excelFile.close();\r\n    \r\n                    String destination = &quot;C:\\\\Users\\\\User\\\\Desktop\\\\ko\\\\&quot;  + file.getOriginalFilename();\r\n                    File file1 = new File(destination);\r\n                    file.transferTo(file1);\r\n    \r\n                    return new SuccessResponse(MessageCase.FILE_SUCCESSFULLY_WRITTEN_TO_DATABASE.getMessage(), 200);\r\n                } catch (IOException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n            return new ErrorResponse(MessageCase.FAILED_HAPPEND_WHEN_FILE_WRITTEN_TO_DATABASE, 404);\r\n        }","title":"How do I use Java to read from a file that is real life?","body":"<p>In the end I have successfully solved all the problems and everything is working fine.In this case, What I wanted to do was to take the excel file using MultipartFile and print the values in it to the appropriate columns in the database, and then the most difficult thing was to assign the excel file I got from the user to the folder I specified on the computer.</p>\n<pre><code> @Override\n    public Response acceptExcellFileAndInsertToDatabase2(MultipartFile file) throws IOException {\n        System.out.println(file.getContentType());\n        String fileName = file.getOriginalFilename();\n        if (fileName.substring(fileName.length() - 5).equals(&quot;.xlsx&quot;)) {\n            try (InputStream excelFile = file.getInputStream()) {\n                String phoneNumber = &quot;&quot;;\n                String textMessage = &quot;&quot;;\n                Workbook workbook = new XSSFWorkbook(excelFile);\n                Sheet datatypeSheet = workbook.getSheetAt(0);\n                for (Row currentRow : datatypeSheet) {\n                    for (Cell currentCell : currentRow) {\n                        if (currentCell.getCellTypeEnum() == CellType.NUMERIC) {\n                            phoneNumber = NumberToTextConverter.toText(currentCell.getNumericCellValue());\n                        } else if (currentCell.getCellTypeEnum() == CellType.STRING) {\n                            textMessage = String.valueOf(currentCell.getStringCellValue());\n                        }\n                    }\n                }\n                UserDetail userDetail = new UserDetail();\n                userDetail.setPhoneNumber(phoneNumber);\n                userDetail.setTextMessage(textMessage);\n                this.userDetailRepository.save(userDetail);\n                excelFile.close();\n\n                String destination = &quot;C:\\\\Users\\\\User\\\\Desktop\\\\ko\\\\&quot;  + file.getOriginalFilename();\n                File file1 = new File(destination);\n                file.transferTo(file1);\n\n                return new SuccessResponse(MessageCase.FILE_SUCCESSFULLY_WRITTEN_TO_DATABASE.getMessage(), 200);\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }\n        return new ErrorResponse(MessageCase.FAILED_HAPPEND_WHEN_FILE_WRITTEN_TO_DATABASE, 404);\n    }\n</code></pre>\n"}],"owner":{"account_id":23020749,"reputation":302,"user_id":17141839,"display_name":"zordu-nickim-agzivi-sikm"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":208,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":3,"score":0,"last_activity_date":1634427595,"creation_date":1634303207,"question_id":69585214,"body_markdown":"The reason I do use MultipartFile is because there is a button image in the image in swagger. I am successfully adding the values in the excel file I received to the database, but at the same time I am encountering the following error.\r\n\r\n    java.nio.file.NoSuchFileException: org.springframework.web.multipart.support.StandardMultipartHttpServletRequest$StandardMultipartFile@6417030b\r\n    \tat sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:79)\r\n    \tat sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:97)\r\n    \tat sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:102)\r\n    \tat sun.nio.fs.WindowsFileCopy.move(WindowsFileCopy.java:318)\r\n    \tat sun.nio.fs.WindowsFileSystemProvider.move(WindowsFileSystemProvider.java:287)\r\n    \tat java.nio.file.Files.move(Files.java:1395)\r\n    \tat az.expressbank.expressbankproject.service.impl.UserDetailServiceImpl.acceptExcellFileAndInsertToDatabase2(UserDetailServiceImpl.java:62)\r\n    \tat az.expressbank.expressbankproject.controller.UserDetailController.writeExcelledRowColumnIntoDatabase(UserDetailController.java:24)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)\r\n    \tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:681)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:764)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n    \tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n    \tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n    \tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n    \tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n    \tat org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n    \tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n    \tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n    \tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)\r\n    \tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\r\n    \tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n    \tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n    \tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n    \tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)\r\n    \tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n    \tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)\r\n    \tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1726)\r\n    \tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n    \tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n    \tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n    \tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n    \tat java.lang.Thread.run(Thread.java:748)\r\nBut another problem, I can&#39;t send my file to the folder I specified. I think I&#39;ve closed everything, but still I can&#39;t send it to the specified folder, if I send it and fix the error I explained above, my problem will no longer exist.\r\n\r\n     public Response acceptExcellFileAndInsertToDatabase2(MultipartFile file) throws IOException {\r\n            String fileName = file.getOriginalFilename();\r\n            if (fileName.substring(fileName.length() - 5, fileName.length()).equals(&quot;.xlsx&quot;)) {\r\n                try (InputStream excelFile = file.getInputStream()) {\r\n                    String phoneNumber = &quot;&quot;;\r\n                    String textMessage = &quot;&quot;;\r\n                    Workbook workbook = WorkbookFactory.create(excelFile);\r\n                    Sheet sheet = workbook.getSheetAt(0);\r\n                    Iterator&lt;Row&gt; rowIt = sheet.rowIterator();\r\n                    while (rowIt.hasNext()) {\r\n                        Row currentRow = rowIt.next();\r\n                        Iterator&lt;Cell&gt; cellIterator = currentRow.iterator();\r\n                        while (cellIterator.hasNext()) {\r\n                            Cell currentCell = cellIterator.next();\r\n                            if (currentCell.getCellTypeEnum() == CellType.NUMERIC) {\r\n                                phoneNumber = NumberToTextConverter.toText(currentCell.getNumericCellValue());\r\n                            } else if (currentCell.getCellTypeEnum() == CellType.STRING) {\r\n                                textMessage = String.valueOf(currentCell.getStringCellValue());\r\n                            }\r\n                        }\r\n                    }\r\n                    UserDetail userDetail = new UserDetail();\r\n                    userDetail.setPhoneNumber(phoneNumber);\r\n                    userDetail.setTextMessage(textMessage);\r\n                    this.userDetailRepository.save(userDetail);\r\n                    excelFile.close();\r\n                    workbook.close();\r\n                    Path sourcePath = Paths.get(String.valueOf(file));\r\n                    Path targetPath = Paths.get(&quot;C:\\\\Users\\\\User\\\\Desktop\\\\ko\\\\&quot; + sourcePath.getFileName());\r\n                    Files.move(sourcePath, targetPath);\r\n                    return new SuccessResponse(MessageCase.FILE_SUCCESSFULLY_WRITTEN_TO_DATABASE.getMessage(), 200);\r\n                } catch (IOException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n            return new ErrorResponse(MessageCase.FAILED_HAPPEND_WHEN_FILE_WRITTEN_TO_DATABASE, 404);\r\n        }\r\n","title":"How do I use Java to read from a file that is real life?","body":"<p>The reason I do use MultipartFile is because there is a button image in the image in swagger. I am successfully adding the values in the excel file I received to the database, but at the same time I am encountering the following error.</p>\n<pre><code>java.nio.file.NoSuchFileException: org.springframework.web.multipart.support.StandardMultipartHttpServletRequest$StandardMultipartFile@6417030b\n    at sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:79)\n    at sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:97)\n    at sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:102)\n    at sun.nio.fs.WindowsFileCopy.move(WindowsFileCopy.java:318)\n    at sun.nio.fs.WindowsFileSystemProvider.move(WindowsFileSystemProvider.java:287)\n    at java.nio.file.Files.move(Files.java:1395)\n    at az.expressbank.expressbankproject.service.impl.UserDetailServiceImpl.acceptExcellFileAndInsertToDatabase2(UserDetailServiceImpl.java:62)\n    at az.expressbank.expressbankproject.controller.UserDetailController.writeExcelledRowColumnIntoDatabase(UserDetailController.java:24)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1726)\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    at java.lang.Thread.run(Thread.java:748)\n</code></pre>\n<p>But another problem, I can't send my file to the folder I specified. I think I've closed everything, but still I can't send it to the specified folder, if I send it and fix the error I explained above, my problem will no longer exist.</p>\n<pre><code> public Response acceptExcellFileAndInsertToDatabase2(MultipartFile file) throws IOException {\n        String fileName = file.getOriginalFilename();\n        if (fileName.substring(fileName.length() - 5, fileName.length()).equals(&quot;.xlsx&quot;)) {\n            try (InputStream excelFile = file.getInputStream()) {\n                String phoneNumber = &quot;&quot;;\n                String textMessage = &quot;&quot;;\n                Workbook workbook = WorkbookFactory.create(excelFile);\n                Sheet sheet = workbook.getSheetAt(0);\n                Iterator&lt;Row&gt; rowIt = sheet.rowIterator();\n                while (rowIt.hasNext()) {\n                    Row currentRow = rowIt.next();\n                    Iterator&lt;Cell&gt; cellIterator = currentRow.iterator();\n                    while (cellIterator.hasNext()) {\n                        Cell currentCell = cellIterator.next();\n                        if (currentCell.getCellTypeEnum() == CellType.NUMERIC) {\n                            phoneNumber = NumberToTextConverter.toText(currentCell.getNumericCellValue());\n                        } else if (currentCell.getCellTypeEnum() == CellType.STRING) {\n                            textMessage = String.valueOf(currentCell.getStringCellValue());\n                        }\n                    }\n                }\n                UserDetail userDetail = new UserDetail();\n                userDetail.setPhoneNumber(phoneNumber);\n                userDetail.setTextMessage(textMessage);\n                this.userDetailRepository.save(userDetail);\n                excelFile.close();\n                workbook.close();\n                Path sourcePath = Paths.get(String.valueOf(file));\n                Path targetPath = Paths.get(&quot;C:\\\\Users\\\\User\\\\Desktop\\\\ko\\\\&quot; + sourcePath.getFileName());\n                Files.move(sourcePath, targetPath);\n                return new SuccessResponse(MessageCase.FILE_SUCCESSFULLY_WRITTEN_TO_DATABASE.getMessage(), 200);\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }\n        return new ErrorResponse(MessageCase.FAILED_HAPPEND_WHEN_FILE_WRITTEN_TO_DATABASE, 404);\n    }\n</code></pre>\n"},{"tags":["java","encryption","cryptography"],"answers":[{"tags":[],"owner":{"account_id":15352842,"reputation":294,"user_id":11076030,"display_name":"Matt"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634427256,"creation_date":1634427256,"answer_id":69600300,"question_id":69599429,"body_markdown":"It looks like I was missing a pair of parenthesis in my decryption equation.\r\n```\r\nint num = Math.floorMod(MultiInverse.modInverse(aValues[i], 26) * (alphabet.indexOf((str.charAt(k)) - j)), 26);\r\n```\r\nShould have been\r\n```\r\nint num = Math.floorMod(MultiInverse.modInverse(aValues[i], 26) * (((alphabet.indexOf(str.charAt(k))) - j)), 26);\t\r\n```","title":"Unexpected output from program that brute-forces affine ciphers","body":"<p>It looks like I was missing a pair of parenthesis in my decryption equation.</p>\n<pre><code>int num = Math.floorMod(MultiInverse.modInverse(aValues[i], 26) * (alphabet.indexOf((str.charAt(k)) - j)), 26);\n</code></pre>\n<p>Should have been</p>\n<pre><code>int num = Math.floorMod(MultiInverse.modInverse(aValues[i], 26) * (((alphabet.indexOf(str.charAt(k))) - j)), 26);   \n</code></pre>\n"}],"owner":{"account_id":15352842,"reputation":294,"user_id":11076030,"display_name":"Matt"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1634427256,"creation_date":1634417246,"question_id":69599429,"body_markdown":"While writing a program to brute force affine ciphers, I stumbled upon some weird output.\r\nFor every a-value, the output seems to become overrun with a single letter as the b-value increases. It seems as if the result of the decryption equation can never go below -1 which it will need to in order for the program to work correctly but that is just a guess as to whats wrong.\r\n```\r\na Value: 1\r\n\r\nesxlnxxceslj\r\ndrwkmwwbdrki\r\ncqvjlvvacqjh\r\nbpuikuuzbpig\r\naothjttzaohf\r\nznsgisszznge\r\nzmrfhrrzzmfd\r\nzlqegqqzzlec\r\nzkpdfppzzkdb\r\nzjoceoozzjca\r\nzinbdnnzzibz\r\nzhmacmmzzhaz\r\nzglzbllzzgzz\r\nzfkzakkzzfzz\r\nzejzzjjzzezz\r\nzdizziizzdzz\r\nzchzzhhzzczz\r\nzbgzzggzzbzz\r\nzafzzffzzazz\r\nzzezzeezzzzz\r\nzzdzzddzzzzz\r\nzzczzcczzzzz\r\nzzbzzbbzzzzz\r\nzzazzaazzzzz\r\nzzzzzzzzzzzz\r\nzzzzzzzzzzzz\r\n\r\na Value: 3\r\n\r\nkgzvnzzskgvd\r\nbxqmeqqjbxmu\r\nsohdvhhasodl\r\njfyumyyrjfuc\r\nawpldpprawlt\r\nrngcuggrrnck\r\nrextlxxrretb\r\nrvokcoorrvks\r\nrmfbtffrrmbj\r\nrdwskwwrrdsa\r\nrunjbnnrrujr\r\nrleaseerrlar\r\nrcvrjvvrrcrr\r\nrtmrammrrtrr\r\nrkdrrddrrkrr\r\nrburruurrbrr\r\nrslrrllrrsrr\r\nrjcrrccrrjrr\r\nratrrttrrarr\r\nrrkrrkkrrrrr\r\nrrbrrbbrrrrr\r\nrrsrrssrrrrr\r\nrrjrrjjrrrrr\r\nrrarraarrrrr\r\nrrrrrrrrrrrr\r\nrrrrrrrrrrrr\r\n\r\na Value: 5\r\n//and so on\r\n```\r\nIn reality, only the first 5 or so lines for each a-value are correct. After that it seems to digress.\r\n\r\n```\r\npackage Ciphers;\r\n\r\npublic class AffineBruteForce {\r\n\tprivate static String alphabet = &quot;abcdefghijklmnopqrstuvwxyz&quot;;\r\n\t\r\n\tpublic static void decrypt(String str) {\r\n\t\tstr = str.toLowerCase();\r\n\t\tint[] aValues = {1, 3, 5, 7, 9, 11, 15, 17, 19, 21, 23, 25};\r\n\t\tStringBuilder insert = new StringBuilder();\r\n\t\t\r\n        //i = a-value\r\n\t\tfor (int i = 0; i &lt; aValues.length; i++) { \r\n\t\t\tSystem.out.println();\r\n\t\t\tSystem.out.println(&quot;a Value: &quot; + aValues[i]);\r\n\t\t\tSystem.out.println();\r\n            //j = b-value\r\n\t\t\tfor (int j = 0; j &lt; 25; j++) {\t\t\r\n\t\t\r\n\t\t\t\tfor (int k = 0; k &lt; str.length(); k++) {\r\n\t\t\t\t\t\r\n\t\t\t\t\t//Decryption equation, x = a^-1(yb) mod 26\r\n\t\t\t\t\tint num = Math.floorMod(MultiInverse.modInverse(aValues[i], 26) * (alphabet.indexOf((str.charAt(k)) - j)), 26);\t\r\n\t\t\t\t\tinsert.append(alphabet.charAt(num));\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\tSystem.out.println(insert.toString());\r\n\t\t\t\tinsert.setLength(0);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic static void main (String[]args) {\r\n\t\tAffineBruteForce.decrypt(&quot;ESXLNXXCESLJ&quot;);\r\n\t}\r\n}\r\n```\r\n```\r\npackage Ciphers;\r\n\r\npublic class MultiInverse {\r\n    static int modInverse(int a, int m)\r\n    {\r\n      \r\n        for (int x = 1; x &lt; m; x++)\r\n            if (Math.floorMod((Math.floorMod(a, m)) * (Math.floorMod(x, m)), m) == 1)\r\n                return x;\r\n        return 1;\r\n    }\r\n}\r\n```\r\n\r\nFor example If we look at `a = 1`\r\n\r\nExpected output\r\n```\r\nesxlnxxceslj\r\ndrwkmwwbdrki\r\ncqvjlvvacqjh\r\nbpuikuuzbpig\r\naothjttyaohf\r\nznsgissxznge\r\nymrfhrrwymfd\r\nxlqegqqvxlec\r\nwkpdfppuwkdb\r\nvjoceootvjca\r\nuinbdnnsuibz\r\nthmacmmrthay\r\nsglzbllqsgzx\r\nrfkyakkprfyw\r\nqejxzjjoqexv\r\npdiwyiinpdwu\r\nochvxhhmocvt\r\nnbguwgglnbus\r\nmaftvffkmatr\r\nlzesueejlzsq\r\nkydrtddikyrp\r\njxcqscchjxqo\r\niwbprbbgiwpn\r\nhvaoqaafhvom\r\nguznpzzegunl\r\nftymoyxdftmk\r\n```\r\nActual Output\r\n```\r\na Value: 1\r\n\r\nesxlnxxceslj\r\ndrwkmwwbdrki\r\ncqvjlvvacqjh\r\nbpuikuuzbpig\r\naothjttzaohf\r\nznsgisszznge\r\nzmrfhrrzzmfd\r\nzlqegqqzzlec\r\nzkpdfppzzkdb\r\nzjoceoozzjca\r\nzinbdnnzzibz\r\nzhmacmmzzhaz\r\nzglzbllzzgzz\r\nzfkzakkzzfzz\r\nzejzzjjzzezz\r\nzdizziizzdzz\r\nzchzzhhzzczz\r\nzbgzzggzzbzz\r\nzafzzffzzazz\r\nzzezzeezzzzz\r\nzzdzzddzzzzz\r\nzzczzcczzzzz\r\nzzbzzbbzzzzz\r\nzzazzaazzzzz\r\nzzzzzzzzzzzz\r\nzzzzzzzzzzzz\r\n```\r\n","title":"Unexpected output from program that brute-forces affine ciphers","body":"<p>While writing a program to brute force affine ciphers, I stumbled upon some weird output.\nFor every a-value, the output seems to become overrun with a single letter as the b-value increases. It seems as if the result of the decryption equation can never go below -1 which it will need to in order for the program to work correctly but that is just a guess as to whats wrong.</p>\n<pre><code>a Value: 1\n\nesxlnxxceslj\ndrwkmwwbdrki\ncqvjlvvacqjh\nbpuikuuzbpig\naothjttzaohf\nznsgisszznge\nzmrfhrrzzmfd\nzlqegqqzzlec\nzkpdfppzzkdb\nzjoceoozzjca\nzinbdnnzzibz\nzhmacmmzzhaz\nzglzbllzzgzz\nzfkzakkzzfzz\nzejzzjjzzezz\nzdizziizzdzz\nzchzzhhzzczz\nzbgzzggzzbzz\nzafzzffzzazz\nzzezzeezzzzz\nzzdzzddzzzzz\nzzczzcczzzzz\nzzbzzbbzzzzz\nzzazzaazzzzz\nzzzzzzzzzzzz\nzzzzzzzzzzzz\n\na Value: 3\n\nkgzvnzzskgvd\nbxqmeqqjbxmu\nsohdvhhasodl\njfyumyyrjfuc\nawpldpprawlt\nrngcuggrrnck\nrextlxxrretb\nrvokcoorrvks\nrmfbtffrrmbj\nrdwskwwrrdsa\nrunjbnnrrujr\nrleaseerrlar\nrcvrjvvrrcrr\nrtmrammrrtrr\nrkdrrddrrkrr\nrburruurrbrr\nrslrrllrrsrr\nrjcrrccrrjrr\nratrrttrrarr\nrrkrrkkrrrrr\nrrbrrbbrrrrr\nrrsrrssrrrrr\nrrjrrjjrrrrr\nrrarraarrrrr\nrrrrrrrrrrrr\nrrrrrrrrrrrr\n\na Value: 5\n//and so on\n</code></pre>\n<p>In reality, only the first 5 or so lines for each a-value are correct. After that it seems to digress.</p>\n<pre><code>package Ciphers;\n\npublic class AffineBruteForce {\n    private static String alphabet = &quot;abcdefghijklmnopqrstuvwxyz&quot;;\n    \n    public static void decrypt(String str) {\n        str = str.toLowerCase();\n        int[] aValues = {1, 3, 5, 7, 9, 11, 15, 17, 19, 21, 23, 25};\n        StringBuilder insert = new StringBuilder();\n        \n        //i = a-value\n        for (int i = 0; i &lt; aValues.length; i++) { \n            System.out.println();\n            System.out.println(&quot;a Value: &quot; + aValues[i]);\n            System.out.println();\n            //j = b-value\n            for (int j = 0; j &lt; 25; j++) {      \n        \n                for (int k = 0; k &lt; str.length(); k++) {\n                    \n                    //Decryption equation, x = a^-1(yb) mod 26\n                    int num = Math.floorMod(MultiInverse.modInverse(aValues[i], 26) * (alphabet.indexOf((str.charAt(k)) - j)), 26); \n                    insert.append(alphabet.charAt(num));            \n                }\n                System.out.println(insert.toString());\n                insert.setLength(0);\n            }\n        }\n    }\n    \n    public static void main (String[]args) {\n        AffineBruteForce.decrypt(&quot;ESXLNXXCESLJ&quot;);\n    }\n}\n</code></pre>\n<pre><code>package Ciphers;\n\npublic class MultiInverse {\n    static int modInverse(int a, int m)\n    {\n      \n        for (int x = 1; x &lt; m; x++)\n            if (Math.floorMod((Math.floorMod(a, m)) * (Math.floorMod(x, m)), m) == 1)\n                return x;\n        return 1;\n    }\n}\n</code></pre>\n<p>For example If we look at <code>a = 1</code></p>\n<p>Expected output</p>\n<pre><code>esxlnxxceslj\ndrwkmwwbdrki\ncqvjlvvacqjh\nbpuikuuzbpig\naothjttyaohf\nznsgissxznge\nymrfhrrwymfd\nxlqegqqvxlec\nwkpdfppuwkdb\nvjoceootvjca\nuinbdnnsuibz\nthmacmmrthay\nsglzbllqsgzx\nrfkyakkprfyw\nqejxzjjoqexv\npdiwyiinpdwu\nochvxhhmocvt\nnbguwgglnbus\nmaftvffkmatr\nlzesueejlzsq\nkydrtddikyrp\njxcqscchjxqo\niwbprbbgiwpn\nhvaoqaafhvom\nguznpzzegunl\nftymoyxdftmk\n</code></pre>\n<p>Actual Output</p>\n<pre><code>a Value: 1\n\nesxlnxxceslj\ndrwkmwwbdrki\ncqvjlvvacqjh\nbpuikuuzbpig\naothjttzaohf\nznsgisszznge\nzmrfhrrzzmfd\nzlqegqqzzlec\nzkpdfppzzkdb\nzjoceoozzjca\nzinbdnnzzibz\nzhmacmmzzhaz\nzglzbllzzgzz\nzfkzakkzzfzz\nzejzzjjzzezz\nzdizziizzdzz\nzchzzhhzzczz\nzbgzzggzzbzz\nzafzzffzzazz\nzzezzeezzzzz\nzzdzzddzzzzz\nzzczzcczzzzz\nzzbzzbbzzzzz\nzzazzaazzzzz\nzzzzzzzzzzzz\nzzzzzzzzzzzz\n</code></pre>\n"},{"tags":["java","bukkit"],"answers":[{"tags":[],"owner":{"account_id":16101723,"reputation":78,"user_id":11622306,"display_name":"JustTalz"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1579397461,"creation_date":1579396528,"answer_id":59806328,"question_id":59806313,"body_markdown":"You can do what is called scheduling a repeating task, this example was pulled from the Bukkit forums.\r\n```\r\nBukkit.getScheduler().scheduleRepeatingTask(this, new Runnable() {\r\n    @Override\r\n    public void run() {\r\n        // The statement you want to run every 5 seconds.\r\n    }\r\n}, 0L, 100L); // 20 ticks = 1 second\r\n```\r\nSimply edit the comment in run with the statement you want to run and it should work fine.","title":"Repeating Task In Java","body":"<p>You can do what is called scheduling a repeating task, this example was pulled from the Bukkit forums.</p>\n\n<pre><code>Bukkit.getScheduler().scheduleRepeatingTask(this, new Runnable() {\n    @Override\n    public void run() {\n        // The statement you want to run every 5 seconds.\n    }\n}, 0L, 100L); // 20 ticks = 1 second\n</code></pre>\n\n<p>Simply edit the comment in run with the statement you want to run and it should work fine.</p>\n"},{"tags":[],"owner":{"account_id":5573654,"reputation":5164,"user_id":4417924,"display_name":"Jason"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1579399323,"creation_date":1579397514,"answer_id":59806401,"question_id":59806313,"body_markdown":"This can be done with a basic ExecutorService. You can create a ScheduledExecutorService which is an implementation of ExecutorService and then schedule a runnable which executes every 5 seconds. \r\n\r\n\r\n```java\r\n        ScheduledExecutorService service = Executors.newSingleThreadScheduledExecutor();\r\n        \r\n        service.scheduleAtFixedRate(() -&gt; {\r\n            //TODO do something here\r\n        }, 0, 5, TimeUnit.SECONDS);\r\n```","title":"Repeating Task In Java","body":"<p>This can be done with a basic ExecutorService. You can create a ScheduledExecutorService which is an implementation of ExecutorService and then schedule a runnable which executes every 5 seconds. </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>        ScheduledExecutorService service = Executors.newSingleThreadScheduledExecutor();\n\n        service.scheduleAtFixedRate(() -&gt; {\n            //TODO do something here\n        }, 0, 5, TimeUnit.SECONDS);\n</code></pre>\n"}],"owner":{"account_id":16616897,"reputation":49,"user_id":12008253,"display_name":"Cheap CPPS"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":697,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":59806328,"answer_count":2,"score":-1,"last_activity_date":1634426868,"creation_date":1579396252,"question_id":59806313,"body_markdown":"I need to repeat a task every 5 seconds in java, I&#39;m creating a minecraft bukkit / spigot Plugin, so doing it with Java or using the bukkit api would both work great.\r\n\r\nCode:\r\n\r\n```\r\npublic void onEnable(){\r\n\t\t\tgetLogger().info(&quot;TBC Enabled&quot;);\r\n\t\t\t\r\n\t\t\t//~~ the statement from here till the next note is what I want to happen every 5 seconds\r\n\t\t\t\r\n\t\t\tfor (Player player : Bukkit.getOnlinePlayers()) {\r\n\t    \t\tplayer.sendMessage(&quot;N/A&quot;);\r\n\t    \t}\r\n\t\t\t\r\n\t\t\t//~~ end of statement I want to repeat every 5 seconds\r\n\t\t\t\r\n\t\t\t}\r\n```\r\nThanks for the help!","title":"Repeating Task In Java","body":"<p>I need to repeat a task every 5 seconds in java, I'm creating a minecraft bukkit / spigot Plugin, so doing it with Java or using the bukkit api would both work great.</p>\n<p>Code:</p>\n<pre><code>public void onEnable(){\n            getLogger().info(&quot;TBC Enabled&quot;);\n            \n            //~~ the statement from here till the next note is what I want to happen every 5 seconds\n            \n            for (Player player : Bukkit.getOnlinePlayers()) {\n                player.sendMessage(&quot;N/A&quot;);\n            }\n            \n            //~~ end of statement I want to repeat every 5 seconds\n            \n            }\n</code></pre>\n<p>Thanks for the help!</p>\n"},{"tags":["java","android","android-studio","android-styles","darkmode"],"comments":[{"owner":{"account_id":16582962,"reputation":3261,"user_id":11983124,"display_name":"Praveen"},"score":0,"creation_date":1634397271,"post_id":69595317,"comment_id":123015779,"body_markdown":"Are you testing on android 10 or higher?","body":"Are you testing on android 10 or higher?"}],"answers":[{"tags":[],"owner":{"account_id":17066236,"reputation":167,"user_id":12348326,"display_name":"BroscR"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634385617,"creation_date":1634385617,"answer_id":69595388,"question_id":69595317,"body_markdown":"You can save the light or dark mode locally and check it while the app is opening, and you can fix the mode accordingly.\r\n\r\n        public class MainApp extends Application {\r\n        \r\n            @Override\r\n            public void onCreate() {\r\n                super.onCreate();\r\n        \r\n    //https://developer.android.com/training/data-storage/shared-preferences\r\n                boolean isNightMode = new MySharedPref(this).isDarkMode(); //sharedpreferences...\r\n        \r\n                if (isNightMode) {\r\n                    AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_YES);\r\n                } else {\r\n                    AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_NO);\r\n                }\r\n            }\r\n        }","title":"Device theme mode does block app theme mode. Android Studio Java","body":"<p>You can save the light or dark mode locally and check it while the app is opening, and you can fix the mode accordingly.</p>\n<pre><code>    public class MainApp extends Application {\n    \n        @Override\n        public void onCreate() {\n            super.onCreate();\n    \n//https://developer.android.com/training/data-storage/shared-preferences\n            boolean isNightMode = new MySharedPref(this).isDarkMode(); //sharedpreferences...\n    \n            if (isNightMode) {\n                AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_YES);\n            } else {\n                AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_NO);\n            }\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":263656,"reputation":1,"user_id":549372,"accept_rate":100,"display_name":"Martin Zeitler"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634426734,"creation_date":1634426734,"answer_id":69600267,"question_id":69595317,"body_markdown":"`Theme.MaterialComponents.DayNight.NoActionBar` is all you need ...\r\n\r\nin combination with `values/styles.xml` and `values-night/styles.xml`.\r\n\r\n","title":"Device theme mode does block app theme mode. Android Studio Java","body":"<p><code>Theme.MaterialComponents.DayNight.NoActionBar</code> is all you need ...</p>\n<p>in combination with <code>values/styles.xml</code> and <code>values-night/styles.xml</code>.</p>\n"}],"owner":{"account_id":17582527,"reputation":71,"user_id":12756021,"display_name":"Oleh Prukhnytskyi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":194,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1634426734,"creation_date":1634385073,"question_id":69595317,"body_markdown":"I started to implement Night/Light mode inside my android app by using [this tutorial](https://www.youtube.com/watch?v=OYJ1WwwnvCo&amp;list=PLhbb5rsrqfXhuDi19o8ZmMlvl7HWXsPua&amp;index=1&amp;ab_channel=ARSLTech).\r\n\r\nBut devices has this function by system. The problem is that the system night mode does block my code in app. How does this happen??\r\n\r\n - If device mode is dark, but in the app, the background is white, it doesn&#39;t work. (background is dark)\r\n - If device mode is in light mode, but in the app, the status bar background is black, it doesn&#39;t work. (status bar is white)\r\n\r\n\r\nHow to resolve that? Thanks.\r\n\r\n----------\r\n**DayNight:**\r\n```\r\n&lt;resources&gt;\r\n    &lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.MaterialComponents.DayNight.NoActionBar&quot;&gt;\r\n        &lt;item name=&quot;bottomSheetDialogTheme&quot;&gt;@style/AppBottomSheetDialogTheme&lt;/item&gt;\r\n        &lt;item name=&quot;colorPrimary&quot;&gt;@color/colorBlack&lt;/item&gt;\r\n        &lt;item name=&quot;colorPrimaryDark&quot;&gt;@color/colorBlack&lt;/item&gt;\r\n        &lt;item name=&quot;colorAccent&quot;&gt;@color/colorGrey&lt;/item&gt;\r\n    &lt;/style&gt;\r\n    &lt;style name=&quot;AppBottomSheetDialogTheme&quot;\r\n        parent=&quot;Theme.Design.Light.BottomSheetDialog&quot;&gt;\r\n        &lt;item name=&quot;bottomSheetStyle&quot;&gt;@style/AppModalStyle&lt;/item&gt;\r\n    &lt;/style&gt;\r\n    &lt;style name=&quot;AppModalStyle&quot;\r\n        parent=&quot;Widget.Design.BottomSheet.Modal&quot;&gt;\r\n        &lt;item name=&quot;android:background&quot;&gt;@drawable/background_curved&lt;/item&gt;\r\n    &lt;/style&gt;\r\n\r\n    &lt;style name=&quot;AppTheme1&quot; parent=&quot;Theme.MaterialComponents.DayNight.NoActionBar&quot;&gt;\r\n        &lt;item name=&quot;colorPrimary&quot;&gt;@color/colorWhite&lt;/item&gt;\r\n        &lt;item name=&quot;colorPrimaryDark&quot;&gt;@color/colorWhite&lt;/item&gt;\r\n        &lt;item name=&quot;android:buttonTint&quot;&gt;@color/colorWhite&lt;/item&gt;\r\n    &lt;/style&gt;\r\n&lt;/resources&gt;\r\n```\r\n```\r\n&lt;resources&gt;\r\n    &lt;color name=&quot;colorPrimary&quot;&gt;#fff&lt;/color&gt;\r\n    &lt;color name=&quot;colorPrimaryDark&quot;&gt;#fff&lt;/color&gt;\r\n    &lt;color name=&quot;colorAccent&quot;&gt;#fff&lt;/color&gt;\r\n    &lt;color name=&quot;colorBlack&quot;&gt;#fff&lt;/color&gt;\r\n    &lt;color name=&quot;colorWhite&quot;&gt;#000&lt;/color&gt;\r\n    &lt;color name=&quot;colorGrey&quot;&gt;#808080&lt;/color&gt;\r\n\r\n    &lt;color name=&quot;colorBackground&quot;&gt;#1A1A1A&lt;/color&gt;\r\n    &lt;color name=&quot;colorBottomMenu&quot;&gt;#000&lt;/color&gt;\r\n&lt;/resources&gt;\r\n```\r\n----------\r\n**Light:**\r\n```\r\n&lt;resources&gt;\r\n    &lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.MaterialComponents.Light.NoActionBar&quot;&gt;\r\n        &lt;item name=&quot;bottomSheetDialogTheme&quot;&gt;@style/AppBottomSheetDialogTheme&lt;/item&gt;\r\n        &lt;item name=&quot;colorPrimary&quot;&gt;@color/colorBlack&lt;/item&gt;\r\n        &lt;item name=&quot;colorPrimaryDark&quot;&gt;@color/colorBlack&lt;/item&gt;\r\n        &lt;item name=&quot;colorAccent&quot;&gt;@color/colorGrey&lt;/item&gt;\r\n    &lt;/style&gt;\r\n    &lt;style name=&quot;AppBottomSheetDialogTheme&quot;\r\n        parent=&quot;Theme.Design.Light.BottomSheetDialog&quot;&gt;\r\n        &lt;item name=&quot;bottomSheetStyle&quot;&gt;@style/AppModalStyle&lt;/item&gt;\r\n    &lt;/style&gt;\r\n    &lt;style name=&quot;AppModalStyle&quot;\r\n        parent=&quot;Widget.Design.BottomSheet.Modal&quot;&gt;\r\n        &lt;item name=&quot;android:background&quot;&gt;@drawable/background_curved&lt;/item&gt;\r\n    &lt;/style&gt;\r\n\r\n    &lt;style name=&quot;AppTheme1&quot; parent=&quot;Theme.MaterialComponents.DayNight.NoActionBar&quot;&gt;\r\n        &lt;item name=&quot;colorPrimary&quot;&gt;@color/colorWhite&lt;/item&gt;\r\n        &lt;item name=&quot;colorPrimaryDark&quot;&gt;@color/colorWhite&lt;/item&gt;\r\n        &lt;item name=&quot;android:buttonTint&quot;&gt;@color/colorWhite&lt;/item&gt;\r\n    &lt;/style&gt;\r\n&lt;/resources&gt;\r\n```\r\n```\r\n&lt;resources&gt;\r\n    &lt;color name=&quot;colorPrimary&quot;&gt;#000&lt;/color&gt;\r\n    &lt;color name=&quot;colorPrimaryDark&quot;&gt;#000&lt;/color&gt;\r\n    &lt;color name=&quot;colorAccent&quot;&gt;#000&lt;/color&gt;\r\n    &lt;color name=&quot;colorBlack&quot;&gt;#000&lt;/color&gt;\r\n    &lt;color name=&quot;colorWhite&quot;&gt;#fff&lt;/color&gt;\r\n    &lt;color name=&quot;colorGrey&quot;&gt;#808080&lt;/color&gt;\r\n\r\n    &lt;color name=&quot;colorBackground&quot;&gt;#fff&lt;/color&gt;\r\n    &lt;color name=&quot;colorBottomMenu&quot;&gt;#fff&lt;/color&gt;\r\n&lt;/resources&gt;\r\n\r\n```","title":"Device theme mode does block app theme mode. Android Studio Java","body":"<p>I started to implement Night/Light mode inside my android app by using <a href=\"https://www.youtube.com/watch?v=OYJ1WwwnvCo&amp;list=PLhbb5rsrqfXhuDi19o8ZmMlvl7HWXsPua&amp;index=1&amp;ab_channel=ARSLTech\" rel=\"nofollow noreferrer\">this tutorial</a>.</p>\n<p>But devices has this function by system. The problem is that the system night mode does block my code in app. How does this happen??</p>\n<ul>\n<li>If device mode is dark, but in the app, the background is white, it doesn't work. (background is dark)</li>\n<li>If device mode is in light mode, but in the app, the status bar background is black, it doesn't work. (status bar is white)</li>\n</ul>\n<p>How to resolve that? Thanks.</p>\n<hr />\n<p><strong>DayNight:</strong></p>\n<pre><code>&lt;resources&gt;\n    &lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.MaterialComponents.DayNight.NoActionBar&quot;&gt;\n        &lt;item name=&quot;bottomSheetDialogTheme&quot;&gt;@style/AppBottomSheetDialogTheme&lt;/item&gt;\n        &lt;item name=&quot;colorPrimary&quot;&gt;@color/colorBlack&lt;/item&gt;\n        &lt;item name=&quot;colorPrimaryDark&quot;&gt;@color/colorBlack&lt;/item&gt;\n        &lt;item name=&quot;colorAccent&quot;&gt;@color/colorGrey&lt;/item&gt;\n    &lt;/style&gt;\n    &lt;style name=&quot;AppBottomSheetDialogTheme&quot;\n        parent=&quot;Theme.Design.Light.BottomSheetDialog&quot;&gt;\n        &lt;item name=&quot;bottomSheetStyle&quot;&gt;@style/AppModalStyle&lt;/item&gt;\n    &lt;/style&gt;\n    &lt;style name=&quot;AppModalStyle&quot;\n        parent=&quot;Widget.Design.BottomSheet.Modal&quot;&gt;\n        &lt;item name=&quot;android:background&quot;&gt;@drawable/background_curved&lt;/item&gt;\n    &lt;/style&gt;\n\n    &lt;style name=&quot;AppTheme1&quot; parent=&quot;Theme.MaterialComponents.DayNight.NoActionBar&quot;&gt;\n        &lt;item name=&quot;colorPrimary&quot;&gt;@color/colorWhite&lt;/item&gt;\n        &lt;item name=&quot;colorPrimaryDark&quot;&gt;@color/colorWhite&lt;/item&gt;\n        &lt;item name=&quot;android:buttonTint&quot;&gt;@color/colorWhite&lt;/item&gt;\n    &lt;/style&gt;\n&lt;/resources&gt;\n</code></pre>\n<pre><code>&lt;resources&gt;\n    &lt;color name=&quot;colorPrimary&quot;&gt;#fff&lt;/color&gt;\n    &lt;color name=&quot;colorPrimaryDark&quot;&gt;#fff&lt;/color&gt;\n    &lt;color name=&quot;colorAccent&quot;&gt;#fff&lt;/color&gt;\n    &lt;color name=&quot;colorBlack&quot;&gt;#fff&lt;/color&gt;\n    &lt;color name=&quot;colorWhite&quot;&gt;#000&lt;/color&gt;\n    &lt;color name=&quot;colorGrey&quot;&gt;#808080&lt;/color&gt;\n\n    &lt;color name=&quot;colorBackground&quot;&gt;#1A1A1A&lt;/color&gt;\n    &lt;color name=&quot;colorBottomMenu&quot;&gt;#000&lt;/color&gt;\n&lt;/resources&gt;\n</code></pre>\n<hr />\n<p><strong>Light:</strong></p>\n<pre><code>&lt;resources&gt;\n    &lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.MaterialComponents.Light.NoActionBar&quot;&gt;\n        &lt;item name=&quot;bottomSheetDialogTheme&quot;&gt;@style/AppBottomSheetDialogTheme&lt;/item&gt;\n        &lt;item name=&quot;colorPrimary&quot;&gt;@color/colorBlack&lt;/item&gt;\n        &lt;item name=&quot;colorPrimaryDark&quot;&gt;@color/colorBlack&lt;/item&gt;\n        &lt;item name=&quot;colorAccent&quot;&gt;@color/colorGrey&lt;/item&gt;\n    &lt;/style&gt;\n    &lt;style name=&quot;AppBottomSheetDialogTheme&quot;\n        parent=&quot;Theme.Design.Light.BottomSheetDialog&quot;&gt;\n        &lt;item name=&quot;bottomSheetStyle&quot;&gt;@style/AppModalStyle&lt;/item&gt;\n    &lt;/style&gt;\n    &lt;style name=&quot;AppModalStyle&quot;\n        parent=&quot;Widget.Design.BottomSheet.Modal&quot;&gt;\n        &lt;item name=&quot;android:background&quot;&gt;@drawable/background_curved&lt;/item&gt;\n    &lt;/style&gt;\n\n    &lt;style name=&quot;AppTheme1&quot; parent=&quot;Theme.MaterialComponents.DayNight.NoActionBar&quot;&gt;\n        &lt;item name=&quot;colorPrimary&quot;&gt;@color/colorWhite&lt;/item&gt;\n        &lt;item name=&quot;colorPrimaryDark&quot;&gt;@color/colorWhite&lt;/item&gt;\n        &lt;item name=&quot;android:buttonTint&quot;&gt;@color/colorWhite&lt;/item&gt;\n    &lt;/style&gt;\n&lt;/resources&gt;\n</code></pre>\n<pre><code>&lt;resources&gt;\n    &lt;color name=&quot;colorPrimary&quot;&gt;#000&lt;/color&gt;\n    &lt;color name=&quot;colorPrimaryDark&quot;&gt;#000&lt;/color&gt;\n    &lt;color name=&quot;colorAccent&quot;&gt;#000&lt;/color&gt;\n    &lt;color name=&quot;colorBlack&quot;&gt;#000&lt;/color&gt;\n    &lt;color name=&quot;colorWhite&quot;&gt;#fff&lt;/color&gt;\n    &lt;color name=&quot;colorGrey&quot;&gt;#808080&lt;/color&gt;\n\n    &lt;color name=&quot;colorBackground&quot;&gt;#fff&lt;/color&gt;\n    &lt;color name=&quot;colorBottomMenu&quot;&gt;#fff&lt;/color&gt;\n&lt;/resources&gt;\n\n</code></pre>\n"},{"tags":["java","akka","akka-stream"],"answers":[{"tags":[],"owner":{"account_id":5994994,"reputation":19189,"user_id":5641244,"display_name":"Levi Ramsey"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1634426519,"creation_date":1634426519,"answer_id":69600248,"question_id":69599257,"body_markdown":"`Flow.fold` does not emit a value until the upstream completes.\r\n\r\nAlso note that your `groupedFlow` is an identity flow: it could be removed without changing anything:\r\n\r\n* `grouped` takes each successive pair of elements and bundles them into a `List`\r\n* The `map` stage converts that `List` to an `ArrayList`\r\n* `mapConcat` unwraps the `ArrayList` and emits the elements\r\n\r\nThe clearest expression of what you&#39;re looking for (a stream of the sum of pairs of successive groups of 2) in Java is probably along the lines of\r\n\r\n```java\r\nactorRefSourcePair.second()\r\n    .grouped(2)\r\n    .map(twoList -&gt; twoList.stream().reduce(0, Integer::sum))\r\n    .runWith(Sink.foreach(System.out::println), actorSystem);\r\n```","title":"fold not working as expected using akka streams","body":"<p><code>Flow.fold</code> does not emit a value until the upstream completes.</p>\n<p>Also note that your <code>groupedFlow</code> is an identity flow: it could be removed without changing anything:</p>\n<ul>\n<li><code>grouped</code> takes each successive pair of elements and bundles them into a <code>List</code></li>\n<li>The <code>map</code> stage converts that <code>List</code> to an <code>ArrayList</code></li>\n<li><code>mapConcat</code> unwraps the <code>ArrayList</code> and emits the elements</li>\n</ul>\n<p>The clearest expression of what you're looking for (a stream of the sum of pairs of successive groups of 2) in Java is probably along the lines of</p>\n<pre class=\"lang-java prettyprint-override\"><code>actorRefSourcePair.second()\n    .grouped(2)\n    .map(twoList -&gt; twoList.stream().reduce(0, Integer::sum))\n    .runWith(Sink.foreach(System.out::println), actorSystem);\n</code></pre>\n"}],"owner":{"account_id":215504,"reputation":52472,"user_id":470184,"accept_rate":91,"display_name":"blue-sky"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":169,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69600248,"answer_count":1,"score":0,"last_activity_date":1634426519,"creation_date":1634415524,"question_id":69599257,"body_markdown":"Below is code I&#39;ve written to try an output the sum of each akka message received which has been edited from this guide : \r\n\r\nhttps://doc.akka.io/docs/akka/current/stream/stream-flows-and-basics.html \r\n\r\n    import akka.Done;\r\n    import akka.NotUsed;\r\n    import akka.actor.ActorRef;\r\n    import akka.actor.typed.ActorSystem;\r\n    import akka.actor.typed.javadsl.Behaviors;\r\n    import akka.japi.Pair;\r\n    import akka.stream.CompletionStrategy;\r\n    import akka.stream.OverflowStrategy;\r\n    import akka.stream.javadsl.Flow;\r\n    import akka.stream.javadsl.Sink;\r\n    import akka.stream.javadsl.Source;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    import java.util.Optional;\r\n    \r\n    public class AkkaSourceTesting {\r\n    \r\n        public static void main(String args[]){\r\n    \r\n            ActorSystem actorSystem = ActorSystem.create(Behaviors.empty() , &quot;actorSystem&quot;);\r\n    \r\n            Source&lt;Integer, ActorRef&gt; matValuePoweredSource =\r\n                    Source.actorRef(\r\n                            elem -&gt; {\r\n                                // complete stream immediately if we send it Done\r\n                                if (elem == Done.done()) return Optional.of(CompletionStrategy.immediately());\r\n                                else return Optional.empty();\r\n                            },\r\n                            // never fail the stream because of a message\r\n                            elem -&gt; Optional.empty(),\r\n                            100,\r\n                            OverflowStrategy.fail());\r\n    \r\n            Pair&lt;ActorRef, Source&lt;Integer, NotUsed&gt;&gt; actorRefSourcePair =\r\n                    matValuePoweredSource.preMaterialize(actorSystem);\r\n    \r\n            actorRefSourcePair.first().tell(1, ActorRef.noSender());\r\n            actorRefSourcePair.first().tell(1, ActorRef.noSender());\r\n            actorRefSourcePair.first().tell(1, ActorRef.noSender());\r\n    \r\n            Flow&lt;Integer, Integer, NotUsed&gt; groupedFlow = Flow.of(Integer.class)\r\n                    .grouped(2)\r\n                    .map(value -&gt; {\r\n                        List&lt;Integer&gt; newList = new ArrayList&lt;&gt;(value);\r\n                        return newList;\r\n                    })\r\n                    .mapConcat(value -&gt; value);\r\n    \r\n            // pass source around for materialization\r\n            actorRefSourcePair.second().via(Flow.of(Integer.class).via(groupedFlow).fold(0, (res, element) -&gt; res + element)).runWith(Sink.foreach(System.out::println), actorSystem);\r\n    \r\n        }\r\n    }\r\n\r\nThe fold operation seems to cause nothing to outputted on the console. \r\n\r\nHowever if I use \r\n\r\n    actorRefSourcePair.second().via(Flow.of(Integer.class).via(groupedFlow).map(x -&gt; x * 2)).runWith(Sink.foreach(System.out::println), actorSystem);\r\n\r\ninstead of\r\n\r\n    actorRefSourcePair.second().via(Flow.of(Integer.class).via(groupedFlow).fold(0, (res, element) -&gt; res + element)).runWith(Sink.foreach(System.out::println), actorSystem);\r\n        \r\nThen the following is outputted : \r\n\r\n    2\r\n    2\r\n\r\nI&#39;m attempting to group a list and perform a fold operation on each of the groups but the fold is not even being executed. Have I missed a step ?\r\n\r\n","title":"fold not working as expected using akka streams","body":"<p>Below is code I've written to try an output the sum of each akka message received which has been edited from this guide :</p>\n<p><a href=\"https://doc.akka.io/docs/akka/current/stream/stream-flows-and-basics.html\" rel=\"nofollow noreferrer\">https://doc.akka.io/docs/akka/current/stream/stream-flows-and-basics.html</a></p>\n<pre><code>import akka.Done;\nimport akka.NotUsed;\nimport akka.actor.ActorRef;\nimport akka.actor.typed.ActorSystem;\nimport akka.actor.typed.javadsl.Behaviors;\nimport akka.japi.Pair;\nimport akka.stream.CompletionStrategy;\nimport akka.stream.OverflowStrategy;\nimport akka.stream.javadsl.Flow;\nimport akka.stream.javadsl.Sink;\nimport akka.stream.javadsl.Source;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.Optional;\n\npublic class AkkaSourceTesting {\n\n    public static void main(String args[]){\n\n        ActorSystem actorSystem = ActorSystem.create(Behaviors.empty() , &quot;actorSystem&quot;);\n\n        Source&lt;Integer, ActorRef&gt; matValuePoweredSource =\n                Source.actorRef(\n                        elem -&gt; {\n                            // complete stream immediately if we send it Done\n                            if (elem == Done.done()) return Optional.of(CompletionStrategy.immediately());\n                            else return Optional.empty();\n                        },\n                        // never fail the stream because of a message\n                        elem -&gt; Optional.empty(),\n                        100,\n                        OverflowStrategy.fail());\n\n        Pair&lt;ActorRef, Source&lt;Integer, NotUsed&gt;&gt; actorRefSourcePair =\n                matValuePoweredSource.preMaterialize(actorSystem);\n\n        actorRefSourcePair.first().tell(1, ActorRef.noSender());\n        actorRefSourcePair.first().tell(1, ActorRef.noSender());\n        actorRefSourcePair.first().tell(1, ActorRef.noSender());\n\n        Flow&lt;Integer, Integer, NotUsed&gt; groupedFlow = Flow.of(Integer.class)\n                .grouped(2)\n                .map(value -&gt; {\n                    List&lt;Integer&gt; newList = new ArrayList&lt;&gt;(value);\n                    return newList;\n                })\n                .mapConcat(value -&gt; value);\n\n        // pass source around for materialization\n        actorRefSourcePair.second().via(Flow.of(Integer.class).via(groupedFlow).fold(0, (res, element) -&gt; res + element)).runWith(Sink.foreach(System.out::println), actorSystem);\n\n    }\n}\n</code></pre>\n<p>The fold operation seems to cause nothing to outputted on the console.</p>\n<p>However if I use</p>\n<pre><code>actorRefSourcePair.second().via(Flow.of(Integer.class).via(groupedFlow).map(x -&gt; x * 2)).runWith(Sink.foreach(System.out::println), actorSystem);\n</code></pre>\n<p>instead of</p>\n<pre><code>actorRefSourcePair.second().via(Flow.of(Integer.class).via(groupedFlow).fold(0, (res, element) -&gt; res + element)).runWith(Sink.foreach(System.out::println), actorSystem);\n    \n</code></pre>\n<p>Then the following is outputted :</p>\n<pre><code>2\n2\n</code></pre>\n<p>I'm attempting to group a list and perform a fold operation on each of the groups but the fold is not even being executed. Have I missed a step ?</p>\n"},{"tags":["java","spring","hibernate","spring-mvc","tomcat"],"comments":[{"owner":{"account_id":4670717,"reputation":813,"user_id":3782567,"accept_rate":30,"display_name":"Shilan"},"score":0,"creation_date":1550234627,"post_id":38465173,"comment_id":96204564,"body_markdown":"it is just that the version on your spring doesn&#39;t comply with your hibernate version.","body":"it is just that the version on your spring doesn&#39;t comply with your hibernate version."}],"answers":[{"tags":[],"owner":{"account_id":2870160,"reputation":3949,"user_id":2463695,"accept_rate":81,"display_name":"Quy Tang"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1468951028,"creation_date":1468951028,"answer_id":38465424,"question_id":38465173,"body_markdown":"I guess that you are wrong when you declare the package of the entities:\r\n\r\nIf your package is com.mpakhomov.*, you should replace\r\n\r\n    &lt;list&gt;\r\n        &lt;value type=&quot;java.lang.Class&quot;&gt;main.com.mpakhomov.chat.domain.User&lt;/value&gt;\r\n        &lt;value type=&quot;java.lang.Class&quot;&gt;main.com.mpakhomov.chat.domain.ChatMessage&lt;/value&gt;\r\n    &lt;/list&gt;\r\n\r\nwith\r\n\r\n    &lt;list&gt;\r\n        &lt;value type=&quot;java.lang.Class&quot;&gt;com.mpakhomov.chat.domain.User&lt;/value&gt;\r\n        &lt;value type=&quot;java.lang.Class&quot;&gt;com.mpakhomov.chat.domain.ChatMessage&lt;/value&gt;\r\n    &lt;/list&gt;\r\n\r\n","title":"org.springframework.beans.TypeMismatchException: Failed to convert value &#39;java.lang.String&#39; to &#39;java.lang.Class&#39; spring","body":"<p>I guess that you are wrong when you declare the package of the entities:</p>\n\n<p>If your package is com.mpakhomov.*, you should replace</p>\n\n<pre><code>&lt;list&gt;\n    &lt;value type=\"java.lang.Class\"&gt;main.com.mpakhomov.chat.domain.User&lt;/value&gt;\n    &lt;value type=\"java.lang.Class\"&gt;main.com.mpakhomov.chat.domain.ChatMessage&lt;/value&gt;\n&lt;/list&gt;\n</code></pre>\n\n<p>with</p>\n\n<pre><code>&lt;list&gt;\n    &lt;value type=\"java.lang.Class\"&gt;com.mpakhomov.chat.domain.User&lt;/value&gt;\n    &lt;value type=\"java.lang.Class\"&gt;com.mpakhomov.chat.domain.ChatMessage&lt;/value&gt;\n&lt;/list&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2999693,"reputation":933,"user_id":2545398,"display_name":"Aditya"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1468954115,"creation_date":1468953743,"answer_id":38466199,"question_id":38465173,"body_markdown":"I think you needn&#39;t specify the type attribute for the value tag. My guess is that the value tag is expecting a type String and you are trying to convert to `java.lang.class` and it is causing an IllegalArgumentException. So the argument type is wrong here. You can see the error in the following line.\r\n\r\n    Caused by: org.springframework.beans.TypeMismatchException: Failed to convert value of type &#39;java.lang.String&#39; to required type &#39;java.lang.Class&#39;; nested exception is java.lang.IllegalArgumentException\r\n\r\nTry removing the type attribute as follows\r\n\r\n    &lt;list&gt;\r\n        &lt;value&gt;main.com.mpakhomov.chat.domain.User&lt;/value&gt;\r\n        &lt;value&gt;main.com.mpakhomov.chat.domain.ChatMessage&lt;/value&gt;\r\n    &lt;/list&gt;\r\n\r\n\r\n Also take a look into spring documentation [here][1]. They are not passing any type attribute with the value tag. The following is the example they used in the documentation.\r\n\r\n \r\n\r\n    &lt;bean id=&quot;sessionFactory&quot; class=&quot;org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean&quot;&gt;\r\n       &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;/&gt;\r\n       &lt;property name=&quot;annotatedClasses&quot;&gt;\r\n         &lt;list&gt;\r\n           &lt;value&gt;test.package.Foo&lt;/value&gt;\r\n           &lt;value&gt;test.package.Bar&lt;/value&gt;\r\n         &lt;/list&gt;\r\n       &lt;/property&gt;\r\n     &lt;/bean&gt;\r\n\r\n\r\n  [1]: http://docs.spring.io/spring-framework/docs/3.2.0.M2/api/org/springframework/orm/hibernate3/annotation/AnnotationSessionFactoryBean.html","title":"org.springframework.beans.TypeMismatchException: Failed to convert value &#39;java.lang.String&#39; to &#39;java.lang.Class&#39; spring","body":"<p>I think you needn't specify the type attribute for the value tag. My guess is that the value tag is expecting a type String and you are trying to convert to <code>java.lang.class</code> and it is causing an IllegalArgumentException. So the argument type is wrong here. You can see the error in the following line.</p>\n\n<pre><code>Caused by: org.springframework.beans.TypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'java.lang.Class'; nested exception is java.lang.IllegalArgumentException\n</code></pre>\n\n<p>Try removing the type attribute as follows</p>\n\n<pre><code>&lt;list&gt;\n    &lt;value&gt;main.com.mpakhomov.chat.domain.User&lt;/value&gt;\n    &lt;value&gt;main.com.mpakhomov.chat.domain.ChatMessage&lt;/value&gt;\n&lt;/list&gt;\n</code></pre>\n\n<p>Also take a look into spring documentation <a href=\"http://docs.spring.io/spring-framework/docs/3.2.0.M2/api/org/springframework/orm/hibernate3/annotation/AnnotationSessionFactoryBean.html\" rel=\"nofollow\">here</a>. They are not passing any type attribute with the value tag. The following is the example they used in the documentation.</p>\n\n<pre><code>&lt;bean id=\"sessionFactory\" class=\"org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean\"&gt;\n   &lt;property name=\"dataSource\" ref=\"dataSource\"/&gt;\n   &lt;property name=\"annotatedClasses\"&gt;\n     &lt;list&gt;\n       &lt;value&gt;test.package.Foo&lt;/value&gt;\n       &lt;value&gt;test.package.Bar&lt;/value&gt;\n     &lt;/list&gt;\n   &lt;/property&gt;\n &lt;/bean&gt;\n</code></pre>\n"}],"owner":{"account_id":6819034,"reputation":2289,"user_id":5246735,"accept_rate":49,"display_name":"Blaze"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9465,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1634425876,"creation_date":1468950202,"question_id":38465173,"body_markdown":"I dont know why  spring is giving me this error when I launch my application. I have defined the java class in the package and calling it in the xml file through bean injection.\r\n\r\nThis is the bean injection\r\n\r\n\r\n   \r\n\r\n     &lt;bean id=&quot;sessionFactory&quot;\r\n              class=&quot;org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean&quot;&gt;\r\n            &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot; /&gt;\r\n            &lt;property name=&quot;annotatedClasses&quot;&gt;\r\n                &lt;list&gt;\r\n                    &lt;value type=&quot;java.lang.Class&quot;&gt;main.com.mpakhomov.chat.domain.User&lt;/value&gt;\r\n                    &lt;value type=&quot;java.lang.Class&quot;&gt;main.com.mpakhomov.chat.domain.ChatMessage&lt;/value&gt;\r\n                &lt;/list&gt;\r\n            &lt;/property&gt;\r\n            &lt;property name=&quot;hibernateProperties&quot;&gt;\r\n                &lt;props&gt;\r\n                    &lt;prop key=&quot;hibernate.dialect&quot;&gt;${hibernate.dialect}&lt;/prop&gt;\r\n                    &lt;prop key=&quot;hibernate.show_sql&quot;&gt;${hibernate.show_sql}&lt;/prop&gt;\r\n                    &lt;prop key=&quot;hibernate.hbm2ddl.auto&quot;&gt;${hibernate.hbm2ddl.auto}&lt;/prop&gt;\r\n                    &lt;prop key=&quot;hibernate.connection.pool_size&quot;&gt;${hibernate.connection.pool_size}&lt;/prop&gt;\r\n                &lt;/props&gt;\r\n            &lt;/property&gt;\r\n        &lt;/bean&gt;\r\n\r\n\r\nthis is the complete stacktrace of the error that am i having when I try to launch my application.\r\n\r\n    Caused by: org.springframework.beans.TypeMismatchException: Failed to convert value of type &#39;java.lang.String&#39; to required type &#39;java.lang.Class&#39;; nested exception is java.lang.IllegalArgumentException: Cannot find class [main.com.mpakhomov.chat.domain.User]\r\n    \tat org.springframework.beans.TypeConverterSupport.doConvert(TypeConverterSupport.java:74)\r\n    \tat org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:39)\r\n    \tat org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:187)\t\r\n\r\nAssuming the class is defined in the package, please what could be wrong when I launch my application?\r\n    ","title":"org.springframework.beans.TypeMismatchException: Failed to convert value &#39;java.lang.String&#39; to &#39;java.lang.Class&#39; spring","body":"<p>I dont know why  spring is giving me this error when I launch my application. I have defined the java class in the package and calling it in the xml file through bean injection.</p>\n\n<p>This is the bean injection</p>\n\n<pre><code> &lt;bean id=\"sessionFactory\"\n          class=\"org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean\"&gt;\n        &lt;property name=\"dataSource\" ref=\"dataSource\" /&gt;\n        &lt;property name=\"annotatedClasses\"&gt;\n            &lt;list&gt;\n                &lt;value type=\"java.lang.Class\"&gt;main.com.mpakhomov.chat.domain.User&lt;/value&gt;\n                &lt;value type=\"java.lang.Class\"&gt;main.com.mpakhomov.chat.domain.ChatMessage&lt;/value&gt;\n            &lt;/list&gt;\n        &lt;/property&gt;\n        &lt;property name=\"hibernateProperties\"&gt;\n            &lt;props&gt;\n                &lt;prop key=\"hibernate.dialect\"&gt;${hibernate.dialect}&lt;/prop&gt;\n                &lt;prop key=\"hibernate.show_sql\"&gt;${hibernate.show_sql}&lt;/prop&gt;\n                &lt;prop key=\"hibernate.hbm2ddl.auto\"&gt;${hibernate.hbm2ddl.auto}&lt;/prop&gt;\n                &lt;prop key=\"hibernate.connection.pool_size\"&gt;${hibernate.connection.pool_size}&lt;/prop&gt;\n            &lt;/props&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n</code></pre>\n\n<p>this is the complete stacktrace of the error that am i having when I try to launch my application.</p>\n\n<pre><code>Caused by: org.springframework.beans.TypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'java.lang.Class'; nested exception is java.lang.IllegalArgumentException: Cannot find class [main.com.mpakhomov.chat.domain.User]\n    at org.springframework.beans.TypeConverterSupport.doConvert(TypeConverterSupport.java:74)\n    at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:39)\n    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:187)  \n</code></pre>\n\n<p>Assuming the class is defined in the package, please what could be wrong when I launch my application?</p>\n"},{"tags":["java","spring","spring-boot","keycloak"],"owner":{"account_id":4308727,"reputation":503,"user_id":3520444,"display_name":"Nouran S. Ahmad"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1128,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1634425473,"creation_date":1597166854,"question_id":63363395,"body_markdown":"Im using keycloak spring boot adapter version 10.0.2 and I am trying to get the username using the authentication token, for that I created a web filter and trying to get the Principal but although the user is authenticated I only get Anonymous user like this:\r\n\r\n```\r\norg.springframework.security.authentication.AnonymousAuthenticationToken@81a4f960: \r\nPrincipal: anonymousUser; \r\nCredentials: [PROTECTED]; Authenticated: true; \r\nDetails: org.springframework.security.web.authentication.WebAuthenticationDetails@0: \r\nRemoteIpAddress: 10.128.15.244; \r\nSessionId: 6F41901438BFC9AD6FEEB34A3A6926EB; \r\nGranted \r\nAuthorities: ROLE_ANONYMOUS\r\n```\r\nI have the following application.yaml\r\n```\r\ncheques.paging.size: 10\r\nspring.jpa.hibernate.ddl-auto: none\r\nspring.jpa.hibernate.use-new-id-generator-mappings: FALSE\r\nspring.datasource.url: &quot;jdbc:oracle:thin:@${db_host}:${db_port}/${db_instance}&quot;\r\nspring.datasource.username: &quot;${db_user}&quot;\r\nspring.datasource.password: &quot;${db_password}&quot;\r\nspring.datasource.driver.class: &quot;${db_driver}&quot;\r\nspring.jpa.properties.hibernate.dialect: &quot;org.hibernate.dialect.Oracle10gDialect&quot;\r\nspring.jpa.hibernate.naming.physical-strategy: &quot;org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl&quot;\r\nmanagement.health.ldap.enabled: false\r\nmanagement.endpoints.enabled-by-default: false\r\nmanagement.endpoint.health.enabled: true\r\n\r\nkeycloak:\r\n  realm: mrdc\r\n  auth-server-url: ${keycloak_url}\r\n  ssl-required: external\r\n  principal-attribute: preferred_username\r\n  disableTrustManager: true\r\n  allow-any-hostname: true\r\n  resource: mrdc-client\r\n  cors: true\r\n  credentials:\r\n    secret: secret\r\n  securityConstraints:\r\n    - securityCollections:\r\n        - name: default\r\n          patterns:\r\n            - /*\r\n      authRoles:\r\n        - user\r\n  policy-enforcer-config:\r\n    lazy-load-paths: false\r\n    enforcement-mode: ENFORCING\r\n    paths:\r\n      - name: actuator\r\n        path: /actuator/*\r\n        enforcement-mode: DISABLED\r\n        methods:\r\n          - method: GET\r\n```\r\n\r\n\r\nI really want to know what I&#39;ve done wrong,I mean I have used keycloak before and used a similar web filter and always got the username like this:\r\n```\r\npublic class CustomerFilter extends GenericFilterBean {\r\n    private static final Logger LOGGER = LoggerFactory.getLogger(CustomerFilter.class);\r\n\r\n    @Override\r\n    public void doFilter(ServletRequest servletRequest,\r\n                         ServletResponse servletResponse,\r\n                         FilterChain filterChain) throws IOException, ServletException {\r\n        Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\r\n        HttpServletRequest httpServletRequest = (HttpServletRequest) servletRequest;\r\n        Principal userPrincipal = httpServletRequest.getUserPrincipal();\r\n        if (userPrincipal != null) {\r\n            userPrincipal.getName();\r\n            LOGGER.info(&quot;username: &quot; + userPrincipal);\r\n        }\r\n        filterChain.doFilter(servletRequest, servletResponse);\r\n    }\r\n}\r\n```\r\n\r\nand here is my keycloak realm.json file in case that helps:\r\n```\r\n{\r\n  &quot;realm&quot;: &quot;mrdc&quot;,\r\n  &quot;displayName&quot;: &quot;PS-mRDC&quot;,\r\n  &quot;enabled&quot;: true,\r\n  &quot;requiredCredentials&quot;: [\r\n    &quot;password&quot;\r\n  ],\r\n  &quot;users&quot;: [\r\n    {\r\n      &quot;username&quot;: &quot;service-account-mrdc&quot;,\r\n      &quot;enabled&quot;: true,\r\n      &quot;serviceAccountClientId&quot;: &quot;mrdc-client&quot;,\r\n      &quot;clientRoles&quot;: {\r\n        &quot;mrdc-client&quot;: [\r\n          &quot;uma_protection&quot;\r\n        ]\r\n      }\r\n    },\r\n    {\r\n      &quot;username&quot;: &quot;mrdc.user&quot;,\r\n      &quot;enabled&quot;: true,\r\n      &quot;credentials&quot;: [\r\n        {\r\n          &quot;type&quot;: &quot;password&quot;,\r\n          &quot;value&quot;: &quot;mrdc&quot;\r\n        }\r\n      ],\r\n      &quot;realmRoles&quot;: [],\r\n      &quot;groups&quot;: [\r\n        &quot;user-group&quot;\r\n      ]\r\n    },\r\n    {\r\n      &quot;username&quot;: &quot;admin.user&quot;,\r\n      &quot;enabled&quot;: true,\r\n      &quot;credentials&quot;: [\r\n        {\r\n          &quot;type&quot;: &quot;password&quot;,\r\n          &quot;value&quot;: &quot;admin&quot;\r\n        }\r\n      ],\r\n      &quot;realmRoles&quot;: [],\r\n      &quot;groups&quot;: [\r\n        &quot;user-group&quot;,\r\n        &quot;admin-group&quot;\r\n      ]\r\n    }\r\n  ],\r\n  &quot;roles&quot;: {\r\n    &quot;realm&quot;: [\r\n      {\r\n        &quot;name&quot;: &quot;user&quot;\r\n      }\r\n    ]\r\n  },\r\n  &quot;groups&quot;: [\r\n    {\r\n      &quot;name&quot;: &quot;user-group&quot;,\r\n      &quot;path&quot;: &quot;user-group&quot;,\r\n      &quot;attributes&quot;: {},\r\n      &quot;realmRoles&quot;: [\r\n        &quot;user&quot;\r\n      ],\r\n      &quot;clientRoles&quot;: {\r\n        &quot;account&quot;: [\r\n          &quot;view-profile&quot;,\r\n          &quot;manage-account&quot;\r\n        ]\r\n      },\r\n      &quot;subGroups&quot;: []\r\n    },\r\n    {\r\n      &quot;name&quot;: &quot;admin-group&quot;,\r\n      &quot;path&quot;: &quot;admin-group&quot;,\r\n      &quot;attributes&quot;: {},\r\n      &quot;realmRoles&quot;: [\r\n        &quot;user&quot;\r\n      ],\r\n      &quot;clientRoles&quot;: {\r\n        &quot;account&quot;: [\r\n          &quot;view-profile&quot;,\r\n          &quot;manage-account&quot;\r\n        ],\r\n        &quot;realm-management&quot;: [\r\n          &quot;view-users&quot;,\r\n          &quot;view-realm&quot;,\r\n          &quot;view-clients&quot;,\r\n          &quot;manage-users&quot;\r\n        ]\r\n      },\r\n      &quot;subGroups&quot;: []\r\n    }\r\n  ],\r\n  &quot;scopeMappings&quot;: [\r\n    {\r\n      &quot;client&quot;: &quot;mrdc-client&quot;,\r\n      &quot;roles&quot;: [\r\n        &quot;user&quot;\r\n      ]\r\n    },\r\n    {\r\n      &quot;clientScope&quot;: &quot;offline_access&quot;,\r\n      &quot;roles&quot;: [\r\n        &quot;offline_access&quot;\r\n      ]\r\n    }\r\n  ],\r\n  &quot;clients&quot;: [\r\n    {\r\n      &quot;clientId&quot;: &quot;mrdc-client&quot;,\r\n      &quot;rootUrl&quot;: &quot;&quot;,\r\n      &quot;baseUrl&quot;: &quot;&quot;,\r\n      &quot;enabled&quot;: true,\r\n      &quot;redirectUris&quot;: [\r\n        &quot;https://*&quot;\r\n      ],\r\n      &quot;secret&quot;: &quot;secret&quot;,\r\n      &quot;fullScopeAllowed&quot;: false,\r\n      &quot;directAccessGrantsEnabled&quot;: true,\r\n      &quot;authorizationServicesEnabled&quot;: true,\r\n      &quot;authorizationSettings&quot;: {\r\n        &quot;allowRemoteResourceManagement&quot;: false,\r\n        &quot;policyEnforcementMode&quot;: &quot;ENFORCING&quot;,\r\n        &quot;resources&quot;: [\r\n          {\r\n            &quot;name&quot;: &quot;Default Resource&quot;,\r\n            &quot;uri&quot;: &quot;/*&quot;\r\n          }\r\n        ],\r\n        &quot;policies&quot;: [\r\n          {\r\n            &quot;name&quot;: &quot;Default Policy&quot;,\r\n            &quot;description&quot;: &quot;A policy that grants access only for users within this realm&quot;,\r\n            &quot;type&quot;: &quot;js&quot;,\r\n            &quot;logic&quot;: &quot;POSITIVE&quot;,\r\n            &quot;decisionStrategy&quot;: &quot;AFFIRMATIVE&quot;,\r\n            &quot;config&quot;: {\r\n              &quot;code&quot;: &quot;// by default, grants any permission associated with this policy\\n$evaluation.grant();\\n&quot;\r\n            }\r\n          },\r\n          {\r\n            &quot;name&quot;: &quot;Only User Role Policy&quot;,\r\n            &quot;type&quot;: &quot;role&quot;,\r\n            &quot;logic&quot;: &quot;POSITIVE&quot;,\r\n            &quot;decisionStrategy&quot;: &quot;UNANIMOUS&quot;,\r\n            &quot;config&quot;: {\r\n              &quot;roles&quot;: &quot;[{\\&quot;id\\&quot;:\\&quot;user\\&quot;,\\&quot;required\\&quot;:false}]&quot;\r\n            }\r\n          },\r\n          {\r\n            &quot;name&quot;: &quot;User Permission&quot;,\r\n            &quot;type&quot;: &quot;resource&quot;,\r\n            &quot;logic&quot;: &quot;POSITIVE&quot;,\r\n            &quot;decisionStrategy&quot;: &quot;UNANIMOUS&quot;,\r\n            &quot;config&quot;: {\r\n              &quot;resources&quot;: &quot;[\\&quot;Default Resource\\&quot;]&quot;,\r\n              &quot;applyPolicies&quot;: &quot;[\\&quot;Only User Role Policy\\&quot;]&quot;\r\n            }\r\n          }\r\n        ],\r\n        &quot;scopes&quot;: [\r\n          &quot;view&quot;\r\n        ]\r\n      }\r\n    }\r\n  ]\r\n}\r\n```\r\n","title":"keycloak spring boot always receives Anonymous Authentication token","body":"<p>Im using keycloak spring boot adapter version 10.0.2 and I am trying to get the username using the authentication token, for that I created a web filter and trying to get the Principal but although the user is authenticated I only get Anonymous user like this:</p>\n<pre><code>org.springframework.security.authentication.AnonymousAuthenticationToken@81a4f960: \nPrincipal: anonymousUser; \nCredentials: [PROTECTED]; Authenticated: true; \nDetails: org.springframework.security.web.authentication.WebAuthenticationDetails@0: \nRemoteIpAddress: 10.128.15.244; \nSessionId: 6F41901438BFC9AD6FEEB34A3A6926EB; \nGranted \nAuthorities: ROLE_ANONYMOUS\n</code></pre>\n<p>I have the following application.yaml</p>\n<pre><code>cheques.paging.size: 10\nspring.jpa.hibernate.ddl-auto: none\nspring.jpa.hibernate.use-new-id-generator-mappings: FALSE\nspring.datasource.url: &quot;jdbc:oracle:thin:@${db_host}:${db_port}/${db_instance}&quot;\nspring.datasource.username: &quot;${db_user}&quot;\nspring.datasource.password: &quot;${db_password}&quot;\nspring.datasource.driver.class: &quot;${db_driver}&quot;\nspring.jpa.properties.hibernate.dialect: &quot;org.hibernate.dialect.Oracle10gDialect&quot;\nspring.jpa.hibernate.naming.physical-strategy: &quot;org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl&quot;\nmanagement.health.ldap.enabled: false\nmanagement.endpoints.enabled-by-default: false\nmanagement.endpoint.health.enabled: true\n\nkeycloak:\n  realm: mrdc\n  auth-server-url: ${keycloak_url}\n  ssl-required: external\n  principal-attribute: preferred_username\n  disableTrustManager: true\n  allow-any-hostname: true\n  resource: mrdc-client\n  cors: true\n  credentials:\n    secret: secret\n  securityConstraints:\n    - securityCollections:\n        - name: default\n          patterns:\n            - /*\n      authRoles:\n        - user\n  policy-enforcer-config:\n    lazy-load-paths: false\n    enforcement-mode: ENFORCING\n    paths:\n      - name: actuator\n        path: /actuator/*\n        enforcement-mode: DISABLED\n        methods:\n          - method: GET\n</code></pre>\n<p>I really want to know what I've done wrong,I mean I have used keycloak before and used a similar web filter and always got the username like this:</p>\n<pre><code>public class CustomerFilter extends GenericFilterBean {\n    private static final Logger LOGGER = LoggerFactory.getLogger(CustomerFilter.class);\n\n    @Override\n    public void doFilter(ServletRequest servletRequest,\n                         ServletResponse servletResponse,\n                         FilterChain filterChain) throws IOException, ServletException {\n        Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\n        HttpServletRequest httpServletRequest = (HttpServletRequest) servletRequest;\n        Principal userPrincipal = httpServletRequest.getUserPrincipal();\n        if (userPrincipal != null) {\n            userPrincipal.getName();\n            LOGGER.info(&quot;username: &quot; + userPrincipal);\n        }\n        filterChain.doFilter(servletRequest, servletResponse);\n    }\n}\n</code></pre>\n<p>and here is my keycloak realm.json file in case that helps:</p>\n<pre><code>{\n  &quot;realm&quot;: &quot;mrdc&quot;,\n  &quot;displayName&quot;: &quot;PS-mRDC&quot;,\n  &quot;enabled&quot;: true,\n  &quot;requiredCredentials&quot;: [\n    &quot;password&quot;\n  ],\n  &quot;users&quot;: [\n    {\n      &quot;username&quot;: &quot;service-account-mrdc&quot;,\n      &quot;enabled&quot;: true,\n      &quot;serviceAccountClientId&quot;: &quot;mrdc-client&quot;,\n      &quot;clientRoles&quot;: {\n        &quot;mrdc-client&quot;: [\n          &quot;uma_protection&quot;\n        ]\n      }\n    },\n    {\n      &quot;username&quot;: &quot;mrdc.user&quot;,\n      &quot;enabled&quot;: true,\n      &quot;credentials&quot;: [\n        {\n          &quot;type&quot;: &quot;password&quot;,\n          &quot;value&quot;: &quot;mrdc&quot;\n        }\n      ],\n      &quot;realmRoles&quot;: [],\n      &quot;groups&quot;: [\n        &quot;user-group&quot;\n      ]\n    },\n    {\n      &quot;username&quot;: &quot;admin.user&quot;,\n      &quot;enabled&quot;: true,\n      &quot;credentials&quot;: [\n        {\n          &quot;type&quot;: &quot;password&quot;,\n          &quot;value&quot;: &quot;admin&quot;\n        }\n      ],\n      &quot;realmRoles&quot;: [],\n      &quot;groups&quot;: [\n        &quot;user-group&quot;,\n        &quot;admin-group&quot;\n      ]\n    }\n  ],\n  &quot;roles&quot;: {\n    &quot;realm&quot;: [\n      {\n        &quot;name&quot;: &quot;user&quot;\n      }\n    ]\n  },\n  &quot;groups&quot;: [\n    {\n      &quot;name&quot;: &quot;user-group&quot;,\n      &quot;path&quot;: &quot;user-group&quot;,\n      &quot;attributes&quot;: {},\n      &quot;realmRoles&quot;: [\n        &quot;user&quot;\n      ],\n      &quot;clientRoles&quot;: {\n        &quot;account&quot;: [\n          &quot;view-profile&quot;,\n          &quot;manage-account&quot;\n        ]\n      },\n      &quot;subGroups&quot;: []\n    },\n    {\n      &quot;name&quot;: &quot;admin-group&quot;,\n      &quot;path&quot;: &quot;admin-group&quot;,\n      &quot;attributes&quot;: {},\n      &quot;realmRoles&quot;: [\n        &quot;user&quot;\n      ],\n      &quot;clientRoles&quot;: {\n        &quot;account&quot;: [\n          &quot;view-profile&quot;,\n          &quot;manage-account&quot;\n        ],\n        &quot;realm-management&quot;: [\n          &quot;view-users&quot;,\n          &quot;view-realm&quot;,\n          &quot;view-clients&quot;,\n          &quot;manage-users&quot;\n        ]\n      },\n      &quot;subGroups&quot;: []\n    }\n  ],\n  &quot;scopeMappings&quot;: [\n    {\n      &quot;client&quot;: &quot;mrdc-client&quot;,\n      &quot;roles&quot;: [\n        &quot;user&quot;\n      ]\n    },\n    {\n      &quot;clientScope&quot;: &quot;offline_access&quot;,\n      &quot;roles&quot;: [\n        &quot;offline_access&quot;\n      ]\n    }\n  ],\n  &quot;clients&quot;: [\n    {\n      &quot;clientId&quot;: &quot;mrdc-client&quot;,\n      &quot;rootUrl&quot;: &quot;&quot;,\n      &quot;baseUrl&quot;: &quot;&quot;,\n      &quot;enabled&quot;: true,\n      &quot;redirectUris&quot;: [\n        &quot;https://*&quot;\n      ],\n      &quot;secret&quot;: &quot;secret&quot;,\n      &quot;fullScopeAllowed&quot;: false,\n      &quot;directAccessGrantsEnabled&quot;: true,\n      &quot;authorizationServicesEnabled&quot;: true,\n      &quot;authorizationSettings&quot;: {\n        &quot;allowRemoteResourceManagement&quot;: false,\n        &quot;policyEnforcementMode&quot;: &quot;ENFORCING&quot;,\n        &quot;resources&quot;: [\n          {\n            &quot;name&quot;: &quot;Default Resource&quot;,\n            &quot;uri&quot;: &quot;/*&quot;\n          }\n        ],\n        &quot;policies&quot;: [\n          {\n            &quot;name&quot;: &quot;Default Policy&quot;,\n            &quot;description&quot;: &quot;A policy that grants access only for users within this realm&quot;,\n            &quot;type&quot;: &quot;js&quot;,\n            &quot;logic&quot;: &quot;POSITIVE&quot;,\n            &quot;decisionStrategy&quot;: &quot;AFFIRMATIVE&quot;,\n            &quot;config&quot;: {\n              &quot;code&quot;: &quot;// by default, grants any permission associated with this policy\\n$evaluation.grant();\\n&quot;\n            }\n          },\n          {\n            &quot;name&quot;: &quot;Only User Role Policy&quot;,\n            &quot;type&quot;: &quot;role&quot;,\n            &quot;logic&quot;: &quot;POSITIVE&quot;,\n            &quot;decisionStrategy&quot;: &quot;UNANIMOUS&quot;,\n            &quot;config&quot;: {\n              &quot;roles&quot;: &quot;[{\\&quot;id\\&quot;:\\&quot;user\\&quot;,\\&quot;required\\&quot;:false}]&quot;\n            }\n          },\n          {\n            &quot;name&quot;: &quot;User Permission&quot;,\n            &quot;type&quot;: &quot;resource&quot;,\n            &quot;logic&quot;: &quot;POSITIVE&quot;,\n            &quot;decisionStrategy&quot;: &quot;UNANIMOUS&quot;,\n            &quot;config&quot;: {\n              &quot;resources&quot;: &quot;[\\&quot;Default Resource\\&quot;]&quot;,\n              &quot;applyPolicies&quot;: &quot;[\\&quot;Only User Role Policy\\&quot;]&quot;\n            }\n          }\n        ],\n        &quot;scopes&quot;: [\n          &quot;view&quot;\n        ]\n      }\n    }\n  ]\n}\n</code></pre>\n"},{"tags":["java","oop","generics","wildcard","raw-types"],"comments":[{"owner":{"account_id":1474041,"reputation":1667,"user_id":1384908,"accept_rate":67,"display_name":"pafau k."},"score":1,"creation_date":1590962574,"post_id":62122965,"comment_id":109872506,"body_markdown":"See [this answer](https://stackoverflow.com/questions/8537500/java-the-meaning-of-t-extends-comparablet) on why you have to change `&lt;T extends Comparable&gt;` to `&lt;T extends Comparable&lt;T&gt;&gt;`","body":"See <a href=\"https://stackoverflow.com/questions/8537500/java-the-meaning-of-t-extends-comparablet\">this answer</a> on why you have to change <code>&lt;T extends Comparable&gt;</code> to <code>&lt;T extends Comparable&lt;T&gt;&gt;</code>"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1590962595,"post_id":62122965,"comment_id":109872510,"body_markdown":"A comment on the code: since arrays are covariant, while generics are invariant, using a generic varargs parameter may set you up for trouble.","body":"A comment on the code: since arrays are covariant, while generics are invariant, using a generic varargs parameter may set you up for trouble."},{"owner":{"account_id":1474041,"reputation":1667,"user_id":1384908,"accept_rate":67,"display_name":"pafau k."},"score":0,"creation_date":1590967203,"post_id":62122965,"comment_id":109873567,"body_markdown":"Should be safe, as the array is only ever queried, not modified though?","body":"Should be safe, as the array is only ever queried, not modified though?"}],"answers":[{"tags":[],"owner":{"account_id":4826640,"reputation":25377,"user_id":3895960,"accept_rate":97,"display_name":"Dici"},"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1634425093,"creation_date":1590962421,"answer_id":62122994,"question_id":62122965,"body_markdown":"`Comparable` is a generic interface, so to use it safely you must always specify the generic type to use. In your case, something like:\r\n\r\n```java\r\n&lt;T extends Comparable&lt;T&gt;&gt;\r\n```\r\n\r\nis likely what you&#39;re looking for. Otherwise, the compiler is unable to help you verify that the types are actually compatible in all scenarii.","title":"How to resolve `Raw use of parameterized class &#39;Comparable&#39;` warning?","body":"<p><code>Comparable</code> is a generic interface, so to use it safely you must always specify the generic type to use. In your case, something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>&lt;T extends Comparable&lt;T&gt;&gt;\n</code></pre>\n<p>is likely what you're looking for. Otherwise, the compiler is unable to help you verify that the types are actually compatible in all scenarii.</p>\n"}],"owner":{"account_id":6757157,"reputation":198,"user_id":5205125,"display_name":"Parsa Noori"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20724,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":62122994,"answer_count":1,"score":7,"last_activity_date":1634425093,"creation_date":1590962223,"question_id":62122965,"body_markdown":"Got to implement the method below for an assignment which it&#39;s subject is &quot;WildCards&quot;, but don&#39;t know where to use wildcards in order to resolve the warning.\r\n\r\n    static &lt;T extends Comparable&gt; T findMax(T ... items)\r\n    {\r\n        T max = items[0];\r\n        for (T item : items)\r\n            if (item.compareTo(max) &gt; 0)\r\n                max = item;\r\n        return max;\r\n    }\r\n\r\nAny ideas ?","title":"How to resolve `Raw use of parameterized class &#39;Comparable&#39;` warning?","body":"<p>Got to implement the method below for an assignment which it's subject is \"WildCards\", but don't know where to use wildcards in order to resolve the warning.</p>\n\n<pre><code>static &lt;T extends Comparable&gt; T findMax(T ... items)\n{\n    T max = items[0];\n    for (T item : items)\n        if (item.compareTo(max) &gt; 0)\n            max = item;\n    return max;\n}\n</code></pre>\n\n<p>Any ideas ?</p>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":12695174,"reputation":45172,"user_id":9223839,"display_name":"Joakim Danielson"},"score":0,"creation_date":1634329799,"post_id":69590031,"comment_id":123004227,"body_markdown":"If you want to find a 1 or 0 wouldn&#39;t it be better to treat the input as an array of strings? You need to improve your question by explaining _what_ is wrong with your code or _what_ problem you are stucked with.","body":"If you want to find a 1 or 0 wouldn&#39;t it be better to treat the input as an array of strings? You need to improve your question by explaining <i>what</i> is wrong with your code or <i>what</i> problem you are stucked with."},{"owner":{"account_id":23045099,"reputation":11,"user_id":17162748,"display_name":"Managen Treesone"},"score":0,"creation_date":1634330517,"post_id":69590031,"comment_id":123004425,"body_markdown":"I&#39;m sorry I don&#39;t know how to use strings. So I&#39;m trying to figure out what I can do. I tried asking that question before but it was deleted.","body":"I&#39;m sorry I don&#39;t know how to use strings. So I&#39;m trying to figure out what I can do. I tried asking that question before but it was deleted."}],"answers":[{"tags":[],"owner":{"account_id":23041750,"reputation":53,"user_id":17159839,"display_name":"Mat21445"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634392169,"creation_date":1634329792,"answer_id":69590285,"question_id":69590031,"body_markdown":"Since you are looking for a specific character, I would recommend working on String or char array instead. Some code you can consider that will probably give you an idea how to solve a problem:\r\n\r\n    //part 1\r\n                Scanner sc= new Scanner(System.in);    //System.in is a standard input stream\r\n                System.out.print(&quot;Enter first number- &quot;);\r\n                int a= sc.nextInt();\r\n                System.out.print(&quot;Enter second number- &quot;);\r\n                int b= sc.nextInt();\r\n                System.out.print(&quot;Enter third number- &quot;);\r\n                int c= sc.nextInt();\r\n    // part 2\r\n                    String Input = String.join(&quot; &quot;,Integer.toString(a),Integer.toString(b),Integer.toString(c));\r\n                    System.out.println(Input);\r\n    // part 3\r\n                int i = 0;\r\n    \r\n                while(i&lt;Input.length()){\r\n                if(Input.charAt(i)==&#39;0&#39;) System.out.println(String.join(&quot; &quot;,&quot;0 at position&quot;,Integer.toString(i+1)));\r\n                if(Input.charAt(i)==&#39;1&#39;) System.out.println(String.join(&quot; &quot;,&quot;1 at position&quot;,Integer.toString(i+1)));\r\n                i++;\r\n                }","title":"How do I write a program to find 0&#39;s and 1&#39;s in Java?","body":"<p>Since you are looking for a specific character, I would recommend working on String or char array instead. Some code you can consider that will probably give you an idea how to solve a problem:</p>\n<pre><code>//part 1\n            Scanner sc= new Scanner(System.in);    //System.in is a standard input stream\n            System.out.print(&quot;Enter first number- &quot;);\n            int a= sc.nextInt();\n            System.out.print(&quot;Enter second number- &quot;);\n            int b= sc.nextInt();\n            System.out.print(&quot;Enter third number- &quot;);\n            int c= sc.nextInt();\n// part 2\n                String Input = String.join(&quot; &quot;,Integer.toString(a),Integer.toString(b),Integer.toString(c));\n                System.out.println(Input);\n// part 3\n            int i = 0;\n\n            while(i&lt;Input.length()){\n            if(Input.charAt(i)=='0') System.out.println(String.join(&quot; &quot;,&quot;0 at position&quot;,Integer.toString(i+1)));\n            if(Input.charAt(i)=='1') System.out.println(String.join(&quot; &quot;,&quot;1 at position&quot;,Integer.toString(i+1)));\n            i++;\n            }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2056173,"reputation":2037,"user_id":1833878,"accept_rate":68,"display_name":"Chris Phillips"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634330306,"creation_date":1634330306,"answer_id":69590361,"question_id":69590031,"body_markdown":"The most impactful advice I would provide is: \r\n\r\nstore your input as `string` or `char[]` instead of `int[]`. \r\n\r\n\r\nTo solve: Create a collection(like a list, or array) to hold your valid indexes, and iterate through your input one letter at a time, adding valid indexes to your collection as they satisfy your condition. Implement a &#39;PrettyPrint(&lt;CollectionType&gt;)&#39; that converts your collection into a nice output.","title":"How do I write a program to find 0&#39;s and 1&#39;s in Java?","body":"<p>The most impactful advice I would provide is:</p>\n<p>store your input as <code>string</code> or <code>char[]</code> instead of <code>int[]</code>.</p>\n<p>To solve: Create a collection(like a list, or array) to hold your valid indexes, and iterate through your input one letter at a time, adding valid indexes to your collection as they satisfy your condition. Implement a 'PrettyPrint()' that converts your collection into a nice output.</p>\n"},{"tags":[],"owner":{"account_id":22061779,"reputation":117,"user_id":16324327,"display_name":"Ahmad Malik"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634331401,"creation_date":1634331089,"answer_id":69590479,"question_id":69590031,"body_markdown":"you can use a method like this,\r\n\r\n    public void haszero(int numbers[])\r\n    {\r\n          int position;\r\n          for(position = 0; position &lt; numbers.size; position++)\r\n          {\r\n              while(numbers[position] &gt; 0)\r\n              {\r\n                  if(numbers[position] % 10 == 0)\r\n                  system.out.print(&quot;0 at &quot; position)\r\n\r\n                  number=number/10;\r\n               }\r\n          }\r\n          \r\n    }\r\n\r\nand then you can use same method as this for 1.\r\nor the you can also do something like this\r\n\r\n    for(int position = 0; position &lt; array.size; position++)\r\n    {\r\n         if (String.valueOf(array[position]).contains(&quot;0&quot;))\r\n         system.out.print(&quot;0 at &quot; position);\r\n    }\r\n\r\n","title":"How do I write a program to find 0&#39;s and 1&#39;s in Java?","body":"<p>you can use a method like this,</p>\n<pre><code>public void haszero(int numbers[])\n{\n      int position;\n      for(position = 0; position &lt; numbers.size; position++)\n      {\n          while(numbers[position] &gt; 0)\n          {\n              if(numbers[position] % 10 == 0)\n              system.out.print(&quot;0 at &quot; position)\n\n              number=number/10;\n           }\n      }\n      \n}\n</code></pre>\n<p>and then you can use same method as this for 1.\nor the you can also do something like this</p>\n<pre><code>for(int position = 0; position &lt; array.size; position++)\n{\n     if (String.valueOf(array[position]).contains(&quot;0&quot;))\n     system.out.print(&quot;0 at &quot; position);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634334384,"creation_date":1634333378,"answer_id":69590803,"question_id":69590031,"body_markdown":"I went ahead a coded a solution that used int arrays.  Here are the test results from one of my later tests.\r\n\r\n    Type 10 values: 0 1 2 3 4 5 6 7 8 9\r\n    1 found number 1, at position 2\r\n    1 found number 0, at position 1\r\n    8 found others, at position 3 4 5 6 7 8 9 10\r\n    \r\n    Type 10 values: 12 23 34 45 127 21 84 0 73 364\r\n    3 found number 1, at position 1 5 6\r\n    1 found number 0, at position 8\r\n    6 found others, at position 2 3 4 7 9 10\r\n    \r\n    Type 10 values: \r\n\r\nTo exit the program, you just press the Enter key.\r\n\r\nMy process was to maintain three int arrays.  One held the indexes of all the ones.  One held the indexes of all the zeros.  One held the indexes of all the other values.\r\n\r\nI wrote this code step by step, testing each step along the way.  I probably ran two or three dozen tests, each testing one small part of the code.\r\n\r\nThe first thing I did was to get the input loop working correctly.  I didn&#39;t test for non-numeric input, but that test could be added easily.  I didn&#39;t limit the input to 10 numbers either.  You can type 15 or 20 numbers if you want.  Finally, I didn&#39;t limit the input to two-digit numbers.  The code that looks for a digit should work for any positive integer value.\r\n\r\nNext, I wrote a method to determine whether a number contained a particular digit.  The method works with any digit, not just zero or one.\r\n\r\nAfter that, it was a matter of getting the output to look correct.\r\n\r\nHere&#39;s the complete runnable code.\r\n\r\n    import java.util.Scanner;\r\n    \r\n    public class ZeroAndOne {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tnew ZeroAndOne().processInput();\r\n    \t}\r\n    \t\r\n    \tpublic void processInput() {\r\n    \t\tScanner scanner = new Scanner(System.in);\r\n    \t\tString line;\r\n    \t\t\r\n    \t\tdo {\r\n    \t\t\tSystem.out.print(&quot;Type 10 values: &quot;);\r\n    \t\t\tline = scanner.nextLine().trim();\r\n    \t\t\tString[] parts = line.split(&quot;\\\\s+&quot;);\r\n    \t\t\t\r\n    \t\t\tif (!line.isEmpty()) {\r\n    \t\t\t\tint[] input = new int[parts.length];\r\n    \t\t\t\tfor (int index = 0; index &lt; parts.length; index++) {\r\n    \t\t\t\t\tinput[index] = Integer.valueOf(parts[index]);\r\n    \t\t\t\t}\r\n    \t\t\t\t\r\n    \t\t\t\tSystem.out.println(processArray(input));\r\n    \t\t\t}\r\n    \t\t} while (!line.isEmpty());\r\n    \t\t\r\n    \t\tscanner.close();\r\n    \t}\r\n    \t\r\n    \tprivate String processArray(int[] input) {\r\n    \t\tint[] zeros = new int[input.length];\r\n    \t\tint[] ones = new int[input.length];\r\n    \t\tint[] other = new int[input.length];\r\n    \t\t\r\n    \t\tint zeroIndex = 0;\r\n    \t\tint oneIndex = 0;\r\n    \t\tint otherIndex = 0;\r\n    \t\t\r\n    \t\tfor (int index = 0; index &lt; input.length; index++) {\r\n    \t\t\tboolean isOther = true;\r\n    \t\t\t\r\n    \t\t\tif (isDigit(input[index], 0)) {\r\n    \t\t\t\tzeros[zeroIndex++] = index;\r\n    \t\t\t\tisOther = false;\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t\tif (isDigit(input[index], 1)) {\r\n    \t\t\t\tones[oneIndex++] = index;\r\n    \t\t\t\tisOther = false;\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t\tif (isOther) {\r\n    \t\t\t\tother[otherIndex++] = index;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\t\r\n    \t\tStringBuilder builder = new StringBuilder();\r\n    \t\tbuilder.append(oneIndex);\r\n    \t\tbuilder.append(&quot; found number 1, at position &quot;);\r\n    \t\tbuilder.append(appendIndexes(ones, oneIndex));\r\n    \t\tbuilder.append(System.lineSeparator());\r\n    \t\t\r\n    \t\tbuilder.append(zeroIndex);\r\n    \t\tbuilder.append(&quot; found number 0, at position &quot;);\r\n    \t\tbuilder.append(appendIndexes(zeros, zeroIndex));\r\n    \t\tbuilder.append(System.lineSeparator());\r\n    \t\t\r\n    \t\tbuilder.append(otherIndex);\r\n    \t\tbuilder.append(&quot; found others, at position &quot;);\r\n    \t\tbuilder.append(appendIndexes(other, otherIndex));\r\n    \t\tbuilder.append(System.lineSeparator());\r\n    \t\t\r\n    \t\treturn builder.toString();\r\n    \t}\r\n    \t\r\n    \tprivate boolean isDigit(int value, int digit) {\r\n    \t\tif (value == 0 &amp;&amp; digit == 0) {\r\n    \t\t\treturn true;\r\n    \t\t}\r\n    \t\t\r\n    \t\twhile (value &gt; 0) {\r\n    \t\t\tint temp = value / 10;\r\n    \t\t\tint remainder = value % 10;\r\n    \t\t\tif (remainder == digit) {\r\n    \t\t\t\treturn true;\r\n    \t\t\t}\r\n    \t\t\tvalue = temp;\r\n    \t\t}\r\n    \t\t\r\n    \t\treturn false;\r\n    \t}\r\n    \t\r\n    \tprivate StringBuilder appendIndexes(int[] array, int length) {\r\n    \t\tStringBuilder builder = new StringBuilder();\r\n    \t\tfor (int index = 0; index &lt; length; index++) {\r\n    \t\t\tbuilder.append(array[index] + 1);\r\n    \t\t\tif (index &lt; (length - 1)) {\r\n    \t\t\t\tbuilder.append(&quot; &quot;);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\t\r\n    \t\treturn builder;\r\n    \t}\r\n    \r\n    }\r\n\r\n\r\n","title":"How do I write a program to find 0&#39;s and 1&#39;s in Java?","body":"<p>I went ahead a coded a solution that used int arrays.  Here are the test results from one of my later tests.</p>\n<pre><code>Type 10 values: 0 1 2 3 4 5 6 7 8 9\n1 found number 1, at position 2\n1 found number 0, at position 1\n8 found others, at position 3 4 5 6 7 8 9 10\n\nType 10 values: 12 23 34 45 127 21 84 0 73 364\n3 found number 1, at position 1 5 6\n1 found number 0, at position 8\n6 found others, at position 2 3 4 7 9 10\n\nType 10 values: \n</code></pre>\n<p>To exit the program, you just press the Enter key.</p>\n<p>My process was to maintain three int arrays.  One held the indexes of all the ones.  One held the indexes of all the zeros.  One held the indexes of all the other values.</p>\n<p>I wrote this code step by step, testing each step along the way.  I probably ran two or three dozen tests, each testing one small part of the code.</p>\n<p>The first thing I did was to get the input loop working correctly.  I didn't test for non-numeric input, but that test could be added easily.  I didn't limit the input to 10 numbers either.  You can type 15 or 20 numbers if you want.  Finally, I didn't limit the input to two-digit numbers.  The code that looks for a digit should work for any positive integer value.</p>\n<p>Next, I wrote a method to determine whether a number contained a particular digit.  The method works with any digit, not just zero or one.</p>\n<p>After that, it was a matter of getting the output to look correct.</p>\n<p>Here's the complete runnable code.</p>\n<pre><code>import java.util.Scanner;\n\npublic class ZeroAndOne {\n\n    public static void main(String[] args) {\n        new ZeroAndOne().processInput();\n    }\n    \n    public void processInput() {\n        Scanner scanner = new Scanner(System.in);\n        String line;\n        \n        do {\n            System.out.print(&quot;Type 10 values: &quot;);\n            line = scanner.nextLine().trim();\n            String[] parts = line.split(&quot;\\\\s+&quot;);\n            \n            if (!line.isEmpty()) {\n                int[] input = new int[parts.length];\n                for (int index = 0; index &lt; parts.length; index++) {\n                    input[index] = Integer.valueOf(parts[index]);\n                }\n                \n                System.out.println(processArray(input));\n            }\n        } while (!line.isEmpty());\n        \n        scanner.close();\n    }\n    \n    private String processArray(int[] input) {\n        int[] zeros = new int[input.length];\n        int[] ones = new int[input.length];\n        int[] other = new int[input.length];\n        \n        int zeroIndex = 0;\n        int oneIndex = 0;\n        int otherIndex = 0;\n        \n        for (int index = 0; index &lt; input.length; index++) {\n            boolean isOther = true;\n            \n            if (isDigit(input[index], 0)) {\n                zeros[zeroIndex++] = index;\n                isOther = false;\n            }\n            \n            if (isDigit(input[index], 1)) {\n                ones[oneIndex++] = index;\n                isOther = false;\n            }\n            \n            if (isOther) {\n                other[otherIndex++] = index;\n            }\n        }\n        \n        StringBuilder builder = new StringBuilder();\n        builder.append(oneIndex);\n        builder.append(&quot; found number 1, at position &quot;);\n        builder.append(appendIndexes(ones, oneIndex));\n        builder.append(System.lineSeparator());\n        \n        builder.append(zeroIndex);\n        builder.append(&quot; found number 0, at position &quot;);\n        builder.append(appendIndexes(zeros, zeroIndex));\n        builder.append(System.lineSeparator());\n        \n        builder.append(otherIndex);\n        builder.append(&quot; found others, at position &quot;);\n        builder.append(appendIndexes(other, otherIndex));\n        builder.append(System.lineSeparator());\n        \n        return builder.toString();\n    }\n    \n    private boolean isDigit(int value, int digit) {\n        if (value == 0 &amp;&amp; digit == 0) {\n            return true;\n        }\n        \n        while (value &gt; 0) {\n            int temp = value / 10;\n            int remainder = value % 10;\n            if (remainder == digit) {\n                return true;\n            }\n            value = temp;\n        }\n        \n        return false;\n    }\n    \n    private StringBuilder appendIndexes(int[] array, int length) {\n        StringBuilder builder = new StringBuilder();\n        for (int index = 0; index &lt; length; index++) {\n            builder.append(array[index] + 1);\n            if (index &lt; (length - 1)) {\n                builder.append(&quot; &quot;);\n            }\n        }\n        \n        return builder;\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":194308,"reputation":66720,"user_id":436560,"accept_rate":87,"display_name":"Lajos Arpad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634425018,"creation_date":1634425018,"answer_id":69600125,"question_id":69590031,"body_markdown":"Assuming that your input is a line containing integer numbers separated by space, you could read them all and then loop the `String` items via:\r\n\r\n    String input = Sc.readLine().split(&quot; &quot;);\r\n    int positions[] = new int[input.length];\r\n    int zeros = 0;\r\n    String zeroString = &quot;&quot;;\r\n    int ones = 0;\r\n    String oneString = &quot;&quot;;\r\n    int others = 0;\r\n    String otherString = &quot;&quot;;\r\n    for (String item : input) {\r\n        boolean isOther = true;\r\n        String appendix = &quot; &quot; + item;\r\n        if (item.indexOf(&quot;0&quot;) &gt;= 0) {\r\n            isOther = false;\r\n            zeros++;\r\n            zeroString += appendix;\r\n        }\r\n        if (item.indexOf(&quot;1&quot;) &gt;= 0) {\r\n            isOther = false;\r\n            ones++;\r\n            oneString += appendix;\r\n        }\r\n        if (isOther) {\r\n            others++;\r\n            otherString += appendix;\r\n        }\r\n    }\r\n    System.out.println(ones + &quot; found number 1, at position &quot; + oneString);\r\n    System.out.println(zeros + &quot; found number 0, at position &quot; + zeroString);\r\n    System.out.println(others + &quot; found others, at position &quot; + otherString);","title":"How do I write a program to find 0&#39;s and 1&#39;s in Java?","body":"<p>Assuming that your input is a line containing integer numbers separated by space, you could read them all and then loop the <code>String</code> items via:</p>\n<pre><code>String input = Sc.readLine().split(&quot; &quot;);\nint positions[] = new int[input.length];\nint zeros = 0;\nString zeroString = &quot;&quot;;\nint ones = 0;\nString oneString = &quot;&quot;;\nint others = 0;\nString otherString = &quot;&quot;;\nfor (String item : input) {\n    boolean isOther = true;\n    String appendix = &quot; &quot; + item;\n    if (item.indexOf(&quot;0&quot;) &gt;= 0) {\n        isOther = false;\n        zeros++;\n        zeroString += appendix;\n    }\n    if (item.indexOf(&quot;1&quot;) &gt;= 0) {\n        isOther = false;\n        ones++;\n        oneString += appendix;\n    }\n    if (isOther) {\n        others++;\n        otherString += appendix;\n    }\n}\nSystem.out.println(ones + &quot; found number 1, at position &quot; + oneString);\nSystem.out.println(zeros + &quot; found number 0, at position &quot; + zeroString);\nSystem.out.println(others + &quot; found others, at position &quot; + otherString);\n</code></pre>\n"}],"owner":{"account_id":23045099,"reputation":11,"user_id":17162748,"display_name":"Managen Treesone"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":784,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":5,"score":-1,"last_activity_date":1634425018,"creation_date":1634328073,"question_id":69590031,"body_markdown":"I want it to take 10 values from the keyboard and find out if any of the 10 inputs contain 0 or 1 and if so, What position is in the array?\r\n\r\n    example\r\n\r\n     Input = 9 15 91 1 0 22 31 67 88 33\r\n\r\n    output = 4 found number 1, at position 2 3 4 7\r\n             1 found number 0, at position 5\r\n             5 found others, at position 1 6 8 9 10\r\nI can&#39;t write any further because I still don&#39;t understand. Advise me please\r\nI tried to write it but the output is still not correct.\r\n\r\n    \r\n\r\n\tpublic static int SequentialSearch(int number[], int key_1, int key_0) {\r\n\t\tint looker;\r\n\r\n\t\tfor (looker = 0; looker &lt; number.length; looker++) {\r\n\t\t\tif (number[looker] == key_1)\r\n\t\t\t\treturn looker;\r\n\t\t\tif (number[looker] == key_0)\r\n\t\t\t\treturn looker;\r\n\t\t}\r\n\t\treturn -1;\r\n\t}\r\n\r\n\tpublic static void Loopcheck(int number[]) {\r\n\t\tint key_1, key_0, others_key;\r\n\r\n\t\tfor (int count_check = 0; count_check &lt; number.length; count_check++) {\r\n\t\t\tif (number[count_check] / 10 == 1 || number[count_check] % 10 == 1) {\r\n\t\t\t\tkey_1 = 1;\r\n\t\t\t\tbreak;\r\n\t\t\t} else if (number[count_check] / 10 == 0 || number[count_check] % 10 == 0) {\r\n\t\t\t\tkey_0 = 0;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tpublic static int Print(int number[], int location) {\r\n\t\tfor (int loop = 0; loop &lt; number.length; loop++)\r\n\t\t\tif (location &gt; -1)\r\n\t\t\t\tSystem.out.print(&quot; 0 : &quot; + location);\r\n\t\treturn 0;\r\n\t}\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tScanner Sc = new Scanner(System.in);\r\n\t\tint value1, value0, location, key1;\r\n\t\tint[] number = new int[10];\r\n\t\tfor (int count = 0; count &lt; number.length; count++) {\r\n\t\t\tnumber[count] = Sc.nextInt();\r\n\t\t}\r\n\t\tint item1 = 1;\r\n\t\tint item0 = 0;\r\n\t\tlocation = SequentialSearch(number, item1, item0);\r\n\t\tLoopcheck(number);\r\n\t\tPrint(number, item1);\r\n\t}\r\n\r\n}\r\n","title":"How do I write a program to find 0&#39;s and 1&#39;s in Java?","body":"<p>I want it to take 10 values from the keyboard and find out if any of the 10 inputs contain 0 or 1 and if so, What position is in the array?</p>\n<pre><code>example\n\n Input = 9 15 91 1 0 22 31 67 88 33\n\noutput = 4 found number 1, at position 2 3 4 7\n         1 found number 0, at position 5\n         5 found others, at position 1 6 8 9 10\n</code></pre>\n<p>I can't write any further because I still don't understand. Advise me please\nI tried to write it but the output is still not correct.</p>\n<pre><code>public static int SequentialSearch(int number[], int key_1, int key_0) {\n    int looker;\n\n    for (looker = 0; looker &lt; number.length; looker++) {\n        if (number[looker] == key_1)\n            return looker;\n        if (number[looker] == key_0)\n            return looker;\n    }\n    return -1;\n}\n\npublic static void Loopcheck(int number[]) {\n    int key_1, key_0, others_key;\n\n    for (int count_check = 0; count_check &lt; number.length; count_check++) {\n        if (number[count_check] / 10 == 1 || number[count_check] % 10 == 1) {\n            key_1 = 1;\n            break;\n        } else if (number[count_check] / 10 == 0 || number[count_check] % 10 == 0) {\n            key_0 = 0;\n            break;\n        }\n\n    }\n\n}\n\npublic static int Print(int number[], int location) {\n    for (int loop = 0; loop &lt; number.length; loop++)\n        if (location &gt; -1)\n            System.out.print(&quot; 0 : &quot; + location);\n    return 0;\n}\n\npublic static void main(String[] args) {\n    Scanner Sc = new Scanner(System.in);\n    int value1, value0, location, key1;\n    int[] number = new int[10];\n    for (int count = 0; count &lt; number.length; count++) {\n        number[count] = Sc.nextInt();\n    }\n    int item1 = 1;\n    int item0 = 0;\n    location = SequentialSearch(number, item1, item0);\n    Loopcheck(number);\n    Print(number, item1);\n}\n</code></pre>\n<p>}</p>\n"},{"tags":["java","hashtable"],"answers":[{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634424253,"creation_date":1634405470,"answer_id":69598016,"question_id":69597621,"body_markdown":"It would be easiest do do it with a `Map&lt;Integer, Long&gt;` and do a frequency count.\r\n- stream the array\r\n- box it (convert to an Integer object)\r\n- group based on the value `a`\r\n- and count the occurrence of that value\r\n- in the map, `k` is the value and `v` is the count\r\n- logic is also added to correct for number plurality.\r\n```\r\nint[] vals  = {1,2,1,2,1,3,2,1};\r\nArrays.stream(vals).boxed().collect(\r\n\t\tCollectors.groupingBy(a -&gt; a, Collectors.counting()))\r\n\t\t.forEach((k, v) -&gt; {\r\n\t\t\tif (v &gt; 1) {\r\n\t\t\t\tSystem.out.println(v / 2 + &quot; pair&quot;\r\n\t\t\t\t\t\t+ ((v &gt; 3) ? &quot;s&quot; : &quot;&quot;) + &quot; of &quot; + k);\r\n\t\t\t}\r\n\t\t});\r\n```\r\nprints\r\n```\r\n2 pairs of 1\r\n1 pair of 2\r\n\r\n```\r\n\r\nNote that this takes advantage of integer division and drops the fraction.  So any odd count `n` will have the value of `(n-1)/2` pairs.\r\n```","title":"Count how many pairs of a number appear in an array","body":"<p>It would be easiest do do it with a <code>Map&lt;Integer, Long&gt;</code> and do a frequency count.</p>\n<ul>\n<li>stream the array</li>\n<li>box it (convert to an Integer object)</li>\n<li>group based on the value <code>a</code></li>\n<li>and count the occurrence of that value</li>\n<li>in the map, <code>k</code> is the value and <code>v</code> is the count</li>\n<li>logic is also added to correct for number plurality.</li>\n</ul>\n<pre><code>int[] vals  = {1,2,1,2,1,3,2,1};\nArrays.stream(vals).boxed().collect(\n        Collectors.groupingBy(a -&gt; a, Collectors.counting()))\n        .forEach((k, v) -&gt; {\n            if (v &gt; 1) {\n                System.out.println(v / 2 + &quot; pair&quot;\n                        + ((v &gt; 3) ? &quot;s&quot; : &quot;&quot;) + &quot; of &quot; + k);\n            }\n        });\n</code></pre>\n<p>prints</p>\n<pre><code>2 pairs of 1\n1 pair of 2\n\n</code></pre>\n<p>Note that this takes advantage of integer division and drops the fraction.  So any odd count <code>n</code> will have the value of <code>(n-1)/2</code> pairs.</p>\n<pre><code></code></pre>\n"},{"tags":[],"owner":{"account_id":18243171,"reputation":19300,"user_id":13279831,"display_name":"Nowhere Man"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1634405717,"creation_date":1634405717,"answer_id":69598050,"question_id":69597621,"body_markdown":"The calculation of frequencies seems to be fine, only printing part needs to be addressed.  To get the number of pairs, divide the frequency by 2 (or shift right by 1), and skip if the pair count is 0 (according to the expected output).\r\n\r\nPrinting should be moved into a separate method:\r\n```java\r\nstatic void printFreq(Map&lt;Integer, Integer&gt; mp) {\r\n    boolean addComma = false;\r\n    for (Map.Entry&lt;Integer, Integer&gt; entry : mp.entrySet()) {\r\n        int pairs = entry.getValue() / 2;\r\n        if (pairs &lt; 1) {\r\n            continue; // skip 0 pairs\r\n        }\r\n        if (addComma) {\r\n            System.out.print(&quot;, &quot;);\r\n        }\r\n        String p = pairs &gt; 1 ? &quot; pairs &quot; : &quot; pair &quot;;\r\n        System.out.print(pairs + p + &quot;of number &quot; + entry.getKey());\r\n        addComma = true;\r\n    }        \r\n    System.out.println();    \r\n}\r\n```\r\n----\r\nHowever, Stream API may be used for such tasks:\r\n* use vararg `int ... arr` to pass the array of integer values in more convenient way (`n` as the array length is redundant)\r\n* use `Collectors.groupingBy` and `Collectors.summingInt` (or `Collectors.counting`) to calculate raw frequency\r\n* calculate the number of pairs\r\n* map each key-value pair into String\r\n* join the strings using Collectors.joining\r\n```java\r\nstatic void countFreq(int ... arr) {\r\n    String message = Arrays.stream(arr)\r\n        .boxed()\r\n        .collect(Collectors.groupingBy(\r\n            x -&gt; x,\r\n            Collectors.summingInt(x -&gt; 1)\r\n        )) // Map&lt;Integer, Integer&gt;\r\n        .entrySet()\r\n        .stream()\r\n        .peek(e -&gt; e.setValue(e.getValue() / 2))\r\n        .filter(e -&gt; e.getValue() &gt; 0)\r\n        .map(e -&gt; String.format(&quot;%d %s of number %d&quot;, \r\n            e.getValue(), e.getValue() &gt; 1 ? &quot;pairs&quot; : &quot;pair&quot;, e.getKey()\r\n        ))\r\n        .collect(Collectors.joining(&quot;, &quot;));\r\n    System.out.println(message);\r\n}\r\n```\r\nOutput (in both cases):\r\n```\r\n2 pairs of number 1, 1 pair of number 2\r\n```\r\n","title":"Count how many pairs of a number appear in an array","body":"<p>The calculation of frequencies seems to be fine, only printing part needs to be addressed.  To get the number of pairs, divide the frequency by 2 (or shift right by 1), and skip if the pair count is 0 (according to the expected output).</p>\n<p>Printing should be moved into a separate method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>static void printFreq(Map&lt;Integer, Integer&gt; mp) {\n    boolean addComma = false;\n    for (Map.Entry&lt;Integer, Integer&gt; entry : mp.entrySet()) {\n        int pairs = entry.getValue() / 2;\n        if (pairs &lt; 1) {\n            continue; // skip 0 pairs\n        }\n        if (addComma) {\n            System.out.print(&quot;, &quot;);\n        }\n        String p = pairs &gt; 1 ? &quot; pairs &quot; : &quot; pair &quot;;\n        System.out.print(pairs + p + &quot;of number &quot; + entry.getKey());\n        addComma = true;\n    }        \n    System.out.println();    \n}\n</code></pre>\n<hr />\n<p>However, Stream API may be used for such tasks:</p>\n<ul>\n<li>use vararg <code>int ... arr</code> to pass the array of integer values in more convenient way (<code>n</code> as the array length is redundant)</li>\n<li>use <code>Collectors.groupingBy</code> and <code>Collectors.summingInt</code> (or <code>Collectors.counting</code>) to calculate raw frequency</li>\n<li>calculate the number of pairs</li>\n<li>map each key-value pair into String</li>\n<li>join the strings using Collectors.joining</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>static void countFreq(int ... arr) {\n    String message = Arrays.stream(arr)\n        .boxed()\n        .collect(Collectors.groupingBy(\n            x -&gt; x,\n            Collectors.summingInt(x -&gt; 1)\n        )) // Map&lt;Integer, Integer&gt;\n        .entrySet()\n        .stream()\n        .peek(e -&gt; e.setValue(e.getValue() / 2))\n        .filter(e -&gt; e.getValue() &gt; 0)\n        .map(e -&gt; String.format(&quot;%d %s of number %d&quot;, \n            e.getValue(), e.getValue() &gt; 1 ? &quot;pairs&quot; : &quot;pair&quot;, e.getKey()\n        ))\n        .collect(Collectors.joining(&quot;, &quot;));\n    System.out.println(message);\n}\n</code></pre>\n<p>Output (in both cases):</p>\n<pre><code>2 pairs of number 1, 1 pair of number 2\n</code></pre>\n"}],"owner":{"account_id":17286725,"reputation":53,"user_id":12519175,"display_name":"Hispalis Guadal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":92,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69598050,"answer_count":2,"score":0,"last_activity_date":1634424253,"creation_date":1634402661,"question_id":69597621,"body_markdown":"Lets say with the array:\r\n\r\n    array = {1,2,1,2,1,3,2,1};\r\n\r\nI want the output to be:\r\n\r\n    2 pairs of number 1, 1 pair of number 2\r\n\r\nFor that I created a Hash table. The code :\r\n\r\n    class Trail{\r\n        static void countFreq(int arr[], int n)\r\n        {\r\n            Map&lt;Integer, Integer&gt; mp = new HashMap&lt;&gt;();\r\n     \r\n            // Insert elements into HashTable while avoiding overwriting:\r\n            for (int i = 0; i &lt; n; i++)\r\n            {\r\n                // This part is to avoid overwriting:\r\n                if (mp.containsKey(arr[i]))\r\n                {\r\n                    mp.put(arr[i], mp.get(arr[i]) + 1);\r\n                }\r\n                else\r\n                {\r\n                    mp.put(arr[i], 1);\r\n                }\r\n            }\r\n            // Traverse through map and print frequencies\r\n            for (Map.Entry&lt;Integer, Integer&gt; entry : mp.entrySet())\r\n            { \r\n                System.out.println(entry.getKey() + &quot; &quot; + entry.getValue());\r\n                \r\n            }\r\n             \r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n    \r\n            int arr[] = {1,2,1,2,1,3,2,1};\r\n            int n = arr.length;\r\n            countFreq(arr, n);\r\n        }\r\n    }\r\n\r\nNot sure what to do next to print out the desired output. Been stuck in this simple part for a long time.","title":"Count how many pairs of a number appear in an array","body":"<p>Lets say with the array:</p>\n<pre><code>array = {1,2,1,2,1,3,2,1};\n</code></pre>\n<p>I want the output to be:</p>\n<pre><code>2 pairs of number 1, 1 pair of number 2\n</code></pre>\n<p>For that I created a Hash table. The code :</p>\n<pre><code>class Trail{\n    static void countFreq(int arr[], int n)\n    {\n        Map&lt;Integer, Integer&gt; mp = new HashMap&lt;&gt;();\n \n        // Insert elements into HashTable while avoiding overwriting:\n        for (int i = 0; i &lt; n; i++)\n        {\n            // This part is to avoid overwriting:\n            if (mp.containsKey(arr[i]))\n            {\n                mp.put(arr[i], mp.get(arr[i]) + 1);\n            }\n            else\n            {\n                mp.put(arr[i], 1);\n            }\n        }\n        // Traverse through map and print frequencies\n        for (Map.Entry&lt;Integer, Integer&gt; entry : mp.entrySet())\n        { \n            System.out.println(entry.getKey() + &quot; &quot; + entry.getValue());\n            \n        }\n         \n    }\n\n    public static void main(String[] args) {\n\n        int arr[] = {1,2,1,2,1,3,2,1};\n        int n = arr.length;\n        countFreq(arr, n);\n    }\n}\n</code></pre>\n<p>Not sure what to do next to print out the desired output. Been stuck in this simple part for a long time.</p>\n"},{"tags":["java","mysql","spring-boot","spring-mvc","postman"],"comments":[{"owner":{"account_id":8909811,"reputation":2612,"user_id":6650475,"display_name":"Andrew S"},"score":0,"creation_date":1634415059,"post_id":69599026,"comment_id":123019998,"body_markdown":"The controller method should probably `return investmentService.CreateInvestment(investment)`.","body":"The controller method should probably <code>return investmentService.CreateInvestment(investment)</code>."},{"owner":{"account_id":16609602,"reputation":115,"user_id":12003033,"display_name":"wizdemonizer"},"score":0,"creation_date":1634416336,"post_id":69599026,"comment_id":123020305,"body_markdown":"@AndrewS I changed the controller return method but it is still returning null values.","body":"@AndrewS I changed the controller return method but it is still returning null values."},{"owner":{"account_id":8909811,"reputation":2612,"user_id":6650475,"display_name":"Andrew S"},"score":0,"creation_date":1634416582,"post_id":69599026,"comment_id":123020363,"body_markdown":"It looks like `accountNumber` and `status` are being set.  Also 10/100 and 25/100 is integer division which will result in 0.  What does &#39;investmentRepository&#39; do?","body":"It looks like <code>accountNumber</code> and <code>status</code> are being set.  Also 10/100 and 25/100 is integer division which will result in 0.  What does &#39;investmentRepository&#39; do?"},{"owner":{"account_id":16609602,"reputation":115,"user_id":12003033,"display_name":"wizdemonizer"},"score":0,"creation_date":1634416848,"post_id":69599026,"comment_id":123020431,"body_markdown":"@AndrewS yes accountNumber and status are being set . Thanks for the integer division notification . I have updated the the post to include the Repository class .","body":"@AndrewS yes accountNumber and status are being set . Thanks for the integer division notification . I have updated the the post to include the Repository class ."}],"answers":[{"tags":[],"owner":{"account_id":16609602,"reputation":115,"user_id":12003033,"display_name":"wizdemonizer"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1634424219,"creation_date":1634424219,"answer_id":69600049,"question_id":69599026,"body_markdown":"Ok i fixed this by adding @RequestBody to the controller Method , then Changed CascadeType.ALL to CascadeType.MERGE in the Investment Class where FetchType Lazy is being used. ","title":"Spring Boot POST request to endpoint returning Null values","body":"<p>Ok i fixed this by adding @RequestBody to the controller Method , then Changed CascadeType.ALL to CascadeType.MERGE in the Investment Class where FetchType Lazy is being used.</p>\n"}],"owner":{"account_id":16609602,"reputation":115,"user_id":12003033,"display_name":"wizdemonizer"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2944,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1634424219,"creation_date":1634413614,"question_id":69599026,"body_markdown":"I am sending the request payload from post man. I want some other fields in the entity to store null value until another action is performed (Activate) but for other fields that I send their values , I get a Null response and for other fields that values set returns 0.0\r\n\r\nThis is the model\r\n\r\n```\r\nimport java.math.BigDecimal;\r\nimport java.time.LocalDate;\r\n\r\nimport javax.persistence.CascadeType;\r\nimport javax.persistence.Column;\r\nimport javax.persistence.Entity;\r\nimport javax.persistence.EnumType;\r\nimport javax.persistence.Enumerated;\r\nimport javax.persistence.FetchType;\r\nimport javax.persistence.GeneratedValue;\r\nimport javax.persistence.GenerationType;\r\nimport javax.persistence.Id;\r\nimport javax.persistence.JoinColumn;\r\nimport javax.persistence.ManyToOne;\r\n\r\n\r\nimport org.springframework.format.annotation.DateTimeFormat;\r\nimport com.fasterxml.jackson.annotation.JsonIgnoreProperties;\r\n\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Getter;\r\nimport lombok.NoArgsConstructor;\r\nimport lombok.Setter;\r\n\r\n@Entity\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\npublic class Investment \r\n\r\n   {\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n    @Column(name = &quot;AccountNumber&quot;, updatable = false, nullable = false)\r\n    private int accountNumber;\r\n    private String category;\r\n\tprivate BigDecimal principal;\r\n\t//private BigDecimal netInvestmentAmount;\r\n\tprivate BigDecimal currentInterest;\r\n\tprivate BigDecimal maturityInterest;\r\n\tprivate String tenure;\r\n\tprivate String marketer;\r\n\tprivate String investmentPackage;\r\n\t@DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)\r\n\tprivate LocalDate startDate;\r\n\t@DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)\r\n\tprivate LocalDate maturityDate;\r\n\tprivate int rate;\r\n\tprivate final float wht = 10/100;\r\n\tprivate String whtStatus;\r\n\tprivate final float  preLiquidationCharges = 25/100;\r\n\t@Enumerated(EnumType .STRING)\r\n\tprivate InvestmentStatus status;\r\n\t\r\n\t@JsonIgnoreProperties({&quot;hibernateLazyInitializer&quot;, &quot;handler&quot;})\r\n    @ManyToOne(targetEntity = Customer.class, \r\n\tcascade = CascadeType.ALL, fetch = FetchType.LAZY )\r\n\t@JoinColumn(name=&quot;customer_fk_id&quot;) \r\n\tprivate Customer customer_id ;\r\n\r\n```\r\n\r\nThis is the service class containing the business logic for creating investment.\r\n\r\n```\r\npublic Investment CreateInvestment(Investment investment)\r\n       {\r\n        investment.setAccountNumber(nextAccountNumber());\r\n    \tinvestment.setStatus(InvestmentStatus.pending);\r\n    \t return investmentRepository.save(investment);\r\n      }\r\n\r\n```\r\n\r\nThis is the controller class code ,\r\n\r\n```\r\n @PostMapping(value=&quot;/createInvestment&quot;)\r\n    public @ResponseBody Investment CreateInvestment (Investment investment)  \r\n    {\r\n     investmentService.CreateInvestment(investment);\r\n     return investment;\r\n    }\r\n\r\n```\r\n\r\nThis is the request payload on postman send to the endpoint to create investment account. \r\n\r\n```\r\n    {\r\n        &quot;category&quot;: &quot;Corporafe&quot;,\r\n        &quot;principal&quot;:65000,\r\n        &quot;tenure&quot;: &quot;30&quot;,\r\n        &quot;investmentPackage&quot;: &quot;Premium Investment&quot;,\r\n        &quot;rate&quot;: 12,\r\n        &quot;whtStatus&quot;: &quot;Yes&quot;,\r\n         &quot;customer&quot; : {&quot;id&quot;: 14}\r\n       }\r\n\r\n```\r\n\r\nThis is the response payload gotten after making a post request to the endpoint \r\n\r\n```\r\n{\r\n    &quot;id&quot;: 7,\r\n    &quot;accountNumber&quot;: 2021070417,\r\n    &quot;category&quot;: null,\r\n    &quot;principal&quot;: null,\r\n    &quot;currentInterest&quot;: null,\r\n    &quot;maturityInterest&quot;: null,\r\n    &quot;tenure&quot;: null,\r\n    &quot;marketer&quot;: null,\r\n    &quot;investmentPackage&quot;: null,\r\n    &quot;startDate&quot;: null,\r\n    &quot;maturityDate&quot;: null,\r\n    &quot;rate&quot;: 0,\r\n    &quot;wht&quot;: 0.0,\r\n    &quot;whtStatus&quot;: null,\r\n    &quot;preLiquidationCharges&quot;: 0.0,\r\n    &quot;status&quot;: &quot;pending&quot;,\r\n    &quot;customer&quot;: null\r\n}\r\n\r\n```\r\n\r\n**Updated**: this is the repository class \r\n\r\n```\r\n@Repository\r\npublic interface InvestmentRepository extends JpaRepository &lt;Investment, Long&gt;\r\n\r\n {\r\n\t\r\n\tOptional&lt;Investment&gt; findById(Long id);\r\n\t\r\n\tList&lt;Investment&gt; findByStartDateBetween(LocalDate startDate, LocalDate endDate);\r\n\t\r\n\t\r\n\t@Query(&quot;SELECT new com.bethsaida.org.models.InvestmentDTO (c.firstName, c.lastName, c.Address, c.category, c.marketer, &quot;\r\n\t\t\t+ &quot;i.accountNumber, i.principal, i.maturityInterest, i.startDate, i.maturityDate, i.status, i.tenure)&quot;\r\n\t\t\t+ &quot; FROM Investment i JOIN i.customer_id c&quot;)\r\n\tList&lt;InvestmentDTO&gt; getJoinInformation(Long id);\r\n\t \r\n\t\r\n\r\n```\r\n\r\n**Update** I added @RequestBody to the post request arguments . Now the selected fields are being populated but the Customer details response displays null for all fields . \r\n\r\n```\r\n{\r\n    &quot;id&quot;: 17,\r\n    &quot;accountNumber&quot;: 2021070417,\r\n    &quot;category&quot;: &quot;Individual&quot;,\r\n    &quot;principal&quot;: 50000,\r\n    &quot;currentInterest&quot;: null,\r\n    &quot;maturityInterest&quot;: null,\r\n    &quot;tenure&quot;: &quot;30&quot;,\r\n    &quot;marketer&quot;: null,\r\n    &quot;investmentPackage&quot;: &quot;Classic Investment&quot;,\r\n    &quot;startDate&quot;: null,\r\n    &quot;maturityDate&quot;: null,\r\n    &quot;rate&quot;: 12,\r\n    &quot;wht&quot;: 0.1,\r\n    &quot;whtStatus&quot;: &quot;Yes&quot;,\r\n    &quot;preLiquidationCharges&quot;: 0.25,\r\n    &quot;status&quot;: &quot;pending&quot;,\r\n    &quot;customer&quot;: {\r\n        &quot;id&quot;: 13,\r\n        &quot;firstName&quot;: null,\r\n        &quot;lastName&quot;: null,\r\n        &quot;gender&quot;: null,\r\n        &quot;maritalStatus&quot;: null,\r\n        &quot;category&quot;: null,\r\n        &quot;motherMaidenName&quot;: null,\r\n        &quot;idType&quot;: null,\r\n        &quot;idNumber&quot;: null,\r\n        &quot;marketer&quot;: null,\r\n        &quot;phoneNumber&quot;: null,\r\n        &quot;email&quot;: null,\r\n        &quot;dateOfBirth&quot;: null,\r\n        &quot;registrationDate&quot;: null,\r\n        &quot;address&quot;: null\r\n    }\r\n}\r\n\r\n```","title":"Spring Boot POST request to endpoint returning Null values","body":"<p>I am sending the request payload from post man. I want some other fields in the entity to store null value until another action is performed (Activate) but for other fields that I send their values , I get a Null response and for other fields that values set returns 0.0</p>\n<p>This is the model</p>\n<pre><code>import java.math.BigDecimal;\nimport java.time.LocalDate;\n\nimport javax.persistence.CascadeType;\nimport javax.persistence.Column;\nimport javax.persistence.Entity;\nimport javax.persistence.EnumType;\nimport javax.persistence.Enumerated;\nimport javax.persistence.FetchType;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.JoinColumn;\nimport javax.persistence.ManyToOne;\n\n\nimport org.springframework.format.annotation.DateTimeFormat;\nimport com.fasterxml.jackson.annotation.JsonIgnoreProperties;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Getter;\nimport lombok.NoArgsConstructor;\nimport lombok.Setter;\n\n@Entity\n@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Investment \n\n   {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n    @Column(name = &quot;AccountNumber&quot;, updatable = false, nullable = false)\n    private int accountNumber;\n    private String category;\n    private BigDecimal principal;\n    //private BigDecimal netInvestmentAmount;\n    private BigDecimal currentInterest;\n    private BigDecimal maturityInterest;\n    private String tenure;\n    private String marketer;\n    private String investmentPackage;\n    @DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)\n    private LocalDate startDate;\n    @DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)\n    private LocalDate maturityDate;\n    private int rate;\n    private final float wht = 10/100;\n    private String whtStatus;\n    private final float  preLiquidationCharges = 25/100;\n    @Enumerated(EnumType .STRING)\n    private InvestmentStatus status;\n    \n    @JsonIgnoreProperties({&quot;hibernateLazyInitializer&quot;, &quot;handler&quot;})\n    @ManyToOne(targetEntity = Customer.class, \n    cascade = CascadeType.ALL, fetch = FetchType.LAZY )\n    @JoinColumn(name=&quot;customer_fk_id&quot;) \n    private Customer customer_id ;\n\n</code></pre>\n<p>This is the service class containing the business logic for creating investment.</p>\n<pre><code>public Investment CreateInvestment(Investment investment)\n       {\n        investment.setAccountNumber(nextAccountNumber());\n        investment.setStatus(InvestmentStatus.pending);\n         return investmentRepository.save(investment);\n      }\n\n</code></pre>\n<p>This is the controller class code ,</p>\n<pre><code> @PostMapping(value=&quot;/createInvestment&quot;)\n    public @ResponseBody Investment CreateInvestment (Investment investment)  \n    {\n     investmentService.CreateInvestment(investment);\n     return investment;\n    }\n\n</code></pre>\n<p>This is the request payload on postman send to the endpoint to create investment account.</p>\n<pre><code>    {\n        &quot;category&quot;: &quot;Corporafe&quot;,\n        &quot;principal&quot;:65000,\n        &quot;tenure&quot;: &quot;30&quot;,\n        &quot;investmentPackage&quot;: &quot;Premium Investment&quot;,\n        &quot;rate&quot;: 12,\n        &quot;whtStatus&quot;: &quot;Yes&quot;,\n         &quot;customer&quot; : {&quot;id&quot;: 14}\n       }\n\n</code></pre>\n<p>This is the response payload gotten after making a post request to the endpoint</p>\n<pre><code>{\n    &quot;id&quot;: 7,\n    &quot;accountNumber&quot;: 2021070417,\n    &quot;category&quot;: null,\n    &quot;principal&quot;: null,\n    &quot;currentInterest&quot;: null,\n    &quot;maturityInterest&quot;: null,\n    &quot;tenure&quot;: null,\n    &quot;marketer&quot;: null,\n    &quot;investmentPackage&quot;: null,\n    &quot;startDate&quot;: null,\n    &quot;maturityDate&quot;: null,\n    &quot;rate&quot;: 0,\n    &quot;wht&quot;: 0.0,\n    &quot;whtStatus&quot;: null,\n    &quot;preLiquidationCharges&quot;: 0.0,\n    &quot;status&quot;: &quot;pending&quot;,\n    &quot;customer&quot;: null\n}\n\n</code></pre>\n<p><strong>Updated</strong>: this is the repository class</p>\n<pre><code>@Repository\npublic interface InvestmentRepository extends JpaRepository &lt;Investment, Long&gt;\n\n {\n    \n    Optional&lt;Investment&gt; findById(Long id);\n    \n    List&lt;Investment&gt; findByStartDateBetween(LocalDate startDate, LocalDate endDate);\n    \n    \n    @Query(&quot;SELECT new com.bethsaida.org.models.InvestmentDTO (c.firstName, c.lastName, c.Address, c.category, c.marketer, &quot;\n            + &quot;i.accountNumber, i.principal, i.maturityInterest, i.startDate, i.maturityDate, i.status, i.tenure)&quot;\n            + &quot; FROM Investment i JOIN i.customer_id c&quot;)\n    List&lt;InvestmentDTO&gt; getJoinInformation(Long id);\n     \n    \n\n</code></pre>\n<p><strong>Update</strong> I added @RequestBody to the post request arguments . Now the selected fields are being populated but the Customer details response displays null for all fields .</p>\n<pre><code>{\n    &quot;id&quot;: 17,\n    &quot;accountNumber&quot;: 2021070417,\n    &quot;category&quot;: &quot;Individual&quot;,\n    &quot;principal&quot;: 50000,\n    &quot;currentInterest&quot;: null,\n    &quot;maturityInterest&quot;: null,\n    &quot;tenure&quot;: &quot;30&quot;,\n    &quot;marketer&quot;: null,\n    &quot;investmentPackage&quot;: &quot;Classic Investment&quot;,\n    &quot;startDate&quot;: null,\n    &quot;maturityDate&quot;: null,\n    &quot;rate&quot;: 12,\n    &quot;wht&quot;: 0.1,\n    &quot;whtStatus&quot;: &quot;Yes&quot;,\n    &quot;preLiquidationCharges&quot;: 0.25,\n    &quot;status&quot;: &quot;pending&quot;,\n    &quot;customer&quot;: {\n        &quot;id&quot;: 13,\n        &quot;firstName&quot;: null,\n        &quot;lastName&quot;: null,\n        &quot;gender&quot;: null,\n        &quot;maritalStatus&quot;: null,\n        &quot;category&quot;: null,\n        &quot;motherMaidenName&quot;: null,\n        &quot;idType&quot;: null,\n        &quot;idNumber&quot;: null,\n        &quot;marketer&quot;: null,\n        &quot;phoneNumber&quot;: null,\n        &quot;email&quot;: null,\n        &quot;dateOfBirth&quot;: null,\n        &quot;registrationDate&quot;: null,\n        &quot;address&quot;: null\n    }\n}\n\n</code></pre>\n"},{"tags":["java","file","kotlin","directory","path"],"answers":[{"tags":[],"owner":{"account_id":6413418,"reputation":6740,"user_id":4972317,"display_name":"Anisuzzaman Babla"},"down_vote_count":1,"up_vote_count":26,"is_accepted":true,"score":25,"last_activity_date":1616527705,"creation_date":1601639683,"answer_id":64171105,"question_id":64171104,"body_markdown":"This will provide the full absolute path from where application will run.\r\n    \r\n    import java.nio.file.Paths\r\n\r\n    val path = Paths.get(&quot;&quot;).toAbsolutePath().toString()       \r\n","title":"How to get the current working directory in Kotlin?","body":"<p>This will provide the full absolute path from where application will run.</p>\n<pre><code>import java.nio.file.Paths\n\nval path = Paths.get(&quot;&quot;).toAbsolutePath().toString()       \n</code></pre>\n"},{"tags":[],"owner":{"account_id":8402782,"reputation":122,"user_id":9655365,"display_name":"d1Master"},"down_vote_count":2,"up_vote_count":10,"is_accepted":false,"score":8,"last_activity_date":1601640123,"creation_date":1601640123,"answer_id":64171210,"question_id":64171104,"body_markdown":"You can also get it from System.\r\n\r\n    val path = System.getProperty(&quot;user.dir&quot;)\r\n\r\n","title":"How to get the current working directory in Kotlin?","body":"<p>You can also get it from System.</p>\n<pre><code>val path = System.getProperty(&quot;user.dir&quot;)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16233274,"reputation":171,"user_id":11721393,"display_name":"Marcos Narvaez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634422843,"creation_date":1632098841,"answer_id":69248107,"question_id":64171104,"body_markdown":"If you are working with kotlin on android try with:\r\n\r\n\r\n**Kotlin**\r\n\r\n    applicationInfo.dataDir\r\n\r\nif you are working on android using **Java.**\r\n\r\n    getApplicationInfo().dataDir\r\n\r\nit returns a String.","title":"How to get the current working directory in Kotlin?","body":"<p>If you are working with kotlin on android try with:</p>\n<p><strong>Kotlin</strong></p>\n<pre><code>applicationInfo.dataDir\n</code></pre>\n<p>if you are working on android using <strong>Java.</strong></p>\n<pre><code>getApplicationInfo().dataDir\n</code></pre>\n<p>it returns a String.</p>\n"}],"owner":{"account_id":6413418,"reputation":6740,"user_id":4972317,"display_name":"Anisuzzaman Babla"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14836,"favorite_count":0,"down_vote_count":0,"up_vote_count":25,"accepted_answer_id":64171105,"answer_count":3,"score":25,"last_activity_date":1634422843,"creation_date":1601639683,"question_id":64171104,"body_markdown":"I need to know the full path of my current working directory of my simple application using Kotlin.","title":"How to get the current working directory in Kotlin?","body":"<p>I need to know the full path of my current working directory of my simple application using Kotlin.</p>\n"},{"tags":["java","math"],"answers":[{"tags":[],"owner":{"account_id":16477377,"reputation":1551,"user_id":12283863,"display_name":"Rawley Fowler"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634422157,"creation_date":1634422157,"answer_id":69599893,"question_id":69599694,"body_markdown":"    while( i++ &lt;= n )\r\n\r\nWas causing an issue, as it was doing an extra iteration.\r\n\r\n    while( i++ &lt; n )\r\n\r\nProduces the correct values.","title":"Why is my trapezoid rule implementation not producing expected results?","body":"<pre><code>while( i++ &lt;= n )\n</code></pre>\n<p>Was causing an issue, as it was doing an extra iteration.</p>\n<pre><code>while( i++ &lt; n )\n</code></pre>\n<p>Produces the correct values.</p>\n"},{"tags":[],"owner":{"account_id":61566,"reputation":68924,"user_id":183406,"accept_rate":74,"display_name":"meriton"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1634422276,"creation_date":1634422276,"answer_id":69599908,"question_id":69599694,"body_markdown":"If you step through trapezoidRule for n = 1 in a debugger, you&#39;ll see that the loop is executed for i=1 and i=2. Since i=2 is treated as a midpoint, it is counted twice.\r\n\r\nWhy is the loop executed for wrong values of i? The expression `i++` uses the post-increment operator, which increments the variable after returning its  value. You should be using a pre-increment operator `++i`, or a for loop like any sane person:\r\n\r\n    for (double i = 0; i &lt;= n; i++) {\r\n\r\n\r\n","title":"Why is my trapezoid rule implementation not producing expected results?","body":"<p>If you step through trapezoidRule for n = 1 in a debugger, you'll see that the loop is executed for i=1 and i=2. Since i=2 is treated as a midpoint, it is counted twice.</p>\n<p>Why is the loop executed for wrong values of i? The expression <code>i++</code> uses the post-increment operator, which increments the variable after returning its  value. You should be using a pre-increment operator <code>++i</code>, or a for loop like any sane person:</p>\n<pre><code>for (double i = 0; i &lt;= n; i++) {\n</code></pre>\n"}],"owner":{"account_id":16477377,"reputation":1551,"user_id":12283863,"display_name":"Rawley Fowler"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69599908,"answer_count":2,"score":0,"last_activity_date":1634422276,"creation_date":1634419923,"question_id":69599694,"body_markdown":"I have implemented a function to find the [trapezoid rule][1] of a given function, the function produces poor results for\r\n \r\n![\\log _{2}(x)](https://chart.googleapis.com/chart?cht=tx&amp;chl=f(x)=\\log%20_{2}(x)). \r\n\r\nWhen I try to calculate the trapezoid rule with `n &lt; 8` it produces a value much larger than the actual area, which is unexpected, I have graphed f(x) and drawn how I believe the first few numbers of trapezoids would look, and they all should be producing less than the target area.\r\n\r\nHowever, as `n` increases, the error becomes lower and lower and at `n = 10000000` it is within a 0.001 of the solution.\r\n\r\n      private interface MathFunc {\r\n        double apply(double value);\r\n      }\r\n      private static final double A = 1;\r\n      private static final double B = 9;\r\n      public static void main(String args[]) {\r\n        MathFunc func = (x) -&gt; Math.log(x) / Math.log(2);\r\n        double realValue = 16.98776493946568;\r\n        for(int i = 1; i &lt;= 8; i*=2) {\r\n          double value = trapezoidRule(A, B, func, i);\r\n          System.out.println(i + &quot; Trapezoid Summation for f(x): &quot; + value);\r\n          double absError = Math.abs(value - realValue);\r\n          System.out.println(&quot;Abs Error: &quot; + absError);\r\n          System.out.println(&quot;% Error: &quot; + (absError/realValue)*100);\r\n          System.out.println();\r\n        }\r\n      }\r\n      static double trapezoidRule(double a, double b, MathFunc f, double n) {\r\n        double deltaX = (b-a)/n;\r\n        double i = 0;\r\n        double sum = 0.0;\r\n        while( i++ &lt;= n ) {\r\n          if(i == 0 || i == n) {\r\n            sum += f.apply(a + (i*deltaX));\r\n          } else {\r\n            sum += 2 * f.apply(a + (i*deltaX));\r\n          }\r\n        }\r\n        return (deltaX * sum) / 2.0;\r\n      }\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Trapezoidal_rule\r\n","title":"Why is my trapezoid rule implementation not producing expected results?","body":"<p>I have implemented a function to find the <a href=\"https://en.wikipedia.org/wiki/Trapezoidal_rule\" rel=\"nofollow noreferrer\">trapezoid rule</a> of a given function, the function produces poor results for</p>\n<p><img src=\"https://chart.googleapis.com/chart?cht=tx&amp;chl=f(x)=%5Clog%20_%7B2%7D(x)\" alt=\"\\log _{2}(x)\" />.</p>\n<p>When I try to calculate the trapezoid rule with <code>n &lt; 8</code> it produces a value much larger than the actual area, which is unexpected, I have graphed f(x) and drawn how I believe the first few numbers of trapezoids would look, and they all should be producing less than the target area.</p>\n<p>However, as <code>n</code> increases, the error becomes lower and lower and at <code>n = 10000000</code> it is within a 0.001 of the solution.</p>\n<pre><code>  private interface MathFunc {\n    double apply(double value);\n  }\n  private static final double A = 1;\n  private static final double B = 9;\n  public static void main(String args[]) {\n    MathFunc func = (x) -&gt; Math.log(x) / Math.log(2);\n    double realValue = 16.98776493946568;\n    for(int i = 1; i &lt;= 8; i*=2) {\n      double value = trapezoidRule(A, B, func, i);\n      System.out.println(i + &quot; Trapezoid Summation for f(x): &quot; + value);\n      double absError = Math.abs(value - realValue);\n      System.out.println(&quot;Abs Error: &quot; + absError);\n      System.out.println(&quot;% Error: &quot; + (absError/realValue)*100);\n      System.out.println();\n    }\n  }\n  static double trapezoidRule(double a, double b, MathFunc f, double n) {\n    double deltaX = (b-a)/n;\n    double i = 0;\n    double sum = 0.0;\n    while( i++ &lt;= n ) {\n      if(i == 0 || i == n) {\n        sum += f.apply(a + (i*deltaX));\n      } else {\n        sum += 2 * f.apply(a + (i*deltaX));\n      }\n    }\n    return (deltaX * sum) / 2.0;\n  }\n</code></pre>\n"},{"tags":["java","spring","spring-boot","api","spring-security"],"answers":[{"tags":[],"owner":{"account_id":16221044,"reputation":331,"user_id":11712575,"display_name":"Jason Chan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634420546,"creation_date":1634420546,"answer_id":69599758,"question_id":69563554,"body_markdown":"When declaring your repository, use the annotation \r\n   \r\n\r\n     @RestRepositoryResource(exported = false)\r\n\r\ninstead of `@RestRepositoryResource`. This will hide your entities and all direct links to them from being exposed.","title":"Hiding Profiles and Entity Data on Exposed API","body":"<p>When declaring your repository, use the annotation</p>\n<pre><code> @RestRepositoryResource(exported = false)\n</code></pre>\n<p>instead of <code>@RestRepositoryResource</code>. This will hide your entities and all direct links to them from being exposed.</p>\n"}],"owner":{"account_id":16221044,"reputation":331,"user_id":11712575,"display_name":"Jason Chan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":110,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1634420546,"creation_date":1634168724,"question_id":69563554,"body_markdown":"I am relatively new to spring boot, and recently, I noticed that going to my URL API will allow anyone to access all my entities and entity profiles.\r\n\r\nFor example going to `api.example.com/exampleEntity` (replace example.com with my personal site) will list all entities that exist in my DB, and going to `api.example.com/profile/exampleEntity` will display all of the outputs. Furthermore, going to `api.example.com` will show a output like this:\r\n\r\n        {\r\n      &quot;_links&quot; : {\r\n        &quot;testEntities&quot; : {\r\n          &quot;href&quot; : &quot;http://*redacted*:8080/testEntities&quot;\r\n        }\r\n      }\r\n    }\r\n\r\n\r\nNow obviously, I don&#39;t need to state why that might be a bad idea. How do we hide this, and are there any other exposed endpoints that spring opens that I should know about?\r\n\r\nThanks!","title":"Hiding Profiles and Entity Data on Exposed API","body":"<p>I am relatively new to spring boot, and recently, I noticed that going to my URL API will allow anyone to access all my entities and entity profiles.</p>\n<p>For example going to <code>api.example.com/exampleEntity</code> (replace example.com with my personal site) will list all entities that exist in my DB, and going to <code>api.example.com/profile/exampleEntity</code> will display all of the outputs. Furthermore, going to <code>api.example.com</code> will show a output like this:</p>\n<pre><code>    {\n  &quot;_links&quot; : {\n    &quot;testEntities&quot; : {\n      &quot;href&quot; : &quot;http://*redacted*:8080/testEntities&quot;\n    }\n  }\n}\n</code></pre>\n<p>Now obviously, I don't need to state why that might be a bad idea. How do we hide this, and are there any other exposed endpoints that spring opens that I should know about?</p>\n<p>Thanks!</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1223835,"reputation":75858,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1634420607,"post_id":69599681,"comment_id":123021130,"body_markdown":"The error will tell you, _very specifically_, what the mismatch is.","body":"The error will tell you, <i>very specifically</i>, what the mismatch is."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1634419978,"creation_date":1634419978,"answer_id":69599703,"question_id":69599681,"body_markdown":"Your link method has 2 arguments: When invoking `link`, you need to provide [A] a Scanner instance, and [B] an instance of an array of Strings.\r\n\r\nWhen you call `link();`, you provide neither of those. Presumably you want `link(kb, args);` there. Your main __must__ look like:\r\n\r\n```\r\npublic static void main(String[] args)\r\n```\r\n\r\nit currently doesn&#39;t. Once you fix that, voila, you have your `args`. But, you should just get rid of that, you don&#39;t use it anywhere in `link`.","title":"Why am I getting an error for actual and formal argument lists differ in length?","body":"<p>Your link method has 2 arguments: When invoking <code>link</code>, you need to provide [A] a Scanner instance, and [B] an instance of an array of Strings.</p>\n<p>When you call <code>link();</code>, you provide neither of those. Presumably you want <code>link(kb, args);</code> there. Your main <strong>must</strong> look like:</p>\n<pre><code>public static void main(String[] args)\n</code></pre>\n<p>it currently doesn't. Once you fix that, voila, you have your <code>args</code>. But, you should just get rid of that, you don't use it anywhere in <code>link</code>.</p>\n"}],"owner":{"account_id":23054324,"reputation":3,"user_id":17170592,"display_name":"ethanm831"},"comment_count":1,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1634436261,"accepted_answer_id":69599703,"answer_count":1,"score":-3,"last_activity_date":1634419978,"creation_date":1634419752,"question_id":69599681,"body_markdown":"Trying to make it so pasting a 60 character long url, will print only the first 56 characters. I have only ever used Java in high school, so I am very inexperienced.\r\n    import java.util.Scanner;\r\n\r\n    public class CopyOfCopyOfethanrun\r\n    {\r\n    public static void main()\r\n    {\r\n        Scanner kb = new Scanner(System.in);\r\n        link();\r\n    }\r\n    \r\n    static void link(Scanner kb, String[] args)\r\n    {\r\n        String link;\r\n\r\n        System.out.print(&quot;\\n\\n Enter Link: &quot;);\r\n        link = kb.nextLine();\r\n        \r\n        String input = link;\r\n        String firstfiftysix = &quot;&quot;;\r\n        \r\n            if (input.length() &gt; 56) \r\n            {firstfiftysix = input.substring(0, 56);} \r\n            else{firstfiftysix = input;\r\n            }\r\n            System.out.println(firstfiftysix);\r\n        }\r\n    }\r\n[Here is an image showing the error I am experiencing][1]\r\n  [1]: https://i.stack.imgur.com/T6ux7.png","title":"Why am I getting an error for actual and formal argument lists differ in length?","body":"<p>Trying to make it so pasting a 60 character long url, will print only the first 56 characters. I have only ever used Java in high school, so I am very inexperienced.\nimport java.util.Scanner;</p>\n<pre><code>public class CopyOfCopyOfethanrun\n{\npublic static void main()\n{\n    Scanner kb = new Scanner(System.in);\n    link();\n}\n\nstatic void link(Scanner kb, String[] args)\n{\n    String link;\n\n    System.out.print(&quot;\\n\\n Enter Link: &quot;);\n    link = kb.nextLine();\n    \n    String input = link;\n    String firstfiftysix = &quot;&quot;;\n    \n        if (input.length() &gt; 56) \n        {firstfiftysix = input.substring(0, 56);} \n        else{firstfiftysix = input;\n        }\n        System.out.println(firstfiftysix);\n    }\n}\n</code></pre>\n<p>[Here is an image showing the error I am experiencing][1]\n[1]: https://i.stack.imgur.com/T6ux7.png</p>\n"},{"tags":["java","activemq"],"answers":[{"tags":[],"owner":{"account_id":6664321,"reputation":203,"user_id":5142392,"display_name":"Pradeep Bogati"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1454214418,"creation_date":1454214418,"answer_id":35110333,"question_id":35107216,"body_markdown":"Seems like you are trying to access the page without logging in. \r\nTo log in: \r\nGo to localhost:portNo/admin    portNo= 8161 if not modified\r\nYou will be prompted with login popup\r\nusername: admin\r\npassword: admin\r\nThe above are the default values.\r\nIf it&#39;s wrong, have a look at conf/jetty-realm.properties file.\r\n\r\nHope it helped.\r\n\r\n\r\n\r\n","title":"Unable to access ActiveMQ admin page /admin/. Reason: Unauthorized","body":"<p>Seems like you are trying to access the page without logging in. \nTo log in: \nGo to localhost:portNo/admin    portNo= 8161 if not modified\nYou will be prompted with login popup\nusername: admin\npassword: admin\nThe above are the default values.\nIf it's wrong, have a look at conf/jetty-realm.properties file.</p>\n\n<p>Hope it helped.</p>\n"},{"tags":[],"owner":{"account_id":4980167,"reputation":691,"user_id":4005400,"accept_rate":67,"display_name":"JavaQuest"},"down_vote_count":2,"up_vote_count":10,"is_accepted":true,"score":8,"last_activity_date":1454362306,"creation_date":1454362306,"answer_id":35140731,"question_id":35107216,"body_markdown":"It Turned out to be Browser issue.\r\nIt worked on Internet Explorer and not on Chrome","title":"Unable to access ActiveMQ admin page /admin/. Reason: Unauthorized","body":"<p>It Turned out to be Browser issue.\nIt worked on Internet Explorer and not on Chrome</p>\n"},{"tags":[],"owner":{"account_id":8565702,"reputation":31,"user_id":6418239,"display_name":"Mayur Saswade"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634419949,"creation_date":1634419949,"answer_id":69599699,"question_id":35107216,"body_markdown":"I am using apache activemq version 5.16.3. And on my machine It did work on chrome/internet explorer but not on edge.","title":"Unable to access ActiveMQ admin page /admin/. Reason: Unauthorized","body":"<p>I am using apache activemq version 5.16.3. And on my machine It did work on chrome/internet explorer but not on edge.</p>\n"}],"owner":{"account_id":4980167,"reputation":691,"user_id":4005400,"accept_rate":67,"display_name":"JavaQuest"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7652,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":35140731,"answer_count":3,"score":3,"last_activity_date":1634419949,"creation_date":1454188579,"question_id":35107216,"body_markdown":"I am trying to follow tutorial for ActiveMQ. \r\nAfter starting ActiveMQ from command prompt using **activemq-admin.bat start**\r\nI am trying to access http://localhost:8161/admin/  to create new queues, but it throws me an error.  (I can access http://localhost:8161/)\r\n\r\n    HTTP ERROR: 401\r\n    Problem accessing /admin/index.jsp. Reason:\r\n    Unauthorized\r\nCan anyone please suggest me any solution for it?","title":"Unable to access ActiveMQ admin page /admin/. Reason: Unauthorized","body":"<p>I am trying to follow tutorial for ActiveMQ. \nAfter starting ActiveMQ from command prompt using <strong>activemq-admin.bat start</strong>\nI am trying to access <a href=\"http://localhost:8161/admin/\" rel=\"nofollow\">http://localhost:8161/admin/</a>  to create new queues, but it throws me an error.  (I can access <a href=\"http://localhost:8161/\" rel=\"nofollow\">http://localhost:8161/</a>)</p>\n\n<pre><code>HTTP ERROR: 401\nProblem accessing /admin/index.jsp. Reason:\nUnauthorized\n</code></pre>\n\n<p>Can anyone please suggest me any solution for it?</p>\n"},{"tags":["java","netty"],"answers":[{"tags":[],"owner":{"account_id":1075943,"reputation":23262,"user_id":1074097,"display_name":"Norman Maurer"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1609319933,"creation_date":1329817329,"answer_id":9375233,"question_id":9374284,"body_markdown":"The difference is that one handles incoming (upstream) and the other outgoing (downstream). \r\nI think the event/message flow gets more clear after looking at the javadoc of [`ChannelPipeline`][1].\r\n\r\nI should also note that upstream events will only get triggered by the IO-Thread so there is no need to synchronize field access in there if you use a new `ChannelUpstreamHandler` per `ChannelPipeline`. Downstream events can be triggered by any thread, so access to fields needs to be synchronized.\r\n\r\n\r\n  [1]: http://netty.io/4.0/api/io/netty/channel/ChannelPipeline.html","title":"How does upstream and downstream handlers work in Netty?","body":"<p>The difference is that one handles incoming (upstream) and the other outgoing (downstream).\nI think the event/message flow gets more clear after looking at the javadoc of <a href=\"http://netty.io/4.0/api/io/netty/channel/ChannelPipeline.html\" rel=\"nofollow noreferrer\"><code>ChannelPipeline</code></a>.</p>\n<p>I should also note that upstream events will only get triggered by the IO-Thread so there is no need to synchronize field access in there if you use a new <code>ChannelUpstreamHandler</code> per <code>ChannelPipeline</code>. Downstream events can be triggered by any thread, so access to fields needs to be synchronized.</p>\n"},{"tags":[],"owner":{"account_id":7130835,"reputation":590,"user_id":5452132,"display_name":"yugandhar"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1634417935,"creation_date":1515262335,"answer_id":48130353,"question_id":9374284,"body_markdown":"# Theoretical information\r\nI think the ideas are being derived from network stacks.\r\nNetty&#39;s *handler-pipeline* analogy is similar to OSI Network layer-stack. Take a look into how OSI network layer look like:\r\n[![enter image description here][1]][1]\r\n\r\n\r\nThink each *handler* as &#39;one layer&#39;, whole *pipeline* as &#39;one network stack&#39;, physical link as &#39;IO source&#39; and User as &#39;application logic handler&#39;. Using the same pipeline (stack), we need to do two functionalities:\r\n\r\n 1. Transmit data (**send data down**, when &#39;application logic handler&#39; want to do something through &#39;IO source&#39;)\r\n 2. Receive data (**send data up**, when &#39;IO source&#39; has some event, which might be interest of &#39;application logic handler&#39;).\r\n\r\nSo essentially same *pipeline* has to do two different things (receive the messages and send the messages back).\r\n\r\n---\r\n# Practical example\r\nLet&#39;s consider a concrete example (a server with authentication and encryption), with 3 *handlers* making up a *pipeline*:\r\n[![Example Netty pipeline with 3 handlers][2]][2]\r\n \r\nLet&#39;s look at responsibility of each in-terms of receiving the messages\r\n\r\n 1. Encryption handler --&gt; needs to receive `UpstreamEvent` from &#39;IO Source&#39; and `DownstreamEvent` from &#39;Application Handler&#39; or &#39;Auth Handler&#39; in the above flows. \r\n 2. Auth handler --&gt; needs to receive `UpstreamEvent` only from &#39;Encryption handler&#39;.\r\n 3. Application handler --&gt;  needs to receive `UpstreamEvent` from &#39;Auth Handler&#39; only.\r\n\r\nSo, logically, each handler has to implement the following:\r\n\r\n 1. Encryption handler --&gt; `ChannelUpstreamHandler` and `ChannelDownstreamHandler`\r\n 2. Auth handler --&gt; `ChannelUpstreamHandler`\r\n 3. Application handler --&gt; `ChannelUpstreamHandler`\r\n\r\nSo If you have a `ChannelPipeline`, with 3 handlers mentioned above, \r\n\r\n - For incoming message: &#39;IO source&#39;(0) initiates `UpstreamEvent` and Netty will forward the `UpstreamEvent` to (1) then (2) then optionally (3), since all 3 have implemented `ChannelUpstreamHandler`.\r\n - When &#39;Application handler&#39;(3) / &#39;Auth Handler&#39;(2), wants to send status message back to client, then it&#39;ll initiate with `write` call (which creates `DownstreamEvent`). Netty will forward the `DownstreamEvent` to (1) (which is only one, before (3) and implemented `ChannelDownstreamHandler`).\r\n\r\nSo given the *pipeline* with *handlers*, when an `UpstreamEvent` is created (by &#39;IO source&#39;), Netty will call all handlers in the pipeline in sequence from 1 to n,  which have implemented `ChannelUpstreamHandler` (*n* is number of handlers, in the above example *n* = 3). And when a `DownstreamEvent` is created (by user application code), Netty will call all handlers in the pipeline in sequence from *n* to *1*, which have implemented `ChannelDownstreamHandler`.\r\n\r\nSince a class can implement two interfaces, a handler can be both `ChannelUpstreamHandler` and `ChannelDownstreamHandler`. Please note that all `UpstreamEvent` are created by &#39;IO Source&#39; and all `DownstreamEvent` are created by user application logic.\r\n\r\n---\r\n# Examples of channel events\r\nExamples of `UpstreamEvent`:\r\n\r\n 1. message received\r\n 2. channel opened\r\n 3. channel closed\r\n 4. exception raised by &#39;IO source&#39;\r\n 5. write completed by &#39;IO source&#39;\r\n 6. channel disconnected\r\n 7. ...\r\n\r\nExamples of `DownstreamEvent`:\r\n\r\n 1. Write a message to channel\r\n 2. Bind to a port\r\n 3. connect to server address \r\n 4. ...\r\n\r\nHope it&#39;ll help you to answer &quot;Why do we need two behaviours for handlers (upstream and downstream)&quot;, &quot;How Netty solves the sending and receiving through `Downstream` and `Upstream`&quot; and &quot;How can we really use the constructs in real world application&quot;.\r\n\r\n*Your answer ends here, for extra content, you can continue below.*\r\n\r\n--- \r\n### Regarding the above presented *handlers*\r\nLet&#39;s look at responsibility of each of the above presented *handlers* in terms of forwarding the messages:\r\n\r\n 1. *Application handler* --&gt; needs to forward messages to previous layers (should call `ctx.sendDownstream(e)` implicitly or explicitly)\r\n 2. *Auth handler* --&gt; needs to forward messages to previous layers (for auth failure) and to next layers (for auth success). (should call `ctx.sendDownstream(e)` and `ctx.sendUpstream(e)` implicitly or explicitly)\r\n 3. *Encryption handler* --&gt; needs to forward message to previous layers and next layers (should call `ctx.sendDownstream(e)` and `ctx.sendUpstream(e)` implicitly or explicitly).\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ED6St.jpg\r\n  [2]: https://i.stack.imgur.com/tHq8V.jpg","title":"How does upstream and downstream handlers work in Netty?","body":"<h1>Theoretical information</h1>\n<p>I think the ideas are being derived from network stacks.\nNetty's <em>handler-pipeline</em> analogy is similar to OSI Network layer-stack. Take a look into how OSI network layer look like:\n<a href=\"https://i.stack.imgur.com/ED6St.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ED6St.jpg\" alt=\"enter image description here\" /></a></p>\n<p>Think each <em>handler</em> as 'one layer', whole <em>pipeline</em> as 'one network stack', physical link as 'IO source' and User as 'application logic handler'. Using the same pipeline (stack), we need to do two functionalities:</p>\n<ol>\n<li>Transmit data (<strong>send data down</strong>, when 'application logic handler' want to do something through 'IO source')</li>\n<li>Receive data (<strong>send data up</strong>, when 'IO source' has some event, which might be interest of 'application logic handler').</li>\n</ol>\n<p>So essentially same <em>pipeline</em> has to do two different things (receive the messages and send the messages back).</p>\n<hr />\n<h1>Practical example</h1>\n<p>Let's consider a concrete example (a server with authentication and encryption), with 3 <em>handlers</em> making up a <em>pipeline</em>:\n<a href=\"https://i.stack.imgur.com/tHq8V.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tHq8V.jpg\" alt=\"Example Netty pipeline with 3 handlers\" /></a></p>\n<p>Let's look at responsibility of each in-terms of receiving the messages</p>\n<ol>\n<li>Encryption handler --&gt; needs to receive <code>UpstreamEvent</code> from 'IO Source' and <code>DownstreamEvent</code> from 'Application Handler' or 'Auth Handler' in the above flows.</li>\n<li>Auth handler --&gt; needs to receive <code>UpstreamEvent</code> only from 'Encryption handler'.</li>\n<li>Application handler --&gt;  needs to receive <code>UpstreamEvent</code> from 'Auth Handler' only.</li>\n</ol>\n<p>So, logically, each handler has to implement the following:</p>\n<ol>\n<li>Encryption handler --&gt; <code>ChannelUpstreamHandler</code> and <code>ChannelDownstreamHandler</code></li>\n<li>Auth handler --&gt; <code>ChannelUpstreamHandler</code></li>\n<li>Application handler --&gt; <code>ChannelUpstreamHandler</code></li>\n</ol>\n<p>So If you have a <code>ChannelPipeline</code>, with 3 handlers mentioned above,</p>\n<ul>\n<li>For incoming message: 'IO source'(0) initiates <code>UpstreamEvent</code> and Netty will forward the <code>UpstreamEvent</code> to (1) then (2) then optionally (3), since all 3 have implemented <code>ChannelUpstreamHandler</code>.</li>\n<li>When 'Application handler'(3) / 'Auth Handler'(2), wants to send status message back to client, then it'll initiate with <code>write</code> call (which creates <code>DownstreamEvent</code>). Netty will forward the <code>DownstreamEvent</code> to (1) (which is only one, before (3) and implemented <code>ChannelDownstreamHandler</code>).</li>\n</ul>\n<p>So given the <em>pipeline</em> with <em>handlers</em>, when an <code>UpstreamEvent</code> is created (by 'IO source'), Netty will call all handlers in the pipeline in sequence from 1 to n,  which have implemented <code>ChannelUpstreamHandler</code> (<em>n</em> is number of handlers, in the above example <em>n</em> = 3). And when a <code>DownstreamEvent</code> is created (by user application code), Netty will call all handlers in the pipeline in sequence from <em>n</em> to <em>1</em>, which have implemented <code>ChannelDownstreamHandler</code>.</p>\n<p>Since a class can implement two interfaces, a handler can be both <code>ChannelUpstreamHandler</code> and <code>ChannelDownstreamHandler</code>. Please note that all <code>UpstreamEvent</code> are created by 'IO Source' and all <code>DownstreamEvent</code> are created by user application logic.</p>\n<hr />\n<h1>Examples of channel events</h1>\n<p>Examples of <code>UpstreamEvent</code>:</p>\n<ol>\n<li>message received</li>\n<li>channel opened</li>\n<li>channel closed</li>\n<li>exception raised by 'IO source'</li>\n<li>write completed by 'IO source'</li>\n<li>channel disconnected</li>\n<li>...</li>\n</ol>\n<p>Examples of <code>DownstreamEvent</code>:</p>\n<ol>\n<li>Write a message to channel</li>\n<li>Bind to a port</li>\n<li>connect to server address</li>\n<li>...</li>\n</ol>\n<p>Hope it'll help you to answer &quot;Why do we need two behaviours for handlers (upstream and downstream)&quot;, &quot;How Netty solves the sending and receiving through <code>Downstream</code> and <code>Upstream</code>&quot; and &quot;How can we really use the constructs in real world application&quot;.</p>\n<p><em>Your answer ends here, for extra content, you can continue below.</em></p>\n<hr />\n<h3>Regarding the above presented <em>handlers</em></h3>\n<p>Let's look at responsibility of each of the above presented <em>handlers</em> in terms of forwarding the messages:</p>\n<ol>\n<li><em>Application handler</em> --&gt; needs to forward messages to previous layers (should call <code>ctx.sendDownstream(e)</code> implicitly or explicitly)</li>\n<li><em>Auth handler</em> --&gt; needs to forward messages to previous layers (for auth failure) and to next layers (for auth success). (should call <code>ctx.sendDownstream(e)</code> and <code>ctx.sendUpstream(e)</code> implicitly or explicitly)</li>\n<li><em>Encryption handler</em> --&gt; needs to forward message to previous layers and next layers (should call <code>ctx.sendDownstream(e)</code> and <code>ctx.sendUpstream(e)</code> implicitly or explicitly).</li>\n</ol>\n"}],"owner":{"account_id":1036940,"reputation":647,"user_id":1043937,"accept_rate":75,"display_name":"Pradeep"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6691,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1634417935,"creation_date":1329812792,"question_id":9374284,"body_markdown":"I&#39;m new to [Netty][1] and don&#39;t really understand the flow of handlers in it. What I want to know is the difference between the `Upstream` and `Downstream` handlers.\r\n\r\n - Why can&#39;t we intercept the message in downstream handlers as we do in\r\n   upstream?\r\n - Do downstream and upstream mean the same as in normal terms?\r\n\r\n  [1]: https://netty.io/","title":"How does upstream and downstream handlers work in Netty?","body":"<p>I'm new to <a href=\"https://netty.io/\" rel=\"nofollow noreferrer\">Netty</a> and don't really understand the flow of handlers in it. What I want to know is the difference between the <code>Upstream</code> and <code>Downstream</code> handlers.</p>\n<ul>\n<li>Why can't we intercept the message in downstream handlers as we do in\nupstream?</li>\n<li>Do downstream and upstream mean the same as in normal terms?</li>\n</ul>\n"},{"tags":["java","android","firebase","firebase-realtime-database"],"comments":[{"owner":{"account_id":22450291,"reputation":364,"user_id":16653700,"display_name":"Alias Cartellano"},"score":0,"creation_date":1634419930,"post_id":69599469,"comment_id":123021020,"body_markdown":"I think Frank is right about his suggestions, but if you wanted to you could use **cloud functions** to change the data automatically.","body":"I think Frank is right about his suggestions, but if you wanted to you could use <b>cloud functions</b> to change the data automatically."}],"answers":[{"tags":[],"owner":{"account_id":72426,"reputation":573714,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1634417793,"creation_date":1634417793,"answer_id":69599496,"question_id":69599469,"body_markdown":"The Firebase database, console, and SDK have no functionality built in to modify your data. That&#39;s typically task that is left to your application code. For example: https://stackoverflow.com/questions/39343522/how-to-display-formatted-amounts-in-textview\r\n\r\nI&#39;d also recommend storing the values as numbers instead of (as you now show in your question) as strings. Storing the numeric values as a numeric type makes it easier to manipulate them and sort on them.","title":"How to add spaces in a Firebase Database value","body":"<p>The Firebase database, console, and SDK have no functionality built in to modify your data. That's typically task that is left to your application code. For example: <a href=\"https://stackoverflow.com/questions/39343522/how-to-display-formatted-amounts-in-textview\">How to display formatted amounts in TextView?</a></p>\n<p>I'd also recommend storing the values as numbers instead of (as you now show in your question) as strings. Storing the numeric values as a numeric type makes it easier to manipulate them and sort on them.</p>\n"}],"owner":{"account_id":22575199,"reputation":71,"user_id":16760803,"display_name":"arma"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":254,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":69599496,"answer_count":1,"score":0,"last_activity_date":1634417798,"creation_date":1634417576,"question_id":69599469,"body_markdown":"I am currently having a problem. In my database one of the values is displayed like this:\r\n\r\n**account balance: &quot;1000000&quot;**\r\n\r\nAnd I would like something like this:\r\n\r\n**account balance: &quot;1 000 000&quot;**\r\n\r\nI would like to know how to put spaces so that we can read more easily if it&#39;s thousands, millions ect..\r\n\r\n**Can this be done automatically on the Firebase side?**\r\n\r\n","title":"How to add spaces in a Firebase Database value","body":"<p>I am currently having a problem. In my database one of the values is displayed like this:</p>\n<p><strong>account balance: &quot;1000000&quot;</strong></p>\n<p>And I would like something like this:</p>\n<p><strong>account balance: &quot;1 000 000&quot;</strong></p>\n<p>I would like to know how to put spaces so that we can read more easily if it's thousands, millions ect..</p>\n<p><strong>Can this be done automatically on the Firebase side?</strong></p>\n"},{"tags":["java","android","android-studio"],"comments":[{"owner":{"account_id":39846,"reputation":991143,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":1,"creation_date":1634418263,"post_id":69599482,"comment_id":123020715,"body_markdown":"There are **90 answers** on the duplicate question. Personally, I would be using [OkHttp and its built-in asynchronous HTTP request capability](https://square.github.io/okhttp/recipes/#asynchronous-get-kt-java).","body":"There are <b>90 answers</b> on the duplicate question. Personally, I would be using <a href=\"https://square.github.io/okhttp/recipes/#asynchronous-get-kt-java\" rel=\"nofollow noreferrer\">OkHttp and its built-in asynchronous HTTP request capability</a>."},{"owner":{"account_id":12647822,"reputation":25,"user_id":9192990,"display_name":"Zeeshan"},"score":0,"creation_date":1634421492,"post_id":69599482,"comment_id":123021277,"body_markdown":"Thank you for the insight, I might go on that actually","body":"Thank you for the insight, I might go on that actually"},{"owner":{"account_id":12647822,"reputation":25,"user_id":9192990,"display_name":"Zeeshan"},"score":1,"creation_date":1634487725,"post_id":69599482,"comment_id":123032499,"body_markdown":"It worked! This way is much easier than what I was trying before, thank you!","body":"It worked! This way is much easier than what I was trying before, thank you!"}],"owner":{"account_id":12647822,"reputation":25,"user_id":9192990,"display_name":"Zeeshan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1634418173,"answer_count":0,"score":0,"last_activity_date":1634417674,"creation_date":1634417674,"question_id":69599482,"body_markdown":"So I&#39;m trying to build a Tax/MOT checker where a user would enter a registration plate into my application, it sends the number plate into a car checker website (which scraps data from DVLA) and retrieves TAX and MOT information which is then sent back to the application once car details are viewed, I&#39;ve researched a lot on the way as I just started learning more about android studio and complex java code in general. Anyway, the issue I seem to be having relates to when my html link is passed through HttpURLConnection where it instantly crashes the application. I looked in the logcat and it came up with **android.os.NetworkOnMainThreadException** as the main culprit.\r\n\r\nI&#39;ve seen other threads about this where an Async subclass can be used but that has since been deprecated in favour of java.util.concurrent which I have limited knowledge on.\r\n\r\nHere is the code for my CarSearch (Tax/MOT check) function when the insert vehicle button is clicked, after the &#39;2&#39; toast I seem to run into the error:\r\n\r\n        insert.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                String vehiclenameTXT = name.getText().toString();\r\n                String numberplateTXT = plate.getText().toString();\r\n                String mileageTXT = mileage.getText().toString();\r\n\r\n                Toast.makeText(CarSearch.this, &quot;1&quot;, Toast.LENGTH_SHORT).show();\r\n\r\n\r\n                Boolean checkinsertdata = DB.insertvehicledata(vehiclenameTXT, numberplateTXT, mileageTXT);\r\n                if(checkinsertdata==true)\r\n                {\r\n                    Toast.makeText(CarSearch.this, &quot;New Vehicle Added&quot;, Toast.LENGTH_SHORT).show();\r\n                }\r\n                else\r\n                {\r\n                    Toast.makeText(CarSearch.this, &quot;Cannot add the same vehicle details twice!&quot;, Toast.LENGTH_SHORT).show();\r\n                }\r\n\r\n                try {\r\n\r\n                    Toast.makeText(CarSearch.this, &quot;2&quot;, Toast.LENGTH_SHORT).show();\r\n\r\n                    String addr = &quot;https://cartaxcheck.co.uk/free-car-check/?vrm=LN11VUM&quot;;\r\n                    URL url = new URL(addr);\r\n                    HttpURLConnection con = (HttpURLConnection) url.openConnection();\r\n                    BufferedReader in = new BufferedReader(new InputStreamReader(con.getInputStream()));\r\n                    String inputLine;\r\n                    while ((inputLine = in.readLine()) != null)\r\n                        content.setText(inputLine);\r\n                    in.close();\r\n\r\n                } catch (MalformedURLException e) {\r\n                    e.printStackTrace();\r\n                } catch (IOException e) {\r\n                    e.printStackTrace();\r\n                }\r\n\r\n                Toast.makeText(CarSearch.this, &quot;3&quot;, Toast.LENGTH_SHORT).show();\r\n\r\n            }\r\n        });\r\n\r\nHere is the error I get thrown in the logcat:\r\n\r\n    2021-10-16 21:46:30.798 26220-26220/com.example.projectsupercars E/AndroidRuntime: FATAL EXCEPTION: main\r\n    Process: com.example.projectsupercars, PID: 26220\r\n    android.os.NetworkOnMainThreadException\r\n        at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1605)\r\n        at java.net.Inet6AddressImpl.lookupHostByName(Inet6AddressImpl.java:115)\r\n        at java.net.Inet6AddressImpl.lookupAllHostAddr(Inet6AddressImpl.java:103)\r\n        at java.net.InetAddress.getAllByName(InetAddress.java:1152)\r\n        at com.android.okhttp.Dns$1.lookup(Dns.java:41)\r\n        at com.android.okhttp.internal.http.RouteSelector.resetNextInetSocketAddress(RouteSelector.java:178)\r\n        at com.android.okhttp.internal.http.RouteSelector.nextProxy(RouteSelector.java:144)\r\n        at com.android.okhttp.internal.http.RouteSelector.next(RouteSelector.java:86)\r\n        at com.android.okhttp.internal.http.StreamAllocation.findConnection(StreamAllocation.java:176)\r\n        at com.android.okhttp.internal.http.StreamAllocation.findHealthyConnection(StreamAllocation.java:128)\r\n        at com.android.okhttp.internal.http.StreamAllocation.newStream(StreamAllocation.java:97)\r\n        at com.android.okhttp.internal.http.HttpEngine.connect(HttpEngine.java:289)\r\n        at com.android.okhttp.internal.http.HttpEngine.sendRequest(HttpEngine.java:232)\r\n        at com.android.okhttp.internal.huc.HttpURLConnectionImpl.execute(HttpURLConnectionImpl.java:465)\r\n        at com.android.okhttp.internal.huc.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:411)\r\n        at com.android.okhttp.internal.huc.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:248)\r\n        at com.android.okhttp.internal.huc.DelegatingHttpsURLConnection.getInputStream(DelegatingHttpsURLConnection.java:211)\r\n        at com.android.okhttp.internal.huc.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:30)\r\n        at com.example.projectsupercars.CarSearch$1.onClick(CarSearch.java:73)\r\n        at android.view.View.performClick(View.java:7448)\r\n        at com.google.android.material.button.MaterialButton.performClick(MaterialButton.java:1119)\r\n        at android.view.View.performClickInternal(View.java:7425)\r\n        at android.view.View.access$3600(View.java:810)\r\n        at android.view.View$PerformClick.run(View.java:28305)\r\n        at android.os.Handler.handleCallback(Handler.java:938)\r\n        at android.os.Handler.dispatchMessage(Handler.java:99)\r\n        at android.os.Looper.loop(Looper.java:223)\r\n        at android.app.ActivityThread.main(ActivityThread.java:7656)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)\r\n\r\nI know what needs to be done but I have trouble seeing how to do it. How can I go about solving this issue?","title":"android.os.NetworkOnMainThreadException when trying to access HTML string","body":"<p>So I'm trying to build a Tax/MOT checker where a user would enter a registration plate into my application, it sends the number plate into a car checker website (which scraps data from DVLA) and retrieves TAX and MOT information which is then sent back to the application once car details are viewed, I've researched a lot on the way as I just started learning more about android studio and complex java code in general. Anyway, the issue I seem to be having relates to when my html link is passed through HttpURLConnection where it instantly crashes the application. I looked in the logcat and it came up with <strong>android.os.NetworkOnMainThreadException</strong> as the main culprit.</p>\n<p>I've seen other threads about this where an Async subclass can be used but that has since been deprecated in favour of java.util.concurrent which I have limited knowledge on.</p>\n<p>Here is the code for my CarSearch (Tax/MOT check) function when the insert vehicle button is clicked, after the '2' toast I seem to run into the error:</p>\n<pre><code>    insert.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View view) {\n            String vehiclenameTXT = name.getText().toString();\n            String numberplateTXT = plate.getText().toString();\n            String mileageTXT = mileage.getText().toString();\n\n            Toast.makeText(CarSearch.this, &quot;1&quot;, Toast.LENGTH_SHORT).show();\n\n\n            Boolean checkinsertdata = DB.insertvehicledata(vehiclenameTXT, numberplateTXT, mileageTXT);\n            if(checkinsertdata==true)\n            {\n                Toast.makeText(CarSearch.this, &quot;New Vehicle Added&quot;, Toast.LENGTH_SHORT).show();\n            }\n            else\n            {\n                Toast.makeText(CarSearch.this, &quot;Cannot add the same vehicle details twice!&quot;, Toast.LENGTH_SHORT).show();\n            }\n\n            try {\n\n                Toast.makeText(CarSearch.this, &quot;2&quot;, Toast.LENGTH_SHORT).show();\n\n                String addr = &quot;https://cartaxcheck.co.uk/free-car-check/?vrm=LN11VUM&quot;;\n                URL url = new URL(addr);\n                HttpURLConnection con = (HttpURLConnection) url.openConnection();\n                BufferedReader in = new BufferedReader(new InputStreamReader(con.getInputStream()));\n                String inputLine;\n                while ((inputLine = in.readLine()) != null)\n                    content.setText(inputLine);\n                in.close();\n\n            } catch (MalformedURLException e) {\n                e.printStackTrace();\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n\n            Toast.makeText(CarSearch.this, &quot;3&quot;, Toast.LENGTH_SHORT).show();\n\n        }\n    });\n</code></pre>\n<p>Here is the error I get thrown in the logcat:</p>\n<pre><code>2021-10-16 21:46:30.798 26220-26220/com.example.projectsupercars E/AndroidRuntime: FATAL EXCEPTION: main\nProcess: com.example.projectsupercars, PID: 26220\nandroid.os.NetworkOnMainThreadException\n    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1605)\n    at java.net.Inet6AddressImpl.lookupHostByName(Inet6AddressImpl.java:115)\n    at java.net.Inet6AddressImpl.lookupAllHostAddr(Inet6AddressImpl.java:103)\n    at java.net.InetAddress.getAllByName(InetAddress.java:1152)\n    at com.android.okhttp.Dns$1.lookup(Dns.java:41)\n    at com.android.okhttp.internal.http.RouteSelector.resetNextInetSocketAddress(RouteSelector.java:178)\n    at com.android.okhttp.internal.http.RouteSelector.nextProxy(RouteSelector.java:144)\n    at com.android.okhttp.internal.http.RouteSelector.next(RouteSelector.java:86)\n    at com.android.okhttp.internal.http.StreamAllocation.findConnection(StreamAllocation.java:176)\n    at com.android.okhttp.internal.http.StreamAllocation.findHealthyConnection(StreamAllocation.java:128)\n    at com.android.okhttp.internal.http.StreamAllocation.newStream(StreamAllocation.java:97)\n    at com.android.okhttp.internal.http.HttpEngine.connect(HttpEngine.java:289)\n    at com.android.okhttp.internal.http.HttpEngine.sendRequest(HttpEngine.java:232)\n    at com.android.okhttp.internal.huc.HttpURLConnectionImpl.execute(HttpURLConnectionImpl.java:465)\n    at com.android.okhttp.internal.huc.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:411)\n    at com.android.okhttp.internal.huc.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:248)\n    at com.android.okhttp.internal.huc.DelegatingHttpsURLConnection.getInputStream(DelegatingHttpsURLConnection.java:211)\n    at com.android.okhttp.internal.huc.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:30)\n    at com.example.projectsupercars.CarSearch$1.onClick(CarSearch.java:73)\n    at android.view.View.performClick(View.java:7448)\n    at com.google.android.material.button.MaterialButton.performClick(MaterialButton.java:1119)\n    at android.view.View.performClickInternal(View.java:7425)\n    at android.view.View.access$3600(View.java:810)\n    at android.view.View$PerformClick.run(View.java:28305)\n    at android.os.Handler.handleCallback(Handler.java:938)\n    at android.os.Handler.dispatchMessage(Handler.java:99)\n    at android.os.Looper.loop(Looper.java:223)\n    at android.app.ActivityThread.main(ActivityThread.java:7656)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)\n</code></pre>\n<p>I know what needs to be done but I have trouble seeing how to do it. How can I go about solving this issue?</p>\n"},{"tags":["java","spring","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":1223835,"reputation":75858,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":1,"creation_date":1634420424,"post_id":69599384,"comment_id":123021105,"body_markdown":"The package is not `foo.bar.*`, it is `foo.bar`, but as described below, just don&#39;t specify any of the extra annotations at all.","body":"The package is not <code>foo.bar.*</code>, it is <code>foo.bar</code>, but as described below, just don&#39;t specify any of the extra annotations at all."}],"answers":[{"tags":[],"owner":{"account_id":17019087,"reputation":736,"user_id":12312156,"display_name":"Faramarz Afzali"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1634417593,"creation_date":1634417593,"answer_id":69599471,"question_id":69599384,"body_markdown":"There are some issues that you should fix them.\r\n\r\n \r\n\r\n**First**\r\n---------\r\n\r\nWhen you have the spring boot application with **@SpringBootApplication** you don&#39;t need other stuff such as `@EnableAutoConfiguration` and etc, So remove them all.  \r\nYou can read more about it [**here**][1].\r\n\r\n\r\n**Second**\r\n---------\r\n\r\nYou don&#39;t need to annotate your service interface with @Service, because you did it in the `UserServicesImpl` class.\r\n\r\n**Third**\r\n---------\r\n\r\nYou defined `id` as an integer in your user entity but in the repository, you wrote your id as `Long`. It&#39;s wrong. It should be something like this.\r\n\r\n```java\r\n@Repository\r\npublic interface UserRepository extends JpaRepository&lt;User,Integer&gt; {\r\n}\r\n```\r\nTry the above solutions and let me know the result.\r\n \r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/2.0.x/reference/html/using-boot-using-springbootapplication-annotation.html","title":"Parameter 0 of constructor in .... Spring Boot","body":"<p>There are some issues that you should fix them.</p>\n<h2><strong>First</strong></h2>\n<p>When you have the spring boot application with <strong>@SpringBootApplication</strong> you don't need other stuff such as <code>@EnableAutoConfiguration</code> and etc, So remove them all.<br />\nYou can read more about it <a href=\"https://docs.spring.io/spring-boot/docs/2.0.x/reference/html/using-boot-using-springbootapplication-annotation.html\" rel=\"nofollow noreferrer\"><strong>here</strong></a>.</p>\n<h2><strong>Second</strong></h2>\n<p>You don't need to annotate your service interface with @Service, because you did it in the <code>UserServicesImpl</code> class.</p>\n<h2><strong>Third</strong></h2>\n<p>You defined <code>id</code> as an integer in your user entity but in the repository, you wrote your id as <code>Long</code>. It's wrong. It should be something like this.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Repository\npublic interface UserRepository extends JpaRepository&lt;User,Integer&gt; {\n}\n</code></pre>\n<p>Try the above solutions and let me know the result.</p>\n"}],"owner":{"account_id":20806661,"reputation":3,"user_id":15281430,"display_name":"cavursamet"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2601,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69599471,"answer_count":1,"score":0,"last_activity_date":1634417593,"creation_date":1634416622,"question_id":69599384,"body_markdown":"I am a fish in Spring Boot and Data Jpa, I Tried to create a basic Spring boot application but every time I am encountering the error. Can you help me?\r\n\r\nThat&#39;s my code:\r\nSpring Boot Application class:\r\n\r\n  \r\n\r\n       @SpringBootApplication\r\n       @ComponentScan(basePackages = &quot;com.project.*&quot;)\r\n       @EnableJpaRepositories(basePackages = &quot;com.project.repository.*&quot;)\r\n       @EntityScan(basePackages = &quot;com.project.entities.*&quot;)\r\n       @EnableAutoConfiguration\r\n       public class MainApplication {\r\n       public static void main(String[] args) {\r\n        SpringApplication.run(MainApplication.class, args);\r\n        }\r\n     }\r\n\r\nController Class:\r\n\r\n     @RestController\r\n     @RequestMapping(value = &quot;/api&quot;)\r\n     public class controller {\r\n\r\n    private IUserServices userServices;\r\n\r\n    @Autowired\r\n    public controller(IUserServices userServices) {\r\n        this.userServices = userServices;\r\n    }\r\n\r\n    @GetMapping(value = &quot;/merhaba&quot;)\r\n    public String sayHello(){\r\n        return &quot;Hello World&quot;;\r\n    }\r\n\r\n    @GetMapping(value = &quot;/getall&quot;)\r\n    public List&lt;User&gt; getAll(){\r\n        return this.userServices.getAllUsers();\r\n    }\r\n}\r\n\r\nRepository Class:\r\n\r\n    @Repository\r\n    public interface UserRepository extends JpaRepository&lt;User,Long&gt; {\r\n    }\r\n\r\nIServices Class:\r\n\r\n    @Service\r\n    public interface IUserServices {\r\n    void saveUser(User user);\r\n    List&lt;User&gt; getAllUsers();\r\n   }\r\n\r\nServicesImpl Class:\r\n\r\n    @Service\r\n    public class UserServicesImpl implements  IUserServices{\r\n\r\n    private UserRepository userRepository;\r\n\r\n    @Autowired\r\n    public UserServicesImpl(UserRepository userRepository) {\r\n        this.userRepository = userRepository;\r\n    }\r\n\r\n    @Override\r\n    public void saveUser(User user) {\r\n        this.userRepository.save(user);\r\n    }\r\n\r\n    @Override\r\n    public List&lt;User&gt; getAllUsers() {\r\n        return this.userRepository.findAll();\r\n    }\r\n}\r\n\r\nEntity Class:\r\n\r\n    @Entity\r\n    @Table(catalog = &quot;users&quot;)\r\n    public class User {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private int id;\r\n    private String name;\r\n\r\n    public User() {\r\n    }\r\n    public User(int id, String name) {\r\n        this.id = id;\r\n        this.name = name;\r\n    }\r\n\r\n    public void setId(int id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public int getId() {\r\n        return id;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;User{&quot; +\r\n                &quot;id=&quot; + id +\r\n                &quot;, name=&#39;&quot; + name + &#39;\\&#39;&#39; +\r\n                &#39;}&#39;;\r\n       }\r\n    }\r\n\r\n\r\n\r\nAND THIS MY ERROR MESSAGE:\r\n\r\n    ***************************\r\n     APPLICATION FAILED TO START\r\n    ***************************\r\n\r\n    Description:\r\n\r\n    Parameter 0 of constructor in com.project.services.UserServicesImpl required a bean of \r\n    type &#39;com.project.repository.UserRepository&#39; that could not be found.\r\n\r\n\r\n       Action:\r\n\r\n      Consider defining a bean of type &#39;com.project.repository.UserRepository&#39; in your \r\n      configuration.\r\n\r\n\r\n      Process finished with exit code 0\r\n\r\nSO This is application properties file:\r\n\r\n    spring.jpa.properties.hibernate.dialect = \r\n    org.hibernate.dialect.PostgreSQLDialect\r\n    spring.jpa.hibernate.ddl-auto=update\r\n    spring.jpa.hibernate.show-sql=true\r\n    spring.datasource.url=jdbc:postgresql://localhost:5432/u\r\n    spring.datasource.username=postgres\r\n    spring.datasource.password=1234\r\n    spring.jpa.properties.javax.persistence.validation.mode = none\r\n\r\n\r\n\r\n\r\n","title":"Parameter 0 of constructor in .... Spring Boot","body":"<p>I am a fish in Spring Boot and Data Jpa, I Tried to create a basic Spring boot application but every time I am encountering the error. Can you help me?</p>\n<p>That's my code:\nSpring Boot Application class:</p>\n<pre><code>   @SpringBootApplication\n   @ComponentScan(basePackages = &quot;com.project.*&quot;)\n   @EnableJpaRepositories(basePackages = &quot;com.project.repository.*&quot;)\n   @EntityScan(basePackages = &quot;com.project.entities.*&quot;)\n   @EnableAutoConfiguration\n   public class MainApplication {\n   public static void main(String[] args) {\n    SpringApplication.run(MainApplication.class, args);\n    }\n }\n</code></pre>\n<p>Controller Class:</p>\n<pre><code> @RestController\n @RequestMapping(value = &quot;/api&quot;)\n public class controller {\n\nprivate IUserServices userServices;\n\n@Autowired\npublic controller(IUserServices userServices) {\n    this.userServices = userServices;\n}\n\n@GetMapping(value = &quot;/merhaba&quot;)\npublic String sayHello(){\n    return &quot;Hello World&quot;;\n}\n\n@GetMapping(value = &quot;/getall&quot;)\npublic List&lt;User&gt; getAll(){\n    return this.userServices.getAllUsers();\n}\n</code></pre>\n<p>}</p>\n<p>Repository Class:</p>\n<pre><code>@Repository\npublic interface UserRepository extends JpaRepository&lt;User,Long&gt; {\n}\n</code></pre>\n<p>IServices Class:</p>\n<pre><code>@Service\npublic interface IUserServices {\nvoid saveUser(User user);\nList&lt;User&gt; getAllUsers();\n</code></pre>\n<p>}</p>\n<p>ServicesImpl Class:</p>\n<pre><code>@Service\npublic class UserServicesImpl implements  IUserServices{\n\nprivate UserRepository userRepository;\n\n@Autowired\npublic UserServicesImpl(UserRepository userRepository) {\n    this.userRepository = userRepository;\n}\n\n@Override\npublic void saveUser(User user) {\n    this.userRepository.save(user);\n}\n\n@Override\npublic List&lt;User&gt; getAllUsers() {\n    return this.userRepository.findAll();\n}\n</code></pre>\n<p>}</p>\n<p>Entity Class:</p>\n<pre><code>@Entity\n@Table(catalog = &quot;users&quot;)\npublic class User {\n@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\nprivate int id;\nprivate String name;\n\npublic User() {\n}\npublic User(int id, String name) {\n    this.id = id;\n    this.name = name;\n}\n\npublic void setId(int id) {\n    this.id = id;\n}\n\npublic void setName(String name) {\n    this.name = name;\n}\n\npublic int getId() {\n    return id;\n}\n\npublic String getName() {\n    return name;\n}\n\n@Override\npublic String toString() {\n    return &quot;User{&quot; +\n            &quot;id=&quot; + id +\n            &quot;, name='&quot; + name + '\\'' +\n            '}';\n   }\n}\n</code></pre>\n<p>AND THIS MY ERROR MESSAGE:</p>\n<pre><code>***************************\n APPLICATION FAILED TO START\n***************************\n\nDescription:\n\nParameter 0 of constructor in com.project.services.UserServicesImpl required a bean of \ntype 'com.project.repository.UserRepository' that could not be found.\n\n\n   Action:\n\n  Consider defining a bean of type 'com.project.repository.UserRepository' in your \n  configuration.\n\n\n  Process finished with exit code 0\n</code></pre>\n<p>SO This is application properties file:</p>\n<pre><code>spring.jpa.properties.hibernate.dialect = \norg.hibernate.dialect.PostgreSQLDialect\nspring.jpa.hibernate.ddl-auto=update\nspring.jpa.hibernate.show-sql=true\nspring.datasource.url=jdbc:postgresql://localhost:5432/u\nspring.datasource.username=postgres\nspring.datasource.password=1234\nspring.jpa.properties.javax.persistence.validation.mode = none\n</code></pre>\n"},{"tags":["java","spring-boot","api","rest","restful-url"],"comments":[{"owner":{"account_id":7595189,"reputation":44576,"user_id":5761558,"display_name":"ernest_k"},"score":1,"creation_date":1634418168,"post_id":69599230,"comment_id":123020686,"body_markdown":"Perhaps `@ApplicationPath(&quot;/&quot;)` and having the version in resource paths? That doesn&#39;t seem right to me though, so I might just create two `Application` classes, one for each version.","body":"Perhaps <code>@ApplicationPath(&quot;&#47;&quot;)</code> and having the version in resource paths? That doesn&#39;t seem right to me though, so I might just create two <code>Application</code> classes, one for each version."},{"owner":{"account_id":15053512,"reputation":811,"user_id":10864550,"display_name":"Murat Kara"},"score":0,"creation_date":1634424676,"post_id":69599230,"comment_id":123021730,"body_markdown":"maybe you can read this https://stackoverflow.com/questions/20198275/how-to-manage-rest-api-versioning-with-spring","body":"maybe you can read this <a href=\"https://stackoverflow.com/questions/20198275/how-to-manage-rest-api-versioning-with-spring\" title=\"how to manage rest api versioning with spring\">stackoverflow.com/questions/20198275/&hellip;</a>"},{"owner":{"account_id":21507820,"reputation":97,"user_id":15850958,"display_name":"mitali"},"score":0,"creation_date":1634602170,"post_id":69599230,"comment_id":123063885,"body_markdown":"@ernest_k When I start the server, all the requests are getting redirected to V2. any reasons?","body":"@ernest_k When I start the server, all the requests are getting redirected to V2. any reasons?"},{"owner":{"account_id":7595189,"reputation":44576,"user_id":5761558,"display_name":"ernest_k"},"score":0,"creation_date":1634618833,"post_id":69599230,"comment_id":123066279,"body_markdown":"@mitali With the current setup? Or did you change it? Also, how are you `Application` classes discovered? Is your jax-rs implementation scanning annotations? Or are you using web.xml config?","body":"@mitali With the current setup? Or did you change it? Also, how are you <code>Application</code> classes discovered? Is your jax-rs implementation scanning annotations? Or are you using web.xml config?"}],"owner":{"account_id":21507820,"reputation":97,"user_id":15850958,"display_name":"mitali"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":444,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1634417354,"creation_date":1634415288,"question_id":69599230,"body_markdown":"I have an application which exposes multiple endpoints.\r\nexample:\r\n\r\n    v1/transaction/spectra \r\n    v1/transaction/jupiter \r\n    v2/payment/blaze\r\n\r\nHere is the definition of Application URI\r\n\r\n    import javax.ws.rs.ApplicationPath;\r\n    import javax.ws.rs.core.Application;\r\n    \r\n    @ApplicationPath(&quot;/v1&quot;)\r\n    @Component\r\n    public class ApplicationConfig extends Application {\r\n    \r\n    }\r\n\r\n    @Path(&quot;/transaction&quot;)\r\n    public interface SpectrAPI {\r\n        \r\n        @POST\r\n        @Path(&quot;/spectra&quot;)\r\n        Response evaluatePlanningDecisions(final Request request); \r\n     \r\n    }\r\n\r\n    @Path(&quot;/transaction&quot;)\r\n    public interface JupiterAPI {\r\n        \r\n        @POST\r\n        @Path(&quot;/jupiter&quot;)\r\n        Response evaluatePlanningDecisions(final Request request); \r\n     \r\n    }\r\n\r\n\r\n     \r\nAs the application supports different URL&#39;s as shown below \r\n\r\n&gt; v1/transaction , v2/payment\r\n\r\nHow would @ApplicationPath support multiple resourses (v1/v2)?","title":"Multiple Resource URL in @ApplicationPath","body":"<p>I have an application which exposes multiple endpoints.\nexample:</p>\n<pre><code>v1/transaction/spectra \nv1/transaction/jupiter \nv2/payment/blaze\n</code></pre>\n<p>Here is the definition of Application URI</p>\n<pre><code>import javax.ws.rs.ApplicationPath;\nimport javax.ws.rs.core.Application;\n\n@ApplicationPath(&quot;/v1&quot;)\n@Component\npublic class ApplicationConfig extends Application {\n\n}\n\n@Path(&quot;/transaction&quot;)\npublic interface SpectrAPI {\n    \n    @POST\n    @Path(&quot;/spectra&quot;)\n    Response evaluatePlanningDecisions(final Request request); \n \n}\n\n@Path(&quot;/transaction&quot;)\npublic interface JupiterAPI {\n    \n    @POST\n    @Path(&quot;/jupiter&quot;)\n    Response evaluatePlanningDecisions(final Request request); \n \n}\n\n\n \n</code></pre>\n<p>As the application supports different URL's as shown below</p>\n<blockquote>\n<p>v1/transaction , v2/payment</p>\n</blockquote>\n<p>How would @ApplicationPath support multiple resourses (v1/v2)?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":100740,"reputation":73217,"user_id":271415,"accept_rate":91,"display_name":"jarmod"},"score":0,"creation_date":1375041107,"post_id":17912163,"comment_id":26166923,"body_markdown":"Are you sure that getIntent() itself is not returning NULL?","body":"Are you sure that getIntent() itself is not returning NULL?"},{"owner":{"account_id":2986656,"reputation":191,"user_id":2535288,"accept_rate":82,"display_name":"user222"},"score":0,"creation_date":1375041934,"post_id":17912163,"comment_id":26167190,"body_markdown":"Ok, getIntent() is returning NULL. How to fix that?","body":"Ok, getIntent() is returning NULL. How to fix that?"},{"owner":{"account_id":100740,"reputation":73217,"user_id":271415,"accept_rate":91,"display_name":"jarmod"},"score":0,"creation_date":1375042236,"post_id":17912163,"comment_id":26167259,"body_markdown":"I am guessing that there is no valid intent at the point that you are calling getIntent().  Are you calling this before onCreate()?  See http://stackoverflow.com/questions/13983728/android-using-getintent-only-within-oncreate","body":"I am guessing that there is no valid intent at the point that you are calling getIntent().  Are you calling this before onCreate()?  See <a href=\"http://stackoverflow.com/questions/13983728/android-using-getintent-only-within-oncreate\" title=\"android using getintent only within oncreate\">stackoverflow.com/questions/13983728/&hellip;</a>"},{"owner":{"account_id":1791101,"reputation":1508,"user_id":1631483,"accept_rate":83,"display_name":"Peshal"},"score":0,"creation_date":1375042332,"post_id":17912163,"comment_id":26167291,"body_markdown":"Show us where you set the value of value string variable in Main Activity","body":"Show us where you set the value of value string variable in Main Activity"},{"owner":{"account_id":2986656,"reputation":191,"user_id":2535288,"accept_rate":82,"display_name":"user222"},"score":0,"creation_date":1375043150,"post_id":17912163,"comment_id":26167518,"body_markdown":"So I can&#39;t use Intent in onCreate? It&#39;s called in setOnClickListener when the user click the view. Is that the problem?","body":"So I can&#39;t use Intent in onCreate? It&#39;s called in setOnClickListener when the user click the view. Is that the problem?"},{"owner":{"account_id":1967834,"reputation":1415,"user_id":1767581,"display_name":"mipreamble"},"score":0,"creation_date":1375043531,"post_id":17912163,"comment_id":26167623,"body_markdown":"No that should not be a problem. Check the answer I provided. Everything should work fine.","body":"No that should not be a problem. Check the answer I provided. Everything should work fine."}],"answers":[{"tags":[],"owner":{"account_id":2882201,"reputation":10752,"user_id":2472820,"accept_rate":86,"display_name":"Kon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1375041000,"creation_date":1375041000,"answer_id":17912177,"question_id":17912163,"body_markdown":"When you call `putExtra(...)`, make sure the `value` object is a `String`. If you&#39;re passing any other object, make sure to explicitly call `value.toString()`, especially if dealing with GUI components. \r\n\r\nSee here for more information: https://stackoverflow.com/questions/15555750/android-intent-getstringextra-returns-null","title":"getStringExtra() always throws NullPointerException","body":"<p>When you call <code>putExtra(...)</code>, make sure the <code>value</code> object is a <code>String</code>. If you're passing any other object, make sure to explicitly call <code>value.toString()</code>, especially if dealing with GUI components. </p>\n\n<p>See here for more information: <a href=\"https://stackoverflow.com/questions/15555750/android-intent-getstringextra-returns-null\">Android Intent.getStringExtra() returns null</a></p>\n"},{"tags":[],"owner":{"account_id":1967834,"reputation":1415,"user_id":1767581,"display_name":"mipreamble"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1566778507,"creation_date":1375042088,"answer_id":17912365,"question_id":17912163,"body_markdown":"Try this:\r\n\r\nIn the MainActivity:\r\n\r\n    //Make sure Secondary is an Activity name. Secondary.class.\r\n\r\n    Intent intent = new Intent(MainActivity.this, Secondary.class);\r\n    intent.putExtra(&quot;name&quot;,value);\r\n    startActivity(intent);\r\n\r\nIn the Secondary Activity:\r\n\r\n`String value = getIntent().getExtras().getString(&quot;name&quot;);`\r\n\r\nYou need to get the bundle first and then extract the string from it.\r\n\r\n    Bundle bundle = getIntent().getExtras();\r\n    if (bundle != null) {\r\n        bundle.getString(&quot;name&quot;);\r\n    }\r\n\r\nBoth should work. The second one is to check if the bundle is null.","title":"getStringExtra() always throws NullPointerException","body":"<p>Try this:</p>\n\n<p>In the MainActivity:</p>\n\n<pre><code>//Make sure Secondary is an Activity name. Secondary.class.\n\nIntent intent = new Intent(MainActivity.this, Secondary.class);\nintent.putExtra(\"name\",value);\nstartActivity(intent);\n</code></pre>\n\n<p>In the Secondary Activity:</p>\n\n<p><code>String value = getIntent().getExtras().getString(\"name\");</code></p>\n\n<p>You need to get the bundle first and then extract the string from it.</p>\n\n<pre><code>Bundle bundle = getIntent().getExtras();\nif (bundle != null) {\n    bundle.getString(\"name\");\n}\n</code></pre>\n\n<p>Both should work. The second one is to check if the bundle is null.</p>\n"},{"tags":[],"owner":{"account_id":2916851,"reputation":124,"user_id":2499844,"accept_rate":75,"display_name":"MDEVLP"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1375042131,"creation_date":1375042131,"answer_id":17912376,"question_id":17912163,"body_markdown":"I have used this method times. Just make sure value has a value or initialized.You can use **Log** or     **System.out.println(value);** after **.putExtra** to see(in console tab) if value is null. and in second activity too.","title":"getStringExtra() always throws NullPointerException","body":"<p>I have used this method times. Just make sure value has a value or initialized.You can use <strong>Log</strong> or     <strong>System.out.println(value);</strong> after <strong>.putExtra</strong> to see(in console tab) if value is null. and in second activity too.</p>\n"},{"tags":[],"owner":{"account_id":1791101,"reputation":1508,"user_id":1631483,"accept_rate":83,"display_name":"Peshal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1375042136,"creation_date":1375042136,"answer_id":17912377,"question_id":17912163,"body_markdown":"Change this line\r\n \r\n    String value = getIntent().getStringExtra(&quot;name&quot;);\r\nTO this line\r\n\r\n    String value = getIntent().getString(&quot;name&quot;);","title":"getStringExtra() always throws NullPointerException","body":"<p>Change this line</p>\n\n<pre><code>String value = getIntent().getStringExtra(\"name\");\n</code></pre>\n\n<p>TO this line</p>\n\n<pre><code>String value = getIntent().getString(\"name\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2986656,"reputation":191,"user_id":2535288,"accept_rate":82,"display_name":"user222"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1375045927,"creation_date":1375045927,"answer_id":17912945,"question_id":17912163,"body_markdown":"I have discovered I have an issue in my code it was my fault. It wasn&#39;t an Intent problem. Thank you all.","title":"getStringExtra() always throws NullPointerException","body":"<p>I have discovered I have an issue in my code it was my fault. It wasn't an Intent problem. Thank you all.</p>\n"},{"tags":[],"owner":{"account_id":10742168,"reputation":1,"user_id":7904839,"display_name":"bhavik13"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634416792,"creation_date":1634416792,"answer_id":69599399,"question_id":17912163,"body_markdown":"You can try this --&gt;\r\n\r\n```\r\nintent.putExtra(&quot;name&quot;, textView.getText().toString());\r\n```\r\n\r\nIf the error still occurs, check-in the Second Activity that you are using the right id path...:-\r\n\r\n```\r\nvalue = findViewById(R.id.);\r\n``` ","title":"getStringExtra() always throws NullPointerException","body":"<p>You can try this --&gt;</p>\n<pre><code>intent.putExtra(&quot;name&quot;, textView.getText().toString());\n</code></pre>\n<p>If the error still occurs, check-in the Second Activity that you are using the right id path...:-</p>\n<pre><code>value = findViewById(R.id.);\n</code></pre>\n"}],"owner":{"account_id":2986656,"reputation":191,"user_id":2535288,"accept_rate":82,"display_name":"user222"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4178,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":17912945,"answer_count":6,"score":1,"last_activity_date":1634416792,"creation_date":1375040843,"question_id":17912163,"body_markdown":"Main activity:\r\n\r\n    Intent intent = new Intent(Main.this, Secondary.class);\r\n\t\t\t\t\t\r\n\tintent.putExtra(&quot;name&quot;,value);\r\n\t\t\t\t\t\r\n\tstartActivity(intent);\r\n\r\nSecondary activity:\r\n\r\n    String value = getIntent().getStringExtra(&quot;name&quot;)\r\n\r\n\r\nWhat&#39;s wrong here? I&#39;ve searched a lot without success...\r\n\r\nThanks","title":"getStringExtra() always throws NullPointerException","body":"<p>Main activity:</p>\n\n<pre><code>Intent intent = new Intent(Main.this, Secondary.class);\n\nintent.putExtra(\"name\",value);\n\nstartActivity(intent);\n</code></pre>\n\n<p>Secondary activity:</p>\n\n<pre><code>String value = getIntent().getStringExtra(\"name\")\n</code></pre>\n\n<p>What's wrong here? I've searched a lot without success...</p>\n\n<p>Thanks</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":216950,"reputation":20103,"user_id":472495,"accept_rate":92,"display_name":"halfer"},"score":0,"creation_date":1634411900,"post_id":69597292,"comment_id":123019289,"body_markdown":"Tip: when posting a question involving a specific programming language, always use a tag for that language. It will help get your question in front of people who are most able to help.","body":"Tip: when posting a question involving a specific programming language, always use a tag for that language. It will help get your question in front of people who are most able to help."},{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":1,"creation_date":1634454400,"post_id":69597292,"comment_id":123024991,"body_markdown":"Variable names should begin in lowercase so they don&#39;t get confused with class names, which start in uppercase.","body":"Variable names should begin in lowercase so they don&#39;t get confused with class names, which start in uppercase."}],"answers":[{"tags":[],"owner":{"account_id":23041952,"reputation":153,"user_id":17160016,"display_name":"njk18"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634401573,"creation_date":1634401573,"answer_id":69597482,"question_id":69597292,"body_markdown":"Unlike languages such as C/C++, Java&#39;s entry point is a method that has the following fixed syntax:\r\n\r\n    public static void main(String[] args) {}\r\n\r\nThe required parameter indicates that the program accepts command-line arguments which you can access through the `args` array.\r\nYou can rename this parameter, but by convention, it is `args`.\r\n   \r\n\r\n\r\n","title":"How can I debug my user defined function program","body":"<p>Unlike languages such as C/C++, Java's entry point is a method that has the following fixed syntax:</p>\n<pre><code>public static void main(String[] args) {}\n</code></pre>\n<p>The required parameter indicates that the program accepts command-line arguments which you can access through the <code>args</code> array.\nYou can rename this parameter, but by convention, it is <code>args</code>.</p>\n"},{"tags":[],"owner":{"account_id":22417177,"reputation":129,"user_id":16625057,"display_name":"Akash R"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634416576,"creation_date":1634416576,"answer_id":69599382,"question_id":69597292,"body_markdown":"The inputs given at the first are **being overwritten** by the inputs that are provided in the second.\r\n\r\n\r\n            D3Point Point1= new D3Point();\r\n            D3Point Point2= new D3Point();\r\n            Point1.acceptPoint();  \r\n            Point2.acceptPoint(); // calling this method back to back is the cause of the problem.\r\n\r\n\r\nTo avoid this, **Try printing the values once you get it**. I&#39;ve made few changes in your code to print the values of 1st and 2nd inputs.\r\n\r\n    public static void main(String[] ar)   // in the code you provided, main method doesnt have any arguments. So pls add that too in your program\r\n    {\r\n        D3Point Point1= new D3Point();\r\n        D3Point Point2= new D3Point();\r\n        Point1.acceptPoint();     // gets the values\r\n        System.out.println(&quot;THE COORDINATES OF THE TWO POINTS ARE:&quot;);\r\n        Point1.displayPoint();  // prints the values\r\n        Point2.acceptPoint();\r\n        System.out.println(&quot;THE COORDINATES OF THE TWO POINTS ARE:&quot;);\r\n        Point2.displayPoint();\r\n    }\r\n\r\n \r\n\r\n\r\nAnd **To debug** your program, place a breakpoint in the methods that you use in the program and instead of running the program by clicking the play button you can debug the program by clicking the bug icon in your IDE or use the shortcut in eclipse Alt + Shift + D,J.  \r\n","title":"How can I debug my user defined function program","body":"<p>The inputs given at the first are <strong>being overwritten</strong> by the inputs that are provided in the second.</p>\n<pre><code>        D3Point Point1= new D3Point();\n        D3Point Point2= new D3Point();\n        Point1.acceptPoint();  \n        Point2.acceptPoint(); // calling this method back to back is the cause of the problem.\n</code></pre>\n<p>To avoid this, <strong>Try printing the values once you get it</strong>. I've made few changes in your code to print the values of 1st and 2nd inputs.</p>\n<pre><code>public static void main(String[] ar)   // in the code you provided, main method doesnt have any arguments. So pls add that too in your program\n{\n    D3Point Point1= new D3Point();\n    D3Point Point2= new D3Point();\n    Point1.acceptPoint();     // gets the values\n    System.out.println(&quot;THE COORDINATES OF THE TWO POINTS ARE:&quot;);\n    Point1.displayPoint();  // prints the values\n    Point2.acceptPoint();\n    System.out.println(&quot;THE COORDINATES OF THE TWO POINTS ARE:&quot;);\n    Point2.displayPoint();\n}\n</code></pre>\n<p>And <strong>To debug</strong> your program, place a breakpoint in the methods that you use in the program and instead of running the program by clicking the play button you can debug the program by clicking the bug icon in your IDE or use the shortcut in eclipse Alt + Shift + D,J.</p>\n"}],"owner":{"account_id":23052441,"reputation":1,"user_id":17169047,"display_name":"Kamran"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1634471148,"answer_count":2,"score":0,"last_activity_date":1634416576,"creation_date":1634400279,"question_id":69597292,"body_markdown":"I wrote a program, which had a logic error that I am unable to find. How can I find the cause of the error?\r\n\r\n    import java.util.*;\r\n    class D3Point {\r\n        static double x,y,z;\r\n        D3Point()\r\n        {\r\n            x=0.0;\r\n            y=0.0;\r\n            z=0.0;\r\n        }\r\n        static void acceptPoint()\r\n        {\r\n            Scanner sc=new Scanner(System.in);\r\n            System.out.println(&quot;ENTER THE X-COORDINATE OF THE POINT&quot;);\r\n            x=sc.nextDouble();\r\n            System.out.println(&quot;ENTER THE Y-COORDINATE OF THE POINT&quot;);\r\n            y=sc.nextDouble();\r\n            System.out.println(&quot;ENTER THE Z-COORDINATE OF THE POINT&quot;);\r\n            z=sc.nextDouble();\r\n        }\r\n        static void displayPoint()\r\n        {\r\n            System.out.println(&quot;(&quot;+x+&quot;,&quot;+y+&quot;,&quot;+z+&quot;)&quot;);\r\n        }\r\n        public static void main()\r\n        {\r\n            D3Point Point1= new D3Point();\r\n            D3Point Point2= new D3Point();\r\n            Point1.acceptPoint();\r\n            Point2.acceptPoint();\r\n            System.out.println(&quot;THE COORDINATES OF THE TWO POINTS ARE:&quot;);\r\n            Point1.displayPoint();\r\n            Point2.displayPoint();\r\n        } \r\n        }\r\n\r\nThis program was supposed to take in the coordinates of two points in 3D and print them, but for some reason the second input that I am giving for the object Point2 is also being assigned to the object Point1 and I do not know where I am wrong. What can I try next?\r\n","title":"How can I debug my user defined function program","body":"<p>I wrote a program, which had a logic error that I am unable to find. How can I find the cause of the error?</p>\n<pre><code>import java.util.*;\nclass D3Point {\n    static double x,y,z;\n    D3Point()\n    {\n        x=0.0;\n        y=0.0;\n        z=0.0;\n    }\n    static void acceptPoint()\n    {\n        Scanner sc=new Scanner(System.in);\n        System.out.println(&quot;ENTER THE X-COORDINATE OF THE POINT&quot;);\n        x=sc.nextDouble();\n        System.out.println(&quot;ENTER THE Y-COORDINATE OF THE POINT&quot;);\n        y=sc.nextDouble();\n        System.out.println(&quot;ENTER THE Z-COORDINATE OF THE POINT&quot;);\n        z=sc.nextDouble();\n    }\n    static void displayPoint()\n    {\n        System.out.println(&quot;(&quot;+x+&quot;,&quot;+y+&quot;,&quot;+z+&quot;)&quot;);\n    }\n    public static void main()\n    {\n        D3Point Point1= new D3Point();\n        D3Point Point2= new D3Point();\n        Point1.acceptPoint();\n        Point2.acceptPoint();\n        System.out.println(&quot;THE COORDINATES OF THE TWO POINTS ARE:&quot;);\n        Point1.displayPoint();\n        Point2.displayPoint();\n    } \n    }\n</code></pre>\n<p>This program was supposed to take in the coordinates of two points in 3D and print them, but for some reason the second input that I am giving for the object Point2 is also being assigned to the object Point1 and I do not know where I am wrong. What can I try next?</p>\n"},{"tags":["java","excel","apache-poi"],"comments":[{"owner":{"account_id":5272138,"reputation":2107,"user_id":4210091,"display_name":"Renato"},"score":0,"creation_date":1634418085,"post_id":69599379,"comment_id":123020666,"body_markdown":"what is exactly the problem?","body":"what is exactly the problem?"},{"owner":{"account_id":20521355,"reputation":169,"user_id":15060866,"display_name":"guillanBesada"},"score":0,"creation_date":1634493947,"post_id":69599379,"comment_id":123033885,"body_markdown":"it does not export the data of type date.","body":"it does not export the data of type date."},{"owner":{"account_id":20521355,"reputation":169,"user_id":15060866,"display_name":"guillanBesada"},"score":0,"creation_date":1634494604,"post_id":69599379,"comment_id":123034056,"body_markdown":"i tryed with this but does not work: `else if(DateUtil.isADateFormat(NORMAL, value.toString()))\n    {\n       cell.setCellValue(value.toString());       \n    }`","body":"i tryed with this but does not work: <code>else if(DateUtil.isADateFormat(NORMAL, value.toString()))     {        cell.setCellValue(value.toString());            }</code>"}],"owner":{"account_id":20521355,"reputation":169,"user_id":15060866,"display_name":"guillanBesada"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1634418097,"answer_count":0,"score":0,"last_activity_date":1634416562,"creation_date":1634416562,"question_id":69599379,"body_markdown":"hello I am exporting a jtable to excel. And it exports all the data fine except the dates. At the end of the `public void exportToExcel` function, a series of `else ifs` are made with some conversions, but I am missing those of the dates. This is the code:\r\n\r\n    public void exportToExcel(JTable table, String filePath) throws Exception {\r\n      TableModel model = table.getModel();\r\n      Workbook workbook = new XSSFWorkbook();\r\n      Sheet sheet = workbook.createSheet();\r\n      Row row;\r\n      Cell cell;\r\n    \r\n      // write the column headers\r\n      row = sheet.createRow(0);\r\n      for (int c = 0; c &lt; model.getColumnCount(); c++) {\r\n       cell = row.createCell(c);\r\n       cell.setCellValue(model.getColumnName(c));\r\n      }\r\n    \r\n      // write the data rows\r\n      for (int r = 0; r &lt; model.getRowCount(); r++) {\r\n       row = sheet.createRow(r+1);\r\n       for (int c = 0; c &lt; model.getColumnCount(); c++) {\r\n        cell = row.createCell(c);\r\n        Object value = model.getValueAt(r, c);\r\n        if (value instanceof String) \r\n        {\r\n         cell.setCellValue((String)value);\r\n        } \r\n        else if (value instanceof Double) \r\n        {\r\n         cell.setCellValue((Double)value);\r\n        }\r\n        else if (value instanceof Integer)\r\n        {\r\n         cell.setCellValue((Integer)value);\r\n        }\r\n        else if (value instanceof Long)\r\n        {\r\n         cell.setCellValue((Long)value);\r\n        }\r\n        else if (value instanceof BigDecimal)\r\n        {       \r\n         cell.setCellValue(((BigDecimal) value).doubleValue());\r\n        }\r\n        else if (value instanceof BigInteger)\r\n        {       \r\n         cell.setCellValue(((BigInteger) value).longValue());\r\n        }\r\n       }\r\n      }\r\n    \r\n      FileOutputStream out = new FileOutputStream(filePath);\r\n      workbook.write(out);\r\n      out.close();\r\n      //workbook.close();\r\n    \r\n     }","title":"date format when exporting from java to excel","body":"<p>hello I am exporting a jtable to excel. And it exports all the data fine except the dates. At the end of the <code>public void exportToExcel</code> function, a series of <code>else ifs</code> are made with some conversions, but I am missing those of the dates. This is the code:</p>\n<pre><code>public void exportToExcel(JTable table, String filePath) throws Exception {\n  TableModel model = table.getModel();\n  Workbook workbook = new XSSFWorkbook();\n  Sheet sheet = workbook.createSheet();\n  Row row;\n  Cell cell;\n\n  // write the column headers\n  row = sheet.createRow(0);\n  for (int c = 0; c &lt; model.getColumnCount(); c++) {\n   cell = row.createCell(c);\n   cell.setCellValue(model.getColumnName(c));\n  }\n\n  // write the data rows\n  for (int r = 0; r &lt; model.getRowCount(); r++) {\n   row = sheet.createRow(r+1);\n   for (int c = 0; c &lt; model.getColumnCount(); c++) {\n    cell = row.createCell(c);\n    Object value = model.getValueAt(r, c);\n    if (value instanceof String) \n    {\n     cell.setCellValue((String)value);\n    } \n    else if (value instanceof Double) \n    {\n     cell.setCellValue((Double)value);\n    }\n    else if (value instanceof Integer)\n    {\n     cell.setCellValue((Integer)value);\n    }\n    else if (value instanceof Long)\n    {\n     cell.setCellValue((Long)value);\n    }\n    else if (value instanceof BigDecimal)\n    {       \n     cell.setCellValue(((BigDecimal) value).doubleValue());\n    }\n    else if (value instanceof BigInteger)\n    {       \n     cell.setCellValue(((BigInteger) value).longValue());\n    }\n   }\n  }\n\n  FileOutputStream out = new FileOutputStream(filePath);\n  workbook.write(out);\n  out.close();\n  //workbook.close();\n\n }\n</code></pre>\n"},{"tags":["java","soap","error-handling","apache-axis","soap-client"],"owner":{"account_id":6649403,"reputation":61,"user_id":6529621,"display_name":"Kaustubh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1634415426,"creation_date":1634404701,"question_id":69597921,"body_markdown":"I have created a java client to make web service call to a remote axis2 service deployed. I generated the client stubs with the WSDL file downloaded from the remote server&#39;s  &quot;/?wsdl&quot; endpoint and tested a sample call for one of the exposed operations. It failed with the AxisFault error:\r\n\r\n    org.apache.axis2.AxisFault: Exception occurred while trying to invoke service method &quot;sample operation&quot;\r\n        at org.apache.axis2.util.Utils.getInboundFaultFromMessageContext(Utils.java:531)\r\n        at org.apache.axis2.description.OutInAxisOperationClient.handleResponse(OutInAxisOperation.java:375)\r\n        at org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisOperation.java:421)\r\n        at org.apache.axis2.description.OutInAxisOperationClient.executeImpl(OutInAxisOperation.java:229)\r\n        at org.apache.axis2.client.OperationClient.execute(OperationClient.java:165)\r\n\r\nThe above error appears quite generic and doesn&#39;t help much in knowing the actual reason. Please suggest a way of getting more detailed error reason. Is there any attribute of AxisFault entity that is populated with a detailed error description which I can log or there is some other way?","title":"Axis2Fault detailed description","body":"<p>I have created a java client to make web service call to a remote axis2 service deployed. I generated the client stubs with the WSDL file downloaded from the remote server's  &quot;/?wsdl&quot; endpoint and tested a sample call for one of the exposed operations. It failed with the AxisFault error:</p>\n<pre><code>org.apache.axis2.AxisFault: Exception occurred while trying to invoke service method &quot;sample operation&quot;\n    at org.apache.axis2.util.Utils.getInboundFaultFromMessageContext(Utils.java:531)\n    at org.apache.axis2.description.OutInAxisOperationClient.handleResponse(OutInAxisOperation.java:375)\n    at org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisOperation.java:421)\n    at org.apache.axis2.description.OutInAxisOperationClient.executeImpl(OutInAxisOperation.java:229)\n    at org.apache.axis2.client.OperationClient.execute(OperationClient.java:165)\n</code></pre>\n<p>The above error appears quite generic and doesn't help much in knowing the actual reason. Please suggest a way of getting more detailed error reason. Is there any attribute of AxisFault entity that is populated with a detailed error description which I can log or there is some other way?</p>\n"},{"tags":["java","android","android-studio"],"comments":[{"owner":{"account_id":9849990,"reputation":469,"user_id":7296348,"display_name":"Meet Prajapati"},"score":0,"creation_date":1634412976,"post_id":69598936,"comment_id":123019535,"body_markdown":"if you have many product flavors then you should consider this. Otherwise, why make things so complicated?","body":"if you have many product flavors then you should consider this. Otherwise, why make things so complicated?"},{"owner":{"account_id":17270161,"reputation":190,"user_id":12506059,"display_name":"Kristian"},"score":0,"creation_date":1634413437,"post_id":69598936,"comment_id":123019630,"body_markdown":"@MEETPrajapati my original &#39;Drawable&#39; folder has more than 100 files now and it was getting a little hard to find the right file in it. Think this option might make it more clear","body":"@MEETPrajapati my original &#39;Drawable&#39; folder has more than 100 files now and it was getting a little hard to find the right file in it. Think this option might make it more clear"}],"answers":[{"tags":[],"owner":{"account_id":9849990,"reputation":469,"user_id":7296348,"display_name":"Meet Prajapati"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634414625,"creation_date":1634414625,"answer_id":69599147,"question_id":69598936,"body_markdown":"You can make a new drawable folder inside new res folder called &quot;module1&quot; like this : \r\n\r\n        sourceSets{\r\n        main {\r\n            java.srcDir(&quot;src/main/java&quot;)\r\n            res.setSrcDirs([&quot;src/main/res&quot;,&quot;src/other/module1&quot;])\r\n            manifest.srcFile(&quot;src/main/AndroidManifest.xml&quot;)\r\n        }\r\n    }\r\n","title":"Is this the correct way of writing sourceSets for multiple folders of the same type?","body":"<p>You can make a new drawable folder inside new res folder called &quot;module1&quot; like this :</p>\n<pre><code>    sourceSets{\n    main {\n        java.srcDir(&quot;src/main/java&quot;)\n        res.setSrcDirs([&quot;src/main/res&quot;,&quot;src/other/module1&quot;])\n        manifest.srcFile(&quot;src/main/AndroidManifest.xml&quot;)\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":17270161,"reputation":190,"user_id":12506059,"display_name":"Kristian"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":98,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1634415295,"creation_date":1634412650,"question_id":69598936,"body_markdown":"I used to have all my files in one folder of each type but recently I found an option do it in multiple (at least I think so) - orig. question [stackoverflow][1]\r\n\r\nI tried to do it the way they did in the answer but there was a note on [android site][2] that you should avoid specifying a directory which is a parent to one. And so I did the following:\r\n\r\n[![enter image description here][3]][3]\r\n\r\nThe code doesnt fail grandle sync but I am not sure if it works because even if I change the name of &quot;mipmap&quot; to something that isnt in the res folder it will sync anyways.. \r\n\r\n**Is this the correct way of writing sourceSets for multiple folders of the same type?**\r\n\r\n1. Should I add the srcDirs add to each directory in res folder meaning font/layout/menu/raw/values\r\n2. Is this the correct way of setting a source directory for mipmap which has multiple qualifiers?\r\n\r\nThanks for any help\r\n\r\n**EDIT** : @MEETPrajapati This error popped in one of the drawable files once I synced it. [![error][4]][4]\r\n\r\n\r\n  \r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/4930398/can-the-android-layout-folder-contain-subfolders\r\n  [2]: https://developer.android.com/studio/build/build-variants\r\n  [3]: https://i.stack.imgur.com/zriSm.png\r\n  [4]: https://i.stack.imgur.com/yDAKl.png","title":"Is this the correct way of writing sourceSets for multiple folders of the same type?","body":"<p>I used to have all my files in one folder of each type but recently I found an option do it in multiple (at least I think so) - orig. question <a href=\"https://stackoverflow.com/questions/4930398/can-the-android-layout-folder-contain-subfolders\">stackoverflow</a></p>\n<p>I tried to do it the way they did in the answer but there was a note on <a href=\"https://developer.android.com/studio/build/build-variants\" rel=\"nofollow noreferrer\">android site</a> that you should avoid specifying a directory which is a parent to one. And so I did the following:</p>\n<p><a href=\"https://i.stack.imgur.com/zriSm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zriSm.png\" alt=\"enter image description here\" /></a></p>\n<p>The code doesnt fail grandle sync but I am not sure if it works because even if I change the name of &quot;mipmap&quot; to something that isnt in the res folder it will sync anyways..</p>\n<p><strong>Is this the correct way of writing sourceSets for multiple folders of the same type?</strong></p>\n<ol>\n<li>Should I add the srcDirs add to each directory in res folder meaning font/layout/menu/raw/values</li>\n<li>Is this the correct way of setting a source directory for mipmap which has multiple qualifiers?</li>\n</ol>\n<p>Thanks for any help</p>\n<p><strong>EDIT</strong> : @MEETPrajapati This error popped in one of the drawable files once I synced it. <a href=\"https://i.stack.imgur.com/yDAKl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yDAKl.png\" alt=\"error\" /></a></p>\n"},{"tags":["java","android","android-fragments","fragmentmanager"],"comments":[{"owner":{"account_id":6023206,"reputation":7990,"user_id":4729721,"display_name":"a_local_nobody"},"score":0,"creation_date":1634411535,"post_id":69598746,"comment_id":123019206,"body_markdown":"welcome to SO. android studio is what you&#39;re using to develop your app, but your question doesn&#39;t involve the IDE at all. best to use `android` and not `android-studio`","body":"welcome to SO. android studio is what you&#39;re using to develop your app, but your question doesn&#39;t involve the IDE at all. best to use <code>android</code> and not <code>android-studio</code>"}],"answers":[{"tags":[],"owner":{"account_id":68365,"reputation":3382,"user_id":199498,"accept_rate":50,"display_name":"Alex"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634415152,"creation_date":1634415152,"answer_id":69599209,"question_id":69598746,"body_markdown":"You will have to store that data outside of the fragment. The fragment can be recreated for a lot of reasons not just by opening/closing the app. \r\n\r\nLook up repository pattern and decide where you want (or allowed) to store that data. (Shared preference, room (sqlite) database etc)","title":"How can I display a fragment without creating a new one?","body":"<p>You will have to store that data outside of the fragment. The fragment can be recreated for a lot of reasons not just by opening/closing the app.</p>\n<p>Look up repository pattern and decide where you want (or allowed) to store that data. (Shared preference, room (sqlite) database etc)</p>\n"}],"owner":{"account_id":22531097,"reputation":1,"user_id":16723131,"display_name":"michael ip"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1634415152,"creation_date":1634410973,"question_id":69598746,"body_markdown":"I have an app with a bottom navigation menu and it uses a switch case to change the fragment that is displayed\r\n```\r\npublic boolean onNavigationItemSelected(@NonNull MenuItem item) {\r\n                    Fragment selectedFragment = null;\r\n                    switch(item.getItemId()) {\r\n                        case R.id.nav_home:\r\n                            selectedFragment = new HomeFragment();\r\n                            break;\r\n                        case R.id.nav_classes:\r\n                            selectedFragment = new ClassesFragment();\r\n                            break;\r\n                        case R.id.nav_homework:\r\n                            selectedFragment = new HomeworkFragment();\r\n                            break;\r\n                    }\r\ngetSupportFragmentManager().beginTransaction().replace(R.id.fragment_container,\r\n                            selectedFragment).commit();\r\n                    return true;\r\n                }\r\n```\r\n\r\nHowever, I have an ArrayList in one of my fragments that holds information from user input that I need to be saved if the app is closed and opened again. With the way I have it now, it just creates a new fragment every time I click on a menu option. How can I make it so it opens/displays a preexisting fragment?\r\n\r\nThanks","title":"How can I display a fragment without creating a new one?","body":"<p>I have an app with a bottom navigation menu and it uses a switch case to change the fragment that is displayed</p>\n<pre><code>public boolean onNavigationItemSelected(@NonNull MenuItem item) {\n                    Fragment selectedFragment = null;\n                    switch(item.getItemId()) {\n                        case R.id.nav_home:\n                            selectedFragment = new HomeFragment();\n                            break;\n                        case R.id.nav_classes:\n                            selectedFragment = new ClassesFragment();\n                            break;\n                        case R.id.nav_homework:\n                            selectedFragment = new HomeworkFragment();\n                            break;\n                    }\ngetSupportFragmentManager().beginTransaction().replace(R.id.fragment_container,\n                            selectedFragment).commit();\n                    return true;\n                }\n</code></pre>\n<p>However, I have an ArrayList in one of my fragments that holds information from user input that I need to be saved if the app is closed and opened again. With the way I have it now, it just creates a new fragment every time I click on a menu option. How can I make it so it opens/displays a preexisting fragment?</p>\n<p>Thanks</p>\n"},{"tags":["java","spring-boot","log4j2"],"comments":[{"owner":{"account_id":17592368,"reputation":13891,"user_id":12763954,"display_name":"Olivier"},"score":1,"creation_date":1634371295,"post_id":69550850,"comment_id":123010204,"body_markdown":"Do you have the `log4j-layout-template-json` dependency, as mentioned in [the documentation](https://logging.apache.org/log4j/2.x/manual/json-template-layout.html)?","body":"Do you have the <code>log4j-layout-template-json</code> dependency, as mentioned in <a href=\"https://logging.apache.org/log4j/2.x/manual/json-template-layout.html\" rel=\"nofollow noreferrer\">the documentation</a>?"}],"answers":[{"tags":[],"owner":{"account_id":14446626,"reputation":2578,"user_id":10435528,"display_name":"devatherock"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1634413766,"creation_date":1634413766,"answer_id":69599040,"question_id":69550850,"body_markdown":"To use log4j2 for logging in spring boot, the `spring-boot-starter-logging` dependency needs to be excluded. Once I did that, I got the error `Console contains an invalid element or attribute &quot;JsonTemplateLayout&quot;`, which is due to the missing `log4j-layout-template-json` dependency that Olivier mentioned. After adding that dependency also, I got the expected JSON logs from log4j2 that looked like below:\r\n\r\n```\r\n{&quot;@timestamp&quot;:&quot;2021-10-16T19:39:28.199Z&quot;,&quot;log.level&quot;:&quot;INFO&quot;,&quot;message&quot;:&quot;No active profile set, falling back to default profiles: default&quot;,&quot;process.thread.name&quot;:&quot;main&quot;,&quot;log.logger&quot;:&quot;com.example.demo.Application&quot;,&quot;HOME_DIR&quot;:&quot;/some/path&quot;}\r\n{&quot;@timestamp&quot;:&quot;2021-10-16T19:39:28.791Z&quot;,&quot;log.level&quot;:&quot;INFO&quot;,&quot;message&quot;:&quot;Tomcat initialized with port(s): 8080 (http)&quot;,&quot;process.thread.name&quot;:&quot;main&quot;,&quot;log.logger&quot;:&quot;org.springframework.boot.web.embedded.tomcat.TomcatWebServer&quot;,&quot;HOME_DIR&quot;:&quot;/some/path&quot;}\r\n{&quot;@timestamp&quot;:&quot;2021-10-16T19:39:28.801Z&quot;,&quot;log.level&quot;:&quot;INFO&quot;,&quot;message&quot;:&quot;Initializing ProtocolHandler [\\&quot;http-nio-8080\\&quot;]&quot;,&quot;process.thread.name&quot;:&quot;main&quot;,&quot;log.logger&quot;:&quot;org.apache.coyote.http11.Http11NioProtocol&quot;,&quot;HOME_DIR&quot;:&quot;/some/path&quot;}\r\n{&quot;@timestamp&quot;:&quot;2021-10-16T19:39:28.802Z&quot;,&quot;log.level&quot;:&quot;INFO&quot;,&quot;message&quot;:&quot;Starting service [Tomcat]&quot;,&quot;process.thread.name&quot;:&quot;main&quot;,&quot;log.logger&quot;:&quot;org.apache.catalina.core.StandardService&quot;,&quot;HOME_DIR&quot;:&quot;/some/path&quot;}\r\n{&quot;@timestamp&quot;:&quot;2021-10-16T19:39:28.802Z&quot;,&quot;log.level&quot;:&quot;INFO&quot;,&quot;message&quot;:&quot;Starting Servlet engine: [Apache Tomcat/9.0.53]&quot;,&quot;process.thread.name&quot;:&quot;main&quot;,&quot;log.logger&quot;:&quot;org.apache.catalina.core.StandardEngine&quot;,&quot;HOME_DIR&quot;:&quot;/some/path&quot;}\r\n{&quot;@timestamp&quot;:&quot;2021-10-16T19:39:28.842Z&quot;,&quot;log.level&quot;:&quot;INFO&quot;,&quot;message&quot;:&quot;Initializing Spring embedded WebApplicationContext&quot;,&quot;process.thread.name&quot;:&quot;main&quot;,&quot;log.logger&quot;:&quot;org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/]&quot;,&quot;HOME_DIR&quot;:&quot;/some/path&quot;}\r\n{&quot;@timestamp&quot;:&quot;2021-10-16T19:39:28.842Z&quot;,&quot;log.level&quot;:&quot;INFO&quot;,&quot;message&quot;:&quot;Root WebApplicationContext: initialization completed in 616 ms&quot;,&quot;process.thread.name&quot;:&quot;main&quot;,&quot;log.logger&quot;:&quot;org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext&quot;,&quot;HOME_DIR&quot;:&quot;/some/path&quot;}\r\n{&quot;@timestamp&quot;:&quot;2021-10-16T19:39:29.149Z&quot;,&quot;log.level&quot;:&quot;INFO&quot;,&quot;message&quot;:&quot;Exposing 1 endpoint(s) beneath base path &#39;/actuator&#39;&quot;,&quot;process.thread.name&quot;:&quot;main&quot;,&quot;log.logger&quot;:&quot;org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver&quot;,&quot;HOME_DIR&quot;:&quot;/some/path&quot;}\r\n{&quot;@timestamp&quot;:&quot;2021-10-16T19:39:29.165Z&quot;,&quot;log.level&quot;:&quot;INFO&quot;,&quot;message&quot;:&quot;Starting ProtocolHandler [\\&quot;http-nio-8080\\&quot;]&quot;,&quot;process.thread.name&quot;:&quot;main&quot;,&quot;log.logger&quot;:&quot;org.apache.coyote.http11.Http11NioProtocol&quot;,&quot;HOME_DIR&quot;:&quot;/some/path&quot;}\r\n{&quot;@timestamp&quot;:&quot;2021-10-16T19:39:29.175Z&quot;,&quot;log.level&quot;:&quot;INFO&quot;,&quot;message&quot;:&quot;Tomcat started on port(s): 8080 (http) with context path &#39;&#39;&quot;,&quot;process.thread.name&quot;:&quot;main&quot;,&quot;log.logger&quot;:&quot;org.springframework.boot.web.embedded.tomcat.TomcatWebServer&quot;,&quot;HOME_DIR&quot;:&quot;/some/path&quot;}\r\n{&quot;@timestamp&quot;:&quot;2021-10-16T19:39:29.188Z&quot;,&quot;log.level&quot;:&quot;INFO&quot;,&quot;message&quot;:&quot;Started Application in 1.193 seconds (JVM running for 1.723)&quot;,&quot;process.thread.name&quot;:&quot;main&quot;,&quot;log.logger&quot;:&quot;com.example.demo.Application&quot;,&quot;HOME_DIR&quot;:&quot;/some/path&quot;}\r\n```\r\n\r\nBelow is the `pom.xml` I ended up with though the `logstash-logback-encoder` dependency is unused now:\r\n\r\n```xml\r\n    &lt;properties&gt;\r\n\t\t&lt;java.version&gt;11&lt;/java.version&gt;\r\n        &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n            &lt;version&gt;2.5.5&lt;/version&gt;\r\n            &lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n            &lt;version&gt;2.5.5&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-log4j2&lt;/artifactId&gt;\r\n            &lt;version&gt;2.5.5&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;log4j-layout-template-json&lt;/artifactId&gt;\r\n\t\t    &lt;version&gt;2.14.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;net.logstash.logback&lt;/groupId&gt;\r\n            &lt;artifactId&gt;logstash-logback-encoder&lt;/artifactId&gt;\r\n            &lt;version&gt;6.6&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n```","title":"Springboot with log4j2, structured JSON logging","body":"<p>To use log4j2 for logging in spring boot, the <code>spring-boot-starter-logging</code> dependency needs to be excluded. Once I did that, I got the error <code>Console contains an invalid element or attribute &quot;JsonTemplateLayout&quot;</code>, which is due to the missing <code>log4j-layout-template-json</code> dependency that Olivier mentioned. After adding that dependency also, I got the expected JSON logs from log4j2 that looked like below:</p>\n<pre><code>{&quot;@timestamp&quot;:&quot;2021-10-16T19:39:28.199Z&quot;,&quot;log.level&quot;:&quot;INFO&quot;,&quot;message&quot;:&quot;No active profile set, falling back to default profiles: default&quot;,&quot;process.thread.name&quot;:&quot;main&quot;,&quot;log.logger&quot;:&quot;com.example.demo.Application&quot;,&quot;HOME_DIR&quot;:&quot;/some/path&quot;}\n{&quot;@timestamp&quot;:&quot;2021-10-16T19:39:28.791Z&quot;,&quot;log.level&quot;:&quot;INFO&quot;,&quot;message&quot;:&quot;Tomcat initialized with port(s): 8080 (http)&quot;,&quot;process.thread.name&quot;:&quot;main&quot;,&quot;log.logger&quot;:&quot;org.springframework.boot.web.embedded.tomcat.TomcatWebServer&quot;,&quot;HOME_DIR&quot;:&quot;/some/path&quot;}\n{&quot;@timestamp&quot;:&quot;2021-10-16T19:39:28.801Z&quot;,&quot;log.level&quot;:&quot;INFO&quot;,&quot;message&quot;:&quot;Initializing ProtocolHandler [\\&quot;http-nio-8080\\&quot;]&quot;,&quot;process.thread.name&quot;:&quot;main&quot;,&quot;log.logger&quot;:&quot;org.apache.coyote.http11.Http11NioProtocol&quot;,&quot;HOME_DIR&quot;:&quot;/some/path&quot;}\n{&quot;@timestamp&quot;:&quot;2021-10-16T19:39:28.802Z&quot;,&quot;log.level&quot;:&quot;INFO&quot;,&quot;message&quot;:&quot;Starting service [Tomcat]&quot;,&quot;process.thread.name&quot;:&quot;main&quot;,&quot;log.logger&quot;:&quot;org.apache.catalina.core.StandardService&quot;,&quot;HOME_DIR&quot;:&quot;/some/path&quot;}\n{&quot;@timestamp&quot;:&quot;2021-10-16T19:39:28.802Z&quot;,&quot;log.level&quot;:&quot;INFO&quot;,&quot;message&quot;:&quot;Starting Servlet engine: [Apache Tomcat/9.0.53]&quot;,&quot;process.thread.name&quot;:&quot;main&quot;,&quot;log.logger&quot;:&quot;org.apache.catalina.core.StandardEngine&quot;,&quot;HOME_DIR&quot;:&quot;/some/path&quot;}\n{&quot;@timestamp&quot;:&quot;2021-10-16T19:39:28.842Z&quot;,&quot;log.level&quot;:&quot;INFO&quot;,&quot;message&quot;:&quot;Initializing Spring embedded WebApplicationContext&quot;,&quot;process.thread.name&quot;:&quot;main&quot;,&quot;log.logger&quot;:&quot;org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/]&quot;,&quot;HOME_DIR&quot;:&quot;/some/path&quot;}\n{&quot;@timestamp&quot;:&quot;2021-10-16T19:39:28.842Z&quot;,&quot;log.level&quot;:&quot;INFO&quot;,&quot;message&quot;:&quot;Root WebApplicationContext: initialization completed in 616 ms&quot;,&quot;process.thread.name&quot;:&quot;main&quot;,&quot;log.logger&quot;:&quot;org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext&quot;,&quot;HOME_DIR&quot;:&quot;/some/path&quot;}\n{&quot;@timestamp&quot;:&quot;2021-10-16T19:39:29.149Z&quot;,&quot;log.level&quot;:&quot;INFO&quot;,&quot;message&quot;:&quot;Exposing 1 endpoint(s) beneath base path '/actuator'&quot;,&quot;process.thread.name&quot;:&quot;main&quot;,&quot;log.logger&quot;:&quot;org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver&quot;,&quot;HOME_DIR&quot;:&quot;/some/path&quot;}\n{&quot;@timestamp&quot;:&quot;2021-10-16T19:39:29.165Z&quot;,&quot;log.level&quot;:&quot;INFO&quot;,&quot;message&quot;:&quot;Starting ProtocolHandler [\\&quot;http-nio-8080\\&quot;]&quot;,&quot;process.thread.name&quot;:&quot;main&quot;,&quot;log.logger&quot;:&quot;org.apache.coyote.http11.Http11NioProtocol&quot;,&quot;HOME_DIR&quot;:&quot;/some/path&quot;}\n{&quot;@timestamp&quot;:&quot;2021-10-16T19:39:29.175Z&quot;,&quot;log.level&quot;:&quot;INFO&quot;,&quot;message&quot;:&quot;Tomcat started on port(s): 8080 (http) with context path ''&quot;,&quot;process.thread.name&quot;:&quot;main&quot;,&quot;log.logger&quot;:&quot;org.springframework.boot.web.embedded.tomcat.TomcatWebServer&quot;,&quot;HOME_DIR&quot;:&quot;/some/path&quot;}\n{&quot;@timestamp&quot;:&quot;2021-10-16T19:39:29.188Z&quot;,&quot;log.level&quot;:&quot;INFO&quot;,&quot;message&quot;:&quot;Started Application in 1.193 seconds (JVM running for 1.723)&quot;,&quot;process.thread.name&quot;:&quot;main&quot;,&quot;log.logger&quot;:&quot;com.example.demo.Application&quot;,&quot;HOME_DIR&quot;:&quot;/some/path&quot;}\n</code></pre>\n<p>Below is the <code>pom.xml</code> I ended up with though the <code>logstash-logback-encoder</code> dependency is unused now:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;properties&gt;\n        &lt;java.version&gt;11&lt;/java.version&gt;\n        &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n            &lt;version&gt;2.5.5&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n            &lt;version&gt;2.5.5&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-log4j2&lt;/artifactId&gt;\n            &lt;version&gt;2.5.5&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-layout-template-json&lt;/artifactId&gt;\n            &lt;version&gt;2.14.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;net.logstash.logback&lt;/groupId&gt;\n            &lt;artifactId&gt;logstash-logback-encoder&lt;/artifactId&gt;\n            &lt;version&gt;6.6&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n"}],"owner":{"account_id":14482834,"reputation":3894,"user_id":10461625,"display_name":"PatPanda"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7346,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":69599040,"answer_count":1,"score":4,"last_activity_date":1634413766,"creation_date":1634107460,"question_id":69550850,"body_markdown":"Small question regarding how to achieve structured logging with a SpringBoot app, but using log4j2 (working with logback, but not log4j).\r\n\r\nI have a super simple SpringBoot app:\r\n\r\n```\r\n@RestController\r\n@SpringBootApplication\r\npublic class Application {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(Application.class, args);\r\n\t}\r\n\r\n\t@RequestMapping(&quot;/&quot;)\r\n\tpublic String index(@RequestHeader(&quot;accept&quot;) String acceptHeader) {\r\n\t\tMDC.put(&quot;acceptHeader&quot;, acceptHeader);\r\n\t\tLoggerFactory.getLogger(getClass()).info(&quot;Hello&quot;);\r\n\t\treturn &quot;Greetings from Spring Boot!&quot;;\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic CommandLineRunner commandLineRunner(ApplicationContext ctx) {\r\n\t\treturn args -&gt; function(ctx);\r\n\t}\r\n\r\n\tprivate void function(ApplicationContext ctx) {\r\n\t\tSystem.out.println(&quot;Let&#39;s inspect the beans provided by Spring Boot:&quot;);\r\n\t\tString[] beanNames = ctx.getBeanDefinitionNames();\r\n\t\tArrays.sort(beanNames);\r\n\t\tfor (String beanName : beanNames) {\r\n\t\t\tSystem.out.println(beanName);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n``` \r\n\r\nwith a simple pom:\r\n\r\n```\r\n    &lt;properties&gt;\r\n        &lt;java.version&gt;11&lt;/java.version&gt;\r\n        &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n            &lt;version&gt;2.5.5&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n            &lt;version&gt;2.5.5&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-log4j2&lt;/artifactId&gt;\r\n            &lt;version&gt;2.5.5&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;net.logstash.logback&lt;/groupId&gt;\r\n            &lt;artifactId&gt;logstash-logback-encoder&lt;/artifactId&gt;\r\n            &lt;version&gt;6.6&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n```\r\n\r\nwith a logback.xml (not log4j2.xml)\r\n\r\n```\r\n&lt;configuration&gt;\r\n    &lt;appender name=&quot;jsonConsoleAppender&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n        &lt;encoder class=&quot;net.logstash.logback.encoder.LogstashEncoder&quot;/&gt;\r\n    &lt;/appender&gt;\r\n    &lt;root level=&quot;INFO&quot;&gt;\r\n        &lt;appender-ref ref=&quot;jsonConsoleAppender&quot;/&gt;\r\n    &lt;/root&gt;\r\n&lt;/configuration&gt;\r\n```\r\n\r\nAnd this is working fine, very happy, I am seeing the logs in JSON format, structured, very happy.\r\n\r\nI am trying to get the same result, using log4j2.\r\nI thought it will &quot;work out of the box&quot; but when switching to log4j2.xml, the logs are back to non JSON.\r\n\r\nPlease note, in the pom.xml I have:\r\n\r\n```\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-log4j2&lt;/artifactId&gt;\r\n            &lt;version&gt;2.5.5&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n```\r\n\r\nAnd the log4j2.xml with I am trying:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;Configuration status=&quot;info&quot;&gt;\r\n    &lt;Appenders&gt;\r\n        &lt;Console name=&quot;Console&quot; target=&quot;SYSTEM_OUT&quot; follow=&quot;true&quot;&gt;\r\n            &lt;JsonTemplateLayout&gt;\r\n                &lt;EventTemplateAdditionalField key=&quot;HOME_DIR&quot; value=&quot;${env:HOME}&quot;/&gt;\r\n            &lt;/JsonTemplateLayout&gt;\r\n        &lt;/Console&gt;\r\n    &lt;/Appenders&gt;\r\n\t&lt;Loggers&gt;\r\n\t\t&lt;Root level=&quot;info&quot;&gt;\r\n\t\t\t&lt;AppenderRef ref=&quot;Console&quot; /&gt;\r\n\t\t&lt;/Root&gt;\r\n\t&lt;/Loggers&gt;\r\n&lt;/Configuration&gt;\r\n\r\n``` \r\n\r\nI am very puzzled why this would not yield a structured JSON logging, but lost the structured JSON.\r\n\r\nWhat went wrong please?","title":"Springboot with log4j2, structured JSON logging","body":"<p>Small question regarding how to achieve structured logging with a SpringBoot app, but using log4j2 (working with logback, but not log4j).</p>\n<p>I have a super simple SpringBoot app:</p>\n<pre><code>@RestController\n@SpringBootApplication\npublic class Application {\n\n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n\n    @RequestMapping(&quot;/&quot;)\n    public String index(@RequestHeader(&quot;accept&quot;) String acceptHeader) {\n        MDC.put(&quot;acceptHeader&quot;, acceptHeader);\n        LoggerFactory.getLogger(getClass()).info(&quot;Hello&quot;);\n        return &quot;Greetings from Spring Boot!&quot;;\n    }\n\n    @Bean\n    public CommandLineRunner commandLineRunner(ApplicationContext ctx) {\n        return args -&gt; function(ctx);\n    }\n\n    private void function(ApplicationContext ctx) {\n        System.out.println(&quot;Let's inspect the beans provided by Spring Boot:&quot;);\n        String[] beanNames = ctx.getBeanDefinitionNames();\n        Arrays.sort(beanNames);\n        for (String beanName : beanNames) {\n            System.out.println(beanName);\n        }\n    }\n\n}\n</code></pre>\n<p>with a simple pom:</p>\n<pre><code>    &lt;properties&gt;\n        &lt;java.version&gt;11&lt;/java.version&gt;\n        &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n            &lt;version&gt;2.5.5&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n            &lt;version&gt;2.5.5&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-log4j2&lt;/artifactId&gt;\n            &lt;version&gt;2.5.5&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;net.logstash.logback&lt;/groupId&gt;\n            &lt;artifactId&gt;logstash-logback-encoder&lt;/artifactId&gt;\n            &lt;version&gt;6.6&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n<p>with a logback.xml (not log4j2.xml)</p>\n<pre><code>&lt;configuration&gt;\n    &lt;appender name=&quot;jsonConsoleAppender&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\n        &lt;encoder class=&quot;net.logstash.logback.encoder.LogstashEncoder&quot;/&gt;\n    &lt;/appender&gt;\n    &lt;root level=&quot;INFO&quot;&gt;\n        &lt;appender-ref ref=&quot;jsonConsoleAppender&quot;/&gt;\n    &lt;/root&gt;\n&lt;/configuration&gt;\n</code></pre>\n<p>And this is working fine, very happy, I am seeing the logs in JSON format, structured, very happy.</p>\n<p>I am trying to get the same result, using log4j2.\nI thought it will &quot;work out of the box&quot; but when switching to log4j2.xml, the logs are back to non JSON.</p>\n<p>Please note, in the pom.xml I have:</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-log4j2&lt;/artifactId&gt;\n            &lt;version&gt;2.5.5&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>And the log4j2.xml with I am trying:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;Configuration status=&quot;info&quot;&gt;\n    &lt;Appenders&gt;\n        &lt;Console name=&quot;Console&quot; target=&quot;SYSTEM_OUT&quot; follow=&quot;true&quot;&gt;\n            &lt;JsonTemplateLayout&gt;\n                &lt;EventTemplateAdditionalField key=&quot;HOME_DIR&quot; value=&quot;${env:HOME}&quot;/&gt;\n            &lt;/JsonTemplateLayout&gt;\n        &lt;/Console&gt;\n    &lt;/Appenders&gt;\n    &lt;Loggers&gt;\n        &lt;Root level=&quot;info&quot;&gt;\n            &lt;AppenderRef ref=&quot;Console&quot; /&gt;\n        &lt;/Root&gt;\n    &lt;/Loggers&gt;\n&lt;/Configuration&gt;\n\n</code></pre>\n<p>I am very puzzled why this would not yield a structured JSON logging, but lost the structured JSON.</p>\n<p>What went wrong please?</p>\n"},{"tags":["java","web-scraping","htmlunit"],"comments":[{"owner":{"account_id":14514701,"reputation":714,"user_id":10484162,"display_name":"Ashish Mishra"},"score":0,"creation_date":1625410818,"post_id":68244888,"comment_id":120615159,"body_markdown":"java!=javascript","body":"java!=javascript"}],"answers":[{"tags":[],"owner":{"account_id":6163228,"reputation":2754,"user_id":4804091,"display_name":"RBRi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1625480869,"creation_date":1625480869,"answer_id":68254547,"question_id":68244888,"body_markdown":"Please set the options before getting the page\r\n\r\n    final WebClient webClient = new WebClient(BrowserVersion.BEST_SUPPORTED);\r\n    webClient.getOptions().setJavaScriptEnabled(true);\r\n    webClient.getOptions().setThrowExceptionOnScriptError(false);\r\n    \r\n    HtmlPage scrapePage = webClient.getPage(flashScraper.getScrapeUrl());\r\n    webClient.waitForBackgroundJavaScript(3000);\r\n\r\nI guess the error will still be there but because you set setThrowExceptionOnScriptError(false) the execution will no longer stop on the error.\r\n","title":"HtmlUnit - Error during JavaScript execution","body":"<p>Please set the options before getting the page</p>\n<pre><code>final WebClient webClient = new WebClient(BrowserVersion.BEST_SUPPORTED);\nwebClient.getOptions().setJavaScriptEnabled(true);\nwebClient.getOptions().setThrowExceptionOnScriptError(false);\n\nHtmlPage scrapePage = webClient.getPage(flashScraper.getScrapeUrl());\nwebClient.waitForBackgroundJavaScript(3000);\n</code></pre>\n<p>I guess the error will still be there but because you set setThrowExceptionOnScriptError(false) the execution will no longer stop on the error.</p>\n"},{"tags":[],"owner":{"account_id":14648450,"reputation":55,"user_id":10579093,"display_name":"Toni"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1625554240,"creation_date":1625554240,"answer_id":68265810,"question_id":68244888,"body_markdown":"After change the sequence of the parameters i still got following error - also the HtmlUnit Browser is forwarded to flashscore.com/unsupported\r\n\r\n    2021-07-06 08:46:15.869  WARN 14464 --- [nio-8080-exec-2] c.g.htmlunit.DefaultCssErrorHandler      : CSS warning: &#39;https://www.flashscore.com/res/_fs/build/livetableresponsive.2da0223.css&#39; [1:8910] Ignoring the whole rule.\r\n    2021-07-06 08:46:16.638  WARN 14464 --- [nio-8080-exec-2] c.g.htmlunit.IncorrectnessListenerImpl   : Obsolete content type encountered: &#39;text/javascript&#39;.\r\n    2021-07-06 08:46:16.783 ERROR 14464 --- [nio-8080-exec-2] c.g.h.j.DefaultJavaScriptErrorListener   : Error during JavaScript execution\r\n    \r\n    com.gargoylesoftware.htmlunit.ScriptException: TypeError: Cannot find function entries in object function Object() { [native code] }. (script in https://www.flashscore.com/unsupported/ from (31, 9) to (53, 10)#35)\r\n    \tat com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine$HtmlUnitContextAction.run(JavaScriptEngine.java:949) ~[htmlunit-2.50.0.jar:2.50.0]\r\n    \tat net.sourceforge.htmlunit.corejs.javascript.Context.call(Context.java:598) ~[htmlunit-core-js-2.50.0.jar:na]\r\n    \tat net.sourceforge.htmlunit.corejs.javascript.ContextFactory.call(ContextFactory.java:487) ~[htmlunit-core-js-2.50.0.jar:na]\r\n    \tat com.gargoylesoftware.htmlunit.javascript.HtmlUnitContextFactory.callSecured(HtmlUnitContextFactory.java:353) ~[htmlunit-2.50.0.jar:2.50.0]\r\n    \tat com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine.execute(JavaScriptEngine.java:829) ~[htmlunit-2.50.0.jar:2.50.0]\r\n    \tat com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine.execute(JavaScriptEngine.java:805) ~[htmlunit-2.50.0.jar:2.50.0]\r\n    \tat com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine.execute(JavaScriptEngine.java:796) ~[htmlunit-2.50.0.jar:2.50.0]\r\n    \tat com.gargoylesoftware.htmlunit.html.HtmlPage.executeJavaScript(HtmlPage.java:942) ~[htmlunit-2.50.0.jar:2.50.0]\r\n    \tat com.gargoylesoftware.htmlunit.html.ScriptElementSupport.executeInlineScriptIfNeeded(ScriptElementSupport.java:378) ~[htmlunit-2.50.0.jar:2.50.0]\r\n    \tat com.gargoylesoftware.htmlunit.html.ScriptElementSupport.executeScriptIfNeeded(ScriptElementSupport.java:230) ~[htmlunit-2.50.0.jar:2.50.0]\r\n    \tat com.gargoylesoftware.htmlunit.html.ScriptElementSupport$1.execute(ScriptElementSupport.java:120) ~[htmlunit-2.50.0.jar:2.50.0]\r\n    \tat com.gargoylesoftware.htmlunit.html.ScriptElementSupport.onAllChildrenAddedToPage(ScriptElementSupport.java:143) ~[htmlunit-2.50.0.jar:2.50.0]\r\n    \tat com.gargoylesoftware.htmlunit.html.HtmlScript.onAllChildrenAddedToPage(HtmlScript.java:191) ~[htmlunit-2.50.0.jar:2.50.0]\r\n    \tat com.gargoylesoftware.htmlunit.html.parser.neko.HtmlUnitNekoDOMBuilder.endElement(HtmlUnitNekoDOMBuilder.java:551) ~[htmlunit-2.50.0.jar:2.50.0]\r\n    \tat org.apache.xerces.parsers.AbstractSAXParser.endElement(Unknown Source) ~[xercesImpl-2.12.0.jar:na]\r\n    \tat com.gargoylesoftware.htmlunit.html.parser.neko.HtmlUnitNekoDOMBuilder.endElement(HtmlUnitNekoDOMBuilder.java:503) ~[htmlunit-2.50.0.jar:2.50.0]\r\n    \tat net.sourceforge.htmlunit.cyberneko.HTMLTagBalancer.callEndElement(HTMLTagBalancer.java:1216) ~[neko-htmlunit-2.50.0.jar:2.50.0]\r\n    \tat net.sourceforge.htmlunit.cyberneko.HTMLTagBalancer.endElement(HTMLTagBalancer.java:1156) ~[neko-htmlunit-2.50.0.jar:2.50.0]\r\n    \tat net.sourceforge.htmlunit.cyberneko.filters.DefaultFilter.endElement(DefaultFilter.java:219) ~[neko-htmlunit-2.50.0.jar:2.50.0]\r\n    \tat net.sourceforge.htmlunit.cyberneko.filters.NamespaceBinder.endElement(NamespaceBinder.java:312) ~[neko-htmlunit-2.50.0.jar:2.50.0]\r\n    \tat net.sourceforge.htmlunit.cyberneko.HTMLScanner$ContentScanner.scanEndElement(HTMLScanner.java:3189) ~[neko-htmlunit-2.50.0.jar:2.50.0]\r\n    \tat net.sourceforge.htmlunit.cyberneko.HTMLScanner$ContentScanner.scan(HTMLScanner.java:2114) ~[neko-htmlunit-2.50.0.jar:2.50.0]\r\n    \tat net.sourceforge.htmlunit.cyberneko.HTMLScanner.scanDocument(HTMLScanner.java:937) ~[neko-htmlunit-2.50.0.jar:2.50.0]\r\n    \tat net.sourceforge.htmlunit.cyberneko.HTMLConfiguration.parse(HTMLConfiguration.java:443) ~[neko-htmlunit-2.50.0.jar:2.50.0]\r\n    \tat net.sourceforge.htmlunit.cyberneko.HTMLConfiguration.parse(HTMLConfiguration.java:394) ~[neko-htmlunit-2.50.0.jar:2.50.0]\r\n    \tat org.apache.xerces.parsers.XMLParser.parse(Unknown Source) ~[xercesImpl-2.12.0.jar:na]\r\n    \tat com.gargoylesoftware.htmlunit.html.parser.neko.HtmlUnitNekoDOMBuilder.parse(HtmlUnitNekoDOMBuilder.java:751) ~[htmlunit-2.50.0.jar:2.50.0]\r\n    \tat com.gargoylesoftware.htmlunit.html.parser.neko.HtmlUnitNekoHtmlParser.parse(HtmlUnitNekoHtmlParser.java:208) ~[htmlunit-2.50.0.jar:2.50.0]\r\n    \tat com.gargoylesoftware.htmlunit.DefaultPageCreator.createHtmlPage(DefaultPageCreator.java:296) ~[htmlunit-2.50.0.jar:2.50.0]\r\n    \tat com.gargoylesoftware.htmlunit.DefaultPageCreator.createPage(DefaultPageCreator.java:216) ~[htmlunit-2.50.0.jar:2.50.0]\r\n    \tat com.gargoylesoftware.htmlunit.WebClient.loadWebResponseInto(WebClient.java:682) ~[htmlunit-2.50.0.jar:2.50.0]\r\n    \tat com.gargoylesoftware.htmlunit.WebClient.loadDownloadedResponses(WebClient.java:2493) ~[htmlunit-2.50.0.jar:2.50.0]\r\n    \tat com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine.doProcessPostponedActions(JavaScriptEngine.java:977) ~[htmlunit-2.50.0.jar:2.50.0]\r\n    \tat com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine$HtmlUnitContextAction.run(JavaScriptEngine.java:944) ~[htmlunit-2.50.0.jar:2.50.0]\r\n    \tat net.sourceforge.htmlunit.corejs.javascript.Context.call(Context.java:598) ~[htmlunit-core-js-2.50.0.jar:na]\r\n    \tat net.sourceforge.htmlunit.corejs.javascript.ContextFactory.call(ContextFactory.java:487) ~[htmlunit-core-js-2.50.0.jar:na]\r\n    \tat com.gargoylesoftware.htmlunit.javascript.HtmlUnitContextFactory.callSecured(HtmlUnitContextFactory.java:353) ~[htmlunit-2.50.0.jar:2.50.0]\r\n    \tat com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine.execute(JavaScriptEngine.java:829) ~[htmlunit-2.50.0.jar:2.50.0]\r\n    \tat com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine.execute(JavaScriptEngine.java:805) ~[htmlunit-2.50.0.jar:2.50.0]\r\n    \tat com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine.execute(JavaScriptEngine.java:111) ~[htmlunit-2.50.0.jar:2.50.0]\r\n    \tat com.gargoylesoftware.htmlunit.html.HtmlPage.loadExternalJavaScriptFile(HtmlPage.java:1022) ~[htmlunit-2.50.0.jar:2.50.0]\r\n    \tat com.gargoylesoftware.htmlunit.html.ScriptElementSupport.executeScriptIfNeeded(ScriptElementSupport.java:196) ~[htmlunit-2.50.0.jar:2.50.0]\r\n    \tat com.gargoylesoftware.htmlunit.html.ScriptElementSupport$1.execute(ScriptElementSupport.java:120) ~[htmlunit-2.50.0.jar:2.50.0]\r\n    \tat com.gargoylesoftware.htmlunit.html.ScriptElementSupport.onAllChildrenAddedToPage(ScriptElementSupport.java:143) ~[htmlunit-2.50.0.jar:2.50.0]\r\n    \tat com.gargoylesoftware.htmlunit.html.HtmlScript.onAllChildrenAddedToPage(HtmlScript.java:191) ~[htmlunit-2.50.0.jar:2.50.0]\r\n    \tat com.gargoylesoftware.htmlunit.html.parser.neko.HtmlUnitNekoDOMBuilder.endElement(HtmlUnitNekoDOMBuilder.java:551) ~[htmlunit-2.50.0.jar:2.50.0]\r\n    \tat org.apache.xerces.parsers.AbstractSAXParser.endElement(Unknown Source) ~[xercesImpl-2.12.0.jar:na]\r\n    \tat com.gargoylesoftware.htmlunit.html.parser.neko.HtmlUnitNekoDOMBuilder.endElement(HtmlUnitNekoDOMBuilder.java:503) ~[htmlunit-2.50.0.jar:2.50.0]\r\n    \tat net.sourceforge.htmlunit.cyberneko.HTMLTagBalancer.callEndElement(HTMLTagBalancer.java:1216) ~[neko-htmlunit-2.50.0.jar:2.50.0]\r\n    \tat net.sourceforge.htmlunit.cyberneko.HTMLTagBalancer.endElement(HTMLTagBalancer.java:1156) ~[neko-htmlunit-2.50.0.jar:2.50.0]\r\n    \tat net.sourceforge.htmlunit.cyberneko.filters.DefaultFilter.endElement(DefaultFilter.java:219) ~[neko-htmlunit-2.50.0.jar:2.50.0]\r\n    \tat net.sourceforge.htmlunit.cyberneko.filters.NamespaceBinder.endElement(NamespaceBinder.java:312) ~[neko-htmlunit-2.50.0.jar:2.50.0]\r\n    \tat net.sourceforge.htmlunit.cyberneko.HTMLScanner$ContentScanner.scanEndElement(HTMLScanner.java:3189) ~[neko-htmlunit-2.50.0.jar:2.50.0]\r\n    \tat net.sourceforge.htmlunit.cyberneko.HTMLScanner$ContentScanner.scan(HTMLScanner.java:2114) ~[neko-htmlunit-2.50.0.jar:2.50.0]\r\n    \tat net.sourceforge.htmlunit.cyberneko.HTMLScanner.scanDocument(HTMLScanner.java:937) ~[neko-htmlunit-2.50.0.jar:2.50.0]\r\n    \tat net.sourceforge.htmlunit.cyberneko.HTMLConfiguration.parse(HTMLConfiguration.java:443) ~[neko-htmlunit-2.50.0.jar:2.50.0]\r\n    \tat net.sourceforge.htmlunit.cyberneko.HTMLConfiguration.parse(HTMLConfiguration.java:394) ~[neko-htmlunit-2.50.0.jar:2.50.0]\r\n    \tat org.apache.xerces.parsers.XMLParser.parse(Unknown Source) ~[xercesImpl-2.12.0.jar:na]\r\n    \tat com.gargoylesoftware.htmlunit.html.parser.neko.HtmlUnitNekoDOMBuilder.parse(HtmlUnitNekoDOMBuilder.java:751) ~[htmlunit-2.50.0.jar:2.50.0]\r\n    \tat com.gargoylesoftware.htmlunit.html.parser.neko.HtmlUnitNekoHtmlParser.parse(HtmlUnitNekoHtmlParser.java:208) ~[htmlunit-2.50.0.jar:2.50.0]\r\n    \tat com.gargoylesoftware.htmlunit.DefaultPageCreator.createHtmlPage(DefaultPageCreator.java:296) ~[htmlunit-2.50.0.jar:2.50.0]\r\n    \tat com.gargoylesoftware.htmlunit.DefaultPageCreator.createPage(DefaultPageCreator.java:216) ~[htmlunit-2.50.0.jar:2.50.0]\r\n    \tat com.gargoylesoftware.htmlunit.WebClient.loadWebResponseInto(WebClient.java:682) ~[htmlunit-2.50.0.jar:2.50.0]\r\n    \tat com.gargoylesoftware.htmlunit.WebClient.loadWebResponseInto(WebClient.java:584) ~[htmlunit-2.50.0.jar:2.50.0]\r\n    \tat com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:499) ~[htmlunit-2.50.0.jar:2.50.0]\r\n    \tat com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:411) ~[htmlunit-2.50.0.jar:2.50.0]\r\n    \tat com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:546) ~[htmlunit-2.50.0.jar:2.50.0]\r\n    \tat com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:527) ~[htmlunit-2.50.0.jar:2.50.0]\r\n    \tat de.toniritter.controller.FlashScraperController.startScraping(FlashScraperController.java:68) ~[classes/:na]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:564) ~[na:na]\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197) ~[spring-web-5.3.8.jar:5.3.8]\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141) ~[spring-web-5.3.8.jar:5.3.8]\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106) ~[spring-webmvc-5.3.8.jar:5.3.8]\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894) ~[spring-webmvc-5.3.8.jar:5.3.8]\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.8.jar:5.3.8]\r\n    \tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.8.jar:5.3.8]\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1063) ~[spring-webmvc-5.3.8.jar:5.3.8]\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.8.jar:5.3.8]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.8.jar:5.3.8]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.8.jar:5.3.8]\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:681) ~[tomcat-embed-core-9.0.48.jar:4.0.FR]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.8.jar:5.3.8]\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.48.jar:4.0.FR]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:228) ~[tomcat-embed-core-9.0.48.jar:9.0.48]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163) ~[tomcat-embed-core-9.0.48.jar:9.0.48]\r\n    \tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.48.jar:9.0.48]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190) ~[tomcat-embed-core-9.0.48.jar:9.0.48]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163) ~[tomcat-embed-core-9.0.48.jar:9.0.48]\r\n    \tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.8.jar:5.3.8]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.8.jar:5.3.8]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190) ~[tomcat-embed-core-9.0.48.jar:9.0.48]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163) ~[tomcat-embed-core-9.0.48.jar:9.0.48]\r\n    \tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.8.jar:5.3.8]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.8.jar:5.3.8]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190) ~[tomcat-embed-core-9.0.48.jar:9.0.48]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163) ~[tomcat-embed-core-9.0.48.jar:9.0.48]\r\n    \tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.8.jar:5.3.8]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.8.jar:5.3.8]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190) ~[tomcat-embed-core-9.0.48.jar:9.0.48]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163) ~[tomcat-embed-core-9.0.48.jar:9.0.48]\r\n    \tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202) ~[tomcat-embed-core-9.0.48.jar:9.0.48]\r\n    \tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.48.jar:9.0.48]\r\n    \tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542) ~[tomcat-embed-core-9.0.48.jar:9.0.48]\r\n    \tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143) ~[tomcat-embed-core-9.0.48.jar:9.0.48]\r\n    \tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.48.jar:9.0.48]\r\n    \tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.48.jar:9.0.48]\r\n    \tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-9.0.48.jar:9.0.48]\r\n    \tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) ~[tomcat-embed-core-9.0.48.jar:9.0.48]\r\n    \tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.48.jar:9.0.48]\r\n    \tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893) ~[tomcat-embed-core-9.0.48.jar:9.0.48]\r\n    \tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1723) ~[tomcat-embed-core-9.0.48.jar:9.0.48]\r\n    \tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.48.jar:9.0.48]\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130) ~[na:na]\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630) ~[na:na]\r\n    \tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.48.jar:9.0.48]\r\n    \tat java.base/java.lang.Thread.run(Thread.java:832) ~[na:na]\r\n    Caused by: net.sourceforge.htmlunit.corejs.javascript.EcmaError: TypeError: Cannot find function entries in object function Object() { [native code] }. (script in https://www.flashscore.com/unsupported/ from (31, 9) to (53, 10)#35)\r\n    \tat net.sourceforge.htmlunit.corejs.javascript.ScriptRuntime.constructError(ScriptRuntime.java:4527) ~[htmlunit-core-js-2.50.0.jar:na]\r\n    \tat net.sourceforge.htmlunit.corejs.javascript.ScriptRuntime.constructError(ScriptRuntime.java:4508) ~[htmlunit-core-js-2.50.0.jar:na]\r\n    \tat net.sourceforge.htmlunit.corejs.javascript.ScriptRuntime.typeError(ScriptRuntime.java:4540) ~[htmlunit-core-js-2.50.0.jar:na]\r\n    \tat net.sourceforge.htmlunit.corejs.javascript.ScriptRuntime.typeErrorById(ScriptRuntime.java:4545) ~[htmlunit-core-js-2.50.0.jar:na]\r\n    \tat net.sourceforge.htmlunit.corejs.javascript.ScriptRuntime.notFunctionError(ScriptRuntime.java:4624) ~[htmlunit-core-js-2.50.0.jar:na]\r\n    \tat net.sourceforge.htmlunit.corejs.javascript.ScriptRuntime.getPropFunctionAndThisHelper(ScriptRuntime.java:2570) ~[htmlunit-core-js-2.50.0.jar:na]\r\n    \tat net.sourceforge.htmlunit.corejs.javascript.ScriptRuntime.getPropFunctionAndThis(ScriptRuntime.java:2553) ~[htmlunit-core-js-2.50.0.jar:na]\r\n    \tat net.sourceforge.htmlunit.corejs.javascript.Interpreter.interpretLoop(Interpreter.java:1663) ~[htmlunit-core-js-2.50.0.jar:na]\r\n    \tat net.sourceforge.htmlunit.corejs.javascript.Interpreter.interpret(Interpreter.java:1053) ~[htmlunit-core-js-2.50.0.jar:na]\r\n    \tat net.sourceforge.htmlunit.corejs.javascript.InterpretedFunction.call(InterpretedFunction.java:111) ~[htmlunit-core-js-2.50.0.jar:na]\r\n    \tat net.sourceforge.htmlunit.corejs.javascript.ContextFactory.doTopCall(ContextFactory.java:395) ~[htmlunit-core-js-2.50.0.jar:na]\r\n    \tat com.gargoylesoftware.htmlunit.javascript.HtmlUnitContextFactory.doTopCall(HtmlUnitContextFactory.java:339) ~[htmlunit-2.50.0.jar:2.50.0]\r\n    \tat net.sourceforge.htmlunit.corejs.javascript.ScriptRuntime.doTopCall(ScriptRuntime.java:3852) ~[htmlunit-core-js-2.50.0.jar:na]\r\n    \tat net.sourceforge.htmlunit.corejs.javascript.InterpretedFunction.exec(InterpretedFunction.java:123) ~[htmlunit-core-js-2.50.0.jar:na]\r\n    \tat com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine$2.doRun(JavaScriptEngine.java:820) ~[htmlunit-2.50.0.jar:2.50.0]\r\n    \tat com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine$HtmlUnitContextAction.run(JavaScriptEngine.java:934) ~[htmlunit-2.50.0.jar:2.50.0]\r\n    \t... 118 common frames omitted\r\n    \r\n    2021-07-06 08:46:17.757  INFO 14464 --- [Client@49a9c8bb] c.gargoylesoftware.htmlunit.WebConsole   : *** cookie &#39;fonce_current_user&#39; set (all pages): _ls_tracking=db75abda-de25-11eb-bb62-5e9401b680a6; _ga_3NV6GD9ZTT=GS1.1.1625553977.1.0.1625553977.60; _ga_HRK2668K68=GS1.1.1625553977.1.0.1625553977.0; _ga=GA1.1.1320121497.1625553977; fonce_current_session=0; fonce_current_day=0,2021-07-06; fonce_current_user=0\r\n    []","title":"HtmlUnit - Error during JavaScript execution","body":"<p>After change the sequence of the parameters i still got following error - also the HtmlUnit Browser is forwarded to flashscore.com/unsupported</p>\n<pre><code>2021-07-06 08:46:15.869  WARN 14464 --- [nio-8080-exec-2] c.g.htmlunit.DefaultCssErrorHandler      : CSS warning: 'https://www.flashscore.com/res/_fs/build/livetableresponsive.2da0223.css' [1:8910] Ignoring the whole rule.\n2021-07-06 08:46:16.638  WARN 14464 --- [nio-8080-exec-2] c.g.htmlunit.IncorrectnessListenerImpl   : Obsolete content type encountered: 'text/javascript'.\n2021-07-06 08:46:16.783 ERROR 14464 --- [nio-8080-exec-2] c.g.h.j.DefaultJavaScriptErrorListener   : Error during JavaScript execution\n\ncom.gargoylesoftware.htmlunit.ScriptException: TypeError: Cannot find function entries in object function Object() { [native code] }. (script in https://www.flashscore.com/unsupported/ from (31, 9) to (53, 10)#35)\n    at com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine$HtmlUnitContextAction.run(JavaScriptEngine.java:949) ~[htmlunit-2.50.0.jar:2.50.0]\n    at net.sourceforge.htmlunit.corejs.javascript.Context.call(Context.java:598) ~[htmlunit-core-js-2.50.0.jar:na]\n    at net.sourceforge.htmlunit.corejs.javascript.ContextFactory.call(ContextFactory.java:487) ~[htmlunit-core-js-2.50.0.jar:na]\n    at com.gargoylesoftware.htmlunit.javascript.HtmlUnitContextFactory.callSecured(HtmlUnitContextFactory.java:353) ~[htmlunit-2.50.0.jar:2.50.0]\n    at com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine.execute(JavaScriptEngine.java:829) ~[htmlunit-2.50.0.jar:2.50.0]\n    at com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine.execute(JavaScriptEngine.java:805) ~[htmlunit-2.50.0.jar:2.50.0]\n    at com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine.execute(JavaScriptEngine.java:796) ~[htmlunit-2.50.0.jar:2.50.0]\n    at com.gargoylesoftware.htmlunit.html.HtmlPage.executeJavaScript(HtmlPage.java:942) ~[htmlunit-2.50.0.jar:2.50.0]\n    at com.gargoylesoftware.htmlunit.html.ScriptElementSupport.executeInlineScriptIfNeeded(ScriptElementSupport.java:378) ~[htmlunit-2.50.0.jar:2.50.0]\n    at com.gargoylesoftware.htmlunit.html.ScriptElementSupport.executeScriptIfNeeded(ScriptElementSupport.java:230) ~[htmlunit-2.50.0.jar:2.50.0]\n    at com.gargoylesoftware.htmlunit.html.ScriptElementSupport$1.execute(ScriptElementSupport.java:120) ~[htmlunit-2.50.0.jar:2.50.0]\n    at com.gargoylesoftware.htmlunit.html.ScriptElementSupport.onAllChildrenAddedToPage(ScriptElementSupport.java:143) ~[htmlunit-2.50.0.jar:2.50.0]\n    at com.gargoylesoftware.htmlunit.html.HtmlScript.onAllChildrenAddedToPage(HtmlScript.java:191) ~[htmlunit-2.50.0.jar:2.50.0]\n    at com.gargoylesoftware.htmlunit.html.parser.neko.HtmlUnitNekoDOMBuilder.endElement(HtmlUnitNekoDOMBuilder.java:551) ~[htmlunit-2.50.0.jar:2.50.0]\n    at org.apache.xerces.parsers.AbstractSAXParser.endElement(Unknown Source) ~[xercesImpl-2.12.0.jar:na]\n    at com.gargoylesoftware.htmlunit.html.parser.neko.HtmlUnitNekoDOMBuilder.endElement(HtmlUnitNekoDOMBuilder.java:503) ~[htmlunit-2.50.0.jar:2.50.0]\n    at net.sourceforge.htmlunit.cyberneko.HTMLTagBalancer.callEndElement(HTMLTagBalancer.java:1216) ~[neko-htmlunit-2.50.0.jar:2.50.0]\n    at net.sourceforge.htmlunit.cyberneko.HTMLTagBalancer.endElement(HTMLTagBalancer.java:1156) ~[neko-htmlunit-2.50.0.jar:2.50.0]\n    at net.sourceforge.htmlunit.cyberneko.filters.DefaultFilter.endElement(DefaultFilter.java:219) ~[neko-htmlunit-2.50.0.jar:2.50.0]\n    at net.sourceforge.htmlunit.cyberneko.filters.NamespaceBinder.endElement(NamespaceBinder.java:312) ~[neko-htmlunit-2.50.0.jar:2.50.0]\n    at net.sourceforge.htmlunit.cyberneko.HTMLScanner$ContentScanner.scanEndElement(HTMLScanner.java:3189) ~[neko-htmlunit-2.50.0.jar:2.50.0]\n    at net.sourceforge.htmlunit.cyberneko.HTMLScanner$ContentScanner.scan(HTMLScanner.java:2114) ~[neko-htmlunit-2.50.0.jar:2.50.0]\n    at net.sourceforge.htmlunit.cyberneko.HTMLScanner.scanDocument(HTMLScanner.java:937) ~[neko-htmlunit-2.50.0.jar:2.50.0]\n    at net.sourceforge.htmlunit.cyberneko.HTMLConfiguration.parse(HTMLConfiguration.java:443) ~[neko-htmlunit-2.50.0.jar:2.50.0]\n    at net.sourceforge.htmlunit.cyberneko.HTMLConfiguration.parse(HTMLConfiguration.java:394) ~[neko-htmlunit-2.50.0.jar:2.50.0]\n    at org.apache.xerces.parsers.XMLParser.parse(Unknown Source) ~[xercesImpl-2.12.0.jar:na]\n    at com.gargoylesoftware.htmlunit.html.parser.neko.HtmlUnitNekoDOMBuilder.parse(HtmlUnitNekoDOMBuilder.java:751) ~[htmlunit-2.50.0.jar:2.50.0]\n    at com.gargoylesoftware.htmlunit.html.parser.neko.HtmlUnitNekoHtmlParser.parse(HtmlUnitNekoHtmlParser.java:208) ~[htmlunit-2.50.0.jar:2.50.0]\n    at com.gargoylesoftware.htmlunit.DefaultPageCreator.createHtmlPage(DefaultPageCreator.java:296) ~[htmlunit-2.50.0.jar:2.50.0]\n    at com.gargoylesoftware.htmlunit.DefaultPageCreator.createPage(DefaultPageCreator.java:216) ~[htmlunit-2.50.0.jar:2.50.0]\n    at com.gargoylesoftware.htmlunit.WebClient.loadWebResponseInto(WebClient.java:682) ~[htmlunit-2.50.0.jar:2.50.0]\n    at com.gargoylesoftware.htmlunit.WebClient.loadDownloadedResponses(WebClient.java:2493) ~[htmlunit-2.50.0.jar:2.50.0]\n    at com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine.doProcessPostponedActions(JavaScriptEngine.java:977) ~[htmlunit-2.50.0.jar:2.50.0]\n    at com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine$HtmlUnitContextAction.run(JavaScriptEngine.java:944) ~[htmlunit-2.50.0.jar:2.50.0]\n    at net.sourceforge.htmlunit.corejs.javascript.Context.call(Context.java:598) ~[htmlunit-core-js-2.50.0.jar:na]\n    at net.sourceforge.htmlunit.corejs.javascript.ContextFactory.call(ContextFactory.java:487) ~[htmlunit-core-js-2.50.0.jar:na]\n    at com.gargoylesoftware.htmlunit.javascript.HtmlUnitContextFactory.callSecured(HtmlUnitContextFactory.java:353) ~[htmlunit-2.50.0.jar:2.50.0]\n    at com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine.execute(JavaScriptEngine.java:829) ~[htmlunit-2.50.0.jar:2.50.0]\n    at com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine.execute(JavaScriptEngine.java:805) ~[htmlunit-2.50.0.jar:2.50.0]\n    at com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine.execute(JavaScriptEngine.java:111) ~[htmlunit-2.50.0.jar:2.50.0]\n    at com.gargoylesoftware.htmlunit.html.HtmlPage.loadExternalJavaScriptFile(HtmlPage.java:1022) ~[htmlunit-2.50.0.jar:2.50.0]\n    at com.gargoylesoftware.htmlunit.html.ScriptElementSupport.executeScriptIfNeeded(ScriptElementSupport.java:196) ~[htmlunit-2.50.0.jar:2.50.0]\n    at com.gargoylesoftware.htmlunit.html.ScriptElementSupport$1.execute(ScriptElementSupport.java:120) ~[htmlunit-2.50.0.jar:2.50.0]\n    at com.gargoylesoftware.htmlunit.html.ScriptElementSupport.onAllChildrenAddedToPage(ScriptElementSupport.java:143) ~[htmlunit-2.50.0.jar:2.50.0]\n    at com.gargoylesoftware.htmlunit.html.HtmlScript.onAllChildrenAddedToPage(HtmlScript.java:191) ~[htmlunit-2.50.0.jar:2.50.0]\n    at com.gargoylesoftware.htmlunit.html.parser.neko.HtmlUnitNekoDOMBuilder.endElement(HtmlUnitNekoDOMBuilder.java:551) ~[htmlunit-2.50.0.jar:2.50.0]\n    at org.apache.xerces.parsers.AbstractSAXParser.endElement(Unknown Source) ~[xercesImpl-2.12.0.jar:na]\n    at com.gargoylesoftware.htmlunit.html.parser.neko.HtmlUnitNekoDOMBuilder.endElement(HtmlUnitNekoDOMBuilder.java:503) ~[htmlunit-2.50.0.jar:2.50.0]\n    at net.sourceforge.htmlunit.cyberneko.HTMLTagBalancer.callEndElement(HTMLTagBalancer.java:1216) ~[neko-htmlunit-2.50.0.jar:2.50.0]\n    at net.sourceforge.htmlunit.cyberneko.HTMLTagBalancer.endElement(HTMLTagBalancer.java:1156) ~[neko-htmlunit-2.50.0.jar:2.50.0]\n    at net.sourceforge.htmlunit.cyberneko.filters.DefaultFilter.endElement(DefaultFilter.java:219) ~[neko-htmlunit-2.50.0.jar:2.50.0]\n    at net.sourceforge.htmlunit.cyberneko.filters.NamespaceBinder.endElement(NamespaceBinder.java:312) ~[neko-htmlunit-2.50.0.jar:2.50.0]\n    at net.sourceforge.htmlunit.cyberneko.HTMLScanner$ContentScanner.scanEndElement(HTMLScanner.java:3189) ~[neko-htmlunit-2.50.0.jar:2.50.0]\n    at net.sourceforge.htmlunit.cyberneko.HTMLScanner$ContentScanner.scan(HTMLScanner.java:2114) ~[neko-htmlunit-2.50.0.jar:2.50.0]\n    at net.sourceforge.htmlunit.cyberneko.HTMLScanner.scanDocument(HTMLScanner.java:937) ~[neko-htmlunit-2.50.0.jar:2.50.0]\n    at net.sourceforge.htmlunit.cyberneko.HTMLConfiguration.parse(HTMLConfiguration.java:443) ~[neko-htmlunit-2.50.0.jar:2.50.0]\n    at net.sourceforge.htmlunit.cyberneko.HTMLConfiguration.parse(HTMLConfiguration.java:394) ~[neko-htmlunit-2.50.0.jar:2.50.0]\n    at org.apache.xerces.parsers.XMLParser.parse(Unknown Source) ~[xercesImpl-2.12.0.jar:na]\n    at com.gargoylesoftware.htmlunit.html.parser.neko.HtmlUnitNekoDOMBuilder.parse(HtmlUnitNekoDOMBuilder.java:751) ~[htmlunit-2.50.0.jar:2.50.0]\n    at com.gargoylesoftware.htmlunit.html.parser.neko.HtmlUnitNekoHtmlParser.parse(HtmlUnitNekoHtmlParser.java:208) ~[htmlunit-2.50.0.jar:2.50.0]\n    at com.gargoylesoftware.htmlunit.DefaultPageCreator.createHtmlPage(DefaultPageCreator.java:296) ~[htmlunit-2.50.0.jar:2.50.0]\n    at com.gargoylesoftware.htmlunit.DefaultPageCreator.createPage(DefaultPageCreator.java:216) ~[htmlunit-2.50.0.jar:2.50.0]\n    at com.gargoylesoftware.htmlunit.WebClient.loadWebResponseInto(WebClient.java:682) ~[htmlunit-2.50.0.jar:2.50.0]\n    at com.gargoylesoftware.htmlunit.WebClient.loadWebResponseInto(WebClient.java:584) ~[htmlunit-2.50.0.jar:2.50.0]\n    at com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:499) ~[htmlunit-2.50.0.jar:2.50.0]\n    at com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:411) ~[htmlunit-2.50.0.jar:2.50.0]\n    at com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:546) ~[htmlunit-2.50.0.jar:2.50.0]\n    at com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:527) ~[htmlunit-2.50.0.jar:2.50.0]\n    at de.toniritter.controller.FlashScraperController.startScraping(FlashScraperController.java:68) ~[classes/:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:564) ~[na:na]\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197) ~[spring-web-5.3.8.jar:5.3.8]\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141) ~[spring-web-5.3.8.jar:5.3.8]\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106) ~[spring-webmvc-5.3.8.jar:5.3.8]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894) ~[spring-webmvc-5.3.8.jar:5.3.8]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.8.jar:5.3.8]\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.8.jar:5.3.8]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1063) ~[spring-webmvc-5.3.8.jar:5.3.8]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.8.jar:5.3.8]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.8.jar:5.3.8]\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.8.jar:5.3.8]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:681) ~[tomcat-embed-core-9.0.48.jar:4.0.FR]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.8.jar:5.3.8]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.48.jar:4.0.FR]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:228) ~[tomcat-embed-core-9.0.48.jar:9.0.48]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163) ~[tomcat-embed-core-9.0.48.jar:9.0.48]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.48.jar:9.0.48]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190) ~[tomcat-embed-core-9.0.48.jar:9.0.48]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163) ~[tomcat-embed-core-9.0.48.jar:9.0.48]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.8.jar:5.3.8]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.8.jar:5.3.8]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190) ~[tomcat-embed-core-9.0.48.jar:9.0.48]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163) ~[tomcat-embed-core-9.0.48.jar:9.0.48]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.8.jar:5.3.8]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.8.jar:5.3.8]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190) ~[tomcat-embed-core-9.0.48.jar:9.0.48]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163) ~[tomcat-embed-core-9.0.48.jar:9.0.48]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.8.jar:5.3.8]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.8.jar:5.3.8]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190) ~[tomcat-embed-core-9.0.48.jar:9.0.48]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163) ~[tomcat-embed-core-9.0.48.jar:9.0.48]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202) ~[tomcat-embed-core-9.0.48.jar:9.0.48]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.48.jar:9.0.48]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542) ~[tomcat-embed-core-9.0.48.jar:9.0.48]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143) ~[tomcat-embed-core-9.0.48.jar:9.0.48]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.48.jar:9.0.48]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.48.jar:9.0.48]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-9.0.48.jar:9.0.48]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) ~[tomcat-embed-core-9.0.48.jar:9.0.48]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.48.jar:9.0.48]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893) ~[tomcat-embed-core-9.0.48.jar:9.0.48]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1723) ~[tomcat-embed-core-9.0.48.jar:9.0.48]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.48.jar:9.0.48]\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130) ~[na:na]\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630) ~[na:na]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.48.jar:9.0.48]\n    at java.base/java.lang.Thread.run(Thread.java:832) ~[na:na]\nCaused by: net.sourceforge.htmlunit.corejs.javascript.EcmaError: TypeError: Cannot find function entries in object function Object() { [native code] }. (script in https://www.flashscore.com/unsupported/ from (31, 9) to (53, 10)#35)\n    at net.sourceforge.htmlunit.corejs.javascript.ScriptRuntime.constructError(ScriptRuntime.java:4527) ~[htmlunit-core-js-2.50.0.jar:na]\n    at net.sourceforge.htmlunit.corejs.javascript.ScriptRuntime.constructError(ScriptRuntime.java:4508) ~[htmlunit-core-js-2.50.0.jar:na]\n    at net.sourceforge.htmlunit.corejs.javascript.ScriptRuntime.typeError(ScriptRuntime.java:4540) ~[htmlunit-core-js-2.50.0.jar:na]\n    at net.sourceforge.htmlunit.corejs.javascript.ScriptRuntime.typeErrorById(ScriptRuntime.java:4545) ~[htmlunit-core-js-2.50.0.jar:na]\n    at net.sourceforge.htmlunit.corejs.javascript.ScriptRuntime.notFunctionError(ScriptRuntime.java:4624) ~[htmlunit-core-js-2.50.0.jar:na]\n    at net.sourceforge.htmlunit.corejs.javascript.ScriptRuntime.getPropFunctionAndThisHelper(ScriptRuntime.java:2570) ~[htmlunit-core-js-2.50.0.jar:na]\n    at net.sourceforge.htmlunit.corejs.javascript.ScriptRuntime.getPropFunctionAndThis(ScriptRuntime.java:2553) ~[htmlunit-core-js-2.50.0.jar:na]\n    at net.sourceforge.htmlunit.corejs.javascript.Interpreter.interpretLoop(Interpreter.java:1663) ~[htmlunit-core-js-2.50.0.jar:na]\n    at net.sourceforge.htmlunit.corejs.javascript.Interpreter.interpret(Interpreter.java:1053) ~[htmlunit-core-js-2.50.0.jar:na]\n    at net.sourceforge.htmlunit.corejs.javascript.InterpretedFunction.call(InterpretedFunction.java:111) ~[htmlunit-core-js-2.50.0.jar:na]\n    at net.sourceforge.htmlunit.corejs.javascript.ContextFactory.doTopCall(ContextFactory.java:395) ~[htmlunit-core-js-2.50.0.jar:na]\n    at com.gargoylesoftware.htmlunit.javascript.HtmlUnitContextFactory.doTopCall(HtmlUnitContextFactory.java:339) ~[htmlunit-2.50.0.jar:2.50.0]\n    at net.sourceforge.htmlunit.corejs.javascript.ScriptRuntime.doTopCall(ScriptRuntime.java:3852) ~[htmlunit-core-js-2.50.0.jar:na]\n    at net.sourceforge.htmlunit.corejs.javascript.InterpretedFunction.exec(InterpretedFunction.java:123) ~[htmlunit-core-js-2.50.0.jar:na]\n    at com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine$2.doRun(JavaScriptEngine.java:820) ~[htmlunit-2.50.0.jar:2.50.0]\n    at com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine$HtmlUnitContextAction.run(JavaScriptEngine.java:934) ~[htmlunit-2.50.0.jar:2.50.0]\n    ... 118 common frames omitted\n\n2021-07-06 08:46:17.757  INFO 14464 --- [Client@49a9c8bb] c.gargoylesoftware.htmlunit.WebConsole   : *** cookie 'fonce_current_user' set (all pages): _ls_tracking=db75abda-de25-11eb-bb62-5e9401b680a6; _ga_3NV6GD9ZTT=GS1.1.1625553977.1.0.1625553977.60; _ga_HRK2668K68=GS1.1.1625553977.1.0.1625553977.0; _ga=GA1.1.1320121497.1625553977; fonce_current_session=0; fonce_current_day=0,2021-07-06; fonce_current_user=0\n[]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6163228,"reputation":2754,"user_id":4804091,"display_name":"RBRi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1625635630,"creation_date":1625635630,"answer_id":68280508,"question_id":68244888,"body_markdown":"This code works here without the exception - i guess you do not use the latest version.\r\n\r\n        String url = &quot;https://flashScore.com&quot;;\r\n\r\n        try (final WebClient webClient = new WebClient(BrowserVersion.BEST_SUPPORTED)) {\r\n            HtmlPage page = webClient.getPage(url);\r\n            webClient.waitForBackgroundJavaScript(3_000);\r\n\r\n            System.out.println();\r\n            System.out.println();\r\n            System.out.println(&quot;----------------&quot;);\r\n            System.out.println(page.asNormalizedText());\r\n            System.out.println(&quot;----------------&quot;);\r\n        }\r\n\r\nBut i end up on this page\r\n\r\n    ----------------\r\n    FlashScore.com\r\n    We can&#180;t display the page, because your browser doesn&#180;t support the required functions.\r\n    If you want to visit the lite version of our website, tap on the following link.\r\n    Go to www.flashscore.mobi\r\n    You can also download one of the modern browsers:\r\n    Chrome | Firefox | Edge\r\n    ----------------\r\n\r\nI have no idea about the browser check the page does. Maybe you can use this sample code and have al look on the network traffic (using Charles or Fiddler) to get an idea what is wrong. Or maybe the check is done in plain javascript on the client. If you think you found the reason feel free to open an issue at github and i will try to make HtmlUnit more compatible.","title":"HtmlUnit - Error during JavaScript execution","body":"<p>This code works here without the exception - i guess you do not use the latest version.</p>\n<pre><code>    String url = &quot;https://flashScore.com&quot;;\n\n    try (final WebClient webClient = new WebClient(BrowserVersion.BEST_SUPPORTED)) {\n        HtmlPage page = webClient.getPage(url);\n        webClient.waitForBackgroundJavaScript(3_000);\n\n        System.out.println();\n        System.out.println();\n        System.out.println(&quot;----------------&quot;);\n        System.out.println(page.asNormalizedText());\n        System.out.println(&quot;----------------&quot;);\n    }\n</code></pre>\n<p>But i end up on this page</p>\n<pre><code>----------------\nFlashScore.com\nWe cant display the page, because your browser doesnt support the required functions.\nIf you want to visit the lite version of our website, tap on the following link.\nGo to www.flashscore.mobi\nYou can also download one of the modern browsers:\nChrome | Firefox | Edge\n----------------\n</code></pre>\n<p>I have no idea about the browser check the page does. Maybe you can use this sample code and have al look on the network traffic (using Charles or Fiddler) to get an idea what is wrong. Or maybe the check is done in plain javascript on the client. If you think you found the reason feel free to open an issue at github and i will try to make HtmlUnit more compatible.</p>\n"}],"owner":{"account_id":14648450,"reputation":55,"user_id":10579093,"display_name":"Toni"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1781,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1634413608,"creation_date":1625403028,"question_id":68244888,"body_markdown":"I want to scrape flashScore.com webpage which is fully rendered during visit in Javascript. I Use HtmlUnit for rendering and have now the first problem already and cant scrape the page at all.\r\n\r\n    @PostMapping(&quot;/startScraping&quot;)\r\n\tpublic ResponseEntity&lt;FlashScraper&gt; startScraping(@NonNull @RequestBody FlashScraper flashScraper) throws FailingHttpStatusCodeException, MalformedURLException, IOException {\r\n\t\tlogger.info(&quot;startScraping request incoming&quot;);\r\n\t\tlogger.info(&quot;Call URL: &quot; + flashScraper.getScrapeUrl());\r\n\t\t\r\n\t\t\r\n\t\tfinal WebClient webClient = new WebClient(BrowserVersion.BEST_SUPPORTED);\r\n\t\t\r\n\t\tHtmlPage scrapePage = webClient.getPage(flashScraper.getScrapeUrl());\r\n\t\twebClient.getOptions().setJavaScriptEnabled(true);\r\n\t\twebClient.getOptions().setThrowExceptionOnScriptError(false);\r\n\t\twebClient.waitForBackgroundJavaScript(3000);\r\n\t\t\r\n\t\tSystem.out.println(scrapePage.getByXPath(&quot;//*[@id=\\&quot;g_25_rwPxTVj1\\&quot;]&quot;));\r\n\t\t\r\n\t\treturn new ResponseEntity(flashScraper, HttpStatus.OK);\r\n\t}\r\n\r\nAfter send a POST request to startScraping endpoint, i got following exception\r\n\r\n    2021-07-04 14:43:57.569  WARN 14872 --- [nio-8080-exec-2] c.g.htmlunit.DefaultCssErrorHandler      : CSS warning: &#39;https://www.flashscore.com/res/_fs/build/livetableresponsive.2da0223.css&#39; [1:8910] Ignoring the whole rule.\r\n    2021-07-04 14:43:58.035  WARN 14872 --- [nio-8080-exec-2] c.g.htmlunit.IncorrectnessListenerImpl   : Obsolete content type encountered: &#39;text/javascript&#39;.\r\n    2021-07-04 14:43:58.175 ERROR 14872 --- [nio-8080-exec-2] c.g.h.j.DefaultJavaScriptErrorListener   : Error during JavaScript execution com.gargoylesoftware.htmlunit.ScriptException: TypeError: Cannot find function entries in object function Object() { [native code] }. (script in https://www.flashscore.com/unsupported/ from (31, 9) to (53, 10)#35) \r\n    at com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine$HtmlUnitContextAction.run(JavaScriptEngine.java:949) ~[htmlunit-2.50.0.jar:2.50.0]\r\n\tat net.sourceforge.htmlunit.corejs.javascript.Context.call(Context.java:598) ~[htmlunit-core-js-2.50.0.jar:na] \r\n    at net.sourceforge.htmlunit.corejs.javascript.ContextFactory.call(ContextFactory.java:487) ~[htmlunit-core-js-2.50.0.jar:na]\r\n    at com.gargoylesoftware.htmlunit.javascript.HtmlUnitContextFactory.callSecured(HtmlUnitContextFactory.java:353) ~[htmlunit-2.50.0.jar:2.50.0]\r\n\r\nDo you have any doubt where the problem is?\r\n\r\nThx\r\nT.","title":"HtmlUnit - Error during JavaScript execution","body":"<p>I want to scrape flashScore.com webpage which is fully rendered during visit in Javascript. I Use HtmlUnit for rendering and have now the first problem already and cant scrape the page at all.</p>\n<pre><code>@PostMapping(&quot;/startScraping&quot;)\npublic ResponseEntity&lt;FlashScraper&gt; startScraping(@NonNull @RequestBody FlashScraper flashScraper) throws FailingHttpStatusCodeException, MalformedURLException, IOException {\n    logger.info(&quot;startScraping request incoming&quot;);\n    logger.info(&quot;Call URL: &quot; + flashScraper.getScrapeUrl());\n    \n    \n    final WebClient webClient = new WebClient(BrowserVersion.BEST_SUPPORTED);\n    \n    HtmlPage scrapePage = webClient.getPage(flashScraper.getScrapeUrl());\n    webClient.getOptions().setJavaScriptEnabled(true);\n    webClient.getOptions().setThrowExceptionOnScriptError(false);\n    webClient.waitForBackgroundJavaScript(3000);\n    \n    System.out.println(scrapePage.getByXPath(&quot;//*[@id=\\&quot;g_25_rwPxTVj1\\&quot;]&quot;));\n    \n    return new ResponseEntity(flashScraper, HttpStatus.OK);\n}\n</code></pre>\n<p>After send a POST request to startScraping endpoint, i got following exception</p>\n<pre><code>2021-07-04 14:43:57.569  WARN 14872 --- [nio-8080-exec-2] c.g.htmlunit.DefaultCssErrorHandler      : CSS warning: 'https://www.flashscore.com/res/_fs/build/livetableresponsive.2da0223.css' [1:8910] Ignoring the whole rule.\n2021-07-04 14:43:58.035  WARN 14872 --- [nio-8080-exec-2] c.g.htmlunit.IncorrectnessListenerImpl   : Obsolete content type encountered: 'text/javascript'.\n2021-07-04 14:43:58.175 ERROR 14872 --- [nio-8080-exec-2] c.g.h.j.DefaultJavaScriptErrorListener   : Error during JavaScript execution com.gargoylesoftware.htmlunit.ScriptException: TypeError: Cannot find function entries in object function Object() { [native code] }. (script in https://www.flashscore.com/unsupported/ from (31, 9) to (53, 10)#35) \nat com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine$HtmlUnitContextAction.run(JavaScriptEngine.java:949) ~[htmlunit-2.50.0.jar:2.50.0]\nat net.sourceforge.htmlunit.corejs.javascript.Context.call(Context.java:598) ~[htmlunit-core-js-2.50.0.jar:na] \nat net.sourceforge.htmlunit.corejs.javascript.ContextFactory.call(ContextFactory.java:487) ~[htmlunit-core-js-2.50.0.jar:na]\nat com.gargoylesoftware.htmlunit.javascript.HtmlUnitContextFactory.callSecured(HtmlUnitContextFactory.java:353) ~[htmlunit-2.50.0.jar:2.50.0]\n</code></pre>\n<p>Do you have any doubt where the problem is?</p>\n<p>Thx\nT.</p>\n"},{"tags":["java","akka-stream"],"answers":[{"tags":[],"owner":{"account_id":910136,"reputation":1710,"user_id":944174,"accept_rate":56,"display_name":"artur"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1628638026,"creation_date":1628616841,"answer_id":68731248,"question_id":68722628,"body_markdown":"The `Sink.cancelled()` cancels upstream immediately (https://doc.akka.io/docs/akka/current/stream/operators/Sink/cancelled.html). \r\n\r\nHowever your `Partition` is created with eagerCancel set to `false`\r\n\r\n```\r\n\r\n  /**\r\n   * Create a new `Partition` operator with the specified input type, `eagerCancel` is `false`.\r\n   *\r\n   * @param clazz a type hint for this method\r\n   * @param outputCount number of output ports\r\n   * @param partitioner function deciding which output each element will be targeted\r\n   */\r\n  def create[T](\r\n      @unused clazz: Class[T],\r\n      outputCount: Int,\r\n      partitioner: function.Function[T, Integer]): Graph[UniformFanOutShape[T, T], NotUsed] =\r\n    new scaladsl.Partition(outputCount, partitioner.apply, eagerCancel = false)\r\n\r\n```\r\n\r\nwhich means that the `Partition` will only cancel when ALL of its downstream connections cancel. This is not what you want. But you don&#39;t want `eagerCancel=true` either, because that means that the first connection over the limit will zap the whole `Partition` and therefore all your connections.. basically trashing the whole server.\r\n\r\nPerhaps it&#39;s useful to think about the situation here in terms of nested streams. The top level `Source&lt;IncomingConnection&gt;` represent a stream of accepted TCP connections. You don&#39;t want to cancel that stream. If you do, you just killed your server. Every `IncomingConnection` represents an individual TCP connection. The exchange of bytes happening on such connection is also represented as a stream. It is this stream that you want to cancel for every connection above the threshold.\r\n\r\nTo do that you can define a connection cancelling `Sink` like that:\r\n\r\n```\r\nSink&lt;IncomingConnection, CompletionStage&lt;Done&gt;&gt;\r\n      connectionCancellingSink =\r\n      Sink.foreach(\r\n        ic -&gt;\r\n          ic.handleWith(\r\n            Flow.fromSinkAndSource(Sink.cancelled(), Source.empty()),\r\n            actorSystem));\r\n\r\n```\r\n\r\nThe `IncomingConnection` allows you to attach a handler using `handleWith` method. For that you need a `Flow` as you both consume bytes from client and potentially send bytes to client too (incoming bytes go into the `Flow` and whatever you want to send back to the client you need to produce on the output of the `Flow`). In our case we just want to cancel that stream immediately. You can use `Flow.fromSinkAndSource` to get a `Flow` out of... `Sink` and `Source`. You can leverage that to plugin `Sink.cancelled` and `Source.empty`. So `Source.empty` means we won&#39;t send any bytes to the connection and `Sink.cancelled` will immediately cancel the stream and hopefully the underlying TCP connection. Let&#39;s give it a shot. \r\n\r\nLast thing to do is to plugin our new cancelling `Sink` to the `Partition`\r\n\r\n```\r\nSinkShape&lt;IncomingConnection&gt; sinkCancelled =\r\n            builder.add(connectionCancellingSink);\r\n//...the rest stays the same\r\n builder.from(partition.out(0))\r\n              .to(sinkCancelled);\r\n         \r\n```\r\n\r\nIf you do that, on the third connection you will see the following message:\r\n\r\n```\r\nNot aborting connection from 127.0.0.1:49874 because downstream cancelled stream without failure\r\n```\r\n\r\nSo `Sink.cancelled()` is not really triggering what you want. Let&#39;s redefine our cancelling `Flow`:\r\n\r\n```\r\nSink&lt;IncomingConnection, CompletionStage&lt;Done&gt;&gt;\r\n      connectionCancellingSink =\r\n      Sink.foreach(\r\n        ic -&gt;\r\n          ic.handleWith(\r\n            Flow.fromSinkAndSource(Sink.ignore(),\r\n                                   Source.failed(new Throwable(&quot;killed&quot;))),\r\n            actorSystem));\r\n```\r\n\r\nNow, this is using `Sink.ignore()` to just ignore the incoming bytes but fails the stream via `Source.failed(...)`. This will cause the connection to be terminated immediately and the stracktrace will be printed on the server output. If you want to keep it quiet, you can create exception without stacktrace:\r\n\r\n```\r\npublic static class TerminatedException extends Exception\r\n  {\r\n    public TerminatedException(String message)\r\n    {\r\n      super(message, null, false, false);\r\n    }\r\n  }\r\n```\r\n\r\nand then use that to fail your connection stream\r\n\r\n```\r\nFlow.fromSinkAndSource(Sink.ignore(),\r\n                       Source.failed(\r\n                         new TerminatedException((&quot;killed&quot;))))\r\n   \r\n```\r\n\r\nthat way you will get cleaner logs. \r\n\r\n\r\n","title":"How to prevent Akka TCP Stream of incoming connections from connecting after a configured max number of connections have connected?","body":"<p>The <code>Sink.cancelled()</code> cancels upstream immediately (<a href=\"https://doc.akka.io/docs/akka/current/stream/operators/Sink/cancelled.html\" rel=\"nofollow noreferrer\">https://doc.akka.io/docs/akka/current/stream/operators/Sink/cancelled.html</a>).</p>\n<p>However your <code>Partition</code> is created with eagerCancel set to <code>false</code></p>\n<pre><code>\n  /**\n   * Create a new `Partition` operator with the specified input type, `eagerCancel` is `false`.\n   *\n   * @param clazz a type hint for this method\n   * @param outputCount number of output ports\n   * @param partitioner function deciding which output each element will be targeted\n   */\n  def create[T](\n      @unused clazz: Class[T],\n      outputCount: Int,\n      partitioner: function.Function[T, Integer]): Graph[UniformFanOutShape[T, T], NotUsed] =\n    new scaladsl.Partition(outputCount, partitioner.apply, eagerCancel = false)\n\n</code></pre>\n<p>which means that the <code>Partition</code> will only cancel when ALL of its downstream connections cancel. This is not what you want. But you don't want <code>eagerCancel=true</code> either, because that means that the first connection over the limit will zap the whole <code>Partition</code> and therefore all your connections.. basically trashing the whole server.</p>\n<p>Perhaps it's useful to think about the situation here in terms of nested streams. The top level <code>Source&lt;IncomingConnection&gt;</code> represent a stream of accepted TCP connections. You don't want to cancel that stream. If you do, you just killed your server. Every <code>IncomingConnection</code> represents an individual TCP connection. The exchange of bytes happening on such connection is also represented as a stream. It is this stream that you want to cancel for every connection above the threshold.</p>\n<p>To do that you can define a connection cancelling <code>Sink</code> like that:</p>\n<pre><code>Sink&lt;IncomingConnection, CompletionStage&lt;Done&gt;&gt;\n      connectionCancellingSink =\n      Sink.foreach(\n        ic -&gt;\n          ic.handleWith(\n            Flow.fromSinkAndSource(Sink.cancelled(), Source.empty()),\n            actorSystem));\n\n</code></pre>\n<p>The <code>IncomingConnection</code> allows you to attach a handler using <code>handleWith</code> method. For that you need a <code>Flow</code> as you both consume bytes from client and potentially send bytes to client too (incoming bytes go into the <code>Flow</code> and whatever you want to send back to the client you need to produce on the output of the <code>Flow</code>). In our case we just want to cancel that stream immediately. You can use <code>Flow.fromSinkAndSource</code> to get a <code>Flow</code> out of... <code>Sink</code> and <code>Source</code>. You can leverage that to plugin <code>Sink.cancelled</code> and <code>Source.empty</code>. So <code>Source.empty</code> means we won't send any bytes to the connection and <code>Sink.cancelled</code> will immediately cancel the stream and hopefully the underlying TCP connection. Let's give it a shot.</p>\n<p>Last thing to do is to plugin our new cancelling <code>Sink</code> to the <code>Partition</code></p>\n<pre><code>SinkShape&lt;IncomingConnection&gt; sinkCancelled =\n            builder.add(connectionCancellingSink);\n//...the rest stays the same\n builder.from(partition.out(0))\n              .to(sinkCancelled);\n         \n</code></pre>\n<p>If you do that, on the third connection you will see the following message:</p>\n<pre><code>Not aborting connection from 127.0.0.1:49874 because downstream cancelled stream without failure\n</code></pre>\n<p>So <code>Sink.cancelled()</code> is not really triggering what you want. Let's redefine our cancelling <code>Flow</code>:</p>\n<pre><code>Sink&lt;IncomingConnection, CompletionStage&lt;Done&gt;&gt;\n      connectionCancellingSink =\n      Sink.foreach(\n        ic -&gt;\n          ic.handleWith(\n            Flow.fromSinkAndSource(Sink.ignore(),\n                                   Source.failed(new Throwable(&quot;killed&quot;))),\n            actorSystem));\n</code></pre>\n<p>Now, this is using <code>Sink.ignore()</code> to just ignore the incoming bytes but fails the stream via <code>Source.failed(...)</code>. This will cause the connection to be terminated immediately and the stracktrace will be printed on the server output. If you want to keep it quiet, you can create exception without stacktrace:</p>\n<pre><code>public static class TerminatedException extends Exception\n  {\n    public TerminatedException(String message)\n    {\n      super(message, null, false, false);\n    }\n  }\n</code></pre>\n<p>and then use that to fail your connection stream</p>\n<pre><code>Flow.fromSinkAndSource(Sink.ignore(),\n                       Source.failed(\n                         new TerminatedException((&quot;killed&quot;))))\n   \n</code></pre>\n<p>that way you will get cleaner logs.</p>\n"}],"owner":{"account_id":535384,"reputation":442,"user_id":904910,"accept_rate":71,"display_name":"chhil"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":261,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":68731248,"answer_count":1,"score":0,"last_activity_date":1634413405,"creation_date":1628580503,"question_id":68722628,"body_markdown":"**[EDIT]**: the problem has been solved and solution provided by Artur has been added as an edit at the end.\r\n\r\nThe idea I am trying to implement is, a TCP server is allowed n connections, if I get a n+1 connection do not allow the connection.\r\n\r\nSo, I needed to somehow get to cancelling a connection and I went ahead by connecting that particular flow to a Sink.cancelled().\r\n\r\nWhat I have is a IncomingConnection connected to a custom flow that partitions the IncomingConnection based on connection count. Once max connection count is breached the partition logic directs it to an outlet connected to Sink.cancelled.\r\n\r\nThe expectation was to immediately cancel the connection, but it allows the client to connect and then disconnects after some time.\r\n\r\nMaybe I am running into the same issue as noted in the answers for [Why does Akka TCP stream server disconnect client when there is no flow for the connection.handlewith?][1] where a flow to handle is not found, and it lingers and disconnects.\r\n\r\nI am looking for \r\n\r\n1. A clean solution to not allow incoming connections when the max is breached.\r\n2. What is Sink.cancelled() doing (if at all it&#39;s doing something).\r\n\r\n\r\n```java\r\npackage com.example;\r\n\r\nimport java.util.concurrent.CompletionStage;\r\n\r\nimport akka.Done;\r\nimport akka.NotUsed;\r\nimport akka.actor.typed.ActorSystem;\r\nimport akka.actor.typed.javadsl.Behaviors;\r\nimport akka.stream.FlowShape;\r\nimport akka.stream.SinkShape;\r\nimport akka.stream.UniformFanOutShape;\r\nimport akka.stream.javadsl.Flow;\r\nimport akka.stream.javadsl.GraphDSL;\r\nimport akka.stream.javadsl.Partition;\r\nimport akka.stream.javadsl.Sink;\r\nimport akka.stream.javadsl.Source;\r\nimport akka.stream.javadsl.Tcp;\r\nimport akka.stream.javadsl.Tcp.IncomingConnection;\r\nimport akka.stream.javadsl.Tcp.ServerBinding;\r\nimport akka.util.ByteString;\r\n\r\n\r\npublic class SimpleStream03 {\r\n    private static int connectionCount = 0;\r\n    private static int maxConnectioCount = 2;\r\n\r\n    public static void runServer() {\r\n\r\n        ActorSystem actorSystem = ActorSystem.create(Behaviors.empty(), &quot;actorSystem&quot;);\r\n\r\n        Source&lt;IncomingConnection, CompletionStage&lt;ServerBinding&gt;&gt; source = Tcp.get(actorSystem).bind(&quot;127.0.0.1&quot;,\r\n                8888); \r\n\r\n        Sink&lt;IncomingConnection, CompletionStage&lt;Done&gt;&gt; handler = Sink.foreach(conn -&gt; {\r\n            \r\n            System.out.println(&quot;Handler Sink Connection Count &quot; + connectionCount);\r\n            System.out.println(&quot;Handler Sink Client connected from: &quot; + conn.remoteAddress());\r\n\r\n            conn.handleWith(Flow.of(ByteString.class), actorSystem);\r\n\r\n        });\r\n\r\n        Flow&lt;IncomingConnection, IncomingConnection, NotUsed&gt; connectioncountFlow = Flow\r\n                .fromGraph(GraphDSL.create(builder -&gt; {\r\n\r\n                    SinkShape&lt;IncomingConnection&gt; sinkCancelled = builder.add(Sink.cancelled());\r\n                    FlowShape&lt;IncomingConnection, IncomingConnection&gt; inFlowShape = builder\r\n                            .add(Flow.of(IncomingConnection.class).map(conn -&gt; {\r\n                                connectionCount++;\r\n                                return conn;\r\n                            }));\r\n                    UniformFanOutShape&lt;IncomingConnection, IncomingConnection&gt; partition = builder\r\n                            .add(Partition.create(IncomingConnection.class, 2, param -&gt; {\r\n                                if (connectionCount &gt; maxConnectioCount) {\r\n                                    connectionCount = maxConnectioCount;\r\n                                    System.out.println(&quot;Outlet 0 -&gt; Sink.cancelled&quot;);\r\n                                    return 0;\r\n                                }\r\n                                System.out.println(&quot;Outlet 1 -&gt; forward to handler&quot;);\r\n                                return 1;\r\n                            }));\r\n\r\n                    builder.from(inFlowShape).toFanOut(partition);\r\n                    builder.from(partition.out(0)).to(sinkCancelled);\r\n                    return new FlowShape&lt;&gt;(inFlowShape.in(), partition.out(1));\r\n\r\n                }));\r\n\r\n        CompletionStage&lt;ServerBinding&gt; bindingFuture = source.via(connectioncountFlow).to(handler).run(actorSystem);\r\n\r\n        bindingFuture.handle((binding, throwable) -&gt; {\r\n            if (binding != null) {\r\n                System.out.println(&quot;Server started, listening on: &quot; + binding.localAddress());\r\n\r\n            } else {\r\n                System.err.println(&quot;Server could not bind to  : &quot; + throwable.getMessage());\r\n                actorSystem.terminate();\r\n            }\r\n            return NotUsed.getInstance();\r\n        });\r\n\r\n    }\r\n\r\n    public static void main(String[] args) throws InterruptedException {\r\n        SimpleStream03.runServer();\r\n\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\nThe output confirms the partitioning is working and main sink handler is being reached by the 2 connections.\r\n\r\n```\r\nServer started, listening on: /127.0.0.1:8888\r\nOutlet 1 -&gt; forward to handler\r\nHandler Sink Connection Count 1\r\nHandler Sink Client connected from: /127.0.0.1:60327\r\nOutlet 1 -&gt; forward to handler\r\nHandler Sink Connection Count 2\r\nHandler Sink Client connected from: /127.0.0.1:60330\r\nOutlet 0 -&gt; Sink.cancelled\r\n```\r\n\r\n\r\n**Edit :** \r\nImplementing the accepted answer, the following change prevents the incoming connection after threshold is breached. The client sees a *Connection reset by peer*\r\n\r\n```\r\n        +---------------------------------------------------------+\r\n        |                                                         |\r\n        |                                         Fail Flow       |\r\n        |                                        +-------------+  |\r\n        |                                    +--&gt;+Sink  |Source|  |\r\n        |                                    |   |cancel|fail  |  |\r\n        |                                    |   +-------------+  |\r\n        |                      +----------+  |                    |\r\n        |                      |          |  |                    |\r\n        |  +----------+        |        O0+--+                    |\r\nconnections|FLOW      |        |          |  O0:count &gt; threshold |\r\n+-------+--&gt;          +-------&gt;+ Partition|                       |\r\n        |  |count++   |        |        O1+-----------------------------&gt;\r\n        |  +----------+        |          |                       |\r\n        |                      |          |  O1:count &lt;= threshold|\r\n        |                      +----------+                       |\r\n        |                                                         |\r\n        +---------------------------------------------------------+\r\n```\r\n\r\nReplace \r\n```java\r\nSinkShape&lt;IncomingConnection&gt; sinkCancelled = builder.add(Sink.cancelled());\r\n```\r\nWith\r\n\r\n```java\r\nSink&lt;IncomingConnection, CompletionStage&lt;Done&gt;&gt; connectionCancellingSink = Sink.foreach(ic -&gt; ic\r\n                            .handleWith(Flow.fromSinkAndSource(Sink.cancelled(), Source.failed(new Throwable(&quot;killed&quot;))),\r\n                                    actorSystem));// Sink.ignore and Sink.cancel give me the same expected result\r\nSinkShape&lt;IncomingConnection&gt; sinkCancelledShape = builder.add(connectionCancellingSink);\r\n                    \r\n``` \r\n\r\n  [1]: https://stackoverflow.com/questions/68710127/why-does-akka-tcp-stream-server-disconnect-client-when-there-is-no-flow-for-the","title":"How to prevent Akka TCP Stream of incoming connections from connecting after a configured max number of connections have connected?","body":"<p><strong>[EDIT]</strong>: the problem has been solved and solution provided by Artur has been added as an edit at the end.</p>\n<p>The idea I am trying to implement is, a TCP server is allowed n connections, if I get a n+1 connection do not allow the connection.</p>\n<p>So, I needed to somehow get to cancelling a connection and I went ahead by connecting that particular flow to a Sink.cancelled().</p>\n<p>What I have is a IncomingConnection connected to a custom flow that partitions the IncomingConnection based on connection count. Once max connection count is breached the partition logic directs it to an outlet connected to Sink.cancelled.</p>\n<p>The expectation was to immediately cancel the connection, but it allows the client to connect and then disconnects after some time.</p>\n<p>Maybe I am running into the same issue as noted in the answers for <a href=\"https://stackoverflow.com/questions/68710127/why-does-akka-tcp-stream-server-disconnect-client-when-there-is-no-flow-for-the\">Why does Akka TCP stream server disconnect client when there is no flow for the connection.handlewith?</a> where a flow to handle is not found, and it lingers and disconnects.</p>\n<p>I am looking for</p>\n<ol>\n<li>A clean solution to not allow incoming connections when the max is breached.</li>\n<li>What is Sink.cancelled() doing (if at all it's doing something).</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example;\n\nimport java.util.concurrent.CompletionStage;\n\nimport akka.Done;\nimport akka.NotUsed;\nimport akka.actor.typed.ActorSystem;\nimport akka.actor.typed.javadsl.Behaviors;\nimport akka.stream.FlowShape;\nimport akka.stream.SinkShape;\nimport akka.stream.UniformFanOutShape;\nimport akka.stream.javadsl.Flow;\nimport akka.stream.javadsl.GraphDSL;\nimport akka.stream.javadsl.Partition;\nimport akka.stream.javadsl.Sink;\nimport akka.stream.javadsl.Source;\nimport akka.stream.javadsl.Tcp;\nimport akka.stream.javadsl.Tcp.IncomingConnection;\nimport akka.stream.javadsl.Tcp.ServerBinding;\nimport akka.util.ByteString;\n\n\npublic class SimpleStream03 {\n    private static int connectionCount = 0;\n    private static int maxConnectioCount = 2;\n\n    public static void runServer() {\n\n        ActorSystem actorSystem = ActorSystem.create(Behaviors.empty(), &quot;actorSystem&quot;);\n\n        Source&lt;IncomingConnection, CompletionStage&lt;ServerBinding&gt;&gt; source = Tcp.get(actorSystem).bind(&quot;127.0.0.1&quot;,\n                8888); \n\n        Sink&lt;IncomingConnection, CompletionStage&lt;Done&gt;&gt; handler = Sink.foreach(conn -&gt; {\n            \n            System.out.println(&quot;Handler Sink Connection Count &quot; + connectionCount);\n            System.out.println(&quot;Handler Sink Client connected from: &quot; + conn.remoteAddress());\n\n            conn.handleWith(Flow.of(ByteString.class), actorSystem);\n\n        });\n\n        Flow&lt;IncomingConnection, IncomingConnection, NotUsed&gt; connectioncountFlow = Flow\n                .fromGraph(GraphDSL.create(builder -&gt; {\n\n                    SinkShape&lt;IncomingConnection&gt; sinkCancelled = builder.add(Sink.cancelled());\n                    FlowShape&lt;IncomingConnection, IncomingConnection&gt; inFlowShape = builder\n                            .add(Flow.of(IncomingConnection.class).map(conn -&gt; {\n                                connectionCount++;\n                                return conn;\n                            }));\n                    UniformFanOutShape&lt;IncomingConnection, IncomingConnection&gt; partition = builder\n                            .add(Partition.create(IncomingConnection.class, 2, param -&gt; {\n                                if (connectionCount &gt; maxConnectioCount) {\n                                    connectionCount = maxConnectioCount;\n                                    System.out.println(&quot;Outlet 0 -&gt; Sink.cancelled&quot;);\n                                    return 0;\n                                }\n                                System.out.println(&quot;Outlet 1 -&gt; forward to handler&quot;);\n                                return 1;\n                            }));\n\n                    builder.from(inFlowShape).toFanOut(partition);\n                    builder.from(partition.out(0)).to(sinkCancelled);\n                    return new FlowShape&lt;&gt;(inFlowShape.in(), partition.out(1));\n\n                }));\n\n        CompletionStage&lt;ServerBinding&gt; bindingFuture = source.via(connectioncountFlow).to(handler).run(actorSystem);\n\n        bindingFuture.handle((binding, throwable) -&gt; {\n            if (binding != null) {\n                System.out.println(&quot;Server started, listening on: &quot; + binding.localAddress());\n\n            } else {\n                System.err.println(&quot;Server could not bind to  : &quot; + throwable.getMessage());\n                actorSystem.terminate();\n            }\n            return NotUsed.getInstance();\n        });\n\n    }\n\n    public static void main(String[] args) throws InterruptedException {\n        SimpleStream03.runServer();\n\n    }\n\n}\n\n</code></pre>\n<p>The output confirms the partitioning is working and main sink handler is being reached by the 2 connections.</p>\n<pre><code>Server started, listening on: /127.0.0.1:8888\nOutlet 1 -&gt; forward to handler\nHandler Sink Connection Count 1\nHandler Sink Client connected from: /127.0.0.1:60327\nOutlet 1 -&gt; forward to handler\nHandler Sink Connection Count 2\nHandler Sink Client connected from: /127.0.0.1:60330\nOutlet 0 -&gt; Sink.cancelled\n</code></pre>\n<p><strong>Edit :</strong>\nImplementing the accepted answer, the following change prevents the incoming connection after threshold is breached. The client sees a <em>Connection reset by peer</em></p>\n<pre><code>        +---------------------------------------------------------+\n        |                                                         |\n        |                                         Fail Flow       |\n        |                                        +-------------+  |\n        |                                    +--&gt;+Sink  |Source|  |\n        |                                    |   |cancel|fail  |  |\n        |                                    |   +-------------+  |\n        |                      +----------+  |                    |\n        |                      |          |  |                    |\n        |  +----------+        |        O0+--+                    |\nconnections|FLOW      |        |          |  O0:count &gt; threshold |\n+-------+--&gt;          +-------&gt;+ Partition|                       |\n        |  |count++   |        |        O1+-----------------------------&gt;\n        |  +----------+        |          |                       |\n        |                      |          |  O1:count &lt;= threshold|\n        |                      +----------+                       |\n        |                                                         |\n        +---------------------------------------------------------+\n</code></pre>\n<p>Replace</p>\n<pre class=\"lang-java prettyprint-override\"><code>SinkShape&lt;IncomingConnection&gt; sinkCancelled = builder.add(Sink.cancelled());\n</code></pre>\n<p>With</p>\n<pre class=\"lang-java prettyprint-override\"><code>Sink&lt;IncomingConnection, CompletionStage&lt;Done&gt;&gt; connectionCancellingSink = Sink.foreach(ic -&gt; ic\n                            .handleWith(Flow.fromSinkAndSource(Sink.cancelled(), Source.failed(new Throwable(&quot;killed&quot;))),\n                                    actorSystem));// Sink.ignore and Sink.cancel give me the same expected result\nSinkShape&lt;IncomingConnection&gt; sinkCancelledShape = builder.add(connectionCancellingSink);\n                    \n</code></pre>\n"},{"tags":["java","object","memory"],"comments":[{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":1,"creation_date":1634411496,"post_id":69598750,"comment_id":123019200,"body_markdown":"How do you know the addresses of `x`, `luna` and the `Cat` object (those numbers doesn&#39;t look quite right to me)? The actual memory addresses in Java [aren&#39;t really useful](https://stackoverflow.com/a/1961150/5133585) anyway. Or are you asking a theoretical question with those assumptions?","body":"How do you know the addresses of <code>x</code>, <code>luna</code> and the <code>Cat</code> object (those numbers doesn&#39;t look quite right to me)? The actual memory addresses in Java <a href=\"https://stackoverflow.com/a/1961150/5133585\">aren&#39;t really useful</a> anyway. Or are you asking a theoretical question with those assumptions?"},{"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":0,"creation_date":1634412556,"post_id":69598750,"comment_id":123019439,"body_markdown":"@Sweeper they are, if you use Unsafe and need to access an Object by the offset; but I agree, this sounds purely theoretical. And for that purpose there is `jol`","body":"@Sweeper they are, if you use Unsafe and need to access an Object by the offset; but I agree, this sounds purely theoretical. And for that purpose there is <code>jol</code>"},{"owner":{"account_id":4010701,"reputation":15103,"user_id":4398966,"accept_rate":64,"display_name":"DCR"},"score":0,"creation_date":1634412901,"post_id":69598750,"comment_id":123019522,"body_markdown":"@Eugene Whats jol? And yes this is theoretical for classroom discussion","body":"@Eugene Whats jol? And yes this is theoretical for classroom discussion"},{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1634412996,"post_id":69598750,"comment_id":123019542,"body_markdown":"[Java Object Layout.](https://github.com/openjdk/jol)","body":"<a href=\"https://github.com/openjdk/jol\" rel=\"nofollow noreferrer\">Java Object Layout.</a>"},{"owner":{"account_id":4010701,"reputation":15103,"user_id":4398966,"accept_rate":64,"display_name":"DCR"},"score":0,"creation_date":1634413393,"post_id":69598750,"comment_id":123019619,"body_markdown":"Name is a String","body":"Name is a String"},{"owner":{"account_id":935202,"reputation":49046,"user_id":964243,"accept_rate":66,"display_name":"Boann"},"score":0,"creation_date":1634427746,"post_id":69598750,"comment_id":123022198,"body_markdown":"As those numbers are odd, they definitely aren&#39;t real memory addresses.","body":"As those numbers are odd, they definitely aren&#39;t real memory addresses."}],"answers":[{"tags":[],"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1634413310,"creation_date":1634413310,"answer_id":69599003,"question_id":69598750,"body_markdown":"Objects are stored in memory as a block of fields with Object headers. You can take a look at [jol](https://github.com/openjdk/jol) to see how Objects are actually laid out in memory. Each object has header, fields might have padding, fields might take more space than you think (`boolean`), etc. \r\n\r\nYou can take a look at [this](https://stackoverflow.com/questions/65632816/calculating-memory-requirements-for-hashmap-in-java/65633624#65633624) example where I tried to explain things a little more, but the github page about jol is extensive in its examples. \r\n\r\nAt the `bytecode` level accessing an Object field is boring, to be honest, but you can take a look for sure at what `javac` produces (with `javap`). When code is executed on the CPU, you will see different offsets when trying to get a certain field, like:\r\n\r\n\r\n    mov    0x10(%rsi),%r10\r\n\r\nthis is accessing &quot;something&quot; at a certain `16` offset (`0x10` is an offset here). Think about an Object like a stack, accessing fields - you need to know how big each one is (VM tracks that) and the beginning address of the stack, the rest is easy. \r\n\r\nThe MUST read here if you really want to know things starts from [this page](https://shipilev.net/jvm/objects-inside-out/). ","title":"Java explain how objects are stored in memory","body":"<p>Objects are stored in memory as a block of fields with Object headers. You can take a look at <a href=\"https://github.com/openjdk/jol\" rel=\"nofollow noreferrer\">jol</a> to see how Objects are actually laid out in memory. Each object has header, fields might have padding, fields might take more space than you think (<code>boolean</code>), etc.</p>\n<p>You can take a look at <a href=\"https://stackoverflow.com/questions/65632816/calculating-memory-requirements-for-hashmap-in-java/65633624#65633624\">this</a> example where I tried to explain things a little more, but the github page about jol is extensive in its examples.</p>\n<p>At the <code>bytecode</code> level accessing an Object field is boring, to be honest, but you can take a look for sure at what <code>javac</code> produces (with <code>javap</code>). When code is executed on the CPU, you will see different offsets when trying to get a certain field, like:</p>\n<pre><code>mov    0x10(%rsi),%r10\n</code></pre>\n<p>this is accessing &quot;something&quot; at a certain <code>16</code> offset (<code>0x10</code> is an offset here). Think about an Object like a stack, accessing fields - you need to know how big each one is (VM tracks that) and the beginning address of the stack, the rest is easy.</p>\n<p>The MUST read here if you really want to know things starts from <a href=\"https://shipilev.net/jvm/objects-inside-out/\" rel=\"nofollow noreferrer\">this page</a>.</p>\n"}],"owner":{"account_id":4010701,"reputation":15103,"user_id":4398966,"accept_rate":64,"display_name":"DCR"},"comment_count":6,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":301,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"closed_date":1634516960,"accepted_answer_id":69599003,"answer_count":1,"score":0,"last_activity_date":1634413379,"creation_date":1634411012,"question_id":69598750,"body_markdown":"    int x = 5                               Cat luna = new Cat()\r\n    Address\t          Value                 address       reference\r\n    669cf9\t          5                     723ecf\t      683ec5\r\n\r\nIf Cat:\r\n\r\n    public class Cat{\r\n      private String name;\r\n\r\n      public void talk(){\r\n          System.out.println(&quot;meow&quot;);\r\n      }\r\n    }\r\n\r\nHow can I show what&#39;s at memory address 683ec5?\r\n\r\n\r\n","title":"Java explain how objects are stored in memory","body":"<pre><code>int x = 5                               Cat luna = new Cat()\nAddress           Value                 address       reference\n669cf9            5                     723ecf        683ec5\n</code></pre>\n<p>If Cat:</p>\n<pre><code>public class Cat{\n  private String name;\n\n  public void talk(){\n      System.out.println(&quot;meow&quot;);\n  }\n}\n</code></pre>\n<p>How can I show what's at memory address 683ec5?</p>\n"},{"tags":["java","akka-stream"],"comments":[{"owner":{"account_id":535384,"reputation":442,"user_id":904910,"accept_rate":71,"display_name":"chhil"},"score":0,"creation_date":1628473776,"post_id":68364606,"comment_id":121421423,"body_markdown":"The keepAliveInject works but it does not send a message on Connect, it&#39;s more a timer driven repeat approach. The clean solution to point 1, is provided as an answer.","body":"The keepAliveInject works but it does not send a message on Connect, it&#39;s more a timer driven repeat approach. The clean solution to point 1, is provided as an answer."}],"answers":[{"tags":[],"owner":{"account_id":535384,"reputation":442,"user_id":904910,"accept_rate":71,"display_name":"chhil"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634413354,"creation_date":1628589607,"answer_id":68724736,"question_id":68364606,"body_markdown":"This is how I have solved the some of my problems.\r\n\r\nAllowing N number of connections and sending a message on a client connection.\r\n\r\nThe code can be run use multiple netcat clients to connect to it and see the behavior.\r\n\r\n\r\n\r\n```java\r\npackage com.example;\r\n\r\nimport java.util.concurrent.CompletionStage;\r\n\r\nimport akka.Done;\r\nimport akka.NotUsed;\r\nimport akka.actor.typed.ActorSystem;\r\nimport akka.actor.typed.javadsl.Behaviors;\r\nimport akka.stream.FlowShape;\r\nimport akka.stream.SinkShape;\r\nimport akka.stream.SourceShape;\r\nimport akka.stream.UniformFanInShape;\r\nimport akka.stream.UniformFanOutShape;\r\nimport akka.stream.javadsl.Concat;\r\nimport akka.stream.javadsl.Flow;\r\nimport akka.stream.javadsl.GraphDSL;\r\nimport akka.stream.javadsl.Partition;\r\nimport akka.stream.javadsl.Sink;\r\nimport akka.stream.javadsl.Source;\r\nimport akka.stream.javadsl.Tcp;\r\nimport akka.stream.javadsl.Tcp.IncomingConnection;\r\nimport akka.stream.javadsl.Tcp.ServerBinding;\r\nimport akka.util.ByteString;\r\n\r\n/**\r\n * We want to creat a TCP server listening on port 8888. Will allow N=2\r\n * connections. Any more than 2 will be rejected. On client connect the server\r\n * will send a &quot;OnConnect&quot; string. Server will maintain count of connections, if\r\n * client connects connection count will be increments and if client disconnects\r\n * connection count will be decremented. Server will behave as a echo server,\r\n * responding back with data sent by the client.\r\n */\r\npublic class SimpleStream05 {\r\n    private static int connectionCount = 0;\r\n    private static int maxConnectioCount = 2;\r\n\r\n    private static void run() {\r\n        ActorSystem actorSystem = ActorSystem.create(Behaviors.empty(), &quot;actorSystem&quot;);\r\n\r\n        Flow&lt;ByteString, ByteString, NotUsed&gt; serverLogic = Flow.fromGraph(GraphDSL.create(builder -&gt; {\r\n\r\n            // We have our source that will send the onConnect message to the tcp client.\r\n\r\n            SourceShape&lt;ByteString&gt; onConnectSourceShape = builder\r\n                    .add(Source.single(ByteString.fromString(&quot;OnConnect&quot;)));\r\n\r\n            // Incoming Connection that just echoes back what we received.\r\n\r\n            UniformFanInShape&lt;ByteString, ByteString&gt; concatShape = builder.add(Concat.create());\r\n            FlowShape&lt;ByteString, ByteString&gt; echoFlowShape = builder.add(Flow.of(ByteString.class).map(y -&gt; y));\r\n            /*\r\n             * Connect the single source to concat and connect the echo flows output to\r\n             * concat. When a tcp connection comes in, this handler (flow) is called, concat\r\n             * will first take the input from the onConnectSourceShape which is a single and\r\n             * will emit just once and complete. Once onConnectSourceShape completes concat\r\n             * will take data from the second input echoFlowShape which is nothing but data\r\n             * from the tcp connection.\r\n             */\r\n            builder.from(onConnectSourceShape).toFanIn(concatShape); // onConnectSourceShape -&gt; concatShape\r\n            builder.from(echoFlowShape).toFanIn(concatShape); // echoFlowShape -&gt; concatShape\r\n            return FlowShape.of(echoFlowShape.in(), concatShape.out());\r\n\r\n        }));\r\n        final Sink&lt;IncomingConnection, CompletionStage&lt;Done&gt;&gt; handler = Sink.foreach(conn -&gt; {\r\n            System.out.println(&quot;Client connected from: &quot; + conn.remoteAddress());\r\n            // conn.handleWith(serverLogic.via(Flow.&lt;ByteString&gt;create()), actorSystem);\r\n            conn.handleWith(\r\n                    serverLogic.via(Flow.&lt;ByteString&gt;create()).watchTermination((prevMatValue, completionStage) -&gt; {\r\n                        completionStage.whenComplete((done, exc) -&gt; {\r\n                            connectionCount--;\r\n                            System.out.println(&quot;Watch Termination called. Connection count:&quot; + connectionCount);\r\n                            if (done != null) {\r\n\r\n                                System.out.println(&quot;The stream materialized &quot; + prevMatValue.toString());\r\n                            } else\r\n\r\n                                System.out.println(exc.getMessage());\r\n                        });\r\n                        return prevMatValue;\r\n                    }), actorSystem);\r\n\r\n        });\r\n\r\n        Flow&lt;IncomingConnection, IncomingConnection, NotUsed&gt; connectioncountFlow = Flow\r\n                .fromGraph(GraphDSL.create(builder -&gt; {\r\n\r\n                    SinkShape&lt;IncomingConnection&gt; sinkCancelled = builder.add(Sink.cancelled());\r\n                    FlowShape&lt;IncomingConnection, IncomingConnection&gt; inFlowShape = builder\r\n                            .add(Flow.of(IncomingConnection.class).map(conn -&gt; {\r\n                                connectionCount++;\r\n                                return conn;\r\n                            }));\r\n                    UniformFanOutShape&lt;IncomingConnection, IncomingConnection&gt; partition = builder\r\n                            .add(Partition.create(IncomingConnection.class, 2, param -&gt; {\r\n                                if (connectionCount &gt; maxConnectioCount) {\r\n                                    connectionCount = maxConnectioCount;\r\n                                    System.out.println(&quot;Outlet 0 -&gt; Sink.cancelled&quot;);\r\n                                    return 0;\r\n                                }\r\n                                System.out.println(&quot;Outlet 1 -&gt; forward to handler&quot;);\r\n                                return 1;\r\n                            }));\r\n\r\n                    builder.from(inFlowShape).toFanOut(partition);\r\n                    builder.from(partition.out(0)).to(sinkCancelled);\r\n                    return new FlowShape&lt;&gt;(inFlowShape.in(), partition.out(1));\r\n\r\n                }));\r\n\r\n        Source&lt;IncomingConnection, CompletionStage&lt;ServerBinding&gt;&gt; source = Tcp.get(actorSystem).bind(&quot;127.0.0.1&quot;,\r\n                8888);\r\n\r\n        CompletionStage&lt;ServerBinding&gt; bindingFuture = source.via(connectioncountFlow).to(handler).run(actorSystem);\r\n\r\n        bindingFuture.handle((binding, throwable) -&gt; {\r\n            if (binding != null) {\r\n                System.out.println(&quot;Server started, listening on: &quot; + binding.localAddress());\r\n\r\n            } else {\r\n                System.err.println(&quot;Server could not bind to  : &quot; + throwable.getMessage());\r\n                actorSystem.terminate();\r\n            }\r\n            return NotUsed.getInstance();\r\n        });\r\n    }\r\n\r\n    public static void main(String[] args) throws InterruptedException {\r\n        SimpleStream05.run();\r\n\r\n    }\r\n\r\n}\r\n\r\n```","title":"How to disconnect tcp connections to a java akka stream server?","body":"<p>This is how I have solved the some of my problems.</p>\n<p>Allowing N number of connections and sending a message on a client connection.</p>\n<p>The code can be run use multiple netcat clients to connect to it and see the behavior.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example;\n\nimport java.util.concurrent.CompletionStage;\n\nimport akka.Done;\nimport akka.NotUsed;\nimport akka.actor.typed.ActorSystem;\nimport akka.actor.typed.javadsl.Behaviors;\nimport akka.stream.FlowShape;\nimport akka.stream.SinkShape;\nimport akka.stream.SourceShape;\nimport akka.stream.UniformFanInShape;\nimport akka.stream.UniformFanOutShape;\nimport akka.stream.javadsl.Concat;\nimport akka.stream.javadsl.Flow;\nimport akka.stream.javadsl.GraphDSL;\nimport akka.stream.javadsl.Partition;\nimport akka.stream.javadsl.Sink;\nimport akka.stream.javadsl.Source;\nimport akka.stream.javadsl.Tcp;\nimport akka.stream.javadsl.Tcp.IncomingConnection;\nimport akka.stream.javadsl.Tcp.ServerBinding;\nimport akka.util.ByteString;\n\n/**\n * We want to creat a TCP server listening on port 8888. Will allow N=2\n * connections. Any more than 2 will be rejected. On client connect the server\n * will send a &quot;OnConnect&quot; string. Server will maintain count of connections, if\n * client connects connection count will be increments and if client disconnects\n * connection count will be decremented. Server will behave as a echo server,\n * responding back with data sent by the client.\n */\npublic class SimpleStream05 {\n    private static int connectionCount = 0;\n    private static int maxConnectioCount = 2;\n\n    private static void run() {\n        ActorSystem actorSystem = ActorSystem.create(Behaviors.empty(), &quot;actorSystem&quot;);\n\n        Flow&lt;ByteString, ByteString, NotUsed&gt; serverLogic = Flow.fromGraph(GraphDSL.create(builder -&gt; {\n\n            // We have our source that will send the onConnect message to the tcp client.\n\n            SourceShape&lt;ByteString&gt; onConnectSourceShape = builder\n                    .add(Source.single(ByteString.fromString(&quot;OnConnect&quot;)));\n\n            // Incoming Connection that just echoes back what we received.\n\n            UniformFanInShape&lt;ByteString, ByteString&gt; concatShape = builder.add(Concat.create());\n            FlowShape&lt;ByteString, ByteString&gt; echoFlowShape = builder.add(Flow.of(ByteString.class).map(y -&gt; y));\n            /*\n             * Connect the single source to concat and connect the echo flows output to\n             * concat. When a tcp connection comes in, this handler (flow) is called, concat\n             * will first take the input from the onConnectSourceShape which is a single and\n             * will emit just once and complete. Once onConnectSourceShape completes concat\n             * will take data from the second input echoFlowShape which is nothing but data\n             * from the tcp connection.\n             */\n            builder.from(onConnectSourceShape).toFanIn(concatShape); // onConnectSourceShape -&gt; concatShape\n            builder.from(echoFlowShape).toFanIn(concatShape); // echoFlowShape -&gt; concatShape\n            return FlowShape.of(echoFlowShape.in(), concatShape.out());\n\n        }));\n        final Sink&lt;IncomingConnection, CompletionStage&lt;Done&gt;&gt; handler = Sink.foreach(conn -&gt; {\n            System.out.println(&quot;Client connected from: &quot; + conn.remoteAddress());\n            // conn.handleWith(serverLogic.via(Flow.&lt;ByteString&gt;create()), actorSystem);\n            conn.handleWith(\n                    serverLogic.via(Flow.&lt;ByteString&gt;create()).watchTermination((prevMatValue, completionStage) -&gt; {\n                        completionStage.whenComplete((done, exc) -&gt; {\n                            connectionCount--;\n                            System.out.println(&quot;Watch Termination called. Connection count:&quot; + connectionCount);\n                            if (done != null) {\n\n                                System.out.println(&quot;The stream materialized &quot; + prevMatValue.toString());\n                            } else\n\n                                System.out.println(exc.getMessage());\n                        });\n                        return prevMatValue;\n                    }), actorSystem);\n\n        });\n\n        Flow&lt;IncomingConnection, IncomingConnection, NotUsed&gt; connectioncountFlow = Flow\n                .fromGraph(GraphDSL.create(builder -&gt; {\n\n                    SinkShape&lt;IncomingConnection&gt; sinkCancelled = builder.add(Sink.cancelled());\n                    FlowShape&lt;IncomingConnection, IncomingConnection&gt; inFlowShape = builder\n                            .add(Flow.of(IncomingConnection.class).map(conn -&gt; {\n                                connectionCount++;\n                                return conn;\n                            }));\n                    UniformFanOutShape&lt;IncomingConnection, IncomingConnection&gt; partition = builder\n                            .add(Partition.create(IncomingConnection.class, 2, param -&gt; {\n                                if (connectionCount &gt; maxConnectioCount) {\n                                    connectionCount = maxConnectioCount;\n                                    System.out.println(&quot;Outlet 0 -&gt; Sink.cancelled&quot;);\n                                    return 0;\n                                }\n                                System.out.println(&quot;Outlet 1 -&gt; forward to handler&quot;);\n                                return 1;\n                            }));\n\n                    builder.from(inFlowShape).toFanOut(partition);\n                    builder.from(partition.out(0)).to(sinkCancelled);\n                    return new FlowShape&lt;&gt;(inFlowShape.in(), partition.out(1));\n\n                }));\n\n        Source&lt;IncomingConnection, CompletionStage&lt;ServerBinding&gt;&gt; source = Tcp.get(actorSystem).bind(&quot;127.0.0.1&quot;,\n                8888);\n\n        CompletionStage&lt;ServerBinding&gt; bindingFuture = source.via(connectioncountFlow).to(handler).run(actorSystem);\n\n        bindingFuture.handle((binding, throwable) -&gt; {\n            if (binding != null) {\n                System.out.println(&quot;Server started, listening on: &quot; + binding.localAddress());\n\n            } else {\n                System.err.println(&quot;Server could not bind to  : &quot; + throwable.getMessage());\n                actorSystem.terminate();\n            }\n            return NotUsed.getInstance();\n        });\n    }\n\n    public static void main(String[] args) throws InterruptedException {\n        SimpleStream05.run();\n\n    }\n\n}\n\n</code></pre>\n"}],"owner":{"account_id":535384,"reputation":442,"user_id":904910,"accept_rate":71,"display_name":"chhil"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":116,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1634413354,"creation_date":1626187434,"question_id":68364606,"body_markdown":"I have simple TCP server that echoes back data received from the client connection.\r\n\r\nI want to do the following\r\n\r\n 1. When a client connect happens I want to respond back immediately with some data. ByteBuffer for simplicity.\r\n 2. I want to allow n number of connections. Currently I am doing it through a connection count variable and just don&#39;t call handle. I don&#39;t think that&#39;s the right way to do it.\r\n 3. I want the ability to send messages from the server at any time on specific connections. So if I have 3 connections, I want to pick and choose a connection I want to send a message to.\r\n 4. Ability to shut down the server after closing the connections.\r\nAny pointers / snippets of codes would be greatly appreciated.\r\n\r\nCode snippet that I am working with\r\n\r\n\r\n    \r\n    // handles individual connections\r\n    final Sink&lt;IncomingConnection, CompletionStage&lt;Done&gt;&gt; handler = Sink.foreach(conn -&gt; {\r\n        connectionCount++;\r\n        if (connectionCount &lt; 2) {\r\n            System.out.println(&quot;Client connected from: &quot; + conn.remoteAddress());\r\n            conn.handleWith(Flow.&lt;ByteString&gt;create(), actorSystem);\r\n        }\r\n        // Is not handling a good away to avoid the incoming connection?\r\n        // When I use  netcat to connect to this server I see it saying \r\n        //connected and then the connection goes away when a second connection is attempted.\r\n         \r\n\r\n    });\r\n\r\n    //Create the TCP server\r\n    Source&lt;IncomingConnection, CompletionStage&lt;ServerBinding&gt;&gt; source = Tcp.get(actorSystem)\r\n            .bind(&quot;127.0.0.1&quot;, 8888);\r\n    // connect the server source to the sink handler and run/materialize it\r\n    final CompletionStage&lt;ServerBinding&gt; bindingFuture = source.to(handler)\r\n            .run(actorSystem);\r\n\r\n    bindingFuture.handle((ServerBinding binding, Throwable exception) -&gt; {\r\n        if (binding != null) {\r\n            System.out.println(&quot;Server started, listening on: &quot; + binding.localAddress());\r\n        }\r\n        else {\r\n            System.err.println(&quot;Server could not bind to  : &quot; + exception.getMessage());\r\n            actorSystem.terminate();\r\n        }\r\n        return NotUsed.getInstance();\r\n    });\r\n}\r\n\r\n\r\n\r\n**Edit 1**\r\n\r\nI kind of got problem 1 to work using a keepalive processing stage and echoes back the received data. So insert a flow with a keepalive that adds a bytestring to be sent back at regular intervals. This is not perfect and I will try a fan in with the timer source that injects data in.\r\nThen there was this Flow.fromSinkAndSource that I tried, looked promising but could not get it to work.\r\nhttps://doc.akka.io/docs/akka/current/stream/operators/Flow/fromSinkAndSource.html\r\n\r\nWhat currently works is this change\r\n\r\n    ActorSystem actorSystem = ActorSystem.create(Behaviors.empty(), &quot;actorSystem&quot;);\r\n    final ByteString keepAliveMessage = ByteString.fromString(&quot;KEEP ALIVE&quot;);\r\n    Flow&lt;ByteString, ByteString, NotUsed&gt; keepAliveInject = Flow.of(ByteString.class)\r\n            .keepAlive(Duration.ofSeconds(1), () -&gt; keepAliveMessage);\r\n    \r\n    final Sink&lt;IncomingConnection, CompletionStage&lt;Done&gt;&gt; handler = Sink.foreach(conn -&gt; {\r\n        System.out.println(&quot;Client connected from: &quot; + conn.remoteAddress());\r\n        conn.handleWith(keepAliveInject.via(Flow.&lt;ByteString&gt;create()), actorSystem);\r\n        \r\n    });\r\n\r\n","title":"How to disconnect tcp connections to a java akka stream server?","body":"<p>I have simple TCP server that echoes back data received from the client connection.</p>\n<p>I want to do the following</p>\n<ol>\n<li>When a client connect happens I want to respond back immediately with some data. ByteBuffer for simplicity.</li>\n<li>I want to allow n number of connections. Currently I am doing it through a connection count variable and just don't call handle. I don't think that's the right way to do it.</li>\n<li>I want the ability to send messages from the server at any time on specific connections. So if I have 3 connections, I want to pick and choose a connection I want to send a message to.</li>\n<li>Ability to shut down the server after closing the connections.\nAny pointers / snippets of codes would be greatly appreciated.</li>\n</ol>\n<p>Code snippet that I am working with</p>\n<pre><code>// handles individual connections\nfinal Sink&lt;IncomingConnection, CompletionStage&lt;Done&gt;&gt; handler = Sink.foreach(conn -&gt; {\n    connectionCount++;\n    if (connectionCount &lt; 2) {\n        System.out.println(&quot;Client connected from: &quot; + conn.remoteAddress());\n        conn.handleWith(Flow.&lt;ByteString&gt;create(), actorSystem);\n    }\n    // Is not handling a good away to avoid the incoming connection?\n    // When I use  netcat to connect to this server I see it saying \n    //connected and then the connection goes away when a second connection is attempted.\n     \n\n});\n\n//Create the TCP server\nSource&lt;IncomingConnection, CompletionStage&lt;ServerBinding&gt;&gt; source = Tcp.get(actorSystem)\n        .bind(&quot;127.0.0.1&quot;, 8888);\n// connect the server source to the sink handler and run/materialize it\nfinal CompletionStage&lt;ServerBinding&gt; bindingFuture = source.to(handler)\n        .run(actorSystem);\n\nbindingFuture.handle((ServerBinding binding, Throwable exception) -&gt; {\n    if (binding != null) {\n        System.out.println(&quot;Server started, listening on: &quot; + binding.localAddress());\n    }\n    else {\n        System.err.println(&quot;Server could not bind to  : &quot; + exception.getMessage());\n        actorSystem.terminate();\n    }\n    return NotUsed.getInstance();\n});\n</code></pre>\n<p>}</p>\n<p><strong>Edit 1</strong></p>\n<p>I kind of got problem 1 to work using a keepalive processing stage and echoes back the received data. So insert a flow with a keepalive that adds a bytestring to be sent back at regular intervals. This is not perfect and I will try a fan in with the timer source that injects data in.\nThen there was this Flow.fromSinkAndSource that I tried, looked promising but could not get it to work.\n<a href=\"https://doc.akka.io/docs/akka/current/stream/operators/Flow/fromSinkAndSource.html\" rel=\"nofollow noreferrer\">https://doc.akka.io/docs/akka/current/stream/operators/Flow/fromSinkAndSource.html</a></p>\n<p>What currently works is this change</p>\n<pre><code>ActorSystem actorSystem = ActorSystem.create(Behaviors.empty(), &quot;actorSystem&quot;);\nfinal ByteString keepAliveMessage = ByteString.fromString(&quot;KEEP ALIVE&quot;);\nFlow&lt;ByteString, ByteString, NotUsed&gt; keepAliveInject = Flow.of(ByteString.class)\n        .keepAlive(Duration.ofSeconds(1), () -&gt; keepAliveMessage);\n\nfinal Sink&lt;IncomingConnection, CompletionStage&lt;Done&gt;&gt; handler = Sink.foreach(conn -&gt; {\n    System.out.println(&quot;Client connected from: &quot; + conn.remoteAddress());\n    conn.handleWith(keepAliveInject.via(Flow.&lt;ByteString&gt;create()), actorSystem);\n    \n});\n</code></pre>\n"},{"tags":["java","sockets","http","https","proxy"],"comments":[{"owner":{"account_id":22530174,"reputation":11,"user_id":16722382,"display_name":"fakeivchenko"},"score":0,"creation_date":1629694566,"post_id":68887363,"comment_id":121744602,"body_markdown":"BTW When I connected directly to android proxy-server everything works well.","body":"BTW When I connected directly to android proxy-server everything works well."},{"owner":{"account_id":3701398,"reputation":116662,"user_id":3081018,"display_name":"Steffen Ullrich"},"score":0,"creation_date":1629697290,"post_id":68887363,"comment_id":121745106,"body_markdown":"It is too few known what the proxy is actually doing. I cannot see in your code how the response is  exactly constructed and what happens after the response got send - i.e. forwarding data between client and server in both directions. .In any case the response send by the proxy contains lots of lines which should not harm, but which do not make sense in a proxy response, i.e. Host header, User-Agent, Proxy-Connection","body":"It is too few known what the proxy is actually doing. I cannot see in your code how the response is  exactly constructed and what happens after the response got send - i.e. forwarding data between client and server in both directions. .In any case the response send by the proxy contains lots of lines which should not harm, but which do not make sense in a proxy response, i.e. Host header, User-Agent, Proxy-Connection"},{"owner":{"account_id":22530174,"reputation":11,"user_id":16722382,"display_name":"fakeivchenko"},"score":0,"creation_date":1629698009,"post_id":68887363,"comment_id":121745265,"body_markdown":"I am using proxy app dowloaded from Play Market, only thing I know that direct connection works well.","body":"I am using proxy app dowloaded from Play Market, only thing I know that direct connection works well."},{"owner":{"account_id":3701398,"reputation":116662,"user_id":3081018,"display_name":"Steffen Ullrich"},"score":1,"creation_date":1629699967,"post_id":68887363,"comment_id":121745729,"body_markdown":"Now I understand. The approach you use with plain HTTP is already flawed but might work in many cases (short requests). For HTTPS though it cannot work: with HTTPS you need to first read the request (CONNECT) from the client and forward it to the proxy, Then you need to read the response (HTTP/1.1 200 ..) and forward it to the client. And then you need to forward all the following __bidirectional__ traffic between client and server __in both direction__ until these close the connection. Instead you expect only the server to send data, which is wrong.","body":"Now I understand. The approach you use with plain HTTP is already flawed but might work in many cases (short requests). For HTTPS though it cannot work: with HTTPS you need to first read the request (CONNECT) from the client and forward it to the proxy, Then you need to read the response (HTTP/1.1 200 ..) and forward it to the client. And then you need to forward all the following <b>bidirectional</b> traffic between client and server <b>in both direction</b> until these close the connection. Instead you expect only the server to send data, which is wrong."},{"owner":{"account_id":22530174,"reputation":11,"user_id":16722382,"display_name":"fakeivchenko"},"score":0,"creation_date":1629701928,"post_id":68887363,"comment_id":121746266,"body_markdown":"Ok, I will try to fix it. If I succeed I&#39;ll post the solution code here. Thanks a lot for help!","body":"Ok, I will try to fix it. If I succeed I&#39;ll post the solution code here. Thanks a lot for help!"},{"owner":{"account_id":37136,"reputation":57812,"user_id":106104,"accept_rate":62,"display_name":"user253751"},"score":0,"creation_date":1629819275,"post_id":68887363,"comment_id":121784584,"body_markdown":"It&#39;s because you are not sending any traffic after the initial request and response. CONNECT method creates a connection *through* your proxy directly to the server, so the client can send encrypted data to the server, and get encrypted data back, and you have to send and receive the data even though you cannot understand any of it because it&#39;s encrypted.","body":"It&#39;s because you are not sending any traffic after the initial request and response. CONNECT method creates a connection <i>through</i> your proxy directly to the server, so the client can send encrypted data to the server, and get encrypted data back, and you have to send and receive the data even though you cannot understand any of it because it&#39;s encrypted."}],"owner":{"account_id":22530174,"reputation":11,"user_id":16722382,"display_name":"fakeivchenko"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":447,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1634413225,"creation_date":1629693436,"question_id":68887363,"body_markdown":"I have written a simple class extends Thread, used to receive user request, send it to HTTP-proxy server, runs on my Android device, get response and send it back to user:\r\n\r\n    public class ProxyThread extends Thread {\r\n    private Socket clientSocket = null;\r\n\r\n    public ProxyThread(Socket socket) {\r\n        super(&quot;ProxyThread&quot;);\r\n        this.clientSocket = socket;\r\n    }\r\n\r\n    public void run() {\r\n        try {\r\n            // Read request\r\n            InputStream incomingIS = clientSocket.getInputStream();\r\n            byte[] b = new byte[8196];\r\n            int len = incomingIS.read(b);\r\n            if (len &gt; 0) {\r\n                System.out.println(&quot;REQUEST&quot;\r\n                        + System.getProperty(&quot;line.separator&quot;) + &quot;-------&quot;);\r\n                System.out.println(new String(b, 0, len));\r\n                // Write Request\r\n                Socket socket = new Socket(&quot;192.168.136.96&quot;, 8080);\r\n                OutputStream outgoingOS = socket.getOutputStream();\r\n                outgoingOS.write(b, 0, len);\r\n                // Send back\r\n                OutputStream incomingOS = clientSocket.getOutputStream();\r\n                InputStream outgoingIS = socket.getInputStream();\r\n                for (int length; (length = outgoingIS.read(b)) != -1; ) {\r\n                    incomingOS.write(b, 0, length);\r\n                    System.out.println(&quot;Answer&quot;\r\n                            + System.getProperty(&quot;line.separator&quot;) + &quot;-------&quot;);\r\n                    System.out.println(new String(b, 0, len));\r\n                }\r\n\r\n                incomingOS.close();\r\n                outgoingIS.close();\r\n                outgoingOS.close();\r\n                incomingIS.close();\r\n\r\n                socket.close();\r\n            }\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        } finally {\r\n            try {\r\n                clientSocket.close();\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n        System.out.println(&quot;closed&quot;);\r\n    }\r\nI used FireFox to connect to the server (localhost:80). So it works fine with sites using HTTP (example http://info.cern.ch/), but it is not for sites using HTTPS.\r\n\r\nFor example i try to connect https://facebook.com.\r\n\r\nFireFox sends a request:\r\n\r\n    CONNECT www.facebook.com:443 HTTP/1.1\r\n    User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:91.0) Gecko/20100101 Firefox/91.0\r\n    Proxy-Connection: keep-alive\r\n    Connection: keep-alive\r\n    Host: www.facebook.com:443\r\n\r\nProxy sends back a response:\r\n\r\n    HTTP/1.1 200 Connection Established\r\n    User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:91.0) Gecko/20100101 Firefox/91.0\r\n    Proxy-Connection: keep-alive\r\n    Connection: keep-alive\r\n    Host: www.facebook.com:443\r\n\r\nI don&#39;t know why FireFox does show nothing, but maybe it just can&#39;t recive an response from my server (localhost:80) and i don&#39;t know why.\r\n\r\n\r\n\r\n","title":"Can&#39;t connect to HTTPS sites using Socket HTTP-proxy","body":"<p>I have written a simple class extends Thread, used to receive user request, send it to HTTP-proxy server, runs on my Android device, get response and send it back to user:</p>\n<pre><code>public class ProxyThread extends Thread {\nprivate Socket clientSocket = null;\n\npublic ProxyThread(Socket socket) {\n    super(&quot;ProxyThread&quot;);\n    this.clientSocket = socket;\n}\n\npublic void run() {\n    try {\n        // Read request\n        InputStream incomingIS = clientSocket.getInputStream();\n        byte[] b = new byte[8196];\n        int len = incomingIS.read(b);\n        if (len &gt; 0) {\n            System.out.println(&quot;REQUEST&quot;\n                    + System.getProperty(&quot;line.separator&quot;) + &quot;-------&quot;);\n            System.out.println(new String(b, 0, len));\n            // Write Request\n            Socket socket = new Socket(&quot;192.168.136.96&quot;, 8080);\n            OutputStream outgoingOS = socket.getOutputStream();\n            outgoingOS.write(b, 0, len);\n            // Send back\n            OutputStream incomingOS = clientSocket.getOutputStream();\n            InputStream outgoingIS = socket.getInputStream();\n            for (int length; (length = outgoingIS.read(b)) != -1; ) {\n                incomingOS.write(b, 0, length);\n                System.out.println(&quot;Answer&quot;\n                        + System.getProperty(&quot;line.separator&quot;) + &quot;-------&quot;);\n                System.out.println(new String(b, 0, len));\n            }\n\n            incomingOS.close();\n            outgoingIS.close();\n            outgoingOS.close();\n            incomingIS.close();\n\n            socket.close();\n        }\n    } catch (IOException e) {\n        e.printStackTrace();\n    } finally {\n        try {\n            clientSocket.close();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n    System.out.println(&quot;closed&quot;);\n}\n</code></pre>\n<p>I used FireFox to connect to the server (localhost:80). So it works fine with sites using HTTP (example <a href=\"http://info.cern.ch/\" rel=\"nofollow noreferrer\">http://info.cern.ch/</a>), but it is not for sites using HTTPS.</p>\n<p>For example i try to connect <a href=\"https://facebook.com\" rel=\"nofollow noreferrer\">https://facebook.com</a>.</p>\n<p>FireFox sends a request:</p>\n<pre><code>CONNECT www.facebook.com:443 HTTP/1.1\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:91.0) Gecko/20100101 Firefox/91.0\nProxy-Connection: keep-alive\nConnection: keep-alive\nHost: www.facebook.com:443\n</code></pre>\n<p>Proxy sends back a response:</p>\n<pre><code>HTTP/1.1 200 Connection Established\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:91.0) Gecko/20100101 Firefox/91.0\nProxy-Connection: keep-alive\nConnection: keep-alive\nHost: www.facebook.com:443\n</code></pre>\n<p>I don't know why FireFox does show nothing, but maybe it just can't recive an response from my server (localhost:80) and i don't know why.</p>\n"},{"tags":["java","performance","sorting","time-complexity","mergesort"],"comments":[{"owner":{"account_id":262183,"reputation":13618,"user_id":546871,"accept_rate":40,"display_name":"AdrianHHH"},"score":0,"creation_date":1634411721,"post_id":69598781,"comment_id":123019258,"body_markdown":"The `arrAdd` and `arrRem` methods create new arrays, copy whole arrays into them and then delete the originals. The idea of merge sort is to move single values around. Not to create/copy/delete whole arrays.","body":"The <code>arrAdd</code> and <code>arrRem</code> methods create new arrays, copy whole arrays into them and then delete the originals. The idea of merge sort is to move single values around. Not to create/copy/delete whole arrays."},{"owner":{"account_id":1425811,"reputation":10732,"user_id":1349366,"display_name":"Aivean"},"score":0,"creation_date":1634413690,"post_id":69598781,"comment_id":123019689,"body_markdown":"The idea behind the efficient mergesort is to preallocate the buffer, used for `merge`, only once and move as little data around as possible. For the reference, you can look at the [`mergeSort` implementation](http://hg.openjdk.java.net/jdk8u/jdk8u/jdk/file/be44bff34df4/src/share/classes/java/util/Arrays.java#l1535) in OpenJDK.","body":"The idea behind the efficient mergesort is to preallocate the buffer, used for <code>merge</code>, only once and move as little data around as possible. For the reference, you can look at the <a href=\"http://hg.openjdk.java.net/jdk8u/jdk8u/jdk/file/be44bff34df4/src/share/classes/java/util/Arrays.java#l1535\" rel=\"nofollow noreferrer\"><code>mergeSort</code> implementation</a> in OpenJDK."}],"answers":[{"tags":[],"owner":{"account_id":300800,"reputation":10941,"user_id":608164,"accept_rate":62,"display_name":"30thh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634412310,"creation_date":1634412310,"answer_id":69598902,"question_id":69598781,"body_markdown":"Creating a copy of the array to add/remove a single item is a very expensive way to manipulate data. Use `ArrayList` or &#39;LinkedList&#39; instead of plain arrays!\r\n\r\nIf you need a faster way to work with primitive types, take a look on a Colt library:\r\n\r\nhttps://dst.lbl.gov/ACSSoftware/colt/","title":"Why is my implementation of merge sort slow?","body":"<p>Creating a copy of the array to add/remove a single item is a very expensive way to manipulate data. Use <code>ArrayList</code> or 'LinkedList' instead of plain arrays!</p>\n<p>If you need a faster way to work with primitive types, take a look on a Colt library:</p>\n<p><a href=\"https://dst.lbl.gov/ACSSoftware/colt/\" rel=\"nofollow noreferrer\">https://dst.lbl.gov/ACSSoftware/colt/</a></p>\n"},{"tags":[],"owner":{"account_id":61566,"reputation":68924,"user_id":183406,"accept_rate":74,"display_name":"meriton"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1634412920,"creation_date":1634412427,"answer_id":69598916,"question_id":69598781,"body_markdown":"Because `arrayRem` is dreadfully inefficient.\r\n\r\nSuppose you have an array with 1 million elements. You want to go through these elements. You do so by looking at the first element, then removing the first element by copying all other elements one place closer to the front, and repeat this until the array is empty.\r\n\r\nSo after consuming the first element, you are copying 999 999 elements.&lt;br&gt;\r\nAfter consuming the second element, you are copying 999 998 elements.&lt;br&gt;\r\nAfter consuming the third element, you are copying 999 997 elements.&lt;br&gt;\r\n(999 996 lines omitted here)&lt;br&gt;\r\nAfter consuming the 1 000 000th element, you are copying 0 elements.\r\n\r\nThat is, to read through an array of length 1 million, you are copying a total of 1 000 000 * 500 000 = 500 000 000 000 elements. That takes a while.\r\n\r\nA correct implementation of mergesort would read through the array by incrementing an index, not by incrementally deleting the first element and copying all remaining elements every time.\r\n\r\nSimilarly, an efficient way of adding elements works by creating an array big enough to hold all elements up front, and then just write each single element into its correct place by keeping track of the index the next element should be written to, rather than copying all existing elements for every element added.","title":"Why is my implementation of merge sort slow?","body":"<p>Because <code>arrayRem</code> is dreadfully inefficient.</p>\n<p>Suppose you have an array with 1 million elements. You want to go through these elements. You do so by looking at the first element, then removing the first element by copying all other elements one place closer to the front, and repeat this until the array is empty.</p>\n<p>So after consuming the first element, you are copying 999 999 elements.<br>\nAfter consuming the second element, you are copying 999 998 elements.<br>\nAfter consuming the third element, you are copying 999 997 elements.<br>\n(999 996 lines omitted here)<br>\nAfter consuming the 1 000 000th element, you are copying 0 elements.</p>\n<p>That is, to read through an array of length 1 million, you are copying a total of 1 000 000 * 500 000 = 500 000 000 000 elements. That takes a while.</p>\n<p>A correct implementation of mergesort would read through the array by incrementing an index, not by incrementally deleting the first element and copying all remaining elements every time.</p>\n<p>Similarly, an efficient way of adding elements works by creating an array big enough to hold all elements up front, and then just write each single element into its correct place by keeping track of the index the next element should be written to, rather than copying all existing elements for every element added.</p>\n"}],"owner":{"account_id":22599824,"reputation":3,"user_id":16781573,"display_name":"vipervalour"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":111,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69598916,"answer_count":2,"score":0,"last_activity_date":1634412920,"creation_date":1634411391,"question_id":69598781,"body_markdown":"I have implemented merge sort to use with an algorithm for my assignment. It works but with a large amount of test cases it takes very long to give back results and it shouldn&#39;t. I have cleared my main method and im convinced that merge sort is the issue. Can somone explain what did i do to make it so unefficient?\r\n```\r\n    public static double[] merge(double[] arrayA, double[] arrayB){\r\n        double[] arrayC = new double[0];\r\n\r\n        while((arrayA.length != 0) &amp;&amp; (arrayB.length != 0)){\r\n            if(arrayA[0]&gt;arrayB[0]){\r\n                arrayC = Array.arrAdd(arrayC, arrayB[0]);\r\n                arrayB = Array.arrRem(arrayB);\r\n            }else{\r\n                arrayC = Array.arrAdd(arrayC, arrayA[0]);\r\n                arrayA = Array.arrRem(arrayA);\r\n            }\r\n        }\r\n        while(arrayA.length != 0){\r\n            arrayC = Array.arrAdd(arrayC, arrayA[0]);\r\n            arrayA = Array.arrRem(arrayA);\r\n        }\r\n        while(arrayB.length != 0){\r\n            arrayC = Array.arrAdd(arrayC, arrayB[0]);\r\n            arrayB = Array.arrRem(arrayB);\r\n        }\r\n\r\n        return arrayC;\r\n    }\r\n\r\n    public static double[] mergeSort(double[] arrayA){\r\n        if(arrayA.length == 1){\r\n            return arrayA;\r\n        }\r\n\r\n        int a;\r\n        int b;\r\n\r\n        if(arrayA.length % 2 != 0){\r\n            a = (arrayA.length+1)/2;\r\n            b = (arrayA.length-1)/2;\r\n        }else{\r\n            a = (arrayA.length)/2;\r\n            b = (arrayA.length)/2;\r\n        }\r\n\r\n            double[] array1 = new double[a];\r\n            double[] array2 = new double[b];\r\n\r\n        for(int i=0; i&lt;array1.length; i++){\r\n            array1[i] = arrayA[0];\r\n            arrayA = Array.arrRem(arrayA);\r\n\r\n        }\r\n        for(int i=0; i&lt;array2.length; i++){\r\n            array2[i] = arrayA[0];\r\n            arrayA = Array.arrRem(arrayA);\r\n        }\r\n\r\n        array1 = mergeSort(array1);\r\n        array2 = mergeSort(array2);\r\n\r\n        return merge(array1, array2);\r\n    }\r\n```\r\nI am also including my &quot;arrAdd&quot; and &quot;arrRem&quot; methods that are used to add an element at the end of an array and to remove one from index 0.\r\n```\r\n    public static double[] arrAdd(double[] arrayA, double value){\r\n        double[] arrayB = new double[arrayA.length+1];\r\n        System.arraycopy(arrayA, 0, arrayB, 0, arrayA.length);\r\n        arrayB[arrayA.length] = value;\r\n        return arrayB;\r\n    }\r\n\r\n    public static double[] arrRem(double[] arrayA){\r\n        double[] arrayB = new double[arrayA.length-1];\r\n        System.arraycopy(arrayA, 1, arrayB, 0, arrayA.length - 1);\r\n        return arrayB;\r\n    }\r\n\r\n```","title":"Why is my implementation of merge sort slow?","body":"<p>I have implemented merge sort to use with an algorithm for my assignment. It works but with a large amount of test cases it takes very long to give back results and it shouldn't. I have cleared my main method and im convinced that merge sort is the issue. Can somone explain what did i do to make it so unefficient?</p>\n<pre><code>    public static double[] merge(double[] arrayA, double[] arrayB){\n        double[] arrayC = new double[0];\n\n        while((arrayA.length != 0) &amp;&amp; (arrayB.length != 0)){\n            if(arrayA[0]&gt;arrayB[0]){\n                arrayC = Array.arrAdd(arrayC, arrayB[0]);\n                arrayB = Array.arrRem(arrayB);\n            }else{\n                arrayC = Array.arrAdd(arrayC, arrayA[0]);\n                arrayA = Array.arrRem(arrayA);\n            }\n        }\n        while(arrayA.length != 0){\n            arrayC = Array.arrAdd(arrayC, arrayA[0]);\n            arrayA = Array.arrRem(arrayA);\n        }\n        while(arrayB.length != 0){\n            arrayC = Array.arrAdd(arrayC, arrayB[0]);\n            arrayB = Array.arrRem(arrayB);\n        }\n\n        return arrayC;\n    }\n\n    public static double[] mergeSort(double[] arrayA){\n        if(arrayA.length == 1){\n            return arrayA;\n        }\n\n        int a;\n        int b;\n\n        if(arrayA.length % 2 != 0){\n            a = (arrayA.length+1)/2;\n            b = (arrayA.length-1)/2;\n        }else{\n            a = (arrayA.length)/2;\n            b = (arrayA.length)/2;\n        }\n\n            double[] array1 = new double[a];\n            double[] array2 = new double[b];\n\n        for(int i=0; i&lt;array1.length; i++){\n            array1[i] = arrayA[0];\n            arrayA = Array.arrRem(arrayA);\n\n        }\n        for(int i=0; i&lt;array2.length; i++){\n            array2[i] = arrayA[0];\n            arrayA = Array.arrRem(arrayA);\n        }\n\n        array1 = mergeSort(array1);\n        array2 = mergeSort(array2);\n\n        return merge(array1, array2);\n    }\n</code></pre>\n<p>I am also including my &quot;arrAdd&quot; and &quot;arrRem&quot; methods that are used to add an element at the end of an array and to remove one from index 0.</p>\n<pre><code>    public static double[] arrAdd(double[] arrayA, double value){\n        double[] arrayB = new double[arrayA.length+1];\n        System.arraycopy(arrayA, 0, arrayB, 0, arrayA.length);\n        arrayB[arrayA.length] = value;\n        return arrayB;\n    }\n\n    public static double[] arrRem(double[] arrayA){\n        double[] arrayB = new double[arrayA.length-1];\n        System.arraycopy(arrayA, 1, arrayB, 0, arrayA.length - 1);\n        return arrayB;\n    }\n\n</code></pre>\n"},{"tags":["java","rest","rest-assured"],"comments":[{"owner":{"account_id":535778,"reputation":49549,"user_id":905093,"display_name":"Book Of Zeus"},"score":0,"creation_date":1634412480,"post_id":69598897,"comment_id":123019415,"body_markdown":"I am getting &quot;You don&#39;t have permission to access &quot;http://www.nseindia.com/&quot; on this server.&quot; when I try this URL ..","body":"I am getting &quot;You don&#39;t have permission to access &quot;<a href=\"http://www.nseindia.com/\" rel=\"nofollow noreferrer\">nseindia.com</a>&quot; on this server.&quot; when I try this URL .."},{"owner":{"account_id":22425724,"reputation":1060,"user_id":16632363,"display_name":"user16632363"},"score":0,"creation_date":1634413519,"post_id":69598897,"comment_id":123019648,"body_markdown":"It seems your office network does not let you resolve the host name. This is either intentional or accidental.  You&#39;d have to ask your office network admininstrator.","body":"It seems your office network does not let you resolve the host name. This is either intentional or accidental.  You&#39;d have to ask your office network admininstrator."},{"owner":{"account_id":12716774,"reputation":1,"user_id":9238526,"display_name":"Thomas Anto Nishanth"},"score":0,"creation_date":1634477105,"post_id":69598897,"comment_id":123029807,"body_markdown":"Hi. @user16632363, I have tried in browser its working fine. And also I have tried via Postman via System proxy I am able to access it. Only via Java code I am facing issue. There are some many IP address available in pac file, not able to find the proxy server details.","body":"Hi. @user16632363, I have tried in browser its working fine. And also I have tried via Postman via System proxy I am able to access it. Only via Java code I am facing issue. There are some many IP address available in pac file, not able to find the proxy server details."}],"owner":{"account_id":12716774,"reputation":1,"user_id":9238526,"display_name":"Thomas Anto Nishanth"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":607,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1634412388,"creation_date":1634412252,"question_id":69598897,"body_markdown":"When I am try to access link via Office networking getting `java.net.UnknownHostException` exception. I am trying access via Home network its working fine.\r\n\r\nOffice network is using *proxy.pac* file, which I am unable to find the proxy server. Can you please help with the alternative code.\r\n\r\nCode:\r\n\r\n    Response response = given().relaxedHTTPSValidation().when().\r\n                    get(&quot;https://www.nseindia.com/api/search/autocomplete?q=HCLTECH&quot;\r\n\r\n","title":"Unable to connect to API getting error java.net.UnknownHostException","body":"<p>When I am try to access link via Office networking getting <code>java.net.UnknownHostException</code> exception. I am trying access via Home network its working fine.</p>\n<p>Office network is using <em>proxy.pac</em> file, which I am unable to find the proxy server. Can you please help with the alternative code.</p>\n<p>Code:</p>\n<pre><code>Response response = given().relaxedHTTPSValidation().when().\n                get(&quot;https://www.nseindia.com/api/search/autocomplete?q=HCLTECH&quot;\n</code></pre>\n"},{"tags":["java","authentication","oauth","oauth-2.0","meetup"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1563355070,"post_id":57072374,"comment_id":100668654,"body_markdown":"What does your application or the part that calls the api do? Is it some background or user-independent job or is the api called on behalf of the user? Does the api provider even know the user or require some SSO login e.g. via Google, Facebook etc.?","body":"What does your application or the part that calls the api do? Is it some background or user-independent job or is the api called on behalf of the user? Does the api provider even know the user or require some SSO login e.g. via Google, Facebook etc.?"},{"owner":{"account_id":11271392,"reputation":1064,"user_id":8266738,"display_name":"Michael"},"score":1,"creation_date":1563355126,"post_id":57072374,"comment_id":100668688,"body_markdown":"Without knowing what you really need: in general, OAuth certainly can be used programmatically (without user interaction).","body":"Without knowing what you really need: in general, OAuth certainly can be used programmatically (without user interaction)."},{"owner":{"account_id":5033835,"reputation":2668,"user_id":4043273,"accept_rate":84,"display_name":"wdc"},"score":0,"creation_date":1563355397,"post_id":57072374,"comment_id":100668882,"body_markdown":"@Thomas API is used to access some xml responses from their server which we parse and it is a scheduled job which is done every day at some time. There is only one user which is the account used for our application, there are no other users, so API provider knows about our account, it is registered as a consumer of the API on their end.","body":"@Thomas API is used to access some xml responses from their server which we parse and it is a scheduled job which is done every day at some time. There is only one user which is the account used for our application, there are no other users, so API provider knows about our account, it is registered as a consumer of the API on their end."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":4,"creation_date":1563355703,"post_id":57072374,"comment_id":100669085,"body_markdown":"Well, in that case I&#39;d say you&#39;d either need the &quot;password&quot; flow or the &quot;client credentials&quot; flow (you can look those up). Which fits your needs depends on how the api is configured: if your application is just a &quot;user&quot; from the api&#39;s point of view then I&#39;d say use the &quot;password&quot; flow (the api should provide some login mechanism for that - you&#39;d log in to get the access token which you send back during subsequent requests) - if your application is a service provider (client) the &quot;client credentials&quot; flow should be sufficient (if the api supports it).","body":"Well, in that case I&#39;d say you&#39;d either need the &quot;password&quot; flow or the &quot;client credentials&quot; flow (you can look those up). Which fits your needs depends on how the api is configured: if your application is just a &quot;user&quot; from the api&#39;s point of view then I&#39;d say use the &quot;password&quot; flow (the api should provide some login mechanism for that - you&#39;d log in to get the access token which you send back during subsequent requests) - if your application is a service provider (client) the &quot;client credentials&quot; flow should be sufficient (if the api supports it)."},{"owner":{"account_id":7009242,"reputation":1636,"user_id":5372723,"accept_rate":100,"display_name":"Turtle"},"score":0,"creation_date":1563355885,"post_id":57072374,"comment_id":100669188,"body_markdown":"@Thomas From what is said in his question and comments, I would assume he wants to use the client_credentials flow.","body":"@Thomas From what is said in his question and comments, I would assume he wants to use the client_credentials flow."}],"answers":[{"tags":[],"owner":{"account_id":7009242,"reputation":1636,"user_id":5372723,"accept_rate":100,"display_name":"Turtle"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1563369496,"creation_date":1563355811,"answer_id":57072695,"question_id":57072374,"body_markdown":"You are confusing different OAuth flows. The flow where an user authenticate is usually the authorization_code flow, whereas the one you want to use should be the client_credentials flow.\r\n\r\nLet&#39;s call your application &#39;A&#39; and the organization whose service you&#39;re consuming &#39;B&#39;.\r\n\r\nIn the client_credentials flow, A will send his client_id and client_secret to B&#39;s authorization server. This server will return an access token that you can now use to call B&#39;s resource server (the service itself). \r\n\r\n\r\n&lt;pre&gt;&lt;code&gt;+---------------+          +------------------+\r\n| Application A |    1     | Authorization    |\r\n|               +----------+ serveur          |\r\n+---------------+    2     +------------------+\r\n\r\n\r\n\r\n+---------------+          +------------------+\r\n| Application A |    3     |Resource Server   |\r\n|               +----------+                  |\r\n+---------------+    4     +------------------+\r\n\r\n&lt;/code&gt;&lt;/pre&gt;\r\n\r\n 1. Token request with client_id and client_secret\r\n 2. Token response: json with an access_token\r\n 3. Service request with the header &quot;Authorization: Bearer &lt;access_token&gt;&quot;\r\n 4. Service response as usual.\r\n\r\nThe token request usually had this format:\r\n&lt;pre&gt;&lt;code&gt;POST /token HTTP/1.1\r\nHost: authorization-server.com\r\n \r\ngrant_type=client_credentials\r\n&amp;client_id=xxxxxxxxxx\r\n&amp;client_secret=xxxxxxxxxx &lt;/code&gt;&lt;/pre&gt;\r\n\r\nBut some may opt to enforce the other option: passing the client infos in the authorization header:\r\n\r\n&lt;pre&gt;&lt;code&gt;POST /token HTTP/1.1\r\nHost: authorization-server.com\r\nAuthorization: Basic base64(client_id:client_secret)\r\n \r\ngrant_type=client_credentials&lt;/code&gt;&lt;/pre&gt;\r\n\r\nBase64 is here the function, not the literal string.","title":"Programmatic authentication with oauth2","body":"<p>You are confusing different OAuth flows. The flow where an user authenticate is usually the authorization_code flow, whereas the one you want to use should be the client_credentials flow.</p>\n\n<p>Let's call your application 'A' and the organization whose service you're consuming 'B'.</p>\n\n<p>In the client_credentials flow, A will send his client_id and client_secret to B's authorization server. This server will return an access token that you can now use to call B's resource server (the service itself). </p>\n\n<pre><code>+---------------+          +------------------+\n| Application A |    1     | Authorization    |\n|               +----------+ serveur          |\n+---------------+    2     +------------------+\n\n\n\n+---------------+          +------------------+\n| Application A |    3     |Resource Server   |\n|               +----------+                  |\n+---------------+    4     +------------------+\n\n</code></pre>\n\n<ol>\n<li>Token request with client_id and client_secret</li>\n<li>Token response: json with an access_token</li>\n<li>Service request with the header \"Authorization: Bearer \"</li>\n<li>Service response as usual.</li>\n</ol>\n\n<p>The token request usually had this format:</p>\n\n<pre><code>POST /token HTTP/1.1\nHost: authorization-server.com\n\ngrant_type=client_credentials\n&client_id=xxxxxxxxxx\n&client_secret=xxxxxxxxxx </code></pre>\n\n<p>But some may opt to enforce the other option: passing the client infos in the authorization header:</p>\n\n<pre><code>POST /token HTTP/1.1\nHost: authorization-server.com\nAuthorization: Basic base64(client_id:client_secret)\n\ngrant_type=client_credentials</code></pre>\n\n<p>Base64 is here the function, not the literal string.</p>\n"},{"tags":[],"owner":{"account_id":4829430,"reputation":119,"user_id":3897973,"display_name":"bbuck"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634412156,"creation_date":1634412156,"answer_id":69598880,"question_id":57072374,"body_markdown":"I upvoted both the question and and Turtle&#39;s answer. I think anyone who has looked up this question like I have would also benefit from: \r\n\r\nhttps://auth0.com/docs/authorization/flows/which-oauth-2-0-flow-should-i-use\r\n\r\nThere are different flows. Think of them in box / handshake diagrams before code. ","title":"Programmatic authentication with oauth2","body":"<p>I upvoted both the question and and Turtle's answer. I think anyone who has looked up this question like I have would also benefit from:</p>\n<p><a href=\"https://auth0.com/docs/authorization/flows/which-oauth-2-0-flow-should-i-use\" rel=\"nofollow noreferrer\">https://auth0.com/docs/authorization/flows/which-oauth-2-0-flow-should-i-use</a></p>\n<p>There are different flows. Think of them in box / handshake diagrams before code.</p>\n"}],"owner":{"account_id":5033835,"reputation":2668,"user_id":4043273,"accept_rate":84,"display_name":"wdc"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3528,"favorite_count":0,"down_vote_count":1,"up_vote_count":6,"accepted_answer_id":57072695,"answer_count":2,"score":5,"last_activity_date":1634412156,"creation_date":1563354673,"question_id":57072374,"body_markdown":"We have used the API of some organization for some time, but now they are starting to use OAuth2 for authentication. Their API is completely used programmatically by our application. So now we have to authenticate with OAuth2 so we can use their API again. \r\n\r\nI am a little confused about this authentication process. Is there a way so one can authenticate with OAuth programmatically? It says that when authenticating the user will be asked to login before continuing with authentication, how do you achieve this logging in only from code? Or do you need to authenticate first using browser and then use the access token for further requests from the application. What is the typical process of OAuth2 authentication for this scenario?\r\n\r\nEDIT: There is only one user that is the account used for our application for accessing their data. That user is registered on their end as the consumer of the API.","title":"Programmatic authentication with oauth2","body":"<p>We have used the API of some organization for some time, but now they are starting to use OAuth2 for authentication. Their API is completely used programmatically by our application. So now we have to authenticate with OAuth2 so we can use their API again. </p>\n\n<p>I am a little confused about this authentication process. Is there a way so one can authenticate with OAuth programmatically? It says that when authenticating the user will be asked to login before continuing with authentication, how do you achieve this logging in only from code? Or do you need to authenticate first using browser and then use the access token for further requests from the application. What is the typical process of OAuth2 authentication for this scenario?</p>\n\n<p>EDIT: There is only one user that is the account used for our application for accessing their data. That user is registered on their end as the consumer of the API.</p>\n"},{"tags":["java","hibernate","jpa","spring-data-jpa","entity"],"answers":[{"tags":[],"owner":{"account_id":1012936,"reputation":145168,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1634403633,"creation_date":1634403633,"answer_id":69597772,"question_id":69597210,"body_markdown":"Let&#39;s assume you wanted to change those records with SQL. How would you know which row to update or delete if you don&#39;t have a unique column?\r\n\r\nUnless you create a unique column, there&#39;s nothing you can do about it.","title":"How to create a JPA entity for a table that doesn&#39;t have a Primary Key or Unique Key column","body":"<p>Let's assume you wanted to change those records with SQL. How would you know which row to update or delete if you don't have a unique column?</p>\n<p>Unless you create a unique column, there's nothing you can do about it.</p>\n"},{"tags":[],"owner":{"account_id":23053797,"reputation":11,"user_id":17170158,"display_name":"Laurentiu Spilca"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634412124,"creation_date":1634412124,"answer_id":69598873,"question_id":69597210,"body_markdown":"There should be a unique way to identify your records. Sometimes, you have multiple columns. In this case, you use a composed primary key. In JPA, you can implement a composed primary key in two ways: @EmbeddedId or @IdClass.","title":"How to create a JPA entity for a table that doesn&#39;t have a Primary Key or Unique Key column","body":"<p>There should be a unique way to identify your records. Sometimes, you have multiple columns. In this case, you use a composed primary key. In JPA, you can implement a composed primary key in two ways: @EmbeddedId or @IdClass.</p>\n"}],"owner":{"account_id":17426117,"reputation":95,"user_id":12630975,"display_name":"almtl"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2488,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":69597772,"answer_count":2,"score":3,"last_activity_date":1634412124,"creation_date":1634399728,"question_id":69597210,"body_markdown":"l have a table without a Primary Key or Unique Key column. I need to manipulate this table from the Spring application by using JPA and Hibernate.\r\n\r\nWhile I was trying to map this tables entity, it fails because there&#39;s no `@Id` mapping.\r\n\r\nI tried to make a composite id from all the entity properties to ensure uniqueness, but in this case, the entity has returned an immutable object. \r\n\r\nI need to manipulate some variables of this entity. What should I do? To alter the table by adding a unique column will bring me new challanges. Is there a way without altering table?","title":"How to create a JPA entity for a table that doesn&#39;t have a Primary Key or Unique Key column","body":"<p>l have a table without a Primary Key or Unique Key column. I need to manipulate this table from the Spring application by using JPA and Hibernate.</p>\n<p>While I was trying to map this tables entity, it fails because there's no <code>@Id</code> mapping.</p>\n<p>I tried to make a composite id from all the entity properties to ensure uniqueness, but in this case, the entity has returned an immutable object.</p>\n<p>I need to manipulate some variables of this entity. What should I do? To alter the table by adding a unique column will bring me new challanges. Is there a way without altering table?</p>\n"},{"tags":["java","eclipse","visualvm"],"answers":[{"tags":[],"owner":{"account_id":794766,"reputation":158675,"user_id":871026,"accept_rate":76,"display_name":"Reimeus"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1401932634,"creation_date":1401903883,"answer_id":24044109,"question_id":24044069,"body_markdown":"Add the JDK bin directory to the `PATH` environmental variable\r\n\r\n    PATH=C:\\Program Files\\Java\\jdk1.8.0_05\\bin;%PATH%","title":"VisualVM running JRE","body":"<p>Add the JDK bin directory to the <code>PATH</code> environmental variable</p>\n\n<pre><code>PATH=C:\\Program Files\\Java\\jdk1.8.0_05\\bin;%PATH%\n</code></pre>\n"},{"tags":[],"owner":{"account_id":56124,"reputation":7256,"user_id":2506382,"accept_rate":67,"display_name":"dcsohl"},"down_vote_count":1,"up_vote_count":69,"is_accepted":false,"score":68,"last_activity_date":1401903965,"creation_date":1401903965,"answer_id":24044137,"question_id":24044069,"body_markdown":"Uncomment line 72 of your visualvm.conf file, and set the value:\r\n\r\n    #visualvm_jdkhome=&quot;/path/to/jdk&quot;\r\n","title":"VisualVM running JRE","body":"<p>Uncomment line 72 of your visualvm.conf file, and set the value:</p>\n\n<pre><code>#visualvm_jdkhome=\"/path/to/jdk\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11653885,"reputation":2966,"user_id":8534285,"display_name":"Ajay Kumar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1631138332,"creation_date":1631138332,"answer_id":69110109,"question_id":24044069,"body_markdown":"For windowss its as simple as this:\r\n\r\n    &lt;YourVisualVMUnzippedDir&gt;\\visualvm.exe --jdkhome &quot;C:\\YourPathToJDKDirForExample\\Java\\jdk1.6.0&quot;\r\n\r\nSource: https://visualvm.github.io/gettingstarted.html","title":"VisualVM running JRE","body":"<p>For windowss its as simple as this:</p>\n<pre><code>&lt;YourVisualVMUnzippedDir&gt;\\visualvm.exe --jdkhome &quot;C:\\YourPathToJDKDirForExample\\Java\\jdk1.6.0&quot;\n</code></pre>\n<p>Source: <a href=\"https://visualvm.github.io/gettingstarted.html\" rel=\"nofollow noreferrer\">https://visualvm.github.io/gettingstarted.html</a></p>\n"},{"tags":[],"owner":{"account_id":6023340,"reputation":558,"user_id":5047142,"display_name":"Ankit Pandoh"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1634411691,"creation_date":1634411691,"answer_id":69598818,"question_id":24044069,"body_markdown":"For MAC users, add below line to visualvm.conf file which can be located at `/Applications/VisualVM.app/Contents/Resources/visualvm/etc`\r\n\r\n    visualvm_jdkhome=&quot;/Library/Java/JavaVirtualMachines/&lt;jdk version&gt;/Contents/Home&quot;","title":"VisualVM running JRE","body":"<p>For MAC users, add below line to visualvm.conf file which can be located at <code>/Applications/VisualVM.app/Contents/Resources/visualvm/etc</code></p>\n<pre><code>visualvm_jdkhome=&quot;/Library/Java/JavaVirtualMachines/&lt;jdk version&gt;/Contents/Home&quot;\n</code></pre>\n"}],"owner":{"account_id":3827997,"reputation":429,"user_id":3174377,"accept_rate":100,"display_name":"Peter"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28206,"favorite_count":0,"down_vote_count":0,"up_vote_count":22,"accepted_answer_id":24044109,"answer_count":4,"score":22,"last_activity_date":1634411691,"creation_date":1401903732,"question_id":24044069,"body_markdown":"I can&#39;t get VisualVM working with eclipse, i was following these instructions\r\n&lt;http://visualvm.java.net/download.html&gt;\r\nand also these\r\n&lt;http://visualvm.java.net/gettingstarted.html&gt;\r\n\r\nThe problem is that it cant see JDK location which is &quot;C:\\Program Files\\Java\\jdk1.8.0_05&quot;, this happens when i try to run the application\r\n\r\n![enter image description here][1]\r\n\r\nHere is the original content of visualvm.conf file\r\n\r\n&lt;http://pastebin.com/K9TnQb0G&gt;\r\n\r\nUnfortunately my command line is somehow broken too(or I&#39;m the one who dont know how to do it)\r\n\r\n![enter image description here][2]\r\n\r\n\r\nFirst I tryed to install JProbe but it wasnt working, then I tryed VisualVM and it also isn&#39;t working. How can i resolve this please? I wasted 5 hours and its driving me crazy.\r\n\r\n  [1]: http://i.stack.imgur.com/rtENN.png\r\n  [2]: http://i.stack.imgur.com/gxKzq.png","title":"VisualVM running JRE","body":"<p>I can't get VisualVM working with eclipse, i was following these instructions\n<a href=\"http://visualvm.java.net/download.html\" rel=\"noreferrer\">http://visualvm.java.net/download.html</a>\nand also these\n<a href=\"http://visualvm.java.net/gettingstarted.html\" rel=\"noreferrer\">http://visualvm.java.net/gettingstarted.html</a></p>\n\n<p>The problem is that it cant see JDK location which is \"C:\\Program Files\\Java\\jdk1.8.0_05\", this happens when i try to run the application</p>\n\n<p><img src=\"https://i.stack.imgur.com/rtENN.png\" alt=\"enter image description here\"></p>\n\n<p>Here is the original content of visualvm.conf file</p>\n\n<p><a href=\"http://pastebin.com/K9TnQb0G\" rel=\"noreferrer\">http://pastebin.com/K9TnQb0G</a></p>\n\n<p>Unfortunately my command line is somehow broken too(or I'm the one who dont know how to do it)</p>\n\n<p><img src=\"https://i.stack.imgur.com/gxKzq.png\" alt=\"enter image description here\"></p>\n\n<p>First I tryed to install JProbe but it wasnt working, then I tryed VisualVM and it also isn't working. How can i resolve this please? I wasted 5 hours and its driving me crazy.</p>\n"},{"tags":["java","tomcat","servlets","glassfish"],"answers":[{"tags":[],"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1634411585,"creation_date":1634411585,"answer_id":69598801,"question_id":69597036,"body_markdown":"According to [this FAQ entry](https://javaee.github.io/glassfish/wiki-archive/FaqGlassFishTomcat.html) the Glassfish web container is a fork of Tomcat 5.5. Therefore it uses the same package names, although Tomcat&#39;s code has evolved a lot since the fork.","title":"Does GlassFish servlet container use that catalina?","body":"<p>According to <a href=\"https://javaee.github.io/glassfish/wiki-archive/FaqGlassFishTomcat.html\" rel=\"nofollow noreferrer\">this FAQ entry</a> the Glassfish web container is a fork of Tomcat 5.5. Therefore it uses the same package names, although Tomcat's code has evolved a lot since the fork.</p>\n"}],"owner":{"account_id":13737414,"reputation":613,"user_id":10147834,"display_name":"Sara"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":196,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69598801,"answer_count":1,"score":1,"last_activity_date":1634411585,"creation_date":1634398449,"question_id":69597036,"body_markdown":"I am running the same servlet application in both Apache Tomcat and GlassFish servers. \r\nI wanted to see the ServletConfig and ServletContext implementation class names. \r\nSurprisingly, I found that GlassFish is also using from Apache Tomcat&#39;s catalina classes. Is my observation correct? If yes, why isn&#39;t GlassFish using its own servlet implementation classes? \r\n\r\n[![Running a Servlet in Apache Tomcat server][1]][1]\r\n\r\n\r\n[![Running a Servlet in GlassFish Server[2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/gnKiR.png\r\n  [2]: https://i.stack.imgur.com/kx4Vk.png","title":"Does GlassFish servlet container use that catalina?","body":"<p>I am running the same servlet application in both Apache Tomcat and GlassFish servers.\nI wanted to see the ServletConfig and ServletContext implementation class names.\nSurprisingly, I found that GlassFish is also using from Apache Tomcat's catalina classes. Is my observation correct? If yes, why isn't GlassFish using its own servlet implementation classes?</p>\n<p><a href=\"https://i.stack.imgur.com/gnKiR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gnKiR.png\" alt=\"Running a Servlet in Apache Tomcat server\" /></a></p>\n<p>[<img src=\"https://i.stack.imgur.com/kx4Vk.png\" alt=\"Running a Servlet in GlassFish Server2\" /></p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":535778,"reputation":49549,"user_id":905093,"display_name":"Book Of Zeus"},"score":0,"creation_date":1634408944,"post_id":69598454,"comment_id":123018682,"body_markdown":"define &quot;wrong&quot;?","body":"define &quot;wrong&quot;?"},{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":3,"creation_date":1634408971,"post_id":69598454,"comment_id":123018686,"body_markdown":"Because they go out of scope at the end of the `else` block you can&#39;t print them after that. You throw an `Exception` in the `if` block. You don&#39;t need an `else`.","body":"Because they go out of scope at the end of the <code>else</code> block you can&#39;t print them after that. You throw an <code>Exception</code> in the <code>if</code> block. You don&#39;t need an <code>else</code>."},{"owner":{"account_id":22460564,"reputation":13,"user_id":16662547,"display_name":"xomage"},"score":0,"creation_date":1634409082,"post_id":69598454,"comment_id":123018709,"body_markdown":"Thank you Elliott Frisch, I got it , my bad.","body":"Thank you Elliott Frisch, I got it , my bad."}],"answers":[{"tags":[],"owner":{"account_id":300800,"reputation":10941,"user_id":608164,"accept_rate":62,"display_name":"30thh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1634411012,"creation_date":1634410607,"answer_id":69598709,"question_id":69598454,"body_markdown":"Java works differently compared to JavaScript. Every {} block has an own variable scope. Variables defined inside a block are not visible outside.\r\n\r\n    public static void main(String[] args) {\r\n      {\r\n        int x=1;\r\n        System.out.println(x); // prints 1\r\n      }\r\n      {\r\n        int x=2;\r\n        System.out.println(x); // prints 2\r\n      }\r\n      // System.out.println(x); // error: cannot find symbol\r\n    }","title":"local variable initialization were wrong java","body":"<p>Java works differently compared to JavaScript. Every {} block has an own variable scope. Variables defined inside a block are not visible outside.</p>\n<pre><code>public static void main(String[] args) {\n  {\n    int x=1;\n    System.out.println(x); // prints 1\n  }\n  {\n    int x=2;\n    System.out.println(x); // prints 2\n  }\n  // System.out.println(x); // error: cannot find symbol\n}\n</code></pre>\n"}],"owner":{"account_id":22460564,"reputation":13,"user_id":16662547,"display_name":"xomage"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"closed_date":1634458413,"accepted_answer_id":69598709,"answer_count":1,"score":-1,"last_activity_date":1634411012,"creation_date":1634408721,"question_id":69598454,"body_markdown":"I am new to java, why a, b,c initialization are wrong in the following code.\r\n\r\n    public static void main(String[] args) {\r\n\r\n\t\tif (args.length &lt; 2) \r\n\t\t\tthrow new IllegalArgumentException (&quot;we need 2 argumeents&quot;);\r\n\t\telse { \r\n\t\t   int a = Integer.parseInt(args[0]);\r\n\t\t   int b = Integer.parseInt(args[1]);\r\n\t\t   int c = a+b;\r\n\t\t}\r\n\t\t\tSystem.out.println(a + &quot; + &quot; + b + &quot; = &quot; + c);\r\n\t}","title":"local variable initialization were wrong java","body":"<p>I am new to java, why a, b,c initialization are wrong in the following code.</p>\n<pre><code>public static void main(String[] args) {\n\n    if (args.length &lt; 2) \n        throw new IllegalArgumentException (&quot;we need 2 argumeents&quot;);\n    else { \n       int a = Integer.parseInt(args[0]);\n       int b = Integer.parseInt(args[1]);\n       int c = a+b;\n    }\n        System.out.println(a + &quot; + &quot; + b + &quot; = &quot; + c);\n}\n</code></pre>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":18243171,"reputation":19300,"user_id":13279831,"display_name":"Nowhere Man"},"score":0,"creation_date":1634407087,"post_id":69598120,"comment_id":123018251,"body_markdown":"Which specific issue do you have?  `ArrayIndexOutOfBounds` exception is caused by invalid upper limit in all `for` loops.  Indexes of arrays in java start from to `n - 1`, so they look: `for (int i = 0, n = arr.length; i &lt; n; i++)`","body":"Which specific issue do you have?  <code>ArrayIndexOutOfBounds</code> exception is caused by invalid upper limit in all <code>for</code> loops.  Indexes of arrays in java start from to <code>n - 1</code>, so they look: <code>for (int i = 0, n = arr.length; i &lt; n; i++)</code>"},{"owner":{"display_name":"user15237617"},"score":0,"creation_date":1634407415,"post_id":69598120,"comment_id":123018337,"body_markdown":"Exception in thread &quot;main&quot; java.util.NoSuchElementException\n\tat java.base/java.util.Scanner.throwFor(Scanner.java:937)\n\tat java.base/java.util.Scanner.next(Scanner.java:1594)\n\tat java.base/java.util.Scanner.nextInt(Scanner.java:2258)\n\tat java.base/java.util.Scanner.nextInt(Scanner.java:2212)\n\tat Main.main(Main.java:29)\nthis was the exception shown","body":"Exception in thread &quot;main&quot; java.util.NoSuchElementException \tat java.base/java.util.Scanner.throwFor(Scanner.java:937) \tat java.base/java.util.Scanner.next(Scanner.java:1594) \tat java.base/java.util.Scanner.nextInt(Scanner.java:2258) \tat java.base/java.util.Scanner.nextInt(Scanner.java:2212) \tat Main.main(Main.java:29) this was the exception shown"},{"owner":{"account_id":18243171,"reputation":19300,"user_id":13279831,"display_name":"Nowhere Man"},"score":0,"creation_date":1634408326,"post_id":69598120,"comment_id":123018530,"body_markdown":"`NoSuchElementException` is not reproducible, only `ArrayIndexOutOfBounds`","body":"<code>NoSuchElementException</code> is not reproducible, only <code>ArrayIndexOutOfBounds</code>"}],"answers":[{"tags":[],"owner":{"account_id":21825332,"reputation":1219,"user_id":16120911,"display_name":"sittsering"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634407484,"creation_date":1634407004,"answer_id":69598239,"question_id":69598120,"body_markdown":"1. Index starts from 0 and it goes till n-1. &lt;br&gt;\r\nSo, the condition in for-loop should be `i&lt;n` instead of `i&lt;=n`,`for(int i=0;i&lt;n;i++)`.&lt;br&gt;\r\n2. You have created 2 functions but it doesn&#39;t return any value nor changes anything. As you are passing the array by value, not by references.&lt;br&gt;\r\n3. You don&#39;t need the 2 functions, just one for finding max and min in linear, or sort the array in ascending order and `array[0]` will be the min and `array[n-1]` will be max.","title":"i want to find the span of a array. Span is defined as difference of maximum value and minimum value","body":"<ol>\n<li>Index starts from 0 and it goes till n-1. <br>\nSo, the condition in for-loop should be <code>i&lt;n</code> instead of <code>i&lt;=n</code>,<code>for(int i=0;i&lt;n;i++)</code>.<br></li>\n<li>You have created 2 functions but it doesn't return any value nor changes anything. As you are passing the array by value, not by references.<br></li>\n<li>You don't need the 2 functions, just one for finding max and min in linear, or sort the array in ascending order and <code>array[0]</code> will be the min and <code>array[n-1]</code> will be max.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":18195703,"reputation":114,"user_id":14510226,"display_name":"1001pepi"},"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1634407787,"creation_date":1634407787,"answer_id":69598334,"question_id":69598120,"body_markdown":"There is an approach very similar to what you want to do.\r\n\r\n```\r\n   import java.io.*;\r\nimport java.util.*;\r\n\r\npublic class Main{\r\n\r\npublic static int smler(int arr[],int N){\r\n    int smaller = arr[0];\r\n\r\n    for (int i=1;i&lt;N;i++){\r\n        if(arr[i] &lt; smaller){\r\n          smaller = arr[i];\r\n        }\r\n    }\r\n\r\n    return smaller;\r\n}\r\npublic static int grter(int arr[],int N){\r\n    int greater = arr[0];\r\n\r\n    for (int i=0;i&lt;N;i++){\r\n        if(arr[i] &gt; greater){\r\n          greater = arr[i];\r\n        }\r\n    }\r\n    \r\n    return greater;\r\n}\r\n\r\npublic static void main(String[] args) throws Exception {\r\n  Scanner sc= new Scanner (System.in);\r\n  int n=sc.nextInt();\r\n  int[] arr= new int[n];\r\n  for(int i=0;i&lt;=n;i++){\r\n      arr[i]=sc.nextInt();\r\n  }\r\n  \r\n System.out.println(grter(arr, n) - smler(arr, n));\r\n }\r\n} \r\n```","title":"i want to find the span of a array. Span is defined as difference of maximum value and minimum value","body":"<p>There is an approach very similar to what you want to do.</p>\n<pre><code>   import java.io.*;\nimport java.util.*;\n\npublic class Main{\n\npublic static int smler(int arr[],int N){\n    int smaller = arr[0];\n\n    for (int i=1;i&lt;N;i++){\n        if(arr[i] &lt; smaller){\n          smaller = arr[i];\n        }\n    }\n\n    return smaller;\n}\npublic static int grter(int arr[],int N){\n    int greater = arr[0];\n\n    for (int i=0;i&lt;N;i++){\n        if(arr[i] &gt; greater){\n          greater = arr[i];\n        }\n    }\n    \n    return greater;\n}\n\npublic static void main(String[] args) throws Exception {\n  Scanner sc= new Scanner (System.in);\n  int n=sc.nextInt();\n  int[] arr= new int[n];\n  for(int i=0;i&lt;=n;i++){\n      arr[i]=sc.nextInt();\n  }\n  \n System.out.println(grter(arr, n) - smler(arr, n));\n }\n} \n</code></pre>\n"},{"tags":[],"owner":{"account_id":14462301,"reputation":673,"user_id":10446802,"display_name":"Fermi-4"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1634407844,"creation_date":1634407844,"answer_id":69598345,"question_id":69598120,"body_markdown":"There are a lot of errors in your logic.\r\n\r\nThe for loop does not need to be `&lt;=` it needs to be `&lt;` otherwise you will get out of bounds exception.\r\n\r\nThe way you are calculating the min and max are wrong.\r\n\r\nHere is an example for you to study that does what you are trying to accomplish:\r\n\r\n    import java.util.Scanner;\r\n    \r\n    public class ArraySpan {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tScanner sc = new Scanner(System.in);\r\n    \t\tSystem.out.println(&quot;Enter array size:&quot;);\r\n    \t\tint n = sc.nextInt();\r\n    \t\tint[] arr = new int[n];\r\n    \t\tfor (int i = 0; i &lt; n; i++) {\r\n    \t\t\tSystem.out.println(&quot;Enter value:&quot;);\r\n    \t\t\tarr[i] = sc.nextInt();\r\n    \t\t}\r\n    \t\tint min = findMin(arr);\r\n    \t\tint max = findMax(arr);\r\n    \r\n    \t\tSystem.out.println(&quot;The span of the array = &quot; + (max - min));\r\n    \t\tsc.close();\r\n    \t}\r\n    \r\n    \tstatic int findMax(int[] a) {\r\n    \t\tint max = Integer.MIN_VALUE;\r\n    \t\tfor (int i = 0; i &lt; a.length; i++) {\r\n    \t\t\tif (a[i] &gt; max)\r\n    \t\t\t\tmax = a[i];\r\n    \t\t}\r\n    \t\treturn max;\r\n    \t}\r\n    \r\n    \tstatic int findMin(int[] a) {\r\n    \t\tint min = Integer.MAX_VALUE;\r\n    \t\tfor (int i = 0; i &lt; a.length; i++) {\r\n    \t\t\tif (a[i] &lt; min)\r\n    \t\t\t\tmin = a[i];\r\n    \t\t}\r\n    \t\treturn min;\r\n    \t}\r\n    }\r\n\r\n\r\nand output:\r\n\r\n    Enter array size:\r\n    3\r\n    Enter value:\r\n    1\r\n    Enter value:\r\n    2\r\n    Enter value:\r\n    3\r\n    The span of the array = 2\r\n\r\n","title":"i want to find the span of a array. Span is defined as difference of maximum value and minimum value","body":"<p>There are a lot of errors in your logic.</p>\n<p>The for loop does not need to be <code>&lt;=</code> it needs to be <code>&lt;</code> otherwise you will get out of bounds exception.</p>\n<p>The way you are calculating the min and max are wrong.</p>\n<p>Here is an example for you to study that does what you are trying to accomplish:</p>\n<pre><code>import java.util.Scanner;\n\npublic class ArraySpan {\n\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        System.out.println(&quot;Enter array size:&quot;);\n        int n = sc.nextInt();\n        int[] arr = new int[n];\n        for (int i = 0; i &lt; n; i++) {\n            System.out.println(&quot;Enter value:&quot;);\n            arr[i] = sc.nextInt();\n        }\n        int min = findMin(arr);\n        int max = findMax(arr);\n\n        System.out.println(&quot;The span of the array = &quot; + (max - min));\n        sc.close();\n    }\n\n    static int findMax(int[] a) {\n        int max = Integer.MIN_VALUE;\n        for (int i = 0; i &lt; a.length; i++) {\n            if (a[i] &gt; max)\n                max = a[i];\n        }\n        return max;\n    }\n\n    static int findMin(int[] a) {\n        int min = Integer.MAX_VALUE;\n        for (int i = 0; i &lt; a.length; i++) {\n            if (a[i] &lt; min)\n                min = a[i];\n        }\n        return min;\n    }\n}\n</code></pre>\n<p>and output:</p>\n<pre><code>Enter array size:\n3\nEnter value:\n1\nEnter value:\n2\nEnter value:\n3\nThe span of the array = 2\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6937186,"reputation":1164,"user_id":5324721,"display_name":"Kumar Ashutosh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634410505,"creation_date":1634408361,"answer_id":69598408,"question_id":69598120,"body_markdown":"\r\nIt would better if you could look for complexity improvement.\r\n\r\nIdea is to get the max and the min in best possible way and this can be achieved using any sorting techniques, let us assume your sort method runs in `O(n log n)` time, and then you just need to get the difference of 1st element(`0 th index`) and last element(`n-1 th index`).\r\n\r\n```Java\r\npublic static void main(String[] args) throws Exception {\r\n  Scanner sc= new Scanner (System.in);\r\n  int n=sc.nextInt();\r\n\r\n  int[] arr= new int[n];\r\n\r\n  // insert values into your array\r\n\r\n  if(arr.length &gt;= 2){\r\n    sort(arr); // Implement your any sorting method\r\n\r\n    // Make sure that your arr has exactly n elements, ,\r\n    // Otherwise rest of the indices will all be zero(0)\r\n    System.out.println(arr[0]-arr[arr.length-1]); // last index is &#39;arr.length-1&#39;\r\n    return; // Return from here\r\n  }\r\n\r\n  // arr has not sufficient elements to determine span\r\n  throw new UnsupportedOperationException(&quot;Invalid entry&quot;);\r\n  \r\n }\r\n}\r\n```\r\n","title":"i want to find the span of a array. Span is defined as difference of maximum value and minimum value","body":"<p>It would better if you could look for complexity improvement.</p>\n<p>Idea is to get the max and the min in best possible way and this can be achieved using any sorting techniques, let us assume your sort method runs in <code>O(n log n)</code> time, and then you just need to get the difference of 1st element(<code>0 th index</code>) and last element(<code>n-1 th index</code>).</p>\n<pre><code>public static void main(String[] args) throws Exception {\n  Scanner sc= new Scanner (System.in);\n  int n=sc.nextInt();\n\n  int[] arr= new int[n];\n\n  // insert values into your array\n\n  if(arr.length &gt;= 2){\n    sort(arr); // Implement your any sorting method\n\n    // Make sure that your arr has exactly n elements, ,\n    // Otherwise rest of the indices will all be zero(0)\n    System.out.println(arr[0]-arr[arr.length-1]); // last index is 'arr.length-1'\n    return; // Return from here\n  }\n\n  // arr has not sufficient elements to determine span\n  throw new UnsupportedOperationException(&quot;Invalid entry&quot;);\n  \n }\n}\n</code></pre>\n"}],"owner":{"display_name":"user15237617"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":196,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"closed_date":1634410578,"accepted_answer_id":69598334,"answer_count":4,"score":0,"last_activity_date":1634410505,"creation_date":1634406212,"question_id":69598120,"body_markdown":"I tried by creating two functions for greatest and smallest values and then subtracting them .but the code doesn&#39;t seem to work\r\nhere&#39;s the code.See if u could help me out .im new to java and still learning.\r\n```\r\n    import java.io.*;\r\nimport java.util.*;\r\n\r\npublic class Main{\r\n\r\npublic static void smler(int arr[],int j){\r\n    for (int i=0;i&lt;=j;j++){\r\n        if(arr[i]&lt;arr[i+1]){\r\n        int temp =arr[i];\r\n        arr[i]=arr[i+1];\r\n        arr[i+1]=temp;\r\n        }\r\n    }\r\n}\r\npublic static void grter(int arr[],int j){\r\n    for (int i=0;i&lt;=j;j++){\r\n        if(arr[i]&gt;arr[i+1]){\r\n        int temp =arr[i];\r\n        arr[i]=arr[i+1];\r\n        arr[i+1]=temp;\r\n    }\r\n    }\r\n}\r\npublic static void main(String[] args) throws Exception {\r\n  Scanner sc= new Scanner (System.in);\r\n  int n=sc.nextInt();\r\n  int[] arr= new int[n];\r\n  for(int i=0;i&lt;=n;i++){\r\n      arr[i]=sc.nextInt();\r\n  }\r\n  grter(arr,n);\r\n int y= arr[n];\r\n smler(arr,n);\r\n int z = arr[n];\r\n System.out.println(y-z);\r\n }\r\n} \r\n```","title":"i want to find the span of a array. Span is defined as difference of maximum value and minimum value","body":"<p>I tried by creating two functions for greatest and smallest values and then subtracting them .but the code doesn't seem to work\nhere's the code.See if u could help me out .im new to java and still learning.</p>\n<pre><code>    import java.io.*;\nimport java.util.*;\n\npublic class Main{\n\npublic static void smler(int arr[],int j){\n    for (int i=0;i&lt;=j;j++){\n        if(arr[i]&lt;arr[i+1]){\n        int temp =arr[i];\n        arr[i]=arr[i+1];\n        arr[i+1]=temp;\n        }\n    }\n}\npublic static void grter(int arr[],int j){\n    for (int i=0;i&lt;=j;j++){\n        if(arr[i]&gt;arr[i+1]){\n        int temp =arr[i];\n        arr[i]=arr[i+1];\n        arr[i+1]=temp;\n    }\n    }\n}\npublic static void main(String[] args) throws Exception {\n  Scanner sc= new Scanner (System.in);\n  int n=sc.nextInt();\n  int[] arr= new int[n];\n  for(int i=0;i&lt;=n;i++){\n      arr[i]=sc.nextInt();\n  }\n  grter(arr,n);\n int y= arr[n];\n smler(arr,n);\n int z = arr[n];\n System.out.println(y-z);\n }\n} \n</code></pre>\n"},{"tags":["java","hibernate","jpa"],"answers":[{"tags":[],"owner":{"account_id":16682690,"reputation":568,"user_id":12057371,"display_name":"vincendep"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634410392,"creation_date":1634410392,"answer_id":69598682,"question_id":69598169,"body_markdown":"    if (filter.getBirthId() != null) {\r\n         cq.select(cb.count(animal));\r\n         cq.where(\r\n             deleteDatetimePredicate, \r\n             cb.eq(animal.get(&quot;birth&quot;).get(&quot;id&quot;), filter.getBirthId()));\r\n    }\r\n","title":"JPA CriteriaBuilder count returns wrong data","body":"<pre><code>if (filter.getBirthId() != null) {\n     cq.select(cb.count(animal));\n     cq.where(\n         deleteDatetimePredicate, \n         cb.eq(animal.get(&quot;birth&quot;).get(&quot;id&quot;), filter.getBirthId()));\n}\n</code></pre>\n"}],"owner":{"account_id":18025801,"reputation":149,"user_id":13101805,"display_name":"HappyProgrammer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":146,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1634410392,"creation_date":1634406573,"question_id":69598169,"body_markdown":"I want to count my rows with conditions birthId which I have from AnimalFilter and deleteDatetime which is always null. It returns me strange values -&gt; similar for every birthId but they are different in my database. \r\nWhat am I doing wrong? \r\n\r\nMy code:\r\n\r\n   \r\n\r\n     @Repository\r\n    public class AnimalSearchCount {\r\n    \r\n        @PersistenceContext\r\n        private EntityManager entityManager;\r\n    \r\n        Long countBy(AnimalFilter filter) {\r\n            CriteriaBuilder cb = entityManager.getCriteriaBuilder();\r\n            CriteriaQuery&lt;Long&gt; cq = cb.createQuery(Long.class);\r\n    \r\n            Root&lt;Animal&gt; animal = cq.from(Animal.class);\r\n    \r\n            Predicate deleteDatetimePredicate = cb.isNull(animal.get(&quot;deleteDateTime&quot;));\r\n    \r\n            if (filter.getBirthId() != null) {\r\n                cq.select(cb.count(animal.get(&quot;birth&quot;).get(&quot;id&quot;)));\r\n                cq.where(deleteDatetimePredicate);\r\n            }\r\n    \r\n            return entityManager.createQuery(cq).getSingleResult();\r\n        }\r\n    }\r\n\r\n\r\n","title":"JPA CriteriaBuilder count returns wrong data","body":"<p>I want to count my rows with conditions birthId which I have from AnimalFilter and deleteDatetime which is always null. It returns me strange values -&gt; similar for every birthId but they are different in my database.\nWhat am I doing wrong?</p>\n<p>My code:</p>\n<pre><code> @Repository\npublic class AnimalSearchCount {\n\n    @PersistenceContext\n    private EntityManager entityManager;\n\n    Long countBy(AnimalFilter filter) {\n        CriteriaBuilder cb = entityManager.getCriteriaBuilder();\n        CriteriaQuery&lt;Long&gt; cq = cb.createQuery(Long.class);\n\n        Root&lt;Animal&gt; animal = cq.from(Animal.class);\n\n        Predicate deleteDatetimePredicate = cb.isNull(animal.get(&quot;deleteDateTime&quot;));\n\n        if (filter.getBirthId() != null) {\n            cq.select(cb.count(animal.get(&quot;birth&quot;).get(&quot;id&quot;)));\n            cq.where(deleteDatetimePredicate);\n        }\n\n        return entityManager.createQuery(cq).getSingleResult();\n    }\n}\n</code></pre>\n"},{"tags":["java","attributes","openldap","spring-ldap"],"answers":[{"tags":[],"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1483571343,"creation_date":1483571343,"answer_id":41474759,"question_id":41442733,"body_markdown":"You&#39;re testing the wrong thing. Testing for existence is pointless anyway. You should be testing for whether it is already set to TRUE, and only setting it if it isn&#39;t.\r\n\r\nActually you should just remove the test, as the test is just as expensive as the set. I would also recommend not setting it to FALSE but rather removing the attribute altogether, which has the same semantics as FALSE. Without the test and with this change you can&#39;t possibly get this problem.","title":"spring-ldap auto fetch operational fields","body":"<p>You're testing the wrong thing. Testing for existence is pointless anyway. You should be testing for whether it is already set to TRUE, and only setting it if it isn't.</p>\n\n<p>Actually you should just remove the test, as the test is just as expensive as the set. I would also recommend not setting it to FALSE but rather removing the attribute altogether, which has the same semantics as FALSE. Without the test and with this change you can't possibly get this problem.</p>\n"}],"owner":{"account_id":4406016,"reputation":201,"user_id":3590404,"accept_rate":78,"display_name":"Thadir"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":478,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":41474759,"answer_count":1,"score":0,"last_activity_date":1634410248,"creation_date":1483443730,"question_id":41442733,"body_markdown":"Gooday,\r\n\r\nWere working on a tool that lets users change there password (generated). And I&#39;m walking in to a litle problem where using Spring Ldap (2.1.0.RELEASE).\r\n\r\nNow we want to set some of the operational attributes. This is the code I use:\r\n\r\n      public void updatePassword(LdapUser ldapUser) {\r\n        String[] userOrg = ldapUser.getUserName().split(&quot;@&quot;);\r\n        Name dn = buildDn(userOrg[1], ldapUser.getUserName());\r\n        DirContextOperations context = ldapTemplate.lookupContext(dn);\r\n        context.setAttributeValue(USER_PASSW, ldapUser.getUserPassword());\r\n        if(!context.attributeExists(&quot;pwdReset&quot;)) {\r\n          context.setAttributeValue(&quot;pwdReset&quot;, &quot;TRUE&quot;);\r\n        }\r\n        ldapTemplate.modifyAttributes(context);\r\n      }\r\n\r\nNow as long the operational attribute pwdReset is never set this bit of code works fine. But if it has ever been set (and thus is the value FALSE). You can get the error code: \r\n\r\n&gt; LDAP: error code 20 - modify/add: pwdReset: value #0 already exists\r\n\r\nNow I know its by design the Ldap does not give the operational attributes back. But there has to be a way in Spring Ldap to tell it that you always want to also have the Operational Attributes.\r\n\r\nAnny sugestions would be nice.","title":"spring-ldap auto fetch operational fields","body":"<p>Gooday,</p>\n\n<p>Were working on a tool that lets users change there password (generated). And I'm walking in to a litle problem where using Spring Ldap (2.1.0.RELEASE).</p>\n\n<p>Now we want to set some of the operational attributes. This is the code I use:</p>\n\n<pre><code>  public void updatePassword(LdapUser ldapUser) {\n    String[] userOrg = ldapUser.getUserName().split(\"@\");\n    Name dn = buildDn(userOrg[1], ldapUser.getUserName());\n    DirContextOperations context = ldapTemplate.lookupContext(dn);\n    context.setAttributeValue(USER_PASSW, ldapUser.getUserPassword());\n    if(!context.attributeExists(\"pwdReset\")) {\n      context.setAttributeValue(\"pwdReset\", \"TRUE\");\n    }\n    ldapTemplate.modifyAttributes(context);\n  }\n</code></pre>\n\n<p>Now as long the operational attribute pwdReset is never set this bit of code works fine. But if it has ever been set (and thus is the value FALSE). You can get the error code: </p>\n\n<blockquote>\n  <p>LDAP: error code 20 - modify/add: pwdReset: value #0 already exists</p>\n</blockquote>\n\n<p>Now I know its by design the Ldap does not give the operational attributes back. But there has to be a way in Spring Ldap to tell it that you always want to also have the Operational Attributes.</p>\n\n<p>Anny sugestions would be nice.</p>\n"},{"tags":["java","arrays","immutability"],"comments":[{"owner":{"account_id":19697,"reputation":16105,"user_id":46375,"accept_rate":100,"display_name":"whaley"},"score":51,"creation_date":1284387944,"post_id":3700971,"comment_id":3902461,"body_markdown":"Do yourself a favor and stop using arrays in Java for anything besides 1) io  2) heavy number crunching  3) if you need to implement your own List/Collection (which is *rare*).  They are extremely inflexible and antiquated... as you have just discovered with this question.","body":"Do yourself a favor and stop using arrays in Java for anything besides 1) io  2) heavy number crunching  3) if you need to implement your own List/Collection (which is <i>rare</i>).  They are extremely inflexible and antiquated... as you have just discovered with this question."},{"owner":{"account_id":185700,"reputation":91879,"user_id":422597,"display_name":"Colin Hebert"},"score":46,"creation_date":1284388144,"post_id":3700971,"comment_id":3902487,"body_markdown":"@Whaley, and performances, and code where you don&#39;t need &quot;dynamic&quot; arrays. Arrays are still useful in lot of places, it&#39;s not that rare.","body":"@Whaley, and performances, and code where you don&#39;t need &quot;dynamic&quot; arrays. Arrays are still useful in lot of places, it&#39;s not that rare."},{"owner":{"account_id":19061,"reputation":185736,"user_id":44330,"accept_rate":70,"display_name":"Jason S"},"score":10,"creation_date":1284391133,"post_id":3700971,"comment_id":3903026,"body_markdown":"@Colin: yes but they&#39;re severely constraining; it&#39;s best to get into the habit of thinking &quot;do I really need an array here or can I use a List instead?&quot;","body":"@Colin: yes but they&#39;re severely constraining; it&#39;s best to get into the habit of thinking &quot;do I really need an array here or can I use a List instead?&quot;"},{"owner":{"account_id":70730,"reputation":3152,"user_id":204840,"accept_rate":68,"display_name":"cthulhu"},"score":7,"creation_date":1284405078,"post_id":3700971,"comment_id":3905462,"body_markdown":"@Colin: Only optimize when you need to. When you find yourself spending half a minute adding something that, for example, enlarges an array or you keep some index outside of the scope of a for-loop, you&#39;ve already wasted some of your boss&#39; time. Build first, optimize when and where it&#39;s needed - and in most applications, that&#39;s not in replacing Lists with arrays.","body":"@Colin: Only optimize when you need to. When you find yourself spending half a minute adding something that, for example, enlarges an array or you keep some index outside of the scope of a for-loop, you&#39;ve already wasted some of your boss&#39; time. Build first, optimize when and where it&#39;s needed - and in most applications, that&#39;s not in replacing Lists with arrays."},{"owner":{"account_id":97818,"reputation":114824,"user_id":265143,"accept_rate":72,"display_name":"P&#233;ter T&#246;r&#246;k"},"score":4,"creation_date":1284450891,"post_id":3700971,"comment_id":3909719,"body_markdown":"@Colin, performance-wise, an `ArrayList` is on par with arrays (since it is implemented internally on top of an array). However, it is generic, thus it is safer to use and more flexible. In most places where an array would be &quot;useful&quot;, a collection would be equally useful or better.","body":"@Colin, performance-wise, an <code>ArrayList</code> is on par with arrays (since it is implemented internally on top of an array). However, it is generic, thus it is safer to use and more flexible. In most places where an array would be &quot;useful&quot;, a collection would be equally useful or better."},{"owner":{"account_id":2367760,"reputation":2249,"user_id":2073130,"accept_rate":80,"display_name":"lcn"},"score":11,"creation_date":1379654485,"post_id":3700971,"comment_id":27914534,"body_markdown":"Well, why nobody mentioned `int[]` and `new int[]` is MUCH easier to type than `List&lt;Integer&gt;` and `new ArrayList&lt;Integer&gt;`? XD","body":"Well, why nobody mentioned <code>int[]</code> and <code>new int[]</code> is MUCH easier to type than <code>List&lt;Integer&gt;</code> and <code>new ArrayList&lt;Integer&gt;</code>? XD"},{"owner":{"account_id":4028938,"reputation":4478,"user_id":3315914,"display_name":"rpax"},"score":0,"creation_date":1429116600,"post_id":3700971,"comment_id":47451908,"body_markdown":"@lcn In java 7+, you can use `new ArrayList&lt;&gt;`","body":"@lcn In java 7+, you can use <code>new ArrayList&lt;&gt;</code>"},{"owner":{"account_id":2983071,"reputation":5017,"user_id":2532621,"display_name":"ash"},"score":6,"creation_date":1443719010,"post_id":3700971,"comment_id":53615565,"body_markdown":"@Icn because easy-to-type is the last concern on the list.","body":"@Icn because easy-to-type is the last concern on the list."},{"owner":{"account_id":5745825,"reputation":11543,"user_id":4537090,"accept_rate":79,"display_name":"WesternGun"},"score":2,"creation_date":1472027062,"post_id":3700971,"comment_id":65582370,"body_markdown":"List are convinient, but I do need array to create a `JTable`, or something else. At last data in ArrayList are processed in an array-like way to gain performance advantages. So when you are doing simple tasks, why not array?","body":"List are convinient, but I do need array to create a <code>JTable</code>, or something else. At last data in ArrayList are processed in an array-like way to gain performance advantages. So when you are doing simple tasks, why not array?"},{"owner":{"account_id":1257650,"reputation":23479,"user_id":1216775,"accept_rate":54,"display_name":"akhil_mittal"},"score":0,"creation_date":1538976201,"post_id":3700971,"comment_id":92317989,"body_markdown":"Java 9 - https://stackoverflow.com/a/47817350/1216775","body":"Java 9 - <a href=\"https://stackoverflow.com/a/47817350/1216775\">stackoverflow.com/a/47817350/1216775</a>"},{"owner":{"account_id":7597490,"reputation":425,"user_id":5763245,"display_name":"Aaron Mansheim"},"score":0,"creation_date":1567525076,"post_id":3700971,"comment_id":101984908,"body_markdown":"Here&#39;s an alternative that doesn&#39;t make a real array. I don&#39;t know whether it would ever be the best choice in practice. But it&#39;s certainly possible: You could make int data immutable by packing it into a String. Java 9 or later will store String data as one byte per character if no characters have a code point greater than 0xFF. It is efficient in time and space to pack each int into four single-byte characters. Simply choose whether to use little-endian or big-endian byte order. Previous to Java 9, you may have considered using Base16k.","body":"Here&#39;s an alternative that doesn&#39;t make a real array. I don&#39;t know whether it would ever be the best choice in practice. But it&#39;s certainly possible: You could make int data immutable by packing it into a String. Java 9 or later will store String data as one byte per character if no characters have a code point greater than 0xFF. It is efficient in time and space to pack each int into four single-byte characters. Simply choose whether to use little-endian or big-endian byte order. Previous to Java 9, you may have considered using Base16k."}],"answers":[{"tags":[],"owner":{"account_id":19061,"reputation":185736,"user_id":44330,"accept_rate":70,"display_name":"Jason S"},"down_vote_count":0,"up_vote_count":190,"is_accepted":true,"score":190,"last_activity_date":1284385532,"creation_date":1284385532,"answer_id":3700995,"question_id":3700971,"body_markdown":"Not with primitive arrays. You&#39;ll need to use a List or some other data structure:\r\n\r\n\r\n    List&lt;Integer&gt; items = Collections.unmodifiableList(Arrays.asList(0,1,2,3));","title":"Immutable array in Java","body":"<p>Not with primitive arrays. You'll need to use a List or some other data structure:</p>\n\n<pre><code>List&lt;Integer&gt; items = Collections.unmodifiableList(Arrays.asList(0,1,2,3));\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user439793"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1284385592,"creation_date":1284385592,"answer_id":3701007,"question_id":3700971,"body_markdown":"No, this is not possible. However, one could do something like this:\r\n\r\n    List&lt;Integer&gt; temp = new ArrayList&lt;Integer&gt;();\r\n    temp.add(Integer.valueOf(0));\r\n    temp.add(Integer.valueOf(2));\r\n    temp.add(Integer.valueOf(3));\r\n    temp.add(Integer.valueOf(4));\r\n    List&lt;Integer&gt; immutable = Collections.unmodifiableList(temp);\r\n\r\nThis requires using wrappers, and is a List, not an array, but is the closest you will get.\r\n\r\n","title":"Immutable array in Java","body":"<p>No, this is not possible. However, one could do something like this:</p>\n\n<pre><code>List&lt;Integer&gt; temp = new ArrayList&lt;Integer&gt;();\ntemp.add(Integer.valueOf(0));\ntemp.add(Integer.valueOf(2));\ntemp.add(Integer.valueOf(3));\ntemp.add(Integer.valueOf(4));\nList&lt;Integer&gt; immutable = Collections.unmodifiableList(temp);\n</code></pre>\n\n<p>This requires using wrappers, and is a List, not an array, but is the closest you will get.</p>\n"},{"tags":[],"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"down_vote_count":1,"up_vote_count":26,"is_accepted":false,"score":25,"last_activity_date":1284389709,"creation_date":1284386026,"answer_id":3701064,"question_id":3700971,"body_markdown":"As others have noted, you can&#39;t have immutable arrays in Java.\r\n\r\nIf you absolutely need a method that returns an array that doesn&#39;t influence the original array, then you&#39;d need to clone the array each time:\r\n\r\n    public int[] getFooArray() {\r\n      return fooArray == null ? null : fooArray.clone();\r\n    }\r\n\r\nObviously this is rather expensive (as you&#39;ll create a full copy each time you call the getter), but if you can&#39;t change the interface (to use a `List` for example) and can&#39;t risk the client changing your internals, then it may be necessary.\r\n\r\nThis technique is called making a defensive copy.","title":"Immutable array in Java","body":"<p>As others have noted, you can't have immutable arrays in Java.</p>\n\n<p>If you absolutely need a method that returns an array that doesn't influence the original array, then you'd need to clone the array each time:</p>\n\n<pre><code>public int[] getFooArray() {\n  return fooArray == null ? null : fooArray.clone();\n}\n</code></pre>\n\n<p>Obviously this is rather expensive (as you'll create a full copy each time you call the getter), but if you can't change the interface (to use a <code>List</code> for example) and can't risk the client changing your internals, then it may be necessary.</p>\n\n<p>This technique is called making a defensive copy.</p>\n"},{"tags":[],"owner":{"account_id":7848,"reputation":108920,"user_id":13792,"accept_rate":100,"display_name":"ColinD"},"down_vote_count":1,"up_vote_count":81,"is_accepted":false,"score":80,"last_activity_date":1476774471,"creation_date":1284388043,"answer_id":3701326,"question_id":3700971,"body_markdown":"My recommendation is to not use an array or an `unmodifiableList` but to use [Guava][1]&#39;s [ImmutableList][2], which exists for this purpose.\r\n\r\n    ImmutableList&lt;Integer&gt; values = ImmutableList.of(0, 1, 2, 3);\r\n\r\n\r\n  [1]: https://github.com/google/guava\r\n  [2]: https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/ImmutableList.html","title":"Immutable array in Java","body":"<p>My recommendation is to not use an array or an <code>unmodifiableList</code> but to use <a href=\"https://github.com/google/guava\" rel=\"noreferrer\">Guava</a>'s <a href=\"https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/ImmutableList.html\" rel=\"noreferrer\">ImmutableList</a>, which exists for this purpose.</p>\n\n<pre><code>ImmutableList&lt;Integer&gt; values = ImmutableList.of(0, 1, 2, 3);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":161745,"reputation":49235,"user_id":382763,"accept_rate":92,"display_name":"Thomas Mueller"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1284389364,"creation_date":1284389364,"answer_id":3701523,"question_id":3700971,"body_markdown":"If you need (for performance reason or to save memory) native &#39;int&#39; instead of &#39;java.lang.Integer&#39;, then you would probably need to write your own wrapper class. There are various IntArray implementations on the net, but none (I found) was immutable: [Koders IntArray][1], [Lucene IntArray][2]. There are probably others.\r\n\r\n  [1]: http://www.koders.com/java/fid2B2A9FE40DD7B59D2E3D17D07D4E0E32270B9469.aspx?s=cdef%3Atree\r\n  [2]: http://code.google.com/p/lucene-ext/source/browse/trunk/src/com/kamikaze/docidset/utils/IntArray.java","title":"Immutable array in Java","body":"<p>If you need (for performance reason or to save memory) native 'int' instead of 'java.lang.Integer', then you would probably need to write your own wrapper class. There are various IntArray implementations on the net, but none (I found) was immutable: <a href=\"http://www.koders.com/java/fid2B2A9FE40DD7B59D2E3D17D07D4E0E32270B9469.aspx?s=cdef%3Atree\" rel=\"nofollow noreferrer\">Koders IntArray</a>, <a href=\"http://code.google.com/p/lucene-ext/source/browse/trunk/src/com/kamikaze/docidset/utils/IntArray.java\" rel=\"nofollow noreferrer\">Lucene IntArray</a>. There are probably others.</p>\n"},{"tags":[],"owner":{"account_id":641285,"reputation":30,"user_id":419872,"display_name":"Martin"},"down_vote_count":3,"up_vote_count":1,"is_accepted":false,"score":-2,"last_activity_date":1298024698,"creation_date":1298024698,"answer_id":5040129,"question_id":3700971,"body_markdown":"Well.. arrays are useful to pass as constants (if they were) as variants parameters.","title":"Immutable array in Java","body":"<p>Well.. arrays are useful to pass as constants (if they were) as variants parameters.</p>\n"},{"tags":[],"owner":{"account_id":54976,"reputation":14415,"user_id":164553,"accept_rate":100,"display_name":"Brigham"},"down_vote_count":1,"up_vote_count":16,"is_accepted":false,"score":15,"last_activity_date":1344977495,"creation_date":1344977495,"answer_id":11960538,"question_id":3700971,"body_markdown":"There is one way to make an immutable array in Java:\r\n\r\n    final String[] IMMUTABLE = new String[0];\r\n\r\nArrays with 0 elements (obviously) cannot be mutated.\r\n\r\nThis can actually come in handy if you are using the `List.toArray` method to convert a `List` to an array. Since even an empty array takes up some memory, you can save that memory allocation by creating a constant empty array, and always passing it to the `toArray` method. That method will allocate a new array if the array you pass doesn&#39;t have enough space, but if it does (the list is empty), it will return the array you passed, allowing you to reuse that array any time you call `toArray` on an empty `List`.\r\n\r\n    final static String[] EMPTY_STRING_ARRAY = new String[0];\r\n\r\n    List&lt;String&gt; emptyList = new ArrayList&lt;String&gt;();\r\n    return emptyList.toArray(EMPTY_STRING_ARRAY); // returns EMPTY_STRING_ARRAY\r\n","title":"Immutable array in Java","body":"<p>There is one way to make an immutable array in Java:</p>\n\n<pre><code>final String[] IMMUTABLE = new String[0];\n</code></pre>\n\n<p>Arrays with 0 elements (obviously) cannot be mutated.</p>\n\n<p>This can actually come in handy if you are using the <code>List.toArray</code> method to convert a <code>List</code> to an array. Since even an empty array takes up some memory, you can save that memory allocation by creating a constant empty array, and always passing it to the <code>toArray</code> method. That method will allocate a new array if the array you pass doesn't have enough space, but if it does (the list is empty), it will return the array you passed, allowing you to reuse that array any time you call <code>toArray</code> on an empty <code>List</code>.</p>\n\n<pre><code>final static String[] EMPTY_STRING_ARRAY = new String[0];\n\nList&lt;String&gt; emptyList = new ArrayList&lt;String&gt;();\nreturn emptyList.toArray(EMPTY_STRING_ARRAY); // returns EMPTY_STRING_ARRAY\n</code></pre>\n"},{"tags":[],"owner":{"account_id":128781,"reputation":2200,"user_id":326874,"display_name":"&#230;-ra-code"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1511545131,"creation_date":1368539564,"answer_id":16545097,"question_id":3700971,"body_markdown":"Another one answer\r\n\r\n\tstatic class ImmutableArray&lt;T&gt; {\r\n\t\tprivate final T[] array;\r\n\t\t\r\n\t\tprivate ImmutableArray(T[] a){\r\n\t\t\tarray = Arrays.copyOf(a, a.length);\r\n\t\t}\r\n\t\t\r\n\t\tpublic static &lt;T&gt; ImmutableArray&lt;T&gt; from(T[] a){\r\n\t\t\treturn new ImmutableArray&lt;T&gt;(a);\r\n\t\t}\r\n\t\t\r\n\t\tpublic T get(int index){\r\n\t\t\treturn array[index];\r\n\t\t}\r\n\t}\r\n\t\r\n\t{\r\n\t\tfinal ImmutableArray&lt;String&gt; sample = ImmutableArray.from(new String[]{&quot;a&quot;, &quot;b&quot;, &quot;c&quot;});\r\n\t}","title":"Immutable array in Java","body":"<p>Another one answer</p>\n\n<pre><code>static class ImmutableArray&lt;T&gt; {\n    private final T[] array;\n\n    private ImmutableArray(T[] a){\n        array = Arrays.copyOf(a, a.length);\n    }\n\n    public static &lt;T&gt; ImmutableArray&lt;T&gt; from(T[] a){\n        return new ImmutableArray&lt;T&gt;(a);\n    }\n\n    public T get(int index){\n        return array[index];\n    }\n}\n\n{\n    final ImmutableArray&lt;String&gt; sample = ImmutableArray.from(new String[]{\"a\", \"b\", \"c\"});\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":94193,"reputation":20589,"user_id":257299,"accept_rate":64,"display_name":"kevinarpe"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1374777484,"creation_date":1373978971,"answer_id":17676959,"question_id":3700971,"body_markdown":"In some situations, it will be lighter weight to use this static method from Google Guava library: `List&lt;Integer&gt; Ints.asList(int... backingArray)`\r\n\r\nExamples:\r\n\r\n  * `List&lt;Integer&gt; x1 = Ints.asList(0, 1, 2, 3)`\r\n  * `List&lt;Integer&gt; x1 = Ints.asList(new int[] { 0, 1, 2, 3})`","title":"Immutable array in Java","body":"<p>In some situations, it will be lighter weight to use this static method from Google Guava library: <code>List&lt;Integer&gt; Ints.asList(int... backingArray)</code></p>\n\n<p>Examples:</p>\n\n<ul>\n<li><code>List&lt;Integer&gt; x1 = Ints.asList(0, 1, 2, 3)</code></li>\n<li><code>List&lt;Integer&gt; x1 = Ints.asList(new int[] { 0, 1, 2, 3})</code></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1517424,"reputation":8052,"user_id":1418097,"accept_rate":83,"display_name":"Display Name"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1374777672,"creation_date":1374777672,"answer_id":17866213,"question_id":3700971,"body_markdown":"If you want to avoid both mutability and boxing, there is no way out of the box. But you can create a class which holds primitive array inside and provides read-only access to elements via method(s).","title":"Immutable array in Java","body":"<p>If you want to avoid both mutability and boxing, there is no way out of the box. But you can create a class which holds primitive array inside and provides read-only access to elements via method(s).</p>\n"},{"tags":[],"owner":{"account_id":2211201,"reputation":384,"user_id":1953000,"display_name":"miguelt"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1406035857,"creation_date":1406035857,"answer_id":24888764,"question_id":3700971,"body_markdown":"While it&#39;s true that `Collections.unmodifiableList()` works, sometimes you may have a large library having methods already defined to return arrays (e.g. `String[]`).\r\nTo prevent breaking them, you can actually define auxiliary arrays that will store the values:\r\n\r\n    public class Test {\r\n        private final String[] original;\r\n        private final String[] auxiliary;\r\n        /** constructor */\r\n        public Test(String[] _values) {\r\n            original = new String[_values.length];\r\n            // Pre-allocated array.\r\n            auxiliary = new String[_values.length];\r\n            System.arraycopy(_values, 0, original, 0, _values.length);\r\n        }\r\n        /** Get array values. */\r\n        public String[] getValues() {\r\n            // No need to call clone() - we pre-allocated auxiliary.\r\n            System.arraycopy(original, 0, auxiliary, 0, original.length);\r\n            return auxiliary;\r\n        }\r\n    }\r\nTo test:\r\n\r\n        Test test = new Test(new String[]{&quot;a&quot;, &quot;b&quot;, &quot;C&quot;});\r\n        System.out.println(Arrays.asList(test.getValues()));\r\n        String[] values = test.getValues();\r\n        values[0] = &quot;foobar&quot;;\r\n        // At this point, &quot;foobar&quot; exist in &quot;auxiliary&quot; but since we are \r\n        // copying &quot;original&quot; to &quot;auxiliary&quot; for each call, the next line\r\n        // will print the original values &quot;a&quot;, &quot;b&quot;, &quot;c&quot;.\r\n        System.out.println(Arrays.asList(test.getValues()));\r\n\r\nNot perfect, but at least you have &quot;pseudo immutable arrays&quot; (from the class perspective) and this will not break related code.","title":"Immutable array in Java","body":"<p>While it's true that <code>Collections.unmodifiableList()</code> works, sometimes you may have a large library having methods already defined to return arrays (e.g. <code>String[]</code>).\nTo prevent breaking them, you can actually define auxiliary arrays that will store the values:</p>\n\n<pre><code>public class Test {\n    private final String[] original;\n    private final String[] auxiliary;\n    /** constructor */\n    public Test(String[] _values) {\n        original = new String[_values.length];\n        // Pre-allocated array.\n        auxiliary = new String[_values.length];\n        System.arraycopy(_values, 0, original, 0, _values.length);\n    }\n    /** Get array values. */\n    public String[] getValues() {\n        // No need to call clone() - we pre-allocated auxiliary.\n        System.arraycopy(original, 0, auxiliary, 0, original.length);\n        return auxiliary;\n    }\n}\n</code></pre>\n\n<p>To test:</p>\n\n<pre><code>    Test test = new Test(new String[]{\"a\", \"b\", \"C\"});\n    System.out.println(Arrays.asList(test.getValues()));\n    String[] values = test.getValues();\n    values[0] = \"foobar\";\n    // At this point, \"foobar\" exist in \"auxiliary\" but since we are \n    // copying \"original\" to \"auxiliary\" for each call, the next line\n    // will print the original values \"a\", \"b\", \"c\".\n    System.out.println(Arrays.asList(test.getValues()));\n</code></pre>\n\n<p>Not perfect, but at least you have \"pseudo immutable arrays\" (from the class perspective) and this will not break related code.</p>\n"},{"tags":[],"owner":{"account_id":1413237,"reputation":17260,"user_id":1339429,"accept_rate":89,"display_name":"JeanValjean"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1502463297,"creation_date":1495612833,"answer_id":44152406,"question_id":3700971,"body_markdown":"Since Guava 22, from package `com.google.common.primitives` you can use three new classes, which have a lower memory footprint compared to `ImmutableList`.\r\n\r\n - [ImmutableIntArray][1] \r\n - [ImmutableLongArray][2] \r\n - [ImmutableDoubleArray][3]\r\n\r\nThey also have a builder. Example:\r\n\r\n    int size = 2;\r\n    ImmutableLongArray longArray = ImmutableLongArray.builder(size)\r\n      .add(1L)\r\n      .add(2L)\r\n      .build();\r\n\r\nor, if the size is known at compile-time:\r\n\r\n    ImmutableLongArray longArray = ImmutableLongArray.of(1L, 2L);\r\n\r\nThis is another way of getting an immutable view of an array for Java primitives.\r\n\r\n  [1]: http://google.github.io/guava/releases/22.0/api/docs/com/google/common/primitives/ImmutableIntArray.html\r\n  [2]: http://google.github.io/guava/releases/22.0/api/docs/com/google/common/primitives/ImmutableLongArray.html\r\n  [3]: http://google.github.io/guava/releases/22.0/api/docs/com/google/common/primitives/ImmutableDoubleArray.html\r\n","title":"Immutable array in Java","body":"<p>Since Guava 22, from package <code>com.google.common.primitives</code> you can use three new classes, which have a lower memory footprint compared to <code>ImmutableList</code>.</p>\n\n<ul>\n<li><a href=\"http://google.github.io/guava/releases/22.0/api/docs/com/google/common/primitives/ImmutableIntArray.html\" rel=\"nofollow noreferrer\">ImmutableIntArray</a> </li>\n<li><a href=\"http://google.github.io/guava/releases/22.0/api/docs/com/google/common/primitives/ImmutableLongArray.html\" rel=\"nofollow noreferrer\">ImmutableLongArray</a> </li>\n<li><a href=\"http://google.github.io/guava/releases/22.0/api/docs/com/google/common/primitives/ImmutableDoubleArray.html\" rel=\"nofollow noreferrer\">ImmutableDoubleArray</a></li>\n</ul>\n\n<p>They also have a builder. Example:</p>\n\n<pre><code>int size = 2;\nImmutableLongArray longArray = ImmutableLongArray.builder(size)\n  .add(1L)\n  .add(2L)\n  .build();\n</code></pre>\n\n<p>or, if the size is known at compile-time:</p>\n\n<pre><code>ImmutableLongArray longArray = ImmutableLongArray.of(1L, 2L);\n</code></pre>\n\n<p>This is another way of getting an immutable view of an array for Java primitives.</p>\n"},{"tags":[],"owner":{"account_id":465074,"reputation":12318,"user_id":868941,"accept_rate":75,"display_name":"rmuller"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1508909558,"creation_date":1508909558,"answer_id":46924642,"question_id":3700971,"body_markdown":"As of Java 9 you can use `List.of(...)`, [JavaDoc](https://docs.oracle.com/javase/9/docs/api/java/util/List.html#of-E...-).\r\n\r\nThis method returns an immutable `List` and is very efficient.","title":"Immutable array in Java","body":"<p>As of Java 9 you can use <code>List.of(...)</code>, <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/List.html#of-E...-\" rel=\"noreferrer\">JavaDoc</a>.</p>\n\n<p>This method returns an immutable <code>List</code> and is very efficient.</p>\n"},{"tags":[],"owner":{"account_id":1257650,"reputation":23479,"user_id":1216775,"accept_rate":54,"display_name":"akhil_mittal"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1513266676,"creation_date":1513266676,"answer_id":47817350,"question_id":3700971,"body_markdown":"The [of(E... elements)][1] method in **Java9** can be used to create immutable list using just a line:\r\n \r\n\r\n    List&lt;Integer&gt; items = List.of(1,2,3,4,5);\r\n\r\nThe above method returns an immutable list containing an arbitrary number of elements. And adding any integer to this list would result in `java.lang.UnsupportedOperationException`exception. This method also accepts a single array as an argument.\r\n\r\n    String[] array = ... ;\r\n    List&lt;String[]&gt; list = List.&lt;String[]&gt;of(array);\r\n\r\n  [1]: https://docs.oracle.com/javase/9/docs/api/java/util/List.html#of-E...-\r\n","title":"Immutable array in Java","body":"<p>The <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/List.html#of-E...-\" rel=\"nofollow noreferrer\">of(E... elements)</a> method in <strong>Java9</strong> can be used to create immutable list using just a line:</p>\n\n<pre><code>List&lt;Integer&gt; items = List.of(1,2,3,4,5);\n</code></pre>\n\n<p>The above method returns an immutable list containing an arbitrary number of elements. And adding any integer to this list would result in <code>java.lang.UnsupportedOperationException</code>exception. This method also accepts a single array as an argument.</p>\n\n<pre><code>String[] array = ... ;\nList&lt;String[]&gt; list = List.&lt;String[]&gt;of(array);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5789509,"reputation":741,"user_id":4567552,"display_name":"John"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634410218,"creation_date":1634402596,"answer_id":69597612,"question_id":3700971,"body_markdown":" Implement `java.util.function.IntUnaryOperator`:  \r\n\r\n    class ImmutableArray implements IntUnaryOperator {\r\n      private final int[] array;\r\n      ImmutableArray(int[] array) {\r\n         this.array = Arrays.copyOf(array, array.length);\r\n      }\r\n      @Override\r\n        public int applyAsInt(int index) {\r\n        return array[index];\r\n      }\r\n    }\r\n\r\nAccess the array: `array[i]` becomes `immutableArray.applyAsInt(i)`.\r\n\r\n* I benchmarked primitive for loop retrieval with a modulus operation with 100_000_000 elements.  The above `PrimitiveArray` took ~220ms; there was no significant difference with a primitive array.  The same op on `ArrayList` took 480 ms, and the loading process took 21 seconds, depleted my heap space first try, and I had to increase this setting on the JVM. Loading of PrimitiveArray had taken 2 seconds.\r\n\r\n**iteration**\r\n* if you want to iterate, implement `Iterable` and provide\r\n \r\n    `public java.util.PrimitiveIterator.OfInt iterator() { return Arrays.stream(array).iterator(); \r\n     }`\r\n\r\n  This provides access to `int nextInt` method.\r\n* From `PrimitiveIterator` you also get method `forEachRemaining(PrimitiveConsumer)` which is helpful to replace an existing enhanced for loop.\r\n\r\n* Iterating manually with `PrimitiveIterator.OfInt` yielded performance of ~300ms.\r\n\r\n\r\n\r\n","title":"Immutable array in Java","body":"<p>Implement <code>java.util.function.IntUnaryOperator</code>:</p>\n<pre><code>class ImmutableArray implements IntUnaryOperator {\n  private final int[] array;\n  ImmutableArray(int[] array) {\n     this.array = Arrays.copyOf(array, array.length);\n  }\n  @Override\n    public int applyAsInt(int index) {\n    return array[index];\n  }\n}\n</code></pre>\n<p>Access the array: <code>array[i]</code> becomes <code>immutableArray.applyAsInt(i)</code>.</p>\n<ul>\n<li>I benchmarked primitive for loop retrieval with a modulus operation with 100_000_000 elements.  The above <code>PrimitiveArray</code> took ~220ms; there was no significant difference with a primitive array.  The same op on <code>ArrayList</code> took 480 ms, and the loading process took 21 seconds, depleted my heap space first try, and I had to increase this setting on the JVM. Loading of PrimitiveArray had taken 2 seconds.</li>\n</ul>\n<p><strong>iteration</strong></p>\n<ul>\n<li><p>if you want to iterate, implement <code>Iterable</code> and provide</p>\n<p><code>public java.util.PrimitiveIterator.OfInt iterator() { return Arrays.stream(array).iterator();  }</code></p>\n<p>This provides access to <code>int nextInt</code> method.</p>\n</li>\n<li><p>From <code>PrimitiveIterator</code> you also get method <code>forEachRemaining(PrimitiveConsumer)</code> which is helpful to replace an existing enhanced for loop.</p>\n</li>\n<li><p>Iterating manually with <code>PrimitiveIterator.OfInt</code> yielded performance of ~300ms.</p>\n</li>\n</ul>\n"}],"owner":{"display_name":"ignoramus"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":130838,"favorite_count":0,"down_vote_count":0,"up_vote_count":176,"accepted_answer_id":3700995,"answer_count":15,"score":176,"last_activity_date":1634410218,"creation_date":1284385392,"question_id":3700971,"body_markdown":"Is there an immutable alternative to the primitive arrays in Java? Making a primitive array `final` doesn&#39;t actually prevent one from doing something like\r\n\r\n    final int[] array = new int[] {0, 1, 2, 3};\r\n    array[0] = 42;\r\n\r\nI want the elements of the array to be unchangeable.","title":"Immutable array in Java","body":"<p>Is there an immutable alternative to the primitive arrays in Java? Making a primitive array <code>final</code> doesn't actually prevent one from doing something like</p>\n\n<pre><code>final int[] array = new int[] {0, 1, 2, 3};\narray[0] = 42;\n</code></pre>\n\n<p>I want the elements of the array to be unchangeable.</p>\n"},{"tags":["java","jpa"],"comments":[{"owner":{"account_id":3792503,"reputation":3340,"user_id":3148590,"accept_rate":95,"display_name":"Kaustubh Khare"},"score":0,"creation_date":1521114081,"post_id":49298433,"comment_id":85598768,"body_markdown":"Possible duplicate of [java.lang.IllegalArgumentException: Removing a detached instance com.test.User#5](https://stackoverflow.com/questions/17027398/java-lang-illegalargumentexception-removing-a-detached-instance-com-test-user5)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/17027398/java-lang-illegalargumentexception-removing-a-detached-instance-com-test-user5\">java.lang.IllegalArgumentException: Removing a detached instance com.test.User#5</a>"}],"answers":[{"tags":[],"owner":{"account_id":2042066,"reputation":2730,"user_id":1822974,"accept_rate":55,"display_name":"JPS"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1521856015,"creation_date":1521114340,"answer_id":49298627,"question_id":49298433,"body_markdown":"@ why is it working now, \r\n`EntityManager` works only with `ManagedEntities`. When you try to remove an entity which is detached already, you will get an exception. \r\n\r\nSo to make a safe remove, you have to check first the entity is in managed state or not. that is achieved by `em.contains` method. \r\n\r\nAnd if that entity is not in the managed state yet, we need to manually move that to managed state. This can be achieved by using, [merge](https://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html#merge(T)). \r\n\r\n`Merge` basically moves that entity to the managed state. \r\n\r\n**[Edit]**\r\n\r\nI can see in your code that you&#39;ve retrieved the entity using **em.find** which would give you an managed entity. But you&#39;ve not stored that value to anything and used the method&#39;s input parameter which is not managed by **em**. Try the following code,\r\n\r\n    `public void deleteStudentsPersistence(Student student) {\r\n        Student managedEntity = em.find(Student.class, student.getId());\r\n        em.remove(managedEntity);\r\n       // em.remove(em.contains(student) ? student : \r\n       // em.merge(student));\r\n    }`\r\n\r\n","title":"What is the difference between em.remove(st) and em.remove(em.contains(st) ? st : em.merge(st));","body":"<p>@ why is it working now, \n<code>EntityManager</code> works only with <code>ManagedEntities</code>. When you try to remove an entity which is detached already, you will get an exception. </p>\n\n<p>So to make a safe remove, you have to check first the entity is in managed state or not. that is achieved by <code>em.contains</code> method. </p>\n\n<p>And if that entity is not in the managed state yet, we need to manually move that to managed state. This can be achieved by using, <a href=\"https://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html#merge(T)\" rel=\"nofollow noreferrer\">merge</a>. </p>\n\n<p><code>Merge</code> basically moves that entity to the managed state. </p>\n\n<p><strong>[Edit]</strong></p>\n\n<p>I can see in your code that you've retrieved the entity using <strong>em.find</strong> which would give you an managed entity. But you've not stored that value to anything and used the method's input parameter which is not managed by <strong>em</strong>. Try the following code,</p>\n\n<pre><code>`public void deleteStudentsPersistence(Student student) {\n    Student managedEntity = em.find(Student.class, student.getId());\n    em.remove(managedEntity);\n   // em.remove(em.contains(student) ? student : \n   // em.merge(student));\n}`\n</code></pre>\n"}],"owner":{"display_name":"user6941415"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":359,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":49298627,"answer_count":1,"score":2,"last_activity_date":1634410143,"creation_date":1521113815,"question_id":49298433,"body_markdown":"I was getting this error:\r\n\r\n    java.lang.IllegalArgumentException: Removing a detached instance model.student\r\n\r\nThen I search for it in stackoverflow and I found this solution:\r\n\r\ninstead of:\r\n\r\n    em.remove(student); \r\n\r\nI am using now:\r\n\r\n    em.remove(em.contains(student) ? student : em.merge(student));\r\n\r\nBut I really didn&#39;t get why is it working now. \r\n\r\nCan someone tell me the diffrence between this methods?","title":"What is the difference between em.remove(st) and em.remove(em.contains(st) ? st : em.merge(st));","body":"<p>I was getting this error:</p>\n\n<pre><code>java.lang.IllegalArgumentException: Removing a detached instance model.student\n</code></pre>\n\n<p>Then I search for it in stackoverflow and I found this solution:</p>\n\n<p>instead of:</p>\n\n<pre><code>em.remove(student); \n</code></pre>\n\n<p>I am using now:</p>\n\n<pre><code>em.remove(em.contains(student) ? student : em.merge(student));\n</code></pre>\n\n<p>But I really didn't get why is it working now. </p>\n\n<p>Can someone tell me the diffrence between this methods?</p>\n"},{"tags":["java","ruby","operational-transform"],"comments":[{"owner":{"account_id":8529,"reputation":35006,"user_id":15441,"accept_rate":92,"display_name":"hawkeye"},"score":0,"creation_date":1318975149,"post_id":4184286,"comment_id":9522789,"body_markdown":"Google wave libaries here: http://stackoverflow.com/questions/2043165/operational-transformation-library/2043367#2043367","body":"Google wave libaries here: <a href=\"http://stackoverflow.com/questions/2043165/operational-transformation-library/2043367#2043367\" title=\"operational transformation library\">stackoverflow.com/questions/2043165/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":8529,"reputation":35006,"user_id":15441,"accept_rate":92,"display_name":"hawkeye"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1318975259,"creation_date":1318975259,"answer_id":7814272,"question_id":4184286,"body_markdown":"Consider Py-infinote.\r\n\r\npy-infinote is a python port of JInfinote, offering a collaborative text-editing protocol(adOPTed) which can be used to write multi-user collaborative text editors. Py-infinote is used in the HWIOS project.\r\n\r\n[https://github.com/sveith/jinfinote][1]\r\n\r\n\r\n  [1]: https://github.com/sveith/jinfinote","title":"Operational Transform Implementation (not javascript)","body":"<p>Consider Py-infinote.</p>\n\n<p>py-infinote is a python port of JInfinote, offering a collaborative text-editing protocol(adOPTed) which can be used to write multi-user collaborative text editors. Py-infinote is used in the HWIOS project.</p>\n\n<p><a href=\"https://github.com/sveith/jinfinote\" rel=\"nofollow\">https://github.com/sveith/jinfinote</a></p>\n"},{"tags":[],"owner":{"account_id":8529,"reputation":35006,"user_id":15441,"accept_rate":92,"display_name":"hawkeye"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1318975427,"creation_date":1318975427,"answer_id":7814294,"question_id":4184286,"body_markdown":"Consider Google-Diff-Match-Patch - Diff, Match and Patch libraries for Plain Text: \r\n\r\n&quot;The Diff Match and Patch libraries offer robust algorithms to perform the operations required for synchronizing plain text.&quot;\r\n\r\nDiff: Compare two blocks of plain text and efficiently return a list of differences.\r\n\r\nDiff Demo\r\nMatch: Given a search string, find its best fuzzy match in a block of plain text. Weighted for both accuracy and location.\r\n\r\nMatch Demo\r\nPatch: Apply a list of patches onto plain text. Use best-effort to apply patch even when the underlying text doesn&#39;t match.\r\n\r\nPatch Demo\r\nCurrently available in Java, JavaScript, C++, C#, Objective C, Lua and Python. Regardless of language, each library features the same API and the same functionality. All versions also have comprehensive test harnesses.\r\n\r\nYou can find it [here][1].\r\n\r\n\r\n  [1]: http://google-diff-match-patch.googlecode.com/","title":"Operational Transform Implementation (not javascript)","body":"<p>Consider Google-Diff-Match-Patch - Diff, Match and Patch libraries for Plain Text: </p>\n\n<p>\"The Diff Match and Patch libraries offer robust algorithms to perform the operations required for synchronizing plain text.\"</p>\n\n<p>Diff: Compare two blocks of plain text and efficiently return a list of differences.</p>\n\n<p>Diff Demo\nMatch: Given a search string, find its best fuzzy match in a block of plain text. Weighted for both accuracy and location.</p>\n\n<p>Match Demo\nPatch: Apply a list of patches onto plain text. Use best-effort to apply patch even when the underlying text doesn't match.</p>\n\n<p>Patch Demo\nCurrently available in Java, JavaScript, C++, C#, Objective C, Lua and Python. Regardless of language, each library features the same API and the same functionality. All versions also have comprehensive test harnesses.</p>\n\n<p>You can find it <a href=\"http://google-diff-match-patch.googlecode.com/\" rel=\"nofollow\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":8529,"reputation":35006,"user_id":15441,"accept_rate":92,"display_name":"hawkeye"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1321264692,"creation_date":1321264692,"answer_id":8119862,"question_id":4184286,"body_markdown":"This is another quite interesting implementation integrating google wave&#39;s operational transform with jedit:\r\n\r\nhttps://github.com/djspiewak/cccp\r\n\r\n","title":"Operational Transform Implementation (not javascript)","body":"<p>This is another quite interesting implementation integrating google wave's operational transform with jedit:</p>\n\n<p><a href=\"https://github.com/djspiewak/cccp\" rel=\"nofollow\">https://github.com/djspiewak/cccp</a></p>\n"},{"tags":[],"owner":{"account_id":4934629,"reputation":618,"user_id":3973196,"display_name":"dmonad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1414276017,"creation_date":1414276017,"answer_id":26567907,"question_id":4184286,"body_markdown":"OpenCoweb is a popular OT implementation. There are several server implementations written in different languages.","title":"Operational Transform Implementation (not javascript)","body":"<p>OpenCoweb is a popular OT implementation. There are several server implementations written in different languages.</p>\n"},{"tags":[],"owner":{"account_id":908232,"reputation":2175,"user_id":942689,"accept_rate":75,"display_name":"Stanislav Levental"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1458624662,"creation_date":1458624662,"answer_id":36146811,"question_id":4184286,"body_markdown":"Simple reference implementation which I will be improving next few months by adding more complex stuff;\r\n\r\nNow it has: \r\n\r\n - simple text operations; retain, insert, delete and their transformations against each other \r\n - annotations over text and transformations\r\n - generation of changes and applying them to text\r\n \r\n[https://github.com/slevental/operational-transformation][1]\r\n\r\n\r\n  [1]: https://github.com/slevental/operational-transformation","title":"Operational Transform Implementation (not javascript)","body":"<p>Simple reference implementation which I will be improving next few months by adding more complex stuff;</p>\n\n<p>Now it has: </p>\n\n<ul>\n<li>simple text operations; retain, insert, delete and their transformations against each other </li>\n<li>annotations over text and transformations</li>\n<li>generation of changes and applying them to text</li>\n</ul>\n\n<p><a href=\"https://github.com/slevental/operational-transformation\" rel=\"nofollow\">https://github.com/slevental/operational-transformation</a></p>\n"}],"owner":{"account_id":8529,"reputation":35006,"user_id":15441,"accept_rate":92,"display_name":"hawkeye"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3247,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"closed_date":1473943926,"accepted_answer_id":7814294,"answer_count":5,"score":5,"last_activity_date":1634409893,"creation_date":1289823974,"question_id":4184286,"body_markdown":"I&#39;m looking to implement multi-user &lt;a href=&quot;http://en.wikipedia.org/wiki/Operational_transformation&quot;&gt;operational transform&lt;/a&gt; just for plain-text based changes on the server-side on a web-site. \r\n\r\nIs there a non-javascript implementation that you can recommend?","title":"Operational Transform Implementation (not javascript)","body":"<p>I'm looking to implement multi-user <a href=\"http://en.wikipedia.org/wiki/Operational_transformation\">operational transform</a> just for plain-text based changes on the server-side on a web-site. </p>\n\n<p>Is there a non-javascript implementation that you can recommend?</p>\n"},{"tags":["java","linux","operating-system"],"comments":[{"owner":{"account_id":22425724,"reputation":1060,"user_id":16632363,"display_name":"user16632363"},"score":0,"creation_date":1634409981,"post_id":69598503,"comment_id":123018900,"body_markdown":"Open the file, overwrite it, close it, and delete it.","body":"Open the file, overwrite it, close it, and delete it."},{"owner":{"account_id":23053477,"reputation":1,"user_id":17169904,"display_name":"YousefElsayed"},"score":0,"creation_date":1634412094,"post_id":69598503,"comment_id":123019334,"body_markdown":"It is that easy ? As i searched there are different algorithms to delete files ... if it is that easy then what the algorithm does ? for example : DoD 5220.22-M","body":"It is that easy ? As i searched there are different algorithms to delete files ... if it is that easy then what the algorithm does ? for example : DoD 5220.22-M"},{"owner":{"account_id":2667845,"reputation":10491,"user_id":2305826,"accept_rate":89,"display_name":"MarsAtomic"},"score":0,"creation_date":1634413121,"post_id":69598503,"comment_id":123019563,"body_markdown":"You already know that Linux and Linux utilities like Shred are open source, yes? That means that the code is freely available on the web. What if you did a search? Maybe you&#39;d find stuff like [this](https://github.com/wertarbyte/coreutils/blob/master/src/shred.c), which would answer all of your questions. Avoid posting to Stack Overflow until you&#39;ve properly researched first. It&#39;s poor form to ask people to do things for you that you can do yourself.","body":"You already know that Linux and Linux utilities like Shred are open source, yes? That means that the code is freely available on the web. What if you did a search? Maybe you&#39;d find stuff like <a href=\"https://github.com/wertarbyte/coreutils/blob/master/src/shred.c\" rel=\"nofollow noreferrer\">this</a>, which would answer all of your questions. Avoid posting to Stack Overflow until you&#39;ve properly researched first. It&#39;s poor form to ask people to do things for you that you can do yourself."},{"owner":{"account_id":22425724,"reputation":1060,"user_id":16632363,"display_name":"user16632363"},"score":1,"creation_date":1634413271,"post_id":69598503,"comment_id":123019593,"body_markdown":"The need for cryptographic overwrite is nonsense, with the possible exception of your adversary having millions of dollars to spend recovering your data.  A disk that returns something other than &quot;the exact data last written&quot; is technically described as &quot;broken&quot;.","body":"The need for cryptographic overwrite is nonsense, with the possible exception of your adversary having millions of dollars to spend recovering your data.  A disk that returns something other than &quot;the exact data last written&quot; is technically described as &quot;broken&quot;."},{"owner":{"account_id":22425724,"reputation":1060,"user_id":16632363,"display_name":"user16632363"},"score":0,"creation_date":1634413669,"post_id":69598503,"comment_id":123019684,"body_markdown":"On the other hand, if you want to overwrite the file three times, with random data, then it&#39;s easy enough to repeat &quot;open; overwrite; close&quot; three times.","body":"On the other hand, if you want to overwrite the file three times, with random data, then it&#39;s easy enough to repeat &quot;open; overwrite; close&quot; three times."},{"owner":{"account_id":22425724,"reputation":1060,"user_id":16632363,"display_name":"user16632363"},"score":0,"creation_date":1634414048,"post_id":69598503,"comment_id":123019764,"body_markdown":"Source for shred - https://github.com/coreutils/coreutils/blob/master/src/shred.c","body":"Source for shred - <a href=\"https://github.com/coreutils/coreutils/blob/master/src/shred.c\" rel=\"nofollow noreferrer\">github.com/coreutils/coreutils/blob/master/src/shred.c</a>"},{"owner":{"account_id":23053477,"reputation":1,"user_id":17169904,"display_name":"YousefElsayed"},"score":0,"creation_date":1634418866,"post_id":69598503,"comment_id":123020837,"body_markdown":"Thanks guys and sorry for not being able to find the source code of shred","body":"Thanks guys and sorry for not being able to find the source code of shred"}],"owner":{"account_id":23053477,"reputation":1,"user_id":17169904,"display_name":"YousefElsayed"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1634409089,"creation_date":1634409089,"question_id":69598503,"body_markdown":"In my knowledge when you delete a file the pointer of the file just get removed but the data of the file is still there ready to get overwrite and in Linux there is **Shred** that overwrite the file for 3 times by default\r\n\r\nMy question is how to write a code that does the same as shred but I don&#39;t know any keywords to use in my search and I never found source code of shred or any thing like it ","title":"Deleting data files in java","body":"<p>In my knowledge when you delete a file the pointer of the file just get removed but the data of the file is still there ready to get overwrite and in Linux there is <strong>Shred</strong> that overwrite the file for 3 times by default</p>\n<p>My question is how to write a code that does the same as shred but I don't know any keywords to use in my search and I never found source code of shred or any thing like it</p>\n"},{"tags":["java","firefox","selenium","selenium-webdriver"],"comments":[{"owner":{"account_id":1237195,"reputation":46596,"user_id":1200545,"display_name":"Justin Ko"},"score":0,"creation_date":1362778250,"post_id":15294630,"comment_id":21600189,"body_markdown":"You need to clarify what &quot;it does not work&quot; means. Is there an exception or what is the unexpected behaviour?","body":"You need to clarify what &quot;it does not work&quot; means. Is there an exception or what is the unexpected behaviour?"},{"owner":{"account_id":2444464,"reputation":661,"user_id":2132179,"display_name":"ovejaexiste"},"score":0,"creation_date":1363008227,"post_id":15294630,"comment_id":21664196,"body_markdown":"With &quot;it does not work&quot; I mean the expected behaviour of the button is not right, when it clicks on the botton, the drop down list should be open. Thank you.","body":"With &quot;it does not work&quot; I mean the expected behaviour of the button is not right, when it clicks on the botton, the drop down list should be open. Thank you."},{"owner":{"account_id":1117975,"reputation":1851,"user_id":1106874,"accept_rate":90,"display_name":"Anton Soradoi"},"score":0,"creation_date":1434490689,"post_id":15294630,"comment_id":49798329,"body_markdown":"had similar issue with select2 dropdowns; &#39;click&#39; wouldn&#39;t work in firefox when trying to click the div - solved by clicking the anchor tag that is injected by select2","body":"had similar issue with select2 dropdowns; &#39;click&#39; wouldn&#39;t work in firefox when trying to click the div - solved by clicking the anchor tag that is injected by select2"}],"answers":[{"tags":[],"owner":{"account_id":1220673,"reputation":1426,"user_id":1187385,"accept_rate":53,"display_name":"Amit Shakya"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1362840687,"creation_date":1362840687,"answer_id":15312020,"question_id":15294630,"body_markdown":"I am not sure why are you using this Xpath, if you have freedom to change Xpath then record the element using selenium IDE and use `Xpath::position` from drop down list of `target`(it picks unique path relative to html header), it will solve problem of dynamic locator. And try below mentioned events.\r\n\r\n1- Use `clickAt`.\r\n\r\n2- Use `fireevent(focus)` and then click. Sometime it happens some element in back ground is getting loaded, when it gets loaded, focus move there hence elementNotVisible error.\r\n\r\n3- Use `mouseDownRight`.\r\n\r\n","title":"Selenium / Firefox: Command &quot;.click()&quot; doesn&#39;t work with a found element","body":"<p>I am not sure why are you using this Xpath, if you have freedom to change Xpath then record the element using selenium IDE and use <code>Xpath::position</code> from drop down list of <code>target</code>(it picks unique path relative to html header), it will solve problem of dynamic locator. And try below mentioned events.</p>\n\n<p>1- Use <code>clickAt</code>.</p>\n\n<p>2- Use <code>fireevent(focus)</code> and then click. Sometime it happens some element in back ground is getting loaded, when it gets loaded, focus move there hence elementNotVisible error.</p>\n\n<p>3- Use <code>mouseDownRight</code>.</p>\n"},{"tags":[],"owner":{"account_id":2444464,"reputation":661,"user_id":2132179,"display_name":"ovejaexiste"},"down_vote_count":0,"up_vote_count":24,"is_accepted":true,"score":24,"last_activity_date":1634408264,"creation_date":1363083343,"answer_id":15358454,"question_id":15294630,"body_markdown":"Finally I found an answer that works with Firefox as well as Google Chrome.\r\n\r\n\r\n\tWebElement we = this.driver.findElement(By.id(&quot;size-btn&quot;));\r\n\r\n\tJavascriptExecutor executor = (JavascriptExecutor) driver;\r\n\texecutor.executeScript(&quot;arguments[0].click();&quot;, we);\r\n\r\n\twaitForElementPresent(By.xpath(&quot;//div[@id=&#39;size-btn&#39; and contains(@class,&#39;opened&#39;)]/span&quot;));","title":"Selenium / Firefox: Command &quot;.click()&quot; doesn&#39;t work with a found element","body":"<p>Finally I found an answer that works with Firefox as well as Google Chrome.</p>\n<pre><code>WebElement we = this.driver.findElement(By.id(&quot;size-btn&quot;));\n\nJavascriptExecutor executor = (JavascriptExecutor) driver;\nexecutor.executeScript(&quot;arguments[0].click();&quot;, we);\n\nwaitForElementPresent(By.xpath(&quot;//div[@id='size-btn' and contains(@class,'opened')]/span&quot;));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1749294,"reputation":633,"user_id":1598771,"display_name":"jason zhang"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1379529605,"creation_date":1379529605,"answer_id":18879865,"question_id":15294630,"body_markdown":"I have the same problem in Firefox. The trick is to click the text inside of &lt;button&gt; not the button itself.","title":"Selenium / Firefox: Command &quot;.click()&quot; doesn&#39;t work with a found element","body":"<p>I have the same problem in Firefox. The trick is to click the text inside of  not the button itself.</p>\n"},{"tags":[],"owner":{"account_id":5254600,"reputation":737,"user_id":4197835,"display_name":"Aconic"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1506348760,"creation_date":1492874476,"answer_id":43560920,"question_id":15294630,"body_markdown":"You can try to use the Actions class from org.openqa.selenium.interactions:\r\n\r\n    WebElement element = driver.findElement(By.id(&quot;size-btn&quot;));\r\n    Actions builder = new Actions(driver);\r\n    \r\n    builder.moveToElement(element).click(element);\r\n    builder.perform();","title":"Selenium / Firefox: Command &quot;.click()&quot; doesn&#39;t work with a found element","body":"<p>You can try to use the Actions class from org.openqa.selenium.interactions:</p>\n\n<pre><code>WebElement element = driver.findElement(By.id(\"size-btn\"));\nActions builder = new Actions(driver);\n\nbuilder.moveToElement(element).click(element);\nbuilder.perform();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9969140,"reputation":11,"user_id":7375858,"display_name":"Ing. Antonio Gervasio Luelmo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1508003877,"creation_date":1508003877,"answer_id":46747678,"question_id":15294630,"body_markdown":"I have some solution, make a class with a robot put there TAB event keys, then call that class. What it does its like a back to focus to the page. For some razon the page lost focus and never find that botton.\r\n\r\n       Robot robot;\r\n\t\ttry {\r\n\t\t\trobot = new Robot();\r\n\t\t\trobot.keyPress(KeyEvent.VK_TAB);\r\n\t\t\trobot.keyRelease(KeyEvent.VK_TAB);\r\n\t\t\t\r\n\t\t} catch (AWTException e) {e.printStackTrace();}","title":"Selenium / Firefox: Command &quot;.click()&quot; doesn&#39;t work with a found element","body":"<p>I have some solution, make a class with a robot put there TAB event keys, then call that class. What it does its like a back to focus to the page. For some razon the page lost focus and never find that botton.</p>\n\n<pre><code>   Robot robot;\n    try {\n        robot = new Robot();\n        robot.keyPress(KeyEvent.VK_TAB);\n        robot.keyRelease(KeyEvent.VK_TAB);\n\n    } catch (AWTException e) {e.printStackTrace();}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17096000,"reputation":1,"user_id":12370976,"display_name":"Kanika Sud"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1588237463,"creation_date":1588237463,"answer_id":61519711,"question_id":15294630,"body_markdown":"    Actions actions = new Actions(driver);\r\n    actions.moveToElement(element);\r\n    actions.click(element);\r\n    Action action = actions.build();\r\n    action.perform();\r\n\r\nThis worked for me.","title":"Selenium / Firefox: Command &quot;.click()&quot; doesn&#39;t work with a found element","body":"<pre><code>Actions actions = new Actions(driver);\nactions.moveToElement(element);\nactions.click(element);\nAction action = actions.build();\naction.perform();\n</code></pre>\n\n<p>This worked for me.</p>\n"}],"owner":{"account_id":2444464,"reputation":661,"user_id":2132179,"display_name":"ovejaexiste"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23463,"favorite_count":0,"down_vote_count":0,"up_vote_count":20,"accepted_answer_id":15358454,"answer_count":6,"score":20,"last_activity_date":1634408264,"creation_date":1362747737,"question_id":15294630,"body_markdown":"I tried to find a solution to this thing and I spent a lot of time, but it is almost imposible to me to do that.\r\n\r\nThe matter: I am using Selenium with Java in Firefox. I need to find an element (a listbox) and click on it. So, the code finds the element, but click action does not work. It works fine in Google Chrome every time, and just sometimes in Firefox (with the same Java code sometimes works, and sometimes does not).\r\n\r\n**There is the part of code with the element when the program enters on the page:**\r\n\r\n \r\n        &lt;div id=&quot;size-btn&quot; class=&quot;size-btn&quot;&gt;\r\n          &lt;span class=&quot;selected-size&quot;&gt;SELECCIONA TALLA &lt;/span&gt;\r\n          &lt;div class=&quot;size-select&quot; style=&quot;display: none;&quot;&gt;\r\n            &lt;table&gt;\r\n              &lt;tbody&gt;\r\n                &lt;tr id=&quot;selecsize_2&quot; class=&quot;product-size&quot; data-ga-props=&quot;{action:&#39;Seleccionar_Producto&#39;, opt_label:&#39;Escoger_Talla&#39;}&quot; data-catentryid=&quot;1051607&quot;&gt;\r\n                &lt;tr id=&quot;selecsize_3&quot; class=&quot;product-size&quot; data-ga-props=&quot;{action:&#39;Seleccionar_Producto&#39;, opt_label:&#39;Escoger_Talla&#39;}&quot; data-catentryid=&quot;1051608&quot;&gt;\r\n                &lt;tr id=&quot;selecsize_4&quot; class=&quot;product-size&quot; data-ga-props=&quot;{action:&#39;Seleccionar_Producto&#39;, opt_label:&#39;Escoger_Talla&#39;}&quot; data-catentryid=&quot;1051609&quot;&gt;\r\n                &lt;tr id=&quot;selecsize_5&quot; class=&quot;product-size&quot; data-ga-props=&quot;{action:&#39;Seleccionar_Producto&#39;, opt_label:&#39;Escoger_Talla&#39;}&quot; data-catentryid=&quot;1051610&quot;&gt;\r\n              &lt;/tbody&gt;\r\n            &lt;/table&gt;\r\n          &lt;button class=&quot;size-guide gaViewEvent gaTrack&quot; data-ga-props=&quot;{action:&#39;Seleccionar_Talla&#39;, opt_label:&#39;Guia_de_tallas&#39;}&quot; data-href=&quot;http://www.anyweb.com/webapp/wcs/stores/servlet/ProductGuideSizeAjaxView?catalogId=24052&amp;categoryId=358056&amp;langId=-5&amp;productId=1047599&amp;storeId=10701&quot;&gt;Gu&#237;a de tallas&lt;/button&gt;\r\n          &lt;/div&gt;\r\n        &lt;/div&gt;\r\n\r\n**And there is the part of code that changes when the element is clicked:**\r\n\r\n \r\n        &lt;div id=&quot;size-btn&quot; class=&quot;size-btn opened&quot;&gt;\r\n\r\nI tried many solutions and sometimes it works, but the next time I run the program, it does not work again.\r\n\r\nSome solutions:\r\n\r\n1. It finds the element, but does not run click action. I checked with xpath and cssSelector, and there are unique elements found with those expressions.\r\n\r\n        driver.findElement(By.xpath(&quot;//div[@id=&#39;size-btn&#39; and not(contains(@class,&#39;opened&#39;))]/span&quot;)).click(); // Also checked with By.cssSelector(&quot;span.selected-size&quot;)\r\n\r\n2. I though it was because of the time, so I tried to solve it that way.\r\n\r\n\t\tWebElement we = driver.findElement(By.xpath(&quot;//div[@id=&#39;size-btn&#39; and not(contains(@class,&#39;opened&#39;))]/span&quot;)); // By.cssSelector(&quot;span.selected-size&quot;)\r\n\t\tThread.sleep(3000);\r\n\t    we.click();\r\n\r\n3. Finally, I was a little bit desperate, and I created a new function to try to do this almost 60 times, looking for the change on the element code and if there was any change, just tried to do click action again.\r\n\r\n        clickAndWaitWhileElementIsNotPresent(By.xpath(&quot;//div[@id=&#39;size-btn&#39; and not(contains(@class,&#39;opened&#39;))]/span&quot;),By.xpath(&quot;//div[@class=&#39;size-btn opened&#39;]/span&quot;)); // By.cssSelector(&quot;span.selected-size&quot;)\r\n       \r\n        private void clickAndWaitWhileElementIsNotPresent(By by1, By by2) throws Exception {\r\n        \tfor (int second = 0;; second++) {\r\n        \t\tif (second &gt;= 60)\r\n        \t\t\tfail(&quot;timeout&quot;);\r\n        \t\ttry {\r\n        \t\t\tif (isElementPresent(by2))\r\n        \t\t\t{\r\n        \t\t\t\tbreak;\r\n        \t\t\t}\r\n        \t\t\telse\r\n        \t\t\t{\r\n        \t\t\t\tdriver.findElement(by1).click();\r\n        \t\t\t}\r\n        \t\t} catch (Exception e) {\r\n        \t\t}\r\n        \t\tThread.sleep(1000);\r\n        \t}\r\n        }\r\n\r\nThere are the images of the element:\r\n\r\n![Element 1][1]\r\n![Element 2][2]\r\n\r\nDoes anybody know how to do that?\r\n\r\n  [1]: http://i.stack.imgur.com/eki2x.png\r\n  [2]: http://i.stack.imgur.com/U6781.png","title":"Selenium / Firefox: Command &quot;.click()&quot; doesn&#39;t work with a found element","body":"<p>I tried to find a solution to this thing and I spent a lot of time, but it is almost imposible to me to do that.</p>\n\n<p>The matter: I am using Selenium with Java in Firefox. I need to find an element (a listbox) and click on it. So, the code finds the element, but click action does not work. It works fine in Google Chrome every time, and just sometimes in Firefox (with the same Java code sometimes works, and sometimes does not).</p>\n\n<p><strong>There is the part of code with the element when the program enters on the page:</strong></p>\n\n<pre><code>    &lt;div id=\"size-btn\" class=\"size-btn\"&gt;\n      &lt;span class=\"selected-size\"&gt;SELECCIONA TALLA &lt;/span&gt;\n      &lt;div class=\"size-select\" style=\"display: none;\"&gt;\n        &lt;table&gt;\n          &lt;tbody&gt;\n            &lt;tr id=\"selecsize_2\" class=\"product-size\" data-ga-props=\"{action:'Seleccionar_Producto', opt_label:'Escoger_Talla'}\" data-catentryid=\"1051607\"&gt;\n            &lt;tr id=\"selecsize_3\" class=\"product-size\" data-ga-props=\"{action:'Seleccionar_Producto', opt_label:'Escoger_Talla'}\" data-catentryid=\"1051608\"&gt;\n            &lt;tr id=\"selecsize_4\" class=\"product-size\" data-ga-props=\"{action:'Seleccionar_Producto', opt_label:'Escoger_Talla'}\" data-catentryid=\"1051609\"&gt;\n            &lt;tr id=\"selecsize_5\" class=\"product-size\" data-ga-props=\"{action:'Seleccionar_Producto', opt_label:'Escoger_Talla'}\" data-catentryid=\"1051610\"&gt;\n          &lt;/tbody&gt;\n        &lt;/table&gt;\n      &lt;button class=\"size-guide gaViewEvent gaTrack\" data-ga-props=\"{action:'Seleccionar_Talla', opt_label:'Guia_de_tallas'}\" data-href=\"http://www.anyweb.com/webapp/wcs/stores/servlet/ProductGuideSizeAjaxView?catalogId=24052&amp;categoryId=358056&amp;langId=-5&amp;productId=1047599&amp;storeId=10701\"&gt;Gua de tallas&lt;/button&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n</code></pre>\n\n<p><strong>And there is the part of code that changes when the element is clicked:</strong></p>\n\n<pre><code>    &lt;div id=\"size-btn\" class=\"size-btn opened\"&gt;\n</code></pre>\n\n<p>I tried many solutions and sometimes it works, but the next time I run the program, it does not work again.</p>\n\n<p>Some solutions:</p>\n\n<ol>\n<li><p>It finds the element, but does not run click action. I checked with xpath and cssSelector, and there are unique elements found with those expressions.</p>\n\n<pre><code>driver.findElement(By.xpath(\"//div[@id='size-btn' and not(contains(@class,'opened'))]/span\")).click(); // Also checked with By.cssSelector(\"span.selected-size\")\n</code></pre></li>\n<li><p>I though it was because of the time, so I tried to solve it that way.</p>\n\n<pre><code>WebElement we = driver.findElement(By.xpath(\"//div[@id='size-btn' and not(contains(@class,'opened'))]/span\")); // By.cssSelector(\"span.selected-size\")\nThread.sleep(3000);\nwe.click();\n</code></pre></li>\n<li><p>Finally, I was a little bit desperate, and I created a new function to try to do this almost 60 times, looking for the change on the element code and if there was any change, just tried to do click action again.</p>\n\n<pre><code>clickAndWaitWhileElementIsNotPresent(By.xpath(\"//div[@id='size-btn' and not(contains(@class,'opened'))]/span\"),By.xpath(\"//div[@class='size-btn opened']/span\")); // By.cssSelector(\"span.selected-size\")\n\nprivate void clickAndWaitWhileElementIsNotPresent(By by1, By by2) throws Exception {\n    for (int second = 0;; second++) {\n        if (second &gt;= 60)\n            fail(\"timeout\");\n        try {\n            if (isElementPresent(by2))\n            {\n                break;\n            }\n            else\n            {\n                driver.findElement(by1).click();\n            }\n        } catch (Exception e) {\n        }\n        Thread.sleep(1000);\n    }\n}\n</code></pre></li>\n</ol>\n\n<p>There are the images of the element:</p>\n\n<p><img src=\"https://i.stack.imgur.com/eki2x.png\" alt=\"Element 1\">\n<img src=\"https://i.stack.imgur.com/U6781.png\" alt=\"Element 2\"></p>\n\n<p>Does anybody know how to do that?</p>\n"},{"tags":["java","json","jackson"],"answers":[{"tags":[],"owner":{"account_id":1101161,"reputation":119804,"user_id":1093528,"accept_rate":65,"display_name":"fge"},"down_vote_count":0,"up_vote_count":112,"is_accepted":true,"score":112,"last_activity_date":1424527815,"creation_date":1424527815,"answer_id":28646734,"question_id":28646572,"body_markdown":"Well, what you obtain when you `.get(&quot;test&quot;)` is a `JsonNode` and it happens to be a `TextNode`; when you `.toString()` it, it will return the string representation of that `TextNode`, which is why you obtain that result.\r\n\r\nWhat you want is to:\r\n\r\n    .get(&quot;test&quot;).textValue();\r\n\r\nwhich will return the actual content of the JSON String itself (with everything unescaped and so on).\r\n\r\nNote that this will return null if the `JsonNode` _is not_ a `TextNode`.\r\n","title":"Faster XML Jackson: Remove double quotes","body":"<p>Well, what you obtain when you <code>.get(\"test\")</code> is a <code>JsonNode</code> and it happens to be a <code>TextNode</code>; when you <code>.toString()</code> it, it will return the string representation of that <code>TextNode</code>, which is why you obtain that result.</p>\n\n<p>What you want is to:</p>\n\n<pre><code>.get(\"test\").textValue();\n</code></pre>\n\n<p>which will return the actual content of the JSON String itself (with everything unescaped and so on).</p>\n\n<p>Note that this will return null if the <code>JsonNode</code> <em>is not</em> a <code>TextNode</code>.</p>\n"},{"tags":[],"owner":{"account_id":1223991,"reputation":134,"user_id":1615640,"display_name":"Jon Polaski"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1475167390,"creation_date":1475167390,"answer_id":39775800,"question_id":28646572,"body_markdown":"Simple generic ternary to use the non-quoted text, otherwise keep the node intact.\r\n\r\n    node.isTextual() ? node.asText() : node\r\n","title":"Faster XML Jackson: Remove double quotes","body":"<p>Simple generic ternary to use the non-quoted text, otherwise keep the node intact.</p>\n\n<pre><code>node.isTextual() ? node.asText() : node\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1164065,"reputation":53,"user_id":1143035,"display_name":"Thangaraj"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634408094,"creation_date":1634408094,"answer_id":69598372,"question_id":28646572,"body_markdown":"```jsonValue.get(&quot;value&quot;).isString().stringValue()```\r\n\r\nAlso check null before calling in single line methods","title":"Faster XML Jackson: Remove double quotes","body":"<p><code>jsonValue.get(&quot;value&quot;).isString().stringValue()</code></p>\n<p>Also check null before calling in single line methods</p>\n"}],"owner":{"account_id":1157423,"reputation":37963,"user_id":1137669,"accept_rate":54,"display_name":"basickarl"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36676,"favorite_count":0,"down_vote_count":0,"up_vote_count":57,"accepted_answer_id":28646734,"answer_count":3,"score":57,"last_activity_date":1634408094,"creation_date":1424526822,"question_id":28646572,"body_markdown":"I have the following json:\r\n\r\n    {&quot;test&quot;:&quot;example&quot;}\r\n\r\nI use the following code from Faster XML Jackson.\r\n\r\n    JsonParser jp = factory.createParser(&quot;{\\&quot;test\\&quot;:\\&quot;example\\&quot;}&quot;);\r\n    json = mapper.readTree(jp);\r\n    System.out.println(json.get(&quot;test&quot;).toString());\r\n\r\nIt outputs:\r\n\r\n    &quot;example&quot;\r\n\r\nIs there a setting in Jackson to remove the double quotes?","title":"Faster XML Jackson: Remove double quotes","body":"<p>I have the following json:</p>\n\n<pre><code>{\"test\":\"example\"}\n</code></pre>\n\n<p>I use the following code from Faster XML Jackson.</p>\n\n<pre><code>JsonParser jp = factory.createParser(\"{\\\"test\\\":\\\"example\\\"}\");\njson = mapper.readTree(jp);\nSystem.out.println(json.get(\"test\").toString());\n</code></pre>\n\n<p>It outputs:</p>\n\n<pre><code>\"example\"\n</code></pre>\n\n<p>Is there a setting in Jackson to remove the double quotes?</p>\n"},{"tags":["java","scala"],"comments":[{"owner":{"account_id":6444111,"reputation":51041,"user_id":4993128,"accept_rate":43,"display_name":"jwvh"},"score":1,"creation_date":1634398675,"post_id":69594486,"comment_id":123016154,"body_markdown":"If you use the `java.time` library instead of the old and outdated `SimpleDate`, you&#39;ll get a better, more descriptive, error. A timezone offset of `2400` results in a `Value out of range` error. There is no timezone 24 hours off from UTC.","body":"If you use the <code>java.time</code> library instead of the old and outdated <code>SimpleDate</code>, you&#39;ll get a better, more descriptive, error. A timezone offset of <code>2400</code> results in a <code>Value out of range</code> error. There is no timezone 24 hours off from UTC."},{"owner":{"account_id":7034556,"reputation":12325,"user_id":5389127,"display_name":"Ga&#235;l J"},"score":0,"creation_date":1634407506,"post_id":69594486,"comment_id":123018355,"body_markdown":"+24 is not a valid timezone","body":"+24 is not a valid timezone"}],"owner":{"account_id":23050050,"reputation":79,"user_id":17167028,"display_name":"code"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":99,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":0,"score":1,"last_activity_date":1634407447,"creation_date":1634378156,"question_id":69594486,"body_markdown":"I have dates come with this fromate : \r\n\r\n    20170629001322+2400\r\n    20170629001322+0000\r\n\r\nand I need to parse it , the first one failed to parse while the second one success , below what i try in scala code \r\n\r\n    scala&gt; import java.text.ParseException;\r\n    import java.text.ParseException\r\n    \r\n    scala&gt; import java.text.SimpleDateFormat;\r\n    import java.text.SimpleDateFormat\r\n    \r\n    scala&gt; import java.util.Date;\r\n    import java.util.Date\r\n    \r\n    scala&gt; import java.util.Locale;\r\n    import java.util.Locale\r\n    \r\n    scala&gt; import java.util.TimeZone;\r\n    import java.util.TimeZone\r\n        \r\n    var sdf : SimpleDateFormat  = new SimpleDateFormat(&quot;yyyyMMddHHmmssZ&quot;, Locale.ENGLISH)\r\n    scala&gt; sdf.parse(&quot;20170629001322+0000&quot;)\r\n    res2: java.util.Date = Thu Jun 29 01:13:22 WAT 2017\r\n    \r\n    scala&gt; sdf.parse(&quot;20170629001322+2400&quot;)\r\n    java.text.ParseException: Unparseable date: &quot;20170629001322+2400&quot;\r\n      at java.text.DateFormat.parse(DateFormat.java:366)\r\n      ... 32 elided\r\n\r\nI also try to replace z by x but still not able to parse , any help ? \r\n","title":"time zone formatting not accept Z pattern in scala","body":"<p>I have dates come with this fromate :</p>\n<pre><code>20170629001322+2400\n20170629001322+0000\n</code></pre>\n<p>and I need to parse it , the first one failed to parse while the second one success , below what i try in scala code</p>\n<pre><code>scala&gt; import java.text.ParseException;\nimport java.text.ParseException\n\nscala&gt; import java.text.SimpleDateFormat;\nimport java.text.SimpleDateFormat\n\nscala&gt; import java.util.Date;\nimport java.util.Date\n\nscala&gt; import java.util.Locale;\nimport java.util.Locale\n\nscala&gt; import java.util.TimeZone;\nimport java.util.TimeZone\n    \nvar sdf : SimpleDateFormat  = new SimpleDateFormat(&quot;yyyyMMddHHmmssZ&quot;, Locale.ENGLISH)\nscala&gt; sdf.parse(&quot;20170629001322+0000&quot;)\nres2: java.util.Date = Thu Jun 29 01:13:22 WAT 2017\n\nscala&gt; sdf.parse(&quot;20170629001322+2400&quot;)\njava.text.ParseException: Unparseable date: &quot;20170629001322+2400&quot;\n  at java.text.DateFormat.parse(DateFormat.java:366)\n  ... 32 elided\n</code></pre>\n<p>I also try to replace z by x but still not able to parse , any help ?</p>\n"},{"tags":["java","spring","jpa","spring-data-jpa","spring-data"],"answers":[{"tags":[],"owner":{"account_id":23052745,"reputation":11,"user_id":17169288,"display_name":"danny-bernier"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634407428,"creation_date":1634407428,"answer_id":69598293,"question_id":69597680,"body_markdown":"I found I can do this if I use 2 parameters like so\r\n```\r\n@Repository\r\npublic interface GameRepository extends JpaRepository&lt;Game, Integer&gt; {\r\n\tPage&lt;Game&gt; findByWhiteContributorsOrBlackContributors(final Player playerWhite, final Player playerBlack, Pageable pageable);\r\n\tPage&lt;Game&gt; findByWhiteContributors_IdOrBlackContributors_Id(final int idWhite, final int idBlack, Pageable pageable);\r\n}\r\n```\r\nIt would be better if I could find by either set while only take 1 parameter. But for the time being this seems to work?","title":"Spring repository how to find in list based on field&#39;s id?","body":"<p>I found I can do this if I use 2 parameters like so</p>\n<pre><code>@Repository\npublic interface GameRepository extends JpaRepository&lt;Game, Integer&gt; {\n    Page&lt;Game&gt; findByWhiteContributorsOrBlackContributors(final Player playerWhite, final Player playerBlack, Pageable pageable);\n    Page&lt;Game&gt; findByWhiteContributors_IdOrBlackContributors_Id(final int idWhite, final int idBlack, Pageable pageable);\n}\n</code></pre>\n<p>It would be better if I could find by either set while only take 1 parameter. But for the time being this seems to work?</p>\n"}],"owner":{"account_id":23052745,"reputation":11,"user_id":17169288,"display_name":"danny-bernier"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1634407428,"creation_date":1634403017,"question_id":69597680,"body_markdown":"I have a game object which holds 2 sets of players: white contributors and black contributors. I want to be able to find games that have a player in either the white or black contributor sets but based on the id field of the player object rather than the player object itself. Can you do this purely by the naming convention of the repository&#39;s method? Here&#39;s some code for context:\r\n\r\nGame Repo:\r\n```\r\n@Repository\r\npublic interface GameRepository extends JpaRepository&lt;Game, Integer&gt; {\r\n\tPage&lt;Game&gt; findByPlayer_IdInWhiteContributorsOrPlayer_IdInBlackContributors(final int id, Pageable pageable);\r\n}\r\n```\r\n\r\nGame Object:\r\n```\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Entity\r\n@Table(name = &quot;game&quot;)\r\npublic class Game {\r\n\r\n\t@Transient\r\n\tpublic static final String STARTING_POSITION_FEN = &quot;rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1&quot;;\r\n\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.AUTO)\r\n\tprivate int id;\r\n\r\n\tprivate String pdn;\r\n\r\n\t@Length(min = 0, max = 255)\r\n\tprivate String fen = STARTING_POSITION_FEN;\r\n\r\n\t@Column(name = &quot;white_contributors&quot;)\r\n\t@ManyToMany(mappedBy = &quot;gamesAsWhite&quot;)\r\n\tprivate Set&lt;Player&gt; whiteContributors;\r\n\r\n\t@Column(name = &quot;black_contributors&quot;)\r\n\t@ManyToMany(mappedBy = &quot;gamesAsBlack&quot;)\r\n\tprivate Set&lt;Player&gt; blackContributors;\r\n\t\r\n\t@CreationTimestamp\r\n\tprivate Timestamp created;\r\n\t\r\n\t@UpdateTimestamp\r\n\tprivate Timestamp lastUpdated;\r\n}\r\n```\r\nPlayer Object:\r\n```\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Entity\r\n@Table(name = &quot;player&quot;)\r\npublic class Player {\r\n\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.AUTO)\r\n\tprivate int id;\r\n\r\n\t@Column(name = &quot;display_name&quot;)\r\n\t@Length(min = 1, max = 25)\r\n\tprivate String displayName;\r\n\r\n\t@Email\r\n\t@Length(min = 5, max = 255)\r\n\tprivate String email;\r\n\r\n\tprivate String password;\r\n\r\n\t@Length(max = 64)\r\n\tprivate String name;\r\n\r\n\t@Length(max = 255)\r\n\t@Nullable\r\n\tprivate String about;\r\n\r\n\t@Nullable\r\n\tprivate Date birthday;\r\n\r\n\t@Column(name = &quot;games_as_white&quot;)\r\n\t@ManyToMany(cascade = CascadeType.ALL)\r\n\t@JoinTable(name = &quot;player_games_as_white&quot;, joinColumns = { @JoinColumn(name = &quot;id&quot;) })\r\n\tprivate Set&lt;Game&gt; gamesAsWhite;\r\n\r\n\t@Column(name = &quot;games_as_black&quot;)\r\n\t@ManyToMany(cascade = CascadeType.ALL)\r\n\t@JoinTable(name = &quot;player_games_as_black&quot;, joinColumns = { @JoinColumn(name = &quot;id&quot;) })\r\n\tprivate Set&lt;Game&gt; gamesAsBlack;\r\n\r\n\t@PositiveOrZero\r\n\tprivate int rating;\r\n\r\n\t@PositiveOrZero\r\n\tprivate int wins;\r\n\r\n\t@PositiveOrZero\r\n\tprivate int losses;\r\n\r\n\t@PositiveOrZero\r\n\tprivate int draws;\r\n}\r\n```","title":"Spring repository how to find in list based on field&#39;s id?","body":"<p>I have a game object which holds 2 sets of players: white contributors and black contributors. I want to be able to find games that have a player in either the white or black contributor sets but based on the id field of the player object rather than the player object itself. Can you do this purely by the naming convention of the repository's method? Here's some code for context:</p>\n<p>Game Repo:</p>\n<pre><code>@Repository\npublic interface GameRepository extends JpaRepository&lt;Game, Integer&gt; {\n    Page&lt;Game&gt; findByPlayer_IdInWhiteContributorsOrPlayer_IdInBlackContributors(final int id, Pageable pageable);\n}\n</code></pre>\n<p>Game Object:</p>\n<pre><code>@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@Entity\n@Table(name = &quot;game&quot;)\npublic class Game {\n\n    @Transient\n    public static final String STARTING_POSITION_FEN = &quot;rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1&quot;;\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private int id;\n\n    private String pdn;\n\n    @Length(min = 0, max = 255)\n    private String fen = STARTING_POSITION_FEN;\n\n    @Column(name = &quot;white_contributors&quot;)\n    @ManyToMany(mappedBy = &quot;gamesAsWhite&quot;)\n    private Set&lt;Player&gt; whiteContributors;\n\n    @Column(name = &quot;black_contributors&quot;)\n    @ManyToMany(mappedBy = &quot;gamesAsBlack&quot;)\n    private Set&lt;Player&gt; blackContributors;\n    \n    @CreationTimestamp\n    private Timestamp created;\n    \n    @UpdateTimestamp\n    private Timestamp lastUpdated;\n}\n</code></pre>\n<p>Player Object:</p>\n<pre><code>@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@Entity\n@Table(name = &quot;player&quot;)\npublic class Player {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private int id;\n\n    @Column(name = &quot;display_name&quot;)\n    @Length(min = 1, max = 25)\n    private String displayName;\n\n    @Email\n    @Length(min = 5, max = 255)\n    private String email;\n\n    private String password;\n\n    @Length(max = 64)\n    private String name;\n\n    @Length(max = 255)\n    @Nullable\n    private String about;\n\n    @Nullable\n    private Date birthday;\n\n    @Column(name = &quot;games_as_white&quot;)\n    @ManyToMany(cascade = CascadeType.ALL)\n    @JoinTable(name = &quot;player_games_as_white&quot;, joinColumns = { @JoinColumn(name = &quot;id&quot;) })\n    private Set&lt;Game&gt; gamesAsWhite;\n\n    @Column(name = &quot;games_as_black&quot;)\n    @ManyToMany(cascade = CascadeType.ALL)\n    @JoinTable(name = &quot;player_games_as_black&quot;, joinColumns = { @JoinColumn(name = &quot;id&quot;) })\n    private Set&lt;Game&gt; gamesAsBlack;\n\n    @PositiveOrZero\n    private int rating;\n\n    @PositiveOrZero\n    private int wins;\n\n    @PositiveOrZero\n    private int losses;\n\n    @PositiveOrZero\n    private int draws;\n}\n</code></pre>\n"},{"tags":["java","jar","classloader"],"answers":[{"tags":[],"owner":{"account_id":7154,"reputation":654,"user_id":12297,"display_name":"entzik"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1376217472,"creation_date":1222437390,"answer_id":139645,"question_id":139534,"body_markdown":"I don&#39;t think there is a good way to check that. And I&#39;m not sure you want to do that. What you need to do  is get familiar with your app-server&#39;s class loading architecture, and understand how that works. \r\n\r\nA simplified explanation of how it works is: an EJB or a web-app will first look for a class or a resource in  libraries declared in its own module (ejb-jar or war). if the class is not found there, the class loader forwards the request to the its parent class loader which is either a declared dependency (usualy an ejb) or the the application class loader which is responsible to load libraries and resources declared in the ear package. If the class or the resource is still not found the request is forwarded to the app server which will look in its own classpath. \r\n\r\nThis being said, you should remember that a Java EE module (web-app, ejb) will always load classes from a jar that is in the nearest scope. For example if you package log4j v1 in the war file, log4j v2 at ear level and you put log4j v3 in your app-server&#39;s class path, the module will use the jar in its own module. take that away and it&#39;ll use the one at ear level. take that out and it will use the one in the app-server&#39;s classpath. Things get more tricky when you have complex dependencies between modules. \r\n\r\nBest is to put application global libraries at ear level.","title":"Classloader issues - How to determine which library versions (jar-files) are loaded","body":"<p>I don't think there is a good way to check that. And I'm not sure you want to do that. What you need to do  is get familiar with your app-server's class loading architecture, and understand how that works. </p>\n\n<p>A simplified explanation of how it works is: an EJB or a web-app will first look for a class or a resource in  libraries declared in its own module (ejb-jar or war). if the class is not found there, the class loader forwards the request to the its parent class loader which is either a declared dependency (usualy an ejb) or the the application class loader which is responsible to load libraries and resources declared in the ear package. If the class or the resource is still not found the request is forwarded to the app server which will look in its own classpath. </p>\n\n<p>This being said, you should remember that a Java EE module (web-app, ejb) will always load classes from a jar that is in the nearest scope. For example if you package log4j v1 in the war file, log4j v2 at ear level and you put log4j v3 in your app-server's class path, the module will use the jar in its own module. take that away and it'll use the one at ear level. take that out and it will use the one in the app-server's classpath. Things get more tricky when you have complex dependencies between modules. </p>\n\n<p>Best is to put application global libraries at ear level.</p>\n"},{"tags":[],"owner":{"account_id":717,"reputation":54118,"user_id":939,"accept_rate":81,"display_name":"Ron Tuffin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1222437456,"creation_date":1222437456,"answer_id":139657,"question_id":139534,"body_markdown":"There must be a better way than the way I do it, but I tend to do this in a very manual way.\r\n\r\n 1. Every Jar must have it&#39;s version number in the file name (if it doesn&#39;t change it&#39;s name).\r\n 2. each application has it&#39;s own classpath.\r\n 3. There must be a reason to start using an updated Jar (new version). Don&#39;t just change because it is available, change because it gives you functionality that you need.\r\n 4. Each release must include all Jars that are needed.\r\n 5. I keep a Version class that knows the list of Jars it needs (this is coded into the source file) and can be checked at runtime against the list of Jars in the classpath.\r\n\r\nAs I said, it is manual, but it works.","title":"Classloader issues - How to determine which library versions (jar-files) are loaded","body":"<p>There must be a better way than the way I do it, but I tend to do this in a very manual way.</p>\n\n<ol>\n<li>Every Jar must have it's version number in the file name (if it doesn't change it's name).</li>\n<li>each application has it's own classpath.</li>\n<li>There must be a reason to start using an updated Jar (new version). Don't just change because it is available, change because it gives you functionality that you need.</li>\n<li>Each release must include all Jars that are needed.</li>\n<li>I keep a Version class that knows the list of Jars it needs (this is coded into the source file) and can be checked at runtime against the list of Jars in the classpath.</li>\n</ol>\n\n<p>As I said, it is manual, but it works.</p>\n"},{"tags":[],"owner":{"account_id":11089,"reputation":400030,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1222438617,"creation_date":1222438617,"answer_id":139796,"question_id":139534,"body_markdown":"In the current version of Java, library versioning is a rather wooly term that relies on the JAR being packaged correctly with a useful manifest.  Even then, it&#39;s a lot of work for the running application to gather this information together in a useful way. The JVm runtime gives you no help whatsoever.\r\n\r\nI think your best bet is to enforce this at build time, using dependency management tools like Ivy or Maven to fetch the correct versions of everything.\r\n\r\nInterestingly, Java 7 will likely include a proper module versioning framework for precisely this sort of thing. Not that that helps you right at this moment,","title":"Classloader issues - How to determine which library versions (jar-files) are loaded","body":"<p>In the current version of Java, library versioning is a rather wooly term that relies on the JAR being packaged correctly with a useful manifest.  Even then, it's a lot of work for the running application to gather this information together in a useful way. The JVm runtime gives you no help whatsoever.</p>\n\n<p>I think your best bet is to enforce this at build time, using dependency management tools like Ivy or Maven to fetch the correct versions of everything.</p>\n\n<p>Interestingly, Java 7 will likely include a proper module versioning framework for precisely this sort of thing. Not that that helps you right at this moment,</p>\n"},{"tags":[],"owner":{"account_id":11769,"reputation":55893,"user_id":22850,"accept_rate":60,"display_name":"Tom"},"down_vote_count":0,"up_vote_count":19,"is_accepted":true,"score":19,"last_activity_date":1634406891,"creation_date":1222463108,"answer_id":141969,"question_id":139534,"body_markdown":"If you happen to be using JBoss, there is an MBean (the class loader repository iirc) where you can ask for all classloaders that have loaded a certain class.\r\n\r\nIf all else fails, there&#39;s always `java -verbose:class` which will print the location of the jar for every class file that is being loaded.","title":"Classloader issues - How to determine which library versions (jar-files) are loaded","body":"<p>If you happen to be using JBoss, there is an MBean (the class loader repository iirc) where you can ask for all classloaders that have loaded a certain class.</p>\n<p>If all else fails, there's always <code>java -verbose:class</code> which will print the location of the jar for every class file that is being loaded.</p>\n"},{"tags":[],"owner":{"account_id":10874,"reputation":13103,"user_id":20734,"display_name":"John M"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1571240769,"creation_date":1222981271,"answer_id":164586,"question_id":139534,"body_markdown":"If you&#39;ve got appropriate versions info in a jar manifest, there are methods to retrieve and test the version.  No need to manually read the manifest.\r\n\r\n[java.lang.Package][1].getImplementationVersion() and getSpecificationVersion() and isCompatibleWith() sound like they&#39;d do what you&#39;re looking for.\r\n\r\nYou can get the Package with this.getClass().getPackage() among other ways.\r\n\r\nThe javadoc for java.lang.Package doesn&#39;t give the specific manifest attribute names for these attributes.  A quick google search turned it up at http://java.sun.com/docs/books/tutorial/deployment/jar/packageman.html\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Package.html","title":"Classloader issues - How to determine which library versions (jar-files) are loaded","body":"<p>If you've got appropriate versions info in a jar manifest, there are methods to retrieve and test the version.  No need to manually read the manifest.</p>\n\n<p><a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Package.html\" rel=\"nofollow noreferrer\">java.lang.Package</a>.getImplementationVersion() and getSpecificationVersion() and isCompatibleWith() sound like they'd do what you're looking for.</p>\n\n<p>You can get the Package with this.getClass().getPackage() among other ways.</p>\n\n<p>The javadoc for java.lang.Package doesn't give the specific manifest attribute names for these attributes.  A quick google search turned it up at <a href=\"http://java.sun.com/docs/books/tutorial/deployment/jar/packageman.html\" rel=\"nofollow noreferrer\">http://java.sun.com/docs/books/tutorial/deployment/jar/packageman.html</a></p>\n"}],"owner":{"account_id":5897,"reputation":6043,"user_id":9707,"accept_rate":56,"display_name":"Johan Pelgrim"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22626,"favorite_count":0,"down_vote_count":0,"up_vote_count":27,"accepted_answer_id":141969,"answer_count":5,"score":27,"last_activity_date":1634406891,"creation_date":1222436042,"question_id":139534,"body_markdown":"I&#39;ve just solved another *I-though-I-was-using-this-version-of-a-library-but-apparently-my-app-server-has-already-loaded-an-older-version-of-this-library-*issue (sigh).\r\n\r\nDoes anybody know a good way to verify (or monitor) whether your application has access to all the appropriate jar-files, or loaded class-versions?\r\n\r\nThanks in advance!\r\n\r\n[P.S. A very good reason to start using the [OSGi module architecture][1] in my view!]\r\n\r\n**Update**: [This][2] article helped as well! It gave me insight which classes JBoss&#39; classloader loaded by writing it to a log file.\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/OSGi#Architecture\r\n  [2]: http://www.jboss.org/community/docs/DOC-9697","title":"Classloader issues - How to determine which library versions (jar-files) are loaded","body":"<p>I've just solved another *I-though-I-was-using-this-version-of-a-library-but-apparently-my-app-server-has-already-loaded-an-older-version-of-this-library-*issue (sigh).</p>\n\n<p>Does anybody know a good way to verify (or monitor) whether your application has access to all the appropriate jar-files, or loaded class-versions?</p>\n\n<p>Thanks in advance!</p>\n\n<p>[P.S. A very good reason to start using the <a href=\"http://en.wikipedia.org/wiki/OSGi#Architecture\" rel=\"noreferrer\">OSGi module architecture</a> in my view!]</p>\n\n<p><strong>Update</strong>: <a href=\"http://www.jboss.org/community/docs/DOC-9697\" rel=\"noreferrer\">This</a> article helped as well! It gave me insight which classes JBoss' classloader loaded by writing it to a log file.</p>\n"},{"tags":["java","spring","junit"],"answers":[{"tags":[],"owner":{"account_id":2818342,"reputation":299866,"user_id":2422776,"display_name":"Mureinik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1634406782,"creation_date":1634406782,"answer_id":69598208,"question_id":69598073,"body_markdown":"You&#39;ve placed your test code under `src/main/java` instead of `src/test/java`, so I doubt the IDE will pick up on it being a test. Move the test code code to `src/test/java` and mark it as a test srouce folder, and you should be OK.","title":"Do I need to write a main() function when I&#39;ve used annotation &#39;@Test&#39; from JUnit while testing Spring Project?","body":"<p>You've placed your test code under <code>src/main/java</code> instead of <code>src/test/java</code>, so I doubt the IDE will pick up on it being a test. Move the test code code to <code>src/test/java</code> and mark it as a test srouce folder, and you should be OK.</p>\n"}],"owner":{"account_id":21826989,"reputation":13,"user_id":16122317,"display_name":"CsJuniorInNuist"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69598208,"answer_count":1,"score":1,"last_activity_date":1634406782,"creation_date":1634405842,"question_id":69598073,"body_markdown":"Recently I&#39;ve been learning Spring framework. And when I tried the code on my book, an error occurred which is\r\n```java\r\n:  com.test.app.SpringTest  main ,  main :\r\n   public static void main(String[] args)\r\n JavaFX javafx.application.Application\r\n```\r\nLet me translate this as follows.\r\n```java\r\nError: cannot find main function in class &#39;com.test.app.SpringTest&#39;, \r\nplease define main function as: ... \r\notherwise JavaFX application class must be extended from javafx.application.Application\r\n```\r\nIt&#39;s also my first time to use JUnit, I&#39;ve searched for this but cannot find an answer, I will post the structure of my project and also the essential codes below to make it clear.\r\n[Here is the structure of my project][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/GLLCR.png\r\nI&#39;m sure that my maven has downloaded all the jar packages needed.\r\n\r\nIn applicationContext.xml\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;\r\n&lt;beans xmlns = &quot;http://www.springframework.org/schema/beans&quot;\r\n       xmlns:xsi = &quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n       xsi:schemaLocation = &quot;http://www.springframework.org/schema/beans\r\n           http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;\r\n\r\n&lt;/beans&gt;\r\n```\r\n\r\nIn SprintTest.java\r\n```java\r\npackage com.test.app;\r\n\r\nimport org.junit.Test;\r\nimport org.junit.runner.RunWith;\r\nimport org.springframework.test.context.ContextConfiguration;\r\nimport org.springframework.test.context.junit4.SpringJUnit4ClassRunner;\r\n// import org.springframework.test.context.junit4.SpringRunner;\r\n\r\n// @RunWith(SpringRunner.class)\r\n@RunWith(SpringJUnit4ClassRunner.class)\r\n@ContextConfiguration(locations={&quot;classpath:applicationContext.xml&quot;})\r\npublic class SpringTest {\r\n\r\n    @Test\r\n    public void test(){\r\n        System.out.println(&quot;test&quot;);\r\n    }\r\n\r\n}\r\n```\r\nand the book tells me to run test(), but when I press the Run button, It just gives me this error. So I wonder if I should add a main function, I know this might be a very simple question and that may be why I cannot find an answer. So please tell me if you know this. Thanks for your help. Any suggestion will be appreciated.\r\n","title":"Do I need to write a main() function when I&#39;ve used annotation &#39;@Test&#39; from JUnit while testing Spring Project?","body":"<p>Recently I've been learning Spring framework. And when I tried the code on my book, an error occurred which is</p>\n<pre class=\"lang-java prettyprint-override\"><code>:  com.test.app.SpringTest  main ,  main :\n   public static void main(String[] args)\n JavaFX javafx.application.Application\n</code></pre>\n<p>Let me translate this as follows.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Error: cannot find main function in class 'com.test.app.SpringTest', \nplease define main function as: ... \notherwise JavaFX application class must be extended from javafx.application.Application\n</code></pre>\n<p>It's also my first time to use JUnit, I've searched for this but cannot find an answer, I will post the structure of my project and also the essential codes below to make it clear.\n<a href=\"https://i.stack.imgur.com/GLLCR.png\" rel=\"nofollow noreferrer\">Here is the structure of my project</a></p>\n<p>I'm sure that my maven has downloaded all the jar packages needed.</p>\n<p>In applicationContext.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;\n&lt;beans xmlns = &quot;http://www.springframework.org/schema/beans&quot;\n       xmlns:xsi = &quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n       xsi:schemaLocation = &quot;http://www.springframework.org/schema/beans\n           http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;\n\n&lt;/beans&gt;\n</code></pre>\n<p>In SprintTest.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.test.app;\n\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.springframework.test.context.ContextConfiguration;\nimport org.springframework.test.context.junit4.SpringJUnit4ClassRunner;\n// import org.springframework.test.context.junit4.SpringRunner;\n\n// @RunWith(SpringRunner.class)\n@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(locations={&quot;classpath:applicationContext.xml&quot;})\npublic class SpringTest {\n\n    @Test\n    public void test(){\n        System.out.println(&quot;test&quot;);\n    }\n\n}\n</code></pre>\n<p>and the book tells me to run test(), but when I press the Run button, It just gives me this error. So I wonder if I should add a main function, I know this might be a very simple question and that may be why I cannot find an answer. So please tell me if you know this. Thanks for your help. Any suggestion will be appreciated.</p>\n"},{"tags":["java","methods","linked-list","copy-constructor"],"comments":[{"owner":{"account_id":21712627,"reputation":386,"user_id":16312980,"display_name":"Ryan"},"score":0,"creation_date":1634356240,"post_id":69592463,"comment_id":123008133,"body_markdown":"Why does the constructor with the LinkedListOfIntsTest parameter written is such a way, isn&#39;t suppose to be passing in a Head Node and a list of all other nodes?","body":"Why does the constructor with the LinkedListOfIntsTest parameter written is such a way, isn&#39;t suppose to be passing in a Head Node and a list of all other nodes?"},{"owner":{"account_id":21712627,"reputation":386,"user_id":16312980,"display_name":"Ryan"},"score":0,"creation_date":1634356334,"post_id":69592463,"comment_id":123008138,"body_markdown":"https://www.geeksforgeeks.org/implementing-a-linked-list-in-java-using-class/ Maybe this could help in your class and for your own understanding","body":"<a href=\"https://www.geeksforgeeks.org/implementing-a-linked-list-in-java-using-class/\" rel=\"nofollow noreferrer\">geeksforgeeks.org/&hellip;</a> Maybe this could help in your class and for your own understanding"},{"owner":{"display_name":"user16854661"},"score":0,"creation_date":1634356460,"post_id":69592463,"comment_id":123008151,"body_markdown":"Thats how my professor had it set up in class. He wanted the class to copy it and we worked on some methods but now he wants us to add on to this and have a bunch of methods implemented along with some constructors.","body":"Thats how my professor had it set up in class. He wanted the class to copy it and we worked on some methods but now he wants us to add on to this and have a bunch of methods implemented along with some constructors."},{"owner":{"account_id":21712627,"reputation":386,"user_id":16312980,"display_name":"Ryan"},"score":0,"creation_date":1634356695,"post_id":69592463,"comment_id":123008177,"body_markdown":"So `LinkedListOfIntsTest` is a node? If that is the case, that the inner class node doesn&#39;t seem to be needed.","body":"So <code>LinkedListOfIntsTest</code> is a node? If that is the case, that the inner class node doesn&#39;t seem to be needed."},{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1634356855,"post_id":69592463,"comment_id":123008192,"body_markdown":"https://stackoverflow.com/a/69592057/2970947","body":"<a href=\"https://stackoverflow.com/a/69592057/2970947\">stackoverflow.com/a/69592057/2970947</a>"},{"owner":{"display_name":"user16854661"},"score":0,"creation_date":1634357127,"post_id":69592463,"comment_id":123008222,"body_markdown":"LinkedListOfIntsTest is the name of the class. I have an empty constructor by that name but I also need a copy constructor that takes in LinkedListOfInts Object. The problem is I dont know how to do that. I did what I thought was the correct way but Im not sure.","body":"LinkedListOfIntsTest is the name of the class. I have an empty constructor by that name but I also need a copy constructor that takes in LinkedListOfInts Object. The problem is I dont know how to do that. I did what I thought was the correct way but Im not sure."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1634357443,"post_id":69592463,"comment_id":123008252,"body_markdown":"No.  This is not right.  Please re-read the &quot;hint&quot; that gave you in a previous question (which you appear to have deleted.)","body":"No.  This is not right.  Please re-read the &quot;hint&quot; that gave you in a previous question (which you appear to have deleted.)"},{"owner":{"display_name":"user16854661"},"score":0,"creation_date":1634358281,"post_id":69592463,"comment_id":123008343,"body_markdown":"The only thing I can think of for this copy constructor is writing this.other = other.head. If this is not the case then I dont know what to do. I just started learning about Linked List last Monday. This is all new to me so Im not sure what the copy constructor should look like based on my code.","body":"The only thing I can think of for this copy constructor is writing this.other = other.head. If this is not the case then I dont know what to do. I just started learning about Linked List last Monday. This is all new to me so Im not sure what the copy constructor should look like based on my code."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1634361813,"post_id":69592463,"comment_id":123008773,"body_markdown":"At present your `public LinkedListOfIntsTest(LinkedListOfIntsTest other)` constructor completely ignores the parameter you are passing.","body":"At present your <code>public LinkedListOfIntsTest(LinkedListOfIntsTest other)</code> constructor completely ignores the parameter you are passing."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1634368118,"post_id":69592463,"comment_id":123009690,"body_markdown":"*&quot;The only thing I can think of for this copy constructor ... &quot;*  -  As I said previously.   This constructor needs to do the following:  1) initialize this list as an empty list.  2) iterate the `other` list, getting each value and adding it to this list.  You need to write the `add` method (or whatever you are going to call it) first.","body":"<i>&quot;The only thing I can think of for this copy constructor ... &quot;</i>  -  As I said previously.   This constructor needs to do the following:  1) initialize this list as an empty list.  2) iterate the <code>other</code> list, getting each value and adding it to this list.  You need to write the <code>add</code> method (or whatever you are going to call it) first."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1634368332,"post_id":69592463,"comment_id":123009727,"body_markdown":"The &quot;magic trick&quot; to programming that beginners seem to miss is that you need to understand the task that you are trying to perform before you start writing code.  Then you make the code do the task according to your understanding.","body":"The &quot;magic trick&quot; to programming that beginners seem to miss is that you need to understand the task that you are trying to perform before you start writing code.  Then you make the code do the task according to your understanding."},{"owner":{"display_name":"user16854661"},"score":0,"creation_date":1634403621,"post_id":69592463,"comment_id":123017349,"body_markdown":"I added a method called addToFront. One of the many methods I need to implement in this project. Hopefully know you know how to help me because I&#39;m lost on this and I still have no idea what the point of a copy constructor is. All I know is my professor wants this to be included in the project and I need to have it done.","body":"I added a method called addToFront. One of the many methods I need to implement in this project. Hopefully know you know how to help me because I&#39;m lost on this and I still have no idea what the point of a copy constructor is. All I know is my professor wants this to be included in the project and I need to have it done."}],"answers":[{"tags":[],"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1634406763,"creation_date":1634406763,"answer_id":69598202,"question_id":69592463,"body_markdown":"You can iterate over the nodes of the other list and sequentially create new tail nodes based on their values.\r\n\r\n```\r\npublic LinkedListOfInts(LinkedListOfInts other) {\r\n    Node tail = null;\r\n    for(Node n = other.head; n != null; n = n.nextNode){\r\n        if(tail == null) this.head = tail = new Node(n.value, null);\r\n        else {\r\n            tail.nextNode = new Node(n.value, null);\r\n            tail = tail.nextNode;\r\n        }\r\n    }\r\n}\r\n// ...\r\npublic static void main(String[] args) {\r\n    LinkedListOfInts list = new LinkedListOfInts();\r\n    for (int i = 0; i &lt; 15; i++)\r\n        list.addToFront(i);\r\n    LinkedListOfInts copy = new LinkedListOfInts(list);\r\n    System.out.println(list);\r\n    System.out.println(copy);\r\n}\r\n```","title":"Did I write the copy constructor for my Linked List program correctly?","body":"<p>You can iterate over the nodes of the other list and sequentially create new tail nodes based on their values.</p>\n<pre><code>public LinkedListOfInts(LinkedListOfInts other) {\n    Node tail = null;\n    for(Node n = other.head; n != null; n = n.nextNode){\n        if(tail == null) this.head = tail = new Node(n.value, null);\n        else {\n            tail.nextNode = new Node(n.value, null);\n            tail = tail.nextNode;\n        }\n    }\n}\n// ...\npublic static void main(String[] args) {\n    LinkedListOfInts list = new LinkedListOfInts();\n    for (int i = 0; i &lt; 15; i++)\n        list.addToFront(i);\n    LinkedListOfInts copy = new LinkedListOfInts(list);\n    System.out.println(list);\n    System.out.println(copy);\n}\n</code></pre>\n"}],"owner":{"display_name":"user16854661"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":101,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":69598202,"answer_count":1,"score":2,"last_activity_date":1634406763,"creation_date":1634355637,"question_id":69592463,"body_markdown":"I am working on a project for my Data Structures class that asks me to write a class to implement a linked list of ints.\r\n&gt; * Use an inner class for the Node.\r\n&gt; * Include the methods below.\r\n&gt; * Write a tester to enable you to test all of the methods with whatever data you want in any order.\r\n\r\nI have to create three different constructors. One of the constructors is a copy constructor. I have my code down below showing what I did but I&#39;m not sure I wrote this constructor correctly. I also have a method called addToFront one of the many methods I need to implement in this project. Can someone let me know what I would need to write for the copy constructor? I have no idea what I need to write for a copy constructor. I&#39;ve tried looking it up but the examples shown don&#39;t match with what I&#39;m trying to write.\r\n```\r\npublic class LinkedListOfInts {\r\n\tNode head;\r\n\r\n\tprivate class Node {\r\n\t\tint value;\r\n\t\tNode nextNode;\r\n\r\n\t\tpublic Node(int value, Node nextNode) {\r\n\t\t\tthis.value = value;\r\n\t\t\tthis.nextNode = nextNode;\r\n\t\t}\r\n\r\n\t}\r\n\t\r\n\tpublic LinkedListOfInts() {\r\n\t\t\r\n\t}\r\n\t\r\n\tpublic LinkedListOfInts(LinkedListOfInts other) {\r\n\t\t\r\n\t}\r\n\r\n\tpublic void addToFront(int x) {\r\n\t\thead = new Node(x, head);\r\n\t}\r\n\r\n\tpublic String toString() {\r\n\t\tString result = &quot; &quot;;\r\n\t\tfor (Node ptr = head; ptr != null; ptr = ptr.nextNode)\r\n\t\t\tresult += ptr.value + &quot; &quot;;\r\n\t\treturn result;\r\n\t}\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tLinkedListOfInts list = new LinkedListOfInts();\r\n\t\tfor (int i = 0; i &lt; 15; i++)\r\n\t\t\tlist.addToFront(i);\r\n\t\tSystem.out.println(list);\r\n\t}\r\n\r\n}\r\n","title":"Did I write the copy constructor for my Linked List program correctly?","body":"<p>I am working on a project for my Data Structures class that asks me to write a class to implement a linked list of ints.</p>\n<blockquote>\n<ul>\n<li>Use an inner class for the Node.</li>\n<li>Include the methods below.</li>\n<li>Write a tester to enable you to test all of the methods with whatever data you want in any order.</li>\n</ul>\n</blockquote>\n<p>I have to create three different constructors. One of the constructors is a copy constructor. I have my code down below showing what I did but I'm not sure I wrote this constructor correctly. I also have a method called addToFront one of the many methods I need to implement in this project. Can someone let me know what I would need to write for the copy constructor? I have no idea what I need to write for a copy constructor. I've tried looking it up but the examples shown don't match with what I'm trying to write.</p>\n<pre><code>public class LinkedListOfInts {\n    Node head;\n\n    private class Node {\n        int value;\n        Node nextNode;\n\n        public Node(int value, Node nextNode) {\n            this.value = value;\n            this.nextNode = nextNode;\n        }\n\n    }\n    \n    public LinkedListOfInts() {\n        \n    }\n    \n    public LinkedListOfInts(LinkedListOfInts other) {\n        \n    }\n\n    public void addToFront(int x) {\n        head = new Node(x, head);\n    }\n\n    public String toString() {\n        String result = &quot; &quot;;\n        for (Node ptr = head; ptr != null; ptr = ptr.nextNode)\n            result += ptr.value + &quot; &quot;;\n        return result;\n    }\n\n    public static void main(String[] args) {\n        LinkedListOfInts list = new LinkedListOfInts();\n        for (int i = 0; i &lt; 15; i++)\n            list.addToFront(i);\n        System.out.println(list);\n    }\n\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","junit"],"comments":[{"owner":{"account_id":3023214,"reputation":20362,"user_id":2563754,"display_name":"Seelenvirtuose"},"score":1,"creation_date":1634406902,"post_id":69598163,"comment_id":123018205,"body_markdown":"Could that be of help? https://github.com/Kong/unirest-java/tree/main/unirest-mocks","body":"Could that be of help? <a href=\"https://github.com/Kong/unirest-java/tree/main/unirest-mocks\" rel=\"nofollow noreferrer\">github.com/Kong/unirest-java/tree/main/unirest-mocks</a>"},{"owner":{"account_id":2109919,"reputation":726,"user_id":1875391,"accept_rate":86,"display_name":"Wanny Miarelli"},"score":0,"creation_date":1634498652,"post_id":69598163,"comment_id":123034976,"body_markdown":"@Seelenvirtuose it&#39;s incredible how i saw this library yesterday and i totally tought it was not what I was looking for... I tested this but it was not working because i was using spawnInstance method. It probably works only with the base static instance. Using the static instance works so thank you.","body":"@Seelenvirtuose it&#39;s incredible how i saw this library yesterday and i totally tought it was not what I was looking for... I tested this but it was not working because i was using spawnInstance method. It probably works only with the base static instance. Using the static instance works so thank you."}],"owner":{"account_id":2109919,"reputation":726,"user_id":1875391,"accept_rate":86,"display_name":"Wanny Miarelli"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":231,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1634406542,"creation_date":1634406542,"question_id":69598163,"body_markdown":"I have a service with business logic and http calls (using Unirest) to a third party service.\r\n\r\npublic PaymentLinkResult generatePaymentLink(PaymentLinkParams paymentLinkParams) throws GatewayException {\r\n        \r\n        // BUSINESS LOGIC\r\n\r\n        HttpResponse&lt;JsonNode&gt; response;\r\n        try (UnirestInstance service = Unirest.spawnInstance()) {\r\n            response = service.post(apiBaseUrl + &quot;/api/v1/openOrder.do&quot;)\r\n                    .body(body)\r\n                    .asJson();\r\n        }\r\n\r\n        if (response.getBody() == null) {\r\n            // BUSINESS LOGIC\r\n        }\r\n\r\n        // BUSINESS LOGIC\r\n    }\r\n\r\nI created a test for this service,  my goal is to test the business logic without making a real HTTP call to the 3rd party service. Basically i want to test if the request is created correctly and if the output is correct.\r\n\r\nI&#39;m struggling to find the best way to handle this scenario with Spring Boot. I know how to mock the entire method but i would like to mock only the HTTP call part.","title":"Test service with 3rd party API calls","body":"<p>I have a service with business logic and http calls (using Unirest) to a third party service.</p>\n<p>public PaymentLinkResult generatePaymentLink(PaymentLinkParams paymentLinkParams) throws GatewayException {</p>\n<pre><code>    // BUSINESS LOGIC\n\n    HttpResponse&lt;JsonNode&gt; response;\n    try (UnirestInstance service = Unirest.spawnInstance()) {\n        response = service.post(apiBaseUrl + &quot;/api/v1/openOrder.do&quot;)\n                .body(body)\n                .asJson();\n    }\n\n    if (response.getBody() == null) {\n        // BUSINESS LOGIC\n    }\n\n    // BUSINESS LOGIC\n}\n</code></pre>\n<p>I created a test for this service,  my goal is to test the business logic without making a real HTTP call to the 3rd party service. Basically i want to test if the request is created correctly and if the output is correct.</p>\n<p>I'm struggling to find the best way to handle this scenario with Spring Boot. I know how to mock the entire method but i would like to mock only the HTTP call part.</p>\n"},{"tags":["java","build.gradle","android-manifest","onesignal","android-12"],"comments":[{"owner":{"account_id":22259144,"reputation":131,"user_id":16490858,"display_name":"Dejo"},"score":0,"creation_date":1634341582,"post_id":69591457,"comment_id":123006703,"body_markdown":"I set target sdk for 30\nI go to the merged manifest: Merged Manifest in Android Studio. I find if there&#39;s any activity, service, receiver or provider that does not have exported set. I set target sdk for 31 and all is work!!! :)","body":"I set target sdk for 30 I go to the merged manifest: Merged Manifest in Android Studio. I find if there&#39;s any activity, service, receiver or provider that does not have exported set. I set target sdk for 31 and all is work!!! :)"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1634374749,"post_id":69591457,"comment_id":123010822,"body_markdown":"You know that a used library can cause this?","body":"You know that a used library can cause this?"}],"owner":{"account_id":22259144,"reputation":131,"user_id":16490858,"display_name":"Dejo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":872,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1634406487,"creation_date":1634339498,"question_id":69591457,"body_markdown":"I integrated OneSignal push notification into my app and everything worked perfectly well until I upgraded to Android 12 (31). When I upgraded, AndroidStudio reports this error to me, I really don&#39;t know what I need to do to avoid it:\r\n\r\n```\r\nManifest merger failed : android:exported needs to be explicitly specified\r\nfor &lt;service&gt;. Apps targeting Android 12 and higher are required to specify\r\nan explicit value for `android:exported` when the corresponding component\r\nhas an intent filter defined.\r\n```\r\n\r\n**AndroidManifest:**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    package=&quot;com.my.app&quot;&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;com.android.vending.BILLING&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.REQUEST_IGNORE_BATTERY_OPTIMIZATIONS&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;oppo.permission.OPPO_COMPONENT_SAFE&quot;/&gt;\r\n    &lt;uses-permission android:name=&quot;com.huawei.permission.external_app_settings.USE_COMPONENT&quot;/&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.RECEIVE_BOOT_COMPLETED&quot; /&gt;\r\n\r\n    &lt;application\r\n        android:name=&quot;com.my.app.MainApplication&quot;\r\n        android:allowBackup=&quot;true&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:networkSecurityConfig=&quot;@xml/network_security_config&quot;\r\n        android:theme=&quot;@style/AppTheme&quot;\r\n        tools:ignore=&quot;GoogleAppIndexingWarning&quot;&gt;\r\n\r\n        &lt;meta-data\r\n            android:name=&quot;com.google.android.gms.ads.APPLICATION_ID&quot;\r\n            android:value=&quot;@string/admob_app_ID&quot; /&gt;\r\n\r\n        &lt;activity\r\n            android:name=&quot;com.my.app.activity.StepActivity&quot;\r\n            android:screenOrientation=&quot;portrait&quot;\r\n            android:theme=&quot;@style/Splash&quot;&gt;\r\n        &lt;/activity&gt;\r\n        &lt;activity android:name=&quot;com.my.app.activity.PrivacyPolicyActivity&quot;\r\n            android:screenOrientation=&quot;portrait&quot;/&gt;\r\n        &lt;activity android:name=&quot;com.my.app.activity.TermsToUseActivity&quot;\r\n            android:screenOrientation=&quot;portrait&quot;/&gt;\r\n        &lt;activity android:name=&quot;com.my.app.activity.SplashActivity&quot;\r\n            android:screenOrientation=&quot;portrait&quot;\r\n            android:exported=&quot;true&quot; \r\n            tools:node=&quot;merge&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n        &lt;activity android:name=&quot;com.my.app.activity.MainActivity&quot;\r\n            android:screenOrientation=&quot;portrait&quot;/&gt;\r\n        &lt;activity android:name=&quot;com.my.app.activity.PremiumActivity&quot;\r\n            android:screenOrientation=&quot;portrait&quot;/&gt;\r\n        &lt;activity android:name=&quot;com.my.app.activity.ChooseServerActivity&quot;\r\n            android:screenOrientation=&quot;portrait&quot;/&gt;\r\n\r\n        &lt;service\r\n            android:name=&quot;com.my.app.OneSignal.MyNotificationExtenderService&quot;\r\n            android:exported=&quot;true&quot;\r\n            tools:node=&quot;merge&quot;\r\n            android:permission=&quot;android.permission.BIND_JOB_SERVICE&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;com.onesignal.NotificationExtender&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/service&gt;\r\n\r\n        &lt;service\r\n            android:name=&quot;com.my.app.service.BackgroundJobService&quot;\r\n            android:permission=&quot;android.permission.BIND_JOB_SERVICE&quot;\r\n            android:enabled=&quot;true&quot;\r\n            android:exported=&quot;true&quot;\r\n            tools:node=&quot;merge&quot;/&gt;\r\n\r\n        &lt;service\r\n            android:name=&quot;com.my.app.service.MyService&quot;\r\n            android:exported=&quot;false&quot;\r\n            tools:node=&quot;merge&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;androidsrc.intent.action.PICK_PLUGIN&quot; /&gt;\r\n                &lt;category android:name=&quot;androidsrc.intent.category.ADD_PLUGIN&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/service&gt;\r\n\r\n        &lt;receiver android:name=&quot;com.my.app.service.BootCompletedReceiver&quot;\r\n            android:enabled=&quot;true&quot;\r\n            android:exported=&quot;true&quot;\r\n            tools:node=&quot;merge&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.BOOT_COMPLETED&quot;/&gt;\r\n                &lt;action android:name=&quot;android.intent.action.QUICKBOOT_POWERON&quot;/&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/receiver&gt;\r\n    &lt;/application&gt;\r\n&lt;/manifest&gt;\r\n\r\n**build.gradle (app):**\r\n\r\n        manifestPlaceholders = [onesignal_app_id               : &quot;xxxxx-xxxx-xxxx-xxx-xxxxxxxx&quot;,\r\n                                onesignal_google_project_number: &quot;REMOTE&quot;]\r\n\r\n","title":"&quot;android:exported needs to be explicitly specified&quot; on Android 12","body":"<p>I integrated OneSignal push notification into my app and everything worked perfectly well until I upgraded to Android 12 (31). When I upgraded, AndroidStudio reports this error to me, I really don't know what I need to do to avoid it:</p>\n<pre><code>Manifest merger failed : android:exported needs to be explicitly specified\nfor &lt;service&gt;. Apps targeting Android 12 and higher are required to specify\nan explicit value for `android:exported` when the corresponding component\nhas an intent filter defined.\n</code></pre>\n<p><strong>AndroidManifest:</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\nxmlns:tools=&quot;http://schemas.android.com/tools&quot;\npackage=&quot;com.my.app&quot;&gt;\n\n&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n&lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\n&lt;uses-permission android:name=&quot;com.android.vending.BILLING&quot; /&gt;\n&lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot; /&gt;\n&lt;uses-permission android:name=&quot;android.permission.REQUEST_IGNORE_BATTERY_OPTIMIZATIONS&quot; /&gt;\n&lt;uses-permission android:name=&quot;oppo.permission.OPPO_COMPONENT_SAFE&quot;/&gt;\n&lt;uses-permission android:name=&quot;com.huawei.permission.external_app_settings.USE_COMPONENT&quot;/&gt;\n&lt;uses-permission android:name=&quot;android.permission.RECEIVE_BOOT_COMPLETED&quot; /&gt;\n\n&lt;application\n    android:name=&quot;com.my.app.MainApplication&quot;\n    android:allowBackup=&quot;true&quot;\n    android:icon=&quot;@mipmap/ic_launcher&quot;\n    android:label=&quot;@string/app_name&quot;\n    android:supportsRtl=&quot;true&quot;\n    android:networkSecurityConfig=&quot;@xml/network_security_config&quot;\n    android:theme=&quot;@style/AppTheme&quot;\n    tools:ignore=&quot;GoogleAppIndexingWarning&quot;&gt;\n\n    &lt;meta-data\n        android:name=&quot;com.google.android.gms.ads.APPLICATION_ID&quot;\n        android:value=&quot;@string/admob_app_ID&quot; /&gt;\n\n    &lt;activity\n        android:name=&quot;com.my.app.activity.StepActivity&quot;\n        android:screenOrientation=&quot;portrait&quot;\n        android:theme=&quot;@style/Splash&quot;&gt;\n    &lt;/activity&gt;\n    &lt;activity android:name=&quot;com.my.app.activity.PrivacyPolicyActivity&quot;\n        android:screenOrientation=&quot;portrait&quot;/&gt;\n    &lt;activity android:name=&quot;com.my.app.activity.TermsToUseActivity&quot;\n        android:screenOrientation=&quot;portrait&quot;/&gt;\n    &lt;activity android:name=&quot;com.my.app.activity.SplashActivity&quot;\n        android:screenOrientation=&quot;portrait&quot;\n        android:exported=&quot;true&quot; \n        tools:node=&quot;merge&quot;&gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n            &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n        &lt;/intent-filter&gt;\n    &lt;/activity&gt;\n    &lt;activity android:name=&quot;com.my.app.activity.MainActivity&quot;\n        android:screenOrientation=&quot;portrait&quot;/&gt;\n    &lt;activity android:name=&quot;com.my.app.activity.PremiumActivity&quot;\n        android:screenOrientation=&quot;portrait&quot;/&gt;\n    &lt;activity android:name=&quot;com.my.app.activity.ChooseServerActivity&quot;\n        android:screenOrientation=&quot;portrait&quot;/&gt;\n\n    &lt;service\n        android:name=&quot;com.my.app.OneSignal.MyNotificationExtenderService&quot;\n        android:exported=&quot;true&quot;\n        tools:node=&quot;merge&quot;\n        android:permission=&quot;android.permission.BIND_JOB_SERVICE&quot;&gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=&quot;com.onesignal.NotificationExtender&quot; /&gt;\n        &lt;/intent-filter&gt;\n    &lt;/service&gt;\n\n    &lt;service\n        android:name=&quot;com.my.app.service.BackgroundJobService&quot;\n        android:permission=&quot;android.permission.BIND_JOB_SERVICE&quot;\n        android:enabled=&quot;true&quot;\n        android:exported=&quot;true&quot;\n        tools:node=&quot;merge&quot;/&gt;\n\n    &lt;service\n        android:name=&quot;com.my.app.service.MyService&quot;\n        android:exported=&quot;false&quot;\n        tools:node=&quot;merge&quot;&gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=&quot;androidsrc.intent.action.PICK_PLUGIN&quot; /&gt;\n            &lt;category android:name=&quot;androidsrc.intent.category.ADD_PLUGIN&quot; /&gt;\n        &lt;/intent-filter&gt;\n    &lt;/service&gt;\n\n    &lt;receiver android:name=&quot;com.my.app.service.BootCompletedReceiver&quot;\n        android:enabled=&quot;true&quot;\n        android:exported=&quot;true&quot;\n        tools:node=&quot;merge&quot;&gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=&quot;android.intent.action.BOOT_COMPLETED&quot;/&gt;\n            &lt;action android:name=&quot;android.intent.action.QUICKBOOT_POWERON&quot;/&gt;\n        &lt;/intent-filter&gt;\n    &lt;/receiver&gt;\n&lt;/application&gt;\n</code></pre>\n\n<p><strong>build.gradle (app):</strong></p>\n<pre><code>    manifestPlaceholders = [onesignal_app_id               : &quot;xxxxx-xxxx-xxxx-xxx-xxxxxxxx&quot;,\n                            onesignal_google_project_number: &quot;REMOTE&quot;]\n</code></pre>\n"},{"tags":["java","json","protocol-buffers"],"comments":[{"owner":{"account_id":11683,"reputation":1438189,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1634238482,"post_id":69576110,"comment_id":122978481,"body_markdown":"I suspect the *simplest* option would be to output the JSON, parse it back as a JSONObject or similar, add the extra fields, then serialize back out to JSON. It wouldn&#39;t be efficient, but it would be really simple to do. How crucial is efficiency to you?","body":"I suspect the <i>simplest</i> option would be to output the JSON, parse it back as a JSONObject or similar, add the extra fields, then serialize back out to JSON. It wouldn&#39;t be efficient, but it would be really simple to do. How crucial is efficiency to you?"},{"owner":{"account_id":3379176,"reputation":646,"user_id":2836638,"accept_rate":17,"display_name":"preston.m.price"},"score":0,"creation_date":1634239178,"post_id":69576110,"comment_id":122978721,"body_markdown":"Efficiency is critical, this approach is not an option.","body":"Efficiency is critical, this approach is not an option."},{"owner":{"account_id":11683,"reputation":1438189,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1634239436,"post_id":69576110,"comment_id":122978802,"body_markdown":"Please specify that in the question then. (Are there any other restrictions which would make entirely-reasonable answers unsuitable for your purposes?)","body":"Please specify that in the question then. (Are there any other restrictions which would make entirely-reasonable answers unsuitable for your purposes?)"}],"answers":[{"tags":[],"owner":{"account_id":301516,"reputation":34141,"user_id":609290,"accept_rate":62,"display_name":"DazWilkin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634406329,"creation_date":1634406329,"answer_id":69598133,"question_id":69576110,"body_markdown":"Your JSON type is a superset of your proto messages and (since the proto-generated classes represent the messages), a superset of the protoc-generated classes.\r\n\r\nIt is considered good practice to implement app wrappers around protoc-generated classes and this is what you should do.\r\n\r\nThese app wrappers would include the metadata and methods to/from JSON and methods to/from Protobuf class.\r\n\r\nEven when using metadata with Protobuf requests and responses, this is always managed out-of-band of the underlying messages because, as it should, metadata is not generally part of the message that it describes.","title":"How to serialize Protobuf to JSON with additional fields?","body":"<p>Your JSON type is a superset of your proto messages and (since the proto-generated classes represent the messages), a superset of the protoc-generated classes.</p>\n<p>It is considered good practice to implement app wrappers around protoc-generated classes and this is what you should do.</p>\n<p>These app wrappers would include the metadata and methods to/from JSON and methods to/from Protobuf class.</p>\n<p>Even when using metadata with Protobuf requests and responses, this is always managed out-of-band of the underlying messages because, as it should, metadata is not generally part of the message that it describes.</p>\n"}],"owner":{"account_id":3379176,"reputation":646,"user_id":2836638,"accept_rate":17,"display_name":"preston.m.price"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":559,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1634406329,"creation_date":1634238341,"question_id":69576110,"body_markdown":"In Java, I am looking for a way to serialize a protobuf object to JSON in a way that I can add some additional metadata to the output.\r\n\r\nFor example if my protobuf object looks like:\r\n```\r\nmessage ToBeSerialized {\r\n  string value_one = 1;\r\n  string value_two = 2;\r\n}\r\n```\r\n\r\nAnd I want my output JSON to look like:\r\n```\r\n{\r\n  &quot;value_one&quot;: &quot;some_value&quot;,\r\n  &quot;value_two&quot;: &quot;other_value&quot;,\r\n  &quot;additional_field_1&quot;: &quot;my_value&quot;,\r\n  &quot;additional_field_2&quot;: &quot;my_other_value&quot;\r\n}\r\n```\r\n\r\nThe JsonFormat does not appear to support my use case as there is no way to add additional/arbitrary fields to the output.\r\n\r\nI could re-implement JsonFormat, but ew... There must be a simple way to add some additional metadata without re-implementing all that code.\r\nI&#39;ve also considered crafting a new protobuf object with the additional fields I want and using an `Any` field to store my base message, but that also seems like more work than it should take.\r\nI&#39;m hoping I&#39;m overlooking something easy/obvious.\r\n\r\nEfficiency is critical. For example writing to JSON, then reading back into a Map, adding the fields, and then re-serializing to JSON is not an option.","title":"How to serialize Protobuf to JSON with additional fields?","body":"<p>In Java, I am looking for a way to serialize a protobuf object to JSON in a way that I can add some additional metadata to the output.</p>\n<p>For example if my protobuf object looks like:</p>\n<pre><code>message ToBeSerialized {\n  string value_one = 1;\n  string value_two = 2;\n}\n</code></pre>\n<p>And I want my output JSON to look like:</p>\n<pre><code>{\n  &quot;value_one&quot;: &quot;some_value&quot;,\n  &quot;value_two&quot;: &quot;other_value&quot;,\n  &quot;additional_field_1&quot;: &quot;my_value&quot;,\n  &quot;additional_field_2&quot;: &quot;my_other_value&quot;\n}\n</code></pre>\n<p>The JsonFormat does not appear to support my use case as there is no way to add additional/arbitrary fields to the output.</p>\n<p>I could re-implement JsonFormat, but ew... There must be a simple way to add some additional metadata without re-implementing all that code.\nI've also considered crafting a new protobuf object with the additional fields I want and using an <code>Any</code> field to store my base message, but that also seems like more work than it should take.\nI'm hoping I'm overlooking something easy/obvious.</p>\n<p>Efficiency is critical. For example writing to JSON, then reading back into a Map, adding the fields, and then re-serializing to JSON is not an option.</p>\n"},{"tags":["java","swing"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":2,"creation_date":1634221014,"post_id":69571861,"comment_id":122971513,"body_markdown":"Create an ArrayList of components you want to validate. Then you iterate through the ArrayList checking if each component. When you find an empty component you return false.","body":"Create an ArrayList of components you want to validate. Then you iterate through the ArrayList checking if each component. When you find an empty component you return false."},{"owner":{"account_id":22905292,"reputation":78,"user_id":17043451,"display_name":"user192837"},"score":1,"creation_date":1634223365,"post_id":69571861,"comment_id":122972576,"body_markdown":"Could you write your own version of the code? Each component has its own version of the check.","body":"Could you write your own version of the code? Each component has its own version of the check."},{"owner":{"account_id":95999,"reputation":7037,"user_id":261156,"display_name":"Catalina Island"},"score":1,"creation_date":1634406572,"post_id":69571861,"comment_id":123018126,"body_markdown":"@user192837 Yes, like [this](https://stackoverflow.com/a/69598115/261156); you&#39;ll find that you can reuse verifiers for common field types.","body":"@user192837 Yes, like <a href=\"https://stackoverflow.com/a/69598115/261156\">this</a>; you&#39;ll find that you can reuse verifiers for common field types."}],"answers":[{"tags":[],"owner":{"account_id":2507550,"reputation":10975,"user_id":2180785,"accept_rate":90,"display_name":"Frakcool"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1634228584,"creation_date":1634228584,"answer_id":69574145,"question_id":69571861,"body_markdown":"You could do as @camickr mentioned in a comment above:\r\n\r\n&gt; Create an ArrayList of components you want to validate. Then you iterate through the ArrayList checking if each component. When you find an empty component you return false.\r\n\r\nAnd you could check for the type of field they are and then check if they are empty / not selected.\r\n\r\n    private boolean isFormValid(List&lt;JComponent&gt; components) {\r\n        for (int i = 0; i &lt; components.size(); i++) {\r\n            if (components.get(i) instanceof JTextField) {\r\n                if (components.get(i).getText().isEmpty()) {\r\n                    return false;\r\n                }\r\n            }\r\n            if (components.get(i) instanceof JComboBox) {\r\n                if (components.get(i).getSelectedItem() == null) {\r\n                    return false;\r\n                }\r\n            }\r\n            // Add checks for other components you want to check here\r\n        }\r\n        return true;\r\n    }","title":"Check if a Swing form does not contain empty fields","body":"<p>You could do as @camickr mentioned in a comment above:</p>\n<blockquote>\n<p>Create an ArrayList of components you want to validate. Then you iterate through the ArrayList checking if each component. When you find an empty component you return false.</p>\n</blockquote>\n<p>And you could check for the type of field they are and then check if they are empty / not selected.</p>\n<pre><code>private boolean isFormValid(List&lt;JComponent&gt; components) {\n    for (int i = 0; i &lt; components.size(); i++) {\n        if (components.get(i) instanceof JTextField) {\n            if (components.get(i).getText().isEmpty()) {\n                return false;\n            }\n        }\n        if (components.get(i) instanceof JComboBox) {\n            if (components.get(i).getSelectedItem() == null) {\n                return false;\n            }\n        }\n        // Add checks for other components you want to check here\n    }\n    return true;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":95999,"reputation":7037,"user_id":261156,"display_name":"Catalina Island"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1634406160,"creation_date":1634406160,"answer_id":69598115,"question_id":69571861,"body_markdown":"&gt;Polymorphism should be used.\r\n\r\nFor that you&#39;ll need an abstract verifier. [_Validating Input_][1] shows how to write an [`InputVerifier`][2] for each type of field in each of your forms. Then each concrete `InputVerifier` will have a `verify()` that you can invoke on each `JComponent` in the form. When it&#39;s time to verify the form, given a `List&lt;JComponent&gt; list`,  you can verify the entire form like this:\r\n\r\n    boolean b = true;\r\n    for (JComponent field : list) {\r\n        b &amp;= field.getInputVerifier().verify(field);\r\n    }\r\n    b &amp;= someOtherFormLevelPredicate;\r\n    \r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/uiswing/misc/focus.html#inputVerification\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/javax/swing/InputVerifier.html\r\n","title":"Check if a Swing form does not contain empty fields","body":"<blockquote>\n<p>Polymorphism should be used.</p>\n</blockquote>\n<p>For that you'll need an abstract verifier. <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/misc/focus.html#inputVerification\" rel=\"nofollow noreferrer\"><em>Validating Input</em></a> shows how to write an <a href=\"https://docs.oracle.com/javase/8/docs/api/javax/swing/InputVerifier.html\" rel=\"nofollow noreferrer\"><code>InputVerifier</code></a> for each type of field in each of your forms. Then each concrete <code>InputVerifier</code> will have a <code>verify()</code> that you can invoke on each <code>JComponent</code> in the form. When it's time to verify the form, given a <code>List&lt;JComponent&gt; list</code>,  you can verify the entire form like this:</p>\n<pre><code>boolean b = true;\nfor (JComponent field : list) {\n    b &amp;= field.getInputVerifier().verify(field);\n}\nb &amp;= someOtherFormLevelPredicate;\n\n</code></pre>\n"}],"owner":{"account_id":22905292,"reputation":78,"user_id":17043451,"display_name":"user192837"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":190,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":69598115,"answer_count":2,"score":2,"last_activity_date":1634406160,"creation_date":1634219198,"question_id":69571861,"body_markdown":"I want to determine if a form containing: JTextField, JDatePicker, JComboBox, JSpinner, does not contain empty fields.\r\nI have several forms with different fields that I would like to be evaluated with a common method without managing the order of the fields to work with any sequence of fields.\r\n\r\nMy purpose would be to create a method like:\r\n```\r\nif method (field1, field2, field3) {\r\n...\r\n}\r\nif method (field4, field5) {\r\n...\r\n}\r\n```\r\n\r\nI don&#39;t want to do multiple methods for multiple forms.","title":"Check if a Swing form does not contain empty fields","body":"<p>I want to determine if a form containing: JTextField, JDatePicker, JComboBox, JSpinner, does not contain empty fields.\nI have several forms with different fields that I would like to be evaluated with a common method without managing the order of the fields to work with any sequence of fields.</p>\n<p>My purpose would be to create a method like:</p>\n<pre><code>if method (field1, field2, field3) {\n...\n}\nif method (field4, field5) {\n...\n}\n</code></pre>\n<p>I don't want to do multiple methods for multiple forms.</p>\n"},{"tags":["java","gradle","sonarqube"],"comments":[{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1633826323,"post_id":69511177,"comment_id":122863854,"body_markdown":"Is there no way you could upgrade Gradle? The current version is 7.2....","body":"Is there no way you could upgrade Gradle? The current version is 7.2...."},{"owner":{"account_id":14649166,"reputation":514,"user_id":10579642,"display_name":"dna"},"score":0,"creation_date":1633858077,"post_id":69511177,"comment_id":122867993,"body_markdown":"No for now I do not want to update the version of gradle","body":"No for now I do not want to update the version of gradle"},{"owner":{"account_id":11977399,"reputation":637,"user_id":8764150,"display_name":"Djordje Nedovic"},"score":0,"creation_date":1634114657,"post_id":69511177,"comment_id":122936535,"body_markdown":"@dna, maybe you should use, ib this case, the lover version of SonarQube?","body":"@dna, maybe you should use, ib this case, the lover version of SonarQube?"}],"answers":[{"tags":[],"owner":{"account_id":22868461,"reputation":177,"user_id":17011860,"display_name":"Asif A Fasih"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1633832451,"creation_date":1633832451,"answer_id":69511840,"question_id":69511177,"body_markdown":"The minimum version of Gradle that supports Java 11 is `5.0`.\r\n\r\nYou would need to upgrade to version `7.0` or above for [Android][1].\r\n\r\nSource: https://docs.gradle.org/current/userguide/compatibility.html \r\n\r\n\r\n  [1]: https://docs.gradle.org/current/userguide/compatibility.html#android","title":"Gradle 4 Java 11","body":"<p>The minimum version of Gradle that supports Java 11 is <code>5.0</code>.</p>\n<p>You would need to upgrade to version <code>7.0</code> or above for <a href=\"https://docs.gradle.org/current/userguide/compatibility.html#android\" rel=\"nofollow noreferrer\">Android</a>.</p>\n<p>Source: <a href=\"https://docs.gradle.org/current/userguide/compatibility.html\" rel=\"nofollow noreferrer\">https://docs.gradle.org/current/userguide/compatibility.html</a></p>\n"},{"tags":[],"owner":{"account_id":4567592,"reputation":4306,"user_id":3708208,"accept_rate":75,"display_name":"Simon Schrottner"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634405348,"creation_date":1634405348,"answer_id":69598003,"question_id":69511177,"body_markdown":"as @Asif A Fasih mentioned, Gradle added official support for Java 11 with Gradle `5.0` - but they also provided a patch version for `4.10` which works with Java 11 - `4.10.3` \r\n\r\n```\r\n------------------------------------------------------------\r\nGradle 4.10.3\r\n------------------------------------------------------------\r\n\r\nBuild time:   2018-12-05 00:50:54 UTC\r\nRevision:     e76905e3a1034e6f724566aeb985621347ff43bc\r\n\r\nKotlin DSL:   1.0-rc-6\r\nKotlin:       1.2.61\r\nGroovy:       2.4.15\r\nAnt:          Apache Ant(TM) version 1.9.11 compiled on March 23 2018\r\nJVM:          11.0.6 (SAP SE 11.0.6+10-LTS-sapmachine)\r\nOS:           Linux 5.4.0-88-generic amd64\r\n```\r\n\r\ni am sadly running this setup on multiple projects","title":"Gradle 4 Java 11","body":"<p>as @Asif A Fasih mentioned, Gradle added official support for Java 11 with Gradle <code>5.0</code> - but they also provided a patch version for <code>4.10</code> which works with Java 11 - <code>4.10.3</code></p>\n<pre><code>------------------------------------------------------------\nGradle 4.10.3\n------------------------------------------------------------\n\nBuild time:   2018-12-05 00:50:54 UTC\nRevision:     e76905e3a1034e6f724566aeb985621347ff43bc\n\nKotlin DSL:   1.0-rc-6\nKotlin:       1.2.61\nGroovy:       2.4.15\nAnt:          Apache Ant(TM) version 1.9.11 compiled on March 23 2018\nJVM:          11.0.6 (SAP SE 11.0.6+10-LTS-sapmachine)\nOS:           Linux 5.4.0-88-generic amd64\n</code></pre>\n<p>i am sadly running this setup on multiple projects</p>\n"}],"owner":{"account_id":14649166,"reputation":514,"user_id":10579642,"display_name":"dna"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2270,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1634405348,"creation_date":1633821376,"question_id":69511177,"body_markdown":"I have an Android project with Gradle 4 that Im trying to analyze with Sonar. \r\nThe sonar tasks must run with Java 11 so I configure the java version on 11 in my CI of Azure Devops but I receive this error:\r\n\r\nCould not determine java version from &#39;11.0.12&#39;.\r\n\r\nI saw that Gradle 4 is not compatible with Java 11 and that version 9 of sonar is not compatible with Java 8.\r\n\r\nHow to Perform Sonar Analysis on a Gradle 4 Project","title":"Gradle 4 Java 11","body":"<p>I have an Android project with Gradle 4 that Im trying to analyze with Sonar.\nThe sonar tasks must run with Java 11 so I configure the java version on 11 in my CI of Azure Devops but I receive this error:</p>\n<p>Could not determine java version from '11.0.12'.</p>\n<p>I saw that Gradle 4 is not compatible with Java 11 and that version 9 of sonar is not compatible with Java 8.</p>\n<p>How to Perform Sonar Analysis on a Gradle 4 Project</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":4501373,"reputation":954,"user_id":3659807,"display_name":"Omar Abdel Bari"},"score":0,"creation_date":1634403002,"post_id":69597654,"comment_id":123017199,"body_markdown":"You have to unwrap type `Optional&lt;Float&gt;` to the actual value so it&#39;s a `float`. See [Optional doc](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Optional.html) for details.","body":"You have to unwrap type <code>Optional&lt;Float&gt;</code> to the actual value so it&#39;s a <code>float</code>. See <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Optional.html\" rel=\"nofollow noreferrer\">Optional doc</a> for details."}],"answers":[{"tags":[],"owner":{"account_id":2818342,"reputation":299866,"user_id":2422776,"display_name":"Mureinik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1634404489,"creation_date":1634403165,"answer_id":69597702,"question_id":69597654,"body_markdown":"The error really says it all - you can&#39;t divide a `float` by an `Optioanl&lt;Float&gt;`, you need to convert it to a `float` first. E.g., by using `orElse`:\r\n\r\n```\r\nfloat sumOfWheightes =\r\n    wheightes.stream().reduce((prev, next) -&gt; prev + next).orElse(1.0f);\r\n```","title":"The operator / is undefined for the argument type(s) float, Optional&lt;Float&gt;","body":"<p>The error really says it all - you can't divide a <code>float</code> by an <code>Optioanl&lt;Float&gt;</code>, you need to convert it to a <code>float</code> first. E.g., by using <code>orElse</code>:</p>\n<pre><code>float sumOfWheightes =\n    wheightes.stream().reduce((prev, next) -&gt; prev + next).orElse(1.0f);\n</code></pre>\n"}],"owner":{"account_id":22982780,"reputation":79,"user_id":17109424,"display_name":"Luiz Portela"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":495,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":69597702,"answer_count":1,"score":2,"last_activity_date":1634404489,"creation_date":1634402870,"question_id":69597654,"body_markdown":"I&#39;m new in Java Language and I was trying to calculate a weighted average:\r\n\r\n```\r\nimport java.util.ArrayList;\r\nimport java.util.Optional;\r\nimport java.util.Scanner;\r\n\r\npublic class App {\r\n    public static void main(String[] args) throws Exception {\r\n        Scanner keyboard = new Scanner(System.in);\r\n        ArrayList&lt;Float&gt; grades = new ArrayList&lt;Float&gt;();\r\n        ArrayList&lt;Float&gt; wheightes = new ArrayList&lt;Float&gt;();\r\n        int count = 0;\r\n        while(count &lt; 3) {\r\n          float grade = keyboard.nextFloat();\r\n          grades.add(grade);\r\n          count += 1;\r\n        }\r\n        System.out.println(&quot;Digite 1 para m&#233;dia ponderada e 2 para aritm&#233;tica&quot;);\r\n        int whichAverage = keyboard.nextInt();\r\n        switch(whichAverage){\r\n          case 1:\r\n          float average = 0;\r\n          for (int i = 0; i &lt; grades.size(); i++) {\r\n            average += grades.get(i);\r\n          }\r\n          System.out.println(&quot;A m&#233;dia aritm&#233;tica &#233; &quot; + average / grades.size());\r\n          case 2:\r\n          System.out.println(&quot;Informe os 3 pesos:&quot;);\r\n         float weightedAverage = 0;\r\n          for (int i = 0; i &lt; 3; i++) {\r\n            float wheight = keyboard.nextFloat();\r\n            wheightes.add(wheight);\r\n            weightedAverage += grades.get(i) * wheightes.get(i);\r\n          }\r\n          Optional&lt;Float&gt; sumOfWheightes = wheightes.stream().reduce((prev, next) -&gt; prev + next);\r\n          System.out.println(&quot;A m&#233;dia ponderada &#233; &quot; + weightedAverage / sumOfWheightes);\r\n          default:\r\n          System.out.println(&quot;Digite 1 ou 2&quot;);\r\n        }\r\n        keyboard.close();\r\n    }\r\n}\r\n```\r\nI tried to do a reduce:\r\n\r\n```\r\nOptional&lt;Float&gt; sumOfWheightes = wheightes.stream().reduce((prev, next) -&gt; prev + next);\r\n```\r\n\r\nThen I tried to divide a `Optional&lt;Float&gt;` with a float type:\r\n\r\n```\r\nSystem.out.println(&quot;A m&#233;dia ponderada &#233; &quot; + weightedAverage / sumOfWheightes);\r\n```\r\n\r\nThe error is:\r\n\r\n&gt; The operator / is undefined for the argument type(s) float, Optional\\&lt;Float&gt;\r\n\r\n\r\nHow can I do this division?","title":"The operator / is undefined for the argument type(s) float, Optional&lt;Float&gt;","body":"<p>I'm new in Java Language and I was trying to calculate a weighted average:</p>\n<pre><code>import java.util.ArrayList;\nimport java.util.Optional;\nimport java.util.Scanner;\n\npublic class App {\n    public static void main(String[] args) throws Exception {\n        Scanner keyboard = new Scanner(System.in);\n        ArrayList&lt;Float&gt; grades = new ArrayList&lt;Float&gt;();\n        ArrayList&lt;Float&gt; wheightes = new ArrayList&lt;Float&gt;();\n        int count = 0;\n        while(count &lt; 3) {\n          float grade = keyboard.nextFloat();\n          grades.add(grade);\n          count += 1;\n        }\n        System.out.println(&quot;Digite 1 para mdia ponderada e 2 para aritmtica&quot;);\n        int whichAverage = keyboard.nextInt();\n        switch(whichAverage){\n          case 1:\n          float average = 0;\n          for (int i = 0; i &lt; grades.size(); i++) {\n            average += grades.get(i);\n          }\n          System.out.println(&quot;A mdia aritmtica  &quot; + average / grades.size());\n          case 2:\n          System.out.println(&quot;Informe os 3 pesos:&quot;);\n         float weightedAverage = 0;\n          for (int i = 0; i &lt; 3; i++) {\n            float wheight = keyboard.nextFloat();\n            wheightes.add(wheight);\n            weightedAverage += grades.get(i) * wheightes.get(i);\n          }\n          Optional&lt;Float&gt; sumOfWheightes = wheightes.stream().reduce((prev, next) -&gt; prev + next);\n          System.out.println(&quot;A mdia ponderada  &quot; + weightedAverage / sumOfWheightes);\n          default:\n          System.out.println(&quot;Digite 1 ou 2&quot;);\n        }\n        keyboard.close();\n    }\n}\n</code></pre>\n<p>I tried to do a reduce:</p>\n<pre><code>Optional&lt;Float&gt; sumOfWheightes = wheightes.stream().reduce((prev, next) -&gt; prev + next);\n</code></pre>\n<p>Then I tried to divide a <code>Optional&lt;Float&gt;</code> with a float type:</p>\n<pre><code>System.out.println(&quot;A mdia ponderada  &quot; + weightedAverage / sumOfWheightes);\n</code></pre>\n<p>The error is:</p>\n<blockquote>\n<p>The operator / is undefined for the argument type(s) float, Optional&lt;Float&gt;</p>\n</blockquote>\n<p>How can I do this division?</p>\n"},{"tags":["java","amazon-web-services","amazon-cognito","aws-iot","aws-iot-greengrass"],"comments":[{"owner":{"account_id":6157899,"reputation":19801,"user_id":4800344,"display_name":"Ermiya Eskandary"},"score":0,"creation_date":1634415500,"post_id":69597865,"comment_id":123020111,"body_markdown":"So what line triggers the error?","body":"So what line triggers the error?"},{"owner":{"account_id":15718606,"reputation":704,"user_id":11342139,"display_name":"Angel Hadzhiev"},"score":0,"creation_date":1634415705,"post_id":69597865,"comment_id":123020162,"body_markdown":"@ErmiyaEskandary `awsIotMqttManager.connect()` triggers the error.","body":"@ErmiyaEskandary <code>awsIotMqttManager.connect()</code> triggers the error."},{"owner":{"account_id":6157899,"reputation":19801,"user_id":4800344,"display_name":"Ermiya Eskandary"},"score":0,"creation_date":1634415744,"post_id":69597865,"comment_id":123020169,"body_markdown":"Is this your full code? Please provide a a Minimal, Reproducible Example - https://stackoverflow.com/help/minimal-reproducible-example","body":"Is this your full code? Please provide a a Minimal, Reproducible Example - <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">stackoverflow.com/help/minimal-reproducible-example</a>"},{"owner":{"account_id":15718606,"reputation":704,"user_id":11342139,"display_name":"Angel Hadzhiev"},"score":0,"creation_date":1634415766,"post_id":69597865,"comment_id":123020174,"body_markdown":"@ErmiyaEskandary Everything related to the connection, yes.","body":"@ErmiyaEskandary Everything related to the connection, yes."},{"owner":{"account_id":6157899,"reputation":19801,"user_id":4800344,"display_name":"Ermiya Eskandary"},"score":0,"creation_date":1634416156,"post_id":69597865,"comment_id":123020260,"body_markdown":"Does this help? https://stackoverflow.com/a/48856472/4800344","body":"Does this help? <a href=\"https://stackoverflow.com/a/48856472/4800344\">stackoverflow.com/a/48856472/4800344</a>"},{"owner":{"account_id":15718606,"reputation":704,"user_id":11342139,"display_name":"Angel Hadzhiev"},"score":0,"creation_date":1634416824,"post_id":69597865,"comment_id":123020422,"body_markdown":"@ErmiyaEskandary No, I already tried it.","body":"@ErmiyaEskandary No, I already tried it."}],"owner":{"account_id":15718606,"reputation":704,"user_id":11342139,"display_name":"Angel Hadzhiev"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":602,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1634404283,"creation_date":1634404283,"question_id":69597865,"body_markdown":"I am currently developing a mobile application with Android Studio where this app should authenticate via AWS Cognito which I do with AWS Amplify. Amplify seems to be working fine but when I try to connect to the device shadow of my Greengrass thing, I get the error from the title of this question:\r\n\r\n&gt; AWSIotMqttManager: onFailure: connection failed.\r\n    MqttException (0) - java.io.IOException: Already connected\r\n\r\nIt is rather strange since I should not be connected since I have not called the connect command yet. \r\n\r\nHere is my code: \r\n\r\n    // Here I get the credentials which I later use to connect to AWSIoT    \r\n    CognitoCachingCredentialsProvider credentialsProvider = new CognitoCachingCredentialsProvider(\r\n                    getApplicationContext(), // get the context for the current activity\r\n                    &quot;*****&quot;, // your AWS Account id\r\n                    &quot;us-east-2:****************&quot;, // your identity pool id\r\n                    &quot;arn:aws:iam::*************-unauthRole&quot;,// an authenticated role ARN\r\n                    &quot;arn:aws:iam::*************-authRole&quot;, // an unauthenticated role ARN\r\n                    Regions.US_EAST_2 //Region\r\n            );\r\n        \r\n   \r\n\r\n            //Here I create the AWSIotMqttManager\r\n            AWSIotMqttManager awsIotMqttManager = new AWSIotMqttManager(uuidAsString,&quot;endpoint&quot;);\r\n           \r\n           //then I connect it\r\n           try {\r\n                awsIotMqttManager.connect(credentialsProvider, new AWSIotMqttClientStatusCallback() {\r\n                    @Override\r\n                    public void onStatusChanged(AWSIotMqttClientStatus status, Throwable throwable) {\r\n \r\n                        if (status == AWSIotMqttClientStatus.Connected) {\r\n    \r\n                            awsIotMqttManager.subscribeToTopic(&quot;$aws/things/thing/shadow/update/documents&quot;, AWSIotMqttQos.QOS0, new AWSIotMqttNewMessageCallback() {\r\n                                @Override\r\n                                public void onMessageArrived(String topic, byte[] data) {\r\n                                    System.out.println(&quot;TOPIC: &quot; + topic);\r\n                                    System.out.println(data);\r\n                                }\r\n                            });\r\n    \r\n                            String message = &quot;{ \\&quot;state\\&quot;: {\\&quot;desired\\&quot;: {\\&quot;message\\&quot;: \\&quot;Hello from ANDROID SDK\\&quot;} } }} }&quot;;\r\n                            awsIotMqttManager.publishString(message,&quot;$aws/things/thing/shadow/update&quot;,AWSIotMqttQos.QOS0);\r\n    \r\n                        }\r\n                        \r\n                 \r\n                });\r\n            }\r\n            catch (Exception e) {\r\n                Log.i(&quot;CHECK&quot;, e.toString());\r\n            }\r\n\r\n\r\n\r\n","title":"AWSIotMqttManager: onFailure: connection failed. MqttException (0) - java.io.IOException: Already connected","body":"<p>I am currently developing a mobile application with Android Studio where this app should authenticate via AWS Cognito which I do with AWS Amplify. Amplify seems to be working fine but when I try to connect to the device shadow of my Greengrass thing, I get the error from the title of this question:</p>\n<blockquote>\n<p>AWSIotMqttManager: onFailure: connection failed.\nMqttException (0) - java.io.IOException: Already connected</p>\n</blockquote>\n<p>It is rather strange since I should not be connected since I have not called the connect command yet.</p>\n<p>Here is my code:</p>\n<pre><code>// Here I get the credentials which I later use to connect to AWSIoT    \nCognitoCachingCredentialsProvider credentialsProvider = new CognitoCachingCredentialsProvider(\n                getApplicationContext(), // get the context for the current activity\n                &quot;*****&quot;, // your AWS Account id\n                &quot;us-east-2:****************&quot;, // your identity pool id\n                &quot;arn:aws:iam::*************-unauthRole&quot;,// an authenticated role ARN\n                &quot;arn:aws:iam::*************-authRole&quot;, // an unauthenticated role ARN\n                Regions.US_EAST_2 //Region\n        );\n    \n\n\n        //Here I create the AWSIotMqttManager\n        AWSIotMqttManager awsIotMqttManager = new AWSIotMqttManager(uuidAsString,&quot;endpoint&quot;);\n       \n       //then I connect it\n       try {\n            awsIotMqttManager.connect(credentialsProvider, new AWSIotMqttClientStatusCallback() {\n                @Override\n                public void onStatusChanged(AWSIotMqttClientStatus status, Throwable throwable) {\n\n                    if (status == AWSIotMqttClientStatus.Connected) {\n\n                        awsIotMqttManager.subscribeToTopic(&quot;$aws/things/thing/shadow/update/documents&quot;, AWSIotMqttQos.QOS0, new AWSIotMqttNewMessageCallback() {\n                            @Override\n                            public void onMessageArrived(String topic, byte[] data) {\n                                System.out.println(&quot;TOPIC: &quot; + topic);\n                                System.out.println(data);\n                            }\n                        });\n\n                        String message = &quot;{ \\&quot;state\\&quot;: {\\&quot;desired\\&quot;: {\\&quot;message\\&quot;: \\&quot;Hello from ANDROID SDK\\&quot;} } }} }&quot;;\n                        awsIotMqttManager.publishString(message,&quot;$aws/things/thing/shadow/update&quot;,AWSIotMqttQos.QOS0);\n\n                    }\n                    \n             \n            });\n        }\n        catch (Exception e) {\n            Log.i(&quot;CHECK&quot;, e.toString());\n        }\n</code></pre>\n"},{"tags":["java","gradle","compatibility","bytecode"],"comments":[{"owner":{"account_id":31011,"reputation":122006,"user_id":84889,"display_name":"Peter Niederwieser"},"score":0,"creation_date":1389298689,"post_id":21028438,"comment_id":31614102,"body_markdown":"To satisfy your requirement, you need to set `targetCompatibility`. But I don&#39;t think you can have source compat &gt; target compat, and you are right in that target compat defaults to source compat. Hence I&#39;d expect this to just work. Is this a multi-project build? Are you sure you are setting `sourceCompatibility` for the right project?","body":"To satisfy your requirement, you need to set <code>targetCompatibility</code>. But I don&#39;t think you can have source compat &gt; target compat, and you are right in that target compat defaults to source compat. Hence I&#39;d expect this to just work. Is this a multi-project build? Are you sure you are setting <code>sourceCompatibility</code> for the right project?"},{"owner":{"account_id":31011,"reputation":122006,"user_id":84889,"display_name":"Peter Niederwieser"},"score":0,"creation_date":1389298868,"post_id":21028438,"comment_id":31614215,"body_markdown":"An alternative is to run Gradle with Java 6. This will also catch cases where you inadvertently use some Java 7 API, and avoids an annoying javac warning that is issued whenever you use Java 7 compiler with source compat 6 and don&#39;t put the Java 6 standard library on the compiler&#39;s bootstrap class path.","body":"An alternative is to run Gradle with Java 6. This will also catch cases where you inadvertently use some Java 7 API, and avoids an annoying javac warning that is issued whenever you use Java 7 compiler with source compat 6 and don&#39;t put the Java 6 standard library on the compiler&#39;s bootstrap class path."},{"owner":{"account_id":31011,"reputation":122006,"user_id":84889,"display_name":"Peter Niederwieser"},"score":1,"creation_date":1389306106,"post_id":21028438,"comment_id":31618329,"body_markdown":"I exactly repeated your steps (also running Gradle with JDK7), and it works just fine for me (`major version: 50`). At this point it&#39;s likely that it&#39;s a problem with your build. For example, some build script or third-party plugin might overwrite your configuration. But without a reproducible example, it&#39;s hard to help any further. One thing you can try is to check what `compileJava.doFirst { println sourceCompatibility }` prints. Also try with a clean build, although it shouldn&#39;t be necessary.","body":"I exactly repeated your steps (also running Gradle with JDK7), and it works just fine for me (<code>major version: 50</code>). At this point it&#39;s likely that it&#39;s a problem with your build. For example, some build script or third-party plugin might overwrite your configuration. But without a reproducible example, it&#39;s hard to help any further. One thing you can try is to check what <code>compileJava.doFirst { println sourceCompatibility }</code> prints. Also try with a clean build, although it shouldn&#39;t be necessary."},{"owner":{"account_id":2215685,"reputation":2915,"user_id":1956359,"accept_rate":76,"display_name":"Joachim Kurz"},"score":0,"creation_date":1389350845,"post_id":21028438,"comment_id":31634758,"body_markdown":"@PeterNiederwieser Is there a way to tell the gradle-wrapper to always use Java 6 to run gradle? Cause it&#39;s not enough if I just change the default SDK on my machine and it works, but it still fails on my colleagues&#39; machines.","body":"@PeterNiederwieser Is there a way to tell the gradle-wrapper to always use Java 6 to run gradle? Cause it&#39;s not enough if I just change the default SDK on my machine and it works, but it still fails on my colleagues&#39; machines."},{"owner":{"account_id":2215685,"reputation":2915,"user_id":1956359,"accept_rate":76,"display_name":"Joachim Kurz"},"score":0,"creation_date":1389350977,"post_id":21028438,"comment_id":31634848,"body_markdown":"@PeterNiederwieser thanks for the tip about `compileJava.doFirst { println sourceCompatibility }`. I added that and all of the sub-projects have sourceCompatibility set to 1.7. I&#39;ll check whether it&#39;s due to any of the plugins I use.","body":"@PeterNiederwieser thanks for the tip about <code>compileJava.doFirst { println sourceCompatibility }</code>. I added that and all of the sub-projects have sourceCompatibility set to 1.7. I&#39;ll check whether it&#39;s due to any of the plugins I use."},{"owner":{"account_id":31011,"reputation":122006,"user_id":84889,"display_name":"Peter Niederwieser"},"score":1,"creation_date":1389351988,"post_id":21028438,"comment_id":31635475,"body_markdown":"It&#39;s printing `compileJava.sourceCompatibility`, which defaults to `project.sourceCompatibility` (which is what you&#39;ve been setting so far). You can try to set the task-level properties (these are the ones that ultimately matter) directly with `tasks.withType(JavaCompile) { sourceCompatibility = &quot;1.6&quot;; targetCompatibility = &quot;1.6&quot; }`, although usually that wouldn&#39;t be necessary.","body":"It&#39;s printing <code>compileJava.sourceCompatibility</code>, which defaults to <code>project.sourceCompatibility</code> (which is what you&#39;ve been setting so far). You can try to set the task-level properties (these are the ones that ultimately matter) directly with <code>tasks.withType(JavaCompile) { sourceCompatibility = &quot;1.6&quot;; targetCompatibility = &quot;1.6&quot; }</code>, although usually that wouldn&#39;t be necessary."},{"owner":{"account_id":2215685,"reputation":2915,"user_id":1956359,"accept_rate":76,"display_name":"Joachim Kurz"},"score":0,"creation_date":1389352837,"post_id":21028438,"comment_id":31636010,"body_markdown":"If I use the `tasks.withType ` snippet in the root build.gradle-file will this also affect the tasks defined by the sub projects&#39; build files or do I have to do it in each of the sub-build-files?","body":"If I use the <code>tasks.withType </code> snippet in the root build.gradle-file will this also affect the tasks defined by the sub projects&#39; build files or do I have to do it in each of the sub-build-files?"},{"owner":{"account_id":2215685,"reputation":2915,"user_id":1956359,"accept_rate":76,"display_name":"Joachim Kurz"},"score":0,"creation_date":1389354299,"post_id":21028438,"comment_id":31636831,"body_markdown":"@PeterNiederwieser I removed the usage of all plugins but the java plugins and now there is just basic stuff (repository and dependency declarations and some basic other tasks left, details see update above) left. Still the sourceCompatibility is set to 1.7. Any other ideas what could lead to it being set wrongly? Next, I&#39;ll try setting the sourceCompatibility on the JavaCompile tasks directly.","body":"@PeterNiederwieser I removed the usage of all plugins but the java plugins and now there is just basic stuff (repository and dependency declarations and some basic other tasks left, details see update above) left. Still the sourceCompatibility is set to 1.7. Any other ideas what could lead to it being set wrongly? Next, I&#39;ll try setting the sourceCompatibility on the JavaCompile tasks directly."},{"owner":{"account_id":2215685,"reputation":2915,"user_id":1956359,"accept_rate":76,"display_name":"Joachim Kurz"},"score":1,"creation_date":1389355053,"post_id":21028438,"comment_id":31637245,"body_markdown":"@PeterNiederwieser I added this `tasks.withType(JavaCompile) { sourceCompatibility = &quot;1.6&quot;; targetCompatibility = &quot;1.6&quot; }` to `allProjects{}` and it now works. Even with all the plugins in the original build script. If you add this as an answer I&#39;ll accept it. I&#39;m still curious why it didn&#39;t work via the project attributes, though.","body":"@PeterNiederwieser I added this <code>tasks.withType(JavaCompile) { sourceCompatibility = &quot;1.6&quot;; targetCompatibility = &quot;1.6&quot; }</code> to <code>allProjects{}</code> and it now works. Even with all the plugins in the original build script. If you add this as an answer I&#39;ll accept it. I&#39;m still curious why it didn&#39;t work via the project attributes, though."},{"owner":{"account_id":701757,"reputation":121151,"user_id":592139,"display_name":"Ian Roberts"},"score":0,"creation_date":1399226494,"post_id":21028438,"comment_id":35963853,"body_markdown":"You still need to set the bootstrap classpath so it compiles against the Java 6 class library (see e.g. [this answer](http://stackoverflow.com/a/16679733/592139)) otherwise you risk runtime errors if you accidentally call a method that was introduced by Java 7.  Or keep it simple and just build on 6 if you need to be compatible with 6.","body":"You still need to set the bootstrap classpath so it compiles against the Java 6 class library (see e.g. <a href=\"http://stackoverflow.com/a/16679733/592139\">this answer</a>) otherwise you risk runtime errors if you accidentally call a method that was introduced by Java 7.  Or keep it simple and just build on 6 if you need to be compatible with 6."},{"owner":{"account_id":1674439,"reputation":2685,"user_id":1540271,"display_name":"Marwin"},"score":0,"creation_date":1405935248,"post_id":21028438,"comment_id":38609670,"body_markdown":"We ran into the same situation today. It works for the root project but not for a subproject. When I print everything out: both `project.sourceCompatibility` and `rootProject.sourceCompatibility` appears to be set correctly but the task&#39;s `sourceCompatibility` is different. I am still curious what causes the setting to be overwritten.","body":"We ran into the same situation today. It works for the root project but not for a subproject. When I print everything out: both <code>project.sourceCompatibility</code> and <code>rootProject.sourceCompatibility</code> appears to be set correctly but the task&#39;s <code>sourceCompatibility</code> is different. I am still curious what causes the setting to be overwritten."},{"owner":{"account_id":1674439,"reputation":2685,"user_id":1540271,"display_name":"Marwin"},"score":0,"creation_date":1405936142,"post_id":21028438,"comment_id":38610182,"body_markdown":"Ok. Now I know what causes it. It&#39;s the `allprojects` (or `subprojects`) clause in the root project. It seems to misbehave: If I say `allprojects { sourceCompatibility = 1.6 }` in the root, the settings does not work correctly in subprojects, *not even* if I redefine it again in the subproject directly. If I remove the `allprojects` clause and *only* set the `sourceCompatibility` in the subproject, it works as expected. It seems like a some kind of bug. If I am able to describe it more specificaly, I am going to report to the developers. Joachim, I can you please verify this in your setup?","body":"Ok. Now I know what causes it. It&#39;s the <code>allprojects</code> (or <code>subprojects</code>) clause in the root project. It seems to misbehave: If I say <code>allprojects { sourceCompatibility = 1.6 }</code> in the root, the settings does not work correctly in subprojects, <i>not even</i> if I redefine it again in the subproject directly. If I remove the <code>allprojects</code> clause and <i>only</i> set the <code>sourceCompatibility</code> in the subproject, it works as expected. It seems like a some kind of bug. If I am able to describe it more specificaly, I am going to report to the developers. Joachim, I can you please verify this in your setup?"},{"owner":{"account_id":2215685,"reputation":2915,"user_id":1956359,"accept_rate":76,"display_name":"Joachim Kurz"},"score":0,"creation_date":1405987766,"post_id":21028438,"comment_id":38638560,"body_markdown":"Sounds similar to our setup. I&#39;ll try to have a look at it this week. Feel free to remind me if I don&#39;t.","body":"Sounds similar to our setup. I&#39;ll try to have a look at it this week. Feel free to remind me if I don&#39;t."}],"answers":[{"tags":[],"owner":{"account_id":31011,"reputation":122006,"user_id":84889,"display_name":"Peter Niederwieser"},"down_vote_count":0,"up_vote_count":53,"is_accepted":false,"score":53,"last_activity_date":1399225744,"creation_date":1389377846,"answer_id":21051506,"question_id":21028438,"body_markdown":"Symptoms indicate that somewhere somebody is overwriting `project.sourceCompatibility`. But given that there are many ways to customize Gradle, I can&#39;t say from a distance who that is.\r\n\r\nAs a workaround, you can set the properties on the task level, which is what ultimately counts:\r\n\r\n    tasks.withType(JavaCompile) { \r\n        sourceCompatibility = &quot;1.6&quot;\r\n        targetCompatibility = &quot;1.6&quot; \r\n    }\r\n\r\nAdd this to `allProjects { ... }` block.","title":"Gradle sourceCompatibility has no effect to subprojects","body":"<p>Symptoms indicate that somewhere somebody is overwriting <code>project.sourceCompatibility</code>. But given that there are many ways to customize Gradle, I can't say from a distance who that is.</p>\n\n<p>As a workaround, you can set the properties on the task level, which is what ultimately counts:</p>\n\n<pre><code>tasks.withType(JavaCompile) { \n    sourceCompatibility = \"1.6\"\n    targetCompatibility = \"1.6\" \n}\n</code></pre>\n\n<p>Add this to <code>allProjects { ... }</code> block.</p>\n"},{"tags":[],"owner":{"account_id":1674439,"reputation":2685,"user_id":1540271,"display_name":"Marwin"},"down_vote_count":0,"up_vote_count":112,"is_accepted":true,"score":112,"last_activity_date":1405936802,"creation_date":1405936802,"answer_id":24862369,"question_id":21028438,"body_markdown":"It seems this behavior is caused by specifying the `sourceCompatibility` *before* `apply plugin: &#39;java&#39;`, which happens if you try to set the compatibility option inside `allprojects`.\r\n\r\nIn my setup, the situation can be solved by replacing:\r\n\r\n    allprojects {\r\n        sourceCompatibility = 1.6\r\n        targetCompatibility = 1.6\r\n    }\r\n\r\nwith:\r\n\r\n    allprojects {\r\n        apply plugin: &#39;java&#39;\r\n        sourceCompatibility = 1.6\r\n        targetCompatibility = 1.6\r\n    }\r\n\r\nWill be glad if anyone else can verify this in a different setup.\r\n\r\nI am still not sure whether this should be reported as a bug but I believe this solution is better than the work-around mentioned above (which has been very helpful however).","title":"Gradle sourceCompatibility has no effect to subprojects","body":"<p>It seems this behavior is caused by specifying the <code>sourceCompatibility</code> <em>before</em> <code>apply plugin: 'java'</code>, which happens if you try to set the compatibility option inside <code>allprojects</code>.</p>\n\n<p>In my setup, the situation can be solved by replacing:</p>\n\n<pre><code>allprojects {\n    sourceCompatibility = 1.6\n    targetCompatibility = 1.6\n}\n</code></pre>\n\n<p>with:</p>\n\n<pre><code>allprojects {\n    apply plugin: 'java'\n    sourceCompatibility = 1.6\n    targetCompatibility = 1.6\n}\n</code></pre>\n\n<p>Will be glad if anyone else can verify this in a different setup.</p>\n\n<p>I am still not sure whether this should be reported as a bug but I believe this solution is better than the work-around mentioned above (which has been very helpful however).</p>\n"},{"tags":[],"owner":{"account_id":5823743,"reputation":36,"user_id":4590887,"display_name":"Rajkumar Nagarajan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1462214881,"creation_date":1462214881,"answer_id":36989484,"question_id":21028438,"body_markdown":"You need to define compileJava tasks in build.gradle file, if you are using sourceCompatibility or targetCompatibility. Without compileJava tasks, both compatibility variables are displayed as unused variables in Intellij. I am using Gradle version 2.10.\r\n","title":"Gradle sourceCompatibility has no effect to subprojects","body":"<p>You need to define compileJava tasks in build.gradle file, if you are using sourceCompatibility or targetCompatibility. Without compileJava tasks, both compatibility variables are displayed as unused variables in Intellij. I am using Gradle version 2.10.</p>\n"},{"tags":[],"owner":{"account_id":19517126,"reputation":424,"user_id":14279755,"display_name":"hassan bazai"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634404037,"creation_date":1634404037,"answer_id":69597825,"question_id":21028438,"body_markdown":"To solve this problem, just check the build Gradle (app), and put the below code inside it.\r\n\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n\r\nAlso in the build Gradle (project), you have to have the below code.\r\n\r\n    allprojects {\r\n        repositories {\r\n            google()\r\n            mavenCentral()\r\n            jcenter()\r\n            sourceCompatibility = 1.6\r\n            targetCompatibility = 1.6\r\n        }\r\n    }","title":"Gradle sourceCompatibility has no effect to subprojects","body":"<p>To solve this problem, just check the build Gradle (app), and put the below code inside it.</p>\n<pre><code>compileOptions {\n    sourceCompatibility JavaVersion.VERSION_1_8\n    targetCompatibility JavaVersion.VERSION_1_8\n}\n</code></pre>\n<p>Also in the build Gradle (project), you have to have the below code.</p>\n<pre><code>allprojects {\n    repositories {\n        google()\n        mavenCentral()\n        jcenter()\n        sourceCompatibility = 1.6\n        targetCompatibility = 1.6\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":2215685,"reputation":2915,"user_id":1956359,"accept_rate":76,"display_name":"Joachim Kurz"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74120,"favorite_count":0,"down_vote_count":0,"up_vote_count":69,"accepted_answer_id":24862369,"answer_count":4,"score":69,"last_activity_date":1634404037,"creation_date":1389292685,"question_id":21028438,"body_markdown":"I have Java 6 and 7 installed on my machine. Gradle uses 1.7 (checked using `gradle -v`). But I need to compile my code to be compatible with Java 1.6. As far as I understand the documentation I can use the `sourceCompatibility` property to do so (and indirectly the `targetCompatibility` which defaults to the  `sourceCompatibility`).\r\n\r\nSo I added the following line to my build file (on the root level, not in any closure):\r\n\r\n    sourceCompatibility = 1.6\r\n\r\n(to be sure I also added the `targetCompatibility = 1.6` in some trials, but that should not make a difference)\r\n\r\n\r\nTo check whether the result was actually compatible with 1.6 I unzipped the resulting jar, `cd` into the `WEB-INF/classes` folder and used `javap -verbose` on the first `.class` file I encountered. But no matter whether I set the target compatibility or whether I used 1.5 instead of 1.6 or whether I specified it as string (`&#39;1.6&#39;`), each time the result of javap was\r\n\r\n    minor version: 0\r\n    major version: 51\r\n\r\nAfaik this means it is Java 1.7 Bytecode, which is wrong.\r\n\r\nAny ideas why the `sourceCompatibility`-setting doesn&#39;t work? Or is `javap` not the correct way to check the compatibility?\r\n\r\n\r\n**UPDATE:**\r\nYes, this is actually a multi-project build but I only checked one of the subprojects&#39; build results. In this subproject&#39;s build file I made the mentioned changes to be sure they are actually applied. In addition, I added the following in the root project&#39;s build file (as @Vidya proposed as well):\r\n\r\n    allprojects {\r\n        sourceCompatibility = 1.6\r\n        targetCompatibility = 1.6\r\n    }\r\n\r\nBut this didn&#39;t help either.\r\n\r\n**UPDATE 2:**\r\nI checked the setting of sourceCompatibility with this snippet in the relevant build.gradle files:\r\n\r\n    compileJava.doFirst {\r\n        println &quot;source compatibility &quot; + sourceCompatibility\r\n    }\r\n\r\nIt revealed that my sourceCompatibility is set to 1.7 although I tried to set it to 1.6. When I extracted the simplest subproject and built in on its own the sourceCompatibility is set correctly and the Java Byte code is compatible to 1.6. However, even this sub-project uses the wrong sourceCompatibility when used in the multi project build.\r\n\r\n\r\nBTW: The plugins I use in some of the sub projects are: `java`, `war`, `jetty`, `gwt`\r\n\r\n**UPDATE 3:**\r\nI changed the built scripts to just use the java plugin (and thus just construct some jars) and removed the usage of the `war`, `jetty` and `gwt` plugin. But still all the projects are set to sourceCompatibility 1.7 despite me setting it in the `allprojects` section and in some of the sub projects. All that is left now in the build scripts is the declaration of some decencies (maven, files and other sub projects), the declaration of the repositories to use, the declaration of some others tasks (that the build-task does not depend on, so it shouldn&#39;t be affected) and the configuration of the manifest file for the created jar files (I add a specification and an implementation version and title to the manifest file). \r\n\r\nI don&#39;t see how any of that would affect the sourceCompatibility setting.","title":"Gradle sourceCompatibility has no effect to subprojects","body":"<p>I have Java 6 and 7 installed on my machine. Gradle uses 1.7 (checked using <code>gradle -v</code>). But I need to compile my code to be compatible with Java 1.6. As far as I understand the documentation I can use the <code>sourceCompatibility</code> property to do so (and indirectly the <code>targetCompatibility</code> which defaults to the  <code>sourceCompatibility</code>).</p>\n\n<p>So I added the following line to my build file (on the root level, not in any closure):</p>\n\n<pre><code>sourceCompatibility = 1.6\n</code></pre>\n\n<p>(to be sure I also added the <code>targetCompatibility = 1.6</code> in some trials, but that should not make a difference)</p>\n\n<p>To check whether the result was actually compatible with 1.6 I unzipped the resulting jar, <code>cd</code> into the <code>WEB-INF/classes</code> folder and used <code>javap -verbose</code> on the first <code>.class</code> file I encountered. But no matter whether I set the target compatibility or whether I used 1.5 instead of 1.6 or whether I specified it as string (<code>'1.6'</code>), each time the result of javap was</p>\n\n<pre><code>minor version: 0\nmajor version: 51\n</code></pre>\n\n<p>Afaik this means it is Java 1.7 Bytecode, which is wrong.</p>\n\n<p>Any ideas why the <code>sourceCompatibility</code>-setting doesn't work? Or is <code>javap</code> not the correct way to check the compatibility?</p>\n\n<p><strong>UPDATE:</strong>\nYes, this is actually a multi-project build but I only checked one of the subprojects' build results. In this subproject's build file I made the mentioned changes to be sure they are actually applied. In addition, I added the following in the root project's build file (as @Vidya proposed as well):</p>\n\n<pre><code>allprojects {\n    sourceCompatibility = 1.6\n    targetCompatibility = 1.6\n}\n</code></pre>\n\n<p>But this didn't help either.</p>\n\n<p><strong>UPDATE 2:</strong>\nI checked the setting of sourceCompatibility with this snippet in the relevant build.gradle files:</p>\n\n<pre><code>compileJava.doFirst {\n    println \"source compatibility \" + sourceCompatibility\n}\n</code></pre>\n\n<p>It revealed that my sourceCompatibility is set to 1.7 although I tried to set it to 1.6. When I extracted the simplest subproject and built in on its own the sourceCompatibility is set correctly and the Java Byte code is compatible to 1.6. However, even this sub-project uses the wrong sourceCompatibility when used in the multi project build.</p>\n\n<p>BTW: The plugins I use in some of the sub projects are: <code>java</code>, <code>war</code>, <code>jetty</code>, <code>gwt</code></p>\n\n<p><strong>UPDATE 3:</strong>\nI changed the built scripts to just use the java plugin (and thus just construct some jars) and removed the usage of the <code>war</code>, <code>jetty</code> and <code>gwt</code> plugin. But still all the projects are set to sourceCompatibility 1.7 despite me setting it in the <code>allprojects</code> section and in some of the sub projects. All that is left now in the build scripts is the declaration of some decencies (maven, files and other sub projects), the declaration of the repositories to use, the declaration of some others tasks (that the build-task does not depend on, so it shouldn't be affected) and the configuration of the manifest file for the created jar files (I add a specification and an implementation version and title to the manifest file). </p>\n\n<p>I don't see how any of that would affect the sourceCompatibility setting.</p>\n"},{"tags":["java","android","outputstream","storage-access-framework","documentfile"],"comments":[{"owner":{"account_id":2414645,"reputation":11194,"user_id":2108972,"display_name":"greenapps"},"score":0,"creation_date":1504631874,"post_id":46060113,"comment_id":79080842,"body_markdown":"`context.getContentResolver().openOutputStream(docFile.getUri());`. That should do it. You should show minimal code where you start with Intent.ACTION_OPEN_DOCUMENT_TREE and the in onActivityResult() try to create a file and write to it.","body":"<code>context.getContentResolver().openOutputStream(docFile.getUri&zwnj;&#8203;());</code>. That should do it. You should show minimal code where you start with Intent.ACTION_OPEN_DOCUMENT_TREE and the in onActivityResult() try to create a file and write to it."},{"owner":{"account_id":11679664,"reputation":53,"user_id":8551859,"display_name":"jeanv"},"score":0,"creation_date":1504634684,"post_id":46060113,"comment_id":79082154,"body_markdown":"I tried `context.getContentResolver().openOutputStream(docFile.getUri());`, it doesn&#39;t work. \n\nI added a more self contained example that works from inside the `SimpleSftpServer` class. But can&#39;t be used in the context of the Apache library.","body":"I tried <code>context.getContentResolver().openOutputStream(docFile.getUri&zwnj;&#8203;());</code>, it doesn&#39;t work.   I added a more self contained example that works from inside the <code>SimpleSftpServer</code> class. But can&#39;t be used in the context of the Apache library."},{"owner":{"account_id":11679664,"reputation":53,"user_id":8551859,"display_name":"jeanv"},"score":0,"creation_date":1504639375,"post_id":46060113,"comment_id":79084512,"body_markdown":"I haven&#39;t logged this value, but this is part of an example which I know works and different from what I&#39;m actually trying to achieve.","body":"I haven&#39;t logged this value, but this is part of an example which I know works and different from what I&#39;m actually trying to achieve."},{"owner":{"account_id":11679664,"reputation":53,"user_id":8551859,"display_name":"jeanv"},"score":0,"creation_date":1504686172,"post_id":46060113,"comment_id":79100912,"body_markdown":"No, this last block of code is an independent example which is not part of what I am trying to do. It works and is only there to show that I understand how writing to a file works and to give a reference to compare with the non working code above that is part of my question.","body":"No, this last block of code is an independent example which is not part of what I am trying to do. It works and is only there to show that I understand how writing to a file works and to give a reference to compare with the non working code above that is part of my question."},{"owner":{"account_id":11679664,"reputation":53,"user_id":8551859,"display_name":"jeanv"},"score":0,"creation_date":1504701784,"post_id":46060113,"comment_id":79112036,"body_markdown":"I just noticed that if I reboot the Android device, the originally empty file actually gets written and is fully functional. For example if it was supposed to be a 3.2kB text file, I do get a 3.2kB readable text file after a reboot.\n\nIt makes me think it could be some problem with a buffer or the stream not properly being closed/flushed?","body":"I just noticed that if I reboot the Android device, the originally empty file actually gets written and is fully functional. For example if it was supposed to be a 3.2kB text file, I do get a 3.2kB readable text file after a reboot.  It makes me think it could be some problem with a buffer or the stream not properly being closed/flushed?"},{"owner":{"account_id":1741886,"reputation":1520,"user_id":1593056,"display_name":"Hexise"},"score":0,"creation_date":1511455908,"post_id":46060113,"comment_id":81875019,"body_markdown":"I found the problem too. This problem can be reproduced on encrypted SD card on Samsung devices, at least. If the SD card is non-encrypted, then there should be no problem. This might because of the encryption logic. I did not figure it out yet.  Suppose currently the file is 10 characters length long, later on you save content less than 10 characters, the save is success, if you save more, only 10 characters saved. That is why if original content is 0 character, then no content is saved. As you said, if you reboot the device, the changes is already done.","body":"I found the problem too. This problem can be reproduced on encrypted SD card on Samsung devices, at least. If the SD card is non-encrypted, then there should be no problem. This might because of the encryption logic. I did not figure it out yet.  Suppose currently the file is 10 characters length long, later on you save content less than 10 characters, the save is success, if you save more, only 10 characters saved. That is why if original content is 0 character, then no content is saved. As you said, if you reboot the device, the changes is already done."}],"answers":[{"tags":[],"owner":{"account_id":5143607,"reputation":2038,"user_id":4120180,"accept_rate":95,"display_name":"Stav Bodik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634403802,"creation_date":1634403802,"answer_id":69597790,"question_id":46060113,"body_markdown":"&quot;When using ACTION_OPEN_DOCUMENT_TREE, your app gains access only to the files in the directory that the user selects. You don&#39;t have access to other apps&#39; files that reside outside this user-selected directory. \r\n\r\nThis user-controlled access allows users to choose exactly what content they&#39;re comfortable sharing with your app.&quot;\r\n\r\n\r\nThis means, you can only read/write/delete the content/meta data of already existing files or in sub directories in the selected directory, the scope that the user accept to be &quot;comfortable&quot; with.\r\n\r\nActually the user granted permmision to a list of Uri&#39;s in this folder for ea file/sub directory there is seperate uri permmision.\r\n\r\nNow for example if I will try to create new file in the selected Uri using DocumentFile Ill success but if i will try to outputatream new data to this file I will fail because the user did not grant permision to write to this newly created file.\r\n\r\nHe only granted to write in the directory path level, means create new file here.\r\n\r\nSo same happens when you try to move/transfer file to other path that does not have permission from the user.\r\n\r\nPath can be folder or file and for ea new path the user needs to grant new access.\r\n\r\nmove file = new path\r\nwrite to just created file = new path\r\n","title":"Writing with an OutputStream to a DocumentFile: data seem to be written but file ends up empty","body":"<p>&quot;When using ACTION_OPEN_DOCUMENT_TREE, your app gains access only to the files in the directory that the user selects. You don't have access to other apps' files that reside outside this user-selected directory.</p>\n<p>This user-controlled access allows users to choose exactly what content they're comfortable sharing with your app.&quot;</p>\n<p>This means, you can only read/write/delete the content/meta data of already existing files or in sub directories in the selected directory, the scope that the user accept to be &quot;comfortable&quot; with.</p>\n<p>Actually the user granted permmision to a list of Uri's in this folder for ea file/sub directory there is seperate uri permmision.</p>\n<p>Now for example if I will try to create new file in the selected Uri using DocumentFile Ill success but if i will try to outputatream new data to this file I will fail because the user did not grant permision to write to this newly created file.</p>\n<p>He only granted to write in the directory path level, means create new file here.</p>\n<p>So same happens when you try to move/transfer file to other path that does not have permission from the user.</p>\n<p>Path can be folder or file and for ea new path the user needs to grant new access.</p>\n<p>move file = new path\nwrite to just created file = new path</p>\n"}],"owner":{"account_id":11679664,"reputation":53,"user_id":8551859,"display_name":"jeanv"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2293,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1634403802,"creation_date":1504631151,"question_id":46060113,"body_markdown":"The application [KDE Connect](https://github.com/KDE/kdeconnect-android) allows remotely browsing an Android device from a desktop computer through SFTP. Since Android 4.4, developers don&#39;t have write permission to SD cards directly through the filesystem anymore. So I am trying to port the SFTP module using the Storage Access Framework (DocumentFile, etc.)\r\n\r\nI am taking the permission with an `Intent.ACTION_OPEN_DOCUMENT_TREE` and `FLAG_GRANT_WRITE_URI_PERMISSION` and passing the context to my classes.\r\n\r\nI am able to create new empty files, rename files and delete files on the SD card inside my class so I believe I am getting the necessary permissions. However, transferring a file results in an empty file (0 bytes) being created. I can see the transfer taking a certain time and a progress bar on the desktop side, so it doesn&#39;t just abort.\r\n\r\nHere is the relevant part of the SftpSubsystem class from the Apache SSHD library ([see doc here](https://mina.apache.org/sshd-project/apidocs/org/apache/sshd/server/subsystem/sftp/SftpSubsystem.html)) with my own comments to explain what&#39;s going on:\r\n\r\n\tpublic class SftpSubsystem implements Command, Runnable, SessionAware, FileSystemAware {\r\n        // This method receives a buffer from an InputStream and processes it\r\n        // according to its type. In this situation, it would also contain\r\n        // a block of the file being transferred (4096 bytes)\r\n\t\tprotected void process(Buffer buffer) {\r\n\t\t\tint type = buffer.getByte();\r\n\t\t\t\r\n\t\t\tswitch (type) {\r\n\t\t\t\tcase WRITE:\r\n\t\t\t\t\tFileHandle fh = getHandleFromString(buffer.getString());\r\n\t\t\t\t\tlong offset = buffer.getLong();\r\n\t\t\t\t\tbyte[] data = buffer.getBytes();\r\n\r\n\t\t\t\t\tfh.write(data, offset);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t// other cases\r\n\t\t\t}\t\r\n\t\t}\r\n\t\t\r\n        // This class is a handle to a file (duh) with\r\n        // an OutputStream to write and InputStream to read\r\n\t\tprotected static class FileHandle {\r\n\t\t\tSshFile file;\r\n\t\t\tOutputStream output;\r\n\t\t\tlong outputPos;\r\n\t\t\tInputStream input;\r\n\t\t\tlong inputPos;\r\n\r\n            // Method called inside process()\r\n\t\t\tpublic void write(byte[] data, long offset) throws IOException {\r\n\t\t\t\tif (output != null &amp;&amp; offset != outputPos) {\r\n\t\t\t\t\tIoUtils.closeQuietly(output);\r\n\t\t\t\t\toutput = null;\r\n\t\t\t\t}\r\n\t\t\t\tif (output == null) {\r\n                    // This is called once at the start of the transfer.\r\n                    // This is what I think I need to rewrite to make\r\n                    // it work with DocumentFile objects.\r\n\t\t\t\t\toutput = file.createOutputStream(offset);\r\n\t\t\t\t}\r\n\t\t\t\toutput.write(data);\r\n\t\t\t\toutputPos += data.length;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\nThe original implementation of createOutputStream() that I want to rewrite because RandomAccessFile doesn&#39;t work with DocumentFile:\r\n\r\n\tpublic class NativeSshFile implements SshFile {\r\n\t\tprivate File file;\r\n\t\t\r\n\t\tpublic OutputStream createOutputStream(final long offset)\r\n\t\t\t\tthrows IOException {\r\n\r\n\t\t\t// permission check\r\n\t\t\tif (!isWritable()) {\r\n\t\t\t\tthrow new IOException(&quot;No write permission : &quot; + file.getName());\r\n\t\t\t}\r\n\r\n\t\t\t// move to the appropriate offset and create output stream\r\n\t\t\tfinal RandomAccessFile raf = new RandomAccessFile(file, &quot;rw&quot;);\r\n\t\t\ttry {\r\n\t\t\t\traf.setLength(offset);\r\n\t\t\t\traf.seek(offset);\r\n\r\n\t\t\t\t// The IBM jre needs to have both the stream and the random access file\r\n\t\t\t\t// objects closed to actually close the file\r\n\t\t\t\treturn new FileOutputStream(raf.getFD()) {\r\n\t\t\t\t\tpublic void close() throws IOException {\r\n\t\t\t\t\t\tsuper.close();\r\n\t\t\t\t\t\traf.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t} catch (IOException e) {\r\n\t\t\t\traf.close();\r\n\t\t\t\tthrow e;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\nOne of the ways I tried to implement it:\r\n\r\n\tclass SimpleSftpServer {\r\n\t\tstatic class AndroidSshFile extends NativeSshFile {\r\n\r\n            // This is the DocumentFile that is stored after\r\n            // create() created the empty file\r\n\t\t\tprivate DocumentFile docFile;\r\n\t\t\r\n\t\t\tpublic OutputStream createOutputStream(final long offset) throws IOException {\r\n\t\t\t\t// permission check\r\n\t\t\t\tif (!isWritable()) {\r\n\t\t\t\t\tthrow new IOException(&quot;No write permission : &quot; + docFile.getName());\r\n\t\t\t\t}\r\n\r\n\t\t\t\tParcelFileDescriptor pfd = context.getContentResolver().openFileDescriptor(docFile.getUri(), &quot;rw&quot;);\r\n\t\t\t\tFileDescriptor fd = pfd.getFileDescriptor();\r\n\t\t\t\ttry {\r\n\t\t\t\t\tandroid.system.Os.lseek(fd, offset, OsConstants.SEEK_SET);\r\n\t\t\t\t} catch (ErrnoException e) {\r\n\t\t\t\t\tLog.e(&quot;SimpleSftpServer&quot;, &quot;&quot; + e);\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn new FileOutputstream(fd, offset);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\nI also tried a simple (the offset is ignored but it&#39;s just a test):\r\n\r\n        public OutputStream createOutputStream(final long offset) throws IOException {\r\n            // permission check\r\n            if (!isWritable()) {\r\n                throw new IOException(&quot;No write permission : &quot; + docFile.getName());\r\n            }\r\n\r\n            return context.getContentResolver().openOutputStream(docFile.getUri());\r\n        }\r\n\r\nI also tried with a FileChannel and to flush and sync the FileOutputStream.\r\n\r\nAny idea why I end up with an empty file?\r\n\r\nEDIT: here is a small example of a test I did to just write a new file from an existing file. **It works, but this is not what I actually want to do** (see code above) but I thought I&#39;d provide an example to show that I understand the basics of how to write to an OutputStream.\r\n\r\n\tprivate void createDocumentFileFromFile() {\r\n            File fileToRead = new File(&quot;/storage/0123-4567/lady.m4a&quot;);\r\n            File fileToWrite = new File(&quot;/storage/0123-4567/lady2.m4a&quot;);\r\n            File dir = fileToWrite.getParentFile();\r\n            DocumentFile docDir = DocumentFile.fromTreeUri(context, SimpleSftpServer.externalStorageUri);\r\n            \r\n            try {\r\n                DocumentFile createdFile = docDir.createFile(null, fileToWrite.getName());\r\n                Uri uriToRead = Uri.fromFile(fileToRead);\r\n                InputStream in = context.getContentResolver().openInputStream(uriToRead);\r\n                OutputStream out = context.getContentResolver().openOutputStream(createdFile.getUri());\r\n                try {\r\n                    int nbOfBytes = 0;\r\n                    final int BLOCKSIZE = 4096;\r\n                    byte[] bytesRead = new byte[BLOCKSIZE];\r\n                    while (true) {\r\n                        nbOfBytes = in.read(bytesRead);\r\n                        if (nbOfBytes == -1) {\r\n                            break;\r\n                        }\r\n                        out.write(bytesRead, 0, nbOfBytes);\r\n                    }\r\n                } finally {\r\n                    in.close();\r\n                    out.close();\r\n                }\r\n            } catch (IOException e) {\r\n                \r\n            }\r\n        }","title":"Writing with an OutputStream to a DocumentFile: data seem to be written but file ends up empty","body":"<p>The application <a href=\"https://github.com/KDE/kdeconnect-android\" rel=\"nofollow noreferrer\">KDE Connect</a> allows remotely browsing an Android device from a desktop computer through SFTP. Since Android 4.4, developers don't have write permission to SD cards directly through the filesystem anymore. So I am trying to port the SFTP module using the Storage Access Framework (DocumentFile, etc.)</p>\n\n<p>I am taking the permission with an <code>Intent.ACTION_OPEN_DOCUMENT_TREE</code> and <code>FLAG_GRANT_WRITE_URI_PERMISSION</code> and passing the context to my classes.</p>\n\n<p>I am able to create new empty files, rename files and delete files on the SD card inside my class so I believe I am getting the necessary permissions. However, transferring a file results in an empty file (0 bytes) being created. I can see the transfer taking a certain time and a progress bar on the desktop side, so it doesn't just abort.</p>\n\n<p>Here is the relevant part of the SftpSubsystem class from the Apache SSHD library (<a href=\"https://mina.apache.org/sshd-project/apidocs/org/apache/sshd/server/subsystem/sftp/SftpSubsystem.html\" rel=\"nofollow noreferrer\">see doc here</a>) with my own comments to explain what's going on:</p>\n\n<pre><code>public class SftpSubsystem implements Command, Runnable, SessionAware, FileSystemAware {\n    // This method receives a buffer from an InputStream and processes it\n    // according to its type. In this situation, it would also contain\n    // a block of the file being transferred (4096 bytes)\n    protected void process(Buffer buffer) {\n        int type = buffer.getByte();\n\n        switch (type) {\n            case WRITE:\n                FileHandle fh = getHandleFromString(buffer.getString());\n                long offset = buffer.getLong();\n                byte[] data = buffer.getBytes();\n\n                fh.write(data, offset);\n                break;\n            // other cases\n        }   \n    }\n\n    // This class is a handle to a file (duh) with\n    // an OutputStream to write and InputStream to read\n    protected static class FileHandle {\n        SshFile file;\n        OutputStream output;\n        long outputPos;\n        InputStream input;\n        long inputPos;\n\n        // Method called inside process()\n        public void write(byte[] data, long offset) throws IOException {\n            if (output != null &amp;&amp; offset != outputPos) {\n                IoUtils.closeQuietly(output);\n                output = null;\n            }\n            if (output == null) {\n                // This is called once at the start of the transfer.\n                // This is what I think I need to rewrite to make\n                // it work with DocumentFile objects.\n                output = file.createOutputStream(offset);\n            }\n            output.write(data);\n            outputPos += data.length;\n        }\n    }\n}\n</code></pre>\n\n<p>The original implementation of createOutputStream() that I want to rewrite because RandomAccessFile doesn't work with DocumentFile:</p>\n\n<pre><code>public class NativeSshFile implements SshFile {\n    private File file;\n\n    public OutputStream createOutputStream(final long offset)\n            throws IOException {\n\n        // permission check\n        if (!isWritable()) {\n            throw new IOException(\"No write permission : \" + file.getName());\n        }\n\n        // move to the appropriate offset and create output stream\n        final RandomAccessFile raf = new RandomAccessFile(file, \"rw\");\n        try {\n            raf.setLength(offset);\n            raf.seek(offset);\n\n            // The IBM jre needs to have both the stream and the random access file\n            // objects closed to actually close the file\n            return new FileOutputStream(raf.getFD()) {\n                public void close() throws IOException {\n                    super.close();\n                    raf.close();\n                }\n            };\n        } catch (IOException e) {\n            raf.close();\n            throw e;\n        }\n    }\n}\n</code></pre>\n\n<p>One of the ways I tried to implement it:</p>\n\n<pre><code>class SimpleSftpServer {\n    static class AndroidSshFile extends NativeSshFile {\n\n        // This is the DocumentFile that is stored after\n        // create() created the empty file\n        private DocumentFile docFile;\n\n        public OutputStream createOutputStream(final long offset) throws IOException {\n            // permission check\n            if (!isWritable()) {\n                throw new IOException(\"No write permission : \" + docFile.getName());\n            }\n\n            ParcelFileDescriptor pfd = context.getContentResolver().openFileDescriptor(docFile.getUri(), \"rw\");\n            FileDescriptor fd = pfd.getFileDescriptor();\n            try {\n                android.system.Os.lseek(fd, offset, OsConstants.SEEK_SET);\n            } catch (ErrnoException e) {\n                Log.e(\"SimpleSftpServer\", \"\" + e);\n                return null;\n            }\n\n            return new FileOutputstream(fd, offset);\n        }\n    }\n}\n</code></pre>\n\n<p>I also tried a simple (the offset is ignored but it's just a test):</p>\n\n<pre><code>    public OutputStream createOutputStream(final long offset) throws IOException {\n        // permission check\n        if (!isWritable()) {\n            throw new IOException(\"No write permission : \" + docFile.getName());\n        }\n\n        return context.getContentResolver().openOutputStream(docFile.getUri());\n    }\n</code></pre>\n\n<p>I also tried with a FileChannel and to flush and sync the FileOutputStream.</p>\n\n<p>Any idea why I end up with an empty file?</p>\n\n<p>EDIT: here is a small example of a test I did to just write a new file from an existing file. <strong>It works, but this is not what I actually want to do</strong> (see code above) but I thought I'd provide an example to show that I understand the basics of how to write to an OutputStream.</p>\n\n<pre><code>private void createDocumentFileFromFile() {\n        File fileToRead = new File(\"/storage/0123-4567/lady.m4a\");\n        File fileToWrite = new File(\"/storage/0123-4567/lady2.m4a\");\n        File dir = fileToWrite.getParentFile();\n        DocumentFile docDir = DocumentFile.fromTreeUri(context, SimpleSftpServer.externalStorageUri);\n\n        try {\n            DocumentFile createdFile = docDir.createFile(null, fileToWrite.getName());\n            Uri uriToRead = Uri.fromFile(fileToRead);\n            InputStream in = context.getContentResolver().openInputStream(uriToRead);\n            OutputStream out = context.getContentResolver().openOutputStream(createdFile.getUri());\n            try {\n                int nbOfBytes = 0;\n                final int BLOCKSIZE = 4096;\n                byte[] bytesRead = new byte[BLOCKSIZE];\n                while (true) {\n                    nbOfBytes = in.read(bytesRead);\n                    if (nbOfBytes == -1) {\n                        break;\n                    }\n                    out.write(bytesRead, 0, nbOfBytes);\n                }\n            } finally {\n                in.close();\n                out.close();\n            }\n        } catch (IOException e) {\n\n        }\n    }\n</code></pre>\n"},{"tags":["java","c#","sockets","stream"],"comments":[{"owner":{"account_id":5709968,"reputation":75,"user_id":4512318,"accept_rate":29,"display_name":"TotorAndMimine"},"score":0,"creation_date":1452108488,"post_id":34641149,"comment_id":57027891,"body_markdown":"And the equivalent of the methods &quot;getOutputStream()&quot; and &quot;getInputStream()&quot; for a Socket ?","body":"And the equivalent of the methods &quot;getOutputStream()&quot; and &quot;getInputStream()&quot; for a Socket ?"}],"answers":[{"tags":[],"owner":{"account_id":246828,"reputation":832,"user_id":521179,"accept_rate":62,"display_name":"Andrew Au"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1452109429,"creation_date":1452109429,"answer_id":34641468,"question_id":34641149,"body_markdown":"There are many serializer available on .NET.\r\n\r\nThe simplest one is binary serialization. It is the most similar equivalent in C#\r\n\r\nhttps://msdn.microsoft.com/en-us/library/4abbf6k0(v=vs.110).aspx\r\n\r\nThe problem with that is that if you use this, your server and client will need to upgrade in lock steps (i.e. if you upgrade your server, you have to update all your clients, or the server wouldn&#39;t be able to deserialize requests from old clients)\r\n\r\nDataContractSerializer provides XML formatted message and have options that is designed for web services so that it can do some version tolerance.\r\n\r\nhttps://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractserializer(v=vs.110).aspx\r\n\r\nIn particular, it allow missed property (for example, when server is upgraded to allow more knobs, but old clients are not sending them).\r\n\r\nFor your another question.\r\nTo obtain a stream from a Socket, just create a System.Net.Socket.NetworkStream object instance with the socket as an argument.\r\n\r\n    Stream s = new NetworkStream(socket);\r\n\r\nWindows Communication Foundation (WCF) abstract away a lot of details on programming distributed systems. It is much easier to program a server client application using WCF instead of messing with raw sockets.","title":"Equivalent of ObjectInputStream and ObjectOutputStream in C#","body":"<p>There are many serializer available on .NET.</p>\n\n<p>The simplest one is binary serialization. It is the most similar equivalent in C#</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/4abbf6k0(v=vs.110).aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/4abbf6k0(v=vs.110).aspx</a></p>\n\n<p>The problem with that is that if you use this, your server and client will need to upgrade in lock steps (i.e. if you upgrade your server, you have to update all your clients, or the server wouldn't be able to deserialize requests from old clients)</p>\n\n<p>DataContractSerializer provides XML formatted message and have options that is designed for web services so that it can do some version tolerance.</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractserializer(v=vs.110).aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractserializer(v=vs.110).aspx</a></p>\n\n<p>In particular, it allow missed property (for example, when server is upgraded to allow more knobs, but old clients are not sending them).</p>\n\n<p>For your another question.\nTo obtain a stream from a Socket, just create a System.Net.Socket.NetworkStream object instance with the socket as an argument.</p>\n\n<pre><code>Stream s = new NetworkStream(socket);\n</code></pre>\n\n<p>Windows Communication Foundation (WCF) abstract away a lot of details on programming distributed systems. It is much easier to program a server client application using WCF instead of messing with raw sockets.</p>\n"},{"tags":[],"owner":{"account_id":54382,"reputation":14965,"user_id":162699,"accept_rate":76,"display_name":"Gusman"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1452109448,"creation_date":1452109448,"answer_id":34641472,"question_id":34641149,"body_markdown":"There&#39;s no direct equivalent of it, but it&#39;s functionality is very easily achieved using a plain Stream and XmlSerializer/BinaryFormatter.\r\n\r\nHere is an example using XmlSerializer:\r\n\r\n    public void StoreToFile&lt;T&gt;(T ObjectToStore, string FileName)\r\n    {\r\n        XmlSerializer ser = new XmlSerializer(typeof(T));\r\n        using(Stream str = File.Create(FileName))\r\n            ser.Serialize(str, ObjectToStore);\r\n    }\r\n\r\n    public T RetrieveFromFile(string FileName)\r\n    {\r\n        XmlSerializer ser = new XmlSerializer(typeof(T));\r\n        using(Stream str = File.Open(FileName))\r\n            return (T)ser.Deserialize(str);\r\n    }\r\n\r\nThen, when you want to store a class in a file use:\r\n\r\n    MyClass instance = new MyClass(); //The class we want to store.\r\n    StoreToFile(instance, &quot;instance.dat&quot;);\r\n\r\nAnd to retrieve it:\r\n\r\n    MyClass instance = RetrieveFromFile&lt;MyClass&gt;(&quot;instance.dat&quot;);\r\n\r\nThis is a basic example storing just one class in a file, but you can extend it to store more items concatenated on these streams.\r\n\r\nAlso, the getOutputStream and getInputStream doesn&#39;t have a direct counterpart, you can always use a NetworkStream:\r\n\r\n    NetworkStream myStream = new NetworkStream(theSocket);\r\n\r\nIt will behave as an input and output stream, in .net streams usually are read/write, so no need to have two sepparated streams.  ","title":"Equivalent of ObjectInputStream and ObjectOutputStream in C#","body":"<p>There's no direct equivalent of it, but it's functionality is very easily achieved using a plain Stream and XmlSerializer/BinaryFormatter.</p>\n\n<p>Here is an example using XmlSerializer:</p>\n\n<pre><code>public void StoreToFile&lt;T&gt;(T ObjectToStore, string FileName)\n{\n    XmlSerializer ser = new XmlSerializer(typeof(T));\n    using(Stream str = File.Create(FileName))\n        ser.Serialize(str, ObjectToStore);\n}\n\npublic T RetrieveFromFile(string FileName)\n{\n    XmlSerializer ser = new XmlSerializer(typeof(T));\n    using(Stream str = File.Open(FileName))\n        return (T)ser.Deserialize(str);\n}\n</code></pre>\n\n<p>Then, when you want to store a class in a file use:</p>\n\n<pre><code>MyClass instance = new MyClass(); //The class we want to store.\nStoreToFile(instance, \"instance.dat\");\n</code></pre>\n\n<p>And to retrieve it:</p>\n\n<pre><code>MyClass instance = RetrieveFromFile&lt;MyClass&gt;(\"instance.dat\");\n</code></pre>\n\n<p>This is a basic example storing just one class in a file, but you can extend it to store more items concatenated on these streams.</p>\n\n<p>Also, the getOutputStream and getInputStream doesn't have a direct counterpart, you can always use a NetworkStream:</p>\n\n<pre><code>NetworkStream myStream = new NetworkStream(theSocket);\n</code></pre>\n\n<p>It will behave as an input and output stream, in .net streams usually are read/write, so no need to have two sepparated streams.  </p>\n"},{"tags":[],"owner":{"account_id":19406719,"reputation":81,"user_id":14192015,"display_name":"Kevin Lano"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634403651,"creation_date":1634397670,"answer_id":69596940,"question_id":34641149,"body_markdown":"The same can be done using JSON serialization, e.g.:\r\n\r\n        private StreamReader inputStream = ...;\r\n        private StreamWriter outputStream = ...;\r\n                \r\n         public void writeObject&lt;T&gt;(T s)\r\n         {\r\n              if (outputStream != null)\r\n              { string jsonString = JsonSerializer.Serialize&lt;T&gt;(s);\r\n                outputStream.WriteLine(jsonString); \r\n              }\r\n              else\r\n              { Console.WriteLine(&quot;ERROR: null output stream!&quot;);  }\r\n         }\r\n\r\n            public T readObject&lt;T&gt;()\r\n            { if (inputStream != null)\r\n              {\r\n                string jsonString = inputStream.ReadLine();\r\n                T res =\r\n                  JsonSerializer.Deserialize&lt;T&gt;(jsonString);\r\n                return res;\r\n              }\r\n              return default(T); \r\n            }\r\n\r\nNote that `T` must be a public class and only public fields are serialized. \r\n","title":"Equivalent of ObjectInputStream and ObjectOutputStream in C#","body":"<p>The same can be done using JSON serialization, e.g.:</p>\n<pre><code>    private StreamReader inputStream = ...;\n    private StreamWriter outputStream = ...;\n            \n     public void writeObject&lt;T&gt;(T s)\n     {\n          if (outputStream != null)\n          { string jsonString = JsonSerializer.Serialize&lt;T&gt;(s);\n            outputStream.WriteLine(jsonString); \n          }\n          else\n          { Console.WriteLine(&quot;ERROR: null output stream!&quot;);  }\n     }\n\n        public T readObject&lt;T&gt;()\n        { if (inputStream != null)\n          {\n            string jsonString = inputStream.ReadLine();\n            T res =\n              JsonSerializer.Deserialize&lt;T&gt;(jsonString);\n            return res;\n          }\n          return default(T); \n        }\n</code></pre>\n<p>Note that <code>T</code> must be a public class and only public fields are serialized.</p>\n"}],"owner":{"account_id":5709968,"reputation":75,"user_id":4512318,"accept_rate":29,"display_name":"TotorAndMimine"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3992,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1634403651,"creation_date":1452108325,"question_id":34641149,"body_markdown":"What is the equivalent of theses Java classes in CSharp ?\r\n\r\nIt is for implement an interface with a socket.\r\n\r\nThanks","title":"Equivalent of ObjectInputStream and ObjectOutputStream in C#","body":"<p>What is the equivalent of theses Java classes in CSharp ?</p>\n\n<p>It is for implement an interface with a socket.</p>\n\n<p>Thanks</p>\n"},{"tags":["java","android","if-statement","lambda"],"comments":[{"owner":{"account_id":2006972,"reputation":43182,"user_id":1796579,"display_name":"Henry"},"score":0,"creation_date":1634360462,"post_id":69592713,"comment_id":123008614,"body_markdown":"What are you hoping to gain by using a lambda expression?","body":"What are you hoping to gain by using a lambda expression?"},{"owner":{"display_name":"user4910279"},"score":0,"creation_date":1634360873,"post_id":69592713,"comment_id":123008658,"body_markdown":"Enclose your code in `() -&gt; {` and `}`.","body":"Enclose your code in <code>() -&gt; {</code> and <code>}</code>."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1634360940,"post_id":69592713,"comment_id":123008670,"body_markdown":"If you are trying to turn that into a lambda expression, you are missing the point of lambda expressions.  Factor out and declare the logic as a (named) method and use a method reference.  Lambdas should be used for simple logic that can be expressed in &quot;one or two&quot; lines.","body":"If you are trying to turn that into a lambda expression, you are missing the point of lambda expressions.  Factor out and declare the logic as a (named) method and use a method reference.  Lambdas should be used for simple logic that can be expressed in &quot;one or two&quot; lines."}],"answers":[{"tags":[],"owner":{"account_id":9779820,"reputation":9709,"user_id":7248342,"display_name":"Thomas Fritsch"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634402502,"creation_date":1634402502,"answer_id":69597599,"question_id":69592713,"body_markdown":"\r\nThere are several issues with your given approach:\r\n\r\n* As others have already mentioned, the point of a lambda\r\n  expression is that it should be short and easy to understand.\r\n* To get the logical *and* of your multiple logical \r\n  expressions you should chain the `filter(f -&gt; ...)` calls.\r\n  This is better than putting all the logic into one giant\r\n  lambda expression.\r\n* You need to understand the difference between `==` and\r\n  `equals`. So instead of `keywords == &quot;&quot;` you probably\r\n  want `keywords.equals(&quot;&quot;)`.\r\n* You cannot use `ArrayList&lt;String&gt;` because \r\n  `.collect(Colllectors.toList())` is declared to give\r\n  a `List&lt;String&gt;`.\r\n  \r\nConsidering all this you might end up with something like this\r\n\r\n\tprivate List&lt;String&gt; findPhotos(Date startTimestamp, Date endTimestamp, String keywords, String longitude, String latitude) {\r\n    {\r\n        File[] fList = file.listFiles();\r\n\t    if (fList == null)\r\n\t    \treturn new ArrayList&lt;String&gt;();\r\n\t    List&lt;String&gt; photos = Arrays.stream(fList)\r\n\t        .filter(f -&gt; f.lastModified() &gt;= startTimestamp.getTime())\r\n\t        .filter(f -&gt; f.getPath().contains(keywords))\r\n\t        .filter(f -&gt; keywords.equals(&quot;&quot;) || f.getPath().contains(keywords))\r\n\t        .filter(f -&gt; latitude.equals(&quot;&quot;) || f.getPath().contains(latitude))\r\n\t        .filter(f -&gt; keywords.equals(&quot;&quot;) || f.getPath().contains(keywords))\r\n\t        .map(f -&gt; f.getPath())  // convert File to String\r\n\t        .collect(Collectors.toList());\r\n    \treturn photos;\r\n    }\r\n ","title":"how to write complex if condition with File array in the lamba expression of stream API Android Java","body":"<p>There are several issues with your given approach:</p>\n<ul>\n<li>As others have already mentioned, the point of a lambda\nexpression is that it should be short and easy to understand.</li>\n<li>To get the logical <em>and</em> of your multiple logical\nexpressions you should chain the <code>filter(f -&gt; ...)</code> calls.\nThis is better than putting all the logic into one giant\nlambda expression.</li>\n<li>You need to understand the difference between <code>==</code> and\n<code>equals</code>. So instead of <code>keywords == &quot;&quot;</code> you probably\nwant <code>keywords.equals(&quot;&quot;)</code>.</li>\n<li>You cannot use <code>ArrayList&lt;String&gt;</code> because\n<code>.collect(Colllectors.toList())</code> is declared to give\na <code>List&lt;String&gt;</code>.</li>\n</ul>\n<p>Considering all this you might end up with something like this</p>\n<pre><code>private List&lt;String&gt; findPhotos(Date startTimestamp, Date endTimestamp, String keywords, String longitude, String latitude) {\n{\n    File[] fList = file.listFiles();\n    if (fList == null)\n        return new ArrayList&lt;String&gt;();\n    List&lt;String&gt; photos = Arrays.stream(fList)\n        .filter(f -&gt; f.lastModified() &gt;= startTimestamp.getTime())\n        .filter(f -&gt; f.getPath().contains(keywords))\n        .filter(f -&gt; keywords.equals(&quot;&quot;) || f.getPath().contains(keywords))\n        .filter(f -&gt; latitude.equals(&quot;&quot;) || f.getPath().contains(latitude))\n        .filter(f -&gt; keywords.equals(&quot;&quot;) || f.getPath().contains(keywords))\n        .map(f -&gt; f.getPath())  // convert File to String\n        .collect(Collectors.toList());\n    return photos;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1634403590,"creation_date":1634402645,"answer_id":69597618,"question_id":69592713,"body_markdown":"I believe the following should achieve your desired result.\r\n\r\n    private List&lt;String&gt; findPhotos(Date startTimestamp,\r\n                                    Date endTimestamp,\r\n                                    String keywords,\r\n                                    String longitude,\r\n                                    String latitude) {\r\n        return java.util.Arrays.stream(new file.listFiles())\r\n                               .filter(f -&gt; startTimestamp == null || f.lastModified() &gt;= startTimestamp.getTime())\r\n                               .filter(f -&gt; endTimestamp == null || f.lastModified() &lt;= endTimestamp.getTime())\r\n                               .map(file -&gt; file.getPath())\r\n                               .filter(path -&gt; keywords.isEmpty() || path.contains(keywords))\r\n                               .filter(path -&gt; longitude.isEmpty() || path.contains(longitude))\r\n                               .filter(path -&gt; latitude.isEmpty() || path.contains(latitude))\r\n                               .collect(Collectors.toList());\r\n    }\r\n\r\n* Method `stream`, in class `java.util.Arrays`, converts an array into a stream. In the above code, that stream will contain instances of class `java.io.File`.\r\n* Method `map`, in interface `java.util.stream.Stream`, returns a new stream that, in the above code, contains `String` elements.\r\n* Finally, all the paths that pass all the filters are collected into a `java.util.List`.\r\n","title":"how to write complex if condition with File array in the lamba expression of stream API Android Java","body":"<p>I believe the following should achieve your desired result.</p>\n<pre><code>private List&lt;String&gt; findPhotos(Date startTimestamp,\n                                Date endTimestamp,\n                                String keywords,\n                                String longitude,\n                                String latitude) {\n    return java.util.Arrays.stream(new file.listFiles())\n                           .filter(f -&gt; startTimestamp == null || f.lastModified() &gt;= startTimestamp.getTime())\n                           .filter(f -&gt; endTimestamp == null || f.lastModified() &lt;= endTimestamp.getTime())\n                           .map(file -&gt; file.getPath())\n                           .filter(path -&gt; keywords.isEmpty() || path.contains(keywords))\n                           .filter(path -&gt; longitude.isEmpty() || path.contains(longitude))\n                           .filter(path -&gt; latitude.isEmpty() || path.contains(latitude))\n                           .collect(Collectors.toList());\n}\n</code></pre>\n<ul>\n<li>Method <code>stream</code>, in class <code>java.util.Arrays</code>, converts an array into a stream. In the above code, that stream will contain instances of class <code>java.io.File</code>.</li>\n<li>Method <code>map</code>, in interface <code>java.util.stream.Stream</code>, returns a new stream that, in the above code, contains <code>String</code> elements.</li>\n<li>Finally, all the paths that pass all the filters are collected into a <code>java.util.List</code>.</li>\n</ul>\n"}],"owner":{"account_id":23048269,"reputation":3,"user_id":17165513,"display_name":"Aaron Lee"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":69597618,"answer_count":2,"score":-1,"last_activity_date":1634403590,"creation_date":1634359185,"question_id":69592713,"body_markdown":"I have the following code\r\n\r\n    private ArrayList&lt;String&gt; findPhotos(Date startTimestamp, Date endTimestamp, String keywords, String longitude, String latitude) {\r\n         \r\n         ArrayList&lt;String&gt; photos = new ArrayList&lt;String&gt;();\r\n         File[] fList = file.listFiles();\r\n            if (fList != null) {\r\n                for (File f : fList) {\r\n                    if (((startTimestamp == null &amp;&amp; endTimestamp == null) || (f.lastModified() &gt;= startTimestamp.getTime()\r\n                            &amp;&amp; f.lastModified() &lt;= endTimestamp.getTime())\r\n                    ) &amp;&amp; (keywords == &quot;&quot; || f.getPath().contains(keywords))\r\n                            &amp;&amp; (longitude == &quot;&quot; || f.getPath().contains(longitude))\r\n                            &amp;&amp; (latitude == &quot;&quot; || f.getPath().contains(latitude)))\r\n                        photos.add(f.getPath());\r\n                }\r\n            }\r\n        return photos\r\n    }\r\n\r\nThis function take five parameters:\r\n\r\n1. Startime time\r\n2. endtime\r\n3. keywork\r\n4. longitude\r\n5. latitude\r\n\r\nI filter them out to get the only desired results. I want to transfer this file array into lambda array and then perform following code.\r\n\r\n    Filter(startTimestamp == null &amp;&amp; endTimestamp == null)\r\n\r\nor \r\n\r\n    Filter(f -&gt; f.lastModified() &gt;= startTimestamp.getTime())\r\n\r\nand\r\n\r\n    Filter(f -&gt; f.getPath().contains(keywords) or (keywords == &quot;&quot;))\r\n\r\nand\r\n\r\n    Filter(keywords == &quot;&quot; || f -&gt; f.getPath().contains(keywords))\r\n\r\nand\r\n\r\n    Filter(latitude== &quot;&quot; || f -&gt; f.getPath().contains(latitude))\r\n    Filter(keywords == &quot;&quot; || f -&gt; f.getPath().contains(keywords))\r\n    \r\nand then get only paths, then \r\n\r\n    .collect(Collectors.toList());\r\n\r\nOnce I filter them out the File array and then add only file paths into `Arraylist&lt;String&gt;`. Can anyone help me to turn this one into lambda expression?\r\n","title":"how to write complex if condition with File array in the lamba expression of stream API Android Java","body":"<p>I have the following code</p>\n<pre><code>private ArrayList&lt;String&gt; findPhotos(Date startTimestamp, Date endTimestamp, String keywords, String longitude, String latitude) {\n     \n     ArrayList&lt;String&gt; photos = new ArrayList&lt;String&gt;();\n     File[] fList = file.listFiles();\n        if (fList != null) {\n            for (File f : fList) {\n                if (((startTimestamp == null &amp;&amp; endTimestamp == null) || (f.lastModified() &gt;= startTimestamp.getTime()\n                        &amp;&amp; f.lastModified() &lt;= endTimestamp.getTime())\n                ) &amp;&amp; (keywords == &quot;&quot; || f.getPath().contains(keywords))\n                        &amp;&amp; (longitude == &quot;&quot; || f.getPath().contains(longitude))\n                        &amp;&amp; (latitude == &quot;&quot; || f.getPath().contains(latitude)))\n                    photos.add(f.getPath());\n            }\n        }\n    return photos\n}\n</code></pre>\n<p>This function take five parameters:</p>\n<ol>\n<li>Startime time</li>\n<li>endtime</li>\n<li>keywork</li>\n<li>longitude</li>\n<li>latitude</li>\n</ol>\n<p>I filter them out to get the only desired results. I want to transfer this file array into lambda array and then perform following code.</p>\n<pre><code>Filter(startTimestamp == null &amp;&amp; endTimestamp == null)\n</code></pre>\n<p>or</p>\n<pre><code>Filter(f -&gt; f.lastModified() &gt;= startTimestamp.getTime())\n</code></pre>\n<p>and</p>\n<pre><code>Filter(f -&gt; f.getPath().contains(keywords) or (keywords == &quot;&quot;))\n</code></pre>\n<p>and</p>\n<pre><code>Filter(keywords == &quot;&quot; || f -&gt; f.getPath().contains(keywords))\n</code></pre>\n<p>and</p>\n<pre><code>Filter(latitude== &quot;&quot; || f -&gt; f.getPath().contains(latitude))\nFilter(keywords == &quot;&quot; || f -&gt; f.getPath().contains(keywords))\n</code></pre>\n<p>and then get only paths, then</p>\n<pre><code>.collect(Collectors.toList());\n</code></pre>\n<p>Once I filter them out the File array and then add only file paths into <code>Arraylist&lt;String&gt;</code>. Can anyone help me to turn this one into lambda expression?</p>\n"},{"tags":["java","swing","opengl"],"owner":{"account_id":23031618,"reputation":1,"user_id":17151016,"display_name":"ahmad salamah"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1634403510,"creation_date":1634220992,"question_id":69572303,"body_markdown":"[![https://i.stack.imgur.com/9vvs7.png][1]][1]\r\n\r\nthis is my code it displayes a sin function and the problem is that there is an extra black space which causes me problems when i whant to build a program this is the the attached code that i wrout but this problem occur in every program \r\n\r\n\tpublic static void main(String[] args) {\r\n\r\n\t\t// TODO Auto-generated method stub\r\n\t\tfinal GLProfile profile = GLProfile.get(GLProfile.GL2);\r\n\t\tGLCapabilities Capabilities = new GLCapabilities(profile);\r\n\t\tfinal GLCanvas glcanvas = new GLCanvas(Capabilities);\r\n\t\tdrawFun T = new drawFun();\r\n\r\n\t\tglcanvas.addGLEventListener(T);\r\n\t\tglcanvas.setSize(400, 400);\r\n\r\n\t\tfinal JFrame frame = new JFrame(&quot;test&quot;);\r\n\t\tframe.getContentPane().add(glcanvas);\r\n\t\tframe.setSize(400, 400);\r\n\t\tframe.setVisible(true);\r\n\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void display(GLAutoDrawable arg0) {\r\n\t\t// TODO Auto-generated method stub\r\n\r\n\t\tfinal GL2 gl = arg0.getGL().getGL2();\r\n    //\t\tgl.glClearColor(1, 1, 1, 1);\r\n    //\tgl.glClear(GL2.GL_COLOR_BUFFER_BIT);\r\n\t\t\r\n\t\t\r\n\t\tgl.glColor3f(1f, 1f, 1f);\r\n\t\tgl.glBegin(GL2.GL_QUADS);\r\n\t\tgl.glVertex2f(-1f,1f);\r\n\t\tgl.glVertex2f(1f, 1f);\r\n\t\tgl.glVertex2f(1f, -1f);\r\n\t\tgl.glVertex2f(-1f, -1f);\r\n\t\tgl.glEnd();\r\n\t\t\r\n\t\tgl.getContext();\r\n\t\tgl.glColor3f(1f, 0f, 0f);\r\n\t\tgl.glBegin(GL2.GL_LINES);\r\n\t\tgl.glVertex2f(-1f, 0f);\r\n\t\tgl.glVertex2f(1f, 0f);\r\n\t\tgl.glVertex2f(0f, 1f);\r\n\t\tgl.glVertex2f(0f, -1f);\r\n\r\n\t\tgl.glEnd();\r\n\t\tdrawXpow2plus5(gl);\r\n\t\t\r\n\r\n\t\r\n\t}\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/9vvs7.png","title":"how can i get rid of this extra black space in opengl","body":"<p><a href=\"https://i.stack.imgur.com/9vvs7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9vvs7.png\" alt=\"https://i.stack.imgur.com/9vvs7.png\" /></a></p>\n<p>this is my code it displayes a sin function and the problem is that there is an extra black space which causes me problems when i whant to build a program this is the the attached code that i wrout but this problem occur in every program</p>\n<pre><code>public static void main(String[] args) {\n\n    // TODO Auto-generated method stub\n    final GLProfile profile = GLProfile.get(GLProfile.GL2);\n    GLCapabilities Capabilities = new GLCapabilities(profile);\n    final GLCanvas glcanvas = new GLCanvas(Capabilities);\n    drawFun T = new drawFun();\n\n    glcanvas.addGLEventListener(T);\n    glcanvas.setSize(400, 400);\n\n    final JFrame frame = new JFrame(&quot;test&quot;);\n    frame.getContentPane().add(glcanvas);\n    frame.setSize(400, 400);\n    frame.setVisible(true);\n\n}\n\n@Override\npublic void display(GLAutoDrawable arg0) {\n    // TODO Auto-generated method stub\n\n    final GL2 gl = arg0.getGL().getGL2();\n//      gl.glClearColor(1, 1, 1, 1);\n//  gl.glClear(GL2.GL_COLOR_BUFFER_BIT);\n    \n    \n    gl.glColor3f(1f, 1f, 1f);\n    gl.glBegin(GL2.GL_QUADS);\n    gl.glVertex2f(-1f,1f);\n    gl.glVertex2f(1f, 1f);\n    gl.glVertex2f(1f, -1f);\n    gl.glVertex2f(-1f, -1f);\n    gl.glEnd();\n    \n    gl.getContext();\n    gl.glColor3f(1f, 0f, 0f);\n    gl.glBegin(GL2.GL_LINES);\n    gl.glVertex2f(-1f, 0f);\n    gl.glVertex2f(1f, 0f);\n    gl.glVertex2f(0f, 1f);\n    gl.glVertex2f(0f, -1f);\n\n    gl.glEnd();\n    drawXpow2plus5(gl);\n    \n\n\n}\n</code></pre>\n"},{"tags":["java","selenium-webdriver"],"answers":[{"tags":[],"owner":{"account_id":4261091,"reputation":32684,"user_id":3485434,"accept_rate":97,"display_name":"Prophet"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634402939,"creation_date":1634305212,"answer_id":69585641,"question_id":69585341,"body_markdown":"`implicitlyWait` waits for the element existence. \r\nSo in case of \r\n```driver.manage().timeouts().implicitlyWait(120, TimeUnit.SECONDS);\r\ndriver.findElement(By.xpath(&quot;/html/body/div[1]/div/div/div[4]/a&quot;)).click();\r\n```\r\nSelenium will try clicking that element immediately after the goal element appears.  \r\nIn many cases the element can still be not clickable so utilizing the `implicitlyWait` may often cause exceptions.  \r\nUsing `ExpectedConditions.visibilityOfElementLocated` will mostly work better, but still there are several situations this will not work.  \r\nIn some cases the goal element can be out of the visible screen. In this case you will have to scroll to the goal element in order to bring it into the visible screen and then click it properly.  \r\nIn some other cases during the page rendering Selenium will indicate element as visible and clickable while actually some other element may be overlapping on the goal element so clicking on it will cause the wrong element accepting the click. However if you give some more wait the page rendering process will complete and now you can click the goal element properly.  \r\nThis is seems to be your case.  \r\nIn most cases the overlapping element will be some kind of spinner element.  \r\nIf so you should add the `ExpectedConditions.invisibilityOfElementLocated` condition to wait until the spinner / other overlapping element is disappeared.  \r\nTo give more precise answer we need to see the specific site you are working on and the actual test flow you are doing.  \r\nYou can see more about the `ElementClickInterceptedException` [here][1], [here][2], [here][3] and at more resources.   \r\n**UPD**  \r\nFrom your comments I see you did not actually understand. Both implicitly and explicitly waits are pooling the DOM to find element matching the passed condition. In both cases at the moment the condition is met Selenium will immediately stop waiting and polling, it will return an element (or Boolean true in some cases) and continue to the next command.   \r\nImplicitly wait is waiting for element presence. So in many cases the element itself is still not finally rendered and may still not be clickable or visible but it is already present, so in your case \r\n```\r\ndriver.findElement(By.xpath(&quot;/html/body/div[1]/div/div/div[4]/a&quot;))\r\n```\r\nmay return the element that is still not ready to be clicked on.  \r\nThis is why it is preferred to use explicit waits like `ExpectedConditions.visibilityOfElementLocated` since in this case Selenium will wait polling the DOM until it finds the desired element to be **visible**, this is much more mature state of the element on the page and it can normally be clicked on this point.  \r\nHowever, sometimes it can be some spinner etc. on that element. This is some external problem. So in this case we need to add `ExpectedConditions.invisibilityOfElementLocated` to wait until that spinner is disappeared.  \r\nThere are more cases explicit wait will not be enough to be applied on the element itself. Sometimes you will have to scroll the desired element into the view, sometimes you will even need to use JavaScript click etc.\r\n\r\n\r\n\r\n[1]:https://stackoverflow.com/questions/48665001/can-not-click-on-a-element-elementclickinterceptedexception-in-splinter-selen\r\n[2]:https://stackoverflow.com/questions/56779520/elementclickinterceptedexception-element-click-intercepted\r\n[3]:https://stackoverflow.com/questions/57741875/selenium-common-exceptions-elementclickinterceptedexception-message-element-cl","title":"Selenium : Element is found when using Thread.sleep(), but not Implicit/Explicit waits","body":"<p><code>implicitlyWait</code> waits for the element existence.\nSo in case of</p>\n<pre><code>driver.findElement(By.xpath(&quot;/html/body/div[1]/div/div/div[4]/a&quot;)).click();\n</code></pre>\n<p>Selenium will try clicking that element immediately after the goal element appears.<br />\nIn many cases the element can still be not clickable so utilizing the <code>implicitlyWait</code> may often cause exceptions.<br />\nUsing <code>ExpectedConditions.visibilityOfElementLocated</code> will mostly work better, but still there are several situations this will not work.<br />\nIn some cases the goal element can be out of the visible screen. In this case you will have to scroll to the goal element in order to bring it into the visible screen and then click it properly.<br />\nIn some other cases during the page rendering Selenium will indicate element as visible and clickable while actually some other element may be overlapping on the goal element so clicking on it will cause the wrong element accepting the click. However if you give some more wait the page rendering process will complete and now you can click the goal element properly.<br />\nThis is seems to be your case.<br />\nIn most cases the overlapping element will be some kind of spinner element.<br />\nIf so you should add the <code>ExpectedConditions.invisibilityOfElementLocated</code> condition to wait until the spinner / other overlapping element is disappeared.<br />\nTo give more precise answer we need to see the specific site you are working on and the actual test flow you are doing.<br />\nYou can see more about the <code>ElementClickInterceptedException</code> <a href=\"https://stackoverflow.com/questions/48665001/can-not-click-on-a-element-elementclickinterceptedexception-in-splinter-selen\">here</a>, <a href=\"https://stackoverflow.com/questions/56779520/elementclickinterceptedexception-element-click-intercepted\">here</a>, <a href=\"https://stackoverflow.com/questions/57741875/selenium-common-exceptions-elementclickinterceptedexception-message-element-cl\">here</a> and at more resources.<br />\n<strong>UPD</strong><br />\nFrom your comments I see you did not actually understand. Both implicitly and explicitly waits are pooling the DOM to find element matching the passed condition. In both cases at the moment the condition is met Selenium will immediately stop waiting and polling, it will return an element (or Boolean true in some cases) and continue to the next command.<br />\nImplicitly wait is waiting for element presence. So in many cases the element itself is still not finally rendered and may still not be clickable or visible but it is already present, so in your case</p>\n<pre><code>driver.findElement(By.xpath(&quot;/html/body/div[1]/div/div/div[4]/a&quot;))\n</code></pre>\n<p>may return the element that is still not ready to be clicked on.<br />\nThis is why it is preferred to use explicit waits like <code>ExpectedConditions.visibilityOfElementLocated</code> since in this case Selenium will wait polling the DOM until it finds the desired element to be <strong>visible</strong>, this is much more mature state of the element on the page and it can normally be clicked on this point.<br />\nHowever, sometimes it can be some spinner etc. on that element. This is some external problem. So in this case we need to add <code>ExpectedConditions.invisibilityOfElementLocated</code> to wait until that spinner is disappeared.<br />\nThere are more cases explicit wait will not be enough to be applied on the element itself. Sometimes you will have to scroll the desired element into the view, sometimes you will even need to use JavaScript click etc.</p>\n"}],"owner":{"account_id":8862924,"reputation":99,"user_id":6618789,"accept_rate":50,"display_name":"Tester_at_work"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":787,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1634402939,"creation_date":1634303833,"question_id":69585341,"body_markdown":"I read about how beneficial in using Implicit/Explicit waits, and decided to abandon Thread.sleep() in my code. However, the result is opposite. Using Thread.sleep(), I can actually locate the element, while Implicit/Explicit waits result in the `ElementClickInterceptedException: element click intercepted: [duplicate]` error for the same element.\r\n\r\nThe element I am trying to simulate a click on is an &quot;I AGREE&quot; button located in a dialog box. The following is the DOM for the button which I am trying to click.[![enter image description here][1]][1]\r\n\r\nAnd the following is the code to simulate the click.\r\n\r\n**Using Implicit Wait**\r\n\r\n    driver.manage().timeouts().implicitlyWait(120, TimeUnit.SECONDS);\r\n    driver.findElement(By.xpath(&quot;/html/body/div[1]/div/div/div[4]/a&quot;)).click();\r\n**Result :** ElementClickInterceptedException: element click intercepted: [duplicate] error\r\n\r\n\r\n**Using Explicit Wait**\r\n\r\n    WebDriverWait wait = new WebDriverWait(driver, 60);\r\n    WebElement I_Agree; \r\n    I_Agree = wait.until(ExpectedConditions.visibilityOfElementLocated(By.xpath(&quot;/html/body/div[1]/div/div/div[4]/a&quot;)));\r\n    I_Agree.click();\r\n    \r\n**Result :** ElementClickInterceptedException: element click intercepted: [duplicate] error\r\n\r\n\r\n**Using Thread.sleep()**\r\n\r\n    Thread.sleep(20000);\r\n    driver.findElement(By.xpath(&quot;/html/body/div[1]/div/div/div[4]/a&quot;)).click();\r\n**Result :** Element is found and click can be executed. \r\n\r\nHope to have advice on any mistakes I may have done.\r\n\r\n  [1]: https://i.stack.imgur.com/0DFhj.png","title":"Selenium : Element is found when using Thread.sleep(), but not Implicit/Explicit waits","body":"<p>I read about how beneficial in using Implicit/Explicit waits, and decided to abandon Thread.sleep() in my code. However, the result is opposite. Using Thread.sleep(), I can actually locate the element, while Implicit/Explicit waits result in the <code>ElementClickInterceptedException: element click intercepted: [duplicate]</code> error for the same element.</p>\n<p>The element I am trying to simulate a click on is an &quot;I AGREE&quot; button located in a dialog box. The following is the DOM for the button which I am trying to click.<a href=\"https://i.stack.imgur.com/0DFhj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0DFhj.png\" alt=\"enter image description here\" /></a></p>\n<p>And the following is the code to simulate the click.</p>\n<p><strong>Using Implicit Wait</strong></p>\n<pre><code>driver.manage().timeouts().implicitlyWait(120, TimeUnit.SECONDS);\ndriver.findElement(By.xpath(&quot;/html/body/div[1]/div/div/div[4]/a&quot;)).click();\n</code></pre>\n<p><strong>Result :</strong> ElementClickInterceptedException: element click intercepted: [duplicate] error</p>\n<p><strong>Using Explicit Wait</strong></p>\n<pre><code>WebDriverWait wait = new WebDriverWait(driver, 60);\nWebElement I_Agree; \nI_Agree = wait.until(ExpectedConditions.visibilityOfElementLocated(By.xpath(&quot;/html/body/div[1]/div/div/div[4]/a&quot;)));\nI_Agree.click();\n</code></pre>\n<p><strong>Result :</strong> ElementClickInterceptedException: element click intercepted: [duplicate] error</p>\n<p><strong>Using Thread.sleep()</strong></p>\n<pre><code>Thread.sleep(20000);\ndriver.findElement(By.xpath(&quot;/html/body/div[1]/div/div/div[4]/a&quot;)).click();\n</code></pre>\n<p><strong>Result :</strong> Element is found and click can be executed.</p>\n<p>Hope to have advice on any mistakes I may have done.</p>\n"},{"tags":["java","java-io","fileinputstream"],"comments":[{"owner":{"account_id":22425724,"reputation":1060,"user_id":16632363,"display_name":"user16632363"},"score":0,"creation_date":1634402407,"post_id":69597543,"comment_id":123017049,"body_markdown":"&#39;bytes&#39; and &#39;characters&#39; are different things.  A character may, for example, be more than one byte.  (And putting a byte into a variable named &#39;character&#39; does not make it a character).  So by skipping every other byte, you may be skipping a part of a character, and the parts you don&#39;t skip may not make sense when considered to be bytes of the same character.  What exactly happens depends on what is in the file/","body":"&#39;bytes&#39; and &#39;characters&#39; are different things.  A character may, for example, be more than one byte.  (And putting a byte into a variable named &#39;character&#39; does not make it a character).  So by skipping every other byte, you may be skipping a part of a character, and the parts you don&#39;t skip may not make sense when considered to be bytes of the same character.  What exactly happens depends on what is in the file/"},{"owner":{"account_id":20776389,"reputation":1,"user_id":15257796,"display_name":"Nuan56"},"score":0,"creation_date":1634402519,"post_id":69597543,"comment_id":123017074,"body_markdown":"@user16632363 Can we say that the ascii codes are read partially and thus form different ascii codes which in turn correspond to other characters?","body":"@user16632363 Can we say that the ascii codes are read partially and thus form different ascii codes which in turn correspond to other characters?"},{"owner":{"account_id":22425724,"reputation":1060,"user_id":16632363,"display_name":"user16632363"},"score":0,"creation_date":1634402647,"post_id":69597543,"comment_id":123017105,"body_markdown":"We should not bother mentioning ASCII, since this is Java, which does not use that obsolete standard.  Java characters are Unicode characters.  Byte sequences are often the UTF-8 representation of Unicode characters.  UTF-8 has multi-byte characters; ASCII, a 7-bit code, does not.","body":"We should not bother mentioning ASCII, since this is Java, which does not use that obsolete standard.  Java characters are Unicode characters.  Byte sequences are often the UTF-8 representation of Unicode characters.  UTF-8 has multi-byte characters; ASCII, a 7-bit code, does not."},{"owner":{"account_id":22425724,"reputation":1060,"user_id":16632363,"display_name":"user16632363"},"score":0,"creation_date":1634402994,"post_id":69597543,"comment_id":123017195,"body_markdown":"But yes, **character** codes are read partially, and thus their constituent bytes are incorrectly recombined to make other characters.","body":"But yes, <b>character</b> codes are read partially, and thus their constituent bytes are incorrectly recombined to make other characters."},{"owner":{"account_id":20776389,"reputation":1,"user_id":15257796,"display_name":"Nuan56"},"score":0,"creation_date":1634403060,"post_id":69597543,"comment_id":123017210,"body_markdown":"@user16632363 Thanks for the help! I didn&#39;t know much about UTF-8 representation.","body":"@user16632363 Thanks for the help! I didn&#39;t know much about UTF-8 representation."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1645751509,"post_id":69597543,"comment_id":125960634,"body_markdown":"The output is very different from what? What&#39;s in the file?","body":"The output is very different from what? What&#39;s in the file?"}],"answers":[{"tags":[],"owner":{"account_id":4592578,"reputation":725,"user_id":3725508,"display_name":"Tony Yip"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634402671,"creation_date":1634402671,"answer_id":69597627,"question_id":69597543,"body_markdown":"When you call `fileinputstream.read`, it would read the byte of the cursor pointed to and move the cursor to the next byte. Since the `read` method is called when while loop condition is executed and a byte read out is gone. The tutorial used a variable to hold the value of that byte to prevent it is gone.\r\n\r\nSo just follow the tutorial","title":"Java FileInputStream.read() when printed shows undesired characters","body":"<p>When you call <code>fileinputstream.read</code>, it would read the byte of the cursor pointed to and move the cursor to the next byte. Since the <code>read</code> method is called when while loop condition is executed and a byte read out is gone. The tutorial used a variable to hold the value of that byte to prevent it is gone.</p>\n<p>So just follow the tutorial</p>\n"}],"owner":{"account_id":20776389,"reputation":1,"user_id":15257796,"display_name":"Nuan56"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1634402671,"creation_date":1634402055,"question_id":69597543,"body_markdown":"The tutorial I&#39;m following showed the following code \r\n```FileInputStream fileinputstream=new FileInputStream(file);\r\n\t\t\tSystem.out.println(&quot;File contents: &quot;);\r\n\t\t\tint character;\r\n\t\t\twhile((character=fileinputstream.read())!=-1) {\t\r\n\t\t\t\tSystem.out.print((char)character);\r\n\t\t\t}\r\n\t\t\tfileinputstream.close();\r\n```\r\nI tried it the following way\r\n```FileInputStream fileinputstream=new FileInputStream(file);\r\n\t\t\tSystem.out.println(&quot;File contents: &quot;);\r\n\t\t\twhile((fileinputstream.read())!=-1) {\t\r\n\t\t\t\tSystem.out.print((char)fileinputstream.read());\r\n\t\t\t}\r\n\t\t\tfileinputstream.close();\r\n```\r\nNow, I understand that here some bytes are going to get skipped. But the bytes that aren&#39;t skipped are expected to be printed as they are. But the output is very different with random characters.\r\n\r\nI would like to understand the problem here. Thanks for any help provided!","title":"Java FileInputStream.read() when printed shows undesired characters","body":"<p>The tutorial I'm following showed the following code</p>\n<pre><code>            System.out.println(&quot;File contents: &quot;);\n            int character;\n            while((character=fileinputstream.read())!=-1) { \n                System.out.print((char)character);\n            }\n            fileinputstream.close();\n</code></pre>\n<p>I tried it the following way</p>\n<pre><code>            System.out.println(&quot;File contents: &quot;);\n            while((fileinputstream.read())!=-1) {   \n                System.out.print((char)fileinputstream.read());\n            }\n            fileinputstream.close();\n</code></pre>\n<p>Now, I understand that here some bytes are going to get skipped. But the bytes that aren't skipped are expected to be printed as they are. But the output is very different with random characters.</p>\n<p>I would like to understand the problem here. Thanks for any help provided!</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":21415032,"reputation":181,"user_id":16720064,"display_name":"0xff"},"score":1,"creation_date":1634401217,"post_id":69597419,"comment_id":123016767,"body_markdown":"Looks like the value at that array index is `null` -&gt; not set yet. You want to initialize it first before calling methods on it, otherwise it&#39;ll throw a `NullPointerException`","body":"Looks like the value at that array index is <code>null</code> -&gt; not set yet. You want to initialize it first before calling methods on it, otherwise it&#39;ll throw a <code>NullPointerException</code>"},{"owner":{"account_id":17783121,"reputation":418,"user_id":12913865,"display_name":"imon Vyhnis"},"score":1,"creation_date":1634401357,"post_id":69597419,"comment_id":123016804,"body_markdown":"Please provide code and error message like a text not image, it&#39;s quite unreadable.","body":"Please provide code and error message like a text not image, it&#39;s quite unreadable."},{"owner":{"account_id":23052584,"reputation":9,"user_id":17169162,"display_name":"Kevin Pereira"},"score":0,"creation_date":1634401483,"post_id":69597419,"comment_id":123016832,"body_markdown":"I&#39;m very sorry, I didn&#39;t know, so do I like copy paste all the code I have or something?","body":"I&#39;m very sorry, I didn&#39;t know, so do I like copy paste all the code I have or something?"}],"answers":[{"tags":[],"owner":{"account_id":17783121,"reputation":418,"user_id":12913865,"display_name":"imon Vyhnis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634402343,"creation_date":1634402343,"answer_id":69597577,"question_id":69597419,"body_markdown":"When you create array of objects in java, it&#39;s blank. That means all objects are null, they &#39;don&#39;t exist&#39;. So you have to create objects in the array and only than you can access them. \r\n\r\nSo you have to call first:\r\n\r\n    icsClass[0] = new Student();\r\n\r\nAnd than you can call methods like `icsClass[0].setYear(2010);`\r\n\r\nI would suggest you to do a little cleanup of your code, try to split it into more methods, rename InputOK to inputOK etc.","title":"can&#39;t understand error for new Java learner","body":"<p>When you create array of objects in java, it's blank. That means all objects are null, they 'don't exist'. So you have to create objects in the array and only than you can access them.</p>\n<p>So you have to call first:</p>\n<pre><code>icsClass[0] = new Student();\n</code></pre>\n<p>And than you can call methods like <code>icsClass[0].setYear(2010);</code></p>\n<p>I would suggest you to do a little cleanup of your code, try to split it into more methods, rename InputOK to inputOK etc.</p>\n"}],"owner":{"account_id":23052584,"reputation":9,"user_id":17169162,"display_name":"Kevin Pereira"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"closed_date":1634457556,"answer_count":1,"score":-1,"last_activity_date":1634402363,"creation_date":1634401139,"question_id":69597419,"body_markdown":"I just started learning java a week ago and I&#39;m trying to make an array with a maximum of 10 individuals. \r\n\r\nI need to then have the first name, last name, and date of birth of a student and have it in a loop or something until they type the correct date, for example u can&#39;t enter a month of 13 because it is invalid. \r\n\r\nThere is a part where I have to confirm with the user if the information is correct, where they reply yes or no, I keep getting an error in this part and would like to know what it means. \r\n\r\nSorry if my English is bad it&#39;s not my first language. [enter image description here][1]\r\n\r\n``` \r\npackage com.company;\r\n\r\nimport java.util.Scanner;\r\n\r\nimport static com.company.ProjectCONSTANTS.*;\r\n\r\npublic class Main {\r\n\r\n    public static void main(String[] args) {\r\n\r\n        Student icsClass[] = new Student[10];\r\n\r\n        Scanner s = new Scanner(System.in);\r\n\r\n        Student st = new Student();\r\n        Boolean InputOK = true;\r\n        String sInput;\r\n        String tmpFirstName, tmpLastName;\r\n        int a1, a2, a3;\r\n\r\n        int iInput;\r\n        int counter = 0;\r\n\r\n        while (counter &lt; 2) {\r\n\r\n            // While loop for First Name\r\n            do {\r\n                System.out.println(&quot;Please enter the first name of the student&quot;);\r\n                sInput = s.nextLine();\r\n                tmpFirstName=sInput;\r\n                if (sInput.isEmpty()) {\r\n                    System.out.println(&quot; String is left empty. Please enter your first name&quot;);\r\n                    InputOK = false;\r\n                } else {\r\n                    InputOK = true;\r\n                    st.setFName(sInput);\r\n                    //icsClass[counter].setFName(sInput);\r\n                }\r\n            } while (!InputOK);\r\n\r\n            // While loop for Last name\r\n            do {\r\n                System.out.println(&quot; Pleas enter your last name&quot;);\r\n                sInput = s.nextLine();\r\n                if (sInput.isEmpty()) {\r\n                    System.out.println(&quot; String is left empty. Please enter your last name&quot;);\r\n                    InputOK = false;\r\n                } else {\r\n                    InputOK = true;\r\n                    st.setlName(sInput);\r\n                    //icsClass[counter].setlName(sInput);\r\n                }\r\n            } while (!InputOK);\r\n\r\n            //  }\r\n// Ask user to input year\r\n            do {\r\n                System.out.println(&quot; Pleas enter your year of birth&quot;);\r\n                sInput = s.nextLine();\r\n                iInput = Integer.parseInt(sInput);\r\n                if (iInput &lt; MIN_YEAR || iInput &gt; MAX_YEAR) {\r\n                    System.out.println(&quot;Not a valid year. Please input a valid Year between 1895 and 2021&quot;);\r\n                    InputOK = false;\r\n                } else {\r\n                    InputOK = true;\r\n                    st.setYear(iInput);\r\n                    //icsClass[counter].setYear(sInput);\r\n                }\r\n            } while (!InputOK);\r\n\r\n// Ask user to input month\r\n            do {\r\n                System.out.println(&quot; Pleas enter your month of birth&quot;);\r\n                sInput = s.nextLine();\r\n                iInput = Integer.parseInt(sInput);\r\n                if (iInput &lt; Min_Month || iInput &gt; MAX_MONTH) {\r\n                    System.out.println(&quot;Not a valid month. Please input a valid month between 1 and 12&quot;);\r\n                    InputOK = false;\r\n                } else {\r\n                    InputOK = true;\r\n                    st.setMonth(iInput);\r\n                    //icsClass[counter].setMonth(sInput);\r\n                }\r\n\r\n            } while (!InputOK);\r\n\r\n            // ask user to input day\r\n            do {\r\n                System.out.println(&quot; Pleas enter your day in your date of birth&quot;);\r\n                sInput = s.nextLine();\r\n                iInput = Integer.parseInt(sInput);\r\n                if (iInput &lt; MIN_DAY || iInput &gt; MAX_DAY) {\r\n                    System.out.println(&quot;Not a valid day. Please input a valid day between 1 and 31&quot;);\r\n                    InputOK = false;\r\n                } else {\r\n                    InputOK = true;\r\n                    st.setDay(iInput);\r\n                    //icsClass[counter].setDay(sInput);\r\n                }\r\n\r\n            } while (!InputOK);\r\n\r\n        System.out.println(&quot;Student Data Saved:&quot; );\r\n        System.out.println(&quot;Full Name :&quot; + st.getFName() + &quot; &quot; + st.getLName());\r\n        System.out.println(&quot;Date of Birth :&quot; + st.getDay() + &quot;/&quot; + st.getMonth() + &quot;/&quot; + st.getYear());\r\n\r\n        String vConfirm;\r\n        System.out.println( &quot;Is the above information correct (yes/no) ?&quot;);\r\n        vConfirm = s.next();\r\n\r\n        if (vConfirm.equals(&quot;yes&quot;)) {\r\n             // Save the data to the array\r\n            System.out.println(&quot;Full Name :&quot; + st.getFName());\r\n            System.out.println(&quot;array length :&quot; + icsClass.length);\r\n            System.out.println(&quot;Full Name :&quot; + tmpFirstName);\r\n            System.out.println(&quot;counter value is : &quot; + counter);\r\n            //icsClass[counter].setFName(tmpFirstName);\r\n            //icsClass[counter].setlName(st.getLName());\r\n            icsClass[0].setYear(2010);\r\n            //icsClass[counter].setMonth(st.getMonth());\r\n            // icsClass[counter].setDay(st.getDay());\r\n        }\r\n        if (vConfirm.equals(&quot;no&quot;)) {\r\n            // don&#39;t change the counter and ask to re-enter the values\r\n            System.out.println (&quot; inside no condition&quot;);\r\n        }\r\n    }\r\n}\r\n}\r\n```\r\n  [1]: https://i.stack.imgur.com/hj2Zy.png","title":"can&#39;t understand error for new Java learner","body":"<p>I just started learning java a week ago and I'm trying to make an array with a maximum of 10 individuals.</p>\n<p>I need to then have the first name, last name, and date of birth of a student and have it in a loop or something until they type the correct date, for example u can't enter a month of 13 because it is invalid.</p>\n<p>There is a part where I have to confirm with the user if the information is correct, where they reply yes or no, I keep getting an error in this part and would like to know what it means.</p>\n<p>Sorry if my English is bad it's not my first language. <a href=\"https://i.stack.imgur.com/hj2Zy.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<pre><code>package com.company;\n\nimport java.util.Scanner;\n\nimport static com.company.ProjectCONSTANTS.*;\n\npublic class Main {\n\n    public static void main(String[] args) {\n\n        Student icsClass[] = new Student[10];\n\n        Scanner s = new Scanner(System.in);\n\n        Student st = new Student();\n        Boolean InputOK = true;\n        String sInput;\n        String tmpFirstName, tmpLastName;\n        int a1, a2, a3;\n\n        int iInput;\n        int counter = 0;\n\n        while (counter &lt; 2) {\n\n            // While loop for First Name\n            do {\n                System.out.println(&quot;Please enter the first name of the student&quot;);\n                sInput = s.nextLine();\n                tmpFirstName=sInput;\n                if (sInput.isEmpty()) {\n                    System.out.println(&quot; String is left empty. Please enter your first name&quot;);\n                    InputOK = false;\n                } else {\n                    InputOK = true;\n                    st.setFName(sInput);\n                    //icsClass[counter].setFName(sInput);\n                }\n            } while (!InputOK);\n\n            // While loop for Last name\n            do {\n                System.out.println(&quot; Pleas enter your last name&quot;);\n                sInput = s.nextLine();\n                if (sInput.isEmpty()) {\n                    System.out.println(&quot; String is left empty. Please enter your last name&quot;);\n                    InputOK = false;\n                } else {\n                    InputOK = true;\n                    st.setlName(sInput);\n                    //icsClass[counter].setlName(sInput);\n                }\n            } while (!InputOK);\n\n            //  }\n// Ask user to input year\n            do {\n                System.out.println(&quot; Pleas enter your year of birth&quot;);\n                sInput = s.nextLine();\n                iInput = Integer.parseInt(sInput);\n                if (iInput &lt; MIN_YEAR || iInput &gt; MAX_YEAR) {\n                    System.out.println(&quot;Not a valid year. Please input a valid Year between 1895 and 2021&quot;);\n                    InputOK = false;\n                } else {\n                    InputOK = true;\n                    st.setYear(iInput);\n                    //icsClass[counter].setYear(sInput);\n                }\n            } while (!InputOK);\n\n// Ask user to input month\n            do {\n                System.out.println(&quot; Pleas enter your month of birth&quot;);\n                sInput = s.nextLine();\n                iInput = Integer.parseInt(sInput);\n                if (iInput &lt; Min_Month || iInput &gt; MAX_MONTH) {\n                    System.out.println(&quot;Not a valid month. Please input a valid month between 1 and 12&quot;);\n                    InputOK = false;\n                } else {\n                    InputOK = true;\n                    st.setMonth(iInput);\n                    //icsClass[counter].setMonth(sInput);\n                }\n\n            } while (!InputOK);\n\n            // ask user to input day\n            do {\n                System.out.println(&quot; Pleas enter your day in your date of birth&quot;);\n                sInput = s.nextLine();\n                iInput = Integer.parseInt(sInput);\n                if (iInput &lt; MIN_DAY || iInput &gt; MAX_DAY) {\n                    System.out.println(&quot;Not a valid day. Please input a valid day between 1 and 31&quot;);\n                    InputOK = false;\n                } else {\n                    InputOK = true;\n                    st.setDay(iInput);\n                    //icsClass[counter].setDay(sInput);\n                }\n\n            } while (!InputOK);\n\n        System.out.println(&quot;Student Data Saved:&quot; );\n        System.out.println(&quot;Full Name :&quot; + st.getFName() + &quot; &quot; + st.getLName());\n        System.out.println(&quot;Date of Birth :&quot; + st.getDay() + &quot;/&quot; + st.getMonth() + &quot;/&quot; + st.getYear());\n\n        String vConfirm;\n        System.out.println( &quot;Is the above information correct (yes/no) ?&quot;);\n        vConfirm = s.next();\n\n        if (vConfirm.equals(&quot;yes&quot;)) {\n             // Save the data to the array\n            System.out.println(&quot;Full Name :&quot; + st.getFName());\n            System.out.println(&quot;array length :&quot; + icsClass.length);\n            System.out.println(&quot;Full Name :&quot; + tmpFirstName);\n            System.out.println(&quot;counter value is : &quot; + counter);\n            //icsClass[counter].setFName(tmpFirstName);\n            //icsClass[counter].setlName(st.getLName());\n            icsClass[0].setYear(2010);\n            //icsClass[counter].setMonth(st.getMonth());\n            // icsClass[counter].setDay(st.getDay());\n        }\n        if (vConfirm.equals(&quot;no&quot;)) {\n            // don't change the counter and ask to re-enter the values\n            System.out.println (&quot; inside no condition&quot;);\n        }\n    }\n}\n}\n</code></pre>\n"},{"tags":["java","xcode","homebrew","macos-big-sur"],"owner":{"account_id":1939636,"reputation":28457,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":444,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1634401927,"creation_date":1634401927,"question_id":69597526,"body_markdown":"I am trying to install OpenJDK8 on `macOS Big Sur Version 11.6` via homebrew. I have XCode installed on my machine\r\n\r\n```\r\n~ &#187; brew install --build-from-source openjdk@8                                                                                                                                   130  naman@NehaNamans-MBP\r\n==&gt; Downloading https://cdn.azul.com/zulu/bin/zulu7.48.0.11-ca-jdk7.0.312-macosx_x64.tar.gz\r\nAlready downloaded: /Users/naman/Library/Caches/Homebrew/downloads/f5fe893278c9e68c337604d92cf3e326951f170bdec8045920961dc35829351d--zulu7.48.0.11-ca-jdk7.0.312-macosx_x64.tar.gz\r\n==&gt; Downloading https://openjdk-sources.osci.io/openjdk8/openjdk8u302-ga.tar.xz\r\nAlready downloaded: /Users/naman/Library/Caches/Homebrew/downloads/9b4c6c47126f0ca0b976fa7f0cfb9a6aa99a23e587e35ad49812c9d06bc95ec9--openjdk8u302-ga.tar.xz\r\n==&gt; common/autoconf/autogen.sh\r\n==&gt; ./configure --with-boot-jdk-jvmargs=-Duser.home=/Users/naman/Library/Caches/Homebrew/java_cache --with-boot-jdk=/private/tmp/openjdkA8-20211016-20304-10w7kza/jdk8u302-ga/boot-jdk --with-debug-level=re\r\nLast 15 lines from /Users/naman/Library/Logs/Homebrew/openjdk@8/02.configure:\r\nchecking for javah in Boot JDK... ok\r\nchecking for javap in Boot JDK... ok\r\nchecking for jar in Boot JDK... ok\r\nchecking for rmic in Boot JDK... ok\r\nchecking for native2ascii in Boot JDK... ok\r\nchecking if Boot JDK is 32 or 64 bits... 64\r\nchecking flags for boot jdk java command ...  -Duser.home=/Users/naman/Library/Caches/Homebrew/java_cache\r\nchecking flags for boot jdk java command for big workloads...  -Xms64M -Xmx1600M -XX:ThreadStackSize=1536 -XX:PermSize=32m -XX:MaxPermSize=160m\r\nchecking flags for boot jdk java command for small workloads...  -XX:+UseSerialGC -Xms32M -Xmx512M\r\nconfigure: Xcode major version: 13\r\nconfigure: Using default toolchain clang (clang/LLVM)\r\nchecking Determining if we need to set DEVELOPER_DIR... no\r\nchecking for xcodebuild... /usr/bin/xcodebuild\r\nconfigure: error: Xcode 6, 9-12 is required to build JDK 8, the version found was 13.0. Use --with-xcode-path to specify the location of Xcode or make Xcode active by using xcode-select.\r\nconfigure exiting with result code 1\r\n\r\nDo not report this issue to Homebrew/brew or Homebrew/core!\r\n```\r\n\r\nI tried executing the following command to just validate, if its possible to override the args:\r\n\r\n```\r\nbrew install --build-from-source --with-xcode-path &quot;/Applications/Xcode.app/Contents/Developer&quot;  openjdk@8  \r\n```\r\n\r\nbut close to what I was expecting, ended up with \r\n\r\n```\r\nError: invalid option: --with-xcode-path\r\n```\r\n\r\nRealising further, that I need to ensure that the command within this formula, needs to be overridden, but I am unable to execute it that way either:\r\n\r\n```\r\n./configure --with-boot-jdk-jvmargs=-Duser.home=/Users/naman/Library/Caches/Homebrew/java_cache --with-boot-jdk=/private/tmp/openjdkA8-20211016-20304-10w7kza/jdk8u302-ga/boot-jdk --with-debug-level=re\r\n```","title":"Configure brew install to execute with custom command","body":"<p>I am trying to install OpenJDK8 on <code>macOS Big Sur Version 11.6</code> via homebrew. I have XCode installed on my machine</p>\n<pre><code>~  brew install --build-from-source openjdk@8                                                                                                                                   130  naman@NehaNamans-MBP\n==&gt; Downloading https://cdn.azul.com/zulu/bin/zulu7.48.0.11-ca-jdk7.0.312-macosx_x64.tar.gz\nAlready downloaded: /Users/naman/Library/Caches/Homebrew/downloads/f5fe893278c9e68c337604d92cf3e326951f170bdec8045920961dc35829351d--zulu7.48.0.11-ca-jdk7.0.312-macosx_x64.tar.gz\n==&gt; Downloading https://openjdk-sources.osci.io/openjdk8/openjdk8u302-ga.tar.xz\nAlready downloaded: /Users/naman/Library/Caches/Homebrew/downloads/9b4c6c47126f0ca0b976fa7f0cfb9a6aa99a23e587e35ad49812c9d06bc95ec9--openjdk8u302-ga.tar.xz\n==&gt; common/autoconf/autogen.sh\n==&gt; ./configure --with-boot-jdk-jvmargs=-Duser.home=/Users/naman/Library/Caches/Homebrew/java_cache --with-boot-jdk=/private/tmp/openjdkA8-20211016-20304-10w7kza/jdk8u302-ga/boot-jdk --with-debug-level=re\nLast 15 lines from /Users/naman/Library/Logs/Homebrew/openjdk@8/02.configure:\nchecking for javah in Boot JDK... ok\nchecking for javap in Boot JDK... ok\nchecking for jar in Boot JDK... ok\nchecking for rmic in Boot JDK... ok\nchecking for native2ascii in Boot JDK... ok\nchecking if Boot JDK is 32 or 64 bits... 64\nchecking flags for boot jdk java command ...  -Duser.home=/Users/naman/Library/Caches/Homebrew/java_cache\nchecking flags for boot jdk java command for big workloads...  -Xms64M -Xmx1600M -XX:ThreadStackSize=1536 -XX:PermSize=32m -XX:MaxPermSize=160m\nchecking flags for boot jdk java command for small workloads...  -XX:+UseSerialGC -Xms32M -Xmx512M\nconfigure: Xcode major version: 13\nconfigure: Using default toolchain clang (clang/LLVM)\nchecking Determining if we need to set DEVELOPER_DIR... no\nchecking for xcodebuild... /usr/bin/xcodebuild\nconfigure: error: Xcode 6, 9-12 is required to build JDK 8, the version found was 13.0. Use --with-xcode-path to specify the location of Xcode or make Xcode active by using xcode-select.\nconfigure exiting with result code 1\n\nDo not report this issue to Homebrew/brew or Homebrew/core!\n</code></pre>\n<p>I tried executing the following command to just validate, if its possible to override the args:</p>\n<pre><code>brew install --build-from-source --with-xcode-path &quot;/Applications/Xcode.app/Contents/Developer&quot;  openjdk@8  \n</code></pre>\n<p>but close to what I was expecting, ended up with</p>\n<pre><code>Error: invalid option: --with-xcode-path\n</code></pre>\n<p>Realising further, that I need to ensure that the command within this formula, needs to be overridden, but I am unable to execute it that way either:</p>\n<pre><code>./configure --with-boot-jdk-jvmargs=-Duser.home=/Users/naman/Library/Caches/Homebrew/java_cache --with-boot-jdk=/private/tmp/openjdkA8-20211016-20304-10w7kza/jdk8u302-ga/boot-jdk --with-debug-level=re\n</code></pre>\n"},{"tags":["java","bytecode","java-bytecode-asm"],"comments":[{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1473854213,"post_id":39488930,"comment_id":66297228,"body_markdown":"Not sure why you are pushing a file name. Note: `long` takes 2 slots so you have 7 values on the stack with the last position being the slot 8 (which is the 9th slot starting at 0)","body":"Not sure why you are pushing a file name. Note: <code>long</code> takes 2 slots so you have 7 values on the stack with the last position being the slot 8 (which is the 9th slot starting at 0)"},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1473854280,"post_id":39488930,"comment_id":66297272,"body_markdown":"What are ACCESS_METHOD_NAME / DESC?","body":"What are ACCESS_METHOD_NAME / DESC?"},{"owner":{"account_id":265317,"reputation":1532,"user_id":552203,"accept_rate":50,"display_name":"Herman"},"score":0,"creation_date":1473854376,"post_id":39488930,"comment_id":66297328,"body_markdown":"Those are in a file which exposes the hooks to call. See http://www.slideshare.net/Takipi/advanced-production-debugging#33 for an example from Takipi.","body":"Those are in a file which exposes the hooks to call. See <a href=\"http://www.slideshare.net/Takipi/advanced-production-debugging#33\" rel=\"nofollow noreferrer\">slideshare.net/Takipi/advanced-production-debugging#33</a> for an example from Takipi."},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1473854504,"post_id":39488930,"comment_id":66297403,"body_markdown":"I didn&#39;t mean their purpose, I meant are they referring to the right method?","body":"I didn&#39;t mean their purpose, I meant are they referring to the right method?"},{"owner":{"account_id":265317,"reputation":1532,"user_id":552203,"accept_rate":50,"display_name":"Herman"},"score":0,"creation_date":1473856629,"post_id":39488930,"comment_id":66298765,"body_markdown":"that was indeed the problem, tnx!","body":"that was indeed the problem, tnx!"}],"answers":[{"tags":[],"owner":{"account_id":1520477,"reputation":38093,"user_id":1420279,"accept_rate":80,"display_name":"Antimony"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1473852530,"creation_date":1473852530,"answer_id":39489300,"question_id":39488930,"body_markdown":"There is no reason to store the stack anywhere, because, the stack is well, a stack. You can just push the log arguments, call the logging function, pop the result, and you&#39;ll have the original stack still in place.","title":"ASM ByteCode: prepending visitMethodInsn with another invocation","body":"<p>There is no reason to store the stack anywhere, because, the stack is well, a stack. You can just push the log arguments, call the logging function, pop the result, and you'll have the original stack still in place.</p>\n"}],"owner":{"account_id":265317,"reputation":1532,"user_id":552203,"accept_rate":50,"display_name":"Herman"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":427,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":39489300,"answer_count":1,"score":0,"last_activity_date":1634400970,"creation_date":1473851312,"question_id":39488930,"body_markdown":"Suppose I want to call a (logging) method **before** the invocation of some method of interest. This means that when listening for visitMethodInsn the stack is already populated with the arguments for the method(s) of interest.\r\n\r\nIs it possible to then store the current stack somewhere, call the log and repopulate the stack? Am I missing any obvious stack mutation operators? Or do I really need to either:\r\n\r\n- store the stack in variables temporarily\r\n- buffer all stack mutation calls until a method invocation to replay the buffer after my (possibly not applicable) logging invocation?\r\n\r\n**Example**: given the original code\r\n\r\n    public static void main() \r\n    {\r\n      doSomethingUnrelated();\r\n\r\n      methodOfInterest(); // line 5 for example\r\n\r\n      doSomethingUnrelated();\r\n    }\r\n    \r\nthe resulting code should be like:\r\n\r\n    public static void main() \r\n    {\r\n      doSomethingUnrelated();\r\n\r\n      Logger.log(&quot;methodOfInterest&quot;, &quot;main&quot;, 5); \r\n      methodOfInterest();\r\n\r\n      doSomethingUnrelated();\r\n    }\r\n    \r\n    public Logger \r\n    {\r\n      public static void log(String method, String callee, int line) \r\n      { ... }\r\n    }\r\n\r\n\r\n----------\r\n\r\nContext: my actual ASM MethodVisitor looks like this:\r\n\r\n    class UsageClassMethodVisitor extends MethodVisitor implements Opcodes\r\n    {\r\n        private final String fileName;\r\n        private final String visitedClass;\r\n        private final String visitedMethod;\r\n        private int lineNumber;\r\n    \r\n        UsageClassMethodVisitor(MethodVisitor mv, String fileName, String visitedClass, String visitedMethod, boolean isStatic)\r\n        {\r\n            super(Opcodes.ASM5, mv);\r\n            this.fileName = fileName;\r\n            this.visitedClass = visitedClass;\r\n            this.visitedMethod = visitedMethod;\r\n        }\r\n    \r\n        @Override\r\n        public void visitLineNumber(int i, Label label) {\r\n            lineNumber = i;\r\n            super.visitLineNumber(i, label);\r\n        }\r\n    \r\n        @Override\r\n        public void visitMethodInsn(int access, String ownerClass, String method, String signature, boolean isInterface) {\r\n            if(ownerClass.contains(&quot;org/example/package/&quot;)) {\r\n                System.out.printf(&quot;prepending to visitMethodInsn(%s, %s, %s, %b) @ %s.%s:%d\\n&quot;,\r\n                        ownerClass, method, signature, isInterface,\r\n                        visitedClass, visitedMethod, lineNumber);\r\n                super.visitLdcInsn(fileName);\r\n                super.visitLdcInsn(visitedClass);\r\n                super.visitLdcInsn(visitedMethod);\r\n                super.visitLdcInsn(lineNumber);\r\n                super.visitMethodInsn(Opcodes.INVOKESTATIC,\r\n                        Hook.ACCESS_OWNER_NAME,\r\n                        Hook.ACCESS_METHOD_NAME,\r\n                        Hook.ACCESS_METHOD_DESC, false);\r\n            }\r\n            super.visitMethodInsn(access, ownerClass, method, signature, isInterface);\r\n        }\r\n    }\r\n\r\n but obviously this is throwing an error as the stack is 8 long instead of 4 at the time of invocation:\r\n\r\n    Exception in thread &quot;main&quot; java.lang.VerifyError: Bad type on operand stack\r\n    Exception Details:\r\n      Location:\r\n        org.using.package.Main.main([Ljava/lang/String;)V @13: invokestatic\r\n      Reason:\r\n        Type integer (current frame, stack[8]) is not assignable to &#39;java/lang/String&#39;\r\n      Current Frame:\r\n    bci: @13\r\n    flags: { }\r\n    locals: { &#39;[Ljava/lang/String;&#39; }\r\n    stack: { long, long_2nd, long, long_2nd, &#39;java/util/concurrent/TimeUnit&#39;, &#39;java/lang/String&#39;, &#39;java/lang/String&#39;, &#39;java/lang/String&#39;, integer }","title":"ASM ByteCode: prepending visitMethodInsn with another invocation","body":"<p>Suppose I want to call a (logging) method <strong>before</strong> the invocation of some method of interest. This means that when listening for visitMethodInsn the stack is already populated with the arguments for the method(s) of interest.</p>\n\n<p>Is it possible to then store the current stack somewhere, call the log and repopulate the stack? Am I missing any obvious stack mutation operators? Or do I really need to either:</p>\n\n<ul>\n<li>store the stack in variables temporarily</li>\n<li>buffer all stack mutation calls until a method invocation to replay the buffer after my (possibly not applicable) logging invocation?</li>\n</ul>\n\n<p><strong>Example</strong>: given the original code</p>\n\n<pre><code>public static void main() \n{\n  doSomethingUnrelated();\n\n  methodOfInterest(); // line 5 for example\n\n  doSomethingUnrelated();\n}\n</code></pre>\n\n<p>the resulting code should be like:</p>\n\n<pre><code>public static void main() \n{\n  doSomethingUnrelated();\n\n  Logger.log(\"methodOfInterest\", \"main\", 5); \n  methodOfInterest();\n\n  doSomethingUnrelated();\n}\n\npublic Logger \n{\n  public static void log(String method, String callee, int line) \n  { ... }\n}\n</code></pre>\n\n<hr>\n\n<p>Context: my actual ASM MethodVisitor looks like this:</p>\n\n<pre><code>class UsageClassMethodVisitor extends MethodVisitor implements Opcodes\n{\n    private final String fileName;\n    private final String visitedClass;\n    private final String visitedMethod;\n    private int lineNumber;\n\n    UsageClassMethodVisitor(MethodVisitor mv, String fileName, String visitedClass, String visitedMethod, boolean isStatic)\n    {\n        super(Opcodes.ASM5, mv);\n        this.fileName = fileName;\n        this.visitedClass = visitedClass;\n        this.visitedMethod = visitedMethod;\n    }\n\n    @Override\n    public void visitLineNumber(int i, Label label) {\n        lineNumber = i;\n        super.visitLineNumber(i, label);\n    }\n\n    @Override\n    public void visitMethodInsn(int access, String ownerClass, String method, String signature, boolean isInterface) {\n        if(ownerClass.contains(\"org/example/package/\")) {\n            System.out.printf(\"prepending to visitMethodInsn(%s, %s, %s, %b) @ %s.%s:%d\\n\",\n                    ownerClass, method, signature, isInterface,\n                    visitedClass, visitedMethod, lineNumber);\n            super.visitLdcInsn(fileName);\n            super.visitLdcInsn(visitedClass);\n            super.visitLdcInsn(visitedMethod);\n            super.visitLdcInsn(lineNumber);\n            super.visitMethodInsn(Opcodes.INVOKESTATIC,\n                    Hook.ACCESS_OWNER_NAME,\n                    Hook.ACCESS_METHOD_NAME,\n                    Hook.ACCESS_METHOD_DESC, false);\n        }\n        super.visitMethodInsn(access, ownerClass, method, signature, isInterface);\n    }\n}\n</code></pre>\n\n<p>but obviously this is throwing an error as the stack is 8 long instead of 4 at the time of invocation:</p>\n\n<pre><code>Exception in thread \"main\" java.lang.VerifyError: Bad type on operand stack\nException Details:\n  Location:\n    org.using.package.Main.main([Ljava/lang/String;)V @13: invokestatic\n  Reason:\n    Type integer (current frame, stack[8]) is not assignable to 'java/lang/String'\n  Current Frame:\nbci: @13\nflags: { }\nlocals: { '[Ljava/lang/String;' }\nstack: { long, long_2nd, long, long_2nd, 'java/util/concurrent/TimeUnit', 'java/lang/String', 'java/lang/String', 'java/lang/String', integer }\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":21825332,"reputation":1219,"user_id":16120911,"display_name":"sittsering"},"score":1,"creation_date":1634399998,"post_id":69597175,"comment_id":123016455,"body_markdown":"You are doing the operation right after creating the variables `x` and `y`(values havnt been assign yet). You should do the operation after assigning them values(after taking input from user)","body":"You are doing the operation right after creating the variables <code>x</code> and <code>y</code>(values havnt been assign yet). You should do the operation after assigning them values(after taking input from user)"}],"answers":[{"tags":[],"owner":{"account_id":5224958,"reputation":536,"user_id":4177271,"display_name":"Tcheutchoua Steve"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634400490,"creation_date":1634400159,"answer_id":69597278,"question_id":69597175,"body_markdown":"you can initialize the variables when delaying them. It&#39;s a good practice to initialize variables before computation. \r\n\r\n.....\r\n\r\n    float x = 0;\r\n    float y = 0;\r\n... code continues....\r\n\r\nAlso, it&#39;s advisable to do the computation of sum, equation, product, after you receive the values from the Scanner.\r\n\r\n\r\n     input.close\r\n\r\n     float sum = x + y;\r\n     float product = x * y;\r\n     float quotient = x / y;\r\n\r\n\r\n\r\n","title":"Variable might not have been initialized when trying to do simple calculations with variables","body":"<p>you can initialize the variables when delaying them. It's a good practice to initialize variables before computation.</p>\n<p>.....</p>\n<pre><code>float x = 0;\nfloat y = 0;\n</code></pre>\n<p>... code continues....</p>\n<p>Also, it's advisable to do the computation of sum, equation, product, after you receive the values from the Scanner.</p>\n<pre><code> input.close\n\n float sum = x + y;\n float product = x * y;\n float quotient = x / y;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21825332,"reputation":1219,"user_id":16120911,"display_name":"sittsering"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1634400289,"creation_date":1634400289,"answer_id":69597294,"question_id":69597175,"body_markdown":"declare the variables\r\n````\r\nfloat x;\r\nfloat y;\r\n````\r\nassign values\r\n````\r\nx = input.nextFloat();\r\ny = input.nextFloat();\r\n````\r\nthen do the computation \r\n````\r\nfloat sum = x + y;\r\nfloat product = x * y;\r\nfloat quotient = x / y;\r\n````\r\nWithout any values assigned, You cant do any computation on them.","title":"Variable might not have been initialized when trying to do simple calculations with variables","body":"<p>declare the variables</p>\n<pre><code>float x;\nfloat y;\n</code></pre>\n<p>assign values</p>\n<pre><code>x = input.nextFloat();\ny = input.nextFloat();\n</code></pre>\n<p>then do the computation</p>\n<pre><code>float sum = x + y;\nfloat product = x * y;\nfloat quotient = x / y;\n</code></pre>\n<p>Without any values assigned, You cant do any computation on them.</p>\n"}],"owner":{"account_id":23052394,"reputation":3,"user_id":17169003,"display_name":"Signum"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69597294,"answer_count":2,"score":0,"last_activity_date":1634400724,"creation_date":1634399479,"question_id":69597175,"body_markdown":"I&#39;m very new to Java, or coding in general, and I&#39;m trying to make a program that will take two values x and y, and show the sum, product and quotient of the two values. When running this code, I get error messages telling me x and y &quot;may not be initialized&quot;. But x and y are only defined later in the scanner. How do I fix this?\r\n\r\n```\r\nimport java.util.Scanner;\r\n\r\npublic class Main\r\n{\r\n\r\n    public static void main(String[] args) {\r\n\r\n        float x;\r\n        float y;\r\n\r\n        float sum = x + y;\r\n        float product = x * y;\r\n        float quotient = x / y;\r\n        \r\n        Scanner input = new Scanner (System.in);\r\n            \r\n            System.out.println(&quot;Enter a value for x: &quot;);\r\n\r\n            x = input.nextFloat();\r\n\r\n            System.out.println(&quot;Enter a value for y: &quot;);\r\n\r\n            y = input.nextFloat();\r\n\r\n        input.close();\r\n\r\n            System.out.println(&quot;x + y is: &quot; + sum);\r\n\r\n            System.out.println(&quot;x * y is: &quot; + product);\r\n\r\n            System.out.println(&quot;x / y is: &quot; + quotient);\r\n\r\n    }\r\n}\r\n```\r\n","title":"Variable might not have been initialized when trying to do simple calculations with variables","body":"<p>I'm very new to Java, or coding in general, and I'm trying to make a program that will take two values x and y, and show the sum, product and quotient of the two values. When running this code, I get error messages telling me x and y &quot;may not be initialized&quot;. But x and y are only defined later in the scanner. How do I fix this?</p>\n<pre><code>import java.util.Scanner;\n\npublic class Main\n{\n\n    public static void main(String[] args) {\n\n        float x;\n        float y;\n\n        float sum = x + y;\n        float product = x * y;\n        float quotient = x / y;\n        \n        Scanner input = new Scanner (System.in);\n            \n            System.out.println(&quot;Enter a value for x: &quot;);\n\n            x = input.nextFloat();\n\n            System.out.println(&quot;Enter a value for y: &quot;);\n\n            y = input.nextFloat();\n\n        input.close();\n\n            System.out.println(&quot;x + y is: &quot; + sum);\n\n            System.out.println(&quot;x * y is: &quot; + product);\n\n            System.out.println(&quot;x / y is: &quot; + quotient);\n\n    }\n}\n</code></pre>\n"},{"tags":["java","arrays","string","list"],"comments":[{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1634310373,"post_id":69586817,"comment_id":122997619,"body_markdown":"&quot;I have a list or an array of string&quot; This is an array, not a list.","body":"&quot;I have a list or an array of string&quot; This is an array, not a list."},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":1,"creation_date":1634310895,"post_id":69586817,"comment_id":122997844,"body_markdown":"What would you want to do for something like `&quot;docatg&quot;` (dog with cat in the middle of it)? Do you want to first remove the cat, then remove the dog? Or do you want to just remove the cat?","body":"What would you want to do for something like <code>&quot;docatg&quot;</code> (dog with cat in the middle of it)? Do you want to first remove the cat, then remove the dog? Or do you want to just remove the cat?"},{"owner":{"account_id":13133666,"reputation":588,"user_id":9487437,"display_name":"Charlie G"},"score":1,"creation_date":1634310907,"post_id":69586817,"comment_id":122997853,"body_markdown":"Note cases such as `elements = {&quot;cat&quot;, &quot;catcher&quot;,...}`\nWith a phrase &quot;pass it to catcher&quot;, if &quot;cat is removed first, then the phrase will be &quot;pass it to her&quot;","body":"Note cases such as <code>elements = {&quot;cat&quot;, &quot;catcher&quot;,...}</code> With a phrase &quot;pass it to catcher&quot;, if &quot;cat is removed first, then the phrase will be &quot;pass it to her&quot;"},{"owner":{"account_id":13133666,"reputation":588,"user_id":9487437,"display_name":"Charlie G"},"score":0,"creation_date":1634311559,"post_id":69586817,"comment_id":122998115,"body_markdown":"You could also have competing overlaps like `[&quot;app&quot;,&quot;ply&quot;]`\nWith the phrase &quot;apply&quot;, we could remove &quot;app&quot; and leave &quot;ly&quot;, or remove &quot;ply&quot; and leave &quot;ap&quot;.","body":"You could also have competing overlaps like <code>[&quot;app&quot;,&quot;ply&quot;]</code> With the phrase &quot;apply&quot;, we could remove &quot;app&quot; and leave &quot;ly&quot;, or remove &quot;ply&quot; and leave &quot;ap&quot;."}],"answers":[{"tags":[],"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634311127,"creation_date":1634310462,"answer_id":69586861,"question_id":69586817,"body_markdown":"The most concise way would be to use `replaceAll`, which accepts a regular expression as the first parameter:\r\n\r\n```\r\nString newStr = str.replaceAll(String.join(&quot;|&quot;, elements), &quot;&quot;);\r\n```\r\n\r\nThis only works because the things in `elements` have no special regex characters. If any of them did (or there was a chance they did), you&#39;d have to quote them:\r\n\r\n```\r\nString pattern = Arrays.stream(elements).map(Pattern::quote).collect(Collectors.joining(&quot;|&quot;));\r\n```\r\n\r\n---\r\n\r\nNote, however, that this would operate in a single pass. So if you had a string like:\r\n\r\n```\r\ndocatg\r\n```\r\n\r\nthis approach would result in `dog`, whereas an approach which does `input.replace(&quot;cat&quot;, &quot;&quot;).replace(&quot;dog&quot;, &quot;&quot;)` would remove the `dog` as well.","title":"Remove from string an element of a list or array","body":"<p>The most concise way would be to use <code>replaceAll</code>, which accepts a regular expression as the first parameter:</p>\n<pre><code>String newStr = str.replaceAll(String.join(&quot;|&quot;, elements), &quot;&quot;);\n</code></pre>\n<p>This only works because the things in <code>elements</code> have no special regex characters. If any of them did (or there was a chance they did), you'd have to quote them:</p>\n<pre><code>String pattern = Arrays.stream(elements).map(Pattern::quote).collect(Collectors.joining(&quot;|&quot;));\n</code></pre>\n<hr />\n<p>Note, however, that this would operate in a single pass. So if you had a string like:</p>\n<pre><code>docatg\n</code></pre>\n<p>this approach would result in <code>dog</code>, whereas an approach which does <code>input.replace(&quot;cat&quot;, &quot;&quot;).replace(&quot;dog&quot;, &quot;&quot;)</code> would remove the <code>dog</code> as well.</p>\n"},{"tags":[],"owner":{"account_id":1674999,"reputation":9423,"user_id":1540749,"accept_rate":90,"display_name":"josejuan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1634399981,"creation_date":1634310495,"answer_id":69586873,"question_id":69586817,"body_markdown":"    Arrays.stream(elements).reduce(str, (r, w) -&gt; r.replace(w, &quot;&quot;))\r\n\r\nwith the expected output.\r\n\r\nIf you want to reduce the input string until it is no longer possible, it is best to iterate until there are no changes\r\n\r\n    String n = str, o = null;\r\n    do {\r\n        n = stream(elements).reduce(o = n, (r, w) -&gt; r.replace(w, &quot;&quot;));\r\n    } while(!n.equals(o));\r\n\r\n    System.out.println(n);\r\n\r\nthen, with input string\r\n\r\n    This is a caterpillar and that is a docatg.\r\n\r\nyou&#39;ll get\r\n\r\n    This is a erpillar and that is a .\r\n\r\n**If really want a fast algorithm use [Aho-Corasick][1]** with cost `O(n)`\r\n\r\n        StringBuilder sb = new StringBuilder();\r\n        int begining = -1;\r\n        for (Emit e : Trie.builder().addKeywords(elements).build().parseText(str)) {\r\n            sb.append(str, begining + 1, e.getStart());\r\n            begining = e.getEnd();\r\n        }\r\n        sb.append(str, begining + 1, str.length());\r\n\r\n        System.out.println(sb.toString());\r\n\r\n**Aside** solution performance comparison (with *Oussama ZAGHDOUD*&#39;s solution):\r\n\r\n    Equals = true       // check all output are equals\r\n    Time1 = 18,548822   // Oussama ZAGHDOUD&#39;s solution O(n^2)\r\n    Time2 = 0,134459    // Aho-Corasick O(n) without precompute Trie\r\n    Time3 = 0,065056    // Aho-Corasick O(n) precomputed Trie\r\n\r\nfull bench code\r\n\r\n    static String alg1(String[] elements, String str) {\r\n        StringBuilder bf = new StringBuilder(str);\r\n        str =null;\r\n        Stream.of(elements).forEach(e -&gt; {\r\n            int index = bf.indexOf(e);\r\n            while (index != -1) {\r\n                index = bf.indexOf(e);\r\n                if (index != -1) {\r\n                    bf.delete(index, index + e.length());\r\n                }\r\n            }\r\n        });\r\n        return bf.toString();\r\n    }\r\n\r\n    static String alg2(String[] elements, String str) {\r\n        StringBuilder sb = new StringBuilder();\r\n        int begining = -1;\r\n        for (Emit e : Trie.builder().addKeywords(elements).build().parseText(str)) {\r\n            sb.append(str, begining + 1, e.getStart());\r\n            begining = e.getEnd();\r\n        }\r\n        sb.append(str, begining + 1, str.length());\r\n\r\n        return sb.toString();\r\n    }\r\n\r\n    static String alg3(Trie trie, String str) {\r\n        StringBuilder sb = new StringBuilder();\r\n        int begining = -1;\r\n        for (Emit e : trie.parseText(str)) {\r\n            sb.append(str, begining + 1, e.getStart());\r\n            begining = e.getEnd();\r\n        }\r\n        sb.append(str, begining + 1, str.length());\r\n\r\n        return sb.toString();\r\n    }\r\n\r\n    public static void main(String... args) throws JsonProcessingException {\r\n\r\n        final ThreadLocalRandom rnd = ThreadLocalRandom.current();\r\n\r\n        // test, use random numbers as words\r\n        String[] elements = range(0, 1_000).mapToObj(i -&gt; &quot;w&quot; + rnd.nextInt()).toArray(String[]::new);\r\n\r\n        // intercalate random elements word with other random word\r\n        String str = range(0, 100_000)\r\n                .mapToObj(i -&gt; &quot;z&quot; + rnd.nextInt() + &quot; &quot; + elements[rnd.nextInt(elements.length)])\r\n                .collect(joining(&quot;, &quot;));\r\n\r\n        Trie trie = Trie.builder().addKeywords(elements).build();\r\n\r\n        long t0 = System.nanoTime();\r\n        String s1 = alg1(elements, str);\r\n        long t1 = System.nanoTime();\r\n        String s2 = alg2(elements, str);\r\n        long t2 = System.nanoTime();\r\n        String s3 = alg3(trie, str);\r\n        long t3 = System.nanoTime();\r\n\r\n        System.out.printf(&quot;Equals = %s%nTime1 = %f%nTime2 = %f%nTime3 = %f%n&quot;,\r\n                s1.equals(s2) &amp;&amp; s2.equals(s3), (t1 - t0) * 1e-9, (t2 - t1) * 1e-9, (t3 - t2) * 1e-9);\r\n    }\r\n\r\n\r\n  [1]: https://github.com/robert-bor/aho-corasick","title":"Remove from string an element of a list or array","body":"<pre><code>Arrays.stream(elements).reduce(str, (r, w) -&gt; r.replace(w, &quot;&quot;))\n</code></pre>\n<p>with the expected output.</p>\n<p>If you want to reduce the input string until it is no longer possible, it is best to iterate until there are no changes</p>\n<pre><code>String n = str, o = null;\ndo {\n    n = stream(elements).reduce(o = n, (r, w) -&gt; r.replace(w, &quot;&quot;));\n} while(!n.equals(o));\n\nSystem.out.println(n);\n</code></pre>\n<p>then, with input string</p>\n<pre><code>This is a caterpillar and that is a docatg.\n</code></pre>\n<p>you'll get</p>\n<pre><code>This is a erpillar and that is a .\n</code></pre>\n<p><strong>If really want a fast algorithm use <a href=\"https://github.com/robert-bor/aho-corasick\" rel=\"nofollow noreferrer\">Aho-Corasick</a></strong> with cost <code>O(n)</code></p>\n<pre><code>    StringBuilder sb = new StringBuilder();\n    int begining = -1;\n    for (Emit e : Trie.builder().addKeywords(elements).build().parseText(str)) {\n        sb.append(str, begining + 1, e.getStart());\n        begining = e.getEnd();\n    }\n    sb.append(str, begining + 1, str.length());\n\n    System.out.println(sb.toString());\n</code></pre>\n<p><strong>Aside</strong> solution performance comparison (with <em>Oussama ZAGHDOUD</em>'s solution):</p>\n<pre><code>Equals = true       // check all output are equals\nTime1 = 18,548822   // Oussama ZAGHDOUD's solution O(n^2)\nTime2 = 0,134459    // Aho-Corasick O(n) without precompute Trie\nTime3 = 0,065056    // Aho-Corasick O(n) precomputed Trie\n</code></pre>\n<p>full bench code</p>\n<pre><code>static String alg1(String[] elements, String str) {\n    StringBuilder bf = new StringBuilder(str);\n    str =null;\n    Stream.of(elements).forEach(e -&gt; {\n        int index = bf.indexOf(e);\n        while (index != -1) {\n            index = bf.indexOf(e);\n            if (index != -1) {\n                bf.delete(index, index + e.length());\n            }\n        }\n    });\n    return bf.toString();\n}\n\nstatic String alg2(String[] elements, String str) {\n    StringBuilder sb = new StringBuilder();\n    int begining = -1;\n    for (Emit e : Trie.builder().addKeywords(elements).build().parseText(str)) {\n        sb.append(str, begining + 1, e.getStart());\n        begining = e.getEnd();\n    }\n    sb.append(str, begining + 1, str.length());\n\n    return sb.toString();\n}\n\nstatic String alg3(Trie trie, String str) {\n    StringBuilder sb = new StringBuilder();\n    int begining = -1;\n    for (Emit e : trie.parseText(str)) {\n        sb.append(str, begining + 1, e.getStart());\n        begining = e.getEnd();\n    }\n    sb.append(str, begining + 1, str.length());\n\n    return sb.toString();\n}\n\npublic static void main(String... args) throws JsonProcessingException {\n\n    final ThreadLocalRandom rnd = ThreadLocalRandom.current();\n\n    // test, use random numbers as words\n    String[] elements = range(0, 1_000).mapToObj(i -&gt; &quot;w&quot; + rnd.nextInt()).toArray(String[]::new);\n\n    // intercalate random elements word with other random word\n    String str = range(0, 100_000)\n            .mapToObj(i -&gt; &quot;z&quot; + rnd.nextInt() + &quot; &quot; + elements[rnd.nextInt(elements.length)])\n            .collect(joining(&quot;, &quot;));\n\n    Trie trie = Trie.builder().addKeywords(elements).build();\n\n    long t0 = System.nanoTime();\n    String s1 = alg1(elements, str);\n    long t1 = System.nanoTime();\n    String s2 = alg2(elements, str);\n    long t2 = System.nanoTime();\n    String s3 = alg3(trie, str);\n    long t3 = System.nanoTime();\n\n    System.out.printf(&quot;Equals = %s%nTime1 = %f%nTime2 = %f%nTime3 = %f%n&quot;,\n            s1.equals(s2) &amp;&amp; s2.equals(s3), (t1 - t0) * 1e-9, (t2 - t1) * 1e-9, (t3 - t2) * 1e-9);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7291967,"reputation":57515,"user_id":5558072,"accept_rate":100,"display_name":"Youcef LAIDANI"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634311230,"creation_date":1634310539,"answer_id":69586885,"question_id":69586817,"body_markdown":"I would simply use:\r\n\r\n    private String removeElementsFromString(String str, String[] elements) {\r\n        for (String item : elements) {\r\n            str = str.replace(item, &quot;&quot;);\r\n        }\r\n        return str;\r\n    }\r\n\r\nI don&#39;t see any advantage of the first condition:\r\n\r\n    if(Arrays.stream(elements).anyMatch(str::contains)) {","title":"Remove from string an element of a list or array","body":"<p>I would simply use:</p>\n<pre><code>private String removeElementsFromString(String str, String[] elements) {\n    for (String item : elements) {\n        str = str.replace(item, &quot;&quot;);\n    }\n    return str;\n}\n</code></pre>\n<p>I don't see any advantage of the first condition:</p>\n<pre><code>if(Arrays.stream(elements).anyMatch(str::contains)) {\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634315493,"creation_date":1634311254,"answer_id":69587030,"question_id":69586817,"body_markdown":"You can do it like this. Just use a simple loop.\r\n```\r\nfor (String word : elements) {\r\n\t\t\tstr = str.replace(word,&quot;&quot;);\r\n}\r\n","title":"Remove from string an element of a list or array","body":"<p>You can do it like this. Just use a simple loop.</p>\n<pre><code>for (String word : elements) {\n            str = str.replace(word,&quot;&quot;);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22886030,"reputation":1849,"user_id":17026900,"display_name":"Oussama ZAGHDOUD"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1634316190,"creation_date":1634315101,"answer_id":69587831,"question_id":69586817,"body_markdown":"&lt;h2&gt; Another Solution with StringBuilder :&lt;/h2&gt;\r\n&lt;h3&gt;because it is much faster and consumes less memory.&lt;/h3&gt;\r\n\r\nI think that using StringBuilder instead of String is more appropriate here: \r\n\r\n\r\n\r\n    import java.io.IOException;\r\n    import java.util.stream.Stream;\r\n\r\n    public class Bounder {\r\n\r\n\tpublic static void main(String[] args) throws IOException {\r\n\t\tString[] elements = { &quot;cat&quot;, &quot;dog&quot;, &quot;fish&quot; };\r\n\t\tString str = &quot;This is a catcatcatcatcatcatcaterpillar ancatcatcatcatd thcatcatcatat is a dogdogdogdogdogdogger.&quot;;\r\n    // Use StringBuilder here instead of String \t\r\n    StringBuilder bf = new StringBuilder(str);\r\n\t\tstr =null;\r\n\r\n\t\tSystem.out.println(&quot;Original String   =  &quot; + bf.toString());\r\n\t\tStream.of(elements).forEach(e -&gt; {\r\n\t\t\tint index = bf.indexOf(e);\r\n\t\t\twhile (index != -1) {\r\n\t\t\t\tindex = bf.indexOf(e);\r\n\t\t\t\tif (index != -1) {\r\n\t\t\t\t\tbf.delete(index, index + e.length());\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tSystem.out.println(&quot;Result            =  &quot; + bf.toString());\r\n\t}\r\n    }\r\n\r\n**Output :**\r\n            \r\n      Original String   =  This is a catcatcatcatcatcatcaterpillar ancatcatcatcatd thcatcatcatat is a dogdogdogdogdogdogger.\r\n\r\n      Result            =  This is a erpillar and that is a ger.\r\n","title":"Remove from string an element of a list or array","body":"<h2> Another Solution with StringBuilder :</h2>\n<h3>because it is much faster and consumes less memory.</h3>\n<p>I think that using StringBuilder instead of String is more appropriate here:</p>\n<pre><code>import java.io.IOException;\nimport java.util.stream.Stream;\n\npublic class Bounder {\n\npublic static void main(String[] args) throws IOException {\n    String[] elements = { &quot;cat&quot;, &quot;dog&quot;, &quot;fish&quot; };\n    String str = &quot;This is a catcatcatcatcatcatcaterpillar ancatcatcatcatd thcatcatcatat is a dogdogdogdogdogdogger.&quot;;\n// Use StringBuilder here instead of String     \nStringBuilder bf = new StringBuilder(str);\n    str =null;\n\n    System.out.println(&quot;Original String   =  &quot; + bf.toString());\n    Stream.of(elements).forEach(e -&gt; {\n        int index = bf.indexOf(e);\n        while (index != -1) {\n            index = bf.indexOf(e);\n            if (index != -1) {\n                bf.delete(index, index + e.length());\n            }\n        }\n    });\n\n    System.out.println(&quot;Result            =  &quot; + bf.toString());\n}\n}\n</code></pre>\n<p><strong>Output :</strong></p>\n<pre><code>  Original String   =  This is a catcatcatcatcatcatcaterpillar ancatcatcatcatd thcatcatcatat is a dogdogdogdogdogdogger.\n\n  Result            =  This is a erpillar and that is a ger.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2179728,"reputation":73047,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1634317586,"creation_date":1634317586,"answer_id":69588290,"question_id":69586817,"body_markdown":"### One-liner solution\r\n\r\nThe following one-liner does the job:\r\n\r\n    str = str.replaceAll(Arrays.stream(elements).map(s -&gt; &quot;(?:&quot; + s + &quot;)&quot;).collect(Collectors.joining(&quot;|&quot;)), &quot;&quot;);\r\n\r\n**Demo:**\r\n\r\n    import java.util.Arrays;\r\n    import java.util.stream.Collectors;\r\n    \r\n    public class Main {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tString[] elements = { &quot;cat&quot;, &quot;dog&quot;, &quot;fish&quot; };\r\n    \t\tString str = &quot;This is a caterpillar and that is a dogger.&quot;;\r\n    \t\t\r\n    \t\tstr = str.replaceAll(Arrays.stream(elements).map(s -&gt; &quot;(?:&quot; + s + &quot;)&quot;).collect(Collectors.joining(&quot;|&quot;)), &quot;&quot;);\r\n    \r\n    \t\tSystem.out.println(str);\r\n    \t}\r\n    }\r\n\r\n**Output:**\r\n\r\n    This is a erpillar and that is a ger.\r\n\r\n[&lt;kbd&gt;ONLINE DEMO&lt;/kbd&gt;][1]\r\n\r\n**Explanation:**\r\n\r\n`Arrays.stream(elements).map(s -&gt; &quot;(?:&quot; + s + &quot;)&quot;).collect(Collectors.joining(&quot;|&quot;))` results into the regex, `(?:cat)|(?:dog)|(?:fish)` which [means][2] `cat` or `dog` or `fish`.\r\n\r\nThe next step is to replace this resulting regex by `&quot;&quot;`.\r\n\r\n\r\n  [1]: https://ideone.com/YB19CR\r\n  [2]: https://regex101.com/r/sNCaXl/1\r\n","title":"Remove from string an element of a list or array","body":"<h3>One-liner solution</h3>\n<p>The following one-liner does the job:</p>\n<pre><code>str = str.replaceAll(Arrays.stream(elements).map(s -&gt; &quot;(?:&quot; + s + &quot;)&quot;).collect(Collectors.joining(&quot;|&quot;)), &quot;&quot;);\n</code></pre>\n<p><strong>Demo:</strong></p>\n<pre><code>import java.util.Arrays;\nimport java.util.stream.Collectors;\n\npublic class Main {\n    public static void main(String[] args) {\n        String[] elements = { &quot;cat&quot;, &quot;dog&quot;, &quot;fish&quot; };\n        String str = &quot;This is a caterpillar and that is a dogger.&quot;;\n        \n        str = str.replaceAll(Arrays.stream(elements).map(s -&gt; &quot;(?:&quot; + s + &quot;)&quot;).collect(Collectors.joining(&quot;|&quot;)), &quot;&quot;);\n\n        System.out.println(str);\n    }\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>This is a erpillar and that is a ger.\n</code></pre>\n<p><a href=\"https://ideone.com/YB19CR\" rel=\"noreferrer\"><kbd>ONLINE DEMO</kbd></a></p>\n<p><strong>Explanation:</strong></p>\n<p><code>Arrays.stream(elements).map(s -&gt; &quot;(?:&quot; + s + &quot;)&quot;).collect(Collectors.joining(&quot;|&quot;))</code> results into the regex, <code>(?:cat)|(?:dog)|(?:fish)</code> which <a href=\"https://regex101.com/r/sNCaXl/1\" rel=\"noreferrer\">means</a> <code>cat</code> or <code>dog</code> or <code>fish</code>.</p>\n<p>The next step is to replace this resulting regex by <code>&quot;&quot;</code>.</p>\n"}],"owner":{"account_id":1473282,"reputation":2461,"user_id":1384302,"accept_rate":69,"display_name":"ALI"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":353,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":69588290,"answer_count":6,"score":3,"last_activity_date":1634399981,"creation_date":1634310283,"question_id":69586817,"body_markdown":"I have a list or an array of string \r\n\r\n    String [] elements = {&quot;cat&quot;, &quot;dog&quot;, &quot;fish&quot;};\r\n\r\nand a string \r\n\r\n    String str = &quot;This is a caterpillar and that is a dogger.&quot;;\r\n\r\nI want to remove all the items of the array/list from the string if any exists in the string.\r\nso that the function should return a string \r\n\r\n    str = &quot;This is a erpillar and that is a ger.&quot; (cat and dog removed from the string)\r\n\r\nI can do something like this \r\n\r\n    private String removeElementsFromString (String str, String [] elements) {\r\n            if(Arrays.stream(elements).anyMatch(str::contains)){\r\n                for(String item : elements){\r\n                    str = str.replace(item, &quot;&quot;);\r\n                }\r\n            }\r\n            return str;\r\n        }\r\n\r\nbut what is the elegant way to change the for loop to something else.\r\n","title":"Remove from string an element of a list or array","body":"<p>I have a list or an array of string</p>\n<pre><code>String [] elements = {&quot;cat&quot;, &quot;dog&quot;, &quot;fish&quot;};\n</code></pre>\n<p>and a string</p>\n<pre><code>String str = &quot;This is a caterpillar and that is a dogger.&quot;;\n</code></pre>\n<p>I want to remove all the items of the array/list from the string if any exists in the string.\nso that the function should return a string</p>\n<pre><code>str = &quot;This is a erpillar and that is a ger.&quot; (cat and dog removed from the string)\n</code></pre>\n<p>I can do something like this</p>\n<pre><code>private String removeElementsFromString (String str, String [] elements) {\n        if(Arrays.stream(elements).anyMatch(str::contains)){\n            for(String item : elements){\n                str = str.replace(item, &quot;&quot;);\n            }\n        }\n        return str;\n    }\n</code></pre>\n<p>but what is the elegant way to change the for loop to something else.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":17000499,"reputation":48397,"user_id":12299000,"display_name":"kaya3"},"score":2,"creation_date":1634399376,"post_id":69597150,"comment_id":123016310,"body_markdown":"Why do you think it would save memory?","body":"Why do you think it would save memory?"},{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":3,"creation_date":1634399391,"post_id":69597150,"comment_id":123016313,"body_markdown":"Never. No and I really doubt it. [How do I write a correct micro-benchmark in Java?](https://stackoverflow.com/q/504103/2970947)","body":"Never. No and I really doubt it. <a href=\"https://stackoverflow.com/q/504103/2970947\">How do I write a correct micro-benchmark in Java?</a>"},{"owner":{"account_id":6457401,"reputation":583,"user_id":5002324,"display_name":"Christoph S."},"score":0,"creation_date":1634400799,"post_id":69597150,"comment_id":123016658,"body_markdown":"@kaya3 Because they exist only once, no matter how many objects I have. And I *asked* this question.","body":"@kaya3 Because they exist only once, no matter how many objects I have. And I <i>asked</i> this question."}],"answers":[{"tags":[],"owner":{"account_id":3131031,"reputation":24013,"user_id":2648811,"accept_rate":33,"display_name":"Green Cloak Guy"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1634399491,"creation_date":1634399491,"answer_id":69597177,"question_id":69597150,"body_markdown":"All instances of a class share the same code for each method. It doesn&#39;t matter whether the method is static or not - as long as the class is loaded at all, memory is being taken to define the contents of the method.\r\n\r\nThis isn&#39;t duplicated on a per-instance basis. Why should it be? All that changes between instances is _attributes_, not _behaviors_. Adding more instances will consume more memory, yes, but only for holding attributes - the behaviors still need only be defined once.","title":"Does it make sense to declare all methods as static to save memory?","body":"<p>All instances of a class share the same code for each method. It doesn't matter whether the method is static or not - as long as the class is loaded at all, memory is being taken to define the contents of the method.</p>\n<p>This isn't duplicated on a per-instance basis. Why should it be? All that changes between instances is <em>attributes</em>, not <em>behaviors</em>. Adding more instances will consume more memory, yes, but only for holding attributes - the behaviors still need only be defined once.</p>\n"}],"owner":{"account_id":6457401,"reputation":583,"user_id":5002324,"display_name":"Christoph S."},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69597177,"answer_count":1,"score":0,"last_activity_date":1634399491,"creation_date":1634399309,"question_id":69597150,"body_markdown":"(When) does it make sense to declare methods `static` in this way? Will it save memory? How about the performance?\r\n\r\nIf I am right, `toString()` in the `Integer` wrapper class is working like this.\r\n\r\n```\r\nclass Address {\r\n  private static void method(Address adr) {\r\n    // do something\r\n  }\r\n\r\n  public void method() {\r\n    Address.method(this);\r\n  }\r\n}\r\n```\r\n\r\n```\r\nclass OtherClass {\r\n  public static void main(String[] params) {\r\n    Address a = new Address();\r\n    a.method();\r\n  }\r\n}\r\n```","title":"Does it make sense to declare all methods as static to save memory?","body":"<p>(When) does it make sense to declare methods <code>static</code> in this way? Will it save memory? How about the performance?</p>\n<p>If I am right, <code>toString()</code> in the <code>Integer</code> wrapper class is working like this.</p>\n<pre><code>class Address {\n  private static void method(Address adr) {\n    // do something\n  }\n\n  public void method() {\n    Address.method(this);\n  }\n}\n</code></pre>\n<pre><code>class OtherClass {\n  public static void main(String[] params) {\n    Address a = new Address();\n    a.method();\n  }\n}\n</code></pre>\n"},{"tags":["java","multithreading"],"answers":[{"tags":[],"owner":{"account_id":5998820,"reputation":12666,"user_id":4712734,"display_name":"DuncG"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1634394877,"creation_date":1634394645,"answer_id":69596513,"question_id":69596406,"body_markdown":"You aren&#39;t waiting for any of the background threads or tasks to end before you print the value of the counter. To wait on the tasks to exit, you&#39;ll need to add this for threads:\r\n\r\n    t1.join();\r\n    t2.join();\r\n\r\nAdd this for the service, which prevents new tasks being added and waits a sensible period for them to end:\r\n\r\n    service.shutdown();\r\n    boolean done = awaitTermination(pickSuitablyLongPeriod, TimeUnit.MILLISECONDS);\r\n    \r\nOnce you have ensured the background tasks are completed, the correct result should be printed when you run:\r\n\r\n    System.out.println(myCounter.count);\r\n","title":"unexpected multi thread output in java","body":"<p>You aren't waiting for any of the background threads or tasks to end before you print the value of the counter. To wait on the tasks to exit, you'll need to add this for threads:</p>\n<pre><code>t1.join();\nt2.join();\n</code></pre>\n<p>Add this for the service, which prevents new tasks being added and waits a sensible period for them to end:</p>\n<pre><code>service.shutdown();\nboolean done = awaitTermination(pickSuitablyLongPeriod, TimeUnit.MILLISECONDS);\n</code></pre>\n<p>Once you have ensured the background tasks are completed, the correct result should be printed when you run:</p>\n<pre><code>System.out.println(myCounter.count);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22886030,"reputation":1849,"user_id":17026900,"display_name":"Oussama ZAGHDOUD"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634398672,"creation_date":1634395379,"answer_id":69596624,"question_id":69596406,"body_markdown":"       \r\n**dont forget to use shutdown() with Executors** \r\n\r\n\r\n\r\n&gt; see the comments here :\r\n\r\n\r\n\r\n       // Here you start the 2  threads \r\n        for (int i = 0; i &lt; 2; i++) {\r\n            service.execute(() -&gt; {\r\n                myCounter.increment();\r\n            });\r\n        }\r\n\r\n        // we are not sure here that your 2 threads terminate their tasks or not !!\r\n\r\n        // the print will be executed by the Main Thread and maybe before the 2 threads terminate their \r\n        // job ,\r\n        // maybe just one terminate , maybe no one from your 2 threads increment the count .\r\n          System.out.println(myCounter.count);\r\n\r\n\r\n\r\n\r\n\r\n***You can use Future class , instead of execute you can use submit() , the retrun type will be of Type Futre&lt;?&gt; (accept void ) , after that with the Future object returned the method get() will block the execution until the result returned from the service :***\r\n\r\n\r\n&gt; Example method name3() : will return always 2\r\n\r\n          void name3() {\r\n    \t    final MyCounter myCounter = new MyCounter();\r\n    \t    final ExecutorService service = Executors.newFixedThreadPool(2);\r\n    \t    Future&lt;?&gt; f = null;\r\n    \t    for (int i = 0; i &lt; 2; i++) {\r\n    \t        f =service.submit(() -&gt; {\r\n    \t            myCounter.increment();\r\n    \t        });\r\n    \t        try {\r\n\t\t\t\t\tf.get();\r\n\t\t\t\t} catch (InterruptedException | ExecutionException e) {\r\n\t\t\t\t\t// TODO Auto-generated catch block\r\n\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t}\r\n    \t    }\r\n   \r\n    \t     System.out.println(myCounter.count);\r\n    \t     service.shutdown();\r\n    \t}","title":"unexpected multi thread output in java","body":"<p><strong>dont forget to use shutdown() with Executors</strong></p>\n<blockquote>\n<p>see the comments here :</p>\n</blockquote>\n<pre><code>   // Here you start the 2  threads \n    for (int i = 0; i &lt; 2; i++) {\n        service.execute(() -&gt; {\n            myCounter.increment();\n        });\n    }\n\n    // we are not sure here that your 2 threads terminate their tasks or not !!\n\n    // the print will be executed by the Main Thread and maybe before the 2 threads terminate their \n    // job ,\n    // maybe just one terminate , maybe no one from your 2 threads increment the count .\n      System.out.println(myCounter.count);\n</code></pre>\n<p><em><strong>You can use Future class , instead of execute you can use submit() , the retrun type will be of Type Futre&lt;?&gt; (accept void ) , after that with the Future object returned the method get() will block the execution until the result returned from the service :</strong></em></p>\n<blockquote>\n<p>Example method name3() : will return always 2</p>\n</blockquote>\n<pre><code>      void name3() {\n        final MyCounter myCounter = new MyCounter();\n        final ExecutorService service = Executors.newFixedThreadPool(2);\n        Future&lt;?&gt; f = null;\n        for (int i = 0; i &lt; 2; i++) {\n            f =service.submit(() -&gt; {\n                myCounter.increment();\n            });\n            try {\n                f.get();\n            } catch (InterruptedException | ExecutionException e) {\n                // TODO Auto-generated catch block\n                e.printStackTrace();\n            }\n        }\n\n         System.out.println(myCounter.count);\n         service.shutdown();\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6915613,"reputation":81,"user_id":5310008,"display_name":"roy man"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634396439,"creation_date":1634396011,"answer_id":69596716,"question_id":69596406,"body_markdown":"This is because the threads are still processing when you call the `System.out.println`. In this case you would need to block the main thread before you print out the counter.\r\n\r\nin the example of the `Executor` you can just await the termination:\r\n\r\n    final ExecutorService service = Executors.newFixedThreadPool(2);\r\n    final MyCounter myCounter = new MyCounter();\r\n\r\n    for (int i = 0; i &lt; 100; i++) {\r\n        service.submit(myCounter::increment);\r\n    }\r\n    service.shutdown();\r\n    while (!service.awaitTermination(100, TimeUnit.MILLISECONDS)) {\r\n        System.out.println(&quot;waiting&quot;);\r\n    }\r\n    System.out.println(myCounter.count);\r\n\r\n&gt; you should avoid to block in productive code, have a look at the Publish/Subscribe design pattern","title":"unexpected multi thread output in java","body":"<p>This is because the threads are still processing when you call the <code>System.out.println</code>. In this case you would need to block the main thread before you print out the counter.</p>\n<p>in the example of the <code>Executor</code> you can just await the termination:</p>\n<pre><code>final ExecutorService service = Executors.newFixedThreadPool(2);\nfinal MyCounter myCounter = new MyCounter();\n\nfor (int i = 0; i &lt; 100; i++) {\n    service.submit(myCounter::increment);\n}\nservice.shutdown();\nwhile (!service.awaitTermination(100, TimeUnit.MILLISECONDS)) {\n    System.out.println(&quot;waiting&quot;);\n}\nSystem.out.println(myCounter.count);\n</code></pre>\n<blockquote>\n<p>you should avoid to block in productive code, have a look at the Publish/Subscribe design pattern</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":5224958,"reputation":536,"user_id":4177271,"display_name":"Tcheutchoua Steve"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634397098,"creation_date":1634397098,"answer_id":69596862,"question_id":69596406,"body_markdown":"In addition to the above answers, you could add some prints to better understand what is happening. \r\n\r\nIn summary. You need to wait for the threads to finish executing before expecting the results, so it is not an issue of `AtomicLong`. \r\n\r\nI modified the code, added some prints, and here are results from an execution.\r\n\r\n    import java.util.concurrent.ExecutorService;\r\n    import java.util.concurrent.Executors;\r\n    import java.util.concurrent.atomic.AtomicLong;\r\n    \r\n    import org.junit.jupiter.api.Test;\r\n    \r\n    public class ConTest {\r\n    \r\n      @Test\r\n      void name2() {\r\n        final MyCounter myCounter = new MyCounter();\r\n        final Thread t1 = new Thread(() -&gt; {\r\n          myCounter.increment();\r\n          System.out.println(&quot;Counter increment t1 completed and the value is &quot; + myCounter.getCount());\r\n        });\r\n        final Thread t2 = new Thread(() -&gt; {\r\n          myCounter.increment();\r\n          System.out.println(&quot;Counter increment t2 completed and the value is &quot; + myCounter.getCount());\r\n    \r\n        });\r\n    \r\n        t1.start();\r\n        t2.start();\r\n    \r\n        System.out.println(myCounter.count.get());\r\n      }\r\n    \r\n      @Test\r\n      void name3() {\r\n        final MyCounter myCounter = new MyCounter();\r\n        final ExecutorService service = Executors.newFixedThreadPool(2);\r\n    \r\n        for (int i = 0; i &lt; 2; i++) {\r\n          service.execute(() -&gt; {\r\n            myCounter.increment();\r\n            System.out.println(&quot;incrementing for count and the value is &quot; + myCounter.getCount());\r\n          });\r\n        }\r\n    \r\n        System.out.println(myCounter.count.get());\r\n      }\r\n    \r\n      class MyCounter {\r\n    \r\n        private AtomicLong count = new AtomicLong();\r\n    \r\n        public void increment() {\r\n          count.incrementAndGet();\r\n        }\r\n    \r\n        public long getCount(){\r\n          return count.get();\r\n        }\r\n      }\r\n    }\r\n\r\n\r\nResults (name2)\r\n\r\n    1\r\n    Counter increment t1 completed and the value is 1\r\n    Counter increment t2 completed and the value is 2\r\n\r\nResults (name3)\r\n\r\n    incrementing for count and the value is 1\r\n    1\r\n    incrementing for count and the value is 2\r\n\r\nYou could also use a debugger to have a better understanding.","title":"unexpected multi thread output in java","body":"<p>In addition to the above answers, you could add some prints to better understand what is happening.</p>\n<p>In summary. You need to wait for the threads to finish executing before expecting the results, so it is not an issue of <code>AtomicLong</code>.</p>\n<p>I modified the code, added some prints, and here are results from an execution.</p>\n<pre><code>import java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\nimport java.util.concurrent.atomic.AtomicLong;\n\nimport org.junit.jupiter.api.Test;\n\npublic class ConTest {\n\n  @Test\n  void name2() {\n    final MyCounter myCounter = new MyCounter();\n    final Thread t1 = new Thread(() -&gt; {\n      myCounter.increment();\n      System.out.println(&quot;Counter increment t1 completed and the value is &quot; + myCounter.getCount());\n    });\n    final Thread t2 = new Thread(() -&gt; {\n      myCounter.increment();\n      System.out.println(&quot;Counter increment t2 completed and the value is &quot; + myCounter.getCount());\n\n    });\n\n    t1.start();\n    t2.start();\n\n    System.out.println(myCounter.count.get());\n  }\n\n  @Test\n  void name3() {\n    final MyCounter myCounter = new MyCounter();\n    final ExecutorService service = Executors.newFixedThreadPool(2);\n\n    for (int i = 0; i &lt; 2; i++) {\n      service.execute(() -&gt; {\n        myCounter.increment();\n        System.out.println(&quot;incrementing for count and the value is &quot; + myCounter.getCount());\n      });\n    }\n\n    System.out.println(myCounter.count.get());\n  }\n\n  class MyCounter {\n\n    private AtomicLong count = new AtomicLong();\n\n    public void increment() {\n      count.incrementAndGet();\n    }\n\n    public long getCount(){\n      return count.get();\n    }\n  }\n}\n</code></pre>\n<p>Results (name2)</p>\n<pre><code>1\nCounter increment t1 completed and the value is 1\nCounter increment t2 completed and the value is 2\n</code></pre>\n<p>Results (name3)</p>\n<pre><code>incrementing for count and the value is 1\n1\nincrementing for count and the value is 2\n</code></pre>\n<p>You could also use a debugger to have a better understanding.</p>\n"}],"owner":{"account_id":21710238,"reputation":77,"user_id":16021958,"display_name":"paiwmsn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":150,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":69596513,"answer_count":4,"score":0,"last_activity_date":1634398672,"creation_date":1634393784,"question_id":69596406,"body_markdown":"``` java\r\npublic class ConTest {\r\n\r\n    @Test\r\n    void name2() {\r\n        final MyCounter myCounter = new MyCounter();\r\n        final Thread t1 = new Thread(() -&gt;\r\n            myCounter.increment()\r\n        );\r\n        final Thread t2 = new Thread(() -&gt;\r\n            myCounter.increment()\r\n        );\r\n        t1.start();\r\n        t2.start();\r\n        System.out.println(myCounter.count);\r\n    }\r\n\r\n    @Test\r\n    void name3() {\r\n        final MyCounter myCounter = new MyCounter();\r\n        final ExecutorService service = Executors.newFixedThreadPool(2);\r\n\r\n        for (int i = 0; i &lt; 2; i++) {\r\n            service.execute(() -&gt; {\r\n                myCounter.increment();\r\n            });\r\n        }\r\n        System.out.println(myCounter.count);\r\n    }\r\n\r\n    static class MyCounter {\r\n        private AtomicLong count = new AtomicLong();\r\n\r\n        public void increment() {\r\n            count.incrementAndGet();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n`AtomicLong` is safe when multi thread.\r\n\r\nThat is, in the example above, it was executed with 2 threads, so the result should be 2 no matter how many times it is executed.\r\n\r\nHowever, after trying both tests several times, the result is sometimes 1. Why is this happening?\r\n\r\n\r\n\r\n","title":"unexpected multi thread output in java","body":"<pre class=\"lang-java prettyprint-override\"><code>public class ConTest {\n\n    @Test\n    void name2() {\n        final MyCounter myCounter = new MyCounter();\n        final Thread t1 = new Thread(() -&gt;\n            myCounter.increment()\n        );\n        final Thread t2 = new Thread(() -&gt;\n            myCounter.increment()\n        );\n        t1.start();\n        t2.start();\n        System.out.println(myCounter.count);\n    }\n\n    @Test\n    void name3() {\n        final MyCounter myCounter = new MyCounter();\n        final ExecutorService service = Executors.newFixedThreadPool(2);\n\n        for (int i = 0; i &lt; 2; i++) {\n            service.execute(() -&gt; {\n                myCounter.increment();\n            });\n        }\n        System.out.println(myCounter.count);\n    }\n\n    static class MyCounter {\n        private AtomicLong count = new AtomicLong();\n\n        public void increment() {\n            count.incrementAndGet();\n        }\n    }\n}\n</code></pre>\n<p><code>AtomicLong</code> is safe when multi thread.</p>\n<p>That is, in the example above, it was executed with 2 threads, so the result should be 2 no matter how many times it is executed.</p>\n<p>However, after trying both tests several times, the result is sometimes 1. Why is this happening?</p>\n"},{"tags":["java","android","random"],"comments":[{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1634330317,"post_id":69590356,"comment_id":123004376,"body_markdown":"Are you looking for `java.util.Random`?","body":"Are you looking for <code>java.util.Random</code>?"},{"owner":{"account_id":3579384,"reputation":10125,"user_id":2987953,"accept_rate":49,"display_name":"lannyf"},"score":0,"creation_date":1634330451,"post_id":69590356,"comment_id":123004407,"body_markdown":"no feel it is good enough for our use case, the same function is also used for other like database key field, etc. would like a better one","body":"no feel it is good enough for our use case, the same function is also used for other like database key field, etc. would like a better one"},{"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"score":0,"creation_date":1634330567,"post_id":69590356,"comment_id":123004443,"body_markdown":"is crypto random is good enough?","body":"is crypto random is good enough?"},{"owner":{"account_id":14211784,"reputation":181,"user_id":10266799,"display_name":"Daniel me"},"score":1,"creation_date":1634330585,"post_id":69590356,"comment_id":123004447,"body_markdown":"If its appropriate you can just use a GUID to always ensure they are different random numbers. Might be a good time to see if using random numbers is the best solution.","body":"If its appropriate you can just use a GUID to always ensure they are different random numbers. Might be a good time to see if using random numbers is the best solution."},{"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"score":2,"creation_date":1634330643,"post_id":69590356,"comment_id":123004463,"body_markdown":"SystemCLock is not random. I can clearly say what will be the next number in the sequence only by knowing call time ;)","body":"SystemCLock is not random. I can clearly say what will be the next number in the sequence only by knowing call time ;)"},{"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"score":0,"creation_date":1634330665,"post_id":69590356,"comment_id":123004470,"body_markdown":"https://docs.oracle.com/javase/8/docs/api/java/security/SecureRandom.html","body":"<a href=\"https://docs.oracle.com/javase/8/docs/api/java/security/SecureRandom.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/api/java/security/&hellip;</a>"},{"owner":{"account_id":3579384,"reputation":10125,"user_id":2987953,"accept_rate":49,"display_name":"lannyf"},"score":0,"creation_date":1634330781,"post_id":69590356,"comment_id":123004508,"body_markdown":"I should say &quot;number or not repeat&quot;, not really &#39;random&quot;","body":"I should say &quot;number or not repeat&quot;, not really &#39;random&quot;"}],"answers":[{"tags":[],"owner":{"account_id":2056173,"reputation":2037,"user_id":1833878,"accept_rate":68,"display_name":"Chris Phillips"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634331119,"creation_date":1634330788,"answer_id":69590424,"question_id":69590356,"body_markdown":"does it need to be random, or just be unique? \r\n\r\nI would recommend against using `uptimeMillis()` because you risk collisions every time that the system is restarted. Use the actual time instead of the uptime to reduce the chance of a collision.\r\n\r\nAlternatively, you could use `java.util.UUID.randomUUID();`. It&#39;s theoretically possible to generate a duplicate, but I wouldn&#39;t count on it.","title":"java, how to generate a good random int","body":"<p>does it need to be random, or just be unique?</p>\n<p>I would recommend against using <code>uptimeMillis()</code> because you risk collisions every time that the system is restarted. Use the actual time instead of the uptime to reduce the chance of a collision.</p>\n<p>Alternatively, you could use <code>java.util.UUID.randomUUID();</code>. It's theoretically possible to generate a duplicate, but I wouldn't count on it.</p>\n"},{"tags":[],"owner":{"account_id":1052258,"reputation":2620,"user_id":1055869,"accept_rate":56,"display_name":"Shabbir Hussain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634330924,"creation_date":1634330924,"answer_id":69590454,"question_id":69590356,"body_markdown":"For you application, you can consider hashing using SHA256 and then taking the last N elements. If your input is a fix string of numbers then you can expect your output to be computed in constant time as well. \r\n\r\nSee:\r\nhttps://stackoverflow.com/questions/5531455/how-to-hash-some-string-with-sha256-in-java \r\n\r\nIf you&#39;re looking to assign random IDs to objects I suggest you use a GUID library. This generates a string rather than a number but you can be certain that no two will be alike.\r\n\r\nsee: https://kodejava.org/how-do-i-generate-uuid-guid-in-java/","title":"java, how to generate a good random int","body":"<p>For you application, you can consider hashing using SHA256 and then taking the last N elements. If your input is a fix string of numbers then you can expect your output to be computed in constant time as well.</p>\n<p>See:\n<a href=\"https://stackoverflow.com/questions/5531455/how-to-hash-some-string-with-sha256-in-java\">How to hash some string with sha256 in Java?</a></p>\n<p>If you're looking to assign random IDs to objects I suggest you use a GUID library. This generates a string rather than a number but you can be certain that no two will be alike.</p>\n<p>see: <a href=\"https://kodejava.org/how-do-i-generate-uuid-guid-in-java/\" rel=\"nofollow noreferrer\">https://kodejava.org/how-do-i-generate-uuid-guid-in-java/</a></p>\n"},{"tags":[],"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1634331154,"creation_date":1634331154,"answer_id":69590489,"question_id":69590356,"body_markdown":"If you cannot have duplicates, there is nothing efficient that _any_ random number generator can do other than saving all the numbers you&#39;ve already generated and checking.\r\n\r\nYou can generate bigger and bigger random numbers to reduce the probability of duplicates -- which is what e.g. `UUID` does, reducing it to extremely unlikely.\r\n\r\nUsing a `Random` or `SecureRandom` will probably have to be good enough, possibly combined with explicit testing to see if you already have generated a given value.\r\n\r\nThat said, if all you need is to generate IDs that do not have any duplicates on this JVM, the solution is very easy:\r\n\r\n    static final AtomicInteger counter = new AtomicInteger();\r\n    public static int getNewId() { return counter.getAndIncrement(); }","title":"java, how to generate a good random int","body":"<p>If you cannot have duplicates, there is nothing efficient that <em>any</em> random number generator can do other than saving all the numbers you've already generated and checking.</p>\n<p>You can generate bigger and bigger random numbers to reduce the probability of duplicates -- which is what e.g. <code>UUID</code> does, reducing it to extremely unlikely.</p>\n<p>Using a <code>Random</code> or <code>SecureRandom</code> will probably have to be good enough, possibly combined with explicit testing to see if you already have generated a given value.</p>\n<p>That said, if all you need is to generate IDs that do not have any duplicates on this JVM, the solution is very easy:</p>\n<pre><code>static final AtomicInteger counter = new AtomicInteger();\npublic static int getNewId() { return counter.getAndIncrement(); }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3579384,"reputation":10125,"user_id":2987953,"accept_rate":49,"display_name":"lannyf"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634398298,"creation_date":1634397541,"answer_id":69596927,"question_id":69590356,"body_markdown":"based on @Louis Wasserman&#39;s answer, this one works\r\n```\r\nstatic final AtomicInteger counter = new AtomicInteger((int) (System.currentTimeMillis()));\r\npublic static int getNewId() { return counter.getAndIncrement(); }\r\n\r\n```","title":"java, how to generate a good random int","body":"<p>based on @Louis Wasserman's answer, this one works</p>\n<pre><code>static final AtomicInteger counter = new AtomicInteger((int) (System.currentTimeMillis()));\npublic static int getNewId() { return counter.getAndIncrement(); }\n\n</code></pre>\n"}],"owner":{"account_id":3579384,"reputation":10125,"user_id":2987953,"accept_rate":49,"display_name":"lannyf"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":139,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":69590489,"answer_count":4,"score":-2,"last_activity_date":1634398298,"creation_date":1634330281,"question_id":69590356,"body_markdown":"android app, it needs to generate a random int key for different use cases.\r\nit has a function for the random int, which is fine in most time, but in the case if it is called frequently it may return a same number.\r\n```\r\n    int nextRandomId() {\r\n        return (int) SystemClock.uptimeMillis();\r\n    }\r\n```\r\none of the case when build the notification action buttons, there will be multiple `action button` each will have its own pendingIntent with requestid from nextRandomId().\r\n```\r\n\r\nIntent broadcastIntent_one = Intent(this, NotificationReceiver.class);\r\nbroadcastIntent_one.putExtra(&quot;action&quot;, ACTION_ONE);  //ACTION_TWO, ACTION_THREE\r\nbroadcastIntent_one.putExtra(EXTRA_NOTIFICATION_ID, notificationId)\r\n\r\n// adding action for broadcast\r\n   PendingIntent broadcastPendingIntent_one =\r\n      PendingIntent.getBroadcast(application, nextRandomId(), broadcastIntent_one, PendingIntent.FLAG_UPDATE_CURRENT);\r\n\r\n... ...\r\n builder.addAction(null, &quot;action one&quot;, broadcastPendingIntent_one);\r\n builder.addAction(null, &quot;action two&quot;, broadcastPendingIntent_two);\r\n builder.addAction(null, &quot;action three&quot;, broadcastPendingIntent_three);\r\n\r\n\r\n```\r\nin case of building three action buttons, the log shows some of the random numbers are same:\r\n```\r\n16:00:55.003  nextRandomId(): 400267105\r\n16:00:55.003  nextRandomId(): 400267106\r\n16:00:55.003  nextRandomId(): 400267106\r\n```\r\nso in the `NotificationReceiver` the last two action buttons are all having the `ACTION_THREE`in the extra.\r\n\r\nwhat is a better way to generate a number not duplicate (no clash, efficient)? ","title":"java, how to generate a good random int","body":"<p>android app, it needs to generate a random int key for different use cases.\nit has a function for the random int, which is fine in most time, but in the case if it is called frequently it may return a same number.</p>\n<pre><code>    int nextRandomId() {\n        return (int) SystemClock.uptimeMillis();\n    }\n</code></pre>\n<p>one of the case when build the notification action buttons, there will be multiple <code>action button</code> each will have its own pendingIntent with requestid from nextRandomId().</p>\n<pre><code>\nIntent broadcastIntent_one = Intent(this, NotificationReceiver.class);\nbroadcastIntent_one.putExtra(&quot;action&quot;, ACTION_ONE);  //ACTION_TWO, ACTION_THREE\nbroadcastIntent_one.putExtra(EXTRA_NOTIFICATION_ID, notificationId)\n\n// adding action for broadcast\n   PendingIntent broadcastPendingIntent_one =\n      PendingIntent.getBroadcast(application, nextRandomId(), broadcastIntent_one, PendingIntent.FLAG_UPDATE_CURRENT);\n\n... ...\n builder.addAction(null, &quot;action one&quot;, broadcastPendingIntent_one);\n builder.addAction(null, &quot;action two&quot;, broadcastPendingIntent_two);\n builder.addAction(null, &quot;action three&quot;, broadcastPendingIntent_three);\n\n\n</code></pre>\n<p>in case of building three action buttons, the log shows some of the random numbers are same:</p>\n<pre><code>16:00:55.003  nextRandomId(): 400267105\n16:00:55.003  nextRandomId(): 400267106\n16:00:55.003  nextRandomId(): 400267106\n</code></pre>\n<p>so in the <code>NotificationReceiver</code> the last two action buttons are all having the <code>ACTION_THREE</code>in the extra.</p>\n<p>what is a better way to generate a number not duplicate (no clash, efficient)?</p>\n"},{"tags":["java","authentication","spring-security","google-signin"],"comments":[{"owner":{"account_id":7125505,"reputation":537,"user_id":5448544,"display_name":"lazyneuron"},"score":0,"creation_date":1502804327,"post_id":45693012,"comment_id":78345953,"body_markdown":"You will need to take care of several issues. How would you manage local users for Spring Sec Application and external users from Google? How will be principals from Google  translated to Spring Sec principal? Those are the two which I can tell from top of my mind.","body":"You will need to take care of several issues. How would you manage local users for Spring Sec Application and external users from Google? How will be principals from Google  translated to Spring Sec principal? Those are the two which I can tell from top of my mind."},{"owner":{"account_id":1012690,"reputation":65,"user_id":1024904,"display_name":"Vitaly Zakharenko"},"score":0,"creation_date":1502804775,"post_id":45693012,"comment_id":78346257,"body_markdown":"&quot; How would you manage local users for Spring Sec Application and external users from Google?&quot;  I will manage them the same creating a new user if the doesn&#39;t exist already. \n&quot;How will be principals from Google translated to Spring Sec principal?&quot;\nI will have to provide an option to the Google user to bind the Spring sec user by specifying a valid login/password combination (that the spring user was registered with).","body":"&quot; How would you manage local users for Spring Sec Application and external users from Google?&quot;  I will manage them the same creating a new user if the doesn&#39;t exist already.  &quot;How will be principals from Google translated to Spring Sec principal?&quot; I will have to provide an option to the Google user to bind the Spring sec user by specifying a valid login/password combination (that the spring user was registered with)."}],"answers":[{"tags":[],"owner":{"account_id":1012690,"reputation":65,"user_id":1024904,"display_name":"Vitaly Zakharenko"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1503215930,"creation_date":1503215930,"answer_id":45779814,"question_id":45693012,"body_markdown":"So, the right answer turned out to be not extending the existing auth filter/provider but defining/adding another {Token Authentication class + token auth filter + token auth provider (provider is kind of optional)}","title":"Google sign-in with Java Spring security application","body":"<p>So, the right answer turned out to be not extending the existing auth filter/provider but defining/adding another {Token Authentication class + token auth filter + token auth provider (provider is kind of optional)}</p>\n"},{"tags":[],"owner":{"account_id":118130,"reputation":1528,"user_id":308928,"accept_rate":25,"display_name":"danw"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1507861207,"creation_date":1507861207,"answer_id":46721527,"question_id":45693012,"body_markdown":"Here is my take on the required spring-security components:\r\n\r\nfilter:\r\n\r\n    import org.springframework.security.authentication.AuthenticationManager;\r\n    import org.springframework.security.core.Authentication;\r\n    import org.springframework.security.core.AuthenticationException;\r\n    import org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter;\r\n    import org.springframework.util.Assert;\r\n    \r\n    import javax.servlet.ServletException;\r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpServletResponse;\r\n    import java.io.IOException;\r\n    \r\n    public class GoogleIdAuthenticationFilter extends AbstractAuthenticationProcessingFilter {\r\n    \tprivate static final long serialVersionUID = 1L;\r\n    \tprivate String tokenParamName = &quot;googleIdToken&quot;;\r\n    \r\n    \t/**\r\n    \t * Creates an instance which will authenticate against the supplied\r\n    \t * {@code AuthenticationManager} and which will ignore failed authentication attempts,\r\n    \t * allowing the request to proceed down the filter chain.\r\n    \t *\r\n    \t * @param authenticationManager     the bean to submit authentication requests to\r\n    \t * @param defaultFilterProcessesUrl the url to check for auth requests on (e.g. /login/google)\r\n    \t */\r\n    \tpublic GoogleIdAuthenticationFilter(AuthenticationManager authenticationManager, String defaultFilterProcessesUrl) {\r\n    \t\tsuper(defaultFilterProcessesUrl);\r\n    \t\tAssert.notNull(authenticationManager, &quot;authenticationManager cannot be null&quot;);\r\n    \t\tsetAuthenticationManager(authenticationManager);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic Authentication attemptAuthentication(HttpServletRequest request, HttpServletResponse response) throws AuthenticationException, IOException, ServletException {\r\n    \t\tString token = request.getParameter(tokenParamName);\r\n    \r\n    \t\tif (token == null) {\r\n    \t\t\treturn null;\r\n    \t\t}\r\n    \r\n    \t\tif (this.logger.isDebugEnabled()) {\r\n    \t\t\tthis.logger.debug(&quot;Google ID Token Authorization parameter found with value &#39;&quot; + token + &quot;&#39;&quot;);\r\n    \t\t}\r\n    \r\n    \t\tObject details = this.authenticationDetailsSource.buildDetails(request);\r\n    \r\n    \t\tGoogleIdAuthenticationToken authRequest = new GoogleIdAuthenticationToken(token, details);\r\n    \r\n    \t\tAuthentication authResult = getAuthenticationManager().authenticate(authRequest);\r\n    \r\n    \t\tif (this.logger.isDebugEnabled()) {\r\n    \t\t\tthis.logger.debug(&quot;Authentication success: &quot; + authResult);\r\n    \t\t}\r\n    \r\n    \t\treturn authResult;\r\n    \t}\r\n    \r\n    \tpublic String getTokenParamName() {\r\n    \t\treturn tokenParamName;\r\n    \t}\r\n    \r\n    \tpublic void setTokenParamName(String tokenParamName) {\r\n    \t\tthis.tokenParamName = tokenParamName;\r\n    \t}\r\n    }\r\n\r\nauthentication provider:\r\n\r\n    import com.google.api.client.googleapis.auth.oauth2.GoogleIdToken;\r\n    import com.google.api.client.googleapis.auth.oauth2.GoogleIdToken.Payload;\r\n    import com.google.api.client.googleapis.auth.oauth2.GoogleIdTokenVerifier;\r\n    import com.google.api.client.http.HttpTransport;\r\n    import com.google.api.client.http.apache.ApacheHttpTransport;\r\n    import com.google.api.client.json.JsonFactory;\r\n    import com.google.api.client.json.jackson2.JacksonFactory;\r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n    import org.springframework.context.support.MessageSourceAccessor;\r\n    import org.springframework.security.authentication.*;\r\n    import org.springframework.security.core.Authentication;\r\n    import org.springframework.security.core.AuthenticationException;\r\n    import org.springframework.security.core.SpringSecurityMessageSource;\r\n    import org.springframework.security.core.userdetails.UserDetailsService;\r\n    import org.springframework.security.core.userdetails.UsernameNotFoundException;\r\n    \r\n    import javax.annotation.Resource;\r\n    import java.io.IOException;\r\n    import java.security.GeneralSecurityException;\r\n    import java.util.Collections;\r\n    \r\n    public class GoogleIdAuthenticationProvider implements AuthenticationProvider {\r\n        private static final Logger logger = LoggerFactory.getLogger(GoogleIdAuthenticationProvider.class);\r\n    \r\n        private String clientId;\r\n    \r\n        @Resource\r\n        private UserDetailsService userDetailsService;\r\n    \r\n        private HttpTransport httpTransport = new ApacheHttpTransport();\r\n        private JsonFactory jsonFactory = new JacksonFactory();\r\n    \r\n        protected MessageSourceAccessor messages = SpringSecurityMessageSource.getAccessor();\r\n    \r\n        @Override\r\n        public Authentication authenticate(Authentication authentication) throws AuthenticationException {\r\n            if (!supports(authentication.getClass())) {\r\n                if (logger.isDebugEnabled()) {\r\n                    logger.debug(String.format(&quot;This authentication provider does not support instances of type %s&quot;, authentication.getClass().getName()));\r\n                }\r\n                return null;\r\n            }\r\n    \r\n            GoogleIdAuthenticationToken googleIdAuthenticationToken = (GoogleIdAuthenticationToken) authentication;\r\n    \r\n            if (logger.isDebugEnabled())\r\n                logger.debug(String.format(&quot;Validating google login with token &#39;%s&#39;&quot;, googleIdAuthenticationToken.getCredentials()));\r\n    \r\n    \r\n            GoogleIdTokenVerifier verifier = new GoogleIdTokenVerifier.Builder(httpTransport, jsonFactory)\r\n                    .setAudience(Collections.singletonList(getClientId()))\r\n                    .build();\r\n    \r\n            GoogleIdToken googleIdToken = null;\r\n            try {\r\n                googleIdToken = verifier.verify((String) googleIdAuthenticationToken.getCredentials());\r\n    \r\n                if (googleIdToken == null) {\r\n                    throw new BadCredentialsException(&quot;Unable to verify token&quot;);\r\n                }\r\n            } catch (IOException|GeneralSecurityException e) {\r\n                throw new BadCredentialsException(&quot;Unable to verify token&quot;, e);\r\n            }\r\n    \r\n            Payload payload = googleIdToken.getPayload();\r\n    \r\n            // Get profile information from payload\r\n            String email = payload.getEmail();\r\n    \r\n            if (logger.isDebugEnabled()) {\r\n                logger.debug(String.format(&quot;Loading user details for email &#39;%s&#39;&quot;, email));\r\n            }\r\n            UserDetails userDetails = null;\r\n            try {\r\n                userDetails = userDetailsService.loadUserByUsername(email);\r\n    \r\n                if (!userDetails.isAccountNonLocked()) {\r\n                    throw new LockedException(messages.getMessage(&quot;AbstractUserDetailsAuthenticationProvider.locked&quot;, &quot;User account is locked&quot;));\r\n                }\r\n    \r\n                if (!userDetails.isEnabled()) {\r\n                    throw new DisabledException(messages.getMessage(&quot;AbstractUserDetailsAuthenticationProvider.disabled&quot;, &quot;User is disabled&quot;));\r\n                }\r\n    \r\n                if (!userDetails.isAccountNonExpired()) {\r\n                    throw new AccountExpiredException(messages.getMessage(&quot;AbstractUserDetailsAuthenticationProvider.expired&quot;, &quot;User account has expired&quot;));\r\n                }\r\n            } catch (UsernameNotFoundException e) {\r\n                // provision a new user?\r\n                throw e;\r\n            }\r\n    \r\n            return new GoogleIdAuthenticationToken((String) googleIdAuthenticationToken.getCredentials(), userDetails.getUsername(), userDetails.getAuthorities(), authentication.getDetails());\r\n        }\r\n    \r\n        @Override\r\n        public boolean supports(Class&lt;? extends Object&gt; authentication) {\r\n            return (GoogleIdAuthenticationToken.class.isAssignableFrom(authentication));\r\n        }\r\n    \r\n        public String getClientId() {\r\n            return clientId;\r\n        }\r\n    \r\n        public void setClientId(String clientId) {\r\n            this.clientId = clientId;\r\n        }\r\n    }\r\n\r\ntoken: \r\n\r\n    import org.springframework.security.authentication.AbstractAuthenticationToken;\r\n    import org.springframework.security.core.GrantedAuthority;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.Collection;\r\n    \r\n    public class GoogleIdAuthenticationToken extends AbstractAuthenticationToken {\r\n        private String credentials;\r\n        private Object principal;\r\n    \r\n        public GoogleIdAuthenticationToken(String token, Object details) {\r\n            super(new ArrayList&lt;&gt;());\r\n            this.credentials = token;\r\n            setDetails(details);\r\n            setAuthenticated(false);\r\n        }\r\n    \r\n        GoogleIdAuthenticationToken(String token, String principal, Collection&lt;? extends GrantedAuthority&gt; authorities, Object details) {\r\n            super(authorities);\r\n            this.credentials = token;\r\n            this.principal = principal;\r\n            setDetails(details);\r\n            setAuthenticated(true);\r\n        }\r\n    \r\n        @Override\r\n        public Object getCredentials() {\r\n            return credentials;\r\n        }\r\n    \r\n        @Override\r\n        public Object getPrincipal() {\r\n            return principal;\r\n        }\r\n    }\r\n\r\nAfter plugging in the above you&#39;ll just need to POST to &quot;/login/google&quot; (or whatever you&#39;ve configured) with the token returned by Google in the &#39;googleIdToken&#39; (or whatever you&#39;ve configured).","title":"Google sign-in with Java Spring security application","body":"<p>Here is my take on the required spring-security components:</p>\n\n<p>filter:</p>\n\n<pre><code>import org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.core.Authentication;\nimport org.springframework.security.core.AuthenticationException;\nimport org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter;\nimport org.springframework.util.Assert;\n\nimport javax.servlet.ServletException;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\nimport java.io.IOException;\n\npublic class GoogleIdAuthenticationFilter extends AbstractAuthenticationProcessingFilter {\n    private static final long serialVersionUID = 1L;\n    private String tokenParamName = \"googleIdToken\";\n\n    /**\n     * Creates an instance which will authenticate against the supplied\n     * {@code AuthenticationManager} and which will ignore failed authentication attempts,\n     * allowing the request to proceed down the filter chain.\n     *\n     * @param authenticationManager     the bean to submit authentication requests to\n     * @param defaultFilterProcessesUrl the url to check for auth requests on (e.g. /login/google)\n     */\n    public GoogleIdAuthenticationFilter(AuthenticationManager authenticationManager, String defaultFilterProcessesUrl) {\n        super(defaultFilterProcessesUrl);\n        Assert.notNull(authenticationManager, \"authenticationManager cannot be null\");\n        setAuthenticationManager(authenticationManager);\n    }\n\n    @Override\n    public Authentication attemptAuthentication(HttpServletRequest request, HttpServletResponse response) throws AuthenticationException, IOException, ServletException {\n        String token = request.getParameter(tokenParamName);\n\n        if (token == null) {\n            return null;\n        }\n\n        if (this.logger.isDebugEnabled()) {\n            this.logger.debug(\"Google ID Token Authorization parameter found with value '\" + token + \"'\");\n        }\n\n        Object details = this.authenticationDetailsSource.buildDetails(request);\n\n        GoogleIdAuthenticationToken authRequest = new GoogleIdAuthenticationToken(token, details);\n\n        Authentication authResult = getAuthenticationManager().authenticate(authRequest);\n\n        if (this.logger.isDebugEnabled()) {\n            this.logger.debug(\"Authentication success: \" + authResult);\n        }\n\n        return authResult;\n    }\n\n    public String getTokenParamName() {\n        return tokenParamName;\n    }\n\n    public void setTokenParamName(String tokenParamName) {\n        this.tokenParamName = tokenParamName;\n    }\n}\n</code></pre>\n\n<p>authentication provider:</p>\n\n<pre><code>import com.google.api.client.googleapis.auth.oauth2.GoogleIdToken;\nimport com.google.api.client.googleapis.auth.oauth2.GoogleIdToken.Payload;\nimport com.google.api.client.googleapis.auth.oauth2.GoogleIdTokenVerifier;\nimport com.google.api.client.http.HttpTransport;\nimport com.google.api.client.http.apache.ApacheHttpTransport;\nimport com.google.api.client.json.JsonFactory;\nimport com.google.api.client.json.jackson2.JacksonFactory;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.context.support.MessageSourceAccessor;\nimport org.springframework.security.authentication.*;\nimport org.springframework.security.core.Authentication;\nimport org.springframework.security.core.AuthenticationException;\nimport org.springframework.security.core.SpringSecurityMessageSource;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.core.userdetails.UsernameNotFoundException;\n\nimport javax.annotation.Resource;\nimport java.io.IOException;\nimport java.security.GeneralSecurityException;\nimport java.util.Collections;\n\npublic class GoogleIdAuthenticationProvider implements AuthenticationProvider {\n    private static final Logger logger = LoggerFactory.getLogger(GoogleIdAuthenticationProvider.class);\n\n    private String clientId;\n\n    @Resource\n    private UserDetailsService userDetailsService;\n\n    private HttpTransport httpTransport = new ApacheHttpTransport();\n    private JsonFactory jsonFactory = new JacksonFactory();\n\n    protected MessageSourceAccessor messages = SpringSecurityMessageSource.getAccessor();\n\n    @Override\n    public Authentication authenticate(Authentication authentication) throws AuthenticationException {\n        if (!supports(authentication.getClass())) {\n            if (logger.isDebugEnabled()) {\n                logger.debug(String.format(\"This authentication provider does not support instances of type %s\", authentication.getClass().getName()));\n            }\n            return null;\n        }\n\n        GoogleIdAuthenticationToken googleIdAuthenticationToken = (GoogleIdAuthenticationToken) authentication;\n\n        if (logger.isDebugEnabled())\n            logger.debug(String.format(\"Validating google login with token '%s'\", googleIdAuthenticationToken.getCredentials()));\n\n\n        GoogleIdTokenVerifier verifier = new GoogleIdTokenVerifier.Builder(httpTransport, jsonFactory)\n                .setAudience(Collections.singletonList(getClientId()))\n                .build();\n\n        GoogleIdToken googleIdToken = null;\n        try {\n            googleIdToken = verifier.verify((String) googleIdAuthenticationToken.getCredentials());\n\n            if (googleIdToken == null) {\n                throw new BadCredentialsException(\"Unable to verify token\");\n            }\n        } catch (IOException|GeneralSecurityException e) {\n            throw new BadCredentialsException(\"Unable to verify token\", e);\n        }\n\n        Payload payload = googleIdToken.getPayload();\n\n        // Get profile information from payload\n        String email = payload.getEmail();\n\n        if (logger.isDebugEnabled()) {\n            logger.debug(String.format(\"Loading user details for email '%s'\", email));\n        }\n        UserDetails userDetails = null;\n        try {\n            userDetails = userDetailsService.loadUserByUsername(email);\n\n            if (!userDetails.isAccountNonLocked()) {\n                throw new LockedException(messages.getMessage(\"AbstractUserDetailsAuthenticationProvider.locked\", \"User account is locked\"));\n            }\n\n            if (!userDetails.isEnabled()) {\n                throw new DisabledException(messages.getMessage(\"AbstractUserDetailsAuthenticationProvider.disabled\", \"User is disabled\"));\n            }\n\n            if (!userDetails.isAccountNonExpired()) {\n                throw new AccountExpiredException(messages.getMessage(\"AbstractUserDetailsAuthenticationProvider.expired\", \"User account has expired\"));\n            }\n        } catch (UsernameNotFoundException e) {\n            // provision a new user?\n            throw e;\n        }\n\n        return new GoogleIdAuthenticationToken((String) googleIdAuthenticationToken.getCredentials(), userDetails.getUsername(), userDetails.getAuthorities(), authentication.getDetails());\n    }\n\n    @Override\n    public boolean supports(Class&lt;? extends Object&gt; authentication) {\n        return (GoogleIdAuthenticationToken.class.isAssignableFrom(authentication));\n    }\n\n    public String getClientId() {\n        return clientId;\n    }\n\n    public void setClientId(String clientId) {\n        this.clientId = clientId;\n    }\n}\n</code></pre>\n\n<p>token: </p>\n\n<pre><code>import org.springframework.security.authentication.AbstractAuthenticationToken;\nimport org.springframework.security.core.GrantedAuthority;\n\nimport java.util.ArrayList;\nimport java.util.Collection;\n\npublic class GoogleIdAuthenticationToken extends AbstractAuthenticationToken {\n    private String credentials;\n    private Object principal;\n\n    public GoogleIdAuthenticationToken(String token, Object details) {\n        super(new ArrayList&lt;&gt;());\n        this.credentials = token;\n        setDetails(details);\n        setAuthenticated(false);\n    }\n\n    GoogleIdAuthenticationToken(String token, String principal, Collection&lt;? extends GrantedAuthority&gt; authorities, Object details) {\n        super(authorities);\n        this.credentials = token;\n        this.principal = principal;\n        setDetails(details);\n        setAuthenticated(true);\n    }\n\n    @Override\n    public Object getCredentials() {\n        return credentials;\n    }\n\n    @Override\n    public Object getPrincipal() {\n        return principal;\n    }\n}\n</code></pre>\n\n<p>After plugging in the above you'll just need to POST to \"/login/google\" (or whatever you've configured) with the token returned by Google in the 'googleIdToken' (or whatever you've configured).</p>\n"},{"tags":[],"owner":{"account_id":23051682,"reputation":1,"user_id":17168400,"display_name":"OVI"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634398220,"creation_date":1634394934,"answer_id":69596551,"question_id":45693012,"body_markdown":"Here I am sharing some code which I have used for server-side Google sign token verification using spring. It is a working example :  \r\n```\r\n@Autowired\r\nHttpTransport transport;\r\n \r\nprivate static final JsonFactory jsonFactory = new JacksonFactory();\r\n\r\npublic void verify(String idTokenString)\r\n{\r\n    GoogleIdTokenVerifier verifier = new GoogleIdTokenVerifier.Builder(transport, jsonFactory).setAudience(Collections.singletonList(GOOGLE_CLIENT_ID))\r\n                .build();\r\n        GoogleIdToken idToken = verifier.verify(idTokenString);\r\n        IdToken.Payload payload = idToken.getPayload();\r\n        Boolean emailVerified = (Boolean) payload.get(&quot;email_verified&quot;);\r\n        if (if (idToken != null) {\r\n        String email = (String) payload.get(&quot;email&quot;);\r\n        String fname = (String) payload.get(&quot;given_name&quot;);\r\n        String pictureUrl = (String) payload.get(&quot;picture&quot;);\r\n        String lname = (String) payload.get(&quot;family_name&quot;);\r\n}\r\n```\r\nDependencies:\r\n``` \r\n       &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.api-client&lt;/groupId&gt;\r\n            &lt;artifactId&gt;google-api-client&lt;/artifactId&gt;\r\n            &lt;version&gt;1.31.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.http-client&lt;/groupId&gt;\r\n            &lt;artifactId&gt;google-http-client&lt;/artifactId&gt;\r\n            &lt;version&gt;1.40.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n```","title":"Google sign-in with Java Spring security application","body":"<p>Here I am sharing some code which I have used for server-side Google sign token verification using spring. It is a working example :</p>\n<pre><code>@Autowired\nHttpTransport transport;\n \nprivate static final JsonFactory jsonFactory = new JacksonFactory();\n\npublic void verify(String idTokenString)\n{\n    GoogleIdTokenVerifier verifier = new GoogleIdTokenVerifier.Builder(transport, jsonFactory).setAudience(Collections.singletonList(GOOGLE_CLIENT_ID))\n                .build();\n        GoogleIdToken idToken = verifier.verify(idTokenString);\n        IdToken.Payload payload = idToken.getPayload();\n        Boolean emailVerified = (Boolean) payload.get(&quot;email_verified&quot;);\n        if (if (idToken != null) {\n        String email = (String) payload.get(&quot;email&quot;);\n        String fname = (String) payload.get(&quot;given_name&quot;);\n        String pictureUrl = (String) payload.get(&quot;picture&quot;);\n        String lname = (String) payload.get(&quot;family_name&quot;);\n}\n</code></pre>\n<p>Dependencies:</p>\n<pre><code>       &lt;dependency&gt;\n            &lt;groupId&gt;com.google.api-client&lt;/groupId&gt;\n            &lt;artifactId&gt;google-api-client&lt;/artifactId&gt;\n            &lt;version&gt;1.31.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.http-client&lt;/groupId&gt;\n            &lt;artifactId&gt;google-http-client&lt;/artifactId&gt;\n            &lt;version&gt;1.40.0&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":1012690,"reputation":65,"user_id":1024904,"display_name":"Vitaly Zakharenko"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3407,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1634398220,"creation_date":1502800775,"question_id":45693012,"body_markdown":"I am trying to integrate Google sign-in into an existing Spring security application. The goal is to have a Google sign-in button that will allow a user to log in along with the standard login using the username/password combination. \r\n\r\nBased on the guide that Google provides ([https://developers.google.com/identity/sign-in/web/backend-auth][1]) it looks like **all I need to do is extend the login form** (that currently only has the login and the password input fields) **with an extra field &quot;id_token&quot;** and submit it to the server. \r\n\r\n**Would it be a good security practice?** I searched the web and I am surprised I cannot find any similar implementations on the web.\r\n\r\n\r\n  [1]: https://developers.google.com/identity/sign-in/web/backend-auth","title":"Google sign-in with Java Spring security application","body":"<p>I am trying to integrate Google sign-in into an existing Spring security application. The goal is to have a Google sign-in button that will allow a user to log in along with the standard login using the username/password combination. </p>\n\n<p>Based on the guide that Google provides (<a href=\"https://developers.google.com/identity/sign-in/web/backend-auth\" rel=\"nofollow noreferrer\">https://developers.google.com/identity/sign-in/web/backend-auth</a>) it looks like <strong>all I need to do is extend the login form</strong> (that currently only has the login and the password input fields) <strong>with an extra field \"id_token\"</strong> and submit it to the server. </p>\n\n<p><strong>Would it be a good security practice?</strong> I searched the web and I am surprised I cannot find any similar implementations on the web.</p>\n"},{"tags":["java","criteria-api"],"comments":[{"owner":{"account_id":282141,"reputation":5676,"user_id":578855,"accept_rate":30,"display_name":"muasif80"},"score":0,"creation_date":1634398776,"post_id":69596968,"comment_id":123016173,"body_markdown":"Share the code please","body":"Share the code please"},{"owner":{"account_id":20098354,"reputation":504,"user_id":14737400,"display_name":"miroana"},"score":0,"creation_date":1634399847,"post_id":69596968,"comment_id":123016426,"body_markdown":"thank you for your response. It is a general question \n\nDo I need to make some fields in some entities lazy loaded for Criteria API to generate\na query with only selected values?","body":"thank you for your response. It is a general question   Do I need to make some fields in some entities lazy loaded for Criteria API to generate a query with only selected values?"}],"owner":{"account_id":20098354,"reputation":504,"user_id":14737400,"display_name":"miroana"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1634397852,"creation_date":1634397852,"question_id":69596968,"body_markdown":"I have a query expressed via Criteria API, however I see that this query selects extra\r\nfields that which I did not ask. I&#39;ve read that I can make some fields inside entities to load\r\nlazily, however I do not want to change a current situation about fetch. Is there any way, using Criteria API, to select ONLY the fields that I need without touching fetch mode?","title":"Java 11: Criteria API and extra select fields","body":"<p>I have a query expressed via Criteria API, however I see that this query selects extra\nfields that which I did not ask. I've read that I can make some fields inside entities to load\nlazily, however I do not want to change a current situation about fetch. Is there any way, using Criteria API, to select ONLY the fields that I need without touching fetch mode?</p>\n"},{"tags":["java","math","joml"],"comments":[{"owner":{"account_id":384206,"reputation":50386,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"score":0,"creation_date":1611185419,"post_id":65819145,"comment_id":116373334,"body_markdown":"What do you mean with &quot;move the camera position&quot;? The quaternion lets you perform a 3d rotation of some vector, whereas I understand &quot;moving a position&quot; to mean &quot;a 3d translation&quot;, which doesn&#39;t involve quaternion maths.","body":"What do you mean with &quot;move the camera position&quot;? The quaternion lets you perform a 3d rotation of some vector, whereas I understand &quot;moving a position&quot; to mean &quot;a 3d translation&quot;, which doesn&#39;t involve quaternion maths."},{"owner":{"account_id":11979212,"reputation":377,"user_id":8765522,"accept_rate":100,"display_name":"Johannes"},"score":0,"creation_date":1611186306,"post_id":65819145,"comment_id":116373537,"body_markdown":"Yeah but since I already have the quaternion can&#39;t I translate the position with respect to the view direction? Or is there some other way to do it?","body":"Yeah but since I already have the quaternion can&#39;t I translate the position with respect to the view direction? Or is there some other way to do it?"}],"answers":[{"tags":[],"owner":{"account_id":6630353,"reputation":5504,"user_id":8623159,"display_name":"httpdigest"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1611649766,"creation_date":1611649766,"answer_id":65898011,"question_id":65819145,"body_markdown":"In order to get the direction of the -Z axis when using the given `quaternion` (or likewise the given `matrix` with `matrix.rotate(quaternion)`) as the view transformation, then you can call either:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n    Vector3f forward = quaternion.positiveZ(new Vector3f()).negate();\r\n\r\nor\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n    Vector3f forward = matrix.positiveZ(new Vector3f()).negate();\r\n\r\nBoth of which will multiply the vector `(0, 0, 1)` to the right of the _inverted_ quaternion/matrix and store the result into the supplied `Vector3f` instance.\r\n\r\nThis will give you the &quot;forward&quot; direction according to this view transformation in standard OpenGL right-handed view coordinate system.","title":"Movement using quaternion","body":"<p>In order to get the direction of the -Z axis when using the given <code>quaternion</code> (or likewise the given <code>matrix</code> with <code>matrix.rotate(quaternion)</code>) as the view transformation, then you can call either:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Vector3f forward = quaternion.positiveZ(new Vector3f()).negate();\n</code></pre>\n<p>or</p>\n<pre class=\"lang-java prettyprint-override\"><code>Vector3f forward = matrix.positiveZ(new Vector3f()).negate();\n</code></pre>\n<p>Both of which will multiply the vector <code>(0, 0, 1)</code> to the right of the <em>inverted</em> quaternion/matrix and store the result into the supplied <code>Vector3f</code> instance.</p>\n<p>This will give you the &quot;forward&quot; direction according to this view transformation in standard OpenGL right-handed view coordinate system.</p>\n"}],"owner":{"account_id":11979212,"reputation":377,"user_id":8765522,"accept_rate":100,"display_name":"Johannes"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":480,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1634397836,"creation_date":1611185140,"question_id":65819145,"body_markdown":"I&#39;m creating a first-person camera that rotates using Euler angles. I created the view matrix for the camera like this:\r\n\r\n```\r\nQuaternionf rotation = new Quaternionf().rotateXYZ(\r\n  orientation.x,\r\n  orientation.y,\r\n  orientation.z\r\n);\r\n\r\nreturn new Matrix4f().rotate(rotation).translate(\r\n  -this.position.x,\r\n  -this.position.y,\r\n  -this.position.z);\r\n```\r\n\r\nwhere orientation is a `Vector3f` of the Euler angles. How do I use the same rotation quaternion to move the camera position? And how do I get the view direction vector? I want to move the position of the camera from the view direction.\r\n\r\nThe math library I&#39;m using is [JOML][1], but it doesn&#39;t have a tag yet on StackOverflow.\r\n\r\n\r\n  [1]: https://joml-ci.github.io/JOML/","title":"Movement using quaternion","body":"<p>I'm creating a first-person camera that rotates using Euler angles. I created the view matrix for the camera like this:</p>\n<pre><code>Quaternionf rotation = new Quaternionf().rotateXYZ(\n  orientation.x,\n  orientation.y,\n  orientation.z\n);\n\nreturn new Matrix4f().rotate(rotation).translate(\n  -this.position.x,\n  -this.position.y,\n  -this.position.z);\n</code></pre>\n<p>where orientation is a <code>Vector3f</code> of the Euler angles. How do I use the same rotation quaternion to move the camera position? And how do I get the view direction vector? I want to move the position of the camera from the view direction.</p>\n<p>The math library I'm using is <a href=\"https://joml-ci.github.io/JOML/\" rel=\"nofollow noreferrer\">JOML</a>, but it doesn't have a tag yet on StackOverflow.</p>\n"},{"tags":["java","hadoop"],"answers":[{"tags":[],"owner":{"account_id":7771206,"reputation":41309,"user_id":5880706,"display_name":"Ramesh Maharjan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1495593377,"creation_date":1495593377,"answer_id":44148015,"question_id":44144236,"body_markdown":"Yes it is possible to use the same `FSDataInputStream` object to read multiple config files. \r\n\r\n`FSDataInputStream` opens a `stream` to read data from given file location and actual operation of reading is done when you call `read()` method as in your case is `load`&lt;br/&gt;\r\nIn your code \r\n\r\n    FSDataInputStream inputStream = fs.open(new Path(&quot;file:///path/to/1.conf&quot;));\r\n    props1.load(inputStream);\r\nAn `input stream buffer` is created and `props1.load(inputStream)` will `read` line by line data and stores them in properties `props1` until end of file is reached. So all the lines stored in the `inputStream` `buffer` has been read and is `empty`\r\n\r\nAnd in your next code \r\n\r\n     inputStream = fs.open(new Path(&quot;file:///path/to/2.conf&quot;));\r\n     props2.load(inputStream);\r\nThe same is repeated as above but with a new file and new `properties` `object`\r\n\r\nYou can close the `FSDataInputStream` at the end of your code. You should always close it.\r\n\r\nI hope its clear","title":"Hadoop FSDataInputStream reuse to read another file","body":"<p>Yes it is possible to use the same <code>FSDataInputStream</code> object to read multiple config files. </p>\n\n<p><code>FSDataInputStream</code> opens a <code>stream</code> to read data from given file location and actual operation of reading is done when you call <code>read()</code> method as in your case is <code>load</code><br/>\nIn your code </p>\n\n<pre><code>FSDataInputStream inputStream = fs.open(new Path(\"file:///path/to/1.conf\"));\nprops1.load(inputStream);\n</code></pre>\n\n<p>An <code>input stream buffer</code> is created and <code>props1.load(inputStream)</code> will <code>read</code> line by line data and stores them in properties <code>props1</code> until end of file is reached. So all the lines stored in the <code>inputStream</code> <code>buffer</code> has been read and is <code>empty</code></p>\n\n<p>And in your next code </p>\n\n<pre><code> inputStream = fs.open(new Path(\"file:///path/to/2.conf\"));\n props2.load(inputStream);\n</code></pre>\n\n<p>The same is repeated as above but with a new file and new <code>properties</code> <code>object</code></p>\n\n<p>You can close the <code>FSDataInputStream</code> at the end of your code. You should always close it.</p>\n\n<p>I hope its clear</p>\n"}],"owner":{"account_id":3232872,"reputation":625,"user_id":2727704,"accept_rate":88,"display_name":"user2727704"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":645,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":44148015,"answer_count":1,"score":1,"last_activity_date":1634397822,"creation_date":1495570568,"question_id":44144236,"body_markdown":"I&#39;m using `FSDataInputStream` to read config files and wanted to know if I need to `close()` the `inputStream` and `fs` before reading the second config file:\r\n\r\n    FileSystem fs = FileSystem.get(URI.create(&quot;file:///path/to/1.conf&quot;), conf);\r\n    FSDataInputStream inputStream = fs.open(new Path(&quot;file:///path/to/1.conf&quot;));\r\n    props1.load(inputStream);\r\n    ...\r\n    ...\r\n    FileSystem.get(URI.create(&quot;file:///path/to/2.conf&quot;), conf);\r\n    inputStream = fs.open(new Path(&quot;file:///path/to/2.conf&quot;));\r\n    props2.load(inputStream);\r\n    ...\r\n    inputStream.close();\r\n    fs.close();\r\n\r\nIs it safe to read another file reusing the same `inputstream` without closing it in the middle?","title":"Hadoop FSDataInputStream reuse to read another file","body":"<p>I'm using <code>FSDataInputStream</code> to read config files and wanted to know if I need to <code>close()</code> the <code>inputStream</code> and <code>fs</code> before reading the second config file:</p>\n\n<pre><code>FileSystem fs = FileSystem.get(URI.create(\"file:///path/to/1.conf\"), conf);\nFSDataInputStream inputStream = fs.open(new Path(\"file:///path/to/1.conf\"));\nprops1.load(inputStream);\n...\n...\nFileSystem.get(URI.create(\"file:///path/to/2.conf\"), conf);\ninputStream = fs.open(new Path(\"file:///path/to/2.conf\"));\nprops2.load(inputStream);\n...\ninputStream.close();\nfs.close();\n</code></pre>\n\n<p>Is it safe to read another file reusing the same <code>inputstream</code> without closing it in the middle?</p>\n"},{"tags":["java","spring","postgresql","spring-boot","hibernate"],"comments":[{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1634396251,"post_id":69593734,"comment_id":123015515,"body_markdown":"You are using terrible date-time classes that are now legacy. `Date` and `SimpleDateFormat` were supplanted years ago by the modern java.time classes defined in JSR 310.","body":"You are using terrible date-time classes that are now legacy. <code>Date</code> and <code>SimpleDateFormat</code> were supplanted years ago by the modern java.time classes defined in JSR 310."}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1634397799,"creation_date":1634396613,"answer_id":69596797,"question_id":69593734,"body_markdown":"You said:\r\n\r\n&gt; column created_date saved as timestamp without time zone\r\n\r\nThat is the wrong data type for recording moments. Specific points on the timeline must be written to a column of the type `TIMESTAMP WITH TIME ZONE`, not `WITHOUT`.\r\n\r\nPostgres uses the offset-from-UTC or time zone info supplied with any input to adjust to UTC. Values in a `TIMESTAMP WITH TIME ZONE` column in Postgres are always in UTC, always.\r\n\r\nYou said:\r\n\r\n&gt; run the below query on pgadmin\r\n\r\nUnfortunately, many tools including pgAdmin have the anti-feature where they apply some default time zone to adjust the value retrieved from the database. This gives the false illusion of the value having been stored with a particular time zone. But as I said, values in a `TIMESTAMP WITH TIME ZONE` column in Postgres are always in UTC, always. I suggest always setting the pgAdmin session default time zone to UTC.\r\n\r\nNever use `Calendar` or `Date`. Use only *java.time* classes with JDBC 4.2 or later.\r\n\r\nThe time zone `Asia/Calcutta` has been renamed to `Asia/Kolkata`.\r\n\r\nIf you want the start and end of a day as seen in modern India &#127470;&#127475;:\r\n\r\n    ZoneId z = ZoneId.of( &quot;Asia/Kolkata&quot; ) ;\r\n    LocalDate today = LocalDate.now( z ) ;\r\n    ZonedDateTime start = today.atStartOfDay( z ) ;\r\n    ZonedDateTime end = today.plusDays( 1 ).atStartOfDay( z ) ;\r\n\r\nWe are using the Half-Open approach to defining a span of time, usually best for date-time work.\r\n\r\nConvert to `OffsetDateTime` before passing to your `PreparedStatement`, to use a data type appropriate to SQL.\r\n\r\n    OffsetDateTime startOdt = start.toOffsetDateTime() ;\r\n\r\nYou wrote:\r\n\r\n&gt;`Calendar startDate = (Calendar) Calendar.getInstance();`\r\n\r\nNo need to cast here. That method already returns a `Calendar` object, so casting is pointless. (And, never use `Calendar`.)\r\n\r\nIve been brief here, as this topic has already been addressed many many times on Stack Overflow. Search to learn more.\r\n\r\n\r\n","title":"How to change Java Date timezone from server local timezone to a different timezone for a spring boot native query?","body":"<p>You said:</p>\n<blockquote>\n<p>column created_date saved as timestamp without time zone</p>\n</blockquote>\n<p>That is the wrong data type for recording moments. Specific points on the timeline must be written to a column of the type <code>TIMESTAMP WITH TIME ZONE</code>, not <code>WITHOUT</code>.</p>\n<p>Postgres uses the offset-from-UTC or time zone info supplied with any input to adjust to UTC. Values in a <code>TIMESTAMP WITH TIME ZONE</code> column in Postgres are always in UTC, always.</p>\n<p>You said:</p>\n<blockquote>\n<p>run the below query on pgadmin</p>\n</blockquote>\n<p>Unfortunately, many tools including pgAdmin have the anti-feature where they apply some default time zone to adjust the value retrieved from the database. This gives the false illusion of the value having been stored with a particular time zone. But as I said, values in a <code>TIMESTAMP WITH TIME ZONE</code> column in Postgres are always in UTC, always. I suggest always setting the pgAdmin session default time zone to UTC.</p>\n<p>Never use <code>Calendar</code> or <code>Date</code>. Use only <em>java.time</em> classes with JDBC 4.2 or later.</p>\n<p>The time zone <code>Asia/Calcutta</code> has been renamed to <code>Asia/Kolkata</code>.</p>\n<p>If you want the start and end of a day as seen in modern India :</p>\n<pre><code>ZoneId z = ZoneId.of( &quot;Asia/Kolkata&quot; ) ;\nLocalDate today = LocalDate.now( z ) ;\nZonedDateTime start = today.atStartOfDay( z ) ;\nZonedDateTime end = today.plusDays( 1 ).atStartOfDay( z ) ;\n</code></pre>\n<p>We are using the Half-Open approach to defining a span of time, usually best for date-time work.</p>\n<p>Convert to <code>OffsetDateTime</code> before passing to your <code>PreparedStatement</code>, to use a data type appropriate to SQL.</p>\n<pre><code>OffsetDateTime startOdt = start.toOffsetDateTime() ;\n</code></pre>\n<p>You wrote:</p>\n<blockquote>\n<p><code>Calendar startDate = (Calendar) Calendar.getInstance();</code></p>\n</blockquote>\n<p>No need to cast here. That method already returns a <code>Calendar</code> object, so casting is pointless. (And, never use <code>Calendar</code>.)</p>\n<p>Ive been brief here, as this topic has already been addressed many many times on Stack Overflow. Search to learn more.</p>\n"}],"owner":{"account_id":8145683,"reputation":225,"user_id":6134416,"accept_rate":22,"display_name":"Sachinthana Aluvihare"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1053,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69596797,"answer_count":1,"score":0,"last_activity_date":1634397799,"creation_date":1634370801,"question_id":69593734,"body_markdown":"I have records in a db with a column created_date saved as timestamp without time zone. Front-end users are based in +05.30 timezone. Back-end is hosted in Singapore. So the created_date date values are 5.30 hours behind the user&#39;s time.\r\n\r\nHow do i properly select a set of records that got created within a given day.\r\n \r\nEg: if the user is requesting data on 16-oct-2021, server needs to return the data with the created_date between 2021-10-16 00:00:00 and 2021-10-16 23:59:59:999 in their local time which is +05.30\r\n\r\nI have a native query written for this as below,\r\n\r\n```select * from records rr where rr.created_date at time zone &#39;utc&#39; at time zone &#39;Asia/Calcutta&#39; between ?1 and ?2```\r\n\r\nI get the date 1 and 2 with the following code, which is giving the required data set only after 05.30am in users&#39;s timezone (+05.30)\r\n\r\n```\r\nCalendar startDate = (Calendar) Calendar.getInstance();\r\nstartDate.set(Calendar.HOUR_OF_DAY, 0);\r\nstartDate.set(Calendar.MINUTE, 0);\r\nstartDate.set(Calendar.SECOND, 0);\r\nstartDate.set(Calendar.MILLISECOND, 0);\r\n\t\t\t\t\t\t\r\nCalendar endDate = (Calendar) startDate.clone();\r\nendDate.set(Calendar.HOUR_OF_DAY, 23);\r\nendDate.set(Calendar.MINUTE, 59);\r\nendDate.set(Calendar.SECOND, 59);\r\nendDate.set(Calendar.MILLISECOND, 999);\r\n\r\nDate fromDate = startDate.getTime();\r\nDate toDate = endDate.getTime();\r\n```\r\n\r\nSo, Assuming that i need to convert the startDate and endDate to the user&#39;s local timezone before passing as parameters for the query, i did the following,\r\n\r\n```\r\nCalendar startDate = (Calendar) Calendar.getInstance();\r\nstartDate.setTimeZone(TimeZone.getTimeZone(&quot;Asia/Calcutta&quot;)); // convert from server timezone to user&#39;s local timezone\r\nstartDate.set(Calendar.HOUR_OF_DAY, 0);\r\nstartDate.set(Calendar.MINUTE, 0);\r\nstartDate.set(Calendar.SECOND, 0);\r\nstartDate.set(Calendar.MILLISECOND, 0);   \r\n\t\t\t\t\t\t\r\nCalendar endDate = (Calendar) startDate.clone();\r\nendDate.set(Calendar.HOUR_OF_DAY, 23);\r\nendDate.set(Calendar.MINUTE, 59);\r\nendDate.set(Calendar.SECOND, 59);\r\nendDate.set(Calendar.MILLISECOND, 999);\r\n\r\nDate fromDate = startDate.getTime();\r\nDate toDate = endDate.getTime();\r\n```\r\n\r\nThis still doesn&#39;t return me the correct data set. If i directly run the below query on pgadmin i can get the results\r\n\r\n```\r\nselect * from records rr where rr.created_date at time zone &#39;utc&#39; at time zone &#39;Asia/Calcutta&#39; between &#39;2021-10-16 00:00:00&#39; and &#39;2021-10-16 23:59:59&#39; \r\n```\r\n\r\nHow do i get the same data set with my code? Any help would be much appreciated. TIA\r\n\r\n","title":"How to change Java Date timezone from server local timezone to a different timezone for a spring boot native query?","body":"<p>I have records in a db with a column created_date saved as timestamp without time zone. Front-end users are based in +05.30 timezone. Back-end is hosted in Singapore. So the created_date date values are 5.30 hours behind the user's time.</p>\n<p>How do i properly select a set of records that got created within a given day.</p>\n<p>Eg: if the user is requesting data on 16-oct-2021, server needs to return the data with the created_date between 2021-10-16 00:00:00 and 2021-10-16 23:59:59:999 in their local time which is +05.30</p>\n<p>I have a native query written for this as below,</p>\n<p><code>select * from records rr where rr.created_date at time zone 'utc' at time zone 'Asia/Calcutta' between ?1 and ?2</code></p>\n<p>I get the date 1 and 2 with the following code, which is giving the required data set only after 05.30am in users's timezone (+05.30)</p>\n<pre><code>Calendar startDate = (Calendar) Calendar.getInstance();\nstartDate.set(Calendar.HOUR_OF_DAY, 0);\nstartDate.set(Calendar.MINUTE, 0);\nstartDate.set(Calendar.SECOND, 0);\nstartDate.set(Calendar.MILLISECOND, 0);\n                        \nCalendar endDate = (Calendar) startDate.clone();\nendDate.set(Calendar.HOUR_OF_DAY, 23);\nendDate.set(Calendar.MINUTE, 59);\nendDate.set(Calendar.SECOND, 59);\nendDate.set(Calendar.MILLISECOND, 999);\n\nDate fromDate = startDate.getTime();\nDate toDate = endDate.getTime();\n</code></pre>\n<p>So, Assuming that i need to convert the startDate and endDate to the user's local timezone before passing as parameters for the query, i did the following,</p>\n<pre><code>Calendar startDate = (Calendar) Calendar.getInstance();\nstartDate.setTimeZone(TimeZone.getTimeZone(&quot;Asia/Calcutta&quot;)); // convert from server timezone to user's local timezone\nstartDate.set(Calendar.HOUR_OF_DAY, 0);\nstartDate.set(Calendar.MINUTE, 0);\nstartDate.set(Calendar.SECOND, 0);\nstartDate.set(Calendar.MILLISECOND, 0);   \n                        \nCalendar endDate = (Calendar) startDate.clone();\nendDate.set(Calendar.HOUR_OF_DAY, 23);\nendDate.set(Calendar.MINUTE, 59);\nendDate.set(Calendar.SECOND, 59);\nendDate.set(Calendar.MILLISECOND, 999);\n\nDate fromDate = startDate.getTime();\nDate toDate = endDate.getTime();\n</code></pre>\n<p>This still doesn't return me the correct data set. If i directly run the below query on pgadmin i can get the results</p>\n<pre><code>select * from records rr where rr.created_date at time zone 'utc' at time zone 'Asia/Calcutta' between '2021-10-16 00:00:00' and '2021-10-16 23:59:59' \n</code></pre>\n<p>How do i get the same data set with my code? Any help would be much appreciated. TIA</p>\n"},{"tags":["java","macos","3d","lwjgl","joml"],"comments":[{"owner":{"account_id":17311155,"reputation":502,"user_id":12538710,"display_name":"Crih.exe"},"score":0,"creation_date":1631457681,"post_id":69152315,"comment_id":122221710,"body_markdown":"You should send us some more code because the problem could be in other classes.","body":"You should send us some more code because the problem could be in other classes."},{"owner":{"account_id":17311155,"reputation":502,"user_id":12538710,"display_name":"Crih.exe"},"score":0,"creation_date":1631457993,"post_id":69152315,"comment_id":122221781,"body_markdown":"Anyway, I suggest you to try for first, with some basic things:\n1) in the while loop, remove the transform&#39;s rotation and set a simple position like `new Vector3f(0, 0, 0)`\n2) same thing for the camera\n3) try to scale up the object you&#39;re trying to render. Maybe it&#39;s just too small or it&#39;s scale is set to 0! I can&#39;t explain you how to change the `Mesh` scale because you didn&#39;t sent us it&#39;s code but you can try.\n(Also, sorry for my bad english LOL)","body":"Anyway, I suggest you to try for first, with some basic things: 1) in the while loop, remove the transform&#39;s rotation and set a simple position like <code>new Vector3f(0, 0, 0)</code> 2) same thing for the camera 3) try to scale up the object you&#39;re trying to render. Maybe it&#39;s just too small or it&#39;s scale is set to 0! I can&#39;t explain you how to change the <code>Mesh</code> scale because you didn&#39;t sent us it&#39;s code but you can try. (Also, sorry for my bad english LOL)"},{"owner":{"account_id":17311155,"reputation":502,"user_id":12538710,"display_name":"Crih.exe"},"score":0,"creation_date":1631458271,"post_id":69152315,"comment_id":122221845,"body_markdown":"You can also try to add a simple camera motion (or simply try to start your program with the camera position changed manually) and once in the window, move around because the mesh may not be in the position you think it is","body":"You can also try to add a simple camera motion (or simply try to start your program with the camera position changed manually) and once in the window, move around because the mesh may not be in the position you think it is"},{"owner":{"account_id":22723187,"reputation":45,"user_id":16887389,"display_name":"Secu7or"},"score":0,"creation_date":1631458612,"post_id":69152315,"comment_id":122221936,"body_markdown":"thank you, I will try it and I put more code in the question","body":"thank you, I will try it and I put more code in the question"},{"owner":{"account_id":17311155,"reputation":502,"user_id":12538710,"display_name":"Crih.exe"},"score":0,"creation_date":1631458722,"post_id":69152315,"comment_id":122221965,"body_markdown":"Another IMPORTANT thing you can try is to set `camera.setPersepective()` last two values to `... , 0.0f, 10000.0f)`. If you don&#39;t change this, your object may be too close or too far to the camera, so it won&#39;t be rendered","body":"Another IMPORTANT thing you can try is to set <code>camera.setPersepective()</code> last two values to <code>... , 0.0f, 10000.0f)</code>. If you don&#39;t change this, your object may be too close or too far to the camera, so it won&#39;t be rendered"},{"owner":{"account_id":22723187,"reputation":45,"user_id":16887389,"display_name":"Secu7or"},"score":0,"creation_date":1631459129,"post_id":69152315,"comment_id":122222054,"body_markdown":"I try all of this and it don&#39;t work, the object is rendered only if the .vs file is like that:\n`#version 330\n\nlayout (location = 0) in vec3 position;\n\nuniform mat4 transformWorld;\nuniform mat4 transformObject;\nuniform mat4 cameraProjection;\n\nvoid main() {\n\tgl_Position = cameraProjection * vec4(position, 1);\n}`\nBut if I do that, there are no transformation","body":"I try all of this and it don&#39;t work, the object is rendered only if the .vs file is like that: <code>#version 330  layout (location = 0) in vec3 position;  uniform mat4 transformWorld; uniform mat4 transformObject; uniform mat4 cameraProjection;  void main() { \tgl_Position = cameraProjection * vec4(position, 1); }</code> But if I do that, there are no transformation"},{"owner":{"account_id":22723187,"reputation":45,"user_id":16887389,"display_name":"Secu7or"},"score":0,"creation_date":1631459411,"post_id":69152315,"comment_id":122222119,"body_markdown":"I found the problem, in the shader class, I was setting value too early. Thank you very much for your help","body":"I found the problem, in the shader class, I was setting value too early. Thank you very much for your help"}],"answers":[{"tags":[],"owner":{"account_id":22723187,"reputation":45,"user_id":16887389,"display_name":"Secu7or"},"down_vote_count":3,"up_vote_count":0,"is_accepted":true,"score":-3,"last_activity_date":1631788302,"creation_date":1631727319,"answer_id":69197597,"question_id":69152315,"body_markdown":"The problem was that in the shader class, I was setting values too early, and the matrices multiplication can&#39;t work because of that. We just need to put \r\n```\r\nuniMatProjection = glGetUniformLocation(program, &quot;cameraProjection&quot;);\r\n\t\tuniMatTransformWorld = glGetUniformLocation(program, &quot;transformWorld&quot;);\r\n\t\tuniMatTransformObject = glGetUniformLocation(program, &quot;transformObject&quot;);\r\n```\r\nat the end of setCamera and setTransform in the Shader class","title":"I use LWJGL and the JOML library, but when I multiply matrices it doesn&#39;t work","body":"<p>The problem was that in the shader class, I was setting values too early, and the matrices multiplication can't work because of that. We just need to put</p>\n<pre><code>uniMatProjection = glGetUniformLocation(program, &quot;cameraProjection&quot;);\n        uniMatTransformWorld = glGetUniformLocation(program, &quot;transformWorld&quot;);\n        uniMatTransformObject = glGetUniformLocation(program, &quot;transformObject&quot;);\n</code></pre>\n<p>at the end of setCamera and setTransform in the Shader class</p>\n"}],"owner":{"account_id":22723187,"reputation":45,"user_id":16887389,"display_name":"Secu7or"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":419,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69197597,"answer_count":1,"score":1,"last_activity_date":1634397740,"creation_date":1631456898,"question_id":69152315,"body_markdown":"I start learning LWJGL very recently and I am trying to get a simple shader to work. I followed an &quot;old&quot; tutorial but when I run the code no shapes appear (the window open but it is just black). Here is my .vs file for my shader :\r\n```\r\n#version 330\r\n\r\nlayout (location = 0) in vec3 position;\r\n\r\nuniform mat4 transformWorld;\r\nuniform mat4 transformObject;\r\nuniform mat4 cameraProjection;\r\n\r\nvoid main() {\r\n\tgl_Position = cameraProjection * transformWorld * transformObject * vec4(position, 1);\r\n}\r\n```\r\nI don&#39;t know what to send to show the problem but here is my main file\r\n```\r\npublic class Main {\r\n\tpublic static void main(String[] args) {\r\n\t\tWindow window = new Window();\r\n\t\twindow.createWindow(700, 700, &quot;window&quot;);\r\n\t\twindow.init();\r\n\t\t\r\n\t\tMesh mesh = new Mesh();\r\n\t\tmesh.create(new float[] {\r\n        \t\t-1, -1 ,0,\r\n        \t\t0, 1  ,0,\r\n        \t\t1, -1 ,0\r\n        });\r\n        \r\n        Shader shader = new Shader();\r\n        shader.create(&quot;basic&quot;);\r\n        \r\n        Camera camera = new Camera();\r\n        Transform transform = new Transform();\r\n        \r\n        camera.setPersepective((float)Math.toRadians(70), 640.0f / 480.0f, 0.01f, 1000.0f);\r\n        camera.setPosition(new Vector3f(0, 1, 3));\r\n        camera.setRotation(new Quaternionf(new AxisAngle4f((float)Math.toRadians(-30), new Vector3f(1, 0, 0))));\r\n        \r\n        boolean isRunning = true;\r\n        float x = 0;\r\n        \r\n        while(isRunning) {\r\n        \tisRunning = !window.shouldColse();\r\n        \t\r\n        \tx += 0.01f;\r\n        \ttransform.setPosition(new Vector3f((float)Math.sin(Math.toRadians(x)), 0, 0));\r\n        \ttransform.getRotation().rotateAxis((float)Math.toRadians(1), 0, 1, 0);\r\n        \t\r\n        \tglfwPollEvents();\r\n        \t\r\n            glClear(GL_COLOR_BUFFER_BIT);\r\n            \r\n            shader.useShader();\r\n            shader.setCamera(camera);\r\n            shader.setTranform(transform);\r\n            mesh.draw();\r\n            \r\n            window.swapBuffers();\r\n        }\r\n        shader.destroy();\r\n        mesh.destroy();\r\n        window.destroy();\r\n\t}\r\n}\r\n```\r\n\r\nHere is the code for the shader function:\r\n```\r\npublic void setCamera(Camera camera) {\r\n\tif (uniMatProjection != -1) {\r\n\t\tfloat matrix[] = new float[16];\r\n\t\tcamera.getProjection().get(matrix);\r\n\t\tglUniformMatrix4fv(uniMatProjection, false, matrix);\r\n\t}\r\n\tif (uniMatTransformWorld != -1) {\r\n\t\tfloat matrix[] = new float[16];\r\n\t\tcamera.getTransformation().get(matrix);\r\n\t\tglUniformMatrix4fv(uniMatTransformWorld, false, matrix);\r\n\t}\r\n}\r\n\t\r\npublic void setTranform(Transform transform) {\r\n\tif (uniMatTransformObject != -1) {\r\n\t\tfloat matrix[] = new float[16];\r\n\t\ttransform.getTransformation().get(matrix);\r\n\t\tglUniformMatrix4fv(uniMatTransformObject, false, matrix);\r\n\t}\r\n}\r\n```\r\n\r\nHere is the code for the camera:\r\n```\r\npublic class Camera {\r\n\tprivate Vector3f position;\r\n\tprivate Quaternionf rotation;\r\n\tprivate Matrix4f projection;\r\n\t\r\n\tpublic Camera() {\r\n\t\tthis.position = new Vector3f();\r\n\t\tthis.rotation = new Quaternionf();\r\n\t\tthis.projection = new Matrix4f();\r\n\t}\r\n\t\r\n\tpublic Matrix4f getTransformation() {\r\n\t\tMatrix4f returnValue = new Matrix4f();\r\n\t\t\r\n\t\treturnValue.rotate(rotation.conjugate(new Quaternionf()));\r\n\t\treturnValue.translate(position.mul(-1, new Vector3f()));\r\n\t\t\r\n\t\treturn returnValue;\r\n\t}\r\n\t\r\n\tpublic void setOrthographics(float left, float right, float top, float bottom) {\r\n\t\tprojection.setOrtho2D(left, right, bottom, top);\r\n\t}\r\n\t\r\n\tpublic void setPersepective(float fov, float aspectRatio, float zNear, float zFar) {\r\n\t\tprojection.setPerspective(fov, aspectRatio, zNear, zFar);\r\n\t}\r\n\r\n\tpublic Vector3f getPosition() {\r\n\t\treturn position;\r\n\t}\r\n\r\n\tpublic void setPosition(Vector3f position) {\r\n\t\tthis.position = position;\r\n\t}\r\n\r\n\tpublic Quaternionf getRotation() {\r\n\t\treturn rotation;\r\n\t}\r\n\r\n\tpublic void setRotation(Quaternionf rotation) {\r\n\t\tthis.rotation = rotation;\r\n\t}\r\n\r\n\tpublic Matrix4f getProjection() {\r\n\t\treturn projection;\r\n\t}\r\n}\r\n```\r\n\r\nHere the code for the transform:\r\n```\r\npublic class Transform {\r\n\tprivate Vector3f position;\r\n\tprivate Quaternionf rotation;\r\n\tprivate Vector3f scale;\r\n\t\r\n\tpublic Transform() {\r\n\t\tposition = new Vector3f();\r\n\t\trotation = new Quaternionf();\r\n\t\tscale = new Vector3f(1); \r\n\t}\r\n\t\r\n\tpublic Matrix4f getTransformation() {\r\n\t\tMatrix4f returnValue = new Matrix4f();\r\n\t\t\r\n\t\treturnValue.translate(position);\r\n\t\treturnValue.rotate(rotation);\r\n\t\treturnValue.scale(scale);\r\n\t\t\r\n\t\treturn returnValue;\r\n\t}\r\n\r\n\tpublic Vector3f getPosition() {\r\n\t\treturn position;\r\n\t}\r\n\r\n\tpublic void setPosition(Vector3f position) {\r\n\t\tthis.position = position;\r\n\t}\r\n\r\n\tpublic Quaternionf getRotation() {\r\n\t\treturn rotation;\r\n\t}\r\n\r\n\tpublic void setRotation(Quaternionf rotation) {\r\n\t\tthis.rotation = rotation;\r\n\t}\r\n\r\n\tpublic Vector3f getScale() {\r\n\t\treturn scale;\r\n\t}\r\n\r\n\tpublic void setScale(Vector3f scale) {\r\n\t\tthis.scale = scale;\r\n\t}\r\n}\r\n```\r\n\r\nand the Mesh class\r\n```\r\npublic class Mesh {\r\n\r\n\tprivate int vertexArrayObject;\r\n\tprivate int vertexBufferObject;\r\n\t\r\n\tprivate int vertexCount;\r\n\t\r\n\tpublic Mesh() {\r\n\t}\r\n\t\r\n\tpublic boolean create(float vertices[]) {\r\n\t\tvertexArrayObject = glGenVertexArrays();\r\n\t\tglBindVertexArray(vertexArrayObject);\r\n\t\t\r\n\t\tvertexBufferObject = glGenBuffers();\r\n\t\tglBindBuffer(GL_ARRAY_BUFFER, vertexBufferObject);\r\n\t\tglBufferData(GL_ARRAY_BUFFER, vertices, GL_STATIC_DRAW);\r\n\t\t\r\n\t\tglEnableVertexAttribArray(0);\r\n\t\tglVertexAttribPointer(0, 3, GL_FLOAT, false, 0, 0);\r\n\t\t\r\n\t\tglBindVertexArray(0);\r\n\t\t\r\n\t\tvertexCount = vertices.length / 3;\r\n\t\t\r\n\t\treturn true;\r\n\t}\r\n\t\r\n\tpublic void destroy() {\r\n\t\tglDeleteBuffers(vertexBufferObject);\r\n\t\tglDeleteVertexArrays(vertexArrayObject);\r\n\t}\r\n\t\r\n\tpublic void draw() {\r\n\t\tglBindVertexArray(vertexArrayObject);\r\n\t\t\r\n\t\tglEnableVertexAttribArray(0);\r\n\t\t\r\n\t\tglDrawArrays(GL_TRIANGLES, 0, vertexCount);\r\n\t\t\r\n\t\tglDisableVertexAttribArray(0);\r\n\t\t\r\n\t\tglBindVertexArray(0);\r\n\t}\r\n}\r\n```\r\n\r\nAnd I work with macOS. I hope I am clear and someone could help me.\r\n","title":"I use LWJGL and the JOML library, but when I multiply matrices it doesn&#39;t work","body":"<p>I start learning LWJGL very recently and I am trying to get a simple shader to work. I followed an &quot;old&quot; tutorial but when I run the code no shapes appear (the window open but it is just black). Here is my .vs file for my shader :</p>\n<pre><code>#version 330\n\nlayout (location = 0) in vec3 position;\n\nuniform mat4 transformWorld;\nuniform mat4 transformObject;\nuniform mat4 cameraProjection;\n\nvoid main() {\n    gl_Position = cameraProjection * transformWorld * transformObject * vec4(position, 1);\n}\n</code></pre>\n<p>I don't know what to send to show the problem but here is my main file</p>\n<pre><code>public class Main {\n    public static void main(String[] args) {\n        Window window = new Window();\n        window.createWindow(700, 700, &quot;window&quot;);\n        window.init();\n        \n        Mesh mesh = new Mesh();\n        mesh.create(new float[] {\n                -1, -1 ,0,\n                0, 1  ,0,\n                1, -1 ,0\n        });\n        \n        Shader shader = new Shader();\n        shader.create(&quot;basic&quot;);\n        \n        Camera camera = new Camera();\n        Transform transform = new Transform();\n        \n        camera.setPersepective((float)Math.toRadians(70), 640.0f / 480.0f, 0.01f, 1000.0f);\n        camera.setPosition(new Vector3f(0, 1, 3));\n        camera.setRotation(new Quaternionf(new AxisAngle4f((float)Math.toRadians(-30), new Vector3f(1, 0, 0))));\n        \n        boolean isRunning = true;\n        float x = 0;\n        \n        while(isRunning) {\n            isRunning = !window.shouldColse();\n            \n            x += 0.01f;\n            transform.setPosition(new Vector3f((float)Math.sin(Math.toRadians(x)), 0, 0));\n            transform.getRotation().rotateAxis((float)Math.toRadians(1), 0, 1, 0);\n            \n            glfwPollEvents();\n            \n            glClear(GL_COLOR_BUFFER_BIT);\n            \n            shader.useShader();\n            shader.setCamera(camera);\n            shader.setTranform(transform);\n            mesh.draw();\n            \n            window.swapBuffers();\n        }\n        shader.destroy();\n        mesh.destroy();\n        window.destroy();\n    }\n}\n</code></pre>\n<p>Here is the code for the shader function:</p>\n<pre><code>public void setCamera(Camera camera) {\n    if (uniMatProjection != -1) {\n        float matrix[] = new float[16];\n        camera.getProjection().get(matrix);\n        glUniformMatrix4fv(uniMatProjection, false, matrix);\n    }\n    if (uniMatTransformWorld != -1) {\n        float matrix[] = new float[16];\n        camera.getTransformation().get(matrix);\n        glUniformMatrix4fv(uniMatTransformWorld, false, matrix);\n    }\n}\n    \npublic void setTranform(Transform transform) {\n    if (uniMatTransformObject != -1) {\n        float matrix[] = new float[16];\n        transform.getTransformation().get(matrix);\n        glUniformMatrix4fv(uniMatTransformObject, false, matrix);\n    }\n}\n</code></pre>\n<p>Here is the code for the camera:</p>\n<pre><code>public class Camera {\n    private Vector3f position;\n    private Quaternionf rotation;\n    private Matrix4f projection;\n    \n    public Camera() {\n        this.position = new Vector3f();\n        this.rotation = new Quaternionf();\n        this.projection = new Matrix4f();\n    }\n    \n    public Matrix4f getTransformation() {\n        Matrix4f returnValue = new Matrix4f();\n        \n        returnValue.rotate(rotation.conjugate(new Quaternionf()));\n        returnValue.translate(position.mul(-1, new Vector3f()));\n        \n        return returnValue;\n    }\n    \n    public void setOrthographics(float left, float right, float top, float bottom) {\n        projection.setOrtho2D(left, right, bottom, top);\n    }\n    \n    public void setPersepective(float fov, float aspectRatio, float zNear, float zFar) {\n        projection.setPerspective(fov, aspectRatio, zNear, zFar);\n    }\n\n    public Vector3f getPosition() {\n        return position;\n    }\n\n    public void setPosition(Vector3f position) {\n        this.position = position;\n    }\n\n    public Quaternionf getRotation() {\n        return rotation;\n    }\n\n    public void setRotation(Quaternionf rotation) {\n        this.rotation = rotation;\n    }\n\n    public Matrix4f getProjection() {\n        return projection;\n    }\n}\n</code></pre>\n<p>Here the code for the transform:</p>\n<pre><code>public class Transform {\n    private Vector3f position;\n    private Quaternionf rotation;\n    private Vector3f scale;\n    \n    public Transform() {\n        position = new Vector3f();\n        rotation = new Quaternionf();\n        scale = new Vector3f(1); \n    }\n    \n    public Matrix4f getTransformation() {\n        Matrix4f returnValue = new Matrix4f();\n        \n        returnValue.translate(position);\n        returnValue.rotate(rotation);\n        returnValue.scale(scale);\n        \n        return returnValue;\n    }\n\n    public Vector3f getPosition() {\n        return position;\n    }\n\n    public void setPosition(Vector3f position) {\n        this.position = position;\n    }\n\n    public Quaternionf getRotation() {\n        return rotation;\n    }\n\n    public void setRotation(Quaternionf rotation) {\n        this.rotation = rotation;\n    }\n\n    public Vector3f getScale() {\n        return scale;\n    }\n\n    public void setScale(Vector3f scale) {\n        this.scale = scale;\n    }\n}\n</code></pre>\n<p>and the Mesh class</p>\n<pre><code>public class Mesh {\n\n    private int vertexArrayObject;\n    private int vertexBufferObject;\n    \n    private int vertexCount;\n    \n    public Mesh() {\n    }\n    \n    public boolean create(float vertices[]) {\n        vertexArrayObject = glGenVertexArrays();\n        glBindVertexArray(vertexArrayObject);\n        \n        vertexBufferObject = glGenBuffers();\n        glBindBuffer(GL_ARRAY_BUFFER, vertexBufferObject);\n        glBufferData(GL_ARRAY_BUFFER, vertices, GL_STATIC_DRAW);\n        \n        glEnableVertexAttribArray(0);\n        glVertexAttribPointer(0, 3, GL_FLOAT, false, 0, 0);\n        \n        glBindVertexArray(0);\n        \n        vertexCount = vertices.length / 3;\n        \n        return true;\n    }\n    \n    public void destroy() {\n        glDeleteBuffers(vertexBufferObject);\n        glDeleteVertexArrays(vertexArrayObject);\n    }\n    \n    public void draw() {\n        glBindVertexArray(vertexArrayObject);\n        \n        glEnableVertexAttribArray(0);\n        \n        glDrawArrays(GL_TRIANGLES, 0, vertexCount);\n        \n        glDisableVertexAttribArray(0);\n        \n        glBindVertexArray(0);\n    }\n}\n</code></pre>\n<p>And I work with macOS. I hope I am clear and someone could help me.</p>\n"},{"tags":["java","rotation","lwjgl","quaternions","joml"],"answers":[{"tags":[],"owner":{"account_id":6630353,"reputation":5504,"user_id":8623159,"display_name":"httpdigest"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1633939450,"creation_date":1633939450,"answer_id":69522852,"question_id":69521185,"body_markdown":"It does not matter whether you transform your Euler angles into a matrix or a quaternion or whatever representation: As long as you use Euler angles to represent an orientation, Gimbal Lock is *unavoidable*.\r\n\r\nSo, in order to _avoid_ Gimbal Lock from happening, you must discard using Euler Angles and stay with one representation for an orientation (like a 3x3 matrix or a quaternion) and apply _delta_ changes to them, instead of trying to represent a full orientation as three Euler angles. So, whenever you - let&#39;s say - rotate the object a few degrees around a certain axis, you apply that delta change or orientation to the matrix/quaternion.","title":"What is the correct way to rotate a quaternion from its current rotation a certain angle?","body":"<p>It does not matter whether you transform your Euler angles into a matrix or a quaternion or whatever representation: As long as you use Euler angles to represent an orientation, Gimbal Lock is <em>unavoidable</em>.</p>\n<p>So, in order to <em>avoid</em> Gimbal Lock from happening, you must discard using Euler Angles and stay with one representation for an orientation (like a 3x3 matrix or a quaternion) and apply <em>delta</em> changes to them, instead of trying to represent a full orientation as three Euler angles. So, whenever you - let's say - rotate the object a few degrees around a certain axis, you apply that delta change or orientation to the matrix/quaternion.</p>\n"},{"tags":[],"owner":{"account_id":1267594,"reputation":47,"user_id":1224563,"accept_rate":60,"display_name":"Althaen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1634206703,"creation_date":1634206703,"answer_id":69568958,"question_id":69521185,"body_markdown":"I believe I have figured it out.\r\n\r\n1. You need to create a quaternion and rotate it to your delta values, do not manipulate quaternion values directly (e.g. use rotationX function instead).\r\n2. To add quaternions together you multiply them.\r\n3. Finally you need to use the equation:\r\n\r\n    delta quaternion * quaternion to rotate * inverse of delta quaternion\r\n\r\nCode:\r\n\r\n        public void rotate(float x, float y, float z) {\r\n            //Use modulus to fix values to below 360 then convert values to radians\r\n            float newX = (float) Math.toRadians(x % 360);\r\n            float newY = (float) Math.toRadians(y % 360);\r\n            float newZ = (float) Math.toRadians(z % 360);\r\n    \r\n            //Create a quaternion with the delta rotation values\r\n            Quaternionf rotationDelta = new Quaternionf();\r\n            rotationDelta.rotationXYZ(newX, newY, newZ);\r\n    \r\n            //Calculate the inverse of the delta quaternion\r\n            Quaternionf conjugate = rotationDelta.conjugate();\r\n    \r\n            //Multiply this transform by the rotation delta quaternion and its inverse\r\n            rotation.mul(rotationDelta).mul(conjugate);\r\n        }","title":"What is the correct way to rotate a quaternion from its current rotation a certain angle?","body":"<p>I believe I have figured it out.</p>\n<ol>\n<li><p>You need to create a quaternion and rotate it to your delta values, do not manipulate quaternion values directly (e.g. use rotationX function instead).</p>\n</li>\n<li><p>To add quaternions together you multiply them.</p>\n</li>\n<li><p>Finally you need to use the equation:</p>\n<p>delta quaternion * quaternion to rotate * inverse of delta quaternion</p>\n</li>\n</ol>\n<p>Code:</p>\n<pre><code>    public void rotate(float x, float y, float z) {\n        //Use modulus to fix values to below 360 then convert values to radians\n        float newX = (float) Math.toRadians(x % 360);\n        float newY = (float) Math.toRadians(y % 360);\n        float newZ = (float) Math.toRadians(z % 360);\n\n        //Create a quaternion with the delta rotation values\n        Quaternionf rotationDelta = new Quaternionf();\n        rotationDelta.rotationXYZ(newX, newY, newZ);\n\n        //Calculate the inverse of the delta quaternion\n        Quaternionf conjugate = rotationDelta.conjugate();\n\n        //Multiply this transform by the rotation delta quaternion and its inverse\n        rotation.mul(rotationDelta).mul(conjugate);\n    }\n</code></pre>\n"}],"owner":{"account_id":1267594,"reputation":47,"user_id":1224563,"accept_rate":60,"display_name":"Althaen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1608,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69568958,"answer_count":2,"score":1,"last_activity_date":1634397651,"creation_date":1633927865,"question_id":69521185,"body_markdown":"I am trying to use quaternion rotation using the quaternion from JOML: https://github.com/JOML-CI/JOML/blob/main/src/org/joml/Quaternionf.java. \r\n\r\nI can get objects to rotate but they get stuck and are unable to complete a full rotation. The object is being updated every frame.\r\n\r\nEdit:\r\nRemoved all euler related code and am simply trying to get the object to rotate on a single axis based on a certain angle.\r\n\r\nEdit 2:\r\nAm trying to use the conjugate and multiplying the quaternions together like I have seen in some videos. I&#39;m not quite there though as the model spins itself off the screen for some reason.\r\n\r\nEdit 3:\r\nNormalizing the quaternion fixed the disappearing behaviour. The issue seems to be that there&#39;s no simple way to rotate a certain amount without either having a timer to lerp over which will not work in my case as I am trying to rotate an object an arbitrary amount with no set beginning and end.\r\n\r\nRotation function\r\n\r\n    public void rotate(float angle, float x, float y, float z) {\r\n        Quaternionf rot = new Quaternionf();\r\n        rot.rotateAxis((float) Math.toRadians(angle), x, y, z);\r\n\r\n        Quaternionf conjugate = rot.conjugate();\r\n\r\n        rotation = rot.mul(rotation).mul(conjugate);\r\n    }\r\n\r\nCalling the rotation function\r\n\r\n    entity.transform.rotate( 1,0,1, 0);","title":"What is the correct way to rotate a quaternion from its current rotation a certain angle?","body":"<p>I am trying to use quaternion rotation using the quaternion from JOML: <a href=\"https://github.com/JOML-CI/JOML/blob/main/src/org/joml/Quaternionf.java\" rel=\"nofollow noreferrer\">https://github.com/JOML-CI/JOML/blob/main/src/org/joml/Quaternionf.java</a>.</p>\n<p>I can get objects to rotate but they get stuck and are unable to complete a full rotation. The object is being updated every frame.</p>\n<p>Edit:\nRemoved all euler related code and am simply trying to get the object to rotate on a single axis based on a certain angle.</p>\n<p>Edit 2:\nAm trying to use the conjugate and multiplying the quaternions together like I have seen in some videos. I'm not quite there though as the model spins itself off the screen for some reason.</p>\n<p>Edit 3:\nNormalizing the quaternion fixed the disappearing behaviour. The issue seems to be that there's no simple way to rotate a certain amount without either having a timer to lerp over which will not work in my case as I am trying to rotate an object an arbitrary amount with no set beginning and end.</p>\n<p>Rotation function</p>\n<pre><code>public void rotate(float angle, float x, float y, float z) {\n    Quaternionf rot = new Quaternionf();\n    rot.rotateAxis((float) Math.toRadians(angle), x, y, z);\n\n    Quaternionf conjugate = rot.conjugate();\n\n    rotation = rot.mul(rotation).mul(conjugate);\n}\n</code></pre>\n<p>Calling the rotation function</p>\n<pre><code>entity.transform.rotate( 1,0,1, 0);\n</code></pre>\n"},{"tags":["java","multithreading","visibility","volatile"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1634395152,"post_id":69596549,"comment_id":123015207,"body_markdown":"`I have doubt about how could a completed write on field being invisible to other Threads` The simple answer is that an optimizer will remove writes when it can.  If the value in question has been hoisted into a register for efficiency then no write occurs.  The volatile prevents that.","body":"<code>I have doubt about how could a completed write on field being invisible to other Threads</code> The simple answer is that an optimizer will remove writes when it can.  If the value in question has been hoisted into a register for efficiency then no write occurs.  The volatile prevents that."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1634395452,"post_id":69596549,"comment_id":123015291,"body_markdown":"`volatile will instruct JVM threads to read the value of volatile variable from main memory and do not cache it locally` On some systems, a write to main memory is required.  On others (notably Intel since about 2008) there&#39;s a QPI bus that makes the cache coherent and an actual write to main memory is not required.","body":"<code>volatile will instruct JVM threads to read the value of volatile variable from main memory and do not cache it locally</code> On some systems, a write to main memory is required.  On others (notably Intel since about 2008) there&#39;s a QPI bus that makes the cache coherent and an actual write to main memory is not required."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1634395550,"post_id":69596549,"comment_id":123015322,"body_markdown":"(And as far as I know `volatile` in C and C++ requires non-temporal semantics and *does* require that the cache be bypassed and a main memory write executed.)","body":"(And as far as I know <code>volatile</code> in C and C++ requires non-temporal semantics and <i>does</i> require that the cache be bypassed and a main memory write executed.)"},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":2,"creation_date":1634395904,"post_id":69596549,"comment_id":123015431,"body_markdown":"Re, &quot;I am just starting to learn about java...&quot; `volatile` is a simpler mechanism, under the hood, than `synchronized` or `ReentrantLock`, but using it in meaningful and correct ways is an _advanced topic._ Save it for later. IMO, you should build a solid understanding of the language before you dive into threads, and then build a solid understanding of correct and meaningful ways to use threads before you start experimenting with `volatile`.","body":"Re, &quot;I am just starting to learn about java...&quot; <code>volatile</code> is a simpler mechanism, under the hood, than <code>synchronized</code> or <code>ReentrantLock</code>, but using it in meaningful and correct ways is an <i>advanced topic.</i> Save it for later. IMO, you should build a solid understanding of the language before you dive into threads, and then build a solid understanding of correct and meaningful ways to use threads before you start experimenting with <code>volatile</code>."},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1634402188,"post_id":69596549,"comment_id":123016998,"body_markdown":"&quot;completed write means you have successfully written the filed back to cache&quot; it _doesn&#39;t_ necessarily mean that for a nonvolatile variable.","body":"&quot;completed write means you have successfully written the filed back to cache&quot; it <i>doesn&#39;t</i> necessarily mean that for a nonvolatile variable."},{"owner":{"account_id":78868,"reputation":336965,"user_id":224132,"accept_rate":83,"display_name":"Peter Cordes"},"score":1,"creation_date":1634409889,"post_id":69596549,"comment_id":123018883,"body_markdown":"Like I already said in comments on [your previous question](https://stackoverflow.com/a/69571738/224132), cache is always coherent, or you wouldn&#39;t be running multiple Java threads across different cores. [Myths Programmers Believe about CPU Caches](https://software.rajivprab.com/2018/04/29/myths-programmers-believe-about-cpu-caches/) explains this; read it again.   `volatile` means the JVM has to run a load or store instruction, making the value part of the cache-coherent view of memory that all cores share.  Flushing cache lines to DRAM is always irrelevant for correctness / visibility.","body":"Like I already said in comments on <a href=\"https://stackoverflow.com/a/69571738/224132\">your previous question</a>, cache is always coherent, or you wouldn&#39;t be running multiple Java threads across different cores. <a href=\"https://software.rajivprab.com/2018/04/29/myths-programmers-believe-about-cpu-caches/\" rel=\"nofollow noreferrer\">Myths Programmers Believe about CPU Caches</a> explains this; read it again.   <code>volatile</code> means the JVM has to run a load or store instruction, making the value part of the cache-coherent view of memory that all cores share.  Flushing cache lines to DRAM is always irrelevant for correctness / visibility."},{"owner":{"account_id":78868,"reputation":336965,"user_id":224132,"accept_rate":83,"display_name":"Peter Cordes"},"score":1,"creation_date":1634410109,"post_id":69596549,"comment_id":123018920,"body_markdown":"Or in other words, &quot;memory contents&quot; is the *logical* view of memory state shared by CPU cores via coherent caches.  That&#39;s what you&#39;re loading from / storing to.  If any tutorials claim that `volatile` forces load/store that goes all the way to DRAM / main memory, they&#39;re wrong.  People get mixed up between *compilers* &quot;caching&quot; values in registers, which are thread-private vs. CPUs caching memory in coherent caches which maintain the illusion of shared state.","body":"Or in other words, &quot;memory contents&quot; is the <i>logical</i> view of memory state shared by CPU cores via coherent caches.  That&#39;s what you&#39;re loading from / storing to.  If any tutorials claim that <code>volatile</code> forces load/store that goes all the way to DRAM / main memory, they&#39;re wrong.  People get mixed up between <i>compilers</i> &quot;caching&quot; values in registers, which are thread-private vs. CPUs caching memory in coherent caches which maintain the illusion of shared state."}],"owner":{"account_id":9741622,"reputation":71,"user_id":7222983,"display_name":"pythonHua"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":104,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1634397172,"creation_date":1634394922,"question_id":69596549,"body_markdown":"I am just starting to learn about java multi-threading and have been troubled with keyword volatile a lot.\r\n\r\nMany tutorial talk about the visibility of volatile field, just like &quot;volatile field becomes visible to all readers (other threads in particular) after a write operation completes on it&quot;. I have doubt about how could a completed write on field being invisible(ignore the situation that some compiler optimization may make the program did not read on the real field) to other Threads(or CPUS)?\r\n\r\nAs my understanding, a completed write means you have successfully written the filed back to cache, and according to the MESI, all others thread should have an Invalid cache line if this filed have been cached by them. One exception ( Since I am not very familiar with the hardcore, this is just a conjecture )is that maybe the result will be written back to the register instead of cache and I do not know whether there is some protocol to keep consistency in this situation or the volatile make it not to write to register in java.\r\n\r\nIn some situation that looks like &quot;invisible&quot; happens examples:\r\n\r\n    A=0,B=0; \r\n    thread1{A=1; B=2;}  \r\n    thread2{if(B==2) {A may be 0 here}}\r\nsuppose the compiler did not reorder it, what makes we see in thread2 is due to the store buffer, and I do not think a write operation in store buffer means a completed write. Since the store buffer and invalidate queue strategy, which make the write on variable A looks like invisible but in fact the write operation has not finished while thread2 read A. Even we make field B volatile, while we set a write operation on field B to the store buffer with memory barriers, thread 2 can read the b value with 0 and finish. As for me, the volatile looks like is not about the visibility of the filed it declared, but more like an edge to make sure that all the writes happens before volatile field write in ThreadA is visible to all operations after volatile field read( volatile read happens after volatile field write in ThreadA has completed ) in another ThreadB.\r\n\r\nBy the way, since I am not an native speakers, I have seen may tutorials with my mother language(also some English tutorials) say that volatile will instruct JVM threads to read the value of volatile variable from main memory and do not cache it locally, and I do not think that is true. Am I right?","title":"Questions about visibility of Java volatile field","body":"<p>I am just starting to learn about java multi-threading and have been troubled with keyword volatile a lot.</p>\n<p>Many tutorial talk about the visibility of volatile field, just like &quot;volatile field becomes visible to all readers (other threads in particular) after a write operation completes on it&quot;. I have doubt about how could a completed write on field being invisible(ignore the situation that some compiler optimization may make the program did not read on the real field) to other Threads(or CPUS)?</p>\n<p>As my understanding, a completed write means you have successfully written the filed back to cache, and according to the MESI, all others thread should have an Invalid cache line if this filed have been cached by them. One exception ( Since I am not very familiar with the hardcore, this is just a conjecture )is that maybe the result will be written back to the register instead of cache and I do not know whether there is some protocol to keep consistency in this situation or the volatile make it not to write to register in java.</p>\n<p>In some situation that looks like &quot;invisible&quot; happens examples:</p>\n<pre><code>A=0,B=0; \nthread1{A=1; B=2;}  \nthread2{if(B==2) {A may be 0 here}}\n</code></pre>\n<p>suppose the compiler did not reorder it, what makes we see in thread2 is due to the store buffer, and I do not think a write operation in store buffer means a completed write. Since the store buffer and invalidate queue strategy, which make the write on variable A looks like invisible but in fact the write operation has not finished while thread2 read A. Even we make field B volatile, while we set a write operation on field B to the store buffer with memory barriers, thread 2 can read the b value with 0 and finish. As for me, the volatile looks like is not about the visibility of the filed it declared, but more like an edge to make sure that all the writes happens before volatile field write in ThreadA is visible to all operations after volatile field read( volatile read happens after volatile field write in ThreadA has completed ) in another ThreadB.</p>\n<p>By the way, since I am not an native speakers, I have seen may tutorials with my mother language(also some English tutorials) say that volatile will instruct JVM threads to read the value of volatile variable from main memory and do not cache it locally, and I do not think that is true. Am I right?</p>\n"},{"tags":["java","android","button","initialization"],"answers":[{"tags":[],"owner":{"account_id":18008671,"reputation":91,"user_id":15114205,"display_name":"M D"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634395936,"creation_date":1634395936,"answer_id":69596707,"question_id":69596532,"body_markdown":"If you want to continue with what you are doing then use a list of Integer not String, and put ids inside of it.\r\n\r\nBUT if the reason you are doing this is that you don&#39;t want to use `findViewById()` a lot then there are solutions for this like view binding it is very simple\r\n\r\nread more at: https://developer.android.com/topic/libraries/view-binding","title":"How to initialize several buttons in java","body":"<p>If you want to continue with what you are doing then use a list of Integer not String, and put ids inside of it.</p>\n<p>BUT if the reason you are doing this is that you don't want to use <code>findViewById()</code> a lot then there are solutions for this like view binding it is very simple</p>\n<p>read more at: <a href=\"https://developer.android.com/topic/libraries/view-binding\" rel=\"nofollow noreferrer\">https://developer.android.com/topic/libraries/view-binding</a></p>\n"},{"tags":[],"owner":{"account_id":16582962,"reputation":3261,"user_id":11983124,"display_name":"Praveen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634396878,"creation_date":1634396878,"answer_id":69596834,"question_id":69596532,"body_markdown":"You should not use `findViewById`, it&#39;s a tedious process to get each view. Instead, you should use `viewBinding` which would generate a binding class for your XML and it&#39;ll contain direct references to all views.\r\n\r\nFor using `viewBinding`, enable it in your module&#39;s `build.gradle`\r\n\r\n    android {\r\n        ...\r\n        buildFeatures {\r\n            viewBinding true\r\n        }\r\n    }\r\n\r\nSync your Gradle build and it&#39;ll generate binding classes for each view.\r\n\r\nIn your activity\r\n\r\n    private lateinit var binding: ActivityMainBinding\r\n    \r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        binding = ActivityMainBinding.inflate(layoutInflater)\r\n        setContentView(binding.root)\r\n    \r\n        //access views using binding\r\n        binding.btnAc.setOnClickListener  {}\r\n    }\r\n\r\nFor using in a fragment\r\n\r\n    private var _binding: FragmentBinding? = null\r\n    // This property is only valid between onCreateView and\r\n    // onDestroyView.\r\n    private val binding get() = _binding!!\r\n    \r\n    override fun onCreateView(\r\n        inflater: LayoutInflater,\r\n        container: ViewGroup?,\r\n        savedInstanceState: Bundle?\r\n    ): View? {\r\n        _binding = FragmentBinding.inflate(inflater, container, false)\r\n        val view = binding.root\r\n        return view\r\n    }\r\n    \r\n    override fun onDestroyView() {\r\n        super.onDestroyView()\r\n        _binding = null // setting it null, otherwise it would lead to memory leak\r\n    }\r\n\r\n","title":"How to initialize several buttons in java","body":"<p>You should not use <code>findViewById</code>, it's a tedious process to get each view. Instead, you should use <code>viewBinding</code> which would generate a binding class for your XML and it'll contain direct references to all views.</p>\n<p>For using <code>viewBinding</code>, enable it in your module's <code>build.gradle</code></p>\n<pre><code>android {\n    ...\n    buildFeatures {\n        viewBinding true\n    }\n}\n</code></pre>\n<p>Sync your Gradle build and it'll generate binding classes for each view.</p>\n<p>In your activity</p>\n<pre><code>private lateinit var binding: ActivityMainBinding\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    binding = ActivityMainBinding.inflate(layoutInflater)\n    setContentView(binding.root)\n\n    //access views using binding\n    binding.btnAc.setOnClickListener  {}\n}\n</code></pre>\n<p>For using in a fragment</p>\n<pre><code>private var _binding: FragmentBinding? = null\n// This property is only valid between onCreateView and\n// onDestroyView.\nprivate val binding get() = _binding!!\n\noverride fun onCreateView(\n    inflater: LayoutInflater,\n    container: ViewGroup?,\n    savedInstanceState: Bundle?\n): View? {\n    _binding = FragmentBinding.inflate(inflater, container, false)\n    val view = binding.root\n    return view\n}\n\noverride fun onDestroyView() {\n    super.onDestroyView()\n    _binding = null // setting it null, otherwise it would lead to memory leak\n}\n</code></pre>\n"}],"owner":{"account_id":23051026,"reputation":11,"user_id":17167847,"display_name":"HttpBelleDefi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":104,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1634397088,"creation_date":1634394806,"question_id":69596532,"body_markdown":"It&#39;s any way to initialize buttons in a loop?\r\n\r\nI&#39;ve tried `public class MainActivity extends AppCompatActivity {\r\n\r\n    // CLICK SOUND //\r\n    private MediaPlayer clickSound;\r\n\r\n    // BUTTONS //\r\n\r\n    private Button btnAC;\r\n    private Button btnMasMenos;\r\n\r\n    private List&lt;Button&gt; listaBotones;\r\n    private List&lt;String&gt; listaIDs;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        clickSound = MediaPlayer.create(this,R.raw.click);\r\n\r\n        // INITIALIZE BUTTONS //\r\n\r\n        listaBotones = Arrays.asList(btnAC,btnMasMenos);\r\n        listaIDs = Arrays.asList(&quot;R.id.btnAC&quot;,&quot;R.id.btnMasMenos&quot;);\r\n\r\n        for(Button b: listaBotones){\r\n\r\n            int id = 0;\r\n\r\n            b = findViewById(listaIDs.get(id));\r\n\r\n            id++;\r\n        }\r\n\r\n    }\r\n\r\nThis is the error:\r\n\r\n[reason: String is not compatible with int][1]\r\n\r\nI understand that R.id.button it&#39;s a int, and not a String...\r\nso I was wondering how can I initialize them automatically in a loop.\r\n\r\nThx in advance\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Whpko.png","title":"How to initialize several buttons in java","body":"<p>It's any way to initialize buttons in a loop?</p>\n<p>I've tried `public class MainActivity extends AppCompatActivity {</p>\n<pre><code>// CLICK SOUND //\nprivate MediaPlayer clickSound;\n\n// BUTTONS //\n\nprivate Button btnAC;\nprivate Button btnMasMenos;\n\nprivate List&lt;Button&gt; listaBotones;\nprivate List&lt;String&gt; listaIDs;\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n    clickSound = MediaPlayer.create(this,R.raw.click);\n\n    // INITIALIZE BUTTONS //\n\n    listaBotones = Arrays.asList(btnAC,btnMasMenos);\n    listaIDs = Arrays.asList(&quot;R.id.btnAC&quot;,&quot;R.id.btnMasMenos&quot;);\n\n    for(Button b: listaBotones){\n\n        int id = 0;\n\n        b = findViewById(listaIDs.get(id));\n\n        id++;\n    }\n\n}\n</code></pre>\n<p>This is the error:</p>\n<p><a href=\"https://i.stack.imgur.com/Whpko.png\" rel=\"nofollow noreferrer\">reason: String is not compatible with int</a></p>\n<p>I understand that R.id.button it's a int, and not a String...\nso I was wondering how can I initialize them automatically in a loop.</p>\n<p>Thx in advance</p>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":1546031,"reputation":1931,"user_id":1439560,"display_name":"Huy Nguyen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634396989,"creation_date":1634396989,"answer_id":69596844,"question_id":69596287,"body_markdown":"    some_io_calls_q();\r\n    some_io_calls_b();\r\n\r\nIf both your methods do synchronized tasks, then using order is enough.\r\n\r\nYour command will be executed following the order annotation.\r\nYou can print few logs to check about it.\r\n\r\nOtherwise, it&#39;s not enough with async task. You have to control when/how the task is completed... \r\n\r\nThe most simple solutions as you describe is calling both method in one commandlinerunner in case you are not sure the internal process of spring.\r\n\r\n@DependsOn: only working with process creating bean. It&#39;s not relative the execution of commands. \r\n\r\n\r\n","title":"Spring Boot multiple CommandLineRunner execution order and state","body":"<pre><code>some_io_calls_q();\nsome_io_calls_b();\n</code></pre>\n<p>If both your methods do synchronized tasks, then using order is enough.</p>\n<p>Your command will be executed following the order annotation.\nYou can print few logs to check about it.</p>\n<p>Otherwise, it's not enough with async task. You have to control when/how the task is completed...</p>\n<p>The most simple solutions as you describe is calling both method in one commandlinerunner in case you are not sure the internal process of spring.</p>\n<p>@DependsOn: only working with process creating bean. It's not relative the execution of commands.</p>\n"}],"owner":{"account_id":6937186,"reputation":1164,"user_id":5324721,"display_name":"Kumar Ashutosh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":660,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1634396989,"creation_date":1634392842,"question_id":69596287,"body_markdown":"I have some startup operations to be executed one after another. Both of these runners performs some heavy database operations.\r\n\r\n\r\n```Java\r\n@Slf4j\r\n@Data\r\n@Component\r\n@Order(1)\r\npublic class MyFailureHandlerA implements CommandLineRunner {\r\n\r\n\t@Override\r\n\tpublic void run(String... args) throws Exception {\r\n\t\tsome_io_calls_a();\r\n\t}\r\n\r\n}\r\n```\r\n\r\n```Java\r\n@Slf4j\r\n@Data\r\n@Component\r\n@Order(2)\r\npublic class MyFailureHandlerB implements CommandLineRunner {\r\n\r\n\t@Override\r\n\tpublic void run(String... args) throws Exception {\r\n\t\tsome_io_calls_b();\r\n\t}\r\n\r\n}\r\n```\r\n\r\nI need to make sure that `@Order(2)` runner starts only after `@Order(1)` has finished it&#39;s processing.\r\n\r\nIs there any way to achieve this, like registering the runners onto some strategies so that they can be monitored for their completion.\r\n\r\nI found a way, like, I can go for waiting till the value of a singleton scoped bean variable turns true, which is set only when first runner finishes it&#39;s task. But I&#39;m afraid if this is recommended or not.\r\n\r\nOr, can I rely on [@DependsOn][1] for the task completion? Is is guaranteed that, by using `@DependsOn(&quot;MyFailureHandlerA&quot;)` over `MyFailureHandlerB` will guaranteee that 1st runner has completed it&#39;s entire operations?\r\n\r\nAnother way I was trying is, invoking the services call one after another from one single runner, like this:\r\n\r\n```Java\r\n@Slf4j\r\n@Data\r\n@Component\r\npublic class MyFailureHandler implements CommandLineRunner {\r\n\r\n\t@Override\r\n\tpublic void run(String... args) throws Exception {\r\n\t\tsome_io_calls_q();\r\n\t\tsome_io_calls_b();\r\n\t}\r\n\r\n}\r\n```\r\n\r\nWould this makes some sense and will ensure that ops are executed in order one after another?\r\n\r\n\r\n`spring-boot-2.3.2`\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/annotation/DependsOn.html","title":"Spring Boot multiple CommandLineRunner execution order and state","body":"<p>I have some startup operations to be executed one after another. Both of these runners performs some heavy database operations.</p>\n<pre><code>@Slf4j\n@Data\n@Component\n@Order(1)\npublic class MyFailureHandlerA implements CommandLineRunner {\n\n    @Override\n    public void run(String... args) throws Exception {\n        some_io_calls_a();\n    }\n\n}\n</code></pre>\n<pre><code>@Slf4j\n@Data\n@Component\n@Order(2)\npublic class MyFailureHandlerB implements CommandLineRunner {\n\n    @Override\n    public void run(String... args) throws Exception {\n        some_io_calls_b();\n    }\n\n}\n</code></pre>\n<p>I need to make sure that <code>@Order(2)</code> runner starts only after <code>@Order(1)</code> has finished it's processing.</p>\n<p>Is there any way to achieve this, like registering the runners onto some strategies so that they can be monitored for their completion.</p>\n<p>I found a way, like, I can go for waiting till the value of a singleton scoped bean variable turns true, which is set only when first runner finishes it's task. But I'm afraid if this is recommended or not.</p>\n<p>Or, can I rely on <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/annotation/DependsOn.html\" rel=\"nofollow noreferrer\">@DependsOn</a> for the task completion? Is is guaranteed that, by using <code>@DependsOn(&quot;MyFailureHandlerA&quot;)</code> over <code>MyFailureHandlerB</code> will guaranteee that 1st runner has completed it's entire operations?</p>\n<p>Another way I was trying is, invoking the services call one after another from one single runner, like this:</p>\n<pre><code>@Slf4j\n@Data\n@Component\npublic class MyFailureHandler implements CommandLineRunner {\n\n    @Override\n    public void run(String... args) throws Exception {\n        some_io_calls_q();\n        some_io_calls_b();\n    }\n\n}\n</code></pre>\n<p>Would this makes some sense and will ensure that ops are executed in order one after another?</p>\n<p><code>spring-boot-2.3.2</code></p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1634391651,"post_id":69596106,"comment_id":123014368,"body_markdown":"`if (bmi &lt;=18.5 &gt;=24.9)` is similar to `if ((bmi &lt;=18.5) &gt;=24.9)`. Do you see the problem?","body":"<code>if (bmi &lt;=18.5 &gt;=24.9)</code> is similar to <code>if ((bmi &lt;=18.5) &gt;=24.9)</code>. Do you see the problem?"},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1634392160,"post_id":69596106,"comment_id":123014472,"body_markdown":"Java is not a Python, it doesn&#39;t have syntax like `min &lt; value &lt; max`. In Java you need to use logical operators to sum or intersect ranges like `(min &lt; value) &amp;&amp; (value &lt; max)` - you can skip parenthesis here.","body":"Java is not a Python, it doesn&#39;t have syntax like <code>min &lt; value &lt; max</code>. In Java you need to use logical operators to sum or intersect ranges like <code>(min &lt; value) &amp;&amp; (value &lt; max)</code> - you can skip parenthesis here."},{"owner":{"account_id":23051559,"reputation":1,"user_id":17168300,"display_name":"BravoSix"},"score":0,"creation_date":1634392194,"post_id":69596106,"comment_id":123014484,"body_markdown":"still shows bad operand types for binary operator &#39;&gt;=&#39; I also tried putting &amp;&amp; in the middle and it showed illegal start of expression","body":"still shows bad operand types for binary operator &#39;&gt;=&#39; I also tried putting &amp;&amp; in the middle and it showed illegal start of expression"},{"owner":{"account_id":21825332,"reputation":1219,"user_id":16120911,"display_name":"sittsering"},"score":0,"creation_date":1634392253,"post_id":69596106,"comment_id":123014499,"body_markdown":"should be like this `if (bmi &lt;=18.5 &amp;&amp; bmi &gt;=24.9)`","body":"should be like this <code>if (bmi &lt;=18.5 &amp;&amp; bmi &gt;=24.9)</code>"},{"owner":{"account_id":21825332,"reputation":1219,"user_id":16120911,"display_name":"sittsering"},"score":0,"creation_date":1634392329,"post_id":69596106,"comment_id":123014515,"body_markdown":"also your conditions are wrong, 2nd-if : `if (bmi &gt;=18.5 &amp;&amp; bmi &lt;=24.9)`, 3rd-if `if (bmi &gt;=25.0)`","body":"also your conditions are wrong, 2nd-if : <code>if (bmi &gt;=18.5 &amp;&amp; bmi &lt;=24.9)</code>, 3rd-if <code>if (bmi &gt;=25.0)</code>"},{"owner":{"account_id":23051559,"reputation":1,"user_id":17168300,"display_name":"BravoSix"},"score":0,"creation_date":1634392893,"post_id":69596106,"comment_id":123014623,"body_markdown":"when I add &amp;&amp; it says illegal start of expression","body":"when I add &amp;&amp; it says illegal start of expression"},{"owner":{"account_id":21825332,"reputation":1219,"user_id":16120911,"display_name":"sittsering"},"score":0,"creation_date":1634393727,"post_id":69596106,"comment_id":123014819,"body_markdown":"@BravoSix can you write that whole expression in the comment","body":"@BravoSix can you write that whole expression in the comment"},{"owner":{"account_id":23051559,"reputation":1,"user_id":17168300,"display_name":"BravoSix"},"score":0,"creation_date":1634394014,"post_id":69596106,"comment_id":123014895,"body_markdown":"else if (bmi &lt;=18.5 &amp;&amp; &gt;=24.9) and if (bmi &gt;=18.5 &amp;&amp; bmi &lt;=24.9) both says illegal start of expression","body":"else if (bmi &lt;=18.5 &amp;&amp; &gt;=24.9) and if (bmi &gt;=18.5 &amp;&amp; bmi &lt;=24.9) both says illegal start of expression"}],"answers":[{"tags":[],"owner":{"account_id":21825332,"reputation":1219,"user_id":16120911,"display_name":"sittsering"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634396623,"creation_date":1634394472,"answer_id":69596491,"question_id":69596106,"body_markdown":"is it same as this and still showing error?&lt;br&gt;\r\nAlso, why take `bmi` as `int`, why not `float` as you are comparing it with float values.&lt;br&gt;\r\nreplace `console.nextInt()` to `console.nextFloat()` for accepting float input\r\n````\r\nfloat bmi = console.nextFloat();\r\nif (bmi &lt;= 18.4)\r\n{\r\n    System.out.println(&quot;You&#39;re under weight, you need to gain more weight!&quot;);\r\n}\r\nelse if (bmi &gt;=18.5 &amp;&amp; bmi &lt;=24.9)\r\n{\r\n    System.out.println(&quot;You&#39;re normal, Congrats!&quot;);\r\n}\r\nelse if (bmi &gt;=25.0)\r\n{\r\n    System.out.println(&quot;You&#39;re Overweight, you need to lose some weight.&quot;);\r\n}\r\n````","title":"error: bad operand types for binary operator &#39;&gt;=&#39; &quot;else if (bmi &lt;=18.5 &gt;=25.0)&quot;","body":"<p>is it same as this and still showing error?<br>\nAlso, why take <code>bmi</code> as <code>int</code>, why not <code>float</code> as you are comparing it with float values.<br>\nreplace <code>console.nextInt()</code> to <code>console.nextFloat()</code> for accepting float input</p>\n<pre><code>float bmi = console.nextFloat();\nif (bmi &lt;= 18.4)\n{\n    System.out.println(&quot;You're under weight, you need to gain more weight!&quot;);\n}\nelse if (bmi &gt;=18.5 &amp;&amp; bmi &lt;=24.9)\n{\n    System.out.println(&quot;You're normal, Congrats!&quot;);\n}\nelse if (bmi &gt;=25.0)\n{\n    System.out.println(&quot;You're Overweight, you need to lose some weight.&quot;);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634396348,"creation_date":1634396348,"answer_id":69596762,"question_id":69596106,"body_markdown":"        int bmi;\n    \n    Scanner console = new Scanner(System.in);\n    \n    System.out.print(&quot;Measure your height and weight.&quot;)\n    Systen.out.print(&quot;Then Calculate your BMI.&quot;)\n    System.out,print(&quot;Enter how many score you got : &quot;)\n    bmi = console.nextINt();\n    \n    if (bmi &lt;= 18.4)\n    {\n        System.out.println(&quot;You&#39;re under weight, you need to gain more weight!&quot;);\n    }\n    else if (bmi &lt; 25)\n    {\n        System.out.println(&quot;You&#39;re normal, Congrats!&quot;);\n    }\n    else \n    {\n        System.out.println(&quot;You&#39;re Overweight, you need to lose some weight.&quot;);\n    }","title":"error: bad operand types for binary operator &#39;&gt;=&#39; &quot;else if (bmi &lt;=18.5 &gt;=25.0)&quot;","body":"<pre><code>    int bmi;\n\nScanner console = new Scanner(System.in);\n\nSystem.out.print(&quot;Measure your height and weight.&quot;)\nSysten.out.print(&quot;Then Calculate your BMI.&quot;)\nSystem.out,print(&quot;Enter how many score you got : &quot;)\nbmi = console.nextINt();\n\nif (bmi &lt;= 18.4)\n{\n    System.out.println(&quot;You're under weight, you need to gain more weight!&quot;);\n}\nelse if (bmi &lt; 25)\n{\n    System.out.println(&quot;You're normal, Congrats!&quot;);\n}\nelse \n{\n    System.out.println(&quot;You're Overweight, you need to lose some weight.&quot;);\n}\n</code></pre>\n"}],"owner":{"account_id":23051559,"reputation":1,"user_id":17168300,"display_name":"BravoSix"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":104,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1634396623,"creation_date":1634391561,"question_id":69596106,"body_markdown":"error: bad operand types for binary operator &#39;&gt;=&#39; \t\t&quot;else if (bmi &lt;=18.5 &gt;=25.0)&quot;    \r\nhow to solve this?\r\n   \r\n        int bmi;\r\n\t\t\r\n\t\tScanner console = new Scanner(System.in);\r\n\t\t\r\n\t\tSystem.out.print(&quot;Measure your height and weight.&quot;)\r\n\t\tSysten.out.print(&quot;Then Calculate your BMI.&quot;)\r\n\t\tSystem.out,print(&quot;Enter how many score you got : &quot;)\r\n\t\tbmi = console.nextINt();\r\n\t\t\r\n\t\tif (bmi &lt;= 18.4)\r\n\t\t{\r\n\t\t\tSystem.out.println(&quot;You&#39;re under weight, you need to gain more weight!&quot;);\r\n\t\t}\r\n\t\telse if (bmi &lt;=18.5 &gt;=24.9)\r\n\t\t{\r\n\t\t\tSystem.out.println(&quot;You&#39;re normal, Congrats!&quot;);\r\n\t\t}\r\n\t\telse if (bmi &lt;=25.0)\r\n\t\t{\r\n\t\t\tSystem.out.println(&quot;You&#39;re Overweight, you need to lose some weight.&quot;);\r\n\t\t}\n","title":"error: bad operand types for binary operator &#39;&gt;=&#39; &quot;else if (bmi &lt;=18.5 &gt;=25.0)&quot;","body":"<p>error: bad operand types for binary operator '&gt;='       &quot;else if (bmi &lt;=18.5 &gt;=25.0)&quot;<br />\nhow to solve this?</p>\n<pre><code>    int bmi;\n    \n    Scanner console = new Scanner(System.in);\n    \n    System.out.print(&quot;Measure your height and weight.&quot;)\n    Systen.out.print(&quot;Then Calculate your BMI.&quot;)\n    System.out,print(&quot;Enter how many score you got : &quot;)\n    bmi = console.nextINt();\n    \n    if (bmi &lt;= 18.4)\n    {\n        System.out.println(&quot;You're under weight, you need to gain more weight!&quot;);\n    }\n    else if (bmi &lt;=18.5 &gt;=24.9)\n    {\n        System.out.println(&quot;You're normal, Congrats!&quot;);\n    }\n    else if (bmi &lt;=25.0)\n    {\n        System.out.println(&quot;You're Overweight, you need to lose some weight.&quot;);\n    }\n</code></pre>\n"},{"tags":["java","xml","xslt-1.0"],"answers":[{"tags":[],"owner":{"account_id":3616427,"reputation":114440,"user_id":3016153,"display_name":"michael.hor257k"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1634396489,"creation_date":1634374404,"answer_id":69594104,"question_id":69593529,"body_markdown":"The [XPath 1.0 specification][1] states:\r\n\r\n&gt; Within expressions, literal strings are delimited by single or double quotation marks, which are also used to delimit XML attributes. To avoid a quotation mark in an expression being interpreted by the XML processor as terminating the attribute value the quotation mark can be entered as a character reference (`&amp;quot;` or `&amp;apos;`). Alternatively, the expression can use single quotation marks if the XML attribute is delimited with double quotation marks or vice-versa.\r\n\r\nThis means that within a single expression using only literal string, you can either remove double quote characters by:\r\n\r\n    &lt;xsl:value-of select=&quot;translate(input, &#39;&amp;quot;&#39;&#39;)&quot;/&gt;\r\n\r\nor single quote (apostrophe) characters by:\r\n\r\n    &lt;xsl:value-of select=&#39;translate(input, &quot;&amp;apos;&quot;, &quot;&quot;)&#39;/&gt;\r\n\r\nbut not both.\r\n\r\nDefining a variable containing all the unwanted characters as literal text (as you did) is probably the best way around this limitation.\r\n\r\n\r\n  [1]: https://www.w3.org/TR/1999/REC-xpath-19991116/#section-Introduction","title":"Removing both single and double quotes using XSLT translate function or better approach","body":"<p>The <a href=\"https://www.w3.org/TR/1999/REC-xpath-19991116/#section-Introduction\" rel=\"nofollow noreferrer\">XPath 1.0 specification</a> states:</p>\n<blockquote>\n<p>Within expressions, literal strings are delimited by single or double quotation marks, which are also used to delimit XML attributes. To avoid a quotation mark in an expression being interpreted by the XML processor as terminating the attribute value the quotation mark can be entered as a character reference (<code>&amp;quot;</code> or <code>&amp;apos;</code>). Alternatively, the expression can use single quotation marks if the XML attribute is delimited with double quotation marks or vice-versa.</p>\n</blockquote>\n<p>This means that within a single expression using only literal string, you can either remove double quote characters by:</p>\n<pre><code>&lt;xsl:value-of select=&quot;translate(input, '&amp;quot;'')&quot;/&gt;\n</code></pre>\n<p>or single quote (apostrophe) characters by:</p>\n<pre><code>&lt;xsl:value-of select='translate(input, &quot;&amp;apos;&quot;, &quot;&quot;)'/&gt;\n</code></pre>\n<p>but not both.</p>\n<p>Defining a variable containing all the unwanted characters as literal text (as you did) is probably the best way around this limitation.</p>\n"}],"owner":{"account_id":2254847,"reputation":249,"user_id":1986244,"accept_rate":15,"display_name":"user1986244"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":337,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69594104,"answer_count":1,"score":1,"last_activity_date":1634396489,"creation_date":1634368655,"question_id":69593529,"body_markdown":"I am working with XSLT 1.0 and XML. I am new to the topics but I have been reading and trying out how XSLT is applied to XML.\r\nNow, I have given a project where I need to filter out invalid fields from XML element. The java Transformer class is used to apply the XSLT on the XML.\r\nThe java code is similar to the oracle tutorial page under section [&quot;Writing an XSLT Transform&quot;][1]. I have added the below xml and xsl and run the code like described in the tutorial page.My target is to extract single and bouble quotes and the following characters ```#60;&#226;&#162;^#x6;```\r\n\r\nThe XML file\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;Author&gt;\r\n    &lt;Name&gt;\r\n        &lt;FirstName&gt;Ch#60;&#226;&#162;^#x6;&#39;&quot;&quot;ris&lt;/FirstName&gt;\r\n        &lt;LastName&gt;Banville&lt;/LastName&gt;\r\n    &lt;/Name&gt;\r\n&lt;/Author&gt;\r\n``` \r\nThe XSL file \r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;xsl:stylesheet version=&quot;1.0&quot;\r\n    xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&gt;\r\n    &lt;xsl:template match=&quot;/&quot;&gt;\r\n        &lt;html&gt;\r\n            &lt;body&gt;\r\n                 &lt;xsl:variable name=&quot;invalid&quot;&gt;#60;&#226;&#162;^#x6;&quot;&#39;&lt;/xsl:variable&gt;\r\n                 &lt;div&gt;\r\n                 &lt;xsl:value-of select=&quot;translate(/Author/Name/FirstName,$invalid,&#39;&#39;)&quot; /&gt;\r\n                 &lt;/div&gt;\r\n            &lt;/body&gt;\r\n        &lt;/html&gt;\r\n    &lt;/xsl:template&gt;\r\n&lt;/xsl:stylesheet&gt;\r\n```\r\nThe end output is \r\n```\r\n  &lt;body&gt;\r\n     &lt;div&gt;Chris&lt;/div&gt;\r\n   &lt;/body&gt;\r\n\r\n```\r\nMy question is what is the right approach while using XSLT 1.0 to escape both single and double quotes and other invalid characters together? I have also tried nesting\r\n&gt;translate \r\n\r\nXSLT function as shown below after creating a &quot;single&quot; and &quot;double&quot; variable. \r\n\r\n```\r\n&lt;xsl:value-of select=&quot;translate(translate(/Author/Name/FirstName,$single,&#39;&#39;),$double,&#39;&#39;)&quot; /&gt;\r\n```\r\nI am still not sure pros and cons using any of my current implemenation or even if it the right approach to perform such tasks. \r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/jaxp/xslt/transformingXML.html","title":"Removing both single and double quotes using XSLT translate function or better approach","body":"<p>I am working with XSLT 1.0 and XML. I am new to the topics but I have been reading and trying out how XSLT is applied to XML.\nNow, I have given a project where I need to filter out invalid fields from XML element. The java Transformer class is used to apply the XSLT on the XML.\nThe java code is similar to the oracle tutorial page under section <a href=\"https://docs.oracle.com/javase/tutorial/jaxp/xslt/transformingXML.html\" rel=\"nofollow noreferrer\">&quot;Writing an XSLT Transform&quot;</a>. I have added the below xml and xsl and run the code like described in the tutorial page.My target is to extract single and bouble quotes and the following characters <code>#60;^#x6;</code></p>\n<p>The XML file</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;Author&gt;\n    &lt;Name&gt;\n        &lt;FirstName&gt;Ch#60;^#x6;'&quot;&quot;ris&lt;/FirstName&gt;\n        &lt;LastName&gt;Banville&lt;/LastName&gt;\n    &lt;/Name&gt;\n&lt;/Author&gt;\n</code></pre>\n<p>The XSL file</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;xsl:stylesheet version=&quot;1.0&quot;\n    xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&gt;\n    &lt;xsl:template match=&quot;/&quot;&gt;\n        &lt;html&gt;\n            &lt;body&gt;\n                 &lt;xsl:variable name=&quot;invalid&quot;&gt;#60;^#x6;&quot;'&lt;/xsl:variable&gt;\n                 &lt;div&gt;\n                 &lt;xsl:value-of select=&quot;translate(/Author/Name/FirstName,$invalid,'')&quot; /&gt;\n                 &lt;/div&gt;\n            &lt;/body&gt;\n        &lt;/html&gt;\n    &lt;/xsl:template&gt;\n&lt;/xsl:stylesheet&gt;\n</code></pre>\n<p>The end output is</p>\n<pre><code>  &lt;body&gt;\n     &lt;div&gt;Chris&lt;/div&gt;\n   &lt;/body&gt;\n\n</code></pre>\n<p>My question is what is the right approach while using XSLT 1.0 to escape both single and double quotes and other invalid characters together? I have also tried nesting</p>\n<blockquote>\n<p>translate</p>\n</blockquote>\n<p>XSLT function as shown below after creating a &quot;single&quot; and &quot;double&quot; variable.</p>\n<pre><code>&lt;xsl:value-of select=&quot;translate(translate(/Author/Name/FirstName,$single,''),$double,'')&quot; /&gt;\n</code></pre>\n<p>I am still not sure pros and cons using any of my current implemenation or even if it the right approach to perform such tasks.</p>\n"},{"tags":["java","jvm","jvm-hotspot","hotspot"],"comments":[{"owner":{"account_id":4210603,"reputation":94356,"user_id":3448419,"display_name":"apangin"},"score":0,"creation_date":1634398266,"post_id":69596717,"comment_id":123016039,"body_markdown":"It finds the symbol offset from ELF file and adds it to the actual load address of `libjvm.so`","body":"It finds the symbol offset from ELF file and adds it to the actual load address of <code>libjvm.so</code>"},{"owner":{"account_id":12552238,"reputation":3207,"user_id":9133378,"accept_rate":94,"display_name":"choxsword"},"score":0,"creation_date":1634399261,"post_id":69596717,"comment_id":123016284,"body_markdown":"@apangin but for those global variables with external linkage, their address are not resolved until *.so file is loaded. And those variables are redirected by GOT, not simply adding load address.","body":"@apangin but for those global variables with external linkage, their address are not resolved until *.so file is loaded. And those variables are redirected by GOT, not simply adding load address."},{"owner":{"account_id":4210603,"reputation":94356,"user_id":3448419,"display_name":"apangin"},"score":0,"creation_date":1634407944,"post_id":69596717,"comment_id":123018451,"body_markdown":"What do you think is a &quot;resolved address&quot;? It&#39;s the offset of a symbol plus the actual address of `rw` segment of the mapped library, which you can find from `/proc/[pid]/maps`.","body":"What do you think is a &quot;resolved address&quot;? It&#39;s the offset of a symbol plus the actual address of <code>rw</code> segment of the mapped library, which you can find from <code>&#47;proc&#47;[pid]&#47;maps</code>."},{"owner":{"account_id":12552238,"reputation":3207,"user_id":9133378,"accept_rate":94,"display_name":"choxsword"},"score":0,"creation_date":1634433167,"post_id":69596717,"comment_id":123022771,"body_markdown":"@apangin the key point is that global variables loaded from  a dynamic library are actaully not stored in that library&#39;s mapped segment. see [this explanation](https://reverseengineering.stackexchange.com/a/20214) for GOT","body":"@apangin the key point is that global variables loaded from  a dynamic library are actaully not stored in that library&#39;s mapped segment. see <a href=\"https://reverseengineering.stackexchange.com/a/20214\">this explanation</a> for GOT"},{"owner":{"account_id":12552238,"reputation":3207,"user_id":9133378,"accept_rate":94,"display_name":"choxsword"},"score":0,"creation_date":1634433566,"post_id":69596717,"comment_id":123022808,"body_markdown":"@apangin library&#39;s global variabes&#39;s true address are stored in the GOT, which is irrelevant with the `rw` segment of that mapped library","body":"@apangin library&#39;s global variabes&#39;s true address are stored in the GOT, which is irrelevant with the <code>rw</code> segment of that mapped library"},{"owner":{"account_id":4210603,"reputation":94356,"user_id":3448419,"display_name":"apangin"},"score":0,"creation_date":1634441329,"post_id":69596717,"comment_id":123023560,"body_markdown":"Some functionality of my [async-profiler](https://github.com/jvm-profiling-tools/async-profiler/tree/got) project involves parsing ELF, reading JVM globals, and patching GOT entries. So, believe it or not, I do know how GOT works. What I don&#39;t understand though, is the point of asking a question on Stack Overflow, when you already have your own notion of the subject, automatically rejecting any hint that doesn&#39;t fit this notion.","body":"Some functionality of my <a href=\"https://github.com/jvm-profiling-tools/async-profiler/tree/got\" rel=\"nofollow noreferrer\">async-profiler</a> project involves parsing ELF, reading JVM globals, and patching GOT entries. So, believe it or not, I do know how GOT works. What I don&#39;t understand though, is the point of asking a question on Stack Overflow, when you already have your own notion of the subject, automatically rejecting any hint that doesn&#39;t fit this notion."},{"owner":{"account_id":4210603,"reputation":94356,"user_id":3448419,"display_name":"apangin"},"score":0,"creation_date":1634443385,"post_id":69596717,"comment_id":123023736,"body_markdown":"Anyways, GOT is needed to access *imported* symbols. When you know that a particular symbol is *exported* by libjvm.so, you lookup it directly in libjvm.so. Serviceability Agent runs in a completely different process, so this linking/importing procedure doesn&#39;t apply at all. SA just looks where the symbol is defined and reads it from there.","body":"Anyways, GOT is needed to access <i>imported</i> symbols. When you know that a particular symbol is <i>exported</i> by libjvm.so, you lookup it directly in libjvm.so. Serviceability Agent runs in a completely different process, so this linking/importing procedure doesn&#39;t apply at all. SA just looks where the symbol is defined and reads it from there."},{"owner":{"account_id":12552238,"reputation":3207,"user_id":9133378,"accept_rate":94,"display_name":"choxsword"},"score":0,"creation_date":1634443941,"post_id":69596717,"comment_id":123023792,"body_markdown":"@apangin to calarify it , I&#39;m not rejecting any hints that obeys my notion, but expecting to figure out where I maybe misunderstood, that cause the  inconsistency between my notion and reality.","body":"@apangin to calarify it , I&#39;m not rejecting any hints that obeys my notion, but expecting to figure out where I maybe misunderstood, that cause the  inconsistency between my notion and reality."},{"owner":{"account_id":12552238,"reputation":3207,"user_id":9133378,"accept_rate":94,"display_name":"choxsword"},"score":0,"creation_date":1634444122,"post_id":69596717,"comment_id":123023809,"body_markdown":"@apangin  yes, the SA runs on the client JVM, not target JVM. However, client JVM needs to access target JVM&#39;s address space.  So do you mean that target JVM does not need to load libjvm.so? Only the SA client does? I used to think the libjvm.so is part of target JVM. And client JVM use libjvm.so to resolve target JVM&#39;s actual layout of libjvm.so","body":"@apangin  yes, the SA runs on the client JVM, not target JVM. However, client JVM needs to access target JVM&#39;s address space.  So do you mean that target JVM does not need to load libjvm.so? Only the SA client does? I used to think the libjvm.so is part of target JVM. And client JVM use libjvm.so to resolve target JVM&#39;s actual layout of libjvm.so"},{"owner":{"account_id":12552238,"reputation":3207,"user_id":9133378,"accept_rate":94,"display_name":"choxsword"},"score":0,"creation_date":1634445121,"post_id":69596717,"comment_id":123023895,"body_markdown":"@apangin To summarize, my key point is that the runtime address of symbols expoted by libjvm.so cannot be known until libjvm.so is loaded by target JVM. Because AFAIK, those global symbols in elf use GOT to store their real address, and the address stored in GOT is not just adding segment base with offset. However the source code of JVM does seem to regard it as base with offset, which confused me a lot.","body":"@apangin To summarize, my key point is that the runtime address of symbols expoted by libjvm.so cannot be known until libjvm.so is loaded by target JVM. Because AFAIK, those global symbols in elf use GOT to store their real address, and the address stored in GOT is not just adding segment base with offset. However the source code of JVM does seem to regard it as base with offset, which confused me a lot."},{"owner":{"account_id":4210603,"reputation":94356,"user_id":3448419,"display_name":"apangin"},"score":0,"creation_date":1634445925,"post_id":69596717,"comment_id":123023958,"body_markdown":"*&quot;runtime address of symbols expoted by libjvm.so cannot be known until libjvm.so is loaded by target JVM&quot;* - Yes, obviously, but this has nothing to do with GOT. Answering to your original question, SA does not deal with GOT at all. As I&#39;ve told above, it finds the actual base address of the target libjvm.so by parsing `/proc/[pid]/maps`, and symbol offsets - by parsing ELF structure of libjvm.so.","body":"<i>&quot;runtime address of symbols expoted by libjvm.so cannot be known until libjvm.so is loaded by target JVM&quot;</i> - Yes, obviously, but this has nothing to do with GOT. Answering to your original question, SA does not deal with GOT at all. As I&#39;ve told above, it finds the actual base address of the target libjvm.so by parsing <code>&#47;proc&#47;[pid]&#47;maps</code>, and symbol offsets - by parsing ELF structure of libjvm.so."},{"owner":{"account_id":12552238,"reputation":3207,"user_id":9133378,"accept_rate":94,"display_name":"choxsword"},"score":0,"creation_date":1634457730,"post_id":69596717,"comment_id":123025571,"body_markdown":"@apangin thanks. Maybe I misunderstood something. Once I&#39;ve read a book saying when an excecutable reference global variables in *.so. that exectable will allocate directly in .bss segment, and later when so file is load, the variable will be redirected to .bss segment to avoid confict.","body":"@apangin thanks. Maybe I misunderstood something. Once I&#39;ve read a book saying when an excecutable reference global variables in *.so. that exectable will allocate directly in .bss segment, and later when so file is load, the variable will be redirected to .bss segment to avoid confict."},{"owner":{"account_id":12552238,"reputation":3207,"user_id":9133378,"accept_rate":94,"display_name":"choxsword"},"score":0,"creation_date":1634534008,"post_id":69596717,"comment_id":123040677,"body_markdown":"@apangin I&#39;ve been using your async_profiler, which is an excellent tool. I&#39;m curious that does async profiler use `ptrace` to get all stack infos showed in flame graph? And does that have impact on target jvm? Because `ptrace_attach` will stop target process.","body":"@apangin I&#39;ve been using your async_profiler, which is an excellent tool. I&#39;m curious that does async profiler use <code>ptrace</code> to get all stack infos showed in flame graph? And does that have impact on target jvm? Because <code>ptrace_attach</code> will stop target process."},{"owner":{"account_id":4210603,"reputation":94356,"user_id":3448419,"display_name":"apangin"},"score":1,"creation_date":1634583715,"post_id":69596717,"comment_id":123059325,"body_markdown":"I&#39;m afraid, this has gone too far from the original topic. Regarding async-profiler, please create a separate question here on Stack Overflow or start a discussion on github. Async-profiler does not use ptrace.","body":"I&#39;m afraid, this has gone too far from the original topic. Regarding async-profiler, please create a separate question here on Stack Overflow or start a discussion on github. Async-profiler does not use ptrace."}],"owner":{"account_id":12552238,"reputation":3207,"user_id":9133378,"accept_rate":94,"display_name":"choxsword"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1634396015,"creation_date":1634396015,"question_id":69596717,"body_markdown":"AFAIK, the Serviceability Agent can access target JVM&#39;s global variables by parsing its elf file to get variables&#39; virtual address. \r\n\r\nHowever, global variables loaded from `.so` file will be redirect by **GOT** when `.so` is compiled with `-fPIC` in shared mode. How does Serviceability Agent handles that situation? Does it need to lookup **GOT**?","title":"how does hotspot Serviceability Agent deal with GOT in elf files?","body":"<p>AFAIK, the Serviceability Agent can access target JVM's global variables by parsing its elf file to get variables' virtual address.</p>\n<p>However, global variables loaded from <code>.so</code> file will be redirect by <strong>GOT</strong> when <code>.so</code> is compiled with <code>-fPIC</code> in shared mode. How does Serviceability Agent handles that situation? Does it need to lookup <strong>GOT</strong>?</p>\n"},{"tags":["java","constructor","overriding"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1630603879,"post_id":69034788,"comment_id":122009097,"body_markdown":"No, there is no solution. There is only a rule: do not leak premature objects. A consequence of this rule is that we should only call private or final methods from a constructor. Also, notice that the explicit call to `super()` is superfluous and inserted implicitly if we do not add it explicitly. Furthermore we can even &quot;break&quot; the code on a more fundamental level by declaring `private int i` as `final`.","body":"No, there is no solution. There is only a rule: do not leak premature objects. A consequence of this rule is that we should only call private or final methods from a constructor. Also, notice that the explicit call to <code>super()</code> is superfluous and inserted implicitly if we do not add it explicitly. Furthermore we can even &quot;break&quot; the code on a more fundamental level by declaring <code>private int i</code> as <code>final</code>."},{"owner":{"account_id":19737831,"reputation":11,"user_id":14451893,"display_name":"Hizzie"},"score":0,"creation_date":1630604366,"post_id":69034788,"comment_id":122009257,"body_markdown":"Thanks for the reply. In my real code I have an abstract class that many classes extend from. I really hate the idea that in every child class I need to invoke the same overridden methods in the child&#39;s constructor. I was hoping for possible different approach but that achieves the same goal.","body":"Thanks for the reply. In my real code I have an abstract class that many classes extend from. I really hate the idea that in every child class I need to invoke the same overridden methods in the child&#39;s constructor. I was hoping for possible different approach but that achieves the same goal."}],"answers":[{"tags":[],"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634395850,"creation_date":1630604609,"answer_id":69034969,"question_id":69034788,"body_markdown":"### Prelude\r\n\r\nBefore we begin the discussion, I would like to point out that the explicit call to `super()` in `Child`&#39;s constructor is superfluous and added implicitly if we remove it (see [JLS, &#167;8.8.7][JLS]). So we can simplify `Child` to:\r\n\r\n    class Child extends Parent {\r\n        private int i;\r\n\r\n        public Child(int i) {\r\n            this.i = i;\r\n        }\r\n\r\n        @Override\r\n        public void print() {\r\n            System.out.println(&quot;This code doesn&#39;t work, i = &quot; + i); // i is not initalized\r\n        }\r\n    }\r\n\r\nThis is to show that this problem may even hit programmers who do not know of the implicit `super()` call and/or do not use `super()`.\r\n\r\n---\r\n### The actual question\r\n\r\nWe cannot prevent such behaviour. There is only a rule we can follow: [Do not leak premature objects][prematureObjects]. A consequence of this rule is that we should only call private or final methods from constructors. In the code presented, we violate this rule. This allows us to &quot;break&quot; the code even more by declaring field `private int i` in class `Child` as `final`:\r\n    \r\n    class Child extends Parent {\r\n      private final int i;\r\n\r\n      public Child(int i) {\r\n        this.i = i;\r\n      }\r\n    \r\n      @Override\r\n      public void print() {\r\n        System.out.println(&quot;This code doesn&#39;t work, i = &quot; + i); // i is not initalized\r\n      }\r\n    }\r\n\r\n[&lt;kbd&gt;Ideone demo&lt;/kbd&gt;][Ideone]\r\n\r\nWe would expect that `i` has one and only one value, but we clearly see that `i` changes its value.\r\n\r\n---\r\n### Remark\r\nIn the original code, the field `i` is (always) initialized. This stems from the fact that non-final fields, other than local variables, are always initialized with a default value (primitives with `0` or `false`, reference types with `null`).\r\n\r\n[JLS]: https://docs.oracle.com/javase/specs/jls/se16/html/jls-8.html#jls-8.8.7\r\n\r\n[prematureObjects]: https://stackoverflow.com/questions/18107128/what-is-happens-before-relations-in-synchronization-what-is-premature-object-le\r\n\r\n[Ideone]: https://ideone.com/XFwjnO","title":"Calling overridden child methods in a parent constructor, is there a practical solution to my problem?","body":"<h3>Prelude</h3>\n<p>Before we begin the discussion, I would like to point out that the explicit call to <code>super()</code> in <code>Child</code>'s constructor is superfluous and added implicitly if we remove it (see <a href=\"https://docs.oracle.com/javase/specs/jls/se16/html/jls-8.html#jls-8.8.7\" rel=\"nofollow noreferrer\">JLS, 8.8.7</a>). So we can simplify <code>Child</code> to:</p>\n<pre><code>class Child extends Parent {\n    private int i;\n\n    public Child(int i) {\n        this.i = i;\n    }\n\n    @Override\n    public void print() {\n        System.out.println(&quot;This code doesn't work, i = &quot; + i); // i is not initalized\n    }\n}\n</code></pre>\n<p>This is to show that this problem may even hit programmers who do not know of the implicit <code>super()</code> call and/or do not use <code>super()</code>.</p>\n<hr />\n<h3>The actual question</h3>\n<p>We cannot prevent such behaviour. There is only a rule we can follow: <a href=\"https://stackoverflow.com/questions/18107128/what-is-happens-before-relations-in-synchronization-what-is-premature-object-le\">Do not leak premature objects</a>. A consequence of this rule is that we should only call private or final methods from constructors. In the code presented, we violate this rule. This allows us to &quot;break&quot; the code even more by declaring field <code>private int i</code> in class <code>Child</code> as <code>final</code>:</p>\n<pre><code>class Child extends Parent {\n  private final int i;\n\n  public Child(int i) {\n    this.i = i;\n  }\n\n  @Override\n  public void print() {\n    System.out.println(&quot;This code doesn't work, i = &quot; + i); // i is not initalized\n  }\n}\n</code></pre>\n<p><a href=\"https://ideone.com/XFwjnO\" rel=\"nofollow noreferrer\"><kbd>Ideone demo</kbd></a></p>\n<p>We would expect that <code>i</code> has one and only one value, but we clearly see that <code>i</code> changes its value.</p>\n<hr />\n<h3>Remark</h3>\n<p>In the original code, the field <code>i</code> is (always) initialized. This stems from the fact that non-final fields, other than local variables, are always initialized with a default value (primitives with <code>0</code> or <code>false</code>, reference types with <code>null</code>).</p>\n"}],"owner":{"account_id":19737831,"reputation":11,"user_id":14451893,"display_name":"Hizzie"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":384,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1634395850,"creation_date":1630603716,"question_id":69034788,"body_markdown":"The code below demonstrates why you should never call an overridden method in a constructor.\r\n```\r\npublic abstract class Parent {\r\n    public Parent() {\r\n        print();\r\n    }\r\n    public abstract void print();\r\n}\r\npublic class Child extends Parent {\r\n    private int i;\r\n    public Child(int i) {\r\n        super();\r\n        this.i = i;\r\n    }\r\n    @Override\r\n    public void print() {\r\n        System.out.println(&quot;This code doesn&#39;t work, i = &quot; + i); // i is not initalized\r\n    }\r\n}\r\n```\r\nI&#39;m looking for a clean solution that will allow the overridden method to run after the child class is initialized, but without having to physically call that method in the child&#39;s own constructor. In essence, I want my abstract parent class not only to define an abstract method that the child must have, but also define that it needs to be ran during initialization. Any ideas?\r\n    \r\n\r\n","title":"Calling overridden child methods in a parent constructor, is there a practical solution to my problem?","body":"<p>The code below demonstrates why you should never call an overridden method in a constructor.</p>\n<pre><code>public abstract class Parent {\n    public Parent() {\n        print();\n    }\n    public abstract void print();\n}\npublic class Child extends Parent {\n    private int i;\n    public Child(int i) {\n        super();\n        this.i = i;\n    }\n    @Override\n    public void print() {\n        System.out.println(&quot;This code doesn't work, i = &quot; + i); // i is not initalized\n    }\n}\n</code></pre>\n<p>I'm looking for a clean solution that will allow the overridden method to run after the child class is initialized, but without having to physically call that method in the child's own constructor. In essence, I want my abstract parent class not only to define an abstract method that the child must have, but also define that it needs to be ran during initialization. Any ideas?</p>\n"},{"tags":["java","spring-boot","tomcat","war"],"comments":[{"owner":{"account_id":4440396,"reputation":315,"user_id":4575509,"accept_rate":43,"display_name":"Hari Ram"},"score":0,"creation_date":1634301309,"post_id":68750504,"comment_id":122993983,"body_markdown":"did you find a solution for this?","body":"did you find a solution for this?"},{"owner":{"account_id":13814308,"reputation":51,"user_id":9971254,"display_name":"Sanindu"},"score":0,"creation_date":1634395572,"post_id":68750504,"comment_id":123015326,"body_markdown":"@HariRam I posted the answer which solved my isse. Hope it helps you as well.","body":"@HariRam I posted the answer which solved my isse. Hope it helps you as well."}],"answers":[{"tags":[],"owner":{"account_id":13814308,"reputation":51,"user_id":9971254,"display_name":"Sanindu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634395521,"creation_date":1634395521,"answer_id":69596639,"question_id":68750504,"body_markdown":"The problem was at the sprinbootApplication.java file. The issue was caused because I have used the SpringBootApplication keyword in the following bold texted places was not my spring boot application name. That was the imported SpringBootApplication from the following class.\r\n\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\nSpringApplication.run(**SpringBootApplication**.class, args);\r\nreturn builder.sources(**SpringBootApplication**.class);\r\n\r\nSo you need to change the bolded places with your spring boot application name. Not with the above imported class.\r\n\r\n    @SpringBootApplication\r\n    public class SpringBootSecurityJwtApplication extends \r\n    SpringBootServletInitializer {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(SpringBootApplication.class, args);\r\n\t}\r\n\r\n    @Override\r\n    protected SpringApplicationBuilder configure(SpringApplicationBuilder builder) {\r\n        return builder.sources(SpringBootApplication.class);\r\n    }\r\n    }","title":"java.lang.ClassNotFoundException: org.apache.jsp.index_jsp Error while deploying the spring boot Application","body":"<p>The problem was at the sprinbootApplication.java file. The issue was caused because I have used the SpringBootApplication keyword in the following bold texted places was not my spring boot application name. That was the imported SpringBootApplication from the following class.</p>\n<p>import org.springframework.boot.autoconfigure.SpringBootApplication;</p>\n<p>SpringApplication.run(<strong>SpringBootApplication</strong>.class, args);\nreturn builder.sources(<strong>SpringBootApplication</strong>.class);</p>\n<p>So you need to change the bolded places with your spring boot application name. Not with the above imported class.</p>\n<pre><code>@SpringBootApplication\npublic class SpringBootSecurityJwtApplication extends \nSpringBootServletInitializer {\n\npublic static void main(String[] args) {\n    SpringApplication.run(SpringBootApplication.class, args);\n}\n\n@Override\nprotected SpringApplicationBuilder configure(SpringApplicationBuilder builder) {\n    return builder.sources(SpringBootApplication.class);\n}\n}\n</code></pre>\n"}],"owner":{"account_id":13814308,"reputation":51,"user_id":9971254,"display_name":"Sanindu"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":800,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1634395521,"creation_date":1628730651,"question_id":68750504,"body_markdown":"I&#39;m trying to deploy my spring boot application in digital ocean ubuntu VM and I created a .war file and uploaded using Tomcat Web Application Manager. But I am getting an error as, \r\n\r\n&gt; FAIL - Application at context path [/springjwt] could not be started \r\n\r\n&gt;  FAIL - Encountered exception [org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/springjwt]]]\r\n\r\nThen I checked the localhost log file in /opt/tomcat/logs and error is shown as,\r\n\r\n&gt; SEVERE [http-nio-8080-exec-26] org.apache.catalina.core.StandardWrapperValve.invoke Servlet.service() for servlet [jsp] in context with path [] threw exception [ja$\r\n&gt;         java.lang.ClassNotFoundException: org.apache.jsp.index_jsp\r\n&gt;                 at java.net.URLClassLoader.findClass(URLClassLoader.java:382)\r\n&gt;                 at org.apache.jasper.servlet.JasperLoader.loadClass(JasperLoader.java:129)\r\n&gt;                 at org.apache.jasper.servlet.JasperLoader.loadClass(JasperLoader.java:58)\r\n&gt;                 at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:159)\r\n&gt;                 at org.apache.jasper.servlet.JspServletWrapper.getServlet(JspServletWrapper.java:191)\r\n&gt;                 at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:412)\r\n&gt;                 at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:383)\r\n\r\n\r\nPlease help me to fix this.","title":"java.lang.ClassNotFoundException: org.apache.jsp.index_jsp Error while deploying the spring boot Application","body":"<p>I'm trying to deploy my spring boot application in digital ocean ubuntu VM and I created a .war file and uploaded using Tomcat Web Application Manager. But I am getting an error as,</p>\n<blockquote>\n<p>FAIL - Application at context path [/springjwt] could not be started</p>\n</blockquote>\n<blockquote>\n<p>FAIL - Encountered exception [org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/springjwt]]]</p>\n</blockquote>\n<p>Then I checked the localhost log file in /opt/tomcat/logs and error is shown as,</p>\n<blockquote>\n<p>SEVERE [http-nio-8080-exec-26] org.apache.catalina.core.StandardWrapperValve.invoke Servlet.service() for servlet [jsp] in context with path [] threw exception [ja$\njava.lang.ClassNotFoundException: org.apache.jsp.index_jsp\nat java.net.URLClassLoader.findClass(URLClassLoader.java:382)\nat org.apache.jasper.servlet.JasperLoader.loadClass(JasperLoader.java:129)\nat org.apache.jasper.servlet.JasperLoader.loadClass(JasperLoader.java:58)\nat org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:159)\nat org.apache.jasper.servlet.JspServletWrapper.getServlet(JspServletWrapper.java:191)\nat org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:412)\nat org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:383)</p>\n</blockquote>\n<p>Please help me to fix this.</p>\n"},{"tags":["java","json","decimal","tostring","json-arrayagg"],"answers":[{"tags":[],"owner":{"account_id":12210699,"reputation":694,"user_id":8912565,"display_name":"Ravik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634354254,"creation_date":1634354254,"answer_id":69592374,"question_id":69592321,"body_markdown":"Trailing zeros can be printed if you treat decimal as String, for that you can use `DecimalFormat`  or `String.format()`. As we know adding trailing zero to a number after decimal doesnt impact the value of the number. If you are going to use the converted value in computation later in the program then better to not to worry about trailing zeros. On the other hand if youre going to use this value to be displayed on screen somewhere then let the client handle it. ","title":"JSON decoding removing decimal trailing zeros","body":"<p>Trailing zeros can be printed if you treat decimal as String, for that you can use <code>DecimalFormat</code>  or <code>String.format()</code>. As we know adding trailing zero to a number after decimal doesnt impact the value of the number. If you are going to use the converted value in computation later in the program then better to not to worry about trailing zeros. On the other hand if youre going to use this value to be displayed on screen somewhere then let the client handle it.</p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1634395051,"creation_date":1634369580,"answer_id":69593617,"question_id":69592321,"body_markdown":"Java floating point types don&#39;t have a way to preserve a trailing zeros.\r\n\r\nFor example, when you run this code snippet:\r\n\r\n    double d1 = 4.5;\r\n    double d2 = 4.50;\r\n    System.out.println(d1 == d2);\r\n\r\nit will print `true` ... because `4.5` and `4.50` are the same number.  Both in Java, and in mathematics.\r\n\r\nAnd they also mean the same thing in JSON.\r\n\r\nIf you really want to preserve the trailing zeros, then:\r\n\r\n  - In JSON you must represent the number as a string; i.e. put quotes around it.\r\n  - In Java you must store it in a `String` variable.  Which is going to make computation problematic.\r\n\r\n----------------------\r\n\r\nQ: Would it be possible to faithfully preserve the trailing zeros AND do arithmetic?  \r\n\r\nA: I don&#39;t know of an existing Java type / class that does this.  \r\n\r\nOne of the problems is what happens with division.  For example, the exact representation of `1.0 / 3.0` would entail an infinite number of significant digits.  Which is problematic.\r\n\r\nI guess, if you had a mathematical model of floating point numbers that could represent a *Real* number and an uncertainty, AND that model was implementable (e.g. didn&#39;t involve problems such as indefinitely large representations, factorization, etc), then such a Java class would be possible.\r\n\r\nBut in the meantime, a better approach would be to review your requirement.  Why do you need to preserve the trailing zeros?  It doesn&#39;t make sense from a straight-forward mathematical perspective.  Is there some other reason for doing it?","title":"JSON decoding removing decimal trailing zeros","body":"<p>Java floating point types don't have a way to preserve a trailing zeros.</p>\n<p>For example, when you run this code snippet:</p>\n<pre><code>double d1 = 4.5;\ndouble d2 = 4.50;\nSystem.out.println(d1 == d2);\n</code></pre>\n<p>it will print <code>true</code> ... because <code>4.5</code> and <code>4.50</code> are the same number.  Both in Java, and in mathematics.</p>\n<p>And they also mean the same thing in JSON.</p>\n<p>If you really want to preserve the trailing zeros, then:</p>\n<ul>\n<li>In JSON you must represent the number as a string; i.e. put quotes around it.</li>\n<li>In Java you must store it in a <code>String</code> variable.  Which is going to make computation problematic.</li>\n</ul>\n<hr />\n<p>Q: Would it be possible to faithfully preserve the trailing zeros AND do arithmetic?</p>\n<p>A: I don't know of an existing Java type / class that does this.</p>\n<p>One of the problems is what happens with division.  For example, the exact representation of <code>1.0 / 3.0</code> would entail an infinite number of significant digits.  Which is problematic.</p>\n<p>I guess, if you had a mathematical model of floating point numbers that could represent a <em>Real</em> number and an uncertainty, AND that model was implementable (e.g. didn't involve problems such as indefinitely large representations, factorization, etc), then such a Java class would be possible.</p>\n<p>But in the meantime, a better approach would be to review your requirement.  Why do you need to preserve the trailing zeros?  It doesn't make sense from a straight-forward mathematical perspective.  Is there some other reason for doing it?</p>\n"}],"owner":{"account_id":17691824,"reputation":37,"user_id":12843415,"display_name":"supriya"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3995,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"answer_count":2,"score":2,"last_activity_date":1634395051,"creation_date":1634353294,"question_id":69592321,"body_markdown":"I have a JsonArray and need to convert it into Array of objects. Below is the code I am using.\r\nresponse - json response\r\n\r\n    ArrayList&lt;TestClass&gt; list = new ArrayList&lt;&gt;();\r\n                JsonArray jsonArray = new JsonArray(response);\r\n                jsonArray.forEach(o -&gt; {\r\n                  JsonObject jsonObject = new JsonObject(o.toString());\r\n                  // logic to transform into desired class and add to list\r\n                });\r\n    Json.encode(list.toArray());\r\n\r\nProblem is when converting to string for decimals, trailing zeros are getting removed. \r\nexample : if value is 4.50 it&#39;s just returning 4.5 if it&#39;s 3.00, 3 is getting returned.\r\nLooking to return raw data as it is. \r\nAny pointers on fixing this  ","title":"JSON decoding removing decimal trailing zeros","body":"<p>I have a JsonArray and need to convert it into Array of objects. Below is the code I am using.\nresponse - json response</p>\n<pre><code>ArrayList&lt;TestClass&gt; list = new ArrayList&lt;&gt;();\n            JsonArray jsonArray = new JsonArray(response);\n            jsonArray.forEach(o -&gt; {\n              JsonObject jsonObject = new JsonObject(o.toString());\n              // logic to transform into desired class and add to list\n            });\nJson.encode(list.toArray());\n</code></pre>\n<p>Problem is when converting to string for decimals, trailing zeros are getting removed.\nexample : if value is 4.50 it's just returning 4.5 if it's 3.00, 3 is getting returned.\nLooking to return raw data as it is.\nAny pointers on fixing this</p>\n"},{"tags":["java","android","firebase","firebase-realtime-database","google-cloud-platform"],"answers":[{"tags":[],"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1634203603,"creation_date":1634203603,"answer_id":69568266,"question_id":69568171,"body_markdown":"When using the following reference:\r\n\r\n\tString uid = FirebaseAuth.getInstance().getCurrentUser().getUid();\r\n\tDatabaseReference rootRef = FirebaseDatabase.getInstance().getReference();\r\n\tDatabaseReference uidRef = rootRef.child(&quot;Users&quot;).child(uid).child(&quot;User Location&quot;);\r\n\r\nPlease note, that there is no need to looping through the results. You should only call `.child()` again on the `DataSnapshot` object as in the following lines of code:\r\n\r\n    uidRef.get().addOnCompleteListener(new OnCompleteListener&lt;DataSnapshot&gt;() {\r\n\t\t@Override\r\n\t\tpublic void onComplete(@NonNull Task&lt;DataSnapshot&gt; task) {\r\n\t\t\tif (task.isSuccessful()) {\r\n\t\t\t\tDataSnapshot snapshot = task.getResult();\r\n\t\t\t\tdouble latitude = snapshot.child(&quot;latitude&quot;).getValue(Double.class);\r\n\t\t\t\tdouble longitude = snapshot.child(&quot;longitude&quot;).getValue(Double.class);\r\n\t\t\t\tLog.d(&quot;TAG&quot;, &quot;latitude, longitude&quot;);\r\n\t\t\t} else {\r\n\t\t\t\tLog.d(&quot;TAG&quot;, task.getException().getMessage()); //Don&#39;t ignore potential errors!\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\nThe result in the logcat will be:\r\n\r\n    15.44318, 120.7148767","title":"Unable to retrieve user location data from Firebase with unique key","body":"<p>When using the following reference:</p>\n<pre><code>String uid = FirebaseAuth.getInstance().getCurrentUser().getUid();\nDatabaseReference rootRef = FirebaseDatabase.getInstance().getReference();\nDatabaseReference uidRef = rootRef.child(&quot;Users&quot;).child(uid).child(&quot;User Location&quot;);\n</code></pre>\n<p>Please note, that there is no need to looping through the results. You should only call <code>.child()</code> again on the <code>DataSnapshot</code> object as in the following lines of code:</p>\n<pre><code>uidRef.get().addOnCompleteListener(new OnCompleteListener&lt;DataSnapshot&gt;() {\n    @Override\n    public void onComplete(@NonNull Task&lt;DataSnapshot&gt; task) {\n        if (task.isSuccessful()) {\n            DataSnapshot snapshot = task.getResult();\n            double latitude = snapshot.child(&quot;latitude&quot;).getValue(Double.class);\n            double longitude = snapshot.child(&quot;longitude&quot;).getValue(Double.class);\n            Log.d(&quot;TAG&quot;, &quot;latitude, longitude&quot;);\n        } else {\n            Log.d(&quot;TAG&quot;, task.getException().getMessage()); //Don't ignore potential errors!\n        }\n    }\n});\n</code></pre>\n<p>The result in the logcat will be:</p>\n<pre><code>15.44318, 120.7148767\n</code></pre>\n"}],"owner":{"account_id":10536766,"reputation":49,"user_id":7764395,"display_name":"Rafael Campos"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":96,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69568266,"answer_count":1,"score":0,"last_activity_date":1634394935,"creation_date":1634203141,"question_id":69568171,"body_markdown":"I&#39;ve successfully added a unique key to my database schema in Firebase, instead of using `push()`, preventing it from generating new push keys whenever the location refreshes. &lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    {\r\n      &quot;Users&quot; : {\r\n        &quot;RCX2HZXIwlSmMHFgDytf1DgZBgi2&quot; : {\r\n          &quot;Alert Level&quot; : &quot;High&quot;,\r\n          &quot;Emergency Type&quot; : &quot;Natural Disaster&quot;,\r\n          &quot;User Location&quot; : {\r\n            &quot;latitude&quot; : 15.5352917,\r\n            &quot;longitude&quot; : 120.7742867\r\n          },\r\n          &quot;address&quot; : &quot;Lapaz Tarlac&quot;,\r\n          &quot;emergencyNum&quot; : &quot;0981232387346&quot;,\r\n          &quot;name&quot; : &quot;Rafael Campos&quot;,\r\n          &quot;phoneNum&quot; : &quot;0981233445675&quot;\r\n        }\r\n      }\r\n    }\r\n\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nI checked my other app that retrieves the location from Realtime Databse and the user&#39;s location does not reflect at all on the map. I kept configuring the database references in code to get the correct path of the user&#39;s location but the app keeps crashing from NullPointerExceptions. How should I reference the correct child keys, especially the unique key of the users?\r\n\r\n    private GoogleMap mMap;\r\n    private ActivityRetrieveMapsBinding binding;\r\n    private Location mLocation;\r\n    private LocationManager mLocationManager;\r\n    private LocationRequest mLocationRequest;\r\n    private com.google.android.gms.location.LocationListener listener;\r\n    private LocationManager locationManager;\r\n    GoogleApiClient mGoogleApiClient;\r\n    public static final int REQUEST_CHECK_SETTINGS = 1001;\r\n    String uid = FirebaseAuth.getInstance().getCurrentUser().getUid();\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n\r\n        binding = ActivityRetrieveMapsBinding.inflate(getLayoutInflater());\r\n        setContentView(binding.getRoot());\r\n\r\n        // Obtain the SupportMapFragment and get notified when the map is ready to be used.\r\n        SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager()\r\n                .findFragmentById(R.id.map);\r\n        mapFragment.getMapAsync(this);\r\n\r\n        mLocationManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);\r\n        checkLocation();\r\n        if (mGoogleApiClient == null) {\r\n            mGoogleApiClient = new GoogleApiClient.Builder(this)\r\n                    .addConnectionCallbacks((GoogleApiClient.ConnectionCallbacks) this)\r\n                    .addOnConnectionFailedListener((GoogleApiClient.OnConnectionFailedListener) this)\r\n                    .addApi(LocationServices.API)\r\n                    .build();\r\n        }\r\n\r\n        mGoogleApiClient.connect();\r\n\r\n        LocationRequest mLocationRequest = new LocationRequest();\r\n        mLocationRequest.setInterval(10000);\r\n        mLocationRequest.setFastestInterval(5000);\r\n        mLocationRequest.setPriority(LocationRequest.PRIORITY_HIGH_ACCURACY);\r\n\r\n        LocationSettingsRequest.Builder builder = new LocationSettingsRequest.Builder()\r\n                .addLocationRequest(mLocationRequest);\r\n\r\n        PendingResult&lt;LocationSettingsResult&gt; result =\r\n                LocationServices.SettingsApi.checkLocationSettings(mGoogleApiClient, builder.build());\r\n\r\n        result.setResultCallback(new ResultCallback&lt;LocationSettingsResult&gt;() {\r\n            @Override\r\n            public void onResult(@NonNull LocationSettingsResult locationSettingsResult) {\r\n\r\n                final Status status = locationSettingsResult.getStatus();\r\n                final LocationSettingsStates LS_state = locationSettingsResult.getLocationSettingsStates();\r\n                switch (status.getStatusCode()) {\r\n                    case LocationSettingsStatusCodes.SUCCESS:\r\n                        // All location settings are satisfied. The client can initialize location\r\n                        // requests here.\r\n\r\n                        break;\r\n                    case LocationSettingsStatusCodes.RESOLUTION_REQUIRED:\r\n                        // Location settings are not satisfied. But could be fixed by showing the user\r\n                        // a dialog.\r\n                        try {\r\n                            // Show the dialog by calling startResolutionForResult(),\r\n                            // and check the result in onActivityResult().\r\n                            status.startResolutionForResult(RetrieveMapsActivity.this, REQUEST_CHECK_SETTINGS);\r\n\r\n                        } catch (IntentSender.SendIntentException e) {\r\n                            // Ignore the error.\r\n                        }\r\n                        break;\r\n                    case LocationSettingsStatusCodes.SETTINGS_CHANGE_UNAVAILABLE:\r\n                        // Location settings are not satisfied. However, we have no way to fix the\r\n                        // settings so we won&#39;t show the dialog.\r\n\r\n                        break;\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    private boolean checkLocation() {\r\n\r\n        if(!isLocationEnabled()){\r\n            showAlert();\r\n        }\r\n        return isLocationEnabled();\r\n\r\n    }\r\n\r\n\r\n\r\n    private void showAlert() {\r\n        final AlertDialog.Builder dialog = new AlertDialog.Builder(this);\r\n        dialog.setTitle(&quot;Enable Location&quot;)\r\n                .setMessage(&quot;Your Locations Settings is set to &#39;Off&#39;.\\nPlease Enable Location to &quot; +\r\n                        &quot;use this app&quot;)\r\n                .setPositiveButton(&quot;Location Settings&quot;, new DialogInterface.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(DialogInterface paramDialogInterface, int paramInt) {\r\n\r\n                        Intent myIntent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);\r\n                        startActivity(myIntent);\r\n                    }\r\n                })\r\n                .setNegativeButton(&quot;Cancel&quot;, new DialogInterface.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(DialogInterface paramDialogInterface, int paramInt) {\r\n\r\n                    }\r\n                });\r\n        dialog.show();\r\n    }\r\n\r\n    private boolean isLocationEnabled() {\r\n\r\n        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);\r\n        return locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER) ||\r\n                locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);\r\n    }\r\n\r\n    @Override\r\n    public void onMapReady(GoogleMap googleMap) {\r\n        mMap = googleMap;\r\n        DatabaseReference rootRef = FirebaseDatabase.getInstance().getReference();\r\n        DatabaseReference locationRef = rootRef.child(&quot;Users&quot;).child(uid).child(&quot;User Location&quot;);\r\n\r\n        DatabaseReference rootRef = FirebaseDatabase.getInstance().getReference();\r\n        DatabaseReference locationRef = rootRef.child(&quot;Users&quot;).child(uid).child(&quot;User Location&quot;);\r\n\r\n        locationRef.get().addOnCompleteListener(new OnCompleteListener&lt;DataSnapshot&gt;() {\r\n            @Override\r\n            public void onComplete(@NonNull Task&lt;DataSnapshot&gt; task) {\r\n                if (task.isSuccessful()){\r\n                    DataSnapshot dataSnapshot = task.getResult();\r\n                    double latitude = dataSnapshot.child(&quot;latitude&quot;).getValue(Double.class);\r\n                    double longitude = dataSnapshot.child(&quot;longitude&quot;).getValue(Double.class);\r\n                    LatLng location = new LatLng(latitude, longitude);\r\n                    Log.d(&quot;Tag&quot;, &quot;latitude, longitude&quot;);\r\n                    mMap.addMarker(new MarkerOptions().position(location).title(getCompleteAddress(latitude, longitude)));\r\n                    mMap.moveCamera(CameraUpdateFactory.newLatLng(location));\r\n                    mMap.moveCamera(CameraUpdateFactory.newLatLngZoom(location,14F));\r\n                }\r\n                else {\r\n                    Log.d(&quot;TAG&quot;, task.getException().getMessage()); //Don&#39;t ignore potential errors!\r\n                }\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n\r\n\r\n\r\n    private String getCompleteAddress(double Latitude,double Longitude){\r\n\r\n        String address = &quot;&quot;;\r\n\r\n        Geocoder geocoder = new Geocoder(RetrieveMapsActivity.this, Locale.getDefault());\r\n\r\n        try{\r\n\r\n            List&lt;Address&gt; addresses = geocoder.getFromLocation(Latitude,Longitude,1);\r\n\r\n            if(address!=null){\r\n\r\n                Address returnAddress = addresses.get(0);\r\n                StringBuilder stringBuilderReturnAddress =  new StringBuilder(&quot;&quot;);\r\n\r\n                for(int i=0; i&lt;=returnAddress.getMaxAddressLineIndex();i++){\r\n                    stringBuilderReturnAddress.append(returnAddress.getAddressLine(i)).append(&quot;\\n&quot;);\r\n                }\r\n\r\n                address = stringBuilderReturnAddress.toString();\r\n\r\n            }\r\n            else{\r\n                Toast.makeText(this, &quot;Address not found&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n\r\n        }\r\n        catch (Exception e){\r\n            Toast.makeText(this, e.getMessage(), Toast.LENGTH_SHORT).show();\r\n        }\r\n\r\n\r\n        return address;\r\n    }\r\n\r\n\r\n    @Override\r\n    public void onLocationChanged(@NonNull Location location) {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onConnected(@Nullable Bundle bundle) {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onConnectionSuspended(int i) {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onConnectionFailed(@NonNull ConnectionResult connectionResult) {\r\n\r\n    }\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        final LocationSettingsStates states = LocationSettingsStates.fromIntent(data);\r\n        if (requestCode == REQUEST_CHECK_SETTINGS) {\r\n            switch (resultCode) {\r\n                case Activity.RESULT_OK:\r\n                    // All required changes were successfully made\r\n\r\n                    break;\r\n                case Activity.RESULT_CANCELED:\r\n                    // The user was asked to change settings but chose not to\r\n\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n\r\n    \r\n\r\n  \r\n\r\nEdit: I&#39;ve already added the changed code, as prescribed by Alex: \r\n\r\n        @Override\r\n        public void onMapReady(GoogleMap googleMap) {\r\n        mMap = googleMap;\r\n        DatabaseReference rootRef = \r\n        FirebaseDatabase.getInstance().getReference();\r\n        DatabaseReference locationRef = \r\n        rootRef.child(&quot;Users&quot;).child(uid).child(&quot;User Location&quot;);\r\n\r\n        DatabaseReference rootRef = FirebaseDatabase.getInstance().getReference();\r\n        DatabaseReference locationRef = rootRef.child(&quot;Users&quot;).child(uid).child(&quot;User Location&quot;);\r\n\r\n        locationRef.get().addOnCompleteListener(new OnCompleteListener&lt;DataSnapshot&gt;() {\r\n            @Override\r\n            public void onComplete(@NonNull Task&lt;DataSnapshot&gt; task) {\r\n                if (task.isSuccessful()){\r\n                    DataSnapshot dataSnapshot = task.getResult();\r\n                    double latitude = dataSnapshot.child(&quot;latitude&quot;).getValue(Double.class);\r\n                    double longitude = dataSnapshot.child(&quot;longitude&quot;).getValue(Double.class);\r\n                    LatLng location = new LatLng(latitude, longitude);\r\n                    Log.d(&quot;Tag&quot;, &quot;latitude, longitude&quot;);\r\n                    mMap.addMarker(new MarkerOptions().position(location).title(getCompleteAddress(latitude, longitude)));\r\n                    mMap.moveCamera(CameraUpdateFactory.newLatLng(location));\r\n                    mMap.moveCamera(CameraUpdateFactory.newLatLngZoom(location,14F));\r\n                }\r\n                else {\r\n                    Log.d(&quot;TAG&quot;, task.getException().getMessage()); //Don&#39;t ignore potential errors!\r\n                }\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n\r\nI&#39;m still not seeing the user&#39;s current location being reflected and having the following error:\r\n\r\n\r\n java.lang.NullPointerException: Attempt to invoke virtual method &#39;double java.lang.Double.doubleValue()&#39; on a null object reference\r\n        at com.example.rescuealertadmin.RetrieveMapsActivity$4.onComplete(RetrieveMapsActivity.java:194)\r\n        at com.google.android.gms.tasks.zzj.run(com.google.android.gms:play-services-tasks@@17.2.0:4)\r\n        at android.os.Handler.handleCallback(Handler.java:938)\r\n        at android.os.Handler.dispatchMessage(Handler.java:99)\r\n        at android.os.Looper.loop(Looper.java:223)\r\n        at android.app.ActivityThread.main(ActivityThread.java:7656)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)","title":"Unable to retrieve user location data from Firebase with unique key","body":"<p>I've successfully added a unique key to my database schema in Firebase, instead of using <code>push()</code>, preventing it from generating new push keys whenever the location refreshes. <div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>{\n  \"Users\" : {\n    \"RCX2HZXIwlSmMHFgDytf1DgZBgi2\" : {\n      \"Alert Level\" : \"High\",\n      \"Emergency Type\" : \"Natural Disaster\",\n      \"User Location\" : {\n        \"latitude\" : 15.5352917,\n        \"longitude\" : 120.7742867\n      },\n      \"address\" : \"Lapaz Tarlac\",\n      \"emergencyNum\" : \"0981232387346\",\n      \"name\" : \"Rafael Campos\",\n      \"phoneNum\" : \"0981233445675\"\n    }\n  }\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>I checked my other app that retrieves the location from Realtime Databse and the user's location does not reflect at all on the map. I kept configuring the database references in code to get the correct path of the user's location but the app keeps crashing from NullPointerExceptions. How should I reference the correct child keys, especially the unique key of the users?</p>\n<pre><code>private GoogleMap mMap;\nprivate ActivityRetrieveMapsBinding binding;\nprivate Location mLocation;\nprivate LocationManager mLocationManager;\nprivate LocationRequest mLocationRequest;\nprivate com.google.android.gms.location.LocationListener listener;\nprivate LocationManager locationManager;\nGoogleApiClient mGoogleApiClient;\npublic static final int REQUEST_CHECK_SETTINGS = 1001;\nString uid = FirebaseAuth.getInstance().getCurrentUser().getUid();\n\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n\n    binding = ActivityRetrieveMapsBinding.inflate(getLayoutInflater());\n    setContentView(binding.getRoot());\n\n    // Obtain the SupportMapFragment and get notified when the map is ready to be used.\n    SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager()\n            .findFragmentById(R.id.map);\n    mapFragment.getMapAsync(this);\n\n    mLocationManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);\n    checkLocation();\n    if (mGoogleApiClient == null) {\n        mGoogleApiClient = new GoogleApiClient.Builder(this)\n                .addConnectionCallbacks((GoogleApiClient.ConnectionCallbacks) this)\n                .addOnConnectionFailedListener((GoogleApiClient.OnConnectionFailedListener) this)\n                .addApi(LocationServices.API)\n                .build();\n    }\n\n    mGoogleApiClient.connect();\n\n    LocationRequest mLocationRequest = new LocationRequest();\n    mLocationRequest.setInterval(10000);\n    mLocationRequest.setFastestInterval(5000);\n    mLocationRequest.setPriority(LocationRequest.PRIORITY_HIGH_ACCURACY);\n\n    LocationSettingsRequest.Builder builder = new LocationSettingsRequest.Builder()\n            .addLocationRequest(mLocationRequest);\n\n    PendingResult&lt;LocationSettingsResult&gt; result =\n            LocationServices.SettingsApi.checkLocationSettings(mGoogleApiClient, builder.build());\n\n    result.setResultCallback(new ResultCallback&lt;LocationSettingsResult&gt;() {\n        @Override\n        public void onResult(@NonNull LocationSettingsResult locationSettingsResult) {\n\n            final Status status = locationSettingsResult.getStatus();\n            final LocationSettingsStates LS_state = locationSettingsResult.getLocationSettingsStates();\n            switch (status.getStatusCode()) {\n                case LocationSettingsStatusCodes.SUCCESS:\n                    // All location settings are satisfied. The client can initialize location\n                    // requests here.\n\n                    break;\n                case LocationSettingsStatusCodes.RESOLUTION_REQUIRED:\n                    // Location settings are not satisfied. But could be fixed by showing the user\n                    // a dialog.\n                    try {\n                        // Show the dialog by calling startResolutionForResult(),\n                        // and check the result in onActivityResult().\n                        status.startResolutionForResult(RetrieveMapsActivity.this, REQUEST_CHECK_SETTINGS);\n\n                    } catch (IntentSender.SendIntentException e) {\n                        // Ignore the error.\n                    }\n                    break;\n                case LocationSettingsStatusCodes.SETTINGS_CHANGE_UNAVAILABLE:\n                    // Location settings are not satisfied. However, we have no way to fix the\n                    // settings so we won't show the dialog.\n\n                    break;\n            }\n        }\n    });\n}\n\nprivate boolean checkLocation() {\n\n    if(!isLocationEnabled()){\n        showAlert();\n    }\n    return isLocationEnabled();\n\n}\n\n\n\nprivate void showAlert() {\n    final AlertDialog.Builder dialog = new AlertDialog.Builder(this);\n    dialog.setTitle(&quot;Enable Location&quot;)\n            .setMessage(&quot;Your Locations Settings is set to 'Off'.\\nPlease Enable Location to &quot; +\n                    &quot;use this app&quot;)\n            .setPositiveButton(&quot;Location Settings&quot;, new DialogInterface.OnClickListener() {\n                @Override\n                public void onClick(DialogInterface paramDialogInterface, int paramInt) {\n\n                    Intent myIntent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);\n                    startActivity(myIntent);\n                }\n            })\n            .setNegativeButton(&quot;Cancel&quot;, new DialogInterface.OnClickListener() {\n                @Override\n                public void onClick(DialogInterface paramDialogInterface, int paramInt) {\n\n                }\n            });\n    dialog.show();\n}\n\nprivate boolean isLocationEnabled() {\n\n    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);\n    return locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER) ||\n            locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);\n}\n\n@Override\npublic void onMapReady(GoogleMap googleMap) {\n    mMap = googleMap;\n    DatabaseReference rootRef = FirebaseDatabase.getInstance().getReference();\n    DatabaseReference locationRef = rootRef.child(&quot;Users&quot;).child(uid).child(&quot;User Location&quot;);\n\n    DatabaseReference rootRef = FirebaseDatabase.getInstance().getReference();\n    DatabaseReference locationRef = rootRef.child(&quot;Users&quot;).child(uid).child(&quot;User Location&quot;);\n\n    locationRef.get().addOnCompleteListener(new OnCompleteListener&lt;DataSnapshot&gt;() {\n        @Override\n        public void onComplete(@NonNull Task&lt;DataSnapshot&gt; task) {\n            if (task.isSuccessful()){\n                DataSnapshot dataSnapshot = task.getResult();\n                double latitude = dataSnapshot.child(&quot;latitude&quot;).getValue(Double.class);\n                double longitude = dataSnapshot.child(&quot;longitude&quot;).getValue(Double.class);\n                LatLng location = new LatLng(latitude, longitude);\n                Log.d(&quot;Tag&quot;, &quot;latitude, longitude&quot;);\n                mMap.addMarker(new MarkerOptions().position(location).title(getCompleteAddress(latitude, longitude)));\n                mMap.moveCamera(CameraUpdateFactory.newLatLng(location));\n                mMap.moveCamera(CameraUpdateFactory.newLatLngZoom(location,14F));\n            }\n            else {\n                Log.d(&quot;TAG&quot;, task.getException().getMessage()); //Don't ignore potential errors!\n            }\n        }\n    });\n\n\n}\n\n\n\nprivate String getCompleteAddress(double Latitude,double Longitude){\n\n    String address = &quot;&quot;;\n\n    Geocoder geocoder = new Geocoder(RetrieveMapsActivity.this, Locale.getDefault());\n\n    try{\n\n        List&lt;Address&gt; addresses = geocoder.getFromLocation(Latitude,Longitude,1);\n\n        if(address!=null){\n\n            Address returnAddress = addresses.get(0);\n            StringBuilder stringBuilderReturnAddress =  new StringBuilder(&quot;&quot;);\n\n            for(int i=0; i&lt;=returnAddress.getMaxAddressLineIndex();i++){\n                stringBuilderReturnAddress.append(returnAddress.getAddressLine(i)).append(&quot;\\n&quot;);\n            }\n\n            address = stringBuilderReturnAddress.toString();\n\n        }\n        else{\n            Toast.makeText(this, &quot;Address not found&quot;, Toast.LENGTH_SHORT).show();\n        }\n\n    }\n    catch (Exception e){\n        Toast.makeText(this, e.getMessage(), Toast.LENGTH_SHORT).show();\n    }\n\n\n    return address;\n}\n\n\n@Override\npublic void onLocationChanged(@NonNull Location location) {\n\n}\n\n@Override\npublic void onConnected(@Nullable Bundle bundle) {\n\n}\n\n@Override\npublic void onConnectionSuspended(int i) {\n\n}\n\n@Override\npublic void onConnectionFailed(@NonNull ConnectionResult connectionResult) {\n\n}\n@Override\nprotected void onActivityResult(int requestCode, int resultCode, Intent data) {\n    super.onActivityResult(requestCode, resultCode, data);\n    final LocationSettingsStates states = LocationSettingsStates.fromIntent(data);\n    if (requestCode == REQUEST_CHECK_SETTINGS) {\n        switch (resultCode) {\n            case Activity.RESULT_OK:\n                // All required changes were successfully made\n\n                break;\n            case Activity.RESULT_CANCELED:\n                // The user was asked to change settings but chose not to\n\n                break;\n            default:\n                break;\n        }\n    }\n}\n</code></pre>\n<p>}</p>\n<p>Edit: I've already added the changed code, as prescribed by Alex:</p>\n<pre><code>    @Override\n    public void onMapReady(GoogleMap googleMap) {\n    mMap = googleMap;\n    DatabaseReference rootRef = \n    FirebaseDatabase.getInstance().getReference();\n    DatabaseReference locationRef = \n    rootRef.child(&quot;Users&quot;).child(uid).child(&quot;User Location&quot;);\n\n    DatabaseReference rootRef = FirebaseDatabase.getInstance().getReference();\n    DatabaseReference locationRef = rootRef.child(&quot;Users&quot;).child(uid).child(&quot;User Location&quot;);\n\n    locationRef.get().addOnCompleteListener(new OnCompleteListener&lt;DataSnapshot&gt;() {\n        @Override\n        public void onComplete(@NonNull Task&lt;DataSnapshot&gt; task) {\n            if (task.isSuccessful()){\n                DataSnapshot dataSnapshot = task.getResult();\n                double latitude = dataSnapshot.child(&quot;latitude&quot;).getValue(Double.class);\n                double longitude = dataSnapshot.child(&quot;longitude&quot;).getValue(Double.class);\n                LatLng location = new LatLng(latitude, longitude);\n                Log.d(&quot;Tag&quot;, &quot;latitude, longitude&quot;);\n                mMap.addMarker(new MarkerOptions().position(location).title(getCompleteAddress(latitude, longitude)));\n                mMap.moveCamera(CameraUpdateFactory.newLatLng(location));\n                mMap.moveCamera(CameraUpdateFactory.newLatLngZoom(location,14F));\n            }\n            else {\n                Log.d(&quot;TAG&quot;, task.getException().getMessage()); //Don't ignore potential errors!\n            }\n        }\n    });\n\n\n}\n</code></pre>\n<p>I'm still not seeing the user's current location being reflected and having the following error:</p>\n<p>java.lang.NullPointerException: Attempt to invoke virtual method 'double java.lang.Double.doubleValue()' on a null object reference\nat com.example.rescuealertadmin.RetrieveMapsActivity$4.onComplete(RetrieveMapsActivity.java:194)\nat com.google.android.gms.tasks.zzj.run(com.google.android.gms:play-services-tasks@@17.2.0:4)\nat android.os.Handler.handleCallback(Handler.java:938)\nat android.os.Handler.dispatchMessage(Handler.java:99)\nat android.os.Looper.loop(Looper.java:223)\nat android.app.ActivityThread.main(ActivityThread.java:7656)\nat java.lang.reflect.Method.invoke(Native Method)\nat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592)\nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)</p>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1634300651,"post_id":69584596,"comment_id":122993712,"body_markdown":"No, there will be no significant performance difference.","body":"No, there will be no significant performance difference."},{"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"score":0,"creation_date":1634300755,"post_id":69584596,"comment_id":122993756,"body_markdown":"You will get a difference when creating a Set and putting elements into it, due to its *no duplicates nature*, but once it is created, I dont think anyMatch() will have any differences between list/set..\n\nThis 30millis you are seeing might just be other factors, rather than the method itself.","body":"You will get a difference when creating a Set and putting elements into it, due to its <i>no duplicates nature</i>, but once it is created, I dont think anyMatch() will have any differences between list/set..  This 30millis you are seeing might just be other factors, rather than the method itself."},{"owner":{"account_id":8423897,"reputation":1034,"user_id":7505687,"display_name":"Dilermando Lima"},"score":0,"creation_date":1634300770,"post_id":69584596,"comment_id":122993765,"body_markdown":"Where have you got the over time? in `addding values` or `consuming streams`? I think on streans there  is no difference but adding can be because &#39;Set` needs check duplicated items","body":"Where have you got the over time? in <code>addding values</code> or <code>consuming streams</code>? I think on streans there  is no difference but adding can be because &#39;Set` needs check duplicated items"},{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":0,"creation_date":1634300857,"post_id":69584596,"comment_id":122993796,"body_markdown":"If the `Set` implementation is a `HashSet`, then checking for duplicates won&#39;t be expensive, I believe.","body":"If the <code>Set</code> implementation is a <code>HashSet</code>, then checking for duplicates won&#39;t be expensive, I believe."},{"owner":{"account_id":210082,"reputation":19409,"user_id":461499,"accept_rate":73,"display_name":"Rob Audenaerde"},"score":0,"creation_date":1634301037,"post_id":69584596,"comment_id":122993871,"body_markdown":"You should *profile* your benchmark. It will probably show you the `.stream()` operation is by far the most expensive. Put in a *lot* more data and try again :)","body":"You should <i>profile</i> your benchmark. It will probably show you the <code>.stream()</code> operation is by far the most expensive. Put in a <i>lot</i> more data and try again :)"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1634301075,"post_id":69584596,"comment_id":122993889,"body_markdown":"@Dilermando Lima, SusanMustafa sets created via `Set.of()` are immutable and their factory method throws an exception when there are duplicates. So theres no adding values here.","body":"@Dilermando Lima, SusanMustafa sets created via <code>Set.of()</code> are immutable and their factory method throws an exception when there are duplicates. So theres no adding values here."},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1634301437,"post_id":69584596,"comment_id":122994028,"body_markdown":"In both cases you are simply streaming the items.  So I would expect that they would both perform similarly (since the hashing of the set items provides no advantage here).","body":"In both cases you are simply streaming the items.  So I would expect that they would both perform similarly (since the hashing of the set items provides no advantage here)."},{"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"score":0,"creation_date":1634301491,"post_id":69584596,"comment_id":122994052,"body_markdown":"@Holger They are immutable yes, but during creation Set.of(), if you look deeper into the code, you will see it uses setN method, which in turn calls probe() method which verifies if element exists or not.\n\n              int idx = probe(e); \n\nThe meaning was that a Set by nature does not allow duplicates, therefore there must be a check somewhere to verify that :)","body":"@Holger They are immutable yes, but during creation Set.of(), if you look deeper into the code, you will see it uses setN method, which in turn calls probe() method which verifies if element exists or not.                int idx = probe(e);   The meaning was that a Set by nature does not allow duplicates, therefore there must be a check somewhere to verify that :)"},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":3,"creation_date":1634301752,"post_id":69584596,"comment_id":122994142,"body_markdown":"The question *Will it be any significant performance between these two anyMatch in the below streams?* had nothing to do with the initialization of the data structures.","body":"The question <i>Will it be any significant performance between these two anyMatch in the below streams?</i> had nothing to do with the initialization of the data structures."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1634303262,"post_id":69584596,"comment_id":122994692,"body_markdown":"@SusanMustafa but thats not relevant to this question.","body":"@SusanMustafa but thats not relevant to this question."}],"answers":[{"tags":[],"owner":{"account_id":5326372,"reputation":2386,"user_id":4248317,"display_name":"Cyril"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1634323613,"creation_date":1634304663,"answer_id":69585519,"question_id":69584596,"body_markdown":"There is no significant difference. I just benchmarked it with [jmh][1] (OpenJDK 17):\r\n\r\n    @BenchmarkMode(Mode.AverageTime)\r\n    @State(Scope.Benchmark)\r\n    public class SetListBenchmark {\r\n    \r\n        private List&lt;Integer&gt; list;\r\n        private Set&lt;Integer&gt; set;\r\n    \r\n        @Setup\r\n        public void setUp() {\r\n            list = List.copyOf(generateIntList());\r\n            set = Set.copyOf(generateIntList());\r\n        }\r\n    \r\n        private List&lt;Integer&gt; generateIntList() {\r\n            var list =  IntStream.range(1, 1_000_000)\r\n                    .filter(i -&gt; i % 2 != 0)\r\n                    .boxed()\r\n                    .collect(Collectors.toList());\r\n            list.add(4);\r\n            return list;\r\n        }\r\n    \r\n        @Benchmark\r\n        public boolean measureList() {\r\n            return list.stream().anyMatch(i -&gt; i % 2 == 0);\r\n        }\r\n    \r\n        @Benchmark\r\n        public boolean measureSet() {\r\n            return set.stream().anyMatch(i -&gt; i % 2 == 0);\r\n        }\r\n    }\r\n\r\n\r\nResult:\r\n\r\n    Benchmark                     Mode  Cnt  Score    Error  Units\r\n    SetListBenchmark.measureList  avgt    5  0.001 &#177;  0.001   s/op\r\n    SetListBenchmark.measureSet   avgt    5  0.001 &#177;  0.001   s/op\r\n\r\n\r\n  [1]: https://github.com/openjdk/jmh","title":"Performance difference in stream from List v.s Set","body":"<p>There is no significant difference. I just benchmarked it with <a href=\"https://github.com/openjdk/jmh\" rel=\"nofollow noreferrer\">jmh</a> (OpenJDK 17):</p>\n<pre><code>@BenchmarkMode(Mode.AverageTime)\n@State(Scope.Benchmark)\npublic class SetListBenchmark {\n\n    private List&lt;Integer&gt; list;\n    private Set&lt;Integer&gt; set;\n\n    @Setup\n    public void setUp() {\n        list = List.copyOf(generateIntList());\n        set = Set.copyOf(generateIntList());\n    }\n\n    private List&lt;Integer&gt; generateIntList() {\n        var list =  IntStream.range(1, 1_000_000)\n                .filter(i -&gt; i % 2 != 0)\n                .boxed()\n                .collect(Collectors.toList());\n        list.add(4);\n        return list;\n    }\n\n    @Benchmark\n    public boolean measureList() {\n        return list.stream().anyMatch(i -&gt; i % 2 == 0);\n    }\n\n    @Benchmark\n    public boolean measureSet() {\n        return set.stream().anyMatch(i -&gt; i % 2 == 0);\n    }\n}\n</code></pre>\n<p>Result:</p>\n<pre><code>Benchmark                     Mode  Cnt  Score    Error  Units\nSetListBenchmark.measureList  avgt    5  0.001   0.001   s/op\nSetListBenchmark.measureSet   avgt    5  0.001   0.001   s/op\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10777133,"reputation":7282,"user_id":7928721,"display_name":"samabcde"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634394096,"creation_date":1634394096,"answer_id":69596449,"question_id":69584596,"body_markdown":"Just did another benchmark to compare `ArrayList`, `LinkedList`, `ListN`, `HastSet`, `LinkedHashSet`, `SetN`. Each collection is constructed using a List with 1M odd number and adding 4 and then shuffled using fixed seed. \r\n\r\n```\r\nBenchmark                              Mode  Cnt   Score    Error  Units\r\nSetListBenchmark.measureArrayList      avgt  200   0.007 &#177;  0.001   s/op\r\nSetListBenchmark.measureLinkedList     avgt  200   0.016 &#177;  0.001   s/op\r\nSetListBenchmark.measureListN          avgt  200   0.005 &#177;  0.001   s/op\r\nSetListBenchmark.measureHashSet        avgt  200   10            s/op\r\nSetListBenchmark.measureLinkedHashSet  avgt  200   0.011 &#177;  0.001   s/op\r\nSetListBenchmark.measureSetN           avgt  200   0.003 &#177;  0.001   s/op\r\n```\r\nThe number of iteration needed to get the even number(4)\r\n``` \r\nCollection    No. of iteration\r\nArrayList     662453\r\nLinkedList    662453\r\nListN         662453\r\nHashSet       3\r\nLinkedHashSet 662453\r\nSetN          Not fixed*\r\n```\r\n&lt;sub&gt;[* Reason for not fixed][1]&lt;/sub&gt;\r\n\r\nSince [`anyMatch`][2] is short circuit operation, the performance really depends on how many iteration is needed to find the first match. As both `ListN` and `SetN` are backed by array, even though `SetN` iteration order is non-deterministic, both should have similar performance on average.\r\n\r\n```java\r\nimport org.openjdk.jmh.annotations.*;\r\nimport org.openjdk.jmh.infra.Blackhole;\r\n\r\nimport java.util.*;\r\nimport java.util.stream.Collectors;\r\nimport java.util.stream.Stream;\r\n\r\n@BenchmarkMode(Mode.AverageTime)\r\n@State(Scope.Benchmark)\r\npublic class SetListBenchmark {\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        org.openjdk.jmh.Main.main(args);\r\n    }\r\n\r\n    private List&lt;Integer&gt; listN;\r\n    private List&lt;Integer&gt; arrayList;\r\n    private List&lt;Integer&gt; linkedList;\r\n    private Set&lt;Integer&gt; setN;\r\n    private Set&lt;Integer&gt; hashSet;\r\n    private Set&lt;Integer&gt; linkedHashSet;\r\n\r\n    @Setup\r\n    public void setUp() {\r\n        arrayList = getIntStream().collect(Collectors.toCollection(ArrayList::new));\r\n        linkedList = getIntStream().collect(Collectors.toCollection(LinkedList::new));\r\n        listN = List.copyOf(getIntStream().collect(Collectors.toList()));\r\n        hashSet = getIntStream().collect(Collectors.toCollection(HashSet::new));\r\n        linkedHashSet = getIntStream().collect(Collectors.toCollection(LinkedHashSet::new));\r\n        setN = Set.copyOf(getIntStream().collect(Collectors.toList()));\r\n    }\r\n\r\n\r\n    private Stream&lt;Integer&gt; getIntStream() {\r\n        List&lt;Integer&gt; ints = new ArrayList&lt;&gt;();\r\n        for (int i = 0; i &lt; 1_000_000; i++) {\r\n            ints.add((2 * i) + 1);\r\n        }\r\n        ints.add(4);\r\n        Collections.shuffle(ints, new Random(0));\r\n        return ints.stream();\r\n    }\r\n\r\n    @Benchmark\r\n    public void measureArrayList(Blackhole blackhole) {\r\n        blackhole.consume(arrayList.stream().anyMatch(i -&gt; i % 2 == 0));\r\n    }\r\n\r\n    @Benchmark\r\n    public void measureLinkedList(Blackhole blackhole) {\r\n        blackhole.consume(linkedList.stream().anyMatch(i -&gt; i % 2 == 0));\r\n    }\r\n\r\n    @Benchmark\r\n    public void measureListN(Blackhole blackhole) {\r\n        blackhole.consume(listN.stream().anyMatch(i -&gt; i % 2 == 0));\r\n    }\r\n\r\n    @Benchmark\r\n    public void measureHashSet(Blackhole blackhole) {\r\n        blackhole.consume(hashSet.stream().anyMatch(i -&gt; i % 2 == 0));\r\n    }\r\n\r\n    @Benchmark\r\n    public void measureLinkedHashSet(Blackhole blackhole) {\r\n        blackhole.consume(linkedHashSet.stream().anyMatch(i -&gt; i % 2 == 0));\r\n    }\r\n\r\n    @Benchmark\r\n    public void measureSetN(Blackhole blackhole) {\r\n        blackhole.consume(setN.stream().anyMatch(i -&gt; i % 2 == 0));\r\n    }\r\n}\r\n```\r\nEnvironment \r\n- JDK: openjdk version &quot;15.0.2&quot; 2021-01-19\r\n- OS: Window 10\r\n- CPU: i7-8750H \r\n- Memory: 16G Ram \r\n\r\n\r\n  [1]: https://github.com/openjdk/jdk/blob/739769c8fc4b496f08a92225a12d07414537b6c0/src/java.base/share/classes/java/util/ImmutableCollections.java#L951\r\n  [2]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/stream/Stream.html#anyMatch(java.util.function.Predicate)","title":"Performance difference in stream from List v.s Set","body":"<p>Just did another benchmark to compare <code>ArrayList</code>, <code>LinkedList</code>, <code>ListN</code>, <code>HastSet</code>, <code>LinkedHashSet</code>, <code>SetN</code>. Each collection is constructed using a List with 1M odd number and adding 4 and then shuffled using fixed seed.</p>\n<pre><code>Benchmark                              Mode  Cnt   Score    Error  Units\nSetListBenchmark.measureArrayList      avgt  200   0.007   0.001   s/op\nSetListBenchmark.measureLinkedList     avgt  200   0.016   0.001   s/op\nSetListBenchmark.measureListN          avgt  200   0.005   0.001   s/op\nSetListBenchmark.measureHashSet        avgt  200   10            s/op\nSetListBenchmark.measureLinkedHashSet  avgt  200   0.011   0.001   s/op\nSetListBenchmark.measureSetN           avgt  200   0.003   0.001   s/op\n</code></pre>\n<p>The number of iteration needed to get the even number(4)</p>\n<pre><code>Collection    No. of iteration\nArrayList     662453\nLinkedList    662453\nListN         662453\nHashSet       3\nLinkedHashSet 662453\nSetN          Not fixed*\n</code></pre>\n<p><sub><a href=\"https://github.com/openjdk/jdk/blob/739769c8fc4b496f08a92225a12d07414537b6c0/src/java.base/share/classes/java/util/ImmutableCollections.java#L951\" rel=\"nofollow noreferrer\">* Reason for not fixed</a></sub></p>\n<p>Since <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/stream/Stream.html#anyMatch(java.util.function.Predicate)\" rel=\"nofollow noreferrer\"><code>anyMatch</code></a> is short circuit operation, the performance really depends on how many iteration is needed to find the first match. As both <code>ListN</code> and <code>SetN</code> are backed by array, even though <code>SetN</code> iteration order is non-deterministic, both should have similar performance on average.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.openjdk.jmh.annotations.*;\nimport org.openjdk.jmh.infra.Blackhole;\n\nimport java.util.*;\nimport java.util.stream.Collectors;\nimport java.util.stream.Stream;\n\n@BenchmarkMode(Mode.AverageTime)\n@State(Scope.Benchmark)\npublic class SetListBenchmark {\n\n    public static void main(String[] args) throws Exception {\n        org.openjdk.jmh.Main.main(args);\n    }\n\n    private List&lt;Integer&gt; listN;\n    private List&lt;Integer&gt; arrayList;\n    private List&lt;Integer&gt; linkedList;\n    private Set&lt;Integer&gt; setN;\n    private Set&lt;Integer&gt; hashSet;\n    private Set&lt;Integer&gt; linkedHashSet;\n\n    @Setup\n    public void setUp() {\n        arrayList = getIntStream().collect(Collectors.toCollection(ArrayList::new));\n        linkedList = getIntStream().collect(Collectors.toCollection(LinkedList::new));\n        listN = List.copyOf(getIntStream().collect(Collectors.toList()));\n        hashSet = getIntStream().collect(Collectors.toCollection(HashSet::new));\n        linkedHashSet = getIntStream().collect(Collectors.toCollection(LinkedHashSet::new));\n        setN = Set.copyOf(getIntStream().collect(Collectors.toList()));\n    }\n\n\n    private Stream&lt;Integer&gt; getIntStream() {\n        List&lt;Integer&gt; ints = new ArrayList&lt;&gt;();\n        for (int i = 0; i &lt; 1_000_000; i++) {\n            ints.add((2 * i) + 1);\n        }\n        ints.add(4);\n        Collections.shuffle(ints, new Random(0));\n        return ints.stream();\n    }\n\n    @Benchmark\n    public void measureArrayList(Blackhole blackhole) {\n        blackhole.consume(arrayList.stream().anyMatch(i -&gt; i % 2 == 0));\n    }\n\n    @Benchmark\n    public void measureLinkedList(Blackhole blackhole) {\n        blackhole.consume(linkedList.stream().anyMatch(i -&gt; i % 2 == 0));\n    }\n\n    @Benchmark\n    public void measureListN(Blackhole blackhole) {\n        blackhole.consume(listN.stream().anyMatch(i -&gt; i % 2 == 0));\n    }\n\n    @Benchmark\n    public void measureHashSet(Blackhole blackhole) {\n        blackhole.consume(hashSet.stream().anyMatch(i -&gt; i % 2 == 0));\n    }\n\n    @Benchmark\n    public void measureLinkedHashSet(Blackhole blackhole) {\n        blackhole.consume(linkedHashSet.stream().anyMatch(i -&gt; i % 2 == 0));\n    }\n\n    @Benchmark\n    public void measureSetN(Blackhole blackhole) {\n        blackhole.consume(setN.stream().anyMatch(i -&gt; i % 2 == 0));\n    }\n}\n</code></pre>\n<p>Environment</p>\n<ul>\n<li>JDK: openjdk version &quot;15.0.2&quot; 2021-01-19</li>\n<li>OS: Window 10</li>\n<li>CPU: i7-8750H</li>\n<li>Memory: 16G Ram</li>\n</ul>\n"}],"owner":{"account_id":6078955,"reputation":365,"user_id":4745335,"display_name":"kasopey"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1249,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1634394096,"creation_date":1634300289,"question_id":69584596,"body_markdown":"Will it be any significant performance between these two `anyMatch` in the below streams?\r\n* one created from `List`\r\n* second created from `Set`?\r\n\r\n```\r\n        List&lt;Integer&gt; list = List.of(1, 2, 3, 4);\r\n        Set&lt;Integer&gt; set = Set.of(1, 2, 3, 4);\r\n\r\n        var result1 = list.stream().anyMatch(i -&gt; (i % 2 == 0));\r\n        var result2 = set.stream().anyMatch(i -&gt; (i % 2 == 0));\r\n```\r\n\r\nI tried to measure it, but the result of 1M executions has a difference of around 30milis so it could be a measurement error.","title":"Performance difference in stream from List v.s Set","body":"<p>Will it be any significant performance between these two <code>anyMatch</code> in the below streams?</p>\n<ul>\n<li>one created from <code>List</code></li>\n<li>second created from <code>Set</code>?</li>\n</ul>\n<pre><code>        List&lt;Integer&gt; list = List.of(1, 2, 3, 4);\n        Set&lt;Integer&gt; set = Set.of(1, 2, 3, 4);\n\n        var result1 = list.stream().anyMatch(i -&gt; (i % 2 == 0));\n        var result2 = set.stream().anyMatch(i -&gt; (i % 2 == 0));\n</code></pre>\n<p>I tried to measure it, but the result of 1M executions has a difference of around 30milis so it could be a measurement error.</p>\n"},{"tags":["java","arrays","json"],"answers":[{"tags":[],"owner":{"account_id":2640224,"reputation":586,"user_id":9189768,"display_name":"BluEOS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1634393578,"creation_date":1634393578,"answer_id":69596384,"question_id":69596333,"body_markdown":"Your problem is not related to Java, you just forgot a step.\r\n\r\n\r\n&gt; String currentParentKeyProperties =\r\n&gt; fieldsObject.optString(currentParentKey);\r\n\r\nis not correct, what you want is to get a JSONObject.","title":"Get child key and values from JSON array: Java","body":"<p>Your problem is not related to Java, you just forgot a step.</p>\n<blockquote>\n<p>String currentParentKeyProperties =\nfieldsObject.optString(currentParentKey);</p>\n</blockquote>\n<p>is not correct, what you want is to get a JSONObject.</p>\n"}],"owner":{"account_id":13466622,"reputation":147,"user_id":9716641,"display_name":"Steph"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":526,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69596384,"answer_count":1,"score":0,"last_activity_date":1634393578,"creation_date":1634393143,"question_id":69596333,"body_markdown":"I have the following JSON Array stored inside a variable called *fieldsArray*:\r\n\r\n    [\r\n      {\r\n        &quot;Header - Goods Receipt&quot;:[\r\n            {&quot;warehouse&quot;:{&quot;editableField&quot;:&quot;false&quot;}},\r\n            {&quot;documentNo&quot;:{&quot;editableField&quot;:&quot;true&quot;}}\r\n         ]\r\n      },\r\n      {\r\n        &quot;Lines - Goods Receipt&quot;:[\r\n            {&quot;description&quot;:{&quot;editableField&quot;:&quot;false&quot;}}\r\n         ]\r\n       }\r\n     ]\r\n\r\nI need to loop through this array, grabbing the &quot;Header - Goods Receipt&quot; first, and then drill down and get it&#39;s children (&quot;warehouse&quot; and &quot;documentNo&quot;) and the values for their nested &quot;editableField&quot; child keys. So far, I have managed to grab &quot;Header - Goods Receipt&quot;, but cannot get to it&#39;s children. I have done the following so far:\r\n\r\n     for (int i = 0; i &lt; fieldsArray.length(); i++) {  \r\n         JSONObject fieldsObject = fieldsArray.optJSONObject(i); \r\n              \r\n                 Iterator&lt;String&gt; iterator = fieldsObject.keys(); \r\n\r\n                  while(iterator.hasNext()) { \r\n                    String currentParentKey = iterator.next(); \r\n\r\n                    String currentParentKeyProperties = fieldsObject.optString(currentParentKey);\r\n\r\n                    //I have tried the below code to get to &quot;warehouse&quot; and &quot;documentNo&quot;, but it&#39;s not working:\r\n\r\n                    Iterator&lt;String&gt; iteratorTwo = currentParentKeyProperties.keys();\r\n                    while(iteratorTwo.hasNext()) {\r\n                        String currentChildKey = iteratorTwo.next();\r\n                        String isEditable = currentParentKeyProperties.getJSONObject(currentChildKey).getString(&quot;editableField&quot;);\r\n                     }\r\n \r\n                  }\r\n       }  \r\n\r\nI get the following errors:\r\n\r\n     error: cannot find symbol\r\n     Iterator&lt;String&gt; iteratorTwo = currentParentKeyProperties.keys();                                                          \r\n     symbol:   method keys()\r\n\r\nand\r\n\r\n     error: cannot find symbol\r\n     String isEditable = currentParentKeyProperties.getJSONObject(currentChildKey).getString(&quot;editableField&quot;);\r\n     method: getJSONObject(String)\r\n\r\n\r\n\r\nNOTE: *currentParentKeyProperties* gives the following JSON Array:\r\n\r\n     [\r\n       {\r\n         &quot;warehouse&quot;:{&quot;editableField&quot;:&quot;false&quot;}\r\n       },\r\n       {\r\n         &quot;documentNo&quot;:{&quot;editableField&quot;:&quot;true&quot;}\r\n       }\r\n     ]\r\n\r\n\r\nBrand new to Java - not sure why getJSONObject is not working? I have used it elsewhere in my code. Thanks in advance.\r\n\r\n   ","title":"Get child key and values from JSON array: Java","body":"<p>I have the following JSON Array stored inside a variable called <em>fieldsArray</em>:</p>\n<pre><code>[\n  {\n    &quot;Header - Goods Receipt&quot;:[\n        {&quot;warehouse&quot;:{&quot;editableField&quot;:&quot;false&quot;}},\n        {&quot;documentNo&quot;:{&quot;editableField&quot;:&quot;true&quot;}}\n     ]\n  },\n  {\n    &quot;Lines - Goods Receipt&quot;:[\n        {&quot;description&quot;:{&quot;editableField&quot;:&quot;false&quot;}}\n     ]\n   }\n ]\n</code></pre>\n<p>I need to loop through this array, grabbing the &quot;Header - Goods Receipt&quot; first, and then drill down and get it's children (&quot;warehouse&quot; and &quot;documentNo&quot;) and the values for their nested &quot;editableField&quot; child keys. So far, I have managed to grab &quot;Header - Goods Receipt&quot;, but cannot get to it's children. I have done the following so far:</p>\n<pre><code> for (int i = 0; i &lt; fieldsArray.length(); i++) {  \n     JSONObject fieldsObject = fieldsArray.optJSONObject(i); \n          \n             Iterator&lt;String&gt; iterator = fieldsObject.keys(); \n\n              while(iterator.hasNext()) { \n                String currentParentKey = iterator.next(); \n\n                String currentParentKeyProperties = fieldsObject.optString(currentParentKey);\n\n                //I have tried the below code to get to &quot;warehouse&quot; and &quot;documentNo&quot;, but it's not working:\n\n                Iterator&lt;String&gt; iteratorTwo = currentParentKeyProperties.keys();\n                while(iteratorTwo.hasNext()) {\n                    String currentChildKey = iteratorTwo.next();\n                    String isEditable = currentParentKeyProperties.getJSONObject(currentChildKey).getString(&quot;editableField&quot;);\n                 }\n\n              }\n   }  \n</code></pre>\n<p>I get the following errors:</p>\n<pre><code> error: cannot find symbol\n Iterator&lt;String&gt; iteratorTwo = currentParentKeyProperties.keys();                                                          \n symbol:   method keys()\n</code></pre>\n<p>and</p>\n<pre><code> error: cannot find symbol\n String isEditable = currentParentKeyProperties.getJSONObject(currentChildKey).getString(&quot;editableField&quot;);\n method: getJSONObject(String)\n</code></pre>\n<p>NOTE: <em>currentParentKeyProperties</em> gives the following JSON Array:</p>\n<pre><code> [\n   {\n     &quot;warehouse&quot;:{&quot;editableField&quot;:&quot;false&quot;}\n   },\n   {\n     &quot;documentNo&quot;:{&quot;editableField&quot;:&quot;true&quot;}\n   }\n ]\n</code></pre>\n<p>Brand new to Java - not sure why getJSONObject is not working? I have used it elsewhere in my code. Thanks in advance.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8054,"page":1938,"page_size":100}
