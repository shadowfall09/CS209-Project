{"items":[{"tags":["java","sql","postgresql","spring-boot","hibernate"],"comments":[{"owner":{"account_id":13542195,"reputation":139,"user_id":9769594,"display_name":"warmCabin"},"score":0,"creation_date":1672770012,"post_id":74996781,"comment_id":132347594,"body_markdown":"Does this help? https://thorben-janssen.com/ternary-associations/\nBased on this article, seems like you&#39;ve got it right with a `@OneToMany Set&lt;Bookings&gt;` in the other entities.","body":"Does this help? <a href=\"https://thorben-janssen.com/ternary-associations/\" rel=\"nofollow noreferrer\">thorben-janssen.com/ternary-associations</a> Based on this article, seems like you&#39;ve got it right with a <code>@OneToMany Set&lt;Bookings&gt;</code> in the other entities."}],"answers":[{"tags":[],"owner":{"account_id":23217269,"reputation":21,"user_id":17310018,"display_name":"peebee"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672852581,"creation_date":1672852581,"answer_id":75008980,"question_id":74996781,"body_markdown":"This is how I solved it using the info provided in the article sent by @warmCabin ([thorben-janssen.com/ternary-associations][1]):\r\n\r\nUsing an association table class like above with the attributes startDate, endDate, booking_id and the references to the three entities Room, Customer, CustomerServant, provided that theres an according @ManyToOne annotation for the three referencing entities, just like in the question above.\r\n\r\ne.g. like above\r\n\r\n    @ManyToOne (cascade = CascadeType.ALL, fetch = FetchType.EAGER)\r\n    @JoinColumn(name = &quot;customer&quot;, insertable = false, updatable = false)\r\n       private Customer customer = new Customer();\r\n\r\nThen I added this to all entities that are connected via the ternary relation:\r\n\r\n    @OneToMany(mappedBy = &quot;&lt;enter varName from ternary relation table&gt;&quot;)\r\n       Set&lt;T&gt; var = new HashSet&lt;&gt;();\r\n\r\nWith this line of code, when a relation is stored e.g. a booking like in my case, this relation gets stored in every participating entity and every stored relation gets the Ids of all participating entities.\r\n\r\nIn my case it would look like this, for the three entities:\r\n\r\n    @Entity(name=&quot;Room&quot;)\r\n    @Table(name=&quot;Room&quot;)\r\n    class Room {\r\n\r\n       //attributes...\r\n       \r\n       @OneToMany(mappedBy = &quot;room&quot;)\r\n       Set&lt;Bookings&gt; bookings = new HashSet&lt;&gt;();\r\n       \r\n       //...\r\n    }\r\n\r\n    @Entity(name=&quot;Customer&quot;)\r\n    @Table(name=&quot;Customer&quot;)\r\n    class Customer {\r\n\r\n       //attributes...\r\n       \r\n       @OneToMany(mappedBy = &quot;customer&quot;)\r\n       Set&lt;Bookings&gt; bookings = new HashSet&lt;&gt;();\r\n       \r\n       //...\r\n    }\r\n\r\n    @Entity(name=&quot;CustomerServant&quot;)\r\n    @Table(name=&quot;CustomerServant&quot;)\r\n    class CustomerServant {\r\n\r\n       //attributes...\r\n       \r\n       @OneToMany(mappedBy = &quot;customerServant&quot;)\r\n       Set&lt;Bookings&gt; bookings = new HashSet&lt;&gt;();\r\n       \r\n       //...\r\n    }\r\n\r\nIn the article cited above it is said that its also possible to create such a relation with a HashMap, but because the first appraoch, with an own entity class as a ternary relation, works for me, I didnt check if it would also work in my case. If necessary check the article [thorben-janssen.com/ternary-associations][1].\r\n\r\n\r\n  [1]: https://thorben-janssen.com/ternary-associations/","title":"Ternary m-to-m-to-m relation in springboot/postgresql","body":"<p>This is how I solved it using the info provided in the article sent by @warmCabin (<a href=\"https://thorben-janssen.com/ternary-associations/\" rel=\"nofollow noreferrer\">thorben-janssen.com/ternary-associations</a>):</p>\n<p>Using an association table class like above with the attributes startDate, endDate, booking_id and the references to the three entities Room, Customer, CustomerServant, provided that theres an according @ManyToOne annotation for the three referencing entities, just like in the question above.</p>\n<p>e.g. like above</p>\n<pre><code>@ManyToOne (cascade = CascadeType.ALL, fetch = FetchType.EAGER)\n@JoinColumn(name = &quot;customer&quot;, insertable = false, updatable = false)\n   private Customer customer = new Customer();\n</code></pre>\n<p>Then I added this to all entities that are connected via the ternary relation:</p>\n<pre><code>@OneToMany(mappedBy = &quot;&lt;enter varName from ternary relation table&gt;&quot;)\n   Set&lt;T&gt; var = new HashSet&lt;&gt;();\n</code></pre>\n<p>With this line of code, when a relation is stored e.g. a booking like in my case, this relation gets stored in every participating entity and every stored relation gets the Ids of all participating entities.</p>\n<p>In my case it would look like this, for the three entities:</p>\n<pre><code>@Entity(name=&quot;Room&quot;)\n@Table(name=&quot;Room&quot;)\nclass Room {\n\n   //attributes...\n   \n   @OneToMany(mappedBy = &quot;room&quot;)\n   Set&lt;Bookings&gt; bookings = new HashSet&lt;&gt;();\n   \n   //...\n}\n\n@Entity(name=&quot;Customer&quot;)\n@Table(name=&quot;Customer&quot;)\nclass Customer {\n\n   //attributes...\n   \n   @OneToMany(mappedBy = &quot;customer&quot;)\n   Set&lt;Bookings&gt; bookings = new HashSet&lt;&gt;();\n   \n   //...\n}\n\n@Entity(name=&quot;CustomerServant&quot;)\n@Table(name=&quot;CustomerServant&quot;)\nclass CustomerServant {\n\n   //attributes...\n   \n   @OneToMany(mappedBy = &quot;customerServant&quot;)\n   Set&lt;Bookings&gt; bookings = new HashSet&lt;&gt;();\n   \n   //...\n}\n</code></pre>\n<p>In the article cited above it is said that its also possible to create such a relation with a HashMap, but because the first appraoch, with an own entity class as a ternary relation, works for me, I didnt check if it would also work in my case. If necessary check the article <a href=\"https://thorben-janssen.com/ternary-associations/\" rel=\"nofollow noreferrer\">thorben-janssen.com/ternary-associations</a>.</p>\n"}],"owner":{"account_id":23217269,"reputation":21,"user_id":17310018,"display_name":"peebee"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672852581,"creation_date":1672767442,"question_id":74996781,"body_markdown":"I am trying to implement a ternary relation with the entities Customer, CustomerServant and Room. The teranry relation also has the additional attributes StartDate, EndDate and also an Id. Therefore I created this class to get the relation table:\r\n\r\n    @Entity(name = &quot;bookings&quot;)\r\n    @Table(name = &quot;bookings&quot;)\r\n    public class Bookings {\r\n\r\n\r\n    @Id\r\n    @SequenceGenerator(\r\n            name = &quot;bookings_sequence&quot;,\r\n            sequenceName = &quot;bookings_sequence&quot;,\r\n            allocationSize = 1\r\n    )\r\n    @GeneratedValue(\r\n            strategy = SEQUENCE,\r\n            generator = &quot;bookings_sequence&quot;\r\n    )\r\n    @Column(\r\n            name = &quot;bookings_id&quot;,\r\n            updatable = false\r\n    )\r\n    private Long Id;\r\n\r\n    @Column(\r\n            name = &quot;Travel_Start_Date&quot;,\r\n            nullable = false\r\n    )\r\n    private String travelStartDate ;\r\n\r\n    @Column(\r\n            name = &quot;Travel_End_Date&quot;,\r\n            nullable = false\r\n    )\r\n    private String travelEndDate;\r\n\r\n    @ManyToOne (  cascade = CascadeType.ALL, fetch = FetchType.EAGER)\r\n    @JoinColumn(name = &quot;customer&quot;, insertable = false, updatable = false)\r\n    private Customer customer = new Customer();\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;room&quot;, insertable = false, updatable = false)\r\n    private Room room;\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;customerServant&quot;, insertable = false, updatable = false)\r\n    private CustomerServant customerServant;\r\n\r\nWhat I am struggling with is what I should write in the other three classes which are referencing each other. \r\nI do understand that to create a single m-to-m relation with additional relational attributes I can implement a class as I did above and simply write: e.g.\r\n```\r\n class Bookings {\r\n   int Id;\r\n   Date StartDate;\r\n   Date EndDate;\r\n   \r\n   @ManyToOne\r\n   @JoinColumn(name = &quot;customer_id&quot;)\r\n   Customer customer;\r\n\r\n   @ManyToOne\r\n   @JoinColumn(name = &quot;Room&quot;)\r\n   Room room;\r\n }\r\n class Customer {\r\n   //...\r\n   @OneToMany(mappedBy = &quot;customer&quot;)\r\n   Set&lt;Bookings&gt; bookings;\r\n }\r\n class Room {\r\n   @OneToMany(mappedBy = &quot;room&quot;)\r\n   Set&lt;Bookings&gt; bookings;\r\n```\r\nbut what do I do when I want a ternary relation?","title":"Ternary m-to-m-to-m relation in springboot/postgresql","body":"<p>I am trying to implement a ternary relation with the entities Customer, CustomerServant and Room. The teranry relation also has the additional attributes StartDate, EndDate and also an Id. Therefore I created this class to get the relation table:</p>\n<pre><code>@Entity(name = &quot;bookings&quot;)\n@Table(name = &quot;bookings&quot;)\npublic class Bookings {\n\n\n@Id\n@SequenceGenerator(\n        name = &quot;bookings_sequence&quot;,\n        sequenceName = &quot;bookings_sequence&quot;,\n        allocationSize = 1\n)\n@GeneratedValue(\n        strategy = SEQUENCE,\n        generator = &quot;bookings_sequence&quot;\n)\n@Column(\n        name = &quot;bookings_id&quot;,\n        updatable = false\n)\nprivate Long Id;\n\n@Column(\n        name = &quot;Travel_Start_Date&quot;,\n        nullable = false\n)\nprivate String travelStartDate ;\n\n@Column(\n        name = &quot;Travel_End_Date&quot;,\n        nullable = false\n)\nprivate String travelEndDate;\n\n@ManyToOne (  cascade = CascadeType.ALL, fetch = FetchType.EAGER)\n@JoinColumn(name = &quot;customer&quot;, insertable = false, updatable = false)\nprivate Customer customer = new Customer();\n\n@ManyToOne\n@JoinColumn(name = &quot;room&quot;, insertable = false, updatable = false)\nprivate Room room;\n\n@ManyToOne\n@JoinColumn(name = &quot;customerServant&quot;, insertable = false, updatable = false)\nprivate CustomerServant customerServant;\n</code></pre>\n<p>What I am struggling with is what I should write in the other three classes which are referencing each other.\nI do understand that to create a single m-to-m relation with additional relational attributes I can implement a class as I did above and simply write: e.g.</p>\n<pre><code> class Bookings {\n   int Id;\n   Date StartDate;\n   Date EndDate;\n   \n   @ManyToOne\n   @JoinColumn(name = &quot;customer_id&quot;)\n   Customer customer;\n\n   @ManyToOne\n   @JoinColumn(name = &quot;Room&quot;)\n   Room room;\n }\n class Customer {\n   //...\n   @OneToMany(mappedBy = &quot;customer&quot;)\n   Set&lt;Bookings&gt; bookings;\n }\n class Room {\n   @OneToMany(mappedBy = &quot;room&quot;)\n   Set&lt;Bookings&gt; bookings;\n</code></pre>\n<p>but what do I do when I want a ternary relation?</p>\n"},{"tags":["java","spring-boot","spring-security"],"comments":[{"owner":{"account_id":948742,"reputation":723,"user_id":975386,"display_name":"Jean-Alexis Aufauvre"},"score":0,"creation_date":1675449575,"post_id":74926313,"comment_id":132939003,"body_markdown":"You don&#39;t need all this code. See: https://stackoverflow.com/questions/70364411/my-spring-customsecurityexpressionroot-not-working/70365925#70365925","body":"You don&#39;t need all this code. See: <a href=\"https://stackoverflow.com/questions/70364411/my-spring-customsecurityexpressionroot-not-working/70365925#70365925\" title=\"my spring customsecurityexpressionroot not working\">stackoverflow.com/questions/70364411/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1672265457,"creation_date":1672126699,"answer_id":74926747,"question_id":74926313,"body_markdown":"# Expression Handler\r\n\r\nIn order to customize expression handling mechanism [Reference documentation of Spring Security 6.0][expressionHendler] suggests registering `MethodSecurityExpressionHandler` as a Bean in the Context, by defining `@Bean` annotated method in the configuration class. The method is advised to be marked with `static` modifier, so that it gets executed, and a custom expression handler gets registered in the Context before the configuration class would be instantiated and initialized.\r\n\r\n&gt; If you need to customize the way that expressions are handled, \r\n&gt; you can expose a custom `MethodSecurityExpressionHandler`, like so:\r\n&gt; \r\n&gt; ```\r\n&gt; @Bean\r\n&gt; static MethodSecurityExpressionHandler\r\n&gt; methodSecurityExpressionHandler() {\r\n&gt; \t  // instantiating the handler\r\n&gt; \t  return handler;\r\n&gt; }\r\n&gt; ```\r\n&gt; \r\n&gt; We expose MethodSecurityExpressionHandler using a `static` method to\r\n&gt; ensure that Spring publishes it before it initializes Spring\r\n&gt; Security’s method security `@Configuration` classes.\r\n\r\n\r\n# [`@EnableMethodSecurity`][enableMethodSecurity]\r\n\r\n[`@EnableMethodSecurity`][enableMethodSecurity] annotation is a recommended replacement for deprecated &lt;del&gt;`@EnableGlobalMethodSecurity`&lt;/del&gt;.\r\n\r\nIts property `prePostEnabled` is by default set to `true`.\r\n\r\nSo to enable usage of `@PreAuthorize/@PostAuthorize` and `@PreFilter/@PostFilter` which are the most widely used annotations for customizing access control on the method-level, you can apply `@EnableMethodSecurity` without providing any arguments.\r\n\r\n\r\n\r\n   [expressionHendler]: https://docs.spring.io/spring-security/reference/servlet/authorization/method-security.html#_customizing_authorization\r\n\r\n   [enableMethodSecurity]: https://docs.spring.io/spring-security/site/docs/5.7.0/api/org/springframework/security/config/annotation/method/configuration/EnableMethodSecurity.html","title":"GlobalMethodSecurityConfiguration is deprecated in spring boot 3, how to create Custom Expresion handler in 3?","body":"<h1>Expression Handler</h1>\n<p>In order to customize expression handling mechanism <a href=\"https://docs.spring.io/spring-security/reference/servlet/authorization/method-security.html#_customizing_authorization\" rel=\"noreferrer\">Reference documentation of Spring Security 6.0</a> suggests registering <code>MethodSecurityExpressionHandler</code> as a Bean in the Context, by defining <code>@Bean</code> annotated method in the configuration class. The method is advised to be marked with <code>static</code> modifier, so that it gets executed, and a custom expression handler gets registered in the Context before the configuration class would be instantiated and initialized.</p>\n<blockquote>\n<p>If you need to customize the way that expressions are handled,\nyou can expose a custom <code>MethodSecurityExpressionHandler</code>, like so:</p>\n<pre><code>@Bean\nstatic MethodSecurityExpressionHandler\nmethodSecurityExpressionHandler() {\n    // instantiating the handler\n    return handler;\n}\n</code></pre>\n<p>We expose MethodSecurityExpressionHandler using a <code>static</code> method to\nensure that Spring publishes it before it initializes Spring\nSecurity’s method security <code>@Configuration</code> classes.</p>\n</blockquote>\n<h1><a href=\"https://docs.spring.io/spring-security/site/docs/5.7.0/api/org/springframework/security/config/annotation/method/configuration/EnableMethodSecurity.html\" rel=\"noreferrer\"><code>@EnableMethodSecurity</code></a></h1>\n<p><a href=\"https://docs.spring.io/spring-security/site/docs/5.7.0/api/org/springframework/security/config/annotation/method/configuration/EnableMethodSecurity.html\" rel=\"noreferrer\"><code>@EnableMethodSecurity</code></a> annotation is a recommended replacement for deprecated <del><code>@EnableGlobalMethodSecurity</code></del>.</p>\n<p>Its property <code>prePostEnabled</code> is by default set to <code>true</code>.</p>\n<p>So to enable usage of <code>@PreAuthorize/@PostAuthorize</code> and <code>@PreFilter/@PostFilter</code> which are the most widely used annotations for customizing access control on the method-level, you can apply <code>@EnableMethodSecurity</code> without providing any arguments.</p>\n"},{"tags":[],"owner":{"account_id":16731772,"reputation":1574,"user_id":12093975,"display_name":"skyho"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1672261721,"creation_date":1672261299,"answer_id":74944960,"question_id":74926313,"body_markdown":"Try this:\r\n\r\n```java\r\n@Configuration\r\n@RequiredArgsConstructor\r\npublic class DenyMethodSecurityConfig {\r\n    \r\n    private final ApplicationContext applicationContext;\r\n\r\n    @Bean\r\n    protected MethodSecurityExpressionHandler createExpressionHandler() {\r\n        CustomMethodSecurityExpressionHandler expressionHandler = new CustomMethodSecurityExpressionHandler();\r\n        expressionHandler.setPermissionEvaluator(new CustomPermissionEvaluator());\r\n        expressionHandler.setApplicationContext(applicationContext);\r\n        return expressionHandler;\r\n    }\r\n}\r\n\r\n\r\n```\r\n\r\nIf you need an annotation @EnableGlobalMethodSecurity that to replace on @EnableMethodSecurity (note: prePostEnabled() default true).\r\n\r\nIf you use an annotated approach, then set this annotation above the class where you use annotations: @Pre/Post***, \r\nsince incorrect work is possible if you set annotation @EnableMethodSecurity above the class that only describes the configurations (marked as @Configuration),\r\nyou may observe incorrect operation of the authorization mechanism. However, I suggest you check it yourself.","title":"GlobalMethodSecurityConfiguration is deprecated in spring boot 3, how to create Custom Expresion handler in 3?","body":"<p>Try this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@RequiredArgsConstructor\npublic class DenyMethodSecurityConfig {\n    \n    private final ApplicationContext applicationContext;\n\n    @Bean\n    protected MethodSecurityExpressionHandler createExpressionHandler() {\n        CustomMethodSecurityExpressionHandler expressionHandler = new CustomMethodSecurityExpressionHandler();\n        expressionHandler.setPermissionEvaluator(new CustomPermissionEvaluator());\n        expressionHandler.setApplicationContext(applicationContext);\n        return expressionHandler;\n    }\n}\n\n\n</code></pre>\n<p>If you need an annotation @EnableGlobalMethodSecurity that to replace on @EnableMethodSecurity (note: prePostEnabled() default true).</p>\n<p>If you use an annotated approach, then set this annotation above the class where you use annotations: @Pre/Post***,\nsince incorrect work is possible if you set annotation @EnableMethodSecurity above the class that only describes the configurations (marked as @Configuration),\nyou may observe incorrect operation of the authorization mechanism. However, I suggest you check it yourself.</p>\n"}],"owner":{"account_id":3695262,"reputation":8590,"user_id":3391490,"accept_rate":100,"display_name":"Thirumal"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5101,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":2,"score":5,"last_activity_date":1672852278,"creation_date":1672122603,"question_id":74926313,"body_markdown":"Currently, I have created custom expression handler by overriding the `createExpressionHandler` function from `GlobalMethodSecurityConfiguration`. The code is \r\n\r\n    @Configuration\r\n    @EnableGlobalMethodSecurity(prePostEnabled = true)\r\n    public class MethodSecurityConfig extends GlobalMethodSecurityConfiguration {\r\n    \r\n    \tLogger logger = LoggerFactory.getLogger(this.getClass());\r\n    \t\r\n    \t@Autowired\r\n        private ApplicationContext applicationContext;\r\n    \t\r\n    \t@Override\r\n    \tprotected MethodSecurityExpressionHandler createExpressionHandler() {\r\n    \t\tCustomMethodSecurityExpressionHandler expressionHandler = new CustomMethodSecurityExpressionHandler();\r\n    \t\texpressionHandler.setPermissionEvaluator(new CustomPermissionEvaluator());\r\n    \t\texpressionHandler.setApplicationContext(applicationContext);\r\n    \t\treturn expressionHandler;\r\n    \t}\r\n    \t\r\n    }\r\n\r\n-- CustomMethodSecurityExpressionHandler class\r\n\r\n    public class CustomMethodSecurityExpressionHandler extends DefaultMethodSecurityExpressionHandler {\r\n    \t\r\n    \tprivate ApplicationContext applicationContext;\r\n    \tprivate AuthenticationTrustResolver trustResolver = new AuthenticationTrustResolverImpl();\r\n    \r\n    \t@Override\r\n    \tprotected MethodSecurityExpressionOperations createSecurityExpressionRoot(Authentication authentication,\r\n    \t\t\tMethodInvocation invocation) {\r\n    \t\tCustomMethodSecurityExpressionRoot root = new CustomMethodSecurityExpressionRoot(authentication);\r\n    \t\troot.setPermissionEvaluator(getPermissionEvaluator());\r\n    \t\troot.setTrustResolver(this.trustResolver);\r\n    \t\troot.setRoleHierarchy(getRoleHierarchy());\r\n    \t\troot.setG(this.applicationContext.getBean(CustomTraversalSource.class));\r\n    \t\treturn root;\r\n    \t}\r\n    \t\r\n    \t//This setter method will be called from the config class\r\n    \t@Override\r\n        public void setApplicationContext(ApplicationContext applicationContext) {\r\n            super.setApplicationContext(applicationContext);\r\n            this.applicationContext=applicationContext;\r\n        }\r\n    }\r\n\r\nAnd CustomPermissionEvaluator\r\n\r\n    @Component\r\n    public class CustomPermissionEvaluator implements PermissionEvaluator {\r\n    \r\n    \t@Override\r\n    \tpublic boolean hasPermission(Authentication authentication, Object targetDomainObject, Object permission) {\r\n    \t\tif ((authentication == null) || (targetDomainObject == null) || !(permission instanceof String)){\r\n                return false;\r\n            }\r\n            String targetType = targetDomainObject.getClass().getSimpleName().toUpperCase();\r\n            \r\n            return hasPrivilege(authentication, targetType, permission.toString().toUpperCase());\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean hasPermission(Authentication authentication, Serializable targetId, String targetType,\r\n    \t\t\tObject permission) {\r\n    \t\tif ((authentication == null) || (targetType == null) || !(permission instanceof String)) {\r\n                return false;\r\n            }\r\n            return hasPrivilege(authentication, targetType.toUpperCase(), \r\n              permission.toString().toUpperCase());\r\n    \t}\r\n    \r\n    \tprivate boolean hasPrivilege(Authentication authentication, String targetType, String permission) {\r\n    \t\tfor (GrantedAuthority grantedAuth : authentication.getAuthorities()) {\r\n    \t        if (grantedAuth.getAuthority().startsWith(targetType) &amp;&amp; \r\n    \t          grantedAuth.getAuthority().contains(permission)) {\r\n    \t            return true;\r\n    \t        }\r\n    \t    }\r\n    \t    return false;\r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"GlobalMethodSecurityConfiguration is deprecated in spring boot 3, how to create Custom Expresion handler in 3?","body":"<p>Currently, I have created custom expression handler by overriding the <code>createExpressionHandler</code> function from <code>GlobalMethodSecurityConfiguration</code>. The code is</p>\n<pre><code>@Configuration\n@EnableGlobalMethodSecurity(prePostEnabled = true)\npublic class MethodSecurityConfig extends GlobalMethodSecurityConfiguration {\n\n    Logger logger = LoggerFactory.getLogger(this.getClass());\n    \n    @Autowired\n    private ApplicationContext applicationContext;\n    \n    @Override\n    protected MethodSecurityExpressionHandler createExpressionHandler() {\n        CustomMethodSecurityExpressionHandler expressionHandler = new CustomMethodSecurityExpressionHandler();\n        expressionHandler.setPermissionEvaluator(new CustomPermissionEvaluator());\n        expressionHandler.setApplicationContext(applicationContext);\n        return expressionHandler;\n    }\n    \n}\n</code></pre>\n<p>-- CustomMethodSecurityExpressionHandler class</p>\n<pre><code>public class CustomMethodSecurityExpressionHandler extends DefaultMethodSecurityExpressionHandler {\n    \n    private ApplicationContext applicationContext;\n    private AuthenticationTrustResolver trustResolver = new AuthenticationTrustResolverImpl();\n\n    @Override\n    protected MethodSecurityExpressionOperations createSecurityExpressionRoot(Authentication authentication,\n            MethodInvocation invocation) {\n        CustomMethodSecurityExpressionRoot root = new CustomMethodSecurityExpressionRoot(authentication);\n        root.setPermissionEvaluator(getPermissionEvaluator());\n        root.setTrustResolver(this.trustResolver);\n        root.setRoleHierarchy(getRoleHierarchy());\n        root.setG(this.applicationContext.getBean(CustomTraversalSource.class));\n        return root;\n    }\n    \n    //This setter method will be called from the config class\n    @Override\n    public void setApplicationContext(ApplicationContext applicationContext) {\n        super.setApplicationContext(applicationContext);\n        this.applicationContext=applicationContext;\n    }\n}\n</code></pre>\n<p>And CustomPermissionEvaluator</p>\n<pre><code>@Component\npublic class CustomPermissionEvaluator implements PermissionEvaluator {\n\n    @Override\n    public boolean hasPermission(Authentication authentication, Object targetDomainObject, Object permission) {\n        if ((authentication == null) || (targetDomainObject == null) || !(permission instanceof String)){\n            return false;\n        }\n        String targetType = targetDomainObject.getClass().getSimpleName().toUpperCase();\n        \n        return hasPrivilege(authentication, targetType, permission.toString().toUpperCase());\n    }\n\n    @Override\n    public boolean hasPermission(Authentication authentication, Serializable targetId, String targetType,\n            Object permission) {\n        if ((authentication == null) || (targetType == null) || !(permission instanceof String)) {\n            return false;\n        }\n        return hasPrivilege(authentication, targetType.toUpperCase(), \n          permission.toString().toUpperCase());\n    }\n\n    private boolean hasPrivilege(Authentication authentication, String targetType, String permission) {\n        for (GrantedAuthority grantedAuth : authentication.getAuthorities()) {\n            if (grantedAuth.getAuthority().startsWith(targetType) &amp;&amp; \n              grantedAuth.getAuthority().contains(permission)) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n}\n</code></pre>\n"},{"tags":["java","reactjs","spring-boot","spring-security","basic-authentication"],"answers":[{"tags":[],"owner":{"account_id":11365395,"reputation":17,"user_id":8332452,"display_name":"Mandeep"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667057481,"creation_date":1667057481,"answer_id":74246556,"question_id":74244567,"body_markdown":"If you use some kind of reverse proxy (e.g. nginx) to serve your frontend, you can set the basic authentication parameters there.\r\n\r\ne.g.\r\n\r\n```\r\n location / {\r\n    ...\r\n    proxy_pass http://127.0.0.1:8080;\r\n    proxy_set_header Authorization &quot;Basic TOKEN&quot;;\r\n }\r\n```\r\n\r\nwhere `TOKEN` = `base64(username:password)`","title":"Bypass basic authentication for only frontend application","body":"<p>If you use some kind of reverse proxy (e.g. nginx) to serve your frontend, you can set the basic authentication parameters there.</p>\n<p>e.g.</p>\n<pre><code> location / {\n    ...\n    proxy_pass http://127.0.0.1:8080;\n    proxy_set_header Authorization &quot;Basic TOKEN&quot;;\n }\n</code></pre>\n<p>where <code>TOKEN</code> = <code>base64(username:password)</code></p>\n"}],"owner":{"account_id":10693447,"reputation":878,"user_id":7871511,"display_name":"Rohit Agarwal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":602,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672852233,"creation_date":1667039743,"question_id":74244567,"body_markdown":"I have a **frontend** application written in **React** and a **backend** application written in **SpringBoot**. I have implemented basic authentication in the backend application(for all endpoints) using Spring Security. So now a username and password are required to access every endpoint.\r\n\r\n***Requirement*** :\r\n\r\n1. I don&#39;t want to pass a username and password from the frontend application to access backend application endpoints so basically, I want to bypass basic authentication for my frontend application.\r\n\r\n2. If someone wants to access any endpoint outside my frontend app for example Postman, RestTemplate, etc then a username and password are required.\r\n\r\nFor example -\r\n\r\n*if the request is coming from www.abc.com (frontend app URL) then* basic authentication should be bypassed *for all endpoints but if the request is coming from www.xyz.com, Postman, RestTemplate, or any other client then basic authentication should not be bypassed.*\r\n\r\nI know how to bypass authentication on a specific endpoint within the backend application but I don&#39;t know how to bypass authentication for the requester, I did research over the internet as well but not found something useful. Looking for working code to fulfill the requirement.","title":"Bypass basic authentication for only frontend application","body":"<p>I have a <strong>frontend</strong> application written in <strong>React</strong> and a <strong>backend</strong> application written in <strong>SpringBoot</strong>. I have implemented basic authentication in the backend application(for all endpoints) using Spring Security. So now a username and password are required to access every endpoint.</p>\n<p><em><strong>Requirement</strong></em> :</p>\n<ol>\n<li><p>I don't want to pass a username and password from the frontend application to access backend application endpoints so basically, I want to bypass basic authentication for my frontend application.</p>\n</li>\n<li><p>If someone wants to access any endpoint outside my frontend app for example Postman, RestTemplate, etc then a username and password are required.</p>\n</li>\n</ol>\n<p>For example -</p>\n<p><em>if the request is coming from <a href=\"http://www.abc.com\" rel=\"nofollow noreferrer\">www.abc.com</a> (frontend app URL) then</em> basic authentication should be bypassed <em>for all endpoints but if the request is coming from <a href=\"http://www.xyz.com\" rel=\"nofollow noreferrer\">www.xyz.com</a>, Postman, RestTemplate, or any other client then basic authentication should not be bypassed.</em></p>\n<p>I know how to bypass authentication on a specific endpoint within the backend application but I don't know how to bypass authentication for the requester, I did research over the internet as well but not found something useful. Looking for working code to fulfill the requirement.</p>\n"},{"tags":["java","maven","amazon-s3","wagon"],"comments":[{"owner":{"account_id":2843847,"reputation":55833,"user_id":2442804,"accept_rate":80,"display_name":"luk2302"},"score":0,"creation_date":1633680376,"post_id":69492475,"comment_id":122829201,"body_markdown":"*&quot;WagonTransporterFactory: Unsupported transport protocol s3&quot;* - something does not / no longer support s3 protocol urls","body":"<i>&quot;WagonTransporterFactory: Unsupported transport protocol s3&quot;</i> - something does not / no longer support s3 protocol urls"},{"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"score":0,"creation_date":1633681291,"post_id":69492475,"comment_id":122829531,"body_markdown":"Have you updated anything recently? JDK? Maven? urls ?","body":"Have you updated anything recently? JDK? Maven? urls ?"}],"answers":[{"tags":[],"owner":{"account_id":5539077,"reputation":21,"user_id":4474669,"display_name":"Joe Fair"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672852095,"creation_date":1672852095,"answer_id":75008879,"question_id":69492475,"body_markdown":"Your .yml file has xml in it.\r\n\r\nI added this to the pom.xml and it started working.\r\n\r\n       &lt;extensions&gt;\r\n            &lt;extension&gt;\r\n                &lt;groupId&gt;com.github.seahen&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-s3-wagon&lt;/artifactId&gt;\r\n                &lt;version&gt;1.3.3&lt;/version&gt;\r\n            &lt;/extension&gt;\r\n        &lt;/extensions&gt;\r\n","title":"Why does our Maven S3 wagon config no longer work?","body":"<p>Your .yml file has xml in it.</p>\n<p>I added this to the pom.xml and it started working.</p>\n<pre><code>   &lt;extensions&gt;\n        &lt;extension&gt;\n            &lt;groupId&gt;com.github.seahen&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-s3-wagon&lt;/artifactId&gt;\n            &lt;version&gt;1.3.3&lt;/version&gt;\n        &lt;/extension&gt;\n    &lt;/extensions&gt;\n</code></pre>\n"}],"owner":{"account_id":4130402,"reputation":2606,"user_id":3388491,"accept_rate":46,"display_name":"oschlueter"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":958,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1672852095,"creation_date":1633680178,"question_id":69492475,"body_markdown":"We have a custom Maven repository hosted with AWS S3.\r\nWe&#39;ve been using it for years and haven&#39;t had a problem with it until now.\r\nMy settings are based on our company-internal documentation:\r\n\r\n    $ cat ~/.m2/settings.xml \r\n    \r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;settings xmlns=&quot;http://maven.apache.org/SETTINGS/1.0.0&quot;\r\n            xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n            xsi:schemaLocation=&quot;http://maven.apache.org/SETTINGS/1.0.0\r\n            http://maven.apache.org/xsd/settings-1.0.0.xsd&quot;&gt;\r\n        &lt;servers&gt;\r\n            &lt;server&gt;\r\n                &lt;id&gt;company-s3-release-repo&lt;/id&gt;\r\n                &lt;username&gt;AKxxxxxxxxxxxxxxxx4A&lt;/username&gt;\r\n                &lt;password&gt;sFxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxRI/8xxS&lt;/password&gt;\r\n            &lt;/server&gt;\r\n            &lt;server&gt;\r\n                &lt;id&gt;company-s3-snapshot-repo&lt;/id&gt;\r\n                &lt;username&gt;AKxxxxxxxxxxxxxxxx4A&lt;/username&gt;\r\n                &lt;password&gt;sFxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxRI/8xxS&lt;/password&gt;\r\n            &lt;/server&gt;\r\n        &lt;/servers&gt;\r\n    \r\n        &lt;profiles&gt;\r\n            &lt;profile&gt;\r\n                &lt;id&gt;default&lt;/id&gt;\r\n                &lt;repositories&gt;\r\n                    &lt;repository&gt;\r\n                        &lt;releases&gt;\r\n                            &lt;updatePolicy&gt;always&lt;/updatePolicy&gt;\r\n                            &lt;checksumPolicy&gt;fail&lt;/checksumPolicy&gt;\r\n                        &lt;/releases&gt;\r\n                        &lt;snapshots&gt;\r\n                            &lt;enabled&gt;false&lt;/enabled&gt;\r\n                        &lt;/snapshots&gt;\r\n                        &lt;id&gt;company-s3-release-repo&lt;/id&gt;\r\n                        &lt;name&gt;company AWS Release Repository&lt;/name&gt;\r\n                        &lt;url&gt;s3://maven.company.de/release&lt;/url&gt;\r\n                    &lt;/repository&gt;\r\n                    &lt;repository&gt;\r\n                        &lt;releases&gt;\r\n                            &lt;enabled&gt;false&lt;/enabled&gt;\r\n                        &lt;/releases&gt;\r\n                        &lt;snapshots&gt;\r\n                            &lt;updatePolicy&gt;always&lt;/updatePolicy&gt;\r\n                            &lt;checksumPolicy&gt;fail&lt;/checksumPolicy&gt;\r\n                        &lt;/snapshots&gt;\r\n                        &lt;id&gt;company-s3-snapshot-repo&lt;/id&gt;\r\n                        &lt;name&gt;company AWS Snapshot Repository&lt;/name&gt;\r\n                        &lt;url&gt;s3://maven.company.de/snapshot&lt;/url&gt;\r\n                    &lt;/repository&gt;\r\n                &lt;/repositories&gt;\r\n            &lt;/profile&gt;\r\n        &lt;/profiles&gt;\r\n        &lt;activeProfiles&gt;\r\n            &lt;activeProfile&gt;default&lt;/activeProfile&gt;\r\n        &lt;/activeProfiles&gt;\r\n    &lt;/settings&gt;\r\n\r\nThe wagon is configured via `.mvn/extensions.yml`:\r\n\r\n    $ cat .mvn/extensions.yml\r\n    \r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;extensions&gt;\r\n        &lt;extension&gt;\r\n            &lt;groupId&gt;org.springframework.build&lt;/groupId&gt;\r\n            &lt;artifactId&gt;aws-maven&lt;/artifactId&gt;\r\n            &lt;version&gt;5.0.0.RELEASE&lt;/version&gt;\r\n        &lt;/extension&gt;\r\n    &lt;/extensions&gt;\r\n\r\nTrying to download an artifact from our repo no longer works using `mvn -B dependency:get`:\r\n\r\n```lang-none\r\n$ mvn -B dependency:get -Dtransitive=false -Dartifact=de.company.artifact:artifact:6.0.4\r\n[INFO] Scanning for projects...\r\n[INFO]\r\n[INFO] ------------------&lt; org.apache.maven:standalone-pom &gt;-------------------\r\n[INFO] Building Maven Stub Project (No POM) 1\r\n[INFO] --------------------------------[ pom ]---------------------------------\r\n[INFO]\r\n[INFO] --- maven-dependency-plugin:2.8:get (default-cli) @ standalone-pom ---\r\n[INFO] Resolving de.company.artifact:artifact:jar:6.0.4\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD FAILURE\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  1.265 s\r\n[INFO] Finished at: 2021-10-08T09:37:07+02:00\r\n[INFO] ------------------------------------------------------------------------\r\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-dependency-plugin:2.8:get (default-cli) on project standalone-pom: Couldn&#39;t download artifact: Could not transfer artifact de.company.artifact:artifact:jar:6.0.4 from/to company-s3-release-repo (s3://maven.company.de/release): Cannot access s3://maven.company.de/release with type default using the available connector factories: BasicRepositoryConnectorFactory\r\n[ERROR]   de.company.artifact:artifact:jar:6.0.4\r\n[ERROR]\r\n[ERROR] from the specified remote repositories:\r\n[ERROR]   company-s3-release-repo (s3://maven.company.de/release, releases=true, snapshots=false),\r\n[ERROR]   company-s3-snapshot-repo (s3://maven.company.de/snapshot, releases=false, snapshots=true),\r\n[ERROR]   central (https://repo.maven.apache.org/maven2, releases=true, snapshots=false): Cannot access s3://maven.company.de/release using the registered transporter factories: WagonTransporterFactory: Unsupported transport protocol s3: java.util.NoSuchElementException\r\n[ERROR]       role: org.apache.maven.wagon.Wagon\r\n[ERROR]   roleHint: s3\r\n[ERROR] -&gt; [Help 1]\r\n[ERROR]\r\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n[ERROR]\r\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\r\n```\r\n\r\nI&#39;m using Maven version 3.8.2:\r\n\r\n```lang-none\r\n$ mvn --version\r\nApache Maven 3.8.2 (ea98e05a04480131370aa0c110b8c54cf726c06f)\r\nMaven home: /usr/local/Cellar/maven/3.8.2/libexec\r\nJava version: 17, vendor: Homebrew, runtime: /usr/local/Cellar/openjdk/17/libexec/openjdk.jdk/Contents/Home\r\nDefault locale: en_DE, platform encoding: UTF-8\r\nOS name: &quot;mac os x&quot;, version: &quot;11.6&quot;, arch: &quot;x86_64&quot;, family: &quot;mac&quot;\r\n```\r\n\r\nI tried with alternative wagon configurations in my `.mvn/extensions.yml`, namely `com.allogy.maven.wagon.maven-s3-wagon:1.2.0` as well as `org.zalando.org.springframework.build.aws-maven:5.0.0.RELEASE-zal-2`. \r\nUnfortunately those did not work either with identical error messages. \r\n","title":"Why does our Maven S3 wagon config no longer work?","body":"<p>We have a custom Maven repository hosted with AWS S3.\nWe've been using it for years and haven't had a problem with it until now.\nMy settings are based on our company-internal documentation:</p>\n<pre><code>$ cat ~/.m2/settings.xml \n\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;settings xmlns=&quot;http://maven.apache.org/SETTINGS/1.0.0&quot;\n        xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n        xsi:schemaLocation=&quot;http://maven.apache.org/SETTINGS/1.0.0\n        http://maven.apache.org/xsd/settings-1.0.0.xsd&quot;&gt;\n    &lt;servers&gt;\n        &lt;server&gt;\n            &lt;id&gt;company-s3-release-repo&lt;/id&gt;\n            &lt;username&gt;AKxxxxxxxxxxxxxxxx4A&lt;/username&gt;\n            &lt;password&gt;sFxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxRI/8xxS&lt;/password&gt;\n        &lt;/server&gt;\n        &lt;server&gt;\n            &lt;id&gt;company-s3-snapshot-repo&lt;/id&gt;\n            &lt;username&gt;AKxxxxxxxxxxxxxxxx4A&lt;/username&gt;\n            &lt;password&gt;sFxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxRI/8xxS&lt;/password&gt;\n        &lt;/server&gt;\n    &lt;/servers&gt;\n\n    &lt;profiles&gt;\n        &lt;profile&gt;\n            &lt;id&gt;default&lt;/id&gt;\n            &lt;repositories&gt;\n                &lt;repository&gt;\n                    &lt;releases&gt;\n                        &lt;updatePolicy&gt;always&lt;/updatePolicy&gt;\n                        &lt;checksumPolicy&gt;fail&lt;/checksumPolicy&gt;\n                    &lt;/releases&gt;\n                    &lt;snapshots&gt;\n                        &lt;enabled&gt;false&lt;/enabled&gt;\n                    &lt;/snapshots&gt;\n                    &lt;id&gt;company-s3-release-repo&lt;/id&gt;\n                    &lt;name&gt;company AWS Release Repository&lt;/name&gt;\n                    &lt;url&gt;s3://maven.company.de/release&lt;/url&gt;\n                &lt;/repository&gt;\n                &lt;repository&gt;\n                    &lt;releases&gt;\n                        &lt;enabled&gt;false&lt;/enabled&gt;\n                    &lt;/releases&gt;\n                    &lt;snapshots&gt;\n                        &lt;updatePolicy&gt;always&lt;/updatePolicy&gt;\n                        &lt;checksumPolicy&gt;fail&lt;/checksumPolicy&gt;\n                    &lt;/snapshots&gt;\n                    &lt;id&gt;company-s3-snapshot-repo&lt;/id&gt;\n                    &lt;name&gt;company AWS Snapshot Repository&lt;/name&gt;\n                    &lt;url&gt;s3://maven.company.de/snapshot&lt;/url&gt;\n                &lt;/repository&gt;\n            &lt;/repositories&gt;\n        &lt;/profile&gt;\n    &lt;/profiles&gt;\n    &lt;activeProfiles&gt;\n        &lt;activeProfile&gt;default&lt;/activeProfile&gt;\n    &lt;/activeProfiles&gt;\n&lt;/settings&gt;\n</code></pre>\n<p>The wagon is configured via <code>.mvn/extensions.yml</code>:</p>\n<pre><code>$ cat .mvn/extensions.yml\n\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;extensions&gt;\n    &lt;extension&gt;\n        &lt;groupId&gt;org.springframework.build&lt;/groupId&gt;\n        &lt;artifactId&gt;aws-maven&lt;/artifactId&gt;\n        &lt;version&gt;5.0.0.RELEASE&lt;/version&gt;\n    &lt;/extension&gt;\n&lt;/extensions&gt;\n</code></pre>\n<p>Trying to download an artifact from our repo no longer works using <code>mvn -B dependency:get</code>:</p>\n<pre class=\"lang-none prettyprint-override\"><code>$ mvn -B dependency:get -Dtransitive=false -Dartifact=de.company.artifact:artifact:6.0.4\n[INFO] Scanning for projects...\n[INFO]\n[INFO] ------------------&lt; org.apache.maven:standalone-pom &gt;-------------------\n[INFO] Building Maven Stub Project (No POM) 1\n[INFO] --------------------------------[ pom ]---------------------------------\n[INFO]\n[INFO] --- maven-dependency-plugin:2.8:get (default-cli) @ standalone-pom ---\n[INFO] Resolving de.company.artifact:artifact:jar:6.0.4\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  1.265 s\n[INFO] Finished at: 2021-10-08T09:37:07+02:00\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-dependency-plugin:2.8:get (default-cli) on project standalone-pom: Couldn't download artifact: Could not transfer artifact de.company.artifact:artifact:jar:6.0.4 from/to company-s3-release-repo (s3://maven.company.de/release): Cannot access s3://maven.company.de/release with type default using the available connector factories: BasicRepositoryConnectorFactory\n[ERROR]   de.company.artifact:artifact:jar:6.0.4\n[ERROR]\n[ERROR] from the specified remote repositories:\n[ERROR]   company-s3-release-repo (s3://maven.company.de/release, releases=true, snapshots=false),\n[ERROR]   company-s3-snapshot-repo (s3://maven.company.de/snapshot, releases=false, snapshots=true),\n[ERROR]   central (https://repo.maven.apache.org/maven2, releases=true, snapshots=false): Cannot access s3://maven.company.de/release using the registered transporter factories: WagonTransporterFactory: Unsupported transport protocol s3: java.util.NoSuchElementException\n[ERROR]       role: org.apache.maven.wagon.Wagon\n[ERROR]   roleHint: s3\n[ERROR] -&gt; [Help 1]\n[ERROR]\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR]\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\n</code></pre>\n<p>I'm using Maven version 3.8.2:</p>\n<pre class=\"lang-none prettyprint-override\"><code>$ mvn --version\nApache Maven 3.8.2 (ea98e05a04480131370aa0c110b8c54cf726c06f)\nMaven home: /usr/local/Cellar/maven/3.8.2/libexec\nJava version: 17, vendor: Homebrew, runtime: /usr/local/Cellar/openjdk/17/libexec/openjdk.jdk/Contents/Home\nDefault locale: en_DE, platform encoding: UTF-8\nOS name: &quot;mac os x&quot;, version: &quot;11.6&quot;, arch: &quot;x86_64&quot;, family: &quot;mac&quot;\n</code></pre>\n<p>I tried with alternative wagon configurations in my <code>.mvn/extensions.yml</code>, namely <code>com.allogy.maven.wagon.maven-s3-wagon:1.2.0</code> as well as <code>org.zalando.org.springframework.build.aws-maven:5.0.0.RELEASE-zal-2</code>.\nUnfortunately those did not work either with identical error messages.</p>\n"},{"tags":["java","spring-data-jpa"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1672849365,"post_id":75008264,"comment_id":132366726,"body_markdown":"Every column in a database needs a primary key. We cannot `null` this column. --- What are you actually trying to achieve? Do you want to remove the link from a `Component` to a `Manufacturer`? If so, `component.setManufaturer(null)` should do the trick.","body":"Every column in a database needs a primary key. We cannot <code>null</code> this column. --- What are you actually trying to achieve? Do you want to remove the link from a <code>Component</code> to a <code>Manufacturer</code>? If so, <code>component.setManufaturer(null)</code> should do the trick."}],"answers":[{"tags":[],"owner":{"account_id":2124329,"reputation":612,"user_id":1886904,"display_name":"egeorge"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1672850551,"creation_date":1672850551,"answer_id":75008571,"question_id":75008264,"body_markdown":"You are setting the manufacturer&#39;s id from whatever it was to `null` here:\r\n```Java\r\ncomponent.get().getManufacturer().setId(null);\r\n```\r\n\r\nWhen you call `.getManufacturer()` you are getting the actual entity linked to the record in the *manufacturer* table. When you call `.setId(null)` on that object, you are modifying the manufacturer.\r\n\r\nI suspect what you are *trying* to do is disassociate the component from the manufacturer, so that on the *component* record, the `manufacturerid` is null. To do that, you need this:\r\n```Java\r\ncomponent.get().setManufacturer(null);\r\n```","title":"JPA identifier of an instance was altered from &#39;X&#39; to null","body":"<p>You are setting the manufacturer's id from whatever it was to <code>null</code> here:</p>\n<pre><code>component.get().getManufacturer().setId(null);\n</code></pre>\n<p>When you call <code>.getManufacturer()</code> you are getting the actual entity linked to the record in the <em>manufacturer</em> table. When you call <code>.setId(null)</code> on that object, you are modifying the manufacturer.</p>\n<p>I suspect what you are <em>trying</em> to do is disassociate the component from the manufacturer, so that on the <em>component</em> record, the <code>manufacturerid</code> is null. To do that, you need this:</p>\n<pre><code>component.get().setManufacturer(null);\n</code></pre>\n"}],"owner":{"account_id":19591044,"reputation":81,"user_id":14338059,"display_name":"Nandor Krizbai"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":653,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75008571,"answer_count":1,"score":0,"last_activity_date":1672852093,"creation_date":1672849022,"question_id":75008264,"body_markdown":"## Issue\r\nThis is my first time working with JPA. I have 2 entities: `Component` and `Manufacturer`, which are in `ManyToOne` relation. The Manufacturer&#39;s ID is the foreign key in Component. Only the foreign key should be deleted. When I try to set a component&#39;s ID to null and save it, the following exception occurs: \r\n\r\n```java\r\n&quot;identifier of an instance of spring.model.Manufacturer was altered\r\n from 1 to null; nested exception is org.hibernate.HibernateException: identifier of an \r\ninstance of spring.model.Manufacturer was altered from 1 to null&quot;,\r\n```\r\n## ER Diagram\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/794AK.png\r\n\r\n## Models\r\n\r\n### BaseEntity\r\n```java\r\n@Data\r\n@MappedSuperclass\r\npublic class BaseEntity implements Serializable {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    protected Long id;\r\n}\r\n```\r\n\r\n### Component\r\n```java\r\n@Data\r\n@EqualsAndHashCode(callSuper = true)\r\n@ToString(callSuper = true)\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Entity\r\n@Table(name = &quot;Components&quot;)\r\npublic class Component extends BaseEntity {\r\n\r\n    @Column(nullable = false)\r\n    private String type;\r\n\r\n    @Column(nullable = false)\r\n    private String name;\r\n\r\n    @Column(nullable = false)\r\n    private Double price;\r\n\r\n    @Column(nullable = false, length = 2048)\r\n    private String description;\r\n\r\n    @Column(nullable = false)\r\n    private Integer rating;\r\n\r\n    @ManyToOne()\r\n    @JoinColumn(name = &quot;manufacturerId&quot;)\r\n    private Manufacturer manufacturer;\r\n}\r\n```\r\n\r\n### Manufacturer\r\n```java\r\n@Data\r\n@EqualsAndHashCode(callSuper = true)\r\n@ToString(callSuper = true)\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Entity\r\n@Table(name = &quot;Manufacturers&quot;)\r\npublic class Manufacturer extends BaseEntity {\r\n\r\n    @Column(nullable = false, unique = true)\r\n    private String name;\r\n\r\n    @Column(nullable = false)\r\n    private Integer foundingYear;\r\n\r\n    @Column(nullable = false)\r\n    private Double revenue;\r\n\r\n    @OneToMany(mappedBy = &quot;manufacturer&quot;, cascade = CascadeType.ALL, fetch = FetchType.LAZY)\r\n    private List&lt;Component&gt; components = new ArrayList&lt;&gt;();\r\n}\r\n```\r\n\r\n## Current code\r\n\r\n```java\r\n@DeleteMapping\r\n@ResponseStatus(HttpStatus.NO_CONTENT)\r\npublic void deleteComponentManufacturer(@PathVariable(&quot;componentId&quot;) Long id) {\r\n    Optional&lt;Component&gt; component = componentDao.findById(id);\r\n    if (component.isEmpty()) {\r\n        throw new BadRequestException(&quot;Could not delete component&#39;s (ID: &quot; + id + &quot;) manufacturer&quot;);\r\n    }\r\n    if (component.get().getManufacturer() == null) {\r\n        throw new BadRequestException(&quot;Component with ID: &quot; + id + &quot; has no manufacturer&quot;);\r\n    }\r\n    component.get().getManufacturer().setId(null);\r\n     componentDao.save(component.get());              // Error is thrown here\r\n}\r\n```","title":"JPA identifier of an instance was altered from &#39;X&#39; to null","body":"<h2>Issue</h2>\n<p>This is my first time working with JPA. I have 2 entities: <code>Component</code> and <code>Manufacturer</code>, which are in <code>ManyToOne</code> relation. The Manufacturer's ID is the foreign key in Component. Only the foreign key should be deleted. When I try to set a component's ID to null and save it, the following exception occurs:</p>\n<pre class=\"lang-java prettyprint-override\"><code>&quot;identifier of an instance of spring.model.Manufacturer was altered\n from 1 to null; nested exception is org.hibernate.HibernateException: identifier of an \ninstance of spring.model.Manufacturer was altered from 1 to null&quot;,\n</code></pre>\n<h2>ER Diagram</h2>\n<p><a href=\"https://i.stack.imgur.com/794AK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/794AK.png\" alt=\"enter image description here\" /></a></p>\n<h2>Models</h2>\n<h3>BaseEntity</h3>\n<pre class=\"lang-java prettyprint-override\"><code>@Data\n@MappedSuperclass\npublic class BaseEntity implements Serializable {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    protected Long id;\n}\n</code></pre>\n<h3>Component</h3>\n<pre class=\"lang-java prettyprint-override\"><code>@Data\n@EqualsAndHashCode(callSuper = true)\n@ToString(callSuper = true)\n@NoArgsConstructor\n@AllArgsConstructor\n@Entity\n@Table(name = &quot;Components&quot;)\npublic class Component extends BaseEntity {\n\n    @Column(nullable = false)\n    private String type;\n\n    @Column(nullable = false)\n    private String name;\n\n    @Column(nullable = false)\n    private Double price;\n\n    @Column(nullable = false, length = 2048)\n    private String description;\n\n    @Column(nullable = false)\n    private Integer rating;\n\n    @ManyToOne()\n    @JoinColumn(name = &quot;manufacturerId&quot;)\n    private Manufacturer manufacturer;\n}\n</code></pre>\n<h3>Manufacturer</h3>\n<pre class=\"lang-java prettyprint-override\"><code>@Data\n@EqualsAndHashCode(callSuper = true)\n@ToString(callSuper = true)\n@NoArgsConstructor\n@AllArgsConstructor\n@Entity\n@Table(name = &quot;Manufacturers&quot;)\npublic class Manufacturer extends BaseEntity {\n\n    @Column(nullable = false, unique = true)\n    private String name;\n\n    @Column(nullable = false)\n    private Integer foundingYear;\n\n    @Column(nullable = false)\n    private Double revenue;\n\n    @OneToMany(mappedBy = &quot;manufacturer&quot;, cascade = CascadeType.ALL, fetch = FetchType.LAZY)\n    private List&lt;Component&gt; components = new ArrayList&lt;&gt;();\n}\n</code></pre>\n<h2>Current code</h2>\n<pre class=\"lang-java prettyprint-override\"><code>@DeleteMapping\n@ResponseStatus(HttpStatus.NO_CONTENT)\npublic void deleteComponentManufacturer(@PathVariable(&quot;componentId&quot;) Long id) {\n    Optional&lt;Component&gt; component = componentDao.findById(id);\n    if (component.isEmpty()) {\n        throw new BadRequestException(&quot;Could not delete component's (ID: &quot; + id + &quot;) manufacturer&quot;);\n    }\n    if (component.get().getManufacturer() == null) {\n        throw new BadRequestException(&quot;Component with ID: &quot; + id + &quot; has no manufacturer&quot;);\n    }\n    component.get().getManufacturer().setId(null);\n     componentDao.save(component.get());              // Error is thrown here\n}\n</code></pre>\n"},{"tags":["java","driver","mysql-connector"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1672844930,"post_id":75007327,"comment_id":132364940,"body_markdown":"*javac -cp /usr/share/java/mysql-connector-j-8.0.31.jar TestApplication.java* That&#39;s unnecessary at compile time. Only necessary at runtime. Get used to using try-with-resources for your java.sql objects","body":"<i>javac -cp /usr/share/java/mysql-connector-j-8.0.31.jar TestApplication.java</i> That&#39;s unnecessary at compile time. Only necessary at runtime. Get used to using try-with-resources for your java.sql objects"},{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":0,"creation_date":1672845067,"post_id":75007327,"comment_id":132365012,"body_markdown":"Check the command you use to execute the code. You did not share it.","body":"Check the command you use to execute the code. You did not share it."},{"owner":{"account_id":5218051,"reputation":1,"user_id":12063634,"display_name":"Jesse Brent Coats"},"score":0,"creation_date":1672847339,"post_id":75007327,"comment_id":132365991,"body_markdown":"mysql-connector-j-8.0.31.jar is the mysql-connector.jar","body":"mysql-connector-j-8.0.31.jar is the mysql-connector.jar"},{"owner":{"account_id":5218051,"reputation":1,"user_id":12063634,"display_name":"Jesse Brent Coats"},"score":0,"creation_date":1672847372,"post_id":75007327,"comment_id":132366001,"body_markdown":"The line is use to execute is java TestApplication.","body":"The line is use to execute is java TestApplication."},{"owner":{"account_id":5218051,"reputation":1,"user_id":12063634,"display_name":"Jesse Brent Coats"},"score":0,"creation_date":1672847804,"post_id":75007327,"comment_id":132366184,"body_markdown":"java -cp /usr/share/java/mysql-connector-j-8.0.31.jar TestApplication causes the following error: Error: Could not find or load main class TestApplication\nCaused by: java.lang.ClassNotFoundException: TestApplication","body":"java -cp /usr/share/java/mysql-connector-j-8.0.31.jar TestApplication causes the following error: Error: Could not find or load main class TestApplication Caused by: java.lang.ClassNotFoundException: TestApplication"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1672848056,"post_id":75007327,"comment_id":132366305,"body_markdown":"Your classpath doesn&#39;t include your own code","body":"Your classpath doesn&#39;t include your own code"},{"owner":{"account_id":5218051,"reputation":1,"user_id":12063634,"display_name":"Jesse Brent Coats"},"score":0,"creation_date":1672849057,"post_id":75007327,"comment_id":132366601,"body_markdown":"adding my own code to the class path doesn&#39;t make a difference.","body":"adding my own code to the class path doesn&#39;t make a difference."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1672849526,"post_id":75007327,"comment_id":132366779,"body_markdown":"Show us what you did","body":"Show us what you did"},{"owner":{"account_id":5218051,"reputation":1,"user_id":12063634,"display_name":"Jesse Brent Coats"},"score":0,"creation_date":1672850283,"post_id":75007327,"comment_id":132367076,"body_markdown":"java -cp /home/opiejbc1/java/TestApplication:/usr/share/java/mysql-connector-j-8.0.31.jar TestApplication.class causes \nError: Could not find or load main class TestApplication.class\nCaused by: java.lang.ClassNotFoundException: TestApplication.class","body":"java -cp /home/opiejbc1/java/TestApplication:/usr/share/java/mysql-co&zwnj;&#8203;nnector-j-8.0.31.jar TestApplication.class causes  Error: Could not find or load main class TestApplication.class Caused by: java.lang.ClassNotFoundException: TestApplication.class"},{"owner":{"account_id":5218051,"reputation":1,"user_id":12063634,"display_name":"Jesse Brent Coats"},"score":0,"creation_date":1672850346,"post_id":75007327,"comment_id":132367099,"body_markdown":"java -cp /home/opiejbc1/java/TestApplication.class:/usr/share/java/mysql-connector-j-8.0.31.jar TestApplication.class also causes                                                                                          Error: Could not find or load main class TestApplication.class\nCaused by: java.lang.ClassNotFoundException: TestApplication.class","body":"java -cp /home/opiejbc1/java/TestApplication.class:/usr/share/java/my&zwnj;&#8203;sql-connector-j-8.0.&zwnj;&#8203;31.jar TestApplication.class also causes                                                                                          Error: Could not find or load main class TestApplication.class Caused by: java.lang.ClassNotFoundException: TestApplication.class"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1672850549,"post_id":75007327,"comment_id":132367167,"body_markdown":"That&#39;s not a classpath. In which directory are your classes being placed? Does your code use packages?","body":"That&#39;s not a classpath. In which directory are your classes being placed? Does your code use packages?"},{"owner":{"account_id":5218051,"reputation":1,"user_id":12063634,"display_name":"Jesse Brent Coats"},"score":0,"creation_date":1672850702,"post_id":75007327,"comment_id":132367229,"body_markdown":"I don&#39;t use a package. What do you mean by &quot;That&#39;s not a  classpath.&quot;","body":"I don&#39;t use a package. What do you mean by &quot;That&#39;s not a  classpath.&quot;"},{"owner":{"account_id":5218051,"reputation":1,"user_id":12063634,"display_name":"Jesse Brent Coats"},"score":0,"creation_date":1672851007,"post_id":75007327,"comment_id":132367347,"body_markdown":"My classes are in my current directory: /home/opiejbc1/java","body":"My classes are in my current directory: /home/opiejbc1/java"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1672851038,"post_id":75007327,"comment_id":132367361,"body_markdown":"If that&#39;s the path where TestApplication.class is, then your classpath is: `java -cp /home/opiejbc1/java:/usr/share/java/mysql-connector-j-8.0.31.jar TestApplication`","body":"If that&#39;s the path where TestApplication.class is, then your classpath is: <code>java -cp &#47;home&#47;opiejbc1&#47;java:&#47;usr&#47;share&#47;java&#47;mysql-connector-j-8.0.31&zwnj;&#8203;.jar TestApplication</code>"},{"owner":{"account_id":5218051,"reputation":1,"user_id":12063634,"display_name":"Jesse Brent Coats"},"score":0,"creation_date":1672851206,"post_id":75007327,"comment_id":132367418,"body_markdown":"Tried that with the same result.","body":"Tried that with the same result."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1672851300,"post_id":75007327,"comment_id":132367466,"body_markdown":"Please post output of `ls -l /home/opiejbc1/java/TestApplication.class`","body":"Please post output of <code>ls -l &#47;home&#47;opiejbc1&#47;java&#47;TestApplication.class</code>"}],"answers":[{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672851857,"creation_date":1672844776,"answer_id":75007386,"question_id":75007327,"body_markdown":"Ensure your [mysql connector jar][1] is on your classpath when running the code.\r\n\r\n**Edit considering all the comments:**\r\n\r\nIf `java TestApplication` delivers `java.lang.ClassNotFoundException: com.mysql.cj.jdbc.Driver`, then try this from the same directory:\r\n\r\n    java -cp /home/opiejbc1/java:/usr/share/java/mysql-connector.jar:. TestApplication\r\n\r\nNote the `:.` in the classpath.\r\n\r\n  [1]: https://cdn.mysql.com//Downloads/Connector-J/mysql-connector-j-8.0.31.zip","title":"Error java.sql.SQLException: No suitable driver found for jdbc:mysql://localhost:3306/opiejbc1","body":"<p>Ensure your <a href=\"https://cdn.mysql.com//Downloads/Connector-J/mysql-connector-j-8.0.31.zip\" rel=\"nofollow noreferrer\">mysql connector jar</a> is on your classpath when running the code.</p>\n<p><strong>Edit considering all the comments:</strong></p>\n<p>If <code>java TestApplication</code> delivers <code>java.lang.ClassNotFoundException: com.mysql.cj.jdbc.Driver</code>, then try this from the same directory:</p>\n<pre><code>java -cp /home/opiejbc1/java:/usr/share/java/mysql-connector.jar:. TestApplication\n</code></pre>\n<p>Note the <code>:.</code> in the classpath.</p>\n"}],"owner":{"account_id":5218051,"reputation":1,"user_id":12063634,"display_name":"Jesse Brent Coats"},"comment_count":16,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":190,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672851857,"creation_date":1672844521,"question_id":75007327,"body_markdown":"I&#39;m having trouble accessing MySql from Java.\r\n\r\nI&#39;m using:\r\n\r\n&gt;  **Operating system**: Ubuntu 20.04.5 LTS (GNU/Linux\r\n&gt; 5.15.79.1-microsoft-standard-WSL2 x86_64)\r\n&gt; \r\n&gt;  **mysql**  Ver 8.0.31-0ubuntu0.20.04.2 for Linux on x86_64 ((Ubuntu))\r\n&gt; \r\n&gt;  javac 11.0.17\r\n\r\nI use the following compilation line:\r\n\r\n```bash\r\n javac -cp /usr/share/java/mysql-connector-j-8.0.31.jar TestApplication.java\r\n\r\nmysql-connector-j-8.0.31.jar is the mysql-connector.jar\r\n\r\n```\r\nI use the following line to execute:\r\n\r\n java TestApplication\r\n\r\nOne of the lines produced by jar `tf /usr/share/java/mysql-connector-j-8.0.31.jar`\r\n\r\n com/mysql/cj/jdbc/Driver.class\r\n\r\nMy source code:\r\n```java\r\n    import java.sql.*;\r\n\r\n    public class TestApplication {\r\n       static final String DB_URL = &quot;jdbc:mysql://localhost:3306/opiejbc1&quot;;\r\n       static final String USER = &quot;opiejbc1&quot;;\r\n       static final String PWD = &quot;Linux@Me1&quot;;\r\n       static final String QUERY = &quot;SELECT * FROM Test1&quot;;\r\n       static final String DRIVER = &quot;com.mysql.cj.jdbc.Driver&quot;;\r\n   \r\n       public static void main(String[] args) {\r\n          // Open a connection\r\n          try {\r\n             Connection conn = DriverManager.getConnection(DB_URL, USER, PWD);\r\n             Statement stmt = conn.createStatement();\r\n             ResultSet rs = stmt.executeQuery(QUERY);\r\n             // Extract data from result set\r\n             while (rs.next()) {\r\n                // Retrieve by column name\r\n                System.out.print(&quot;Name: &quot; + rs.getInt(&quot;Name&quot;));\r\n                System.out.print(&quot;, Phone: &quot; + rs.getInt(&quot;Phone&quot;));\r\n             }\r\n          } catch (SQLException e) {\r\n             e.printStackTrace();\r\n          }   \r\n       }\r\n    }\r\n```\r\nOn execution I received:\r\n```java\r\n java.sql.SQLException: No suitable driver found for jdbc:mysql://localhost:3306/opiejbc1\r\n```\r\nI&#39;ve also tried the following:\r\n```java\r\n    import java.sql.*;\r\n\r\n    public class TestApplication {\r\n       static final String DB_URL = &quot;jdbc:mysql://localhost:3306/opiejbc1&quot;;\r\n       static final String USER = &quot;opiejbc1&quot;;\r\n       static final String PWD = &quot;Linux@Me1&quot;;\r\n       static final String QUERY = &quot;SELECT * FROM Test1&quot;;\r\n       static final String DRIVER = &quot;com.mysql.cj.jdbc.Driver&quot;;\r\n   \r\n       public static void main(String[] args) {\r\n           // Open a connection\r\n          try {\r\n             Class.forName(DRIVER);\r\n             Connection conn = DriverManager.getConnection(DB_URL, USER, PWD);\r\n             Statement stmt = conn.createStatement();\r\n             ResultSet rs = stmt.executeQuery(QUERY);\r\n             // Extract data from result set\r\n             while (rs.next()) {\r\n                // Retrieve by column name\r\n                System.out.print(&quot;Name: &quot; + rs.getInt(&quot;Name&quot;));\r\n                System.out.print(&quot;, Phone: &quot; + rs.getInt(&quot;Phone&quot;));\r\n             }\r\n          } catch (SQLException e) {\r\n             e.printStackTrace();\r\n          } catch (ClassNotFoundException e) {\r\n             e.printStackTrace();\r\n          }\r\n        }\r\n    }\r\n```\r\nOn execution I receive the:\r\n```java\r\n java.lang.ClassNotFoundException: com.mysql.cj.jdbc.Driver\r\n```\r\nWhat am I doing wrong?\r\n","title":"Error java.sql.SQLException: No suitable driver found for jdbc:mysql://localhost:3306/opiejbc1","body":"<p>I'm having trouble accessing MySql from Java.</p>\n<p>I'm using:</p>\n<blockquote>\n<p><strong>Operating system</strong>: Ubuntu 20.04.5 LTS (GNU/Linux\n5.15.79.1-microsoft-standard-WSL2 x86_64)</p>\n<p><strong>mysql</strong>  Ver 8.0.31-0ubuntu0.20.04.2 for Linux on x86_64 ((Ubuntu))</p>\n<p>javac 11.0.17</p>\n</blockquote>\n<p>I use the following compilation line:</p>\n<pre class=\"lang-bash prettyprint-override\"><code> javac -cp /usr/share/java/mysql-connector-j-8.0.31.jar TestApplication.java\n\nmysql-connector-j-8.0.31.jar is the mysql-connector.jar\n\n</code></pre>\n<p>I use the following line to execute:</p>\n<p>java TestApplication</p>\n<p>One of the lines produced by jar <code>tf /usr/share/java/mysql-connector-j-8.0.31.jar</code></p>\n<p>com/mysql/cj/jdbc/Driver.class</p>\n<p>My source code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    import java.sql.*;\n\n    public class TestApplication {\n       static final String DB_URL = &quot;jdbc:mysql://localhost:3306/opiejbc1&quot;;\n       static final String USER = &quot;opiejbc1&quot;;\n       static final String PWD = &quot;Linux@Me1&quot;;\n       static final String QUERY = &quot;SELECT * FROM Test1&quot;;\n       static final String DRIVER = &quot;com.mysql.cj.jdbc.Driver&quot;;\n   \n       public static void main(String[] args) {\n          // Open a connection\n          try {\n             Connection conn = DriverManager.getConnection(DB_URL, USER, PWD);\n             Statement stmt = conn.createStatement();\n             ResultSet rs = stmt.executeQuery(QUERY);\n             // Extract data from result set\n             while (rs.next()) {\n                // Retrieve by column name\n                System.out.print(&quot;Name: &quot; + rs.getInt(&quot;Name&quot;));\n                System.out.print(&quot;, Phone: &quot; + rs.getInt(&quot;Phone&quot;));\n             }\n          } catch (SQLException e) {\n             e.printStackTrace();\n          }   \n       }\n    }\n</code></pre>\n<p>On execution I received:</p>\n<pre class=\"lang-java prettyprint-override\"><code> java.sql.SQLException: No suitable driver found for jdbc:mysql://localhost:3306/opiejbc1\n</code></pre>\n<p>I've also tried the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    import java.sql.*;\n\n    public class TestApplication {\n       static final String DB_URL = &quot;jdbc:mysql://localhost:3306/opiejbc1&quot;;\n       static final String USER = &quot;opiejbc1&quot;;\n       static final String PWD = &quot;Linux@Me1&quot;;\n       static final String QUERY = &quot;SELECT * FROM Test1&quot;;\n       static final String DRIVER = &quot;com.mysql.cj.jdbc.Driver&quot;;\n   \n       public static void main(String[] args) {\n           // Open a connection\n          try {\n             Class.forName(DRIVER);\n             Connection conn = DriverManager.getConnection(DB_URL, USER, PWD);\n             Statement stmt = conn.createStatement();\n             ResultSet rs = stmt.executeQuery(QUERY);\n             // Extract data from result set\n             while (rs.next()) {\n                // Retrieve by column name\n                System.out.print(&quot;Name: &quot; + rs.getInt(&quot;Name&quot;));\n                System.out.print(&quot;, Phone: &quot; + rs.getInt(&quot;Phone&quot;));\n             }\n          } catch (SQLException e) {\n             e.printStackTrace();\n          } catch (ClassNotFoundException e) {\n             e.printStackTrace();\n          }\n        }\n    }\n</code></pre>\n<p>On execution I receive the:</p>\n<pre class=\"lang-java prettyprint-override\"><code> java.lang.ClassNotFoundException: com.mysql.cj.jdbc.Driver\n</code></pre>\n<p>What am I doing wrong?</p>\n"},{"tags":["java","postgresql","grpc"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1672835804,"post_id":75000504,"comment_id":132361529,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":5967476,"reputation":24635,"user_id":4690866,"display_name":"Eric Anderson"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672851688,"creation_date":1672851688,"answer_id":75008798,"question_id":75000504,"body_markdown":"Use `io.grpc.Context` to propagate the value to the service implementation, using `Contexts.interceptCall()`. The [jwt-auth example](https://github.com/grpc/grpc-java/blob/f4cda008ee1c0e10de8575e1b4be6841d5364b72/examples/example-jwt-auth/src/main/java/io/grpc/examples/jwtauth/JwtServerInterceptor.java#L64-L66) does this as well as some other StackOverflow [questions](https://stackoverflow.com/q/44773152/4690866) [and](https://stackoverflow.com/a/71473852/4690866) [answers](https://stackoverflow.com/a/40113309/4690866).\r\n\r\nEssentially, you just create a new Context with the information you want to communicate, and use `Contexts.interceptCall()` to make it available to the service as a ThreadLocal. If your service does processing on another thread, you need to either propagate the Context to that other thread or save the value ahead-of-time.\r\n\r\n```java\r\npublic class AddToContextInterceptor implements ServerInterceptor {\r\n  // Context keys use reference equality, so the consumer of the value\r\n  // must use this specific object.\r\n  public static final Context.Key&lt;MyObject&gt; MY_KEY = Context.key(&quot;MY_KEY&quot;);\r\n\r\n  @Override\r\n  public &lt;ReqT,RespT&gt; ServerCall.Listener&lt;ReqT&gt; interceptCall(\r\n      ServerCall&lt;ReqT,RespT&gt; call, Metadata headers,\r\n      ServerCallHandler&lt;ReqT,RespT&gt; next) {\r\n    Context newContext =\r\n        Context.current().withValue(MY_KEY, metadata.get(SOME_KEY));\r\n    return Contexts.interceptCall(newContext, call, headers, next);\r\n  }\r\n}\r\n\r\n// In the service:\r\nMyObject o = AddToContextInterceptor.MY_KEY.get();\r\n```","title":"The gRPC server obtains the request header","body":"<p>Use <code>io.grpc.Context</code> to propagate the value to the service implementation, using <code>Contexts.interceptCall()</code>. The <a href=\"https://github.com/grpc/grpc-java/blob/f4cda008ee1c0e10de8575e1b4be6841d5364b72/examples/example-jwt-auth/src/main/java/io/grpc/examples/jwtauth/JwtServerInterceptor.java#L64-L66\" rel=\"nofollow noreferrer\">jwt-auth example</a> does this as well as some other StackOverflow <a href=\"https://stackoverflow.com/q/44773152/4690866\">questions</a> <a href=\"https://stackoverflow.com/a/71473852/4690866\">and</a> <a href=\"https://stackoverflow.com/a/40113309/4690866\">answers</a>.</p>\n<p>Essentially, you just create a new Context with the information you want to communicate, and use <code>Contexts.interceptCall()</code> to make it available to the service as a ThreadLocal. If your service does processing on another thread, you need to either propagate the Context to that other thread or save the value ahead-of-time.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class AddToContextInterceptor implements ServerInterceptor {\n  // Context keys use reference equality, so the consumer of the value\n  // must use this specific object.\n  public static final Context.Key&lt;MyObject&gt; MY_KEY = Context.key(&quot;MY_KEY&quot;);\n\n  @Override\n  public &lt;ReqT,RespT&gt; ServerCall.Listener&lt;ReqT&gt; interceptCall(\n      ServerCall&lt;ReqT,RespT&gt; call, Metadata headers,\n      ServerCallHandler&lt;ReqT,RespT&gt; next) {\n    Context newContext =\n        Context.current().withValue(MY_KEY, metadata.get(SOME_KEY));\n    return Contexts.interceptCall(newContext, call, headers, next);\n  }\n}\n\n// In the service:\nMyObject o = AddToContextInterceptor.MY_KEY.get();\n</code></pre>\n"}],"owner":{"account_id":27426414,"reputation":1,"user_id":20923830,"display_name":"Java_Baby"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":975,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672851688,"creation_date":1672800563,"question_id":75000504,"body_markdown":" I build the server of Java gRPC and want to obtain the data transmitted by the client through the request header. At present, I can only use the ServerInterceptor class to intercept the parsing request header Metadata, but I want to obtain it during service operation. What is the solution?\r\n\r\nI tried to access and transfer data through redis, but the gRPC I wrote is multi-data source, the same client request has multiple, if different clients to me a request, but they carry different request headers, other interface names and parameters are the same, It&#39;s possible that the request header of a later request will overwrite the redis result of the previous request header, so I can&#39;t guarantee the consistency of request and request header!\r\n\r\n ","title":"The gRPC server obtains the request header","body":"<p>I build the server of Java gRPC and want to obtain the data transmitted by the client through the request header. At present, I can only use the ServerInterceptor class to intercept the parsing request header Metadata, but I want to obtain it during service operation. What is the solution?</p>\n<p>I tried to access and transfer data through redis, but the gRPC I wrote is multi-data source, the same client request has multiple, if different clients to me a request, but they carry different request headers, other interface names and parameters are the same, It's possible that the request header of a later request will overwrite the redis result of the previous request header, so I can't guarantee the consistency of request and request header!</p>\n"},{"tags":["java","rest","authentication","groovy","camunda"],"owner":{"account_id":13142746,"reputation":1,"user_id":9493787,"display_name":"Hi_im L&#233;&#233;mo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672851339,"creation_date":1672848783,"question_id":75008214,"body_markdown":"Basically i&#39;m new to groovy, and i&#39;m trying to use it to add a device to &quot;netbox&quot; using API, i tried some GET requests that needed authentication and they worked fine, but i couldn&#39;t make any POST request work, i&#39;m always getting 403 no matter what method i try to authenticate Basic using creds or using API Token.\r\n\r\nHere&#39;s the code i wrote for the POST request :\r\n\r\n```\r\ndef url = &quot;http://192.168.12.89:8000/api/dcim/devices&quot;\r\ndef connection = url.toURL().openConnection()\r\ndef message = &#39;{&quot;name&quot;:&quot;R4&quot;,&quot;device_type&quot;:&quot;1&quot;,&quot;device_role&quot;:&quot;1&quot;,&quot;site&quot;:&quot;1&quot;}&#39;\r\nconnection.setRequestMethod(&quot;POST&quot;)\r\nconnection.setDoOutput(true)\r\nconnection.setDoInput(true)\r\nconnection.addRequestProperty(&quot;Accept&quot;, &quot;application/json;charset=UTF-8&quot;)\r\nconnection.addRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;)\r\n\r\n//def auth = &quot;admin:admin&quot;.bytes.encodeBase64()\r\n//connection.setRequestProperty(&quot;Authorization&quot;, &quot;Basic ${auth}&quot;)\r\nconnection.setRequestProperty(&quot;Authorization&quot;, &quot;Token 63091d94b00d40e9e0a4e1286e181c09deca6e89&quot;)\r\n\r\n\r\n\r\nconnection.getOutputStream().write(message.getBytes(&quot;UTF-8&quot;))\r\n\r\ndef responseCode = connection.getResponseCode()\r\nInputStream response = null\r\nprintln &quot;${responseCode}&quot;\r\nif (responseCode != 200) {\r\n    response = connection.getErrorStream()\r\n} else {\r\n    response = connection.getInputStream()\r\n}\r\n\r\ndef responseBody = response?.text\r\nresponse?.close()\r\nprintln responseBody\r\n\r\n```\r\n\r\n\r\nMy API key works fine with the get method and it has the write permissions included, also tried a python POST request works perfectly fine, so i guess the problem is in my groovy coding.\r\n\r\nI hope i can get a bit of help cause i&#39;ve been trying for two days :x\r\nThank you :x","title":"Can&#39;t authenticate using REST POST method","body":"<p>Basically i'm new to groovy, and i'm trying to use it to add a device to &quot;netbox&quot; using API, i tried some GET requests that needed authentication and they worked fine, but i couldn't make any POST request work, i'm always getting 403 no matter what method i try to authenticate Basic using creds or using API Token.</p>\n<p>Here's the code i wrote for the POST request :</p>\n<pre><code>def url = &quot;http://192.168.12.89:8000/api/dcim/devices&quot;\ndef connection = url.toURL().openConnection()\ndef message = '{&quot;name&quot;:&quot;R4&quot;,&quot;device_type&quot;:&quot;1&quot;,&quot;device_role&quot;:&quot;1&quot;,&quot;site&quot;:&quot;1&quot;}'\nconnection.setRequestMethod(&quot;POST&quot;)\nconnection.setDoOutput(true)\nconnection.setDoInput(true)\nconnection.addRequestProperty(&quot;Accept&quot;, &quot;application/json;charset=UTF-8&quot;)\nconnection.addRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;)\n\n//def auth = &quot;admin:admin&quot;.bytes.encodeBase64()\n//connection.setRequestProperty(&quot;Authorization&quot;, &quot;Basic ${auth}&quot;)\nconnection.setRequestProperty(&quot;Authorization&quot;, &quot;Token 63091d94b00d40e9e0a4e1286e181c09deca6e89&quot;)\n\n\n\nconnection.getOutputStream().write(message.getBytes(&quot;UTF-8&quot;))\n\ndef responseCode = connection.getResponseCode()\nInputStream response = null\nprintln &quot;${responseCode}&quot;\nif (responseCode != 200) {\n    response = connection.getErrorStream()\n} else {\n    response = connection.getInputStream()\n}\n\ndef responseBody = response?.text\nresponse?.close()\nprintln responseBody\n\n</code></pre>\n<p>My API key works fine with the get method and it has the write permissions included, also tried a python POST request works perfectly fine, so i guess the problem is in my groovy coding.</p>\n<p>I hope i can get a bit of help cause i've been trying for two days :x\nThank you :x</p>\n"},{"tags":["java","spring","maven","tomcat","catalina"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":2,"creation_date":1490604314,"post_id":43041695,"comment_id":73167842,"body_markdown":"You have an incompatible `servlet-api.jar` in your dependency list `javax.servlet.ServletContext.getVirtualServerName()Ljava/lang/String;`. I think you have Version 3.x but you need 2.1","body":"You have an incompatible <code>servlet-api.jar</code> in your dependency list <code>javax.servlet.ServletContext.getVirtualServerName()Ljava&#47;lan&zwnj;&#8203;g&#47;String;</code>. I think you have Version 3.x but you need 2.1"},{"owner":{"account_id":2731132,"reputation":1212,"user_id":2354908,"accept_rate":45,"display_name":"Betafish"},"score":0,"creation_date":1490606826,"post_id":43041695,"comment_id":73169593,"body_markdown":"I use another library which uses **javax.servlet** internally, which is of version 3.0.1. I have modified my pom.xml file to `&lt;dependency&gt;\n    &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n    &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;\n    &lt;version&gt;2.2&lt;/version&gt;\n&lt;/dependency&gt; ` and also added to the library `&lt;exclusions&gt;\n      \t&lt;exclusion&gt;\n      \t\t&lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n      \t\t&lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\n      \t&lt;/exclusion&gt;`. But, the error is still the same.","body":"I use another library which uses <b>javax.servlet</b> internally, which is of version 3.0.1. I have modified my pom.xml file to <code>&lt;dependency&gt;     &lt;groupId&gt;javax.servlet&lt;&#47;groupId&gt;     &lt;artifactId&gt;servlet-api&lt;&#47;artifactId&gt;     &lt;version&gt;2.2&lt;&#47;version&gt; &lt;&#47;dependency&gt; </code> and also added to the library <code>&lt;exclusions&gt;       \t&lt;exclusion&gt;       \t\t&lt;groupId&gt;javax.servlet&lt;&#47;groupId&gt;       \t\t&lt;artifactId&gt;javax.servlet-api&lt;&#47;artifactId&gt;       \t&lt;&#47;exclusion&gt;</code>. But, the error is still the same."},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1490606877,"post_id":43041695,"comment_id":73169631,"body_markdown":"Look into the dependencies which lib is used","body":"Look into the dependencies which lib is used"}],"answers":[{"tags":[],"owner":{"account_id":2529186,"reputation":3484,"user_id":2197837,"accept_rate":25,"display_name":"Praneeth Ramesh"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1490647479,"creation_date":1490647479,"answer_id":43056178,"question_id":43041695,"body_markdown":"Looks like you have an incompatible version of Servlet API in ur classpath.\r\nThis could have been as a dependencies to Jersey jars.\r\nTry pulling jersey starter from Spring boot starters.\r\n\r\n    org.springframework.boot : spring-boot-starter-jersey\r\n\r\nThis will bring the right version into your classpath.\r\n","title":"Failed to start component [StandardEngine[Tomcat].StandardHost[localhost].TomcatEmbeddedContext[]]","body":"<p>Looks like you have an incompatible version of Servlet API in ur classpath.\nThis could have been as a dependencies to Jersey jars.\nTry pulling jersey starter from Spring boot starters.</p>\n\n<pre><code>org.springframework.boot : spring-boot-starter-jersey\n</code></pre>\n\n<p>This will bring the right version into your classpath.</p>\n"},{"tags":[],"owner":{"account_id":934222,"reputation":611,"user_id":1823408,"display_name":"Buminda"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1491908545,"creation_date":1491908545,"answer_id":43344085,"question_id":43041695,"body_markdown":"I had the same issue, After commenting out the below it was fixed. One of the follwoing dependency was the culprit.\r\n\r\n        &lt;!--  dependency&gt;\r\n    \t&lt;groupId&gt;me.fhir&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;fhir&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.12.0-RELEASE&lt;/version&gt;\r\n    &lt;/dependency--&gt;\r\n    &lt;!--  dependency&gt;\r\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n        &lt;version&gt;2.8.8&lt;/version&gt;\r\n    &lt;/dependency--&gt;\r\n    &lt;!-- dependency&gt;\r\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n        &lt;version&gt;2.8.8&lt;/version&gt;\r\n    &lt;/dependency--&gt;","title":"Failed to start component [StandardEngine[Tomcat].StandardHost[localhost].TomcatEmbeddedContext[]]","body":"<p>I had the same issue, After commenting out the below it was fixed. One of the follwoing dependency was the culprit.</p>\n\n<pre><code>    &lt;!--  dependency&gt;\n    &lt;groupId&gt;me.fhir&lt;/groupId&gt;\n    &lt;artifactId&gt;fhir&lt;/artifactId&gt;\n    &lt;version&gt;0.12.0-RELEASE&lt;/version&gt;\n&lt;/dependency--&gt;\n&lt;!--  dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n    &lt;version&gt;2.8.8&lt;/version&gt;\n&lt;/dependency--&gt;\n&lt;!-- dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n    &lt;version&gt;2.8.8&lt;/version&gt;\n&lt;/dependency--&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":765834,"reputation":3026,"user_id":786676,"accept_rate":75,"display_name":"somnathchakrabarti"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1513260365,"creation_date":1513260365,"answer_id":47815281,"question_id":43041695,"body_markdown":"My guess is you have to use the default `ServletInitializer` class that is provided within the `Spring Boot Project template` of Eclipse.\r\n\r\n    //SpringBootApplication.java\r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    \r\n    @SpringBootApplication\r\n    public class SpringBootApplication {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(SpringBootApplication.class, args);\r\n    \t}\r\n    }\r\n\r\n    //ServletInitializer.java\r\n    public class ServletInitializer extends SpringBootServletInitializer {\r\n    \r\n    \t@Override\r\n    \tprotected SpringApplicationBuilder configure(SpringApplicationBuilder application) {\r\n    \t\treturn application.sources(SpringBootApplication.class);\r\n    \t}\r\n    \r\n    }\r\n\r\nIf you are not using `ServletInitializer` class as specified in `Spring Boot Starter Project` template, try to extend `SpringBootServletInitializer` from your App class\r\n\r\n    public class App extends SpringBootServletInitializer\r\n\r\nPlease check a similar answer [here][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/47814769/786676","title":"Failed to start component [StandardEngine[Tomcat].StandardHost[localhost].TomcatEmbeddedContext[]]","body":"<p>My guess is you have to use the default <code>ServletInitializer</code> class that is provided within the <code>Spring Boot Project template</code> of Eclipse.</p>\n\n<pre><code>//SpringBootApplication.java\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class SpringBootApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(SpringBootApplication.class, args);\n    }\n}\n\n//ServletInitializer.java\npublic class ServletInitializer extends SpringBootServletInitializer {\n\n    @Override\n    protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {\n        return application.sources(SpringBootApplication.class);\n    }\n\n}\n</code></pre>\n\n<p>If you are not using <code>ServletInitializer</code> class as specified in <code>Spring Boot Starter Project</code> template, try to extend <code>SpringBootServletInitializer</code> from your App class</p>\n\n<pre><code>public class App extends SpringBootServletInitializer\n</code></pre>\n\n<p>Please check a similar answer <a href=\"https://stackoverflow.com/a/47814769/786676\">here</a></p>\n"},{"tags":[],"owner":{"account_id":3569748,"reputation":2756,"user_id":2980375,"display_name":"Elhanan Mishraky"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1615421176,"creation_date":1544009066,"answer_id":53631200,"question_id":43041695,"body_markdown":"For me, upgrading javax.servlet-api to 4.0.1 did the trick:\r\n\r\n```XML\r\n&lt;dependency&gt;\r\n   &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n   &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\r\n   &lt;version&gt;4.0.1&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```","title":"Failed to start component [StandardEngine[Tomcat].StandardHost[localhost].TomcatEmbeddedContext[]]","body":"<p>For me, upgrading javax.servlet-api to 4.0.1 did the trick:</p>\n<pre><code>&lt;dependency&gt;\n   &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n   &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\n   &lt;version&gt;4.0.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11418021,"reputation":4780,"user_id":8370334,"display_name":"Abd Abughazaleh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1594493419,"creation_date":1594493419,"answer_id":62853258,"question_id":43041695,"body_markdown":"I solved this problem using `tomcat` configuration in `pom.xml`\r\n\r\n\r\nFirst go to tomcat folder and open `cmd` in bin my path is : \r\n\r\n`C:\\Program Files\\Apache Software Foundation\\Tomcat 8.5\\bin&gt;`\r\n\r\nget tomcat version using this command \r\n\r\n`C:\\Program Files\\Apache Software Foundation\\Tomcat 8.5\\bin&gt;catalina.sh version`\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/LIlWz.png\r\n\r\n\r\nAfter this add this in `pom.xml`\r\n\r\n    &lt;properties&gt;\r\n            &lt;java.version&gt;1.8&lt;/java.version&gt;\r\n            &lt;tomcat.version&gt;8.5.43&lt;/tomcat.version&gt;\r\n    &lt;/properties&gt;\r\n\r\n","title":"Failed to start component [StandardEngine[Tomcat].StandardHost[localhost].TomcatEmbeddedContext[]]","body":"<p>I solved this problem using <code>tomcat</code> configuration in <code>pom.xml</code></p>\n<p>First go to tomcat folder and open <code>cmd</code> in bin my path is :</p>\n<p><code>C:\\Program Files\\Apache Software Foundation\\Tomcat 8.5\\bin&gt;</code></p>\n<p>get tomcat version using this command</p>\n<p><code>C:\\Program Files\\Apache Software Foundation\\Tomcat 8.5\\bin&gt;catalina.sh version</code></p>\n<p><a href=\"https://i.stack.imgur.com/LIlWz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LIlWz.png\" alt=\"enter image description here\" /></a></p>\n<p>After this add this in <code>pom.xml</code></p>\n<pre><code>&lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n        &lt;tomcat.version&gt;8.5.43&lt;/tomcat.version&gt;\n&lt;/properties&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25658948,"reputation":1,"user_id":19424944,"display_name":"mohammad amoli"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656320726,"creation_date":1656320726,"answer_id":72769534,"question_id":43041695,"body_markdown":"It was solution for me after 2 days, \r\njust add this part to pom.xml\r\n\r\n\r\n    &lt;plugin&gt;\r\n         &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n         &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n         &lt;version&gt;2.22.2&lt;/version&gt;\r\n         &lt;configuration&gt;\r\n             &lt;skipTests&gt;true&lt;/skipTests&gt;\r\n         &lt;/configuration&gt;\r\n     &lt;/plugin&gt;\r\n\r\n ","title":"Failed to start component [StandardEngine[Tomcat].StandardHost[localhost].TomcatEmbeddedContext[]]","body":"<p>It was solution for me after 2 days,\njust add this part to pom.xml</p>\n<pre><code>&lt;plugin&gt;\n     &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n     &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n     &lt;version&gt;2.22.2&lt;/version&gt;\n     &lt;configuration&gt;\n         &lt;skipTests&gt;true&lt;/skipTests&gt;\n     &lt;/configuration&gt;\n &lt;/plugin&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18125903,"reputation":1,"user_id":13181429,"display_name":"Lipsa Priyadarsani"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1657624939,"creation_date":1657624862,"answer_id":72951485,"question_id":43041695,"body_markdown":"\r\n\r\n       &lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;\r\n\t\t    &lt;version&gt;9.0.44&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;","title":"Failed to start component [StandardEngine[Tomcat].StandardHost[localhost].TomcatEmbeddedContext[]]","body":"<pre><code>   &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\n        &lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;\n        &lt;version&gt;9.0.44&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14304118,"reputation":11,"user_id":10332636,"display_name":"Swetaparna Jena"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662632397,"creation_date":1662632397,"answer_id":73647494,"question_id":43041695,"body_markdown":"I just remove my (tomcat-embed-jasper ) , it&#39;s worked for me .","title":"Failed to start component [StandardEngine[Tomcat].StandardHost[localhost].TomcatEmbeddedContext[]]","body":"<p>I just remove my (tomcat-embed-jasper ) , it's worked for me .</p>\n"},{"tags":[],"owner":{"account_id":8165290,"reputation":11,"user_id":10996247,"display_name":"Anibal Rodriguez"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672851281,"creation_date":1672851234,"answer_id":75008704,"question_id":43041695,"body_markdown":"I had the same problem with a different cause.\r\n\r\nI was trying to run a project on Eclipse and I received this error, and my problem was the version of JDK chosen to run the project.\r\n\r\n[Run configuration with JDK][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/7SXHL.png\r\n\r\nI had to set my run configuration to 1.8, same as project.","title":"Failed to start component [StandardEngine[Tomcat].StandardHost[localhost].TomcatEmbeddedContext[]]","body":"<p>I had the same problem with a different cause.</p>\n<p>I was trying to run a project on Eclipse and I received this error, and my problem was the version of JDK chosen to run the project.</p>\n<p><a href=\"https://i.stack.imgur.com/7SXHL.png\" rel=\"nofollow noreferrer\">Run configuration with JDK</a></p>\n<p>I had to set my run configuration to 1.8, same as project.</p>\n"}],"owner":{"account_id":2731132,"reputation":1212,"user_id":2354908,"accept_rate":45,"display_name":"Betafish"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":80263,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"answer_count":9,"score":12,"last_activity_date":1672851281,"creation_date":1490604217,"question_id":43041695,"body_markdown":"I am trying to build a SpringBoot application.\r\n\r\n   \r\n\r\n     import org.springframework.boot.SpringApplication;\r\n     import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n     import org.springframework.context.ApplicationContext;\r\n        \r\n        @SpringBootApplication\r\n        public class App {\r\n        \r\n        \t@SuppressWarnings(&quot;unused&quot;)\r\n        \tpublic static void main(String[] args) throws Exception {\r\n        \t\tApplicationContext ctx = SpringApplication.run(App.class, args);\r\n         \t}\r\n        }\r\n\r\nBut, when I try to run the app, it throws me the below error:\r\n\r\n    2017-03-27 13:55:58.281  INFO 8608 --- [           main] s.b.c.e.t.TomcatEmbeddedServletContainer : Tomcat initialized with port(s): 8080 (http)\r\n    2017-03-27 13:55:58.299  INFO 8608 --- [           main] o.apache.catalina.core.StandardService   : Starting service Tomcat\r\n    2017-03-27 13:55:58.302  INFO 8608 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet Engine: Apache Tomcat/8.5.11\r\n    2017-03-27 13:55:58.554 ERROR 8608 --- [cat-startStop-1] org.apache.catalina.core.ContainerBase   : A child container failed during start\r\n    \r\n    java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Tomcat].StandardHost[localhost].TomcatEmbeddedContext[]]\r\n    \tat java.util.concurrent.FutureTask.report(FutureTask.java:122) [na:1.8.0_73]\r\n    \tat java.util.concurrent.FutureTask.get(FutureTask.java:192) [na:1.8.0_73]\r\n    \tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:939) ~[tomcat-embed-core-8.5.11.jar:8.5.11]\r\n    \tat org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:872) [tomcat-embed-core-8.5.11.jar:8.5.11]\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) [tomcat-embed-core-8.5.11.jar:8.5.11]\r\n    \tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1419) [tomcat-embed-core-8.5.11.jar:8.5.11]\r\n    \tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1409) [tomcat-embed-core-8.5.11.jar:8.5.11]\r\n    \tat java.util.concurrent.FutureTask.run(FutureTask.java:266) [na:1.8.0_73]\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [na:1.8.0_73]\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [na:1.8.0_73]\r\n    \tat java.lang.Thread.run(Thread.java:745) [na:1.8.0_73]\r\n    Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Tomcat].StandardHost[localhost].TomcatEmbeddedContext[]]\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:167) [tomcat-embed-core-8.5.11.jar:8.5.11]\r\n    \t... 6 common frames omitted\r\n    Caused by: org.apache.catalina.LifecycleException: Failed to start component [Pipeline[StandardEngine[Tomcat].StandardHost[localhost].TomcatEmbeddedContext[]]]\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:167) [tomcat-embed-core-8.5.11.jar:8.5.11]\r\n    \tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5099) ~[tomcat-embed-core-8.5.11.jar:8.5.11]\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) [tomcat-embed-core-8.5.11.jar:8.5.11]\r\n    \t... 6 common frames omitted\r\n    Caused by: org.apache.catalina.LifecycleException: Failed to start component [org.apache.catalina.authenticator.NonLoginAuthenticator[]]\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:167) [tomcat-embed-core-8.5.11.jar:8.5.11]\r\n    \tat org.apache.catalina.core.StandardPipeline.startInternal(StandardPipeline.java:170) ~[tomcat-embed-core-8.5.11.jar:8.5.11]\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) [tomcat-embed-core-8.5.11.jar:8.5.11]\r\n    \t... 8 common frames omitted\r\n    Caused by: java.lang.NoSuchMethodError: javax.servlet.ServletContext.getVirtualServerName()Ljava/lang/String;\r\n    \tat org.apache.catalina.authenticator.AuthenticatorBase.startInternal(AuthenticatorBase.java:1137) ~[tomcat-embed-core-8.5.11.jar:8.5.11]\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) [tomcat-embed-core-8.5.11.jar:8.5.11]\r\n    \t... 10 common frames omitted\r\n\r\n\r\nmy current pom.xml file is as follows:\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n      &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n      &lt;groupId&gt;XXXX&lt;/groupId&gt;\r\n      &lt;artifactId&gt;XXXX&lt;/artifactId&gt;\r\n      &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \r\n    &lt;!-- JSON --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.googlecode.json-simple&lt;/groupId&gt;\r\n        &lt;artifactId&gt;json-simple&lt;/artifactId&gt;\r\n        &lt;version&gt;1.1.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n     &lt;dependency&gt;\r\n       &lt;groupId&gt;commons-lang&lt;/groupId&gt;\r\n       &lt;artifactId&gt;commons-lang&lt;/artifactId&gt;\r\n       &lt;version&gt;2.2&lt;/version&gt;\r\n     &lt;/dependency&gt;\r\n     \r\n    &lt;dependency&gt;\r\n       &lt;groupId&gt;com.sun.jersey&lt;/groupId&gt;\r\n       &lt;artifactId&gt;jersey-client&lt;/artifactId&gt;\r\n       &lt;version&gt;1.19.3&lt;/version&gt;\r\n    &lt;/dependency &gt;\r\n    \r\n    &lt;dependency&gt;\r\n       &lt;groupId&gt;com.sun.jersey&lt;/groupId&gt;\r\n       &lt;artifactId&gt;jersey-json&lt;/artifactId&gt;\r\n       &lt;version&gt;1.19.3&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n    &lt;!-- REST Services  --&gt;\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n        &lt;version&gt;1.5.0.RELEASE&lt;/version&gt;\r\n    &lt;/dependency&gt;  \r\n     \r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;version&gt;1.5.0.RELEASE&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n    &lt;!-- &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n        &lt;version&gt;1.5.0.RELEASE&lt;/version&gt;\r\n    &lt;/dependency&gt; --&gt;\r\n    \r\n      \r\n      &lt;!-- SLF4J Logging --&gt;\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n        &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n        &lt;version&gt;1.6.4&lt;/version&gt;\r\n        &lt;scope&gt;compile&lt;/scope&gt;\r\n      &lt;/dependency&gt;  \r\n    \r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jcl-over-slf4j&lt;/artifactId&gt;\r\n        &lt;version&gt;1.6.4&lt;/version&gt;\r\n        &lt;scope&gt;runtime&lt;/scope&gt;\r\n      &lt;/dependency&gt;\r\n    \r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n        &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\r\n        &lt;version&gt;1.6.4&lt;/version&gt;\r\n        &lt;scope&gt;runtime&lt;/scope&gt;\r\n      &lt;/dependency&gt; \r\n    \r\n      &lt;/dependencies&gt;\r\n    \r\n      &lt;build&gt;\r\n      &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt;\r\n      &lt;plugins&gt;\r\n      \r\n        &lt;!-- Set a compiler level --&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.3&lt;/version&gt;\r\n          &lt;configuration&gt;\r\n            &lt;source&gt;1.8&lt;/source&gt;\r\n            &lt;target&gt;1.8&lt;/target&gt;\r\n          &lt;/configuration&gt;\r\n        &lt;/plugin&gt;\r\n      &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\n\r\nAs mentioned in some **SO** posts, I tried removing (Jersey), adding (embedded tomcat) dependencies. But the error seems not to be having an effect on the changes.\r\n\r\nI also tried and another simple project (app) from Spring Tutorials (to add two numbers), this has the following pom.xml\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n      &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n      &lt;groupId&gt;SpringBootDemoProject&lt;/groupId&gt;\r\n      &lt;artifactId&gt;SpringBootDemoProject&lt;/artifactId&gt;\r\n      &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n      &lt;dependencies&gt;\r\n      &lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n        &lt;version&gt;1.5.0.RELEASE&lt;/version&gt;\r\n    &lt;/dependency&gt;  \r\n     &lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-web --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;version&gt;1.5.0.RELEASE&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n      &lt;/dependencies&gt;\r\n      &lt;build&gt;  \r\n        &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt;\r\n        &lt;plugins&gt;\r\n          &lt;plugin&gt;\r\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;3.3&lt;/version&gt;\r\n            &lt;configuration&gt;\r\n              &lt;source&gt;1.8&lt;/source&gt;\r\n              &lt;target&gt;1.8&lt;/target&gt;\r\n            &lt;/configuration&gt;\r\n          &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n      &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\nThis works completely fine. Any pointers as to why this is the case?","title":"Failed to start component [StandardEngine[Tomcat].StandardHost[localhost].TomcatEmbeddedContext[]]","body":"<p>I am trying to build a SpringBoot application.</p>\n\n<pre><code> import org.springframework.boot.SpringApplication;\n import org.springframework.boot.autoconfigure.SpringBootApplication;\n import org.springframework.context.ApplicationContext;\n\n    @SpringBootApplication\n    public class App {\n\n        @SuppressWarnings(\"unused\")\n        public static void main(String[] args) throws Exception {\n            ApplicationContext ctx = SpringApplication.run(App.class, args);\n        }\n    }\n</code></pre>\n\n<p>But, when I try to run the app, it throws me the below error:</p>\n\n<pre><code>2017-03-27 13:55:58.281  INFO 8608 --- [           main] s.b.c.e.t.TomcatEmbeddedServletContainer : Tomcat initialized with port(s): 8080 (http)\n2017-03-27 13:55:58.299  INFO 8608 --- [           main] o.apache.catalina.core.StandardService   : Starting service Tomcat\n2017-03-27 13:55:58.302  INFO 8608 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet Engine: Apache Tomcat/8.5.11\n2017-03-27 13:55:58.554 ERROR 8608 --- [cat-startStop-1] org.apache.catalina.core.ContainerBase   : A child container failed during start\n\njava.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Tomcat].StandardHost[localhost].TomcatEmbeddedContext[]]\n    at java.util.concurrent.FutureTask.report(FutureTask.java:122) [na:1.8.0_73]\n    at java.util.concurrent.FutureTask.get(FutureTask.java:192) [na:1.8.0_73]\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:939) ~[tomcat-embed-core-8.5.11.jar:8.5.11]\n    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:872) [tomcat-embed-core-8.5.11.jar:8.5.11]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) [tomcat-embed-core-8.5.11.jar:8.5.11]\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1419) [tomcat-embed-core-8.5.11.jar:8.5.11]\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1409) [tomcat-embed-core-8.5.11.jar:8.5.11]\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266) [na:1.8.0_73]\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [na:1.8.0_73]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [na:1.8.0_73]\n    at java.lang.Thread.run(Thread.java:745) [na:1.8.0_73]\nCaused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Tomcat].StandardHost[localhost].TomcatEmbeddedContext[]]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:167) [tomcat-embed-core-8.5.11.jar:8.5.11]\n    ... 6 common frames omitted\nCaused by: org.apache.catalina.LifecycleException: Failed to start component [Pipeline[StandardEngine[Tomcat].StandardHost[localhost].TomcatEmbeddedContext[]]]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:167) [tomcat-embed-core-8.5.11.jar:8.5.11]\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5099) ~[tomcat-embed-core-8.5.11.jar:8.5.11]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) [tomcat-embed-core-8.5.11.jar:8.5.11]\n    ... 6 common frames omitted\nCaused by: org.apache.catalina.LifecycleException: Failed to start component [org.apache.catalina.authenticator.NonLoginAuthenticator[]]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:167) [tomcat-embed-core-8.5.11.jar:8.5.11]\n    at org.apache.catalina.core.StandardPipeline.startInternal(StandardPipeline.java:170) ~[tomcat-embed-core-8.5.11.jar:8.5.11]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) [tomcat-embed-core-8.5.11.jar:8.5.11]\n    ... 8 common frames omitted\nCaused by: java.lang.NoSuchMethodError: javax.servlet.ServletContext.getVirtualServerName()Ljava/lang/String;\n    at org.apache.catalina.authenticator.AuthenticatorBase.startInternal(AuthenticatorBase.java:1137) ~[tomcat-embed-core-8.5.11.jar:8.5.11]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) [tomcat-embed-core-8.5.11.jar:8.5.11]\n    ... 10 common frames omitted\n</code></pre>\n\n<p>my current pom.xml file is as follows:</p>\n\n<pre><code>&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;XXXX&lt;/groupId&gt;\n  &lt;artifactId&gt;XXXX&lt;/artifactId&gt;\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n\n&lt;!-- JSON --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.googlecode.json-simple&lt;/groupId&gt;\n    &lt;artifactId&gt;json-simple&lt;/artifactId&gt;\n    &lt;version&gt;1.1.1&lt;/version&gt;\n&lt;/dependency&gt;\n\n &lt;dependency&gt;\n   &lt;groupId&gt;commons-lang&lt;/groupId&gt;\n   &lt;artifactId&gt;commons-lang&lt;/artifactId&gt;\n   &lt;version&gt;2.2&lt;/version&gt;\n &lt;/dependency&gt;\n\n&lt;dependency&gt;\n   &lt;groupId&gt;com.sun.jersey&lt;/groupId&gt;\n   &lt;artifactId&gt;jersey-client&lt;/artifactId&gt;\n   &lt;version&gt;1.19.3&lt;/version&gt;\n&lt;/dependency &gt;\n\n&lt;dependency&gt;\n   &lt;groupId&gt;com.sun.jersey&lt;/groupId&gt;\n   &lt;artifactId&gt;jersey-json&lt;/artifactId&gt;\n   &lt;version&gt;1.19.3&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;!-- REST Services  --&gt;\n  &lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n    &lt;version&gt;1.5.0.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;  \n\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;version&gt;1.5.0.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;!-- &lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n    &lt;version&gt;1.5.0.RELEASE&lt;/version&gt;\n&lt;/dependency&gt; --&gt;\n\n\n  &lt;!-- SLF4J Logging --&gt;\n  &lt;dependency&gt;\n    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n    &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n    &lt;version&gt;1.6.4&lt;/version&gt;\n    &lt;scope&gt;compile&lt;/scope&gt;\n  &lt;/dependency&gt;  \n\n&lt;dependency&gt;\n    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n    &lt;artifactId&gt;jcl-over-slf4j&lt;/artifactId&gt;\n    &lt;version&gt;1.6.4&lt;/version&gt;\n    &lt;scope&gt;runtime&lt;/scope&gt;\n  &lt;/dependency&gt;\n\n  &lt;dependency&gt;\n    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n    &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\n    &lt;version&gt;1.6.4&lt;/version&gt;\n    &lt;scope&gt;runtime&lt;/scope&gt;\n  &lt;/dependency&gt; \n\n  &lt;/dependencies&gt;\n\n  &lt;build&gt;\n  &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt;\n  &lt;plugins&gt;\n\n    &lt;!-- Set a compiler level --&gt;\n    &lt;plugin&gt;\n      &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n      &lt;version&gt;3.3&lt;/version&gt;\n      &lt;configuration&gt;\n        &lt;source&gt;1.8&lt;/source&gt;\n        &lt;target&gt;1.8&lt;/target&gt;\n      &lt;/configuration&gt;\n    &lt;/plugin&gt;\n  &lt;/plugins&gt;\n&lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>As mentioned in some <strong>SO</strong> posts, I tried removing (Jersey), adding (embedded tomcat) dependencies. But the error seems not to be having an effect on the changes.</p>\n\n<p>I also tried and another simple project (app) from Spring Tutorials (to add two numbers), this has the following pom.xml</p>\n\n<pre><code>&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;SpringBootDemoProject&lt;/groupId&gt;\n  &lt;artifactId&gt;SpringBootDemoProject&lt;/artifactId&gt;\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n  &lt;dependencies&gt;\n  &lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n    &lt;version&gt;1.5.0.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;  \n &lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-web --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;version&gt;1.5.0.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n\n  &lt;/dependencies&gt;\n  &lt;build&gt;  \n    &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.3&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;source&gt;1.8&lt;/source&gt;\n          &lt;target&gt;1.8&lt;/target&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>This works completely fine. Any pointers as to why this is the case?</p>\n"},{"tags":["java","spring","hibernate","validation"],"answers":[{"tags":[],"owner":{"account_id":7300349,"reputation":31,"user_id":5563384,"display_name":"l.dan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1529032544,"creation_date":1529031408,"answer_id":50868532,"question_id":50867826,"body_markdown":"I think `UniqueUsernameValidator` actions as expected.\r\n\r\nI am not very clear about your application.So it is difficult to implement an method to to check if validating user have the same id or not of user in database.May be you should provide more details, such as code of method `usuarioService.existe(username)`.\r\n\r\nFor me, to assure that the username is unique, i do this:\r\n\r\n    @Column(unique=true)\r\n    String username;\r\n\r\nor use @UniqueConstraint\r\n\r\n    @Table(name = &quot;users&quot;, uniqueConstraints = {\r\n        @UniqueConstraint(columnNames = {\r\n            &quot;username&quot;\r\n        })\r\n    })\r\n\r\nbut **note** that it will work if you let JPA create your tables.\r\n\r\n - [@UniqueConstraint](https://docs.oracle.com/javaee/7/api/javax/persistence/UniqueConstraint.html)","title":"Custom UniqueUsername validation with Spring","body":"<p>I think <code>UniqueUsernameValidator</code> actions as expected.</p>\n\n<p>I am not very clear about your application.So it is difficult to implement an method to to check if validating user have the same id or not of user in database.May be you should provide more details, such as code of method <code>usuarioService.existe(username)</code>.</p>\n\n<p>For me, to assure that the username is unique, i do this:</p>\n\n<pre><code>@Column(unique=true)\nString username;\n</code></pre>\n\n<p>or use @UniqueConstraint</p>\n\n<pre><code>@Table(name = \"users\", uniqueConstraints = {\n    @UniqueConstraint(columnNames = {\n        \"username\"\n    })\n})\n</code></pre>\n\n<p>but <strong>note</strong> that it will work if you let JPA create your tables.</p>\n\n<ul>\n<li><a href=\"https://docs.oracle.com/javaee/7/api/javax/persistence/UniqueConstraint.html\" rel=\"nofollow noreferrer\">@UniqueConstraint</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":2563377,"reputation":7174,"user_id":2224047,"display_name":"Nikolai  Shevchenko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1529140724,"creation_date":1529140724,"answer_id":50886569,"question_id":50867826,"body_markdown":"You can try following approach using validation groups:\r\n\r\nCreate a marker interface (or class)\r\n\r\n    public interface UserCreateValidationGroup {\r\n    }\r\n\r\nThen use it in you entity like following\r\n\r\n    @NotBlank\r\n    @UniqueUsername(groups = UserCreateValidationGroup.class)\r\n    private String username;\r\n\r\nAnd then use it in Controller along with `@Validated` (Spring&#39;s variant for JSR-303). Note that you&#39;ll have to split your single method into separate create and update methods, to distinct validation.\r\n\r\nCreate:\r\n\r\n    @PostMapping(&quot;/cadastrar/sindico&quot;)\r\n    public ModelAndView create(\r\n        @Validated(UserCreateValidationGroup.class) @ModelAttribute(&quot;usuario&quot;) Usuario usuario, \r\n        BindingResult validacao, \r\n        ModelMap model\r\n    ) { ... }\r\n\r\nUpdate:\r\n\r\n    // note, here I did use PUT and no argument for @Validated annotation\r\n    @PutMapping(&quot;/cadastrar/sindico&quot;) \r\n    public ModelAndView update(\r\n        @Validated @ModelAttribute(&quot;usuario&quot;) Usuario usuario, \r\n        BindingResult validacao, \r\n        ModelMap model\r\n    ) { ... }\r\n\r\n\r\nHowever, you&#39;ll have to perform manual check (`UsuarioService.existe`) for username in the update case. ","title":"Custom UniqueUsername validation with Spring","body":"<p>You can try following approach using validation groups:</p>\n\n<p>Create a marker interface (or class)</p>\n\n<pre><code>public interface UserCreateValidationGroup {\n}\n</code></pre>\n\n<p>Then use it in you entity like following</p>\n\n<pre><code>@NotBlank\n@UniqueUsername(groups = UserCreateValidationGroup.class)\nprivate String username;\n</code></pre>\n\n<p>And then use it in Controller along with <code>@Validated</code> (Spring's variant for JSR-303). Note that you'll have to split your single method into separate create and update methods, to distinct validation.</p>\n\n<p>Create:</p>\n\n<pre><code>@PostMapping(\"/cadastrar/sindico\")\npublic ModelAndView create(\n    @Validated(UserCreateValidationGroup.class) @ModelAttribute(\"usuario\") Usuario usuario, \n    BindingResult validacao, \n    ModelMap model\n) { ... }\n</code></pre>\n\n<p>Update:</p>\n\n<pre><code>// note, here I did use PUT and no argument for @Validated annotation\n@PutMapping(\"/cadastrar/sindico\") \npublic ModelAndView update(\n    @Validated @ModelAttribute(\"usuario\") Usuario usuario, \n    BindingResult validacao, \n    ModelMap model\n) { ... }\n</code></pre>\n\n<p>However, you'll have to perform manual check (<code>UsuarioService.existe</code>) for username in the update case. </p>\n"}],"owner":{"account_id":13675664,"reputation":43,"user_id":9867208,"display_name":"Steffan Martins"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":651,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":50886569,"answer_count":2,"score":1,"last_activity_date":1672851235,"creation_date":1529023939,"question_id":50867826,"body_markdown":"I want to assure that the username is unique when creating a new one or updating one username. I wrote the code below and it works fine for creating and updating the username. But when updating only other user fields, like age or sex, and maintaining the same username, it returns invalid because the username already exists.\r\n\r\nIt&#39;s important to say that the validation I want is using BindingResult. I already have a database which considers username a unique constraint. But now I want the same validation with BindingResult. But the way I did causes error when updating an user.\r\n\r\nDefining of the annotation @UniqueUsername\r\n\r\n    package app.condominio.validator;\r\n    \r\n    import java.lang.annotation.Documented;\r\n    import java.lang.annotation.ElementType;\r\n    import java.lang.annotation.Retention;\r\n    import java.lang.annotation.RetentionPolicy;\r\n    import java.lang.annotation.Target;\r\n    \r\n    import javax.validation.Constraint;\r\n    import javax.validation.Payload;\r\n    \r\n    @Documented\r\n    @Constraint(validatedBy = UniqueUsernameValidator.class)\r\n    @Target({ ElementType.METHOD, ElementType.FIELD })\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    public @interface UniqueUsername {\r\n    \tString message() default &quot;Nome de usu&#225;rio j&#225; est&#225; sendo usado&quot;;\r\n    \r\n    \tClass&lt;?&gt;[] groups() default {};\r\n    \r\n    \tClass&lt;? extends Payload&gt;[] payload() default {};\r\n    }\r\n\r\nImplementing the validator\r\n\r\n    package app.condominio.validator;\r\n    \r\n    import javax.validation.ConstraintValidator;\r\n    import javax.validation.ConstraintValidatorContext;\r\n    \r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    \r\n    import app.condominio.service.UsuarioService;\r\n    \r\n    public class UniqueUsernameValidator implements ConstraintValidator&lt;UniqueUsername, String&gt; {\r\n    \r\n    \t@Autowired\r\n    \tUsuarioService usuarioService;\r\n    \r\n    \t@Override\r\n    \tpublic void initialize(UniqueUsername username) {\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean isValid(String username, ConstraintValidatorContext cxt) {\r\n    \t\treturn !usuarioService.existe(username);\r\n    \t}\r\n    }\r\n\r\nIn Usuario.class\r\n\r\n    @Entity\r\n    @Table(name = &quot;Usuarios&quot;)\r\n    public class Usuario implements Serializable {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n\t@NotBlank\r\n\t@UniqueUsername\r\n\tprivate String username;\r\n\r\n\t@NotBlank\r\n\tprivate String password;\r\n\r\n\t@NotBlank\r\n\tprivate String nome;\r\n\r\n\t@Email\r\n\tprivate String email;\r\n\r\n\t...\r\n\r\nUsuarioService\r\n\r\n    @Service\r\n    @Transactional\r\n    public class UsuarioServiceImpl implements UsuarioService {\r\n    \r\n    \t@Autowired\r\n    \tprivate UsuarioDao usuarioDao;\r\n    \r\n        @Override\r\n    \t@Transactional(readOnly = true, propagation = Propagation.SUPPORTS)\r\n    \tpublic boolean existe(String username) {\r\n    \t\treturn usuarioDao.existsByUsername(username);\r\n    \t}\r\n\r\nUsuarioDao\r\n\r\n    public interface UsuarioDao extends CrudRepository&lt;Usuario, Long&gt; {\r\n    \r\n    \tUsuario findByUsername(String username);\r\n    \t\r\n    \tBoolean existsByUsername(String username);\r\n    \r\n    }\r\n\r\nController\r\n\r\n    @Controller\r\n    @RequestMapping(&quot;conta&quot;)\r\n    public class UsuarioController {\r\n    \r\n        @Autowired\r\n    \tprivate UsuarioService usuarioService;\r\n    \r\n    \t@GetMapping(&quot;/cadastrar/sindico&quot;)\r\n    \tpublic ModelAndView preCadastro(@ModelAttribute(&quot;usuario&quot;) Usuario usuario, ModelMap model) {\r\n    \t\tmodel.addAttribute(&quot;conteudo&quot;, &quot;cadastrarSindico&quot;);\r\n    \t\treturn new ModelAndView(&quot;site/layout&quot;, model);\r\n    \t}\r\n    \r\n    \t@PostMapping(&quot;/cadastrar/sindico&quot;)\r\n    \tpublic ModelAndView posCadastro(@Valid @ModelAttribute(&quot;usuario&quot;) Usuario usuario, BindingResult validacao, ModelMap model) {\r\n    \t\tif (validacao.hasErrors()) {\r\n    \t\t\treturn preCadastro(usuario, model);\r\n    \t\t}\r\n    \t\tusuarioService.salvarSindico(usuario);\r\n    \t\tmodel.addAttribute(usuario);\r\n    \t\tmodel.addAttribute(&quot;conteudo&quot;, &quot;cadastrarCondominio&quot;);\r\n    \t\treturn new ModelAndView(&quot;site/layout&quot;, model);\r\n    \t}\r\n","title":"Custom UniqueUsername validation with Spring","body":"<p>I want to assure that the username is unique when creating a new one or updating one username. I wrote the code below and it works fine for creating and updating the username. But when updating only other user fields, like age or sex, and maintaining the same username, it returns invalid because the username already exists.</p>\n<p>It's important to say that the validation I want is using BindingResult. I already have a database which considers username a unique constraint. But now I want the same validation with BindingResult. But the way I did causes error when updating an user.</p>\n<p>Defining of the annotation @UniqueUsername</p>\n<pre><code>package app.condominio.validator;\n\nimport java.lang.annotation.Documented;\nimport java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\n\nimport javax.validation.Constraint;\nimport javax.validation.Payload;\n\n@Documented\n@Constraint(validatedBy = UniqueUsernameValidator.class)\n@Target({ ElementType.METHOD, ElementType.FIELD })\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface UniqueUsername {\n    String message() default &quot;Nome de usuário já está sendo usado&quot;;\n\n    Class&lt;?&gt;[] groups() default {};\n\n    Class&lt;? extends Payload&gt;[] payload() default {};\n}\n</code></pre>\n<p>Implementing the validator</p>\n<pre><code>package app.condominio.validator;\n\nimport javax.validation.ConstraintValidator;\nimport javax.validation.ConstraintValidatorContext;\n\nimport org.springframework.beans.factory.annotation.Autowired;\n\nimport app.condominio.service.UsuarioService;\n\npublic class UniqueUsernameValidator implements ConstraintValidator&lt;UniqueUsername, String&gt; {\n\n    @Autowired\n    UsuarioService usuarioService;\n\n    @Override\n    public void initialize(UniqueUsername username) {\n    }\n\n    @Override\n    public boolean isValid(String username, ConstraintValidatorContext cxt) {\n        return !usuarioService.existe(username);\n    }\n}\n</code></pre>\n<p>In Usuario.class</p>\n<pre><code>@Entity\n@Table(name = &quot;Usuarios&quot;)\npublic class Usuario implements Serializable {\n\n@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\nprivate Long id;\n\n@NotBlank\n@UniqueUsername\nprivate String username;\n\n@NotBlank\nprivate String password;\n\n@NotBlank\nprivate String nome;\n\n@Email\nprivate String email;\n\n...\n</code></pre>\n<p>UsuarioService</p>\n<pre><code>@Service\n@Transactional\npublic class UsuarioServiceImpl implements UsuarioService {\n\n    @Autowired\n    private UsuarioDao usuarioDao;\n\n    @Override\n    @Transactional(readOnly = true, propagation = Propagation.SUPPORTS)\n    public boolean existe(String username) {\n        return usuarioDao.existsByUsername(username);\n    }\n</code></pre>\n<p>UsuarioDao</p>\n<pre><code>public interface UsuarioDao extends CrudRepository&lt;Usuario, Long&gt; {\n\n    Usuario findByUsername(String username);\n    \n    Boolean existsByUsername(String username);\n\n}\n</code></pre>\n<p>Controller</p>\n<pre><code>@Controller\n@RequestMapping(&quot;conta&quot;)\npublic class UsuarioController {\n\n    @Autowired\n    private UsuarioService usuarioService;\n\n    @GetMapping(&quot;/cadastrar/sindico&quot;)\n    public ModelAndView preCadastro(@ModelAttribute(&quot;usuario&quot;) Usuario usuario, ModelMap model) {\n        model.addAttribute(&quot;conteudo&quot;, &quot;cadastrarSindico&quot;);\n        return new ModelAndView(&quot;site/layout&quot;, model);\n    }\n\n    @PostMapping(&quot;/cadastrar/sindico&quot;)\n    public ModelAndView posCadastro(@Valid @ModelAttribute(&quot;usuario&quot;) Usuario usuario, BindingResult validacao, ModelMap model) {\n        if (validacao.hasErrors()) {\n            return preCadastro(usuario, model);\n        }\n        usuarioService.salvarSindico(usuario);\n        model.addAttribute(usuario);\n        model.addAttribute(&quot;conteudo&quot;, &quot;cadastrarCondominio&quot;);\n        return new ModelAndView(&quot;site/layout&quot;, model);\n    }\n</code></pre>\n"},{"tags":["java","jvm"],"answers":[{"tags":[],"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1238078639,"creation_date":1238078639,"answer_id":686097,"question_id":686079,"body_markdown":"No, static variables aren&#39;t between JVMs. Yes, there&#39;s a separate JVM process for each Java app you run.\r\n\r\nIn some implementations I believe they may share *some* resources (e.g. memory for JITted code of JRE classes) but I&#39;m not sure. I believe there&#39;s ongoing work to enable more sharing, but still in a robust way. (You don&#39;t really want one JVM crashing to affect others.)\r\n\r\nNo, you can&#39;t make programs share variables transparently.\r\n\r\nI believe there are books about the JVM, but I can&#39;t recommend any. You&#39;d probably be best off looking for HotSpot white papers for details of that. [This one][1] is a pretty good starting point.\r\n\r\n\r\n  [1]: http://java.sun.com/products/hotspot/whitepaper.html","title":"In Java, are static class members shared among programs?","body":"<p>No, static variables aren't between JVMs. Yes, there's a separate JVM process for each Java app you run.</p>\n\n<p>In some implementations I believe they may share <em>some</em> resources (e.g. memory for JITted code of JRE classes) but I'm not sure. I believe there's ongoing work to enable more sharing, but still in a robust way. (You don't really want one JVM crashing to affect others.)</p>\n\n<p>No, you can't make programs share variables transparently.</p>\n\n<p>I believe there are books about the JVM, but I can't recommend any. You'd probably be best off looking for HotSpot white papers for details of that. <a href=\"http://java.sun.com/products/hotspot/whitepaper.html\" rel=\"noreferrer\">This one</a> is a pretty good starting point.</p>\n"},{"tags":[],"owner":{"account_id":7745,"reputation":189755,"user_id":13531,"accept_rate":75,"display_name":"Michael Myers"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1238078655,"creation_date":1238078655,"answer_id":686098,"question_id":686079,"body_markdown":"You are correct in your assumption. Yes, each JVM is a separate process. You can confirm this by opening Task Manager when you&#39;re running two Java programs (sort processes by name and look for java.exe or javaw.exe).\r\n\r\nIt is possible to make JVMs connect to each other (with local sockets, for instance), but there&#39;s nothing built in.","title":"In Java, are static class members shared among programs?","body":"<p>You are correct in your assumption. Yes, each JVM is a separate process. You can confirm this by opening Task Manager when you're running two Java programs (sort processes by name and look for java.exe or javaw.exe).</p>\n\n<p>It is possible to make JVMs connect to each other (with local sockets, for instance), but there's nothing built in.</p>\n"},{"tags":[],"owner":{"account_id":15706,"reputation":4489,"user_id":33433,"display_name":"mkoeller"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1238078815,"creation_date":1238078815,"answer_id":686110,"question_id":686079,"body_markdown":"you should probably search more in the area of class loading if your main interest is about how static class members are instantiated. \r\n\r\nDifferent threads on the same VM may have their own static class nember instances if they used separate class loaders. \r\n\r\nThe classic example here would be [Apache Tomcat][1] keeping different web applications separate, though lib jars might be common to all applications.\r\n\r\n\r\n  [1]: http://tomcat.apache.org/","title":"In Java, are static class members shared among programs?","body":"<p>you should probably search more in the area of class loading if your main interest is about how static class members are instantiated. </p>\n\n<p>Different threads on the same VM may have their own static class nember instances if they used separate class loaders. </p>\n\n<p>The classic example here would be <a href=\"http://tomcat.apache.org/\" rel=\"noreferrer\">Apache Tomcat</a> keeping different web applications separate, though lib jars might be common to all applications.</p>\n"},{"tags":[],"owner":{"account_id":25591,"reputation":61024,"user_id":65868,"accept_rate":68,"display_name":"TofuBeer"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1238079043,"creation_date":1238079043,"answer_id":686122,"question_id":686079,"body_markdown":"Depends on the implementation, but yes there are ways things are shared.  There is/was work underway to change that, and Sun (via Apple) has done a lot of work in sharing data between instances of the VM.  There is a link that discusses some of that [here][1].\r\n\r\nTo do any sort of sharing requires the VM implementor to do it, you as a programmer cannot do anything to make it happen.\r\n\r\nThe VM spec is [here][2], there are some (older) books about it as well.  You can also look at the source for [Kaffe][3] which is pretty small.\r\n\r\n\r\n  [1]: http://www.javalobby.org/java/forums/t72620.html?start=30\r\n  [2]: http://java.sun.com/docs/books/jvms/second_edition/html/VMSpecTOC.doc.html\r\n  [3]: http://www.kaffe.org/","title":"In Java, are static class members shared among programs?","body":"<p>Depends on the implementation, but yes there are ways things are shared.  There is/was work underway to change that, and Sun (via Apple) has done a lot of work in sharing data between instances of the VM.  There is a link that discusses some of that <a href=\"http://www.javalobby.org/java/forums/t72620.html?start=30\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>To do any sort of sharing requires the VM implementor to do it, you as a programmer cannot do anything to make it happen.</p>\n\n<p>The VM spec is <a href=\"http://java.sun.com/docs/books/jvms/second_edition/html/VMSpecTOC.doc.html\" rel=\"nofollow noreferrer\">here</a>, there are some (older) books about it as well.  You can also look at the source for <a href=\"http://www.kaffe.org/\" rel=\"nofollow noreferrer\">Kaffe</a> which is pretty small.</p>\n"},{"tags":[],"owner":{"account_id":11636,"reputation":41624,"user_id":22514,"accept_rate":86,"display_name":"Kevin Hakanson"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1238079836,"creation_date":1238079836,"answer_id":686174,"question_id":686079,"body_markdown":"If you want to share variables across JVMs, you could look at clustering products like [Terracotta][1]. They refer to themselves as &quot;network attached memory&quot; and let you share object references across JVMs using replication technology.\r\n\r\n\r\n  [1]: http://www.terracotta.org/web/display/orgsite/What+Is+Terracotta","title":"In Java, are static class members shared among programs?","body":"<p>If you want to share variables across JVMs, you could look at clustering products like <a href=\"http://www.terracotta.org/web/display/orgsite/What+Is+Terracotta\" rel=\"nofollow noreferrer\">Terracotta</a>. They refer to themselves as \"network attached memory\" and let you share object references across JVMs using replication technology.</p>\n"},{"tags":[],"owner":{"account_id":11822,"reputation":18132,"user_id":22992,"accept_rate":76,"display_name":"Miguel Ping"},"down_vote_count":0,"up_vote_count":28,"is_accepted":true,"score":28,"last_activity_date":1452535667,"creation_date":1238080559,"answer_id":686221,"question_id":686079,"body_markdown":"&gt; In Java, are static class members\r\n&gt; shared among programs?\r\n\r\nA class is defined by its full name and the class loader that loaded it. If the same class is within the same JVM process and the two programs loaded the class through the same class loader then the static members are shared. Classloading rules are of extreme importance.\r\n\r\n\r\n&gt; I imagine that no, they aren&#39;t,\r\n&gt; because every process has its own\r\n&gt; memory space, of course.\r\n\r\nIf you are using two separate JVMs to launch two apps, you are correct. But take the case of application/servlet containers such as tomcat: they load several apps through the same process (the tomcat host process).\r\n\r\n\r\n&gt; But how does the whole JVM thing\r\n&gt; actually work? Is there a separate JVM\r\n&gt; in a separate process for every Java\r\n&gt; program that I launch? Do Java\r\n&gt; programs running in a system share\r\n&gt; anything at all?\r\n\r\nEvery time you type `&gt;java -cp...` at the command line, you are creating a new process. Bear in mind that when you run eclipse or call an ant java task with `fork=true` you are also creating new processes.\r\n\r\n&gt;  Are there differences between OSs and\r\n&gt; JVM implementations? Can I make\r\n&gt; programs share variables (i. e.\r\n&gt; directly through the JVM rather than\r\n&gt; the usual IPC mechanisms)? Are there\r\n&gt; more exotic one-process JVMs for\r\n&gt; special purposes?\r\n\r\nLike a poster said, there are projects like Terracota that facilitate this for you. A general approach for this kind of sharing is a distributed cache.\r\n","title":"In Java, are static class members shared among programs?","body":"<blockquote>\n  <p>In Java, are static class members\n  shared among programs?</p>\n</blockquote>\n\n<p>A class is defined by its full name and the class loader that loaded it. If the same class is within the same JVM process and the two programs loaded the class through the same class loader then the static members are shared. Classloading rules are of extreme importance.</p>\n\n<blockquote>\n  <p>I imagine that no, they aren't,\n  because every process has its own\n  memory space, of course.</p>\n</blockquote>\n\n<p>If you are using two separate JVMs to launch two apps, you are correct. But take the case of application/servlet containers such as tomcat: they load several apps through the same process (the tomcat host process).</p>\n\n<blockquote>\n  <p>But how does the whole JVM thing\n  actually work? Is there a separate JVM\n  in a separate process for every Java\n  program that I launch? Do Java\n  programs running in a system share\n  anything at all?</p>\n</blockquote>\n\n<p>Every time you type <code>&gt;java -cp...</code> at the command line, you are creating a new process. Bear in mind that when you run eclipse or call an ant java task with <code>fork=true</code> you are also creating new processes.</p>\n\n<blockquote>\n  <p>Are there differences between OSs and\n  JVM implementations? Can I make\n  programs share variables (i. e.\n  directly through the JVM rather than\n  the usual IPC mechanisms)? Are there\n  more exotic one-process JVMs for\n  special purposes?</p>\n</blockquote>\n\n<p>Like a poster said, there are projects like Terracota that facilitate this for you. A general approach for this kind of sharing is a distributed cache.</p>\n"},{"tags":[],"owner":{"account_id":10142,"reputation":4936,"user_id":19013,"display_name":"Taylor Gautier"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1238081034,"creation_date":1238081034,"answer_id":686256,"question_id":686079,"body_markdown":"Just to follow on to what Kevin mentioned, there are no JVM implementations that I am aware of that allow you to share static variables across JVM instances.  As previous answers have stated (correctly) - each JVM instance is it&#39;s own process.\r\n\r\nTerracotta (which is a clustering technology, not a JVM) allows for arbitrary sharing of object instances across JVM process boundaries - including sharing static variables.  Thus the moniker &quot;network attached memory&quot;.  For all intents and purposes, when using Terracotta technology in your JVM process, all of the threads in all of the VMs behave as if they were all looking at a single, large, shared heap.  (With caveats of course, since that&#39;s not physically possible, Terracotta manages it through sophisticated sharing and replication algorithms which involve network io to move data - so therefore there are times when latency and throughput will not compare to native memory access)\r\n\r\nThere are abundant examples in the Cookbook section of the Terracotta site - I recommend you start with the Hello [Clustered Instance Recipe][1] to get a feel for how it works. \r\n\r\n\r\n  [1]: http://www.terracotta.org/web/display/orgsite/Recipe?recipe=helloclusteredinstance","title":"In Java, are static class members shared among programs?","body":"<p>Just to follow on to what Kevin mentioned, there are no JVM implementations that I am aware of that allow you to share static variables across JVM instances.  As previous answers have stated (correctly) - each JVM instance is it's own process.</p>\n\n<p>Terracotta (which is a clustering technology, not a JVM) allows for arbitrary sharing of object instances across JVM process boundaries - including sharing static variables.  Thus the moniker \"network attached memory\".  For all intents and purposes, when using Terracotta technology in your JVM process, all of the threads in all of the VMs behave as if they were all looking at a single, large, shared heap.  (With caveats of course, since that's not physically possible, Terracotta manages it through sophisticated sharing and replication algorithms which involve network io to move data - so therefore there are times when latency and throughput will not compare to native memory access)</p>\n\n<p>There are abundant examples in the Cookbook section of the Terracotta site - I recommend you start with the Hello <a href=\"http://www.terracotta.org/web/display/orgsite/Recipe?recipe=helloclusteredinstance\" rel=\"nofollow noreferrer\">Clustered Instance Recipe</a> to get a feel for how it works. </p>\n"},{"tags":[],"owner":{"account_id":16476161,"reputation":9,"user_id":11904083,"display_name":"GuniorG"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1672851177,"creation_date":1672851177,"answer_id":75008696,"question_id":686079,"body_markdown":"Yes, **static** variables are shared among the applications only those which are running on **the same JVM and having Same class name, and also having the same**\r\npackage&#39;s structure. \r\n\r\nLike if, I am having the two projects **&#39;A&#39;** and **&#39;B&#39;** and the project &#39;A&#39; is having the packages under **src like (com.azoop.eagle)** and project &#39;B&#39; also having the same project structure as above **(com.azoop.eagle)** and having the same class name &#39;Example.java&#39; containing the same static variable as &#39;**static String logFile=&quot;./resource/sms.log**&#39; in both of the projects. Then if both the projects are running in the same JVM instance then only they will share the same value of static variables. As static variables are loaded only one time in whole life cycle of the project after that they will be shared with the same value if not modified. This can happen only when both the classes should to loaded by the same ***ClassLoader*** among both of the projects.\r\n\r\n\r\nI have faced this issue when I were having two different web-projects but they are running under the same **&#39;WebServer&#39; (JBOSS 7.3)** and having the same cases as explained above.","title":"In Java, are static class members shared among programs?","body":"<p>Yes, <strong>static</strong> variables are shared among the applications only those which are running on <strong>the same JVM and having Same class name, and also having the same</strong>\npackage's structure.</p>\n<p>Like if, I am having the two projects <strong>'A'</strong> and <strong>'B'</strong> and the project 'A' is having the packages under <strong>src like (com.azoop.eagle)</strong> and project 'B' also having the same project structure as above <strong>(com.azoop.eagle)</strong> and having the same class name 'Example.java' containing the same static variable as '<strong>static String logFile=&quot;./resource/sms.log</strong>' in both of the projects. Then if both the projects are running in the same JVM instance then only they will share the same value of static variables. As static variables are loaded only one time in whole life cycle of the project after that they will be shared with the same value if not modified. This can happen only when both the classes should to loaded by the same <em><strong>ClassLoader</strong></em> among both of the projects.</p>\n<p>I have faced this issue when I were having two different web-projects but they are running under the same <strong>'WebServer' (JBOSS 7.3)</strong> and having the same cases as explained above.</p>\n"}],"owner":{"account_id":1552,"reputation":30929,"user_id":2077,"accept_rate":84,"display_name":"Hanno Fietz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12914,"favorite_count":0,"down_vote_count":0,"up_vote_count":20,"accepted_answer_id":686221,"answer_count":8,"score":20,"last_activity_date":1672851177,"creation_date":1238078394,"question_id":686079,"body_markdown":"**I imagine that no, they aren&#39;t, because every process has its own memory space, of course.**\r\n\r\nBut how does the whole JVM thing actually work? Is there a separate JVM in a separate process for every Java program that I launch? Do Java programs running in a system share anything at all? Are there differences between OSs and JVM implementations? Can I *make* programs share variables (i. e. directly through the JVM rather than the usual IPC mechanisms)? Are there more exotic one-process JVMs for special purposes?\r\n\r\nGenerally, what are recommendable reads about the guts of JVMs? The [spec][1]? The source code of some implementation? Websites? Books?\r\n\r\n[1]: http://java.sun.com/docs/books/jls/third_edition/html/j3TOC.html","title":"In Java, are static class members shared among programs?","body":"<p><strong>I imagine that no, they aren't, because every process has its own memory space, of course.</strong></p>\n\n<p>But how does the whole JVM thing actually work? Is there a separate JVM in a separate process for every Java program that I launch? Do Java programs running in a system share anything at all? Are there differences between OSs and JVM implementations? Can I <em>make</em> programs share variables (i. e. directly through the JVM rather than the usual IPC mechanisms)? Are there more exotic one-process JVMs for special purposes?</p>\n\n<p>Generally, what are recommendable reads about the guts of JVMs? The <a href=\"http://java.sun.com/docs/books/jls/third_edition/html/j3TOC.html\" rel=\"noreferrer\">spec</a>? The source code of some implementation? Websites? Books?</p>\n"},{"tags":["java","algorithm","artificial-intelligence","depth-first-search"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1672850569,"post_id":75008512,"comment_id":132367175,"body_markdown":"In DFS, we need to visit all children of a node. This, in essence, means we need two loops: one for the termination condition, one to iterate over all children of the current node. Normally, we do this by adding a `Dequeue&lt;...&gt;` of work to do. If we read and write from the same side, we have a DFS algorithm. If we read form one side, but write to anoteher, we have BFS. I have a DFS implementation [here](https://github.com/turing85/advent-of-code-2022/blob/main/day-19/src/main/java/de/turing85/advent/of/code/tttt/day/nineteen/model/BlueprintEvaluator.java#L33) if you want to take a look.","body":"In DFS, we need to visit all children of a node. This, in essence, means we need two loops: one for the termination condition, one to iterate over all children of the current node. Normally, we do this by adding a <code>Dequeue&lt;...&gt;</code> of work to do. If we read and write from the same side, we have a DFS algorithm. If we read form one side, but write to anoteher, we have BFS. I have a DFS implementation <a href=\"https://github.com/turing85/advent-of-code-2022/blob/main/day-19/src/main/java/de/turing85/advent/of/code/tttt/day/nineteen/model/BlueprintEvaluator.java#L33\" rel=\"nofollow noreferrer\">here</a> if you want to take a look."},{"owner":{"account_id":5788487,"reputation":313,"user_id":4566850,"accept_rate":100,"display_name":"Boris Zhguchev"},"score":0,"creation_date":1672851850,"post_id":75008512,"comment_id":132367660,"body_markdown":"Also, if the target node is a final node of the graph or even absent at all, then all nodes will be traversed.","body":"Also, if the target node is a final node of the graph or even absent at all, then all nodes will be traversed."}],"answers":[{"tags":[],"owner":{"account_id":5823420,"reputation":785,"user_id":6656833,"display_name":"Pavel"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1672851099,"creation_date":1672851099,"answer_id":75008677,"question_id":75008512,"body_markdown":"Your algorithm is not DFS, it visits the neighbours of the node `v` and that&#39;s it. A DFS would look something like this:\r\n```java\r\nvoid DFSUtil(int v, int goal, boolean visited[]) {\r\n        Stack&lt;Integer&gt; stack = new Stack&lt;&gt;();\r\n        stack.add(v);\r\n\r\n        while (!stack.isEmpty()) {\r\n            var n = stack.pop();\r\n            if (!visited[n]) {\r\n                if (n == goal) {\r\n                    System.err.print(infoLinkedList.get(1).nameStation + &quot;:&quot;);\r\n                    System.err.print(&quot; |&quot; + goal + &quot;| -&gt; &quot;);\r\n                    return;\r\n                }\r\n                visited[n] = true;\r\n                Iterator&lt;Integer&gt; i = adj[n].listIterator();\r\n                while (i.hasNext()) {\r\n                    stack.add(i.next());\r\n                }\r\n            }\r\n        }\r\n    }\r\n```","title":"Depth First Search algorithm with target node","body":"<p>Your algorithm is not DFS, it visits the neighbours of the node <code>v</code> and that's it. A DFS would look something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>void DFSUtil(int v, int goal, boolean visited[]) {\n        Stack&lt;Integer&gt; stack = new Stack&lt;&gt;();\n        stack.add(v);\n\n        while (!stack.isEmpty()) {\n            var n = stack.pop();\n            if (!visited[n]) {\n                if (n == goal) {\n                    System.err.print(infoLinkedList.get(1).nameStation + &quot;:&quot;);\n                    System.err.print(&quot; |&quot; + goal + &quot;| -&gt; &quot;);\n                    return;\n                }\n                visited[n] = true;\n                Iterator&lt;Integer&gt; i = adj[n].listIterator();\n                while (i.hasNext()) {\n                    stack.add(i.next());\n                }\n            }\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":17276750,"reputation":43,"user_id":12511226,"display_name":"Yara Abd"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":246,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75008677,"answer_count":1,"score":0,"last_activity_date":1672851099,"creation_date":1672850217,"question_id":75008512,"body_markdown":"I have to use DFS algorithm for my university project. I saw this link [DFS][1] but i face this problem. The Depth First Search algorithm is Traversal it goes to every node in the graph but i want to define a target node when i reach to it i want to stop the algorithm\r\ni tried the following code but it still go to all node\r\n\r\n    void DFSUtil(int v, int goal, boolean visited[]) {\r\n                visited[v] = true;\r\n\r\n                Iterator&lt;Integer&gt; i = adj[v].listIterator();\r\n    \r\n                while (i.hasNext()) {\r\n                    int n = i.next();\r\n                    if (!visited[n]) {\r\n                        if (n == goal) {\r\n                            System.err.print(infoLinkedList.get(1).nameStation+&quot;:&quot;);\r\n                            System.err.print(&quot; |&quot;+goal+ &quot;| -&gt; &quot;);\r\n                            return;\r\n                        }\r\n                    }\r\n                }\r\n        }\r\n\r\n\r\n  [1]: https://www.javatpoint.com/depth-first-search-algorithm","title":"Depth First Search algorithm with target node","body":"<p>I have to use DFS algorithm for my university project. I saw this link <a href=\"https://www.javatpoint.com/depth-first-search-algorithm\" rel=\"nofollow noreferrer\">DFS</a> but i face this problem. The Depth First Search algorithm is Traversal it goes to every node in the graph but i want to define a target node when i reach to it i want to stop the algorithm\ni tried the following code but it still go to all node</p>\n<pre><code>void DFSUtil(int v, int goal, boolean visited[]) {\n            visited[v] = true;\n\n            Iterator&lt;Integer&gt; i = adj[v].listIterator();\n\n            while (i.hasNext()) {\n                int n = i.next();\n                if (!visited[n]) {\n                    if (n == goal) {\n                        System.err.print(infoLinkedList.get(1).nameStation+&quot;:&quot;);\n                        System.err.print(&quot; |&quot;+goal+ &quot;| -&gt; &quot;);\n                        return;\n                    }\n                }\n            }\n    }\n</code></pre>\n"},{"tags":["java","mongodb","reactive"],"owner":{"account_id":25986960,"reputation":1,"user_id":19699811,"display_name":"Igor G"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672850965,"creation_date":1672850965,"question_id":75008648,"body_markdown":"We run the same query using reactive and non-reactive mongodb clients on the same mongodb servers and same collection (mongoTemplate is of type `MongoTemplate `and `ReactiveMongoTemplate`) respectively)\r\n \r\n&gt; Pageable pageable = PageRequest.of(0, 5000);\r\n&gt; Query query = new Query().with(pageable);\r\n&gt; query.fields().include(fieldsToProject.toArray(String[]::new));\r\n&gt; return mongoTemplate.find(query, MyEntity.class);\r\n&gt; \r\nOn reactive it takes about **twice** more time\r\n\r\nI found some info that reactive is a bit heavier but not THAT much.\r\nI was expecting to see similar of slightly different performance but not that much difference\r\nIs there indeed some known issue about it? Any idea how to troubleshoot?\r\n\r\nthank you\r\n","title":"Reactive mongodb performance vs non-reactive","body":"<p>We run the same query using reactive and non-reactive mongodb clients on the same mongodb servers and same collection (mongoTemplate is of type <code>MongoTemplate </code>and <code>ReactiveMongoTemplate</code>) respectively)</p>\n<blockquote>\n<p>Pageable pageable = PageRequest.of(0, 5000);\nQuery query = new Query().with(pageable);\nquery.fields().include(fieldsToProject.toArray(String[]::new));\nreturn mongoTemplate.find(query, MyEntity.class);</p>\n</blockquote>\n<p>On reactive it takes about <strong>twice</strong> more time</p>\n<p>I found some info that reactive is a bit heavier but not THAT much.\nI was expecting to see similar of slightly different performance but not that much difference\nIs there indeed some known issue about it? Any idea how to troubleshoot?</p>\n<p>thank you</p>\n"},{"tags":["java","email","outlook","azure-ad-graph-api"],"answers":[{"tags":[],"owner":{"account_id":131793,"reputation":64005,"user_id":332059,"accept_rate":57,"display_name":"Dmitry Streblechenko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672850902,"creation_date":1672850902,"answer_id":75008632,"question_id":75007034,"body_markdown":"No headers will be copied in replies. You cannot even expect the subject to be the same since the user can change it. Your best hope is that &quot;in-Reply-To&quot; header will be set to the message id of your original email. ","title":"Header missing in mail reply","body":"<p>No headers will be copied in replies. You cannot even expect the subject to be the same since the user can change it. Your best hope is that &quot;in-Reply-To&quot; header will be set to the message id of your original email.</p>\n"}],"owner":{"account_id":25547109,"reputation":1,"user_id":19332246,"display_name":"Nishant Kumar Jain"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672850902,"creation_date":1672843192,"question_id":75007034,"body_markdown":"I was trying to send mail with graphClient with custom headers and expecting same headers in reply mails also so that i can track my conversation but i didn&#39;t got same headers in reply is that any way to got same headers in all reply .\r\n\r\n    \tMessage message = new Message();\r\n    \tmessage.subject = &quot;9/9/2018: DRaft _ testing&quot;;\r\n    \tItemBody body = new ItemBody();\r\n    \tbody.content = &quot;The group represents Nevada.&quot;;\r\n    \tmessage.body = body;\r\n    \tLinkedList&lt;Recipient&gt; toRecipientsList = new LinkedList&lt;Recipient&gt;();\r\n    \tRecipient toRecipients = new Recipient();\r\n    \tEmailAddress emailAddress = new EmailAddress();\r\n    \temailAddress.address = &quot;dummy@ggg.net&quot;;\r\n    \ttoRecipients.emailAddress = emailAddress;\r\n    \ttoRecipientsList.add(toRecipients);\r\n    \tmessage.toRecipients = toRecipientsList;\r\n    \r\n    \tSingleValueLegacyExtendedProperty singleValueLegacyExtendedProperty = new SingleValueLegacyExtendedProperty();\r\n    \tsingleValueLegacyExtendedProperty.id=&quot;propery-id_graph&quot;;\r\n    \tsingleValueLegacyExtendedProperty.value =&quot;propery-id_graph/Aamir&quot;;\r\n    \tList&lt;SingleValueLegacyExtendedProperty&gt; singleValueLegacyExtendedProperties = new LinkedList&lt;&gt;();\r\n    \tsingleValueLegacyExtendedProperties.add(singleValueLegacyExtendedProperty);\r\n    \tSingleValueLegacyExtendedPropertyCollectionRequestBuilder builder=new SingleValueLegacyExtendedPropertyCollectionRequestBuilder()\r\n    \tmessage.singleValueExtendedProperties = new SingleValueLegacyExtendedPropertyCollectionPage(singleValueLegacyExtendedProperties);\r\n    \tLinkedList&lt;InternetMessageHeader&gt; internetMessageHeadersList = new LinkedList&lt;InternetMessageHeader&gt;();\r\n    \tInternetMessageHeader internetMessageHeaders = new InternetMessageHeader();\r\n    \tinternetMessageHeaders.name = &quot;x-Header-1&quot;;\r\n    \tinternetMessageHeaders.value = &quot;aaa&quot;;\r\n    \tinternetMessageHeadersList.add(internetMessageHeaders);\r\n    \tInternetMessageHeader internetMessageHeaders1 = new InternetMessageHeader();\r\n    \tinternetMessageHeaders1.name = &quot;x-Header-2&quot;;\r\n    \tinternetMessageHeaders1.value = &quot;bbb&quot;;\r\n    \tinternetMessageHeadersList.add(internetMessageHeaders1);\r\n    \tmessage.internetMessageHeaders = internetMessageHeadersList;","title":"Header missing in mail reply","body":"<p>I was trying to send mail with graphClient with custom headers and expecting same headers in reply mails also so that i can track my conversation but i didn't got same headers in reply is that any way to got same headers in all reply .</p>\n<pre><code>    Message message = new Message();\n    message.subject = &quot;9/9/2018: DRaft _ testing&quot;;\n    ItemBody body = new ItemBody();\n    body.content = &quot;The group represents Nevada.&quot;;\n    message.body = body;\n    LinkedList&lt;Recipient&gt; toRecipientsList = new LinkedList&lt;Recipient&gt;();\n    Recipient toRecipients = new Recipient();\n    EmailAddress emailAddress = new EmailAddress();\n    emailAddress.address = &quot;dummy@ggg.net&quot;;\n    toRecipients.emailAddress = emailAddress;\n    toRecipientsList.add(toRecipients);\n    message.toRecipients = toRecipientsList;\n\n    SingleValueLegacyExtendedProperty singleValueLegacyExtendedProperty = new SingleValueLegacyExtendedProperty();\n    singleValueLegacyExtendedProperty.id=&quot;propery-id_graph&quot;;\n    singleValueLegacyExtendedProperty.value =&quot;propery-id_graph/Aamir&quot;;\n    List&lt;SingleValueLegacyExtendedProperty&gt; singleValueLegacyExtendedProperties = new LinkedList&lt;&gt;();\n    singleValueLegacyExtendedProperties.add(singleValueLegacyExtendedProperty);\n    SingleValueLegacyExtendedPropertyCollectionRequestBuilder builder=new SingleValueLegacyExtendedPropertyCollectionRequestBuilder()\n    message.singleValueExtendedProperties = new SingleValueLegacyExtendedPropertyCollectionPage(singleValueLegacyExtendedProperties);\n    LinkedList&lt;InternetMessageHeader&gt; internetMessageHeadersList = new LinkedList&lt;InternetMessageHeader&gt;();\n    InternetMessageHeader internetMessageHeaders = new InternetMessageHeader();\n    internetMessageHeaders.name = &quot;x-Header-1&quot;;\n    internetMessageHeaders.value = &quot;aaa&quot;;\n    internetMessageHeadersList.add(internetMessageHeaders);\n    InternetMessageHeader internetMessageHeaders1 = new InternetMessageHeader();\n    internetMessageHeaders1.name = &quot;x-Header-2&quot;;\n    internetMessageHeaders1.value = &quot;bbb&quot;;\n    internetMessageHeadersList.add(internetMessageHeaders1);\n    message.internetMessageHeaders = internetMessageHeadersList;\n</code></pre>\n"},{"tags":["java","activemq"],"answers":[{"tags":[],"owner":{"account_id":11434008,"reputation":30690,"user_id":8381946,"display_name":"Justin Bertram"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1672813320,"creation_date":1672813320,"answer_id":75001606,"question_id":75001504,"body_markdown":"The value for `${activemq.data}` is read from the environment variable `$ACTIVEMQ_DATA` by the `activemq` script when starting the broker. For example, when you start the broker using the default configuration you&#39;ll see this logged:\r\n```\r\n$ ./activemq console\r\n...\r\nACTIVEMQ_HOME: /home/jbertram/java/apache-activemq-5.15.8\r\nACTIVEMQ_BASE: /home/jbertram/java/apache-activemq-5.15.8\r\nACTIVEMQ_CONF: /home/jbertram/java/apache-activemq-5.15.8/conf\r\nACTIVEMQ_DATA: /home/jbertram/java/apache-activemq-5.15.8/data\r\nLoading message broker from: xbean:activemq.xml\r\n...\r\n```\r\nHowever, if you set the `$ACTIVEMQ_DATA` variable to something else, e.g.:\r\n```\r\n$ export ACTIVEMQ_DATA=/tmp\r\n```\r\nThen this will be logged:\r\n```\r\n$ ./activemq console\r\n...\r\nACTIVEMQ_HOME: /home/jbertram/java/apache-activemq-5.15.8\r\nACTIVEMQ_BASE: /home/jbertram/java/apache-activemq-5.15.8\r\nACTIVEMQ_CONF: /home/jbertram/java/apache-activemq-5.15.8/conf\r\nACTIVEMQ_DATA: /tmp\r\nLoading message broker from: xbean:activemq.xml\r\n...\r\n```\r\nYou can also change this using the `bin/env` file. This is what the default `env` contains:\r\n```\r\n...\r\n# Active MQ installation dirs\r\n# ACTIVEMQ_HOME=&quot;&lt;Installationdir&gt;/&quot;\r\n# ACTIVEMQ_BASE=&quot;$ACTIVEMQ_HOME&quot;\r\n# ACTIVEMQ_CONF=&quot;$ACTIVEMQ_BASE/conf&quot;\r\n# ACTIVEMQ_DATA=&quot;$ACTIVEMQ_BASE/data&quot;\r\n# ACTIVEMQ_TMP=&quot;$ACTIVEMQ_BASE/tmp&quot;\r\n...\r\n```\r\nYou could change this to be something like this:\r\n```\r\n...\r\n# Active MQ installation dirs\r\n# ACTIVEMQ_HOME=&quot;&lt;Installationdir&gt;/&quot;\r\n# ACTIVEMQ_BASE=&quot;$ACTIVEMQ_HOME&quot;\r\n# ACTIVEMQ_CONF=&quot;$ACTIVEMQ_BASE/conf&quot;\r\nACTIVEMQ_DATA=&quot;/tmp&quot;\r\n# ACTIVEMQ_TMP=&quot;$ACTIVEMQ_BASE/tmp&quot;\r\n...\r\n```\r\nIt&#39;s worth noting that ActiveMQ &quot;Classic&quot; 5.15.0 was released in June of 2017 (i.e. over 5 years ago now). I strongly recommend you upgrade to a more recent release, ideally [the latest][1].\r\n\r\n\r\n  [1]: https://activemq.apache.org/components/classic/download/","title":"ActiveMQ data and conf folder needs to be changed to different file system in Linux","body":"<p>The value for <code>${activemq.data}</code> is read from the environment variable <code>$ACTIVEMQ_DATA</code> by the <code>activemq</code> script when starting the broker. For example, when you start the broker using the default configuration you'll see this logged:</p>\n<pre><code>$ ./activemq console\n...\nACTIVEMQ_HOME: /home/jbertram/java/apache-activemq-5.15.8\nACTIVEMQ_BASE: /home/jbertram/java/apache-activemq-5.15.8\nACTIVEMQ_CONF: /home/jbertram/java/apache-activemq-5.15.8/conf\nACTIVEMQ_DATA: /home/jbertram/java/apache-activemq-5.15.8/data\nLoading message broker from: xbean:activemq.xml\n...\n</code></pre>\n<p>However, if you set the <code>$ACTIVEMQ_DATA</code> variable to something else, e.g.:</p>\n<pre><code>$ export ACTIVEMQ_DATA=/tmp\n</code></pre>\n<p>Then this will be logged:</p>\n<pre><code>$ ./activemq console\n...\nACTIVEMQ_HOME: /home/jbertram/java/apache-activemq-5.15.8\nACTIVEMQ_BASE: /home/jbertram/java/apache-activemq-5.15.8\nACTIVEMQ_CONF: /home/jbertram/java/apache-activemq-5.15.8/conf\nACTIVEMQ_DATA: /tmp\nLoading message broker from: xbean:activemq.xml\n...\n</code></pre>\n<p>You can also change this using the <code>bin/env</code> file. This is what the default <code>env</code> contains:</p>\n<pre><code>...\n# Active MQ installation dirs\n# ACTIVEMQ_HOME=&quot;&lt;Installationdir&gt;/&quot;\n# ACTIVEMQ_BASE=&quot;$ACTIVEMQ_HOME&quot;\n# ACTIVEMQ_CONF=&quot;$ACTIVEMQ_BASE/conf&quot;\n# ACTIVEMQ_DATA=&quot;$ACTIVEMQ_BASE/data&quot;\n# ACTIVEMQ_TMP=&quot;$ACTIVEMQ_BASE/tmp&quot;\n...\n</code></pre>\n<p>You could change this to be something like this:</p>\n<pre><code>...\n# Active MQ installation dirs\n# ACTIVEMQ_HOME=&quot;&lt;Installationdir&gt;/&quot;\n# ACTIVEMQ_BASE=&quot;$ACTIVEMQ_HOME&quot;\n# ACTIVEMQ_CONF=&quot;$ACTIVEMQ_BASE/conf&quot;\nACTIVEMQ_DATA=&quot;/tmp&quot;\n# ACTIVEMQ_TMP=&quot;$ACTIVEMQ_BASE/tmp&quot;\n...\n</code></pre>\n<p>It's worth noting that ActiveMQ &quot;Classic&quot; 5.15.0 was released in June of 2017 (i.e. over 5 years ago now). I strongly recommend you upgrade to a more recent release, ideally <a href=\"https://activemq.apache.org/components/classic/download/\" rel=\"nofollow noreferrer\">the latest</a>.</p>\n"}],"owner":{"account_id":27333419,"reputation":5,"user_id":20845225,"display_name":"Ashutosh Kumar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":331,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75001606,"answer_count":1,"score":0,"last_activity_date":1672850577,"creation_date":1672812306,"question_id":75001504,"body_markdown":"I have downloaded and setup ActiveMQ 5.15.0 in my machine and followed this [guide.](https://activemq.apache.org/getting-started)\r\n\r\nIn `conf` folder I see in `conf/log4j.properties` there is a line with the path for Log Location.\r\n```text\r\nlog4j.appender.logfile.file=${activemq.data}/activemq.log \r\n```\r\nHow this variable `${activemq.data}` is configured and how to change it?","title":"ActiveMQ data and conf folder needs to be changed to different file system in Linux","body":"<p>I have downloaded and setup ActiveMQ 5.15.0 in my machine and followed this <a href=\"https://activemq.apache.org/getting-started\" rel=\"nofollow noreferrer\">guide.</a></p>\n<p>In <code>conf</code> folder I see in <code>conf/log4j.properties</code> there is a line with the path for Log Location.</p>\n<pre><code>log4j.appender.logfile.file=${activemq.data}/activemq.log \n</code></pre>\n<p>How this variable <code>${activemq.data}</code> is configured and how to change it?</p>\n"},{"tags":["java","swing","jtextpane","imageicon"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":1,"creation_date":1672569789,"post_id":74974107,"comment_id":132306798,"body_markdown":"Refer to [JTextPane appending a new string](https://stackoverflow.com/questions/4059198/jtextpane-appending-a-new-string)","body":"Refer to <a href=\"https://stackoverflow.com/questions/4059198/jtextpane-appending-a-new-string\">JTextPane appending a new string</a>"},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1672570305,"post_id":74974107,"comment_id":132306833,"body_markdown":"Have you considered using HTML based text?","body":"Have you considered using HTML based text?"},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1672572429,"post_id":74974107,"comment_id":132307036,"body_markdown":"Maybe using something like [this example](https://stackoverflow.com/questions/52232214/adding-image-and-text-to-jtextpane/52232322#52232322)","body":"Maybe using something like <a href=\"https://stackoverflow.com/questions/52232214/adding-image-and-text-to-jtextpane/52232322#52232322\">this example</a>"}],"answers":[{"tags":[],"owner":{"account_id":1295413,"reputation":617,"user_id":1246600,"display_name":"Michael"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1672850545,"creation_date":1672763770,"answer_id":74996125,"question_id":74974107,"body_markdown":"Here&#39;s how you can vertically align images in a JTextPane using the underlying [StyledDocument][1]. With this document, you can manually add line breaks at a position of your choice.\r\n\r\n    BufferedImage img1 = ...\r\n    BufferedImage img2 = ...\r\n\r\n    // add first image\r\n    jTextPane.insertIcon(img1);\r\n\r\n    // add line break at the end\r\n    StyledDocument doc = jTextPane.getStyledDocument();\r\n    doc.insertString(doc.getLength(), &quot;\\n&quot; , null);\r\n\r\n    // add second image\r\n    jTextPane.insertIcon(img2);\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/javax/swing/text/StyledDocument.html","title":"How to show ImageIcons in JTextPane only vertically, one below the other?","body":"<p>Here's how you can vertically align images in a JTextPane using the underlying <a href=\"https://docs.oracle.com/javase/7/docs/api/javax/swing/text/StyledDocument.html\" rel=\"nofollow noreferrer\">StyledDocument</a>. With this document, you can manually add line breaks at a position of your choice.</p>\n<pre><code>BufferedImage img1 = ...\nBufferedImage img2 = ...\n\n// add first image\njTextPane.insertIcon(img1);\n\n// add line break at the end\nStyledDocument doc = jTextPane.getStyledDocument();\ndoc.insertString(doc.getLength(), &quot;\\n&quot; , null);\n\n// add second image\njTextPane.insertIcon(img2);\n</code></pre>\n"}],"owner":{"account_id":23761543,"reputation":59,"user_id":17776870,"display_name":"Danilo Djurovic"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74996125,"answer_count":1,"score":1,"last_activity_date":1672850545,"creation_date":1672568758,"question_id":74974107,"body_markdown":"I&#39;m getting BufferdImages from a device and converting them to ImageIcons and showing them in JTextPane.\r\n\r\n    public static void insertImage(BufferedImage img, JTextPane jTextPane){\r\n\r\n        ImageIcon icon = new ImageIcon(img);\r\n        jTextPane.insertIcon(icon);\r\n\r\n    }\r\n\r\nMy problem is that images are added one after another in one line and I have to scroll horizontally to see them.\r\nI want each new ImageIcon to go below the previous one, in other words, to add a new line after each ImageIcon.\r\n\r\nI tried doing `jTextPane.setText(&quot;\\n&quot;);` after adding each image, but this only reset the whole jTextPane.\r\n\r\nI need to show these images in a Swing application among some other data, and if someone has a better suggestion on what to use instead jTextPane for this purpose, please suggest it.\r\n\r\nThanks in advance.","title":"How to show ImageIcons in JTextPane only vertically, one below the other?","body":"<p>I'm getting BufferdImages from a device and converting them to ImageIcons and showing them in JTextPane.</p>\n<pre><code>public static void insertImage(BufferedImage img, JTextPane jTextPane){\n\n    ImageIcon icon = new ImageIcon(img);\n    jTextPane.insertIcon(icon);\n\n}\n</code></pre>\n<p>My problem is that images are added one after another in one line and I have to scroll horizontally to see them.\nI want each new ImageIcon to go below the previous one, in other words, to add a new line after each ImageIcon.</p>\n<p>I tried doing <code>jTextPane.setText(&quot;\\n&quot;);</code> after adding each image, but this only reset the whole jTextPane.</p>\n<p>I need to show these images in a Swing application among some other data, and if someone has a better suggestion on what to use instead jTextPane for this purpose, please suggest it.</p>\n<p>Thanks in advance.</p>\n"},{"tags":["java","spring","unit-testing"],"comments":[{"owner":{"account_id":18002520,"reputation":324,"user_id":13084140,"display_name":"Ryednap"},"score":0,"creation_date":1672845505,"post_id":75007487,"comment_id":132365202,"body_markdown":"Place your code here. It&#39;s tough to identify problems just by reading your words..","body":"Place your code here. It&#39;s tough to identify problems just by reading your words.."},{"owner":{"account_id":25565209,"reputation":11,"user_id":19346819,"display_name":"Bibou"},"score":0,"creation_date":1672848062,"post_id":75007487,"comment_id":132366308,"body_markdown":"@Ryednap I updated the post, do you have a suggestion ?","body":"@Ryednap I updated the post, do you have a suggestion ?"},{"owner":{"account_id":18002520,"reputation":324,"user_id":13084140,"display_name":"Ryednap"},"score":0,"creation_date":1672849016,"post_id":75007487,"comment_id":132366588,"body_markdown":"Are you wiring `entityManager` in your test class? As you are having the usage of that in your `setup()` method","body":"Are you wiring <code>entityManager</code> in your test class? As you are having the usage of that in your <code>setup()</code> method"},{"owner":{"account_id":25565209,"reputation":11,"user_id":19346819,"display_name":"Bibou"},"score":0,"creation_date":1672850569,"post_id":75007487,"comment_id":132367173,"body_markdown":"I added @Autowired, but still getting the same error.","body":"I added @Autowired, but still getting the same error."},{"owner":{"account_id":18002520,"reputation":324,"user_id":13084140,"display_name":"Ryednap"},"score":0,"creation_date":1672852093,"post_id":75007487,"comment_id":132367746,"body_markdown":"For the wiring to work you need to annotate your test class with `@SpringBootTest`. By default, it is not injected. Kindly confirm if this solves your problem.","body":"For the wiring to work you need to annotate your test class with <code>@SpringBootTest</code>. By default, it is not injected. Kindly confirm if this solves your problem."}],"owner":{"account_id":25565209,"reputation":11,"user_id":19346819,"display_name":"Bibou"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672850464,"creation_date":1672845211,"question_id":75007487,"body_markdown":"I have a unit test that covers a `@transactional` method, however, I&#39;m getting No EntityManager when I try to run it. As I&#39;ve seen in many places, I put the `@Transactional` annotation before the test method, I tried also before the whole class, but still had the same issue.\r\n```java\r\n@Transactional\r\n@RunWith(KronosSpringTestRunner.class)\r\n@ClassesToTest(classes = {\r\n      \r\n}, bindAllMocks = true\r\n)\r\npublic class ShiftAuditJPADataReadUsingIndexServiceTest {\r\n\r\n    @Inject\r\n    private ShiftAuditJPADataReadUsingIndexService underTest;\r\n\r\n\r\n    @Before\r\n    public void setup() {\r\n\r\n        when(entityManager.unwrap(Session.class)).thenReturn(sessionMock);\r\n    }\r\n\r\n    @Test\r\n    public void test_findByEmployee() {\r\n    \r\n\r\n        List&lt;ShiftAudit&gt; expected = Collections.singletonList(new ShiftAudit());\r\n\r\n        when(properties.getProperty(QUERY_BATCH_SIZE, DEFAULT_QUERY_BATCH_SIZE)).thenReturn(DEFAULT_QUERY_BATCH_SIZE);\r\n\r\n        when(sessionMock.createSQLQuery(anyString())).thenReturn(sqlQuery);\r\n        when(sqlQuery.setResultTransformer(any(ResultTransformer.class))).thenReturn(queryMock);\r\n        when(jpaDataReadServiceHelper.queryList(sqlQuery, employeeIds, scheduleStartDate, scheduleEndDate, false)).thenReturn(expected);\r\n\r\n        Collection&lt;ShiftAudit&gt; actual = underTest.findByEmployee(employeeId, scheduleStartDate, scheduleEndDate, false);\r\n\r\n        assertEquals(expected, actual);\r\n        verify(sessionMock).createSQLQuery(anyString());\r\n    }\r\n\r\n```\r\n    \r\n\r\n\r\n\r\n\r\n","title":"Unit test fail with No EntityManager available","body":"<p>I have a unit test that covers a <code>@transactional</code> method, however, I'm getting No EntityManager when I try to run it. As I've seen in many places, I put the <code>@Transactional</code> annotation before the test method, I tried also before the whole class, but still had the same issue.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Transactional\n@RunWith(KronosSpringTestRunner.class)\n@ClassesToTest(classes = {\n      \n}, bindAllMocks = true\n)\npublic class ShiftAuditJPADataReadUsingIndexServiceTest {\n\n    @Inject\n    private ShiftAuditJPADataReadUsingIndexService underTest;\n\n\n    @Before\n    public void setup() {\n\n        when(entityManager.unwrap(Session.class)).thenReturn(sessionMock);\n    }\n\n    @Test\n    public void test_findByEmployee() {\n    \n\n        List&lt;ShiftAudit&gt; expected = Collections.singletonList(new ShiftAudit());\n\n        when(properties.getProperty(QUERY_BATCH_SIZE, DEFAULT_QUERY_BATCH_SIZE)).thenReturn(DEFAULT_QUERY_BATCH_SIZE);\n\n        when(sessionMock.createSQLQuery(anyString())).thenReturn(sqlQuery);\n        when(sqlQuery.setResultTransformer(any(ResultTransformer.class))).thenReturn(queryMock);\n        when(jpaDataReadServiceHelper.queryList(sqlQuery, employeeIds, scheduleStartDate, scheduleEndDate, false)).thenReturn(expected);\n\n        Collection&lt;ShiftAudit&gt; actual = underTest.findByEmployee(employeeId, scheduleStartDate, scheduleEndDate, false);\n\n        assertEquals(expected, actual);\n        verify(sessionMock).createSQLQuery(anyString());\n    }\n\n</code></pre>\n"},{"tags":["java","junit","jakarta-mail","mime-message"],"answers":[{"tags":[],"owner":{"account_id":2826194,"reputation":10795,"user_id":2428802,"display_name":"jmehrens"},"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1672850458,"creation_date":1496930829,"answer_id":44438011,"question_id":44435457,"body_markdown":"Fix the [most common mistakes people make when using JavaMail][1] in your code first.\r\n\r\n[DNS lookup][2] can hurt performance on some machines. For the JDK you can change the security properties for caching DNS lookup [`networkaddress.cache.ttl` and `networkaddress.cache.negative.ttl`][3] or set the system properties [`sun.net.inetaddr.ttl` and `sun.net.inetaddr.negative.ttl`][3].  The default behavior in JDK 7 and later does a good job of caching so you shouldn&#39;t have to change these settings.\r\n\r\nPreferably, you can use the session properties to avoid some these lookups.\r\n\r\n1. Add session property for [`mail.from` or `mail.host`][5] (these exact key names) as either property will prevent the name lookup inside of [`InternetAddress.getLocalAddress(Session)`][6].  These properties can be set in addition to or without their counterpart properties which contain the protocol in the key names (more on that later).  These properties will improve the performance of [`MimeMessage.saveChanges()`][7], [`MimeMessage.updateHeaders()`][8], [`MimeMessage.updateMessageID()`][9], and [`MimeMessage.setFrom()`][10] which all call `InternetAddress::getLocalAddress`.  If the above properties are not set then this method will attempt to query for the host name.  By setting the properties, this method will pull the host name string from the session instead of attempting the expensive DNS lookup.\r\n2. Set the session property for [`mail.smtp.localhost` or `mail.smtps.localhost`][4] to prevent name lookup on the HELO command on transport.\r\n3. Set session property for [`mail.smtp.from` or `mail.smtps.from`][11] to prevent lookup on EHLO command on transport.\r\n4. Alternatively, you can set the system property [`mail.mime.address.usecanonicalhostname`][12] to `false` if your code is relying on the [`setFrom()`][10] but this will be handled if you applied point #1.\r\n5. For IMAP, you can try to set [`mail.imap.sasl.usecanonicalhostname` or `mail.imaps.sasl.usecanonicalhostname`][13] to `false` which is the default value.\r\n\r\nSince your are not transporting a message, apply rule #1 by changing your code to:\r\n\r\n    @Test\r\n    public void test1() throws MessagingException, IOException {\r\n        Properties props = new Properties();\r\n        props.put(&quot;mail.host&quot;, &quot;localhost&quot;); //Or use IP.\r\n        Session s = Session.getInstance(props);\r\n        MimeMessage m = new MimeMessage(s);\r\n        m.setContent(&quot;&lt;b&gt;Hello&lt;/b&gt;&quot;, &quot;text/html; charset=utf-8&quot;);\r\n        m.saveChanges();\r\n        assertEquals(m.getContent(), &quot;&lt;b&gt;Hello&lt;/b&gt;&quot;);\r\n        assertEquals(m.getContentType(), &quot;text/html; charset=utf-8&quot;);\r\n    }\r\n\r\nIf you are transporting a message then combine the rules #1, #2, and #3 which will prevent accessing the host system for a name lookup.  If you want to prevent all DNS lookups during a transport then you have to use IP addresses.\r\n\r\n  [1]: https://javaee.github.io/javamail/FAQ#commonmistakes\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/net/InetAddress.html#getCanonicalHostName--\r\n  [3]: https://docs.oracle.com/javase/8/docs/technotes/guides/net/properties.html\r\n  [4]: https://javaee.github.io/javamail/docs/api/com/sun/mail/smtp/package-summary.html\r\n  [5]: https://javaee.github.io/javamail/docs/api/\r\n  [6]: https://javaee.github.io/javamail/docs/api/javax/mail/internet/InternetAddress.html#getLocalAddress-javax.mail.Session-\r\n  [7]: https://javaee.github.io/javamail/docs/api/javax/mail/internet/MimeMessage.html#saveChanges--\r\n  [8]: https://javaee.github.io/javamail/docs/api/javax/mail/internet/MimeMessage.html#updateHeaders--\r\n  [9]: https://javaee.github.io/javamail/docs/api/javax/mail/internet/MimeMessage.html#updateMessageID--\r\n  [10]: https://javaee.github.io/javamail/docs/api/javax/mail/internet/MimeMessage.html#setFrom--\r\n  [11]: https://javaee.github.io/javamail/docs/api/com/sun/mail/smtp/SMTPTransport.html#ehlo-java.lang.String-\r\n  [12]: https://javaee.github.io/javamail/docs/api/javax/mail/internet/package-summary.html\r\n  [13]: https://javaee.github.io/javamail/docs/api/com/sun/mail/imap/package-summary.html","title":"MimeMessage.saveChanges is really slow","body":"<p>Fix the <a href=\"https://javaee.github.io/javamail/FAQ#commonmistakes\" rel=\"nofollow noreferrer\">most common mistakes people make when using JavaMail</a> in your code first.</p>\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/net/InetAddress.html#getCanonicalHostName--\" rel=\"nofollow noreferrer\">DNS lookup</a> can hurt performance on some machines. For the JDK you can change the security properties for caching DNS lookup <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/net/properties.html\" rel=\"nofollow noreferrer\"><code>networkaddress.cache.ttl</code> and <code>networkaddress.cache.negative.ttl</code></a> or set the system properties <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/net/properties.html\" rel=\"nofollow noreferrer\"><code>sun.net.inetaddr.ttl</code> and <code>sun.net.inetaddr.negative.ttl</code></a>.  The default behavior in JDK 7 and later does a good job of caching so you shouldn't have to change these settings.</p>\n<p>Preferably, you can use the session properties to avoid some these lookups.</p>\n<ol>\n<li>Add session property for <a href=\"https://javaee.github.io/javamail/docs/api/\" rel=\"nofollow noreferrer\"><code>mail.from</code> or <code>mail.host</code></a> (these exact key names) as either property will prevent the name lookup inside of <a href=\"https://javaee.github.io/javamail/docs/api/javax/mail/internet/InternetAddress.html#getLocalAddress-javax.mail.Session-\" rel=\"nofollow noreferrer\"><code>InternetAddress.getLocalAddress(Session)</code></a>.  These properties can be set in addition to or without their counterpart properties which contain the protocol in the key names (more on that later).  These properties will improve the performance of <a href=\"https://javaee.github.io/javamail/docs/api/javax/mail/internet/MimeMessage.html#saveChanges--\" rel=\"nofollow noreferrer\"><code>MimeMessage.saveChanges()</code></a>, <a href=\"https://javaee.github.io/javamail/docs/api/javax/mail/internet/MimeMessage.html#updateHeaders--\" rel=\"nofollow noreferrer\"><code>MimeMessage.updateHeaders()</code></a>, <a href=\"https://javaee.github.io/javamail/docs/api/javax/mail/internet/MimeMessage.html#updateMessageID--\" rel=\"nofollow noreferrer\"><code>MimeMessage.updateMessageID()</code></a>, and <a href=\"https://javaee.github.io/javamail/docs/api/javax/mail/internet/MimeMessage.html#setFrom--\" rel=\"nofollow noreferrer\"><code>MimeMessage.setFrom()</code></a> which all call <code>InternetAddress::getLocalAddress</code>.  If the above properties are not set then this method will attempt to query for the host name.  By setting the properties, this method will pull the host name string from the session instead of attempting the expensive DNS lookup.</li>\n<li>Set the session property for <a href=\"https://javaee.github.io/javamail/docs/api/com/sun/mail/smtp/package-summary.html\" rel=\"nofollow noreferrer\"><code>mail.smtp.localhost</code> or <code>mail.smtps.localhost</code></a> to prevent name lookup on the HELO command on transport.</li>\n<li>Set session property for <a href=\"https://javaee.github.io/javamail/docs/api/com/sun/mail/smtp/SMTPTransport.html#ehlo-java.lang.String-\" rel=\"nofollow noreferrer\"><code>mail.smtp.from</code> or <code>mail.smtps.from</code></a> to prevent lookup on EHLO command on transport.</li>\n<li>Alternatively, you can set the system property <a href=\"https://javaee.github.io/javamail/docs/api/javax/mail/internet/package-summary.html\" rel=\"nofollow noreferrer\"><code>mail.mime.address.usecanonicalhostname</code></a> to <code>false</code> if your code is relying on the <a href=\"https://javaee.github.io/javamail/docs/api/javax/mail/internet/MimeMessage.html#setFrom--\" rel=\"nofollow noreferrer\"><code>setFrom()</code></a> but this will be handled if you applied point #1.</li>\n<li>For IMAP, you can try to set <a href=\"https://javaee.github.io/javamail/docs/api/com/sun/mail/imap/package-summary.html\" rel=\"nofollow noreferrer\"><code>mail.imap.sasl.usecanonicalhostname</code> or <code>mail.imaps.sasl.usecanonicalhostname</code></a> to <code>false</code> which is the default value.</li>\n</ol>\n<p>Since your are not transporting a message, apply rule #1 by changing your code to:</p>\n<pre><code>@Test\npublic void test1() throws MessagingException, IOException {\n    Properties props = new Properties();\n    props.put(&quot;mail.host&quot;, &quot;localhost&quot;); //Or use IP.\n    Session s = Session.getInstance(props);\n    MimeMessage m = new MimeMessage(s);\n    m.setContent(&quot;&lt;b&gt;Hello&lt;/b&gt;&quot;, &quot;text/html; charset=utf-8&quot;);\n    m.saveChanges();\n    assertEquals(m.getContent(), &quot;&lt;b&gt;Hello&lt;/b&gt;&quot;);\n    assertEquals(m.getContentType(), &quot;text/html; charset=utf-8&quot;);\n}\n</code></pre>\n<p>If you are transporting a message then combine the rules #1, #2, and #3 which will prevent accessing the host system for a name lookup.  If you want to prevent all DNS lookups during a transport then you have to use IP addresses.</p>\n"}],"owner":{"account_id":300614,"reputation":12850,"user_id":607846,"accept_rate":65,"display_name":"Baz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3265,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":44438011,"answer_count":1,"score":4,"last_activity_date":1672850458,"creation_date":1496923884,"question_id":44435457,"body_markdown":"The following test is taking around 5 seconds to execute due to the inclusion of `m.saveChanges()`.\r\n\r\n    import org.junit.Before;\r\n    import org.junit.Test;    \r\n    import javax.mail.MessagingException;\r\n    import javax.mail.Session;\r\n    import javax.mail.internet.MimeMessage;\r\n    import java.io.IOException;\r\n    import java.util.Properties;\r\n    import static org.junit.Assert.assertEquals;   \r\n    import static org.mockito.Mockito.mock;\r\n    import static org.mockito.Mockito.when;\r\n\r\n    @Test\r\n    public void test1() throws MessagingException, IOException {\r\n        Session s = Session.getDefaultInstance(new Properties());\r\n        MimeMessage m = new MimeMessage(s);\r\n        m.setContent(&quot;&lt;b&gt;Hello&lt;/b&gt;&quot;, &quot;text/html; charset=utf-8&quot;);\r\n        m.saveChanges();\r\n        assertEquals(m.getContent(), &quot;&lt;b&gt;Hello&lt;/b&gt;&quot;);\r\n        assertEquals(m.getContentType(), &quot;text/html; charset=utf-8&quot;);\r\n    }\r\n\r\nI have also mocked the Session with mockito but it doesn&#39;t help:\r\n\r\n    Session s = mock(Session.class);\r\n    when(s.getProperties()).thenReturn(new Properties());\r\n\r\n\r\nWhat is the problem here? What can I mock to speed things up?","title":"MimeMessage.saveChanges is really slow","body":"<p>The following test is taking around 5 seconds to execute due to the inclusion of <code>m.saveChanges()</code>.</p>\n\n<pre><code>import org.junit.Before;\nimport org.junit.Test;    \nimport javax.mail.MessagingException;\nimport javax.mail.Session;\nimport javax.mail.internet.MimeMessage;\nimport java.io.IOException;\nimport java.util.Properties;\nimport static org.junit.Assert.assertEquals;   \nimport static org.mockito.Mockito.mock;\nimport static org.mockito.Mockito.when;\n\n@Test\npublic void test1() throws MessagingException, IOException {\n    Session s = Session.getDefaultInstance(new Properties());\n    MimeMessage m = new MimeMessage(s);\n    m.setContent(\"&lt;b&gt;Hello&lt;/b&gt;\", \"text/html; charset=utf-8\");\n    m.saveChanges();\n    assertEquals(m.getContent(), \"&lt;b&gt;Hello&lt;/b&gt;\");\n    assertEquals(m.getContentType(), \"text/html; charset=utf-8\");\n}\n</code></pre>\n\n<p>I have also mocked the Session with mockito but it doesn't help:</p>\n\n<pre><code>Session s = mock(Session.class);\nwhen(s.getProperties()).thenReturn(new Properties());\n</code></pre>\n\n<p>What is the problem here? What can I mock to speed things up?</p>\n"},{"tags":["java","jenkins","spock","jenkins-spock"],"comments":[{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1672867551,"post_id":75008546,"comment_id":132372649,"body_markdown":"Please learn [how to ask a question on SO](https://stackoverflow.com/help/how-to-ask) and provide a [minimal, complete, and verifiable example](https://stackoverflow.com/help/mcve). Nobody here has a magic crystal globe. Thank you.","body":"Please learn <a href=\"https://stackoverflow.com/help/how-to-ask\">how to ask a question on SO</a> and provide a <a href=\"https://stackoverflow.com/help/mcve\">minimal, complete, and verifiable example</a>. Nobody here has a magic crystal globe. Thank you."},{"owner":{"account_id":3570177,"reputation":199,"user_id":3085387,"display_name":"Prabagaran Sellamuthu"},"score":0,"creation_date":1672876205,"post_id":75008546,"comment_id":132374547,"body_markdown":"The method has Jenkins.get() to get the Jenkins instance\nNow in spock ,I need to mock Jenkins class and set the instance back to Jenkins, how to set the instance","body":"The method has Jenkins.get() to get the Jenkins instance Now in spock ,I need to mock Jenkins class and set the instance back to Jenkins, how to set the instance"}],"owner":{"account_id":3570177,"reputation":199,"user_id":3085387,"display_name":"Prabagaran Sellamuthu"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":110,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672850441,"creation_date":1672850441,"question_id":75008546,"body_markdown":"I am writing a test for which having a Jenkins instance . so I need to mock the Jenkins class and set the instance to Jenkins. What is the method to set the instance?\r\n\r\nImport jenkins.model.Jenkins\r\n\r\n","title":"jenkins instance is missing when writing spock test","body":"<p>I am writing a test for which having a Jenkins instance . so I need to mock the Jenkins class and set the instance to Jenkins. What is the method to set the instance?</p>\n<p>Import jenkins.model.Jenkins</p>\n"},{"tags":["java","amazon-web-services","amazon-iam"],"answers":[{"tags":[],"owner":{"account_id":11259643,"reputation":1,"user_id":8258362,"display_name":"Kamandol"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672849789,"creation_date":1672849789,"answer_id":75008424,"question_id":72486224,"body_markdown":"I&#39;ve run into a similar situation by calling `simulate-principal-policy` directly:\r\n\r\n`AllowedByOrganizations: false` indicates there is an Organization SCP, an organisation-wide service control policy applied that somehow the simulator interprets as its denying access.\r\n\r\nThe issue in my case is that there are some of Org SCP that deny all kind of access to some regions, but not to others.\r\n\r\nThe simulator seems to be unable to discern a given region from others, or at least I did not find a way to overcome this problem.","title":"AWS Simulate principal policy Showing incorrect results","body":"<p>I've run into a similar situation by calling <code>simulate-principal-policy</code> directly:</p>\n<p><code>AllowedByOrganizations: false</code> indicates there is an Organization SCP, an organisation-wide service control policy applied that somehow the simulator interprets as its denying access.</p>\n<p>The issue in my case is that there are some of Org SCP that deny all kind of access to some regions, but not to others.</p>\n<p>The simulator seems to be unable to discern a given region from others, or at least I did not find a way to overcome this problem.</p>\n"}],"owner":{"account_id":19459171,"reputation":1,"user_id":14233802,"display_name":"Susheel Harsoor"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":300,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672849789,"creation_date":1654241882,"question_id":72486224,"body_markdown":"Iam trying to run simulateprincipalpolicy through java SDK and getting incorrect results.\r\n\r\nI have policy something like this and attached this policy to role &#39;Myrole&#39;:\r\n \r\n\r\n    {\r\n        &quot;Version&quot;: &quot;2012-10-17&quot;,\r\n        &quot;Statement&quot;: [\r\n            {\r\n                &quot;Sid&quot;: &quot;id&quot;,\r\n                &quot;Effect&quot;: &quot;Allow&quot;,\r\n                &quot;Action&quot;: [\r\n                    &quot;ec2:DescribeTags&quot;\r\n                ],\r\n                &quot;Resource&quot;: &quot;*&quot;\r\n            }\r\n        ]\r\n    }\r\n\r\nJava Code :\r\n\r\n    SimulatePrincipalPolicyRequest simulatePrincipalPolicyRequest = new SimulatePrincipalPolicyRequest()\r\n    simulatePrincipalPolicyRequest.setPolicySourceArn(&quot;arn:aws:iam::123456789012:role/Myrole&quot;);\r\n    simulatePrincipalPolicyRequest.withActionNames(&quot;ec2:DescribeTags&quot;);\r\n\r\n  \r\n    \r\nResult:\r\n\r\n    {\r\n    EvalActionName: ec2:DescribeTags\r\n    EvalResourceName: *\r\n    EvalDecision: implicitDeny\r\n    MatchedStatements: []\r\n    MissingContextValues: []\r\n    OrganizationsDecisionDetail: {AllowedByOrganizations: false}\r\n    EvalDecisionDetails: {}\r\n    ResourceSpecificResults: []\r\n    }\r\n\r\nThe response is incorrect because when i try to perform that action Im able to do so.\r\n","title":"AWS Simulate principal policy Showing incorrect results","body":"<p>Iam trying to run simulateprincipalpolicy through java SDK and getting incorrect results.</p>\n<p>I have policy something like this and attached this policy to role 'Myrole':</p>\n<pre><code>{\n    &quot;Version&quot;: &quot;2012-10-17&quot;,\n    &quot;Statement&quot;: [\n        {\n            &quot;Sid&quot;: &quot;id&quot;,\n            &quot;Effect&quot;: &quot;Allow&quot;,\n            &quot;Action&quot;: [\n                &quot;ec2:DescribeTags&quot;\n            ],\n            &quot;Resource&quot;: &quot;*&quot;\n        }\n    ]\n}\n</code></pre>\n<p>Java Code :</p>\n<pre><code>SimulatePrincipalPolicyRequest simulatePrincipalPolicyRequest = new SimulatePrincipalPolicyRequest()\nsimulatePrincipalPolicyRequest.setPolicySourceArn(&quot;arn:aws:iam::123456789012:role/Myrole&quot;);\nsimulatePrincipalPolicyRequest.withActionNames(&quot;ec2:DescribeTags&quot;);\n</code></pre>\n<p>Result:</p>\n<pre><code>{\nEvalActionName: ec2:DescribeTags\nEvalResourceName: *\nEvalDecision: implicitDeny\nMatchedStatements: []\nMissingContextValues: []\nOrganizationsDecisionDetail: {AllowedByOrganizations: false}\nEvalDecisionDetails: {}\nResourceSpecificResults: []\n}\n</code></pre>\n<p>The response is incorrect because when i try to perform that action Im able to do so.</p>\n"},{"tags":["java","rest","jetty-9"],"owner":{"account_id":2934651,"reputation":1282,"user_id":2513916,"display_name":"Rando Shtishi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672849598,"creation_date":1672849598,"question_id":75008382,"body_markdown":"- runtime environment: OpenJDK version &quot;1.8.0_322&quot;\r\n - server: jetty-server version 9.2.2.v20140723\r\n - servlet: jetty-servlets version 9.2.2.v20140723\r\n\r\n\r\nMy goal is to try to reproduce locally the idle timeout error, full message is like:\r\n\r\n```\r\n{&quot;error&quot;:true,&quot;msg&quot;:&quot;java.io.IOException: java.util.concurrent.TimeoutException: Idle timeout expired: 30000/30000 ms trace\r\n```\r\n\r\nThe error above is thrown by the rest endpoint for exporting data in different formats.\r\n\r\n`_idleTimeout` is a property set on the `ServerConnector.java` class. The description of the `_idleTimeout` specifies that:\r\n\r\n&gt; Sets the maximum Idle time for a connection, which roughly translates to the Socket.setSoTimeout(int) call, although with NIO implementations other mechanisms may be used to implement the timeout. The max idle time is applied:\r\n\r\n&gt; - When waiting for a new message to be received on a connection \r\n&gt; - When waiting for a new message to be sent on a connection\r\n\r\n&gt; This value is interpreted as the maximum time between some progress being made on the connection. So if a single byte is read or written, then the timeout is reset.\r\n\r\nThis error happens infrequently and it is hard to reproduce. \r\n\r\nFirst, I tried to create an endpoint that will sleep for more than 30 seconds like the below:\r\n\r\n```\r\n    @Path(value = &quot;test&quot;, method = HttpMethod.GET)\r\n    public void test(WebiContext ctxt) throws InterruptedException {\r\n           Thread.sleep(550000);\r\n    }\r\n```\r\n\r\nI wasn&#39;t able to reproduce with the endpoint above, when I called the endpoint the connection remained for more than 30 s.\r\n\r\nThen I modified the new test endpoint by copying code(skipping business logic part) from the export endpoint(the endpoint having this issue) to the test endpoint like below:\r\n\r\n```\r\n    @Path(value = &quot;test&quot;, method = HttpMethod.GET)\r\n    public void test(WebiContext ctxt) throws InterruptedException, IOException {\r\n        ctxt.setHeader(&quot;Content-type&quot;, &quot;application/json; charset=utf-8&quot;);\r\n        ctxt.setHeader(&quot;Content-disposition&quot;, String.format(&quot;attachment; filename=test.json&quot;));\r\n        ctxt.flushBuffer();\r\n\r\n        JsonFactory jsonFactory = new JsonFactory();\r\n        JsonGenerator writer = jsonFactory.createGenerator(ctxt.getOutputStream(), JsonEncoding.UTF8);\r\n        writer.writeStartObject();\r\n        writer.flush();\r\n\r\n        int i=0;\r\n        while (i&lt;10) {\r\n            writer.writeRaw(&quot;{\\&quot;title\\&quot;: \\&quot;example glossary\\&quot;}&quot;);\r\n            Thread.sleep(550000);\r\n        }\r\n\r\n        writer.writeEndObject();\r\n        writer.flush();\r\n        ctxt.flushBuffer();\r\n    }\r\n```\r\n\r\nI will appreciate any help or guidance towards reproducing this issue.\r\n\r\nThanks in advance,\r\nRando.\r\n\r\nP.S\r\n\r\nI have used the python script below to reproduce the issue in production, but I failing to reproduce it locally.\r\n\r\n```\r\nimport requests\r\nimport os\r\nimport time\r\n\r\nlocal_filename = &quot;LargeFile.csv&quot;\r\n\r\nurl = &quot;http://localhost:4010/rest/test/test&quot;\r\n\r\n\r\nquerystring = {&quot;format&quot;:&quot;json&quot;}\r\n\r\n\r\npayload = &quot;&quot;\r\nheaders = {\r\n    &quot;Accept&quot;: &quot;application/json&quot;,\r\n    &quot;Content-Type&quot;: &quot;application/json&quot;\r\n}\r\n\r\nfile_nr = 3\r\n\r\nwhile 1:\r\n\r\n    file_nr+=1\r\n\r\n    local_filename = &quot;LargeFile&quot;+str(file_nr)+&quot;.csv&quot;\r\n\r\n    with requests.request(&quot;GET&quot;, url, data=payload, headers=headers, params=querystring, stream=True) as r:\r\n        r.raise_for_status()\r\n        \r\n        with open(local_filename, &#39;wb&#39;) as f:\r\n\r\n            size = 0\r\n            for chunk in r.iter_content(chunk_size=None): \r\n                r.raise_for_status()\r\n                if chunk:\r\n                    size+=len(chunk)\r\n                    f.write(chunk)\r\n                    f.flush()\r\n                    os.fsync(f.fileno())\r\n                    os.system(&#39;cls&#39;)\r\n                    print(&quot;File: &quot;+str(file_nr))\r\n                    print(size/(1024*1024))\r\n                else:\r\n                    print(&quot;chunk error&quot;)\r\n```","title":"Trouble to reproduce Jetty idleTimeout Issue","body":"<ul>\n<li>runtime environment: OpenJDK version &quot;1.8.0_322&quot;</li>\n<li>server: jetty-server version 9.2.2.v20140723</li>\n<li>servlet: jetty-servlets version 9.2.2.v20140723</li>\n</ul>\n<p>My goal is to try to reproduce locally the idle timeout error, full message is like:</p>\n<pre><code>{&quot;error&quot;:true,&quot;msg&quot;:&quot;java.io.IOException: java.util.concurrent.TimeoutException: Idle timeout expired: 30000/30000 ms trace\n</code></pre>\n<p>The error above is thrown by the rest endpoint for exporting data in different formats.</p>\n<p><code>_idleTimeout</code> is a property set on the <code>ServerConnector.java</code> class. The description of the <code>_idleTimeout</code> specifies that:</p>\n<blockquote>\n<p>Sets the maximum Idle time for a connection, which roughly translates to the Socket.setSoTimeout(int) call, although with NIO implementations other mechanisms may be used to implement the timeout. The max idle time is applied:</p>\n</blockquote>\n<blockquote>\n<ul>\n<li>When waiting for a new message to be received on a connection</li>\n<li>When waiting for a new message to be sent on a connection</li>\n</ul>\n</blockquote>\n<blockquote>\n<p>This value is interpreted as the maximum time between some progress being made on the connection. So if a single byte is read or written, then the timeout is reset.</p>\n</blockquote>\n<p>This error happens infrequently and it is hard to reproduce.</p>\n<p>First, I tried to create an endpoint that will sleep for more than 30 seconds like the below:</p>\n<pre><code>    @Path(value = &quot;test&quot;, method = HttpMethod.GET)\n    public void test(WebiContext ctxt) throws InterruptedException {\n           Thread.sleep(550000);\n    }\n</code></pre>\n<p>I wasn't able to reproduce with the endpoint above, when I called the endpoint the connection remained for more than 30 s.</p>\n<p>Then I modified the new test endpoint by copying code(skipping business logic part) from the export endpoint(the endpoint having this issue) to the test endpoint like below:</p>\n<pre><code>    @Path(value = &quot;test&quot;, method = HttpMethod.GET)\n    public void test(WebiContext ctxt) throws InterruptedException, IOException {\n        ctxt.setHeader(&quot;Content-type&quot;, &quot;application/json; charset=utf-8&quot;);\n        ctxt.setHeader(&quot;Content-disposition&quot;, String.format(&quot;attachment; filename=test.json&quot;));\n        ctxt.flushBuffer();\n\n        JsonFactory jsonFactory = new JsonFactory();\n        JsonGenerator writer = jsonFactory.createGenerator(ctxt.getOutputStream(), JsonEncoding.UTF8);\n        writer.writeStartObject();\n        writer.flush();\n\n        int i=0;\n        while (i&lt;10) {\n            writer.writeRaw(&quot;{\\&quot;title\\&quot;: \\&quot;example glossary\\&quot;}&quot;);\n            Thread.sleep(550000);\n        }\n\n        writer.writeEndObject();\n        writer.flush();\n        ctxt.flushBuffer();\n    }\n</code></pre>\n<p>I will appreciate any help or guidance towards reproducing this issue.</p>\n<p>Thanks in advance,\nRando.</p>\n<p>P.S</p>\n<p>I have used the python script below to reproduce the issue in production, but I failing to reproduce it locally.</p>\n<pre><code>import requests\nimport os\nimport time\n\nlocal_filename = &quot;LargeFile.csv&quot;\n\nurl = &quot;http://localhost:4010/rest/test/test&quot;\n\n\nquerystring = {&quot;format&quot;:&quot;json&quot;}\n\n\npayload = &quot;&quot;\nheaders = {\n    &quot;Accept&quot;: &quot;application/json&quot;,\n    &quot;Content-Type&quot;: &quot;application/json&quot;\n}\n\nfile_nr = 3\n\nwhile 1:\n\n    file_nr+=1\n\n    local_filename = &quot;LargeFile&quot;+str(file_nr)+&quot;.csv&quot;\n\n    with requests.request(&quot;GET&quot;, url, data=payload, headers=headers, params=querystring, stream=True) as r:\n        r.raise_for_status()\n        \n        with open(local_filename, 'wb') as f:\n\n            size = 0\n            for chunk in r.iter_content(chunk_size=None): \n                r.raise_for_status()\n                if chunk:\n                    size+=len(chunk)\n                    f.write(chunk)\n                    f.flush()\n                    os.fsync(f.fileno())\n                    os.system('cls')\n                    print(&quot;File: &quot;+str(file_nr))\n                    print(size/(1024*1024))\n                else:\n                    print(&quot;chunk error&quot;)\n</code></pre>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":3,"creation_date":1672802446,"post_id":75000629,"comment_id":132353904,"body_markdown":"You&#39;re declaring `vowels` to be a single `char`. It needs to be an aary of characters, i.e. `char[]`","body":"You&#39;re declaring <code>vowels</code> to be a single <code>char</code>. It needs to be an aary of characters, i.e. <code>char[]</code>"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1672804542,"post_id":75000629,"comment_id":132354180,"body_markdown":"You should also read a tutorial on arrays https://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html","body":"You should also read a tutorial on arrays <a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.htm&zwnj;&#8203;l</a>"}],"answers":[{"tags":[],"owner":{"account_id":12646737,"reputation":1077,"user_id":9192223,"display_name":"hiren"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672823173,"creation_date":1672821395,"answer_id":75002836,"question_id":75000629,"body_markdown":"Try replacing vowels with this built-in method:\r\n\r\n    String[] hit_str = { &quot;every&quot;, &quot;nearing&quot;, &quot;checking&quot;, &quot;food&quot;, &quot;stand&quot;, &quot;value&quot; };\r\n    \r\n    for (String str : hit_str) {\r\n    \tSystem.out.println(str.replaceAll(&quot;[AaEeIiOoUu]&quot;, &quot;&quot;));\r\n    }\r\n\r\nHere, the `for` loop iterates over your input string/s and uses `Regex` to check if char(s) is/are found from the provided `Regex`. `[AaEeIiOoUu]` tries to match all chars of `Regex` individually in the string chars. Using `Regex` is better than declaring a `char[]` as it improves code readability and saves us from writing complex logics.","title":"removing vowels from array","body":"<p>Try replacing vowels with this built-in method:</p>\n<pre><code>String[] hit_str = { &quot;every&quot;, &quot;nearing&quot;, &quot;checking&quot;, &quot;food&quot;, &quot;stand&quot;, &quot;value&quot; };\n\nfor (String str : hit_str) {\n    System.out.println(str.replaceAll(&quot;[AaEeIiOoUu]&quot;, &quot;&quot;));\n}\n</code></pre>\n<p>Here, the <code>for</code> loop iterates over your input string/s and uses <code>Regex</code> to check if char(s) is/are found from the provided <code>Regex</code>. <code>[AaEeIiOoUu]</code> tries to match all chars of <code>Regex</code> individually in the string chars. Using <code>Regex</code> is better than declaring a <code>char[]</code> as it improves code readability and saves us from writing complex logics.</p>\n"},{"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672844281,"creation_date":1672823839,"answer_id":75003287,"question_id":75000629,"body_markdown":"There&#39;re many way to do this. I reccomen to split 2 tasks: remove vowels and print the results.\r\n\r\n```java\r\nprivate static final Pattern VOWELS = Pattern.compile(&quot;(?i)[aeiou]&quot;);\r\n\r\npublic static String[] removeVowels(String[] words) {\r\n    return Arrays.stream(words)\r\n                 .map(word -&gt; VOWELS.matcher(word).replaceAll(&quot;&quot;))\r\n                 .toArray(String[]::new);\r\n```\r\n\r\nIn case you are **able to modife** the original array, you can avoid creation of the new one.\r\n\r\n```java\r\npublic static String[] removeVowels(String[] words) {\r\n    for (int i = 0; i &lt; words.length; i++)\r\n        words[i] = VOWELS.matcher(words[i]).replaceAll(&quot;&quot;);\r\n\r\n    return words;\r\n}\r\n```","title":"removing vowels from array","body":"<p>There're many way to do this. I reccomen to split 2 tasks: remove vowels and print the results.</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static final Pattern VOWELS = Pattern.compile(&quot;(?i)[aeiou]&quot;);\n\npublic static String[] removeVowels(String[] words) {\n    return Arrays.stream(words)\n                 .map(word -&gt; VOWELS.matcher(word).replaceAll(&quot;&quot;))\n                 .toArray(String[]::new);\n</code></pre>\n<p>In case you are <strong>able to modife</strong> the original array, you can avoid creation of the new one.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static String[] removeVowels(String[] words) {\n    for (int i = 0; i &lt; words.length; i++)\n        words[i] = VOWELS.matcher(words[i]).replaceAll(&quot;&quot;);\n\n    return words;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9235242,"reputation":1488,"user_id":6860078,"display_name":"tbatch"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672849479,"creation_date":1672849479,"answer_id":75008360,"question_id":75000629,"body_markdown":"## Assumptions\r\nThis looks like a college class task.  So, I&#39;m going to answer assuming that you can&#39;t use more advanced data structures such as `List`, `Set`, etc.  I&#39;m also going to assume that you can&#39;t box and unbox your primitives (i.e. change `int` to `Integer`).  If I recall from my college courses, the main point of these tasks is to learn to implement basic logic and loops.  This means you don&#39;t need to use advanced Java features such as `Pattern` and `Stream`.\r\n\r\nThis means that we need to stick with primitives, basic arrays, basic loops, and basic java functionality.  This also means that the code likely isn&#39;t going to be efficient, but it will meet the requirements of your course.\r\n\r\n## Error Message\r\nYour Error message says \r\n&gt; &quot;illegal initializer for char&quot;\r\n\r\nYou are trying to shove an array into a single character.  You can&#39;t do that.  Put some brackets after `char`, and your error message should go away.\r\n\r\n```java\r\nchar[] vowels = {\r\n      &#39;a&#39;,\r\n      &#39;e&#39;,\r\n      &#39;i&#39;,\r\n      &#39;o&#39;,\r\n      &#39;u&#39;,\r\n      &#39;A&#39;,\r\n      &#39;E&#39;,\r\n      &#39;I&#39;,\r\n      &#39;O&#39;,\r\n      &#39;U&#39;\r\n    };\r\n```\r\n\r\nThat being said, don&#39;t use this.  It&#39;s clunky and error prone.  There are better ways.\r\n\r\n## Remove Vowels Method\r\n\r\nThat&#39;s not the only problem with your code though.  Your void method `removeVowels` has a return value.  void methods don&#39;t return anything.\r\n\r\n### Working through the task\r\n\r\nSince the instructions say you have to receive an array of Strings, we know that your method, at a minimum, should look something like\r\n```java\r\nvoid removeVowels(String[] hit_str);\r\n```\r\nor\r\n```java\r\nString[] removeVowels(String[] hit_str);\r\n```\r\nSince you can modify the String array without having to pass it around, the void method should work fine.  So, now we can look at what the method should do.  Here&#39;s some pseudo code:\r\n\r\n```\r\nvoid removeVowels(String[] hit_str){\r\n  for (int i = 0; i &lt; hit_str.length; i++) {\r\n    // if hit_str[i] contains a vowel, then remove it &lt;-- Pseudo Code\r\n  }\r\n}\r\n```\r\n\r\n### Fleshing out the Pseudo Code\r\n\r\nAt the point we hit the pseudo code, we know that hit_str[i] is a value within the array, and we know that it is a String.  Since String extends Java&#39;s Object, we know that it can be null.  We also know that `&quot;&quot;` is a valid empty String.  We also know that `&quot;cdf&quot;` is also a valid String which doesn&#39;t contain any vowels.\r\n\r\nSo, we know that we should account for a null value in the array, as well as a value that has a length of 0, and a value that already matches our required criteria of no vowels.\r\n\r\nSo, our pseudo code now looks something like this\r\n```java\r\n// this could also be if (hit_str[i] != null ...\r\nif (Objects.nonNull(hit_str[i]) &amp;&amp; !hit_str[i].isEmpty()) {\r\n  // remove vowels if they exist\r\n}\r\n```\r\n\r\n### Getting to work\r\n\r\nNow that we finally have a String to work with, how do we remove the vowels from it.  Since our object is a String, java has a lot of methods to help us.  The best method would be `replaceAll`.\r\n\r\n`replaceAll` uses a regex pattern to find any elements in the String that match the pattern, and replaces them with your designated replacement.  Our Regex would look like this `&quot;(?i)[aeiou]&quot;`.  It can be a bit confusing at first, but the elements in parentheses are the modifiers.  The `?` says match everything after, and the `i` means case insensitive.  The elements in the brackets are the elements to match.  So, this regex says to match everything in the string, case insensitive, against the letters in the brackets.\r\n\r\nExample:\r\n```java\r\nString myString = &quot;Look at all the vowels aeiou and AEIOU both upper and lower case&quot;;\r\nSystem.out.println(myString.replaceAll(&quot;(?i)[aeiou]&quot;, &quot;&quot;));\r\n```\r\nThis code produces `Lk t ll th vwls  nd  bth ppr nd lwr cs`.\r\n\r\n### Putting it together\r\n\r\nSo, our final code would look something like this.\r\n\r\n```java\r\nvoid removeVowels(String[] hit_str){\r\n  for (int i = 0; i &lt; hit_str.length; i++) {\r\n    if (Objects.nonNull(hit_str[i]) &amp;&amp; !hit_str[i].isEmpty()) {\r\n      hit_str[i] = hit_str[i].replaceAll(&quot;(?i)[aeiou]&quot;, &quot;&quot;));\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n### Using the method\r\n\r\nYour `main` method should now look like this after the String[] array has been created.\r\n\r\n```java\r\nremoveVowels(wordList);\r\nfor (int i = 0; i &lt; wordList.length; i++) {\r\n  System.out.println(wordList[i]);\r\n}\r\n```","title":"removing vowels from array","body":"<h2>Assumptions</h2>\n<p>This looks like a college class task.  So, I'm going to answer assuming that you can't use more advanced data structures such as <code>List</code>, <code>Set</code>, etc.  I'm also going to assume that you can't box and unbox your primitives (i.e. change <code>int</code> to <code>Integer</code>).  If I recall from my college courses, the main point of these tasks is to learn to implement basic logic and loops.  This means you don't need to use advanced Java features such as <code>Pattern</code> and <code>Stream</code>.</p>\n<p>This means that we need to stick with primitives, basic arrays, basic loops, and basic java functionality.  This also means that the code likely isn't going to be efficient, but it will meet the requirements of your course.</p>\n<h2>Error Message</h2>\n<p>Your Error message says</p>\n<blockquote>\n<p>&quot;illegal initializer for char&quot;</p>\n</blockquote>\n<p>You are trying to shove an array into a single character.  You can't do that.  Put some brackets after <code>char</code>, and your error message should go away.</p>\n<pre class=\"lang-java prettyprint-override\"><code>char[] vowels = {\n      'a',\n      'e',\n      'i',\n      'o',\n      'u',\n      'A',\n      'E',\n      'I',\n      'O',\n      'U'\n    };\n</code></pre>\n<p>That being said, don't use this.  It's clunky and error prone.  There are better ways.</p>\n<h2>Remove Vowels Method</h2>\n<p>That's not the only problem with your code though.  Your void method <code>removeVowels</code> has a return value.  void methods don't return anything.</p>\n<h3>Working through the task</h3>\n<p>Since the instructions say you have to receive an array of Strings, we know that your method, at a minimum, should look something like</p>\n<pre class=\"lang-java prettyprint-override\"><code>void removeVowels(String[] hit_str);\n</code></pre>\n<p>or</p>\n<pre class=\"lang-java prettyprint-override\"><code>String[] removeVowels(String[] hit_str);\n</code></pre>\n<p>Since you can modify the String array without having to pass it around, the void method should work fine.  So, now we can look at what the method should do.  Here's some pseudo code:</p>\n<pre><code>void removeVowels(String[] hit_str){\n  for (int i = 0; i &lt; hit_str.length; i++) {\n    // if hit_str[i] contains a vowel, then remove it &lt;-- Pseudo Code\n  }\n}\n</code></pre>\n<h3>Fleshing out the Pseudo Code</h3>\n<p>At the point we hit the pseudo code, we know that hit_str[i] is a value within the array, and we know that it is a String.  Since String extends Java's Object, we know that it can be null.  We also know that <code>&quot;&quot;</code> is a valid empty String.  We also know that <code>&quot;cdf&quot;</code> is also a valid String which doesn't contain any vowels.</p>\n<p>So, we know that we should account for a null value in the array, as well as a value that has a length of 0, and a value that already matches our required criteria of no vowels.</p>\n<p>So, our pseudo code now looks something like this</p>\n<pre class=\"lang-java prettyprint-override\"><code>// this could also be if (hit_str[i] != null ...\nif (Objects.nonNull(hit_str[i]) &amp;&amp; !hit_str[i].isEmpty()) {\n  // remove vowels if they exist\n}\n</code></pre>\n<h3>Getting to work</h3>\n<p>Now that we finally have a String to work with, how do we remove the vowels from it.  Since our object is a String, java has a lot of methods to help us.  The best method would be <code>replaceAll</code>.</p>\n<p><code>replaceAll</code> uses a regex pattern to find any elements in the String that match the pattern, and replaces them with your designated replacement.  Our Regex would look like this <code>&quot;(?i)[aeiou]&quot;</code>.  It can be a bit confusing at first, but the elements in parentheses are the modifiers.  The <code>?</code> says match everything after, and the <code>i</code> means case insensitive.  The elements in the brackets are the elements to match.  So, this regex says to match everything in the string, case insensitive, against the letters in the brackets.</p>\n<p>Example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String myString = &quot;Look at all the vowels aeiou and AEIOU both upper and lower case&quot;;\nSystem.out.println(myString.replaceAll(&quot;(?i)[aeiou]&quot;, &quot;&quot;));\n</code></pre>\n<p>This code produces <code>Lk t ll th vwls  nd  bth ppr nd lwr cs</code>.</p>\n<h3>Putting it together</h3>\n<p>So, our final code would look something like this.</p>\n<pre class=\"lang-java prettyprint-override\"><code>void removeVowels(String[] hit_str){\n  for (int i = 0; i &lt; hit_str.length; i++) {\n    if (Objects.nonNull(hit_str[i]) &amp;&amp; !hit_str[i].isEmpty()) {\n      hit_str[i] = hit_str[i].replaceAll(&quot;(?i)[aeiou]&quot;, &quot;&quot;));\n    }\n  }\n}\n</code></pre>\n<h3>Using the method</h3>\n<p>Your <code>main</code> method should now look like this after the String[] array has been created.</p>\n<pre class=\"lang-java prettyprint-override\"><code>removeVowels(wordList);\nfor (int i = 0; i &lt; wordList.length; i++) {\n  System.out.println(wordList[i]);\n}\n</code></pre>\n"}],"owner":{"account_id":27426721,"reputation":11,"user_id":20924091,"display_name":"oinkkkk"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":425,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":3,"score":0,"last_activity_date":1672849479,"creation_date":1672802196,"question_id":75000629,"body_markdown":"The instructions &gt;&gt;  \r\nImplement the method named `removeVowels` which processes the array of strings named `words` by printing each string from `words` with only non-vowels on its own line.\r\n\r\nFor example, if words contains:\r\n```java\r\n{&quot;every&quot;, &quot;nearing&quot;, &quot;checking&quot;, &quot;food&quot;, &quot;stand&quot;, &quot;value&quot;}\r\n```\r\nThe method should output:\r\n```none\r\nvry\r\nnrng\r\nchckng\r\nfd\r\nstnd\r\nvl\r\n```\r\nSo far, I have:\r\n```java\r\npublic class U6_L3_Activity_Two {\r\n  public static void removeVowels(String[] hit_str) {\r\n    char vowels = {\r\n      &#39;a&#39;,\r\n      &#39;e&#39;,\r\n      &#39;i&#39;,\r\n      &#39;o&#39;,\r\n      &#39;u&#39;,\r\n      &#39;A&#39;,\r\n      &#39;E&#39;,\r\n      &#39;I&#39;,\r\n      &#39;O&#39;,\r\n      &#39;U&#39;\r\n    };\r\n    for (int i = 0; i &lt; hit_str.length; i++) {\r\n      if (find(vowels.begin(), vowels.end(),\r\n          hit_str[i]) != vowels.end()) {\r\n        hit_str = hit_str.replace(i, 1, &quot;&quot;);\r\n        i -= 1;\r\n      }\r\n    }\r\n    return hit_str;\r\n  }\r\n}\r\n```\r\nRunner:\r\n```java\r\nimport java.util.Scanner;\r\n\r\npublic class runner_U6_L3_Activity_Two\r\n{\r\n  public static void main(String[] args)\r\n  {\r\n    Scanner scan = new Scanner(System.in);\r\n    System.out.println(&quot;Enter array length:&quot;);\r\n    int len = scan.nextInt();\r\n    scan.nextLine();\r\n    String[] wordList = new String[len];\r\n    System.out.println(&quot;Enter values:&quot;);\r\n    for(int i = 0; i &lt; len; i++)\r\n    {\r\n      wordList[i] = scan.nextLine();\r\n    }\r\n    U6_L3_Activity_Two.removeVowels(wordList);\r\n  }\r\n}\r\n```\r\nThe error message i&#39;m getting says:\r\n```none\r\nU6_L3_Activity_Two.java:3: error: illegal initializer for char\r\nchar vowels = {\r\n^\r\n```\r\nI&#39;ve tried a bunch of different ways to make a list of vowels but none of them seem to work.","title":"removing vowels from array","body":"<p>The instructions &gt;&gt;<br />\nImplement the method named <code>removeVowels</code> which processes the array of strings named <code>words</code> by printing each string from <code>words</code> with only non-vowels on its own line.</p>\n<p>For example, if words contains:</p>\n<pre class=\"lang-java prettyprint-override\"><code>{&quot;every&quot;, &quot;nearing&quot;, &quot;checking&quot;, &quot;food&quot;, &quot;stand&quot;, &quot;value&quot;}\n</code></pre>\n<p>The method should output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>vry\nnrng\nchckng\nfd\nstnd\nvl\n</code></pre>\n<p>So far, I have:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class U6_L3_Activity_Two {\n  public static void removeVowels(String[] hit_str) {\n    char vowels = {\n      'a',\n      'e',\n      'i',\n      'o',\n      'u',\n      'A',\n      'E',\n      'I',\n      'O',\n      'U'\n    };\n    for (int i = 0; i &lt; hit_str.length; i++) {\n      if (find(vowels.begin(), vowels.end(),\n          hit_str[i]) != vowels.end()) {\n        hit_str = hit_str.replace(i, 1, &quot;&quot;);\n        i -= 1;\n      }\n    }\n    return hit_str;\n  }\n}\n</code></pre>\n<p>Runner:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Scanner;\n\npublic class runner_U6_L3_Activity_Two\n{\n  public static void main(String[] args)\n  {\n    Scanner scan = new Scanner(System.in);\n    System.out.println(&quot;Enter array length:&quot;);\n    int len = scan.nextInt();\n    scan.nextLine();\n    String[] wordList = new String[len];\n    System.out.println(&quot;Enter values:&quot;);\n    for(int i = 0; i &lt; len; i++)\n    {\n      wordList[i] = scan.nextLine();\n    }\n    U6_L3_Activity_Two.removeVowels(wordList);\n  }\n}\n</code></pre>\n<p>The error message i'm getting says:</p>\n<pre class=\"lang-none prettyprint-override\"><code>U6_L3_Activity_Two.java:3: error: illegal initializer for char\nchar vowels = {\n^\n</code></pre>\n<p>I've tried a bunch of different ways to make a list of vowels but none of them seem to work.</p>\n"},{"tags":["java","cloud-document-ai"],"answers":[{"tags":[],"owner":{"account_id":8268323,"reputation":1936,"user_id":6216983,"display_name":"Holt Skinner"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1672849352,"creation_date":1672849352,"answer_id":75008332,"question_id":74941015,"body_markdown":"Currently, Document AI doesn&#39;t support creating labels with the REST API or client libraries.\r\n\r\nI recommend following the [Release Notes for Document AI](https://cloud.google.com/document-ai/docs/release-notes) for updates on supported features for the product.","title":"Need to create labels/entity types for a Custom Document Extractor using Java client libraries","body":"<p>Currently, Document AI doesn't support creating labels with the REST API or client libraries.</p>\n<p>I recommend following the <a href=\"https://cloud.google.com/document-ai/docs/release-notes\" rel=\"nofollow noreferrer\">Release Notes for Document AI</a> for updates on supported features for the product.</p>\n"}],"owner":{"account_id":27044863,"reputation":1,"user_id":20599181,"display_name":"Usha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1672849352,"creation_date":1672235121,"question_id":74941015,"body_markdown":"I have successfully created a Custom Document Extractor processor in the Google Cloud Console as described [here](https://cloud.google.com/document-ai/docs/workbench/build-custom-processor). I have defined labels trained new version as well.\r\n\r\nAlso I achieved the same programmatically using the client libraries with the processor using the latest Java client library `google.cloud.documentai.v1beta3`. I am able to train models and process documents.\r\n\r\nIs it possible to create labels / entities using the client libraries or REST calls?\r\n\r\n","title":"Need to create labels/entity types for a Custom Document Extractor using Java client libraries","body":"<p>I have successfully created a Custom Document Extractor processor in the Google Cloud Console as described <a href=\"https://cloud.google.com/document-ai/docs/workbench/build-custom-processor\" rel=\"nofollow noreferrer\">here</a>. I have defined labels trained new version as well.</p>\n<p>Also I achieved the same programmatically using the client libraries with the processor using the latest Java client library <code>google.cloud.documentai.v1beta3</code>. I am able to train models and process documents.</p>\n<p>Is it possible to create labels / entities using the client libraries or REST calls?</p>\n"},{"tags":["java","spring-boot"],"owner":{"account_id":27179488,"reputation":1,"user_id":20872504,"display_name":"user20872504"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":140,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672849018,"creation_date":1672846214,"question_id":75007722,"body_markdown":"I have two tokens one is brandwiseBearerToken which is a string and another is `thirdPartyPaymentGatewayToken` it belongs form my POJO class, and I want to pass these two values as dynamic. but in my case, I pass as hard-coded how I can make it dynamic. for your reference, I share my code.\r\n\r\nI want to dynamic exact at this point \r\n```java\r\nString thirdPartyPaymentGatewayTokenJson = ow.writeValueAsString(thirdPartyPaymentGatewayToken);\r\n\r\nRequestBody body = RequestBody.create(mediaType,thirdPartyPaymentGatewayTokenJson);\r\n```\r\nI don&#39;t want to pass hard-coded data\r\n\r\n```java\r\n public ThirdPartyPaymentGatewayResponse getThirdPartyPaymentGatewayToken(ThirdPartyPaymentGatewayToken thirdPartyPaymentGatewayToken, String managedBy)\r\n         throws AuthenticationException, UnknownHostException, BadRequestException {\r\n         String brandwiseBearerToken = authenticationToken();\r\n         String thirdPartyPaymentGatewayTokenJson = ow.writeValueAsString(thirdPartyPaymentGatewayToken);\r\n        \r\n         RequestBody body = RequestBody.create(mediaType, thirdPartyPaymentGatewayTokenJson);\r\n         Request request = new Request.Builder().url(brandwiseThirdPartypaymentGatewayURL)\r\n             \t\t\t\t\t\t.post(body)\r\n             \t\t\t\t\t\t.addHeader(&quot;Content-Type&quot;, &quot;application/json&quot;)\r\n             \t\t\t\t\t\t.addHeader(&quot;Bearer&quot;, brandwiseBearerToken)\r\n             \t\t\t\t\t\t.build();\r\n        \r\n         Response response = client.newCall(request).execute();\r\n         ResponseBody responseBody = response.body();\r\n        \r\n         JsonObject jsonObject = new Gson().fromJson(responseBody.string(), JsonObject.class);\r\n         JsonElement error = jsonObject.get(&quot;Message&quot;);\r\n        \r\n         }\r\n         ```","title":"How to pass dynamic value inside Request body","body":"<p>I have two tokens one is brandwiseBearerToken which is a string and another is <code>thirdPartyPaymentGatewayToken</code> it belongs form my POJO class, and I want to pass these two values as dynamic. but in my case, I pass as hard-coded how I can make it dynamic. for your reference, I share my code.</p>\n<p>I want to dynamic exact at this point</p>\n<pre class=\"lang-java prettyprint-override\"><code>String thirdPartyPaymentGatewayTokenJson = ow.writeValueAsString(thirdPartyPaymentGatewayToken);\n\nRequestBody body = RequestBody.create(mediaType,thirdPartyPaymentGatewayTokenJson);\n</code></pre>\n<p>I don't want to pass hard-coded data</p>\n<pre class=\"lang-java prettyprint-override\"><code> public ThirdPartyPaymentGatewayResponse getThirdPartyPaymentGatewayToken(ThirdPartyPaymentGatewayToken thirdPartyPaymentGatewayToken, String managedBy)\n         throws AuthenticationException, UnknownHostException, BadRequestException {\n         String brandwiseBearerToken = authenticationToken();\n         String thirdPartyPaymentGatewayTokenJson = ow.writeValueAsString(thirdPartyPaymentGatewayToken);\n        \n         RequestBody body = RequestBody.create(mediaType, thirdPartyPaymentGatewayTokenJson);\n         Request request = new Request.Builder().url(brandwiseThirdPartypaymentGatewayURL)\n                                    .post(body)\n                                    .addHeader(&quot;Content-Type&quot;, &quot;application/json&quot;)\n                                    .addHeader(&quot;Bearer&quot;, brandwiseBearerToken)\n                                    .build();\n        \n         Response response = client.newCall(request).execute();\n         ResponseBody responseBody = response.body();\n        \n         JsonObject jsonObject = new Gson().fromJson(responseBody.string(), JsonObject.class);\n         JsonElement error = jsonObject.get(&quot;Message&quot;);\n        \n         }\n         ```\n</code></pre>\n"},{"tags":["java","string","selenium","selenium-webdriver","compare"],"comments":[{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":3,"creation_date":1672842168,"post_id":75006806,"comment_id":132363922,"body_markdown":"Don&#39;t compare strings. Extract the numerical part, convert to a number, and compare those.","body":"Don&#39;t compare strings. Extract the numerical part, convert to a number, and compare those."},{"owner":{"account_id":9804742,"reputation":3296,"user_id":8157304,"accept_rate":75,"display_name":"sound wave"},"score":0,"creation_date":1672842209,"post_id":75006806,"comment_id":132363935,"body_markdown":"you should split the string on the new line character `\\n` then keep only the one you need","body":"you should split the string on the new line character <code>\\n</code> then keep only the one you need"},{"owner":{"account_id":24682121,"reputation":75,"user_id":18575723,"display_name":"Jackie M"},"score":0,"creation_date":1672842300,"post_id":75006806,"comment_id":132363972,"body_markdown":"@soundwave How to do that?","body":"@soundwave How to do that?"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1672842316,"post_id":75006806,"comment_id":132363976,"body_markdown":"&quot;*`if(tooltiptext.getText()&gt;30c){`*&quot; - This is not legal java syntax; `30c` is not a literal.","body":"&quot;<i><code>if(tooltiptext.getText()&gt;30c){</code></i>&quot; - This is not legal java syntax; <code>30c</code> is not a literal."},{"owner":{"account_id":24682121,"reputation":75,"user_id":18575723,"display_name":"Jackie M"},"score":0,"creation_date":1672842391,"post_id":75006806,"comment_id":132364000,"body_markdown":"@Turing85 How to do that?","body":"@Turing85 How to do that?"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1672842452,"post_id":75006806,"comment_id":132364027,"body_markdown":"Please read: [Using Regular Expressions to Extract a Value in Java](https://stackoverflow.com/questions/237061/using-regular-expressions-to-extract-a-value-in-java)","body":"Please read: <a href=\"https://stackoverflow.com/questions/237061/using-regular-expressions-to-extract-a-value-in-java\">Using Regular Expressions to Extract a Value in Java</a>"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1672842586,"post_id":75006806,"comment_id":132364085,"body_markdown":"`Scanner s = new Scanner(getText());` is also an option with `s.nextLine`","body":"<code>Scanner s = new Scanner(getText());</code> is also an option with <code>s.nextLine</code>"},{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1672843249,"post_id":75006806,"comment_id":132364315,"body_markdown":"You need to isolate the numerical value, then convert it to an `Integer` or `Double`. Then you can compare it reliably. `split` your input to get the individual lines, then use a regex to find the number.","body":"You need to isolate the numerical value, then convert it to an <code>Integer</code> or <code>Double</code>. Then you can compare it reliably. <code>split</code> your input to get the individual lines, then use a regex to find the number."}],"answers":[{"tags":[],"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672844323,"creation_date":1672844323,"answer_id":75007281,"question_id":75006806,"body_markdown":"You might try the following:\r\n\r\n    int tempInCelsius = Integer.parseInt(getText().replaceAll(&quot;(?s).*?\\\\b(\\\\d+)c\\\\b.*&quot;, &quot;$1&quot;));\r\n\r\n","title":"How to compare String value to another string after using getText()?","body":"<p>You might try the following:</p>\n<pre><code>int tempInCelsius = Integer.parseInt(getText().replaceAll(&quot;(?s).*?\\\\b(\\\\d+)c\\\\b.*&quot;, &quot;$1&quot;));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16161082,"reputation":113,"user_id":11667138,"display_name":"Kashan Nadeem"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1672848502,"creation_date":1672848502,"answer_id":75008182,"question_id":75006806,"body_markdown":"This should do it:\r\n\r\n```\r\nString tooltipText = &quot;outside\\ntemperature\\n20c&quot;;\r\n// ensure that we parse only the last line, so if digits appear in the other lines, there is no impact\r\nString toolipTempText = tooltipText.split(&quot;\\n&quot;)[2];\r\nint tempInCelsius = Integer.parseInt(toolipTempText.replaceAll(&quot;[^0-9]&quot;, &quot;&quot;));\r\nif (tempInCelsius &gt; 30) {\r\n  System.out.println(&quot;temperature is too low outside&quot;);\r\n} else {\r\n  System.out.println(&quot;temperature is too hot outside&quot;);\r\n}\r\n```","title":"How to compare String value to another string after using getText()?","body":"<p>This should do it:</p>\n<pre><code>String tooltipText = &quot;outside\\ntemperature\\n20c&quot;;\n// ensure that we parse only the last line, so if digits appear in the other lines, there is no impact\nString toolipTempText = tooltipText.split(&quot;\\n&quot;)[2];\nint tempInCelsius = Integer.parseInt(toolipTempText.replaceAll(&quot;[^0-9]&quot;, &quot;&quot;));\nif (tempInCelsius &gt; 30) {\n  System.out.println(&quot;temperature is too low outside&quot;);\n} else {\n  System.out.println(&quot;temperature is too hot outside&quot;);\n}\n</code></pre>\n"}],"owner":{"account_id":24682121,"reputation":75,"user_id":18575723,"display_name":"Jackie M"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":174,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":75008182,"answer_count":2,"score":-2,"last_activity_date":1672848502,"creation_date":1672842080,"question_id":75006806,"body_markdown":"When I extract tooltiptext using `getText()` method, output\r\ncomes in three lines: \r\n\r\n    outside \r\n    temperature\r\n    20c\r\n\r\nBut how to compare extracted `20c` to another string `30c`?\r\n\r\nMy approach:\r\n\r\n    if (tooltiptext.getText() &gt; 30c) {\r\n        System.out.println(&quot;temperature is too low outside&quot;);\r\n    } else {\r\n        System.out.println(&quot;temperature is hot outside&quot;);\r\n    }\r\n\r\n","title":"How to compare String value to another string after using getText()?","body":"<p>When I extract tooltiptext using <code>getText()</code> method, output\ncomes in three lines:</p>\n<pre><code>outside \ntemperature\n20c\n</code></pre>\n<p>But how to compare extracted <code>20c</code> to another string <code>30c</code>?</p>\n<p>My approach:</p>\n<pre><code>if (tooltiptext.getText() &gt; 30c) {\n    System.out.println(&quot;temperature is too low outside&quot;);\n} else {\n    System.out.println(&quot;temperature is hot outside&quot;);\n}\n</code></pre>\n"},{"tags":["java","maven","tomcat","properties-file"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1672841639,"post_id":75006664,"comment_id":132363701,"body_markdown":"Better to load your files/images as resources:\n[Netbeans](https://technojeeves.com/index.php/aliasjava1/78-loading-files-as-resources-in-java-with-netbeans)\n[Eclipse](https://technojeeves.com/index.php/aliasjava1/80-loading-files-as-resources-in-java-with-eclipse)","body":"Better to load your files/images as resources: <a href=\"https://technojeeves.com/index.php/aliasjava1/78-loading-files-as-resources-in-java-with-netbeans\" rel=\"nofollow noreferrer\">Netbeans</a> <a href=\"https://technojeeves.com/index.php/aliasjava1/80-loading-files-as-resources-in-java-with-eclipse\" rel=\"nofollow noreferrer\">Eclipse</a>"},{"owner":{"account_id":20556015,"reputation":23,"user_id":17969715,"display_name":"frann"},"score":0,"creation_date":1672844526,"post_id":75006664,"comment_id":132364777,"body_markdown":"I would like to be able to do it but in the project I am in, it is set as I have shown and I do not have permission to change it :(","body":"I would like to be able to do it but in the project I am in, it is set as I have shown and I do not have permission to change it :("},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1672844722,"post_id":75006664,"comment_id":132364864,"body_markdown":"Then you need to &#39;calculate&#39; the [current directory](https://technojeeves.com/index.php/aliasjava1/91-find-the-current-directory-in-java)\n and use `Path` and/or `Paths` to correctly relativise. You should check out `getRealPath` too","body":"Then you need to &#39;calculate&#39; the <a href=\"https://technojeeves.com/index.php/aliasjava1/91-find-the-current-directory-in-java\" rel=\"nofollow noreferrer\">current directory</a>  and use <code>Path</code> and/or <code>Paths</code> to correctly relativise. You should check out <code>getRealPath</code> too"},{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":2,"creation_date":1672846491,"post_id":75006664,"comment_id":132365644,"body_markdown":"File is not where you think it is.","body":"File is not where you think it is."},{"owner":{"account_id":20556015,"reputation":23,"user_id":17969715,"display_name":"frann"},"score":0,"creation_date":1672848556,"post_id":75006664,"comment_id":132366479,"body_markdown":"Hi! I have tried the routes on a main class as I show in the code and both work, but after deploy the project in tomcat it does not work, it shows null pointer exepction","body":"Hi! I have tried the routes on a main class as I show in the code and both work, but after deploy the project in tomcat it does not work, it shows null pointer exepction"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1672849866,"post_id":75006664,"comment_id":132366914,"body_markdown":"If you&#39;re determined to access resources as files, you need to ensure that the file is going to be present *after* deployment on the server. Did you do that?","body":"If you&#39;re determined to access resources as files, you need to ensure that the file is going to be present <i>after</i> deployment on the server. Did you do that?"},{"owner":{"account_id":3142246,"reputation":2632,"user_id":2657515,"accept_rate":75,"display_name":"JonathanDavidArndt"},"score":0,"creation_date":1672859133,"post_id":75006664,"comment_id":132370006,"body_markdown":"Instead of showing the structure of the project, we will need to see the structure of the deployed .WAR on the Tomcat server.","body":"Instead of showing the structure of the project, we will need to see the structure of the deployed .WAR on the Tomcat server."}],"owner":{"account_id":20556015,"reputation":23,"user_id":17969715,"display_name":"frann"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":249,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1672848430,"creation_date":1672841398,"question_id":75006664,"body_markdown":"I am trying to read a .properties file from a class that is in a different folder than this .properties. Firstly, I have used another class with a main (testLogin.java) to see if the paths I use are correct and success!\r\n\r\nI used an absolute path to read this file and it hasn&#39;t given me any problems, in the same way I&#39;ve tried using a relative one and everything is correct.\r\n\r\n**Absolute path:** &quot;C:\\\\User\\\\Documents\\\\project-web\\\\src\\\\main\\\\config\\\\local\\\\application.properties&quot;\r\n\r\n**Relative path:** &quot;src/main/config/local/application.properties&quot;\r\n\r\nI don&#39;t know if this error can occur because the file .properties is in a folder (src/main/config/development/application.properties) and not in a package as it is said in this post\r\nhttps://softwareengineering.stackexchange.com/questions/238208/properties-files-in-regular-src-folder-okay\r\n\r\nIn the class that I want to implement this function (login.java) **I use the absolute path** to test and it works for me. I compile, run tomcat and everything is correct. **However when implementing the relative**, I don&#39;t :(, compile, run tomcat and get null. Do you know what this could be? I&#39;m using Servlets and Maven for the build. My code:\r\n\r\nlogin.java\r\n```\r\npublic void doAction(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException{\r\n   Properties properties = new Properties();\r\n\r\n//Using relative path\r\n   try(InputStream is = new FileInputStream(&quot;src/main/config/local/application.properties&quot;)){ //null when i test after the deploy of the .war in tomcat. But if I execute into a main class it works. It&#180;s strange because only with tomcat it doesn&#180;t works\r\n       properties.load(is);\r\n       System.out.println(properties.getProperty(&quot;enviroment&quot;));\r\n   }catch(FileNotFoundException e){\r\n       e.printstackTrace();\r\n   }catch(IOException e){\r\n       e.printstackTrace();\r\n   }\r\n\r\n//Using absolute path\r\n   try(InputStream is = new FileInputStream(&quot;C:\\\\Usuario\\\\Documents\\\\project-web\\\\src\\\\main\\\\config\\\\local\\\\application.properties&quot;)){ //OK\r\n       properties.load(is);\r\n       System.out.println(properties.getProperty(&quot;enviroment&quot;)); //localhost\r\n   }catch(FileNotFoundException e){\r\n       e.printstackTrace();\r\n   }catch(IOException e){\r\n       e.printstackTrace();\r\n   }\r\n}\r\n\r\n```\r\n\r\nStructure of my project:\r\n\r\n[![Structure][1]][1]\r\n\r\n\r\nError when i try go in after deploy with mvn tomcat7:run\r\n[![Error Cmd Tomcat][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/LKKMc.jpg\r\n  [2]: https://i.stack.imgur.com/O4A1x.jpg","title":"I have a null when using a relative path when reading a FileInputStream","body":"<p>I am trying to read a .properties file from a class that is in a different folder than this .properties. Firstly, I have used another class with a main (testLogin.java) to see if the paths I use are correct and success!</p>\n<p>I used an absolute path to read this file and it hasn't given me any problems, in the same way I've tried using a relative one and everything is correct.</p>\n<p><strong>Absolute path:</strong> &quot;C:\\User\\Documents\\project-web\\src\\main\\config\\local\\application.properties&quot;</p>\n<p><strong>Relative path:</strong> &quot;src/main/config/local/application.properties&quot;</p>\n<p>I don't know if this error can occur because the file .properties is in a folder (src/main/config/development/application.properties) and not in a package as it is said in this post\n<a href=\"https://softwareengineering.stackexchange.com/questions/238208/properties-files-in-regular-src-folder-okay\">https://softwareengineering.stackexchange.com/questions/238208/properties-files-in-regular-src-folder-okay</a></p>\n<p>In the class that I want to implement this function (login.java) <strong>I use the absolute path</strong> to test and it works for me. I compile, run tomcat and everything is correct. <strong>However when implementing the relative</strong>, I don't :(, compile, run tomcat and get null. Do you know what this could be? I'm using Servlets and Maven for the build. My code:</p>\n<p>login.java</p>\n<pre><code>public void doAction(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException{\n   Properties properties = new Properties();\n\n//Using relative path\n   try(InputStream is = new FileInputStream(&quot;src/main/config/local/application.properties&quot;)){ //null when i test after the deploy of the .war in tomcat. But if I execute into a main class it works. It´s strange because only with tomcat it doesn´t works\n       properties.load(is);\n       System.out.println(properties.getProperty(&quot;enviroment&quot;));\n   }catch(FileNotFoundException e){\n       e.printstackTrace();\n   }catch(IOException e){\n       e.printstackTrace();\n   }\n\n//Using absolute path\n   try(InputStream is = new FileInputStream(&quot;C:\\\\Usuario\\\\Documents\\\\project-web\\\\src\\\\main\\\\config\\\\local\\\\application.properties&quot;)){ //OK\n       properties.load(is);\n       System.out.println(properties.getProperty(&quot;enviroment&quot;)); //localhost\n   }catch(FileNotFoundException e){\n       e.printstackTrace();\n   }catch(IOException e){\n       e.printstackTrace();\n   }\n}\n\n</code></pre>\n<p>Structure of my project:</p>\n<p><a href=\"https://i.stack.imgur.com/LKKMc.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LKKMc.jpg\" alt=\"Structure\" /></a></p>\n<p>Error when i try go in after deploy with mvn tomcat7:run\n<a href=\"https://i.stack.imgur.com/O4A1x.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/O4A1x.jpg\" alt=\"Error Cmd Tomcat\" /></a></p>\n"},{"tags":["java","spring","spring-security","spring-boot"],"comments":[{"owner":{"account_id":87204,"reputation":22463,"user_id":241990,"accept_rate":100,"display_name":"Shaun the Sheep"},"score":3,"creation_date":1409338889,"post_id":25570237,"comment_id":39942223,"body_markdown":"No, it doesn&#39;t call the init methods. See the [Filter Lifecycle](http://docs.spring.io/spring-security/site/docs/3.2.5.RELEASE/apidocs/org/springframework/security/web/FilterChainProxy.html) section in the class Javadoc.","body":"No, it doesn&#39;t call the init methods. See the <a href=\"http://docs.spring.io/spring-security/site/docs/3.2.5.RELEASE/apidocs/org/springframework/security/web/FilterChainProxy.html\" rel=\"nofollow noreferrer\">Filter Lifecycle</a> section in the class Javadoc."},{"owner":{"account_id":296495,"reputation":17580,"user_id":601493,"accept_rate":73,"display_name":"Jan Zyka"},"score":0,"creation_date":1409665899,"post_id":25570237,"comment_id":40034468,"body_markdown":"This answers my question, thank you. If you wanna make it an answer I would accept it immediately.","body":"This answers my question, thank you. If you wanna make it an answer I would accept it immediately."}],"answers":[{"tags":[],"owner":{"account_id":13362718,"reputation":763,"user_id":9644150,"display_name":"muditrustagii"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672848381,"creation_date":1672848381,"answer_id":75008160,"question_id":25570237,"body_markdown":"Yes, `FilterChainProxy` doesnt invoke the init() and destroy() methods. But for me it was a necessity so i used `DelegatingFilterProxy`, it does have a way to alter this via the &quot;targetFilterLifecycle&quot; property, when it&#39;s set to true. This way the init() and destroy() will be invoked as usual. Read more here - https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/filter/DelegatingFilterProxy.html ","title":"Why is init() not called on filters within FilterChainProxy in spring security?","body":"<p>Yes, <code>FilterChainProxy</code> doesnt invoke the init() and destroy() methods. But for me it was a necessity so i used <code>DelegatingFilterProxy</code>, it does have a way to alter this via the &quot;targetFilterLifecycle&quot; property, when it's set to true. This way the init() and destroy() will be invoked as usual. Read more here - <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/filter/DelegatingFilterProxy.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/filter/DelegatingFilterProxy.html</a></p>\n"}],"owner":{"account_id":296495,"reputation":17580,"user_id":601493,"accept_rate":73,"display_name":"Jan Zyka"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2493,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":1,"score":5,"last_activity_date":1672848381,"creation_date":1409321948,"question_id":25570237,"body_markdown":"I have configured my own filter to be part of `FilterChainProxy` in spring security. I was surprised that `init()` method (implemented from `Filter` interface) is not being called on this filter. When I moved the filter out of the `FilterChainProxy` to the main chain the `init()` method is called as expected\r\n\r\nDoes `FilterChainProxy` treat its filters differently?\r\n\r\nOne Boot note:\r\n\r\nI had to provide `FilterRegistrationBean` with `enabled=false` to avoid registration to the main filter chain but I don&#39;t believe this is the cause as I have seen the behaviour in non-boot applicaitons.","title":"Why is init() not called on filters within FilterChainProxy in spring security?","body":"<p>I have configured my own filter to be part of <code>FilterChainProxy</code> in spring security. I was surprised that <code>init()</code> method (implemented from <code>Filter</code> interface) is not being called on this filter. When I moved the filter out of the <code>FilterChainProxy</code> to the main chain the <code>init()</code> method is called as expected</p>\n\n<p>Does <code>FilterChainProxy</code> treat its filters differently?</p>\n\n<p>One Boot note:</p>\n\n<p>I had to provide <code>FilterRegistrationBean</code> with <code>enabled=false</code> to avoid registration to the main filter chain but I don't believe this is the cause as I have seen the behaviour in non-boot applicaitons.</p>\n"},{"tags":["java","forms","parameters","jax-rs","resteasy"],"answers":[{"tags":[],"owner":{"account_id":27720,"reputation":13164,"user_id":73446,"accept_rate":80,"display_name":"gregwhitaker"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1372883920,"creation_date":1372881460,"answer_id":17457026,"question_id":17455291,"body_markdown":"You can inject `@Context` values into properties just like the form, path, and header parameters.\r\n\r\nExample Resource Method:\r\n\r\n\t@POST\r\n\t@Path(&quot;/test/{personId}/{addressId}&quot;)\r\n\tpublic void createUser(@Form MyForm form)\r\n\t{\r\n\t\tSystem.out.println(form.toString());\r\n\t}    \r\nExample Form Class:\r\n    \r\n    public class MyForm {\r\n    \r\n    \tprivate String personId;\r\n    \tprivate String addressId;\r\n    \tprivate HttpRequest request;\r\n    \t\r\n    \tpublic MyForm() {\r\n    \t\t\r\n    \t}\r\n    \t\r\n        @PathParam(&quot;personId&quot;)\r\n        public void setPersonId(String personId) {\r\n             this.personId = personId;\r\n        }\r\n    \r\n        @PathParam(&quot;addressId&quot;)\r\n        public void setAddressId(String addressId) {\r\n             this.addressId = addressId;\r\n        }\r\n    \r\n    \tpublic HttpRequest getRequest() {\r\n    \t\treturn request;\r\n    \t}\r\n    \r\n    \t@Context\r\n    \tpublic void setRequest(HttpRequest request) {\r\n    \t\tthis.request = request;\r\n    \t}\r\n    \t\r\n    \t@Override\r\n    \tpublic String toString() {\r\n    \t\treturn String.format(&quot;MyForm: [personId: &#39;%s&#39;, addressId: &#39;%s&#39;, request: &#39;%s&#39;]&quot;, \r\n    \t\t\t\tthis.personId, this.addressId, this.request);\r\n    \t}\r\n    }\r\n\r\nUrl:\r\n\r\n    http://localhost:7016/v1/test/1/1\r\n\r\n\r\n\r\nOutput:\r\n\r\n    MyForm: [personId: &#39;1&#39;, addressId: &#39;1&#39;, request: &#39;org.jboss.resteasy.plugins.server.servlet.HttpServletInputMessage@15d694da&#39;]\r\n\r\n","title":"Parameter binding to a VO with @Form- RestEasy - JAX-Rs","body":"<p>You can inject <code>@Context</code> values into properties just like the form, path, and header parameters.</p>\n\n<p>Example Resource Method:</p>\n\n<pre><code>@POST\n@Path(\"/test/{personId}/{addressId}\")\npublic void createUser(@Form MyForm form)\n{\n    System.out.println(form.toString());\n}    \n</code></pre>\n\n<p>Example Form Class:</p>\n\n<pre><code>public class MyForm {\n\n    private String personId;\n    private String addressId;\n    private HttpRequest request;\n\n    public MyForm() {\n\n    }\n\n    @PathParam(\"personId\")\n    public void setPersonId(String personId) {\n         this.personId = personId;\n    }\n\n    @PathParam(\"addressId\")\n    public void setAddressId(String addressId) {\n         this.addressId = addressId;\n    }\n\n    public HttpRequest getRequest() {\n        return request;\n    }\n\n    @Context\n    public void setRequest(HttpRequest request) {\n        this.request = request;\n    }\n\n    @Override\n    public String toString() {\n        return String.format(\"MyForm: [personId: '%s', addressId: '%s', request: '%s']\", \n                this.personId, this.addressId, this.request);\n    }\n}\n</code></pre>\n\n<p>Url:</p>\n\n<pre><code>http://localhost:7016/v1/test/1/1\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>MyForm: [personId: '1', addressId: '1', request: 'org.jboss.resteasy.plugins.server.servlet.HttpServletInputMessage@15d694da']\n</code></pre>\n"},{"tags":[],"owner":{"account_id":329138,"reputation":8059,"user_id":652497,"accept_rate":91,"display_name":"Jonathan S. Fisher"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1574737943,"creation_date":1574737943,"answer_id":59043202,"question_id":17455291,"body_markdown":"I thought I would add an answer for those that are using pure JAX-RS not not RestEasy specifically. Faced with the same problem, and surprised that JAX-RS doesn&#39;t have out-of-box support for http Form binding to Java Objects, I created a Java API to marshal/unmarshal java objects to forms, and then used that to create a JAX-RS messagebody reader and writer.\r\n\r\nhttps://github.com/exabrial/form-binding","title":"Parameter binding to a VO with @Form- RestEasy - JAX-Rs","body":"<p>I thought I would add an answer for those that are using pure JAX-RS not not RestEasy specifically. Faced with the same problem, and surprised that JAX-RS doesn't have out-of-box support for http Form binding to Java Objects, I created a Java API to marshal/unmarshal java objects to forms, and then used that to create a JAX-RS messagebody reader and writer.</p>\n\n<p><a href=\"https://github.com/exabrial/form-binding\" rel=\"nofollow noreferrer\">https://github.com/exabrial/form-binding</a></p>\n"}],"owner":{"account_id":724774,"reputation":14026,"user_id":668650,"accept_rate":77,"display_name":"Kevin Rave"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1383,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":17457026,"answer_count":2,"score":1,"last_activity_date":1672848292,"creation_date":1372875022,"question_id":17455291,"body_markdown":"I have a few variables as `@PathParam`. I want to put them in a Bean and accept all of them in one.\r\n\r\n    public void show( @PathParam(&quot;personId&quot;&gt; String personId, \r\n                      @PathParam(&quot;addressId&quot;) String addressId \r\n                      @Context HttpRequest request) {\r\n           // Code\r\n    }\r\n\r\nNow I would like to put all of the parameters in a Bean/VO with `@Form` argument.\r\nMy class:\r\n\r\n    class RData {\r\n       \tprivate String personId;\r\n        private String addressId;\r\n        private InputStream requestBody;\r\n\r\n        @PathParam(&quot;personId&quot;)\r\n        public void setPersonId(String personId) {\r\n             this.personId = personId;\r\n        }\r\n\r\n        @PathParam(&quot;addressId&quot;)\r\n        public void setAddressId(String addressId) {\r\n             this.addressId = addressId;\r\n        }\r\n\r\n        // NOW HERE I NEED TO BIND HttpRequest Context object  to request object in my VO.\r\n        // That is @Context param in the original method.\r\n    }\r\n\r\nMy method would change to:\r\n\r\n    public void show( @Form RData rData) {\r\n           // Code\r\n    }\r\n\r\n\r\nMy VO class above contains what I need to do.\r\nSo I need to map `@Context HttpRequest request` to `HttpRequest` instance variable in my VO.\r\n\r\nHow to do that? Because it does not have an attribute name like `@PathParam`.\r\n","title":"Parameter binding to a VO with @Form- RestEasy - JAX-Rs","body":"<p>I have a few variables as <code>@PathParam</code>. I want to put them in a Bean and accept all of them in one.</p>\n<pre><code>public void show( @PathParam(&quot;personId&quot;&gt; String personId, \n                  @PathParam(&quot;addressId&quot;) String addressId \n                  @Context HttpRequest request) {\n       // Code\n}\n</code></pre>\n<p>Now I would like to put all of the parameters in a Bean/VO with <code>@Form</code> argument.\nMy class:</p>\n<pre><code>class RData {\n    private String personId;\n    private String addressId;\n    private InputStream requestBody;\n\n    @PathParam(&quot;personId&quot;)\n    public void setPersonId(String personId) {\n         this.personId = personId;\n    }\n\n    @PathParam(&quot;addressId&quot;)\n    public void setAddressId(String addressId) {\n         this.addressId = addressId;\n    }\n\n    // NOW HERE I NEED TO BIND HttpRequest Context object  to request object in my VO.\n    // That is @Context param in the original method.\n}\n</code></pre>\n<p>My method would change to:</p>\n<pre><code>public void show( @Form RData rData) {\n       // Code\n}\n</code></pre>\n<p>My VO class above contains what I need to do.\nSo I need to map <code>@Context HttpRequest request</code> to <code>HttpRequest</code> instance variable in my VO.</p>\n<p>How to do that? Because it does not have an attribute name like <code>@PathParam</code>.</p>\n"},{"tags":["java","spring-boot","apache-camel","junit5"],"comments":[{"owner":{"account_id":1674328,"reputation":2652,"user_id":1540177,"display_name":"grekier"},"score":0,"creation_date":1672830119,"post_id":75003600,"comment_id":132359825,"body_markdown":"You could use the `template.sendBody` method","body":"You could use the <code>template.sendBody</code> method"},{"owner":{"account_id":26014900,"reputation":23,"user_id":20825594,"display_name":"John"},"score":0,"creation_date":1672830258,"post_id":75003600,"comment_id":132359872,"body_markdown":"I have a predicate checking headers so I need to send headers, what difference is there between template.sendBody and         template.sendBodyAndHeaders? Issue seems to be that when I mock the endpoint with &quot;mock:&quot; in test class it does not puck up the .to() endpoint - I manually added the &quot;mock:&quot; into the route as well and it worked but I am sure this is not the proper way..","body":"I have a predicate checking headers so I need to send headers, what difference is there between template.sendBody and         template.sendBodyAndHeaders? Issue seems to be that when I mock the endpoint with &quot;mock:&quot; in test class it does not puck up the .to() endpoint - I manually added the &quot;mock:&quot; into the route as well and it worked but I am sure this is not the proper way.."},{"owner":{"account_id":26014900,"reputation":23,"user_id":20825594,"display_name":"John"},"score":0,"creation_date":1672831628,"post_id":75003600,"comment_id":132360270,"body_markdown":"Believe I may need to use Advice with not sure how to implement...","body":"Believe I may need to use Advice with not sure how to implement..."}],"answers":[{"tags":[],"owner":{"account_id":1674328,"reputation":2652,"user_id":1540177,"display_name":"grekier"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672837733,"creation_date":1672837733,"answer_id":75005927,"question_id":75003600,"body_markdown":"Here is an example with route advice. Note that you probably will need to do some cleanup after your test to reset the data!\r\n\r\nA bit older code in kotlin but should get the idea:\r\n```\r\n@SpringBootTest\r\nclass YourTest {\r\n    @Autowired\r\n    private lateinit var camelContext: CamelContext\r\n\r\n    @Autowired\r\n    private lateinit var template: ProducerTemplate\r\n\r\n    // No MockEndpoints\r\n\r\n    ...\r\n\r\n    @Throws(Exception::class)\r\n    private fun configureMockEndpoint() {\r\n        AdviceWith.adviceWith(\r\n            camelContext,\r\n            &quot;yourRouteId&quot;\r\n        ) { adviceWithRouteBuilder: AdviceWithRouteBuilder -&gt;\r\n            adviceWithRouteBuilder.replaceFromWith(&quot;direct:test&quot;)\r\n        }\r\n    }\r\n\r\n    @Test\r\n    fun yourTest() {\r\n        configureMockEndpoint()\r\n        template.sendBodyAndHeader(&quot;direct:test&quot;, &quot;Your headers&quot;, &quot;&quot;&quot;\r\n            your content\r\n        &quot;&quot;&quot;.trimIndent())\r\n        // asserts\r\n        // cleanups\r\n    }\r\n\r\n}\r\n```","title":"Writing a apache camel test case but getting this error","body":"<p>Here is an example with route advice. Note that you probably will need to do some cleanup after your test to reset the data!</p>\n<p>A bit older code in kotlin but should get the idea:</p>\n<pre><code>@SpringBootTest\nclass YourTest {\n    @Autowired\n    private lateinit var camelContext: CamelContext\n\n    @Autowired\n    private lateinit var template: ProducerTemplate\n\n    // No MockEndpoints\n\n    ...\n\n    @Throws(Exception::class)\n    private fun configureMockEndpoint() {\n        AdviceWith.adviceWith(\n            camelContext,\n            &quot;yourRouteId&quot;\n        ) { adviceWithRouteBuilder: AdviceWithRouteBuilder -&gt;\n            adviceWithRouteBuilder.replaceFromWith(&quot;direct:test&quot;)\n        }\n    }\n\n    @Test\n    fun yourTest() {\n        configureMockEndpoint()\n        template.sendBodyAndHeader(&quot;direct:test&quot;, &quot;Your headers&quot;, &quot;&quot;&quot;\n            your content\n        &quot;&quot;&quot;.trimIndent())\n        // asserts\n        // cleanups\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":26014900,"reputation":23,"user_id":20825594,"display_name":"John"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":348,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1672848282,"creation_date":1672825475,"question_id":75003600,"body_markdown":"am writing a camel route test case but am getting this issue,  have also included the camel route. Have debugged looks like the object is flowing through properly but on my assertion it seems to fail... \r\n\r\n\r\n\r\n&gt; java.lang.AssertionError:\r\n&gt; mock://seda:processMessage?blockWhenFull=true Received message count.\r\n&gt; Expected: &lt;1&gt; but was: &lt;0&gt;\r\n\r\n\t\r\n\r\n\r\n    import java.math.BigDecimal;\r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    \r\n    import org.apache.camel.EndpointInject;\r\n    import org.apache.camel.ProducerTemplate;\r\n    import org.apache.camel.component.mock.MockEndpoint;\r\n    import org.apache.camel.test.spring.MockEndpoints;\r\n    import org.apache.camel.test.spring.junit5.CamelSpringBootTest;\r\n    import org.junit.jupiter.api.Test;\r\n    import org.mockito.Mock;\r\n    import org.mockito.Mockito;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.boot.test.context.SpringBootTest;\r\n    \r\n    import com.fasterxml.jackson.core.JsonProcessingException;\r\n    import com.sams.pricing.prism.data.processor.model.CostIQRetail;\r\n    import com.sams.pricing.prism.data.processor.service.RulesEngineClient;\r\n    import com.sams.pricing.prism.data.processor.util.Endpoints;\r\n    \r\n    \r\n    \r\n    @SpringBootTest\r\n    @CamelSpringBootTest\r\n    @MockEndpoints( Endpoints.SEDA_PROCESS_ENDPOINT)\r\n    public class CamelRouteTests3  {\r\n    \r\n    \r\n    \t\r\n    \r\n    \t    @Autowired\r\n    \t    private ProducerTemplate template;\r\n    \r\n    \t    @EndpointInject(&quot;mock:&quot;+ Endpoints.SEDA_PROCESS_ENDPOINT)\r\n    \t    private MockEndpoint mock;\r\n    \r\n    \t    @Mock\r\n    \t    private RulesEngineClient rulesEngineClientMock;\r\n    \r\n    \t\r\n    \t\r\n    \r\n    \tpublic CostIQRetail costIQObject() {\r\n    \r\n    \t\tCostIQRetail obj = new CostIQRetail();\r\n    \r\n    \t\tobj.setItemNbr(123);\r\n    \t\tobj.setLocationNbr(4931);\r\n    \t\tobj.setIsDcFlag(false) ;\r\n    \t\tobj.setStatus(&quot;SUCCESS&quot;);\r\n    \t\tobj.setOrderableCost(new BigDecimal((10.0)));\r\n    \t\tobj.setWarehousePackCost(new BigDecimal(100.0));\r\n    \t\tobj.setOrderablePrepaidCost(null) ;\r\n    \t\tobj.setOrderableCollectCost(null) ;\r\n    \t\tobj.setReasonCode(&quot;Markdown - category funded&quot;);\r\n    \t\tobj.setEffectiveDate(&quot;2022-12-29&quot;);\r\n    \t\tobj.setIsFutureEffectiveDate(false);\r\n    \t\tobj.setCostType(&quot;WAREHOUSE PACK COST&quot;);\r\n    \t\tobj.setSource(&quot;COST IQ&quot;);\r\n    \t\tobj.setCreatedBy(&quot;lab1 account&quot;);\r\n    \t\tobj.setCreatedByUserId(&quot;LB-cost-test&quot;);\r\n    \t\tobj.setCreatedTs(&quot;2022-12-29T02:42:25.529Z&quot;);\r\n    \t\tobj.setCurrentRetailPrice(new BigDecimal(55.0)) ;\r\n    \t\tobj.setCurrentOrderableCost(null);\r\n    \t\tobj.setCurrentWarehousePackCost(new BigDecimal((0.0)));\r\n    \t\tobj.setCurrentOrderablePrepaidCost(null) ;\r\n    \t\tobj.setCurrentOrderableCollectCost(null);\r\n    \t\tobj.setMarginChange(new BigDecimal((-100.0)));\r\n    \t\tobj.setOwedToClub(new BigDecimal((0.0))); \r\n    \t\tobj.setItemSourceId(3572924); \r\n    \t\tobj.setPriceDestId(701800);\r\n    \t\tobj.setCategory(87);\r\n    \t\tobj.setOrderableQty(null);\r\n    \t\tobj.setOldMargin(new BigDecimal((100.0)));\r\n    \t\tobj.setNewMargin(new BigDecimal(0.0));  \r\n    \r\n    \t\treturn obj;\r\n    \t}\r\n    \r\n    \tprivate String costIQPayloadString() throws JsonProcessingException\r\n    \t{\r\n    \r\n    \t\t String key =  &quot;{\\&quot;retailTypeReasonCode\\&quot;:{\\&quot;retailTypeReasonCodeId\\&quot;:{\\&quot;retailType\\&quot;:\\&quot;BP\\&quot;,\\&quot;retailReasonCode\\&quot;:\\&quot;CC\\&quot;}},\\&quot;expirationDate\\&quot;:null,\\&quot;customerRetailAmount\\&quot;:0.0,\\&quot;auditMessage\\&quot;:null,\\&quot;createdTimestamp\\&quot;:null,\\&quot;clientID\\&quot;:\\&quot;COST IQ\\&quot;,\\&quot;rowNumber\\&quot;:0,\\&quot;auditRecordTimestamp\\&quot;:null,\\&quot;clubNumber\\&quot;:4931,\\&quot;itemNumber\\&quot;:123,\\&quot;effectiveDate\\&quot;:\\&quot;2022-12-29\\&quot;,\\&quot;submissionID\\&quot;:null,\\&quot;retailAmount\\&quot;:55.0,\\&quot;createdBy\\&quot;:\\&quot;lab1 account\\&quot;}&quot;;\r\n    \t//\t String key2 = &quot;{\\&quot;retailTypeReasonCode\\&quot;:{\\&quot;retailTypeReasonCodeId\\&quot;:{\\&quot;retailType\\&quot;:\\&quot;BP\\&quot;,\\&quot;retailReasonCode\\&quot;:\\&quot;CC\\&quot;}},\\&quot;expirationDate\\&quot;:null,\\&quot;customerRetailAmount\\&quot;:0.0,\\&quot;auditMessage\\&quot;:null,\\&quot;createdTimestamp\\&quot;:null,\\&quot;clientID\\&quot;:\\&quot;COST IQ\\&quot;,\\&quot;rowNumber\\&quot;:0,\\&quot;auditRecordTimestamp\\&quot;:null,\\&quot;categoryId\\&quot;:87,\\&quot;subCategoryId\\&quot;:1,\\&quot;clubNumber\\&quot;:4931,\\&quot;itemNumber\\&quot;:123,\\&quot;effectiveDate\\&quot;:\\&quot;2022-12-29\\&quot;,\\&quot;submissionID\\&quot;:null,\\&quot;retailAmount\\&quot;:10.0,\\&quot;createdBy\\&quot;:\\&quot;lab1 account\\&quot;}&quot;;\r\n    \t\t return key;\r\n    \r\n    //\t\tCostIQPayloadTransformer transformer = new CostIQPayloadTransformer();\r\n    //\t\treturn transformer.payloadTransformer(costIQObject());\r\n    \t}\r\n    \r\n    \r\n    \t@Test\r\n    \t void test() throws Exception {\r\n    \t\t// Set up the mock endpoints\r\n    \t\tmock.expectedBodiesReceived(costIQPayloadString());\r\n    \t\t\r\n    \t\t//getMockEndpoint( mock  +  Endpoints.SEDA_PROCESS_ENDPOINT).expectedBodiesReceived(costIQPayloadString());\r\n    \r\n    \r\n    \t\t//**need to properly mock and return this value\r\n    \t\tMockito.when(rulesEngineClientMock.validateRules((costIQObject()))).thenReturn(costIQObject());  //.thenR\r\n    \r\n    \t\tMap&lt;String, Object&gt; headers = new HashMap&lt;&gt;();\r\n    \t\theaders.put(&quot;appName&quot;, &quot;costIQ&quot;);\r\n    \r\n    \t\t//   Send the test message to the SEDA_SEND_ENDPOINT\r\n    \t\ttemplate.sendBodyAndHeaders(Endpoints.SEDA_SEND_ENDPOINT, costIQObject(), headers);\r\n    \r\n    \t\t//System.out.println(&quot;here &quot; +mock.());\r\n    \t\tmock.assertIsSatisfied();\r\n    \r\n    \r\n    \t\r\n    \t}\r\n    \r\n    \r\n    \r\n    }\r\n\r\n\r\n(below is the camel route ) \r\n\r\n\r\n     ThreadPoolExecutor executor = (ThreadPoolExecutor) Executors.newFixedThreadPool(2);\r\n        ExecutorService executorService =\r\n            MoreExecutors.getExitingExecutorService(executor, 100, TimeUnit.MILLISECONDS);\r\n    \r\n        @SuppressWarnings(&quot;resource&quot;)\r\n    \tThrottlingInflightRoutePolicy throttlingInflightRoutePolicy =\r\n            new ThrottlingInflightRoutePolicy();\r\n        throttlingInflightRoutePolicy.setMaxInflightExchanges(150);\r\n        throttlingInflightRoutePolicy.setResumePercentOfMax(25);\r\n    \r\n        // Camel&#39;s error handler that will attempt to redeliver the message 3 times\r\n        errorHandler(deadLetterChannel(&quot;seda:costIqDeadLetterChannel&quot;)\r\n                        .maximumRedeliveries(3)\r\n                        .redeliveryDelay(3000)\r\n        );\r\n    \r\n        // SEDA Endpoint Stage Event Driven Architecture\r\n        from(Endpoints.SEDA_SEND_ENDPOINT)\r\n            .messageHistory()\r\n            // Route Name\r\n            .routeId(Endpoints.SEDA_SEND_ENDPOINT)\r\n    \r\n            // multicast\r\n            .multicast()\r\n            .parallelProcessing() // create parallel threads\r\n    \r\n            // thread pool\r\n            .threads()\r\n            .executorService(executorService) // specific thread pool\r\n            .log(&quot;Camel Route Started Message Processing : - ${body}&quot;)\r\n    \r\n            .choice()\r\n            .when(PrismUtility.costIQPredicate)\r\n            .circuitBreaker()\r\n            .inheritErrorHandler(true)\r\n            .bean(CostIQService.class, PrismConstants.CALCULATE_PRICE) // rules engine call\r\n            .bean(\r\n                CostIQPayloadTransformer.class,\r\n                PrismConstants.PAYLOAD_TRANSFORMER) // payload transformer\r\n            .to(\r\n                Endpoints.SEDA_PROCESS_ENDPOINT // consumer 1\r\n                )\r\n            .endCircuitBreaker()\r\n            .endChoice()\r\n    \r\n            .log(&quot;Final :- ${body}&quot;)\r\n            .end();\r\n\r\n\r\nEdit :\r\n\r\nI modified the class like below by adding &quot;mock:&quot; to my route but  is there a way to go around this? seems like it is not sending to the proper endpoint without me changing and adding the &quot;mock:&quot; value to where it is sending  \r\n\r\n\r\n\r\nEdit :\r\n\r\nI added in this peice of code - to try to use adviceWith in my test class. I am calling the endpoint like so \r\n\r\n        getMockEndpoint(&quot;mock:&quot;+Endpoints.SEDA_PROCESS_ENDPOINT).expectedBodiesReceived(costIQPayloadString());\r\n\r\nBut am getting the error\r\n\r\n&gt; Cannot advice routes as there are no routes\r\n\r\n \r\n\r\n       @Test\r\n        public void testReplaceFrom() throws Exception {\r\n        \tAdviceWith.adviceWith(context, Endpoints.SEDA_PROCESS_ENDPOINT, a -&gt; {\r\n        \t    a.mockEndpoints(&quot;mock:&quot;+Endpoints.SEDA_PROCESS_ENDPOINT);\r\n        \t});\r\n        \t}\r\n","title":"Writing a apache camel test case but getting this error","body":"<p>am writing a camel route test case but am getting this issue,  have also included the camel route. Have debugged looks like the object is flowing through properly but on my assertion it seems to fail...</p>\n<blockquote>\n<p>java.lang.AssertionError:\nmock://seda:processMessage?blockWhenFull=true Received message count.\nExpected: &lt;1&gt; but was: &lt;0&gt;</p>\n</blockquote>\n<pre><code>import java.math.BigDecimal;\nimport java.util.HashMap;\nimport java.util.Map;\n\nimport org.apache.camel.EndpointInject;\nimport org.apache.camel.ProducerTemplate;\nimport org.apache.camel.component.mock.MockEndpoint;\nimport org.apache.camel.test.spring.MockEndpoints;\nimport org.apache.camel.test.spring.junit5.CamelSpringBootTest;\nimport org.junit.jupiter.api.Test;\nimport org.mockito.Mock;\nimport org.mockito.Mockito;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.context.SpringBootTest;\n\nimport com.fasterxml.jackson.core.JsonProcessingException;\nimport com.sams.pricing.prism.data.processor.model.CostIQRetail;\nimport com.sams.pricing.prism.data.processor.service.RulesEngineClient;\nimport com.sams.pricing.prism.data.processor.util.Endpoints;\n\n\n\n@SpringBootTest\n@CamelSpringBootTest\n@MockEndpoints( Endpoints.SEDA_PROCESS_ENDPOINT)\npublic class CamelRouteTests3  {\n\n\n    \n\n        @Autowired\n        private ProducerTemplate template;\n\n        @EndpointInject(&quot;mock:&quot;+ Endpoints.SEDA_PROCESS_ENDPOINT)\n        private MockEndpoint mock;\n\n        @Mock\n        private RulesEngineClient rulesEngineClientMock;\n\n    \n    \n\n    public CostIQRetail costIQObject() {\n\n        CostIQRetail obj = new CostIQRetail();\n\n        obj.setItemNbr(123);\n        obj.setLocationNbr(4931);\n        obj.setIsDcFlag(false) ;\n        obj.setStatus(&quot;SUCCESS&quot;);\n        obj.setOrderableCost(new BigDecimal((10.0)));\n        obj.setWarehousePackCost(new BigDecimal(100.0));\n        obj.setOrderablePrepaidCost(null) ;\n        obj.setOrderableCollectCost(null) ;\n        obj.setReasonCode(&quot;Markdown - category funded&quot;);\n        obj.setEffectiveDate(&quot;2022-12-29&quot;);\n        obj.setIsFutureEffectiveDate(false);\n        obj.setCostType(&quot;WAREHOUSE PACK COST&quot;);\n        obj.setSource(&quot;COST IQ&quot;);\n        obj.setCreatedBy(&quot;lab1 account&quot;);\n        obj.setCreatedByUserId(&quot;LB-cost-test&quot;);\n        obj.setCreatedTs(&quot;2022-12-29T02:42:25.529Z&quot;);\n        obj.setCurrentRetailPrice(new BigDecimal(55.0)) ;\n        obj.setCurrentOrderableCost(null);\n        obj.setCurrentWarehousePackCost(new BigDecimal((0.0)));\n        obj.setCurrentOrderablePrepaidCost(null) ;\n        obj.setCurrentOrderableCollectCost(null);\n        obj.setMarginChange(new BigDecimal((-100.0)));\n        obj.setOwedToClub(new BigDecimal((0.0))); \n        obj.setItemSourceId(3572924); \n        obj.setPriceDestId(701800);\n        obj.setCategory(87);\n        obj.setOrderableQty(null);\n        obj.setOldMargin(new BigDecimal((100.0)));\n        obj.setNewMargin(new BigDecimal(0.0));  \n\n        return obj;\n    }\n\n    private String costIQPayloadString() throws JsonProcessingException\n    {\n\n         String key =  &quot;{\\&quot;retailTypeReasonCode\\&quot;:{\\&quot;retailTypeReasonCodeId\\&quot;:{\\&quot;retailType\\&quot;:\\&quot;BP\\&quot;,\\&quot;retailReasonCode\\&quot;:\\&quot;CC\\&quot;}},\\&quot;expirationDate\\&quot;:null,\\&quot;customerRetailAmount\\&quot;:0.0,\\&quot;auditMessage\\&quot;:null,\\&quot;createdTimestamp\\&quot;:null,\\&quot;clientID\\&quot;:\\&quot;COST IQ\\&quot;,\\&quot;rowNumber\\&quot;:0,\\&quot;auditRecordTimestamp\\&quot;:null,\\&quot;clubNumber\\&quot;:4931,\\&quot;itemNumber\\&quot;:123,\\&quot;effectiveDate\\&quot;:\\&quot;2022-12-29\\&quot;,\\&quot;submissionID\\&quot;:null,\\&quot;retailAmount\\&quot;:55.0,\\&quot;createdBy\\&quot;:\\&quot;lab1 account\\&quot;}&quot;;\n    //   String key2 = &quot;{\\&quot;retailTypeReasonCode\\&quot;:{\\&quot;retailTypeReasonCodeId\\&quot;:{\\&quot;retailType\\&quot;:\\&quot;BP\\&quot;,\\&quot;retailReasonCode\\&quot;:\\&quot;CC\\&quot;}},\\&quot;expirationDate\\&quot;:null,\\&quot;customerRetailAmount\\&quot;:0.0,\\&quot;auditMessage\\&quot;:null,\\&quot;createdTimestamp\\&quot;:null,\\&quot;clientID\\&quot;:\\&quot;COST IQ\\&quot;,\\&quot;rowNumber\\&quot;:0,\\&quot;auditRecordTimestamp\\&quot;:null,\\&quot;categoryId\\&quot;:87,\\&quot;subCategoryId\\&quot;:1,\\&quot;clubNumber\\&quot;:4931,\\&quot;itemNumber\\&quot;:123,\\&quot;effectiveDate\\&quot;:\\&quot;2022-12-29\\&quot;,\\&quot;submissionID\\&quot;:null,\\&quot;retailAmount\\&quot;:10.0,\\&quot;createdBy\\&quot;:\\&quot;lab1 account\\&quot;}&quot;;\n         return key;\n\n//      CostIQPayloadTransformer transformer = new CostIQPayloadTransformer();\n//      return transformer.payloadTransformer(costIQObject());\n    }\n\n\n    @Test\n     void test() throws Exception {\n        // Set up the mock endpoints\n        mock.expectedBodiesReceived(costIQPayloadString());\n        \n        //getMockEndpoint( mock  +  Endpoints.SEDA_PROCESS_ENDPOINT).expectedBodiesReceived(costIQPayloadString());\n\n\n        //**need to properly mock and return this value\n        Mockito.when(rulesEngineClientMock.validateRules((costIQObject()))).thenReturn(costIQObject());  //.thenR\n\n        Map&lt;String, Object&gt; headers = new HashMap&lt;&gt;();\n        headers.put(&quot;appName&quot;, &quot;costIQ&quot;);\n\n        //   Send the test message to the SEDA_SEND_ENDPOINT\n        template.sendBodyAndHeaders(Endpoints.SEDA_SEND_ENDPOINT, costIQObject(), headers);\n\n        //System.out.println(&quot;here &quot; +mock.());\n        mock.assertIsSatisfied();\n\n\n    \n    }\n\n\n\n}\n</code></pre>\n<p>(below is the camel route )</p>\n<pre><code> ThreadPoolExecutor executor = (ThreadPoolExecutor) Executors.newFixedThreadPool(2);\n    ExecutorService executorService =\n        MoreExecutors.getExitingExecutorService(executor, 100, TimeUnit.MILLISECONDS);\n\n    @SuppressWarnings(&quot;resource&quot;)\n    ThrottlingInflightRoutePolicy throttlingInflightRoutePolicy =\n        new ThrottlingInflightRoutePolicy();\n    throttlingInflightRoutePolicy.setMaxInflightExchanges(150);\n    throttlingInflightRoutePolicy.setResumePercentOfMax(25);\n\n    // Camel's error handler that will attempt to redeliver the message 3 times\n    errorHandler(deadLetterChannel(&quot;seda:costIqDeadLetterChannel&quot;)\n                    .maximumRedeliveries(3)\n                    .redeliveryDelay(3000)\n    );\n\n    // SEDA Endpoint Stage Event Driven Architecture\n    from(Endpoints.SEDA_SEND_ENDPOINT)\n        .messageHistory()\n        // Route Name\n        .routeId(Endpoints.SEDA_SEND_ENDPOINT)\n\n        // multicast\n        .multicast()\n        .parallelProcessing() // create parallel threads\n\n        // thread pool\n        .threads()\n        .executorService(executorService) // specific thread pool\n        .log(&quot;Camel Route Started Message Processing : - ${body}&quot;)\n\n        .choice()\n        .when(PrismUtility.costIQPredicate)\n        .circuitBreaker()\n        .inheritErrorHandler(true)\n        .bean(CostIQService.class, PrismConstants.CALCULATE_PRICE) // rules engine call\n        .bean(\n            CostIQPayloadTransformer.class,\n            PrismConstants.PAYLOAD_TRANSFORMER) // payload transformer\n        .to(\n            Endpoints.SEDA_PROCESS_ENDPOINT // consumer 1\n            )\n        .endCircuitBreaker()\n        .endChoice()\n\n        .log(&quot;Final :- ${body}&quot;)\n        .end();\n</code></pre>\n<p>Edit :</p>\n<p>I modified the class like below by adding &quot;mock:&quot; to my route but  is there a way to go around this? seems like it is not sending to the proper endpoint without me changing and adding the &quot;mock:&quot; value to where it is sending</p>\n<p>Edit :</p>\n<p>I added in this peice of code - to try to use adviceWith in my test class. I am calling the endpoint like so</p>\n<pre><code>    getMockEndpoint(&quot;mock:&quot;+Endpoints.SEDA_PROCESS_ENDPOINT).expectedBodiesReceived(costIQPayloadString());\n</code></pre>\n<p>But am getting the error</p>\n<blockquote>\n<p>Cannot advice routes as there are no routes</p>\n</blockquote>\n<pre><code>   @Test\n    public void testReplaceFrom() throws Exception {\n        AdviceWith.adviceWith(context, Endpoints.SEDA_PROCESS_ENDPOINT, a -&gt; {\n            a.mockEndpoints(&quot;mock:&quot;+Endpoints.SEDA_PROCESS_ENDPOINT);\n        });\n        }\n</code></pre>\n"},{"tags":["java","spring-boot","keycloak","spring-cloud","spring-cloud-gateway"],"comments":[{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":1,"creation_date":1672861225,"post_id":75008132,"comment_id":132370702,"body_markdown":"This does not answer your question, but, in my opinion, an API gateway in OAuth2 ecosystem is a resource-server. An OAuth2 request to a secured resource should be authorized: the clients should have positioned an Authorization header with a Bearer access-token already. Use a [certified OpenID client lib](https://openid.net/developers/certified/) in your clients and send already authorized requests to your API, things will be easier.","body":"This does not answer your question, but, in my opinion, an API gateway in OAuth2 ecosystem is a resource-server. An OAuth2 request to a secured resource should be authorized: the clients should have positioned an Authorization header with a Bearer access-token already. Use a <a href=\"https://openid.net/developers/certified/\" rel=\"nofollow noreferrer\">certified OpenID client lib</a> in your clients and send already authorized requests to your API, things will be easier."},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1672861327,"post_id":75008132,"comment_id":132370733,"body_markdown":"Otherwise, in your conf, write a `provider` for each Keycloak realm and matching clients.","body":"Otherwise, in your conf, write a <code>provider</code> for each Keycloak realm and matching clients."},{"owner":{"account_id":4224410,"reputation":638,"user_id":3458271,"display_name":"user3458271"},"score":0,"creation_date":1672909654,"post_id":75008132,"comment_id":132380494,"body_markdown":"@ch4mp, Yes that make sense but our application is fully SaaS based so the client won&#39;t have direct access to anything, users and realms everything will be created on the fly, so to generate access-token right now they won&#39;t have any information. And to create new provider we have to restart server every time that we don&#39;t want to do it.","body":"@ch4mp, Yes that make sense but our application is fully SaaS based so the client won&#39;t have direct access to anything, users and realms everything will be created on the fly, so to generate access-token right now they won&#39;t have any information. And to create new provider we have to restart server every time that we don&#39;t want to do it."}],"owner":{"account_id":4224410,"reputation":638,"user_id":3458271,"display_name":"user3458271"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":504,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672848265,"creation_date":1672848265,"question_id":75008132,"body_markdown":"I am building one spring cloud gateway and in that I am implementing Keycloak Security everything works fine but need to do programmatically instead of writing in yml file there can be multiple Realms.\r\n\r\nBelow are the dependencies which I am using: \r\n\r\n    &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-oauth2-client&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-cloud-starter-gateway&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n And my application Api gateway start application code is as below:\r\n\r\n    @SpringBootApplication\r\n    @ComponentScan(basePackages = {&quot;com&quot;, &quot;com.b&quot;,&quot;com.auth&quot;,&quot;com.security&quot;})\r\n    public class APIGatewayApplication {\r\n       public static void main(String[] args) {\r\n    \t\tSpringApplication.run(APIGatewayApplication.class, args);\r\n    \t}\r\n       @Bean\r\n    \tpublic KeycloakConfigResolver keycloakConfigResolver() {\r\n    \t\treturn new PathBasedKeycloakConfigResolver();\r\n    \t}\r\n    }\r\n\r\nSecurity Config http code is as below:\r\n\r\n    @Configuration\r\n    public class SecurityConfig {\r\n    \r\n        @Bean\r\n        public SecurityWebFilterChain springSecurityFilterChain (ServerHttpSecurity http) {\r\n    \r\n            http\r\n                    .authorizeExchange()\r\n                    .anyExchange()\r\n                    .authenticated()\r\n                    .and()\r\n                    .oauth2Login(); // to redirect to oauth2 login page.\r\n    \r\n            return http.build();\r\n        }\r\n    \r\n    }\r\n\r\nand in my application.yml file I am adding below configuration:\r\n\r\n    spring:\r\n      security:\r\n        oauth2:\r\n          client:\r\n            provider:\r\n              my-keycloak-provider:\r\n                issuer-uri: http://localhost:8280/auth/realms/Default\r\n            registration:\r\n              keycloak-spring-gateway-client:\r\n                provider: my-keycloak-provider\r\n                client-id: Default\r\n                client-secret: 8ZRUH62Pfhfde6uqasD8dfgdhvqWt03K6\r\n                authorization-grant-type: authorization_code\r\n                redirect-uri: &#39;{baseUrl}/app&#39;\r\n      main:\r\n        web-application-type: reactive\r\n      application:\r\n        name: app\r\n      cloud:\r\n        gateway:\r\n          default-filters:\r\n            - TokenRelay\r\n\r\nSo we can in configuration file I am manually adding configs for one Realms but there can be multiple realms in that how to do it programmatically dynamic? .","title":"How to programmatically configure keycloak with spring cloud gateway api?","body":"<p>I am building one spring cloud gateway and in that I am implementing Keycloak Security everything works fine but need to do programmatically instead of writing in yml file there can be multiple Realms.</p>\n<p>Below are the dependencies which I am using:</p>\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-oauth2-client&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-cloud-starter-gateway&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>And my application Api gateway start application code is as below:</p>\n<pre><code>@SpringBootApplication\n@ComponentScan(basePackages = {&quot;com&quot;, &quot;com.b&quot;,&quot;com.auth&quot;,&quot;com.security&quot;})\npublic class APIGatewayApplication {\n   public static void main(String[] args) {\n        SpringApplication.run(APIGatewayApplication.class, args);\n    }\n   @Bean\n    public KeycloakConfigResolver keycloakConfigResolver() {\n        return new PathBasedKeycloakConfigResolver();\n    }\n}\n</code></pre>\n<p>Security Config http code is as below:</p>\n<pre><code>@Configuration\npublic class SecurityConfig {\n\n    @Bean\n    public SecurityWebFilterChain springSecurityFilterChain (ServerHttpSecurity http) {\n\n        http\n                .authorizeExchange()\n                .anyExchange()\n                .authenticated()\n                .and()\n                .oauth2Login(); // to redirect to oauth2 login page.\n\n        return http.build();\n    }\n\n}\n</code></pre>\n<p>and in my application.yml file I am adding below configuration:</p>\n<pre><code>spring:\n  security:\n    oauth2:\n      client:\n        provider:\n          my-keycloak-provider:\n            issuer-uri: http://localhost:8280/auth/realms/Default\n        registration:\n          keycloak-spring-gateway-client:\n            provider: my-keycloak-provider\n            client-id: Default\n            client-secret: 8ZRUH62Pfhfde6uqasD8dfgdhvqWt03K6\n            authorization-grant-type: authorization_code\n            redirect-uri: '{baseUrl}/app'\n  main:\n    web-application-type: reactive\n  application:\n    name: app\n  cloud:\n    gateway:\n      default-filters:\n        - TokenRelay\n</code></pre>\n<p>So we can in configuration file I am manually adding configs for one Realms but there can be multiple realms in that how to do it programmatically dynamic? .</p>\n"},{"tags":["java","spring-boot","keycloak","spring-cloud","spring-cloud-gateway"],"comments":[{"owner":{"account_id":4224410,"reputation":638,"user_id":3458271,"display_name":"user3458271"},"score":0,"creation_date":1672925580,"post_id":75008081,"comment_id":132385760,"body_markdown":"removing &quot; redirect-uri&quot; works fine but not sure why it is happening because of it.","body":"removing &quot; redirect-uri&quot; works fine but not sure why it is happening because of it."}],"owner":{"account_id":4224410,"reputation":638,"user_id":3458271,"display_name":"user3458271"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":345,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672848166,"creation_date":1672848002,"question_id":75008081,"body_markdown":"I am building one spring cloud gateway and in that I am implementing Keycloak Security everything works fine but once login done on keycloak it is not redirecting back and showing error too many redirects I am not sure what I am missing?\r\n\r\nBelow are the dependencies which I am using: \r\n\r\n    &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-oauth2-client&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-cloud-starter-gateway&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n And my application Api gateway start application code is as below:\r\n\r\n    @SpringBootApplication\r\n    @ComponentScan(basePackages = {&quot;com&quot;, &quot;com.b&quot;,&quot;com.auth&quot;,&quot;com.security&quot;})\r\n    public class APIGatewayApplication {\r\n       public static void main(String[] args) {\r\n    \t\tSpringApplication.run(APIGatewayApplication.class, args);\r\n    \t}\r\n       @Bean\r\n    \tpublic KeycloakConfigResolver keycloakConfigResolver() {\r\n    \t\treturn new PathBasedKeycloakConfigResolver();\r\n    \t}\r\n    }\r\n\r\nSecurity Config http code is as below:\r\n\r\n    @Configuration\r\n    public class SecurityConfig {\r\n    \r\n        @Bean\r\n        public SecurityWebFilterChain springSecurityFilterChain (ServerHttpSecurity http) {\r\n    \r\n            http\r\n                    .authorizeExchange()\r\n                    .anyExchange()\r\n                    .authenticated()\r\n                    .and()\r\n                    .oauth2Login(); // to redirect to oauth2 login page.\r\n    \r\n            return http.build();\r\n        }\r\n    \r\n    }\r\n\r\nand in my application.yml file I am adding below configuration:\r\n\r\n    spring:\r\n      security:\r\n        oauth2:\r\n          client:\r\n            provider:\r\n              my-keycloak-provider:\r\n                issuer-uri: http://localhost:8280/auth/realms/Default\r\n            registration:\r\n              keycloak-spring-gateway-client:\r\n                provider: my-keycloak-provider\r\n                client-id: Default\r\n                client-secret: 8ZRUH62Pfhfde6uqasD8dfgdhvqWt03K6\r\n                authorization-grant-type: authorization_code\r\n                redirect-uri: &#39;{baseUrl}/app&#39;\r\n      main:\r\n        web-application-type: reactive\r\n      application:\r\n        name: app\r\n      cloud:\r\n        gateway:\r\n          default-filters:\r\n            - TokenRelay\r\n\r\nSo when I start application it is running fine and it is getting redirected to the Keycloak login page and after login it shows error &quot;**localhost redirected you too many times.**&quot; How to resolve it so once it is login it should redirected once only to main application? Please help.","title":"Keycloak redirects too many times after login in Spring gateway cloud","body":"<p>I am building one spring cloud gateway and in that I am implementing Keycloak Security everything works fine but once login done on keycloak it is not redirecting back and showing error too many redirects I am not sure what I am missing?</p>\n<p>Below are the dependencies which I am using:</p>\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-oauth2-client&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-cloud-starter-gateway&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>And my application Api gateway start application code is as below:</p>\n<pre><code>@SpringBootApplication\n@ComponentScan(basePackages = {&quot;com&quot;, &quot;com.b&quot;,&quot;com.auth&quot;,&quot;com.security&quot;})\npublic class APIGatewayApplication {\n   public static void main(String[] args) {\n        SpringApplication.run(APIGatewayApplication.class, args);\n    }\n   @Bean\n    public KeycloakConfigResolver keycloakConfigResolver() {\n        return new PathBasedKeycloakConfigResolver();\n    }\n}\n</code></pre>\n<p>Security Config http code is as below:</p>\n<pre><code>@Configuration\npublic class SecurityConfig {\n\n    @Bean\n    public SecurityWebFilterChain springSecurityFilterChain (ServerHttpSecurity http) {\n\n        http\n                .authorizeExchange()\n                .anyExchange()\n                .authenticated()\n                .and()\n                .oauth2Login(); // to redirect to oauth2 login page.\n\n        return http.build();\n    }\n\n}\n</code></pre>\n<p>and in my application.yml file I am adding below configuration:</p>\n<pre><code>spring:\n  security:\n    oauth2:\n      client:\n        provider:\n          my-keycloak-provider:\n            issuer-uri: http://localhost:8280/auth/realms/Default\n        registration:\n          keycloak-spring-gateway-client:\n            provider: my-keycloak-provider\n            client-id: Default\n            client-secret: 8ZRUH62Pfhfde6uqasD8dfgdhvqWt03K6\n            authorization-grant-type: authorization_code\n            redirect-uri: '{baseUrl}/app'\n  main:\n    web-application-type: reactive\n  application:\n    name: app\n  cloud:\n    gateway:\n      default-filters:\n        - TokenRelay\n</code></pre>\n<p>So when I start application it is running fine and it is getting redirected to the Keycloak login page and after login it shows error &quot;<strong>localhost redirected you too many times.</strong>&quot; How to resolve it so once it is login it should redirected once only to main application? Please help.</p>\n"},{"tags":["java","performance","optimization"],"comments":[{"owner":{"account_id":446597,"reputation":22464,"user_id":839733,"accept_rate":69,"display_name":"Abhijit Sarkar"},"score":0,"creation_date":1671477472,"post_id":74855037,"comment_id":132103488,"body_markdown":"An array isn’t meant for efficiently checking membership, that’s what a set is for.","body":"An array isn’t meant for efficiently checking membership, that’s what a set is for."},{"owner":{"account_id":5688520,"reputation":7765,"user_id":4497253,"display_name":"CoronA"},"score":0,"creation_date":1671477501,"post_id":74855037,"comment_id":132103492,"body_markdown":"Bound checking is almost never on the critical path. And both `blocksArr[x][y][z] != null` and `blocksArr[x][y][z] != undefined` are shorthands for bound checking in Javascript.","body":"Bound checking is almost never on the critical path. And both <code>blocksArr[x][y][z] != null</code> and <code>blocksArr[x][y][z] != undefined</code> are shorthands for bound checking in Javascript."},{"owner":{"display_name":"user1196549"},"score":2,"creation_date":1671477570,"post_id":74855037,"comment_id":132103518,"body_markdown":"I don&#39;t see a faster way, but even if executed thousand times, this should not be a bottleneck. Did you pofile the code ?","body":"I don&#39;t see a faster way, but even if executed thousand times, this should not be a bottleneck. Did you pofile the code ?"},{"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1671477888,"post_id":74855037,"comment_id":132103595,"body_markdown":"Can it happen that any of your variables is negative?","body":"Can it happen that any of your variables is negative?"},{"owner":{"display_name":"user20716279"},"score":0,"creation_date":1671477967,"post_id":74855037,"comment_id":132103621,"body_markdown":"not sure if that would make a difference but what about use blocksArr[x][y][z] and surround it by try and catch to catch any exception or that not available for your use case","body":"not sure if that would make a difference but what about use blocksArr[x][y][z] and surround it by try and catch to catch any exception or that not available for your use case"},{"owner":{"account_id":10836,"reputation":196641,"user_id":20654,"accept_rate":80,"display_name":"OscarRyz"},"score":2,"creation_date":1671478129,"post_id":74855037,"comment_id":132103662,"body_markdown":"That&#39;s one of the fastest things you can possible do, so most likely your problem in not here. What makes you think this is causing problems? Also why have you checked against `undefined` in Java (that&#39;s Javascript)","body":"That&#39;s one of the fastest things you can possible do, so most likely your problem in not here. What makes you think this is causing problems? Also why have you checked against <code>undefined</code> in Java (that&#39;s Javascript)"},{"owner":{"account_id":9961217,"reputation":497,"user_id":7370494,"display_name":"Ansar Ozden"},"score":0,"creation_date":1671478162,"post_id":74855037,"comment_id":132103669,"body_markdown":"You can use much more memory and keep blocksArr[] always filled. This way you can get rid of any bound checks for x, y and z.","body":"You can use much more memory and keep blocksArr[] always filled. This way you can get rid of any bound checks for x, y and z."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":2,"creation_date":1671480673,"post_id":74855037,"comment_id":132104309,"body_markdown":"Are the lengths changing ? Is the array jagged (different sizes) ?","body":"Are the lengths changing ? Is the array jagged (different sizes) ?"},{"owner":{"account_id":14943184,"reputation":10724,"user_id":10789207,"display_name":"AirSquid"},"score":0,"creation_date":1672015793,"post_id":74855037,"comment_id":132208247,"body_markdown":"I&#39;d suggest re-titling this question.  In no part of the question are we checking membership in an array...  Just lengths.","body":"I&#39;d suggest re-titling this question.  In no part of the question are we checking membership in an array...  Just lengths."}],"answers":[{"tags":[],"owner":{"account_id":26879596,"reputation":1092,"user_id":20460267,"display_name":"Simon Goater"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671489412,"creation_date":1671482202,"answer_id":74855739,"question_id":74855037,"body_markdown":"I don&#39;t know java but in general, I would expect the following to be at least as fast, possibly faster. \r\nYour compiler may do something like this anyway so it might not be faster. You can split the &#39;If&#39; statement up so that it will do fewer lookups. Sorry, but I&#39;ll have to write it as c code. You can get the idea and translate to java.\r\n\r\n    if (x &gt;= 0 &amp;&amp; y &gt;= 0 &amp;&amp; z &gt;= 0 &amp;&amp; x &lt; blocksArr.length) {\r\n      if (y &lt; blocksArr[x].length &amp;&amp; z &lt; blocksArr[x][y].length &amp;&amp; blocksArr[x][y][z]) {\r\n        .....\r\n      }\r\n    }\r\n\r\nAssuming user16320675 is correct about the evaluation order, you could use one &#39;if&#39; statement. I don&#39;t know how the java compiler works.\r\n\r\n\r\n    if (x &gt;= 0 &amp;&amp; y &gt;= 0 &amp;&amp; z &gt;= 0 &amp;&amp; x &lt; blocksArr.length &amp;&amp; y &lt; blocksArr[x].length &amp;&amp; z &lt; blocksArr[x][y].length &amp;&amp; blocksArr[x][y][z]) .....\r\n\r\n","title":"More efficient way to check if a value is included in an array?","body":"<p>I don't know java but in general, I would expect the following to be at least as fast, possibly faster.\nYour compiler may do something like this anyway so it might not be faster. You can split the 'If' statement up so that it will do fewer lookups. Sorry, but I'll have to write it as c code. You can get the idea and translate to java.</p>\n<pre><code>if (x &gt;= 0 &amp;&amp; y &gt;= 0 &amp;&amp; z &gt;= 0 &amp;&amp; x &lt; blocksArr.length) {\n  if (y &lt; blocksArr[x].length &amp;&amp; z &lt; blocksArr[x][y].length &amp;&amp; blocksArr[x][y][z]) {\n    .....\n  }\n}\n</code></pre>\n<p>Assuming user16320675 is correct about the evaluation order, you could use one 'if' statement. I don't know how the java compiler works.</p>\n<pre><code>if (x &gt;= 0 &amp;&amp; y &gt;= 0 &amp;&amp; z &gt;= 0 &amp;&amp; x &lt; blocksArr.length &amp;&amp; y &lt; blocksArr[x].length &amp;&amp; z &lt; blocksArr[x][y].length &amp;&amp; blocksArr[x][y][z]) .....\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9696025,"reputation":322,"user_id":7192440,"display_name":"Big Guy"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1671525790,"creation_date":1671525790,"answer_id":74860423,"question_id":74855037,"body_markdown":"What you are doing is a bounds check, to make sure that the indexes ```x```, ```y```, and ```z``` are valid indices in the ```blocksArr[][][]``` array. In C, this is necessary as C allows you to go outside the array.\r\n\r\nJava, however, does a bounds check every time you access the array. So you are doing a manual bounds check, then another check, plus Java is doing a check on two dimensions, and finally Java does another check on three dimensions.\r\n\r\nAll you really need to do is access the array, let Java do the bounds check, and catch an exception if any of the indices are out of bounds.\r\n\r\n```\r\n    boolean value;\r\n\r\n    try\r\n    {\r\n        value = blocksArr[x][y][z];\r\n    }\r\n    catch (ArrayIndexOutOfBoundsException e )\r\n    {\r\n        value = false;\r\n    }\r\n```\r\n\r\nThere is some overhead in setting up a try/catch block, but overall it should be faster.","title":"More efficient way to check if a value is included in an array?","body":"<p>What you are doing is a bounds check, to make sure that the indexes <code>x</code>, <code>y</code>, and <code>z</code> are valid indices in the <code>blocksArr[][][]</code> array. In C, this is necessary as C allows you to go outside the array.</p>\n<p>Java, however, does a bounds check every time you access the array. So you are doing a manual bounds check, then another check, plus Java is doing a check on two dimensions, and finally Java does another check on three dimensions.</p>\n<p>All you really need to do is access the array, let Java do the bounds check, and catch an exception if any of the indices are out of bounds.</p>\n<pre><code>    boolean value;\n\n    try\n    {\n        value = blocksArr[x][y][z];\n    }\n    catch (ArrayIndexOutOfBoundsException e )\n    {\n        value = false;\n    }\n</code></pre>\n<p>There is some overhead in setting up a try/catch block, but overall it should be faster.</p>\n"},{"tags":[],"owner":{"account_id":22931464,"reputation":449,"user_id":17065671,"display_name":"Qu&#226;n Anh Mai"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672848004,"creation_date":1671528984,"answer_id":74861030,"question_id":74855037,"body_markdown":"In general, the most efficient way of doing `t &gt;= 0 &amp;&amp; t &lt; u` with `u` known to be positive is to compare the unsigned value of `t` and `u` using `Integer.compareUnsigned(t, u) &lt; 0`. As a result, your `if` can be more efficiently expressed as\r\n\r\n    if (Integer.compareUnsigned(x, blocksArr.length) &lt; 0 &amp;&amp;\r\n        Integer.compareUnsigned(y, blocksArr[x].length) &lt; 0 &amp;&amp;\r\n        Integer.compareUnsigned(z, blocksArr[x][y].length) &lt; 0 &amp;&amp;\r\n        blocksArr[x][y][z])\r\n\r\nHowever, I think your representation of `blocksArr` as a 3-dimensional array is really inefficient and results in a lot of indirections, which greatly hinders the potential performance. A more logical approach is to represent it as a single array and have length, width, height being stored separately. This would result in your code looks something like this:\r\n\r\n    if (Integer.compareUnsigned(x, length) &lt; 0 &amp;&amp;\r\n        Integer.compareUnsigned(y, width) &lt; 0 &amp;&amp;\r\n        Integer.compareUnsigned(z, height) &lt; 0 &amp;&amp;\r\n        blocksArr[x * (width * height) + y * height + z])\r\n\r\nThis however limits your block to around 2 billion elements, to overcome this limitation, you need to resort to the Memory Access API, which is currently in preview. It has an important advantage that it allows the allocation and deallocation of memory blocks to be deterministic, which is much more desirable for too large memory pieces. Using a memory segment to represent the `blocksArr`, your code would become:\r\n\r\n    if (Long.compareUnsigned(x, length) &lt; 0 &amp;&amp;\r\n        Long.compareUnsigned(y, width) &lt; 0 &amp;&amp;\r\n        Long.compareUnsigned(z, height) &lt; 0 &amp;&amp;\r\n        blocksArr.get(ValueLayout.JAVA_BOOLEAN, x * (width * height) + y * height + z))\r\n\r\nMoreover, since `blocksArr` is a block of boolean values, packing them so that each element occupies only 1 bit will improve the memory consumption and cache pressure greatly. The check now can be expressed as:\r\n\r\n    long index = x * (width * height) + y * height + z;\r\n    long byteIndex = index &gt;&gt;&gt; 3;\r\n    int shift = (int)(index &amp; 7);\r\n    if (Long.compareUnsigned(x, length) &lt; 0 &amp;&amp;\r\n        Long.compareUnsigned(y, width) &lt; 0 &amp;&amp;\r\n        Long.compareUnsigned(z, height) &lt; 0 &amp;&amp;\r\n        blocksArr.get(ValueLayout.JAVA_BYTE, byteIndex) &amp; (1 &lt;&lt; shift) != 0)","title":"More efficient way to check if a value is included in an array?","body":"<p>In general, the most efficient way of doing <code>t &gt;= 0 &amp;&amp; t &lt; u</code> with <code>u</code> known to be positive is to compare the unsigned value of <code>t</code> and <code>u</code> using <code>Integer.compareUnsigned(t, u) &lt; 0</code>. As a result, your <code>if</code> can be more efficiently expressed as</p>\n<pre><code>if (Integer.compareUnsigned(x, blocksArr.length) &lt; 0 &amp;&amp;\n    Integer.compareUnsigned(y, blocksArr[x].length) &lt; 0 &amp;&amp;\n    Integer.compareUnsigned(z, blocksArr[x][y].length) &lt; 0 &amp;&amp;\n    blocksArr[x][y][z])\n</code></pre>\n<p>However, I think your representation of <code>blocksArr</code> as a 3-dimensional array is really inefficient and results in a lot of indirections, which greatly hinders the potential performance. A more logical approach is to represent it as a single array and have length, width, height being stored separately. This would result in your code looks something like this:</p>\n<pre><code>if (Integer.compareUnsigned(x, length) &lt; 0 &amp;&amp;\n    Integer.compareUnsigned(y, width) &lt; 0 &amp;&amp;\n    Integer.compareUnsigned(z, height) &lt; 0 &amp;&amp;\n    blocksArr[x * (width * height) + y * height + z])\n</code></pre>\n<p>This however limits your block to around 2 billion elements, to overcome this limitation, you need to resort to the Memory Access API, which is currently in preview. It has an important advantage that it allows the allocation and deallocation of memory blocks to be deterministic, which is much more desirable for too large memory pieces. Using a memory segment to represent the <code>blocksArr</code>, your code would become:</p>\n<pre><code>if (Long.compareUnsigned(x, length) &lt; 0 &amp;&amp;\n    Long.compareUnsigned(y, width) &lt; 0 &amp;&amp;\n    Long.compareUnsigned(z, height) &lt; 0 &amp;&amp;\n    blocksArr.get(ValueLayout.JAVA_BOOLEAN, x * (width * height) + y * height + z))\n</code></pre>\n<p>Moreover, since <code>blocksArr</code> is a block of boolean values, packing them so that each element occupies only 1 bit will improve the memory consumption and cache pressure greatly. The check now can be expressed as:</p>\n<pre><code>long index = x * (width * height) + y * height + z;\nlong byteIndex = index &gt;&gt;&gt; 3;\nint shift = (int)(index &amp; 7);\nif (Long.compareUnsigned(x, length) &lt; 0 &amp;&amp;\n    Long.compareUnsigned(y, width) &lt; 0 &amp;&amp;\n    Long.compareUnsigned(z, height) &lt; 0 &amp;&amp;\n    blocksArr.get(ValueLayout.JAVA_BYTE, byteIndex) &amp; (1 &lt;&lt; shift) != 0)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9696025,"reputation":322,"user_id":7192440,"display_name":"Big Guy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672002192,"creation_date":1672002192,"answer_id":74915883,"question_id":74855037,"body_markdown":"You have a box determined by three dimensions, ```x```, ```y```, and ```z```.\r\n\r\nIf any of those indices are outside the boundaries of the box, then the entire ```if()``` statement is false. So there is no need to walk through things like ``` blocksArr[x].length```\r\n\r\nAlso, think about what is actually going on under the hood. The variable ```x``` is in fact a pointer to a location in memory which holds the value. To process a statement like ```x &gt;= 0```, the computer must locate the memory location for ```x```, fetch that value and put it into one of its internal registers, say register A. It then takes that value 0 and puts it into register B. It compares Register A to register B. if A &gt; B, then it goes on to the next operation, otherwise it compares A to B again. If the comparison is zero, then it goes to the next operation, otherwise it move the operation pointer past the ```if()``` statement.\r\n\r\nFor comparing ```x &lt; blocksArr.length```, it again fetches ```x```, then fetches ```blocksArr``` calculates the offset to the ```length``` value, then fetches that into the register, where it does the comparison.\r\n\r\nYou can shorten all of this by using some static constants.\r\n\r\nConsider that ```x &gt;= 0``` can be re-written as ```x &gt; -1```. This can potentially reduce 2 comparisons to 1, so a few CPU cycles saved.\r\n\r\nAn array construct is an immutable object, that is it cannot be changed after being created. So an array&#39;s length will never be different. So if you created an array with size 5, blocksArr.length will always return 5. in the comparison ```x &lt; blocksArr.length``` you could substitute ```x &lt; 5```, which means the CPU does not need to fetch blocksArr.length, which saves CPU cycles.\r\n\r\nSo you could re-write the array creation, and your if statement to:\r\n\r\n```\r\npublic static final int MAX_X = 10;\r\npublic static final int MAX_Y = 15;\r\npublic static final int MAX_Z = 20;\r\n\r\npublic boolean blocksArr[][][] = new boolean[MAX_X][MAX_Y][MAX_Z];\r\n  \r\n.\r\n.\r\n.\r\n\r\n  if ( ( x &gt; -1 &amp;&amp; x &lt; MAX_X ) &amp;&amp; // validate for X dimension\r\n       ( y &gt; -1 &amp;&amp; y &lt; MAX_Y ) &amp;&amp; // validate for Y dimension\r\n       ( z &gt; -1 &amp;&amp; z &lt; MAX_Z ) &amp;&amp; // validate for Z dimension\r\n       blocksArr[x][y][z] )       // check value \r\n```\r\n\r\nI think this is the least CPU intensive way of doing this.  \r\n ","title":"More efficient way to check if a value is included in an array?","body":"<p>You have a box determined by three dimensions, <code>x</code>, <code>y</code>, and <code>z</code>.</p>\n<p>If any of those indices are outside the boundaries of the box, then the entire <code>if()</code> statement is false. So there is no need to walk through things like <code> blocksArr[x].length</code></p>\n<p>Also, think about what is actually going on under the hood. The variable <code>x</code> is in fact a pointer to a location in memory which holds the value. To process a statement like <code>x &gt;= 0</code>, the computer must locate the memory location for <code>x</code>, fetch that value and put it into one of its internal registers, say register A. It then takes that value 0 and puts it into register B. It compares Register A to register B. if A &gt; B, then it goes on to the next operation, otherwise it compares A to B again. If the comparison is zero, then it goes to the next operation, otherwise it move the operation pointer past the <code>if()</code> statement.</p>\n<p>For comparing <code>x &lt; blocksArr.length</code>, it again fetches <code>x</code>, then fetches <code>blocksArr</code> calculates the offset to the <code>length</code> value, then fetches that into the register, where it does the comparison.</p>\n<p>You can shorten all of this by using some static constants.</p>\n<p>Consider that <code>x &gt;= 0</code> can be re-written as <code>x &gt; -1</code>. This can potentially reduce 2 comparisons to 1, so a few CPU cycles saved.</p>\n<p>An array construct is an immutable object, that is it cannot be changed after being created. So an array's length will never be different. So if you created an array with size 5, blocksArr.length will always return 5. in the comparison <code>x &lt; blocksArr.length</code> you could substitute <code>x &lt; 5</code>, which means the CPU does not need to fetch blocksArr.length, which saves CPU cycles.</p>\n<p>So you could re-write the array creation, and your if statement to:</p>\n<pre><code>public static final int MAX_X = 10;\npublic static final int MAX_Y = 15;\npublic static final int MAX_Z = 20;\n\npublic boolean blocksArr[][][] = new boolean[MAX_X][MAX_Y][MAX_Z];\n  \n.\n.\n.\n\n  if ( ( x &gt; -1 &amp;&amp; x &lt; MAX_X ) &amp;&amp; // validate for X dimension\n       ( y &gt; -1 &amp;&amp; y &lt; MAX_Y ) &amp;&amp; // validate for Y dimension\n       ( z &gt; -1 &amp;&amp; z &lt; MAX_Z ) &amp;&amp; // validate for Z dimension\n       blocksArr[x][y][z] )       // check value \n</code></pre>\n<p>I think this is the least CPU intensive way of doing this.</p>\n"}],"owner":{"account_id":14518937,"reputation":1,"user_id":10487128,"display_name":"Emerson Mitchell"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":208,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1672848004,"creation_date":1671477182,"question_id":74855037,"body_markdown":"Writing a game that does lots of comparisons, and it&#39;s lagging. I&#39;m trying to speed it up, and this particular chunk of code is run thousands of times every frame, for different values of x y and z. Is there a better way to check if the values of x y and z are valid in the array? (java)\r\n\r\n\r\n`if (x &gt;= 0 &amp;&amp; x &lt; blocksArr.length &amp;&amp; y &gt;= 0 &amp;&amp; y &lt; blocksArr[x].length &amp;&amp; z &gt;= 0 &amp;&amp; z &lt; blocksArr[x][y].length &amp;&amp; blocksArr[x][y][z])`\r\n\r\nI&#39;ve tried checking if blocksArr[x][y][z] != null and checking if blocksArr[x][y][z] != undefined but neither give results.","title":"More efficient way to check if a value is included in an array?","body":"<p>Writing a game that does lots of comparisons, and it's lagging. I'm trying to speed it up, and this particular chunk of code is run thousands of times every frame, for different values of x y and z. Is there a better way to check if the values of x y and z are valid in the array? (java)</p>\n<p><code>if (x &gt;= 0 &amp;&amp; x &lt; blocksArr.length &amp;&amp; y &gt;= 0 &amp;&amp; y &lt; blocksArr[x].length &amp;&amp; z &gt;= 0 &amp;&amp; z &lt; blocksArr[x][y].length &amp;&amp; blocksArr[x][y][z])</code></p>\n<p>I've tried checking if blocksArr[x][y][z] != null and checking if blocksArr[x][y][z] != undefined but neither give results.</p>\n"},{"tags":["java","thymeleaf","spring-thymeleaf"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1672844225,"post_id":75007241,"comment_id":132364657,"body_markdown":"Add code as text not as image","body":"Add code as text not as image"},{"owner":{"account_id":3793951,"reputation":655,"user_id":3149693,"display_name":"Arnas"},"score":0,"creation_date":1672905624,"post_id":75007241,"comment_id":132379379,"body_markdown":"Read the message suggested by intelliJ IDEA","body":"Read the message suggested by intelliJ IDEA"}],"owner":{"account_id":26899934,"reputation":11,"user_id":20477235,"display_name":"Никита Мозолевский"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1672847812,"creation_date":1672844156,"question_id":75007241,"body_markdown":"At startup, the spring application works with view, but the html code is highlighted in red when it is written, respectively, it is not convenient to look for errors in html, here are photos and code of html and the controller:\r\n(https://i.stack.imgur.com/RDPvL.png)\r\n(https://i.stack.imgur.com/Bm1vQ.png)\r\n\r\n```\r\npackage com.nikita.al_fp.controllers;\r\n\r\nimport com.nikita.al_fp.entity.Book;\r\nimport com.nikita.al_fp.entity.Person;\r\nimport com.nikita.al_fp.service.BookService;\r\nimport com.nikita.al_fp.service.PersonService;\r\nimport com.nikita.al_fp.util.BookValidator;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.ui.Model;\r\nimport org.springframework.validation.BindingResult;\r\nimport org.springframework.web.bind.annotation.*;\r\nimport javax.validation.Valid;\r\n\r\n@Controller\r\n@RequestMapping(&quot;/book&quot;)\r\npublic class BookController {\r\n\r\n    private final BookValidator bookValidator;\r\n    private final PersonService personService;\r\n    private final BookService bookService;\r\n    public static final String BOOK_REDIRECT_PAGE = &quot;redirect:/book&quot;;\r\n\r\n    @Autowired\r\n    public BookController(BookValidator bookValidator, PersonService personService, BookService bookService) {\r\n        this.bookValidator = bookValidator;\r\n        this.personService = personService;\r\n        this.bookService = bookService;\r\n        personService.startProgramProcessPerson();\r\n        bookService.startProgramProcessBook();\r\n    }\r\n\r\n    @GetMapping\r\n    public String selectBook(Model model) {\r\n        model.addAttribute(&quot;books&quot;, bookService.findAll());\r\n        return &quot;/book/select_book&quot;;\r\n    }\r\n}\r\n\r\n```\r\n```\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html lang=&quot;en&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\r\n&lt;head&gt;\r\n    &lt;meta charset=&quot;UTF-8&quot;&gt;\r\n    &lt;title&gt;Select Book&lt;/title&gt;\r\n&lt;/head&gt;\r\n&lt;body&gt;\r\n\r\n&lt;div th:each=&quot;book : ${books}&quot;&gt;\r\n    &lt;a th:href=&quot;@{/book/{id}(id=${book.getId()})}&quot;\r\n       th:text=&quot;${book.getName() + &#39;, &#39; + book.getAuthor() + &#39;, &#39; + book.getYear()}&quot;&gt;book&lt;/a&gt;\r\n    &lt;br/&gt;\r\n&lt;/div&gt;\r\n\r\n&lt;br/&gt;\r\n&lt;hr/&gt;\r\n\r\n&lt;a href=&quot;/book/new&quot;&gt;Add book&lt;/a&gt;\r\n&lt;br&gt;\r\n&lt;a href=&quot;/people&quot;&gt;Show User List&lt;/a&gt;\r\n\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n\r\n\r\n```\r\n\r\n\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0.1&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.nikita&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;al_fp&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;al_fp&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.validation&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;validation-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.0.1.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\n\r\n\r\nI tried to find a solution on the Internet, unsuccessfully, but views work when app runned","title":"Can&#39;t join @Controller and Thymeleaf view","body":"<p>At startup, the spring application works with view, but the html code is highlighted in red when it is written, respectively, it is not convenient to look for errors in html, here are photos and code of html and the controller:\n(<a href=\"https://i.stack.imgur.com/RDPvL.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/RDPvL.png</a>)\n(<a href=\"https://i.stack.imgur.com/Bm1vQ.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/Bm1vQ.png</a>)</p>\n<pre><code>package com.nikita.al_fp.controllers;\n\nimport com.nikita.al_fp.entity.Book;\nimport com.nikita.al_fp.entity.Person;\nimport com.nikita.al_fp.service.BookService;\nimport com.nikita.al_fp.service.PersonService;\nimport com.nikita.al_fp.util.BookValidator;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.validation.BindingResult;\nimport org.springframework.web.bind.annotation.*;\nimport javax.validation.Valid;\n\n@Controller\n@RequestMapping(&quot;/book&quot;)\npublic class BookController {\n\n    private final BookValidator bookValidator;\n    private final PersonService personService;\n    private final BookService bookService;\n    public static final String BOOK_REDIRECT_PAGE = &quot;redirect:/book&quot;;\n\n    @Autowired\n    public BookController(BookValidator bookValidator, PersonService personService, BookService bookService) {\n        this.bookValidator = bookValidator;\n        this.personService = personService;\n        this.bookService = bookService;\n        personService.startProgramProcessPerson();\n        bookService.startProgramProcessBook();\n    }\n\n    @GetMapping\n    public String selectBook(Model model) {\n        model.addAttribute(&quot;books&quot;, bookService.findAll());\n        return &quot;/book/select_book&quot;;\n    }\n}\n\n</code></pre>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=&quot;en&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\n&lt;head&gt;\n    &lt;meta charset=&quot;UTF-8&quot;&gt;\n    &lt;title&gt;Select Book&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n&lt;div th:each=&quot;book : ${books}&quot;&gt;\n    &lt;a th:href=&quot;@{/book/{id}(id=${book.getId()})}&quot;\n       th:text=&quot;${book.getName() + ', ' + book.getAuthor() + ', ' + book.getYear()}&quot;&gt;book&lt;/a&gt;\n    &lt;br/&gt;\n&lt;/div&gt;\n\n&lt;br/&gt;\n&lt;hr/&gt;\n\n&lt;a href=&quot;/book/new&quot;&gt;Add book&lt;/a&gt;\n&lt;br&gt;\n&lt;a href=&quot;/people&quot;&gt;Show User List&lt;/a&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n\n\n</code></pre>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.1&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.nikita&lt;/groupId&gt;\n    &lt;artifactId&gt;al_fp&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;al_fp&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.validation&lt;/groupId&gt;\n            &lt;artifactId&gt;validation-api&lt;/artifactId&gt;\n            &lt;version&gt;2.0.1.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n<p>I tried to find a solution on the Internet, unsuccessfully, but views work when app runned</p>\n"},{"tags":["java","spring","spring-boot","tomcat"],"comments":[{"owner":{"account_id":18532310,"reputation":11,"user_id":13502779,"display_name":"Manuel Motta"},"score":0,"creation_date":1672769914,"post_id":74997126,"comment_id":132347570,"body_markdown":"Does this answer your question? https://stackoverflow.com/questions/35957040/how-to-show-custom-404-page-when-user-enters-invalid-url-in-spring-boot-applicat","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/35957040/how-to-show-custom-404-page-when-user-enters-invalid-url-in-spring-boot-applicat\" title=\"how to show custom 404 page when user enters invalid url in spring boot applicat\">stackoverflow.com/questions/35957040/&hellip;</a>"},{"owner":{"account_id":26843578,"reputation":33,"user_id":20429686,"display_name":"TheDude"},"score":0,"creation_date":1672771631,"post_id":74997126,"comment_id":132348009,"body_markdown":"Hello, i tried it but it doesn&#39;t work :(","body":"Hello, i tried it but it doesn&#39;t work :("}],"owner":{"account_id":26843578,"reputation":33,"user_id":20429686,"display_name":"TheDude"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":256,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1672847680,"creation_date":1672769426,"question_id":74997126,"body_markdown":"i want to make my application to return JSON instead of html response when trying to get localhost:8080, but i cannot achieve the desired result because this is before the  \r\n\r\n     servlet:\r\n        context-path: /v0\r\nand everything before &quot;/v0&quot; is returning index.html\r\n\r\n I want everything before &quot;/v0&quot; to return something like this:\r\n\r\n    {\r\n      &quot;timestamp&quot;: &quot;2022-12-01T12:59:51.832+00:00&quot;,\r\n      &quot;status&quot;: 404,\r\n      &quot;error&quot;: &quot;Not Found&quot;,\r\n      &quot;path&quot;: &quot;/&quot;\r\n    }\r\n\r\n  \r\n\r\nI tried to add this in my @ControllerAdvice \r\n\r\n    @ExceptionHandler(NoHandlerFoundException.class)\r\n    public ResponseEntity&lt;Map&lt;String, Object&gt;&gt; unhandledPath(Exception e) {\r\n      Map&lt;String, Object&gt; errorInfo = new LinkedHashMap&lt;&gt;();\r\n      errorInfo.put(&quot;timestamp&quot;, new Date());\r\n      errorInfo.put(&quot;httpCode&quot;, HttpStatus.NOT_FOUND.value());\r\n      errorInfo.put(&quot;httpStatus&quot;, HttpStatus.NOT_FOUND.getReasonPhrase());\r\n      errorInfo.put(&quot;errorMessage&quot;, e.getMessage());\r\n      return new ResponseEntity&lt;Map&lt;String, Object&gt;&gt;(errorInfo, HttpStatus.NOT_FOUND);\r\n    }\r\n\r\nBut it does&#39;t return the json instead returns this:\r\n\r\nhttps://i.stack.imgur.com/FlxiQ.png","title":"How to make an invalid url in spring boot to return JSON response instead of index.html","body":"<p>i want to make my application to return JSON instead of html response when trying to get localhost:8080, but i cannot achieve the desired result because this is before the</p>\n<pre><code> servlet:\n    context-path: /v0\n</code></pre>\n<p>and everything before &quot;/v0&quot; is returning index.html</p>\n<p>I want everything before &quot;/v0&quot; to return something like this:</p>\n<pre><code>{\n  &quot;timestamp&quot;: &quot;2022-12-01T12:59:51.832+00:00&quot;,\n  &quot;status&quot;: 404,\n  &quot;error&quot;: &quot;Not Found&quot;,\n  &quot;path&quot;: &quot;/&quot;\n}\n</code></pre>\n<p>I tried to add this in my @ControllerAdvice</p>\n<pre><code>@ExceptionHandler(NoHandlerFoundException.class)\npublic ResponseEntity&lt;Map&lt;String, Object&gt;&gt; unhandledPath(Exception e) {\n  Map&lt;String, Object&gt; errorInfo = new LinkedHashMap&lt;&gt;();\n  errorInfo.put(&quot;timestamp&quot;, new Date());\n  errorInfo.put(&quot;httpCode&quot;, HttpStatus.NOT_FOUND.value());\n  errorInfo.put(&quot;httpStatus&quot;, HttpStatus.NOT_FOUND.getReasonPhrase());\n  errorInfo.put(&quot;errorMessage&quot;, e.getMessage());\n  return new ResponseEntity&lt;Map&lt;String, Object&gt;&gt;(errorInfo, HttpStatus.NOT_FOUND);\n}\n</code></pre>\n<p>But it does't return the json instead returns this:</p>\n<p><a href=\"https://i.stack.imgur.com/FlxiQ.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/FlxiQ.png</a></p>\n"},{"tags":["java","spring","spring-boot","spring-data-jpa","spring-profiles"],"comments":[{"owner":{"account_id":4487116,"reputation":429,"user_id":3649352,"accept_rate":67,"display_name":"Kunal Varpe"},"score":0,"creation_date":1672857053,"post_id":75008001,"comment_id":132369391,"body_markdown":"Where you have provided profile value can you update the question please.","body":"Where you have provided profile value can you update the question please."}],"owner":{"account_id":4996271,"reputation":971,"user_id":4108345,"accept_rate":61,"display_name":"Harsh Kanakhara"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":328,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672847645,"creation_date":1672847645,"question_id":75008001,"body_markdown":"In my spring boot application, I have multiple profiles as below:\r\n\r\n    application.yml\r\n    application-dev.yml\r\n    application-local.yml\r\n    application-qa.yml\r\n    application-prod.yml\r\n\r\nEach profile will have its own datasource configured. For testing purpose, same datasource configuration are passed in all profiles. \r\n\r\nIn application.yml if I mention `spring.profiles.active=dev` it is connecting to DB successfully. But if I mention `spring.profiles.active=local` then on server startup local profile is getting active with below error\r\n\r\n    ***************************\r\n    APPLICATION FAILED TO START\r\n    ***************************\r\n    \r\n    Description:\r\n    \r\n    Failed to configure a DataSource: &#39;url&#39; attribute is not specified and no embedded datasource could be configured.\r\n    \r\n    Reason: Failed to determine a suitable driver class\r\n    \r\n    \r\n    Action:\r\n    \r\n    Consider the following:\r\n    \tIf you want an embedded database (H2, HSQL or Derby), please put it on the classpath.\r\n    \tIf you have database settings to be loaded from a particular profile you may need to activate it (the profiles lcl are currently active).\r\n\r\n\r\nBelow configuration passed in all profiles excluding `application.yml`\r\n\r\n    spring:\r\n      datasource:\r\n        driver-class-name: com.mysql.cj.jdbc.Driver\r\n        password: root\r\n        url: jdbc:mysql://localhost:3306/local_db?useSSL=false\r\n        username: root\r\n      jpa:\r\n        hibernate:\r\n          ddl-auto: update\r\n        show-sql: true\r\n      liquibase:\r\n        change-log: classpath:db/changelog/db.changelog-master.json\r\n\r\n","title":"spring.profiles.active not working for all profiles","body":"<p>In my spring boot application, I have multiple profiles as below:</p>\n<pre><code>application.yml\napplication-dev.yml\napplication-local.yml\napplication-qa.yml\napplication-prod.yml\n</code></pre>\n<p>Each profile will have its own datasource configured. For testing purpose, same datasource configuration are passed in all profiles.</p>\n<p>In application.yml if I mention <code>spring.profiles.active=dev</code> it is connecting to DB successfully. But if I mention <code>spring.profiles.active=local</code> then on server startup local profile is getting active with below error</p>\n<pre><code>***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nFailed to configure a DataSource: 'url' attribute is not specified and no embedded datasource could be configured.\n\nReason: Failed to determine a suitable driver class\n\n\nAction:\n\nConsider the following:\n    If you want an embedded database (H2, HSQL or Derby), please put it on the classpath.\n    If you have database settings to be loaded from a particular profile you may need to activate it (the profiles lcl are currently active).\n</code></pre>\n<p>Below configuration passed in all profiles excluding <code>application.yml</code></p>\n<pre><code>spring:\n  datasource:\n    driver-class-name: com.mysql.cj.jdbc.Driver\n    password: root\n    url: jdbc:mysql://localhost:3306/local_db?useSSL=false\n    username: root\n  jpa:\n    hibernate:\n      ddl-auto: update\n    show-sql: true\n  liquibase:\n    change-log: classpath:db/changelog/db.changelog-master.json\n</code></pre>\n"},{"tags":["java","android","itext","itext7"],"answers":[{"tags":[],"owner":{"account_id":345916,"reputation":461,"user_id":679116,"display_name":"S_G"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1668076109,"creation_date":1668076109,"answer_id":74387476,"question_id":74387198,"body_markdown":"In order to load iText 7 trial JSON license file, you need to have iText 7.2.4 and licensing base 4.0.4 jar file into your workspace. Once these dependencies are pulled through maven into your local workspace then you can invoke below line of code to load trial license. Please refer step by step installation guideline on how to pull dependencies here at https://kb.itextpdf.com/home/it7kb/installation-guidelines/installing-the-itext-license-key-and-license-key-library-for-java-and-net\r\n\r\nLicenseKey.loadLicenseFile(new File(&quot;path/to/itextkey.json&quot;));","title":"Itext 7 license","body":"<p>In order to load iText 7 trial JSON license file, you need to have iText 7.2.4 and licensing base 4.0.4 jar file into your workspace. Once these dependencies are pulled through maven into your local workspace then you can invoke below line of code to load trial license. Please refer step by step installation guideline on how to pull dependencies here at <a href=\"https://kb.itextpdf.com/home/it7kb/installation-guidelines/installing-the-itext-license-key-and-license-key-library-for-java-and-net\" rel=\"nofollow noreferrer\">https://kb.itextpdf.com/home/it7kb/installation-guidelines/installing-the-itext-license-key-and-license-key-library-for-java-and-net</a></p>\n<p>LicenseKey.loadLicenseFile(new File(&quot;path/to/itextkey.json&quot;));</p>\n"},{"tags":[],"owner":{"account_id":27432684,"reputation":1,"user_id":20929099,"display_name":"Carl"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672847551,"creation_date":1672847551,"answer_id":75007982,"question_id":74387198,"body_markdown":"First, make sure you add the license key file to your project.\r\nFor me, I used AppDomain.CurrentDomain.BaseDirectory for the location of my file.\r\nFinally, in Solution Explorer, I highlighted the license key file and in the properties window, I set &quot;Copy to Output Directory&quot; to &quot;Copy always&quot; to make it available during runtime.\r\n\r\n","title":"Itext 7 license","body":"<p>First, make sure you add the license key file to your project.\nFor me, I used AppDomain.CurrentDomain.BaseDirectory for the location of my file.\nFinally, in Solution Explorer, I highlighted the license key file and in the properties window, I set &quot;Copy to Output Directory&quot; to &quot;Copy always&quot; to make it available during runtime.</p>\n"}],"owner":{"account_id":18364441,"reputation":275,"user_id":13375840,"display_name":"zyngot"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":624,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1672847551,"creation_date":1668074545,"question_id":74387198,"body_markdown":"I can&#39;t seem to figure how to load the license file for itext 7. I got the trial license but I don&#39;t know where to put it, classpath? where is classpath? and when I put it anywhere how can I get its path in order to put it in the\r\n\r\n    LicenseKey.loadLicenseFile(new File(&quot;path/to/itextkey.json&quot;));\r\n\r\nI keep getting the error\r\n\r\n    License file can not be null. \r\nwhenever I try putting it somewhere and adding the path but I am certain I am doing it wrong, can someone explain to me how?","title":"Itext 7 license","body":"<p>I can't seem to figure how to load the license file for itext 7. I got the trial license but I don't know where to put it, classpath? where is classpath? and when I put it anywhere how can I get its path in order to put it in the</p>\n<pre><code>LicenseKey.loadLicenseFile(new File(&quot;path/to/itextkey.json&quot;));\n</code></pre>\n<p>I keep getting the error</p>\n<pre><code>License file can not be null. \n</code></pre>\n<p>whenever I try putting it somewhere and adding the path but I am certain I am doing it wrong, can someone explain to me how?</p>\n"},{"tags":["java","windows","random"],"comments":[{"owner":{"account_id":1220452,"reputation":2159,"user_id":1187194,"display_name":"lxbndr"},"score":1,"creation_date":1332840231,"post_id":9885380,"comment_id":12610335,"body_markdown":"Take a look at answer [here](http://stackoverflow.com/questions/8667129/cryptacquirecontexta-fails-in-c-clr-for-aloaha-cryptographic-provider). Are race conditions possible in your environment?","body":"Take a look at answer <a href=\"http://stackoverflow.com/questions/8667129/cryptacquirecontexta-fails-in-c-clr-for-aloaha-cryptographic-provider\">here</a>. Are race conditions possible in your environment?"}],"answers":[{"tags":[],"owner":{"account_id":329138,"reputation":8059,"user_id":652497,"accept_rate":91,"display_name":"Jonathan S. Fisher"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1342645557,"creation_date":1342645557,"answer_id":11550349,"question_id":9885380,"body_markdown":"While your problem smells like a concurrent access problem, I have a workaround for you: Use bouncycastle as a JCE provider and see if that fixes your problem. Put the jar into your classpath, then at some point run this code: `Security.addProvider(new BouncyCastleProvider());`","title":"In windows Java SecureRandom.generateSeed failed: Unexpected CryptoAPI failure","body":"<p>While your problem smells like a concurrent access problem, I have a workaround for you: Use bouncycastle as a JCE provider and see if that fixes your problem. Put the jar into your classpath, then at some point run this code: <code>Security.addProvider(new BouncyCastleProvider());</code></p>\n"},{"tags":[],"owner":{"account_id":2708748,"reputation":188,"user_id":2337743,"display_name":"Mario.Cadiz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672847204,"creation_date":1672847204,"answer_id":75007911,"question_id":9885380,"body_markdown":"Indeed, the generation of random number has a high resource consumption in terms of CPU cycles. If you have the possibility to minimize the number of calls to the java.security.SecureRandom.generateSeed method, go ahead, that will definitely will help. \r\n\r\nOn the other hand, note that the seed generation is finally implemented by the security providers calling to native functions. \r\n\r\nThe list of SPs is located at JAVA_HOME/jre/lib/security/java.security file, and by default, that sun.security.provider.Sun is on the top. If that guy is causing problems, it could be disabled, making sure the indexes are restructured as well.\r\n\r\nFor future references on how to disable a security provider from the java.security file: https://docs.oracle.com/javase/8/docs/technotes/guides/security/p11guide.html#Disable-pkcs11","title":"In windows Java SecureRandom.generateSeed failed: Unexpected CryptoAPI failure","body":"<p>Indeed, the generation of random number has a high resource consumption in terms of CPU cycles. If you have the possibility to minimize the number of calls to the java.security.SecureRandom.generateSeed method, go ahead, that will definitely will help.</p>\n<p>On the other hand, note that the seed generation is finally implemented by the security providers calling to native functions.</p>\n<p>The list of SPs is located at JAVA_HOME/jre/lib/security/java.security file, and by default, that sun.security.provider.Sun is on the top. If that guy is causing problems, it could be disabled, making sure the indexes are restructured as well.</p>\n<p>For future references on how to disable a security provider from the java.security file: <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/security/p11guide.html#Disable-pkcs11\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/technotes/guides/security/p11guide.html#Disable-pkcs11</a></p>\n"}],"owner":{"account_id":392219,"reputation":1197,"user_id":753352,"accept_rate":40,"display_name":"jeffery.yuan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4954,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":11550349,"answer_count":2,"score":6,"last_activity_date":1672847204,"creation_date":1332834714,"question_id":9885380,"body_markdown":"In production environment(Windows 2008 R2, AMD 64, 8 GB RAM), the application sometimes throws the following exception - restart the application solves the problem.\r\n\r\n    Caused by: java.lang.InternalError: Unexpected CryptoAPI failure generating seed\r\n\tat sun.security.provider.NativeSeedGenerator.getSeedBytes(NativeSeedGenerator.java:43)\r\n\tat sun.security.provider.SeedGenerator.generateSeed(SeedGenerator.java:117)\r\n\tat sun.security.provider.SecureRandom.engineGenerateSeed(SecureRandom.java:114)\r\n\tat java.security.SecureRandom.generateSeed(SecureRandom.java:475)\r\n\r\nThe code should have no problem :\r\n\r\n\t\tpublic void generateToken ()\r\n\t\t{\r\n\t\t\tSecureRandom secureRandom = new SecureRandom();\r\n\t\t\tint seedByteCount = 20;\r\n\t\t\tbyte[] seed = secureRandom.generateSeed(seedByteCount);\r\n\t\t\tsecureRandom.setSeed(seed);\r\n\t\t\tString random = String.valueOf(secureRandom.nextLong());\r\n\t\t\tsetToken(random);\r\n\t\t}\r\n\r\n\t\r\nTook a look at JDK code, find out that the error is because `Java_sun_security_provider_NativeSeedGenerator_nativeGenerateSeed` returns **false** :\r\n\r\n&gt;openjdk-7u2-fcs-src-b13-17_nov_2011\\jdk\\src\\windows\\native\\sun\\security\\provider\\WinCAPISeedGenerator.c :\r\n\r\n\t\tJNIEXPORT jboolean JNICALL Java_sun_security_provider_NativeSeedGenerator_nativeGenerateSeed(JNIEnv *env, jclass clazz, jbyteArray randArray)\r\n\t\t{\r\n\t\t\tHCRYPTPROV hCryptProv;\r\n\t\t\tjboolean result = JNI_FALSE;\r\n\t\t\tjsize numBytes;\r\n\t\t\tjbyte* randBytes;\r\n\r\n\t\t\tif (CryptAcquireContextA(&amp;hCryptProv, &quot;J2SE&quot;, NULL, PROV_RSA_FULL, 0) == FALSE) {\r\n\t\t\t\t/* If CSP context hasn&#39;t been created, create one. */\r\n\t\t\t\tif (CryptAcquireContextA(&amp;hCryptProv, &quot;J2SE&quot;, NULL, PROV_RSA_FULL,\r\n\t\t\t\t\t\tCRYPT_NEWKEYSET) == FALSE) {\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tnumBytes = (*env)-&gt;GetArrayLength(env, randArray);\r\n\t\t\trandBytes = (*env)-&gt;GetByteArrayElements(env, randArray, NULL);\r\n\t\t\tif (CryptGenRandom(hCryptProv, numBytes, randBytes)) {\r\n\t\t\t\tresult = JNI_TRUE;\r\n\t\t\t}\r\n\t\t\t(*env)-&gt;ReleaseByteArrayElements(env, randArray, randBytes, 0);\r\n\r\n\t\t\tCryptReleaseContext(hCryptProv, 0);\r\n\r\n\t\t\treturn result;\r\n\t\t}\r\n`CryptGenRandom` or `CryptAcquireContextA` returns **false**, but I don&#39;t know why it fails, and how to work around it.\r\n\r\nAnyone knows why this happens, the work around or how to continue to investigate this problem? \r\n\r\nThanks for any advice or reply. Thanks...\r\n\r\nBtw - I found the following resources - but not quite useful to this problem.\r\n\r\n- https://forums.oracle.com/forums/thread.jspa?threadID=2231037\r\n\r\n- https://bugs.java.com/bugdatabase/view_bug?bug_id=6202721\r\n\r\n- [Proper use of Java’s SecureRandom][1]\r\n\r\n\r\n- [Secure Random Number Generation in JAVA][2]\r\n\r\n\r\n  [1]: http://www.cigital.com/justice-league-blog/2009/08/14/proper-use-of-javas-securerandom/\r\n  [2]: http://resources.infosecinstitute.com/random-number-generation-java/","title":"In windows Java SecureRandom.generateSeed failed: Unexpected CryptoAPI failure","body":"<p>In production environment(Windows 2008 R2, AMD 64, 8 GB RAM), the application sometimes throws the following exception - restart the application solves the problem.</p>\n<pre><code>Caused by: java.lang.InternalError: Unexpected CryptoAPI failure generating seed\nat sun.security.provider.NativeSeedGenerator.getSeedBytes(NativeSeedGenerator.java:43)\nat sun.security.provider.SeedGenerator.generateSeed(SeedGenerator.java:117)\nat sun.security.provider.SecureRandom.engineGenerateSeed(SecureRandom.java:114)\nat java.security.SecureRandom.generateSeed(SecureRandom.java:475)\n</code></pre>\n<p>The code should have no problem :</p>\n<pre><code>    public void generateToken ()\n    {\n        SecureRandom secureRandom = new SecureRandom();\n        int seedByteCount = 20;\n        byte[] seed = secureRandom.generateSeed(seedByteCount);\n        secureRandom.setSeed(seed);\n        String random = String.valueOf(secureRandom.nextLong());\n        setToken(random);\n    }\n</code></pre>\n<p>Took a look at JDK code, find out that the error is because <code>Java_sun_security_provider_NativeSeedGenerator_nativeGenerateSeed</code> returns <strong>false</strong> :</p>\n<blockquote>\n<p>openjdk-7u2-fcs-src-b13-17_nov_2011\\jdk\\src\\windows\\native\\sun\\security\\provider\\WinCAPISeedGenerator.c :</p>\n</blockquote>\n<pre><code>    JNIEXPORT jboolean JNICALL Java_sun_security_provider_NativeSeedGenerator_nativeGenerateSeed(JNIEnv *env, jclass clazz, jbyteArray randArray)\n    {\n        HCRYPTPROV hCryptProv;\n        jboolean result = JNI_FALSE;\n        jsize numBytes;\n        jbyte* randBytes;\n\n        if (CryptAcquireContextA(&amp;hCryptProv, &quot;J2SE&quot;, NULL, PROV_RSA_FULL, 0) == FALSE) {\n            /* If CSP context hasn't been created, create one. */\n            if (CryptAcquireContextA(&amp;hCryptProv, &quot;J2SE&quot;, NULL, PROV_RSA_FULL,\n                    CRYPT_NEWKEYSET) == FALSE) {\n                return result;\n            }\n        }\n\n        numBytes = (*env)-&gt;GetArrayLength(env, randArray);\n        randBytes = (*env)-&gt;GetByteArrayElements(env, randArray, NULL);\n        if (CryptGenRandom(hCryptProv, numBytes, randBytes)) {\n            result = JNI_TRUE;\n        }\n        (*env)-&gt;ReleaseByteArrayElements(env, randArray, randBytes, 0);\n\n        CryptReleaseContext(hCryptProv, 0);\n\n        return result;\n    }\n</code></pre>\n<p><code>CryptGenRandom</code> or <code>CryptAcquireContextA</code> returns <strong>false</strong>, but I don't know why it fails, and how to work around it.</p>\n<p>Anyone knows why this happens, the work around or how to continue to investigate this problem?</p>\n<p>Thanks for any advice or reply. Thanks...</p>\n<p>Btw - I found the following resources - but not quite useful to this problem.</p>\n<ul>\n<li><p><a href=\"https://forums.oracle.com/forums/thread.jspa?threadID=2231037\" rel=\"nofollow noreferrer\">https://forums.oracle.com/forums/thread.jspa?threadID=2231037</a></p>\n</li>\n<li><p><a href=\"https://bugs.java.com/bugdatabase/view_bug?bug_id=6202721\" rel=\"nofollow noreferrer\">https://bugs.java.com/bugdatabase/view_bug?bug_id=6202721</a></p>\n</li>\n<li><p><a href=\"http://www.cigital.com/justice-league-blog/2009/08/14/proper-use-of-javas-securerandom/\" rel=\"nofollow noreferrer\">Proper use of Java’s SecureRandom</a></p>\n</li>\n<li><p><a href=\"http://resources.infosecinstitute.com/random-number-generation-java/\" rel=\"nofollow noreferrer\">Secure Random Number Generation in JAVA</a></p>\n</li>\n</ul>\n"},{"tags":["java","android","tensorflow-lite"],"comments":[{"owner":{"account_id":9584937,"reputation":2710,"user_id":7118084,"display_name":"Farmaker"},"score":0,"creation_date":1635742852,"post_id":62371665,"comment_id":123366971,"body_markdown":"There are also other operators inside ImageProcessor class https://www.tensorflow.org/lite/inference_with_metadata/lite_support#imageprocessor_architecture you can use the NormalizeOp.","body":"There are also other operators inside ImageProcessor class <a href=\"https://www.tensorflow.org/lite/inference_with_metadata/lite_support#imageprocessor_architecture\" rel=\"nofollow noreferrer\">tensorflow.org/lite/inference_with_metadata/&hellip;</a> you can use the NormalizeOp."}],"answers":[{"tags":[],"owner":{"account_id":15064485,"reputation":103,"user_id":10872113,"display_name":"Rukia394"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1592138624,"creation_date":1592137394,"answer_id":62372458,"question_id":62371665,"body_markdown":"I was able to construct suitable functions using the following links-\r\n\r\n1. https://stackoverflow.com/questions/55777086/converting-bitmap-to-bytebuffer-float-in-tensorflow-lite-android\r\n\r\n2. https://heartbeat.fritz.ai/image-classification-on-android-with-tensorflow-lite-and-camerax-4f72e8fdca79\r\n\r\nThe second link is in Kotlin. Here is the code:\r\n```\r\nprivate ByteBuffer convertBitmapToByteBuffer(Bitmap bp) {\r\n        ByteBuffer imgData = ByteBuffer.allocateDirect(Float.BYTES*60*60*3);\r\n        imgData.order(ByteOrder.nativeOrder());\r\n        Bitmap bitmap = Bitmap.createScaledBitmap(bp,60,60,true);\r\n        int [] intValues = new int[60*60];\r\n        bitmap.getPixels(intValues, 0, bitmap.getWidth(), 0, 0, bitmap.getWidth(), bitmap.getHeight());\r\n\r\n        // Convert the image to floating point.\r\n        int pixel = 0;\r\n\r\n        for (int i = 0; i &lt; 60; ++i) {\r\n            for (int j = 0; j &lt; 60; ++j) {\r\n                final int val = intValues[pixel++];\r\n\r\n                imgData.putFloat(((val&gt;&gt; 16) &amp; 0xFF) / 255.f);\r\n                imgData.putFloat(((val&gt;&gt; 8) &amp; 0xFF) / 255.f);\r\n                imgData.putFloat((val &amp; 0xFF) / 255.f);\r\n            }\r\n        }\r\n        return imgData;\r\n    }\r\n```\r\nHere, 60 is my required input image height and width. Also, this method doesn&#39;t require use of a TensorImage. So the final call of tflite.run() looks like this:\r\n```\r\ntflite.run(convertBitmapToByteBuffer(bp), probabilityBuffer.getBuffer());\r\n```\r\nHere, bp is the bitmap image.","title":"I need to normalize a bitmap and store it in a TensorImage. Is there any way to do this?","body":"<p>I was able to construct suitable functions using the following links-</p>\n\n<ol>\n<li><p><a href=\"https://stackoverflow.com/questions/55777086/converting-bitmap-to-bytebuffer-float-in-tensorflow-lite-android\">Converting Bitmap to ByteBuffer (float) in Tensorflow-lite Android</a></p></li>\n<li><p><a href=\"https://heartbeat.fritz.ai/image-classification-on-android-with-tensorflow-lite-and-camerax-4f72e8fdca79\" rel=\"nofollow noreferrer\">https://heartbeat.fritz.ai/image-classification-on-android-with-tensorflow-lite-and-camerax-4f72e8fdca79</a></p></li>\n</ol>\n\n<p>The second link is in Kotlin. Here is the code:</p>\n\n<pre><code>private ByteBuffer convertBitmapToByteBuffer(Bitmap bp) {\n        ByteBuffer imgData = ByteBuffer.allocateDirect(Float.BYTES*60*60*3);\n        imgData.order(ByteOrder.nativeOrder());\n        Bitmap bitmap = Bitmap.createScaledBitmap(bp,60,60,true);\n        int [] intValues = new int[60*60];\n        bitmap.getPixels(intValues, 0, bitmap.getWidth(), 0, 0, bitmap.getWidth(), bitmap.getHeight());\n\n        // Convert the image to floating point.\n        int pixel = 0;\n\n        for (int i = 0; i &lt; 60; ++i) {\n            for (int j = 0; j &lt; 60; ++j) {\n                final int val = intValues[pixel++];\n\n                imgData.putFloat(((val&gt;&gt; 16) &amp; 0xFF) / 255.f);\n                imgData.putFloat(((val&gt;&gt; 8) &amp; 0xFF) / 255.f);\n                imgData.putFloat((val &amp; 0xFF) / 255.f);\n            }\n        }\n        return imgData;\n    }\n</code></pre>\n\n<p>Here, 60 is my required input image height and width. Also, this method doesn't require use of a TensorImage. So the final call of tflite.run() looks like this:</p>\n\n<pre><code>tflite.run(convertBitmapToByteBuffer(bp), probabilityBuffer.getBuffer());\n</code></pre>\n\n<p>Here, bp is the bitmap image.</p>\n"},{"tags":[],"owner":{"account_id":21038664,"reputation":1,"user_id":15461547,"display_name":"Ankit"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1616508431,"creation_date":1616508431,"answer_id":66764827,"question_id":62371665,"body_markdown":"When you are training model don&#39;t normalise image. So when you deploy your application there is no need to normalise bitmap image. ","title":"I need to normalize a bitmap and store it in a TensorImage. Is there any way to do this?","body":"<p>When you are training model don't normalise image. So when you deploy your application there is no need to normalise bitmap image.</p>\n"},{"tags":[],"owner":{"account_id":3311831,"reputation":89,"user_id":2785155,"display_name":"Joe Mattioni"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1621706295,"creation_date":1621706295,"answer_id":67652643,"question_id":62371665,"body_markdown":"Your first reference gave an example of using Opencv to do the conversion. Here&#39;s what I came up with that&#39;s working:\r\n\r\n```\r\nprivate ByteBuffer getImageDataForTfliteModelOpencv(Bitmap input) {\r\n    if (input == null) {\r\n        return null;\r\n    }\r\n    // Allocate output ByteBuffer\r\n    ByteBuffer output = ByteBuffer.allocateDirect(1 * TFL_IMAGE_SIZE *\r\n            TFL_IMAGE_SIZE * 3 * Float.BYTES);\r\n    //\r\n    output.order(ByteOrder.nativeOrder());\r\n    output.rewind();\r\n\r\n    Mat bufmat = new Mat();\r\n    Mat newmat = new Mat(TFL_IMAGE_SIZE, TFL_IMAGE_SIZE, CvType.CV_32FC3);\r\n\r\n    Utils.bitmapToMat(input, bufmat);\r\n    Imgproc.cvtColor(bufmat, bufmat, Imgproc.COLOR_RGBA2RGB);\r\n    bufmat.convertTo(newmat, CvType.CV_32FC3, 1.0/255.0);\r\n    //\r\n    // Write the image float data to the output ByteBuffer\r\n    float buf[] = new float[TFL_IMAGE_SIZE * TFL_IMAGE_SIZE * 3];\r\n    newmat.get(0,0, buf); // Get the float data\r\n    output.asFloatBuffer().put(buf); // Write it as a stream of bytes\r\n    return output;\r\n}\r\n```\r\n\r\nThe returned ByteBuffer can then be easily loaded into a TensorBuffer. I tested both methods and this Opencv method is about 50msec faster for a 112x112 image.","title":"I need to normalize a bitmap and store it in a TensorImage. Is there any way to do this?","body":"<p>Your first reference gave an example of using Opencv to do the conversion. Here's what I came up with that's working:</p>\n<pre><code>private ByteBuffer getImageDataForTfliteModelOpencv(Bitmap input) {\n    if (input == null) {\n        return null;\n    }\n    // Allocate output ByteBuffer\n    ByteBuffer output = ByteBuffer.allocateDirect(1 * TFL_IMAGE_SIZE *\n            TFL_IMAGE_SIZE * 3 * Float.BYTES);\n    //\n    output.order(ByteOrder.nativeOrder());\n    output.rewind();\n\n    Mat bufmat = new Mat();\n    Mat newmat = new Mat(TFL_IMAGE_SIZE, TFL_IMAGE_SIZE, CvType.CV_32FC3);\n\n    Utils.bitmapToMat(input, bufmat);\n    Imgproc.cvtColor(bufmat, bufmat, Imgproc.COLOR_RGBA2RGB);\n    bufmat.convertTo(newmat, CvType.CV_32FC3, 1.0/255.0);\n    //\n    // Write the image float data to the output ByteBuffer\n    float buf[] = new float[TFL_IMAGE_SIZE * TFL_IMAGE_SIZE * 3];\n    newmat.get(0,0, buf); // Get the float data\n    output.asFloatBuffer().put(buf); // Write it as a stream of bytes\n    return output;\n}\n</code></pre>\n<p>The returned ByteBuffer can then be easily loaded into a TensorBuffer. I tested both methods and this Opencv method is about 50msec faster for a 112x112 image.</p>\n"},{"tags":[],"owner":{"account_id":20315279,"reputation":1,"user_id":14901303,"display_name":"Sunit Roy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635708783,"creation_date":1635707361,"answer_id":69789777,"question_id":62371665,"body_markdown":"As mentioned [here][1] use the below code from [here](https://github.com/COSE471/COSE471_android/blob/master/app/src/main/java/com/example/android/alarmapp/tflite/TensorFlowImageClassifier.java) for converting Bitmap to `ByteBuffer(float32)`    \r\n\r\n```\r\nprivate ByteBuffer convertBitmapToByteBuffer(Bitmap bitmap) {\r\n    ByteBuffer byteBuffer = ByteBuffer.allocateDirect(4 * BATCH_SIZE * inputSize * inputSize * PIXEL_SIZE);\r\n    byteBuffer.order(ByteOrder.nativeOrder());\r\n    int[] intValues = new int[inputSize * inputSize];\r\n    bitmap.getPixels(intValues, 0, bitmap.getWidth(), 0, 0, bitmap.getWidth(), bitmap.getHeight());\r\n    int pixel = 0;\r\n    for (int i = 0; i &lt; inputSize; ++i) {\r\n        for (int j = 0; j &lt; inputSize; ++j) {\r\n            final int val = intValues[pixel++];\r\n            byteBuffer.putFloat((((val &gt;&gt; 16) &amp; 0xFF)-IMAGE_MEAN)/IMAGE_STD);\r\n            byteBuffer.putFloat((((val &gt;&gt; 8) &amp; 0xFF)-IMAGE_MEAN)/IMAGE_STD);\r\n            byteBuffer.putFloat((((val) &amp; 0xFF)-IMAGE_MEAN)/IMAGE_STD);\r\n        }\r\n    }\r\n    return byteBuffer;\r\n}\r\n```\r\n\r\n  [1]: https://github.com/amitshekhariitbhu/Android-TensorFlow-Lite-Example/issues/6#issuecomment-438938156","title":"I need to normalize a bitmap and store it in a TensorImage. Is there any way to do this?","body":"<p>As mentioned <a href=\"https://github.com/amitshekhariitbhu/Android-TensorFlow-Lite-Example/issues/6#issuecomment-438938156\" rel=\"nofollow noreferrer\">here</a> use the below code from <a href=\"https://github.com/COSE471/COSE471_android/blob/master/app/src/main/java/com/example/android/alarmapp/tflite/TensorFlowImageClassifier.java\" rel=\"nofollow noreferrer\">here</a> for converting Bitmap to <code>ByteBuffer(float32)</code></p>\n<pre><code>private ByteBuffer convertBitmapToByteBuffer(Bitmap bitmap) {\n    ByteBuffer byteBuffer = ByteBuffer.allocateDirect(4 * BATCH_SIZE * inputSize * inputSize * PIXEL_SIZE);\n    byteBuffer.order(ByteOrder.nativeOrder());\n    int[] intValues = new int[inputSize * inputSize];\n    bitmap.getPixels(intValues, 0, bitmap.getWidth(), 0, 0, bitmap.getWidth(), bitmap.getHeight());\n    int pixel = 0;\n    for (int i = 0; i &lt; inputSize; ++i) {\n        for (int j = 0; j &lt; inputSize; ++j) {\n            final int val = intValues[pixel++];\n            byteBuffer.putFloat((((val &gt;&gt; 16) &amp; 0xFF)-IMAGE_MEAN)/IMAGE_STD);\n            byteBuffer.putFloat((((val &gt;&gt; 8) &amp; 0xFF)-IMAGE_MEAN)/IMAGE_STD);\n            byteBuffer.putFloat((((val) &amp; 0xFF)-IMAGE_MEAN)/IMAGE_STD);\n        }\n    }\n    return byteBuffer;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11224757,"reputation":1,"user_id":8234710,"display_name":"Junwei Tang"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672847020,"creation_date":1672847020,"answer_id":75007882,"question_id":62371665,"body_markdown":"I found the answer：\r\n\r\n    private TensorImage resizePic(Bitmap bp) {\r\n        ImageProcessor imageProcessor =\r\n                new ImageProcessor.Builder()\r\n                        .add(new ResizeOp(60, 60, ResizeOp.ResizeMethod.BILINEAR))\r\n                        .add(new NormalizeOp(0f, 255f))\r\n                        .build();\r\n        TensorImage tImage = new TensorImage(DataType.FLOAT32);\r\n        tImage.load(sourceBitmap);\r\n        System.out.println(&quot;tensorImage0: &quot; + tImage.getTensorBuffer().getFloatArray()[0]);\r\n        tImage = imageProcessor.process(tImage);\r\n        System.out.println(&quot;tensorImage1: &quot; + tImage.getTensorBuffer().getFloatArray()[0]);\r\n        return tImage;\r\n    }\r\nterminal:\r\n\r\n    System.out: tensorImage0: 232.0\r\n    System.out: tensorImage1: 0.9254902\r\n\r\n","title":"I need to normalize a bitmap and store it in a TensorImage. Is there any way to do this?","body":"<p>I found the answer：</p>\n<pre><code>private TensorImage resizePic(Bitmap bp) {\n    ImageProcessor imageProcessor =\n            new ImageProcessor.Builder()\n                    .add(new ResizeOp(60, 60, ResizeOp.ResizeMethod.BILINEAR))\n                    .add(new NormalizeOp(0f, 255f))\n                    .build();\n    TensorImage tImage = new TensorImage(DataType.FLOAT32);\n    tImage.load(sourceBitmap);\n    System.out.println(&quot;tensorImage0: &quot; + tImage.getTensorBuffer().getFloatArray()[0]);\n    tImage = imageProcessor.process(tImage);\n    System.out.println(&quot;tensorImage1: &quot; + tImage.getTensorBuffer().getFloatArray()[0]);\n    return tImage;\n}\n</code></pre>\n<p>terminal:</p>\n<pre><code>System.out: tensorImage0: 232.0\nSystem.out: tensorImage1: 0.9254902\n</code></pre>\n"}],"owner":{"account_id":15064485,"reputation":103,"user_id":10872113,"display_name":"Rukia394"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2534,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":62372458,"answer_count":5,"score":3,"last_activity_date":1672847020,"creation_date":1592132902,"question_id":62371665,"body_markdown":"Bitmap holds only integer values (0-255). I need to divide each pixel value by 255. The bitmap is converted to a TensorImage and then getBuffer() is called when passing it to the interpreter that predicts output.(tflite.run())\r\nSomewhere in the middle, I have to divide each RGB pixel by 255. I&#39;m afraid there is another drawback as the getBuffer() function returns a byte buffer. \r\nI&#39;m not able to find much documentation on TensorFlow lite functions. So I am unsure if tflite.run() can accept only byte buffers or not.\r\nI am coding in Java and am new to Android AppD.\r\nPlease help as this normalization is essential to predict the right value.\r\n\r\nHere is the code that converts the bitmap to tensorimage after resizing. It is here I need to divide each pixel value by 255 but am stumped.\r\n\r\n```\r\n private TensorImage resizePic(Bitmap bp) {\r\n        ImageProcessor imageProcessor =\r\n                new ImageProcessor.Builder()\r\n                        .add(new ResizeOp(60, 60, ResizeOp.ResizeMethod.BILINEAR))\r\n                        .build();\r\n        TensorImage tImage = new TensorImage(DataType.FLOAT32);\r\n        tImage.load(bp);\r\n        tImage = imageProcessor.process(tImage);\r\n        return tImage;\r\n    }\r\n\r\n```\r\nHere is the line that runs the model\r\n\r\n```\r\ntflite.run(tImage.getBuffer(), probabilityBuffer.getBuffer());\r\n```\r\nprobabilityBuffer holds the output.","title":"I need to normalize a bitmap and store it in a TensorImage. Is there any way to do this?","body":"<p>Bitmap holds only integer values (0-255). I need to divide each pixel value by 255. The bitmap is converted to a TensorImage and then getBuffer() is called when passing it to the interpreter that predicts output.(tflite.run())\nSomewhere in the middle, I have to divide each RGB pixel by 255. I'm afraid there is another drawback as the getBuffer() function returns a byte buffer. \nI'm not able to find much documentation on TensorFlow lite functions. So I am unsure if tflite.run() can accept only byte buffers or not.\nI am coding in Java and am new to Android AppD.\nPlease help as this normalization is essential to predict the right value.</p>\n\n<p>Here is the code that converts the bitmap to tensorimage after resizing. It is here I need to divide each pixel value by 255 but am stumped.</p>\n\n<pre><code> private TensorImage resizePic(Bitmap bp) {\n        ImageProcessor imageProcessor =\n                new ImageProcessor.Builder()\n                        .add(new ResizeOp(60, 60, ResizeOp.ResizeMethod.BILINEAR))\n                        .build();\n        TensorImage tImage = new TensorImage(DataType.FLOAT32);\n        tImage.load(bp);\n        tImage = imageProcessor.process(tImage);\n        return tImage;\n    }\n\n</code></pre>\n\n<p>Here is the line that runs the model</p>\n\n<pre><code>tflite.run(tImage.getBuffer(), probabilityBuffer.getBuffer());\n</code></pre>\n\n<p>probabilityBuffer holds the output.</p>\n"},{"tags":["java","utf-16","project-panama"],"comments":[{"owner":{"account_id":4198672,"reputation":28840,"user_id":3439404,"display_name":"JosefZ"},"score":0,"creation_date":1667123857,"post_id":74250504,"comment_id":131092277,"body_markdown":"[The *CharsetDecoder* class should be used when more control over the decoding process is required](https://download.java.net/java/early_access/loom/docs/api/jdk.incubator.foreign/jdk/incubator/foreign/MemorySegment.html#getUtf8String(long)).","body":"<a href=\"https://download.java.net/java/early_access/loom/docs/api/jdk.incubator.foreign/jdk/incubator/foreign/MemorySegment.html#getUtf8String(long)\" rel=\"nofollow noreferrer\">The <i>CharsetDecoder</i> class should be used when more control over the decoding process is required</a>."},{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":0,"creation_date":1672852271,"post_id":74250504,"comment_id":132367821,"body_markdown":"Related question: [CLinker.toCString replacement in Java 18](https://stackoverflow.com/questions/71729585/clinker-tocstring-replacement-in-java-18/)","body":"Related question: <a href=\"https://stackoverflow.com/questions/71729585/clinker-tocstring-replacement-in-java-18/\">CLinker.toCString replacement in Java 18</a>"}],"answers":[{"tags":[],"owner":{"account_id":5998820,"reputation":12656,"user_id":4712734,"display_name":"DuncG"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1672846747,"creation_date":1667138949,"answer_id":74253747,"question_id":74250504,"body_markdown":"A charset decoder provides a way to deal with null terminated `MemorySegment` wide / UTF16_LE to `String` on Windows using Foreign Memory API. This may not be any different / improvement to your workaround suggestions, as it involves scanning the resulting character buffer for the null position.\r\n\r\n    public static String toJavaString(MemorySegment wide) {\r\n        return toJavaString(wide, StandardCharsets.UTF_16LE);\r\n    }\r\n    public static String toJavaString(MemorySegment segment, Charset charset) {\r\n        // JDK Panama only handles UTF-8, it does strlen() scan for 0 in the segment\r\n        // which is valid as all code points of 2 and 3 bytes lead with high bit &quot;1&quot;.\r\n        if (StandardCharsets.UTF_8 == charset)\r\n            return segment.getUtf8String(0);\r\n\r\n        // if (StandardCharsets.UTF_16LE == charset) {\r\n        //     return Holger answer\r\n        // }\r\n\r\n        // This conversion is convoluted: MemorySegment-&gt;ByteBuffer-&gt;CharBuffer-&gt;String\r\n        CharBuffer cb = charset.decode(segment.asByteBuffer());\r\n\r\n        // cb.array() isn&#39;t valid unless cb.hasArray() is true so use cb.get() to\r\n        // find a null terminator character, ignoring it and the remaining characters\r\n        final int max = cb.limit();\r\n        int len = 0;\r\n        while(len &lt; max &amp;&amp; cb.get(len) != &#39;\\0&#39;)\r\n            len++;\r\n\r\n        return cb.limit(len).toString();\r\n    }\r\n\r\nGoing the other way `String` -&gt; null terminated Windows wide `MemorySegment`:\r\n\r\n    public static MemorySegment toCString(SegmentAllocator allocator, String s, Charset charset) {\r\n        // &quot;==&quot; is OK here as StandardCharsets.UTF_8 == Charset.forName(&quot;UTF8&quot;)\r\n        if (StandardCharsets.UTF_8 == charset)\r\n            return allocator.allocateUtf8String(s);\r\n\r\n        // else if (StandardCharsets.UTF_16LE == charset) {\r\n        //     return Holger answer\r\n        // }\r\n\r\n        // For MB charsets it is safer to append terminator &#39;\\0&#39; and let JDK append\r\n        // appropriate byte[] null termination (typically 1,2,4 bytes) to the segment\r\n        return allocator.allocateArray(JAVA_BYTE, (s+&quot;\\0&quot;).getBytes(charset));\r\n    }\r\n\r\n    /** Convert Java String to Windows Wide String format */\r\n    public static MemorySegment toWideString(String s, SegmentAllocator allocator) {\r\n        return toCString(allocator, s, StandardCharsets.UTF_16LE);\r\n    }\r\n\r\nLike you, I&#39;d also like to know if there are better approaches than the above.","title":"Equivalent of MemorySegment.getUtf8String for UTF-16","body":"<p>A charset decoder provides a way to deal with null terminated <code>MemorySegment</code> wide / UTF16_LE to <code>String</code> on Windows using Foreign Memory API. This may not be any different / improvement to your workaround suggestions, as it involves scanning the resulting character buffer for the null position.</p>\n<pre><code>public static String toJavaString(MemorySegment wide) {\n    return toJavaString(wide, StandardCharsets.UTF_16LE);\n}\npublic static String toJavaString(MemorySegment segment, Charset charset) {\n    // JDK Panama only handles UTF-8, it does strlen() scan for 0 in the segment\n    // which is valid as all code points of 2 and 3 bytes lead with high bit &quot;1&quot;.\n    if (StandardCharsets.UTF_8 == charset)\n        return segment.getUtf8String(0);\n\n    // if (StandardCharsets.UTF_16LE == charset) {\n    //     return Holger answer\n    // }\n\n    // This conversion is convoluted: MemorySegment-&gt;ByteBuffer-&gt;CharBuffer-&gt;String\n    CharBuffer cb = charset.decode(segment.asByteBuffer());\n\n    // cb.array() isn't valid unless cb.hasArray() is true so use cb.get() to\n    // find a null terminator character, ignoring it and the remaining characters\n    final int max = cb.limit();\n    int len = 0;\n    while(len &lt; max &amp;&amp; cb.get(len) != '\\0')\n        len++;\n\n    return cb.limit(len).toString();\n}\n</code></pre>\n<p>Going the other way <code>String</code> -&gt; null terminated Windows wide <code>MemorySegment</code>:</p>\n<pre><code>public static MemorySegment toCString(SegmentAllocator allocator, String s, Charset charset) {\n    // &quot;==&quot; is OK here as StandardCharsets.UTF_8 == Charset.forName(&quot;UTF8&quot;)\n    if (StandardCharsets.UTF_8 == charset)\n        return allocator.allocateUtf8String(s);\n\n    // else if (StandardCharsets.UTF_16LE == charset) {\n    //     return Holger answer\n    // }\n\n    // For MB charsets it is safer to append terminator '\\0' and let JDK append\n    // appropriate byte[] null termination (typically 1,2,4 bytes) to the segment\n    return allocator.allocateArray(JAVA_BYTE, (s+&quot;\\0&quot;).getBytes(charset));\n}\n\n/** Convert Java String to Windows Wide String format */\npublic static MemorySegment toWideString(String s, SegmentAllocator allocator) {\n    return toCString(allocator, s, StandardCharsets.UTF_16LE);\n}\n</code></pre>\n<p>Like you, I'd also like to know if there are better approaches than the above.</p>\n"},{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1672828142,"creation_date":1672828142,"answer_id":75004094,"question_id":74250504,"body_markdown":"Since Java’s `char` *is* a UTF-16 unit, there’s no need for special “wide string” support in the Foreign API, as the conversion (which may be a mere copying operation in some cases) does already exist:\r\n\r\n```java\r\npublic static String fromWideString(MemorySegment wide) {\r\n  var cb = wide.asByteBuffer().order(ByteOrder.nativeOrder()).asCharBuffer();\r\n  int limit = 0; // check for zero termination\r\n  for(int end = cb.limit(); limit &lt; end &amp;&amp; cb.get(limit) != 0; limit++) {}\r\n  return cb.limit(limit).toString();\r\n}\r\n\r\npublic static MemorySegment toWideString(String s, SegmentAllocator allocator) {\r\n  MemorySegment ms = allocator.allocateArray(ValueLayout.JAVA_CHAR, s.length() + 1);\r\n  ms.asByteBuffer().order(ByteOrder.nativeOrder()).asCharBuffer().put(s).put(&#39;\\0&#39;);\r\n  return ms;\r\n}\r\n```\r\n\r\nThis is not using UTF-16LE specifically, but the current platform’s native order, which is usually the intended thing on a platform with native wide strings. Of course, when running on Windows x86 or x64, this will result in the UTF-16LE encoding.\r\n\r\nNote that `CharBuffer` implements `CharSequence` which implies that for [a lot of use cases] you can omit the final `toString()` step when reading a wide string and effectively process the memory segment without a copying step.\r\n\r\n[a lot of use cases]: https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/class-use/CharSequence.html","title":"Equivalent of MemorySegment.getUtf8String for UTF-16","body":"<p>Since Java’s <code>char</code> <em>is</em> a UTF-16 unit, there’s no need for special “wide string” support in the Foreign API, as the conversion (which may be a mere copying operation in some cases) does already exist:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static String fromWideString(MemorySegment wide) {\n  var cb = wide.asByteBuffer().order(ByteOrder.nativeOrder()).asCharBuffer();\n  int limit = 0; // check for zero termination\n  for(int end = cb.limit(); limit &lt; end &amp;&amp; cb.get(limit) != 0; limit++) {}\n  return cb.limit(limit).toString();\n}\n\npublic static MemorySegment toWideString(String s, SegmentAllocator allocator) {\n  MemorySegment ms = allocator.allocateArray(ValueLayout.JAVA_CHAR, s.length() + 1);\n  ms.asByteBuffer().order(ByteOrder.nativeOrder()).asCharBuffer().put(s).put('\\0');\n  return ms;\n}\n</code></pre>\n<p>This is not using UTF-16LE specifically, but the current platform’s native order, which is usually the intended thing on a platform with native wide strings. Of course, when running on Windows x86 or x64, this will result in the UTF-16LE encoding.</p>\n<p>Note that <code>CharBuffer</code> implements <code>CharSequence</code> which implies that for <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/class-use/CharSequence.html\" rel=\"nofollow noreferrer\">a lot of use cases</a> you can omit the final <code>toString()</code> step when reading a wide string and effectively process the memory segment without a copying step.</p>\n"}],"owner":{"account_id":1187908,"reputation":8617,"user_id":1161484,"accept_rate":93,"display_name":"Daniel Widdis"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":383,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":74253747,"answer_count":2,"score":1,"last_activity_date":1672846747,"creation_date":1667104304,"question_id":74250504,"body_markdown":"I&#39;m porting my JNA-based library to &quot;pure&quot; Java using the Foreign Function and Memory API ([JEP 424][1]) in JDK 19.\r\n\r\nOne frequent use case my library handles is reading (null-terminated) Strings from native memory.  For most *nix applications, these are &quot;C Strings&quot; and the [MemorySegment.getUtf8String()](https://download.java.net/java/early_access/loom/docs/api/jdk.incubator.foreign/jdk/incubator/foreign/MemorySegment.html#getUtf8String(long)) method is sufficient to the task.\r\n\r\nNative Windows Strings, however, are stored in UTF-16 (LE). Referenced as arrays of `TCHAR` or as &quot;Wide Strings&quot; they are treated similarly to &quot;C Strings&quot; except consume 2 bytes each.\r\n\r\nJNA provides a `Native.getWideString()` method for this purpose which invokes native code to efficiently iterate over the appropriate character set.\r\n\r\nI don&#39;t see a UTF-16 equivalent to the `getUtf8String()` (and corresponding `set...()`) optimized for these Windows-based applications.\r\n\r\nI can work around the problem with a few approaches:\r\n - If I&#39;m reading from a fixed size buffer, I can create a `new String(bytes, StandardCharsets.UTF_16LE)` and:\r\n   - If I know the memory was cleared before being filled, use `trim()`\r\n   - Otherwise `split()` on the null delimiter and extract the first element\r\n - If I&#39;m just reading from a pointer offset with no knowledge of the total size (or a very large total size I don&#39;t want to instantiate into a `byte[]`) I can iterate character-by-character looking for the null.\r\n\r\nWhile certainly I wouldn&#39;t expect the JDK to provide native implementations for every character set, I would think that Windows represents a significant enough usage share to support its primary native encoding alongside the UTF-8 convenience methods.  Is there a method to do this that I haven&#39;t discovered yet?   Or are there any better alternatives than the `new String()` or character-based iteration approaches I&#39;ve described?","title":"Equivalent of MemorySegment.getUtf8String for UTF-16","body":"<p>I'm porting my JNA-based library to &quot;pure&quot; Java using the Foreign Function and Memory API ([JEP 424][1]) in JDK 19.</p>\n<p>One frequent use case my library handles is reading (null-terminated) Strings from native memory.  For most *nix applications, these are &quot;C Strings&quot; and the <a href=\"https://download.java.net/java/early_access/loom/docs/api/jdk.incubator.foreign/jdk/incubator/foreign/MemorySegment.html#getUtf8String(long)\" rel=\"nofollow noreferrer\">MemorySegment.getUtf8String()</a> method is sufficient to the task.</p>\n<p>Native Windows Strings, however, are stored in UTF-16 (LE). Referenced as arrays of <code>TCHAR</code> or as &quot;Wide Strings&quot; they are treated similarly to &quot;C Strings&quot; except consume 2 bytes each.</p>\n<p>JNA provides a <code>Native.getWideString()</code> method for this purpose which invokes native code to efficiently iterate over the appropriate character set.</p>\n<p>I don't see a UTF-16 equivalent to the <code>getUtf8String()</code> (and corresponding <code>set...()</code>) optimized for these Windows-based applications.</p>\n<p>I can work around the problem with a few approaches:</p>\n<ul>\n<li>If I'm reading from a fixed size buffer, I can create a <code>new String(bytes, StandardCharsets.UTF_16LE)</code> and:\n<ul>\n<li>If I know the memory was cleared before being filled, use <code>trim()</code></li>\n<li>Otherwise <code>split()</code> on the null delimiter and extract the first element</li>\n</ul>\n</li>\n<li>If I'm just reading from a pointer offset with no knowledge of the total size (or a very large total size I don't want to instantiate into a <code>byte[]</code>) I can iterate character-by-character looking for the null.</li>\n</ul>\n<p>While certainly I wouldn't expect the JDK to provide native implementations for every character set, I would think that Windows represents a significant enough usage share to support its primary native encoding alongside the UTF-8 convenience methods.  Is there a method to do this that I haven't discovered yet?   Or are there any better alternatives than the <code>new String()</code> or character-based iteration approaches I've described?</p>\n"},{"tags":["java","android","flutter","macos","intellij-idea"],"owner":{"account_id":4742401,"reputation":864,"user_id":7858768,"display_name":"user7858768"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672846503,"creation_date":1672846503,"question_id":75007784,"body_markdown":"Hitting a bit of a wall here when trying to build a brand new flutter sandbox application within IntelliJ for Android.\r\n\r\nThe error that I get is the following:\r\n```\r\njava: Cannot run program &quot;/Users/vintrin/Library/AndroidStudio/sdk/bin/java&quot; (in directory &quot;/Users/vintrin/Library/Caches/JetBrains/IntelliJIdea2022.3/compile-server&quot;): error=2, No such file or directory\r\n```\r\n\r\nThis file `/Users/vintrin/Library/AndroidStudio/sdk/bin/java` in fact does NOT exist.\r\n\r\nI am starting the IntelliJ from my terminal to get all the environment variables to be recognized by IntelliJ using \r\n\r\n```shell\r\nopen -na &quot;IntelliJ IDEA.app&quot;\r\n```\r\n\r\nBelow you can see the print out of the values from within the IntelliJ terminal:\r\n```\r\nViktors-MacBook-Pro:flutter_sandbox vintrino$ echo $JAVA_HOME\r\n/usr/local/Cellar/openjdk@11/11.0.17\r\nViktors-MacBook-Pro:flutter_sandbox vintrino$ echo $PATH \r\n/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Library/Apple/usr/bin:/usr/local/opt/coreutils/libexec/gnubin:/usr/local/opt/findutils/libexec/gnubin:/Users/vintrin/.nvm/versions/node/v15.14.0/bin:/Users/vintrin/Library/AndroidStudio/sdk/emulator:/Users/vintrin/Library/AndroidStudio/sdk/tools:/Users/vintrin/Library/AndroidStudio/sdk/tools/bin:/Users/vintrin/Library/AndroidStudio/sdk/platform-tools:/Users/vintrin/Library/AndroidStudio/sdk/cmdline-tools/latest/bin:/Users/vintrin/.toolbox/bin:/apollo/env/envImprovement/bin:/Users/vintrin/bin:/Users/nkondrat/vintrin-env/home_dir/python:/apollo/env/SDETools/bin:/apollo/env/GordianKnot/bin:/apollo/env/OctaneBrazilTools/bin:/apollo/env/envImprovement/jdk1.8/bin:/Users/nkondrat/apps/phantomjs-2.1.1-macosx/bin:/apollo/env/AmazonAwsCli/bin/:~/.rodar/bin:/Users/nkondrat/vintrin-env/home_dir/js/cli:/Users/vintrin/software/flutter/bin\r\nViktors-MacBook-Pro:flutter_sandbox vintrino$ \r\n```\r\n\r\nThe Intellij project is set to use Android33 API\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nThe SDK is set here in Intellij\r\n\r\n[![enter image description here][2]][2]\r\n\r\nAnd the SDK is said to be installed by Android Studio\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\nRunning the following from intellij terminal to check java installation\r\n\r\n```\r\nViktors-MacBook-Pro:flutter_sandbox vintrino$ $JAVA_HOME/bin/java --version\r\nopenjdk 11.0.17 2022-10-18\r\nOpenJDK Runtime Environment Homebrew (build 11.0.17+0)\r\nOpenJDK 64-Bit Server VM Homebrew (build 11.0.17+0, mixed mode)\r\n```\r\n\r\nHowever for whatever reason when IntelliJ builds it tries to use java that doesn&#39;t exist at path:\r\n\r\n```\r\n/Users/vintrin/Library/AndroidStudio/sdk/bin/java\r\n```\r\n\r\nThe flutter doctor command is happy for android\r\n\r\n```\r\nmac&gt; flutter doctor\r\nDoctor summary (to see all details, run flutter doctor -v):\r\n[✓] Flutter (Channel stable, 3.3.10, on macOS 11.4 20F71 darwin-x64, locale en-US)\r\n[✓] Android toolchain - develop for Android devices (Android SDK version 33.0.1)\r\n```\r\n\r\nHow do I resolve java not being found?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/3BWxf.png\r\n  [2]: https://i.stack.imgur.com/ieNbe.png\r\n  [3]: https://i.stack.imgur.com/wZEBH.jpg","title":"Flutter on IntelliJ building for Android cannot find `java`","body":"<p>Hitting a bit of a wall here when trying to build a brand new flutter sandbox application within IntelliJ for Android.</p>\n<p>The error that I get is the following:</p>\n<pre><code>java: Cannot run program &quot;/Users/vintrin/Library/AndroidStudio/sdk/bin/java&quot; (in directory &quot;/Users/vintrin/Library/Caches/JetBrains/IntelliJIdea2022.3/compile-server&quot;): error=2, No such file or directory\n</code></pre>\n<p>This file <code>/Users/vintrin/Library/AndroidStudio/sdk/bin/java</code> in fact does NOT exist.</p>\n<p>I am starting the IntelliJ from my terminal to get all the environment variables to be recognized by IntelliJ using</p>\n<pre class=\"lang-bash prettyprint-override\"><code>open -na &quot;IntelliJ IDEA.app&quot;\n</code></pre>\n<p>Below you can see the print out of the values from within the IntelliJ terminal:</p>\n<pre><code>Viktors-MacBook-Pro:flutter_sandbox vintrino$ echo $JAVA_HOME\n/usr/local/Cellar/openjdk@11/11.0.17\nViktors-MacBook-Pro:flutter_sandbox vintrino$ echo $PATH \n/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Library/Apple/usr/bin:/usr/local/opt/coreutils/libexec/gnubin:/usr/local/opt/findutils/libexec/gnubin:/Users/vintrin/.nvm/versions/node/v15.14.0/bin:/Users/vintrin/Library/AndroidStudio/sdk/emulator:/Users/vintrin/Library/AndroidStudio/sdk/tools:/Users/vintrin/Library/AndroidStudio/sdk/tools/bin:/Users/vintrin/Library/AndroidStudio/sdk/platform-tools:/Users/vintrin/Library/AndroidStudio/sdk/cmdline-tools/latest/bin:/Users/vintrin/.toolbox/bin:/apollo/env/envImprovement/bin:/Users/vintrin/bin:/Users/nkondrat/vintrin-env/home_dir/python:/apollo/env/SDETools/bin:/apollo/env/GordianKnot/bin:/apollo/env/OctaneBrazilTools/bin:/apollo/env/envImprovement/jdk1.8/bin:/Users/nkondrat/apps/phantomjs-2.1.1-macosx/bin:/apollo/env/AmazonAwsCli/bin/:~/.rodar/bin:/Users/nkondrat/vintrin-env/home_dir/js/cli:/Users/vintrin/software/flutter/bin\nViktors-MacBook-Pro:flutter_sandbox vintrino$ \n</code></pre>\n<p>The Intellij project is set to use Android33 API</p>\n<p><a href=\"https://i.stack.imgur.com/3BWxf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3BWxf.png\" alt=\"enter image description here\" /></a></p>\n<p>The SDK is set here in Intellij</p>\n<p><a href=\"https://i.stack.imgur.com/ieNbe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ieNbe.png\" alt=\"enter image description here\" /></a></p>\n<p>And the SDK is said to be installed by Android Studio</p>\n<p><a href=\"https://i.stack.imgur.com/wZEBH.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wZEBH.jpg\" alt=\"enter image description here\" /></a></p>\n<p>Running the following from intellij terminal to check java installation</p>\n<pre><code>Viktors-MacBook-Pro:flutter_sandbox vintrino$ $JAVA_HOME/bin/java --version\nopenjdk 11.0.17 2022-10-18\nOpenJDK Runtime Environment Homebrew (build 11.0.17+0)\nOpenJDK 64-Bit Server VM Homebrew (build 11.0.17+0, mixed mode)\n</code></pre>\n<p>However for whatever reason when IntelliJ builds it tries to use java that doesn't exist at path:</p>\n<pre><code>/Users/vintrin/Library/AndroidStudio/sdk/bin/java\n</code></pre>\n<p>The flutter doctor command is happy for android</p>\n<pre><code>mac&gt; flutter doctor\nDoctor summary (to see all details, run flutter doctor -v):\n[✓] Flutter (Channel stable, 3.3.10, on macOS 11.4 20F71 darwin-x64, locale en-US)\n[✓] Android toolchain - develop for Android devices (Android SDK version 33.0.1)\n</code></pre>\n<p>How do I resolve java not being found?</p>\n"},{"tags":["java","java-8","spring-integration","windows-server-2012-r2"],"answers":[{"tags":[],"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1562340992,"creation_date":1562340992,"answer_id":56905920,"question_id":56891216,"body_markdown":"Looks like this is some kind of bug on Java side: https://bugs.openjdk.java.net/browse/JDK-8057894\r\n\r\nAt the same time your stack trace leads us to this code in the `MBeanExporterParser`:\r\n\r\n    if (id.matches(IntegrationMBeanExporter.class.getName() + &quot;#[0-9]+&quot;)) {\r\n\t\t\t//\tRandomize the name in case there are multiple contexts in the same JVM\r\n\t\t\tid += &quot;#&quot; + UUID.randomUUID();\r\n\t\t}\r\n\r\nWould you mind to add an explicit `id` for your `&lt;int-jmx:mbean-export&gt;`  ?","title":"Unexpected CryptoAPI failure generating seed on spring integration application startup","body":"<p>Looks like this is some kind of bug on Java side: <a href=\"https://bugs.openjdk.java.net/browse/JDK-8057894\" rel=\"nofollow noreferrer\">https://bugs.openjdk.java.net/browse/JDK-8057894</a></p>\n\n<p>At the same time your stack trace leads us to this code in the <code>MBeanExporterParser</code>:</p>\n\n<pre><code>if (id.matches(IntegrationMBeanExporter.class.getName() + \"#[0-9]+\")) {\n        //  Randomize the name in case there are multiple contexts in the same JVM\n        id += \"#\" + UUID.randomUUID();\n    }\n</code></pre>\n\n<p>Would you mind to add an explicit <code>id</code> for your <code>&lt;int-jmx:mbean-export&gt;</code>  ?</p>\n"},{"tags":[],"owner":{"account_id":2708748,"reputation":188,"user_id":2337743,"display_name":"Mario.Cadiz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672846476,"creation_date":1672846476,"answer_id":75007778,"question_id":56891216,"body_markdown":"This problem seems to have at least 2 sides:\r\n- A code trying to generate random numbers, part of Spring in this case.\r\n- The JDK code responsible to generate the actual random number based on a security provider. sun.security.provider.Sun.\r\n\r\nGiven this is an intermittent issue (1/20 as mentioned initially), most likely is due to lock contention or slowness at the security provider end. \r\n\r\nOne solution is trying to minimize the calls to random numbers, configuring properly the Spring mbeans in this case.\r\n\r\nHowever, the random number generation is not only linked to Spring mbeans, so the same underlying problem can be seen in different APIs, that&#39;s the 2nd part of this problem. sun.security.provider.Sun is the default security provider for the JDK or at least the first on the list of security providers at JAVA_HOME/jre/lib/security/java.security file, and responsible to generate these random numbers.\r\n\r\nThe second aspect of this problem is that the random number generation is not just related to Spring mbeans; rather, it is related to a variety of APIs, where the same fundamental issue can be seen. \r\nsun.security.provider.Sun is in charge of generating these random numbers and is the default security provider for the JDK, or at least the first on the list of security providers in the JAVA_HOME/jre/lib/security/java . security file.\r\n\r\n\r\nFor example:\r\n\r\n    security.provider.1=sun.security.provider.Sun\r\n    security.provider.2=sun.security.rsa.SunRsaSign\r\n    security.provider.3=sun.security.ec.SunEC\r\n    security.provider.4=com.sun.net.ssl.internal.ssl.Provider\r\n    security.provider.5=com.sun.crypto.provider.SunJCE\r\n    security.provider.6=sun.security.jgss.SunProvider\r\n    security.provider.7=com.sun.security.sasl.Provider\r\n    security.provider.8=org.jcp.xml.dsig.internal.dom.XMLDSigRI\r\n    security.provider.9=sun.security.smartcardio.SunPCSC\r\n    security.provider.10=sun.security.mscapi.SunMSCAPI\r\n\r\nNote the problematic security provider is on the top of the list, thus a second potential solution is disabling it, meaning that list with the indexes should be restructured to:\r\n\r\n        security.provider.1=sun.security.rsa.SunRsaSign    \r\n        #security.provider.1=sun.security.provider.Sun\r\n        security.provider.2=sun.security.ec.SunEC\r\n        security.provider.3=com.sun.net.ssl.internal.ssl.Provider\r\n        security.provider.4=com.sun.crypto.provider.SunJCE\r\n        security.provider.5=sun.security.jgss.SunProvider\r\n        security.provider.6=com.sun.security.sasl.Provider\r\n        security.provider.7=org.jcp.xml.dsig.internal.dom.XMLDSigRI\r\n        security.provider.8=sun.security.smartcardio.SunPCSC\r\n        security.provider.9=sun.security.mscapi.SunMSCAPI\r\n\r\nTake a backup copy of the java.security file before, and try first in a non-productive environment.\r\n","title":"Unexpected CryptoAPI failure generating seed on spring integration application startup","body":"<p>This problem seems to have at least 2 sides:</p>\n<ul>\n<li>A code trying to generate random numbers, part of Spring in this case.</li>\n<li>The JDK code responsible to generate the actual random number based on a security provider. sun.security.provider.Sun.</li>\n</ul>\n<p>Given this is an intermittent issue (1/20 as mentioned initially), most likely is due to lock contention or slowness at the security provider end.</p>\n<p>One solution is trying to minimize the calls to random numbers, configuring properly the Spring mbeans in this case.</p>\n<p>However, the random number generation is not only linked to Spring mbeans, so the same underlying problem can be seen in different APIs, that's the 2nd part of this problem. sun.security.provider.Sun is the default security provider for the JDK or at least the first on the list of security providers at JAVA_HOME/jre/lib/security/java.security file, and responsible to generate these random numbers.</p>\n<p>The second aspect of this problem is that the random number generation is not just related to Spring mbeans; rather, it is related to a variety of APIs, where the same fundamental issue can be seen.\nsun.security.provider.Sun is in charge of generating these random numbers and is the default security provider for the JDK, or at least the first on the list of security providers in the JAVA_HOME/jre/lib/security/java . security file.</p>\n<p>For example:</p>\n<pre><code>security.provider.1=sun.security.provider.Sun\nsecurity.provider.2=sun.security.rsa.SunRsaSign\nsecurity.provider.3=sun.security.ec.SunEC\nsecurity.provider.4=com.sun.net.ssl.internal.ssl.Provider\nsecurity.provider.5=com.sun.crypto.provider.SunJCE\nsecurity.provider.6=sun.security.jgss.SunProvider\nsecurity.provider.7=com.sun.security.sasl.Provider\nsecurity.provider.8=org.jcp.xml.dsig.internal.dom.XMLDSigRI\nsecurity.provider.9=sun.security.smartcardio.SunPCSC\nsecurity.provider.10=sun.security.mscapi.SunMSCAPI\n</code></pre>\n<p>Note the problematic security provider is on the top of the list, thus a second potential solution is disabling it, meaning that list with the indexes should be restructured to:</p>\n<pre><code>    security.provider.1=sun.security.rsa.SunRsaSign    \n    #security.provider.1=sun.security.provider.Sun\n    security.provider.2=sun.security.ec.SunEC\n    security.provider.3=com.sun.net.ssl.internal.ssl.Provider\n    security.provider.4=com.sun.crypto.provider.SunJCE\n    security.provider.5=sun.security.jgss.SunProvider\n    security.provider.6=com.sun.security.sasl.Provider\n    security.provider.7=org.jcp.xml.dsig.internal.dom.XMLDSigRI\n    security.provider.8=sun.security.smartcardio.SunPCSC\n    security.provider.9=sun.security.mscapi.SunMSCAPI\n</code></pre>\n<p>Take a backup copy of the java.security file before, and try first in a non-productive environment.</p>\n"}],"owner":{"account_id":354716,"reputation":1249,"user_id":693233,"accept_rate":61,"display_name":"l0r3nz4cc10"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1088,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":56905920,"answer_count":2,"score":0,"last_activity_date":1672846476,"creation_date":1562255199,"question_id":56891216,"body_markdown":"I have a spring integration application, and it fails on startup on Windows (Windows Server 2012 R2), using jdk1.8.0_151-X64 with the following exception :\r\n\r\n    INFO [main] o.s.c.s.ClassPathXmlApplicationContext [AbstractApplicationContext.java:574] Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@1b604f19: startup date [Thu Jul 04 15:17:39 CEST 2019]; root of context hierarchy\r\n    INFO [main] o.s.b.f.x.XmlBeanDefinitionReader [XmlBeanDefinitionReader.java:317] Loading XML bean definitions from class path resource [cpm-dml-common-error.xml]\r\n    INFO [main] o.s.b.f.x.XmlBeanDefinitionReader [XmlBeanDefinitionReader.java:317] Loading XML bean definitions from URL [jar:file:/D:/CPM/dml/adapter-versions/cpm-dml-subscriber-bla-1.2.0.RELEASE/lib/cpm-dml-common-3.0.0.RELEASE.jar!/dml-file-shutdown.xml]\r\n    ERROR [main] c.h.g.d.i.u.Adapter [Adapter.java:73] Exception initialising application context.  Process will exit\r\n    org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: Failed to import bean definitions from URL location [classpath*:dml-file-shutdown.xml]\r\n    Offending resource: class path resource [cpm-dml-subscriber-bla-top-level.xml]; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Unexpected exception parsing XML document from URL [jar:file:/D:/CPM/dml/adapter-versions/cpm-dml-subscriber-bla-1.2.0.RELEASE/lib/cpm-dml-common-3.0.0.RELEASE.jar!/dml-file-shutdown.xml]; nested exception is java.lang.InternalError: Unexpected CryptoAPI failure generating seed\r\n    \tat org.springframework.beans.factory.parsing.FailFastProblemReporter.error(FailFastProblemReporter.java:70) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\r\n    \tat org.springframework.beans.factory.parsing.ReaderContext.error(ReaderContext.java:85) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\r\n    \tat org.springframework.beans.factory.parsing.ReaderContext.error(ReaderContext.java:76) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\r\n    \tat org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.importBeanDefinitionResource(DefaultBeanDefinitionDocumentReader.java:229) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\r\n    \tat org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseDefaultElement(DefaultBeanDefinitionDocumentReader.java:180) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\r\n    \tat org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:165) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\r\n    \tat org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.doRegisterBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:138) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\r\n    \tat org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:94) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\r\n    \tat org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:508) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\r\n    \tat org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:392) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\r\n    \tat org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:336) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\r\n    \tat org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:304) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:181) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:217) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:188) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:252) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\r\n    \tat org.springframework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:127) ~[spring-context-4.2.2.RELEASE.jar:4.2.2.RELEASE]\r\n    \tat org.springframework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:93) ~[spring-context-4.2.2.RELEASE.jar:4.2.2.RELEASE]\r\n    \tat org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:129) ~[spring-context-4.2.2.RELEASE.jar:4.2.2.RELEASE]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:605) ~[spring-context-4.2.2.RELEASE.jar:4.2.2.RELEASE]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:509) ~[spring-context-4.2.2.RELEASE.jar:4.2.2.RELEASE]\r\n    \tat org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:139) ~[spring-context-4.2.2.RELEASE.jar:4.2.2.RELEASE]\r\n    \tat org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:83) ~[spring-context-4.2.2.RELEASE.jar:4.2.2.RELEASE]\r\n    \tat c.h.g.d.i.u.Adapter.&lt;init&gt;(Adapter.java:47) ~[dml_core-5.0.0.RELEASE.jar:5.0.0.RELEASE]\r\n    \tat c.h.g.d.i.u.Adapter.main(Adapter.java:70) ~[dml_core-5.0.0.RELEASE.jar:5.0.0.RELEASE]\r\n    Caused by: org.springframework.beans.factory.BeanDefinitionStoreException: Unexpected exception parsing XML document from URL [jar:file:/D:/CPM/dml/adapter-versions/cpm-dml-subscriber-bla-1.2.0.RELEASE/lib/cpm-dml-common-3.0.0.RELEASE.jar!/dml-file-shutdown.xml]; nested exception is java.lang.InternalError: Unexpected CryptoAPI failure generating seed\r\n    \tat org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:414) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\r\n    \tat org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:336) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\r\n    \tat org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:304) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:181) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:217) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\r\n    \tat org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.importBeanDefinitionResource(DefaultBeanDefinitionDocumentReader.java:223) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\r\n    \t... 21 common frames omitted\r\n    Caused by: java.lang.InternalError: Unexpected CryptoAPI failure generating seed\r\n    \tat sun.security.provider.NativeSeedGenerator.getSeedBytes(NativeSeedGenerator.java:62) ~[na:1.8.0_151]\r\n    \tat sun.security.provider.SeedGenerator.generateSeed(SeedGenerator.java:144) ~[na:1.8.0_151]\r\n    \tat sun.security.provider.SecureRandom$SeederHolder.&lt;clinit&gt;(SecureRandom.java:203) ~[na:1.8.0_151]\r\n    \tat sun.security.provider.SecureRandom.engineNextBytes(SecureRandom.java:221) ~[na:1.8.0_151]\r\n    \tat java.security.SecureRandom.nextBytes(SecureRandom.java:468) ~[na:1.8.0_151]\r\n    \tat java.util.UUID.randomUUID(UUID.java:145) ~[na:1.8.0_151]\r\n    \tat org.springframework.integration.jmx.config.MBeanExporterParser.resolveId(MBeanExporterParser.java:87) ~[spring-integration-jmx-4.1.6.RELEASE.jar:na]\r\n    \tat org.springframework.beans.factory.xml.AbstractBeanDefinitionParser.parse(AbstractBeanDefinitionParser.java:64) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\r\n    \tat org.springframework.beans.factory.xml.NamespaceHandlerSupport.parse(NamespaceHandlerSupport.java:74) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\r\n    \tat org.springframework.integration.config.xml.AbstractIntegrationNamespaceHandler.parse(AbstractIntegrationNamespaceHandler.java:58) ~[spring-integration-core-4.1.6.RELEASE.jar:na]\r\n    \tat org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1411) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\r\n    \tat org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1401) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\r\n    \tat org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:168) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\r\n    \tat org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.doRegisterBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:138) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\r\n    \tat org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:94) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\r\n    \tat org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:508) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\r\n    \tat org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:392) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\r\n    \t... 26 common frames omitted\r\n\r\nThe application is the only java process running on the server. Restarting the application does not work, the same exception keeps coming.\r\n\r\nI&#39;ve tested running other spring integration applications on jdk1.7.0_11-x64, they run fine most of the time, but they still sometimes (~1/20) encounter this exception : a simple restart fixes the issue.\r\n\r\nWhat is the likely cause of this Exception ? How can I fix this ?\r\n","title":"Unexpected CryptoAPI failure generating seed on spring integration application startup","body":"<p>I have a spring integration application, and it fails on startup on Windows (Windows Server 2012 R2), using jdk1.8.0_151-X64 with the following exception :</p>\n\n<pre><code>INFO [main] o.s.c.s.ClassPathXmlApplicationContext [AbstractApplicationContext.java:574] Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@1b604f19: startup date [Thu Jul 04 15:17:39 CEST 2019]; root of context hierarchy\nINFO [main] o.s.b.f.x.XmlBeanDefinitionReader [XmlBeanDefinitionReader.java:317] Loading XML bean definitions from class path resource [cpm-dml-common-error.xml]\nINFO [main] o.s.b.f.x.XmlBeanDefinitionReader [XmlBeanDefinitionReader.java:317] Loading XML bean definitions from URL [jar:file:/D:/CPM/dml/adapter-versions/cpm-dml-subscriber-bla-1.2.0.RELEASE/lib/cpm-dml-common-3.0.0.RELEASE.jar!/dml-file-shutdown.xml]\nERROR [main] c.h.g.d.i.u.Adapter [Adapter.java:73] Exception initialising application context.  Process will exit\norg.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: Failed to import bean definitions from URL location [classpath*:dml-file-shutdown.xml]\nOffending resource: class path resource [cpm-dml-subscriber-bla-top-level.xml]; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Unexpected exception parsing XML document from URL [jar:file:/D:/CPM/dml/adapter-versions/cpm-dml-subscriber-bla-1.2.0.RELEASE/lib/cpm-dml-common-3.0.0.RELEASE.jar!/dml-file-shutdown.xml]; nested exception is java.lang.InternalError: Unexpected CryptoAPI failure generating seed\n    at org.springframework.beans.factory.parsing.FailFastProblemReporter.error(FailFastProblemReporter.java:70) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\n    at org.springframework.beans.factory.parsing.ReaderContext.error(ReaderContext.java:85) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\n    at org.springframework.beans.factory.parsing.ReaderContext.error(ReaderContext.java:76) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\n    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.importBeanDefinitionResource(DefaultBeanDefinitionDocumentReader.java:229) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\n    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseDefaultElement(DefaultBeanDefinitionDocumentReader.java:180) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\n    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:165) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\n    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.doRegisterBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:138) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\n    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:94) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\n    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:508) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\n    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:392) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\n    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:336) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\n    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:304) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:181) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:217) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:188) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:252) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\n    at org.springframework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:127) ~[spring-context-4.2.2.RELEASE.jar:4.2.2.RELEASE]\n    at org.springframework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:93) ~[spring-context-4.2.2.RELEASE.jar:4.2.2.RELEASE]\n    at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:129) ~[spring-context-4.2.2.RELEASE.jar:4.2.2.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:605) ~[spring-context-4.2.2.RELEASE.jar:4.2.2.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:509) ~[spring-context-4.2.2.RELEASE.jar:4.2.2.RELEASE]\n    at org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:139) ~[spring-context-4.2.2.RELEASE.jar:4.2.2.RELEASE]\n    at org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:83) ~[spring-context-4.2.2.RELEASE.jar:4.2.2.RELEASE]\n    at c.h.g.d.i.u.Adapter.&lt;init&gt;(Adapter.java:47) ~[dml_core-5.0.0.RELEASE.jar:5.0.0.RELEASE]\n    at c.h.g.d.i.u.Adapter.main(Adapter.java:70) ~[dml_core-5.0.0.RELEASE.jar:5.0.0.RELEASE]\nCaused by: org.springframework.beans.factory.BeanDefinitionStoreException: Unexpected exception parsing XML document from URL [jar:file:/D:/CPM/dml/adapter-versions/cpm-dml-subscriber-bla-1.2.0.RELEASE/lib/cpm-dml-common-3.0.0.RELEASE.jar!/dml-file-shutdown.xml]; nested exception is java.lang.InternalError: Unexpected CryptoAPI failure generating seed\n    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:414) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\n    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:336) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\n    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:304) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:181) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:217) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\n    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.importBeanDefinitionResource(DefaultBeanDefinitionDocumentReader.java:223) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\n    ... 21 common frames omitted\nCaused by: java.lang.InternalError: Unexpected CryptoAPI failure generating seed\n    at sun.security.provider.NativeSeedGenerator.getSeedBytes(NativeSeedGenerator.java:62) ~[na:1.8.0_151]\n    at sun.security.provider.SeedGenerator.generateSeed(SeedGenerator.java:144) ~[na:1.8.0_151]\n    at sun.security.provider.SecureRandom$SeederHolder.&lt;clinit&gt;(SecureRandom.java:203) ~[na:1.8.0_151]\n    at sun.security.provider.SecureRandom.engineNextBytes(SecureRandom.java:221) ~[na:1.8.0_151]\n    at java.security.SecureRandom.nextBytes(SecureRandom.java:468) ~[na:1.8.0_151]\n    at java.util.UUID.randomUUID(UUID.java:145) ~[na:1.8.0_151]\n    at org.springframework.integration.jmx.config.MBeanExporterParser.resolveId(MBeanExporterParser.java:87) ~[spring-integration-jmx-4.1.6.RELEASE.jar:na]\n    at org.springframework.beans.factory.xml.AbstractBeanDefinitionParser.parse(AbstractBeanDefinitionParser.java:64) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\n    at org.springframework.beans.factory.xml.NamespaceHandlerSupport.parse(NamespaceHandlerSupport.java:74) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\n    at org.springframework.integration.config.xml.AbstractIntegrationNamespaceHandler.parse(AbstractIntegrationNamespaceHandler.java:58) ~[spring-integration-core-4.1.6.RELEASE.jar:na]\n    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1411) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\n    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1401) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\n    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:168) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\n    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.doRegisterBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:138) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\n    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:94) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\n    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:508) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\n    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:392) ~[spring-beans-4.2.2.RELEASE.jar:4.2.2.RELEASE]\n    ... 26 common frames omitted\n</code></pre>\n\n<p>The application is the only java process running on the server. Restarting the application does not work, the same exception keeps coming.</p>\n\n<p>I've tested running other spring integration applications on jdk1.7.0_11-x64, they run fine most of the time, but they still sometimes (~1/20) encounter this exception : a simple restart fixes the issue.</p>\n\n<p>What is the likely cause of this Exception ? How can I fix this ?</p>\n"},{"tags":["java","spring","exception","apache-mina"],"owner":{"account_id":13642467,"reputation":1,"user_id":9842234,"display_name":"Istv&#225;n Zsolnai"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672846113,"creation_date":1672846029,"question_id":75007679,"body_markdown":"I have an app that uses apache mina, I would like to write a final object into the session after having an expection caught. But it does not seem to register. \r\n\r\nCode:\r\n\r\n    @Override\r\n    public void exceptionCaught(final IoSession session, final Throwable cause) {\r\n\r\n    session.write(new RadiusPacket(RadiusPacket.ACCESS_REJECT)); // RadiusPacket.ACCESS_REJECT = 3\r\n    session.closeOnFlush();\r\n    LOG.error(&quot;Radius session closed: {}&quot;, session);\r\n  \r\n\r\n\r\n\r\nIt does not appear in the session. Any thoughts?\r\n\r\nIn MINA documentation, it says that &quot;All in all, every time we met an exception while processing a session, this session will be closed.&quot;. Does this mean that MINA closes the session before giving control to exceptionCaught()?\r\n\r\n\r\nI tried several other ways of adding the radius packet to the session, neither worked.","title":"Write to Apache MINA session after exception caught?","body":"<p>I have an app that uses apache mina, I would like to write a final object into the session after having an expection caught. But it does not seem to register.</p>\n<p>Code:</p>\n<pre><code>@Override\npublic void exceptionCaught(final IoSession session, final Throwable cause) {\n\nsession.write(new RadiusPacket(RadiusPacket.ACCESS_REJECT)); // RadiusPacket.ACCESS_REJECT = 3\nsession.closeOnFlush();\nLOG.error(&quot;Radius session closed: {}&quot;, session);\n</code></pre>\n<p>It does not appear in the session. Any thoughts?</p>\n<p>In MINA documentation, it says that &quot;All in all, every time we met an exception while processing a session, this session will be closed.&quot;. Does this mean that MINA closes the session before giving control to exceptionCaught()?</p>\n<p>I tried several other ways of adding the radius packet to the session, neither worked.</p>\n"},{"tags":["java","spring","wiremock","wiremock-record"],"comments":[{"owner":{"account_id":480519,"reputation":1382,"user_id":1423361,"accept_rate":100,"display_name":"Robert Elliot"},"score":0,"creation_date":1672845695,"post_id":74905043,"comment_id":132365278,"body_markdown":"To clarify - you need the WireMock service B to initiate an HTTP request to service A?","body":"To clarify - you need the WireMock service B to initiate an HTTP request to service A?"}],"answers":[{"tags":[],"owner":{"account_id":480617,"reputation":2495,"user_id":893952,"accept_rate":57,"display_name":"Harry Coder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671895315,"creation_date":1671854275,"answer_id":74905508,"question_id":74905043,"body_markdown":"It seems like you are mixing two approaches on your tests. I assume you are doing an integration test:\r\n\r\n 1. When using **Wiremock**, you don&#39;t need to launch your service in a Docker container. The purpose of **Wiremock**, is to simulate the response you receive when you call the service you are mocking. You don&#39;t really call the service in this case.\r\n 2. With the second approach you can use a Docker container with **TestContainer**. In this case, to check whether the service is called you have to test the response and check if this is your expected results. First the service (in your container) you want to call have be to exposed by an API, then in your service you are testing, you call the service with `TestRestemplate` or `WebTestClient`.\r\n\r\nA sample code will be like this:\r\n\r\n    @Test\r\n    void integrationTest_For_Status_200() {\r\n        webTestClient.post()\r\n                .uri(&quot;THE_SERVICE_URL&quot;)\r\n                .accept(MediaType.APPLICATION_JSON)\r\n                .bodyValue(personDto)\r\n                .exchange()\r\n                .expectStatus().isOk()\r\n                .expectBody(Response.class)\r\n                .value(response -&gt; assertAll(\r\n                        () -&gt; assertThat(response.getStatusValue()).isEqualTo(HttpStatus.OK.value()),\r\n                        () -&gt; assertThat(response.getStatusReasonPhrase()).isEqualTo(HttpStatus.OK.getReasonPhrase()),\r\n                        () -&gt; assertThat(response.getDescription()).isEqualTo(category.getDescription())\r\n                ));\r\n    }\r\n\r\nI would suggest those links bellow that will explain the approach of integration tests:\r\nhttps://rieckpil.de/guide-to-springboottest-for-spring-boot-integration-tests/\r\nhttps://www.freecodecamp.org/news/integration-testing-using-junit-5-testcontainers-with-springboot-example/\r\nhttps://docs.spring.io/spring-framework/docs/current/reference/html/testing.html#webtestclient-tests\r\n\r\n\r\n\r\n\r\n","title":"How to verify a wiremock service get some calls","body":"<p>It seems like you are mixing two approaches on your tests. I assume you are doing an integration test:</p>\n<ol>\n<li>When using <strong>Wiremock</strong>, you don't need to launch your service in a Docker container. The purpose of <strong>Wiremock</strong>, is to simulate the response you receive when you call the service you are mocking. You don't really call the service in this case.</li>\n<li>With the second approach you can use a Docker container with <strong>TestContainer</strong>. In this case, to check whether the service is called you have to test the response and check if this is your expected results. First the service (in your container) you want to call have be to exposed by an API, then in your service you are testing, you call the service with <code>TestRestemplate</code> or <code>WebTestClient</code>.</li>\n</ol>\n<p>A sample code will be like this:</p>\n<pre><code>@Test\nvoid integrationTest_For_Status_200() {\n    webTestClient.post()\n            .uri(&quot;THE_SERVICE_URL&quot;)\n            .accept(MediaType.APPLICATION_JSON)\n            .bodyValue(personDto)\n            .exchange()\n            .expectStatus().isOk()\n            .expectBody(Response.class)\n            .value(response -&gt; assertAll(\n                    () -&gt; assertThat(response.getStatusValue()).isEqualTo(HttpStatus.OK.value()),\n                    () -&gt; assertThat(response.getStatusReasonPhrase()).isEqualTo(HttpStatus.OK.getReasonPhrase()),\n                    () -&gt; assertThat(response.getDescription()).isEqualTo(category.getDescription())\n            ));\n}\n</code></pre>\n<p>I would suggest those links bellow that will explain the approach of integration tests:\n<a href=\"https://rieckpil.de/guide-to-springboottest-for-spring-boot-integration-tests/\" rel=\"nofollow noreferrer\">https://rieckpil.de/guide-to-springboottest-for-spring-boot-integration-tests/</a>\n<a href=\"https://www.freecodecamp.org/news/integration-testing-using-junit-5-testcontainers-with-springboot-example/\" rel=\"nofollow noreferrer\">https://www.freecodecamp.org/news/integration-testing-using-junit-5-testcontainers-with-springboot-example/</a>\n<a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/testing.html#webtestclient-tests\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-framework/docs/current/reference/html/testing.html#webtestclient-tests</a></p>\n"},{"tags":[],"owner":{"account_id":480519,"reputation":1382,"user_id":1423361,"accept_rate":100,"display_name":"Robert Elliot"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1672846093,"creation_date":1672846093,"answer_id":75007702,"question_id":74905043,"body_markdown":"If the docker compose is running, you can configure the default static WireMock client to use it as so:\r\n```java\r\nimport static com.github.tomakehurst.wiremock.client.WireMock.*;\r\n\r\nconfigureFor(&quot;localhost&quot;, 8081);\r\n```\r\nas you are port forwarding to `8081`.\r\n\r\nSee [WireMock &gt; Java configuration](https://wiremock.org/docs/configuration/) for further details.\r\n\r\nYou can then verify that service B was called as usual:\r\n```\r\nverify(postRequestedFor(urlEqualTo(&quot;/verify/this&quot;))\r\n        .withHeader(&quot;Content-Type&quot;, equalTo(&quot;text/xml&quot;)));\r\n```\r\n\r\nSee [Wiremock &gt; Verifying](https://wiremock.org/docs/verifying/) for further details.\r\n","title":"How to verify a wiremock service get some calls","body":"<p>If the docker compose is running, you can configure the default static WireMock client to use it as so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import static com.github.tomakehurst.wiremock.client.WireMock.*;\n\nconfigureFor(&quot;localhost&quot;, 8081);\n</code></pre>\n<p>as you are port forwarding to <code>8081</code>.</p>\n<p>See <a href=\"https://wiremock.org/docs/configuration/\" rel=\"nofollow noreferrer\">WireMock &gt; Java configuration</a> for further details.</p>\n<p>You can then verify that service B was called as usual:</p>\n<pre><code>verify(postRequestedFor(urlEqualTo(&quot;/verify/this&quot;))\n        .withHeader(&quot;Content-Type&quot;, equalTo(&quot;text/xml&quot;)));\n</code></pre>\n<p>See <a href=\"https://wiremock.org/docs/verifying/\" rel=\"nofollow noreferrer\">Wiremock &gt; Verifying</a> for further details.</p>\n"}],"owner":{"account_id":3546793,"reputation":1587,"user_id":2962555,"accept_rate":44,"display_name":"Laodao"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":866,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75007702,"answer_count":2,"score":2,"last_activity_date":1672846093,"creation_date":1671843644,"question_id":74905043,"body_markdown":"I am doing a functional testing of a service A. The function is triggered by an api call 1 from service B and then at last respond (send another api call 2) to the service B. Therefore, the plan is to wiremock the service B and make a call 1 and then verify that it get a api call 2 request back. \r\n\r\nWe use wiremock in the docker compose file to simulate the service B as below:\r\n\r\n  \r\n\r\n    service-b:\r\n        image: ***/wiremock-service-b\r\n        ports:\r\n          - &quot;8081:8081&quot;\r\n        volumes:\r\n          - ./wiremock/service-b/mappings/:/home/wiremock/mappings/\r\n          \r\nIs there any way I can get THIS service B wiremock instance (deployed in docker) using java code and triggered a call 1 and then verify a call 2 request coming back? Please help. Thanks.","title":"How to verify a wiremock service get some calls","body":"<p>I am doing a functional testing of a service A. The function is triggered by an api call 1 from service B and then at last respond (send another api call 2) to the service B. Therefore, the plan is to wiremock the service B and make a call 1 and then verify that it get a api call 2 request back.</p>\n<p>We use wiremock in the docker compose file to simulate the service B as below:</p>\n<pre><code>service-b:\n    image: ***/wiremock-service-b\n    ports:\n      - &quot;8081:8081&quot;\n    volumes:\n      - ./wiremock/service-b/mappings/:/home/wiremock/mappings/\n      \n</code></pre>\n<p>Is there any way I can get THIS service B wiremock instance (deployed in docker) using java code and triggered a call 1 and then verify a call 2 request coming back? Please help. Thanks.</p>\n"},{"tags":["java","spring","amazon-web-services","spring-boot","amazon-dynamodb"],"comments":[{"owner":{"account_id":100740,"reputation":73217,"user_id":271415,"accept_rate":91,"display_name":"jarmod"},"score":0,"creation_date":1672846198,"post_id":75002875,"comment_id":132365506,"body_markdown":"This seems unlikely. Have you double and triple-checked you are not mistaking what&#39;s happening here?","body":"This seems unlikely. Have you double and triple-checked you are not mistaking what&#39;s happening here?"},{"owner":{"account_id":15338304,"reputation":173,"user_id":11066001,"display_name":"Yashika Chandra"},"score":0,"creation_date":1673431660,"post_id":75002875,"comment_id":132495687,"body_markdown":"Yes I have checked. 8/10 is working fine, for rest of them I have debug the code also, Value is passing through batchDelete but value is still in DynamoDB","body":"Yes I have checked. 8/10 is working fine, for rest of them I have debug the code also, Value is passing through batchDelete but value is still in DynamoDB"},{"owner":{"account_id":100740,"reputation":73217,"user_id":271415,"accept_rate":91,"display_name":"jarmod"},"score":0,"creation_date":1673438109,"post_id":75002875,"comment_id":132498041,"body_markdown":"Capture and print out the result of the batchDelete call. It will be a list of DynamoDBMapper.FailedBatch objects, indicating which keys were not deleted, and why. After that, if you&#39;re sure this is a bug in DynamoDB (or the mapper SDK) then you might consider raising a support ticket with AWS and provide a failing request ID. This would be a serious bug in DynamoDB affecting lots of people (which is what makes me think it&#39;s unlikely).","body":"Capture and print out the result of the batchDelete call. It will be a list of DynamoDBMapper.FailedBatch objects, indicating which keys were not deleted, and why. After that, if you&#39;re sure this is a bug in DynamoDB (or the mapper SDK) then you might consider raising a support ticket with AWS and provide a failing request ID. This would be a serious bug in DynamoDB affecting lots of people (which is what makes me think it&#39;s unlikely)."}],"answers":[{"tags":[],"owner":{"account_id":1540816,"reputation":10259,"user_id":1435543,"display_name":"smac2020"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1672845767,"creation_date":1672822814,"answer_id":75003082,"question_id":75002875,"body_markdown":"If you look at Java V1 here: \r\n\r\nhttps://github.com/awsdocs/aws-doc-sdk-examples\r\n\r\nYou will see it&#39;s marked as **deprecated**. \r\n\r\n[![enter image description here][1]][1]\r\n\r\nI strongly recommend that you upgrade to the AWS SDK for Java v2 API. \r\n\r\nWhen working with Java V2 and DynamoDB, the Enhanced Client offers a straightforward way to map client-side classes to DynamoDB tables. This is documented in the **Java V2 Developer Guide** here: \r\n\r\n[Mapping items in DynamoDB tables][2]\r\n\r\nTo use the Enhanced Client to delete multiple items, you can use this Java code: \r\n\r\n    package com.example.dynamodb;\r\n    \r\n    // snippet-start:[dynamodb.java2.mapping.batchdelete.import]\r\n    import software.amazon.awssdk.auth.credentials.ProfileCredentialsProvider;\r\n    import software.amazon.awssdk.enhanced.dynamodb.DynamoDbEnhancedClient;\r\n    import software.amazon.awssdk.enhanced.dynamodb.DynamoDbTable;\r\n    import software.amazon.awssdk.enhanced.dynamodb.Key;\r\n    import software.amazon.awssdk.enhanced.dynamodb.TableSchema;\r\n    import software.amazon.awssdk.enhanced.dynamodb.model.BatchWriteItemEnhancedRequest;\r\n    import software.amazon.awssdk.enhanced.dynamodb.model.DeleteItemEnhancedRequest;\r\n    import software.amazon.awssdk.enhanced.dynamodb.model.WriteBatch;\r\n    import software.amazon.awssdk.regions.Region;\r\n    import software.amazon.awssdk.services.dynamodb.DynamoDbClient;\r\n    import software.amazon.awssdk.services.dynamodb.model.DynamoDbException;\r\n    // snippet-end:[dynamodb.java2.mapping.batchdelete.import]\r\n    \r\n    /*\r\n     * Before running this code example, create an Amazon DynamoDB table named Customer with these columns:\r\n     *   - id - the id of the record that is the key\r\n     *   - custName - the customer name\r\n     *   - email - the email value\r\n     *   - registrationDate - an instant value when the item was added to the table\r\n     *\r\n     * Also, ensure that you have set up your development environment, including your credentials.\r\n     *\r\n     * For information, see this documentation topic:\r\n     *\r\n     * https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/get-started.html\r\n     */\r\n    public class EnhancedBatchDeleteItems {\r\n    \r\n        public static void main(String[] args) {\r\n    \r\n            ProfileCredentialsProvider credentialsProvider = ProfileCredentialsProvider.create();\r\n            Region region = Region.US_EAST_1;\r\n            DynamoDbClient ddb = DynamoDbClient.builder()\r\n                .region(region)\r\n                .credentialsProvider(credentialsProvider)\r\n                .build();\r\n    \r\n            DynamoDbEnhancedClient enhancedClient = DynamoDbEnhancedClient.builder()\r\n                .dynamoDbClient(ddb)\r\n                .build();\r\n            deleteBatchRecords(enhancedClient);\r\n            ddb.close();\r\n        }\r\n    \r\n        // snippet-start:[dynamodb.java2.mapping.batchdelete.main]\r\n        public static void deleteBatchRecords(DynamoDbEnhancedClient enhancedClient) {\r\n            try {\r\n                DynamoDbTable&lt;Customer&gt; mappedTable = enhancedClient.table(&quot;Customer&quot;, TableSchema.fromBean(Customer.class));\r\n                Key key1 = Key.builder()\r\n                    .partitionValue(&quot;id110&quot;)\r\n                    .build();\r\n    \r\n                Key key2 = Key.builder()\r\n                    .partitionValue(&quot;id120&quot;)\r\n                    .build();\r\n    \r\n                BatchWriteItemEnhancedRequest request = BatchWriteItemEnhancedRequest.builder()\r\n                    .writeBatches(WriteBatch.builder(Customer.class)\r\n                        .mappedTableResource(mappedTable)\r\n                        .addDeleteItem(DeleteItemEnhancedRequest.builder()\r\n                            .key(key1)\r\n                            .build())\r\n                        .build(),\r\n                    WriteBatch.builder(Customer.class)\r\n                        .mappedTableResource(mappedTable)\r\n                        .addDeleteItem(DeleteItemEnhancedRequest.builder()\r\n                            .key(key2)\r\n                            .build())\r\n                        .build())\r\n                    .build();\r\n    \r\n                // Delete these two items from the table.\r\n                enhancedClient.batchWriteItem(request);\r\n                System.out.println(&quot;Records deleted&quot;);\r\n    \r\n            } catch (DynamoDbException e) {\r\n                System.err.println(e.getMessage());\r\n                System.exit(1);\r\n            }\r\n        }\r\n        // snippet-end:[dynamodb.java2.mapping.batchdelete.main]\r\n    }\r\n\r\n\r\nYou can find this example and other Java v2 DynamoDB examples in [AWS Code Example Github][3]. \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/7KCMf.png\r\n  [2]: https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/examples-dynamodb-enhanced.html\r\n  [3]: https://github.com/awsdocs/aws-doc-sdk-examples/tree/main/javav2/example_code/dynamodb","title":"BatchDelete is not deleting all value in list","body":"<p>If you look at Java V1 here:</p>\n<p><a href=\"https://github.com/awsdocs/aws-doc-sdk-examples\" rel=\"nofollow noreferrer\">https://github.com/awsdocs/aws-doc-sdk-examples</a></p>\n<p>You will see it's marked as <strong>deprecated</strong>.</p>\n<p><a href=\"https://i.stack.imgur.com/7KCMf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7KCMf.png\" alt=\"enter image description here\" /></a></p>\n<p>I strongly recommend that you upgrade to the AWS SDK for Java v2 API.</p>\n<p>When working with Java V2 and DynamoDB, the Enhanced Client offers a straightforward way to map client-side classes to DynamoDB tables. This is documented in the <strong>Java V2 Developer Guide</strong> here:</p>\n<p><a href=\"https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/examples-dynamodb-enhanced.html\" rel=\"nofollow noreferrer\">Mapping items in DynamoDB tables</a></p>\n<p>To use the Enhanced Client to delete multiple items, you can use this Java code:</p>\n<pre><code>package com.example.dynamodb;\n\n// snippet-start:[dynamodb.java2.mapping.batchdelete.import]\nimport software.amazon.awssdk.auth.credentials.ProfileCredentialsProvider;\nimport software.amazon.awssdk.enhanced.dynamodb.DynamoDbEnhancedClient;\nimport software.amazon.awssdk.enhanced.dynamodb.DynamoDbTable;\nimport software.amazon.awssdk.enhanced.dynamodb.Key;\nimport software.amazon.awssdk.enhanced.dynamodb.TableSchema;\nimport software.amazon.awssdk.enhanced.dynamodb.model.BatchWriteItemEnhancedRequest;\nimport software.amazon.awssdk.enhanced.dynamodb.model.DeleteItemEnhancedRequest;\nimport software.amazon.awssdk.enhanced.dynamodb.model.WriteBatch;\nimport software.amazon.awssdk.regions.Region;\nimport software.amazon.awssdk.services.dynamodb.DynamoDbClient;\nimport software.amazon.awssdk.services.dynamodb.model.DynamoDbException;\n// snippet-end:[dynamodb.java2.mapping.batchdelete.import]\n\n/*\n * Before running this code example, create an Amazon DynamoDB table named Customer with these columns:\n *   - id - the id of the record that is the key\n *   - custName - the customer name\n *   - email - the email value\n *   - registrationDate - an instant value when the item was added to the table\n *\n * Also, ensure that you have set up your development environment, including your credentials.\n *\n * For information, see this documentation topic:\n *\n * https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/get-started.html\n */\npublic class EnhancedBatchDeleteItems {\n\n    public static void main(String[] args) {\n\n        ProfileCredentialsProvider credentialsProvider = ProfileCredentialsProvider.create();\n        Region region = Region.US_EAST_1;\n        DynamoDbClient ddb = DynamoDbClient.builder()\n            .region(region)\n            .credentialsProvider(credentialsProvider)\n            .build();\n\n        DynamoDbEnhancedClient enhancedClient = DynamoDbEnhancedClient.builder()\n            .dynamoDbClient(ddb)\n            .build();\n        deleteBatchRecords(enhancedClient);\n        ddb.close();\n    }\n\n    // snippet-start:[dynamodb.java2.mapping.batchdelete.main]\n    public static void deleteBatchRecords(DynamoDbEnhancedClient enhancedClient) {\n        try {\n            DynamoDbTable&lt;Customer&gt; mappedTable = enhancedClient.table(&quot;Customer&quot;, TableSchema.fromBean(Customer.class));\n            Key key1 = Key.builder()\n                .partitionValue(&quot;id110&quot;)\n                .build();\n\n            Key key2 = Key.builder()\n                .partitionValue(&quot;id120&quot;)\n                .build();\n\n            BatchWriteItemEnhancedRequest request = BatchWriteItemEnhancedRequest.builder()\n                .writeBatches(WriteBatch.builder(Customer.class)\n                    .mappedTableResource(mappedTable)\n                    .addDeleteItem(DeleteItemEnhancedRequest.builder()\n                        .key(key1)\n                        .build())\n                    .build(),\n                WriteBatch.builder(Customer.class)\n                    .mappedTableResource(mappedTable)\n                    .addDeleteItem(DeleteItemEnhancedRequest.builder()\n                        .key(key2)\n                        .build())\n                    .build())\n                .build();\n\n            // Delete these two items from the table.\n            enhancedClient.batchWriteItem(request);\n            System.out.println(&quot;Records deleted&quot;);\n\n        } catch (DynamoDbException e) {\n            System.err.println(e.getMessage());\n            System.exit(1);\n        }\n    }\n    // snippet-end:[dynamodb.java2.mapping.batchdelete.main]\n}\n</code></pre>\n<p>You can find this example and other Java v2 DynamoDB examples in <a href=\"https://github.com/awsdocs/aws-doc-sdk-examples/tree/main/javav2/example_code/dynamodb\" rel=\"nofollow noreferrer\">AWS Code Example Github</a>.</p>\n"},{"tags":[],"owner":{"account_id":10749774,"reputation":14475,"user_id":7909676,"display_name":"Leeroy Hannigan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672832971,"creation_date":1672832971,"answer_id":75005006,"question_id":75002875,"body_markdown":"I do not see any issue with your code, I have tested similar and works for me with no issue. My first suggestion would be to ensure you wrap your code in a `try/catch` block:\r\n\r\n```\r\n        try {\r\n\r\n            DynamoDBMapper mapper = new DynamoDBMapper(client);\r\n\r\n            Reply key = new Reply();\r\n            key.setPk(&quot;1&quot;);\r\n\r\n            DynamoDBQueryExpression&lt;Reply&gt; queryExpression = new DynamoDBQueryExpression&lt;Reply&gt;()\r\n                    .withHashKeyValues(key)\r\n                    .withReturnConsumedCapacity(ReturnConsumedCapacity.TOTAL)\r\n                    .withScanIndexForward(false);\r\n\r\n            List&lt;Reply&gt; latestReplies = mapper.query(Reply.class, queryExpression);\r\n            \r\n            // Log keys here to be sure you are deleting the correct item\r\n            for (Reply c: latestReplies) {\r\n                System.out.println(c.getPk());\r\n            }\r\n\r\n            mapper.batchDelete(latestReplies);\r\n\r\n        } catch (Throwable t) {\r\n            System.err.println(&quot;Error running: &quot; + t);\r\n            t.printStackTrace();\r\n        }\r\n```\r\n\r\nI would suggest that you implement some logging, just to be sure that the items you read are the ones you expected to be deleted. \r\n\r\nIt may also be worth enabling [CloudTrail Dataplane Logs](https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/logging-using-cloudtrail.html#ddb-data-plane-events-in-cloudtrail) which will allow you to see all the dataplane events being executed on the table. \r\n\r\nYou may also enable [HTTP wire logging](https://docs.aws.amazon.com/sdk-for-java/v1/developer-guide/java-dg-logging.html) to provide you another level of logging, however, this is not advised for production workloads as the logging is quite verbose.","title":"BatchDelete is not deleting all value in list","body":"<p>I do not see any issue with your code, I have tested similar and works for me with no issue. My first suggestion would be to ensure you wrap your code in a <code>try/catch</code> block:</p>\n<pre><code>        try {\n\n            DynamoDBMapper mapper = new DynamoDBMapper(client);\n\n            Reply key = new Reply();\n            key.setPk(&quot;1&quot;);\n\n            DynamoDBQueryExpression&lt;Reply&gt; queryExpression = new DynamoDBQueryExpression&lt;Reply&gt;()\n                    .withHashKeyValues(key)\n                    .withReturnConsumedCapacity(ReturnConsumedCapacity.TOTAL)\n                    .withScanIndexForward(false);\n\n            List&lt;Reply&gt; latestReplies = mapper.query(Reply.class, queryExpression);\n            \n            // Log keys here to be sure you are deleting the correct item\n            for (Reply c: latestReplies) {\n                System.out.println(c.getPk());\n            }\n\n            mapper.batchDelete(latestReplies);\n\n        } catch (Throwable t) {\n            System.err.println(&quot;Error running: &quot; + t);\n            t.printStackTrace();\n        }\n</code></pre>\n<p>I would suggest that you implement some logging, just to be sure that the items you read are the ones you expected to be deleted.</p>\n<p>It may also be worth enabling <a href=\"https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/logging-using-cloudtrail.html#ddb-data-plane-events-in-cloudtrail\" rel=\"nofollow noreferrer\">CloudTrail Dataplane Logs</a> which will allow you to see all the dataplane events being executed on the table.</p>\n<p>You may also enable <a href=\"https://docs.aws.amazon.com/sdk-for-java/v1/developer-guide/java-dg-logging.html\" rel=\"nofollow noreferrer\">HTTP wire logging</a> to provide you another level of logging, however, this is not advised for production workloads as the logging is quite verbose.</p>\n"}],"owner":{"account_id":15338304,"reputation":173,"user_id":11066001,"display_name":"Yashika Chandra"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":312,"favorite_count":0,"down_vote_count":2,"up_vote_count":3,"answer_count":2,"score":1,"last_activity_date":1672845767,"creation_date":1672821601,"question_id":75002875,"body_markdown":"Trying to delete multiple row of DynamoDB.\r\n\r\nQuerying only on one table of DynamoDB.On basis the of Partition key, its returning 2 values as output, which is save in list.\r\n\r\n[![enter image description here][1]][1]  Now after deleting this value using BatchDelete only first element get deleted. Sometimes on random basis second value also get deleted but that was not happened every time.\r\n\r\n    \r\n\r\n         DynamoDBQueryExpression&lt;Abc&gt; queryExpression = new DynamoDBQueryExpression&lt;Abc&gt;()\r\n                        .withHashKeyValues(abc);  \r\n             \r\n            List&lt;Abc&gt; xyz = dynamoDBMapper.query(Abc.class,queryExpression);\r\n    //xyz has size 2\r\n    \r\n            dynamoDBMapper.batchDelete(xyz);\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/S9XKb.png\r\n\r\nShould I use sleep or is there any other way.","title":"BatchDelete is not deleting all value in list","body":"<p>Trying to delete multiple row of DynamoDB.</p>\n<p>Querying only on one table of DynamoDB.On basis the of Partition key, its returning 2 values as output, which is save in list.</p>\n<p><a href=\"https://i.stack.imgur.com/S9XKb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/S9XKb.png\" alt=\"enter image description here\" /></a>  Now after deleting this value using BatchDelete only first element get deleted. Sometimes on random basis second value also get deleted but that was not happened every time.</p>\n<pre><code>     DynamoDBQueryExpression&lt;Abc&gt; queryExpression = new DynamoDBQueryExpression&lt;Abc&gt;()\n                    .withHashKeyValues(abc);  \n         \n        List&lt;Abc&gt; xyz = dynamoDBMapper.query(Abc.class,queryExpression);\n//xyz has size 2\n\n        dynamoDBMapper.batchDelete(xyz);\n</code></pre>\n<p>Should I use sleep or is there any other way.</p>\n"},{"tags":["java","locking","java-threads"],"comments":[{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1672743442,"post_id":74991878,"comment_id":132338957,"body_markdown":"Wouldn&#39;t it be easier to use a [`Semaphore`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/Semaphore.html) initialized with the harbor capacity? A car wanting to enter the harbor would the `aquire()` a slot and on leaving `release()` a slot.","body":"Wouldn&#39;t it be easier to use a <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/Semaphore.html\" rel=\"nofollow noreferrer\"><code>Semaphore</code></a> initialized with the harbor capacity? A car wanting to enter the harbor would the <code>aquire()</code> a slot and on leaving <code>release()</code> a slot."},{"owner":{"account_id":27419108,"reputation":3,"user_id":20917838,"display_name":"Raven"},"score":0,"creation_date":1672748733,"post_id":74991878,"comment_id":132340569,"body_markdown":"For this piece of code i think i could use it, but there will be more cases when i need to decrement and increment nrOfCars and this operation need to be done by only single one thread at time.","body":"For this piece of code i think i could use it, but there will be more cases when i need to decrement and increment nrOfCars and this operation need to be done by only single one thread at time."}],"answers":[{"tags":[],"owner":{"account_id":3235580,"reputation":90,"user_id":2729902,"display_name":"Narendra Mathuriya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672741353,"creation_date":1672741353,"answer_id":74991994,"question_id":74991878,"body_markdown":"In the carEnterHarbour method, you are calling await() on the protectNrCon condition, which causes the current thread to wait until it is signaled. However, you are not calling signal() anywhere in the carEnterHarbour method. This means that once a thread enters the if block, it will always wait indefinitely on the condition.\r\n\r\nYou should consider calling signal() on the protectNrCon condition after you increment nrOfCars and print the message, so that other threads waiting on the condition can be unblocked.\r\n\r\nAdditionally, you should call await() in a loop to ensure that the thread waits until the condition is true, rather than waiting indefinitely. Here is an example of how you can modify the carEnterHarbour method:\r\n\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    public void carEnterHarbour(String name) {\r\n        try {\r\n            protectNr.lock();\r\n            while (this.nrOfCars == this.capacity) {\r\n                protectNrCon.await();\r\n            }\r\n            nrOfCars++;\r\n            System.out.println(name+&quot; enters&quot;);\r\n            System.out.println(&quot;Number of cars:&quot; + this.nrOfCars);\r\n            protectNrCon.signal();\r\n        } catch (InterruptedException e) {\r\n            System.out.println(&quot;Error&quot;);\r\n        } finally {\r\n            protectNr.unlock();\r\n        }\r\n    }\r\n\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"Problem with critical section using Retrant Lock with Condition","body":"<p>In the carEnterHarbour method, you are calling await() on the protectNrCon condition, which causes the current thread to wait until it is signaled. However, you are not calling signal() anywhere in the carEnterHarbour method. This means that once a thread enters the if block, it will always wait indefinitely on the condition.</p>\n<p>You should consider calling signal() on the protectNrCon condition after you increment nrOfCars and print the message, so that other threads waiting on the condition can be unblocked.</p>\n<p>Additionally, you should call await() in a loop to ensure that the thread waits until the condition is true, rather than waiting indefinitely. Here is an example of how you can modify the carEnterHarbour method:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>public void carEnterHarbour(String name) {\n    try {\n        protectNr.lock();\n        while (this.nrOfCars == this.capacity) {\n            protectNrCon.await();\n        }\n        nrOfCars++;\n        System.out.println(name+\" enters\");\n        System.out.println(\"Number of cars:\" + this.nrOfCars);\n        protectNrCon.signal();\n    } catch (InterruptedException e) {\n        System.out.println(\"Error\");\n    } finally {\n        protectNr.unlock();\n    }\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"tags":[],"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1672748508,"creation_date":1672748508,"answer_id":74993301,"question_id":74991878,"body_markdown":"The documentation for [`Condition`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/locks/Condition.html) warns that spurious wakeups might occur (emphasis mine):\r\n\r\n&gt; When waiting upon a Condition, a &quot;_spurious wakeup_&quot; is permitted to occur, in general, as a concession to the underlying platform semantics. This has little practical impact on most application programs as a Condition **should always be waited upon in a loop**, testing the state predicate that is being waited for. An implementation is free to remove the possibility of spurious wakeups but it is recommended that applications programmers always assume that they can occur and so always wait in a loop.\r\n\r\nYour code doesn&#39;t honor that warning.\r\n\r\nYour `carEnterHarbour()` must take this possibility of spurious wakeups into account and needs\r\n\r\n            while(this.nrOfCars == this.capacity){\r\n                protectNrCon.await();\r\n            }\r\n\r\ninstead of the simple `if` statement.\r\n\r\n---\r\n\r\nDepending on your requirements it might be easier to use a [`Semaphore`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/Semaphore.html):\r\n\r\n    public class Harbour {\r\n        final Semaphore slots;\r\n    \r\n        public Harbour(int capacity){\r\n            this.slots = new Semaphore(capacity);\r\n        }\r\n    \r\n        public void carEnterHarbour(String name) {\r\n            try{\r\n                slots.acquire();\r\n            }catch (InterruptedException e){\r\n                System.out.println(&quot;Error&quot;);\r\n            }\r\n    \r\n        }\r\n        public void carLeavingHarbour(String name) {\r\n            slots.release();\r\n        }\r\n    }\r\n\r\nNote that when using a `Semaphore` you don&#39;t have those locks in place when entering / leaving the Harbour and therefore it is difficult to get that ordered &quot;car entering&quot; / &quot;car leaving&quot; output together with the number of currently available slots.\r\n","title":"Problem with critical section using Retrant Lock with Condition","body":"<p>The documentation for <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/locks/Condition.html\" rel=\"nofollow noreferrer\"><code>Condition</code></a> warns that spurious wakeups might occur (emphasis mine):</p>\n<blockquote>\n<p>When waiting upon a Condition, a &quot;<em>spurious wakeup</em>&quot; is permitted to occur, in general, as a concession to the underlying platform semantics. This has little practical impact on most application programs as a Condition <strong>should always be waited upon in a loop</strong>, testing the state predicate that is being waited for. An implementation is free to remove the possibility of spurious wakeups but it is recommended that applications programmers always assume that they can occur and so always wait in a loop.</p>\n</blockquote>\n<p>Your code doesn't honor that warning.</p>\n<p>Your <code>carEnterHarbour()</code> must take this possibility of spurious wakeups into account and needs</p>\n<pre><code>        while(this.nrOfCars == this.capacity){\n            protectNrCon.await();\n        }\n</code></pre>\n<p>instead of the simple <code>if</code> statement.</p>\n<hr />\n<p>Depending on your requirements it might be easier to use a <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/Semaphore.html\" rel=\"nofollow noreferrer\"><code>Semaphore</code></a>:</p>\n<pre><code>public class Harbour {\n    final Semaphore slots;\n\n    public Harbour(int capacity){\n        this.slots = new Semaphore(capacity);\n    }\n\n    public void carEnterHarbour(String name) {\n        try{\n            slots.acquire();\n        }catch (InterruptedException e){\n            System.out.println(&quot;Error&quot;);\n        }\n\n    }\n    public void carLeavingHarbour(String name) {\n        slots.release();\n    }\n}\n</code></pre>\n<p>Note that when using a <code>Semaphore</code> you don't have those locks in place when entering / leaving the Harbour and therefore it is difficult to get that ordered &quot;car entering&quot; / &quot;car leaving&quot; output together with the number of currently available slots.</p>\n"}],"owner":{"account_id":27419108,"reputation":3,"user_id":20917838,"display_name":"Raven"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74993301,"answer_count":2,"score":0,"last_activity_date":1672845414,"creation_date":1672740845,"question_id":74991878,"body_markdown":"I have a small project to synchronize multiple (two classes: ships, cars with a few instances with shared bufor class called Harbour) threads at the same time. They will be performing certain action on it. But I can&#39;t start with that until I synchronized the threads named &quot;cars&quot; in the Harbour. The Harbour has limited capacity and if this capacity is reached the &quot;car&quot; threads should be waiting until they will get signal that there&#39;s a free space to enter. I&#39;ve used Retrant Lock with Condition but it doesn&#39;t work as I think.\r\n\r\n```\r\npublic class Harbour {\r\n    final Lock protectNr;\r\n    final Condition protectNrCon;\r\n    int capacity;\r\n    int nrOfCars;\r\n\r\n    public Harbour(int capacity) {\r\n        this.capacity = capacity;\r\n        this.protectNr = new ReentrantLock();\r\n        this.protectNrCon = protectNr.newCondition();\r\n    }\r\n\r\n    public void carEnterHarbour(String name) {\r\n        try {\r\n            protectNr.lock();\r\n            if (this.nrOfCars == this.capacity)\r\n                protectNrCon.await();\r\n\r\n            nrOfCars++;\r\n            System.out.println(name + &quot; enters&quot;);\r\n            System.out.println(&quot;Number of cars:&quot; + this.nrOfCars);\r\n            protectNr.unlock();\r\n        } catch (InterruptedException e) {\r\n            System.out.println(&quot;Error&quot;);\r\n        }\r\n    }\r\n\r\n    public void carLeavingHarbour(String name) {\r\n        try {\r\n            protectNr.lock();\r\n            this.nrOfCars--;\r\n            protectNrCon.signal();\r\n            System.out.println(name + &quot; leaving&quot;);\r\n            System.out.println(&quot;Number of cars:&quot; + this.nrOfCars);\r\n        } finally {\r\n            protectNr.unlock();\r\n        }\r\n    }\r\n}\r\n\r\npublic class Car extends Thread {\r\n    Harbour harbour;\r\n    public Car(Harbour harbour, String name) {\r\n        super(name);\r\n        this.harbour = harbour;\r\n    }\r\n\r\n    public void run() {\r\n        for (int i = 0; i &lt; 10; i++) {\r\n            harbour.carEnterHarbour(getName());\r\n            harbour.carLeavingHarbour(getName());\r\n        }\r\n    }\r\n}\r\n\r\npublic class Test {\r\n    public static void main(String[] args) throws InterruptedException {\r\n        int harbourCapacity = 20;\r\n        final Harbour harbour = new Harbour(harbourCapacity);\r\n        int nrOfCars = 500;\r\n        Car[] cars = new Car[nrOfCars];\r\n        for (int i = 0; i &lt; nrOfCars; i++)\r\n            cars[i] = new Car(harbour, &quot;Car-&quot; + i);\r\n\r\n        for (int i = 0; i &lt; nrOfCars; i++)\r\n            cars[i].start();\r\n\r\n        for (int i = 0; i &lt; nrOfCars; i++)\r\n            cars[i].join();\r\n    }\r\n}\r\n```\r\n\r\nWhat I was expecting after executing this code:\r\n\r\n```none\r\nCar-386 leaving\r\nNumber of cars:**19**\r\nCar-300 enters\r\nNumber of cars:**20**\r\nCar-300 leaving\r\nNumber of cars:**19**\r\n```\r\n\r\nWhat I got:\r\n\r\n```none\r\nCar-386 leaving\r\nNumber of cars:**20**\r\nCar-300 enters\r\nNumber of cars:**21**\r\nCar-295 enters\r\nNumber of cars:**22**\r\n```\r\n\r\nI also try to **change int capacity** to **volatile int capacity** and add some busy waiting but didn&#39;t work at all.\r\nIt looks like Threads are not block on Condition and I wonder why is this happening?","title":"Problem with critical section using Retrant Lock with Condition","body":"<p>I have a small project to synchronize multiple (two classes: ships, cars with a few instances with shared bufor class called Harbour) threads at the same time. They will be performing certain action on it. But I can't start with that until I synchronized the threads named &quot;cars&quot; in the Harbour. The Harbour has limited capacity and if this capacity is reached the &quot;car&quot; threads should be waiting until they will get signal that there's a free space to enter. I've used Retrant Lock with Condition but it doesn't work as I think.</p>\n<pre><code>public class Harbour {\n    final Lock protectNr;\n    final Condition protectNrCon;\n    int capacity;\n    int nrOfCars;\n\n    public Harbour(int capacity) {\n        this.capacity = capacity;\n        this.protectNr = new ReentrantLock();\n        this.protectNrCon = protectNr.newCondition();\n    }\n\n    public void carEnterHarbour(String name) {\n        try {\n            protectNr.lock();\n            if (this.nrOfCars == this.capacity)\n                protectNrCon.await();\n\n            nrOfCars++;\n            System.out.println(name + &quot; enters&quot;);\n            System.out.println(&quot;Number of cars:&quot; + this.nrOfCars);\n            protectNr.unlock();\n        } catch (InterruptedException e) {\n            System.out.println(&quot;Error&quot;);\n        }\n    }\n\n    public void carLeavingHarbour(String name) {\n        try {\n            protectNr.lock();\n            this.nrOfCars--;\n            protectNrCon.signal();\n            System.out.println(name + &quot; leaving&quot;);\n            System.out.println(&quot;Number of cars:&quot; + this.nrOfCars);\n        } finally {\n            protectNr.unlock();\n        }\n    }\n}\n\npublic class Car extends Thread {\n    Harbour harbour;\n    public Car(Harbour harbour, String name) {\n        super(name);\n        this.harbour = harbour;\n    }\n\n    public void run() {\n        for (int i = 0; i &lt; 10; i++) {\n            harbour.carEnterHarbour(getName());\n            harbour.carLeavingHarbour(getName());\n        }\n    }\n}\n\npublic class Test {\n    public static void main(String[] args) throws InterruptedException {\n        int harbourCapacity = 20;\n        final Harbour harbour = new Harbour(harbourCapacity);\n        int nrOfCars = 500;\n        Car[] cars = new Car[nrOfCars];\n        for (int i = 0; i &lt; nrOfCars; i++)\n            cars[i] = new Car(harbour, &quot;Car-&quot; + i);\n\n        for (int i = 0; i &lt; nrOfCars; i++)\n            cars[i].start();\n\n        for (int i = 0; i &lt; nrOfCars; i++)\n            cars[i].join();\n    }\n}\n</code></pre>\n<p>What I was expecting after executing this code:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Car-386 leaving\nNumber of cars:**19**\nCar-300 enters\nNumber of cars:**20**\nCar-300 leaving\nNumber of cars:**19**\n</code></pre>\n<p>What I got:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Car-386 leaving\nNumber of cars:**20**\nCar-300 enters\nNumber of cars:**21**\nCar-295 enters\nNumber of cars:**22**\n</code></pre>\n<p>I also try to <strong>change int capacity</strong> to <strong>volatile int capacity</strong> and add some busy waiting but didn't work at all.\nIt looks like Threads are not block on Condition and I wonder why is this happening?</p>\n"},{"tags":["java","xml","parsing","intellij-idea","dom"],"answers":[{"tags":[],"owner":{"account_id":25328684,"reputation":1,"user_id":19148868,"display_name":"JuniorAnonymDeveloper"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665240635,"creation_date":1665240635,"answer_id":73997936,"question_id":73997507,"body_markdown":"I don&#39;t really understand the question, but I think you might looking for something like this: [link](https://www.w3schools.com/jsref/met_document_getelementbyid.asp)","title":"How could I reach a specific tag while using DOM?","body":"<p>I don't really understand the question, but I think you might looking for something like this: <a href=\"https://www.w3schools.com/jsref/met_document_getelementbyid.asp\" rel=\"nofollow noreferrer\">link</a></p>\n"},{"tags":[],"owner":{"account_id":17809686,"reputation":682,"user_id":12934590,"display_name":"Andreea Purta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1665661763,"creation_date":1665661458,"answer_id":74055201,"question_id":73997507,"body_markdown":"You can try something like this:\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;!DOCTYPE html&gt;\r\n    &lt;html&gt;\r\n    &lt;body&gt;\r\n\r\n    &lt;p id=&quot;demo&quot;&gt;&lt;/p&gt;\r\n\r\n    &lt;script&gt;\r\n    var parser, xmlDoc;\r\n    var text = &quot;&lt;Word&gt; &lt;equivalent&gt;&lt;language&gt;english&lt;/language&gt;&lt;word-translate&gt;car&lt;/word-translate&gt;&lt;/equivalent&gt;&quot; +\r\n    &quot;&lt;equivalent&gt;&lt;language&gt;romanian&lt;/language&gt;&lt;word-translate&gt;autovehicul&lt;/word-translate&gt;&lt;/equivalent&gt;&lt;/Word&gt;&quot;;\r\n\r\n    parser = new DOMParser();\r\n    xmlDoc = parser.parseFromString(text,&quot;text/xml&quot;);\r\n\r\n    document.getElementById(&quot;demo&quot;).innerHTML =\r\n    xmlDoc.getElementsByTagName(&quot;word-translate&quot;)[1].childNodes[0].nodeValue;\r\n    &lt;/script&gt;\r\n\r\n    &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nOr you can try XPath for an easier access.","title":"How could I reach a specific tag while using DOM?","body":"<p>You can try something like this:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;body&gt;\n\n&lt;p id=\"demo\"&gt;&lt;/p&gt;\n\n&lt;script&gt;\nvar parser, xmlDoc;\nvar text = \"&lt;Word&gt; &lt;equivalent&gt;&lt;language&gt;english&lt;/language&gt;&lt;word-translate&gt;car&lt;/word-translate&gt;&lt;/equivalent&gt;\" +\n\"&lt;equivalent&gt;&lt;language&gt;romanian&lt;/language&gt;&lt;word-translate&gt;autovehicul&lt;/word-translate&gt;&lt;/equivalent&gt;&lt;/Word&gt;\";\n\nparser = new DOMParser();\nxmlDoc = parser.parseFromString(text,\"text/xml\");\n\ndocument.getElementById(\"demo\").innerHTML =\nxmlDoc.getElementsByTagName(\"word-translate\")[1].childNodes[0].nodeValue;\n&lt;/script&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>Or you can try XPath for an easier access.</p>\n"},{"tags":[],"owner":{"display_name":"user19554908"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672845193,"creation_date":1672845193,"answer_id":75007482,"question_id":73997507,"body_markdown":"Apparently I can&#39;t add more question if this is not solved.\r\nDOM wasn&#39;t a very good idea. IT works but you need hardcoding, witch doesn&#39;t help me a lot. Instead I&#39;ve dropped DOM and used another way. Unfortunately I can&#39;t show you the code, because it was part of school assignment and we have an agreement to obey.\r\nAll I can say is you can analyze your document and parsing it using SAX or StAX.\r\nThe people trying to help me like ms. Purta, offered me an answer that uses ID. Thank you for you time. I&#39;ve tried to select your answer as a good one, but I must be at 15 level...  master potion level ...to have a say at my own post. :D\r\nI can&#39;t ask more questions, not for a while until these are solved somehow. The problem is the school regulation. They are the mean ones.\r\n\r\n    NodeList wordNode = document.getElementsByTagName(word);\r\n        for (int i = 0; i &lt; wordNode.getLength(); i++) {\r\n            Node node = wordNode.item(i);\r\n            if (node.getNodeType()== Node.ELEMENT_NODE){\r\n                Element eElement = (Element) node;\r\n                String result =&quot;romanian&quot;;\r\n                switch (result) {\r\n                    case &quot;english&quot; -&gt; result = eElement.getElementsByTagName(&quot;english&quot;).item(0).getTextContent();\r\n                    case &quot;romanian&quot; -&gt; result = eElement.getElementsByTagName(&quot;romanian&quot;).item(0).getTextContent();\r\n                    case &quot;spanish&quot; -&gt; result = eElement.getElementsByTagName(&quot;spanish&quot;).item(0).getTextContent();\r\n                    case &quot;italian&quot; -&gt; result = eElement.getElementsByTagName(&quot;italian&quot;).item(0).getTextContent();\r\n                    case &quot;swedish&quot; -&gt; result = eElement.getElementsByTagName(&quot;swedish&quot;).item(0).getTextContent();\r\n                    case &quot;greek&quot; -&gt; result = eElement.getElementsByTagName(&quot;greek&quot;).item(0).getTextContent();\r\n                }\r\n                return result;\r\n            }\r\n            if (node.getNodeType() == Node.ELEMENT_NODE){\r\n                Element sElement = (Element) node;\r\n                String source = &quot;english&quot;;\r\n                switch (source){\r\n                    case &quot;english&quot; -&gt; source = sElement.getParentNode().getNodeName();\r\n                    case &quot;romanian&quot; -&gt; source = sElement.getParentNode().getNodeName();\r\n                    case &quot;spanish&quot; -&gt; source = sElement.getParentNode().getNodeName();\r\n                    case &quot;italian&quot; -&gt; source = sElement.getParentNode().getNodeName();\r\n                    case &quot;swedish&quot; -&gt; source = sElement.getParentNode().getNodeName();\r\n                    case &quot;greek&quot; -&gt; source = sElement.getParentNode().getNodeName();\r\n                }\r\n                return source;\r\n            }\r\n}\r\n    return null;\r\n\r\nThe ID was not a solution but it works. Also XPath works.\r\nThat is all! ","title":"How could I reach a specific tag while using DOM?","body":"<p>Apparently I can't add more question if this is not solved.\nDOM wasn't a very good idea. IT works but you need hardcoding, witch doesn't help me a lot. Instead I've dropped DOM and used another way. Unfortunately I can't show you the code, because it was part of school assignment and we have an agreement to obey.\nAll I can say is you can analyze your document and parsing it using SAX or StAX.\nThe people trying to help me like ms. Purta, offered me an answer that uses ID. Thank you for you time. I've tried to select your answer as a good one, but I must be at 15 level...  master potion level ...to have a say at my own post. :D\nI can't ask more questions, not for a while until these are solved somehow. The problem is the school regulation. They are the mean ones.</p>\n<pre><code>NodeList wordNode = document.getElementsByTagName(word);\n    for (int i = 0; i &lt; wordNode.getLength(); i++) {\n        Node node = wordNode.item(i);\n        if (node.getNodeType()== Node.ELEMENT_NODE){\n            Element eElement = (Element) node;\n            String result =&quot;romanian&quot;;\n            switch (result) {\n                case &quot;english&quot; -&gt; result = eElement.getElementsByTagName(&quot;english&quot;).item(0).getTextContent();\n                case &quot;romanian&quot; -&gt; result = eElement.getElementsByTagName(&quot;romanian&quot;).item(0).getTextContent();\n                case &quot;spanish&quot; -&gt; result = eElement.getElementsByTagName(&quot;spanish&quot;).item(0).getTextContent();\n                case &quot;italian&quot; -&gt; result = eElement.getElementsByTagName(&quot;italian&quot;).item(0).getTextContent();\n                case &quot;swedish&quot; -&gt; result = eElement.getElementsByTagName(&quot;swedish&quot;).item(0).getTextContent();\n                case &quot;greek&quot; -&gt; result = eElement.getElementsByTagName(&quot;greek&quot;).item(0).getTextContent();\n            }\n            return result;\n        }\n        if (node.getNodeType() == Node.ELEMENT_NODE){\n            Element sElement = (Element) node;\n            String source = &quot;english&quot;;\n            switch (source){\n                case &quot;english&quot; -&gt; source = sElement.getParentNode().getNodeName();\n                case &quot;romanian&quot; -&gt; source = sElement.getParentNode().getNodeName();\n                case &quot;spanish&quot; -&gt; source = sElement.getParentNode().getNodeName();\n                case &quot;italian&quot; -&gt; source = sElement.getParentNode().getNodeName();\n                case &quot;swedish&quot; -&gt; source = sElement.getParentNode().getNodeName();\n                case &quot;greek&quot; -&gt; source = sElement.getParentNode().getNodeName();\n            }\n            return source;\n        }\n</code></pre>\n<p>}\nreturn null;</p>\n<p>The ID was not a solution but it works. Also XPath works.\nThat is all!</p>\n"}],"owner":{"display_name":"user19554908"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74055201,"answer_count":3,"score":0,"last_activity_date":1672845193,"creation_date":1665236962,"question_id":73997507,"body_markdown":"Please show me how to reach &quot;autovehicul&quot; as result, while language is english and its sibling is car. Thank you.\r\nIf language english is selected and car is selected, in a web service, my answer must be autovehicul, if romanian language exists. \r\n\r\nHow can you parse that xml to reach an answer like that. I have an issue with targeting a specific node. Condition - Nodelist - Iterate -  Condition -  Node - get Tag. Then, i have to establish the node of autovehicul content, and get the required result.\r\n\r\n&lt;Dictionary&gt;\r\n\r\n    &lt;Word&gt;\r\n        &lt;equivalent&gt;\r\n            &lt;language&gt;english&lt;/language&gt;\r\n            &lt;word-translate&gt;car&lt;/word-translate&gt;\r\n        &lt;/equivalent&gt;\r\n\r\n        &lt;equivalent&gt;\r\n            &lt;language&gt;romanian&lt;/language&gt;\r\n            &lt;word-translate&gt;autovehicul&lt;/word-translate&gt;\r\n        &lt;/equivalent&gt;\r\n    &lt;/Word&gt;\r\n&lt;/Dictionary&gt;","title":"How could I reach a specific tag while using DOM?","body":"<p>Please show me how to reach &quot;autovehicul&quot; as result, while language is english and its sibling is car. Thank you.\nIf language english is selected and car is selected, in a web service, my answer must be autovehicul, if romanian language exists.</p>\n<p>How can you parse that xml to reach an answer like that. I have an issue with targeting a specific node. Condition - Nodelist - Iterate -  Condition -  Node - get Tag. Then, i have to establish the node of autovehicul content, and get the required result.</p>\n\n<pre><code>&lt;Word&gt;\n    &lt;equivalent&gt;\n        &lt;language&gt;english&lt;/language&gt;\n        &lt;word-translate&gt;car&lt;/word-translate&gt;\n    &lt;/equivalent&gt;\n\n    &lt;equivalent&gt;\n        &lt;language&gt;romanian&lt;/language&gt;\n        &lt;word-translate&gt;autovehicul&lt;/word-translate&gt;\n    &lt;/equivalent&gt;\n&lt;/Word&gt;\n</code></pre>\n\n"},{"tags":["java","eclipse","debugging","logging"],"answers":[{"tags":[],"owner":{"account_id":4243,"reputation":1301840,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1474737859,"creation_date":1247225897,"answer_id":1109057,"question_id":1109019,"body_markdown":"If you are setting the debug level from your own program, may be a line like:\r\n\r\n    public static final boolean DEBUG_MODE = System.getProperty(&quot;java.vm.info&quot;, &quot;&quot;).contains(&quot;sharing&quot;);\r\n\r\nwould do the trick.\r\n\r\nJust tested it in eclipse3.5:\r\n\r\n    package test;\r\n    \r\n    public class Test\r\n    {\r\n    \r\n        /**\r\n         * @param args\r\n         */\r\n        public static void main(String[] args)\r\n        {\r\n            System.out.println(System.getProperty(&quot;java.vm.info&quot;, &quot;&quot;));\r\n        }\r\n    \r\n    }\r\n\r\nwill display:\r\n\r\n    mixed mode, sharing\r\n\r\nif launched without debug\r\n\r\n    mixed mode\r\n\r\nif executed with debug launcher\r\n\r\n----------\r\n\r\n[Joachim Sauer][1] comments:\r\n\r\nThis is highly system depending.  \r\nI assume the &quot;sharing&quot; indicates that cross-VM class-sharing is active.  \r\nThis is a very new feature and is only available on some platforms.  \r\nFurthermore there can be many possible reasons to en- or disable it, so I wouldn&#39;t use this for debug-mode detection.\r\n\r\n(Note: I tested it with the latest jdk1.6b14. I leave this as a CW answer.)\r\n\r\n  [1]: https://stackoverflow.com/users/40342/joachim-sauer","title":"Determine if a java application is in debug mode in Eclipse","body":"<p>If you are setting the debug level from your own program, may be a line like:</p>\n\n<pre><code>public static final boolean DEBUG_MODE = System.getProperty(\"java.vm.info\", \"\").contains(\"sharing\");\n</code></pre>\n\n<p>would do the trick.</p>\n\n<p>Just tested it in eclipse3.5:</p>\n\n<pre><code>package test;\n\npublic class Test\n{\n\n    /**\n     * @param args\n     */\n    public static void main(String[] args)\n    {\n        System.out.println(System.getProperty(\"java.vm.info\", \"\"));\n    }\n\n}\n</code></pre>\n\n<p>will display:</p>\n\n<pre><code>mixed mode, sharing\n</code></pre>\n\n<p>if launched without debug</p>\n\n<pre><code>mixed mode\n</code></pre>\n\n<p>if executed with debug launcher</p>\n\n<hr>\n\n<p><a href=\"https://stackoverflow.com/users/40342/joachim-sauer\">Joachim Sauer</a> comments:</p>\n\n<p>This is highly system depending.<br>\nI assume the \"sharing\" indicates that cross-VM class-sharing is active.<br>\nThis is a very new feature and is only available on some platforms.<br>\nFurthermore there can be many possible reasons to en- or disable it, so I wouldn't use this for debug-mode detection.</p>\n\n<p>(Note: I tested it with the latest jdk1.6b14. I leave this as a CW answer.)</p>\n"},{"tags":[],"owner":{"account_id":40190,"reputation":18652,"user_id":116388,"accept_rate":96,"display_name":"Manuel Selva"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1247225954,"creation_date":1247225954,"answer_id":1109062,"question_id":1109019,"body_markdown":"Have a look here: \r\n\r\n[http://wiki.eclipse.org/FAQ_How_do_I_use_the_platform_debug_tracing_facility%3F][1]\r\n\r\nMoreover, I think you can&#39;t know if your app is run in debug mode. The only thing you can do is to pass an argument to your JVM when you debug.\r\n\r\nManu\r\n\r\n\r\n  [1]: http://wiki.eclipse.org/FAQ_How_do_I_use_the_platform_debug_tracing_facility%3F","title":"Determine if a java application is in debug mode in Eclipse","body":"<p>Have a look here: </p>\n\n<p><a href=\"http://wiki.eclipse.org/FAQ_How_do_I_use_the_platform_debug_tracing_facility%3F\" rel=\"nofollow noreferrer\">http://wiki.eclipse.org/FAQ_How_do_I_use_the_platform_debug_tracing_facility%3F</a></p>\n\n<p>Moreover, I think you can't know if your app is run in debug mode. The only thing you can do is to pass an argument to your JVM when you debug.</p>\n\n<p>Manu</p>\n"},{"tags":[],"owner":{"account_id":12262,"reputation":103374,"user_id":24054,"accept_rate":86,"display_name":"kgiannakakis"},"down_vote_count":0,"up_vote_count":21,"is_accepted":true,"score":21,"last_activity_date":1558968978,"creation_date":1247225982,"answer_id":1109063,"question_id":1109019,"body_markdown":"You could modify the Debug Configuration. For example add a special VM argument only in the Debug Configuration. You can use `System.getProperties()` to read the supplied arguments.\r\n\r\nEven better, modify the configurations (Run and Debug) to load a different logging configuration file. It isn&#39;t good if you need to write code to determine the logging level. This should only be a matter of configuration.","title":"Determine if a java application is in debug mode in Eclipse","body":"<p>You could modify the Debug Configuration. For example add a special VM argument only in the Debug Configuration. You can use <code>System.getProperties()</code> to read the supplied arguments.</p>\n\n<p>Even better, modify the configurations (Run and Debug) to load a different logging configuration file. It isn't good if you need to write code to determine the logging level. This should only be a matter of configuration.</p>\n"},{"tags":[],"owner":{"account_id":32045,"reputation":26603,"user_id":88442,"accept_rate":54,"display_name":"J-16 SDiZ"},"down_vote_count":3,"up_vote_count":8,"is_accepted":false,"score":5,"last_activity_date":1537338809,"creation_date":1247226063,"answer_id":1109071,"question_id":1109019,"body_markdown":"Have you tried add a vm argument in the eclipse run config?\r\n\r\nPass this as a VM Argument\r\n\r\n    -Ddebug=true\r\n\r\nthen you can do `Boolean.getBoolean(&quot;debug&quot;)` to check this.","title":"Determine if a java application is in debug mode in Eclipse","body":"<p>Have you tried add a vm argument in the eclipse run config?</p>\n\n<p>Pass this as a VM Argument</p>\n\n<pre><code>-Ddebug=true\n</code></pre>\n\n<p>then you can do <code>Boolean.getBoolean(\"debug\")</code> to check this.</p>\n"},{"tags":[],"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1405105839,"creation_date":1247226825,"answer_id":1109116,"question_id":1109019,"body_markdown":"There is not an officially sanctioned way to reliably determine if any given JVM is in debug mode from inside the JVM itself, and relying on artifacts will just break your code some time in the future.\r\n\r\nYou will therefore need to introduce a methology yourself.  Suggestions:\r\n\r\n * A system property.\r\n * An environment variable (shell variable like $HOME or %HOME%)\r\n * Ask the JVM about the physical location of a given resource - http://www.exampledepot.com/egs/java.lang/ClassOrigin.html - and based on it, make your decision (does the path contain the word &quot;debug&quot;?  is it inside a jar or an unpacked class file? etc).\r\n * JNDI\r\n * The existance or content of a particular resource.\r\n","title":"Determine if a java application is in debug mode in Eclipse","body":"<p>There is not an officially sanctioned way to reliably determine if any given JVM is in debug mode from inside the JVM itself, and relying on artifacts will just break your code some time in the future.</p>\n\n<p>You will therefore need to introduce a methology yourself.  Suggestions:</p>\n\n<ul>\n<li>A system property.</li>\n<li>An environment variable (shell variable like $HOME or %HOME%)</li>\n<li>Ask the JVM about the physical location of a given resource - <a href=\"http://www.exampledepot.com/egs/java.lang/ClassOrigin.html\" rel=\"nofollow noreferrer\">http://www.exampledepot.com/egs/java.lang/ClassOrigin.html</a> - and based on it, make your decision (does the path contain the word \"debug\"?  is it inside a jar or an unpacked class file? etc).</li>\n<li>JNDI</li>\n<li>The existance or content of a particular resource.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":97802,"reputation":8416,"user_id":265107,"accept_rate":97,"display_name":"topgun_ivard"},"down_vote_count":0,"up_vote_count":67,"is_accepted":false,"score":67,"last_activity_date":1672845121,"creation_date":1311883793,"answer_id":6865049,"question_id":1109019,"body_markdown":"Found the answer on [how-to-find-out-if-debug-mode-is-enabled][1]\r\n\r\n    boolean isDebug = java.lang.management.ManagementFactory.getRuntimeMXBean().\r\n        getInputArguments().toString().contains(&quot;-agentlib:jdwp&quot;);\r\n\r\nThis will check if the [Java Debug Wire Protocol][2] agent is used.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/3776204/how-to-find-out-if-debug-mode-is-enabled\r\n  [2]: http://download.oracle.com/javase/1.5.0/docs/guide/jpda/jdwp-spec.html","title":"Determine if a java application is in debug mode in Eclipse","body":"<p>Found the answer on <a href=\"https://stackoverflow.com/questions/3776204/how-to-find-out-if-debug-mode-is-enabled\">how-to-find-out-if-debug-mode-is-enabled</a></p>\n<pre><code>boolean isDebug = java.lang.management.ManagementFactory.getRuntimeMXBean().\n    getInputArguments().toString().contains(&quot;-agentlib:jdwp&quot;);\n</code></pre>\n<p>This will check if the <a href=\"http://download.oracle.com/javase/1.5.0/docs/guide/jpda/jdwp-spec.html\" rel=\"nofollow noreferrer\">Java Debug Wire Protocol</a> agent is used.</p>\n"},{"tags":[],"owner":{"account_id":316252,"reputation":1218,"user_id":632331,"display_name":"radzimir"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1603269105,"creation_date":1603269105,"answer_id":64459736,"question_id":1109019,"body_markdown":"If using socket (e.g. 9999) you can call netstat to check if connection was established:\r\n\r\n    Process p = new ProcessBuilder(&quot;netstat&quot;, &quot;-n&quot;).start();\r\n    String stdout = IOUtils.toString(p.getInputStream(), Charset.defaultCharset());\r\n\r\nThen scan in stdout for 127.0.0.1:9999.*ESTABLISHED\r\n\r\n","title":"Determine if a java application is in debug mode in Eclipse","body":"<p>If using socket (e.g. 9999) you can call netstat to check if connection was established:</p>\n<pre><code>Process p = new ProcessBuilder(&quot;netstat&quot;, &quot;-n&quot;).start();\nString stdout = IOUtils.toString(p.getInputStream(), Charset.defaultCharset());\n</code></pre>\n<p>Then scan in stdout for 127.0.0.1:9999.*ESTABLISHED</p>\n"}],"owner":{"account_id":15880,"reputation":6679,"user_id":34009,"accept_rate":92,"display_name":"Serxipc"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46941,"favorite_count":0,"down_vote_count":1,"up_vote_count":48,"accepted_answer_id":1109063,"answer_count":7,"score":47,"last_activity_date":1672845121,"creation_date":1247225156,"question_id":1109019,"body_markdown":"I want to change the logging level depending if I&#39;m debbugging or not, but I can&#39;t find a code snippet to check if the application is running in debug mode.\r\n\r\nI&#39;m using eclipse to debug the application, so if the solution only works within Eclipse it will be fine.","title":"Determine if a java application is in debug mode in Eclipse","body":"<p>I want to change the logging level depending if I'm debbugging or not, but I can't find a code snippet to check if the application is running in debug mode.</p>\n\n<p>I'm using eclipse to debug the application, so if the solution only works within Eclipse it will be fine.</p>\n"},{"tags":["java","graphics","processing"],"answers":[{"tags":[],"owner":{"account_id":7717241,"reputation":3149,"user_id":5844572,"display_name":"laancelot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672784440,"creation_date":1672784440,"answer_id":74999209,"question_id":74988591,"body_markdown":"You&#39;re doing good so far. The only part you missed is that you want to change the food&#39;s color *when you create some new food*. So... you just have to take this part of the `setup()` method:\r\n\r\n```\r\n  r = (int)random(255);\r\n  g = (int)random(255);\r\n  b = (int)random(255);\r\n```\r\n\r\nand move it in the `newFood()` method.\r\n\r\nHope this helps. Have fun!","title":"How to change color automatically in processing.exe?","body":"<p>You're doing good so far. The only part you missed is that you want to change the food's color <em>when you create some new food</em>. So... you just have to take this part of the <code>setup()</code> method:</p>\n<pre><code>  r = (int)random(255);\n  g = (int)random(255);\n  b = (int)random(255);\n</code></pre>\n<p>and move it in the <code>newFood()</code> method.</p>\n<p>Hope this helps. Have fun!</p>\n"}],"owner":{"account_id":27416525,"reputation":1,"user_id":20915590,"display_name":"AsuRaassth"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672844978,"creation_date":1672712962,"question_id":74988591,"body_markdown":"I currently learned about processing.exe. I&#39;ve made a snake game in processing and I want to modify it. What I want is every time the snake eats food, the food that is moving randomly also gets given random colors.\r\nhere&#39;s my code:\r\n\r\n\r\n```\r\nsnake s;\r\nint grid = 15;\r\nPVector food;\r\nint r;\r\nint g;\r\nint b;\r\nint warna;\r\n\r\nvoid setup() {\r\n  size(600, 600);\r\n  s = new snake();\r\n  food = new PVector();\r\n  r = (int)random(255);\r\n  g = (int)random(255);\r\n  b = (int)random(255);\r\n  frameRate(15);\r\n  newFood();\r\n}\r\n\r\n\r\nvoid draw() {\r\n  background(0);\r\n\r\n  s.showScore();\r\n  s.display();\r\n  if (s.gameOver()) {\r\n    background(0);\r\n    textAlign(LEFT);\r\n    textSize(25);\r\n    fill(255);\r\n    text(&quot;Game Over&quot;, 10, 10, width - 20, 50);\r\n    noLoop();\r\n  }\r\n  if (s.eat(food)) {\r\n    newFood();\r\n  }\r\n  s.move();\r\n  \r\n  fill (r, g, b);\r\n  rect (food.x, food.y, grid, grid);\r\n  \r\n}\r\n\r\nvoid newFood() {\r\n\r\n  food.x = floor(random(width));\r\n  food.y = floor(random(height));\r\n  food.x = floor(food.x/grid) * grid;\r\n  food.y = floor(food.y/grid) * grid;\r\n  \r\n  if (food.x == floor(random(width)) &amp;&amp; food.y == floor(random(height))){\r\n    fill (r = (int)random(255), g = (int)random(255), b = (int)random(255));\r\n    rect( food.x, food.y, grid, grid);\r\n    \r\n  }\r\n \r\n  \r\n}\r\n\r\nvoid keyPressed() {\r\n  if (keyCode == UP) {\r\n    s.arah(0, -1);\r\n  } else if (keyCode == DOWN) {\r\n    s.arah(0, 1);\r\n  } else if (keyCode == RIGHT) {\r\n    s.arah(1, 0);\r\n  } else if (keyCode == LEFT) {\r\n    s.arah(-1, 0);\r\n  }\r\n}\r\n\r\n\r\nAnd this are the snake :\r\n\r\n\r\n\r\nclass snake {\r\n  float x = 0;\r\n  float y = 0;\r\n  float xspd = 1;\r\n  float yspd = 0;\r\n  int panjang = 0;\r\n  ArrayList&lt;PVector&gt; body =  new ArrayList&lt;PVector&gt;();\r\n\r\n  snake() {\r\n  }\r\n\r\n  boolean eat(PVector pos) {\r\n    float d = dist(x, y, pos.x, pos.y);\r\n    if (d &lt; 1) {\r\n      panjang++;\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  void arah(float x, float y) {\r\n    xspd = x;\r\n    yspd = y;\r\n  }\r\n\r\n  boolean gameOver() {\r\n    for (int i = 0; i &lt; body.size(); i++) {\r\n      PVector pos = body.get(i);\r\n      float d = dist(x, y, pos.x, pos.y);\r\n      if (d &lt; 1) {\r\n        panjang = 0;\r\n        body.clear();\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n\r\n  void move() {\r\n    if (panjang &gt; 0) {\r\n      if (panjang == body.size() &amp;&amp; !body.isEmpty()) {\r\n        body.remove(0);\r\n      }\r\n      body.add(new PVector(x, y));\r\n    }\r\n\r\n    x = x + xspd*grid;\r\n    y = y + yspd*grid;\r\n\r\n    x = (x + width) % width;\r\n    y = (y + height) % height;\r\n  }\r\n\r\n  void display() {\r\n    noStroke();\r\n    fill(255);\r\n    for (PVector bagi : body) {\r\n      rect(bagi.x, bagi.y, grid, grid);\r\n    }\r\n    rect(x, y, grid, grid);\r\n  }\r\n\r\n  void showScore() {\r\n    textAlign(LEFT);\r\n    textSize(25);\r\n    fill(255);\r\n    text(&quot;Score: &quot; + body.size(), 10, 10, width - 20, 50);\r\n  }\r\n}\r\n```\r\n\r\n\r\n \r\n\r\nI&#39;ve tried to change the color with declare r, g, b and assign a random color to it. But the food color doesn&#39;t seem to change every time the snake eats the food. Any suggestions on what I should do?","title":"How to change color automatically in processing.exe?","body":"<p>I currently learned about processing.exe. I've made a snake game in processing and I want to modify it. What I want is every time the snake eats food, the food that is moving randomly also gets given random colors.\nhere's my code:</p>\n<pre><code>snake s;\nint grid = 15;\nPVector food;\nint r;\nint g;\nint b;\nint warna;\n\nvoid setup() {\n  size(600, 600);\n  s = new snake();\n  food = new PVector();\n  r = (int)random(255);\n  g = (int)random(255);\n  b = (int)random(255);\n  frameRate(15);\n  newFood();\n}\n\n\nvoid draw() {\n  background(0);\n\n  s.showScore();\n  s.display();\n  if (s.gameOver()) {\n    background(0);\n    textAlign(LEFT);\n    textSize(25);\n    fill(255);\n    text(&quot;Game Over&quot;, 10, 10, width - 20, 50);\n    noLoop();\n  }\n  if (s.eat(food)) {\n    newFood();\n  }\n  s.move();\n  \n  fill (r, g, b);\n  rect (food.x, food.y, grid, grid);\n  \n}\n\nvoid newFood() {\n\n  food.x = floor(random(width));\n  food.y = floor(random(height));\n  food.x = floor(food.x/grid) * grid;\n  food.y = floor(food.y/grid) * grid;\n  \n  if (food.x == floor(random(width)) &amp;&amp; food.y == floor(random(height))){\n    fill (r = (int)random(255), g = (int)random(255), b = (int)random(255));\n    rect( food.x, food.y, grid, grid);\n    \n  }\n \n  \n}\n\nvoid keyPressed() {\n  if (keyCode == UP) {\n    s.arah(0, -1);\n  } else if (keyCode == DOWN) {\n    s.arah(0, 1);\n  } else if (keyCode == RIGHT) {\n    s.arah(1, 0);\n  } else if (keyCode == LEFT) {\n    s.arah(-1, 0);\n  }\n}\n\n\nAnd this are the snake :\n\n\n\nclass snake {\n  float x = 0;\n  float y = 0;\n  float xspd = 1;\n  float yspd = 0;\n  int panjang = 0;\n  ArrayList&lt;PVector&gt; body =  new ArrayList&lt;PVector&gt;();\n\n  snake() {\n  }\n\n  boolean eat(PVector pos) {\n    float d = dist(x, y, pos.x, pos.y);\n    if (d &lt; 1) {\n      panjang++;\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  void arah(float x, float y) {\n    xspd = x;\n    yspd = y;\n  }\n\n  boolean gameOver() {\n    for (int i = 0; i &lt; body.size(); i++) {\n      PVector pos = body.get(i);\n      float d = dist(x, y, pos.x, pos.y);\n      if (d &lt; 1) {\n        panjang = 0;\n        body.clear();\n        return true;\n      }\n    }\n    return false;\n  }\n\n\n  void move() {\n    if (panjang &gt; 0) {\n      if (panjang == body.size() &amp;&amp; !body.isEmpty()) {\n        body.remove(0);\n      }\n      body.add(new PVector(x, y));\n    }\n\n    x = x + xspd*grid;\n    y = y + yspd*grid;\n\n    x = (x + width) % width;\n    y = (y + height) % height;\n  }\n\n  void display() {\n    noStroke();\n    fill(255);\n    for (PVector bagi : body) {\n      rect(bagi.x, bagi.y, grid, grid);\n    }\n    rect(x, y, grid, grid);\n  }\n\n  void showScore() {\n    textAlign(LEFT);\n    textSize(25);\n    fill(255);\n    text(&quot;Score: &quot; + body.size(), 10, 10, width - 20, 50);\n  }\n}\n</code></pre>\n<p>I've tried to change the color with declare r, g, b and assign a random color to it. But the food color doesn't seem to change every time the snake eats the food. Any suggestions on what I should do?</p>\n"},{"tags":["java","spring","spring-boot","spring-data-rest","json-patch"],"answers":[{"tags":[],"owner":{"account_id":7655262,"reputation":7506,"user_id":5802417,"display_name":"Michael Gantman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1579012455,"creation_date":1579012455,"answer_id":59735889,"question_id":59735480,"body_markdown":"Here is a suggestion: Since Java 8 class `Date` should not be used, and it should be replaced with some implementation of [Temporal][1] interface. For example in your case [LocalDate][2]. And as far as Annotations for such property you&#39;d want to annotate it as follows:\r\n\r\n    @JsonFormat(shape = JsonFormat.Shape.STRING, pattern = &quot;yyyy-MM-dd&quot;)\r\n    public LocalDate myDate;\r\n\r\nFor details refer to the answer to this question: https://stackoverflow.com/questions/31627992/spring-data-jpa-zoneddatetime-format-for-json-serialization\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/time/temporal/Temporal.html\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html","title":"Why won&#39;t the date conversion work in Spring on requests with content-type json-patch?","body":"<p>Here is a suggestion: Since Java 8 class <code>Date</code> should not be used, and it should be replaced with some implementation of <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/temporal/Temporal.html\" rel=\"nofollow noreferrer\">Temporal</a> interface. For example in your case <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html\" rel=\"nofollow noreferrer\">LocalDate</a>. And as far as Annotations for such property you'd want to annotate it as follows:</p>\n\n<pre><code>@JsonFormat(shape = JsonFormat.Shape.STRING, pattern = \"yyyy-MM-dd\")\npublic LocalDate myDate;\n</code></pre>\n\n<p>For details refer to the answer to this question: <a href=\"https://stackoverflow.com/questions/31627992/spring-data-jpa-zoneddatetime-format-for-json-serialization\">Spring Data JPA - ZonedDateTime format for json serialization</a></p>\n"},{"tags":[],"owner":{"account_id":899009,"reputation":959,"user_id":935645,"accept_rate":100,"display_name":"ndvo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1607965519,"creation_date":1579799973,"answer_id":59884009,"question_id":59735480,"body_markdown":"**This is a workaround, not a proper solution.**\r\n\r\nI still don&#39;t understand why this happens, but here are two workarounds that can be helpful for the next poor soul who stumbles in this issue:\r\n\r\n**Use JSON Merge Patch**\r\n\r\nPatch requests with JSON Merge Patch have their date fields properly interpreted by SDR. If possible, simply switching from using JSON Patch to JSON Merge Patch will solve the situation.\r\n\r\n**Use a dummy field**\r\n\r\nI couldn&#39;t find a way to help Spring Data Rest to use a Converter when it receives a JSON Patch request, so creating a dummy String field in your DTO (or worst ― in your Entity) will fix the issue.\r\n\r\nIf you can&#39;t or don&#39;t want to avoid using [json-patch][1], this may be helpful.\r\n\r\nThis is not a beautiful solution and one might call you names upon seeing it, but it will work.\r\n\r\n\r\n\r\nConsider the following ― worst case scenario ― code :\r\n\r\n    @Entity\r\n    public class MyRenderVouz {\r\n        ...\r\n        @Column(name=&quot;important_date&quot;)\r\n        private LocalDate importantDate;\r\n        \r\n        @Transient\r\n        private String strChangeImportantDate;\r\n        public void setStrChangeImportantDate(String newDate) {\r\n            setImportantDate(LocaleDate.parse(newDate);\r\n        }\r\n        public String getStrChangeImportantDate() {\r\n            return this.importantDate;\r\n        }\r\n        ...\r\n    }\r\n\r\nIn your JSON-PATCH, simple use the strChangeImportantDate instead of importantDate, for example, consider you want to update the importantDate of the second instance of MyRendezVouz that belong to a calendar:\r\n\r\n    Calendar\r\n     L importantRenderVouz  []\r\n        L myRenderVouz\r\n        L myRenderVouz\r\n            L importantDate // target date\r\n        L myRenderVouz\r\n\r\nThen you can use:\r\n\r\n    [\r\n        {&quot;op&quot;:&quot;replace&quot;,&quot;path&quot;:&quot;importantRenderVouz/1/strImportantDate&quot;,&quot;value&quot;:&quot;2020-01-01&quot;},  \r\n    ]\r\n\r\n\r\n  [1]: https://www.rfc-editor.org/rfc/rfc6902","title":"Why won&#39;t the date conversion work in Spring on requests with content-type json-patch?","body":"<p><strong>This is a workaround, not a proper solution.</strong></p>\n<p>I still don't understand why this happens, but here are two workarounds that can be helpful for the next poor soul who stumbles in this issue:</p>\n<p><strong>Use JSON Merge Patch</strong></p>\n<p>Patch requests with JSON Merge Patch have their date fields properly interpreted by SDR. If possible, simply switching from using JSON Patch to JSON Merge Patch will solve the situation.</p>\n<p><strong>Use a dummy field</strong></p>\n<p>I couldn't find a way to help Spring Data Rest to use a Converter when it receives a JSON Patch request, so creating a dummy String field in your DTO (or worst ― in your Entity) will fix the issue.</p>\n<p>If you can't or don't want to avoid using <a href=\"https://www.rfc-editor.org/rfc/rfc6902\" rel=\"nofollow noreferrer\">json-patch</a>, this may be helpful.</p>\n<p>This is not a beautiful solution and one might call you names upon seeing it, but it will work.</p>\n<p>Consider the following ― worst case scenario ― code :</p>\n<pre><code>@Entity\npublic class MyRenderVouz {\n    ...\n    @Column(name=&quot;important_date&quot;)\n    private LocalDate importantDate;\n    \n    @Transient\n    private String strChangeImportantDate;\n    public void setStrChangeImportantDate(String newDate) {\n        setImportantDate(LocaleDate.parse(newDate);\n    }\n    public String getStrChangeImportantDate() {\n        return this.importantDate;\n    }\n    ...\n}\n</code></pre>\n<p>In your JSON-PATCH, simple use the strChangeImportantDate instead of importantDate, for example, consider you want to update the importantDate of the second instance of MyRendezVouz that belong to a calendar:</p>\n<pre><code>Calendar\n L importantRenderVouz  []\n    L myRenderVouz\n    L myRenderVouz\n        L importantDate // target date\n    L myRenderVouz\n</code></pre>\n<p>Then you can use:</p>\n<pre><code>[\n    {&quot;op&quot;:&quot;replace&quot;,&quot;path&quot;:&quot;importantRenderVouz/1/strImportantDate&quot;,&quot;value&quot;:&quot;2020-01-01&quot;},  \n]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16351912,"reputation":125,"user_id":11810194,"display_name":"andy489"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672844780,"creation_date":1672844780,"answer_id":75007387,"question_id":59735480,"body_markdown":"**What I do when I have to perform patch request for an Entity with LocalDateTime attribute**:\r\n\r\nLets for clarity say that your Entity having attribute LocalDateTime date is modeled with an Event.class:\r\n\r\n```java\r\n@NoArgsConstructor\r\n@Getter\r\n@Setter\r\n@Entity(name = &quot;events&quot;)\r\n...\r\npublic class Event {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long eventId;\r\n\r\n    ...\r\n\r\n    @Column(nullable = false)\r\n    private LocalDateTime date;\r\n\r\n    ...\r\n```\r\n\r\n**1)** Se externally the LocalDateTime format pattern in application.properties file:\r\n\r\n```\r\nconfig.datetime.format.pattern=yyyy-MM-dd HH:mm\r\n```\r\n\r\n**2)** Create a class AppConfig.class (or something like that) to extract the value from the application.properties file:\r\n\r\n```java \r\n@Configuration\r\npublic class AppConfig {\r\n    @Value(&quot;${config.datetime.format.pattern}&quot;)\r\n    private String formatPattern;\r\n\r\n    public DateTimeFormatter getDateTimeFormatter(){\r\n        return DateTimeFormatter.ofPattern(formatPattern);\r\n    }\r\n}\r\n```\r\n\r\n**3)** Add the AppConfig dependency to your service class:\r\n\r\n```java\r\n@Service\r\npublic class EventService {\r\n    private final EventRepository eventRepo;\r\n    private final EventDtoMapper eventDtoMapper;\r\n    private final AppConfig appConfig;\r\n    ...\r\n\r\n    @Autowired\r\n    public EventService(EventRepository eventRepo, EventDtoMapper eventDtoMapper, AppConfig appConfig, ...) {\r\n        this.eventRepo = eventRepo;\r\n        this.eventDtoMapper = eventDtoMapper;\r\n        this.appConfig = appConfig;\r\n        ...\r\n    }\r\n```\r\n\r\n**4)** Write the service code for the function that will do the partial update:\r\n\r\n```java\r\n public EventDtoForCreate updatePartially(Long id, Map&lt;String, String&gt; fields) {\r\n        Optional&lt;Event&gt; found = eventRepo.findById(id);\r\n\r\n        if (found.isEmpty()) {\r\n            // custom exception\r\n            throw new ResourceNotFoundException(&quot;Failed to find event&quot;);\r\n        }\r\n\r\n        fields.forEach((key, value) -&gt; {\r\n            Field field = ReflectionUtils.findField(Event.class, key);\r\n            if (field != null) {\r\n                field.setAccessible(true);\r\n                if (field.getAnnotatedType().getType().equals(LocalDateTime.class)) {\r\n                    ReflectionUtils.setField(field, found.get(), LocalDateTime.parse(value, appConfig.getDateTimeFormatter()));\r\n                } else {\r\n                    ReflectionUtils.setField(field, found.get(), value);\r\n                }\r\n            }\r\n        });\r\n\r\n        return eventDtoMapper.toDtoCreate(eventRepo.save(found.get()));\r\n    }\r\n```\r\n\r\n**5)** Finally, create the controller for the patch request:\r\n\r\n```java\r\n    @PatchMapping(\r\n            value = &quot;/{id}&quot;,\r\n            produces = {MediaType.APPLICATION_JSON_VALUE}\r\n    )\r\n    public ResponseEntity&lt;EventDtoCreate&gt; updatePartially(\r\n            @PathVariable(name = &quot;id&quot;) Long userId,\r\n            @RequestBody Map&lt;String, String&gt; fields\r\n    ) {\r\n        return ResponseEntity.ok(eventService.updatePartially(userId, fields));\r\n    }\r\n```\r\n\r\n\r\n","title":"Why won&#39;t the date conversion work in Spring on requests with content-type json-patch?","body":"<p><strong>What I do when I have to perform patch request for an Entity with LocalDateTime attribute</strong>:</p>\n<p>Lets for clarity say that your Entity having attribute LocalDateTime date is modeled with an Event.class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@NoArgsConstructor\n@Getter\n@Setter\n@Entity(name = &quot;events&quot;)\n...\npublic class Event {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long eventId;\n\n    ...\n\n    @Column(nullable = false)\n    private LocalDateTime date;\n\n    ...\n</code></pre>\n<p><strong>1)</strong> Se externally the LocalDateTime format pattern in application.properties file:</p>\n<pre><code>config.datetime.format.pattern=yyyy-MM-dd HH:mm\n</code></pre>\n<p><strong>2)</strong> Create a class AppConfig.class (or something like that) to extract the value from the application.properties file:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class AppConfig {\n    @Value(&quot;${config.datetime.format.pattern}&quot;)\n    private String formatPattern;\n\n    public DateTimeFormatter getDateTimeFormatter(){\n        return DateTimeFormatter.ofPattern(formatPattern);\n    }\n}\n</code></pre>\n<p><strong>3)</strong> Add the AppConfig dependency to your service class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class EventService {\n    private final EventRepository eventRepo;\n    private final EventDtoMapper eventDtoMapper;\n    private final AppConfig appConfig;\n    ...\n\n    @Autowired\n    public EventService(EventRepository eventRepo, EventDtoMapper eventDtoMapper, AppConfig appConfig, ...) {\n        this.eventRepo = eventRepo;\n        this.eventDtoMapper = eventDtoMapper;\n        this.appConfig = appConfig;\n        ...\n    }\n</code></pre>\n<p><strong>4)</strong> Write the service code for the function that will do the partial update:</p>\n<pre class=\"lang-java prettyprint-override\"><code> public EventDtoForCreate updatePartially(Long id, Map&lt;String, String&gt; fields) {\n        Optional&lt;Event&gt; found = eventRepo.findById(id);\n\n        if (found.isEmpty()) {\n            // custom exception\n            throw new ResourceNotFoundException(&quot;Failed to find event&quot;);\n        }\n\n        fields.forEach((key, value) -&gt; {\n            Field field = ReflectionUtils.findField(Event.class, key);\n            if (field != null) {\n                field.setAccessible(true);\n                if (field.getAnnotatedType().getType().equals(LocalDateTime.class)) {\n                    ReflectionUtils.setField(field, found.get(), LocalDateTime.parse(value, appConfig.getDateTimeFormatter()));\n                } else {\n                    ReflectionUtils.setField(field, found.get(), value);\n                }\n            }\n        });\n\n        return eventDtoMapper.toDtoCreate(eventRepo.save(found.get()));\n    }\n</code></pre>\n<p><strong>5)</strong> Finally, create the controller for the patch request:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @PatchMapping(\n            value = &quot;/{id}&quot;,\n            produces = {MediaType.APPLICATION_JSON_VALUE}\n    )\n    public ResponseEntity&lt;EventDtoCreate&gt; updatePartially(\n            @PathVariable(name = &quot;id&quot;) Long userId,\n            @RequestBody Map&lt;String, String&gt; fields\n    ) {\n        return ResponseEntity.ok(eventService.updatePartially(userId, fields));\n    }\n</code></pre>\n"}],"owner":{"account_id":899009,"reputation":959,"user_id":935645,"accept_rate":100,"display_name":"ndvo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":626,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1672844780,"creation_date":1579011020,"question_id":59735480,"body_markdown":"I am getting a &quot;*Failed to convert from type [java.lang.String] to type [@javax.persistence.Column java.util.Date] for value &#39;1999-12-20&#39;*&quot; when I use json-patch, but I do not get this error with PUT, POST or event PATCH requests with json-merge-patch;\r\n\r\n\r\nI am using Spring Boot version 2.1.8, with Spring Data Rest.\r\n\r\n\r\nI have an entity with a field similar to the following (only the name of the variable and column are different):\r\n\r\n\r\n    @Column(name = &quot;mydate&quot;)\r\n    private Date mydate;\r\n\r\n\r\nThe field is updated as expected when I issue a JSON merge patch request with the body:\r\n\r\n    {&quot;mydate&quot;: &quot;1999-12-20&quot;}\r\n\r\nIt is also updated correctly with POST and PUT requests.\r\n\r\nHowever, if I issue a json-patch with the following command (and Content-Type application/json-patch+json):\r\n\r\n    [{&quot;op&quot;:&quot;replace&quot;,&quot;path&quot;:&quot;mydate&quot;,&quot;value&quot;:&quot;2018-08-09&quot;}]\r\n\r\nI get the error mentioned above.\r\n\r\n\r\nI don&#39;t actually need a workaround for this, as I am using the JSON Merge Patch for that.\r\n\r\nI&#39;d like to understand how to make the conversion that works for the other requests work for json-patch as well.\r\n","title":"Why won&#39;t the date conversion work in Spring on requests with content-type json-patch?","body":"<p>I am getting a \"<em>Failed to convert from type [java.lang.String] to type [@javax.persistence.Column java.util.Date] for value '1999-12-20'</em>\" when I use json-patch, but I do not get this error with PUT, POST or event PATCH requests with json-merge-patch;</p>\n\n<p>I am using Spring Boot version 2.1.8, with Spring Data Rest.</p>\n\n<p>I have an entity with a field similar to the following (only the name of the variable and column are different):</p>\n\n<pre><code>@Column(name = \"mydate\")\nprivate Date mydate;\n</code></pre>\n\n<p>The field is updated as expected when I issue a JSON merge patch request with the body:</p>\n\n<pre><code>{\"mydate\": \"1999-12-20\"}\n</code></pre>\n\n<p>It is also updated correctly with POST and PUT requests.</p>\n\n<p>However, if I issue a json-patch with the following command (and Content-Type application/json-patch+json):</p>\n\n<pre><code>[{\"op\":\"replace\",\"path\":\"mydate\",\"value\":\"2018-08-09\"}]\n</code></pre>\n\n<p>I get the error mentioned above.</p>\n\n<p>I don't actually need a workaround for this, as I am using the JSON Merge Patch for that.</p>\n\n<p>I'd like to understand how to make the conversion that works for the other requests work for json-patch as well.</p>\n"},{"tags":["java","reactive","spring-webclient"],"comments":[{"owner":{"account_id":6605,"reputation":61212,"user_id":11182,"display_name":"Lex Li"},"score":0,"creation_date":1672797533,"post_id":75000090,"comment_id":132353319,"body_markdown":"Please read every tags before using them. For example, the mono tag is not for your Java question.","body":"Please read every tags before using them. For example, the mono tag is not for your Java question."}],"answers":[{"tags":[],"owner":{"account_id":19395247,"reputation":3208,"user_id":14183092,"display_name":"kerbermeister"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672844753,"creation_date":1672844343,"answer_id":75007285,"question_id":75000090,"body_markdown":"It is not clear without seeing your entire project, because I cannot see where you actually call your `callListlyService()` method.\r\nBut I can see you&#39;re calling it from Main thread.\r\n\r\nI think you misunderstood the reactive paradigm.\r\nAs soon as you call `subscribe()` on reactive chain you should know that within the chain may happen the thread switching (depending on operators on your chain/some reactive API that may do thread switching)\r\nIn case of WebClient the `retrive()` subscribes from netty threads by default and the next executions will happen on `reactor-%s` thread\r\n\r\nSo when you call your service method, it makes subsribe() and returns immediately showing you log `&quot;Exiting service call to Listly&quot;`\r\nand your method returns immediately, so you cannot see result of your call.\r\nJust to see your result you can call `block()` on your reactive chain, that will force your calling thread to block and waiting the response from your WebClient. But this approach is not recommended in reactor because you&#39;re losing benefits from reactive-way. In real cases you should return `Publisher&lt;&gt;` from your method and , for example, subscribe by yourself where you need/use Spring WebFlux returning Publishers in your controller methods leaving subsribe process to WebFlux\r\n\r\nOne another way just for experimanetal purposes: you can place `Thread.sleep(n)` in the end of your test, where n - time in millis for your Main thread to wait. The time should be greater than your actual web-call","title":"Not able to output WebClient call results","body":"<p>It is not clear without seeing your entire project, because I cannot see where you actually call your <code>callListlyService()</code> method.\nBut I can see you're calling it from Main thread.</p>\n<p>I think you misunderstood the reactive paradigm.\nAs soon as you call <code>subscribe()</code> on reactive chain you should know that within the chain may happen the thread switching (depending on operators on your chain/some reactive API that may do thread switching)\nIn case of WebClient the <code>retrive()</code> subscribes from netty threads by default and the next executions will happen on <code>reactor-%s</code> thread</p>\n<p>So when you call your service method, it makes subsribe() and returns immediately showing you log <code>&quot;Exiting service call to Listly&quot;</code>\nand your method returns immediately, so you cannot see result of your call.\nJust to see your result you can call <code>block()</code> on your reactive chain, that will force your calling thread to block and waiting the response from your WebClient. But this approach is not recommended in reactor because you're losing benefits from reactive-way. In real cases you should return <code>Publisher&lt;&gt;</code> from your method and , for example, subscribe by yourself where you need/use Spring WebFlux returning Publishers in your controller methods leaving subsribe process to WebFlux</p>\n<p>One another way just for experimanetal purposes: you can place <code>Thread.sleep(n)</code> in the end of your test, where n - time in millis for your Main thread to wait. The time should be greater than your actual web-call</p>\n"}],"owner":{"account_id":21936575,"reputation":1,"user_id":16217711,"display_name":"Sonik"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":345,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1672844753,"creation_date":1672794918,"question_id":75000090,"body_markdown":"I&#39;m learning more about using Spring Webflux and experimenting with testing a simple async webservice call.  I&#39;ve looked at several examples and I can&#39;t see what I&#39;m doing wrong.  I have a service that makes a call to a third party API and all I want to do is output the Json response returned.  I&#39;m not converting the response into model objects just yet but this will be the next step if I can get basics working first.  The code doesn&#39;t log any of the output of the webservice call and I&#39;ve also tried sending to System.out::println and that also doesn&#39;t work.  The output in the test only includes the following log output\r\n\r\n023-01-04 00:53:46.622  INFO 19938 --- \\[           main\\] c.r.io.service.impl.ListlyServiceImpl    : Starting call to Listly API\r\n\r\n2023-01-04 00:53:52.395  INFO 19938 --- \\[           main\\] c.r.io.service.impl.ListlyServiceImpl    : Exiting service call to Listly\r\n\r\nHowever , when I put a break point on \r\n\r\n```\r\nlistlyResponse.subscribe(listlyResp -&gt;\r\n                log.info(listlyResp));\r\n```\r\n\r\nI can actually see the correct contents of the response from the web service call.  Any ideas on what I&#39;m doing wrong?  This is the code\r\n\r\n```\r\n@Service\r\npublic class ListlyServiceImpl implements ListlyService {\r\n\r\n    private final static Logger log = LoggerFactory.getLogger(ListlyServiceImpl.class);\r\n    private final String baseUrl = &quot;https://list.ly/api/v4&quot;;\r\n\r\n    @Override\r\n    public void callListlyService(String searchUrl) {\r\n        if (searchUrl == null) {\r\n            throw new RuntimeException(&quot;Search URL cannot be null&quot;);\r\n        }\r\n        log.info(&quot;Starting call to Listly API&quot;);\r\n        Mono&lt;String&gt; listlyResponse = WebClient.create(baseUrl)\r\n            .get()\r\n            .uri(uriBuilder -&gt; uriBuilder\r\n                    .path(&quot;/meta&quot;)\r\n                    .queryParam(&quot;url&quot;,&quot;{url}&quot;)\r\n                    .build(searchUrl))\r\n            .retrieve()\r\n            .bodyToMono(String.class);\r\n\r\n        listlyResponse.subscribe(listlyResp -&gt;\r\n                log.info(listlyResp));\r\n\r\n//        listlyResponseFlux.subscribe(System.out::println);\r\n\r\n        log.info(&quot;Exiting service call to Listly&quot;);\r\n    }\r\n}\r\n```\r\n\r\nI&#39;m expecting to be able to output the contents of the web service call to the log output which is not working for some reason.","title":"Not able to output WebClient call results","body":"<p>I'm learning more about using Spring Webflux and experimenting with testing a simple async webservice call.  I've looked at several examples and I can't see what I'm doing wrong.  I have a service that makes a call to a third party API and all I want to do is output the Json response returned.  I'm not converting the response into model objects just yet but this will be the next step if I can get basics working first.  The code doesn't log any of the output of the webservice call and I've also tried sending to System.out::println and that also doesn't work.  The output in the test only includes the following log output</p>\n<p>023-01-04 00:53:46.622  INFO 19938 --- [           main] c.r.io.service.impl.ListlyServiceImpl    : Starting call to Listly API</p>\n<p>2023-01-04 00:53:52.395  INFO 19938 --- [           main] c.r.io.service.impl.ListlyServiceImpl    : Exiting service call to Listly</p>\n<p>However , when I put a break point on</p>\n<pre><code>listlyResponse.subscribe(listlyResp -&gt;\n                log.info(listlyResp));\n</code></pre>\n<p>I can actually see the correct contents of the response from the web service call.  Any ideas on what I'm doing wrong?  This is the code</p>\n<pre><code>@Service\npublic class ListlyServiceImpl implements ListlyService {\n\n    private final static Logger log = LoggerFactory.getLogger(ListlyServiceImpl.class);\n    private final String baseUrl = &quot;https://list.ly/api/v4&quot;;\n\n    @Override\n    public void callListlyService(String searchUrl) {\n        if (searchUrl == null) {\n            throw new RuntimeException(&quot;Search URL cannot be null&quot;);\n        }\n        log.info(&quot;Starting call to Listly API&quot;);\n        Mono&lt;String&gt; listlyResponse = WebClient.create(baseUrl)\n            .get()\n            .uri(uriBuilder -&gt; uriBuilder\n                    .path(&quot;/meta&quot;)\n                    .queryParam(&quot;url&quot;,&quot;{url}&quot;)\n                    .build(searchUrl))\n            .retrieve()\n            .bodyToMono(String.class);\n\n        listlyResponse.subscribe(listlyResp -&gt;\n                log.info(listlyResp));\n\n//        listlyResponseFlux.subscribe(System.out::println);\n\n        log.info(&quot;Exiting service call to Listly&quot;);\n    }\n}\n</code></pre>\n<p>I'm expecting to be able to output the contents of the web service call to the log output which is not working for some reason.</p>\n"},{"tags":["java","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":3089345,"reputation":2557,"user_id":2615824,"accept_rate":70,"display_name":"MGorgon"},"score":0,"creation_date":1558709750,"post_id":56294522,"comment_id":99202658,"body_markdown":"Do you require it to be transactional, I mean wait with commit until slow job finishes?","body":"Do you require it to be transactional, I mean wait with commit until slow job finishes?"},{"owner":{"account_id":3126746,"reputation":176,"user_id":2645468,"display_name":"Mattias Hermansson"},"score":0,"creation_date":1558710028,"post_id":56294522,"comment_id":99202769,"body_markdown":"The start date needs to be written to the database to mark the job as started, so that the same job is not executed twice.","body":"The start date needs to be written to the database to mark the job as started, so that the same job is not executed twice."},{"owner":{"account_id":3089345,"reputation":2557,"user_id":2615824,"accept_rate":70,"display_name":"MGorgon"},"score":0,"creation_date":1558710206,"post_id":56294522,"comment_id":99202863,"body_markdown":"Maybe it is worth to use an existing solution, ie. quartz?","body":"Maybe it is worth to use an existing solution, ie. quartz?"}],"answers":[{"tags":[],"owner":{"account_id":1550597,"reputation":8924,"user_id":1443084,"display_name":"Shailendra"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1672844569,"creation_date":1558708669,"answer_id":56294828,"question_id":56294522,"body_markdown":"Well -  non-blocking database IO is not possible in Java/JDBC world in a standard way .To put it simply - your Spring data repository would be eventually using JPA ORM Implementation ( likes of Hibernate) which in turn will use JDBC to interact with the database which is essentially blocking in nature. There is work being done on this currently by Oracle ([Asynchronous Database Access API][1] ) to provide a similar API as JDBC but non-blocking. They intend to propose this as a standard. Also there is an exciting and  parallel effort by Spring guys on this namely [R2DBC – Reactive Relational Database Connectivity][2]. They have actually integrated this with Spring data as well ([link][3]) so that may help you integrate in your solution. A good tutorial by Spring on this can be found [here][4].\r\n\r\nEDIT: As of 2022 Hibernate has [reactive][5] option as well \r\n\r\n\r\n  [1]: https://blogs.oracle.com/java/jdbc-next:-a-new-asynchronous-api-for-connecting-to-a-database\r\n  [2]: https://github.com/r2dbc\r\n  [3]: https://github.com/spring-projects/spring-data-r2dbc\r\n  [4]: https://spring.io/blog/2018/12/07/reactive-programming-and-relational-databases\r\n  [5]: https://hibernate.org/reactive/","title":"JPA Repositories and blocking I/O","body":"<p>Well -  non-blocking database IO is not possible in Java/JDBC world in a standard way .To put it simply - your Spring data repository would be eventually using JPA ORM Implementation ( likes of Hibernate) which in turn will use JDBC to interact with the database which is essentially blocking in nature. There is work being done on this currently by Oracle (<a href=\"https://blogs.oracle.com/java/jdbc-next:-a-new-asynchronous-api-for-connecting-to-a-database\" rel=\"nofollow noreferrer\">Asynchronous Database Access API</a> ) to provide a similar API as JDBC but non-blocking. They intend to propose this as a standard. Also there is an exciting and  parallel effort by Spring guys on this namely <a href=\"https://github.com/r2dbc\" rel=\"nofollow noreferrer\">R2DBC – Reactive Relational Database Connectivity</a>. They have actually integrated this with Spring data as well (<a href=\"https://github.com/spring-projects/spring-data-r2dbc\" rel=\"nofollow noreferrer\">link</a>) so that may help you integrate in your solution. A good tutorial by Spring on this can be found <a href=\"https://spring.io/blog/2018/12/07/reactive-programming-and-relational-databases\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>EDIT: As of 2022 Hibernate has <a href=\"https://hibernate.org/reactive/\" rel=\"nofollow noreferrer\">reactive</a> option as well</p>\n"},{"tags":[],"owner":{"account_id":9784322,"reputation":143,"user_id":7251133,"display_name":"Florian H."},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1558713855,"creation_date":1558712066,"answer_id":56295682,"question_id":56294522,"body_markdown":"I would suggest to write in the database using a separate [JTA transaction](https://docs.oracle.com/javaee/7/api/javax/transaction/Transactional.html). Do do so, define a methode like \r\n\r\n    @Transactional(Transactional.TxType.REQUIRES_NEW)\r\n    public void saveJobStart(final long someJobId) {\r\n        SomeJob someJob = mSomeJobRepository.findOne(someJobId);\r\n        someJob.setJobStarted(Instant.now());\r\n        mSomeJobRepository.saveAndFlush(someJob);\r\n    }\r\n\r\nOf course it is not quite the same. If `doActualjob()` fails, in your case, the database won&#39;t persist the start date. In my proposal, it will persist it. To compensate, you need to remove the start date in a `catch` bloc in _doSlowJob_, within a new transaction, and then re`throw` the exception.  ","title":"JPA Repositories and blocking I/O","body":"<p>I would suggest to write in the database using a separate <a href=\"https://docs.oracle.com/javaee/7/api/javax/transaction/Transactional.html\" rel=\"nofollow noreferrer\">JTA transaction</a>. Do do so, define a methode like </p>\n\n<pre><code>@Transactional(Transactional.TxType.REQUIRES_NEW)\npublic void saveJobStart(final long someJobId) {\n    SomeJob someJob = mSomeJobRepository.findOne(someJobId);\n    someJob.setJobStarted(Instant.now());\n    mSomeJobRepository.saveAndFlush(someJob);\n}\n</code></pre>\n\n<p>Of course it is not quite the same. If <code>doActualjob()</code> fails, in your case, the database won't persist the start date. In my proposal, it will persist it. To compensate, you need to remove the start date in a <code>catch</code> bloc in <em>doSlowJob</em>, within a new transaction, and then re<code>throw</code> the exception.  </p>\n"}],"owner":{"account_id":3126746,"reputation":176,"user_id":2645468,"display_name":"Mattias Hermansson"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2208,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":56294828,"answer_count":2,"score":4,"last_activity_date":1672844569,"creation_date":1558707533,"question_id":56294522,"body_markdown":"I&#39;m having a problem where I need to perform several slow HTTP requests on a separate thread after having written to the database using a JpaRepository. The problem is that `doActualJob()` blocks while waiting for a series of futures to resolve. This seems to prevent the underlying Hibernate session from closing, causing the application to run out of connections shortly after.\r\n\r\nHow do I write this function so the database connection isn&#39;t kept open while doing the blocking I/O? Is it even possible using JpaRepositories, or do I need to use a lower level API like EntityManager/SessionFactory?\r\n\r\n```java\r\n@Service\r\nclass SomeJobRunner {\r\n\r\n    private final SomeJobRepository mSomeJobRepository; //extends JpaRepository\r\n\r\n    @AutoWired\r\n    public SomeJobRunner(final SomeJobRepository someJobRepository) {\r\n        mSomeJobRepository = someJobRepository;\r\n    }\r\n\r\n    @Async\r\n    public void doSlowJob(final long someJobId) {\r\n        SomeJob someJob = mSomeJobRepository.findOne(someJobId);\r\n        someJob.setJobStarted(Instant.now());\r\n        mSomeJobRepository.saveAndFlush(someJob);\r\n\r\n        doActualjob(); // Synchronous job doing several requests using Unirest in series\r\n\r\n        someJob = mSomeJobRepository.findOne(someJobId);\r\n        someJob.setJobEnded(Instant.now());\r\n        mSomeJobRepository.saveAndFlush(someJob);\r\n}\r\n```","title":"JPA Repositories and blocking I/O","body":"<p>I'm having a problem where I need to perform several slow HTTP requests on a separate thread after having written to the database using a JpaRepository. The problem is that <code>doActualJob()</code> blocks while waiting for a series of futures to resolve. This seems to prevent the underlying Hibernate session from closing, causing the application to run out of connections shortly after.</p>\n\n<p>How do I write this function so the database connection isn't kept open while doing the blocking I/O? Is it even possible using JpaRepositories, or do I need to use a lower level API like EntityManager/SessionFactory?</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Service\nclass SomeJobRunner {\n\n    private final SomeJobRepository mSomeJobRepository; //extends JpaRepository\n\n    @AutoWired\n    public SomeJobRunner(final SomeJobRepository someJobRepository) {\n        mSomeJobRepository = someJobRepository;\n    }\n\n    @Async\n    public void doSlowJob(final long someJobId) {\n        SomeJob someJob = mSomeJobRepository.findOne(someJobId);\n        someJob.setJobStarted(Instant.now());\n        mSomeJobRepository.saveAndFlush(someJob);\n\n        doActualjob(); // Synchronous job doing several requests using Unirest in series\n\n        someJob = mSomeJobRepository.findOne(someJobId);\n        someJob.setJobEnded(Instant.now());\n        mSomeJobRepository.saveAndFlush(someJob);\n}\n</code></pre>\n"},{"tags":["java","spring","websocket","api-gateway","spring-cloud-gateway"],"owner":{"account_id":178914,"reputation":2104,"user_id":411186,"accept_rate":60,"display_name":"sajad"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":232,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1672844244,"creation_date":1672750934,"question_id":74993729,"body_markdown":"I have developed a Spring cloud API gateway and a WebSocket-based notification project which runs behind the API-Gateway. Here are the Yaml configurations of the API-Gateway:\r\n```yml\r\nspring:\r\n  main:\r\n    allow-bean-definition-overriding: true\r\n    web-application-type: reactive\r\n  security:\r\n    oauth2:\r\n      client:\r\n        registration:\r\n          login-client:\r\n            provider: uaa\r\n            client-id: ${CLIENT_ID}\r\n            client-secret: &quot;*******&quot;\r\n            authorization-grant-type: authorization_code\r\n            redirect-uri: &quot;${BACKEND_ROOT_ADDRESS}/login/oauth2/code/{registrationId}&quot;\r\n        provider:\r\n          uaa:\r\n            authorization-uri: ${AUTH_SERVER_DOMAIN}/cas/oauth2.0/authorize\r\n            token-uri: ${AUTH_SERVICE_INTERNAL_ADDRESS}/cas/oauth2.0/accessToken\r\n            user-info-uri: ${AUTH_SERVICE_INTERNAL_ADDRESS}/cas/oauth2.0/profile\r\n            user-name-attribute: id\r\n            user-info-authentication-method: form\r\n  cloud:\r\n    gateway:\r\n      globalcors:\r\n        add-to-simple-url-handler-mapping: true\r\n      default-filters:\r\n        - TokenRelay=\r\n        - RequestHashing=SHA-256\r\n      routes:\r\n        - id: notification\r\n          uri: lb://NOTIFICATION\r\n          predicates:\r\n            - Path=/notification/**\r\n          filters:\r\n            - RewritePath=/notification(?&lt;segment&gt;/?.*), $\\{segment}\r\n          metadata:\r\n            - response-timeout: 300000000\r\n            - connect-timeout: 300000000\r\neureka:\r\n  client:\r\n    serviceUrl:\r\n      defaultZone: http://discovery-service/eureka\r\n```\r\nWhen I connect to the notification service directly, without using API-Gateway, the connection remains active. Here is a sample URL I use for connecting to my service:\r\n```HTML\r\nws://my-company/notification/openConnection?the_client_id=42\r\n```\r\nHowever, when I use API-Gateway, it closes the connection after 30 seconds. Here is the log of my notification service that confirms the WebSocket connection is closed by receiving the TCP finish packet.\r\n```\r\n[p-nio-80-exec-2] o.a.t.websocket.server.WsFrameServer     : wsFrameServer.onDataAvailable\r\n[p-nio-80-exec-2] o.a.tomcat.util.net.SocketWrapperBase    : Socket: [org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper@67f46c3f:org.apache.tomcat.util.net.NioChannel@2a4e5a44:java.nio.channels.SocketChannel[connected local=/172.28.0.11:80 remote=/172.28.0.12:56006]], Read from buffer: [0]\r\n[p-nio-80-exec-2] org.apache.tomcat.util.net.NioEndpoint   : Socket: [org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper@67f46c3f:org.apache.tomcat.util.net.NioChannel@2a4e5a44:java.nio.channels.SocketChannel[connected local=/172.28.0.11:80 remote=/172.28.0.12:56006]], Read direct from socket: [6]\r\n[p-nio-80-exec-2] o.a.t.websocket.server.WsFrameServer     : Read [6] bytes into input buffer ready for processing\r\n[p-nio-80-exec-2] o.a.t.websocket.server.WsFrameServer     : WebSocket frame received. fin [true], rsv [0], OpCode [8], payload length [0]\r\n[p-nio-80-exec-2] s.w.s.h.LoggingWebSocketHandlerDecorator : StandardWebSocketSession[id=0df41ae3-ffc2-4d90-723c-88dacbfe11a3, uri=ws://da3a67eb76df/openConnection?party=42] closed with CloseStatus[code=1000, reason=null]\r\nafter close: 0df41ae3-ffc2-4d90-723c-88dacbfe11a3\r\n[p-nio-80-exec-2] o.apache.tomcat.util.threads.LimitLatch  : Counting down[http-nio-80-exec-2] latch=1\r\n[p-nio-80-exec-2] org.apache.tomcat.util.net.NioEndpoint   : Calling [org.apache.tomcat.util.net.NioEndpoint@11fe2371].closeSocket([org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper@67f46c3f:org.apache.tomcat.util.net.NioChannel@2a4e5a44:java.nio.channels.SocketChannel[connected local=/172.28.0.11:80 remote=/172.28.0.12:56006]])\r\n```\r\n\r\nAnd here is the log of API-Gateway at the moment it closes the websocket:\r\n```\r\n\r\n[or-http-epoll-7] r.n.http.client.HttpClientOperations     : [c66f9ad0-1, L:/172.28.0.12:58846 - R:1bc0b9f7e00d/172.28.0.11:80] Cancelling Websocket inbound. Closing Websocket\r\n[or-http-epoll-7] r.n.resources.PooledConnectionProvider   : [c66f9ad0-1, L:/172.28.0.12:58846 ! R:1bc0b9f7e00d/172.28.0.11:80] Channel closed, now: 0 active connections, 0 inactive connections and 0 pending acquire requests.\r\n[or-http-epoll-7] reactor.netty.ReactorNetty               : [c66f9ad0-1, L:/172.28.0.12:58846 ! R:1bc0b9f7e00d/172.28.0.11:80] Non Removed handler: reactor.left.httpAggregator, context: null, pipeline: DefaultChannelPipeline{(ws-decoder = io.netty.handler.codec.http.websocketx.WebSocket13FrameDecoder), (ws-encoder = io.netty.handler.codec.http.websocketx.WebSocket13FrameEncoder), (reactor.left.wsFrameAggregator = io.netty.handler.codec.http.websocketx.WebSocketFrameAggregator), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}\r\n[or-http-epoll-7] r.n.http.server.HttpServerOperations     : [b51c2362-1, L:/172.28.0.12:80 ! R:/172.28.0.1:33582] Cancelling Websocket inbound. Closing Websocket\r\n[or-http-epoll-7] r.n.r.DefaultPooledConnectionProvider    : [c66f9ad0, L:/172.28.0.12:58846 ! R:1bc0b9f7e00d/172.28.0.11:80] onStateChange(ws{uri=/openConnection?party=42, connection=PooledConnection{channel=[id: 0xc66f9ad0, L:/172.28.0.12:58846 ! R:1bc0b9f7e00d/172.28.0.11:80]}}, [response_completed])\r\n[or-http-epoll-7] r.n.r.DefaultPooledConnectionProvider    : [c66f9ad0, L:/172.28.0.12:58846 ! R:1bc0b9f7e00d/172.28.0.11:80] onStateChange(ws{uri=/openConnection?party=42, connection=PooledConnection{channel=[id: 0xc66f9ad0, L:/172.28.0.12:58846 ! R:1bc0b9f7e00d/172.28.0.11:80]}}, [disconnecting])\r\n\r\n```\r\n","title":"Spring cloud API gateway unexpectedly finishes TCP connections for WebSocket clients after 30 seconds","body":"<p>I have developed a Spring cloud API gateway and a WebSocket-based notification project which runs behind the API-Gateway. Here are the Yaml configurations of the API-Gateway:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>spring:\n  main:\n    allow-bean-definition-overriding: true\n    web-application-type: reactive\n  security:\n    oauth2:\n      client:\n        registration:\n          login-client:\n            provider: uaa\n            client-id: ${CLIENT_ID}\n            client-secret: &quot;*******&quot;\n            authorization-grant-type: authorization_code\n            redirect-uri: &quot;${BACKEND_ROOT_ADDRESS}/login/oauth2/code/{registrationId}&quot;\n        provider:\n          uaa:\n            authorization-uri: ${AUTH_SERVER_DOMAIN}/cas/oauth2.0/authorize\n            token-uri: ${AUTH_SERVICE_INTERNAL_ADDRESS}/cas/oauth2.0/accessToken\n            user-info-uri: ${AUTH_SERVICE_INTERNAL_ADDRESS}/cas/oauth2.0/profile\n            user-name-attribute: id\n            user-info-authentication-method: form\n  cloud:\n    gateway:\n      globalcors:\n        add-to-simple-url-handler-mapping: true\n      default-filters:\n        - TokenRelay=\n        - RequestHashing=SHA-256\n      routes:\n        - id: notification\n          uri: lb://NOTIFICATION\n          predicates:\n            - Path=/notification/**\n          filters:\n            - RewritePath=/notification(?&lt;segment&gt;/?.*), $\\{segment}\n          metadata:\n            - response-timeout: 300000000\n            - connect-timeout: 300000000\neureka:\n  client:\n    serviceUrl:\n      defaultZone: http://discovery-service/eureka\n</code></pre>\n<p>When I connect to the notification service directly, without using API-Gateway, the connection remains active. Here is a sample URL I use for connecting to my service:</p>\n<pre><code>ws://my-company/notification/openConnection?the_client_id=42\n</code></pre>\n<p>However, when I use API-Gateway, it closes the connection after 30 seconds. Here is the log of my notification service that confirms the WebSocket connection is closed by receiving the TCP finish packet.</p>\n<pre><code>[p-nio-80-exec-2] o.a.t.websocket.server.WsFrameServer     : wsFrameServer.onDataAvailable\n[p-nio-80-exec-2] o.a.tomcat.util.net.SocketWrapperBase    : Socket: [org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper@67f46c3f:org.apache.tomcat.util.net.NioChannel@2a4e5a44:java.nio.channels.SocketChannel[connected local=/172.28.0.11:80 remote=/172.28.0.12:56006]], Read from buffer: [0]\n[p-nio-80-exec-2] org.apache.tomcat.util.net.NioEndpoint   : Socket: [org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper@67f46c3f:org.apache.tomcat.util.net.NioChannel@2a4e5a44:java.nio.channels.SocketChannel[connected local=/172.28.0.11:80 remote=/172.28.0.12:56006]], Read direct from socket: [6]\n[p-nio-80-exec-2] o.a.t.websocket.server.WsFrameServer     : Read [6] bytes into input buffer ready for processing\n[p-nio-80-exec-2] o.a.t.websocket.server.WsFrameServer     : WebSocket frame received. fin [true], rsv [0], OpCode [8], payload length [0]\n[p-nio-80-exec-2] s.w.s.h.LoggingWebSocketHandlerDecorator : StandardWebSocketSession[id=0df41ae3-ffc2-4d90-723c-88dacbfe11a3, uri=ws://da3a67eb76df/openConnection?party=42] closed with CloseStatus[code=1000, reason=null]\nafter close: 0df41ae3-ffc2-4d90-723c-88dacbfe11a3\n[p-nio-80-exec-2] o.apache.tomcat.util.threads.LimitLatch  : Counting down[http-nio-80-exec-2] latch=1\n[p-nio-80-exec-2] org.apache.tomcat.util.net.NioEndpoint   : Calling [org.apache.tomcat.util.net.NioEndpoint@11fe2371].closeSocket([org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper@67f46c3f:org.apache.tomcat.util.net.NioChannel@2a4e5a44:java.nio.channels.SocketChannel[connected local=/172.28.0.11:80 remote=/172.28.0.12:56006]])\n</code></pre>\n<p>And here is the log of API-Gateway at the moment it closes the websocket:</p>\n<pre><code>\n[or-http-epoll-7] r.n.http.client.HttpClientOperations     : [c66f9ad0-1, L:/172.28.0.12:58846 - R:1bc0b9f7e00d/172.28.0.11:80] Cancelling Websocket inbound. Closing Websocket\n[or-http-epoll-7] r.n.resources.PooledConnectionProvider   : [c66f9ad0-1, L:/172.28.0.12:58846 ! R:1bc0b9f7e00d/172.28.0.11:80] Channel closed, now: 0 active connections, 0 inactive connections and 0 pending acquire requests.\n[or-http-epoll-7] reactor.netty.ReactorNetty               : [c66f9ad0-1, L:/172.28.0.12:58846 ! R:1bc0b9f7e00d/172.28.0.11:80] Non Removed handler: reactor.left.httpAggregator, context: null, pipeline: DefaultChannelPipeline{(ws-decoder = io.netty.handler.codec.http.websocketx.WebSocket13FrameDecoder), (ws-encoder = io.netty.handler.codec.http.websocketx.WebSocket13FrameEncoder), (reactor.left.wsFrameAggregator = io.netty.handler.codec.http.websocketx.WebSocketFrameAggregator), (reactor.right.reactiveBridge = reactor.netty.channel.ChannelOperationsHandler)}\n[or-http-epoll-7] r.n.http.server.HttpServerOperations     : [b51c2362-1, L:/172.28.0.12:80 ! R:/172.28.0.1:33582] Cancelling Websocket inbound. Closing Websocket\n[or-http-epoll-7] r.n.r.DefaultPooledConnectionProvider    : [c66f9ad0, L:/172.28.0.12:58846 ! R:1bc0b9f7e00d/172.28.0.11:80] onStateChange(ws{uri=/openConnection?party=42, connection=PooledConnection{channel=[id: 0xc66f9ad0, L:/172.28.0.12:58846 ! R:1bc0b9f7e00d/172.28.0.11:80]}}, [response_completed])\n[or-http-epoll-7] r.n.r.DefaultPooledConnectionProvider    : [c66f9ad0, L:/172.28.0.12:58846 ! R:1bc0b9f7e00d/172.28.0.11:80] onStateChange(ws{uri=/openConnection?party=42, connection=PooledConnection{channel=[id: 0xc66f9ad0, L:/172.28.0.12:58846 ! R:1bc0b9f7e00d/172.28.0.11:80]}}, [disconnecting])\n\n</code></pre>\n"},{"tags":["java","mongodb","spring-boot","amazon-dynamodb"],"answers":[{"tags":[],"owner":{"account_id":10749774,"reputation":14475,"user_id":7909676,"display_name":"Leeroy Hannigan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672844115,"creation_date":1672844115,"answer_id":75007225,"question_id":75006201,"body_markdown":"DynamoDB changes can be taken from DynamoDB Streams (Change Data Capture) and you can use a Lambda trigger to consume the changes and update your MongoDB accordingly. \r\n\r\n1. [DynamoDB Streams](https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Streams.html)\r\n2. [Lambda Consumer](https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Streams.Lambda.html)\r\n3. [MongoDB and Lambda](https://www.mongodb.com/developer/products/atlas/serverless-development-lambda-atlas/)","title":"Updating data from AWS DynamoDB to MongoDB Compass","body":"<p>DynamoDB changes can be taken from DynamoDB Streams (Change Data Capture) and you can use a Lambda trigger to consume the changes and update your MongoDB accordingly.</p>\n<ol>\n<li><a href=\"https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Streams.html\" rel=\"nofollow noreferrer\">DynamoDB Streams</a></li>\n<li><a href=\"https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Streams.Lambda.html\" rel=\"nofollow noreferrer\">Lambda Consumer</a></li>\n<li><a href=\"https://www.mongodb.com/developer/products/atlas/serverless-development-lambda-atlas/\" rel=\"nofollow noreferrer\">MongoDB and Lambda</a></li>\n</ol>\n"}],"owner":{"account_id":23656175,"reputation":21,"user_id":17684438,"display_name":"Andreea Nita"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":93,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1672844115,"creation_date":1672839013,"question_id":75006201,"body_markdown":" I have a SpringBoot application that uses AWS DynamoDB. I added a separate MongoDB profile that I want to use locally.\r\n\r\n How do I bring the data from DynamoDB to MongoDBCompass and update it every time DynamoDB changes?\r\n\r\n Thank you!","title":"Updating data from AWS DynamoDB to MongoDB Compass","body":"<p>I have a SpringBoot application that uses AWS DynamoDB. I added a separate MongoDB profile that I want to use locally.</p>\n<p>How do I bring the data from DynamoDB to MongoDBCompass and update it every time DynamoDB changes?</p>\n<p>Thank you!</p>\n"},{"tags":["java","android","kotlin","nullpointerexception","preferenceactivity"],"comments":[{"owner":{"account_id":263142,"reputation":9391,"user_id":548526,"accept_rate":70,"display_name":"Siddharth"},"score":0,"creation_date":1672844146,"post_id":75003319,"comment_id":132364635,"body_markdown":"setOnPreferenceClickListener(androidx.preference.Preference$OnPreferenceClickListener), you are calling this somewhere in your code, can you share that code snippet?","body":"setOnPreferenceClickListener(androidx.preference.Preference$&zwnj;&#8203;OnPreferenceClickLis&zwnj;&#8203;tener), you are calling this somewhere in your code, can you share that code snippet?"}],"answers":[{"tags":[],"owner":{"account_id":17893622,"reputation":940,"user_id":12999567,"display_name":"Mohamed Alsaid"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672841740,"creation_date":1672841740,"answer_id":75006736,"question_id":75003319,"body_markdown":"You need to also `-keep` all your `SettingsFragment` classes since you&#39;re using `Class.class.getSimpleName()` which will be affected by Proguard/R8.\r\nGuessing from your stacktrace, it will look something like this:\r\n\r\n`-keep class com.mix.downloader.ui.settings.** { ; }`","title":"Android App crashes in the release build due to NullPointerException when setting minifyEnabled to true and shrinkResources to true","body":"<p>You need to also <code>-keep</code> all your <code>SettingsFragment</code> classes since you're using <code>Class.class.getSimpleName()</code> which will be affected by Proguard/R8.\nGuessing from your stacktrace, it will look something like this:</p>\n<p><code>-keep class com.mix.downloader.ui.settings.** { ; }</code></p>\n"}],"owner":{"account_id":24190667,"reputation":1,"user_id":18149910,"display_name":"Abdullah Kahtan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":285,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672844064,"creation_date":1672823995,"question_id":75003319,"body_markdown":"when setting  `minifyEnabled`  to `true` causes `nullpointerException` \r\nwhen I set `minifyEnabled` to `false` the problem gone \r\n\r\nbut I want to set `minifyEnabled` to `true` and `shrinkResources` to `true` to keep my app size small and delete unused classes \r\n\r\nalso try to use those lines in the `ProGuard-rules.txt` and the problem not solved\r\n\r\nCode\r\n\r\n    Preference appearance = findPreference(AppearanceSettingsFragment.class.getSimpleName());\r\n                appearance.setOnPreferenceClickListener(prefClickListener);\r\n    \r\n    Preference behavior = findPreference(BehaviorSettingsFragment.class.getSimpleName());\r\n                behavior.setOnPreferenceClickListener(prefClickListener);\r\n    \r\n    Preference storage = findPreference(StorageSettingsFragment.class.getSimpleName());\r\n                storage.setOnPreferenceClickListener(prefClickListener);\r\n    \r\n    Preference browser = findPreference(BrowserSettingsFragment.class.getSimpleName());\r\n                browser.setOnPreferenceClickListener(prefClickListener);\r\n    \r\n    Preference limitations = findPreference(LimitationsSettingsFragment.class.getSimpleName());\r\n                limitations.setOnPreferenceClickListener(prefClickListener);\r\n\r\nConfig\r\n\r\n    -keep interface androidx.** { *; }\r\n    -keep class androidx.** { *; }\r\n    \r\n    -keep class com.android.** { *; }\r\n    -keep class com.google.** { *; }\r\n    \r\n    -keep class SettingsFragment.** { *; }\r\n    -keep class com.mix.downloader.model.* { *; }\r\n    -keepattributes Annotation,Signature\r\n\r\nAbove is what I have tried, still issue is not resolved.\r\n\r\nException reported\r\n\r\nFATAL EXCEPTION: main\r\n                                                                                                        Process: com.mix.downloader, PID: 31333\r\n                                                                                                        **java.lang.NullPointerException: Attempt to invoke virtual method &#39;void androidx.preference.Preference.setOnPreferenceClickListener(androidx.preference.Preference$OnPreferenceClickListener)&#39; on a null object reference**\r\n                                                                                                        \tat com.mix.downloader.ui.settings.SettingsFragment.onViewCreated(SettingsFragment.java:115)\r\n                                                                                                        \tat androidx.fragment.app.Fragment.performViewCreated(Fragment.java:5)\r\n                                                                                                        \tat androidx.fragment.app.FragmentStateManager.createView(FragmentStateManager.java:262)\r\n                                                                                                        \tat androidx.fragment.app.FragmentStateManager.moveToExpectedState(FragmentStateManager.java:117)\r\n                                                                                                        \tat androidx.fragment.app.FragmentStore.moveToExpectedState(FragmentStore.java:31)\r\n                                                                                                        \tat androidx.fragment.app.FragmentManager.moveToState(FragmentManager.java:57)\r\n                                                                                                        \tat androidx.fragment.app.FragmentManager.dispatchStateChange(FragmentManager.java:10)\r\n                                                                                                        \tat androidx.fragment.app.FragmentManager.dispatchActivityCreated(FragmentManager.java:12)\r\n                                                                                                        \tat androidx.fragment.app.FragmentController.dispatchActivityCreated(FragmentController.java:5)\r\n                                                                                                        \tat androidx.fragment.app.FragmentActivity.onStart(FragmentActivity.java:21)\r\n                                                                                                        \tat androidx.appcompat.app.AppCompatActivity.onStart(AppCompatActivity.java:1)\r\n                                                                                                        \tat android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1435)\r\n                                                                                                        \tat android.app.Activity.performStart(Activity.java:8231)\r\n                                                                                                        \tat android.app.ActivityThread.handleStartActivity(ActivityThread.java:3845)\r\n                                                                                                        \tat android.app.servertransaction.TransactionExecutor.performLifecycleSequence(TransactionExecutor.java:221)\r\n                                                                                                        \tat android.app.servertransaction.TransactionExecutor.cycleToPath(TransactionExecutor.java:201)\r\n                                                                                                        \tat android.app.servertransaction.TransactionExecutor.executeLifecycleState(TransactionExecutor.java:173)\r\n                                                                                                        \tat android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:97)\r\n                                                                                                        \tat android.app.ActivityThread$H.handleMessage(ActivityThread.java:2309)\r\n                                                                                                        \tat android.os.Handler.dispatchMessage(Handler.java:106)\r\n                                                                                                        \tat android.os.Looper.loop(Looper.java:246)\r\n                                                                                                        \tat android.app.ActivityThread.main(ActivityThread.java:8587)\r\n                                                                                                        \tat java.lang.reflect.Method.invoke(Native Method)\r\n                                                                                                        \tat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:602)\r\n                                                                                                        \tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1130)\r\n\r\n","title":"Android App crashes in the release build due to NullPointerException when setting minifyEnabled to true and shrinkResources to true","body":"<p>when setting  <code>minifyEnabled</code>  to <code>true</code> causes <code>nullpointerException</code>\nwhen I set <code>minifyEnabled</code> to <code>false</code> the problem gone</p>\n<p>but I want to set <code>minifyEnabled</code> to <code>true</code> and <code>shrinkResources</code> to <code>true</code> to keep my app size small and delete unused classes</p>\n<p>also try to use those lines in the <code>ProGuard-rules.txt</code> and the problem not solved</p>\n<p>Code</p>\n<pre><code>Preference appearance = findPreference(AppearanceSettingsFragment.class.getSimpleName());\n            appearance.setOnPreferenceClickListener(prefClickListener);\n\nPreference behavior = findPreference(BehaviorSettingsFragment.class.getSimpleName());\n            behavior.setOnPreferenceClickListener(prefClickListener);\n\nPreference storage = findPreference(StorageSettingsFragment.class.getSimpleName());\n            storage.setOnPreferenceClickListener(prefClickListener);\n\nPreference browser = findPreference(BrowserSettingsFragment.class.getSimpleName());\n            browser.setOnPreferenceClickListener(prefClickListener);\n\nPreference limitations = findPreference(LimitationsSettingsFragment.class.getSimpleName());\n            limitations.setOnPreferenceClickListener(prefClickListener);\n</code></pre>\n<p>Config</p>\n<pre><code>-keep interface androidx.** { *; }\n-keep class androidx.** { *; }\n\n-keep class com.android.** { *; }\n-keep class com.google.** { *; }\n\n-keep class SettingsFragment.** { *; }\n-keep class com.mix.downloader.model.* { *; }\n-keepattributes Annotation,Signature\n</code></pre>\n<p>Above is what I have tried, still issue is not resolved.</p>\n<p>Exception reported</p>\n<p>FATAL EXCEPTION: main\nProcess: com.mix.downloader, PID: 31333\n<strong>java.lang.NullPointerException: Attempt to invoke virtual method 'void androidx.preference.Preference.setOnPreferenceClickListener(androidx.preference.Preference$OnPreferenceClickListener)' on a null object reference</strong>\nat com.mix.downloader.ui.settings.SettingsFragment.onViewCreated(SettingsFragment.java:115)\nat androidx.fragment.app.Fragment.performViewCreated(Fragment.java:5)\nat androidx.fragment.app.FragmentStateManager.createView(FragmentStateManager.java:262)\nat androidx.fragment.app.FragmentStateManager.moveToExpectedState(FragmentStateManager.java:117)\nat androidx.fragment.app.FragmentStore.moveToExpectedState(FragmentStore.java:31)\nat androidx.fragment.app.FragmentManager.moveToState(FragmentManager.java:57)\nat androidx.fragment.app.FragmentManager.dispatchStateChange(FragmentManager.java:10)\nat androidx.fragment.app.FragmentManager.dispatchActivityCreated(FragmentManager.java:12)\nat androidx.fragment.app.FragmentController.dispatchActivityCreated(FragmentController.java:5)\nat androidx.fragment.app.FragmentActivity.onStart(FragmentActivity.java:21)\nat androidx.appcompat.app.AppCompatActivity.onStart(AppCompatActivity.java:1)\nat android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1435)\nat android.app.Activity.performStart(Activity.java:8231)\nat android.app.ActivityThread.handleStartActivity(ActivityThread.java:3845)\nat android.app.servertransaction.TransactionExecutor.performLifecycleSequence(TransactionExecutor.java:221)\nat android.app.servertransaction.TransactionExecutor.cycleToPath(TransactionExecutor.java:201)\nat android.app.servertransaction.TransactionExecutor.executeLifecycleState(TransactionExecutor.java:173)\nat android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:97)\nat android.app.ActivityThread$H.handleMessage(ActivityThread.java:2309)\nat android.os.Handler.dispatchMessage(Handler.java:106)\nat android.os.Looper.loop(Looper.java:246)\nat android.app.ActivityThread.main(ActivityThread.java:8587)\nat java.lang.reflect.Method.invoke(Native Method)\nat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:602)\nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1130)</p>\n"},{"tags":["java","arrays","list","date","kotlin"],"comments":[{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":0,"creation_date":1599686794,"post_id":63817771,"comment_id":112854076,"body_markdown":"How are you verifying no array is generated? Calling a constructor absolutely instantiates an object.","body":"How are you verifying no array is generated? Calling a constructor absolutely instantiates an object."},{"owner":{"account_id":13722742,"reputation":16978,"user_id":10134209,"display_name":"gidds"},"score":0,"creation_date":1599687156,"post_id":63817771,"comment_id":112854203,"body_markdown":"What He Said!&#160; At first glance, that code looks about right.&#160; Though I&#39;d check whether you should be using DAY_OF_MONTH rather than DAY_OF_YEAR.&#160; Also, it&#39;s generally recommended to use the newer java.time classes — LocalDate, Instant, &amp;c — than the old clunky java.util classes such as Date and Calendar.","body":"What He Said!  At first glance, that code looks about right.  Though I&#39;d check whether you should be using DAY_OF_MONTH rather than DAY_OF_YEAR.  Also, it&#39;s generally recommended to use the newer java.time classes — LocalDate, Instant, &amp;c — than the old clunky java.util classes such as Date and Calendar."},{"owner":{"account_id":18988644,"reputation":339,"user_id":13858383,"display_name":"Pavel Pipovic"},"score":0,"creation_date":1599688727,"post_id":63817771,"comment_id":112854678,"body_markdown":"@gidds But what about 09.09 , 04.09 , 30.08 , 25.08 , 20.08 , 15.08 , .... With DAY_OF_MONTH can I overflow from September to August?","body":"@gidds But what about 09.09 , 04.09 , 30.08 , 25.08 , 20.08 , 15.08 , .... With DAY_OF_MONTH can I overflow from September to August?"},{"owner":{"account_id":13722742,"reputation":16978,"user_id":10134209,"display_name":"gidds"},"score":0,"creation_date":1599690987,"post_id":63817771,"comment_id":112855280,"body_markdown":"@pavel Check the documentation for Calendar.add(); it does proper date calculations that &#39;carry&#39; between the different units.  (Unlike the Calendar.roll() methods, which don&#39;t.)","body":"@pavel Check the documentation for Calendar.add(); it does proper date calculations that &#39;carry&#39; between the different units.  (Unlike the Calendar.roll() methods, which don&#39;t.)"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1600105935,"post_id":63817771,"comment_id":112977283,"body_markdown":"I recommend you don’t use `Date` (and not `Calendar` either). Those classes are poorly designed and long outdated. Instead use `LocalDate` from [java.time, the modern Java date and time API](https://docs.oracle.com/javase/tutorial/datetime/).","body":"I recommend you don’t use <code>Date</code> (and not <code>Calendar</code> either). Those classes are poorly designed and long outdated. Instead use <code>LocalDate</code> from <a href=\"https://docs.oracle.com/javase/tutorial/datetime/\" rel=\"nofollow noreferrer\">java.time, the modern Java date and time API</a>."},{"owner":{"account_id":18988644,"reputation":339,"user_id":13858383,"display_name":"Pavel Pipovic"},"score":0,"creation_date":1600201214,"post_id":63817771,"comment_id":113012099,"body_markdown":"@ArvindKumarAvinash I was asking for a Kotlin style solution.. an elegant Kotlin way - not good old Java.","body":"@ArvindKumarAvinash I was asking for a Kotlin style solution.. an elegant Kotlin way - not good old Java."}],"answers":[{"tags":[],"owner":{"account_id":2179728,"reputation":73047,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1600177943,"creation_date":1600082258,"answer_id":63883215,"question_id":63817771,"body_markdown":"I recommend you switch from the outdated and error-prone `java.util` date-time API to the [modern](https://www.oracle.com/technical-resources/articles/java/jf14-date-time.html) `java.time` date-time API. Learn more about the modern date-time API from **[Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**. If your Android API level is still not compliant with Java8, check https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project and [Java 8+ APIs available through desugaring](https://developer.android.com/studio/write/java8-support-table).\r\n\r\nDo it as follows using the Java modern date-time API:\r\n\r\n    import java.time.LocalDate;\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    public class Main {\r\n    \tpublic static void main(String[] args) {\r\n    \t\t// Tests\r\n    \t\tSystem.out.println(getPastDaysOnIntervalOf(10, 5));// 10 days in past at an interval of 5 days\r\n    \t\tSystem.out.println(getPastDaysOnIntervalOf(5, 10));// 5 days in past at an interval of 10 days\r\n    \t}\r\n    \r\n    \tstatic List&lt;LocalDate&gt; getPastDaysOnIntervalOf(int times, int interval) {\r\n    \t\t// The list to be populated with the desired dates\r\n    \t\tList&lt;LocalDate&gt; list = new ArrayList&lt;&gt;();\r\n    \r\n    \t\t// Today\r\n    \t\tLocalDate date = LocalDate.now();\r\n    \r\n    \t\tfor (int i = 1; i &lt;= times; i++) {\r\n    \t\t\tlist.add(date);\r\n    \t\t\tdate = date.minusDays(interval);\r\n    \t\t}\r\n    \r\n    \t\t// Return the populated list\r\n    \t\treturn list;\r\n    \t}\r\n    }\r\n\r\n**Output:**\r\n\r\n    [2020-09-14, 2020-09-09, 2020-09-04, 2020-08-30, 2020-08-25, 2020-08-20, 2020-08-15, 2020-08-10, 2020-08-05, 2020-07-31]\r\n    [2020-09-14, 2020-09-04, 2020-08-25, 2020-08-15, 2020-08-05]\r\n\r\n**Using legacy API:**\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.Calendar;\r\n    import java.util.Date;\r\n    import java.util.List;\r\n    \r\n    public class Main {\r\n    \tpublic static void main(String[] args) {\r\n    \t\t// Tests\r\n    \t\tSystem.out.println(getPastDaysOnIntervalOf(10, 5));// 10 days in past at an interval of 5 days\r\n    \t\tSystem.out.println(getPastDaysOnIntervalOf(5, 10));// 5 days in past at an interval of 10 days\r\n    \t}\r\n    \r\n    \tstatic List&lt;Date&gt; getPastDaysOnIntervalOf(int times, int interval) {\r\n    \t\t// The list to be populated with the desired dates\r\n    \t\tList&lt;Date&gt; list = new ArrayList&lt;&gt;();\r\n    \r\n    \t\t// Today\r\n    \t\tCalendar cal = Calendar.getInstance();\r\n    \t\tDate date = cal.getTime();\r\n    \r\n    \t\tfor (int i = 1; i &lt;= times; i++) {\r\n    \t\t\tlist.add(date);\r\n    \t\t\tcal.add(Calendar.DATE, -interval);\r\n    \t\t\tdate = cal.getTime();\r\n    \t\t}\r\n    \r\n    \t\t// Return the populated list\r\n    \t\treturn list;\r\n    \t}\r\n    }","title":"How to generate an array of Date objects in Kotlin?","body":"<p>I recommend you switch from the outdated and error-prone <code>java.util</code> date-time API to the <a href=\"https://www.oracle.com/technical-resources/articles/java/jf14-date-time.html\" rel=\"nofollow noreferrer\">modern</a> <code>java.time</code> date-time API. Learn more about the modern date-time API from <strong><a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">Trail: Date Time</a></strong>. If your Android API level is still not compliant with Java8, check <a href=\"https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project\">How to use ThreeTenABP in Android Project</a> and <a href=\"https://developer.android.com/studio/write/java8-support-table\" rel=\"nofollow noreferrer\">Java 8+ APIs available through desugaring</a>.</p>\n<p>Do it as follows using the Java modern date-time API:</p>\n<pre><code>import java.time.LocalDate;\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class Main {\n    public static void main(String[] args) {\n        // Tests\n        System.out.println(getPastDaysOnIntervalOf(10, 5));// 10 days in past at an interval of 5 days\n        System.out.println(getPastDaysOnIntervalOf(5, 10));// 5 days in past at an interval of 10 days\n    }\n\n    static List&lt;LocalDate&gt; getPastDaysOnIntervalOf(int times, int interval) {\n        // The list to be populated with the desired dates\n        List&lt;LocalDate&gt; list = new ArrayList&lt;&gt;();\n\n        // Today\n        LocalDate date = LocalDate.now();\n\n        for (int i = 1; i &lt;= times; i++) {\n            list.add(date);\n            date = date.minusDays(interval);\n        }\n\n        // Return the populated list\n        return list;\n    }\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>[2020-09-14, 2020-09-09, 2020-09-04, 2020-08-30, 2020-08-25, 2020-08-20, 2020-08-15, 2020-08-10, 2020-08-05, 2020-07-31]\n[2020-09-14, 2020-09-04, 2020-08-25, 2020-08-15, 2020-08-05]\n</code></pre>\n<p><strong>Using legacy API:</strong></p>\n<pre><code>import java.util.ArrayList;\nimport java.util.Calendar;\nimport java.util.Date;\nimport java.util.List;\n\npublic class Main {\n    public static void main(String[] args) {\n        // Tests\n        System.out.println(getPastDaysOnIntervalOf(10, 5));// 10 days in past at an interval of 5 days\n        System.out.println(getPastDaysOnIntervalOf(5, 10));// 5 days in past at an interval of 10 days\n    }\n\n    static List&lt;Date&gt; getPastDaysOnIntervalOf(int times, int interval) {\n        // The list to be populated with the desired dates\n        List&lt;Date&gt; list = new ArrayList&lt;&gt;();\n\n        // Today\n        Calendar cal = Calendar.getInstance();\n        Date date = cal.getTime();\n\n        for (int i = 1; i &lt;= times; i++) {\n            list.add(date);\n            cal.add(Calendar.DATE, -interval);\n            date = cal.getTime();\n        }\n\n        // Return the populated list\n        return list;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1600110568,"creation_date":1600110185,"answer_id":63890412,"question_id":63817771,"body_markdown":"## java.time\r\n\r\nHere’s a simple pure Java solution. Like others I am recommending that you use java.time, the modern Java date and time API, for your date work.\r\n\r\n\t\tPeriod step = Period.ofDays(-5);\r\n\t\tint numberOfDates = 10;\r\n\t\t\r\n\t\tPeriod totalPeriod = step.multipliedBy(numberOfDates);\r\n\t\t\r\n\t\tLocalDate today = LocalDate.now(ZoneId.of(&quot;America/Rosario&quot;));\r\n\t\tList&lt;LocalDate&gt; dates = today.datesUntil(today.plus(totalPeriod), step)\r\n\t\t\t\t.collect(Collectors.toList());\r\n\t\t\r\n\t\tSystem.out.println(dates);\r\n\r\nOutput:\r\n\r\n&gt; [2020-09-14, 2020-09-09, 2020-09-04, 2020-08-30, 2020-08-25,\r\n&gt; 2020-08-20, 2020-08-15, 2020-08-10, 2020-08-05, 2020-07-31]\r\n\r\nI trust that you can translate to Kotlin and maybe even refine it further in Kotlin.\r\n\r\nIt’s not well documented that you may use the two-arg `LocalDate.datesUntil()` with a negative period, but at least it works on my Java 11.\r\n\r\nSorry to say, your solution in the question not only has more code than needed, it is also incorrect. Subtracting 432 000 000 milliseconds each time assumes that a day is always 24 hours. Because of summer time (DST) and other time anomalies a day may be 23 or 25 hours or something in between. By using `LocalDate` we are free of such issues. You may also use for example `ZonedDateTime` of `LocalDateTime` instead if you want to include time of day, they work fine across summer time transitions too.\r\n\r\n**Link:** [Oracle tutorial: Date Time](https://docs.oracle.com/javase/tutorial/datetime/) explaining how to use java.time.","title":"How to generate an array of Date objects in Kotlin?","body":"<h2>java.time</h2>\n<p>Here’s a simple pure Java solution. Like others I am recommending that you use java.time, the modern Java date and time API, for your date work.</p>\n<pre><code>    Period step = Period.ofDays(-5);\n    int numberOfDates = 10;\n    \n    Period totalPeriod = step.multipliedBy(numberOfDates);\n    \n    LocalDate today = LocalDate.now(ZoneId.of(&quot;America/Rosario&quot;));\n    List&lt;LocalDate&gt; dates = today.datesUntil(today.plus(totalPeriod), step)\n            .collect(Collectors.toList());\n    \n    System.out.println(dates);\n</code></pre>\n<p>Output:</p>\n<blockquote>\n<p>[2020-09-14, 2020-09-09, 2020-09-04, 2020-08-30, 2020-08-25,\n2020-08-20, 2020-08-15, 2020-08-10, 2020-08-05, 2020-07-31]</p>\n</blockquote>\n<p>I trust that you can translate to Kotlin and maybe even refine it further in Kotlin.</p>\n<p>It’s not well documented that you may use the two-arg <code>LocalDate.datesUntil()</code> with a negative period, but at least it works on my Java 11.</p>\n<p>Sorry to say, your solution in the question not only has more code than needed, it is also incorrect. Subtracting 432 000 000 milliseconds each time assumes that a day is always 24 hours. Because of summer time (DST) and other time anomalies a day may be 23 or 25 hours or something in between. By using <code>LocalDate</code> we are free of such issues. You may also use for example <code>ZonedDateTime</code> of <code>LocalDateTime</code> instead if you want to include time of day, they work fine across summer time transitions too.</p>\n<p><strong>Link:</strong> <a href=\"https://docs.oracle.com/javase/tutorial/datetime/\" rel=\"nofollow noreferrer\">Oracle tutorial: Date Time</a> explaining how to use java.time.</p>\n"}],"owner":{"account_id":18988644,"reputation":339,"user_id":13858383,"display_name":"Pavel Pipovic"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1627,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1672843558,"creation_date":1599677106,"question_id":63817771,"body_markdown":"I want to generate an array of date objects Kotlin style, from current day descending each 5 days **programmatically**: \r\n\r\n&gt; **{now, 5_days_ago, 10_days_ago, etc..}**\r\n\r\n    private fun dateArray() : ArrayList&lt;Date&gt; {\r\n        val date = Date()\r\n        val date2 = Date(date.time - 432000000)\r\n        val date3 = Date(date2.time - 432000000)\r\n        val date4 = Date(date3.time - 432000000)\r\n        val date5 = Date(date4.time - 432000000)\r\n        val date6 = Date(date5.time - 432000000)\r\n        val date7 = Date(date6.time - 432000000)\r\n        val date8 = Date(date7.time - 432000000)\r\n        val date9 = Date(date8.time - 432000000)\r\n        val dateA = Date(date9.time - 432000000)\r\n        return arrayListOf(date, date2, date3, date4, date5, date6, date7, date8, date9, dateA)\r\n    }\r\n\r\nThis way is to much overheaded. I bet Kotlin offers an elegant way?","title":"How to generate an array of Date objects in Kotlin?","body":"<p>I want to generate an array of date objects Kotlin style, from current day descending each 5 days <strong>programmatically</strong>:</p>\n<blockquote>\n<p><strong>{now, 5_days_ago, 10_days_ago, etc..}</strong></p>\n</blockquote>\n<pre><code>private fun dateArray() : ArrayList&lt;Date&gt; {\n    val date = Date()\n    val date2 = Date(date.time - 432000000)\n    val date3 = Date(date2.time - 432000000)\n    val date4 = Date(date3.time - 432000000)\n    val date5 = Date(date4.time - 432000000)\n    val date6 = Date(date5.time - 432000000)\n    val date7 = Date(date6.time - 432000000)\n    val date8 = Date(date7.time - 432000000)\n    val date9 = Date(date8.time - 432000000)\n    val dateA = Date(date9.time - 432000000)\n    return arrayListOf(date, date2, date3, date4, date5, date6, date7, date8, date9, dateA)\n}\n</code></pre>\n<p>This way is to much overheaded. I bet Kotlin offers an elegant way?</p>\n"},{"tags":["java","spring","spring-boot","spring-data-jpa","jwt"],"comments":[{"owner":{"account_id":25822,"reputation":78747,"user_id":66686,"accept_rate":87,"display_name":"Jens Schauder"},"score":0,"creation_date":1666008495,"post_id":74096300,"comment_id":130825982,"body_markdown":"Please format log output as code to make it more readable.","body":"Please format log output as code to make it more readable."}],"answers":[{"tags":[],"owner":{"account_id":27419618,"reputation":1,"user_id":20918283,"display_name":"ATOM Op"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672843430,"creation_date":1672843430,"answer_id":75007082,"question_id":74096300,"body_markdown":"if your relation is one to many do not return null in getAuthorities :\r\n\r\n    @Override\r\n\tpublic Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\r\n\t\t// TODO Auto-generated method stub\r\n\t\tList&lt;Role&gt; roles =new ArrayList&lt;&gt;();\r\n\t\t roles.add(role);\r\n\t\t List&lt;GrantedAuthority&gt; gauth=roles.stream().map((rol)-&gt;new \r\n         SimpleGrantedAuthority(rol.getName())).collect(Collectors.toList());\r\n\t\t return gauth;\r\n\t}\r\n\r\nif your relation is many to many :\r\n\r\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\r\n\t\t// TODO Auto-generated method stub\r\n\t\tList&lt;GrantedAuthority&gt; gauth=role.stream().map((rol)-&gt; new \r\n        SimpleGrantedAuthority(rol.getName())).collect(Collectors.toList());\r\n\t\treturn gauth;","title":"Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity: Spring Security","body":"<p>if your relation is one to many do not return null in getAuthorities :</p>\n<pre><code>@Override\npublic Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\n    // TODO Auto-generated method stub\n    List&lt;Role&gt; roles =new ArrayList&lt;&gt;();\n     roles.add(role);\n     List&lt;GrantedAuthority&gt; gauth=roles.stream().map((rol)-&gt;new \n     SimpleGrantedAuthority(rol.getName())).collect(Collectors.toList());\n     return gauth;\n}\n</code></pre>\n<p>if your relation is many to many :</p>\n<pre><code>public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\n    // TODO Auto-generated method stub\n    List&lt;GrantedAuthority&gt; gauth=role.stream().map((rol)-&gt; new \n    SimpleGrantedAuthority(rol.getName())).collect(Collectors.toList());\n    return gauth;\n</code></pre>\n"}],"owner":{"account_id":25845637,"reputation":534,"user_id":19580540,"display_name":"ayush"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1489,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1672843430,"creation_date":1666004755,"question_id":74096300,"body_markdown":"I am trying to add Role-based Authentication to my **Delete User API.** My implementation is-\r\n**SecurityConfigs.java**\r\n```\r\n\r\n@Configuration\r\n@EnableWebSecurity\r\n@EnableGlobalMethodSecurity(prePostEnabled = true)\r\npublic class SecurityConfigs {\r\n    \r\n\r\n    @Autowired\r\n    PasswordEncoder passwordEncoder;\r\n    @Autowired\r\n    private AuthenticationEntryPoint authenticationEntryPoint;\r\n    @Autowired\r\n    private JwtAuthenticationFilter jwtAuthenticationFilter;\r\n    @Autowired\r\n    private CustomUserDetailsService customUserDetailService;\r\n....\r\n}\r\n```\r\n\r\n**UserController.java: Delete method**\r\n```\r\n @DeleteMapping(&quot;/{userid}&quot;)\r\n        @PreAuthorize(&quot;hasRole(&#39;ADMIN&#39;)&quot;) //NOW ONLY THE USERS WITH ADMIN ROLES WILL BE PERMITTED\r\n        public ResponseEntity&lt;ApiResponse&gt; deleteUser(@PathVariable(&quot;userid&quot;) Integer uid){\r\n            \r\n            // ResponseEntity&lt;?&gt; deletedUser=\r\n            this.userService.deleteUser(uid);\r\n            return new ResponseEntity&lt;ApiResponse&gt;(new ApiResponse(&quot;user deleted successfully&quot;,true),HttpStatus.OK);\r\n\r\n        }\r\n```\r\n**JwtAuthenticationFilter.java class**\r\n```\r\n@Component // to enable autowiring\r\npublic class JwtAuthenticationFilter extends OncePerRequestFilter {\r\n\r\n    private static final String CLASS_NAME = JwtAuthenticationFilter.class.getName();\r\n    @Autowired\r\n    private UserDetailsService userDetailsService;\r\n\r\n    @Autowired\r\n    private JwtTokenHelper jwtTokenHelper;\r\n\r\n    /*\r\n     * This method will be called everytime the APIs are\r\n     * hit by the user\r\n     */\r\n    @Override\r\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\r\n            throws ServletException, IOException {\r\n\r\n        // get token\r\n        // key is &quot;Authorization&quot; -get its value\r\n        String requestToken = request.getHeader(&quot;Authorization&quot;);\r\n        // token starts from Bearer &lt;token value&gt;\r\n        System.out.println(CLASS_NAME + &quot; Token in request: &quot; + requestToken);\r\n        // fetch the username\r\n        String username = null;\r\n\r\n        String token = null;\r\n\r\n        if (requestToken != null &amp;&amp; requestToken.startsWith(&quot;Bearer&quot;)) {\r\n\r\n            // we found token\r\n            token = requestToken.substring(7);// Bearer 44894732e8732\r\n            System.out.println(&quot;Token obtained as: &quot; + token);\r\n            try {\r\n                username = this.jwtTokenHelper.getUsernameFromToken(token);\r\n                System.out.println(&quot;Username obtained as: &quot; + username);\r\n            } catch (IllegalArgumentException e) {\r\n                System.out.println(CLASS_NAME + &quot; Unable to get JWT Token: &quot; + e.getMessage());\r\n            } catch (ExpiredJwtException e) {\r\n                System.out.println(CLASS_NAME + &quot; Jwt Token has expried: &quot; + e.getMessage());\r\n            } catch (MalformedJwtException e) {\r\n                System.out.println(CLASS_NAME + &quot; Malformed Jwt token: &quot; + e.getMessage());\r\n            }\r\n        } else {\r\n            System.out.println(CLASS_NAME + &quot; Jwt token does not begin with \\&quot;Bearer\\&quot; &quot;);\r\n        }\r\n\r\n        // once we get the token, now validate\r\n        if (\r\n        // username should not be null\r\n        username != null &amp;&amp;\r\n        // also, Spring security should not be authenticating any user\r\n                SecurityContextHolder.getContext().getAuthentication() == null) {\r\n            UserDetails userDetails = this.userDetailsService.loadUserByUsername(username);\r\n            if (this.jwtTokenHelper.validateToken(token, userDetails)) {\r\n                // this means the token is valid\r\n                // create an authentication instance\r\n                System.out.println(username + &quot; Granted authorities for the user: &quot; + userDetails.getAuthorities());\r\n                // userDetails.getAuthorities() gives the list of all the granted authorities\r\n                UsernamePasswordAuthenticationToken usernamePasswordAuthenticationToken = new UsernamePasswordAuthenticationToken(\r\n                        userDetails, null, userDetails.getAuthorities());\r\n                // set the details\r\n                usernamePasswordAuthenticationToken\r\n                        .setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\r\n                // now authentication using SecurityContextHolder\r\n                SecurityContextHolder.getContext().setAuthentication(usernamePasswordAuthenticationToken);\r\n                System.out.println(&quot;Authentication is set for &quot; + username);\r\n\r\n            } else {\r\n                System.out.println(CLASS_NAME + &quot; Invalid jwt token&quot;);\r\n            }\r\n        } else {\r\n            System.out.println(\r\n                    CLASS_NAME + &quot; Username is null: &quot; + username + &quot; or authentication context is not null&quot;);\r\n        }\r\n        filterChain.doFilter(request, response);\r\n        System.out.println(&quot;Returning from doFilterInternal() for: &quot; + username);\r\n    }\r\n}\r\n```\r\n**Problem-**\r\nWhen I run my application and authenticate the user with **ADMIN role**, I get the token in the correct manner. But when I try to use the **Delete API** using the ADMIN role, I get the **Status Code 403 Forbidden error**, although I am permitting the **ADMIN** role to perform this operation.\r\nI get the following logs-\r\n\r\n```\r\ncom.ayushsingh.bloggingapplication.security.JwtAuthenticationFilter Token in request: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJheXVzaHNpbmdoQGdtYWlsLmNvbSIsImV4cCI6MTY2NjAwNDQyMywiaWF0IjoxNjY2MDAzMzQzfQ.8eMmOBNSLyOGYgxWHL8k-bet39VO_UqZKunN7MfxlPo08xFzu0-5i1-9dKMkI1871shkTz0U1drLM9tAAHzU5g\r\nToken obtained as: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJheXVzaHNpbmdoQGdtYWlsLmNvbSIsImV4cCI6MTY2NjAwNDQyMywiaWF0IjoxNjY2MDAzMzQzfQ.8eMmOBNSLyOGYgxWHL8k-bet39VO_api/users/11\r\n2022-10-17 16:15:34.577 DEBUG 22596 --- [nio-8085-exec-7] o.s.s.a.i.a.MethodSecurityInterceptor    : **Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity** com.ayushsingh.bloggingapplication.controllers.UserController.deleteUser(java.lang.Integer); target is of class [com.ayushsingh.bloggingapplication.controllers.UserController] with attributes [[authorize: &#39;hasRole(&#39;ADMIN&#39;)&#39;, filter: &#39;null&#39;, filterTarget: &#39;null&#39;]]\r\n2022-10-17 16:15:34.577 DEBUG 22596 --- [nio-8085-exec-7] o.s.s.w.access.AccessDeniedHandlerImpl   : **Responding with 403 status codeReturning from doFilterInternal() for: ayushsingh@gmail.com**\r\n2022-10-17 16:15:34.577 DEBUG 22596 --- [nio-8085-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request      \r\n2022-10-17 16:15:34.577 DEBUG 22596 --- [nio-8085-exec-7] o.s.security.web.FilterChainProxy        : Securing DELETE /error\r\n2022-10-17 16:15:34.577 DEBUG 22596 --- [nio-8085-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext     \r\n2022-10-17 16:15:34.577 DEBUG 22596 --- [nio-8085-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext 2022-10-17 16:15:34.577 DEBUG 22596 --- [nio-8085-exec-7] o.s.security.web.FilterChainProxy        \r\n: Secured DELETE /error2022-10-17 16:15:34.587 DEBUG 22596 --- [nio-8085-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete\r\n```\r\n\r\nThe response of the API call is-\r\n[![enter image description here][1]][1]\r\nI am not able to find the cause of this problem. Please help!\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ed8Sd.png","title":"Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity: Spring Security","body":"<p>I am trying to add Role-based Authentication to my <strong>Delete User API.</strong> My implementation is-\n<strong>SecurityConfigs.java</strong></p>\n<pre><code>\n@Configuration\n@EnableWebSecurity\n@EnableGlobalMethodSecurity(prePostEnabled = true)\npublic class SecurityConfigs {\n    \n\n    @Autowired\n    PasswordEncoder passwordEncoder;\n    @Autowired\n    private AuthenticationEntryPoint authenticationEntryPoint;\n    @Autowired\n    private JwtAuthenticationFilter jwtAuthenticationFilter;\n    @Autowired\n    private CustomUserDetailsService customUserDetailService;\n....\n}\n</code></pre>\n<p><strong>UserController.java: Delete method</strong></p>\n<pre><code> @DeleteMapping(&quot;/{userid}&quot;)\n        @PreAuthorize(&quot;hasRole('ADMIN')&quot;) //NOW ONLY THE USERS WITH ADMIN ROLES WILL BE PERMITTED\n        public ResponseEntity&lt;ApiResponse&gt; deleteUser(@PathVariable(&quot;userid&quot;) Integer uid){\n            \n            // ResponseEntity&lt;?&gt; deletedUser=\n            this.userService.deleteUser(uid);\n            return new ResponseEntity&lt;ApiResponse&gt;(new ApiResponse(&quot;user deleted successfully&quot;,true),HttpStatus.OK);\n\n        }\n</code></pre>\n<p><strong>JwtAuthenticationFilter.java class</strong></p>\n<pre><code>@Component // to enable autowiring\npublic class JwtAuthenticationFilter extends OncePerRequestFilter {\n\n    private static final String CLASS_NAME = JwtAuthenticationFilter.class.getName();\n    @Autowired\n    private UserDetailsService userDetailsService;\n\n    @Autowired\n    private JwtTokenHelper jwtTokenHelper;\n\n    /*\n     * This method will be called everytime the APIs are\n     * hit by the user\n     */\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\n            throws ServletException, IOException {\n\n        // get token\n        // key is &quot;Authorization&quot; -get its value\n        String requestToken = request.getHeader(&quot;Authorization&quot;);\n        // token starts from Bearer &lt;token value&gt;\n        System.out.println(CLASS_NAME + &quot; Token in request: &quot; + requestToken);\n        // fetch the username\n        String username = null;\n\n        String token = null;\n\n        if (requestToken != null &amp;&amp; requestToken.startsWith(&quot;Bearer&quot;)) {\n\n            // we found token\n            token = requestToken.substring(7);// Bearer 44894732e8732\n            System.out.println(&quot;Token obtained as: &quot; + token);\n            try {\n                username = this.jwtTokenHelper.getUsernameFromToken(token);\n                System.out.println(&quot;Username obtained as: &quot; + username);\n            } catch (IllegalArgumentException e) {\n                System.out.println(CLASS_NAME + &quot; Unable to get JWT Token: &quot; + e.getMessage());\n            } catch (ExpiredJwtException e) {\n                System.out.println(CLASS_NAME + &quot; Jwt Token has expried: &quot; + e.getMessage());\n            } catch (MalformedJwtException e) {\n                System.out.println(CLASS_NAME + &quot; Malformed Jwt token: &quot; + e.getMessage());\n            }\n        } else {\n            System.out.println(CLASS_NAME + &quot; Jwt token does not begin with \\&quot;Bearer\\&quot; &quot;);\n        }\n\n        // once we get the token, now validate\n        if (\n        // username should not be null\n        username != null &amp;&amp;\n        // also, Spring security should not be authenticating any user\n                SecurityContextHolder.getContext().getAuthentication() == null) {\n            UserDetails userDetails = this.userDetailsService.loadUserByUsername(username);\n            if (this.jwtTokenHelper.validateToken(token, userDetails)) {\n                // this means the token is valid\n                // create an authentication instance\n                System.out.println(username + &quot; Granted authorities for the user: &quot; + userDetails.getAuthorities());\n                // userDetails.getAuthorities() gives the list of all the granted authorities\n                UsernamePasswordAuthenticationToken usernamePasswordAuthenticationToken = new UsernamePasswordAuthenticationToken(\n                        userDetails, null, userDetails.getAuthorities());\n                // set the details\n                usernamePasswordAuthenticationToken\n                        .setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\n                // now authentication using SecurityContextHolder\n                SecurityContextHolder.getContext().setAuthentication(usernamePasswordAuthenticationToken);\n                System.out.println(&quot;Authentication is set for &quot; + username);\n\n            } else {\n                System.out.println(CLASS_NAME + &quot; Invalid jwt token&quot;);\n            }\n        } else {\n            System.out.println(\n                    CLASS_NAME + &quot; Username is null: &quot; + username + &quot; or authentication context is not null&quot;);\n        }\n        filterChain.doFilter(request, response);\n        System.out.println(&quot;Returning from doFilterInternal() for: &quot; + username);\n    }\n}\n</code></pre>\n<p><strong>Problem-</strong>\nWhen I run my application and authenticate the user with <strong>ADMIN role</strong>, I get the token in the correct manner. But when I try to use the <strong>Delete API</strong> using the ADMIN role, I get the <strong>Status Code 403 Forbidden error</strong>, although I am permitting the <strong>ADMIN</strong> role to perform this operation.\nI get the following logs-</p>\n<pre><code>com.ayushsingh.bloggingapplication.security.JwtAuthenticationFilter Token in request: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJheXVzaHNpbmdoQGdtYWlsLmNvbSIsImV4cCI6MTY2NjAwNDQyMywiaWF0IjoxNjY2MDAzMzQzfQ.8eMmOBNSLyOGYgxWHL8k-bet39VO_UqZKunN7MfxlPo08xFzu0-5i1-9dKMkI1871shkTz0U1drLM9tAAHzU5g\nToken obtained as: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJheXVzaHNpbmdoQGdtYWlsLmNvbSIsImV4cCI6MTY2NjAwNDQyMywiaWF0IjoxNjY2MDAzMzQzfQ.8eMmOBNSLyOGYgxWHL8k-bet39VO_api/users/11\n2022-10-17 16:15:34.577 DEBUG 22596 --- [nio-8085-exec-7] o.s.s.a.i.a.MethodSecurityInterceptor    : **Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity** com.ayushsingh.bloggingapplication.controllers.UserController.deleteUser(java.lang.Integer); target is of class [com.ayushsingh.bloggingapplication.controllers.UserController] with attributes [[authorize: 'hasRole('ADMIN')', filter: 'null', filterTarget: 'null']]\n2022-10-17 16:15:34.577 DEBUG 22596 --- [nio-8085-exec-7] o.s.s.w.access.AccessDeniedHandlerImpl   : **Responding with 403 status codeReturning from doFilterInternal() for: ayushsingh@gmail.com**\n2022-10-17 16:15:34.577 DEBUG 22596 --- [nio-8085-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete request      \n2022-10-17 16:15:34.577 DEBUG 22596 --- [nio-8085-exec-7] o.s.security.web.FilterChainProxy        : Securing DELETE /error\n2022-10-17 16:15:34.577 DEBUG 22596 --- [nio-8085-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Set SecurityContextHolder to empty SecurityContext     \n2022-10-17 16:15:34.577 DEBUG 22596 --- [nio-8085-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext 2022-10-17 16:15:34.577 DEBUG 22596 --- [nio-8085-exec-7] o.s.security.web.FilterChainProxy        \n: Secured DELETE /error2022-10-17 16:15:34.587 DEBUG 22596 --- [nio-8085-exec-7] s.s.w.c.SecurityContextPersistenceFilter : Cleared SecurityContextHolder to complete\n</code></pre>\n<p>The response of the API call is-\n<a href=\"https://i.stack.imgur.com/ed8Sd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ed8Sd.png\" alt=\"enter image description here\" /></a>\nI am not able to find the cause of this problem. Please help!</p>\n"},{"tags":["java","awt"],"answers":[{"tags":[],"owner":{"account_id":3141672,"reputation":211,"user_id":2657020,"display_name":"Andrew Jenkins"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1467663250,"creation_date":1467663250,"answer_id":38191657,"question_id":33402242,"body_markdown":"Had to write this code for something I&#39;m doing and it works well enough. Draws a triangle at x and y with the specified width and height using graphics g. \r\n\r\n    // Draw a heart.\r\n\tpublic void drawHeart(Graphics g, int x, int y, int width, int height) {\r\n\t\tint[] triangleX = {\r\n\t\t\t\tx - 2*width/18,\r\n\t\t\t\tx + width + 2*width/18,\r\n\t\t\t\t(x - 2*width/18 + x + width + 2*width/18)/2};\r\n    \tint[] triangleY = { \r\n    \t\t\ty + height - 2*height/3, \r\n    \t\t\ty + height - 2*height/3, \r\n    \t\t\ty + height };\r\n\t    g.fillOval(\r\n\t    \t\tx - width/12,\r\n\t    \t\ty, \r\n\t    \t\twidth/2 + width/6, \r\n\t    \t\theight/2); \r\n\t    g.fillOval(\r\n\t    \t\tx + width/2 - width/12,\r\n\t    \t\ty,\r\n\t    \t\twidth/2 + width/6,\r\n\t    \t\theight/2);\r\n\t    g.fillPolygon(triangleX, triangleY, triangleX.length);\r\n\t}","title":"How to draw heart using java awt library?","body":"<p>Had to write this code for something I'm doing and it works well enough. Draws a triangle at x and y with the specified width and height using graphics g. </p>\n\n<pre><code>// Draw a heart.\npublic void drawHeart(Graphics g, int x, int y, int width, int height) {\n    int[] triangleX = {\n            x - 2*width/18,\n            x + width + 2*width/18,\n            (x - 2*width/18 + x + width + 2*width/18)/2};\n    int[] triangleY = { \n            y + height - 2*height/3, \n            y + height - 2*height/3, \n            y + height };\n    g.fillOval(\n            x - width/12,\n            y, \n            width/2 + width/6, \n            height/2); \n    g.fillOval(\n            x + width/2 - width/12,\n            y,\n            width/2 + width/6,\n            height/2);\n    g.fillPolygon(triangleX, triangleY, triangleX.length);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4812782,"reputation":158,"user_id":3885771,"accept_rate":50,"display_name":"Field.D"},"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1472047423,"creation_date":1472047423,"answer_id":39125523,"question_id":33402242,"body_markdown":"//You don&#39;t really need AWT in Heart drawing here ://  \r\n    \r\n\r\n    public static void main(String[] args) {\r\n\t\t   int H=7,W=7;\r\n\t\t   for(int i=2;i&lt;=(H+1)/2;i++){\r\n\r\n\t\t  for(int j=0;j&lt;W/2-i;j++){\r\n\t\t    System.out.print(&quot; &quot;);\r\n\t\t   }\r\n\t\tfor(int k=1;k&lt;(i+1)*2+1;k++){\r\n\t\tSystem.out.print(&quot;*&quot;);\r\n\t\t}\r\n\r\n\t\tif(i==2){\r\n\t\tSystem.out.print(&quot; &quot;);\r\n\t\t}\r\n\r\n\t\tfor(int j=0;j&lt;W/2-i+1;j++){\r\n\t\tSystem.out.print(&quot; &quot;);\r\n\t\t}\r\n\r\n\t\tfor(int k=1;k&lt;(i+1)*2+1;k++){\r\n\t\tif(i==(H+1)/2&amp;&amp;k&gt;i+3)\r\n\t\tSystem.out.print(&quot;&quot;);\r\n\t\telse\r\n\t\tSystem.out.print(&quot;*&quot;);\r\n\t\t}\r\n\t\tSystem.out.println();\r\n\r\n\t\t}\r\n\t\tint HH=17,WW=17;\r\n\t\tfor(int i=1;i&lt;=HH/2;i++){\r\n\r\n\t\tfor(int j=1;j&lt;=i;j++){\r\n\t\tSystem.out.print(&quot; &quot;);\r\n\t\t}\r\n\t\tint z=WW-2*i;\r\n\t\tfor(int k=1;k&lt;=z;k++){\r\n\t\tSystem.out.print(&quot;*&quot;);\r\n\t\t}\r\n\t\tSystem.out.println();\r\n\t }\r\n\t}\r\n\r\n}","title":"How to draw heart using java awt library?","body":"<p>//You don't really need AWT in Heart drawing here ://  </p>\n\n<pre><code>public static void main(String[] args) {\n       int H=7,W=7;\n       for(int i=2;i&lt;=(H+1)/2;i++){\n\n      for(int j=0;j&lt;W/2-i;j++){\n        System.out.print(\" \");\n       }\n    for(int k=1;k&lt;(i+1)*2+1;k++){\n    System.out.print(\"*\");\n    }\n\n    if(i==2){\n    System.out.print(\" \");\n    }\n\n    for(int j=0;j&lt;W/2-i+1;j++){\n    System.out.print(\" \");\n    }\n\n    for(int k=1;k&lt;(i+1)*2+1;k++){\n    if(i==(H+1)/2&amp;&amp;k&gt;i+3)\n    System.out.print(\"\");\n    else\n    System.out.print(\"*\");\n    }\n    System.out.println();\n\n    }\n    int HH=17,WW=17;\n    for(int i=1;i&lt;=HH/2;i++){\n\n    for(int j=1;j&lt;=i;j++){\n    System.out.print(\" \");\n    }\n    int z=WW-2*i;\n    for(int k=1;k&lt;=z;k++){\n    System.out.print(\"*\");\n    }\n    System.out.println();\n }\n}\n</code></pre>\n\n<p>}</p>\n"}],"owner":{"account_id":2172717,"reputation":540,"user_id":1924249,"accept_rate":29,"display_name":"user1924249"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10981,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1672843416,"creation_date":1446069084,"question_id":33402242,"body_markdown":"How to draw heart using java awt library? I am using Java AWT library and I need to draw a heart for my game. How can I do this using AWT?\r\n\r\nHere what I was thinking: may be use `g.fillArc()`? but then if I make two curves at top than how to make a triangle at button? Would that be `g.fillPolygon()`?\r\n\r\n    g.fillArc(x, y, 20,20, 60, 60); //so this will be left curve\r\n    \r\n    g.fillArc(x+20, y, 20,20, 60, 60); //so right curve?\r\n    \r\n    //button triangle?\r\n\r\nI was wondering if any one is experence in awt and could show me how to do this?\r\n","title":"How to draw heart using java awt library?","body":"<p>How to draw heart using java awt library? I am using Java AWT library and I need to draw a heart for my game. How can I do this using AWT?</p>\n<p>Here what I was thinking: may be use <code>g.fillArc()</code>? but then if I make two curves at top than how to make a triangle at button? Would that be <code>g.fillPolygon()</code>?</p>\n<pre><code>g.fillArc(x, y, 20,20, 60, 60); //so this will be left curve\n\ng.fillArc(x+20, y, 20,20, 60, 60); //so right curve?\n\n//button triangle?\n</code></pre>\n<p>I was wondering if any one is experence in awt and could show me how to do this?</p>\n"},{"tags":["java","swing","printing","jfreereport"],"comments":[{"owner":{"account_id":24536,"reputation":6582,"user_id":62479,"accept_rate":68,"display_name":"Geoffrey Zheng"},"score":0,"creation_date":1285161064,"post_id":3769301,"comment_id":3989297,"body_markdown":"What&#39;s the invalid PrintService name?","body":"What&#39;s the invalid PrintService name?"},{"owner":{"account_id":17546,"reputation":15607,"user_id":39371,"accept_rate":80,"display_name":"Stephane Grenier"},"score":0,"creation_date":1321379089,"post_id":3769301,"comment_id":9989853,"body_markdown":"I&#39;m still working on this issue, but I found an interesting Java bug report at: http://bugs.sun.com/bugdatabase/view_bug.do;jsessionid=3b491a0d16afa70adb151ef43c89?bug_id=6788490","body":"I&#39;m still working on this issue, but I found an interesting Java bug report at: <a href=\"http://bugs.sun.com/bugdatabase/view_bug.do;jsessionid=3b491a0d16afa70adb151ef43c89?bug_id=6788490\" rel=\"nofollow noreferrer\">bugs.sun.com/bugdatabase/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":185131,"reputation":1851,"user_id":421652,"accept_rate":80,"display_name":"Ultimate Gobblement"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1285164485,"creation_date":1285164485,"answer_id":3770068,"question_id":3769301,"body_markdown":"The print service name should be the name of your printer. The PrintUtil class I am using at the moment brings up a dialog listing the printers I have setup in my operating system. Can you print from other applications using your computer? \r\n\r\nIf not you need to configure your printer, otherwise you may want to check if jFreeReport needs a default printer specified somewhere. Since JFreeReport is open source, you should be able to create a simple test program using just the PrintUtil class - that may make it easier to demonstrate what is going wrong with code. \r\n\r\n\r\n","title":"java.awt.print.PrinterException: Invalid name of PrintService","body":"<p>The print service name should be the name of your printer. The PrintUtil class I am using at the moment brings up a dialog listing the printers I have setup in my operating system. Can you print from other applications using your computer? </p>\n\n<p>If not you need to configure your printer, otherwise you may want to check if jFreeReport needs a default printer specified somewhere. Since JFreeReport is open source, you should be able to create a simple test program using just the PrintUtil class - that may make it easier to demonstrate what is going wrong with code. </p>\n"},{"tags":[],"owner":{"account_id":6691723,"reputation":11,"user_id":5161023,"display_name":"Caio Trevisan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1467316501,"creation_date":1467316501,"answer_id":38132144,"question_id":3769301,"body_markdown":"I had the same problem. Java just do not print my print job.\r\n\r\nSo I realised that, my company, just changed the main printer. Then I removed the old one from my printer&#39;s list (win 8) and set the new one as default.\r\n\r\nWorks like a charm!\r\n\r\nPS: my first reply on stackoverflow! \\o/","title":"java.awt.print.PrinterException: Invalid name of PrintService","body":"<p>I had the same problem. Java just do not print my print job.</p>\n\n<p>So I realised that, my company, just changed the main printer. Then I removed the old one from my printer's list (win 8) and set the new one as default.</p>\n\n<p>Works like a charm!</p>\n\n<p>PS: my first reply on stackoverflow! \\o/</p>\n"}],"owner":{"account_id":17546,"reputation":15607,"user_id":39371,"accept_rate":80,"display_name":"Stephane Grenier"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10268,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1672843078,"creation_date":1285159499,"question_id":3769301,"body_markdown":"I would ask it in the form of a question, but I have no idea why I&#39;m getting this exception. I can&#39;t find any real documentation online either. \r\n\r\nTo give you context although I don&#39;t think it&#39;s really relevant, I&#39;m using it within the JFreeReport classic engine reporting framework.\r\n\r\n\r\nThe stacktrace is:\r\n\r\n    java.awt.print.PrinterException: Invalid name of PrintService.\r\n    \tat sun.awt.windows.WPrinterJob.setNativePrintService(Native Method)\r\n    \tat sun.awt.windows.WPrinterJob.getPrintService(Unknown Source)\r\n    \tat sun.awt.windows.WPrinterJob.printDialog(Unknown Source)\r\n    \tat org.jfree.report.modules.gui.print.PrintUtil.print(PrintUtil.java:128)\r\n    \tat org.jfree.report.modules.gui.print.PrintExportTask.run(PrintExportTask.java:84)\r\n    \tat java.lang.Thread.run(Unknown Source)\r\n\r\nAny ideas or suggestions as to what&#39;s happening here would be greatly appreciated!\r\n\r\nUpdate: It would be great to also find some documentation on where and when this error is generated...","title":"java.awt.print.PrinterException: Invalid name of PrintService","body":"<p>I would ask it in the form of a question, but I have no idea why I'm getting this exception. I can't find any real documentation online either. </p>\n\n<p>To give you context although I don't think it's really relevant, I'm using it within the JFreeReport classic engine reporting framework.</p>\n\n<p>The stacktrace is:</p>\n\n<pre><code>java.awt.print.PrinterException: Invalid name of PrintService.\n    at sun.awt.windows.WPrinterJob.setNativePrintService(Native Method)\n    at sun.awt.windows.WPrinterJob.getPrintService(Unknown Source)\n    at sun.awt.windows.WPrinterJob.printDialog(Unknown Source)\n    at org.jfree.report.modules.gui.print.PrintUtil.print(PrintUtil.java:128)\n    at org.jfree.report.modules.gui.print.PrintExportTask.run(PrintExportTask.java:84)\n    at java.lang.Thread.run(Unknown Source)\n</code></pre>\n\n<p>Any ideas or suggestions as to what's happening here would be greatly appreciated!</p>\n\n<p>Update: It would be great to also find some documentation on where and when this error is generated...</p>\n"},{"tags":["java","openrewrite"],"comments":[{"owner":{"account_id":1861474,"reputation":121,"user_id":1685998,"display_name":"MGK"},"score":0,"creation_date":1670080045,"post_id":74652344,"comment_id":131791996,"body_markdown":"Can you please share the link to this javadoc?","body":"Can you please share the link to this javadoc?"}],"answers":[{"tags":[],"owner":{"account_id":21852,"reputation":19896,"user_id":53444,"accept_rate":70,"display_name":"Tim"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672842540,"creation_date":1672842540,"answer_id":75006894,"question_id":74652344,"body_markdown":"Did you see the [JavaDoc at the top of the JavaIsoVisitor][1]?\r\n\r\n```java\r\n/**\r\n * This iso(morphic) refactoring visitor is the appropriate base class for most Java refactoring visitors.\r\n * It comes with an additional constraint compared to the non-isomorphic JavaRefactorVisitor:\r\n * Each visit method must return an AST element of the same type as the one being visited.\r\n *\r\n * For visitors that do not need the extra flexibility of JavaRefactorVisitor, this constraint\r\n * makes for a more pleasant visitor authoring experience as less casting will be required.\r\n */\r\npublic class JavaIsoVisitor&lt;P&gt; extends JavaVisitor&lt;P&gt; {\r\n```\r\n\r\nSo whenever you&#39;re only replacing elements with elements of the same type, you&#39;re able to use the `JavaIsoVisitor`.\r\n\r\nWhen you&#39;re replacing elements with one or more element of a different type, you will have to use `JavaVisitor`.\r\n\r\n  [1]: https://github.com/openrewrite/rewrite/blob/main/rewrite-java/src/main/java/org/openrewrite/java/JavaIsoVisitor.java#L24","title":"JavaVisitor vs. JavaIsoVisitor: When to use what?","body":"<p>Did you see the <a href=\"https://github.com/openrewrite/rewrite/blob/main/rewrite-java/src/main/java/org/openrewrite/java/JavaIsoVisitor.java#L24\" rel=\"nofollow noreferrer\">JavaDoc at the top of the JavaIsoVisitor</a>?</p>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * This iso(morphic) refactoring visitor is the appropriate base class for most Java refactoring visitors.\n * It comes with an additional constraint compared to the non-isomorphic JavaRefactorVisitor:\n * Each visit method must return an AST element of the same type as the one being visited.\n *\n * For visitors that do not need the extra flexibility of JavaRefactorVisitor, this constraint\n * makes for a more pleasant visitor authoring experience as less casting will be required.\n */\npublic class JavaIsoVisitor&lt;P&gt; extends JavaVisitor&lt;P&gt; {\n</code></pre>\n<p>So whenever you're only replacing elements with elements of the same type, you're able to use the <code>JavaIsoVisitor</code>.</p>\n<p>When you're replacing elements with one or more element of a different type, you will have to use <code>JavaVisitor</code>.</p>\n"}],"owner":{"account_id":1861474,"reputation":121,"user_id":1685998,"display_name":"MGK"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":111,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1672842540,"creation_date":1669967071,"question_id":74652344,"body_markdown":"I wonder, what the difference between `JavaVistitor` and `JavaIsoVisittor` is. When shall I use what. This is not clear to me from the documentatio https://docs.openrewrite.org/.","title":"JavaVisitor vs. JavaIsoVisitor: When to use what?","body":"<p>I wonder, what the difference between <code>JavaVistitor</code> and <code>JavaIsoVisittor</code> is. When shall I use what. This is not clear to me from the documentatio <a href=\"https://docs.openrewrite.org/\" rel=\"nofollow noreferrer\">https://docs.openrewrite.org/</a>.</p>\n"},{"tags":["java","utf-8","stdout"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1672842421,"post_id":75006855,"comment_id":132364015,"body_markdown":"You can use an `OutputStreamWriter` on `System.out` with UTF-8 encoding. Bear in mind that&#39;s most likely to fail in a Windows console","body":"You can use an <code>OutputStreamWriter</code> on <code>System.out</code> with UTF-8 encoding. Bear in mind that&#39;s most likely to fail in a Windows console"},{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":2,"creation_date":1672867003,"post_id":75006855,"comment_id":132372517,"body_markdown":"Call `System.setOut(new PrintStream(new FileOutputStream(FileDescriptor.out), true, StandardCharsets.UTF_8));` to make your **out** `PrintStream` use UTF-8. However, if you do that you also need to be writing to a console using UTF-8. On  Windows there are flaky ways to do that (e.g. `chcp 65001`) but there is no general solution for all the types of console that are available on Windows.","body":"Call <code>System.setOut(new PrintStream(new FileOutputStream(FileDescriptor.out), true, StandardCharsets.UTF_8));</code> to make your <b>out</b> <code>PrintStream</code> use UTF-8. However, if you do that you also need to be writing to a console using UTF-8. On  Windows there are flaky ways to do that (e.g. <code>chcp 65001</code>) but there is no general solution for all the types of console that are available on Windows."}],"owner":{"account_id":19529,"reputation":31885,"user_id":45843,"accept_rate":91,"display_name":"rwallace"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672842321,"creation_date":1672842321,"question_id":75006855,"body_markdown":"In Java, `System.out.print` takes encoding from the platform default.\r\n\r\nSuppose you want to always print as UTF-8 regardless of the platform default, what&#39;s the most idiomatic/efficient way to do this?\r\n\r\nThe best idea I have so far is to explicitly spell out two steps, first convert string to UTF-8 bytes with `s.getBytes(StandardCharsets.UTF_8)`, then print the bytes with `System.out.write`, which bypasses the question of encoding.\r\n\r\nIs this the recommended way, or is there a more idiomatic way?","title":"Printing to System.out as UTF-8 regardless of platform default","body":"<p>In Java, <code>System.out.print</code> takes encoding from the platform default.</p>\n<p>Suppose you want to always print as UTF-8 regardless of the platform default, what's the most idiomatic/efficient way to do this?</p>\n<p>The best idea I have so far is to explicitly spell out two steps, first convert string to UTF-8 bytes with <code>s.getBytes(StandardCharsets.UTF_8)</code>, then print the bytes with <code>System.out.write</code>, which bypasses the question of encoding.</p>\n<p>Is this the recommended way, or is there a more idiomatic way?</p>\n"},{"tags":["java","spring-boot","maven","glassfish"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1672656965,"post_id":74981364,"comment_id":132320306,"body_markdown":"And you nowhere indicate what you are trying to achieve? Looks like you are trying to use AOT but not sure. You are mentioning no versions and no setup you are using. Basically you are dumping a stacktrace and expect us to magically know what is wrong. It looks however if you are using JDK17 with a glassfish version that isn&#39;t compatible with it. Why use glassfish at all if you are using Spring Boot?","body":"And you nowhere indicate what you are trying to achieve? Looks like you are trying to use AOT but not sure. You are mentioning no versions and no setup you are using. Basically you are dumping a stacktrace and expect us to magically know what is wrong. It looks however if you are using JDK17 with a glassfish version that isn&#39;t compatible with it. Why use glassfish at all if you are using Spring Boot?"},{"owner":{"account_id":13759326,"reputation":41,"user_id":9929440,"display_name":"WajahatAlvi"},"score":0,"creation_date":1672841850,"post_id":74981364,"comment_id":132363781,"body_markdown":"Information updated.\nNeed to deploy on glassfish. \nVersions are compatible already checked.","body":"Information updated. Need to deploy on glassfish.  Versions are compatible already checked."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1672842144,"post_id":74981364,"comment_id":132363904,"body_markdown":"Judging from the error you get the versions aren&#39;t compatible else you wouldn&#39;t get the error. Judging from the stacktrace it includes an older ASM version which isn&#39;t JDK17 compatible and thus makes glassfish not (fully) jdk17 compatible.","body":"Judging from the error you get the versions aren&#39;t compatible else you wouldn&#39;t get the error. Judging from the stacktrace it includes an older ASM version which isn&#39;t JDK17 compatible and thus makes glassfish not (fully) jdk17 compatible."}],"owner":{"account_id":13759326,"reputation":41,"user_id":9929440,"display_name":"WajahatAlvi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1559,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1672842061,"creation_date":1672655854,"question_id":74981364,"body_markdown":"\r\n\r\n1. Spring boot application 3.0. Hello world application\r\n2. war created\r\n3. Deploying on Glassfish 7\r\n4. Open JDK 17\r\n\r\n\r\n\r\n\r\nThis is an exception which is being received from glassfish server logs.\r\n&gt; Exception while visiting org/springframework/aot/hint/predicate/ResourceHintsPredicates$AggregatedResourcePatternHints.class of size 3983\r\n&gt; java.lang.UnsupportedOperationException: Record requires ASM8\r\n&gt; \tat org.objectweb.asm.ClassVisitor.visitRecordComponent(ClassVisitor.java:323)\r\n&gt; \tat org.objectweb.asm.ClassReader.readRecordComponent(ClassReader.java:953)\r\n&gt; \tat org.objectweb.asm.ClassReader.accept(ClassReader.java:731)\r\n&gt; \tat org.objectweb.asm.ClassReader.accept(ClassReader.java:424)\r\n&gt; \tat org.glassfish.hk2.classmodel.reflect.Parser$5.on(Parser.java:336)\r\n&gt; \tat com.sun.enterprise.v3.server.ReadableArchiveScannerAdapter.handleEntry(ReadableArchiveScannerAdapter.java:137)\r\n&gt; \tat com.sun.enterprise.v3.server.ReadableArchiveScannerAdapter.onSelectedEntries(ReadableArchiveScannerAdapter.java:100)\r\n&gt; \tat org.glassfish.hk2.classmodel.reflect.Parser.doJob(Parser.java:321)\r\n&gt; \tat org.glassfish.hk2.classmodel.reflect.Parser.access$300(Parser.java:44)\r\n&gt; \tat org.glassfish.hk2.classmodel.reflect.Parser$3.call(Parser.java:280)\r\n&gt; \tat org.glassfish.hk2.classmodel.reflect.Parser$3.call(Parser.java:269)\r\n&gt; \tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n&gt; \tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n&gt; \tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n&gt; \tat java.base/java.lang.Thread.run(Thread.java:833)\r\n&gt; \r\n&gt; \r\n&gt; \r\n&gt; java.lang.UnsupportedOperationException: PermittedSubclasses requires ASM9\r\n&gt; \tat org.objectweb.asm.ClassVisitor.visitPermittedSubclass(ClassVisitor.java:281)\r\n&gt; \tat org.objectweb.asm.ClassReader.accept(ClassReader.java:706)\r\n&gt; \tat org.objectweb.asm.ClassReader.accept(ClassReader.java:424)\r\n&gt; \tat org.glassfish.hk2.classmodel.reflect.Parser$5.on(Parser.java:336)\r\n&gt; \tat com.sun.enterprise.v3.server.ReadableArchiveScannerAdapter.handleEntry(ReadableArchiveScannerAdapter.java:137)\r\n&gt; \tat com.sun.enterprise.v3.server.ReadableArchiveScannerAdapter.onSelectedEntries(ReadableArchiveScannerAdapter.java:100)\r\n&gt; \tat org.glassfish.hk2.classmodel.reflect.Parser.doJob(Parser.java:321)\r\n&gt; \tat org.glassfish.hk2.classmodel.reflect.Parser.access$300(Parser.java:44)\r\n&gt; \tat org.glassfish.hk2.classmodel.reflect.Parser$3.call(Parser.java:280)\r\n&gt; \tat org.glassfish.hk2.classmodel.reflect.Parser$3.call(Parser.java:269)\r\n&gt; \tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n&gt; \tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n&gt; \tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n&gt; \tat java.base/java.lang.Thread.run(Thread.java:833)\r\n\r\n\r\n**pom.xml**\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;3.0.1&lt;/version&gt;\r\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    &lt;/parent&gt;\r\n    &lt;packaging&gt;war&lt;/packaging&gt;\r\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\r\n    &lt;artifactId&gt;demo&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    &lt;name&gt;demo&lt;/name&gt;\r\n    &lt;description&gt;demo&lt;/description&gt;\r\n    &lt;properties&gt;\r\n        &lt;java.version&gt;17&lt;/java.version&gt;\r\n\r\n    &lt;/properties&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;!-- https://mvnrepository.com/artifact/jakarta.servlet/jakarta.servlet-api --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;jakarta.servlet&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jakarta.servlet-api&lt;/artifactId&gt;\r\n            &lt;version&gt;6.0.0&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;!--            &lt;plugin&gt;\r\n                            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                        &lt;/plugin&gt;--&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\n```java\r\n@GetMapping(&quot;/hello&quot;)\r\npublic String sayHello(@RequestParam(value = &quot;myName&quot;, defaultValue = &quot;World&quot;) String name) {\r\n    return String.format(&quot;Hello %s!&quot;, name);\r\n}\r\n```","title":"Java : UnsupportedOperationException : ASM8 and ASM9 required","body":"<ol>\n<li>Spring boot application 3.0. Hello world application</li>\n<li>war created</li>\n<li>Deploying on Glassfish 7</li>\n<li>Open JDK 17</li>\n</ol>\n<p>This is an exception which is being received from glassfish server logs.</p>\n<blockquote>\n<p>Exception while visiting org/springframework/aot/hint/predicate/ResourceHintsPredicates$AggregatedResourcePatternHints.class of size 3983\njava.lang.UnsupportedOperationException: Record requires ASM8\nat org.objectweb.asm.ClassVisitor.visitRecordComponent(ClassVisitor.java:323)\nat org.objectweb.asm.ClassReader.readRecordComponent(ClassReader.java:953)\nat org.objectweb.asm.ClassReader.accept(ClassReader.java:731)\nat org.objectweb.asm.ClassReader.accept(ClassReader.java:424)\nat org.glassfish.hk2.classmodel.reflect.Parser$5.on(Parser.java:336)\nat com.sun.enterprise.v3.server.ReadableArchiveScannerAdapter.handleEntry(ReadableArchiveScannerAdapter.java:137)\nat com.sun.enterprise.v3.server.ReadableArchiveScannerAdapter.onSelectedEntries(ReadableArchiveScannerAdapter.java:100)\nat org.glassfish.hk2.classmodel.reflect.Parser.doJob(Parser.java:321)\nat org.glassfish.hk2.classmodel.reflect.Parser.access$300(Parser.java:44)\nat org.glassfish.hk2.classmodel.reflect.Parser$3.call(Parser.java:280)\nat org.glassfish.hk2.classmodel.reflect.Parser$3.call(Parser.java:269)\nat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\nat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\nat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\nat java.base/java.lang.Thread.run(Thread.java:833)</p>\n<p>java.lang.UnsupportedOperationException: PermittedSubclasses requires ASM9\nat org.objectweb.asm.ClassVisitor.visitPermittedSubclass(ClassVisitor.java:281)\nat org.objectweb.asm.ClassReader.accept(ClassReader.java:706)\nat org.objectweb.asm.ClassReader.accept(ClassReader.java:424)\nat org.glassfish.hk2.classmodel.reflect.Parser$5.on(Parser.java:336)\nat com.sun.enterprise.v3.server.ReadableArchiveScannerAdapter.handleEntry(ReadableArchiveScannerAdapter.java:137)\nat com.sun.enterprise.v3.server.ReadableArchiveScannerAdapter.onSelectedEntries(ReadableArchiveScannerAdapter.java:100)\nat org.glassfish.hk2.classmodel.reflect.Parser.doJob(Parser.java:321)\nat org.glassfish.hk2.classmodel.reflect.Parser.access$300(Parser.java:44)\nat org.glassfish.hk2.classmodel.reflect.Parser$3.call(Parser.java:280)\nat org.glassfish.hk2.classmodel.reflect.Parser$3.call(Parser.java:269)\nat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\nat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\nat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\nat java.base/java.lang.Thread.run(Thread.java:833)</p>\n</blockquote>\n<p><strong>pom.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.1&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;demo&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;demo&lt;/name&gt;\n    &lt;description&gt;demo&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/jakarta.servlet/jakarta.servlet-api --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;jakarta.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;jakarta.servlet-api&lt;/artifactId&gt;\n            &lt;version&gt;6.0.0&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;!--            &lt;plugin&gt;\n                            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                        &lt;/plugin&gt;--&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping(&quot;/hello&quot;)\npublic String sayHello(@RequestParam(value = &quot;myName&quot;, defaultValue = &quot;World&quot;) String name) {\n    return String.format(&quot;Hello %s!&quot;, name);\n}\n</code></pre>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1672841958,"post_id":75006744,"comment_id":132363830,"body_markdown":"The dupe describes how to construct a &quot;Pair&quot;, substitute that for &quot;Map.Entry&quot;.","body":"The dupe describes how to construct a &quot;Pair&quot;, substitute that for &quot;Map.Entry&quot;."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1672842052,"post_id":75006744,"comment_id":132363879,"body_markdown":"The following is probably the sort of thing you should use (at least as the basis): `public class Alphas {\n    private String alpha2;\n    private String alpha3;\n}`","body":"The following is probably the sort of thing you should use (at least as the basis): <code>public class Alphas {     private String alpha2;     private String alpha3; }</code>"},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1672842108,"post_id":75006744,"comment_id":132363896,"body_markdown":"&quot;But I am looking for more sophisticated (and short) way to achieve that&quot; why do you need something sophisticated: `for (int i = 0; i &lt; list.length(); i += 2) map.put(list.get(i), list.get(i+1));` is pretty simple and short.","body":"&quot;But I am looking for more sophisticated (and short) way to achieve that&quot; why do you need something sophisticated: <code>for (int i = 0; i &lt; list.length(); i += 2) map.put(list.get(i), list.get(i+1));</code> is pretty simple and short."}],"owner":{"account_id":25242438,"reputation":1,"user_id":19076139,"display_name":"nbond"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1672841916,"answer_count":0,"score":0,"last_activity_date":1672841767,"creation_date":1672841767,"question_id":75006744,"body_markdown":"I have a list of Strings in exact strict order, which I need to convert to a Map, where key is always going to be an even index, starting from 0 and value is going to be the next element, so list is going to look something like this: [key,value,key,value]. By condition my list has fixed **even** size, but just to handle case where there is no pair either key or value may be null. It is easy to achieve using standard **for** loop and put elements based on if condition. \r\n\r\nBut I am looking for more sophisticated (and short) way to achieve that. Maybe there is some option to group elements by two, and than put them into map as key and value correspondingly. Or maybe some existing solution.\r\n\r\nI am grateful for any help.\r\n\r\nHere is a piece of code I work with: \r\n\r\n```\r\nResource resourceFile = applicationContext.getResource(ALPHA2_MAPPING_CSV);\r\n\r\n    var csvRows = CSVReaderUtil.parseFromCSV(resourceFile);\r\n\r\n    var alpha3AndAlpha2List = csvRows\r\n        .stream()\r\n        .flatMap(row -&gt; row.getCells().stream())\r\n        .filter(cell -&gt; cell.getHeader().equals(&quot;Alpha-2 code&quot;) || cell.getHeader().equals(&quot;Alpha-3 code&quot;))\r\n        .toList();\r\n```\r\n\r\n ","title":"Most efficient way to create a Map based on a List, where key is n element, and value is n+1, using Stream API or Guana, Apache Commons etc","body":"<p>I have a list of Strings in exact strict order, which I need to convert to a Map, where key is always going to be an even index, starting from 0 and value is going to be the next element, so list is going to look something like this: [key,value,key,value]. By condition my list has fixed <strong>even</strong> size, but just to handle case where there is no pair either key or value may be null. It is easy to achieve using standard <strong>for</strong> loop and put elements based on if condition.</p>\n<p>But I am looking for more sophisticated (and short) way to achieve that. Maybe there is some option to group elements by two, and than put them into map as key and value correspondingly. Or maybe some existing solution.</p>\n<p>I am grateful for any help.</p>\n<p>Here is a piece of code I work with:</p>\n<pre><code>Resource resourceFile = applicationContext.getResource(ALPHA2_MAPPING_CSV);\n\n    var csvRows = CSVReaderUtil.parseFromCSV(resourceFile);\n\n    var alpha3AndAlpha2List = csvRows\n        .stream()\n        .flatMap(row -&gt; row.getCells().stream())\n        .filter(cell -&gt; cell.getHeader().equals(&quot;Alpha-2 code&quot;) || cell.getHeader().equals(&quot;Alpha-3 code&quot;))\n        .toList();\n</code></pre>\n"},{"tags":["java","pdf","pdfbox"],"comments":[{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1672840740,"post_id":75006463,"comment_id":132363353,"body_markdown":"How about setting the fields to readonly by calling `setReadOnly(true)`? IIRC you can&#39;t do another certification signature.","body":"How about setting the fields to readonly by calling <code>setReadOnly(true)</code>? IIRC you can&#39;t do another certification signature."},{"owner":{"account_id":6124304,"reputation":13132,"user_id":4776831,"accept_rate":53,"display_name":"cre8"},"score":0,"creation_date":1672842065,"post_id":75006463,"comment_id":132363881,"body_markdown":"@TilmanHausherr it is possible to fill + sign a second time without breaking anything, see the update. I was just wondering why the steps are in another order an in adobe (there they sign the revision and THEN filled the forms).","body":"@TilmanHausherr it is possible to fill + sign a second time without breaking anything, see the update. I was just wondering why the steps are in another order an in adobe (there they sign the revision and THEN filled the forms)."},{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1672856361,"post_id":75006463,"comment_id":132369187,"body_markdown":"field 1 (`23 0 obj`) was added at the same time as the first signature. Field 2 (`24 0 obj`) was added later, you can see this with NOTEPAD++. Thus field 1 isn&#39;t an &quot;after signature&quot; change.","body":"field 1 (<code>23 0 obj</code>) was added at the same time as the first signature. Field 2 (<code>24 0 obj</code>) was added later, you can see this with NOTEPAD++. Thus field 1 isn&#39;t an &quot;after signature&quot; change."},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1672917187,"post_id":75006463,"comment_id":132382954,"body_markdown":"I just wanted to look into this but the shared files seems to be deleted...","body":"I just wanted to look into this but the shared files seems to be deleted..."},{"owner":{"account_id":6124304,"reputation":13132,"user_id":4776831,"accept_rate":53,"display_name":"cre8"},"score":0,"creation_date":1672932031,"post_id":75006463,"comment_id":132388367,"body_markdown":"@mkl I haven chosen the wrong provider, here you go: https://filebin.net/26gdmydj3hlbt86z","body":"@mkl I haven chosen the wrong provider, here you go: <a href=\"https://filebin.net/26gdmydj3hlbt86z\" rel=\"nofollow noreferrer\">filebin.net/26gdmydj3hlbt86z</a>"},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1673268280,"post_id":75006463,"comment_id":132453048,"body_markdown":"Before.pdf does not exactly match the origin of After.pdf but is at least similar. I&#39;ll take a look.","body":"Before.pdf does not exactly match the origin of After.pdf but is at least similar. I&#39;ll take a look."}],"owner":{"account_id":6124304,"reputation":13132,"user_id":4776831,"accept_rate":53,"display_name":"cre8"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672841734,"creation_date":1672840332,"question_id":75006463,"body_markdown":"Based on my previous question https://stackoverflow.com/questions/74997537/fill-out-field-for-pdf-revision-when-signing-with-pdfbox/75003497#75003497 I was able to fill out the PDF field with a valid signature:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nWhen looking at a signed document from AdobeSign they managed to group the fields like:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nI am not able to analyse the created document von Adobe since they locked it at the end with a password. Is this to make sure nobody is able to edit the forms after the signature (I know that the signature is not valid anymore after somebody did it, but it reduces the risk of a user by accidentally writing into the field.\r\n\r\n\r\n**Update:**\r\n\r\nsetting two signatures works and it will set the form fields in. But only for the Field 2, not the Field 1 from the first signature. see: https://file.io/cvHSBqRzXPyH\r\n\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/wnWi0.png\r\n  [2]: https://i.stack.imgur.com/UhAok.png\r\n  [3]: https://i.stack.imgur.com/iT3gA.png","title":"Group revision elements for signed PDFs with PDFBox","body":"<p>Based on my previous question <a href=\"https://stackoverflow.com/questions/74997537/fill-out-field-for-pdf-revision-when-signing-with-pdfbox/75003497#75003497\">Fill out field for pdf revision when signing with PDFbox</a> I was able to fill out the PDF field with a valid signature:</p>\n<p><a href=\"https://i.stack.imgur.com/wnWi0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wnWi0.png\" alt=\"enter image description here\" /></a></p>\n<p>When looking at a signed document from AdobeSign they managed to group the fields like:</p>\n<p><a href=\"https://i.stack.imgur.com/UhAok.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UhAok.png\" alt=\"enter image description here\" /></a></p>\n<p>I am not able to analyse the created document von Adobe since they locked it at the end with a password. Is this to make sure nobody is able to edit the forms after the signature (I know that the signature is not valid anymore after somebody did it, but it reduces the risk of a user by accidentally writing into the field.</p>\n<p><strong>Update:</strong></p>\n<p>setting two signatures works and it will set the form fields in. But only for the Field 2, not the Field 1 from the first signature. see: <a href=\"https://file.io/cvHSBqRzXPyH\" rel=\"nofollow noreferrer\">https://file.io/cvHSBqRzXPyH</a></p>\n<p><a href=\"https://i.stack.imgur.com/iT3gA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iT3gA.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring-boot","spring-security","spring-filter"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1672841821,"post_id":75004426,"comment_id":132363774,"body_markdown":"Your exception handling is wrong. You cannot write to the output then continute the response and write the rest of the response. As soon as you write someting you cannot continue the chain.","body":"Your exception handling is wrong. You cannot write to the output then continute the response and write the rest of the response. As soon as you write someting you cannot continue the chain."}],"owner":{"account_id":24741800,"reputation":51,"user_id":18628457,"display_name":"ngi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":410,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672841657,"creation_date":1672830012,"question_id":75004426,"body_markdown":"I added one Request filter which extends OncePerRequestFilter.&lt;br&gt; This filter I am using in my SpringBoot application which exposes end points for rest api.&lt;br&gt;\r\nAfter adding this filter it is working in localhost but when we are deploying it to any environment it is throwing this exception:&lt;br&gt;\r\nRequest processing failed; nested exception is ***org.springframework.http.converter.HttpMessageNotReadableException: I/O error while reading input message; nested exception is java.io.IOException: Stream closed***\r\n\r\n    @Component\r\n    public class RequestFilter extends OncePerRequestFilter {\r\n    \r\n    \tprivate static Logger LOGGER = LoggerFactory.getLogger(RequestFilter.class);\r\n    \tprivate static final String X_JWT_PAYLOAD_HEADER = &quot;x-jwt-payload&quot;;\r\n    \tprivate static final String AUTHORIZATION_HEADER = &quot;Authorization&quot;;\r\n    \tprivate static final String DATA_KEY = &quot;data&quot;;\r\n    \tprivate static final String MESSAGE_KEY = &quot;message&quot;;\r\n    \tprivate static final String ERROR_KEY = &quot;error&quot;;\r\n    \tprivate static final String ERRORS_KEY = &quot;errors&quot;;\r\n    \tprivate static final String EMPTY_JWT_TOKEN_MSG = &quot;Bad request, mandatory request header &quot; + X_JWT_PAYLOAD_HEADER\r\n    \t\t\t+ &quot;, is empty&quot;;\r\n   \t\r\n    \r\n    \t@Override\r\n    \tprotected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\r\n    \t\t\tthrows ServletException, IOException {\r\n    \t\t\tMap&lt;String, String&gt; errorDetails=new HashMap();\r\n    \t\ttry {\r\n    \t\t\tLOGGER.debug(&quot;Auth Header: {}&quot;, request.getHeader(AUTHORIZATION_HEADER));\r\n    \t\t\tLOGGER.info(&quot;JWT payload header: {}&quot;, request.getHeader(X_JWT_PAYLOAD_HEADER));\r\n    \r\n    \t\t\tif (request.getHeader(X_JWT_PAYLOAD_HEADER) == null) {\r\n    \t\t\t\terrorDetails = getErrorMessage(&quot;data1&quot;, &quot;dat2&quot;,&quot;data3&quot;);\r\n    \t\t\t\tresponse.setStatus(HttpStatus.BAD_REQUEST.value());\r\n    \t\t\t\tresponse.setContentType(MediaType.APPLICATION_JSON_VALUE);\r\n    \t\t\t\tnew ObjectMapper().writeValue(response.getOutputStream(), errorDetails);\r\n    \r\n    \t\t\t} else {\r\n    \t\t\t\t\r\n    \t\t\t\terrorDetails = getErrorMessage(&quot;data1&quot;,&quot;data2&quot;,&quot;data3&quot;);\r\n    \t\t\t\tresponse.setStatus(HttpStatus.BAD_REQUEST.value());//this can be any status HTTPStatus code\r\n    \t\t\t\tresponse.setContentType(MediaType.APPLICATION_JSON_VALUE);\r\n    \t\t\t\tnew ObjectMapper().writeValue(response.getOutputStream(), errorDetails);\r\n    \r\n    \t\t\t}\r\n    \r\n    \t\t\t\t\r\n    \t\t\tif (!isValid) {\r\n    \t\t\t\terrorDetails = getErrorMessage(&quot;data1&quot;,&quot;data2&quot;,&quot;data3&quot;);\r\n    \t\t\t\tresponse.setStatus(HttpStatus.UNAUTHORIZED.value());\r\n    \t\t\t\tresponse.setContentType(MediaType.APPLICATION_JSON_VALUE);\r\n    \t\t\t\tnew ObjectMapper().writeValue(response.getOutputStream(), errorDetails);\r\n    \t\t\t}\r\n    \r\n    \t\t\t\tLOGGER.debug(&quot;Processing Request Method {} URI {}&quot;, request.getMethod(), request.getRequestURI());\r\n    \t\t} catch (Exception e) {\r\n    \t\t\tLOGGER.error(&quot;Error validating token :&quot;, e);\r\n    \t\t\tMap&lt;String, String&gt; errorDetails = getErrorMessage(&quot;data1&quot;,&quot;data2&quot;,&quot;data3&quot;);\r\n    \r\n    \t\t\tresponse.setStatus(HttpStatus.INTERNAL_SERVER_ERROR.value());\r\n    \t\t\tresponse.setContentType(MediaType.APPLICATION_JSON_VALUE);\r\n    \t\t\tnew ObjectMapper().writeValue(response.getOutputStream(), errorDetails);\r\n    \t\t\tfilterChain.doFilter(request, response);\r\n    \t\t}\r\n    \t\tfilterChain.doFilter(request, response);\r\n    \t}\r\n    \r\n    \tprivate Map&lt;String, String&gt; getErrorMessage(String dataValue, String messageValue, String errorsValue) {\r\n    \t\tMap&lt;String, String&gt; errorDetails = new HashMap&lt;&gt;();\r\n    \t\terrorDetails.put(DATA_KEY, dataValue);\r\n    \t\terrorDetails.put(MESSAGE_KEY, messageValue);\r\n    \t\terrorDetails.put(ERROR_KEY, &quot;true&quot;);\r\n    \t\terrorDetails.put(ERRORS_KEY, errorsValue);\r\n    \t\treturn errorDetails;\r\n    \t}\r\n    }\r\n\r\n","title":"After adding a filter which extends OncePerRequestFilter, getting exception &quot;I/O error while reading input message; nested exception is Stream closed","body":"<p>I added one Request filter which extends OncePerRequestFilter.<br> This filter I am using in my SpringBoot application which exposes end points for rest api.<br>\nAfter adding this filter it is working in localhost but when we are deploying it to any environment it is throwing this exception:<br>\nRequest processing failed; nested exception is <em><strong>org.springframework.http.converter.HttpMessageNotReadableException: I/O error while reading input message; nested exception is java.io.IOException: Stream closed</strong></em></p>\n<pre><code>@Component\npublic class RequestFilter extends OncePerRequestFilter {\n\n    private static Logger LOGGER = LoggerFactory.getLogger(RequestFilter.class);\n    private static final String X_JWT_PAYLOAD_HEADER = &quot;x-jwt-payload&quot;;\n    private static final String AUTHORIZATION_HEADER = &quot;Authorization&quot;;\n    private static final String DATA_KEY = &quot;data&quot;;\n    private static final String MESSAGE_KEY = &quot;message&quot;;\n    private static final String ERROR_KEY = &quot;error&quot;;\n    private static final String ERRORS_KEY = &quot;errors&quot;;\n    private static final String EMPTY_JWT_TOKEN_MSG = &quot;Bad request, mandatory request header &quot; + X_JWT_PAYLOAD_HEADER\n            + &quot;, is empty&quot;;\n\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\n            throws ServletException, IOException {\n            Map&lt;String, String&gt; errorDetails=new HashMap();\n        try {\n            LOGGER.debug(&quot;Auth Header: {}&quot;, request.getHeader(AUTHORIZATION_HEADER));\n            LOGGER.info(&quot;JWT payload header: {}&quot;, request.getHeader(X_JWT_PAYLOAD_HEADER));\n\n            if (request.getHeader(X_JWT_PAYLOAD_HEADER) == null) {\n                errorDetails = getErrorMessage(&quot;data1&quot;, &quot;dat2&quot;,&quot;data3&quot;);\n                response.setStatus(HttpStatus.BAD_REQUEST.value());\n                response.setContentType(MediaType.APPLICATION_JSON_VALUE);\n                new ObjectMapper().writeValue(response.getOutputStream(), errorDetails);\n\n            } else {\n                \n                errorDetails = getErrorMessage(&quot;data1&quot;,&quot;data2&quot;,&quot;data3&quot;);\n                response.setStatus(HttpStatus.BAD_REQUEST.value());//this can be any status HTTPStatus code\n                response.setContentType(MediaType.APPLICATION_JSON_VALUE);\n                new ObjectMapper().writeValue(response.getOutputStream(), errorDetails);\n\n            }\n\n                \n            if (!isValid) {\n                errorDetails = getErrorMessage(&quot;data1&quot;,&quot;data2&quot;,&quot;data3&quot;);\n                response.setStatus(HttpStatus.UNAUTHORIZED.value());\n                response.setContentType(MediaType.APPLICATION_JSON_VALUE);\n                new ObjectMapper().writeValue(response.getOutputStream(), errorDetails);\n            }\n\n                LOGGER.debug(&quot;Processing Request Method {} URI {}&quot;, request.getMethod(), request.getRequestURI());\n        } catch (Exception e) {\n            LOGGER.error(&quot;Error validating token :&quot;, e);\n            Map&lt;String, String&gt; errorDetails = getErrorMessage(&quot;data1&quot;,&quot;data2&quot;,&quot;data3&quot;);\n\n            response.setStatus(HttpStatus.INTERNAL_SERVER_ERROR.value());\n            response.setContentType(MediaType.APPLICATION_JSON_VALUE);\n            new ObjectMapper().writeValue(response.getOutputStream(), errorDetails);\n            filterChain.doFilter(request, response);\n        }\n        filterChain.doFilter(request, response);\n    }\n\n    private Map&lt;String, String&gt; getErrorMessage(String dataValue, String messageValue, String errorsValue) {\n        Map&lt;String, String&gt; errorDetails = new HashMap&lt;&gt;();\n        errorDetails.put(DATA_KEY, dataValue);\n        errorDetails.put(MESSAGE_KEY, messageValue);\n        errorDetails.put(ERROR_KEY, &quot;true&quot;);\n        errorDetails.put(ERRORS_KEY, errorsValue);\n        return errorDetails;\n    }\n}\n</code></pre>\n"},{"tags":["java","algorithm","graph","artificial-intelligence","depth-first-search"],"comments":[{"owner":{"account_id":20345523,"reputation":160,"user_id":14923551,"display_name":"Samuel"},"score":0,"creation_date":1672838637,"post_id":75006108,"comment_id":132362529,"body_markdown":"simply add a check if u have reached the target?","body":"simply add a check if u have reached the target?"},{"owner":{"account_id":9061,"reputation":19427,"user_id":16582,"accept_rate":67,"display_name":"ravenspoint"},"score":0,"creation_date":1672841700,"post_id":75006108,"comment_id":132363722,"body_markdown":"Add a visitor to your DFS which is called each time a node is visited.  ( This is a very useful bit of code that you should always have around ).  In the visitor throw an exception if the visited node is the target.","body":"Add a visitor to your DFS which is called each time a node is visited.  ( This is a very useful bit of code that you should always have around ).  In the visitor throw an exception if the visited node is the target."},{"owner":{"account_id":43694,"reputation":2250,"user_id":127839,"accept_rate":100,"display_name":"Oliver Mason"},"score":0,"creation_date":1672841901,"post_id":75006108,"comment_id":132363799,"body_markdown":"It&#39;s not ideal if you completely change the question after there have been answers, as they will then not correspond to your original question any more. Please ask a new question instead.","body":"It&#39;s not ideal if you completely change the question after there have been answers, as they will then not correspond to your original question any more. Please ask a new question instead."},{"owner":{"account_id":17276750,"reputation":43,"user_id":12511226,"display_name":"Yara Abd"},"score":0,"creation_date":1672842182,"post_id":75006108,"comment_id":132363925,"body_markdown":"ok... sorry....","body":"ok... sorry...."}],"answers":[{"tags":[],"owner":{"account_id":20345523,"reputation":160,"user_id":14923551,"display_name":"Samuel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672838756,"creation_date":1672838756,"answer_id":75006144,"question_id":75006108,"body_markdown":"in this modified DFS, u also pass the target you want to check\r\nso if you have reached your desired target. you simply return\r\n\r\n    void DFS(int vertex, int target) {\r\n        visited[vertex] = true; \r\n        System.out.print(vertex + &quot; &quot;);  \r\n      \r\n        Iterator&lt;Integer&gt; it = adj[vertex].listIterator();  \r\n        while (it.hasNext()) {  \r\n            int n = it.next();  \r\n            if (!visited[n]) {\r\n                if (n == target) {\r\n                    //return when u  reach the target\r\n                    return;\r\n                }\r\n                DFS(n, target);  \r\n            }\r\n        }  \r\n    }","title":"DFS algorithm with target node","body":"<p>in this modified DFS, u also pass the target you want to check\nso if you have reached your desired target. you simply return</p>\n<pre><code>void DFS(int vertex, int target) {\n    visited[vertex] = true; \n    System.out.print(vertex + &quot; &quot;);  \n  \n    Iterator&lt;Integer&gt; it = adj[vertex].listIterator();  \n    while (it.hasNext()) {  \n        int n = it.next();  \n        if (!visited[n]) {\n            if (n == target) {\n                //return when u  reach the target\n                return;\n            }\n            DFS(n, target);  \n        }\n    }  \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":43694,"reputation":2250,"user_id":127839,"accept_rate":100,"display_name":"Oliver Mason"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672841525,"creation_date":1672841525,"answer_id":75006693,"question_id":75006108,"body_markdown":"You don&#39;t actually terminate the search. All you do is call the DFS recursively if the current node has not been visited. Then, regardless of whether you found your target or not, you look at the next node.\r\n\r\nYou need to add a termination into the iterator. The first thing I would do is give the DFS function a return value: return `true` if the target has been reached, and `false` if not. Then, in your loop, break out of the loop if the return value is `true`, and return that from the current run. At the end of the while-loop, return `false` by default, as you have not found the target.\r\n\r\nUpdate: You have now completely changed the question. My answer applies to the first version of it.","title":"DFS algorithm with target node","body":"<p>You don't actually terminate the search. All you do is call the DFS recursively if the current node has not been visited. Then, regardless of whether you found your target or not, you look at the next node.</p>\n<p>You need to add a termination into the iterator. The first thing I would do is give the DFS function a return value: return <code>true</code> if the target has been reached, and <code>false</code> if not. Then, in your loop, break out of the loop if the return value is <code>true</code>, and return that from the current run. At the end of the while-loop, return <code>false</code> by default, as you have not found the target.</p>\n<p>Update: You have now completely changed the question. My answer applies to the first version of it.</p>\n"}],"owner":{"account_id":17276750,"reputation":43,"user_id":12511226,"display_name":"Yara Abd"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":155,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1672841525,"creation_date":1672838574,"question_id":75006108,"body_markdown":"I have to use DFS algorithm for my university project.\r\nI saw this link [DFSlink][1] but i face this problem.\r\nThe Depth First Search algorithm is Traversal it goes to every node in the graph but i want to define a target node when i reach to it i want to stop the algorithm\r\n\r\n    while (i.hasNext()) {\r\n                    int n = i.next();\r\n                    if (!visited[n]) {\r\n                        if (n == goal) {\r\n                            System.err.print(infoLinkedList.get(1).nameStation+&quot;:&quot;);\r\n                            System.err.print(&quot; |&quot;+goal+ &quot;| -&gt; &quot;);\r\n                            return;\r\n                        }\r\n                        DFSUtil_BUS(n, goal, visited);\r\n                    }\r\n                } \r\n\r\nHow can i do this please?\r\n\r\n[1]: https://www.javatpoint.com/depth-first-search-algorithm","title":"DFS algorithm with target node","body":"<p>I have to use DFS algorithm for my university project.\nI saw this link <a href=\"https://www.javatpoint.com/depth-first-search-algorithm\" rel=\"nofollow noreferrer\">DFSlink</a> but i face this problem.\nThe Depth First Search algorithm is Traversal it goes to every node in the graph but i want to define a target node when i reach to it i want to stop the algorithm</p>\n<pre><code>while (i.hasNext()) {\n                int n = i.next();\n                if (!visited[n]) {\n                    if (n == goal) {\n                        System.err.print(infoLinkedList.get(1).nameStation+&quot;:&quot;);\n                        System.err.print(&quot; |&quot;+goal+ &quot;| -&gt; &quot;);\n                        return;\n                    }\n                    DFSUtil_BUS(n, goal, visited);\n                }\n            } \n</code></pre>\n<p>How can i do this please?</p>\n"},{"tags":["java","android","kotlin","google-calendar-api","android-tv"],"comments":[{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1672845218,"post_id":75006671,"comment_id":132365080,"body_markdown":"It is highly unlikely that an Android TV device has a calendar app, let alone one that the user has configured for their calendars.","body":"It is highly unlikely that an Android TV device has a calendar app, let alone one that the user has configured for their calendars."},{"owner":{"account_id":4225669,"reputation":170,"user_id":3459259,"accept_rate":50,"display_name":"syedjibharat"},"score":0,"creation_date":1673351633,"post_id":75006671,"comment_id":132474483,"body_markdown":"with same account logged in to the Android TV should list the events. But I&#39;m getting the empty cursor list.\n\n    val cursor = this.baseContext.contentResolver.query(CalendarContract.Events.CONTENT_URI,\n            projection,\n            selection,\n            null,\n            null)","body":"with same account logged in to the Android TV should list the events. But I&#39;m getting the empty cursor list.      val cursor = this.baseContext.contentResolver.query(CalendarContract.Even&zwnj;&#8203;ts.CONTENT_URI,             projection,             selection,             null,             null)"},{"owner":{"account_id":4225669,"reputation":170,"user_id":3459259,"accept_rate":50,"display_name":"syedjibharat"},"score":0,"creation_date":1673351707,"post_id":75006671,"comment_id":132474508,"body_markdown":"The above code is working for mobile not for TV. can anyone pls help to resolve this.","body":"The above code is working for mobile not for TV. can anyone pls help to resolve this."},{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1673352712,"post_id":75006671,"comment_id":132474832,"body_markdown":"&quot;with same account logged in to the Android TV should list the events&quot; -- I have no idea how you came to this conclusion.","body":"&quot;with same account logged in to the Android TV should list the events&quot; -- I have no idea how you came to this conclusion."}],"owner":{"account_id":4225669,"reputation":170,"user_id":3459259,"accept_rate":50,"display_name":"syedjibharat"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":189,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672841431,"creation_date":1672841431,"question_id":75006671,"body_markdown":"I&#39;m currently working on Android TV app, I need to retrieve google calendar events and show it in the TV app UI. I used the ContentResolver and calendar events URI  &quot;Uri.parse(&quot;content://com.android.calendar/events&quot;)&quot; to get the events, but unable to retrieve the events and its showing as an empty list from the cursor. The same code is working fine in Android mobile app, because it is retrieving the events from the calendar app, that was not available in the Android TV. ","title":"How to retrieve google calendar events in Android TV app","body":"<p>I'm currently working on Android TV app, I need to retrieve google calendar events and show it in the TV app UI. I used the ContentResolver and calendar events URI  &quot;Uri.parse(&quot;content://com.android.calendar/events&quot;)&quot; to get the events, but unable to retrieve the events and its showing as an empty list from the cursor. The same code is working fine in Android mobile app, because it is retrieving the events from the calendar app, that was not available in the Android TV.</p>\n"},{"tags":["java","javap"],"comments":[{"owner":{"account_id":13883284,"reputation":747,"user_id":10023107,"display_name":"Chris"},"score":0,"creation_date":1542969576,"post_id":53445007,"comment_id":93762986,"body_markdown":"You have to set the path/environment variable.\nplease see: https://stackoverflow.com/questions/1672281/environment-variables-for-java-installation","body":"You have to set the path/environment variable. please see: <a href=\"https://stackoverflow.com/questions/1672281/environment-variables-for-java-installation\" title=\"environment variables for java installation\">stackoverflow.com/questions/1672281/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":1754145,"reputation":43960,"user_id":1602555,"display_name":"Karol Dowbecki"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1553275746,"creation_date":1542969494,"answer_id":53445069,"question_id":53445007,"body_markdown":"You must have your `$JAVA_HOME/bin` directory added to system `PATH` for `javap` command to be available without it&#39;s absolute path.\r\n\r\nAlternatively you can call `javap` using the absolute path:\r\n\r\n    /usr/lib/.../bin/javap Simulation.class","title":"JDK installed but no javap?","body":"<p>You must have your <code>$JAVA_HOME/bin</code> directory added to system <code>PATH</code> for <code>javap</code> command to be available without it's absolute path.</p>\n\n<p>Alternatively you can call <code>javap</code> using the absolute path:</p>\n\n<pre><code>/usr/lib/.../bin/javap Simulation.class\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2854435,"reputation":2798,"user_id":2853439,"accept_rate":50,"display_name":"Prateek Jain"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1542969577,"creation_date":1542969577,"answer_id":53445092,"question_id":53445007,"body_markdown":"append $JAVA_HOME/bin to system $PATH variable. for example on linux\r\n\r\nJAVA_HOME= &quot;path of java installation on system&quot;\r\n\r\n    export PATH = $JAVA_HOME/bin:$PATH\r\n\r\n","title":"JDK installed but no javap?","body":"<p>append $JAVA_HOME/bin to system $PATH variable. for example on linux</p>\n\n<p>JAVA_HOME= \"path of java installation on system\"</p>\n\n<pre><code>export PATH = $JAVA_HOME/bin:$PATH\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2342631,"reputation":57,"user_id":3156219,"display_name":"Rajiv Bandi"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1672841043,"creation_date":1542969741,"answer_id":53445130,"question_id":53445007,"body_markdown":"Assuming you are on Windows, check in your environment variable PATH whether path to Java executables is set.\r\nEx. If you have installed Java on path,say, C:\\Program Files\\Java\\jdk-10\r\nThen you have to add C:\\Program Files\\Java\\jdk-10\\bin to your PATH environment variable to be able to execute java commands from anywhere on command line.\r\n\r\nReferences for Oracle Docs\r\n\r\n - https://docs.oracle.com/javase/10/install/installation-jdk-and-jre-microsoft-windows-platforms.htm#JSJIG-GUID-DAF345BA-B3E7-4CF2-B87A-B6662D691840\r\n - https://www.java.com/en/download/help/path.xml\r\n\r\nOn a sidenote, recommend you to move to Java 11 or 17 now that Java 10 is no longer supported. The above instructions would still remain same.","title":"JDK installed but no javap?","body":"<p>Assuming you are on Windows, check in your environment variable PATH whether path to Java executables is set.\nEx. If you have installed Java on path,say, C:\\Program Files\\Java\\jdk-10\nThen you have to add C:\\Program Files\\Java\\jdk-10\\bin to your PATH environment variable to be able to execute java commands from anywhere on command line.</p>\n<p>References for Oracle Docs</p>\n<ul>\n<li><a href=\"https://docs.oracle.com/javase/10/install/installation-jdk-and-jre-microsoft-windows-platforms.htm#JSJIG-GUID-DAF345BA-B3E7-4CF2-B87A-B6662D691840\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/10/install/installation-jdk-and-jre-microsoft-windows-platforms.htm#JSJIG-GUID-DAF345BA-B3E7-4CF2-B87A-B6662D691840</a></li>\n<li><a href=\"https://www.java.com/en/download/help/path.xml\" rel=\"nofollow noreferrer\">https://www.java.com/en/download/help/path.xml</a></li>\n</ul>\n<p>On a sidenote, recommend you to move to Java 11 or 17 now that Java 10 is no longer supported. The above instructions would still remain same.</p>\n"},{"tags":[],"owner":{"account_id":24808863,"reputation":109,"user_id":18690553,"display_name":"Ankit"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1648982824,"creation_date":1648982824,"answer_id":71725160,"question_id":53445007,"body_markdown":"1) Open the control panel and type envir in search bar.\r\n\r\n2) Click on edit the system environment variables.\r\n\r\n3) Click on environment variables in the advanced system properties.\r\n\r\n4) Click on path mentioned in user variables.\r\n\r\n5) Edit the path, and click new and paste the path of java jdk.\r\n\r\n6) In my system, the path is C:\\Program Files\\Java\\jdk-17.0.2\\bin, it could be different for your system.\r\n\r\n7) Click ok, the problem must be solved now.","title":"JDK installed but no javap?","body":"<ol>\n<li><p>Open the control panel and type envir in search bar.</p>\n</li>\n<li><p>Click on edit the system environment variables.</p>\n</li>\n<li><p>Click on environment variables in the advanced system properties.</p>\n</li>\n<li><p>Click on path mentioned in user variables.</p>\n</li>\n<li><p>Edit the path, and click new and paste the path of java jdk.</p>\n</li>\n<li><p>In my system, the path is C:\\Program Files\\Java\\jdk-17.0.2\\bin, it could be different for your system.</p>\n</li>\n<li><p>Click ok, the problem must be solved now.</p>\n</li>\n</ol>\n"}],"owner":{"account_id":7239864,"reputation":101,"user_id":5523770,"accept_rate":25,"display_name":"Temerita"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17419,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":4,"score":4,"last_activity_date":1672841043,"creation_date":1542969162,"question_id":53445007,"body_markdown":"I have the JDK 10.0.2 installed, have the cmd opened in the folder of the class files of my program and try the command: javap Simulation.class . \r\nI get the error that the command javap is not found. What do I do wrong?","title":"JDK installed but no javap?","body":"<p>I have the JDK 10.0.2 installed, have the cmd opened in the folder of the class files of my program and try the command: javap Simulation.class . \nI get the error that the command javap is not found. What do I do wrong?</p>\n"},{"tags":["java","applet","toolkit"],"owner":{"account_id":10895998,"reputation":21,"user_id":8009958,"display_name":"EngBashir"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672840372,"creation_date":1672840372,"question_id":75006472,"body_markdown":"I have developed a small applet to display welcome message, the applet is registered to PROFILE_DOWNLOAD event and its successfully works\r\nthe message appears when the SIM registered to network.\r\n\r\n\r\n```\r\nswitch (event) {\r\n    case EVENT_PROFILE_DOWNLOAD:\r\n         reg.setEvent(EVENT_EVENT_DOWNLOAD_LOCATION_STATUS);\r\n         break;\r\n    case EVENT_EVENT_DOWNLOAD_LOCATION_STATUS:\r\n\ttheEnv = EnvelopeHandler.getTheHandler();\r\n\t// check location status tag\r\n\tif ((Displayed == false) &amp;&amp; (theEnv.findTLV(TAG_LOCATION_STATUS, (byte) 1) != TLV_NOT_FOUND)){\r\n\t   if (theEnv.getValueByte((short) 0) == (byte) 0) {\r\n                proHdlr.initDisplayText((byte) 0x01, DCS_8_BIT_DATA, English_Welcome, (short) 0,(short) Welcome_msg.length);\r\n                proHdlr.send();\r\n                reg.clearEvent(EVENT_EVENT_DOWNLOAD_LOCATION_STATUS);\r\n\t    }\r\n\t}\r\n     break;\r\n```\r\n\r\nIs it possible to display icon or clickable URL with displayed message.\r\n\r\nThanks \r\n\r\ndisplay message toolkit applet","title":"Display SIM toolkit Icon, URL","body":"<p>I have developed a small applet to display welcome message, the applet is registered to PROFILE_DOWNLOAD event and its successfully works\nthe message appears when the SIM registered to network.</p>\n<pre><code>switch (event) {\n    case EVENT_PROFILE_DOWNLOAD:\n         reg.setEvent(EVENT_EVENT_DOWNLOAD_LOCATION_STATUS);\n         break;\n    case EVENT_EVENT_DOWNLOAD_LOCATION_STATUS:\n    theEnv = EnvelopeHandler.getTheHandler();\n    // check location status tag\n    if ((Displayed == false) &amp;&amp; (theEnv.findTLV(TAG_LOCATION_STATUS, (byte) 1) != TLV_NOT_FOUND)){\n       if (theEnv.getValueByte((short) 0) == (byte) 0) {\n                proHdlr.initDisplayText((byte) 0x01, DCS_8_BIT_DATA, English_Welcome, (short) 0,(short) Welcome_msg.length);\n                proHdlr.send();\n                reg.clearEvent(EVENT_EVENT_DOWNLOAD_LOCATION_STATUS);\n        }\n    }\n     break;\n</code></pre>\n<p>Is it possible to display icon or clickable URL with displayed message.</p>\n<p>Thanks</p>\n<p>display message toolkit applet</p>\n"},{"tags":["java","ssl","https"],"owner":{"account_id":26136616,"reputation":194,"user_id":19826534,"display_name":"Ozgur Baykal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":142,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1672840124,"creation_date":1672840124,"question_id":75006416,"body_markdown":"I created an https server running with device ip addresses and port 8080 in android app with Java. \r\n(Like: 192.168.1.20:8080/something) \r\n\r\nCurrently I have created sslContext with a self-signed BKS file, of course browsers do not trust this certificate because it is self-signed. I used ZeroSSL to generate an IP address specific ssl certificate but in the &quot;Verify Domain&quot; stage two options are available DNS (CNAME) and Html File Upload. I haven&#39;t been able to find and know anything about how I can use these options in my own code.\r\n\r\nAre there any other methods besides ZeroSSL? Can you give an idea how I can create a structure?\r\n\r\nAlso if I successfully verify an SSL certificate for the IP address. What action should I take when the IP address of this android device changes? Because we created the certificate for the state before the IP address changed.\r\n\r\nMy Create Https Server Code:\r\n\r\n```\r\n        try {\r\n            InetSocketAddress address = new InetSocketAddress(8080);\r\n            Log.i(HttpServerManager.getHttpServerManager().TAG, &quot;HttpServer starting up: &quot;);\r\n\r\n            HttpServerManager.getHttpServerManager().httpServer = HttpsServer.create(address, 0);\r\n\r\n\r\n            SSLContext sslContext = SSLContext.getInstance(&quot;TLS&quot;);\r\n            char[] password = &quot;123456&quot;.toCharArray();\r\n\r\n            // Initialise the keystore\r\n            KeyStore ks = KeyStore.getInstance(&quot;BKS&quot;);\r\n            ks.load(HoneywellApplication.instance().getApplicationContext()\r\n                    .getResources().openRawResource(R.raw.mynewkey), password);\r\n\r\n            // Set up the key manager factory\r\n            KeyManagerFactory kmf = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());\r\n            kmf.init(ks, password);\r\n\r\n            // Set up the trust manager factory\r\n            TrustManagerFactory tmf = TrustManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());\r\n            tmf.init(ks);\r\n\r\n            // Set up the HTTPS context and parameters\r\n            sslContext.init(kmf.getKeyManagers(), tmf.getTrustManagers(), null);\r\n            HttpServerManager.getHttpServerManager().httpServer.setHttpsConfigurator(new HttpsConfigurator(sslContext) {\r\n                public void configure(HttpsParameters params) {\r\n                    try {\r\n\r\n                        // Initialise the SSL context\r\n                        SSLContext c = SSLContext.getDefault();\r\n                        SSLEngine engine = c.createSSLEngine();\r\n                        params.setNeedClientAuth(false);\r\n                        params.setCipherSuites(engine.getEnabledCipherSuites());\r\n                        params.setProtocols(engine.getEnabledProtocols());\r\n\r\n                        // Get the default parameters\r\n                        SSLParameters defaultSSLParameters = c.getDefaultSSLParameters();\r\n                        params.setSSLParameters(defaultSSLParameters);\r\n                    } catch (Exception ex) {\r\n                        Log.e(HttpServerManager.getHttpServerManager().TAG, &quot;HttpsServer configure ex: &quot; + ex.getLocalizedMessage());\r\n\r\n                    }\r\n                }\r\n            });\r\n\r\n            HttpServerManager.getHttpServerManager().httpServer.createContext(&quot;/&quot;, new RootHandler());\r\n\r\n            HttpServerManager.getHttpServerManager().httpServer.setExecutor(null);\r\n            HttpServerManager.getHttpServerManager().httpServer.start();\r\n\r\n            Log.i(HttpServerManager.getHttpServerManager().TAG, &quot;HttpServer started&quot;);\r\n\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n```","title":"Verifying ssl certificate for an https server created with device ip address in java","body":"<p>I created an https server running with device ip addresses and port 8080 in android app with Java.\n(Like: 192.168.1.20:8080/something)</p>\n<p>Currently I have created sslContext with a self-signed BKS file, of course browsers do not trust this certificate because it is self-signed. I used ZeroSSL to generate an IP address specific ssl certificate but in the &quot;Verify Domain&quot; stage two options are available DNS (CNAME) and Html File Upload. I haven't been able to find and know anything about how I can use these options in my own code.</p>\n<p>Are there any other methods besides ZeroSSL? Can you give an idea how I can create a structure?</p>\n<p>Also if I successfully verify an SSL certificate for the IP address. What action should I take when the IP address of this android device changes? Because we created the certificate for the state before the IP address changed.</p>\n<p>My Create Https Server Code:</p>\n<pre><code>        try {\n            InetSocketAddress address = new InetSocketAddress(8080);\n            Log.i(HttpServerManager.getHttpServerManager().TAG, &quot;HttpServer starting up: &quot;);\n\n            HttpServerManager.getHttpServerManager().httpServer = HttpsServer.create(address, 0);\n\n\n            SSLContext sslContext = SSLContext.getInstance(&quot;TLS&quot;);\n            char[] password = &quot;123456&quot;.toCharArray();\n\n            // Initialise the keystore\n            KeyStore ks = KeyStore.getInstance(&quot;BKS&quot;);\n            ks.load(HoneywellApplication.instance().getApplicationContext()\n                    .getResources().openRawResource(R.raw.mynewkey), password);\n\n            // Set up the key manager factory\n            KeyManagerFactory kmf = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());\n            kmf.init(ks, password);\n\n            // Set up the trust manager factory\n            TrustManagerFactory tmf = TrustManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());\n            tmf.init(ks);\n\n            // Set up the HTTPS context and parameters\n            sslContext.init(kmf.getKeyManagers(), tmf.getTrustManagers(), null);\n            HttpServerManager.getHttpServerManager().httpServer.setHttpsConfigurator(new HttpsConfigurator(sslContext) {\n                public void configure(HttpsParameters params) {\n                    try {\n\n                        // Initialise the SSL context\n                        SSLContext c = SSLContext.getDefault();\n                        SSLEngine engine = c.createSSLEngine();\n                        params.setNeedClientAuth(false);\n                        params.setCipherSuites(engine.getEnabledCipherSuites());\n                        params.setProtocols(engine.getEnabledProtocols());\n\n                        // Get the default parameters\n                        SSLParameters defaultSSLParameters = c.getDefaultSSLParameters();\n                        params.setSSLParameters(defaultSSLParameters);\n                    } catch (Exception ex) {\n                        Log.e(HttpServerManager.getHttpServerManager().TAG, &quot;HttpsServer configure ex: &quot; + ex.getLocalizedMessage());\n\n                    }\n                }\n            });\n\n            HttpServerManager.getHttpServerManager().httpServer.createContext(&quot;/&quot;, new RootHandler());\n\n            HttpServerManager.getHttpServerManager().httpServer.setExecutor(null);\n            HttpServerManager.getHttpServerManager().httpServer.start();\n\n            Log.i(HttpServerManager.getHttpServerManager().TAG, &quot;HttpServer started&quot;);\n\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n</code></pre>\n"},{"tags":["java","complex-numbers"],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672839842,"creation_date":1672839842,"answer_id":75006374,"question_id":75006160,"body_markdown":"To fully understand it, it gets a little complicated!\r\n\r\nComputers aren&#39;t magical; there is a limit to how &#39;large&#39; a number you store can be. For example, `int` can only store between -2147483648 and +2147483647 (try it!). Those numbers aren&#39;t arbitrary, it&#39;s `2^31` (2 to the power of 31 - `2*2*2*2*...`) for both the positive and negative numbers. Because ints use 32 bits. One bit for the sign, 31 bits for the number.\r\n\r\n`double` is similarly restricted. It uses 64 bits, but it&#39;s still limited. Only 2^64 different numbers can be stored. (Why? Math - if I give you 3 light switches and the only way you can communicate with me is to toggle them and then leave the room, there&#39;s only at most 8 different messages you can send me. That&#39;s because `2^3 = 8`. With 64 lightswitches it&#39;s `2^64`. That&#39;s a lot of numbers, but there are an infinite amount of numbers between 0 and 1, let alone in all of infinity).\r\n\r\nSo, given that doubles can only store 2^64 unique numbers, which numbers _can_ doubles store? It&#39;s as if someone threw 2^64 darts at the number line - those are numbers double can store. Anything else a double __can not__ store; if you try to, or the result of a calculation is a value that doesn&#39;t have a &#39;dart&#39;, it gets silently rounded to the nearest dart.\r\n\r\nThe darts aren&#39;t thrown arbitrarily; if you imagine the number line, there are as many darts around 0-2 as there are everywhere else - the nearer to 1.0, the more dense the darts are packed. Eventually, above 2^52, there&#39;s less than one dart per whole number (with the weird effect that therefore `x+1` can be equal to `x`, for sufficiently large `x`, even! - the result is rounded to the nearest dart which eventually is just `x` again).\r\n\r\nThis means errors occur, and the larger the number, the higher the error is likely to be. This means that equality is then complicated. Simple example:\r\n\r\n```\r\ndouble x = 0.0;\r\nfor (int i = 0; i &lt; 10; i++) x += 0.1;\r\ndouble y = 1.0;\r\nSystem.out.println(x == y); // This prints false!!!\r\nSystem.out.println(x - y);\r\n```\r\n\r\nThe difference (the last line) prints `-1.1102230246251565E-16` - so a really tiny difference (E-16 means 10^-16, so, the difference is -0.000000000000000011102230246251565.\r\n\r\nBut.. 10 * 0.1 __is__ 1.0, so why does that print false? Because of that darts thing - rounding killed you. Computers count in binary; while &quot;one tenth&quot; works well in decimal (It&#39;s just 0.1), just like &quot;one third&quot; __does not__ &#39;work&#39; in decimal (it&#39;s 0.33333333... you can never get it perfect), one tenth is similarly not quite perfect in binary. Hence, yup, 0.1 isn&#39;t quite on a dart, and each intermediate value (0.1, 0.2, 0.3) isn&#39;t a dart either, so you keep compounding 10 tiny rounding errors.\r\n\r\nThe solution is, when wanting to consider if 2 double values are &#39;equal&#39;, that you can&#39;t just use `==`, you need to define it more as &#39;are they __really__ close to each other?&#39; instead.\r\n\r\nHence this code checks the difference (`Math.abs(x-y)` is just `x-y`, with the sign removed: The difference between x and y, and checks if that is really tiny. How tiny? Well, in basis, EPSILON (so, `1E-14`, which is scientific notation and means the same as -0.00000000000001), except, we scale this a bit (multiply it by _the largest_ amongst x and y), because the errors tend to be larger in magnitude when you move away from the 0, because there are fewer and fewer darts as you get further and further away from it.\r\n\r\nApplying it to our `0.1*10 vs 1.0` situation:\r\n\r\n```java\r\ndouble x = 0.0;\r\nfor (int i = 0; i &lt; 10; i++) x += 0.1;\r\ndouble y = 1.0;\r\nSystem.out.println(x == y); // This prints false!!!\r\ndouble EPSILON = 1E-14;\r\nSystem.out.println(Math.abs(x-y) &lt;= EPSILON * Math.max(Math.abs(x),\r\nMath.abs(y)));\r\n```\r\n\r\nThat last line prints `true`.","title":"Java simple complex number class","body":"<p>To fully understand it, it gets a little complicated!</p>\n<p>Computers aren't magical; there is a limit to how 'large' a number you store can be. For example, <code>int</code> can only store between -2147483648 and +2147483647 (try it!). Those numbers aren't arbitrary, it's <code>2^31</code> (2 to the power of 31 - <code>2*2*2*2*...</code>) for both the positive and negative numbers. Because ints use 32 bits. One bit for the sign, 31 bits for the number.</p>\n<p><code>double</code> is similarly restricted. It uses 64 bits, but it's still limited. Only 2^64 different numbers can be stored. (Why? Math - if I give you 3 light switches and the only way you can communicate with me is to toggle them and then leave the room, there's only at most 8 different messages you can send me. That's because <code>2^3 = 8</code>. With 64 lightswitches it's <code>2^64</code>. That's a lot of numbers, but there are an infinite amount of numbers between 0 and 1, let alone in all of infinity).</p>\n<p>So, given that doubles can only store 2^64 unique numbers, which numbers <em>can</em> doubles store? It's as if someone threw 2^64 darts at the number line - those are numbers double can store. Anything else a double <strong>can not</strong> store; if you try to, or the result of a calculation is a value that doesn't have a 'dart', it gets silently rounded to the nearest dart.</p>\n<p>The darts aren't thrown arbitrarily; if you imagine the number line, there are as many darts around 0-2 as there are everywhere else - the nearer to 1.0, the more dense the darts are packed. Eventually, above 2^52, there's less than one dart per whole number (with the weird effect that therefore <code>x+1</code> can be equal to <code>x</code>, for sufficiently large <code>x</code>, even! - the result is rounded to the nearest dart which eventually is just <code>x</code> again).</p>\n<p>This means errors occur, and the larger the number, the higher the error is likely to be. This means that equality is then complicated. Simple example:</p>\n<pre><code>double x = 0.0;\nfor (int i = 0; i &lt; 10; i++) x += 0.1;\ndouble y = 1.0;\nSystem.out.println(x == y); // This prints false!!!\nSystem.out.println(x - y);\n</code></pre>\n<p>The difference (the last line) prints <code>-1.1102230246251565E-16</code> - so a really tiny difference (E-16 means 10^-16, so, the difference is -0.000000000000000011102230246251565.</p>\n<p>But.. 10 * 0.1 <strong>is</strong> 1.0, so why does that print false? Because of that darts thing - rounding killed you. Computers count in binary; while &quot;one tenth&quot; works well in decimal (It's just 0.1), just like &quot;one third&quot; <strong>does not</strong> 'work' in decimal (it's 0.33333333... you can never get it perfect), one tenth is similarly not quite perfect in binary. Hence, yup, 0.1 isn't quite on a dart, and each intermediate value (0.1, 0.2, 0.3) isn't a dart either, so you keep compounding 10 tiny rounding errors.</p>\n<p>The solution is, when wanting to consider if 2 double values are 'equal', that you can't just use <code>==</code>, you need to define it more as 'are they <strong>really</strong> close to each other?' instead.</p>\n<p>Hence this code checks the difference (<code>Math.abs(x-y)</code> is just <code>x-y</code>, with the sign removed: The difference between x and y, and checks if that is really tiny. How tiny? Well, in basis, EPSILON (so, <code>1E-14</code>, which is scientific notation and means the same as -0.00000000000001), except, we scale this a bit (multiply it by <em>the largest</em> amongst x and y), because the errors tend to be larger in magnitude when you move away from the 0, because there are fewer and fewer darts as you get further and further away from it.</p>\n<p>Applying it to our <code>0.1*10 vs 1.0</code> situation:</p>\n<pre class=\"lang-java prettyprint-override\"><code>double x = 0.0;\nfor (int i = 0; i &lt; 10; i++) x += 0.1;\ndouble y = 1.0;\nSystem.out.println(x == y); // This prints false!!!\ndouble EPSILON = 1E-14;\nSystem.out.println(Math.abs(x-y) &lt;= EPSILON * Math.max(Math.abs(x),\nMath.abs(y)));\n</code></pre>\n<p>That last line prints <code>true</code>.</p>\n"}],"owner":{"account_id":27227137,"reputation":1,"user_id":20755467,"display_name":"Farzan Firoozkhoshkehrood"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672840063,"creation_date":1672838795,"question_id":75006160,"body_markdown":"```\r\npublic String toString() {\r\n\tfinal String IMAGINARY_UNIT = &quot;i&quot;;\r\n\t\r\n\tif (equalsApprox(im , 0)) {\r\n\t\treturn String.valueOf(re);\r\n\t}\r\n\tString sign = &quot;-&quot;;\r\n\tif (im &gt; 0) {\r\n\t\tsign = &quot;+&quot;;\r\n\t}\r\n\tif(equalsApprox(re, 0)) {\r\n\t    return &quot;MyComplex&quot; + sign + IMAGINARY_UNIT + Math.abs(im);\r\n\t}\r\n\treturn &quot;MyComplex&quot; + re + &quot; &quot; + sign + IMAGINARY_UNIT + Math.abs(im); \r\n}\r\n\r\npublic boolean equalsApprox(MyComplex z) {\r\n\treturn equalsApprox(re, z.re) &amp;&amp; equalsApprox(im, z.im);\r\n}\r\n\r\nprivate static boolean equalsApprox(double x , double y) {\r\n\tfinal double EPSILON = 1E-14;\r\n\treturn Math.abs(x-y) &lt;= EPSILON * Math.max(Math.abs(x), Math.abs(y));\r\n}\r\n```\r\n\r\n\r\nI want a clear explanation about the part of equalsApprox which I can not understand how it checks and compares with tolerance(I don&#39;t know what does tolerance mean in here : please explain me this too) and return the values in different conditions .This is the ending part of the code not all of it. please help me to understand it .","title":"Java simple complex number class","body":"<pre><code>public String toString() {\n    final String IMAGINARY_UNIT = &quot;i&quot;;\n    \n    if (equalsApprox(im , 0)) {\n        return String.valueOf(re);\n    }\n    String sign = &quot;-&quot;;\n    if (im &gt; 0) {\n        sign = &quot;+&quot;;\n    }\n    if(equalsApprox(re, 0)) {\n        return &quot;MyComplex&quot; + sign + IMAGINARY_UNIT + Math.abs(im);\n    }\n    return &quot;MyComplex&quot; + re + &quot; &quot; + sign + IMAGINARY_UNIT + Math.abs(im); \n}\n\npublic boolean equalsApprox(MyComplex z) {\n    return equalsApprox(re, z.re) &amp;&amp; equalsApprox(im, z.im);\n}\n\nprivate static boolean equalsApprox(double x , double y) {\n    final double EPSILON = 1E-14;\n    return Math.abs(x-y) &lt;= EPSILON * Math.max(Math.abs(x), Math.abs(y));\n}\n</code></pre>\n<p>I want a clear explanation about the part of equalsApprox which I can not understand how it checks and compares with tolerance(I don't know what does tolerance mean in here : please explain me this too) and return the values in different conditions .This is the ending part of the code not all of it. please help me to understand it .</p>\n"},{"tags":["java","spring","hibernate","jpa","flyway"],"answers":[{"tags":[],"owner":{"account_id":25310585,"reputation":1,"user_id":19133382,"display_name":"Geri"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672839847,"creation_date":1672839847,"answer_id":75006375,"question_id":75006151,"body_markdown":"I guess the underlying DB is MySQL? What type is the description field currently? Because after MySQL 5.0.3 the VARCHAR fields can have up to a character size of 65.535 same as TEXT. [VARCHAR vs TEXT][1]\r\nSo you might not even need to change the type just the max length of the field. For this I would use Flyway, that would make sure that your database changes are applied at the same time your code changes take effect as well.\r\n\r\n  [1]: https://www.navicat.com/en/company/aboutus/blog/1308-choosing-between-varchar-and-text-in-mysql","title":"Spring Jpa - Need for longer strings in already existing column without recreating the schema","body":"<p>I guess the underlying DB is MySQL? What type is the description field currently? Because after MySQL 5.0.3 the VARCHAR fields can have up to a character size of 65.535 same as TEXT. <a href=\"https://www.navicat.com/en/company/aboutus/blog/1308-choosing-between-varchar-and-text-in-mysql\" rel=\"nofollow noreferrer\">VARCHAR vs TEXT</a>\nSo you might not even need to change the type just the max length of the field. For this I would use Flyway, that would make sure that your database changes are applied at the same time your code changes take effect as well.</p>\n"}],"owner":{"account_id":7339964,"reputation":455,"user_id":5589918,"accept_rate":46,"display_name":"Da Mike"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":235,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672839847,"creation_date":1672838780,"question_id":75006151,"body_markdown":"I have been working with an entity e.g. `Foo` defined as\r\n\r\n```\r\n@Entity\r\npublic class Foo {\r\n    @Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\tprivate Long id;\r\n\r\n    String name;\r\n\r\n    String description;\r\n    \r\n    // etc...\r\n}\r\n```\r\n\r\nAnd I have some data already persisted in the db. \r\n\r\nNow there has come up the need for longer descriptions so I tried modifying \r\n\r\n```\r\nString description;\r\n```\r\n\r\nto\r\n\r\n```\r\n@Column(columnDefinition = &quot;TEXT&quot;)\r\nString description = &quot;&quot;;\r\n```\r\n\r\nbut the changes were not reflected in the actual schema. I know that jpa hibernate will not update these kind of changes even when having set `spring.jpa.hibernate.ddl-auto=update`. \r\n\r\nSo what I want is to keep the already existing records, but modify the column definition to allow to insert new records with longer `description` fields.\r\n\r\nWhat is the best way to do that?\r\n\r\nI have done some investigating and came up upon solutions like Flyway, but what exactly is the way in which I should use it? Add a migration script with the following command?\r\n\r\n```\r\nALTER TABLE Foo MODIFY description TEXT;\r\n```\r\n\r\nAnd then should I also add the `@Column(columnDefinition = &quot;TEXT&quot;)` in the Java class or not?\r\n\r\nAny help would be appreciated!","title":"Spring Jpa - Need for longer strings in already existing column without recreating the schema","body":"<p>I have been working with an entity e.g. <code>Foo</code> defined as</p>\n<pre><code>@Entity\npublic class Foo {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    String name;\n\n    String description;\n    \n    // etc...\n}\n</code></pre>\n<p>And I have some data already persisted in the db.</p>\n<p>Now there has come up the need for longer descriptions so I tried modifying</p>\n<pre><code>String description;\n</code></pre>\n<p>to</p>\n<pre><code>@Column(columnDefinition = &quot;TEXT&quot;)\nString description = &quot;&quot;;\n</code></pre>\n<p>but the changes were not reflected in the actual schema. I know that jpa hibernate will not update these kind of changes even when having set <code>spring.jpa.hibernate.ddl-auto=update</code>.</p>\n<p>So what I want is to keep the already existing records, but modify the column definition to allow to insert new records with longer <code>description</code> fields.</p>\n<p>What is the best way to do that?</p>\n<p>I have done some investigating and came up upon solutions like Flyway, but what exactly is the way in which I should use it? Add a migration script with the following command?</p>\n<pre><code>ALTER TABLE Foo MODIFY description TEXT;\n</code></pre>\n<p>And then should I also add the <code>@Column(columnDefinition = &quot;TEXT&quot;)</code> in the Java class or not?</p>\n<p>Any help would be appreciated!</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":4542619,"reputation":8565,"user_id":3690024,"display_name":"AJNeufeld"},"score":0,"creation_date":1459350018,"post_id":36312317,"comment_id":60248490,"body_markdown":"What is working?  Are your `class=&quot;para&quot; id=&quot;` lines being correctly transformed?  Is your temporary file of foot notes being properly generated?","body":"What is working?  Are your <code>class=&quot;para&quot; id=&quot;</code> lines being correctly transformed?  Is your temporary file of foot notes being properly generated?"},{"owner":{"account_id":1642326,"reputation":562,"user_id":1514543,"accept_rate":53,"display_name":"Rakesh"},"score":0,"creation_date":1459350318,"post_id":36312317,"comment_id":60248736,"body_markdown":"Hi @AJNeufeld, Yes everything is working fine. I just want to replace `&lt;hr /&gt;` with the entire `temp.txt` file contents.","body":"Hi @AJNeufeld, Yes everything is working fine. I just want to replace <code>&lt;hr &#47;&gt;</code> with the entire <code>temp.txt</code> file contents."},{"owner":{"account_id":4542619,"reputation":8565,"user_id":3690024,"display_name":"AJNeufeld"},"score":1,"creation_date":1459351860,"post_id":36312317,"comment_id":60249978,"body_markdown":"Instead of substituting `&lt;/body&gt;` with `&lt;hr/&gt;&lt;/body&gt;`, and then substituting `&lt;hr/&gt;` with your contents, you could skip a step and substitute `&lt;/body&gt;` with `&lt;!-- footnotes --&gt;&lt;/body&gt;`.  This is safer, as there could be many `&lt;hr/&gt;` lines in your document, but there is very likely only one `&lt;/body&gt;`.  See answer below.","body":"Instead of substituting <code>&lt;&#47;body&gt;</code> with <code>&lt;hr&#47;&gt;&lt;&#47;body&gt;</code>, and then substituting <code>&lt;hr&#47;&gt;</code> with your contents, you could skip a step and substitute <code>&lt;&#47;body&gt;</code> with <code>&lt;!-- footnotes --&gt;&lt;&#47;body&gt;</code>.  This is safer, as there could be many <code>&lt;hr&#47;&gt;</code> lines in your document, but there is very likely only one <code>&lt;&#47;body&gt;</code>.  See answer below."}],"answers":[{"tags":[],"owner":{"account_id":4542619,"reputation":8565,"user_id":3690024,"display_name":"AJNeufeld"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1459351334,"creation_date":1459350890,"answer_id":36312974,"question_id":36312317,"body_markdown":"I&#39;d modify your processing loop as follows:\r\n\r\n    while ((inputLine = in.readLine()) != null) {\r\n\r\n        // Stop translation when we reach end of document.\r\n        if (inputLine.contains(&quot;&lt;/body&gt;&quot;) {\r\n            break;\r\n        }\r\n \r\n        if (inputLine.contains(&quot;class=\\&quot;para\\&quot; id=\\&quot;&quot;)) {\r\n            // No changes in this block\r\n        }\r\n\r\n        bw.write(inputLine);\r\n        bw.newLine();\r\n    }\r\n\r\n    // Close temporary file\r\n    tempWriter.close();\r\n\r\n    // Open temporary file, and copy verbatim to output\r\n    BufferedReader temp_in = Files.newBufferedReader(temp.toPath());\r\n    String footnotes;\r\n    while ((footnotes = temp_in.readLine()) != null) {\r\n        bw.write(footnotes);\r\n        bw.newLine();\r\n    }\r\n    temp_in.close();\r\n\r\n    // Finish document\r\n    bw.write(inputLine);\r\n    bw.newLine();\r\n\r\n    while ((inputLine = in.readLine()) != null) {\r\n        bw.write(inputLine);\r\n        bw.newLine();\r\n    }\r\n\r\n    // ... and close all open files\r\n","title":"Replace a word in a file with a new file content","body":"<p>I'd modify your processing loop as follows:</p>\n\n<pre><code>while ((inputLine = in.readLine()) != null) {\n\n    // Stop translation when we reach end of document.\n    if (inputLine.contains(\"&lt;/body&gt;\") {\n        break;\n    }\n\n    if (inputLine.contains(\"class=\\\"para\\\" id=\\\"\")) {\n        // No changes in this block\n    }\n\n    bw.write(inputLine);\n    bw.newLine();\n}\n\n// Close temporary file\ntempWriter.close();\n\n// Open temporary file, and copy verbatim to output\nBufferedReader temp_in = Files.newBufferedReader(temp.toPath());\nString footnotes;\nwhile ((footnotes = temp_in.readLine()) != null) {\n    bw.write(footnotes);\n    bw.newLine();\n}\ntemp_in.close();\n\n// Finish document\nbw.write(inputLine);\nbw.newLine();\n\nwhile ((inputLine = in.readLine()) != null) {\n    bw.write(inputLine);\n    bw.newLine();\n}\n\n// ... and close all open files\n</code></pre>\n"}],"owner":{"account_id":1642326,"reputation":562,"user_id":1514543,"accept_rate":53,"display_name":"Rakesh"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":90,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":36312974,"answer_count":1,"score":0,"last_activity_date":1672839840,"creation_date":1459349181,"question_id":36312317,"body_markdown":"I&#39;m writing a code where in data in a file has to be replaced with another file content.\r\n\r\nI know how to use a string Replace() function. but the problem here is, I want to replace a string with a entirely new Data.\r\n\r\n I&#39;m able to append(in `private static void writeDataofFootnotes(File temp, File fout)`) the content, but unable to know how do I replace it.\r\n\r\nBelow is my code.\r\n\r\n    import java.io.BufferedReader;\r\n    import java.io.BufferedWriter;\r\n    import java.io.Closeable;\r\n    import java.io.File;\r\n    import java.io.FileOutputStream;\r\n    import java.io.FileReader;\r\n    import java.io.FileWriter;\r\n    import java.io.IOException;\r\n    import java.io.InputStreamReader;\r\n    import java.io.OutputStreamWriter;\r\n    import java.net.URL;\r\n    \r\n    public class BottomContent {\r\n    \r\n    \tpublic static void main(String[] args) throws Exception {\r\n    \r\n    \t\tString input = &quot;C:/Users/u0138039/Desktop/Proview/TEST/Test/src.html&quot;;\r\n    \t\tString fileName = input.substring(input.lastIndexOf(&quot;/&quot;) + 1);\r\n    \t\tURL url = new URL(&quot;file:///&quot; + input);\r\n    \t\tBufferedReader in = new BufferedReader(new InputStreamReader(url.openStream()));\r\n    \t\tFile fout = new File(&quot;C:/Users/u0138039/Desktop/TEST/Test/OP/&quot; + fileName);\r\n    \t\tFile temp = new File(&quot;C:/Users/u0138039/Desktop/TEST/Test/OP/temp.txt&quot;);\r\n    \r\n    \t\tif (!fout.exists()) {\r\n    \t\t\tfout.createNewFile();\r\n    \t\t}\r\n    \t\tif (!temp.exists()) {\r\n    \t\t\ttemp.createNewFile();\r\n    \t\t}\r\n    \r\n    \t\tFileOutputStream fos = new FileOutputStream(fout);\r\n    \t\tFileOutputStream tempOs = new FileOutputStream(temp);\r\n    \t\tBufferedWriter bw = new BufferedWriter(new OutputStreamWriter(fos));\r\n    \t\tBufferedWriter tempWriter = new BufferedWriter(new OutputStreamWriter(tempOs));\r\n    \t\tString inputLine;\r\n    \t\tString footContent = null;\r\n    \t\tint i = 0;\r\n    \t\twhile ((inputLine = in.readLine()) != null) {\r\n    \r\n    \t\t\tif (inputLine.contains(&quot;class=\\&quot;para\\&quot; id=\\&quot;&quot;)) {\r\n    \t\t\t\tfootContent = inputLine.replaceAll(\r\n    \t\t\t\t\t\t&quot;&lt;p class=\\&quot;para\\&quot; id=\\&quot;(.*)_(.*)\\&quot; style=\\&quot;text-indent: (.*)%;\\&quot;&gt;&lt;a href=\\&quot;.*\\&quot;&gt;(.*)&lt;/a&gt;(.)(.*)&lt;/p&gt;&quot;,\r\n    \t\t\t\t\t\t&quot;&lt;div class=\\&quot;tr_footnote\\&quot;&gt;\\n&lt;div class=\\&quot;footnote\\&quot;&gt;\\n&lt;sup&gt;&lt;a name=\\&quot;ftn.$2\\&quot; href=\\&quot;#f$2\\&quot; class=\\&quot;tr_ftn\\&quot;&gt;$4&lt;/a&gt;&lt;/sup&gt;\\n&quot;\r\n    \t\t\t\t\t\t\t\t+ &quot;&lt;div class=\\&quot;para\\&quot;&gt;&quot; + &quot;$6&quot; + &quot;\\n&lt;/div&gt;\\n&lt;/div&gt;\\n&lt;/div&gt;&quot;);\r\n    \t\t\t\tinputLine = inputLine.replaceAll(\r\n    \t\t\t\t\t\t&quot;&lt;p class=\\&quot;para\\&quot; id=\\&quot;(.*)_(.*)\\&quot; style=\\&quot;text-indent: (.*)%;\\&quot;&gt;&lt;a href=\\&quot;.*\\&quot;&gt;(.*)&lt;/a&gt;(.)(.*)&lt;/p&gt;&quot;,\r\n    \t\t\t\t\t\t&quot;&quot;);\r\n    \t\t\t\ttempWriter.write(footContent);\r\n    \t\t\t\ttempWriter.newLine();\r\n    \t\t\t}\r\n    \t\t\tinputLine = inputLine.replace(&quot;&lt;/body&gt;&quot;, &quot;&lt;hr/&gt;&lt;/body&gt;&quot;);\r\n    \r\n    \t\t\tbw.write(inputLine);\r\n    \t\t\tbw.newLine();\r\n    \r\n    \t\t}\r\n    \r\n    \t\ttempWriter.close();\r\n    \t\tbw.close();\r\n    \t\tin.close();\r\n    \t\twriteDataofFootnotes(temp, fout);\r\n    \r\n    \t}\r\n    \r\n    \tprivate static void writeDataofFootnotes(File temp, File fout) throws IOException {\r\n    \r\n    \t\tFileReader fr = null;\r\n    \t\tFileWriter fw = null;\r\n    \t\ttry {\r\n    \t\t\tfr = new FileReader(temp);\r\n    \t\t\tfw = new FileWriter(fout, true);\r\n    \t\t\tint c = fr.read();\r\n    \t\t\twhile (c != -1) {\r\n    \t\t\t\tfw.write(c);\r\n    \t\t\t\tc = fr.read();\r\n    \t\t\t}\r\n    \r\n    \t\t} catch (IOException e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t} finally {\r\n    \t\t\tclose(fr);\r\n    \t\t\tclose(fw);\r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    \tpublic static void close(Closeable stream) {\r\n    \t\ttry {\r\n    \t\t\tif (stream != null) {\r\n    \t\t\t\tstream.close();\r\n    \t\t\t}\r\n    \t\t} catch (IOException e) {\r\n    \t\t\t// ...\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n\r\nHere I&#39;m searching for a particular string and saving it in a separate `txt` file. And once I&#39;m done with the job. I want to replace the `&lt;hr /&gt;` tag with the entire `txt` file data. \r\n\r\nHow can I achieve this?\r\n","title":"Replace a word in a file with a new file content","body":"<p>I'm writing a code where in data in a file has to be replaced with another file content.</p>\n<p>I know how to use a string Replace() function. but the problem here is, I want to replace a string with a entirely new Data.</p>\n<p>I'm able to append(in <code>private static void writeDataofFootnotes(File temp, File fout)</code>) the content, but unable to know how do I replace it.</p>\n<p>Below is my code.</p>\n<pre><code>import java.io.BufferedReader;\nimport java.io.BufferedWriter;\nimport java.io.Closeable;\nimport java.io.File;\nimport java.io.FileOutputStream;\nimport java.io.FileReader;\nimport java.io.FileWriter;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.io.OutputStreamWriter;\nimport java.net.URL;\n\npublic class BottomContent {\n\n    public static void main(String[] args) throws Exception {\n\n        String input = &quot;C:/Users/u0138039/Desktop/Proview/TEST/Test/src.html&quot;;\n        String fileName = input.substring(input.lastIndexOf(&quot;/&quot;) + 1);\n        URL url = new URL(&quot;file:///&quot; + input);\n        BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream()));\n        File fout = new File(&quot;C:/Users/u0138039/Desktop/TEST/Test/OP/&quot; + fileName);\n        File temp = new File(&quot;C:/Users/u0138039/Desktop/TEST/Test/OP/temp.txt&quot;);\n\n        if (!fout.exists()) {\n            fout.createNewFile();\n        }\n        if (!temp.exists()) {\n            temp.createNewFile();\n        }\n\n        FileOutputStream fos = new FileOutputStream(fout);\n        FileOutputStream tempOs = new FileOutputStream(temp);\n        BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(fos));\n        BufferedWriter tempWriter = new BufferedWriter(new OutputStreamWriter(tempOs));\n        String inputLine;\n        String footContent = null;\n        int i = 0;\n        while ((inputLine = in.readLine()) != null) {\n\n            if (inputLine.contains(&quot;class=\\&quot;para\\&quot; id=\\&quot;&quot;)) {\n                footContent = inputLine.replaceAll(\n                        &quot;&lt;p class=\\&quot;para\\&quot; id=\\&quot;(.*)_(.*)\\&quot; style=\\&quot;text-indent: (.*)%;\\&quot;&gt;&lt;a href=\\&quot;.*\\&quot;&gt;(.*)&lt;/a&gt;(.)(.*)&lt;/p&gt;&quot;,\n                        &quot;&lt;div class=\\&quot;tr_footnote\\&quot;&gt;\\n&lt;div class=\\&quot;footnote\\&quot;&gt;\\n&lt;sup&gt;&lt;a name=\\&quot;ftn.$2\\&quot; href=\\&quot;#f$2\\&quot; class=\\&quot;tr_ftn\\&quot;&gt;$4&lt;/a&gt;&lt;/sup&gt;\\n&quot;\n                                + &quot;&lt;div class=\\&quot;para\\&quot;&gt;&quot; + &quot;$6&quot; + &quot;\\n&lt;/div&gt;\\n&lt;/div&gt;\\n&lt;/div&gt;&quot;);\n                inputLine = inputLine.replaceAll(\n                        &quot;&lt;p class=\\&quot;para\\&quot; id=\\&quot;(.*)_(.*)\\&quot; style=\\&quot;text-indent: (.*)%;\\&quot;&gt;&lt;a href=\\&quot;.*\\&quot;&gt;(.*)&lt;/a&gt;(.)(.*)&lt;/p&gt;&quot;,\n                        &quot;&quot;);\n                tempWriter.write(footContent);\n                tempWriter.newLine();\n            }\n            inputLine = inputLine.replace(&quot;&lt;/body&gt;&quot;, &quot;&lt;hr/&gt;&lt;/body&gt;&quot;);\n\n            bw.write(inputLine);\n            bw.newLine();\n\n        }\n\n        tempWriter.close();\n        bw.close();\n        in.close();\n        writeDataofFootnotes(temp, fout);\n\n    }\n\n    private static void writeDataofFootnotes(File temp, File fout) throws IOException {\n\n        FileReader fr = null;\n        FileWriter fw = null;\n        try {\n            fr = new FileReader(temp);\n            fw = new FileWriter(fout, true);\n            int c = fr.read();\n            while (c != -1) {\n                fw.write(c);\n                c = fr.read();\n            }\n\n        } catch (IOException e) {\n            e.printStackTrace();\n        } finally {\n            close(fr);\n            close(fw);\n        }\n\n    }\n\n    public static void close(Closeable stream) {\n        try {\n            if (stream != null) {\n                stream.close();\n            }\n        } catch (IOException e) {\n            // ...\n        }\n    }\n}\n</code></pre>\n<p>Here I'm searching for a particular string and saving it in a separate <code>txt</code> file. And once I'm done with the job. I want to replace the <code>&lt;hr /&gt;</code> tag with the entire <code>txt</code> file data.</p>\n<p>How can I achieve this?</p>\n"},{"tags":["java","unit-testing","junit","mocking","powermockito"],"answers":[{"tags":[],"owner":{"account_id":2535057,"reputation":25845,"user_id":2202415,"display_name":"Maciej Kowalski"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1554811419,"creation_date":1554811419,"answer_id":55592435,"question_id":55592345,"body_markdown":"Invert the stubbing:\r\n\r\n    doThrow(new NoSuchAlgorithmException()).when(md5, &quot;getInstance&quot;, anyString())\r\n\r\nBy creating it the way you did, you call the actual method before it gets stubbed.","title":"Unable to use mocking to throw an exception - the thrown exception is not being caught","body":"<p>Invert the stubbing:</p>\n\n<pre><code>doThrow(new NoSuchAlgorithmException()).when(md5, \"getInstance\", anyString())\n</code></pre>\n\n<p>By creating it the way you did, you call the actual method before it gets stubbed.</p>\n"},{"tags":[],"owner":{"account_id":5042851,"reputation":860,"user_id":5362469,"display_name":"Naya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1554816173,"creation_date":1554814084,"answer_id":55593301,"question_id":55592345,"body_markdown":"As MessageDigest.getInstance() is a static method - you should prepare it for the test and use mockStatic().\r\n\r\nHere is a good example of it: \r\nhttps://examples.javacodegeeks.com/core-java/powermockito/powermock-mock-static-method-example/\r\n\r\nHope that will help\r\n\r\n\r\nHere is what i&#39;ve written: \r\n`````\r\n\r\n@RunWith(PowerMockRunner.class)\r\npublic class MyTest {\r\n\r\n    @Test\r\n    @PrepareForTest({MessageDigest.class})\r\n    public void testFunc() throws Exception {\r\n        mockStatic(MessageDigest.class);\r\n        when(MessageDigest.getInstance(anyString())).thenThrow(new NoSuchAlgorithmException());\r\n        assertEquals(&quot;*&quot;, func(&quot;in&quot;));\r\n    }\r\n\r\n    public static String func(String val) {\r\n        try {\r\n            MessageDigest md5 = MessageDigest.getInstance(&quot;MD5&quot;);\r\n            return Base64.encode(md5.digest(val.getBytes()));\r\n        } catch (NoSuchAlgorithmException toCatch) {\r\n            return &quot;*&quot;;\r\n        }\r\n    }\r\n}\r\n`````\r\n\r\nmy pom.xml\r\n\r\n````\r\n&lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;junit&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n            &lt;version&gt;4.11&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.powermock&lt;/groupId&gt;\r\n            &lt;artifactId&gt;powermock-api-mockito&lt;/artifactId&gt;\r\n            &lt;version&gt;1.7.4&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.powermock&lt;/groupId&gt;\r\n            &lt;artifactId&gt;powermock-module-junit4&lt;/artifactId&gt;\r\n            &lt;version&gt;1.7.4&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.powermock&lt;/groupId&gt;\r\n            &lt;artifactId&gt;powermock-core&lt;/artifactId&gt;\r\n            &lt;version&gt;1.7.4&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n    &lt;/dependencies&gt;\r\n````","title":"Unable to use mocking to throw an exception - the thrown exception is not being caught","body":"<p>As MessageDigest.getInstance() is a static method - you should prepare it for the test and use mockStatic().</p>\n\n<p>Here is a good example of it: \n<a href=\"https://examples.javacodegeeks.com/core-java/powermockito/powermock-mock-static-method-example/\" rel=\"nofollow noreferrer\">https://examples.javacodegeeks.com/core-java/powermockito/powermock-mock-static-method-example/</a></p>\n\n<p>Hope that will help</p>\n\n<p>Here is what i've written: </p>\n\n<pre><code>\n@RunWith(PowerMockRunner.class)\npublic class MyTest {\n\n    @Test\n    @PrepareForTest({MessageDigest.class})\n    public void testFunc() throws Exception {\n        mockStatic(MessageDigest.class);\n        when(MessageDigest.getInstance(anyString())).thenThrow(new NoSuchAlgorithmException());\n        assertEquals(\"*\", func(\"in\"));\n    }\n\n    public static String func(String val) {\n        try {\n            MessageDigest md5 = MessageDigest.getInstance(\"MD5\");\n            return Base64.encode(md5.digest(val.getBytes()));\n        } catch (NoSuchAlgorithmException toCatch) {\n            return \"*\";\n        }\n    }\n}\n</code></pre>\n\n<p>my pom.xml</p>\n\n<pre><code>&lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;version&gt;4.11&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.powermock&lt;/groupId&gt;\n            &lt;artifactId&gt;powermock-api-mockito&lt;/artifactId&gt;\n            &lt;version&gt;1.7.4&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.powermock&lt;/groupId&gt;\n            &lt;artifactId&gt;powermock-module-junit4&lt;/artifactId&gt;\n            &lt;version&gt;1.7.4&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.powermock&lt;/groupId&gt;\n            &lt;artifactId&gt;powermock-core&lt;/artifactId&gt;\n            &lt;version&gt;1.7.4&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23783,"reputation":7527,"user_id":59869,"accept_rate":74,"display_name":"enkor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1557332867,"creation_date":1557332032,"answer_id":56044960,"question_id":55592345,"body_markdown":"As `MessageDigest` is a Java system class, you need to deal with them differently as per: [https://github.com/powermock/powermock/wiki/Mock-System][1]\r\n\r\nSo declare the test class in the `@PrepareForTest` annotation as follows:\r\n`@PrepareForTest({MessageDigest.class, MyTest.class})`\r\n\r\nNot sure if this annotation works as method level as per your example, but it should at class level:\r\n\r\n    @RunWith(PowerMockRunner.class)\r\n    @PrepareForTest({MessageDigest.class, MyTest.class})\r\n    public class MyTest {\r\n\r\n\r\n  [1]: https://github.com/powermock/powermock/wiki/Mock-System","title":"Unable to use mocking to throw an exception - the thrown exception is not being caught","body":"<p>As <code>MessageDigest</code> is a Java system class, you need to deal with them differently as per: <a href=\"https://github.com/powermock/powermock/wiki/Mock-System\" rel=\"nofollow noreferrer\">https://github.com/powermock/powermock/wiki/Mock-System</a></p>\n\n<p>So declare the test class in the <code>@PrepareForTest</code> annotation as follows:\n<code>@PrepareForTest({MessageDigest.class, MyTest.class})</code></p>\n\n<p>Not sure if this annotation works as method level as per your example, but it should at class level:</p>\n\n<pre><code>@RunWith(PowerMockRunner.class)\n@PrepareForTest({MessageDigest.class, MyTest.class})\npublic class MyTest {\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9726305,"reputation":68,"user_id":7213133,"display_name":"Berkay Bingol"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672839695,"creation_date":1672839695,"answer_id":75006344,"question_id":55592345,"body_markdown":"Might be worth doing it like this as well, without using power mockito and other annotations \r\n\r\n\r\n      try (MockedStatic&lt;MessageDigest&gt; messageDigestMockedStatic = Mockito.mockStatic(MessageDigest.class)) {\r\n            messageDigestMockedStatic.when(() -&gt; MessageDigest.getInstance(anyString()))\r\n                .thenThrow(new NoSuchAlgorithmException());\r\n            String input = &quot;hello world&quot;;\r\n    \r\n            try {\r\n                 var digest = MessageDigest.getInstance(SHA_256_DIGEST_TYPE);\r\n            byte[] encodedHash = digest.digest(input.getBytes(StandardCharsets.UTF_8));\r\n            return bytesToHex(encodedHash);\r\n                fail(&quot;Expected IllegalArgumentException to be thrown, but got hash value: &quot; + hash);\r\n            } catch (IllegalArgumentException e) {\r\n                // Verify that the exception message contains the expected error message\r\n                assertTrue(e.getMessage().contains(&quot;Invalid hash digest algorithm&quot;));\r\n    \r\n                // Verify that the cause of the IllegalArgumentException is a NoSuchAlgorithmException\r\n                assertTrue(e.getCause() instanceof NoSuchAlgorithmException);\r\n            }\r\n        }","title":"Unable to use mocking to throw an exception - the thrown exception is not being caught","body":"<p>Might be worth doing it like this as well, without using power mockito and other annotations</p>\n<pre><code>  try (MockedStatic&lt;MessageDigest&gt; messageDigestMockedStatic = Mockito.mockStatic(MessageDigest.class)) {\n        messageDigestMockedStatic.when(() -&gt; MessageDigest.getInstance(anyString()))\n            .thenThrow(new NoSuchAlgorithmException());\n        String input = &quot;hello world&quot;;\n\n        try {\n             var digest = MessageDigest.getInstance(SHA_256_DIGEST_TYPE);\n        byte[] encodedHash = digest.digest(input.getBytes(StandardCharsets.UTF_8));\n        return bytesToHex(encodedHash);\n            fail(&quot;Expected IllegalArgumentException to be thrown, but got hash value: &quot; + hash);\n        } catch (IllegalArgumentException e) {\n            // Verify that the exception message contains the expected error message\n            assertTrue(e.getMessage().contains(&quot;Invalid hash digest algorithm&quot;));\n\n            // Verify that the cause of the IllegalArgumentException is a NoSuchAlgorithmException\n            assertTrue(e.getCause() instanceof NoSuchAlgorithmException);\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":3607837,"reputation":881,"user_id":3009613,"accept_rate":60,"display_name":"John Bergqvist"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":852,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":4,"score":2,"last_activity_date":1672839695,"creation_date":1554811113,"question_id":55592345,"body_markdown":"I have a method where I&#39;d like to mock an exception being thrown so that the catch statement is entered:\r\n\r\n    public static String func(String val) {\r\n      try {\r\n        MessageDigest md5 = MessageDigest.getInstance(&quot;MD5&quot;);\r\n        return Base64.encode(md5.digest(val.getBytes()));\r\n      } catch (NoSuchAlgorithmException toCatch) {\r\n          return &quot;*&quot;;\r\n      }\r\n    }\r\n\r\nThe test I&#39;ve written is this:\r\n\r\n    @Test\r\n    public void testFunc() throws Exception {\r\n      MessageDigest md5 = PowerMockito.mock(MessageDigest.class);\r\n      PowerMockito.when(md5.getInstance(anyString())).thenThrow(new NoSuchAlgorithmException());  \r\n      Assert.assertEquals(&quot;*&quot;, func(&quot;in&quot;));\r\n    }\r\n\r\nHowever i&#39;m getting: \r\n\r\n    java.security.NoSuchAlgorithmException:  MessageDigest not available\r\n\r\non the `PowerMockito.when()` line. Which implies the exception has been through, but not caught? What am I doing wrong?\r\n\r\nUpdate:\r\nI have tried the following modifications\r\n\r\n    @PrepareForTest({MessageDigest.class}) \r\n    @Test\r\n    public void testFunc() throws Exception {\r\n      PowerMockito.mockStatic(MessageDigest.class); \r\n      PowerMockito.when(MessageDigest.getInstance(anyString())).thenThrow(new NoSuchAlgorithmException());\r\n      Assert.assertEquals(&quot;*&quot;, testFunc(&quot;in&quot;));\r\n    }\r\nThis causes the function to run without triggering the exception.\r\n\r\nAnd this:\r\n\r\n    @PrepareForTest({MessageDigest.class})\r\n    @Test\r\n    public void testFunc() throws Exception { \r\n      PowerMockito.mockStatic(MessageDigest.class);\r\n      MessageDigest md5 = PowerMockito.mock(MessageDigest.class); \r\n      PowerMockito.doThrow(new NoSuchAlgorithmException()).when(md5, &quot;getInstance&quot;, anyString()); \r\n      Assert.assertEquals(&quot;*&quot;, func(&quot;in&quot;));\r\n    } \r\n\r\nStill doesn&#39;t invoke the catch statement, similar to what I was getting before.","title":"Unable to use mocking to throw an exception - the thrown exception is not being caught","body":"<p>I have a method where I'd like to mock an exception being thrown so that the catch statement is entered:</p>\n\n<pre><code>public static String func(String val) {\n  try {\n    MessageDigest md5 = MessageDigest.getInstance(\"MD5\");\n    return Base64.encode(md5.digest(val.getBytes()));\n  } catch (NoSuchAlgorithmException toCatch) {\n      return \"*\";\n  }\n}\n</code></pre>\n\n<p>The test I've written is this:</p>\n\n<pre><code>@Test\npublic void testFunc() throws Exception {\n  MessageDigest md5 = PowerMockito.mock(MessageDigest.class);\n  PowerMockito.when(md5.getInstance(anyString())).thenThrow(new NoSuchAlgorithmException());  \n  Assert.assertEquals(\"*\", func(\"in\"));\n}\n</code></pre>\n\n<p>However i'm getting: </p>\n\n<pre><code>java.security.NoSuchAlgorithmException:  MessageDigest not available\n</code></pre>\n\n<p>on the <code>PowerMockito.when()</code> line. Which implies the exception has been through, but not caught? What am I doing wrong?</p>\n\n<p>Update:\nI have tried the following modifications</p>\n\n<pre><code>@PrepareForTest({MessageDigest.class}) \n@Test\npublic void testFunc() throws Exception {\n  PowerMockito.mockStatic(MessageDigest.class); \n  PowerMockito.when(MessageDigest.getInstance(anyString())).thenThrow(new NoSuchAlgorithmException());\n  Assert.assertEquals(\"*\", testFunc(\"in\"));\n}\n</code></pre>\n\n<p>This causes the function to run without triggering the exception.</p>\n\n<p>And this:</p>\n\n<pre><code>@PrepareForTest({MessageDigest.class})\n@Test\npublic void testFunc() throws Exception { \n  PowerMockito.mockStatic(MessageDigest.class);\n  MessageDigest md5 = PowerMockito.mock(MessageDigest.class); \n  PowerMockito.doThrow(new NoSuchAlgorithmException()).when(md5, \"getInstance\", anyString()); \n  Assert.assertEquals(\"*\", func(\"in\"));\n} \n</code></pre>\n\n<p>Still doesn't invoke the catch statement, similar to what I was getting before.</p>\n"},{"tags":["java","jersey","classloader","hk2"],"comments":[{"owner":{"account_id":3683657,"reputation":2364,"user_id":3067964,"display_name":"jwells131313"},"score":0,"creation_date":1672764296,"post_id":74983448,"comment_id":132345783,"body_markdown":"This sounds like a classloading issue.  Are you using different classloaders?","body":"This sounds like a classloading issue.  Are you using different classloaders?"},{"owner":{"account_id":16311070,"reputation":144,"user_id":11779689,"display_name":"Haranath Boggarapu"},"score":0,"creation_date":1672828314,"post_id":74983448,"comment_id":132359316,"body_markdown":"@jwells131313 I&#39;m not explicitly using any class loaders actually.","body":"@jwells131313 I&#39;m not explicitly using any class loaders actually."},{"owner":{"account_id":16311070,"reputation":144,"user_id":11779689,"display_name":"Haranath Boggarapu"},"score":0,"creation_date":1672839535,"post_id":74983448,"comment_id":132362878,"body_markdown":"@jwells131313 Attached the code where it is failing. Do you think it&#39;s a class loader issue? Since provider is found when used caller&#39;s class loader and failing when calling next() method, I don&#39;t think its a class loader issue","body":"@jwells131313 Attached the code where it is failing. Do you think it&#39;s a class loader issue? Since provider is found when used caller&#39;s class loader and failing when calling next() method, I don&#39;t think its a class loader issue"},{"owner":{"account_id":16311070,"reputation":144,"user_id":11779689,"display_name":"Haranath Boggarapu"},"score":1,"creation_date":1674201856,"post_id":74983448,"comment_id":132667441,"body_markdown":"Got the issue. There is another jersey dependency in my project that causing the issue.\n \n&quot;com.qubole.qds-sdk-java:qds-sdk-java:0.6.1:aws-http-jackson-jersey-shaded&quot;","body":"Got the issue. There is another jersey dependency in my project that causing the issue.   &quot;com.qubole.qds-sdk-java:qds-sdk-java:0.6.1:aws-http-jackson&zwnj;&#8203;-jersey-shaded&quot;"}],"owner":{"account_id":16311070,"reputation":144,"user_id":11779689,"display_name":"Haranath Boggarapu"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":149,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672839677,"creation_date":1672668768,"question_id":74983448,"body_markdown":"Getting below error \r\n```\r\nCaused by: java.lang.IllegalStateException: No generator was provided and there is no default generator registered\r\n```\r\nWhen I dig deep into the issue on debug mode, I realized that actual error is below one.\r\n```\r\nGetting org.glassfish.hk2.extension.ServiceLocatorGenerator: Provider org.jvnet.hk2.external.generator.ServiceLocatorGeneratorImpl not a subtype\r\n```\r\nIt was failing when invoking **providers.next()** in hk2-api lib\r\n\r\n```\r\nfinal ClassLoader classLoader = ServiceLocatorFactoryImpl.class.getClassLoader();\r\n      Iterator&lt;ServiceLocatorGenerator&gt; providers = java.util.ServiceLoader.load(ServiceLocatorGenerator.class,\r\n              classLoader).iterator();\r\n      while (providers.hasNext()) {\r\n          try {\r\n              return providers.next();\r\n          } catch (ServiceConfigurationError sce) {\r\n              // This can happen. See the exception javadoc for more details.\r\n              Logger.getLogger().debug(&quot;ServiceLocatorFactoryImpl&quot;, &quot;getGenerator&quot;, sce);\r\n                  // We will try the next one\r\n          }\r\n      }\r\n```\r\n\r\n1.  There is a interface ***ServiceLocatorGenerator*** present in kh2-api lib (org.glassfish.hk2:hk2-api:2.6.1). Error says that implementation ***ServiceLocatorGeneratorImpl*** present in hk2-locater lib (org.glassfish.hk2:hk2-locator:2.6.1) is not subtype even though it is a subtype.\r\n2.  Understood that an implementation class (concrete class) cannot be a subtype of interface if they are not loader by same class loader. Assuming this was the one causing the issue. \r\n\r\nCan someone help how to fix this issue in gralde? My env is not OSGi based.\r\n","title":"Getting org.glassfish.hk2.extension.ServiceLocatorGenerator: Provider org.jvnet.hk2.external.generator.ServiceLocatorGeneratorImpl not a subtype","body":"<p>Getting below error</p>\n<pre><code>Caused by: java.lang.IllegalStateException: No generator was provided and there is no default generator registered\n</code></pre>\n<p>When I dig deep into the issue on debug mode, I realized that actual error is below one.</p>\n<pre><code>Getting org.glassfish.hk2.extension.ServiceLocatorGenerator: Provider org.jvnet.hk2.external.generator.ServiceLocatorGeneratorImpl not a subtype\n</code></pre>\n<p>It was failing when invoking <strong>providers.next()</strong> in hk2-api lib</p>\n<pre><code>final ClassLoader classLoader = ServiceLocatorFactoryImpl.class.getClassLoader();\n      Iterator&lt;ServiceLocatorGenerator&gt; providers = java.util.ServiceLoader.load(ServiceLocatorGenerator.class,\n              classLoader).iterator();\n      while (providers.hasNext()) {\n          try {\n              return providers.next();\n          } catch (ServiceConfigurationError sce) {\n              // This can happen. See the exception javadoc for more details.\n              Logger.getLogger().debug(&quot;ServiceLocatorFactoryImpl&quot;, &quot;getGenerator&quot;, sce);\n                  // We will try the next one\n          }\n      }\n</code></pre>\n<ol>\n<li>There is a interface <em><strong>ServiceLocatorGenerator</strong></em> present in kh2-api lib (org.glassfish.hk2:hk2-api:2.6.1). Error says that implementation <em><strong>ServiceLocatorGeneratorImpl</strong></em> present in hk2-locater lib (org.glassfish.hk2:hk2-locator:2.6.1) is not subtype even though it is a subtype.</li>\n<li>Understood that an implementation class (concrete class) cannot be a subtype of interface if they are not loader by same class loader. Assuming this was the one causing the issue.</li>\n</ol>\n<p>Can someone help how to fix this issue in gralde? My env is not OSGi based.</p>\n"},{"tags":["java","servlets","https","web.xml","glassfish-4.1"],"owner":{"account_id":4874807,"reputation":189,"user_id":3930237,"display_name":"Flavian-Calinic Stuparu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":214,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672839586,"creation_date":1672751650,"question_id":74993860,"body_markdown":"We have a GlassFish 4.1 web-application with SSL and port unification configured in `domain.xml`.\r\n\r\nWe cannot use built-in authentication mechanisms like BASIC, FORM, CERT-CLIENT. Instead, we use a custom login form (using the Stripes framework - https://github.com/StripesFramework). \r\n\r\nWe want to redirect all http requests to https, but in IE11 it does not work as expected: the HTTP link is converted into an HTTPS link only on the first access in the browser. Then if the HTTP link is used again in the same browser page, it is no longer replaced with HTTPS.\r\n\r\nThe issue only appears in Internet Explorer (we&#39;re using version 11).\r\n\r\nWe have tried putting this code in `web.xml`, as specified in the docs ([https://docs.oracle.com/cd/E19226-01/820-7627/bncbk/index.html](https://docs.oracle.com/cd/E19226-01/820-7627/bncbk/index.html)):\r\n\r\n```\r\n&lt;security-constraint&gt;\r\n    &lt;display-name&gt;Require HTTPS&lt;/display-name&gt;\r\n    &lt;web-resource-collection&gt;\r\n        &lt;web-resource-name&gt;EntireApplication&lt;/web-resource-name&gt;\r\n        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;         \r\n    &lt;/web-resource-collection&gt;\r\n    &lt;user-data-constraint&gt;\r\n        &lt;transport-guarantee&gt;CONFIDENTIAL&lt;/transport-guarantee&gt;\r\n    &lt;/user-data-constraint&gt;\r\n&lt;/security-constraint&gt;\r\n```\r\n\r\nIt works as expected the first time an http link pointing to the app login page is accessed, that is the URL prefix correctly changes from http to https before the page is displayed: `http://webapp:8090/ctx_root/` to `https://webapp:8090/ctx_root/`.\r\n\r\nBut if afterwards I remove the **s** from the https prefix in the URL bar (only in IE11), and I press Enter, the `http://` prefix is no longer replaced with `https://` and the user gets a non-secure version of the login page, with some warnings in the Console: `&quot;HTTP security is compromised by http://webapp:8090/ctx_root/js/main.js&quot;`. However, if the SSL state is cleared in the browser before the second try, the page is again redirected to HTTPS accordingly.\r\n\r\nThis doesn&#39;t happen in Chrome, where each and every time the link changes correctly from http to https. \r\n\r\nThis is the content of `domain.xml`:\r\n\r\n```\r\n&lt;network-config&gt;\r\n  &lt;protocols&gt;\r\n    &lt;protocol name=&quot;http-listener-1&quot;&gt;\r\n      &lt;http encoded-slash-enabled=&quot;true&quot; default-virtual-server=&quot;server&quot;&gt;\r\n        &lt;file-cache&gt;&lt;/file-cache&gt;\r\n      &lt;/http&gt;\r\n    &lt;/protocol&gt;\r\n    &lt;protocol name=&quot;http-listener-2&quot; security-enabled=&quot;true&quot;&gt;\r\n      &lt;http encoded-slash-enabled=&quot;true&quot; default-virtual-server=&quot;server&quot;&gt;\r\n        &lt;file-cache&gt;&lt;/file-cache&gt;\r\n      &lt;/http&gt;\r\n      &lt;ssl ssl3-enabled=&quot;false&quot; classname=&quot;com.sun.enterprise.security.ssl.GlassfishSSLImpl&quot; cert-nickname=&quot;mycert&quot;&gt;&lt;/ssl&gt;\r\n    &lt;/protocol&gt;\r\n    ....\r\n    &lt;protocol name=&quot;http-redirect&quot;&gt;\r\n      &lt;http-redirect secure=&quot;true&quot;&gt;&lt;/http-redirect&gt;\r\n    &lt;/protocol&gt;\r\n    &lt;protocol name=&quot;pu-protocol-http&quot;&gt;\r\n      &lt;port-unification&gt;\r\n        &lt;protocol-finder protocol=&quot;http-listener-2&quot; classname=&quot;org.glassfish.grizzly.config.portunif.HttpProtocolFinder&quot; name=&quot;http-finder&quot;&gt;&lt;/protocol-finder&gt;\r\n        &lt;protocol-finder protocol=&quot;http-redirect&quot; classname=&quot;org.glassfish.grizzly.config.portunif.HttpProtocolFinder&quot; name=&quot;http-redirect&quot;&gt;&lt;/protocol-finder&gt;\r\n      &lt;/port-unification&gt;\r\n    &lt;/protocol&gt;\r\n  &lt;/protocols&gt;\r\n  &lt;network-listeners&gt;\r\n    &lt;network-listener protocol=&quot;pu-protocol-admin&quot; port=&quot;4848&quot; name=&quot;admin-listener&quot; thread-pool=&quot;admin-thread-pool&quot; transport=&quot;tcp&quot;&gt;&lt;/network-listener&gt;\r\n    &lt;network-listener protocol=&quot;pu-protocol-http&quot; port=&quot;8090&quot; name=&quot;http-listener-1&quot; thread-pool=&quot;http-thread-pool&quot; transport=&quot;tcp&quot;&gt;&lt;/network-listener&gt;\r\n  &lt;/network-listeners&gt;\r\n  &lt;transports&gt;\r\n    &lt;transport name=&quot;tcp&quot;&gt;&lt;/transport&gt;\r\n  &lt;/transports&gt;\r\n&lt;/network-config&gt;\r\n```\r\n\r\nAny idea why HTTP to HTTPS redirection works only the first time the http link is accessed? Could it be an IE11 or firewall issue?","title":"In a GlassFish web application, HTTP to HTTPS redirection works only the first time the http link is accessed in Internet Explorer","body":"<p>We have a GlassFish 4.1 web-application with SSL and port unification configured in <code>domain.xml</code>.</p>\n<p>We cannot use built-in authentication mechanisms like BASIC, FORM, CERT-CLIENT. Instead, we use a custom login form (using the Stripes framework - <a href=\"https://github.com/StripesFramework\" rel=\"nofollow noreferrer\">https://github.com/StripesFramework</a>).</p>\n<p>We want to redirect all http requests to https, but in IE11 it does not work as expected: the HTTP link is converted into an HTTPS link only on the first access in the browser. Then if the HTTP link is used again in the same browser page, it is no longer replaced with HTTPS.</p>\n<p>The issue only appears in Internet Explorer (we're using version 11).</p>\n<p>We have tried putting this code in <code>web.xml</code>, as specified in the docs (<a href=\"https://docs.oracle.com/cd/E19226-01/820-7627/bncbk/index.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/cd/E19226-01/820-7627/bncbk/index.html</a>):</p>\n<pre><code>&lt;security-constraint&gt;\n    &lt;display-name&gt;Require HTTPS&lt;/display-name&gt;\n    &lt;web-resource-collection&gt;\n        &lt;web-resource-name&gt;EntireApplication&lt;/web-resource-name&gt;\n        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;         \n    &lt;/web-resource-collection&gt;\n    &lt;user-data-constraint&gt;\n        &lt;transport-guarantee&gt;CONFIDENTIAL&lt;/transport-guarantee&gt;\n    &lt;/user-data-constraint&gt;\n&lt;/security-constraint&gt;\n</code></pre>\n<p>It works as expected the first time an http link pointing to the app login page is accessed, that is the URL prefix correctly changes from http to https before the page is displayed: <code>http://webapp:8090/ctx_root/</code> to <code>https://webapp:8090/ctx_root/</code>.</p>\n<p>But if afterwards I remove the <strong>s</strong> from the https prefix in the URL bar (only in IE11), and I press Enter, the <code>http://</code> prefix is no longer replaced with <code>https://</code> and the user gets a non-secure version of the login page, with some warnings in the Console: <code>&quot;HTTP security is compromised by http://webapp:8090/ctx_root/js/main.js&quot;</code>. However, if the SSL state is cleared in the browser before the second try, the page is again redirected to HTTPS accordingly.</p>\n<p>This doesn't happen in Chrome, where each and every time the link changes correctly from http to https.</p>\n<p>This is the content of <code>domain.xml</code>:</p>\n<pre><code>&lt;network-config&gt;\n  &lt;protocols&gt;\n    &lt;protocol name=&quot;http-listener-1&quot;&gt;\n      &lt;http encoded-slash-enabled=&quot;true&quot; default-virtual-server=&quot;server&quot;&gt;\n        &lt;file-cache&gt;&lt;/file-cache&gt;\n      &lt;/http&gt;\n    &lt;/protocol&gt;\n    &lt;protocol name=&quot;http-listener-2&quot; security-enabled=&quot;true&quot;&gt;\n      &lt;http encoded-slash-enabled=&quot;true&quot; default-virtual-server=&quot;server&quot;&gt;\n        &lt;file-cache&gt;&lt;/file-cache&gt;\n      &lt;/http&gt;\n      &lt;ssl ssl3-enabled=&quot;false&quot; classname=&quot;com.sun.enterprise.security.ssl.GlassfishSSLImpl&quot; cert-nickname=&quot;mycert&quot;&gt;&lt;/ssl&gt;\n    &lt;/protocol&gt;\n    ....\n    &lt;protocol name=&quot;http-redirect&quot;&gt;\n      &lt;http-redirect secure=&quot;true&quot;&gt;&lt;/http-redirect&gt;\n    &lt;/protocol&gt;\n    &lt;protocol name=&quot;pu-protocol-http&quot;&gt;\n      &lt;port-unification&gt;\n        &lt;protocol-finder protocol=&quot;http-listener-2&quot; classname=&quot;org.glassfish.grizzly.config.portunif.HttpProtocolFinder&quot; name=&quot;http-finder&quot;&gt;&lt;/protocol-finder&gt;\n        &lt;protocol-finder protocol=&quot;http-redirect&quot; classname=&quot;org.glassfish.grizzly.config.portunif.HttpProtocolFinder&quot; name=&quot;http-redirect&quot;&gt;&lt;/protocol-finder&gt;\n      &lt;/port-unification&gt;\n    &lt;/protocol&gt;\n  &lt;/protocols&gt;\n  &lt;network-listeners&gt;\n    &lt;network-listener protocol=&quot;pu-protocol-admin&quot; port=&quot;4848&quot; name=&quot;admin-listener&quot; thread-pool=&quot;admin-thread-pool&quot; transport=&quot;tcp&quot;&gt;&lt;/network-listener&gt;\n    &lt;network-listener protocol=&quot;pu-protocol-http&quot; port=&quot;8090&quot; name=&quot;http-listener-1&quot; thread-pool=&quot;http-thread-pool&quot; transport=&quot;tcp&quot;&gt;&lt;/network-listener&gt;\n  &lt;/network-listeners&gt;\n  &lt;transports&gt;\n    &lt;transport name=&quot;tcp&quot;&gt;&lt;/transport&gt;\n  &lt;/transports&gt;\n&lt;/network-config&gt;\n</code></pre>\n<p>Any idea why HTTP to HTTPS redirection works only the first time the http link is accessed? Could it be an IE11 or firewall issue?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":3,"creation_date":1672831644,"post_id":75004717,"comment_id":132360274,"body_markdown":"Your own `Timer` class is shadowing `java.util.Timer`. Change the name of your class.","body":"Your own <code>Timer</code> class is shadowing <code>java.util.Timer</code>. Change the name of your class."}],"answers":[{"tags":[],"owner":{"account_id":26879814,"reputation":195,"user_id":20460458,"display_name":"Marja van der Wind"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1672839308,"creation_date":1672839308,"answer_id":75006268,"question_id":75004717,"body_markdown":"I suspect you are trying to use the util.Timer here with its predefined methods. However, you also name your own class Timer. The problem here is that you have the same name for two different things.\r\n\r\nThe compiler will first recognize your own classes before it searches through the util package. Therefore, the timer that you made is an object of your selfmade type Timer. This means that it also searches for methods in your class, where obviously no methods are defined.\r\n\r\nA good practice to prevent these types of errors, is to use classes only to make objects. Personally, I always make a Main class that holds the public static void main, which is currently in your Timer class.  There, you would also add the line `public static Timer timer = new Timer(); `. \r\nThus, I only make classes with other names than &#39;Main&#39; for objects and they always have a constructor, even if I only use the default version.","title":"The method schedule()/ cancel() is undefined for a type Timer","body":"<p>I suspect you are trying to use the util.Timer here with its predefined methods. However, you also name your own class Timer. The problem here is that you have the same name for two different things.</p>\n<p>The compiler will first recognize your own classes before it searches through the util package. Therefore, the timer that you made is an object of your selfmade type Timer. This means that it also searches for methods in your class, where obviously no methods are defined.</p>\n<p>A good practice to prevent these types of errors, is to use classes only to make objects. Personally, I always make a Main class that holds the public static void main, which is currently in your Timer class.  There, you would also add the line <code>public static Timer timer = new Timer(); </code>.\nThus, I only make classes with other names than 'Main' for objects and they always have a constructor, even if I only use the default version.</p>\n"}],"owner":{"account_id":27429918,"reputation":21,"user_id":20926790,"display_name":"Tim Matthew"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":105,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75006268,"answer_count":1,"score":0,"last_activity_date":1672839308,"creation_date":1672831483,"question_id":75004717,"body_markdown":"I tried to use `Timer` class, when I use `schedule()` and `cancel()` methods, 2 errors appear that methods are undefined for a type `Timer`. What can be the reason of it? \r\n\r\n    import java.util.*;\r\n    public class Timer{\r\n        public static Timer timer = new Timer();  \r\n        public static void main(String[] args){\r\n            TimerTask task = new TimerTask() {  \r\n            \r\n                @Override  \r\n                public void run(){  \r\n                    System.out.println(&quot;Task is on&quot;);  \r\n                    timer.cancel();\r\n                };  \r\n            };\r\n            long delay = 1000;\r\n            timer.schedule(task,delay);\r\n    \r\n    }","title":"The method schedule()/ cancel() is undefined for a type Timer","body":"<p>I tried to use <code>Timer</code> class, when I use <code>schedule()</code> and <code>cancel()</code> methods, 2 errors appear that methods are undefined for a type <code>Timer</code>. What can be the reason of it?</p>\n<pre><code>import java.util.*;\npublic class Timer{\n    public static Timer timer = new Timer();  \n    public static void main(String[] args){\n        TimerTask task = new TimerTask() {  \n        \n            @Override  \n            public void run(){  \n                System.out.println(&quot;Task is on&quot;);  \n                timer.cancel();\n            };  \n        };\n        long delay = 1000;\n        timer.schedule(task,delay);\n\n}\n</code></pre>\n"},{"tags":["java","swing","paintcomponent"],"comments":[{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":4,"creation_date":1672625556,"post_id":74978470,"comment_id":132315137,"body_markdown":"`setBackground(new Color(222, 228, 128, 0));` &lt;- This is why.  Swing does not support alpha based background colors, use `setOpaque` instead ... wow, second one to do this today","body":"<code>setBackground(new Color(222, 228, 128, 0));</code> &lt;- This is why.  Swing does not support alpha based background colors, use <code>setOpaque</code> instead ... wow, second one to do this today"},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":4,"creation_date":1672625623,"post_id":74978470,"comment_id":132315149,"body_markdown":"We should also discuss how Swing is not thread safe and that you should not be modifying the any state the UI relies on from outside the context of the Event Dispatching Thread.  You should consider making use of a Swing [`Timer`](https://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html) instead of a `Thread` as you main game loop","body":"We should also discuss how Swing is not thread safe and that you should not be modifying the any state the UI relies on from outside the context of the Event Dispatching Thread.  You should consider making use of a Swing <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html\" rel=\"nofollow noreferrer\"><code>Timer</code></a> instead of a <code>Thread</code> as you main game loop"},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":3,"creation_date":1672625687,"post_id":74978470,"comment_id":132315159,"body_markdown":"And [Key bindings](https://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html) instead of `KeyListener`","body":"And <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html\" rel=\"nofollow noreferrer\">Key bindings</a> instead of <code>KeyListener</code>"},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1672840542,"post_id":74978470,"comment_id":132363281,"body_markdown":"Examples  of the above suggestions from @MadProgrammer are shown in numerous examples on this site. You can search using `[Swing]` and/or `[Graphics]` tags.  Also check out the [Java Tutorials](http://docs.oracle.com/javase/tutorial/index.html) for more information.","body":"Examples  of the above suggestions from @MadProgrammer are shown in numerous examples on this site. You can search using <code>[Swing]</code> and/or <code>[Graphics]</code> tags.  Also check out the <a href=\"http://docs.oracle.com/javase/tutorial/index.html\" rel=\"nofollow noreferrer\">Java Tutorials</a> for more information."},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":1,"creation_date":1672843015,"post_id":74978470,"comment_id":132364229,"body_markdown":"Don&#39;t dispose of the supplied graphics context .  It&#39;s the same reference whether you cast or not.  If you want to dispose, then use `Graphics2D g2 = (Graphics2D) g.create();`","body":"Don&#39;t dispose of the supplied graphics context .  It&#39;s the same reference whether you cast or not.  If you want to dispose, then use <code>Graphics2D g2 = (Graphics2D) g.create();</code>"}],"owner":{"account_id":20914209,"reputation":21,"user_id":15364314,"display_name":"Hemsho"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672839268,"creation_date":1672624074,"question_id":74978470,"body_markdown":"Im trying to make a rectangle move on certain Input. Although the Input works, the rectangle is not being redrawn in the way I want it to. The former rectangles are not being erased.\r\n\r\n`\r\n```\r\npublic class MiniGame_Panel extends JPanel implements Runnable{\r\n\r\n\t/**\r\n\t * \r\n\t */\r\n\tprivate static final long serialVersionUID = 1L;\r\n\tThread gameThread;\r\n\tpublic KeyHandler2 keyH = new KeyHandler2();\r\n\tpublic MGPlayer spieler = new MGPlayer(keyH, this);\r\n\t\r\n\tpublic MiniGame_Panel() {\r\n\t\tsetBackground(new Color(222, 228, 128, 0));\r\n\t\tsetBounds(0, 0, 16*16*3 + 300 + 3, 16*13*3);\r\n\t\tsetVisible(true);\r\n\t\tsetFocusable(true);\r\n\t\trequestFocus(); \r\n\t\t\r\n\t\tthis.addKeyListener(keyH);\r\n\t}\r\n\r\n\tpublic void startGameThread() {\r\n\t\tgameThread = new Thread((Runnable) this);\r\n\t\tgameThread.start();\r\n\t}\r\n\r\n\tpublic void run() {\r\n\t\tdouble drawInterval = 1000000000/60;\r\n\t\tdouble delta = 0;\r\n\t\tlong lastTime = System.nanoTime();\r\n\t\tlong currentTime; \r\n\t\t\r\n\t\t// GAME LOOP\r\n\t\twhile(gameThread != null) {\r\n\t\t\tcurrentTime = System.nanoTime();\r\n\t\t\tdelta += (currentTime - lastTime) / drawInterval;\r\n\t\t\tlastTime = currentTime;\r\n\t\t\t\r\n\t\t\tif(delta &gt;= 1) {\r\n\t\t\t\tupdate();\r\n\t\t\t\trepaint();\r\n\t\t\t\tdelta--;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic void update() {\r\n\t\tspieler.update();\r\n\t}\r\n\t\r\n\t\r\n\tpublic void paintComponent(Graphics g) {\r\n\t\tsuper.paintComponent(g);\r\n\t\tGraphics2D g2 = (Graphics2D)g;\r\n\t\t\r\n\t\tspieler.draw(g2);\r\n\t\t\r\n\t\tg2.dispose();\r\n\t}\r\n\r\n}\r\n```\r\n\r\n```\r\npublic class MGPlayer {\r\n\r\n\tprivate int x, y;\r\n\tprivate Rectangle rect;\r\n\tprivate int width, height;\r\n\tprivate int leben;\r\n\tprivate KeyHandler2 keyH;\r\n\tprivate MiniGame_Panel mGp;\r\n\t\r\n\tpublic MGPlayer(KeyHandler2 keyH, MiniGame_Panel miniGame_Panel) {\r\n\t\tx = 10;\r\n\t\ty = 100;\r\n\t\twidth = 50;\r\n\t\theight = 100;\r\n\t\tleben = 3;\r\n\t\tthis.keyH = keyH;\r\n\t\tthis.mGp = miniGame_Panel;\r\n\t}\r\n\t\r\n\tboolean allowJump;\r\n\tpublic void update() {\r\n\t\tif(keyH.stats) {\r\n\t\t\tif(!allowJump) {\r\n\t\t\t\tthis.y -= 8;\r\n\t\t\t}\r\n\t\t\t//System.out.println(&quot;Leertaste&quot;);\r\n\t\t}\r\n\t\tif(keyH.left == true) {\r\n\t\t\tthis.x--;\r\n\t\t\t//System.out.println(&quot;links&quot;);\r\n\t\t}\r\n\t\tif(keyH.right == true) {\r\n\t\t\tthis.x++;\r\n\t\t\t//System.out.println(&quot;rechts&quot;);\r\n\t\t\t}\r\n\t\t\r\n\t\tif(y &lt;= 200) {\r\n\t\t\tthis.y++;\r\n\t\t\tallowJump = true;\r\n\t\t}else {\r\n\t\t\tallowJump = false;\r\n\t\t}\r\n\t\t\r\n\t}\r\n\tpublic void draw(Graphics2D g2) {\r\n\t\tg2.setColor(Color.BLACK);\r\n\t\tg2.fillRect(x, y, width, height);\r\n\t}\r\n\t\r\n}\r\n```\r\n[![enter image description here](https://i.stack.imgur.com/9HwXw.png)](https://i.stack.imgur.com/9HwXw.png)\r\n`\r\n\r\nI just want to draw a rectangle that moves on certain input. This works but instead of redrawing the rectangle, they all stay in the panel.","title":"Why does paintComponent not erase past Objects?","body":"<p>Im trying to make a rectangle move on certain Input. Although the Input works, the rectangle is not being redrawn in the way I want it to. The former rectangles are not being erased.</p>\n<p>`</p>\n<pre><code>public class MiniGame_Panel extends JPanel implements Runnable{\n\n    /**\n     * \n     */\n    private static final long serialVersionUID = 1L;\n    Thread gameThread;\n    public KeyHandler2 keyH = new KeyHandler2();\n    public MGPlayer spieler = new MGPlayer(keyH, this);\n    \n    public MiniGame_Panel() {\n        setBackground(new Color(222, 228, 128, 0));\n        setBounds(0, 0, 16*16*3 + 300 + 3, 16*13*3);\n        setVisible(true);\n        setFocusable(true);\n        requestFocus(); \n        \n        this.addKeyListener(keyH);\n    }\n\n    public void startGameThread() {\n        gameThread = new Thread((Runnable) this);\n        gameThread.start();\n    }\n\n    public void run() {\n        double drawInterval = 1000000000/60;\n        double delta = 0;\n        long lastTime = System.nanoTime();\n        long currentTime; \n        \n        // GAME LOOP\n        while(gameThread != null) {\n            currentTime = System.nanoTime();\n            delta += (currentTime - lastTime) / drawInterval;\n            lastTime = currentTime;\n            \n            if(delta &gt;= 1) {\n                update();\n                repaint();\n                delta--;\n            }\n        }\n    }\n    \n    public void update() {\n        spieler.update();\n    }\n    \n    \n    public void paintComponent(Graphics g) {\n        super.paintComponent(g);\n        Graphics2D g2 = (Graphics2D)g;\n        \n        spieler.draw(g2);\n        \n        g2.dispose();\n    }\n\n}\n</code></pre>\n<pre><code>public class MGPlayer {\n\n    private int x, y;\n    private Rectangle rect;\n    private int width, height;\n    private int leben;\n    private KeyHandler2 keyH;\n    private MiniGame_Panel mGp;\n    \n    public MGPlayer(KeyHandler2 keyH, MiniGame_Panel miniGame_Panel) {\n        x = 10;\n        y = 100;\n        width = 50;\n        height = 100;\n        leben = 3;\n        this.keyH = keyH;\n        this.mGp = miniGame_Panel;\n    }\n    \n    boolean allowJump;\n    public void update() {\n        if(keyH.stats) {\n            if(!allowJump) {\n                this.y -= 8;\n            }\n            //System.out.println(&quot;Leertaste&quot;);\n        }\n        if(keyH.left == true) {\n            this.x--;\n            //System.out.println(&quot;links&quot;);\n        }\n        if(keyH.right == true) {\n            this.x++;\n            //System.out.println(&quot;rechts&quot;);\n            }\n        \n        if(y &lt;= 200) {\n            this.y++;\n            allowJump = true;\n        }else {\n            allowJump = false;\n        }\n        \n    }\n    public void draw(Graphics2D g2) {\n        g2.setColor(Color.BLACK);\n        g2.fillRect(x, y, width, height);\n    }\n    \n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/9HwXw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9HwXw.png\" alt=\"enter image description here\" /></a>\n`</p>\n<p>I just want to draw a rectangle that moves on certain input. This works but instead of redrawing the rectangle, they all stay in the panel.</p>\n"},{"tags":["java","methods","file-handling"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1672839332,"post_id":75006167,"comment_id":132362789,"body_markdown":"You don&#39;t &#39;hold files open&#39; in Java, so just open the file again in the other method","body":"You don&#39;t &#39;hold files open&#39; in Java, so just open the file again in the other method"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1672862276,"post_id":75006167,"comment_id":132371048,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":15563040,"reputation":21,"user_id":11227667,"display_name":"Loremo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672839076,"creation_date":1672839076,"answer_id":75006216,"question_id":75006167,"body_markdown":"You can store this file in a variable, which will be accessible for both methods. \r\n\r\nOr, if the file producing method returns this file as a result, you can call this method inside the another method","title":"Accessing file in method that is created in another method in java","body":"<p>You can store this file in a variable, which will be accessible for both methods.</p>\n<p>Or, if the file producing method returns this file as a result, you can call this method inside the another method</p>\n"}],"owner":{"account_id":25535515,"reputation":1,"user_id":19322661,"display_name":"Haneen"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672839076,"creation_date":1672838834,"question_id":75006167,"body_markdown":"I&#39;m beginner and new to java. I  am making a java project. And I&#39;m using file handling in it. I want to ask a question that if I have created a certain file in one method, can I access that file and its content in another method? If yes then how?Thanks in advance!\r\n\r\nI an trying to do this. But don&#39;t know what is correct way to do it. ","title":"Accessing file in method that is created in another method in java","body":"<p>I'm beginner and new to java. I  am making a java project. And I'm using file handling in it. I want to ask a question that if I have created a certain file in one method, can I access that file and its content in another method? If yes then how?Thanks in advance!</p>\n<p>I an trying to do this. But don't know what is correct way to do it.</p>\n"},{"tags":["java","arrays","exception","indexoutofboundsexception"],"comments":[{"owner":{"account_id":1631680,"reputation":17783,"user_id":1506071,"accept_rate":68,"display_name":"Pradeep Simha"},"score":9,"creation_date":1399209701,"post_id":23456742,"comment_id":35958143,"body_markdown":"Are you passing command line arguments ie value for `args[0]` and `args[1]`?","body":"Are you passing command line arguments ie value for <code>args[0]</code> and <code>args[1]</code>?"},{"owner":{"account_id":3044638,"reputation":1627,"user_id":2580649,"display_name":"PakkuDon"},"score":0,"creation_date":1399209807,"post_id":23456742,"comment_id":35958165,"body_markdown":"Read [Eclipse : how we take arguments for main when run](http://stackoverflow.com/questions/12222153/eclipse-how-we-take-arguments-for-main-when-run)","body":"Read <a href=\"http://stackoverflow.com/questions/12222153/eclipse-how-we-take-arguments-for-main-when-run\">Eclipse : how we take arguments for main when run</a>"},{"owner":{"account_id":284109,"reputation":47153,"user_id":581994,"accept_rate":57,"display_name":"Hot Licks"},"score":0,"creation_date":1399211939,"post_id":23456742,"comment_id":35958880,"body_markdown":"For any &quot;real&quot; Java application (not a testcase or toy) you should check args.length before you access individual args values.","body":"For any &quot;real&quot; Java application (not a testcase or toy) you should check args.length before you access individual args values."},{"owner":{"account_id":416592,"reputation":4446,"user_id":792066,"accept_rate":73,"display_name":"Braiam"},"score":1,"creation_date":1413797057,"post_id":23456742,"comment_id":41563326,"body_markdown":"possible duplicate of [What causes a java.lang.ArrayIndexOutOfBoundsException and how do I prevent it?](http://stackoverflow.com/questions/5554734/what-causes-a-java-lang-arrayindexoutofboundsexception-and-how-do-i-prevent-it)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/5554734/what-causes-a-java-lang-arrayindexoutofboundsexception-and-how-do-i-prevent-it\">What causes a java.lang.ArrayIndexOutOfBoundsException and how do I prevent it?</a>"}],"answers":[{"tags":[],"owner":{"account_id":2818342,"reputation":299848,"user_id":2422776,"display_name":"Mureinik"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1535786236,"creation_date":1399209819,"answer_id":23456768,"question_id":23456742,"body_markdown":"This code expects to get two arguments when it&#39;s run (the `args` array).\r\nThe fact that accessing `args[0]` causes a `java.lang.ArrayIndexOutOfBoundsException` means you aren&#39;t passing any.","title":"java.lang.ArrayIndexOutOfBoundsException: 0","body":"<p>This code expects to get two arguments when it's run (the <code>args</code> array).\nThe fact that accessing <code>args[0]</code> causes a <code>java.lang.ArrayIndexOutOfBoundsException</code> means you aren't passing any.</p>\n"},{"tags":[],"owner":{"account_id":1675086,"reputation":33855,"user_id":1540818,"accept_rate":82,"display_name":"Joffrey"},"down_vote_count":0,"up_vote_count":15,"is_accepted":true,"score":15,"last_activity_date":1672838862,"creation_date":1399209822,"answer_id":23456770,"question_id":23456742,"body_markdown":"## Problem\r\n\r\nThis `ArrayIndexOutOfBoundsException: 0` means that the index `0` is not a valid index for your array `args[]`, which in turn means that your array is empty.\r\n\r\nIn this particular case of a `main()` method, it means that **no argument was passed** on to your program on the command line.\r\n\r\n## Possible solutions\r\n\r\n- If you&#39;re running your program from the command line, don&#39;t forget to pass 2 arguments in the command (2, because you&#39;re accessing `args[0]` and `args[1]`)\r\n\r\n- If you&#39;re running your program in Eclipse, you should set the command line arguments in the run configuration. Go to `Run &gt; Run configurations...` and then choose the `Arguments` tab for your run configuration and add some arguments in the *program arguments* area.\r\n\r\nNote that **you should handle the case where not enough arguments are given**, with something like this at the beginning of your main method:\r\n\r\n    if (args.length &lt; 2) {\r\n        System.err.println(&quot;Not enough arguments received.&quot;);\r\n        return;\r\n    }\r\n\r\nThis would fail gracefully instead of making your program crash.","title":"java.lang.ArrayIndexOutOfBoundsException: 0","body":"<h2>Problem</h2>\n<p>This <code>ArrayIndexOutOfBoundsException: 0</code> means that the index <code>0</code> is not a valid index for your array <code>args[]</code>, which in turn means that your array is empty.</p>\n<p>In this particular case of a <code>main()</code> method, it means that <strong>no argument was passed</strong> on to your program on the command line.</p>\n<h2>Possible solutions</h2>\n<ul>\n<li><p>If you're running your program from the command line, don't forget to pass 2 arguments in the command (2, because you're accessing <code>args[0]</code> and <code>args[1]</code>)</p>\n</li>\n<li><p>If you're running your program in Eclipse, you should set the command line arguments in the run configuration. Go to <code>Run &gt; Run configurations...</code> and then choose the <code>Arguments</code> tab for your run configuration and add some arguments in the <em>program arguments</em> area.</p>\n</li>\n</ul>\n<p>Note that <strong>you should handle the case where not enough arguments are given</strong>, with something like this at the beginning of your main method:</p>\n<pre><code>if (args.length &lt; 2) {\n    System.err.println(&quot;Not enough arguments received.&quot;);\n    return;\n}\n</code></pre>\n<p>This would fail gracefully instead of making your program crash.</p>\n"}],"owner":{"account_id":4421633,"reputation":89,"user_id":3601385,"display_name":"pg2014"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76769,"favorite_count":0,"down_vote_count":2,"up_vote_count":9,"accepted_answer_id":23456770,"answer_count":2,"score":7,"last_activity_date":1672838862,"creation_date":1399209658,"question_id":23456742,"body_markdown":"I am learning java using a book. There is this exercise that I can&#39;t get to work properly. It adds two doubles using the java class Double. When I try to run this code in Eclipse it gives me the error in the title.\r\n\r\n\r\n\t\r\n\tpublic static void main(String[] args) {\r\n\t\t\r\n\t\tDouble d1 = Double.valueOf(args[0]);\r\n\t\tDouble d2 = Double.valueOf(args[1]);\r\n\t\tdouble result = d1.doubleValue() + d2.doubleValue();\r\n\t\tSystem.out.println(args[0] + &quot;+&quot; + args[1] + &quot;=&quot; + result);\r\n\t\t\r\n\t}","title":"java.lang.ArrayIndexOutOfBoundsException: 0","body":"<p>I am learning java using a book. There is this exercise that I can't get to work properly. It adds two doubles using the java class Double. When I try to run this code in Eclipse it gives me the error in the title.</p>\n\n<pre><code>public static void main(String[] args) {\n\n    Double d1 = Double.valueOf(args[0]);\n    Double d2 = Double.valueOf(args[1]);\n    double result = d1.doubleValue() + d2.doubleValue();\n    System.out.println(args[0] + \"+\" + args[1] + \"=\" + result);\n\n}\n</code></pre>\n"},{"tags":["java","javafx","gluon","gluon-mobile","gluonfx"],"comments":[{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":3,"creation_date":1672849482,"post_id":75005990,"comment_id":132366766,"body_markdown":"I&#39;m not familiar with gluon mobile or gluon fx, but your `CommentsPresenter` and `ProfilePresenter` look like controller classes associated with FXML files. The `@FXML` annotation means the field will be initialized *in the controller object created by the `FXMLLoader`* when the corresponding FXML file is loaded. In your code you just do `ProfilePresenter profilePresenter = new ProfilePresenter();`, and then call `initData()` on that object you created. Why would you expect `as` to be non-null in `profilePresenter`?","body":"I&#39;m not familiar with gluon mobile or gluon fx, but your <code>CommentsPresenter</code> and <code>ProfilePresenter</code> look like controller classes associated with FXML files. The <code>@FXML</code> annotation means the field will be initialized <i>in the controller object created by the <code>FXMLLoader</code></i> when the corresponding FXML file is loaded. In your code you just do <code>ProfilePresenter profilePresenter = new ProfilePresenter();</code>, and then call <code>initData()</code> on that object you created. Why would you expect <code>as</code> to be non-null in <code>profilePresenter</code>?"},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":2,"creation_date":1672851844,"post_id":75005990,"comment_id":132367657,"body_markdown":"You are using `awt` imports in the `ProfilePresenter`.","body":"You are using <code>awt</code> imports in the <code>ProfilePresenter</code>."}],"owner":{"account_id":27430972,"reputation":9,"user_id":20927684,"display_name":"Kevin"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1672892315,"answer_count":0,"score":0,"last_activity_date":1672838231,"creation_date":1672838037,"question_id":75005990,"body_markdown":"Error All\r\n\r\n```\r\nException in thread &quot;JavaFX Application Thread&quot; java.lang.NullPointerException: Cannot invoke &quot;javafx.scene.control.Label.setText(String)&quot; because &quot;this.as&quot; is null\r\n\tat com.gluonhq.samples.comments.views.ProfilePresenter.initData(ProfilePresenter.java:51)\r\n\tat com.gluonhq.samples.comments.views.CommentsPresenter.lambda$initialize$3(CommentsPresenter.java:104)\r\n\tat javafx.base@19/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)\r\n\tat javafx.base@19/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:234)\r\n\tat javafx.base@19/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)\r\n\tat javafx.base@19/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)\r\n\tat javafx.base@19/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)\r\n\tat javafx.base@19/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\r\n\tat javafx.base@19/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\r\n\tat javafx.base@19/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\r\n\tat javafx.base@19/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\r\n\tat javafx.base@19/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\r\n\tat javafx.base@19/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\r\n\tat javafx.base@19/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\r\n\tat javafx.base@19/com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)\r\n\tat javafx.base@19/com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)\r\n\tat javafx.base@19/javafx.event.Event.fireEvent(Event.java:198)\r\n\tat javafx.graphics@19/javafx.scene.Scene$ClickGenerator.postProcess(Scene.java:3599)\r\n\tat javafx.graphics@19/javafx.scene.Scene$MouseHandler.process(Scene.java:3903)\r\n\tat javafx.graphics@19/javafx.scene.Scene.processMouseEvent(Scene.java:1887)\r\n\tat javafx.graphics@19/javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2620)\r\n\tat javafx.graphics@19/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411)\r\n\tat javafx.graphics@19/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301)\r\n\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\r\n\tat javafx.graphics@19/com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450)\r\n\tat javafx.graphics@19/com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424)\r\n\tat javafx.graphics@19/com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449)\r\n\tat javafx.graphics@19/com.sun.glass.ui.View.handleMouseEvent(View.java:551)\r\n\tat javafx.graphics@19/com.sun.glass.ui.View.notifyMouse(View.java:937)\r\n\tat javafx.graphics@19/com.sun.glass.ui.mac.MacView.notifyMouse(MacView.java:127)\r\n\r\n```\r\n\r\n\r\nProfilePresenter.java\r\nHere is my fxml controller and I&#39;m fetching the information from the commentPresenter\r\n\r\n```\r\npackage com.gluonhq.samples.comments.views;\r\n\r\nimport com.gluonhq.charm.glisten.animation.BounceInRightTransition;\r\nimport com.gluonhq.charm.glisten.application.AppManager;\r\nimport com.gluonhq.charm.glisten.control.AppBar;\r\nimport com.gluonhq.charm.glisten.control.ListTile;\r\nimport com.gluonhq.charm.glisten.mvc.View;\r\nimport com.gluonhq.charm.glisten.visual.MaterialDesignIcon;\r\nimport com.gluonhq.samples.comments.model.Comment;\r\nimport javafx.beans.binding.Bindings;\r\nimport javafx.fxml.FXML;\r\nimport javafx.scene.control.Button;\r\nimport javafx.scene.control.Label;\r\nimport javafx.scene.control.ListCell;\r\nimport javafx.scene.image.Image;\r\nimport javafx.scene.image.ImageView;\r\nimport javafx.scene.text.Text;\r\n\r\nimport java.awt.event.ActionEvent;\r\nimport java.awt.event.MouseEvent;\r\n\r\n\r\npublic class ProfilePresenter  {\r\n\r\n\r\n\r\n\r\n\r\n@FXML\r\nprotected View profile;\r\n@FXML\r\nprivate Label as;\r\n\r\n@FXML\r\nprivate ImageView jembatan;\r\n\r\n@FXML\r\nprivate Button back;\r\n\r\n@FXML\r\nprivate Label bridge;\r\n\r\n\r\n    private String data;\r\n\r\n    public void initData(Comment comment){\r\n        var listSel = comment;\r\n\r\n\r\n        String value = listSel.getAuthor();\r\n        as.setText(value);\r\n    }\r\n\r\n    public  void setData(String name) {\r\n       data = name;\r\n    }\r\n\r\n    public void initialize() {\r\n        Image img = new Image(&quot;jembatan_1.jpeg&quot;);\r\n        jembatan.setImage(img);\r\n\r\n\r\n        profile.showingProperty().addListener((obs, oldValue, newValue) -&gt; {\r\n            if (newValue) {\r\n                AppBar appBar = AppManager.getInstance().getAppBar();\r\n                appBar.setNavIcon(MaterialDesignIcon.ARROW_BACK.button(e -&gt;\r\n                        AppViewManager.COMMENTS_VIEW.switchView()));\r\n                appBar.setTitleText(&quot;Brigde Profile&quot;);\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    public void updateData(String content) {\r\n        bridge.setText(content);\r\n    }\r\n\r\n\r\n\r\n}\r\n```\r\n\r\nCommentPresenter.java\r\nHere is my fxml controller and I&#39;m fetching the information from the commentPresenter\r\n\r\n```\r\n/*\r\n * Copyright (c) 2016, 2021, Gluon\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *     * Redistributions of source code must retain the above copyright\r\n * notice, this list of conditions and the following disclaimer.\r\n *     * Redistributions in binary form must reproduce the above copyright\r\n * notice, this list of conditions and the following disclaimer in the\r\n * documentation and/or other materials provided with the distribution.\r\n *     * Neither the name of Gluon, any associated website, nor the\r\n * names of its contributors may be used to endorse or promote products\r\n * derived from this software without specific prior written permission.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL GLUON BE LIABLE FOR ANY\r\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n */\r\npackage com.gluonhq.samples.comments.views;\r\n\r\nimport com.gluonhq.charm.glisten.application.AppManager;\r\nimport com.gluonhq.charm.glisten.control.AppBar;\r\nimport com.gluonhq.charm.glisten.control.FloatingActionButton;\r\nimport com.gluonhq.charm.glisten.mvc.View;\r\nimport com.gluonhq.charm.glisten.visual.MaterialDesignIcon;\r\nimport com.gluonhq.samples.comments.cloud.Service;\r\nimport com.gluonhq.samples.comments.model.Comment;\r\n\r\nimport javafx.event.EventHandler;\r\nimport javafx.fxml.FXML;\r\nimport javafx.fxml.FXMLLoader;\r\nimport javafx.scene.Parent;\r\nimport javafx.scene.Scene;\r\nimport javafx.scene.control.Label;\r\nimport javafx.scene.control.ListView;\r\nimport javafx.scene.input.MouseEvent;\r\nimport javafx.stage.Stage;\r\n\r\nimport javax.inject.Inject;\r\nimport java.io.IOException;\r\n\r\n\r\n\r\npublic class CommentsPresenter{\r\n\r\n    @Inject \r\n    protected Service service;\r\n\r\n\r\n\r\n    @FXML\r\n    protected View comments;\r\n\r\n    @FXML\r\n    protected ListView&lt;Comment&gt; commentsList;\r\n\r\n    public void initialize() {\r\n        comments.showingProperty().addListener((obs, oldValue, newValue) -&gt; {\r\n            if (newValue) {\r\n                AppBar appBar = AppManager.getInstance().getAppBar();\r\n                appBar.setNavIcon(MaterialDesignIcon.MENU.button(e -&gt;\r\n                        AppManager.getInstance().getDrawer().open()));\r\n                appBar.setTitleText(&quot;List Bridge&quot;);\r\n            }\r\n        });\r\n\r\n\r\n\r\n        commentsList.setCellFactory(p -&gt; new CommentListCell());\r\n        commentsList.setPlaceholder(new Label(&quot;There are no comments&quot;));\r\n        commentsList.getItems().add(new Comment(&quot;1&quot;,&quot;Jembatan Merah&quot;, &quot;Palembang Indonesia&quot;));\r\n        \r\n\r\n\r\n\r\n        commentsList.setOnMouseClicked(mouseEvent -&gt; {\r\n\r\n            var myIndex = commentsList.getSelectionModel().getSelectedIndex();\r\n            var test = commentsList.getItems().get(myIndex);\r\n\r\n            ProfilePresenter profilePresenter = new ProfilePresenter();\r\n\r\n            profilePresenter.initData(commentsList.getSelectionModel().getSelectedItem());\r\n            AppViewManager.PROFILE_VIEW.switchView();\r\n\r\n        });\r\n\r\n\r\n\r\n        service.retrieveComments();\r\n    }\r\n\r\n\r\n\r\n\r\n}\r\n```\r\n\r\n\r\n\r\nI conveyed information from the Comment Presenter to the Presenter Profile and then I wanted to setText my label but instead there was an error like the one above, but when it was printed in the console the data appeared. How to Fix It\r\n","title":"Exception in thread &quot;JavaFX Application Thread&quot; java.lang.NullPointerException: How to i fix it?","body":"<p>Error All</p>\n<pre><code>Exception in thread &quot;JavaFX Application Thread&quot; java.lang.NullPointerException: Cannot invoke &quot;javafx.scene.control.Label.setText(String)&quot; because &quot;this.as&quot; is null\n    at com.gluonhq.samples.comments.views.ProfilePresenter.initData(ProfilePresenter.java:51)\n    at com.gluonhq.samples.comments.views.CommentsPresenter.lambda$initialize$3(CommentsPresenter.java:104)\n    at javafx.base@19/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)\n    at javafx.base@19/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:234)\n    at javafx.base@19/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)\n    at javafx.base@19/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)\n    at javafx.base@19/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)\n    at javafx.base@19/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\n    at javafx.base@19/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\n    at javafx.base@19/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\n    at javafx.base@19/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\n    at javafx.base@19/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\n    at javafx.base@19/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\n    at javafx.base@19/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\n    at javafx.base@19/com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)\n    at javafx.base@19/com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)\n    at javafx.base@19/javafx.event.Event.fireEvent(Event.java:198)\n    at javafx.graphics@19/javafx.scene.Scene$ClickGenerator.postProcess(Scene.java:3599)\n    at javafx.graphics@19/javafx.scene.Scene$MouseHandler.process(Scene.java:3903)\n    at javafx.graphics@19/javafx.scene.Scene.processMouseEvent(Scene.java:1887)\n    at javafx.graphics@19/javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2620)\n    at javafx.graphics@19/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411)\n    at javafx.graphics@19/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\n    at javafx.graphics@19/com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450)\n    at javafx.graphics@19/com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424)\n    at javafx.graphics@19/com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449)\n    at javafx.graphics@19/com.sun.glass.ui.View.handleMouseEvent(View.java:551)\n    at javafx.graphics@19/com.sun.glass.ui.View.notifyMouse(View.java:937)\n    at javafx.graphics@19/com.sun.glass.ui.mac.MacView.notifyMouse(MacView.java:127)\n\n</code></pre>\n<p>ProfilePresenter.java\nHere is my fxml controller and I'm fetching the information from the commentPresenter</p>\n<pre><code>package com.gluonhq.samples.comments.views;\n\nimport com.gluonhq.charm.glisten.animation.BounceInRightTransition;\nimport com.gluonhq.charm.glisten.application.AppManager;\nimport com.gluonhq.charm.glisten.control.AppBar;\nimport com.gluonhq.charm.glisten.control.ListTile;\nimport com.gluonhq.charm.glisten.mvc.View;\nimport com.gluonhq.charm.glisten.visual.MaterialDesignIcon;\nimport com.gluonhq.samples.comments.model.Comment;\nimport javafx.beans.binding.Bindings;\nimport javafx.fxml.FXML;\nimport javafx.scene.control.Button;\nimport javafx.scene.control.Label;\nimport javafx.scene.control.ListCell;\nimport javafx.scene.image.Image;\nimport javafx.scene.image.ImageView;\nimport javafx.scene.text.Text;\n\nimport java.awt.event.ActionEvent;\nimport java.awt.event.MouseEvent;\n\n\npublic class ProfilePresenter  {\n\n\n\n\n\n@FXML\nprotected View profile;\n@FXML\nprivate Label as;\n\n@FXML\nprivate ImageView jembatan;\n\n@FXML\nprivate Button back;\n\n@FXML\nprivate Label bridge;\n\n\n    private String data;\n\n    public void initData(Comment comment){\n        var listSel = comment;\n\n\n        String value = listSel.getAuthor();\n        as.setText(value);\n    }\n\n    public  void setData(String name) {\n       data = name;\n    }\n\n    public void initialize() {\n        Image img = new Image(&quot;jembatan_1.jpeg&quot;);\n        jembatan.setImage(img);\n\n\n        profile.showingProperty().addListener((obs, oldValue, newValue) -&gt; {\n            if (newValue) {\n                AppBar appBar = AppManager.getInstance().getAppBar();\n                appBar.setNavIcon(MaterialDesignIcon.ARROW_BACK.button(e -&gt;\n                        AppViewManager.COMMENTS_VIEW.switchView()));\n                appBar.setTitleText(&quot;Brigde Profile&quot;);\n            }\n        });\n\n    }\n\n    public void updateData(String content) {\n        bridge.setText(content);\n    }\n\n\n\n}\n</code></pre>\n<p>CommentPresenter.java\nHere is my fxml controller and I'm fetching the information from the commentPresenter</p>\n<pre><code>/*\n * Copyright (c) 2016, 2021, Gluon\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *     * Redistributions of source code must retain the above copyright\n * notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above copyright\n * notice, this list of conditions and the following disclaimer in the\n * documentation and/or other materials provided with the distribution.\n *     * Neither the name of Gluon, any associated website, nor the\n * names of its contributors may be used to endorse or promote products\n * derived from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL GLUON BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\npackage com.gluonhq.samples.comments.views;\n\nimport com.gluonhq.charm.glisten.application.AppManager;\nimport com.gluonhq.charm.glisten.control.AppBar;\nimport com.gluonhq.charm.glisten.control.FloatingActionButton;\nimport com.gluonhq.charm.glisten.mvc.View;\nimport com.gluonhq.charm.glisten.visual.MaterialDesignIcon;\nimport com.gluonhq.samples.comments.cloud.Service;\nimport com.gluonhq.samples.comments.model.Comment;\n\nimport javafx.event.EventHandler;\nimport javafx.fxml.FXML;\nimport javafx.fxml.FXMLLoader;\nimport javafx.scene.Parent;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Label;\nimport javafx.scene.control.ListView;\nimport javafx.scene.input.MouseEvent;\nimport javafx.stage.Stage;\n\nimport javax.inject.Inject;\nimport java.io.IOException;\n\n\n\npublic class CommentsPresenter{\n\n    @Inject \n    protected Service service;\n\n\n\n    @FXML\n    protected View comments;\n\n    @FXML\n    protected ListView&lt;Comment&gt; commentsList;\n\n    public void initialize() {\n        comments.showingProperty().addListener((obs, oldValue, newValue) -&gt; {\n            if (newValue) {\n                AppBar appBar = AppManager.getInstance().getAppBar();\n                appBar.setNavIcon(MaterialDesignIcon.MENU.button(e -&gt;\n                        AppManager.getInstance().getDrawer().open()));\n                appBar.setTitleText(&quot;List Bridge&quot;);\n            }\n        });\n\n\n\n        commentsList.setCellFactory(p -&gt; new CommentListCell());\n        commentsList.setPlaceholder(new Label(&quot;There are no comments&quot;));\n        commentsList.getItems().add(new Comment(&quot;1&quot;,&quot;Jembatan Merah&quot;, &quot;Palembang Indonesia&quot;));\n        \n\n\n\n        commentsList.setOnMouseClicked(mouseEvent -&gt; {\n\n            var myIndex = commentsList.getSelectionModel().getSelectedIndex();\n            var test = commentsList.getItems().get(myIndex);\n\n            ProfilePresenter profilePresenter = new ProfilePresenter();\n\n            profilePresenter.initData(commentsList.getSelectionModel().getSelectedItem());\n            AppViewManager.PROFILE_VIEW.switchView();\n\n        });\n\n\n\n        service.retrieveComments();\n    }\n\n\n\n\n}\n</code></pre>\n<p>I conveyed information from the Comment Presenter to the Presenter Profile and then I wanted to setText my label but instead there was an error like the one above, but when it was printed in the console the data appeared. How to Fix It</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1672844514,"post_id":75005975,"comment_id":132364772,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":27427451,"reputation":1,"user_id":20924694,"display_name":"Nandhini Ramadurai"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672837953,"creation_date":1672837953,"question_id":75005975,"body_markdown":"i need to upload large to sharepoint using graph rest api but i am facing issue in uploading any one can suggest solution\r\n\r\n{\r\n   &quot;error&quot;: \r\n   {\r\n      &quot;code&quot;:&quot;invalidRequest&quot;,\r\n      &quot;message&quot;:&quot;The Content-Range header is missing or malformed.&quot;\r\n   }\r\n}","title":"Not able to upload large file to sharepoint using graph","body":"<p>i need to upload large to sharepoint using graph rest api but i am facing issue in uploading any one can suggest solution</p>\n<p>{\n&quot;error&quot;:\n{\n&quot;code&quot;:&quot;invalidRequest&quot;,\n&quot;message&quot;:&quot;The Content-Range header is missing or malformed.&quot;\n}\n}</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1672838130,"post_id":75005935,"comment_id":132362358,"body_markdown":"Do you know how to parse json in Java and how to format a pojo to json again? If not, I&#39;d suggest you start looking into that - there are multiple tutorials on the net that cover this. If you already know how to do the conversion then please share your attempt as well as the logic/rules how the 1st json should be converted to the 2nd.","body":"Do you know how to parse json in Java and how to format a pojo to json again? If not, I&#39;d suggest you start looking into that - there are multiple tutorials on the net that cover this. If you already know how to do the conversion then please share your attempt as well as the logic/rules how the 1st json should be converted to the 2nd."},{"owner":{"account_id":27430983,"reputation":1,"user_id":20927694,"display_name":"Boris s"},"score":0,"creation_date":1672838521,"post_id":75005935,"comment_id":132362492,"body_markdown":"I don&#39;t know, I wouldn&#39;t have asked if I knew","body":"I don&#39;t know, I wouldn&#39;t have asked if I knew"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":1,"creation_date":1672839922,"post_id":75005935,"comment_id":132363024,"body_markdown":"Result of a quick search: https://www.baeldung.com/java-org-json, other options would be libraries like Jackson or Gson. Start with those to learn about pojo &lt;-&gt; json conversion","body":"Result of a quick search: <a href=\"https://www.baeldung.com/java-org-json\" rel=\"nofollow noreferrer\">baeldung.com/java-org-json</a>, other options would be libraries like Jackson or Gson. Start with those to learn about pojo &lt;-&gt; json conversion"},{"owner":{"account_id":27430983,"reputation":1,"user_id":20927694,"display_name":"Boris s"},"score":0,"creation_date":1672840069,"post_id":75005935,"comment_id":132363085,"body_markdown":"I&#39;ve looked here, but I don&#39;t think it will help me get the format I want. Do you have any solution?","body":"I&#39;ve looked here, but I don&#39;t think it will help me get the format I want. Do you have any solution?"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1672840319,"post_id":75005935,"comment_id":132363184,"body_markdown":"Why don&#39;t you think it doesn&#39;t help you? You basically need to convert json-&gt; pojo -&gt; pojo -&gt; json so use those as a start. The rules of the pojo -&gt; pojo conversion is what you have to come up with since you know the source and target formats. If you don&#39;t know the rules yet try to map them out on paper, i.e. try to come up with instructions for another human on how to do it - then post those instructions here if you&#39;re still stuck.","body":"Why don&#39;t you think it doesn&#39;t help you? You basically need to convert json-&gt; pojo -&gt; pojo -&gt; json so use those as a start. The rules of the pojo -&gt; pojo conversion is what you have to come up with since you know the source and target formats. If you don&#39;t know the rules yet try to map them out on paper, i.e. try to come up with instructions for another human on how to do it - then post those instructions here if you&#39;re still stuck."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1672840354,"post_id":75005935,"comment_id":132363203,"body_markdown":"Btw, you might want to take a [tour] and read [help] resources, especially [ask].","body":"Btw, you might want to take a <a href=\"https://stackoverflow.com/tour\">tour</a> and read <a href=\"https://stackoverflow.com/help\">help center</a> resources, especially <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."},{"owner":{"account_id":27430983,"reputation":1,"user_id":20927694,"display_name":"Boris s"},"score":0,"creation_date":1672841165,"post_id":75005935,"comment_id":132363512,"body_markdown":"I&#39;m new to java and I&#39;m trying to learn the general syntax structure. In order to learn its logic, I need to see an example in practice, so I asked how the solution of such an example should be.","body":"I&#39;m new to java and I&#39;m trying to learn the general syntax structure. In order to learn its logic, I need to see an example in practice, so I asked how the solution of such an example should be."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1672842524,"post_id":75005935,"comment_id":132364055,"body_markdown":"If you are new to Java I&#39;d suggest you work through simple tutorials first and then put them together. Start with simple pojo-&gt;json and json-&gt;pojo, then combine those. Or start even earlier with a tutorial on Java&#39;s data structures. Giving you an example here might not help that much and it&#39;s hard to help if we don&#39;t know the rules of the mapping.","body":"If you are new to Java I&#39;d suggest you work through simple tutorials first and then put them together. Start with simple pojo-&gt;json and json-&gt;pojo, then combine those. Or start even earlier with a tutorial on Java&#39;s data structures. Giving you an example here might not help that much and it&#39;s hard to help if we don&#39;t know the rules of the mapping."},{"owner":{"account_id":27430983,"reputation":1,"user_id":20927694,"display_name":"Boris s"},"score":0,"creation_date":1672842687,"post_id":75005935,"comment_id":132364117,"body_markdown":"I need help in practice what is the solution to my question?","body":"I need help in practice what is the solution to my question?"}],"owner":{"account_id":27430983,"reputation":1,"user_id":20927694,"display_name":"Boris s"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672837831,"creation_date":1672837759,"question_id":75005935,"body_markdown":"This is the data I created in my database\r\n\r\n    {   \r\n      &quot;id&quot;: 1,\r\n      &quot;values&quot;: &quot;80,90&quot;,\r\n      &quot;name&quot;: &quot;number&quot;\r\n    },\r\n    {\r\n      &quot;id&quot;: 2,\r\n      &quot;values&quot;: &quot;22351,25252,27123,29123,32123&quot;,\r\n      &quot;name&quot;: &quot;numbers_1&quot;\r\n    },\r\n    {\r\n      &quot;id&quot;: 3,\r\n      &quot;values&quot;: &quot;12351,15252,17123,19123,12123&quot;,\r\n      &quot;name&quot;: &quot;numbers_2&quot;\r\n    }\r\n\r\nI want to make the data saved in the above database in JSON format with Java as follows. How can I do that?\r\n\r\n    {\r\n      &quot;id&quot;: 1,\r\n      &quot;highNumber&quot;: &quot;80&quot;,\r\n      &quot;numbers&quot;: [\r\n        {\r\n          &quot;id&quot;: 2,\r\n          &quot;numbersCode&quot;: &quot;22351,25252,27123,29123,32123&quot;\r\n        }\r\n      ]\r\n    \r\n    },\r\n    {\r\n      &quot;id&quot;: 2,\r\n      &quot;highNumber&quot;: &quot;90&quot;,\r\n      &quot;numbers&quot;: [\r\n        {\r\n          &quot;id&quot;: 1,\r\n          &quot;numbersCode&quot;: &quot;22351,25252,27123,29123,32123&quot;\r\n        }\r\n      ]\r\n    \r\n    }\r\n\r\nI wrote the JDBC connection code, but I don&#39;t know how to write what in the while, can you help?\r\n\r\nI wrote the JDBC connection code, but I don&#39;t know how to write what in the while, can you help?\r\n\r\n    public List&lt;Number&gt; getAllNumber() {\r\n        List&lt;Number&gt; list = new ArrayList&lt;&gt;();\r\n    \r\n    \r\n        try {\r\n            Class.forName(&quot;DriverClass&quot;);\r\n            Connection conn = JDBCUtils.getConnection();\r\n            PreparedStatement ps = conn.prepareStatement(sql);\r\n            ResultSet rs = ps.executeQuery();\r\n    \r\n            while (rs.next()) {\r\n                String number= rs.getString(&quot;VALUES&quot;);\r\n                System.out.println(number);\r\n            }\r\n        }\r\n        catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n        return list;\r\n    }\r\n\r\nWhat I want to do is return these numbers &quot;22351,25252,27123,29123,32123&quot; for number 80, return these numbers &quot;22351,25252,27123,29123,32123&quot; for number 90.","title":"How to i convert the data in the database to JSON in a different format?","body":"<p>This is the data I created in my database</p>\n<pre><code>{   \n  &quot;id&quot;: 1,\n  &quot;values&quot;: &quot;80,90&quot;,\n  &quot;name&quot;: &quot;number&quot;\n},\n{\n  &quot;id&quot;: 2,\n  &quot;values&quot;: &quot;22351,25252,27123,29123,32123&quot;,\n  &quot;name&quot;: &quot;numbers_1&quot;\n},\n{\n  &quot;id&quot;: 3,\n  &quot;values&quot;: &quot;12351,15252,17123,19123,12123&quot;,\n  &quot;name&quot;: &quot;numbers_2&quot;\n}\n</code></pre>\n<p>I want to make the data saved in the above database in JSON format with Java as follows. How can I do that?</p>\n<pre><code>{\n  &quot;id&quot;: 1,\n  &quot;highNumber&quot;: &quot;80&quot;,\n  &quot;numbers&quot;: [\n    {\n      &quot;id&quot;: 2,\n      &quot;numbersCode&quot;: &quot;22351,25252,27123,29123,32123&quot;\n    }\n  ]\n\n},\n{\n  &quot;id&quot;: 2,\n  &quot;highNumber&quot;: &quot;90&quot;,\n  &quot;numbers&quot;: [\n    {\n      &quot;id&quot;: 1,\n      &quot;numbersCode&quot;: &quot;22351,25252,27123,29123,32123&quot;\n    }\n  ]\n\n}\n</code></pre>\n<p>I wrote the JDBC connection code, but I don't know how to write what in the while, can you help?</p>\n<p>I wrote the JDBC connection code, but I don't know how to write what in the while, can you help?</p>\n<pre><code>public List&lt;Number&gt; getAllNumber() {\n    List&lt;Number&gt; list = new ArrayList&lt;&gt;();\n\n\n    try {\n        Class.forName(&quot;DriverClass&quot;);\n        Connection conn = JDBCUtils.getConnection();\n        PreparedStatement ps = conn.prepareStatement(sql);\n        ResultSet rs = ps.executeQuery();\n\n        while (rs.next()) {\n            String number= rs.getString(&quot;VALUES&quot;);\n            System.out.println(number);\n        }\n    }\n    catch (Exception e) {\n        e.printStackTrace();\n    }\n    return list;\n}\n</code></pre>\n<p>What I want to do is return these numbers &quot;22351,25252,27123,29123,32123&quot; for number 80, return these numbers &quot;22351,25252,27123,29123,32123&quot; for number 90.</p>\n"},{"tags":["java","performance"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":1,"creation_date":1671109965,"post_id":74812083,"comment_id":132030311,"body_markdown":"how many iterations must it do?","body":"how many iterations must it do?"},{"owner":{"account_id":18129385,"reputation":11,"user_id":13184634,"display_name":"vijay kumar"},"score":0,"creation_date":1671110731,"post_id":74812083,"comment_id":132030578,"body_markdown":"depends on number of outputs from PowerShell command. I need all drives.","body":"depends on number of outputs from PowerShell command. I need all drives."},{"owner":{"account_id":13010918,"reputation":442,"user_id":11532975,"display_name":"Adrian Lagartera"},"score":0,"creation_date":1671111553,"post_id":74812083,"comment_id":132030910,"body_markdown":"Are you sure the problem it is in the loop, and not in the previous process of open the powershell? Because the loop doesn&#39;t look bad.","body":"Are you sure the problem it is in the loop, and not in the previous process of open the powershell? Because the loop doesn&#39;t look bad."},{"owner":{"account_id":18129385,"reputation":11,"user_id":13184634,"display_name":"vijay kumar"},"score":0,"creation_date":1671111736,"post_id":74812083,"comment_id":132031002,"body_markdown":"Previous PowerShell command gets executed within few milliseconds. But When it enters While loop its takes 2 second to execute. I tried to divide all the while loop part and found in.readLine() is taking approx 2 sec time. Any alternate solution for that ?","body":"Previous PowerShell command gets executed within few milliseconds. But When it enters While loop its takes 2 second to execute. I tried to divide all the while loop part and found in.readLine() is taking approx 2 sec time. Any alternate solution for that ?"},{"owner":{"account_id":13010918,"reputation":442,"user_id":11532975,"display_name":"Adrian Lagartera"},"score":0,"creation_date":1671112339,"post_id":74812083,"comment_id":132031277,"body_markdown":"Ok not any problem at all, at the beginning I was thinking the time was too much high, but 2s is the time for the BufferedReader, you don&#39;t have any way to improve that, maybe if you can use `FileChannel`instead of BufferedReader, but 2s is average on that class","body":"Ok not any problem at all, at the beginning I was thinking the time was too much high, but 2s is the time for the BufferedReader, you don&#39;t have any way to improve that, maybe if you can use <code>FileChannel</code>instead of BufferedReader, but 2s is average on that class"},{"owner":{"account_id":18129385,"reputation":11,"user_id":13184634,"display_name":"vijay kumar"},"score":0,"creation_date":1671113956,"post_id":74812083,"comment_id":132031902,"body_markdown":"Actually, I have to execute 3 PowerShell command in a row including this so overall it is taking approx. 6-7 sec of time and that&#39;s what my main problem is.","body":"Actually, I have to execute 3 PowerShell command in a row including this so overall it is taking approx. 6-7 sec of time and that&#39;s what my main problem is."},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1671120606,"post_id":74812083,"comment_id":132034621,"body_markdown":"BTW, as of `Java 18`, the string version of `Runtime.getRuntime().exec` has been deprecated.  The `String array` version should be used with the array holding each of the arguments.  E.g. `Runtime.getRuntime().exec(&quot;powershell.exe Get-Partition -disknumber 1 | select DriveLetter&quot;.split(&quot;\\\\s+&quot;));`","body":"BTW, as of <code>Java 18</code>, the string version of <code>Runtime.getRuntime().exec</code> has been deprecated.  The <code>String array</code> version should be used with the array holding each of the arguments.  E.g. <code>Runtime.getRuntime().exec(&quot;powershell.exe Get-Partition -disknumber 1 | select DriveLetter&quot;.split(&quot;\\\\s+&quot;));</code>"},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1671121038,"post_id":74812083,"comment_id":132034787,"body_markdown":"Also, within the `powershell program` itself, it takes 6 seconds for my invocation to come back with the information sans the pipe.  This is probably related to Windows response time and not Java.  I am runing a quad core i7 processor, using Windows 10","body":"Also, within the <code>powershell program</code> itself, it takes 6 seconds for my invocation to come back with the information sans the pipe.  This is probably related to Windows response time and not Java.  I am runing a quad core i7 processor, using Windows 10"}],"answers":[{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671125006,"creation_date":1671125006,"answer_id":74815342,"question_id":74812083,"body_markdown":"As I said in my comments, I believe the issue is with the execution of the `powerShell` and not Java. See how quickly the following runs using the `cmd.exe`.\r\nHere, all I&#39;m doing is a directory listing and replacing `&lt;DIR&gt;` as though it was HDD.\r\n```\r\n        Process p = Runtime.getRuntime().exec(\r\n                &quot;cmd.exe /c dir&quot;.split(&quot;\\\\s+&quot;));\r\n                        \r\n        System.out.println(p);\r\n        BufferedReader in = new BufferedReader(\r\n                new java.io.InputStreamReader(p.getInputStream()));\r\n        String line1 = &quot;&quot;;\r\n        List&lt;String&gt; hddList = new ArrayList&lt;String&gt;();\r\n        while ((line1 = in.readLine()) != null) {\r\n            System.out.println(line1);\r\n            if (!line1.trim().isEmpty()) {\r\n                if (line1.contains(&quot;&lt;DIR&gt;&quot;)) {\r\n                    hddList.add(line1.replaceAll(&quot; +&quot;, &quot;#&quot;).split(&quot;#&quot;)[0] + &quot;#&quot;\r\n                            + &quot;HDD&quot;);\r\n                }\r\n\r\n            }\r\n        }\r\n        System.out.println(hddList);\r\n```\r\nYou might be able to run `cmd.exe` as administrator and use related privileged commands to get the disk information.  I have yet to determine how to do that without password input.","title":"Reading output from Powershell takes much time to execute","body":"<p>As I said in my comments, I believe the issue is with the execution of the <code>powerShell</code> and not Java. See how quickly the following runs using the <code>cmd.exe</code>.\nHere, all I'm doing is a directory listing and replacing <code>&lt;DIR&gt;</code> as though it was HDD.</p>\n<pre><code>        Process p = Runtime.getRuntime().exec(\n                &quot;cmd.exe /c dir&quot;.split(&quot;\\\\s+&quot;));\n                        \n        System.out.println(p);\n        BufferedReader in = new BufferedReader(\n                new java.io.InputStreamReader(p.getInputStream()));\n        String line1 = &quot;&quot;;\n        List&lt;String&gt; hddList = new ArrayList&lt;String&gt;();\n        while ((line1 = in.readLine()) != null) {\n            System.out.println(line1);\n            if (!line1.trim().isEmpty()) {\n                if (line1.contains(&quot;&lt;DIR&gt;&quot;)) {\n                    hddList.add(line1.replaceAll(&quot; +&quot;, &quot;#&quot;).split(&quot;#&quot;)[0] + &quot;#&quot;\n                            + &quot;HDD&quot;);\n                }\n\n            }\n        }\n        System.out.println(hddList);\n</code></pre>\n<p>You might be able to run <code>cmd.exe</code> as administrator and use related privileged commands to get the disk information.  I have yet to determine how to do that without password input.</p>\n"},{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672837800,"creation_date":1672836938,"answer_id":75005759,"question_id":74812083,"body_markdown":"This seems to be an [xy-problem], as you can easily get the drive letters in Java like\r\n\r\n```java\r\nList&lt;String&gt; driveLetters = new ArrayList&lt;&gt;();\r\nfor(Path r: FileSystems.getDefault().getRootDirectories()) {\r\n    String s = r.toString();\r\n    if(s.length() == 3 &amp;&amp; s.charAt(1) == &#39;:&#39;) {\r\n        driveLetters.add(s.substring(0, 1));\r\n    }\r\n}\r\n```\r\n\r\nsince Java&#160;7. This needs no interprocess communication and hence, has no such latency problems.\r\n\r\nIf you want to limit the result to fixed HDDs, you can use something like\r\n\r\n```java\r\nList&lt;String&gt; driveLetters = new ArrayList&lt;&gt;();\r\nfor(Path r: FileSystems.getDefault().getRootDirectories()) {\r\n    String s = r.toString();\r\n    if(s.length() == 3 &amp;&amp; s.charAt(1) == &#39;:&#39;) try {\r\n        FileStore store = Files.getFileStore(r);\r\n        if(!Boolean.TRUE.equals(store.getAttribute(&quot;volume:isRemovable&quot;))\r\n        &amp;&amp; !Boolean.TRUE.equals(store.getAttribute(&quot;volume:isCdrom&quot;))) {\r\n            driveLetters.add(s.substring(0, 1));\r\n        }\r\n    }\r\n    catch(IOException ex) {} // no media in drive, obviously not an HDD then\r\n}\r\n```\r\n\r\n[xy-problem]: https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem/66378#66378","title":"Reading output from Powershell takes much time to execute","body":"<p>This seems to be an <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem/66378#66378\">xy-problem</a>, as you can easily get the drive letters in Java like</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;String&gt; driveLetters = new ArrayList&lt;&gt;();\nfor(Path r: FileSystems.getDefault().getRootDirectories()) {\n    String s = r.toString();\n    if(s.length() == 3 &amp;&amp; s.charAt(1) == ':') {\n        driveLetters.add(s.substring(0, 1));\n    }\n}\n</code></pre>\n<p>since Java 7. This needs no interprocess communication and hence, has no such latency problems.</p>\n<p>If you want to limit the result to fixed HDDs, you can use something like</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;String&gt; driveLetters = new ArrayList&lt;&gt;();\nfor(Path r: FileSystems.getDefault().getRootDirectories()) {\n    String s = r.toString();\n    if(s.length() == 3 &amp;&amp; s.charAt(1) == ':') try {\n        FileStore store = Files.getFileStore(r);\n        if(!Boolean.TRUE.equals(store.getAttribute(&quot;volume:isRemovable&quot;))\n        &amp;&amp; !Boolean.TRUE.equals(store.getAttribute(&quot;volume:isCdrom&quot;))) {\n            driveLetters.add(s.substring(0, 1));\n        }\n    }\n    catch(IOException ex) {} // no media in drive, obviously not an HDD then\n}\n</code></pre>\n"}],"owner":{"account_id":18129385,"reputation":11,"user_id":13184634,"display_name":"vijay kumar"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":122,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1672837800,"creation_date":1671109901,"question_id":74812083,"body_markdown":"So, I wrote this code on java and it&#39;s taking some 6 second times to execute and give output. As I am not from coding background I was expecting if someone from this expert&#39;s group could help me optimize this little.\r\nBelow is my code also the PowerShell command runs within seconds. only this while loop is taking much time.\r\n\r\nWhat I want to achieve is just get the list of drives which is HDD and print it.\r\n\r\n```\r\nProcess p = Runtime.getRuntime().exec(&quot;powershell.exe Get-Partition -disknumber 1 | select DriveLetter&quot;);\r\nBufferedReader in = new BufferedReader(new java.io.InputStreamReader(p.getInputStream()));\r\nString line1 = &quot;&quot;;\r\nArrayList&lt;String&gt; hddList = new ArrayList&lt;String&gt;();\r\nwhile ((line1 = in.readLine()) != null) {\r\n    if (!line1.trim().isEmpty()) {\r\n        if (line1.contains(&quot;HDD&quot;)) {\r\n            hddList.add(line1.replaceAll(&quot; +&quot;, &quot;#&quot;).split(&quot;#&quot;)[0]+&quot;#&quot;+&quot;HDD&quot;);\r\n        }\r\n    }\r\n}","title":"Reading output from Powershell takes much time to execute","body":"<p>So, I wrote this code on java and it's taking some 6 second times to execute and give output. As I am not from coding background I was expecting if someone from this expert's group could help me optimize this little.\nBelow is my code also the PowerShell command runs within seconds. only this while loop is taking much time.</p>\n<p>What I want to achieve is just get the list of drives which is HDD and print it.</p>\n<pre><code>Process p = Runtime.getRuntime().exec(&quot;powershell.exe Get-Partition -disknumber 1 | select DriveLetter&quot;);\nBufferedReader in = new BufferedReader(new java.io.InputStreamReader(p.getInputStream()));\nString line1 = &quot;&quot;;\nArrayList&lt;String&gt; hddList = new ArrayList&lt;String&gt;();\nwhile ((line1 = in.readLine()) != null) {\n    if (!line1.trim().isEmpty()) {\n        if (line1.contains(&quot;HDD&quot;)) {\n            hddList.add(line1.replaceAll(&quot; +&quot;, &quot;#&quot;).split(&quot;#&quot;)[0]+&quot;#&quot;+&quot;HDD&quot;);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","android","android-webview","single-page-application"],"comments":[{"owner":{"account_id":19615181,"reputation":732,"user_id":15394019,"display_name":"mindoverflow"},"score":0,"creation_date":1672874283,"post_id":75005865,"comment_id":132374204,"body_markdown":"this is just a thought, but shouldn&#39;t you be inserting ```&amp;#35;``` or ```%A3```?","body":"this is just a thought, but shouldn&#39;t you be inserting <code>&amp;#35;</code> or <code>%A3</code>?"},{"owner":{"account_id":5641924,"reputation":2259,"user_id":4465464,"accept_rate":59,"display_name":"chocolate cake"},"score":0,"creation_date":1672907778,"post_id":75005865,"comment_id":132379947,"body_markdown":"Good thought, but unfortunately it doesn&#39;t work. `%23` either.","body":"Good thought, but unfortunately it doesn&#39;t work. <code>%23</code> either."},{"owner":{"account_id":19615181,"reputation":732,"user_id":15394019,"display_name":"mindoverflow"},"score":0,"creation_date":1672946888,"post_id":75005865,"comment_id":132393536,"body_markdown":"strange. can we try how this would behave on desktop chromium. if all else fails we could just make changes and update webview address bar component via native for these cases. webview has given me much trouble if i didn&#39;t extend it and added the javascriptweb interface","body":"strange. can we try how this would behave on desktop chromium. if all else fails we could just make changes and update webview address bar component via native for these cases. webview has given me much trouble if i didn&#39;t extend it and added the javascriptweb interface"},{"owner":{"account_id":5641924,"reputation":2259,"user_id":4465464,"accept_rate":59,"display_name":"chocolate cake"},"score":0,"creation_date":1672992240,"post_id":75005865,"comment_id":132401996,"body_markdown":"In desktop chrome it reloads after I entered the address the second time in the address bar. Maybe I should call `loadUrl` again after it finished loading? &#129300;\nFor now I made a workaround by adding an unnecessary get parameter to force rendering (`self.myWebView.loadUrl(&quot;https://www.myCoolName.de/index.html?foo=myRandomHashValue#myValue&quot;`), but this could not be the real flow. It would be also great if the page does not reload, just rerender. But I&#39;m not sure if this is possible at all.","body":"In desktop chrome it reloads after I entered the address the second time in the address bar. Maybe I should call <code>loadUrl</code> again after it finished loading? 🤔 For now I made a workaround by adding an unnecessary get parameter to force rendering (<code>self.myWebView.loadUrl(&quot;https:&#47;&#47;www.myCoolName.de&#47;index.htm&zwnj;&#8203;l?foo=myRandomHashVa&zwnj;&#8203;lue#myValue&quot;</code>), but this could not be the real flow. It would be also great if the page does not reload, just rerender. But I&#39;m not sure if this is possible at all."},{"owner":{"account_id":19615181,"reputation":732,"user_id":15394019,"display_name":"mindoverflow"},"score":0,"creation_date":1673056040,"post_id":75005865,"comment_id":132418780,"body_markdown":"het, if all else fails, just pass url to","body":"het, if all else fails, just pass url to"},{"owner":{"account_id":19615181,"reputation":732,"user_id":15394019,"display_name":"mindoverflow"},"score":0,"creation_date":1673056067,"post_id":75005865,"comment_id":132418784,"body_markdown":"a defined JS function to handle hash navs","body":"a defined JS function to handle hash navs"},{"owner":{"account_id":19615181,"reputation":732,"user_id":15394019,"display_name":"mindoverflow"},"score":1,"creation_date":1673056130,"post_id":75005865,"comment_id":132418795,"body_markdown":"for pages not yours inject the nav function on the after-page-finishes loading function that WebView has","body":"for pages not yours inject the nav function on the after-page-finishes loading function that WebView has"},{"owner":{"account_id":5641924,"reputation":2259,"user_id":4465464,"accept_rate":59,"display_name":"chocolate cake"},"score":0,"creation_date":1673254680,"post_id":75005865,"comment_id":132448590,"body_markdown":"Thanks for the hint :) The page is not mine, but I could try this.","body":"Thanks for the hint :) The page is not mine, but I could try this."}],"owner":{"account_id":5641924,"reputation":2259,"user_id":4465464,"accept_rate":59,"display_name":"chocolate cake"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":89,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672837397,"creation_date":1672837397,"question_id":75005865,"body_markdown":"I want to update the url hash parameter of a Webview. It reloads the url, if the base url changes, but not if the hash does.\r\n\r\n\r\n    import android.webkit.WebView;\r\n\r\n    public class MyClass {\r\n \r\n        private WebView myWebView;\r\n    \r\n        public void start() {\r\n            getActivity().runOnUiThread(() -&gt; {\r\n                this.assistantWebView.loadUrl(&quot;https://www.myCoolName.de/index.html&quot;);\r\n            }\r\n    \r\n            MyClass self = this;\r\n\r\n            new android.os.Handler(Looper.getMainLooper()).postDelayed(\r\n                new Runnable() {\r\n                    public void run() {\r\n                        getActivity().runOnUiThread(() -&gt; {\r\n                             self.myWebView.loadUrl(&quot;https://www.myCoolName.de/index.html#myValue&quot;);\r\n                        });\r\n                    }\r\n                }, 8000);\r\n         }\r\n    }\r\n\r\nAfter 8 seconds the page flickers shortly, but it did not change anything. \r\n\r\nHow do I update a page with hashtags?","title":"Upate hash parameter in Android WebView","body":"<p>I want to update the url hash parameter of a Webview. It reloads the url, if the base url changes, but not if the hash does.</p>\n<pre><code>import android.webkit.WebView;\n\npublic class MyClass {\n\n    private WebView myWebView;\n\n    public void start() {\n        getActivity().runOnUiThread(() -&gt; {\n            this.assistantWebView.loadUrl(&quot;https://www.myCoolName.de/index.html&quot;);\n        }\n\n        MyClass self = this;\n\n        new android.os.Handler(Looper.getMainLooper()).postDelayed(\n            new Runnable() {\n                public void run() {\n                    getActivity().runOnUiThread(() -&gt; {\n                         self.myWebView.loadUrl(&quot;https://www.myCoolName.de/index.html#myValue&quot;);\n                    });\n                }\n            }, 8000);\n     }\n}\n</code></pre>\n<p>After 8 seconds the page flickers shortly, but it did not change anything.</p>\n<p>How do I update a page with hashtags?</p>\n"},{"tags":["java","postgresql","hibernate","criteria","entitymanager"],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1586875686,"creation_date":1586874804,"answer_id":61210211,"question_id":61202241,"body_markdown":"The JSON is valid.  (I checked, and I was surprised to see that a key can be any JSON string.  See http://www.json.org. )\r\n\r\nBased on the stacktrace, I think that the real problem is that Jackson is attempting to use \r\n\r\n      { &quot;In last 7 days&quot; : 19 }\r\n\r\nto create a `MyClass` instance.  The problem is that `MyClass` has no field that corresponds to the key `&quot;In last 7 days&quot;`.  The fields are `days` and `value`.\r\n\r\nYou will have to deal with that by creating a custom object mapper.\r\n","title":"java.lang.IllegalArgumentException: The given string value: { &quot;In last 7 days&quot; : 19 } cannot be transformed to Json object","body":"<p>The JSON is valid.  (I checked, and I was surprised to see that a key can be any JSON string.  See <a href=\"http://www.json.org\" rel=\"nofollow noreferrer\">http://www.json.org</a>. )</p>\n\n<p>Based on the stacktrace, I think that the real problem is that Jackson is attempting to use </p>\n\n<pre><code>  { \"In last 7 days\" : 19 }\n</code></pre>\n\n<p>to create a <code>MyClass</code> instance.  The problem is that <code>MyClass</code> has no field that corresponds to the key <code>\"In last 7 days\"</code>.  The fields are <code>days</code> and <code>value</code>.</p>\n\n<p>You will have to deal with that by creating a custom object mapper.</p>\n"},{"tags":[],"owner":{"account_id":10383927,"reputation":1,"user_id":7657717,"display_name":"Saurabh kr. Gupta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1641208704,"creation_date":1641208704,"answer_id":70564980,"question_id":61202241,"body_markdown":"Just Make sure to implement Serializable for the MyDTO class as you are using the MyClass inside it. It ","title":"java.lang.IllegalArgumentException: The given string value: { &quot;In last 7 days&quot; : 19 } cannot be transformed to Json object","body":"<p>Just Make sure to implement Serializable for the MyDTO class as you are using the MyClass inside it. It</p>\n"},{"tags":[],"owner":{"account_id":1202593,"reputation":9569,"user_id":1173495,"accept_rate":46,"display_name":"SANN3"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645004006,"creation_date":1645004006,"answer_id":71139283,"question_id":61202241,"body_markdown":"The issue is no field that maps to the key &quot;In last 7 days&quot;. We can use cusmtom mapper if we wan to skip some fields\r\n\r\nhttps://vladmihalcea.com/hibernate-types-customize-jackson-objectmapper/","title":"java.lang.IllegalArgumentException: The given string value: { &quot;In last 7 days&quot; : 19 } cannot be transformed to Json object","body":"<p>The issue is no field that maps to the key &quot;In last 7 days&quot;. We can use cusmtom mapper if we wan to skip some fields</p>\n<p><a href=\"https://vladmihalcea.com/hibernate-types-customize-jackson-objectmapper/\" rel=\"nofollow noreferrer\">https://vladmihalcea.com/hibernate-types-customize-jackson-objectmapper/</a></p>\n"}],"owner":{"account_id":1356398,"reputation":318,"user_id":1294707,"accept_rate":71,"display_name":"Prashant Kumar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15024,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1672837310,"creation_date":1586847551,"question_id":61202241,"body_markdown":"Hi I have a json field in my postgresql table and I am using criteria api to read it&#39;s value but I am getting above error message. I have followed the steps mentioned in https://vladmihalcea.com/map-string-jpa-property-json-column-hibernate/\r\n\r\nMy code - \r\n\r\npojo\r\n```\r\n@Entity\r\n@Table(name = &quot;table_name&quot;, schema = &quot;test&quot;)\r\n@TypeDef(\r\n        name = &quot;jsonb&quot;,\r\n        typeClass = JsonBinaryType.class\r\n)\r\npublic class Test implements Serializable {\r\n    @Type(type = &quot;jsonb&quot;)\r\n    @Column(name = &quot;details&quot;, columnDefinition = &quot;jsonb&quot;)\r\n    MyClass myclass;\r\n\r\n} \r\n```\r\n\r\n\r\n\r\nMyClass: \r\n\r\n```\r\npublic class MyClass implements Serializable {\r\n    private String days;\r\n    private String value;\r\n\r\n    public String getDays() {\r\n        return days;\r\n    }\r\n\r\n    public void setDays(String days) {\r\n        this.days = days;\r\n    }\r\n\r\n    public String getValue() {\r\n        return value;\r\n    }\r\n\r\n    public void setValue(String value) {\r\n        this.value = value;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &#39;{&#39; + &#39;&quot;&#39; + days + &#39;&quot;&#39; + &#39;:&#39; + value + &#39;}&#39;;\r\n    }\r\n}\r\n```\r\n\r\nMyDTO - \r\n\r\n```\r\npublic class MyDTO {\r\n    @JsonProperty(&quot;details&quot;)\r\n    MyClass myClass;\r\n\r\n}\r\n \r\n```\r\n\r\n\r\ncriteria API : \r\n\r\n```\r\nCriteriaBuilder criteriaBuilder = entityManager.getCriteriaBuilder();\r\nCriteriaQuery&lt;Object[]&gt; criteriaQuery = criteriaBuilder.createQuery(Object[].class);\r\nRoot&lt;Test&gt; test = criteriaQuery.from(Test.class);\r\ncriteriaQuery.where(criteriaBuilder.equal(criteriaBuilder.lower(test.get(&quot;test_id&quot;)), testId.toLowerCase()));\r\ncriteriaQuery.select(test.get(&quot;myclass&quot;));\r\nList&lt;Object[]&gt; result = entityManager.createQuery(criteriaQuery).getResultList();\r\n\r\n```\r\n\r\nerror stacktrace: \r\n\r\n```\r\nSevere Error: \r\njava.lang.IllegalArgumentException: The given string value: { &quot;In last 7 days&quot; : 19 } cannot be transformed to Json object\r\n\tat com.vladmihalcea.hibernate.type.json.internal.JacksonUtil.fromString(JacksonUtil.java:20)\r\n\tat com.vladmihalcea.hibernate.type.json.internal.JsonTypeDescriptor.fromString(JsonTypeDescriptor.java:52)\r\n\tat com.vladmihalcea.hibernate.type.json.internal.JsonTypeDescriptor.wrap(JsonTypeDescriptor.java:75)\r\n\tat com.vladmihalcea.hibernate.type.json.internal.AbstractJsonSqlTypeDescriptor$1.doExtract(AbstractJsonSqlTypeDescriptor.java:34)\r\n\tat org.hibernate.type.descriptor.sql.BasicExtractor.extract(BasicExtractor.java:47)\r\n\tat org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:257)\r\n\tat org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:253)\r\n\tat org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:243)\r\n\tat org.hibernate.loader.hql.QueryLoader.getResultRow(QueryLoader.java:457)\r\n\tat org.hibernate.loader.hql.QueryLoader.getResultColumnOrRow(QueryLoader.java:440)\r\n\tat org.hibernate.loader.Loader.getRowFromResultSet(Loader.java:775)\r\n\tat org.hibernate.loader.Loader.processResultSet(Loader.java:1008)\r\n\tat org.hibernate.loader.Loader.doQuery(Loader.java:964)\r\n\tat org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:354)\r\n\tat org.hibernate.loader.Loader.doList(Loader.java:2838)\r\n\tat org.hibernate.loader.Loader.doList(Loader.java:2820)\r\n\tat org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2652)\r\n\tat org.hibernate.loader.Loader.list(Loader.java:2647)\r\n\tat org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:506)\r\n\tat org.hibernate.hql.internal.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:396)\r\n\tat org.hibernate.engine.query.spi.HQLQueryPlan.performList(HQLQueryPlan.java:219)\r\n\tat org.hibernate.internal.SessionImpl.list(SessionImpl.java:1404)\r\n\tat org.hibernate.query.internal.AbstractProducedQuery.doList(AbstractProducedQuery.java:1562)\r\n\tat org.hibernate.query.internal.AbstractProducedQuery.list(AbstractProducedQuery.java:1530)\r\n\tat org.hibernate.query.Query.getResultList(Query.java:165)\r\n\tat org.hibernate.query.criteria.internal.compile.CriteriaQueryTypeQueryAdapter.getResultList(CriteriaQueryTypeQueryAdapter.java:76)\r\n\tat com.test.getTestDetail(ServiceV2.java:108)\r\n\tat com.test.ControllerV2.fetchDetail(ControllerV2.java:77)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:189)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1005)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:897)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:668)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:882)\r\n\tat org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:71)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:770)\r\n\tat org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)\r\n\tat org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)\r\n\tat org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:182)\r\n\tat com.test.ControllerV2Test.testDetails(ControllerV2Test.java:153)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\r\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\r\n\tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\r\n\tat org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)\r\n\tat org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)\r\n\tat org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)\r\n\tat org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)\r\n\tat org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)\r\n\tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\r\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)\r\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)\r\n\tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\r\n\tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\r\n\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\r\n\tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\r\n\tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\r\n\tat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)\r\n\tat org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)\r\n\tat org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)\r\n\tat org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)\r\n\tat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\r\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)\r\n\tat org.junit.runner.JUnitCore.run(JUnitCore.java:137)\r\n\tat com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)\r\n\tat com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47)\r\n\tat com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)\r\n\tat com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)\r\n`","title":"java.lang.IllegalArgumentException: The given string value: { &quot;In last 7 days&quot; : 19 } cannot be transformed to Json object","body":"<p>Hi I have a json field in my postgresql table and I am using criteria api to read it's value but I am getting above error message. I have followed the steps mentioned in <a href=\"https://vladmihalcea.com/map-string-jpa-property-json-column-hibernate/\" rel=\"nofollow noreferrer\">https://vladmihalcea.com/map-string-jpa-property-json-column-hibernate/</a></p>\n\n<p>My code - </p>\n\n<p>pojo</p>\n\n<pre><code>@Entity\n@Table(name = \"table_name\", schema = \"test\")\n@TypeDef(\n        name = \"jsonb\",\n        typeClass = JsonBinaryType.class\n)\npublic class Test implements Serializable {\n    @Type(type = \"jsonb\")\n    @Column(name = \"details\", columnDefinition = \"jsonb\")\n    MyClass myclass;\n\n} \n</code></pre>\n\n<p>MyClass: </p>\n\n<pre><code>public class MyClass implements Serializable {\n    private String days;\n    private String value;\n\n    public String getDays() {\n        return days;\n    }\n\n    public void setDays(String days) {\n        this.days = days;\n    }\n\n    public String getValue() {\n        return value;\n    }\n\n    public void setValue(String value) {\n        this.value = value;\n    }\n\n    @Override\n    public String toString() {\n        return '{' + '\"' + days + '\"' + ':' + value + '}';\n    }\n}\n</code></pre>\n\n<p>MyDTO - </p>\n\n<pre><code>public class MyDTO {\n    @JsonProperty(\"details\")\n    MyClass myClass;\n\n}\n\n</code></pre>\n\n<p>criteria API : </p>\n\n<pre><code>CriteriaBuilder criteriaBuilder = entityManager.getCriteriaBuilder();\nCriteriaQuery&lt;Object[]&gt; criteriaQuery = criteriaBuilder.createQuery(Object[].class);\nRoot&lt;Test&gt; test = criteriaQuery.from(Test.class);\ncriteriaQuery.where(criteriaBuilder.equal(criteriaBuilder.lower(test.get(\"test_id\")), testId.toLowerCase()));\ncriteriaQuery.select(test.get(\"myclass\"));\nList&lt;Object[]&gt; result = entityManager.createQuery(criteriaQuery).getResultList();\n\n</code></pre>\n\n<p>error stacktrace: </p>\n\n<pre><code>Severe Error: \njava.lang.IllegalArgumentException: The given string value: { \"In last 7 days\" : 19 } cannot be transformed to Json object\n    at com.vladmihalcea.hibernate.type.json.internal.JacksonUtil.fromString(JacksonUtil.java:20)\n    at com.vladmihalcea.hibernate.type.json.internal.JsonTypeDescriptor.fromString(JsonTypeDescriptor.java:52)\n    at com.vladmihalcea.hibernate.type.json.internal.JsonTypeDescriptor.wrap(JsonTypeDescriptor.java:75)\n    at com.vladmihalcea.hibernate.type.json.internal.AbstractJsonSqlTypeDescriptor$1.doExtract(AbstractJsonSqlTypeDescriptor.java:34)\n    at org.hibernate.type.descriptor.sql.BasicExtractor.extract(BasicExtractor.java:47)\n    at org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:257)\n    at org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:253)\n    at org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:243)\n    at org.hibernate.loader.hql.QueryLoader.getResultRow(QueryLoader.java:457)\n    at org.hibernate.loader.hql.QueryLoader.getResultColumnOrRow(QueryLoader.java:440)\n    at org.hibernate.loader.Loader.getRowFromResultSet(Loader.java:775)\n    at org.hibernate.loader.Loader.processResultSet(Loader.java:1008)\n    at org.hibernate.loader.Loader.doQuery(Loader.java:964)\n    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:354)\n    at org.hibernate.loader.Loader.doList(Loader.java:2838)\n    at org.hibernate.loader.Loader.doList(Loader.java:2820)\n    at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2652)\n    at org.hibernate.loader.Loader.list(Loader.java:2647)\n    at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:506)\n    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:396)\n    at org.hibernate.engine.query.spi.HQLQueryPlan.performList(HQLQueryPlan.java:219)\n    at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1404)\n    at org.hibernate.query.internal.AbstractProducedQuery.doList(AbstractProducedQuery.java:1562)\n    at org.hibernate.query.internal.AbstractProducedQuery.list(AbstractProducedQuery.java:1530)\n    at org.hibernate.query.Query.getResultList(Query.java:165)\n    at org.hibernate.query.criteria.internal.compile.CriteriaQueryTypeQueryAdapter.getResultList(CriteriaQueryTypeQueryAdapter.java:76)\n    at com.test.getTestDetail(ServiceV2.java:108)\n    at com.test.ControllerV2.fetchDetail(ControllerV2.java:77)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:189)\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138)\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800)\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1005)\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:897)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:668)\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:882)\n    at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:71)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)\n    at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)\n    at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)\n    at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:182)\n    at com.test.ControllerV2Test.testDetails(ControllerV2Test.java:153)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\n    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\n    at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)\n    at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)\n    at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)\n    at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)\n    at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\n    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)\n    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)\n    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)\n    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:363)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)\n    at org.junit.runner.JUnitCore.run(JUnitCore.java:137)\n    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)\n    at com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47)\n    at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)\n    at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)\n`\n</code></pre>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":2843847,"reputation":55833,"user_id":2442804,"accept_rate":80,"display_name":"luk2302"},"score":0,"creation_date":1672837245,"post_id":75005807,"comment_id":132362020,"body_markdown":"*&quot;is it looping back to the lower limit?&quot;* - yes.","body":"<i>&quot;is it looping back to the lower limit?&quot;</i> - yes."},{"owner":{"account_id":19987292,"reputation":424,"user_id":14649181,"display_name":"Oskar"},"score":0,"creation_date":1672837398,"post_id":75005807,"comment_id":132362079,"body_markdown":"https://www.baeldung.com/java-arrays-max-size","body":"<a href=\"https://www.baeldung.com/java-arrays-max-size\" rel=\"nofollow noreferrer\">baeldung.com/java-arrays-max-size</a>"},{"owner":{"account_id":124787,"reputation":9383,"user_id":320111,"display_name":"Stephan Branczyk"},"score":1,"creation_date":1672837510,"post_id":75005807,"comment_id":132362124,"body_markdown":"Why do you need an array that huge? I think you&#39;re confusing the size of the array with the size of each int stored in each cell of the array. They&#39;re not the same.","body":"Why do you need an array that huge? I think you&#39;re confusing the size of the array with the size of each int stored in each cell of the array. They&#39;re not the same."},{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":1,"creation_date":1672837535,"post_id":75005807,"comment_id":132362132,"body_markdown":"No. [JLS-10.4 Array Access](https://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html#jls-10.4) says (in part) *Arrays must be indexed by int values; short, byte, or char values may also be used as index values because they are subjected to unary numeric promotion (&#167;5.6.1) and become int values. An attempt to access an array component with a long index value results in a compile-time error. All array accesses are checked at run time; an attempt to use an index that is less than zero or greater than or equal to the length of the array causes an ArrayIndexOutOfBoundsException to be thrown.*","body":"No. <a href=\"https://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html#jls-10.4\" rel=\"nofollow noreferrer\">JLS-10.4 Array Access</a> says (in part) <i>Arrays must be indexed by int values; short, byte, or char values may also be used as index values because they are subjected to unary numeric promotion (&#167;5.6.1) and become int values. An attempt to access an array component with a long index value results in a compile-time error. All array accesses are checked at run time; an attempt to use an index that is less than zero or greater than or equal to the length of the array causes an ArrayIndexOutOfBoundsException to be thrown.</i>"}],"owner":{"account_id":21663167,"reputation":1,"user_id":15982016,"display_name":"Aditya Sharma"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1672837229,"answer_count":0,"score":0,"last_activity_date":1672837261,"creation_date":1672837138,"question_id":75005807,"body_markdown":"I was trying to create a int[] type array in Java with a user input based length. Below is the code for the same :\r\n```\r\nint[] change = new int[max+1];\r\n```\r\nWhen the value of max = 2147483647, the compiler shows the below error code : \r\ntype here\r\n```\r\njava.lang.NegativeArraySizeException: -2147483648\r\n```\r\n\r\nI know that the upper limit for int in Java is -2147483648 to 2147483647 (-2&lt;sup&gt;31&lt;/sup&gt; to 2&lt;sup&gt;31&lt;/sup&gt;-1), but why is the size of array going negative with a addition (is it looping back to the lower limit?).\r\nThe problem remains the same with long[] type array. So, does Java not support array size above 2&lt;sup&gt;31&lt;/sup&gt;-1 ?","title":"Does Java support array size more than 2^31 -1?","body":"<p>I was trying to create a int[] type array in Java with a user input based length. Below is the code for the same :</p>\n<pre><code>int[] change = new int[max+1];\n</code></pre>\n<p>When the value of max = 2147483647, the compiler shows the below error code :\ntype here</p>\n<pre><code>java.lang.NegativeArraySizeException: -2147483648\n</code></pre>\n<p>I know that the upper limit for int in Java is -2147483648 to 2147483647 (-2<sup>31</sup> to 2<sup>31</sup>-1), but why is the size of array going negative with a addition (is it looping back to the lower limit?).\nThe problem remains the same with long[] type array. So, does Java not support array size above 2<sup>31</sup>-1 ?</p>\n"},{"tags":["javascript","java","node.js","arrays","byte"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1626097587,"post_id":68348429,"comment_id":120794831,"body_markdown":"Does this answer your question? [How to read a local text file?](https://stackoverflow.com/questions/14446447/how-to-read-a-local-text-file)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/14446447/how-to-read-a-local-text-file\">How to read a local text file?</a>"},{"owner":{"account_id":4541793,"reputation":26875,"user_id":3689450,"display_name":"VLAZ"},"score":1,"creation_date":1626097668,"post_id":68348429,"comment_id":120794868,"body_markdown":"@f1sh I don&#39;t see how it applies here. OP seems to want to read it from the disk, not as a web request to the local machine. And wants a byte array.","body":"@f1sh I don&#39;t see how it applies here. OP seems to want to read it from the disk, not as a web request to the local machine. And wants a byte array."},{"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"score":1,"creation_date":1626097806,"post_id":68348429,"comment_id":120794932,"body_markdown":"Have you tried: `[...myFileAsBuffer.values()]`? See: [`buf.values()`](https://nodejs.org/api/buffer.html#buffer_buf_values)","body":"Have you tried: <code>[...myFileAsBuffer.values()]</code>? See: <a href=\"https://nodejs.org/api/buffer.html#buffer_buf_values\" rel=\"nofollow noreferrer\"><code>buf.values()</code></a>"},{"owner":{"account_id":11377471,"reputation":586,"user_id":8341298,"accept_rate":50,"display_name":"schande"},"score":1,"creation_date":1626100746,"post_id":68348429,"comment_id":120796353,"body_markdown":"I did not know, that you could use the spread syntax like this. Thanks for your help!","body":"I did not know, that you could use the spread syntax like this. Thanks for your help!"}],"answers":[{"tags":[],"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1626118461,"creation_date":1626098030,"answer_id":68348583,"question_id":68348429,"body_markdown":"You should spread the iterable `values()` of the `Buffer` before calling `sendData`:\r\n\r\n```js\r\nsendData([...myFileAsBuffer.values()])\r\n```\r\n\r\nSee: [`buf.values()`](https://nodejs.org/api/buffer.html#buffer_buf_values)\r\n\r\n---\r\n\r\nHere is an equivalent example to Java:\r\n\r\n```js\r\nimport fs from &#39;fs&#39;;\r\n\r\nclass Files {\r\n  static readAllBytes(path) {\r\n    return [...fs.readFileSync(path, { flag: &#39;r&#39; }).values()];\r\n  }\r\n}\r\n\r\nsendData(Files.readAllBytes(&#39;/path/to/my.pdf&#39;));\r\n```\r\n\r\nNote that the `path` for the `fs.readFileSync` function can take [various types](https://nodejs.org/api/fs.html#fs_fs_readfilesync_path_options) i.e. `string`, `Buffer`, `URL`, or `integer`. The `static` function in the example above is assuming that your `path` is one of those four types.","title":"What is the Javascript equivalent of Java&#39;s Files.readAllBytes()?","body":"<p>You should spread the iterable <code>values()</code> of the <code>Buffer</code> before calling <code>sendData</code>:</p>\n<pre class=\"lang-js prettyprint-override\"><code>sendData([...myFileAsBuffer.values()])\n</code></pre>\n<p>See: <a href=\"https://nodejs.org/api/buffer.html#buffer_buf_values\" rel=\"nofollow noreferrer\"><code>buf.values()</code></a></p>\n<hr />\n<p>Here is an equivalent example to Java:</p>\n<pre class=\"lang-js prettyprint-override\"><code>import fs from 'fs';\n\nclass Files {\n  static readAllBytes(path) {\n    return [...fs.readFileSync(path, { flag: 'r' }).values()];\n  }\n}\n\nsendData(Files.readAllBytes('/path/to/my.pdf'));\n</code></pre>\n<p>Note that the <code>path</code> for the <code>fs.readFileSync</code> function can take <a href=\"https://nodejs.org/api/fs.html#fs_fs_readfilesync_path_options\" rel=\"nofollow noreferrer\">various types</a> i.e. <code>string</code>, <code>Buffer</code>, <code>URL</code>, or <code>integer</code>. The <code>static</code> function in the example above is assuming that your <code>path</code> is one of those four types.</p>\n"},{"tags":[],"owner":{"account_id":2056278,"reputation":23340,"user_id":1833961,"accept_rate":54,"display_name":"bvdb"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672837216,"creation_date":1672837216,"answer_id":75005828,"question_id":68348429,"body_markdown":"Just one important note to the other answer given:\r\n\r\nIn Node.js you should stay away from functions like `readFileSync`. As you know Node.js is single-threaded. And the moment you call a function like `readFileSync` you&#39;re locking up your entire application until the data is loaded from disk. *(like a short cardiac arrest)*\r\n\r\nSo, the better solution is to use `readFile` which can be used with a callback function or promise.\r\n\r\nThe only few times when `readFileSync` is acceptable, is when the application is still initializing, e.g. to load settings. For that reason, if you&#39;re making a client/server application, I would definitely stay away from `readFileSync`.\r\n\r\n    import { readFile } from &#39;node:fs/promises&#39;;\r\n    \r\n    // use in an async function:  \r\n    const contents = await readFile(filePath);","title":"What is the Javascript equivalent of Java&#39;s Files.readAllBytes()?","body":"<p>Just one important note to the other answer given:</p>\n<p>In Node.js you should stay away from functions like <code>readFileSync</code>. As you know Node.js is single-threaded. And the moment you call a function like <code>readFileSync</code> you're locking up your entire application until the data is loaded from disk. <em>(like a short cardiac arrest)</em></p>\n<p>So, the better solution is to use <code>readFile</code> which can be used with a callback function or promise.</p>\n<p>The only few times when <code>readFileSync</code> is acceptable, is when the application is still initializing, e.g. to load settings. For that reason, if you're making a client/server application, I would definitely stay away from <code>readFileSync</code>.</p>\n<pre><code>import { readFile } from 'node:fs/promises';\n\n// use in an async function:  \nconst contents = await readFile(filePath);\n</code></pre>\n"}],"owner":{"account_id":11377471,"reputation":586,"user_id":8341298,"accept_rate":50,"display_name":"schande"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":980,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":68348583,"answer_count":2,"score":0,"last_activity_date":1672837216,"creation_date":1626097420,"question_id":68348429,"body_markdown":"I need to use javascript on my server application. I have a variable holding a path to a PDF.\r\n\r\nNow I want to read that file as a byte array to send it to another server. In Java, I would do something like this:\r\n\r\n    String myPath = &quot;\\path\\to\\my.pdf&quot;;\r\n\r\n    try {\r\n      byte [] myFile = Files.readAllBytes(Paths.get(myPath));\r\n\r\n      //Own function\r\n      sendData(myFile);\r\n    } catch (IO Exception e) {\r\n      e.printStackTrace();\r\n    } \r\n\r\nI don&#39;t know what the javascript equivalent would be to this. With the fs library I can only read a file as an object of type &#39;Buffer&#39;:\r\n\r\n    import fs from &#39;fs&#39;;\r\n    let myPath = &#39;\\path\\to\\my.pdf&#39;;\r\n    let myFileAsBuffer = fs.readFileSync(myPath, { flag: &#39;r&#39; });\r\n    //Own function\r\n    sendData(myFileAsBuffer);\r\n\r\nBut I always get an error because the server expects a byte array and not a Buffer, which looks something like this:\r\n\r\n    &lt;Buffer 25 50 44 46 2d 31 2e 35 0d 0a 25 b5 b5 b5 b5 0d 0a 31 20 30 20 6f 62 6a 0d 0a 3c 3c 2f 54 79 70 ...&gt;","title":"What is the Javascript equivalent of Java&#39;s Files.readAllBytes()?","body":"<p>I need to use javascript on my server application. I have a variable holding a path to a PDF.</p>\n<p>Now I want to read that file as a byte array to send it to another server. In Java, I would do something like this:</p>\n<pre><code>String myPath = &quot;\\path\\to\\my.pdf&quot;;\n\ntry {\n  byte [] myFile = Files.readAllBytes(Paths.get(myPath));\n\n  //Own function\n  sendData(myFile);\n} catch (IO Exception e) {\n  e.printStackTrace();\n} \n</code></pre>\n<p>I don't know what the javascript equivalent would be to this. With the fs library I can only read a file as an object of type 'Buffer':</p>\n<pre><code>import fs from 'fs';\nlet myPath = '\\path\\to\\my.pdf';\nlet myFileAsBuffer = fs.readFileSync(myPath, { flag: 'r' });\n//Own function\nsendData(myFileAsBuffer);\n</code></pre>\n<p>But I always get an error because the server expects a byte array and not a Buffer, which looks something like this:</p>\n<pre><code>&lt;Buffer 25 50 44 46 2d 31 2e 35 0d 0a 25 b5 b5 b5 b5 0d 0a 31 20 30 20 6f 62 6a 0d 0a 3c 3c 2f 54 79 70 ...&gt;\n</code></pre>\n"},{"tags":["java","postgresql","spring-boot","api","timestamp"],"comments":[{"owner":{"account_id":19987292,"reputation":424,"user_id":14649181,"display_name":"Oskar"},"score":0,"creation_date":1672837223,"post_id":75005742,"comment_id":132362012,"body_markdown":"You actualy pasted empty repository, getMaxId method and timestamp field from entity. How we can know what did you save and what do you have in db?","body":"You actualy pasted empty repository, getMaxId method and timestamp field from entity. How we can know what did you save and what do you have in db?"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1672874383,"post_id":75005742,"comment_id":132374223,"body_markdown":"I recommend you don’t use the old `Timestamp` class since it is poorly designed, a true hack. Best if you can use `timestamp with time zone` in the database for a timestamp and for instance `OffsetDateTime` in Java (`Instant` may or may not work).  If you insist on `timestamp without time zone`, then use `LocalDateTime` in Java. The mentioned Java c&#230;asses are from java.ime, the modern Java date and time API and are supported by Hibernate at least since version 5.0.","body":"I recommend you don’t use the old <code>Timestamp</code> class since it is poorly designed, a true hack. Best if you can use <code>timestamp with time zone</code> in the database for a timestamp and for instance <code>OffsetDateTime</code> in Java (<code>Instant</code> may or may not work).  If you insist on <code>timestamp without time zone</code>, then use <code>LocalDateTime</code> in Java. The mentioned Java c&#230;asses are from java.ime, the modern Java date and time API and are supported by Hibernate at least since version 5.0."}],"owner":{"account_id":26701272,"reputation":11,"user_id":20308284,"display_name":"Daniel Haring"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":254,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1672836855,"creation_date":1672836855,"question_id":75005742,"body_markdown":"I have the following Spring Boot Apllication to fetch data from a postgresql database. In this database there is a column with the datatype &quot;Timestamp Without Timezone&quot;.\r\n\r\n**Entity:**\r\n```\r\nprivate Timestamp timestamp;\r\n```\r\n**Controller:**\r\n```\r\n@GetMapping(&quot;url&quot;)\r\n    public ResponseEntity&lt;Messwerte&gt; getMaxId(){\r\n      return new ResponseEntity&lt;&gt;(this.messwertRepository.getMaxID(), HttpStatus.OK);\r\n    } \r\n```\r\n**Repository:**\r\n```\r\n@Repository\r\npublic interface MesswertRepository extends JpaRepository&lt;Messwerte, Long&gt; {}\r\n```\r\n\r\n\r\nWhen I start the apllication it retturns the following timestamp: **&quot;timestamp&quot;:&quot;1970-01-01T12:03:29.689+00:00&quot;**\r\n\r\n","title":"How to handle a timestamp-column with spring boot?","body":"<p>I have the following Spring Boot Apllication to fetch data from a postgresql database. In this database there is a column with the datatype &quot;Timestamp Without Timezone&quot;.</p>\n<p><strong>Entity:</strong></p>\n<pre><code>private Timestamp timestamp;\n</code></pre>\n<p><strong>Controller:</strong></p>\n<pre><code>@GetMapping(&quot;url&quot;)\n    public ResponseEntity&lt;Messwerte&gt; getMaxId(){\n      return new ResponseEntity&lt;&gt;(this.messwertRepository.getMaxID(), HttpStatus.OK);\n    } \n</code></pre>\n<p><strong>Repository:</strong></p>\n<pre><code>@Repository\npublic interface MesswertRepository extends JpaRepository&lt;Messwerte, Long&gt; {}\n</code></pre>\n<p>When I start the apllication it retturns the following timestamp: <strong>&quot;timestamp&quot;:&quot;1970-01-01T12:03:29.689+00:00&quot;</strong></p>\n"},{"tags":["java","recursion","multidimensional-array"],"owner":{"account_id":26767590,"reputation":11,"user_id":20926237,"display_name":"Rami Mamadov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1672836409,"creation_date":1672835808,"question_id":75005546,"body_markdown":"I have a two-dimensional array filled with non-negative numbers.\r\none cell in particular is equal to -1 (for example, the bottom right corner in the array below is -1).\r\n\r\nI have to return the minimum number of steps (starting from arr[0][0] only) to get to the -1.\r\n\r\nThe thing is:\r\nYou can think of every number in the array as a height of a rooftop.\r\n\r\nThe difference between cell values when moving in any direction is either &quot;climbing&quot; or &quot;going down&quot;:\r\n\r\nFor example, moving in any direction from a cell with the value 5, to a cell with the value 3 is considered &quot;going down&quot;, and the difference is 2.\r\n\r\nFor example, moving in any direction from a cell with the value 1, to a cell with the value 2, is considered &quot;climbing&quot;, and the difference is -1.\r\n\r\nIf the difference between cell values while &quot;climbing&quot; is smaller than -1,\r\nand the difference between cell values while &quot; going down&quot; is bigger than 2,\r\nThere are no legal options to move inside the array, and the recursive method will return -1.\r\n\r\nThe only exception is: if the value of the &quot;neighbor&quot; cell from any direction is the -1 we are searching for, we can immediately go there without having to consider the difference between the current cell and the &quot;neighbor&quot; cell.\r\n\r\nIf there is no valid path that starts in arr[0][0] and can find &quot;-1&quot; in the array, the recursive method should return -1. If there is a valid path the recursive method returns the minimum number of steps.\r\n\r\n```\r\n        System.out.println(&quot;[2,  0,  1,  2,  3]&quot;);\r\n        System.out.println(&quot;[2,  3,  5,  5,  4]&quot;);\r\n        System.out.println(&quot;[8,  5, -1,  8,  7]&quot;);\r\n        System.out.println(&quot;[3,  4,  7,  2,  4]&quot;);\r\n        System.out.println(&quot;[2,  4,  3,  1, -1]&quot;);\r\n```\r\n\r\n\r\n\r\n\r\n\r\nI didn&#39;t manage to solve it without running into &quot;out of bounds&quot; errors, and logic errors.\r\nFor example, what shall I do when the difference between any direction while &quot;climbing&quot; or &quot;going down&quot; is the same?\r\n\r\nSo that&#39;s what I have tried:\r\n\r\n\r\n```\r\n public static int prince(int[][]drm, int i, int j){\r\n        return prince(drm, 0,0, 1);\r\n    }\r\n\r\n private static int prince(int[][]drm, int i, int j, int steps)\r\n    {\r\n        if(i&gt; drm.length-1 || j&gt;drm[drm.length-1].length) // out of bounds\r\n        {\r\n            return -1;\r\n        }\r\n        if(drm[i][j] == -1) // is the current cell is &quot;-1&quot;\r\n        {\r\n            return steps;\r\n        }\r\n        if(i&lt; drm.length-1)\r\n        {\r\n            if(drm[i+1][j] == -1) // if the neighbor below the cell is the &quot;-1&quot;\r\n            {\r\n                return steps + 1;\r\n            }\r\n        }\r\n        if(j&lt;drm[drm.length-1].length) // if the right neighbor of the cell is the &quot;-1&quot;\r\n        {\r\n            if(drm[i][j+1] == -1)\r\n            {\r\n                return steps + 1;\r\n            }\r\n        }\r\n        if(i&gt;0) { // if the neighbor above the cell is the &quot;-1&quot;\r\n            if (drm[i - 1][j] == 1) {\r\n                return steps + 1;\r\n            }\r\n        }\r\n        if(j&gt;0) // if the left neighbor of the cell is the &quot;-1&quot;\r\n        {\r\n            if (drm[i][j-1] == 1) {\r\n                return steps + 1;\r\n            }\r\n        }\r\n```\r\n\r\nso checking the neighbors to see if they&#39;re equal to -1 is ok. but I&#39;m not sure how to construct the next part, that actually contains the recursive call.\r\n\r\nI wanted to scan the array horizontally in each row, to the rightmost point, and when it gets there - to make j=0 again, go down a row (if possible) and make the number of steps as same as it would be if we would down initially instead of right.\r\n\r\nSomething amount those lines:\r\n\r\n\r\n```\r\n if(j == drm[drm.length-1].length) // if we got to the end of the row (rightmost column)\r\n        {\r\n            if(i &lt; drm.length-1){ // and we can go down without going out of bounds\r\n                int downDiff = drm[i][j] - drm[i+1][j];\r\n                if(!(downDiff &gt; 2) &amp;&amp; !(downDiff &lt; -1)){ // if the difference when going down is valid\r\n                    i++;\r\n                    j = 0;\r\n                    steps -= drm.length - 2;\r\n                } else{\r\n                    return -1;\r\n                }\r\n            }\r\n        }\r\n        if(j&lt;drm[drm.length-1].length) { // if we didn&#39;t get to the end of the row (not in the rightmost column)\r\n            int rightDiff = drm[i][j] - drm[i][j+1];\r\n            if(rightDiff &gt; 2 || rightDiff &lt; -1) // if right difference is not valid\r\n            {\r\n                return -1;\r\n            }\r\n            return prince(drm, i, j+1, steps+1);\r\n        }\r\n        return -1;\r\n    }\r\n} \r\n```\r\n\r\nso if you have any ideas, or smarter algorithms/approaches to this question I will be more than glad for any comments.\r\n","title":"How do I scan elements of a 2d array under certain conditions, when using recursion in Java?","body":"<p>I have a two-dimensional array filled with non-negative numbers.\none cell in particular is equal to -1 (for example, the bottom right corner in the array below is -1).</p>\n<p>I have to return the minimum number of steps (starting from arr[0][0] only) to get to the -1.</p>\n<p>The thing is:\nYou can think of every number in the array as a height of a rooftop.</p>\n<p>The difference between cell values when moving in any direction is either &quot;climbing&quot; or &quot;going down&quot;:</p>\n<p>For example, moving in any direction from a cell with the value 5, to a cell with the value 3 is considered &quot;going down&quot;, and the difference is 2.</p>\n<p>For example, moving in any direction from a cell with the value 1, to a cell with the value 2, is considered &quot;climbing&quot;, and the difference is -1.</p>\n<p>If the difference between cell values while &quot;climbing&quot; is smaller than -1,\nand the difference between cell values while &quot; going down&quot; is bigger than 2,\nThere are no legal options to move inside the array, and the recursive method will return -1.</p>\n<p>The only exception is: if the value of the &quot;neighbor&quot; cell from any direction is the -1 we are searching for, we can immediately go there without having to consider the difference between the current cell and the &quot;neighbor&quot; cell.</p>\n<p>If there is no valid path that starts in arr[0][0] and can find &quot;-1&quot; in the array, the recursive method should return -1. If there is a valid path the recursive method returns the minimum number of steps.</p>\n<pre><code>        System.out.println(&quot;[2,  0,  1,  2,  3]&quot;);\n        System.out.println(&quot;[2,  3,  5,  5,  4]&quot;);\n        System.out.println(&quot;[8,  5, -1,  8,  7]&quot;);\n        System.out.println(&quot;[3,  4,  7,  2,  4]&quot;);\n        System.out.println(&quot;[2,  4,  3,  1, -1]&quot;);\n</code></pre>\n<p>I didn't manage to solve it without running into &quot;out of bounds&quot; errors, and logic errors.\nFor example, what shall I do when the difference between any direction while &quot;climbing&quot; or &quot;going down&quot; is the same?</p>\n<p>So that's what I have tried:</p>\n<pre><code> public static int prince(int[][]drm, int i, int j){\n        return prince(drm, 0,0, 1);\n    }\n\n private static int prince(int[][]drm, int i, int j, int steps)\n    {\n        if(i&gt; drm.length-1 || j&gt;drm[drm.length-1].length) // out of bounds\n        {\n            return -1;\n        }\n        if(drm[i][j] == -1) // is the current cell is &quot;-1&quot;\n        {\n            return steps;\n        }\n        if(i&lt; drm.length-1)\n        {\n            if(drm[i+1][j] == -1) // if the neighbor below the cell is the &quot;-1&quot;\n            {\n                return steps + 1;\n            }\n        }\n        if(j&lt;drm[drm.length-1].length) // if the right neighbor of the cell is the &quot;-1&quot;\n        {\n            if(drm[i][j+1] == -1)\n            {\n                return steps + 1;\n            }\n        }\n        if(i&gt;0) { // if the neighbor above the cell is the &quot;-1&quot;\n            if (drm[i - 1][j] == 1) {\n                return steps + 1;\n            }\n        }\n        if(j&gt;0) // if the left neighbor of the cell is the &quot;-1&quot;\n        {\n            if (drm[i][j-1] == 1) {\n                return steps + 1;\n            }\n        }\n</code></pre>\n<p>so checking the neighbors to see if they're equal to -1 is ok. but I'm not sure how to construct the next part, that actually contains the recursive call.</p>\n<p>I wanted to scan the array horizontally in each row, to the rightmost point, and when it gets there - to make j=0 again, go down a row (if possible) and make the number of steps as same as it would be if we would down initially instead of right.</p>\n<p>Something amount those lines:</p>\n<pre><code> if(j == drm[drm.length-1].length) // if we got to the end of the row (rightmost column)\n        {\n            if(i &lt; drm.length-1){ // and we can go down without going out of bounds\n                int downDiff = drm[i][j] - drm[i+1][j];\n                if(!(downDiff &gt; 2) &amp;&amp; !(downDiff &lt; -1)){ // if the difference when going down is valid\n                    i++;\n                    j = 0;\n                    steps -= drm.length - 2;\n                } else{\n                    return -1;\n                }\n            }\n        }\n        if(j&lt;drm[drm.length-1].length) { // if we didn't get to the end of the row (not in the rightmost column)\n            int rightDiff = drm[i][j] - drm[i][j+1];\n            if(rightDiff &gt; 2 || rightDiff &lt; -1) // if right difference is not valid\n            {\n                return -1;\n            }\n            return prince(drm, i, j+1, steps+1);\n        }\n        return -1;\n    }\n} \n</code></pre>\n<p>so if you have any ideas, or smarter algorithms/approaches to this question I will be more than glad for any comments.</p>\n"},{"tags":["java","android","google-maps"],"answers":[{"tags":[],"owner":{"account_id":14986983,"reputation":81,"user_id":10819264,"display_name":"Meet Patel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1554964302,"creation_date":1554964302,"answer_id":55626047,"question_id":55625304,"body_markdown":"You can use the function distanceBetween which Computes the approximate distance in meters between two locations, and optionally the initial and final bearings of the shortest path between them.\r\n\r\n    public static boolean checkDistance(LatLng oldPosition, LatLng newPosition) {\r\n            float[] results = new float[1];\r\n            Location.distanceBetween(oldPosition.latitude, oldPosition.longitude,\r\n                    newPosition.latitude, newPosition.longitude, results);\r\n            return results[0] &lt;= 50.0;\r\n        }\r\nHere i set minimum distance 50 meter. these will return true if your current location(latlon) is within 50 miters from your polyline latlon.","title":"Java android google maps change color polyline where I was","body":"<p>You can use the function distanceBetween which Computes the approximate distance in meters between two locations, and optionally the initial and final bearings of the shortest path between them.</p>\n\n<pre><code>public static boolean checkDistance(LatLng oldPosition, LatLng newPosition) {\n        float[] results = new float[1];\n        Location.distanceBetween(oldPosition.latitude, oldPosition.longitude,\n                newPosition.latitude, newPosition.longitude, results);\n        return results[0] &lt;= 50.0;\n    }\n</code></pre>\n\n<p>Here i set minimum distance 50 meter. these will return true if your current location(latlon) is within 50 miters from your polyline latlon.</p>\n"},{"tags":[],"owner":{"account_id":8441805,"reputation":2533,"user_id":6334037,"display_name":"Jitesh Prajapati"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672836103,"creation_date":1554964786,"answer_id":55626154,"question_id":55625304,"body_markdown":"Define color value in `colors.xml`\r\n\r\n**colors.xml**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;resources&gt;\r\n        &lt;color name=&quot;blue&quot;&gt;#0000EE&lt;/color&gt;\r\n    &lt;/resources&gt;\r\n\r\nand set color like this :- \r\n\r\n    Polyline line = mMap.addPolyline(new PolylineOptions()\r\n                    .addAll(list)\r\n                    .color(R.color.blue));\r\n\r\n\r\n**EDIT**\r\n\r\n    mMap.setOnMyLocationChangeListener(new GoogleMap.OnMyLocationChangeListener() {\r\n                @Override\r\n                public void onMyLocationChange(Location location) {\r\n    \r\n                    for (LatLng nLatLng : latLngsList) {\r\n    \r\n                        double latitude = nLatLng.latitude;\r\n                        double longitude = nLatLng.longitude;\r\n                        double myLat = location.getLatitude();\r\n                        double myLong = location.getLongitude();\r\n                        \r\n                        if (latitude == myLat &amp;&amp; longitude == myLong) {\r\n    \r\n    \r\n                            Polyline polyline1 = googleMap.addPolyline(new PolylineOptions()\r\n                                    .add(nLatLng)\r\n                                    .color(R.color.blue));\r\n                        } /*else {\r\n                            Polyline polyline1 = googleMap.addPolyline(new PolylineOptions()\r\n                                    .add(nLatLng)\r\n                                    .color(R.color.black));\r\n                        }*/\r\n                    }\r\n    \r\n    \r\n                }\r\n            });\r\n    \r\nSee also: [update-polyline-according-to-the-user-moving-android-googlemaps][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/17038258/update-polyline-according-to-the-user-moving-android-googlemaps-v2","title":"Java android google maps change color polyline where I was","body":"<p>Define color value in <code>colors.xml</code></p>\n<p><strong>colors.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;resources&gt;\n    &lt;color name=&quot;blue&quot;&gt;#0000EE&lt;/color&gt;\n&lt;/resources&gt;\n</code></pre>\n<p>and set color like this :-</p>\n<pre><code>Polyline line = mMap.addPolyline(new PolylineOptions()\n                .addAll(list)\n                .color(R.color.blue));\n</code></pre>\n<p><strong>EDIT</strong></p>\n<pre><code>mMap.setOnMyLocationChangeListener(new GoogleMap.OnMyLocationChangeListener() {\n            @Override\n            public void onMyLocationChange(Location location) {\n\n                for (LatLng nLatLng : latLngsList) {\n\n                    double latitude = nLatLng.latitude;\n                    double longitude = nLatLng.longitude;\n                    double myLat = location.getLatitude();\n                    double myLong = location.getLongitude();\n                    \n                    if (latitude == myLat &amp;&amp; longitude == myLong) {\n\n\n                        Polyline polyline1 = googleMap.addPolyline(new PolylineOptions()\n                                .add(nLatLng)\n                                .color(R.color.blue));\n                    } /*else {\n                        Polyline polyline1 = googleMap.addPolyline(new PolylineOptions()\n                                .add(nLatLng)\n                                .color(R.color.black));\n                    }*/\n                }\n\n\n            }\n        });\n</code></pre>\n<p>See also: <a href=\"https://stackoverflow.com/questions/17038258/update-polyline-according-to-the-user-moving-android-googlemaps-v2\">update-polyline-according-to-the-user-moving-android-googlemaps</a></p>\n"}],"owner":{"account_id":15706315,"reputation":429,"user_id":11332949,"display_name":"kiki Kala2"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":414,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1672836103,"creation_date":1554960463,"question_id":55625304,"body_markdown":"This is how I draw a polyline :\r\n\r\n     List&lt;LatLng&gt; latLngsList = new ArrayList&lt;&gt;();\r\n                for (LegsItem leg : response.body().getRoutes().get(0).getLegs()) {\r\n                    for (StepsItem step : leg.getSteps()) {\r\n                        List&lt;LatLng&gt; latLngs = PolyUtil.decode(step.getGeometry());\r\n                        step.setLatLngs(latLngs);\r\n                        latLngsList.addAll(latLngs);\r\n                    }\r\n                }\r\n\r\n                Polyline polyline1 = googleMap.addPolyline(new PolylineOptions()\r\n                        .addAll(latLngsList));\r\n\r\n\r\nI draw this on color black but when I am on the polyline(In LatLtg), I want to change the color to blue. To detect if I am on the point, I use the below:\r\n  \r\n\r\n    mMap.setOnMyLocationChangeListener \r\n\r\nand check if the first not done point is near than 2 m :\r\n            \r\n\r\n    double dis = currentLocation.distanceTo(location);\r\n\r\nBut it does not work correctly\r\n\r\n","title":"Java android google maps change color polyline where I was","body":"<p>This is how I draw a polyline :</p>\n\n<pre><code> List&lt;LatLng&gt; latLngsList = new ArrayList&lt;&gt;();\n            for (LegsItem leg : response.body().getRoutes().get(0).getLegs()) {\n                for (StepsItem step : leg.getSteps()) {\n                    List&lt;LatLng&gt; latLngs = PolyUtil.decode(step.getGeometry());\n                    step.setLatLngs(latLngs);\n                    latLngsList.addAll(latLngs);\n                }\n            }\n\n            Polyline polyline1 = googleMap.addPolyline(new PolylineOptions()\n                    .addAll(latLngsList));\n</code></pre>\n\n<p>I draw this on color black but when I am on the polyline(In LatLtg), I want to change the color to blue. To detect if I am on the point, I use the below:</p>\n\n<pre><code>mMap.setOnMyLocationChangeListener \n</code></pre>\n\n<p>and check if the first not done point is near than 2 m :</p>\n\n<pre><code>double dis = currentLocation.distanceTo(location);\n</code></pre>\n\n<p>But it does not work correctly</p>\n"},{"tags":["java","file","download","vaadin8"],"comments":[{"owner":{"account_id":12280349,"reputation":10212,"user_id":8962195,"display_name":"Tatu Lund"},"score":0,"creation_date":1665767996,"post_id":74071416,"comment_id":130782949,"body_markdown":"Vaadin 8 has classes like FileResource, ClassResource, ThemeReseource. It depends on where exectly your file is what is correct to use. E.g. is it in the class path or theme folder?","body":"Vaadin 8 has classes like FileResource, ClassResource, ThemeReseource. It depends on where exectly your file is what is correct to use. E.g. is it in the class path or theme folder?"}],"answers":[{"tags":[],"owner":{"account_id":4430906,"reputation":3990,"user_id":3608089,"display_name":"ollitietavainen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672835888,"creation_date":1672835888,"answer_id":75005557,"question_id":74071416,"body_markdown":"You can use the `FileDownloader` extension for this purpose. The `FileDownloader` is attached to some Component and it takes a `Resource` object which determines how to find the file content:\r\n\r\n```\r\n   Button downloadButton = new Button(&quot;Download file&quot;);\r\n   Resource myResource = createResource();\r\n   FileDownloader fileDownloader = new FileDownloader(myResource);\r\n   fileDownloader.extend(downloadButton);\r\n   layout.add(downloadButton);\r\n```\r\n\r\nThe `Resource` interface has several implementing types which offer different ways of defining the file. For example, if your file is a part of your theme (placed under your theme folder), you can use `ThemeResource`. You can find more information about different `Resource` types in the documentation: https://vaadin.com/docs/v8/framework/application/application-resources/#application.resources.api","title":"Vaadin 8 -java - How to download a file from a path in a project","body":"<p>You can use the <code>FileDownloader</code> extension for this purpose. The <code>FileDownloader</code> is attached to some Component and it takes a <code>Resource</code> object which determines how to find the file content:</p>\n<pre><code>   Button downloadButton = new Button(&quot;Download file&quot;);\n   Resource myResource = createResource();\n   FileDownloader fileDownloader = new FileDownloader(myResource);\n   fileDownloader.extend(downloadButton);\n   layout.add(downloadButton);\n</code></pre>\n<p>The <code>Resource</code> interface has several implementing types which offer different ways of defining the file. For example, if your file is a part of your theme (placed under your theme folder), you can use <code>ThemeResource</code>. You can find more information about different <code>Resource</code> types in the documentation: <a href=\"https://vaadin.com/docs/v8/framework/application/application-resources/#application.resources.api\" rel=\"nofollow noreferrer\">https://vaadin.com/docs/v8/framework/application/application-resources/#application.resources.api</a></p>\n"}],"owner":{"account_id":26623822,"reputation":1,"user_id":20242168,"display_name":"Edoardo Bertazzo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":193,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672835888,"creation_date":1665760719,"question_id":74071416,"body_markdown":"I&#39;m trying to download a pdf file contained in a folder of my project. I don&#39;t know how to do. I&#39;m using vaadin 8 and java","title":"Vaadin 8 -java - How to download a file from a path in a project","body":"<p>I'm trying to download a pdf file contained in a folder of my project. I don't know how to do. I'm using vaadin 8 and java</p>\n"},{"tags":["java","android","api","android-studio","build.gradle"],"answers":[{"tags":[],"owner":{"account_id":6979173,"reputation":942,"user_id":6576302,"display_name":"C.F.G"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672835796,"creation_date":1672835796,"answer_id":75005543,"question_id":73291892,"body_markdown":"`ShineButton` uses `com.daasuu:EasingInterpolator:1.3.0` dependency for animation effects and this dependency has been upgraded to `1.3.2` (see [EasingInterpolator in GitHub][1]) but ShineButton` has not updated his dependency while many have noticed to the author. (see [here][2]). So this library won&#39;t work until the author updates the dependency.\r\n\r\nYou can download the source file and fix the dependency version then follow this post.\r\nhttps://stackoverflow.com/q/35223028/6576302\r\n\r\n  [1]: https://github.com/MasayukiSuda/EasingInterpolator\r\n  [2]: https://github.com/ChadCSong/ShineButton/issues","title":"Android build Could not resolve all files for configuration &#39;:app:debugCompileClasspath&#39;","body":"<p><code>ShineButton</code> uses <code>com.daasuu:EasingInterpolator:1.3.0</code> dependency for animation effects and this dependency has been upgraded to <code>1.3.2</code> (see <a href=\"https://github.com/MasayukiSuda/EasingInterpolator\" rel=\"nofollow noreferrer\">EasingInterpolator in GitHub</a>) but ShineButton` has not updated his dependency while many have noticed to the author. (see <a href=\"https://github.com/ChadCSong/ShineButton/issues\" rel=\"nofollow noreferrer\">here</a>). So this library won't work until the author updates the dependency.</p>\n<p>You can download the source file and fix the dependency version then follow this post.\n<a href=\"https://stackoverflow.com/q/35223028/6576302\">how to add another project in my existing Android Studio project?</a></p>\n"}],"owner":{"account_id":25907393,"reputation":39,"user_id":19632259,"display_name":"user19632259"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":149,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1672835796,"creation_date":1660048400,"question_id":73291892,"body_markdown":"i tried to use shinebutton api (https://github.com/ChadCSong/ShineButton)\r\n\r\nHowever, the following error appears during the build phase :(\r\n\r\nIt is an error that has not occurred before and occurs after adding code to gradle.\r\n\r\nhelp me\r\n\r\nerror : ```Caused by: org.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException: Could not resolve all files for configuration &#39;:app:debugCompileClasspath&#39;.```\r\n\r\n\r\ncode : ```implementation &#39;com.sackcentury:shinebutton:1.0.0&#39;```","title":"Android build Could not resolve all files for configuration &#39;:app:debugCompileClasspath&#39;","body":"<p>i tried to use shinebutton api (<a href=\"https://github.com/ChadCSong/ShineButton\" rel=\"nofollow noreferrer\">https://github.com/ChadCSong/ShineButton</a>)</p>\n<p>However, the following error appears during the build phase :(</p>\n<p>It is an error that has not occurred before and occurs after adding code to gradle.</p>\n<p>help me</p>\n<p>error : <code>Caused by: org.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException: Could not resolve all files for configuration ':app:debugCompileClasspath'.</code></p>\n<p>code : <code>implementation 'com.sackcentury:shinebutton:1.0.0'</code></p>\n"},{"tags":["java","elasticsearch","elasticsearch-high-level-restclient"],"answers":[{"tags":[],"owner":{"account_id":278525,"reputation":10554,"user_id":573153,"accept_rate":94,"display_name":"xeraa"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1656980155,"creation_date":1656980155,"answer_id":72862927,"question_id":72855165,"body_markdown":"Generally, you should start looking at the new Java API Client. Though it doesn&#39;t need to be immediately and you can also do a piece by piece migration if that makes it easier (see https://www.elastic.co/guide/en/elasticsearch/client/java-api-client/current/migrate-hlrc.html).\r\n\r\nFor your specific problem:\r\n&gt; Since High-level Rest Client is now deprecated I am unable to resolve dependencies in order to use the HLRC existing code with Elasticsearch Version 8.x\r\n\r\nWhat&#39;s the dependency you cannot resolve? Because the old HLRC should be able to work with 8.x — quote from the documentation link you&#39;ve posted:\r\n&gt; The High Level Client version 7.16 and higher can communicate with Elasticsearch version 8.x after enabling API compatibility mode. When this mode is enabled, the client will send HTTP headers that instruct Elasticsearch 8.x to honor 7.x request/responses.\r\n\r\nAnd the new Java API Client also supports JDK 8 or newer, see https://www.elastic.co/guide/en/elasticsearch/client/java-api-client/current/installation.html.","title":"Migrating to Elasticsearch 8.x from ES 7.17.5","body":"<p>Generally, you should start looking at the new Java API Client. Though it doesn't need to be immediately and you can also do a piece by piece migration if that makes it easier (see <a href=\"https://www.elastic.co/guide/en/elasticsearch/client/java-api-client/current/migrate-hlrc.html\" rel=\"nofollow noreferrer\">https://www.elastic.co/guide/en/elasticsearch/client/java-api-client/current/migrate-hlrc.html</a>).</p>\n<p>For your specific problem:</p>\n<blockquote>\n<p>Since High-level Rest Client is now deprecated I am unable to resolve dependencies in order to use the HLRC existing code with Elasticsearch Version 8.x</p>\n</blockquote>\n<p>What's the dependency you cannot resolve? Because the old HLRC should be able to work with 8.x — quote from the documentation link you've posted:</p>\n<blockquote>\n<p>The High Level Client version 7.16 and higher can communicate with Elasticsearch version 8.x after enabling API compatibility mode. When this mode is enabled, the client will send HTTP headers that instruct Elasticsearch 8.x to honor 7.x request/responses.</p>\n</blockquote>\n<p>And the new Java API Client also supports JDK 8 or newer, see <a href=\"https://www.elastic.co/guide/en/elasticsearch/client/java-api-client/current/installation.html\" rel=\"nofollow noreferrer\">https://www.elastic.co/guide/en/elasticsearch/client/java-api-client/current/installation.html</a>.</p>\n"},{"tags":[],"owner":{"account_id":25387243,"reputation":75,"user_id":19198847,"display_name":"Umang Pachaury"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672835445,"creation_date":1672832702,"answer_id":75004962,"question_id":72855165,"body_markdown":"If you have ElasticSearch (Version 8.x) running externally and have a java application communicating with it using elasticsearch clients. The only change you have to do is during the client initialization and that is to enable the compatibility mode and all things should work correctly. I am assuming that all three of your dependencies regarding the HLRC are of the same version. The ElasticSearch Server,High level rest client and the Rest Client.","title":"Migrating to Elasticsearch 8.x from ES 7.17.5","body":"<p>If you have ElasticSearch (Version 8.x) running externally and have a java application communicating with it using elasticsearch clients. The only change you have to do is during the client initialization and that is to enable the compatibility mode and all things should work correctly. I am assuming that all three of your dependencies regarding the HLRC are of the same version. The ElasticSearch Server,High level rest client and the Rest Client.</p>\n"}],"owner":{"account_id":9329868,"reputation":745,"user_id":6925954,"display_name":"sjsj15"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2890,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1672835445,"creation_date":1656929886,"question_id":72855165,"body_markdown":"We are using Elasticsearch 7.17.5 which is used by a Java 8 application. We are planning to upgrade to Elasticsearch 8.x.\r\n\r\nSince High-level Rest Client is now deprecated I am unable to resolve dependencies in order to use the HLRC existing code with Elasticsearch Version 8.x.( [High Level Client compatibilty with ES 8][1] )\r\n\r\nWhich version of elasticsearch-rest-high-level-client should we use?\r\n\r\nAlso do we need to migrate our java application to java 17?\r\n \r\n\r\n\r\n  [1]: https://www.elastic.co/guide/en/elasticsearch/client/java-rest/current/java-rest-high-compatibility.html#:~:text=The%20High%20Level%20Client%20version,communicate%20with%20Elasticsearch%20version%208.","title":"Migrating to Elasticsearch 8.x from ES 7.17.5","body":"<p>We are using Elasticsearch 7.17.5 which is used by a Java 8 application. We are planning to upgrade to Elasticsearch 8.x.</p>\n<p>Since High-level Rest Client is now deprecated I am unable to resolve dependencies in order to use the HLRC existing code with Elasticsearch Version 8.x.( <a href=\"https://www.elastic.co/guide/en/elasticsearch/client/java-rest/current/java-rest-high-compatibility.html#:%7E:text=The%20High%20Level%20Client%20version,communicate%20with%20Elasticsearch%20version%208.\" rel=\"nofollow noreferrer\">High Level Client compatibilty with ES 8</a> )</p>\n<p>Which version of elasticsearch-rest-high-level-client should we use?</p>\n<p>Also do we need to migrate our java application to java 17?</p>\n"},{"tags":["java","hex","byte","endianness"],"comments":[{"owner":{"account_id":85671,"reputation":40847,"user_id":238704,"display_name":"President James K. Polk"},"score":2,"creation_date":1667436023,"post_id":74296978,"comment_id":131169315,"body_markdown":"A `byte` is a signed integer between -128 and 127, when it is promoted to an int it is sign-extended. `Integer.toHexString(b &amp; 0xff)` should accomplish what you want.","body":"A <code>byte</code> is a signed integer between -128 and 127, when it is promoted to an int it is sign-extended. <code>Integer.toHexString(b &amp; 0xff)</code> should accomplish what you want."},{"owner":{"account_id":5280798,"reputation":135,"user_id":4216247,"accept_rate":27,"display_name":"Jasmine"},"score":0,"creation_date":1667508823,"post_id":74296978,"comment_id":131189782,"body_markdown":"Thank you this worked. Is it possible to convert the overall array to HexString rather than looping through each byte and converting it to Hex?","body":"Thank you this worked. Is it possible to convert the overall array to HexString rather than looping through each byte and converting it to Hex?"},{"owner":{"account_id":85671,"reputation":40847,"user_id":238704,"display_name":"President James K. Polk"},"score":0,"creation_date":1667515160,"post_id":74296978,"comment_id":131191345,"body_markdown":"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/HexFormat.html","body":"<a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/HexFormat.html\" rel=\"nofollow noreferrer\">docs.oracle.com/en/java/javase/17/docs/api/java.base/java/ut&zwnj;&#8203;il/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1667471333,"creation_date":1667471333,"answer_id":74301535,"question_id":74296978,"body_markdown":"`System.out.printf(&quot;%02X &quot;, b);` \r\n\r\nIs what you need","title":"Convert Integer to Hex-&gt; LittleEndian format in Java","body":"<p><code>System.out.printf(&quot;%02X &quot;, b);</code></p>\n<p>Is what you need</p>\n"},{"tags":[],"owner":{"account_id":2056278,"reputation":23340,"user_id":1833961,"accept_rate":54,"display_name":"bvdb"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672835238,"creation_date":1672835238,"answer_id":75005438,"question_id":74296978,"body_markdown":"In addition to the other answer of @g00se,\r\n\r\nIt may also be worth noting that an `int` consumes 4 bytes in java.\r\nFor that reason you are forced to allocate 4 bytes in your example.\r\n\r\nHowever, a `short` is only 2 bytes.\r\n\r\n    ByteBuffer bb = ByteBuffer.allocate(2);\r\n    bb.order(ByteOrder.LITTLE_ENDIAN);\r\n    bb.putShort((short)value);\r\n\r\nThat will get rid of the unnecessary bytes.","title":"Convert Integer to Hex-&gt; LittleEndian format in Java","body":"<p>In addition to the other answer of @g00se,</p>\n<p>It may also be worth noting that an <code>int</code> consumes 4 bytes in java.\nFor that reason you are forced to allocate 4 bytes in your example.</p>\n<p>However, a <code>short</code> is only 2 bytes.</p>\n<pre><code>ByteBuffer bb = ByteBuffer.allocate(2);\nbb.order(ByteOrder.LITTLE_ENDIAN);\nbb.putShort((short)value);\n</code></pre>\n<p>That will get rid of the unnecessary bytes.</p>\n"}],"owner":{"account_id":5280798,"reputation":135,"user_id":4216247,"accept_rate":27,"display_name":"Jasmine"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":243,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1672835238,"creation_date":1667435409,"question_id":74296978,"body_markdown":"I am trying to get the Little Endian format value in Hex(in Java) for my code but getting fffff in the first digit and not getting the value similar to what this site returns: [https://www.rapidtables.com/convert/number/decimal-to-hex.html][1]\r\n\r\n Here is the code: \r\n\r\n    private static void convertToHex() {\r\n\r\n\t\tString hextestValue = Integer.toHexString(1234);\r\n\t\tint value = Integer.parseInt(hextestValue, 16);\r\n\t\tByteBuffer bb = ByteBuffer.allocate(4);\r\n\t\tbb.order(ByteOrder.LITTLE_ENDIAN);\r\n\t\tbb.putInt(value);\r\n\t\tSystem.out.print(&quot;x = &quot;);\r\n\t\tfor (byte b : bb.array()) {\r\n\t\t\tSystem.out.printf(&quot;%2s&quot;, Integer.toHexString(b) + &quot; &quot;);\r\n\t\t}\r\n\r\n\t}\r\nNot sure what needs to be done to return the result in similar format.\r\n\r\ne.g. for input 1234 I need the output: D2\t04\r\n\r\n  [1]: https://www.rapidtables.com/convert/number/decimal-to-hex.html","title":"Convert Integer to Hex-&gt; LittleEndian format in Java","body":"<p>I am trying to get the Little Endian format value in Hex(in Java) for my code but getting fffff in the first digit and not getting the value similar to what this site returns: <a href=\"https://www.rapidtables.com/convert/number/decimal-to-hex.html\" rel=\"nofollow noreferrer\">https://www.rapidtables.com/convert/number/decimal-to-hex.html</a></p>\n<p>Here is the code:</p>\n<pre><code>private static void convertToHex() {\n\n    String hextestValue = Integer.toHexString(1234);\n    int value = Integer.parseInt(hextestValue, 16);\n    ByteBuffer bb = ByteBuffer.allocate(4);\n    bb.order(ByteOrder.LITTLE_ENDIAN);\n    bb.putInt(value);\n    System.out.print(&quot;x = &quot;);\n    for (byte b : bb.array()) {\n        System.out.printf(&quot;%2s&quot;, Integer.toHexString(b) + &quot; &quot;);\n    }\n\n}\n</code></pre>\n<p>Not sure what needs to be done to return the result in similar format.</p>\n<p>e.g. for input 1234 I need the output: D2   04</p>\n"},{"tags":["java","maven","annotations","swagger","importerror"],"answers":[{"tags":[],"owner":{"account_id":14751077,"reputation":556,"user_id":10653163,"display_name":"Bal&#225;zs B&#246;rcs&#246;k"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1634223625,"creation_date":1634223625,"answer_id":69572984,"question_id":69555126,"body_markdown":"The &quot;problem&quot; was that [Springdoc][1] is used and originally I made the assumption that Springfox or a plain Swagger 2 dependency is used, as it was not removed from the codebase.\r\n\r\nTo fix the issue, we just simply need to add the right dependency and use the new annotations, which are mapped to the old ones like [explained here][2].\r\n\r\n\r\n  [1]: https://springdoc.org/#Introduction\r\n  [2]: https://springdoc.org/#migrating-from-springfox","title":"Can not import @ApiParam or @ApiModelProperty annotation eventough Swagger is added as a Maven dependency","body":"<p>The &quot;problem&quot; was that <a href=\"https://springdoc.org/#Introduction\" rel=\"noreferrer\">Springdoc</a> is used and originally I made the assumption that Springfox or a plain Swagger 2 dependency is used, as it was not removed from the codebase.</p>\n<p>To fix the issue, we just simply need to add the right dependency and use the new annotations, which are mapped to the old ones like <a href=\"https://springdoc.org/#migrating-from-springfox\" rel=\"noreferrer\">explained here</a>.</p>\n"}],"owner":{"account_id":14751077,"reputation":556,"user_id":10653163,"display_name":"Bal&#225;zs B&#246;rcs&#246;k"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7581,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":69572984,"answer_count":1,"score":5,"last_activity_date":1672835170,"creation_date":1634126215,"question_id":69555126,"body_markdown":"I am working on a project where we document our backend&#39;s API with Swagger. I would like to use annotation based configuration for Swagger. For my controller classes using `@Tag`, `@Operation` and `@ApiResponses` works just fine and they can be imported with the following statements:\r\n```java\r\nimport io.swagger.v3.oas.annotations.Operation;\r\nimport io.swagger.v3.oas.annotations.responses.ApiResponse;\r\nimport io.swagger.v3.oas.annotations.responses.ApiResponses;\r\nimport io.swagger.v3.oas.annotations.tags.Tag;\r\n```\r\nHowever if I try to add either `@ApiParam` or `@ApiModel` to my code, I am unable to import them in any way.\r\n\r\nIn my `POM.xml` I added Swagger as the following dependency:\r\n```xml\r\n&lt;!-- https://mvnrepository.com/artifact/io.swagger.core.v3/swagger-annotations --&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;io.swagger.core.v3&lt;/groupId&gt;\r\n    &lt;artifactId&gt;swagger-annotations&lt;/artifactId&gt;\r\n    &lt;version&gt;2.1.11&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\nWhat is it that I am missing here? I tried following [this Baeldung article][1] and example code, however I could not get it to work. Thanks for the help!\r\n\r\n\r\n  [1]: https://www.baeldung.com/swagger-apiparam-vs-apimodelproperty","title":"Can not import @ApiParam or @ApiModelProperty annotation eventough Swagger is added as a Maven dependency","body":"<p>I am working on a project where we document our backend's API with Swagger. I would like to use annotation based configuration for Swagger. For my controller classes using <code>@Tag</code>, <code>@Operation</code> and <code>@ApiResponses</code> works just fine and they can be imported with the following statements:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import io.swagger.v3.oas.annotations.Operation;\nimport io.swagger.v3.oas.annotations.responses.ApiResponse;\nimport io.swagger.v3.oas.annotations.responses.ApiResponses;\nimport io.swagger.v3.oas.annotations.tags.Tag;\n</code></pre>\n<p>However if I try to add either <code>@ApiParam</code> or <code>@ApiModel</code> to my code, I am unable to import them in any way.</p>\n<p>In my <code>POM.xml</code> I added Swagger as the following dependency:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;!-- https://mvnrepository.com/artifact/io.swagger.core.v3/swagger-annotations --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;io.swagger.core.v3&lt;/groupId&gt;\n    &lt;artifactId&gt;swagger-annotations&lt;/artifactId&gt;\n    &lt;version&gt;2.1.11&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>What is it that I am missing here? I tried following <a href=\"https://www.baeldung.com/swagger-apiparam-vs-apimodelproperty\" rel=\"noreferrer\">this Baeldung article</a> and example code, however I could not get it to work. Thanks for the help!</p>\n"},{"tags":["java","unit-testing","mockito","testng"],"comments":[{"owner":{"account_id":3108,"reputation":10370,"user_id":4411,"accept_rate":87,"display_name":"Jagger"},"score":0,"creation_date":1463562948,"post_id":37295096,"comment_id":62113605,"body_markdown":"If you use TestNG then for expected exceptions you should use `expectedExceptions` attribute of the `@Test` annotation instead of using `try catch` blocks.","body":"If you use TestNG then for expected exceptions you should use <code>expectedExceptions</code> attribute of the <code>@Test</code> annotation instead of using <code>try catch</code> blocks."},{"owner":{"account_id":3220345,"reputation":5564,"user_id":2717958,"accept_rate":57,"display_name":"Michal Krasny"},"score":0,"creation_date":1463563007,"post_id":37295096,"comment_id":62113655,"body_markdown":"But in that case I&#39;m not able to use verify(), because test code will never get there","body":"But in that case I&#39;m not able to use verify(), because test code will never get there"},{"owner":{"account_id":3028916,"reputation":35508,"user_id":2568341,"accept_rate":57,"display_name":"krokodilko"},"score":2,"creation_date":1463563039,"post_id":37295096,"comment_id":62113678,"body_markdown":"Possible duplicate of [Mockito How to mock and assert a thrown exception?](http://stackoverflow.com/questions/16243580/mockito-how-to-mock-and-assert-a-thrown-exception)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/16243580/mockito-how-to-mock-and-assert-a-thrown-exception\">Mockito How to mock and assert a thrown exception?</a>"},{"owner":{"account_id":3220345,"reputation":5564,"user_id":2717958,"accept_rate":57,"display_name":"Michal Krasny"},"score":0,"creation_date":1463563222,"post_id":37295096,"comment_id":62113815,"body_markdown":"@kordirko thanks for the link, but the only usable answer contains limitation &quot;Only Mockito up to 1.10.8 is supported&quot;. However I&#39;ll give it chance, even if my Mockito version is 1.10.19","body":"@kordirko thanks for the link, but the only usable answer contains limitation &quot;Only Mockito up to 1.10.8 is supported&quot;. However I&#39;ll give it chance, even if my Mockito version is 1.10.19"},{"owner":{"account_id":3108,"reputation":10370,"user_id":4411,"accept_rate":87,"display_name":"Jagger"},"score":1,"creation_date":1463563389,"post_id":37295096,"comment_id":62113945,"body_markdown":"@Michal If I were you I would separate those two concerns. First I would check if the exception was thrown by using the `expectedExpections` attribute. Then the second aspect of whether a method was never called I would put in a separate test with defined dependency using `@Test(dependsOnMethods = &quot;testExceptionAndNoInteractionWithMethod&quot;)` to the first one (you will probably want to rename this dependency method to something like `testExpection`). I see that you store the `subComponentMock` as a test class attribute anyway, so this should not be a problem for you at all.","body":"@Michal If I were you I would separate those two concerns. First I would check if the exception was thrown by using the <code>expectedExpections</code> attribute. Then the second aspect of whether a method was never called I would put in a separate test with defined dependency using <code>@Test(dependsOnMethods = &quot;testExceptionAndNoInteractionWithMethod&quot;)</code> to the first one (you will probably want to rename this dependency method to something like <code>testExpection</code>). I see that you store the <code>subComponentMock</code> as a test class attribute anyway, so this should not be a problem for you at all."}],"answers":[{"tags":[],"owner":{"account_id":3108,"reputation":10370,"user_id":4411,"accept_rate":87,"display_name":"Jagger"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1463569577,"creation_date":1463563989,"answer_id":37295594,"question_id":37295096,"body_markdown":"I would separate those two concerns by creating two tests and making use of annotation attributes `expectedExceptions` and `dependsOnMethods`.\r\n\r\n    @Test(expectedExceptions = { RuntimeExpcetion.class } )\r\n    public void testException() {\r\n        when(subComponentMock.failingMethod()).thenThrow(RuntimeException.class);\r\n        tested.someMethod(); //may call subComponentMock.methodThatShouldNotBeCalledWhenExceptionOccurs\r\n    }\r\n\r\n    @Test(dependsOnMethods = { &quot;testException&quot; } )\r\n    public void testNoInteractionWithMethod() {\r\n        verify(subComponentMock, never()).methodThatShouldNotBeCalledWhenExceptionOccurs(any());\r\n    }\r\n\r\nFor me it looks neater. You get rid of `try catch` block and unnecessary `fail` method invocation.","title":"TestNG + Mockito, how to test thrown exception and calls on mocks","body":"<p>I would separate those two concerns by creating two tests and making use of annotation attributes <code>expectedExceptions</code> and <code>dependsOnMethods</code>.</p>\n\n<pre><code>@Test(expectedExceptions = { RuntimeExpcetion.class } )\npublic void testException() {\n    when(subComponentMock.failingMethod()).thenThrow(RuntimeException.class);\n    tested.someMethod(); //may call subComponentMock.methodThatShouldNotBeCalledWhenExceptionOccurs\n}\n\n@Test(dependsOnMethods = { \"testException\" } )\npublic void testNoInteractionWithMethod() {\n    verify(subComponentMock, never()).methodThatShouldNotBeCalledWhenExceptionOccurs(any());\n}\n</code></pre>\n\n<p>For me it looks neater. You get rid of <code>try catch</code> block and unnecessary <code>fail</code> method invocation.</p>\n"},{"tags":[],"owner":{"account_id":3220345,"reputation":5564,"user_id":2717958,"accept_rate":57,"display_name":"Michal Krasny"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1463731815,"creation_date":1463731815,"answer_id":37341324,"question_id":37295096,"body_markdown":"We decided use Assertions framework.\r\n\r\n    when(subComponentMock.failingMethod()).thenThrow(RuntimeException.class);\r\n\r\n    Assertions.assertThatThrownBy(() -&gt; tested.someMethod()).isOfAnyClassIn(RuntimeException.class);\r\n\r\n    verify(subComponentMock, never()).methodThatShouldNotBeCalledWhenExceptionOccurs(any());\r\n\r\n","title":"TestNG + Mockito, how to test thrown exception and calls on mocks","body":"<p>We decided use Assertions framework.</p>\n\n<pre><code>when(subComponentMock.failingMethod()).thenThrow(RuntimeException.class);\n\nAssertions.assertThatThrownBy(() -&gt; tested.someMethod()).isOfAnyClassIn(RuntimeException.class);\n\nverify(subComponentMock, never()).methodThatShouldNotBeCalledWhenExceptionOccurs(any());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18290693,"reputation":446,"user_id":13466188,"display_name":"Prashant Singh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672834905,"creation_date":1672834905,"answer_id":75005383,"question_id":37295096,"body_markdown":"There is one more convenient way , which nobody mentioned .\r\n\r\nhttps://javadoc.io/doc/org.testng/testng/latest/org/testng/Assert.html \r\n\r\nFor example :\r\n```\r\n    @Test\r\n    public void testAddEntitlementWithServerException() {\r\n        OrgId orgId = OrgId.fromString(&quot;ef9b0be1-48c5-4503-bf95-d5cf1f942f46&quot;);\r\n        String failureMessage = &quot;Error message&quot;;\r\n\r\n        // mock exception behaviour\r\n        when(scimOrgClient.addEntitlement(orgId, &quot;&quot;, true, null)).thenThrow(new ClientException(HttpStatus.SC_BAD_REQUEST, &quot;Error message&quot;));\r\n\r\n        ServerException serverException = expectThrows(ServerException.class, () -&gt; squaredOfferService.addEntitlement(orgId, &quot;&quot;, true, null));\r\n\r\n        assertEquals(serverException.getMessage(), failureMessage);\r\n        verify(scimOrgClient, times(1)).addEntitlement(orgId, &quot;&quot;, true, null);\r\n    }\r\n```","title":"TestNG + Mockito, how to test thrown exception and calls on mocks","body":"<p>There is one more convenient way , which nobody mentioned .</p>\n<p><a href=\"https://javadoc.io/doc/org.testng/testng/latest/org/testng/Assert.html\" rel=\"nofollow noreferrer\">https://javadoc.io/doc/org.testng/testng/latest/org/testng/Assert.html</a></p>\n<p>For example :</p>\n<pre><code>    @Test\n    public void testAddEntitlementWithServerException() {\n        OrgId orgId = OrgId.fromString(&quot;ef9b0be1-48c5-4503-bf95-d5cf1f942f46&quot;);\n        String failureMessage = &quot;Error message&quot;;\n\n        // mock exception behaviour\n        when(scimOrgClient.addEntitlement(orgId, &quot;&quot;, true, null)).thenThrow(new ClientException(HttpStatus.SC_BAD_REQUEST, &quot;Error message&quot;));\n\n        ServerException serverException = expectThrows(ServerException.class, () -&gt; squaredOfferService.addEntitlement(orgId, &quot;&quot;, true, null));\n\n        assertEquals(serverException.getMessage(), failureMessage);\n        verify(scimOrgClient, times(1)).addEntitlement(orgId, &quot;&quot;, true, null);\n    }\n</code></pre>\n"}],"owner":{"account_id":3220345,"reputation":5564,"user_id":2717958,"accept_rate":57,"display_name":"Michal Krasny"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2503,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":37341324,"answer_count":3,"score":1,"last_activity_date":1672834905,"creation_date":1463562728,"question_id":37295096,"body_markdown":"In my TestNG unit tests I have a scenario, where I want to test, that an exception was thrown, but also I want to test that some method was not called on mocked sub-component. I came up with this, but this is ugly, long and not well readable:\r\n\r\n    @Test\r\n    public void testExceptionAndNoInteractionWithMethod() throws Exception {\r\n\r\n        when(subComponentMock.failingMethod()).thenThrow(RuntimeException.class);\r\n    \r\n        try {\r\n            tested.someMethod(); //may call subComponentMock.methodThatShouldNotBeCalledWhenExceptionOccurs\r\n        } catch (RuntimeException e) {\r\n            verify(subComponentMock, never()).methodThatShouldNotBeCalledWhenExceptionOccurs(any());\r\n            return;\r\n        }\r\n    \r\n        fail(&quot;Expected exception was not thrown&quot;);\r\n    }\r\n\r\nIs there any better solution to test both Exception and verify() metod?","title":"TestNG + Mockito, how to test thrown exception and calls on mocks","body":"<p>In my TestNG unit tests I have a scenario, where I want to test, that an exception was thrown, but also I want to test that some method was not called on mocked sub-component. I came up with this, but this is ugly, long and not well readable:</p>\n\n<pre><code>@Test\npublic void testExceptionAndNoInteractionWithMethod() throws Exception {\n\n    when(subComponentMock.failingMethod()).thenThrow(RuntimeException.class);\n\n    try {\n        tested.someMethod(); //may call subComponentMock.methodThatShouldNotBeCalledWhenExceptionOccurs\n    } catch (RuntimeException e) {\n        verify(subComponentMock, never()).methodThatShouldNotBeCalledWhenExceptionOccurs(any());\n        return;\n    }\n\n    fail(\"Expected exception was not thrown\");\n}\n</code></pre>\n\n<p>Is there any better solution to test both Exception and verify() metod?</p>\n"},{"tags":["java","swing","jpanel","awt","selection"],"answers":[{"tags":[],"owner":{"account_id":346397,"reputation":2224,"user_id":679894,"accept_rate":50,"display_name":"mael"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1375732154,"creation_date":1375732154,"answer_id":18066506,"question_id":18066453,"body_markdown":"&quot;OK it should return the selected index number&quot;. No, it should not. you&#39;re calling getSelectedIndex() once. So your int has the same value forever. You have to call getSelectedIndex() in your listener to get the new value.","title":"Java Choice Selected Index not returning properly","body":"<p>\"OK it should return the selected index number\". No, it should not. you're calling getSelectedIndex() once. So your int has the same value forever. You have to call getSelectedIndex() in your listener to get the new value.</p>\n"},{"tags":[],"owner":{"account_id":476048,"reputation":7235,"user_id":886749,"accept_rate":77,"display_name":"Cory Kendall"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1375732949,"creation_date":1375732318,"answer_id":18066554,"question_id":18066453,"body_markdown":"You need to recalculate the value for `menuSelection` when the &#39;OK&#39; button is clicked; you&#39;re setting it once during instantiation of the `Choice` as shown below:\r\n\r\n    final int menuSelection = cMenu.getSelectedIndex();\r\n\r\nIf you do something like this, you should be able to see your value:\r\n\r\n    OK.addActionListener(new ActionListener() {\r\n        public void actionPerformed(ActionEvent e) {\r\n            int currentSelection = cMenu.getSelectedIndex();\r\n            System.out.println(currentSelection);\r\n        }\r\n    });\r\n\r\nThis will mean `cMenu` should be final, which is probably OK because you don&#39;t need to ever update that reference.","title":"Java Choice Selected Index not returning properly","body":"<p>You need to recalculate the value for <code>menuSelection</code> when the 'OK' button is clicked; you're setting it once during instantiation of the <code>Choice</code> as shown below:</p>\n\n<pre><code>final int menuSelection = cMenu.getSelectedIndex();\n</code></pre>\n\n<p>If you do something like this, you should be able to see your value:</p>\n\n<pre><code>OK.addActionListener(new ActionListener() {\n    public void actionPerformed(ActionEvent e) {\n        int currentSelection = cMenu.getSelectedIndex();\n        System.out.println(currentSelection);\n    }\n});\n</code></pre>\n\n<p>This will mean <code>cMenu</code> should be final, which is probably OK because you don't need to ever update that reference.</p>\n"}],"owner":{"account_id":1436367,"reputation":95,"user_id":1357629,"accept_rate":50,"display_name":"SilverWolfe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1016,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":18066554,"answer_count":2,"score":1,"last_activity_date":1672834707,"creation_date":1375731996,"question_id":18066453,"body_markdown":"Ok, so here is the problem: Every time I click OK it should return the selected index number, right? The code below is returning ONLY the first index regardless of what I select. I set &quot;cMenu.selected(1)&quot; and it returns index 1, again, regardless of what I select. \r\n\r\nUsing JPanel, JButton, Choice\r\n\r\n\r\n    String[] menu = {&quot;item 1&quot; , &quot;item 2&quot;, &quot;item3&quot;};\r\n    \r\n    cMenu = new Choice();\r\n    cMenu.setBounds(0, 0, 75, 25);\r\n    for (int i = 0; i &lt; menu.length; i++)\r\n        cMenu.add(menu[i]);\r\n    }\r\n    panel.add(cMenu);\r\n    \r\n    final int menuSelection = cMenu.getSelectedIndex();\r\n    \r\n    //Below is, of course, debugging\r\n    //Before asking, the button works it does say 0 or Hello World or whatever I want\r\n    //when clicked\r\n    \r\n    OK.addActionListener(new ActionListener() {\r\n        public void actionPerformed(ActionEvent e) {\r\n            System.out.println(menuSelection);\r\n        }\r\n    });\r\n\r\n\r\n    \r\n","title":"Java Choice Selected Index not returning properly","body":"<p>Ok, so here is the problem: Every time I click OK it should return the selected index number, right? The code below is returning ONLY the first index regardless of what I select. I set \"cMenu.selected(1)\" and it returns index 1, again, regardless of what I select. </p>\n\n<p>Using JPanel, JButton, Choice</p>\n\n<pre><code>String[] menu = {\"item 1\" , \"item 2\", \"item3\"};\n\ncMenu = new Choice();\ncMenu.setBounds(0, 0, 75, 25);\nfor (int i = 0; i &lt; menu.length; i++)\n    cMenu.add(menu[i]);\n}\npanel.add(cMenu);\n\nfinal int menuSelection = cMenu.getSelectedIndex();\n\n//Below is, of course, debugging\n//Before asking, the button works it does say 0 or Hello World or whatever I want\n//when clicked\n\nOK.addActionListener(new ActionListener() {\n    public void actionPerformed(ActionEvent e) {\n        System.out.println(menuSelection);\n    }\n});\n</code></pre>\n"},{"tags":["java","awt","itemlistener"],"comments":[{"owner":{"account_id":2741125,"reputation":1487,"user_id":2362664,"accept_rate":90,"display_name":"Khinsu"},"score":0,"creation_date":1378403901,"post_id":18641913,"comment_id":27448929,"body_markdown":"please give more code, or more details","body":"please give more code, or more details"},{"owner":{"account_id":3240980,"reputation":13,"user_id":2734048,"display_name":"Sharpx"},"score":0,"creation_date":1378406209,"post_id":18641913,"comment_id":27450185,"body_markdown":"Ok, I&#39;ll try to give more helpful information. What I&#39;m assuming should happen is the itemListener should trigger every time I change the status of the drop down box but for some reason it doesn&#39;t. This is evident by the fact that the System.out.println doesn&#39;t display every time I select the commandDropDown. I apologize if this isn&#39;t the information you were looking for, I&#39;m not sure what other information would be useful for you.","body":"Ok, I&#39;ll try to give more helpful information. What I&#39;m assuming should happen is the itemListener should trigger every time I change the status of the drop down box but for some reason it doesn&#39;t. This is evident by the fact that the System.out.println doesn&#39;t display every time I select the commandDropDown. I apologize if this isn&#39;t the information you were looking for, I&#39;m not sure what other information would be useful for you."},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":0,"creation_date":1378433229,"post_id":18641913,"comment_id":27459642,"body_markdown":"For better help sooner, post an [SSCCE](http://sscce.org/).","body":"For better help sooner, post an <a href=\"http://sscce.org/\" rel=\"nofollow noreferrer\">SSCCE</a>."}],"answers":[{"tags":[],"owner":{"account_id":2741125,"reputation":1487,"user_id":2362664,"accept_rate":90,"display_name":"Khinsu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1378451139,"creation_date":1378451139,"answer_id":18651864,"question_id":18641913,"body_markdown":"In my opinion, your `buildCommandBox( Choice custoChoi)` is wrong, it should be something like that:\r\n\r\n    private Choice buildCommandBox(final Choice custoChoi) {\r\n    \r\n        custoChoi.addItem(&quot;choices&quot;);\r\n        custoChoi.addItem(&quot;Option1&quot;);\r\n        custoChoi.addItemListener(new ItemListener() {\r\n            @Override\r\n            public void itemStateChanged(ItemEvent ie) {\r\n                System.out.println(&quot;the action event for the command&quot; + &quot;box is working.&quot;);\r\n                if (custoChoi.getSelectedItem().equals(&quot;Option1&quot;)) {\r\n                    itemDropDown.addItem(&quot;things&quot;);\r\n                    itemDropDown.addItem(&quot;stuff&quot;);\r\n                }\r\n            }\r\n        });\r\n    \r\n        return custoChoi;\r\n    }\r\n\r\nI would recommand to use [JComboBox][1] instants of `Choice`, if `Swing` is allowed.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html","title":"why doesn&#39;t my itemlistener always trigger","body":"<p>In my opinion, your <code>buildCommandBox( Choice custoChoi)</code> is wrong, it should be something like that:</p>\n\n<pre><code>private Choice buildCommandBox(final Choice custoChoi) {\n\n    custoChoi.addItem(\"choices\");\n    custoChoi.addItem(\"Option1\");\n    custoChoi.addItemListener(new ItemListener() {\n        @Override\n        public void itemStateChanged(ItemEvent ie) {\n            System.out.println(\"the action event for the command\" + \"box is working.\");\n            if (custoChoi.getSelectedItem().equals(\"Option1\")) {\n                itemDropDown.addItem(\"things\");\n                itemDropDown.addItem(\"stuff\");\n            }\n        }\n    });\n\n    return custoChoi;\n}\n</code></pre>\n\n<p>I would recommand to use <a href=\"http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html\" rel=\"nofollow\">JComboBox</a> instants of <code>Choice</code>, if <code>Swing</code> is allowed.</p>\n"}],"owner":{"account_id":3240980,"reputation":13,"user_id":2734048,"display_name":"Sharpx"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":451,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":18651864,"answer_count":1,"score":0,"last_activity_date":1672834664,"creation_date":1378400081,"question_id":18641913,"body_markdown":"enter image description hereI&#39;m a new programmer and I&#39;m working on a text adventure that uses dropdown boxes (choice) as an input device. I have an itemListener on the first box that populates the members of the 2nd with the members that can be added. The player is then allowed to click the submit button and the first box is reset to the first item on the list and the second box is supposed to be cleared. When I run the program, the first time it reacts exactly as planned. The 2nd time I try to input something using the drop down boxes, the dropdown box doesn&#39;t respond. I put a marker inside the itemListener to see if it was even triggering to find out that it wasn&#39;t. I feel like I&#39;ve tweeked the program in every way imaginable but I have no idea what is causing this issue. If I toggle between the items in the drop down box a few times the itemListener starts to respond again.\r\n\r\nThis is a representation of my issue I threw together.\r\n\r\n\r\n\r\n\r\n\r\n    import java.awt.Choice;\r\n    import java.awt.GridBagLayout;\r\n    import java.awt.event.ActionEvent;\r\n    import java.awt.event.ActionListener;\r\n    import java.awt.event.ItemEvent;\r\n    import java.awt.event.ItemListener;\r\n    import javax.swing.JButton;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JPanel;\r\n    import javax.swing.JTextPane;\r\n\r\n\r\n    public class gui implements ActionListener\r\n    {\r\n    private static JTextPane outputField = new JTextPane();\r\n    private static JPanel mainPanel = new JPanel(new GridBagLayout());\r\n    private Choice commandDropDown = new Choice();\r\n    private Choice itemDropDown = new Choice();\r\n    private JButton submitButton = new JButton();\r\n\r\n    public gui()\r\n    {\r\n        JFrame frame = new JFrame(&quot;test&quot;);\r\n        mainPanel.setSize(450,585);\r\n        \r\n        commandDropDown = buildCommandBox(commandDropDown);\r\n        commandDropDown.setBounds(100, 15, 100, 40);\r\n        itemDropDown.setBounds(200, 15, 100, 40);\r\n        submitButton.setText(&quot;submit&quot;);\r\n        submitButton.setBounds(15, 15, 100, 40);\r\n        submitButton.addActionListener(this);\r\n        frame.add(commandDropDown);\r\n        frame.add(itemDropDown);\r\n        frame.add(submitButton);\r\n                    frame.setResizable(false);\r\n            frame.pack();\r\n            frame.setSize(300, 300);\r\n            //frame.setLayout(null);\r\n            //frame.setLocationRelativeTo(null);\r\n            frame.setVisible(true);\r\n        \r\n    }\r\n    public void actionPerformed(ActionEvent e)\r\n    {\r\n        itemDropDown.removeAll();\r\n        commandDropDown.select(0);\r\n    }\r\n    \r\n    private Choice buildCommandBox(Choice custoChoi)\r\n    {\r\n       final Choice c = new Choice();\r\n       \r\n       c.addItem(&quot;choices&quot;);\r\n       c.addItem(&quot;Option1&quot;);\r\n       c.addItemListener(new ItemListener()\r\n               {                   \r\n                    public void itemStateChanged(ItemEvent ie)\r\n                    {\r\n                        System.out.println(&quot;the action event for the command&quot;\r\n                                + &quot;box is working.&quot;);\r\n                        if(c.getSelectedItem().equals(&quot;Option1&quot;))\r\n                        {\r\n                            itemDropDown.addItem(&quot;things&quot;);\r\n                            itemDropDown.addItem(&quot;stuff&quot;);\r\n                        }\r\n                    }\r\n               });\r\n       \r\n       return c;\r\n    }\r\n    }\r\n            \r\n\r\n\r\nHopefully these pictures clear up any confusion about my post.\r\n      https://i.stack.imgur.com/RQcDe.jpg\r\n","title":"why doesn&#39;t my itemlistener always trigger","body":"<p>enter image description hereI'm a new programmer and I'm working on a text adventure that uses dropdown boxes (choice) as an input device. I have an itemListener on the first box that populates the members of the 2nd with the members that can be added. The player is then allowed to click the submit button and the first box is reset to the first item on the list and the second box is supposed to be cleared. When I run the program, the first time it reacts exactly as planned. The 2nd time I try to input something using the drop down boxes, the dropdown box doesn't respond. I put a marker inside the itemListener to see if it was even triggering to find out that it wasn't. I feel like I've tweeked the program in every way imaginable but I have no idea what is causing this issue. If I toggle between the items in the drop down box a few times the itemListener starts to respond again.</p>\n\n<p>This is a representation of my issue I threw together.</p>\n\n<pre><code>import java.awt.Choice;\nimport java.awt.GridBagLayout;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.awt.event.ItemEvent;\nimport java.awt.event.ItemListener;\nimport javax.swing.JButton;\nimport javax.swing.JFrame;\nimport javax.swing.JPanel;\nimport javax.swing.JTextPane;\n\n\npublic class gui implements ActionListener\n{\nprivate static JTextPane outputField = new JTextPane();\nprivate static JPanel mainPanel = new JPanel(new GridBagLayout());\nprivate Choice commandDropDown = new Choice();\nprivate Choice itemDropDown = new Choice();\nprivate JButton submitButton = new JButton();\n\npublic gui()\n{\n    JFrame frame = new JFrame(\"test\");\n    mainPanel.setSize(450,585);\n\n    commandDropDown = buildCommandBox(commandDropDown);\n    commandDropDown.setBounds(100, 15, 100, 40);\n    itemDropDown.setBounds(200, 15, 100, 40);\n    submitButton.setText(\"submit\");\n    submitButton.setBounds(15, 15, 100, 40);\n    submitButton.addActionListener(this);\n    frame.add(commandDropDown);\n    frame.add(itemDropDown);\n    frame.add(submitButton);\n                frame.setResizable(false);\n        frame.pack();\n        frame.setSize(300, 300);\n        //frame.setLayout(null);\n        //frame.setLocationRelativeTo(null);\n        frame.setVisible(true);\n\n}\npublic void actionPerformed(ActionEvent e)\n{\n    itemDropDown.removeAll();\n    commandDropDown.select(0);\n}\n\nprivate Choice buildCommandBox(Choice custoChoi)\n{\n   final Choice c = new Choice();\n\n   c.addItem(\"choices\");\n   c.addItem(\"Option1\");\n   c.addItemListener(new ItemListener()\n           {                   \n                public void itemStateChanged(ItemEvent ie)\n                {\n                    System.out.println(\"the action event for the command\"\n                            + \"box is working.\");\n                    if(c.getSelectedItem().equals(\"Option1\"))\n                    {\n                        itemDropDown.addItem(\"things\");\n                        itemDropDown.addItem(\"stuff\");\n                    }\n                }\n           });\n\n   return c;\n}\n}\n</code></pre>\n\n<p>Hopefully these pictures clear up any confusion about my post.\n      <a href=\"https://i.stack.imgur.com/RQcDe.jpg\" rel=\"nofollow\">https://i.stack.imgur.com/RQcDe.jpg</a></p>\n"},{"tags":["java","build","androidx"],"comments":[{"owner":{"account_id":20150877,"reputation":73,"user_id":14778218,"display_name":"Raj"},"score":0,"creation_date":1637935158,"post_id":70125444,"comment_id":123962328,"body_markdown":"this might help - https://stackoverflow.com/questions/69407035/resource-linking-fails-on-lstar-with-error","body":"this might help - <a href=\"https://stackoverflow.com/questions/69407035/resource-linking-fails-on-lstar-with-error\" title=\"resource linking fails on lstar with error\">stackoverflow.com/questions/69407035/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":23603958,"reputation":9,"user_id":17639975,"display_name":"Matthew Sparrow"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1639089150,"creation_date":1639089150,"answer_id":70297559,"question_id":70125444,"body_markdown":"I had exact same situation - changing &quot;extends AppCompatActivity&quot; to &quot;extends Activity&quot; fixed the issue.\r\n\r\nEdit: I don&#39;t know the source/reason behind that error, sadly...","title":"Android studio: cannot access MenuHost class file for androidx.core.view.MenuHost not found","body":"<p>I had exact same situation - changing &quot;extends AppCompatActivity&quot; to &quot;extends Activity&quot; fixed the issue.</p>\n<p>Edit: I don't know the source/reason behind that error, sadly...</p>\n"},{"tags":[],"owner":{"account_id":11283057,"reputation":75,"user_id":8274730,"display_name":"Bob D. Builder"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1639477501,"creation_date":1639477171,"answer_id":70347211,"question_id":70125444,"body_markdown":"Had the same problem. Fixed the issue by removing this lines:\r\n\r\n         configurations.all {\r\n            resolutionStrategy { force &#39;androidx.core:core:1.6.0&#39; }\r\n         }\r\nunder defaultConfig of build.gradle(:app)\r\n\r\nI also do not know the source/reason behind the error as well.","title":"Android studio: cannot access MenuHost class file for androidx.core.view.MenuHost not found","body":"<p>Had the same problem. Fixed the issue by removing this lines:</p>\n<pre><code>     configurations.all {\n        resolutionStrategy { force 'androidx.core:core:1.6.0' }\n     }\n</code></pre>\n<p>under defaultConfig of build.gradle(:app)</p>\n<p>I also do not know the source/reason behind the error as well.</p>\n"},{"tags":[],"owner":{"account_id":3718522,"reputation":1458,"user_id":3094065,"display_name":"maXp"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1651141243,"creation_date":1651141243,"answer_id":72041989,"question_id":70125444,"body_markdown":"Just add in you dependencies:\r\n\r\n    implementation &#39;androidx.core:core:{latest version}&#39; // 1.7.0 or above","title":"Android studio: cannot access MenuHost class file for androidx.core.view.MenuHost not found","body":"<p>Just add in you dependencies:</p>\n<pre><code>implementation 'androidx.core:core:{latest version}' // 1.7.0 or above\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6358741,"reputation":799,"user_id":4934997,"accept_rate":100,"display_name":"Abigail La&#39;Fay"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1657126001,"creation_date":1657126001,"answer_id":72887197,"question_id":70125444,"body_markdown":"In the build.gradle i changed this:\r\n\r\n    configurations.all {\r\n       resolutionStrategy { force &#39;androidx.core:core:1.6.0&#39; }\r\n    }\r\nto this:\r\n\r\n    configurations.all {\r\n       resolutionStrategy { force &#39;androidx.core:core:1.7.0&#39; }\r\n    }\r\nand this worked for me. ","title":"Android studio: cannot access MenuHost class file for androidx.core.view.MenuHost not found","body":"<p>In the build.gradle i changed this:</p>\n<pre><code>configurations.all {\n   resolutionStrategy { force 'androidx.core:core:1.6.0' }\n}\n</code></pre>\n<p>to this:</p>\n<pre><code>configurations.all {\n   resolutionStrategy { force 'androidx.core:core:1.7.0' }\n}\n</code></pre>\n<p>and this worked for me.</p>\n"},{"tags":[],"owner":{"account_id":20582316,"reputation":51,"user_id":15108101,"display_name":"Devra Rejava"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1658511741,"creation_date":1658511741,"answer_id":73084173,"question_id":70125444,"body_markdown":"`MenuHost` was added in `androidx.core:core:1.7.0` and above.\r\n\r\nhttps://developer.android.com/jetpack/androidx/releases/core#1.7.0-alpha02\r\n\r\nJust upgrade your dependencies.","title":"Android studio: cannot access MenuHost class file for androidx.core.view.MenuHost not found","body":"<p><code>MenuHost</code> was added in <code>androidx.core:core:1.7.0</code> and above.</p>\n<p><a href=\"https://developer.android.com/jetpack/androidx/releases/core#1.7.0-alpha02\" rel=\"noreferrer\">https://developer.android.com/jetpack/androidx/releases/core#1.7.0-alpha02</a></p>\n<p>Just upgrade your dependencies.</p>\n"},{"tags":[],"owner":{"account_id":2432851,"reputation":6204,"user_id":3596576,"accept_rate":48,"display_name":"Ionut Negru"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672834659,"creation_date":1672834659,"answer_id":75005333,"question_id":70125444,"body_markdown":"For me it worked when I manually cast it to MenuHost:\r\n\r\n```\r\n    private lateinit var menuHost: MenuHost\r\n\r\n    override fun onAttach(context: Context) {\r\n        super.onAttach(context)\r\n        menuHost = (requireActivity() as MenuHost)\r\n    }\r\n```\r\n\r\nIf this does not work, manually specifying the module you want to use should fix it. In the project `build.gradle` file you have to add this:\r\n\r\n```\r\nallprojects {\r\n    ...\r\n\r\n    configurations.all {\r\n        resolutionStrategy {\r\n            dependencySubstitution {\r\n                substitute module(&quot;androidx.activity:activity:1.0.0&quot;) using module(&quot;androidx.activity:activity:$libVersions.activity&quot;)\r\n                substitute module(&quot;androidx.fragment:fragment:1.1.0&quot;) using module(&quot;androidx.fragment:fragment:$libVersions.fragment&quot;)\r\n                substitute module(&quot;androidx.core:core:1.2.0&quot;) using module(&quot;androidx.core:core:$libVersions.core&quot;)\r\n                substitute module(&quot;androidx.core:core-ktx:1.2.0&quot;) using module(&quot;androidx.core:core-ktx:$libVersions.core&quot;)\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n(Double check what version you have in your project that affects you, in my case I noticed **1.00** for `activity`, **1.1.0** for `fragment` and **1.2.0** for `core` - they could be different in your case, you need to check the list of dependencies of your project)\r\n\r\nAnd you can use it directly as:\r\n```\r\n    private lateinit var menuHost: MenuHost\r\n\r\n    override fun onAttach(context: Context) {\r\n        super.onAttach(context)\r\n        menuHost = requireActivity()\r\n    }\r\n```","title":"Android studio: cannot access MenuHost class file for androidx.core.view.MenuHost not found","body":"<p>For me it worked when I manually cast it to MenuHost:</p>\n<pre><code>    private lateinit var menuHost: MenuHost\n\n    override fun onAttach(context: Context) {\n        super.onAttach(context)\n        menuHost = (requireActivity() as MenuHost)\n    }\n</code></pre>\n<p>If this does not work, manually specifying the module you want to use should fix it. In the project <code>build.gradle</code> file you have to add this:</p>\n<pre><code>allprojects {\n    ...\n\n    configurations.all {\n        resolutionStrategy {\n            dependencySubstitution {\n                substitute module(&quot;androidx.activity:activity:1.0.0&quot;) using module(&quot;androidx.activity:activity:$libVersions.activity&quot;)\n                substitute module(&quot;androidx.fragment:fragment:1.1.0&quot;) using module(&quot;androidx.fragment:fragment:$libVersions.fragment&quot;)\n                substitute module(&quot;androidx.core:core:1.2.0&quot;) using module(&quot;androidx.core:core:$libVersions.core&quot;)\n                substitute module(&quot;androidx.core:core-ktx:1.2.0&quot;) using module(&quot;androidx.core:core-ktx:$libVersions.core&quot;)\n            }\n        }\n    }\n}\n</code></pre>\n<p>(Double check what version you have in your project that affects you, in my case I noticed <strong>1.00</strong> for <code>activity</code>, <strong>1.1.0</strong> for <code>fragment</code> and <strong>1.2.0</strong> for <code>core</code> - they could be different in your case, you need to check the list of dependencies of your project)</p>\n<p>And you can use it directly as:</p>\n<pre><code>    private lateinit var menuHost: MenuHost\n\n    override fun onAttach(context: Context) {\n        super.onAttach(context)\n        menuHost = requireActivity()\n    }\n</code></pre>\n"}],"owner":{"account_id":20581200,"reputation":51,"user_id":15107260,"display_name":"Moritz"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5884,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":6,"score":5,"last_activity_date":1672834659,"creation_date":1637934444,"question_id":70125444,"body_markdown":"I&#39;ve got an error while building my project. This is my error message: cannot access MenuHost\r\nclass file for androidx.core.view.MenuHost not found. \r\n\r\nI didn&#39;t find any solution for this problem. I would be very happy if you could help me.\r\nI&#39;ve got this error for an empty Activity:\r\n\r\n```\r\nimport android.os.Bundle;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\npublic class CallActivity extends AppCompatActivity {\r\n    /* Access modifiers changed, original: protected */\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView( R.layout.activity_call);\r\n    }\r\n}\r\n\r\n```\r\n\r\nThis is my build.gradle (app):\r\n\r\n```\r\napply plugin: &#39;com.android.application&#39;\r\napply plugin: &#39;com.google.gms.google-services&#39;\r\n\r\nandroid {\r\n    compileSdkVersion 30\r\n    buildToolsVersion &quot;30.0.3&quot;\r\n\r\n\r\n    defaultConfig {\r\n        applicationId &quot;com.example.ghostcontact&quot;\r\n        minSdkVersion 21\r\n        targetSdkVersion 30\r\n        versionCode 1\r\n        versionName &quot;1.0&quot;\r\n\r\n        // Enabling multidex support.\r\n        multiDexEnabled true\r\n\r\n\r\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n\r\n\r\n    }\r\n\r\n\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n        }\r\n    }\r\n\r\n    configurations.all {\r\n\r\n        resolutionStrategy {\r\n            force &#39;androidx.core:core:1.6.0&#39;\r\n            force &#39;androidx.core:core-ktx:1.6.0&#39;\r\n        }\r\n        resolutionStrategy.force &#39;com.google.code.findbugs:jsr305:2.0.1&#39;\r\n    }\r\n\r\n}\r\n\r\ndependencies {\r\n    implementation fileTree(dir: &#39;libs&#39;, include: [&#39;*.jar&#39;])\r\n\r\n    implementation &#39;androidx.appcompat:appcompat:1.4.0&#39;\r\n    implementation &#39;androidx.constraintlayout:constraintlayout:2.1.2&#39;\r\n    testImplementation &#39;junit:junit:4.13&#39;\r\n    androidTestImplementation &#39;androidx.test.ext:junit:1.1.3&#39;\r\n    androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.4.0&#39;\r\n\r\n\r\n    implementation &#39;androidx.legacy:legacy-support-v4:1.0.0&#39;\r\n    implementation &#39;androidx.appcompat:appcompat:1.4.0&#39;\r\n\r\n\r\n    implementation &#39;com.android.support.constraint:constraint-layout:2.0.4&#39;\r\n    implementation &#39;com.google.firebase:firebase-database:20.0.2&#39;\r\n    implementation &#39;com.google.firebase:firebase-auth:21.0.1&#39;\r\n    implementation &#39;com.google.firebase:firebase-storage:20.0.0&#39;\r\n\r\n    androidTestImplementation &#39;androidx.test.ext:junit:1.1.3&#39;\r\n    androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.4.0&#39;\r\n    implementation &#39;androidx.recyclerview:recyclerview:1.2.1&#39;\r\n    implementation &#39;androidx.cardview:cardview:1.0.0&#39;\r\n\r\n    implementation &#39;com.google.android.material:material:1.4.0&#39;\r\n    implementation &#39;com.hbb20:ccp:2.3.1&#39;\r\n\r\n    implementation &#39;com.google.android.gms:play-services-base:17.6.0&#39;\r\n    implementation &#39;com.google.firebase:firebase-core:20.0.0&#39;\r\n    implementation &#39;com.google.firebase:firebase-crashlytics:18.2.4&#39;\r\n    implementation &#39;com.google.firebase:firebase-analytics:20.0.0&#39;\r\n\r\n\r\n    implementation &#39;com.squareup.picasso:picasso:2.71828&#39;\r\n\r\n    implementation &#39;commons-validator:commons-validator:1.6&#39;\r\n\r\n    implementation &#39;com.airbnb.android:lottie:3.4.0&#39;\r\n\r\n    //OTP PIN View Design\r\n    implementation &#39;com.chaos.view:pinview:1.4.3&#39;\r\n\r\n    implementation &#39;androidx.preference:preference:1.1.1&#39;\r\n\r\n    implementation &#39;androidx.core:core-ktx:1.6.0&#39;\r\n    implementation &#39;androidx.core:core:1.6.0&#39;\r\n\r\n\r\n    implementation &#39;com.google.android.material:material:1.4.0-alpha02&#39;\r\n    implementation &#39;com.android.support:multidex:1.0.3&#39;\r\n\r\n    implementation &#39;androidx.activity:activity:1.4.0&#39;\r\n    implementation &#39;androidx.activity:activity-compose:1.4.0&#39;\r\n    implementation &#39;androidx.activity:activity-ktx:1.4.0&#39;\r\n\r\n\r\n}\r\n\r\n```\r\nAnd my build.gradle (project)\r\n```\r\n\r\n// Top-level build file where you can add configuration options common to all sub-projects/modules.\r\n\r\nbuildscript {\r\n    \r\n    repositories {\r\n        google()\r\n        jcenter()\r\n        maven{url &#39;https://maven.fabric.io/public&#39;}\r\n        \r\n    }\r\n    dependencies {\r\n        classpath &#39;com.android.tools.build:gradle:3.6.4&#39;\r\n        classpath  &#39;com.google.gms:google-services:4.3.10&#39;\r\n\r\n\r\n        // NOTE: Do not place your application dependencies here; they belong\r\n        // in the individual module build.gradle files\r\n    }\r\n}\r\n\r\nallprojects {\r\n    repositories {\r\n        google()\r\n        jcenter()\r\n        maven{url &#39;https://jitpack.io&#39;}\r\n        maven{url &#39;https://dl.bintray.com/tapsellorg/maven&#39;}\r\n        maven{url &#39;https://maven.google.com/&#39;}\r\n    }\r\n}\r\n\r\ntask clean(type: Delete) {\r\n    delete rootProject.buildDir\r\n}\r\n```\r\n","title":"Android studio: cannot access MenuHost class file for androidx.core.view.MenuHost not found","body":"<p>I've got an error while building my project. This is my error message: cannot access MenuHost\nclass file for androidx.core.view.MenuHost not found.</p>\n<p>I didn't find any solution for this problem. I would be very happy if you could help me.\nI've got this error for an empty Activity:</p>\n<pre><code>import android.os.Bundle;\nimport androidx.appcompat.app.AppCompatActivity;\n\npublic class CallActivity extends AppCompatActivity {\n    /* Access modifiers changed, original: protected */\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView( R.layout.activity_call);\n    }\n}\n\n</code></pre>\n<p>This is my build.gradle (app):</p>\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'com.google.gms.google-services'\n\nandroid {\n    compileSdkVersion 30\n    buildToolsVersion &quot;30.0.3&quot;\n\n\n    defaultConfig {\n        applicationId &quot;com.example.ghostcontact&quot;\n        minSdkVersion 21\n        targetSdkVersion 30\n        versionCode 1\n        versionName &quot;1.0&quot;\n\n        // Enabling multidex support.\n        multiDexEnabled true\n\n\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n\n\n    }\n\n\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n\n    configurations.all {\n\n        resolutionStrategy {\n            force 'androidx.core:core:1.6.0'\n            force 'androidx.core:core-ktx:1.6.0'\n        }\n        resolutionStrategy.force 'com.google.code.findbugs:jsr305:2.0.1'\n    }\n\n}\n\ndependencies {\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n\n    implementation 'androidx.appcompat:appcompat:1.4.0'\n    implementation 'androidx.constraintlayout:constraintlayout:2.1.2'\n    testImplementation 'junit:junit:4.13'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.3'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.4.0'\n\n\n    implementation 'androidx.legacy:legacy-support-v4:1.0.0'\n    implementation 'androidx.appcompat:appcompat:1.4.0'\n\n\n    implementation 'com.android.support.constraint:constraint-layout:2.0.4'\n    implementation 'com.google.firebase:firebase-database:20.0.2'\n    implementation 'com.google.firebase:firebase-auth:21.0.1'\n    implementation 'com.google.firebase:firebase-storage:20.0.0'\n\n    androidTestImplementation 'androidx.test.ext:junit:1.1.3'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.4.0'\n    implementation 'androidx.recyclerview:recyclerview:1.2.1'\n    implementation 'androidx.cardview:cardview:1.0.0'\n\n    implementation 'com.google.android.material:material:1.4.0'\n    implementation 'com.hbb20:ccp:2.3.1'\n\n    implementation 'com.google.android.gms:play-services-base:17.6.0'\n    implementation 'com.google.firebase:firebase-core:20.0.0'\n    implementation 'com.google.firebase:firebase-crashlytics:18.2.4'\n    implementation 'com.google.firebase:firebase-analytics:20.0.0'\n\n\n    implementation 'com.squareup.picasso:picasso:2.71828'\n\n    implementation 'commons-validator:commons-validator:1.6'\n\n    implementation 'com.airbnb.android:lottie:3.4.0'\n\n    //OTP PIN View Design\n    implementation 'com.chaos.view:pinview:1.4.3'\n\n    implementation 'androidx.preference:preference:1.1.1'\n\n    implementation 'androidx.core:core-ktx:1.6.0'\n    implementation 'androidx.core:core:1.6.0'\n\n\n    implementation 'com.google.android.material:material:1.4.0-alpha02'\n    implementation 'com.android.support:multidex:1.0.3'\n\n    implementation 'androidx.activity:activity:1.4.0'\n    implementation 'androidx.activity:activity-compose:1.4.0'\n    implementation 'androidx.activity:activity-ktx:1.4.0'\n\n\n}\n\n</code></pre>\n<p>And my build.gradle (project)</p>\n<pre><code>\n// Top-level build file where you can add configuration options common to all sub-projects/modules.\n\nbuildscript {\n    \n    repositories {\n        google()\n        jcenter()\n        maven{url 'https://maven.fabric.io/public'}\n        \n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:3.6.4'\n        classpath  'com.google.gms:google-services:4.3.10'\n\n\n        // NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n    }\n}\n\nallprojects {\n    repositories {\n        google()\n        jcenter()\n        maven{url 'https://jitpack.io'}\n        maven{url 'https://dl.bintray.com/tapsellorg/maven'}\n        maven{url 'https://maven.google.com/'}\n    }\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n"},{"tags":["java","applet","awt","choicefield"],"comments":[{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":0,"creation_date":1419390877,"post_id":27612569,"comment_id":43682356,"body_markdown":"1) Why code an applet?  If it is due to the teacher specifying it, please refer them to [Why CS teachers should **stop** teaching Java applets](http://programmers.blogoverflow.com/2013/05/why-cs-teachers-should-stop-teaching-java-applets/). 2) Why use AWT?   See [this answer](http://stackoverflow.com/questions/6255106/java-gui-listeners-without-awt/6255978#6255978) for many good reasons to abandon AWT using components in favor of Swing.","body":"1) Why code an applet?  If it is due to the teacher specifying it, please refer them to <a href=\"http://programmers.blogoverflow.com/2013/05/why-cs-teachers-should-stop-teaching-java-applets/\" rel=\"nofollow noreferrer\">Why CS teachers should <b>stop</b> teaching Java applets</a>. 2) Why use AWT?   See <a href=\"http://stackoverflow.com/questions/6255106/java-gui-listeners-without-awt/6255978#6255978\">this answer</a> for many good reasons to abandon AWT using components in favor of Swing."}],"answers":[{"tags":[],"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1419391310,"creation_date":1419391310,"answer_id":27631013,"question_id":27612569,"body_markdown":"    public void paint(Graphics g) {\r\n\r\n        //If the firefox is selected as the browser , add another entry in the os for &quot;Windows 10&quot;\r\n        if (browser.getSelectedItem().equalsIgnoreCase(&quot;firefox&quot;)) {\r\n            this.os.add(&quot;Windows 10&quot;);\r\n        }\r\n\r\n    }\r\n\r\nPaint will be called whenever the JRE thinks it is necessary to do so.  It might be triggered by (our code) changing the components in the applet (i.e. adding or removing components), or changing the values displayed in the fields.  It might be triggered by minimizing and restoring the browser.  It might be triggered by bringing another window in front of the browser, then moving it off..\r\n\r\nThe best place to do such things is in the `init()` method, which is only called once.\r\n\r\n---\r\n\r\nBTW - do you know of the following method (which makes an OS &#39;chooser&#39; unnecessary)?\r\n\r\n    System.getProperty(&quot;os.name&quot;);\r\n\r\nWhat are you actually trying to achieve from these user choices?","title":"Adding a selection to the Choice list in the &#39;paint&#39; method is adding multiple records of the same in the list","body":"<pre><code>public void paint(Graphics g) {\n\n    //If the firefox is selected as the browser , add another entry in the os for \"Windows 10\"\n    if (browser.getSelectedItem().equalsIgnoreCase(\"firefox\")) {\n        this.os.add(\"Windows 10\");\n    }\n\n}\n</code></pre>\n\n<p>Paint will be called whenever the JRE thinks it is necessary to do so.  It might be triggered by (our code) changing the components in the applet (i.e. adding or removing components), or changing the values displayed in the fields.  It might be triggered by minimizing and restoring the browser.  It might be triggered by bringing another window in front of the browser, then moving it off..</p>\n\n<p>The best place to do such things is in the <code>init()</code> method, which is only called once.</p>\n\n<hr>\n\n<p>BTW - do you know of the following method (which makes an OS 'chooser' unnecessary)?</p>\n\n<pre><code>System.getProperty(\"os.name\");\n</code></pre>\n\n<p>What are you actually trying to achieve from these user choices?</p>\n"}],"owner":{"account_id":5484012,"reputation":203,"user_id":4359440,"accept_rate":0,"display_name":"Raj"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1145,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672834657,"creation_date":1419295128,"question_id":27612569,"body_markdown":"I have created an applet with two choice controls.\r\nOne of the choice control is the OS name and the other is the browser name.\r\nI have added the item listeners for both these choice controls, so that we can detect the option selected for each of the choice control.\r\nThe code adds another OS entry (&quot;Windows 10&quot;)in the OS choice control if the browser selected in Firefox.\r\n\r\nSomehow when I select the browser as firefox , multiple entries of &quot;Windows 10&#39; are added in the OS choice control.\r\n\r\nCan someone please help me?\r\n\r\n\r\n##SingleClick\r\n\r\n    package p1;\r\n\r\n    import java.applet.Applet;\r\n    import java.awt.event.ItemEvent;\r\n    import java.awt.event.ItemListener;\r\n\r\n    public class SingleClick implements ItemListener {\r\n\r\n    \tApplet currentApplet;\r\n\r\n    \t@Override\r\n    \tpublic void itemStateChanged(ItemEvent arg0) {\r\n    \t\t// TODO Auto-generated method stub\r\n\r\n    \t\tthis.currentApplet.repaint();\r\n\r\n    \t}\r\n\r\n    \tpublic void appletLink(Applet test) {\r\n    \t\tthis.currentApplet = test;\r\n    \t}\r\n\r\n    }\r\n\r\n##OSBrowserSelector\r\n\r\n    package p1;\r\n\r\n    import java.applet.Applet;\r\n    import java.awt.Button;\r\n    import java.awt.Checkbox;\r\n    import java.awt.CheckboxGroup;\r\n    import java.awt.Choice;\r\n    import java.awt.Color;\r\n    import java.awt.Font;\r\n    import java.awt.FontMetrics;\r\n    import java.awt.Frame;\r\n    import java.awt.Graphics;\r\n    import java.awt.GraphicsEnvironment;\r\n    import java.awt.Label;\r\n    import java.awt.List;\r\n    import java.awt.event.ItemListener;\r\n\r\n    public class OSBrowserSelector extends Applet {\r\n\r\n    \tChoice os;\r\n    \tChoice browser;\r\n\r\n    \tpublic void init() {\r\n\r\n    \t\tos = new Choice();\r\n    \t\tbrowser = new Choice();\r\n    \t\t// Set size of the applet window\r\n    \t\tthis.setSize(500, 500);\r\n\r\n    \t\t// Add the operating systems\r\n    \t\tos.add(&quot;XP&quot;);\r\n    \t\tos.add(&quot;Windows 7&quot;);\r\n    \t\tos.add(&quot;Macos&quot;);\r\n\r\n    \t\t//Add the browsers\r\n    \t\tbrowser.add(&quot;Chrome&quot;);\r\n    \t\tbrowser.add(&quot;firefox&quot;);\r\n    \t\tbrowser.add(&quot;ie&quot;);\r\n    \t\t\r\n    \t\t//Make the controls visible\r\n    \t\tthis.add(os);\r\n    \t\tthis.add(browser);\r\n\r\n    \t\t// Set the listener for the selection\r\n    \t\t//SingleClick class implements the ItemListener interface\r\n    \t\tSingleClick l = new SingleClick();\r\n    \t\tl.appletLink(this);\r\n\r\n    \t\t// Add the listener\r\n    \t\tos.addItemListener(l);\r\n    \t\tbrowser.addItemListener(l);\r\n    \t}\r\n\r\n    \tpublic void start() {\r\n\r\n    \t}\r\n\r\n    \tpublic void paint(Graphics g) {\r\n\r\n    \t\t//If the firefox is selected as the browser , add another entry in the os for &quot;Windows 10&quot;\r\n    \t\tif (browser.getSelectedItem().equalsIgnoreCase(&quot;firefox&quot;)) {\r\n    \t\t\tthis.os.add(&quot;Windows 10&quot;);\r\n    \t\t}\r\n\r\n    \t}\r\n\r\n    }\r\n\r\n\r\n\r\n","title":"Adding a selection to the Choice list in the &#39;paint&#39; method is adding multiple records of the same in the list","body":"<p>I have created an applet with two choice controls.\nOne of the choice control is the OS name and the other is the browser name.\nI have added the item listeners for both these choice controls, so that we can detect the option selected for each of the choice control.\nThe code adds another OS entry (\"Windows 10\")in the OS choice control if the browser selected in Firefox.</p>\n\n<p>Somehow when I select the browser as firefox , multiple entries of \"Windows 10' are added in the OS choice control.</p>\n\n<p>Can someone please help me?</p>\n\n<h2>SingleClick</h2>\n\n<pre><code>package p1;\n\nimport java.applet.Applet;\nimport java.awt.event.ItemEvent;\nimport java.awt.event.ItemListener;\n\npublic class SingleClick implements ItemListener {\n\n    Applet currentApplet;\n\n    @Override\n    public void itemStateChanged(ItemEvent arg0) {\n        // TODO Auto-generated method stub\n\n        this.currentApplet.repaint();\n\n    }\n\n    public void appletLink(Applet test) {\n        this.currentApplet = test;\n    }\n\n}\n</code></pre>\n\n<h2>OSBrowserSelector</h2>\n\n<pre><code>package p1;\n\nimport java.applet.Applet;\nimport java.awt.Button;\nimport java.awt.Checkbox;\nimport java.awt.CheckboxGroup;\nimport java.awt.Choice;\nimport java.awt.Color;\nimport java.awt.Font;\nimport java.awt.FontMetrics;\nimport java.awt.Frame;\nimport java.awt.Graphics;\nimport java.awt.GraphicsEnvironment;\nimport java.awt.Label;\nimport java.awt.List;\nimport java.awt.event.ItemListener;\n\npublic class OSBrowserSelector extends Applet {\n\n    Choice os;\n    Choice browser;\n\n    public void init() {\n\n        os = new Choice();\n        browser = new Choice();\n        // Set size of the applet window\n        this.setSize(500, 500);\n\n        // Add the operating systems\n        os.add(\"XP\");\n        os.add(\"Windows 7\");\n        os.add(\"Macos\");\n\n        //Add the browsers\n        browser.add(\"Chrome\");\n        browser.add(\"firefox\");\n        browser.add(\"ie\");\n\n        //Make the controls visible\n        this.add(os);\n        this.add(browser);\n\n        // Set the listener for the selection\n        //SingleClick class implements the ItemListener interface\n        SingleClick l = new SingleClick();\n        l.appletLink(this);\n\n        // Add the listener\n        os.addItemListener(l);\n        browser.addItemListener(l);\n    }\n\n    public void start() {\n\n    }\n\n    public void paint(Graphics g) {\n\n        //If the firefox is selected as the browser , add another entry in the os for \"Windows 10\"\n        if (browser.getSelectedItem().equalsIgnoreCase(\"firefox\")) {\n            this.os.add(\"Windows 10\");\n        }\n\n    }\n\n}\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9236,"page":756,"page_size":100}
