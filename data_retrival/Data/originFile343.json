{"items":[{"tags":["java","postgresql","hibernate","jpa","enums"],"comments":[{"owner":{"account_id":5483053,"reputation":406,"user_id":4358787,"display_name":"Gaurav"},"score":0,"creation_date":1630614972,"post_id":7603500,"comment_id":122012748,"body_markdown":"could also be caused by not having cast from enum to varchar!","body":"could also be caused by not having cast from enum to varchar!"}],"answers":[{"tags":[],"owner":{"account_id":310386,"reputation":1494,"user_id":623334,"accept_rate":62,"display_name":"vikash dat"},"down_vote_count":0,"up_vote_count":15,"is_accepted":true,"score":15,"last_activity_date":1317407934,"creation_date":1317407934,"answer_id":7614642,"question_id":7603500,"body_markdown":"I figured it out. I needed to use setObject instead of setString in the nullSafeSet function and pass in the Types.OTHER as the java.sql.type to let jdbc know that it was a postgres type.\r\n\r\n\r\n    public void nullSafeSet(PreparedStatement st, Object value, int index) throws HibernateException, SQLException {\r\n        if (value == null) {\r\n            st.setNull(index, Types.VARCHAR);\r\n        }\r\n        else {\r\n    //            previously used setString, but this causes postgresql to bark about incompatible types.\r\n    //           now using setObject passing in the java type for the postgres enum object\r\n    //            st.setString(index,((Enum) value).name());\r\n            st.setObject(index,((Enum) value), Types.OTHER);\r\n        }\r\n    }\r\n","title":"How to map PostgreSQL enum with JPA and Hibernate","body":"<p>I figured it out. I needed to use setObject instead of setString in the nullSafeSet function and pass in the Types.OTHER as the java.sql.type to let jdbc know that it was a postgres type.</p>\n\n<pre><code>public void nullSafeSet(PreparedStatement st, Object value, int index) throws HibernateException, SQLException {\n    if (value == null) {\n        st.setNull(index, Types.VARCHAR);\n    }\n    else {\n//            previously used setString, but this causes postgresql to bark about incompatible types.\n//           now using setObject passing in the java type for the postgres enum object\n//            st.setString(index,((Enum) value).name());\n        st.setObject(index,((Enum) value), Types.OTHER);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1012936,"reputation":145168,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1687894887,"creation_date":1505831437,"answer_id":46303133,"question_id":7603500,"body_markdown":"If you have following `post_status_info` enum type in PostgreSQL:\r\n\r\n    CREATE TYPE post_status_info AS ENUM (\r\n        &#39;PENDING&#39;, \r\n        &#39;APPROVED&#39;, \r\n        &#39;SPAM&#39;\r\n    )\r\n\r\nYou can easily map Java Enum to a PostgreSQL Enum column type using the [`PostgreSQLEnumType`](https://github.com/vladmihalcea/hypersistence-utils/blob/aae7cebd612f0c6fc41b7b0c84e36aedc835dfb6/hypersistence-utils-hibernate-62/src/main/java/io/hypersistence/utils/hibernate/type/basic/PostgreSQLEnumType.java#L32) from the [Hypersistence Utils](https://github.com/vladmihalcea/hypersistence-utils/) project.\r\n\r\nTo use it, you need to annotate the field with the Hibernate `@Type` annotation, as illustrated in the following example:\r\n\r\n    @Entity(name = &quot;Post&quot;)\r\n    @Table(name = &quot;post&quot;)\r\n    public class Post {\r\n     \r\n        @Id\r\n        private Long id;\r\n     \r\n        private String title;\r\n     \r\n        @Enumerated(EnumType.STRING)\r\n        @Column(columnDefinition = &quot;post_status_info&quot;)\r\n        @Type(PostgreSQLEnumType.class)\r\n        private PostStatus status;\r\n     \r\n        //Getters and setters omitted for brevity\r\n    }\r\n\r\n\r\nThat&#39;s it! It works like a charm. \r\n\r\nHere&#39;s a [test on GitHub that proves it][2].\r\n\r\n\r\n  [1]: https://vladmihalcea.com/the-best-way-to-map-an-enum-type-with-jpa-and-hibernate/\r\n  [2]: https://github.com/vladmihalcea/hypersistence-utils/blob/aae7cebd612f0c6fc41b7b0c84e36aedc835dfb6/hypersistence-utils-hibernate-62/src/test/java/io/hypersistence/utils/hibernate/type/basic/PostgreSQLEnumTest.java#L115","title":"How to map PostgreSQL enum with JPA and Hibernate","body":"<p>If you have following <code>post_status_info</code> enum type in PostgreSQL:</p>\n<pre><code>CREATE TYPE post_status_info AS ENUM (\n    'PENDING', \n    'APPROVED', \n    'SPAM'\n)\n</code></pre>\n<p>You can easily map Java Enum to a PostgreSQL Enum column type using the <a href=\"https://github.com/vladmihalcea/hypersistence-utils/blob/aae7cebd612f0c6fc41b7b0c84e36aedc835dfb6/hypersistence-utils-hibernate-62/src/main/java/io/hypersistence/utils/hibernate/type/basic/PostgreSQLEnumType.java#L32\" rel=\"nofollow noreferrer\"><code>PostgreSQLEnumType</code></a> from the <a href=\"https://github.com/vladmihalcea/hypersistence-utils/\" rel=\"nofollow noreferrer\">Hypersistence Utils</a> project.</p>\n<p>To use it, you need to annotate the field with the Hibernate <code>@Type</code> annotation, as illustrated in the following example:</p>\n<pre><code>@Entity(name = &quot;Post&quot;)\n@Table(name = &quot;post&quot;)\npublic class Post {\n \n    @Id\n    private Long id;\n \n    private String title;\n \n    @Enumerated(EnumType.STRING)\n    @Column(columnDefinition = &quot;post_status_info&quot;)\n    @Type(PostgreSQLEnumType.class)\n    private PostStatus status;\n \n    //Getters and setters omitted for brevity\n}\n</code></pre>\n<p>That's it! It works like a charm.</p>\n<p>Here's a <a href=\"https://github.com/vladmihalcea/hypersistence-utils/blob/aae7cebd612f0c6fc41b7b0c84e36aedc835dfb6/hypersistence-utils-hibernate-62/src/test/java/io/hypersistence/utils/hibernate/type/basic/PostgreSQLEnumTest.java#L115\" rel=\"nofollow noreferrer\">test on GitHub that proves it</a>.</p>\n"},{"tags":[],"owner":{"account_id":2109967,"reputation":6673,"user_id":1875434,"accept_rate":67,"display_name":"abbas"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1584522662,"creation_date":1584522662,"answer_id":60736408,"question_id":7603500,"body_markdown":"A quick solution will be \r\n\r\n    jdbc:postgresql://localhost:5432/postgres?stringtype=unspecified\r\n\r\n**?stringtype=unspecified** is the answer","title":"How to map PostgreSQL enum with JPA and Hibernate","body":"<p>A quick solution will be </p>\n\n<pre><code>jdbc:postgresql://localhost:5432/postgres?stringtype=unspecified\n</code></pre>\n\n<p><strong>?stringtype=unspecified</strong> is the answer</p>\n"},{"tags":[],"owner":{"account_id":6868647,"reputation":22249,"user_id":5279996,"display_name":"Braian Coronel"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1603726553,"creation_date":1600835393,"answer_id":64021041,"question_id":7603500,"body_markdown":"### build.gradle.kts\r\n\r\n    dependencies {\r\n        api(&quot;javax.persistence&quot;, &quot;javax.persistence-api&quot;, &quot;2.2&quot;)\r\n        api(&quot;org.hibernate&quot;,  &quot;hibernate-core&quot;,  &quot;5.4.21.Final&quot;)\r\n    }\r\n\r\nIn Kotlin it is important to make a generic extension with `EnumType&lt;Enum&lt;*&gt;&gt;()`\r\n\r\n### PostgreSQLEnumType.kt\r\n\r\n    import org.hibernate.type.EnumType\r\n    import java.sql.Types\r\n\r\n    class PostgreSQLEnumType : EnumType&lt;Enum&lt;*&gt;&gt;() {\r\n\r\n        @Throws(HibernateException::class, SQLException::class)\r\n        override fun nullSafeSet(\r\n                st: PreparedStatement,\r\n                value: Any,\r\n                index: Int,\r\n                session: SharedSessionContractImplementor) {\r\n            st.setObject(\r\n                    index,\r\n                    value.toString(),\r\n                    Types.OTHER\r\n            )\r\n        }\r\n    }\r\n\r\n### Custom.kt\r\n\r\n    import org.hibernate.annotations.Type\r\n    import org.hibernate.annotations.TypeDef\r\n    import javax.persistence.*\r\n\r\n    @Entity\r\n    @Table(name = &quot;custom&quot;)\r\n    @TypeDef(name = &quot;pgsql_enum&quot;, typeClass = PostgreSQLEnumType::class)\r\n    data class Custom(\r\n            @Id @GeneratedValue @Column(name = &quot;id&quot;)\r\n            val id: Int,\r\n        \r\n            @Enumerated(EnumType.STRING) @Column(name = &quot;status_custom&quot;) @Type(type = &quot;pgsql_enum&quot;)\r\n            val statusCustom: StatusCustom\r\n    )\r\n\r\n    enum class StatusCustom {\r\n        FIRST, SECOND\r\n    }\r\n\r\n____\r\n\r\nA simpler option that I don&#39;t recommend is the first option in [Arthur&#39;s answer][1] which adds a parameter in the connection URL to the db so that the enum data type is not lost. I believe that the responsibility of mapping the data type between the backend server and the database is precisely the backend.\r\n\r\n    &lt;property name=&quot;connection.url&quot;&gt;jdbc:postgresql://localhost:5432/yourdatabase?stringtype=unspecified&lt;/property&gt;\r\n\r\n[Source][2]\r\n\r\n____\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/43125099/5279996\r\n  [2]: https://stackoverflow.com/a/46303133/5279996","title":"How to map PostgreSQL enum with JPA and Hibernate","body":"<h3>build.gradle.kts</h3>\n<pre><code>dependencies {\n    api(&quot;javax.persistence&quot;, &quot;javax.persistence-api&quot;, &quot;2.2&quot;)\n    api(&quot;org.hibernate&quot;,  &quot;hibernate-core&quot;,  &quot;5.4.21.Final&quot;)\n}\n</code></pre>\n<p>In Kotlin it is important to make a generic extension with <code>EnumType&lt;Enum&lt;*&gt;&gt;()</code></p>\n<h3>PostgreSQLEnumType.kt</h3>\n<pre><code>import org.hibernate.type.EnumType\nimport java.sql.Types\n\nclass PostgreSQLEnumType : EnumType&lt;Enum&lt;*&gt;&gt;() {\n\n    @Throws(HibernateException::class, SQLException::class)\n    override fun nullSafeSet(\n            st: PreparedStatement,\n            value: Any,\n            index: Int,\n            session: SharedSessionContractImplementor) {\n        st.setObject(\n                index,\n                value.toString(),\n                Types.OTHER\n        )\n    }\n}\n</code></pre>\n<h3>Custom.kt</h3>\n<pre><code>import org.hibernate.annotations.Type\nimport org.hibernate.annotations.TypeDef\nimport javax.persistence.*\n\n@Entity\n@Table(name = &quot;custom&quot;)\n@TypeDef(name = &quot;pgsql_enum&quot;, typeClass = PostgreSQLEnumType::class)\ndata class Custom(\n        @Id @GeneratedValue @Column(name = &quot;id&quot;)\n        val id: Int,\n    \n        @Enumerated(EnumType.STRING) @Column(name = &quot;status_custom&quot;) @Type(type = &quot;pgsql_enum&quot;)\n        val statusCustom: StatusCustom\n)\n\nenum class StatusCustom {\n    FIRST, SECOND\n}\n</code></pre>\n<hr />\n<p>A simpler option that I don't recommend is the first option in <a href=\"https://stackoverflow.com/a/43125099/5279996\">Arthur's answer</a> which adds a parameter in the connection URL to the db so that the enum data type is not lost. I believe that the responsibility of mapping the data type between the backend server and the database is precisely the backend.</p>\n<pre><code>&lt;property name=&quot;connection.url&quot;&gt;jdbc:postgresql://localhost:5432/yourdatabase?stringtype=unspecified&lt;/property&gt;\n</code></pre>\n<p><a href=\"https://stackoverflow.com/a/46303133/5279996\">Source</a></p>\n<hr />\n"},{"tags":[],"owner":{"account_id":1280178,"reputation":3130,"user_id":2356160,"accept_rate":55,"display_name":"lathspell"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1607696430,"creation_date":1607696430,"answer_id":65253038,"question_id":7603500,"body_markdown":"The following might also help to have Postgres convert strings silently to your SQL enum type so you can use `@Enumerated(STRING)` and don&#39;t need `@Type`.\r\n\r\n\r\n    CREATE CAST (character varying as post_status_type) WITH INOUT AS IMPLICIT;\r\n","title":"How to map PostgreSQL enum with JPA and Hibernate","body":"<p>The following might also help to have Postgres convert strings silently to your SQL enum type so you can use <code>@Enumerated(STRING)</code> and don't need <code>@Type</code>.</p>\n<pre><code>CREATE CAST (character varying as post_status_type) WITH INOUT AS IMPLICIT;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":461547,"reputation":3094,"user_id":863311,"accept_rate":62,"display_name":"Simon"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1676876903,"creation_date":1676876903,"answer_id":75506195,"question_id":7603500,"body_markdown":"As TypeDef has disappeared in Hibernate 6, and we thus need to annotate each affected property anyway, I&#39;ve found that using\r\n\r\n    @ColumnTransformer(write=&quot;?::transmission_result &quot;)\r\n\r\nto force a type cast works, without any Hibernate usertype classes needed.","title":"How to map PostgreSQL enum with JPA and Hibernate","body":"<p>As TypeDef has disappeared in Hibernate 6, and we thus need to annotate each affected property anyway, I've found that using</p>\n<pre><code>@ColumnTransformer(write=&quot;?::transmission_result &quot;)\n</code></pre>\n<p>to force a type cast works, without any Hibernate usertype classes needed.</p>\n"},{"tags":[],"owner":{"account_id":16882480,"reputation":1,"user_id":12208139,"display_name":"He winxin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678874187,"creation_date":1678874187,"answer_id":75743086,"question_id":7603500,"body_markdown":"I solved this problem by creating a custom Hibernate Basic Type\r\n\r\n[reference Hibernate doc][1]\r\n\r\n\r\n**Versions**\r\n\r\n 1. Hibernate: 6.1.7.Final\r\n 2. SpringBoot: 3.0.3\r\n 3. PostgreSql: 15\r\n\r\n**LOG**\r\n\r\n*If you want custom classes to log, write these in the application.properties file*\r\n\r\n    logging.level.**.**.**.GenderType=trace\r\n\r\n**StudentEntity**\r\npublic class Student extends BaseEntity {\r\n\r\n    @Size(max = 30)\r\n    @NotNull\r\n    @Column(name = &quot;student_id&quot;, nullable = false, length = 30)\r\n    private String studentId;\r\n\r\n    @Size(max = 40)\r\n    @NotNull\r\n    @Column(name = &quot;name&quot;, nullable = false, length = 40)\r\n    private String name;\r\n\r\n    @NotNull\r\n    @Column(name = &quot;major_id&quot;, nullable = false)\r\n    @ToString.Exclude\r\n    private Long majorId;\r\n\r\n    @Column(name = &quot;gender&quot;, columnDefinition = &quot;gender&quot;)\r\n    @Type(GenderType.class)\r\n    @Enumerated(EnumType.STRING)\r\n    private Gender gender;\r\n\r\n    @NotNull\r\n    @Column(name = &quot;grade&quot;, nullable = false)\r\n    private Integer grade;\r\n\r\n    @Column(name = &quot;user_id&quot;, nullable = false)\r\n    private Long userId;\r\n\r\n    @Column(name = &quot;activity_id&quot;)\r\n    private Long activityId;}\r\n\r\n\r\n**GenderType**\r\n\r\n    public class GenderType implements UserType&lt;Gender&gt; {\r\n    public static final GenderType INSTANCE = new GenderType();\r\n\r\n    private static final Logger log = Logger.getLogger(GenderType.class);\r\n    @Override\r\n    public int getSqlType() {\r\n        return Types.OTHER;\r\n    }\r\n\r\n    @Override\r\n    public Class&lt;Gender&gt; returnedClass() {\r\n        return Gender.class;\r\n    }\r\n\r\n    @Override\r\n    public boolean equals(Gender x, Gender y) {\r\n        return x.getCode()\r\n                .equals(y.getCode());\r\n    }\r\n\r\n    @Override\r\n    public int hashCode(Gender x) {\r\n        return Objects.hashCode(x);\r\n    }\r\n\r\n    @Override\r\n    public Gender nullSafeGet(ResultSet rs, int position, SharedSessionContractImplementor session,\r\n                              Object owner) throws SQLException {\r\n        String columnValue = (String) rs.getObject(position);\r\n        if (rs.wasNull()) {\r\n            columnValue = null;\r\n        }\r\n        log.debugv(&quot;Result set column {0} value is {1}&quot;, position, columnValue);\r\n        return Gender.fromCode(columnValue);\r\n    }\r\n\r\n    @Override\r\n    public void nullSafeSet(PreparedStatement st, Gender value, int index,\r\n                            SharedSessionContractImplementor session) throws SQLException {\r\n        if (value == null) {\r\n            log.debugv(&quot;Binding null to parameter {0} &quot;,index);\r\n            st.setNull(index, Types.OTHER);\r\n        }\r\n        else {\r\n            log.debugv(&quot;binding parameter [{1}] as [gender] - [{0}] &quot;, value.getCode(), index);\r\n            st.setObject(index, value, Types.OTHER);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public Gender deepCopy(Gender value) {\r\n        return value == null ? null :\r\n               Gender.fromCode(value.getCode());\r\n    }\r\n\r\n    @Override\r\n    public boolean isMutable() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public Serializable disassemble(Gender value) {\r\n        return deepCopy(value);\r\n    }\r\n\r\n    @Override\r\n    public Gender assemble(Serializable cached, Object owner) {\r\n        return deepCopy((Gender) cached);\r\n    }\r\n\r\n    @Override\r\n    public Gender replace(Gender detached, Gender managed, Object owner) {\r\n        return deepCopy(detached);\r\n    }}\r\n\r\n**Gender**\r\n\r\n    public enum Gender {\r\n\r\n    MALE(&quot;MALE&quot;),\r\n\r\n    FEMALE(&quot;FEMALE&quot;),\r\n\r\n    UNKNOWN(&quot;UNKNOWN&quot;);\r\n\r\n    private final String code;\r\n\r\n    Gender(String gender) {\r\n        code = gender;\r\n    }\r\n\r\n\r\n    public String getCode() {\r\n        return code;\r\n    }\r\n\r\n    public static Gender fromCode(String gender) {\r\n        if (gender == null) {\r\n            return null;\r\n        }\r\n        return switch (gender) {\r\n            case &quot;MALE&quot;, &quot;男&quot; -&gt; Gender.MALE;\r\n            case &quot;FEMALE&quot;, &quot;女&quot; -&gt; Gender.FEMALE;\r\n            default -&gt; throw new IllegalArgumentException(&quot;Invaild input value&quot;);\r\n        };\r\n    }}\r\n\r\n\r\n**StudentServie**\r\n\r\n        public Stream&lt;Student&gt; findStudent(@Nullable Integer grade, @Nullable String gender,\r\n                                       @Nullable Long majorId, @Nullable Long activityId) {\r\n\r\n        return studentRepo.findAll((Specification&lt;Student&gt;) (root, query, criteriaBuilder) -&gt; {\r\n            List&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();\r\n            if (grade != null) {\r\n                predicates.add(criteriaBuilder.equal(root.get(&quot;grade&quot;), grade));\r\n            }\r\n\r\n            if (gender != null) {\r\n                predicates.add(criteriaBuilder.equal(root.get(&quot;gender&quot;), Gender.fromCode(gender)));\r\n            }\r\n\r\n            return query.where(predicates.toArray(new Predicate[predicates.size()]))\r\n                        .getRestriction();\r\n        }).stream();\r\n}\r\n\r\n\r\n\r\n\r\n  [1]: https://docs.jboss.org/hibernate/orm/current/userguide/html_single/Hibernate_User_Guide.html#basic-custom-type","title":"How to map PostgreSQL enum with JPA and Hibernate","body":"<p>I solved this problem by creating a custom Hibernate Basic Type</p>\n<p><a href=\"https://docs.jboss.org/hibernate/orm/current/userguide/html_single/Hibernate_User_Guide.html#basic-custom-type\" rel=\"nofollow noreferrer\">reference Hibernate doc</a></p>\n<p><strong>Versions</strong></p>\n<ol>\n<li>Hibernate: 6.1.7.Final</li>\n<li>SpringBoot: 3.0.3</li>\n<li>PostgreSql: 15</li>\n</ol>\n<p><strong>LOG</strong></p>\n<p><em>If you want custom classes to log, write these in the application.properties file</em></p>\n<pre><code>logging.level.**.**.**.GenderType=trace\n</code></pre>\n<p><strong>StudentEntity</strong>\npublic class Student extends BaseEntity {</p>\n<pre><code>@Size(max = 30)\n@NotNull\n@Column(name = &quot;student_id&quot;, nullable = false, length = 30)\nprivate String studentId;\n\n@Size(max = 40)\n@NotNull\n@Column(name = &quot;name&quot;, nullable = false, length = 40)\nprivate String name;\n\n@NotNull\n@Column(name = &quot;major_id&quot;, nullable = false)\n@ToString.Exclude\nprivate Long majorId;\n\n@Column(name = &quot;gender&quot;, columnDefinition = &quot;gender&quot;)\n@Type(GenderType.class)\n@Enumerated(EnumType.STRING)\nprivate Gender gender;\n\n@NotNull\n@Column(name = &quot;grade&quot;, nullable = false)\nprivate Integer grade;\n\n@Column(name = &quot;user_id&quot;, nullable = false)\nprivate Long userId;\n\n@Column(name = &quot;activity_id&quot;)\nprivate Long activityId;}\n</code></pre>\n<p><strong>GenderType</strong></p>\n<pre><code>public class GenderType implements UserType&lt;Gender&gt; {\npublic static final GenderType INSTANCE = new GenderType();\n\nprivate static final Logger log = Logger.getLogger(GenderType.class);\n@Override\npublic int getSqlType() {\n    return Types.OTHER;\n}\n\n@Override\npublic Class&lt;Gender&gt; returnedClass() {\n    return Gender.class;\n}\n\n@Override\npublic boolean equals(Gender x, Gender y) {\n    return x.getCode()\n            .equals(y.getCode());\n}\n\n@Override\npublic int hashCode(Gender x) {\n    return Objects.hashCode(x);\n}\n\n@Override\npublic Gender nullSafeGet(ResultSet rs, int position, SharedSessionContractImplementor session,\n                          Object owner) throws SQLException {\n    String columnValue = (String) rs.getObject(position);\n    if (rs.wasNull()) {\n        columnValue = null;\n    }\n    log.debugv(&quot;Result set column {0} value is {1}&quot;, position, columnValue);\n    return Gender.fromCode(columnValue);\n}\n\n@Override\npublic void nullSafeSet(PreparedStatement st, Gender value, int index,\n                        SharedSessionContractImplementor session) throws SQLException {\n    if (value == null) {\n        log.debugv(&quot;Binding null to parameter {0} &quot;,index);\n        st.setNull(index, Types.OTHER);\n    }\n    else {\n        log.debugv(&quot;binding parameter [{1}] as [gender] - [{0}] &quot;, value.getCode(), index);\n        st.setObject(index, value, Types.OTHER);\n    }\n}\n\n@Override\npublic Gender deepCopy(Gender value) {\n    return value == null ? null :\n           Gender.fromCode(value.getCode());\n}\n\n@Override\npublic boolean isMutable() {\n    return true;\n}\n\n@Override\npublic Serializable disassemble(Gender value) {\n    return deepCopy(value);\n}\n\n@Override\npublic Gender assemble(Serializable cached, Object owner) {\n    return deepCopy((Gender) cached);\n}\n\n@Override\npublic Gender replace(Gender detached, Gender managed, Object owner) {\n    return deepCopy(detached);\n}}\n</code></pre>\n<p><strong>Gender</strong></p>\n<pre><code>public enum Gender {\n\nMALE(&quot;MALE&quot;),\n\nFEMALE(&quot;FEMALE&quot;),\n\nUNKNOWN(&quot;UNKNOWN&quot;);\n\nprivate final String code;\n\nGender(String gender) {\n    code = gender;\n}\n\n\npublic String getCode() {\n    return code;\n}\n\npublic static Gender fromCode(String gender) {\n    if (gender == null) {\n        return null;\n    }\n    return switch (gender) {\n        case &quot;MALE&quot;, &quot;男&quot; -&gt; Gender.MALE;\n        case &quot;FEMALE&quot;, &quot;女&quot; -&gt; Gender.FEMALE;\n        default -&gt; throw new IllegalArgumentException(&quot;Invaild input value&quot;);\n    };\n}}\n</code></pre>\n<p><strong>StudentServie</strong></p>\n<pre><code>    public Stream&lt;Student&gt; findStudent(@Nullable Integer grade, @Nullable String gender,\n                                   @Nullable Long majorId, @Nullable Long activityId) {\n\n    return studentRepo.findAll((Specification&lt;Student&gt;) (root, query, criteriaBuilder) -&gt; {\n        List&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();\n        if (grade != null) {\n            predicates.add(criteriaBuilder.equal(root.get(&quot;grade&quot;), grade));\n        }\n\n        if (gender != null) {\n            predicates.add(criteriaBuilder.equal(root.get(&quot;gender&quot;), Gender.fromCode(gender)));\n        }\n\n        return query.where(predicates.toArray(new Predicate[predicates.size()]))\n                    .getRestriction();\n    }).stream();\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":310386,"reputation":1494,"user_id":623334,"accept_rate":62,"display_name":"vikash dat"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21686,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"accepted_answer_id":7614642,"answer_count":7,"score":18,"last_activity_date":1687894887,"creation_date":1317331093,"question_id":7603500,"body_markdown":"I am trying to map a PostgreSQL custom type,named `transmission_result`, to a Hibernate/JPA POJO. The PostgreSQL custom type is more or less an `enum` type of string values. \r\n\r\nI have created a custom `EnumUserType` called `PGEnumUserType` as well as an `enum` class representing the PostgreSQL enumerated values. When I run this against a real database, I receive the following error:\r\n\r\n    &#39;ERROR: column &quot;status&quot; is of type transmission_result but expression is of type\r\n    character varying \r\n      Hint: You will need to rewrite or cast the expression.\r\n      Position: 135 &#39;\r\n\r\nUpon seeing this, I figured I needed to change my `SqlTypes` to `Types.OTHER`. But doing so breaks my integration tests (using *HyperSQL* in memory DB) with the message:\r\n\r\n     \r\n    &#39;Caused by: java.sql.SQLException: Table not found in statement\r\n    [select enrollment0_.&quot;id&quot; as id1_47_0_,\r\n     enrollment0_.&quot;tpa_approval_id&quot; as tpa2_47_0_,\r\n     enrollment0_.&quot;tpa_status_code&quot; as tpa3_47_0_,\r\n     enrollment0_.&quot;status_message&quot; as status4_47_0_,\r\n     enrollment0_.&quot;approval_id&quot; as approval5_47_0_,\r\n     enrollment0_.&quot;transmission_date&quot; as transmis6_47_0_,\r\n     enrollment0_.&quot;status&quot; as status7_47_0_,\r\n     enrollment0_.&quot;transmitter&quot; as transmit8_47_0_\r\n     from &quot;transmissions&quot; enrollment0_ where enrollment0_.&quot;id&quot;=?]&#39;\r\n\r\n\r\nI&#39;m not sure why changing the `sqlType` results in this error. Any help is appreciated.\r\n\r\n\r\nJPA/Hibernate Entity:\r\n\r\n    @Entity\r\n    @Access(javax.persistence.AccessType.PROPERTY)\r\n    @Table(name=&quot;transmissions&quot;)\r\n    public class EnrollmentCycleTransmission {\r\n\r\n    // elements of enum status column\r\n    private static final String ACCEPTED_TRANSMISSION = &quot;accepted&quot;;\r\n    private static final String REJECTED_TRANSMISSION = &quot;rejected&quot;;\r\n\tprivate static final String DUPLICATE_TRANSMISSION = &quot;duplicate&quot;;\r\n    private static final String EXCEPTION_TRANSMISSION = &quot;exception&quot;;\r\n    private static final String RETRY_TRANSMISSION = &quot;retry&quot;;\r\n\r\n    private Long transmissionID;\r\n    private Long approvalID;\r\n    private Long transmitterID;\r\n    private TransmissionStatusType transmissionStatus;\r\n    private Date transmissionDate;\r\n    private String TPAApprovalID;\r\n    private String TPAStatusCode;\r\n    private String TPAStatusMessage;\r\n\r\n\r\n    @Column(name = &quot;id&quot;)\r\n    @Id\r\n    @GeneratedValue(strategy=GenerationType.AUTO)\r\n    public Long getTransmissionID() {\r\n        return transmissionID;\r\n    }\r\n\r\n    public void setTransmissionID(Long transmissionID) {\r\n        this.transmissionID = transmissionID;\r\n    }\r\n\r\n    @Column(name = &quot;approval_id&quot;)\r\n    public Long getApprovalID() {\r\n        return approvalID;\r\n    }\r\n\r\n    public void setApprovalID(Long approvalID) {\r\n        this.approvalID = approvalID;\r\n    }\r\n\r\n    @Column(name = &quot;transmitter&quot;)\r\n    public Long getTransmitterID() {\r\n        return transmitterID;\r\n    }\r\n\r\n    public void setTransmitterID(Long transmitterID) {\r\n        this.transmitterID = transmitterID;\r\n    }\r\n\r\n    @Column(name = &quot;status&quot;)\r\n    @Type(type = &quot;org.fuwt.model.PGEnumUserType&quot; , parameters ={@org.hibernate.annotations.Parameter(name = &quot;enumClassName&quot;,value = &quot;org.fuwt.model.enrollment.TransmissionStatusType&quot;)} )\r\n    public TransmissionStatusType getTransmissionStatus() {\r\n        return this.transmissionStatus ;\r\n    }\r\n\r\n    public void setTransmissionStatus(TransmissionStatusType transmissionStatus) {\r\n        this.transmissionStatus = transmissionStatus;\r\n    }\r\n\r\n    @Column(name = &quot;transmission_date&quot;)\r\n    public Date getTransmissionDate() {\r\n        return transmissionDate;\r\n    }\r\n\r\n    public void setTransmissionDate(Date transmissionDate) {\r\n        this.transmissionDate = transmissionDate;\r\n    }\r\n\r\n    @Column(name = &quot;tpa_approval_id&quot;)\r\n    public String getTPAApprovalID() {\r\n        return TPAApprovalID;\r\n    }\r\n\r\n    public void setTPAApprovalID(String TPAApprovalID) {\r\n        this.TPAApprovalID = TPAApprovalID;\r\n    }\r\n\r\n    @Column(name = &quot;tpa_status_code&quot;)\r\n    public String getTPAStatusCode() {\r\n        return TPAStatusCode;\r\n    }\r\n\r\n    public void setTPAStatusCode(String TPAStatusCode) {\r\n        this.TPAStatusCode = TPAStatusCode;\r\n    }\r\n\r\n    @Column(name = &quot;status_message&quot;)\r\n    public String getTPAStatusMessage() {\r\n        return TPAStatusMessage;\r\n    }\r\n\r\n    public void setTPAStatusMessage(String TPAStatusMessage) {\r\n        this.TPAStatusMessage = TPAStatusMessage;\r\n    }\r\n    }\r\n\r\nCustom EnumUserType:\r\n\r\n    public class PGEnumUserType implements UserType, ParameterizedType {\r\n\r\n    private Class&lt;Enum&gt; enumClass;\r\n\r\n    public PGEnumUserType(){\r\n        super();\r\n    }\r\n\r\n    public void setParameterValues(Properties parameters) {\r\n        String enumClassName = parameters.getProperty(&quot;enumClassName&quot;);\r\n        try {\r\n            enumClass = (Class&lt;Enum&gt;) Class.forName(enumClassName);\r\n        } catch (ClassNotFoundException e) {\r\n            throw new HibernateException(&quot;Enum class not found &quot;, e);\r\n        }\r\n\r\n    }\r\n\r\n    public int[] sqlTypes() {\r\n        return new int[] {Types.VARCHAR};\r\n    }\r\n\r\n    public Class returnedClass() {\r\n        return enumClass;\r\n    }\r\n\r\n    public boolean equals(Object x, Object y) throws HibernateException {\r\n        return x==y;\r\n    }\r\n\r\n    public int hashCode(Object x) throws HibernateException {\r\n        return x.hashCode();\r\n    }\r\n\r\n    public Object nullSafeGet(ResultSet rs, String[] names, Object owner) throws HibernateException, SQLException {\r\n        String name = rs.getString(names[0]);\r\n        return rs.wasNull() ? null: Enum.valueOf(enumClass,name);\r\n    }\r\n\r\n    public void nullSafeSet(PreparedStatement st, Object value, int index) throws HibernateException, SQLException {\r\n        if (value == null) {\r\n            st.setNull(index, Types.VARCHAR);\r\n        }\r\n        else {\r\n            st.setString(index,((Enum) value).name());\r\n        }\r\n    }\r\n\r\n    public Object deepCopy(Object value) throws HibernateException {\r\n        return value;\r\n    }\r\n\r\n    public boolean isMutable() {\r\n        return false;  //To change body of implemented methods use File | Settings | File Templates.\r\n    }\r\n\r\n    public Serializable disassemble(Object value) throws HibernateException {\r\n        return (Enum) value;\r\n    }\r\n\r\n    public Object assemble(Serializable cached, Object owner) throws HibernateException {\r\n        return cached;\r\n    }\r\n\r\n    public Object replace(Object original, Object target, Object owner) throws HibernateException {\r\n        return original;\r\n    }\r\n\r\n    public Object fromXMLString(String xmlValue) {\r\n        return Enum.valueOf(enumClass, xmlValue);\r\n    }\r\n\r\n    public String objectToSQLString(Object value) {\r\n        return &#39;\\&#39;&#39; + ( (Enum) value ).name() + &#39;\\&#39;&#39;;\r\n    }\r\n\r\n    public String toXMLString(Object value) {\r\n        return ( (Enum) value ).name();\r\n    }\r\n    }\r\n\r\nEnum class:\r\n\r\n    public enum TransmissionStatusType {\r\n    accepted,\r\n    rejected,\r\n    duplicate,\r\n    exception,\r\n    retry}","title":"How to map PostgreSQL enum with JPA and Hibernate","body":"<p>I am trying to map a PostgreSQL custom type,named <code>transmission_result</code>, to a Hibernate/JPA POJO. The PostgreSQL custom type is more or less an <code>enum</code> type of string values.</p>\n<p>I have created a custom <code>EnumUserType</code> called <code>PGEnumUserType</code> as well as an <code>enum</code> class representing the PostgreSQL enumerated values. When I run this against a real database, I receive the following error:</p>\n<pre><code>'ERROR: column &quot;status&quot; is of type transmission_result but expression is of type\ncharacter varying \n  Hint: You will need to rewrite or cast the expression.\n  Position: 135 '\n</code></pre>\n<p>Upon seeing this, I figured I needed to change my <code>SqlTypes</code> to <code>Types.OTHER</code>. But doing so breaks my integration tests (using <em>HyperSQL</em> in memory DB) with the message:</p>\n<pre><code>'Caused by: java.sql.SQLException: Table not found in statement\n[select enrollment0_.&quot;id&quot; as id1_47_0_,\n enrollment0_.&quot;tpa_approval_id&quot; as tpa2_47_0_,\n enrollment0_.&quot;tpa_status_code&quot; as tpa3_47_0_,\n enrollment0_.&quot;status_message&quot; as status4_47_0_,\n enrollment0_.&quot;approval_id&quot; as approval5_47_0_,\n enrollment0_.&quot;transmission_date&quot; as transmis6_47_0_,\n enrollment0_.&quot;status&quot; as status7_47_0_,\n enrollment0_.&quot;transmitter&quot; as transmit8_47_0_\n from &quot;transmissions&quot; enrollment0_ where enrollment0_.&quot;id&quot;=?]'\n</code></pre>\n<p>I'm not sure why changing the <code>sqlType</code> results in this error. Any help is appreciated.</p>\n<p>JPA/Hibernate Entity:</p>\n<pre><code>@Entity\n@Access(javax.persistence.AccessType.PROPERTY)\n@Table(name=&quot;transmissions&quot;)\npublic class EnrollmentCycleTransmission {\n\n// elements of enum status column\nprivate static final String ACCEPTED_TRANSMISSION = &quot;accepted&quot;;\nprivate static final String REJECTED_TRANSMISSION = &quot;rejected&quot;;\nprivate static final String DUPLICATE_TRANSMISSION = &quot;duplicate&quot;;\nprivate static final String EXCEPTION_TRANSMISSION = &quot;exception&quot;;\nprivate static final String RETRY_TRANSMISSION = &quot;retry&quot;;\n\nprivate Long transmissionID;\nprivate Long approvalID;\nprivate Long transmitterID;\nprivate TransmissionStatusType transmissionStatus;\nprivate Date transmissionDate;\nprivate String TPAApprovalID;\nprivate String TPAStatusCode;\nprivate String TPAStatusMessage;\n\n\n@Column(name = &quot;id&quot;)\n@Id\n@GeneratedValue(strategy=GenerationType.AUTO)\npublic Long getTransmissionID() {\n    return transmissionID;\n}\n\npublic void setTransmissionID(Long transmissionID) {\n    this.transmissionID = transmissionID;\n}\n\n@Column(name = &quot;approval_id&quot;)\npublic Long getApprovalID() {\n    return approvalID;\n}\n\npublic void setApprovalID(Long approvalID) {\n    this.approvalID = approvalID;\n}\n\n@Column(name = &quot;transmitter&quot;)\npublic Long getTransmitterID() {\n    return transmitterID;\n}\n\npublic void setTransmitterID(Long transmitterID) {\n    this.transmitterID = transmitterID;\n}\n\n@Column(name = &quot;status&quot;)\n@Type(type = &quot;org.fuwt.model.PGEnumUserType&quot; , parameters ={@org.hibernate.annotations.Parameter(name = &quot;enumClassName&quot;,value = &quot;org.fuwt.model.enrollment.TransmissionStatusType&quot;)} )\npublic TransmissionStatusType getTransmissionStatus() {\n    return this.transmissionStatus ;\n}\n\npublic void setTransmissionStatus(TransmissionStatusType transmissionStatus) {\n    this.transmissionStatus = transmissionStatus;\n}\n\n@Column(name = &quot;transmission_date&quot;)\npublic Date getTransmissionDate() {\n    return transmissionDate;\n}\n\npublic void setTransmissionDate(Date transmissionDate) {\n    this.transmissionDate = transmissionDate;\n}\n\n@Column(name = &quot;tpa_approval_id&quot;)\npublic String getTPAApprovalID() {\n    return TPAApprovalID;\n}\n\npublic void setTPAApprovalID(String TPAApprovalID) {\n    this.TPAApprovalID = TPAApprovalID;\n}\n\n@Column(name = &quot;tpa_status_code&quot;)\npublic String getTPAStatusCode() {\n    return TPAStatusCode;\n}\n\npublic void setTPAStatusCode(String TPAStatusCode) {\n    this.TPAStatusCode = TPAStatusCode;\n}\n\n@Column(name = &quot;status_message&quot;)\npublic String getTPAStatusMessage() {\n    return TPAStatusMessage;\n}\n\npublic void setTPAStatusMessage(String TPAStatusMessage) {\n    this.TPAStatusMessage = TPAStatusMessage;\n}\n}\n</code></pre>\n<p>Custom EnumUserType:</p>\n<pre><code>public class PGEnumUserType implements UserType, ParameterizedType {\n\nprivate Class&lt;Enum&gt; enumClass;\n\npublic PGEnumUserType(){\n    super();\n}\n\npublic void setParameterValues(Properties parameters) {\n    String enumClassName = parameters.getProperty(&quot;enumClassName&quot;);\n    try {\n        enumClass = (Class&lt;Enum&gt;) Class.forName(enumClassName);\n    } catch (ClassNotFoundException e) {\n        throw new HibernateException(&quot;Enum class not found &quot;, e);\n    }\n\n}\n\npublic int[] sqlTypes() {\n    return new int[] {Types.VARCHAR};\n}\n\npublic Class returnedClass() {\n    return enumClass;\n}\n\npublic boolean equals(Object x, Object y) throws HibernateException {\n    return x==y;\n}\n\npublic int hashCode(Object x) throws HibernateException {\n    return x.hashCode();\n}\n\npublic Object nullSafeGet(ResultSet rs, String[] names, Object owner) throws HibernateException, SQLException {\n    String name = rs.getString(names[0]);\n    return rs.wasNull() ? null: Enum.valueOf(enumClass,name);\n}\n\npublic void nullSafeSet(PreparedStatement st, Object value, int index) throws HibernateException, SQLException {\n    if (value == null) {\n        st.setNull(index, Types.VARCHAR);\n    }\n    else {\n        st.setString(index,((Enum) value).name());\n    }\n}\n\npublic Object deepCopy(Object value) throws HibernateException {\n    return value;\n}\n\npublic boolean isMutable() {\n    return false;  //To change body of implemented methods use File | Settings | File Templates.\n}\n\npublic Serializable disassemble(Object value) throws HibernateException {\n    return (Enum) value;\n}\n\npublic Object assemble(Serializable cached, Object owner) throws HibernateException {\n    return cached;\n}\n\npublic Object replace(Object original, Object target, Object owner) throws HibernateException {\n    return original;\n}\n\npublic Object fromXMLString(String xmlValue) {\n    return Enum.valueOf(enumClass, xmlValue);\n}\n\npublic String objectToSQLString(Object value) {\n    return '\\'' + ( (Enum) value ).name() + '\\'';\n}\n\npublic String toXMLString(Object value) {\n    return ( (Enum) value ).name();\n}\n}\n</code></pre>\n<p>Enum class:</p>\n<pre><code>public enum TransmissionStatusType {\naccepted,\nrejected,\nduplicate,\nexception,\nretry}\n</code></pre>\n"},{"tags":["java","sql","jpa"],"comments":[{"owner":{"account_id":209503,"reputation":22790,"user_id":460557,"accept_rate":100,"display_name":"Jorge Campos"},"score":0,"creation_date":1687811576,"post_id":76560007,"comment_id":134986207,"body_markdown":"Please add on your question the relevant bits of the code. Your enum and your JPA query code. Aside that the issue is likely that you are forcing a &quot;native&quot; like query into a JPA one. When you use `&quot;FROM Article a WHERE gender=&#39;M&#39;&quot;` you are not writing a query exactly you are writing something that will be converted into a query given that it matches with the entity. So it should be something like `FROM Article a WHERE a.gender=GenderEnumName.M` (or something along these lines)","body":"Please add on your question the relevant bits of the code. Your enum and your JPA query code. Aside that the issue is likely that you are forcing a &quot;native&quot; like query into a JPA one. When you use <code>&quot;FROM Article a WHERE gender=&#39;M&#39;&quot;</code> you are not writing a query exactly you are writing something that will be converted into a query given that it matches with the entity. So it should be something like <code>FROM Article a WHERE a.gender=GenderEnumName.M</code> (or something along these lines)"}],"owner":{"account_id":3688757,"reputation":3,"user_id":16259155,"display_name":"reetscav"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687894800,"creation_date":1687810823,"question_id":76560007,"body_markdown":"In my LanguageTrainer application I have got an Entity class (&quot;Article&quot;) using an Enum (&quot;Gender&quot;) as an attribute &quot;gender&quot; (it represents the gender of the article, so it&#39;s only M for male, F for female and so on) which I map to a char(1) column (&quot;gender&quot;) in my PostgreSQL database table &quot;article&quot; with an Attribute Converter. If I select the whole dataset with the JPA TypedQuery (&quot;FROM Article a&quot;, Article.class) everything is fine, the mapping works. But how do I put the gender into a WHERE clause? (The likes of &quot;FROM Article a WHERE gender=&#39;M&#39;&quot;) Please enlighten me! When I put the character into single quotes, it tells me &quot;AttributeConverter domain-model attribute type [home_jsp.model.Gender] and JDBC type [java.lang.Character] did not match query literal type [java.lang.String]&quot;, without quotes it&#39;s &quot;Could not extract result set&quot;/&quot;Column &lt;char&gt; does not exist&quot; and with double quotes, of course, &quot;Unexpected character&quot;\r\n\r\nJPA TypedQuery with which I would like to query my Database (this.em is the EntityManager):\r\n\r\n    List&lt;Article&gt; articles = this.em.createQuery(&quot;FROM &quot; + Article.class.getSimpleName() + &quot; a WHERE gender=&#39;&quot; + Gender.FEMALE.getCode() + &quot;&#39;&quot;, Article.class).getResultList();\r\n\r\nEnum Gender:\r\n\r\n    public enum Gender {\r\n\tMALE(&#39;M&#39;), \r\n\tFEMALE(&#39;F&#39;), \r\n\tNEUTER(&#39;N&#39;), \r\n\tUNDEFINED(&#39;U&#39;);\r\n\t\r\n\tprivate final char code;\r\n\t\r\n\tprivate Gender(char code) {\r\n\t\tthis.code = code;\r\n\t}\r\n\t\r\n\tpublic static Gender fromCode(char code) {\r\n\t\tif (code == &#39;M&#39;) {\r\n\t\t\treturn MALE;\r\n\t\t} else if (code == &#39;F&#39;) {\r\n\t\t\treturn FEMALE;\r\n\t\t} else if (code == &#39;N&#39;) {\r\n\t\t\treturn NEUTER;\r\n\t\t} else if (code == &#39;U&#39;) {\r\n\t\t\treturn UNDEFINED;\r\n\t\t} else {\r\n\t\t\tthrow new IllegalArgumentException();\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic char getCode() {\r\n\t\treturn code;\r\n\t}\r\n    }\r\n\r\nAttributeConverter\r\n\r\n   \r\n\r\n     @Converter\r\n    public class GenderConverter implements AttributeConverter&lt;Gender, Character&gt; {\r\n\r\n\t@Override\r\n\tpublic Character convertToDatabaseColumn(Gender gender) {\r\n\t\tif (gender == null) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn gender.getCode();\r\n\t}\r\n\r\n\t@Override\r\n\tpublic Gender convertToEntityAttribute(Character character) {\r\n\t\tif (character == null) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn Gender.fromCode(character);\r\n\t}\r\n    }\r\n\r\nArticle class:\r\n\r\n    @Entity\r\n    @Table(name=&quot;\\&quot;article\\&quot;&quot;)\r\n    @NamedQuery(name=&quot;Article.findAll&quot;, query=&quot;SELECT a FROM Article a&quot;)\r\n    public class Article implements Serializable {\r\n\r\n\t/**\r\n\t * \r\n\t */\r\n\tprivate static final long serialVersionUID = -4674267116608531826L;\r\n\t\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\tprivate long id;\r\n\t\r\n\t//...other attributes\r\n\t\r\n\tprivate String article;\r\n\t\r\n\t@Convert(converter = home_jsp.model.GenderConverter.class)\r\n\tprivate Gender gender;\r\n    //... getter and setter\r\n    }\r\n\r\n ","title":"JPA: How to select by char type column (AttributeConversion included)?","body":"<p>In my LanguageTrainer application I have got an Entity class (&quot;Article&quot;) using an Enum (&quot;Gender&quot;) as an attribute &quot;gender&quot; (it represents the gender of the article, so it's only M for male, F for female and so on) which I map to a char(1) column (&quot;gender&quot;) in my PostgreSQL database table &quot;article&quot; with an Attribute Converter. If I select the whole dataset with the JPA TypedQuery (&quot;FROM Article a&quot;, Article.class) everything is fine, the mapping works. But how do I put the gender into a WHERE clause? (The likes of &quot;FROM Article a WHERE gender='M'&quot;) Please enlighten me! When I put the character into single quotes, it tells me &quot;AttributeConverter domain-model attribute type [home_jsp.model.Gender] and JDBC type [java.lang.Character] did not match query literal type [java.lang.String]&quot;, without quotes it's &quot;Could not extract result set&quot;/&quot;Column  does not exist&quot; and with double quotes, of course, &quot;Unexpected character&quot;</p>\n<p>JPA TypedQuery with which I would like to query my Database (this.em is the EntityManager):</p>\n<pre><code>List&lt;Article&gt; articles = this.em.createQuery(&quot;FROM &quot; + Article.class.getSimpleName() + &quot; a WHERE gender='&quot; + Gender.FEMALE.getCode() + &quot;'&quot;, Article.class).getResultList();\n</code></pre>\n<p>Enum Gender:</p>\n<pre><code>public enum Gender {\nMALE('M'), \nFEMALE('F'), \nNEUTER('N'), \nUNDEFINED('U');\n\nprivate final char code;\n\nprivate Gender(char code) {\n    this.code = code;\n}\n\npublic static Gender fromCode(char code) {\n    if (code == 'M') {\n        return MALE;\n    } else if (code == 'F') {\n        return FEMALE;\n    } else if (code == 'N') {\n        return NEUTER;\n    } else if (code == 'U') {\n        return UNDEFINED;\n    } else {\n        throw new IllegalArgumentException();\n    }\n}\n\npublic char getCode() {\n    return code;\n}\n}\n</code></pre>\n<p>AttributeConverter</p>\n<pre><code> @Converter\npublic class GenderConverter implements AttributeConverter&lt;Gender, Character&gt; {\n\n@Override\npublic Character convertToDatabaseColumn(Gender gender) {\n    if (gender == null) {\n        return null;\n    }\n    return gender.getCode();\n}\n\n@Override\npublic Gender convertToEntityAttribute(Character character) {\n    if (character == null) {\n        return null;\n    }\n    return Gender.fromCode(character);\n}\n}\n</code></pre>\n<p>Article class:</p>\n<pre><code>@Entity\n@Table(name=&quot;\\&quot;article\\&quot;&quot;)\n@NamedQuery(name=&quot;Article.findAll&quot;, query=&quot;SELECT a FROM Article a&quot;)\npublic class Article implements Serializable {\n\n/**\n * \n */\nprivate static final long serialVersionUID = -4674267116608531826L;\n\n@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\nprivate long id;\n\n//...other attributes\n\nprivate String article;\n\n@Convert(converter = home_jsp.model.GenderConverter.class)\nprivate Gender gender;\n//... getter and setter\n}\n</code></pre>\n"},{"tags":["java","postgresql","jdbc"],"comments":[{"owner":{"account_id":213468,"reputation":103489,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1687885010,"post_id":76566531,"comment_id":134998476,"body_markdown":"The [documentation](https://jdbc.postgresql.org/documentation/) states: _&quot;The current version of the driver should be compatible with PostgreSQL&#174; 8.2 and higher using the version 3.0 of the PostgreSQL&#174; protocol, and it’s compatible with Java 8 (JDBC 4.2) and above.&quot;_. Do you have any particular concerns or problems? Or are you just second guessing this blanket statement?","body":"The <a href=\"https://jdbc.postgresql.org/documentation/\" rel=\"nofollow noreferrer\">documentation</a> states: <i>&quot;The current version of the driver should be compatible with PostgreSQL&#174; 8.2 and higher using the version 3.0 of the PostgreSQL&#174; protocol, and it’s compatible with Java 8 (JDBC 4.2) and above.&quot;</i>. Do you have any particular concerns or problems? Or are you just second guessing this blanket statement?"},{"owner":{"account_id":9416033,"reputation":81,"user_id":7003746,"display_name":"Andres Benavides"},"score":0,"creation_date":1687885496,"post_id":76566531,"comment_id":134998596,"body_markdown":"I have not the current version of the driver I am using a specific version 42.2.25, I would like know if I can mantein this driver version an use the last version of postgresql 15.3","body":"I have not the current version of the driver I am using a specific version 42.2.25, I would like know if I can mantein this driver version an use the last version of postgresql 15.3"},{"owner":{"account_id":213468,"reputation":103489,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1687939138,"post_id":76566531,"comment_id":135005400,"body_markdown":"The beauty of versioning your connection protocol like PostgreSQL does, is that generally if there are new or breaking things, there would be a new protocol version, and a previous protocol version - assuming it&#39;s still supported - will work just fine (but just won&#39;t have access to the new thing that required a new protocol version). And if the old protocol version is no longer supported, you get an error informing you of that.","body":"The beauty of versioning your connection protocol like PostgreSQL does, is that generally if there are new or breaking things, there would be a new protocol version, and a previous protocol version - assuming it&#39;s still supported - will work just fine (but just won&#39;t have access to the new thing that required a new protocol version). And if the old protocol version is no longer supported, you get an error informing you of that."}],"answers":[{"tags":[],"owner":{"account_id":8633322,"reputation":218343,"user_id":6464308,"display_name":"Laurenz Albe"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1687894772,"creation_date":1687894772,"answer_id":76568113,"question_id":76566531,"body_markdown":"There is no official statement which JDBC driver version works with which PostgreSQL server version. The rule of thumb is that you should always use a driver version that was released *after* the server version. New drivers know how to speak to an old server, but not vice versa.\r\n\r\nSince you want to support the latest released version, you should use the latest driver (42.6.0 at the time of writing). 4.2.25 is comparatively old. You can try it, but you risk running into bugs, and if you do, the first thing we&#39;ll tell you is that you should upgrade. So you may as well upgrade right away.","title":"PostgreSQL JDBC Driver &#187; 42.2.25 is compatible with postgresql 15.3 DB?","body":"<p>There is no official statement which JDBC driver version works with which PostgreSQL server version. The rule of thumb is that you should always use a driver version that was released <em>after</em> the server version. New drivers know how to speak to an old server, but not vice versa.</p>\n<p>Since you want to support the latest released version, you should use the latest driver (42.6.0 at the time of writing). 4.2.25 is comparatively old. You can try it, but you risk running into bugs, and if you do, the first thing we'll tell you is that you should upgrade. So you may as well upgrade right away.</p>\n"}],"owner":{"account_id":9416033,"reputation":81,"user_id":7003746,"display_name":"Andres Benavides"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1020,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76568113,"answer_count":1,"score":1,"last_activity_date":1687894772,"creation_date":1687880367,"question_id":76566531,"body_markdown":"Nowadays I am using the version 42.2.25 of postgresql jdbc driver and I would like to know if is compatible with the postgresql version 15.3","title":"PostgreSQL JDBC Driver &#187; 42.2.25 is compatible with postgresql 15.3 DB?","body":"<p>Nowadays I am using the version 42.2.25 of postgresql jdbc driver and I would like to know if is compatible with the postgresql version 15.3</p>\n"},{"tags":["java","html","jsp","jersey"],"comments":[{"owner":{"account_id":208830,"reputation":10240,"user_id":459557,"display_name":"vanje"},"score":0,"creation_date":1485466049,"post_id":41881554,"comment_id":70948897,"body_markdown":"Hm, I cannot believe that you don&#39;t have any idea how to persist some configuration values. You say the options should be persisted to disk. Then write a file in custom format or write a properties file or write it to a database. &quot;Best strategy&quot; depends on your needs and is primarily opinion-based. If you already use a database then why not use it for the options, too?","body":"Hm, I cannot believe that you don&#39;t have any idea how to persist some configuration values. You say the options should be persisted to disk. Then write a file in custom format or write a properties file or write it to a database. &quot;Best strategy&quot; depends on your needs and is primarily opinion-based. If you already use a database then why not use it for the options, too?"},{"owner":{"account_id":221733,"reputation":36359,"user_id":479886,"accept_rate":61,"display_name":"NullPointerException"},"score":0,"creation_date":1485468695,"post_id":41881554,"comment_id":70950206,"body_markdown":"instead of telling that you can&#39;t believe me, why not to propose your best approach in an answer?","body":"instead of telling that you can&#39;t believe me, why not to propose your best approach in an answer?"},{"owner":{"account_id":208830,"reputation":10240,"user_id":459557,"display_name":"vanje"},"score":1,"creation_date":1485510608,"post_id":41881554,"comment_id":70964123,"body_markdown":"Because you are the only one who is able to decide what&#39;s best for your project. I don&#39;t know your requirements and general conditions. You have several alternatives, now it is up to you to balance pros and cons.","body":"Because you are the only one who is able to decide what&#39;s best for your project. I don&#39;t know your requirements and general conditions. You have several alternatives, now it is up to you to balance pros and cons."},{"owner":{"account_id":1434762,"reputation":22772,"user_id":1356423,"accept_rate":65,"display_name":"Alan Hay"},"score":0,"creation_date":1485540066,"post_id":41881554,"comment_id":70982755,"body_markdown":"Has someone hacked your account NPE?","body":"Has someone hacked your account NPE?"}],"answers":[{"tags":[],"owner":{"account_id":5063002,"reputation":604,"user_id":4063956,"accept_rate":45,"display_name":"Sheraz Ahmed"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1485489105,"creation_date":1485489105,"answer_id":41886702,"question_id":41881554,"body_markdown":"I think the best practice would be to keep all the conf variables in a database and set a cookie on client side if that data needs to be processed. Once operations are performed update the values on server on session end or after a certain time or data volume or at the end when all processing operations are complete.  This way you&#39;ll achieve performance, store information on something besides ram while using the RAM for shorter transaction operations ","title":"Best strategy to persist configuration variables of a JSP web aplication?","body":"<p>I think the best practice would be to keep all the conf variables in a database and set a cookie on client side if that data needs to be processed. Once operations are performed update the values on server on session end or after a certain time or data volume or at the end when all processing operations are complete.  This way you'll achieve performance, store information on something besides ram while using the RAM for shorter transaction operations </p>\n"}],"owner":{"account_id":221733,"reputation":36359,"user_id":479886,"accept_rate":61,"display_name":"NullPointerException"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":112,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1687894091,"creation_date":1485459429,"question_id":41881554,"body_markdown":"I&#39;m implementing a web application using Java (jsp). Now I&#39;m adding some configuration buttons into the application, and I need to know which is the best strategy to persist them. \r\n\r\nFor example, I need to add a switch which will tell if each 10 jobs with errors the main worker must be stopped. It is a boolean variable called &quot;safeStop&quot;. For that I need to persist if that config value is activated. This persistent value must be there even if the server is reset so it is not enough to persist it on RAM, it mus be persisted on disk.\r\n\r\nThis application will process thousands of works at day, so I need a safe and efficient way of persisting configuration.\r\n\r\nI can&#39;t find any coherent info about different strategies of doing this and which is the best option.\r\n","title":"Best strategy to persist configuration variables of a JSP web aplication?","body":"<p>I'm implementing a web application using Java (jsp). Now I'm adding some configuration buttons into the application, and I need to know which is the best strategy to persist them.</p>\n<p>For example, I need to add a switch which will tell if each 10 jobs with errors the main worker must be stopped. It is a boolean variable called &quot;safeStop&quot;. For that I need to persist if that config value is activated. This persistent value must be there even if the server is reset so it is not enough to persist it on RAM, it mus be persisted on disk.</p>\n<p>This application will process thousands of works at day, so I need a safe and efficient way of persisting configuration.</p>\n<p>I can't find any coherent info about different strategies of doing this and which is the best option.</p>\n"},{"tags":["java","xml"],"comments":[{"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":1,"creation_date":1687825945,"post_id":76560072,"comment_id":134987785,"body_markdown":"The logic is incorrect. You are not handling end events for groups at all, and a user has multiple groups.  It would help if you showed the output expected for the given input.  Note also that you may get multiple &quot;characters&quot; events for any given tag, and have to accumulate them; and also deal with non-significant whitespace.  You&#39;re probably picking up some whitespace from one of the tags after the last group.","body":"The logic is incorrect. You are not handling end events for groups at all, and a user has multiple groups.  It would help if you showed the output expected for the given input.  Note also that you may get multiple &quot;characters&quot; events for any given tag, and have to accumulate them; and also deal with non-significant whitespace.  You&#39;re probably picking up some whitespace from one of the tags after the last group."}],"answers":[{"tags":[],"owner":{"account_id":20338,"reputation":63801,"user_id":48503,"accept_rate":100,"display_name":"Luke Woodward"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687893927,"creation_date":1687893927,"answer_id":76568016,"question_id":76560072,"body_markdown":"You are not getting a null value for the groups output. You are getting a whitespace-only value instead.\r\n\r\nI modified your code to put a `&#39;` character on either side of the group name in the output, and it gave me this output:\r\n```lang-none\r\nID: 1900004323564\r\nUser Name: RODRIGO BARCAT\r\nGroup Name: &#39;\r\n&#39;\r\n-----------------------------\r\n```\r\n\r\nYour code sets `groupName` to the last element of character data encountered while `insideGroup` is true. This is from an opening `&lt;group&gt;` tag to a closing `&lt;/user&gt;` tag. This includes whitespace-only character data which occurs between tags. In this case, we get a single newline, because this is the whitespace between the empty `&lt;phone/&gt;` tag and the closing `&lt;/user&gt;` tag.\r\n\r\nHowever you are not interested in any old piece of text within the `group` element. What you are looking for is the text content of the `name` element. To do this you will need to keep track of whether you are inside this element as well as whether you are inside the `user` and `group` elements\r\n\r\nYou will need to:\r\n\r\n* Add a local variable that keeps track of whether you are inside a `name` element within a `group` element:\r\n  ```lang-java\r\n              boolean insideGroupName = false;\r\n  ```\r\n  Add this alongside the other `insideXYZ` boolean variables.\r\n\r\n* Add some handling for a `name` element within a `group` element, to set this variable to `true` in this situation:\r\n  ```lang-java\r\n                      } else if (elementName.equals(&quot;name&quot;) &amp;&amp; insideGroup) {\r\n                          insideGroupName = true;\r\n  ```\r\n  Add this to the `if`-`else if` block that handles the start of an element.\r\n\r\n* Change the handling of a characters event to only read a value into `groupName` if the new `insideGroupName` variable is true:\r\n  ```lang-java\r\n                      if (insideGroupName) {\r\n                          // Ler o nome do grupo\r\n                          groupName = reader.getText();\r\n                      }\r\n  ```\r\n\r\n* Ensure that you set `insideGroupName`, and also `insideGroup`, back to `false` when the end of the relevant elements is reached:\r\n  ```lang-java\r\n                      if (elementName.equals(&quot;name&quot;)) {\r\n                          insideGroupName = false;\r\n                      } else if (elementName.equals(&quot;group&quot;)) {\r\n                          insideGroup = false;\r\n                      }\r\n  ```\r\n  Add this to the block that handles the end of an element.\r\n\r\nI made these changes to your code, and it then gave me the following output:\r\n\r\n```lang-none\r\nID: 1900004323564\r\nUser Name: RODRIGO BARCAT\r\nGroup Name: Grupo 5\r\n-----------------------------\r\n```\r\n\r\nThis gives us a group name in the output. However, I note from the top of your question (emphasis mine) that:\r\n\r\n&gt; I&#39;m creating a class to display data from an XML, and I need to show the data of the users along with the **groups** they belong to.\r\n\r\nSo far, all we&#39;ve got is the last group name. It seems you want all of the group names.\r\n\r\nThe problem here is that there are multiple groups in your sample XML file, and every time we find a new group name, we overwrite any previous value we might have stored. To fix this, we shall use a `List&lt;String&gt;` to contain multiple group names, instead of using a single `String` value to store a single group name.\r\n\r\nReplace the line\r\n```lang-java\r\n            String groupName = &quot;&quot;;\r\n```\r\nwith \r\n```lang-java\r\n            List&lt;String&gt; groupNames = new ArrayList&lt;&gt;();\r\n```\r\nYou then need to replace the various uses of `groupName` with a suitable use of `groupNames`:\r\n\r\n* When reading character data within a group-name element: replace\r\n  ```lang-java\r\n                          groupName = reader.getText();\r\n  ```\r\n  with\r\n  ```lang-java\r\n                          groupNames.add(reader.getText());\r\n  ```\r\n* When displaying the user data read: replace\r\n  ```lang-java\r\n                          System.out.println(&quot;Group Name: &quot; + groupName);\r\n  ```\r\n  with\r\n  ```lang-java\r\n                          System.out.println(&quot;Group Names: &quot; + groupNames);\r\n  ```\r\n* When resetting the variables after displaying the user details, to prepare for another user in the file: replace\r\n  ```lang-java\r\n                          groupName = &quot;&quot;;\r\n  ```\r\n  with\r\n  ```lang-java\r\n                          groupNames.clear();\r\n  ```\r\n\r\nI made these changes to your code and it generated the following output:\r\n```lang-none\r\nID: 1900004323564\r\nUser Name: RODRIGO BARCAT\r\nGroup Names: [Grupo 1, Grupo 2, Grupo 3, Grupo 4, Grupo 5]\r\n-----------------------------\r\n```\r\nHopefully this is what you are looking for.","title":"Java class reading and writing the &lt;Group&gt; and &lt;Groups&gt; elements from an XML and always show null value","body":"<p>You are not getting a null value for the groups output. You are getting a whitespace-only value instead.</p>\n<p>I modified your code to put a <code>'</code> character on either side of the group name in the output, and it gave me this output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>ID: 1900004323564\nUser Name: RODRIGO BARCAT\nGroup Name: '\n'\n-----------------------------\n</code></pre>\n<p>Your code sets <code>groupName</code> to the last element of character data encountered while <code>insideGroup</code> is true. This is from an opening <code>&lt;group&gt;</code> tag to a closing <code>&lt;/user&gt;</code> tag. This includes whitespace-only character data which occurs between tags. In this case, we get a single newline, because this is the whitespace between the empty <code>&lt;phone/&gt;</code> tag and the closing <code>&lt;/user&gt;</code> tag.</p>\n<p>However you are not interested in any old piece of text within the <code>group</code> element. What you are looking for is the text content of the <code>name</code> element. To do this you will need to keep track of whether you are inside this element as well as whether you are inside the <code>user</code> and <code>group</code> elements</p>\n<p>You will need to:</p>\n<ul>\n<li><p>Add a local variable that keeps track of whether you are inside a <code>name</code> element within a <code>group</code> element:</p>\n<pre class=\"lang-java prettyprint-override\"><code>            boolean insideGroupName = false;\n</code></pre>\n<p>Add this alongside the other <code>insideXYZ</code> boolean variables.</p>\n</li>\n<li><p>Add some handling for a <code>name</code> element within a <code>group</code> element, to set this variable to <code>true</code> in this situation:</p>\n<pre class=\"lang-java prettyprint-override\"><code>                    } else if (elementName.equals(&quot;name&quot;) &amp;&amp; insideGroup) {\n                        insideGroupName = true;\n</code></pre>\n<p>Add this to the <code>if</code>-<code>else if</code> block that handles the start of an element.</p>\n</li>\n<li><p>Change the handling of a characters event to only read a value into <code>groupName</code> if the new <code>insideGroupName</code> variable is true:</p>\n<pre class=\"lang-java prettyprint-override\"><code>                    if (insideGroupName) {\n                        // Ler o nome do grupo\n                        groupName = reader.getText();\n                    }\n</code></pre>\n</li>\n<li><p>Ensure that you set <code>insideGroupName</code>, and also <code>insideGroup</code>, back to <code>false</code> when the end of the relevant elements is reached:</p>\n<pre class=\"lang-java prettyprint-override\"><code>                    if (elementName.equals(&quot;name&quot;)) {\n                        insideGroupName = false;\n                    } else if (elementName.equals(&quot;group&quot;)) {\n                        insideGroup = false;\n                    }\n</code></pre>\n<p>Add this to the block that handles the end of an element.</p>\n</li>\n</ul>\n<p>I made these changes to your code, and it then gave me the following output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>ID: 1900004323564\nUser Name: RODRIGO BARCAT\nGroup Name: Grupo 5\n-----------------------------\n</code></pre>\n<p>This gives us a group name in the output. However, I note from the top of your question (emphasis mine) that:</p>\n<blockquote>\n<p>I'm creating a class to display data from an XML, and I need to show the data of the users along with the <strong>groups</strong> they belong to.</p>\n</blockquote>\n<p>So far, all we've got is the last group name. It seems you want all of the group names.</p>\n<p>The problem here is that there are multiple groups in your sample XML file, and every time we find a new group name, we overwrite any previous value we might have stored. To fix this, we shall use a <code>List&lt;String&gt;</code> to contain multiple group names, instead of using a single <code>String</code> value to store a single group name.</p>\n<p>Replace the line</p>\n<pre class=\"lang-java prettyprint-override\"><code>            String groupName = &quot;&quot;;\n</code></pre>\n<p>with</p>\n<pre class=\"lang-java prettyprint-override\"><code>            List&lt;String&gt; groupNames = new ArrayList&lt;&gt;();\n</code></pre>\n<p>You then need to replace the various uses of <code>groupName</code> with a suitable use of <code>groupNames</code>:</p>\n<ul>\n<li>When reading character data within a group-name element: replace\n<pre class=\"lang-java prettyprint-override\"><code>                        groupName = reader.getText();\n</code></pre>\nwith\n<pre class=\"lang-java prettyprint-override\"><code>                        groupNames.add(reader.getText());\n</code></pre>\n</li>\n<li>When displaying the user data read: replace\n<pre class=\"lang-java prettyprint-override\"><code>                        System.out.println(&quot;Group Name: &quot; + groupName);\n</code></pre>\nwith\n<pre class=\"lang-java prettyprint-override\"><code>                        System.out.println(&quot;Group Names: &quot; + groupNames);\n</code></pre>\n</li>\n<li>When resetting the variables after displaying the user details, to prepare for another user in the file: replace\n<pre class=\"lang-java prettyprint-override\"><code>                        groupName = &quot;&quot;;\n</code></pre>\nwith\n<pre class=\"lang-java prettyprint-override\"><code>                        groupNames.clear();\n</code></pre>\n</li>\n</ul>\n<p>I made these changes to your code and it generated the following output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>ID: 1900004323564\nUser Name: RODRIGO BARCAT\nGroup Names: [Grupo 1, Grupo 2, Grupo 3, Grupo 4, Grupo 5]\n-----------------------------\n</code></pre>\n<p>Hopefully this is what you are looking for.</p>\n"}],"owner":{"account_id":5751140,"reputation":163,"user_id":4540787,"accept_rate":56,"display_name":"Barcat"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687893927,"creation_date":1687811512,"question_id":76560072,"body_markdown":"&gt; I&#39;m creating a class to display data from an XML, and I need to show the data of the users along with the groups they belong to.\r\n\r\nHere&#39;s the output I&#39;m getting:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nThe XML I&#39;m reading has the following structure, I&#39;m trying to iterate over the Name elements that are inside Groups &gt; Group.\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n     &lt;users report_date=&quot;20230620&quot;&gt;\r\n     &lt;user&gt;\r\n     &lt;id type=&quot;integer&quot;&gt;123456&lt;/id&gt;\r\n     &lt;is-active type=&quot;boolean&quot;&gt;true&lt;/is-active&gt;\r\n     &lt;roles type=&quot;integer&quot;&gt;2&lt;/roles&gt;\r\n     &lt;name&gt;RODRIGO BARCAT&lt;/name&gt;\r\n     &lt;time-zone&gt;America/Sao_Paulo&lt;/time-zone&gt;\r\n     &lt;updated-at type=&quot;dateTime&quot;&gt;2023-06-15T11:18:54-03:00&lt;/updated-at&gt;\r\n     &lt;created-at type=&quot;dateTime&quot;&gt;2021-10-19T10:37:42-03:00&lt;/created-at&gt;\r\n     &lt;external-id nil=&quot;true&quot;/&gt;\r\n     &lt;details&gt;&lt;/details&gt;\r\n     &lt;openid-url nil=&quot;true&quot;/&gt;\r\n     &lt;organization-id type=&quot;integer&quot;&gt;123456789&lt;/organization-id&gt;\r\n     &lt;notes&gt;&lt;/notes&gt;\r\n     &lt;restriction-id type=&quot;integer&quot;&gt;0&lt;/restriction-id&gt;\r\n     &lt;locale-id type=&quot;integer&quot;&gt;19&lt;/locale-id&gt;\r\n     &lt;last-login type=&quot;dateTime&quot;&gt;2023-06-15T11:18:39-03:00&lt;/last-login&gt;\r\n     &lt;current-tags&gt;TEST&lt;/current-tags&gt;\r\n     &lt;email&gt;rodrigo@test.com&lt;/email&gt;\r\n     &lt;is-verified type=&quot;boolean&quot;&gt;true&lt;/is-verified&gt;\r\n     &lt;custom-role-id type=&quot;integer&quot;&gt;1260812330129&lt;/custom-role-id&gt;\r\n     &lt;groups type=&quot;array&quot;&gt;\r\n      &lt;group&gt;\r\n      &lt;id type=&quot;integer&quot;&gt;1900004323624&lt;/id&gt;\r\n      &lt;is-active type=&quot;boolean&quot;&gt;true&lt;/is-active&gt;\r\n      &lt;name&gt;Grupo 1&lt;/name&gt;\r\n      &lt;updated-at type=&quot;dateTime&quot;&gt;2021-11-03T11:20:24-03:00&lt;/updated-at&gt;\r\n      &lt;created-at type=&quot;dateTime&quot;&gt;2021-11-03T11:20:24-03:00&lt;/created-at&gt;\r\n      &lt;description&gt;&lt;/description&gt;\r\n      &lt;is-public type=&quot;boolean&quot;&gt;true&lt;/is-public&gt;\r\n    &lt;/group&gt;\r\n    &lt;group&gt;\r\n      &lt;id type=&quot;integer&quot;&gt;5845531840667&lt;/id&gt;\r\n      &lt;is-active type=&quot;boolean&quot;&gt;true&lt;/is-active&gt;\r\n      &lt;name&gt;Grupo 2&lt;/name&gt;\r\n      &lt;updated-at type=&quot;dateTime&quot;&gt;2022-05-20T15:43:09-03:00&lt;/updated-at&gt;\r\n      &lt;created-at type=&quot;dateTime&quot;&gt;2022-05-09T12:37:24-03:00&lt;/created-at&gt;\r\n      &lt;description&gt;&lt;/description&gt;\r\n      &lt;is-public type=&quot;boolean&quot;&gt;true&lt;/is-public&gt;\r\n    &lt;/group&gt;\r\n    &lt;group&gt;\r\n      &lt;id type=&quot;integer&quot;&gt;1260814988809&lt;/id&gt;\r\n      &lt;is-active type=&quot;boolean&quot;&gt;true&lt;/is-active&gt;\r\n      &lt;name&gt;Grupo 3&lt;/name&gt;\r\n      &lt;updated-at type=&quot;dateTime&quot;&gt;2021-11-03T11:20:41-03:00&lt;/updated-at&gt;\r\n      &lt;created-at type=&quot;dateTime&quot;&gt;2021-11-03T11:20:41-03:00&lt;/created-at&gt;\r\n      &lt;description&gt;&lt;/description&gt;\r\n      &lt;is-public type=&quot;boolean&quot;&gt;true&lt;/is-public&gt;\r\n    &lt;/group&gt;\r\n    &lt;group&gt;\r\n      &lt;id type=&quot;integer&quot;&gt;6088614508699&lt;/id&gt;\r\n      &lt;is-active type=&quot;boolean&quot;&gt;true&lt;/is-active&gt;\r\n      &lt;name&gt;Grupo 4&lt;/name&gt;\r\n      &lt;updated-at type=&quot;dateTime&quot;&gt;2022-05-20T15:05:38-03:00&lt;/updated-at&gt;\r\n      &lt;created-at type=&quot;dateTime&quot;&gt;2022-05-20T15:05:38-03:00&lt;/created-at&gt;\r\n      &lt;description&gt;&lt;/description&gt;\r\n      &lt;is-public type=&quot;boolean&quot;&gt;true&lt;/is-public&gt;\r\n    &lt;/group&gt;\r\n    &lt;group&gt;\r\n      &lt;id type=&quot;integer&quot;&gt;1900004323564&lt;/id&gt;\r\n      &lt;is-active type=&quot;boolean&quot;&gt;true&lt;/is-active&gt;\r\n      &lt;name&gt;Grupo 5&lt;/name&gt;\r\n      &lt;updated-at type=&quot;dateTime&quot;&gt;2021-11-03T11:19:46-03:00&lt;/updated-at&gt;\r\n      &lt;created-at type=&quot;dateTime&quot;&gt;2021-11-03T11:19:46-03:00&lt;/created-at&gt;\r\n      &lt;description&gt;&lt;/description&gt;\r\n      &lt;is-public type=&quot;boolean&quot;&gt;true&lt;/is-public&gt;\r\n    &lt;/group&gt;\r\n    &lt;/groups&gt;\r\n    &lt;photo-url&gt;&lt;/photo-url&gt;\r\n    &lt;uses-12-hour-clock&gt;false&lt;/uses-12-hour-clock&gt;\r\n    &lt;phone/&gt;\r\n    &lt;/user&gt;\r\n    &lt;/users&gt;\r\n\r\nAnd my code is as follows.\r\n\r\n    package com.zendesk2helix.maven.zendesk2helix_jar;\r\n\r\n    import java.io.FileInputStream;\r\n    import javax.xml.stream.XMLInputFactory;\r\n    import javax.xml.stream.XMLStreamConstants;\r\n    import javax.xml.stream.XMLStreamReader;\r\n\r\n    public class Usuarios {\r\n        public static void main(String[] args) {\r\n        String xmlFilePath = &quot;/home/barcat/users.xml&quot;;\r\n\r\n        try {\r\n            // Criar um XMLInputFactory\r\n            XMLInputFactory factory = XMLInputFactory.newInstance();\r\n\r\n            // Criar um XMLStreamReader para o arquivo XML\r\n            XMLStreamReader reader = factory.createXMLStreamReader(new FileInputStream(xmlFilePath));\r\n\r\n            // Vari&#225;veis para armazenar os elementos desejados\r\n            String id = &quot;&quot;;\r\n            String userName = &quot;&quot;;\r\n            String groupName = &quot;&quot;;\r\n\r\n            // Flags para controlar em qual n&#237;vel estamos\r\n            boolean insideUser = false;\r\n            boolean insideGroup = false;\r\n\r\n            // Loop para ler os elementos do XML\r\n            while (reader.hasNext()) {\r\n                int eventType = reader.next();\r\n\r\n                if (eventType == XMLStreamConstants.START_ELEMENT) {\r\n                    String elementName = reader.getLocalName();\r\n\r\n                    // Verificar o nome do elemento\r\n                    if (elementName.equals(&quot;user&quot;)) {\r\n                        // Entrar no elemento User\r\n                        insideUser = true;\r\n                    } else if (elementName.equals(&quot;id&quot;) &amp;&amp; insideUser) {\r\n                        // Ler o ID do usu&#225;rio\r\n                        id = reader.getElementText();\r\n                    } else if (elementName.equals(&quot;name&quot;) &amp;&amp; insideUser &amp;&amp; !insideGroup) {\r\n                        // Ler o nome do usu&#225;rio\r\n                        userName = reader.getElementText();\r\n                    } else if (elementName.equals(&quot;group&quot;) &amp;&amp; insideUser) {\r\n                        // Entrar no elemento Group\r\n                        insideGroup = true;\r\n                    }\r\n                } else if (eventType == XMLStreamConstants.CHARACTERS) {\r\n                    if (insideGroup) {\r\n                        // Ler o nome do grupo\r\n                        groupName = reader.getText();\r\n                    }\r\n                } else if (eventType == XMLStreamConstants.END_ELEMENT) {\r\n                    String elementName = reader.getLocalName();\r\n\r\n                    // Verificar o nome do elemento final\r\n                    if (elementName.equals(&quot;user&quot;)) {\r\n                        // Exibir os elementos lidos\r\n                        System.out.println(&quot;ID: &quot; + id);\r\n                        System.out.println(&quot;User Name: &quot; + userName);\r\n                        System.out.println(&quot;Group Name: &quot; + groupName);\r\n                        System.out.println(&quot;-----------------------------&quot;);\r\n\r\n                        // Limpar as vari&#225;veis para o pr&#243;ximo usu&#225;rio\r\n                        id = &quot;&quot;;\r\n                        userName = &quot;&quot;;\r\n                        groupName = &quot;&quot;;\r\n\r\n                        // Resetar as flags\r\n                        insideUser = false;\r\n                        insideGroup = false;\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Fechar o XMLStreamReader\r\n            reader.close();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n      }\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/co9ey.png","title":"Java class reading and writing the &lt;Group&gt; and &lt;Groups&gt; elements from an XML and always show null value","body":"<blockquote>\n<p>I'm creating a class to display data from an XML, and I need to show the data of the users along with the groups they belong to.</p>\n</blockquote>\n<p>Here's the output I'm getting:</p>\n<p><a href=\"https://i.stack.imgur.com/co9ey.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/co9ey.png\" alt=\"enter image description here\" /></a></p>\n<p>The XML I'm reading has the following structure, I'm trying to iterate over the Name elements that are inside Groups &gt; Group.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n &lt;users report_date=&quot;20230620&quot;&gt;\n &lt;user&gt;\n &lt;id type=&quot;integer&quot;&gt;123456&lt;/id&gt;\n &lt;is-active type=&quot;boolean&quot;&gt;true&lt;/is-active&gt;\n &lt;roles type=&quot;integer&quot;&gt;2&lt;/roles&gt;\n &lt;name&gt;RODRIGO BARCAT&lt;/name&gt;\n &lt;time-zone&gt;America/Sao_Paulo&lt;/time-zone&gt;\n &lt;updated-at type=&quot;dateTime&quot;&gt;2023-06-15T11:18:54-03:00&lt;/updated-at&gt;\n &lt;created-at type=&quot;dateTime&quot;&gt;2021-10-19T10:37:42-03:00&lt;/created-at&gt;\n &lt;external-id nil=&quot;true&quot;/&gt;\n &lt;details&gt;&lt;/details&gt;\n &lt;openid-url nil=&quot;true&quot;/&gt;\n &lt;organization-id type=&quot;integer&quot;&gt;123456789&lt;/organization-id&gt;\n &lt;notes&gt;&lt;/notes&gt;\n &lt;restriction-id type=&quot;integer&quot;&gt;0&lt;/restriction-id&gt;\n &lt;locale-id type=&quot;integer&quot;&gt;19&lt;/locale-id&gt;\n &lt;last-login type=&quot;dateTime&quot;&gt;2023-06-15T11:18:39-03:00&lt;/last-login&gt;\n &lt;current-tags&gt;TEST&lt;/current-tags&gt;\n &lt;email&gt;rodrigo@test.com&lt;/email&gt;\n &lt;is-verified type=&quot;boolean&quot;&gt;true&lt;/is-verified&gt;\n &lt;custom-role-id type=&quot;integer&quot;&gt;1260812330129&lt;/custom-role-id&gt;\n &lt;groups type=&quot;array&quot;&gt;\n  &lt;group&gt;\n  &lt;id type=&quot;integer&quot;&gt;1900004323624&lt;/id&gt;\n  &lt;is-active type=&quot;boolean&quot;&gt;true&lt;/is-active&gt;\n  &lt;name&gt;Grupo 1&lt;/name&gt;\n  &lt;updated-at type=&quot;dateTime&quot;&gt;2021-11-03T11:20:24-03:00&lt;/updated-at&gt;\n  &lt;created-at type=&quot;dateTime&quot;&gt;2021-11-03T11:20:24-03:00&lt;/created-at&gt;\n  &lt;description&gt;&lt;/description&gt;\n  &lt;is-public type=&quot;boolean&quot;&gt;true&lt;/is-public&gt;\n&lt;/group&gt;\n&lt;group&gt;\n  &lt;id type=&quot;integer&quot;&gt;5845531840667&lt;/id&gt;\n  &lt;is-active type=&quot;boolean&quot;&gt;true&lt;/is-active&gt;\n  &lt;name&gt;Grupo 2&lt;/name&gt;\n  &lt;updated-at type=&quot;dateTime&quot;&gt;2022-05-20T15:43:09-03:00&lt;/updated-at&gt;\n  &lt;created-at type=&quot;dateTime&quot;&gt;2022-05-09T12:37:24-03:00&lt;/created-at&gt;\n  &lt;description&gt;&lt;/description&gt;\n  &lt;is-public type=&quot;boolean&quot;&gt;true&lt;/is-public&gt;\n&lt;/group&gt;\n&lt;group&gt;\n  &lt;id type=&quot;integer&quot;&gt;1260814988809&lt;/id&gt;\n  &lt;is-active type=&quot;boolean&quot;&gt;true&lt;/is-active&gt;\n  &lt;name&gt;Grupo 3&lt;/name&gt;\n  &lt;updated-at type=&quot;dateTime&quot;&gt;2021-11-03T11:20:41-03:00&lt;/updated-at&gt;\n  &lt;created-at type=&quot;dateTime&quot;&gt;2021-11-03T11:20:41-03:00&lt;/created-at&gt;\n  &lt;description&gt;&lt;/description&gt;\n  &lt;is-public type=&quot;boolean&quot;&gt;true&lt;/is-public&gt;\n&lt;/group&gt;\n&lt;group&gt;\n  &lt;id type=&quot;integer&quot;&gt;6088614508699&lt;/id&gt;\n  &lt;is-active type=&quot;boolean&quot;&gt;true&lt;/is-active&gt;\n  &lt;name&gt;Grupo 4&lt;/name&gt;\n  &lt;updated-at type=&quot;dateTime&quot;&gt;2022-05-20T15:05:38-03:00&lt;/updated-at&gt;\n  &lt;created-at type=&quot;dateTime&quot;&gt;2022-05-20T15:05:38-03:00&lt;/created-at&gt;\n  &lt;description&gt;&lt;/description&gt;\n  &lt;is-public type=&quot;boolean&quot;&gt;true&lt;/is-public&gt;\n&lt;/group&gt;\n&lt;group&gt;\n  &lt;id type=&quot;integer&quot;&gt;1900004323564&lt;/id&gt;\n  &lt;is-active type=&quot;boolean&quot;&gt;true&lt;/is-active&gt;\n  &lt;name&gt;Grupo 5&lt;/name&gt;\n  &lt;updated-at type=&quot;dateTime&quot;&gt;2021-11-03T11:19:46-03:00&lt;/updated-at&gt;\n  &lt;created-at type=&quot;dateTime&quot;&gt;2021-11-03T11:19:46-03:00&lt;/created-at&gt;\n  &lt;description&gt;&lt;/description&gt;\n  &lt;is-public type=&quot;boolean&quot;&gt;true&lt;/is-public&gt;\n&lt;/group&gt;\n&lt;/groups&gt;\n&lt;photo-url&gt;&lt;/photo-url&gt;\n&lt;uses-12-hour-clock&gt;false&lt;/uses-12-hour-clock&gt;\n&lt;phone/&gt;\n&lt;/user&gt;\n&lt;/users&gt;\n</code></pre>\n<p>And my code is as follows.</p>\n<pre><code>package com.zendesk2helix.maven.zendesk2helix_jar;\n\nimport java.io.FileInputStream;\nimport javax.xml.stream.XMLInputFactory;\nimport javax.xml.stream.XMLStreamConstants;\nimport javax.xml.stream.XMLStreamReader;\n\npublic class Usuarios {\n    public static void main(String[] args) {\n    String xmlFilePath = &quot;/home/barcat/users.xml&quot;;\n\n    try {\n        // Criar um XMLInputFactory\n        XMLInputFactory factory = XMLInputFactory.newInstance();\n\n        // Criar um XMLStreamReader para o arquivo XML\n        XMLStreamReader reader = factory.createXMLStreamReader(new FileInputStream(xmlFilePath));\n\n        // Variáveis para armazenar os elementos desejados\n        String id = &quot;&quot;;\n        String userName = &quot;&quot;;\n        String groupName = &quot;&quot;;\n\n        // Flags para controlar em qual nível estamos\n        boolean insideUser = false;\n        boolean insideGroup = false;\n\n        // Loop para ler os elementos do XML\n        while (reader.hasNext()) {\n            int eventType = reader.next();\n\n            if (eventType == XMLStreamConstants.START_ELEMENT) {\n                String elementName = reader.getLocalName();\n\n                // Verificar o nome do elemento\n                if (elementName.equals(&quot;user&quot;)) {\n                    // Entrar no elemento User\n                    insideUser = true;\n                } else if (elementName.equals(&quot;id&quot;) &amp;&amp; insideUser) {\n                    // Ler o ID do usuário\n                    id = reader.getElementText();\n                } else if (elementName.equals(&quot;name&quot;) &amp;&amp; insideUser &amp;&amp; !insideGroup) {\n                    // Ler o nome do usuário\n                    userName = reader.getElementText();\n                } else if (elementName.equals(&quot;group&quot;) &amp;&amp; insideUser) {\n                    // Entrar no elemento Group\n                    insideGroup = true;\n                }\n            } else if (eventType == XMLStreamConstants.CHARACTERS) {\n                if (insideGroup) {\n                    // Ler o nome do grupo\n                    groupName = reader.getText();\n                }\n            } else if (eventType == XMLStreamConstants.END_ELEMENT) {\n                String elementName = reader.getLocalName();\n\n                // Verificar o nome do elemento final\n                if (elementName.equals(&quot;user&quot;)) {\n                    // Exibir os elementos lidos\n                    System.out.println(&quot;ID: &quot; + id);\n                    System.out.println(&quot;User Name: &quot; + userName);\n                    System.out.println(&quot;Group Name: &quot; + groupName);\n                    System.out.println(&quot;-----------------------------&quot;);\n\n                    // Limpar as variáveis para o próximo usuário\n                    id = &quot;&quot;;\n                    userName = &quot;&quot;;\n                    groupName = &quot;&quot;;\n\n                    // Resetar as flags\n                    insideUser = false;\n                    insideGroup = false;\n                }\n            }\n        }\n\n        // Fechar o XMLStreamReader\n        reader.close();\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n  }\n}\n</code></pre>\n"},{"tags":["java","oop","package"],"comments":[{"owner":{"account_id":39574,"reputation":24267,"user_id":114226,"accept_rate":79,"display_name":"PeterMmm"},"score":1,"creation_date":1687606453,"post_id":76545525,"comment_id":134962317,"body_markdown":"Probably with a Worker and Machine interface and some factory in each package, that can be static methods in the interfaces.","body":"Probably with a Worker and Machine interface and some factory in each package, that can be static methods in the interfaces."},{"owner":{"account_id":1455702,"reputation":15662,"user_id":1371329,"accept_rate":64,"display_name":"jaco0646"},"score":1,"creation_date":1687616212,"post_id":76545525,"comment_id":134963348,"body_markdown":"Have  you investigated the [JPMS](https://www.infoworld.com/article/3543253/what-is-jpms-introducing-the-java-platform-module-system.html)?","body":"Have  you investigated the <a href=\"https://www.infoworld.com/article/3543253/what-is-jpms-introducing-the-java-platform-module-system.html\" rel=\"nofollow noreferrer\">JPMS</a>?"}],"answers":[{"tags":[],"owner":{"account_id":4589753,"reputation":69926,"user_id":3723423,"accept_rate":50,"display_name":"Christophe"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1687691841,"creation_date":1687691841,"answer_id":76550137,"question_id":76545525,"body_markdown":"One way to to solve this is to use the [factory design pattern][1]:  a factory class in the `machine` package would create instances of `AbstractMachine`. Another factory in the `worker` package would create instances of the `AbstractWorker`:     \r\n\r\n* The factory and the abstract classes would be public. Only the factory classes would know the different specialisations of the abstract class. \r\n* The `CoffePlace` would only need to know the abstract classes and the factories.    \r\n* The remaining classes can be kept non-public at package level, i.e. [not visible across the different branches and sub-bbranches][2] of your hierarchical presentation.  \r\n\r\nIf the `CoffeePlace` needs to know more about an `OrangeJuiceMachine` than the interface provided by `AbstractMachine`, then, you are not really abstracting the machines; The design could benefit from some improvements, such as for example considering the use of the [Entity System Component][3] pattern to favour [composition over inheritance][4].  \r\n\r\nOf course, `public` is `public`. So the factories and the abstract classes could still be hijacked.  But what leaks is significantly reduced.   \r\n\r\n    \r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Factory_method_pattern\r\n  [2]: https://stackoverflow.com/q/2489096/3723423\r\n  [3]: https://en.wikipedia.org/wiki/Entity_component_system\r\n  [4]: https://en.wikipedia.org/wiki/Composition_over_inheritance","title":"One class using all other classes package organization","body":"<p>One way to to solve this is to use the <a href=\"https://en.wikipedia.org/wiki/Factory_method_pattern\" rel=\"nofollow noreferrer\">factory design pattern</a>:  a factory class in the <code>machine</code> package would create instances of <code>AbstractMachine</code>. Another factory in the <code>worker</code> package would create instances of the <code>AbstractWorker</code>:</p>\n<ul>\n<li>The factory and the abstract classes would be public. Only the factory classes would know the different specialisations of the abstract class.</li>\n<li>The <code>CoffePlace</code> would only need to know the abstract classes and the factories.</li>\n<li>The remaining classes can be kept non-public at package level, i.e. <a href=\"https://stackoverflow.com/q/2489096/3723423\">not visible across the different branches and sub-bbranches</a> of your hierarchical presentation.</li>\n</ul>\n<p>If the <code>CoffeePlace</code> needs to know more about an <code>OrangeJuiceMachine</code> than the interface provided by <code>AbstractMachine</code>, then, you are not really abstracting the machines; The design could benefit from some improvements, such as for example considering the use of the <a href=\"https://en.wikipedia.org/wiki/Entity_component_system\" rel=\"nofollow noreferrer\">Entity System Component</a> pattern to favour <a href=\"https://en.wikipedia.org/wiki/Composition_over_inheritance\" rel=\"nofollow noreferrer\">composition over inheritance</a>.</p>\n<p>Of course, <code>public</code> is <code>public</code>. So the factories and the abstract classes could still be hijacked.  But what leaks is significantly reduced.</p>\n"}],"owner":{"account_id":27469504,"reputation":23,"user_id":20958695,"display_name":"user20958695"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76550137,"answer_count":1,"score":1,"last_activity_date":1687893833,"creation_date":1687601230,"question_id":76545525,"body_markdown":"I&#39;m writing a Java project where I have a main class and many other classes. The main class uses all the other classes and the other classes can be divided to logical groups.\r\n\r\nThe structure is something like this:\r\n\r\n- CoffeePlace\r\n- AbstractWorker\r\n- BaristaWorker\r\n- DishWasherWorker\r\n- CashierWorker\r\n- AbstractMachine\r\n- CoffeeMachine\r\n- OrangeJuiceMachine\r\n- IceCreamMachine\r\n\r\nNaturally I would divide them as:\r\n\r\n- coffeeplace (package)\r\n    - CoffeePlace\r\n    - worker (package)\r\n        - AbstractWorker\r\n        - BaristaWorker\r\n        - DishWasherWorker\r\n        - CashierWorker\r\n    - machine (package)\r\n        - AbstractMachine\r\n        - CoffeeMachine\r\n        - OrangeJuiceMachine\r\n        - IceCreamMachine\r\n\r\n\r\nThere is a problem with this design, the CoffeePlace class needs to know all the other classes located in the sub packages, and the only way they can be seen by CoffeePlace is to make all their interface methods public, but now IceCreamMachine can call BaristraWorker methods which seem to not make sense and break the encapsulation.\r\n\r\nIs it possible to organize these classes in packages making the machines and workers only visible to the main class and not to each other?","title":"One class using all other classes package organization","body":"<p>I'm writing a Java project where I have a main class and many other classes. The main class uses all the other classes and the other classes can be divided to logical groups.</p>\n<p>The structure is something like this:</p>\n<ul>\n<li>CoffeePlace</li>\n<li>AbstractWorker</li>\n<li>BaristaWorker</li>\n<li>DishWasherWorker</li>\n<li>CashierWorker</li>\n<li>AbstractMachine</li>\n<li>CoffeeMachine</li>\n<li>OrangeJuiceMachine</li>\n<li>IceCreamMachine</li>\n</ul>\n<p>Naturally I would divide them as:</p>\n<ul>\n<li>coffeeplace (package)\n<ul>\n<li>CoffeePlace</li>\n<li>worker (package)\n<ul>\n<li>AbstractWorker</li>\n<li>BaristaWorker</li>\n<li>DishWasherWorker</li>\n<li>CashierWorker</li>\n</ul>\n</li>\n<li>machine (package)\n<ul>\n<li>AbstractMachine</li>\n<li>CoffeeMachine</li>\n<li>OrangeJuiceMachine</li>\n<li>IceCreamMachine</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p>There is a problem with this design, the CoffeePlace class needs to know all the other classes located in the sub packages, and the only way they can be seen by CoffeePlace is to make all their interface methods public, but now IceCreamMachine can call BaristraWorker methods which seem to not make sense and break the encapsulation.</p>\n<p>Is it possible to organize these classes in packages making the machines and workers only visible to the main class and not to each other?</p>\n"},{"tags":["java","aws-sdk","aws-sdk-java-2.0","aws-credentials","aws-sdk-java"],"owner":{"account_id":24509146,"reputation":1,"user_id":22141093,"display_name":"A.D."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":178,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687893141,"creation_date":1687893141,"question_id":76567938,"body_markdown":"I have a situation where I need to take a Java application that currently uses Basic auth to access OpenSearch, and add the ability for a user to provide a Cognito user-pool user/pass instead of the Basic user/pass.\r\n\r\nIt appears that the way to do this transparently (i.e. with raw requests, rather than using the OpenSearch Java client/library) is by taking the arbitrary requests and pre-signing them, in cases when Basic auth is not used.\r\n\r\nI&#39;ve figured out how to negotiate the Cognito user-pool user/pass into `Credentials` using the AWS Java SDK, and confirmed that I can sign `curl` requests with the `--aws-sigv4` option, but I&#39;m at a loss as to how to incorporate signing (with [`Aws4Signer.presign()`](https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/auth/signer/internal/BaseAws4Signer.html#presign(software.amazon.awssdk.http.SdkHttpFullRequest,software.amazon.awssdk.auth.signer.params.Aws4PresignerParams)) ?) \r\n\r\nEssentially what I&#39;m trying for is a Java SDK 2.0 equivalent to a curl call like \r\n\r\n```bash\r\ncurl \\\r\n--aws-sigv4 &quot;aws:amz:us-west-2:es&quot; \\\r\n--user &quot;$ACCESS_KEY_ID&quot;:&quot;$SECRET_KEY&quot; \\\r\n--header &quot;x-amz-security-token: ${SESSION_TOKEN}&quot;  \\\r\nhttps://some-opensearch-host.us-west-2.es.amazonaws.com/_search\r\n```\r\n\r\nwhere the variable values are provided by the `Credentials` object.\r\n\r\nI might just be bad at reading Java docs (or the AWS SDK docs) because, taking `Aws4Signer.presign()` as an example, I have no idea where/how to get the information about `ExecutionAttributes` that would allow me to use them (and thus, `presign()`) correctly.","title":"How can you pre-sign requests to AWS with credentials using the AWS Java SDK?","body":"<p>I have a situation where I need to take a Java application that currently uses Basic auth to access OpenSearch, and add the ability for a user to provide a Cognito user-pool user/pass instead of the Basic user/pass.</p>\n<p>It appears that the way to do this transparently (i.e. with raw requests, rather than using the OpenSearch Java client/library) is by taking the arbitrary requests and pre-signing them, in cases when Basic auth is not used.</p>\n<p>I've figured out how to negotiate the Cognito user-pool user/pass into <code>Credentials</code> using the AWS Java SDK, and confirmed that I can sign <code>curl</code> requests with the <code>--aws-sigv4</code> option, but I'm at a loss as to how to incorporate signing (with <a href=\"https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/auth/signer/internal/BaseAws4Signer.html#presign(software.amazon.awssdk.http.SdkHttpFullRequest,software.amazon.awssdk.auth.signer.params.Aws4PresignerParams)\" rel=\"nofollow noreferrer\"><code>Aws4Signer.presign()</code></a> ?)</p>\n<p>Essentially what I'm trying for is a Java SDK 2.0 equivalent to a curl call like</p>\n<pre class=\"lang-bash prettyprint-override\"><code>curl \\\n--aws-sigv4 &quot;aws:amz:us-west-2:es&quot; \\\n--user &quot;$ACCESS_KEY_ID&quot;:&quot;$SECRET_KEY&quot; \\\n--header &quot;x-amz-security-token: ${SESSION_TOKEN}&quot;  \\\nhttps://some-opensearch-host.us-west-2.es.amazonaws.com/_search\n</code></pre>\n<p>where the variable values are provided by the <code>Credentials</code> object.</p>\n<p>I might just be bad at reading Java docs (or the AWS SDK docs) because, taking <code>Aws4Signer.presign()</code> as an example, I have no idea where/how to get the information about <code>ExecutionAttributes</code> that would allow me to use them (and thus, <code>presign()</code>) correctly.</p>\n"},{"tags":["java","spring","spring-boot","service","autowired"],"comments":[{"owner":{"account_id":16669822,"reputation":379,"user_id":12047586,"display_name":"Imaguest"},"score":1,"creation_date":1583944084,"post_id":60640415,"comment_id":107284905,"body_markdown":"Not sure that a default `PasswordEncoder` bean is provided by spring framework. You probably have to provide a bean to specify which `PasswordEncoder` implementation you want to use (`BCryptPasswordEncoder` f.ex.) example [here](https://www.baeldung.com/spring-security-registration-password-encoding-bcrypt)","body":"Not sure that a default <code>PasswordEncoder</code> bean is provided by spring framework. You probably have to provide a bean to specify which <code>PasswordEncoder</code> implementation you want to use (<code>BCryptPasswordEncoder</code> f.ex.) example <a href=\"https://www.baeldung.com/spring-security-registration-password-encoding-bcrypt\" rel=\"nofollow noreferrer\">here</a>"},{"owner":{"account_id":16706937,"reputation":31,"user_id":12075218,"display_name":"Jongwon"},"score":0,"creation_date":1583945669,"post_id":60640415,"comment_id":107285772,"body_markdown":"thank u for ur help! I forgot the 2. Define the Password Encoder part.","body":"thank u for ur help! I forgot the 2. Define the Password Encoder part."}],"answers":[{"tags":[],"owner":{"account_id":1538895,"reputation":320,"user_id":1434072,"display_name":"Thomas__"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1583944183,"creation_date":1583944183,"answer_id":60640589,"question_id":60640415,"body_markdown":"Error message shows there is no bean for `org.springframework.security.crypto.password.PasswordEncoder`, which means you haven&#39;t defined it anywhere.\r\n\r\nYou would need something like:\r\n\r\n```\r\n@Bean\r\n    public PasswordEncoder passwordEncoder() {\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n```\r\n   \r\nIn your configuration (if configuration through Java)","title":"Unsatisfied dependency expressed through constructor in SpringBoot","body":"<p>Error message shows there is no bean for <code>org.springframework.security.crypto.password.PasswordEncoder</code>, which means you haven't defined it anywhere.</p>\n\n<p>You would need something like:</p>\n\n<pre><code>@Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n</code></pre>\n\n<p>In your configuration (if configuration through Java)</p>\n"}],"owner":{"account_id":16706937,"reputation":31,"user_id":12075218,"display_name":"Jongwon"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4755,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":60640589,"answer_count":1,"score":0,"last_activity_date":1687893001,"creation_date":1583943609,"question_id":60640415,"body_markdown":"hi guys my springboot version is &#39;2.2.4.RELEASE&#39;.&lt;br/&gt;\r\nI wanna autowire 2 parameter in constructor. but it doesn&#39;t working.&lt;br/&gt;\r\nMabye i think &#39;passwordEncoder&#39; has a problem...&lt;br/&gt;\r\n&lt;br/&gt;\r\nhere is &#39;UserService.java&#39; code.&lt;br/&gt;\r\n\r\n \r\n    import kr.co.loosie.foody.domain.User;\r\n    import kr.co.loosie.foody.domain.UserRepository;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.security.crypto.password.PasswordEncoder;\r\n    import org.springframework.stereotype.Service;\r\n\r\n    import javax.transaction.Transactional;\r\n    import java.util.Optional;\r\n\r\n    @Service\r\n    @Transactional\r\n    public class UserService {\r\n\r\n        private UserRepository userRepository;\r\n        private PasswordEncoder passwordEncoder;\r\n\r\n        @Autowired\r\n        public UserService(UserRepository userRepository, PasswordEncoder passwordEncoder) {\r\n            this.userRepository = userRepository;\r\n            this.passwordEncoder = passwordEncoder;\r\n        }\r\n\r\n        public User registerUser(String email, String name, String password) {\r\n            Optional&lt;User&gt; existed = userRepository.findByEmail(email);\r\n            if (existed.isPresent()) {\r\n                throw new EmailExistedException(email);\r\n            }\r\n\r\n            String encodedPassword = passwordEncoder.encode(password);\r\n\r\n            User user = User.builder()\r\n                .email(email)\r\n                .name(name)\r\n                .password(encodedPassword)\r\n                .level(1L)\r\n                .build();\r\n            return userRepository.save(user);\r\n        }\r\n\r\n        public User authenticate(String email, String password) {\r\n            User user = userRepository.findByEmail(email)\r\n                    .orElseThrow(() -&gt; new EmailNotExistedException(email));\r\n\r\n            if (!passwordEncoder.matches(password, user.getPassword())) {\r\n                throw new PasswordWrongException();\r\n            }\r\n\r\n            return user;\r\n          }\r\n    }\r\n\r\nthe error part is here.&lt;br/&gt;\r\n\r\n    @Autowired\r\n    public UserService(UserRepository userRepository, PasswordEncoder passwordEncoder) {\r\n        this.userRepository = userRepository;\r\n        this.passwordEncoder = passwordEncoder;\r\n    }\r\n\r\nit&#39;s worked when i used only UserReposiotory to get autowired&lt;br/&gt;\r\nbut I put the **PasswordEncoder passwordEncoder** line , it&#39;s not worked.\r\nplz give me some help!\r\n\r\nthis is warning message\r\n\r\n    Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with         \r\n    name &#39;userService&#39; defined in file [D:\\CCC\\intellij_ex\\foody\\foody-customer- \r\n    api\\build\\classes\\java\\main\\kr\\co\\loosie\\foody\\application\\UserService.class]: Unsatisfied dependency \r\n    expressed through constructor parameter 1; nested exception is \r\n    org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type \r\n    &#39;org.springframework.security.crypto.password.PasswordEncoder&#39; available: expected at least 1 bean \r\n    which qualifies as autowire candidate. Dependency annotations: {}\r\n\r\nplz give me some help!\r\n","title":"Unsatisfied dependency expressed through constructor in SpringBoot","body":"<p>hi guys my springboot version is '2.2.4.RELEASE'.<br/>\nI wanna autowire 2 parameter in constructor. but it doesn't working.<br/>\nMabye i think 'passwordEncoder' has a problem...<br/>\n<br/>\nhere is 'UserService.java' code.<br/></p>\n<pre><code>import kr.co.loosie.foody.domain.User;\nimport kr.co.loosie.foody.domain.UserRepository;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.springframework.stereotype.Service;\n\nimport javax.transaction.Transactional;\nimport java.util.Optional;\n\n@Service\n@Transactional\npublic class UserService {\n\n    private UserRepository userRepository;\n    private PasswordEncoder passwordEncoder;\n\n    @Autowired\n    public UserService(UserRepository userRepository, PasswordEncoder passwordEncoder) {\n        this.userRepository = userRepository;\n        this.passwordEncoder = passwordEncoder;\n    }\n\n    public User registerUser(String email, String name, String password) {\n        Optional&lt;User&gt; existed = userRepository.findByEmail(email);\n        if (existed.isPresent()) {\n            throw new EmailExistedException(email);\n        }\n\n        String encodedPassword = passwordEncoder.encode(password);\n\n        User user = User.builder()\n            .email(email)\n            .name(name)\n            .password(encodedPassword)\n            .level(1L)\n            .build();\n        return userRepository.save(user);\n    }\n\n    public User authenticate(String email, String password) {\n        User user = userRepository.findByEmail(email)\n                .orElseThrow(() -&gt; new EmailNotExistedException(email));\n\n        if (!passwordEncoder.matches(password, user.getPassword())) {\n            throw new PasswordWrongException();\n        }\n\n        return user;\n      }\n}\n</code></pre>\n<p>the error part is here.<br/></p>\n<pre><code>@Autowired\npublic UserService(UserRepository userRepository, PasswordEncoder passwordEncoder) {\n    this.userRepository = userRepository;\n    this.passwordEncoder = passwordEncoder;\n}\n</code></pre>\n<p>it's worked when i used only UserReposiotory to get autowired<br/>\nbut I put the <strong>PasswordEncoder passwordEncoder</strong> line , it's not worked.\nplz give me some help!</p>\n<p>this is warning message</p>\n<pre><code>Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with         \nname 'userService' defined in file [D:\\CCC\\intellij_ex\\foody\\foody-customer- \napi\\build\\classes\\java\\main\\kr\\co\\loosie\\foody\\application\\UserService.class]: Unsatisfied dependency \nexpressed through constructor parameter 1; nested exception is \norg.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type \n'org.springframework.security.crypto.password.PasswordEncoder' available: expected at least 1 bean \nwhich qualifies as autowire candidate. Dependency annotations: {}\n</code></pre>\n<p>plz give me some help!</p>\n"},{"tags":["java","spring","spring-boot","java.nio.file"],"comments":[{"owner":{"account_id":3970780,"reputation":2667,"user_id":3275441,"accept_rate":75,"display_name":"Milgo"},"score":1,"creation_date":1601299490,"post_id":64103019,"comment_id":113355911,"body_markdown":"Please add the complete exception message with its stack trace.","body":"Please add the complete exception message with its stack trace."},{"owner":{"account_id":12688883,"reputation":21,"user_id":12396858,"display_name":"stickyy"},"score":0,"creation_date":1601300257,"post_id":64103019,"comment_id":113356335,"body_markdown":"@Milgo added the complete exception message","body":"@Milgo added the complete exception message"}],"answers":[{"tags":[],"owner":{"account_id":3970780,"reputation":2667,"user_id":3275441,"accept_rate":75,"display_name":"Milgo"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1687892787,"creation_date":1601301239,"answer_id":64103605,"question_id":64103019,"body_markdown":"You chose the `newFileSystem()` method with a class object as second parameter. This second parameter must be a class of an file systems provider which is not in this case. Please just use something like:\r\n\r\n    @Bean\r\n    public FileSystem fileSystem() {\r\n        Path path = Paths.get(URI.create(&quot;file:/C:/Users/home/Desktop/mydir&quot;));\r\n        final URI uri = URI.create(&quot;file:&quot; + path.toUri().getPath());\r\n        FileSystem ext2fs = FileSystems.getFileSystem(uri);\r\n\r\n        return ext2fs;\r\n    }","title":"java.nio.file.ProviderNotFoundException: Provider not found","body":"<p>You chose the <code>newFileSystem()</code> method with a class object as second parameter. This second parameter must be a class of an file systems provider which is not in this case. Please just use something like:</p>\n<pre><code>@Bean\npublic FileSystem fileSystem() {\n    Path path = Paths.get(URI.create(&quot;file:/C:/Users/home/Desktop/mydir&quot;));\n    final URI uri = URI.create(&quot;file:&quot; + path.toUri().getPath());\n    FileSystem ext2fs = FileSystems.getFileSystem(uri);\n\n    return ext2fs;\n}\n</code></pre>\n"}],"owner":{"account_id":12688883,"reputation":21,"user_id":12396858,"display_name":"stickyy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4970,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1687892787,"creation_date":1601299226,"question_id":64103019,"body_markdown":"I&#180;ve got this exception provider not found, but don&#180;t know how to solve it. Here is my code:\r\n\r\n   \r\n\r\n     @Bean\r\n        public FileSystem fileSystem() {\r\n    \t\ttry {\r\n    \t\t\tPath path = Paths.get(&quot;C:/Users/home/Desktop/mydir&quot;);\r\n    \t\t\tFileSystem ext2fs = FileSystems.newFileSystem(path, Thread.currentThread().getContextClassLoader());\r\n    \t    \t\r\n    \t        return ext2fs;\r\n    \t\t} catch (IOException e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t\treturn null;\r\n    \t\t}\r\n        }\r\n\r\nDoes anyone know what could be the problem and how to solve it.\r\nThe idea is that i have this bean for filesystem, which i will later use for crud operation, but this bean is because if i later want to change storage that it would be easily just changed in this bean, for example if i want to use google as storage instead of local storage or something like that just set it up in this method. I&#180;m using Spring Boot 2.3.3\r\n\r\n**Update - complete exception**\r\n\r\n    org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;fileSystem&#39; defined in class path resource [Config.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [java.nio.file.FileSystem]: Factory method &#39;fileSystem&#39; threw exception; nested exception is java.nio.file.ProviderNotFoundException: Provider not found\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:655) ~[spring-beans-5.2.8.RELEASE.jar:5.2.8.RELEASE]\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:483) ~[spring-beans-5.2.8.RELEASE.jar:5.2.8.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1336) ~[spring-beans-5.2.8.RELEASE.jar:5.2.8.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1176) ~[spring-beans-5.2.8.RELEASE.jar:5.2.8.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:556) ~[spring-beans-5.2.8.RELEASE.jar:5.2.8.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:516) ~[spring-beans-5.2.8.RELEASE.jar:5.2.8.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:324) ~[spring-beans-5.2.8.RELEASE.jar:5.2.8.RELEASE]\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:226) ~[spring-beans-5.2.8.RELEASE.jar:5.2.8.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322) ~[spring-beans-5.2.8.RELEASE.jar:5.2.8.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202) ~[spring-beans-5.2.8.RELEASE.jar:5.2.8.RELEASE]\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:897) ~[spring-beans-5.2.8.RELEASE.jar:5.2.8.RELEASE]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:879) ~[spring-context-5.2.8.RELEASE.jar:5.2.8.RELEASE]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:551) ~[spring-context-5.2.8.RELEASE.jar:5.2.8.RELEASE]\r\n    \tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:143) ~[spring-boot-2.3.3.RELEASE.jar:2.3.3.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:758) [spring-boot-2.3.3.RELEASE.jar:2.3.3.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:750) [spring-boot-2.3.3.RELEASE.jar:2.3.3.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397) [spring-boot-2.3.3.RELEASE.jar:2.3.3.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:315) [spring-boot-2.3.3.RELEASE.jar:2.3.3.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1237) [spring-boot-2.3.3.RELEASE.jar:2.3.3.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1226) [spring-boot-2.3.3.RELEASE.jar:2.3.3.RELEASE]\r\n    \tat Application.main(Application.java:10) [classes/:na]\r\n    Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [java.nio.file.FileSystem]: Factory method &#39;fileSystem&#39; threw exception; nested exception is java.nio.file.ProviderNotFoundException: Provider not found\r\n    \tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185) ~[spring-beans-5.2.8.RELEASE.jar:5.2.8.RELEASE]\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:650) ~[spring-beans-5.2.8.RELEASE.jar:5.2.8.RELEASE]\r\n    \t... 20 common frames omitted\r\n    Caused by: java.nio.file.ProviderNotFoundException: Provider not found\r\n    \tat java.nio.file.FileSystems.newFileSystem(FileSystems.java:407) ~[na:1.8.0_251]\r\n    \tat Config.fileSystem(FileSystemConfig.java:23) ~[classes/:na]\r\n    \tat Config$$EnhancerBySpringCGLIB$$53bc71a0.CGLIB$fileSystem$0(&lt;generated&gt;) ~[classes/:na]\r\n    \tat Config$$EnhancerBySpringCGLIB$$53bc71a0$$FastClassBySpringCGLIB$$4ee51dad.invoke(&lt;generated&gt;) ~[classes/:na]\r\n    \tat org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:244) ~[spring-core-5.2.8.RELEASE.jar:5.2.8.RELEASE]\r\n    \tat org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331) ~[spring-context-5.2.8.RELEASE.jar:5.2.8.RELEASE]\r\n    \tat Config$$EnhancerBySpringCGLIB$$53bc71a0.fileSystem(&lt;generated&gt;) ~[classes/:na]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_251]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_251]\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_251]\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_251]\r\n    \tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154) ~[spring-beans-5.2.8.RELEASE.jar:5.2.8.RELEASE]\r\n    \t... 21 common frames omitted\r\n\r\n**New update**\r\n\r\n    Caused by: java.lang.IllegalArgumentException: Path component should be &#39;/&#39;\r\n    \tat sun.nio.fs.WindowsFileSystemProvider.checkUri(WindowsFileSystemProvider.java:69) ~[na:1.8.0_251]\r\n    \tat sun.nio.fs.WindowsFileSystemProvider.getFileSystem(WindowsFileSystemProvider.java:86) ~[na:1.8.0_251]\r\n    \tat java.nio.file.FileSystems.getFileSystem(FileSystems.java:221) ~[na:1.8.0_251]\r\n    \tat FileSystemConfig.fileSystem(FileSystemConfig.java:23) ~[classes/:na]\r\n    \tat FileSystemConfig$$EnhancerBySpringCGLIB$$53bc71a0.CGLIB$fileSystem$0(&lt;generated&gt;) ~[classes/:na]\r\n    \tat FileSystemConfig$$EnhancerBySpringCGLIB$$53bc71a0$$FastClassBySpringCGLIB$$4ee51dad.invoke(&lt;generated&gt;) ~[classes/:na]\r\n    \tat org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:244) ~[spring-core-5.2.8.RELEASE.jar:5.2.8.RELEASE]\r\n    \tat org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331) ~[spring-context-5.2.8.RELEASE.jar:5.2.8.RELEASE]\r\n    \tat FileSystemConfig$$EnhancerBySpringCGLIB$$53bc71a0.fileSystem(&lt;generated&gt;) ~[classes/:na]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_251]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_251]\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_251]\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_251]\r\n    \tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154) ~[spring-beans-5.2.8.RELEASE.jar:5.2.8.RELEASE]\r\n    \t... 21 common frames omitted","title":"java.nio.file.ProviderNotFoundException: Provider not found","body":"<p>I´ve got this exception provider not found, but don´t know how to solve it. Here is my code:</p>\n<pre><code> @Bean\n    public FileSystem fileSystem() {\n        try {\n            Path path = Paths.get(&quot;C:/Users/home/Desktop/mydir&quot;);\n            FileSystem ext2fs = FileSystems.newFileSystem(path, Thread.currentThread().getContextClassLoader());\n            \n            return ext2fs;\n        } catch (IOException e) {\n            e.printStackTrace();\n            return null;\n        }\n    }\n</code></pre>\n<p>Does anyone know what could be the problem and how to solve it.\nThe idea is that i have this bean for filesystem, which i will later use for crud operation, but this bean is because if i later want to change storage that it would be easily just changed in this bean, for example if i want to use google as storage instead of local storage or something like that just set it up in this method. I´m using Spring Boot 2.3.3</p>\n<p><strong>Update - complete exception</strong></p>\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'fileSystem' defined in class path resource [Config.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [java.nio.file.FileSystem]: Factory method 'fileSystem' threw exception; nested exception is java.nio.file.ProviderNotFoundException: Provider not found\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:655) ~[spring-beans-5.2.8.RELEASE.jar:5.2.8.RELEASE]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:483) ~[spring-beans-5.2.8.RELEASE.jar:5.2.8.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1336) ~[spring-beans-5.2.8.RELEASE.jar:5.2.8.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1176) ~[spring-beans-5.2.8.RELEASE.jar:5.2.8.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:556) ~[spring-beans-5.2.8.RELEASE.jar:5.2.8.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:516) ~[spring-beans-5.2.8.RELEASE.jar:5.2.8.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:324) ~[spring-beans-5.2.8.RELEASE.jar:5.2.8.RELEASE]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:226) ~[spring-beans-5.2.8.RELEASE.jar:5.2.8.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322) ~[spring-beans-5.2.8.RELEASE.jar:5.2.8.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202) ~[spring-beans-5.2.8.RELEASE.jar:5.2.8.RELEASE]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:897) ~[spring-beans-5.2.8.RELEASE.jar:5.2.8.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:879) ~[spring-context-5.2.8.RELEASE.jar:5.2.8.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:551) ~[spring-context-5.2.8.RELEASE.jar:5.2.8.RELEASE]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:143) ~[spring-boot-2.3.3.RELEASE.jar:2.3.3.RELEASE]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:758) [spring-boot-2.3.3.RELEASE.jar:2.3.3.RELEASE]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:750) [spring-boot-2.3.3.RELEASE.jar:2.3.3.RELEASE]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397) [spring-boot-2.3.3.RELEASE.jar:2.3.3.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:315) [spring-boot-2.3.3.RELEASE.jar:2.3.3.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1237) [spring-boot-2.3.3.RELEASE.jar:2.3.3.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1226) [spring-boot-2.3.3.RELEASE.jar:2.3.3.RELEASE]\n    at Application.main(Application.java:10) [classes/:na]\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [java.nio.file.FileSystem]: Factory method 'fileSystem' threw exception; nested exception is java.nio.file.ProviderNotFoundException: Provider not found\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185) ~[spring-beans-5.2.8.RELEASE.jar:5.2.8.RELEASE]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:650) ~[spring-beans-5.2.8.RELEASE.jar:5.2.8.RELEASE]\n    ... 20 common frames omitted\nCaused by: java.nio.file.ProviderNotFoundException: Provider not found\n    at java.nio.file.FileSystems.newFileSystem(FileSystems.java:407) ~[na:1.8.0_251]\n    at Config.fileSystem(FileSystemConfig.java:23) ~[classes/:na]\n    at Config$$EnhancerBySpringCGLIB$$53bc71a0.CGLIB$fileSystem$0(&lt;generated&gt;) ~[classes/:na]\n    at Config$$EnhancerBySpringCGLIB$$53bc71a0$$FastClassBySpringCGLIB$$4ee51dad.invoke(&lt;generated&gt;) ~[classes/:na]\n    at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:244) ~[spring-core-5.2.8.RELEASE.jar:5.2.8.RELEASE]\n    at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331) ~[spring-context-5.2.8.RELEASE.jar:5.2.8.RELEASE]\n    at Config$$EnhancerBySpringCGLIB$$53bc71a0.fileSystem(&lt;generated&gt;) ~[classes/:na]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_251]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_251]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_251]\n    at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_251]\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154) ~[spring-beans-5.2.8.RELEASE.jar:5.2.8.RELEASE]\n    ... 21 common frames omitted\n</code></pre>\n<p><strong>New update</strong></p>\n<pre><code>Caused by: java.lang.IllegalArgumentException: Path component should be '/'\n    at sun.nio.fs.WindowsFileSystemProvider.checkUri(WindowsFileSystemProvider.java:69) ~[na:1.8.0_251]\n    at sun.nio.fs.WindowsFileSystemProvider.getFileSystem(WindowsFileSystemProvider.java:86) ~[na:1.8.0_251]\n    at java.nio.file.FileSystems.getFileSystem(FileSystems.java:221) ~[na:1.8.0_251]\n    at FileSystemConfig.fileSystem(FileSystemConfig.java:23) ~[classes/:na]\n    at FileSystemConfig$$EnhancerBySpringCGLIB$$53bc71a0.CGLIB$fileSystem$0(&lt;generated&gt;) ~[classes/:na]\n    at FileSystemConfig$$EnhancerBySpringCGLIB$$53bc71a0$$FastClassBySpringCGLIB$$4ee51dad.invoke(&lt;generated&gt;) ~[classes/:na]\n    at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:244) ~[spring-core-5.2.8.RELEASE.jar:5.2.8.RELEASE]\n    at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331) ~[spring-context-5.2.8.RELEASE.jar:5.2.8.RELEASE]\n    at FileSystemConfig$$EnhancerBySpringCGLIB$$53bc71a0.fileSystem(&lt;generated&gt;) ~[classes/:na]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_251]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_251]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_251]\n    at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_251]\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154) ~[spring-beans-5.2.8.RELEASE.jar:5.2.8.RELEASE]\n    ... 21 common frames omitted\n</code></pre>\n"},{"tags":["java","sql","snowflake-cloud-data-platform","talend"],"owner":{"account_id":20060396,"reputation":377,"user_id":14707253,"display_name":"Emile Dadou"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687891955,"creation_date":1686144341,"question_id":76423795,"body_markdown":"I&#39;m trying to write a request (for Snowflake) using the MERGE INTO function and I can&#39;t use the tDBOutput component with the UPSERT action. I used an example query to see how I should write the template and I got this :\r\n\r\n    MERGE INTO &quot;DEV_MDM_SOFINORD&quot;.&quot;MDM&quot;.&quot;GROUPE&quot; T USING &quot;GROUPE_20230607_150953_864_1&quot; AS S ON T.&quot;CD_GROUPE&quot; = S.&quot;CD_GROUPE&quot;  WHEN MATCHED THEN UPDATE SET  T.&quot;CD_GROUPE&quot;=S.&quot;CD_GROUPE&quot;, T.&quot;AT_SIGNATAIRE&quot;=S.&quot;AT_SIGNATAIRE&quot; WHEN NOT MATCHED THEN INSERT(&quot;CD_GROUPE&quot;,&quot;AT_SIGNATAIRE&quot;) VALUES(S.&quot;CD_GROUPE&quot; , S.&quot;AT_SIGNATAIRE&quot;)\r\n\r\nI don&#39;t understand what the &quot;GROUPE_20230607_150953_864_1&quot; is and what it does.\r\n\r\nI&#39;m using Talend Cloud API Services Platform (v7.3.1)\r\n\r\nIt&#39;s just a test job but here is the configuration of the components : \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\nSo I would like to know what `USING &quot;GROUPE_20230607_150953_864_1&quot;` is or if there is an alternative to the MERGE INTO.\r\n\r\n  [1]: https://i.stack.imgur.com/2SsUW.png\r\n  [2]: https://i.stack.imgur.com/7jds8.png","title":"Talend / Snowflake - issue with merge into request","body":"<p>I'm trying to write a request (for Snowflake) using the MERGE INTO function and I can't use the tDBOutput component with the UPSERT action. I used an example query to see how I should write the template and I got this :</p>\n<pre><code>MERGE INTO &quot;DEV_MDM_SOFINORD&quot;.&quot;MDM&quot;.&quot;GROUPE&quot; T USING &quot;GROUPE_20230607_150953_864_1&quot; AS S ON T.&quot;CD_GROUPE&quot; = S.&quot;CD_GROUPE&quot;  WHEN MATCHED THEN UPDATE SET  T.&quot;CD_GROUPE&quot;=S.&quot;CD_GROUPE&quot;, T.&quot;AT_SIGNATAIRE&quot;=S.&quot;AT_SIGNATAIRE&quot; WHEN NOT MATCHED THEN INSERT(&quot;CD_GROUPE&quot;,&quot;AT_SIGNATAIRE&quot;) VALUES(S.&quot;CD_GROUPE&quot; , S.&quot;AT_SIGNATAIRE&quot;)\n</code></pre>\n<p>I don't understand what the &quot;GROUPE_20230607_150953_864_1&quot; is and what it does.</p>\n<p>I'm using Talend Cloud API Services Platform (v7.3.1)</p>\n<p>It's just a test job but here is the configuration of the components :</p>\n<p><a href=\"https://i.stack.imgur.com/2SsUW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2SsUW.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/7jds8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7jds8.png\" alt=\"enter image description here\" /></a></p>\n<p>So I would like to know what <code>USING &quot;GROUPE_20230607_150953_864_1&quot;</code> is or if there is an alternative to the MERGE INTO.</p>\n"},{"tags":["java","oauth","wildfly","openid-connect","elytron"],"answers":[{"tags":[],"owner":{"account_id":26350,"reputation":17454,"user_id":68490,"accept_rate":20,"display_name":"Tore Nestenius"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680503243,"creation_date":1680503243,"answer_id":75916559,"question_id":75916483,"body_markdown":"I think the problem is that the internal service can&#39;t reach the internal https://myidp.com over HTTPS. This is a pretty common network problem when your HTTPS is terminated in your proxy/load-balancer and the internal services mostly uses HTTP. How to fix it depends on your infrastructure, one option can be to add the HTTPS certificate to the key cloak endpoint and then map myidp.com to point to the internal IP-address on the LAN.\r\n\r\n\r\n ","title":"ELY23005: Unable to load OpenID provider metadata","body":"<p>I think the problem is that the internal service can't reach the internal <a href=\"https://myidp.com\" rel=\"nofollow noreferrer\">https://myidp.com</a> over HTTPS. This is a pretty common network problem when your HTTPS is terminated in your proxy/load-balancer and the internal services mostly uses HTTP. How to fix it depends on your infrastructure, one option can be to add the HTTPS certificate to the key cloak endpoint and then map myidp.com to point to the internal IP-address on the LAN.</p>\n"},{"tags":[],"owner":{"account_id":6634642,"reputation":896,"user_id":5122135,"display_name":"Milad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687891885,"creation_date":1687891885,"answer_id":76567838,"question_id":75916483,"body_markdown":"I stumbled into this and I&#39;ve solved it by adding the &quot;truststore&quot; and &quot;truststore-password&quot; properties to the OICD client configuration:\r\n\r\n```xml\r\n&lt;subsystem xmlns=&quot;urn:wildfly:elytron-oidc-client:1.0&quot;&gt;\r\n    &lt;secure-deployment name=&quot;myapp.war&quot; truststore=&quot;/path/to/cacerts.p12&quot; truststore-password=&quot;changeit&quot;&gt;\r\n        &lt;provider-url&gt;https://localhost/auth/realms/my-app-realm&lt;/provider-url&gt;\r\n        &lt;ssl-required&gt;ALL&lt;/ssl-required&gt;\r\n        &lt;principal-attribute&gt;preferred_username&lt;/principal-attribute&gt;\r\n        &lt;client-id&gt;my-app-oidc-client&lt;/client-id&gt;\r\n        &lt;credential name=&quot;secret&quot; secret=&quot;...&quot;/&gt;\r\n    &lt;/secure-deployment&gt;\r\n&lt;/subsystem&gt;\r\n```\r\n\r\nSee &lt;https://docs.wildfly.org/28/wildscribe/subsystem/elytron-oidc-client/secure-deployment/index.html&gt; as a reference.\r\n\r\nThe trust store file `cacerts.p12` was created with\r\n\r\n```shell\r\nkeytool -importcert -alias keycloak -keystore cacerts.p12 -file localhost.crt\r\n```\r\n\r\nwhere `localhost.crt`&#160;is the server certificate.","title":"ELY23005: Unable to load OpenID provider metadata","body":"<p>I stumbled into this and I've solved it by adding the &quot;truststore&quot; and &quot;truststore-password&quot; properties to the OICD client configuration:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;subsystem xmlns=&quot;urn:wildfly:elytron-oidc-client:1.0&quot;&gt;\n    &lt;secure-deployment name=&quot;myapp.war&quot; truststore=&quot;/path/to/cacerts.p12&quot; truststore-password=&quot;changeit&quot;&gt;\n        &lt;provider-url&gt;https://localhost/auth/realms/my-app-realm&lt;/provider-url&gt;\n        &lt;ssl-required&gt;ALL&lt;/ssl-required&gt;\n        &lt;principal-attribute&gt;preferred_username&lt;/principal-attribute&gt;\n        &lt;client-id&gt;my-app-oidc-client&lt;/client-id&gt;\n        &lt;credential name=&quot;secret&quot; secret=&quot;...&quot;/&gt;\n    &lt;/secure-deployment&gt;\n&lt;/subsystem&gt;\n</code></pre>\n<p>See <a href=\"https://docs.wildfly.org/28/wildscribe/subsystem/elytron-oidc-client/secure-deployment/index.html\" rel=\"nofollow noreferrer\">https://docs.wildfly.org/28/wildscribe/subsystem/elytron-oidc-client/secure-deployment/index.html</a> as a reference.</p>\n<p>The trust store file <code>cacerts.p12</code> was created with</p>\n<pre class=\"lang-bash prettyprint-override\"><code>keytool -importcert -alias keycloak -keystore cacerts.p12 -file localhost.crt\n</code></pre>\n<p>where <code>localhost.crt</code> is the server certificate.</p>\n"}],"owner":{"account_id":262548,"reputation":1429,"user_id":547491,"accept_rate":60,"display_name":"Karthik Murugan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":681,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1687891885,"creation_date":1680502469,"question_id":75916483,"body_markdown":"Ours is a wildfly based application. We configured Keycloak OIDC with Elytron. This integration works well in all our environments except this one. On hitting any URL, it returns 403 Forbidden error.\r\n\r\nOn enabling TRACE level, I could see these logs when hitting the application endpoint:\r\n\r\n   \t{&quot;log_timestamp&quot;: &quot;2023-03-31T12:34:38.629+0000&quot;, &quot;log_level&quot;: &quot;TRACE&quot;, &quot;process_id&quot;: 1, &quot;process_name&quot;: &quot;myapp&quot;, &quot;thread_id&quot;: 1, &quot;thread_name&quot;: &quot;default task-1&quot;, &quot;action_name&quot;: &quot;org.wildfly.security.http.servlet&quot;, &quot;log_message&quot;: &quot;Created ServletSecurityContextImpl enableJapi=true, integratedJaspi=true, applicationContext=default-host /my-app&quot;}\r\n\t{&quot;log_timestamp&quot;: &quot;2023-03-31T12:34:38.629+0000&quot;, &quot;log_level&quot;: &quot;TRACE&quot;, &quot;process_id&quot;: 1, &quot;process_name&quot;: &quot;myapp&quot;, &quot;thread_id&quot;: 1, &quot;thread_name&quot;: &quot;default task-1&quot;, &quot;action_name&quot;: &quot;org.wildfly.security.http.servlet&quot;, &quot;log_message&quot;: &quot;No AuthConfigProvider for layer=HttpServlet, appContext=default-host /my-app&quot;}\r\n\t{&quot;log_timestamp&quot;: &quot;2023-03-31T12:34:38.629+0000&quot;, &quot;log_level&quot;: &quot;TRACE&quot;, &quot;process_id&quot;: 1, &quot;process_name&quot;: &quot;myapp&quot;, &quot;thread_id&quot;: 1, &quot;thread_name&quot;: &quot;default task-1&quot;, &quot;action_name&quot;: &quot;org.wildfly.security.http.servlet&quot;, &quot;log_message&quot;: &quot;JASPIC Unavailable, using HTTP authentication.&quot;}\r\n\t{&quot;log_timestamp&quot;: &quot;2023-03-31T12:34:38.629+0000&quot;, &quot;log_level&quot;: &quot;TRACE&quot;, &quot;process_id&quot;: 1, &quot;process_name&quot;: &quot;myapp&quot;, &quot;thread_id&quot;: 1, &quot;thread_name&quot;: &quot;default task-1&quot;, &quot;action_name&quot;: &quot;org.wildfly.security&quot;, &quot;log_message&quot;: &quot;No CachedIdentity to restore.&quot;}\r\n\t{&quot;log_timestamp&quot;: &quot;2023-03-31T12:34:38.629+0000&quot;, &quot;log_level&quot;: &quot;TRACE&quot;, &quot;process_id&quot;: 1, &quot;process_name&quot;: &quot;myapp&quot;, &quot;thread_id&quot;: 1, &quot;thread_name&quot;: &quot;default task-1&quot;, &quot;action_name&quot;: &quot;org.wildfly.security&quot;, &quot;log_message&quot;: &quot;Created HttpServerAuthenticationMechanism [org.wildfly.security.auth.server.SecurityIdentityServerMechanismFactory$1@611230fa] for mechanism [OIDC]&quot;}\r\n\t{&quot;log_timestamp&quot;: &quot;2023-03-31T12:34:38.630+0000&quot;, &quot;log_level&quot;: &quot;DEBUG&quot;, &quot;process_id&quot;: 1, &quot;process_name&quot;: &quot;myapp&quot;, &quot;thread_id&quot;: 1, &quot;thread_name&quot;: &quot;default task-1&quot;, &quot;action_name&quot;: &quot;org.wildfly.security.http.oidc&quot;, &quot;log_message&quot;: &quot;adminRequest http://localhost:8180/my-app/&quot;}\r\n\t{&quot;log_timestamp&quot;: &quot;2023-03-31T12:34:38.630+0000&quot;, &quot;log_level&quot;: &quot;TRACE&quot;, &quot;process_id&quot;: 1, &quot;process_name&quot;: &quot;myapp&quot;, &quot;thread_id&quot;: 1, &quot;thread_name&quot;: &quot;default task-1&quot;, &quot;action_name&quot;: &quot;org.wildfly.security.http.oidc&quot;, &quot;log_message&quot;: &quot;--&gt; authenticate()&quot;}\r\n\t{&quot;log_timestamp&quot;: &quot;2023-03-31T12:34:38.630+0000&quot;, &quot;log_level&quot;: &quot;TRACE&quot;, &quot;process_id&quot;: 1, &quot;process_name&quot;: &quot;myapp&quot;, &quot;thread_id&quot;: 1, &quot;thread_name&quot;: &quot;default task-1&quot;, &quot;action_name&quot;: &quot;org.wildfly.security.http.oidc&quot;, &quot;log_message&quot;: &quot;try bearer&quot;}\r\n\t{&quot;log_timestamp&quot;: &quot;2023-03-31T12:34:38.630+0000&quot;, &quot;log_level&quot;: &quot;TRACE&quot;, &quot;process_id&quot;: 1, &quot;process_name&quot;: &quot;myapp&quot;, &quot;thread_id&quot;: 1, &quot;thread_name&quot;: &quot;default task-1&quot;, &quot;action_name&quot;: &quot;org.wildfly.security.http.oidc&quot;, &quot;log_message&quot;: &quot;try query parameter auth&quot;}\r\n\t{&quot;log_timestamp&quot;: &quot;2023-03-31T12:34:38.630+0000&quot;, &quot;log_level&quot;: &quot;TRACE&quot;, &quot;process_id&quot;: 1, &quot;process_name&quot;: &quot;myapp&quot;, &quot;thread_id&quot;: 1, &quot;thread_name&quot;: &quot;default task-1&quot;, &quot;action_name&quot;: &quot;org.wildfly.security.http.oidc&quot;, &quot;log_message&quot;: &quot;try basic auth&quot;}\r\n\t{&quot;log_timestamp&quot;: &quot;2023-03-31T12:34:38.630+0000&quot;, &quot;log_level&quot;: &quot;TRACE&quot;, &quot;process_id&quot;: 1, &quot;process_name&quot;: &quot;myapp&quot;, &quot;thread_id&quot;: 1, &quot;thread_name&quot;: &quot;default task-1&quot;, &quot;action_name&quot;: &quot;org.wildfly.security.http.oidc&quot;, &quot;log_message&quot;: &quot;try oidc&quot;}\r\n\t{&quot;log_timestamp&quot;: &quot;2023-03-31T12:34:38.630+0000&quot;, &quot;log_level&quot;: &quot;DEBUG&quot;, &quot;process_id&quot;: 1, &quot;process_name&quot;: &quot;myapp&quot;, &quot;thread_id&quot;: 1, &quot;thread_name&quot;: &quot;default task-1&quot;, &quot;action_name&quot;: &quot;org.wildfly.security.http.oidc&quot;, &quot;log_message&quot;: &quot;Account was not in session, returning null&quot;}\r\n\t{&quot;log_timestamp&quot;: &quot;2023-03-31T12:34:38.630+0000&quot;, &quot;log_level&quot;: &quot;DEBUG&quot;, &quot;process_id&quot;: 1, &quot;process_name&quot;: &quot;myapp&quot;, &quot;thread_id&quot;: 1, &quot;thread_name&quot;: &quot;default task-1&quot;, &quot;action_name&quot;: &quot;org.wildfly.security.http.oidc&quot;, &quot;log_message&quot;: &quot;there was no code&quot;}\r\n\t{&quot;log_timestamp&quot;: &quot;2023-03-31T12:34:38.630+0000&quot;, &quot;log_level&quot;: &quot;DEBUG&quot;, &quot;process_id&quot;: 1, &quot;process_name&quot;: &quot;myapp&quot;, &quot;thread_id&quot;: 1, &quot;thread_name&quot;: &quot;default task-1&quot;, &quot;action_name&quot;: &quot;org.wildfly.security.http.oidc&quot;, &quot;log_message&quot;: &quot;redirecting to auth server&quot;}\r\n\t{&quot;log_timestamp&quot;: &quot;2023-03-31T12:34:38.630+0000&quot;, &quot;log_level&quot;: &quot;DEBUG&quot;, &quot;process_id&quot;: 1, &quot;process_name&quot;: &quot;myapp&quot;, &quot;thread_id&quot;: 1, &quot;thread_name&quot;: &quot;default task-1&quot;, &quot;action_name&quot;: &quot;org.wildfly.security.http.oidc&quot;, &quot;log_message&quot;: &quot;callback uri: http://localhost:8180/my-app/&quot;}\r\n\t{&quot;log_timestamp&quot;: &quot;2023-03-31T12:34:38.630+0000&quot;, &quot;log_level&quot;: &quot;DEBUG&quot;, &quot;process_id&quot;: 1, &quot;process_name&quot;: &quot;myapp&quot;, &quot;thread_id&quot;: 1, &quot;thread_name&quot;: &quot;default task-1&quot;, &quot;action_name&quot;: &quot;org.wildfly.security.http.oidc&quot;, &quot;log_message&quot;: &quot;Loading OpenID provider metadata from https://myidp.com/realm/myrealm/.well-known/openid-configuration&quot;}\r\n\t{&quot;log_timestamp&quot;: &quot;2023-03-31T12:34:38.632+0000&quot;, &quot;log_level&quot;: &quot;WARN&quot;, &quot;process_id&quot;: 1, &quot;process_name&quot;: &quot;myapp&quot;, &quot;thread_id&quot;: 1, &quot;thread_name&quot;: &quot;default task-1&quot;, &quot;action_name&quot;: &quot;org.wildfly.security.http.oidc&quot;, &quot;log_message&quot;: &quot;ELY23005: Unable to load OpenID provider metadata from https://myidp.com/realm/myrealm/.well-known/openid-configuration&quot;} \r\n\r\nOn looking at the [source code][1] of this log, there&#39;s no evidence which line is causing the exception. \r\n\r\nFew clues:\r\n\r\nAll our environments are created with same Helm, so there&#39;s no question of integrity or sanity.\r\nHTTPS Certificate of IDP is issued by a trusted CA.\r\nFrom within the container, we are able to hit the [metadata configuration][2] URL in last line \r\nAlso attached [standalone.xml][3]\r\nIDP provider is Keycloak. Compared Realm settings, client settings and found no difference. Tried pointing this app to a different Keycloak instance, but getting same issue.\r\n\r\n\r\n  [1]: https://github.com/wildfly-security/wildfly-elytron/blob/97f3c714d66899eaaee88d7c36fc8029e4fa56e7/http/oidc/src/main/java/org/wildfly/security/http/oidc/OidcClientConfiguration.java#L234\r\n\r\n  [2]: https://issues.redhat.com/secure/attachment/12943205/configuration.json\r\n\r\n  [3]: https://issues.redhat.com/secure/attachment/12943204/standalone.xml","title":"ELY23005: Unable to load OpenID provider metadata","body":"<p>Ours is a wildfly based application. We configured Keycloak OIDC with Elytron. This integration works well in all our environments except this one. On hitting any URL, it returns 403 Forbidden error.</p>\n<p>On enabling TRACE level, I could see these logs when hitting the application endpoint:</p>\n<pre><code>{&quot;log_timestamp&quot;: &quot;2023-03-31T12:34:38.629+0000&quot;, &quot;log_level&quot;: &quot;TRACE&quot;, &quot;process_id&quot;: 1, &quot;process_name&quot;: &quot;myapp&quot;, &quot;thread_id&quot;: 1, &quot;thread_name&quot;: &quot;default task-1&quot;, &quot;action_name&quot;: &quot;org.wildfly.security.http.servlet&quot;, &quot;log_message&quot;: &quot;Created ServletSecurityContextImpl enableJapi=true, integratedJaspi=true, applicationContext=default-host /my-app&quot;}\n{&quot;log_timestamp&quot;: &quot;2023-03-31T12:34:38.629+0000&quot;, &quot;log_level&quot;: &quot;TRACE&quot;, &quot;process_id&quot;: 1, &quot;process_name&quot;: &quot;myapp&quot;, &quot;thread_id&quot;: 1, &quot;thread_name&quot;: &quot;default task-1&quot;, &quot;action_name&quot;: &quot;org.wildfly.security.http.servlet&quot;, &quot;log_message&quot;: &quot;No AuthConfigProvider for layer=HttpServlet, appContext=default-host /my-app&quot;}\n{&quot;log_timestamp&quot;: &quot;2023-03-31T12:34:38.629+0000&quot;, &quot;log_level&quot;: &quot;TRACE&quot;, &quot;process_id&quot;: 1, &quot;process_name&quot;: &quot;myapp&quot;, &quot;thread_id&quot;: 1, &quot;thread_name&quot;: &quot;default task-1&quot;, &quot;action_name&quot;: &quot;org.wildfly.security.http.servlet&quot;, &quot;log_message&quot;: &quot;JASPIC Unavailable, using HTTP authentication.&quot;}\n{&quot;log_timestamp&quot;: &quot;2023-03-31T12:34:38.629+0000&quot;, &quot;log_level&quot;: &quot;TRACE&quot;, &quot;process_id&quot;: 1, &quot;process_name&quot;: &quot;myapp&quot;, &quot;thread_id&quot;: 1, &quot;thread_name&quot;: &quot;default task-1&quot;, &quot;action_name&quot;: &quot;org.wildfly.security&quot;, &quot;log_message&quot;: &quot;No CachedIdentity to restore.&quot;}\n{&quot;log_timestamp&quot;: &quot;2023-03-31T12:34:38.629+0000&quot;, &quot;log_level&quot;: &quot;TRACE&quot;, &quot;process_id&quot;: 1, &quot;process_name&quot;: &quot;myapp&quot;, &quot;thread_id&quot;: 1, &quot;thread_name&quot;: &quot;default task-1&quot;, &quot;action_name&quot;: &quot;org.wildfly.security&quot;, &quot;log_message&quot;: &quot;Created HttpServerAuthenticationMechanism [org.wildfly.security.auth.server.SecurityIdentityServerMechanismFactory$1@611230fa] for mechanism [OIDC]&quot;}\n{&quot;log_timestamp&quot;: &quot;2023-03-31T12:34:38.630+0000&quot;, &quot;log_level&quot;: &quot;DEBUG&quot;, &quot;process_id&quot;: 1, &quot;process_name&quot;: &quot;myapp&quot;, &quot;thread_id&quot;: 1, &quot;thread_name&quot;: &quot;default task-1&quot;, &quot;action_name&quot;: &quot;org.wildfly.security.http.oidc&quot;, &quot;log_message&quot;: &quot;adminRequest http://localhost:8180/my-app/&quot;}\n{&quot;log_timestamp&quot;: &quot;2023-03-31T12:34:38.630+0000&quot;, &quot;log_level&quot;: &quot;TRACE&quot;, &quot;process_id&quot;: 1, &quot;process_name&quot;: &quot;myapp&quot;, &quot;thread_id&quot;: 1, &quot;thread_name&quot;: &quot;default task-1&quot;, &quot;action_name&quot;: &quot;org.wildfly.security.http.oidc&quot;, &quot;log_message&quot;: &quot;--&gt; authenticate()&quot;}\n{&quot;log_timestamp&quot;: &quot;2023-03-31T12:34:38.630+0000&quot;, &quot;log_level&quot;: &quot;TRACE&quot;, &quot;process_id&quot;: 1, &quot;process_name&quot;: &quot;myapp&quot;, &quot;thread_id&quot;: 1, &quot;thread_name&quot;: &quot;default task-1&quot;, &quot;action_name&quot;: &quot;org.wildfly.security.http.oidc&quot;, &quot;log_message&quot;: &quot;try bearer&quot;}\n{&quot;log_timestamp&quot;: &quot;2023-03-31T12:34:38.630+0000&quot;, &quot;log_level&quot;: &quot;TRACE&quot;, &quot;process_id&quot;: 1, &quot;process_name&quot;: &quot;myapp&quot;, &quot;thread_id&quot;: 1, &quot;thread_name&quot;: &quot;default task-1&quot;, &quot;action_name&quot;: &quot;org.wildfly.security.http.oidc&quot;, &quot;log_message&quot;: &quot;try query parameter auth&quot;}\n{&quot;log_timestamp&quot;: &quot;2023-03-31T12:34:38.630+0000&quot;, &quot;log_level&quot;: &quot;TRACE&quot;, &quot;process_id&quot;: 1, &quot;process_name&quot;: &quot;myapp&quot;, &quot;thread_id&quot;: 1, &quot;thread_name&quot;: &quot;default task-1&quot;, &quot;action_name&quot;: &quot;org.wildfly.security.http.oidc&quot;, &quot;log_message&quot;: &quot;try basic auth&quot;}\n{&quot;log_timestamp&quot;: &quot;2023-03-31T12:34:38.630+0000&quot;, &quot;log_level&quot;: &quot;TRACE&quot;, &quot;process_id&quot;: 1, &quot;process_name&quot;: &quot;myapp&quot;, &quot;thread_id&quot;: 1, &quot;thread_name&quot;: &quot;default task-1&quot;, &quot;action_name&quot;: &quot;org.wildfly.security.http.oidc&quot;, &quot;log_message&quot;: &quot;try oidc&quot;}\n{&quot;log_timestamp&quot;: &quot;2023-03-31T12:34:38.630+0000&quot;, &quot;log_level&quot;: &quot;DEBUG&quot;, &quot;process_id&quot;: 1, &quot;process_name&quot;: &quot;myapp&quot;, &quot;thread_id&quot;: 1, &quot;thread_name&quot;: &quot;default task-1&quot;, &quot;action_name&quot;: &quot;org.wildfly.security.http.oidc&quot;, &quot;log_message&quot;: &quot;Account was not in session, returning null&quot;}\n{&quot;log_timestamp&quot;: &quot;2023-03-31T12:34:38.630+0000&quot;, &quot;log_level&quot;: &quot;DEBUG&quot;, &quot;process_id&quot;: 1, &quot;process_name&quot;: &quot;myapp&quot;, &quot;thread_id&quot;: 1, &quot;thread_name&quot;: &quot;default task-1&quot;, &quot;action_name&quot;: &quot;org.wildfly.security.http.oidc&quot;, &quot;log_message&quot;: &quot;there was no code&quot;}\n{&quot;log_timestamp&quot;: &quot;2023-03-31T12:34:38.630+0000&quot;, &quot;log_level&quot;: &quot;DEBUG&quot;, &quot;process_id&quot;: 1, &quot;process_name&quot;: &quot;myapp&quot;, &quot;thread_id&quot;: 1, &quot;thread_name&quot;: &quot;default task-1&quot;, &quot;action_name&quot;: &quot;org.wildfly.security.http.oidc&quot;, &quot;log_message&quot;: &quot;redirecting to auth server&quot;}\n{&quot;log_timestamp&quot;: &quot;2023-03-31T12:34:38.630+0000&quot;, &quot;log_level&quot;: &quot;DEBUG&quot;, &quot;process_id&quot;: 1, &quot;process_name&quot;: &quot;myapp&quot;, &quot;thread_id&quot;: 1, &quot;thread_name&quot;: &quot;default task-1&quot;, &quot;action_name&quot;: &quot;org.wildfly.security.http.oidc&quot;, &quot;log_message&quot;: &quot;callback uri: http://localhost:8180/my-app/&quot;}\n{&quot;log_timestamp&quot;: &quot;2023-03-31T12:34:38.630+0000&quot;, &quot;log_level&quot;: &quot;DEBUG&quot;, &quot;process_id&quot;: 1, &quot;process_name&quot;: &quot;myapp&quot;, &quot;thread_id&quot;: 1, &quot;thread_name&quot;: &quot;default task-1&quot;, &quot;action_name&quot;: &quot;org.wildfly.security.http.oidc&quot;, &quot;log_message&quot;: &quot;Loading OpenID provider metadata from https://myidp.com/realm/myrealm/.well-known/openid-configuration&quot;}\n{&quot;log_timestamp&quot;: &quot;2023-03-31T12:34:38.632+0000&quot;, &quot;log_level&quot;: &quot;WARN&quot;, &quot;process_id&quot;: 1, &quot;process_name&quot;: &quot;myapp&quot;, &quot;thread_id&quot;: 1, &quot;thread_name&quot;: &quot;default task-1&quot;, &quot;action_name&quot;: &quot;org.wildfly.security.http.oidc&quot;, &quot;log_message&quot;: &quot;ELY23005: Unable to load OpenID provider metadata from https://myidp.com/realm/myrealm/.well-known/openid-configuration&quot;} \n</code></pre>\n<p>On looking at the <a href=\"https://github.com/wildfly-security/wildfly-elytron/blob/97f3c714d66899eaaee88d7c36fc8029e4fa56e7/http/oidc/src/main/java/org/wildfly/security/http/oidc/OidcClientConfiguration.java#L234\" rel=\"nofollow noreferrer\">source code</a> of this log, there's no evidence which line is causing the exception.</p>\n<p>Few clues:</p>\n<p>All our environments are created with same Helm, so there's no question of integrity or sanity.\nHTTPS Certificate of IDP is issued by a trusted CA.\nFrom within the container, we are able to hit the <a href=\"https://issues.redhat.com/secure/attachment/12943205/configuration.json\" rel=\"nofollow noreferrer\">metadata configuration</a> URL in last line\nAlso attached <a href=\"https://issues.redhat.com/secure/attachment/12943204/standalone.xml\" rel=\"nofollow noreferrer\">standalone.xml</a>\nIDP provider is Keycloak. Compared Realm settings, client settings and found no difference. Tried pointing this app to a different Keycloak instance, but getting same issue.</p>\n"},{"tags":["java","html","jsoup","malformed"],"owner":{"account_id":1676492,"reputation":21,"user_id":1541929,"display_name":"Cmak Mak"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687891872,"creation_date":1687891224,"question_id":76567782,"body_markdown":"We use jsoup html parser to parse a malformed document, such as \r\n&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;span 1&amp;lt;/span&amp;gt;&amp;lt;span&amp;gt;span 2&amp;lt;/span&amp;gt;\r\n\r\nNote that the html document is malformed, missing the trailing &amp;lt;/div&amp;gt;.\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    java code\r\n    String destString = &quot;&lt;div&gt;&lt;span&gt;span 1&lt;/span&gt;&lt;span&gt;span 2&lt;/span&gt;&quot;;\r\n    org.jsoup.nodes.Document jDoc = Jsoup.parse(destString, &quot;&quot;, Parser.xmlParser());\r\n    System.out.println(&quot;Parse:&quot; + jDoc.toString());\r\n\r\n\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n \r\n\r\nThe output will be is \r\noutcome: &amp;lt;div&amp;gt;&amp;lt;span&amp;gt;span 1&amp;lt;/span&amp;gt;&amp;lt;span&amp;gt;span 2&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;\r\n \r\nOur use case need to preserve the content, unless it is changed by our conversion logic. The addition of trailing &quot;&amp;lt;/div&amp;gt;&quot; is considered a bug. How can I override the above behavior\r\n\r\n\r\nI expect jsoup Document.toString() will not include node that do not exist in the string passed to the html parser.","title":"Stop Jsoup document toString method from outputting nodes was not in the input string passed to the html parser","body":"<p>We use jsoup html parser to parse a malformed document, such as\n&lt;div&gt;&lt;span&gt;span 1&lt;/span&gt;&lt;span&gt;span 2&lt;/span&gt;</p>\n<p>Note that the html document is malformed, missing the trailing &lt;/div&gt;.</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>java code\nString destString = \"&lt;div&gt;&lt;span&gt;span 1&lt;/span&gt;&lt;span&gt;span 2&lt;/span&gt;\";\norg.jsoup.nodes.Document jDoc = Jsoup.parse(destString, \"\", Parser.xmlParser());\nSystem.out.println(\"Parse:\" + jDoc.toString());</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>The output will be is\noutcome: &lt;div&gt;&lt;span&gt;span 1&lt;/span&gt;&lt;span&gt;span 2&lt;/span&gt;&lt;/div&gt;</p>\n<p>Our use case need to preserve the content, unless it is changed by our conversion logic. The addition of trailing &quot;&lt;/div&gt;&quot; is considered a bug. How can I override the above behavior</p>\n<p>I expect jsoup Document.toString() will not include node that do not exist in the string passed to the html parser.</p>\n"},{"tags":["java","spring-boot","unit-testing"],"answers":[{"tags":[],"owner":{"account_id":4291439,"reputation":176,"user_id":3507691,"accept_rate":60,"display_name":"Tocchetto"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687891694,"creation_date":1687889405,"answer_id":76567603,"question_id":76566121,"body_markdown":"\r\nFound a solution to the problem, noting it here in case anyone else runs into this.\r\n\r\nThe ```@BeforeAll``` from Junit5 allows you to run code before the spring context initialization.\r\n\r\nThat technically answers my question but did not solve the problem, as I then ran into the issue where my mocked object was not being injected into the client and was being overwritten by a spring created ```@MockBean```. Though about manually registering the mocked object with the SpringContext but I am not sure that would be possible as the context was not ready by the time @BeforeAll runs.\r\n\r\nThat did gave me the idea of returning the mock as a bean from a ```@TestConfiguration```.\r\n\r\nSo, this is what solved the issue:\r\n\r\n1 - Have a ```@TestConfiguration``` class that returns the mocked RestTemplate bean. The preparation has to be done inside the configuration code\r\n```\r\n@Bean\r\n    RestTemplate restTemplate(){\r\n        String auth_url = &quot;http://localhost&quot;;\r\n        SFDCOAuthToken token = new SFDCOAuthToken();\r\n        token.setInstanceUrl(&quot;http://localhost&quot;);\r\n        RestTemplate restTemplateMock = mock(RestTemplate.class);\r\n        when(restTemplateMock.exchange(eq(auth_url), eq(HttpMethod.POST), any(), eq(SFDCOAuthToken.class)))\r\n                .thenReturn(new ResponseEntity&lt;&gt;(token, HttpStatus.OK));\r\n       return restTemplateMock;\r\n    }\r\n```\r\n2 - Remove the ```@MockBean``` from the RestTemplate in the test class, otherwise that bean will take priority over the one in the configuration\r\n\r\n3 - Grab the mocked bean from the context in the test class so you can add more stubs during the tests (the context can simply be retrieved with an ```@Autowire ApplicationContext``` in the test class)\r\n```\r\n@BeforeEach\r\n    void init(){\r\n        restTemplateMock = ctx.getBean(RestTemplate.class);\r\n    }\r\n```\r\n","title":"Mocking an object before ApplicationReadyEvent","body":"<p>Found a solution to the problem, noting it here in case anyone else runs into this.</p>\n<p>The <code>@BeforeAll</code> from Junit5 allows you to run code before the spring context initialization.</p>\n<p>That technically answers my question but did not solve the problem, as I then ran into the issue where my mocked object was not being injected into the client and was being overwritten by a spring created <code>@MockBean</code>. Though about manually registering the mocked object with the SpringContext but I am not sure that would be possible as the context was not ready by the time @BeforeAll runs.</p>\n<p>That did gave me the idea of returning the mock as a bean from a <code>@TestConfiguration</code>.</p>\n<p>So, this is what solved the issue:</p>\n<p>1 - Have a <code>@TestConfiguration</code> class that returns the mocked RestTemplate bean. The preparation has to be done inside the configuration code</p>\n<pre><code>@Bean\n    RestTemplate restTemplate(){\n        String auth_url = &quot;http://localhost&quot;;\n        SFDCOAuthToken token = new SFDCOAuthToken();\n        token.setInstanceUrl(&quot;http://localhost&quot;);\n        RestTemplate restTemplateMock = mock(RestTemplate.class);\n        when(restTemplateMock.exchange(eq(auth_url), eq(HttpMethod.POST), any(), eq(SFDCOAuthToken.class)))\n                .thenReturn(new ResponseEntity&lt;&gt;(token, HttpStatus.OK));\n       return restTemplateMock;\n    }\n</code></pre>\n<p>2 - Remove the <code>@MockBean</code> from the RestTemplate in the test class, otherwise that bean will take priority over the one in the configuration</p>\n<p>3 - Grab the mocked bean from the context in the test class so you can add more stubs during the tests (the context can simply be retrieved with an <code>@Autowire ApplicationContext</code> in the test class)</p>\n<pre><code>@BeforeEach\n    void init(){\n        restTemplateMock = ctx.getBean(RestTemplate.class);\n    }\n</code></pre>\n"}],"owner":{"account_id":4291439,"reputation":176,"user_id":3507691,"accept_rate":60,"display_name":"Tocchetto"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":131,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1687891694,"creation_date":1687877536,"question_id":76566121,"body_markdown":"I have a service that runs on a @Scheduled, as such, I need some classes to be initialized as soon as possible so they are ready when the first scheduled window triggers.\r\n\r\nI have a client class that has the following small initialization code:\r\n```\r\n@EventListener(ApplicationReadyEvent.class)\r\n    private void init() {\r\n        if(auth != null){\r\n            auth.getToken();\r\n            instanceURL = token.getInstanceUrl();\r\n        }\r\n        if(urlUtils !=null){\r\n            urlUtils.setServiceUrl();\r\n        }\r\n    }\r\n```\r\n\r\nEverything worked perfectly and the world was in peace. Then the unit test nation attacked and I ran into some issues.\r\n\r\nWhile unit testing this class, I need to mock the RestTemplate it uses, the issue is, this piece of code runs before I can mock anything on my unit test, and as such I can&#39;t mock the RestTemplate call that is used in ``` auth.getToken() ``` before it is called and throw a NullPointerException up.\r\n\r\nI&#39;ve tried putting the mock in an ApplicationEvent that would trigger before the ApplicationReadyEvent in the unit test class, like ApplicationStartedEvent, but that obviously didn&#39;t work.\r\n\r\nI am starting to get the feeling that this is a code smell, but it doesn&#39;t feel like bad design to me.\r\n\r\nI can&#39;t move the initialization code outside the class, as the ```auth``` and ```urlUtils``` are instances of two inner classes (which make sense to be inner classes as it is only used by this client).\r\n\r\nI could put a conditional on the event and have it disabled for the test profile, but I do need the code to run, so that wouldn&#39;t solve the problem either.\r\n\r\nAny ideas of what to do? I am up for refactoring, but I don&#39;t think I should move the auth and urlUtils classes outside the client class...","title":"Mocking an object before ApplicationReadyEvent","body":"<p>I have a service that runs on a @Scheduled, as such, I need some classes to be initialized as soon as possible so they are ready when the first scheduled window triggers.</p>\n<p>I have a client class that has the following small initialization code:</p>\n<pre><code>@EventListener(ApplicationReadyEvent.class)\n    private void init() {\n        if(auth != null){\n            auth.getToken();\n            instanceURL = token.getInstanceUrl();\n        }\n        if(urlUtils !=null){\n            urlUtils.setServiceUrl();\n        }\n    }\n</code></pre>\n<p>Everything worked perfectly and the world was in peace. Then the unit test nation attacked and I ran into some issues.</p>\n<p>While unit testing this class, I need to mock the RestTemplate it uses, the issue is, this piece of code runs before I can mock anything on my unit test, and as such I can't mock the RestTemplate call that is used in <code>auth.getToken()</code> before it is called and throw a NullPointerException up.</p>\n<p>I've tried putting the mock in an ApplicationEvent that would trigger before the ApplicationReadyEvent in the unit test class, like ApplicationStartedEvent, but that obviously didn't work.</p>\n<p>I am starting to get the feeling that this is a code smell, but it doesn't feel like bad design to me.</p>\n<p>I can't move the initialization code outside the class, as the <code>auth</code> and <code>urlUtils</code> are instances of two inner classes (which make sense to be inner classes as it is only used by this client).</p>\n<p>I could put a conditional on the event and have it disabled for the test profile, but I do need the code to run, so that wouldn't solve the problem either.</p>\n<p>Any ideas of what to do? I am up for refactoring, but I don't think I should move the auth and urlUtils classes outside the client class...</p>\n"},{"tags":["java","node.js","maven","ssl-certificate","intellij-15"],"comments":[{"owner":{"account_id":28906593,"reputation":1,"user_id":22140509,"display_name":"Sravya"},"score":0,"creation_date":1688072429,"post_id":76567802,"comment_id":135028704,"body_markdown":"Any suggestions on this issue?","body":"Any suggestions on this issue?"}],"owner":{"account_id":28906593,"reputation":1,"user_id":22140509,"display_name":"Sravya"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":198,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687891381,"creation_date":1687891381,"question_id":76567802,"body_markdown":"[ERROR] Failed to execute goal com.github.eirslett:frontend-maven-plugin:1.7.6:install-node-and-npm (install node and npm) on project sok-wcm.ui.frontend: Could not download Node.js fr\r\nom: https://nodejs.org/dist/v10.16.0/win-x64/node.exe: Could not download https://nodejs.org/dist/v10.16.0/win-x64/node.exe: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target -&gt; [Help 1]\r\n\r\nTrying to do maven build but encountered the above error.\r\n\r\n1.I have tried replacing my jdk security cacert folder with one of my team mates folder which is working for them. It didn&#39;t work for me. \r\nI thought it was failing at getting npm packages, but it&#39;s actually not even getting node... so this is....\r\n\r\n2.Configured USER Variable the MAVEN_OPTS environment variable for your user with the following information: \r\n\r\n-Xmx512m -Djavax.net.ssl.keyStore=NONE -Djavax.net.ssl.keyStoreType=Windows-my -Djavax.net.ssl.trustStore=NONE -Djavax.net.ssl.trustStoreType=Windows-ROOT\r\n\r\n3.Tried manually installing node using the link that is in the error message.","title":"sun.security.provider.certpathS .SunCertPathBuilderException: unable to find valid certification path to requested target","body":"<p>[ERROR] Failed to execute goal com.github.eirslett:frontend-maven-plugin:1.7.6:install-node-and-npm (install node and npm) on project sok-wcm.ui.frontend: Could not download Node.js fr\nom: <a href=\"https://nodejs.org/dist/v10.16.0/win-x64/node.exe\" rel=\"nofollow noreferrer\">https://nodejs.org/dist/v10.16.0/win-x64/node.exe</a>: Could not download <a href=\"https://nodejs.org/dist/v10.16.0/win-x64/node.exe\" rel=\"nofollow noreferrer\">https://nodejs.org/dist/v10.16.0/win-x64/node.exe</a>: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target -&gt; [Help 1]</p>\n<p>Trying to do maven build but encountered the above error.</p>\n<p>1.I have tried replacing my jdk security cacert folder with one of my team mates folder which is working for them. It didn't work for me.\nI thought it was failing at getting npm packages, but it's actually not even getting node... so this is....</p>\n<p>2.Configured USER Variable the MAVEN_OPTS environment variable for your user with the following information:</p>\n<p>-Xmx512m -Djavax.net.ssl.keyStore=NONE -Djavax.net.ssl.keyStoreType=Windows-my -Djavax.net.ssl.trustStore=NONE -Djavax.net.ssl.trustStoreType=Windows-ROOT</p>\n<p>3.Tried manually installing node using the link that is in the error message.</p>\n"},{"tags":["java","android","rest"],"comments":[{"owner":{"account_id":25117461,"reputation":153,"user_id":18966287,"display_name":"Saad Waseem"},"score":0,"creation_date":1681890457,"post_id":76050296,"comment_id":134128185,"body_markdown":"Though my answer might not be related to the question, I would recommend that if you&#39;re learning Android, then: \n\n1. Start learning Jetpack Compose with Kotlin instead of Java.\n2. Use libraries like Retrofit for network requests.\n\nIt&#39;s easier to create this similar feature in Compose.","body":"Though my answer might not be related to the question, I would recommend that if you&#39;re learning Android, then:   1. Start learning Jetpack Compose with Kotlin instead of Java. 2. Use libraries like Retrofit for network requests.  It&#39;s easier to create this similar feature in Compose."}],"answers":[{"tags":[],"owner":{"account_id":18178378,"reputation":13,"user_id":13226665,"display_name":"daschay"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687891085,"creation_date":1687891085,"answer_id":76567765,"question_id":76050296,"body_markdown":"The code is ok but requires an Adapter for `AutoCompleteTextView` with no filtering at all, that should be used in place of `ArrayAdapter`. Since I created the `NoFilterAdapter` with ChatGPT, I am not uploading the code here.","title":"AutoCompleteTextView not populating correctly through REST. What is wrong?","body":"<p>The code is ok but requires an Adapter for <code>AutoCompleteTextView</code> with no filtering at all, that should be used in place of <code>ArrayAdapter</code>. Since I created the <code>NoFilterAdapter</code> with ChatGPT, I am not uploading the code here.</p>\n"}],"owner":{"account_id":18178378,"reputation":13,"user_id":13226665,"display_name":"daschay"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687891085,"creation_date":1681870768,"question_id":76050296,"body_markdown":"I am trying to learn android programming and create a REST client. I have checked the server with Postman, which is working correctly. In the android side I created a `AutoCompleteTextView`, which is getting populated by the data received through REST, and this is not working properly. For example, if I type &#39;A&#39; no list is coming, but if I type &#39;Ap&#39; and then delete &#39;p&#39;, some of the options are coming.  I have detected that it is receiving data correctly, but the Adapter used in `AutoCompleteTextView` is not clearing and not getting updating properly. Could you please tell me what I am missing?\r\n\r\nHere goes my MainActivity class:\r\n````\r\npackage com.example.connectdb;\r\n\r\nimport android.os.Bundle;\r\nimport android.os.Handler;\r\nimport android.os.Looper;\r\nimport android.text.Editable;\r\nimport android.text.TextWatcher;\r\nimport android.util.Log;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.AutoCompleteTextView;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport org.json.JSONArray;\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\nimport java.io.BufferedReader;\r\nimport java.io.IOException;\r\nimport java.io.InputStream;\r\nimport java.io.InputStreamReader;\r\nimport java.io.OutputStreamWriter;\r\nimport java.net.HttpURLConnection;\r\nimport java.net.URL;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.concurrent.ExecutorService;\r\nimport java.util.concurrent.Executors;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n    private static final String TAG = MainActivity.class.getSimpleName();\r\n    private static final String BASE_URL = &quot;http://192.168.0.154:8080/autocomplete/json&quot;;\r\n    private AutoCompleteTextView autoCompleteTextView;\r\n    private ArrayAdapter&lt;String&gt; adapter;\r\n    private String[] arr = {};\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        autoCompleteTextView = findViewById(R.id.autoCompleteTextView);\r\n        adapter = new ArrayAdapter&lt;&gt;(this, android.R.layout.simple_dropdown_item_1line, arr);\r\n        autoCompleteTextView.setThreshold(1);\r\n        autoCompleteTextView.setAdapter(adapter);\r\n        autoCompleteTextView.addTextChangedListener(textWatcher);\r\n    }\r\n    private final TextWatcher textWatcher = new TextWatcher() {\r\n        private ExecutorService executor = Executors.newSingleThreadExecutor();\r\n        private Handler handler = new Handler(Looper.getMainLooper());\r\n        private List&lt;String&gt; strings;\r\n        public void execute(String string) {\r\n            executor.execute(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    strings = backgroundWork(string);\r\n                    handler.post(new Runnable() {\r\n                        @Override\r\n                        public void run() {\r\n                            changeAdapter(strings);\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        }\r\n        private List&lt;String&gt; backgroundWork(String string) {\r\n            List&lt;String&gt; results = new ArrayList&lt;&gt;();\r\n            try {\r\n                URL url = new URL(BASE_URL);\r\n                HttpURLConnection connection = (HttpURLConnection) url.openConnection();\r\n                connection.setRequestMethod(&quot;POST&quot;);\r\n                connection.setDoInput(true);\r\n                connection.setDoOutput(false);\r\n                connection.addRequestProperty(&quot;Content-Length&quot;, Integer.toString(6+string.length()));\r\n                connection.addRequestProperty(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;);\r\n                connection.connect();\r\n                OutputStreamWriter writer = new OutputStreamWriter(connection.getOutputStream());\r\n                writer.write(&quot;query=&quot;+string);\r\n                writer.flush();\r\n                int responseCode = connection.getResponseCode();\r\n                if (responseCode == HttpURLConnection.HTTP_OK) {\r\n                    InputStream inputStream = connection.getInputStream();\r\n                    BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(inputStream));\r\n                    StringBuilder stringBuilder = new StringBuilder();\r\n                    String line;\r\n                    while ((line = bufferedReader.readLine()) != null) {\r\n                        stringBuilder.append(line).append(&#39;\\n&#39;);\r\n                    }\r\n                    bufferedReader.close();\r\n                    inputStream.close();\r\n                    JSONArray jsonArray = new JSONArray(stringBuilder.toString());\r\n                    for (int i = 0; i &lt; jsonArray.length(); i++) {\r\n                        JSONObject jsonObject = jsonArray.getJSONObject(i);\r\n                        results.add(jsonObject.getString(&quot;interpretation&quot;));\r\n                    }\r\n                }\r\n            } catch (IOException | JSONException e) {\r\n                Log.e(TAG, &quot;Error occurred while searching&quot;, e);\r\n            }\r\n            return results;\r\n        }\r\n        @Override\r\n        public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n        }\r\n        @Override\r\n        public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n        }\r\n        @Override\r\n        public void afterTextChanged(Editable editable) {\r\n            String text = autoCompleteTextView.getText().toString().trim();\r\n            if (!text.isEmpty()) execute(text);\r\n        }\r\n    };\r\n    public void changeAdapter(List&lt;String&gt; strings) {\r\n        if (adapter != null) {\r\n            adapter.clear();\r\n            if (strings != null) adapter.addAll(strings);\r\n            adapter.notifyDataSetChanged();\r\n        }\r\n    }\r\n}\r\n````\r\n\r\nactivity_main.xml here:\r\n````\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    tools:context=&quot;.MainActivity&quot;&gt;\r\n\r\n    &lt;AutoCompleteTextView\r\n        android:id=&quot;@+id/autoCompleteTextView&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_margin=&quot;16dp&quot;\r\n        android:hint=&quot;Search...&quot;\r\n        android:imeOptions=&quot;actionDone&quot;\r\n        android:inputType=&quot;textAutoComplete|textCapWords&quot; /&gt;\r\n\r\n&lt;/RelativeLayout&gt;\r\n````\r\n\r\nAndroidManifest.xml here:\r\n````\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\r\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/Theme.ConnectDB&quot;\r\n        android:usesCleartextTraffic=&quot;true&quot;\r\n        tools:targetApi=&quot;31&quot;&gt;\r\n        &lt;activity\r\n            android:name=&quot;.MainActivity&quot;\r\n            android:exported=&quot;true&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n    &lt;/application&gt;\r\n\r\n&lt;/manifest&gt;\r\n````\r\n\r\n","title":"AutoCompleteTextView not populating correctly through REST. What is wrong?","body":"<p>I am trying to learn android programming and create a REST client. I have checked the server with Postman, which is working correctly. In the android side I created a <code>AutoCompleteTextView</code>, which is getting populated by the data received through REST, and this is not working properly. For example, if I type 'A' no list is coming, but if I type 'Ap' and then delete 'p', some of the options are coming.  I have detected that it is receiving data correctly, but the Adapter used in <code>AutoCompleteTextView</code> is not clearing and not getting updating properly. Could you please tell me what I am missing?</p>\n<p>Here goes my MainActivity class:</p>\n<pre><code>package com.example.connectdb;\n\nimport android.os.Bundle;\nimport android.os.Handler;\nimport android.os.Looper;\nimport android.text.Editable;\nimport android.text.TextWatcher;\nimport android.util.Log;\nimport android.widget.ArrayAdapter;\nimport android.widget.AutoCompleteTextView;\nimport androidx.appcompat.app.AppCompatActivity;\nimport org.json.JSONArray;\nimport org.json.JSONException;\nimport org.json.JSONObject;\n\nimport java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.io.OutputStreamWriter;\nimport java.net.HttpURLConnection;\nimport java.net.URL;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\n\npublic class MainActivity extends AppCompatActivity {\n    private static final String TAG = MainActivity.class.getSimpleName();\n    private static final String BASE_URL = &quot;http://192.168.0.154:8080/autocomplete/json&quot;;\n    private AutoCompleteTextView autoCompleteTextView;\n    private ArrayAdapter&lt;String&gt; adapter;\n    private String[] arr = {};\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        autoCompleteTextView = findViewById(R.id.autoCompleteTextView);\n        adapter = new ArrayAdapter&lt;&gt;(this, android.R.layout.simple_dropdown_item_1line, arr);\n        autoCompleteTextView.setThreshold(1);\n        autoCompleteTextView.setAdapter(adapter);\n        autoCompleteTextView.addTextChangedListener(textWatcher);\n    }\n    private final TextWatcher textWatcher = new TextWatcher() {\n        private ExecutorService executor = Executors.newSingleThreadExecutor();\n        private Handler handler = new Handler(Looper.getMainLooper());\n        private List&lt;String&gt; strings;\n        public void execute(String string) {\n            executor.execute(new Runnable() {\n                @Override\n                public void run() {\n                    strings = backgroundWork(string);\n                    handler.post(new Runnable() {\n                        @Override\n                        public void run() {\n                            changeAdapter(strings);\n                        }\n                    });\n                }\n            });\n        }\n        private List&lt;String&gt; backgroundWork(String string) {\n            List&lt;String&gt; results = new ArrayList&lt;&gt;();\n            try {\n                URL url = new URL(BASE_URL);\n                HttpURLConnection connection = (HttpURLConnection) url.openConnection();\n                connection.setRequestMethod(&quot;POST&quot;);\n                connection.setDoInput(true);\n                connection.setDoOutput(false);\n                connection.addRequestProperty(&quot;Content-Length&quot;, Integer.toString(6+string.length()));\n                connection.addRequestProperty(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;);\n                connection.connect();\n                OutputStreamWriter writer = new OutputStreamWriter(connection.getOutputStream());\n                writer.write(&quot;query=&quot;+string);\n                writer.flush();\n                int responseCode = connection.getResponseCode();\n                if (responseCode == HttpURLConnection.HTTP_OK) {\n                    InputStream inputStream = connection.getInputStream();\n                    BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(inputStream));\n                    StringBuilder stringBuilder = new StringBuilder();\n                    String line;\n                    while ((line = bufferedReader.readLine()) != null) {\n                        stringBuilder.append(line).append('\\n');\n                    }\n                    bufferedReader.close();\n                    inputStream.close();\n                    JSONArray jsonArray = new JSONArray(stringBuilder.toString());\n                    for (int i = 0; i &lt; jsonArray.length(); i++) {\n                        JSONObject jsonObject = jsonArray.getJSONObject(i);\n                        results.add(jsonObject.getString(&quot;interpretation&quot;));\n                    }\n                }\n            } catch (IOException | JSONException e) {\n                Log.e(TAG, &quot;Error occurred while searching&quot;, e);\n            }\n            return results;\n        }\n        @Override\n        public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n        }\n        @Override\n        public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n        }\n        @Override\n        public void afterTextChanged(Editable editable) {\n            String text = autoCompleteTextView.getText().toString().trim();\n            if (!text.isEmpty()) execute(text);\n        }\n    };\n    public void changeAdapter(List&lt;String&gt; strings) {\n        if (adapter != null) {\n            adapter.clear();\n            if (strings != null) adapter.addAll(strings);\n            adapter.notifyDataSetChanged();\n        }\n    }\n}\n</code></pre>\n<p>activity_main.xml here:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.MainActivity&quot;&gt;\n\n    &lt;AutoCompleteTextView\n        android:id=&quot;@+id/autoCompleteTextView&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_margin=&quot;16dp&quot;\n        android:hint=&quot;Search...&quot;\n        android:imeOptions=&quot;actionDone&quot;\n        android:inputType=&quot;textAutoComplete|textCapWords&quot; /&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n<p>AndroidManifest.xml here:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\n\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.ConnectDB&quot;\n        android:usesCleartextTraffic=&quot;true&quot;\n        tools:targetApi=&quot;31&quot;&gt;\n        &lt;activity\n            android:name=&quot;.MainActivity&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n"},{"tags":["java","swing"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":2,"creation_date":1687806489,"post_id":76559470,"comment_id":134985468,"body_markdown":"You can only have a single renderer for each column. So your custom renderer needs to control both the Font and alignment.","body":"You can only have a single renderer for each column. So your custom renderer needs to control both the Font and alignment."},{"owner":{"account_id":23517856,"reputation":125,"user_id":17565490,"display_name":"Ryan Day"},"score":0,"creation_date":1687851763,"post_id":76559470,"comment_id":134990689,"body_markdown":"Nice to kinow. Will work on it. Thank you","body":"Nice to kinow. Will work on it. Thank you"},{"owner":{"account_id":23517856,"reputation":125,"user_id":17565490,"display_name":"Ryan Day"},"score":0,"creation_date":1687866280,"post_id":76559470,"comment_id":134993699,"body_markdown":"Im sorry but I cant obtain a single renderer making the two thing. May I need a different renderer","body":"Im sorry but I cant obtain a single renderer making the two thing. May I need a different renderer"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1687873261,"post_id":76559470,"comment_id":134995517,"body_markdown":"Why? You already have the renderer to set the Font. So you just add your setHorizontalAlignement(...) statement to that renderer.  See: https://stackoverflow.com/a/42180634/131872 for an example. Post your ]mre] demonstrating the problem if you need more help","body":"Why? You already have the renderer to set the Font. So you just add your setHorizontalAlignement(...) statement to that renderer.  See: <a href=\"https://stackoverflow.com/a/42180634/131872\">stackoverflow.com/a/42180634/131872</a> for an example. Post your ]mre] demonstrating the problem if you need more help"},{"owner":{"account_id":23517856,"reputation":125,"user_id":17565490,"display_name":"Ryan Day"},"score":0,"creation_date":1687890903,"post_id":76559470,"comment_id":134999706,"body_markdown":"Pls, see the add after the original question","body":"Pls, see the add after the original question"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1687914759,"post_id":76559470,"comment_id":135002730,"body_markdown":"Read the Swing tutorial on [How to Use Tables](https://docs.oracle.com/javase/tutorial/uiswing/components/table.html) for the basics. *This must be letf aligned* - if a column has different rendering logic, then use a different renderer. You need one for the first column and one for the others. *with size of 100* - the renderer doesn&#39;t control the width of the column. Read the tutorial for information on how to control the width.","body":"Read the Swing tutorial on <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/table.html\" rel=\"nofollow noreferrer\">How to Use Tables</a> for the basics. <i>This must be letf aligned</i> - if a column has different rendering logic, then use a different renderer. You need one for the first column and one for the others. <i>with size of 100</i> - the renderer doesn&#39;t control the width of the column. Read the tutorial for information on how to control the width."}],"owner":{"account_id":23517856,"reputation":125,"user_id":17565490,"display_name":"Ryan Day"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687890843,"creation_date":1687805490,"question_id":76559470,"body_markdown":"==== New info and mre at bottom =====\r\n\r\nWhat I would like to get from the code below is the second row with a different font from the other rows and that the whole table is center aligned.\r\nThe problem is that if I leave both renders uncommented only the second one is displayed. If the first is the font change, only the center alignment is displayed and vice versa if the first is the alignment, only the font change is displayed\r\n\r\n    public class Example extends JFrame {\r\n     \r\n        private static final String[] COLUMNS = { &quot;1&quot;, &quot;2&quot;,&quot;3&quot;}; //, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot;, &quot;10&quot;, &quot;11&quot;, &quot;12&quot;, &quot;13&quot;, &quot;14&quot;, &quot;15&quot;  };\r\n    \r\n        public Example() {\r\n            super(&quot;test&quot;);\r\n            setDefaultCloseOperation(EXIT_ON_CLOSE);\r\n            setLayout(new BorderLayout());\r\n    \r\n            JTable table = new JTable(data(), COLUMNS);\r\n            \r\n            for (int i = 1; i&lt;= 2; i++){\r\n            table.getColumnModel().getColumn(i).setCellRenderer((TableCellRenderer) new DefaultTableCellRenderer() {\r\n                //@Override\r\n                public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row,\r\n                        int column) {\r\n                    Component c = super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);\r\n                    if (c instanceof JLabel) {\r\n                        JLabel renderer = (JLabel) c;\r\n                        if (row == 1) {\r\n                            renderer.setFont(new Font(&quot;Arial&quot;, Font.BOLD, 15));} \r\n                        else {\r\n                                renderer.setFont(table.getFont());} \r\n                    }\r\n                    return c;\r\n                }\r\n                });\r\n                }\r\n            /**\r\n            TableColumn column = null;\r\n            DefaultTableCellRenderer centerRenderer = new DefaultTableCellRenderer(); //center value in columns\r\n            centerRenderer.setHorizontalAlignment(JLabel.CENTER);\r\n            for (int i = 0; i &lt;= 2; i++) {\r\n            column = table.getColumnModel().getColumn(i);\r\n            if (i == 0) { //This must be letf aligned with size of 100\r\n                column.setPreferredWidth(100);}\r\n            else {\r\n                column.setPreferredWidth(30);\r\n                table.getColumnModel().getColumn(i).setCellRenderer(centerRenderer);\r\n            }}\r\n            \r\n            **/\r\n    \r\n            JScrollPane sp = new JScrollPane(table);\r\n            add(sp);\r\n            pack();\r\n            setLocationRelativeTo(null);\r\n        }\r\n    \r\n        private Object[][] data() {\r\n            Object[][] data = { { 113, 444, 234 }, { 233, 555, 234  }, { 110, 92, 234  }, { 55, 66, 234  }, { 123, 603, 234  }, { 412, 120, 234  }, };\r\n            return data;\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            SwingUtilities.invokeLater(() -&gt; new Example().setVisible(true));\r\n        }\r\n    }\r\n\r\n\r\n====\r\n==== This is new ===\r\n====\r\n\r\n=== It&#39;s not very orthodox but I didn&#39;t know how to do it ===\r\n\r\nThe link you suggested is good for two of the three things I would like to achieve: the colored background and the change of font on one line. [in the mre only column 0 is affected but this is not a problem)\r\n\r\nWhat I can&#39;t figure out is the sizing of the first column. Problem parts are commented out where column == 0\r\n\r\n\r\n    public class TableRenderer extends JPanel\r\n    {\r\n        public TableRenderer()\r\n        {\r\n            String[] columnNames = {&quot;String&quot;, &quot;Integer&quot;};\r\n            Object[][] data =\r\n            {\r\n                {&quot;AAAAAAAAAAAAAAAAAAAA&quot;, new Integer(1)},\r\n                {&quot;B&quot;, new Integer(2)},\r\n                {&quot;C&quot;, new Integer(10)},\r\n                {&quot;D&quot;, new Integer(4)}\r\n            };\r\n    \r\n            DefaultTableModel model = new DefaultTableModel(data, columnNames);\r\n            JTable table = new JTable( model );\r\n            table.setPreferredScrollableViewportSize(table.getPreferredSize());\r\n            JScrollPane scrollPane = new JScrollPane( table );\r\n            add( scrollPane );\r\n    \r\n            //  Override default renderer on a specific column\r\n    \r\n            TableCellRenderer colorRenderer = new ColorRenderer();\r\n            table.getColumnModel().getColumn(1).setCellRenderer( colorRenderer );\r\n        }\r\n    \r\n        /*\r\n        **  Color the focused cell\r\n        */\r\n        class ColorRenderer extends DefaultTableCellRenderer\r\n        {\r\n            public ColorRenderer()\r\n            {\r\n                super();\r\n                setHorizontalAlignment(JLabel.CENTER);\r\n            }\r\n    \r\n            @Override\r\n            public Component getTableCellRendererComponent(\r\n                JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column)\r\n            {\r\n                super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);\r\n    \r\n                if (isSelected)\r\n                    setBackground( table.getSelectionBackground() );\r\n                else\r\n                {\r\n                    setBackground( null );\r\n                    \r\n                    if (column == 0) { //This must be letf aligned with size of 100\r\n                    }//setPreferredWidth(100);}\r\n                    else {\r\n                        //setPreferredWidth(30);\r\n                        //table.getColumnModel().getColumn(i).setCellRenderer(colorRenderer) \r\n                    }\r\n                    try\r\n                    {\r\n                        int number = Integer.parseInt( value.toString() );\r\n                        if (row == 1) {\r\n                            setFont(new Font(&quot;Arial&quot;, Font.BOLD, 25));} \r\n                        if (number &gt; 9)\r\n                            setBackground( Color.RED );\r\n                    }\r\n                    catch(Exception e) {}\r\n                }\r\n    \r\n                return this;\r\n            }\r\n        }\r\n        \r\n        private static void createAndShowGUI()\r\n        {\r\n            JFrame frame = new JFrame(&quot;Color Renderer&quot;);\r\n            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n            frame.add(new TableRenderer());\r\n            frame.pack();\r\n            frame.setLocationByPlatform( true );\r\n            frame.setVisible( true );\r\n        }\r\n    \r\n        public static void main(String[] args)\r\n        {\r\n            EventQueue.invokeLater( () -&gt; createAndShowGUI() );\r\n    /*\r\n            EventQueue.invokeLater(new Runnable()\r\n            {\r\n                public void run()\r\n                {\r\n                    createAndShowGUI();\r\n                }\r\n            });\r\n    */\r\n        }}\r\n\r\n","title":"Can&#39;t obtain font change and center alignment at the same time","body":"<p>==== New info and mre at bottom =====</p>\n<p>What I would like to get from the code below is the second row with a different font from the other rows and that the whole table is center aligned.\nThe problem is that if I leave both renders uncommented only the second one is displayed. If the first is the font change, only the center alignment is displayed and vice versa if the first is the alignment, only the font change is displayed</p>\n<pre><code>public class Example extends JFrame {\n \n    private static final String[] COLUMNS = { &quot;1&quot;, &quot;2&quot;,&quot;3&quot;}; //, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot;, &quot;10&quot;, &quot;11&quot;, &quot;12&quot;, &quot;13&quot;, &quot;14&quot;, &quot;15&quot;  };\n\n    public Example() {\n        super(&quot;test&quot;);\n        setDefaultCloseOperation(EXIT_ON_CLOSE);\n        setLayout(new BorderLayout());\n\n        JTable table = new JTable(data(), COLUMNS);\n        \n        for (int i = 1; i&lt;= 2; i++){\n        table.getColumnModel().getColumn(i).setCellRenderer((TableCellRenderer) new DefaultTableCellRenderer() {\n            //@Override\n            public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row,\n                    int column) {\n                Component c = super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);\n                if (c instanceof JLabel) {\n                    JLabel renderer = (JLabel) c;\n                    if (row == 1) {\n                        renderer.setFont(new Font(&quot;Arial&quot;, Font.BOLD, 15));} \n                    else {\n                            renderer.setFont(table.getFont());} \n                }\n                return c;\n            }\n            });\n            }\n        /**\n        TableColumn column = null;\n        DefaultTableCellRenderer centerRenderer = new DefaultTableCellRenderer(); //center value in columns\n        centerRenderer.setHorizontalAlignment(JLabel.CENTER);\n        for (int i = 0; i &lt;= 2; i++) {\n        column = table.getColumnModel().getColumn(i);\n        if (i == 0) { //This must be letf aligned with size of 100\n            column.setPreferredWidth(100);}\n        else {\n            column.setPreferredWidth(30);\n            table.getColumnModel().getColumn(i).setCellRenderer(centerRenderer);\n        }}\n        \n        **/\n\n        JScrollPane sp = new JScrollPane(table);\n        add(sp);\n        pack();\n        setLocationRelativeTo(null);\n    }\n\n    private Object[][] data() {\n        Object[][] data = { { 113, 444, 234 }, { 233, 555, 234  }, { 110, 92, 234  }, { 55, 66, 234  }, { 123, 603, 234  }, { 412, 120, 234  }, };\n        return data;\n    }\n\n    public static void main(String[] args) {\n        SwingUtilities.invokeLater(() -&gt; new Example().setVisible(true));\n    }\n}\n</code></pre>\n<h1>====\n==== This is new ===</h1>\n<p>=== It's not very orthodox but I didn't know how to do it ===</p>\n<p>The link you suggested is good for two of the three things I would like to achieve: the colored background and the change of font on one line. [in the mre only column 0 is affected but this is not a problem)</p>\n<p>What I can't figure out is the sizing of the first column. Problem parts are commented out where column == 0</p>\n<pre><code>public class TableRenderer extends JPanel\n{\n    public TableRenderer()\n    {\n        String[] columnNames = {&quot;String&quot;, &quot;Integer&quot;};\n        Object[][] data =\n        {\n            {&quot;AAAAAAAAAAAAAAAAAAAA&quot;, new Integer(1)},\n            {&quot;B&quot;, new Integer(2)},\n            {&quot;C&quot;, new Integer(10)},\n            {&quot;D&quot;, new Integer(4)}\n        };\n\n        DefaultTableModel model = new DefaultTableModel(data, columnNames);\n        JTable table = new JTable( model );\n        table.setPreferredScrollableViewportSize(table.getPreferredSize());\n        JScrollPane scrollPane = new JScrollPane( table );\n        add( scrollPane );\n\n        //  Override default renderer on a specific column\n\n        TableCellRenderer colorRenderer = new ColorRenderer();\n        table.getColumnModel().getColumn(1).setCellRenderer( colorRenderer );\n    }\n\n    /*\n    **  Color the focused cell\n    */\n    class ColorRenderer extends DefaultTableCellRenderer\n    {\n        public ColorRenderer()\n        {\n            super();\n            setHorizontalAlignment(JLabel.CENTER);\n        }\n\n        @Override\n        public Component getTableCellRendererComponent(\n            JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column)\n        {\n            super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);\n\n            if (isSelected)\n                setBackground( table.getSelectionBackground() );\n            else\n            {\n                setBackground( null );\n                \n                if (column == 0) { //This must be letf aligned with size of 100\n                }//setPreferredWidth(100);}\n                else {\n                    //setPreferredWidth(30);\n                    //table.getColumnModel().getColumn(i).setCellRenderer(colorRenderer) \n                }\n                try\n                {\n                    int number = Integer.parseInt( value.toString() );\n                    if (row == 1) {\n                        setFont(new Font(&quot;Arial&quot;, Font.BOLD, 25));} \n                    if (number &gt; 9)\n                        setBackground( Color.RED );\n                }\n                catch(Exception e) {}\n            }\n\n            return this;\n        }\n    }\n    \n    private static void createAndShowGUI()\n    {\n        JFrame frame = new JFrame(&quot;Color Renderer&quot;);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.add(new TableRenderer());\n        frame.pack();\n        frame.setLocationByPlatform( true );\n        frame.setVisible( true );\n    }\n\n    public static void main(String[] args)\n    {\n        EventQueue.invokeLater( () -&gt; createAndShowGUI() );\n/*\n        EventQueue.invokeLater(new Runnable()\n        {\n            public void run()\n            {\n                createAndShowGUI();\n            }\n        });\n*/\n    }}\n</code></pre>\n"},{"tags":["java","http","batch-processing","job-scheduling"],"comments":[{"owner":{"account_id":213468,"reputation":103489,"user_id":466862,"display_name":"Mark Rotteveel"},"score":5,"creation_date":1673691085,"post_id":75116927,"comment_id":132557723,"body_markdown":"HTTP itself will do that just fine (it is something layered on top of TCP), but in my experience, HTTP servers, clients, and middleware like loadbalancers, firewalls and proxies might be configured to terminate HTTP connections after a few minutes. It might be better to have the HTTP request submit the job, return a job-id, and let the client poll for completion of that job.","body":"HTTP itself will do that just fine (it is something layered on top of TCP), but in my experience, HTTP servers, clients, and middleware like loadbalancers, firewalls and proxies might be configured to terminate HTTP connections after a few minutes. It might be better to have the HTTP request submit the job, return a job-id, and let the client poll for completion of that job."},{"owner":{"account_id":1205529,"reputation":3090,"user_id":1175279,"accept_rate":88,"display_name":"Dilip Raj Baral"},"score":0,"creation_date":1673767550,"post_id":75116927,"comment_id":132568604,"body_markdown":"Client polling is definitely something we have thought of but we feel it isn&#39;t very elegant. What would the polling interval be? Job completion time may vary from a couple seconds to hours. If you keep small interval, it might be an overkill for long running jobs; if you keep it large, it would result delay in getting results for short running jobs. Also, since the there will be multiple instances (pods) of Batch service, each request will hit different pod. So, batch service will need to store the job completion result into some persistent storage adding another layer of complexity.","body":"Client polling is definitely something we have thought of but we feel it isn&#39;t very elegant. What would the polling interval be? Job completion time may vary from a couple seconds to hours. If you keep small interval, it might be an overkill for long running jobs; if you keep it large, it would result delay in getting results for short running jobs. Also, since the there will be multiple instances (pods) of Batch service, each request will hit different pod. So, batch service will need to store the job completion result into some persistent storage adding another layer of complexity."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1673778258,"post_id":75116927,"comment_id":132570017,"body_markdown":"I have absolutely no practical experience with them, but what about web sockets? I believe they use the same ports as HTTP(S). And [as I understand it](https://stackoverflow.com/a/7620721/6395627), they are designed for long-lived connections with two-way communication. Again, I don&#39;t know if they&#39;re appropriate to your use case, but thought I&#39;d just throw the idea out there.","body":"I have absolutely no practical experience with them, but what about web sockets? I believe they use the same ports as HTTP(S). And <a href=\"https://stackoverflow.com/a/7620721/6395627\">as I understand it</a>, they are designed for long-lived connections with two-way communication. Again, I don&#39;t know if they&#39;re appropriate to your use case, but thought I&#39;d just throw the idea out there."},{"owner":{"account_id":1205529,"reputation":3090,"user_id":1175279,"accept_rate":88,"display_name":"Dilip Raj Baral"},"score":0,"creation_date":1673780126,"post_id":75116927,"comment_id":132570259,"body_markdown":"@Slaw This is an interesting idea and could potentially work. It will require us to do some R&amp;D to make with work with existing load balancers in place (a potential problem like Mark mentioned in the first comment.","body":"@Slaw This is an interesting idea and could potentially work. It will require us to do some R&amp;D to make with work with existing load balancers in place (a potential problem like Mark mentioned in the first comment."},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1674477512,"post_id":75116927,"comment_id":132715242,"body_markdown":"It sounds a bit weird. What if a computer goes to sleep? It seems like there are lots of ways this task can fail especially if you&#39;re running a task for hours. When it does fail, do you expect it to just start over?","body":"It sounds a bit weird. What if a computer goes to sleep? It seems like there are lots of ways this task can fail especially if you&#39;re running a task for hours. When it does fail, do you expect it to just start over?"},{"owner":{"account_id":19888427,"reputation":337,"user_id":14570999,"display_name":"Piotr"},"score":0,"creation_date":1674490081,"post_id":75116927,"comment_id":132719799,"body_markdown":"You need some state. In the past the state was in the connection that was open, it worked, you were not using that state directly and it was prone to all sort of issues. Once you moved your workload to openshift you have multiple abstractions added. Probably ingress controller in cluster and very likely load balancer infront of the cluster. Maybe also cloudflare (which by default will terminate connections after some time as well)\nLike someone mentioned all of them would have to support what you need. Options: pooling (easy &amp; dummy) or more async architecture with callbacks when job is done","body":"You need some state. In the past the state was in the connection that was open, it worked, you were not using that state directly and it was prone to all sort of issues. Once you moved your workload to openshift you have multiple abstractions added. Probably ingress controller in cluster and very likely load balancer infront of the cluster. Maybe also cloudflare (which by default will terminate connections after some time as well) Like someone mentioned all of them would have to support what you need. Options: pooling (easy &amp; dummy) or more async architecture with callbacks when job is done"}],"answers":[{"tags":[],"owner":{"account_id":7655262,"reputation":7506,"user_id":5802417,"display_name":"Michael Gantman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1673866936,"creation_date":1673866499,"answer_id":75133218,"question_id":75116927,"body_markdown":"When your worked with socket and TCPprotocol you were in control on how long to keep connections open. With HTTP you are only in control of logical connections and not physical ones. Actual connections are controlled by OS and usually IT people can configure all those timeouts. But by default how it works is that when you even close logical connection the real connection is no closed in anticipation of next communication. It is closed by OS and not controlled by your code. However even if it closes and your next request comes after that it is opened transparently to you. SO it doesn&#39;t really matter if it closed or not. It should be transparent to your code. So in short I assume that you can move to HTTP/HTTPS with no problems. But you will have to test and see. &lt;br&gt;&lt;br&gt;Also about other options on server to client communications you can look at my answer to this question: [How to continues send data from backend to frontend when something changes][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/71395004/how-to-continues-send-data-from-backend-to-frontend-when-something-changes/71395235#71395235","title":"Can we reliably keep HTTP/S connection open for a long time?","body":"<p>When your worked with socket and TCPprotocol you were in control on how long to keep connections open. With HTTP you are only in control of logical connections and not physical ones. Actual connections are controlled by OS and usually IT people can configure all those timeouts. But by default how it works is that when you even close logical connection the real connection is no closed in anticipation of next communication. It is closed by OS and not controlled by your code. However even if it closes and your next request comes after that it is opened transparently to you. SO it doesn't really matter if it closed or not. It should be transparent to your code. So in short I assume that you can move to HTTP/HTTPS with no problems. But you will have to test and see. <br><br>Also about other options on server to client communications you can look at my answer to this question: <a href=\"https://stackoverflow.com/questions/71395004/how-to-continues-send-data-from-backend-to-frontend-when-something-changes/71395235#71395235\">How to continues send data from backend to frontend when something changes</a></p>\n"},{"tags":[],"owner":{"account_id":1496659,"reputation":138,"user_id":1402425,"display_name":"vudangngoc"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674393096,"creation_date":1674393096,"answer_id":75200697,"question_id":75116927,"body_markdown":"IMHO, you should  improve your scheduler to a REST API server, Websocket isn&#39;t effective in this scenario, the connection will inactive most of time","title":"Can we reliably keep HTTP/S connection open for a long time?","body":"<p>IMHO, you should  improve your scheduler to a REST API server, Websocket isn't effective in this scenario, the connection will inactive most of time</p>\n"},{"tags":[],"owner":{"account_id":18904165,"reputation":15,"user_id":13791634,"display_name":"Bangarraju Vadapalli"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674443798,"creation_date":1674443798,"answer_id":75205426,"question_id":75116927,"body_markdown":"The jobs can be short-lived or long running. So, When a long running job fails in the middle, how does the restart of the job happen? Does it start from beginning again? \r\n\r\nIn a similar scenario, we had a database to keep track of the progress of the job (no of records successfully processed). So, the jobs can resume after a failure. With such a design, another webservice can monitor the status of the job by looking at the database. So, the main process is not impacted by constant polling by the client.","title":"Can we reliably keep HTTP/S connection open for a long time?","body":"<p>The jobs can be short-lived or long running. So, When a long running job fails in the middle, how does the restart of the job happen? Does it start from beginning again?</p>\n<p>In a similar scenario, we had a database to keep track of the progress of the job (no of records successfully processed). So, the jobs can resume after a failure. With such a design, another webservice can monitor the status of the job by looking at the database. So, the main process is not impacted by constant polling by the client.</p>\n"},{"tags":[],"owner":{"account_id":27597963,"reputation":1024,"user_id":21063779,"display_name":"Lae"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1674464172,"creation_date":1674464172,"answer_id":75207289,"question_id":75116927,"body_markdown":"There isn&#39;t a reliable way to keep a connection alive for a long period over the internet, because of nodes (routers, load balancers, proxies, nat gateways, etc) that may be sitting between your client and server, they might drop mid connection under load, some of them will happily ignore your HTTP keep alive request, or have an internal max connection duration time that will kill long running TCP connections, you may find it works for you today but there is no guarantee it will work for you tomorrow.\r\n\r\nSo you&#39;ll probably need to submit the job as a short lived request and check the status via other means:\r\n* Push based strategy by sending a webhook URL as part of the job submission and have the server call it (possibly with retries) on job completion to notify interested parties.\r\n* Pull based strategy by having the server return a job ID on submission, then have the client check periodically. Due to the nature of your job durations, you may want to implement this with some form of exponential backoff up to a certain limit, for example, first check after waiting for 2 seconds, then wait for 4 seconds before next check, then 8 seconds, and so on, up to a maximum of time you are happy to wait between each check. So that you can find out about short job completions sooner and not check too frequently for long jobs.","title":"Can we reliably keep HTTP/S connection open for a long time?","body":"<p>There isn't a reliable way to keep a connection alive for a long period over the internet, because of nodes (routers, load balancers, proxies, nat gateways, etc) that may be sitting between your client and server, they might drop mid connection under load, some of them will happily ignore your HTTP keep alive request, or have an internal max connection duration time that will kill long running TCP connections, you may find it works for you today but there is no guarantee it will work for you tomorrow.</p>\n<p>So you'll probably need to submit the job as a short lived request and check the status via other means:</p>\n<ul>\n<li>Push based strategy by sending a webhook URL as part of the job submission and have the server call it (possibly with retries) on job completion to notify interested parties.</li>\n<li>Pull based strategy by having the server return a job ID on submission, then have the client check periodically. Due to the nature of your job durations, you may want to implement this with some form of exponential backoff up to a certain limit, for example, first check after waiting for 2 seconds, then wait for 4 seconds before next check, then 8 seconds, and so on, up to a maximum of time you are happy to wait between each check. So that you can find out about short job completions sooner and not check too frequently for long jobs.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":299745,"reputation":739,"user_id":606513,"accept_rate":74,"display_name":"schneida"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1674476192,"creation_date":1674476192,"answer_id":75209378,"question_id":75116927,"body_markdown":"We have had bad experiences with long standing HTTP/HTTPS connections. We used to schedule short jobs (only a couple of minutes) via HTTP and wait for it to finish and send a response. This worked fine, until the jobs got longer (hours) and some network infrastructure closed the inactive connections. We ended up only submitting the request via HTTP, get an immediate response and then implemented a polling to wait for the response. At the time, the migration was pretty quick for us, but since then we have migrated it even further to use &quot;webhooks&quot;, e.g. allow the processor of the job to signal it&#39;s state back to the server using a known webhook address.","title":"Can we reliably keep HTTP/S connection open for a long time?","body":"<p>We have had bad experiences with long standing HTTP/HTTPS connections. We used to schedule short jobs (only a couple of minutes) via HTTP and wait for it to finish and send a response. This worked fine, until the jobs got longer (hours) and some network infrastructure closed the inactive connections. We ended up only submitting the request via HTTP, get an immediate response and then implemented a polling to wait for the response. At the time, the migration was pretty quick for us, but since then we have migrated it even further to use &quot;webhooks&quot;, e.g. allow the processor of the job to signal it's state back to the server using a known webhook address.</p>\n"},{"tags":[],"owner":{"account_id":21742379,"reputation":1,"user_id":16049551,"display_name":"Rams"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687890583,"creation_date":1687890583,"answer_id":76567717,"question_id":75116927,"body_markdown":"How about the Job Scheduler posting a message to a request-queue with a correlation id, and the job executor takes its own time to execute and posts a message to a different response-queue with the same correlation id?\r\nThe Job Scheduler can wake up with a message in the response queue and then based on the correlation id, figure out the next job and post it again on the request-queue.","title":"Can we reliably keep HTTP/S connection open for a long time?","body":"<p>How about the Job Scheduler posting a message to a request-queue with a correlation id, and the job executor takes its own time to execute and posts a message to a different response-queue with the same correlation id?\nThe Job Scheduler can wake up with a message in the response queue and then based on the correlation id, figure out the next job and post it again on the request-queue.</p>\n"}],"owner":{"account_id":1205529,"reputation":3090,"user_id":1175279,"accept_rate":88,"display_name":"Dilip Raj Baral"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1406,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":6,"score":6,"last_activity_date":1687890583,"creation_date":1673688006,"question_id":75116927,"body_markdown":"My team maintains an application (written on Java) which processes long running batch jobs. These jobs needs to be run on a defined sequence. Hence, the application starts a socket server on a pre-defined port to accept job execution requests. It keeps the socket open until the job completes (with success or failure). This way the job scheduler knows when one job ends and upon successful completion of the job, it triggers the next job in the pre-defined sequence. If the job fails, scheduler sends out an alert.\r\n\r\nThis is a setup we have had for over a decade. We have some jobs which runs for a few minutes and other which takes a couple hours (depending on the volume) to complete. The setup has worked without any issues.\r\n\r\nNow, we need to move this application to a container (RedHat OpenShift Container Platform) and the infra policy in place allows only default HTTPS port be exposed. The scheduler sits outside OCP and cannot access any port other than the default HTTPS port. \r\n\r\nIn theory, we could use the HTTPS, set Client timeout to a very large duration and try to mimic the the current setup with TCP socket. But would this setup be reliable enough as HTTP protocol is designed to serve short-lived requests?","title":"Can we reliably keep HTTP/S connection open for a long time?","body":"<p>My team maintains an application (written on Java) which processes long running batch jobs. These jobs needs to be run on a defined sequence. Hence, the application starts a socket server on a pre-defined port to accept job execution requests. It keeps the socket open until the job completes (with success or failure). This way the job scheduler knows when one job ends and upon successful completion of the job, it triggers the next job in the pre-defined sequence. If the job fails, scheduler sends out an alert.</p>\n<p>This is a setup we have had for over a decade. We have some jobs which runs for a few minutes and other which takes a couple hours (depending on the volume) to complete. The setup has worked without any issues.</p>\n<p>Now, we need to move this application to a container (RedHat OpenShift Container Platform) and the infra policy in place allows only default HTTPS port be exposed. The scheduler sits outside OCP and cannot access any port other than the default HTTPS port.</p>\n<p>In theory, we could use the HTTPS, set Client timeout to a very large duration and try to mimic the the current setup with TCP socket. But would this setup be reliable enough as HTTP protocol is designed to serve short-lived requests?</p>\n"},{"tags":["java","libgdx","game-development"],"owner":{"account_id":28401028,"reputation":13,"user_id":21725858,"display_name":"Ugurcan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687890535,"creation_date":1687890535,"question_id":76567710,"body_markdown":"I was messing around with Scene2D and Screen Caches and was wondering what I did wrong. Before I introduced Scene2D to my project everything worked fine. I have a Loading Screen which loads the assets I need for my game with a Scene2D LoadingScreenUI to show the user a progressbar. As far as I know everything with the loading is working.\r\nNow I tried the exact same setup with my MainGameScreen and its MainGameUI, so my world and my entities like the player and the monsters are loaded and visible on the screen + the UI of the MainGameScreen, which is currently a test output.\r\nIt could be that I made something wrong with my camera or the viewport.\r\n\r\n[![The current result of my game, after its started and the loading of the assets is done](https://i.stack.imgur.com/hGz38.png)](https://i.stack.imgur.com/hGz38.png)\r\n\r\nThe screen should have a classic orthographic tilemap with three diffrent tile types, one player and two monsters, but instead its all black.\r\n\r\n[![How the game should look (this is a picture of my main branch without the experimental code)](https://i.stack.imgur.com/9Z94y.png)](https://i.stack.imgur.com/9Z94y.png)\r\n\r\n\r\n```Java\r\npublic abstract class AbstractScreen&lt;T extends Table&gt; implements Screen {\r\n\tprotected final SafeHumankindGame context;\r\n\tprotected final T screenUI;\r\n\tprotected final Stage stage;\r\n\tprotected ExtendViewport extendViewport;\r\n\t\r\n\tpublic AbstractScreen( SafeHumankindGame context ) {\r\n\t\tthis.context = context;\r\n\t\textendViewport = context.getExtendViewport();\r\n\t\tstage = context.getStage();\r\n\t\tscreenUI = getScreenUI( context.getSkin() );\r\n\t}\r\n\t\r\n\tprotected abstract T getScreenUI( final Skin skin );\r\n\t\r\n\r\n\t@Override\r\n\tpublic void show() {\r\n\t\tstage.addActor( screenUI );\r\n\t}\r\n\t\r\n\r\n\t@Override\r\n\tpublic void resize( final int width, final int height ) {\r\n\t\textendViewport.update( width, height );\r\n\t\tstage.getViewport().update( width, height, true );\r\n\t}\r\n\t\r\n\r\n\t@Override\r\n\tpublic void hide() {\r\n\t\tstage.getRoot().removeActor( screenUI );\r\n\t}\r\n\t\r\n}\r\n```\r\n\r\n```Java\r\npublic class MainGameUI extends Table {\r\n\tpublic MainGameUI( final Skin skin ) {\r\n\t\tsuper( skin );\r\n\t\tsetFillParent( true );\r\n\t\t\r\n\t\t\r\n\t\tadd( new TextButton( &quot;Blub&quot;, skin, &quot;huge&quot; ) );\r\n\t\tsetDebug( true, true );\r\n\t}\r\n}\r\n```\r\n\r\n```Java\r\npublic class MainGameScreen extends AbstractScreen&lt;MainGameUI&gt; {\r\n\tprivate static final String TAG = SafeHumankindGame.class.getSimpleName();\r\n\tprivate ExtendViewport extendViewport;\r\n\tprivate WorldGenerator worldRen;\r\n\tprivate Entity player;\r\n\tprivate Entity rangedMonster;\r\n\tprivate Entity meeleMonster;\r\n\tprivate OrthographicCamera camera;\r\n\t\r\n\t\r\n\tpublic MainGameScreen( final SafeHumankindGame context ) {\r\n\t\tsuper( context );\r\n\t\textendViewport = context.getExtendViewport();\r\n\t\tcamera = new OrthographicCamera();\r\n\t\textendViewport.setCamera( camera );\r\n\t\tworldRen = new WorldGenerator( context );\r\n\t\tplayer = new Player( context, this );\r\n\t\trangedMonster = new RangedMonster( context, this );\r\n\t\tmeeleMonster = new MeeleMonster( context, this );\r\n\t}\r\n\t\r\n\t\r\n\t@Override\r\n\tprotected MainGameUI getScreenUI( Skin skin ) {\r\n\t\treturn new MainGameUI( skin );\r\n\t}\r\n\t\r\n\r\n\t@Override\r\n\tpublic void show() {\r\n\t\r\n\t}\r\n\t\r\n\r\n\t@Override\r\n\tpublic void render( float delta ) {\r\n\t\tGdx.gl.glClearColor( 0.0f, 0.0f, 0.0f, 1.0f );\r\n\t\tGdx.gl.glClear( GL20.GL_COLOR_BUFFER_BIT );\r\n\t\tif( Gdx.input.isKeyJustPressed( Input.Keys.ESCAPE ) ) {\r\n\t\t\tcontext.setScreen( ScreenType.MENUE );\r\n\t\t}\r\n\t\textendViewport.apply();\r\n\t\tcontext.getSpriteBatch().setProjectionMatrix( extendViewport.getCamera().combined );\r\n\t\tcontext.getSpriteBatch().begin();\r\n\t\tworldRen.drawGround( context.getSpriteBatch() );\r\n\t\tplayer.render( delta, context.getSpriteBatch() );\r\n\t\trangedMonster.render( delta, context.getSpriteBatch() );\r\n\t\tmeeleMonster.render( delta, context.getSpriteBatch() );\r\n\t\tcontext.getSpriteBatch().end();\r\n\t\tcamControls();\r\n\t\tplayer.update();\r\n\t\trangedMonster.update();\r\n\t\tmeeleMonster.update();\r\n\t\textendViewport.getCamera().position.y = player.getPosition().y + ( player.getEntityDimension().y / 2 );\r\n\t\textendViewport.getCamera().position.x = player.getPosition().x + ( player.getEntityDimension().x / 2 );\r\n\t\tcamera.update();\r\n\t}\r\n```\r\n\r\nThe brain of my Game is the SafeHumankindGame class. Here im loading and initializing the skin and setting my screens:\r\n```Java\r\npublic class SafeHumankindGame extends Game {\r\n\tprivate static final String TAG = SafeHumankindGame.class.getSimpleName();\r\n\tprivate final float WIDTH = 1280;\r\n\tprivate final float HEIGHT = 720;\r\n\tprivate ExtendViewport extendViewport;\r\n\tprivate float myDelta;\r\n\tprivate SpriteBatch spriteBatch;\r\n\tprivate AssetManager assetManager;\r\n\tprivate Skin skin;\r\n\tprivate EnumMap&lt;ScreenType, AbstractScreen&gt; screenCache;\r\n\tprivate Stage stage;\r\n\t\r\n\tpublic AssetManager getAssetManager() {\r\n\t\treturn assetManager;\r\n\t}\r\n\t\r\n\tpublic void setAssetManager( AssetManager assetManager ) {\r\n\t\tthis.assetManager = assetManager;\r\n\t}\r\n\t\r\n\tpublic float getWIDTH() {\r\n\t\treturn WIDTH;\r\n\t}\r\n\t\r\n\tpublic float getHEIGHT() {\r\n\t\treturn HEIGHT;\r\n\t}\r\n\t\r\n\r\n\t@Override\r\n\tpublic void create() {\r\n\t\tGdx.app.setLogLevel( Application.LOG_DEBUG );\r\n\t\t\r\n\t\t//initialize assetManager\r\n\t\tassetManager = new AssetManager();\r\n\t\tassetManager.setLoader( TextureAtlas.class, new TextureAtlasLoader( assetManager.getFileHandleResolver() ) );\r\n\t\tassetManager.setLoader( Texture.class, new TextureLoader( assetManager.getFileHandleResolver() ) );\r\n\t\t\r\n\t\tspriteBatch = new SpriteBatch();\r\n\t\textendViewport = new ExtendViewport( WIDTH, HEIGHT );\r\n\t\t\r\n\t\tinitSkin();\r\n\t\t// window height and width\r\n\t\tstage = new Stage( extendViewport, spriteBatch );\r\n\t\tmyDelta = 0.0f;\r\n\t\t\r\n\t\t\r\n\t\t//init first screen\r\n\t\tscreenCache = new EnumMap&lt;ScreenType, AbstractScreen&gt;( ScreenType.class );\r\n\t\tsetScreen( ScreenType.LOADING );\r\n\t}\r\n\t\r\n\tpublic Stage getStage() {\r\n\t\treturn stage;\r\n\t}\r\n\t\r\n\tpublic Skin getSkin() {\r\n\t\treturn skin;\r\n\t}\r\n\t\r\n\tpublic ExtendViewport getExtendViewport() {\r\n\t\treturn extendViewport;\r\n\t}\r\n\t\r\n\tprivate void initSkin() {\r\n\t\tfinal ObjectMap&lt;String, Object&gt; resources = new ObjectMap&lt;String, Object&gt;();\r\n\t\tfinal FreeTypeFontGenerator fontGenerator = new FreeTypeFontGenerator( Gdx.files.internal( &quot;ui/font.ttf&quot; ) );\r\n\t\tfinal FreeTypeFontGenerator.FreeTypeFontParameter fontParameter = new FreeTypeFontGenerator.FreeTypeFontParameter();\r\n\t\tfontParameter.minFilter = Texture.TextureFilter.Linear;\r\n\t\tfontParameter.magFilter = Texture.TextureFilter.Linear;\r\n\t\tfinal int[] sizesToCreate = { 16, 20, 26, 32 };\r\n\t\tfor( int size : sizesToCreate ) {\r\n\t\t\tfontParameter.size = size;\r\n\t\t\tresources.put( &quot;font_&quot; + size, fontGenerator.generateFont( fontParameter ) );\r\n\t\t}\r\n\t\tfontGenerator.dispose();\r\n\t\t\r\n\t\t//load skin\r\n\t\tfinal SkinLoader.SkinParameter skinParameter = new SkinLoader.SkinParameter( &quot;ui/hud.atlas&quot;, resources );\r\n\t\tassetManager.load( &quot;ui/hud.json&quot;, Skin.class, skinParameter );\r\n\t\tassetManager.finishLoading();\r\n\t\tskin = assetManager.get( &quot;ui/hud.json&quot;, Skin.class );\r\n\t}\r\n\t\r\n\tpublic SpriteBatch getSpriteBatch() {\r\n\t\treturn spriteBatch;\r\n\t}\r\n\t\r\n\tpublic void setScreen( final ScreenType screenType ) {\r\n\t\tfinal Screen screen = screenCache.get( screenType );\r\n\t\tif( screen == null ) {\r\n\t\t\ttry {\r\n\t\t\t\tGdx.app.debug( TAG, &quot;Creating new screen: &quot; + screenType );\r\n\t\t\t\tfinal AbstractScreen newScreen = ( AbstractScreen ) ClassReflection.getConstructor( screenType.getScreenClass(), SafeHumankindGame.class ).newInstance( this );\r\n\t\t\t\tscreenCache.put( screenType, newScreen );\r\n\t\t\t\tsetScreen( newScreen );\r\n\t\t\t}\r\n\t\t\tcatch( ReflectionException e ) {\r\n\t\t\t\tthrow new GdxRuntimeException( &quot;Screen &quot; + screenType + &quot; could not be created&quot;, e );\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tGdx.app.debug( TAG, &quot;Switching to new screen: &quot; + screenType );\r\n\t\t\tsetScreen( screen );\r\n\t\t}\r\n\t}\r\n\t\r\n\t@Override\r\n\tpublic void dispose() {\r\n\t\tsuper.dispose();\r\n\t\tspriteBatch.dispose();\r\n\t\tassetManager.dispose();\r\n\t\tstage.dispose();\r\n\t}\r\n\t\r\n\t@Override\r\n\tpublic void render() {\r\n\t\tsuper.render();\r\n\t\textendViewport.apply();\r\n\t\tmyDelta = Gdx.graphics.getDeltaTime();\r\n\t\t\r\n\t\tstage.getViewport().apply();\r\n\t\tstage.act();\r\n\t\tstage.draw();\r\n\t}\r\n}\r\n```\r\n\r\nI&#39;m not getting any ErrorMessages and the loggers I build in are all working fine and dont show me anything wrong.\r\nI&#39;m very sure the Entities and the world is rendered somewhere somehow, because when I change the backgound color of the MainGameScreen render method it works. The test output of the GameUI is also visible. When I press WASD, the player is moving, but not visible. I know the player is moving, because my camera is bound to the players positon and the camera moves looking into the nothingness. My Testoutputs of showing me every position of every Tile on the map and the current position of my player is also working and giving me the right data on the console.\r\n\r\n","title":"How do i render my world and entities properly and setting up my Camera with the viewport right?","body":"<p>I was messing around with Scene2D and Screen Caches and was wondering what I did wrong. Before I introduced Scene2D to my project everything worked fine. I have a Loading Screen which loads the assets I need for my game with a Scene2D LoadingScreenUI to show the user a progressbar. As far as I know everything with the loading is working.\nNow I tried the exact same setup with my MainGameScreen and its MainGameUI, so my world and my entities like the player and the monsters are loaded and visible on the screen + the UI of the MainGameScreen, which is currently a test output.\nIt could be that I made something wrong with my camera or the viewport.</p>\n<p><a href=\"https://i.stack.imgur.com/hGz38.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hGz38.png\" alt=\"The current result of my game, after its started and the loading of the assets is done\" /></a></p>\n<p>The screen should have a classic orthographic tilemap with three diffrent tile types, one player and two monsters, but instead its all black.</p>\n<p><a href=\"https://i.stack.imgur.com/9Z94y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9Z94y.png\" alt=\"How the game should look (this is a picture of my main branch without the experimental code)\" /></a></p>\n<pre><code>public abstract class AbstractScreen&lt;T extends Table&gt; implements Screen {\n    protected final SafeHumankindGame context;\n    protected final T screenUI;\n    protected final Stage stage;\n    protected ExtendViewport extendViewport;\n    \n    public AbstractScreen( SafeHumankindGame context ) {\n        this.context = context;\n        extendViewport = context.getExtendViewport();\n        stage = context.getStage();\n        screenUI = getScreenUI( context.getSkin() );\n    }\n    \n    protected abstract T getScreenUI( final Skin skin );\n    \n\n    @Override\n    public void show() {\n        stage.addActor( screenUI );\n    }\n    \n\n    @Override\n    public void resize( final int width, final int height ) {\n        extendViewport.update( width, height );\n        stage.getViewport().update( width, height, true );\n    }\n    \n\n    @Override\n    public void hide() {\n        stage.getRoot().removeActor( screenUI );\n    }\n    \n}\n</code></pre>\n<pre><code>public class MainGameUI extends Table {\n    public MainGameUI( final Skin skin ) {\n        super( skin );\n        setFillParent( true );\n        \n        \n        add( new TextButton( &quot;Blub&quot;, skin, &quot;huge&quot; ) );\n        setDebug( true, true );\n    }\n}\n</code></pre>\n<pre><code>public class MainGameScreen extends AbstractScreen&lt;MainGameUI&gt; {\n    private static final String TAG = SafeHumankindGame.class.getSimpleName();\n    private ExtendViewport extendViewport;\n    private WorldGenerator worldRen;\n    private Entity player;\n    private Entity rangedMonster;\n    private Entity meeleMonster;\n    private OrthographicCamera camera;\n    \n    \n    public MainGameScreen( final SafeHumankindGame context ) {\n        super( context );\n        extendViewport = context.getExtendViewport();\n        camera = new OrthographicCamera();\n        extendViewport.setCamera( camera );\n        worldRen = new WorldGenerator( context );\n        player = new Player( context, this );\n        rangedMonster = new RangedMonster( context, this );\n        meeleMonster = new MeeleMonster( context, this );\n    }\n    \n    \n    @Override\n    protected MainGameUI getScreenUI( Skin skin ) {\n        return new MainGameUI( skin );\n    }\n    \n\n    @Override\n    public void show() {\n    \n    }\n    \n\n    @Override\n    public void render( float delta ) {\n        Gdx.gl.glClearColor( 0.0f, 0.0f, 0.0f, 1.0f );\n        Gdx.gl.glClear( GL20.GL_COLOR_BUFFER_BIT );\n        if( Gdx.input.isKeyJustPressed( Input.Keys.ESCAPE ) ) {\n            context.setScreen( ScreenType.MENUE );\n        }\n        extendViewport.apply();\n        context.getSpriteBatch().setProjectionMatrix( extendViewport.getCamera().combined );\n        context.getSpriteBatch().begin();\n        worldRen.drawGround( context.getSpriteBatch() );\n        player.render( delta, context.getSpriteBatch() );\n        rangedMonster.render( delta, context.getSpriteBatch() );\n        meeleMonster.render( delta, context.getSpriteBatch() );\n        context.getSpriteBatch().end();\n        camControls();\n        player.update();\n        rangedMonster.update();\n        meeleMonster.update();\n        extendViewport.getCamera().position.y = player.getPosition().y + ( player.getEntityDimension().y / 2 );\n        extendViewport.getCamera().position.x = player.getPosition().x + ( player.getEntityDimension().x / 2 );\n        camera.update();\n    }\n</code></pre>\n<p>The brain of my Game is the SafeHumankindGame class. Here im loading and initializing the skin and setting my screens:</p>\n<pre><code>public class SafeHumankindGame extends Game {\n    private static final String TAG = SafeHumankindGame.class.getSimpleName();\n    private final float WIDTH = 1280;\n    private final float HEIGHT = 720;\n    private ExtendViewport extendViewport;\n    private float myDelta;\n    private SpriteBatch spriteBatch;\n    private AssetManager assetManager;\n    private Skin skin;\n    private EnumMap&lt;ScreenType, AbstractScreen&gt; screenCache;\n    private Stage stage;\n    \n    public AssetManager getAssetManager() {\n        return assetManager;\n    }\n    \n    public void setAssetManager( AssetManager assetManager ) {\n        this.assetManager = assetManager;\n    }\n    \n    public float getWIDTH() {\n        return WIDTH;\n    }\n    \n    public float getHEIGHT() {\n        return HEIGHT;\n    }\n    \n\n    @Override\n    public void create() {\n        Gdx.app.setLogLevel( Application.LOG_DEBUG );\n        \n        //initialize assetManager\n        assetManager = new AssetManager();\n        assetManager.setLoader( TextureAtlas.class, new TextureAtlasLoader( assetManager.getFileHandleResolver() ) );\n        assetManager.setLoader( Texture.class, new TextureLoader( assetManager.getFileHandleResolver() ) );\n        \n        spriteBatch = new SpriteBatch();\n        extendViewport = new ExtendViewport( WIDTH, HEIGHT );\n        \n        initSkin();\n        // window height and width\n        stage = new Stage( extendViewport, spriteBatch );\n        myDelta = 0.0f;\n        \n        \n        //init first screen\n        screenCache = new EnumMap&lt;ScreenType, AbstractScreen&gt;( ScreenType.class );\n        setScreen( ScreenType.LOADING );\n    }\n    \n    public Stage getStage() {\n        return stage;\n    }\n    \n    public Skin getSkin() {\n        return skin;\n    }\n    \n    public ExtendViewport getExtendViewport() {\n        return extendViewport;\n    }\n    \n    private void initSkin() {\n        final ObjectMap&lt;String, Object&gt; resources = new ObjectMap&lt;String, Object&gt;();\n        final FreeTypeFontGenerator fontGenerator = new FreeTypeFontGenerator( Gdx.files.internal( &quot;ui/font.ttf&quot; ) );\n        final FreeTypeFontGenerator.FreeTypeFontParameter fontParameter = new FreeTypeFontGenerator.FreeTypeFontParameter();\n        fontParameter.minFilter = Texture.TextureFilter.Linear;\n        fontParameter.magFilter = Texture.TextureFilter.Linear;\n        final int[] sizesToCreate = { 16, 20, 26, 32 };\n        for( int size : sizesToCreate ) {\n            fontParameter.size = size;\n            resources.put( &quot;font_&quot; + size, fontGenerator.generateFont( fontParameter ) );\n        }\n        fontGenerator.dispose();\n        \n        //load skin\n        final SkinLoader.SkinParameter skinParameter = new SkinLoader.SkinParameter( &quot;ui/hud.atlas&quot;, resources );\n        assetManager.load( &quot;ui/hud.json&quot;, Skin.class, skinParameter );\n        assetManager.finishLoading();\n        skin = assetManager.get( &quot;ui/hud.json&quot;, Skin.class );\n    }\n    \n    public SpriteBatch getSpriteBatch() {\n        return spriteBatch;\n    }\n    \n    public void setScreen( final ScreenType screenType ) {\n        final Screen screen = screenCache.get( screenType );\n        if( screen == null ) {\n            try {\n                Gdx.app.debug( TAG, &quot;Creating new screen: &quot; + screenType );\n                final AbstractScreen newScreen = ( AbstractScreen ) ClassReflection.getConstructor( screenType.getScreenClass(), SafeHumankindGame.class ).newInstance( this );\n                screenCache.put( screenType, newScreen );\n                setScreen( newScreen );\n            }\n            catch( ReflectionException e ) {\n                throw new GdxRuntimeException( &quot;Screen &quot; + screenType + &quot; could not be created&quot;, e );\n            }\n        }\n        else {\n            Gdx.app.debug( TAG, &quot;Switching to new screen: &quot; + screenType );\n            setScreen( screen );\n        }\n    }\n    \n    @Override\n    public void dispose() {\n        super.dispose();\n        spriteBatch.dispose();\n        assetManager.dispose();\n        stage.dispose();\n    }\n    \n    @Override\n    public void render() {\n        super.render();\n        extendViewport.apply();\n        myDelta = Gdx.graphics.getDeltaTime();\n        \n        stage.getViewport().apply();\n        stage.act();\n        stage.draw();\n    }\n}\n</code></pre>\n<p>I'm not getting any ErrorMessages and the loggers I build in are all working fine and dont show me anything wrong.\nI'm very sure the Entities and the world is rendered somewhere somehow, because when I change the backgound color of the MainGameScreen render method it works. The test output of the GameUI is also visible. When I press WASD, the player is moving, but not visible. I know the player is moving, because my camera is bound to the players positon and the camera moves looking into the nothingness. My Testoutputs of showing me every position of every Tile on the map and the current position of my player is also working and giving me the right data on the console.</p>\n"},{"tags":["java","junit","junit5","maven-surefire-plugin"],"answers":[{"tags":[],"owner":{"account_id":15361,"reputation":4976,"user_id":32352,"accept_rate":62,"display_name":"johanneslink"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1687890311,"creation_date":1632232158,"answer_id":69270023,"question_id":69269641,"body_markdown":"`JUnitPlatform` has been deprecated. \r\n\r\nThe corresponding new feature is the _JUnit Platform Suite Engine_. See [JUnit 5 User Guide: 6.2. JUnit Platform Suite Engine](https://junit.org/junit5/docs/current/user-guide/index.html#junit-platform-suite-engine).\r\n\r\nHowever, if it’s just about categorizing tests, tags, which are much simpler, might be sufficient. See [JUnit 5 User Guide: 2.9 Tagging and Filtering](https://junit.org/junit5/docs/current/user-guide/index.html#writing-tests-tagging-and-filtering).","title":"JUnit 5 and Test Suites","body":"<p><code>JUnitPlatform</code> has been deprecated.</p>\n<p>The corresponding new feature is the <em>JUnit Platform Suite Engine</em>. See <a href=\"https://junit.org/junit5/docs/current/user-guide/index.html#junit-platform-suite-engine\" rel=\"nofollow noreferrer\">JUnit 5 User Guide: 6.2. JUnit Platform Suite Engine</a>.</p>\n<p>However, if it’s just about categorizing tests, tags, which are much simpler, might be sufficient. See <a href=\"https://junit.org/junit5/docs/current/user-guide/index.html#writing-tests-tagging-and-filtering\" rel=\"nofollow noreferrer\">JUnit 5 User Guide: 2.9 Tagging and Filtering</a>.</p>\n"}],"owner":{"account_id":179533,"reputation":4405,"user_id":412270,"accept_rate":70,"display_name":"myborobudur"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5256,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":69270023,"answer_count":1,"score":2,"last_activity_date":1687890311,"creation_date":1632230549,"question_id":69269641,"body_markdown":"We have a pure JUnit-5 project and we want to categories our unit tests. \r\n\r\nTo do so, what I understand is we need to include the JUnit-4 `@RunWith(JUnitPlatform.class)`. \r\n\r\n    import org.junit.platform.runner.JUnitPlatform;\r\n    import org.junit.platform.suite.api.IncludeTags;\r\n    import org.junit.platform.suite.api.SelectPackages;\r\n    import org.junit.runner.RunWith;\r\n    \r\n    @RunWith(JUnitPlatform.class)\r\n    @SelectPackages(&quot;my.project.domain&quot;)\r\n    @IncludeTags(&quot;long-running-test&quot;) \r\n    public interface LongRunningTestSuite {}\r\n\r\nIn Intellij-Idea I can run all or just test suites without problems but I get an error on the execution with maven:\r\n* in Intellij-Idea some test cases fail\r\n* on the console I have an endless loop\r\n\r\nThis didn&#39;t help:\r\n\r\n\t&lt;plugin&gt;\r\n\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n\t\t&lt;configuration&gt;\r\n\t\t\t&lt;skip&gt;false&lt;/skip&gt;\r\n\t\t\t&lt;excludes&gt;\r\n\t\t\t\t&lt;exclude&gt;**/*TestSuite.java&lt;/exclude&gt;\r\n\t\t\t&lt;/excludes&gt;\r\n\t\t\t&lt;includes&gt;\r\n\t\t\t\t&lt;include&gt;**/*Test.java, **/*IT.java&lt;/include&gt;\r\n\t\t\t&lt;/includes&gt;\r\n\t\t&lt;/configuration&gt;\r\n\t&lt;/plugin&gt;\r\n\r\nIf I just remove all the `XyzTestSuite.java` classes the maven build is successful. I also tried `&lt;exclude&gt;my.project.domain.testsuite&lt;/exclude&gt;`.\r\n\r\nThe exclution seams not to work. Why?","title":"JUnit 5 and Test Suites","body":"<p>We have a pure JUnit-5 project and we want to categories our unit tests.</p>\n<p>To do so, what I understand is we need to include the JUnit-4 <code>@RunWith(JUnitPlatform.class)</code>.</p>\n<pre><code>import org.junit.platform.runner.JUnitPlatform;\nimport org.junit.platform.suite.api.IncludeTags;\nimport org.junit.platform.suite.api.SelectPackages;\nimport org.junit.runner.RunWith;\n\n@RunWith(JUnitPlatform.class)\n@SelectPackages(&quot;my.project.domain&quot;)\n@IncludeTags(&quot;long-running-test&quot;) \npublic interface LongRunningTestSuite {}\n</code></pre>\n<p>In Intellij-Idea I can run all or just test suites without problems but I get an error on the execution with maven:</p>\n<ul>\n<li>in Intellij-Idea some test cases fail</li>\n<li>on the console I have an endless loop</li>\n</ul>\n<p>This didn't help:</p>\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n    &lt;configuration&gt;\n        &lt;skip&gt;false&lt;/skip&gt;\n        &lt;excludes&gt;\n            &lt;exclude&gt;**/*TestSuite.java&lt;/exclude&gt;\n        &lt;/excludes&gt;\n        &lt;includes&gt;\n            &lt;include&gt;**/*Test.java, **/*IT.java&lt;/include&gt;\n        &lt;/includes&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>If I just remove all the <code>XyzTestSuite.java</code> classes the maven build is successful. I also tried <code>&lt;exclude&gt;my.project.domain.testsuite&lt;/exclude&gt;</code>.</p>\n<p>The exclution seams not to work. Why?</p>\n"},{"tags":["java","spring","spring-boot","spring-kafka"],"answers":[{"tags":[],"owner":{"account_id":1288095,"reputation":169316,"user_id":1240763,"display_name":"Gary Russell"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1687890167,"creation_date":1687872354,"answer_id":76565363,"question_id":76560881,"body_markdown":"See the javadocs; by default all exceptions are retryable except for a configured set of exceptions that are considered fatal. You can modify or replace that set:\r\n\r\n```java\r\n/**\r\n * Add exception types to the default list. By default, the following exceptions will\r\n * not be retried:\r\n * &lt;ul&gt;\r\n * &lt;li&gt;{@link DeserializationException}&lt;/li&gt;\r\n * &lt;li&gt;{@link MessageConversionException}&lt;/li&gt;\r\n * &lt;li&gt;{@link ConversionException}&lt;/li&gt;\r\n * &lt;li&gt;{@link MethodArgumentResolutionException}&lt;/li&gt;\r\n * &lt;li&gt;{@link NoSuchMethodException}&lt;/li&gt;\r\n * &lt;li&gt;{@link ClassCastException}&lt;/li&gt;\r\n * &lt;/ul&gt;\r\n * All others will be retried, unless {@link #defaultFalse()} has been called.\r\n * @param exceptionTypes the exception types.\r\n * @see #removeClassification(Class)\r\n * @see #setClassifications(Map, boolean)\r\n */\r\n@SafeVarargs\r\n@SuppressWarnings(&quot;varargs&quot;)\r\npublic final void addNotRetryableExceptions(Class&lt;? extends Exception&gt;... exceptionTypes) {\r\n```\r\n\r\nYou don&#39;t need to add retryable exceptions, unless you have called `defaultFalse()`.\r\n\r\nFor complete control over back off selection, you can provide a back off function:\r\n\r\n```java\r\n/**\r\n * Set a function to dynamically determine the {@link BackOff} to use, based on the\r\n * consumer record and/or exception. If null is returned, the default BackOff will be\r\n * used.\r\n * @param backOffFunction the function.\r\n * @since 2.6\r\n */\r\npublic void setBackOffFunction(BiFunction&lt;ConsumerRecord&lt;?, ?&gt;, Exception, BackOff&gt; backOffFunction) {\r\n```\r\n\r\nIt is best NOT to ask unrelated questions - ask separate questions.\r\n\r\nYou will get 10 records but it is indeterminate which partitions they will come from; you will definitely not get 1 record from each partition on each poll.\r\n\r\n__EDIT__\r\n\r\nTo change the default &quot;fatal&quot; classifications, you can either remove individual types:\r\n\r\n```java\r\n/**\r\n * Remove an exception type from the configured list. By default, the following\r\n * exceptions will not be retried:\r\n * &lt;ul&gt;\r\n * &lt;li&gt;{@link DeserializationException}&lt;/li&gt;\r\n * &lt;li&gt;{@link MessageConversionException}&lt;/li&gt;\r\n * &lt;li&gt;{@link ConversionException}&lt;/li&gt;\r\n * &lt;li&gt;{@link MethodArgumentResolutionException}&lt;/li&gt;\r\n * &lt;li&gt;{@link NoSuchMethodException}&lt;/li&gt;\r\n * &lt;li&gt;{@link ClassCastException}&lt;/li&gt;\r\n * &lt;/ul&gt;\r\n * All others will be retried, unless {@link #defaultFalse()} has been called.\r\n * @param exceptionType the exception type.\r\n * @return the classification of the exception if removal was successful;\r\n * null otherwise.\r\n * @since 2.8.4\r\n * @see #addNotRetryableExceptions(Class...)\r\n * @see #setClassifications(Map, boolean)\r\n */\r\n@Nullable\r\npublic Boolean removeClassification(Class&lt;? extends Exception&gt; exceptionType) {\r\n```\r\n\r\nOr you can replace the defaults in one call:\r\n\r\n```java\r\n/**\r\n * Set an exception classifications to determine whether the exception should cause a retry\r\n * (until exhaustion) or not. If not, we go straight to the recoverer. By default,\r\n * the following exceptions will not be retried:\r\n * &lt;ul&gt;\r\n * &lt;li&gt;{@link DeserializationException}&lt;/li&gt;\r\n * &lt;li&gt;{@link MessageConversionException}&lt;/li&gt;\r\n * &lt;li&gt;{@link ConversionException}&lt;/li&gt;\r\n * &lt;li&gt;{@link MethodArgumentResolutionException}&lt;/li&gt;\r\n * &lt;li&gt;{@link NoSuchMethodException}&lt;/li&gt;\r\n * &lt;li&gt;{@link ClassCastException}&lt;/li&gt;\r\n * &lt;/ul&gt;\r\n * All others will be retried.\r\n * When calling this method, the defaults will not be applied.\r\n * @param classifications the classifications.\r\n * @param defaultValue whether or not to retry non-matching exceptions.\r\n * @see BinaryExceptionClassifier#BinaryExceptionClassifier(Map, boolean)\r\n * @see #addNotRetryableExceptions(Class...)\r\n */\r\npublic void setClassifications(Map&lt;Class&lt;? extends Throwable&gt;, Boolean&gt; classifications, boolean defaultValue) {\r\n```\r\n","title":"Kafka consumer retry based on specific exceptions","body":"<p>See the javadocs; by default all exceptions are retryable except for a configured set of exceptions that are considered fatal. You can modify or replace that set:</p>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * Add exception types to the default list. By default, the following exceptions will\n * not be retried:\n * &lt;ul&gt;\n * &lt;li&gt;{@link DeserializationException}&lt;/li&gt;\n * &lt;li&gt;{@link MessageConversionException}&lt;/li&gt;\n * &lt;li&gt;{@link ConversionException}&lt;/li&gt;\n * &lt;li&gt;{@link MethodArgumentResolutionException}&lt;/li&gt;\n * &lt;li&gt;{@link NoSuchMethodException}&lt;/li&gt;\n * &lt;li&gt;{@link ClassCastException}&lt;/li&gt;\n * &lt;/ul&gt;\n * All others will be retried, unless {@link #defaultFalse()} has been called.\n * @param exceptionTypes the exception types.\n * @see #removeClassification(Class)\n * @see #setClassifications(Map, boolean)\n */\n@SafeVarargs\n@SuppressWarnings(&quot;varargs&quot;)\npublic final void addNotRetryableExceptions(Class&lt;? extends Exception&gt;... exceptionTypes) {\n</code></pre>\n<p>You don't need to add retryable exceptions, unless you have called <code>defaultFalse()</code>.</p>\n<p>For complete control over back off selection, you can provide a back off function:</p>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * Set a function to dynamically determine the {@link BackOff} to use, based on the\n * consumer record and/or exception. If null is returned, the default BackOff will be\n * used.\n * @param backOffFunction the function.\n * @since 2.6\n */\npublic void setBackOffFunction(BiFunction&lt;ConsumerRecord&lt;?, ?&gt;, Exception, BackOff&gt; backOffFunction) {\n</code></pre>\n<p>It is best NOT to ask unrelated questions - ask separate questions.</p>\n<p>You will get 10 records but it is indeterminate which partitions they will come from; you will definitely not get 1 record from each partition on each poll.</p>\n<p><strong>EDIT</strong></p>\n<p>To change the default &quot;fatal&quot; classifications, you can either remove individual types:</p>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * Remove an exception type from the configured list. By default, the following\n * exceptions will not be retried:\n * &lt;ul&gt;\n * &lt;li&gt;{@link DeserializationException}&lt;/li&gt;\n * &lt;li&gt;{@link MessageConversionException}&lt;/li&gt;\n * &lt;li&gt;{@link ConversionException}&lt;/li&gt;\n * &lt;li&gt;{@link MethodArgumentResolutionException}&lt;/li&gt;\n * &lt;li&gt;{@link NoSuchMethodException}&lt;/li&gt;\n * &lt;li&gt;{@link ClassCastException}&lt;/li&gt;\n * &lt;/ul&gt;\n * All others will be retried, unless {@link #defaultFalse()} has been called.\n * @param exceptionType the exception type.\n * @return the classification of the exception if removal was successful;\n * null otherwise.\n * @since 2.8.4\n * @see #addNotRetryableExceptions(Class...)\n * @see #setClassifications(Map, boolean)\n */\n@Nullable\npublic Boolean removeClassification(Class&lt;? extends Exception&gt; exceptionType) {\n</code></pre>\n<p>Or you can replace the defaults in one call:</p>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * Set an exception classifications to determine whether the exception should cause a retry\n * (until exhaustion) or not. If not, we go straight to the recoverer. By default,\n * the following exceptions will not be retried:\n * &lt;ul&gt;\n * &lt;li&gt;{@link DeserializationException}&lt;/li&gt;\n * &lt;li&gt;{@link MessageConversionException}&lt;/li&gt;\n * &lt;li&gt;{@link ConversionException}&lt;/li&gt;\n * &lt;li&gt;{@link MethodArgumentResolutionException}&lt;/li&gt;\n * &lt;li&gt;{@link NoSuchMethodException}&lt;/li&gt;\n * &lt;li&gt;{@link ClassCastException}&lt;/li&gt;\n * &lt;/ul&gt;\n * All others will be retried.\n * When calling this method, the defaults will not be applied.\n * @param classifications the classifications.\n * @param defaultValue whether or not to retry non-matching exceptions.\n * @see BinaryExceptionClassifier#BinaryExceptionClassifier(Map, boolean)\n * @see #addNotRetryableExceptions(Class...)\n */\npublic void setClassifications(Map&lt;Class&lt;? extends Throwable&gt;, Boolean&gt; classifications, boolean defaultValue) {\n</code></pre>\n"}],"owner":{"account_id":16910209,"reputation":25,"user_id":12229445,"display_name":"tinku"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":448,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76565363,"answer_count":1,"score":0,"last_activity_date":1687890167,"creation_date":1687824162,"question_id":76560881,"body_markdown":"I have a kafka listener/consumer which consumes from a topic &quot;xyz&quot; that has 10 partitions.\r\n\r\nDuring message consumption or processing there might occur several exceptions. I would like to account for these exceptions. There are a certain exceptions which I would like to retry for a finite number of times.\r\n\r\n\r\n\r\nI wrote the following code to implement this requirement\r\n\r\n    \r\n```\r\n@Bean\r\npublic CommonErrorHandler customErrorHandler(){\r\n       \r\n      DefaultErrorHandler defaultErrorHandler = new DefaultErrorHandler((rec,ex) -&gt; \r\n       log.error(&quot;Finished retries. Commiting offset&quot;), new FixedBackOff(3000l, 5));\r\n       defaultErrorHandler.setCommitRecovered(true);\r\n       defaultErrorHandler.addRetryableExceptions(SerializationException.class)\r\n       return defaultErrorHandler;\r\n     \r\n    }\r\n```\r\n\r\nThe above code retries consuming the same message for 5 times upon failure to consume/process with an interval of 3 seconds between each retry.\r\n\r\nSpringboot should pick up this bean and wire it into the auto configured Listener Container factory as per the docs.\r\n\r\nMy questions are:\r\n \r\n1) Is it possible to add more generic exception as a retryable exception instead of a specific one. For ex: I would like to use the instanceOf operator in JAVA to check if an exception thrown is of a certain type, and then configure the retries or retry policies. Is such a thing possible ? \r\n\r\n2) Can we retry infinitely for certain exceptions?\r\n\r\n\r\nNote: I have implemented the exact same thing in earlier versions of Springboot. We have upgraded to 2.7 and I am looking for any examples or samples to achieve this task. Please help me with links to any examples or with any sample code.\r\n\r\n3) This question is unrelated to the above problem and its regarding the kafka consumer&#39;s &quot;max.poll.records&quot; property. The scenario is, we have one consumer in a consumer group, that is consuming messages from a topic with 10 partitions and all partitions have messages in them.\r\nIf the &quot;max.poll.records&quot; is set to 1, does the consumer receive exactly one message per partition in the topic, bringing the cumulative messages consumed from all 10 partitions to ten? Is my understanding correct? Or does it poll only 1 record irrespective of the partitions?","title":"Kafka consumer retry based on specific exceptions","body":"<p>I have a kafka listener/consumer which consumes from a topic &quot;xyz&quot; that has 10 partitions.</p>\n<p>During message consumption or processing there might occur several exceptions. I would like to account for these exceptions. There are a certain exceptions which I would like to retry for a finite number of times.</p>\n<p>I wrote the following code to implement this requirement</p>\n<pre><code>@Bean\npublic CommonErrorHandler customErrorHandler(){\n       \n      DefaultErrorHandler defaultErrorHandler = new DefaultErrorHandler((rec,ex) -&gt; \n       log.error(&quot;Finished retries. Commiting offset&quot;), new FixedBackOff(3000l, 5));\n       defaultErrorHandler.setCommitRecovered(true);\n       defaultErrorHandler.addRetryableExceptions(SerializationException.class)\n       return defaultErrorHandler;\n     \n    }\n</code></pre>\n<p>The above code retries consuming the same message for 5 times upon failure to consume/process with an interval of 3 seconds between each retry.</p>\n<p>Springboot should pick up this bean and wire it into the auto configured Listener Container factory as per the docs.</p>\n<p>My questions are:</p>\n<ol>\n<li><p>Is it possible to add more generic exception as a retryable exception instead of a specific one. For ex: I would like to use the instanceOf operator in JAVA to check if an exception thrown is of a certain type, and then configure the retries or retry policies. Is such a thing possible ?</p>\n</li>\n<li><p>Can we retry infinitely for certain exceptions?</p>\n</li>\n</ol>\n<p>Note: I have implemented the exact same thing in earlier versions of Springboot. We have upgraded to 2.7 and I am looking for any examples or samples to achieve this task. Please help me with links to any examples or with any sample code.</p>\n<ol start=\"3\">\n<li>This question is unrelated to the above problem and its regarding the kafka consumer's &quot;max.poll.records&quot; property. The scenario is, we have one consumer in a consumer group, that is consuming messages from a topic with 10 partitions and all partitions have messages in them.\nIf the &quot;max.poll.records&quot; is set to 1, does the consumer receive exactly one message per partition in the topic, bringing the cumulative messages consumed from all 10 partitions to ten? Is my understanding correct? Or does it poll only 1 record irrespective of the partitions?</li>\n</ol>\n"},{"tags":["java","junit","spring-batch"],"answers":[{"tags":[],"owner":{"account_id":2804251,"reputation":685,"user_id":2411805,"display_name":"Raghunandan Krishnamurthy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1391578997,"creation_date":1391577356,"answer_id":21569168,"question_id":21553342,"body_markdown":"Yes you can write Test Cases for mapFieldSet()\r\n\r\n    You can always write such test cases to make sure your mapping are good!\r\n    // Using EasyMock to mock FieldSet  \r\n    @Test\r\n    public void mapFieldSetTest()\r\n    {\r\n    \tFieldSet mockFieldSet = EasyMock.createMock(FieldSet.class);\r\n  \t  \t\r\n    \tEasyMock.expect(mockFieldSet.readString(&quot;LNAME&quot;)).andReturn(&quot;Doe&quot;);\r\n    \tEasyMock.expect(mockFieldSet.readString(&quot;FNAME&quot;)).andReturn(&quot;John&quot;);\r\n    \tEasyMock.expect(mockFieldSet.readString(&quot;ETYPE&quot;)).andReturn(&quot;PART-TIME&quot;);\r\n    \tEasyMock.expect(mockFieldSet.readString(&quot;FADDRESS&quot;)).andReturn(&quot;191, Santa Clara&quot;);\r\n    \tEasyMock.expect(mockFieldSet.readString(&quot;EMAIL&quot;)).andReturn(&quot;john.Doe@fb.com&quot;);\r\n    \tEasyMock.expect(mockFieldSet.readString(&quot;UPN&quot;)).andReturn(&quot;1111111111&quot;);\r\n    \tEasyMock.expect(mockFieldSet.readString(&quot;WFID&quot;)).andReturn(&quot;22222222&quot;);\r\n    \tEasyMock.expect(mockFieldSet.readString(&quot;INS&quot;)).andReturn(&quot;CA University College&quot;);\r\n    \tEasyMock.expect(mockFieldSet.readString(&quot;PIC&quot;)).andReturn(&quot;c:\\\\john_doe.jpg&quot;);\r\n\r\n    \tEasyMock.replay(mockFieldSet);\r\n    \t\r\n    \t// call the method under test\r\n    \tPersonItem actual = fieldSetMapper.mapFieldSet(mockFieldSet);\r\n\t\t\r\n\t\tEasyMock.verify(mockFieldSet);\r\n\t\t\r\n\t\t// assert actual data by getters..\r\n    }","title":"UnitTest a SpringBatch FieldSetMapper","body":"<p>Yes you can write Test Cases for mapFieldSet()</p>\n\n<pre><code>You can always write such test cases to make sure your mapping are good!\n// Using EasyMock to mock FieldSet  \n@Test\npublic void mapFieldSetTest()\n{\n    FieldSet mockFieldSet = EasyMock.createMock(FieldSet.class);\n\n    EasyMock.expect(mockFieldSet.readString(\"LNAME\")).andReturn(\"Doe\");\n    EasyMock.expect(mockFieldSet.readString(\"FNAME\")).andReturn(\"John\");\n    EasyMock.expect(mockFieldSet.readString(\"ETYPE\")).andReturn(\"PART-TIME\");\n    EasyMock.expect(mockFieldSet.readString(\"FADDRESS\")).andReturn(\"191, Santa Clara\");\n    EasyMock.expect(mockFieldSet.readString(\"EMAIL\")).andReturn(\"john.Doe@fb.com\");\n    EasyMock.expect(mockFieldSet.readString(\"UPN\")).andReturn(\"1111111111\");\n    EasyMock.expect(mockFieldSet.readString(\"WFID\")).andReturn(\"22222222\");\n    EasyMock.expect(mockFieldSet.readString(\"INS\")).andReturn(\"CA University College\");\n    EasyMock.expect(mockFieldSet.readString(\"PIC\")).andReturn(\"c:\\\\john_doe.jpg\");\n\n    EasyMock.replay(mockFieldSet);\n\n    // call the method under test\n    PersonItem actual = fieldSetMapper.mapFieldSet(mockFieldSet);\n\n    EasyMock.verify(mockFieldSet);\n\n    // assert actual data by getters..\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3905554,"reputation":5747,"user_id":3232370,"display_name":"Ian A"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1687889651,"creation_date":1687889651,"answer_id":76567637,"question_id":21553342,"body_markdown":"In case anyone comes across this question and is using Mockito instead of EasyMock, you can use the following code to unit test the mapper:\r\n\r\n```\r\nimport static org.junit.jupiter.api.Assertions.assertEquals;\r\nimport static org.mockito.Mockito.mock;\r\nimport static org.mockito.Mockito.when;\r\n\r\n\r\nimport org.junit.jupiter.api.Test;\r\nimport org.springframework.batch.item.file.transform.FieldSet;\r\nimport org.springframework.validation.BindException;\r\n\r\nimport com.example.demo.loader.model.TestResult;\r\n\r\npublic class PersonItemFieldSetMapperTest {\r\n\r\n\tprivate final PersonItemFieldSetMapper fieldSetMapper = new PersonItemFieldSetMapper();\r\n\r\n\t@Test\r\n\tpublic void shouldMapFieldsCorrectly() throws BindException  {\r\n\t\tFieldSet mockFieldSet = mock(FieldSet.class);\r\n\t\twhen(mockFieldSet.readInt(&quot;LNAME&quot;)).thenReturn(&quot;Doe&quot;);\r\n\t\twhen(mockFieldSet.readInt(&quot;FNAME&quot;)).thenReturn(&quot;John&quot;);\r\n\t\t// Repeat setup for the other fields\r\n\r\n\t\tPersonItem actual = fieldSetMapper.mapFieldSet(mockFieldSet);\r\n\t\tassertEquals(&quot;Doe&quot;, actual.getLastName());\r\n\t\tassertEquals(&quot;John&quot;, actual.getFirstName());\r\n\t\t// Repeat assertions for the other fields\r\n\t}\r\n}\r\n\r\n```","title":"UnitTest a SpringBatch FieldSetMapper","body":"<p>In case anyone comes across this question and is using Mockito instead of EasyMock, you can use the following code to unit test the mapper:</p>\n<pre><code>import static org.junit.jupiter.api.Assertions.assertEquals;\nimport static org.mockito.Mockito.mock;\nimport static org.mockito.Mockito.when;\n\n\nimport org.junit.jupiter.api.Test;\nimport org.springframework.batch.item.file.transform.FieldSet;\nimport org.springframework.validation.BindException;\n\nimport com.example.demo.loader.model.TestResult;\n\npublic class PersonItemFieldSetMapperTest {\n\n    private final PersonItemFieldSetMapper fieldSetMapper = new PersonItemFieldSetMapper();\n\n    @Test\n    public void shouldMapFieldsCorrectly() throws BindException  {\n        FieldSet mockFieldSet = mock(FieldSet.class);\n        when(mockFieldSet.readInt(&quot;LNAME&quot;)).thenReturn(&quot;Doe&quot;);\n        when(mockFieldSet.readInt(&quot;FNAME&quot;)).thenReturn(&quot;John&quot;);\n        // Repeat setup for the other fields\n\n        PersonItem actual = fieldSetMapper.mapFieldSet(mockFieldSet);\n        assertEquals(&quot;Doe&quot;, actual.getLastName());\n        assertEquals(&quot;John&quot;, actual.getFirstName());\n        // Repeat assertions for the other fields\n    }\n}\n\n</code></pre>\n"}],"owner":{"account_id":3019457,"reputation":3814,"user_id":2560836,"accept_rate":80,"display_name":"Chris311"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2486,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":21569168,"answer_count":2,"score":1,"last_activity_date":1687889651,"creation_date":1391519035,"question_id":21553342,"body_markdown":"I got the following custom FieldSetMapper\r\n\r\n    import org.springframework.batch.item.file.mapping.FieldSetMapper;\r\n    import org.springframework.batch.item.file.transform.FieldSet;\r\n    import org.springframework.validation.BindException;\r\n\r\n    import de.BasicProperty;\r\n\r\n    public class PersonItemFieldSetMapper implements FieldSetMapper&lt;PersonItem&gt; {\r\n\r\n        @Override\r\n        public PersonItem mapFieldSet(final FieldSet fieldSet) throws BindException {\r\n            PersonItem person = new PersonItem();\r\n            person.setLastName(fieldSet.readString(BasicProperty.BASICPROP_LASTNAME));\r\n            person.setFirstName(fieldSet.readString(BasicProperty.BASICPROP_FIRSTNAME));\r\n            person.setEmployeeType(fieldSet.readString(&quot;EmployeeType&quot;));\r\n            person.setFormOfAdress(fieldSet.readString(BasicProperty.BASICPROP_FORMOFADDRESS));\r\n            person.setEMail(fieldSet.readString(BasicProperty.BASICPROP_EMAIL));\r\n            person.setUpn(fieldSet.readString(BasicProperty.BASICPROP_UPN));\r\n            person.setWorkforceId(fieldSet.readString(BasicProperty.BASICPROP_WORKFORCE_ID));\r\n            person.setInstitute(fieldSet.readString(BasicProperty.BASICPROP_INSTITUTE));\r\n            person.setPhoto(fieldSet.readString(BasicProperty.BASICPROP_PHOTO));\r\n\r\n            return person;\r\n        }\r\n\r\n    }\r\n\r\nAt the moment i am trying to write a unit-test for this mapper.\r\nFirst Question: Is this reasonable?\r\nSecond Question: How can i achieve this?","title":"UnitTest a SpringBatch FieldSetMapper","body":"<p>I got the following custom FieldSetMapper</p>\n\n<pre><code>import org.springframework.batch.item.file.mapping.FieldSetMapper;\nimport org.springframework.batch.item.file.transform.FieldSet;\nimport org.springframework.validation.BindException;\n\nimport de.BasicProperty;\n\npublic class PersonItemFieldSetMapper implements FieldSetMapper&lt;PersonItem&gt; {\n\n    @Override\n    public PersonItem mapFieldSet(final FieldSet fieldSet) throws BindException {\n        PersonItem person = new PersonItem();\n        person.setLastName(fieldSet.readString(BasicProperty.BASICPROP_LASTNAME));\n        person.setFirstName(fieldSet.readString(BasicProperty.BASICPROP_FIRSTNAME));\n        person.setEmployeeType(fieldSet.readString(\"EmployeeType\"));\n        person.setFormOfAdress(fieldSet.readString(BasicProperty.BASICPROP_FORMOFADDRESS));\n        person.setEMail(fieldSet.readString(BasicProperty.BASICPROP_EMAIL));\n        person.setUpn(fieldSet.readString(BasicProperty.BASICPROP_UPN));\n        person.setWorkforceId(fieldSet.readString(BasicProperty.BASICPROP_WORKFORCE_ID));\n        person.setInstitute(fieldSet.readString(BasicProperty.BASICPROP_INSTITUTE));\n        person.setPhoto(fieldSet.readString(BasicProperty.BASICPROP_PHOTO));\n\n        return person;\n    }\n\n}\n</code></pre>\n\n<p>At the moment i am trying to write a unit-test for this mapper.\nFirst Question: Is this reasonable?\nSecond Question: How can i achieve this?</p>\n"},{"tags":["java","junit","hudson","automated-tests","sonarqube"],"answers":[{"tags":[],"owner":{"account_id":1480132,"reputation":2045,"user_id":1389713,"display_name":"Matthew Wilson"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1396970102,"creation_date":1396970102,"answer_id":22941178,"question_id":22940909,"body_markdown":"Seems like you are looking to use JUnit Categories - https://weblogs.java.net/blog/johnsmart/archive/2010/04/25/grouping-tests-using-junit-categories-0\r\n\r\nYou can then configure your build server to run specific categories at different times\r\n\r\nMore info here - https://github.com/junit-team/junit/wiki/Categories","title":"How to configure JUnit test suite?","body":"<p>Seems like you are looking to use JUnit Categories - <a href=\"https://weblogs.java.net/blog/johnsmart/archive/2010/04/25/grouping-tests-using-junit-categories-0\" rel=\"nofollow\">https://weblogs.java.net/blog/johnsmart/archive/2010/04/25/grouping-tests-using-junit-categories-0</a></p>\n\n<p>You can then configure your build server to run specific categories at different times</p>\n\n<p>More info here - <a href=\"https://github.com/junit-team/junit/wiki/Categories\" rel=\"nofollow\">https://github.com/junit-team/junit/wiki/Categories</a></p>\n"},{"tags":[],"owner":{"account_id":3089665,"reputation":31308,"user_id":2616073,"display_name":"dkatzel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1687889375,"creation_date":1396970176,"answer_id":22941201,"question_id":22940909,"body_markdown":"If you are using Junit 4.8 or higher you can use JUnit `Categories` to separate your tests and run only tests that are in certain categories.\r\n\r\nFor more information see:\r\n\r\n * Wiki page on GitHub repository of junit-team: [junit4, Categories][1]\r\n * Tutorial on DZone: [A Closer Look at JUnit Categories][2]\r\n * Guide on Maven Surefire Plugin: [Using JUnit Categories][3]\r\n\r\n\r\n  [1]: https://github.com/junit-team/junit4/wiki/Categories\r\n  [2]: http://java.dzone.com/articles/closer-look-junit-categories\r\n  [3]: https://maven.apache.org/surefire/maven-surefire-plugin/examples/junit.html#using-junit-categories","title":"How to configure JUnit test suite?","body":"<p>If you are using Junit 4.8 or higher you can use JUnit <code>Categories</code> to separate your tests and run only tests that are in certain categories.</p>\n<p>For more information see:</p>\n<ul>\n<li>Wiki page on GitHub repository of junit-team: <a href=\"https://github.com/junit-team/junit4/wiki/Categories\" rel=\"nofollow noreferrer\">junit4, Categories</a></li>\n<li>Tutorial on DZone: <a href=\"http://java.dzone.com/articles/closer-look-junit-categories\" rel=\"nofollow noreferrer\">A Closer Look at JUnit Categories</a></li>\n<li>Guide on Maven Surefire Plugin: <a href=\"https://maven.apache.org/surefire/maven-surefire-plugin/examples/junit.html#using-junit-categories\" rel=\"nofollow noreferrer\">Using JUnit Categories</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":84846,"reputation":5030,"user_id":236936,"accept_rate":67,"display_name":"TrueDub"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1396973497,"creation_date":1396973497,"answer_id":22942519,"question_id":22940909,"body_markdown":"I think you want to separate into 2 test phases:\r\n \r\n\r\n - unit, for the fast-running tests \r\n - integration, for the Hibernate-style slower ones.\r\n\r\nUnit tests are run by Surefire plugin, with integration ones run by [Failsafe][1]\r\n\r\nThese run in a different phases of the maven standard build lifecycle, so you can set the integration tests to only run on your SONAR build.\r\n\r\n  [1]: http://maven.apache.org/surefire/maven-failsafe-plugin/","title":"How to configure JUnit test suite?","body":"<p>I think you want to separate into 2 test phases:</p>\n\n<ul>\n<li>unit, for the fast-running tests </li>\n<li>integration, for the Hibernate-style slower ones.</li>\n</ul>\n\n<p>Unit tests are run by Surefire plugin, with integration ones run by <a href=\"http://maven.apache.org/surefire/maven-failsafe-plugin/\" rel=\"nofollow\">Failsafe</a></p>\n\n<p>These run in a different phases of the maven standard build lifecycle, so you can set the integration tests to only run on your SONAR build.</p>\n"}],"owner":{"account_id":2102673,"reputation":35121,"user_id":1869846,"accept_rate":56,"display_name":"Ruchira Gayan Ranaweera"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":458,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":3,"score":1,"last_activity_date":1687889375,"creation_date":1396969440,"question_id":22940909,"body_markdown":"I have a Java project which has layered structure. And each time when commit is made [Hudson][1] build is running with all test cases to make sure that code is not broken by new changes. But this may take considerable amount of time due to running test cases for persistence (Hibernate) layer. Also there is a [Sonar][2] build which runs each night.  \r\n\r\nNow I am looking for a way of optimizing test running. I want to remove persistence layers tests from Hudson build and only run it in Sonar. Now it should have two different test suites (profiles). \r\n\r\nAny suggestion very much appreciated.  \r\n\r\n\r\n  [1]: http://hudson-ci.org/\r\n  [2]: http://www.sonarqube.org/","title":"How to configure JUnit test suite?","body":"<p>I have a Java project which has layered structure. And each time when commit is made <a href=\"http://hudson-ci.org/\" rel=\"nofollow\">Hudson</a> build is running with all test cases to make sure that code is not broken by new changes. But this may take considerable amount of time due to running test cases for persistence (Hibernate) layer. Also there is a <a href=\"http://www.sonarqube.org/\" rel=\"nofollow\">Sonar</a> build which runs each night.  </p>\n\n<p>Now I am looking for a way of optimizing test running. I want to remove persistence layers tests from Hudson build and only run it in Sonar. Now it should have two different test suites (profiles). </p>\n\n<p>Any suggestion very much appreciated.  </p>\n"},{"tags":["java","opensearch","amazon-opensearch"],"answers":[{"tags":[],"owner":{"account_id":10676925,"reputation":59,"user_id":9410813,"display_name":"Chintan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1687888871,"creation_date":1687888871,"answer_id":76567547,"question_id":76567541,"body_markdown":"Answer to this question is here: https://forum.opensearch.org/t/how-to-connect-to-aws-opensearch-service-without-using-awssdk2transport/14657/1.\r\nYou can connect to AWS OpenSearch Service using both Apache HttpClient 5 Transport and RestClient Transport.","title":"How to connect to AWS OpenSearch Service in Java using Apache HttpClient 5 Transport or Apache RestClient Transport","body":"<p>Answer to this question is here: <a href=\"https://forum.opensearch.org/t/how-to-connect-to-aws-opensearch-service-without-using-awssdk2transport/14657/1\" rel=\"nofollow noreferrer\">https://forum.opensearch.org/t/how-to-connect-to-aws-opensearch-service-without-using-awssdk2transport/14657/1</a>.\nYou can connect to AWS OpenSearch Service using both Apache HttpClient 5 Transport and RestClient Transport.</p>\n"}],"owner":{"account_id":10676925,"reputation":59,"user_id":9410813,"display_name":"Chintan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":366,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76567547,"answer_count":1,"score":0,"last_activity_date":1687888871,"creation_date":1687888815,"question_id":76567541,"body_markdown":"I am using AWS SDK version 1, so using `AwsSdk2Transport` to setup `OpenSearchClient` is out of the option. Also, Java high-level REST client is getting deprecated. How can I connect to AWS OpenSearch cluster without using `AwsSdk2Transport` and Java high-level REST client?","title":"How to connect to AWS OpenSearch Service in Java using Apache HttpClient 5 Transport or Apache RestClient Transport","body":"<p>I am using AWS SDK version 1, so using <code>AwsSdk2Transport</code> to setup <code>OpenSearchClient</code> is out of the option. Also, Java high-level REST client is getting deprecated. How can I connect to AWS OpenSearch cluster without using <code>AwsSdk2Transport</code> and Java high-level REST client?</p>\n"},{"tags":["java","maven"],"answers":[{"tags":[],"owner":{"account_id":5209890,"reputation":527,"user_id":4166663,"display_name":"Athi"},"down_vote_count":2,"up_vote_count":0,"is_accepted":true,"score":-2,"last_activity_date":1437233818,"creation_date":1437198693,"answer_id":31488216,"question_id":31487982,"body_markdown":"You need to set the aggregator pom as the parent of `project1` and `project2`.\r\neg. in `project1` and `project2` poms add:\r\n\r\n&lt;!-- language-all: lang-xml --&gt;\r\n\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;com.agr&lt;/groupId&gt;\r\n        &lt;artifactId&gt;project-aggregator&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0.0&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n\r\n\r\nEDIT:\r\n\r\nI understand that project1 and project2 have different parent poms.\r\n\r\nThe only solution i know about to achieve what You want is to store the properties in parent pom.\r\n\r\nI can think only of one solution, to make an inheritance chain:\r\n\r\nProject2Parent:\r\n\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;com.test&lt;/groupId&gt;\r\n        &lt;artifactId&gt;Project1Parent&lt;/artifactId&gt;\r\n        &lt;version&gt;0.0.1&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n    &lt;artifactId&gt;Project2Parent&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.1&lt;/version&gt;\r\n\r\nAggregator:\r\n\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;com.test&lt;/groupId&gt;\r\n        &lt;artifactId&gt;Project2Parent&lt;/artifactId&gt;\r\n        &lt;version&gt;0.0.1&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n    &lt;artifactId&gt;Aggregator&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.1&lt;/version&gt;\r\n\r\nProject1\r\n\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;com.test&lt;/groupId&gt;\r\n        &lt;artifactId&gt;Aggregator&lt;/artifactId&gt;\r\n        &lt;version&gt;0.0.1&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n    &lt;artifactId&gt;project1&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.1&lt;/version&gt;\r\n\r\nProject2\r\n\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;com.test&lt;/groupId&gt;\r\n        &lt;artifactId&gt;Aggregator&lt;/artifactId&gt;\r\n        &lt;version&gt;0.0.1&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n    &lt;artifactId&gt;project2&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.1&lt;/version&gt;","title":"How to specify maven properties in a aggregator POM?","body":"<p>You need to set the aggregator pom as the parent of <code>project1</code> and <code>project2</code>.\neg. in <code>project1</code> and <code>project2</code> poms add:</p>\n\n\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;parent&gt;\n    &lt;groupId&gt;com.agr&lt;/groupId&gt;\n    &lt;artifactId&gt;project-aggregator&lt;/artifactId&gt;\n    &lt;version&gt;1.0.0&lt;/version&gt;\n&lt;/parent&gt;\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>I understand that project1 and project2 have different parent poms.</p>\n\n<p>The only solution i know about to achieve what You want is to store the properties in parent pom.</p>\n\n<p>I can think only of one solution, to make an inheritance chain:</p>\n\n<p>Project2Parent:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;parent&gt;\n    &lt;groupId&gt;com.test&lt;/groupId&gt;\n    &lt;artifactId&gt;Project1Parent&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1&lt;/version&gt;\n&lt;/parent&gt;\n&lt;artifactId&gt;Project2Parent&lt;/artifactId&gt;\n&lt;version&gt;0.0.1&lt;/version&gt;\n</code></pre>\n\n<p>Aggregator:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;parent&gt;\n    &lt;groupId&gt;com.test&lt;/groupId&gt;\n    &lt;artifactId&gt;Project2Parent&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1&lt;/version&gt;\n&lt;/parent&gt;\n&lt;artifactId&gt;Aggregator&lt;/artifactId&gt;\n&lt;version&gt;0.0.1&lt;/version&gt;\n</code></pre>\n\n<p>Project1</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;parent&gt;\n    &lt;groupId&gt;com.test&lt;/groupId&gt;\n    &lt;artifactId&gt;Aggregator&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1&lt;/version&gt;\n&lt;/parent&gt;\n&lt;artifactId&gt;project1&lt;/artifactId&gt;\n&lt;version&gt;0.0.1&lt;/version&gt;\n</code></pre>\n\n<p>Project2</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;parent&gt;\n    &lt;groupId&gt;com.test&lt;/groupId&gt;\n    &lt;artifactId&gt;Aggregator&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1&lt;/version&gt;\n&lt;/parent&gt;\n&lt;artifactId&gt;project2&lt;/artifactId&gt;\n&lt;version&gt;0.0.1&lt;/version&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2052678,"reputation":134073,"user_id":1831293,"accept_rate":91,"display_name":"Evgeniy Dorofeev"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1437229061,"creation_date":1437198809,"answer_id":31488231,"question_id":31487982,"body_markdown":"Here is aggregator&#39;s pom:\r\n\r\n&lt;!-- language-all: lang-xml --&gt;\r\n\r\n\t&lt;groupId&gt;y&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;y&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1&lt;/version&gt;\r\n\t&lt;packaging&gt;pom&lt;/packaging&gt;\r\n\t&lt;modules&gt;\r\n\t\t&lt;module&gt;y1&lt;/module&gt;\r\n\t\t&lt;module&gt;y2&lt;/module&gt;\r\n\t&lt;/modules&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;x&gt;1&lt;/x&gt;\r\n\t&lt;/properties&gt;\r\n\r\nThis is `y1` effective pom (generated by Eclipse):\r\n\r\n      &lt;parent&gt;\r\n        &lt;groupId&gt;y&lt;/groupId&gt;\r\n        &lt;artifactId&gt;y&lt;/artifactId&gt;\r\n        &lt;version&gt;0.0.1&lt;/version&gt;\r\n      &lt;/parent&gt;\r\n      &lt;groupId&gt;y1&lt;/groupId&gt;\r\n      &lt;artifactId&gt;y1&lt;/artifactId&gt;\r\n      &lt;version&gt;0.0.1&lt;/version&gt;\r\n      &lt;properties&gt;\r\n        &lt;x&gt;1&lt;/x&gt;\r\n      &lt;/properties&gt;\r\n\r\nAs you can see property `x` declared in parent is inherited by child.","title":"How to specify maven properties in a aggregator POM?","body":"<p>Here is aggregator's pom:</p>\n\n\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;groupId&gt;y&lt;/groupId&gt;\n&lt;artifactId&gt;y&lt;/artifactId&gt;\n&lt;version&gt;0.0.1&lt;/version&gt;\n&lt;packaging&gt;pom&lt;/packaging&gt;\n&lt;modules&gt;\n    &lt;module&gt;y1&lt;/module&gt;\n    &lt;module&gt;y2&lt;/module&gt;\n&lt;/modules&gt;\n&lt;properties&gt;\n    &lt;x&gt;1&lt;/x&gt;\n&lt;/properties&gt;\n</code></pre>\n\n<p>This is <code>y1</code> effective pom (generated by Eclipse):</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>  &lt;parent&gt;\n    &lt;groupId&gt;y&lt;/groupId&gt;\n    &lt;artifactId&gt;y&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1&lt;/version&gt;\n  &lt;/parent&gt;\n  &lt;groupId&gt;y1&lt;/groupId&gt;\n  &lt;artifactId&gt;y1&lt;/artifactId&gt;\n  &lt;version&gt;0.0.1&lt;/version&gt;\n  &lt;properties&gt;\n    &lt;x&gt;1&lt;/x&gt;\n  &lt;/properties&gt;\n</code></pre>\n\n<p>As you can see property <code>x</code> declared in parent is inherited by child.</p>\n"},{"tags":[],"owner":{"account_id":6254221,"reputation":829,"user_id":4863347,"display_name":"Charlie Reitzel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687887920,"creation_date":1687887920,"answer_id":76567443,"question_id":31487982,"body_markdown":"The OP is describing a real use case in large companies that have required parent POMs for different project types: library or service.  Any real project in that company may include some jar modules (library parent) and a REST service or web UI (service parent).  \r\n\r\nAll the Maven inheritance happens from the external parent POMs. But it would be real nice if developers could set a few properties in the aggregator POM.  \r\n\r\nApparently, however, this is not possible with Maven.","title":"How to specify maven properties in a aggregator POM?","body":"<p>The OP is describing a real use case in large companies that have required parent POMs for different project types: library or service.  Any real project in that company may include some jar modules (library parent) and a REST service or web UI (service parent).</p>\n<p>All the Maven inheritance happens from the external parent POMs. But it would be real nice if developers could set a few properties in the aggregator POM.</p>\n<p>Apparently, however, this is not possible with Maven.</p>\n"}],"owner":{"account_id":359481,"reputation":260,"user_id":700915,"accept_rate":29,"display_name":"mohanaki"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2811,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":31488216,"answer_count":3,"score":2,"last_activity_date":1687887920,"creation_date":1437195846,"question_id":31487982,"body_markdown":"I have a project structure like below.In aggregator POM project1 and project 2 are defined as modules.Now if i want to add a maven property that can be accessed in all the projects how can i do it?.\r\nWhat is the best project structure in this case.?\r\n\r\nIf i define property like `&lt;temp.dir&gt;data&lt;/temp.dir&gt;` in the aggregator POM then it is not available in project1 pom.xml and project2 POM.xml.I have to duplicate the same property in both the POM&#39;s.\r\n\r\n    project\r\n    - project1\r\n    - - pom.xml  ---- has parent POM as project A\r\n    - project2\r\n    - - pom.xml  --- has parent POM as project B\r\n    - pom.xml (Aggregator POM)\r\n\r\nUPDATE:To clarify more project1 pom and project 2 has different parent POM&#39;s.So aggregator POM cannot be set as parent.","title":"How to specify maven properties in a aggregator POM?","body":"<p>I have a project structure like below.In aggregator POM project1 and project 2 are defined as modules.Now if i want to add a maven property that can be accessed in all the projects how can i do it?.\nWhat is the best project structure in this case.?</p>\n\n<p>If i define property like <code>&lt;temp.dir&gt;data&lt;/temp.dir&gt;</code> in the aggregator POM then it is not available in project1 pom.xml and project2 POM.xml.I have to duplicate the same property in both the POM's.</p>\n\n<pre><code>project\n- project1\n- - pom.xml  ---- has parent POM as project A\n- project2\n- - pom.xml  --- has parent POM as project B\n- pom.xml (Aggregator POM)\n</code></pre>\n\n<p>UPDATE:To clarify more project1 pom and project 2 has different parent POM's.So aggregator POM cannot be set as parent.</p>\n"},{"tags":["java","spring-boot","google-bigquery"],"comments":[{"owner":{"account_id":2737454,"reputation":61,"user_id":2359817,"display_name":"amfractal"},"score":0,"creation_date":1687887433,"post_id":73881896,"comment_id":134999026,"body_markdown":"I have the same problem, M1 Mac running ZetaSQL fails with\n\nUnsupported os.arch\nUsing the Zulu JDK also didn&#39;t solve the problem. Were you able to resolve?","body":"I have the same problem, M1 Mac running ZetaSQL fails with  Unsupported os.arch Using the Zulu JDK also didn&#39;t solve the problem. Were you able to resolve?"}],"answers":[{"tags":[],"owner":{"account_id":1126561,"reputation":430,"user_id":1113712,"display_name":"Chris"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670856355,"creation_date":1670856355,"answer_id":74772860,"question_id":73881896,"body_markdown":"Are you running on an M1 Mac?\r\n\r\nI had this issue as there isn&#39;t an M1 / ARM build of ZetaSQL. \r\n\r\nTo fix:\r\n\r\n- download an x86 64-bit JVM (I went to https://www.azul.com/downloads/?package=jdk and used a different major version to avoid any conflicts)\r\n- set x86 JVM as the Project JVM for IntelliJ (https://www.baeldung.com/intellij-change-java-version)\r\n\r\n\r\n","title":"ZetaSQL BQ Library not working for mac OS Monterey","body":"<p>Are you running on an M1 Mac?</p>\n<p>I had this issue as there isn't an M1 / ARM build of ZetaSQL.</p>\n<p>To fix:</p>\n<ul>\n<li>download an x86 64-bit JVM (I went to <a href=\"https://www.azul.com/downloads/?package=jdk\" rel=\"nofollow noreferrer\">https://www.azul.com/downloads/?package=jdk</a> and used a different major version to avoid any conflicts)</li>\n<li>set x86 JVM as the Project JVM for IntelliJ (<a href=\"https://www.baeldung.com/intellij-change-java-version\" rel=\"nofollow noreferrer\">https://www.baeldung.com/intellij-change-java-version</a>)</li>\n</ul>\n"}],"owner":{"account_id":24619432,"reputation":1,"user_id":18520004,"display_name":"Nidhi Shah"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":303,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687887414,"creation_date":1664370054,"question_id":73881896,"body_markdown":"I have a SpringBoot Application that is using Big Query Parser ZetaSQL.\r\nMy pom is as follows:\r\n```\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.zetasql&lt;/groupId&gt;\r\n            &lt;artifactId&gt;zetasql-jni-channel&lt;/artifactId&gt;\r\n            &lt;version&gt;2022.08.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n```\r\nIn My Test Class i am trying to extract table names from query. \r\n```\r\n  public static void main(String[] args) {\r\n\r\n    String Querystr = &quot;SELECT * FROM `test.test.test` LIMIT 1000;&quot;;\r\n    List&lt;List&lt;String&gt;&gt; tables = Analyzer.extractTableNamesFromStatement(Querystr);\r\n\r\n  }\r\n```\r\n\r\nHowever when i try to run the application i get this error:\r\n\r\n```\r\n com.google.zetasql.ClientChannelProvider: Provider com.google.zetasql.JniChannelProvider could not be instantiated\r\n\tat java.base/java.util.ServiceLoader.fail(ServiceLoader.java:582)\r\n\tat java.base/java.util.ServiceLoader$ProviderImpl.newInstance(ServiceLoader.java:804)\r\n\tat java.base/java.util.ServiceLoader$ProviderImpl.get(ServiceLoader.java:722)\r\n\tat java.base/java.util.ServiceLoader$3.next(ServiceLoader.java:1395)\r\n\tat com.google.zetasql.ClientChannelProvider.loadChannel(ClientChannelProvider.java:31)\r\n\tat com.google.zetasql.Client.getStub(Client.java:29)\r\n\tat com.google.zetasql.LanguageOptions.getDefaultFeatures(LanguageOptions.java:58)\r\n\tat com.google.zetasql.LanguageOptions.&lt;init&gt;(LanguageOptions.java:66)\r\n\tat com.google.zetasql.AnalyzerOptions.&lt;init&gt;(AnalyzerOptions.java:56)\r\n\tat com.google.zetasql.Analyzer.extractTableNamesFromStatement(Analyzer.java:162)\r\n\tat com.pexar.sigma.datasources.JdbcDatasourceApplication.main(JdbcDatasourceApplication.java:23)\r\nCaused by: java.lang.ExceptionInInitializerError\r\n\tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n\tat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:490)\r\n\tat java.base/java.util.ServiceLoader$ProviderImpl.newInstance(ServiceLoader.java:780)\r\n\t... 9 more\r\nCaused by: java.lang.RuntimeException: Unsupported os.arch\r\n\tat com.google.zetasql.JniChannelProvider.getLibraryPath(JniChannelProvider.java:48)\r\n\tat com.google.zetasql.JniChannelProvider.&lt;clinit&gt;(JniChannelProvider.java:66)\r\n\t... 14 more\r\n```\r\n\r\nI am using macOS Monterey.\r\nCan someone help me with this?","title":"ZetaSQL BQ Library not working for mac OS Monterey","body":"<p>I have a SpringBoot Application that is using Big Query Parser ZetaSQL.\nMy pom is as follows:</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.zetasql&lt;/groupId&gt;\n            &lt;artifactId&gt;zetasql-jni-channel&lt;/artifactId&gt;\n            &lt;version&gt;2022.08.1&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>In My Test Class i am trying to extract table names from query.</p>\n<pre><code>  public static void main(String[] args) {\n\n    String Querystr = &quot;SELECT * FROM `test.test.test` LIMIT 1000;&quot;;\n    List&lt;List&lt;String&gt;&gt; tables = Analyzer.extractTableNamesFromStatement(Querystr);\n\n  }\n</code></pre>\n<p>However when i try to run the application i get this error:</p>\n<pre><code> com.google.zetasql.ClientChannelProvider: Provider com.google.zetasql.JniChannelProvider could not be instantiated\n    at java.base/java.util.ServiceLoader.fail(ServiceLoader.java:582)\n    at java.base/java.util.ServiceLoader$ProviderImpl.newInstance(ServiceLoader.java:804)\n    at java.base/java.util.ServiceLoader$ProviderImpl.get(ServiceLoader.java:722)\n    at java.base/java.util.ServiceLoader$3.next(ServiceLoader.java:1395)\n    at com.google.zetasql.ClientChannelProvider.loadChannel(ClientChannelProvider.java:31)\n    at com.google.zetasql.Client.getStub(Client.java:29)\n    at com.google.zetasql.LanguageOptions.getDefaultFeatures(LanguageOptions.java:58)\n    at com.google.zetasql.LanguageOptions.&lt;init&gt;(LanguageOptions.java:66)\n    at com.google.zetasql.AnalyzerOptions.&lt;init&gt;(AnalyzerOptions.java:56)\n    at com.google.zetasql.Analyzer.extractTableNamesFromStatement(Analyzer.java:162)\n    at com.pexar.sigma.datasources.JdbcDatasourceApplication.main(JdbcDatasourceApplication.java:23)\nCaused by: java.lang.ExceptionInInitializerError\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:490)\n    at java.base/java.util.ServiceLoader$ProviderImpl.newInstance(ServiceLoader.java:780)\n    ... 9 more\nCaused by: java.lang.RuntimeException: Unsupported os.arch\n    at com.google.zetasql.JniChannelProvider.getLibraryPath(JniChannelProvider.java:48)\n    at com.google.zetasql.JniChannelProvider.&lt;clinit&gt;(JniChannelProvider.java:66)\n    ... 14 more\n</code></pre>\n<p>I am using macOS Monterey.\nCan someone help me with this?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":209503,"reputation":22790,"user_id":460557,"accept_rate":100,"display_name":"Jorge Campos"},"score":1,"creation_date":1687885781,"post_id":76567166,"comment_id":134998649,"body_markdown":"Hi there, I have a felling that this is a case of an [XY problem](https://xyproblem.info/). Rather than explaining how you want to solve your problem, explain what is the problem you are trying to solve and why you think this is the best way to do so.","body":"Hi there, I have a felling that this is a case of an <a href=\"https://xyproblem.info/\" rel=\"nofollow noreferrer\">XY problem</a>. Rather than explaining how you want to solve your problem, explain what is the problem you are trying to solve and why you think this is the best way to do so."},{"owner":{"account_id":5273740,"reputation":698,"user_id":4211252,"display_name":"Thilo Schwarz"},"score":0,"creation_date":1687887193,"post_id":76567166,"comment_id":134998971,"body_markdown":"If your custom condition depends on properties, you could use @ConditionalOnProperty","body":"If your custom condition depends on properties, you could use @ConditionalOnProperty"}],"answers":[{"tags":[],"owner":{"account_id":19742551,"reputation":1,"user_id":14455694,"display_name":"hipstermartin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687887024,"creation_date":1687887024,"answer_id":76567340,"question_id":76567166,"body_markdown":"In Spring, the conditions specified using the @Conditional annotation are evaluated during the bean registration process, which happens before the beans are actually instantiated. Therefore, it is not possible to directly use a bean within a custom condition because the bean is not available at that stage.\r\n\r\nTo overcome this, you can use the @Conditional annotation along with the @ConditionalOnBean annotation. By specifying @ConditionalOnBean with the name or type of the dependent bean, you ensure that your custom condition is only evaluated if the dependent bean is present.\r\n\r\nThis way, the custom condition will be called after the dependent bean is instantiated, as Spring ensures that all the necessary dependencies are satisfied before creating a bean that is conditionally declared.\r\n\r\nBy using @ConditionalOnBean with your custom condition, you can make the condition dependent on the presence of another bean, allowing you to control the instantiation order correctly.","title":"Can we use a spring bean within a custom condition","body":"<p>In Spring, the conditions specified using the @Conditional annotation are evaluated during the bean registration process, which happens before the beans are actually instantiated. Therefore, it is not possible to directly use a bean within a custom condition because the bean is not available at that stage.</p>\n<p>To overcome this, you can use the @Conditional annotation along with the @ConditionalOnBean annotation. By specifying @ConditionalOnBean with the name or type of the dependent bean, you ensure that your custom condition is only evaluated if the dependent bean is present.</p>\n<p>This way, the custom condition will be called after the dependent bean is instantiated, as Spring ensures that all the necessary dependencies are satisfied before creating a bean that is conditionally declared.</p>\n<p>By using @ConditionalOnBean with your custom condition, you can make the condition dependent on the presence of another bean, allowing you to control the instantiation order correctly.</p>\n"}],"owner":{"account_id":28906586,"reputation":1,"user_id":22140505,"display_name":"David Moriconi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":100,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687887024,"creation_date":1687885473,"question_id":76567166,"body_markdown":"I am trying to declare a Spring bean depending on a custom condition. To do so, I have implemented a custom condition and used the @Conditonal annotation on my bean. \r\n\r\nMy problem is that my custom condition needs to use another bean to do the validation, but the condition is always called before that bean is instantiated. Is there a way to tell Spring to call my custom condition only once that bean is instantiated?\r\n\r\n\r\nI have tried a couple of things:\r\n\r\n1. Use @DependsOn along with @Conditional to force the order of instantiation and try to tell Spring to call the condition after the bean in @DependsOn is instantiated.\r\n\r\n2. Use @Lazy on my bean to instantiate it only if needed, thus after the dependant bean is instantiated. \r\n\r\n3. Use @ConditionalOnBean with my custom condition. \r\n\r\nAll of these do not work, my custom condition is called before the dependant bean is instantiated. ","title":"Can we use a spring bean within a custom condition","body":"<p>I am trying to declare a Spring bean depending on a custom condition. To do so, I have implemented a custom condition and used the @Conditonal annotation on my bean.</p>\n<p>My problem is that my custom condition needs to use another bean to do the validation, but the condition is always called before that bean is instantiated. Is there a way to tell Spring to call my custom condition only once that bean is instantiated?</p>\n<p>I have tried a couple of things:</p>\n<ol>\n<li><p>Use @DependsOn along with @Conditional to force the order of instantiation and try to tell Spring to call the condition after the bean in @DependsOn is instantiated.</p>\n</li>\n<li><p>Use @Lazy on my bean to instantiate it only if needed, thus after the dependant bean is instantiated.</p>\n</li>\n<li><p>Use @ConditionalOnBean with my custom condition.</p>\n</li>\n</ol>\n<p>All of these do not work, my custom condition is called before the dependant bean is instantiated.</p>\n"},{"tags":["java","kotlin","pdfbox"],"comments":[{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":1,"creation_date":1687841749,"post_id":76560129,"comment_id":134989101,"body_markdown":"As you don&#39;t show *how* you &quot;modify the PDF&quot;, what do you expect us to say? Allow me to remark, though, that there is a lot of &quot;example code&quot; out there that only works under benign circumstances.","body":"As you don&#39;t show <i>how</i> you &quot;modify the PDF&quot;, what do you expect us to say? Allow me to remark, though, that there is a lot of &quot;example code&quot; out there that only works under benign circumstances."},{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":1,"creation_date":1687847875,"post_id":76560129,"comment_id":134989962,"body_markdown":"https://pdfbox.apache.org/2.0/migration.html#why-was-the-replacetext-example-removed%3F","body":"<a href=\"https://pdfbox.apache.org/2.0/migration.html#why-was-the-replacetext-example-removed%3F\" rel=\"nofollow noreferrer\">pdfbox.apache.org/2.0/&hellip;</a>"},{"owner":{"account_id":12538775,"reputation":458,"user_id":9124526,"display_name":"Mike"},"score":0,"creation_date":1687896925,"post_id":76560129,"comment_id":135000790,"body_markdown":"I modified it and put the code","body":"I modified it and put the code"},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1687924863,"post_id":76560129,"comment_id":135003511,"body_markdown":"First of all, your code seems to process only a subset of the pdf operators and completely drops the others. This can substantially change the apostate of the page. Also it applies `replacePdfText` directly to the text pieces drawn for each instruction. This may take from complete lines to single glyphs. By the way, throwing away the numeric parameters of `OperatorName.SHOW_TEXT_ADJUSTED` can substantially change the result.","body":"First of all, your code seems to process only a subset of the pdf operators and completely drops the others. This can substantially change the apostate of the page. Also it applies <code>replacePdfText</code> directly to the text pieces drawn for each instruction. This may take from complete lines to single glyphs. By the way, throwing away the numeric parameters of <code>OperatorName.SHOW_TEXT_ADJUSTED</code> can substantially change the result."}],"owner":{"account_id":12538775,"reputation":458,"user_id":9124526,"display_name":"Mike"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1687886769,"creation_date":1687812118,"question_id":76560129,"body_markdown":"I am trying to modify the PDF using Java [PDFBox](https://pdfbox.apache.org) using Kotlin, and what is happening that I am modifying a text from a PDF with another text. \r\n\r\nIt works for one of my pdf template but not another one. \r\n\r\nThis code is being called to replace one text to another text. Also there is another function where it takes a PDF, generates a new PDF where it replaces the text.\r\n\r\n\r\n```\r\nprivate fun replacePage(page: PDPage, page2Stream: PDPageContentStream) {\r\n        var font = PDType1Font.HELVETICA_BOLD\r\n\r\n        val parser = PDFStreamParser(page)\r\n        parser.parse()\r\n\r\n        val tokens = parser.tokens\r\n        for (tokenIndex in tokens.indices) {\r\n            val token = tokens[tokenIndex]\r\n\r\n            if (token !is Operator) {\r\n                continue\r\n            }\r\n\r\n            when (token.name) {\r\n                OperatorName.BEGIN_TEXT -&gt; {\r\n                    page2Stream.beginText()\r\n                }\r\n                OperatorName.MOVE_TEXT -&gt; {\r\n                    val x = (tokens[tokenIndex - 2] as COSNumber).floatValue()\r\n                    val y = (tokens[tokenIndex - 1] as COSNumber).floatValue()\r\n                    page2Stream.newLineAtOffset(x, y)\r\n                }\r\n                OperatorName.SET_MATRIX -&gt; {\r\n                    val ary = COSArray()\r\n                    ary.addAll((6 downTo 1).map {\r\n                        tokens[tokenIndex - it] as COSNumber\r\n                    })\r\n                    page2Stream.setTextMatrix(Matrix(ary))\r\n                }\r\n                OperatorName.SET_FONT_AND_SIZE -&gt; {\r\n                    val fontNameObj = tokens[tokenIndex - 2] as COSName\r\n                    val fontSizeObj = tokens[tokenIndex - 1] as COSNumber\r\n                    font = PDType1Font.HELVETICA_BOLD\r\n                    val fontSize = fontSizeObj.floatValue()\r\n                    page2Stream.setFont(font!!, fontSize)\r\n                }\r\n                OperatorName.SHOW_TEXT -&gt; {\r\n                    val previous = tokens[tokenIndex - 1] as COSString\r\n                    val buffer = parsePdfString(font!!, previous)\r\n                    val buffer2 = replacePdfText(buffer)\r\n                    page2Stream.showText(buffer2)\r\n                }\r\n                OperatorName.SHOW_TEXT_ADJUSTED -&gt; {\r\n                    val previous = tokens[tokenIndex - 1] as COSArray\r\n                    val buffer = previous.filterIsInstance&lt;COSString&gt;().joinToString(&quot;&quot;) { obj -&gt;\r\n                        parsePdfString(font!!, obj)\r\n                    }\r\n\r\n                    val buffer2 = replacePdfText(buffer)\r\n                    page2Stream.showText(buffer2)\r\n                }\r\n                OperatorName.END_TEXT -&gt; {\r\n                    page2Stream.endText()\r\n                }\r\n                OperatorName.MOVE_TO -&gt; {\r\n                    val x = (tokens[tokenIndex - 2] as COSNumber).floatValue()\r\n                    val y = (tokens[tokenIndex - 1] as COSNumber).floatValue()\r\n                    page2Stream.moveTo(x, y)\r\n\r\n                }\r\n                OperatorName.LINE_TO -&gt; {\r\n                    val x = (tokens[tokenIndex - 2] as COSNumber).floatValue()\r\n                    val y = (tokens[tokenIndex - 1] as COSNumber).floatValue()\r\n                    page2Stream.lineTo(x, y)\r\n                }\r\n                OperatorName.STROKE_PATH -&gt; {\r\n                    page2Stream.stroke()\r\n                }\r\n            }\r\n        }\r\n    }","title":"Using PDFBox but it doesn&#39;t modify the pdf, and I am having trouble modifying one PDF whereas another PDF works","body":"<p>I am trying to modify the PDF using Java <a href=\"https://pdfbox.apache.org\" rel=\"nofollow noreferrer\">PDFBox</a> using Kotlin, and what is happening that I am modifying a text from a PDF with another text.</p>\n<p>It works for one of my pdf template but not another one.</p>\n<p>This code is being called to replace one text to another text. Also there is another function where it takes a PDF, generates a new PDF where it replaces the text.</p>\n<pre><code>private fun replacePage(page: PDPage, page2Stream: PDPageContentStream) {\n        var font = PDType1Font.HELVETICA_BOLD\n\n        val parser = PDFStreamParser(page)\n        parser.parse()\n\n        val tokens = parser.tokens\n        for (tokenIndex in tokens.indices) {\n            val token = tokens[tokenIndex]\n\n            if (token !is Operator) {\n                continue\n            }\n\n            when (token.name) {\n                OperatorName.BEGIN_TEXT -&gt; {\n                    page2Stream.beginText()\n                }\n                OperatorName.MOVE_TEXT -&gt; {\n                    val x = (tokens[tokenIndex - 2] as COSNumber).floatValue()\n                    val y = (tokens[tokenIndex - 1] as COSNumber).floatValue()\n                    page2Stream.newLineAtOffset(x, y)\n                }\n                OperatorName.SET_MATRIX -&gt; {\n                    val ary = COSArray()\n                    ary.addAll((6 downTo 1).map {\n                        tokens[tokenIndex - it] as COSNumber\n                    })\n                    page2Stream.setTextMatrix(Matrix(ary))\n                }\n                OperatorName.SET_FONT_AND_SIZE -&gt; {\n                    val fontNameObj = tokens[tokenIndex - 2] as COSName\n                    val fontSizeObj = tokens[tokenIndex - 1] as COSNumber\n                    font = PDType1Font.HELVETICA_BOLD\n                    val fontSize = fontSizeObj.floatValue()\n                    page2Stream.setFont(font!!, fontSize)\n                }\n                OperatorName.SHOW_TEXT -&gt; {\n                    val previous = tokens[tokenIndex - 1] as COSString\n                    val buffer = parsePdfString(font!!, previous)\n                    val buffer2 = replacePdfText(buffer)\n                    page2Stream.showText(buffer2)\n                }\n                OperatorName.SHOW_TEXT_ADJUSTED -&gt; {\n                    val previous = tokens[tokenIndex - 1] as COSArray\n                    val buffer = previous.filterIsInstance&lt;COSString&gt;().joinToString(&quot;&quot;) { obj -&gt;\n                        parsePdfString(font!!, obj)\n                    }\n\n                    val buffer2 = replacePdfText(buffer)\n                    page2Stream.showText(buffer2)\n                }\n                OperatorName.END_TEXT -&gt; {\n                    page2Stream.endText()\n                }\n                OperatorName.MOVE_TO -&gt; {\n                    val x = (tokens[tokenIndex - 2] as COSNumber).floatValue()\n                    val y = (tokens[tokenIndex - 1] as COSNumber).floatValue()\n                    page2Stream.moveTo(x, y)\n\n                }\n                OperatorName.LINE_TO -&gt; {\n                    val x = (tokens[tokenIndex - 2] as COSNumber).floatValue()\n                    val y = (tokens[tokenIndex - 1] as COSNumber).floatValue()\n                    page2Stream.lineTo(x, y)\n                }\n                OperatorName.STROKE_PATH -&gt; {\n                    page2Stream.stroke()\n                }\n            }\n        }\n    }\n</code></pre>\n"},{"tags":["java","gradle"],"answers":[{"tags":[],"owner":{"account_id":1096470,"reputation":26066,"user_id":1089967,"accept_rate":59,"display_name":"lance-java"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1568880067,"creation_date":1568880067,"answer_id":58006385,"question_id":58006221,"body_markdown":"Gradle modules don&#39;t work like this. A java module is the compiled classes plus the resources. You can only exclude dependencies (ie whole modules or jars) using your attempted exclude method. You can&#39;t exclude a specific part (eg a directory) of a dependency \r\n\r\nIn my opinion excluding things is an anti-pattern. I suggest breaking things onto smaller pieces and joining them together (ie &quot;include&quot; instead of &quot;exclude&quot;)\r\n\r\nSo I suggest you create a &quot;:common&quot; project which both &quot;A&quot; and &quot;B&quot; have as a dependency. All common stuff goes in common and any specific stuff goes in A or B","title":"How can I exclude directory while using gradle&#39;s &quot;compile project&quot;?","body":"<p>Gradle modules don't work like this. A java module is the compiled classes plus the resources. You can only exclude dependencies (ie whole modules or jars) using your attempted exclude method. You can't exclude a specific part (eg a directory) of a dependency </p>\n\n<p>In my opinion excluding things is an anti-pattern. I suggest breaking things onto smaller pieces and joining them together (ie \"include\" instead of \"exclude\")</p>\n\n<p>So I suggest you create a \":common\" project which both \"A\" and \"B\" have as a dependency. All common stuff goes in common and any specific stuff goes in A or B</p>\n"},{"tags":[],"owner":{"account_id":14084441,"reputation":1,"user_id":10174503,"display_name":"Vishal Kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687886740,"creation_date":1687886740,"answer_id":76567301,"question_id":58006221,"body_markdown":"Following worked for me.\r\n\r\n     android {\r\n            ...\r\n            applicationVariants.all { variant -&gt;\r\n                if (variant.buildType == &#39;release&#39;) {\r\n                    variant.mergeAssetsProvider.configure {\r\n                        doLast {\r\n                            delete(fileTree(dir: outputDir, include: [&quot;**/directoryToExclude/**&quot;, &quot;**/fileToExclude.extension&quot;]))\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }","title":"How can I exclude directory while using gradle&#39;s &quot;compile project&quot;?","body":"<p>Following worked for me.</p>\n<pre><code> android {\n        ...\n        applicationVariants.all { variant -&gt;\n            if (variant.buildType == 'release') {\n                variant.mergeAssetsProvider.configure {\n                    doLast {\n                        delete(fileTree(dir: outputDir, include: [&quot;**/directoryToExclude/**&quot;, &quot;**/fileToExclude.extension&quot;]))\n                    }\n                }\n            }\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":11629167,"reputation":113,"user_id":9246902,"display_name":"Andrey Belonog"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1345,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1687886740,"creation_date":1568879409,"question_id":58006221,"body_markdown":"There are two modules in my project and module **A** depends on module **B**.\r\nFor building this with **Gradle** I&#39;ve used a simple code in the A&#39;s **build.gradle** file:\r\n\r\n\r\n```\r\ncompile project(&quot;:B&quot;)\r\n```\r\n\r\nMy issue is a collision of **resources** directories.\r\nWhat I want to do is to exclude certain B&#39;s module &quot;resource&quot; directory.\r\n\r\nWhat I&#39;ve tried:\r\n\r\n```\r\ncompile (project(&quot;:B&quot;)) {\r\n        exclude group : &#39;src.main&#39;, module : &#39;resources&#39;\r\n    }\r\n```\r\n\r\nWhat I&#39;ve tried as well:\r\n\r\n```\r\ncompile(project(&quot;:B&quot;)) {\r\n        exclude module: &#39;src&#39;\r\n        exclude module: &#39;main&#39;\r\n        exclude module: &#39;src/main&#39;\r\n        exclude module: &#39;src.main&#39;\r\n    }\r\n```\r\n\r\nBy excluding the root of module B, I&#39;m expecting to get failed build of whole project, but nothing happens.\r\n\r\nP.S. Every time I&#39;m running build, I&#39;m cleaning compiled jars, so they are not cached.","title":"How can I exclude directory while using gradle&#39;s &quot;compile project&quot;?","body":"<p>There are two modules in my project and module <strong>A</strong> depends on module <strong>B</strong>.\nFor building this with <strong>Gradle</strong> I've used a simple code in the A's <strong>build.gradle</strong> file:</p>\n\n<pre><code>compile project(\":B\")\n</code></pre>\n\n<p>My issue is a collision of <strong>resources</strong> directories.\nWhat I want to do is to exclude certain B's module \"resource\" directory.</p>\n\n<p>What I've tried:</p>\n\n<pre><code>compile (project(\":B\")) {\n        exclude group : 'src.main', module : 'resources'\n    }\n</code></pre>\n\n<p>What I've tried as well:</p>\n\n<pre><code>compile(project(\":B\")) {\n        exclude module: 'src'\n        exclude module: 'main'\n        exclude module: 'src/main'\n        exclude module: 'src.main'\n    }\n</code></pre>\n\n<p>By excluding the root of module B, I'm expecting to get failed build of whole project, but nothing happens.</p>\n\n<p>P.S. Every time I'm running build, I'm cleaning compiled jars, so they are not cached.</p>\n"},{"tags":["java","selenium-webdriver","browser-automation"],"comments":[{"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"score":0,"creation_date":1686217190,"post_id":76429148,"comment_id":134769917,"body_markdown":"Update the question with the text based HTML of the element.","body":"Update the question with the text based HTML of the element."},{"owner":{"account_id":6990353,"reputation":1340,"user_id":5359846,"accept_rate":23,"display_name":"Tal Angel"},"score":0,"creation_date":1686220922,"post_id":76429148,"comment_id":134770594,"body_markdown":"Please show us the HTML element you are trying to click. Also provide the site URL. Using a picture is poor idea.","body":"Please show us the HTML element you are trying to click. Also provide the site URL. Using a picture is poor idea."}],"answers":[{"tags":[],"owner":{"account_id":9494775,"reputation":11187,"user_id":7058266,"display_name":"Michael Mintz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687885565,"creation_date":1687885565,"answer_id":76567179,"question_id":76429148,"body_markdown":"Here&#39;s a complete [SeleniumBase](https://github.com/seleniumbase/SeleniumBase) solution that selects a date in the date-picker for that site.\r\n\r\nFirst ``pip install seleniumbase``. Then run with ``python``:\r\n\r\n```python\r\nfrom seleniumbase import BaseCase\r\nBaseCase.main(__name__, __file__)\r\n\r\nclass MakeMyTripTest(BaseCase):\r\n    def test_makemytrip(self):\r\n        self.open(&quot;https://www.makemytrip.com/flights/&quot;)\r\n        self.click(&#39;p[data-cy=&quot;departureDate&quot;]&#39;)\r\n        self.click(&#39;div[aria-label=&quot;Fri Jun 30 2023&quot;] p&#39;)\r\n        self.sleep(5)\r\n```","title":"Unable to locate element for date picker","body":"<p>Here's a complete <a href=\"https://github.com/seleniumbase/SeleniumBase\" rel=\"nofollow noreferrer\">SeleniumBase</a> solution that selects a date in the date-picker for that site.</p>\n<p>First <code>pip install seleniumbase</code>. Then run with <code>python</code>:</p>\n<pre class=\"lang-py prettyprint-override\"><code>from seleniumbase import BaseCase\nBaseCase.main(__name__, __file__)\n\nclass MakeMyTripTest(BaseCase):\n    def test_makemytrip(self):\n        self.open(&quot;https://www.makemytrip.com/flights/&quot;)\n        self.click('p[data-cy=&quot;departureDate&quot;]')\n        self.click('div[aria-label=&quot;Fri Jun 30 2023&quot;] p')\n        self.sleep(5)\n</code></pre>\n"}],"owner":{"account_id":28777784,"reputation":1,"user_id":22040011,"display_name":"Kaustav Guha"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687885565,"creation_date":1686205857,"question_id":76429148,"body_markdown":"I am trying to locate an element\r\n\r\n![enter image description here](https://i.stack.imgur.com/ZXv40.png)\r\n\r\nThe structure is `&lt;div&gt;June 2023&lt;/div&gt;` to locate a particular month year value which is the header of the date picker\r\n\r\nI am unable to create a unique identifier from this above line, please help.\r\n\r\nUnable to make a CSS selector/XPATH identifier ","title":"Unable to locate element for date picker","body":"<p>I am trying to locate an element</p>\n<p><img src=\"https://i.stack.imgur.com/ZXv40.png\" alt=\"enter image description here\" /></p>\n<p>The structure is <code>&lt;div&gt;June 2023&lt;/div&gt;</code> to locate a particular month year value which is the header of the date picker</p>\n<p>I am unable to create a unique identifier from this above line, please help.</p>\n<p>Unable to make a CSS selector/XPATH identifier</p>\n"},{"tags":["java","spring-boot","vaadin","vaadin-flow"],"comments":[{"owner":{"account_id":2759852,"reputation":7920,"user_id":2376954,"display_name":"Leif &#197;strand"},"score":0,"creation_date":1581494158,"post_id":60179159,"comment_id":106448416,"body_markdown":"Could you share the full stacktrace and also try running your application with assertions enabled (`-ea` as a JVM parameter) to see if that gives any additional information?","body":"Could you share the full stacktrace and also try running your application with assertions enabled (<code>-ea</code> as a JVM parameter) to see if that gives any additional information?"}],"answers":[{"tags":[],"owner":{"account_id":12280349,"reputation":10212,"user_id":8962195,"display_name":"Tatu Lund"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1687885179,"creation_date":1581481668,"answer_id":60181145,"question_id":60179159,"body_markdown":"You have some logic in your app that attempts to modify UI state, components etc. from a *background* thread.  That should be done guarded by locking. So you need to encapsulate the logic in your view that is called from background method with \r\n\r\n    getUI().ifPresent(ui -&gt; ui.access(() -&gt; {\r\n        ...\r\n    }));\r\n\r\nAlso, `Server Push` should be enabled.\r\n\r\nDocumentation: https://vaadin.com/docs/latest/advanced/server-push\r\n","title":"Vaadin Spring Boot: &quot;Cannot access state in VaadinSession or UI without locking the session&quot; when multiple users access UI","body":"<p>You have some logic in your app that attempts to modify UI state, components etc. from a <em>background</em> thread.  That should be done guarded by locking. So you need to encapsulate the logic in your view that is called from background method with</p>\n<pre><code>getUI().ifPresent(ui -&gt; ui.access(() -&gt; {\n    ...\n}));\n</code></pre>\n<p>Also, <code>Server Push</code> should be enabled.</p>\n<p>Documentation: <a href=\"https://vaadin.com/docs/latest/advanced/server-push\" rel=\"nofollow noreferrer\">https://vaadin.com/docs/latest/advanced/server-push</a></p>\n"},{"tags":[],"owner":{"account_id":4157048,"reputation":1659,"user_id":3553550,"accept_rate":32,"display_name":"Martin Wunderlich"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1641826510,"creation_date":1641826510,"answer_id":70654357,"question_id":60179159,"body_markdown":"FWIW, I was facing a similar issue with the exact same error message in a Vaadin-based MVC application (not using Spring MVC in addition to what Vaadin provides ootb). The root cause was the way the application was architected: The controllers in the MVC application were constructed as stateless singletons, similar to Spring MVC, which is fine. \r\n\r\nHowever, the views were instantiated and registered not per user/session, but globally. This worked alright during local development when only one user was accessing the application, but failed as soon as more than one user was logged in, because the Vaadin application tried to access the same view instance from different sessions. This lead to the error stated by the OP. \r\n\r\nThe solution then was to disentangle the MVC architecture and make sure that different view instances get created per user session. ","title":"Vaadin Spring Boot: &quot;Cannot access state in VaadinSession or UI without locking the session&quot; when multiple users access UI","body":"<p>FWIW, I was facing a similar issue with the exact same error message in a Vaadin-based MVC application (not using Spring MVC in addition to what Vaadin provides ootb). The root cause was the way the application was architected: The controllers in the MVC application were constructed as stateless singletons, similar to Spring MVC, which is fine.</p>\n<p>However, the views were instantiated and registered not per user/session, but globally. This worked alright during local development when only one user was accessing the application, but failed as soon as more than one user was logged in, because the Vaadin application tried to access the same view instance from different sessions. This lead to the error stated by the OP.</p>\n<p>The solution then was to disentangle the MVC architecture and make sure that different view instances get created per user session.</p>\n"}],"owner":{"account_id":16073814,"reputation":731,"user_id":11601529,"display_name":"tigu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3054,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1687885179,"creation_date":1581465643,"question_id":60179159,"body_markdown":"I have a vaadin flow (13) application with spring boot. I have a VerticalLayout, annotated with `@UIScope` with multiple sub-layouts. The sub layouts are annotated with `@Scope(&quot;prototype&quot;)` and created via `ctx.getBean(SubUI.class, ...)`. Depending on selections and button clicks on the parent UI (VerticalLayout), the sub layouts are added or removed.\r\n\r\nThat all works fine as long as I use the application alone (that&#39;s the reason why I found the error right now, after delivering the application to my customer for acceptantce test). They tested with multiple users. As long as one user works with the appliaction, everything works but as soon as a second user enters the UI (VerticalLayout), the following exception is thrown:\r\n\r\n```\r\njava.util.concurrent.ExecutionException: java.lang.IllegalStateException: Cannot access state in VaadinSession or UI without locking the session.\r\n\tat java.util.concurrent.FutureTask.report(FutureTask.java:122) ~[na:1.8.0_202]\r\n\tat java.util.concurrent.FutureTask.get(FutureTask.java:192) ~[na:1.8.0_202]\r\n    ...\r\n```\r\n\r\nI tried different annotations for my parent layout (@UIScope, @Scope(&quot;prototype&quot;), @VaadinSessionScope) but non solves my error. \r\n\r\nI googled about the problem and found some threads, but none of them helped me to solve my problem. I am not really sure if the problem is caused by the scoping of my UIs/layouts or maybe by the data binding. In my sub layouts, data is bound using `Binder&lt;MyEntity&gt; binder = new Binder&lt;&gt;(MyEntity.class);` and `binder.forField(xxx).bind(MyEntity::getXY,MyEntity::setXY);`.\r\n\r\nCan someone maybe explain me, what my problem is? I would be really happy, because I need to deliver a fixed version for my customers test.\r\n\r\nKind regards","title":"Vaadin Spring Boot: &quot;Cannot access state in VaadinSession or UI without locking the session&quot; when multiple users access UI","body":"<p>I have a vaadin flow (13) application with spring boot. I have a VerticalLayout, annotated with <code>@UIScope</code> with multiple sub-layouts. The sub layouts are annotated with <code>@Scope(\"prototype\")</code> and created via <code>ctx.getBean(SubUI.class, ...)</code>. Depending on selections and button clicks on the parent UI (VerticalLayout), the sub layouts are added or removed.</p>\n\n<p>That all works fine as long as I use the application alone (that's the reason why I found the error right now, after delivering the application to my customer for acceptantce test). They tested with multiple users. As long as one user works with the appliaction, everything works but as soon as a second user enters the UI (VerticalLayout), the following exception is thrown:</p>\n\n<pre><code>java.util.concurrent.ExecutionException: java.lang.IllegalStateException: Cannot access state in VaadinSession or UI without locking the session.\n    at java.util.concurrent.FutureTask.report(FutureTask.java:122) ~[na:1.8.0_202]\n    at java.util.concurrent.FutureTask.get(FutureTask.java:192) ~[na:1.8.0_202]\n    ...\n</code></pre>\n\n<p>I tried different annotations for my parent layout (@UIScope, @Scope(\"prototype\"), @VaadinSessionScope) but non solves my error. </p>\n\n<p>I googled about the problem and found some threads, but none of them helped me to solve my problem. I am not really sure if the problem is caused by the scoping of my UIs/layouts or maybe by the data binding. In my sub layouts, data is bound using <code>Binder&lt;MyEntity&gt; binder = new Binder&lt;&gt;(MyEntity.class);</code> and <code>binder.forField(xxx).bind(MyEntity::getXY,MyEntity::setXY);</code>.</p>\n\n<p>Can someone maybe explain me, what my problem is? I would be really happy, because I need to deliver a fixed version for my customers test.</p>\n\n<p>Kind regards</p>\n"},{"tags":["java","xml","rest","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":3763662,"reputation":7765,"user_id":3127812,"accept_rate":0,"display_name":"Sambit"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1563114142,"creation_date":1563114142,"answer_id":57028226,"question_id":57027821,"body_markdown":"As of jackson-dataformat-xml version 2.9.0 cannot handle XML Prolog. This is a limitation. To achieve you have two options.\r\n\r\n 1. You have to use JAXB and annotate your POJO with proper annotations.\r\n 2. Generate the XML as String using XMLStreamWriter using Jackson 2 to generate the XML with prolog. I provide below the code outline.\r\n\r\n\r\n&gt;     StringWriter stringWriter = new StringWriter();\r\n&gt;     XMLOutputFactory xmlOutputFactory = XMLOutputFactory.newFactory();\r\n&gt;     XMLStreamWriter sw = xmlOutputFactory.createXMLStreamWriter(stringWriter);\r\n&gt;     XmlMapper mapper = new XmlMapper();\r\n&gt;     sw.writeStartDocument();\r\n&gt;     sw.writeStartElement(&quot;root&quot;);\r\n&gt;     mapper.writeValue(sw, YourPojoBean);\r\n&gt;     sw.writeComment(&quot;Some comment&quot;);\r\n&gt;     sw.writeEndElement();\r\n&gt;     sw.writeEndDocument();\r\n\r\nFor more details, refer this article.\r\nhttps://dzone.com/articles/solving-the-xml-problem-with-jackson\r\n\r\n","title":"How to insert XML Prolog &lt;?xml version = &quot;1.0&quot; encoding = &quot;UTF-8&quot;?&gt;to Rest XML response in Spring Boot Application","body":"<p>As of jackson-dataformat-xml version 2.9.0 cannot handle XML Prolog. This is a limitation. To achieve you have two options.</p>\n\n<ol>\n<li>You have to use JAXB and annotate your POJO with proper annotations.</li>\n<li>Generate the XML as String using XMLStreamWriter using Jackson 2 to generate the XML with prolog. I provide below the code outline.</li>\n</ol>\n\n<blockquote>\n<pre><code>StringWriter stringWriter = new StringWriter();\nXMLOutputFactory xmlOutputFactory = XMLOutputFactory.newFactory();\nXMLStreamWriter sw = xmlOutputFactory.createXMLStreamWriter(stringWriter);\nXmlMapper mapper = new XmlMapper();\nsw.writeStartDocument();\nsw.writeStartElement(\"root\");\nmapper.writeValue(sw, YourPojoBean);\nsw.writeComment(\"Some comment\");\nsw.writeEndElement();\nsw.writeEndDocument();\n</code></pre>\n</blockquote>\n\n<p>For more details, refer this article.\n<a href=\"https://dzone.com/articles/solving-the-xml-problem-with-jackson\" rel=\"nofollow noreferrer\">https://dzone.com/articles/solving-the-xml-problem-with-jackson</a></p>\n"},{"tags":[],"owner":{"account_id":1030287,"reputation":549,"user_id":1038733,"accept_rate":0,"display_name":"Erikson"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646280129,"creation_date":1646280129,"answer_id":71332003,"question_id":57027821,"body_markdown":"Hopefully this would help somebody: to have a complete solution, took the answer from Sambit, tweaked it a bit and wrote the following utility class. Note that convertPojoToXmlString() return an XML string which could then be sent back to the caller:\r\n\r\n\r\n    package com.xml.util;\r\n    import java.io.IOException;\r\n    import java.io.StringWriter;\r\n    \r\n    import javax.xml.stream.FactoryConfigurationError;\r\n    import javax.xml.stream.XMLOutputFactory;\r\n    import javax.xml.stream.XMLStreamException;\r\n    import javax.xml.stream.XMLStreamWriter;\r\n    \r\n    import com.ctc.wstx.api.WstxInputProperties;\r\n    import com.fasterxml.jackson.dataformat.xml.XmlMapper;\r\n    \r\n    /**\r\n     * @author ekariyev\r\n     *\r\n     */\r\n    public class XmlUtil {\r\n    \r\n    \tprivate final static XMLOutputFactory xmlOutputFactory = XMLOutputFactory.newFactory();\r\n    \r\n    \tstatic {\r\n    \t\txmlOutputFactory.setProperty(WstxInputProperties.P_RETURN_NULL_FOR_DEFAULT_NAMESPACE, true);\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * @param object\r\n    \t * @return\r\n    \t * @throws XMLStreamException\r\n    \t * @throws IOException\r\n    \t * @throws FactoryConfigurationError\r\n    \t */\r\n    \tpublic static String convertPojoToXmlString(final Object object) throws XMLStreamException, IOException {\r\n    \r\n    \t\tfinal StringWriter stringWriter = new StringWriter();\r\n    \r\n    \t\ttry {\r\n    \t\t\tfinal XMLStreamWriter sw = xmlOutputFactory.createXMLStreamWriter(stringWriter);\r\n    \t\t\tfinal XmlMapper mapper = new XmlMapper();\r\n    \r\n    \t\t\tsw.writeStartDocument();\r\n    \r\n    \t\t\tmapper.writeValue(sw, object);\r\n    \r\n    \t\t\tsw.writeEndDocument();\r\n    \r\n    \t\t\tsw.flush();\r\n    \r\n    \t\t} finally {\r\n    \t\t\tstringWriter.close();\r\n    \t\t}\r\n    \r\n    \t\treturn stringWriter.toString();\r\n    \r\n    \t}\r\n    \r\n    }\r\n\r\nThe solution worked with:\r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;jackson-dataformat-xml&lt;/artifactId&gt;\r\n    \t&lt;version&gt;2.9.5&lt;/version&gt;\r\n    &lt;/dependency&gt;","title":"How to insert XML Prolog &lt;?xml version = &quot;1.0&quot; encoding = &quot;UTF-8&quot;?&gt;to Rest XML response in Spring Boot Application","body":"<p>Hopefully this would help somebody: to have a complete solution, took the answer from Sambit, tweaked it a bit and wrote the following utility class. Note that convertPojoToXmlString() return an XML string which could then be sent back to the caller:</p>\n<pre><code>package com.xml.util;\nimport java.io.IOException;\nimport java.io.StringWriter;\n\nimport javax.xml.stream.FactoryConfigurationError;\nimport javax.xml.stream.XMLOutputFactory;\nimport javax.xml.stream.XMLStreamException;\nimport javax.xml.stream.XMLStreamWriter;\n\nimport com.ctc.wstx.api.WstxInputProperties;\nimport com.fasterxml.jackson.dataformat.xml.XmlMapper;\n\n/**\n * @author ekariyev\n *\n */\npublic class XmlUtil {\n\n    private final static XMLOutputFactory xmlOutputFactory = XMLOutputFactory.newFactory();\n\n    static {\n        xmlOutputFactory.setProperty(WstxInputProperties.P_RETURN_NULL_FOR_DEFAULT_NAMESPACE, true);\n    }\n\n    /**\n     * @param object\n     * @return\n     * @throws XMLStreamException\n     * @throws IOException\n     * @throws FactoryConfigurationError\n     */\n    public static String convertPojoToXmlString(final Object object) throws XMLStreamException, IOException {\n\n        final StringWriter stringWriter = new StringWriter();\n\n        try {\n            final XMLStreamWriter sw = xmlOutputFactory.createXMLStreamWriter(stringWriter);\n            final XmlMapper mapper = new XmlMapper();\n\n            sw.writeStartDocument();\n\n            mapper.writeValue(sw, object);\n\n            sw.writeEndDocument();\n\n            sw.flush();\n\n        } finally {\n            stringWriter.close();\n        }\n\n        return stringWriter.toString();\n\n    }\n\n}\n</code></pre>\n<p>The solution worked with:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-dataformat-xml&lt;/artifactId&gt;\n    &lt;version&gt;2.9.5&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8522100,"reputation":326,"user_id":6388629,"display_name":"Wang Jijun"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687885154,"creation_date":1687885154,"answer_id":76567133,"question_id":57027821,"body_markdown":"Here is a suggestion for spring boot.\r\nadd two class as the following:\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n\r\n    import javax.servlet.http.HttpServletResponse;\r\n\r\n    import org.springframework.core.MethodParameter;\r\n    import org.springframework.http.MediaType;\r\n    import org.springframework.http.converter.HttpMessageConverter;\r\n    import org.springframework.http.server.ServerHttpRequest;\r\n    import org.springframework.http.server.ServerHttpResponse;\r\n    import org.springframework.http.server.ServletServerHttpResponse;\r\n    import org.springframework.web.bind.annotation.ControllerAdvice;\r\n    import org.springframework.web.servlet.mvc.method.annotation.ResponseBodyAdvice;\r\n\r\n    @ControllerAdvice\r\n    public class XmlPrologResponseBodyAdvice implements ResponseBodyAdvice&lt;Object&gt; {\r\n        @Override\r\n        public boolean supports(MethodParameter returnType, Class&lt; ? extends HttpMessageConverter&lt; ? &gt;&gt; converterType) {\r\n            System.out.println(&quot;---------check the xml reponse class---------&quot;);\r\n            System.out.println(returnType.getGenericParameterType().getTypeName());\r\n\r\n            // Check if the API endpoint is the one you want to target\r\n            // Replace &quot;your/api/endpoint&quot; with the actual endpoint you want to target\r\n            String endpoint = returnType.getMethod().getDeclaringClass().getSimpleName();\r\n            System.out.println(endpoint);\r\n\r\n            if (endpoint.equalsIgnoreCase(&quot;SwSaController&quot;) &amp;&amp; !returnType.getMethod().getName().equalsIgnoreCase(&quot;GetEncodeBody&quot;)) {\r\n                // Ensure this advice is only applied for XML responses\r\n                MediaType mediaType = returnType.getGenericParameterType().getTypeName().equals(&quot;jp.pacific.sw.sa.response.CommonResponse&quot;) ?\r\n                                      MediaType.APPLICATION_XML : MediaType.TEXT_XML;\r\n                return mediaType.equals(MediaType.APPLICATION_XML) || mediaType.equals(MediaType.TEXT_XML);\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n        @Override\r\n        public Object beforeBodyWrite(Object body, MethodParameter returnType, MediaType selectedContentType, Class&lt; ? extends HttpMessageConverter&lt; ? &gt;&gt; selectedConverterType, ServerHttpRequest request, ServerHttpResponse response) {\r\n            // Retrieve the underlying HttpServletResponse\r\n            HttpServletResponse servletResponse = ((ServletServerHttpResponse) response).getServletResponse();\r\n\r\n            // Set the Content-Type header with the XML prolog\r\n            servletResponse.setContentType(selectedContentType.toString() + &quot;;charset=UTF-8&quot;);\r\n\r\n            // Write the XML prolog to the response output stream\r\n            try {\r\n                servletResponse.getOutputStream().write(&quot;&lt;?xml version=\\&quot;1.0\\&quot; encoding=\\&quot;UTF-8\\&quot;?&gt;&quot;.getBytes());\r\n            } catch (Exception e) {\r\n                // Handle the exception if necessary\r\n            }\r\n\r\n            // Return the original body\r\n            return body;\r\n        }\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n\r\n    @Configuration\r\n    public class ApiWebConfig implements WebMvcConfigurer {\r\n        @Override\r\n        public void configureMessageConverters(List&lt;HttpMessageConverter&lt; ? &gt;&gt; converters) {\r\n            // Create the XML message converter\r\n            MappingJackson2XmlHttpMessageConverter xmlConverter = new MappingJackson2XmlHttpMessageConverter(\r\n                Jackson2ObjectMapperBuilder.xml().createXmlMapper(true).build()\r\n                );\r\n\r\n            // Set the supported media types\r\n            MediaType[] supportedMediaTypes = {MediaType.APPLICATION_XML, MediaType.TEXT_XML};\r\n            xmlConverter.setSupportedMediaTypes(Arrays.asList(supportedMediaTypes));\r\n\r\n            // Add the XML message converter to the list of converters\r\n            converters.add(xmlConverter);\r\n        }\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"How to insert XML Prolog &lt;?xml version = &quot;1.0&quot; encoding = &quot;UTF-8&quot;?&gt;to Rest XML response in Spring Boot Application","body":"<p>Here is a suggestion for spring boot.\nadd two class as the following:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>import javax.servlet.http.HttpServletResponse;\n\nimport org.springframework.core.MethodParameter;\nimport org.springframework.http.MediaType;\nimport org.springframework.http.converter.HttpMessageConverter;\nimport org.springframework.http.server.ServerHttpRequest;\nimport org.springframework.http.server.ServerHttpResponse;\nimport org.springframework.http.server.ServletServerHttpResponse;\nimport org.springframework.web.bind.annotation.ControllerAdvice;\nimport org.springframework.web.servlet.mvc.method.annotation.ResponseBodyAdvice;\n\n@ControllerAdvice\npublic class XmlPrologResponseBodyAdvice implements ResponseBodyAdvice&lt;Object&gt; {\n    @Override\n    public boolean supports(MethodParameter returnType, Class&lt; ? extends HttpMessageConverter&lt; ? &gt;&gt; converterType) {\n        System.out.println(\"---------check the xml reponse class---------\");\n        System.out.println(returnType.getGenericParameterType().getTypeName());\n\n        // Check if the API endpoint is the one you want to target\n        // Replace \"your/api/endpoint\" with the actual endpoint you want to target\n        String endpoint = returnType.getMethod().getDeclaringClass().getSimpleName();\n        System.out.println(endpoint);\n\n        if (endpoint.equalsIgnoreCase(\"SwSaController\") &amp;&amp; !returnType.getMethod().getName().equalsIgnoreCase(\"GetEncodeBody\")) {\n            // Ensure this advice is only applied for XML responses\n            MediaType mediaType = returnType.getGenericParameterType().getTypeName().equals(\"jp.pacific.sw.sa.response.CommonResponse\") ?\n                                  MediaType.APPLICATION_XML : MediaType.TEXT_XML;\n            return mediaType.equals(MediaType.APPLICATION_XML) || mediaType.equals(MediaType.TEXT_XML);\n        }\n\n        return false;\n    }\n\n    @Override\n    public Object beforeBodyWrite(Object body, MethodParameter returnType, MediaType selectedContentType, Class&lt; ? extends HttpMessageConverter&lt; ? &gt;&gt; selectedConverterType, ServerHttpRequest request, ServerHttpResponse response) {\n        // Retrieve the underlying HttpServletResponse\n        HttpServletResponse servletResponse = ((ServletServerHttpResponse) response).getServletResponse();\n\n        // Set the Content-Type header with the XML prolog\n        servletResponse.setContentType(selectedContentType.toString() + \";charset=UTF-8\");\n\n        // Write the XML prolog to the response output stream\n        try {\n            servletResponse.getOutputStream().write(\"&lt;?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?&gt;\".getBytes());\n        } catch (Exception e) {\n            // Handle the exception if necessary\n        }\n\n        // Return the original body\n        return body;\n    }\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>@Configuration\npublic class ApiWebConfig implements WebMvcConfigurer {\n    @Override\n    public void configureMessageConverters(List&lt;HttpMessageConverter&lt; ? &gt;&gt; converters) {\n        // Create the XML message converter\n        MappingJackson2XmlHttpMessageConverter xmlConverter = new MappingJackson2XmlHttpMessageConverter(\n            Jackson2ObjectMapperBuilder.xml().createXmlMapper(true).build()\n            );\n\n        // Set the supported media types\n        MediaType[] supportedMediaTypes = {MediaType.APPLICATION_XML, MediaType.TEXT_XML};\n        xmlConverter.setSupportedMediaTypes(Arrays.asList(supportedMediaTypes));\n\n        // Add the XML message converter to the list of converters\n        converters.add(xmlConverter);\n    }\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}],"owner":{"account_id":12537649,"reputation":21,"user_id":9123811,"display_name":"Vipin Mittal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4309,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1687885154,"creation_date":1563110663,"question_id":57027821,"body_markdown":"How to insert XML Prolog &lt;?xml version = &quot;1.0&quot; encoding = &quot;UTF-8&quot;?&gt;to Rest XML response in Spring Boot Application.\r\n\r\n\r\nI am using jackson xml dataformat in spring boot rest api.\r\n\r\nMy Current rest-xml response is:\r\n```xml\r\n&lt;Response&gt;\r\n     &lt;person id = &quot;hello&quot;&gt;\r\n        &lt;name&gt;xyz&lt;/name&gt;\r\n     &lt;/person&gt;\r\n&lt;/Response&gt;\r\n```\r\n\r\nwhile I want :\r\n```xml\r\n&lt;?xml version = &quot;1.0&quot; encoding = &quot;UTF-8&quot;?&gt;\r\n&lt;Response&gt;\r\n     &lt;person id = &quot;hello&quot;&gt;\r\n        &lt;name&gt;xyz&lt;/name&gt;\r\n     &lt;/person&gt;\r\n&lt;/Response&gt;\r\n```","title":"How to insert XML Prolog &lt;?xml version = &quot;1.0&quot; encoding = &quot;UTF-8&quot;?&gt;to Rest XML response in Spring Boot Application","body":"<p>How to insert XML Prolog to Rest XML response in Spring Boot Application.</p>\n\n<p>I am using jackson xml dataformat in spring boot rest api.</p>\n\n<p>My Current rest-xml response is:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;Response&gt;\n     &lt;person id = \"hello\"&gt;\n        &lt;name&gt;xyz&lt;/name&gt;\n     &lt;/person&gt;\n&lt;/Response&gt;\n</code></pre>\n\n<p>while I want :</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version = \"1.0\" encoding = \"UTF-8\"?&gt;\n&lt;Response&gt;\n     &lt;person id = \"hello\"&gt;\n        &lt;name&gt;xyz&lt;/name&gt;\n     &lt;/person&gt;\n&lt;/Response&gt;\n</code></pre>\n"},{"tags":["java","spring-boot","spring-data-jpa","cascade","cascading-deletes"],"answers":[{"tags":[],"owner":{"account_id":28877964,"reputation":581,"user_id":22118035,"display_name":"Dhruman Desai"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1687868910,"creation_date":1687868480,"answer_id":76564806,"question_id":76564585,"body_markdown":"You have to decide the owner first. In bidirectional many to many relation, you have to set one entity as an owner. In your case if you want to delete corressponding entities of InsurancePolicy entity then you have to set InsurancePolicy entity as an owner.\r\n\r\nYou have to write this to set your required entity as an owner:\r\n\r\n    @ManyToMany(mappedBy = &quot;entity name&quot;)\r\n\r\nAnd you have to set `CascadeType.PERSIST`.\r\n\r\n","title":"deleteById() method not working with ManyToMany mapping: Spring Boot and JPA","body":"<p>You have to decide the owner first. In bidirectional many to many relation, you have to set one entity as an owner. In your case if you want to delete corressponding entities of InsurancePolicy entity then you have to set InsurancePolicy entity as an owner.</p>\n<p>You have to write this to set your required entity as an owner:</p>\n<pre><code>@ManyToMany(mappedBy = &quot;entity name&quot;)\n</code></pre>\n<p>And you have to set <code>CascadeType.PERSIST</code>.</p>\n"},{"tags":[],"owner":{"account_id":17820696,"reputation":86,"user_id":12943132,"display_name":"mahdi rahmani"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1687884745,"creation_date":1687870929,"answer_id":76565150,"question_id":76564585,"body_markdown":"in your code you should have an filed in InsurancePolicy that links to County \r\n\r\n        @ManyToMany(fetch = FetchType.LAZY, cascade = CascadeType.REMOVE)\r\n    @JoinTable(name = &quot;policy_county&quot;,\r\n            joinColumns = @JoinColumn(name = &quot;insurance_policy_id&quot;),\r\n            inverseJoinColumns = @JoinColumn(name = &quot;county_id&quot;))\r\n    private Set&lt;County&gt; counties= new HashSet&lt;&gt;();\r\n\r\nand you should have filed in county like this \r\n\r\n     @ManyToMany(mappedBy = &quot;insurance_policy&quot;, fetch = FetchType.LAZY)\r\n    private Set&lt;InsurancePolicy &gt; students = new HashSet&lt;&gt;();\r\n\r\n\r\nhibernate does not now you have many to many relation if you dont have it.\r\n\r\nbut If you have extra fields in your join table, such as a cost field, Hibernate will not automatically delete the corresponding entries from the join table when you delete a entity. Instead, you need to manually delete the entries from the join table using a native SQL query or Hibernate&#39;s Criteria API.\r\n\r\nanother option is convert many to many relation into 2 one to many relation like this : \r\n\r\n    public class Student {\r\n    \r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n    \r\n    @Column(name = &quot;name&quot;)\r\n    private String name;\r\n    \r\n    @OneToMany(mappedBy = &quot;student&quot;, cascade = CascadeType.ALL, orphanRemoval = true)\r\n    private Set&lt;Enrollment&gt; enrollments = new HashSet&lt;&gt;();}\r\n\r\n    public class Course {\r\n    \r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n    \r\n    @Column(name = &quot;name&quot;)\r\n    private String name;\r\n    \r\n    @OneToMany(mappedBy = &quot;course&quot;, cascade = CascadeType.ALL, orphanRemoval = true)\r\n    private Set&lt;Enrollment&gt; enrollments = new HashSet&lt;&gt;();}\r\n\r\n    \r\n    public class Enrollment {\r\n    \r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n    \r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    private Student student;\r\n    \r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    private Course course;\r\n    \r\n    @Column(name = &quot;cost&quot;)\r\n    private BigDecimal cost;}\r\n\r\nIn the above example, the &quot;Student&quot; entity has a one-to-many relationship with the &quot;Enrollment&quot; entity, and the &quot;Course&quot; entity also has a one-to-many relationship with the &quot;Enrollment&quot; entity. Both relationships have cascading deletes set up using the CascadeType.ALL option, which will cause associated &quot;Enrollment&quot; entities to be deleted automatically when a &quot;Student&quot; or &quot;Course&quot; entity is deleted. The orphanRemoval attribute is set to true, which will remove any &quot;Enrollment&quot; entities that are no longer associated with a &quot;Student&quot; or &quot;Course&quot; entity.\r\n\r\nWith cascading deletes set up, you can delete a &quot;Student&quot; or &quot;Course&quot; entity and all associated &quot;Enrollment&quot; entities will be deleted automatically:","title":"deleteById() method not working with ManyToMany mapping: Spring Boot and JPA","body":"<p>in your code you should have an filed in InsurancePolicy that links to County</p>\n<pre><code>    @ManyToMany(fetch = FetchType.LAZY, cascade = CascadeType.REMOVE)\n@JoinTable(name = &quot;policy_county&quot;,\n        joinColumns = @JoinColumn(name = &quot;insurance_policy_id&quot;),\n        inverseJoinColumns = @JoinColumn(name = &quot;county_id&quot;))\nprivate Set&lt;County&gt; counties= new HashSet&lt;&gt;();\n</code></pre>\n<p>and you should have filed in county like this</p>\n<pre><code> @ManyToMany(mappedBy = &quot;insurance_policy&quot;, fetch = FetchType.LAZY)\nprivate Set&lt;InsurancePolicy &gt; students = new HashSet&lt;&gt;();\n</code></pre>\n<p>hibernate does not now you have many to many relation if you dont have it.</p>\n<p>but If you have extra fields in your join table, such as a cost field, Hibernate will not automatically delete the corresponding entries from the join table when you delete a entity. Instead, you need to manually delete the entries from the join table using a native SQL query or Hibernate's Criteria API.</p>\n<p>another option is convert many to many relation into 2 one to many relation like this :</p>\n<pre><code>public class Student {\n\n@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\nprivate Long id;\n\n@Column(name = &quot;name&quot;)\nprivate String name;\n\n@OneToMany(mappedBy = &quot;student&quot;, cascade = CascadeType.ALL, orphanRemoval = true)\nprivate Set&lt;Enrollment&gt; enrollments = new HashSet&lt;&gt;();}\n\npublic class Course {\n\n@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\nprivate Long id;\n\n@Column(name = &quot;name&quot;)\nprivate String name;\n\n@OneToMany(mappedBy = &quot;course&quot;, cascade = CascadeType.ALL, orphanRemoval = true)\nprivate Set&lt;Enrollment&gt; enrollments = new HashSet&lt;&gt;();}\n\n\npublic class Enrollment {\n\n@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\nprivate Long id;\n\n@ManyToOne(fetch = FetchType.LAZY)\nprivate Student student;\n\n@ManyToOne(fetch = FetchType.LAZY)\nprivate Course course;\n\n@Column(name = &quot;cost&quot;)\nprivate BigDecimal cost;}\n</code></pre>\n<p>In the above example, the &quot;Student&quot; entity has a one-to-many relationship with the &quot;Enrollment&quot; entity, and the &quot;Course&quot; entity also has a one-to-many relationship with the &quot;Enrollment&quot; entity. Both relationships have cascading deletes set up using the CascadeType.ALL option, which will cause associated &quot;Enrollment&quot; entities to be deleted automatically when a &quot;Student&quot; or &quot;Course&quot; entity is deleted. The orphanRemoval attribute is set to true, which will remove any &quot;Enrollment&quot; entities that are no longer associated with a &quot;Student&quot; or &quot;Course&quot; entity.</p>\n<p>With cascading deletes set up, you can delete a &quot;Student&quot; or &quot;Course&quot; entity and all associated &quot;Enrollment&quot; entities will be deleted automatically:</p>\n"}],"owner":{"account_id":25845637,"reputation":534,"user_id":19580540,"display_name":"ayush"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":171,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76565150,"answer_count":2,"score":1,"last_activity_date":1687884745,"creation_date":1687866808,"question_id":76564585,"body_markdown":"I have a scenario in which I have a **ManyToMany** mapping between a **Policy** and a **County** entity tables. Here is the entity code-  \r\n**InsurancePolicy.java-**\r\n```\r\n@Entity\r\n@Table(name = &quot;insurance_policy&quot;)\r\n\r\npublic class InsurancePolicy {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    @Column(name=&quot;policy_id&quot;)\r\n    private long policyId;\r\n\r\n    @Column(name=&quot;policy_name&quot;,nullable = false,unique = true)\r\n    private String policyName;\r\n\r\n    //Short description\r\n    @Column(name=&quot;policy_description&quot;,nullable = false)\r\n    private String policyDescription;\r\n\r\n    //Long description\r\n    @Column(name=&quot;choose_description&quot;,nullable = false)\r\n    private String chooseDescription;\r\n\r\n\r\n    //many policies can belong to one category\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;company_id&quot;, nullable = false)\r\n    private Company company;\r\n\r\n    //many policies can belong to one category\r\n    @ManyToOne(fetch=FetchType.LAZY)\r\n    @JoinColumn(name=&quot;category_id&quot;,nullable=false)\r\n    private Category category;\r\n\r\n    @ManyToMany(mappedBy = &quot;queriedPolices&quot;,fetch = FetchType.LAZY,cascade = {CascadeType.DETACH, CascadeType.MERGE, CascadeType.PERSIST, CascadeType.REFRESH})\r\n    private Set&lt;User&gt; usersQueried=new HashSet&lt;&gt;();\r\n\r\n    @OneToMany(mappedBy = &quot;policy&quot;, cascade = {CascadeType.MERGE,CascadeType.PERSIST,CascadeType.REMOVE},fetch = FetchType.LAZY)\r\n    private Set&lt;PolicyCounty&gt; policyCounties = new HashSet&lt;&gt;();\r\n``` \r\n**PolicyCounty.java-** (Relationship table)\r\n``` \r\n@Data\r\n@Entity\r\n@Table(name=&quot;policy_county&quot;)\r\npublic class PolicyCounty {\r\n\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    @Column(name=&quot;policy_county_id&quot;)\r\n    private long policyStateId;\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name=&quot;policy_id&quot;)\r\n    private InsurancePolicy policy;\r\n\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;county_id&quot;)\r\n    private County county;\r\n\r\n    @Column(name=&quot;cost&quot;,nullable = false)\r\n    private double cost;\r\n}\r\n```\r\n**County.java-**\r\n```\r\n@Entity\r\n@Data\r\n@Table(name=&quot;county&quot;)\r\npublic class County {\r\n\r\n    @Id\r\n    @Column(name=&quot;countyid&quot;)\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private long countyId;\r\n\r\n    @Column(name=&quot;countyname&quot;,nullable = false,unique = true)\r\n    private String countyName;\r\n\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;adminId&quot;, nullable = false)\r\n    private Admin admin;\r\n\r\n    @OneToMany(mappedBy = &quot;county&quot;, cascade = {CascadeType.MERGE,CascadeType.PERSIST},fetch = FetchType.LAZY)\r\n    private Set&lt;PolicyCounty&gt; policyStates = new HashSet&lt;&gt;();\r\n\r\n}\r\n```\r\n**Problem-**  \r\nI want to delete the **InsurancePolicy** entity and also delete the corressponding entities in the PolicyCounty table. For it, I write the delete method-\r\n```\r\n@Override\r\n    public long deletePolicy(long policyId) {\r\n        boolean isPresent=insurancePolicyRepository.existsById(policyId);\r\n        if(isPresent){\r\n            insurancePolicyRepository.deleteById(policyId);\r\n            return insurancePolicyRepository.count();\r\n        }\r\n        throw new ResourceNotFoundException(&quot;Policy with id &quot;+policyId+&quot; not found&quot;);\r\n    }\r\n```\r\nNow, when I try to delete, the **entities do not get deleted from the table**. I am not getting any exception during this operation. I doubt that the problem is with the **Cascade Types** used with entities. Please help me understand this.","title":"deleteById() method not working with ManyToMany mapping: Spring Boot and JPA","body":"<p>I have a scenario in which I have a <strong>ManyToMany</strong> mapping between a <strong>Policy</strong> and a <strong>County</strong> entity tables. Here is the entity code-<br />\n<strong>InsurancePolicy.java-</strong></p>\n<pre><code>@Entity\n@Table(name = &quot;insurance_policy&quot;)\n\npublic class InsurancePolicy {\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    @Column(name=&quot;policy_id&quot;)\n    private long policyId;\n\n    @Column(name=&quot;policy_name&quot;,nullable = false,unique = true)\n    private String policyName;\n\n    //Short description\n    @Column(name=&quot;policy_description&quot;,nullable = false)\n    private String policyDescription;\n\n    //Long description\n    @Column(name=&quot;choose_description&quot;,nullable = false)\n    private String chooseDescription;\n\n\n    //many policies can belong to one category\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;company_id&quot;, nullable = false)\n    private Company company;\n\n    //many policies can belong to one category\n    @ManyToOne(fetch=FetchType.LAZY)\n    @JoinColumn(name=&quot;category_id&quot;,nullable=false)\n    private Category category;\n\n    @ManyToMany(mappedBy = &quot;queriedPolices&quot;,fetch = FetchType.LAZY,cascade = {CascadeType.DETACH, CascadeType.MERGE, CascadeType.PERSIST, CascadeType.REFRESH})\n    private Set&lt;User&gt; usersQueried=new HashSet&lt;&gt;();\n\n    @OneToMany(mappedBy = &quot;policy&quot;, cascade = {CascadeType.MERGE,CascadeType.PERSIST,CascadeType.REMOVE},fetch = FetchType.LAZY)\n    private Set&lt;PolicyCounty&gt; policyCounties = new HashSet&lt;&gt;();\n</code></pre>\n<p><strong>PolicyCounty.java-</strong> (Relationship table)</p>\n<pre><code>@Data\n@Entity\n@Table(name=&quot;policy_county&quot;)\npublic class PolicyCounty {\n\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    @Column(name=&quot;policy_county_id&quot;)\n    private long policyStateId;\n\n    @ManyToOne\n    @JoinColumn(name=&quot;policy_id&quot;)\n    private InsurancePolicy policy;\n\n\n    @ManyToOne\n    @JoinColumn(name = &quot;county_id&quot;)\n    private County county;\n\n    @Column(name=&quot;cost&quot;,nullable = false)\n    private double cost;\n}\n</code></pre>\n<p><strong>County.java-</strong></p>\n<pre><code>@Entity\n@Data\n@Table(name=&quot;county&quot;)\npublic class County {\n\n    @Id\n    @Column(name=&quot;countyid&quot;)\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private long countyId;\n\n    @Column(name=&quot;countyname&quot;,nullable = false,unique = true)\n    private String countyName;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;adminId&quot;, nullable = false)\n    private Admin admin;\n\n    @OneToMany(mappedBy = &quot;county&quot;, cascade = {CascadeType.MERGE,CascadeType.PERSIST},fetch = FetchType.LAZY)\n    private Set&lt;PolicyCounty&gt; policyStates = new HashSet&lt;&gt;();\n\n}\n</code></pre>\n<p><strong>Problem-</strong><br />\nI want to delete the <strong>InsurancePolicy</strong> entity and also delete the corressponding entities in the PolicyCounty table. For it, I write the delete method-</p>\n<pre><code>@Override\n    public long deletePolicy(long policyId) {\n        boolean isPresent=insurancePolicyRepository.existsById(policyId);\n        if(isPresent){\n            insurancePolicyRepository.deleteById(policyId);\n            return insurancePolicyRepository.count();\n        }\n        throw new ResourceNotFoundException(&quot;Policy with id &quot;+policyId+&quot; not found&quot;);\n    }\n</code></pre>\n<p>Now, when I try to delete, the <strong>entities do not get deleted from the table</strong>. I am not getting any exception during this operation. I doubt that the problem is with the <strong>Cascade Types</strong> used with entities. Please help me understand this.</p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":3615290,"reputation":15707,"user_id":3015325,"display_name":"Larry Schiefer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1476727589,"creation_date":1476727589,"answer_id":40092920,"question_id":40092527,"body_markdown":"The problem gets down to Java scoping.  Your `Activity` defines `mQueue` and tracks it, but you have created a class protected member field `mQueue` inside of your `RequestHandler` class.  However, the `RequestHandler` doesn&#39;t have a constructor which takes a `RequestQueue` as a parameter.\r\n\r\nAlternatively, if your `RequestHandler` is an inner class of your `Activity`, then you do not have to define a `mQueue` member field as the inner class will have access to the parent class&#39; member fields.","title":"How to use mQueue in another class then MainActivity Android?","body":"<p>The problem gets down to Java scoping.  Your <code>Activity</code> defines <code>mQueue</code> and tracks it, but you have created a class protected member field <code>mQueue</code> inside of your <code>RequestHandler</code> class.  However, the <code>RequestHandler</code> doesn't have a constructor which takes a <code>RequestQueue</code> as a parameter.</p>\n\n<p>Alternatively, if your <code>RequestHandler</code> is an inner class of your <code>Activity</code>, then you do not have to define a <code>mQueue</code> member field as the inner class will have access to the parent class' member fields.</p>\n"}],"owner":{"account_id":1295711,"reputation":4341,"user_id":1246832,"accept_rate":55,"display_name":"Caspert"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":161,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1687884433,"creation_date":1476726066,"question_id":40092527,"body_markdown":"I&#39;m trying to access mQueue from Volley in another class then MainActivity.java.\r\n\r\n\r\n**MainActivity.java**\r\n\r\nIn `MainActivity.java` I create instance of RequestQueue and init the queue:\r\n\r\n    private RequestQueue mQueue;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        // Init queue ( getRequestQueue )\r\n        mQueue = MyRequestQueue.getInstance(this.getApplicationContext()).getRequestQueue();\r\n\r\n        getLights();\r\n        initListView();\r\n    }\r\n\r\n\r\nThe method `getLight()` in MainActivity.java adds the request to the queue:\r\n\r\n\r\n    String url = APIkey + &quot;/lights&quot;;\r\n    final MyJSONObject request = new MyJSONObject(Request.Method.GET, url, new JSONObject(), this, this);\r\n\r\n    // Executing the queue\r\n    mQueue.add(request);\r\n\r\n\r\n\r\n**RequestHandler.java**\r\n\r\nI moved the put requests to a separate class named RequestHandler.java. \r\n\r\n    public class RequestHandler implements Response.Listener&lt;JSONObject&gt;, Response.ErrorListener {\r\n    \r\n        RequestQueue mQueue;\r\n        \r\n        public void setLightOn(String lightId, boolean lightsOn){\r\n    \r\n            String url = APIkey + &quot;/lights/&quot; + lightId + &quot;/state&quot;;\r\n            JSONObject json = new JSONObject();\r\n    \r\n            try {\r\n                json.put(&quot;on&quot;, lightsOn);\r\n            }\r\n            catch (Exception e) {\r\n                // Error handling\r\n                Log.i(&quot;Value was not found&quot;, &quot;&quot;);\r\n            }\r\n    \r\n            final MyJSONObject request = new MyJSONObject(Request.Method.PUT, url, json, this, this);\r\n    \r\n            request.setTag(&quot;ONOF&quot;);\r\n            mQueue.add(request);\r\n        }\r\n        \r\n        // Volley error and response handler\r\n        @Override\r\n        public void onErrorResponse(VolleyError error) {\r\n            System.out.println(&quot;ERROR REQUEST HANDLER&quot;);\r\n        }\r\n    \r\n        @Override\r\n        public void onResponse(JSONObject response) {\r\n            System.out.println(&quot;SUCCEED REQUEST HANDLER&quot;);\r\n        }\r\n    \r\n    }\r\n\r\n\r\n**ERROR**\r\n\r\nAbove code will give me an error and crash of my Android application. \r\nError that says mQueue is null;\r\n                                                                           \r\n\r\n&gt; java.lang.RuntimeException: Unable to start activity .DetailActivity}:\r\n&gt; java.lang.NullPointerException: Attempt to invoke virtual method\r\n&gt; &#39;com.android.volley.Request\r\n&gt; com.android.volley.RequestQueue.add(com.android.volley.Request)&#39; on a\r\n&gt; null object reference\r\n\r\n\r\n\r\nBefore this I had those methods also live in the `MainActivity` but would like to have it separate from my `MainActivity`.\r\n\r\nWhat have I done wrong, forget so, so mQueue isn&#39;t null any more?\r\n","title":"How to use mQueue in another class then MainActivity Android?","body":"<p>I'm trying to access mQueue from Volley in another class then MainActivity.java.</p>\n<p><strong>MainActivity.java</strong></p>\n<p>In <code>MainActivity.java</code> I create instance of RequestQueue and init the queue:</p>\n<pre><code>private RequestQueue mQueue;\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n    // Init queue ( getRequestQueue )\n    mQueue = MyRequestQueue.getInstance(this.getApplicationContext()).getRequestQueue();\n\n    getLights();\n    initListView();\n}\n</code></pre>\n<p>The method <code>getLight()</code> in MainActivity.java adds the request to the queue:</p>\n<pre><code>String url = APIkey + &quot;/lights&quot;;\nfinal MyJSONObject request = new MyJSONObject(Request.Method.GET, url, new JSONObject(), this, this);\n\n// Executing the queue\nmQueue.add(request);\n</code></pre>\n<p><strong>RequestHandler.java</strong></p>\n<p>I moved the put requests to a separate class named RequestHandler.java.</p>\n<pre><code>public class RequestHandler implements Response.Listener&lt;JSONObject&gt;, Response.ErrorListener {\n\n    RequestQueue mQueue;\n    \n    public void setLightOn(String lightId, boolean lightsOn){\n\n        String url = APIkey + &quot;/lights/&quot; + lightId + &quot;/state&quot;;\n        JSONObject json = new JSONObject();\n\n        try {\n            json.put(&quot;on&quot;, lightsOn);\n        }\n        catch (Exception e) {\n            // Error handling\n            Log.i(&quot;Value was not found&quot;, &quot;&quot;);\n        }\n\n        final MyJSONObject request = new MyJSONObject(Request.Method.PUT, url, json, this, this);\n\n        request.setTag(&quot;ONOF&quot;);\n        mQueue.add(request);\n    }\n    \n    // Volley error and response handler\n    @Override\n    public void onErrorResponse(VolleyError error) {\n        System.out.println(&quot;ERROR REQUEST HANDLER&quot;);\n    }\n\n    @Override\n    public void onResponse(JSONObject response) {\n        System.out.println(&quot;SUCCEED REQUEST HANDLER&quot;);\n    }\n\n}\n</code></pre>\n<p><strong>ERROR</strong></p>\n<p>Above code will give me an error and crash of my Android application.\nError that says mQueue is null;</p>\n<blockquote>\n<p>java.lang.RuntimeException: Unable to start activity .DetailActivity}:\njava.lang.NullPointerException: Attempt to invoke virtual method\n'com.android.volley.Request\ncom.android.volley.RequestQueue.add(com.android.volley.Request)' on a\nnull object reference</p>\n</blockquote>\n<p>Before this I had those methods also live in the <code>MainActivity</code> but would like to have it separate from my <code>MainActivity</code>.</p>\n<p>What have I done wrong, forget so, so mQueue isn't null any more?</p>\n"},{"tags":["java","android","location","whatsapp"],"answers":[{"tags":[],"owner":{"account_id":28896843,"reputation":1,"user_id":22132674,"display_name":"Sumit Shaw"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687884315,"creation_date":1687884315,"answer_id":76567013,"question_id":76566788,"body_markdown":"Simpley register location listener and inside onLocationChanged method grab you current user latitude and longitude and build Google maps url from this.\r\n\r\nHere is sample code\r\n\r\n    double latitude = location.getLatitude();\r\n        double longitude = location.getLongitude();\r\n        String coordinates = latitude + &quot;,&quot; + longitude;\r\n\r\n        // Share the location using an intent to open it in Google Maps\r\n        String mapsUrl = &quot;http://maps.google.com/maps?q=&quot; + coordinates;\r\n        Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(mapsUrl));\r\n        startActivity(intent);","title":"Send user location to WhatsApp android studio","body":"<p>Simpley register location listener and inside onLocationChanged method grab you current user latitude and longitude and build Google maps url from this.</p>\n<p>Here is sample code</p>\n<pre><code>double latitude = location.getLatitude();\n    double longitude = location.getLongitude();\n    String coordinates = latitude + &quot;,&quot; + longitude;\n\n    // Share the location using an intent to open it in Google Maps\n    String mapsUrl = &quot;http://maps.google.com/maps?q=&quot; + coordinates;\n    Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(mapsUrl));\n    startActivity(intent);\n</code></pre>\n"}],"owner":{"account_id":21327936,"reputation":43,"user_id":15700081,"display_name":"Bryne Phiri"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":110,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1687884315,"creation_date":1687882231,"question_id":76566788,"body_markdown":"Looking for some direction is it possible to send a location message to a whatsapp contact from an android app in java code. I need my users to be able to share their locations with people outside the app for delivery purposes.","title":"Send user location to WhatsApp android studio","body":"<p>Looking for some direction is it possible to send a location message to a whatsapp contact from an android app in java code. I need my users to be able to share their locations with people outside the app for delivery purposes.</p>\n"},{"tags":["java","spring"],"answers":[{"tags":[],"owner":{"account_id":17270627,"reputation":26,"user_id":12506434,"display_name":"goranv33"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1675423851,"creation_date":1675423851,"answer_id":75335106,"question_id":75334968,"body_markdown":"Could you try to upgrade Spring security to version &gt;= 5.4?\r\nBecause: &quot;In Spring Security 5.4 we introduced the ability to configure HttpSecurity by creating a SecurityFilterChain bean&quot;. See docs: https://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter\r\nYour current version is: 5.3.4.RELEASE","title":"No qualifying bean of type &#39;org.springframework.security.config.annotation.web.builders.HttpSecurity&#39; available","body":"<p>Could you try to upgrade Spring security to version &gt;= 5.4?\nBecause: &quot;In Spring Security 5.4 we introduced the ability to configure HttpSecurity by creating a SecurityFilterChain bean&quot;. See docs: <a href=\"https://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter\" rel=\"nofollow noreferrer\">https://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter</a>\nYour current version is: 5.3.4.RELEASE</p>\n"},{"tags":[],"owner":{"account_id":9295766,"reputation":410,"user_id":6902739,"accept_rate":40,"display_name":"BaoTrung Tran"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675427641,"creation_date":1675427641,"answer_id":75335811,"question_id":75334968,"body_markdown":"You need add annotation @EnableWebSecurity on top class SecurityConfiguration.","title":"No qualifying bean of type &#39;org.springframework.security.config.annotation.web.builders.HttpSecurity&#39; available","body":"<p>You need add annotation @EnableWebSecurity on top class SecurityConfiguration.</p>\n"},{"tags":[],"owner":{"account_id":5799456,"reputation":75,"user_id":4574091,"display_name":"Kuppusamy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687884223,"creation_date":1687558579,"answer_id":76543743,"question_id":75334968,"body_markdown":"In my case it was a webflux application but was injecting `HttpSecurity` so autoconfigure can&#39;t find `HttpSecurity`. When i changed it to `ServerHttpSecurity` everything worked fine. So, need to see the application type and dependencies configured to avoid these kind of errors.","title":"No qualifying bean of type &#39;org.springframework.security.config.annotation.web.builders.HttpSecurity&#39; available","body":"<p>In my case it was a webflux application but was injecting <code>HttpSecurity</code> so autoconfigure can't find <code>HttpSecurity</code>. When i changed it to <code>ServerHttpSecurity</code> everything worked fine. So, need to see the application type and dependencies configured to avoid these kind of errors.</p>\n"}],"owner":{"account_id":6767541,"reputation":3494,"user_id":5212118,"accept_rate":67,"display_name":"cucuru"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3314,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75335106,"answer_count":3,"score":1,"last_activity_date":1687884223,"creation_date":1675423160,"question_id":75334968,"body_markdown":"I&#39;m facing this error when starting my maven application:\r\n\r\n    No qualifying bean of type &#39;org.springframework.security.config.annotation.web.builders.HttpSecurity&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\r\n\r\nThis is how my securityConfiguration looks like:\r\n\r\n    @Configuration(proxyBeanMethods = false)\r\n    public class SecurityConfiguration {\r\n\r\n    @Bean\r\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n      http.requestMatcher(EndpointRequest.toAnyEndpoint())\r\n        .authorizeRequests((requests) -&gt; requests.anyRequest().permitAll());\r\n      return http.build();\r\n     }\r\n    }\r\n\r\nI&#39;m executing mvn clean dependency: tree in order to be sure this is included:\r\n\r\n    [INFO] +- org.springframework.boot:spring-boot-starter-security:jar:2.3.3.RELEASE:compile\r\n    [INFO] |  +- org.springframework:spring-aop:jar:5.2.8.RELEASE:compile\r\n    [INFO] |  +- org.springframework.security:spring-security-config:jar:5.3.4.RELEASE:compile\r\n    [INFO] |  |  \\- org.springframework.security:spring-security-core:jar:5.3.4.RELEASE:compile\r\n    [INFO] |  \\- org.springframework.security:spring-security-web:jar:5.3.4.RELEASE:compile\r\n\r\nSo as far as I know all the dependencies are included, and I can not understand the error.","title":"No qualifying bean of type &#39;org.springframework.security.config.annotation.web.builders.HttpSecurity&#39; available","body":"<p>I'm facing this error when starting my maven application:</p>\n<pre><code>No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\n</code></pre>\n<p>This is how my securityConfiguration looks like:</p>\n<pre><code>@Configuration(proxyBeanMethods = false)\npublic class SecurityConfiguration {\n\n@Bean\npublic SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n  http.requestMatcher(EndpointRequest.toAnyEndpoint())\n    .authorizeRequests((requests) -&gt; requests.anyRequest().permitAll());\n  return http.build();\n }\n}\n</code></pre>\n<p>I'm executing mvn clean dependency: tree in order to be sure this is included:</p>\n<pre><code>[INFO] +- org.springframework.boot:spring-boot-starter-security:jar:2.3.3.RELEASE:compile\n[INFO] |  +- org.springframework:spring-aop:jar:5.2.8.RELEASE:compile\n[INFO] |  +- org.springframework.security:spring-security-config:jar:5.3.4.RELEASE:compile\n[INFO] |  |  \\- org.springframework.security:spring-security-core:jar:5.3.4.RELEASE:compile\n[INFO] |  \\- org.springframework.security:spring-security-web:jar:5.3.4.RELEASE:compile\n</code></pre>\n<p>So as far as I know all the dependencies are included, and I can not understand the error.</p>\n"},{"tags":["java","concurrency"],"comments":[{"owner":{"account_id":22980,"reputation":1293,"user_id":57217,"accept_rate":100,"display_name":"Kutzi"},"score":2,"creation_date":1254745147,"post_id":1519725,"comment_id":1374298,"body_markdown":"Could you please refine your question? E.g. add a short testcase.","body":"Could you please refine your question? E.g. add a short testcase."},{"owner":{"account_id":13362,"reputation":7901,"user_id":26788,"accept_rate":46,"display_name":"Krishna Kumar"},"score":0,"creation_date":1254745458,"post_id":1519725,"comment_id":1374328,"body_markdown":"Sorry, there is not much code I can share due to IP reasons. In nut shell, I am calling submit with Callable&lt;T&gt; types. I am looking for potential scenarios this can happen.","body":"Sorry, there is not much code I can share due to IP reasons. In nut shell, I am calling submit with Callable&lt;T&gt; types. I am looking for potential scenarios this can happen."},{"owner":{"account_id":36166,"reputation":38839,"user_id":103043,"display_name":"akf"},"score":1,"creation_date":1254746398,"post_id":1519725,"comment_id":1374416,"body_markdown":"Are you saying there is no specific scenario you are looking at, but instead would like to know of the hypothetical scenarios where this exception could be thrown?  if so, you should reword the question from &#39;Why does...&#39; to &#39;When would...&#39;","body":"Are you saying there is no specific scenario you are looking at, but instead would like to know of the hypothetical scenarios where this exception could be thrown?  if so, you should reword the question from &#39;Why does...&#39; to &#39;When would...&#39;"}],"answers":[{"tags":[],"owner":{"account_id":36166,"reputation":38839,"user_id":103043,"display_name":"akf"},"down_vote_count":0,"up_vote_count":25,"is_accepted":false,"score":25,"last_activity_date":1254747642,"creation_date":1254747642,"answer_id":1519950,"question_id":1519725,"body_markdown":"I dont see anywhere in the invocation of the `Executors.newCachedThreadPool()` methods where a `RejectedExecutionException` is thrown.  There are only three cases where it appears to be thrown in Java 6:\r\n\r\n- when calling `execute()` on a `ThreadPoolExecutor` and the maximum pool size has been reached.\r\n- when calling `execute()` on a `ThreadPoolExecutor` at the same time that `shutdownNow`, and has essentially lost the race with the `shutdownNow` call.\r\n- when trying to schedule execution of a runnable in a `ScheduledThreadPoolExecutor` after the executor has been shutdown.","title":"Why does Executors.newCachedThreadPool throw java.util.concurrent.RejectedExecutionException during submit","body":"<p>I dont see anywhere in the invocation of the <code>Executors.newCachedThreadPool()</code> methods where a <code>RejectedExecutionException</code> is thrown.  There are only three cases where it appears to be thrown in Java 6:</p>\n\n<ul>\n<li>when calling <code>execute()</code> on a <code>ThreadPoolExecutor</code> and the maximum pool size has been reached.</li>\n<li>when calling <code>execute()</code> on a <code>ThreadPoolExecutor</code> at the same time that <code>shutdownNow</code>, and has essentially lost the race with the <code>shutdownNow</code> call.</li>\n<li>when trying to schedule execution of a runnable in a <code>ScheduledThreadPoolExecutor</code> after the executor has been shutdown.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":19462,"reputation":102762,"user_id":45664,"accept_rate":91,"display_name":"Andrzej Doyle"},"down_vote_count":0,"up_vote_count":30,"is_accepted":true,"score":30,"last_activity_date":1355335514,"creation_date":1254748155,"answer_id":1519983,"question_id":1519725,"body_markdown":"You&#39;ll need to provide code samples of how you instantiate and call `submit` on the pool (IP should be a non-issue here as we don&#39;t need details of the internals of your `Callable` classes or anything like that).\r\n\r\nBased on the information that you&#39;ve given, you&#39;re almost certainly shutting down the executor service somewhere before submitting the callable to it.  Check if you make any calls to `shutdown` or `shutdownNow`, and if so ensure that you&#39;re not adding tasks after this point.\r\n\r\nBeyond that, you may want to register your own implementation of `java.util.concurrent.RejectedExecutionHandler` in order to aid in debugging; its [rejectedExecution][1] message will be called whenever the executor is unable to accept a task, so you could put some rudimentary state-inspection logic there to help you find the cause.\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/util/concurrent/RejectedExecutionHandler.html#rejectedExecution(java.lang.Runnable,+java.util.concurrent.ThreadPoolExecutor)","title":"Why does Executors.newCachedThreadPool throw java.util.concurrent.RejectedExecutionException during submit","body":"<p>You'll need to provide code samples of how you instantiate and call <code>submit</code> on the pool (IP should be a non-issue here as we don't need details of the internals of your <code>Callable</code> classes or anything like that).</p>\n\n<p>Based on the information that you've given, you're almost certainly shutting down the executor service somewhere before submitting the callable to it.  Check if you make any calls to <code>shutdown</code> or <code>shutdownNow</code>, and if so ensure that you're not adding tasks after this point.</p>\n\n<p>Beyond that, you may want to register your own implementation of <code>java.util.concurrent.RejectedExecutionHandler</code> in order to aid in debugging; its <a href=\"http://java.sun.com/javase/6/docs/api/java/util/concurrent/RejectedExecutionHandler.html#rejectedExecution(java.lang.Runnable,+java.util.concurrent.ThreadPoolExecutor)\" rel=\"noreferrer\">rejectedExecution</a> message will be called whenever the executor is unable to accept a task, so you could put some rudimentary state-inspection logic there to help you find the cause.</p>\n"},{"tags":[],"owner":{"account_id":15563806,"reputation":3,"user_id":11228229,"display_name":"Lejmi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687883958,"creation_date":1687521943,"answer_id":76539954,"question_id":1519725,"body_markdown":"Here is an example code that causes the exception:\r\n\r\n    ThreadPoolExecutor es = (ThreadPoolExecutor) Executors.newCachedThreadPool();\r\n    es.setCorePoolSize(2);    \r\n    es.setMaximumPoolSize(4); \r\n    es.setKeepAliveTime(30, TimeUnit.SECONDS); \r\n    es.submit(runnableTask);\r\n    es.submit(runnableTask);\r\n    es.submit(runnableTask);\r\n    es.submit(callableTask);\r\n    es.submit(callableTask); // ===&gt; RejectedExecutionException\r\n    es.shutdown(); // is not executed because of the exception before\r\n\r\nThe other Executor Services, i.e. `Executors.newFixedThreadPool(2)`, are submitted tasks are queued and executed later, but not throwing any exception.\r\nWhat is special about `Executors.newCachedThreadPool()` throwing an exception, when more than max tasks are submitted?\r\n","title":"Why does Executors.newCachedThreadPool throw java.util.concurrent.RejectedExecutionException during submit","body":"<p>Here is an example code that causes the exception:</p>\n<pre><code>ThreadPoolExecutor es = (ThreadPoolExecutor) Executors.newCachedThreadPool();\nes.setCorePoolSize(2);    \nes.setMaximumPoolSize(4); \nes.setKeepAliveTime(30, TimeUnit.SECONDS); \nes.submit(runnableTask);\nes.submit(runnableTask);\nes.submit(runnableTask);\nes.submit(callableTask);\nes.submit(callableTask); // ===&gt; RejectedExecutionException\nes.shutdown(); // is not executed because of the exception before\n</code></pre>\n<p>The other Executor Services, i.e. <code>Executors.newFixedThreadPool(2)</code>, are submitted tasks are queued and executed later, but not throwing any exception.\nWhat is special about <code>Executors.newCachedThreadPool()</code> throwing an exception, when more than max tasks are submitted?</p>\n"}],"owner":{"account_id":13362,"reputation":7901,"user_id":26788,"accept_rate":46,"display_name":"Krishna Kumar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17147,"favorite_count":0,"down_vote_count":2,"up_vote_count":17,"accepted_answer_id":1519983,"answer_count":3,"score":15,"last_activity_date":1687883958,"creation_date":1254744824,"question_id":1519725,"body_markdown":"Number of tasks (threads) submitted is also not huge in this test scenario.","title":"Why does Executors.newCachedThreadPool throw java.util.concurrent.RejectedExecutionException during submit","body":"<p>Number of tasks (threads) submitted is also not huge in this test scenario.</p>\n"},{"tags":["java","ant","tools.jar"],"comments":[{"owner":{"account_id":357454,"reputation":77335,"user_id":697630,"accept_rate":84,"display_name":"Edwin Dalorzo"},"score":0,"creation_date":1303305014,"post_id":5730815,"comment_id":6554559,"body_markdown":"I think tools belongs to the JDK not to the JRE. Isn&#180;t so? C:\\Program Files\\Java\\jdk1.6.0_24\\lib","body":"I think tools belongs to the JDK not to the JRE. Isn&#180;t so? C:\\Program Files\\Java\\jdk1.6.0_24\\lib"},{"owner":{"account_id":470821,"reputation":235,"user_id":878216,"accept_rate":0,"display_name":"Peter Flynn"},"score":5,"creation_date":1385455091,"post_id":5730815,"comment_id":30138391,"body_markdown":"As an aside, what I find astonishing is that the program actually said where it looked. So few programs provide this useful clue.","body":"As an aside, what I find astonishing is that the program actually said where it looked. So few programs provide this useful clue."},{"owner":{"account_id":4048506,"reputation":2759,"user_id":3328979,"accept_rate":78,"display_name":"Arashsoft"},"score":0,"creation_date":1461788368,"post_id":5730815,"comment_id":61364344,"body_markdown":"Also see the duplicate question: http://stackoverflow.com/q/9119479/3328979 Answers there are somehow better than here.","body":"Also see the duplicate question: <a href=\"http://stackoverflow.com/q/9119479/3328979\">stackoverflow.com/q/9119479/3328979</a> Answers there are somehow better than here."},{"owner":{"account_id":4347471,"reputation":306,"user_id":3549038,"display_name":"stopanko"},"score":0,"creation_date":1648244470,"post_id":5730815,"comment_id":126584142,"body_markdown":"In my case problem was in a path. I was trying to use script that was in the folder with a `space` in a name.\n\nI was trying to run `./bin/kafka-console-consumer.sh` from the binaries kafka folder. when i was asked to build project first with `./gradlew jar -PscalaVersion=2.13.6`. \nThis build command actually generated such error for me.","body":"In my case problem was in a path. I was trying to use script that was in the folder with a <code>space</code> in a name.  I was trying to run <code>.&#47;bin&#47;kafka-console-consumer.sh</code> from the binaries kafka folder. when i was asked to build project first with <code>.&#47;gradlew jar -PscalaVersion=2.13.6</code>.  This build command actually generated such error for me."}],"answers":[{"tags":[],"owner":{"account_id":138128,"reputation":294236,"user_id":342852,"accept_rate":97,"display_name":"Sean Patrick Floyd"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1303304960,"creation_date":1303304960,"answer_id":5730838,"question_id":5730815,"body_markdown":"No, according to your directory structure, you have installed a JRE, not a JDK. There&#39;s a difference.\r\n\r\n    C:\\Program Files\\Java\\jre6\\lib\r\n                          ^^^^\r\nIt should be something like:\r\n\r\n    C:\\Program Files\\Java\\jdk1.6.0_24\r\n\r\n","title":"Unable to locate tools.jar","body":"<p>No, according to your directory structure, you have installed a JRE, not a JDK. There's a difference.</p>\n\n<pre><code>C:\\Program Files\\Java\\jre6\\lib\n                      ^^^^\n</code></pre>\n\n<p>It should be something like:</p>\n\n<pre><code>C:\\Program Files\\Java\\jdk1.6.0_24\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"down_vote_count":4,"up_vote_count":207,"is_accepted":true,"score":203,"last_activity_date":1303305015,"creation_date":1303305015,"answer_id":5730851,"question_id":5730815,"body_markdown":"Yes, you&#39;ve downloaded and installed the Java Runtime Environment (JRE) instead of the Java Development Kit (JDK).  The latter has the tools.jar, java.exe, javac.exe, etc.\r\n","title":"Unable to locate tools.jar","body":"<p>Yes, you've downloaded and installed the Java Runtime Environment (JRE) instead of the Java Development Kit (JDK).  The latter has the tools.jar, java.exe, javac.exe, etc.</p>\n"},{"tags":[],"owner":{"account_id":270781,"reputation":11897,"user_id":560934,"accept_rate":61,"display_name":"Nirmal- thInk beYond"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1303305250,"creation_date":1303305250,"answer_id":5730905,"question_id":5730815,"body_markdown":"    Expected to find it in C:\\Program Files\\Java\\jre6\\lib\\tools.jar\r\n\r\nif you have installed jdk then \r\n\r\n`..Java/jdkx.x.x` \r\n\r\nfolder must exist there so in stall it and give full path like\r\n\r\n    C:\\Program Files\\Java\\jdk1.6.0\\lib\\tools.jar","title":"Unable to locate tools.jar","body":"<pre><code>Expected to find it in C:\\Program Files\\Java\\jre6\\lib\\tools.jar\n</code></pre>\n\n<p>if you have installed jdk then </p>\n\n<p><code>..Java/jdkx.x.x</code> </p>\n\n<p>folder must exist there so in stall it and give full path like</p>\n\n<pre><code>C:\\Program Files\\Java\\jdk1.6.0\\lib\\tools.jar\n</code></pre>\n"},{"tags":[],"owner":{"account_id":111302,"reputation":4393,"user_id":294097,"accept_rate":67,"display_name":"John Kane"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1303305295,"creation_date":1303305295,"answer_id":5730917,"question_id":5730815,"body_markdown":"Make sure that your classpath is set correctly and pointing to the correct version of the JDK that you have installed.  Also, are you using Open JDK? I have had this issue before after I tried to move from open JDK to Suns JDK.  [This][1] is an example of how that issue could be fixed.\r\n\r\n\r\n  [1]: http://www.imlucas.com/post/263896412/ubuntu-fix-for-unable-to-locate-tools-jar-expected-to","title":"Unable to locate tools.jar","body":"<p>Make sure that your classpath is set correctly and pointing to the correct version of the JDK that you have installed.  Also, are you using Open JDK? I have had this issue before after I tried to move from open JDK to Suns JDK.  <a href=\"http://www.imlucas.com/post/263896412/ubuntu-fix-for-unable-to-locate-tools-jar-expected-to\" rel=\"nofollow\">This</a> is an example of how that issue could be fixed.</p>\n"},{"tags":[],"owner":{"account_id":401504,"reputation":2667,"user_id":768100,"display_name":"Blake Mitchell"},"down_vote_count":1,"up_vote_count":92,"is_accepted":false,"score":91,"last_activity_date":1336579251,"creation_date":1336579251,"answer_id":10519763,"question_id":5730815,"body_markdown":"In case this is still an issue for anyone, I have a bit of clarification on the previous answers. I was running into this same issue using ant with only a JDK installed. Although, the JDK installer gave me a directory structure like this:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n     Directory of C:\\Program Files\\Java\r\n    \r\n    05/08/2012  09:43 AM    &lt;DIR&gt;          .\r\n    05/08/2012  09:43 AM    &lt;DIR&gt;          ..\r\n    05/08/2012  09:46 AM    &lt;DIR&gt;          jdk1.7.0_04\r\n    05/08/2012  09:19 AM    &lt;DIR&gt;          jre6\r\n    05/08/2012  09:44 AM    &lt;DIR&gt;          jre7\r\n                   0 File(s)              0 bytes\r\n\r\nand when I ran ant, it complained about not finding tools.jar under the jre7 subdirectory. It wasn&#39;t until I `set &quot;JAVA_HOME=C:\\Program Files\\Java\\jdk1.7.0_04&quot;` that the error went away.","title":"Unable to locate tools.jar","body":"<p>In case this is still an issue for anyone, I have a bit of clarification on the previous answers. I was running into this same issue using ant with only a JDK installed. Although, the JDK installer gave me a directory structure like this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code> Directory of C:\\Program Files\\Java\n\n05/08/2012  09:43 AM    &lt;DIR&gt;          .\n05/08/2012  09:43 AM    &lt;DIR&gt;          ..\n05/08/2012  09:46 AM    &lt;DIR&gt;          jdk1.7.0_04\n05/08/2012  09:19 AM    &lt;DIR&gt;          jre6\n05/08/2012  09:44 AM    &lt;DIR&gt;          jre7\n               0 File(s)              0 bytes\n</code></pre>\n\n<p>and when I ran ant, it complained about not finding tools.jar under the jre7 subdirectory. It wasn't until I <code>set \"JAVA_HOME=C:\\Program Files\\Java\\jdk1.7.0_04\"</code> that the error went away.</p>\n"},{"tags":[],"owner":{"account_id":1889728,"reputation":75,"user_id":1708141,"display_name":"sathiya"},"down_vote_count":3,"up_vote_count":8,"is_accepted":false,"score":5,"last_activity_date":1495781484,"creation_date":1348914163,"answer_id":12651892,"question_id":5730815,"body_markdown":"Don&#39;t spend too much time looking for `tools.jar`. If you get an error like that, don&#39;t be upset. \r\n\r\nIf you already have java JDK 1.5, go to your `lib` folder, and the `tools.jar` should be available there. Copy and paste it in your ant `bin` folder, then try to use the command `ant -version`.\r\n\r\nYou should see the expected result.","title":"Unable to locate tools.jar","body":"<p>Don't spend too much time looking for <code>tools.jar</code>. If you get an error like that, don't be upset. </p>\n\n<p>If you already have java JDK 1.5, go to your <code>lib</code> folder, and the <code>tools.jar</code> should be available there. Copy and paste it in your ant <code>bin</code> folder, then try to use the command <code>ant -version</code>.</p>\n\n<p>You should see the expected result.</p>\n"},{"tags":[],"owner":{"account_id":281525,"reputation":24010,"user_id":577878,"display_name":"Zorayr"},"down_vote_count":1,"up_vote_count":11,"is_accepted":false,"score":10,"last_activity_date":1359077599,"creation_date":1359077599,"answer_id":14513952,"question_id":5730815,"body_markdown":"Set your `JAVA_HOME` environmental variable to point to `C:\\Program Files\\Java\\jdk1.7.0_02`.","title":"Unable to locate tools.jar","body":"<p>Set your <code>JAVA_HOME</code> environmental variable to point to <code>C:\\Program Files\\Java\\jdk1.7.0_02</code>.</p>\n"},{"tags":[],"owner":{"account_id":2338280,"reputation":327,"user_id":2050142,"display_name":"Kamlesh Pant"},"down_vote_count":2,"up_vote_count":33,"is_accepted":false,"score":31,"last_activity_date":1363592424,"creation_date":1363591261,"answer_id":15471577,"question_id":5730815,"body_markdown":"I had the same problem and  **copying**  `C:\\Program Files\\Java\\jdk1.6.0_26\\lib\\tools.jar` **to** `C:\\Program Files\\Java\\jre6\\lib\\ext`  worked for me \r\n\r\n","title":"Unable to locate tools.jar","body":"<p>I had the same problem and  <strong>copying</strong>  <code>C:\\Program Files\\Java\\jdk1.6.0_26\\lib\\tools.jar</code> <strong>to</strong> <code>C:\\Program Files\\Java\\jre6\\lib\\ext</code>  worked for me </p>\n"},{"tags":[],"owner":{"account_id":2582714,"reputation":31,"user_id":2239035,"display_name":"sandeep"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1364968417,"creation_date":1364968417,"answer_id":15779832,"question_id":5730815,"body_markdown":"go to your jdk path where you installed your java\r\n\r\nFor e.g In my PC JDK installed in the following path\r\n\r\n&quot;C:\\Program Files\\Java\\jdk1.7.0_17\\&quot;;\r\n\r\n\r\nAfter go to the lib folder e.g &quot;C:\\Program Files\\Java\\jdk1.7.0_17\\lib&quot;\r\n\r\nin the lib directory there is tool.jar file\r\n\r\nCopy this file and past it in the lib forlder of jre7 directory\r\nfor e.g\r\n\r\n&quot;C:\\Program Files\\Java\\jre7\\lib&quot;","title":"Unable to locate tools.jar","body":"<p>go to your jdk path where you installed your java</p>\n\n<p>For e.g In my PC JDK installed in the following path</p>\n\n<p>\"C:\\Program Files\\Java\\jdk1.7.0_17\\\";</p>\n\n<p>After go to the lib folder e.g \"C:\\Program Files\\Java\\jdk1.7.0_17\\lib\"</p>\n\n<p>in the lib directory there is tool.jar file</p>\n\n<p>Copy this file and past it in the lib forlder of jre7 directory\nfor e.g</p>\n\n<p>\"C:\\Program Files\\Java\\jre7\\lib\"</p>\n"},{"tags":[],"owner":{"account_id":31984,"reputation":30440,"user_id":88204,"accept_rate":86,"display_name":"James Lawruk"},"down_vote_count":0,"up_vote_count":42,"is_accepted":false,"score":42,"last_activity_date":1369159056,"creation_date":1369159056,"answer_id":16676483,"question_id":5730815,"body_markdown":" 1. Install the [Java SDK][1]. \r\n\r\n 2. Add a System Environment Variable called **JAVA_HOME** with the value of JDK location.  \r\n  *Go to Control Panel\\System and Security\\System. Advanced System Settings, Environment Variables, System Variables, New...  Example:*  \r\n  Variable Name:**JAVA_HOME**  \r\n  Variable Value: **C:\\Program Files\\Java\\jdk1.7.0_21**  \r\n\r\n 3. Close/reopen your CMD window so that the new variable takes effect before attempting to re-run the ant command.\r\n\r\n\r\n  [1]: http://www.oracle.com/technetwork/java/javase/downloads/index.html","title":"Unable to locate tools.jar","body":"<ol>\n<li><p>Install the <a href=\"http://www.oracle.com/technetwork/java/javase/downloads/index.html\">Java SDK</a>. </p></li>\n<li><p>Add a System Environment Variable called <strong>JAVA_HOME</strong> with the value of JDK location.<br>\n<em>Go to Control Panel\\System and Security\\System. Advanced System Settings, Environment Variables, System Variables, New...  Example:</em><br>\nVariable Name:<strong>JAVA_HOME</strong><br>\nVariable Value: <strong>C:\\Program Files\\Java\\jdk1.7.0_21</strong>  </p></li>\n<li><p>Close/reopen your CMD window so that the new variable takes effect before attempting to re-run the ant command.</p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":2314267,"reputation":883,"user_id":2031645,"accept_rate":43,"display_name":"J&#248;rgen Sk&#229;r Fischer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1381097344,"creation_date":1381097344,"answer_id":19214548,"question_id":5730815,"body_markdown":"Make sure that both the %JAVA_HOME% and %JAVA_HOME%/bin paths are added to your PATH variable.\r\n\r\nAll the answers about copying tools.jar into the correct position is a poor idea at best.\r\n\r\nMake sure that your IDE can find these jars the way it was designed and intended for.","title":"Unable to locate tools.jar","body":"<p>Make sure that both the %JAVA_HOME% and %JAVA_HOME%/bin paths are added to your PATH variable.</p>\n\n<p>All the answers about copying tools.jar into the correct position is a poor idea at best.</p>\n\n<p>Make sure that your IDE can find these jars the way it was designed and intended for.</p>\n"},{"tags":[],"owner":{"account_id":3782367,"reputation":1,"user_id":3141419,"display_name":"living.li"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1388215778,"creation_date":1388215778,"answer_id":20812148,"question_id":5730815,"body_markdown":"maven-compiler-plugin use jdk ,not jre, \r\n   tools.jar is in C:\\Program Files\\Java\\jdk1.6.0\\lib\\tools.jar\r\nyou must config project JRE System Libary with  jdk,not jar. This is the simplest solution.","title":"Unable to locate tools.jar","body":"<p>maven-compiler-plugin use jdk ,not jre, \n   tools.jar is in C:\\Program Files\\Java\\jdk1.6.0\\lib\\tools.jar\nyou must config project JRE System Libary with  jdk,not jar. This is the simplest solution.</p>\n"},{"tags":[],"owner":{"account_id":3920921,"reputation":81,"user_id":3243105,"display_name":"user3243105"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1390887534,"creation_date":1390886447,"answer_id":21397474,"question_id":5730815,"body_markdown":"I had the same problem even after installing Java JDK and set `JAVA_HOME` to `..\\jdk1.6.0_45\\bin` folder. \r\n\r\nAnt is still trying to find `tools.jar` in `C:\\Program Files\\Java\\jre6\\lib` folder.  \r\nI&#39;ve fixed it by adding `JAVACMD` environment variable and set path for it to `java.exe` in the `jdk` folder.  \r\nIn my case it was `C:\\Program Files\\Java\\jdk1.6.0_45\\bin\\java.exe`","title":"Unable to locate tools.jar","body":"<p>I had the same problem even after installing Java JDK and set <code>JAVA_HOME</code> to <code>..\\jdk1.6.0_45\\bin</code> folder. </p>\n\n<p>Ant is still trying to find <code>tools.jar</code> in <code>C:\\Program Files\\Java\\jre6\\lib</code> folder.<br>\nI've fixed it by adding <code>JAVACMD</code> environment variable and set path for it to <code>java.exe</code> in the <code>jdk</code> folder.<br>\nIn my case it was <code>C:\\Program Files\\Java\\jdk1.6.0_45\\bin\\java.exe</code></p>\n"},{"tags":[],"owner":{"account_id":412932,"reputation":9670,"user_id":786279,"accept_rate":100,"display_name":"mimoralea"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1412117521,"creation_date":1412117521,"answer_id":26131474,"question_id":5730815,"body_markdown":"If you are in Linux you can solve this by installing java on the system:\r\n\r\n    sudo apt-get install openjdk-7-jdk openjdk-7-jre","title":"Unable to locate tools.jar","body":"<p>If you are in Linux you can solve this by installing java on the system:</p>\n\n<pre><code>sudo apt-get install openjdk-7-jdk openjdk-7-jre\n</code></pre>\n"},{"tags":[],"owner":{"account_id":242751,"reputation":6179,"user_id":514493,"accept_rate":69,"display_name":"Manish Basdeo"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1430590183,"creation_date":1430590183,"answer_id":30005753,"question_id":5730815,"body_markdown":"In eclipse window&gt; preferences&gt;Java&gt; Installed JRE, I pointed the directory to the jre directory in the jdk 1.7 and i worked file for me\r\ne.g C:\\Program Files\\Java\\jdk1.7.0_71\\jre","title":"Unable to locate tools.jar","body":"<p>In eclipse window> preferences>Java> Installed JRE, I pointed the directory to the jre directory in the jdk 1.7 and i worked file for me\ne.g C:\\Program Files\\Java\\jdk1.7.0_71\\jre</p>\n"},{"tags":[],"owner":{"account_id":418541,"reputation":8859,"user_id":795158,"accept_rate":95,"display_name":"Ivaylo Slavov"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1645632102,"creation_date":1435146270,"answer_id":31025631,"question_id":5730815,"body_markdown":"I had the same issue on a linux machine. I was quite frustrated at first, because I have installed both the JDK and JRE. I am using version 1.6, 1.7 and 1.8 simultaneously, and I have played a lot with the alternatives to have everything set properly.\r\n\r\nThe problem was quite stupid to solve, yet counter-intuitive. While I was using the correct JDK, I paid attention to the path of the tools jar maven complained about - it was expecting it to be \r\n\r\n    $JAVA_HOME\\..\\lib\\tools.jar\r\n\r\nThe `$JAVA_HOME` variable pointed directly to my `jdk` folder (`/usr/local/java` which was also the correct `$PATH` entry and alternative sym link). It actually searches for the `lib` folder **outside** the java directory, because:\r\n\r\n    $JAVA_HOME\\..\\lib\\tools.jar\r\n\r\nwill resolve to \r\n\r\n    /usr/local/lib/tools.jar\r\n\r\nand that is not a valid location.\r\n\r\nTo solve this, the `$JAVA_HOME` variable should instead point to this location `/usr/local/java/jre` (assuming the JDK path is `/usr/local/java`) -- there is actually `jre` folder inside the JDK installation directory, that comes with each JDK. This new setup will cause maven to look at the JRE directory, that is part of the JDK:\r\n\r\n    $JAVA_HOME\\..\\lib\\tools\r\n\r\nwhich now resolves to\r\n\r\n    /usr/local/java/jre/../lib/tools.jar\r\n\r\nand finally to\r\n\r\n    /usr/local/java/lib/tools.jar\r\n\r\nwhich is where the `tools.jar` really resides.\r\n\r\nSo, even if you are indeed using the JDK instead of the JRE, the $JAVA_HOME has to point to the JRE. Remember, the OS alternative should still refer to the JDK.","title":"Unable to locate tools.jar","body":"<p>I had the same issue on a linux machine. I was quite frustrated at first, because I have installed both the JDK and JRE. I am using version 1.6, 1.7 and 1.8 simultaneously, and I have played a lot with the alternatives to have everything set properly.</p>\n<p>The problem was quite stupid to solve, yet counter-intuitive. While I was using the correct JDK, I paid attention to the path of the tools jar maven complained about - it was expecting it to be</p>\n<pre><code>$JAVA_HOME\\..\\lib\\tools.jar\n</code></pre>\n<p>The <code>$JAVA_HOME</code> variable pointed directly to my <code>jdk</code> folder (<code>/usr/local/java</code> which was also the correct <code>$PATH</code> entry and alternative sym link). It actually searches for the <code>lib</code> folder <strong>outside</strong> the java directory, because:</p>\n<pre><code>$JAVA_HOME\\..\\lib\\tools.jar\n</code></pre>\n<p>will resolve to</p>\n<pre><code>/usr/local/lib/tools.jar\n</code></pre>\n<p>and that is not a valid location.</p>\n<p>To solve this, the <code>$JAVA_HOME</code> variable should instead point to this location <code>/usr/local/java/jre</code> (assuming the JDK path is <code>/usr/local/java</code>) -- there is actually <code>jre</code> folder inside the JDK installation directory, that comes with each JDK. This new setup will cause maven to look at the JRE directory, that is part of the JDK:</p>\n<pre><code>$JAVA_HOME\\..\\lib\\tools\n</code></pre>\n<p>which now resolves to</p>\n<pre><code>/usr/local/java/jre/../lib/tools.jar\n</code></pre>\n<p>and finally to</p>\n<pre><code>/usr/local/java/lib/tools.jar\n</code></pre>\n<p>which is where the <code>tools.jar</code> really resides.</p>\n<p>So, even if you are indeed using the JDK instead of the JRE, the $JAVA_HOME has to point to the JRE. Remember, the OS alternative should still refer to the JDK.</p>\n"},{"tags":[],"owner":{"account_id":4048506,"reputation":2759,"user_id":3328979,"accept_rate":78,"display_name":"Arashsoft"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1461787864,"creation_date":1461787864,"answer_id":36899947,"question_id":5730815,"body_markdown":"I had my JDK_path (`C:\\Program Files\\Java\\jdk1.7.0_79`) in my `JAVA_HOME` and also the JDK_path\\bin in my `PATH`. But, still my ant was using the JRE instead of JDK.\r\n\r\nThe issue was I had `C:\\ProgramData\\Oracle\\Java\\javapath`before my JDK_path in `PATH` variable. I simply moved my JDK_path before the oracle one and the issue solved.","title":"Unable to locate tools.jar","body":"<p>I had my JDK_path (<code>C:\\Program Files\\Java\\jdk1.7.0_79</code>) in my <code>JAVA_HOME</code> and also the JDK_path\\bin in my <code>PATH</code>. But, still my ant was using the JRE instead of JDK.</p>\n\n<p>The issue was I had <code>C:\\ProgramData\\Oracle\\Java\\javapath</code>before my JDK_path in <code>PATH</code> variable. I simply moved my JDK_path before the oracle one and the issue solved.</p>\n"},{"tags":[],"owner":{"account_id":458028,"reputation":1686,"user_id":857684,"display_name":"Sasha Zezulinsky"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1466972673,"creation_date":1466972673,"answer_id":38042849,"question_id":5730815,"body_markdown":"You may face similar problem on Ubuntu:\r\n\r\n    Embedded error: tools.jar not found: /usr/lib/jvm/java-7-openjdk-amd64/jre/../lib/tools.jar\r\n\r\nThe problem is with JAVA_HOME that is not set properly.\r\n\r\nSo, on Ubuntu 14.04 x64 using Java8:\r\n\r\n    sudo apt-get install openjdk-8-jdk openjdk-8-jre\r\n    export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64","title":"Unable to locate tools.jar","body":"<p>You may face similar problem on Ubuntu:</p>\n\n<pre><code>Embedded error: tools.jar not found: /usr/lib/jvm/java-7-openjdk-amd64/jre/../lib/tools.jar\n</code></pre>\n\n<p>The problem is with JAVA_HOME that is not set properly.</p>\n\n<p>So, on Ubuntu 14.04 x64 using Java8:</p>\n\n<pre><code>sudo apt-get install openjdk-8-jdk openjdk-8-jre\nexport JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6532574,"reputation":2212,"user_id":5053266,"accept_rate":67,"display_name":"RotS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1475229818,"creation_date":1475229818,"answer_id":39788891,"question_id":5730815,"body_markdown":" * Right click on your ant file\r\n * Go to &quot;Run as&quot; then click on &quot;Ant Build...&quot;\r\n * Go to the &quot;JRE&quot; tab\r\n * Select a JDK and not a JRE","title":"Unable to locate tools.jar","body":"<ul>\n<li>Right click on your ant file</li>\n<li>Go to \"Run as\" then click on \"Ant Build...\"</li>\n<li>Go to the \"JRE\" tab</li>\n<li>Select a JDK and not a JRE</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":10128337,"reputation":41,"user_id":7482764,"display_name":"estudiante"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1485942808,"creation_date":1485942808,"answer_id":41976642,"question_id":5730815,"body_markdown":"solving this problem I have simply copied the tools.jar file from C:\\Program Files\\Java\\jre1.8.0_112\\lib to C:\\Program Files\\Java\\jdk1.8.0_112\\lib so that I have two tools.jar files instead of one and problem disappeared.","title":"Unable to locate tools.jar","body":"<p>solving this problem I have simply copied the tools.jar file from C:\\Program Files\\Java\\jre1.8.0_112\\lib to C:\\Program Files\\Java\\jdk1.8.0_112\\lib so that I have two tools.jar files instead of one and problem disappeared.</p>\n"},{"tags":[],"owner":{"account_id":1713391,"reputation":7677,"user_id":1570996,"display_name":"Ramy Feteha"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1495019811,"creation_date":1495019811,"answer_id":44023322,"question_id":5730815,"body_markdown":"it has been solved with me in windows os by setting the JAVA_HOME variable before running as follows:\r\n\r\nset JAVA_HOME=C:\\Program Files\\Java\\jdk1.8.0_111","title":"Unable to locate tools.jar","body":"<p>it has been solved with me in windows os by setting the JAVA_HOME variable before running as follows:</p>\n\n<p>set JAVA_HOME=C:\\Program Files\\Java\\jdk1.8.0_111</p>\n"},{"tags":[],"owner":{"account_id":8584753,"reputation":205,"user_id":6431282,"display_name":"Florent Giraud"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1495999766,"creation_date":1495998793,"answer_id":44231071,"question_id":5730815,"body_markdown":"For me what&#39;s working: I downloaded an old version of Java 1.7\r\n\r\nI actually set my JAVA_HOME from C:/program files X86/Java BUT after I installed the 1.7 version I had another Java in program files/Java. And at this moment I found the tools.jar here. Then I changed for this new path and it&#39;s working","title":"Unable to locate tools.jar","body":"<p>For me what's working: I downloaded an old version of Java 1.7</p>\n\n<p>I actually set my JAVA_HOME from C:/program files X86/Java BUT after I installed the 1.7 version I had another Java in program files/Java. And at this moment I found the tools.jar here. Then I changed for this new path and it's working</p>\n"},{"tags":[],"owner":{"account_id":11704238,"reputation":13,"user_id":8568307,"display_name":"Nits"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1504788039,"creation_date":1504788039,"answer_id":46096656,"question_id":5730815,"body_markdown":"I was also facing the same error.\r\nThis was removed after setting Java_Home path to C:\\Program Files\\Java\\jdk1.8.0_121.\r\nPlease ensure bin is not included in the path and no slash is there after jdk1.8.0_121 after you have defined %JAVA_HOME%\\bin in the system path variable.","title":"Unable to locate tools.jar","body":"<p>I was also facing the same error.\nThis was removed after setting Java_Home path to C:\\Program Files\\Java\\jdk1.8.0_121.\nPlease ensure bin is not included in the path and no slash is there after jdk1.8.0_121 after you have defined %JAVA_HOME%\\bin in the system path variable.</p>\n"},{"tags":[],"owner":{"account_id":28686,"reputation":4866,"user_id":76852,"accept_rate":72,"display_name":"Graham Chiu"},"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1514404991,"creation_date":1514404991,"answer_id":47997984,"question_id":5730815,"body_markdown":"If you have installed JDK 9.0.1 you will also have this problem as the tools.jar has been deprecated. See [migration document](https://docs.oracle.com/javase/9/migrate/toc.htm).","title":"Unable to locate tools.jar","body":"<p>If you have installed JDK 9.0.1 you will also have this problem as the tools.jar has been deprecated. See <a href=\"https://docs.oracle.com/javase/9/migrate/toc.htm\" rel=\"noreferrer\">migration document</a>.</p>\n"},{"tags":[],"owner":{"account_id":1306332,"reputation":2147,"user_id":1255267,"display_name":"TastyWheat"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1532444485,"creation_date":1532444485,"answer_id":51501877,"question_id":5730815,"body_markdown":"If you&#39;re in a RHEL environment the package name containing tools.jar would end with &quot;openjdk-devel&quot;.","title":"Unable to locate tools.jar","body":"<p>If you're in a RHEL environment the package name containing tools.jar would end with \"openjdk-devel\".</p>\n"},{"tags":[],"owner":{"account_id":1522906,"reputation":42483,"user_id":1422096,"accept_rate":63,"display_name":"Basj"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1533473557,"creation_date":1533473557,"answer_id":51694494,"question_id":5730815,"body_markdown":"This is the solution for Windows: in *Computer &gt; Advanced system settings &gt; Advanced &gt; Environment variables...*, add this in *System variables*:\r\n\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/7bSlD.jpg","title":"Unable to locate tools.jar","body":"<p>This is the solution for Windows: in <em>Computer > Advanced system settings > Advanced > Environment variables...</em>, add this in <em>System variables</em>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/7bSlD.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7bSlD.jpg\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":14527149,"reputation":13,"user_id":10667223,"display_name":"astatyzm"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1543909165,"creation_date":1543909165,"answer_id":53607927,"question_id":5730815,"body_markdown":"I have downloaded tools.jar and after that I copied it into path in error message.\r\n\r\nC:\\Program Files\\Java\\jdk-11.0.1\\bin &gt; paste here tools.jar\r\n\r\nAfter that I have restarted Spring Tool Suit 4 and everything was working.\r\nWhen I was trying to fix that problem I have made new environmental variable:\r\nControl Panel / System / Advenced / Environmental variables / new \r\nName : JAVA_HOME\r\nValue: C:\\Program Files\\Java\\jdk-11.0.1\r\nBut I do not know is it necessary. \r\n","title":"Unable to locate tools.jar","body":"<p>I have downloaded tools.jar and after that I copied it into path in error message.</p>\n\n<p>C:\\Program Files\\Java\\jdk-11.0.1\\bin > paste here tools.jar</p>\n\n<p>After that I have restarted Spring Tool Suit 4 and everything was working.\nWhen I was trying to fix that problem I have made new environmental variable:\nControl Panel / System / Advenced / Environmental variables / new \nName : JAVA_HOME\nValue: C:\\Program Files\\Java\\jdk-11.0.1\nBut I do not know is it necessary. </p>\n"},{"tags":[],"owner":{"account_id":3963498,"reputation":1926,"user_id":3270066,"display_name":"pagurix"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1548947650,"creation_date":1548947650,"answer_id":54463658,"question_id":5730815,"body_markdown":"maybe you have updated the JREs in the OS, and the addition has added in the &quot;path&quot; of the environment variables an entry &quot;.../Oracle/jer&quot; that overwrites your JAVA_HOME.\r\ntry to remove it from the &quot;path&quot; by leaving JAVA_HOME.","title":"Unable to locate tools.jar","body":"<p>maybe you have updated the JREs in the OS, and the addition has added in the \"path\" of the environment variables an entry \".../Oracle/jer\" that overwrites your JAVA_HOME.\ntry to remove it from the \"path\" by leaving JAVA_HOME.</p>\n"},{"tags":[],"owner":{"account_id":15572692,"reputation":51,"user_id":11234641,"display_name":"alt440"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1554238314,"creation_date":1554238314,"answer_id":55483386,"question_id":5730815,"body_markdown":"As many people mentioned, it looks like you are looking in your JRE instead of the JDK for the tools.jar file.\r\n\r\nI would also like to mention that on recent versions of the JDK, there is no more tools.jar file. I downloaded the most recent JDK as of today (JDK version 12) and I could not find any tools.jar. I had to download JDK version 8 (1.8.0) here https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html to get the tools.jar file. I downloaded that version, took the tools.jar file and put it into my recent version&#39;s lib folder.","title":"Unable to locate tools.jar","body":"<p>As many people mentioned, it looks like you are looking in your JRE instead of the JDK for the tools.jar file.</p>\n\n<p>I would also like to mention that on recent versions of the JDK, there is no more tools.jar file. I downloaded the most recent JDK as of today (JDK version 12) and I could not find any tools.jar. I had to download JDK version 8 (1.8.0) here <a href=\"https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html\" rel=\"nofollow noreferrer\">https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html</a> to get the tools.jar file. I downloaded that version, took the tools.jar file and put it into my recent version's lib folder.</p>\n"},{"tags":[],"owner":{"account_id":17242216,"reputation":1,"user_id":12484231,"display_name":"fiaz"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1575537616,"creation_date":1575535430,"answer_id":59191227,"question_id":5730815,"body_markdown":"I have resolved tool.jar file error recently. I am using eclipse oxygen ide. It works perfectly and easy. Repeat these steps on your system as\r\n\r\n 1. Download tool.jar file according to your jre jdk version. Lets suppose tool.jar file is 1.8.0.tool.jar\r\n\r\n 2. After donwload 1.8 .0 tool.jar file rename is as as tool.jar\r\n\r\n 3. Then go to your jdk installation folder\r\n\r\n 4. Then go to lib folder open it\r\n\r\n 5. And paste here \r\n\r\n 6. You will make this type path. `E:\\jdk 8\\lib\\tools.jar`","title":"Unable to locate tools.jar","body":"<p>I have resolved tool.jar file error recently. I am using eclipse oxygen ide. It works perfectly and easy. Repeat these steps on your system as</p>\n\n<ol>\n<li><p>Download tool.jar file according to your jre jdk version. Lets suppose tool.jar file is 1.8.0.tool.jar</p></li>\n<li><p>After donwload 1.8 .0 tool.jar file rename is as as tool.jar</p></li>\n<li><p>Then go to your jdk installation folder</p></li>\n<li><p>Then go to lib folder open it</p></li>\n<li><p>And paste here </p></li>\n<li><p>You will make this type path. <code>E:\\jdk 8\\lib\\tools.jar</code></p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":792365,"reputation":432,"user_id":909812,"display_name":"GarethPN"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1576150898,"creation_date":1576150898,"answer_id":59303804,"question_id":5730815,"body_markdown":"Incase it helps, the problem for me was that I had 2 entries in my PATH environment variable which pointed to a location containing the javaw executable.\r\n\r\nI cleaned up the variable to make sure that &quot;%JAVA_HOME%\\bin&quot; was the only entry referencing a location containing my java executables.","title":"Unable to locate tools.jar","body":"<p>Incase it helps, the problem for me was that I had 2 entries in my PATH environment variable which pointed to a location containing the javaw executable.</p>\n\n<p>I cleaned up the variable to make sure that \"%JAVA_HOME%\\bin\" was the only entry referencing a location containing my java executables.</p>\n"},{"tags":[],"owner":{"account_id":940012,"reputation":21855,"user_id":968244,"accept_rate":58,"display_name":"isapir"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1597592724,"creation_date":1597592724,"answer_id":63438859,"question_id":5730815,"body_markdown":"This happens when the Environment Variable JAVA_HOME is not set, or points to the wrong directory.  You can see the value that Ant has by running the command:\r\n\r\n    ant -diagnostics\r\n\r\nAnd looking for the line that shows `java.home`.  If you have `grep` installed then you can simple run:\r\n\r\n    ant -diagnostics | grep java.home\r\n\r\nTo fix the issue, set the `JAVA_HOME` Environment Variable to the JDK directory.  While setting the variable differs slightly between *nix and Windows, the rest works the same on all operating systems.  So it doesn&#39;t matter if you use the GUI that Windows provides, or the `set` or `setx` commands, as long as the value is set prior to calling `ant` (if you&#39;ve set it globally then it must exist before you open the shell/terminal window).\r\n\r\nAfter setting `JAVA_HOME` you can run `ant -version`, for example, and get the result, e.g.\r\n\r\n&gt; Apache Ant(TM) version 1.10.8 compiled on May 10 2020","title":"Unable to locate tools.jar","body":"<p>This happens when the Environment Variable JAVA_HOME is not set, or points to the wrong directory.  You can see the value that Ant has by running the command:</p>\n<pre><code>ant -diagnostics\n</code></pre>\n<p>And looking for the line that shows <code>java.home</code>.  If you have <code>grep</code> installed then you can simple run:</p>\n<pre><code>ant -diagnostics | grep java.home\n</code></pre>\n<p>To fix the issue, set the <code>JAVA_HOME</code> Environment Variable to the JDK directory.  While setting the variable differs slightly between *nix and Windows, the rest works the same on all operating systems.  So it doesn't matter if you use the GUI that Windows provides, or the <code>set</code> or <code>setx</code> commands, as long as the value is set prior to calling <code>ant</code> (if you've set it globally then it must exist before you open the shell/terminal window).</p>\n<p>After setting <code>JAVA_HOME</code> you can run <code>ant -version</code>, for example, and get the result, e.g.</p>\n<blockquote>\n<p>Apache Ant(TM) version 1.10.8 compiled on May 10 2020</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":14506555,"reputation":1,"user_id":11078487,"display_name":"Arslan ahsan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1603627117,"creation_date":1603627117,"answer_id":64523415,"question_id":5730815,"body_markdown":"Step1 Check your jdk is installed. and variable path is setted.\r\nStep2 unistall your eclipes and reinstall it. other wise It will continue to be a problem","title":"Unable to locate tools.jar","body":"<p>Step1 Check your jdk is installed. and variable path is setted.\nStep2 unistall your eclipes and reinstall it. other wise It will continue to be a problem</p>\n"},{"tags":[],"owner":{"account_id":1592325,"reputation":654,"user_id":1475378,"display_name":"Uyric"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1625860377,"creation_date":1625860377,"answer_id":68322101,"question_id":5730815,"body_markdown":"It&#39;s worth observing that tools.jar has been removed from the JDK since Java 9. https://docs.oracle.com/javase/9/migrate/toc.htm#JSMIG-GUID-055EA9F4-835E-463F-B9E1-9081B3D9E55D\r\n\r\nIf people are facing this issue compiling a Java program with JDK 9+, you may need to review the dependencies of your projects.\r\n\r\nIn my case, I was trying to compile a project using AspectJ and the Maven plugin `org.codehaus.mojo:aspectj-maven-plugin:1.11`. After searching online, I found an alternative that supports Java 9+: `dev.aspectj:aspectj-maven-plugin:1.13.M3`.","title":"Unable to locate tools.jar","body":"<p>It's worth observing that tools.jar has been removed from the JDK since Java 9. <a href=\"https://docs.oracle.com/javase/9/migrate/toc.htm#JSMIG-GUID-055EA9F4-835E-463F-B9E1-9081B3D9E55D\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/9/migrate/toc.htm#JSMIG-GUID-055EA9F4-835E-463F-B9E1-9081B3D9E55D</a></p>\n<p>If people are facing this issue compiling a Java program with JDK 9+, you may need to review the dependencies of your projects.</p>\n<p>In my case, I was trying to compile a project using AspectJ and the Maven plugin <code>org.codehaus.mojo:aspectj-maven-plugin:1.11</code>. After searching online, I found an alternative that supports Java 9+: <code>dev.aspectj:aspectj-maven-plugin:1.13.M3</code>.</p>\n"},{"tags":[],"owner":{"account_id":8374951,"reputation":1,"user_id":6288708,"display_name":"ramakrishna reddy kamasani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670111017,"creation_date":1670111017,"answer_id":74671721,"question_id":5730815,"body_markdown":"The latest versions of Java do not have tools.jar in the lib folder. Remove tools.jar entry in environment variables and retry it.","title":"Unable to locate tools.jar","body":"<p>The latest versions of Java do not have tools.jar in the lib folder. Remove tools.jar entry in environment variables and retry it.</p>\n"},{"tags":[],"owner":{"account_id":28906834,"reputation":1,"user_id":22140698,"display_name":"Jose Lira"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687883663,"creation_date":1687883663,"answer_id":76566937,"question_id":5730815,"body_markdown":"I am using java openjdk 12 with Eclipse IDE (Version: 2022-06 (4.24.0)\r\nBuild id: 20220609-1112) and I placed the tools.jar under the lib folder (C:\\Program Files\\OpenJDK\\jdk-12.0.2\\lib) and pom.xml file had it as a dependency for sun tools:\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/com.sun/tools --&gt;\r\n        &lt;dependency&gt;\r\n           &lt;groupId&gt;com.sun&lt;/groupId&gt;\r\n           &lt;artifactId&gt;tools&lt;/artifactId&gt;\r\n           &lt;version&gt;1.5.0&lt;/version&gt;\r\n           &lt;scope&gt;system&lt;/scope&gt;\r\n           &lt;systemPath&gt;C:\\Program Files\\OpenJDK\\jdk-12.0.2\\lib\\tools.jar&lt;/systemPath&gt;\r\n        &lt;/dependency&gt;\r\n\r\nThis works in jdk 8 and 12, but I will recreate the project without this dependency in my next release version since this maven project was created back in 2018.","title":"Unable to locate tools.jar","body":"<p>I am using java openjdk 12 with Eclipse IDE (Version: 2022-06 (4.24.0)\nBuild id: 20220609-1112) and I placed the tools.jar under the lib folder (C:\\Program Files\\OpenJDK\\jdk-12.0.2\\lib) and pom.xml file had it as a dependency for sun tools:</p>\n<pre><code>&lt;!-- https://mvnrepository.com/artifact/com.sun/tools --&gt;\n    &lt;dependency&gt;\n       &lt;groupId&gt;com.sun&lt;/groupId&gt;\n       &lt;artifactId&gt;tools&lt;/artifactId&gt;\n       &lt;version&gt;1.5.0&lt;/version&gt;\n       &lt;scope&gt;system&lt;/scope&gt;\n       &lt;systemPath&gt;C:\\Program Files\\OpenJDK\\jdk-12.0.2\\lib\\tools.jar&lt;/systemPath&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>This works in jdk 8 and 12, but I will recreate the project without this dependency in my next release version since this maven project was created back in 2018.</p>\n"}],"owner":{"account_id":180086,"reputation":20208,"user_id":413174,"accept_rate":87,"display_name":"olidev"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":396858,"favorite_count":0,"down_vote_count":0,"up_vote_count":198,"accepted_answer_id":5730851,"answer_count":36,"score":198,"last_activity_date":1687883663,"creation_date":1303304840,"question_id":5730815,"body_markdown":"I am building a project in Java. \r\n\r\nI have this error:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    Unable to locate tools.jar. Expected to find it in C:\\Program Files\\Java\\jre6\\lib\\tools.jar\r\n\r\nI have installed a JDK and the folder: `C:\\Program Files\\Java\\jre6\\lib` is in my system but the file `tools.jar` is not there.\r\n","title":"Unable to locate tools.jar","body":"<p>I am building a project in Java. </p>\n\n<p>I have this error:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Unable to locate tools.jar. Expected to find it in C:\\Program Files\\Java\\jre6\\lib\\tools.jar\n</code></pre>\n\n<p>I have installed a JDK and the folder: <code>C:\\Program Files\\Java\\jre6\\lib</code> is in my system but the file <code>tools.jar</code> is not there.</p>\n"},{"tags":["java","hibernate","spring-mvc"],"answers":[{"tags":[],"owner":{"account_id":10827831,"reputation":143,"user_id":7963227,"display_name":"Sametcey"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687854553,"creation_date":1687854553,"answer_id":76563006,"question_id":76561116,"body_markdown":"Hi in your RestController you have this code:\r\n\r\n    private CompanyManager mgr;\r\n    \r\n        public void setUserManager(CompanyManager companyManager) {\r\n            this.mgr = companyManager;\r\n        }\r\n\r\nBUT CompanyManager mgr are not decalred in this way!\r\n\r\nyou must set `@Autowired`\r\n\r\n    private CompanyManager mgr;\r\n\r\n        @Autowired\r\n        public void setUserManager(CompanyManager companyManager) {\r\n            this.mgr = companyManager;\r\n        }\r\n\r\n\r\nAnd your CompanyManager must be Tagged with @Service\r\n\r\n**Be carefull, if it is possible you can also solve this problem with JPA / JPQL.** it will be much easer for you - you dont need to write to much code.","title":"Getting NullPointerException only after using saveOrUpdate method of Hibernate","body":"<p>Hi in your RestController you have this code:</p>\n<pre><code>private CompanyManager mgr;\n\n    public void setUserManager(CompanyManager companyManager) {\n        this.mgr = companyManager;\n    }\n</code></pre>\n<p>BUT CompanyManager mgr are not decalred in this way!</p>\n<p>you must set <code>@Autowired</code></p>\n<pre><code>private CompanyManager mgr;\n\n    @Autowired\n    public void setUserManager(CompanyManager companyManager) {\n        this.mgr = companyManager;\n    }\n</code></pre>\n<p>And your CompanyManager must be Tagged with @Service</p>\n<p><strong>Be carefull, if it is possible you can also solve this problem with JPA / JPQL.</strong> it will be much easer for you - you dont need to write to much code.</p>\n"}],"owner":{"account_id":2624585,"reputation":1457,"user_id":2271895,"accept_rate":97,"display_name":"Tan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687883603,"creation_date":1687829693,"question_id":76561116,"body_markdown":"I have a controller defined like this and getting a NullPointerException Cannot invoke &quot;java.lang.Integer.intValue()&quot; because &quot;this.id&quot; is null (full stack trace shown in the end) \r\nonly when I&#39;m using `saveOrUpdate` method of Hibernate in `CompanyDAOHibernate`. It works fine when I just use `save()` method of hibernate. What might be the reason? \r\n\r\n*Here&#39;s the error in short:*\r\n\r\n    org.springframework.orm.hibernate5.HibernateSystemException: Exception occurred inside getter of com.pending.model.Company.id; nested exception is org.hibernate.PropertyAccessException: Exception occurred inside getter of com.pending.model.Company.id\r\n    Caused by: org.hibernate.PropertyAccessException: Exception occurred inside getter of com.pending.model.Company.id\r\n    Caused by: java.lang.reflect.InvocationTargetException\r\n    Caused by: java.lang.NullPointerException: Cannot invoke &quot;java.lang.Integer.intValue()&quot; because &quot;this.id&quot; is null\r\n\r\n**Controller Code** below:\r\n\r\n    @Controller\r\n    @RequestMapping(&quot;/companyNewRecord&quot;)\r\n    public class CompanyNewRecordController {\r\n    \r\n    \tprivate CompanyManager mgr;\r\n    \r\n    \tpublic void setCompanyManager(CompanyManager companyManager) {\r\n    \t\tthis.mgr = companyManager;\r\n    \t}\r\n    \r\n    \t// display the form\r\n    \t@RequestMapping(method = RequestMethod.GET)\r\n    \tpublic ModelAndView edit(ModelAndView mav) {\r\n    \r\n    \t\tmav.setViewName(&quot;companyNewRecord&quot;);\r\n    \t\tmav.addObject(&quot;CompanyNewRecordForm&quot;, new CompanyNewRecordForm());\r\n    \t\treturn mav;\r\n    \t}\r\n    \r\n    \t// process the form\r\n    \t@RequestMapping(method = RequestMethod.POST)\r\n    \tpublic ModelAndView process(ModelAndView mav,\r\n    \t\t\t@ModelAttribute(&quot;CompanyNewRecordForm&quot;) CompanyNewRecordForm CompanyNewRecordForm, BindingResult result)\r\n    \t\t\tthrows Exception {\r\n    \r\n    \t\tCompany addNewCompany = new Company();\r\n            addNewCompany.setName(CompanyNewRecordForm.getCompanyName());\r\n    \t\taddNewCompany.setComment(CompanyNewRecordForm.getComment());\r\n    \t\tmgr.saveCompany(addNewCompany);\r\n    \t\treturn mav;\r\n    \t}\r\n    \r\n    }\r\n\r\nHere&#39;s my `Company` class inside `com.pending.model`:\r\n\r\n    public class Company implements Serializable{\r\n    \t\r\n    \t\t\r\n    \t\tprivate Integer id;\r\n            private String name;\r\n            private String comment;\r\n    \t\tpublic Integer getId() {\r\n    \t\t\treturn id;\r\n    \t\t}\r\n    \t\tpublic void setId(Integer id) {\r\n    \t\t\tthis.id = id;\r\n    \t\t}\r\n    \t\tpublic String getName() {\r\n    \t\t\treturn name;\r\n    \t\t}\r\n    \t\tpublic void setName(String name) {\r\n    \t\t\tthis.name = name;\r\n    \t\t}\r\n    \t\tpublic String getComment() {\r\n    \t\t\treturn comment;\r\n    \t\t}\r\n    \t\tpublic void setComment(String comment) {\r\n    \t\t\tthis.comment = comment;\r\n    \t\t}\r\n    \r\n    \t\t\r\n    }\r\n\r\nMy `Company.hbm.xml` file is also inside `com.pending.model`\r\n\r\n`CompanyManager` interface inside `com.pending.service` is as follows:\r\n\r\n    public interface CompanyManager {\r\n    \tpublic void setCompanyDAO(CompanyDAO dao);\r\n    \tpublic Company getCompany(Integer id);\t\r\n    \tpublic void saveCompany(Company company);\r\n    }\r\n\r\n\r\n`CompanyDAO` inside `com.pending.dao`\r\n\r\n    public interface CompanyDAO {\r\n    \r\n    \tpublic Company getCompany(Integer id);\r\n    \tpublic Company saveCompany(Company company);\r\n    \r\n    }\r\n\r\n\r\n`CompanyDaoHibernate` in `com.pending.dao.hibernate`\r\n\r\npublic class CompanyDAOHibernate extends HibernateDaoSupport implements CompanyDAO {\r\n\r\n\t@Override\r\n\tpublic Company saveCompany(Company company) {\r\n\t\tgetHibernateTemplate().saveOrUpdate(company);\r\n\r\n\t\tif (logger.isDebugEnabled()) {\r\n\t\t\tlogger.debug(&quot;Company id is: &quot; + company.getId());\r\n\t\t}\r\n\t\treturn company;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic Company getCompany(Integer id) {\r\n\t\tCompany company = (Company) getHibernateTemplate().get(Company.class, id);\r\n\t\tif (company == null) {\r\n\t\t\tthrow new ObjectRetrievalFailureException(Company.class, id);\r\n\t\t}\r\n\t\treturn company;\r\n\t}\r\n\r\n`CompanyManagerImpl` in `com.pending.service.impl` \r\n\r\n\r\n     public class CompanyManagerImpl implements CompanyManager {\r\n    \tprivate CompanyDAO dao;\r\n    \r\n    \tpublic void setCompanyDAO(CompanyDAO dao) {\r\n    \t\tthis.dao = dao;\r\n    \r\n    \t}\r\n    \r\n    \tpublic void saveCompany(Company company) {\r\n    \t\tdao.saveCompany(company);\r\n    \r\n    \t}\r\n    \r\n    \tpublic Company getCompany(Integer id) {\r\n    \r\n    \t\treturn dao.getCompany(id);\r\n    \t}\r\n    \r\n    }\r\n\r\n\r\nThe XML file is defined inside applicationContext-hibernate.xml as follows along with other xml files (not shown below)\r\n\r\n\r\n    &lt;bean id=&quot;sessionFactoryCOMPANYDB&quot;\r\n    \t\tclass=&quot;org.springframework.orm.hibernate5.LocalSessionFactoryBean&quot;&gt;\r\n    \t\t&lt;property name=&quot;dataSource&quot;&gt;\r\n    \t\t\t&lt;ref bean=&quot;dataSourceCOMPANYDB&quot; /&gt;\r\n    \t\t&lt;/property&gt;\r\n    \t\t&lt;property name=&quot;mappingResources&quot;&gt;\r\n    \t\t\t&lt;list&gt;\r\n    \t\t\t\t\r\n    \t\t\t\t&lt;value&gt;com/pending/model/Company.hbm.xml&lt;/value&gt;\r\n    \t\t\t&lt;/list&gt;\r\n    \t\t&lt;/property&gt;\r\n    \t\t&lt;property name=&quot;hibernateProperties&quot;&gt;\r\n    \t\t\t&lt;props&gt;\r\n    \t\t\t\t&lt;prop key=&quot;hibernate.dialect&quot;&gt;\r\n    \t\t\t\t\torg.hibernate.dialect.SQLServer2012Dialect\r\n    \t\t\t\t&lt;/prop&gt;\r\n    \t\t\t\t&lt;prop key=&quot;hibernate.show_sql&quot;&gt;false&lt;/prop&gt;\r\n    \t\t\t\t&lt;prop key=&quot;hibernate.cache.region.factory_class&quot;&gt;org.hibernate.cache.ehcache.SingletonEhCacheRegionFactory\r\n    \t\t\t\t&lt;/prop&gt;\r\n    \t\t\t\t&lt;prop key=&quot;hibernate.cache.use_second_level_cache&quot;&gt;true&lt;/prop&gt;\r\n    \t\t\t&lt;/props&gt;\r\n    \t\t&lt;/property&gt;\r\n    \t&lt;/bean&gt;\r\n\r\nAnd applicationContex.xml contains the following bean :\r\n\r\n    &lt;bean id=&quot;companyManager&quot; parent=&quot;txProxyTemplateCOMPANYDB&quot;&gt;\r\n    \t\t&lt;property name=&quot;target&quot;&gt;\r\n    \t\t\t&lt;bean class=&quot;com.pending.service.impl.CompanyManagerImpl&quot;&gt;\r\n    \t\t\t\t&lt;property name=&quot;companyDAO&quot;&gt;\r\n    \t\t\t\t\t&lt;ref bean=&quot;companyDAO&quot; /&gt;\r\n    \t\t\t\t&lt;/property&gt;\r\n    \t\t\t&lt;/bean&gt;\r\n    \t\t&lt;/property&gt;\r\n    \t&lt;/bean&gt;\r\n\r\n\t\r\n\r\nMy SQLServer database table design is as follows:\r\n\r\n    Column Name    Data type   Allow Nuls\r\n    id              int        \r\n    name            varchar(30)\r\n    comment         varchar(250)    checkmarked\r\n    \t\r\n\r\nWhere, id is set to primary key\tand is autoincremented when an insertion happens.\r\n\r\nHere&#39;s `Company.hbm.xml`\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;!DOCTYPE hibernate-mapping PUBLIC\r\n    &quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;\r\n    &quot;http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;&gt;\r\n    &lt;hibernate-mapping&gt;\r\n    &lt;class name=&quot;com.pending.model.Company&quot; table=&quot;company&quot;&gt;\r\n    &lt;id name=&quot;id&quot; column=&quot;id&quot; unsaved-value=&quot;null&quot;&gt;\r\n    &lt;generator class=&quot;native&quot; /&gt;\r\n    &lt;/id&gt;\r\n    &lt;property name=&quot;name&quot; /&gt;\r\n    &lt;property name=&quot;comment&quot; /&gt;\r\n    &lt;/class&gt;\r\n    &lt;/hibernate-mapping&gt;\r\n\r\nMy `servlet.xml` has this defined:\r\n\r\n    &lt;bean id=&quot;companyNewRecordController&quot;\r\n    class=&quot;com.pending.controller.CompanyNewRecordController&quot;&gt;\r\n        &lt;property name=&quot;companyManager&quot;&gt;\r\n             &lt;ref bean=&quot;companyManager&quot; /&gt;\r\n         &lt;/property&gt;\r\n    &lt;/bean&gt;\r\n    \t\r\n\r\nHere is the stacktrace:\r\n\r\n        \r\n    [INFO] [talledLocalContainer] org.springframework.orm.hibernate5.HibernateSystemException: Exception occurred inside getter of com.pending.model.Company.id; nested exception is org.hibernate.PropertyAccessException: Exception occurred inside getter of com.pending.model.Company.id\r\n    [INFO] [talledLocalContainer]   at org.springframework.orm.hibernate5.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:267)\r\n    [INFO] [talledLocalContainer]   at org.springframework.orm.hibernate5.HibernateTemplate.doExecute(HibernateTemplate.java:370)\r\n    [INFO] [talledLocalContainer]   at org.springframework.orm.hibernate5.HibernateTemplate.executeWithNativeSession(HibernateTemplate.java:334)\r\n    [INFO] [talledLocalContainer]   at org.springframework.orm.hibernate5.HibernateTemplate.saveOrUpdate(HibernateTemplate.java:665)\r\n    [INFO] [talledLocalContainer]   at com.pending.dao.hibernate.CompanyDAOHibernate.saveCompany(CompanyDAOHibernate.java:13)\r\n    [INFO] [talledLocalContainer]   at com.pending.service.impl.CompanyManagerImpl.saveCompany(CompanyManagerImpl.java:16)\r\n    [INFO] [talledLocalContainer]   at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    [INFO] [talledLocalContainer]   at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n    [INFO] [talledLocalContainer]   at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    [INFO] [talledLocalContainer]   at java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n    [INFO] [talledLocalContainer]   at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)\r\n    [INFO] [talledLocalContainer]   at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)\r\n    [INFO] [talledLocalContainer]   at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n    [INFO] [talledLocalContainer]   at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n    [INFO] [talledLocalContainer]   at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\r\n    [INFO] [talledLocalContainer]   at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n    [INFO] [talledLocalContainer]   at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n    [INFO] [talledLocalContainer]   at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)\r\n    [INFO] [talledLocalContainer]   at jdk.proxy3/jdk.proxy3.$Proxy64.saveCompany(Unknown Source)\r\n    [INFO] [talledLocalContainer]   at com.pending.web.controller.SampleNewCompanyController.process(SampleNewCompanyController.java:59)\r\n    [INFO] [talledLocalContainer]   at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    [INFO] [talledLocalContainer]   at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n    [INFO] [talledLocalContainer]   at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    [INFO] [talledLocalContainer]   at java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n    [INFO] [talledLocalContainer]   at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)\r\n    [INFO] [talledLocalContainer]   at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)\r\n    [INFO] [talledLocalContainer]   at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n    [INFO] [talledLocalContainer]   at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)\r\n    [INFO] [talledLocalContainer]   at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)\r\n    [INFO] [talledLocalContainer]   at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n    [INFO] [talledLocalContainer]   at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)\r\n    [INFO] [talledLocalContainer]   at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)\r\n    [INFO] [talledLocalContainer]   at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\r\n    [INFO] [talledLocalContainer]   at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)\r\n    [INFO] [talledLocalContainer]   at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)\r\n    [INFO] [talledLocalContainer]   at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\r\n    [INFO] [talledLocalContainer]   at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)\r\n    [INFO] [talledLocalContainer]   at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\r\n    [INFO] [talledLocalContainer]   at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n    [INFO] [talledLocalContainer]   at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n    [INFO] [talledLocalContainer]   at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n    [INFO] [talledLocalContainer]   at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n    [INFO] [talledLocalContainer]   at com.security.PasswordExpirationFilter.doFilter(PasswordExpirationFilter.java:201)\r\n    [INFO] [talledLocalContainer]   at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n    [INFO] [talledLocalContainer]   at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n    [INFO] [talledLocalContainer]   at org.sitemesh.webapp.contentfilter.ContentBufferingFilter.bufferAndPostProcess(ContentBufferingFilter.java:169)\r\n    [INFO] [talledLocalContainer]   at org.sitemesh.webapp.contentfilter.ContentBufferingFilter.doFilter(ContentBufferingFilter.java:126)\r\n    [INFO] [talledLocalContainer]   at org.sitemesh.webapp.SiteMeshFilter.doFilter(SiteMeshFilter.java:120)\r\n    [INFO] [talledLocalContainer]   at org.sitemesh.config.ConfigurableSiteMeshFilter.doFilter(ConfigurableSiteMeshFilter.java:163)\r\n    [INFO] [talledLocalContainer]   at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n    [INFO] [talledLocalContainer]   at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n    [INFO] [talledLocalContainer]   at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n    [INFO] [talledLocalContainer]   at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n    [INFO] [talledLocalContainer]   at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n    [INFO] [talledLocalContainer]   at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n    [INFO] [talledLocalContainer]   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)\r\n    [INFO] [talledLocalContainer]   at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)\r\n    [INFO] [talledLocalContainer]   at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)\r\n    [INFO] [talledLocalContainer]   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    [INFO] [talledLocalContainer]   at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)\r\n    [INFO] [talledLocalContainer]   at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)\r\n    [INFO] [talledLocalContainer]   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    [INFO] [talledLocalContainer]   at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)\r\n    [INFO] [talledLocalContainer]   at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)\r\n    [INFO] [talledLocalContainer]   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    [INFO] [talledLocalContainer]   at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)\r\n    [INFO] [talledLocalContainer]   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    [INFO] [talledLocalContainer]   at org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:106)\r\n    [INFO] [talledLocalContainer]   at org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:97)\r\n    [INFO] [talledLocalContainer]   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    [INFO] [talledLocalContainer]   at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)\r\n    [INFO] [talledLocalContainer]   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    [INFO] [talledLocalContainer]   at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)\r\n    [INFO] [talledLocalContainer]   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    [INFO] [talledLocalContainer]   at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:166)\r\n    [INFO] [talledLocalContainer]   at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n    [INFO] [talledLocalContainer]   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    [INFO] [talledLocalContainer]   at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:223)\r\n    [INFO] [talledLocalContainer]   at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:217)\r\n    [INFO] [talledLocalContainer]   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    [INFO] [talledLocalContainer]   at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)\r\n    [INFO] [talledLocalContainer]   at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)\r\n    [INFO] [talledLocalContainer]   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    [INFO] [talledLocalContainer]   at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)\r\n    [INFO] [talledLocalContainer]   at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)\r\n    [INFO] [talledLocalContainer]   at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n    [INFO] [talledLocalContainer]   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    [INFO] [talledLocalContainer]   at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)\r\n    [INFO] [talledLocalContainer]   at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n    [INFO] [talledLocalContainer]   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    [INFO] [talledLocalContainer]   at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)\r\n    [INFO] [talledLocalContainer]   at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)\r\n    [INFO] [talledLocalContainer]   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    [INFO] [talledLocalContainer]   at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)\r\n    [INFO] [talledLocalContainer]   at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n    [INFO] [talledLocalContainer]   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n    [INFO] [talledLocalContainer]   at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)\r\n    [INFO] [talledLocalContainer]   at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)\r\n    [INFO] [talledLocalContainer]   at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)\r\n    [INFO] [talledLocalContainer]   at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)\r\n    [INFO] [talledLocalContainer]   at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n    [INFO] [talledLocalContainer]   at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n    [INFO] [talledLocalContainer]   at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n    [INFO] [talledLocalContainer]   at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n    [INFO] [talledLocalContainer]   at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)\r\n    [INFO] [talledLocalContainer]   at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\r\n    [INFO] [talledLocalContainer]   at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n    [INFO] [talledLocalContainer]   at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:687)\r\n    [INFO] [talledLocalContainer]   at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n    [INFO] [talledLocalContainer]   at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)\r\n    [INFO] [talledLocalContainer]   at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)\r\n    [INFO] [talledLocalContainer]   at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n    [INFO] [talledLocalContainer]   at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)\r\n    [INFO] [talledLocalContainer]   at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789)\r\n    [INFO] [talledLocalContainer]   at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n    [INFO] [talledLocalContainer]   at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n    [INFO] [talledLocalContainer]   at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n    [INFO] [talledLocalContainer]   at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n    [INFO] [talledLocalContainer]   at java.base/java.lang.Thread.run(Thread.java:833)\r\n    [INFO] [talledLocalContainer] Caused by: org.hibernate.PropertyAccessException: Exception occurred inside getter of com.pending.model.Company.id\r\n    [INFO] [talledLocalContainer]   at org.hibernate.property.access.spi.GetterMethodImpl.get(GetterMethodImpl.java:45)\r\n    [INFO] [talledLocalContainer]   at org.hibernate.tuple.entity.AbstractEntityTuplizer.getIdentifier(AbstractEntityTuplizer.java:230)\r\n    [INFO] [talledLocalContainer]   at org.hibernate.persister.entity.AbstractEntityPersister.getIdentifier(AbstractEntityPersister.java:5280)\r\n    [INFO] [talledLocalContainer]   at org.hibernate.persister.entity.AbstractEntityPersister.isTransient(AbstractEntityPersister.java:4972)\r\n    [INFO] [talledLocalContainer]   at org.hibernate.engine.internal.ForeignKeys.isTransient(ForeignKeys.java:294)\r\n    [INFO] [talledLocalContainer]   at org.hibernate.event.internal.EntityState.getEntityState(EntityState.java:59)\r\n    [INFO] [talledLocalContainer]   at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.performSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:85)\r\n    [INFO] [talledLocalContainer]   at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:75)\r\n    [INFO] [talledLocalContainer]   at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n    [INFO] [talledLocalContainer]   at org.hibernate.internal.SessionImpl.fireSaveOrUpdate(SessionImpl.java:656)\r\n    [INFO] [talledLocalContainer]   at org.hibernate.internal.SessionImpl.saveOrUpdate(SessionImpl.java:649)\r\n    [INFO] [talledLocalContainer]   at org.hibernate.internal.SessionImpl.saveOrUpdate(SessionImpl.java:644)\r\n    [INFO] [talledLocalContainer]   at org.springframework.orm.hibernate5.HibernateTemplate.lambda$saveOrUpdate$15(HibernateTemplate.java:667)\r\n    [INFO] [talledLocalContainer]   at org.springframework.orm.hibernate5.HibernateTemplate.doExecute(HibernateTemplate.java:367)\r\n    [INFO] [talledLocalContainer]   ... 117 more\r\n    [INFO] [talledLocalContainer] Caused by: java.lang.reflect.InvocationTargetException\r\n    [INFO] [talledLocalContainer]   at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    [INFO] [talledLocalContainer]   at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n    [INFO] [talledLocalContainer]   at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    [INFO] [talledLocalContainer]   at java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n    [INFO] [talledLocalContainer]   at org.hibernate.property.access.spi.GetterMethodImpl.get(GetterMethodImpl.java:42)\r\n    [INFO] [talledLocalContainer]   ... 130 more\r\n    [INFO] [talledLocalContainer] Caused by: java.lang.NullPointerException: Cannot invoke &quot;java.lang.Integer.intValue()&quot; because &quot;this.id&quot; is null\r\n    [INFO] [talledLocalContainer]   at com.pending.model.Company.getId(Company.java:14)\r\n    [INFO] [talledLocalContainer]   ... 135 more\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Getting NullPointerException only after using saveOrUpdate method of Hibernate","body":"<p>I have a controller defined like this and getting a NullPointerException Cannot invoke &quot;java.lang.Integer.intValue()&quot; because &quot;this.id&quot; is null (full stack trace shown in the end)\nonly when I'm using <code>saveOrUpdate</code> method of Hibernate in <code>CompanyDAOHibernate</code>. It works fine when I just use <code>save()</code> method of hibernate. What might be the reason?</p>\n<p><em>Here's the error in short:</em></p>\n<pre><code>org.springframework.orm.hibernate5.HibernateSystemException: Exception occurred inside getter of com.pending.model.Company.id; nested exception is org.hibernate.PropertyAccessException: Exception occurred inside getter of com.pending.model.Company.id\nCaused by: org.hibernate.PropertyAccessException: Exception occurred inside getter of com.pending.model.Company.id\nCaused by: java.lang.reflect.InvocationTargetException\nCaused by: java.lang.NullPointerException: Cannot invoke &quot;java.lang.Integer.intValue()&quot; because &quot;this.id&quot; is null\n</code></pre>\n<p><strong>Controller Code</strong> below:</p>\n<pre><code>@Controller\n@RequestMapping(&quot;/companyNewRecord&quot;)\npublic class CompanyNewRecordController {\n\n    private CompanyManager mgr;\n\n    public void setCompanyManager(CompanyManager companyManager) {\n        this.mgr = companyManager;\n    }\n\n    // display the form\n    @RequestMapping(method = RequestMethod.GET)\n    public ModelAndView edit(ModelAndView mav) {\n\n        mav.setViewName(&quot;companyNewRecord&quot;);\n        mav.addObject(&quot;CompanyNewRecordForm&quot;, new CompanyNewRecordForm());\n        return mav;\n    }\n\n    // process the form\n    @RequestMapping(method = RequestMethod.POST)\n    public ModelAndView process(ModelAndView mav,\n            @ModelAttribute(&quot;CompanyNewRecordForm&quot;) CompanyNewRecordForm CompanyNewRecordForm, BindingResult result)\n            throws Exception {\n\n        Company addNewCompany = new Company();\n        addNewCompany.setName(CompanyNewRecordForm.getCompanyName());\n        addNewCompany.setComment(CompanyNewRecordForm.getComment());\n        mgr.saveCompany(addNewCompany);\n        return mav;\n    }\n\n}\n</code></pre>\n<p>Here's my <code>Company</code> class inside <code>com.pending.model</code>:</p>\n<pre><code>public class Company implements Serializable{\n    \n        \n        private Integer id;\n        private String name;\n        private String comment;\n        public Integer getId() {\n            return id;\n        }\n        public void setId(Integer id) {\n            this.id = id;\n        }\n        public String getName() {\n            return name;\n        }\n        public void setName(String name) {\n            this.name = name;\n        }\n        public String getComment() {\n            return comment;\n        }\n        public void setComment(String comment) {\n            this.comment = comment;\n        }\n\n        \n}\n</code></pre>\n<p>My <code>Company.hbm.xml</code> file is also inside <code>com.pending.model</code></p>\n<p><code>CompanyManager</code> interface inside <code>com.pending.service</code> is as follows:</p>\n<pre><code>public interface CompanyManager {\n    public void setCompanyDAO(CompanyDAO dao);\n    public Company getCompany(Integer id);  \n    public void saveCompany(Company company);\n}\n</code></pre>\n<p><code>CompanyDAO</code> inside <code>com.pending.dao</code></p>\n<pre><code>public interface CompanyDAO {\n\n    public Company getCompany(Integer id);\n    public Company saveCompany(Company company);\n\n}\n</code></pre>\n<p><code>CompanyDaoHibernate</code> in <code>com.pending.dao.hibernate</code></p>\n<p>public class CompanyDAOHibernate extends HibernateDaoSupport implements CompanyDAO {</p>\n<pre><code>@Override\npublic Company saveCompany(Company company) {\n    getHibernateTemplate().saveOrUpdate(company);\n\n    if (logger.isDebugEnabled()) {\n        logger.debug(&quot;Company id is: &quot; + company.getId());\n    }\n    return company;\n}\n\n@Override\npublic Company getCompany(Integer id) {\n    Company company = (Company) getHibernateTemplate().get(Company.class, id);\n    if (company == null) {\n        throw new ObjectRetrievalFailureException(Company.class, id);\n    }\n    return company;\n}\n</code></pre>\n<p><code>CompanyManagerImpl</code> in <code>com.pending.service.impl</code></p>\n<pre><code> public class CompanyManagerImpl implements CompanyManager {\n    private CompanyDAO dao;\n\n    public void setCompanyDAO(CompanyDAO dao) {\n        this.dao = dao;\n\n    }\n\n    public void saveCompany(Company company) {\n        dao.saveCompany(company);\n\n    }\n\n    public Company getCompany(Integer id) {\n\n        return dao.getCompany(id);\n    }\n\n}\n</code></pre>\n<p>The XML file is defined inside applicationContext-hibernate.xml as follows along with other xml files (not shown below)</p>\n<pre><code>&lt;bean id=&quot;sessionFactoryCOMPANYDB&quot;\n        class=&quot;org.springframework.orm.hibernate5.LocalSessionFactoryBean&quot;&gt;\n        &lt;property name=&quot;dataSource&quot;&gt;\n            &lt;ref bean=&quot;dataSourceCOMPANYDB&quot; /&gt;\n        &lt;/property&gt;\n        &lt;property name=&quot;mappingResources&quot;&gt;\n            &lt;list&gt;\n                \n                &lt;value&gt;com/pending/model/Company.hbm.xml&lt;/value&gt;\n            &lt;/list&gt;\n        &lt;/property&gt;\n        &lt;property name=&quot;hibernateProperties&quot;&gt;\n            &lt;props&gt;\n                &lt;prop key=&quot;hibernate.dialect&quot;&gt;\n                    org.hibernate.dialect.SQLServer2012Dialect\n                &lt;/prop&gt;\n                &lt;prop key=&quot;hibernate.show_sql&quot;&gt;false&lt;/prop&gt;\n                &lt;prop key=&quot;hibernate.cache.region.factory_class&quot;&gt;org.hibernate.cache.ehcache.SingletonEhCacheRegionFactory\n                &lt;/prop&gt;\n                &lt;prop key=&quot;hibernate.cache.use_second_level_cache&quot;&gt;true&lt;/prop&gt;\n            &lt;/props&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n</code></pre>\n<p>And applicationContex.xml contains the following bean :</p>\n<pre><code>&lt;bean id=&quot;companyManager&quot; parent=&quot;txProxyTemplateCOMPANYDB&quot;&gt;\n        &lt;property name=&quot;target&quot;&gt;\n            &lt;bean class=&quot;com.pending.service.impl.CompanyManagerImpl&quot;&gt;\n                &lt;property name=&quot;companyDAO&quot;&gt;\n                    &lt;ref bean=&quot;companyDAO&quot; /&gt;\n                &lt;/property&gt;\n            &lt;/bean&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n</code></pre>\n<p>My SQLServer database table design is as follows:</p>\n<pre><code>Column Name    Data type   Allow Nuls\nid              int        \nname            varchar(30)\ncomment         varchar(250)    checkmarked\n    \n</code></pre>\n<p>Where, id is set to primary key and is autoincremented when an insertion happens.</p>\n<p>Here's <code>Company.hbm.xml</code></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;!DOCTYPE hibernate-mapping PUBLIC\n&quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;\n&quot;http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;&gt;\n&lt;hibernate-mapping&gt;\n&lt;class name=&quot;com.pending.model.Company&quot; table=&quot;company&quot;&gt;\n&lt;id name=&quot;id&quot; column=&quot;id&quot; unsaved-value=&quot;null&quot;&gt;\n&lt;generator class=&quot;native&quot; /&gt;\n&lt;/id&gt;\n&lt;property name=&quot;name&quot; /&gt;\n&lt;property name=&quot;comment&quot; /&gt;\n&lt;/class&gt;\n&lt;/hibernate-mapping&gt;\n</code></pre>\n<p>My <code>servlet.xml</code> has this defined:</p>\n<pre><code>&lt;bean id=&quot;companyNewRecordController&quot;\nclass=&quot;com.pending.controller.CompanyNewRecordController&quot;&gt;\n    &lt;property name=&quot;companyManager&quot;&gt;\n         &lt;ref bean=&quot;companyManager&quot; /&gt;\n     &lt;/property&gt;\n&lt;/bean&gt;\n    \n</code></pre>\n<p>Here is the stacktrace:</p>\n<pre><code>[INFO] [talledLocalContainer] org.springframework.orm.hibernate5.HibernateSystemException: Exception occurred inside getter of com.pending.model.Company.id; nested exception is org.hibernate.PropertyAccessException: Exception occurred inside getter of com.pending.model.Company.id\n[INFO] [talledLocalContainer]   at org.springframework.orm.hibernate5.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:267)\n[INFO] [talledLocalContainer]   at org.springframework.orm.hibernate5.HibernateTemplate.doExecute(HibernateTemplate.java:370)\n[INFO] [talledLocalContainer]   at org.springframework.orm.hibernate5.HibernateTemplate.executeWithNativeSession(HibernateTemplate.java:334)\n[INFO] [talledLocalContainer]   at org.springframework.orm.hibernate5.HibernateTemplate.saveOrUpdate(HibernateTemplate.java:665)\n[INFO] [talledLocalContainer]   at com.pending.dao.hibernate.CompanyDAOHibernate.saveCompany(CompanyDAOHibernate.java:13)\n[INFO] [talledLocalContainer]   at com.pending.service.impl.CompanyManagerImpl.saveCompany(CompanyManagerImpl.java:16)\n[INFO] [talledLocalContainer]   at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n[INFO] [talledLocalContainer]   at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n[INFO] [talledLocalContainer]   at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n[INFO] [talledLocalContainer]   at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n[INFO] [talledLocalContainer]   at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)\n[INFO] [talledLocalContainer]   at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)\n[INFO] [talledLocalContainer]   at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n[INFO] [talledLocalContainer]   at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\n[INFO] [talledLocalContainer]   at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\n[INFO] [talledLocalContainer]   at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\n[INFO] [talledLocalContainer]   at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n[INFO] [talledLocalContainer]   at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)\n[INFO] [talledLocalContainer]   at jdk.proxy3/jdk.proxy3.$Proxy64.saveCompany(Unknown Source)\n[INFO] [talledLocalContainer]   at com.pending.web.controller.SampleNewCompanyController.process(SampleNewCompanyController.java:59)\n[INFO] [talledLocalContainer]   at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n[INFO] [talledLocalContainer]   at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n[INFO] [talledLocalContainer]   at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n[INFO] [talledLocalContainer]   at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n[INFO] [talledLocalContainer]   at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)\n[INFO] [talledLocalContainer]   at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)\n[INFO] [talledLocalContainer]   at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\n[INFO] [talledLocalContainer]   at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)\n[INFO] [talledLocalContainer]   at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)\n[INFO] [talledLocalContainer]   at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\n[INFO] [talledLocalContainer]   at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)\n[INFO] [talledLocalContainer]   at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)\n[INFO] [talledLocalContainer]   at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\n[INFO] [talledLocalContainer]   at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)\n[INFO] [talledLocalContainer]   at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)\n[INFO] [talledLocalContainer]   at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\n[INFO] [talledLocalContainer]   at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)\n[INFO] [talledLocalContainer]   at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\n[INFO] [talledLocalContainer]   at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n[INFO] [talledLocalContainer]   at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\n[INFO] [talledLocalContainer]   at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n[INFO] [talledLocalContainer]   at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n[INFO] [talledLocalContainer]   at com.security.PasswordExpirationFilter.doFilter(PasswordExpirationFilter.java:201)\n[INFO] [talledLocalContainer]   at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n[INFO] [talledLocalContainer]   at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n[INFO] [talledLocalContainer]   at org.sitemesh.webapp.contentfilter.ContentBufferingFilter.bufferAndPostProcess(ContentBufferingFilter.java:169)\n[INFO] [talledLocalContainer]   at org.sitemesh.webapp.contentfilter.ContentBufferingFilter.doFilter(ContentBufferingFilter.java:126)\n[INFO] [talledLocalContainer]   at org.sitemesh.webapp.SiteMeshFilter.doFilter(SiteMeshFilter.java:120)\n[INFO] [talledLocalContainer]   at org.sitemesh.config.ConfigurableSiteMeshFilter.doFilter(ConfigurableSiteMeshFilter.java:163)\n[INFO] [talledLocalContainer]   at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n[INFO] [talledLocalContainer]   at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n[INFO] [talledLocalContainer]   at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\n[INFO] [talledLocalContainer]   at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n[INFO] [talledLocalContainer]   at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n[INFO] [talledLocalContainer]   at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n[INFO] [talledLocalContainer]   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)\n[INFO] [talledLocalContainer]   at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)\n[INFO] [talledLocalContainer]   at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)\n[INFO] [talledLocalContainer]   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n[INFO] [talledLocalContainer]   at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)\n[INFO] [talledLocalContainer]   at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)\n[INFO] [talledLocalContainer]   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n[INFO] [talledLocalContainer]   at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)\n[INFO] [talledLocalContainer]   at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)\n[INFO] [talledLocalContainer]   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n[INFO] [talledLocalContainer]   at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)\n[INFO] [talledLocalContainer]   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n[INFO] [talledLocalContainer]   at org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:106)\n[INFO] [talledLocalContainer]   at org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:97)\n[INFO] [talledLocalContainer]   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n[INFO] [talledLocalContainer]   at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)\n[INFO] [talledLocalContainer]   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n[INFO] [talledLocalContainer]   at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)\n[INFO] [talledLocalContainer]   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n[INFO] [talledLocalContainer]   at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:166)\n[INFO] [talledLocalContainer]   at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n[INFO] [talledLocalContainer]   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n[INFO] [talledLocalContainer]   at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:223)\n[INFO] [talledLocalContainer]   at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:217)\n[INFO] [talledLocalContainer]   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n[INFO] [talledLocalContainer]   at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)\n[INFO] [talledLocalContainer]   at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)\n[INFO] [talledLocalContainer]   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n[INFO] [talledLocalContainer]   at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)\n[INFO] [talledLocalContainer]   at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)\n[INFO] [talledLocalContainer]   at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n[INFO] [talledLocalContainer]   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n[INFO] [talledLocalContainer]   at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)\n[INFO] [talledLocalContainer]   at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n[INFO] [talledLocalContainer]   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n[INFO] [talledLocalContainer]   at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)\n[INFO] [talledLocalContainer]   at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)\n[INFO] [talledLocalContainer]   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n[INFO] [talledLocalContainer]   at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)\n[INFO] [talledLocalContainer]   at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n[INFO] [talledLocalContainer]   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n[INFO] [talledLocalContainer]   at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)\n[INFO] [talledLocalContainer]   at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)\n[INFO] [talledLocalContainer]   at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)\n[INFO] [talledLocalContainer]   at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)\n[INFO] [talledLocalContainer]   at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n[INFO] [talledLocalContainer]   at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n[INFO] [talledLocalContainer]   at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\n[INFO] [talledLocalContainer]   at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\n[INFO] [talledLocalContainer]   at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)\n[INFO] [talledLocalContainer]   at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\n[INFO] [talledLocalContainer]   at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\n[INFO] [talledLocalContainer]   at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:687)\n[INFO] [talledLocalContainer]   at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\n[INFO] [talledLocalContainer]   at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)\n[INFO] [talledLocalContainer]   at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)\n[INFO] [talledLocalContainer]   at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\n[INFO] [talledLocalContainer]   at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)\n[INFO] [talledLocalContainer]   at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789)\n[INFO] [talledLocalContainer]   at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n[INFO] [talledLocalContainer]   at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\n[INFO] [talledLocalContainer]   at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\n[INFO] [talledLocalContainer]   at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n[INFO] [talledLocalContainer]   at java.base/java.lang.Thread.run(Thread.java:833)\n[INFO] [talledLocalContainer] Caused by: org.hibernate.PropertyAccessException: Exception occurred inside getter of com.pending.model.Company.id\n[INFO] [talledLocalContainer]   at org.hibernate.property.access.spi.GetterMethodImpl.get(GetterMethodImpl.java:45)\n[INFO] [talledLocalContainer]   at org.hibernate.tuple.entity.AbstractEntityTuplizer.getIdentifier(AbstractEntityTuplizer.java:230)\n[INFO] [talledLocalContainer]   at org.hibernate.persister.entity.AbstractEntityPersister.getIdentifier(AbstractEntityPersister.java:5280)\n[INFO] [talledLocalContainer]   at org.hibernate.persister.entity.AbstractEntityPersister.isTransient(AbstractEntityPersister.java:4972)\n[INFO] [talledLocalContainer]   at org.hibernate.engine.internal.ForeignKeys.isTransient(ForeignKeys.java:294)\n[INFO] [talledLocalContainer]   at org.hibernate.event.internal.EntityState.getEntityState(EntityState.java:59)\n[INFO] [talledLocalContainer]   at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.performSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:85)\n[INFO] [talledLocalContainer]   at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:75)\n[INFO] [talledLocalContainer]   at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\n[INFO] [talledLocalContainer]   at org.hibernate.internal.SessionImpl.fireSaveOrUpdate(SessionImpl.java:656)\n[INFO] [talledLocalContainer]   at org.hibernate.internal.SessionImpl.saveOrUpdate(SessionImpl.java:649)\n[INFO] [talledLocalContainer]   at org.hibernate.internal.SessionImpl.saveOrUpdate(SessionImpl.java:644)\n[INFO] [talledLocalContainer]   at org.springframework.orm.hibernate5.HibernateTemplate.lambda$saveOrUpdate$15(HibernateTemplate.java:667)\n[INFO] [talledLocalContainer]   at org.springframework.orm.hibernate5.HibernateTemplate.doExecute(HibernateTemplate.java:367)\n[INFO] [talledLocalContainer]   ... 117 more\n[INFO] [talledLocalContainer] Caused by: java.lang.reflect.InvocationTargetException\n[INFO] [talledLocalContainer]   at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n[INFO] [talledLocalContainer]   at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n[INFO] [talledLocalContainer]   at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n[INFO] [talledLocalContainer]   at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n[INFO] [talledLocalContainer]   at org.hibernate.property.access.spi.GetterMethodImpl.get(GetterMethodImpl.java:42)\n[INFO] [talledLocalContainer]   ... 130 more\n[INFO] [talledLocalContainer] Caused by: java.lang.NullPointerException: Cannot invoke &quot;java.lang.Integer.intValue()&quot; because &quot;this.id&quot; is null\n[INFO] [talledLocalContainer]   at com.pending.model.Company.getId(Company.java:14)\n[INFO] [talledLocalContainer]   ... 135 more\n</code></pre>\n"},{"tags":["java","tomcat","jasper-reports"],"comments":[{"owner":{"account_id":469619,"reputation":22464,"user_id":876298,"display_name":"Alex K"},"score":2,"creation_date":1687882542,"post_id":76565044,"comment_id":134997874,"body_markdown":"Try to remove the old version of `org.eclipse.jdt.core.compiler`","body":"Try to remove the old version of <code>org.eclipse.jdt.core.compiler</code>"}],"owner":{"account_id":15231305,"reputation":126,"user_id":10990361,"display_name":"Marc06210"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":106,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687882565,"creation_date":1687870230,"question_id":76565044,"body_markdown":"I am migrating from spring 4 to 5, and I had to upgrade JasperReport to 6.20.5.\r\n\r\nReports are ok on my local machine but when deployed as a war file on the real tomcat instance I am facing this issue\r\n\r\n     ProgrammeSubreport.jrxml: Errors were encountered when compiling report expressions class file:\r\n    1. Syntax error, static imports are only available if source level is 1.5 or greater\r\n    import static net.sf.jasperreports.functions.standard.LogicalFunctions.EQUALS;\r\n\r\nit seems that the level of my JVM is not correctly identified.\r\nIs there any way to configure tomcat with the correct settings?\r\n\r\nThanks for any help\r\n","title":"jasperreport in tomcat 9 and jdk 8","body":"<p>I am migrating from spring 4 to 5, and I had to upgrade JasperReport to 6.20.5.</p>\n<p>Reports are ok on my local machine but when deployed as a war file on the real tomcat instance I am facing this issue</p>\n<pre><code> ProgrammeSubreport.jrxml: Errors were encountered when compiling report expressions class file:\n1. Syntax error, static imports are only available if source level is 1.5 or greater\nimport static net.sf.jasperreports.functions.standard.LogicalFunctions.EQUALS;\n</code></pre>\n<p>it seems that the level of my JVM is not correctly identified.\nIs there any way to configure tomcat with the correct settings?</p>\n<p>Thanks for any help</p>\n"},{"tags":["java","inheritance","reference","polymorphism","superclass"],"comments":[{"owner":{"account_id":6379952,"reputation":3111,"user_id":4949750,"display_name":"Amongalen"},"score":1,"creation_date":1607009280,"post_id":65128923,"comment_id":115142519,"body_markdown":"When you have a variable of type `Object` you can only perform methods of `Object` on it.","body":"When you have a variable of type <code>Object</code> you can only perform methods of <code>Object</code> on it."},{"owner":{"account_id":9127082,"reputation":2954,"user_id":6790326,"display_name":"Dorian Gray"},"score":0,"creation_date":1607009604,"post_id":65128923,"comment_id":115142699,"body_markdown":"Also, you should never use `new String` here. Just use ``String myString = &quot;hello&quot;;``","body":"Also, you should never use <code>new String</code> here. Just use <code>String myString = &quot;hello&quot;;</code>"}],"answers":[{"tags":[],"owner":{"account_id":55989,"reputation":17809,"user_id":167745,"accept_rate":76,"display_name":"Stewart"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687882004,"creation_date":1687882004,"answer_id":76566764,"question_id":65128923,"body_markdown":"The object you create is the object you create. How you reference it is separate but related.\r\n\r\nIn the code below, `string2` and `string3` are both `String` objects, created the same way.\r\n\r\nSo `string2` is a `String` reference. This allows you to access everything &quot;String-ish&quot; about the object. You can also reference everything &quot;Object-ish&quot; because all `String`s are `Object`s; that is, because `Object` is a superclass (parent) of `String`\r\n\r\nBut `string3` is an `Object` reference, and &quot;does not know&quot; that the object is a `String`. It only knows it is an `Object`. You can only access &quot;Object-ish&quot; fields and methods, not &quot;String-ish&quot; methods. To access &quot;String-ish&quot; methods, you would need to cast the reference to the true class it is. That is what `string4` is.\r\n\r\n----\r\n\r\nAdditionally, `String` has special behaviour within Java. Possibly you should use a different class to clarify the reference concept. (Experiment with your own class heirarchy.)\r\n\r\nYou can create a `String` without using the `new` keyword, but instead using `&quot;string constant&quot;` syntax. This creates the `String` in a special place in memory known as &quot;interned&quot;. All interned `String`s with identical text are the *exact same object* in memory. They are not just equal, they are identical. \r\n\r\nIn the code below, `string1` and `string5` are interned `String`s. The others are not.\r\n\r\n\r\n    public static void main(String[] args) {\r\n\r\n        String string1 = &quot;hello&quot;;\r\n        String string2 = new String(&quot;hello&quot;);\r\n        Object string3 = new String(&quot;hello&quot;);\r\n        String string4 = (String) string3;\r\n        String string5 = new String(&quot;hello&quot;).intern();\r\n        \r\n        System.out.println(string1 == string2); // false\r\n        System.out.println(string1 == string5); // true\r\n        System.out.println(string4 == string3); // true\r\n        \r\n        System.out.println(string1.getClass().equals(string2.getClass())); // true\r\n        System.out.println(string1.getClass().equals(string3.getClass())); // true\r\n        System.out.println(string1.getClass().equals(string5.getClass())); // true\r\n        \r\n        \r\n        System.out.println(string1.equals(string2)); // true\r\n        System.out.println(string1.equals(string3)); // true\r\n        System.out.println(string1.equals(string5)); // true\r\n    }","title":"What the difference between using the class reference type Object and the class reference type String when creating a new string?","body":"<p>The object you create is the object you create. How you reference it is separate but related.</p>\n<p>In the code below, <code>string2</code> and <code>string3</code> are both <code>String</code> objects, created the same way.</p>\n<p>So <code>string2</code> is a <code>String</code> reference. This allows you to access everything &quot;String-ish&quot; about the object. You can also reference everything &quot;Object-ish&quot; because all <code>String</code>s are <code>Object</code>s; that is, because <code>Object</code> is a superclass (parent) of <code>String</code></p>\n<p>But <code>string3</code> is an <code>Object</code> reference, and &quot;does not know&quot; that the object is a <code>String</code>. It only knows it is an <code>Object</code>. You can only access &quot;Object-ish&quot; fields and methods, not &quot;String-ish&quot; methods. To access &quot;String-ish&quot; methods, you would need to cast the reference to the true class it is. That is what <code>string4</code> is.</p>\n<hr />\n<p>Additionally, <code>String</code> has special behaviour within Java. Possibly you should use a different class to clarify the reference concept. (Experiment with your own class heirarchy.)</p>\n<p>You can create a <code>String</code> without using the <code>new</code> keyword, but instead using <code>&quot;string constant&quot;</code> syntax. This creates the <code>String</code> in a special place in memory known as &quot;interned&quot;. All interned <code>String</code>s with identical text are the <em>exact same object</em> in memory. They are not just equal, they are identical.</p>\n<p>In the code below, <code>string1</code> and <code>string5</code> are interned <code>String</code>s. The others are not.</p>\n<pre><code>public static void main(String[] args) {\n\n    String string1 = &quot;hello&quot;;\n    String string2 = new String(&quot;hello&quot;);\n    Object string3 = new String(&quot;hello&quot;);\n    String string4 = (String) string3;\n    String string5 = new String(&quot;hello&quot;).intern();\n    \n    System.out.println(string1 == string2); // false\n    System.out.println(string1 == string5); // true\n    System.out.println(string4 == string3); // true\n    \n    System.out.println(string1.getClass().equals(string2.getClass())); // true\n    System.out.println(string1.getClass().equals(string3.getClass())); // true\n    System.out.println(string1.getClass().equals(string5.getClass())); // true\n    \n    \n    System.out.println(string1.equals(string2)); // true\n    System.out.println(string1.equals(string3)); // true\n    System.out.println(string1.equals(string5)); // true\n}\n</code></pre>\n"}],"owner":{"account_id":18377337,"reputation":21,"user_id":13386149,"display_name":"yusufa22"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687882196,"creation_date":1607009167,"question_id":65128923,"body_markdown":"I have learned that Java string variables are objects and that you can create them by instantiating the `String` class in the `java.lang` package like this:\r\n\r\n    String myString = new String(&quot;hello&quot;);\r\n\r\nWhat is the difference between:\r\n\r\n - Creating a string by instantiating the `String` class using the `String` reference type as above\r\n - And creating a `String` by instantiating the `String` class using an `Object` reference type such as:\r\n\r\n       Object myString = new String(&quot;hello&quot;);\r\n\r\n?","title":"What the difference between using the class reference type Object and the class reference type String when creating a new string?","body":"<p>I have learned that Java string variables are objects and that you can create them by instantiating the <code>String</code> class in the <code>java.lang</code> package like this:</p>\n<pre><code>String myString = new String(&quot;hello&quot;);\n</code></pre>\n<p>What is the difference between:</p>\n<ul>\n<li><p>Creating a string by instantiating the <code>String</code> class using the <code>String</code> reference type as above</p>\n</li>\n<li><p>And creating a <code>String</code> by instantiating the <code>String</code> class using an <code>Object</code> reference type such as:</p>\n<pre><code>Object myString = new String(&quot;hello&quot;);\n</code></pre>\n</li>\n</ul>\n<p>?</p>\n"},{"tags":["java","json","rest","jersey","http-post"],"comments":[{"owner":{"account_id":6349322,"reputation":734,"user_id":4928897,"display_name":"ipper"},"score":1,"creation_date":1502444949,"post_id":45631964,"comment_id":78223092,"body_markdown":"Where is userFile set?","body":"Where is userFile set?"},{"owner":{"account_id":7477099,"reputation":53,"user_id":5683196,"display_name":"Ćepa"},"score":0,"creation_date":1502475157,"post_id":45631964,"comment_id":78242343,"body_markdown":"Sorry, forgot to add that, in the UserService.class constructor","body":"Sorry, forgot to add that, in the UserService.class constructor"},{"owner":{"account_id":7815129,"reputation":3299,"user_id":5910091,"display_name":"ujulu"},"score":0,"creation_date":1502533176,"post_id":45631964,"comment_id":78256807,"body_markdown":"Show us the value of `userFile`; otherwise, we cannot see where you&#39;re trying to write.","body":"Show us the value of <code>userFile</code>; otherwise, we cannot see where you&#39;re trying to write."}],"owner":{"account_id":7477099,"reputation":53,"user_id":5683196,"display_name":"Ćepa"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1034,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687882045,"creation_date":1502444634,"question_id":45631964,"body_markdown":"I have a problem while trying to write a String in .txt file (located in resources) by sending a POST request (Maven Project).\r\n\r\nI have a class called **UserResource.java** in which I wrote a method triggered by request such as: `http://localhost:8080/WebProjekat/users/register`, `/users` is @Path annotation on class level.\r\n   \r\n    @Path(&quot;/register&quot;)\r\n    @POST\r\n    @Produces(MediaType.APPLICATION_JSON)\r\n    @Consumes(MediaType.APPLICATION_JSON)\r\n    public Response registerUser(User user) {\r\n    \tString username;\r\n    \tif(userService.addUser(user)!=null) {\r\n            username = user.getUsername();\r\n    \t\treturn Response.status(Status.CREATED)\r\n    \t\t               .entity(user)\r\n    \t\t\t\t\t   .build();\r\n    \t} else\r\n   \t\t\treturn Response.status(Status.NOT_ACCEPTABLE)\r\n                           .entity(user)\r\n    \t\t\t\t\t   .build();\r\n    }\r\n\r\nIn this method there is a call to another method `userService.addUser(user)` which parses a user object into a String and writes it into a file.\r\n\r\n    public User write(User user) {\r\n    \tSystem.out.println(user);\r\n    \tStringBuilder result = new StringBuilder(&quot;&quot;);\r\n    \tSimpleDateFormat sdfr = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);\r\n    \tString commentIds = &quot;&quot;;\r\n    \tString themeIds = &quot;&quot;;\r\n    \tString sectionIds = &quot;&quot;;\r\n    \t\t\r\n    \tfor(int i=0; i &lt; user.getComments().size();i++) {\r\n    \t\tif(i != user.getComments().size()-1)\r\n    \t\t\tcommentIds+=user.getComments().get(i)+&quot;,&quot;;\r\n    \t\telse\r\n    \t\t\tcommentIds+=user.getComments().get(i);\r\n    \t}\r\n    \t\t\r\n    \tfor(int i=0; i &lt; user.getSavedThemes().size();i++) {\r\n    \t\tif(i != user.getSavedThemes().size()-1)\r\n    \t\t\tthemeIds+=user.getSavedThemes().get(i)+&quot;,&quot;;\r\n    \t\telse\r\n    \t\t\tthemeIds+=user.getSavedThemes().get(i);\r\n    \t}\r\n    \t\t\r\n    \tfor(int i=0; i &lt; user.getListOfSections().size();i++) {\r\n    \t\tif(i != user.getListOfSections().size()-1)\r\n    \t\t\tsectionIds+=user.getListOfSections().get(i)+&quot;,&quot;;\r\n    \t\telse\r\n    \t\t\tsectionIds+=user.getListOfSections().get(i);\r\n    \t}\r\n    \t\t\t\r\n    \tresult.append(user.getUsername())\r\n    \t\t  .append(&quot;|&quot;)\r\n    \t\t  .append(user.getPassword())\r\n    \t\t  .append(&quot;|&quot;)\r\n    \t\t  .append(user.getFirstName())\r\n    \t\t  .append(&quot;|&quot;)\r\n    \t\t  .append(user.getLastName())\r\n    \t      .append(&quot;|&quot;)\r\n    \t\t  .append(user.getPhoneNumber())\r\n    \t\t  .append(&quot;|&quot;)\r\n    \t\t  .append(sdfr.format(user.getRegistrationDate()))\r\n    \t\t  .append(&quot;|&quot;)\r\n    \t\t  .append(commentIds)\r\n    \t\t  .append(&quot;|&quot;)\r\n    \t      .append(themeIds)\r\n    \t      .append(&quot;|&quot;)\r\n    \t      .append(sectionIds);\r\n    \t   \r\n    \ttry {\r\n    \t\tSystem.out.println(result);\r\n    \t    FileWriter outputFileReader = new FileWriter(userFile,true);\r\n    \t\tPrintWriter outputStream = new PrintWriter(outputFileReader);\r\n    \t\toutputStream.println(result);\r\n    \t\t\r\n    \t    outputStream.close();\r\n    \t\t\t\r\n    \t\treturn user;\r\n    \t} catch(IOException ex) {\r\n    \t\tex.printStackTrace();\r\n    \t}\r\n    \t\t\r\n    \treturn null;\r\n    }\r\n\r\nThis is the JSON object that I wrote in Request Body in Postman:\r\n\r\n    {\r\n        &quot;comments&quot;: [\r\n            &quot;16&quot;,\r\n            &quot;18&quot;,\r\n            &quot;222&quot;\r\n        ],\r\n        &quot;firstName&quot;: &quot;Milos&quot;,\r\n        &quot;lastName&quot;: &quot;Ribar&quot;,\r\n        &quot;listOfSections&quot;: [\r\n            &quot;Section6&quot;\r\n        ],\r\n        &quot;password&quot;: &quot;riki995&quot;,\r\n        &quot;phoneNumber&quot;: &quot;0651941929&quot;,\r\n        &quot;registrationDate&quot;: &quot;2017-08-10T00:00:00&quot;,\r\n        &quot;savedThemes&quot;: [],\r\n        &quot;username&quot;: &quot;Riki&quot;\r\n    }\r\n\r\nNOTE: I also added a key-value pair : `Content-Type - application/json` in Header section of Postman.\r\n\r\nAfter I send this request, JERSEY successfully finds the class and the method it needs to call, it makes contact with the Server and the Server sends me a response with `Status code : 201 Created` and like I asked a JSON object in a Response Body. \r\nDespite all of that the changes are not made in the file which is located:\r\n\r\n    -WebProjekat\r\n        -src\r\n           -main\r\n              -resources\r\n                 -files\r\n                    -users.txt\r\n\r\nI printed out the String right before I tried to write it into a file to check if it reaches the `outStream.println(result)` line and it does.","title":"Sending POST request to write in .txt file, response is 201 CREATED but file remains unmodified","body":"<p>I have a problem while trying to write a String in .txt file (located in resources) by sending a POST request (Maven Project).</p>\n<p>I have a class called <strong>UserResource.java</strong> in which I wrote a method triggered by request such as: <code>http://localhost:8080/WebProjekat/users/register</code>, <code>/users</code> is @Path annotation on class level.</p>\n<pre><code>@Path(&quot;/register&quot;)\n@POST\n@Produces(MediaType.APPLICATION_JSON)\n@Consumes(MediaType.APPLICATION_JSON)\npublic Response registerUser(User user) {\n    String username;\n    if(userService.addUser(user)!=null) {\n        username = user.getUsername();\n        return Response.status(Status.CREATED)\n                       .entity(user)\n                       .build();\n    } else\n        return Response.status(Status.NOT_ACCEPTABLE)\n                       .entity(user)\n                       .build();\n}\n</code></pre>\n<p>In this method there is a call to another method <code>userService.addUser(user)</code> which parses a user object into a String and writes it into a file.</p>\n<pre><code>public User write(User user) {\n    System.out.println(user);\n    StringBuilder result = new StringBuilder(&quot;&quot;);\n    SimpleDateFormat sdfr = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);\n    String commentIds = &quot;&quot;;\n    String themeIds = &quot;&quot;;\n    String sectionIds = &quot;&quot;;\n        \n    for(int i=0; i &lt; user.getComments().size();i++) {\n        if(i != user.getComments().size()-1)\n            commentIds+=user.getComments().get(i)+&quot;,&quot;;\n        else\n            commentIds+=user.getComments().get(i);\n    }\n        \n    for(int i=0; i &lt; user.getSavedThemes().size();i++) {\n        if(i != user.getSavedThemes().size()-1)\n            themeIds+=user.getSavedThemes().get(i)+&quot;,&quot;;\n        else\n            themeIds+=user.getSavedThemes().get(i);\n    }\n        \n    for(int i=0; i &lt; user.getListOfSections().size();i++) {\n        if(i != user.getListOfSections().size()-1)\n            sectionIds+=user.getListOfSections().get(i)+&quot;,&quot;;\n        else\n            sectionIds+=user.getListOfSections().get(i);\n    }\n            \n    result.append(user.getUsername())\n          .append(&quot;|&quot;)\n          .append(user.getPassword())\n          .append(&quot;|&quot;)\n          .append(user.getFirstName())\n          .append(&quot;|&quot;)\n          .append(user.getLastName())\n          .append(&quot;|&quot;)\n          .append(user.getPhoneNumber())\n          .append(&quot;|&quot;)\n          .append(sdfr.format(user.getRegistrationDate()))\n          .append(&quot;|&quot;)\n          .append(commentIds)\n          .append(&quot;|&quot;)\n          .append(themeIds)\n          .append(&quot;|&quot;)\n          .append(sectionIds);\n       \n    try {\n        System.out.println(result);\n        FileWriter outputFileReader = new FileWriter(userFile,true);\n        PrintWriter outputStream = new PrintWriter(outputFileReader);\n        outputStream.println(result);\n        \n        outputStream.close();\n            \n        return user;\n    } catch(IOException ex) {\n        ex.printStackTrace();\n    }\n        \n    return null;\n}\n</code></pre>\n<p>This is the JSON object that I wrote in Request Body in Postman:</p>\n<pre><code>{\n    &quot;comments&quot;: [\n        &quot;16&quot;,\n        &quot;18&quot;,\n        &quot;222&quot;\n    ],\n    &quot;firstName&quot;: &quot;Milos&quot;,\n    &quot;lastName&quot;: &quot;Ribar&quot;,\n    &quot;listOfSections&quot;: [\n        &quot;Section6&quot;\n    ],\n    &quot;password&quot;: &quot;riki995&quot;,\n    &quot;phoneNumber&quot;: &quot;0651941929&quot;,\n    &quot;registrationDate&quot;: &quot;2017-08-10T00:00:00&quot;,\n    &quot;savedThemes&quot;: [],\n    &quot;username&quot;: &quot;Riki&quot;\n}\n</code></pre>\n<p>NOTE: I also added a key-value pair : <code>Content-Type - application/json</code> in Header section of Postman.</p>\n<p>After I send this request, JERSEY successfully finds the class and the method it needs to call, it makes contact with the Server and the Server sends me a response with <code>Status code : 201 Created</code> and like I asked a JSON object in a Response Body.\nDespite all of that the changes are not made in the file which is located:</p>\n<pre><code>-WebProjekat\n    -src\n       -main\n          -resources\n             -files\n                -users.txt\n</code></pre>\n<p>I printed out the String right before I tried to write it into a file to check if it reaches the <code>outStream.println(result)</code> line and it does.</p>\n"},{"tags":["python","java","arrays","numpy","numerical-methods"],"comments":[{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1687838228,"post_id":76561486,"comment_id":134988777,"body_markdown":"Please show a [mcve], including but not limited to, what are the contents of the byte array you are trying to unpack? What are the expected results? What is the actual result? Please show a *minimal* example that reproduces the problem, and not the thousands of bytes that you are actually using.","body":"Please show a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, including but not limited to, what are the contents of the byte array you are trying to unpack? What are the expected results? What is the actual result? Please show a <i>minimal</i> example that reproduces the problem, and not the thousands of bytes that you are actually using."},{"owner":{"account_id":23669032,"reputation":51,"user_id":17696091,"display_name":"newbie5050"},"score":0,"creation_date":1687838441,"post_id":76561486,"comment_id":134988796,"body_markdown":"thanks @ Sweeper but how can I submit the byte array here?","body":"thanks @ Sweeper but how can I submit the byte array here?"},{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":1,"creation_date":1687838896,"post_id":76561486,"comment_id":134988842,"body_markdown":"Actually never mind. 3221234265 is the unsigned value of -1073733031. There are no unsigned integers in Java, but you can use `Integer.toUnsignedLong` to convert it to a `long`. See [this](https://stackoverflow.com/questions/9854166/declaring-an-unsigned-int-in-java) for more info.","body":"Actually never mind. 3221234265 is the unsigned value of -1073733031. There are no unsigned integers in Java, but you can use <code>Integer.toUnsignedLong</code> to convert it to a <code>long</code>. See <a href=\"https://stackoverflow.com/questions/9854166/declaring-an-unsigned-int-in-java\">this</a> for more info."},{"owner":{"account_id":23669032,"reputation":51,"user_id":17696091,"display_name":"newbie5050"},"score":0,"creation_date":1687839206,"post_id":76561486,"comment_id":134988868,"body_markdown":"@ Sweeper. Do you mean converting negative integers to Integer.toUnsignedLong?","body":"@ Sweeper. Do you mean converting negative integers to Integer.toUnsignedLong?"},{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1687839337,"post_id":76561486,"comment_id":134988879,"body_markdown":"You can use that with all integers, not just negative ones. It converts all `int`s to non-negative `long`s.","body":"You can use that with all integers, not just negative ones. It converts all <code>int</code>s to non-negative <code>long</code>s."},{"owner":{"account_id":23669032,"reputation":51,"user_id":17696091,"display_name":"newbie5050"},"score":0,"creation_date":1687839492,"post_id":76561486,"comment_id":134988891,"body_markdown":"@Sweeper. Thanks, it worked! Is there any way to convert all integers without a for-loop iteration?","body":"@Sweeper. Thanks, it worked! Is there any way to convert all integers without a for-loop iteration?"},{"owner":{"account_id":23669032,"reputation":51,"user_id":17696091,"display_name":"newbie5050"},"score":0,"creation_date":1687839572,"post_id":76561486,"comment_id":134988903,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/254260/discussion-between-newbie5050-and-sweeper).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/254260/discussion-between-newbie5050-and-sweeper\">continue this discussion in chat</a>."}],"owner":{"account_id":23669032,"reputation":51,"user_id":17696091,"display_name":"newbie5050"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1687838924,"answer_count":0,"score":0,"last_activity_date":1687881811,"creation_date":1687837684,"question_id":76561486,"body_markdown":"Following [the similar question][1], I am trying to implement the unpack method in Java for Integer:\r\n\r\nSample byte array input: chunkByte[1219:1240] = [64, 30, 31, 0, 64, 118, 31, 0, 64, -22, 29, 0, 64, 4, 30, 0, 64, 26, 36, 0, 64] where \r\n\r\nCode in Python:\r\n``` \r\n    fid = open(raw_file, &#39;rb&#39;)\r\n    fid.seek(0, os.SEEK_END)\r\n    nFileLen = fid.tell()\r\n    fid.seek(0, 0)\r\n    \r\n    chunk_size = 2 ** 19\r\n    n = int(nFileLen / chunk_size)\r\n\r\n    for i in range(0, n):\r\n        nLenVals = round(chunk_size / 4)\r\n        vals = struct.unpack(&#39;I&#39; * nLenVals, fid.read(chunk_size))\r\n```  \r\nIn Java:\r\n``` \r\nvals = (int[]) unpack(&#39;I&#39;, chunk_size / 4, chunkByte);\r\n``` \r\nwhere\r\n``` \r\n    private Object unpack(char type, int dim, byte[] chunkByte) {\r\n        if (type == &#39;f&#39;) {\r\n            var floats = ByteBuffer.wrap(chunkByte).order(ByteOrder.LITTLE_ENDIAN).asFloatBuffer();\r\n            var floatArray = new float[dim];\r\n            floats.get(floatArray);\r\n            return floatArray;\r\n        } else if (type == &#39;I&#39;) {\r\n            var ints = ByteBuffer.wrap(chunkByte).order(ByteOrder.nativeOrder()).asIntBuffer();\r\n            var intArray = new int[dim];\r\n            ints.get(intArray);\r\n            return intArray;\r\n        }\r\n        return null;\r\n    }\r\n``` \r\nI get negative results for the same byte arrays (byte[] chunkByte).\r\n\r\nFor example, in Python, I get this value: vals[1220]=**3221234265**. But I get the wrong value for the similar index: vals[1220]=**-1073733031**.\r\n\r\nI tried changing ***nativeOrder()*** to ***LITTLE_ENDIAN*** but it didn&#39;t help.\r\n\r\n  [1]: https://stackoverflow.com/questions/75944653/how-to-implement-struct-unpack-in-java-with-float-type","title":"How to implement struct.unpack in Java with Integer type?","body":"<p>Following <a href=\"https://stackoverflow.com/questions/75944653/how-to-implement-struct-unpack-in-java-with-float-type\">the similar question</a>, I am trying to implement the unpack method in Java for Integer:</p>\n<p>Sample byte array input: chunkByte[1219:1240] = [64, 30, 31, 0, 64, 118, 31, 0, 64, -22, 29, 0, 64, 4, 30, 0, 64, 26, 36, 0, 64] where</p>\n<p>Code in Python:</p>\n<pre><code>    fid = open(raw_file, 'rb')\n    fid.seek(0, os.SEEK_END)\n    nFileLen = fid.tell()\n    fid.seek(0, 0)\n    \n    chunk_size = 2 ** 19\n    n = int(nFileLen / chunk_size)\n\n    for i in range(0, n):\n        nLenVals = round(chunk_size / 4)\n        vals = struct.unpack('I' * nLenVals, fid.read(chunk_size))\n</code></pre>\n<p>In Java:</p>\n<pre><code>vals = (int[]) unpack('I', chunk_size / 4, chunkByte);\n</code></pre>\n<p>where</p>\n<pre><code>    private Object unpack(char type, int dim, byte[] chunkByte) {\n        if (type == 'f') {\n            var floats = ByteBuffer.wrap(chunkByte).order(ByteOrder.LITTLE_ENDIAN).asFloatBuffer();\n            var floatArray = new float[dim];\n            floats.get(floatArray);\n            return floatArray;\n        } else if (type == 'I') {\n            var ints = ByteBuffer.wrap(chunkByte).order(ByteOrder.nativeOrder()).asIntBuffer();\n            var intArray = new int[dim];\n            ints.get(intArray);\n            return intArray;\n        }\n        return null;\n    }\n</code></pre>\n<p>I get negative results for the same byte arrays (byte[] chunkByte).</p>\n<p>For example, in Python, I get this value: vals[1220]=<strong>3221234265</strong>. But I get the wrong value for the similar index: vals[1220]=<strong>-1073733031</strong>.</p>\n<p>I tried changing <em><strong>nativeOrder()</strong></em> to <em><strong>LITTLE_ENDIAN</strong></em> but it didn't help.</p>\n"},{"tags":["java","jar"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1687883800,"post_id":76566723,"comment_id":134998179,"body_markdown":"*InputStream inputStream = getClass().getResourceAsStream(&quot;/sounds/music/MainThemes&quot;);* is not going to work. That, by definition of your code which follows, is a resource *folder*. What I *think* your purpose is can be fulfilled by making that something like `InputStream inputStream = getClass().getResourceAsStream(&quot;/sounds/music/MainThemes/index.txt&quot;);` and reading your real resource paths out of *that*","body":"<i>InputStream inputStream = getClass().getResourceAsStream(&quot;/sounds/music/MainThemes&quot;);</i> is not going to work. That, by definition of your code which follows, is a resource <i>folder</i>. What I <i>think</i> your purpose is can be fulfilled by making that something like <code>InputStream inputStream = getClass().getResourceAsStream(&quot;&#47;sounds&#47;music&#47;MainThemes&#47;ind&zwnj;&#8203;ex.txt&quot;);</code> and reading your real resource paths out of <i>that</i>"},{"owner":{"account_id":25660848,"reputation":5,"user_id":19426609,"display_name":"Shodan4004"},"score":0,"creation_date":1687906051,"post_id":76566723,"comment_id":135002015,"body_markdown":"g00se response fixed it thanks","body":"g00se response fixed it thanks"}],"owner":{"account_id":25660848,"reputation":5,"user_id":19426609,"display_name":"Shodan4004"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687881665,"creation_date":1687881665,"question_id":76566723,"body_markdown":"When i run the app in VSC it all works fine but when i generate the jar and execute it, doesnt seem to read the file as it supposed to be. I read lot of questions similar but i still cant find the solution.\r\n\r\nBasically I have to read all the .mp3 files from the folder &quot;/sounds/music/MainThemes&quot;, and add them to the list: &quot;mainThemeMediaList&quot;.\r\nThe prints ( --- number --) i&#39;m using as logging and when I run the Jar it prints me up to --- 2 --- and does not enter the while loop.\r\nIt seems that the buff read does not read the stream and thus results in null, and the list does not fill.\r\nI am new to java so any help is appreciated.\r\n\r\n``` \r\n    private void loadMainThemes() throws AudioLoadingException {\r\n        try {\r\n            System.out.println(&quot;--- 1 ---&quot;);\r\n            InputStream inputStream = getClass().getResourceAsStream(&quot;/sounds/music/MainThemes&quot;);\r\n            System.out.println(inputStream);\r\n            if (inputStream != null) {\r\n                BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream));\r\n                System.out.println(reader);\r\n                String line;\r\n                System.out.println(&quot;--- 2 ---&quot;);\r\n                while ((line = reader.readLine()) != null) {\r\n                    System.out.println(&quot;--- 3 ---&quot;);\r\n                    if (line.endsWith(&quot;.mp3&quot;)) {\r\n                        System.out.println(&quot;--- 4 ---&quot;);\r\n                        Media media = new Media(getClass().getResource(&quot;/sounds/music/MainThemes/&quot; + line).toString());\r\n                        System.out.println(&quot;--- 5 ---&quot;);\r\n                        mainThemeMediaList.add(media);\r\n                    }\r\n                }\r\n            } else {\r\n                throw new AudioLoadingException(&quot;MainThemes resource not found.&quot;);\r\n            }\r\n        } catch (IOException e) {\r\n            throw new AudioLoadingException(&quot;Failed to load MainThemes. &quot; + e.getMessage());\r\n        }\r\n    }\r\n\r\n``` ","title":"Executable java jar can&#39;t find resources path","body":"<p>When i run the app in VSC it all works fine but when i generate the jar and execute it, doesnt seem to read the file as it supposed to be. I read lot of questions similar but i still cant find the solution.</p>\n<p>Basically I have to read all the .mp3 files from the folder &quot;/sounds/music/MainThemes&quot;, and add them to the list: &quot;mainThemeMediaList&quot;.\nThe prints ( --- number --) i'm using as logging and when I run the Jar it prints me up to --- 2 --- and does not enter the while loop.\nIt seems that the buff read does not read the stream and thus results in null, and the list does not fill.\nI am new to java so any help is appreciated.</p>\n<pre><code>    private void loadMainThemes() throws AudioLoadingException {\n        try {\n            System.out.println(&quot;--- 1 ---&quot;);\n            InputStream inputStream = getClass().getResourceAsStream(&quot;/sounds/music/MainThemes&quot;);\n            System.out.println(inputStream);\n            if (inputStream != null) {\n                BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream));\n                System.out.println(reader);\n                String line;\n                System.out.println(&quot;--- 2 ---&quot;);\n                while ((line = reader.readLine()) != null) {\n                    System.out.println(&quot;--- 3 ---&quot;);\n                    if (line.endsWith(&quot;.mp3&quot;)) {\n                        System.out.println(&quot;--- 4 ---&quot;);\n                        Media media = new Media(getClass().getResource(&quot;/sounds/music/MainThemes/&quot; + line).toString());\n                        System.out.println(&quot;--- 5 ---&quot;);\n                        mainThemeMediaList.add(media);\n                    }\n                }\n            } else {\n                throw new AudioLoadingException(&quot;MainThemes resource not found.&quot;);\n            }\n        } catch (IOException e) {\n            throw new AudioLoadingException(&quot;Failed to load MainThemes. &quot; + e.getMessage());\n        }\n    }\n\n</code></pre>\n"},{"tags":["java","xml","spring"],"answers":[{"tags":[],"owner":{"account_id":12007582,"reputation":101,"user_id":8785434,"display_name":"Nguyen Tung"},"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1687881347,"creation_date":1687881347,"answer_id":76566680,"question_id":76566559,"body_markdown":"To fix this issue, you could add the method ```setter``` for &quot;city&quot; field in the &quot;Address&quot;:\r\n```java\r\npublic void setCity(String city) {\r\n    this.city = city;\r\n}\r\n```\r\nOr you could create a constructor of class Address:\r\n```java\r\npublic Address(String city) {\r\n    this.city = city;\r\n}\r\n\r\n\r\n```\r\nYou got this issue because Spring tries to create an instance of the &quot;Address&quot; object for the &quot;add&quot; bean, but the &quot;Address&quot; class does not have a constructor or setter method for the &quot;city&quot; property.\r\nI hope this help!","title":"In my application one class cannot be found whose reference I have added in another class","body":"<p>To fix this issue, you could add the method <code>setter</code> for &quot;city&quot; field in the &quot;Address&quot;:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void setCity(String city) {\n    this.city = city;\n}\n</code></pre>\n<p>Or you could create a constructor of class Address:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public Address(String city) {\n    this.city = city;\n}\n\n\n</code></pre>\n<p>You got this issue because Spring tries to create an instance of the &quot;Address&quot; object for the &quot;add&quot; bean, but the &quot;Address&quot; class does not have a constructor or setter method for the &quot;city&quot; property.\nI hope this help!</p>\n"}],"owner":{"display_name":"user17788823"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76566680,"answer_count":1,"score":0,"last_activity_date":1687881347,"creation_date":1687880513,"question_id":76566559,"body_markdown":"Error creating bean with name &#39;person&#39; defined in class path resource [config.xml]: Cannot resolve reference to bean &#39;add&#39; while setting bean property &#39;address&#39;\r\n\r\n\r\n\r\nI am getting the above error but cannot understand why it is hapenning.\r\nAll of my classes are in the same package.\r\n\r\nBelow is my config file:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot; http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;\r\n\r\n&lt;bean class=&quot;com.lcwd.withoutboot.Person&quot; id=&quot;person&quot;&gt;\r\n    &lt;property name=&quot;name&quot; value=&quot;Sourabh&quot;/&gt;\r\n    &lt;property name=&quot;address&quot; ref=&quot;add&quot;/&gt;\r\n&lt;/bean&gt;\r\n\r\n&lt;bean class=&quot;com.lcwd.withoutboot.Address&quot; id=&quot;add&quot;&gt;\r\n    &lt;property name=&quot;city&quot; value=&quot;Mumbai&quot;/&gt;\r\n&lt;/bean&gt;\r\n&lt;/beans&gt;\r\n```\r\n\r\nApp.java\r\n```\r\npublic class App \r\n{ \r\npublic static void main( String[] args ) { \r\nApplicationContext context=new ClassPathXmlApplicationContext(&quot;config.xml&quot;); System.out.println( &quot;Hello World!&quot; ); \r\nPerson person=context.getBean(&quot;person&quot;, Person.class);\r\n System.out.println(person.getName());\r\n System.out.println(person.getAddress()); \r\n} \r\n}\r\n```\r\n\r\nPerson.java\r\n```\r\npackage com.lcwd.withoutboot;\r\npublic class Person { Address address;\r\n\r\npublic Address getAddress() {\r\n    return address;\r\n}\r\n\r\npublic void setAddress(Address address) {\r\n    this.address = address;\r\n}\r\n\r\nString name;\r\n\r\npublic String getName() {\r\n    return name;\r\n}\r\n\r\npublic void setName(String name) {\r\n    this.name = name;\r\n}\r\n}\r\n```\r\n\r\nAddress.java\r\n```\r\npackage com.lcwd.withoutboot;\r\npublic class Address { String city;\r\n\r\n@Override\r\npublic String toString() {\r\n    return &quot;Address{&quot; +\r\n            &quot;city=&#39;&quot; + city + &#39;\\&#39;&#39; +\r\n            &#39;}&#39;;\r\n}\r\n}\r\n```\r\n\r\npom.xml\r\n```\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n  &lt;groupId&gt;com.lcwd.withoutboot&lt;/groupId&gt;\r\n  &lt;artifactId&gt;SpringWithoutBoot&lt;/artifactId&gt;\r\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n  &lt;packaging&gt;jar&lt;/packaging&gt;\r\n\r\n  &lt;name&gt;SpringWithoutBoot&lt;/name&gt;\r\n  &lt;url&gt;http://maven.apache.org&lt;/url&gt;\r\n\r\n  &lt;properties&gt;\r\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\r\n    &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\r\n  &lt;/properties&gt;\r\n\r\n  &lt;dependencies&gt;\r\n    &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-context --&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\r\n      &lt;version&gt;6.0.9&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-core --&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\r\n      &lt;version&gt;6.0.9&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;junit&lt;/groupId&gt;\r\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n      &lt;version&gt;3.8.1&lt;/version&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n  &lt;/dependencies&gt;\r\n&lt;/project&gt;\r\n```","title":"In my application one class cannot be found whose reference I have added in another class","body":"<p>Error creating bean with name 'person' defined in class path resource [config.xml]: Cannot resolve reference to bean 'add' while setting bean property 'address'</p>\n<p>I am getting the above error but cannot understand why it is hapenning.\nAll of my classes are in the same package.</p>\n<p>Below is my config file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot; http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;\n\n&lt;bean class=&quot;com.lcwd.withoutboot.Person&quot; id=&quot;person&quot;&gt;\n    &lt;property name=&quot;name&quot; value=&quot;Sourabh&quot;/&gt;\n    &lt;property name=&quot;address&quot; ref=&quot;add&quot;/&gt;\n&lt;/bean&gt;\n\n&lt;bean class=&quot;com.lcwd.withoutboot.Address&quot; id=&quot;add&quot;&gt;\n    &lt;property name=&quot;city&quot; value=&quot;Mumbai&quot;/&gt;\n&lt;/bean&gt;\n&lt;/beans&gt;\n</code></pre>\n<p>App.java</p>\n<pre><code>public class App \n{ \npublic static void main( String[] args ) { \nApplicationContext context=new ClassPathXmlApplicationContext(&quot;config.xml&quot;); System.out.println( &quot;Hello World!&quot; ); \nPerson person=context.getBean(&quot;person&quot;, Person.class);\n System.out.println(person.getName());\n System.out.println(person.getAddress()); \n} \n}\n</code></pre>\n<p>Person.java</p>\n<pre><code>package com.lcwd.withoutboot;\npublic class Person { Address address;\n\npublic Address getAddress() {\n    return address;\n}\n\npublic void setAddress(Address address) {\n    this.address = address;\n}\n\nString name;\n\npublic String getName() {\n    return name;\n}\n\npublic void setName(String name) {\n    this.name = name;\n}\n}\n</code></pre>\n<p>Address.java</p>\n<pre><code>package com.lcwd.withoutboot;\npublic class Address { String city;\n\n@Override\npublic String toString() {\n    return &quot;Address{&quot; +\n            &quot;city='&quot; + city + '\\'' +\n            '}';\n}\n}\n</code></pre>\n<p>pom.xml</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n  &lt;groupId&gt;com.lcwd.withoutboot&lt;/groupId&gt;\n  &lt;artifactId&gt;SpringWithoutBoot&lt;/artifactId&gt;\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n  &lt;packaging&gt;jar&lt;/packaging&gt;\n\n  &lt;name&gt;SpringWithoutBoot&lt;/name&gt;\n  &lt;url&gt;http://maven.apache.org&lt;/url&gt;\n\n  &lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n  &lt;/properties&gt;\n\n  &lt;dependencies&gt;\n    &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-context --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n      &lt;version&gt;6.0.9&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-core --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n      &lt;version&gt;6.0.9&lt;/version&gt;\n    &lt;/dependency&gt;\n\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;junit&lt;/groupId&gt;\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\n      &lt;version&gt;3.8.1&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","amazon-web-services","amazon-cloudwatchlogs"],"comments":[{"owner":{"account_id":2843847,"reputation":55833,"user_id":2442804,"accept_rate":80,"display_name":"luk2302"},"score":3,"creation_date":1687881222,"post_id":76566632,"comment_id":134997568,"body_markdown":"Cloudwatch logs is slow to query. And you query twice, once to get the number of logs and then to iterate over them, certainly not a good idea.","body":"Cloudwatch logs is slow to query. And you query twice, once to get the number of logs and then to iterate over them, certainly not a good idea."}],"owner":{"account_id":3483162,"reputation":456,"user_id":2914693,"accept_rate":48,"display_name":"j8d"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1687881006,"creation_date":1687881006,"question_id":76566632,"body_markdown":"The following code is taking 60 seconds or more to retrieve no more than a dozen short log events. \r\n\r\nAny implicit inefficiencies in my code?\r\n\r\n    public List&lt;String&gt; getCWLogEvents(String logGroupName, String logStreamNamePrefix, Long startTime, Long endTime) {\r\n    \r\n        List&lt;String&gt; logMessages = new LinkedList&lt;String&gt;();\r\n    \r\n        try {\r\n            FilterLogEventsRequest filterLogEventsRequest = FilterLogEventsRequest.builder()\r\n                    .logGroupName(logGroupName)\r\n                    .logStreamNamePrefix(logStreamNamePrefix)\r\n                    .startTime(startTime)\r\n                    .endTime(endTime)\r\n                    .build();\r\n    \r\n            int logLimit = this.cloudWatchLogsClient.filterLogEvents(filterLogEventsRequest).events().size();\r\n    \r\n            for (int c = 0; c &lt; logLimit; c++) {\r\n                logMessages.add(\r\n                        this.cloudWatchLogsClient.filterLogEvents(filterLogEventsRequest).events().get(c).message());\r\n            }\r\n    \r\n            return logMessages;\r\n    \r\n        } catch (CloudWatchException e) {\r\n            log.error(e.awsErrorDetails().errorMessage());\r\n        }\r\n    \r\n        return Collections.emptyList();\r\n    }","title":"Make FilterLogEventsRequest more efficient","body":"<p>The following code is taking 60 seconds or more to retrieve no more than a dozen short log events.</p>\n<p>Any implicit inefficiencies in my code?</p>\n<pre><code>public List&lt;String&gt; getCWLogEvents(String logGroupName, String logStreamNamePrefix, Long startTime, Long endTime) {\n\n    List&lt;String&gt; logMessages = new LinkedList&lt;String&gt;();\n\n    try {\n        FilterLogEventsRequest filterLogEventsRequest = FilterLogEventsRequest.builder()\n                .logGroupName(logGroupName)\n                .logStreamNamePrefix(logStreamNamePrefix)\n                .startTime(startTime)\n                .endTime(endTime)\n                .build();\n\n        int logLimit = this.cloudWatchLogsClient.filterLogEvents(filterLogEventsRequest).events().size();\n\n        for (int c = 0; c &lt; logLimit; c++) {\n            logMessages.add(\n                    this.cloudWatchLogsClient.filterLogEvents(filterLogEventsRequest).events().get(c).message());\n        }\n\n        return logMessages;\n\n    } catch (CloudWatchException e) {\n        log.error(e.awsErrorDetails().errorMessage());\n    }\n\n    return Collections.emptyList();\n}\n</code></pre>\n"},{"tags":["java","android","permissions"],"owner":{"account_id":27262600,"reputation":1,"user_id":20785220,"display_name":"thunderkat211"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687880803,"creation_date":1687880803,"question_id":76566601,"body_markdown":"Hoping someone can help me with an ongoing frustrating issue with trying to publish one of my Android Apps written in Java to the Google Playstore. Everytime I try to publish it to the Google Playstore, I receive a rejection letter (from what feels like an automated rejection letter from their compliancy department.)\r\n\r\nBelow is the letter from Google, my code in question, and my Android Manifest listing the permissions. I have tried at least 20 attempts to modify the code to be compliant and each time no matter what I changed, it has failed to get past their filters. Anyone know anything about how to implement code on making your phone a default phone handler or can anyone se what is wrong with my default handler situation?\r\n\r\n&quot;Letter from Playstore&quot;\r\n\r\n**Issue with your app\r\n\r\n**After reviewing your app, we found that it doesn’t comply with the Permissions and APIs that Access Sensitive Information policy. An app can use Call Log or SMS permissions only when it is acting as a designated default handler or its core functionality falls within a permitted use case.\r\nApps must be actively registered as the default SMS, Phone, or Assistant handler before prompting users to accept any SMS or Call Log permissions. Those apps must immediately stop using the permission when they’re no longer the default handler.\r\nYou declared default Phone handling in your declaration form, but your app isn’t the registered default handler for phone or its other core functionality.\r\n\r\nI have tried to change the order in which the permission request present themselves. As of now I have the default handler prompt showing up first and if the user opts NO, the app doesnt work. I cannot understand what can be more compliant than that.\r\n\r\n```\r\n\r\n//my code\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.core.content.ContextCompat;\r\nimport android.Manifest;\r\nimport android.app.AlertDialog;\r\nimport android.app.NotificationManager;\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.content.SharedPreferences;\r\nimport android.content.pm.PackageManager;\r\nimport android.graphics.Color;\r\nimport android.media.AudioManager;\r\nimport android.os.Build;\r\nimport android.os.Bundle;\r\nimport android.provider.Settings;\r\nimport android.telecom.TelecomManager;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.ImageButton;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n    private TextView currentStateTV;\r\n    private ImageButton ringtoneIB;\r\n\r\n    private AudioManager audioManager;\r\n    private int currentMode;\r\n    private static final int PERMISSION_REQUEST_CODE = 1;\r\n    private static final String SHARED_PREFS_NAME = &quot;MyPrefs&quot;;\r\n    private static final String KEY_SHARED_SETTING_EXECUTED = &quot;sharedSettingExecuted&quot;;\r\n\r\n    private boolean isSharedSettingExecuted = false;\r\n    private TelecomManager telecomManager;\r\n    private SharedPreferences sharedPreferences;\r\n    private boolean isPermissionGranted = false; // Added flag to track permission status\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n    super.onCreate(savedInstanceState);\r\n    setContentView(R.layout.activity_main);\r\n\r\n    currentStateTV = findViewById(R.id.currentStateTV);\r\n    ringtoneIB = findViewById(R.id.ringer);\r\n    audioManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);\r\n\r\n    sharedPreferences = getSharedPreferences(SHARED_PREFS_NAME, MODE_PRIVATE);\r\n    isSharedSettingExecuted = sharedPreferences.getBoolean(KEY_SHARED_SETTING_EXECUTED, false);\r\n\r\n    telecomManager = (TelecomManager) getSystemService(Context.TELECOM_SERVICE);\r\n    boolean isDefaultDialer = getPackageName().equals(telecomManager.getDefaultDialerPackage());\r\n\r\n   ** if (!isDefaultDialer &amp;&amp; !isSharedSettingExecuted) {\r\n    AlertDialog.Builder builder = new AlertDialog.Builder(this);\r\n    builder.setTitle(&quot;Set as Default Phone App&quot;);\r\n    builder.setMessage(&quot;Would you like to set this app as your default phone app?&quot;);\r\n    builder.setPositiveButton(&quot;Yes&quot;, (dialog, which) -&gt; {\r\n    Intent intent = new Intent(TelecomManager.ACTION_CHANGE_DEFAULT_DIALER);\r\n    intent.putExtra(TelecomManager.EXTRA_CHANGE_DEFAULT_DIALER_PACKAGE_NAME, getPackageName());\r\n    startActivity(intent);\r\n    performCodeBlock2();});\r\n\r\n    builder.setNegativeButton(&quot;No&quot;, (dialog, which) -&gt; {\r\n    Toast.makeText(MainActivity.this, &quot;App is not set as the default phone handler&quot;,  \r\n\r\n    Toast.LENGTH_SHORT).show();});\r\n    builder.show();} else {\r\n    performCodeBlock2();}**\r\n\r\n    // Set up OnClickListener for ringtoneIB\r\n    ringtoneIB.setOnClickListener(v -&gt; {\r\n    audioManager.setRingerMode(AudioManager.RINGER_MODE_NORMAL);\r\n    Toast.makeText(MainActivity.this, &quot;Ringtone Mode Activated..&quot;, Toast.LENGTH_SHORT).show();\r\n    currentStateTV.setText(&quot;Ringtone Mode Activated..&quot;);});\r\n\r\n    // Set up OnClickListener for button\r\n    Button button = findViewById(R.id.button);\r\n    button.setOnClickListener(v -&gt; {\r\n\r\n\r\n    Intent intentLoadNewActivity = new Intent(MainActivity.this, NewActivity.class);\r\n    startActivity(intentLoadNewActivity);\r\n    });\r\n\r\n    // Set up OnClickListener for hideButton\r\n    ImageButton hideButton = findViewById(R.id.hideme);\r\n    hideButton.setOnClickListener(view -&gt; {\r\n    audioManager.setRingerMode(AudioManager.RINGER_MODE_SILENT);\r\n    currentStateTV.setText(&quot;Ringtone Mode Silent (APP RUNNING)&quot;);\r\n    currentStateTV.setTextColor(Color.parseColor(&quot;#FFFFFF&quot;));\r\n\r\n    if (ContextCompat.checkSelfPermission(this, Manifest.permission.READ_CALL_LOG) != \r\n\r\n    PackageManager.PERMISSION_GRANTED) {\r\n    Toast.makeText(this, &quot;App disabled until permissions accepted. Close &amp; Restart App&quot;, \r\n\r\n    Toast.LENGTH_SHORT).show();} \r\n    else {\r\n    Toast.makeText(this, &quot;Good to Go! Hiding App&quot;, Toast.LENGTH_SHORT).show();\r\n    }\r\n\r\n    view.postDelayed(() -&gt; moveTaskToBack(true), 2000);\r\n    });\r\n    }\r\n\r\n    private void performCodeBlock2() {\r\n    if (!isSharedSettingExecuted) {\r\n    isSharedSettingExecuted = true;\r\n    sharedPreferences.edit().putBoolean(KEY_SHARED_SETTING_EXECUTED,\r\n    isSharedSettingExecuted).apply();\r\n    } else {\r\n    return; // Skip code block 2 if already executed\r\n    }\r\n\r\n    currentMode = audioManager.getRingerMode();\r\n\r\n    switch (currentMode) {\r\n    case AudioManager.RINGER_MODE_NORMAL:\r\n    currentStateTV.setText(&quot;Ringer Mode&quot;);\r\n    break;\r\n    case AudioManager.RINGER_MODE_SILENT:\r\n    currentStateTV.setText(&quot;Ringer Mode Silent&quot;);\r\n    break;\r\n    default:\r\n    currentStateTV.setText(&quot;Fail to get mode&quot;);\r\n        }\r\n\r\n    NotificationManager notificationManager = (NotificationManager)  \r\n    getSystemService(Context.NOTIFICATION_SERVICE);\r\n\r\n    **if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M &amp;&amp;   \r\n    !notificationManager.isNotificationPolicyAccessGranted()) {\r\n    Intent intent = new Intent(Settings.ACTION_NOTIFICATION_POLICY_ACCESS_SETTINGS);\r\n    startActivity(intent);\r\n    }\r\n\r\n    if (ContextCompat.checkSelfPermission(MainActivity.this,  \r\n    Manifest.permission.READ_PHONE_STATE) != PackageManager.PERMISSION_GRANTED) {\r\n    if (ActivityCompat.shouldShowRequestPermissionRationale(MainActivity.this, \r\n    Manifest.permission.READ_PHONE_STATE)) {\r\n    ActivityCompat.requestPermissions(MainActivity.this, new String[] \r\n    {Manifest.permission.READ_PHONE_STATE}, PERMISSION_REQUEST_CODE);\r\n    } else {\r\n    ActivityCompat.requestPermissions(MainActivity.this, new String[].   \r\n    {Manifest.permission.READ_PHONE_STATE}, PERMISSION_REQUEST_CODE);\r\n    }\r\n    } else {\r\n    isPermissionGranted = true; // Permission is already granted\r\n    }\r\n    }\r\n\r\n    @Override\r\n    public void onRequestPermissionsResult(int requestCode, String[] permissions, int[] \r\n    grantResults) {\r\n    super.onRequestPermissionsResult(requestCode, permissions, grantResults);\r\n    switch (requestCode) {\r\n    case PERMISSION_REQUEST_CODE: {\r\n    if (grantResults.length &gt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\r\n    if (ContextCompat.checkSelfPermission(MainActivity.this, \r\n    Manifest.permission.READ_PHONE_STATE) == PackageManager.PERMISSION_GRANTED) {\r\n    if (!isPermissionGranted) { // Check if permission was not already granted\r\n    if (permissions[0].equals(Manifest.permission.READ_PHONE_STATE)) {\r\n    Toast.makeText(this, &quot;Permission Granted&quot;, Toast.LENGTH_SHORT).show();\r\n    isPermissionGranted = true;\r\n    }\r\n    }\r\n\r\n    if (ContextCompat.checkSelfPermission(MainActivity.this, Manifest.permission.READ_CALL_LOG)\r\n    != PackageManager.PERMISSION_GRANTED) {\r\n    if   (ActivityCompat.shouldShowRequestPermissionRationale(MainActivity.this, \r\n    Manifest.permission.READ_CALL_LOG)) {\r\n    ActivityCompat.requestPermissions(MainActivity.this, new String[]{Manifest.permission.READ_CALL_LOG}, 11);\r\n                            } else {\r\n                                ActivityCompat.requestPermissions(MainActivity.this, new String[]{Manifest.permission.READ_CALL_LOG}, 11);\r\n                            }\r\n                        }\r\n                    }\r\n                } else {\r\n                    Toast.makeText(this, &quot;Permission Denied&quot;, Toast.LENGTH_SHORT).show();\r\n                }\r\n                break;\r\n            }\r\n            case 11: {\r\n                if (grantResults.length &gt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\r\n                    if (ContextCompat.checkSelfPermission(MainActivity.this, Manifest.permission.READ_CALL_LOG) == PackageManager.PERMISSION_GRANTED) {\r\n                        Toast.makeText(this, &quot;Permission Granted&quot;, Toast.LENGTH_SHORT).show();\r\n                    }\r\n                } else {\r\n                    Toast.makeText(this, &quot;Permission Denied&quot;, Toast.LENGTH_SHORT).show();\r\n                }\r\n                break;\r\n            }\r\n        }**\r\n    }\r\n\r\n    @Override\r\n    protected void onStop() {\r\n        super.onStop();\r\n\r\n        telecomManager = (TelecomManager) getSystemService(Context.TELECOM_SERVICE);\r\n        boolean isDefaultDialer = getPackageName().equals(telecomManager.getDefaultDialerPackage());\r\n\r\n        if (!isDefaultDialer) {\r\n            if (ContextCompat.checkSelfPermission(MainActivity.this, Manifest.permission.READ_CALL_LOG) == PackageManager.PERMISSION_GRANTED) {\r\n                ActivityCompat.requestPermissions(MainActivity.this, new String[]{Manifest.permission.READ_CALL_LOG}, PERMISSION_REQUEST_CODE);\r\n            }\r\n        }\r\n    }\r\n\r\n    @Override\r\n    protected void onSaveInstanceState(Bundle outState) {\r\n        super.onSaveInstanceState(outState);\r\n        outState.putBoolean(&quot;isPermissionGranted&quot;, isPermissionGranted);\r\n    }\r\n\r\n    @Override\r\n    protected void onRestoreInstanceState(Bundle savedInstanceState) {\r\n        super.onRestoreInstanceState(savedInstanceState);\r\n        isPermissionGranted = savedInstanceState.getBoolean(&quot;isPermissionGranted&quot;, false);\r\n    }\r\n}\r\n\r\n\r\n```\r\n\r\n//my manifest\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.REQUEST_IGNORE_BATTERY_OPTIMIZATIONS&quot;/&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.CHANGE_DEFAULT_DIALER&quot; /&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NOTIFICATION_POLICY&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.MODIFY_AUDIO_SETTINGS&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.READ_PHONE_STATE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.READ_CALL_LOG&quot; /&gt;\r\n\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\r\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/Theme.MyApplication123&quot;\r\n        tools:targetApi=&quot;31&quot;&gt;\r\n        &lt;activity\r\n            android:name=&quot;.NewActivity&quot;\r\n            android:exported=&quot;false&quot;&gt;\r\n            &lt;meta-data\r\n                android:name=&quot;android.app.lib_name&quot;\r\n                android:value=&quot;&quot; /&gt;\r\n        &lt;/activity&gt;\r\n        &lt;activity\r\n            android:name=&quot;.MainActivity&quot;\r\n            android:exported=&quot;true&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n                &lt;action android:name=&quot;android.intent.action.DIAL&quot;/&gt;\r\n                &lt;action android:name=&quot;android.intent.action.CALL&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.DEFAULT&quot;/&gt;\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.ASSIST&quot; /&gt;\r\n                &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;\r\n                &lt;action android:name=&quot;android.intent.action.DIAL&quot;/&gt;\r\n\r\n            &lt;/intent-filter&gt;\r\n            &lt;meta-data\r\n                android:name=&quot;android.app.lib_name&quot;\r\n                android:value=&quot;&quot; /&gt;\r\n        &lt;/activity&gt;\r\n\r\n        &lt;receiver\r\n            android:name=&quot;.CallReceiver&quot;\r\n            android:exported=&quot;true&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.PHONE_STATE&quot; /&gt;\r\n                &lt;action android:name=&quot;android.intent.action.BOOT_COMPLETED&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/receiver&gt;\r\n    &lt;/application&gt;\r\n\r\n&lt;/manifest&gt;\r\n```","title":"Default Phone Handler Google Playstore Policy. My app constantly rejected","body":"<p>Hoping someone can help me with an ongoing frustrating issue with trying to publish one of my Android Apps written in Java to the Google Playstore. Everytime I try to publish it to the Google Playstore, I receive a rejection letter (from what feels like an automated rejection letter from their compliancy department.)</p>\n<p>Below is the letter from Google, my code in question, and my Android Manifest listing the permissions. I have tried at least 20 attempts to modify the code to be compliant and each time no matter what I changed, it has failed to get past their filters. Anyone know anything about how to implement code on making your phone a default phone handler or can anyone se what is wrong with my default handler situation?</p>\n<p>&quot;Letter from Playstore&quot;</p>\n<p>**Issue with your app</p>\n<p>**After reviewing your app, we found that it doesn’t comply with the Permissions and APIs that Access Sensitive Information policy. An app can use Call Log or SMS permissions only when it is acting as a designated default handler or its core functionality falls within a permitted use case.\nApps must be actively registered as the default SMS, Phone, or Assistant handler before prompting users to accept any SMS or Call Log permissions. Those apps must immediately stop using the permission when they’re no longer the default handler.\nYou declared default Phone handling in your declaration form, but your app isn’t the registered default handler for phone or its other core functionality.</p>\n<p>I have tried to change the order in which the permission request present themselves. As of now I have the default handler prompt showing up first and if the user opts NO, the app doesnt work. I cannot understand what can be more compliant than that.</p>\n<pre><code>\n//my code\n\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.core.app.ActivityCompat;\nimport androidx.core.content.ContextCompat;\nimport android.Manifest;\nimport android.app.AlertDialog;\nimport android.app.NotificationManager;\nimport android.content.Context;\nimport android.content.Intent;\nimport android.content.SharedPreferences;\nimport android.content.pm.PackageManager;\nimport android.graphics.Color;\nimport android.media.AudioManager;\nimport android.os.Build;\nimport android.os.Bundle;\nimport android.provider.Settings;\nimport android.telecom.TelecomManager;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.ImageButton;\nimport android.widget.TextView;\nimport android.widget.Toast;\n\npublic class MainActivity extends AppCompatActivity {\n    private TextView currentStateTV;\n    private ImageButton ringtoneIB;\n\n    private AudioManager audioManager;\n    private int currentMode;\n    private static final int PERMISSION_REQUEST_CODE = 1;\n    private static final String SHARED_PREFS_NAME = &quot;MyPrefs&quot;;\n    private static final String KEY_SHARED_SETTING_EXECUTED = &quot;sharedSettingExecuted&quot;;\n\n    private boolean isSharedSettingExecuted = false;\n    private TelecomManager telecomManager;\n    private SharedPreferences sharedPreferences;\n    private boolean isPermissionGranted = false; // Added flag to track permission status\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n    currentStateTV = findViewById(R.id.currentStateTV);\n    ringtoneIB = findViewById(R.id.ringer);\n    audioManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);\n\n    sharedPreferences = getSharedPreferences(SHARED_PREFS_NAME, MODE_PRIVATE);\n    isSharedSettingExecuted = sharedPreferences.getBoolean(KEY_SHARED_SETTING_EXECUTED, false);\n\n    telecomManager = (TelecomManager) getSystemService(Context.TELECOM_SERVICE);\n    boolean isDefaultDialer = getPackageName().equals(telecomManager.getDefaultDialerPackage());\n\n   ** if (!isDefaultDialer &amp;&amp; !isSharedSettingExecuted) {\n    AlertDialog.Builder builder = new AlertDialog.Builder(this);\n    builder.setTitle(&quot;Set as Default Phone App&quot;);\n    builder.setMessage(&quot;Would you like to set this app as your default phone app?&quot;);\n    builder.setPositiveButton(&quot;Yes&quot;, (dialog, which) -&gt; {\n    Intent intent = new Intent(TelecomManager.ACTION_CHANGE_DEFAULT_DIALER);\n    intent.putExtra(TelecomManager.EXTRA_CHANGE_DEFAULT_DIALER_PACKAGE_NAME, getPackageName());\n    startActivity(intent);\n    performCodeBlock2();});\n\n    builder.setNegativeButton(&quot;No&quot;, (dialog, which) -&gt; {\n    Toast.makeText(MainActivity.this, &quot;App is not set as the default phone handler&quot;,  \n\n    Toast.LENGTH_SHORT).show();});\n    builder.show();} else {\n    performCodeBlock2();}**\n\n    // Set up OnClickListener for ringtoneIB\n    ringtoneIB.setOnClickListener(v -&gt; {\n    audioManager.setRingerMode(AudioManager.RINGER_MODE_NORMAL);\n    Toast.makeText(MainActivity.this, &quot;Ringtone Mode Activated..&quot;, Toast.LENGTH_SHORT).show();\n    currentStateTV.setText(&quot;Ringtone Mode Activated..&quot;);});\n\n    // Set up OnClickListener for button\n    Button button = findViewById(R.id.button);\n    button.setOnClickListener(v -&gt; {\n\n\n    Intent intentLoadNewActivity = new Intent(MainActivity.this, NewActivity.class);\n    startActivity(intentLoadNewActivity);\n    });\n\n    // Set up OnClickListener for hideButton\n    ImageButton hideButton = findViewById(R.id.hideme);\n    hideButton.setOnClickListener(view -&gt; {\n    audioManager.setRingerMode(AudioManager.RINGER_MODE_SILENT);\n    currentStateTV.setText(&quot;Ringtone Mode Silent (APP RUNNING)&quot;);\n    currentStateTV.setTextColor(Color.parseColor(&quot;#FFFFFF&quot;));\n\n    if (ContextCompat.checkSelfPermission(this, Manifest.permission.READ_CALL_LOG) != \n\n    PackageManager.PERMISSION_GRANTED) {\n    Toast.makeText(this, &quot;App disabled until permissions accepted. Close &amp; Restart App&quot;, \n\n    Toast.LENGTH_SHORT).show();} \n    else {\n    Toast.makeText(this, &quot;Good to Go! Hiding App&quot;, Toast.LENGTH_SHORT).show();\n    }\n\n    view.postDelayed(() -&gt; moveTaskToBack(true), 2000);\n    });\n    }\n\n    private void performCodeBlock2() {\n    if (!isSharedSettingExecuted) {\n    isSharedSettingExecuted = true;\n    sharedPreferences.edit().putBoolean(KEY_SHARED_SETTING_EXECUTED,\n    isSharedSettingExecuted).apply();\n    } else {\n    return; // Skip code block 2 if already executed\n    }\n\n    currentMode = audioManager.getRingerMode();\n\n    switch (currentMode) {\n    case AudioManager.RINGER_MODE_NORMAL:\n    currentStateTV.setText(&quot;Ringer Mode&quot;);\n    break;\n    case AudioManager.RINGER_MODE_SILENT:\n    currentStateTV.setText(&quot;Ringer Mode Silent&quot;);\n    break;\n    default:\n    currentStateTV.setText(&quot;Fail to get mode&quot;);\n        }\n\n    NotificationManager notificationManager = (NotificationManager)  \n    getSystemService(Context.NOTIFICATION_SERVICE);\n\n    **if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M &amp;&amp;   \n    !notificationManager.isNotificationPolicyAccessGranted()) {\n    Intent intent = new Intent(Settings.ACTION_NOTIFICATION_POLICY_ACCESS_SETTINGS);\n    startActivity(intent);\n    }\n\n    if (ContextCompat.checkSelfPermission(MainActivity.this,  \n    Manifest.permission.READ_PHONE_STATE) != PackageManager.PERMISSION_GRANTED) {\n    if (ActivityCompat.shouldShowRequestPermissionRationale(MainActivity.this, \n    Manifest.permission.READ_PHONE_STATE)) {\n    ActivityCompat.requestPermissions(MainActivity.this, new String[] \n    {Manifest.permission.READ_PHONE_STATE}, PERMISSION_REQUEST_CODE);\n    } else {\n    ActivityCompat.requestPermissions(MainActivity.this, new String[].   \n    {Manifest.permission.READ_PHONE_STATE}, PERMISSION_REQUEST_CODE);\n    }\n    } else {\n    isPermissionGranted = true; // Permission is already granted\n    }\n    }\n\n    @Override\n    public void onRequestPermissionsResult(int requestCode, String[] permissions, int[] \n    grantResults) {\n    super.onRequestPermissionsResult(requestCode, permissions, grantResults);\n    switch (requestCode) {\n    case PERMISSION_REQUEST_CODE: {\n    if (grantResults.length &gt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\n    if (ContextCompat.checkSelfPermission(MainActivity.this, \n    Manifest.permission.READ_PHONE_STATE) == PackageManager.PERMISSION_GRANTED) {\n    if (!isPermissionGranted) { // Check if permission was not already granted\n    if (permissions[0].equals(Manifest.permission.READ_PHONE_STATE)) {\n    Toast.makeText(this, &quot;Permission Granted&quot;, Toast.LENGTH_SHORT).show();\n    isPermissionGranted = true;\n    }\n    }\n\n    if (ContextCompat.checkSelfPermission(MainActivity.this, Manifest.permission.READ_CALL_LOG)\n    != PackageManager.PERMISSION_GRANTED) {\n    if   (ActivityCompat.shouldShowRequestPermissionRationale(MainActivity.this, \n    Manifest.permission.READ_CALL_LOG)) {\n    ActivityCompat.requestPermissions(MainActivity.this, new String[]{Manifest.permission.READ_CALL_LOG}, 11);\n                            } else {\n                                ActivityCompat.requestPermissions(MainActivity.this, new String[]{Manifest.permission.READ_CALL_LOG}, 11);\n                            }\n                        }\n                    }\n                } else {\n                    Toast.makeText(this, &quot;Permission Denied&quot;, Toast.LENGTH_SHORT).show();\n                }\n                break;\n            }\n            case 11: {\n                if (grantResults.length &gt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\n                    if (ContextCompat.checkSelfPermission(MainActivity.this, Manifest.permission.READ_CALL_LOG) == PackageManager.PERMISSION_GRANTED) {\n                        Toast.makeText(this, &quot;Permission Granted&quot;, Toast.LENGTH_SHORT).show();\n                    }\n                } else {\n                    Toast.makeText(this, &quot;Permission Denied&quot;, Toast.LENGTH_SHORT).show();\n                }\n                break;\n            }\n        }**\n    }\n\n    @Override\n    protected void onStop() {\n        super.onStop();\n\n        telecomManager = (TelecomManager) getSystemService(Context.TELECOM_SERVICE);\n        boolean isDefaultDialer = getPackageName().equals(telecomManager.getDefaultDialerPackage());\n\n        if (!isDefaultDialer) {\n            if (ContextCompat.checkSelfPermission(MainActivity.this, Manifest.permission.READ_CALL_LOG) == PackageManager.PERMISSION_GRANTED) {\n                ActivityCompat.requestPermissions(MainActivity.this, new String[]{Manifest.permission.READ_CALL_LOG}, PERMISSION_REQUEST_CODE);\n            }\n        }\n    }\n\n    @Override\n    protected void onSaveInstanceState(Bundle outState) {\n        super.onSaveInstanceState(outState);\n        outState.putBoolean(&quot;isPermissionGranted&quot;, isPermissionGranted);\n    }\n\n    @Override\n    protected void onRestoreInstanceState(Bundle savedInstanceState) {\n        super.onRestoreInstanceState(savedInstanceState);\n        isPermissionGranted = savedInstanceState.getBoolean(&quot;isPermissionGranted&quot;, false);\n    }\n}\n\n\n</code></pre>\n<p>//my manifest</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n    &lt;uses-permission android:name=&quot;android.permission.REQUEST_IGNORE_BATTERY_OPTIMIZATIONS&quot;/&gt;\n    &lt;uses-permission android:name=&quot;android.permission.CHANGE_DEFAULT_DIALER&quot; /&gt;\n\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NOTIFICATION_POLICY&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.MODIFY_AUDIO_SETTINGS&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.READ_PHONE_STATE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.READ_CALL_LOG&quot; /&gt;\n\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.MyApplication123&quot;\n        tools:targetApi=&quot;31&quot;&gt;\n        &lt;activity\n            android:name=&quot;.NewActivity&quot;\n            android:exported=&quot;false&quot;&gt;\n            &lt;meta-data\n                android:name=&quot;android.app.lib_name&quot;\n                android:value=&quot;&quot; /&gt;\n        &lt;/activity&gt;\n        &lt;activity\n            android:name=&quot;.MainActivity&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n                &lt;action android:name=&quot;android.intent.action.DIAL&quot;/&gt;\n                &lt;action android:name=&quot;android.intent.action.CALL&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.DEFAULT&quot;/&gt;\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.ASSIST&quot; /&gt;\n                &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;\n                &lt;action android:name=&quot;android.intent.action.DIAL&quot;/&gt;\n\n            &lt;/intent-filter&gt;\n            &lt;meta-data\n                android:name=&quot;android.app.lib_name&quot;\n                android:value=&quot;&quot; /&gt;\n        &lt;/activity&gt;\n\n        &lt;receiver\n            android:name=&quot;.CallReceiver&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.PHONE_STATE&quot; /&gt;\n                &lt;action android:name=&quot;android.intent.action.BOOT_COMPLETED&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/receiver&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n"},{"tags":["java","intellij-idea","java-20"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1687897048,"post_id":76566590,"comment_id":135000813,"body_markdown":"That looks like very incomplete information. The error is just vaguely telling you it didn&#39;t compile properly. What makes you think it&#39;s to do with that tz data? You should probably be giving the result of your build attempt, not an attempt to run it","body":"That looks like very incomplete information. The error is just vaguely telling you it didn&#39;t compile properly. What makes you think it&#39;s to do with that tz data? You should probably be giving the result of your build attempt, not an attempt to run it"},{"owner":{"account_id":16912818,"reputation":1,"user_id":12231492,"display_name":"Joey Tat&#250;"},"score":0,"creation_date":1687903195,"post_id":76566590,"comment_id":135001701,"body_markdown":"@g00se When I run the application this line is red `java: C:\\Program Files\\Java\\jdk-20\\lib\\tzdb.dat`.\n\nThe above is the output it provides when I try running it.","body":"@g00se When I run the application this line is red <code>java: C:\\Program Files\\Java\\jdk-20\\lib\\tzdb.dat</code>.  The above is the output it provides when I try running it."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1687903380,"post_id":76566590,"comment_id":135001719,"body_markdown":"*Compilation failed: errors: 1; warnings: 0* Why would you try to *run* something you are told doesn&#39;t compile? You need to make it compile first","body":"<i>Compilation failed: errors: 1; warnings: 0</i> Why would you try to <i>run</i> something you are told doesn&#39;t compile? You need to make it compile first"},{"owner":{"account_id":16912818,"reputation":1,"user_id":12231492,"display_name":"Joey Tat&#250;"},"score":0,"creation_date":1687904233,"post_id":76566590,"comment_id":135001814,"body_markdown":"@g00se There&#39;s no difference between Compile and Build in IntelliJ. I don&#39;t think I fully understand how I can fix it. Can you advise how I could fix it? Like, what would you do? Thanks.","body":"@g00se There&#39;s no difference between Compile and Build in IntelliJ. I don&#39;t think I fully understand how I can fix it. Can you advise how I could fix it? Like, what would you do? Thanks."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1687907853,"post_id":76566590,"comment_id":135002197,"body_markdown":"That might be the case, but there&#39;s certainly a difference between build and run. I can&#39;t say exactly what I&#39;d do as I don&#39;t use IDEA","body":"That might be the case, but there&#39;s certainly a difference between build and run. I can&#39;t say exactly what I&#39;d do as I don&#39;t use IDEA"},{"owner":{"account_id":16912818,"reputation":1,"user_id":12231492,"display_name":"Joey Tat&#250;"},"score":0,"creation_date":1687910853,"post_id":76566590,"comment_id":135002452,"body_markdown":"@g00se Thanks, I&#39;m going to try Eclipse and see tomorrow. Thanks for your help.","body":"@g00se Thanks, I&#39;m going to try Eclipse and see tomorrow. Thanks for your help."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1687934241,"post_id":76566590,"comment_id":135004580,"body_markdown":"If you&#39;re not an advanced developer I would recommend you don&#39;t use *any* IDE. You will learn more quickly about how Java works internally and you won&#39;t be forced to learn simultaneously about how to use your IDE. Later on you can add Maven/Gradle.","body":"If you&#39;re not an advanced developer I would recommend you don&#39;t use <i>any</i> IDE. You will learn more quickly about how Java works internally and you won&#39;t be forced to learn simultaneously about how to use your IDE. Later on you can add Maven/Gradle."},{"owner":{"account_id":16912818,"reputation":1,"user_id":12231492,"display_name":"Joey Tat&#250;"},"score":0,"creation_date":1687950998,"post_id":76566590,"comment_id":135007878,"body_markdown":"@g00se I actually have a degree in Computing. It&#39;s just I haven&#39;t used Java in about 7/8 years. That is a very good point though, I might do a refresher course on Java internals. I tried running the application in Eclipse and it works fine. Maybe it&#39;s just IntelliJ being weird.","body":"@g00se I actually have a degree in Computing. It&#39;s just I haven&#39;t used Java in about 7/8 years. That is a very good point though, I might do a refresher course on Java internals. I tried running the application in Eclipse and it works fine. Maybe it&#39;s just IntelliJ being weird."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1687953186,"post_id":76566590,"comment_id":135008276,"body_markdown":"I would particularly recommend getting to grips at the command line with Java modules","body":"I would particularly recommend getting to grips at the command line with Java modules"}],"owner":{"account_id":16912818,"reputation":1,"user_id":12231492,"display_name":"Joey Tat&#250;"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":567,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687880778,"creation_date":1687880743,"question_id":76566590,"body_markdown":"I am using Java JDK 20.0.1 on IntelliJ 2023-1. \r\n\r\nI am trying to run a Java application.\r\n\r\nI get a very generic error about the tzdb.dat file.\r\n\r\nThe error is:\r\n```\r\nExecuting pre-compile tasks...\r\nRunning &#39;before&#39; tasks\r\nChecking sources\r\nCopying resources... [JavaDesktopSudokuDemo]\r\nParsing java… [JavaDesktopSudokuDemo]\r\njava: C:\\Program Files\\Java\\jdk-20\\lib\\tzdb.dat &lt;&lt;&lt;------\r\nChecking dependencies… [JavaDesktopSudokuDemo]\r\nDependency analysis found 0 affected files\r\nErrors occurred while compiling module &#39;JavaDesktopSudokuDemo&#39;\r\njavac 20.0.1 was used to compile java sources\r\nFinished, saving caches…\r\nCompilation failed: errors: 1; warnings: 0\r\nExecuting post-compile tasks...\r\nCompilation failed: errors: 1; warnings: 0\r\nSynchronizing output directories...\r\n27 Jun 2023 16:38 - Build completed with 1 error and 0 warnings in 1 sec, 173 ms\r\n```\r\n\r\nI tried to update the tzdb.dat file by directly downloading it from Oracle and by using tzupdater.jar. I&#39;ve tried changing the file name to add .bak at the end, but that creates a file not found error.","title":"Having issues with running Java application with tzdb.dat file","body":"<p>I am using Java JDK 20.0.1 on IntelliJ 2023-1.</p>\n<p>I am trying to run a Java application.</p>\n<p>I get a very generic error about the tzdb.dat file.</p>\n<p>The error is:</p>\n<pre><code>Executing pre-compile tasks...\nRunning 'before' tasks\nChecking sources\nCopying resources... [JavaDesktopSudokuDemo]\nParsing java… [JavaDesktopSudokuDemo]\njava: C:\\Program Files\\Java\\jdk-20\\lib\\tzdb.dat &lt;&lt;&lt;------\nChecking dependencies… [JavaDesktopSudokuDemo]\nDependency analysis found 0 affected files\nErrors occurred while compiling module 'JavaDesktopSudokuDemo'\njavac 20.0.1 was used to compile java sources\nFinished, saving caches…\nCompilation failed: errors: 1; warnings: 0\nExecuting post-compile tasks...\nCompilation failed: errors: 1; warnings: 0\nSynchronizing output directories...\n27 Jun 2023 16:38 - Build completed with 1 error and 0 warnings in 1 sec, 173 ms\n</code></pre>\n<p>I tried to update the tzdb.dat file by directly downloading it from Oracle and by using tzupdater.jar. I've tried changing the file name to add .bak at the end, but that creates a file not found error.</p>\n"},{"tags":["java","spring-boot","openrewrite"],"comments":[{"owner":{"account_id":21852,"reputation":19896,"user_id":53444,"accept_rate":70,"display_name":"Tim"},"score":0,"creation_date":1687881349,"post_id":76566522,"comment_id":134997593,"body_markdown":"Could you try again with rewrite-spring 5.0.2 released yesterday?\nhttps://github.com/openrewrite/rewrite-spring/releases/tag/v5.0.2","body":"Could you try again with rewrite-spring 5.0.2 released yesterday? <a href=\"https://github.com/openrewrite/rewrite-spring/releases/tag/v5.0.2\" rel=\"nofollow noreferrer\">github.com/openrewrite/rewrite-spring/releases/tag/v5.0.2</a>"},{"owner":{"account_id":21852,"reputation":19896,"user_id":53444,"accept_rate":70,"display_name":"Tim"},"score":0,"creation_date":1687881431,"post_id":76566522,"comment_id":134997609,"body_markdown":"There was unfortunately an inadvertent change that made it in, which has since been reverted. We&#39;re flushing out all the cases where it&#39;s causing issues; and doing patch releases where necessary. Rewrite-spring already has such a patch release.","body":"There was unfortunately an inadvertent change that made it in, which has since been reverted. We&#39;re flushing out all the cases where it&#39;s causing issues; and doing patch releases where necessary. Rewrite-spring already has such a patch release."},{"owner":{"account_id":11696516,"reputation":21,"user_id":8563077,"display_name":"Niek7301"},"score":1,"creation_date":1687882717,"post_id":76566522,"comment_id":134997918,"body_markdown":"That works perfectly. Thanks!\n\nPs. I am upgrading after seeing your JFall talk on the subject so thanks for the inspiration as well ;)","body":"That works perfectly. Thanks!  Ps. I am upgrading after seeing your JFall talk on the subject so thanks for the inspiration as well ;)"},{"owner":{"account_id":21852,"reputation":19896,"user_id":53444,"accept_rate":70,"display_name":"Tim"},"score":0,"creation_date":1687972928,"post_id":76566522,"comment_id":135012801,"body_markdown":"Glad to hear that works, and that I could help you twice! :)","body":"Glad to hear that works, and that I could help you twice! :)"}],"owner":{"account_id":11696516,"reputation":21,"user_id":8563077,"display_name":"Niek7301"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":463,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1687880273,"creation_date":1687880273,"question_id":76566522,"body_markdown":"Hopefully somebody can help me :)\r\n\r\nI am trying to update a project from spring boot 2.5 to spring boot 2.7 with the openrewrite recipe. After trying this several times I keep getting the same error message.\r\n\r\nI tried excluding the exact module this error happens, but it will just skip that and give the same error on the next module (I have 3 modules in total)\r\nAlso tried removing the .m2 folder but still the same error.\r\n\r\nThe following is my pom rewrite:\r\n```\r\n&lt;plugin&gt;\r\n                    &lt;groupId&gt;org.openrewrite.maven&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;rewrite-maven-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;5.2.4&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;activeRecipes&gt;\r\n                            &lt;recipe&gt;org.openrewrite.java.spring.boot2.UpgradeSpringBoot_2_7&lt;/recipe&gt;\r\n                        &lt;/activeRecipes&gt;\r\n                        &lt;exclusions&gt;\r\n                            &lt;exclude&gt;*/node/**&lt;/exclude&gt;\r\n                            &lt;exclude&gt;*/node_modules/**&lt;/exclude&gt;\r\n                            &lt;exclude&gt;*/target/**&lt;/exclude&gt;\r\n                        &lt;/exclusions&gt;\r\n                    &lt;/configuration&gt;\r\n                    &lt;dependencies&gt;\r\n                        &lt;dependency&gt;\r\n                            &lt;groupId&gt;org.openrewrite.recipe&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;rewrite-spring&lt;/artifactId&gt;\r\n                            &lt;version&gt;5.0.1&lt;/version&gt;\r\n                        &lt;/dependency&gt;\r\n                    &lt;/dependencies&gt;\r\n                &lt;/plugin&gt;\r\n```\r\n\r\nAfter mvn rewrite:run the error message is:\r\n\r\n```\r\n[ERROR] The recipe produced an error. Please report this to the recipe author.\r\n\r\n[ERROR] Failed to execute goal org.openrewrite.maven:rewrite-maven-plugin:5.2.4:run (default-cli) on project my-project: Execution default-cli of goal org.openrewrite.maven:rewrite-maven-plugin:5.2.4:run failed: Error while visiting my-module/src/main/java/nl/commons/util/someClass.java: java.lang.NoSuchMethodError: &#39;boolean org.openrewrite.java.MethodMatcher.matches(org.openrewrite.java.tree.J$MethodInvocation)&#39;\r\n[ERROR]   org.openrewrite.java.testing.mockito.PowerMockitoMockStaticToMockito$PowerMockitoToMockitoVisitor.visitMethodInvocation(PowerMockitoMockStaticToMockito.java:164)\r\n[ERROR]   org.openrewrite.java.testing.mockito.PowerMockitoMockStaticToMockito$PowerMockitoToMockitoVisitor.visitMethodInvocation(PowerMockitoMockStaticToMockito.java:48)\r\n[ERROR]   org.openrewrite.java.tree.J$MethodInvocation.acceptJava(J.java:3706)\r\n[ERROR]   org.openrewrite.java.tree.J.accept(J.java:59)\r\n[ERROR]   org.openrewrite.TreeVisitor.visit(TreeVisitor.java:278)\r\n[ERROR]   org.openrewrite.TreeVisitor.visitAndCast(TreeVisitor.java:361)\r\n[ERROR]   org.openrewrite.java.JavaVisitor.visitRightPadded(JavaVisitor.java:1284)\r\n[ERROR]   org.openrewrite.java.JavaVisitor.lambda$visitBlock$4(JavaVisitor.java:367)\r\n```\r\n\r\nThanks in advance!\r\n\r\nNiek","title":"When updating from spring boot 2.5 to 2.7 with openrewrite I get a NoSuchMethodError","body":"<p>Hopefully somebody can help me :)</p>\n<p>I am trying to update a project from spring boot 2.5 to spring boot 2.7 with the openrewrite recipe. After trying this several times I keep getting the same error message.</p>\n<p>I tried excluding the exact module this error happens, but it will just skip that and give the same error on the next module (I have 3 modules in total)\nAlso tried removing the .m2 folder but still the same error.</p>\n<p>The following is my pom rewrite:</p>\n<pre><code>&lt;plugin&gt;\n                    &lt;groupId&gt;org.openrewrite.maven&lt;/groupId&gt;\n                    &lt;artifactId&gt;rewrite-maven-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;5.2.4&lt;/version&gt;\n                    &lt;configuration&gt;\n                        &lt;activeRecipes&gt;\n                            &lt;recipe&gt;org.openrewrite.java.spring.boot2.UpgradeSpringBoot_2_7&lt;/recipe&gt;\n                        &lt;/activeRecipes&gt;\n                        &lt;exclusions&gt;\n                            &lt;exclude&gt;*/node/**&lt;/exclude&gt;\n                            &lt;exclude&gt;*/node_modules/**&lt;/exclude&gt;\n                            &lt;exclude&gt;*/target/**&lt;/exclude&gt;\n                        &lt;/exclusions&gt;\n                    &lt;/configuration&gt;\n                    &lt;dependencies&gt;\n                        &lt;dependency&gt;\n                            &lt;groupId&gt;org.openrewrite.recipe&lt;/groupId&gt;\n                            &lt;artifactId&gt;rewrite-spring&lt;/artifactId&gt;\n                            &lt;version&gt;5.0.1&lt;/version&gt;\n                        &lt;/dependency&gt;\n                    &lt;/dependencies&gt;\n                &lt;/plugin&gt;\n</code></pre>\n<p>After mvn rewrite:run the error message is:</p>\n<pre><code>[ERROR] The recipe produced an error. Please report this to the recipe author.\n\n[ERROR] Failed to execute goal org.openrewrite.maven:rewrite-maven-plugin:5.2.4:run (default-cli) on project my-project: Execution default-cli of goal org.openrewrite.maven:rewrite-maven-plugin:5.2.4:run failed: Error while visiting my-module/src/main/java/nl/commons/util/someClass.java: java.lang.NoSuchMethodError: 'boolean org.openrewrite.java.MethodMatcher.matches(org.openrewrite.java.tree.J$MethodInvocation)'\n[ERROR]   org.openrewrite.java.testing.mockito.PowerMockitoMockStaticToMockito$PowerMockitoToMockitoVisitor.visitMethodInvocation(PowerMockitoMockStaticToMockito.java:164)\n[ERROR]   org.openrewrite.java.testing.mockito.PowerMockitoMockStaticToMockito$PowerMockitoToMockitoVisitor.visitMethodInvocation(PowerMockitoMockStaticToMockito.java:48)\n[ERROR]   org.openrewrite.java.tree.J$MethodInvocation.acceptJava(J.java:3706)\n[ERROR]   org.openrewrite.java.tree.J.accept(J.java:59)\n[ERROR]   org.openrewrite.TreeVisitor.visit(TreeVisitor.java:278)\n[ERROR]   org.openrewrite.TreeVisitor.visitAndCast(TreeVisitor.java:361)\n[ERROR]   org.openrewrite.java.JavaVisitor.visitRightPadded(JavaVisitor.java:1284)\n[ERROR]   org.openrewrite.java.JavaVisitor.lambda$visitBlock$4(JavaVisitor.java:367)\n</code></pre>\n<p>Thanks in advance!</p>\n<p>Niek</p>\n"},{"tags":["java","hibernate","jpa"],"comments":[{"owner":{"account_id":61566,"reputation":68924,"user_id":183406,"accept_rate":74,"display_name":"meriton"},"score":1,"creation_date":1687880976,"post_id":76566520,"comment_id":134997507,"body_markdown":"Its perfectly fine for Java objects to point to each other, and hibernate uses that when reading the object from the database. An infinite recursion only occurs during serialization to JSON, and can be prevented by configuring your JSON library appropriately (since you haven&#39;t told us which library it&#39;s hard to be more specific than that ...)","body":"Its perfectly fine for Java objects to point to each other, and hibernate uses that when reading the object from the database. An infinite recursion only occurs during serialization to JSON, and can be prevented by configuring your JSON library appropriately (since you haven&#39;t told us which library it&#39;s hard to be more specific than that ...)"},{"owner":{"account_id":22965773,"reputation":31,"user_id":17221129,"display_name":"Владислав"},"score":0,"creation_date":1687881741,"post_id":76566520,"comment_id":134997671,"body_markdown":"@meriton Json Jackson.","body":"@meriton Json Jackson."},{"owner":{"account_id":61566,"reputation":68924,"user_id":183406,"accept_rate":74,"display_name":"meriton"},"score":0,"creation_date":1687883692,"post_id":76566520,"comment_id":134998156,"body_markdown":"https://stackoverflow.com/questions/17393812/json-and-java-circular-reference","body":"<a href=\"https://stackoverflow.com/questions/17393812/json-and-java-circular-reference\" title=\"json and java circular reference\">stackoverflow.com/questions/17393812/&hellip;</a>"},{"owner":{"account_id":22965773,"reputation":31,"user_id":17221129,"display_name":"Владислав"},"score":0,"creation_date":1687918981,"post_id":76566520,"comment_id":135003065,"body_markdown":"@meriton thank&#39;s","body":"@meriton thank&#39;s"}],"owner":{"account_id":22965773,"reputation":31,"user_id":17221129,"display_name":"Владислав"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1687880246,"creation_date":1687880246,"question_id":76566520,"body_markdown":"[schema](https://i.stack.imgur.com/nwqqr.png)\r\ntable schemas\r\nThere are two tables, they can be seen in the diagram.\r\nThere is also a JPA-style description of these entities:\r\n\r\nEntity for Gift\r\n```\r\n@Entity\r\npublic class Gift {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private long id;\r\n\r\n    @Column(name = &quot;title&quot;)\r\n    private String title;\r\n\r\n    // ... \r\n\r\n    @OneToMany(cascade = {CascadeType.PERSIST, CascadeType.MERGE},\r\n            orphanRemoval = true,\r\n            fetch = FetchType.LAZY,\r\n            mappedBy = &quot;gift&quot;)\r\n    private List&lt;Image&gt; images;\r\n}\r\n\r\n```\r\nEntity fot Image\r\n\r\n```\r\n@Entity\r\npublic class Image {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;gift_id&quot;)\r\n    private Gift gift;\r\n    \r\n    // ...\r\n\r\n}\r\n```\r\n\r\nWhen executing the following JPA Query:\r\n\r\n```\r\n@Override\r\npublic List&lt;Gift&gt; getByFilter(FilterSearch filter) {\r\n    String sql = &quot;&quot;&quot;\r\n            FROM Gift WHERE id = 2\r\n            &quot;&quot;&quot;;\r\n    return entityManager.createQuery(sql, Gift.class).getResultList();\r\n}\r\n```\r\n\r\nResult: \r\nIt turns out a cyclic dependency, if you can call it that: I get a list gift, in which image, in which the same gift has the same images, which in turn have the same gift&#39;s, and so on ad infinitum.\r\n\r\n```\r\n[\r\n    {\r\n        &quot;id&quot;: 2,\r\n        &quot;title&quot;: &quot;title for gift&quot;,\r\n        &quot;description&quot;: &quot;some simple description for gift&quot;,\r\n        &quot;shortDescription&quot;: &quot;short description&quot;,\r\n        &quot;category&quot;: {\r\n            &quot;id&quot;: 1,\r\n            &quot;name&quot;: &quot;first category&quot;,\r\n            &quot;parent&quot;: null\r\n        },\r\n        &quot;costPrice&quot;: 2.0,\r\n        &quot;price&quot;: 3.4,\r\n        &quot;dateAdded&quot;: &quot;2023-06-26T15:41:55.958+00:00&quot;,\r\n        &quot;isEnabled&quot;: false,\r\n        &quot;images&quot;: [\r\n            {\r\n                &quot;id&quot;: 6,\r\n                &quot;gift&quot;: {\r\n                    &quot;id&quot;: 2,\r\n                    &quot;title&quot;: &quot;title for gift&quot;,\r\n                    &quot;description&quot;: &quot;some simple description for gift&quot;,\r\n                    &quot;shortDescription&quot;: &quot;short description&quot;,\r\n                    &quot;category&quot;: {\r\n                        &quot;id&quot;: 1,\r\n                        &quot;name&quot;: &quot;first category&quot;,\r\n                        &quot;parent&quot;: null\r\n                    },\r\n                    &quot;costPrice&quot;: 2.0,\r\n                    &quot;price&quot;: 3.4,\r\n                    &quot;dateAdded&quot;: &quot;2023-06-26T15:41:55.958+00:00&quot;,\r\n                    &quot;isEnabled&quot;: false,\r\n                    &quot;images&quot;: [\r\n                        {\r\n                            &quot;id&quot;: 6,\r\n                            &quot;gift&quot;: {\r\n                                &quot;id&quot;: 2,\r\n                                &quot;title&quot;: &quot;title for gift&quot;,\r\n                                &quot;description&quot;: &quot;some simple description for gift&quot;,\r\n                                &quot;shortDescription&quot;: &quot;short description&quot;,\r\n                                &quot;category&quot;: {\r\n                                    &quot;id&quot;: 1,\r\n                                    &quot;name&quot;: &quot;first category&quot;,\r\n                                    &quot;parent&quot;: null\r\n                                },\r\n                                &quot;costPrice&quot;: 2.0,\r\n                                &quot;price&quot;: 3.4,\r\n                                &quot;dateAdded&quot;: &quot;2023-06-26T15:41:55.958+00:00&quot;,\r\n                                &quot;isEnabled&quot;: false,\r\n                                &quot;images&quot;: [\r\n                \r\n```\r\n\r\nand so on ad infinitum.\r\n\r\n**Question. How to break this cycle?** ","title":"How to break a cyclic relationship?","body":"<p><a href=\"https://i.stack.imgur.com/nwqqr.png\" rel=\"nofollow noreferrer\">schema</a>\ntable schemas\nThere are two tables, they can be seen in the diagram.\nThere is also a JPA-style description of these entities:</p>\n<p>Entity for Gift</p>\n<pre><code>@Entity\npublic class Gift {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private long id;\n\n    @Column(name = &quot;title&quot;)\n    private String title;\n\n    // ... \n\n    @OneToMany(cascade = {CascadeType.PERSIST, CascadeType.MERGE},\n            orphanRemoval = true,\n            fetch = FetchType.LAZY,\n            mappedBy = &quot;gift&quot;)\n    private List&lt;Image&gt; images;\n}\n\n</code></pre>\n<p>Entity fot Image</p>\n<pre><code>@Entity\npublic class Image {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;gift_id&quot;)\n    private Gift gift;\n    \n    // ...\n\n}\n</code></pre>\n<p>When executing the following JPA Query:</p>\n<pre><code>@Override\npublic List&lt;Gift&gt; getByFilter(FilterSearch filter) {\n    String sql = &quot;&quot;&quot;\n            FROM Gift WHERE id = 2\n            &quot;&quot;&quot;;\n    return entityManager.createQuery(sql, Gift.class).getResultList();\n}\n</code></pre>\n<p>Result:\nIt turns out a cyclic dependency, if you can call it that: I get a list gift, in which image, in which the same gift has the same images, which in turn have the same gift's, and so on ad infinitum.</p>\n<pre><code>[\n    {\n        &quot;id&quot;: 2,\n        &quot;title&quot;: &quot;title for gift&quot;,\n        &quot;description&quot;: &quot;some simple description for gift&quot;,\n        &quot;shortDescription&quot;: &quot;short description&quot;,\n        &quot;category&quot;: {\n            &quot;id&quot;: 1,\n            &quot;name&quot;: &quot;first category&quot;,\n            &quot;parent&quot;: null\n        },\n        &quot;costPrice&quot;: 2.0,\n        &quot;price&quot;: 3.4,\n        &quot;dateAdded&quot;: &quot;2023-06-26T15:41:55.958+00:00&quot;,\n        &quot;isEnabled&quot;: false,\n        &quot;images&quot;: [\n            {\n                &quot;id&quot;: 6,\n                &quot;gift&quot;: {\n                    &quot;id&quot;: 2,\n                    &quot;title&quot;: &quot;title for gift&quot;,\n                    &quot;description&quot;: &quot;some simple description for gift&quot;,\n                    &quot;shortDescription&quot;: &quot;short description&quot;,\n                    &quot;category&quot;: {\n                        &quot;id&quot;: 1,\n                        &quot;name&quot;: &quot;first category&quot;,\n                        &quot;parent&quot;: null\n                    },\n                    &quot;costPrice&quot;: 2.0,\n                    &quot;price&quot;: 3.4,\n                    &quot;dateAdded&quot;: &quot;2023-06-26T15:41:55.958+00:00&quot;,\n                    &quot;isEnabled&quot;: false,\n                    &quot;images&quot;: [\n                        {\n                            &quot;id&quot;: 6,\n                            &quot;gift&quot;: {\n                                &quot;id&quot;: 2,\n                                &quot;title&quot;: &quot;title for gift&quot;,\n                                &quot;description&quot;: &quot;some simple description for gift&quot;,\n                                &quot;shortDescription&quot;: &quot;short description&quot;,\n                                &quot;category&quot;: {\n                                    &quot;id&quot;: 1,\n                                    &quot;name&quot;: &quot;first category&quot;,\n                                    &quot;parent&quot;: null\n                                },\n                                &quot;costPrice&quot;: 2.0,\n                                &quot;price&quot;: 3.4,\n                                &quot;dateAdded&quot;: &quot;2023-06-26T15:41:55.958+00:00&quot;,\n                                &quot;isEnabled&quot;: false,\n                                &quot;images&quot;: [\n                \n</code></pre>\n<p>and so on ad infinitum.</p>\n<p><strong>Question. How to break this cycle?</strong></p>\n"},{"tags":["java","swagger","openapi","quarkus"],"answers":[{"tags":[],"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1647249405,"creation_date":1647249085,"answer_id":71465291,"question_id":71464876,"body_markdown":"For Quarkus you will need to use Microprofile Openapi Annotations:\r\n\r\nhttps://download.eclipse.org/microprofile/microprofile-open-api-1.0/microprofile-openapi-spec.html\r\n\r\nSpecifically: `@ExampleObject` which \r\n\r\n&gt; Illustrates an example of a particular content.\r\n&gt; \r\nhttps://github.com/eclipse/microprofile-open-api/blob/master/api/src/main/java/org/eclipse/microprofile/openapi/annotations/media/ExampleObject.java\r\n\r\n\r\n\r\nExample:\r\n\r\n\r\n     public interface ExamplePayloads {\r\n          String NEW_PLAYER = &quot;{\\&quot;age\\&quot;:12, \\&quot;username\\&quot;:\\&quot;username\\&quot;}&quot;;\r\n          String SAVED_PLAYER = &quot;{\\&quot;id\\&quot;:1234, \\&quot;age\\&quot;:12, \\&quot;username\\&quot;:\\&quot;username\\&quot;}&quot;;\r\n          \r\n    }\r\n\r\nThe `value` attribute of `ExampleObject` takes a String:\r\n\r\n       /**\r\n         * A string representation of the example.\r\n         * &lt;p&gt;\r\n         * This is mutually exclusive with the externalValue property, and ignored if the externalValue property is\r\n         * specified.\r\n         * &lt;/p&gt;\r\n         * If the media type associated with the example allows parsing into an object, it may be converted from a string.\r\n         * \r\n         * @return the value of the example\r\n         **/\r\n        String value() default &quot;&quot;;\r\n        \r\n      \r\n----------\r\n\r\n    import static yourpackage.ExamplePayloads.*;\r\n    \r\n    @Path(&quot;/players&quot;)\r\n    @Consumes(APPLICATION_JSON)\r\n    @Produces(APPLICATION_JSON)\r\n    public class PlayersResource {\r\n    \r\n    \r\n          @POST\r\n          @Operation(summary = &quot;save new player&quot;, description = &quot;Creates new player with given age and username.&quot;)\r\n          @RequestBody(\r\n            required = true,\r\n            content = @Content(\r\n              schema = @Schema(implementation = Player.class, required = true, requiredProperties = {&quot;username&quot;, &quot;age&quot;}),\r\n              examples = @ExampleObject(\r\n                name = &quot;new player&quot;,\r\n                description = &quot;saves new player with parameters username and age&quot;,\r\n                value = NEW_PLAYER\r\n              )\r\n            ))\r\n          @APIResponses(\r\n        \tvalue = {\r\n            @APIResponse(\r\n              name = &quot;success&quot;,\r\n              responseCode = &quot;200&quot;,\r\n              content = @Content(\r\n                schema = @Schema(implementation = Player.class, required = true, requiredProperties = {&quot;id&quot;, &quot;username&quot;, &quot;age&quot;}),\r\n                examples = @ExampleObject(\r\n                  name = &quot;saved player&quot;,\r\n                  description = &quot;new player with id assigned.&quot;,\r\n                  value = SAVED_PLAYER\r\n                )\r\n              ))\r\n            ,\r\n            @APIResponse(\r\n              name = &quot;bad request, no username&quot;,\r\n              responseCode = &quot;400&quot;,\r\n              description = &quot;missing username or age&quot;\r\n            ),\r\n        \t}\r\n        )\r\n          public Player savePlayer(Player player) {\r\n           \r\n            return playersService.savePlayer(player);\r\n          }\r\n    \r\n    \r\n    }\r\n\r\n","title":"How to generate a request example in Swagger with Quarkus","body":"<p>For Quarkus you will need to use Microprofile Openapi Annotations:</p>\n<p><a href=\"https://download.eclipse.org/microprofile/microprofile-open-api-1.0/microprofile-openapi-spec.html\" rel=\"nofollow noreferrer\">https://download.eclipse.org/microprofile/microprofile-open-api-1.0/microprofile-openapi-spec.html</a></p>\n<p>Specifically: <code>@ExampleObject</code> which</p>\n<blockquote>\n<p>Illustrates an example of a particular content.</p>\n</blockquote>\n<p><a href=\"https://github.com/eclipse/microprofile-open-api/blob/master/api/src/main/java/org/eclipse/microprofile/openapi/annotations/media/ExampleObject.java\" rel=\"nofollow noreferrer\">https://github.com/eclipse/microprofile-open-api/blob/master/api/src/main/java/org/eclipse/microprofile/openapi/annotations/media/ExampleObject.java</a></p>\n<p>Example:</p>\n<pre><code> public interface ExamplePayloads {\n      String NEW_PLAYER = &quot;{\\&quot;age\\&quot;:12, \\&quot;username\\&quot;:\\&quot;username\\&quot;}&quot;;\n      String SAVED_PLAYER = &quot;{\\&quot;id\\&quot;:1234, \\&quot;age\\&quot;:12, \\&quot;username\\&quot;:\\&quot;username\\&quot;}&quot;;\n      \n}\n</code></pre>\n<p>The <code>value</code> attribute of <code>ExampleObject</code> takes a String:</p>\n<pre><code>   /**\n     * A string representation of the example.\n     * &lt;p&gt;\n     * This is mutually exclusive with the externalValue property, and ignored if the externalValue property is\n     * specified.\n     * &lt;/p&gt;\n     * If the media type associated with the example allows parsing into an object, it may be converted from a string.\n     * \n     * @return the value of the example\n     **/\n    String value() default &quot;&quot;;\n    \n  \n</code></pre>\n<hr />\n<pre><code>import static yourpackage.ExamplePayloads.*;\n\n@Path(&quot;/players&quot;)\n@Consumes(APPLICATION_JSON)\n@Produces(APPLICATION_JSON)\npublic class PlayersResource {\n\n\n      @POST\n      @Operation(summary = &quot;save new player&quot;, description = &quot;Creates new player with given age and username.&quot;)\n      @RequestBody(\n        required = true,\n        content = @Content(\n          schema = @Schema(implementation = Player.class, required = true, requiredProperties = {&quot;username&quot;, &quot;age&quot;}),\n          examples = @ExampleObject(\n            name = &quot;new player&quot;,\n            description = &quot;saves new player with parameters username and age&quot;,\n            value = NEW_PLAYER\n          )\n        ))\n      @APIResponses(\n        value = {\n        @APIResponse(\n          name = &quot;success&quot;,\n          responseCode = &quot;200&quot;,\n          content = @Content(\n            schema = @Schema(implementation = Player.class, required = true, requiredProperties = {&quot;id&quot;, &quot;username&quot;, &quot;age&quot;}),\n            examples = @ExampleObject(\n              name = &quot;saved player&quot;,\n              description = &quot;new player with id assigned.&quot;,\n              value = SAVED_PLAYER\n            )\n          ))\n        ,\n        @APIResponse(\n          name = &quot;bad request, no username&quot;,\n          responseCode = &quot;400&quot;,\n          description = &quot;missing username or age&quot;\n        ),\n        }\n    )\n      public Player savePlayer(Player player) {\n       \n        return playersService.savePlayer(player);\n      }\n\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9976375,"reputation":417,"user_id":7380828,"display_name":"Giacomo Venturini"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687880127,"creation_date":1687879732,"answer_id":76566447,"question_id":71464876,"body_markdown":"You can use `@Schema` annotation over a field to define its openapi example.\r\n    \r\n```java\r\nimport org.eclipse.microprofile.openapi.annotations.media.Schema;\r\n\r\npublic class Fruit {\r\n\r\n    @Schema(example = &quot;apple&quot;)\r\n    public String name;\r\n\r\n    @Schema(example = &quot;the red fruit&quot;)\r\n    public String description;\r\n}\r\n```\r\n\r\nThis will produce the following swagger:\r\n\r\n[![swagger with example values][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/DXh1G.png\r\n\r\nThe annotation can be found into `org.eclipse.microprofile.openapi:microprofile-openapi-api:X.X` dependency.","title":"How to generate a request example in Swagger with Quarkus","body":"<p>You can use <code>@Schema</code> annotation over a field to define its openapi example.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.eclipse.microprofile.openapi.annotations.media.Schema;\n\npublic class Fruit {\n\n    @Schema(example = &quot;apple&quot;)\n    public String name;\n\n    @Schema(example = &quot;the red fruit&quot;)\n    public String description;\n}\n</code></pre>\n<p>This will produce the following swagger:</p>\n<p><a href=\"https://i.stack.imgur.com/DXh1G.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DXh1G.png\" alt=\"swagger with example values\" /></a></p>\n<p>The annotation can be found into <code>org.eclipse.microprofile.openapi:microprofile-openapi-api:X.X</code> dependency.</p>\n"}],"owner":{"account_id":258666,"reputation":455,"user_id":3305708,"display_name":"Luisao"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1465,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":71465291,"answer_count":2,"score":2,"last_activity_date":1687880127,"creation_date":1647246644,"question_id":71464876,"body_markdown":"I want to generate an Example Value in the request with Quarkus and Swagger.\r\n\r\nIs there any annotation like @ApiModelProperty in Quarkus? Or is there any tag to set the example in the request?\r\n\r\n[![enter image description here][1]][1]\r\n\r\nThanks\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/sexKr.png","title":"How to generate a request example in Swagger with Quarkus","body":"<p>I want to generate an Example Value in the request with Quarkus and Swagger.</p>\n<p>Is there any annotation like @ApiModelProperty in Quarkus? Or is there any tag to set the example in the request?</p>\n<p><a href=\"https://i.stack.imgur.com/sexKr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sexKr.png\" alt=\"enter image description here\" /></a></p>\n<p>Thanks</p>\n"},{"tags":["java","eclipse","unit-testing","junit","junit4"],"answers":[{"tags":[],"owner":{"account_id":31682,"reputation":22471,"user_id":87197,"accept_rate":81,"display_name":"Chris Dennett"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1283898019,"creation_date":1274574316,"answer_id":2890266,"question_id":2890259,"body_markdown":"If you use Ant in Eclipse, you can set the JUnit task to fork a new JVM process for each test, providing isolation.\r\n\r\nhttp://ant.apache.org/manual/Tasks/junit.html","title":"Running each JUnit test in a separate JVM in Eclipse?","body":"<p>If you use Ant in Eclipse, you can set the JUnit task to fork a new JVM process for each test, providing isolation.</p>\n\n<p><a href=\"http://ant.apache.org/manual/Tasks/junit.html\" rel=\"nofollow noreferrer\">http://ant.apache.org/manual/Tasks/junit.html</a></p>\n"},{"tags":[],"owner":{"account_id":2015227,"reputation":833,"user_id":1802697,"display_name":"Igor Maznitsa"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1431873359,"creation_date":1431873359,"answer_id":30287962,"question_id":2890259,"body_markdown":"I also had similar needs and developed [small maven plugin Jute][1] which has been published in maven central. It starts external JVM process for each JUnit test method.\r\n\r\n\r\n  [1]: https://github.com/raydac/jute","title":"Running each JUnit test in a separate JVM in Eclipse?","body":"<p>I also had similar needs and developed <a href=\"https://github.com/raydac/jute\" rel=\"nofollow\">small maven plugin Jute</a> which has been published in maven central. It starts external JVM process for each JUnit test method.</p>\n"},{"tags":[],"owner":{"account_id":28764840,"reputation":11,"user_id":22034347,"display_name":"Paul Frischknecht"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1687879811,"creation_date":1687879811,"answer_id":76566458,"question_id":2890259,"body_markdown":"Here&#39;s a solution I found to execute every test class in its own JVM:\r\n\r\n```\r\n&lt;plugin&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;${maven-surefire-plugin.version}&lt;/version&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;forkCount&gt;1&lt;/forkCount&gt;\r\n\t\t\t\t\t&lt;reuseForks&gt;false&lt;/reuseForks&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n```\r\n\r\n&gt; forkCount=1/reuseForks=false executes each test class in its own JVM process, one after another. It creates the highest level of separation for the test execution, but it would probably also give you the longest execution time of all the available options. Consider it as a last resort. [[1](https://maven.apache.org/surefire/maven-surefire-plugin/examples/fork-options-and-parallel-execution.html)]\r\n\r\nThis solves the problem for me when running the tests outside of intellij directly with `mvn test`, unfortunately IntelliJ doesn&#39;t respect this.","title":"Running each JUnit test in a separate JVM in Eclipse?","body":"<p>Here's a solution I found to execute every test class in its own JVM:</p>\n<pre><code>&lt;plugin&gt;\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${maven-surefire-plugin.version}&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;forkCount&gt;1&lt;/forkCount&gt;\n                    &lt;reuseForks&gt;false&lt;/reuseForks&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n</code></pre>\n<blockquote>\n<p>forkCount=1/reuseForks=false executes each test class in its own JVM process, one after another. It creates the highest level of separation for the test execution, but it would probably also give you the longest execution time of all the available options. Consider it as a last resort. [<a href=\"https://maven.apache.org/surefire/maven-surefire-plugin/examples/fork-options-and-parallel-execution.html\" rel=\"nofollow noreferrer\">1</a>]</p>\n</blockquote>\n<p>This solves the problem for me when running the tests outside of intellij directly with <code>mvn test</code>, unfortunately IntelliJ doesn't respect this.</p>\n"}],"owner":{"account_id":2052,"reputation":8269,"user_id":2827,"accept_rate":82,"display_name":"HenryR"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12459,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"accepted_answer_id":2890266,"answer_count":3,"score":14,"last_activity_date":1687879811,"creation_date":1274574022,"question_id":2890259,"body_markdown":"I have a project with nearly 500 individual tests in around 200 test classes. Some of these tests don&#39;t do a great job of tearing down their own state after they&#39;re finished, and in Eclipse this results in some tests failing. The tests all pass when running the test suite from the command line via Ant.\r\n\r\nCan I enable &#39;test isolation&#39; somehow in Eclipse? I don&#39;t mind if it takes longer to run.\r\n\r\nLong term, I will clean up the misbehaving tests, but in the short term I&#39;d like to get the tests working.","title":"Running each JUnit test in a separate JVM in Eclipse?","body":"<p>I have a project with nearly 500 individual tests in around 200 test classes. Some of these tests don't do a great job of tearing down their own state after they're finished, and in Eclipse this results in some tests failing. The tests all pass when running the test suite from the command line via Ant.</p>\n\n<p>Can I enable 'test isolation' somehow in Eclipse? I don't mind if it takes longer to run.</p>\n\n<p>Long term, I will clean up the misbehaving tests, but in the short term I'd like to get the tests working.</p>\n"},{"tags":["java","utf-8","sublimetext3","javac"],"comments":[{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1687890665,"post_id":76566455,"comment_id":134999654,"body_markdown":"The issue is with the console in Sublime when executing the application, not building.","body":"The issue is with the console in Sublime when executing the application, not building."},{"owner":{"account_id":28906129,"reputation":1,"user_id":22140123,"display_name":"Tom Orrow"},"score":0,"creation_date":1687941871,"post_id":76566455,"comment_id":135005987,"body_markdown":"How do I fix this?","body":"How do I fix this?"},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1687951826,"post_id":76566455,"comment_id":135008008,"body_markdown":"I was merely clarifying your question, which incorrectly states that the problem is with &quot;building&quot;.","body":"I was merely clarifying your question, which incorrectly states that the problem is with &quot;building&quot;."},{"owner":{"account_id":28906129,"reputation":1,"user_id":22140123,"display_name":"Tom Orrow"},"score":0,"creation_date":1688019844,"post_id":76566455,"comment_id":135018014,"body_markdown":"I would like to add that it also works well with other programming languages such as Python, C++, etc. and with other IDEs (Visual Studio) or with the CMD. Only in Sublime Text in combination with Java","body":"I would like to add that it also works well with other programming languages such as Python, C++, etc. and with other IDEs (Visual Studio) or with the CMD. Only in Sublime Text in combination with Java"}],"owner":{"account_id":28906129,"reputation":1,"user_id":22140123,"display_name":"Tom Orrow"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687879770,"creation_date":1687879770,"question_id":76566455,"body_markdown":"Sublimetext doesn&#39;t show me the German umlauts &#246;&#228;&#252;&#223; in Java when I build the program. In other program languages they work.\r\n\r\n[example](https://i.stack.imgur.com/YXHjV.png)\r\n\r\nI&#39;ve looked up just about every tutorial or post, but I can&#39;t get it to work.\r\nEverything I know is in UTF-8. It works with Python or even when I use the Termninus addon. \r\n\r\nI made a new build system extra Java:` {&quot;shell_cmd&quot;: &quot;javac -encoding utf-8 $file &amp;&amp; java $file_base_name&quot; }`\r\nAnd I must say I like Sublime Text, I use it all the time for Python, now I want to use it for Java. Any help would be greatly appreciated, thanks.","title":"Sublimetext 3 doesn&#39;t show german umlauts &#228;&#246;&#252;&#223;","body":"<p>Sublimetext doesn't show me the German umlauts öäüß in Java when I build the program. In other program languages they work.</p>\n<p><a href=\"https://i.stack.imgur.com/YXHjV.png\" rel=\"nofollow noreferrer\">example</a></p>\n<p>I've looked up just about every tutorial or post, but I can't get it to work.\nEverything I know is in UTF-8. It works with Python or even when I use the Termninus addon.</p>\n<p>I made a new build system extra Java:<code> {&quot;shell_cmd&quot;: &quot;javac -encoding utf-8 $file &amp;&amp; java $file_base_name&quot; }</code>\nAnd I must say I like Sublime Text, I use it all the time for Python, now I want to use it for Java. Any help would be greatly appreciated, thanks.</p>\n"},{"tags":["java","java-17","ws"],"comments":[{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":2,"creation_date":1682253375,"post_id":76058993,"comment_id":134182862,"body_markdown":"Why do you want to migrate `javax.xml.datatype.XMLGregorianCalendar;`? It is part of the JRE since Java 5 and has not been removed. It is e.g. available in Java 11.","body":"Why do you want to migrate <code>javax.xml.datatype.XMLGregorianCalendar;</code>? It is part of the JRE since Java 5 and has not been removed. It is e.g. available in Java 11."},{"owner":{"account_id":11715131,"reputation":75,"user_id":8575889,"display_name":"Jose Guerra"},"score":0,"creation_date":1682256138,"post_id":76058993,"comment_id":134183189,"body_markdown":"Thanks Robert, yes I&#39;ll keep using that class","body":"Thanks Robert, yes I&#39;ll keep using that class"}],"answers":[{"tags":[],"owner":{"account_id":228743,"reputation":10672,"user_id":491245,"accept_rate":93,"display_name":"PhoneixS"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1687879502,"creation_date":1687879502,"answer_id":76566419,"question_id":76058993,"body_markdown":"The `XMLGregorianCalendar` is in the &quot;javax.xml&quot; package as it still is part of the &quot;main&quot; java project so you can use it as is.\r\n\r\nYou can read its documentation of the last version (20 as of writing the answer) at https://docs.oracle.com/en/java/javase/20/docs/api/java.xml/javax/xml/datatype/XMLGregorianCalendar.html","title":"migrate import javax.xml.datatype.XMLGregorianCalendar; jdk11 to jakarta in jdk17","body":"<p>The <code>XMLGregorianCalendar</code> is in the &quot;javax.xml&quot; package as it still is part of the &quot;main&quot; java project so you can use it as is.</p>\n<p>You can read its documentation of the last version (20 as of writing the answer) at <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.xml/javax/xml/datatype/XMLGregorianCalendar.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/en/java/javase/20/docs/api/java.xml/javax/xml/datatype/XMLGregorianCalendar.html</a></p>\n"}],"owner":{"account_id":11715131,"reputation":75,"user_id":8575889,"display_name":"Jose Guerra"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3659,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1687879502,"creation_date":1681940292,"question_id":76058993,"body_markdown":"I have an application that I must migrate from jdk11 to jdk17 and when trying to generate my soap classes they are generated with the following import javax.xml.datatype.XMLGregorianCalendar; in jdk17 javax it becomes jakarta but I can&#39;t find the XMLGregorianCalendar counterpart, could someone guide me in which library applies in this case.\r\nI need change this:\r\n\r\n    import java.math.BigInteger;\r\n    import javax.xml.bind.annotation.XmlAccessType;\r\n    import javax.xml.bind.annotation.XmlAccessorType;\r\n    import javax.xml.bind.annotation.XmlElement;\r\n    import javax.xml.bind.annotation.XmlRootElement;\r\n    import javax.xml.bind.annotation.XmlSchemaType;\r\n    import javax.xml.bind.annotation.XmlType;\r\n    import javax.xml.datatype.XMLGregorianCalendar;\r\n\r\nto this, but the last import i don&#39;t know how do it this:\r\n\r\n        import java.math.BigInteger;\r\n        import jakarta.xml.bind.annotation.XmlAccessType;\r\n        import jakarta.xml.bind.annotation.XmlAccessorType;\r\n        import jakarta.xml.bind.annotation.XmlElement;\r\n        import jakarta.xml.bind.annotation.XmlRootElement;\r\n        import jakarta.xml.bind.annotation.XmlSchemaType;\r\n        import jakarta.xml.bind.annotation.XmlType;\r\n        import javax.xml.datatype.XMLGregorianCalendar;\r\n","title":"migrate import javax.xml.datatype.XMLGregorianCalendar; jdk11 to jakarta in jdk17","body":"<p>I have an application that I must migrate from jdk11 to jdk17 and when trying to generate my soap classes they are generated with the following import javax.xml.datatype.XMLGregorianCalendar; in jdk17 javax it becomes jakarta but I can't find the XMLGregorianCalendar counterpart, could someone guide me in which library applies in this case.\nI need change this:</p>\n<pre><code>import java.math.BigInteger;\nimport javax.xml.bind.annotation.XmlAccessType;\nimport javax.xml.bind.annotation.XmlAccessorType;\nimport javax.xml.bind.annotation.XmlElement;\nimport javax.xml.bind.annotation.XmlRootElement;\nimport javax.xml.bind.annotation.XmlSchemaType;\nimport javax.xml.bind.annotation.XmlType;\nimport javax.xml.datatype.XMLGregorianCalendar;\n</code></pre>\n<p>to this, but the last import i don't know how do it this:</p>\n<pre><code>    import java.math.BigInteger;\n    import jakarta.xml.bind.annotation.XmlAccessType;\n    import jakarta.xml.bind.annotation.XmlAccessorType;\n    import jakarta.xml.bind.annotation.XmlElement;\n    import jakarta.xml.bind.annotation.XmlRootElement;\n    import jakarta.xml.bind.annotation.XmlSchemaType;\n    import jakarta.xml.bind.annotation.XmlType;\n    import javax.xml.datatype.XMLGregorianCalendar;\n</code></pre>\n"},{"tags":["java","eclipse","maven"],"comments":[{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1663656310,"post_id":73781390,"comment_id":130284795,"body_markdown":"Why shouldn&#39;t they be grayed out? What&#39;s your problem preventing you to do what?","body":"Why shouldn&#39;t they be grayed out? What&#39;s your problem preventing you to do what?"},{"owner":{"account_id":26386316,"reputation":11,"user_id":20038781,"display_name":"don gwon"},"score":1,"creation_date":1663660870,"post_id":73781390,"comment_id":130286239,"body_markdown":"Even if I right-click, the rebuild index does not appear. Build is possible normally, but the add dependency function is not available for repository","body":"Even if I right-click, the rebuild index does not appear. Build is possible normally, but the add dependency function is not available for repository"},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1663661590,"post_id":73781390,"comment_id":130286479,"body_markdown":"See https://github.com/eclipse-m2e/m2e-core/issues/914","body":"See <a href=\"https://github.com/eclipse-m2e/m2e-core/issues/914\" rel=\"nofollow noreferrer\">github.com/eclipse-m2e/m2e-core/issues/914</a>"}],"answers":[{"tags":[],"owner":{"account_id":24121406,"reputation":1,"user_id":18090520,"display_name":"jorenriquez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687879495,"creation_date":1687879495,"answer_id":76566416,"question_id":73781390,"body_markdown":"Eclipse extracts this data directly from your **settings.xml** \r\n\r\n&lt; **localRepository** &gt;C:/Users/username/.m2/repository &lt; /**localRepository**&gt;\r\n\r\nYou will not be able to change this on the IDE.","title":"eclipse maven repositories are grayed out","body":"<p>Eclipse extracts this data directly from your <strong>settings.xml</strong></p>\n<p>&lt; <strong>localRepository</strong> &gt;C:/Users/username/.m2/repository &lt; /<strong>localRepository</strong>&gt;</p>\n<p>You will not be able to change this on the IDE.</p>\n"}],"owner":{"account_id":26386316,"reputation":11,"user_id":20038781,"display_name":"don gwon"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":513,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1687879495,"creation_date":1663645004,"question_id":73781390,"body_markdown":"I&#39;ve tried many ways in two days, but I can&#39;t solve this.Help me[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/1YgOJ.png","title":"eclipse maven repositories are grayed out","body":"<p>I've tried many ways in two days, but I can't solve this.Help me<a href=\"https://i.stack.imgur.com/1YgOJ.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":["java","maven","versioning"],"answers":[{"tags":[],"owner":{"account_id":4635391,"reputation":1131,"user_id":3756780,"display_name":"slindenau"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1662447585,"creation_date":1653821948,"answer_id":72423038,"question_id":72416739,"body_markdown":"&gt; Or will the child projects look for a rules.xml file in the child project directory?\r\n\r\nYes, if you define the `rules.xml` file via `${project.basedir}` it will resolve to the current local base directory of the child project. I&#39;ve verified this with a simple parent-child pom setup. So that will not work, unless you duplicate the rules file in every project.\r\n\r\nIf you wish to include the plugin configuration *and* ruleset in the parent pom without duplicating the rules file, you have two options:\r\n\r\n&gt; If you have your ruleset xml file hosted at, for example, http://www.mycompany.com/maven-version-rules.xml then the following configuration in your corporate pom would ensure that all projects use this rule set.\r\n\r\n```\r\n&lt;configuration&gt;\r\n    &lt;rulesUri&gt;http://www.mycompany.com/maven-version-rules.xml&lt;/rulesUri&gt;\r\n&lt;/configuration&gt;\r\n```\r\nor\r\n\r\n&gt; You can provide your ruleset xml file also within a jar, if you want to distribute your ruleset xml as Maven artifact. Therefore you have to declare the containing jar as direct dependency of the versions-maven-plugin and to use classpath as protocol.\r\n\r\n```\r\n&lt;configuration&gt;\r\n  &lt;rulesUri&gt;classpath:///package/foo/bar/rules.xml&lt;/rulesUri&gt;\r\n&lt;/configuration&gt;\r\n&lt;dependencies&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;com.mycompany&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;version-rules&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;1.0&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n&lt;/dependencies&gt;\r\n```\r\n\r\nSource:\r\n- https://www.mojohaus.org/versions-maven-plugin/version-rules.html\r\n\r\nThe configuration in the pom only has rudimentary `includes` and `excludes` filters. Those will allow you to exclude any dependency as a whole, but not specific update versions. As far as i can tell from the available documentation there is no way to define version rules in any other way.\r\n\r\nSee\r\n- https://www.mojohaus.org/versions-maven-plugin/examples/advancing-dependency-versions.html\r\n\r\n## Update 09-2022 ##\r\nIn the [github ticket](https://github.com/mojohaus/versions-maven-plugin/issues/258) we found in the comments we can see the following update:\r\n\r\n&gt; It looks like a feature like this has recently been implemented by [#369](https://github.com/mojohaus/versions-maven-plugin/pull/369). Please see [#318](https://github.com/mojohaus/versions-maven-plugin/issues/318) where it&#39;s possible to provide inclusion and exclusion filters for determining which dependency patterns will be considered. Thanks to that, you can rule out patterns such as `.*-beta.` or `.*_ALPHA`, albeit not using regexp, but simple asterisk wildcards.\r\n\r\n&gt; This will land in today&#39;s release (2.12.0).\r\n\r\nThis will add the following features:\r\n\r\n&gt; Version 2.12.0 will introduce new arguments: `dependencyIncluded`, `dependencyExcludes`, `dependencyManagementIncludes`, `dependencyManagementExcludes`.\r\n\r\nWith the following example configuration in `pom.xml` given:\r\n```lang-xml\r\n&lt;profile&gt;\r\n  &lt;id&gt;display-dependency-updates&lt;/id&gt;\r\n  &lt;build&gt;\r\n    &lt;plugins&gt;\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;${project.groupId}&lt;/groupId&gt;\r\n        &lt;artifactId&gt;${project.artifactId}&lt;/artifactId&gt;\r\n        &lt;version&gt;${project.version}&lt;/version&gt;\r\n        &lt;executions&gt;\r\n          &lt;execution&gt;\r\n            &lt;phase&gt;validate&lt;/phase&gt;\r\n            &lt;goals&gt;\r\n              &lt;goal&gt;display-dependency-updates&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n            &lt;configuration&gt;\r\n              &lt;dependencyIncludes&gt;org.apache.maven.*:doxia*&lt;/dependencyIncludes&gt;\r\n              &lt;dependencyManagementIncludes&gt;com.puppy*:*&lt;/dependencyManagementIncludes&gt;\r\n            &lt;/configuration&gt;\r\n          &lt;/execution&gt;\r\n        &lt;/executions&gt;\r\n      &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n  &lt;/build&gt;\r\n&lt;/profile&gt;\r\n```\r\n\r\nThis will also be implemented for filtering `plugin` and `pluginManagement`, but that will probably be added in a later release:\r\n&gt; So, I&#39;ve just added the missing plugin- and plugin management filtering which works likewise. I really doubt it will land into today&#39;s release though.","title":"Versions Maven Plugin rules that are inheritable","body":"<blockquote>\n<p>Or will the child projects look for a rules.xml file in the child project directory?</p>\n</blockquote>\n<p>Yes, if you define the <code>rules.xml</code> file via <code>${project.basedir}</code> it will resolve to the current local base directory of the child project. I've verified this with a simple parent-child pom setup. So that will not work, unless you duplicate the rules file in every project.</p>\n<p>If you wish to include the plugin configuration <em>and</em> ruleset in the parent pom without duplicating the rules file, you have two options:</p>\n<blockquote>\n<p>If you have your ruleset xml file hosted at, for example, <a href=\"http://www.mycompany.com/maven-version-rules.xml\" rel=\"nofollow noreferrer\">http://www.mycompany.com/maven-version-rules.xml</a> then the following configuration in your corporate pom would ensure that all projects use this rule set.</p>\n</blockquote>\n<pre><code>&lt;configuration&gt;\n    &lt;rulesUri&gt;http://www.mycompany.com/maven-version-rules.xml&lt;/rulesUri&gt;\n&lt;/configuration&gt;\n</code></pre>\n<p>or</p>\n<blockquote>\n<p>You can provide your ruleset xml file also within a jar, if you want to distribute your ruleset xml as Maven artifact. Therefore you have to declare the containing jar as direct dependency of the versions-maven-plugin and to use classpath as protocol.</p>\n</blockquote>\n<pre><code>&lt;configuration&gt;\n  &lt;rulesUri&gt;classpath:///package/foo/bar/rules.xml&lt;/rulesUri&gt;\n&lt;/configuration&gt;\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.mycompany&lt;/groupId&gt;\n        &lt;artifactId&gt;version-rules&lt;/artifactId&gt;\n        &lt;version&gt;1.0&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n<p>Source:</p>\n<ul>\n<li><a href=\"https://www.mojohaus.org/versions-maven-plugin/version-rules.html\" rel=\"nofollow noreferrer\">https://www.mojohaus.org/versions-maven-plugin/version-rules.html</a></li>\n</ul>\n<p>The configuration in the pom only has rudimentary <code>includes</code> and <code>excludes</code> filters. Those will allow you to exclude any dependency as a whole, but not specific update versions. As far as i can tell from the available documentation there is no way to define version rules in any other way.</p>\n<p>See</p>\n<ul>\n<li><a href=\"https://www.mojohaus.org/versions-maven-plugin/examples/advancing-dependency-versions.html\" rel=\"nofollow noreferrer\">https://www.mojohaus.org/versions-maven-plugin/examples/advancing-dependency-versions.html</a></li>\n</ul>\n<h2>Update 09-2022</h2>\n<p>In the <a href=\"https://github.com/mojohaus/versions-maven-plugin/issues/258\" rel=\"nofollow noreferrer\">github ticket</a> we found in the comments we can see the following update:</p>\n<blockquote>\n<p>It looks like a feature like this has recently been implemented by <a href=\"https://github.com/mojohaus/versions-maven-plugin/pull/369\" rel=\"nofollow noreferrer\">#369</a>. Please see <a href=\"https://github.com/mojohaus/versions-maven-plugin/issues/318\" rel=\"nofollow noreferrer\">#318</a> where it's possible to provide inclusion and exclusion filters for determining which dependency patterns will be considered. Thanks to that, you can rule out patterns such as <code>.*-beta.</code> or <code>.*_ALPHA</code>, albeit not using regexp, but simple asterisk wildcards.</p>\n</blockquote>\n<blockquote>\n<p>This will land in today's release (2.12.0).</p>\n</blockquote>\n<p>This will add the following features:</p>\n<blockquote>\n<p>Version 2.12.0 will introduce new arguments: <code>dependencyIncluded</code>, <code>dependencyExcludes</code>, <code>dependencyManagementIncludes</code>, <code>dependencyManagementExcludes</code>.</p>\n</blockquote>\n<p>With the following example configuration in <code>pom.xml</code> given:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;profile&gt;\n  &lt;id&gt;display-dependency-updates&lt;/id&gt;\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;${project.groupId}&lt;/groupId&gt;\n        &lt;artifactId&gt;${project.artifactId}&lt;/artifactId&gt;\n        &lt;version&gt;${project.version}&lt;/version&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;phase&gt;validate&lt;/phase&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;display-dependency-updates&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n              &lt;dependencyIncludes&gt;org.apache.maven.*:doxia*&lt;/dependencyIncludes&gt;\n              &lt;dependencyManagementIncludes&gt;com.puppy*:*&lt;/dependencyManagementIncludes&gt;\n            &lt;/configuration&gt;\n          &lt;/execution&gt;\n        &lt;/executions&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n&lt;/profile&gt;\n</code></pre>\n<p>This will also be implemented for filtering <code>plugin</code> and <code>pluginManagement</code>, but that will probably be added in a later release:</p>\n<blockquote>\n<p>So, I've just added the missing plugin- and plugin management filtering which works likewise. I really doubt it will land into today's release though.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":2074809,"reputation":11,"user_id":1848484,"display_name":"Andrzej Jarmoniuk"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662786471,"creation_date":1662786372,"answer_id":73669416,"question_id":72416739,"body_markdown":"Pasting my answer here from Github, because I think it might benefit others.\r\n\r\nProvided you have a directory called `rules-test` in your project containing the rules template file:\r\n```xml\r\n&lt;ruleset comparisonMethod=&quot;maven&quot;\r\n         xmlns=&quot;http://mojo.codehaus.org/versions-maven-plugin/rule/2.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://mojo.codehaus.org/versions-maven-plugin/rule/2.0.0\r\n         https://www.mojohaus.org/versions-maven-plugin/xsd/rule-2.0.0.xsd&quot;&gt;\r\n    &lt;ignoreVersions&gt;\r\n        &lt;ignoreVersion type=&quot;regex&quot;&gt;${ignoredVersions}&lt;/ignoreVersion&gt;\r\n    &lt;/ignoreVersions&gt;\r\n&lt;/ruleset&gt;\r\n```\r\n\r\nThen, in your main project, create the following profile:\r\n\r\n```xml\r\n&lt;profile&gt;\r\n  &lt;id&gt;rules-test&lt;/id&gt;\r\n  &lt;build&gt;\r\n    &lt;plugins&gt;\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.3.0&lt;/version&gt;\r\n        &lt;executions&gt;\r\n          &lt;execution&gt;\r\n            &lt;phase&gt;validate&lt;/phase&gt;\r\n            &lt;goals&gt;\r\n              &lt;goal&gt;copy-resources&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n            &lt;configuration&gt;\r\n              &lt;resources&gt;\r\n                &lt;resource&gt;\r\n                  &lt;directory&gt;rules-test&lt;/directory&gt;\r\n                  &lt;filtering&gt;true&lt;/filtering&gt;\r\n                &lt;/resource&gt;\r\n              &lt;/resources&gt;\r\n              &lt;outputDirectory&gt;${project.basedir}&lt;/outputDirectory&gt;\r\n            &lt;/configuration&gt;\r\n          &lt;/execution&gt;\r\n        &lt;/executions&gt;\r\n      &lt;/plugin&gt;\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n        &lt;artifactId&gt;versions-maven-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;2.12.0&lt;/version&gt;\r\n        &lt;executions&gt;\r\n          &lt;execution&gt;\r\n            &lt;phase&gt;validate&lt;/phase&gt;\r\n            &lt;goals&gt;\r\n              &lt;goal&gt;display-dependency-updates&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n            &lt;configuration&gt;\r\n              &lt;rulesUri&gt;file://${project.basedir}/compiled-rules.xml&lt;/rulesUri&gt;\r\n            &lt;/configuration&gt;\r\n          &lt;/execution&gt;\r\n        &lt;/executions&gt;\r\n      &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n  &lt;/build&gt;\r\n&lt;/profile&gt;\r\n```\r\n\r\nIf you then execute the following Maven target:\r\n\r\n```sh\r\nmvn -P rules-test &quot;-DignoredVersions=.*-(M\\d*|.*-SNAPSHOT)&quot; clean validate\r\n```\r\n\r\nthen you will get a dependencies report using the filter in the `-DignoredVersions` argument (filtering out both `*-M*` and `*-SNAPSHOT`).\r\n\r\nAnd if you put your `ignoredVerions` property in your project instead of passing it as a -D argument, then it will be inheritable!","title":"Versions Maven Plugin rules that are inheritable","body":"<p>Pasting my answer here from Github, because I think it might benefit others.</p>\n<p>Provided you have a directory called <code>rules-test</code> in your project containing the rules template file:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;ruleset comparisonMethod=&quot;maven&quot;\n         xmlns=&quot;http://mojo.codehaus.org/versions-maven-plugin/rule/2.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://mojo.codehaus.org/versions-maven-plugin/rule/2.0.0\n         https://www.mojohaus.org/versions-maven-plugin/xsd/rule-2.0.0.xsd&quot;&gt;\n    &lt;ignoreVersions&gt;\n        &lt;ignoreVersion type=&quot;regex&quot;&gt;${ignoredVersions}&lt;/ignoreVersion&gt;\n    &lt;/ignoreVersions&gt;\n&lt;/ruleset&gt;\n</code></pre>\n<p>Then, in your main project, create the following profile:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;profile&gt;\n  &lt;id&gt;rules-test&lt;/id&gt;\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.3.0&lt;/version&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;phase&gt;validate&lt;/phase&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;copy-resources&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n              &lt;resources&gt;\n                &lt;resource&gt;\n                  &lt;directory&gt;rules-test&lt;/directory&gt;\n                  &lt;filtering&gt;true&lt;/filtering&gt;\n                &lt;/resource&gt;\n              &lt;/resources&gt;\n              &lt;outputDirectory&gt;${project.basedir}&lt;/outputDirectory&gt;\n            &lt;/configuration&gt;\n          &lt;/execution&gt;\n        &lt;/executions&gt;\n      &lt;/plugin&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n        &lt;artifactId&gt;versions-maven-plugin&lt;/artifactId&gt;\n        &lt;version&gt;2.12.0&lt;/version&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;phase&gt;validate&lt;/phase&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;display-dependency-updates&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n              &lt;rulesUri&gt;file://${project.basedir}/compiled-rules.xml&lt;/rulesUri&gt;\n            &lt;/configuration&gt;\n          &lt;/execution&gt;\n        &lt;/executions&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n&lt;/profile&gt;\n</code></pre>\n<p>If you then execute the following Maven target:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>mvn -P rules-test &quot;-DignoredVersions=.*-(M\\d*|.*-SNAPSHOT)&quot; clean validate\n</code></pre>\n<p>then you will get a dependencies report using the filter in the <code>-DignoredVersions</code> argument (filtering out both <code>*-M*</code> and <code>*-SNAPSHOT</code>).</p>\n<p>And if you put your <code>ignoredVerions</code> property in your project instead of passing it as a -D argument, then it will be inheritable!</p>\n"},{"tags":[],"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1687879206,"creation_date":1687879206,"answer_id":76566374,"question_id":72416739,"body_markdown":"Happy this is now available natively in the plugin; see [Issue #684][1]. I recommended using at least v2.16.0 because of [Issue #959][2].\r\n\r\n\r\n  [1]: https://github.com/mojohaus/versions/issues/684\r\n  [2]: https://github.com/mojohaus/versions/issues/959","title":"Versions Maven Plugin rules that are inheritable","body":"<p>Happy this is now available natively in the plugin; see <a href=\"https://github.com/mojohaus/versions/issues/684\" rel=\"nofollow noreferrer\">Issue #684</a>. I recommended using at least v2.16.0 because of <a href=\"https://github.com/mojohaus/versions/issues/959\" rel=\"nofollow noreferrer\">Issue #959</a>.</p>\n"}],"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":730,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":76566374,"answer_count":3,"score":4,"last_activity_date":1687879206,"creation_date":1653750191,"question_id":72416739,"body_markdown":"When running `mvn versions:display-dependency-updates` for the [Version Maven Plugin][1] I see lots of things like this:\r\n\r\n```\r\n[INFO]   org.slf4j:slf4j-api ........................... 1.7.36 -&gt; 2.0.0-alpha7\r\n```\r\n\r\nBut just because I&#39;m not using the alpha version of a later version doesn&#39;t mean I&#39;m not using the latest available release version. Another [Stack Overflow answer][2] indicated that I can set up a `rules.xml` file to ignore versions like `*.-alpha*`, putting something like this in my POM:\r\n\r\n```\r\n&lt;configuration&gt;\r\n  &lt;rulesUri&gt;file:///${project.basedir}/rules.xml&lt;/rulesUri&gt;\r\n&lt;/configuration&gt;\r\n```\r\n\r\nMy question: is this `rules.xml` file inheritable? If I put it in a separate project in a parent POM of `&lt;packaging&gt;pom&lt;/packaging&gt;`, published to Maven Central, will the child POMs pick it up? Or will the child projects look for a `rules.xml` file _in the child project directory_?\r\n\r\nI want to configure the `versions-maven-plugin` in the parent POM (as I do already) and run `mvn versions:display-dependency-updates` on any child POM or descendant POM. How can I set up the ignore rules in the parent POM so that these version ignore rules will be picked up when I check for dependency updates in a child POM? (Is there no way to include the rule within the POM itself?)\r\n\r\n\r\n  [1]: https://www.mojohaus.org/versions-maven-plugin/\r\n  [2]: https://stackoverflow.com/a/48715568/","title":"Versions Maven Plugin rules that are inheritable","body":"<p>When running <code>mvn versions:display-dependency-updates</code> for the <a href=\"https://www.mojohaus.org/versions-maven-plugin/\" rel=\"nofollow noreferrer\">Version Maven Plugin</a> I see lots of things like this:</p>\n<pre><code>[INFO]   org.slf4j:slf4j-api ........................... 1.7.36 -&gt; 2.0.0-alpha7\n</code></pre>\n<p>But just because I'm not using the alpha version of a later version doesn't mean I'm not using the latest available release version. Another <a href=\"https://stackoverflow.com/a/48715568/\">Stack Overflow answer</a> indicated that I can set up a <code>rules.xml</code> file to ignore versions like <code>*.-alpha*</code>, putting something like this in my POM:</p>\n<pre><code>&lt;configuration&gt;\n  &lt;rulesUri&gt;file:///${project.basedir}/rules.xml&lt;/rulesUri&gt;\n&lt;/configuration&gt;\n</code></pre>\n<p>My question: is this <code>rules.xml</code> file inheritable? If I put it in a separate project in a parent POM of <code>&lt;packaging&gt;pom&lt;/packaging&gt;</code>, published to Maven Central, will the child POMs pick it up? Or will the child projects look for a <code>rules.xml</code> file <em>in the child project directory</em>?</p>\n<p>I want to configure the <code>versions-maven-plugin</code> in the parent POM (as I do already) and run <code>mvn versions:display-dependency-updates</code> on any child POM or descendant POM. How can I set up the ignore rules in the parent POM so that these version ignore rules will be picked up when I check for dependency updates in a child POM? (Is there no way to include the rule within the POM itself?)</p>\n"},{"tags":["java","spring","mapping","mapstruct"],"comments":[{"owner":{"account_id":10478004,"reputation":116,"user_id":7723926,"display_name":"Hamed Heidarian"},"score":0,"creation_date":1674716407,"post_id":75221003,"comment_id":132774153,"body_markdown":"Can you add Mapstruct&#39;s implementation of your mapper to the question?","body":"Can you add Mapstruct&#39;s implementation of your mapper to the question?"}],"answers":[{"tags":[],"owner":{"account_id":10478004,"reputation":116,"user_id":7723926,"display_name":"Hamed Heidarian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687878953,"creation_date":1674716487,"answer_id":75242989,"question_id":75221003,"body_markdown":"Thats most probably because you didn&#39;t provide a method that maps `List&lt;UserEntity&gt;` to `List&lt;String&gt;`.\r\nJust add such a default method and test if it works.","title":"Mention field = null in child comments but works fine for root level comments","body":"<p>Thats most probably because you didn't provide a method that maps <code>List&lt;UserEntity&gt;</code> to <code>List&lt;String&gt;</code>.\nJust add such a default method and test if it works.</p>\n"}],"owner":{"account_id":17875756,"reputation":106,"user_id":12985876,"display_name":"Taras"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1687878953,"creation_date":1674560672,"question_id":75221003,"body_markdown":"I want to make childComments nested in root comments. I did it. But the problem is that mention field = null in childComments but other fields are displayed correctly. However, for root comments, mention field works well. \r\n\r\nI also want to have only two levels of comments.\r\n\r\nRoot comments -&gt; child comments. And child comments shoul&#39;d have childComments.\r\nPerhaps I did not register the mapping correctly. I will be glad to hear your advice.\r\n\r\n        @Override\r\n          public CommentListResponse list(Specification&lt;CommentEntity&gt; spec, Pageable pageable, DeletedRecords deleted) {\r\n            pageable = DefaultSorting.apply(pageable, Sort.by(Sort.Order.desc(&quot;commentedAt&quot;)));\r\n            spec = SpecificationHelper.addDeletedFilter(spec, deleted);\r\n            Page&lt;CommentEntity&gt; page = commentRepository.findAll(spec, pageable);\r\n            List&lt;CommentListResponse.CommentItem&gt; comments = page.stream()\r\n                .filter(comment -&gt; comment.getParentCommentId() == null)\r\n                .map(comment -&gt; commentMapper.toListResponseItem(comment, deleted != null))\r\n                .toList();\r\n            return CommentListResponse.builder()\r\n                .data(comments)\r\n                .fromPage(page)\r\n                .build();\r\n          }\r\n        \r\n        \r\n        @Data\r\n        @SuperBuilder\r\n        @NoArgsConstructor\r\n        @AllArgsConstructor\r\n        @EqualsAndHashCode(callSuper = true)\r\n        public class CommentListResponse extends PagedResponse {\r\n          private List&lt;CommentItem&gt; data;\r\n        \r\n          @Data\r\n          @Builder\r\n          @NoArgsConstructor\r\n          @AllArgsConstructor\r\n          public static class CommentItem {\r\n            private long id;\r\n            private String body;\r\n            private List&lt;String&gt; mentions;\r\n            private Long parentCommentId;\r\n            private List&lt;CommentItem&gt; childComments;\r\n        \r\n            @JsonInclude(JsonInclude.Include.NON_NULL)\r\n            private Boolean deleted;\r\n        \r\n            @JsonIgnore\r\n            private boolean includeDeletedField;\r\n        \r\n            public Boolean getDeleted() {\r\n              return includeDeletedField ? deleted : null;\r\n            }\r\n          }\r\n        }\r\n        \r\n        @Mapper(componentModel = &quot;spring&quot;)\r\n        public interface CommentMapper {\r\n        \r\n          @Mapping(source = &quot;comment.mentionUsers&quot;, target = &quot;mentions&quot;)\r\n          CommentListResponse.CommentItem toListResponseItem(CommentEntity comment, boolean includeDeletedField);\r\n        }\r\n        \r\n        \r\n        @Entity\r\n        @Table(name = &quot;comment&quot;)\r\n        @Getter\r\n        @Setter\r\n        @Builder\r\n        @AllArgsConstructor\r\n        @NoArgsConstructor\r\n        @ToString(onlyExplicitlyIncluded = true)\r\n        public class CommentEntity {\r\n          @Id\r\n          @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n          @Column(name = &quot;id&quot;)\r\n          @ToString.Include\r\n          private Long id;\r\n        \r\n          @Column(name = &quot;body&quot;, nullable = false)\r\n          @ToString.Include\r\n          private String body;\r\n        \r\n          @ManyToMany(fetch = FetchType.EAGER)\r\n          @JoinTable(name = &quot;comment_user_mention&quot;,\r\n              joinColumns = @JoinColumn(name = &quot;comment_id&quot;),\r\n              inverseJoinColumns = @JoinColumn(name = &quot;user_id&quot;))\r\n          private List&lt;UserEntity&gt; mentionUsers;\r\n        \r\n          @Column(name = &quot;parent_comment_id&quot;)\r\n          @ToString.Include\r\n          private Long parentCommentId;\r\n        \r\n          @OneToMany(mappedBy = &quot;parentCommentId&quot;, fetch = FetchType.LAZY)\r\n          private List&lt;CommentEntity&gt; childComments;\r\n    }\r\n       \r\n    JSON output: {       &quot;id&quot;: 1,\r\n                        &quot;body&quot;: &quot;test root comment&quot;,\r\n                        &quot;mentions&quot;: [&quot;user-1&quot;],\r\n                        &quot;parentCommentId&quot;: null,\r\n                        &quot;childComments&quot;: [\r\n                            {\r\n                                &quot;id&quot;: 3,\r\n                                &quot;body&quot;: &quot;test child comment&quot;,\r\n                                &quot;mentions&quot;: null, - // in db i have mention for this child comment but it&#39;s null. \r\n                                &quot;parentCommentId&quot;: 1,\r\n                                   &quot;childComments&quot;: [] // i don&#39;t want to see this field in child comments.\r\n                            }\r\n            ]\r\n            }","title":"Mention field = null in child comments but works fine for root level comments","body":"<p>I want to make childComments nested in root comments. I did it. But the problem is that mention field = null in childComments but other fields are displayed correctly. However, for root comments, mention field works well.</p>\n<p>I also want to have only two levels of comments.</p>\n<p>Root comments -&gt; child comments. And child comments shoul'd have childComments.\nPerhaps I did not register the mapping correctly. I will be glad to hear your advice.</p>\n<pre><code>    @Override\n      public CommentListResponse list(Specification&lt;CommentEntity&gt; spec, Pageable pageable, DeletedRecords deleted) {\n        pageable = DefaultSorting.apply(pageable, Sort.by(Sort.Order.desc(&quot;commentedAt&quot;)));\n        spec = SpecificationHelper.addDeletedFilter(spec, deleted);\n        Page&lt;CommentEntity&gt; page = commentRepository.findAll(spec, pageable);\n        List&lt;CommentListResponse.CommentItem&gt; comments = page.stream()\n            .filter(comment -&gt; comment.getParentCommentId() == null)\n            .map(comment -&gt; commentMapper.toListResponseItem(comment, deleted != null))\n            .toList();\n        return CommentListResponse.builder()\n            .data(comments)\n            .fromPage(page)\n            .build();\n      }\n    \n    \n    @Data\n    @SuperBuilder\n    @NoArgsConstructor\n    @AllArgsConstructor\n    @EqualsAndHashCode(callSuper = true)\n    public class CommentListResponse extends PagedResponse {\n      private List&lt;CommentItem&gt; data;\n    \n      @Data\n      @Builder\n      @NoArgsConstructor\n      @AllArgsConstructor\n      public static class CommentItem {\n        private long id;\n        private String body;\n        private List&lt;String&gt; mentions;\n        private Long parentCommentId;\n        private List&lt;CommentItem&gt; childComments;\n    \n        @JsonInclude(JsonInclude.Include.NON_NULL)\n        private Boolean deleted;\n    \n        @JsonIgnore\n        private boolean includeDeletedField;\n    \n        public Boolean getDeleted() {\n          return includeDeletedField ? deleted : null;\n        }\n      }\n    }\n    \n    @Mapper(componentModel = &quot;spring&quot;)\n    public interface CommentMapper {\n    \n      @Mapping(source = &quot;comment.mentionUsers&quot;, target = &quot;mentions&quot;)\n      CommentListResponse.CommentItem toListResponseItem(CommentEntity comment, boolean includeDeletedField);\n    }\n    \n    \n    @Entity\n    @Table(name = &quot;comment&quot;)\n    @Getter\n    @Setter\n    @Builder\n    @AllArgsConstructor\n    @NoArgsConstructor\n    @ToString(onlyExplicitlyIncluded = true)\n    public class CommentEntity {\n      @Id\n      @GeneratedValue(strategy = GenerationType.IDENTITY)\n      @Column(name = &quot;id&quot;)\n      @ToString.Include\n      private Long id;\n    \n      @Column(name = &quot;body&quot;, nullable = false)\n      @ToString.Include\n      private String body;\n    \n      @ManyToMany(fetch = FetchType.EAGER)\n      @JoinTable(name = &quot;comment_user_mention&quot;,\n          joinColumns = @JoinColumn(name = &quot;comment_id&quot;),\n          inverseJoinColumns = @JoinColumn(name = &quot;user_id&quot;))\n      private List&lt;UserEntity&gt; mentionUsers;\n    \n      @Column(name = &quot;parent_comment_id&quot;)\n      @ToString.Include\n      private Long parentCommentId;\n    \n      @OneToMany(mappedBy = &quot;parentCommentId&quot;, fetch = FetchType.LAZY)\n      private List&lt;CommentEntity&gt; childComments;\n}\n   \nJSON output: {       &quot;id&quot;: 1,\n                    &quot;body&quot;: &quot;test root comment&quot;,\n                    &quot;mentions&quot;: [&quot;user-1&quot;],\n                    &quot;parentCommentId&quot;: null,\n                    &quot;childComments&quot;: [\n                        {\n                            &quot;id&quot;: 3,\n                            &quot;body&quot;: &quot;test child comment&quot;,\n                            &quot;mentions&quot;: null, - // in db i have mention for this child comment but it's null. \n                            &quot;parentCommentId&quot;: 1,\n                               &quot;childComments&quot;: [] // i don't want to see this field in child comments.\n                        }\n        ]\n        }\n</code></pre>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":4354234,"reputation":845,"user_id":3553434,"display_name":"alalalala"},"score":0,"creation_date":1687679696,"post_id":76549264,"comment_id":134968267,"body_markdown":"Most people won&#39;t look at your screenshots... Because if they try to solve your problem, they need to write a complete entity class by hand according to your screenshot.","body":"Most people won&#39;t look at your screenshots... Because if they try to solve your problem, they need to write a complete entity class by hand according to your screenshot."},{"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1687679822,"post_id":76549264,"comment_id":134968283,"body_markdown":"Hello Vlad, please don&#39;t share code as picture but paste it as formatted code. Please also tell us what kind of error are you getting.","body":"Hello Vlad, please don&#39;t share code as picture but paste it as formatted code. Please also tell us what kind of error are you getting."},{"owner":{"account_id":24661876,"reputation":3,"user_id":18558007,"display_name":"Vlad Skoromnyi"},"score":0,"creation_date":1687687651,"post_id":76549264,"comment_id":134968897,"body_markdown":"Thanks for your comment,I&#39;ve updated my question with code example","body":"Thanks for your comment,I&#39;ve updated my question with code example"},{"owner":{"account_id":15166774,"reputation":91,"user_id":10944077,"display_name":"Awais Latif"},"score":0,"creation_date":1687696720,"post_id":76549264,"comment_id":134969747,"body_markdown":"@Query(&quot;SELECT b.* FROM BookEntity b WHERE b.genre = :genre&quot;)\n        List&lt;BookEntity&gt; findAllByGenre(@Param(&quot;genre&quot;) String genre);","body":"@Query(&quot;SELECT b.* FROM BookEntity b WHERE b.genre = :genre&quot;)         List&lt;BookEntity&gt; findAllByGenre(@Param(&quot;genre&quot;) String genre);"}],"answers":[{"tags":[],"owner":{"account_id":28768367,"reputation":21,"user_id":22032734,"display_name":"lib"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687677684,"creation_date":1687677684,"answer_id":76549317,"question_id":76549264,"body_markdown":"The beauty of JPA is it automatically generates queries internally. In your case, you already passing the necessary parameters as array of genre. This ideally will work and JPA will do the heavy lifting for you.\r\n\r\nIn case you want to define a custom SQL query by yourself do refer the following read:\r\n\r\nhttps://stackoverflow.com/questions/22935278/is-it-possible-to-use-an-array-object-as-a-parameter-in-spring-repository-query\r\n\r\nHope this helps.\r\n\r\n","title":"Java Spring Boot, Repository method for getting all entity by value from Array","body":"<p>The beauty of JPA is it automatically generates queries internally. In your case, you already passing the necessary parameters as array of genre. This ideally will work and JPA will do the heavy lifting for you.</p>\n<p>In case you want to define a custom SQL query by yourself do refer the following read:</p>\n<p><a href=\"https://stackoverflow.com/questions/22935278/is-it-possible-to-use-an-array-object-as-a-parameter-in-spring-repository-query\">Is it possible to use an Array object as a parameter in Spring Repository @Query annotation?</a></p>\n<p>Hope this helps.</p>\n"},{"tags":[],"owner":{"account_id":13223229,"reputation":53,"user_id":9549261,"display_name":"Ali Booresh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687878948,"creation_date":1687689646,"answer_id":76549990,"question_id":76549264,"body_markdown":"It&#39;s better to be this way,\r\nfirst, create a Genre class:\r\n\r\n```java \r\npublic class Genre {\r\n    Long id;\r\n    String title;\r\n    String description;\r\n}\r\n```\r\nand Book class:\r\n\r\n```java \r\npublic class Book {\r\n    Long id;\r\n    String title;\r\n    String author;\r\n    .\r\n    .\r\n    .\r\n    @OneToMany\r\n    List&lt;Genre&gt; genres;\r\n}\r\n```\r\n\r\nnow you can get Book entities using a query;\r\nread this to create query:\r\nhttps://stackoverflow.com/questions/15251761/sql-query-one-to-many-relationship\r\n\r\n","title":"Java Spring Boot, Repository method for getting all entity by value from Array","body":"<p>It's better to be this way,\nfirst, create a Genre class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Genre {\n    Long id;\n    String title;\n    String description;\n}\n</code></pre>\n<p>and Book class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Book {\n    Long id;\n    String title;\n    String author;\n    .\n    .\n    .\n    @OneToMany\n    List&lt;Genre&gt; genres;\n}\n</code></pre>\n<p>now you can get Book entities using a query;\nread this to create query:\n<a href=\"https://stackoverflow.com/questions/15251761/sql-query-one-to-many-relationship\">SQL query one to many relationship</a></p>\n"},{"tags":[],"owner":{"account_id":24661876,"reputation":3,"user_id":18558007,"display_name":"Vlad Skoromnyi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687690870,"creation_date":1687690870,"answer_id":76550074,"question_id":76549264,"body_markdown":"Thanks for you suggestions, I&#39;ve found solution with Native Query\r\nThat is working for me\r\nThis is code of BookRepository method for getting all books by genre\r\n   \r\n\r\n     @Query(value = &quot;SELECT * FROM book_entity WHERE genre LIKE %:genre%&quot;, nativeQuery = true)\r\n        List&lt;BookEntity&gt; findAllByGenre(@Param(&quot;genre&quot;) String genre);","title":"Java Spring Boot, Repository method for getting all entity by value from Array","body":"<p>Thanks for you suggestions, I've found solution with Native Query\nThat is working for me\nThis is code of BookRepository method for getting all books by genre</p>\n<pre><code> @Query(value = &quot;SELECT * FROM book_entity WHERE genre LIKE %:genre%&quot;, nativeQuery = true)\n    List&lt;BookEntity&gt; findAllByGenre(@Param(&quot;genre&quot;) String genre);\n</code></pre>\n"}],"owner":{"account_id":24661876,"reputation":3,"user_id":18558007,"display_name":"Vlad Skoromnyi"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1687878948,"creation_date":1687676669,"question_id":76549264,"body_markdown":"I have Book entity and book repository. Book has string array with genres. I need to implement findAllByGenre method for searching all books which will be includes passed &quot;genre&quot; at their array. How it will be better to implements?\r\n[Book Entity](https://i.stack.imgur.com/Nj6G4.png)\r\n[Book Repository](https://i.stack.imgur.com/JcQhN.png)\r\n\r\nI tried to create method which will be returns List of books, but can&#39;t understood how should I pass params and do select with string\r\n\r\nUPDATED:\r\nI&#39;ve tried to implement Repository method like that\r\n\r\n    @Repository\r\n    public interface BookRepository extends CrudRepository&lt;BookEntity, Long&gt; {\r\n        \tBookEntity findOneBySlug(String slug);\r\n        \r\n        \t@Query(&quot;SELECT b FROM book_entity WHERE :genre in b.genre&quot;)\r\n        \tList&lt;BookEntity&gt; findAllByGenre(@Param(&quot;genre&quot;) String genre);\r\n    }\r\n\r\nAlso I&#39;m sharing BookEntity code\r\n\r\n    package com.uabookserver.uabookserver.entity;\r\n    \r\n    import jakarta.persistence.*;\r\n    import org.springframework.lang.NonNull;\r\n    \r\n        @Entity\r\n        public class BookEntity {\r\n          \t@Id\r\n          \t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n          \tprivate Long id;\r\n        \t@NonNull\r\n        \tprivate String slug;\r\n        \tprivate String title;\r\n          \tprivate String author;\r\n          \tprivate String country;\r\n        \tprivate int year;\r\n        \tprivate String[] genre;\r\n        \tprivate int likes = 0;\r\n          \tprivate int bookmarks = 0;\r\n          \tprivate int downloads = 0;\r\n        \t@Lob\r\n        \tprivate String image;\r\n        \t@Lob\r\n        \tprivate String[] file;\r\n        \r\n          \tpublic BookEntity() {}\r\n        \r\n        \tpublic Long getId() {\r\n        \t  return id;\r\n        \t}\r\n        \r\n        \tpublic void setId(Long id) {\r\n        \t  this.id = id;\r\n        \t}\r\n        \r\n        \tpublic String getSlug() {\r\n        \t  return slug;\r\n        \t}\r\n        \r\n        \tpublic void setSlug(String slug) {\r\n        \t  this.slug = slug;\r\n        \t}\r\n        \r\n        \tpublic String getTitle() {\r\n        \t  return title;\r\n        \t}\r\n        \r\n        \tpublic void setTitle(String title) {\r\n        \t  this.title = title;\r\n        \t}\r\n        \r\n        \tpublic String getAuthor() {\r\n        \t  return author;\r\n        \t}\r\n        \r\n        \tpublic void setAuthor(String author) {\r\n        \t  this.author = author;\r\n        \t}\r\n        \r\n        \tpublic int getYear() {\r\n        \t  return year;\r\n        \t}\r\n        \r\n        \tpublic void setYear(int year) {\r\n        \t  this.year = year;\r\n        \t}\r\n        \r\n        \tpublic String[] getGenre() {\r\n        \t  return genre;\r\n        \t}\r\n        \r\n        \tpublic void setGenre(String[] genre) {\r\n        \t  this.genre = genre;\r\n        \t}\r\n        \r\n        \tpublic int getLikes() {\r\n        \t  return likes;\r\n        \t}\r\n        \r\n        \tpublic void setLikes(int likes) {\r\n        \t  this.likes = likes;\r\n        \t}\r\n        \r\n        \tpublic int getBookmarks() {\r\n        \t  return bookmarks;\r\n        \t}\r\n        \r\n        \tpublic void setBookmarks(int bookmarks) {\r\n        \t  this.bookmarks = bookmarks;\r\n        \t}\r\n        \r\n        \tpublic String getCountry() {\r\n        \t  return country;\r\n        \t}\r\n        \r\n        \tpublic void setCountry(String country) {\r\n        \t  this.country = country;\r\n        \t}\r\n        \r\n        \tpublic int getDownloads() {\r\n        \t  return downloads;\r\n        \t}\r\n        \r\n        \tpublic void setDownloads(int downloads) {\r\n        \t  this.downloads = downloads;\r\n        \t}\r\n        \r\n        \tpublic String getImage() {\r\n        \t  return image;\r\n        \t}\r\n        \r\n        \tpublic void setImage(String image) {\r\n        \t  this.image = image;\r\n        \t}\r\n        \r\n        \tpublic String[] getFile() {\r\n        \t  return file;\r\n        \t}\r\n        \r\n        \tpublic void setFile(String[] file) {\r\n        \t  this.file = file;\r\n        \t}\r\n        }\r\n\r\nAnd BokkService method for getting all books by genre\r\n\r\n    public List&lt;Book&gt; getAllByGenre(String genre) {\r\n    \t  \tList&lt;BookEntity&gt; books = bookRepository.findAllByGenre(genre);\r\n    \t\tList&lt;Book&gt; models = this.convertToModelsList(books);\r\n    \t\treturn models;\r\n    \t}\r\n\r\n","title":"Java Spring Boot, Repository method for getting all entity by value from Array","body":"<p>I have Book entity and book repository. Book has string array with genres. I need to implement findAllByGenre method for searching all books which will be includes passed &quot;genre&quot; at their array. How it will be better to implements?\n<a href=\"https://i.stack.imgur.com/Nj6G4.png\" rel=\"nofollow noreferrer\">Book Entity</a>\n<a href=\"https://i.stack.imgur.com/JcQhN.png\" rel=\"nofollow noreferrer\">Book Repository</a></p>\n<p>I tried to create method which will be returns List of books, but can't understood how should I pass params and do select with string</p>\n<p>UPDATED:\nI've tried to implement Repository method like that</p>\n<pre><code>@Repository\npublic interface BookRepository extends CrudRepository&lt;BookEntity, Long&gt; {\n        BookEntity findOneBySlug(String slug);\n    \n        @Query(&quot;SELECT b FROM book_entity WHERE :genre in b.genre&quot;)\n        List&lt;BookEntity&gt; findAllByGenre(@Param(&quot;genre&quot;) String genre);\n}\n</code></pre>\n<p>Also I'm sharing BookEntity code</p>\n<pre><code>package com.uabookserver.uabookserver.entity;\n\nimport jakarta.persistence.*;\nimport org.springframework.lang.NonNull;\n\n    @Entity\n    public class BookEntity {\n        @Id\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\n        private Long id;\n        @NonNull\n        private String slug;\n        private String title;\n        private String author;\n        private String country;\n        private int year;\n        private String[] genre;\n        private int likes = 0;\n        private int bookmarks = 0;\n        private int downloads = 0;\n        @Lob\n        private String image;\n        @Lob\n        private String[] file;\n    \n        public BookEntity() {}\n    \n        public Long getId() {\n          return id;\n        }\n    \n        public void setId(Long id) {\n          this.id = id;\n        }\n    \n        public String getSlug() {\n          return slug;\n        }\n    \n        public void setSlug(String slug) {\n          this.slug = slug;\n        }\n    \n        public String getTitle() {\n          return title;\n        }\n    \n        public void setTitle(String title) {\n          this.title = title;\n        }\n    \n        public String getAuthor() {\n          return author;\n        }\n    \n        public void setAuthor(String author) {\n          this.author = author;\n        }\n    \n        public int getYear() {\n          return year;\n        }\n    \n        public void setYear(int year) {\n          this.year = year;\n        }\n    \n        public String[] getGenre() {\n          return genre;\n        }\n    \n        public void setGenre(String[] genre) {\n          this.genre = genre;\n        }\n    \n        public int getLikes() {\n          return likes;\n        }\n    \n        public void setLikes(int likes) {\n          this.likes = likes;\n        }\n    \n        public int getBookmarks() {\n          return bookmarks;\n        }\n    \n        public void setBookmarks(int bookmarks) {\n          this.bookmarks = bookmarks;\n        }\n    \n        public String getCountry() {\n          return country;\n        }\n    \n        public void setCountry(String country) {\n          this.country = country;\n        }\n    \n        public int getDownloads() {\n          return downloads;\n        }\n    \n        public void setDownloads(int downloads) {\n          this.downloads = downloads;\n        }\n    \n        public String getImage() {\n          return image;\n        }\n    \n        public void setImage(String image) {\n          this.image = image;\n        }\n    \n        public String[] getFile() {\n          return file;\n        }\n    \n        public void setFile(String[] file) {\n          this.file = file;\n        }\n    }\n</code></pre>\n<p>And BokkService method for getting all books by genre</p>\n<pre><code>public List&lt;Book&gt; getAllByGenre(String genre) {\n        List&lt;BookEntity&gt; books = bookRepository.findAllByGenre(genre);\n        List&lt;Book&gt; models = this.convertToModelsList(books);\n        return models;\n    }\n</code></pre>\n"},{"tags":["java","multithreading","user-interface","javafx","scene"],"comments":[{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":1,"creation_date":1687854223,"post_id":76562756,"comment_id":134991168,"body_markdown":"It sems really odd that you&#39;re starting a thread in the initialize method of your controller. I strongly suspect you&#39;ll need to create a complete working example that can reproduce the issue. Are you noticing any consequences of the bug, or just you get an error message?","body":"It sems really odd that you&#39;re starting a thread in the initialize method of your controller. I strongly suspect you&#39;ll need to create a complete working example that can reproduce the issue. Are you noticing any consequences of the bug, or just you get an error message?"},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1687854489,"post_id":76562756,"comment_id":134991221,"body_markdown":"You could probably get the error message to change if you switch from `new Runnable()...` to `()-&gt;{}` since the `new Runnable()` creates an anonymous inner class presumably ` GameViewController$8.class` is the class file not getting included on the classpath?","body":"You could probably get the error message to change if you switch from <code>new Runnable()...</code> to <code>()-&gt;{}</code> since the <code>new Runnable()</code> creates an anonymous inner class presumably ` GameViewController$8.class` is the class file not getting included on the classpath?"},{"owner":{"account_id":28475833,"reputation":1,"user_id":21790510,"display_name":"Ludovico Maltagliati"},"score":0,"creation_date":1687865683,"post_id":76562756,"comment_id":134993570,"body_markdown":"Thanks for you response. To answer: \n1) Due to its random nature, i have no way to reproduce the bug constantly. The bug actually had consequences, as it stopped the normal flow of the javafx thread and prevented the gui from updating with the information received from the server.\n2) I switched all the runlater in the project as suggested, now i&#39;m waiting to see if the bug occurs again.","body":"Thanks for you response. To answer:  1) Due to its random nature, i have no way to reproduce the bug constantly. The bug actually had consequences, as it stopped the normal flow of the javafx thread and prevented the gui from updating with the information received from the server. 2) I switched all the runlater in the project as suggested, now i&#39;m waiting to see if the bug occurs again."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1687903257,"post_id":76562756,"comment_id":135001705,"body_markdown":"Are you using a framework other than JavaFX (e.g., Spring, CDI, etc.)? Are there any custom class loaders/module layers being used? How is your application deployed/built? How are you running the application?","body":"Are you using a framework other than JavaFX (e.g., Spring, CDI, etc.)? Are there any custom class loaders/module layers being used? How is your application deployed/built? How are you running the application?"},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1687987705,"post_id":76562756,"comment_id":135015307,"body_markdown":"Just as a background FYI, review [java compiled classes contain dollar signs](https://stackoverflow.com/questions/11388840/java-compiled-classes-contain-dollar-signs), to understand what `view.gui.GameViewController$8` is.  It is almost as though you don&#39;t have the correct binary version of your compiled code available, leading to runtime incompatibilities in calls due to an expected binary interface (e.g. a lambda definition on anonymous inner class in GameViewController) being unavailable (why I don&#39;t know).","body":"Just as a background FYI, review <a href=\"https://stackoverflow.com/questions/11388840/java-compiled-classes-contain-dollar-signs\">java compiled classes contain dollar signs</a>, to understand what <code>view.gui.GameViewController$8</code> is.  It is almost as though you don&#39;t have the correct binary version of your compiled code available, leading to runtime incompatibilities in calls due to an expected binary interface (e.g. a lambda definition on anonymous inner class in GameViewController) being unavailable (why I don&#39;t know)."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1687988421,"post_id":76562756,"comment_id":135015415,"body_markdown":"Check your build target output (or contents of the jar file you are executing).  Is there a file there named `view/gui/GameViewController$8.class`?","body":"Check your build target output (or contents of the jar file you are executing).  Is there a file there named <code>view&#47;gui&#47;GameViewController$8.class</code>?"},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1687988641,"post_id":76562756,"comment_id":135015445,"body_markdown":"If you use lambda syntax rather than an anonymous inner class, a dollar class won&#39;t be generated.  It may not solve your underlying issue, but it should at least result in a different error message (if you can reproduce the exact conditions which lead to the error, which might be difficult or impossible to do).  e.g. try `Platform.runLater(() -&gt; { /** your code */ });`","body":"If you use lambda syntax rather than an anonymous inner class, a dollar class won&#39;t be generated.  It may not solve your underlying issue, but it should at least result in a different error message (if you can reproduce the exact conditions which lead to the error, which might be difficult or impossible to do).  e.g. try <code>Platform.runLater(() -&gt; { &#47;** your code *&#47; });</code>"}],"owner":{"account_id":28475833,"reputation":1,"user_id":21790510,"display_name":"Ludovico Maltagliati"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687878933,"creation_date":1687852632,"question_id":76562756,"body_markdown":"I&#39;m building a javafx application, but I stumbled upon an error I can&#39;t find the solution to due to its random nature. When using the app, I sometimes run into this error at random parts of my code:\r\n\r\n```\r\nException in thread &quot;Thread-20&quot; java.lang.NoClassDefFoundError: view/gui/GameViewController$8\r\n    at view.gui.GameViewController.handleEvent(GameViewController.java:876)\r\n    at view.gui.GameViewController.lambda$initialize$0(GameViewController.java:161)\r\n    at java.base/java.lang.Thread.run(Thread.java:1589)\r\nCaused by: java.lang.ClassNotFoundException: view.gui.GameViewController$8\r\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\r\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\r\n    at java.base/jdk.lang.ClassLoader.loadClass(ClassLoader.java:521)\r\n    ... 3 more\r\n```\r\n\r\nImportant to say that the number of the affected thread seems to be completely random, I just put this error log in which the Thread is number 20, but that should not be relevant to the issue. The classes in which the error occurs are the javafx controllers I use to manage the scenes of my app with. In this case the issue came from handleEvent(), a method called from a thread created in the initialize method of the controller, which is used to receive events from the server during a game and update the GUI based on the information received.\r\n\r\nHere are the code snippets cited in the error, even though the random nature of the issue makes me think it might not be important:\r\n\r\n```\r\n        serverThread = new Thread(() -&gt; {  //thread in the initialize method of the controller  \r\n            while (state != ClientStatus.Disconnected) {\r\n                synchronized (networkManager) {\r\n                    try {\r\n                        while (!networkManager.hasEvent()) {\r\n                            networkManager.wait();\r\n                        }\r\n                    } catch (InterruptedException e) {\r\n                        break;\r\n                    }\r\n                }\r\n                handleEvent(); //This is line 161\r\n            }\r\n        });\r\n        serverThread.start();\r\n```\r\n\r\n```\r\n                Platform.runLater(new Runnable() { //line 876, snippet from handleEvent method\r\n                    @Override\r\n                    public void run() {\r\n                        fillScene(gameData.getTableTop()); //lines to update gui\r\n                        fillShelf(gameData.getMyShelf());\r\n                        selectedImages.clear();\r\n                    }\r\n                });\r\n```\r\n\r\nAlso important to say that in this instance, the bug apparently happened at the Platform.runLater, but other times happened at random lines.\r\n\r\nI tried to find what would cause the issue but it&#39;s really difficult. The problem is that it seems to be completely random and happened to other classes in the project, so I have no real way to reproduce it. I only once managed to reproduce the bug following a series of certain actions using the app, but a more recent instance of this bug in a completely unrelated part of the project makes me think it&#39;s just a sleeping issue that could be anywhere and said series of actions might just make it more likely to happen than others actions.  After managing to reproduce it, I tried many times to make it fire again, but with no success.","title":"Random NoClassDefFoundError in app threads in javafx application","body":"<p>I'm building a javafx application, but I stumbled upon an error I can't find the solution to due to its random nature. When using the app, I sometimes run into this error at random parts of my code:</p>\n<pre><code>Exception in thread &quot;Thread-20&quot; java.lang.NoClassDefFoundError: view/gui/GameViewController$8\n    at view.gui.GameViewController.handleEvent(GameViewController.java:876)\n    at view.gui.GameViewController.lambda$initialize$0(GameViewController.java:161)\n    at java.base/java.lang.Thread.run(Thread.java:1589)\nCaused by: java.lang.ClassNotFoundException: view.gui.GameViewController$8\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\n    at java.base/jdk.lang.ClassLoader.loadClass(ClassLoader.java:521)\n    ... 3 more\n</code></pre>\n<p>Important to say that the number of the affected thread seems to be completely random, I just put this error log in which the Thread is number 20, but that should not be relevant to the issue. The classes in which the error occurs are the javafx controllers I use to manage the scenes of my app with. In this case the issue came from handleEvent(), a method called from a thread created in the initialize method of the controller, which is used to receive events from the server during a game and update the GUI based on the information received.</p>\n<p>Here are the code snippets cited in the error, even though the random nature of the issue makes me think it might not be important:</p>\n<pre><code>        serverThread = new Thread(() -&gt; {  //thread in the initialize method of the controller  \n            while (state != ClientStatus.Disconnected) {\n                synchronized (networkManager) {\n                    try {\n                        while (!networkManager.hasEvent()) {\n                            networkManager.wait();\n                        }\n                    } catch (InterruptedException e) {\n                        break;\n                    }\n                }\n                handleEvent(); //This is line 161\n            }\n        });\n        serverThread.start();\n</code></pre>\n<pre><code>                Platform.runLater(new Runnable() { //line 876, snippet from handleEvent method\n                    @Override\n                    public void run() {\n                        fillScene(gameData.getTableTop()); //lines to update gui\n                        fillShelf(gameData.getMyShelf());\n                        selectedImages.clear();\n                    }\n                });\n</code></pre>\n<p>Also important to say that in this instance, the bug apparently happened at the Platform.runLater, but other times happened at random lines.</p>\n<p>I tried to find what would cause the issue but it's really difficult. The problem is that it seems to be completely random and happened to other classes in the project, so I have no real way to reproduce it. I only once managed to reproduce the bug following a series of certain actions using the app, but a more recent instance of this bug in a completely unrelated part of the project makes me think it's just a sleeping issue that could be anywhere and said series of actions might just make it more likely to happen than others actions.  After managing to reproduce it, I tried many times to make it fire again, but with no success.</p>\n"},{"tags":["java","spring","caching","spring-el"],"comments":[{"owner":{"account_id":304772,"reputation":11223,"user_id":614482,"accept_rate":80,"display_name":"Emerson Farrugia"},"score":0,"creation_date":1338658910,"post_id":10678524,"comment_id":14153952,"body_markdown":"In http://www.infoq.com/presentations/Spring-Security-3 (at 1:04:00), Wiesner uses filterObject as a handle to the return value, but that&#39;s probably only a Spring Security handle. Worth a shot I guess.","body":"In <a href=\"http://www.infoq.com/presentations/Spring-Security-3\" rel=\"nofollow noreferrer\">infoq.com/presentations/Spring-Security-3</a> (at 1:04:00), Wiesner uses filterObject as a handle to the return value, but that&#39;s probably only a Spring Security handle. Worth a shot I guess."},{"owner":{"account_id":160808,"reputation":2328,"user_id":381140,"display_name":"Stevo Slavić"},"score":1,"creation_date":1354576814,"post_id":10678524,"comment_id":18802101,"body_markdown":"You can&#39;t, yet, see [SPR-8871](https://jira.springsource.org/browse/SPR-8871) and get involved.","body":"You can&#39;t, yet, see <a href=\"https://jira.springsource.org/browse/SPR-8871\" rel=\"nofollow noreferrer\">SPR-8871</a> and get involved."}],"answers":[{"tags":[],"owner":{"account_id":192575,"reputation":2350,"user_id":433789,"display_name":"sdouglass"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1340412122,"creation_date":1339095386,"answer_id":10938115,"question_id":10678524,"body_markdown":"It doesn&#39;t seem like there is any way to reference the returned object:\r\n\r\nhttp://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/cache.html#cache-spel-context\r\n\r\nBut why do you need to do that? You can refer to the arguments in the @CacheEvict &quot;key&quot; value, e.g.:\r\n\r\n    @CacheEvict(value = CACHE_BY_ID, key = &quot;#userID&quot;)\r\n    public T delete(AppID appID, UserID userID) throws UserNotFoundException {\r\n    ...\r\n    }\r\n\r\nMore example code in response to response below about having to evict from multiple caches using multiple properties of a User object:\r\n\r\n    @Caching(evict = {\r\n        @CacheEvict(value = CACHE_BY_ID, key = &quot;#user.userID&quot;),\r\n        @CacheEvict(value = CACHE_BY_LOGIN_NAME, key = &quot;#user.loginName&quot;)\r\n        // etc.\r\n    })\r\n    public T delete(AppID appID, User user) throws UserNotFoundException {\r\n    ...\r\n    }\r\n\r\n","title":"Spring 3.1 cache - how to use the returned value in the SpEL","body":"<p>It doesn't seem like there is any way to reference the returned object:</p>\n\n<p><a href=\"http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/cache.html#cache-spel-context\" rel=\"nofollow\">http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/cache.html#cache-spel-context</a></p>\n\n<p>But why do you need to do that? You can refer to the arguments in the @CacheEvict \"key\" value, e.g.:</p>\n\n<pre><code>@CacheEvict(value = CACHE_BY_ID, key = \"#userID\")\npublic T delete(AppID appID, UserID userID) throws UserNotFoundException {\n...\n}\n</code></pre>\n\n<p>More example code in response to response below about having to evict from multiple caches using multiple properties of a User object:</p>\n\n<pre><code>@Caching(evict = {\n    @CacheEvict(value = CACHE_BY_ID, key = \"#user.userID\"),\n    @CacheEvict(value = CACHE_BY_LOGIN_NAME, key = \"#user.loginName\")\n    // etc.\n})\npublic T delete(AppID appID, User user) throws UserNotFoundException {\n...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":179597,"reputation":2025,"user_id":412366,"accept_rate":59,"display_name":"Matt Broekhuis"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1551807972,"creation_date":1551807972,"answer_id":55008712,"question_id":10678524,"body_markdown":"try using #result in your SpEL","title":"Spring 3.1 cache - how to use the returned value in the SpEL","body":"<p>try using #result in your SpEL</p>\n"},{"tags":[],"owner":{"account_id":16157455,"reputation":11,"user_id":11664392,"display_name":"Max O"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687878899,"creation_date":1687524715,"answer_id":76540310,"question_id":10678524,"body_markdown":"As mentioned above and according to `Table 29.1 of the Cache SpEL available metadata at ` at\r\n https://docs.spring.io/spring-framework/docs/4.0.x/spring-framework-reference/html/cache.html\r\n\r\nit is possible to use #result in &#39;unless&#39; expressions and &#39;cache evict&#39; expressions only when beforeInvocation is false.\r\n\r\nTo confirm, I have recently used #result successfully in @CacheEvict.","title":"Spring 3.1 cache - how to use the returned value in the SpEL","body":"<p>As mentioned above and according to <code>Table 29.1 of the Cache SpEL available metadata at </code> at\n<a href=\"https://docs.spring.io/spring-framework/docs/4.0.x/spring-framework-reference/html/cache.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-framework/docs/4.0.x/spring-framework-reference/html/cache.html</a></p>\n<p>it is possible to use #result in 'unless' expressions and 'cache evict' expressions only when beforeInvocation is false.</p>\n<p>To confirm, I have recently used #result successfully in @CacheEvict.</p>\n"}],"owner":{"account_id":60165,"reputation":372,"user_id":179838,"accept_rate":80,"display_name":"Francisco Lozano"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5431,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":10938115,"answer_count":3,"score":3,"last_activity_date":1687878899,"creation_date":1337562319,"question_id":10678524,"body_markdown":"I am trying to make an eviction of an entry in a Spring-managed cache (Spring 3.1 abstraction). \r\n\r\nI need to refer to the returned value of the method in the SpEL of the &quot;key&quot; property in the annotation:\r\n\r\n    \t/* (How to refer to the &#39;T&#39; returned value in the &quot;KEY_ID&quot;?) */\r\n\t@Caching(evict = { @CacheEvict(value = CACHE_BY_ID, key = KEY_ID) })\r\n\tpublic T delete(AppID appID, UserID userID) throws UserNotFoundException {\r\n\t\treturn inner.delete(appID, userID);\r\n\t}\r\n\r\nIs there any way to do this?","title":"Spring 3.1 cache - how to use the returned value in the SpEL","body":"<p>I am trying to make an eviction of an entry in a Spring-managed cache (Spring 3.1 abstraction). </p>\n\n<p>I need to refer to the returned value of the method in the SpEL of the \"key\" property in the annotation:</p>\n\n<pre><code>    /* (How to refer to the 'T' returned value in the \"KEY_ID\"?) */\n@Caching(evict = { @CacheEvict(value = CACHE_BY_ID, key = KEY_ID) })\npublic T delete(AppID appID, UserID userID) throws UserNotFoundException {\n    return inner.delete(appID, userID);\n}\n</code></pre>\n\n<p>Is there any way to do this?</p>\n"},{"tags":["java","constructor","multiple-instances"],"comments":[{"owner":{"account_id":5356655,"reputation":5914,"user_id":4269149,"display_name":"Sarthak Mittal"},"score":1,"creation_date":1687878210,"post_id":76566222,"comment_id":134996868,"body_markdown":"remove static keyword from your name field, and also from your getName function","body":"remove static keyword from your name field, and also from your getName function"}],"answers":[{"tags":[],"owner":{"account_id":8047538,"reputation":423,"user_id":6067302,"display_name":"TomekK"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1687878234,"creation_date":1687878234,"answer_id":76566240,"question_id":76566222,"body_markdown":"Your field is static, meaning that all objects you create for this class share the same value.\r\n\r\n    private static String name -&gt; private String name\r\n\r\nFor non-static fields every object has it&#39;s own value.","title":"Creating multiple instances of a constructor with different values","body":"<p>Your field is static, meaning that all objects you create for this class share the same value.</p>\n<pre><code>private static String name -&gt; private String name\n</code></pre>\n<p>For non-static fields every object has it's own value.</p>\n"}],"owner":{"account_id":28905957,"reputation":1,"user_id":22139973,"display_name":"PeytonPlayz595"},"comment_count":1,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1687878514,"answer_count":1,"score":-3,"last_activity_date":1687878234,"creation_date":1687878118,"question_id":76566222,"body_markdown":"I have a class with a constructor\r\n\r\n```java\r\npublic class Test {\r\n  private static String name;\r\n\r\n  public Test(String name) {\r\n    this.name = name;\r\n  }\r\n\r\n  public static String getName() {\r\n    return this.name;\r\n  }\r\n}\r\n```\r\n\r\nHere I&#39;ve created 2 instances of the constructor and used System.out.println() to output the &quot;getName()&quot; function from both instances in the terminal\r\n\r\n```java\r\nTest test = new Test(&quot;Tom&quot;);\r\nTest test1 = new Test(&quot;Kenny&quot;);\r\n\r\nSystem.out.println(test.getName());\r\nSystem.out.println(test2.getName());\r\n```\r\n\r\noutput:\r\n```\r\nTom\r\nTom\r\n```\r\nBoth of the outputs we&#39;re &quot;Tom&quot;, how would I make it to where test.getName() outputs &quot;Tom&quot; and test2.getName() outputs &quot;Kenny\r\n\r\nI&#39;ve looked for answers on StackOverFlow, google, etc and can&#39;t find anything so help would be very much appreciated","title":"Creating multiple instances of a constructor with different values","body":"<p>I have a class with a constructor</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Test {\n  private static String name;\n\n  public Test(String name) {\n    this.name = name;\n  }\n\n  public static String getName() {\n    return this.name;\n  }\n}\n</code></pre>\n<p>Here I've created 2 instances of the constructor and used System.out.println() to output the &quot;getName()&quot; function from both instances in the terminal</p>\n<pre class=\"lang-java prettyprint-override\"><code>Test test = new Test(&quot;Tom&quot;);\nTest test1 = new Test(&quot;Kenny&quot;);\n\nSystem.out.println(test.getName());\nSystem.out.println(test2.getName());\n</code></pre>\n<p>output:</p>\n<pre><code>Tom\nTom\n</code></pre>\n<p>Both of the outputs we're &quot;Tom&quot;, how would I make it to where test.getName() outputs &quot;Tom&quot; and test2.getName() outputs &quot;Kenny</p>\n<p>I've looked for answers on StackOverFlow, google, etc and can't find anything so help would be very much appreciated</p>\n"},{"tags":["java","spring","hibernate","spring-transactions"],"comments":[{"owner":{"account_id":8047538,"reputation":423,"user_id":6067302,"display_name":"TomekK"},"score":1,"creation_date":1687877825,"post_id":76566145,"comment_id":134996796,"body_markdown":"For @Transactional method to have an effect, it needs to be called from outside of the class where you declared it.","body":"For @Transactional method to have an effect, it needs to be called from outside of the class where you declared it."},{"owner":{"account_id":881430,"reputation":290,"user_id":263597,"display_name":"gbuys"},"score":0,"creation_date":1687878188,"post_id":76566145,"comment_id":134996864,"body_markdown":"You start your first transaction at getStudent with @Transactional.  You should return from that method and then start a new Transaction from outside where you call second an third change as TomekK states","body":"You start your first transaction at getStudent with @Transactional.  You should return from that method and then start a new Transaction from outside where you call second an third change as TomekK states"},{"owner":{"account_id":12219091,"reputation":141,"user_id":8918627,"display_name":"Amit Chaudhary"},"score":0,"creation_date":1687879231,"post_id":76566145,"comment_id":134997091,"body_markdown":"Thanks @TomekK, it worked when secondChange() is called from out side of class. One more thing, I was asked this question in interview that there are 3 methods  a(), b(), c(). a() calls b() then b() calls c() i.e. a()-&gt;b()-&gt;c(). Some exception happens in b() and I needed to figure out a way to rollback transaction in b() and c() but changes in a() should be persisted. Not sure how could I have answered that?","body":"Thanks @TomekK, it worked when secondChange() is called from out side of class. One more thing, I was asked this question in interview that there are 3 methods  a(), b(), c(). a() calls b() then b() calls c() i.e. a()-&gt;b()-&gt;c(). Some exception happens in b() and I needed to figure out a way to rollback transaction in b() and c() but changes in a() should be persisted. Not sure how could I have answered that?"},{"owner":{"account_id":8047538,"reputation":423,"user_id":6067302,"display_name":"TomekK"},"score":1,"creation_date":1687879790,"post_id":76566145,"comment_id":134997216,"body_markdown":"@AmitChaudhary It&#39;s hard to say without knowing full requirements. You could for example surround method calls in try...catch.","body":"@AmitChaudhary It&#39;s hard to say without knowing full requirements. You could for example surround method calls in try...catch."}],"owner":{"account_id":12219091,"reputation":141,"user_id":8918627,"display_name":"Amit Chaudhary"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687877662,"creation_date":1687877662,"question_id":76566145,"body_markdown":"I am trying to understand `@Transactional` annotation in spring. I have created following program for testing-\r\n```\r\nimport com.transactiondemo.transactiondemo.model.Student;\r\nimport com.transactiondemo.transactiondemo.repo.StudentRepo;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Service;\r\nimport org.springframework.transaction.annotation.Propagation;\r\nimport org.springframework.transaction.annotation.Transactional;\r\n\r\n@Service\r\npublic class StudentService {\r\n\r\n    @Autowired\r\n    private StudentRepo studentRepo;\r\n\r\n    @Transactional\r\n    public Student getStudent(String name){\r\n        Student student = studentRepo.findByName(name);\r\n        student.setSubject(&quot;first change done&quot;);\r\n        studentRepo.save(student);\r\n        try{\r\n            secondChange(name);\r\n        }\r\n        catch (Exception e){\r\n            System.out.println(&quot;***********caught&quot;);\r\n        }\r\n        return student;\r\n    }\r\n\r\n    @Transactional(propagation = Propagation.REQUIRES_NEW, rollbackFor = Exception.class)\r\n    public void secondChange(String name) {\r\n        Student student = studentRepo.findByName(name);\r\n        student.setSubject(&quot;second change done&quot;);\r\n        thirdChange(name);\r\n        throw new RuntimeException();\r\n    }\r\n\r\n    private void thirdChange(String name) {\r\n        Student student = studentRepo.findByName(name);\r\n        student.setSubject(&quot;third change done&quot;);\r\n    }\r\n}\r\n\r\n```\r\n```\r\n@ResponseStatus\r\npublic interface StudentRepo extends JpaRepository&lt;Student,Integer&gt; {\r\n    Student findByName(String name);\r\n}\r\n```\r\nHere is how I am loading data in Student table at application startup-\r\n\r\n```\r\n@Bean\r\nCommandLineRunner loadData(StudentRepo studentRepo){\r\n\treturn args -&gt; {\r\n\t\tStudent s=new Student();\r\n\t\ts.setName(&quot;ram&quot;);\r\n\t\ts.setSubject(&quot;initial value&quot;);\r\n\t\tstudentRepo.save(s);\r\n\t};\r\n}\r\n```\r\n\r\nI am calling `studentService.getStudent(&quot;ram&quot;)` from my controller class. How do I make sure that database changes done in `studentService.getStudent()` method are persisted into database even if next called method i.e. `secondChange` from this method throws any exception? **Basically I want changes done in `secondChange()` and `thirdChange()` methods to be rolled-back but not for `getStudent()` method**. I have added `@Transactional(propagation = Propagation.REQUIRES_NEW, rollbackFor = Exception.class)` on top of `secondChange()` method but this does not work. When I check in database the value for `SUBJECT` column is equal to `third change done` but I want it to be `first change done` even in case of failures.\r\n","title":"Spring Transaction Propagation - Rollback for specific Transaction","body":"<p>I am trying to understand <code>@Transactional</code> annotation in spring. I have created following program for testing-</p>\n<pre><code>import com.transactiondemo.transactiondemo.model.Student;\nimport com.transactiondemo.transactiondemo.repo.StudentRepo;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Propagation;\nimport org.springframework.transaction.annotation.Transactional;\n\n@Service\npublic class StudentService {\n\n    @Autowired\n    private StudentRepo studentRepo;\n\n    @Transactional\n    public Student getStudent(String name){\n        Student student = studentRepo.findByName(name);\n        student.setSubject(&quot;first change done&quot;);\n        studentRepo.save(student);\n        try{\n            secondChange(name);\n        }\n        catch (Exception e){\n            System.out.println(&quot;***********caught&quot;);\n        }\n        return student;\n    }\n\n    @Transactional(propagation = Propagation.REQUIRES_NEW, rollbackFor = Exception.class)\n    public void secondChange(String name) {\n        Student student = studentRepo.findByName(name);\n        student.setSubject(&quot;second change done&quot;);\n        thirdChange(name);\n        throw new RuntimeException();\n    }\n\n    private void thirdChange(String name) {\n        Student student = studentRepo.findByName(name);\n        student.setSubject(&quot;third change done&quot;);\n    }\n}\n\n</code></pre>\n<pre><code>@ResponseStatus\npublic interface StudentRepo extends JpaRepository&lt;Student,Integer&gt; {\n    Student findByName(String name);\n}\n</code></pre>\n<p>Here is how I am loading data in Student table at application startup-</p>\n<pre><code>@Bean\nCommandLineRunner loadData(StudentRepo studentRepo){\n    return args -&gt; {\n        Student s=new Student();\n        s.setName(&quot;ram&quot;);\n        s.setSubject(&quot;initial value&quot;);\n        studentRepo.save(s);\n    };\n}\n</code></pre>\n<p>I am calling <code>studentService.getStudent(&quot;ram&quot;)</code> from my controller class. How do I make sure that database changes done in <code>studentService.getStudent()</code> method are persisted into database even if next called method i.e. <code>secondChange</code> from this method throws any exception? <strong>Basically I want changes done in <code>secondChange()</code> and <code>thirdChange()</code> methods to be rolled-back but not for <code>getStudent()</code> method</strong>. I have added <code>@Transactional(propagation = Propagation.REQUIRES_NEW, rollbackFor = Exception.class)</code> on top of <code>secondChange()</code> method but this does not work. When I check in database the value for <code>SUBJECT</code> column is equal to <code>third change done</code> but I want it to be <code>first change done</code> even in case of failures.</p>\n"},{"tags":["java","java-8","future"],"answers":[{"tags":[],"owner":{"account_id":1370027,"reputation":49110,"user_id":1305501,"accept_rate":77,"display_name":"nosid"},"down_vote_count":7,"up_vote_count":69,"is_accepted":true,"score":62,"last_activity_date":1572428283,"creation_date":1398457254,"answer_id":23302308,"question_id":23301598,"body_markdown":"There is a way, but you won&#39;t like it. The following method transforms a `Future&lt;T&gt;` into a `CompletableFuture&lt;T&gt;`:\r\n\r\n    public static &lt;T&gt; CompletableFuture&lt;T&gt; makeCompletableFuture(Future&lt;T&gt; future) {\r\n      if (future.isDone())\r\n        return transformDoneFuture(future);\r\n      return CompletableFuture.supplyAsync(() -&gt; {\r\n        try {\r\n          if (!future.isDone())\r\n            awaitFutureIsDoneInForkJoinPool(future);\r\n          return future.get();\r\n        } catch (ExecutionException e) {\r\n          throw new RuntimeException(e);\r\n        } catch (InterruptedException e) {\r\n          // Normally, this should never happen inside ForkJoinPool\r\n          Thread.currentThread().interrupt();\r\n          // Add the following statement if the future doesn&#39;t have side effects\r\n          // future.cancel(true);\r\n          throw new RuntimeException(e);\r\n        }\r\n      });\r\n    }\r\n\r\n    private static &lt;T&gt; CompletableFuture&lt;T&gt; transformDoneFuture(Future&lt;T&gt; future) {\r\n      CompletableFuture&lt;T&gt; cf = new CompletableFuture&lt;&gt;();\r\n      T result;\r\n      try {\r\n        result = future.get();\r\n      } catch (Throwable ex) {\r\n        cf.completeExceptionally(ex);\r\n        return cf;\r\n      }\r\n      cf.complete(result);\r\n      return cf;\r\n    }\r\n    \r\n    private static void awaitFutureIsDoneInForkJoinPool(Future&lt;?&gt; future)\r\n        throws InterruptedException {\r\n      ForkJoinPool.managedBlock(new ForkJoinPool.ManagedBlocker() {\r\n        @Override public boolean block() throws InterruptedException {\r\n          try {\r\n            future.get();\r\n          } catch (ExecutionException e) {\r\n            throw new RuntimeException(e);\r\n          }\r\n          return true;\r\n        }\r\n        @Override public boolean isReleasable() {\r\n          return future.isDone();\r\n        }\r\n      });\r\n    }\r\n\r\nObviously, the problem with this approach is, that for each _Future_, a thread will be blocked to wait for the result of the _Future_--contradicting the idea of futures. In some cases, it might be possible to do better. However, in general, there is no solution without actively wait for the result of the _Future_.","title":"Transform Java Future into a CompletableFuture","body":"<p>There is a way, but you won't like it. The following method transforms a <code>Future&lt;T&gt;</code> into a <code>CompletableFuture&lt;T&gt;</code>:</p>\n\n<pre><code>public static &lt;T&gt; CompletableFuture&lt;T&gt; makeCompletableFuture(Future&lt;T&gt; future) {\n  if (future.isDone())\n    return transformDoneFuture(future);\n  return CompletableFuture.supplyAsync(() -&gt; {\n    try {\n      if (!future.isDone())\n        awaitFutureIsDoneInForkJoinPool(future);\n      return future.get();\n    } catch (ExecutionException e) {\n      throw new RuntimeException(e);\n    } catch (InterruptedException e) {\n      // Normally, this should never happen inside ForkJoinPool\n      Thread.currentThread().interrupt();\n      // Add the following statement if the future doesn't have side effects\n      // future.cancel(true);\n      throw new RuntimeException(e);\n    }\n  });\n}\n\nprivate static &lt;T&gt; CompletableFuture&lt;T&gt; transformDoneFuture(Future&lt;T&gt; future) {\n  CompletableFuture&lt;T&gt; cf = new CompletableFuture&lt;&gt;();\n  T result;\n  try {\n    result = future.get();\n  } catch (Throwable ex) {\n    cf.completeExceptionally(ex);\n    return cf;\n  }\n  cf.complete(result);\n  return cf;\n}\n\nprivate static void awaitFutureIsDoneInForkJoinPool(Future&lt;?&gt; future)\n    throws InterruptedException {\n  ForkJoinPool.managedBlock(new ForkJoinPool.ManagedBlocker() {\n    @Override public boolean block() throws InterruptedException {\n      try {\n        future.get();\n      } catch (ExecutionException e) {\n        throw new RuntimeException(e);\n      }\n      return true;\n    }\n    @Override public boolean isReleasable() {\n      return future.isDone();\n    }\n  });\n}\n</code></pre>\n\n<p>Obviously, the problem with this approach is, that for each <em>Future</em>, a thread will be blocked to wait for the result of the <em>Future</em>--contradicting the idea of futures. In some cases, it might be possible to do better. However, in general, there is no solution without actively wait for the result of the <em>Future</em>.</p>\n"},{"tags":[],"owner":{"account_id":183320,"reputation":1243,"user_id":418615,"accept_rate":20,"display_name":"Kafkaesque"},"down_vote_count":0,"up_vote_count":73,"is_accepted":false,"score":73,"last_activity_date":1423658768,"creation_date":1423658768,"answer_id":28454743,"question_id":23301598,"body_markdown":"If the library you want to use also offers a callback style method in addition to the Future style, you can provide it a handler that completes the CompletableFuture without any extra thread blocking. Like so:\r\n\r\n\t\tAsynchronousFileChannel open = AsynchronousFileChannel.open(Paths.get(&quot;/some/file&quot;));\r\n\t\t// ... \r\n\t\tCompletableFuture&lt;ByteBuffer&gt; completableFuture = new CompletableFuture&lt;ByteBuffer&gt;();\r\n\t\topen.read(buffer, position, null, new CompletionHandler&lt;Integer, Void&gt;() {\r\n\t\t\t@Override\r\n\t\t\tpublic void completed(Integer result, Void attachment) {\r\n\t\t\t\tcompletableFuture.complete(buffer);\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void failed(Throwable exc, Void attachment) {\r\n\t\t\t\tcompletableFuture.completeExceptionally(exc);\r\n\t\t\t}\r\n\t\t});\r\n\t\tcompletableFuture.thenApply(...)\r\n\r\nWithout the callback the only other way I see solving this is to use a polling loop that puts all your `Future.isDone()` checks on a single thread and then invoking complete whenever a Future is gettable.","title":"Transform Java Future into a CompletableFuture","body":"<p>If the library you want to use also offers a callback style method in addition to the Future style, you can provide it a handler that completes the CompletableFuture without any extra thread blocking. Like so:</p>\n\n<pre><code>    AsynchronousFileChannel open = AsynchronousFileChannel.open(Paths.get(\"/some/file\"));\n    // ... \n    CompletableFuture&lt;ByteBuffer&gt; completableFuture = new CompletableFuture&lt;ByteBuffer&gt;();\n    open.read(buffer, position, null, new CompletionHandler&lt;Integer, Void&gt;() {\n        @Override\n        public void completed(Integer result, Void attachment) {\n            completableFuture.complete(buffer);\n        }\n\n        @Override\n        public void failed(Throwable exc, Void attachment) {\n            completableFuture.completeExceptionally(exc);\n        }\n    });\n    completableFuture.thenApply(...)\n</code></pre>\n\n<p>Without the callback the only other way I see solving this is to use a polling loop that puts all your <code>Future.isDone()</code> checks on a single thread and then invoking complete whenever a Future is gettable.</p>\n"},{"tags":[],"owner":{"account_id":7334204,"reputation":199,"user_id":5586158,"display_name":"Valery Silaev"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1605138842,"creation_date":1463663886,"answer_id":37324409,"question_id":23301598,"body_markdown":"Let me suggest another (hopefully, better) option:\r\nhttps://github.com/vsilaev/java-async-await/tree/master/com.farata.lang.async.examples/src/main/java/com/farata/concurrent\r\n\r\nBriefly, the idea is the following:\r\n\r\n 1. Introduce `CompletableTask&lt;V&gt;` interface -- the union of the\r\n`CompletionStage&lt;V&gt;` + `RunnableFuture&lt;V&gt;`\r\n 2. Warp `ExecutorService` to return `CompletableTask` from `submit(...)` methods (instead of `Future&lt;V&gt;`)\r\n 3. Done, we have runnable AND composable Futures.\r\n\r\nImplementation uses an alternative CompletionStage implementation (pay attention, [CompletionStage](https://github.com/lukas-krecan/completion-stage) rather than CompletableFuture):\r\n\r\n\r\nUsage:\r\n\r\n    J8ExecutorService exec = J8Executors.newCachedThreadPool();\r\n    CompletionStage&lt;String&gt; = exec\r\n       .submit( someCallableA )\r\n       .thenCombineAsync( exec.submit(someCallableB), (a, b) -&gt; a + &quot; &quot; + b)\r\n       .thenCombine( exec.submit(someCallableC), (ab, b) -&gt; ab + &quot; &quot; + c); ","title":"Transform Java Future into a CompletableFuture","body":"<p>Let me suggest another (hopefully, better) option:\n<a href=\"https://github.com/vsilaev/java-async-await/tree/master/com.farata.lang.async.examples/src/main/java/com/farata/concurrent\" rel=\"nofollow noreferrer\">https://github.com/vsilaev/java-async-await/tree/master/com.farata.lang.async.examples/src/main/java/com/farata/concurrent</a></p>\n<p>Briefly, the idea is the following:</p>\n<ol>\n<li>Introduce <code>CompletableTask&lt;V&gt;</code> interface -- the union of the\n<code>CompletionStage&lt;V&gt;</code> + <code>RunnableFuture&lt;V&gt;</code></li>\n<li>Warp <code>ExecutorService</code> to return <code>CompletableTask</code> from <code>submit(...)</code> methods (instead of <code>Future&lt;V&gt;</code>)</li>\n<li>Done, we have runnable AND composable Futures.</li>\n</ol>\n<p>Implementation uses an alternative CompletionStage implementation (pay attention, <a href=\"https://github.com/lukas-krecan/completion-stage\" rel=\"nofollow noreferrer\">CompletionStage</a> rather than CompletableFuture):</p>\n<p>Usage:</p>\n<pre><code>J8ExecutorService exec = J8Executors.newCachedThreadPool();\nCompletionStage&lt;String&gt; = exec\n   .submit( someCallableA )\n   .thenCombineAsync( exec.submit(someCallableB), (a, b) -&gt; a + &quot; &quot; + b)\n   .thenCombine( exec.submit(someCallableC), (ab, b) -&gt; ab + &quot; &quot; + c); \n</code></pre>\n"},{"tags":[],"owner":{"account_id":249267,"reputation":5487,"user_id":525203,"accept_rate":86,"display_name":"Dmitry Spikhalskiy"},"down_vote_count":1,"up_vote_count":16,"is_accepted":false,"score":15,"last_activity_date":1662578717,"creation_date":1472603967,"answer_id":39239063,"question_id":23301598,"body_markdown":"I published a little [futurity][1] project that tries to do better than [the straightforward way][2] in the answer.\r\n\r\nThe main idea is to use only one thread (and of course with not just a spin loop) to check all Futures states inside, which helps to avoid blocking a thread from a pool for each Future -&gt; CompletableFuture transformation.\r\n\r\nUsage example:\r\n\r\n    Future oldFuture = ...;\r\n    CompletableFuture profit = Futurity.shift(oldFuture);\r\n\r\n\r\n  [1]: https://github.com/Spikhalskiy/futurity\r\n  [2]: https://stackoverflow.com/a/23302308/525203","title":"Transform Java Future into a CompletableFuture","body":"<p>I published a little <a href=\"https://github.com/Spikhalskiy/futurity\" rel=\"nofollow noreferrer\">futurity</a> project that tries to do better than <a href=\"https://stackoverflow.com/a/23302308/525203\">the straightforward way</a> in the answer.</p>\n<p>The main idea is to use only one thread (and of course with not just a spin loop) to check all Futures states inside, which helps to avoid blocking a thread from a pool for each Future -&gt; CompletableFuture transformation.</p>\n<p>Usage example:</p>\n<pre><code>Future oldFuture = ...;\nCompletableFuture profit = Futurity.shift(oldFuture);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2713039,"reputation":350,"user_id":2341005,"display_name":"Gabriel Francisco"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1687877570,"creation_date":1524714948,"answer_id":50034584,"question_id":23301598,"body_markdown":"Suggestion:\r\n\r\nhttps://gabfssilva.github.io/old-java-future-to-completable-future/\r\n\r\nBut, basically:\r\n\r\n    public class CompletablePromiseContext {\r\n        private static final ScheduledExecutorService SERVICE = Executors.newSingleThreadScheduledExecutor();\r\n    \r\n        public static void schedule(Runnable r) {\r\n            SERVICE.schedule(r, 1, TimeUnit.MILLISECONDS);\r\n        }\r\n    }\r\n\r\nAnd, the CompletablePromise:\r\n\r\n    public class CompletablePromise&lt;V&gt; extends CompletableFuture&lt;V&gt; {\r\n        private Future&lt;V&gt; future;\r\n    \r\n        public CompletablePromise(Future&lt;V&gt; future) {\r\n            this.future = future;\r\n            CompletablePromiseContext.schedule(this::tryToComplete);\r\n        }\r\n    \r\n        private void tryToComplete() {\r\n            if (future.isDone()) {\r\n                try {\r\n                    complete(future.get());\r\n                } catch (InterruptedException e) {\r\n                    completeExceptionally(e);\r\n                } catch (ExecutionException e) {\r\n                    completeExceptionally(e.getCause());\r\n                }\r\n                return;\r\n            }\r\n    \r\n            if (future.isCancelled()) {\r\n                cancel(true);\r\n                return;\r\n            }\r\n    \r\n            CompletablePromiseContext.schedule(this::tryToComplete);\r\n        }\r\n    }\r\n\r\nExample:\r\n\r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            final ExecutorService service = Executors.newSingleThreadExecutor();\r\n            final Future&lt;String&gt; stringFuture = service.submit(() -&gt; &quot;success&quot;);\r\n            final CompletableFuture&lt;String&gt; completableFuture = new CompletablePromise&lt;&gt;(stringFuture);\r\n    \r\n            completableFuture.whenComplete((result, failure) -&gt; {\r\n                System.out.println(result);\r\n            });\r\n        }\r\n    }","title":"Transform Java Future into a CompletableFuture","body":"<p>Suggestion:</p>\n<p><a href=\"https://gabfssilva.github.io/old-java-future-to-completable-future/\" rel=\"nofollow noreferrer\">https://gabfssilva.github.io/old-java-future-to-completable-future/</a></p>\n<p>But, basically:</p>\n<pre><code>public class CompletablePromiseContext {\n    private static final ScheduledExecutorService SERVICE = Executors.newSingleThreadScheduledExecutor();\n\n    public static void schedule(Runnable r) {\n        SERVICE.schedule(r, 1, TimeUnit.MILLISECONDS);\n    }\n}\n</code></pre>\n<p>And, the CompletablePromise:</p>\n<pre><code>public class CompletablePromise&lt;V&gt; extends CompletableFuture&lt;V&gt; {\n    private Future&lt;V&gt; future;\n\n    public CompletablePromise(Future&lt;V&gt; future) {\n        this.future = future;\n        CompletablePromiseContext.schedule(this::tryToComplete);\n    }\n\n    private void tryToComplete() {\n        if (future.isDone()) {\n            try {\n                complete(future.get());\n            } catch (InterruptedException e) {\n                completeExceptionally(e);\n            } catch (ExecutionException e) {\n                completeExceptionally(e.getCause());\n            }\n            return;\n        }\n\n        if (future.isCancelled()) {\n            cancel(true);\n            return;\n        }\n\n        CompletablePromiseContext.schedule(this::tryToComplete);\n    }\n}\n</code></pre>\n<p>Example:</p>\n<pre><code>public class Main {\n    public static void main(String[] args) {\n        final ExecutorService service = Executors.newSingleThreadExecutor();\n        final Future&lt;String&gt; stringFuture = service.submit(() -&gt; &quot;success&quot;);\n        final CompletableFuture&lt;String&gt; completableFuture = new CompletablePromise&lt;&gt;(stringFuture);\n\n        completableFuture.whenComplete((result, failure) -&gt; {\n            System.out.println(result);\n        });\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1107482,"reputation":2870,"user_id":1098603,"accept_rate":94,"display_name":"Matthieu"},"down_vote_count":1,"up_vote_count":70,"is_accepted":false,"score":69,"last_activity_date":1652863888,"creation_date":1586422668,"answer_id":61117435,"question_id":23301598,"body_markdown":"If your `Future` is the result of a call to an [`ExecutorService`][1] method (e.g. `submit()`), the easiest would be to use the [`CompletableFuture.runAsync(Runnable, Executor)`][2] method instead.\r\n\r\nFrom\r\n\r\n    Runnbale myTask = ... ;\r\n    Future&lt;?&gt; future = myExecutor.submit(myTask);\r\n\r\nto\r\n\r\n    Runnbale myTask = ... ;\r\n    CompletableFuture&lt;?&gt; future = CompletableFuture.runAsync(myTask, myExecutor);\r\n\r\nThe `CompletableFuture` is then created &quot;natively&quot;.\r\n\r\nEDIT: Pursuing comments by @SamMefford corrected by @MartinAndersson, if you want to pass a `Callable`, you need to call [`supplyAsync()`][3], converting the `Callable&lt;T&gt;` into a `Supplier&lt;T&gt;`, e.g. with:\r\n\r\n```\r\nCompletableFuture.supplyAsync(() -&gt; {\r\n    try { return myCallable.call(); }\r\n    catch (Exception ex) { throw new CompletionException(ex); } // Or return default value\r\n}, myExecutor);\r\n```\r\n\r\nBecause `T Callable.call() throws Exception;` throws an exception and `T Supplier.get();` doesn&#39;t, you have to catch the exception so prototypes are compatible.\r\n\r\nA note on exception handling\r\n---\r\n\r\nThe `get()` method doesn&#39;t specify a `throws`, which means it should not throw a *checked* exception. However, *unchecked* exception can be used. The code in `CompletableFuture` shows that `CompletionException` is used and is unchecked (i.e. is a `RuntimeException`), hence the catch/throw wrapping any exception into a `CompletionException`.\r\n\r\nAlso, as @WeGa indicated, you can use the [`handle()`][4] method to deal with exceptions potentially being thrown by the result:\r\n\r\n```\r\nCompletableFuture&lt;T&gt; future = CompletableFuture.supplyAsync(...);\r\nfuture.handle((ex,res) -&gt; {\r\n        if (ex != null) {\r\n            // An exception occurred ...\r\n        } else {\r\n            // No exception was thrown, &#39;res&#39; is valid and can be handled here\r\n        }\r\n    });\r\n```\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html#runAsync-java.lang.Runnable-java.util.concurrent.Executor-\r\n  [3]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html#supplyAsync-java.util.function.Supplier-java.util.concurrent.Executor-\r\n  [4]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html#handle-java.util.function.BiFunction-","title":"Transform Java Future into a CompletableFuture","body":"<p>If your <code>Future</code> is the result of a call to an <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html\" rel=\"noreferrer\"><code>ExecutorService</code></a> method (e.g. <code>submit()</code>), the easiest would be to use the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html#runAsync-java.lang.Runnable-java.util.concurrent.Executor-\" rel=\"noreferrer\"><code>CompletableFuture.runAsync(Runnable, Executor)</code></a> method instead.</p>\n<p>From</p>\n<pre><code>Runnbale myTask = ... ;\nFuture&lt;?&gt; future = myExecutor.submit(myTask);\n</code></pre>\n<p>to</p>\n<pre><code>Runnbale myTask = ... ;\nCompletableFuture&lt;?&gt; future = CompletableFuture.runAsync(myTask, myExecutor);\n</code></pre>\n<p>The <code>CompletableFuture</code> is then created &quot;natively&quot;.</p>\n<p>EDIT: Pursuing comments by @SamMefford corrected by @MartinAndersson, if you want to pass a <code>Callable</code>, you need to call <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html#supplyAsync-java.util.function.Supplier-java.util.concurrent.Executor-\" rel=\"noreferrer\"><code>supplyAsync()</code></a>, converting the <code>Callable&lt;T&gt;</code> into a <code>Supplier&lt;T&gt;</code>, e.g. with:</p>\n<pre><code>CompletableFuture.supplyAsync(() -&gt; {\n    try { return myCallable.call(); }\n    catch (Exception ex) { throw new CompletionException(ex); } // Or return default value\n}, myExecutor);\n</code></pre>\n<p>Because <code>T Callable.call() throws Exception;</code> throws an exception and <code>T Supplier.get();</code> doesn't, you have to catch the exception so prototypes are compatible.</p>\n<h2>A note on exception handling</h2>\n<p>The <code>get()</code> method doesn't specify a <code>throws</code>, which means it should not throw a <em>checked</em> exception. However, <em>unchecked</em> exception can be used. The code in <code>CompletableFuture</code> shows that <code>CompletionException</code> is used and is unchecked (i.e. is a <code>RuntimeException</code>), hence the catch/throw wrapping any exception into a <code>CompletionException</code>.</p>\n<p>Also, as @WeGa indicated, you can use the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html#handle-java.util.function.BiFunction-\" rel=\"noreferrer\"><code>handle()</code></a> method to deal with exceptions potentially being thrown by the result:</p>\n<pre><code>CompletableFuture&lt;T&gt; future = CompletableFuture.supplyAsync(...);\nfuture.handle((ex,res) -&gt; {\n        if (ex != null) {\n            // An exception occurred ...\n        } else {\n            // No exception was thrown, 'res' is valid and can be handled here\n        }\n    });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8349587,"reputation":41,"user_id":6272218,"display_name":"eric goff"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1635117379,"creation_date":1635117379,"answer_id":69701439,"question_id":23301598,"body_markdown":"    public static &lt;T&gt; CompletableFuture&lt;T&gt; fromFuture(Future&lt;T&gt; f) {\r\n        return CompletableFuture.completedFuture(null).thenCompose(avoid -&gt; {\r\n            try {\r\n                return CompletableFuture.completedFuture(f.get());\r\n            } catch (InterruptedException e) {\r\n                return CompletableFuture.failedFuture(e);\r\n            } catch (ExecutionException e) {\r\n                return CompletableFuture.failedFuture(e.getCause());\r\n            }\r\n        });\r\n    }\r\n","title":"Transform Java Future into a CompletableFuture","body":"<pre><code>public static &lt;T&gt; CompletableFuture&lt;T&gt; fromFuture(Future&lt;T&gt; f) {\n    return CompletableFuture.completedFuture(null).thenCompose(avoid -&gt; {\n        try {\n            return CompletableFuture.completedFuture(f.get());\n        } catch (InterruptedException e) {\n            return CompletableFuture.failedFuture(e);\n        } catch (ExecutionException e) {\n            return CompletableFuture.failedFuture(e.getCause());\n        }\n    });\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2557108,"reputation":2556,"user_id":2218838,"accept_rate":58,"display_name":"Anderson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659196357,"creation_date":1659195677,"answer_id":73176979,"question_id":23301598,"body_markdown":"The main idea goes like this:\r\n\r\n```\r\nFuture&lt;?&gt; future = null;\r\nreturn CompletableFuture.supplyAsync(future::get);\r\n```\r\n\r\nHowever, you will receive some warnings from your compiler.\r\n\r\nSo, here is the first option.\r\n\r\n```\r\nFuture&lt;?&gt; future = null;\r\nreturn CompletableFuture.supplyAsync(\r\n        ()-&gt;{\r\n            try {\r\n                return future.get();\r\n            } catch (Exception e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        });\r\n```\r\n\r\nSecond Option, hide the try...catch via casting the functional interface.\r\n\r\n```\r\n    @FunctionalInterface\r\n    public interface MySupplier&lt;T&gt; extends Supplier&lt;T&gt; {\r\n        @Override\r\n        default T get() {\r\n            try {\r\n                return getInternal();\r\n            } catch (Exception e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        }\r\n\r\n        T getInternal() throws Exception;\r\n    }\r\n\r\n\r\n    public static void main(String[] args) {\r\n        Future&lt;?&gt; future = null;\r\n        return CompletableFuture.supplyAsync((MySupplier&lt;?&gt;) future::get);\r\n\r\n    }\r\n\r\n\r\n```\r\n\r\nThird Option, find out some 3rd party lib which has provided such a functional interface.\r\n\r\nSee Also: https://stackoverflow.com/questions/18198176/java-8-lambda-function-that-throws-exception\r\n","title":"Transform Java Future into a CompletableFuture","body":"<p>The main idea goes like this:</p>\n<pre><code>Future&lt;?&gt; future = null;\nreturn CompletableFuture.supplyAsync(future::get);\n</code></pre>\n<p>However, you will receive some warnings from your compiler.</p>\n<p>So, here is the first option.</p>\n<pre><code>Future&lt;?&gt; future = null;\nreturn CompletableFuture.supplyAsync(\n        ()-&gt;{\n            try {\n                return future.get();\n            } catch (Exception e) {\n                throw new RuntimeException(e);\n            }\n        });\n</code></pre>\n<p>Second Option, hide the try...catch via casting the functional interface.</p>\n<pre><code>    @FunctionalInterface\n    public interface MySupplier&lt;T&gt; extends Supplier&lt;T&gt; {\n        @Override\n        default T get() {\n            try {\n                return getInternal();\n            } catch (Exception e) {\n                throw new RuntimeException(e);\n            }\n        }\n\n        T getInternal() throws Exception;\n    }\n\n\n    public static void main(String[] args) {\n        Future&lt;?&gt; future = null;\n        return CompletableFuture.supplyAsync((MySupplier&lt;?&gt;) future::get);\n\n    }\n\n\n</code></pre>\n<p>Third Option, find out some 3rd party lib which has provided such a functional interface.</p>\n<p>See Also: <a href=\"https://stackoverflow.com/questions/18198176/java-8-lambda-function-that-throws-exception\">Java 8 Lambda function that throws exception?</a></p>\n"}],"owner":{"account_id":41226,"reputation":18864,"user_id":119768,"accept_rate":83,"display_name":"Dan Midwood"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":77650,"favorite_count":0,"down_vote_count":0,"up_vote_count":136,"accepted_answer_id":23302308,"answer_count":8,"score":136,"last_activity_date":1687877570,"creation_date":1398454708,"question_id":23301598,"body_markdown":"Java 8 introduces `CompletableFuture`, a new implementation of Future that is composable (includes a bunch of thenXxx methods). I&#39;d like to use this exclusively, but many of the libraries I want to use return only non-composable `Future` instances.\r\n\r\nIs there a way to wrap up a returned `Future` instances inside of a `CompleteableFuture` so that I can compose it?","title":"Transform Java Future into a CompletableFuture","body":"<p>Java 8 introduces <code>CompletableFuture</code>, a new implementation of Future that is composable (includes a bunch of thenXxx methods). I'd like to use this exclusively, but many of the libraries I want to use return only non-composable <code>Future</code> instances.</p>\n\n<p>Is there a way to wrap up a returned <code>Future</code> instances inside of a <code>CompleteableFuture</code> so that I can compose it?</p>\n"},{"tags":["java","android","android-architecture-navigation"],"owner":{"account_id":15890229,"reputation":13,"user_id":11465571,"display_name":"a.badawi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687877375,"creation_date":1687877375,"question_id":76566091,"body_markdown":"I&#39;m using navigation component.\r\n\r\nI don&#39;t want each fragment to have the next button.\r\nMy goal is putting that next button in activity, and each fragment implements its own destination and maybe doing some validation.\r\n \r\n\r\nWhat is the best way to achieve my goal?\r\n\r\n","title":"How to make each fragment make it&#39;s own implementation for parent activity button listener","body":"<p>I'm using navigation component.</p>\n<p>I don't want each fragment to have the next button.\nMy goal is putting that next button in activity, and each fragment implements its own destination and maybe doing some validation.</p>\n<p>What is the best way to achieve my goal?</p>\n"},{"tags":["java","macos","maven","gruntjs","apache-zeppelin"],"comments":[{"owner":{"account_id":5053865,"reputation":5343,"user_id":4057655,"accept_rate":85,"display_name":"sag"},"score":0,"creation_date":1453107143,"post_id":34802213,"comment_id":57440925,"body_markdown":"We had similar problems and it was solved by cleaning the artifacts in local maven repository. It may work for you as well.","body":"We had similar problems and it was solved by cleaning the artifacts in local maven repository. It may work for you as well."}],"answers":[{"tags":[],"owner":{"account_id":2334096,"reputation":312,"user_id":2046823,"display_name":"Ana"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687876685,"creation_date":1687876685,"answer_id":76565997,"question_id":34802213,"body_markdown":"Check the logs before BUILD FAILURE, you might have a javascript error.","title":"Zeppelin build failure - Failed to run task: &#39;grunt --no-color&#39; failed","body":"<p>Check the logs before BUILD FAILURE, you might have a javascript error.</p>\n"}],"owner":{"account_id":6394599,"reputation":49,"user_id":4959438,"display_name":"Julien St-Pierre Fortin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1519,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1687876685,"creation_date":1452816828,"question_id":34802213,"body_markdown":"I want to install Apache Zeppelin on OSX 10.8, but build fails for some mysterious reasons. Specs: Java 1.7, Maven 3.3, node v0.12.4 and grunt v0.1.13.\r\n\r\nI&#39;m running the following command:\r\n\r\n    mvn clean package -DskipTests\r\n\r\nAnd I am getting the following output :\r\n\r\n  \r\n        [INFO] Zeppelin: web Application .......................... FAILURE [ 18.310 s]\r\n        [INFO] Zeppelin: Server ................................... SKIPPED\r\n        [INFO] Zeppelin: Packaging distribution ................... SKIPPED\r\n        [INFO] ------------------------------------------------------------------------\r\n        [INFO] BUILD FAILURE\r\n        [INFO] ------------------------------------------------------------------------\r\n        [INFO] Total time: 07:53 min\r\n        [INFO] Finished at: 2016-01-14T18:32:13-05:00\r\n        [INFO] Final Memory: 78M/387M\r\n        [INFO] ------------------------------------------------------------------------\r\n        [ERROR] Failed to execute goal com.github.eirslett:frontend-maven-plugin:0.0.23:grunt (grunt build) on project zeppelin-web: Failed to run task: &#39;grunt --no-color&#39; failed. (error code 3) -&gt; [Help 1]\r\n        [ERROR] \r\n        [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n        [ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n        [ERROR] \r\n        [ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n        [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException\r\n        [ERROR] \r\n        [ERROR] After correcting the problems, you can resume the build with the command\r\n        [ERROR]   mvn &lt;goals&gt; -rf :zeppelin-web\r\n\r\nIt seems to be some errors with grunt, but I&#39;m not sure.","title":"Zeppelin build failure - Failed to run task: &#39;grunt --no-color&#39; failed","body":"<p>I want to install Apache Zeppelin on OSX 10.8, but build fails for some mysterious reasons. Specs: Java 1.7, Maven 3.3, node v0.12.4 and grunt v0.1.13.</p>\n\n<p>I'm running the following command:</p>\n\n<pre><code>mvn clean package -DskipTests\n</code></pre>\n\n<p>And I am getting the following output :</p>\n\n<pre><code>    [INFO] Zeppelin: web Application .......................... FAILURE [ 18.310 s]\n    [INFO] Zeppelin: Server ................................... SKIPPED\n    [INFO] Zeppelin: Packaging distribution ................... SKIPPED\n    [INFO] ------------------------------------------------------------------------\n    [INFO] BUILD FAILURE\n    [INFO] ------------------------------------------------------------------------\n    [INFO] Total time: 07:53 min\n    [INFO] Finished at: 2016-01-14T18:32:13-05:00\n    [INFO] Final Memory: 78M/387M\n    [INFO] ------------------------------------------------------------------------\n    [ERROR] Failed to execute goal com.github.eirslett:frontend-maven-plugin:0.0.23:grunt (grunt build) on project zeppelin-web: Failed to run task: 'grunt --no-color' failed. (error code 3) -&gt; [Help 1]\n    [ERROR] \n    [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n    [ERROR] Re-run Maven using the -X switch to enable full debug logging.\n    [ERROR] \n    [ERROR] For more information about the errors and possible solutions, please read the following articles:\n    [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException\n    [ERROR] \n    [ERROR] After correcting the problems, you can resume the build with the command\n    [ERROR]   mvn &lt;goals&gt; -rf :zeppelin-web\n</code></pre>\n\n<p>It seems to be some errors with grunt, but I'm not sure.</p>\n"},{"tags":["java","jdbc"],"comments":[{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1356010315,"post_id":13973212,"comment_id":19278609,"body_markdown":"I&#39;m not sure you want to do this.","body":"I&#39;m not sure you want to do this."},{"owner":{"account_id":2118746,"reputation":111,"user_id":1882491,"accept_rate":83,"display_name":"user1882491"},"score":2,"creation_date":1356010461,"post_id":13973212,"comment_id":19278683,"body_markdown":"Why? I wish to avoid using a `String` as I understand there is a certain security risk having the password in one.","body":"Why? I wish to avoid using a <code>String</code> as I understand there is a certain security risk having the password in one."},{"owner":{"account_id":1044371,"reputation":10970,"user_id":1049678,"display_name":"Aviram Segal"},"score":0,"creation_date":1356010740,"post_id":13973212,"comment_id":19278812,"body_markdown":"In this case no problem, there is a problem if you do not use a preparedstatement (sql injection)","body":"In this case no problem, there is a problem if you do not use a preparedstatement (sql injection)"},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":3,"creation_date":1356011002,"post_id":13973212,"comment_id":19278938,"body_markdown":"I think a salted and encrypted password would be a much better idea.","body":"I think a salted and encrypted password would be a much better idea."}],"answers":[{"tags":[],"owner":{"account_id":972934,"reputation":20673,"user_id":1575570,"accept_rate":100,"display_name":"Nidhish Krishnan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1356010202,"creation_date":1356010202,"answer_id":13973283,"question_id":13973212,"body_markdown":"Have a look at this code\r\n\r\n    final PreparedStatement statement = connection.prepareStatement(\r\n            &quot;SELECT my_column FROM my_table &quot; + \r\n            &quot;where search_column IN (SELECT * FROM unnest(?))&quot;\r\n    );\r\n    final String[] values = getValues();\r\n    statement.setArray(1, connection.createArrayOf(&quot;text&quot;, values));\r\n    final ResultSet rs = statement.executeQuery();\r\n    try {\r\n        while(rs.next()) {\r\n            // do some...\r\n        }\r\n    } finally {\r\n        rs.close();\r\n    }\r\n\r\nalso please take a look at this article for reference [http://people.apache.org/~djd/derby/publishedapi/java/sql/PreparedStatement.html][1]\r\n\r\n\r\n  [1]: http://people.apache.org/~djd/derby/publishedapi/java/sql/PreparedStatement.html","title":"How to pass PreparedStatement setArray for character array","body":"<p>Have a look at this code</p>\n\n<pre><code>final PreparedStatement statement = connection.prepareStatement(\n        \"SELECT my_column FROM my_table \" + \n        \"where search_column IN (SELECT * FROM unnest(?))\"\n);\nfinal String[] values = getValues();\nstatement.setArray(1, connection.createArrayOf(\"text\", values));\nfinal ResultSet rs = statement.executeQuery();\ntry {\n    while(rs.next()) {\n        // do some...\n    }\n} finally {\n    rs.close();\n}\n</code></pre>\n\n<p>also please take a look at this article for reference <a href=\"http://people.apache.org/~djd/derby/publishedapi/java/sql/PreparedStatement.html\" rel=\"nofollow\">http://people.apache.org/~djd/derby/publishedapi/java/sql/PreparedStatement.html</a></p>\n"},{"tags":[],"owner":{"account_id":1044371,"reputation":10970,"user_id":1049678,"display_name":"Aviram Segal"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1687876683,"creation_date":1356010242,"answer_id":13973293,"question_id":13973212,"body_markdown":"[PreparedStatement#setArray][1] received a [java.sql.Array][2]\r\nFirst you should use the JDBC Connection&#39;s [createArrayOf][3] method to create the array, only then you can pass it to `setArray`.\r\n\r\nAs the method only accept `Object[]` you should create an array of `Character` instead of char.\r\n\r\nFor example:\r\n\r\n    Character[] passwordString = new Character[] { &#39;t&#39;, &#39;e&#39;, &#39;s&#39;, &#39;t&#39; };\r\n    Array sqlArray = con.createArrayOf(&quot;CHAR&quot;, passwordString);\r\n    preparedStatement.setArray(2, sqlArray);\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html#setArray%28int,%20java.sql.Array%29\r\n  [2]: http://docs.oracle.com/javase/7/docs/api/java/sql/Array.html\r\n  [3]: http://docs.oracle.com/javase/7/docs/api/java/sql/Connection.html#createArrayOf%28java.lang.String,%20java.lang.Object%5B%5D%29","title":"How to pass PreparedStatement setArray for character array","body":"<p><a href=\"http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html#setArray%28int,%20java.sql.Array%29\" rel=\"nofollow noreferrer\">PreparedStatement#setArray</a> received a <a href=\"http://docs.oracle.com/javase/7/docs/api/java/sql/Array.html\" rel=\"nofollow noreferrer\">java.sql.Array</a>\nFirst you should use the JDBC Connection's <a href=\"http://docs.oracle.com/javase/7/docs/api/java/sql/Connection.html#createArrayOf%28java.lang.String,%20java.lang.Object%5B%5D%29\" rel=\"nofollow noreferrer\">createArrayOf</a> method to create the array, only then you can pass it to <code>setArray</code>.</p>\n<p>As the method only accept <code>Object[]</code> you should create an array of <code>Character</code> instead of char.</p>\n<p>For example:</p>\n<pre><code>Character[] passwordString = new Character[] { 't', 'e', 's', 't' };\nArray sqlArray = con.createArrayOf(&quot;CHAR&quot;, passwordString);\npreparedStatement.setArray(2, sqlArray);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":166521,"reputation":30433,"user_id":390695,"accept_rate":72,"display_name":"Damian Leszczyński - Vash"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1356011757,"creation_date":1356011757,"answer_id":13973735,"question_id":13973212,"body_markdown":"If you want to pass an array in prepared statement just call \r\n\r\n`preparedStatemtn.setArray(index,array);`\r\n\r\nBut what you must assure first is that in your DB the column is also a [ARRAY][1]. For more detail please see Aviram Sagal answer.\r\n\r\n--------\r\n\r\n\r\nBut your base idead it to protect the password. \r\n\r\nThis solution will protect only from reading the passoword from Java string pool. This is very ratre type of attact anyway. Ans passoword is transmited as plain text. \r\n\r\nMy sugestion is that instead of complicating the db schema, you should use some benefits of cryptography. Instaed of passing the password value, you should pass [password digest][2]. \r\n\r\nA simplyfied example of digest function. \r\n\r\n    public static String getDigest(byte[] password) {\r\n    \r\n      return new String(Hex.encodeHex(new MessageDigest.getInstance(&quot;SHA&quot;).digest(password)));\r\n    \r\n    }\r\n\r\n\r\nThen you store in db the digest with is safe and you use simple string in queries. \r\n\r\n\r\n[1]:http://hsqldb.org/doc/2.0/guide/sqlgeneral-chapt.html#sgc_array\r\n[2]:http://en.wikipedia.org/wiki/Hash_function","title":"How to pass PreparedStatement setArray for character array","body":"<p>If you want to pass an array in prepared statement just call </p>\n\n<p><code>preparedStatemtn.setArray(index,array);</code></p>\n\n<p>But what you must assure first is that in your DB the column is also a <a href=\"http://hsqldb.org/doc/2.0/guide/sqlgeneral-chapt.html#sgc_array\" rel=\"nofollow\">ARRAY</a>. For more detail please see Aviram Sagal answer.</p>\n\n<hr>\n\n<p>But your base idead it to protect the password. </p>\n\n<p>This solution will protect only from reading the passoword from Java string pool. This is very ratre type of attact anyway. Ans passoword is transmited as plain text. </p>\n\n<p>My sugestion is that instead of complicating the db schema, you should use some benefits of cryptography. Instaed of passing the password value, you should pass <a href=\"http://en.wikipedia.org/wiki/Hash_function\" rel=\"nofollow\">password digest</a>. </p>\n\n<p>A simplyfied example of digest function. </p>\n\n<pre><code>public static String getDigest(byte[] password) {\n\n  return new String(Hex.encodeHex(new MessageDigest.getInstance(\"SHA\").digest(password)));\n\n}\n</code></pre>\n\n<p>Then you store in db the digest with is safe and you use simple string in queries. </p>\n"},{"tags":[],"owner":{"account_id":64344,"reputation":8352,"user_id":189992,"accept_rate":95,"display_name":"ssedano"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1376573211,"creation_date":1376573211,"answer_id":18253662,"question_id":13973212,"body_markdown":"Another alternative is to use a [`CharArrayReader`](http://docs.oracle.com/javase/7/docs/api/java/io/CharArrayReader.html) and call the [`statement.setCharacterStream`](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html).\r\n\r\n    char[] passwordString = new char[] { &#39;t&#39;, &#39;e&#39;, &#39;s&#39;, &#39;t&#39; };\r\n    statement.setCharacterStream(1, new CharArrayReader(passwordString));","title":"How to pass PreparedStatement setArray for character array","body":"<p>Another alternative is to use a <a href=\"http://docs.oracle.com/javase/7/docs/api/java/io/CharArrayReader.html\" rel=\"nofollow\"><code>CharArrayReader</code></a> and call the <a href=\"http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html\" rel=\"nofollow\"><code>statement.setCharacterStream</code></a>.</p>\n\n<pre><code>char[] passwordString = new char[] { 't', 'e', 's', 't' };\nstatement.setCharacterStream(1, new CharArrayReader(passwordString));\n</code></pre>\n"}],"owner":{"account_id":2118746,"reputation":111,"user_id":1882491,"accept_rate":83,"display_name":"user1882491"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35290,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":4,"score":7,"last_activity_date":1687876683,"creation_date":1356009957,"question_id":13973212,"body_markdown":"I have some JDBC code as follows:\r\n\r\n    String selectSQL = &quot;SELECT * FROM DBUSER WHERE USER_ID = ? and PASSWORD = ?&quot;;\r\n    \r\n    Integer userId = 1000;\r\n    char[] passwordString = new char[] { &#39;t&#39;, &#39;e&#39;, &#39;s&#39;, &#39;t&#39; };\r\n    \r\n    PreparedStatement preparedStatement = dbConnection.prepareStatement(selectSQL);\r\n    preparedStatement.setInt(1, 1001);\r\n    preparedStatement.setArray(2,... ??? // how to do this part?\r\n    \r\n    // execute select SQL statement\r\n    ResultSet rs = preparedStatement.executeQuery();\r\n\r\nHow do I call `preparedStatement.setArray` to set the second parameter in the query? I don&#39;t want to use a string parameter here to protect the password.\r\n\r\nNote I am using Hypersonic DB but plan to move to MySql if this is useful.\r\n","title":"How to pass PreparedStatement setArray for character array","body":"<p>I have some JDBC code as follows:</p>\n\n<pre><code>String selectSQL = \"SELECT * FROM DBUSER WHERE USER_ID = ? and PASSWORD = ?\";\n\nInteger userId = 1000;\nchar[] passwordString = new char[] { 't', 'e', 's', 't' };\n\nPreparedStatement preparedStatement = dbConnection.prepareStatement(selectSQL);\npreparedStatement.setInt(1, 1001);\npreparedStatement.setArray(2,... ??? // how to do this part?\n\n// execute select SQL statement\nResultSet rs = preparedStatement.executeQuery();\n</code></pre>\n\n<p>How do I call <code>preparedStatement.setArray</code> to set the second parameter in the query? I don't want to use a string parameter here to protect the password.</p>\n\n<p>Note I am using Hypersonic DB but plan to move to MySql if this is useful.</p>\n"},{"tags":["java","openai-api","agi"],"comments":[{"owner":{"account_id":20593064,"reputation":1902,"user_id":15116207,"display_name":"Hritik Sharma"},"score":0,"creation_date":1687760175,"post_id":76553851,"comment_id":134975984,"body_markdown":"Prompt the gpt such that you get a json as result and parse it to get your desired output.","body":"Prompt the gpt such that you get a json as result and parse it to get your desired output."},{"owner":{"account_id":28894670,"reputation":1,"user_id":22130951,"display_name":"genechu"},"score":0,"creation_date":1688109936,"post_id":76553851,"comment_id":135032506,"body_markdown":"@HritikSharma thanks for the tip, i had tried this solution, but not so stable, some times i got answer like :    there result is :  { //json }","body":"@HritikSharma thanks for the tip, i had tried this solution, but not so stable, some times i got answer like :    there result is :  { //json }"},{"owner":{"account_id":28894670,"reputation":1,"user_id":22130951,"display_name":"genechu"},"score":1,"creation_date":1690356072,"post_id":76553851,"comment_id":135340218,"body_markdown":"TypeChat https://microsoft.github.io/TypeChat/blog/introducing-typechat/   may be a good choice","body":"TypeChat <a href=\"https://microsoft.github.io/TypeChat/blog/introducing-typechat/\" rel=\"nofollow noreferrer\">microsoft.github.io/TypeChat/blog/introducing-typechat</a>   may be a good choice"}],"answers":[{"tags":[],"owner":{"account_id":176801,"reputation":576,"user_id":407722,"accept_rate":75,"display_name":"h2stein"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1687820363,"creation_date":1687820363,"answer_id":76560705,"question_id":76553851,"body_markdown":"Your code must always be prepared for the event that ChatGPT does not comply with your request. However, if you prompt properly, this will rarely happen.\r\n\r\nYou should consider abandoning the mix of text and JSON output. Have ChatGPT respond with JSON only and ask it to write the text to a string field in the JSON.\r\n\r\nTo have the model produce JSON, you should use one of the current models (gpt-4-0613 or gpt-3.5-turbo-0613) via the API. These models take the system message more seriously, so you can ask the model to respond only in JSON. See this example: \r\n\r\n```` lang-bash\r\ncurl https://api.openai.com/v1/chat/completions -u :$OPENAI_API_KEY -H &#39;Content-Type: application/json&#39; -d &#39;{\r\n   &quot;model&quot;: &quot;gpt-3.5-turbo-0613&quot;,\r\n   &quot;messages&quot;: [\r\n      {&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a friendly assistant. Your answers are JSON only.&quot;},\r\n      {&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;{\\&quot;message\\&quot;: \\&quot;Understood. I will output my answers in JSON format.\\&quot; }&quot; },\r\n      {&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;List three attractions in London.&quot; }\r\n   ]\r\n}&#39;\r\n````\r\n\r\nChat GPT will reply with nice JSON:\r\n\r\n````lang-json\r\n{\r\n  &quot;attractions&quot;: [\r\n    {\r\n      &quot;name&quot;: &quot;The British Museum&quot;,\r\n      &quot;description&quot;: &quot;A world-famous museum containing a vast collection of art and artifacts from around the globe.&quot;\r\n    },\r\n    {\r\n      &quot;name&quot;: &quot;The Tower of London&quot;,\r\n      &quot;description&quot;: &quot;A historic castle that has served various purposes over the centuries, including a royal palace, prison, and treasury.&quot;\r\n    },\r\n    {\r\n      &quot;name&quot;: &quot;The London Eye&quot;,\r\n      &quot;description&quot;: &quot;A gigantic ferris wheel offering panoramic views of the city skyline.&quot;\r\n    }\r\n  ]\r\n}\r\n````\r\n\r\nHowever, the better approach is to use ChatGPT&#39;s newly introduced function call feature. This allows you to define functions and their parameters and ChatGPT will then provide JSON with the desired structure to call those functions. Please note that ChatGPT may deviate from your request even with this method, but this will be extremely rare.\r\n\r\n````lang-bash\r\ncurl https://api.openai.com/v1/chat/completions -u :$OPENAI_API_KEY -H &#39;Content-Type: application/json&#39; -d &#39;{\r\n  &quot;model&quot;: &quot;gpt-3.5-turbo-0613&quot;,\r\n  &quot;messages&quot;: [ \r\n    { &quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a friendly assistant and you will always call one of the provided functions.&quot; },\r\n    { &quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;List three attractions in London.&quot; }\r\n  ],\r\n  &quot;functions&quot;: [{\r\n      &quot;name&quot;:&quot;presentAttractions&quot;,\r\n      &quot;description&quot;: &quot;Presents the attractions to the user.&quot;,\r\n      &quot;parameters&quot;: {\r\n        &quot;type&quot;: &quot;object&quot;,\r\n        &quot;properties&quot;: {\r\n          &quot;message&quot;: {\r\n            &quot;type&quot;: &quot;string&quot;,\r\n            &quot;description&quot;: &quot;A message to display to the user.&quot;\r\n          },\r\n          &quot;attractions&quot;: {\r\n            &quot;type&quot;: &quot;array&quot;,\r\n            &quot;description&quot;: &quot;A list of attractions.&quot;,\r\n            &quot;items&quot;: {\r\n              &quot;type&quot;: &quot;string&quot;\r\n            }\r\n          }\r\n        },\r\n        &quot;required&quot;: [ &quot;message&quot;,&quot;attractions&quot; ]\r\n      }\r\n    }]\r\n}&#39;\r\n````\r\n\r\nThis results in this response:\r\n\r\n```` lang-json\r\n&quot;message&quot;: {\r\n        &quot;role&quot;: &quot;assistant&quot;,\r\n        &quot;content&quot;: null,\r\n        &quot;function_call&quot;: {\r\n          &quot;name&quot;: &quot;presentAttractions&quot;,\r\n          &quot;arguments&quot;: &quot;{\\n  \\&quot;message\\&quot;: \\&quot;Here are three attractions in London:\\&quot;,\\n  \\&quot;attractions\\&quot;: [\\&quot;Big Ben\\&quot;, \\&quot;Buckingham Palace\\&quot;, \\&quot;Tower Bridge\\&quot;]\\n}&quot;\r\n        }\r\n      },\r\n````\r\n\r\nThis way you get the JSON nicely prepared for further processing. Of course you can also specify several different functions and let ChatGPT decide which one to call. And you can restrict the allowed functions with the `function_call` property.\r\n\r\nFor a full description of the API, see the [OpenAI API documentation][1]. To learn more about function calls, read the [OpenAI blog][2] and [OpenAI Cookbook advanced examples][3].\r\n\r\n\r\n  [1]: https://platform.openai.com/docs/api-reference/completions/create\r\n  [2]: https://openai.com/blog/function-calling-and-other-api-updates\r\n  [3]: https://github.com/openai/openai-cookbook/blob/main/examples/How_to_call_functions_with_chat_models.ipynb","title":"extract json from a long text (gpt answer) according to a json-schema?","body":"<p>Your code must always be prepared for the event that ChatGPT does not comply with your request. However, if you prompt properly, this will rarely happen.</p>\n<p>You should consider abandoning the mix of text and JSON output. Have ChatGPT respond with JSON only and ask it to write the text to a string field in the JSON.</p>\n<p>To have the model produce JSON, you should use one of the current models (gpt-4-0613 or gpt-3.5-turbo-0613) via the API. These models take the system message more seriously, so you can ask the model to respond only in JSON. See this example:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>curl https://api.openai.com/v1/chat/completions -u :$OPENAI_API_KEY -H 'Content-Type: application/json' -d '{\n   &quot;model&quot;: &quot;gpt-3.5-turbo-0613&quot;,\n   &quot;messages&quot;: [\n      {&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a friendly assistant. Your answers are JSON only.&quot;},\n      {&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;{\\&quot;message\\&quot;: \\&quot;Understood. I will output my answers in JSON format.\\&quot; }&quot; },\n      {&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;List three attractions in London.&quot; }\n   ]\n}'\n</code></pre>\n<p>Chat GPT will reply with nice JSON:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;attractions&quot;: [\n    {\n      &quot;name&quot;: &quot;The British Museum&quot;,\n      &quot;description&quot;: &quot;A world-famous museum containing a vast collection of art and artifacts from around the globe.&quot;\n    },\n    {\n      &quot;name&quot;: &quot;The Tower of London&quot;,\n      &quot;description&quot;: &quot;A historic castle that has served various purposes over the centuries, including a royal palace, prison, and treasury.&quot;\n    },\n    {\n      &quot;name&quot;: &quot;The London Eye&quot;,\n      &quot;description&quot;: &quot;A gigantic ferris wheel offering panoramic views of the city skyline.&quot;\n    }\n  ]\n}\n</code></pre>\n<p>However, the better approach is to use ChatGPT's newly introduced function call feature. This allows you to define functions and their parameters and ChatGPT will then provide JSON with the desired structure to call those functions. Please note that ChatGPT may deviate from your request even with this method, but this will be extremely rare.</p>\n<pre class=\"lang-bash prettyprint-override\"><code>curl https://api.openai.com/v1/chat/completions -u :$OPENAI_API_KEY -H 'Content-Type: application/json' -d '{\n  &quot;model&quot;: &quot;gpt-3.5-turbo-0613&quot;,\n  &quot;messages&quot;: [ \n    { &quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a friendly assistant and you will always call one of the provided functions.&quot; },\n    { &quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;List three attractions in London.&quot; }\n  ],\n  &quot;functions&quot;: [{\n      &quot;name&quot;:&quot;presentAttractions&quot;,\n      &quot;description&quot;: &quot;Presents the attractions to the user.&quot;,\n      &quot;parameters&quot;: {\n        &quot;type&quot;: &quot;object&quot;,\n        &quot;properties&quot;: {\n          &quot;message&quot;: {\n            &quot;type&quot;: &quot;string&quot;,\n            &quot;description&quot;: &quot;A message to display to the user.&quot;\n          },\n          &quot;attractions&quot;: {\n            &quot;type&quot;: &quot;array&quot;,\n            &quot;description&quot;: &quot;A list of attractions.&quot;,\n            &quot;items&quot;: {\n              &quot;type&quot;: &quot;string&quot;\n            }\n          }\n        },\n        &quot;required&quot;: [ &quot;message&quot;,&quot;attractions&quot; ]\n      }\n    }]\n}'\n</code></pre>\n<p>This results in this response:</p>\n<pre class=\"lang-json prettyprint-override\"><code>&quot;message&quot;: {\n        &quot;role&quot;: &quot;assistant&quot;,\n        &quot;content&quot;: null,\n        &quot;function_call&quot;: {\n          &quot;name&quot;: &quot;presentAttractions&quot;,\n          &quot;arguments&quot;: &quot;{\\n  \\&quot;message\\&quot;: \\&quot;Here are three attractions in London:\\&quot;,\\n  \\&quot;attractions\\&quot;: [\\&quot;Big Ben\\&quot;, \\&quot;Buckingham Palace\\&quot;, \\&quot;Tower Bridge\\&quot;]\\n}&quot;\n        }\n      },\n</code></pre>\n<p>This way you get the JSON nicely prepared for further processing. Of course you can also specify several different functions and let ChatGPT decide which one to call. And you can restrict the allowed functions with the <code>function_call</code> property.</p>\n<p>For a full description of the API, see the <a href=\"https://platform.openai.com/docs/api-reference/completions/create\" rel=\"nofollow noreferrer\">OpenAI API documentation</a>. To learn more about function calls, read the <a href=\"https://openai.com/blog/function-calling-and-other-api-updates\" rel=\"nofollow noreferrer\">OpenAI blog</a> and <a href=\"https://github.com/openai/openai-cookbook/blob/main/examples/How_to_call_functions_with_chat_models.ipynb\" rel=\"nofollow noreferrer\">OpenAI Cookbook advanced examples</a>.</p>\n"}],"owner":{"account_id":28894670,"reputation":1,"user_id":22130951,"display_name":"genechu"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1823,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687876625,"creation_date":1687758855,"question_id":76553851,"body_markdown":"There is some text contains a json result like (this line may change): \r\n\r\n```\r\n{\r\n  &quot;foo&quot;:{ &quot;bar&quot; : [&quot;1&quot;] }\r\n}\r\n```\r\n\r\n\r\nwhen i got the text, \r\ni need to extract the json from text, and make sure the json is exactly the format i instruct gpt to return in prompt via examples.\r\n\r\n\r\ncurrently my solution is to match json by regexp with greedy mode , then parse json and check if the json is valid by json-schema.\r\n\r\n\r\nIs there some better way?","title":"extract json from a long text (gpt answer) according to a json-schema?","body":"<p>There is some text contains a json result like (this line may change):</p>\n<pre><code>{\n  &quot;foo&quot;:{ &quot;bar&quot; : [&quot;1&quot;] }\n}\n</code></pre>\n<p>when i got the text,\ni need to extract the json from text, and make sure the json is exactly the format i instruct gpt to return in prompt via examples.</p>\n<p>currently my solution is to match json by regexp with greedy mode , then parse json and check if the json is valid by json-schema.</p>\n<p>Is there some better way?</p>\n"},{"tags":["java","java-time","duration"],"answers":[{"tags":[],"owner":{"account_id":1881735,"reputation":7688,"user_id":1701776,"accept_rate":71,"display_name":"BambooleanLogic"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1687876466,"creation_date":1687856597,"answer_id":76563267,"question_id":76563152,"body_markdown":"Your problem stems from comparing apples and oranges. In this case, you are trying to compare a `LocalDateTime` and a `ZonedDateTime`. Those two are very different things and cannot be compared directly.\r\n\r\nA `ZonedDateTime` describes a specific point in time, expressed in the terms of a certain time zone. It is unambiguous what point in time such a value means.\r\n\r\nA `LocalDateTime` describes some date and some time, without any information about which time zone they&#39;re presented in. This value is **fundamentally ambiguous** and **open to interpretation**; two people in different time zones reading the same `LocalDateTime` value would disagree over when exactly that point in time occurs.\r\n\r\n(For instance, if someone in London sees &quot;1 PM on June 27, 2023&quot;, the exact point in time that it represents for them differs by five hours to how someone in New York would interpret the exact same value.)\r\n\r\nAs such, you cannot directly compare a `ZonedDateTime` (an unambiguous point in time that everyone agrees on) with a `LocalDateTime` (a point in time that&#39;s relative to whoever uses the value). You can compare two `ZonedDateTime` with each other, and two `LocalDateTime` with each other; but not one to the other.\r\n\r\nIf you nonetheless want to compare them, you need to decide how the two relate. For instance, you can use the `.atZone(...)` on `LocalDateTime` to add time zone information, converting it into a `ZonedDateTime`, which can then be compared with the other value.\r\n\r\nAs an additional note, `LocalDateTime` has other issues that one should be aware of. For instance, during DST transitions in the fall, the same `LocalDateTime` value may represent two different points in time (since the period 2:00:00 AM-2:59:59 AM occurs twice in the same night). For reasons like this, a general rule of thumb is to only use `LocalDateTime` for _presenting the value to the user_, not for doing calculations or similar.\r\n\r\nAnd as a final &quot;By the way, I technically lied to you&quot; note, one might read the documentation for `Duration.between` and notice that it mentions automatically converting one of the values if they&#39;re of different types. Why did it crash if it handles this automatically? In this case, pure luck (or bad luck, depending on your viewpoint).\r\n\r\nThe key here is that `Duration.between` will convert the _second_ value to be the same type as the _first_ value. Your first value is the `ZonedDateTime` and your second value is the `LocalDateTime`, meaning that the latter will be converted to the former. If you had reversed them, the conversation would succeed since it&#39;s trivial to convert a `ZonedDateTime` to a `LocalDateTime`; just delete the time zone information. (This is however potentially dangerous since it implicitly assumes that the time zone information was completely irrelevant in the first place.)\r\n\r\nThe opposite isn&#39;t possible though; how do you automatically _add_ the time zone information to convert a `LocalDateTime` to a `ZonedDateTime`? What value is the computer supposed to put there? Should it default to the UTC time zone? Should it default to the computer clock&#39;s time zone? Should it default to the time zone of the `ZonedDateTime` value? At best, the computer would have to _blindly guess and hope it does the right thing_, which is a very dangerous behavior for a method to have. In this case, it&#39;s much better that it crashes to notify you, the developer, that you have asked it a vague question and should be more specific.","title":"java.time Duration.between produces zonedatetime exception","body":"<p>Your problem stems from comparing apples and oranges. In this case, you are trying to compare a <code>LocalDateTime</code> and a <code>ZonedDateTime</code>. Those two are very different things and cannot be compared directly.</p>\n<p>A <code>ZonedDateTime</code> describes a specific point in time, expressed in the terms of a certain time zone. It is unambiguous what point in time such a value means.</p>\n<p>A <code>LocalDateTime</code> describes some date and some time, without any information about which time zone they're presented in. This value is <strong>fundamentally ambiguous</strong> and <strong>open to interpretation</strong>; two people in different time zones reading the same <code>LocalDateTime</code> value would disagree over when exactly that point in time occurs.</p>\n<p>(For instance, if someone in London sees &quot;1 PM on June 27, 2023&quot;, the exact point in time that it represents for them differs by five hours to how someone in New York would interpret the exact same value.)</p>\n<p>As such, you cannot directly compare a <code>ZonedDateTime</code> (an unambiguous point in time that everyone agrees on) with a <code>LocalDateTime</code> (a point in time that's relative to whoever uses the value). You can compare two <code>ZonedDateTime</code> with each other, and two <code>LocalDateTime</code> with each other; but not one to the other.</p>\n<p>If you nonetheless want to compare them, you need to decide how the two relate. For instance, you can use the <code>.atZone(...)</code> on <code>LocalDateTime</code> to add time zone information, converting it into a <code>ZonedDateTime</code>, which can then be compared with the other value.</p>\n<p>As an additional note, <code>LocalDateTime</code> has other issues that one should be aware of. For instance, during DST transitions in the fall, the same <code>LocalDateTime</code> value may represent two different points in time (since the period 2:00:00 AM-2:59:59 AM occurs twice in the same night). For reasons like this, a general rule of thumb is to only use <code>LocalDateTime</code> for <em>presenting the value to the user</em>, not for doing calculations or similar.</p>\n<p>And as a final &quot;By the way, I technically lied to you&quot; note, one might read the documentation for <code>Duration.between</code> and notice that it mentions automatically converting one of the values if they're of different types. Why did it crash if it handles this automatically? In this case, pure luck (or bad luck, depending on your viewpoint).</p>\n<p>The key here is that <code>Duration.between</code> will convert the <em>second</em> value to be the same type as the <em>first</em> value. Your first value is the <code>ZonedDateTime</code> and your second value is the <code>LocalDateTime</code>, meaning that the latter will be converted to the former. If you had reversed them, the conversation would succeed since it's trivial to convert a <code>ZonedDateTime</code> to a <code>LocalDateTime</code>; just delete the time zone information. (This is however potentially dangerous since it implicitly assumes that the time zone information was completely irrelevant in the first place.)</p>\n<p>The opposite isn't possible though; how do you automatically <em>add</em> the time zone information to convert a <code>LocalDateTime</code> to a <code>ZonedDateTime</code>? What value is the computer supposed to put there? Should it default to the UTC time zone? Should it default to the computer clock's time zone? Should it default to the time zone of the <code>ZonedDateTime</code> value? At best, the computer would have to <em>blindly guess and hope it does the right thing</em>, which is a very dangerous behavior for a method to have. In this case, it's much better that it crashes to notify you, the developer, that you have asked it a vague question and should be more specific.</p>\n"},{"tags":[],"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1687859701,"creation_date":1687859701,"answer_id":76563676,"question_id":76563152,"body_markdown":"Further to BambooleanLogic&#39;s thorough explanation, if you want a simple solution, it&#39;s as simple as:\r\n\r\n    Duration.between(Instant.now(), Instant.toEpochMillis(epochinMillis)).toHours()\r\n\r\n","title":"java.time Duration.between produces zonedatetime exception","body":"<p>Further to BambooleanLogic's thorough explanation, if you want a simple solution, it's as simple as:</p>\n<pre><code>Duration.between(Instant.now(), Instant.toEpochMillis(epochinMillis)).toHours()\n</code></pre>\n"}],"owner":{"account_id":108612,"reputation":9808,"user_id":288190,"accept_rate":85,"display_name":"dr jerry"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76563267,"answer_count":2,"score":0,"last_activity_date":1687876466,"creation_date":1687855694,"question_id":76563152,"body_markdown":"I&#39;m trying to calculate the difference between an epoch miliseconds and the currenttime on local machine. I was hoping to use idiomatic `java.time` api with:\r\n\r\n    val eventTime = LocalDateTime.ofInstant(Instant.ofEpochMilli(epochinMilis), ZoneId.systemDefault())\r\n    val now = LocalDateTime.now.atZone(ZoneId.systemDefault())\r\n    Duration.between(now, eventTime).toHours\r\n\r\nHowever it produces:\r\n\r\n    java.time.DateTimeException: Unable to obtain ZonedDateTime from TemporalAccessor: 2023-06-26T22:26:36.917 of type java.time.LocalDateTime\r\n\tat java.base/java.time.ZonedDateTime.from(ZonedDateTime.java:566)\r\n\tat java.base/java.time.ZonedDateTime.until(ZonedDateTime.java:2130)\r\n\tat java.base/java.time.Duration.between(Duration.java:490)\r\n\r\nWith\r\n\r\n    now = LocalDateTime.now.atZone(ZoneId.systemDefault())\r\n    (epochinMilis/1000 - now.toEpochSecond()) / 3600\r\n\r\nI&#39;m getting what i want, but I would like to know what goes wrong when using the designated(?) api?\r\n","title":"java.time Duration.between produces zonedatetime exception","body":"<p>I'm trying to calculate the difference between an epoch miliseconds and the currenttime on local machine. I was hoping to use idiomatic <code>java.time</code> api with:</p>\n<pre><code>val eventTime = LocalDateTime.ofInstant(Instant.ofEpochMilli(epochinMilis), ZoneId.systemDefault())\nval now = LocalDateTime.now.atZone(ZoneId.systemDefault())\nDuration.between(now, eventTime).toHours\n</code></pre>\n<p>However it produces:</p>\n<pre><code>java.time.DateTimeException: Unable to obtain ZonedDateTime from TemporalAccessor: 2023-06-26T22:26:36.917 of type java.time.LocalDateTime\nat java.base/java.time.ZonedDateTime.from(ZonedDateTime.java:566)\nat java.base/java.time.ZonedDateTime.until(ZonedDateTime.java:2130)\nat java.base/java.time.Duration.between(Duration.java:490)\n</code></pre>\n<p>With</p>\n<pre><code>now = LocalDateTime.now.atZone(ZoneId.systemDefault())\n(epochinMilis/1000 - now.toEpochSecond()) / 3600\n</code></pre>\n<p>I'm getting what i want, but I would like to know what goes wrong when using the designated(?) api?</p>\n"},{"tags":["java","logging","log4j2","rollingfileappender"],"owner":{"account_id":10959927,"reputation":11,"user_id":8053551,"display_name":"Nipun Garg"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687876464,"creation_date":1687870830,"question_id":76565136,"body_markdown":"I have a log4j2 rollingFileAppender, its definition is as follows:\r\n\r\n```\r\n&lt;RollingFile name=&quot;safety&quot;\r\n                     fileName=&quot;${LOG_PATH}/server_${sys:id:-}.log&quot;\r\n                     filePattern=&quot;${LOG_PATH}/server_${sys:id:-}.log.gz&quot;\r\n                     ignoreExceptions=&quot;false&quot;&gt;\r\n            &lt;PatternLayout&gt;\r\n                &lt;Pattern&gt;%d{yy-MM-dd HH:mm:ss.SSS} %-5p %t - %m%n&lt;/Pattern&gt;\r\n            &lt;/PatternLayout&gt;\r\n            &lt;Policies&gt;\r\n                &lt;SizeBasedTriggeringPolicy size=&quot;50MB&quot; /&gt;\r\n            &lt;/Policies&gt;\r\n            &lt;DefaultRolloverStrategy max=&quot;5&quot;&gt;\r\n                &lt;Delete basePath=&quot;${LOG_PATH}&quot; maxDepth=&quot;1&quot;&gt;\r\n                    &lt;IfFileName glob=&quot;*/app-*.log.gz&quot; /&gt;\r\n                    &lt;IfLastModified age=&quot;P30D&quot; /&gt;\r\n                &lt;/Delete&gt;\r\n            &lt;/DefaultRolloverStrategy&gt;\r\n        &lt;/RollingFile&gt;\r\n```\r\n\r\nI think due to the delete tag being dysfunctional, it&#39;s making the &lt;DefaultRolloverStrategy&gt; not work as expected.\r\n\r\n**What did i try :** There are other rollingFileAppnders as well that i have in the same file where we dont have the \\&lt;delete\\&gt; tag and it is working fine as expected\r\n\r\n**What was i expecting :** I understand that the developer has written a wrong condition in the \\&lt;IfFileName\\&gt; tag inside the \\&lt;delete\\&gt; tag. But regardless of that at least according to me the files would have still rolled over, only that they wouldn&#39;t have been deleted.\r\n\r\nPlease correct me if my understanding is not correct (P.S: i am referring to Apache log4j2 doc https://logging.apache.org/log4j/2.x/manual/appenders.html#rollingfileappender )","title":"Log4j2 rollingFileAppender does not rolls over log files due to the &lt;delete&gt; tag nested inside &lt;DefaultRolloverStrategy&gt; tag","body":"<p>I have a log4j2 rollingFileAppender, its definition is as follows:</p>\n<pre><code>&lt;RollingFile name=&quot;safety&quot;\n                     fileName=&quot;${LOG_PATH}/server_${sys:id:-}.log&quot;\n                     filePattern=&quot;${LOG_PATH}/server_${sys:id:-}.log.gz&quot;\n                     ignoreExceptions=&quot;false&quot;&gt;\n            &lt;PatternLayout&gt;\n                &lt;Pattern&gt;%d{yy-MM-dd HH:mm:ss.SSS} %-5p %t - %m%n&lt;/Pattern&gt;\n            &lt;/PatternLayout&gt;\n            &lt;Policies&gt;\n                &lt;SizeBasedTriggeringPolicy size=&quot;50MB&quot; /&gt;\n            &lt;/Policies&gt;\n            &lt;DefaultRolloverStrategy max=&quot;5&quot;&gt;\n                &lt;Delete basePath=&quot;${LOG_PATH}&quot; maxDepth=&quot;1&quot;&gt;\n                    &lt;IfFileName glob=&quot;*/app-*.log.gz&quot; /&gt;\n                    &lt;IfLastModified age=&quot;P30D&quot; /&gt;\n                &lt;/Delete&gt;\n            &lt;/DefaultRolloverStrategy&gt;\n        &lt;/RollingFile&gt;\n</code></pre>\n<p>I think due to the delete tag being dysfunctional, it's making the  not work as expected.</p>\n<p><strong>What did i try :</strong> There are other rollingFileAppnders as well that i have in the same file where we dont have the &lt;delete&gt; tag and it is working fine as expected</p>\n<p><strong>What was i expecting :</strong> I understand that the developer has written a wrong condition in the &lt;IfFileName&gt; tag inside the &lt;delete&gt; tag. But regardless of that at least according to me the files would have still rolled over, only that they wouldn't have been deleted.</p>\n<p>Please correct me if my understanding is not correct (P.S: i am referring to Apache log4j2 doc <a href=\"https://logging.apache.org/log4j/2.x/manual/appenders.html#rollingfileappender\" rel=\"nofollow noreferrer\">https://logging.apache.org/log4j/2.x/manual/appenders.html#rollingfileappender</a> )</p>\n"},{"tags":["java","sockets","tcp"],"comments":[{"owner":{"account_id":18682665,"reputation":1535,"user_id":13618871,"display_name":"AKSingh"},"score":0,"creation_date":1687806406,"post_id":76557421,"comment_id":134985459,"body_markdown":"Could you share the contents of the file `Question`?","body":"Could you share the contents of the file <code>Question</code>?"}],"answers":[{"tags":[],"owner":{"account_id":18682665,"reputation":1535,"user_id":13618871,"display_name":"AKSingh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1687876462,"creation_date":1687843947,"answer_id":76561865,"question_id":76557421,"body_markdown":"A **NullPointerException** occurs in your code at the line `m.getValue().add(name)`. The root cause of this exception is in your Server class. Observe the following code from your Server class:\r\n\r\n```\r\nfor (int i = 1; i &lt; l; i++) {\r\n    lista.put(i, null);\r\n}\r\n```\r\n\r\nYou associate each Integer to a null value. Now, whenever you will use `lista.get(1)` it returns null. What happens when you use `lista.get(1).add(name)`? It throws a NullPointerException. That is why `m.getValue().add(name)` throws **NullPointerException**, since `m.getValue()` is null.\r\n\r\n## Improvements\r\n\r\nYour code is filled with bad practices. You should avoid them as this makes code harder to debug, less readable and can even impact performance. Here are few things that I have observed:\r\n\r\n1. You **did not print the stack trace** in your UserThread class. You would have caught the problem by yourself if you would have done so. Currently, your catch block is just empty.\r\n\r\n2. `port` variable can be final and static. Server will work on a fixed port and it is associated to a server as a whole and not a particular instance of server object. Hence, it can be final and static.\r\n\r\n3. Returning from finally block. This is a very bad practice and for several reasons. You can search about it online to know more.\r\n\r\n4. While statement could not complete without throwing exception. Your loop is infinite and it can only end whenever an exception occurs. You can add graceful ending at the client. It can finish whenever it has answered all the questions.\r\n\r\nThere could be few other minor improvements but I will keep the list short.","title":"Why doesn&#39;t client get next question in this quiz implementation in Java?","body":"<p>A <strong>NullPointerException</strong> occurs in your code at the line <code>m.getValue().add(name)</code>. The root cause of this exception is in your Server class. Observe the following code from your Server class:</p>\n<pre><code>for (int i = 1; i &lt; l; i++) {\n    lista.put(i, null);\n}\n</code></pre>\n<p>You associate each Integer to a null value. Now, whenever you will use <code>lista.get(1)</code> it returns null. What happens when you use <code>lista.get(1).add(name)</code>? It throws a NullPointerException. That is why <code>m.getValue().add(name)</code> throws <strong>NullPointerException</strong>, since <code>m.getValue()</code> is null.</p>\n<h2>Improvements</h2>\n<p>Your code is filled with bad practices. You should avoid them as this makes code harder to debug, less readable and can even impact performance. Here are few things that I have observed:</p>\n<ol>\n<li><p>You <strong>did not print the stack trace</strong> in your UserThread class. You would have caught the problem by yourself if you would have done so. Currently, your catch block is just empty.</p>\n</li>\n<li><p><code>port</code> variable can be final and static. Server will work on a fixed port and it is associated to a server as a whole and not a particular instance of server object. Hence, it can be final and static.</p>\n</li>\n<li><p>Returning from finally block. This is a very bad practice and for several reasons. You can search about it online to know more.</p>\n</li>\n<li><p>While statement could not complete without throwing exception. Your loop is infinite and it can only end whenever an exception occurs. You can add graceful ending at the client. It can finish whenever it has answered all the questions.</p>\n</li>\n</ol>\n<p>There could be few other minor improvements but I will keep the list short.</p>\n"}],"owner":{"account_id":19572999,"reputation":17,"user_id":14323713,"display_name":"Broj 1"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76561865,"answer_count":1,"score":0,"last_activity_date":1687876462,"creation_date":1687788198,"question_id":76557421,"body_markdown":"This code works, because while loop is working, but when I remove this comment in UserThread class\r\n```\t\r\n/*\tfor(Entry&lt;Integer,List&lt;String&gt;&gt; m: server.lista.entrySet()) {\r\n        \t\t\t\tif(c==m.getKey()) {\r\n    \t\t\t\t\tm.getValue().add(name);\r\n    \t\t\t\t\t//toUser.println(&quot;&quot;);\r\n    \t\t\t\t}\r\n        \t\t\t}\r\n        \t\t\tfor(Entry&lt;Integer,List&lt;String&gt;&gt; m: server.lista.entrySet()) {\r\n        \t\t\t\tSystem.out.println(m.getKey()+&quot; &quot;+m.getValue());\r\n        \t\t\t}*/\r\n```\r\nclient doesn&#39;t receive next question. While loop is stopping here. Can I get reason why this is happening?\r\nCodes are below. \r\n```\r\npackage quiz;\r\n\r\nimport java.io.BufferedReader;\r\nimport java.io.FileInputStream;\r\nimport java.io.FileNotFoundException;\r\nimport java.io.IOException;\r\nimport java.io.InputStreamReader;\r\nimport java.net.ServerSocket;\r\nimport java.net.Socket;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\n\r\npublic class Server {\r\npublic static int test_port=12321;\r\nprivate int port;\r\nprivate int counter=0;\r\nprivate int length;\r\nBufferedReader fromDocument;\r\npublic int numberOfClients=0;\r\npublic static HashMap&lt;Integer,List&lt;String&gt;&gt; lista=new HashMap&lt;Integer,List&lt;String&gt;&gt;();\r\n\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t//int l=lengthHashMap();\r\n\t\t\r\n\t\t// TODO Auto-generated method stub\r\nServer server=new Server(test_port);\r\nint l=server.lengthHashMap();\r\nfor(int i=1;i&lt;l;i++) {\r\n\tlista.put(i, null);\r\n}\r\nserver.execute();\r\n\t}\r\nprivate void execute() {\r\n\t\t// TODO Auto-generated method stub\r\n\t\ttry(ServerSocket server=new ServerSocket(port)){\r\n\t\t\t\r\n\t\t\twhile(true) {\r\n\t\t\t\tSocket client=server.accept();\r\n\t\t\t\tSystem.out.println(&quot;Client connected&quot;);\r\n\t\t\t\tnumberOfClients++;\r\n\t\t\t\tUserThread user=new UserThread(client,this);\r\n\t\t\t\tuser.start();\r\n\t\t\t}\r\n\t\t} catch (IOException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\npublic Server(int port) {\r\n\tthis.port=port;\r\n}\r\nprivate int lengthHashMap() {\r\n\ttry {\r\n\t\tfromDocument=new BufferedReader(new InputStreamReader(new FileInputStream(&quot;Questions.txt&quot;)));\r\n\t\tString line=fromDocument.readLine();\r\n\t\twhile(line!=null) {\r\n\t\t\tcounter++;\r\n\t\t\tline=fromDocument.readLine();\r\n\t\t}\r\n\t\tlength=counter/5;\r\n\t} catch (IOException e) {\r\n\t\t// TODO Auto-generated catch block\r\n\t\te.printStackTrace();\r\n\t}finally {\r\n\t\treturn length;\r\n\t}\r\n\r\n}\r\n}\r\n```\r\n```\r\npackage quiz;\r\n\r\nimport java.io.BufferedReader;\r\nimport java.io.FileInputStream;\r\nimport java.io.InputStreamReader;\r\nimport java.io.PrintWriter;\r\nimport java.net.Socket;\r\nimport java.util.List;\r\nimport java.util.Map.Entry;\r\n\r\npublic class UserThread extends Thread{\r\n\tSocket client;\r\n\tServer server;\r\n\tBufferedReader fromDocument;\r\n\tprivate int counter=0;\r\n\tPrintWriter toUser;\r\n\tBufferedReader fromUser;\r\n\tString correctAnswer;\r\n\tString answer;\r\n\tString correctedLine;\r\n\tprivate int c=0;\r\n\tpublic UserThread(Socket client, Server server) {\r\n\t\t// TODO Auto-generated constructor stub\r\n\t\tthis.client=client;\r\n\t\tthis.server=server;\r\n\t}\r\npublic void run() {\r\n\ttry {\r\n\t\t\r\n\t\twhile(server.numberOfClients&lt;2) {\r\n\t\t\tSystem.out.println();\r\n\t\t}\r\n\t\t\r\n\t\tfromDocument=new BufferedReader(new InputStreamReader(new FileInputStream(&quot;Questions.txt&quot;)));\r\n\t\tfromUser=new BufferedReader(new InputStreamReader(this.client.getInputStream()));\r\n\t\ttoUser=new PrintWriter(this.client.getOutputStream(),true);\r\n        String line=fromDocument.readLine();\r\n        String name=fromUser.readLine();\r\n\t\tSystem.out.println(name);\r\n        \t\twhile(!line.equalsIgnoreCase(&quot;&quot;)) {\r\n        \t\t\twhile(counter&lt;5) {\r\n        \t\t\tcounter++;\r\n        \t\t\tif(line.endsWith(&quot;*&quot;)){\r\n        \t\t\t\tcorrectAnswer=line.substring(0,1);\r\n        \t\t\t\tcorrectedLine=line.substring(0,line.length()-1);\r\n            \t\t\ttoUser.println(correctedLine);\r\n        \t\t\t}\r\n        \t\t\telse {\r\n        \t\t\t\ttoUser.println(line);\t\r\n        \t\t\t}\r\n        \t\t\tline=fromDocument.readLine();\r\n\r\n        \t\t}\r\n        \t\t\tc++;\r\n        \t\t\tcounter=0;\r\n        \t\t\tanswer=fromUser.readLine();\r\n \r\n        \t\t\t\t\r\n        \t\t\t\r\n        \t\t\tif(answer.equalsIgnoreCase(correctAnswer))\r\n        \t\t\t\ttoUser.println(&quot;Correct!&quot;);\r\n        \t\t\telse\r\n        \t\t\t\ttoUser.println(&quot;Incorrect!&quot;);\r\n        \t\t\t//line=fromUser.readLine();\r\n        \t\t\t//System.out.println(line);\r\n        \t\t/*\tfor(Entry&lt;Integer,List&lt;String&gt;&gt; m: server.lista.entrySet()) {\r\n        \t\t\t\tif(c==m.getKey()) {\r\n    \t\t\t\t\tm.getValue().add(name);\r\n    \t\t\t\t\t//toUser.println(&quot;&quot;);\r\n    \t\t\t\t}\r\n        \t\t\t}\r\n        \t\t\tfor(Entry&lt;Integer,List&lt;String&gt;&gt; m: server.lista.entrySet()) {\r\n        \t\t\t\tSystem.out.println(m.getKey()+&quot; &quot;+m.getValue());\r\n        \t\t\t}*/\r\n        \t\t\t\r\n        \t\t\t\r\n\t}\r\n\t} catch (Exception e) {\r\n\t\t// TODO: handle exception\r\n\t}\r\n\t\r\n}\r\n}\r\n```\r\n```\r\npackage quiz;\r\n\r\nimport java.io.BufferedReader;\r\nimport java.io.IOException;\r\nimport java.io.InputStreamReader;\r\nimport java.io.PrintWriter;\r\nimport java.net.Socket;\r\nimport java.net.UnknownHostException;\r\nimport java.util.Scanner;\r\n\r\npublic class Client {\r\nprivate String name;\r\nprivate String hostname;\r\nprivate int port;\r\nString answer;\r\nBufferedReader fromServer;\r\nPrintWriter toServer;\r\n\tpublic static void main(String[] args) {\r\n\t\t// TODO Auto-generated method stub\r\nClient client=new Client(&quot;localhost&quot;,Server.test_port);\r\nclient.execute();\r\n\t}\r\nprivate void execute() {\r\n\ttry {\r\n\t\tthis.setName();\r\n\t} catch (IOException e) {\r\n\t\t// TODO Auto-generated catch block\r\n\t\te.printStackTrace();\r\n\t}\r\n\t\t// TODO Auto-generated method stub\r\n\t\ttry(Socket client=new Socket(this.hostname,this.port)){\r\n\t\t\t\r\n\t\t\tfromServer=new BufferedReader(new InputStreamReader(client.getInputStream()));\r\n\t\t\ttoServer=new PrintWriter(client.getOutputStream(),true);\r\n\t\t\tSystem.out.println(&quot;Connected to server: &quot;+this.hostname);\r\n\t\t\ttoServer.println(this.name);\r\n\t\t\tString line;\r\n\t\t\twhile(true) {\r\n\t\t\t\tfor(int i=0;i&lt;5;i++) {\r\n\t\t\t\t\tline=fromServer.readLine();\r\n\t\t\t\t\tSystem.out.println(line);\r\n\t\t\t\t}\r\n\t\t\t\tSystem.out.println(&quot;Your answer is: &quot;);\r\n\t\t\t\tScanner sc=new Scanner(System.in);\r\n\t\t\t\tanswer=sc.nextLine();\r\n\t\t\t\ttoServer.println(answer);\r\n\t\t\t\tline=fromServer.readLine();\r\n\t\t\t\tSystem.out.println(line);\r\n\t\t\t\t//toServer.println(&quot;Next&quot;);\r\n\t\t\t\t//for(int j=0;j&lt;5;j++)\r\n\t\t\t\t//\tline=fromServer.readLine();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t} catch (UnknownHostException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t} catch (IOException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\npublic Client(String hostname,int port) {\r\n\tthis.hostname=hostname;\r\n\tthis.port=port;\r\n}\r\nprivate void setName() throws IOException {\r\n\t// TODO Auto-generated method stub\r\n\tSystem.out.println(&quot;Enter your name: &quot;);\r\n\tBufferedReader stdin=new BufferedReader(new InputStreamReader(System.in));\r\n\tthis.name=stdin.readLine();\r\n}\r\n}\r\n```\r\nContent of file Questions.txt:\r\n```\r\n1. Ko je režirao film Kad jaganjci utihnu?\r\nA) Robert Zemekis\r\nB) Frenk Darabont\r\nC) Džonatan Dem *\r\nD) Rob Rajner\r\n2. U kojoj državi se nalazi jezero Retba? \r\nA) U Senegalu * \r\nB) U Ugandi\r\nC) U Gani \r\nD) U Nigeriji \r\n3. Kako se zove drugi studijski album grupe Zabranjeno pušenje?\r\nA) Dok čekaš sabah sa šejtanom * \r\nB) Male priče o veliko ljubavi \r\nC) Pozdrav iz zemlje Safari \r\nD) Fildžan viška \r\n4. Pod kojom zastavom nastupa teniser Alehandro Davidovič Fokina? \r\nA) Pod zastavom Argentine \r\nB) Pod zastavom Rusije \r\nC) Pod zastavom Velike Britanije \r\nD) Pod zastavom Španije *\r\n```","title":"Why doesn&#39;t client get next question in this quiz implementation in Java?","body":"<p>This code works, because while loop is working, but when I remove this comment in UserThread class</p>\n<pre><code>/*  for(Entry&lt;Integer,List&lt;String&gt;&gt; m: server.lista.entrySet()) {\n                        if(c==m.getKey()) {\n                        m.getValue().add(name);\n                        //toUser.println(&quot;&quot;);\n                    }\n                    }\n                    for(Entry&lt;Integer,List&lt;String&gt;&gt; m: server.lista.entrySet()) {\n                        System.out.println(m.getKey()+&quot; &quot;+m.getValue());\n                    }*/\n</code></pre>\n<p>client doesn't receive next question. While loop is stopping here. Can I get reason why this is happening?\nCodes are below.</p>\n<pre><code>package quiz;\n\nimport java.io.BufferedReader;\nimport java.io.FileInputStream;\nimport java.io.FileNotFoundException;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.net.ServerSocket;\nimport java.net.Socket;\nimport java.util.HashMap;\nimport java.util.List;\n\npublic class Server {\npublic static int test_port=12321;\nprivate int port;\nprivate int counter=0;\nprivate int length;\nBufferedReader fromDocument;\npublic int numberOfClients=0;\npublic static HashMap&lt;Integer,List&lt;String&gt;&gt; lista=new HashMap&lt;Integer,List&lt;String&gt;&gt;();\n\n\n    public static void main(String[] args) {\n        //int l=lengthHashMap();\n        \n        // TODO Auto-generated method stub\nServer server=new Server(test_port);\nint l=server.lengthHashMap();\nfor(int i=1;i&lt;l;i++) {\n    lista.put(i, null);\n}\nserver.execute();\n    }\nprivate void execute() {\n        // TODO Auto-generated method stub\n        try(ServerSocket server=new ServerSocket(port)){\n            \n            while(true) {\n                Socket client=server.accept();\n                System.out.println(&quot;Client connected&quot;);\n                numberOfClients++;\n                UserThread user=new UserThread(client,this);\n                user.start();\n            }\n        } catch (IOException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n    }\npublic Server(int port) {\n    this.port=port;\n}\nprivate int lengthHashMap() {\n    try {\n        fromDocument=new BufferedReader(new InputStreamReader(new FileInputStream(&quot;Questions.txt&quot;)));\n        String line=fromDocument.readLine();\n        while(line!=null) {\n            counter++;\n            line=fromDocument.readLine();\n        }\n        length=counter/5;\n    } catch (IOException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    }finally {\n        return length;\n    }\n\n}\n}\n</code></pre>\n<pre><code>package quiz;\n\nimport java.io.BufferedReader;\nimport java.io.FileInputStream;\nimport java.io.InputStreamReader;\nimport java.io.PrintWriter;\nimport java.net.Socket;\nimport java.util.List;\nimport java.util.Map.Entry;\n\npublic class UserThread extends Thread{\n    Socket client;\n    Server server;\n    BufferedReader fromDocument;\n    private int counter=0;\n    PrintWriter toUser;\n    BufferedReader fromUser;\n    String correctAnswer;\n    String answer;\n    String correctedLine;\n    private int c=0;\n    public UserThread(Socket client, Server server) {\n        // TODO Auto-generated constructor stub\n        this.client=client;\n        this.server=server;\n    }\npublic void run() {\n    try {\n        \n        while(server.numberOfClients&lt;2) {\n            System.out.println();\n        }\n        \n        fromDocument=new BufferedReader(new InputStreamReader(new FileInputStream(&quot;Questions.txt&quot;)));\n        fromUser=new BufferedReader(new InputStreamReader(this.client.getInputStream()));\n        toUser=new PrintWriter(this.client.getOutputStream(),true);\n        String line=fromDocument.readLine();\n        String name=fromUser.readLine();\n        System.out.println(name);\n                while(!line.equalsIgnoreCase(&quot;&quot;)) {\n                    while(counter&lt;5) {\n                    counter++;\n                    if(line.endsWith(&quot;*&quot;)){\n                        correctAnswer=line.substring(0,1);\n                        correctedLine=line.substring(0,line.length()-1);\n                        toUser.println(correctedLine);\n                    }\n                    else {\n                        toUser.println(line);   \n                    }\n                    line=fromDocument.readLine();\n\n                }\n                    c++;\n                    counter=0;\n                    answer=fromUser.readLine();\n \n                        \n                    \n                    if(answer.equalsIgnoreCase(correctAnswer))\n                        toUser.println(&quot;Correct!&quot;);\n                    else\n                        toUser.println(&quot;Incorrect!&quot;);\n                    //line=fromUser.readLine();\n                    //System.out.println(line);\n                /*  for(Entry&lt;Integer,List&lt;String&gt;&gt; m: server.lista.entrySet()) {\n                        if(c==m.getKey()) {\n                        m.getValue().add(name);\n                        //toUser.println(&quot;&quot;);\n                    }\n                    }\n                    for(Entry&lt;Integer,List&lt;String&gt;&gt; m: server.lista.entrySet()) {\n                        System.out.println(m.getKey()+&quot; &quot;+m.getValue());\n                    }*/\n                    \n                    \n    }\n    } catch (Exception e) {\n        // TODO: handle exception\n    }\n    \n}\n}\n</code></pre>\n<pre><code>package quiz;\n\nimport java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.io.PrintWriter;\nimport java.net.Socket;\nimport java.net.UnknownHostException;\nimport java.util.Scanner;\n\npublic class Client {\nprivate String name;\nprivate String hostname;\nprivate int port;\nString answer;\nBufferedReader fromServer;\nPrintWriter toServer;\n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\nClient client=new Client(&quot;localhost&quot;,Server.test_port);\nclient.execute();\n    }\nprivate void execute() {\n    try {\n        this.setName();\n    } catch (IOException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    }\n        // TODO Auto-generated method stub\n        try(Socket client=new Socket(this.hostname,this.port)){\n            \n            fromServer=new BufferedReader(new InputStreamReader(client.getInputStream()));\n            toServer=new PrintWriter(client.getOutputStream(),true);\n            System.out.println(&quot;Connected to server: &quot;+this.hostname);\n            toServer.println(this.name);\n            String line;\n            while(true) {\n                for(int i=0;i&lt;5;i++) {\n                    line=fromServer.readLine();\n                    System.out.println(line);\n                }\n                System.out.println(&quot;Your answer is: &quot;);\n                Scanner sc=new Scanner(System.in);\n                answer=sc.nextLine();\n                toServer.println(answer);\n                line=fromServer.readLine();\n                System.out.println(line);\n                //toServer.println(&quot;Next&quot;);\n                //for(int j=0;j&lt;5;j++)\n                //  line=fromServer.readLine();\n            }\n            \n        } catch (UnknownHostException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        } catch (IOException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n    }\npublic Client(String hostname,int port) {\n    this.hostname=hostname;\n    this.port=port;\n}\nprivate void setName() throws IOException {\n    // TODO Auto-generated method stub\n    System.out.println(&quot;Enter your name: &quot;);\n    BufferedReader stdin=new BufferedReader(new InputStreamReader(System.in));\n    this.name=stdin.readLine();\n}\n}\n</code></pre>\n<p>Content of file Questions.txt:</p>\n<pre><code>1. Ko je režirao film Kad jaganjci utihnu?\nA) Robert Zemekis\nB) Frenk Darabont\nC) Džonatan Dem *\nD) Rob Rajner\n2. U kojoj državi se nalazi jezero Retba? \nA) U Senegalu * \nB) U Ugandi\nC) U Gani \nD) U Nigeriji \n3. Kako se zove drugi studijski album grupe Zabranjeno pušenje?\nA) Dok čekaš sabah sa šejtanom * \nB) Male priče o veliko ljubavi \nC) Pozdrav iz zemlje Safari \nD) Fildžan viška \n4. Pod kojom zastavom nastupa teniser Alehandro Davidovič Fokina? \nA) Pod zastavom Argentine \nB) Pod zastavom Rusije \nC) Pod zastavom Velike Britanije \nD) Pod zastavom Španije *\n</code></pre>\n"},{"tags":["java","java-8","java-stream"],"comments":[{"owner":{"account_id":19936114,"reputation":562,"user_id":14608747,"display_name":"Paul Serre"},"score":1,"creation_date":1687374825,"post_id":76526424,"comment_id":134929542,"body_markdown":"You can achieve that using stream api:\n`String secondHighestSalaryEmployee = salaryMap.entrySet().stream().sorted(Map.Entry.&lt;String, Long&gt;comparingByValue().reversed()).skip(1).findFirst().map(Map.Entry::getKey).orElse(&quot;No employee found&quot;);`","body":"You can achieve that using stream api: <code>String secondHighestSalaryEmployee = salaryMap.entrySet().stream().sorted(Map.Entry.&lt;String, Long&gt;comparingByValue().reversed()).skip(1).findFirst().map(&zwnj;&#8203;Map.Entry::getKey).o&zwnj;&#8203;rElse(&quot;No employee found&quot;);</code>"},{"owner":{"account_id":9580750,"reputation":49,"user_id":7115339,"display_name":"Curious Coder"},"score":0,"creation_date":1687374966,"post_id":76526424,"comment_id":134929570,"body_markdown":"Thanks Paul. Appreciate your help.","body":"Thanks Paul. Appreciate your help."},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1687375255,"post_id":76526424,"comment_id":134929636,"body_markdown":"@PaulSerre don’t do the homework of other people. They should atleast try it so they have the chance to learn something.","body":"@PaulSerre don’t do the homework of other people. They should atleast try it so they have the chance to learn something."}],"answers":[{"tags":[],"owner":{"account_id":6254533,"reputation":29,"user_id":4863567,"display_name":"Angel C"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1687375305,"creation_date":1687375305,"answer_id":76526502,"question_id":76526424,"body_markdown":"**Consider the following map as input**\r\n\r\n    Map&lt;String,Integer&gt; map = new HashMap&lt;&gt;();\r\n        map.put(&quot;anil&quot;,1000);\r\n        map.put(&quot;ankit&quot;,1200);\r\n        map.put(&quot;bhavna&quot;,1300);\r\n        map.put(&quot;james&quot;,1400);\r\n        map.put(&quot;micael&quot;,1500);\r\n        map.put(&quot;tom&quot;,1600);\r\n        map.put(&quot;daniel&quot;,1700);\r\n\r\n**We want to fetch second highest salary with employee name. This can be achieved by below code.**\r\n\r\n    Map.Entry&lt;String,Integer&gt; finalResult = map.entrySet()\r\n          .stream()\r\n          .sorted(Comparator.comparing(entry -&gt; -entry.getValue())) //desc order\r\n          .toList()\r\n          .get(1); // index start from 0\r\n\r\n","title":"How can we find the name of the employee having second highest salary in a Map(key -employee name, value-salary) using java 8 stream API?","body":"<p><strong>Consider the following map as input</strong></p>\n<pre><code>Map&lt;String,Integer&gt; map = new HashMap&lt;&gt;();\n    map.put(&quot;anil&quot;,1000);\n    map.put(&quot;ankit&quot;,1200);\n    map.put(&quot;bhavna&quot;,1300);\n    map.put(&quot;james&quot;,1400);\n    map.put(&quot;micael&quot;,1500);\n    map.put(&quot;tom&quot;,1600);\n    map.put(&quot;daniel&quot;,1700);\n</code></pre>\n<p><strong>We want to fetch second highest salary with employee name. This can be achieved by below code.</strong></p>\n<pre><code>Map.Entry&lt;String,Integer&gt; finalResult = map.entrySet()\n      .stream()\n      .sorted(Comparator.comparing(entry -&gt; -entry.getValue())) //desc order\n      .toList()\n      .get(1); // index start from 0\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4647011,"reputation":41835,"user_id":3764965,"accept_rate":94,"display_name":"Nikolas Charalambidis"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1687414604,"creation_date":1687376773,"answer_id":76526660,"question_id":76526424,"body_markdown":"You can achieve it by collecting into `TreeSet` with a comparator by the `Entry::getValue()`. Poll last twice to get the 2nd largest result.\r\n\r\n```java\r\nMap&lt;String, Integer&gt; map = Map.of(\r\n\t\t&quot;Tom&quot;, 15,\r\n\t\t&quot;Jerry&quot;, 17,\r\n\t\t&quot;Silvester&quot;, 10,\r\n\t\t&quot;Tweety&quot;, 12\r\n);\r\n\r\nNavigableSet&lt;Map.Entry&lt;String,Integer&gt;&gt; set = map.entrySet()\r\n\t\t.stream()\r\n\t\t.collect(Collectors.toCollection(\r\n\t\t\t\t() -&gt; new TreeSet&lt;&gt;(Map.Entry.comparingByValue())));\r\n\r\nMap.Entry&lt;String,Integer&gt; last = set.pollLast();                // Jerry=17\r\n\t\tMap.Entry&lt;String,Integer&gt; secondLast = set.pollLast();  // Tom=15\r\n```","title":"How can we find the name of the employee having second highest salary in a Map(key -employee name, value-salary) using java 8 stream API?","body":"<p>You can achieve it by collecting into <code>TreeSet</code> with a comparator by the <code>Entry::getValue()</code>. Poll last twice to get the 2nd largest result.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String, Integer&gt; map = Map.of(\n        &quot;Tom&quot;, 15,\n        &quot;Jerry&quot;, 17,\n        &quot;Silvester&quot;, 10,\n        &quot;Tweety&quot;, 12\n);\n\nNavigableSet&lt;Map.Entry&lt;String,Integer&gt;&gt; set = map.entrySet()\n        .stream()\n        .collect(Collectors.toCollection(\n                () -&gt; new TreeSet&lt;&gt;(Map.Entry.comparingByValue())));\n\nMap.Entry&lt;String,Integer&gt; last = set.pollLast();                // Jerry=17\n        Map.Entry&lt;String,Integer&gt; secondLast = set.pollLast();  // Tom=15\n</code></pre>\n"},{"tags":[],"owner":{"account_id":230362,"reputation":28310,"user_id":493928,"accept_rate":62,"display_name":"khachik"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1687555199,"creation_date":1687555199,"answer_id":76543529,"question_id":76526424,"body_markdown":"I&#39;m surprised nobody has posted a simple `O(n)` solution:\r\n\r\n    import java.util.Map;\r\n    import java.util.HashMap;\r\n    import java.util.Map.Entry;\r\n    \r\n    public class MyClass {\r\n        public static void main(String args[]) {\r\n            Map&lt;String,Integer&gt; map = new HashMap&lt;&gt;();\r\n            map.put(&quot;a&quot;,10);\r\n            map.put(&quot;b&quot;,12);\r\n            map.put(&quot;c&quot;,20);\r\n            map.put(&quot;d&quot;,18);\r\n            map.put(&quot;e&quot;,14);\r\n            map.put(&quot;f&quot;,16);\r\n        \r\n            Entry&lt;String, Integer&gt; highest = null;\r\n            Entry&lt;String, Integer&gt; secondHighest = null;\r\n            for(Entry&lt;String, Integer&gt; entry:map.entrySet()) {\r\n                if(highest == null) {\r\n                    highest = entry;\r\n                } else if(secondHighest == null) {\r\n                    secondHighest = entry;\r\n                } else if(highest.getValue() &lt;= entry.getValue()) {\r\n                    secondHighest = highest;\r\n                    highest = entry;\r\n                } else if(secondHighest.getValue() &lt;= entry.getValue()) {\r\n                    secondHighest = entry;\r\n                } else {\r\n                    // ignore\r\n                }\r\n            }\r\n            System.err.println(&quot;Highest: &quot; + highest.getKey() + &quot;: &quot; + highest.getValue());\r\n            System.err.println(&quot;Second highest: &quot; + secondHighest.getKey() + &quot;: &quot; + secondHighest.getValue());\r\n        }\r\n    }","title":"How can we find the name of the employee having second highest salary in a Map(key -employee name, value-salary) using java 8 stream API?","body":"<p>I'm surprised nobody has posted a simple <code>O(n)</code> solution:</p>\n<pre><code>import java.util.Map;\nimport java.util.HashMap;\nimport java.util.Map.Entry;\n\npublic class MyClass {\n    public static void main(String args[]) {\n        Map&lt;String,Integer&gt; map = new HashMap&lt;&gt;();\n        map.put(&quot;a&quot;,10);\n        map.put(&quot;b&quot;,12);\n        map.put(&quot;c&quot;,20);\n        map.put(&quot;d&quot;,18);\n        map.put(&quot;e&quot;,14);\n        map.put(&quot;f&quot;,16);\n    \n        Entry&lt;String, Integer&gt; highest = null;\n        Entry&lt;String, Integer&gt; secondHighest = null;\n        for(Entry&lt;String, Integer&gt; entry:map.entrySet()) {\n            if(highest == null) {\n                highest = entry;\n            } else if(secondHighest == null) {\n                secondHighest = entry;\n            } else if(highest.getValue() &lt;= entry.getValue()) {\n                secondHighest = highest;\n                highest = entry;\n            } else if(secondHighest.getValue() &lt;= entry.getValue()) {\n                secondHighest = entry;\n            } else {\n                // ignore\n            }\n        }\n        System.err.println(&quot;Highest: &quot; + highest.getKey() + &quot;: &quot; + highest.getValue());\n        System.err.println(&quot;Second highest: &quot; + secondHighest.getKey() + &quot;: &quot; + secondHighest.getValue());\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28882671,"reputation":11,"user_id":22121817,"display_name":"Yellow Flash"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1687876389,"creation_date":1687557082,"answer_id":76543656,"question_id":76526424,"body_markdown":"If you use a TreeMap, which is an implementation of Map, you can provide a comparator at the time of its creation to sort the data which is entered into it, automatically. In this way, you can directly fetch your desired result.","title":"How can we find the name of the employee having second highest salary in a Map(key -employee name, value-salary) using java 8 stream API?","body":"<p>If you use a TreeMap, which is an implementation of Map, you can provide a comparator at the time of its creation to sort the data which is entered into it, automatically. In this way, you can directly fetch your desired result.</p>\n"}],"owner":{"account_id":9580750,"reputation":49,"user_id":7115339,"display_name":"Curious Coder"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":221,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"answer_count":4,"score":0,"last_activity_date":1687876389,"creation_date":1687374606,"question_id":76526424,"body_markdown":"We have a map Map&lt;String, Long&gt; which store employee name as string and employee salary as value. The task is to get the name with of the employee who has the second highest salary among the employees stores in this hashmap.","title":"How can we find the name of the employee having second highest salary in a Map(key -employee name, value-salary) using java 8 stream API?","body":"<p>We have a map Map&lt;String, Long&gt; which store employee name as string and employee salary as value. The task is to get the name with of the employee who has the second highest salary among the employees stores in this hashmap.</p>\n"},{"tags":["java","spring-boot","microservices","gateway","spring-cloud-gateway"],"owner":{"account_id":8903500,"reputation":1364,"user_id":6646188,"display_name":"Abhijit Mondal Abhi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":193,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687876350,"creation_date":1687876350,"question_id":76565947,"body_markdown":"I need to send back the requestHeaders as a reponseBody from Spring Cloud Gateway, but I have to avoid to call the downstream service. I have already accomplished that I can send back the headers as responseBody. But, the problem is that I have to STOP the downstream service call. \r\n\r\nHow can I achieve this? As I checked the documentation, always call is passing to the downstream services. \r\n\r\nFollowing is my current code:\r\n\r\n    @Bean\r\n        public RouteLocator routes(RouteLocatorBuilder builder, CustomAuthPreFilter customAuthPreFilter) {\r\n            return builder.routes()\r\n                    .route(&quot;rewrite_response_upper&quot;, r -&gt; r.path(&quot;/request-headers/expose&quot;)\r\n                            .filters(f -&gt;\r\n                                f.rewritePath(&quot;/access-manager/(?&lt;segment&gt;.*)&quot;, &quot;/v1.0/access-manager/$\\\\{segment}&quot;)\r\n                                .modifyResponseBody(Object.class, Object.class, (exchange, s) -&gt; Mono.just(exchange.getRequest().getHeaders())))\r\n                                .uri(&quot;http://localhost:9125&quot;))\r\n                    .build();\r\n        }","title":"How to send back a response from Spring Cloud Gateway without calling the downstream service?","body":"<p>I need to send back the requestHeaders as a reponseBody from Spring Cloud Gateway, but I have to avoid to call the downstream service. I have already accomplished that I can send back the headers as responseBody. But, the problem is that I have to STOP the downstream service call.</p>\n<p>How can I achieve this? As I checked the documentation, always call is passing to the downstream services.</p>\n<p>Following is my current code:</p>\n<pre><code>@Bean\n    public RouteLocator routes(RouteLocatorBuilder builder, CustomAuthPreFilter customAuthPreFilter) {\n        return builder.routes()\n                .route(&quot;rewrite_response_upper&quot;, r -&gt; r.path(&quot;/request-headers/expose&quot;)\n                        .filters(f -&gt;\n                            f.rewritePath(&quot;/access-manager/(?&lt;segment&gt;.*)&quot;, &quot;/v1.0/access-manager/$\\\\{segment}&quot;)\n                            .modifyResponseBody(Object.class, Object.class, (exchange, s) -&gt; Mono.just(exchange.getRequest().getHeaders())))\n                            .uri(&quot;http://localhost:9125&quot;))\n                .build();\n    }\n</code></pre>\n"},{"tags":["java","gradlew","gradle-wrapper"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1687876642,"post_id":76565941,"comment_id":134996459,"body_markdown":"Gradle 4? That&#39;s ancient. No idea if that&#39;s the problem, but I doubt it&#39;s compatible with Java 20.","body":"Gradle 4? That&#39;s ancient. No idea if that&#39;s the problem, but I doubt it&#39;s compatible with Java 20."},{"owner":{"account_id":22394789,"reputation":1382,"user_id":16606223,"display_name":"Yahor Barkouski"},"score":0,"creation_date":1687876683,"post_id":76565941,"comment_id":134996470,"body_markdown":"I&#39;m not sure Gradle 4 can support Java 20 honestly, consider gradle upgrade first","body":"I&#39;m not sure Gradle 4 can support Java 20 honestly, consider gradle upgrade first"},{"owner":{"account_id":23791169,"reputation":1,"user_id":17802583,"display_name":"Beronicous"},"score":0,"creation_date":1687880422,"post_id":76565941,"comment_id":134997370,"body_markdown":"1.12.2 Forge, I believe, only allows Grade 4 but when I try to change my JAVA_HOME to an older version such as JDK11 It still show the same error.","body":"1.12.2 Forge, I believe, only allows Grade 4 but when I try to change my JAVA_HOME to an older version such as JDK11 It still show the same error."},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1687890104,"post_id":76565941,"comment_id":134999548,"body_markdown":"You need to explicitly open the package to all unnamed modules, by providing `--add-opens java.base/java.lang=ALL-UNNAMED`. I have no idea how to do this in Gradle though.","body":"You need to explicitly open the package to all unnamed modules, by providing <code>--add-opens java.base&#47;java.lang=ALL-UNNAMED</code>. I have no idea how to do this in Gradle though."}],"owner":{"account_id":23791169,"reputation":1,"user_id":17802583,"display_name":"Beronicous"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":476,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687876309,"creation_date":1687876309,"question_id":76565941,"body_markdown":"I am trying to skid a minecraft client but I keep getting errors like this: \r\n\r\n    FAILURE: Build failed with an exception.\r\n    \r\n    * What went wrong:\r\n    Unable to get mutable Windows environment variable map\r\n\r\n\r\nThe source code: https://github.com/IUDevman/gamesense-client\r\n\r\nWith --stacktrace:\r\n\r\n    * Exception is:\r\n    net.rubygrapefruit.platform.NativeException: Unable to get mutable Windows environment variable map\r\n            at net.rubygrapefruit.platform.internal.WrapperProcess.getWindowsEnv(WrapperProcess.java:127)\r\n            at net.rubygrapefruit.platform.internal.WrapperProcess.setEnvInternal(WrapperProcess.java:100)\r\n            at net.rubygrapefruit.platform.internal.WrapperProcess.setEnvironmentVariable(WrapperProcess.java:85)\r\n            at org.gradle.internal.nativeintegration.processenvironment.NativePlatformBackedProcessEnvironment.setNativeEnvironmentVariable(NativePlatformBackedProcessEnvironment.java:36)\r\n            at org.gradle.internal.nativeintegration.processenvironment.AbstractProcessEnvironment.setEnvironmentVariable(AbstractProcessEnvironment.java:67)\r\n            at org.gradle.internal.nativeintegration.processenvironment.AbstractProcessEnvironment.maybeSetEnvironment(AbstractProcessEnvironment.java:41)\r\n            at org.gradle.launcher.daemon.server.exec.EstablishBuildEnvironment.doBuild(EstablishBuildEnvironment.java:65)\r\n            at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\r\n            at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)\r\n            at org.gradle.launcher.daemon.server.exec.StartBuildOrRespondWithBusy$1.run(StartBuildOrRespondWithBusy.java:50)\r\n            at org.gradle.launcher.daemon.server.DaemonStateCoordinator$1.run(DaemonStateCoordinator.java:295)\r\n            at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)\r\n            at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)\r\n            at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\r\n            at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\r\n            at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)\r\n            at java.base/java.lang.Thread.run(Thread.java:1623)\r\n    Caused by: java.lang.reflect.InaccessibleObjectException: Unable to make field private static final java.util.Map java.lang.ProcessEnvironment.theCaseInsensitiveEnvironment accessible: module java.base does not &quot;opens java.lang&quot; to unnamed module @3f0ee7cb\r\n            at java.base/java.lang.reflect.AccessibleObject.throwInaccessibleObjectException(AccessibleObject.java:387)\r\n            at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:363)\r\n            at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:311)\r\n            at java.base/java.lang.reflect.Field.checkCanSetAccessible(Field.java:181)\r\n            at java.base/java.lang.reflect.Field.setAccessible(Field.java:175)\r\n            at net.rubygrapefruit.platform.internal.WrapperProcess.getWindowsEnv(WrapperProcess.java:124)\r\n            ... 16 more\r\n    \r\n    \r\n    * Get more help at https://help.gradle.org\r\n\r\n\r\nGradlew version:\r\n\r\n    ------------------------------------------------------------\r\n    Gradle 4.10.3\r\n    ------------------------------------------------------------\r\n    \r\n    Build time:   2018-12-05 00:50:54 UTC\r\n    Revision:     e76905e3a1034e6f724566aeb985621347ff43bc\r\n    \r\n    Kotlin DSL:   1.0-rc-6\r\n    Kotlin:       1.2.61\r\n    Groovy:       2.4.15\r\n    Ant:          Apache Ant(TM) version 1.9.11 compiled on March 23 2018\r\n    JVM:          20.0.1 (Oracle Corporation 20.0.1+9-29)\r\n    OS:           Windows 10 10.0 amd64\r\nJDK Version: 20.0\r\n\r\nYes, I did input the JDK in the JAVA_HOME and Path.","title":"Unable to get mutable Windows environment variable map Gradlew Error","body":"<p>I am trying to skid a minecraft client but I keep getting errors like this:</p>\n<pre><code>FAILURE: Build failed with an exception.\n\n* What went wrong:\nUnable to get mutable Windows environment variable map\n</code></pre>\n<p>The source code: <a href=\"https://github.com/IUDevman/gamesense-client\" rel=\"nofollow noreferrer\">https://github.com/IUDevman/gamesense-client</a></p>\n<p>With --stacktrace:</p>\n<pre><code>* Exception is:\nnet.rubygrapefruit.platform.NativeException: Unable to get mutable Windows environment variable map\n        at net.rubygrapefruit.platform.internal.WrapperProcess.getWindowsEnv(WrapperProcess.java:127)\n        at net.rubygrapefruit.platform.internal.WrapperProcess.setEnvInternal(WrapperProcess.java:100)\n        at net.rubygrapefruit.platform.internal.WrapperProcess.setEnvironmentVariable(WrapperProcess.java:85)\n        at org.gradle.internal.nativeintegration.processenvironment.NativePlatformBackedProcessEnvironment.setNativeEnvironmentVariable(NativePlatformBackedProcessEnvironment.java:36)\n        at org.gradle.internal.nativeintegration.processenvironment.AbstractProcessEnvironment.setEnvironmentVariable(AbstractProcessEnvironment.java:67)\n        at org.gradle.internal.nativeintegration.processenvironment.AbstractProcessEnvironment.maybeSetEnvironment(AbstractProcessEnvironment.java:41)\n        at org.gradle.launcher.daemon.server.exec.EstablishBuildEnvironment.doBuild(EstablishBuildEnvironment.java:65)\n        at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)\n        at org.gradle.launcher.daemon.server.exec.StartBuildOrRespondWithBusy$1.run(StartBuildOrRespondWithBusy.java:50)\n        at org.gradle.launcher.daemon.server.DaemonStateCoordinator$1.run(DaemonStateCoordinator.java:295)\n        at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)\n        at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n        at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)\n        at java.base/java.lang.Thread.run(Thread.java:1623)\nCaused by: java.lang.reflect.InaccessibleObjectException: Unable to make field private static final java.util.Map java.lang.ProcessEnvironment.theCaseInsensitiveEnvironment accessible: module java.base does not &quot;opens java.lang&quot; to unnamed module @3f0ee7cb\n        at java.base/java.lang.reflect.AccessibleObject.throwInaccessibleObjectException(AccessibleObject.java:387)\n        at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:363)\n        at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:311)\n        at java.base/java.lang.reflect.Field.checkCanSetAccessible(Field.java:181)\n        at java.base/java.lang.reflect.Field.setAccessible(Field.java:175)\n        at net.rubygrapefruit.platform.internal.WrapperProcess.getWindowsEnv(WrapperProcess.java:124)\n        ... 16 more\n\n\n* Get more help at https://help.gradle.org\n</code></pre>\n<p>Gradlew version:</p>\n<pre><code>------------------------------------------------------------\nGradle 4.10.3\n------------------------------------------------------------\n\nBuild time:   2018-12-05 00:50:54 UTC\nRevision:     e76905e3a1034e6f724566aeb985621347ff43bc\n\nKotlin DSL:   1.0-rc-6\nKotlin:       1.2.61\nGroovy:       2.4.15\nAnt:          Apache Ant(TM) version 1.9.11 compiled on March 23 2018\nJVM:          20.0.1 (Oracle Corporation 20.0.1+9-29)\nOS:           Windows 10 10.0 amd64\n</code></pre>\n<p>JDK Version: 20.0</p>\n<p>Yes, I did input the JDK in the JAVA_HOME and Path.</p>\n"},{"tags":["java","jackson","jackson2","jackson-dataformat-xml"],"comments":[{"owner":{"account_id":22394789,"reputation":1382,"user_id":16606223,"display_name":"Yahor Barkouski"},"score":0,"creation_date":1687873811,"post_id":76565410,"comment_id":134995676,"body_markdown":"The default implementation of `ToXmlGenerator` does not support changing the standalone attribute in the XML declaration unfortunately, because `XMLStreamWriter` which `ToXmlGenerator` is based on, does not support such an operation","body":"The default implementation of <code>ToXmlGenerator</code> does not support changing the standalone attribute in the XML declaration unfortunately, because <code>XMLStreamWriter</code> which <code>ToXmlGenerator</code> is based on, does not support such an operation"}],"answers":[{"tags":[],"owner":{"account_id":8137250,"reputation":705,"user_id":6128516,"display_name":"Samir Lakhani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687874818,"creation_date":1687874818,"answer_id":76565718,"question_id":76565410,"body_markdown":"To include the standalone=&quot;yes&quot; attribute in the XML prolog using Spring Boot and Jackson, you can customize the XmlMapper configuration by providing a custom Jackson2ObjectMapperBuilder instance. Here&#39;s an updated version of your code that includes the standalone attribute:\r\n\r\n    import com.fasterxml.jackson.dataformat.xml.XmlMapper;\r\n    import com.fasterxml.jackson.dataformat.xml.ser.ToXmlGenerator;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.http.converter.xml.MappingJackson2XmlHttpMessageConverter;\r\n    import org.springframework.http.converter.xml.Jackson2ObjectMapperBuilder;\r\n    \r\n    @Configuration\r\n    public class JacksonXmlConfig {\r\n    \r\n        @Bean\r\n        public MappingJackson2XmlHttpMessageConverter mappingJackson2XmlHttpMessageConverter(Jackson2ObjectMapperBuilder builder) {\r\n            XmlMapper xmlMapper = builder.createXmlMapper(true).build();\r\n            xmlMapper.configure(ToXmlGenerator.Feature.WRITE_XML_DECLARATION, true);\r\n            xmlMapper.configure(ToXmlGenerator.Feature.WRITE_XML_1_0_BOM, false);\r\n            xmlMapper.configure(ToXmlGenerator.Feature.STANDALONE, &quot;yes&quot;); // Set the standalone attribute\r\n            \r\n            return new MappingJackson2XmlHttpMessageConverter(xmlMapper);\r\n        }\r\n\r\n    }\r\nIn this updated code, the xmlMapper.configure(ToXmlGenerator.Feature.STANDALONE, &quot;yes&quot;) line sets the standalone attribute in the XML prolog to &quot;yes&quot;. This will include the standalone=&quot;yes&quot; attribute in the generated XML responses.\r\n\r\nPlease note that the ToXmlGenerator.Feature.STANDALONE feature is available starting from Jackson version 2.13.0. Since you mentioned that your Jackson version is 2.14.2, it should work fine.\r\n\r\nMake sure to include this configuration class in your Spring Boot application or in the appropriate component scan location for it to take effect.\r\n    \r\n","title":"SpringBoot/Jackson how do I set standalone=&quot;yes&quot; in XML prolog","body":"<p>To include the standalone=&quot;yes&quot; attribute in the XML prolog using Spring Boot and Jackson, you can customize the XmlMapper configuration by providing a custom Jackson2ObjectMapperBuilder instance. Here's an updated version of your code that includes the standalone attribute:</p>\n<pre><code>import com.fasterxml.jackson.dataformat.xml.XmlMapper;\nimport com.fasterxml.jackson.dataformat.xml.ser.ToXmlGenerator;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.http.converter.xml.MappingJackson2XmlHttpMessageConverter;\nimport org.springframework.http.converter.xml.Jackson2ObjectMapperBuilder;\n\n@Configuration\npublic class JacksonXmlConfig {\n\n    @Bean\n    public MappingJackson2XmlHttpMessageConverter mappingJackson2XmlHttpMessageConverter(Jackson2ObjectMapperBuilder builder) {\n        XmlMapper xmlMapper = builder.createXmlMapper(true).build();\n        xmlMapper.configure(ToXmlGenerator.Feature.WRITE_XML_DECLARATION, true);\n        xmlMapper.configure(ToXmlGenerator.Feature.WRITE_XML_1_0_BOM, false);\n        xmlMapper.configure(ToXmlGenerator.Feature.STANDALONE, &quot;yes&quot;); // Set the standalone attribute\n        \n        return new MappingJackson2XmlHttpMessageConverter(xmlMapper);\n    }\n\n}\n</code></pre>\n<p>In this updated code, the xmlMapper.configure(ToXmlGenerator.Feature.STANDALONE, &quot;yes&quot;) line sets the standalone attribute in the XML prolog to &quot;yes&quot;. This will include the standalone=&quot;yes&quot; attribute in the generated XML responses.</p>\n<p>Please note that the ToXmlGenerator.Feature.STANDALONE feature is available starting from Jackson version 2.13.0. Since you mentioned that your Jackson version is 2.14.2, it should work fine.</p>\n<p>Make sure to include this configuration class in your Spring Boot application or in the appropriate component scan location for it to take effect.</p>\n"}],"owner":{"account_id":26669791,"reputation":41,"user_id":20281373,"display_name":"Reid2"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":231,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687876308,"creation_date":1687872726,"question_id":76565410,"body_markdown":"I&#39;ve created a bean to include an XML prolog in my Jackson XML responses. \r\n\r\n```\r\n@Bean\r\n    public MappingJackson2XmlHttpMessageConverter mappingJackson2XmlHttpMessageConverter(Jackson2ObjectMapperBuilder builder) throws XMLStreamException {\r\n        XmlMapper xmlMapper = builder.createXmlMapper(true).build();\r\n        xmlMapper.configure(ToXmlGenerator.Feature.WRITE_XML_DECLARATION, true);\r\n        \r\n        return new MappingJackson2XmlHttpMessageConverter(xmlMapper);\r\n    }\r\n```\r\n\r\nBut, I need to include `standalone=&quot;yes&quot;` in the prolog. I&#39;m not sure how to add this additional attribute? My Spring Boot version is 3.0.6 and my Jackson version is 2.14.2","title":"SpringBoot/Jackson how do I set standalone=&quot;yes&quot; in XML prolog","body":"<p>I've created a bean to include an XML prolog in my Jackson XML responses.</p>\n<pre><code>@Bean\n    public MappingJackson2XmlHttpMessageConverter mappingJackson2XmlHttpMessageConverter(Jackson2ObjectMapperBuilder builder) throws XMLStreamException {\n        XmlMapper xmlMapper = builder.createXmlMapper(true).build();\n        xmlMapper.configure(ToXmlGenerator.Feature.WRITE_XML_DECLARATION, true);\n        \n        return new MappingJackson2XmlHttpMessageConverter(xmlMapper);\n    }\n</code></pre>\n<p>But, I need to include <code>standalone=&quot;yes&quot;</code> in the prolog. I'm not sure how to add this additional attribute? My Spring Boot version is 3.0.6 and my Jackson version is 2.14.2</p>\n"},{"tags":["java","junit","allure"],"comments":[{"owner":{"account_id":4853449,"reputation":2312,"user_id":3915166,"display_name":"Dmitry Baev"},"score":0,"creation_date":1631639177,"post_id":69131431,"comment_id":122275290,"body_markdown":"Allure has no such functionality","body":"Allure has no such functionality"},{"owner":{"account_id":9795917,"reputation":1,"user_id":10578655,"display_name":"Rea1"},"score":0,"creation_date":1632912192,"post_id":69131431,"comment_id":122619564,"body_markdown":"Thank you, Dmitry. Solved the task another way","body":"Thank you, Dmitry. Solved the task another way"}],"answers":[{"tags":[],"owner":{"account_id":7522930,"reputation":108,"user_id":6028588,"display_name":"Sabrina"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687876187,"creation_date":1687876187,"answer_id":76565921,"question_id":69131431,"body_markdown":"It&#39;s been a while but for anyone wondering, the folder allure-report is generated by the [Allure reporting][1] tool. \r\nTo generate using maven, you can use command `mvn allure:serve`.\r\nIf you first install the [Allure commands][2], you can use command `allure generate`.\r\n\r\n\r\n  [1]: https://docs.qameta.io/allure/\r\n  [2]: https://docs.qameta.io/allure/#_installing_a_commandline","title":"How to get /allure-result (NOT allure-report) folder from junt report xml","body":"<p>It's been a while but for anyone wondering, the folder allure-report is generated by the <a href=\"https://docs.qameta.io/allure/\" rel=\"nofollow noreferrer\">Allure reporting</a> tool.\nTo generate using maven, you can use command <code>mvn allure:serve</code>.\nIf you first install the <a href=\"https://docs.qameta.io/allure/#_installing_a_commandline\" rel=\"nofollow noreferrer\">Allure commands</a>, you can use command <code>allure generate</code>.</p>\n"}],"owner":{"account_id":9795917,"reputation":1,"user_id":10578655,"display_name":"Rea1"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":646,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687876187,"creation_date":1631272743,"question_id":69131431,"body_markdown":"GIVEN: Junit5 reports like:\r\n\r\n      ?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;testsuites&gt;\r\n       &lt;testsuite name=&quot;ru.vtb.octopus.test&quot; errors=&quot;0&quot; skipped=&quot;0&quot; tests=&quot;3&quot; failures=&quot;0&quot; time=&quot;0.10&quot; timestamp=&quot;2021-02-1T10:23:58&quot;&gt;\r\n          &lt;properties&gt;\r\n             &lt;property name=&quot;vendor&quot; value=&quot;Systems&quot; /&gt;\r\n             &lt;property name=&quot;type&quot; value=&quot;example&quot; /&gt;\r\n          &lt;/properties&gt;\r\n          &lt;testcase classname=&quot;ru.vtb.octopus.test&quot; name=&quot;Test1&quot; time=&quot;0.01&quot; /&gt;\r\n          &lt;testcase classname=&quot;ru.vtb.octopus.test&quot; name=&quot;Test2&quot; time=&quot;0.05&quot; /&gt;\r\n          &lt;testcase classname=&quot;ru.vtb.octopus.test&quot; name=&quot;Test&quot; time=&quot;0.04&quot; /&gt;\r\n       &lt;/testsuite&gt;\r\n    &lt;/testsuites&gt;\r\n\r\nCan I generate an /allure-result (NOT allure-report) folder.\r\n\r\nDetails:\r\nA vendor created pl/sql autotests (non-java framework), that generates JUnit reports as a result. I can get only a result - the JUnit report.\r\n\r\nI have to get /allure-result folder with appropriate data. This data is used as input data for another company&#39;s tool. It is possible?\r\n\r\nIt&#39;s a piece of cake to generate the final /allure-report (either using Allure CLI tool with  allure serve or allure -generate  or maven-allure plugin )\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"How to get /allure-result (NOT allure-report) folder from junt report xml","body":"<p>GIVEN: Junit5 reports like:</p>\n<pre><code>  ?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;testsuites&gt;\n   &lt;testsuite name=&quot;ru.vtb.octopus.test&quot; errors=&quot;0&quot; skipped=&quot;0&quot; tests=&quot;3&quot; failures=&quot;0&quot; time=&quot;0.10&quot; timestamp=&quot;2021-02-1T10:23:58&quot;&gt;\n      &lt;properties&gt;\n         &lt;property name=&quot;vendor&quot; value=&quot;Systems&quot; /&gt;\n         &lt;property name=&quot;type&quot; value=&quot;example&quot; /&gt;\n      &lt;/properties&gt;\n      &lt;testcase classname=&quot;ru.vtb.octopus.test&quot; name=&quot;Test1&quot; time=&quot;0.01&quot; /&gt;\n      &lt;testcase classname=&quot;ru.vtb.octopus.test&quot; name=&quot;Test2&quot; time=&quot;0.05&quot; /&gt;\n      &lt;testcase classname=&quot;ru.vtb.octopus.test&quot; name=&quot;Test&quot; time=&quot;0.04&quot; /&gt;\n   &lt;/testsuite&gt;\n&lt;/testsuites&gt;\n</code></pre>\n<p>Can I generate an /allure-result (NOT allure-report) folder.</p>\n<p>Details:\nA vendor created pl/sql autotests (non-java framework), that generates JUnit reports as a result. I can get only a result - the JUnit report.</p>\n<p>I have to get /allure-result folder with appropriate data. This data is used as input data for another company's tool. It is possible?</p>\n<p>It's a piece of cake to generate the final /allure-report (either using Allure CLI tool with  allure serve or allure -generate  or maven-allure plugin )</p>\n"},{"tags":["java","quarkus","open-telemetry","jaeger","telemetry"],"comments":[{"owner":{"account_id":18044566,"reputation":101,"user_id":13115896,"display_name":"sg2000"},"score":0,"creation_date":1687915415,"post_id":76565847,"comment_id":135002787,"body_markdown":"Turns out this was working in the demo application because it was using org.eclipse.microprofile.rest.client.RestClientBuilder. When i switched to it, i started seeing traceids getting propagated.  Also i noticed the trace id is not getting logged at all though the context has the trace and span ids. has anyone experienced this before?","body":"Turns out this was working in the demo application because it was using org.eclipse.microprofile.rest.client.RestClientBuilder. When i switched to it, i started seeing traceids getting propagated.  Also i noticed the trace id is not getting logged at all though the context has the trace and span ids. has anyone experienced this before?"},{"owner":{"account_id":1954609,"reputation":903,"user_id":1757919,"display_name":"Roberto Cortez"},"score":0,"creation_date":1688555971,"post_id":76565847,"comment_id":135088202,"body_markdown":"It should work out of the box, by just including the Quarkus OpenTelemetry Extension. Any chance you can provide us with a copy of your code so we can have a look? You can also open an issue in Quarkus: https://github.com/quarkusio/quarkus/issues","body":"It should work out of the box, by just including the Quarkus OpenTelemetry Extension. Any chance you can provide us with a copy of your code so we can have a look? You can also open an issue in Quarkus: <a href=\"https://github.com/quarkusio/quarkus/issues\" rel=\"nofollow noreferrer\">github.com/quarkusio/quarkus/issues</a>"}],"owner":{"account_id":18044566,"reputation":101,"user_id":13115896,"display_name":"sg2000"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":134,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687875973,"creation_date":1687875673,"question_id":76565847,"body_markdown":"I am using Quarkus 2.13.x and trying to get tracing work across multiple services. For individual services tracing works fine. The issue is with tracing requests across multiple services. The demo sample worked fine with automatic context propagation with no extra changes. \r\nHowever, when i try it in our app, the automatic propagation doesn&#39;t work. whereas the manual propagation works when explicitly done with \r\n\r\n```\r\nopenTelemetry\r\n  .getPropagators()\r\n  .getTextMapPropagator()\r\n  .inject(Context.current(), transportLayer, setter);\r\n```\r\n\r\nFor the automatic propagation, i am importing the gradle extension \r\n\r\n```\r\nio.opentelemetry:opentelemetry-extension-trace-propagators\r\n```\r\n\r\nand also set the propagators in the `application.properties` to \r\n\r\n```\r\nquarkus.opentelemetry.propagators=tracecontext,baggage,jaeger\r\n``` \r\n\r\nHowever the manual approach works and the automated one doesn&#39;t. \r\n\r\nDo i need to do anything else for the automatic propagation to work? Also we are using Jaeger collector for the traces\r\n","title":"Quarkus Opentelemetry - Automatic versus manual context propagation","body":"<p>I am using Quarkus 2.13.x and trying to get tracing work across multiple services. For individual services tracing works fine. The issue is with tracing requests across multiple services. The demo sample worked fine with automatic context propagation with no extra changes.\nHowever, when i try it in our app, the automatic propagation doesn't work. whereas the manual propagation works when explicitly done with</p>\n<pre><code>openTelemetry\n  .getPropagators()\n  .getTextMapPropagator()\n  .inject(Context.current(), transportLayer, setter);\n</code></pre>\n<p>For the automatic propagation, i am importing the gradle extension</p>\n<pre><code>io.opentelemetry:opentelemetry-extension-trace-propagators\n</code></pre>\n<p>and also set the propagators in the <code>application.properties</code> to</p>\n<pre><code>quarkus.opentelemetry.propagators=tracecontext,baggage,jaeger\n</code></pre>\n<p>However the manual approach works and the automated one doesn't.</p>\n<p>Do i need to do anything else for the automatic propagation to work? Also we are using Jaeger collector for the traces</p>\n"},{"tags":["java","multithreading","parallel-processing","interrupt"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1687860997,"post_id":76563820,"comment_id":134992612,"body_markdown":"You&#39;ve answered your own question. `this` refers to the anonymous inner class, not to the `Thread`, so notifying the thread has no effect on `this.wait()`; but interrupting the thread does, as documented.","body":"You&#39;ve answered your own question. <code>this</code> refers to the anonymous inner class, not to the <code>Thread</code>, so notifying the thread has no effect on <code>this.wait()</code>; but interrupting the thread does, as documented."},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1687865031,"post_id":76563820,"comment_id":134993432,"body_markdown":"The anonymous inner class is the thread.","body":"The anonymous inner class is the thread."},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":0,"creation_date":1687866156,"post_id":76563820,"comment_id":134993678,"body_markdown":"I don&#39;t know what actually is happening, but you are not supposed to use `wait` and `notify` on `Thread` instances.","body":"I don&#39;t know what actually is happening, but you are not supposed to use <code>wait</code> and <code>notify</code> on <code>Thread</code> instances."},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1687867068,"post_id":76563820,"comment_id":134993884,"body_markdown":"@SolomonSlow that&#39;s a good point, when you call `notify` only one waiting object might get notified. `notifyAll` might help, but it is better to use a tool from the concurrent package that will manage your flow.","body":"@SolomonSlow that&#39;s a good point, when you call <code>notify</code> only one waiting object might get notified. <code>notifyAll</code> might help, but it is better to use a tool from the concurrent package that will manage your flow."},{"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"score":1,"creation_date":1687867616,"post_id":76563820,"comment_id":134994016,"body_markdown":"You&#39;re locking (the `x` in `synchronized (x)`) on an instance of `Thread`. __never do this__. In fact, when using locks, they are very &#39;internal&#39; - you should never lock on anything kinda public (and threads are _very_ public, any code can get all threads trivially). locking on `this` is suspect, even (__if__ you lock on `this`, your javadoc MUST explain in detail how that lock works, and it is now part of your spec, i.e. if you change this behaviour, that&#39;s a major version upgrade).","body":"You&#39;re locking (the <code>x</code> in <code>synchronized (x)</code>) on an instance of <code>Thread</code>. <b>never do this</b>. In fact, when using locks, they are very &#39;internal&#39; - you should never lock on anything kinda public (and threads are <i>very</i> public, any code can get all threads trivially). locking on <code>this</code> is suspect, even (<b>if</b> you lock on <code>this</code>, your javadoc MUST explain in detail how that lock works, and it is now part of your spec, i.e. if you change this behaviour, that&#39;s a major version upgrade)."},{"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"score":1,"creation_date":1687867654,"post_id":76563820,"comment_id":134994030,"body_markdown":"Hence, by default, __always lock on a private final field instead__. `private final Object lock = new Object[0];` is the go-to thing, then `synchronized (lock) {}` for locking. (Array instead of object because it can be serialized, which is rarely relevant, if you find `new Object()` more readable, have at it).","body":"Hence, by default, <b>always lock on a private final field instead</b>. <code>private final Object lock = new Object[0];</code> is the go-to thing, then <code>synchronized (lock) {}</code> for locking. (Array instead of object because it can be serialized, which is rarely relevant, if you find <code>new Object()</code> more readable, have at it)."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1687874130,"post_id":76563820,"comment_id":134995764,"body_markdown":"actually, thinking about it, code is calling `join()` which also calls `wait()` - the `notify()` is only waking up the `wait()` in `join()` which continues waiting if the Thread is still alive - [documentation](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Object.html#notify()) of `notify()`:  &quot;*Wakes up a single thread that is waiting on this object&#39;s monitor. If any threads are waiting on this object, one of them is chosen to be awakened.*&quot;","body":"actually, thinking about it, code is calling <code>join()</code> which also calls <code>wait()</code> - the <code>notify()</code> is only waking up the <code>wait()</code> in <code>join()</code> which continues waiting if the Thread is still alive - <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Object.html#notify()\" rel=\"nofollow noreferrer\">documentation</a> of <code>notify()</code>:  &quot;<i>Wakes up a single thread that is waiting on this object&#39;s monitor. If any threads are waiting on this object, one of them is chosen to be awakened.</i>&quot;"},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":0,"creation_date":1687874582,"post_id":76563820,"comment_id":134995904,"body_markdown":"@user16320675, That probably is the answer. You should make it an &quot;_Answer._&quot;","body":"@user16320675, That probably is the answer. You should make it an &quot;<i>Answer.</i>&quot;"}],"answers":[{"tags":[],"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687875848,"creation_date":1687866136,"answer_id":76564499,"question_id":76563820,"body_markdown":"It works for me. You should remove the race condition. Plus you seem to be using quite a few objects so you very well could be waiting on a different object than you&#39;re notifying. If the only change is the interrupt for the wait it should work.\r\n\r\n```\r\npublic class Junk{\r\n\tThread t;\r\n\tvolatile boolean waiting = false;\r\n    public Junk(){\r\n\t\tt = new Thread(){\r\n\t\t    @Override\r\n\t\t    public void run(){\r\n\t\t\t\tsynchronized(this){\r\n\t\t\t\t\twaiting = true;\r\n\t\t\t\t\ttry{\r\n\t\t\t\t\t    wait();\r\n\t\t\t\t\t}catch(Exception e){\r\n\t\t\t\t\t    e.printStackTrace();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tSystem.out.println(&quot;finished&quot;);\r\n\t\t\t\t}\r\n\t\t    }\r\n\t\t};\r\n\t\t}\r\n    public static void main(String[] args) throws Exception{\r\n\t\tJunk y = new Junk();\r\n\t\ty.t.start();\r\n\t\twhile( !y.waiting ){\r\n\t\t\tSystem.out.print(&quot;.&quot;);\r\n\t\t}\r\n\t\tSystem.out.println(&quot;go&quot;);\r\n\t\tsynchronized(y.t){\r\n\t\t\ty.t.notify();\r\n\t\t}\r\n\t\ty.t.join();\r\n\t}\r\n}\r\n```\r\n\r\nAs pointed out in the comments, notify only awakens one waiting thread if I add another wait on the same object, then notify will not release one of the waiting threads.\r\n\r\n    Junk y = new Junk();\r\n    new Thread( ()-&gt;{\r\n\t\t\tsynchronized(y.t){ try{ y.t.wait();}catch(Exception e){} System.out.println(&quot;waited&quot;);}\r\n    }).start();\r\n    y.t.start();\r\n\r\nAll of the threads get released by switching `notify()` with `notifyAll();`\r\n\r\nThis is especially a problem with Thread because it is very public. At the very least you should use a different object that isn&#39;t globally used for synchronization.","title":"Why does interrupt() on waiting thread work but notify() does not?","body":"<p>It works for me. You should remove the race condition. Plus you seem to be using quite a few objects so you very well could be waiting on a different object than you're notifying. If the only change is the interrupt for the wait it should work.</p>\n<pre><code>public class Junk{\n    Thread t;\n    volatile boolean waiting = false;\n    public Junk(){\n        t = new Thread(){\n            @Override\n            public void run(){\n                synchronized(this){\n                    waiting = true;\n                    try{\n                        wait();\n                    }catch(Exception e){\n                        e.printStackTrace();\n                    }\n                    System.out.println(&quot;finished&quot;);\n                }\n            }\n        };\n        }\n    public static void main(String[] args) throws Exception{\n        Junk y = new Junk();\n        y.t.start();\n        while( !y.waiting ){\n            System.out.print(&quot;.&quot;);\n        }\n        System.out.println(&quot;go&quot;);\n        synchronized(y.t){\n            y.t.notify();\n        }\n        y.t.join();\n    }\n}\n</code></pre>\n<p>As pointed out in the comments, notify only awakens one waiting thread if I add another wait on the same object, then notify will not release one of the waiting threads.</p>\n<pre><code>Junk y = new Junk();\nnew Thread( ()-&gt;{\n        synchronized(y.t){ try{ y.t.wait();}catch(Exception e){} System.out.println(&quot;waited&quot;);}\n}).start();\ny.t.start();\n</code></pre>\n<p>All of the threads get released by switching <code>notify()</code> with <code>notifyAll();</code></p>\n<p>This is especially a problem with Thread because it is very public. At the very least you should use a different object that isn't globally used for synchronization.</p>\n"}],"owner":{"account_id":28903948,"reputation":1,"user_id":22138293,"display_name":"rzdrrw"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687875848,"creation_date":1687860705,"question_id":76563820,"body_markdown":"I have created two sample classes, please ignore the quirks like accessing the Map by get(1L). I recreated the data structures I have in my real project in a very simple way because I am struggling with waking the thread up.\r\n\r\n\r\nFirst is the MyThread class. All it does is creating a thread, creating an instance of Handler and passing the Handler the thread and then waiting for the thread via join(). All the thread does is wait. It is synchronized on &quot;this&quot; which I assume is the instance of the thread (anonymous inner class).\r\n\r\n```\r\npublic class MyThread {\r\n\r\n\r\n    public static void main(String[] args) {\r\n        MyThread t = new MyThread();\r\n    }\r\n\r\n    public MyThread() {\r\n        Thread t = new Thread() {\r\n            @Override\r\n            public void run() {\r\n                synchronized (this) {\r\n                    try {\r\n                        wait();\r\n                    } catch (InterruptedException e) {\r\n                        System.out.println(&quot;interrupted&quot;);\r\n                    }\r\n                }\r\n            }\r\n        };\r\n\r\n        Handler handler = new Handler(t);\r\n\r\n        System.out.println(&quot;starting thread&quot;);\r\n        t.start();\r\n\r\n        try {\r\n            t.join();\r\n            System.out.println(&quot;joined! (woke up)&quot;);\r\n        } catch (InterruptedException e) {\r\n            System.out.println(&quot;MyThread interrupted&quot;);\r\n        }\r\n\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\nThe Handler class has a map. To each key there is a set with threads assigned. After 3 times the Handler is supposed to wake up the thread in MyThread via &quot;t.notify()&quot;. I synchronized on the same monitor &quot;t&quot; right? Yet after it notified the thread in MyThread nothing happens. But if I change the t.notify() to t.interrupt() it does interrupt the waiting thread and the thread is joined in MyThread. I have zero clue as to why that is and was hoping for some clarification.\r\n\r\n\r\n```\r\npublic class Handler {\r\n\r\n    NavigableMap&lt;Long, Set&lt;Thread&gt;&gt; map = new TreeMap&lt;&gt;();\r\n\r\n    public Handler(Thread t2) {\r\n        System.out.println(&quot;in Handler&quot;);\r\n        map.put(1L, new HashSet&lt;&gt;());\r\n        map.get(1L).add(t2);\r\n\r\n        Thread t = new Thread(new Runnable() {\r\n            int counter = 0;\r\n            @Override\r\n            public void run() {\r\n                try {\r\n                    while (true) {\r\n                        System.out.println(&quot;waiting: &quot; + counter);\r\n                        Thread.sleep(3000);\r\n                        if (++counter == 3) {\r\n                            for (Thread t : map.get(1L)) {\r\n                                synchronized (t) {\r\n                                    System.out.println(&quot;notifying!&quot;);\r\n                                    t.notify();\r\n                                    System.out.println(&quot;notified!&quot;);\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                } catch (InterruptedException e) {\r\n                    throw new RuntimeException(e);\r\n                }\r\n            }\r\n        });\r\n\r\n        t.start();\r\n    }\r\n\r\n\r\n}\r\n```\r\n\r\nI have seen multiple questions on here where it was just synchronized on a different monitor but here I am synchronizing on &quot;this&quot; and then the same instance so it should be the same no?\r\n\r\nPlease excuse all the simplifications (for example the infinity loop) I just wanted to create an easy executable example.\r\n\r\n\r\n\r\nCreated the test example. I was expecting that the notify() would wake up the waiting thread.","title":"Why does interrupt() on waiting thread work but notify() does not?","body":"<p>I have created two sample classes, please ignore the quirks like accessing the Map by get(1L). I recreated the data structures I have in my real project in a very simple way because I am struggling with waking the thread up.</p>\n<p>First is the MyThread class. All it does is creating a thread, creating an instance of Handler and passing the Handler the thread and then waiting for the thread via join(). All the thread does is wait. It is synchronized on &quot;this&quot; which I assume is the instance of the thread (anonymous inner class).</p>\n<pre><code>public class MyThread {\n\n\n    public static void main(String[] args) {\n        MyThread t = new MyThread();\n    }\n\n    public MyThread() {\n        Thread t = new Thread() {\n            @Override\n            public void run() {\n                synchronized (this) {\n                    try {\n                        wait();\n                    } catch (InterruptedException e) {\n                        System.out.println(&quot;interrupted&quot;);\n                    }\n                }\n            }\n        };\n\n        Handler handler = new Handler(t);\n\n        System.out.println(&quot;starting thread&quot;);\n        t.start();\n\n        try {\n            t.join();\n            System.out.println(&quot;joined! (woke up)&quot;);\n        } catch (InterruptedException e) {\n            System.out.println(&quot;MyThread interrupted&quot;);\n        }\n\n    }\n}\n\n</code></pre>\n<p>The Handler class has a map. To each key there is a set with threads assigned. After 3 times the Handler is supposed to wake up the thread in MyThread via &quot;t.notify()&quot;. I synchronized on the same monitor &quot;t&quot; right? Yet after it notified the thread in MyThread nothing happens. But if I change the t.notify() to t.interrupt() it does interrupt the waiting thread and the thread is joined in MyThread. I have zero clue as to why that is and was hoping for some clarification.</p>\n<pre><code>public class Handler {\n\n    NavigableMap&lt;Long, Set&lt;Thread&gt;&gt; map = new TreeMap&lt;&gt;();\n\n    public Handler(Thread t2) {\n        System.out.println(&quot;in Handler&quot;);\n        map.put(1L, new HashSet&lt;&gt;());\n        map.get(1L).add(t2);\n\n        Thread t = new Thread(new Runnable() {\n            int counter = 0;\n            @Override\n            public void run() {\n                try {\n                    while (true) {\n                        System.out.println(&quot;waiting: &quot; + counter);\n                        Thread.sleep(3000);\n                        if (++counter == 3) {\n                            for (Thread t : map.get(1L)) {\n                                synchronized (t) {\n                                    System.out.println(&quot;notifying!&quot;);\n                                    t.notify();\n                                    System.out.println(&quot;notified!&quot;);\n                                }\n                            }\n                        }\n                    }\n                } catch (InterruptedException e) {\n                    throw new RuntimeException(e);\n                }\n            }\n        });\n\n        t.start();\n    }\n\n\n}\n</code></pre>\n<p>I have seen multiple questions on here where it was just synchronized on a different monitor but here I am synchronizing on &quot;this&quot; and then the same instance so it should be the same no?</p>\n<p>Please excuse all the simplifications (for example the infinity loop) I just wanted to create an easy executable example.</p>\n<p>Created the test example. I was expecting that the notify() would wake up the waiting thread.</p>\n"},{"tags":["java","liquibase"],"comments":[{"owner":{"account_id":105487,"reputation":26137,"user_id":281469,"accept_rate":94,"display_name":"bcoughlan"},"score":0,"creation_date":1687813026,"post_id":76529968,"comment_id":134986435,"body_markdown":"None of the answers apply to SQL Format (linked in question). Am I missing something?","body":"None of the answers apply to SQL Format (linked in question). Am I missing something?"}],"answers":[{"tags":[],"owner":{"account_id":92073,"reputation":1,"user_id":252518,"accept_rate":71,"display_name":"Freeman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1687785067,"creation_date":1687783472,"answer_id":76556817,"question_id":76529968,"body_markdown":"why you don&#39;t use `sqlFile` tag to execute custom SQL scripts?\r\nsomething like this :\r\n\r\n    &lt;changeSet author=&quot;me&quot; id=&quot;1&quot;&gt;\r\n        &lt;sqlFile path=&quot;my_script.sql&quot;/&gt;\r\n    &lt;/changeSet&gt;\r\nor even something like this :\r\n\r\n    &lt;changeSet author=&quot;me&quot; id=&quot;2&quot;&gt;\r\n        &lt;sql&gt;\r\n            INSERT INTO my_table (columnAA, columnBB) VALUES (&#39;valueAA&#39;, &#39;valueBB&#39;);\r\n        &lt;/sql&gt;\r\n    &lt;/changeSet&gt;\r\n\r\n**update:**&lt;br&gt;\r\nok sorry, I think you can use the `` tag and set the `customChangeClass` attribute to the fully qualified name of your custom Java class, and don&#39;t forget you will need to include the necessary Java classes and dependencies for your custom change in your `Liquibase` classpath!\r\n\r\n    &lt;changeSet author=&quot;yourname&quot; id=&quot;yourid&quot;&gt;\r\n        &lt;comment&gt;Custom change using SQL format&lt;/comment&gt;\r\n        &lt;change customChangeClass=&quot;com.example.MyCustomChange&quot;&gt;\r\n            &lt;param name=&quot;id&quot; value=&quot;2&quot;/&gt;\r\n        &lt;/change&gt;\r\n    &lt;/changeSet&gt;","title":"Liquibase - How to run a Java code changeset using SQL Format?","body":"<p>why you don't use <code>sqlFile</code> tag to execute custom SQL scripts?\nsomething like this :</p>\n<pre><code>&lt;changeSet author=&quot;me&quot; id=&quot;1&quot;&gt;\n    &lt;sqlFile path=&quot;my_script.sql&quot;/&gt;\n&lt;/changeSet&gt;\n</code></pre>\n<p>or even something like this :</p>\n<pre><code>&lt;changeSet author=&quot;me&quot; id=&quot;2&quot;&gt;\n    &lt;sql&gt;\n        INSERT INTO my_table (columnAA, columnBB) VALUES ('valueAA', 'valueBB');\n    &lt;/sql&gt;\n&lt;/changeSet&gt;\n</code></pre>\n<p><strong>update:</strong><br>\nok sorry, I think you can use the `` tag and set the <code>customChangeClass</code> attribute to the fully qualified name of your custom Java class, and don't forget you will need to include the necessary Java classes and dependencies for your custom change in your <code>Liquibase</code> classpath!</p>\n<pre><code>&lt;changeSet author=&quot;yourname&quot; id=&quot;yourid&quot;&gt;\n    &lt;comment&gt;Custom change using SQL format&lt;/comment&gt;\n    &lt;change customChangeClass=&quot;com.example.MyCustomChange&quot;&gt;\n        &lt;param name=&quot;id&quot; value=&quot;2&quot;/&gt;\n    &lt;/change&gt;\n&lt;/changeSet&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1573445,"reputation":4861,"user_id":1460591,"accept_rate":79,"display_name":"Youans"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687785869,"creation_date":1687785544,"answer_id":76557082,"question_id":76529968,"body_markdown":"If you are seeking the SQL changset you can check following link https://docs.liquibase.com/change-types/sql-file.html\r\n\r\nChangset for xml format using SQL Fromat would as follows:\r\n\r\n    &lt;changeSet author=&quot;liquibase-docs&quot; id=&quot;sqlFile-example&quot;&gt;\r\n         &lt;sqlFile \r\n            path=&quot;my/path/file.sql&quot;\r\n            relativeToChangelogFile=&quot;true&quot;\r\n            splitStatements=&quot;true&quot;\r\n            stripComments=&quot;true&quot;/&gt;\r\n    &lt;/changeSet&gt;\r\n\r\nthe path satrts from the resources file so, that means that `my` in the top changset is a folder under resources folder\r\n\r\n-----------\r\n\r\n\r\nYou can also construct a `JDBCTemplate` object using the `database.getConnection()` in the Java custom change this is handy when you have dynamic data, you want to update DB with\r\n\r\n\r\n```\r\npublic class MyCustomDbChange implements CustomTaskChange {\r\n    @Override\r\n    public void execute(Database database) {\r\n        JdbcConnection jdbcConnection = (JdbcConnection) database.getConnection();\r\n        Connection connection = jdbcConnection.getWrappedConnection();\r\n        SingleConnectionDataSource dataSource = new SingleConnectionDataSource(connection, false);\r\n        JdbcTemplate jdbcTemplate = new JdbcTemplate(dataSource);\r\n        //Then you can use JDBCTemplate methods to execute queries\r\n       \r\n        // Example select\r\n        List&lt;Map&lt;String, Object&gt;&gt; map = jdbcTemplate.queryForList(&quot;select * from user&quot;);\r\n\r\n        // Example single update\r\n        jdbcTemplate.update(&quot;update user set name=&#39;Test&#39; where id=&#39;1&#39;&quot;);\r\n\r\n        // Example batch update using prepared stmt query\r\n        jdbcTemplate.batchUpdate(\r\n            &quot;INSERT INTO user (id, name) VALUES (?, ?)&quot;,\r\n            new BatchPreparedStatementSetter() {\r\n                @Override\r\n                public void setValues(PreparedStatement ps, int idx) throws SQLException {\r\n                    String id = UUID.randomUUID().toString();\r\n                  \r\n                    ps.setString(1, id);\r\n                    ps.setString(2, &quot;dummy name &quot; + id);\r\n                }\r\n\r\n                @Override\r\n                public int getBatchSize() {\r\n                    return 100;\r\n                }\r\n            }\r\n        );\r\n\r\n       // .... other overridden methods\r\n    }\r\n\r\n```","title":"Liquibase - How to run a Java code changeset using SQL Format?","body":"<p>If you are seeking the SQL changset you can check following link <a href=\"https://docs.liquibase.com/change-types/sql-file.html\" rel=\"nofollow noreferrer\">https://docs.liquibase.com/change-types/sql-file.html</a></p>\n<p>Changset for xml format using SQL Fromat would as follows:</p>\n<pre><code>&lt;changeSet author=&quot;liquibase-docs&quot; id=&quot;sqlFile-example&quot;&gt;\n     &lt;sqlFile \n        path=&quot;my/path/file.sql&quot;\n        relativeToChangelogFile=&quot;true&quot;\n        splitStatements=&quot;true&quot;\n        stripComments=&quot;true&quot;/&gt;\n&lt;/changeSet&gt;\n</code></pre>\n<p>the path satrts from the resources file so, that means that <code>my</code> in the top changset is a folder under resources folder</p>\n<hr />\n<p>You can also construct a <code>JDBCTemplate</code> object using the <code>database.getConnection()</code> in the Java custom change this is handy when you have dynamic data, you want to update DB with</p>\n<pre><code>public class MyCustomDbChange implements CustomTaskChange {\n    @Override\n    public void execute(Database database) {\n        JdbcConnection jdbcConnection = (JdbcConnection) database.getConnection();\n        Connection connection = jdbcConnection.getWrappedConnection();\n        SingleConnectionDataSource dataSource = new SingleConnectionDataSource(connection, false);\n        JdbcTemplate jdbcTemplate = new JdbcTemplate(dataSource);\n        //Then you can use JDBCTemplate methods to execute queries\n       \n        // Example select\n        List&lt;Map&lt;String, Object&gt;&gt; map = jdbcTemplate.queryForList(&quot;select * from user&quot;);\n\n        // Example single update\n        jdbcTemplate.update(&quot;update user set name='Test' where id='1'&quot;);\n\n        // Example batch update using prepared stmt query\n        jdbcTemplate.batchUpdate(\n            &quot;INSERT INTO user (id, name) VALUES (?, ?)&quot;,\n            new BatchPreparedStatementSetter() {\n                @Override\n                public void setValues(PreparedStatement ps, int idx) throws SQLException {\n                    String id = UUID.randomUUID().toString();\n                  \n                    ps.setString(1, id);\n                    ps.setString(2, &quot;dummy name &quot; + id);\n                }\n\n                @Override\n                public int getBatchSize() {\n                    return 100;\n                }\n            }\n        );\n\n       // .... other overridden methods\n    }\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1687875662,"creation_date":1687875662,"answer_id":76565846,"question_id":76529968,"body_markdown":"**TL;DR** You can&#39;t.\r\n\r\nThe supported formats for defining a custom change set are:\r\n1. XML\r\n```\r\n&lt;changeSet id=&quot;21&quot; author=&quot;nvoxland&quot;&gt;\r\n  &lt;customChange class=&quot;liquibase.change.custom.ExampleCustomTaskChange&quot;&gt;\r\n    &lt;param name=&quot;helloTo&quot; value=&quot;world&quot;/&gt;\r\n  &lt;/customChange&gt;\r\n&lt;/changeSet&gt;\r\n```\r\n2. YAML\r\n```\r\n-  changeSet:\r\n     id:  21\r\n     author: nvoxland\r\n     changes:\r\n     -  customChange:  {\r\n&quot;class&quot;: &quot;liquibase.change.custom.ExampleCustomTaskChange&quot;,\r\n&quot;helloTo&quot;: &quot;world&quot; }\r\n```\r\n3. JSON\r\n```\r\n{\r\n  &quot;changeSet&quot;: {\r\n    &quot;id&quot;: &quot;21&quot;,\r\n    &quot;author&quot;: &quot;nvoxland&quot;,\r\n    &quot;changes&quot;: [\r\n      {\r\n        &quot;customChange&quot;: {\r\n          &quot;class&quot;: &quot;liquibase.change.custom.ExampleCustomTaskChange&quot;,\r\n          &quot;helloTo&quot;: &quot;world&quot;\r\n        }\r\n      }\r\n    ]\r\n  }\r\n}\r\n```\r\nBased on [https://docs.liquibase.com/change-types/custom-change.html][1]\r\n\r\n\r\n  [1]: https://docs.liquibase.com/change-types/custom-change.html","title":"Liquibase - How to run a Java code changeset using SQL Format?","body":"<p><strong>TL;DR</strong> You can't.</p>\n<p>The supported formats for defining a custom change set are:</p>\n<ol>\n<li>XML</li>\n</ol>\n<pre><code>&lt;changeSet id=&quot;21&quot; author=&quot;nvoxland&quot;&gt;\n  &lt;customChange class=&quot;liquibase.change.custom.ExampleCustomTaskChange&quot;&gt;\n    &lt;param name=&quot;helloTo&quot; value=&quot;world&quot;/&gt;\n  &lt;/customChange&gt;\n&lt;/changeSet&gt;\n</code></pre>\n<ol start=\"2\">\n<li>YAML</li>\n</ol>\n<pre><code>-  changeSet:\n     id:  21\n     author: nvoxland\n     changes:\n     -  customChange:  {\n&quot;class&quot;: &quot;liquibase.change.custom.ExampleCustomTaskChange&quot;,\n&quot;helloTo&quot;: &quot;world&quot; }\n</code></pre>\n<ol start=\"3\">\n<li>JSON</li>\n</ol>\n<pre><code>{\n  &quot;changeSet&quot;: {\n    &quot;id&quot;: &quot;21&quot;,\n    &quot;author&quot;: &quot;nvoxland&quot;,\n    &quot;changes&quot;: [\n      {\n        &quot;customChange&quot;: {\n          &quot;class&quot;: &quot;liquibase.change.custom.ExampleCustomTaskChange&quot;,\n          &quot;helloTo&quot;: &quot;world&quot;\n        }\n      }\n    ]\n  }\n}\n</code></pre>\n<p>Based on <a href=\"https://docs.liquibase.com/change-types/custom-change.html\" rel=\"nofollow noreferrer\">https://docs.liquibase.com/change-types/custom-change.html</a></p>\n"}],"owner":{"account_id":105487,"reputation":26137,"user_id":281469,"accept_rate":94,"display_name":"bcoughlan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":199,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76565846,"answer_count":3,"score":0,"last_activity_date":1687875662,"creation_date":1687422703,"question_id":76529968,"body_markdown":"With Liquibase XML you can trigger Java code to execute for a change with:\r\n\r\n```\r\n    &lt;customChange class=&quot;my.java.Class&quot;&gt;\r\n        &lt;param name=&quot;id&quot; value=&quot;2&quot; /&gt;\r\n    &lt;/customChange&gt;\r\n```\r\n\r\nHow can you trigger a custom change with Liquibase [SQL Format](https://docs.liquibase.com/concepts/changelogs/sql-format.html)?","title":"Liquibase - How to run a Java code changeset using SQL Format?","body":"<p>With Liquibase XML you can trigger Java code to execute for a change with:</p>\n<pre><code>    &lt;customChange class=&quot;my.java.Class&quot;&gt;\n        &lt;param name=&quot;id&quot; value=&quot;2&quot; /&gt;\n    &lt;/customChange&gt;\n</code></pre>\n<p>How can you trigger a custom change with Liquibase <a href=\"https://docs.liquibase.com/concepts/changelogs/sql-format.html\" rel=\"nofollow noreferrer\">SQL Format</a>?</p>\n"},{"tags":["java","swagger"],"comments":[{"owner":{"account_id":7087876,"reputation":2294,"user_id":5424117,"accept_rate":56,"display_name":"jb62"},"score":0,"creation_date":1687818584,"post_id":76559550,"comment_id":134987162,"body_markdown":"Are there any behind-the-scenes code or yaml files that OpenAPI generates that I could look at to see what is &quot;really&quot; going on here?  Just curious - the magic must live somewhere...","body":"Are there any behind-the-scenes code or yaml files that OpenAPI generates that I could look at to see what is &quot;really&quot; going on here?  Just curious - the magic must live somewhere..."},{"owner":{"account_id":39252,"reputation":89802,"user_id":113116,"display_name":"Helen"},"score":0,"creation_date":1687851163,"post_id":76559550,"comment_id":134990567,"body_markdown":"You have `@RequestBody` both before `UserDTO dto` and inside `@Operation`. My guess is they are conflicting. Try using `@RequestBody(description=...)` only before `UserDTO dto` and remove it from `@Operation` and see if it helps.","body":"You have <code>@RequestBody</code> both before <code>UserDTO dto</code> and inside <code>@Operation</code>. My guess is they are conflicting. Try using <code>@RequestBody(description=...)</code> only before <code>UserDTO dto</code> and remove it from <code>@Operation</code> and see if it helps."},{"owner":{"account_id":7087876,"reputation":2294,"user_id":5424117,"accept_rate":56,"display_name":"jb62"},"score":0,"creation_date":1687875615,"post_id":76559550,"comment_id":134996183,"body_markdown":"Thanks @Helen.  I tried that (see my Update above) and still no joy.  It works both ways (inside the ```@Operation```, or next to the Spring RequestBody annotation) in another Java project...  Of course, I have to leave the Spring RequestBody in there or the endpoint won&#39;t work correctly...\n\nMaybe it&#39;s a weird library conflict.  This project is older and has older versions of the Swagger libraries imported...","body":"Thanks @Helen.  I tried that (see my Update above) and still no joy.  It works both ways (inside the <code>@Operation</code>, or next to the Spring RequestBody annotation) in another Java project...  Of course, I have to leave the Spring RequestBody in there or the endpoint won&#39;t work correctly...  Maybe it&#39;s a weird library conflict.  This project is older and has older versions of the Swagger libraries imported..."},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1687875871,"post_id":76559550,"comment_id":134996253,"body_markdown":"&quot;[...] but this one has older versions of the Swagger libraries&quot; -- I&#39;d probably try updating to the version(s) that work.","body":"&quot;[...] but this one has older versions of the Swagger libraries&quot; -- I&#39;d probably try updating to the version(s) that work."},{"owner":{"account_id":7087876,"reputation":2294,"user_id":5424117,"accept_rate":56,"display_name":"jb62"},"score":0,"creation_date":1687876035,"post_id":76559550,"comment_id":134996295,"body_markdown":"@DaveNewton - understood.  For a number of reasons I&#39;m not willing to do the refactoring necessary to do that.  There are a LOT of endpoints and I&#39;ve got a ton of higher-priority tickets to work.  I&#39;ll just live with this for now unless Helen has any other ideas.  Thanks all!","body":"@DaveNewton - understood.  For a number of reasons I&#39;m not willing to do the refactoring necessary to do that.  There are a LOT of endpoints and I&#39;ve got a ton of higher-priority tickets to work.  I&#39;ll just live with this for now unless Helen has any other ideas.  Thanks all!"}],"owner":{"account_id":7087876,"reputation":2294,"user_id":5424117,"accept_rate":56,"display_name":"jb62"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":329,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1687875497,"creation_date":1687806206,"question_id":76559550,"body_markdown":"I have the following API endpoint code with Swagger annotations (specifically the @Operation annotation with the @RequestBody description string):\r\n\r\n \r\n\r\n    @io.swagger.v3.oas.annotations.parameters.RequestBody(\r\n              description = &quot;Test String for RequestBody Here&quot;))\r\n\r\nFull method code:\r\n\r\n    //@ApiOperation(value = CreateOrUpdate.shortDescription, notes = CreateOrUpdate.detail)\r\n      @NewSpan\r\n      @Operation(\r\n          summary = CreateOrUpdate.shortDescription,\r\n          description = CreateOrUpdate.detail,\r\n          requestBody =\r\n          @io.swagger.v3.oas.annotations.parameters.RequestBody(\r\n              description = &quot;Test String for RequestBody Here&quot;)) // Swagger\r\n      @PostMapping\r\n      public UserDTO createOrUpdate(@RequestBody UserDTO dto,\r\n                                    @ApiParam(value = CreateOrUpdate.apiParamString)\r\n                                    @RequestParam(required = false) boolean skipTrainingUser) {\r\n        Result result = userService.createOrUpdateCrmUserObject(dto, skipTrainingUser);\r\n        ...\r\n      }\r\n\r\nThat code results in the following Swagger UI:\r\n\r\n[![Swagger UI without RequestBody description line][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/fWLsr.png\r\n\r\nNote that the expected RequestBody description of &quot;Test String for RequestBody Here&quot; is not displayed on the Swagger UI under the *Request body* label.\r\n\r\nI&#39;m at a loss to explain why this is happening as it worked just fine in another project.  Any thoughts or ideas will be appreciated.\r\n\r\n**Update:** Per Helen&#39;s suggestion below I tried putting the Swagger RequestBody annotation before the UserDTO dto in the method statement like this:\r\n\r\n    //@ApiOperation(value = CreateOrUpdate.shortDescription, notes = CreateOrUpdate.detail)\r\n      @NewSpan\r\n      @Operation(\r\n          summary = CreateOrUpdate.shortDescription,\r\n          description = CreateOrUpdate.detail\r\n          )\r\n      @PostMapping\r\n      public UserDTO createOrUpdate(@io.swagger.v3.oas.annotations.parameters.RequestBody(\r\n                                    description = &quot;Test String for RequestBody Here&quot;) \r\n                                      @RequestBody UserDTO dto,\r\n                                    @Parameter(description = CreateOrUpdate.apiParamString)\r\n    //                                @ApiParam(value = CreateOrUpdate.apiParamString)\r\n                                    @RequestParam(required = false) boolean skipTrainingUser) {\r\n        Result result = userService.createOrUpdateCrmUserObject(dto, skipTrainingUser);\r\n\r\nBut it still does not display the text on the Swagger UI where it would be expected (under Request body text).\r\n\r\nI&#39;m beginning to wonder if there&#39;s some strange library conflict going on here.  It works fine either way in a different project/service, but this one has older versions of the Swagger libraries in it...","title":"Swagger RequestBody annotation &quot;description&quot; not showing on Swagger UI","body":"<p>I have the following API endpoint code with Swagger annotations (specifically the @Operation annotation with the @RequestBody description string):</p>\n<pre><code>@io.swagger.v3.oas.annotations.parameters.RequestBody(\n          description = &quot;Test String for RequestBody Here&quot;))\n</code></pre>\n<p>Full method code:</p>\n<pre><code>//@ApiOperation(value = CreateOrUpdate.shortDescription, notes = CreateOrUpdate.detail)\n  @NewSpan\n  @Operation(\n      summary = CreateOrUpdate.shortDescription,\n      description = CreateOrUpdate.detail,\n      requestBody =\n      @io.swagger.v3.oas.annotations.parameters.RequestBody(\n          description = &quot;Test String for RequestBody Here&quot;)) // Swagger\n  @PostMapping\n  public UserDTO createOrUpdate(@RequestBody UserDTO dto,\n                                @ApiParam(value = CreateOrUpdate.apiParamString)\n                                @RequestParam(required = false) boolean skipTrainingUser) {\n    Result result = userService.createOrUpdateCrmUserObject(dto, skipTrainingUser);\n    ...\n  }\n</code></pre>\n<p>That code results in the following Swagger UI:</p>\n<p><a href=\"https://i.stack.imgur.com/fWLsr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fWLsr.png\" alt=\"Swagger UI without RequestBody description line\" /></a></p>\n<p>Note that the expected RequestBody description of &quot;Test String for RequestBody Here&quot; is not displayed on the Swagger UI under the <em>Request body</em> label.</p>\n<p>I'm at a loss to explain why this is happening as it worked just fine in another project.  Any thoughts or ideas will be appreciated.</p>\n<p><strong>Update:</strong> Per Helen's suggestion below I tried putting the Swagger RequestBody annotation before the UserDTO dto in the method statement like this:</p>\n<pre><code>//@ApiOperation(value = CreateOrUpdate.shortDescription, notes = CreateOrUpdate.detail)\n  @NewSpan\n  @Operation(\n      summary = CreateOrUpdate.shortDescription,\n      description = CreateOrUpdate.detail\n      )\n  @PostMapping\n  public UserDTO createOrUpdate(@io.swagger.v3.oas.annotations.parameters.RequestBody(\n                                description = &quot;Test String for RequestBody Here&quot;) \n                                  @RequestBody UserDTO dto,\n                                @Parameter(description = CreateOrUpdate.apiParamString)\n//                                @ApiParam(value = CreateOrUpdate.apiParamString)\n                                @RequestParam(required = false) boolean skipTrainingUser) {\n    Result result = userService.createOrUpdateCrmUserObject(dto, skipTrainingUser);\n</code></pre>\n<p>But it still does not display the text on the Swagger UI where it would be expected (under Request body text).</p>\n<p>I'm beginning to wonder if there's some strange library conflict going on here.  It works fine either way in a different project/service, but this one has older versions of the Swagger libraries in it...</p>\n"},{"tags":["java","spring-boot","google-oauth","microservices","access-token"],"owner":{"account_id":18048122,"reputation":57,"user_id":13118527,"display_name":"David Ogbodu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687874849,"creation_date":1687867456,"question_id":76564679,"body_markdown":"so I am in a bit of situation, I have a microservice system that contains an api gateway, and a user microservice, i initially had an open custom login endpoint in my user microservice that returns a jwt and an user object (id, email and roles), the request passes my api gateway and since its an open endpoint, it lets it go through and gets the jwt and sets the jwt in the headers against closed endpoints. Now i am implementing a google sign in mechanism, from postman, i am able to get an access token, but then i need to pass the token to the api gateway, the token would be sent to an open separate endpoint in the user microservice to validate the access token and get the user info eg name and email. Unfortunately when using the code from the documentation, it returns a Precondition error like this: ```com.google.common.base.Preconditions.checkArgument(Preconditions.java:131)```\r\nThis is the method for validating the access token:\r\n```\r\npublic UserDto validateOAuth2Token(String token) {\r\n        System.out.println(&quot;Comes to user controller with token&quot;+ token);\r\n        NetHttpTransport httpTransport = null;\r\n        try {\r\n            httpTransport = GoogleNetHttpTransport.newTrustedTransport();\r\n            GsonFactory jsonFactory = GsonFactory.getDefaultInstance();\r\n            GoogleIdTokenVerifier verifier = new GoogleIdTokenVerifier.Builder(httpTransport, jsonFactory)\r\n                    .setAudience(Collections.singletonList(&quot;MY_CLIENT_ID&quot;))\r\n                    .build();\r\n            GoogleIdToken idToken = verifier.verify(token);\r\n            if (idToken != null) {\r\n                GoogleIdToken.Payload payload = idToken.getPayload();\r\n                String email = payload.getEmail();\r\n                return userDtoMapper.apply(customOAuth2UserService.upsertUser(email));\r\n            } else {\r\n                System.out.println(&quot;Invalid ID token.&quot;);\r\n                throw new GeneralSecurityException(&quot;Invalid ID token.&quot;);\r\n            }\r\n        } catch (GeneralSecurityException e) {\r\n            throw new RuntimeException(e);\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n```\r\nI have also added my AuthFilter class of my api gateway:\r\n```\r\n@Component\r\n@Slf4j\r\npublic class AuthFilter extends AbstractGatewayFilterFactory&lt;AuthFilter.Config&gt; {\r\n    private final WebClient.Builder webClientBuilder;\r\n    public AuthFilter(WebClient.Builder webClientBuilder) {\r\n        super(Config.class);\r\n        this.webClientBuilder = webClientBuilder;\r\n    }\r\n    @Override\r\n    public GatewayFilter apply(Config config) {\r\n        return (exchange, chain) -&gt; {\r\n            try {\r\n                if (!exchange.getRequest().getHeaders().containsKey(HttpHeaders.AUTHORIZATION)) {\r\n                    throw new GatewayException(&quot;Missing authorization information&quot;);\r\n                }\r\n                String authHeader = exchange.getRequest().getHeaders().getFirst(HttpHeaders.AUTHORIZATION);\r\n                String[] parts = authHeader.split(&quot; &quot;);\r\n                if (parts.length != 2 || !&quot;Bearer&quot;.equals(parts[0])) {\r\n                    throw new GatewayException(&quot;Incorrect authorization structure&quot;);\r\n                }\r\n                String token = parts[1];\r\n                String customValidationUri = &quot;http://gateway-service/api/uu/v1/users/token/validate?token=&quot; + token;\r\n                String socialValidationUri = &quot;http://user-service/api/uu/v1/users/oauth2/validate?token=&quot; + token;\r\n                Mono&lt;UserDto&gt; validationRequest;\r\n                log.info(token);\r\n                if (isSocialLogin(token)) {\r\n                    validationRequest = webClientBuilder.build()\r\n                            .post()\r\n                            .uri(socialValidationUri)\r\n                            .retrieve()\r\n                            .bodyToMono(UserDto.class);\r\n                } else {\r\n                    validationRequest = webClientBuilder.build()\r\n                            .post()\r\n                            .uri(customValidationUri)\r\n                            .retrieve()\r\n                            .bodyToMono(UserDto.class);\r\n                }\r\n                return validationRequest.flatMap(user -&gt; {\r\n                    exchange.getRequest()\r\n                            .mutate()\r\n                            .header(&quot;x-id&quot;, String.valueOf(user.getId()))\r\n                            .header(&quot;x-email&quot;, String.valueOf(user.getEmail()))\r\n                            .header(&quot;x-roles&quot;, user.getRoles().toString())\r\n                            .build();\r\n                    return chain.filter(exchange);\r\n                });\r\n            } catch (RuntimeException ex) {\r\n                return handleException(ex, exchange);\r\n            }\r\n        };\r\n    }\r\n\r\n    private boolean isSocialLogin(String token){\r\n        if (token.startsWith(&quot;ya29&quot;)) {\r\n            System.out.println(&quot;This is a google login&quot;);\r\n            return true;\r\n        } else {\r\n            System.out.println(&quot;This is not a google login&quot;);\r\n            return false;\r\n        }\r\n    }\r\n    private Mono&lt;Void&gt; handleException(Exception ex, ServerWebExchange exchange) {\r\n        log.error(&quot;Error validating authentication header&quot;, ex);\r\n        List&lt;String&gt; details = new ArrayList&lt;&gt;();\r\n        details.add(ex.getLocalizedMessage());\r\n        ErrorResponse error = new ErrorResponse(new Date(), HttpStatus.UNAUTHORIZED.value(),\r\n                HttpStatus.UNAUTHORIZED.name(), details, exchange.getRequest().getURI().toString());\r\n        ServerHttpResponse response = exchange.getResponse();\r\n        byte[] bytes = SerializationUtils.serialize(error);\r\n        DataBuffer buffer = exchange.getResponse().bufferFactory().wrap(bytes);\r\n        response.writeWith(Mono.just(buffer));\r\n        response.setStatusCode(HttpStatus.UNAUTHORIZED);\r\n        return response.setComplete();\r\n    }\r\n    public static class Config {\r\n    }\r\n}\r\n```\r\nI need the email of the signed in user to save in my database if the user does not exist already, Please help me out to solve this issue if you can, and i am open to advice, suggestions, opinions towards a better approach, industry standards, best practices etc.","title":"Verify Google Access Token in Spring Boot Microservices System","body":"<p>so I am in a bit of situation, I have a microservice system that contains an api gateway, and a user microservice, i initially had an open custom login endpoint in my user microservice that returns a jwt and an user object (id, email and roles), the request passes my api gateway and since its an open endpoint, it lets it go through and gets the jwt and sets the jwt in the headers against closed endpoints. Now i am implementing a google sign in mechanism, from postman, i am able to get an access token, but then i need to pass the token to the api gateway, the token would be sent to an open separate endpoint in the user microservice to validate the access token and get the user info eg name and email. Unfortunately when using the code from the documentation, it returns a Precondition error like this: <code>com.google.common.base.Preconditions.checkArgument(Preconditions.java:131)</code>\nThis is the method for validating the access token:</p>\n<pre><code>public UserDto validateOAuth2Token(String token) {\n        System.out.println(&quot;Comes to user controller with token&quot;+ token);\n        NetHttpTransport httpTransport = null;\n        try {\n            httpTransport = GoogleNetHttpTransport.newTrustedTransport();\n            GsonFactory jsonFactory = GsonFactory.getDefaultInstance();\n            GoogleIdTokenVerifier verifier = new GoogleIdTokenVerifier.Builder(httpTransport, jsonFactory)\n                    .setAudience(Collections.singletonList(&quot;MY_CLIENT_ID&quot;))\n                    .build();\n            GoogleIdToken idToken = verifier.verify(token);\n            if (idToken != null) {\n                GoogleIdToken.Payload payload = idToken.getPayload();\n                String email = payload.getEmail();\n                return userDtoMapper.apply(customOAuth2UserService.upsertUser(email));\n            } else {\n                System.out.println(&quot;Invalid ID token.&quot;);\n                throw new GeneralSecurityException(&quot;Invalid ID token.&quot;);\n            }\n        } catch (GeneralSecurityException e) {\n            throw new RuntimeException(e);\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n    }\n</code></pre>\n<p>I have also added my AuthFilter class of my api gateway:</p>\n<pre><code>@Component\n@Slf4j\npublic class AuthFilter extends AbstractGatewayFilterFactory&lt;AuthFilter.Config&gt; {\n    private final WebClient.Builder webClientBuilder;\n    public AuthFilter(WebClient.Builder webClientBuilder) {\n        super(Config.class);\n        this.webClientBuilder = webClientBuilder;\n    }\n    @Override\n    public GatewayFilter apply(Config config) {\n        return (exchange, chain) -&gt; {\n            try {\n                if (!exchange.getRequest().getHeaders().containsKey(HttpHeaders.AUTHORIZATION)) {\n                    throw new GatewayException(&quot;Missing authorization information&quot;);\n                }\n                String authHeader = exchange.getRequest().getHeaders().getFirst(HttpHeaders.AUTHORIZATION);\n                String[] parts = authHeader.split(&quot; &quot;);\n                if (parts.length != 2 || !&quot;Bearer&quot;.equals(parts[0])) {\n                    throw new GatewayException(&quot;Incorrect authorization structure&quot;);\n                }\n                String token = parts[1];\n                String customValidationUri = &quot;http://gateway-service/api/uu/v1/users/token/validate?token=&quot; + token;\n                String socialValidationUri = &quot;http://user-service/api/uu/v1/users/oauth2/validate?token=&quot; + token;\n                Mono&lt;UserDto&gt; validationRequest;\n                log.info(token);\n                if (isSocialLogin(token)) {\n                    validationRequest = webClientBuilder.build()\n                            .post()\n                            .uri(socialValidationUri)\n                            .retrieve()\n                            .bodyToMono(UserDto.class);\n                } else {\n                    validationRequest = webClientBuilder.build()\n                            .post()\n                            .uri(customValidationUri)\n                            .retrieve()\n                            .bodyToMono(UserDto.class);\n                }\n                return validationRequest.flatMap(user -&gt; {\n                    exchange.getRequest()\n                            .mutate()\n                            .header(&quot;x-id&quot;, String.valueOf(user.getId()))\n                            .header(&quot;x-email&quot;, String.valueOf(user.getEmail()))\n                            .header(&quot;x-roles&quot;, user.getRoles().toString())\n                            .build();\n                    return chain.filter(exchange);\n                });\n            } catch (RuntimeException ex) {\n                return handleException(ex, exchange);\n            }\n        };\n    }\n\n    private boolean isSocialLogin(String token){\n        if (token.startsWith(&quot;ya29&quot;)) {\n            System.out.println(&quot;This is a google login&quot;);\n            return true;\n        } else {\n            System.out.println(&quot;This is not a google login&quot;);\n            return false;\n        }\n    }\n    private Mono&lt;Void&gt; handleException(Exception ex, ServerWebExchange exchange) {\n        log.error(&quot;Error validating authentication header&quot;, ex);\n        List&lt;String&gt; details = new ArrayList&lt;&gt;();\n        details.add(ex.getLocalizedMessage());\n        ErrorResponse error = new ErrorResponse(new Date(), HttpStatus.UNAUTHORIZED.value(),\n                HttpStatus.UNAUTHORIZED.name(), details, exchange.getRequest().getURI().toString());\n        ServerHttpResponse response = exchange.getResponse();\n        byte[] bytes = SerializationUtils.serialize(error);\n        DataBuffer buffer = exchange.getResponse().bufferFactory().wrap(bytes);\n        response.writeWith(Mono.just(buffer));\n        response.setStatusCode(HttpStatus.UNAUTHORIZED);\n        return response.setComplete();\n    }\n    public static class Config {\n    }\n}\n</code></pre>\n<p>I need the email of the signed in user to save in my database if the user does not exist already, Please help me out to solve this issue if you can, and i am open to advice, suggestions, opinions towards a better approach, industry standards, best practices etc.</p>\n"},{"tags":["java","double","drools","mvel","epsilon"],"comments":[{"owner":{"account_id":183966,"reputation":14606,"user_id":419705,"accept_rate":67,"display_name":"Roddy of the Frozen Peas"},"score":0,"creation_date":1687875629,"post_id":76565678,"comment_id":134996189,"body_markdown":"You&#39;d do it the same way you&#39;d do it in Java. If you&#39;re avoiding BigDecimal, that would be a custom function, wouldn&#39;t it?","body":"You&#39;d do it the same way you&#39;d do it in Java. If you&#39;re avoiding BigDecimal, that would be a custom function, wouldn&#39;t it?"},{"owner":{"account_id":13760128,"reputation":1,"user_id":9930077,"display_name":"Ramya Loganathan"},"score":0,"creation_date":1688620602,"post_id":76565678,"comment_id":135098537,"body_markdown":"Yes but mvel is designed to handle type conversion and to be elegant right, if I add a function call everywhere, it kinda removes the advantage of using mvel. Thats why I am checking if there is a way to enforce mvel to do it @RoddyoftheFrozenPeas","body":"Yes but mvel is designed to handle type conversion and to be elegant right, if I add a function call everywhere, it kinda removes the advantage of using mvel. Thats why I am checking if there is a way to enforce mvel to do it @RoddyoftheFrozenPeas"},{"owner":{"account_id":183966,"reputation":14606,"user_id":419705,"accept_rate":67,"display_name":"Roddy of the Frozen Peas"},"score":0,"creation_date":1688652608,"post_id":76565678,"comment_id":135105220,"body_markdown":"&#175;\\\\_(ツ)_/&#175; Maybe if you framed this as an mvel question instead of a drools question then...","body":"&#175;\\_(ツ)_/&#175; Maybe if you framed this as an mvel question instead of a drools question then..."}],"owner":{"account_id":13760128,"reputation":1,"user_id":9930077,"display_name":"Ramya Loganathan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687874651,"creation_date":1687874549,"question_id":76565678,"body_markdown":"I am using mvel dialect for defining rules for drools rule engine. It may comprise of arithmetic expressions like in the when part as shown below\r\n```\r\nrule &quot;Test rule&quot;\r\n    dialect &quot;mvel&quot;\r\nwhen\r\n    context : ActionContext( context.get(&quot;test&quot;) == 0.8 )\r\nthen\r\ncontext.add(&quot;Success&quot; , &quot;test&quot;);\r\n\r\nend\r\n```\r\n\r\nI want the execution of rules to consider an epsilon value whenever there is a double comparison. As far as i went through the mvel library and internet search space i couldnt find a straightforward solution. But this seems like a common problem. Does mvel support this feature in any way? \r\n\r\nNote : i don&#39;t want to use BigDecimal considering the performance implications.\r\n\r\nSomething i can do is write a custom function for every double comparison. But this seems like the last thing to do. Is there a better way?","title":"Is there an in-built support to add epsilon as an input parameter for double comparsions with mvel dialect?","body":"<p>I am using mvel dialect for defining rules for drools rule engine. It may comprise of arithmetic expressions like in the when part as shown below</p>\n<pre><code>rule &quot;Test rule&quot;\n    dialect &quot;mvel&quot;\nwhen\n    context : ActionContext( context.get(&quot;test&quot;) == 0.8 )\nthen\ncontext.add(&quot;Success&quot; , &quot;test&quot;);\n\nend\n</code></pre>\n<p>I want the execution of rules to consider an epsilon value whenever there is a double comparison. As far as i went through the mvel library and internet search space i couldnt find a straightforward solution. But this seems like a common problem. Does mvel support this feature in any way?</p>\n<p>Note : i don't want to use BigDecimal considering the performance implications.</p>\n<p>Something i can do is write a custom function for every double comparison. But this seems like the last thing to do. Is there a better way?</p>\n"},{"tags":["java","groovy"],"comments":[{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":2,"creation_date":1687867014,"post_id":76564105,"comment_id":134993869,"body_markdown":"&quot;I use the idea of groovy code execution，why?&quot; this subject doesn&#39;t make sense. Please update it.","body":"&quot;I use the idea of groovy code execution，why?&quot; this subject doesn&#39;t make sense. Please update it."}],"answers":[{"tags":[],"owner":{"account_id":2067336,"reputation":2848,"user_id":1842599,"display_name":"Andrej Istomin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1687863963,"creation_date":1687863963,"answer_id":76564232,"question_id":76564105,"body_markdown":"What version of Groovy do you use? At some point Groovy didn&#39;t support initialization of more than one variable in the first part of a `for` loop. See more: https://stackoverflow.com/a/27386418/1842599\r\n\r\nI&#39;ve checked with Groovy 4 (I have `4.0.8` installed), multiple initialization works like a charm.\r\n\r\nSo, you may consider upgrading your Groovy version or rewrite your code, if upgrade is not possible.","title":"Groovy. Multiple initialization in &quot;for&quot; loop doesn&#39;t compile","body":"<p>What version of Groovy do you use? At some point Groovy didn't support initialization of more than one variable in the first part of a <code>for</code> loop. See more: <a href=\"https://stackoverflow.com/a/27386418/1842599\">https://stackoverflow.com/a/27386418/1842599</a></p>\n<p>I've checked with Groovy 4 (I have <code>4.0.8</code> installed), multiple initialization works like a charm.</p>\n<p>So, you may consider upgrading your Groovy version or rewrite your code, if upgrade is not possible.</p>\n"}],"owner":{"account_id":19474716,"reputation":11,"user_id":14246311,"display_name":"Daniel"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":76564232,"answer_count":1,"score":-1,"last_activity_date":1687874616,"creation_date":1687863038,"question_id":76564105,"body_markdown":"When I executed the following code using the built-in Groovy tool in IntelliJ IDEA, an error occurred.\r\n\r\n```\r\nStringBuilder sb = new StringBuilder()\r\n\r\nString a = &quot;abc&quot;\r\n\r\nString b = &quot;123&quot;\r\n\r\n\r\nfor (int i = 0, j = 0; i &lt; a.length() || j &lt; b.length(); i++, j++) {\r\n\r\n\r\n    if (i &lt; a.size()) {\r\n        print(a[i])\r\n\r\n        sb.append(a[i])\r\n    }\r\n\r\n}\r\n\r\nprint(sb)\r\n```\r\n\r\nError is as follows\r\n```\r\norg.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed:\r\nideaGroovyConsole.groovy: 8: unexpected token: = @ line 8, column 12.\r\n   for (int i = 0, j = 0; i &lt; a.length() || j &lt; b.length(); i++, j++) {\r\n              ^\r\n\r\n1 error\r\n\r\n\tat org.codehaus.groovy.control.ErrorCollector.failIfErrors(ErrorCollector.java:310)\r\n\tat org.codehaus.groovy.control.ErrorCollector.addFatalError(ErrorCollector.java:150)\r\n\tat org.codehaus.groovy.control.ErrorCollector.addError(ErrorCollector.java:120)\r\n```\r\n\r\n\r\n```\r\nfor (int i = 0, j = 0; i &lt; a.length() || j &lt; b.length(); i++, j++) {\r\n\r\n```\r\nMy guess is that the grammar problems, but didn&#39;t send any questions。","title":"Groovy. Multiple initialization in &quot;for&quot; loop doesn&#39;t compile","body":"<p>When I executed the following code using the built-in Groovy tool in IntelliJ IDEA, an error occurred.</p>\n<pre><code>StringBuilder sb = new StringBuilder()\n\nString a = &quot;abc&quot;\n\nString b = &quot;123&quot;\n\n\nfor (int i = 0, j = 0; i &lt; a.length() || j &lt; b.length(); i++, j++) {\n\n\n    if (i &lt; a.size()) {\n        print(a[i])\n\n        sb.append(a[i])\n    }\n\n}\n\nprint(sb)\n</code></pre>\n<p>Error is as follows</p>\n<pre><code>org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed:\nideaGroovyConsole.groovy: 8: unexpected token: = @ line 8, column 12.\n   for (int i = 0, j = 0; i &lt; a.length() || j &lt; b.length(); i++, j++) {\n              ^\n\n1 error\n\n    at org.codehaus.groovy.control.ErrorCollector.failIfErrors(ErrorCollector.java:310)\n    at org.codehaus.groovy.control.ErrorCollector.addFatalError(ErrorCollector.java:150)\n    at org.codehaus.groovy.control.ErrorCollector.addError(ErrorCollector.java:120)\n</code></pre>\n<pre><code>for (int i = 0, j = 0; i &lt; a.length() || j &lt; b.length(); i++, j++) {\n\n</code></pre>\n<p>My guess is that the grammar problems, but didn't send any questions。</p>\n"},{"tags":["java","apache-kafka","spring-kafka"],"comments":[{"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"score":1,"creation_date":1687861313,"post_id":76563556,"comment_id":134992674,"body_markdown":"You could use `KafkaTemplate.send` which takes a topic name as its first parameter","body":"You could use <code>KafkaTemplate.send</code> which takes a topic name as its first parameter"}],"answers":[{"tags":[],"owner":{"account_id":22394789,"reputation":1382,"user_id":16606223,"display_name":"Yahor Barkouski"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1687861806,"creation_date":1687861806,"answer_id":76563943,"question_id":76563556,"body_markdown":"There is no need to create a new producer for every topic you want to publish to, you can simply use the `KafkaTemplate` and call `send(String topic, T data)` to specify the topic instead:\r\n```java\r\npublic void send(final String topic, final TaskEvent requestStub) throws ExecutionException, InterruptedException, TimeoutException {\r\n    logger.info(&quot;{}::send()&quot;, getClass().getCanonicalName());\r\n\r\n    final ProducerRecord&lt;String, TaskEvent&gt; record = new ProducerRecord&lt;&gt;(topic, requestStub);\r\n    ListenableFuture future = template.send((ProducerRecord&lt;String, Req&gt;) record);\r\n\r\n    future.addCallback(new ListenableFutureCallback&lt;SendResult&lt;String, Req&gt;&gt;() {\r\n\r\n        @Override\r\n        public void onSuccess(SendResult&lt;String, Req&gt; result) {\r\n            logger.info(&quot;Sent message=[&quot; + requestStub +\r\n                &quot;] with offset=[&quot; + result.getRecordMetadata().offset() + &quot;]&quot;);\r\n        }\r\n\r\n        @Override\r\n        public void onFailure(Throwable ex) {\r\n            logger.error(&quot;Unable to send message=[&quot;\r\n                + requestStub + &quot;] due to : &quot; + ex.getMessage());\r\n        }\r\n    });\r\n}\r\n```\r\n\r\n```java\r\npublic void enqueue(final TaskEvent event) {\r\n    try {\r\n        String topicName = &quot;section&quot; + event.getID();\r\n        taskProducer.send(topicName, event);\r\n    } catch (Exception e) {\r\n        log.error(String.format(&quot;enqueue method failed in TimeOnTaskService. %s&quot;,\r\n            e.getMessage()));\r\n        throw new RuntimeException(e.getMessage(), e);\r\n    }\r\n}\r\n\r\n```\r\nKafka will automatically create a new topic, (if `auto.create.topics.enable=true` is enabled, which is the default), but it&#39;s really recommended to create topics AOT, so you can control their configurations implicitly","title":"Kafka Springboot - send topicName to producer on the fly","body":"<p>There is no need to create a new producer for every topic you want to publish to, you can simply use the <code>KafkaTemplate</code> and call <code>send(String topic, T data)</code> to specify the topic instead:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void send(final String topic, final TaskEvent requestStub) throws ExecutionException, InterruptedException, TimeoutException {\n    logger.info(&quot;{}::send()&quot;, getClass().getCanonicalName());\n\n    final ProducerRecord&lt;String, TaskEvent&gt; record = new ProducerRecord&lt;&gt;(topic, requestStub);\n    ListenableFuture future = template.send((ProducerRecord&lt;String, Req&gt;) record);\n\n    future.addCallback(new ListenableFutureCallback&lt;SendResult&lt;String, Req&gt;&gt;() {\n\n        @Override\n        public void onSuccess(SendResult&lt;String, Req&gt; result) {\n            logger.info(&quot;Sent message=[&quot; + requestStub +\n                &quot;] with offset=[&quot; + result.getRecordMetadata().offset() + &quot;]&quot;);\n        }\n\n        @Override\n        public void onFailure(Throwable ex) {\n            logger.error(&quot;Unable to send message=[&quot;\n                + requestStub + &quot;] due to : &quot; + ex.getMessage());\n        }\n    });\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public void enqueue(final TaskEvent event) {\n    try {\n        String topicName = &quot;section&quot; + event.getID();\n        taskProducer.send(topicName, event);\n    } catch (Exception e) {\n        log.error(String.format(&quot;enqueue method failed in TimeOnTaskService. %s&quot;,\n            e.getMessage()));\n        throw new RuntimeException(e.getMessage(), e);\n    }\n}\n\n</code></pre>\n<p>Kafka will automatically create a new topic, (if <code>auto.create.topics.enable=true</code> is enabled, which is the default), but it's really recommended to create topics AOT, so you can control their configurations implicitly</p>\n"},{"tags":[],"owner":{"account_id":1288095,"reputation":169316,"user_id":1240763,"display_name":"Gary Russell"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687873991,"creation_date":1687873991,"answer_id":76565585,"question_id":76563556,"body_markdown":"`NewTopic` beans are only declared during context initialization. To create topics dynamically, you would need to configure and use an `AdminClient`.\r\n\r\nhttps://docs.spring.io/spring-kafka/docs/current/reference/html/#configuring-topics","title":"Kafka Springboot - send topicName to producer on the fly","body":"<p><code>NewTopic</code> beans are only declared during context initialization. To create topics dynamically, you would need to configure and use an <code>AdminClient</code>.</p>\n<p><a href=\"https://docs.spring.io/spring-kafka/docs/current/reference/html/#configuring-topics\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-kafka/docs/current/reference/html/#configuring-topics</a></p>\n"}],"owner":{"account_id":16528073,"reputation":125,"user_id":11942178,"display_name":"sFishman"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":125,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76563943,"answer_count":2,"score":1,"last_activity_date":1687873991,"creation_date":1687858841,"question_id":76563556,"body_markdown":"I&#39;m writing an application in which I want to send a message into a given topic if it exists and if not, create a new topic and then send my message.\r\n\r\nThe problem I&#39;m having is I want the new topic name to be based on the data I&#39;m sending into that topic. So I want to be able to pass the topicName to the producer from my service class (below) on the fly.\r\n\r\nMy config class looks like this:\r\n```\r\n@EnableKafka\r\n@Configuration\r\nclass TimeOnTaskConfig {\r\n\r\n    @Bean\r\n    public NewTopic TimeOnTaskQueue() {\r\n        return TopicBuilder.name(&quot;testing123&quot;)\r\n            .partitions(1)\r\n            .replicas(1)\r\n            .build();\r\n    }\r\n\r\n    @Bean\r\n    public Producer&lt;TaskEvent&gt; timeOnTaskProducer(final KafkaTemplate&lt;String, TaskEvent&gt; template) {\r\n        return new Producer&lt;&gt;(\r\n            Producer.Config.builder()\r\n                .topicName(&quot;testing123&quot;)\r\n                .build(),\r\n            template);\r\n    }\r\n\r\n   \r\n    @Bean\r\n    public KafkaTemplate&lt;String, TaskEvent&gt; kafkaTemplate(\r\n        final ProducerFactory&lt;String, TaskEvent&gt; pf) {\r\n        return new KafkaTemplate&lt;&gt;(pf);\r\n    }\r\n```\r\n\r\nbut instead of passing in &quot;testing123&quot;, I&#39;d like to be able to pass a topicName parameter. When I add in a string parameter though to the timeOnTaskProducer definition, it gives me a `Could not autowire. No beans of &#39;String&#39; type found.` error message.\r\n\r\nHow should I go about sending the topicName as a parameter from my service?\r\nMy service for reference:\r\n```\r\n@Service\r\n@Slf4j\r\npublic class TimeOnTaskService {\r\n\r\n    private final Producer&lt;TaskEvent&gt; taskProducer;\r\n\r\n    public TimeOnTaskService(final Producer&lt;TaskEvent&gt; taskProducer) {\r\n        this.taskProducer = taskProducer;\r\n    }\r\n\r\n    public void enqueue(final TaskEvent event) {\r\n        try {\r\n//I&#39;d like to be able to do something here like: taskProducer.setTopicName(&quot;section&quot; + event.getID());\r\n            taskProducer.send(event);\r\n        } catch (Exception e) {\r\n            log.error(String.format(&quot;enqueue method failed in TimeOnTaskService. %s&quot;,\r\n                e.getMessage()));\r\n            throw new RuntimeException(e.getMessage(), e);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nand my producer:\r\n```\r\npublic class Producer&lt;Req&gt; {\r\n    private final Logger logger = LoggerFactory.getLogger(getClass());\r\n    private final KafkaTemplate&lt;String, Req&gt; template;\r\n    private final Config config;\r\n\r\n    public Producer(Config config, KafkaTemplate&lt;String, Req&gt; template) {\r\n        this.config = config;\r\n        this.template = template;\r\n    }\r\n\r\n    public void send(final TaskEvent requestStub) throws ExecutionException, InterruptedException, TimeoutException {\r\n        logger.info(&quot;{}::send()&quot;, getClass().getCanonicalName());\r\n\r\n        final ProducerRecord&lt;String, TaskEvent&gt; record = new ProducerRecord&lt;&gt;(config.topicName, requestStub);\r\n        ListenableFuture future = template.send((ProducerRecord&lt;String, Req&gt;) record);\r\n\r\n        future.addCallback(new ListenableFutureCallback&lt;SendResult&lt;String, Req&gt;&gt;() {\r\n\r\n            @Override\r\n            public void onSuccess(SendResult&lt;String, Req&gt; result) {\r\n                logger.info(&quot;Sent message=[&quot; + requestStub +\r\n                    &quot;] with offset=[&quot; + result.getRecordMetadata().offset() + &quot;]&quot;);\r\n            }\r\n\r\n            @Override\r\n            public void onFailure(Throwable ex) {\r\n                logger.error(&quot;Unable to send message=[&quot;\r\n                    + requestStub + &quot;] due to : &quot; + ex.getMessage());\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    @Getter\r\n    @Builder\r\n    @ToString\r\n    public static class Config {\r\n        private final String topicName;\r\n        private final int sendTimeout;\r\n    }\r\n}\r\n```","title":"Kafka Springboot - send topicName to producer on the fly","body":"<p>I'm writing an application in which I want to send a message into a given topic if it exists and if not, create a new topic and then send my message.</p>\n<p>The problem I'm having is I want the new topic name to be based on the data I'm sending into that topic. So I want to be able to pass the topicName to the producer from my service class (below) on the fly.</p>\n<p>My config class looks like this:</p>\n<pre><code>@EnableKafka\n@Configuration\nclass TimeOnTaskConfig {\n\n    @Bean\n    public NewTopic TimeOnTaskQueue() {\n        return TopicBuilder.name(&quot;testing123&quot;)\n            .partitions(1)\n            .replicas(1)\n            .build();\n    }\n\n    @Bean\n    public Producer&lt;TaskEvent&gt; timeOnTaskProducer(final KafkaTemplate&lt;String, TaskEvent&gt; template) {\n        return new Producer&lt;&gt;(\n            Producer.Config.builder()\n                .topicName(&quot;testing123&quot;)\n                .build(),\n            template);\n    }\n\n   \n    @Bean\n    public KafkaTemplate&lt;String, TaskEvent&gt; kafkaTemplate(\n        final ProducerFactory&lt;String, TaskEvent&gt; pf) {\n        return new KafkaTemplate&lt;&gt;(pf);\n    }\n</code></pre>\n<p>but instead of passing in &quot;testing123&quot;, I'd like to be able to pass a topicName parameter. When I add in a string parameter though to the timeOnTaskProducer definition, it gives me a <code>Could not autowire. No beans of 'String' type found.</code> error message.</p>\n<p>How should I go about sending the topicName as a parameter from my service?\nMy service for reference:</p>\n<pre><code>@Service\n@Slf4j\npublic class TimeOnTaskService {\n\n    private final Producer&lt;TaskEvent&gt; taskProducer;\n\n    public TimeOnTaskService(final Producer&lt;TaskEvent&gt; taskProducer) {\n        this.taskProducer = taskProducer;\n    }\n\n    public void enqueue(final TaskEvent event) {\n        try {\n//I'd like to be able to do something here like: taskProducer.setTopicName(&quot;section&quot; + event.getID());\n            taskProducer.send(event);\n        } catch (Exception e) {\n            log.error(String.format(&quot;enqueue method failed in TimeOnTaskService. %s&quot;,\n                e.getMessage()));\n            throw new RuntimeException(e.getMessage(), e);\n        }\n    }\n}\n</code></pre>\n<p>and my producer:</p>\n<pre><code>public class Producer&lt;Req&gt; {\n    private final Logger logger = LoggerFactory.getLogger(getClass());\n    private final KafkaTemplate&lt;String, Req&gt; template;\n    private final Config config;\n\n    public Producer(Config config, KafkaTemplate&lt;String, Req&gt; template) {\n        this.config = config;\n        this.template = template;\n    }\n\n    public void send(final TaskEvent requestStub) throws ExecutionException, InterruptedException, TimeoutException {\n        logger.info(&quot;{}::send()&quot;, getClass().getCanonicalName());\n\n        final ProducerRecord&lt;String, TaskEvent&gt; record = new ProducerRecord&lt;&gt;(config.topicName, requestStub);\n        ListenableFuture future = template.send((ProducerRecord&lt;String, Req&gt;) record);\n\n        future.addCallback(new ListenableFutureCallback&lt;SendResult&lt;String, Req&gt;&gt;() {\n\n            @Override\n            public void onSuccess(SendResult&lt;String, Req&gt; result) {\n                logger.info(&quot;Sent message=[&quot; + requestStub +\n                    &quot;] with offset=[&quot; + result.getRecordMetadata().offset() + &quot;]&quot;);\n            }\n\n            @Override\n            public void onFailure(Throwable ex) {\n                logger.error(&quot;Unable to send message=[&quot;\n                    + requestStub + &quot;] due to : &quot; + ex.getMessage());\n            }\n        });\n    }\n\n\n    @Getter\n    @Builder\n    @ToString\n    public static class Config {\n        private final String topicName;\n        private final int sendTimeout;\n    }\n}\n</code></pre>\n"},{"tags":["java","json","jackson","jackson-databind"],"comments":[{"owner":{"account_id":22394789,"reputation":1382,"user_id":16606223,"display_name":"Yahor Barkouski"},"score":1,"creation_date":1687873901,"post_id":76565547,"comment_id":134995701,"body_markdown":"You might consider moving away from `enableDefaultTyping()` and instead specify the type handling on the class or property level using @JsonTypeInfo and @JsonSubTypes","body":"You might consider moving away from <code>enableDefaultTyping()</code> and instead specify the type handling on the class or property level using @JsonTypeInfo and @JsonSubTypes"},{"owner":{"account_id":10617601,"reputation":73,"user_id":7819585,"display_name":"Duega"},"score":0,"creation_date":1691060764,"post_id":76565547,"comment_id":135441957,"body_markdown":"Is this Issue resolved? As I am getting issue due to deprecation of method getGenericType() from AnnotatedParameter Class and In docs it says to use &quot;Annotated.getType() for replacement&quot;, But not working.BTW I am upgrading from 2.10.2 to 2.13.5 . https://javadoc.io/static/com.fasterxml.jackson.core/jackson-databind/2.10.2/com/fasterxml/jackson/databind/introspect/AnnotatedParameter.html#getGenericType--","body":"Is this Issue resolved? As I am getting issue due to deprecation of method getGenericType() from AnnotatedParameter Class and In docs it says to use &quot;Annotated.getType() for replacement&quot;, But not working.BTW I am upgrading from 2.10.2 to 2.13.5 . <a href=\"https://javadoc.io/static/com.fasterxml.jackson.core/jackson-databind/2.10.2/com/fasterxml/jackson/databind/introspect/AnnotatedParameter.html#getGenericType--\" rel=\"nofollow noreferrer\">javadoc.io/static/com.fasterxml.jackson.core/jackson-databin&zwnj;&#8203;d/&hellip;</a>"}],"owner":{"account_id":6189564,"reputation":127,"user_id":4822609,"accept_rate":0,"display_name":"martin samm"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":193,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687873725,"creation_date":1687873725,"question_id":76565547,"body_markdown":"So, i have an issue i&#39;m struggling to resolve. I have a service making a REST call to another service. Using jackson 2.12.7 all&#39;s well. Upgrading to jackson 2.13.5 the same code, config etc i&#39;m getting this error:\r\n\r\n```Could not resolve subtype of [simple type, class com.rapid7.platform.ipims.domain.PlatformUser]: missing type id property &#39;@class&#39; ```\r\n\r\nThe PlatformUser class is a straight forward POJO (and again unchanged) with the following props:\r\n\r\n\r\n```    private String userId;\r\n    private Customer customer;\r\n    private String email;\r\n    private String oktaUserId;\r\n    private Long createdTime;\r\n    private Long lastLoginTime;\r\n    private boolean multiCustomer = false;\r\n    private boolean externalIdp;\r\n    private Map&lt;String, String&gt; userProperties = new HashMap&lt;&gt;();\r\n```\r\n\r\nWe&#39;re using a Mixin to avoid deserializing userProperties Map. \r\n\r\nOur objectMapper is setup like this: \r\n\r\n    private ObjectMapper objectMapper() {\r\n        ObjectMapper mapper = new ObjectMapper();\r\n        mapper.enableDefaultTyping(\r\n            ObjectMapper.DefaultTyping.NON_FINAL,\r\n            JsonTypeInfo.As.PROPERTY\r\n        );\r\n        mapper.registerModule(new CoreJackson2Module());\r\n        mapper.registerModule(new WebJackson2Module());\r\n        mapper.registerModule(new WebServletJackson2Module());\r\n        mapper.registerModule(new WebServerJackson2Module());\r\n        mapper.registerModule(new Saml2Jackson2Module());\r\n        mapper.registerModules(new Saml2Jackson2Module());\r\n        mapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\r\n        // handle Java 8 Datetime with JSR-310\r\n        mapper.registerModule(new JavaTimeModule());\r\n        mapper.addMixIn(PlatformUser.class, PlatformUserMixin.class);\r\n        mapper.addMixIn(MapSession.class, MapSessionMixin.class);\r\n        return mapper;\r\n    }\r\n\r\n\r\nDebugging through the code i can see the objectmapper is wired in fine and that the objectMapper is setting it&#39;s valueType to a SimpleType[simple type, class PlatformUser] so things seem setup correctly but at some point something odd is happening and an AsPropertyTypeDeserializer is used and triggers the above exception (seems to be expecting the JSON to contain an @class definition/declaration, which was unnecessary previously).\r\n\r\nSo, can anyone help point me in the right direction?\r\n\r\nThanks alot.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Jackson Databind 2.12.7 to 2.13.5 Deserialization Issue","body":"<p>So, i have an issue i'm struggling to resolve. I have a service making a REST call to another service. Using jackson 2.12.7 all's well. Upgrading to jackson 2.13.5 the same code, config etc i'm getting this error:</p>\n<p><code>Could not resolve subtype of [simple type, class com.rapid7.platform.ipims.domain.PlatformUser]: missing type id property '@class' </code></p>\n<p>The PlatformUser class is a straight forward POJO (and again unchanged) with the following props:</p>\n<pre><code>    private Customer customer;\n    private String email;\n    private String oktaUserId;\n    private Long createdTime;\n    private Long lastLoginTime;\n    private boolean multiCustomer = false;\n    private boolean externalIdp;\n    private Map&lt;String, String&gt; userProperties = new HashMap&lt;&gt;();\n</code></pre>\n<p>We're using a Mixin to avoid deserializing userProperties Map.</p>\n<p>Our objectMapper is setup like this:</p>\n<pre><code>private ObjectMapper objectMapper() {\n    ObjectMapper mapper = new ObjectMapper();\n    mapper.enableDefaultTyping(\n        ObjectMapper.DefaultTyping.NON_FINAL,\n        JsonTypeInfo.As.PROPERTY\n    );\n    mapper.registerModule(new CoreJackson2Module());\n    mapper.registerModule(new WebJackson2Module());\n    mapper.registerModule(new WebServletJackson2Module());\n    mapper.registerModule(new WebServerJackson2Module());\n    mapper.registerModule(new Saml2Jackson2Module());\n    mapper.registerModules(new Saml2Jackson2Module());\n    mapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\n    // handle Java 8 Datetime with JSR-310\n    mapper.registerModule(new JavaTimeModule());\n    mapper.addMixIn(PlatformUser.class, PlatformUserMixin.class);\n    mapper.addMixIn(MapSession.class, MapSessionMixin.class);\n    return mapper;\n}\n</code></pre>\n<p>Debugging through the code i can see the objectmapper is wired in fine and that the objectMapper is setting it's valueType to a SimpleType[simple type, class PlatformUser] so things seem setup correctly but at some point something odd is happening and an AsPropertyTypeDeserializer is used and triggers the above exception (seems to be expecting the JSON to contain an @class definition/declaration, which was unnecessary previously).</p>\n<p>So, can anyone help point me in the right direction?</p>\n<p>Thanks alot.</p>\n"},{"tags":["java","spring","spring-integration"],"answers":[{"tags":[],"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1687873514,"creation_date":1687873514,"answer_id":76565521,"question_id":76562875,"body_markdown":"See `ByteArrayRawSerializer` JavaDocs:\r\n\r\n     * A byte array (de)serializer that does nothing with the payload; sends it raw.\r\n     * Message termination for assembly purposes is signaled by the client closing the\r\n     * connection. The serializer does not, itself, close the connection after\r\n     * writing the bytes.\r\n\r\nSo, with this deserializer the &quot;end of reply&quot; is only initiated when you close the connection.\r\n\r\nThe `TcpSendingMessageHandler` is one-way channel adapter and it doesn&#39;t not produce any replies. With a `TcpOutboundGateway` you need to look into some other strategy for messages demarcation: https://docs.spring.io/spring-integration/docs/current/reference/html/ip.html#tcp-codecs.\r\n\r\nYou may also look into a collaborating channel adapters approach: https://docs.spring.io/spring-integration/docs/current/reference/html/ip.html#ip-collaborating-adapters","title":"How to get reply from the remote source using Spring Integration?","body":"<p>See <code>ByteArrayRawSerializer</code> JavaDocs:</p>\n<pre><code> * A byte array (de)serializer that does nothing with the payload; sends it raw.\n * Message termination for assembly purposes is signaled by the client closing the\n * connection. The serializer does not, itself, close the connection after\n * writing the bytes.\n</code></pre>\n<p>So, with this deserializer the &quot;end of reply&quot; is only initiated when you close the connection.</p>\n<p>The <code>TcpSendingMessageHandler</code> is one-way channel adapter and it doesn't not produce any replies. With a <code>TcpOutboundGateway</code> you need to look into some other strategy for messages demarcation: <a href=\"https://docs.spring.io/spring-integration/docs/current/reference/html/ip.html#tcp-codecs\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-integration/docs/current/reference/html/ip.html#tcp-codecs</a>.</p>\n<p>You may also look into a collaborating channel adapters approach: <a href=\"https://docs.spring.io/spring-integration/docs/current/reference/html/ip.html#ip-collaborating-adapters\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-integration/docs/current/reference/html/ip.html#ip-collaborating-adapters</a></p>\n"},{"tags":[],"owner":{"account_id":1288095,"reputation":169316,"user_id":1240763,"display_name":"Gary Russell"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1687873526,"creation_date":1687873526,"answer_id":76565523,"question_id":76562875,"body_markdown":"TCP is a streaming protocol; you need some mechanism (e.g. CRLF, LF, etc) to delimit messages within the stream. The `ByteArrayRawSerializer` uses the socket close to determine when all the data has been received. It sounds like your server is not closing the socket.\r\n\r\nYou need to determine which mechanism the server is using the delimit messages within the stream and select an appropriate deserializer; either one of the standard ones, or a custom one.\r\n\r\nhttps://docs.spring.io/spring-integration/docs/current/reference/html/ip.html#tcp-codecs","title":"How to get reply from the remote source using Spring Integration?","body":"<p>TCP is a streaming protocol; you need some mechanism (e.g. CRLF, LF, etc) to delimit messages within the stream. The <code>ByteArrayRawSerializer</code> uses the socket close to determine when all the data has been received. It sounds like your server is not closing the socket.</p>\n<p>You need to determine which mechanism the server is using the delimit messages within the stream and select an appropriate deserializer; either one of the standard ones, or a custom one.</p>\n<p><a href=\"https://docs.spring.io/spring-integration/docs/current/reference/html/ip.html#tcp-codecs\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-integration/docs/current/reference/html/ip.html#tcp-codecs</a></p>\n"}],"owner":{"account_id":13176203,"reputation":195,"user_id":9517076,"display_name":"I have 10 fingers"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76565523,"answer_count":2,"score":0,"last_activity_date":1687873526,"creation_date":1687853568,"question_id":76562875,"body_markdown":"I&#39;m implementing a simple request-reply pattern to communicate with remote source using Spring integration. i could see it can send request to the source and also the source send back the reply through Wireshark.\r\n\r\nBut i can&#39;t get reply message in my application. Once i configured my application using `outboundGateway` i could see the reply message has no EOF delimiter and since default `ouboundGateway` uses `ByteArrayCrLfSerializer` it throws `TimeoutEXception` So i re-configured my application to use `ChannelAdapter` setting `ByteArrayRawSerializer` so that client can get reply.\r\n\r\n```java\r\n@Bean\r\npublic AbstractClientConnectionFactory clientConnectionFactory() {\r\n    TcpNioClientConnectionFactory connectionFactory = new TcpNioClientConnectionFactory(host, port);\r\n    connectionFactory.setUsingDirectBuffers(true);\r\n    connectionFactory.setSerializer(new ByteArrayRawSerializer());\r\n    connectionFactory.setSerializer(new ByteArrayRawSerializer());\r\n    connectionFactory.setApplicationEventPublisher(eventPublisher);\r\n\r\n    return new CachingClientConnectionFactory(connectionFactory, poolSize);\r\n}\r\n\r\n@Bean\r\npublic MessageChannel requestChannel() {\r\n    return new DirectChannel();\r\n}\r\n\r\n@Bean\r\n@ServiceActivator(inputChannel = &quot;requestChannel&quot;, outputChannel = &quot;responseChannel&quot;, requiresReply = &quot;true&quot;)\r\npublic TcpSendingMessageHandler requestHandler() {\r\n    TcpSendingMessageHandler handler = new TcpSendingMessageHandler();\r\n    handler.setConnectionFactory(clientConnectionFactory());\r\n\r\n    return handler;\r\n}\r\n\r\n\r\n@Bean\r\npublic MessageChannel responseChannel() {\r\n    return new DirectChannel();\r\n}\r\n\r\n@Bean\r\npublic IntegrationFlow responseFlow() {\r\n    return IntegrationFlow.from(responseChannel())\r\n        .handle(message -&gt; {\r\n            log.info(&quot;Reply: {}&quot;, message.getPayload());\r\n        })\r\n        .get();\r\n}\r\n\r\n```\r\n\r\nThis is my setup i expected that if i specify the `outputChannel` on `@ServiceActivator` i can get the reply in that channel but i can&#39;t.\r\n\r\nThe examples out there shows the default client and server connection but since the reply come through the port that client opened and the server only reply when client request i don&#39;t think i need a server connection in this case.\r\n\r\nPlease let me know if i misunderstood or missed something. Thanks in advance&#128583;","title":"How to get reply from the remote source using Spring Integration?","body":"<p>I'm implementing a simple request-reply pattern to communicate with remote source using Spring integration. i could see it can send request to the source and also the source send back the reply through Wireshark.</p>\n<p>But i can't get reply message in my application. Once i configured my application using <code>outboundGateway</code> i could see the reply message has no EOF delimiter and since default <code>ouboundGateway</code> uses <code>ByteArrayCrLfSerializer</code> it throws <code>TimeoutEXception</code> So i re-configured my application to use <code>ChannelAdapter</code> setting <code>ByteArrayRawSerializer</code> so that client can get reply.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic AbstractClientConnectionFactory clientConnectionFactory() {\n    TcpNioClientConnectionFactory connectionFactory = new TcpNioClientConnectionFactory(host, port);\n    connectionFactory.setUsingDirectBuffers(true);\n    connectionFactory.setSerializer(new ByteArrayRawSerializer());\n    connectionFactory.setSerializer(new ByteArrayRawSerializer());\n    connectionFactory.setApplicationEventPublisher(eventPublisher);\n\n    return new CachingClientConnectionFactory(connectionFactory, poolSize);\n}\n\n@Bean\npublic MessageChannel requestChannel() {\n    return new DirectChannel();\n}\n\n@Bean\n@ServiceActivator(inputChannel = &quot;requestChannel&quot;, outputChannel = &quot;responseChannel&quot;, requiresReply = &quot;true&quot;)\npublic TcpSendingMessageHandler requestHandler() {\n    TcpSendingMessageHandler handler = new TcpSendingMessageHandler();\n    handler.setConnectionFactory(clientConnectionFactory());\n\n    return handler;\n}\n\n\n@Bean\npublic MessageChannel responseChannel() {\n    return new DirectChannel();\n}\n\n@Bean\npublic IntegrationFlow responseFlow() {\n    return IntegrationFlow.from(responseChannel())\n        .handle(message -&gt; {\n            log.info(&quot;Reply: {}&quot;, message.getPayload());\n        })\n        .get();\n}\n\n</code></pre>\n<p>This is my setup i expected that if i specify the <code>outputChannel</code> on <code>@ServiceActivator</code> i can get the reply in that channel but i can't.</p>\n<p>The examples out there shows the default client and server connection but since the reply come through the port that client opened and the server only reply when client request i don't think i need a server connection in this case.</p>\n<p>Please let me know if i misunderstood or missed something. Thanks in advance🙇</p>\n"},{"tags":["java","parsing","xml-parsing","sax","jco"],"comments":[{"owner":{"account_id":5539,"reputation":43971,"user_id":8969,"accept_rate":67,"display_name":"Tom"},"score":0,"creation_date":1268894080,"post_id":2467830,"comment_id":2457856,"body_markdown":"So is the data coming from JCO as XML and you&#39;re parsing it? Or are you getting a name or something and writing it into an XML document that you&#39;re then parsing?","body":"So is the data coming from JCO as XML and you&#39;re parsing it? Or are you getting a name or something and writing it into an XML document that you&#39;re then parsing?"},{"owner":{"account_id":52759,"reputation":21589,"user_id":157705,"accept_rate":74,"display_name":"jai"},"score":0,"creation_date":1268895348,"post_id":2467830,"comment_id":2457951,"body_markdown":"@Tom: JCO has Record.toXML() method that gives the data in XML format.","body":"@Tom: JCO has Record.toXML() method that gives the data in XML format."},{"owner":{"account_id":76469,"reputation":18423,"user_id":218890,"accept_rate":64,"display_name":"vwegert"},"score":0,"creation_date":1268939148,"post_id":2467830,"comment_id":2463166,"body_markdown":"Just out of curiosity - is there a special reason why you go through all the pain and CPU cycles of transforming the data into XML and then back again?","body":"Just out of curiosity - is there a special reason why you go through all the pain and CPU cycles of transforming the data into XML and then back again?"},{"owner":{"account_id":52759,"reputation":21589,"user_id":157705,"accept_rate":74,"display_name":"jai"},"score":0,"creation_date":1268996528,"post_id":2467830,"comment_id":2467756,"body_markdown":"@vwegert: Good Question. Let me admit that we don&#39;t know the JCO API to iterate over the JCO.Fields and thought that toXML() might simply our job.","body":"@vwegert: Good Question. Let me admit that we don&#39;t know the JCO API to iterate over the JCO.Fields and thought that toXML() might simply our job."},{"owner":{"account_id":76469,"reputation":18423,"user_id":218890,"accept_rate":64,"display_name":"vwegert"},"score":1,"creation_date":1269073393,"post_id":2467830,"comment_id":2474573,"body_markdown":"...okay. I really don&#39;t know what to say. Sorry, but the JCo comes with API docs, example programs and a PDF tutorial. Instead of reading it and understanding how to use it, someone thought &quot;let&#39;s just throw some XML into this&quot;. I honestly don&#39;t know whether to laugh or to cry...","body":"...okay. I really don&#39;t know what to say. Sorry, but the JCo comes with API docs, example programs and a PDF tutorial. Instead of reading it and understanding how to use it, someone thought &quot;let&#39;s just throw some XML into this&quot;. I honestly don&#39;t know whether to laugh or to cry..."}],"answers":[{"tags":[],"owner":{"account_id":6887,"reputation":36377,"user_id":11721,"accept_rate":60,"display_name":"Stephen Denne"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1268916471,"creation_date":1268916471,"answer_id":2469869,"question_id":2467830,"body_markdown":"I&#39;ve had a [related, but opposite problem][1], where I was trying to insert character 1 into the output of an XSLT transformation. I considered post-processing to replace a marker with the zero, but instead chose to use an xsl:param.\r\n\r\nIf I was in your situation, I&#39;d either come up with a bespoke encoding, replacing the characters which are invalid in XML, and handling them as special cases in your parsing, or if possible, replace them with whitespace.\r\n\r\nI don&#39;t have experience with JCO, so can&#39;t advise on how or where I&#39;d replace the invalid characters.\r\n\r\n  [1]: https://stackoverflow.com/questions/1103045/generate-low-order-non-printable-characters-from-xlst","title":"XML parsing with SAX | how to handle special characters?","body":"<p>I've had a <a href=\"https://stackoverflow.com/questions/1103045/generate-low-order-non-printable-characters-from-xlst\">related, but opposite problem</a>, where I was trying to insert character 1 into the output of an XSLT transformation. I considered post-processing to replace a marker with the zero, but instead chose to use an xsl:param.</p>\n\n<p>If I was in your situation, I'd either come up with a bespoke encoding, replacing the characters which are invalid in XML, and handling them as special cases in your parsing, or if possible, replace them with whitespace.</p>\n\n<p>I don't have experience with JCO, so can't advise on how or where I'd replace the invalid characters.</p>\n"},{"tags":[],"owner":{"account_id":20725,"reputation":4287,"user_id":49804,"display_name":"PATRY Guillaume"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1268922724,"creation_date":1268922724,"answer_id":2470582,"question_id":2467830,"body_markdown":"From my point of view, the source (SAP) should do the replacement. Otherwise, what it transmits to your programm may looks like XML, but is not.   \r\n\r\nWhile replacing the &#39;&amp;&#39; by &#39;&amp;amp;&#39; can be done by a simple String.replaceAll(...) to the string from to toXML() call, others characters can be harder to replace (the &#39;&lt;&#39; and &#39;&gt;&#39; for exemple).\r\n\r\nregards\r\nGuillaume","title":"XML parsing with SAX | how to handle special characters?","body":"<p>From my point of view, the source (SAP) should do the replacement. Otherwise, what it transmits to your programm may looks like XML, but is not.   </p>\n\n<p>While replacing the '&amp;' by '&amp;' can be done by a simple String.replaceAll(...) to the string from to toXML() call, others characters can be harder to replace (the '&lt;' and '>' for exemple).</p>\n\n<p>regards\nGuillaume</p>\n"},{"tags":[],"owner":{"account_id":5539,"reputation":43971,"user_id":8969,"accept_rate":67,"display_name":"Tom"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1268929222,"creation_date":1268927180,"answer_id":2471192,"question_id":2467830,"body_markdown":"It sounds like a bug in their escaping. Depending on context you might be best off just writing your own version of their XMLWriter class that uses a real XML library rather than trying to write your own XML utilities like the SAP developers did.\r\n\r\nAlternatively, looking at the character code, &amp;#00, you might be able to get away with a replace all on it with the empty string:\r\n\r\n    String goodXml = badXml.replaceAll(&quot;&amp;#00;&quot;, &quot;&quot;);","title":"XML parsing with SAX | how to handle special characters?","body":"<p>It sounds like a bug in their escaping. Depending on context you might be best off just writing your own version of their XMLWriter class that uses a real XML library rather than trying to write your own XML utilities like the SAP developers did.</p>\n\n<p>Alternatively, looking at the character code, &amp;#00, you might be able to get away with a replace all on it with the empty string:</p>\n\n<pre><code>String goodXml = badXml.replaceAll(\"&amp;#00;\", \"\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":235917,"reputation":1060,"user_id":503060,"accept_rate":82,"display_name":"Hedley"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1289385339,"creation_date":1289384845,"answer_id":4143442,"question_id":2467830,"body_markdown":"You can encode/decode non-ASCII characters in XML by using the Apache Commons Lang class StringEscapeUtils escapeXML method. See:\r\n\r\nhttp://commons.apache.org/lang/api-2.4/index.html\r\n\r\nTo read about how XML character references work, search for &quot;numeric character references&quot; on wikipedia.","title":"XML parsing with SAX | how to handle special characters?","body":"<p>You can encode/decode non-ASCII characters in XML by using the Apache Commons Lang class StringEscapeUtils escapeXML method. See:</p>\n\n<p><a href=\"http://commons.apache.org/lang/api-2.4/index.html\" rel=\"nofollow\">http://commons.apache.org/lang/api-2.4/index.html</a></p>\n\n<p>To read about how XML character references work, search for \"numeric character references\" on wikipedia.</p>\n"}],"owner":{"account_id":52759,"reputation":21589,"user_id":157705,"accept_rate":74,"display_name":"jai"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7485,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":4,"score":3,"last_activity_date":1687873268,"creation_date":1268892578,"question_id":2467830,"body_markdown":"We have a JAVA application that pulls the data from SAP system, parses it and renders to the users.\r\nThe data is pulled using SAP JCo connector.\r\n\r\nRecently we were thrown an exception:\r\n\r\n&gt; org.xml.sax.SAXParseException: Character reference &quot;&amp;#00&quot; is an invalid XML character.\r\n\r\nSo, we are planning to write a new level of indirection where ALL special/illegal characters are replaced BEFORE parsing the XML.\r\n\r\nMy questions here are :\r\n\r\n 1. Is there any existing (open source) utility that does this job of replacing illegal characters in XML?\r\n 2. Or if I had to write such utility, how should I handle them?\r\n 3. Why is the above exception thrown?\r\n\r\nThank You.\r\n","title":"XML parsing with SAX | how to handle special characters?","body":"<p>We have a JAVA application that pulls the data from SAP system, parses it and renders to the users.\nThe data is pulled using SAP JCo connector.</p>\n<p>Recently we were thrown an exception:</p>\n<blockquote>\n<p>org.xml.sax.SAXParseException: Character reference &quot;&amp;#00&quot; is an invalid XML character.</p>\n</blockquote>\n<p>So, we are planning to write a new level of indirection where ALL special/illegal characters are replaced BEFORE parsing the XML.</p>\n<p>My questions here are :</p>\n<ol>\n<li>Is there any existing (open source) utility that does this job of replacing illegal characters in XML?</li>\n<li>Or if I had to write such utility, how should I handle them?</li>\n<li>Why is the above exception thrown?</li>\n</ol>\n<p>Thank You.</p>\n"},{"tags":["java","maven","sapjco3"],"comments":[{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1405448198,"post_id":24765243,"comment_id":38427154,"body_markdown":"Why is this check even in?  Do you violate the license?","body":"Why is this check even in?  Do you violate the license?"},{"owner":{"account_id":4752347,"reputation":91,"user_id":3842041,"display_name":"Alexander Pilch"},"score":0,"creation_date":1405448617,"post_id":24765243,"comment_id":38427390,"body_markdown":"I don&#39;t plan to violate the license. The resulting artifact should contain the file with the specified naming conventions. I&#39;d like to get all dependencies from the maven repository, but sap isn&#39;t offering a mavenized version of the connector. As a result we created our own maven artifact and uploaded it to our private repository. I thought this issue is affecting more developers, but haven&#39;t found a solution yet.","body":"I don&#39;t plan to violate the license. The resulting artifact should contain the file with the specified naming conventions. I&#39;d like to get all dependencies from the maven repository, but sap isn&#39;t offering a mavenized version of the connector. As a result we created our own maven artifact and uploaded it to our private repository. I thought this issue is affecting more developers, but haven&#39;t found a solution yet."},{"owner":{"account_id":3023214,"reputation":20362,"user_id":2563754,"display_name":"Seelenvirtuose"},"score":0,"creation_date":1405449238,"post_id":24765243,"comment_id":38427751,"body_markdown":"We have the same problem. At the moment, we only need standalone applications (which are in fact middleware clients between SAP and an enterprise application). So we are using the maven-assembly-plugin. With that we simply handle this JAR explicit with a renaming in the resulting artifact (a ZIP). Maybe there is also a similar configuration option in the maven-war-plugin?","body":"We have the same problem. At the moment, we only need standalone applications (which are in fact middleware clients between SAP and an enterprise application). So we are using the maven-assembly-plugin. With that we simply handle this JAR explicit with a renaming in the resulting artifact (a ZIP). Maybe there is also a similar configuration option in the maven-war-plugin?"},{"owner":{"account_id":3023214,"reputation":20362,"user_id":2563754,"display_name":"Seelenvirtuose"},"score":0,"creation_date":1405449388,"post_id":24765243,"comment_id":38427850,"body_markdown":"Additionally: We have this problem with version 3.0.11. Prior to that we used 3.0.6, with which we did not have that problem.","body":"Additionally: We have this problem with version 3.0.11. Prior to that we used 3.0.6, with which we did not have that problem."},{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1405450881,"post_id":24765243,"comment_id":38428580,"body_markdown":"Suggestions which I have no idea will work:  1) Having the jar file with the correct name in WEB-INF/lib  directly instead of having it added as a dependency.  2) Using the outputFilenameMapping feature of maven-war-plugin to rename the jar in the war.","body":"Suggestions which I have no idea will work:  1) Having the jar file with the correct name in WEB-INF/lib  directly instead of having it added as a dependency.  2) Using the outputFilenameMapping feature of maven-war-plugin to rename the jar in the war."},{"owner":{"account_id":4752347,"reputation":91,"user_id":3842041,"display_name":"Alexander Pilch"},"score":0,"creation_date":1405451141,"post_id":24765243,"comment_id":38428723,"body_markdown":"The web project also contains some integration tests, which require it to work within the standard execution (surefire, failsafe). \n\nThe current workaround for the war is more or less:\n- copy the sap dependency via the dependency plugin to web-inf/lib (as sapjco3.jar)\n- manually add the manifest entry to the manifest (via war plugin)\n\nThis will produce a working war, as it totally bypasses maven. I&#39;ll have a look at the outputFilenameMapping. Maybe this simplifies the creation of the war. Thanks.","body":"The web project also contains some integration tests, which require it to work within the standard execution (surefire, failsafe).   The current workaround for the war is more or less: - copy the sap dependency via the dependency plugin to web-inf/lib (as sapjco3.jar) - manually add the manifest entry to the manifest (via war plugin)  This will produce a working war, as it totally bypasses maven. I&#39;ll have a look at the outputFilenameMapping. Maybe this simplifies the creation of the war. Thanks."},{"owner":{"account_id":4752347,"reputation":91,"user_id":3842041,"display_name":"Alexander Pilch"},"score":0,"creation_date":1405451702,"post_id":24765243,"comment_id":38429050,"body_markdown":"Just some additions \n- the native library is also copied over (from target/natives) to web-inf/lib\n- the standard build uses https://code.google.com/p/mavennatives/ to unpack the native library\n- the native library path is set at runtime within a servlet context listener","body":"Just some additions  - the native library is also copied over (from target/natives) to web-inf/lib - the standard build uses <a href=\"https://code.google.com/p/mavennatives/\" rel=\"nofollow noreferrer\">code.google.com/p/mavennatives</a> to unpack the native library - the native library path is set at runtime within a servlet context listener"},{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1405453484,"post_id":24765243,"comment_id":38430085,"body_markdown":"&quot;Native library is copied over and path is set at runtime&quot;?  That sounds brittle (I have no idea whether this functionality is guaranteed to work in Java, or just  happens to work).  I would suggest moving the library and its native blob from your applications/webapps and into the surrounding environment, so you do not have to bend over backwards to make the SAP and Maven mindset work together.","body":"&quot;Native library is copied over and path is set at runtime&quot;?  That sounds brittle (I have no idea whether this functionality is guaranteed to work in Java, or just  happens to work).  I would suggest moving the library and its native blob from your applications/webapps and into the surrounding environment, so you do not have to bend over backwards to make the SAP and Maven mindset work together."},{"owner":{"account_id":4752347,"reputation":91,"user_id":3842041,"display_name":"Alexander Pilch"},"score":0,"creation_date":1405453497,"post_id":24765243,"comment_id":38430094,"body_markdown":"I haven&#39;t yet tried to manage the artifact manually within the whole build:\n- copy the depedency to a subfolder below target in each project, which requires it / copy it one time to a central location\n- adding the dependency manually to the surefire/failsafe classpath:\n&lt;configuration&gt;\n          &lt;additionalClasspathElements&gt;\n&lt;additionalClasspathElement&gt;liblocation&lt;/additionalClasspathElement&gt;\n          &lt;/additionalClasspathElements&gt;\n&lt;/configuration&gt;","body":"I haven&#39;t yet tried to manage the artifact manually within the whole build: - copy the depedency to a subfolder below target in each project, which requires it / copy it one time to a central location - adding the dependency manually to the surefire/failsafe classpath: &lt;configuration&gt;           &lt;additionalClasspathElements&gt; &lt;additionalClasspathElement&gt;liblocation&lt;/additionalClasspath&zwnj;&#8203;Element&gt;           &lt;/additionalClasspathElements&gt; &lt;/configuration&gt;"},{"owner":{"account_id":4752347,"reputation":91,"user_id":3842041,"display_name":"Alexander Pilch"},"score":0,"creation_date":1405453596,"post_id":24765243,"comment_id":38430145,"body_markdown":"The application is deployed in a clustered/shared hosting environment. We can only deploy the war and aren&#39;t allowed to change any infrastructure.","body":"The application is deployed in a clustered/shared hosting environment. We can only deploy the war and aren&#39;t allowed to change any infrastructure."},{"owner":{"account_id":4752347,"reputation":91,"user_id":3842041,"display_name":"Alexander Pilch"},"score":0,"creation_date":1405454060,"post_id":24765243,"comment_id":38430397,"body_markdown":"I&#39;d prefer a plain java connector and not one which forces us to create platform dependent artifacts by including some native libraries, especially if the performance of the connector is probably not a big issue. Even the jars are different in size, so I&#39;m not sure if it would be possible to include just one jar and deploy the native library on the target system.","body":"I&#39;d prefer a plain java connector and not one which forces us to create platform dependent artifacts by including some native libraries, especially if the performance of the connector is probably not a big issue. Even the jars are different in size, so I&#39;m not sure if it would be possible to include just one jar and deploy the native library on the target system."},{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1405455177,"post_id":24765243,"comment_id":38430960,"body_markdown":"You can bake in the appropriate files when you create the very last artifact, and have it &quot;outside&quot; while you develop.  You need something that works in your IDE to avoid slowing development to a crawl.","body":"You can bake in the appropriate files when you create the very last artifact, and have it &quot;outside&quot; while you develop.  You need something that works in your IDE to avoid slowing development to a crawl."},{"owner":{"account_id":4752347,"reputation":91,"user_id":3842041,"display_name":"Alexander Pilch"},"score":0,"creation_date":1405456490,"post_id":24765243,"comment_id":38431660,"body_markdown":"The build uses classifier/profiles to create platform dependent artifacts. There are only 2 modules affected atm: the sap module and the war.  We need those platform dependent builds, as maven drives our CI/deployment chain, which runs on linux. Baking in the dependency allows us to create a valid war, but the tests won&#39;t work during the build, as the artifact is missing. The current hacked state of the project works with all these constraints, but it is pretty ugly. The only clean solution I see would be SAP removing this check in the next version of their connector.","body":"The build uses classifier/profiles to create platform dependent artifacts. There are only 2 modules affected atm: the sap module and the war.  We need those platform dependent builds, as maven drives our CI/deployment chain, which runs on linux. Baking in the dependency allows us to create a valid war, but the tests won&#39;t work during the build, as the artifact is missing. The current hacked state of the project works with all these constraints, but it is pretty ugly. The only clean solution I see would be SAP removing this check in the next version of their connector."}],"answers":[{"tags":[],"owner":{"account_id":16041999,"reputation":131,"user_id":11578204,"display_name":"Sambit Swain"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1567435057,"creation_date":1567435057,"answer_id":57758811,"question_id":24765243,"body_markdown":"I had the same issue, and below is how I fixed it (in short work around it):\r\n1. Run the command in command prompt\r\n\r\n    mvn install:install-file \r\n    -Dfile=sapjco3.jar \r\n    -DgroupId=com.company.sap \r\n    -DartifactId=com.sap.conn.jco.sapjco \r\n    -Dversion=1.0 \r\n    -Dpackaging=jar\r\n\r\n2. This will create a local artifact, or you can also create it in remote repository\r\n3. Download this dependency from maven as shown below:\r\n\r\n    `&lt;dependency&gt;\r\n        &lt;groupId&gt;com.company.sap&lt;/groupId&gt;\r\n        &lt;artifactId&gt;com.sap.conn.jco.sapjco&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0&lt;/version&gt;\r\n    &lt;/dependency&gt;`\r\n\r\n\r\nThis work around would avoid the sapjco3 error:\r\n\r\n    if (!jarname.equals(&quot;sapjco3.jar&quot;) \r\n    &amp;&amp; !jarname.startsWith(&quot;com.sap.conn.jco&quot;) \r\n    &amp;&amp; !jarname.equals(&quot;sapjco3_IDE.jar&quot;) \r\n    &amp;&amp; Package.getPackage(&quot;org.apache.maven.surefire.booter&quot;) == null \r\n    &amp;&amp; Package.getPackage(&quot;org.eclipse.jdt.internal.junit.runner&quot;) == null) {\r\n        throw new ExceptionInInitializerError(&quot;Illegal JCo archive \\&quot;&quot; + jarname + &quot;\\&quot;. It is not allowed to rename or repackage the original archive \\&quot;&quot; + &quot;sapjco3.jar&quot; + &quot;\\&quot;.&quot;);\r\n    }","title":"SapJco 3.0.11 with Maven: It is not allowed to rename or repackage the original archive &quot;sapjco3.jar&quot;","body":"<p>I had the same issue, and below is how I fixed it (in short work around it):\n1. Run the command in command prompt</p>\n\n<pre><code>mvn install:install-file \n-Dfile=sapjco3.jar \n-DgroupId=com.company.sap \n-DartifactId=com.sap.conn.jco.sapjco \n-Dversion=1.0 \n-Dpackaging=jar\n</code></pre>\n\n<ol start=\"2\">\n<li>This will create a local artifact, or you can also create it in remote repository</li>\n<li><p>Download this dependency from maven as shown below:</p>\n\n<p><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.company.sap&lt;/groupId&gt;\n    &lt;artifactId&gt;com.sap.conn.jco.sapjco&lt;/artifactId&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n&lt;/dependency&gt;</code></p></li>\n</ol>\n\n<p>This work around would avoid the sapjco3 error:</p>\n\n<pre><code>if (!jarname.equals(\"sapjco3.jar\") \n&amp;&amp; !jarname.startsWith(\"com.sap.conn.jco\") \n&amp;&amp; !jarname.equals(\"sapjco3_IDE.jar\") \n&amp;&amp; Package.getPackage(\"org.apache.maven.surefire.booter\") == null \n&amp;&amp; Package.getPackage(\"org.eclipse.jdt.internal.junit.runner\") == null) {\n    throw new ExceptionInInitializerError(\"Illegal JCo archive \\\"\" + jarname + \"\\\". It is not allowed to rename or repackage the original archive \\\"\" + \"sapjco3.jar\" + \"\\\".\");\n}\n</code></pre>\n"}],"owner":{"account_id":4752347,"reputation":91,"user_id":3842041,"display_name":"Alexander Pilch"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9487,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":1,"score":7,"last_activity_date":1687873154,"creation_date":1405447866,"question_id":24765243,"body_markdown":"The current version of the SAP JCo connector enforces the name of the containing jar at runtime. This will lead to exceptions, if it doesn&#39;t match the name (sapjco3.jar). \r\n\r\n&gt; JCo initialization fails with java.lang.ExceptionInInitializerError: Illegal JCo archive &quot;sap-jco-win-amd-64-3.0.11.jar&quot;. It is not allowed to rename or repackage the original archive &quot;sapjco3.jar&quot;\r\n\r\nWe wrapped these libraries and deployed them with a custom pom in our nexus repository. The standard maven build is unusable atm, as a result of this change/the standard maven way of naming artifacts.\r\n\r\nThe current workaround uses system scope for this dependency and copies the sapjco maven artifact to a specified folder within the project, as this is the only way to enforce the name of an jar file and also keep it in the build as a dependency. This works within the same module. One of the disadvantages of the system scope is the deactivated/failing resolution of transitive artifacts. We would need that, as the sap connector module is included in an application war module. As system scope dependencies aren&#39;t included in the packaged artifacts, we had to copy them to the web-inf/lib folder and add a classpath entry to the manifest.\r\n\r\nThe build works, when I start it from the parent/root module, but fails when it is started in submodules due to the system scope dependency. We could live with that solution for now, but I&#39;m definitely not happy with it.\r\n\r\nIs there a recommended way to use sapjco with maven or a simpler approach to produce platform dependent artifacts, which include the native library and the jar with a specified name? Is SAP reconsidering this check, as the previous versions did not include it?\r\n\r\n\r\nEdit:\r\n\r\n- Other developers seem to have the same issue: http://scn.sap.com/blogs/gushakov/2013/04/05/using-jco-without-nwds\r\n- System scope is deprecated and not a longterm solution\r\n\r\n","title":"SapJco 3.0.11 with Maven: It is not allowed to rename or repackage the original archive &quot;sapjco3.jar&quot;","body":"<p>The current version of the SAP JCo connector enforces the name of the containing jar at runtime. This will lead to exceptions, if it doesn't match the name (sapjco3.jar).</p>\n<blockquote>\n<p>JCo initialization fails with java.lang.ExceptionInInitializerError: Illegal JCo archive &quot;sap-jco-win-amd-64-3.0.11.jar&quot;. It is not allowed to rename or repackage the original archive &quot;sapjco3.jar&quot;</p>\n</blockquote>\n<p>We wrapped these libraries and deployed them with a custom pom in our nexus repository. The standard maven build is unusable atm, as a result of this change/the standard maven way of naming artifacts.</p>\n<p>The current workaround uses system scope for this dependency and copies the sapjco maven artifact to a specified folder within the project, as this is the only way to enforce the name of an jar file and also keep it in the build as a dependency. This works within the same module. One of the disadvantages of the system scope is the deactivated/failing resolution of transitive artifacts. We would need that, as the sap connector module is included in an application war module. As system scope dependencies aren't included in the packaged artifacts, we had to copy them to the web-inf/lib folder and add a classpath entry to the manifest.</p>\n<p>The build works, when I start it from the parent/root module, but fails when it is started in submodules due to the system scope dependency. We could live with that solution for now, but I'm definitely not happy with it.</p>\n<p>Is there a recommended way to use sapjco with maven or a simpler approach to produce platform dependent artifacts, which include the native library and the jar with a specified name? Is SAP reconsidering this check, as the previous versions did not include it?</p>\n<p>Edit:</p>\n<ul>\n<li>Other developers seem to have the same issue: <a href=\"http://scn.sap.com/blogs/gushakov/2013/04/05/using-jco-without-nwds\" rel=\"nofollow noreferrer\">http://scn.sap.com/blogs/gushakov/2013/04/05/using-jco-without-nwds</a></li>\n<li>System scope is deprecated and not a longterm solution</li>\n</ul>\n"},{"tags":["java","jakarta-ee","glassfish","sapjco3"],"answers":[{"tags":[],"owner":{"account_id":67634,"reputation":424,"user_id":197817,"display_name":"Tom"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1261422909,"creation_date":1261422909,"answer_id":1942010,"question_id":1899888,"body_markdown":"Your problem is probably related to the fact that there is some native code involved here. This is even true for JCo 3. Whereas JCo 3 does not make usage of the native RFC library anymore, it still requires JNI to communicate with the CPIC layer.\r\n\r\nGetting a JVM to unload a native library is an exercise in utmost frustration. The JNI Specification states that a native library will be unloaded when the ClassLoader associated with the class it provides the implementation to is unloaded, but trying to force a ClassLoader to unload is virtually impossible within the JVM.\r\n\r\nIf your EAR file includes the sapjco3.jar it will be reloaded each time your code is reloaded. This very likely will causes exceptions as the native library can&#39;t be loaded more than once and there is practically no way to unload native code. So you might consider to place the sapjco3.jar outside of the J2EE container and let your J2EE engine load that library once at start time rather than putting it into the EAR that gets reloaded over and over.","title":"SAP JCo connector loaded forever in GlassFish v2.1 (can&#39;t unload)","body":"<p>Your problem is probably related to the fact that there is some native code involved here. This is even true for JCo 3. Whereas JCo 3 does not make usage of the native RFC library anymore, it still requires JNI to communicate with the CPIC layer.</p>\n\n<p>Getting a JVM to unload a native library is an exercise in utmost frustration. The JNI Specification states that a native library will be unloaded when the ClassLoader associated with the class it provides the implementation to is unloaded, but trying to force a ClassLoader to unload is virtually impossible within the JVM.</p>\n\n<p>If your EAR file includes the sapjco3.jar it will be reloaded each time your code is reloaded. This very likely will causes exceptions as the native library can't be loaded more than once and there is practically no way to unload native code. So you might consider to place the sapjco3.jar outside of the J2EE container and let your J2EE engine load that library once at start time rather than putting it into the EAR that gets reloaded over and over.</p>\n"},{"tags":[],"owner":{"account_id":84786,"reputation":106,"user_id":236803,"display_name":"Matthias Kneissl"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1261612918,"creation_date":1261612918,"answer_id":1956016,"question_id":1899888,"body_markdown":"Which release of SAP are you intending to connect to? We had several problems with the Java Connector, it was not really threadsafe and could not be embedded into a EJB application properly. Same problems came with SAP&#39;s seculib for single sign on. It either didn&#39;t work. The only solution was to load it outside of the J2EE engine.\r\n\r\nHave you ever thought of replacing the JCO with webservices? Of course it&#39;s slightly slower as the data has to go through the ICF but it&#39;s more robust. We switched all our integrations to this solution.","title":"SAP JCo connector loaded forever in GlassFish v2.1 (can&#39;t unload)","body":"<p>Which release of SAP are you intending to connect to? We had several problems with the Java Connector, it was not really threadsafe and could not be embedded into a EJB application properly. Same problems came with SAP's seculib for single sign on. It either didn't work. The only solution was to load it outside of the J2EE engine.</p>\n\n<p>Have you ever thought of replacing the JCO with webservices? Of course it's slightly slower as the data has to go through the ICF but it's more robust. We switched all our integrations to this solution.</p>\n"}],"owner":{"account_id":82096,"reputation":306,"user_id":231100,"display_name":"franblay"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4442,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":1942010,"answer_count":2,"score":4,"last_activity_date":1687873104,"creation_date":1260782875,"question_id":1899888,"body_markdown":"I&#39;ve a problem with GlassFish and SAP JCo connector (`sapjco3.jar`).\r\n\r\nI load it at start up of an J2EE application (`jwm.ear`) and initialize it wrapped in a singleton the first time a connection to SAP is needed.\r\n\r\nThe problem is that this jar remains always initialized in memory, I need to restart glassfish to unload the initialized connections if I need to change a single parameter. Stopping or undeploying the app doesn&#39;t unload sapjco.jar and furter redeployments of the app never get the new connection parameters, the first initialization remains until GlassFish restart.\r\n\r\nDoes anybody knows how to unload or reinitialize this library? preferably even without redeploying the app, first time the app is activated I have a reference to jcoProvider, next activations get a null reference to jcoProvider, but a jcoProvider continues instantiated in memory with initial values.\r\n\r\nRegards!\r\n\r\n&lt;i&gt;Notes:\r\nGlassFish is version 2.1 in Windows 2008 server, jdk is 1.6.0.14\r\nsapjco3.jar and sapjco3.dll are copied to &lt;glassfish dir&gt;\\domains\\domain1\\lib\\ext and are version 3 of SAP java connector.\r\n&lt;/i&gt;  \r\n\r\nSingleton to get SAP connections:\r\n\r\n&lt;pre&gt;\r\npackage es.grupotec.ejb.SAP;\r\n\r\nimport com.sap.conn.jco.JCoDestination;\r\nimport com.sap.conn.jco.JCoDestinationManager;\r\nimport com.sap.conn.jco.JCoException;\r\nimport com.sap.conn.jco.ext.DestinationDataProvider;\r\nimport com.sap.conn.jco.ext.Environment;\r\nimport es.grupotec.ejb.util.ConexionSAPException;\r\nimport java.util.Properties;\r\n\r\npublic final class SAP {\r\n\r\n    private static String SAP_SERVER = &quot;JWM&quot;;\r\n    private static SAP instance = null;\r\n    private static JCOProvider jcoProvider = null;\r\n\r\n    private SAP() {\r\n      // Exists only to defeat instantiation.\r\n    }\r\n\r\n    // Get SAP connection\r\n    public static synchronized JCoDestination getDestination() throws ConexionSAPException {\r\n\r\n        JCoDestination jcoDestination = null;\r\n\r\n            if (Environment.isDestinationDataProviderRegistered()) {\r\n                try {\r\n\r\n                    jcoDestination = JCoDestinationManager.getDestination(SAP_SERVER);\r\n                    return jcoDestination;\r\n\r\n                } catch (JCoException ex) {\r\n\r\n                    throw new ConexionSAPException(ex.getMessage());\r\n\r\n                }\r\n            }\r\n\r\n        // Create new connection\r\n        if(jcoProvider == null) init();\r\n\r\n        // Get connection\r\n        try {\r\n\r\n            jcoDestination = JCoDestinationManager.getDestination(SAP_SERVER);\r\n            return jcoDestination;\r\n            \r\n        } catch (JCoException ex) {\r\n        \r\n            throw new ConexionSAPException(ex.getMessage());\r\n\r\n        }\r\n\r\n    }\r\n\r\n    // Initialize connection to SAP\r\n    public static synchronized void init() throws ConexionSAPException {\r\n\r\n        SAPVO sap = new SAPVO();\r\n        Properties properties = new Properties();\r\n\r\n        if(jcoProvider == null) {\r\n\r\n\r\n            // Get SAP config from database\r\n            try {\r\n                sap = SAPDAO.getSAPConfig();\r\n            } catch (Exception ex) {\r\n                throw new ConexionSAPException(ex.getMessage());\r\n            }\r\n\r\n             // Create connection object\r\n            jcoProvider = new JCOProvider();\r\n\r\n        }\r\n\r\n        properties.setProperty(DestinationDataProvider.JCO_ASHOST,        sap.getJCO_ASHOST());\r\n        properties.setProperty(DestinationDataProvider.JCO_SYSNR,         sap.getJCO_SYSNR());\r\n        properties.setProperty(DestinationDataProvider.JCO_CLIENT,        sap.getJCO_CLIENT());\r\n        properties.setProperty(DestinationDataProvider.JCO_USER,          sap.getJCO_USER());\r\n        properties.setProperty(DestinationDataProvider.JCO_PASSWD,        sap.getJCO_PASSWD());\r\n        properties.setProperty(DestinationDataProvider.JCO_LANG,          sap.getJCO_LANG());\r\n\r\n        try {\r\n\r\n            jcoProvider.changePropertiesForABAP_AS(properties);\r\n\r\n        } catch (Exception e) {\r\n\r\n            throw new ConexionSAPException(e.getMessage());\r\n\r\n        }\r\n\r\n    }\r\n\r\n    public static synchronized void change(SAPVO sap) throws ConexionSAPException {\r\n\r\n        Properties properties = new Properties();\r\n\r\n        // If connection is null create a new one\r\n        if(jcoProvider == null) jcoProvider = new JCOProvider();\r\n\r\n        properties.setProperty(DestinationDataProvider.JCO_ASHOST,        sap.getJCO_ASHOST());\r\n        properties.setProperty(DestinationDataProvider.JCO_SYSNR,         sap.getJCO_SYSNR());\r\n        properties.setProperty(DestinationDataProvider.JCO_CLIENT,        sap.getJCO_CLIENT());\r\n        properties.setProperty(DestinationDataProvider.JCO_USER,          sap.getJCO_USER());\r\n        properties.setProperty(DestinationDataProvider.JCO_PASSWD,        sap.getJCO_PASSWD());\r\n        properties.setProperty(DestinationDataProvider.JCO_LANG,          sap.getJCO_LANG());\r\n\r\n        try {\r\n\r\n            jcoProvider.changePropertiesForABAP_AS(properties);\r\n\r\n        } catch (Exception e) {\r\n\r\n            throw new ConexionSAPException(e.getMessage());\r\n\r\n        }\r\n\r\n\r\n    }\r\n\r\n    // Prevent instantiation by clone\r\n    @Override\r\n    public Object clone() throws CloneNotSupportedException {\r\n        \r\n        throw new CloneNotSupportedException();\r\n\r\n    }\r\n\r\n}\r\n\r\n&lt;/pre&gt;\r\n\r\nJCo provider implementation:\r\n\r\n&lt;pre&gt;\r\npackage es.grupotec.ejb.SAP;\r\n\r\nimport com.sap.conn.jco.ext.DestinationDataEventListener;\r\nimport com.sap.conn.jco.ext.DestinationDataProvider;\r\nimport com.sap.conn.jco.ext.Environment;\r\nimport es.grupotec.ejb.util.ConexionSAPException;\r\nimport java.util.Properties;\r\n\r\npublic class JCOProvider implements DestinationDataProvider {\r\n\r\n    private String SAP_SERVER = &quot;JWM&quot;;\r\n    private DestinationDataEventListener eventListener;\r\n    private Properties ABAP_AS_properties;\r\n\r\n    public JCOProvider(){\r\n\r\n    }\r\n    \r\n    public JCOProvider(SAPVO sap){\r\n\r\n        ABAP_AS_properties = new Properties();\r\n        ABAP_AS_properties.setProperty(DestinationDataProvider.JCO_ASHOST,        sap.getJCO_ASHOST());\r\n        ABAP_AS_properties.setProperty(DestinationDataProvider.JCO_SYSNR,         sap.getJCO_SYSNR());\r\n        ABAP_AS_properties.setProperty(DestinationDataProvider.JCO_CLIENT,        sap.getJCO_CLIENT());\r\n        ABAP_AS_properties.setProperty(DestinationDataProvider.JCO_USER,          sap.getJCO_USER());\r\n        ABAP_AS_properties.setProperty(DestinationDataProvider.JCO_PASSWD,        sap.getJCO_PASSWD());\r\n        ABAP_AS_properties.setProperty(DestinationDataProvider.JCO_LANG,          sap.getJCO_LANG());\r\n        ABAP_AS_properties.setProperty(DestinationDataProvider.JCO_POOL_CAPACITY, sap.getJCO_POOL_CAPACITY());\r\n        ABAP_AS_properties.setProperty(DestinationDataProvider.JCO_PEAK_LIMIT,    sap.getJCO_PEAK_LIMIT());\r\n\r\n        try {\r\n            if (!Environment.isDestinationDataProviderRegistered())\r\n                Environment.registerDestinationDataProvider(this);\r\n            else changePropertiesForABAP_AS(ABAP_AS_properties);\r\n        } catch (Exception ex) {\r\n            String msg = ex.getMessage();\r\n        }\r\n\r\n    }\r\n\r\n    @Override\r\n    public Properties getDestinationProperties(String name) {\r\n\r\n        if (name.equals(SAP_SERVER) &amp;&amp; ABAP_AS_properties!=null) return ABAP_AS_properties;\r\n        else return null;\r\n        \r\n    }\r\n\r\n    @Override\r\n    public boolean supportsEvents() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public void setDestinationDataEventListener(DestinationDataEventListener eventListener) {\r\n        this.eventListener = eventListener;\r\n    }\r\n\r\n public void changePropertiesForABAP_AS(Properties properties) throws ConexionSAPException {\r\n\r\n        try {\r\n            \r\n            if (!Environment.isDestinationDataProviderRegistered()) {\r\n\r\n                if (ABAP_AS_properties == null) ABAP_AS_properties = properties;\r\n                Environment.registerDestinationDataProvider(this);\r\n\r\n            }\r\n\r\n            if (properties == null) {\r\n\r\n                if (eventListener != null) eventListener.deleted(SAP_SERVER);\r\n                ABAP_AS_properties = null;\r\n\r\n            } else {\r\n\r\n                ABAP_AS_properties = properties;\r\n                if (eventListener != null) eventListener.updated(SAP_SERVER);\r\n\r\n            }\r\n\r\n        } catch (Exception ex) {\r\n\r\n            throw new ConexionSAPException(ex.getMessage());\r\n            \r\n        }\r\n\r\n }\r\n    \r\n}\r\n\r\n&lt;/pre&gt;\r\n","title":"SAP JCo connector loaded forever in GlassFish v2.1 (can&#39;t unload)","body":"<p>I've a problem with GlassFish and SAP JCo connector (<code>sapjco3.jar</code>).</p>\n<p>I load it at start up of an J2EE application (<code>jwm.ear</code>) and initialize it wrapped in a singleton the first time a connection to SAP is needed.</p>\n<p>The problem is that this jar remains always initialized in memory, I need to restart glassfish to unload the initialized connections if I need to change a single parameter. Stopping or undeploying the app doesn't unload sapjco.jar and furter redeployments of the app never get the new connection parameters, the first initialization remains until GlassFish restart.</p>\n<p>Does anybody knows how to unload or reinitialize this library? preferably even without redeploying the app, first time the app is activated I have a reference to jcoProvider, next activations get a null reference to jcoProvider, but a jcoProvider continues instantiated in memory with initial values.</p>\n<p>Regards!</p>\n<p><i>Notes:\nGlassFish is version 2.1 in Windows 2008 server, jdk is 1.6.0.14\nsapjco3.jar and sapjco3.dll are copied to \\domains\\domain1\\lib\\ext and are version 3 of SAP java connector.\n</i></p>\n<p>Singleton to get SAP connections:</p>\n<pre>\npackage es.grupotec.ejb.SAP;\n\nimport com.sap.conn.jco.JCoDestination;\nimport com.sap.conn.jco.JCoDestinationManager;\nimport com.sap.conn.jco.JCoException;\nimport com.sap.conn.jco.ext.DestinationDataProvider;\nimport com.sap.conn.jco.ext.Environment;\nimport es.grupotec.ejb.util.ConexionSAPException;\nimport java.util.Properties;\n\npublic final class SAP {\n\n    private static String SAP_SERVER = \"JWM\";\n    private static SAP instance = null;\n    private static JCOProvider jcoProvider = null;\n\n    private SAP() {\n      // Exists only to defeat instantiation.\n    }\n\n    // Get SAP connection\n    public static synchronized JCoDestination getDestination() throws ConexionSAPException {\n\n        JCoDestination jcoDestination = null;\n\n            if (Environment.isDestinationDataProviderRegistered()) {\n                try {\n\n                    jcoDestination = JCoDestinationManager.getDestination(SAP_SERVER);\n                    return jcoDestination;\n\n                } catch (JCoException ex) {\n\n                    throw new ConexionSAPException(ex.getMessage());\n\n                }\n            }\n\n        // Create new connection\n        if(jcoProvider == null) init();\n\n        // Get connection\n        try {\n\n            jcoDestination = JCoDestinationManager.getDestination(SAP_SERVER);\n            return jcoDestination;\n            \n        } catch (JCoException ex) {\n        \n            throw new ConexionSAPException(ex.getMessage());\n\n        }\n\n    }\n\n    // Initialize connection to SAP\n    public static synchronized void init() throws ConexionSAPException {\n\n        SAPVO sap = new SAPVO();\n        Properties properties = new Properties();\n\n        if(jcoProvider == null) {\n\n\n            // Get SAP config from database\n            try {\n                sap = SAPDAO.getSAPConfig();\n            } catch (Exception ex) {\n                throw new ConexionSAPException(ex.getMessage());\n            }\n\n             // Create connection object\n            jcoProvider = new JCOProvider();\n\n        }\n\n        properties.setProperty(DestinationDataProvider.JCO_ASHOST,        sap.getJCO_ASHOST());\n        properties.setProperty(DestinationDataProvider.JCO_SYSNR,         sap.getJCO_SYSNR());\n        properties.setProperty(DestinationDataProvider.JCO_CLIENT,        sap.getJCO_CLIENT());\n        properties.setProperty(DestinationDataProvider.JCO_USER,          sap.getJCO_USER());\n        properties.setProperty(DestinationDataProvider.JCO_PASSWD,        sap.getJCO_PASSWD());\n        properties.setProperty(DestinationDataProvider.JCO_LANG,          sap.getJCO_LANG());\n\n        try {\n\n            jcoProvider.changePropertiesForABAP_AS(properties);\n\n        } catch (Exception e) {\n\n            throw new ConexionSAPException(e.getMessage());\n\n        }\n\n    }\n\n    public static synchronized void change(SAPVO sap) throws ConexionSAPException {\n\n        Properties properties = new Properties();\n\n        // If connection is null create a new one\n        if(jcoProvider == null) jcoProvider = new JCOProvider();\n\n        properties.setProperty(DestinationDataProvider.JCO_ASHOST,        sap.getJCO_ASHOST());\n        properties.setProperty(DestinationDataProvider.JCO_SYSNR,         sap.getJCO_SYSNR());\n        properties.setProperty(DestinationDataProvider.JCO_CLIENT,        sap.getJCO_CLIENT());\n        properties.setProperty(DestinationDataProvider.JCO_USER,          sap.getJCO_USER());\n        properties.setProperty(DestinationDataProvider.JCO_PASSWD,        sap.getJCO_PASSWD());\n        properties.setProperty(DestinationDataProvider.JCO_LANG,          sap.getJCO_LANG());\n\n        try {\n\n            jcoProvider.changePropertiesForABAP_AS(properties);\n\n        } catch (Exception e) {\n\n            throw new ConexionSAPException(e.getMessage());\n\n        }\n\n\n    }\n\n    // Prevent instantiation by clone\n    @Override\n    public Object clone() throws CloneNotSupportedException {\n        \n        throw new CloneNotSupportedException();\n\n    }\n\n}\n\n</pre>\n<p>JCo provider implementation:</p>\n<pre>\npackage es.grupotec.ejb.SAP;\n\nimport com.sap.conn.jco.ext.DestinationDataEventListener;\nimport com.sap.conn.jco.ext.DestinationDataProvider;\nimport com.sap.conn.jco.ext.Environment;\nimport es.grupotec.ejb.util.ConexionSAPException;\nimport java.util.Properties;\n\npublic class JCOProvider implements DestinationDataProvider {\n\n    private String SAP_SERVER = \"JWM\";\n    private DestinationDataEventListener eventListener;\n    private Properties ABAP_AS_properties;\n\n    public JCOProvider(){\n\n    }\n    \n    public JCOProvider(SAPVO sap){\n\n        ABAP_AS_properties = new Properties();\n        ABAP_AS_properties.setProperty(DestinationDataProvider.JCO_ASHOST,        sap.getJCO_ASHOST());\n        ABAP_AS_properties.setProperty(DestinationDataProvider.JCO_SYSNR,         sap.getJCO_SYSNR());\n        ABAP_AS_properties.setProperty(DestinationDataProvider.JCO_CLIENT,        sap.getJCO_CLIENT());\n        ABAP_AS_properties.setProperty(DestinationDataProvider.JCO_USER,          sap.getJCO_USER());\n        ABAP_AS_properties.setProperty(DestinationDataProvider.JCO_PASSWD,        sap.getJCO_PASSWD());\n        ABAP_AS_properties.setProperty(DestinationDataProvider.JCO_LANG,          sap.getJCO_LANG());\n        ABAP_AS_properties.setProperty(DestinationDataProvider.JCO_POOL_CAPACITY, sap.getJCO_POOL_CAPACITY());\n        ABAP_AS_properties.setProperty(DestinationDataProvider.JCO_PEAK_LIMIT,    sap.getJCO_PEAK_LIMIT());\n\n        try {\n            if (!Environment.isDestinationDataProviderRegistered())\n                Environment.registerDestinationDataProvider(this);\n            else changePropertiesForABAP_AS(ABAP_AS_properties);\n        } catch (Exception ex) {\n            String msg = ex.getMessage();\n        }\n\n    }\n\n    @Override\n    public Properties getDestinationProperties(String name) {\n\n        if (name.equals(SAP_SERVER) && ABAP_AS_properties!=null) return ABAP_AS_properties;\n        else return null;\n        \n    }\n\n    @Override\n    public boolean supportsEvents() {\n        return true;\n    }\n\n    @Override\n    public void setDestinationDataEventListener(DestinationDataEventListener eventListener) {\n        this.eventListener = eventListener;\n    }\n\n public void changePropertiesForABAP_AS(Properties properties) throws ConexionSAPException {\n\n        try {\n            \n            if (!Environment.isDestinationDataProviderRegistered()) {\n\n                if (ABAP_AS_properties == null) ABAP_AS_properties = properties;\n                Environment.registerDestinationDataProvider(this);\n\n            }\n\n            if (properties == null) {\n\n                if (eventListener != null) eventListener.deleted(SAP_SERVER);\n                ABAP_AS_properties = null;\n\n            } else {\n\n                ABAP_AS_properties = properties;\n                if (eventListener != null) eventListener.updated(SAP_SERVER);\n\n            }\n\n        } catch (Exception ex) {\n\n            throw new ConexionSAPException(ex.getMessage());\n            \n        }\n\n }\n    \n}\n\n</pre>\n"},{"tags":["java","spring-boot","maven","spring-aop"],"comments":[{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":2,"creation_date":1685599115,"post_id":76375639,"comment_id":134683081,"body_markdown":"If you could just embed an aspect in any package and force Spring to apply it without your library user&#39;s explicit consent, this would be a security problem. Aspects can significantly alter an application&#39;s behaviour. You better document your library and put the tiny burden of adding a single package to the component scan upon the customer, which would be done in a minute, than to somehow try to sneak in the aspect into her application.","body":"If you could just embed an aspect in any package and force Spring to apply it without your library user&#39;s explicit consent, this would be a security problem. Aspects can significantly alter an application&#39;s behaviour. You better document your library and put the tiny burden of adding a single package to the component scan upon the customer, which would be done in a minute, than to somehow try to sneak in the aspect into her application."}],"answers":[{"tags":[],"owner":{"account_id":11084453,"reputation":211,"user_id":8138689,"display_name":"Satyajit Bhatt"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685555861,"creation_date":1685555861,"answer_id":76376172,"question_id":76375639,"body_markdown":"As you are using `@ComponentScan(&quot;com.acme.aspect&quot;)` then your MyAspect class should be in com.acme.aspect package. Because base-package means it will scan all the base package classes. Base package means main package all the classes should be in that package. ","title":"Is it possible to auto-detect an aspect from a custom lib/dependency without @Import and/or @ComponentScan?","body":"<p>As you are using <code>@ComponentScan(&quot;com.acme.aspect&quot;)</code> then your MyAspect class should be in com.acme.aspect package. Because base-package means it will scan all the base package classes. Base package means main package all the classes should be in that package.</p>\n"}],"owner":{"account_id":8613217,"reputation":111,"user_id":6926804,"display_name":"HienaKill"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687873038,"creation_date":1685550907,"question_id":76375639,"body_markdown":"I have the following scenario:\r\n- A lib project made with Spring Boot and Spring AOP, aspect code goes here;\r\n- A main project that will import my lib as a dependency, it&#39;s also a Spring Boot project.\r\n\r\nI&#39;ll like to know if it&#39;s possible for my main project to auto-detect the aspect from lib without any further configuration besides dependency inclusion and custom annotation usage?    \r\nI&#39;ve already tested the lib and it was succesfull.   \r\nIt was imported without any error, the custom annotation I&#39;ve created was recognized **but it does not trigger my aspect** without **@ComponentScan** and/or **@Import** addition...    \r\nWhen I have them on my main project, it works as a charm\r\n\r\nIs there any way to make it recognize/auto-detect my aspect, without using those annotations?\r\n\r\nNow some code from lib project:\r\n\r\n*pom*\r\n\r\n```xml\r\n         &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;\r\n            &lt;version&gt;2.2.8.RELEASE&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n```\r\n*Aspect*\r\n```java\r\n@Component\r\n@Aspect\r\npublic class MyAspect {\r\n    @Pointcut(&quot;@within(org.springframework.stereotype.Service)&quot;)\r\n    public void serviceClass() {}\r\n\r\n    @Around(&quot;@annotation(mylog) &amp;&amp; serviceClass()&quot;)\r\n    public void aroundExecution(ProceedingJoinPoint proceedingJoinPoint,\r\n                                             MyLog mylog) {\r\n    // some code\r\n    }\r\n}\r\n```\r\n\r\n*Configuration*\r\n```java\r\n@Configuration\r\n@ComponentScan(&quot;com.acme.aspect&quot;)\r\n@EnableAspectJAutoProxy\r\npublic class AopConfig {\r\n} \r\n```\r\n\r\n*Annotation*\r\n\r\n```java\r\n@Target(ElementType.METHOD)\r\n@Retention(RetentionPolicy.RUNTIME)\r\npublic @interface MyLog {}\r\n``` \r\n\r\n**EDIT**\r\n\r\n**Lib Project**\r\n\r\n```\r\ncom.acme\r\n        |------&gt; aspect\r\n        |------&gt; config\r\n        |------&gt; and so on...\r\n```\r\n\r\n**Main Project**\r\n\r\n```\r\ncom.acme.app\r\n        |------&gt; service\r\n        |------&gt; config\r\n        |------&gt; and so on...\r\n```\r\n\r\nThanks in advance!","title":"Is it possible to auto-detect an aspect from a custom lib/dependency without @Import and/or @ComponentScan?","body":"<p>I have the following scenario:</p>\n<ul>\n<li>A lib project made with Spring Boot and Spring AOP, aspect code goes here;</li>\n<li>A main project that will import my lib as a dependency, it's also a Spring Boot project.</li>\n</ul>\n<p>I'll like to know if it's possible for my main project to auto-detect the aspect from lib without any further configuration besides dependency inclusion and custom annotation usage?<br />\nI've already tested the lib and it was succesfull.<br />\nIt was imported without any error, the custom annotation I've created was recognized <strong>but it does not trigger my aspect</strong> without <strong>@ComponentScan</strong> and/or <strong>@Import</strong> addition...<br />\nWhen I have them on my main project, it works as a charm</p>\n<p>Is there any way to make it recognize/auto-detect my aspect, without using those annotations?</p>\n<p>Now some code from lib project:</p>\n<p><em>pom</em></p>\n<pre class=\"lang-xml prettyprint-override\"><code>         &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;\n            &lt;version&gt;2.2.8.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p><em>Aspect</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\n@Aspect\npublic class MyAspect {\n    @Pointcut(&quot;@within(org.springframework.stereotype.Service)&quot;)\n    public void serviceClass() {}\n\n    @Around(&quot;@annotation(mylog) &amp;&amp; serviceClass()&quot;)\n    public void aroundExecution(ProceedingJoinPoint proceedingJoinPoint,\n                                             MyLog mylog) {\n    // some code\n    }\n}\n</code></pre>\n<p><em>Configuration</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@ComponentScan(&quot;com.acme.aspect&quot;)\n@EnableAspectJAutoProxy\npublic class AopConfig {\n} \n</code></pre>\n<p><em>Annotation</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Target(ElementType.METHOD)\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface MyLog {}\n</code></pre>\n<p><strong>EDIT</strong></p>\n<p><strong>Lib Project</strong></p>\n<pre><code>com.acme\n        |------&gt; aspect\n        |------&gt; config\n        |------&gt; and so on...\n</code></pre>\n<p><strong>Main Project</strong></p>\n<pre><code>com.acme.app\n        |------&gt; service\n        |------&gt; config\n        |------&gt; and so on...\n</code></pre>\n<p>Thanks in advance!</p>\n"},{"tags":["java","eclipse","tomcat"],"answers":[{"tags":[],"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634819701,"creation_date":1634819701,"answer_id":69662084,"question_id":69656993,"body_markdown":"Don&#39;t use an installed copy of Tomcat. Your user does not have full ownership over its file tree, and the installation layout might have other unanticipated differences. Get a tar/zip file from Apache, or on more recent versions, let the wizard download Tomcat for you.","title":"tomcat eclipse error Could not load the Tomcat server configuration at ...The configuration may be corrupt or incomplete","body":"<p>Don't use an installed copy of Tomcat. Your user does not have full ownership over its file tree, and the installation layout might have other unanticipated differences. Get a tar/zip file from Apache, or on more recent versions, let the wizard download Tomcat for you.</p>\n"},{"tags":[],"owner":{"account_id":23978721,"reputation":1,"user_id":17966486,"display_name":"Ike Kennedy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687873020,"creation_date":1687873020,"answer_id":76565456,"question_id":69656993,"body_markdown":"Tomcat must have gotten corrupted. You&#39;ll have to uninstall tomcat from your system and reinstall it using a tar version if you still want to stick with the same Tomcat version that got corrupted-or go for a higher version that has your patch fixed","title":"tomcat eclipse error Could not load the Tomcat server configuration at ...The configuration may be corrupt or incomplete","body":"<p>Tomcat must have gotten corrupted. You'll have to uninstall tomcat from your system and reinstall it using a tar version if you still want to stick with the same Tomcat version that got corrupted-or go for a higher version that has your patch fixed</p>\n"}],"owner":{"account_id":20977717,"reputation":19,"user_id":15413289,"display_name":"yonnpa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":512,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1687873020,"creation_date":1634798200,"question_id":69656993,"body_markdown":"Can anyone give me some advice on this error?\r\nWhenever I try to define a new server on eclipse by using tomcat, I get this error:\r\n\r\n    Could not load the Tomcat server configuration at C:\\gwl\\web\\apache\\conf. The configuration may be corrupt or incomplete.\r\n\r\n\r\n[![this is the pic of the error][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/HVniX.png\r\n\r\n **My Tomcat version is 8.5** ","title":"tomcat eclipse error Could not load the Tomcat server configuration at ...The configuration may be corrupt or incomplete","body":"<p>Can anyone give me some advice on this error?\nWhenever I try to define a new server on eclipse by using tomcat, I get this error:</p>\n<pre><code>Could not load the Tomcat server configuration at C:\\gwl\\web\\apache\\conf. The configuration may be corrupt or incomplete.\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/HVniX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HVniX.png\" alt=\"this is the pic of the error\" /></a></p>\n<p><strong>My Tomcat version is 8.5</strong></p>\n"},{"tags":["java","sapjco3"],"answers":[{"tags":[],"owner":{"account_id":1513781,"reputation":151,"user_id":1415269,"display_name":"Carsten Erker"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1354968487,"creation_date":1354968487,"answer_id":13777308,"question_id":13643905,"body_markdown":"The SAP Java Connector internally uses a native library to connect to SAP. This native library is not the sapjco3.jar but the sapjco3.dll (on Windows systems). I.e. the dll file must be in a folder which is in your Java library path. \r\n\r\nThe latter is a Java system property, you can access it in your application by calling \r\n\r\n    System.getProperty(&quot;java.library.path&quot;)\r\n\r\nThen you can put the sapjco3.dll either into one of the folders which are already in your library path (on Windows e.g. something like C:\\WINNT\\system32) or the other way around set the library path to a specific folder by explicitly setting the library path:\r\n\r\n- in the application code by setting \r\n`System.setProperty(&quot;java.library.path&quot;, &quot;C:\\path\\to\\folder\\with\\dll\\&quot;)` \r\nbefore accessing the SAP JCo\r\n- or when starting Java with the command line argument \r\n`-Djava.library.path=C:\\path\\to\\folder\\with\\dll\\`\r\n\r\nSince putting the dll into a system specific folder like winnt\\system32 may have effects not only to your application but to others as well, it is recommended to add the folder containing the sapjco3.dll to your application&#39;s library path. The more flexible way is to specify it via the command line as shown above so you don&#39;t have it hard coded.","title":"Exception while connecting SAP through Java","body":"<p>The SAP Java Connector internally uses a native library to connect to SAP. This native library is not the sapjco3.jar but the sapjco3.dll (on Windows systems). I.e. the dll file must be in a folder which is in your Java library path. </p>\n\n<p>The latter is a Java system property, you can access it in your application by calling </p>\n\n<pre><code>System.getProperty(\"java.library.path\")\n</code></pre>\n\n<p>Then you can put the sapjco3.dll either into one of the folders which are already in your library path (on Windows e.g. something like C:\\WINNT\\system32) or the other way around set the library path to a specific folder by explicitly setting the library path:</p>\n\n<ul>\n<li>in the application code by setting \n<code>System.setProperty(\"java.library.path\", \"C:\\path\\to\\folder\\with\\dll\\\")</code> \nbefore accessing the SAP JCo</li>\n<li>or when starting Java with the command line argument \n<code>-Djava.library.path=C:\\path\\to\\folder\\with\\dll\\</code></li>\n</ul>\n\n<p>Since putting the dll into a system specific folder like winnt\\system32 may have effects not only to your application but to others as well, it is recommended to add the folder containing the sapjco3.dll to your application's library path. The more flexible way is to specify it via the command line as shown above so you don't have it hard coded.</p>\n"}],"owner":{"account_id":2097610,"reputation":31,"user_id":1866034,"display_name":"user1866034"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6130,"favorite_count":0,"down_vote_count":2,"up_vote_count":3,"answer_count":1,"score":1,"last_activity_date":1687872937,"creation_date":1354273266,"question_id":13643905,"body_markdown":"Can you please tell me the solution to fix this below issue ---\r\n\r\nThis exception I am getting while trying to connect SAP related files through Java class even though `sapjco3.jar` is in my library path. I tried this in Windows XP &amp; Windows Server 98.\r\n\r\n&gt; ```\r\n&gt; java.lang.UnsatisfiedLinkError: no sapjco3 in java.library.path\r\n&gt;\tat java.lang.ClassLoader.loadLibrary(ClassLoader.java:1682)\r\n&gt;\tat java.lang.Runtime.loadLibrary0(Runtime.java:823)\r\n&gt;\tat java.lang.System.loadLibrary(System.java:1030)\r\n&gt;\tat com.sap.conn.jco.rt.DefaultJCoRuntime.loadLibrary(DefaultJCoRuntime.java:441)\r\n&gt;\tat com.sap.conn.jco.rt.DefaultJCoRuntime.registerNativeMethods(DefaultJCoRuntime.java:307)\r\n&gt;\tat com.sap.conn.jco.rt.JCoRuntime.registerNatives(JCoRuntime.java:987)\r\n&gt;\tat com.sap.conn.rfc.driver.CpicDriver.&lt;clinit&gt;(CpicDriver.java:948)\r\n&gt;\tat com.sap.conn.rfc.engine.DefaultRfcRuntime.getVersion(DefaultRfcRuntime.java:43)\r\n&gt;\tat com.sap.conn.rfc.api.RfcApi.RfcGetVersion(RfcApi.java:259)\r\n&gt;\tat com.sap.conn.jco.rt.MiddlewareJavaRfc.&lt;clinit&gt;(MiddlewareJavaRfc.java:200)\r\n&gt;\tat com.sap.conn.jco.rt.DefaultJCoRuntime.initialize(DefaultJCoRuntime.java:73)\r\n&gt;\tat com.sap.conn.jco.rt.JCoRuntimeFactory.&lt;clinit&gt;(JCoRuntimeFactory.java:23)\r\n&gt;\tat com.sap.conn.jco.rt.RuntimeEnvironment.&lt;init&gt;(RuntimeEnvironment.java:40)\r\n&gt;\tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n&gt;\tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)\r\n&gt;\tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)\r\n&gt;\tat java.lang.reflect.Constructor.newInstance(Constructor.java:513)\r\n&gt;\tat java.lang.Class.newInstance0(Class.java:355)\r\n&gt;\tat java.lang.Class.newInstance(Class.java:308)\r\n&gt;\tat com.sap.conn.jco.ext.Environment.getInstance(Environment.java:121)\r\n&gt;\tat com.sap.conn.jco.ext.Environment.registerDestinationDataProvider(Environment.java:216)\r\n&gt;\tat de.vogella.sap.rfc.core.connection.Connection.&lt;init&gt;(Connection.java:37)\r\n&gt;\tat struct.actions.GestReservaSap.&lt;clinit&gt;(GestReservaSap.java:63)\r\n&gt;\tat eu.sony.com.moduloreservas.ReservasMainClass.main(ReservasMainClass.java:259)\r\n&gt; ```\r\n","title":"Exception while connecting SAP through Java","body":"<p>Can you please tell me the solution to fix this below issue ---</p>\n<p>This exception I am getting while trying to connect SAP related files through Java class even though <code>sapjco3.jar</code> is in my library path. I tried this in Windows XP &amp; Windows Server 98.</p>\n<blockquote>\n<pre><code>java.lang.UnsatisfiedLinkError: no sapjco3 in java.library.path\n  at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1682)\n  at java.lang.Runtime.loadLibrary0(Runtime.java:823)\n  at java.lang.System.loadLibrary(System.java:1030)\n  at com.sap.conn.jco.rt.DefaultJCoRuntime.loadLibrary(DefaultJCoRuntime.java:441)\n  at com.sap.conn.jco.rt.DefaultJCoRuntime.registerNativeMethods(DefaultJCoRuntime.java:307)\n  at com.sap.conn.jco.rt.JCoRuntime.registerNatives(JCoRuntime.java:987)\n  at com.sap.conn.rfc.driver.CpicDriver.&lt;clinit&gt;(CpicDriver.java:948)\n  at com.sap.conn.rfc.engine.DefaultRfcRuntime.getVersion(DefaultRfcRuntime.java:43)\n  at com.sap.conn.rfc.api.RfcApi.RfcGetVersion(RfcApi.java:259)\n  at com.sap.conn.jco.rt.MiddlewareJavaRfc.&lt;clinit&gt;(MiddlewareJavaRfc.java:200)\n  at com.sap.conn.jco.rt.DefaultJCoRuntime.initialize(DefaultJCoRuntime.java:73)\n  at com.sap.conn.jco.rt.JCoRuntimeFactory.&lt;clinit&gt;(JCoRuntimeFactory.java:23)\n  at com.sap.conn.jco.rt.RuntimeEnvironment.&lt;init&gt;(RuntimeEnvironment.java:40)\n  at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n  at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)\n  at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)\n  at java.lang.reflect.Constructor.newInstance(Constructor.java:513)\n  at java.lang.Class.newInstance0(Class.java:355)\n  at java.lang.Class.newInstance(Class.java:308)\n  at com.sap.conn.jco.ext.Environment.getInstance(Environment.java:121)\n  at com.sap.conn.jco.ext.Environment.registerDestinationDataProvider(Environment.java:216)\n  at de.vogella.sap.rfc.core.connection.Connection.&lt;init&gt;(Connection.java:37)\n  at struct.actions.GestReservaSap.&lt;clinit&gt;(GestReservaSap.java:63)\n  at eu.sony.com.moduloreservas.ReservasMainClass.main(ReservasMainClass.java:259)\n</code></pre>\n</blockquote>\n"},{"tags":["java","android","android-gradle-plugin","compiler-warnings"],"comments":[{"owner":{"account_id":5360271,"reputation":4735,"user_id":4271755,"accept_rate":100,"display_name":"Invisible Arrow"},"score":0,"creation_date":1421339765,"post_id":27968193,"comment_id":44329322,"body_markdown":"I can confirm that it is possible in Gradle as I use it. But maybe there&#39;s something different in the Android Gradle plugin.","body":"I can confirm that it is possible in Gradle as I use it. But maybe there&#39;s something different in the Android Gradle plugin."},{"owner":{"account_id":1111280,"reputation":6531,"user_id":1101692,"accept_rate":89,"display_name":"Shark"},"score":0,"creation_date":1687874962,"post_id":27968193,"comment_id":134996018,"body_markdown":"Why not `options.compilerArgs.add(&quot;-Xlint:all -Werror&quot;)` and see where that gets you?","body":"Why not <code>options.compilerArgs.add(&quot;-Xlint:all -Werror&quot;)</code> and see where that gets you?"}],"answers":[{"tags":[],"owner":{"account_id":905775,"reputation":4960,"user_id":940720,"accept_rate":100,"display_name":"gio"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1421392955,"creation_date":1421353663,"answer_id":27972390,"question_id":27968193,"body_markdown":"**javac lint**\r\n\r\n\t// Top-level build file where you can add configuration options common to all sub-projects/modules.\r\n\r\n\tbuildscript {\r\n\t\trepositories {\r\n\t\t\tjcenter()\r\n\t\t}\r\n\t\tdependencies {\r\n\t\t\tclasspath &#39;com.android.tools.build:gradle:1.0.0&#39;\r\n\r\n\t\t\t// NOTE: Do not place your application dependencies here; they belong\r\n\t\t\t// in the individual module build.gradle files\r\n\t\t}\r\n\t}\r\n\r\n\tallprojects {\r\n\t\trepositories {\r\n\t\t\tjcenter()\r\n\t\t}\r\n\t\tgradle.projectsEvaluated {\r\n\t\t\ttasks.withType(JavaCompile) {\r\n\t\t\t\toptions.compilerArgs &lt;&lt; &quot;-Xlint:all&quot; &lt;&lt; &quot;-Werror&quot;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\nresult would be next\r\n\r\n    ....\r\n\t:app:compileDebugJava                 \r\n\tD:\\Android\\stack-overflow\\ui\\app\\src\\main\\java\\com\\tivogi\\ui\\activity\\MainActivity.java:22: warning: [deprecation] getLastNonConfigurationInstance() in Activity has been deprecated\r\n\t\t\tgetLastNonConfigurationInstance();\r\n\t\t\t^                             \r\n\terror: warnings found and -Werror specified\r\n\t1 error                               \r\n\t1 warning                             \r\n\t:app:compileDebugJava FAILED          \r\n\t\t\t\t  \r\n\tFAILURE: Build failed with an exception.\r\n\t\t\t\t  \r\n\t* What went wrong:\r\n\tExecution failed for task &#39;:app:compileDebugJava&#39;.\r\n\t&gt; Compilation failed; see the compiler error output for details.\r\n\t\t\t\t  \r\n\t* Try:        \r\n\tRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.\r\n\t\t\t\t  \r\n\tBUILD FAILED  \r\n\t\t\t\t  \r\n\tTotal time: 2.421 secs\r\n\r\n**Android Lint**\r\n\r\nFrom Android [Lint support][1] at Gradle Plugin User Guide\r\n\r\n    android {\r\n        lintOptions {\r\n            ...\r\n            // if true, treat all warnings as errors\r\n            warningsAsErrors true\r\n            ...\r\n        }\r\n    }\r\n\r\n  [1]: http://tools.android.com/tech-docs/new-build-system/user-guide#TOC-Lint-support","title":"Is it possible to enable -Werror for JavaCompile in gradle?","body":"<p><strong>javac lint</strong></p>\n\n<pre><code>// Top-level build file where you can add configuration options common to all sub-projects/modules.\n\nbuildscript {\n    repositories {\n        jcenter()\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:1.0.0'\n\n        // NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n    }\n}\n\nallprojects {\n    repositories {\n        jcenter()\n    }\n    gradle.projectsEvaluated {\n        tasks.withType(JavaCompile) {\n            options.compilerArgs &lt;&lt; \"-Xlint:all\" &lt;&lt; \"-Werror\"\n        }\n    }\n}\n</code></pre>\n\n<p>result would be next</p>\n\n<pre><code>....\n:app:compileDebugJava                 \nD:\\Android\\stack-overflow\\ui\\app\\src\\main\\java\\com\\tivogi\\ui\\activity\\MainActivity.java:22: warning: [deprecation] getLastNonConfigurationInstance() in Activity has been deprecated\n        getLastNonConfigurationInstance();\n        ^                             \nerror: warnings found and -Werror specified\n1 error                               \n1 warning                             \n:app:compileDebugJava FAILED          \n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':app:compileDebugJava'.\n&gt; Compilation failed; see the compiler error output for details.\n\n* Try:        \nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.\n\nBUILD FAILED  \n\nTotal time: 2.421 secs\n</code></pre>\n\n<p><strong>Android Lint</strong></p>\n\n<p>From Android <a href=\"http://tools.android.com/tech-docs/new-build-system/user-guide#TOC-Lint-support\" rel=\"noreferrer\">Lint support</a> at Gradle Plugin User Guide</p>\n\n<pre><code>android {\n    lintOptions {\n        ...\n        // if true, treat all warnings as errors\n        warningsAsErrors true\n        ...\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9725840,"reputation":1489,"user_id":7212836,"display_name":"Evgenii Vorobei"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661085157,"creation_date":1661085157,"answer_id":73434429,"question_id":27968193,"body_markdown":"For googlers:\r\n\r\nIf you want fail on kotlin warnings, add to the root `build.gradle.kts`:\r\n\r\n```kotlin\r\nallprojects {\r\n    project.tasks.withType&lt;org.jetbrains.kotlin.gradle.tasks.KotlinCompile&gt; {\r\n        kotlinOptions {\r\n            jvmTarget = JavaVersion.VERSION_11.toString()\r\n            allWarningsAsErrors = true\r\n        }\r\n    }\r\n}\r\n```","title":"Is it possible to enable -Werror for JavaCompile in gradle?","body":"<p>For googlers:</p>\n<p>If you want fail on kotlin warnings, add to the root <code>build.gradle.kts</code>:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>allprojects {\n    project.tasks.withType&lt;org.jetbrains.kotlin.gradle.tasks.KotlinCompile&gt; {\n        kotlinOptions {\n            jvmTarget = JavaVersion.VERSION_11.toString()\n            allWarningsAsErrors = true\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":58244,"reputation":1134,"user_id":174433,"accept_rate":0,"display_name":"Mark"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12664,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"answer_count":2,"score":11,"last_activity_date":1687872860,"creation_date":1421339304,"question_id":27968193,"body_markdown":"\r\nI have an Android project set up in Gradle using the `com.android.application` plugin. \r\nI want javac lint warnings to trigger errors instead of just warnings.\r\n\r\nThe following works just fine for warnings:\r\n\r\n```lang-groovy\r\ntasks.withType(JavaCompile).all {\r\n    options.compilerArgs.add(&quot;-Xlint:all&quot;)\r\n}\r\n```\r\nHowever, adding `-Werror` to it:\r\n\r\n```lang-groovy\r\ntasks.withType(JavaCompile).all {\r\n    options.compilerArgs.add(&quot;-Xlint:all&quot;)\r\n    options.compilerArgs.add(&quot;-Werror&quot;)\r\n}\r\n```\r\n\r\ncauses the build to completely fail (not in the right way):\r\n\r\n```stacktrace\r\nFAILURE: Build failed with an exception.\r\n\r\nWhat went wrong: Execution failed for task &#39;:app:compileDebugJava&#39;.\r\njava.lang.NullPointerException\r\n\r\nTry: Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.\r\n\r\nBUILD FAILED\r\n\r\nCalling gradle with --stacktrace shows:\r\n\r\nException is: org.gradle.api.tasks.TaskExecutionException: Execution failed for task &#39;:app:compileDebugJava&#39;.\r\n  at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:69)\r\n\tat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:46)\r\n\tat org.gradle.api.internal.tasks.execution.PostExecutionAnalysisTaskExecuter.execute(PostExecutionAnalysisTaskExecuter.java:35)\r\n\tat org.gradle.api.internal.tasks.execution.SkipUpToDateTaskExecuter.execute(SkipUpToDateTaskExecuter.java:64)\r\n\tat org.gradle.api.internal.tasks.execution.ValidatingTaskExecuter.execute(ValidatingTaskExecuter.java:58)\r\n\tat org.gradle.api.internal.tasks.execution.SkipEmptySourceFilesTaskExecuter.execute(SkipEmptySourceFilesTaskExecuter.java:42)\r\n\tat org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:52)\r\n\tat org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:53)\r\n\tat org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter.execute(ExecuteAtMostOnceTaskExecuter.java:43)\r\n\tat org.gradle.api.internal.AbstractTask.executeWithoutThrowingTaskFailure(AbstractTask.java:305)\r\n\tat org.gradle.execution.taskgraph.AbstractTaskPlanExecutor$TaskExecutorWorker.executeTask(AbstractTaskPlanExecutor.java:79)\r\n\tat org.gradle.execution.taskgraph.AbstractTaskPlanExecutor$TaskExecutorWorker.processTask(AbstractTaskPlanExecutor.java:63)\r\n\tat org.gradle.execution.taskgraph.AbstractTaskPlanExecutor$TaskExecutorWorker.run(AbstractTaskPlanExecutor.java:51)\r\n\tat org.gradle.execution.taskgraph.DefaultTaskPlanExecutor.process(DefaultTaskPlanExecutor.java:23)\r\n\tat org.gradle.execution.taskgraph.DefaultTaskGraphExecuter.execute(DefaultTaskGraphExecuter.java:88)\r\n\tat org.gradle.execution.SelectedTaskExecutionAction.execute(SelectedTaskExecutionAction.java:29)\r\n\tat org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:62)\r\n\tat org.gradle.execution.DefaultBuildExecuter.access$200(DefaultBuildExecuter.java:23)\r\n\tat org.gradle.execution.DefaultBuildExecuter$2.proceed(DefaultBuildExecuter.java:68)\r\n\tat org.gradle.execution.DryRunBuildExecutionAction.execute(DryRunBuildExecutionAction.java:32)\r\n\tat org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:62)\r\n\tat org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:55)\r\n\tat org.gradle.initialization.DefaultGradleLauncher.doBuildStages(DefaultGradleLauncher.java:149)\r\n\tat org.gradle.initialization.DefaultGradleLauncher.doBuild(DefaultGradleLauncher.java:106)\r\n\tat org.gradle.initialization.DefaultGradleLauncher.run(DefaultGradleLauncher.java:86)\r\n\tat org.gradle.launcher.exec.InProcessBuildActionExecuter$DefaultBuildController.run(InProcessBuildActionExecuter.java:80)\r\n\tat org.gradle.launcher.cli.ExecuteBuildAction.run(ExecuteBuildAction.java:33)\r\n\tat org.gradle.launcher.cli.ExecuteBuildAction.run(ExecuteBuildAction.java:24)\r\n\tat org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:36)\r\n\tat org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:26)\r\n\tat org.gradle.launcher.cli.RunBuildAction.run(RunBuildAction.java:51)\r\n\tat org.gradle.internal.Actions$RunnableActionAdapter.execute(Actions.java:171)\r\n\tat org.gradle.launcher.cli.CommandLineActionFactory$ParseAndBuildAction.execute(CommandLineActionFactory.java:237)\r\n\tat org.gradle.launcher.cli.CommandLineActionFactory$ParseAndBuildAction.execute(CommandLineActionFactory.java:210)\r\n\tat org.gradle.launcher.cli.JavaRuntimeValidationAction.execute(JavaRuntimeValidationAction.java:35)\r\n\tat org.gradle.launcher.cli.JavaRuntimeValidationAction.execute(JavaRuntimeValidationAction.java:24)\r\n\tat org.gradle.launcher.cli.CommandLineActionFactory$WithLogging.execute(CommandLineActionFactory.java:206)\r\n\tat org.gradle.launcher.cli.CommandLineActionFactory$WithLogging.execute(CommandLineActionFactory.java:169)\r\n\tat org.gradle.launcher.cli.ExceptionReportingAction.execute(ExceptionReportingAction.java:33)\r\n\tat org.gradle.launcher.cli.ExceptionReportingAction.execute(ExceptionReportingAction.java:22)\r\n\tat org.gradle.launcher.Main.doAction(Main.java:33)\r\n\tat org.gradle.launcher.bootstrap.EntryPoint.run(EntryPoint.java:45)\r\n\tat org.gradle.launcher.bootstrap.ProcessBootstrap.runNoExit(ProcessBootstrap.java:54)\r\n\tat org.gradle.launcher.bootstrap.ProcessBootstrap.run(ProcessBootstrap.java:35)\r\n\tat org.gradle.launcher.GradleMain.main(GradleMain.java:23) \r\n\tCaused by: java.lang.RuntimeException: java.lang.NullPointerException\r\n    at com.sun.tools.javac.main.Main.compile(Main.java:469)\r\n    at com.sun.tools.javac.api.JavacTaskImpl.call(JavacTaskImpl.java:132)\r\n    at org.gradle.api.internal.tasks.compile.JdkJavaCompiler.execute(JdkJavaCompiler.java:42)\r\n    at org.gradle.api.internal.tasks.compile.JdkJavaCompiler.execute(JdkJavaCompiler.java:35)\r\n    at org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.delegateAndHandleErrors(NormalizingJavaCompiler.java:97)\r\n    at org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.execute(NormalizingJavaCompiler.java:50)\r\n    at org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.execute(NormalizingJavaCompiler.java:36)\r\n    at org.gradle.api.internal.tasks.compile.CleaningJavaCompilerSupport.execute(CleaningJavaCompilerSupport.java:34)\r\n    at org.gradle.api.internal.tasks.compile.CleaningJavaCompilerSupport.execute(CleaningJavaCompilerSupport.java:25)\r\n    at org.gradle.api.tasks.compile.JavaCompile.performCompilation(JavaCompile.java:158)\r\n    at org.gradle.api.tasks.compile.JavaCompile.compile(JavaCompile.java:138)\r\n    at org.gradle.api.tasks.compile.JavaCompile.compile(JavaCompile.java:92)\r\n    at org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:63)\r\n    at org.gradle.api.internal.project.taskfactory.AnnotationProcessingTaskFactory$IncrementalTaskAction.doExecute(AnnotationProcessingTaskFactory.java:235)\r\n    at org.gradle.api.internal.project.taskfactory.AnnotationProcessingTaskFactory$StandardTaskAction.execute(AnnotationProcessingTaskFactory.java:211)\r\n    at org.gradle.api.internal.project.taskfactory.AnnotationProcessingTaskFactory$IncrementalTaskAction.execute(AnnotationProcessingTaskFactory.java:222)\r\n    at org.gradle.api.internal.project.taskfactory.AnnotationProcessingTaskFactory$StandardTaskAction.execute(AnnotationProcessingTaskFactory.java:200)\r\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeAction(ExecuteActionsTaskExecuter.java:80)\r\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:61)\r\n    ... 44 more\r\n\tCaused by: java.lang.NullPointerException\r\n    at dagger.internal.codegen.Util.getAnnotation(Util.java:192)\r\n    at dagger.internal.codegen.GraphAnalysisProcessor.process(GraphAnalysisProcessor.java:105)\r\n    at com.sun.tools.javac.processing.JavacProcessingEnvironment.callProcessor(JavacProcessingEnvironment.java:793)\r\n    at com.sun.tools.javac.processing.JavacProcessingEnvironment.access$200(JavacProcessingEnvironment.java:97)\r\n    at com.sun.tools.javac.processing.JavacProcessingEnvironment$DiscoveredProcessors$ProcessorStateIterator.runContributingProcs(JavacProcessingEnvironment.java:644)\r\n    at com.sun.tools.javac.processing.JavacProcessingEnvironment$Round.run(JavacProcessingEnvironment.java:1027)\r\n    at com.sun.tools.javac.processing.JavacProcessingEnvironment.doProcessing(JavacProcessingEnvironment.java:1185)\r\n    at com.sun.tools.javac.main.JavaCompiler.processAnnotations(JavaCompiler.java:1108)\r\n    at com.sun.tools.javac.main.JavaCompiler.compile(JavaCompiler.java:824)\r\n    at com.sun.tools.javac.main.Main.compile(Main.java:439) \t... 62 more\r\n```\r\n\r\nIs adding `-Werror` not supported?\r\n","title":"Is it possible to enable -Werror for JavaCompile in gradle?","body":"<p>I have an Android project set up in Gradle using the <code>com.android.application</code> plugin.\nI want javac lint warnings to trigger errors instead of just warnings.</p>\n<p>The following works just fine for warnings:</p>\n<pre class=\"lang-groovy prettyprint-override\"><code>tasks.withType(JavaCompile).all {\n    options.compilerArgs.add(&quot;-Xlint:all&quot;)\n}\n</code></pre>\n<p>However, adding <code>-Werror</code> to it:</p>\n<pre class=\"lang-groovy prettyprint-override\"><code>tasks.withType(JavaCompile).all {\n    options.compilerArgs.add(&quot;-Xlint:all&quot;)\n    options.compilerArgs.add(&quot;-Werror&quot;)\n}\n</code></pre>\n<p>causes the build to completely fail (not in the right way):</p>\n<pre><code>FAILURE: Build failed with an exception.\n\nWhat went wrong: Execution failed for task ':app:compileDebugJava'.\njava.lang.NullPointerException\n\nTry: Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.\n\nBUILD FAILED\n\nCalling gradle with --stacktrace shows:\n\nException is: org.gradle.api.tasks.TaskExecutionException: Execution failed for task ':app:compileDebugJava'.\n  at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:69)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:46)\n    at org.gradle.api.internal.tasks.execution.PostExecutionAnalysisTaskExecuter.execute(PostExecutionAnalysisTaskExecuter.java:35)\n    at org.gradle.api.internal.tasks.execution.SkipUpToDateTaskExecuter.execute(SkipUpToDateTaskExecuter.java:64)\n    at org.gradle.api.internal.tasks.execution.ValidatingTaskExecuter.execute(ValidatingTaskExecuter.java:58)\n    at org.gradle.api.internal.tasks.execution.SkipEmptySourceFilesTaskExecuter.execute(SkipEmptySourceFilesTaskExecuter.java:42)\n    at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:52)\n    at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:53)\n    at org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter.execute(ExecuteAtMostOnceTaskExecuter.java:43)\n    at org.gradle.api.internal.AbstractTask.executeWithoutThrowingTaskFailure(AbstractTask.java:305)\n    at org.gradle.execution.taskgraph.AbstractTaskPlanExecutor$TaskExecutorWorker.executeTask(AbstractTaskPlanExecutor.java:79)\n    at org.gradle.execution.taskgraph.AbstractTaskPlanExecutor$TaskExecutorWorker.processTask(AbstractTaskPlanExecutor.java:63)\n    at org.gradle.execution.taskgraph.AbstractTaskPlanExecutor$TaskExecutorWorker.run(AbstractTaskPlanExecutor.java:51)\n    at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor.process(DefaultTaskPlanExecutor.java:23)\n    at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter.execute(DefaultTaskGraphExecuter.java:88)\n    at org.gradle.execution.SelectedTaskExecutionAction.execute(SelectedTaskExecutionAction.java:29)\n    at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:62)\n    at org.gradle.execution.DefaultBuildExecuter.access$200(DefaultBuildExecuter.java:23)\n    at org.gradle.execution.DefaultBuildExecuter$2.proceed(DefaultBuildExecuter.java:68)\n    at org.gradle.execution.DryRunBuildExecutionAction.execute(DryRunBuildExecutionAction.java:32)\n    at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:62)\n    at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:55)\n    at org.gradle.initialization.DefaultGradleLauncher.doBuildStages(DefaultGradleLauncher.java:149)\n    at org.gradle.initialization.DefaultGradleLauncher.doBuild(DefaultGradleLauncher.java:106)\n    at org.gradle.initialization.DefaultGradleLauncher.run(DefaultGradleLauncher.java:86)\n    at org.gradle.launcher.exec.InProcessBuildActionExecuter$DefaultBuildController.run(InProcessBuildActionExecuter.java:80)\n    at org.gradle.launcher.cli.ExecuteBuildAction.run(ExecuteBuildAction.java:33)\n    at org.gradle.launcher.cli.ExecuteBuildAction.run(ExecuteBuildAction.java:24)\n    at org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:36)\n    at org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:26)\n    at org.gradle.launcher.cli.RunBuildAction.run(RunBuildAction.java:51)\n    at org.gradle.internal.Actions$RunnableActionAdapter.execute(Actions.java:171)\n    at org.gradle.launcher.cli.CommandLineActionFactory$ParseAndBuildAction.execute(CommandLineActionFactory.java:237)\n    at org.gradle.launcher.cli.CommandLineActionFactory$ParseAndBuildAction.execute(CommandLineActionFactory.java:210)\n    at org.gradle.launcher.cli.JavaRuntimeValidationAction.execute(JavaRuntimeValidationAction.java:35)\n    at org.gradle.launcher.cli.JavaRuntimeValidationAction.execute(JavaRuntimeValidationAction.java:24)\n    at org.gradle.launcher.cli.CommandLineActionFactory$WithLogging.execute(CommandLineActionFactory.java:206)\n    at org.gradle.launcher.cli.CommandLineActionFactory$WithLogging.execute(CommandLineActionFactory.java:169)\n    at org.gradle.launcher.cli.ExceptionReportingAction.execute(ExceptionReportingAction.java:33)\n    at org.gradle.launcher.cli.ExceptionReportingAction.execute(ExceptionReportingAction.java:22)\n    at org.gradle.launcher.Main.doAction(Main.java:33)\n    at org.gradle.launcher.bootstrap.EntryPoint.run(EntryPoint.java:45)\n    at org.gradle.launcher.bootstrap.ProcessBootstrap.runNoExit(ProcessBootstrap.java:54)\n    at org.gradle.launcher.bootstrap.ProcessBootstrap.run(ProcessBootstrap.java:35)\n    at org.gradle.launcher.GradleMain.main(GradleMain.java:23) \n    Caused by: java.lang.RuntimeException: java.lang.NullPointerException\n    at com.sun.tools.javac.main.Main.compile(Main.java:469)\n    at com.sun.tools.javac.api.JavacTaskImpl.call(JavacTaskImpl.java:132)\n    at org.gradle.api.internal.tasks.compile.JdkJavaCompiler.execute(JdkJavaCompiler.java:42)\n    at org.gradle.api.internal.tasks.compile.JdkJavaCompiler.execute(JdkJavaCompiler.java:35)\n    at org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.delegateAndHandleErrors(NormalizingJavaCompiler.java:97)\n    at org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.execute(NormalizingJavaCompiler.java:50)\n    at org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.execute(NormalizingJavaCompiler.java:36)\n    at org.gradle.api.internal.tasks.compile.CleaningJavaCompilerSupport.execute(CleaningJavaCompilerSupport.java:34)\n    at org.gradle.api.internal.tasks.compile.CleaningJavaCompilerSupport.execute(CleaningJavaCompilerSupport.java:25)\n    at org.gradle.api.tasks.compile.JavaCompile.performCompilation(JavaCompile.java:158)\n    at org.gradle.api.tasks.compile.JavaCompile.compile(JavaCompile.java:138)\n    at org.gradle.api.tasks.compile.JavaCompile.compile(JavaCompile.java:92)\n    at org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:63)\n    at org.gradle.api.internal.project.taskfactory.AnnotationProcessingTaskFactory$IncrementalTaskAction.doExecute(AnnotationProcessingTaskFactory.java:235)\n    at org.gradle.api.internal.project.taskfactory.AnnotationProcessingTaskFactory$StandardTaskAction.execute(AnnotationProcessingTaskFactory.java:211)\n    at org.gradle.api.internal.project.taskfactory.AnnotationProcessingTaskFactory$IncrementalTaskAction.execute(AnnotationProcessingTaskFactory.java:222)\n    at org.gradle.api.internal.project.taskfactory.AnnotationProcessingTaskFactory$StandardTaskAction.execute(AnnotationProcessingTaskFactory.java:200)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeAction(ExecuteActionsTaskExecuter.java:80)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:61)\n    ... 44 more\n    Caused by: java.lang.NullPointerException\n    at dagger.internal.codegen.Util.getAnnotation(Util.java:192)\n    at dagger.internal.codegen.GraphAnalysisProcessor.process(GraphAnalysisProcessor.java:105)\n    at com.sun.tools.javac.processing.JavacProcessingEnvironment.callProcessor(JavacProcessingEnvironment.java:793)\n    at com.sun.tools.javac.processing.JavacProcessingEnvironment.access$200(JavacProcessingEnvironment.java:97)\n    at com.sun.tools.javac.processing.JavacProcessingEnvironment$DiscoveredProcessors$ProcessorStateIterator.runContributingProcs(JavacProcessingEnvironment.java:644)\n    at com.sun.tools.javac.processing.JavacProcessingEnvironment$Round.run(JavacProcessingEnvironment.java:1027)\n    at com.sun.tools.javac.processing.JavacProcessingEnvironment.doProcessing(JavacProcessingEnvironment.java:1185)\n    at com.sun.tools.javac.main.JavaCompiler.processAnnotations(JavaCompiler.java:1108)\n    at com.sun.tools.javac.main.JavaCompiler.compile(JavaCompiler.java:824)\n    at com.sun.tools.javac.main.Main.compile(Main.java:439)     ... 62 more\n</code></pre>\n<p>Is adding <code>-Werror</code> not supported?</p>\n"},{"tags":["java","while-loop","do-while"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":2,"creation_date":1687865791,"post_id":76564434,"comment_id":134993597,"body_markdown":"Once your program leaves the do/while loop, it will never return to it. You want that loop to encompass your whole program.","body":"Once your program leaves the do/while loop, it will never return to it. You want that loop to encompass your whole program."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1687865834,"post_id":76564434,"comment_id":134993600,"body_markdown":"Stepping through your program with the debugger will help you understand what&#39;s happening.","body":"Stepping through your program with the debugger will help you understand what&#39;s happening."},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1687870890,"post_id":76564434,"comment_id":134994879,"body_markdown":"why have four choices that just all do nextInt() ?","body":"why have four choices that just all do nextInt() ?"}],"answers":[{"tags":[],"owner":{"account_id":23832769,"reputation":84,"user_id":17838848,"display_name":"Zero"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687872752,"creation_date":1687872752,"answer_id":76565411,"question_id":76564434,"body_markdown":"You have a loop which keeps asking for an input as long as the input is 0, but you don&#39;t have any if condition that will run the loop again when you&#39;re typing 0 later. Like this, you cannot run the loop again by typing 0. Typing 0 after doing one of the calculation will have the same effect as typing any other number greater than 5 or less than 1.\r\nIf you want to run the main menu loop when typing 0, you should add an if-condition for this, for example:\r\n\r\n    if (pick == 0) {\r\n        //the main menu loop\r\n    }\r\n\r\nAlso, since there comes nothing after the if-else-block, the program will end after you do the next input. You have to loop the program if you want it to run more than once. I suggest turning the do-while-loop into a while-loop and then running the whole code inside a while (true) - loop:\r\n\r\n    public class Main {\r\n\r\n    public static void main(String[] args) {\r\n\r\n        Scanner scanner = new Scanner(System.in);\r\n\r\n        String pick_String;\r\n        int pick = 0;\r\n    \r\n        while (true) {\r\n     \r\n            if (pick == 0) {\r\n                while (pick==0) {\r\n                    pick_String = JOptionPane.showInputDialog(&quot;Which tool would you like to use? (Type just the number) &quot; +\r\n                    &quot;\\n1.Basic Calculator&quot; +\r\n                    &quot;\\n2.Solve a quadratic equation&quot; +\r\n                    &quot;\\n3.Find a side in a right triangle&quot; +\r\n                    &quot;\\n4.Find the distance between two points in a coordinate system&quot; +\r\n                    &quot;\\n5.Exit&quot;);\r\n                    pick = Integer.parseInt(pick_String);\r\n                }\r\n            }\r\n\r\n            if (pick == 1) {\r\n                //code for the basic calculator\r\n                System.out.println(&quot;If you want to get back to the menu type 0&quot;);\r\n                pick = scanner.nextInt();\r\n            } else if (pick == 2) {\r\n                //code for solving a the quadratic equation\r\n                System.out.println(&quot;If you want to get back to the menu type 0&quot;);\r\n                pick = scanner.nextInt();\r\n            } else if (pick == 3) {\r\n                //code for finding a side in a right triangle\r\n                System.out.println(&quot;If you want to get back to the menu type 0&quot;);\r\n                pick = scanner.nextInt();\r\n            } else if (pick == 4) {\r\n                //code for finding the distance between two points in a coordinate system\r\n                System.out.println(&quot;If you want to get back to the menu type 0&quot;);\r\n                pick = scanner.nextInt();\r\n            } else if (pick == 5) {\r\n                System.exit(0); // this will exit while(true) along with the program\r\n            }\r\n        \r\n        \r\n        }\r\n    \r\n    }\r\n\r\n","title":"Looping back to the start of a java program after executing a block of code","body":"<p>You have a loop which keeps asking for an input as long as the input is 0, but you don't have any if condition that will run the loop again when you're typing 0 later. Like this, you cannot run the loop again by typing 0. Typing 0 after doing one of the calculation will have the same effect as typing any other number greater than 5 or less than 1.\nIf you want to run the main menu loop when typing 0, you should add an if-condition for this, for example:</p>\n<pre><code>if (pick == 0) {\n    //the main menu loop\n}\n</code></pre>\n<p>Also, since there comes nothing after the if-else-block, the program will end after you do the next input. You have to loop the program if you want it to run more than once. I suggest turning the do-while-loop into a while-loop and then running the whole code inside a while (true) - loop:</p>\n<pre><code>public class Main {\n\npublic static void main(String[] args) {\n\n    Scanner scanner = new Scanner(System.in);\n\n    String pick_String;\n    int pick = 0;\n\n    while (true) {\n \n        if (pick == 0) {\n            while (pick==0) {\n                pick_String = JOptionPane.showInputDialog(&quot;Which tool would you like to use? (Type just the number) &quot; +\n                &quot;\\n1.Basic Calculator&quot; +\n                &quot;\\n2.Solve a quadratic equation&quot; +\n                &quot;\\n3.Find a side in a right triangle&quot; +\n                &quot;\\n4.Find the distance between two points in a coordinate system&quot; +\n                &quot;\\n5.Exit&quot;);\n                pick = Integer.parseInt(pick_String);\n            }\n        }\n\n        if (pick == 1) {\n            //code for the basic calculator\n            System.out.println(&quot;If you want to get back to the menu type 0&quot;);\n            pick = scanner.nextInt();\n        } else if (pick == 2) {\n            //code for solving a the quadratic equation\n            System.out.println(&quot;If you want to get back to the menu type 0&quot;);\n            pick = scanner.nextInt();\n        } else if (pick == 3) {\n            //code for finding a side in a right triangle\n            System.out.println(&quot;If you want to get back to the menu type 0&quot;);\n            pick = scanner.nextInt();\n        } else if (pick == 4) {\n            //code for finding the distance between two points in a coordinate system\n            System.out.println(&quot;If you want to get back to the menu type 0&quot;);\n            pick = scanner.nextInt();\n        } else if (pick == 5) {\n            System.exit(0); // this will exit while(true) along with the program\n        }\n    \n    \n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":28521719,"reputation":1,"user_id":21830337,"display_name":"Dimitar Todorov"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1687872752,"creation_date":1687865626,"question_id":76564434,"body_markdown":"I wrote a Java program, more specifically a basic calculator. I want to return to the &quot;main menu&quot;, by asking the user to type &quot;0&quot; after solving the math problem. The solution with which I came up with seems to not be working how I want it to be. The concept of the returning is there is a variable &quot;pick&quot; which is at the start of the program and it is not assigned anything yet. The program asks the user what operation he would like to perform, each operation is assigned a number this whole thing is executed with the help of a while/do loop. The loop asks the user what operation they would like to perform while &quot;pick&quot; is 0. If for example, the user picks operation number 2 which is solving a quadratic equation, the value of the variable &quot;pick&quot; changes to 2 and there is an if which is activated if the variable pick is equal to 2 and the block of code which solves the quadratic equation starts executing. After the quadratic equation is solved the program asks the user if they want to get back to the &quot;main menu&quot; by pressing 0 I thought that if the value of the variable &quot;pick&quot; is again 0 the program would start all over again but it doesn&#39;t seem to which is the reason I&#39;m writing this.\r\n\r\nThis is the code: \r\n```\r\nimport java.util.Objects;\r\nimport java.util.Scanner;\r\nimport javax.swing.JOptionPane;\r\n\r\npublic class Main {\r\n\r\n    public static void main(String[] args) {\r\n\r\n        Scanner scanner = new Scanner(System.in);\r\n\r\n        String pick_String;\r\n        int pick;\r\n        do {\r\n            pick_String = JOptionPane.showInputDialog(&quot;Which tool would you like to use? (Type just the number) &quot; +\r\n                    &quot;\\n1.Basic Calculator&quot; +\r\n                    &quot;\\n2.Solve a quadratic equation&quot; +\r\n                    &quot;\\n3.Find a side in a right triangle&quot; +\r\n                    &quot;\\n4.Find the distance between two points in a coordinate system&quot; +\r\n                    &quot;\\n5.Exit&quot;\r\n            );\r\n            pick = Integer.parseInt(pick_String);\r\n        } while (pick == 0);\r\n\r\n\r\n        if (pick == 1) {\r\n            //code for the basic calculator\r\n                System.out.println(&quot;If you want to get back to the menu type 0&quot;);\r\n                pick = scanner.nextInt();\r\n        } else if (pick == 2) {\r\n            //code for solving a the quadratic equation\r\n                System.out.println(&quot;If you want to get back to the menu type 0&quot;);\r\n                pick = scanner.nextInt();\r\n        } else if (pick == 3) {\r\n            //code for finding a side in a right triangle\r\n                System.out.println(&quot;If you want to get back to the menu type 0&quot;);\r\n                pick = scanner.nextInt();\r\n        } else if (pick == 4) {\r\n            //code for finding the distance between two points in a coordinate system\r\n                System.out.println(&quot;If you want to get back to the menu type 0&quot;);\r\n                pick = scanner.nextInt();\r\n        } else if (pick == 5) {\r\n            System.exit(0);\r\n        }\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\nI thought that it might not work because the program is executed from the top making its way to the bottom and after the &quot;main menu&quot; is executed it can&#39;t be done again but I&#39;m not sure.","title":"Looping back to the start of a java program after executing a block of code","body":"<p>I wrote a Java program, more specifically a basic calculator. I want to return to the &quot;main menu&quot;, by asking the user to type &quot;0&quot; after solving the math problem. The solution with which I came up with seems to not be working how I want it to be. The concept of the returning is there is a variable &quot;pick&quot; which is at the start of the program and it is not assigned anything yet. The program asks the user what operation he would like to perform, each operation is assigned a number this whole thing is executed with the help of a while/do loop. The loop asks the user what operation they would like to perform while &quot;pick&quot; is 0. If for example, the user picks operation number 2 which is solving a quadratic equation, the value of the variable &quot;pick&quot; changes to 2 and there is an if which is activated if the variable pick is equal to 2 and the block of code which solves the quadratic equation starts executing. After the quadratic equation is solved the program asks the user if they want to get back to the &quot;main menu&quot; by pressing 0 I thought that if the value of the variable &quot;pick&quot; is again 0 the program would start all over again but it doesn't seem to which is the reason I'm writing this.</p>\n<p>This is the code:</p>\n<pre><code>import java.util.Objects;\nimport java.util.Scanner;\nimport javax.swing.JOptionPane;\n\npublic class Main {\n\n    public static void main(String[] args) {\n\n        Scanner scanner = new Scanner(System.in);\n\n        String pick_String;\n        int pick;\n        do {\n            pick_String = JOptionPane.showInputDialog(&quot;Which tool would you like to use? (Type just the number) &quot; +\n                    &quot;\\n1.Basic Calculator&quot; +\n                    &quot;\\n2.Solve a quadratic equation&quot; +\n                    &quot;\\n3.Find a side in a right triangle&quot; +\n                    &quot;\\n4.Find the distance between two points in a coordinate system&quot; +\n                    &quot;\\n5.Exit&quot;\n            );\n            pick = Integer.parseInt(pick_String);\n        } while (pick == 0);\n\n\n        if (pick == 1) {\n            //code for the basic calculator\n                System.out.println(&quot;If you want to get back to the menu type 0&quot;);\n                pick = scanner.nextInt();\n        } else if (pick == 2) {\n            //code for solving a the quadratic equation\n                System.out.println(&quot;If you want to get back to the menu type 0&quot;);\n                pick = scanner.nextInt();\n        } else if (pick == 3) {\n            //code for finding a side in a right triangle\n                System.out.println(&quot;If you want to get back to the menu type 0&quot;);\n                pick = scanner.nextInt();\n        } else if (pick == 4) {\n            //code for finding the distance between two points in a coordinate system\n                System.out.println(&quot;If you want to get back to the menu type 0&quot;);\n                pick = scanner.nextInt();\n        } else if (pick == 5) {\n            System.exit(0);\n        }\n    }\n\n}\n</code></pre>\n<p>I thought that it might not work because the program is executed from the top making its way to the bottom and after the &quot;main menu&quot; is executed it can't be done again but I'm not sure.</p>\n"},{"tags":["java","android","dependency-injection","android-context"],"comments":[{"owner":{"account_id":3971184,"reputation":2473,"user_id":3275754,"display_name":"0xDEADC0DE"},"score":0,"creation_date":1505713751,"post_id":46272326,"comment_id":79507079,"body_markdown":"`I don&#39;t think I can have the ship extend an Activity class because thats for creating windows right`: That&#39;s correct. Your current implementation is not wrong and as far as I know there&#39;s no other way to do it. Remember that if you&#39;re passing `Context` to other objects that you do not end up with circular references","body":"<code>I don&#39;t think I can have the ship extend an Activity class because thats for creating windows right</code>: That&#39;s correct. Your current implementation is not wrong and as far as I know there&#39;s no other way to do it. Remember that if you&#39;re passing <code>Context</code> to other objects that you do not end up with circular references"}],"answers":[{"tags":[],"owner":{"account_id":5647516,"reputation":3092,"user_id":4469112,"display_name":"Alessio"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1505713813,"creation_date":1505713813,"answer_id":46272368,"question_id":46272326,"body_markdown":"I wrote a [blog entry](https://www.fwd.cloud/commit/post/android-context-on-demand/) about why the context should be used _on demand_, so that&#39;s the way to go, you need to pass the context either in the constructor or in the method. Don&#39;t retrieve the context statically, because one day your app will crash and then you&#39;ll have to refactor all the code to retrieve it _on demand_ instead. Hope it helps :)","title":"Is there a lightweight way to get a handle to the context to get a resource?","body":"<p>I wrote a <a href=\"https://www.fwd.cloud/commit/post/android-context-on-demand/\" rel=\"nofollow noreferrer\">blog entry</a> about why the context should be used <em>on demand</em>, so that's the way to go, you need to pass the context either in the constructor or in the method. Don't retrieve the context statically, because one day your app will crash and then you'll have to refactor all the code to retrieve it <em>on demand</em> instead. Hope it helps :)</p>\n"}],"owner":{"account_id":1016892,"reputation":28599,"user_id":1028270,"accept_rate":90,"display_name":"red888"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687872316,"creation_date":1505713578,"question_id":46272326,"body_markdown":"My ship class needs to get a bitmap from the resources folder so I pass that into the constructor like this:\r\n\r\n    public Ship(Context context) {\r\n        bitmap = BitmapFactory.decodeResource(context.getResources(), R.drawable.myShipPic);\r\n        ...\r\n\r\nI&#39;d like to not have to pass in a context object and have the ship class more self contained, how is this possible? I don&#39;t think I can have the ship extend an Activity class because that&#39;s for creating windows, right?\r\n","title":"Is there a lightweight way to get a handle to the context to get a resource?","body":"<p>My ship class needs to get a bitmap from the resources folder so I pass that into the constructor like this:</p>\n<pre><code>public Ship(Context context) {\n    bitmap = BitmapFactory.decodeResource(context.getResources(), R.drawable.myShipPic);\n    ...\n</code></pre>\n<p>I'd like to not have to pass in a context object and have the ship class more self contained, how is this possible? I don't think I can have the ship extend an Activity class because that's for creating windows, right?</p>\n"},{"tags":["java","spring","spring-boot","hibernate"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1687832630,"post_id":76561194,"comment_id":134988337,"body_markdown":"You&#39;re not including the cause when you throw the BadCredentialsException. Add that, and then add the full stack trace to your question, if you still don&#39;t see the answer.","body":"You&#39;re not including the cause when you throw the BadCredentialsException. Add that, and then add the full stack trace to your question, if you still don&#39;t see the answer."},{"owner":{"account_id":28723288,"reputation":1,"user_id":21996637,"display_name":"gzhe1056"},"score":0,"creation_date":1687871838,"post_id":76561194,"comment_id":134995115,"body_markdown":"I&#39;ve added the message and the full stack for the error.","body":"I&#39;ve added the message and the full stack for the error."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1687904456,"post_id":76561194,"comment_id":135001832,"body_markdown":"You still haven&#39;t added the cause to the BadCredentialsException, so you can&#39;t see which exception is triggering your BadCredentialsException.","body":"You still haven&#39;t added the cause to the BadCredentialsException, so you can&#39;t see which exception is triggering your BadCredentialsException."},{"owner":{"account_id":28723288,"reputation":1,"user_id":21996637,"display_name":"gzhe1056"},"score":0,"creation_date":1687912566,"post_id":76561194,"comment_id":135002591,"body_markdown":"It&#39;s in the JwtTokenValidationFilter class throwing a BadCredentialsException. It&#39;s also in the stack trace in the first line","body":"It&#39;s in the JwtTokenValidationFilter class throwing a BadCredentialsException. It&#39;s also in the stack trace in the first line"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1687917745,"post_id":76561194,"comment_id":135002993,"body_markdown":"In `JwtTokenValidationFilter` you catch an exception, and then throw a `BadCredentialsException`. Because you don&#39;t use the original exception as the cause of the `BadCredentialsException`, it isn&#39;t possible to see what is actually causing your problem. Please set the original exception as the cause of the `BadCredentialsException`, reproduce the error and post the complete stack trace.","body":"In <code>JwtTokenValidationFilter</code> you catch an exception, and then throw a <code>BadCredentialsException</code>. Because you don&#39;t use the original exception as the cause of the <code>BadCredentialsException</code>, it isn&#39;t possible to see what is actually causing your problem. Please set the original exception as the cause of the <code>BadCredentialsException</code>, reproduce the error and post the complete stack trace."},{"owner":{"account_id":28723288,"reputation":1,"user_id":21996637,"display_name":"gzhe1056"},"score":0,"creation_date":1687959895,"post_id":76561194,"comment_id":135009901,"body_markdown":"Okay I ran the code with the original error: JWT strings must contain exactly 2 period characters. Found: 0.","body":"Okay I ran the code with the original error: JWT strings must contain exactly 2 period characters. Found: 0."},{"owner":{"account_id":28723288,"reputation":1,"user_id":21996637,"display_name":"gzhe1056"},"score":0,"creation_date":1687960813,"post_id":76561194,"comment_id":135010165,"body_markdown":"The issue seems to stem from the fact that I can’t seem to generate a bearer token after sign in. It was working a week ago but suddenly stopped","body":"The issue seems to stem from the fact that I can’t seem to generate a bearer token after sign in. It was working a week ago but suddenly stopped"}],"owner":{"account_id":28723288,"reputation":1,"user_id":21996637,"display_name":"gzhe1056"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":184,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687871799,"creation_date":1687831556,"question_id":76561194,"body_markdown":"````\r\npackage com.instacloneapi_v3.instaclone.config;\r\n\r\npublic class SecurityContext {\r\n//    Using generated security password: 7c926493-15b1-45b1-b293-831b4f606328\r\n//    This generated password is for development use only. Your security configuration must be updated before running your application in production.\r\n    public static final String JWT_KEY = &quot;2646294A404E635266556A586E327235753878214125442A472D4B6150645367&quot;;\r\n    public static final String HEADER = &quot;Authorization&quot;;\r\n}\r\n````\r\n````\r\npackage com.instacloneapi_v3.instaclone.config;\r\n\r\nimport io.jsonwebtoken.Claims;\r\nimport io.jsonwebtoken.Jwts;\r\nimport io.jsonwebtoken.security.Keys;\r\nimport jakarta.servlet.FilterChain;\r\nimport jakarta.servlet.ServletException;\r\nimport jakarta.servlet.http.HttpServletRequest;\r\nimport jakarta.servlet.http.HttpServletResponse;\r\nimport org.springframework.security.authentication.BadCredentialsException;\r\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\r\nimport org.springframework.security.core.Authentication;\r\nimport org.springframework.security.core.GrantedAuthority;\r\nimport org.springframework.security.core.authority.AuthorityUtils;\r\nimport org.springframework.security.core.context.SecurityContextHolder;\r\nimport org.springframework.web.filter.OncePerRequestFilter;\r\n\r\nimport javax.crypto.SecretKey;\r\nimport java.io.IOException;\r\nimport java.util.List;\r\n\r\npublic class JwtTokenValidationFilter extends OncePerRequestFilter {\r\n\r\n    @Override\r\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\r\n        String jwt = request.getHeader(SecurityContext.HEADER);\r\n\r\n        if (jwt != null) {\r\n            try {\r\n                jwt = jwt.substring(7);\r\n                SecretKey key = Keys.hmacShaKeyFor(SecurityContext.JWT_KEY.getBytes());\r\n                Claims claims = Jwts.parserBuilder().setSigningKey(key).build().parseClaimsJws(jwt).getBody();\r\n                String username = String.valueOf(claims.get(&quot;username&quot;));\r\n                String authorities = (String)claims.get(&quot;authorities&quot;);\r\n                List&lt;GrantedAuthority&gt; auths = AuthorityUtils.commaSeparatedStringToAuthorityList(authorities);\r\n                Authentication auth = new UsernamePasswordAuthenticationToken(username, null, auths);\r\n                SecurityContextHolder.getContext().setAuthentication(auth);\r\n            } catch (Exception e) {\r\n                throw new BadCredentialsException(&quot;Invalid token&quot;);\r\n            }\r\n        }\r\n        filterChain.doFilter(request, response);\r\n    }\r\n\r\n    protected boolean shouldNotFilter(HttpServletRequest req) throws ServletException {\r\n        return req.getServletPath().equals(&quot;signin&quot;);\r\n    }\r\n}\r\n````\r\n````\r\npackage com.instacloneapi_v3.instaclone.config;\r\n\r\nimport io.jsonwebtoken.Jwts;\r\nimport io.jsonwebtoken.security.Keys;\r\nimport jakarta.servlet.FilterChain;\r\nimport jakarta.servlet.ServletException;\r\nimport jakarta.servlet.http.HttpServletRequest;\r\nimport jakarta.servlet.http.HttpServletResponse;\r\nimport org.springframework.security.core.Authentication;\r\nimport org.springframework.security.core.GrantedAuthority;\r\nimport org.springframework.security.core.context.SecurityContextHolder;\r\nimport org.springframework.web.filter.OncePerRequestFilter;\r\n\r\nimport javax.crypto.SecretKey;\r\nimport java.io.IOException;\r\nimport java.util.Collection;\r\nimport java.util.Date;\r\nimport java.util.HashSet;\r\nimport java.util.Set;\r\n\r\npublic class JwtTokenGeneratorFilter extends OncePerRequestFilter {\r\n    @Override\r\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\r\n        Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\r\n\r\n        if (authentication!=null) {\r\n            SecretKey key = Keys.hmacShaKeyFor(SecurityContext.JWT_KEY.getBytes());\r\n\r\n            String jwt = Jwts.builder()\r\n                    .setIssuer(&quot;instagram&quot;)\r\n                    .setIssuedAt(new Date())\r\n                    .claim(&quot;authorities&quot;, populateAuthorities(authentication.getAuthorities()))\r\n                    .claim(&quot;username&quot;, authentication.getName())\r\n                    .setExpiration(new Date(new Date().getTime()+300000000))\r\n                    .signWith(key).compact();\r\n            response.setHeader(SecurityContext.HEADER, jwt);\r\n        }\r\n        filterChain.doFilter(request, response);\r\n    }\r\n\r\n    public String populateAuthorities(Collection&lt;? extends GrantedAuthority&gt; collection) {\r\n        Set&lt;String&gt; authorities = new HashSet&lt;&gt;();\r\n\r\n        for (GrantedAuthority authority: collection) {\r\n            authorities.add(authority.getAuthority());\r\n        }\r\n        return String.join(&quot;,&quot;,authorities);\r\n    }\r\n\r\n    protected boolean shouldNotFilter(HttpServletRequest req) throws ServletException {\r\n        return !req.getServletPath().equals(&quot;/signin&quot;);\r\n    }\r\n}\r\n````\r\n````\r\npackage com.instacloneapi_v3.instaclone.config;\r\n\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.http.HttpMethod;\r\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\nimport org.springframework.security.config.http.SessionCreationPolicy;\r\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\r\nimport org.springframework.security.crypto.password.PasswordEncoder;\r\nimport org.springframework.security.web.SecurityFilterChain;\r\nimport org.springframework.security.web.authentication.www.BasicAuthenticationFilter;\r\n\r\n@Configuration\r\npublic class AppConfig {\r\n\r\n    @Bean\r\n    public SecurityFilterChain securityConfiguration(HttpSecurity http) throws Exception {\r\n        http.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n                .and()\r\n                .authorizeHttpRequests().requestMatchers(HttpMethod.POST, &quot;/signup&quot;).permitAll()\r\n                .anyRequest().authenticated()\r\n                .and()\r\n                .addFilterAfter(new JwtTokenGeneratorFilter(), BasicAuthenticationFilter.class)\r\n                .addFilterBefore(new JwtTokenValidationFilter(), BasicAuthenticationFilter.class)\r\n                .csrf().disable()\r\n                .formLogin().and().httpBasic();\r\n        return http.build();\r\n    }\r\n\r\n    @Bean\r\n    public PasswordEncoder passwordEncoder() {\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n}\r\n````\r\n````\r\norg.springframework.security.authentication.BadCredentialsException: Invalid token\r\n\tat com.instacloneapi_v3.instaclone.config.JwtTokenValidationFilter.doFilterInternal(JwtTokenValidationFilter.java:39) ~[classes/:na]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.8.jar:6.0.8]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.8.jar:6.0.8]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:188) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:174) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.8.jar:6.0.8]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.8.jar:6.0.8]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.8.jar:6.0.8]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.0.8.jar:6.0.8]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.0.8.jar:6.0.8]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.8.jar:6.0.8]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.8.jar:6.0.8]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.8.jar:6.0.8]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.8.jar:6.0.8]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.8.jar:6.0.8]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.8.jar:6.0.8]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\r\n\tat java.base/java.lang.Thread.run(Thread.java:1589) ~[na:na]\r\n````\r\nI&#39;m trying to understand why the Bearer token wouldn&#39;t generate when I use the sign in api. It was working a few days ago but now it suddenly stopped generating bearer tokens on the end point. The exception was thrown at JwtTokenValidationFilter class. I put up the code snippet that I think was what surrounded the problem but feel free to ask about any other code snippets.","title":"org.springframework.security.authentication.BadCredentialsException","body":"<pre><code>package com.instacloneapi_v3.instaclone.config;\n\npublic class SecurityContext {\n//    Using generated security password: 7c926493-15b1-45b1-b293-831b4f606328\n//    This generated password is for development use only. Your security configuration must be updated before running your application in production.\n    public static final String JWT_KEY = &quot;2646294A404E635266556A586E327235753878214125442A472D4B6150645367&quot;;\n    public static final String HEADER = &quot;Authorization&quot;;\n}\n</code></pre>\n<pre><code>package com.instacloneapi_v3.instaclone.config;\n\nimport io.jsonwebtoken.Claims;\nimport io.jsonwebtoken.Jwts;\nimport io.jsonwebtoken.security.Keys;\nimport jakarta.servlet.FilterChain;\nimport jakarta.servlet.ServletException;\nimport jakarta.servlet.http.HttpServletRequest;\nimport jakarta.servlet.http.HttpServletResponse;\nimport org.springframework.security.authentication.BadCredentialsException;\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\nimport org.springframework.security.core.Authentication;\nimport org.springframework.security.core.GrantedAuthority;\nimport org.springframework.security.core.authority.AuthorityUtils;\nimport org.springframework.security.core.context.SecurityContextHolder;\nimport org.springframework.web.filter.OncePerRequestFilter;\n\nimport javax.crypto.SecretKey;\nimport java.io.IOException;\nimport java.util.List;\n\npublic class JwtTokenValidationFilter extends OncePerRequestFilter {\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\n        String jwt = request.getHeader(SecurityContext.HEADER);\n\n        if (jwt != null) {\n            try {\n                jwt = jwt.substring(7);\n                SecretKey key = Keys.hmacShaKeyFor(SecurityContext.JWT_KEY.getBytes());\n                Claims claims = Jwts.parserBuilder().setSigningKey(key).build().parseClaimsJws(jwt).getBody();\n                String username = String.valueOf(claims.get(&quot;username&quot;));\n                String authorities = (String)claims.get(&quot;authorities&quot;);\n                List&lt;GrantedAuthority&gt; auths = AuthorityUtils.commaSeparatedStringToAuthorityList(authorities);\n                Authentication auth = new UsernamePasswordAuthenticationToken(username, null, auths);\n                SecurityContextHolder.getContext().setAuthentication(auth);\n            } catch (Exception e) {\n                throw new BadCredentialsException(&quot;Invalid token&quot;);\n            }\n        }\n        filterChain.doFilter(request, response);\n    }\n\n    protected boolean shouldNotFilter(HttpServletRequest req) throws ServletException {\n        return req.getServletPath().equals(&quot;signin&quot;);\n    }\n}\n</code></pre>\n<pre><code>package com.instacloneapi_v3.instaclone.config;\n\nimport io.jsonwebtoken.Jwts;\nimport io.jsonwebtoken.security.Keys;\nimport jakarta.servlet.FilterChain;\nimport jakarta.servlet.ServletException;\nimport jakarta.servlet.http.HttpServletRequest;\nimport jakarta.servlet.http.HttpServletResponse;\nimport org.springframework.security.core.Authentication;\nimport org.springframework.security.core.GrantedAuthority;\nimport org.springframework.security.core.context.SecurityContextHolder;\nimport org.springframework.web.filter.OncePerRequestFilter;\n\nimport javax.crypto.SecretKey;\nimport java.io.IOException;\nimport java.util.Collection;\nimport java.util.Date;\nimport java.util.HashSet;\nimport java.util.Set;\n\npublic class JwtTokenGeneratorFilter extends OncePerRequestFilter {\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\n        Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\n\n        if (authentication!=null) {\n            SecretKey key = Keys.hmacShaKeyFor(SecurityContext.JWT_KEY.getBytes());\n\n            String jwt = Jwts.builder()\n                    .setIssuer(&quot;instagram&quot;)\n                    .setIssuedAt(new Date())\n                    .claim(&quot;authorities&quot;, populateAuthorities(authentication.getAuthorities()))\n                    .claim(&quot;username&quot;, authentication.getName())\n                    .setExpiration(new Date(new Date().getTime()+300000000))\n                    .signWith(key).compact();\n            response.setHeader(SecurityContext.HEADER, jwt);\n        }\n        filterChain.doFilter(request, response);\n    }\n\n    public String populateAuthorities(Collection&lt;? extends GrantedAuthority&gt; collection) {\n        Set&lt;String&gt; authorities = new HashSet&lt;&gt;();\n\n        for (GrantedAuthority authority: collection) {\n            authorities.add(authority.getAuthority());\n        }\n        return String.join(&quot;,&quot;,authorities);\n    }\n\n    protected boolean shouldNotFilter(HttpServletRequest req) throws ServletException {\n        return !req.getServletPath().equals(&quot;/signin&quot;);\n    }\n}\n</code></pre>\n<pre><code>package com.instacloneapi_v3.instaclone.config;\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.http.HttpMethod;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.http.SessionCreationPolicy;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.springframework.security.web.SecurityFilterChain;\nimport org.springframework.security.web.authentication.www.BasicAuthenticationFilter;\n\n@Configuration\npublic class AppConfig {\n\n    @Bean\n    public SecurityFilterChain securityConfiguration(HttpSecurity http) throws Exception {\n        http.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n                .and()\n                .authorizeHttpRequests().requestMatchers(HttpMethod.POST, &quot;/signup&quot;).permitAll()\n                .anyRequest().authenticated()\n                .and()\n                .addFilterAfter(new JwtTokenGeneratorFilter(), BasicAuthenticationFilter.class)\n                .addFilterBefore(new JwtTokenValidationFilter(), BasicAuthenticationFilter.class)\n                .csrf().disable()\n                .formLogin().and().httpBasic();\n        return http.build();\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n}\n</code></pre>\n<pre><code>org.springframework.security.authentication.BadCredentialsException: Invalid token\n    at com.instacloneapi_v3.instaclone.config.JwtTokenValidationFilter.doFilterInternal(JwtTokenValidationFilter.java:39) ~[classes/:na]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:188) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:174) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at java.base/java.lang.Thread.run(Thread.java:1589) ~[na:na]\n</code></pre>\n<p>I'm trying to understand why the Bearer token wouldn't generate when I use the sign in api. It was working a few days ago but now it suddenly stopped generating bearer tokens on the end point. The exception was thrown at JwtTokenValidationFilter class. I put up the code snippet that I think was what surrounded the problem but feel free to ask about any other code snippets.</p>\n"},{"tags":["java","xml","spring-boot","jaxb","unmarshalling"],"answers":[{"tags":[],"owner":{"account_id":28904959,"reputation":16,"user_id":22139139,"display_name":"Aidar Khusainov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1687871792,"creation_date":1687871792,"answer_id":76565293,"question_id":76564480,"body_markdown":"It seems like not good idea to mix dto and entity classes. In my opinion, the better solution is to create two separate classes: dto class with xml annotations and entity class with jpa annotations and convert them into another through separate converter class which will be a spring component and  autowired countryRepository to find necessary value","title":"JAXB: get Object from DB by one of it field from xml","body":"<p>It seems like not good idea to mix dto and entity classes. In my opinion, the better solution is to create two separate classes: dto class with xml annotations and entity class with jpa annotations and convert them into another through separate converter class which will be a spring component and  autowired countryRepository to find necessary value</p>\n"}],"owner":{"account_id":28644032,"reputation":23,"user_id":21932511,"display_name":"rekki"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76565293,"answer_count":1,"score":1,"last_activity_date":1687871792,"creation_date":1687866018,"question_id":76564480,"body_markdown":"I think that I have a trivial problem but cant find solution.\r\nI have Class with some fields of another Classes. In XML I have one of fields from &quot;Another Class&quot;. How can I get Another Class object by this field? \r\nI Using SpringBoot.\r\n\r\n\r\nShort example (Main class - Profile, Another class - Country):\r\n\r\nXML\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;profiles&gt;\r\n    &lt;profile id=&quot;1001&quot;&gt;\r\n        ...\r\n        &lt;nationality&gt;US&lt;/nationality&gt;\r\n        ...\r\n    &lt;/profile&gt;\r\n&lt;/profiles&gt;\r\n```\r\n\r\nMain class\r\n```\r\n@Entity\r\n@Table\r\n@XmlRootElement(name = &quot;profile&quot;)\r\n@XmlAccessorType(XmlAccessType.FIELD)\r\npublic class Profile {\r\n...\r\n@ManyToOne\r\n@JoinColumn(referencedColumnName = &quot;numericISOCode&quot;)\r\n@XmlElement(name = &quot;nationality&quot;)\r\n@XmlJavaTypeAdapter(CountryISO2Adapter.class)\r\nprivate Country nationality;\r\n...\r\n```\r\nCountry class\r\n\r\n```\r\n@Entity\r\n@Table(uniqueConstraints = {\r\n        @UniqueConstraint(name = &quot;alpha2ISO&quot;, columnNames = {&quot;alpha2ISO&quot;}),\r\n        @UniqueConstraint(name = &quot;alpha3ISO&quot;, columnNames = {&quot;alpha3ISO&quot;})})\r\npublic class Country {\r\n    private String nameENG;\r\n    @Column(unique = true, nullable = false, length = 2)\r\n    private String alpha2ISO;\r\n    @Column(unique = true, nullable = false, length = 3)\r\n    private String alpha3ISO;\r\n    @Id\r\n    @Column(unique = true, nullable = false, length = 3)\r\n    private int numericISOCode;\r\n...\r\n```\r\n\r\nAdapter\r\n```\r\n@Component\r\npublic class CountryISO2Adapter extends XmlAdapter&lt;String, Country&gt; {\r\n    @Autowired\r\n    private Service service;\r\n    @Override\r\n    public Country unmarshal(String v) throws Exception {\r\n        return service.getCountryByISO2(v).orElse(null);\r\n    }\r\n....\r\n```\r\nService\r\n\r\n```\r\n@Service\r\npublic final class Service {\r\n...\r\n    private final CountryRepository countryRepository;\r\n...\r\npublic Optional&lt;Country&gt; getCountryByISO2 (String iso2){\r\n        return countryRepository.findByAlpha2ISO(iso2);\r\n}\r\n```\r\n\r\nI tried get it from Adapter.class where I want looking it by means of methods @Service class and @Repository, but in Adapter class than I need link of bean @Servise class but @Autowired not worked in this case (may be @XmlJavaTypeAdapter get &quot;new CountryISO2Adapter()&quot; and it can&#39;t using bean) - I have null in my Service field in Adapter class;\r\n\r\nMay be that&#39;s wrong way? How make this correctly?\r\n \r\nGlobal target - create object Profile.class with field Country.class, however Country.class object I must get from DB (but not create).\r\n\r\nI&#39;m sure it&#39;s a often task.\r\n\r\nThanks a lot for your advises.","title":"JAXB: get Object from DB by one of it field from xml","body":"<p>I think that I have a trivial problem but cant find solution.\nI have Class with some fields of another Classes. In XML I have one of fields from &quot;Another Class&quot;. How can I get Another Class object by this field?\nI Using SpringBoot.</p>\n<p>Short example (Main class - Profile, Another class - Country):</p>\n<p>XML</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;profiles&gt;\n    &lt;profile id=&quot;1001&quot;&gt;\n        ...\n        &lt;nationality&gt;US&lt;/nationality&gt;\n        ...\n    &lt;/profile&gt;\n&lt;/profiles&gt;\n</code></pre>\n<p>Main class</p>\n<pre><code>@Entity\n@Table\n@XmlRootElement(name = &quot;profile&quot;)\n@XmlAccessorType(XmlAccessType.FIELD)\npublic class Profile {\n...\n@ManyToOne\n@JoinColumn(referencedColumnName = &quot;numericISOCode&quot;)\n@XmlElement(name = &quot;nationality&quot;)\n@XmlJavaTypeAdapter(CountryISO2Adapter.class)\nprivate Country nationality;\n...\n</code></pre>\n<p>Country class</p>\n<pre><code>@Entity\n@Table(uniqueConstraints = {\n        @UniqueConstraint(name = &quot;alpha2ISO&quot;, columnNames = {&quot;alpha2ISO&quot;}),\n        @UniqueConstraint(name = &quot;alpha3ISO&quot;, columnNames = {&quot;alpha3ISO&quot;})})\npublic class Country {\n    private String nameENG;\n    @Column(unique = true, nullable = false, length = 2)\n    private String alpha2ISO;\n    @Column(unique = true, nullable = false, length = 3)\n    private String alpha3ISO;\n    @Id\n    @Column(unique = true, nullable = false, length = 3)\n    private int numericISOCode;\n...\n</code></pre>\n<p>Adapter</p>\n<pre><code>@Component\npublic class CountryISO2Adapter extends XmlAdapter&lt;String, Country&gt; {\n    @Autowired\n    private Service service;\n    @Override\n    public Country unmarshal(String v) throws Exception {\n        return service.getCountryByISO2(v).orElse(null);\n    }\n....\n</code></pre>\n<p>Service</p>\n<pre><code>@Service\npublic final class Service {\n...\n    private final CountryRepository countryRepository;\n...\npublic Optional&lt;Country&gt; getCountryByISO2 (String iso2){\n        return countryRepository.findByAlpha2ISO(iso2);\n}\n</code></pre>\n<p>I tried get it from Adapter.class where I want looking it by means of methods @Service class and @Repository, but in Adapter class than I need link of bean @Servise class but @Autowired not worked in this case (may be @XmlJavaTypeAdapter get &quot;new CountryISO2Adapter()&quot; and it can't using bean) - I have null in my Service field in Adapter class;</p>\n<p>May be that's wrong way? How make this correctly?</p>\n<p>Global target - create object Profile.class with field Country.class, however Country.class object I must get from DB (but not create).</p>\n<p>I'm sure it's a often task.</p>\n<p>Thanks a lot for your advises.</p>\n"},{"tags":["java","spring-boot","azure","azure-blob-storage","azure-spring-cloud"],"owner":{"account_id":4457428,"reputation":981,"user_id":3627233,"accept_rate":18,"display_name":"nanpakal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":104,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687870857,"creation_date":1687870335,"question_id":76565060,"body_markdown":"I wanted read a xml file from azure blob storage and write to another xml file to azure blob storage. I am using spring cloud to integrate with azure blob storage. I tried writing with JAXB as follows which works well\r\n```\r\nprivate void launchJaxb() {\r\n        AtomicInteger counter = new AtomicInteger(0);\r\n        List&lt;Verify&gt; verifications = new ArrayList&lt;&gt;();\r\n        Resource readResource = resourceLoader.getResource(String.format(BLOB_RESOURCE_PATTERN, containerName, &quot;9898.xml&quot;));\r\n        Resource writeResource = resourceLoader.getResource(String.format(BLOB_RESOURCE_PATTERN, containerName, &quot;9898-out.xml&quot;));\r\n\r\n        try {\r\n            XMLInputFactory xmlInputFactory = XMLInputFactory.newFactory();\r\n            XMLEventReader xmlEventReader = xmlInputFactory.createXMLEventReader(readResource.getInputStream());\r\n            JAXBContext readJc = JAXBContext.newInstance(Verify.class);\r\n            Unmarshaller unmarshaller = readJc.createUnmarshaller();\r\n\r\n            BufferedOutputStream bos = new BufferedOutputStream(((WritableResource) writeResource).getOutputStream());\r\n            JAXBContext writeJc = JAXBContext.newInstance(Verify.class);\r\n            Marshaller marshaller = writeJc.createMarshaller();\r\n            marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);\r\n            marshaller.setProperty(Marshaller.JAXB_FRAGMENT, true);\r\n\r\n            var rootElements = createRootElements();\r\n\r\n            while (xmlEventReader.hasNext()) {\r\n                if (xmlEventReader.peek().isStartElement() &amp;&amp; xmlEventReader.peek().asStartElement().getName().getLocalPart().equals(&quot;account&quot;)) {\r\n                    Verification verification = (Verification) unmarshaller.unmarshal(xmlEventReader);\r\n                    counter.incrementAndGet();\r\n                    verifications.add(verification);\r\n                    if (verifications.size() == 100) {\r\n                        var accountValidationResponses = process.verify(verifications);\r\n                        for (Report report : accountValidationResponses) {\r\n                            rootElements.getReport().add(report);\r\n                        }\r\n                        verifications = new ArrayList&lt;&gt;();\r\n                    }\r\n\r\n                }\r\n                xmlEventReader.nextEvent();\r\n            }\r\n            rootElements.setNumberOfEvents(BigInteger.valueOf(counter.get()));\r\n            marshaller.marshal(rootElements, bos);\r\n            bos.close();\r\n            log.info(&quot;Total processed verifications {}&quot;, counter.get());\r\n        } catch (IOException | XMLStreamException | JAXBException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n```\r\nUsing above code i was able to write xml file blob storage.\r\nBut i wanted to use Stax as i file i writing might end up being very huge. I tried the following.\r\n\r\n```\r\nprivate void launchXmlStreamWriter() {\r\n        AtomicInteger counter = new AtomicInteger(0);\r\n        List&lt; Verify &gt; verifications = new ArrayList&lt;&gt;();\r\n        Resource readResource = resourceLoader.getResource(String.format(BLOB_RESOURCE_PATTERN, containerName, &quot;9898.xml&quot;));\r\n        Resource writeResource = resourceLoader.getResource(String.format(BLOB_RESOURCE_PATTERN, containerName, &quot;9898-out.xml&quot;));\r\n\r\n        try {\r\n            XMLInputFactory xmlInputFactory = XMLInputFactory.newFactory();\r\n            XMLEventReader xmlEventReader = xmlInputFactory.createXMLEventReader(readResource.getInputStream());\r\n            JAXBContext readJc = JAXBContext.newInstance(Verify.class);\r\n            Unmarshaller unmarshaller = readJc.createUnmarshaller();\r\n\r\n            OutputStream outputStream = ((WritableResource) writeResource).getOutputStream();\r\n            XMLStreamWriter xmlOut = XMLOutputFactory.newFactory().createXMLStreamWriter(outputStream);\r\n            xmlOut.writeStartDocument();\r\n            xmlOut.writeStartElement(&quot;rootElement&quot;);\r\n\r\n            JAXBContext context = JAXBContext.newInstance(Verify.class);\r\n            Marshaller marshaller = context.createMarshaller();\r\n            marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, Boolean.TRUE);\r\n            marshaller.setProperty(Marshaller.JAXB_FRAGMENT, Boolean.TRUE);\r\n\r\n            while (xmlEventReader.hasNext()) {\r\n                if (xmlEventReader.peek().isStartElement() &amp;&amp; xmlEventReader.peek().asStartElement().getName().getLocalPart().equals(&quot;verify&quot;)) {\r\n                    Verification verification = (Verification) unmarshaller.unmarshal(xmlEventReader);\r\n                    counter.incrementAndGet();\r\n                    verifications.add(verification);\r\n                    if (verifications.size() == 100) {\r\n                        var accountValidationResponses = process.verify(verifications);\r\n                        for (Report report : accountValidationResponses) {\r\n                            JAXBElement&lt;Report&gt; element = new JAXBElement&lt;&gt;(QName.valueOf(&quot;&quot;), Report.class, report);\r\n                            marshaller.marshal(element, xmlOut);\r\n                        }\r\n                        verifications = new ArrayList&lt;&gt;();\r\n                    }\r\n\r\n                }\r\n                xmlEventReader.nextEvent();\r\n            }\r\n            xmlOut.close();\r\n            log.info(&quot;Total processed verifications {}&quot;, counter.get());\r\n        } catch (IOException | XMLStreamException | JAXBException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n```\r\nAbove code runs through all the elements in xml file but doesnt create any output file.If i change the writeResource to FileSystemResource then a file is created. What am i missing to generate file on azure storage account using Stax?","title":"Writing xml to Azure blob storage from spring boot app using Stax writer","body":"<p>I wanted read a xml file from azure blob storage and write to another xml file to azure blob storage. I am using spring cloud to integrate with azure blob storage. I tried writing with JAXB as follows which works well</p>\n<pre><code>private void launchJaxb() {\n        AtomicInteger counter = new AtomicInteger(0);\n        List&lt;Verify&gt; verifications = new ArrayList&lt;&gt;();\n        Resource readResource = resourceLoader.getResource(String.format(BLOB_RESOURCE_PATTERN, containerName, &quot;9898.xml&quot;));\n        Resource writeResource = resourceLoader.getResource(String.format(BLOB_RESOURCE_PATTERN, containerName, &quot;9898-out.xml&quot;));\n\n        try {\n            XMLInputFactory xmlInputFactory = XMLInputFactory.newFactory();\n            XMLEventReader xmlEventReader = xmlInputFactory.createXMLEventReader(readResource.getInputStream());\n            JAXBContext readJc = JAXBContext.newInstance(Verify.class);\n            Unmarshaller unmarshaller = readJc.createUnmarshaller();\n\n            BufferedOutputStream bos = new BufferedOutputStream(((WritableResource) writeResource).getOutputStream());\n            JAXBContext writeJc = JAXBContext.newInstance(Verify.class);\n            Marshaller marshaller = writeJc.createMarshaller();\n            marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);\n            marshaller.setProperty(Marshaller.JAXB_FRAGMENT, true);\n\n            var rootElements = createRootElements();\n\n            while (xmlEventReader.hasNext()) {\n                if (xmlEventReader.peek().isStartElement() &amp;&amp; xmlEventReader.peek().asStartElement().getName().getLocalPart().equals(&quot;account&quot;)) {\n                    Verification verification = (Verification) unmarshaller.unmarshal(xmlEventReader);\n                    counter.incrementAndGet();\n                    verifications.add(verification);\n                    if (verifications.size() == 100) {\n                        var accountValidationResponses = process.verify(verifications);\n                        for (Report report : accountValidationResponses) {\n                            rootElements.getReport().add(report);\n                        }\n                        verifications = new ArrayList&lt;&gt;();\n                    }\n\n                }\n                xmlEventReader.nextEvent();\n            }\n            rootElements.setNumberOfEvents(BigInteger.valueOf(counter.get()));\n            marshaller.marshal(rootElements, bos);\n            bos.close();\n            log.info(&quot;Total processed verifications {}&quot;, counter.get());\n        } catch (IOException | XMLStreamException | JAXBException e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n</code></pre>\n<p>Using above code i was able to write xml file blob storage.\nBut i wanted to use Stax as i file i writing might end up being very huge. I tried the following.</p>\n<pre><code>private void launchXmlStreamWriter() {\n        AtomicInteger counter = new AtomicInteger(0);\n        List&lt; Verify &gt; verifications = new ArrayList&lt;&gt;();\n        Resource readResource = resourceLoader.getResource(String.format(BLOB_RESOURCE_PATTERN, containerName, &quot;9898.xml&quot;));\n        Resource writeResource = resourceLoader.getResource(String.format(BLOB_RESOURCE_PATTERN, containerName, &quot;9898-out.xml&quot;));\n\n        try {\n            XMLInputFactory xmlInputFactory = XMLInputFactory.newFactory();\n            XMLEventReader xmlEventReader = xmlInputFactory.createXMLEventReader(readResource.getInputStream());\n            JAXBContext readJc = JAXBContext.newInstance(Verify.class);\n            Unmarshaller unmarshaller = readJc.createUnmarshaller();\n\n            OutputStream outputStream = ((WritableResource) writeResource).getOutputStream();\n            XMLStreamWriter xmlOut = XMLOutputFactory.newFactory().createXMLStreamWriter(outputStream);\n            xmlOut.writeStartDocument();\n            xmlOut.writeStartElement(&quot;rootElement&quot;);\n\n            JAXBContext context = JAXBContext.newInstance(Verify.class);\n            Marshaller marshaller = context.createMarshaller();\n            marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, Boolean.TRUE);\n            marshaller.setProperty(Marshaller.JAXB_FRAGMENT, Boolean.TRUE);\n\n            while (xmlEventReader.hasNext()) {\n                if (xmlEventReader.peek().isStartElement() &amp;&amp; xmlEventReader.peek().asStartElement().getName().getLocalPart().equals(&quot;verify&quot;)) {\n                    Verification verification = (Verification) unmarshaller.unmarshal(xmlEventReader);\n                    counter.incrementAndGet();\n                    verifications.add(verification);\n                    if (verifications.size() == 100) {\n                        var accountValidationResponses = process.verify(verifications);\n                        for (Report report : accountValidationResponses) {\n                            JAXBElement&lt;Report&gt; element = new JAXBElement&lt;&gt;(QName.valueOf(&quot;&quot;), Report.class, report);\n                            marshaller.marshal(element, xmlOut);\n                        }\n                        verifications = new ArrayList&lt;&gt;();\n                    }\n\n                }\n                xmlEventReader.nextEvent();\n            }\n            xmlOut.close();\n            log.info(&quot;Total processed verifications {}&quot;, counter.get());\n        } catch (IOException | XMLStreamException | JAXBException e) {\n            throw new RuntimeException(e);\n        }\n    }\n</code></pre>\n<p>Above code runs through all the elements in xml file but doesnt create any output file.If i change the writeResource to FileSystemResource then a file is created. What am i missing to generate file on azure storage account using Stax?</p>\n"},{"tags":["java","hibernate","jpa","hibernate-criteria"],"comments":[{"owner":{"account_id":1597725,"reputation":34231,"user_id":1479414,"accept_rate":71,"display_name":"Andremoniy"},"score":0,"creation_date":1512668975,"post_id":47163052,"comment_id":82361735,"body_markdown":"Have you tried to extract variable as `root.alias(&quot;id&quot;)` and fetch on it? `Selection&lt;Registered&gt; id = root.alias(&quot;id&quot;); id.fetch(&quot;user&quot;, JoinType.LEFT);`?","body":"Have you tried to extract variable as <code>root.alias(&quot;id&quot;)</code> and fetch on it? <code>Selection&lt;Registered&gt; id = root.alias(&quot;id&quot;); id.fetch(&quot;user&quot;, JoinType.LEFT);</code>?"}],"answers":[{"tags":[],"owner":{"account_id":4156632,"reputation":800,"user_id":3410935,"display_name":"Glapa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1533066341,"creation_date":1533063621,"answer_id":51620309,"question_id":47163052,"body_markdown":"Try with\r\n\r\n    @Embeddable\r\n    public class RegisteredId implements Serializable {\r\n        public Long userId;\r\n        public Long tournamentId;\r\n    }\r\n\r\nand\r\n\r\n    @Entity\r\n    public class Registered implements Serializable {\r\n\r\n        @EmbeddedId\r\n        public RegisteredId id;\r\n\r\n        @ManyToOne\r\n        @JoinColumn(name = &quot;userId&quot;, updatable = false, insertable = false)\r\n        public User user;\r\n        @ManyToOne\r\n        @JoinColumn(name = &quot;tournamentId&quot;, updatable = false, insertable = false)\r\n        public Tournament tournament;\r\n    }\r\n\r\nand then\r\n\r\n    CriteriaBuilder builder = em.getCriteriaBuilder();\r\n    CriteriaQuery&lt;Registered&gt; criteria = builder.createQuery(Registered.class);\r\n    Root&lt;Registered&gt; root = criteria.from(Registered.class);\r\n    root.fetch(&quot;user&quot;, JoinType.LEFT);\r\n    root.fetch(&quot;tournament&quot;, JoinType.LEFT);\r\n    criteria.where(builder.equal(root.get(&quot;id.tournamentId&quot;), idTournament));\r\n    List&lt;Registered&gt; registereds = em.createQuery(criteria).getResultList();","title":"Hibernate criteria query fetch with embedded id","body":"<p>Try with</p>\n\n<pre><code>@Embeddable\npublic class RegisteredId implements Serializable {\n    public Long userId;\n    public Long tournamentId;\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>@Entity\npublic class Registered implements Serializable {\n\n    @EmbeddedId\n    public RegisteredId id;\n\n    @ManyToOne\n    @JoinColumn(name = \"userId\", updatable = false, insertable = false)\n    public User user;\n    @ManyToOne\n    @JoinColumn(name = \"tournamentId\", updatable = false, insertable = false)\n    public Tournament tournament;\n}\n</code></pre>\n\n<p>and then</p>\n\n<pre><code>CriteriaBuilder builder = em.getCriteriaBuilder();\nCriteriaQuery&lt;Registered&gt; criteria = builder.createQuery(Registered.class);\nRoot&lt;Registered&gt; root = criteria.from(Registered.class);\nroot.fetch(\"user\", JoinType.LEFT);\nroot.fetch(\"tournament\", JoinType.LEFT);\ncriteria.where(builder.equal(root.get(\"id.tournamentId\"), idTournament));\nList&lt;Registered&gt; registereds = em.createQuery(criteria).getResultList();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2681853,"reputation":148,"user_id":2317065,"display_name":"Italo Brenner"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1687870827,"creation_date":1687870827,"answer_id":76565135,"question_id":47163052,"body_markdown":"```\r\nroot.fetch(&quot;id&quot;, JoinType.LEFT).fetch(&quot;user&quot;, JoinType.LEFT);\r\nroot.fetch(&quot;id&quot;, JoinType.LEFT).fetch(&quot;tournament&quot;, JoinType.LEFT);\r\n```","title":"Hibernate criteria query fetch with embedded id","body":"<pre><code>root.fetch(&quot;id&quot;, JoinType.LEFT).fetch(&quot;user&quot;, JoinType.LEFT);\nroot.fetch(&quot;id&quot;, JoinType.LEFT).fetch(&quot;tournament&quot;, JoinType.LEFT);\n</code></pre>\n"}],"owner":{"account_id":1587881,"reputation":12271,"user_id":1471829,"accept_rate":92,"display_name":"Atropo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1320,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":2,"score":5,"last_activity_date":1687870827,"creation_date":1510072636,"question_id":47163052,"body_markdown":"I have this `Entity` class:\r\n\r\n\r\n    @Entity\r\n    public class Registered implements Serializable {\r\n    \r\n        @Id\r\n        public RegisteredId id;\r\n    }\r\n\r\nWith this `EmbeddedId`:\r\n\r\n    @Embeddable\r\n    public class RegisteredId implements Serializable {\r\n        @ManyToOne\r\n        public User user;\r\n        @ManyToOne\r\n        public Tournament tournament;\r\n      \r\n    }\r\n\r\nI&#39;m trying to make this `Criteria query` fetching the `User` and the `Tournament` because I need to read some of their attributes:\r\n\r\n    CriteriaBuilder builder = em.getCriteriaBuilder();\r\n    CriteriaQuery&lt;Registered&gt; criteria = builder.createQuery(Registered.class);\r\n    Root&lt;Registered&gt; root = criteria.from(Registered.class);\r\n    root.fetch(&quot;id.user&quot;, JoinType.LEFT);\r\n    root.fetch(&quot;id.tournament&quot;, JoinType.LEFT);\r\n    criteria.where(builder.equal(root.get(&quot;id.tournament.id&quot;), idTournament));\r\n    List&lt;Registered&gt; registereds = em.createQuery(criteria).getResultList();\r\n\r\nBut I&#39;m getting an error:\r\n\r\n    Execution exception[[CompletionException: java.lang.IllegalArgumentException: Unable to locate Attribute  with the the given name [id.user] on this ManagedType\r\n\r\nWhat I&#39;m doing wrong?\r\nHow can I fetch the relations on an `EmbeddedId` to access them?","title":"Hibernate criteria query fetch with embedded id","body":"<p>I have this <code>Entity</code> class:</p>\n\n<pre><code>@Entity\npublic class Registered implements Serializable {\n\n    @Id\n    public RegisteredId id;\n}\n</code></pre>\n\n<p>With this <code>EmbeddedId</code>:</p>\n\n<pre><code>@Embeddable\npublic class RegisteredId implements Serializable {\n    @ManyToOne\n    public User user;\n    @ManyToOne\n    public Tournament tournament;\n\n}\n</code></pre>\n\n<p>I'm trying to make this <code>Criteria query</code> fetching the <code>User</code> and the <code>Tournament</code> because I need to read some of their attributes:</p>\n\n<pre><code>CriteriaBuilder builder = em.getCriteriaBuilder();\nCriteriaQuery&lt;Registered&gt; criteria = builder.createQuery(Registered.class);\nRoot&lt;Registered&gt; root = criteria.from(Registered.class);\nroot.fetch(\"id.user\", JoinType.LEFT);\nroot.fetch(\"id.tournament\", JoinType.LEFT);\ncriteria.where(builder.equal(root.get(\"id.tournament.id\"), idTournament));\nList&lt;Registered&gt; registereds = em.createQuery(criteria).getResultList();\n</code></pre>\n\n<p>But I'm getting an error:</p>\n\n<pre><code>Execution exception[[CompletionException: java.lang.IllegalArgumentException: Unable to locate Attribute  with the the given name [id.user] on this ManagedType\n</code></pre>\n\n<p>What I'm doing wrong?\nHow can I fetch the relations on an <code>EmbeddedId</code> to access them?</p>\n"},{"tags":["java","maven-3","maven-plugin","exec-maven-plugin"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1688070759,"post_id":76565098,"comment_id":135028443,"body_markdown":"Can you explain why you are trying to replace `${revision}` with `1.0` ? Is there a reason for that?","body":"Can you explain why you are trying to replace <code>${revision}</code> with <code>1.0</code> ? Is there a reason for that?"},{"owner":{"account_id":26004423,"reputation":65,"user_id":19714358,"display_name":"Ramesh Thiyagarajan"},"score":0,"creation_date":1688100977,"post_id":76565098,"comment_id":135031310,"body_markdown":"we have tried implementing Maven Friendly version using ${revision}, it is working properly when we run the build from main pom. but if we run the build from any grand child pom then build is failing due to transitive dependencies. this we have noticed only on our own dependencies which has trasitive dependency on other pom.while gathering transitive dependency pom is looking for ${reivision} instead of   1.0.so we are trying to change the version using exec plugin.this issue presists only when we refer our own dependency in other pom&#39;s. pls advise if there is any better way to implement this.","body":"we have tried implementing Maven Friendly version using ${revision}, it is working properly when we run the build from main pom. but if we run the build from any grand child pom then build is failing due to transitive dependencies. this we have noticed only on our own dependencies which has trasitive dependency on other pom.while gathering transitive dependency pom is looking for ${reivision} instead of   1.0.so we are trying to change the version using exec plugin.this issue presists only when we refer our own dependency in other pom&#39;s. pls advise if there is any better way to implement this."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1688126348,"post_id":76565098,"comment_id":135035600,"body_markdown":"`but if we run the build from any grand child pom then build is failing due to transitive dependencies. ` that&#39;s correct because a multi module build has a foundation using the same version. If you use a child instead of starting from the root that might cause a lot of issues. Apart from that If you really need to change the version via command line you could use https://www.mojohaus.org/build-helper-maven-plugin/parse-version-mojo.html in combination with verisons-maven-plugin makes it easier...","body":"<code>but if we run the build from any grand child pom then build is failing due to transitive dependencies. </code> that&#39;s correct because a multi module build has a foundation using the same version. If you use a child instead of starting from the root that might cause a lot of issues. Apart from that If you really need to change the version via command line you could use <a href=\"https://www.mojohaus.org/build-helper-maven-plugin/parse-version-mojo.html\" rel=\"nofollow noreferrer\">mojohaus.org/build-helper-maven-plugin/parse-version-mojo.ht&zwnj;&#8203;ml</a> in combination with verisons-maven-plugin makes it easier..."}],"owner":{"account_id":26004423,"reputation":65,"user_id":19714358,"display_name":"Ramesh Thiyagarajan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687870583,"creation_date":1687870583,"question_id":76565098,"body_markdown":"Am trying to execute below command using maven-exec plugin, but it is not recognizing the executables properly.\r\n\r\ncommand am trying to execute\r\n```\r\nfind . -name &quot;pom.xml&quot; -exec sed -i s/1.0/\\$\\{revision\\}/g {} +\r\n```\r\nbelow is my plugin configuration in main pom.xml\r\n```\r\n&lt;plugin&gt;\r\n  &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n  &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\r\n  &lt;version&gt;3.0.0&lt;/version&gt;\r\n  &lt;executions&gt;\r\n    &lt;execution&gt;\r\n      &lt;id&gt;Execute Find and Sed&lt;/id&gt;\r\n      &lt;phase&gt;generate-sources&lt;/phase&gt;\r\n      &lt;goals&gt;\r\n        &lt;goal&gt;exec&lt;/goal&gt;\r\n      &lt;/goals&gt;\r\n      &lt;configuration&gt;\r\n        &lt;executable&gt;find&lt;/executable&gt;\r\n        &lt;arguments&gt;\r\n          &lt;argument&gt;.&lt;/argument&gt;\r\n          &lt;argument&gt;-name&lt;/argument&gt;\r\n          &lt;argument&gt;pom.xml&lt;/argument&gt;\r\n          &lt;argument&gt;-exec&lt;/argument&gt;\r\n          &lt;argument&gt;sed&lt;/argument&gt;\r\n          &lt;argument&gt;-i&lt;/argument&gt;\r\n          &lt;argument&gt;s/1.0/${revision}/g&lt;/argument&gt;\r\n          &lt;argument&gt;{}&lt;/argument&gt;\r\n          &lt;argument&gt;+&lt;/argument&gt;\r\n        &lt;/arguments&gt;\r\n      &lt;/configuration&gt;\r\n    &lt;/execution&gt;\r\n  &lt;/executions&gt;\r\n&lt;/plugin&gt;\r\n```\r\n\r\ngetting below error\r\n```\r\nERROR] Failed to execute goal org.codehaus.mojo:exec-maven-plugin:3.0.0:exec (Execute-Find-Sed) on project core: The parameter &#39;executable&#39; is missing or invalid -&gt; [Help 1]\r\n[ERROR]\r\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n```","title":"exec-maven-plugin is not recognizing executables","body":"<p>Am trying to execute below command using maven-exec plugin, but it is not recognizing the executables properly.</p>\n<p>command am trying to execute</p>\n<pre><code>find . -name &quot;pom.xml&quot; -exec sed -i s/1.0/\\$\\{revision\\}/g {} +\n</code></pre>\n<p>below is my plugin configuration in main pom.xml</p>\n<pre><code>&lt;plugin&gt;\n  &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n  &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\n  &lt;version&gt;3.0.0&lt;/version&gt;\n  &lt;executions&gt;\n    &lt;execution&gt;\n      &lt;id&gt;Execute Find and Sed&lt;/id&gt;\n      &lt;phase&gt;generate-sources&lt;/phase&gt;\n      &lt;goals&gt;\n        &lt;goal&gt;exec&lt;/goal&gt;\n      &lt;/goals&gt;\n      &lt;configuration&gt;\n        &lt;executable&gt;find&lt;/executable&gt;\n        &lt;arguments&gt;\n          &lt;argument&gt;.&lt;/argument&gt;\n          &lt;argument&gt;-name&lt;/argument&gt;\n          &lt;argument&gt;pom.xml&lt;/argument&gt;\n          &lt;argument&gt;-exec&lt;/argument&gt;\n          &lt;argument&gt;sed&lt;/argument&gt;\n          &lt;argument&gt;-i&lt;/argument&gt;\n          &lt;argument&gt;s/1.0/${revision}/g&lt;/argument&gt;\n          &lt;argument&gt;{}&lt;/argument&gt;\n          &lt;argument&gt;+&lt;/argument&gt;\n        &lt;/arguments&gt;\n      &lt;/configuration&gt;\n    &lt;/execution&gt;\n  &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>getting below error</p>\n<pre><code>ERROR] Failed to execute goal org.codehaus.mojo:exec-maven-plugin:3.0.0:exec (Execute-Find-Sed) on project core: The parameter 'executable' is missing or invalid -&gt; [Help 1]\n[ERROR]\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-data-redis","lettuce"],"answers":[{"tags":[],"owner":{"display_name":"user19682350"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687870332,"creation_date":1687870332,"answer_id":76565059,"question_id":76562651,"body_markdown":"To resolve the issue of having multiple Redis configurations and injecting the corresponding Redis templates, you can use the **@Qualifier** annotation to specify which Redis template should be injected in each case. Here&#39;s how you can modify your code to achieve this:\r\n\r\nUpdate the TokenRedisConfiguration class:\r\n\r\n\r\n    @Configuration\r\n    public class TokenRedisConfiguration {\r\n    \r\n        // ...\r\n    \r\n        @Bean\r\n        @Qualifier(&quot;tokenRedisTemplate&quot;)\r\n        public RedisTemplate&lt;String, Token&gt; tokenRedisTemplate(\r\n                @Qualifier(&quot;tokenRedisFactory&quot;) LettuceConnectionFactory tokenRedisFactory\r\n        ) {\r\n            RedisTemplate&lt;String, Token&gt; redisTemplate = new RedisTemplate&lt;&gt;();\r\n            redisTemplate.setConnectionFactory(tokenRedisFactory);\r\n            // Configure RedisTemplate\r\n            // ...\r\n            return redisTemplate;\r\n        }\r\n    \r\n    }\r\n\r\nUpdate the InvoiceRedisConfiguration class:\r\n\r\n\r\n    @Configuration\r\n    public class InvoiceRedisConfiguration {\r\n    \r\n        // ...\r\n    \r\n        @Bean\r\n        @Qualifier(&quot;invoiceRedisTemplate&quot;)\r\n        public RedisTemplate&lt;String, Invoice&gt; invoiceRedisTemplate(\r\n                @Qualifier(&quot;invoiceRedisFactory&quot;) LettuceConnectionFactory invoiceRedisFactory\r\n        ) {\r\n            RedisTemplate&lt;String, Invoice&gt; redisTemplate = new RedisTemplate&lt;&gt;();\r\n            redisTemplate.setConnectionFactory(invoiceRedisFactory);\r\n            // Configure RedisTemplate\r\n            // ...\r\n            return redisTemplate;\r\n        }\r\n    \r\n    }\r\n\r\nIn your controller or middleware classes, inject the Redis templates using the @Qualifier annotation:\r\n\r\n\r\n    @RestController\r\n    public class MyController {\r\n    \r\n        private final RedisTemplate&lt;String, Token&gt; tokenRedisTemplate;\r\n        private final RedisTemplate&lt;String, Invoice&gt; invoiceRedisTemplate;\r\n    \r\n        public MyController(\r\n                @Qualifier(&quot;tokenRedisTemplate&quot;) RedisTemplate&lt;String, Token&gt; tokenRedisTemplate,\r\n                @Qualifier(&quot;invoiceRedisTemplate&quot;) RedisTemplate&lt;String, Invoice&gt; invoiceRedisTemplate\r\n        ) {\r\n            this.tokenRedisTemplate = tokenRedisTemplate;\r\n            this.invoiceRedisTemplate = invoiceRedisTemplate;\r\n        }\r\n    \r\n        // Use tokenRedisTemplate and invoiceRedisTemplate in your methods\r\n    \r\n    }\r\n\r\nBy using the **@Qualifier** annotation along with the respective qualifier names (**tokenRedisTemplate** and **invoiceRedisTemplate**), you can specify which Redis template should be injected in each case. This way, both configurations will coexist, and you&#39;ll be able to use the Redis templates without exceptions.\r\n\r\n","title":"use multiple redis configuration spring boot","body":"<p>To resolve the issue of having multiple Redis configurations and injecting the corresponding Redis templates, you can use the <strong>@Qualifier</strong> annotation to specify which Redis template should be injected in each case. Here's how you can modify your code to achieve this:</p>\n<p>Update the TokenRedisConfiguration class:</p>\n<pre><code>@Configuration\npublic class TokenRedisConfiguration {\n\n    // ...\n\n    @Bean\n    @Qualifier(&quot;tokenRedisTemplate&quot;)\n    public RedisTemplate&lt;String, Token&gt; tokenRedisTemplate(\n            @Qualifier(&quot;tokenRedisFactory&quot;) LettuceConnectionFactory tokenRedisFactory\n    ) {\n        RedisTemplate&lt;String, Token&gt; redisTemplate = new RedisTemplate&lt;&gt;();\n        redisTemplate.setConnectionFactory(tokenRedisFactory);\n        // Configure RedisTemplate\n        // ...\n        return redisTemplate;\n    }\n\n}\n</code></pre>\n<p>Update the InvoiceRedisConfiguration class:</p>\n<pre><code>@Configuration\npublic class InvoiceRedisConfiguration {\n\n    // ...\n\n    @Bean\n    @Qualifier(&quot;invoiceRedisTemplate&quot;)\n    public RedisTemplate&lt;String, Invoice&gt; invoiceRedisTemplate(\n            @Qualifier(&quot;invoiceRedisFactory&quot;) LettuceConnectionFactory invoiceRedisFactory\n    ) {\n        RedisTemplate&lt;String, Invoice&gt; redisTemplate = new RedisTemplate&lt;&gt;();\n        redisTemplate.setConnectionFactory(invoiceRedisFactory);\n        // Configure RedisTemplate\n        // ...\n        return redisTemplate;\n    }\n\n}\n</code></pre>\n<p>In your controller or middleware classes, inject the Redis templates using the @Qualifier annotation:</p>\n<pre><code>@RestController\npublic class MyController {\n\n    private final RedisTemplate&lt;String, Token&gt; tokenRedisTemplate;\n    private final RedisTemplate&lt;String, Invoice&gt; invoiceRedisTemplate;\n\n    public MyController(\n            @Qualifier(&quot;tokenRedisTemplate&quot;) RedisTemplate&lt;String, Token&gt; tokenRedisTemplate,\n            @Qualifier(&quot;invoiceRedisTemplate&quot;) RedisTemplate&lt;String, Invoice&gt; invoiceRedisTemplate\n    ) {\n        this.tokenRedisTemplate = tokenRedisTemplate;\n        this.invoiceRedisTemplate = invoiceRedisTemplate;\n    }\n\n    // Use tokenRedisTemplate and invoiceRedisTemplate in your methods\n\n}\n</code></pre>\n<p>By using the <strong>@Qualifier</strong> annotation along with the respective qualifier names (<strong>tokenRedisTemplate</strong> and <strong>invoiceRedisTemplate</strong>), you can specify which Redis template should be injected in each case. This way, both configurations will coexist, and you'll be able to use the Redis templates without exceptions.</p>\n"}],"owner":{"account_id":14492613,"reputation":23,"user_id":10468313,"display_name":"Masoud Niki"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1110,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687870332,"creation_date":1687851794,"question_id":76562651,"body_markdown":"i need two redis configuration one for my tokens and one for my invoices \r\nthen i need to use them in different middlewares or controllers\r\n\r\n\r\nhere its my InvoiceRedisConfiguration\r\n\r\n    @Configuration\r\n    public class InvoiceRedisConfiguration {\r\n        @Value(&quot;${spring.redis.invoice.host:localhost}&quot;)\r\n        private String redisHost;\r\n    \r\n        @Value(&quot;${spring.redis.invoice.port:6379}&quot;)\r\n        private int redisPort;\r\n    \r\n        @Bean()\r\n        @Qualifier(&quot;invoiceRedisFactory&quot;)\r\n        public LettuceConnectionFactory invoiceRedisFactory(){\r\n            return new LettuceConnectionFactory(\r\n                    new RedisStandaloneConfiguration(redisHost,redisPort)\r\n            );\r\n        }\r\n    \r\n        @Bean\r\n        @Qualifier(&quot;invoiceRedisTemplate&quot;)\r\n        public RedisTemplate&lt;String, Invoice&gt; invoiceRedisTemplate(@Qualifier(&quot;invoiceRedisFactory&quot;) LettuceConnectionFactory invoiceRedisFactory){\r\n            RedisTemplate&lt;String, Invoice&gt; redisTemplate = new RedisTemplate&lt;&gt;();\r\n            redisTemplate.setConnectionFactory(invoiceRedisFactory);\r\n            redisTemplate.setKeySerializer(new StringRedisSerializer());\r\n            redisTemplate.setValueSerializer(new Jackson2JsonRedisSerializer&lt;&gt;(Object.class));\r\n            redisTemplate.setHashKeySerializer(new StringRedisSerializer());\r\n            redisTemplate.setHashValueSerializer(new Jackson2JsonRedisSerializer&lt;&gt;(Object.class));\r\n            redisTemplate.afterPropertiesSet();\r\n            return redisTemplate;\r\n        }\r\n    \r\n    }\r\n\r\nand tokenRedisConfiguration\r\n\r\n\r\n    @Configuration\r\n    public class TokenRedisConfiguration {\r\n    \r\n        @Value(&quot;${spring.redis.host:localhost}&quot;)\r\n        private String redisHost;\r\n    \r\n        @Value(&quot;${spring.redis.port:6379}&quot;)\r\n        private int redisPort;\r\n    \r\n        @Bean()\r\n        @Qualifier(&quot;tokenRedisFactory&quot;)\r\n        public LettuceConnectionFactory tokenRedisFactory(){\r\n            return new LettuceConnectionFactory(\r\n                    new RedisStandaloneConfiguration(redisHost,redisPort)\r\n            );\r\n        }\r\n    \r\n        @Bean()\r\n        @Qualifier(&quot;tokenRedisTemplate&quot;)\r\n        public RedisTemplate&lt;String,Token&gt; tokenRedisTemplate(@Qualifier(&quot;tokenRedisFactory&quot;) LettuceConnectionFactory tokenRedisFactory){\r\n            RedisTemplate&lt;String, Token&gt; redisTemplate = new RedisTemplate&lt;&gt;();\r\n            redisTemplate.setConnectionFactory(tokenRedisFactory);\r\n            redisTemplate.setKeySerializer(new StringRedisSerializer());\r\n            redisTemplate.setValueSerializer(new Jackson2JsonRedisSerializer&lt;&gt;(Token.class));\r\n            redisTemplate.setHashKeySerializer(new StringRedisSerializer());\r\n            redisTemplate.setHashValueSerializer(new Jackson2JsonRedisSerializer&lt;&gt;(Token.class));\r\n            redisTemplate.afterPropertiesSet();\r\n            return redisTemplate;\r\n        }\r\n    \r\n    \r\n    \r\n    \r\n    }\r\n\r\n\r\n\r\nthe problem is when im going to start application it says\r\n\r\n```\r\nParameter 0 of method reactiveRedisTemplate in org.springframework.boot.autoconfigure.data.redis.RedisReactiveAutoConfiguration required a single bean, but 2 were found:\r\n\t- invoiceRedisFactory: defined by method &#39;invoiceRedisFactory&#39; in class path resource [tsp/third/party/api/tsp/api/database/connections/invoice/InvoiceRedisConfiguration.class]\r\n\t- tokenRedisFactory: defined by method &#39;tokenRedisFactory&#39; in class path resource [tsp/third/party/api/tsp/api/database/connections/token/TokenRedisConfiguration.class]\r\n\r\n```\r\n\r\ni don&#39;t want to make one of them as my primary i need both in the same time\r\n\r\n\r\nand i don&#39;t have any idea how can i use both \r\n\r\n\r\n\r\n\r\n\r\n\r\n i need to inject tokenRedisTemplate and invoiceRetokenRedisTemplate in my methods without exception\r\n","title":"use multiple redis configuration spring boot","body":"<p>i need two redis configuration one for my tokens and one for my invoices\nthen i need to use them in different middlewares or controllers</p>\n<p>here its my InvoiceRedisConfiguration</p>\n<pre><code>@Configuration\npublic class InvoiceRedisConfiguration {\n    @Value(&quot;${spring.redis.invoice.host:localhost}&quot;)\n    private String redisHost;\n\n    @Value(&quot;${spring.redis.invoice.port:6379}&quot;)\n    private int redisPort;\n\n    @Bean()\n    @Qualifier(&quot;invoiceRedisFactory&quot;)\n    public LettuceConnectionFactory invoiceRedisFactory(){\n        return new LettuceConnectionFactory(\n                new RedisStandaloneConfiguration(redisHost,redisPort)\n        );\n    }\n\n    @Bean\n    @Qualifier(&quot;invoiceRedisTemplate&quot;)\n    public RedisTemplate&lt;String, Invoice&gt; invoiceRedisTemplate(@Qualifier(&quot;invoiceRedisFactory&quot;) LettuceConnectionFactory invoiceRedisFactory){\n        RedisTemplate&lt;String, Invoice&gt; redisTemplate = new RedisTemplate&lt;&gt;();\n        redisTemplate.setConnectionFactory(invoiceRedisFactory);\n        redisTemplate.setKeySerializer(new StringRedisSerializer());\n        redisTemplate.setValueSerializer(new Jackson2JsonRedisSerializer&lt;&gt;(Object.class));\n        redisTemplate.setHashKeySerializer(new StringRedisSerializer());\n        redisTemplate.setHashValueSerializer(new Jackson2JsonRedisSerializer&lt;&gt;(Object.class));\n        redisTemplate.afterPropertiesSet();\n        return redisTemplate;\n    }\n\n}\n</code></pre>\n<p>and tokenRedisConfiguration</p>\n<pre><code>@Configuration\npublic class TokenRedisConfiguration {\n\n    @Value(&quot;${spring.redis.host:localhost}&quot;)\n    private String redisHost;\n\n    @Value(&quot;${spring.redis.port:6379}&quot;)\n    private int redisPort;\n\n    @Bean()\n    @Qualifier(&quot;tokenRedisFactory&quot;)\n    public LettuceConnectionFactory tokenRedisFactory(){\n        return new LettuceConnectionFactory(\n                new RedisStandaloneConfiguration(redisHost,redisPort)\n        );\n    }\n\n    @Bean()\n    @Qualifier(&quot;tokenRedisTemplate&quot;)\n    public RedisTemplate&lt;String,Token&gt; tokenRedisTemplate(@Qualifier(&quot;tokenRedisFactory&quot;) LettuceConnectionFactory tokenRedisFactory){\n        RedisTemplate&lt;String, Token&gt; redisTemplate = new RedisTemplate&lt;&gt;();\n        redisTemplate.setConnectionFactory(tokenRedisFactory);\n        redisTemplate.setKeySerializer(new StringRedisSerializer());\n        redisTemplate.setValueSerializer(new Jackson2JsonRedisSerializer&lt;&gt;(Token.class));\n        redisTemplate.setHashKeySerializer(new StringRedisSerializer());\n        redisTemplate.setHashValueSerializer(new Jackson2JsonRedisSerializer&lt;&gt;(Token.class));\n        redisTemplate.afterPropertiesSet();\n        return redisTemplate;\n    }\n\n\n\n\n}\n</code></pre>\n<p>the problem is when im going to start application it says</p>\n<pre><code>Parameter 0 of method reactiveRedisTemplate in org.springframework.boot.autoconfigure.data.redis.RedisReactiveAutoConfiguration required a single bean, but 2 were found:\n    - invoiceRedisFactory: defined by method 'invoiceRedisFactory' in class path resource [tsp/third/party/api/tsp/api/database/connections/invoice/InvoiceRedisConfiguration.class]\n    - tokenRedisFactory: defined by method 'tokenRedisFactory' in class path resource [tsp/third/party/api/tsp/api/database/connections/token/TokenRedisConfiguration.class]\n\n</code></pre>\n<p>i don't want to make one of them as my primary i need both in the same time</p>\n<p>and i don't have any idea how can i use both</p>\n<p>i need to inject tokenRedisTemplate and invoiceRetokenRedisTemplate in my methods without exception</p>\n"},{"tags":["java","spring-boot","multithreading"],"owner":{"account_id":2028428,"reputation":423,"user_id":1812810,"accept_rate":41,"display_name":"kakoli"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687869760,"creation_date":1687505592,"question_id":76537970,"body_markdown":"I am using SpringBoot 2.7.2 with Tomcat embedded server.\r\nThe application does not have front-end. It is primarily controller-service-persistence with PostgreSQL as database, exposing the server as REST APIs.\r\nThe application can be accessed by upto 5000 concurrent users and the Response time &lt; 10msec.\r\n\r\nFor increasing max threads, there are options at Tomcat container level and then at Spring level : \r\n\r\n```\r\nserver.tomcat.threads.max (default 200)\r\nspring.task.execution.pool.max-size\r\n\r\n```\r\nMy questions :\r\n1)  When a client request comes, a Tomcat thread is taken from threadpool to service the request. What about the threads within Spring?\r\n2) For increasing application performance, which thread has a bigger role?\r\n3)  Tomcat embedded server has version 9.0.65. Does it have NIO enabled? If yes, how to confirm? If not, then is there a way to enable it for increasing performance?\r\n","title":"Increasing performance in Springboot application with Embedded tomcat server","body":"<p>I am using SpringBoot 2.7.2 with Tomcat embedded server.\nThe application does not have front-end. It is primarily controller-service-persistence with PostgreSQL as database, exposing the server as REST APIs.\nThe application can be accessed by upto 5000 concurrent users and the Response time &lt; 10msec.</p>\n<p>For increasing max threads, there are options at Tomcat container level and then at Spring level :</p>\n<pre><code>server.tomcat.threads.max (default 200)\nspring.task.execution.pool.max-size\n\n</code></pre>\n<p>My questions :</p>\n<ol>\n<li>When a client request comes, a Tomcat thread is taken from threadpool to service the request. What about the threads within Spring?</li>\n<li>For increasing application performance, which thread has a bigger role?</li>\n<li>Tomcat embedded server has version 9.0.65. Does it have NIO enabled? If yes, how to confirm? If not, then is there a way to enable it for increasing performance?</li>\n</ol>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9649,"page":343,"page_size":100}
