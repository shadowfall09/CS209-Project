{"items":[{"tags":["java","bit-manipulation"],"comments":[{"owner":{"account_id":196869,"reputation":402535,"user_id":440558,"accept_rate":75,"display_name":"Some programmer dude"},"score":0,"creation_date":1691142836,"post_id":76834773,"comment_id":135454975,"body_markdown":"I&#39;m guessing it&#39;s all to do with [two&#39;s complement](https://en.wikipedia.org/wiki/Two%27s_complement) which is the common way to store negative integers.","body":"I&#39;m guessing it&#39;s all to do with <a href=\"https://en.wikipedia.org/wiki/Two%27s_complement\" rel=\"nofollow noreferrer\">two&#39;s complement</a> which is the common way to store negative integers."}],"answers":[{"tags":[],"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1691142887,"creation_date":1691142887,"answer_id":76834820,"question_id":76834773,"body_markdown":"Your constants are ints. 0xFFFFFFFF and 0x00000000FFFFFFFF are both -1. These are equivalent to 0xFFFFFFFFFFFFFFFFL. Use 0xFFFFFFFF**L** and 0x00000000FFFFFFFF**L** instead and you&#39;ll see the results you want.","title":"Java bitwise AND incorrect output?","body":"<p>Your constants are ints. 0xFFFFFFFF and 0x00000000FFFFFFFF are both -1. These are equivalent to 0xFFFFFFFFFFFFFFFFL. Use 0xFFFFFFFF<strong>L</strong> and 0x00000000FFFFFFFF<strong>L</strong> instead and you'll see the results you want.</p>\n"},{"tags":[],"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1691142947,"creation_date":1691142947,"answer_id":76834827,"question_id":76834773,"body_markdown":"`0xFFFFFFFF` and `0x00000000FFFFFFFF` are both `int` literals, representing the value -1. \r\n\r\nWhen `&amp;` is applied on a `long` and an `int`, the `int` undergoes [numeric promotion][1], and gets converted to a `long`. \r\n\r\n&gt; Otherwise, if any expression is of type long, then the promoted type is long, and other expressions that are not of type long undergo [widening primitive conversion][2] to `long`.\r\n\r\nDuring this conversion, the value is sign-extended, \r\n\r\n&gt; A widening conversion of a signed integer value to an integral type T simply sign-extends the two&#39;s-complement representation of the integer value to fill the wider format.\r\n\r\nso you still get the same value (-1) as a `long`. -1&#39;s bits are all 1, so you get the same result.\r\n\r\nTo get the intended result, add the `L` suffix to these literals, so they are actually `long`s, and does not get sign-extended.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/specs/jls/se17/html/jls-5.html#jls-5.6\r\n  [2]: https://docs.oracle.com/javase/specs/jls/se17/html/jls-5.html#jls-5.1.2","title":"Java bitwise AND incorrect output?","body":"<p><code>0xFFFFFFFF</code> and <code>0x00000000FFFFFFFF</code> are both <code>int</code> literals, representing the value -1.</p>\n<p>When <code>&amp;</code> is applied on a <code>long</code> and an <code>int</code>, the <code>int</code> undergoes <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-5.html#jls-5.6\" rel=\"nofollow noreferrer\">numeric promotion</a>, and gets converted to a <code>long</code>.</p>\n<blockquote>\n<p>Otherwise, if any expression is of type long, then the promoted type is long, and other expressions that are not of type long undergo <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-5.html#jls-5.1.2\" rel=\"nofollow noreferrer\">widening primitive conversion</a> to <code>long</code>.</p>\n</blockquote>\n<p>During this conversion, the value is sign-extended,</p>\n<blockquote>\n<p>A widening conversion of a signed integer value to an integral type T simply sign-extends the two's-complement representation of the integer value to fill the wider format.</p>\n</blockquote>\n<p>so you still get the same value (-1) as a <code>long</code>. -1's bits are all 1, so you get the same result.</p>\n<p>To get the intended result, add the <code>L</code> suffix to these literals, so they are actually <code>long</code>s, and does not get sign-extended.</p>\n"}],"owner":{"account_id":5964120,"reputation":4275,"user_id":4688321,"display_name":"kiner_shah"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"accepted_answer_id":76834827,"answer_count":2,"score":0,"last_activity_date":1691142947,"creation_date":1691142491,"question_id":76834773,"body_markdown":"Java gives incorrect output when using Bitwise AND:\r\n```\r\nclass Main\r\n{\r\n    public static void main(String[] args)\r\n    {\r\n        long a = -26000;\r\n        System.out.printf(&quot;%X\\n&quot;, a);\r\n        // upper 32-bits are 0 (implicitly)\r\n        System.out.printf(&quot;%X\\n&quot;, (a &amp; 0xFFFFFFFF));\r\n        // upper 32-bits are 0 (explicitly specified)\r\n        System.out.printf(&quot;%X\\n&quot;, (a &amp; 0x00000000FFFFFFFF));\r\n    }\r\n}\r\n/*\r\nOutput:\r\nFFFFFFFFFFFF9A70\r\nFFFFFFFFFFFF9A70\r\nFFFFFFFFFFFF9A70\r\n*/\r\n```\r\nCode link: https://godbolt.org/z/Y8q3MhdK5\r\n\r\nAny ideas why?","title":"Java bitwise AND incorrect output?","body":"<p>Java gives incorrect output when using Bitwise AND:</p>\n<pre><code>class Main\n{\n    public static void main(String[] args)\n    {\n        long a = -26000;\n        System.out.printf(&quot;%X\\n&quot;, a);\n        // upper 32-bits are 0 (implicitly)\n        System.out.printf(&quot;%X\\n&quot;, (a &amp; 0xFFFFFFFF));\n        // upper 32-bits are 0 (explicitly specified)\n        System.out.printf(&quot;%X\\n&quot;, (a &amp; 0x00000000FFFFFFFF));\n    }\n}\n/*\nOutput:\nFFFFFFFFFFFF9A70\nFFFFFFFFFFFF9A70\nFFFFFFFFFFFF9A70\n*/\n</code></pre>\n<p>Code link: <a href=\"https://godbolt.org/z/Y8q3MhdK5\" rel=\"nofollow noreferrer\">https://godbolt.org/z/Y8q3MhdK5</a></p>\n<p>Any ideas why?</p>\n"},{"tags":["java","scala"],"answers":[{"tags":[],"owner":{"account_id":1656390,"reputation":859,"user_id":1525835,"accept_rate":75,"display_name":"Pedro Hidalgo"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1499575155,"creation_date":1499575155,"answer_id":44993034,"question_id":44993014,"body_markdown":"Yes, Scala classes can be called from Java and vice versa.\r\n\r\nThe below text is taken from: [Scala FAQs][1]\r\n\r\n&gt; What does it mean that Scala is compatible with Java?\r\n&gt; \r\n&gt; The standard Scala backend is a Java VM. Scala classes are Java classes, and vice versa. You can call the methods of either language from methods in the other one. You can extend Java classes in Scala, and vice versa. The main limitation is that some Scala features do not have equivalents in Java, for example traits.\r\n\r\nThe following post also could be helpful to you: [how to call Scala from Java][2]\r\n\r\n\r\n  [1]: http://www.scala-lang.org/old/faq/4\r\n  [2]: http://blog.muhuk.com/2016/05/24/how_to_call_scala_from_java__using_scala_classes.html#.WWGyrtPytTY","title":"Can Scala classes be used in Java?","body":"<p>Yes, Scala classes can be called from Java and vice versa.</p>\n\n<p>The below text is taken from: <a href=\"http://www.scala-lang.org/old/faq/4\" rel=\"noreferrer\">Scala FAQs</a></p>\n\n<blockquote>\n  <p>What does it mean that Scala is compatible with Java?</p>\n  \n  <p>The standard Scala backend is a Java VM. Scala classes are Java classes, and vice versa. You can call the methods of either language from methods in the other one. You can extend Java classes in Scala, and vice versa. The main limitation is that some Scala features do not have equivalents in Java, for example traits.</p>\n</blockquote>\n\n<p>The following post also could be helpful to you: <a href=\"http://blog.muhuk.com/2016/05/24/how_to_call_scala_from_java__using_scala_classes.html#.WWGyrtPytTY\" rel=\"noreferrer\">how to call Scala from Java</a></p>\n"},{"tags":[],"owner":{"account_id":8540808,"reputation":361,"user_id":6401022,"accept_rate":80,"display_name":"Stefan Fischer"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1499579983,"creation_date":1499579983,"answer_id":44993460,"question_id":44993014,"body_markdown":"Yes. If you want to do this, there are a few things you might want to remember:\r\n\r\n- Do not use operators in your method names or provide a wordy alternative. Operator names can be called from Java but are mangled into somethings very ugly.\r\n- Java users might expect Java style getters and setters. You can produce those automatically by adding `@BeanProperty` annotation to fields.\r\n- In the same way Java user might be accustomed to factory methods called `ClassName.of` where Scala uses `.apply`. Those you have to provide by hand, if you want to provide that service. ","title":"Can Scala classes be used in Java?","body":"<p>Yes. If you want to do this, there are a few things you might want to remember:</p>\n\n<ul>\n<li>Do not use operators in your method names or provide a wordy alternative. Operator names can be called from Java but are mangled into somethings very ugly.</li>\n<li>Java users might expect Java style getters and setters. You can produce those automatically by adding <code>@BeanProperty</code> annotation to fields.</li>\n<li>In the same way Java user might be accustomed to factory methods called <code>ClassName.of</code> where Scala uses <code>.apply</code>. Those you have to provide by hand, if you want to provide that service. </li>\n</ul>\n"}],"owner":{"account_id":1192551,"reputation":307,"user_id":1165008,"accept_rate":33,"display_name":"Kannan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10184,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"answer_count":2,"score":10,"last_activity_date":1691142681,"creation_date":1499574834,"question_id":44993014,"body_markdown":"    class Wish{\r\n        val s = &quot;Hello! User.  Wish you a Great day.&quot;\r\n    }\r\n    \r\n    object Wish{\r\n        def main(args: Array[String]){\r\n            val w = new Wish()\r\n            println(&quot;Value - &quot; + w.s )\r\n       }\r\n    }\r\n\r\nJava classes can be used in Scala.  Similarly,  can Scala classes be used in Java?\r\n","title":"Can Scala classes be used in Java?","body":"<pre><code>class Wish{\n    val s = \"Hello! User.  Wish you a Great day.\"\n}\n\nobject Wish{\n    def main(args: Array[String]){\n        val w = new Wish()\n        println(\"Value - \" + w.s )\n   }\n}\n</code></pre>\n\n<p>Java classes can be used in Scala.  Similarly,  can Scala classes be used in Java?</p>\n"},{"tags":["java","quarkus","corba"],"comments":[{"owner":{"account_id":5297359,"reputation":473,"user_id":4784969,"accept_rate":17,"display_name":"Politechniczny"},"score":0,"creation_date":1691142809,"post_id":76834796,"comment_id":135454970,"body_markdown":"It looks that Quarkus class loader can&#39;t find the class.","body":"It looks that Quarkus class loader can&#39;t find the class."},{"owner":{"account_id":5297359,"reputation":473,"user_id":4784969,"accept_rate":17,"display_name":"Politechniczny"},"score":0,"creation_date":1691147659,"post_id":76834796,"comment_id":135455807,"body_markdown":"For some reason when you run `quarkus dev` then classes are NOT visible but when you build uber-jar, then classes are packed in .jar and loaded successfully.","body":"For some reason when you run <code>quarkus dev</code> then classes are NOT visible but when you build uber-jar, then classes are packed in .jar and loaded successfully."}],"owner":{"account_id":5297359,"reputation":473,"user_id":4784969,"accept_rate":17,"display_name":"Politechniczny"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":128,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691142668,"creation_date":1691142668,"question_id":76834796,"body_markdown":"In ``pom.xml`` there is dependency:\r\n```xml\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;org.jboss.openjdk-orb&lt;/groupId&gt;\r\n  &lt;artifactId&gt;openjdk-orb-jakarta&lt;/artifactId&gt;\r\n  &lt;version&gt;8.1.9.Final&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\nNow I try to init CORBA ORB:\r\n```java\r\nvar properties = new Properties();\r\nvar args = new String[]{&quot;-ORBInitRef&quot;, nameServiceReference);\r\nvar orb = ORB.init(args, properties);  // this fails\r\n```\r\nThe exception is:\r\n```\r\njava.lang.RuntimeException: Failed to start quarkus\r\nCaused by: java.lang.NoClassDefFoundError: org/omg/CORBA/NamedValue\r\nCaused by: java.lang.ClassNotFoundException: org.omg.CORBA.NamedValue\r\n```\r\nWhat I tried is to use different CORBA implementations including Glassfish and Jacorb:\r\n```pom.xml\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;org.jacorb&lt;/groupId&gt;\r\n  &lt;artifactId&gt;jacorb-omgapi&lt;/artifactId&gt;\r\n  &lt;version&gt;3.9&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\nBut the problem still exists.\r\n\r\nIn stubs generated by IDL compiler there is ``NamedValue`` interface and ``_NamedValueStub`` class:\r\n\r\n```java\r\npublic interface NamedValue extends NamedValueOperations, org.omg.CORBA.Object, org.omg.CORBA.portable.IDLEntity \r\n{\r\n} // interface NamedValue\r\n\r\npublic class _NamedValueStub extends org.omg.CORBA.portable.ObjectImpl implements org.omg.CORBA.NamedValue\r\n{\r\n\r\n  // Type-specific CORBA::Object operations\r\n  private static String[] __ids = {&quot;IDL:CORBA/NamedValue:1.0&quot;};\r\n\r\n  // ............\r\n}\r\n```\r\nThe IDL defining it contains:\r\n```\r\nmodule CORBA\r\n{\r\n    interface NamedValue { };\r\n};\r\n```\r\nAny workaround for this? How to init ORB properly?","title":"How to init CORBA in Quarkus Java 17 application?","body":"<p>In <code>pom.xml</code> there is dependency:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.jboss.openjdk-orb&lt;/groupId&gt;\n  &lt;artifactId&gt;openjdk-orb-jakarta&lt;/artifactId&gt;\n  &lt;version&gt;8.1.9.Final&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Now I try to init CORBA ORB:</p>\n<pre class=\"lang-java prettyprint-override\"><code>var properties = new Properties();\nvar args = new String[]{&quot;-ORBInitRef&quot;, nameServiceReference);\nvar orb = ORB.init(args, properties);  // this fails\n</code></pre>\n<p>The exception is:</p>\n<pre><code>java.lang.RuntimeException: Failed to start quarkus\nCaused by: java.lang.NoClassDefFoundError: org/omg/CORBA/NamedValue\nCaused by: java.lang.ClassNotFoundException: org.omg.CORBA.NamedValue\n</code></pre>\n<p>What I tried is to use different CORBA implementations including Glassfish and Jacorb:</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.jacorb&lt;/groupId&gt;\n  &lt;artifactId&gt;jacorb-omgapi&lt;/artifactId&gt;\n  &lt;version&gt;3.9&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>But the problem still exists.</p>\n<p>In stubs generated by IDL compiler there is <code>NamedValue</code> interface and <code>_NamedValueStub</code> class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface NamedValue extends NamedValueOperations, org.omg.CORBA.Object, org.omg.CORBA.portable.IDLEntity \n{\n} // interface NamedValue\n\npublic class _NamedValueStub extends org.omg.CORBA.portable.ObjectImpl implements org.omg.CORBA.NamedValue\n{\n\n  // Type-specific CORBA::Object operations\n  private static String[] __ids = {&quot;IDL:CORBA/NamedValue:1.0&quot;};\n\n  // ............\n}\n</code></pre>\n<p>The IDL defining it contains:</p>\n<pre><code>module CORBA\n{\n    interface NamedValue { };\n};\n</code></pre>\n<p>Any workaround for this? How to init ORB properly?</p>\n"},{"tags":["java","xslt","xslt-2.0","saxon"],"comments":[{"owner":{"account_id":91947,"reputation":161814,"user_id":252228,"accept_rate":80,"display_name":"Martin Honnen"},"score":0,"creation_date":1691138808,"post_id":76834290,"comment_id":135454180,"body_markdown":"First of all, the supported versions of Saxon are 11 and 12 and 10, all XSLT 3.0 processors. If you want to write extension functions in Java check the documentation e.g. https://www.saxonica.com/html/documentation10/extensibility/integratedfunctions/","body":"First of all, the supported versions of Saxon are 11 and 12 and 10, all XSLT 3.0 processors. If you want to write extension functions in Java check the documentation e.g. <a href=\"https://www.saxonica.com/html/documentation10/extensibility/integratedfunctions/\" rel=\"nofollow noreferrer\">saxonica.com/html/documentation10/extensibility/&hellip;</a>"},{"owner":{"account_id":91947,"reputation":161814,"user_id":252228,"accept_rate":80,"display_name":"Martin Honnen"},"score":0,"creation_date":1691138897,"post_id":76834290,"comment_id":135454204,"body_markdown":"There are also commercial PE and EE editions of Saxon that have support for e.g. the EXPath file module https://www.saxonica.com/html/documentation10/extensions/functions/expath.html","body":"There are also commercial PE and EE editions of Saxon that have support for e.g. the EXPath file module <a href=\"https://www.saxonica.com/html/documentation10/extensions/functions/expath.html\" rel=\"nofollow noreferrer\">saxonica.com/html/documentation10/extensions/functions/&hellip;</a>"},{"owner":{"account_id":10589563,"reputation":15,"user_id":7800643,"display_name":"ashish sharma"},"score":0,"creation_date":1691140719,"post_id":76834290,"comment_id":135454570,"body_markdown":"@MartinHonnen I don&#39;t understood with what you meant by XSLT 3.0 processor , does Saxon support XSLT -2.0 ?","body":"@MartinHonnen I don&#39;t understood with what you meant by XSLT 3.0 processor , does Saxon support XSLT -2.0 ?"},{"owner":{"account_id":91947,"reputation":161814,"user_id":252228,"accept_rate":80,"display_name":"Martin Honnen"},"score":0,"creation_date":1691140868,"post_id":76834290,"comment_id":135454596,"body_markdown":"Saxon 9.8 and later are XSLT 3 processors.","body":"Saxon 9.8 and later are XSLT 3 processors."},{"owner":{"account_id":10589563,"reputation":15,"user_id":7800643,"display_name":"ashish sharma"},"score":0,"creation_date":1691141798,"post_id":76834290,"comment_id":135454755,"body_markdown":"So is there any other processor for XSLT-2.0 onwards for JAVA world ?","body":"So is there any other processor for XSLT-2.0 onwards for JAVA world ?"},{"owner":{"account_id":91947,"reputation":161814,"user_id":252228,"accept_rate":80,"display_name":"Martin Honnen"},"score":0,"creation_date":1691142044,"post_id":76834290,"comment_id":135454807,"body_markdown":"Older versions of Saxon (8.9 to 9.7) implement XSLT 2.0. Of course any XSLT 3 processor does run XSLT 2 code.","body":"Older versions of Saxon (8.9 to 9.7) implement XSLT 2.0. Of course any XSLT 3 processor does run XSLT 2 code."},{"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"score":0,"creation_date":1691142321,"post_id":76834290,"comment_id":135454864,"body_markdown":"Saxon no longer has an &quot;XSLT 2.0&quot; mode of operation, in the sense that it will reject anything that&#39;s not allowed by the XSLT 2.0 specification. But 3.0 is highly compatible, so all 2.0 stylesheets will run without problems.","body":"Saxon no longer has an &quot;XSLT 2.0&quot; mode of operation, in the sense that it will reject anything that&#39;s not allowed by the XSLT 2.0 specification. But 3.0 is highly compatible, so all 2.0 stylesheets will run without problems."}],"answers":[{"tags":[],"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691142570,"creation_date":1691142570,"answer_id":76834780,"question_id":76834290,"body_markdown":"Your stylesheet is using Xalan-specific XSLT extensions to call out to Java code, such as \r\n\r\n    &lt;lxslt:component prefix=&quot;setfile&quot; elements=&quot;copy&quot; functions=&quot;setFile setTcFile getCurrentDir\r\n            getCurrentImanFileName getCurrentImanFileNamePrefix getNiceName&quot;&gt;\r\n      &lt;lxslt:script lang=&quot;javaclass&quot; src=&quot;com.teamcenter.rac.cme.cmereport.CMEReportXalanExtension&quot;/&gt;\r\n    &lt;/lxslt:component&gt;\r\n\r\nSaxon is able to call out to Java, but the details of how to do so differ from the way Xalan does it (partly for security reasons, partly to cater for the fact that the type system in XSLT 2.0+ is much richer than the 1.0 type system.) So you will need to change this part of your code when moving from Xalan to Saxon.","title":"Facing Issue while using Saxon Processor For XML Conversion in XSLT-2.0","body":"<p>Your stylesheet is using Xalan-specific XSLT extensions to call out to Java code, such as</p>\n<pre><code>&lt;lxslt:component prefix=&quot;setfile&quot; elements=&quot;copy&quot; functions=&quot;setFile setTcFile getCurrentDir\n        getCurrentImanFileName getCurrentImanFileNamePrefix getNiceName&quot;&gt;\n  &lt;lxslt:script lang=&quot;javaclass&quot; src=&quot;com.teamcenter.rac.cme.cmereport.CMEReportXalanExtension&quot;/&gt;\n&lt;/lxslt:component&gt;\n</code></pre>\n<p>Saxon is able to call out to Java, but the details of how to do so differ from the way Xalan does it (partly for security reasons, partly to cater for the fact that the type system in XSLT 2.0+ is much richer than the 1.0 type system.) So you will need to change this part of your code when moving from Xalan to Saxon.</p>\n"}],"owner":{"account_id":10589563,"reputation":15,"user_id":7800643,"display_name":"ashish sharma"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76834780,"answer_count":1,"score":0,"last_activity_date":1691142570,"creation_date":1691138377,"question_id":76834290,"body_markdown":"I am Using saxon processor for conversion of XML with XSLT-2.0. but its giving error for XSL file . \r\n\r\nBelow is the Code for XSL File\r\n\r\n    &lt;?xml version=&quot;1.0&quot;?&gt;\r\n    &lt;xsl:stylesheet version=&quot;2.0&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;\r\n    xmlns:plm=&quot;http://www.plmxml.org/Schemas/PLMXMLSchema&quot;\r\n    xmlns:lxslt=&quot;http://www.apache.org/xslt&quot;\r\n    xmlns:setfile =&quot;com.teamcenter.rac.cme.cmereport.CMEReportXalanExtension&quot;&gt;\r\n    \r\n    &lt;xsl:key name=&quot;Occurrence&quot; match=&quot;plm:Occurrence | plm:WorkAreaOccurrence&quot; use=&quot;@id&quot;/&gt;\r\n    &lt;xsl:key name=&quot;Operation&quot; match=&quot;plm:Operation&quot; use=&quot;@id&quot;/&gt;\r\n    &lt;xsl:key name=&quot;OperationRevision&quot; match=&quot;plm:OperationRevision&quot; use=&quot;@id&quot;/&gt;\r\n    &lt;xsl:key name=&quot;Process&quot; match=&quot;plm:Process | plm:Operation&quot; use=&quot;@id&quot;/&gt;\r\n    &lt;xsl:key name=&quot;ProcessOccurrence&quot; match=&quot;plm:ProcessOccurrence | plm:Occurrence | plm:WorkAreaOccurrence&quot; use=&quot;@id&quot;/&gt;\r\n    &lt;xsl:key name=&quot;ProcessRevision&quot; match=&quot;plm:ProcessRevision | plm:OperationRevision&quot; use=&quot;@id&quot;/&gt;\r\n    &lt;xsl:key name=&quot;ProcessView&quot; match=&quot;plm:ProcessView&quot; use=&quot;@id&quot;/&gt;\r\n    &lt;xsl:key name=&quot;ProcOpRevision&quot; match=&quot;plm:ProcessRevision | plm:OperationRevision&quot; use=&quot;@id&quot;/&gt;\r\n    \r\n    &lt;lxslt:component prefix=&quot;setfile&quot; elements=&quot;copy&quot; functions=&quot;setFile setTcFile getCurrentDir\r\n            getCurrentImanFileName getCurrentImanFileNamePrefix getNiceName&quot;&gt;\r\n      &lt;lxslt:script lang=&quot;javaclass&quot; src=&quot;com.teamcenter.rac.cme.cmereport.CMEReportXalanExtension&quot;/&gt;\r\n    &lt;/lxslt:component&gt;\r\n    \r\n    &lt;xsl:output method=&quot;html&quot; indent=&quot;yes&quot;/&gt;\r\n    &lt;xsl:param name=&quot;outDir&quot; select=&quot;setfile:getCurrentDir(setfile:new())&quot;/&gt;\r\n    &lt;xsl:variable name=&quot;roid&quot; select=&quot;/plm:PLMXML/plm:ProcessView/@rootRefs&quot;/&gt;&lt;!-- rootRef instead of prima.. --&gt;\r\n    &lt;!-- Assuming that the primaryOccurrenceRef(&amp; NO MULTIPLE ENTRY POINTS) is always a ProcessOccurrence --&gt;\r\n    &lt;xsl:variable name=&quot;rpoe&quot; select=&quot;key(&#39;ProcessOccurrence&#39;,$roid)&quot;/&gt;\r\n    &lt;xsl:variable name=&quot;rprid&quot; select=&quot;substring-after($rpoe/@instancedRef,&#39;#&#39;)&quot;/&gt;\r\n    &lt;xsl:variable name=&quot;root&quot; select=&quot;key(&#39;ProcessRevision&#39;,$rprid)&quot;/&gt;\r\n    \r\n    &lt;xsl:template match=&quot;/&quot;&gt;\r\n        &lt;xsl:call-template name=&quot;genData&quot;&gt;\r\n            &lt;xsl:with-param name=&quot;curProc&quot; select=&quot;$root&quot;/&gt;\r\n            &lt;xsl:with-param name=&quot;occStr&quot; select=&quot;$rpoe/@occurrenceRefs&quot;/&gt;\r\n        &lt;/xsl:call-template&gt;\r\n    &lt;/xsl:template&gt;\r\n    \r\n    &lt;xsl:template name=&quot;genData&quot;&gt;\r\n    &lt;xsl:param name=&quot;curProc&quot;/&gt;\r\n    &lt;xsl:param name=&quot;occStr&quot;/&gt;\r\n        &lt;html&gt;\r\n            &lt;head&gt;\r\n                &lt;title&gt;Process: &lt;xsl:value-of select=&quot;$curProc/@name&quot;/&gt;&lt;/title&gt;\r\n            &lt;/head&gt;\r\n            &lt;body BGCOLOR=&quot;#FFFFFF&quot; link=&quot;#0000FF&quot; vlink=&quot;#660066&quot;&gt;\r\n                &lt;br/&gt;\r\n                            &lt;!-- Support for Foxfire browser requires specific class=&quot;sample&quot; on all table elements --&gt;\r\n                &lt;table class=&quot;sample&quot;&gt;&lt;!-- main table --&gt;\r\n                    &lt;xsl:call-template name=&quot;heading&quot;&gt;\r\n                        &lt;xsl:with-param name=&quot;title&quot; select=&quot;&#39;Process Report&#39;&quot;/&gt;\r\n                    &lt;/xsl:call-template&gt;\r\n                                    &lt;tr&gt;\r\n                                            &lt;td&gt;\r\n                                                    &lt;xsl:variable name=&quot;procid&quot;&gt;\r\n                                                            &lt;xsl:call-template name=&quot;cleanId&quot;&gt;\r\n                                                                    &lt;xsl:with-param name=&quot;id&quot; select=&quot;$curProc/@masterRef&quot;/&gt;\r\n                                                            &lt;/xsl:call-template&gt;\r\n                                                    &lt;/xsl:variable&gt;\r\n                                                    &lt;xsl:variable name=&quot;proc&quot; select=&quot;key(&#39;Process&#39;,$procid)&quot;/&gt;\r\n                                                    &lt;xsl:value-of select=&quot;concat($proc/@catalogueId,&#39;/&#39;,$curProc/@revision,&#39; - &#39;,$curProc/@name)&quot;/&gt;\r\n                                            &lt;/td&gt;\r\n                                    &lt;/tr&gt;\r\n    \r\n                    &lt;tr&gt;&lt;!-- main table:row6::sub level --&gt;\r\n                        &lt;td&gt;\r\n                            &lt;hr color=&quot;#000000&quot;/&gt;\r\n                            &lt;table class=&quot;sample&quot;&gt;\r\n                            &lt;tr&gt;\r\n                                &lt;th&gt;Name&lt;/th&gt;\r\n                            &lt;/tr&gt;\r\n                            &lt;xsl:call-template name=&quot;createCL&quot;&gt;\r\n                                &lt;xsl:with-param name=&quot;chStr&quot; select=&quot;$occStr&quot;/&gt;\r\n                            &lt;/xsl:call-template&gt;\r\n                            &lt;/table&gt;\r\n                        &lt;/td&gt;\r\n                    &lt;/tr&gt;\r\n                &lt;/table&gt;\r\n            &lt;/body&gt;\r\n        &lt;/html&gt;\r\n    &lt;/xsl:template&gt;\r\n    \r\n    &lt;xsl:template name=&quot;createCL&quot;&gt;\r\n    &lt;xsl:param name=&quot;chStr&quot;/&gt;\r\n        &lt;xsl:variable name=&quot;genele&quot; select=&quot;key(&#39;ProcessOccurrence&#39;,$chStr)&quot;/&gt;\r\n                    &lt;xsl:if test=&quot;name($genele)=&#39;ProcessOccurrence&#39;&quot;&gt;\r\n                        &lt;xsl:call-template name=&quot;creCLext&quot;&gt;\r\n                            &lt;xsl:with-param name=&quot;genel&quot; select=&quot;$genele&quot;/&gt;\r\n                        &lt;/xsl:call-template&gt;\r\n                    &lt;/xsl:if&gt;\r\n    &lt;/xsl:template&gt;\r\n    \r\n    &lt;xsl:template name=&quot;creCLext&quot;&gt;\r\n    &lt;xsl:param name=&quot;genel&quot;/&gt;\r\n        &lt;xsl:variable name=&quot;procid&quot; select=&quot;substring-after($genel/@instancedRef,&#39;#&#39;)&quot;/&gt;\r\n        &lt;xsl:variable name=&quot;procele&quot; select=&quot;key(&#39;ProcOpRevision&#39;,$procid)&quot;/&gt;&lt;!-- ProcessRevision or OperationRevision --&gt;\r\n        &lt;xsl:variable name=&quot;pre1&quot; select=&quot;substring-after($genel/@predecessorRefs,&#39;#&#39;)&quot;/&gt;&lt;!--assuming only one id to be present --&gt;\r\n        &lt;xsl:variable name=&quot;pre2&quot; select=&quot;key(&#39;ProcessOccurrence&#39;,$pre1)&quot;/&gt;\r\n        &lt;xsl:variable name=&quot;preid&quot; select=&quot;substring-after($pre2/@instancedRef,&#39;#&#39;)&quot;/&gt;\r\n        &lt;xsl:variable name=&quot;prele&quot; select=&quot;/plm:PLMXML/*[@id=$preid]&quot;/&gt;\r\n        &lt;tr&gt;\r\n        &lt;td align=&quot;center&quot;&gt;&lt;a&gt;\r\n            &lt;xsl:attribute name=&quot;href&quot;&gt;\r\n                &lt;xsl:value-of select=&quot;concat($procid,&#39;.html&#39;)&quot;/&gt;\r\n            &lt;/xsl:attribute&gt;\r\n            &lt;xsl:value-of select=&quot;$procele/@name&quot;/&gt;\r\n        &lt;/a&gt;&lt;/td&gt;\r\n         \r\n        &lt;/tr&gt;\r\n        &lt;result-document href=&quot;concat($procid,&#39;.html&#39;)&quot;&gt;\r\n        &lt;xsl:call-template name=&quot;genopr&quot;&gt;\r\n                    &lt;xsl:with-param name=&quot;curOpr&quot; select=&quot;$procele&quot;/&gt;\r\n                    &lt;xsl:with-param name=&quot;genel&quot; select=&quot;$genel&quot;/&gt;\r\n                &lt;/xsl:call-template&gt;\r\n        &lt;/result-document&gt;\r\n    &lt;/xsl:template&gt;\r\n    \r\n    &lt;xsl:template name=&quot;genopr&quot;&gt;\r\n    &lt;xsl:param name=&quot;curOpr&quot;/&gt;\r\n    &lt;xsl:param name=&quot;genel&quot;/&gt;\r\n        &lt;html&gt;\r\n            &lt;head&gt;\r\n                &lt;title&gt;Operation: &lt;xsl:value-of select=&quot;$curOpr/@name&quot;/&gt;&lt;/title&gt;\r\n            &lt;/head&gt;\r\n            &lt;body BGCOLOR=&quot;#FFFFFF&quot; link=&quot;#0000FF&quot; vlink=&quot;#660066&quot;&gt;\r\n                &lt;br/&gt;\r\n                &lt;table class=&quot;sample&quot;&gt;&lt;!-- main table --&gt;\r\n                    &lt;xsl:call-template name=&quot;heading&quot;&gt;\r\n                        &lt;xsl:with-param name=&quot;title&quot; select=&quot;&#39;Operation Report&#39;&quot;/&gt;\r\n                    &lt;/xsl:call-template&gt;\r\n                                    &lt;tr&gt;\r\n                                            &lt;td&gt;\r\n                                                    &lt;xsl:variable name=&quot;procid&quot;&gt;\r\n                                                            &lt;xsl:call-template name=&quot;cleanId&quot;&gt;\r\n                                                                    &lt;xsl:with-param name=&quot;id&quot; select=&quot;$curOpr/@masterRef&quot;/&gt;\r\n                                                            &lt;/xsl:call-template&gt;\r\n                                                    &lt;/xsl:variable&gt;\r\n                                                    &lt;xsl:variable name=&quot;proc&quot; select=&quot;key(&#39;Process&#39;,$procid)&quot;/&gt;\r\n                                                    &lt;xsl:value-of select=&quot;concat($proc/@catalogueId,&#39;/&#39;,$curOpr/@revision,&#39; - &#39;,$curOpr/@name)&quot;/&gt;\r\n                                            &lt;/td&gt;\r\n                                    &lt;/tr&gt;\r\n                    \r\n                &lt;/table&gt;\r\n            &lt;/body&gt;\r\n        &lt;/html&gt;\r\n    \r\n    &lt;/xsl:template&gt;\r\n    \r\n    &lt;xsl:template name=&quot;heading&quot;&gt;\r\n    &lt;xsl:param name=&quot;title&quot;/&gt;\r\n                    &lt;tr&gt;&lt;!-- main table:row1::heading--&gt;\r\n                        &lt;th&gt;\r\n                            &lt;div align=&quot;left&quot;&gt;\r\n                            &lt;/div&gt;\r\n                            &lt;div align=&quot;center&quot;&gt;&lt;b&gt;&lt;font size=&quot;+2&quot;&gt;&lt;xsl:value-of select=&quot;$title&quot;/&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;br/&gt;\r\n                        &lt;/th&gt;\r\n                    &lt;/tr&gt;\r\n    &lt;/xsl:template&gt;\r\n    &lt;xsl:template name=&quot;cleanId&quot;&gt;\r\n        &lt;xsl:param name=&quot;id&quot;/&gt;\r\n    \r\n        &lt;xsl:choose&gt;\r\n            &lt;xsl:when test=&quot;contains($id, &#39;#&#39;)&quot;&gt;\r\n                &lt;xsl:value-of select=&quot;substring-after($id,&#39;#&#39;)&quot;/&gt;\r\n            &lt;/xsl:when&gt;\r\n            &lt;xsl:otherwise&gt;\r\n                &lt;xsl:value-of select=&quot;$id&quot;/&gt;\r\n            &lt;/xsl:otherwise&gt;\r\n        &lt;/xsl:choose&gt;\r\n    &lt;/xsl:template&gt;\r\n    \r\n    &lt;/xsl:stylesheet&gt;\r\n\r\nBelow is the the code where we are calling the transformer for conversion from XML to HTML.\r\n\r\n    {\r\n             \r\n\r\n            // 1. Instantiate a TransformerFactory.\r\n            javax.xml.transform.TransformerFactory tFactory =(SAXTransformerFactory) SAXTransformerFactory.newInstance();\r\n\r\n            XslImportResolver myResolve = new XslImportResolver();\r\n            tFactory.setURIResolver( myResolve );\r\n\r\n            // 2. Use the TransformerFactory to process the stylesheet Source and\r\n            //                generate a Transformer.\r\n            javax.xml.transform.Transformer transformer = tFactory.newTransformer\r\n                            (new javax.xml.transform.stream.StreamSource(xslLocation));\r\n\r\n            // Add debugging output if it is definded in the Registry.\r\n            Registry registry = Registry.getRegistry( this );\r\n\r\n            // 3. Use the Transformer to perform the transformation and send the\r\n            //          the output to a Result object.\r\n            transformer.transform( new StreamSource( xmlLocation ),\r\n                    new StreamResult( new FileOutputStream( htmlLocation ) ) );\r\n        }\r\n\r\nWe are getting below error : \r\nStatic error near {...e:getCurrentDir(setfile:new...} at char 22 in expression in xsl:param/@select on line 22 column 73 of PLMXML_DefaultProcessReport.xsl:\r\n  XPST0017: Cannot find a 0-argument function named\r\n  Q{com.teamcenter.rac.cme.cmereport.CMEReportXalanExtension}new()\r\n\r\n\r\n\r\n\r\nwe remove xalan dependencies and now updated XSLT-2.0 and using Saxon processor.","title":"Facing Issue while using Saxon Processor For XML Conversion in XSLT-2.0","body":"<p>I am Using saxon processor for conversion of XML with XSLT-2.0. but its giving error for XSL file .</p>\n<p>Below is the Code for XSL File</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot;?&gt;\n&lt;xsl:stylesheet version=&quot;2.0&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;\nxmlns:plm=&quot;http://www.plmxml.org/Schemas/PLMXMLSchema&quot;\nxmlns:lxslt=&quot;http://www.apache.org/xslt&quot;\nxmlns:setfile =&quot;com.teamcenter.rac.cme.cmereport.CMEReportXalanExtension&quot;&gt;\n\n&lt;xsl:key name=&quot;Occurrence&quot; match=&quot;plm:Occurrence | plm:WorkAreaOccurrence&quot; use=&quot;@id&quot;/&gt;\n&lt;xsl:key name=&quot;Operation&quot; match=&quot;plm:Operation&quot; use=&quot;@id&quot;/&gt;\n&lt;xsl:key name=&quot;OperationRevision&quot; match=&quot;plm:OperationRevision&quot; use=&quot;@id&quot;/&gt;\n&lt;xsl:key name=&quot;Process&quot; match=&quot;plm:Process | plm:Operation&quot; use=&quot;@id&quot;/&gt;\n&lt;xsl:key name=&quot;ProcessOccurrence&quot; match=&quot;plm:ProcessOccurrence | plm:Occurrence | plm:WorkAreaOccurrence&quot; use=&quot;@id&quot;/&gt;\n&lt;xsl:key name=&quot;ProcessRevision&quot; match=&quot;plm:ProcessRevision | plm:OperationRevision&quot; use=&quot;@id&quot;/&gt;\n&lt;xsl:key name=&quot;ProcessView&quot; match=&quot;plm:ProcessView&quot; use=&quot;@id&quot;/&gt;\n&lt;xsl:key name=&quot;ProcOpRevision&quot; match=&quot;plm:ProcessRevision | plm:OperationRevision&quot; use=&quot;@id&quot;/&gt;\n\n&lt;lxslt:component prefix=&quot;setfile&quot; elements=&quot;copy&quot; functions=&quot;setFile setTcFile getCurrentDir\n        getCurrentImanFileName getCurrentImanFileNamePrefix getNiceName&quot;&gt;\n  &lt;lxslt:script lang=&quot;javaclass&quot; src=&quot;com.teamcenter.rac.cme.cmereport.CMEReportXalanExtension&quot;/&gt;\n&lt;/lxslt:component&gt;\n\n&lt;xsl:output method=&quot;html&quot; indent=&quot;yes&quot;/&gt;\n&lt;xsl:param name=&quot;outDir&quot; select=&quot;setfile:getCurrentDir(setfile:new())&quot;/&gt;\n&lt;xsl:variable name=&quot;roid&quot; select=&quot;/plm:PLMXML/plm:ProcessView/@rootRefs&quot;/&gt;&lt;!-- rootRef instead of prima.. --&gt;\n&lt;!-- Assuming that the primaryOccurrenceRef(&amp; NO MULTIPLE ENTRY POINTS) is always a ProcessOccurrence --&gt;\n&lt;xsl:variable name=&quot;rpoe&quot; select=&quot;key('ProcessOccurrence',$roid)&quot;/&gt;\n&lt;xsl:variable name=&quot;rprid&quot; select=&quot;substring-after($rpoe/@instancedRef,'#')&quot;/&gt;\n&lt;xsl:variable name=&quot;root&quot; select=&quot;key('ProcessRevision',$rprid)&quot;/&gt;\n\n&lt;xsl:template match=&quot;/&quot;&gt;\n    &lt;xsl:call-template name=&quot;genData&quot;&gt;\n        &lt;xsl:with-param name=&quot;curProc&quot; select=&quot;$root&quot;/&gt;\n        &lt;xsl:with-param name=&quot;occStr&quot; select=&quot;$rpoe/@occurrenceRefs&quot;/&gt;\n    &lt;/xsl:call-template&gt;\n&lt;/xsl:template&gt;\n\n&lt;xsl:template name=&quot;genData&quot;&gt;\n&lt;xsl:param name=&quot;curProc&quot;/&gt;\n&lt;xsl:param name=&quot;occStr&quot;/&gt;\n    &lt;html&gt;\n        &lt;head&gt;\n            &lt;title&gt;Process: &lt;xsl:value-of select=&quot;$curProc/@name&quot;/&gt;&lt;/title&gt;\n        &lt;/head&gt;\n        &lt;body BGCOLOR=&quot;#FFFFFF&quot; link=&quot;#0000FF&quot; vlink=&quot;#660066&quot;&gt;\n            &lt;br/&gt;\n                        &lt;!-- Support for Foxfire browser requires specific class=&quot;sample&quot; on all table elements --&gt;\n            &lt;table class=&quot;sample&quot;&gt;&lt;!-- main table --&gt;\n                &lt;xsl:call-template name=&quot;heading&quot;&gt;\n                    &lt;xsl:with-param name=&quot;title&quot; select=&quot;'Process Report'&quot;/&gt;\n                &lt;/xsl:call-template&gt;\n                                &lt;tr&gt;\n                                        &lt;td&gt;\n                                                &lt;xsl:variable name=&quot;procid&quot;&gt;\n                                                        &lt;xsl:call-template name=&quot;cleanId&quot;&gt;\n                                                                &lt;xsl:with-param name=&quot;id&quot; select=&quot;$curProc/@masterRef&quot;/&gt;\n                                                        &lt;/xsl:call-template&gt;\n                                                &lt;/xsl:variable&gt;\n                                                &lt;xsl:variable name=&quot;proc&quot; select=&quot;key('Process',$procid)&quot;/&gt;\n                                                &lt;xsl:value-of select=&quot;concat($proc/@catalogueId,'/',$curProc/@revision,' - ',$curProc/@name)&quot;/&gt;\n                                        &lt;/td&gt;\n                                &lt;/tr&gt;\n\n                &lt;tr&gt;&lt;!-- main table:row6::sub level --&gt;\n                    &lt;td&gt;\n                        &lt;hr color=&quot;#000000&quot;/&gt;\n                        &lt;table class=&quot;sample&quot;&gt;\n                        &lt;tr&gt;\n                            &lt;th&gt;Name&lt;/th&gt;\n                        &lt;/tr&gt;\n                        &lt;xsl:call-template name=&quot;createCL&quot;&gt;\n                            &lt;xsl:with-param name=&quot;chStr&quot; select=&quot;$occStr&quot;/&gt;\n                        &lt;/xsl:call-template&gt;\n                        &lt;/table&gt;\n                    &lt;/td&gt;\n                &lt;/tr&gt;\n            &lt;/table&gt;\n        &lt;/body&gt;\n    &lt;/html&gt;\n&lt;/xsl:template&gt;\n\n&lt;xsl:template name=&quot;createCL&quot;&gt;\n&lt;xsl:param name=&quot;chStr&quot;/&gt;\n    &lt;xsl:variable name=&quot;genele&quot; select=&quot;key('ProcessOccurrence',$chStr)&quot;/&gt;\n                &lt;xsl:if test=&quot;name($genele)='ProcessOccurrence'&quot;&gt;\n                    &lt;xsl:call-template name=&quot;creCLext&quot;&gt;\n                        &lt;xsl:with-param name=&quot;genel&quot; select=&quot;$genele&quot;/&gt;\n                    &lt;/xsl:call-template&gt;\n                &lt;/xsl:if&gt;\n&lt;/xsl:template&gt;\n\n&lt;xsl:template name=&quot;creCLext&quot;&gt;\n&lt;xsl:param name=&quot;genel&quot;/&gt;\n    &lt;xsl:variable name=&quot;procid&quot; select=&quot;substring-after($genel/@instancedRef,'#')&quot;/&gt;\n    &lt;xsl:variable name=&quot;procele&quot; select=&quot;key('ProcOpRevision',$procid)&quot;/&gt;&lt;!-- ProcessRevision or OperationRevision --&gt;\n    &lt;xsl:variable name=&quot;pre1&quot; select=&quot;substring-after($genel/@predecessorRefs,'#')&quot;/&gt;&lt;!--assuming only one id to be present --&gt;\n    &lt;xsl:variable name=&quot;pre2&quot; select=&quot;key('ProcessOccurrence',$pre1)&quot;/&gt;\n    &lt;xsl:variable name=&quot;preid&quot; select=&quot;substring-after($pre2/@instancedRef,'#')&quot;/&gt;\n    &lt;xsl:variable name=&quot;prele&quot; select=&quot;/plm:PLMXML/*[@id=$preid]&quot;/&gt;\n    &lt;tr&gt;\n    &lt;td align=&quot;center&quot;&gt;&lt;a&gt;\n        &lt;xsl:attribute name=&quot;href&quot;&gt;\n            &lt;xsl:value-of select=&quot;concat($procid,'.html')&quot;/&gt;\n        &lt;/xsl:attribute&gt;\n        &lt;xsl:value-of select=&quot;$procele/@name&quot;/&gt;\n    &lt;/a&gt;&lt;/td&gt;\n     \n    &lt;/tr&gt;\n    &lt;result-document href=&quot;concat($procid,'.html')&quot;&gt;\n    &lt;xsl:call-template name=&quot;genopr&quot;&gt;\n                &lt;xsl:with-param name=&quot;curOpr&quot; select=&quot;$procele&quot;/&gt;\n                &lt;xsl:with-param name=&quot;genel&quot; select=&quot;$genel&quot;/&gt;\n            &lt;/xsl:call-template&gt;\n    &lt;/result-document&gt;\n&lt;/xsl:template&gt;\n\n&lt;xsl:template name=&quot;genopr&quot;&gt;\n&lt;xsl:param name=&quot;curOpr&quot;/&gt;\n&lt;xsl:param name=&quot;genel&quot;/&gt;\n    &lt;html&gt;\n        &lt;head&gt;\n            &lt;title&gt;Operation: &lt;xsl:value-of select=&quot;$curOpr/@name&quot;/&gt;&lt;/title&gt;\n        &lt;/head&gt;\n        &lt;body BGCOLOR=&quot;#FFFFFF&quot; link=&quot;#0000FF&quot; vlink=&quot;#660066&quot;&gt;\n            &lt;br/&gt;\n            &lt;table class=&quot;sample&quot;&gt;&lt;!-- main table --&gt;\n                &lt;xsl:call-template name=&quot;heading&quot;&gt;\n                    &lt;xsl:with-param name=&quot;title&quot; select=&quot;'Operation Report'&quot;/&gt;\n                &lt;/xsl:call-template&gt;\n                                &lt;tr&gt;\n                                        &lt;td&gt;\n                                                &lt;xsl:variable name=&quot;procid&quot;&gt;\n                                                        &lt;xsl:call-template name=&quot;cleanId&quot;&gt;\n                                                                &lt;xsl:with-param name=&quot;id&quot; select=&quot;$curOpr/@masterRef&quot;/&gt;\n                                                        &lt;/xsl:call-template&gt;\n                                                &lt;/xsl:variable&gt;\n                                                &lt;xsl:variable name=&quot;proc&quot; select=&quot;key('Process',$procid)&quot;/&gt;\n                                                &lt;xsl:value-of select=&quot;concat($proc/@catalogueId,'/',$curOpr/@revision,' - ',$curOpr/@name)&quot;/&gt;\n                                        &lt;/td&gt;\n                                &lt;/tr&gt;\n                \n            &lt;/table&gt;\n        &lt;/body&gt;\n    &lt;/html&gt;\n\n&lt;/xsl:template&gt;\n\n&lt;xsl:template name=&quot;heading&quot;&gt;\n&lt;xsl:param name=&quot;title&quot;/&gt;\n                &lt;tr&gt;&lt;!-- main table:row1::heading--&gt;\n                    &lt;th&gt;\n                        &lt;div align=&quot;left&quot;&gt;\n                        &lt;/div&gt;\n                        &lt;div align=&quot;center&quot;&gt;&lt;b&gt;&lt;font size=&quot;+2&quot;&gt;&lt;xsl:value-of select=&quot;$title&quot;/&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;br/&gt;\n                    &lt;/th&gt;\n                &lt;/tr&gt;\n&lt;/xsl:template&gt;\n&lt;xsl:template name=&quot;cleanId&quot;&gt;\n    &lt;xsl:param name=&quot;id&quot;/&gt;\n\n    &lt;xsl:choose&gt;\n        &lt;xsl:when test=&quot;contains($id, '#')&quot;&gt;\n            &lt;xsl:value-of select=&quot;substring-after($id,'#')&quot;/&gt;\n        &lt;/xsl:when&gt;\n        &lt;xsl:otherwise&gt;\n            &lt;xsl:value-of select=&quot;$id&quot;/&gt;\n        &lt;/xsl:otherwise&gt;\n    &lt;/xsl:choose&gt;\n&lt;/xsl:template&gt;\n\n&lt;/xsl:stylesheet&gt;\n</code></pre>\n<p>Below is the the code where we are calling the transformer for conversion from XML to HTML.</p>\n<pre><code>{\n         \n\n        // 1. Instantiate a TransformerFactory.\n        javax.xml.transform.TransformerFactory tFactory =(SAXTransformerFactory) SAXTransformerFactory.newInstance();\n\n        XslImportResolver myResolve = new XslImportResolver();\n        tFactory.setURIResolver( myResolve );\n\n        // 2. Use the TransformerFactory to process the stylesheet Source and\n        //                generate a Transformer.\n        javax.xml.transform.Transformer transformer = tFactory.newTransformer\n                        (new javax.xml.transform.stream.StreamSource(xslLocation));\n\n        // Add debugging output if it is definded in the Registry.\n        Registry registry = Registry.getRegistry( this );\n\n        // 3. Use the Transformer to perform the transformation and send the\n        //          the output to a Result object.\n        transformer.transform( new StreamSource( xmlLocation ),\n                new StreamResult( new FileOutputStream( htmlLocation ) ) );\n    }\n</code></pre>\n<p>We are getting below error :\nStatic error near {...e:getCurrentDir(setfile:new...} at char 22 in expression in xsl:param/@select on line 22 column 73 of PLMXML_DefaultProcessReport.xsl:\nXPST0017: Cannot find a 0-argument function named\nQ{com.teamcenter.rac.cme.cmereport.CMEReportXalanExtension}new()</p>\n<p>we remove xalan dependencies and now updated XSLT-2.0 and using Saxon processor.</p>\n"},{"tags":["java","intellij-idea","lambda"],"comments":[{"owner":{"account_id":7595189,"reputation":44576,"user_id":5761558,"display_name":"ernest_k"},"score":2,"creation_date":1587176684,"post_id":61283367,"comment_id":108414248,"body_markdown":"What does IntelliJ produce when you use that tool? &quot;Change semantics&quot; seems a little hard to interpret accurately.","body":"What does IntelliJ produce when you use that tool? &quot;Change semantics&quot; seems a little hard to interpret accurately."}],"answers":[{"tags":[],"owner":{"account_id":14583345,"reputation":4337,"user_id":10533011,"display_name":"Donat"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1691142386,"creation_date":1587219495,"answer_id":61290617,"question_id":61283367,"body_markdown":"If you do not follow the rules of clean functional programming, there may be a change of semantics when you convert a lambda to a method reference. \r\n\r\nThe difference is that the method reference will be resolved only once when the stream is being built. But in the lambda expression the code for getting the method can be evaluated in each execution of the lambda. \r\n\r\nHere is a short self-contained example for demonstration:\r\n\r\n    public class Test40 {\r\n      public static void main(String[] args) {\r\n        Function&lt;Integer, Integer&gt; f2 = n -&gt; 2 * n;\r\n        Function&lt;Integer, Integer&gt; f3 = n -&gt; 3 * n;\r\n        Function&lt;Integer, Integer&gt;[] funcArray = new Function[1];\r\n    \r\n        funcArray[0] = f2;\r\n        Stream.of(1, 2, 3)\r\n              .peek(n -&gt; { if (n &gt; 1) funcArray[0] = f3; })\r\n              .map(funcArray[0]::apply)            // Method reference, &#39;::apply&#39; could be omitted\r\n              .forEach(System.out::print);         // prints 246\r\n        System.out.println();\r\n    \r\n        funcArray[0] = f2;\r\n        Stream.of(1, 2, 3)\r\n              .peek(n -&gt; { if (n &gt; 1) funcArray[0] = f3; })\r\n              .map(n -&gt; funcArray[0].apply(n))     // Lambda\r\n              .forEach(System.out::print);         // prints 269\r\n        System.out.println();\r\n      }\r\n    }\r\n\r\nHow to avoid this problem: Do not use side effects when working with streams. Do not use ```peek``` for processing! This method exists mainly to support debugging (have a look at the javadoc).","title":"IntelliJ - method reference may change semantics","body":"<p>If you do not follow the rules of clean functional programming, there may be a change of semantics when you convert a lambda to a method reference.</p>\n<p>The difference is that the method reference will be resolved only once when the stream is being built. But in the lambda expression the code for getting the method can be evaluated in each execution of the lambda.</p>\n<p>Here is a short self-contained example for demonstration:</p>\n<pre><code>public class Test40 {\n  public static void main(String[] args) {\n    Function&lt;Integer, Integer&gt; f2 = n -&gt; 2 * n;\n    Function&lt;Integer, Integer&gt; f3 = n -&gt; 3 * n;\n    Function&lt;Integer, Integer&gt;[] funcArray = new Function[1];\n\n    funcArray[0] = f2;\n    Stream.of(1, 2, 3)\n          .peek(n -&gt; { if (n &gt; 1) funcArray[0] = f3; })\n          .map(funcArray[0]::apply)            // Method reference, '::apply' could be omitted\n          .forEach(System.out::print);         // prints 246\n    System.out.println();\n\n    funcArray[0] = f2;\n    Stream.of(1, 2, 3)\n          .peek(n -&gt; { if (n &gt; 1) funcArray[0] = f3; })\n          .map(n -&gt; funcArray[0].apply(n))     // Lambda\n          .forEach(System.out::print);         // prints 269\n    System.out.println();\n  }\n}\n</code></pre>\n<p>How to avoid this problem: Do not use side effects when working with streams. Do not use <code>peek</code> for processing! This method exists mainly to support debugging (have a look at the javadoc).</p>\n"}],"owner":{"account_id":1302409,"reputation":5542,"user_id":1252056,"accept_rate":91,"display_name":"streetturtle"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":949,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":61290617,"answer_count":1,"score":7,"last_activity_date":1691142386,"creation_date":1587175135,"question_id":61283367,"body_markdown":"I have following code:\r\n\r\n```java\r\nreturn userService.getAll()\r\n    .stream()\r\n    .map(User::getRoleName)\r\n    .map(roleName -&gt; roleService.findRoleByName(roleName))\r\n    .collect(Collectors.toSet());\r\n```\r\n\r\nIt seems that `roleName -&gt; roleService.findRoleByName(roleName)` could be replaced by a method reference (namely a *Reference to an instance method of a particular object*) however IntelliJ IDEA warns that this may change semantics:\r\n\r\n[![screenshot][1]][1]\r\n\r\nHow could it change semantics? Would it change semantics?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/KQ4nJ.png","title":"IntelliJ - method reference may change semantics","body":"<p>I have following code:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>return userService.getAll()\n    .stream()\n    .map(User::getRoleName)\n    .map(roleName -&gt; roleService.findRoleByName(roleName))\n    .collect(Collectors.toSet());\n</code></pre>\n\n<p>It seems that <code>roleName -&gt; roleService.findRoleByName(roleName)</code> could be replaced by a method reference (namely a <em>Reference to an instance method of a particular object</em>) however IntelliJ IDEA warns that this may change semantics:</p>\n\n<p><a href=\"https://i.stack.imgur.com/KQ4nJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KQ4nJ.png\" alt=\"screenshot\"></a></p>\n\n<p>How could it change semantics? Would it change semantics?</p>\n"},{"tags":["java","multithreading","executorservice"],"comments":[{"owner":{"account_id":6453072,"reputation":37996,"user_id":4999394,"accept_rate":98,"display_name":"Ravindra babu"},"score":1,"creation_date":1503769725,"post_id":18425026,"comment_id":78755331,"body_markdown":"Have a look at : https://stackoverflow.com/questions/36644043/how-to-properly-shutdown-java-executorservice/36644320#36644320","body":"Have a look at : <a href=\"https://stackoverflow.com/questions/36644043/how-to-properly-shutdown-java-executorservice/36644320#36644320\" title=\"how to properly shutdown java executorservice\">stackoverflow.com/questions/36644043/&hellip;</a>"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1691141373,"post_id":18425026,"comment_id":135454693,"body_markdown":"There will be no termination until you issue the shutdown, which therefore has to come first. Surely this is obvious? If there was an auto-termination there would be no need for a shutdown API.","body":"There will be no termination until you issue the shutdown, which therefore has to come first. Surely this is obvious? If there was an auto-termination there would be no need for a shutdown API."}],"answers":[{"tags":[],"owner":{"account_id":9,"reputation":220293,"user_id":13,"accept_rate":100,"display_name":"C. K. Young"},"down_vote_count":1,"up_vote_count":84,"is_accepted":true,"score":83,"last_activity_date":1377397207,"creation_date":1377397207,"answer_id":18425050,"question_id":18425026,"body_markdown":"You should call `shutdown` first. Otherwise, you might be waiting for a very long time, since `awaitTermination` doesn&#39;t actually shut down your executor.\r\n\r\nIf you wanted to wait for tasks to complete, rather than wait for the executor to shut down, then you should use `invokeAll`.","title":"shutdown and awaitTermination which first call have any difference?","body":"<p>You should call <code>shutdown</code> first. Otherwise, you might be waiting for a very long time, since <code>awaitTermination</code> doesn't actually shut down your executor.</p>\n\n<p>If you wanted to wait for tasks to complete, rather than wait for the executor to shut down, then you should use <code>invokeAll</code>.</p>\n"},{"tags":[],"owner":{"account_id":2052678,"reputation":134073,"user_id":1831293,"accept_rate":91,"display_name":"Evgeniy Dorofeev"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1377405187,"creation_date":1377405187,"answer_id":18425723,"question_id":18425026,"body_markdown":"After we start the first task ThreadPoolExecutor will start a Thread that will not end even after the task is finished. At least it&#39;s true for a fixed thread pool. This is why we need to call shutdown. After shutdown ThreadPoolExecutor will reject any new  task but will wait for running tasks to finish and then allow the Threads to end. This is why we need awaitTermination after shutdwon.","title":"shutdown and awaitTermination which first call have any difference?","body":"<p>After we start the first task ThreadPoolExecutor will start a Thread that will not end even after the task is finished. At least it's true for a fixed thread pool. This is why we need to call shutdown. After shutdown ThreadPoolExecutor will reject any new  task but will wait for running tasks to finish and then allow the Threads to end. This is why we need awaitTermination after shutdwon.</p>\n"},{"tags":[],"owner":{"account_id":397289,"reputation":17010,"user_id":761330,"accept_rate":97,"display_name":"Terry Li"},"down_vote_count":5,"up_vote_count":29,"is_accepted":false,"score":24,"last_activity_date":1377408361,"creation_date":1377405955,"answer_id":18425786,"question_id":18425026,"body_markdown":"[shutdown][1] means the executor service takes no more incoming tasks.\r\n\r\n[awaitTermination][2]  is invoked after a shutdown request.\r\n\r\nYou need to first shut down the service and then block and wait for threads to finish.\r\n\r\nIf you want to see all threads finish running and insist on using `awaiTermination`, you need to set the timeout parameter to be big enough. So you could do:\r\n\r\n    eService.shutdown();\r\n    if (!eService.awaitTermination(60000, TimeUnit.SECONDS))\r\n        System.err.println(&quot;Threads didn&#39;t finish in 60000 seconds!&quot;);\r\n    }\r\n\r\nAlternatively, you could do:\r\n\r\n    eService.shutdown();\r\n    while (!eService.isTerminated()) {\r\n\r\n    }\r\n\r\nThis way you are able to ensure all threads are finished running unless they are interrupted unexpectedly.\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html#shutdown%28%29\r\n  [2]: http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html#awaitTermination%28long,%20java.util.concurrent.TimeUnit%29","title":"shutdown and awaitTermination which first call have any difference?","body":"<p><a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html#shutdown%28%29\">shutdown</a> means the executor service takes no more incoming tasks.</p>\n\n<p><a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html#awaitTermination%28long,%20java.util.concurrent.TimeUnit%29\">awaitTermination</a>  is invoked after a shutdown request.</p>\n\n<p>You need to first shut down the service and then block and wait for threads to finish.</p>\n\n<p>If you want to see all threads finish running and insist on using <code>awaiTermination</code>, you need to set the timeout parameter to be big enough. So you could do:</p>\n\n<pre><code>eService.shutdown();\nif (!eService.awaitTermination(60000, TimeUnit.SECONDS))\n    System.err.println(\"Threads didn't finish in 60000 seconds!\");\n}\n</code></pre>\n\n<p>Alternatively, you could do:</p>\n\n<pre><code>eService.shutdown();\nwhile (!eService.isTerminated()) {\n\n}\n</code></pre>\n\n<p>This way you are able to ensure all threads are finished running unless they are interrupted unexpectedly.</p>\n"},{"tags":[],"owner":{"account_id":1251686,"reputation":29348,"user_id":1531054,"accept_rate":95,"display_name":"s.d"},"down_vote_count":4,"up_vote_count":61,"is_accepted":false,"score":57,"last_activity_date":1530179596,"creation_date":1377408584,"answer_id":18426020,"question_id":18425026,"body_markdown":"Reading the documentation always helps:\r\n\r\n**[shutdownNow][1]** :\r\n\r\n&gt; Attempts to stop all actively executing tasks, halts the processing of\r\n&gt; waiting tasks, and returns a list of the tasks that were awaiting\r\n&gt; execution. These tasks are drained (removed) from the task queue upon\r\n&gt; return from this method.\r\n&gt; \r\n&gt; This method **does not wait for actively executing tasks to terminate.**\r\n&gt; Use awaitTermination to do that.\r\n&gt; \r\n&gt; There are no guarantees beyond best-effort attempts to stop processing\r\n&gt; actively executing tasks. This implementation cancels tasks via\r\n&gt; Thread.interrupt(), so any task that fails to respond to interrupts\r\n&gt; may never terminate\r\n\r\n**[shutdown][2]:**\r\n\r\n&gt; Initiates an orderly shutdown in which **previously submitted tasks are\r\n&gt; executed, but no new tasks will be accepted.** Invocation has no\r\n&gt; additional effect if already shut down.\r\n&gt; \r\n&gt; This method does not wait for previously submitted tasks to complete\r\n&gt; execution. Use `awaitTermination` to do that.\r\n\r\n**[awaitTermination][3]:**\r\n\r\n&gt; **Blocks until all tasks have completed execution after a shutdown request**, or the timeout occurs, or the current thread is interrupted,\r\n&gt; whichever happens first.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html#shutdownNow--\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html#shutdown--\r\n  [3]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html#awaitTermination-long-java.util.concurrent.TimeUnit-","title":"shutdown and awaitTermination which first call have any difference?","body":"<p>Reading the documentation always helps:</p>\n\n<p><strong><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html#shutdownNow--\" rel=\"noreferrer\">shutdownNow</a></strong> :</p>\n\n<blockquote>\n  <p>Attempts to stop all actively executing tasks, halts the processing of\n  waiting tasks, and returns a list of the tasks that were awaiting\n  execution. These tasks are drained (removed) from the task queue upon\n  return from this method.</p>\n  \n  <p>This method <strong>does not wait for actively executing tasks to terminate.</strong>\n  Use awaitTermination to do that.</p>\n  \n  <p>There are no guarantees beyond best-effort attempts to stop processing\n  actively executing tasks. This implementation cancels tasks via\n  Thread.interrupt(), so any task that fails to respond to interrupts\n  may never terminate</p>\n</blockquote>\n\n<p><strong><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html#shutdown--\" rel=\"noreferrer\">shutdown</a>:</strong></p>\n\n<blockquote>\n  <p>Initiates an orderly shutdown in which <strong>previously submitted tasks are\n  executed, but no new tasks will be accepted.</strong> Invocation has no\n  additional effect if already shut down.</p>\n  \n  <p>This method does not wait for previously submitted tasks to complete\n  execution. Use <code>awaitTermination</code> to do that.</p>\n</blockquote>\n\n<p><strong><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html#awaitTermination-long-java.util.concurrent.TimeUnit-\" rel=\"noreferrer\">awaitTermination</a>:</strong></p>\n\n<blockquote>\n  <p><strong>Blocks until all tasks have completed execution after a shutdown request</strong>, or the timeout occurs, or the current thread is interrupted,\n  whichever happens first.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":2181800,"reputation":552,"user_id":3094331,"accept_rate":73,"display_name":"user3094331"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1560751342,"creation_date":1516270192,"answer_id":48318680,"question_id":18425026,"body_markdown":"You need to call `shutdownNow()` method after the `awaitTermination()` method call happened. Then only you can find out the actual usage of `awaitTermination()` method.","title":"shutdown and awaitTermination which first call have any difference?","body":"<p>You need to call <code>shutdownNow()</code> method after the <code>awaitTermination()</code> method call happened. Then only you can find out the actual usage of <code>awaitTermination()</code> method.</p>\n"},{"tags":[],"owner":{"account_id":16147545,"reputation":31,"user_id":11656780,"display_name":"user11656780"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1560748651,"creation_date":1560740440,"answer_id":56624228,"question_id":18425026,"body_markdown":"```java\r\nexecutorService.execute(runnableTask);  \r\n\r\n//executorService.shutdown(); //it will make the executorService stop accepting new tasks\r\n//executorService.shutdownNow(); //tires to destroy the executorService immediately, but it doesn&#39;t guarantee that all the running threads will be destroyed at the same time. This method returns list of tasks which are waiting to be processed.\r\n//List&lt;Runnable&gt; notExecutedTasks = executorService.shutdownNow(); //this method returns list of tasks which are waiting to be processed.developer decide what to do with theses tasks?\r\n\r\n//one good way to shutdown the executorService is use both of these methods combined with the awaitTermination\r\nexecutorService.shutdown();\r\ntry{\r\n    if(!executorService.awaitTermination(1000, TimeUnit.MICROSECONDS)) {\r\n        executorService.shutdownNow();\r\n    }\r\n}catch (InterruptedException e){\r\n    e.printStackTrace();\r\n}\r\n```","title":"shutdown and awaitTermination which first call have any difference?","body":"<pre class=\"lang-java prettyprint-override\"><code>executorService.execute(runnableTask);  \n\n//executorService.shutdown(); //it will make the executorService stop accepting new tasks\n//executorService.shutdownNow(); //tires to destroy the executorService immediately, but it doesn't guarantee that all the running threads will be destroyed at the same time. This method returns list of tasks which are waiting to be processed.\n//List&lt;Runnable&gt; notExecutedTasks = executorService.shutdownNow(); //this method returns list of tasks which are waiting to be processed.developer decide what to do with theses tasks?\n\n//one good way to shutdown the executorService is use both of these methods combined with the awaitTermination\nexecutorService.shutdown();\ntry{\n    if(!executorService.awaitTermination(1000, TimeUnit.MICROSECONDS)) {\n        executorService.shutdownNow();\n    }\n}catch (InterruptedException e){\n    e.printStackTrace();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6845240,"reputation":1517,"user_id":5291521,"accept_rate":67,"display_name":"Ashwani Tiwari"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1599753754,"creation_date":1565122870,"answer_id":57383461,"question_id":18425026,"body_markdown":"**Main Difference**\r\n\r\n**shutdown()**-  \r\n         \r\n    1. Doesn&#39;t block the calling a thread i.e. the thread who called the shutdown().\r\n    2. Excecutor doesn&#39;t accept any new task after calling shutdown().\r\n\r\n**awaitTermination()** - \r\n\r\n    1. Blocks the calling thread. (as join() method do)\r\n  \r\n**Point of Confusion:-** \r\n**If shutdown() does not kill the previously submitted tasks, why do we need  awaitTermination()?**\r\n\r\n   awaitTermination means waiting for the tasks to be completed/terminated, right? `shutdown()` is doing the same- waiting for any task which is already submitted along with the running tasks to continue till completed/terminated, then why another method `awaitTermination(..)`? Below is the explanation:\r\n\r\nSuppose you can wait for **10 min only** to complete all the task that are submitted and after that want to call `shutdownNow()`(---you already know what it do) then use `awaitTermination(long timeout, TimeUnit unit)` after calling shutdown().\r\n\r\nNotice the method arguments in `awaitTermination(long timeout, TimeUnit unit)`. This timeout is the key here.\r\n\r\nIf there is no time restriction, shutdown() is OK. No need of awaitTermination().\r\n\r\n","title":"shutdown and awaitTermination which first call have any difference?","body":"<p><strong>Main Difference</strong></p>\n<p><strong>shutdown()</strong>-</p>\n<pre><code>1. Doesn't block the calling a thread i.e. the thread who called the shutdown().\n2. Excecutor doesn't accept any new task after calling shutdown().\n</code></pre>\n<p><strong>awaitTermination()</strong> -</p>\n<pre><code>1. Blocks the calling thread. (as join() method do)\n</code></pre>\n<p><strong>Point of Confusion:-</strong>\n<strong>If shutdown() does not kill the previously submitted tasks, why do we need  awaitTermination()?</strong></p>\n<p>awaitTermination means waiting for the tasks to be completed/terminated, right? <code>shutdown()</code> is doing the same- waiting for any task which is already submitted along with the running tasks to continue till completed/terminated, then why another method <code>awaitTermination(..)</code>? Below is the explanation:</p>\n<p>Suppose you can wait for <strong>10 min only</strong> to complete all the task that are submitted and after that want to call <code>shutdownNow()</code>(---you already know what it do) then use <code>awaitTermination(long timeout, TimeUnit unit)</code> after calling shutdown().</p>\n<p>Notice the method arguments in <code>awaitTermination(long timeout, TimeUnit unit)</code>. This timeout is the key here.</p>\n<p>If there is no time restriction, shutdown() is OK. No need of awaitTermination().</p>\n"},{"tags":[],"owner":{"account_id":12356669,"reputation":1027,"user_id":9012649,"display_name":"Gawain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1565338558,"creation_date":1565338558,"answer_id":57426047,"question_id":18425026,"body_markdown":"From Java8 ThreadPool awaitTermination method:\r\n\r\n        try {\r\n            for (;;) {\r\n                if (runStateAtLeast(ctl.get(), TERMINATED))\r\n                    return true;\r\n                if (nanos &lt;= 0)\r\n                    return false;\r\n                nanos = termination.awaitNanos(nanos);\r\n            }\r\n        } finally {\r\n            mainLock.unlock();\r\n        }\r\n\r\nIt will first check run state of thread pool. And if the thread pool is not shut down(which set run state to terminated), awaitTermination method will not return until timeout. This explains why await a long time if you await first then shutdown.","title":"shutdown and awaitTermination which first call have any difference?","body":"<p>From Java8 ThreadPool awaitTermination method:</p>\n\n<pre><code>    try {\n        for (;;) {\n            if (runStateAtLeast(ctl.get(), TERMINATED))\n                return true;\n            if (nanos &lt;= 0)\n                return false;\n            nanos = termination.awaitNanos(nanos);\n        }\n    } finally {\n        mainLock.unlock();\n    }\n</code></pre>\n\n<p>It will first check run state of thread pool. And if the thread pool is not shut down(which set run state to terminated), awaitTermination method will not return until timeout. This explains why await a long time if you await first then shutdown.</p>\n"},{"tags":[],"owner":{"account_id":16007610,"reputation":131,"user_id":11552743,"display_name":"Xavy Guzman"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1624992126,"creation_date":1571849530,"answer_id":58527640,"question_id":18425026,"body_markdown":"The best implementation:\t\t    \t\r\n\r\n    executor.shutdown();\r\n\ttry {\r\n        if (!executor.awaitTermination(3500, TimeUnit.MILLISECONDS)) {\r\n\t\t    executor.shutdownNow();\r\n\t\t}\t\t\t    \t\r\n\t} catch (InterruptedException e) {\t\t\t\t\r\n\t    executor.shutdownNow();\r\n\t}\r\n\t\t\t","title":"shutdown and awaitTermination which first call have any difference?","body":"<p>The best implementation:</p>\n<pre><code>executor.shutdown();\ntry {\n    if (!executor.awaitTermination(3500, TimeUnit.MILLISECONDS)) {\n        executor.shutdownNow();\n    }                   \n} catch (InterruptedException e) {              \n    executor.shutdownNow();\n}\n        \n</code></pre>\n"},{"tags":[],"owner":{"account_id":10212015,"reputation":1812,"user_id":7538821,"accept_rate":100,"display_name":"sam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691142305,"creation_date":1691140724,"answer_id":76834552,"question_id":18425026,"body_markdown":"`shutdown()` will stop the executor from taking anymore tasks and lets the tasks which are in execution to complete. The call won&#39;t block the current Thread.\r\n\r\n`awaitTermination(1, TimeUnit.NANOSECONDS)` will wait for the executor to complete the execution for that given amount of time. Note, it is a blocking call.\r\n\r\nIf your priority is to let the executor complete its execution before terminating, then a simple call to `shutdown()` will do the job.\r\n\r\nHowever, in some scenarios we might want to shutdown the executor after a given period of time, regardless of the tasks completing its execution. For those scenarios you can have something like below:\r\n\r\n```java\r\nRunnable runnable = () -&gt; System.out.println(&quot;Some tasks.&quot;);\r\nExecutorService eService = Executors.newFixedThreadPool(2);\r\neService.execute(runnable);\r\neService.execute(runnable);\r\neService.execute(runnable);\r\neService.execute(runnable);\r\n\r\neService.shutdown();\r\ntry {\r\n    int waitCount = 0;\r\n    // blocking the Thread for 1 minute. If awaitTermination() returns true then executor is shutdown\r\n    while (!eService.awaitTermination(1, TimeUnit.MINUTES)) {\r\n        waitCount++;\r\n        if (waitCount == 60) { // waited for 60 minutes to complete execution\r\n            List&lt;Runnable&gt; runnableList = eService.shutdownNow();\r\n            System.out.println(&quot;ThreadPool forcefully shutdown with &quot; + runnableList.size() + &quot; tasks remaining.&quot;);\r\n            break;\r\n        }\r\n\r\n    }\r\n} catch (InterruptedException e) {\r\n    eService.shutdownNow();\r\n    System.err.println(&quot;ThreadPool shutdown interrupted.&quot;);\r\n    Thread.currentThread().interrupt();\r\n}\r\n```","title":"shutdown and awaitTermination which first call have any difference?","body":"<p><code>shutdown()</code> will stop the executor from taking anymore tasks and lets the tasks which are in execution to complete. The call won't block the current Thread.</p>\n<p><code>awaitTermination(1, TimeUnit.NANOSECONDS)</code> will wait for the executor to complete the execution for that given amount of time. Note, it is a blocking call.</p>\n<p>If your priority is to let the executor complete its execution before terminating, then a simple call to <code>shutdown()</code> will do the job.</p>\n<p>However, in some scenarios we might want to shutdown the executor after a given period of time, regardless of the tasks completing its execution. For those scenarios you can have something like below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Runnable runnable = () -&gt; System.out.println(&quot;Some tasks.&quot;);\nExecutorService eService = Executors.newFixedThreadPool(2);\neService.execute(runnable);\neService.execute(runnable);\neService.execute(runnable);\neService.execute(runnable);\n\neService.shutdown();\ntry {\n    int waitCount = 0;\n    // blocking the Thread for 1 minute. If awaitTermination() returns true then executor is shutdown\n    while (!eService.awaitTermination(1, TimeUnit.MINUTES)) {\n        waitCount++;\n        if (waitCount == 60) { // waited for 60 minutes to complete execution\n            List&lt;Runnable&gt; runnableList = eService.shutdownNow();\n            System.out.println(&quot;ThreadPool forcefully shutdown with &quot; + runnableList.size() + &quot; tasks remaining.&quot;);\n            break;\n        }\n\n    }\n} catch (InterruptedException e) {\n    eService.shutdownNow();\n    System.err.println(&quot;ThreadPool shutdown interrupted.&quot;);\n    Thread.currentThread().interrupt();\n}\n</code></pre>\n"}],"owner":{"account_id":2590909,"reputation":3911,"user_id":2245634,"accept_rate":61,"display_name":"王奕然"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":125952,"favorite_count":0,"down_vote_count":0,"up_vote_count":77,"accepted_answer_id":18425050,"answer_count":10,"score":77,"last_activity_date":1691142305,"creation_date":1377397069,"question_id":18425026,"body_markdown":"What is the difference between\r\n\r\n    ExecutorService eService = Executors.newFixedThreadPool(2);\r\n    eService.execute(new TestThread6());\r\n    eService.execute(new TestThread6());\r\n    eService.execute(new TestThread6());\r\n    eService.awaitTermination(1, TimeUnit.NANOSECONDS);\r\n    eService.shutdown();\r\n\r\nand\r\n\r\n    eService.shutdown();\r\n    eService.awaitTermination(1, TimeUnit.NANOSECONDS);\r\n\r\n\r\nI don&#39;t really understand `shutdown()`. This method does not wait for previously submitted tasks to complete execution. Does it mean `shutdown()` may terminate the tasks which have been submitted, but not completed? I tried some examples, they do not prove it, please give me an example. \r\n","title":"shutdown and awaitTermination which first call have any difference?","body":"<p>What is the difference between</p>\n\n<pre><code>ExecutorService eService = Executors.newFixedThreadPool(2);\neService.execute(new TestThread6());\neService.execute(new TestThread6());\neService.execute(new TestThread6());\neService.awaitTermination(1, TimeUnit.NANOSECONDS);\neService.shutdown();\n</code></pre>\n\n<p>and</p>\n\n<pre><code>eService.shutdown();\neService.awaitTermination(1, TimeUnit.NANOSECONDS);\n</code></pre>\n\n<p>I don't really understand <code>shutdown()</code>. This method does not wait for previously submitted tasks to complete execution. Does it mean <code>shutdown()</code> may terminate the tasks which have been submitted, but not completed? I tried some examples, they do not prove it, please give me an example. </p>\n"},{"tags":["java","multithreading","thread-safety","encryption"],"answers":[{"tags":[],"owner":{"account_id":52822,"reputation":1088970,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"down_vote_count":0,"up_vote_count":112,"is_accepted":true,"score":112,"last_activity_date":1691142288,"creation_date":1312552739,"answer_id":6957496,"question_id":6957406,"body_markdown":"No, it isn&#39;t. The instance is stateful. So you need to store it threadlocal, or to obtain a new instance on every encrypt/decrypt call, or to wrap it in a `synchronized(cipher)` block.\r\n\r\nThreadsafety is usually mentioned in javadocs as &quot;[is thread safe][1]&quot; or &quot;[is **not** thread safe][2]&quot;. This is not the case for [`Cipher`][3], so you should not assume it to be threadsafe.\r\n\r\n\r\n  [1]: https://www.google.com/search?q=%22is%20thread%20safe%22%20site:https://docs.oracle.com/en/java/javase\r\n  [2]: https://www.google.com/search?q=%22is%20not%20thread%20safe%22%20site:https://docs.oracle.com/en/java/javase\r\n  [3]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/javax/crypto/Cipher.html","title":"Is Cipher thread-safe?","body":"<p>No, it isn't. The instance is stateful. So you need to store it threadlocal, or to obtain a new instance on every encrypt/decrypt call, or to wrap it in a <code>synchronized(cipher)</code> block.</p>\n<p>Threadsafety is usually mentioned in javadocs as &quot;<a href=\"https://www.google.com/search?q=%22is%20thread%20safe%22%20site:https://docs.oracle.com/en/java/javase\" rel=\"nofollow noreferrer\">is thread safe</a>&quot; or &quot;<a href=\"https://www.google.com/search?q=%22is%20not%20thread%20safe%22%20site:https://docs.oracle.com/en/java/javase\" rel=\"nofollow noreferrer\">is <strong>not</strong> thread safe</a>&quot;. This is not the case for <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/javax/crypto/Cipher.html\" rel=\"nofollow noreferrer\"><code>Cipher</code></a>, so you should not assume it to be threadsafe.</p>\n"},{"tags":[],"owner":{"account_id":79546,"reputation":1731,"user_id":225467,"display_name":"ddso"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1312552893,"creation_date":1312552893,"answer_id":6957539,"question_id":6957406,"body_markdown":"I wouldn&#39;t use Cipher objects from multiple threads without synchronization. When you look at the API, there are methods which can only work by changing internal state, such as `init()` and `update()`. That makes them implicitly non-thread-safe.","title":"Is Cipher thread-safe?","body":"<p>I wouldn't use Cipher objects from multiple threads without synchronization. When you look at the API, there are methods which can only work by changing internal state, such as <code>init()</code> and <code>update()</code>. That makes them implicitly non-thread-safe.</p>\n"},{"tags":[],"owner":{"account_id":295869,"reputation":73614,"user_id":600500,"accept_rate":54,"display_name":"Paŭlo Ebermann"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1510174992,"creation_date":1312553201,"answer_id":6957605,"question_id":6957406,"body_markdown":"Even if a Cipher was thread-safe, it would not really be useful to use it from multiple threads concurrently.\r\n\r\nThe bytes you put into and get out of the Cipher (via its `update` and `finish` methods) are a continuous stream. This means, on the other end, they have to be passed in the same order to make any sense. This is easiest to accomplish if you have only one thread doing this.\r\n\r\nIf you are using multiple threads, you usually would want to call `reset` between the calls - and then you will need external synchronization anyways.","title":"Is Cipher thread-safe?","body":"<p>Even if a Cipher was thread-safe, it would not really be useful to use it from multiple threads concurrently.</p>\n\n<p>The bytes you put into and get out of the Cipher (via its <code>update</code> and <code>finish</code> methods) are a continuous stream. This means, on the other end, they have to be passed in the same order to make any sense. This is easiest to accomplish if you have only one thread doing this.</p>\n\n<p>If you are using multiple threads, you usually would want to call <code>reset</code> between the calls - and then you will need external synchronization anyways.</p>\n"},{"tags":[],"owner":{"account_id":2054137,"reputation":580,"user_id":1832387,"display_name":"Anton Yuriev"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1539266145,"creation_date":1539266145,"answer_id":52761901,"question_id":6957406,"body_markdown":"Cipher is not thread safe. \r\n\r\nIf you use multithreading for performance and don&#39;t want to do synchronization, you can use Jasypt (http://www.jasypt.org/general-usage.html) it has pooled encryptors: PooledPBEByteEncryptor, PooledPBEStringEncryptor.\r\n\r\nIf synchronization is ok for you and you use Spring. You can use Encryptors (https://docs.spring.io/spring-security/site/docs/4.2.5.RELEASE/apidocs/org/springframework/security/crypto/encrypt/Encryptors.html). They do synchronization internally to access Cipher.","title":"Is Cipher thread-safe?","body":"<p>Cipher is not thread safe. </p>\n\n<p>If you use multithreading for performance and don't want to do synchronization, you can use Jasypt (<a href=\"http://www.jasypt.org/general-usage.html\" rel=\"noreferrer\">http://www.jasypt.org/general-usage.html</a>) it has pooled encryptors: PooledPBEByteEncryptor, PooledPBEStringEncryptor.</p>\n\n<p>If synchronization is ok for you and you use Spring. You can use Encryptors (<a href=\"https://docs.spring.io/spring-security/site/docs/4.2.5.RELEASE/apidocs/org/springframework/security/crypto/encrypt/Encryptors.html\" rel=\"noreferrer\">https://docs.spring.io/spring-security/site/docs/4.2.5.RELEASE/apidocs/org/springframework/security/crypto/encrypt/Encryptors.html</a>). They do synchronization internally to access Cipher.</p>\n"}],"owner":{"account_id":31293,"reputation":43494,"user_id":85821,"accept_rate":73,"display_name":"Bart van Heukelom"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":29795,"favorite_count":0,"down_vote_count":0,"up_vote_count":65,"accepted_answer_id":6957496,"answer_count":4,"score":65,"last_activity_date":1691142288,"creation_date":1312552349,"question_id":6957406,"body_markdown":"Quite simply, can one instance of `javax.crypto.Cipher` (e.g. `Cipher.getInstance(&quot;RSA&quot;)`) be used from multiple threads, or do I need to stick multiple of them in a `ThreadLocal` (in my case)?","title":"Is Cipher thread-safe?","body":"<p>Quite simply, can one instance of <code>javax.crypto.Cipher</code> (e.g. <code>Cipher.getInstance(\"RSA\")</code>) be used from multiple threads, or do I need to stick multiple of them in a <code>ThreadLocal</code> (in my case)?</p>\n"},{"tags":["java","spring","unit-testing","switch-statement","try-catch"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1691134584,"post_id":76833798,"comment_id":135453385,"body_markdown":"Refactor the code so it becomes easier to test. For example, you could create `Success` and `Error` classes and return instances of them, instead of Strings.","body":"Refactor the code so it becomes easier to test. For example, you could create <code>Success</code> and <code>Error</code> classes and return instances of them, instead of Strings."}],"answers":[{"tags":[],"owner":{"account_id":29148860,"reputation":16,"user_id":22330131,"display_name":"Liuzhaowei"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691135256,"creation_date":1691135256,"answer_id":76833944,"question_id":76833798,"body_markdown":"In my practice, you can define a case value, and you can get the case value when have exception, like this:\r\n\r\n    try {\r\n    int caseValue = 1; // replace with actual case value\r\n    switch (caseValue) {\r\n        case 1:\r\n            // code for case 1\r\n            break;\r\n        case 2:\r\n            // code for case 2\r\n            break;\r\n        // add more cases as needed\r\n        default:\r\n            // default case code\r\n        }\r\n    } catch (Exception e) {\r\n        System.out.println(&quot;Exception occurred in case: &quot; + caseValue);\r\n    }\r\n\r\nHope to solve you doubts.","title":"How to testing switch-case if the all case return &quot;error&quot; string?","body":"<p>In my practice, you can define a case value, and you can get the case value when have exception, like this:</p>\n<pre><code>try {\nint caseValue = 1; // replace with actual case value\nswitch (caseValue) {\n    case 1:\n        // code for case 1\n        break;\n    case 2:\n        // code for case 2\n        break;\n    // add more cases as needed\n    default:\n        // default case code\n    }\n} catch (Exception e) {\n    System.out.println(&quot;Exception occurred in case: &quot; + caseValue);\n}\n</code></pre>\n<p>Hope to solve you doubts.</p>\n"},{"tags":[],"owner":{"account_id":23928466,"reputation":13,"user_id":17923300,"display_name":"ProgrammerGnome"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691142149,"creation_date":1691142149,"answer_id":76834732,"question_id":76833798,"body_markdown":"The solution is the following:\r\n\r\n```\r\nverify(TheTestingClass,times(1)).theTestingMethod(str)\r\n```\r\n\r\n","title":"How to testing switch-case if the all case return &quot;error&quot; string?","body":"<p>The solution is the following:</p>\n<pre><code>verify(TheTestingClass,times(1)).theTestingMethod(str)\n</code></pre>\n"}],"owner":{"account_id":23928466,"reputation":13,"user_id":17923300,"display_name":"ProgrammerGnome"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76833944,"answer_count":2,"score":-1,"last_activity_date":1691142149,"creation_date":1691134080,"question_id":76833798,"body_markdown":"I use JUnit and Mockito.\r\nI have a method, who contain switch-cases in a try-catch statement. The all cases return &#39;null&#39; pojo, but this is not problem, because I know which pojo (=case) returned them. But the try-catch block catching returned error, like this the final return is a &quot;error&quot; string. So I can&#39;t explain, who &quot;case&quot; dropped the &quot;error&quot; string. That way I can&#39;t find out if the call was made in the right direction, even though that would be the job.\r\n\r\nThe code sketch:\r\n\r\n\r\n```\r\ntry{\r\nswitch (String str):\r\n    case &quot;a&quot;:\r\n        return mapper.writeValueAsString(sampleService.sampleServiceMethod(samplePojo));\r\n    ...\r\n} catch () {\r\n    return DefaultMethodResult.error.name()\r\n}\r\n```\r\n","title":"How to testing switch-case if the all case return &quot;error&quot; string?","body":"<p>I use JUnit and Mockito.\nI have a method, who contain switch-cases in a try-catch statement. The all cases return 'null' pojo, but this is not problem, because I know which pojo (=case) returned them. But the try-catch block catching returned error, like this the final return is a &quot;error&quot; string. So I can't explain, who &quot;case&quot; dropped the &quot;error&quot; string. That way I can't find out if the call was made in the right direction, even though that would be the job.</p>\n<p>The code sketch:</p>\n<pre><code>try{\nswitch (String str):\n    case &quot;a&quot;:\n        return mapper.writeValueAsString(sampleService.sampleServiceMethod(samplePojo));\n    ...\n} catch () {\n    return DefaultMethodResult.error.name()\n}\n</code></pre>\n"},{"tags":["java","elasticsearch"],"comments":[{"owner":{"account_id":1391655,"reputation":14169,"user_id":1432281,"display_name":"dadoonet"},"score":0,"creation_date":1691142325,"post_id":76834702,"comment_id":135454865,"body_markdown":"Why do you want to display 20000 hits on a page? Instead display 10-100 docs at a time and paginate.","body":"Why do you want to display 20000 hits on a page? Instead display 10-100 docs at a time and paginate."},{"owner":{"account_id":3015679,"reputation":319,"user_id":2557930,"accept_rate":38,"display_name":"user2557930"},"score":0,"creation_date":1691142569,"post_id":76834702,"comment_id":135454919,"body_markdown":"actually on the page i need to display the size of that  querry hits , so i just display the number 20000","body":"actually on the page i need to display the size of that  querry hits , so i just display the number 20000"},{"owner":{"account_id":6875395,"reputation":1037,"user_id":5284011,"display_name":"JohnXF"},"score":0,"creation_date":1691150393,"post_id":76834702,"comment_id":135456336,"body_markdown":"If you want to paginate, then you need to get a count of the records the query will return, work out how many pages there are and then fetch X records per page. Alternatively, you use scrolling and in that case you can just fetch records in smaller chunks - a couple of tens or hundreds at a time. 10,000 records seems a lot to work with/scroll through for a user interface.","body":"If you want to paginate, then you need to get a count of the records the query will return, work out how many pages there are and then fetch X records per page. Alternatively, you use scrolling and in that case you can just fetch records in smaller chunks - a couple of tens or hundreds at a time. 10,000 records seems a lot to work with/scroll through for a user interface."},{"owner":{"account_id":1391655,"reputation":14169,"user_id":1432281,"display_name":"dadoonet"},"score":0,"creation_date":1691158660,"post_id":76834702,"comment_id":135458229,"body_markdown":"It&#39;s better to display first the meaningful documents to the user (the most relevant ones) instead of letting the user paginate 2000 times to find the right information they are looking for.","body":"It&#39;s better to display first the meaningful documents to the user (the most relevant ones) instead of letting the user paginate 2000 times to find the right information they are looking for."}],"owner":{"account_id":3015679,"reputation":319,"user_id":2557930,"accept_rate":38,"display_name":"user2557930"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691141847,"creation_date":1691141847,"question_id":76834702,"body_markdown":" I have an elasticsearch index with some more than 20 000 documents, initially i fetched the documents with  \r\n\r\n    final SearchHits&lt;MyTyp&gt; searchHitsMyTyp =\r\n            elasticsearchCustomTemplate.search(\r\n                    searchQueryMyTyp,\r\n                    MyTyp.class,\r\n                    IndexCoordinates.of(indexSettings.indexMyTypName))\r\n\r\n\r\nand it returned 10 000 documents immediately , so to handle the limitation i have chnaged that code to the following to fetch all records \r\n\r\n     NativeSearchQuery searchQuery =\r\n            new NativeSearchQueryBuilder()\r\n                    .withQuery(\r\n                            QueryBuilders.matchQuery(\r\n                                    &quot;MyTyp_id&quot;, mytyp.getId()))\r\n                    .build();\r\n\t\t\t\t\t\r\n    NativeSearchQueryBuilder queryBuilder = new NativeSearchQueryBuilder();\r\n    queryBuilder.withQuery(QueryBuilders.termQuery(&quot;MyTyp_id&quot;&quot;, mytyp.getId()));\r\n    queryBuilder.withPageable(PageRequest.of(0, 10000));\r\n    queryBuilder.withSort(SortBuilders.fieldSort(&quot;_id&quot;).order(SortOrder.ASC));\r\n\r\n\r\n    queryBuilder.withAggregations(\r\n            AggregationBuilders.filter(\r\n                    &quot;filter_by_id&quot;, QueryBuilders.termQuery(&quot;MyTyp_id&quot;, mytyp.getId())));\r\n    NativeSearchQuery searchQueryMyTyp = queryBuilder.build();\r\n    SearchHit[] searchHitsMyTyp=null;\r\n    final ArrayList&lt;MyTyp&gt; typeList=new ArrayList();\r\n\r\n    do {\r\n      if(searchHitsMyTyp!=null) {\r\n        searchQuery.setSearchAfter(searchHitsMyTyp[searchHitsMyTyp.length - 1].getSortValues().stream().toList());\r\n      }\r\n      searchHitsMyTyp =  elasticsearchCustomTemplate.search(\r\n              searchQueryMyTyp,\r\n              MyTyp.class,\r\n              IndexCoordinates.of(indexSettings.indexMyTypName)).getSearchHits().toArray(new SearchHit[0]);\r\n      typeList.addAll( Arrays.stream(searchHitsMyTyp).map(p-&gt;(MyTyp)p.getContent()).toList());\r\n\r\n\r\n    }while(searchHitsMyTyp.length &gt;= 10000);\r\n\r\nnow the problem is that its so slows that it literally hangs the UI, is there a way to make that calls faster ,\r\nso if returning 10000 results takes 1 sec 20000 should take like 2 sec ,not sure if there is actually a way arround that or its limitation of ElasticSearch and Spring ?","title":"Fetching more thatn 10000 documents from Elasticsearch in Spring too slow","body":"<p>I have an elasticsearch index with some more than 20 000 documents, initially i fetched the documents with</p>\n<pre><code>final SearchHits&lt;MyTyp&gt; searchHitsMyTyp =\n        elasticsearchCustomTemplate.search(\n                searchQueryMyTyp,\n                MyTyp.class,\n                IndexCoordinates.of(indexSettings.indexMyTypName))\n</code></pre>\n<p>and it returned 10 000 documents immediately , so to handle the limitation i have chnaged that code to the following to fetch all records</p>\n<pre><code> NativeSearchQuery searchQuery =\n        new NativeSearchQueryBuilder()\n                .withQuery(\n                        QueryBuilders.matchQuery(\n                                &quot;MyTyp_id&quot;, mytyp.getId()))\n                .build();\n                \nNativeSearchQueryBuilder queryBuilder = new NativeSearchQueryBuilder();\nqueryBuilder.withQuery(QueryBuilders.termQuery(&quot;MyTyp_id&quot;&quot;, mytyp.getId()));\nqueryBuilder.withPageable(PageRequest.of(0, 10000));\nqueryBuilder.withSort(SortBuilders.fieldSort(&quot;_id&quot;).order(SortOrder.ASC));\n\n\nqueryBuilder.withAggregations(\n        AggregationBuilders.filter(\n                &quot;filter_by_id&quot;, QueryBuilders.termQuery(&quot;MyTyp_id&quot;, mytyp.getId())));\nNativeSearchQuery searchQueryMyTyp = queryBuilder.build();\nSearchHit[] searchHitsMyTyp=null;\nfinal ArrayList&lt;MyTyp&gt; typeList=new ArrayList();\n\ndo {\n  if(searchHitsMyTyp!=null) {\n    searchQuery.setSearchAfter(searchHitsMyTyp[searchHitsMyTyp.length - 1].getSortValues().stream().toList());\n  }\n  searchHitsMyTyp =  elasticsearchCustomTemplate.search(\n          searchQueryMyTyp,\n          MyTyp.class,\n          IndexCoordinates.of(indexSettings.indexMyTypName)).getSearchHits().toArray(new SearchHit[0]);\n  typeList.addAll( Arrays.stream(searchHitsMyTyp).map(p-&gt;(MyTyp)p.getContent()).toList());\n\n\n}while(searchHitsMyTyp.length &gt;= 10000);\n</code></pre>\n<p>now the problem is that its so slows that it literally hangs the UI, is there a way to make that calls faster ,\nso if returning 10000 results takes 1 sec 20000 should take like 2 sec ,not sure if there is actually a way arround that or its limitation of ElasticSearch and Spring ?</p>\n"},{"tags":["java","sqlite","jdbc","prepared-statement"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":3,"creation_date":1691064491,"post_id":76827860,"comment_id":135442736,"body_markdown":"Read the Javadoc for Statement.executeUpdate(String). You want to call `s.executeUpdate()`, as you&#39;ve already provided the SQL to `prepareStatement`.","body":"Read the Javadoc for Statement.executeUpdate(String). You want to call <code>s.executeUpdate()</code>, as you&#39;ve already provided the SQL to <code>prepareStatement</code>."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1691064577,"post_id":76827860,"comment_id":135442749,"body_markdown":"@OHGODSPIDERS they are using parameterless prepared statements, as far as I can tell. i.e. the DDL is a static string.","body":"@OHGODSPIDERS they are using parameterless prepared statements, as far as I can tell. i.e. the DDL is a static string."},{"owner":{"account_id":29151929,"reputation":3,"user_id":22332584,"display_name":"SN4K"},"score":0,"creation_date":1691065712,"post_id":76827860,"comment_id":135442990,"body_markdown":"private &lt;T&gt; T wrapException(String sql, @NotNull ThrowingFunction&lt;Statement, T, SQLException&gt; operation) {\n        try(Connection connection = getConnectionType().getConnection()){\n            try (Statement statement = connection.createStatement()) {\n                return operation.apply(statement);\n            }\n        } catch (SQLException e) {\n            throw new RuntimeException(e);\n        }\n    }\n\nYou mean to change PreparedStatement to Statement like this ?","body":"private &lt;T&gt; T wrapException(String sql, @NotNull ThrowingFunction&lt;Statement, T, SQLException&gt; operation) {         try(Connection connection = getConnectionType().getConnection()){             try (Statement statement = connection.createStatement()) {                 return operation.apply(statement);             }         } catch (SQLException e) {             throw new RuntimeException(e);         }     }  You mean to change PreparedStatement to Statement like this ?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1691065872,"post_id":76827860,"comment_id":135443034,"body_markdown":"That should work, yes. But when you want to provide parameters to your statements you should use prepared statements.","body":"That should work, yes. But when you want to provide parameters to your statements you should use prepared statements."},{"owner":{"account_id":29151929,"reputation":3,"user_id":22332584,"display_name":"SN4K"},"score":0,"creation_date":1691066089,"post_id":76827860,"comment_id":135443089,"body_markdown":"Yes cause with this method i&#39;m unable to parse PreparedStatement in parameters","body":"Yes cause with this method i&#39;m unable to parse PreparedStatement in parameters"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1691066368,"post_id":76827860,"comment_id":135443161,"body_markdown":"But none of your functions have parameters, just static SQL, so `createStatement` is fine for what you are doing.","body":"But none of your functions have parameters, just static SQL, so <code>createStatement</code> is fine for what you are doing."}],"answers":[{"tags":[],"owner":{"account_id":213468,"reputation":103489,"user_id":466862,"display_name":"Mark Rotteveel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691141649,"creation_date":1691141649,"answer_id":76834670,"question_id":76827860,"body_markdown":"The problem is that some of your methods call `executeQuery(String)` or `executeUpdate(String)` on `PreparedStatement`, and this is not allowed by the JDBC API. Conforming implementations are required to throw a `SQLException` if this happens.\r\n\r\nAs documented on [`Statement.executeQuery(String)`][1] (emphasis mine):\r\n\r\n&gt; **Throws:** \\\r\n&gt; `SQLException` - if a database access error occurs, this method is called on a closed `Statement`, the given SQL statement produces anything other than a single `ResultSet` object, **the method is called on a `PreparedStatement` or `CallableStatement`**\r\n\r\nThe same is documented for other `execute` methods on `Statement`.\r\n\r\nYou either need to use `executeQuery()` or `executeUpdate()`, or you need to use a `Statement` instead of a `PreparedStatement`.\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Statement.html#executeQuery(java.lang.String)","title":"java.sql.SQLException: method cannot be called on a PreparedStatement","body":"<p>The problem is that some of your methods call <code>executeQuery(String)</code> or <code>executeUpdate(String)</code> on <code>PreparedStatement</code>, and this is not allowed by the JDBC API. Conforming implementations are required to throw a <code>SQLException</code> if this happens.</p>\n<p>As documented on <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Statement.html#executeQuery(java.lang.String)\" rel=\"nofollow noreferrer\"><code>Statement.executeQuery(String)</code></a> (emphasis mine):</p>\n<blockquote>\n<p><strong>Throws:</strong> <br />\n<code>SQLException</code> - if a database access error occurs, this method is called on a closed <code>Statement</code>, the given SQL statement produces anything other than a single <code>ResultSet</code> object, <strong>the method is called on a <code>PreparedStatement</code> or <code>CallableStatement</code></strong></p>\n</blockquote>\n<p>The same is documented for other <code>execute</code> methods on <code>Statement</code>.</p>\n<p>You either need to use <code>executeQuery()</code> or <code>executeUpdate()</code>, or you need to use a <code>Statement</code> instead of a <code>PreparedStatement</code>.</p>\n"}],"owner":{"account_id":29151929,"reputation":3,"user_id":22332584,"display_name":"SN4K"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":91,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76834670,"answer_count":1,"score":-1,"last_activity_date":1691141649,"creation_date":1691063957,"question_id":76827860,"body_markdown":"I would like to connect to SQLite database using SQLite using HikariCP.\r\nBut I get an error when I try to run a query.\r\n\r\n```none\r\nException in thread &quot;main&quot; java.lang.RuntimeException: java.sql.SQLException: method cannot be called on a PreparedStatement\r\n\tat StatementUtility.wrapException(StatementUtility.java:110)\r\n\tat StatementUtility.executeUpdate(StatementUtility.java:101)\r\n\tat Database.createTables(Database.java:27)\r\n\tat Database.&lt;init&gt;(Database.java:23)\r\n\tat Main.main(Main.java:10)\r\n```\r\n\r\nHikari Connection Setup:\r\n```java\r\npublic Client () {\r\n    HikariConfig config = new HikariConfig();\r\n    config.setPoolName(&quot;AuthMeSQLitePool&quot;);\r\n    config.setDriverClassName(&quot;org.sqlite.JDBC&quot;);\r\n    config.setConnectionTestQuery(&quot;SELECT 1&quot;);\r\n    config.setJdbcUrl(&quot;jdbc:sqlite:I:/data.db&quot;);\r\n    config.setMaxLifetime(60000);\r\n    config.setIdleTimeout(45000);\r\n    config.setMaximumPoolSize(50);\r\n}\r\n```\r\n\r\nStatementUtility.java:\r\n```java\r\npublic &lt;R&gt; R executeQuery(String sql, ThrowingConsumer&lt;PreparedStatement&gt; cfg, ThrowingFunction&lt;ResultSet, R, SQLException&gt; op) {\r\n    return wrapException(sql, s -&gt; {\r\n        cfg.accept(s);\r\n        return op.apply(s.executeQuery());\r\n    });\r\n}\r\n\r\npublic int executeUpdate(String sql, ThrowingConsumer&lt;PreparedStatement&gt; cfg) {\r\n    return wrapException(sql, s -&gt; {\r\n        cfg.accept(s);\r\n        return s.executeUpdate();\r\n    });\r\n}\r\n\r\npublic &lt;R&gt; R executeQuery(String sql, ThrowingFunction&lt;ResultSet, R, SQLException&gt; op) {\r\n    return wrapException(sql, s -&gt; op.apply(s.executeQuery(sql)));\r\n}\r\n\r\npublic int executeUpdate(String sql) {\r\n    return wrapException(sql, s -&gt; s.executeUpdate(sql));\r\n}\r\n\r\nprivate &lt;T&gt; T wrapException(String sql, @NotNull ThrowingFunction&lt;PreparedStatement, T, SQLException&gt; operation) {\r\n    try(Connection connection = getConnection()){\r\n        try (PreparedStatement statement = connection.prepareStatement(sql)) {\r\n            return operation.apply(statement);\r\n        }\r\n    } catch (SQLException e) {\r\n        throw new RuntimeException(e);\r\n    }\r\n}\r\n\r\n@FunctionalInterface\r\npublic interface ThrowingConsumer&lt;T&gt; extends Consumer&lt;T&gt; {\r\n\r\n    @Override\r\n    default void accept(final T elem) {\r\n        try {\r\n            acceptThrows(elem);\r\n        } catch (final Exception e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n    void acceptThrows(T elem) throws Exception;\r\n}\r\n\r\n@FunctionalInterface\r\npublic interface ThrowingFunction&lt;T, R, E extends Exception&gt; {\r\n    R apply(T input) throws E;\r\n}\r\n```\r\n\r\nIt works with native query statement execution, so it is not a connection related problem. Any idea?\r\n","title":"java.sql.SQLException: method cannot be called on a PreparedStatement","body":"<p>I would like to connect to SQLite database using SQLite using HikariCP.\nBut I get an error when I try to run a query.</p>\n<pre class=\"lang-none prettyprint-override\"><code>Exception in thread &quot;main&quot; java.lang.RuntimeException: java.sql.SQLException: method cannot be called on a PreparedStatement\n    at StatementUtility.wrapException(StatementUtility.java:110)\n    at StatementUtility.executeUpdate(StatementUtility.java:101)\n    at Database.createTables(Database.java:27)\n    at Database.&lt;init&gt;(Database.java:23)\n    at Main.main(Main.java:10)\n</code></pre>\n<p>Hikari Connection Setup:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public Client () {\n    HikariConfig config = new HikariConfig();\n    config.setPoolName(&quot;AuthMeSQLitePool&quot;);\n    config.setDriverClassName(&quot;org.sqlite.JDBC&quot;);\n    config.setConnectionTestQuery(&quot;SELECT 1&quot;);\n    config.setJdbcUrl(&quot;jdbc:sqlite:I:/data.db&quot;);\n    config.setMaxLifetime(60000);\n    config.setIdleTimeout(45000);\n    config.setMaximumPoolSize(50);\n}\n</code></pre>\n<p>StatementUtility.java:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public &lt;R&gt; R executeQuery(String sql, ThrowingConsumer&lt;PreparedStatement&gt; cfg, ThrowingFunction&lt;ResultSet, R, SQLException&gt; op) {\n    return wrapException(sql, s -&gt; {\n        cfg.accept(s);\n        return op.apply(s.executeQuery());\n    });\n}\n\npublic int executeUpdate(String sql, ThrowingConsumer&lt;PreparedStatement&gt; cfg) {\n    return wrapException(sql, s -&gt; {\n        cfg.accept(s);\n        return s.executeUpdate();\n    });\n}\n\npublic &lt;R&gt; R executeQuery(String sql, ThrowingFunction&lt;ResultSet, R, SQLException&gt; op) {\n    return wrapException(sql, s -&gt; op.apply(s.executeQuery(sql)));\n}\n\npublic int executeUpdate(String sql) {\n    return wrapException(sql, s -&gt; s.executeUpdate(sql));\n}\n\nprivate &lt;T&gt; T wrapException(String sql, @NotNull ThrowingFunction&lt;PreparedStatement, T, SQLException&gt; operation) {\n    try(Connection connection = getConnection()){\n        try (PreparedStatement statement = connection.prepareStatement(sql)) {\n            return operation.apply(statement);\n        }\n    } catch (SQLException e) {\n        throw new RuntimeException(e);\n    }\n}\n\n@FunctionalInterface\npublic interface ThrowingConsumer&lt;T&gt; extends Consumer&lt;T&gt; {\n\n    @Override\n    default void accept(final T elem) {\n        try {\n            acceptThrows(elem);\n        } catch (final Exception e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n    void acceptThrows(T elem) throws Exception;\n}\n\n@FunctionalInterface\npublic interface ThrowingFunction&lt;T, R, E extends Exception&gt; {\n    R apply(T input) throws E;\n}\n</code></pre>\n<p>It works with native query statement execution, so it is not a connection related problem. Any idea?</p>\n"},{"tags":["java","spring","spring-batch","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":207037,"reputation":4836,"user_id":456684,"accept_rate":100,"display_name":"Mark Spangler"},"down_vote_count":1,"up_vote_count":11,"is_accepted":true,"score":10,"last_activity_date":1382804563,"creation_date":1382803648,"answer_id":19608828,"question_id":19597683,"body_markdown":"Found the issue.  When using the `@EnableAutoConfiguration` annotation from Spring Boot it will invoke the `org.springframework.boot.autoconfigure.batch.BatchAutoConfiguration` class which will initialize the database from the &#39;schema-mysql.sql&#39; file.\r\n\r\nInside the [schema-mysql.sql][1] file is some code to reset the sequence id&#39;s for the batch meta tables which is why I was getting a duplicate key error:\r\n\r\n    INSERT INTO BATCH_STEP_EXECUTION_SEQ values(0);\r\n    INSERT INTO BATCH_JOB_EXECUTION_SEQ values(0);\r\n    INSERT INTO BATCH_JOB_SEQ values(0);\r\n\r\nThe fix was to build the Spring Batch tables separately &amp; then change the `@EnableAutoConfiguration` annotation to:\r\n\r\n    @EnableAutoConfiguration(exclude={BatchAutoConfiguration.class})\r\n\r\nso that when the application starts up it will not try to initialize the Spring Batch tables.\r\n\r\nTo exclude or customize Spring Boot&#39;s auto-configuration for other components you can find some docs here: http://projects.spring.io/spring-boot/docs/spring-boot-autoconfigure/README.html\r\n\r\nThe BatchAutoConfiguration code:\r\nhttps://github.com/spring-projects/spring-boot/blob/master/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/batch/BatchAutoConfiguration.java\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-batch/blob/master/spring-batch-core/src/main/resources/org/springframework/batch/core/schema-mysql.sql","title":"Duplicate Spring Batch Job Instance","body":"<p>Found the issue.  When using the <code>@EnableAutoConfiguration</code> annotation from Spring Boot it will invoke the <code>org.springframework.boot.autoconfigure.batch.BatchAutoConfiguration</code> class which will initialize the database from the 'schema-mysql.sql' file.</p>\n\n<p>Inside the <a href=\"https://github.com/spring-projects/spring-batch/blob/master/spring-batch-core/src/main/resources/org/springframework/batch/core/schema-mysql.sql\" rel=\"noreferrer\">schema-mysql.sql</a> file is some code to reset the sequence id's for the batch meta tables which is why I was getting a duplicate key error:</p>\n\n<pre><code>INSERT INTO BATCH_STEP_EXECUTION_SEQ values(0);\nINSERT INTO BATCH_JOB_EXECUTION_SEQ values(0);\nINSERT INTO BATCH_JOB_SEQ values(0);\n</code></pre>\n\n<p>The fix was to build the Spring Batch tables separately &amp; then change the <code>@EnableAutoConfiguration</code> annotation to:</p>\n\n<pre><code>@EnableAutoConfiguration(exclude={BatchAutoConfiguration.class})\n</code></pre>\n\n<p>so that when the application starts up it will not try to initialize the Spring Batch tables.</p>\n\n<p>To exclude or customize Spring Boot's auto-configuration for other components you can find some docs here: <a href=\"http://projects.spring.io/spring-boot/docs/spring-boot-autoconfigure/README.html\" rel=\"noreferrer\">http://projects.spring.io/spring-boot/docs/spring-boot-autoconfigure/README.html</a></p>\n\n<p>The BatchAutoConfiguration code:\n<a href=\"https://github.com/spring-projects/spring-boot/blob/master/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/batch/BatchAutoConfiguration.java\" rel=\"noreferrer\">https://github.com/spring-projects/spring-boot/blob/master/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/batch/BatchAutoConfiguration.java</a></p>\n"},{"tags":[],"owner":{"account_id":19174228,"reputation":66,"user_id":14007264,"display_name":"Vinayak Nair"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1626346127,"creation_date":1626344044,"answer_id":68391914,"question_id":19597683,"body_markdown":"I have faced similar problem and tried with above solution as well, but it didn&#39;t work. So I fixed it with a workaround.\r\n\r\nWhile creating spring batch metadata-schema for the table **BATCH_JOB_INSTANCE** add **AUTO_INCREMENT** for the column **JOB_INSTANCE_ID** and it will resolve your problem.\r\n\r\n","title":"Duplicate Spring Batch Job Instance","body":"<p>I have faced similar problem and tried with above solution as well, but it didn't work. So I fixed it with a workaround.</p>\n<p>While creating spring batch metadata-schema for the table <strong>BATCH_JOB_INSTANCE</strong> add <strong>AUTO_INCREMENT</strong> for the column <strong>JOB_INSTANCE_ID</strong> and it will resolve your problem.</p>\n"},{"tags":[],"owner":{"account_id":7091295,"reputation":167,"user_id":5426380,"display_name":"Prabhu Kvn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679904855,"creation_date":1679474267,"answer_id":75809958,"question_id":19597683,"body_markdown":"Insert the initial values in *seq tables with following query, you can also use 0 in place of 10.\r\n```\r\nINSERT INTO BATCH_STEP_EXECUTION_SEQ (ID, UNIQUE_KEY) select * from (select 10 as ID, &#39;0&#39; as UNIQUE_KEY) as tmp where not exists(select * from BATCH_STEP_EXECUTION_SEQ);\r\n\r\nINSERT INTO BATCH_JOB_SEQ (ID, UNIQUE_KEY) select * from (select 10 as ID, &#39;0&#39; as UNIQUE_KEY) as tmp where not exists(select * from BATCH_JOB_SEQ);\r\n\r\nINSERT INTO BATCH_JOB_EXECUTION_SEQ (ID, UNIQUE_KEY) select * from (select 10 as ID, &#39;0&#39; as UNIQUE_KEY) as tmp where not exists(select * from BATCH_JOB_EXECUTION_SEQ);\r\n```","title":"Duplicate Spring Batch Job Instance","body":"<p>Insert the initial values in *seq tables with following query, you can also use 0 in place of 10.</p>\n<pre><code>INSERT INTO BATCH_STEP_EXECUTION_SEQ (ID, UNIQUE_KEY) select * from (select 10 as ID, '0' as UNIQUE_KEY) as tmp where not exists(select * from BATCH_STEP_EXECUTION_SEQ);\n\nINSERT INTO BATCH_JOB_SEQ (ID, UNIQUE_KEY) select * from (select 10 as ID, '0' as UNIQUE_KEY) as tmp where not exists(select * from BATCH_JOB_SEQ);\n\nINSERT INTO BATCH_JOB_EXECUTION_SEQ (ID, UNIQUE_KEY) select * from (select 10 as ID, '0' as UNIQUE_KEY) as tmp where not exists(select * from BATCH_JOB_EXECUTION_SEQ);\n</code></pre>\n"}],"owner":{"account_id":207037,"reputation":4836,"user_id":456684,"accept_rate":100,"display_name":"Mark Spangler"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24468,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":19608828,"answer_count":3,"score":8,"last_activity_date":1691141383,"creation_date":1382728293,"question_id":19597683,"body_markdown":"I have a small sample Spring Batch application that when started for the first time will work fine but whenever I shut the application down &amp; restart the jar I always get this error:\r\n\r\n    Caused by: org.springframework.dao.DuplicateKeyException: PreparedStatementCallback; SQL [INSERT into BATCH_JOB_INSTANCE(JOB_INSTANCE_ID, JOB_NAME, JOB_KEY, VERSION) values (?, ?, ?, ?)]; Duplicate entry &#39;1&#39; for key 1; nested exception is com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Duplicate entry &#39;1&#39; for key 1\r\n\r\n\r\nI&#39;m not sure if I have the job incrementer setup wrong. But like I said I can start it up &amp; then use the web service url, `/jobLauncher.html`, to invoke the batch process any number of times just fine. It&#39;s only after I shutdown the application &amp; restart it that I get this error. It wants to use id 1 for the job execution table but id 1 is already there from the previous runs.\r\n\r\nMain class\r\n\r\n    @EnableAutoConfiguration\r\n    @ComponentScan\r\n    public class Application {\r\n\r\n        public static void main(String[] args) throws Exception {\r\n            SpringApplication.run(Application.class, new String[]{ &quot;date=&quot; + System.currentTimeMillis() });\r\n        }\r\n    }\r\n\r\nWebservice class\r\n\r\n    @Controller\r\n    public class JobLauncherController {\r\n    \r\n        @Autowired\r\n        JobLauncher jobLauncher;\r\n\r\n        @Autowired\r\n        Job job;\r\n\r\n        @RequestMapping(&quot;/jobLauncher.html&quot;)\r\n        @ResponseBody\r\n        public String handle() throws Exception{\r\n            jobLauncher.run(job, new JobParametersBuilder().addString(&quot;date&quot;, System.currentTimeMillis() + &quot;&quot;).toJobParameters());\r\n            return &quot;Started the batch...&quot;;\r\n        }\r\n    }\r\n\r\nSpring Batch class\r\n\r\n    @Configuration\r\n    @EnableBatchProcessing\r\n    public class SampleBatchApplication {\r\n\r\n        @Autowired\r\n        private JobBuilderFactory jobs;\r\n\r\n        @Autowired\r\n        private StepBuilderFactory steps;\r\n\r\n        @Bean\r\n        protected Tasklet tasklet() {\r\n            return new Tasklet() {\r\n                @Override\r\n                public RepeatStatus execute(StepContribution contribution,\r\n                                            ChunkContext context) {\r\n                    return RepeatStatus.FINISHED;\r\n                }\r\n            };\r\n        }\r\n\r\n        @Bean\r\n        public Job job() throws Exception {\r\n            return this.jobs.get(&quot;job&quot;)\r\n                       .incrementer(new RunIdIncrementer())\r\n                       .flow(this.step1())\r\n                       .end()\r\n                       .build();\r\n        }\r\n\r\n        @Bean\r\n        protected Step step1() throws Exception {\r\n            return this.steps.get(&quot;step1&quot;).tasklet(this.tasklet()).build();\r\n        }\r\n\r\n        @Bean\r\n        public DataSource dataSource() {\r\n\r\n            BasicDataSource ds = new BasicDataSource();\r\n\r\n            try {\r\n                ds.setDriverClassName(&quot;com.mysql.jdbc.Driver&quot;);\r\n                ds.setUsername(&quot;test&quot;);\r\n                ds.setPassword(&quot;test&quot;);\r\n                ds.setUrl(&quot;jdbc:mysql://127.0.0.1:3306/spring-batch&quot;);\r\n\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n            return ds;\r\n        }\r\n    }","title":"Duplicate Spring Batch Job Instance","body":"<p>I have a small sample Spring Batch application that when started for the first time will work fine but whenever I shut the application down &amp; restart the jar I always get this error:</p>\n\n<pre><code>Caused by: org.springframework.dao.DuplicateKeyException: PreparedStatementCallback; SQL [INSERT into BATCH_JOB_INSTANCE(JOB_INSTANCE_ID, JOB_NAME, JOB_KEY, VERSION) values (?, ?, ?, ?)]; Duplicate entry '1' for key 1; nested exception is com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Duplicate entry '1' for key 1\n</code></pre>\n\n<p>I'm not sure if I have the job incrementer setup wrong. But like I said I can start it up &amp; then use the web service url, <code>/jobLauncher.html</code>, to invoke the batch process any number of times just fine. It's only after I shutdown the application &amp; restart it that I get this error. It wants to use id 1 for the job execution table but id 1 is already there from the previous runs.</p>\n\n<p>Main class</p>\n\n<pre><code>@EnableAutoConfiguration\n@ComponentScan\npublic class Application {\n\n    public static void main(String[] args) throws Exception {\n        SpringApplication.run(Application.class, new String[]{ \"date=\" + System.currentTimeMillis() });\n    }\n}\n</code></pre>\n\n<p>Webservice class</p>\n\n<pre><code>@Controller\npublic class JobLauncherController {\n\n    @Autowired\n    JobLauncher jobLauncher;\n\n    @Autowired\n    Job job;\n\n    @RequestMapping(\"/jobLauncher.html\")\n    @ResponseBody\n    public String handle() throws Exception{\n        jobLauncher.run(job, new JobParametersBuilder().addString(\"date\", System.currentTimeMillis() + \"\").toJobParameters());\n        return \"Started the batch...\";\n    }\n}\n</code></pre>\n\n<p>Spring Batch class</p>\n\n<pre><code>@Configuration\n@EnableBatchProcessing\npublic class SampleBatchApplication {\n\n    @Autowired\n    private JobBuilderFactory jobs;\n\n    @Autowired\n    private StepBuilderFactory steps;\n\n    @Bean\n    protected Tasklet tasklet() {\n        return new Tasklet() {\n            @Override\n            public RepeatStatus execute(StepContribution contribution,\n                                        ChunkContext context) {\n                return RepeatStatus.FINISHED;\n            }\n        };\n    }\n\n    @Bean\n    public Job job() throws Exception {\n        return this.jobs.get(\"job\")\n                   .incrementer(new RunIdIncrementer())\n                   .flow(this.step1())\n                   .end()\n                   .build();\n    }\n\n    @Bean\n    protected Step step1() throws Exception {\n        return this.steps.get(\"step1\").tasklet(this.tasklet()).build();\n    }\n\n    @Bean\n    public DataSource dataSource() {\n\n        BasicDataSource ds = new BasicDataSource();\n\n        try {\n            ds.setDriverClassName(\"com.mysql.jdbc.Driver\");\n            ds.setUsername(\"test\");\n            ds.setPassword(\"test\");\n            ds.setUrl(\"jdbc:mysql://127.0.0.1:3306/spring-batch\");\n\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        return ds;\n    }\n}\n</code></pre>\n"},{"tags":["java","mysql","spring","jpa"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1691143427,"post_id":76834618,"comment_id":135455091,"body_markdown":"You want random ordering but not repeated results in paging, that seems to be conflicting.","body":"You want random ordering but not repeated results in paging, that seems to be conflicting."},{"owner":{"account_id":13975330,"reputation":149,"user_id":10092887,"display_name":"Flinty926"},"score":0,"creation_date":1691146308,"post_id":76834618,"comment_id":135455577,"body_markdown":"Not really. I want the order of results to be random, but I don&#39;t want individual communities to appear more than once","body":"Not really. I want the order of results to be random, but I don&#39;t want individual communities to appear more than once"},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":2,"creation_date":1691146526,"post_id":76834618,"comment_id":135455618,"body_markdown":"Consistent but random ordering between different queries simply isn&#39;t going to happen unless you save that order somewhere. So either make a single query then retrieve pages in batches, or somehow save that random order somewhere. Perhaps in a temporary view?","body":"Consistent but random ordering between different queries simply isn&#39;t going to happen unless you save that order somewhere. So either make a single query then retrieve pages in batches, or somehow save that random order somewhere. Perhaps in a temporary view?"},{"owner":{"account_id":13975330,"reputation":149,"user_id":10092887,"display_name":"Flinty926"},"score":0,"creation_date":1691146875,"post_id":76834618,"comment_id":135455679,"body_markdown":"Ugh, was hoping there might be an easier way to do it... Alright thanks","body":"Ugh, was hoping there might be an easier way to do it... Alright thanks"},{"owner":{"account_id":2701145,"reputation":4860,"user_id":2433323,"display_name":"Klaus Groenbaek"},"score":0,"creation_date":1691205232,"post_id":76834618,"comment_id":135464311,"body_markdown":"Could you elaborate on the use-case, this seems quite strange (is this a school project?)","body":"Could you elaborate on the use-case, this seems quite strange (is this a school project?)"},{"owner":{"account_id":13975330,"reputation":149,"user_id":10092887,"display_name":"Flinty926"},"score":0,"creation_date":1691248127,"post_id":76834618,"comment_id":135467796,"body_markdown":"It&#39;s not a school project. It&#39;s a directory of gaming communities on a website, and we want to randomise the return order, as to give everyone a chance of being on the first page of results","body":"It&#39;s not a school project. It&#39;s a directory of gaming communities on a website, and we want to randomise the return order, as to give everyone a chance of being on the first page of results"}],"owner":{"account_id":13975330,"reputation":149,"user_id":10092887,"display_name":"Flinty926"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691141252,"creation_date":1691141252,"question_id":76834618,"body_markdown":"I have an API endpoint to return a list of `Community`. I currently return a paginated response, using the JPA `Page` class, as demonstrated below. How can I randomise the order in which rows are retrieved? I have attempted to use an `ORDER BY RAND()` in the JPA query, however this results in repeated results on different pages (e.g. `id` 1 is on pages 3,5,7).\r\n\r\nRepository:\r\n```java\r\n@Query(\r\n            value = &quot;SELECT c FROM Community c LEFT JOIN FETCH c.logo log &quot; +\r\n                    &quot;LEFT JOIN FETCH c.banner ban LEFT JOIN FETCH c.background bg &quot; +\r\n                    &quot;LEFT JOIN FETCH c.tags &quot; +\r\n                    &quot;WHERE c.name LIKE %:name% AND c.abbreviation LIKE %:abbreviation% ORDER BY RAND()&quot;,\r\n            countQuery = &quot;SELECT COUNT(c) FROM Community c WHERE c.name LIKE %:name% AND c.abbreviation LIKE %:abbreviation%&quot;\r\n    )\r\n    Page&lt;Community&gt; findAllWithTagsWithLogoWithBannerByIdNotNull(Pageable pageable, @Param(&quot;name&quot;) String name, @Param(&quot;abbreviation&quot;) String abbreviation);\r\n\r\n```\r\nService Layer: \r\n```java\r\npublic Page&lt;Community&gt; listSocialCommunities(Integer page, Integer size, String name, String abbreviation) {\r\n        Pageable pageable = PageRequest.of(page, size);\r\n        return communityRepository.findAllWithTagsWithLogoWithBannerByIdNotNull(pageable, name, abbreviation);\r\n    }\r\n```\r\n\r\nDB: MySQL 8\r\n\r\nJava 17\r\n\r\nAny suggestions welcomed. ","title":"Spring Boot JPA - Randomised Pagination","body":"<p>I have an API endpoint to return a list of <code>Community</code>. I currently return a paginated response, using the JPA <code>Page</code> class, as demonstrated below. How can I randomise the order in which rows are retrieved? I have attempted to use an <code>ORDER BY RAND()</code> in the JPA query, however this results in repeated results on different pages (e.g. <code>id</code> 1 is on pages 3,5,7).</p>\n<p>Repository:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Query(\n            value = &quot;SELECT c FROM Community c LEFT JOIN FETCH c.logo log &quot; +\n                    &quot;LEFT JOIN FETCH c.banner ban LEFT JOIN FETCH c.background bg &quot; +\n                    &quot;LEFT JOIN FETCH c.tags &quot; +\n                    &quot;WHERE c.name LIKE %:name% AND c.abbreviation LIKE %:abbreviation% ORDER BY RAND()&quot;,\n            countQuery = &quot;SELECT COUNT(c) FROM Community c WHERE c.name LIKE %:name% AND c.abbreviation LIKE %:abbreviation%&quot;\n    )\n    Page&lt;Community&gt; findAllWithTagsWithLogoWithBannerByIdNotNull(Pageable pageable, @Param(&quot;name&quot;) String name, @Param(&quot;abbreviation&quot;) String abbreviation);\n\n</code></pre>\n<p>Service Layer:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public Page&lt;Community&gt; listSocialCommunities(Integer page, Integer size, String name, String abbreviation) {\n        Pageable pageable = PageRequest.of(page, size);\n        return communityRepository.findAllWithTagsWithLogoWithBannerByIdNotNull(pageable, name, abbreviation);\n    }\n</code></pre>\n<p>DB: MySQL 8</p>\n<p>Java 17</p>\n<p>Any suggestions welcomed.</p>\n"},{"tags":["java","email","jakarta-mail","pop3"],"comments":[{"owner":{"account_id":1032936,"reputation":29659,"user_id":1040885,"display_name":"Bill Shannon"},"score":2,"creation_date":1502078293,"post_id":45537491,"comment_id":78038417,"body_markdown":"First, [get rid of the socket factory settings](https://javaee.github.io/javamail/FAQ#commonmistakes).  You [can&#39;t tell which messages are new with pop3](https://javaee.github.io/javamail/FAQ#newmsgs); try using imap.","body":"First, <a href=\"https://javaee.github.io/javamail/FAQ#commonmistakes\" rel=\"nofollow noreferrer\">get rid of the socket factory settings</a>.  You <a href=\"https://javaee.github.io/javamail/FAQ#newmsgs\" rel=\"nofollow noreferrer\">can&#39;t tell which messages are new with pop3</a>; try using imap."}],"answers":[{"tags":[],"owner":{"account_id":1352194,"reputation":2624,"user_id":1291512,"accept_rate":58,"display_name":"WhiteAngel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691140954,"creation_date":1691140954,"answer_id":76834583,"question_id":45537491,"body_markdown":"**Summary:** Add `folder.getMessageCount()` before executing search.  \r\n\r\n**Explanation**\r\n\r\nI had the same experience with Outlook while using IMAP.  \r\nConstantly doing: `folder.search(...)` didn&#39;t show new messages arriving. It seemed like the folder needed to be refreshed before making new search.   \r\n\r\nThe same like for TS, if I were closing the connection and opening a new one before launching new `.search(...)` then everything worked as intended.    \r\n\r\nMy solution to &quot;refresh&quot; the folder was to do: `folder.getMessageCount()` before executing `.search(...)` and after that new messages could be seen and retrieved without the need to close and reopen the connection","title":"JavaMail getMessages doesn&#39;t give new messages","body":"<p><strong>Summary:</strong> Add <code>folder.getMessageCount()</code> before executing search.</p>\n<p><strong>Explanation</strong></p>\n<p>I had the same experience with Outlook while using IMAP.<br />\nConstantly doing: <code>folder.search(...)</code> didn't show new messages arriving. It seemed like the folder needed to be refreshed before making new search.</p>\n<p>The same like for TS, if I were closing the connection and opening a new one before launching new <code>.search(...)</code> then everything worked as intended.</p>\n<p>My solution to &quot;refresh&quot; the folder was to do: <code>folder.getMessageCount()</code> before executing <code>.search(...)</code> and after that new messages could be seen and retrieved without the need to close and reopen the connection</p>\n"}],"owner":{"account_id":1894553,"reputation":4990,"user_id":1711809,"accept_rate":46,"display_name":"Gintas_"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":290,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1691140954,"creation_date":1502060967,"question_id":45537491,"body_markdown":"I&#39;m facing a weird problem, trying to use JavaMail on mail.ru, but it doesn&#39;t give me new emails. I login, start checking getMessages() every second, send email manually, but getMessages() always returns the same emails that were before I sent anything. In other words, it doesn&#39;t give any new emails that are past the time it logged into the mailbox. Did I miss something? Here is the full code:\r\n\r\n    public class MailboxReader\r\n    {\r\n        private Store store;\r\n        private Folder inbox;\r\n        public MailboxReader(EmailAcc emailAcc)\r\n        {\r\n            // connect to pop3 inbox\r\n            try {\r\n                Properties properties = System.getProperties();\r\n                Security.addProvider(new com.sun.net.ssl.internal.ssl.Provider());\r\n                properties.setProperty(&quot;mail.pop3.socketFactory.class&quot;, &quot;javax.net.ssl.SSLSocketFactory&quot;);\r\n                properties.setProperty(&quot;mail.pop3.socketFactory.fallback&quot;, &quot;false&quot;);\r\n                properties.setProperty(&quot;mail.pop3.port&quot;, String.valueOf(emailAcc.pop3port));\r\n                properties.setProperty(&quot;mail.pop3.socketFactory.port&quot;, String.valueOf(emailAcc.pop3port));\r\n                properties.setProperty(&quot;mail.pop3.ssl.trust&quot;, &quot;*&quot;);\r\n                Session session = Session.getInstance(properties);\r\n                store = session.getStore(&quot;pop3&quot;);\r\n                store.connect(emailAcc.pop3ip, emailAcc.pop3port, emailAcc.username, emailAcc.password);\r\n                inbox = store.getFolder(&quot;INBOX&quot;);\r\n                inbox.open(Folder.READ_ONLY);\r\n    \r\n            } catch(Exception e)\r\n            {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    \r\n        public Message[] getMessages()\r\n        {\r\n            try {\r\n                return inbox.getMessages();\r\n            } catch (MessagingException e) {\r\n                e.printStackTrace();\r\n            }\r\n            return null;\r\n        }\r\n    \r\n        public void close()\r\n        {\r\n            try {\r\n                inbox.close(true);\r\n                store.close();\r\n            } catch (MessagingException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\nI have manually logged into recipient&#39;s email account to check whether my email arrives - it does. And also, if I reconnect to mailbox with JavaMail, it also sees it. But it would be stupid to keep reconnecting every second, something else is wrong.","title":"JavaMail getMessages doesn&#39;t give new messages","body":"<p>I'm facing a weird problem, trying to use JavaMail on mail.ru, but it doesn't give me new emails. I login, start checking getMessages() every second, send email manually, but getMessages() always returns the same emails that were before I sent anything. In other words, it doesn't give any new emails that are past the time it logged into the mailbox. Did I miss something? Here is the full code:</p>\n\n<pre><code>public class MailboxReader\n{\n    private Store store;\n    private Folder inbox;\n    public MailboxReader(EmailAcc emailAcc)\n    {\n        // connect to pop3 inbox\n        try {\n            Properties properties = System.getProperties();\n            Security.addProvider(new com.sun.net.ssl.internal.ssl.Provider());\n            properties.setProperty(\"mail.pop3.socketFactory.class\", \"javax.net.ssl.SSLSocketFactory\");\n            properties.setProperty(\"mail.pop3.socketFactory.fallback\", \"false\");\n            properties.setProperty(\"mail.pop3.port\", String.valueOf(emailAcc.pop3port));\n            properties.setProperty(\"mail.pop3.socketFactory.port\", String.valueOf(emailAcc.pop3port));\n            properties.setProperty(\"mail.pop3.ssl.trust\", \"*\");\n            Session session = Session.getInstance(properties);\n            store = session.getStore(\"pop3\");\n            store.connect(emailAcc.pop3ip, emailAcc.pop3port, emailAcc.username, emailAcc.password);\n            inbox = store.getFolder(\"INBOX\");\n            inbox.open(Folder.READ_ONLY);\n\n        } catch(Exception e)\n        {\n            e.printStackTrace();\n        }\n    }\n\n    public Message[] getMessages()\n    {\n        try {\n            return inbox.getMessages();\n        } catch (MessagingException e) {\n            e.printStackTrace();\n        }\n        return null;\n    }\n\n    public void close()\n    {\n        try {\n            inbox.close(true);\n            store.close();\n        } catch (MessagingException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n\n<p>I have manually logged into recipient's email account to check whether my email arrives - it does. And also, if I reconnect to mailbox with JavaMail, it also sees it. But it would be stupid to keep reconnecting every second, something else is wrong.</p>\n"},{"tags":["java","mapstruct"],"comments":[{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":1,"creation_date":1690807616,"post_id":76802511,"comment_id":135400064,"body_markdown":"Does adding `default String map(Role role) { return role.getName(); }` work? MapStruct should then use that to map each role to a string when it creates its own `List&lt;Role&gt;` to `List&lt;String&gt;` conversion method which is then used inside the `map(User)` method.","body":"Does adding <code>default String map(Role role) { return role.getName(); }</code> work? MapStruct should then use that to map each role to a string when it creates its own <code>List&lt;Role&gt;</code> to <code>List&lt;String&gt;</code> conversion method which is then used inside the <code>map(User)</code> method."},{"owner":{"account_id":2310053,"reputation":689,"user_id":2028380,"display_name":"damien"},"score":0,"creation_date":1691140378,"post_id":76802511,"comment_id":135454507,"body_markdown":"Your answer solve my problem perfectly. Thank you!\n\nThe piece of MapStruct documentation related is: https://mapstruct.org/documentation/stable/reference/html/#adding-custom-methods","body":"Your answer solve my problem perfectly. Thank you!  The piece of MapStruct documentation related is: <a href=\"https://mapstruct.org/documentation/stable/reference/html/#adding-custom-methods\" rel=\"nofollow noreferrer\">mapstruct.org/documentation/stable/reference/html/&hellip;</a>"},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1691142663,"post_id":76802511,"comment_id":135454939,"body_markdown":"You&#39;re welcome.","body":"You&#39;re welcome."}],"answers":[{"tags":[],"owner":{"account_id":2310053,"reputation":689,"user_id":2028380,"display_name":"damien"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691140759,"creation_date":1691140759,"answer_id":76834559,"question_id":76802511,"body_markdown":"Thanks to the Rob Spoor comment, MapStruct allow default method implementation is the interface for more-than-declarative mapping:\r\n\r\n    @Mapper\r\n    public interface UserMapper {\r\n    \r\n        UserMapper INSTANCE = Mappers.getMapper(UserMapper.class);\r\n    \r\n        UserDto map(User user);\r\n    \r\n        Set&lt;String&gt; map(Set&lt;Role&gt; roles);\r\n    \r\n        default String map(Role role) { return role.getName(); }\r\n    \r\n    }\r\n\r\nRef: https://mapstruct.org/documentation/stable/reference/html/#adding-custom-methods","title":"How to map list of children object as list of String with MapStruct?","body":"<p>Thanks to the Rob Spoor comment, MapStruct allow default method implementation is the interface for more-than-declarative mapping:</p>\n<pre><code>@Mapper\npublic interface UserMapper {\n\n    UserMapper INSTANCE = Mappers.getMapper(UserMapper.class);\n\n    UserDto map(User user);\n\n    Set&lt;String&gt; map(Set&lt;Role&gt; roles);\n\n    default String map(Role role) { return role.getName(); }\n\n}\n</code></pre>\n<p>Ref: <a href=\"https://mapstruct.org/documentation/stable/reference/html/#adding-custom-methods\" rel=\"nofollow noreferrer\">https://mapstruct.org/documentation/stable/reference/html/#adding-custom-methods</a></p>\n"}],"owner":{"account_id":2310053,"reputation":689,"user_id":2028380,"display_name":"damien"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76834559,"answer_count":1,"score":0,"last_activity_date":1691140759,"creation_date":1690797516,"question_id":76802511,"body_markdown":"My parent class is:\r\n```java\r\n@Getter\r\n@Setter\r\npublic class User {\r\n\r\n    Long id;\r\n\r\n    String username;\r\n\r\n    Set&lt;Role&gt; roles = new HashSet&lt;&gt;();\r\n\r\n}\r\n```\r\n\r\nMy child class is:\r\n```java\r\n@Getter\r\n@Setter\r\npublic class Role {\r\n\r\n    Long id;\r\n    \r\n    String name;\r\n\r\n}\r\n```\r\n\r\nI would like to map with MapStruct (last version) this object structure to the following:\r\n```java\r\npublic class UserDto {\r\n\r\n    Long id;\r\n\r\n    String username;\r\n\r\n    Set&lt;String&gt; roles = new HashSet&lt;&gt;();\r\n\r\n}\r\n```\r\n\r\nI have a simple mapper already working but I was unable (after hours of Google search and test) to determine the good way to achieve the conversion of .roles from `Set&lt;Role&gt;` to `Set&lt;String&gt;`:\r\n```\r\n@Mapper\r\npublic interface UserMapper {\r\n\r\n    UserMapper INSTANCE = Mappers.getMapper(UserMapper.class);\r\n\r\n    UserDto map(User user);\r\n\r\n//  List&lt;String&gt; map(List&lt;Role&gt; roles);\r\n}\r\n```","title":"How to map list of children object as list of String with MapStruct?","body":"<p>My parent class is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Getter\n@Setter\npublic class User {\n\n    Long id;\n\n    String username;\n\n    Set&lt;Role&gt; roles = new HashSet&lt;&gt;();\n\n}\n</code></pre>\n<p>My child class is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Getter\n@Setter\npublic class Role {\n\n    Long id;\n    \n    String name;\n\n}\n</code></pre>\n<p>I would like to map with MapStruct (last version) this object structure to the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class UserDto {\n\n    Long id;\n\n    String username;\n\n    Set&lt;String&gt; roles = new HashSet&lt;&gt;();\n\n}\n</code></pre>\n<p>I have a simple mapper already working but I was unable (after hours of Google search and test) to determine the good way to achieve the conversion of .roles from <code>Set&lt;Role&gt;</code> to <code>Set&lt;String&gt;</code>:</p>\n<pre><code>@Mapper\npublic interface UserMapper {\n\n    UserMapper INSTANCE = Mappers.getMapper(UserMapper.class);\n\n    UserDto map(User user);\n\n//  List&lt;String&gt; map(List&lt;Role&gt; roles);\n}\n</code></pre>\n"},{"tags":["java","c#","android","sockets","xamarin"],"comments":[{"owner":{"account_id":54382,"reputation":14965,"user_id":162699,"accept_rate":76,"display_name":"Gusman"},"score":0,"creation_date":1430262971,"post_id":29931285,"comment_id":47985479,"body_markdown":"You are in different subnets, 251 and 252, you will not connect...","body":"You are in different subnets, 251 and 252, you will not connect..."},{"owner":{"account_id":6542609,"reputation":1469,"user_id":5059545,"accept_rate":73,"display_name":"Neo"},"score":0,"creation_date":1438315804,"post_id":29931285,"comment_id":51410583,"body_markdown":"@Coroner_Rex: Could you show your solution to fix this problem? I got this problem, too. Thank you very much!","body":"@Coroner_Rex: Could you show your solution to fix this problem? I got this problem, too. Thank you very much!"},{"owner":{"account_id":6175421,"reputation":323,"user_id":4812471,"accept_rate":33,"display_name":"Coroner_Rex"},"score":1,"creation_date":1438670348,"post_id":29931285,"comment_id":51531096,"body_markdown":"@MrNeo Like Gusman said it cannot find each because the router has allocated computer and the real device into different subnets. You can use your computer to build a wireless LAN by yourself inside of using the public wifi and home router sometimes also puts devices into different subnets so you should always build the LAN by yourself.","body":"@MrNeo Like Gusman said it cannot find each because the router has allocated computer and the real device into different subnets. You can use your computer to build a wireless LAN by yourself inside of using the public wifi and home router sometimes also puts devices into different subnets so you should always build the LAN by yourself."},{"owner":{"account_id":6542609,"reputation":1469,"user_id":5059545,"accept_rate":73,"display_name":"Neo"},"score":0,"creation_date":1438672132,"post_id":29931285,"comment_id":51532061,"body_markdown":"Thank you ^^. My problem fixed, too!","body":"Thank you ^^. My problem fixed, too!"}],"owner":{"account_id":6175421,"reputation":323,"user_id":4812471,"accept_rate":33,"display_name":"Coroner_Rex"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":450,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691140367,"creation_date":1430261226,"question_id":29931285,"body_markdown":"I have a android client need to communicate with a C++ socket server running on my computer. I have successfully connected the client with the the server using android emulator on my computer. However, when I try to run the app on my real device, it cannot connect. The code on the android client side is:\r\n\r\n     Int32 port = 5037;//Is this port setting matters? \r\n\r\n    IPAddress ipAddress = IPAddress.Parse(&quot;128.101.251.176&quot;);//Am I setting the IP address correct?\r\n    \t\t\t\t\r\n    IPEndPoint ipe = new IPEndPoint(ipAddress, port); \r\n    \t\t\t\t\r\n    Socket sock = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp); \r\n\r\n    sock.Connect(ipe);     //always stuck at this line\r\n\r\n\r\nMy android device IPV4 address is 128.101.252.96 and my computer IPV4 address is 128.101.251.176. Is this means My computer and android phone is in the same LAN? How should I setup my IP address? And also do I need to make any change on my Server side? Thank you!\r\n\r\n","title":"Xamarin Android Client in real device fail to connect with C++ socket server","body":"<p>I have a android client need to communicate with a C++ socket server running on my computer. I have successfully connected the client with the the server using android emulator on my computer. However, when I try to run the app on my real device, it cannot connect. The code on the android client side is:</p>\n\n<pre><code> Int32 port = 5037;//Is this port setting matters? \n\nIPAddress ipAddress = IPAddress.Parse(\"128.101.251.176\");//Am I setting the IP address correct?\n\nIPEndPoint ipe = new IPEndPoint(ipAddress, port); \n\nSocket sock = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp); \n\nsock.Connect(ipe);     //always stuck at this line\n</code></pre>\n\n<p>My android device IPV4 address is 128.101.252.96 and my computer IPV4 address is 128.101.251.176. Is this means My computer and android phone is in the same LAN? How should I setup my IP address? And also do I need to make any change on my Server side? Thank you!</p>\n"},{"tags":["java","spring-boot","testing","junit","mockito"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1691134291,"post_id":76833806,"comment_id":135453320,"body_markdown":"Which is exactly what you told it to do... What do you think the line in your `setupMock` method does... You tell it here that when `save` is called return an empty/new `UserEntity`.","body":"Which is exactly what you told it to do... What do you think the line in your <code>setupMock</code> method does... You tell it here that when <code>save</code> is called return an empty/new <code>UserEntity</code>."},{"owner":{"account_id":20204611,"reputation":559,"user_id":14819402,"display_name":"Cross"},"score":0,"creation_date":1691134676,"post_id":76833806,"comment_id":135453396,"body_markdown":"@M.Deinum Oh, alright, thanks, I got it. I just thought that the ```@Spy``` annotation will make the repository to do the real behavior of repository object.","body":"@M.Deinum Oh, alright, thanks, I got it. I just thought that the <code>@Spy</code> annotation will make the repository to do the real behavior of repository object."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1691135215,"post_id":76833806,"comment_id":135453537,"body_markdown":"It does, until you register behavior on it, then it no longer does.","body":"It does, until you register behavior on it, then it no longer does."},{"owner":{"account_id":20204611,"reputation":559,"user_id":14819402,"display_name":"Cross"},"score":0,"creation_date":1691135407,"post_id":76833806,"comment_id":135453580,"body_markdown":"@M.Deinum Well, I tried to remove ```setupMock``` method and now ```us``` variable is just null. Even without fields.","body":"@M.Deinum Well, I tried to remove <code>setupMock</code> method and now <code>us</code> variable is just null. Even without fields."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1691135609,"post_id":76833806,"comment_id":135453631,"body_markdown":"Which is the default behavior for a mock. You are using Spring Boot so you should be using `@SpyBean` not `@Spy`. Looking at your test class you posted here wouldn&#39;t even work. All fields would be `null` in your test and the test would fail with `NullPointerException`.","body":"Which is the default behavior for a mock. You are using Spring Boot so you should be using <code>@SpyBean</code> not <code>@Spy</code>. Looking at your test class you posted here wouldn&#39;t even work. All fields would be <code>null</code> in your test and the test would fail with <code>NullPointerException</code>."},{"owner":{"account_id":20204611,"reputation":559,"user_id":14819402,"display_name":"Cross"},"score":0,"creation_date":1691136225,"post_id":76833806,"comment_id":135453748,"body_markdown":"@M.Deinum Alright, thanks, you&#39;re right. Now when I replaced my ```@Spy``` annotations  with ```@SpyBean``` it really fails with ```NullPointerException```. Could you please help me: should I return new UserEntity with all set fields(in ```initializeMock``` method), or there is a way to use real repo, but with mock database(H2, for example)?","body":"@M.Deinum Alright, thanks, you&#39;re right. Now when I replaced my <code>@Spy</code> annotations  with <code>@SpyBean</code> it really fails with <code>NullPointerException</code>. Could you please help me: should I return new UserEntity with all set fields(in <code>initializeMock</code> method), or there is a way to use real repo, but with mock database(H2, for example)?"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1691138776,"post_id":76833806,"comment_id":135454169,"body_markdown":"It should fail when using `@Spy` not `@SpyBean`. Your test is confusing what is it you want to test? The repository only then use `@DataJpaTest` (assuming this is a JPA based repository) instead of `@SpringBootTest`. I don&#39;t get the mocking and the spying nor see the benefit in this test (neither of mocking/spying nor the `@SpringBootTest`).","body":"It should fail when using <code>@Spy</code> not <code>@SpyBean</code>. Your test is confusing what is it you want to test? The repository only then use <code>@DataJpaTest</code> (assuming this is a JPA based repository) instead of <code>@SpringBootTest</code>. I don&#39;t get the mocking and the spying nor see the benefit in this test (neither of mocking/spying nor the <code>@SpringBootTest</code>)."}],"answers":[{"tags":[],"owner":{"account_id":17228781,"reputation":3548,"user_id":12473843,"display_name":"Sergey Tsypanov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691140076,"creation_date":1691140076,"answer_id":76834474,"question_id":76833806,"body_markdown":"First of all you don&#39;t need `@ExtendWith(SpringExtension.class)` over you test class as `@SpringBootTest` already contains it. Second, to have actual data saved into the database you should use real beans, not mocks, as well as have some real storage. Just add this into your `application-test.yml`:\r\n```yml\r\nspring:\r\n  datasource:\r\n    url: jdbc:h2:mem:~/test;DB_CLOSE_ON_EXIT=FALSE\r\n    username: sa\r\n    password:\r\n    driver-class-name: org.h2.Driver\r\n```\r\nThis will give you in-memory database for tests.\r\nThen use `@Autowired` instead of `@Spy`/`@Mock`:\r\n```java\r\n@SpringBootTest\r\n@TestMethodOrder(MethodOrderer.OrderAnnotation.class)\r\npublic class UserServiceTest {\r\n\r\n    @Autowired\r\n    private UserService userService;\r\n\r\n    @Autowired\r\n    private UserRepo userRepo;\r\n\r\n    @MockBean\r\n    private ValidationService validationService;\r\n    @MockBean\r\n    private PasswordEncoder passwordEncoder;\r\n\r\n\r\n    @AfterEach\r\n    public void deleteDb() {\r\n        userRepo.deleteAll();\r\n    }\r\n```\r\nThis would allow you to have real `userService` and real `userRepo` and mock `validationService` and `passwordEncoder`","title":"UserRepository doesn&#39;t work in Spring boot tests","body":"<p>First of all you don't need <code>@ExtendWith(SpringExtension.class)</code> over you test class as <code>@SpringBootTest</code> already contains it. Second, to have actual data saved into the database you should use real beans, not mocks, as well as have some real storage. Just add this into your <code>application-test.yml</code>:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>spring:\n  datasource:\n    url: jdbc:h2:mem:~/test;DB_CLOSE_ON_EXIT=FALSE\n    username: sa\n    password:\n    driver-class-name: org.h2.Driver\n</code></pre>\n<p>This will give you in-memory database for tests.\nThen use <code>@Autowired</code> instead of <code>@Spy</code>/<code>@Mock</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootTest\n@TestMethodOrder(MethodOrderer.OrderAnnotation.class)\npublic class UserServiceTest {\n\n    @Autowired\n    private UserService userService;\n\n    @Autowired\n    private UserRepo userRepo;\n\n    @MockBean\n    private ValidationService validationService;\n    @MockBean\n    private PasswordEncoder passwordEncoder;\n\n\n    @AfterEach\n    public void deleteDb() {\n        userRepo.deleteAll();\n    }\n</code></pre>\n<p>This would allow you to have real <code>userService</code> and real <code>userRepo</code> and mock <code>validationService</code> and <code>passwordEncoder</code></p>\n"}],"owner":{"account_id":20204611,"reputation":559,"user_id":14819402,"display_name":"Cross"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1691140192,"creation_date":1691134137,"question_id":76833806,"body_markdown":"I&#39;m creating an app for practice in java spring boot, but I faced with the problem when I started to test my `UserService`. I don&#39;t know why, but `UserRepository` just doesn&#39;t want to work. It initialized but when I try to call the `save()` method, it doesn&#39;t save anything in database.\r\n\r\nSo here&#39;s my test:\r\n\r\n**UserServiceTest.java**\r\n\r\n```java\r\n@SpringBootTest\r\n@ExtendWith(SpringExtension.class)\r\n@TestMethodOrder(MethodOrderer.OrderAnnotation.class)\r\npublic class UserServiceTest {\r\n\r\n    @InjectMocks\r\n    private UserService userService;\r\n\r\n    @Spy\r\n    private UserRepo userRepo;\r\n\r\n    @Spy\r\n    private ValidationService validationService;\r\n    @Spy\r\n    private PasswordEncoder passwordEncoder;\r\n\r\n\r\n    @AfterEach\r\n    public void deleteDb() {\r\n        List&lt;UserEntity&gt; users = userRepo.findAll();\r\n        userRepo.deleteAll(users);\r\n    }\r\n\r\n    @BeforeEach\r\n    public void setupMock() {\r\n        Mockito.when(userRepo.save(Mockito.any(UserEntity.class))).thenReturn(new UserEntity());\r\n    }\r\n\r\n    @Test\r\n    @Order(1)\r\n    public void testUserAdding() {\r\n\r\n        List&lt;UserAddModel&gt; addModels = getUserAddModels();\r\n        addModels.forEach(m -&gt; {\r\n            userService.addUser(m);\r\n            List&lt;UserEntity&gt; users = userRepo.findAll();\r\n            System.out.println(users);\r\n            UserEntity user = userRepo.findByPhoneNumber(m.getPhoneNumber()).orElseThrow(UserNotFoundException::new);\r\n            isUserGetModelValid(m, UserGetModel.toModel(user));\r\n        });\r\n        addModels = getInvalidUserAddModels();\r\n        addModels.forEach(m -&gt; Assertions.assertThrows(InvalidDataException.class,\r\n                () -&gt; isUserGetModelValid(m, userService.addUser(m))));\r\n    }\r\n\r\n\r\n    private List&lt;UserAddModel&gt; getUserAddModels() {\r\n        return new ArrayList&lt;&gt;(List.of(\r\n                new UserAddModel(\r\n                        &quot;Alex&quot;,\r\n                        &quot;Filtch&quot;,\r\n                        null,\r\n                        &quot;+19772395747&quot;,\r\n                        null,\r\n                        &quot;AbobaAbobaAboba&quot;\r\n                ),\r\n                new UserAddModel(\r\n                        &quot;Scarlet&quot;,\r\n                        &quot;Brown&quot;,\r\n                        &quot;FiftithEnumed&quot;,\r\n                        &quot;+19164167722&quot;,\r\n                        null,\r\n                        &quot;Fi123sdamJfw+&quot;\r\n                ),\r\n                new UserAddModel(\r\n                        &quot;Andy&quot;,\r\n                        &quot;Balk&quot;,\r\n                        &quot;Afton&quot;,\r\n                        &quot;+112486759123&quot;,\r\n                        &quot;IBiB@Basas&quot;,\r\n                        &quot;IBiB@Basas&quot;\r\n                )\r\n        ));\r\n\r\n    }\r\n\r\n    private void isUserGetModelValid(UserAddModel userAddModel, UserGetModel userGetModel) {\r\n        Assertions.assertAll(\r\n                () -&gt; Assertions.assertNotNull(userGetModel.getId()),\r\n                () -&gt; Assertions.assertEquals(userAddModel.getFirstName(), userGetModel.getFirstName()),\r\n                () -&gt; Assertions.assertEquals(userAddModel.getLastName(), userGetModel.getLastName()),\r\n                () -&gt; Assertions.assertEquals(userAddModel.getPatronymic(), userGetModel.getPatronymic()),\r\n                () -&gt; Assertions.assertEquals(userAddModel.getEmail(), userGetModel.getEmail()),\r\n                () -&gt; Assertions.assertEquals(userAddModel.getPhoneNumber(), userGetModel.getPhoneNumber())\r\n        );\r\n    }\r\n}\r\n```\r\n\r\nAnd here I decided to check if `userRepo` is working right in `UserService.java`:\r\n\r\n```java\r\nUserEntity us = userRepo.save(user);\r\n```\r\n\r\nBut **us** variable has null fields after saving:\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/CiZAR.png\r\n\r\nSo what can be the problem? If you know, please tell me, I&#39;d really appreciate it!","title":"UserRepository doesn&#39;t work in Spring boot tests","body":"<p>I'm creating an app for practice in java spring boot, but I faced with the problem when I started to test my <code>UserService</code>. I don't know why, but <code>UserRepository</code> just doesn't want to work. It initialized but when I try to call the <code>save()</code> method, it doesn't save anything in database.</p>\n<p>So here's my test:</p>\n<p><strong>UserServiceTest.java</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootTest\n@ExtendWith(SpringExtension.class)\n@TestMethodOrder(MethodOrderer.OrderAnnotation.class)\npublic class UserServiceTest {\n\n    @InjectMocks\n    private UserService userService;\n\n    @Spy\n    private UserRepo userRepo;\n\n    @Spy\n    private ValidationService validationService;\n    @Spy\n    private PasswordEncoder passwordEncoder;\n\n\n    @AfterEach\n    public void deleteDb() {\n        List&lt;UserEntity&gt; users = userRepo.findAll();\n        userRepo.deleteAll(users);\n    }\n\n    @BeforeEach\n    public void setupMock() {\n        Mockito.when(userRepo.save(Mockito.any(UserEntity.class))).thenReturn(new UserEntity());\n    }\n\n    @Test\n    @Order(1)\n    public void testUserAdding() {\n\n        List&lt;UserAddModel&gt; addModels = getUserAddModels();\n        addModels.forEach(m -&gt; {\n            userService.addUser(m);\n            List&lt;UserEntity&gt; users = userRepo.findAll();\n            System.out.println(users);\n            UserEntity user = userRepo.findByPhoneNumber(m.getPhoneNumber()).orElseThrow(UserNotFoundException::new);\n            isUserGetModelValid(m, UserGetModel.toModel(user));\n        });\n        addModels = getInvalidUserAddModels();\n        addModels.forEach(m -&gt; Assertions.assertThrows(InvalidDataException.class,\n                () -&gt; isUserGetModelValid(m, userService.addUser(m))));\n    }\n\n\n    private List&lt;UserAddModel&gt; getUserAddModels() {\n        return new ArrayList&lt;&gt;(List.of(\n                new UserAddModel(\n                        &quot;Alex&quot;,\n                        &quot;Filtch&quot;,\n                        null,\n                        &quot;+19772395747&quot;,\n                        null,\n                        &quot;AbobaAbobaAboba&quot;\n                ),\n                new UserAddModel(\n                        &quot;Scarlet&quot;,\n                        &quot;Brown&quot;,\n                        &quot;FiftithEnumed&quot;,\n                        &quot;+19164167722&quot;,\n                        null,\n                        &quot;Fi123sdamJfw+&quot;\n                ),\n                new UserAddModel(\n                        &quot;Andy&quot;,\n                        &quot;Balk&quot;,\n                        &quot;Afton&quot;,\n                        &quot;+112486759123&quot;,\n                        &quot;IBiB@Basas&quot;,\n                        &quot;IBiB@Basas&quot;\n                )\n        ));\n\n    }\n\n    private void isUserGetModelValid(UserAddModel userAddModel, UserGetModel userGetModel) {\n        Assertions.assertAll(\n                () -&gt; Assertions.assertNotNull(userGetModel.getId()),\n                () -&gt; Assertions.assertEquals(userAddModel.getFirstName(), userGetModel.getFirstName()),\n                () -&gt; Assertions.assertEquals(userAddModel.getLastName(), userGetModel.getLastName()),\n                () -&gt; Assertions.assertEquals(userAddModel.getPatronymic(), userGetModel.getPatronymic()),\n                () -&gt; Assertions.assertEquals(userAddModel.getEmail(), userGetModel.getEmail()),\n                () -&gt; Assertions.assertEquals(userAddModel.getPhoneNumber(), userGetModel.getPhoneNumber())\n        );\n    }\n}\n</code></pre>\n<p>And here I decided to check if <code>userRepo</code> is working right in <code>UserService.java</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>UserEntity us = userRepo.save(user);\n</code></pre>\n<p>But <strong>us</strong> variable has null fields after saving:</p>\n<p><a href=\"https://i.stack.imgur.com/CiZAR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CiZAR.png\" alt=\"enter image description here\" /></a></p>\n<p>So what can be the problem? If you know, please tell me, I'd really appreciate it!</p>\n"},{"tags":["java","jgit"],"comments":[{"owner":{"account_id":7615319,"reputation":7120,"user_id":5774952,"display_name":"Zac Anger"},"score":1,"creation_date":1691029784,"post_id":76824468,"comment_id":135436484,"body_markdown":"I don&#39;t know anything about JGit, but from a quick search this looks like it&#39;s more difficult than it probably ought to be. I see [this](https://stackoverflow.com/questions/31325613/equivalent-of-git-diff-in-jgit) and [this](https://stackoverflow.com/questions/12987364/how-to-diff-with-two-files-by-jgit-without-creating-repo) which might be useful (the second one might work even if the files aren&#39;t tracked, assuming it&#39;s not outdated).","body":"I don&#39;t know anything about JGit, but from a quick search this looks like it&#39;s more difficult than it probably ought to be. I see <a href=\"https://stackoverflow.com/questions/31325613/equivalent-of-git-diff-in-jgit\">this</a> and <a href=\"https://stackoverflow.com/questions/12987364/how-to-diff-with-two-files-by-jgit-without-creating-repo\">this</a> which might be useful (the second one might work even if the files aren&#39;t tracked, assuming it&#39;s not outdated)."}],"answers":[{"tags":[],"owner":{"account_id":549364,"reputation":20582,"user_id":2986905,"accept_rate":78,"display_name":"R&#252;diger Herrmann"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691140009,"creation_date":1691051067,"answer_id":76826195,"question_id":76824468,"body_markdown":"In Git, the &#39;local workspace&#39; is called the working directory. The abstraction to compare files from different sources (working directory, index, commit) in JGit are _tree iterators_.\r\n\r\nOnce you created two such iterators, you can diff them. To compare the working directory with the HEAD commit, use something like this:\r\n\r\n```java\r\n// Create the HEAD tree iterator\r\nObjectReader reader = git.getRepository().newObjectReader();\r\nCanonicalTreeParser oldTreeIter = new CanonicalTreeParser();\r\nObjectId headTree = git.getRepository().resolve( &quot;HEAD^{tree}&quot; );\r\noldTreeIter.reset( reader, headTree );\r\n// Create the working tree iterator\r\nAbstractTreeIterator newTreeIter = new FileTreeIterator(git.getRepository());\r\n\r\n// Either: call the diff command\r\ngit.diff()\r\n  .setOldTree(oldTreeIter)\r\n  .setNewTree(newTreeIter)\r\n  .call();\r\n// Or: use the DiffFormatter to list changes\r\ntry (DiffFormatter formatter = new DiffFormatter(NullOutputStream.INSTANCE)) {\r\n  formatter.setRepository(git.getRepository());\r\n  List&lt;DiffEntry&gt; entries = formatter.scan(oldTreeIterator, newTreeIterator);\r\n}\r\n```\r\n\r\nJGit&#39;s `DiffCommand` just prints the differences to stdout. \r\nAlternatively, `DiffFormatter::scan` may be used to return `DiffEntry`s each describing a change to a file.\r\n\r\nFor more on JGit&#39;s diff API you may want to read this article, I&#39;ve written long ago: https://www.codeaffine.com/2016/06/16/jgit-diff/\r\n","title":"How to use JGit to view modifications in the local workspace?","body":"<p>In Git, the 'local workspace' is called the working directory. The abstraction to compare files from different sources (working directory, index, commit) in JGit are <em>tree iterators</em>.</p>\n<p>Once you created two such iterators, you can diff them. To compare the working directory with the HEAD commit, use something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Create the HEAD tree iterator\nObjectReader reader = git.getRepository().newObjectReader();\nCanonicalTreeParser oldTreeIter = new CanonicalTreeParser();\nObjectId headTree = git.getRepository().resolve( &quot;HEAD^{tree}&quot; );\noldTreeIter.reset( reader, headTree );\n// Create the working tree iterator\nAbstractTreeIterator newTreeIter = new FileTreeIterator(git.getRepository());\n\n// Either: call the diff command\ngit.diff()\n  .setOldTree(oldTreeIter)\n  .setNewTree(newTreeIter)\n  .call();\n// Or: use the DiffFormatter to list changes\ntry (DiffFormatter formatter = new DiffFormatter(NullOutputStream.INSTANCE)) {\n  formatter.setRepository(git.getRepository());\n  List&lt;DiffEntry&gt; entries = formatter.scan(oldTreeIterator, newTreeIterator);\n}\n</code></pre>\n<p>JGit's <code>DiffCommand</code> just prints the differences to stdout.\nAlternatively, <code>DiffFormatter::scan</code> may be used to return <code>DiffEntry</code>s each describing a change to a file.</p>\n<p>For more on JGit's diff API you may want to read this article, I've written long ago: <a href=\"https://www.codeaffine.com/2016/06/16/jgit-diff/\" rel=\"nofollow noreferrer\">https://www.codeaffine.com/2016/06/16/jgit-diff/</a></p>\n"},{"tags":[],"owner":{"account_id":29148430,"reputation":13,"user_id":22329807,"display_name":"chineseboy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691114801,"creation_date":1691114760,"answer_id":76832541,"question_id":76824468,"body_markdown":"        Git git = Git.open(new File(&quot;xxx&quot;));\r\n        Repository repository = git.getRepository();\r\n        DiffFormatter diffFormatter = new DiffFormatter(System.out);\r\n        diffFormatter.setRepository(repository);\r\n\r\n        ObjectReader reader = git.getRepository().newObjectReader();\r\n        CanonicalTreeParser oldTreeIter = new CanonicalTreeParser();\r\n        ObjectId headTree = git.getRepository().resolve( &quot;HEAD^{tree}&quot; );\r\n        oldTreeIter.reset( reader, headTree );\r\n        AbstractTreeIterator newTreeIter = new FileTreeIterator(git.getRepository());\r\n        diffFormatter.format(oldTreeIter, newTreeIter);","title":"How to use JGit to view modifications in the local workspace?","body":"<pre><code>    Git git = Git.open(new File(&quot;xxx&quot;));\n    Repository repository = git.getRepository();\n    DiffFormatter diffFormatter = new DiffFormatter(System.out);\n    diffFormatter.setRepository(repository);\n\n    ObjectReader reader = git.getRepository().newObjectReader();\n    CanonicalTreeParser oldTreeIter = new CanonicalTreeParser();\n    ObjectId headTree = git.getRepository().resolve( &quot;HEAD^{tree}&quot; );\n    oldTreeIter.reset( reader, headTree );\n    AbstractTreeIterator newTreeIter = new FileTreeIterator(git.getRepository());\n    diffFormatter.format(oldTreeIter, newTreeIter);\n</code></pre>\n"}],"owner":{"account_id":29148430,"reputation":13,"user_id":22329807,"display_name":"chineseboy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76826195,"answer_count":2,"score":1,"last_activity_date":1691140009,"creation_date":1691027320,"question_id":76824468,"body_markdown":"I can use JGit to view differences between different commits or different branches, but I don&#39;t know how to compare uncommitted files with HEAD.\r\nI have searched through the JGit Cookbook, but I still haven&#39;t found a solution.","title":"How to use JGit to view modifications in the local workspace?","body":"<p>I can use JGit to view differences between different commits or different branches, but I don't know how to compare uncommitted files with HEAD.\nI have searched through the JGit Cookbook, but I still haven't found a solution.</p>\n"},{"tags":["java","struts2","csrf","struts","csrf-token"],"comments":[{"owner":{"account_id":29009791,"reputation":11,"user_id":22221516,"display_name":"SHIVAM AGRAHARI"},"score":0,"creation_date":1689653180,"post_id":76684912,"comment_id":135240318,"body_markdown":"Still not working","body":"Still not working"},{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1691139486,"post_id":76684912,"comment_id":135454328,"body_markdown":"Updated, see details below.","body":"Updated, see details below."}],"answers":[{"tags":[],"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691139354,"creation_date":1689527973,"answer_id":76699548,"question_id":76684912,"body_markdown":"To use the interceptor defined in the `struts.xml` you should add the annotation \r\n\r\n```\r\n@ParentPackage(&quot;struts-security&quot;)\r\n```\r\n---\r\n\r\nYou were trying to use a \r\n\r\n[`tokenSession` interceptor][1]:\r\n---\r\n&gt;This interceptor builds off of the `TokenInterceptor`, providing advanced logic for handling invalid tokens. Unlike the normal token interceptor, this interceptor will attempt to provide intelligent fail-over in the event of multiple requests using the same session. That is, it will block subsequent requests until the first request is complete, and then instead of returning the `invalid.token` code, it will attempt to display the same response that the original, valid action invocation would have displayed if no multiple requests were submitted in the first place.\r\n&gt;\r\n&gt;Example code:\r\n&gt; \r\n&gt;\r\n&gt;```xml\r\n&gt;\r\n&gt;&lt;action name=&quot;someAction&quot; class=&quot;com.examples.SomeAction&quot;&gt;\r\n&gt;     &lt;interceptor-ref name=&quot;tokenSession&quot;/&gt;\r\n&gt;     &lt;interceptor-ref name=&quot;basicStack&quot;/&gt;\r\n&gt;     &lt;result name=&quot;success&quot;&gt;good_result.ftl&lt;/result&gt;\r\n&gt;&lt;/action&gt;\r\n&gt;\r\n&gt; &lt;-- In this case, myMethod of the action class will not\r\n&gt;        get checked for invalidity of token --&gt;\r\n&gt;&lt;action name=&quot;someAction&quot; class=&quot;com.examples.SomeAction&quot;&gt;\r\n&gt;     &lt;interceptor-ref name=&quot;tokenSession&quot;&gt;\r\n&gt;         &lt;param name=&quot;excludeMethods&quot;&gt;myMethod&lt;/param&gt;\r\n&gt;     &lt;/interceptor-ref name=&quot;tokenSession&gt;\r\n&gt;     &lt;interceptor-ref name=&quot;basicStack&quot;/&gt;\r\n&gt;     &lt;result name=&quot;success&quot;&gt;good_result.ftl&lt;/result&gt;\r\n&gt; &lt;/action&gt;\r\n&gt;```\r\n\r\nAs you see in the examples you were missing some basic interceptors.\r\n\r\n---\r\nThese interceptors are defined in the `struts-default` package which is inherited. So, you shouldn&#39;t override them. Just remove these interceptors from the `&lt;interceptors&gt;` tag, or use `&lt;intetceptor-ref&gt;` tag instead. \r\nOnly one *token* interceptor should be configured to the action. Because both is using the same token from the browser, so they are mutually exclusive.\r\n\r\n```xml\r\n&lt;interceptor name=&quot;token&quot; class=&quot;org.apache.struts2.interceptor.TokenInterceptor&quot; /&gt;\r\n&lt;interceptor name=&quot;tokenSessionStore&quot; class=  &quot;org.apache.struts2.interceptor.TokenSessionStoreInterceptor&quot; /&gt;\r\n```\r\n---\r\n\r\nAlso check [this][2] answer if you want to create a custom interceptor stack and use it to every action.\r\n\r\n\r\n[1]: https://struts.apache.org/maven/struts2-core/apidocs/org/apache/struts2/interceptor/TokenSessionStoreInterceptor.html\r\n  [2]: https://stackoverflow.com/a/16940296/573032","title":"CSRF implementation error in struts 6.2.0","body":"<p>To use the interceptor defined in the <code>struts.xml</code> you should add the annotation</p>\n<pre><code>@ParentPackage(&quot;struts-security&quot;)\n</code></pre>\n<hr />\n<p>You were trying to use a</p>\n<h2><a href=\"https://struts.apache.org/maven/struts2-core/apidocs/org/apache/struts2/interceptor/TokenSessionStoreInterceptor.html\" rel=\"nofollow noreferrer\"><code>tokenSession</code> interceptor</a>:</h2>\n<blockquote>\n<p>This interceptor builds off of the <code>TokenInterceptor</code>, providing advanced logic for handling invalid tokens. Unlike the normal token interceptor, this interceptor will attempt to provide intelligent fail-over in the event of multiple requests using the same session. That is, it will block subsequent requests until the first request is complete, and then instead of returning the <code>invalid.token</code> code, it will attempt to display the same response that the original, valid action invocation would have displayed if no multiple requests were submitted in the first place.</p>\n<p>Example code:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>\n&lt;action name=&quot;someAction&quot; class=&quot;com.examples.SomeAction&quot;&gt;\n    &lt;interceptor-ref name=&quot;tokenSession&quot;/&gt;\n    &lt;interceptor-ref name=&quot;basicStack&quot;/&gt;\n    &lt;result name=&quot;success&quot;&gt;good_result.ftl&lt;/result&gt;\n&lt;/action&gt;\n\n&lt;-- In this case, myMethod of the action class will not\n       get checked for invalidity of token --&gt;\n&lt;action name=&quot;someAction&quot; class=&quot;com.examples.SomeAction&quot;&gt;\n    &lt;interceptor-ref name=&quot;tokenSession&quot;&gt;\n        &lt;param name=&quot;excludeMethods&quot;&gt;myMethod&lt;/param&gt;\n    &lt;/interceptor-ref name=&quot;tokenSession&gt;\n    &lt;interceptor-ref name=&quot;basicStack&quot;/&gt;\n    &lt;result name=&quot;success&quot;&gt;good_result.ftl&lt;/result&gt;\n&lt;/action&gt;\n</code></pre>\n</blockquote>\n<p>As you see in the examples you were missing some basic interceptors.</p>\n<hr />\n<p>These interceptors are defined in the <code>struts-default</code> package which is inherited. So, you shouldn't override them. Just remove these interceptors from the <code>&lt;interceptors&gt;</code> tag, or use <code>&lt;intetceptor-ref&gt;</code> tag instead.\nOnly one <em>token</em> interceptor should be configured to the action. Because both is using the same token from the browser, so they are mutually exclusive.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;interceptor name=&quot;token&quot; class=&quot;org.apache.struts2.interceptor.TokenInterceptor&quot; /&gt;\n&lt;interceptor name=&quot;tokenSessionStore&quot; class=  &quot;org.apache.struts2.interceptor.TokenSessionStoreInterceptor&quot; /&gt;\n</code></pre>\n<hr />\n<p>Also check <a href=\"https://stackoverflow.com/a/16940296/573032\">this</a> answer if you want to create a custom interceptor stack and use it to every action.</p>\n"}],"owner":{"account_id":29009791,"reputation":11,"user_id":22221516,"display_name":"SHIVAM AGRAHARI"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":136,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1691139354,"creation_date":1689312332,"question_id":76684912,"body_markdown":"I am trying to implement CSRF in a Struts 6.2.0  project.\r\n\r\n**`struts.xml`**\r\n\r\n\r\n```xml\r\n&lt;package name=&quot;struts-security&quot; abstract=&quot;true&quot; extends=&quot;struts-default&quot;&gt;\r\n  &lt;interceptors&gt;\r\n    &lt;interceptor-stack name=&quot;defaultSecurityStack&quot; /&gt;\r\n    \r\n    &lt;interceptor name=&quot;token&quot; class=&quot;org.apache.struts2.interceptor.TokenInterceptor&quot; /&gt;\r\n    &lt;interceptor name=&quot;tokenSessionStore&quot; class=  &quot;org.apache.struts2.interceptor.TokenSessionStoreInterceptor&quot; /&gt;\r\n  &lt;/interceptors&gt;\r\n\r\n  &lt;default-interceptor-ref name = &quot;defaultSecurityStack&quot; /&gt;\r\n\r\n  &lt;global-results&gt;\r\n    &lt;result name=&quot;error&quot;&gt;/error401.jsp&lt;/result&gt;\r\n  &lt;/global-results&gt;\r\n\r\n  &lt;global-exception-mappings&gt;\r\n    &lt;exception-mapping result=&quot;error&quot; exception=&quot;java.lang.Exception&quot; /&gt;\r\n  &lt;/global-exception-mappings&gt;\r\n```\r\n\r\n**`LoginAction.java`**\r\n\r\n\r\n```java\r\n@Namespace(&quot;/common&quot;)\r\n@Action(&quot;Login&quot;)\r\n@InterceptorRefs({\r\n  @InterceptorRef(&quot;token&quot;),\r\n  @InterceptorRef(&quot;tokenSessionStore&quot;)\r\n})\r\n@Results({\r\n  @Result(name = &quot;input&quot;, location = &quot;login.Login&quot;, type = &quot;tiles&quot;),\r\n})\r\n```\r\n\r\n**`login.jsp`**\r\n\r\n\r\n```xml\r\n&lt;%@ taglib prefix=&quot;s&quot; uri=&quot;/struts-tags&quot;%&gt;\r\n  &lt;s:form  method=&quot;post&quot; validate=&quot;true&quot; theme=&quot;simple&quot; name=&quot;form&quot; id=&quot;paraFrm&quot; &gt;\r\n    &lt;s:token /&gt;\r\n```\r\n\r\nIt is returning `invalid.token`. Because I have added return page,  it is redirecting to error page. Is there any requirement of additional code to implement token in action page or any other places. ","title":"CSRF implementation error in struts 6.2.0","body":"<p>I am trying to implement CSRF in a Struts 6.2.0  project.</p>\n<p><strong><code>struts.xml</code></strong></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;package name=&quot;struts-security&quot; abstract=&quot;true&quot; extends=&quot;struts-default&quot;&gt;\n  &lt;interceptors&gt;\n    &lt;interceptor-stack name=&quot;defaultSecurityStack&quot; /&gt;\n    \n    &lt;interceptor name=&quot;token&quot; class=&quot;org.apache.struts2.interceptor.TokenInterceptor&quot; /&gt;\n    &lt;interceptor name=&quot;tokenSessionStore&quot; class=  &quot;org.apache.struts2.interceptor.TokenSessionStoreInterceptor&quot; /&gt;\n  &lt;/interceptors&gt;\n\n  &lt;default-interceptor-ref name = &quot;defaultSecurityStack&quot; /&gt;\n\n  &lt;global-results&gt;\n    &lt;result name=&quot;error&quot;&gt;/error401.jsp&lt;/result&gt;\n  &lt;/global-results&gt;\n\n  &lt;global-exception-mappings&gt;\n    &lt;exception-mapping result=&quot;error&quot; exception=&quot;java.lang.Exception&quot; /&gt;\n  &lt;/global-exception-mappings&gt;\n</code></pre>\n<p><strong><code>LoginAction.java</code></strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Namespace(&quot;/common&quot;)\n@Action(&quot;Login&quot;)\n@InterceptorRefs({\n  @InterceptorRef(&quot;token&quot;),\n  @InterceptorRef(&quot;tokenSessionStore&quot;)\n})\n@Results({\n  @Result(name = &quot;input&quot;, location = &quot;login.Login&quot;, type = &quot;tiles&quot;),\n})\n</code></pre>\n<p><strong><code>login.jsp</code></strong></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;%@ taglib prefix=&quot;s&quot; uri=&quot;/struts-tags&quot;%&gt;\n  &lt;s:form  method=&quot;post&quot; validate=&quot;true&quot; theme=&quot;simple&quot; name=&quot;form&quot; id=&quot;paraFrm&quot; &gt;\n    &lt;s:token /&gt;\n</code></pre>\n<p>It is returning <code>invalid.token</code>. Because I have added return page,  it is redirecting to error page. Is there any requirement of additional code to implement token in action page or any other places.</p>\n"},{"tags":["javascript","java","spring","spring-boot","websocket"],"owner":{"account_id":27094406,"reputation":23,"user_id":21064700,"display_name":"Alok Kumar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":202,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691139006,"creation_date":1691122421,"question_id":76832913,"body_markdown":"I am using Stomp in a Spring Boot app where I am getting memory leak warning after adding below code. How to resolve it.\r\n````\r\n@Configuration\r\n@EnableWebSocketMessageBroker\r\npublic class WebSocketConfig implements WebSocketMessageBrokerConfigurer {\r\n\r\n    @Override\r\n    public void configureMessageBroker(final MessageBrokerRegistry registry) {\r\n        registry.enableSimpleBroker(&quot;/topic&quot;);\r\n        registry.setApplicationDestinationPrefixes(&quot;/ws&quot;);\r\n    }\r\n\r\n    @Override\r\n    public void registerStompEndpoints(final StompEndpointRegistry registry) {\r\n        registry.addEndpoint(&quot;/our-websocket&quot;)\r\n                .setHandshakeHandler(new UserHandshakeHandler())\r\n                .withSockJS();\r\n    }\r\n}\r\n````\r\nI am getting a warning -- The web application [ROOT] appears to have started a thread named [MessageBroker-4] but has failed to stop it. This is very likely to create a memory leak.\r\n\r\nThe web application [ROOT] appears to have started a thread named [clientInboundChannel-15] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:\r\n","title":"Memory leak due to websocket and stomp in Spring Boot app","body":"<p>I am using Stomp in a Spring Boot app where I am getting memory leak warning after adding below code. How to resolve it.</p>\n<pre><code>@Configuration\n@EnableWebSocketMessageBroker\npublic class WebSocketConfig implements WebSocketMessageBrokerConfigurer {\n\n    @Override\n    public void configureMessageBroker(final MessageBrokerRegistry registry) {\n        registry.enableSimpleBroker(&quot;/topic&quot;);\n        registry.setApplicationDestinationPrefixes(&quot;/ws&quot;);\n    }\n\n    @Override\n    public void registerStompEndpoints(final StompEndpointRegistry registry) {\n        registry.addEndpoint(&quot;/our-websocket&quot;)\n                .setHandshakeHandler(new UserHandshakeHandler())\n                .withSockJS();\n    }\n}\n</code></pre>\n<p>I am getting a warning -- The web application [ROOT] appears to have started a thread named [MessageBroker-4] but has failed to stop it. This is very likely to create a memory leak.</p>\n<p>The web application [ROOT] appears to have started a thread named [clientInboundChannel-15] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:</p>\n"},{"tags":["java","json","rest","jersey"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1690872050,"post_id":76809017,"comment_id":135409691,"body_markdown":"You should take a look at the actual JSON you are sending out from the browser, and the raw JSON string that is coming in. If Jackson tells you there&#39;s a start array token at line 1, column 1, that&#39;s what it is.","body":"You should take a look at the actual JSON you are sending out from the browser, and the raw JSON string that is coming in. If Jackson tells you there&#39;s a start array token at line 1, column 1, that&#39;s what it is."}],"answers":[{"tags":[],"owner":{"account_id":13258098,"reputation":518,"user_id":9573518,"display_name":"LBS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691138262,"creation_date":1691138262,"answer_id":76834279,"question_id":76809017,"body_markdown":"The problem was the fact that my JSON contained File objects.\r\n\r\nBut it is not possible to directly convert a File object into JSON, even using JSON.stringify.\r\n\r\nThere are three solutions described [here](https://stackoverflow.com/a/4083908/9573518). I chose to base64 encode the file before stringify the whole body object.","title":"Jersey RESTful mapping returns null object or MismatchedInputException","body":"<p>The problem was the fact that my JSON contained File objects.</p>\n<p>But it is not possible to directly convert a File object into JSON, even using JSON.stringify.</p>\n<p>There are three solutions described <a href=\"https://stackoverflow.com/a/4083908/9573518\">here</a>. I chose to base64 encode the file before stringify the whole body object.</p>\n"}],"owner":{"account_id":13258098,"reputation":518,"user_id":9573518,"display_name":"LBS"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1691138262,"creation_date":1690871542,"question_id":76809017,"body_markdown":"My frontend server sends a json built from a VueJS form.\r\nI am trying to get, to map and to parse this json using Jersey 2.32.\r\n\r\n\r\n    {\r\n        &quot;objetDesLiensDuTheme&quot;: {\r\n            &quot;id&quot;: 7195,\r\n            &quot;formalisation&quot;: {\r\n                &quot;selectTitreFichier&quot;: &quot;fiche de formalisation&quot;,\r\n                &quot;inputTitreFichier&quot;: &quot;fiche de formalisation titre fichier&quot;,\r\n                &quot;inputFichier&quot;: {},\r\n            },\r\n            &quot;modop&quot;: {\r\n                &quot;selectTitreFichier&quot;: &quot;fiche m&#233;thodologique&quot;,\r\n                &quot;inputTitreFichier&quot;: &quot;fiche m&#233;thodologique titre fichier&quot;,\r\n                &quot;inputFichier&quot;: {},\r\n            },\r\n        }\r\n    }\r\n\r\n\r\nI&#39;ve stringyfied it to show its structure here but it is a JSON object and a console.log shows me also the content of &quot;inputFichier&quot;:\r\n\r\n\r\n    inputFichier: File { name: &quot;Fichier formalisation.txt&quot;, lastModified: 1690373320586, size: 0, type: &quot;text/plain&quot;, webkitRelativePath: &quot;&quot;}\r\n\r\n\r\nMy REST controller method looks like this:\r\n\r\n\r\n    @POST\r\n    @Path(&quot;/create&quot;)\r\n    @Consumes(MediaType.APPLICATION_JSON)\r\n    public Response createLien(@BeanParam LiensDTO objetDesLiensDuTheme)\r\n    {\r\n        Response response;\r\n        //TODO\r\n        System.out.println(objetDesLiensDuTheme);\r\n\r\n        response = Response.status(Status.CREATED).build();\r\n        return response;\r\n    }\r\n\r\n\r\nBut according to the toString method, the bean parameter seems to be null:\r\n\r\n\r\n    LiensDTO [objetDesLiensDuTheme=null]\r\n\r\n\r\nHere is the LiensDTO class (getter and setter not shown):\r\n\r\n```\r\n    public class LiensDTO implements Serializable\r\n    {\r\n        private static final long serialVersionUID = -5717326975468155988L;\r\n\r\n        public LiensDTO()\r\n        {\r\n            super();\r\n        }\r\n\r\n        @FormParam(&quot;objetDesLiensDuTheme&quot;)\r\n        // @JsonProperty(&quot;objetDesLiensDuTheme&quot;)\r\n        private DocLienDTO objetDesLiensDuTheme;\r\n\r\n        @Override\r\n        public String toString()\r\n        {\r\n            return &quot;LiensDTO [objetDesLiensDuTheme=&quot; + objetDesLiensDuTheme + &quot;]&quot;;\r\n        }\r\n    }\r\n```\r\n\r\nHere is the DocLienDTO class (getters and setters not shown):\r\n\r\n```\r\n    public class DocLienDTO implements Serializable\r\n    {\r\n        private static final long serialVersionUID = -493282593738066056L;\r\n\r\n        private int id;\r\n\r\n        private DocumentDTO formalisation;\r\n\r\n        private DocumentDTO modop;\r\n    }\r\n```\r\n\r\nAnd finally the DocumentDTO class (getters and setters not shown):\r\n\r\n```\r\npublic class DocumentDTO implements Serializable\r\n{\r\n  private static final long serialVersionUID = -6698584238714969958L;\r\n\r\n  private String selectTitreFichier;\r\n\r\n  private String inputTitreFichier;\r\n\r\n  private File inputFichier;\r\n\r\n}\r\n```\r\n\r\n\r\nWhen I try without the `@BeanParam` annotation (like described [here](https://stackoverflow.com/a/34235193/9573518)\r\nor with the `@RequestBody` annotation in the rest controller, I get this exception:\r\n`\r\ncom.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot deserialize instance of\r\n`api.bean.LiensDTO` out of START_ARRAY token at [Source:\r\n(org.glassfish.jersey.message.internal.ReaderInterceptorExecutor$UnCloseableInputStream); line: 1, column: 1].\r\n`\r\n\r\nHowever, the json object doesn&#39;t contain arrays.\r\n\r\nI also tried with `@JsonProperty(&quot;objetDesLiensDuTheme&quot;)` instead of `@FormParam(&quot;objetDesLiensDuTheme&quot;)`.\r\n\r\nI would like to get and to iterate through the &quot;objetDesLiensDuTheme&quot; object for my upload module.","title":"Jersey RESTful mapping returns null object or MismatchedInputException","body":"<p>My frontend server sends a json built from a VueJS form.\nI am trying to get, to map and to parse this json using Jersey 2.32.</p>\n<pre><code>{\n    &quot;objetDesLiensDuTheme&quot;: {\n        &quot;id&quot;: 7195,\n        &quot;formalisation&quot;: {\n            &quot;selectTitreFichier&quot;: &quot;fiche de formalisation&quot;,\n            &quot;inputTitreFichier&quot;: &quot;fiche de formalisation titre fichier&quot;,\n            &quot;inputFichier&quot;: {},\n        },\n        &quot;modop&quot;: {\n            &quot;selectTitreFichier&quot;: &quot;fiche méthodologique&quot;,\n            &quot;inputTitreFichier&quot;: &quot;fiche méthodologique titre fichier&quot;,\n            &quot;inputFichier&quot;: {},\n        },\n    }\n}\n</code></pre>\n<p>I've stringyfied it to show its structure here but it is a JSON object and a console.log shows me also the content of &quot;inputFichier&quot;:</p>\n<pre><code>inputFichier: File { name: &quot;Fichier formalisation.txt&quot;, lastModified: 1690373320586, size: 0, type: &quot;text/plain&quot;, webkitRelativePath: &quot;&quot;}\n</code></pre>\n<p>My REST controller method looks like this:</p>\n<pre><code>@POST\n@Path(&quot;/create&quot;)\n@Consumes(MediaType.APPLICATION_JSON)\npublic Response createLien(@BeanParam LiensDTO objetDesLiensDuTheme)\n{\n    Response response;\n    //TODO\n    System.out.println(objetDesLiensDuTheme);\n\n    response = Response.status(Status.CREATED).build();\n    return response;\n}\n</code></pre>\n<p>But according to the toString method, the bean parameter seems to be null:</p>\n<pre><code>LiensDTO [objetDesLiensDuTheme=null]\n</code></pre>\n<p>Here is the LiensDTO class (getter and setter not shown):</p>\n<pre><code>    public class LiensDTO implements Serializable\n    {\n        private static final long serialVersionUID = -5717326975468155988L;\n\n        public LiensDTO()\n        {\n            super();\n        }\n\n        @FormParam(&quot;objetDesLiensDuTheme&quot;)\n        // @JsonProperty(&quot;objetDesLiensDuTheme&quot;)\n        private DocLienDTO objetDesLiensDuTheme;\n\n        @Override\n        public String toString()\n        {\n            return &quot;LiensDTO [objetDesLiensDuTheme=&quot; + objetDesLiensDuTheme + &quot;]&quot;;\n        }\n    }\n</code></pre>\n<p>Here is the DocLienDTO class (getters and setters not shown):</p>\n<pre><code>    public class DocLienDTO implements Serializable\n    {\n        private static final long serialVersionUID = -493282593738066056L;\n\n        private int id;\n\n        private DocumentDTO formalisation;\n\n        private DocumentDTO modop;\n    }\n</code></pre>\n<p>And finally the DocumentDTO class (getters and setters not shown):</p>\n<pre><code>public class DocumentDTO implements Serializable\n{\n  private static final long serialVersionUID = -6698584238714969958L;\n\n  private String selectTitreFichier;\n\n  private String inputTitreFichier;\n\n  private File inputFichier;\n\n}\n</code></pre>\n<p>When I try without the <code>@BeanParam</code> annotation (like described <a href=\"https://stackoverflow.com/a/34235193/9573518\">here</a>\nor with the <code>@RequestBody</code> annotation in the rest controller, I get this exception:\n<code>com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot deserialize instance of</code>api.bean.LiensDTO<code>out of START_ARRAY token at [Source: (org.glassfish.jersey.message.internal.ReaderInterceptorExecutor$UnCloseableInputStream); line: 1, column: 1].</code></p>\n<p>However, the json object doesn't contain arrays.</p>\n<p>I also tried with <code>@JsonProperty(&quot;objetDesLiensDuTheme&quot;)</code> instead of <code>@FormParam(&quot;objetDesLiensDuTheme&quot;)</code>.</p>\n<p>I would like to get and to iterate through the &quot;objetDesLiensDuTheme&quot; object for my upload module.</p>\n"},{"tags":["java","android"],"owner":{"account_id":29158247,"reputation":1,"user_id":22337554,"display_name":"Kiran Srivastava"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691138036,"creation_date":1691136507,"question_id":76834085,"body_markdown":"I am creating an android app with JAVA in which I will provide questions realted maths and physics. I have used JLatexMathView to show formula in proper form. It is working fine . But the problem here is that I have added questions in database in mixed form like this &quot; Find the value of [formula]&quot; that&#39;s why when it is being loaded in mathiew it is showing like this &quot;Findthevalueof[formula]&quot; . It is treating the text as formula and erasing the space between the words. \r\n\r\nI want to show it separately like a normal question. How can I do this please explain.\r\nPlease let me know if there is any other option to do this.\r\nI am providing some of my codes below\r\n\r\nXML code\r\n\r\n```&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n   &lt;androidx.constraintlayout.widget.ConstraintLayout        \r\n\r\n\r\n   xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    tools:context=&quot;.MainActivity&quot;&gt;\r\n    \r\n\r\n    &lt;ru.noties.jlatexmath.JLatexMathView\r\n        android:id=&quot;@+id/j_latex_math_view&quot;\r\n        android:layout_width=&quot;0dp&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:background=&quot;@color/white&quot;\r\n        android:padding=&quot;16dip&quot;\r\n        app:jlmv_alignHorizontal=&quot;center&quot;\r\n        app:jlmv_alignVertical=&quot;center&quot;\r\n        app:jlmv_textSize=&quot;16sp&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;```\r\n\r\n\r\n\r\n\r\nJAVA code\r\n\r\n```\r\n    public class MainActivity extends AppCompatActivity {\r\n\r\n    MathView mathView ;\r\n     JLatexMathView latex;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        latex = findViewById(R.id.j_latex_math_view);\r\n\r\n   \r\n        final JLatexMathDrawable drawable = JLatexMathDrawable.builder(&quot; Find value of  \\\\[\\\\sqrt[n]   {ab}\\\\overleftarrow{ab}\\\\coprod_a^b\\\\left(\\\\begin{array}{c}a\\\\\\\\    b\\\\end{array}\\\\right)\\\\sum_a^b\\\\]\\n&quot;)\r\n                .textSize(70)\r\n                .padding(8)\r\n                .background(0xFFffffff)\r\n                .align(JLatexMathDrawable.ALIGN_RIGHT)\r\n                .build();\r\n\r\n\r\n\r\n        latex.setLatex(&quot; hhhhhhh bbbbbbbbbbbb bbbbbbbbbbb tttttttt \\\\[\\\\sqrt[n]{ab}\\\\overleftarrow{ab}\\\\coprod_a^b\\\\left(\\\\begin{array}{c}a\\\\\\\\ b\\\\end{array}\\\\right)\\\\sum_a^b\\\\]\\n&quot;);\r\n      //  latex.setLatexDrawable(drawable);\r\n    }\r\n```\r\n\r\n\r\nDEENDENCY \r\n\r\n    implementation &#39;ru.noties:jlatexmath-android:0.2.0&#39;\r\n\r\n// for Cyrillic symbols\r\n    implementation &#39;ru.noties:jlatexmath-android-font-cyrillic:0.2.0&#39;\r\n\r\n// for Greek symbols\r\n    implementation &#39;ru.noties:jlatexmath-android-font-greek:0.2.0&#39;\r\n\r\nI tried to show mixed text + formula questions for maths and physics android ","title":"How to differentiate between text and formula in JLatexMathView","body":"<p>I am creating an android app with JAVA in which I will provide questions realted maths and physics. I have used JLatexMathView to show formula in proper form. It is working fine . But the problem here is that I have added questions in database in mixed form like this &quot; Find the value of [formula]&quot; that's why when it is being loaded in mathiew it is showing like this &quot;Findthevalueof[formula]&quot; . It is treating the text as formula and erasing the space between the words.</p>\n<p>I want to show it separately like a normal question. How can I do this please explain.\nPlease let me know if there is any other option to do this.\nI am providing some of my codes below</p>\n<p>XML code</p>\n<pre><code>   &lt;androidx.constraintlayout.widget.ConstraintLayout        \n\n\n   xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.MainActivity&quot;&gt;\n    \n\n    &lt;ru.noties.jlatexmath.JLatexMathView\n        android:id=&quot;@+id/j_latex_math_view&quot;\n        android:layout_width=&quot;0dp&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:background=&quot;@color/white&quot;\n        android:padding=&quot;16dip&quot;\n        app:jlmv_alignHorizontal=&quot;center&quot;\n        app:jlmv_alignVertical=&quot;center&quot;\n        app:jlmv_textSize=&quot;16sp&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;```\n\n\n\n\nJAVA code\n\n</code></pre>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\nMathView mathView ;\n JLatexMathView latex;\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n    latex = findViewById(R.id.j_latex_math_view);\n\n\n    final JLatexMathDrawable drawable = JLatexMathDrawable.builder(&quot; Find value of  \\\\[\\\\sqrt[n]   {ab}\\\\overleftarrow{ab}\\\\coprod_a^b\\\\left(\\\\begin{array}{c}a\\\\\\\\    b\\\\end{array}\\\\right)\\\\sum_a^b\\\\]\\n&quot;)\n            .textSize(70)\n            .padding(8)\n            .background(0xFFffffff)\n            .align(JLatexMathDrawable.ALIGN_RIGHT)\n            .build();\n\n\n\n    latex.setLatex(&quot; hhhhhhh bbbbbbbbbbbb bbbbbbbbbbb tttttttt \\\\[\\\\sqrt[n]{ab}\\\\overleftarrow{ab}\\\\coprod_a^b\\\\left(\\\\begin{array}{c}a\\\\\\\\ b\\\\end{array}\\\\right)\\\\sum_a^b\\\\]\\n&quot;);\n  //  latex.setLatexDrawable(drawable);\n}\n</code></pre>\n<pre><code>\n\nDEENDENCY \n\n    implementation 'ru.noties:jlatexmath-android:0.2.0'\n\n// for Cyrillic symbols\n    implementation 'ru.noties:jlatexmath-android-font-cyrillic:0.2.0'\n\n// for Greek symbols\n    implementation 'ru.noties:jlatexmath-android-font-greek:0.2.0'\n\nI tried to show mixed text + formula questions for maths and physics android \n</code></pre>\n"},{"tags":["java","jar","resources","organization","getresource"],"comments":[{"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"score":1,"creation_date":1691084017,"post_id":76830357,"comment_id":135447189,"body_markdown":"You can locate resources in the folder same way as in jar. Just make sure your folder with resources is provided with -cp with the correct root","body":"You can locate resources in the folder same way as in jar. Just make sure your folder with resources is provided with -cp with the correct root"},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1691084046,"post_id":76830357,"comment_id":135447196,"body_markdown":"@gdomo Put that into an answer and I&#39;ll accept it.","body":"@gdomo Put that into an answer and I&#39;ll accept it."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1691084403,"post_id":76830357,"comment_id":135447261,"body_markdown":"@user16320675 That is good to know, but I far prefer the -cp option, as it allows me to be explicit and not depend on assumptions. That is safer for me in the long term.","body":"@user16320675 That is good to know, but I far prefer the -cp option, as it allows me to be explicit and not depend on assumptions. That is safer for me in the long term."},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1691084757,"post_id":76830357,"comment_id":135447334,"body_markdown":"There is no need and I would say is an antipattern to add to the classpath something that it is already there. You only need to add to the classpath if it is in a different project or a separate jar.","body":"There is no need and I would say is an antipattern to add to the classpath something that it is already there. You only need to add to the classpath if it is in a different project or a separate jar."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1691086250,"post_id":76830357,"comment_id":135447619,"body_markdown":"@aled I don&#39;t think you understand the full context here. I want to have my resources in an entirely separate folder from where my code (and compiled .class files) will be. Because of this, the -cp option works perfectly for my needs. My code is not going to be nearby my resources, therefore your suggestion doesn&#39;t work, and your concerns about antipattern are irrelevant to my situation. That is because my resources were not on the classpath to begin with.","body":"@aled I don&#39;t think you understand the full context here. I want to have my resources in an entirely separate folder from where my code (and compiled .class files) will be. Because of this, the -cp option works perfectly for my needs. My code is not going to be nearby my resources, therefore your suggestion doesn&#39;t work, and your concerns about antipattern are irrelevant to my situation. That is because my resources were not on the classpath to begin with."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":2,"creation_date":1691086877,"post_id":76830357,"comment_id":135447736,"body_markdown":"assumptions? well, if the code is running, the ClassLoader sure did find the classes that are running, or? If the resources are *sharing* the same location as the classes (deployed together) there is no need for an additional entry (`-cp` or `CLASSPATH`) - Sure, if you *need* a separate location, then it must be added to the classpath","body":"assumptions? well, if the code is running, the ClassLoader sure did find the classes that are running, or? If the resources are <i>sharing</i> the same location as the classes (deployed together) there is no need for an additional entry (<code>-cp</code> or <code>CLASSPATH</code>) - Sure, if you <i>need</i> a separate location, then it must be added to the classpath"},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1691087508,"post_id":76830357,"comment_id":135447866,"body_markdown":"@user16320675 My criticism was to aled, not you. You gave a helpful comment -- you are telling me that, if my resources are already on the classpath, then I can forgo the `-cp`. That is useful info, but I can&#39;t take advantage of it because my resources are not already on the classpath. Aled, on the otherhand, made the assumption that my resources were already on the classpath, and told me that doing `-cp` is an antipattern. I am criticizing aled for jumping to conclusions. You did nothing wrong. And yes, the accepted answer included what you said, which is good. It made the answer better.","body":"@user16320675 My criticism was to aled, not you. You gave a helpful comment -- you are telling me that, if my resources are already on the classpath, then I can forgo the <code>-cp</code>. That is useful info, but I can&#39;t take advantage of it because my resources are not already on the classpath. Aled, on the otherhand, made the assumption that my resources were already on the classpath, and told me that doing <code>-cp</code> is an antipattern. I am criticizing aled for jumping to conclusions. You did nothing wrong. And yes, the accepted answer included what you said, which is good. It made the answer better."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1691087896,"post_id":76830357,"comment_id":135447931,"body_markdown":"it&#39;s OK - I did not refer to anything regarding aled&#39;s comment or your reply to it (or at least I think so) - just the &quot;not depend on assumptions&quot; kind of made me think that you did not understand what I wanted to say... Anyway the ClassLoader uses the same mechanism to find/load resources as it does for classes (no matter if in a JAR, a directory, or ??)","body":"it&#39;s OK - I did not refer to anything regarding aled&#39;s comment or your reply to it (or at least I think so) - just the &quot;not depend on assumptions&quot; kind of made me think that you did not understand what I wanted to say... Anyway the ClassLoader uses the same mechanism to find/load resources as it does for classes (no matter if in a JAR, a directory, or ??)"},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1691088231,"post_id":76830357,"comment_id":135447991,"body_markdown":"@user16320675 I understand. I think the name classpath is part of the confusion because, when I say resources, I actually mean image files. They exist in a very different folder from the rest of my code, and thus, was not in a location that the `ClassLoader` knew to look. I suppose I could move them there, but I don&#39;t want to because that folder will likely get deleted whenever I need to do clean builds. Java will recreate the folder before inserting the created .class files, but I would have lost my images. I could probably turn off that behaviour, but it&#39;s easier to put the images elsewhere.","body":"@user16320675 I understand. I think the name classpath is part of the confusion because, when I say resources, I actually mean image files. They exist in a very different folder from the rest of my code, and thus, was not in a location that the <code>ClassLoader</code> knew to look. I suppose I could move them there, but I don&#39;t want to because that folder will likely get deleted whenever I need to do clean builds. Java will recreate the folder before inserting the created .class files, but I would have lost my images. I could probably turn off that behaviour, but it&#39;s easier to put the images elsewhere."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":2,"creation_date":1691088547,"post_id":76830357,"comment_id":135448038,"body_markdown":"*kind of*  an [XY problem](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)... like the real problem is how the app is being built -- most IDEs do the correct copying of resources, so do most build tools (I know of)","body":"<i>kind of</i>  an <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a>... like the real problem is how the app is being built -- most IDEs do the correct copying of resources, so do most build tools (I know of)"},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1691088718,"post_id":76830357,"comment_id":135448071,"body_markdown":"@user16320675 In this individual instance, you would be correct. However, that is a separate issue that I can fix. Ultimately, I want to be able to store my resources off the default classpath, and be able to include them in as necessary with an explicit command. This is because I want to be able to have my resources be something the user can easily edit and interact with, even after I have built my code.","body":"@user16320675 In this individual instance, you would be correct. However, that is a separate issue that I can fix. Ultimately, I want to be able to store my resources off the default classpath, and be able to include them in as necessary with an explicit command. This is because I want to be able to have my resources be something the user can easily edit and interact with, even after I have built my code."},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1691091596,"post_id":76830357,"comment_id":135448637,"body_markdown":"I agree with @user16320675. It doesn&#39;t look like classpath resource management is what should be used for editable files. I don&#39;t have enough context but probably should be managed as regular files.","body":"I agree with @user16320675. It doesn&#39;t look like classpath resource management is what should be used for editable files. I don&#39;t have enough context but probably should be managed as regular files."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1691091776,"post_id":76830357,"comment_id":135448663,"body_markdown":"@aled By all means, if you have an alternate suggestion, I am willing to hear it.","body":"@aled By all means, if you have an alternate suggestion, I am willing to hear it."},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1691092598,"post_id":76830357,"comment_id":135448827,"body_markdown":"For the use case described in the question is what @user16320675 said. However if the user case is that the application edits and manages files that is a complete different situation to the original question. You may want to open a new question but if it is very high level it could be off topic.","body":"For the use case described in the question is what @user16320675 said. However if the user case is that the application edits and manages files that is a complete different situation to the original question. You may want to open a new question but if it is very high level it could be off topic."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1691111705,"post_id":76830357,"comment_id":135451125,"body_markdown":"@aled So to be clear, it is not the application that is editing and managing files, it is the user. What I wanted was to be able to use the same JAR, but have different values for the `-cp` flag when running the application, depending on the context. That way, I only need to make minor changes on the command line to handle an entirely different context. This gives me a lot of flexibility, and allows me to repurpose an existing solution to a new context without having to change any code.","body":"@aled So to be clear, it is not the application that is editing and managing files, it is the user. What I wanted was to be able to use the same JAR, but have different values for the <code>-cp</code> flag when running the application, depending on the context. That way, I only need to make minor changes on the command line to handle an entirely different context. This gives me a lot of flexibility, and allows me to repurpose an existing solution to a new context without having to change any code."}],"answers":[{"tags":[],"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691137992,"creation_date":1691084928,"answer_id":76830485,"question_id":76830357,"body_markdown":"You can locate resources in the folder same way as in a jar. Just make sure your folder with resources is listed via `-cp` when running java and relative paths in your code corresponds to it.\r\n\r\nHere is an example.\r\n\r\n`java -cp &quot;.;first/path/to/resource/folder;second/path;third/path&quot; PackageName.NameOfClassContainingMainMethod`\r\n\r\nThat said, the resource might be inside of the same folder that your compiled code is in. In that case, there is no need to provide it explicitly via `-cp`.\r\n\r\nWhenever you are loading a resource in your code by `ClassLoader.getResource` / `getResourceAsStream` java looks for it in the classpath. Providing .jar (which is essentially just a zipped folder) and raw folder is just an alternative ways to specify a **content** to be loaded into classpath. ","title":"How to specify resource location in the same way when compiling TO and NOT TO a JAR file","body":"<p>You can locate resources in the folder same way as in a jar. Just make sure your folder with resources is listed via <code>-cp</code> when running java and relative paths in your code corresponds to it.</p>\n<p>Here is an example.</p>\n<p><code>java -cp &quot;.;first/path/to/resource/folder;second/path;third/path&quot; PackageName.NameOfClassContainingMainMethod</code></p>\n<p>That said, the resource might be inside of the same folder that your compiled code is in. In that case, there is no need to provide it explicitly via <code>-cp</code>.</p>\n<p>Whenever you are loading a resource in your code by <code>ClassLoader.getResource</code> / <code>getResourceAsStream</code> java looks for it in the classpath. Providing .jar (which is essentially just a zipped folder) and raw folder is just an alternative ways to specify a <strong>content</strong> to be loaded into classpath.</p>\n"}],"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76830485,"answer_count":1,"score":2,"last_activity_date":1691137992,"creation_date":1691083749,"question_id":76830357,"body_markdown":"I have a project that I am compiling using `javac`. I want to be able to fetch resources without having to first build my project into a JAR file, but at the same time, I don&#39;t want to hard code the location either (C://Users/name/etc).\r\n\r\nI know that if I had a JAR file, I could use a `ClassLoader` and call one of the resource methods from there. Alternatively, if my resources were contained within another JAR file, and that JAR file was on my class path, then I could fetch it from the JAR file in a similar format.\r\n\r\nBut how do I do so when I am only compiling in javac? I don&#39;t want to have to rework all of my resource fetching logic when I eventually turn this into a JAR file, but I also don&#39;t want to have to make a jar file every time I compile and want to test a change. I just want to be able to specify to Java that this is where to find my resources, and I don&#39;t want to change that strategy when I finally decide to making a JAR file.","title":"How to specify resource location in the same way when compiling TO and NOT TO a JAR file","body":"<p>I have a project that I am compiling using <code>javac</code>. I want to be able to fetch resources without having to first build my project into a JAR file, but at the same time, I don't want to hard code the location either (C://Users/name/etc).</p>\n<p>I know that if I had a JAR file, I could use a <code>ClassLoader</code> and call one of the resource methods from there. Alternatively, if my resources were contained within another JAR file, and that JAR file was on my class path, then I could fetch it from the JAR file in a similar format.</p>\n<p>But how do I do so when I am only compiling in javac? I don't want to have to rework all of my resource fetching logic when I eventually turn this into a JAR file, but I also don't want to have to make a jar file every time I compile and want to test a change. I just want to be able to specify to Java that this is where to find my resources, and I don't want to change that strategy when I finally decide to making a JAR file.</p>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":2436173,"reputation":5566,"user_id":2126023,"accept_rate":85,"display_name":"Saif Asif"},"score":1,"creation_date":1399312688,"post_id":23478679,"comment_id":35999150,"body_markdown":"Are you sure that there wasn&#39;t any class inside the default package? Also make sure that you have the proper run configurations setup for the project","body":"Are you sure that there wasn&#39;t any class inside the default package? Also make sure that you have the proper run configurations setup for the project"},{"owner":{"account_id":455488,"reputation":2201,"user_id":853671,"accept_rate":69,"display_name":"Lasitha Benaragama"},"score":0,"creation_date":1399312822,"post_id":23478679,"comment_id":35999252,"body_markdown":"Seems You deleted class which contain your main method with the package.","body":"Seems You deleted class which contain your main method with the package."}],"answers":[{"tags":[],"owner":{"account_id":4401329,"reputation":89,"user_id":3586943,"accept_rate":80,"display_name":"user3586943"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1399313241,"creation_date":1399313241,"answer_id":23478887,"question_id":23478679,"body_markdown":"The problem is that the default packeg is contains a class which is empty but cause problem.As soon as I delete that class the package is delete automatically.","title":"Delete default package in Eclipse","body":"<p>The problem is that the default packeg is contains a class which is empty but cause problem.As soon as I delete that class the package is delete automatically.</p>\n"},{"tags":[],"owner":{"account_id":8154208,"reputation":4189,"user_id":6140314,"display_name":"Mohamed Anees A"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1466757137,"creation_date":1466757137,"answer_id":38008942,"question_id":23478679,"body_markdown":"Move your main class from the default package to any other package and then a simple refresh would solve the problem.","title":"Delete default package in Eclipse","body":"<p>Move your main class from the default package to any other package and then a simple refresh would solve the problem.</p>\n"},{"tags":[],"owner":{"account_id":29158425,"reputation":1,"user_id":22337695,"display_name":"TheCelio81"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691137569,"creation_date":1691137569,"answer_id":76834204,"question_id":23478679,"body_markdown":"just create a package and it will solve the problem. Then relauch your application.","title":"Delete default package in Eclipse","body":"<p>just create a package and it will solve the problem. Then relauch your application.</p>\n"}],"owner":{"account_id":4401329,"reputation":89,"user_id":3586943,"accept_rate":80,"display_name":"user3586943"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16879,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"answer_count":3,"score":4,"last_activity_date":1691137569,"creation_date":1399312553,"question_id":23478679,"body_markdown":"I Have DataLayer and logicLayer as packages in my project. I want to delete the default package since I do not need it. But When I delete I got the following error.\r\n\r\n&gt; Error: Could not find or load main class\r\n\r\nHow can I slove this problem?","title":"Delete default package in Eclipse","body":"<p>I Have DataLayer and logicLayer as packages in my project. I want to delete the default package since I do not need it. But When I delete I got the following error.</p>\n\n<blockquote>\n  <p>Error: Could not find or load main class</p>\n</blockquote>\n\n<p>How can I slove this problem?</p>\n"},{"tags":["java","git","datetime","git-commit","jgit"],"comments":[{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1680150445,"post_id":75867356,"comment_id":133849903,"body_markdown":"Which version of JGit are you using?","body":"Which version of JGit are you using?"}],"answers":[{"tags":[],"owner":{"account_id":9930295,"reputation":11613,"user_id":11082165,"display_name":"Brian61354270"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1680014877,"creation_date":1680012859,"answer_id":75867423,"question_id":75867356,"body_markdown":"The [`PersonIdent`](https://javadoc.io/static/org.eclipse.jgit/org.eclipse.jgit/6.5.0.202303070854-r/org.eclipse.jgit/org/eclipse/jgit/lib/PersonIdent.html) constructor you&#39;re calling in\r\n```\r\nnew PersonIdent(&quot;X&quot;, String.valueOf(oldDate));\r\n```\r\nis \r\n&gt; ```java\r\n&gt; public PersonIdent(String aName, \r\n&gt;                    String aEmailAddress)\r\n&gt; ```\r\n&gt; Construct a new PersonIdent **with current time**. \r\n\r\nEmphasis mine. It looks like your specifying the email address instead of the time.\r\n\r\nTo specify the time, you&#39;ll need to use one of the four other non-copy/config constructors (as of JGit 6.5.0 2023-03-07), which are\r\n```java\r\npublic PersonIdent​(String aName,\r\n                   String aEmailAddress,\r\n                   Instant aWhen,\r\n                   ZoneId zoneId)\r\n\r\npublic PersonIdent​(String aName,\r\n                   String aEmailAddress,\r\n                   ProposedTimestamp when)\r\n\r\npublic PersonIdent​(String aName,\r\n                   String aEmailAddress,\r\n                   Date aWhen,\r\n                   TimeZone aTZ)\r\n\r\npublic PersonIdent​(String aName,\r\n                   String aEmailAddress,\r\n                   long aWhen,\r\n                   int aTZ)\r\n```","title":"JGit commiting with past (old) dates to local repository","body":"<p>The <a href=\"https://javadoc.io/static/org.eclipse.jgit/org.eclipse.jgit/6.5.0.202303070854-r/org.eclipse.jgit/org/eclipse/jgit/lib/PersonIdent.html\" rel=\"nofollow noreferrer\"><code>PersonIdent</code></a> constructor you're calling in</p>\n<pre><code>new PersonIdent(&quot;X&quot;, String.valueOf(oldDate));\n</code></pre>\n<p>is</p>\n<blockquote>\n<pre class=\"lang-java prettyprint-override\"><code>public PersonIdent(String aName, \n                   String aEmailAddress)\n</code></pre>\n<p>Construct a new PersonIdent <strong>with current time</strong>.</p>\n</blockquote>\n<p>Emphasis mine. It looks like your specifying the email address instead of the time.</p>\n<p>To specify the time, you'll need to use one of the four other non-copy/config constructors (as of JGit 6.5.0 2023-03-07), which are</p>\n<pre class=\"lang-java prettyprint-override\"><code>public PersonIdent​(String aName,\n                   String aEmailAddress,\n                   Instant aWhen,\n                   ZoneId zoneId)\n\npublic PersonIdent​(String aName,\n                   String aEmailAddress,\n                   ProposedTimestamp when)\n\npublic PersonIdent​(String aName,\n                   String aEmailAddress,\n                   Date aWhen,\n                   TimeZone aTZ)\n\npublic PersonIdent​(String aName,\n                   String aEmailAddress,\n                   long aWhen,\n                   int aTZ)\n</code></pre>\n"}],"owner":{"account_id":22903011,"reputation":105,"user_id":17041460,"display_name":"Thend"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75867423,"answer_count":1,"score":0,"last_activity_date":1691137547,"creation_date":1680012368,"question_id":75867356,"body_markdown":"I would like to **commit in a specific date in the past using JGit** in Java. For example, I would like to commit to the local repository in 2023-03-01, 2023-03-02, 2023-03-03, 2023-03-04. According to many websites (including StackOverflow posts) I can achieve this by:\r\n\r\n    String oldDate = &quot;2023-03-01&quot;;\r\n    \r\n    PersonIdent author = new PersonIdent(&quot;X&quot;, String.valueOf(oldDate));\r\n    PersonIdent committer = new PersonIdent(&quot;X&quot;, String.valueOf(oldDate));\r\n    \r\n    git.commit().setAuthor(author).setCommitter(committer).setMessage(&quot;Modified temp.txt&quot;).call();\r\n\r\nHowever, this doesn&#39;t do what I want since the date stays the same, the actual date, coming from the system. I have checked the result using `git log` in Git Bash: (**Please check this image**)\r\n\r\n[![enter image description here][1]][1] \r\n\r\n**How can I do commits with past dates?** All help is appreciated!\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/QFsYk.png","title":"JGit commiting with past (old) dates to local repository","body":"<p>I would like to <strong>commit in a specific date in the past using JGit</strong> in Java. For example, I would like to commit to the local repository in 2023-03-01, 2023-03-02, 2023-03-03, 2023-03-04. According to many websites (including StackOverflow posts) I can achieve this by:</p>\n<pre><code>String oldDate = &quot;2023-03-01&quot;;\n\nPersonIdent author = new PersonIdent(&quot;X&quot;, String.valueOf(oldDate));\nPersonIdent committer = new PersonIdent(&quot;X&quot;, String.valueOf(oldDate));\n\ngit.commit().setAuthor(author).setCommitter(committer).setMessage(&quot;Modified temp.txt&quot;).call();\n</code></pre>\n<p>However, this doesn't do what I want since the date stays the same, the actual date, coming from the system. I have checked the result using <code>git log</code> in Git Bash: (<strong>Please check this image</strong>)</p>\n<p><a href=\"https://i.stack.imgur.com/QFsYk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QFsYk.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>How can I do commits with past dates?</strong> All help is appreciated!</p>\n"},{"tags":["java","testing","automated-tests","karate"],"answers":[{"tags":[],"owner":{"account_id":48302,"reputation":55353,"user_id":143475,"display_name":"Peter Thomas"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1691116995,"creation_date":1593054714,"answer_id":62567262,"question_id":62566219,"body_markdown":"First, you are encouraged to write static expected results in tests. That said there are multiple ways to do this, here&#39;s one:\r\n\r\n    * def failedSchema = { xml: &#39;#string&#39;, formErrors: &#39;#array&#39; }\r\n    * def isValid = function(x){ if (x.status == &#39;Receipted&#39;) return x.response == null; return karate.match(x.response, failedSchema).pass }\r\n    * match each response.itemList == &#39;#? isValid(_)&#39;\r\n\r\nHere&#39;s another example: https://stackoverflow.com/a/62567412/143475\r\n\r\nThere are other ways to loop in Karate, but not really designed for matching: https://github.com/intuit/karate#loops\r\n\r\nHere&#39;s an extreme example involving JSON transformation to make it easier to match: https://stackoverflow.com/a/53120851/143475\r\n\r\nAlso refer: https://github.com/intuit/karate#conditional-logic | https://stackoverflow.com/a/76091034/143475\r\n\r\n","title":"Asserting and using conditions for an array response in Karate","body":"<p>First, you are encouraged to write static expected results in tests. That said there are multiple ways to do this, here's one:</p>\n<pre><code>* def failedSchema = { xml: '#string', formErrors: '#array' }\n* def isValid = function(x){ if (x.status == 'Receipted') return x.response == null; return karate.match(x.response, failedSchema).pass }\n* match each response.itemList == '#? isValid(_)'\n</code></pre>\n<p>Here's another example: <a href=\"https://stackoverflow.com/a/62567412/143475\">https://stackoverflow.com/a/62567412/143475</a></p>\n<p>There are other ways to loop in Karate, but not really designed for matching: <a href=\"https://github.com/intuit/karate#loops\" rel=\"nofollow noreferrer\">https://github.com/intuit/karate#loops</a></p>\n<p>Here's an extreme example involving JSON transformation to make it easier to match: <a href=\"https://stackoverflow.com/a/53120851/143475\">https://stackoverflow.com/a/53120851/143475</a></p>\n<p>Also refer: <a href=\"https://github.com/intuit/karate#conditional-logic\" rel=\"nofollow noreferrer\">https://github.com/intuit/karate#conditional-logic</a> | <a href=\"https://stackoverflow.com/a/76091034/143475\">https://stackoverflow.com/a/76091034/143475</a></p>\n"}],"owner":{"account_id":17186781,"reputation":91,"user_id":12441259,"display_name":"Jackson"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3927,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":62567262,"answer_count":1,"score":2,"last_activity_date":1691137294,"creation_date":1593046391,"question_id":62566219,"body_markdown":"I&#39;ve got a request that returns a list of responses in two possible structures, depending on the &#39;status&#39;.\r\n```json\r\n{\r\n    &quot;listSize&quot;: 2,\r\n    &quot;itemList&quot;: [\r\n       {\r\n            &quot;id&quot;: ,\r\n            &quot;Name&quot;: &quot;&quot;,\r\n            &quot;submittedOn&quot;: &quot;&quot;,\r\n            &quot;Reference&quot;: null,\r\n            &quot;status&quot;: &quot;Receipted&quot;,\r\n            &quot;response&quot;: null\r\n        },\r\n        {\r\n            &quot;id&quot;: 12345,\r\n            &quot;submittedOn&quot;: &quot;&quot;,\r\n            &quot;Reference&quot;: null,\r\n            &quot;status&quot;: &quot;Failed&quot;,\r\n            &quot;response&quot;: {\r\n                &quot;xml&quot;: &quot;&quot;,\r\n                &quot;formErrors&quot;: [\r\n                    {\r\n                        &quot;error_type&quot;: &quot;&quot;,\r\n                        &quot;error_location&quot;:&quot;&quot;, \r\n                        &quot;error_message&quot;: &quot;&quot;,\r\n                    }\r\n                ]\r\n            }\r\n        }, \r\n     ]\r\n}\r\n\r\n```\r\nI need to check the structure for the status being either &#39;Receipted&#39; or &#39;Failed&#39;. In Java I would use a for loop and an if statement within it to check the response field with different criteria depending on the &#39;status&#39; field. (Example below)\r\n\r\n```\r\nfor (int i = 0; i &lt; response.length; i++){\r\n   if (response[i].status.equals(&quot;receipted&quot;)){\r\n      //do something\r\n   }\r\n   else{ //failed\r\n      //do something else\r\n   }\r\n}\r\n```\r\n\r\nHow could I achieve something similar in Karate? Should I use a Java Helper?","title":"Asserting and using conditions for an array response in Karate","body":"<p>I've got a request that returns a list of responses in two possible structures, depending on the 'status'.</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    &quot;listSize&quot;: 2,\n    &quot;itemList&quot;: [\n       {\n            &quot;id&quot;: ,\n            &quot;Name&quot;: &quot;&quot;,\n            &quot;submittedOn&quot;: &quot;&quot;,\n            &quot;Reference&quot;: null,\n            &quot;status&quot;: &quot;Receipted&quot;,\n            &quot;response&quot;: null\n        },\n        {\n            &quot;id&quot;: 12345,\n            &quot;submittedOn&quot;: &quot;&quot;,\n            &quot;Reference&quot;: null,\n            &quot;status&quot;: &quot;Failed&quot;,\n            &quot;response&quot;: {\n                &quot;xml&quot;: &quot;&quot;,\n                &quot;formErrors&quot;: [\n                    {\n                        &quot;error_type&quot;: &quot;&quot;,\n                        &quot;error_location&quot;:&quot;&quot;, \n                        &quot;error_message&quot;: &quot;&quot;,\n                    }\n                ]\n            }\n        }, \n     ]\n}\n\n</code></pre>\n<p>I need to check the structure for the status being either 'Receipted' or 'Failed'. In Java I would use a for loop and an if statement within it to check the response field with different criteria depending on the 'status' field. (Example below)</p>\n<pre><code>for (int i = 0; i &lt; response.length; i++){\n   if (response[i].status.equals(&quot;receipted&quot;)){\n      //do something\n   }\n   else{ //failed\n      //do something else\n   }\n}\n</code></pre>\n<p>How could I achieve something similar in Karate? Should I use a Java Helper?</p>\n"},{"tags":["java","xml","json"],"comments":[{"owner":{"account_id":113024,"reputation":4516,"user_id":297907,"accept_rate":56,"display_name":"StackOverFlow"},"score":0,"creation_date":1375953529,"post_id":18121714,"comment_id":26534730,"body_markdown":"@Qwerky Question edited","body":"@Qwerky Question edited"},{"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"score":1,"creation_date":1375961673,"post_id":18121714,"comment_id":26539320,"body_markdown":"Clearly this library is doing some guesswork to try and guess the most suitable JSON data type to use. It&#39;s not clear whether you actually want to treat 0123 as a string or as a number. If you want it as a number, it has to be 123 rather than 0123, because JSON doesn&#39;t allow a leading zero: that&#39;s because of the ancient and horrible tradition in C and Java and JS of treating numbers starting with a zero as octal.","body":"Clearly this library is doing some guesswork to try and guess the most suitable JSON data type to use. It&#39;s not clear whether you actually want to treat 0123 as a string or as a number. If you want it as a number, it has to be 123 rather than 0123, because JSON doesn&#39;t allow a leading zero: that&#39;s because of the ancient and horrible tradition in C and Java and JS of treating numbers starting with a zero as octal."}],"answers":[{"tags":[],"owner":{"account_id":2042374,"reputation":2206,"user_id":1823225,"accept_rate":50,"display_name":"Graham Griffiths"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1375955082,"creation_date":1375953431,"answer_id":18122229,"question_id":18121714,"body_markdown":"looking at the [code for XML.java](https://github.com/douglascrockford/JSON-java/blob/master/XML.java) - in particular the stringToValue method which does \r\n\r\n    &quot;Try to convert a string into a number, boolean, or null&quot;.  \r\n\r\nThe code is below - you can see it tries to parse as a number first, in which case it will trim the leading zeros.  To test you could try adding a non-numeric character in your string - I think it would then preserve the leading zeros.\r\n\r\nIt looks like the behaviour you&#39;re seeing is baked into the library.\r\nWhich is not great, even though the docs for the function toJSONObject do warn \r\n\r\n    &quot;Some information may be lost in this transformation because JSON is a data format and XML is a document format&quot;\r\n\r\nteh codez :\r\n\r\n    // If it might be a number, try converting it. If that doesn&#39;t work,\r\n    // return the string.\r\n    \r\n            try {\r\n                char initial = string.charAt(0);\r\n                boolean negative = false;\r\n                if (initial == &#39;-&#39;) {\r\n                    initial = string.charAt(1);\r\n                    negative = true;\r\n                }\r\n                if (initial == &#39;0&#39; &amp;&amp; string.charAt(negative ? 2 : 1) == &#39;0&#39;) {\r\n                    return string;\r\n                }\r\n                if ((initial &gt;= &#39;0&#39; &amp;&amp; initial &lt;= &#39;9&#39;)) {\r\n                    if (string.indexOf(&#39;.&#39;) &gt;= 0) {\r\n                        return Double.valueOf(string);\r\n                    } else if (string.indexOf(&#39;e&#39;) &lt; 0 &amp;&amp; string.indexOf(&#39;E&#39;) &lt; 0) {\r\n                        Long myLong = new Long(string);\r\n                        if (myLong.longValue() == myLong.intValue()) {\r\n                            return new Integer(myLong.intValue());\r\n                        } else {\r\n                            return myLong;\r\n                        }\r\n                    }\r\n                }\r\n            } catch (Exception ignore) {\r\n            }\r\n\r\nEDIT :\r\nthis looks like a bug in the library.  I believe it should use\r\n\r\n    (negative ? 1 : 0)\r\n\r\nbecause the current behaviour wrongly interprets a value with a single leading zero as being a number.  It correctly recognizes two or more leading zeros as being a string, as confirmed by the asker.","title":"xml to json conversion issue in java, 1st leading zero discarded fom string","body":"<p>looking at the <a href=\"https://github.com/douglascrockford/JSON-java/blob/master/XML.java\" rel=\"nofollow\">code for XML.java</a> - in particular the stringToValue method which does </p>\n\n<pre><code>\"Try to convert a string into a number, boolean, or null\".  \n</code></pre>\n\n<p>The code is below - you can see it tries to parse as a number first, in which case it will trim the leading zeros.  To test you could try adding a non-numeric character in your string - I think it would then preserve the leading zeros.</p>\n\n<p>It looks like the behaviour you're seeing is baked into the library.\nWhich is not great, even though the docs for the function toJSONObject do warn </p>\n\n<pre><code>\"Some information may be lost in this transformation because JSON is a data format and XML is a document format\"\n</code></pre>\n\n<p>teh codez :</p>\n\n<pre><code>// If it might be a number, try converting it. If that doesn't work,\n// return the string.\n\n        try {\n            char initial = string.charAt(0);\n            boolean negative = false;\n            if (initial == '-') {\n                initial = string.charAt(1);\n                negative = true;\n            }\n            if (initial == '0' &amp;&amp; string.charAt(negative ? 2 : 1) == '0') {\n                return string;\n            }\n            if ((initial &gt;= '0' &amp;&amp; initial &lt;= '9')) {\n                if (string.indexOf('.') &gt;= 0) {\n                    return Double.valueOf(string);\n                } else if (string.indexOf('e') &lt; 0 &amp;&amp; string.indexOf('E') &lt; 0) {\n                    Long myLong = new Long(string);\n                    if (myLong.longValue() == myLong.intValue()) {\n                        return new Integer(myLong.intValue());\n                    } else {\n                        return myLong;\n                    }\n                }\n            }\n        } catch (Exception ignore) {\n        }\n</code></pre>\n\n<p>EDIT :\nthis looks like a bug in the library.  I believe it should use</p>\n\n<pre><code>(negative ? 1 : 0)\n</code></pre>\n\n<p>because the current behaviour wrongly interprets a value with a single leading zero as being a number.  It correctly recognizes two or more leading zeros as being a string, as confirmed by the asker.</p>\n"},{"tags":[],"owner":{"account_id":113024,"reputation":4516,"user_id":297907,"accept_rate":56,"display_name":"StackOverFlow"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1375957660,"creation_date":1375957660,"answer_id":18123670,"question_id":18121714,"body_markdown":" It works :) \r\n\r\nAdded value in CDATA section so while conversion from xml to json value display as it is\r\n\r\n       org.jdom.Element valueElement = new  org.jdom.Element(&quot;Value&quot;);\r\n        org.jdom.CDATA cdata = new org.jdom.CDATA(getValue());\r\n        valueElement.setText(cdata );","title":"xml to json conversion issue in java, 1st leading zero discarded fom string","body":"<p>It works :) </p>\n\n<p>Added value in CDATA section so while conversion from xml to json value display as it is</p>\n\n<pre><code>   org.jdom.Element valueElement = new  org.jdom.Element(\"Value\");\n    org.jdom.CDATA cdata = new org.jdom.CDATA(getValue());\n    valueElement.setText(cdata );\n</code></pre>\n"}],"owner":{"account_id":113024,"reputation":4516,"user_id":297907,"accept_rate":56,"display_name":"StackOverFlow"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5703,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":18123670,"answer_count":2,"score":2,"last_activity_date":1691137242,"creation_date":1375951828,"question_id":18121714,"body_markdown":"My xml contains attribute value &quot;0123&quot; which I want to treat as string,\r\nafter conversion from xml to json as per following code\r\nleading zero gets discarded from attribute value.\r\n\r\nUsed classes\r\n\r\n    import org.jdom.Attribute;\r\n    import org.jdom.Document;\r\n    import org.jdom.output.Format;\r\n    import org.jdom.output.XMLOutputter;\r\n    import org.json.JSONObject;\r\n    import org.json.XML;\r\n\r\n//Covert xml to json\r\n\r\n        org.jdom.Document jdomDocument = new Document();\r\n        org.jdom.Element Attribute = new org.jdom.Element(&quot;Attribute&quot;);\r\n        jdomDocument.setRootElement(Attribute);\r\n        \t\t\t\r\n        org.jdom.Element valueElement = new  org.jdom.Element(&quot;Value&quot;);\r\n        valueElement.setText(getValue()); // &quot;0123&quot;\r\n       // getValue() return anything like boolean,string,long,date, time etc..\r\n    \r\n         root.addContent(valueElement);\r\n        String xmlval = new    XMLOutputter(Format.getPrettyFormat()).outputString(jdomDocument);\r\n        JSONObject xmlJSONObj = XML.toJSONObject(xmlval);\r\n        String jsonPrettyPrintString = xmlJSONObj.toString(4);\r\n\r\nHow to resolve this issue ?\r\n","title":"xml to json conversion issue in java, 1st leading zero discarded fom string","body":"<p>My xml contains attribute value \"0123\" which I want to treat as string,\nafter conversion from xml to json as per following code\nleading zero gets discarded from attribute value.</p>\n\n<p>Used classes</p>\n\n<pre><code>import org.jdom.Attribute;\nimport org.jdom.Document;\nimport org.jdom.output.Format;\nimport org.jdom.output.XMLOutputter;\nimport org.json.JSONObject;\nimport org.json.XML;\n</code></pre>\n\n<p>//Covert xml to json</p>\n\n<pre><code>    org.jdom.Document jdomDocument = new Document();\n    org.jdom.Element Attribute = new org.jdom.Element(\"Attribute\");\n    jdomDocument.setRootElement(Attribute);\n\n    org.jdom.Element valueElement = new  org.jdom.Element(\"Value\");\n    valueElement.setText(getValue()); // \"0123\"\n   // getValue() return anything like boolean,string,long,date, time etc..\n\n     root.addContent(valueElement);\n    String xmlval = new    XMLOutputter(Format.getPrettyFormat()).outputString(jdomDocument);\n    JSONObject xmlJSONObj = XML.toJSONObject(xmlval);\n    String jsonPrettyPrintString = xmlJSONObj.toString(4);\n</code></pre>\n\n<p>How to resolve this issue ?</p>\n"},{"tags":["java","image","image-processing"],"comments":[{"owner":{"account_id":46972,"reputation":356179,"user_id":139010,"accept_rate":81,"display_name":"Matt Ball"},"score":0,"creation_date":1324331038,"post_id":8567905,"comment_id":10621922,"body_markdown":"Have you thought of using OpenCV? http://stackoverflow.com/questions/2037579/java-opencv-bindings","body":"Have you thought of using OpenCV? <a href=\"http://stackoverflow.com/questions/2037579/java-opencv-bindings\">stackoverflow.com/questions/2037579/java-opencv-bindings</a>"}],"answers":[{"tags":[],"owner":{"account_id":130645,"reputation":81695,"user_id":330057,"accept_rate":77,"display_name":"corsiKa"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1324330998,"creation_date":1324330998,"answer_id":8567951,"question_id":8567905,"body_markdown":"Depending on how different the images are, you could do something like this (pseudocode). It&#39;s very primitive, but should be pretty efficient. You could speed it up by taking random or patterned pixels instead of every one.\r\n\r\n    for x = 0 to image.size:\r\n        for y = 0 to image.size:\r\n            diff += abs(image1.get(x,y).red - image2.get(x,y).red)\r\n            diff += abs(image1.get(x,y).blue - image2.get(x,y).blue)\r\n            diff += abs(image1.get(x,y).green - image2.get(x,y).green)\r\n        end\r\n    end\r\n    \r\n    return ((float)(diff)) / ( x * y * 3)\r\n\r\n","title":"How to compare images for similarity using java","body":"<p>Depending on how different the images are, you could do something like this (pseudocode). It's very primitive, but should be pretty efficient. You could speed it up by taking random or patterned pixels instead of every one.</p>\n\n<pre><code>for x = 0 to image.size:\n    for y = 0 to image.size:\n        diff += abs(image1.get(x,y).red - image2.get(x,y).red)\n        diff += abs(image1.get(x,y).blue - image2.get(x,y).blue)\n        diff += abs(image1.get(x,y).green - image2.get(x,y).green)\n    end\nend\n\nreturn ((float)(diff)) / ( x * y * 3)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1583429,"reputation":137,"user_id":1468279,"display_name":"Sandip Ganguli"},"down_vote_count":2,"up_vote_count":14,"is_accepted":false,"score":12,"last_activity_date":1340173171,"creation_date":1340173171,"answer_id":11113845,"question_id":8567905,"body_markdown":"        **// This API will compare two image file //\r\n\t// return true if both image files are equal else return false//**\r\n\tpublic static boolean compareImage(File fileA, File fileB) {\t\t\r\n\t\ttry {\r\n\t\t\t// take buffer data from botm image files //\r\n\t\t\tBufferedImage biA = ImageIO.read(fileA);\r\n\t\t\tDataBuffer dbA = biA.getData().getDataBuffer();\r\n\t\t\tint sizeA = dbA.getSize();\t\t\t\t\t\t\r\n\t\t\tBufferedImage biB = ImageIO.read(fileB);\r\n\t\t\tDataBuffer dbB = biB.getData().getDataBuffer();\r\n\t\t\tint sizeB = dbB.getSize();\r\n\t\t\t// compare data-buffer objects //\r\n\t\t\tif(sizeA == sizeB) {\r\n\t\t\t\tfor(int i=0; i&lt;sizeA; i++) { \r\n\t\t\t\t\tif(dbA.getElem(i) != dbB.getElem(i)) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t} \r\n\t\tcatch (Exception e) { \r\n\t\t\tSystem.out.println(&quot;Failed to compare image files ...&quot;);\r\n\t\t\treturn  false;\r\n\t\t}\r\n\t}","title":"How to compare images for similarity using java","body":"<pre><code>    **// This API will compare two image file //\n// return true if both image files are equal else return false//**\npublic static boolean compareImage(File fileA, File fileB) {        \n    try {\n        // take buffer data from botm image files //\n        BufferedImage biA = ImageIO.read(fileA);\n        DataBuffer dbA = biA.getData().getDataBuffer();\n        int sizeA = dbA.getSize();                      \n        BufferedImage biB = ImageIO.read(fileB);\n        DataBuffer dbB = biB.getData().getDataBuffer();\n        int sizeB = dbB.getSize();\n        // compare data-buffer objects //\n        if(sizeA == sizeB) {\n            for(int i=0; i&lt;sizeA; i++) { \n                if(dbA.getElem(i) != dbB.getElem(i)) {\n                    return false;\n                }\n            }\n            return true;\n        }\n        else {\n            return false;\n        }\n    } \n    catch (Exception e) { \n        System.out.println(\"Failed to compare image files ...\");\n        return  false;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7453512,"reputation":95,"user_id":5667452,"display_name":"Sireesha K"},"down_vote_count":3,"up_vote_count":9,"is_accepted":false,"score":6,"last_activity_date":1449815477,"creation_date":1449813311,"answer_id":34216987,"question_id":8567905,"body_markdown":"This API will compare two image file and return the percentage of similarity\r\n\r\n    public float compareImage(File fileA, File fileB) {\r\n\r\n        float percentage = 0;\r\n        try {\r\n            // take buffer data from both image files //\r\n            BufferedImage biA = ImageIO.read(fileA);\r\n            DataBuffer dbA = biA.getData().getDataBuffer();\r\n            int sizeA = dbA.getSize();\r\n            BufferedImage biB = ImageIO.read(fileB);\r\n            DataBuffer dbB = biB.getData().getDataBuffer();\r\n            int sizeB = dbB.getSize();\r\n            int count = 0;\r\n            // compare data-buffer objects //\r\n            if (sizeA == sizeB) {\r\n\r\n                for (int i = 0; i &lt; sizeA; i++) {\r\n\r\n                    if (dbA.getElem(i) == dbB.getElem(i)) {\r\n                        count = count + 1;\r\n                    }\r\n\r\n                }\r\n                percentage = (count * 100) / sizeA;\r\n            } else {\r\n                System.out.println(&quot;Both the images are not of same size&quot;);\r\n            }\r\n\r\n        } catch (Exception e) {\r\n            System.out.println(&quot;Failed to compare image files ...&quot;);\r\n        }\r\n        return percentage;\r\n    }\r\n    \r\n\t \r\n\t","title":"How to compare images for similarity using java","body":"<p>This API will compare two image file and return the percentage of similarity</p>\n\n<pre><code>public float compareImage(File fileA, File fileB) {\n\n    float percentage = 0;\n    try {\n        // take buffer data from both image files //\n        BufferedImage biA = ImageIO.read(fileA);\n        DataBuffer dbA = biA.getData().getDataBuffer();\n        int sizeA = dbA.getSize();\n        BufferedImage biB = ImageIO.read(fileB);\n        DataBuffer dbB = biB.getData().getDataBuffer();\n        int sizeB = dbB.getSize();\n        int count = 0;\n        // compare data-buffer objects //\n        if (sizeA == sizeB) {\n\n            for (int i = 0; i &lt; sizeA; i++) {\n\n                if (dbA.getElem(i) == dbB.getElem(i)) {\n                    count = count + 1;\n                }\n\n            }\n            percentage = (count * 100) / sizeA;\n        } else {\n            System.out.println(\"Both the images are not of same size\");\n        }\n\n    } catch (Exception e) {\n        System.out.println(\"Failed to compare image files ...\");\n    }\n    return percentage;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13089940,"reputation":133,"user_id":10491111,"display_name":"Carlos No&#233;"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1691136952,"creation_date":1691136952,"answer_id":76834139,"question_id":8567905,"body_markdown":"        BufferedImage img1 = ImageIO.read(file);\r\n        BufferedImage img2 = ImageIO.read(file2);\r\n\r\n        // Comprueba si cada pixel es igual\r\n        for (int x = 0; x &lt; img1.getWidth(); x++) {\r\n            for (int y = 0; y &lt; img1.getHeight(); y++) {\r\n                Assert.assertEquals(img1.getRGB(x, y), img2.getRGB(x, y));\r\n            }\r\n        }","title":"How to compare images for similarity using java","body":"<pre><code>    BufferedImage img1 = ImageIO.read(file);\n    BufferedImage img2 = ImageIO.read(file2);\n\n    // Comprueba si cada pixel es igual\n    for (int x = 0; x &lt; img1.getWidth(); x++) {\n        for (int y = 0; y &lt; img1.getHeight(); y++) {\n            Assert.assertEquals(img1.getRGB(x, y), img2.getRGB(x, y));\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":1111749,"reputation":1383,"user_id":1102092,"accept_rate":76,"display_name":"sum2000"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74392,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"answer_count":4,"score":18,"last_activity_date":1691136952,"creation_date":1324330746,"question_id":8567905,"body_markdown":"Recently I got an opportunity to work with Image Processing Technologies as a part of one of my projects and my task was to find matching images from an image store when a new image is given. I started my project with googling &quot;How to compare images using java&quot; and I got some good articles on finding the similarity of two images. Almost all of them were based on four basic steps, they are:\r\n\r\n    1.Locating the Region of Interest (Where the Objects appear in the given image),\r\n    2.Re-sizing the ROIs in to a common size,\r\n    3.Substracting ROIs,\r\n    4.Calculating the Black and White Ratio of the resultant image after subtraction.\r\n\r\nThough this sounds as a good algorithm to compare images, it takes a considerable amount of time after implementing it using **JAI** in my project. Therefore I have to find an alternate method of doing it.\r\n\r\nAny suggestions?","title":"How to compare images for similarity using java","body":"<p>Recently I got an opportunity to work with Image Processing Technologies as a part of one of my projects and my task was to find matching images from an image store when a new image is given. I started my project with googling \"How to compare images using java\" and I got some good articles on finding the similarity of two images. Almost all of them were based on four basic steps, they are:</p>\n\n<pre><code>1.Locating the Region of Interest (Where the Objects appear in the given image),\n2.Re-sizing the ROIs in to a common size,\n3.Substracting ROIs,\n4.Calculating the Black and White Ratio of the resultant image after subtraction.\n</code></pre>\n\n<p>Though this sounds as a good algorithm to compare images, it takes a considerable amount of time after implementing it using <strong>JAI</strong> in my project. Therefore I have to find an alternate method of doing it.</p>\n\n<p>Any suggestions?</p>\n"},{"tags":["java","swing","dialog","frame"],"comments":[{"owner":{"account_id":4999170,"reputation":175,"user_id":4018709,"display_name":"Zorian"},"score":0,"creation_date":1427702982,"post_id":29341135,"comment_id":46869529,"body_markdown":"what about using anothe layout? e.g. GridBagLayout etc?","body":"what about using anothe layout? e.g. GridBagLayout etc?"},{"owner":{"account_id":218057,"reputation":67728,"user_id":474189,"accept_rate":72,"display_name":"Duncan Jones"},"score":0,"creation_date":1427703044,"post_id":29341135,"comment_id":46869556,"body_markdown":"Does the dialog have the frame as a parent? Without testing, I would assume modal dialogues would always be on top of their parents..","body":"Does the dialog have the frame as a parent? Without testing, I would assume modal dialogues would always be on top of their parents.."},{"owner":{"account_id":368268,"reputation":109587,"user_id":714968,"accept_rate":90,"display_name":"mKorbel"},"score":1,"creation_date":1427703808,"post_id":29341135,"comment_id":46869884,"body_markdown":"for better help sooner post an SSCCE/MCVE, short, runnable, comipable, before anything here to read Oracle tutorial about How to Use Modality in Dialogs as the part in Using Other Swing Features","body":"for better help sooner post an SSCCE/MCVE, short, runnable, comipable, before anything here to read Oracle tutorial about How to Use Modality in Dialogs as the part in Using Other Swing Features"},{"owner":{"account_id":4278261,"reputation":1055,"user_id":3498366,"accept_rate":54,"display_name":"Koin Arab"},"score":0,"creation_date":1427705244,"post_id":29341135,"comment_id":46870614,"body_markdown":"@Zorlan what is connection between layouts and setAlwaysOnTop() method?","body":"@Zorlan what is connection between layouts and setAlwaysOnTop() method?"},{"owner":{"account_id":4278261,"reputation":1055,"user_id":3498366,"accept_rate":54,"display_name":"Koin Arab"},"score":0,"creation_date":1427705379,"post_id":29341135,"comment_id":46870679,"body_markdown":"@Duncan yes, the dialog have the frame as parents like in exaple which i added to my post. I though like you but it doesn&#39;t work.","body":"@Duncan yes, the dialog have the frame as parents like in exaple which i added to my post. I though like you but it doesn&#39;t work."},{"owner":{"account_id":7032278,"reputation":688,"user_id":5387533,"display_name":"F. Lumnitz"},"score":0,"creation_date":1453817176,"post_id":29341135,"comment_id":57758016,"body_markdown":"When I run your code, the Dialog is on top of the MainFrame?!","body":"When I run your code, the Dialog is on top of the MainFrame?!"}],"answers":[{"tags":[],"owner":{"account_id":1677570,"reputation":18354,"user_id":1542723,"display_name":"Ferrybig"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1453816211,"creation_date":1453816211,"answer_id":35015356,"question_id":29341135,"body_markdown":"&lt;!-- language-all: java --&gt;\r\n\r\nA quick solution for this problem is settings `setAlwaysOnTop` temporary to false while the dialog is shown, then set it to true when the dialog is closed.\r\n\r\n    setAlwaysOnTop(false);\r\n    JOptionPane.showMessageDialog(this, &quot;I want to set this dialog on top of frame&quot;);\r\n    setAlwaysOnTop(true);","title":"How to show dialog on top of the frame, even if setAlwaysOnTop() is set in Java?","body":"\n\n<p>A quick solution for this problem is settings <code>setAlwaysOnTop</code> temporary to false while the dialog is shown, then set it to true when the dialog is closed.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>setAlwaysOnTop(false);\nJOptionPane.showMessageDialog(this, \"I want to set this dialog on top of frame\");\nsetAlwaysOnTop(true);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28079922,"reputation":1,"user_id":21451173,"display_name":"Joop Moore"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691136486,"creation_date":1691136486,"answer_id":76834081,"question_id":29341135,"body_markdown":"I just had the same problem. It was solved by calling passing frame as owner of the dialog:\r\n\r\n    public SettingsDialog(Window owner) {\r\n    \t\tsuper(owner);\r\n\r\n","title":"How to show dialog on top of the frame, even if setAlwaysOnTop() is set in Java?","body":"<p>I just had the same problem. It was solved by calling passing frame as owner of the dialog:</p>\n<pre><code>public SettingsDialog(Window owner) {\n        super(owner);\n</code></pre>\n"}],"owner":{"account_id":4278261,"reputation":1055,"user_id":3498366,"accept_rate":54,"display_name":"Koin Arab"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":839,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691136486,"creation_date":1427702539,"question_id":29341135,"body_markdown":"If the frame have set setAlwaysOnTop() and some dialog is running the dialog is showing underneath the frame. I want to show it on top of the frame. I other words - the dialog should still be on top of the frame, even if setAlwaysOnTop() is set.\r\n\r\nCan somebody help me with this?\r\n\r\nEDIT:\r\n\r\nIt&#39;s example code:\r\n\r\n    public MainFrame() {\r\n            super(&quot;Potatator&quot;);\r\n    \r\n            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n            setVisible(true);\r\n            setAlwaysOnTop(true);\r\n    \r\n            JOptionPane.showMessageDialog(this, &quot;I want to set this dialog on top of frame&quot;);\r\n            repaint();\r\n        }\r\n\r\n","title":"How to show dialog on top of the frame, even if setAlwaysOnTop() is set in Java?","body":"<p>If the frame have set setAlwaysOnTop() and some dialog is running the dialog is showing underneath the frame. I want to show it on top of the frame. I other words - the dialog should still be on top of the frame, even if setAlwaysOnTop() is set.</p>\n\n<p>Can somebody help me with this?</p>\n\n<p>EDIT:</p>\n\n<p>It's example code:</p>\n\n<pre><code>public MainFrame() {\n        super(\"Potatator\");\n\n        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        setVisible(true);\n        setAlwaysOnTop(true);\n\n        JOptionPane.showMessageDialog(this, \"I want to set this dialog on top of frame\");\n        repaint();\n    }\n</code></pre>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1691039577,"post_id":76823434,"comment_id":135437362,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":13046056,"reputation":1,"user_id":9427878,"display_name":"Hassan Abbas"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691136006,"creation_date":1691009514,"question_id":76823434,"body_markdown":"I am trying to initialize a LoudnessEnhancer class object in Android Studio, but I&#39;m encountering an error with the following code:\r\n\r\n\r\n```\r\nLoudnessEnhancer loudnessEnhancer = new LoudnessEnhancer(0);\r\n```\r\n\r\n&#39;0&#39; represents audioSession.Basically, I wanted to apply LoudnessEnhancer to all sounds played by the system.\r\n\r\n[Picture of error](https://i.stack.imgur.com/wVsi4.png)\r\n\r\nI have also attached a screenshot of the error. Could someone please help me identify the issue?\r\n\r\nThank you!\r\n\r\n","title":"Not able to initialize LoudnessEnhancer object in android studio java","body":"<p>I am trying to initialize a LoudnessEnhancer class object in Android Studio, but I'm encountering an error with the following code:</p>\n<pre><code>LoudnessEnhancer loudnessEnhancer = new LoudnessEnhancer(0);\n</code></pre>\n<p>'0' represents audioSession.Basically, I wanted to apply LoudnessEnhancer to all sounds played by the system.</p>\n<p><a href=\"https://i.stack.imgur.com/wVsi4.png\" rel=\"nofollow noreferrer\">Picture of error</a></p>\n<p>I have also attached a screenshot of the error. Could someone please help me identify the issue?</p>\n<p>Thank you!</p>\n"},{"tags":["java","list","selenium-webdriver","hashmap","linkedhashmap"],"comments":[{"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"score":0,"creation_date":1690920899,"post_id":76814885,"comment_id":135419593,"body_markdown":"How does `TextBox`, `DropDown` and `Description` maps to the WebElement attributes?","body":"How does <code>TextBox</code>, <code>DropDown</code> and <code>Description</code> maps to the WebElement attributes?"},{"owner":{"account_id":17077512,"reputation":39,"user_id":12356786,"display_name":"Pet"},"score":0,"creation_date":1690921292,"post_id":76814885,"comment_id":135419642,"body_markdown":"The Text box value will be send to SendKeys method as string. Similarly Dropdown value will be send to drop down     //div[@id=&#39;div1&#39; and text()=&#39;&quot; + DivValue + &quot;&#39;] DivValue  as String.","body":"The Text box value will be send to SendKeys method as string. Similarly Dropdown value will be send to drop down     //div[@id=&#39;div1&#39; and text()=&#39;&quot; + DivValue + &quot;&#39;] DivValue  as String."},{"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"score":0,"creation_date":1690921374,"post_id":76814885,"comment_id":135419659,"body_markdown":"How about `DropDown` and `Description`","body":"How about <code>DropDown</code> and <code>Description</code>"}],"answers":[{"tags":[],"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1690928837,"creation_date":1690928837,"answer_id":76815545,"question_id":76814885,"body_markdown":"Incase the data is being returned is a _`List`_ of _`Map&lt;String,String&gt;`_ as follows:\r\n\r\n\t[{TextBox=TextValue-1, DropDown=DD-1, Description=Desc-1}, {TextBox=TextValue-2, DropDown=DD-2, Description=Desc-2}, {TextBox=TextValue-3, DropDown=DD-3, Description=Desc-3}]\r\n\t\r\nTo read the _`keys`_ and _`values`_ you can use the following solution:\r\n\r\n\t// System.out.println(list);\r\n\t// [{TextBox=TextValue-1, DropDown=DD-1, Description=Desc-1}, {TextBox=TextValue-2, DropDown=DD-2, Description=Desc-2}, {TextBox=TextValue-3, DropDown=DD-3, Description=Desc-3}]\r\n\tfor (Map&lt;String, String&gt; map : list) {\r\n\t    for (Map.Entry&lt;String, String&gt; entry : map.entrySet()) {\r\n\t\t    String key = entry.getKey();\r\n\t\t    System.out.println(key);\r\n\t\t    Object value = entry.getValue();\r\n\t\t    System.out.println(value);\r\n\t    }\r\n\t}\r\n\t\r\nOutput:\r\n\r\n\tTextBox\r\n\tTextValue-1\r\n\tDropDown\r\n\tDD-1\r\n\tDescription\r\n\tDesc-1\r\n\tTextBox\r\n\tTextValue-2\r\n\tDropDown\r\n\tDD-2\r\n\tDescription\r\n\tDesc-2\r\n\tTextBox\r\n\tTextValue-3\r\n\tDropDown\r\n\tDD-3\r\n\tDescription\r\n\tDesc-3","title":"How to read list of maps","body":"<p>Incase the data is being returned is a <em><code>List</code></em> of <em><code>Map&lt;String,String&gt;</code></em> as follows:</p>\n<pre><code>[{TextBox=TextValue-1, DropDown=DD-1, Description=Desc-1}, {TextBox=TextValue-2, DropDown=DD-2, Description=Desc-2}, {TextBox=TextValue-3, DropDown=DD-3, Description=Desc-3}]\n</code></pre>\n<p>To read the <em><code>keys</code></em> and <em><code>values</code></em> you can use the following solution:</p>\n<pre><code>// System.out.println(list);\n// [{TextBox=TextValue-1, DropDown=DD-1, Description=Desc-1}, {TextBox=TextValue-2, DropDown=DD-2, Description=Desc-2}, {TextBox=TextValue-3, DropDown=DD-3, Description=Desc-3}]\nfor (Map&lt;String, String&gt; map : list) {\n    for (Map.Entry&lt;String, String&gt; entry : map.entrySet()) {\n        String key = entry.getKey();\n        System.out.println(key);\n        Object value = entry.getValue();\n        System.out.println(value);\n    }\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>TextBox\nTextValue-1\nDropDown\nDD-1\nDescription\nDesc-1\nTextBox\nTextValue-2\nDropDown\nDD-2\nDescription\nDesc-2\nTextBox\nTextValue-3\nDropDown\nDD-3\nDescription\nDesc-3\n</code></pre>\n"}],"owner":{"account_id":17077512,"reputation":39,"user_id":12356786,"display_name":"Pet"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1690974951,"accepted_answer_id":76815545,"answer_count":1,"score":0,"last_activity_date":1691135232,"creation_date":1690920672,"question_id":76814885,"body_markdown":"I have a TestNG scenario method as\r\n \r\n    @Then(&quot;User Enters Data&quot;)\r\n\tpublic void feedData(IDataReader dataTable) {\r\n\t\tList&lt;Map&lt;String,String&gt;&gt; data= dataTable.getAllRows();\r\n     }\r\n\r\nData is being returned as a list of map as follows:\r\n\r\n    [{TextBox=TextValue-1,DropDown=DD-1, Description=Desc-1},\r\n    {TextBox=TextValue-2,DropDown=DD-2, Description=Desc-2},\r\n    {TextBox=TextValue-3,DropDown=DD-3, Description=Desc-3}]\r\n\r\nSelenium script required to feed the above data in the UI. How to read this hence values can be feed to UI in a sequential order. Like\r\n\r\n    TextBox=TextValue-1,DropDown=DD-1, Description=Desc-1\r\n\r\nThen click on save button.","title":"How to read list of maps","body":"<p>I have a TestNG scenario method as</p>\n<pre><code>@Then(&quot;User Enters Data&quot;)\npublic void feedData(IDataReader dataTable) {\n    List&lt;Map&lt;String,String&gt;&gt; data= dataTable.getAllRows();\n }\n</code></pre>\n<p>Data is being returned as a list of map as follows:</p>\n<pre><code>[{TextBox=TextValue-1,DropDown=DD-1, Description=Desc-1},\n{TextBox=TextValue-2,DropDown=DD-2, Description=Desc-2},\n{TextBox=TextValue-3,DropDown=DD-3, Description=Desc-3}]\n</code></pre>\n<p>Selenium script required to feed the above data in the UI. How to read this hence values can be feed to UI in a sequential order. Like</p>\n<pre><code>TextBox=TextValue-1,DropDown=DD-1, Description=Desc-1\n</code></pre>\n<p>Then click on save button.</p>\n"},{"tags":["java","nan"],"comments":[{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1691134914,"post_id":76833868,"comment_id":135453467,"body_markdown":"[Did you see the duplicate target of your previous question?](https://stackoverflow.com/q/76833321/5133585)","body":"<a href=\"https://stackoverflow.com/q/76833321/5133585\">Did you see the duplicate target of your previous question?</a>"},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1691135016,"post_id":76833868,"comment_id":135453494,"body_markdown":"@ScaryWombat What exception? OP doesn&#39;t mention one.","body":"@ScaryWombat What exception? OP doesn&#39;t mention one."},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1691135052,"post_id":76833868,"comment_id":135453499,"body_markdown":"@Sweeper Good call, I hadn&#39;t even seen that before duping this one","body":"@Sweeper Good call, I hadn&#39;t even seen that before duping this one"}],"answers":[{"tags":[],"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1691134888,"creation_date":1691134888,"answer_id":76833895,"question_id":76833868,"body_markdown":"Just check for `NaN` before printing:\r\n\r\n```\r\nelse if (Double.isNaN(rumus) || Double.isNaN(h)) {\r\n  System.out.println(&quot;THE EQUATION DOES NOT HAVE ROOTS&quot;);\r\n}\r\n```\r\n","title":"(JAVA language) How to make the output not NaN but the output I want, when the calculation has no answer?","body":"<p>Just check for <code>NaN</code> before printing:</p>\n<pre><code>else if (Double.isNaN(rumus) || Double.isNaN(h)) {\n  System.out.println(&quot;THE EQUATION DOES NOT HAVE ROOTS&quot;);\n}\n</code></pre>\n"}],"owner":{"account_id":29157406,"reputation":1,"user_id":22336872,"display_name":"Desmond Tay"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1691134909,"answer_count":1,"score":-2,"last_activity_date":1691134888,"creation_date":1691134656,"question_id":76833868,"body_markdown":"When I input the value of a, b, and c as 1, the output is &quot;BY USING FORMULA, YOUR ANSWER IS: NaN AND NaN&quot;. In this case, I want my output to be &quot;THE EQUATION DOES NOT HAVE ROOTS&quot;. what should I do?\r\n\r\n    import java.util.Scanner;\r\n\r\n    public class Rumus\r\n    {\r\n    public static void main(String[]args)\r\n    {\r\n      Scanner input=new Scanner(System.in);\r\n      System.out.println(&quot;PLEASE ENTER THE VALUE OF A&quot;);\r\n      int a =input.nextInt();\r\n  \r\n      System.out.println(&quot;PLEASE ENTER THE VALUE OF B&quot;);\r\n      int b=input.nextInt();\r\n  \r\n      System.out.println(&quot;PLEASE ENTER THE VALUE OF C&quot;);\r\n      int c=input.nextInt();\r\n\r\n      System.out.println(&quot;YOUR QUADRATIC EQUATION IS : &quot;+ a +&quot;xx+&quot; +&quot;(&quot;+b+&quot;)&quot;+&quot;x+&quot; + &quot;(&quot;+c+ &quot;)&quot;+ &quot;=0&quot;);\r\n  \r\n      double d=(b*b)-(4*a*c);\r\n      double e=(Math.sqrt(d));\r\n      double f=-(b)+e;\r\n      double rumus=f/(2*a);\r\n      double g=-(b)-e;\r\n      double h=g/(2*a);\r\n\r\n      if((a == 0)||(d &gt;= 0))\r\n      {\r\n        System.out.println(&quot;THE EQUATION DOES NOT HAVE ROOTS&quot;);\r\n      }\r\n      else\r\n      {\r\n        System.out.println(&quot;BY USING FORMULA, YOUR ANSWER IS :&quot;+ rumus+&quot; AND &quot;+ h);\r\n      }\r\n        }\r\n    }","title":"(JAVA language) How to make the output not NaN but the output I want, when the calculation has no answer?","body":"<p>When I input the value of a, b, and c as 1, the output is &quot;BY USING FORMULA, YOUR ANSWER IS: NaN AND NaN&quot;. In this case, I want my output to be &quot;THE EQUATION DOES NOT HAVE ROOTS&quot;. what should I do?</p>\n<pre><code>import java.util.Scanner;\n\npublic class Rumus\n{\npublic static void main(String[]args)\n{\n  Scanner input=new Scanner(System.in);\n  System.out.println(&quot;PLEASE ENTER THE VALUE OF A&quot;);\n  int a =input.nextInt();\n\n  System.out.println(&quot;PLEASE ENTER THE VALUE OF B&quot;);\n  int b=input.nextInt();\n\n  System.out.println(&quot;PLEASE ENTER THE VALUE OF C&quot;);\n  int c=input.nextInt();\n\n  System.out.println(&quot;YOUR QUADRATIC EQUATION IS : &quot;+ a +&quot;xx+&quot; +&quot;(&quot;+b+&quot;)&quot;+&quot;x+&quot; + &quot;(&quot;+c+ &quot;)&quot;+ &quot;=0&quot;);\n\n  double d=(b*b)-(4*a*c);\n  double e=(Math.sqrt(d));\n  double f=-(b)+e;\n  double rumus=f/(2*a);\n  double g=-(b)-e;\n  double h=g/(2*a);\n\n  if((a == 0)||(d &gt;= 0))\n  {\n    System.out.println(&quot;THE EQUATION DOES NOT HAVE ROOTS&quot;);\n  }\n  else\n  {\n    System.out.println(&quot;BY USING FORMULA, YOUR ANSWER IS :&quot;+ rumus+&quot; AND &quot;+ h);\n  }\n    }\n}\n</code></pre>\n"},{"tags":["java","json"],"comments":[{"owner":{"account_id":5860066,"reputation":13475,"user_id":4616087,"display_name":"Marvin"},"score":1,"creation_date":1691134358,"post_id":76833817,"comment_id":135453336,"body_markdown":"All you can do (and what common JSON libraries would most likely do by default) is read it into a `Map&lt;String, Object&gt;` (where the value could be another nested map). Not sure how much processing you can do on that but at least you can read the map keys to identify the names.","body":"All you can do (and what common JSON libraries would most likely do by default) is read it into a <code>Map&lt;String, Object&gt;</code> (where the value could be another nested map). Not sure how much processing you can do on that but at least you can read the map keys to identify the names."}],"answers":[{"tags":[],"owner":{"account_id":2067336,"reputation":2848,"user_id":1842599,"display_name":"Andrej Istomin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691134677,"creation_date":1691134677,"answer_id":76833869,"question_id":76833817,"body_markdown":"As was suggested in the comments, you can convert JSON into Map. Here is the example how to do that: https://www.javatpoint.com/convert-json-to-map-in-java\r\nAfter that you may work with your map like that:\r\n```\r\nSystem.out.println(&quot;Name : &quot; + userData.get(&quot;Name&quot;));  \r\nSystem.out.println(&quot;Mobile : &quot; + userData.get(&quot;Mobile&quot;));  \r\nSystem.out.println(&quot;Designation : &quot; + userData.get(&quot;Designation&quot;));  \r\nSystem.out.println(&quot;Pet : &quot; + userData.get(&quot;Pet&quot;));  \r\nSystem.out.println(&quot;Address : &quot; + userData.get(&quot;Address&quot;));   \r\n```","title":"How to parse JSON in JAVA without knowing the contents of the JSON file","body":"<p>As was suggested in the comments, you can convert JSON into Map. Here is the example how to do that: <a href=\"https://www.javatpoint.com/convert-json-to-map-in-java\" rel=\"nofollow noreferrer\">https://www.javatpoint.com/convert-json-to-map-in-java</a>\nAfter that you may work with your map like that:</p>\n<pre><code>System.out.println(&quot;Name : &quot; + userData.get(&quot;Name&quot;));  \nSystem.out.println(&quot;Mobile : &quot; + userData.get(&quot;Mobile&quot;));  \nSystem.out.println(&quot;Designation : &quot; + userData.get(&quot;Designation&quot;));  \nSystem.out.println(&quot;Pet : &quot; + userData.get(&quot;Pet&quot;));  \nSystem.out.println(&quot;Address : &quot; + userData.get(&quot;Address&quot;));   \n</code></pre>\n"}],"owner":{"account_id":29144778,"reputation":11,"user_id":22326958,"display_name":"opsy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1691134677,"creation_date":1691134224,"question_id":76833817,"body_markdown":"I&#39;m trying to do a program that gets the file info from the path and parse it without knowing the information inside it. \r\n\r\n\r\n \r\n\r\nI know there is a `jo.get(&quot;name&quot;);`way for example but if i dont know the &quot;name&quot; variable how should i split the file? Our file will contain hundreds of variables like &quot;name&quot; &quot;address&quot; &quot;city&quot; etc.","title":"How to parse JSON in JAVA without knowing the contents of the JSON file","body":"<p>I'm trying to do a program that gets the file info from the path and parse it without knowing the information inside it.</p>\n<p>I know there is a <code>jo.get(&quot;name&quot;);</code>way for example but if i dont know the &quot;name&quot; variable how should i split the file? Our file will contain hundreds of variables like &quot;name&quot; &quot;address&quot; &quot;city&quot; etc.</p>\n"},{"tags":["java","maven","selenium-webdriver","cucumber","test-runner"],"comments":[{"owner":{"account_id":7373320,"reputation":17364,"user_id":5612858,"display_name":"Arnaud"},"score":0,"creation_date":1691043864,"post_id":76825340,"comment_id":135437964,"body_markdown":"Could you try to put the variables BEFORE the &quot;test&quot; in your command line ?","body":"Could you try to put the variables BEFORE the &quot;test&quot; in your command line ?"},{"owner":{"account_id":10489136,"reputation":2762,"user_id":7731623,"display_name":"Nandan A"},"score":0,"creation_date":1691044120,"post_id":76825340,"comment_id":135438009,"body_markdown":"Setting properties in test runner won&#39;t work. Show us the feature file and step definition.","body":"Setting properties in test runner won&#39;t work. Show us the feature file and step definition."},{"owner":{"account_id":12698884,"reputation":35,"user_id":9226386,"display_name":"Ashutosh Das"},"score":0,"creation_date":1691125788,"post_id":76825340,"comment_id":135452200,"body_markdown":"Hi @NandanA, I have updated my question. Please check. Thanks!","body":"Hi @NandanA, I have updated my question. Please check. Thanks!"}],"answers":[{"tags":[],"owner":{"account_id":10489136,"reputation":2762,"user_id":7731623,"display_name":"Nandan A"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691134632,"creation_date":1691134632,"answer_id":76833866,"question_id":76825340,"body_markdown":"In scenario, you parameterized &quot;Enviromnent&quot;\r\n\r\n    Given User launch &quot;&lt;Environment&gt;&quot; preflight\r\n\r\nbut you are assigning environment value to null(Env is null). \r\n\r\n     Env = System.getProperty(&quot;Environment&quot;);\r\n\r\nUpdate in below way,\r\n\r\n**Scenario**\r\n\r\n    Given User launch Environment preflight\r\n\r\n**Code**\r\n\r\n       public void launchPreflight() {\r\n        System.setProperty(&quot;webdriver.chrome.driver&quot;,&quot;/chromedriver/chromedriver&quot;);\r\n        driver = new ChromeDriver();\r\n        String env = System.getProperty(&quot;Environment&quot;);\r\n        if(env.toLowerCase().contains(&quot;prod&quot;)) {\r\n        driver.get(Prod_URL);\r\n        }","title":"Setting system properties from command line but not able to access it in my step definition file","body":"<p>In scenario, you parameterized &quot;Enviromnent&quot;</p>\n<pre><code>Given User launch &quot;&lt;Environment&gt;&quot; preflight\n</code></pre>\n<p>but you are assigning environment value to null(Env is null).</p>\n<pre><code> Env = System.getProperty(&quot;Environment&quot;);\n</code></pre>\n<p>Update in below way,</p>\n<p><strong>Scenario</strong></p>\n<pre><code>Given User launch Environment preflight\n</code></pre>\n<p><strong>Code</strong></p>\n<pre><code>   public void launchPreflight() {\n    System.setProperty(&quot;webdriver.chrome.driver&quot;,&quot;/chromedriver/chromedriver&quot;);\n    driver = new ChromeDriver();\n    String env = System.getProperty(&quot;Environment&quot;);\n    if(env.toLowerCase().contains(&quot;prod&quot;)) {\n    driver.get(Prod_URL);\n    }\n</code></pre>\n"}],"owner":{"account_id":12698884,"reputation":35,"user_id":9226386,"display_name":"Ashutosh Das"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691134632,"creation_date":1691043407,"question_id":76825340,"body_markdown":"Command:\r\n\r\n&gt; mvn test -Dcucumber.options=&quot;--name &#39;Approve Rejected Creative&#39;&quot;\r\n&gt; -DEnvironment=&quot;Prod&quot;\r\n\r\nFeature file :\r\n\r\n    Given User launch &quot;&lt;Environment&gt;&quot; preflight\r\n    \t\t  When User enters Email as &quot;zzzz&quot; and Password as &quot;zzzz&quot;\r\n    \t\t  Then Click on Login\r\n    \t\t  When User approves &lt;creativeNumber&gt; creative starting from row &lt;startRow&gt;\r\n    \t\t  Then the creative should be approved\r\n\r\nStep Def:\r\n\r\n    public void launchPreflight(String Env) {\r\n            // Set up WebDriver and launch the preflight URL\r\n            System.setProperty(&quot;webdriver.chrome.driver&quot;, \r\n            \t\t&quot;/chromedriver/chromedriver&quot;);\r\n            driver = new ChromeDriver();\r\n            Env = System.getProperty(&quot;Environment&quot;);\r\n            if(Env.contains(&quot;Prod&quot;) || Env.contains(&quot;prod&quot;) || Env.contains(&quot;PROD&quot;)) {\r\n            driver.get(Prod_URL);\r\n            }\r\n\r\nGetting below error : \r\nErrors: \r\n[ERROR]   Cannot invoke &quot;String.contains(java.lang.CharSequence)&quot; because &quot;Env&quot; is null\r\n\r\nI tried setting properties in the testrunner file but still the same. Am I missing something here, I am new to this code.","title":"Setting system properties from command line but not able to access it in my step definition file","body":"<p>Command:</p>\n<blockquote>\n<p>mvn test -Dcucumber.options=&quot;--name 'Approve Rejected Creative'&quot;\n-DEnvironment=&quot;Prod&quot;</p>\n</blockquote>\n<p>Feature file :</p>\n<pre><code>Given User launch &quot;&lt;Environment&gt;&quot; preflight\n          When User enters Email as &quot;zzzz&quot; and Password as &quot;zzzz&quot;\n          Then Click on Login\n          When User approves &lt;creativeNumber&gt; creative starting from row &lt;startRow&gt;\n          Then the creative should be approved\n</code></pre>\n<p>Step Def:</p>\n<pre><code>public void launchPreflight(String Env) {\n        // Set up WebDriver and launch the preflight URL\n        System.setProperty(&quot;webdriver.chrome.driver&quot;, \n                &quot;/chromedriver/chromedriver&quot;);\n        driver = new ChromeDriver();\n        Env = System.getProperty(&quot;Environment&quot;);\n        if(Env.contains(&quot;Prod&quot;) || Env.contains(&quot;prod&quot;) || Env.contains(&quot;PROD&quot;)) {\n        driver.get(Prod_URL);\n        }\n</code></pre>\n<p>Getting below error :\nErrors:\n[ERROR]   Cannot invoke &quot;String.contains(java.lang.CharSequence)&quot; because &quot;Env&quot; is null</p>\n<p>I tried setting properties in the testrunner file but still the same. Am I missing something here, I am new to this code.</p>\n"},{"tags":["java","xml","spring","maven","xml-parsing"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1691126019,"post_id":76833060,"comment_id":135452219,"body_markdown":"Do not use the old outdated xml configuration for spring. Use the more modern java configuration","body":"Do not use the old outdated xml configuration for spring. Use the more modern java configuration"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1691126076,"post_id":76833060,"comment_id":135452228,"body_markdown":"Have you tries to use `&amp;amp;` for the password? this shud be substituted to `&amp;` by the xml parser","body":"Have you tries to use <code>&amp;amp;</code> for the password? this shud be substituted to <code>&amp;</code> by the xml parser"},{"owner":{"account_id":2799515,"reputation":815,"user_id":6647878,"display_name":"Nidhi257"},"score":0,"creation_date":1691126229,"post_id":76833060,"comment_id":135452249,"body_markdown":"password is stored in variable DB_PASS which is being fetched from other source","body":"password is stored in variable DB_PASS which is being fetched from other source"},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1691130162,"post_id":76833060,"comment_id":135452691,"body_markdown":"In a nutshell, you are saying , for the bean to be able to load the property value , it reads an XML document, the easiest would be to use &amp;amp in the XML doc value and filter the property (replace) of any XML character entities in get or set !","body":"In a nutshell, you are saying , for the bean to be able to load the property value , it reads an XML document, the easiest would be to use &amp;amp in the XML doc value and filter the property (replace) of any XML character entities in get or set !"},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1691130918,"post_id":76833060,"comment_id":135452812,"body_markdown":"Writing a bean helper method to convert XML element values with XML entities (for illegal XML characters) back to natural string form inside set or get is more sensible than writing an XSLT for each element to retrieve by mapping  and flagging to convert the entities in the value to a property of a bean.","body":"Writing a bean helper method to convert XML element values with XML entities (for illegal XML characters) back to natural string form inside set or get is more sensible than writing an XSLT for each element to retrieve by mapping  and flagging to convert the entities in the value to a property of a bean."},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1691131430,"post_id":76833060,"comment_id":135452880,"body_markdown":"XML entities are case sensitive,  checking with if() using stringval.indexOf() would make a helper method easy to use with stringval.replaceAll()","body":"XML entities are case sensitive,  checking with if() using stringval.indexOf() would make a helper method easy to use with stringval.replaceAll()"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1691131898,"post_id":76833060,"comment_id":135452937,"body_markdown":"Spring replaces the value while reading so the XML parser shouldn&#39;t see the `&amp;` at all. So unless you are using processing to replace the values the `${}` shoul sbe handled by Spring and you shouldn&#39;t have any issue.","body":"Spring replaces the value while reading so the XML parser shouldn&#39;t see the <code>&amp;</code> at all. So unless you are using processing to replace the values the <code>${}</code> shoul sbe handled by Spring and you shouldn&#39;t have any issue."}],"answers":[{"tags":[],"owner":{"account_id":2799515,"reputation":815,"user_id":6647878,"display_name":"Nidhi257"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691134617,"creation_date":1691134617,"answer_id":76833864,"question_id":76833060,"body_markdown":"this works for me:\r\n\r\n    &lt;bean id=&quot;dataSource&quot; class=&quot;org.apache.commons.dbcp.BasicDataSource&quot; destroy-method=&quot;close&quot;&gt;\r\n            &lt;property name=&quot;driverClassName&quot; value=&quot;com.microsoft.sqlserver.jdbc.SQLServerDriver&quot;/&gt;\r\n            &lt;property name=&quot;url&quot; value=&quot;${DB_URL}&quot;/&gt;\r\n            &lt;property name=&quot;username&quot; value=&quot;${DB_USER}&quot;/&gt;\r\n            &lt;property name=&quot;password&quot;&gt;\r\n            &lt;value&gt;&lt;![CDATA[${DB_PASS}]]&gt;&lt;/value&gt;\r\n        &lt;/property&gt;\r\n        &lt;/bean&gt;","title":"org.xml.sax.SAXParseException in springmodule.xml file due to &#39;&amp;&#39; in DB password","body":"<p>this works for me:</p>\n<pre><code>&lt;bean id=&quot;dataSource&quot; class=&quot;org.apache.commons.dbcp.BasicDataSource&quot; destroy-method=&quot;close&quot;&gt;\n        &lt;property name=&quot;driverClassName&quot; value=&quot;com.microsoft.sqlserver.jdbc.SQLServerDriver&quot;/&gt;\n        &lt;property name=&quot;url&quot; value=&quot;${DB_URL}&quot;/&gt;\n        &lt;property name=&quot;username&quot; value=&quot;${DB_USER}&quot;/&gt;\n        &lt;property name=&quot;password&quot;&gt;\n        &lt;value&gt;&lt;![CDATA[${DB_PASS}]]&gt;&lt;/value&gt;\n    &lt;/property&gt;\n    &lt;/bean&gt;\n</code></pre>\n"}],"owner":{"account_id":2799515,"reputation":815,"user_id":6647878,"display_name":"Nidhi257"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76833864,"answer_count":1,"score":0,"last_activity_date":1691134617,"creation_date":1691125452,"question_id":76833060,"body_markdown":"I am getting below error in springmodule.xml file\r\n\r\n**Line 128 in XML document from class path resource [springmodule.xml] is invalid; nested exception is org.xml.sax.SAXParseException; lineNumber: 128; columnNumber: 50; The entity name must immediately follow the &#39;&amp;&#39; in the entity reference.**\r\n\r\nthis is because my DB password contain &#39;&amp;&#39; sign.\r\nI got this same error in pom.xml file so replace &#39;&amp;&#39; with &#39;`&amp;amp;` but in xml file how to replace the same. \r\n\r\ncan we use any string function here to replace &#39;&amp;&#39; with `&amp;amp;`?\r\n \r\n\r\n    &lt;bean id=&quot;dataSource&quot; class=&quot;org.apache.commons.dbcp.BasicDataSource&quot; destroy-method=&quot;close&quot;&gt;\r\n            &lt;property name=&quot;driverClassName&quot; value=&quot;com.microsoft.sqlserver.jdbc.SQLServerDriver&quot;/&gt;\r\n            &lt;property name=&quot;url&quot; value=&quot;${DB_URL}&quot;/&gt;\r\n            &lt;property name=&quot;username&quot; value=&quot;${DB_USER}&quot;/&gt;\r\n            &lt;property name=&quot;password&quot; value=&quot;${DB_PASS}&quot;/&gt;\r\n        &lt;/bean&gt;","title":"org.xml.sax.SAXParseException in springmodule.xml file due to &#39;&amp;&#39; in DB password","body":"<p>I am getting below error in springmodule.xml file</p>\n<p><strong>Line 128 in XML document from class path resource [springmodule.xml] is invalid; nested exception is org.xml.sax.SAXParseException; lineNumber: 128; columnNumber: 50; The entity name must immediately follow the '&amp;' in the entity reference.</strong></p>\n<p>this is because my DB password contain '&amp;' sign.\nI got this same error in pom.xml file so replace '&amp;' with '<code>&amp;amp;</code> but in xml file how to replace the same.</p>\n<p>can we use any string function here to replace '&amp;' with <code>&amp;amp;</code>?</p>\n<pre><code>&lt;bean id=&quot;dataSource&quot; class=&quot;org.apache.commons.dbcp.BasicDataSource&quot; destroy-method=&quot;close&quot;&gt;\n        &lt;property name=&quot;driverClassName&quot; value=&quot;com.microsoft.sqlserver.jdbc.SQLServerDriver&quot;/&gt;\n        &lt;property name=&quot;url&quot; value=&quot;${DB_URL}&quot;/&gt;\n        &lt;property name=&quot;username&quot; value=&quot;${DB_USER}&quot;/&gt;\n        &lt;property name=&quot;password&quot; value=&quot;${DB_PASS}&quot;/&gt;\n    &lt;/bean&gt;\n</code></pre>\n"},{"tags":["java","maven","jenkins","pom.xml","nexus"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1625698288,"post_id":68293270,"comment_id":120699277,"body_markdown":"Have a look at the assembly plugin: http://maven.apache.org/plugins/maven-assembly-plugin/assembly.html","body":"Have a look at the assembly plugin: <a href=\"http://maven.apache.org/plugins/maven-assembly-plugin/assembly.html\" rel=\"nofollow noreferrer\">maven.apache.org/plugins/maven-assembly-plugin/assembly.html</a>"},{"owner":{"account_id":4824120,"reputation":748,"user_id":3893990,"display_name":"Han"},"score":0,"creation_date":1625710740,"post_id":68293270,"comment_id":120701220,"body_markdown":"And since you are on war. Look into this https://maven.apache.org/plugins/maven-war-plugin/usage.html. Compare if the directory structure created is correct. Maybe it&#39;s src/main/ directory issue.","body":"And since you are on war. Look into this <a href=\"https://maven.apache.org/plugins/maven-war-plugin/usage.html\" rel=\"nofollow noreferrer\">maven.apache.org/plugins/maven-war-plugin/usage.html</a>. Compare if the directory structure created is correct. Maybe it&#39;s src/main/ directory issue."},{"owner":{"account_id":5284837,"reputation":40467,"user_id":9401096,"display_name":"Zeitounator"},"score":0,"creation_date":1625771249,"post_id":68293270,"comment_id":120723327,"body_markdown":"Deploying ansible playbooks, roles and inventories using maven to package a war file ?!?!? You are using a saw to drive a screw. Why don&#39;t you get those files out of git directly using a tags for your version ? If you use gitlab or github, you can also publish releases based on those tags. Roles can be deployed from their own git repo if needed using a `requirements.yml` file and downloaded through the `ansible-galaxy` tool.","body":"Deploying ansible playbooks, roles and inventories using maven to package a war file ?!?!? You are using a saw to drive a screw. Why don&#39;t you get those files out of git directly using a tags for your version ? If you use gitlab or github, you can also publish releases based on those tags. Roles can be deployed from their own git repo if needed using a <code>requirements.yml</code> file and downloaded through the <code>ansible-galaxy</code> tool."}],"answers":[{"tags":[],"owner":{"account_id":7539560,"reputation":1749,"user_id":5724677,"accept_rate":64,"display_name":"granier"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691134424,"creation_date":1691077774,"answer_id":76829732,"question_id":68293270,"body_markdown":"Ansible files are not java files so you should use a packaging for java applications. You can use a jar file to store files, but this is not done for this purpose. I agree, a jar file can contain javadoc files ou java sources but this is still &quot;java world&quot;.\r\n\r\n\r\n\r\nFrom my point of view, the best is to create a &quot;zip&quot; file using the assembly publin [see][1].\r\n\r\n\r\n\r\nThe other question is: where to store ansible scripts in a maven project?\r\n\r\nLooking to [the maven Standard Directory Layout][2] one solution is to store them in src/main/resources for the applications and in src/test/resources for tests.\r\n\r\n\r\n  [1]: https://maven.apache.org/plugins/maven-assembly-plugin/\r\n  [2]: https://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html","title":"How to package a repository using maven. No java source files included","body":"<p>Ansible files are not java files so you should use a packaging for java applications. You can use a jar file to store files, but this is not done for this purpose. I agree, a jar file can contain javadoc files ou java sources but this is still &quot;java world&quot;.</p>\n<p>From my point of view, the best is to create a &quot;zip&quot; file using the assembly publin <a href=\"https://maven.apache.org/plugins/maven-assembly-plugin/\" rel=\"nofollow noreferrer\">see</a>.</p>\n<p>The other question is: where to store ansible scripts in a maven project?</p>\n<p>Looking to <a href=\"https://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html\" rel=\"nofollow noreferrer\">the maven Standard Directory Layout</a> one solution is to store them in src/main/resources for the applications and in src/test/resources for tests.</p>\n"}],"owner":{"account_id":20993515,"reputation":341,"user_id":15425910,"display_name":"AbhiOps"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":104,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691134424,"creation_date":1625694157,"question_id":68293270,"body_markdown":"I&#39;m new to maven. I have a repository contains Ansible playbooks and its config and inventory files. All I want to do is, using Jenkinsfile, SCM Checkout and upload the ansible artifacts to nexus with version increment. \r\nI was able package a war file and upload to nexus. But, when I unzip the war file it contains only below files.  \r\n---------  ---------- -----   ----\r\n       98  07-07-2021 16:53   META-INF/MANIFEST.MF\r\n        0  07-07-2021 16:53   META-INF/\r\n      802  07-07-2021 16:53   META-INF/maven/devansible/AB-ANSIBLE/pom.xml\r\n       86  07-07-2021 16:53   META-INF/maven/devansible/AB-ANSIBLE/pom.properties\r\n\r\n\r\nNow I know Its not working, How can I just package a repository/folder to rar, war or tar anything using maven. \r\npom.xml looks like below. \r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n  &lt;groupId&gt;devansible&lt;/groupId&gt;\r\n  &lt;artifactId&gt;AB-ANSIBLE&lt;/artifactId&gt;\r\n  &lt;version&gt;1.2.0&lt;/version&gt;\r\n  &lt;packaging&gt;war&lt;/packaging&gt;\r\n  &lt;build&gt;\r\n    &lt;plugins&gt;\r\n      &lt;plugin&gt;\r\n        &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.0.0&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n          &lt;!-- Use this to include a selection of jars that will be included in the WAR --&gt;\r\n          &lt;packagingIncludes&gt;${basedir}/*&lt;/packagingIncludes&gt;\r\n        &lt;/configuration&gt;\r\n      &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n  &lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\n","title":"How to package a repository using maven. No java source files included","body":"<p>I'm new to maven. I have a repository contains Ansible playbooks and its config and inventory files. All I want to do is, using Jenkinsfile, SCM Checkout and upload the ansible artifacts to nexus with version increment.\nI was able package a war file and upload to nexus. But, when I unzip the war file it contains only below files.</p>\n<hr />\n<pre><code>   98  07-07-2021 16:53   META-INF/MANIFEST.MF\n    0  07-07-2021 16:53   META-INF/\n  802  07-07-2021 16:53   META-INF/maven/devansible/AB-ANSIBLE/pom.xml\n   86  07-07-2021 16:53   META-INF/maven/devansible/AB-ANSIBLE/pom.properties\n</code></pre>\n<p>Now I know Its not working, How can I just package a repository/folder to rar, war or tar anything using maven.\npom.xml looks like below.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;devansible&lt;/groupId&gt;\n  &lt;artifactId&gt;AB-ANSIBLE&lt;/artifactId&gt;\n  &lt;version&gt;1.2.0&lt;/version&gt;\n  &lt;packaging&gt;war&lt;/packaging&gt;\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;!-- Use this to include a selection of jars that will be included in the WAR --&gt;\n          &lt;packagingIncludes&gt;${basedir}/*&lt;/packagingIncludes&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","sql","oracle","jdbc","ora-00918"],"answers":[{"tags":[],"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1285206340,"creation_date":1285206340,"answer_id":3774871,"question_id":3774850,"body_markdown":"I see no reason why you should be building this query up and gc-ing it away over and over.  I&#39;d make it a static final String once and be done with it.\r\n\r\nIf you need it twice, why can&#39;t you do this?\r\n\r\n    ps.setString(1, applicationNumber);\r\n    ps.setString(2, applicationNumber);","title":" PreparedStatement error ","body":"<p>I see no reason why you should be building this query up and gc-ing it away over and over.  I'd make it a static final String once and be done with it.</p>\n\n<p>If you need it twice, why can't you do this?</p>\n\n<pre><code>ps.setString(1, applicationNumber);\nps.setString(2, applicationNumber);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":45798,"reputation":327462,"user_id":135152,"accept_rate":100,"display_name":"OMG Ponies"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1285208527,"creation_date":1285208527,"answer_id":3775002,"question_id":3774850,"body_markdown":"I re-wrote your query as:\r\n\r\n    SELECT TO_CHAR(SYSDATE,&#39;DD MONTH,YYYY&#39;),\r\n           a.appl_no,\r\n           a.assigned_to,\r\n           b.co_name,\r\n           b.co_name2,\r\n           a.credit_acct_no,\r\n           a.credit_bank_no,\r\n           a.credit_branch_no,\r\n           a.service_id \r\n      FROM newappl a\r\n      JOIN newappl_hq b ON b.appl_no = a.appl_no\r\n     WHERE a.appl_no = ?\r\n       AND rownum = 1 \r\n       AND credit_status = &#39;CRPEND&#39;\r\n    UNION ALL\r\n    SELECT TO_CHAR(SYSDATE,&#39;DD MONTH,YYYY&#39;),\r\n           a.appl_no,\r\n           a.assigned_to,\r\n           c.trading_name, \r\n           &#39; &#39;, \r\n           d.bank_acct_no, \r\n           d.bank_no, \r\n           d.bank_branch_no,\r\n           a.service_id\r\n      FROM newappl a\r\n      JOIN newappl_ret c ON c.appl_no = a.appl_no\r\n      JOIN newappl_ret_bank d ON d.ret_id = c.ret_id\r\n     WHERE c.appl_no = ?\r\n       AND rownum = 1 \r\n       AND credit_status = &#39;CRPEND&#39;\r\n\r\nFrom what I can see, the [ORA-00918][1] is about the reference to the `credit_status` column.  Of the tables involved, is there a `credit_status` column in more than one of them?  Because it&#39;s the only un-aliased column in either query.\r\n\r\nCouple other things to mention:\r\n\r\n- don&#39;t need to TRUNC a date if you&#39;re going to TO_CHAR it for just the day/month/year info.\r\n- don&#39;t need to alias columns in the latter part of UNION&#39;d statements, UNIONs only need the same number of columns in the SELECT clause and that their data types match\r\n- don&#39;t subquery for what you don&#39;t need to\r\n- always test the query in PLSQL Developer/etc before dumping it into a Prepared Statement.  This looks like it could be a stored procedure with a single parameter (assuming the appl_no is identical for both sides)\r\n\r\n  [1]: http://www.techonthenet.com/oracle/errors/ora00918.php","title":" PreparedStatement error ","body":"<p>I re-wrote your query as:</p>\n\n<pre><code>SELECT TO_CHAR(SYSDATE,'DD MONTH,YYYY'),\n       a.appl_no,\n       a.assigned_to,\n       b.co_name,\n       b.co_name2,\n       a.credit_acct_no,\n       a.credit_bank_no,\n       a.credit_branch_no,\n       a.service_id \n  FROM newappl a\n  JOIN newappl_hq b ON b.appl_no = a.appl_no\n WHERE a.appl_no = ?\n   AND rownum = 1 \n   AND credit_status = 'CRPEND'\nUNION ALL\nSELECT TO_CHAR(SYSDATE,'DD MONTH,YYYY'),\n       a.appl_no,\n       a.assigned_to,\n       c.trading_name, \n       ' ', \n       d.bank_acct_no, \n       d.bank_no, \n       d.bank_branch_no,\n       a.service_id\n  FROM newappl a\n  JOIN newappl_ret c ON c.appl_no = a.appl_no\n  JOIN newappl_ret_bank d ON d.ret_id = c.ret_id\n WHERE c.appl_no = ?\n   AND rownum = 1 \n   AND credit_status = 'CRPEND'\n</code></pre>\n\n<p>From what I can see, the <a href=\"http://www.techonthenet.com/oracle/errors/ora00918.php\" rel=\"nofollow noreferrer\">ORA-00918</a> is about the reference to the <code>credit_status</code> column.  Of the tables involved, is there a <code>credit_status</code> column in more than one of them?  Because it's the only un-aliased column in either query.</p>\n\n<p>Couple other things to mention:</p>\n\n<ul>\n<li>don't need to TRUNC a date if you're going to TO_CHAR it for just the day/month/year info.</li>\n<li>don't need to alias columns in the latter part of UNION'd statements, UNIONs only need the same number of columns in the SELECT clause and that their data types match</li>\n<li>don't subquery for what you don't need to</li>\n<li>always test the query in PLSQL Developer/etc before dumping it into a Prepared Statement.  This looks like it could be a stored procedure with a single parameter (assuming the appl_no is identical for both sides)</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":4399248,"reputation":1,"user_id":3585431,"display_name":"Yogesh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691134295,"creation_date":1691134295,"answer_id":76833825,"question_id":3774850,"body_markdown":"I also had same exception while running query in sql developer. below solution worked for me, you can also have a try.\r\nYou should rewrite the query, try and see if you can use ambiguous column table in FROM clause instead of putting it inside of JOIN expression.","title":" PreparedStatement error ","body":"<p>I also had same exception while running query in sql developer. below solution worked for me, you can also have a try.\nYou should rewrite the query, try and see if you can use ambiguous column table in FROM clause instead of putting it inside of JOIN expression.</p>\n"}],"owner":{"account_id":183016,"reputation":205,"user_id":418132,"accept_rate":50,"display_name":"daydream"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1506,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":3774871,"answer_count":3,"score":0,"last_activity_date":1691134295,"creation_date":1285205946,"question_id":3774850,"body_markdown":"I have two select statements and make &#39;union all&#39; for these two statements. Then, I use the PreparedStatement and when I setString to this preparedStatement, it shows **&quot;java.sql.SQLException: Missing IN or OUT parameter at index:: 2&quot;.** \r\n\r\nAfter I toured around google, some people say that for each &quot;?&quot; in sql statment, I should write setString. For my situation, I have two select statments so I have two &quot;?&quot; but I &quot;union all&quot;, so I&#39;m not sure whether it is assumed that one &quot;?&quot; or two &quot;?&quot;. But when I tried to write two setString like \r\n**preparedStatement.setString(1,ApplicationNo);\r\npreparedStatement.setString(2,ApplicationNo);**\r\n, it shows **&quot;ORA-00918: column ambiguously defined&quot;.**\r\n\r\nI have no idea how to solve this problem.\r\n\r\nmy union select statment is \r\n\r\n    query.append(&quot;select TO_CHAR(TRUNC(SYSDATE),&#39;DD MONTH,YYYY&#39;),a.appl_no,a.assigned_to,b.co_name,b.co_name2,a.credit_acct_no,a.credit_bank_no,a.credit_branch_no,a.service_id &quot;);\r\n    query.append(&quot;from newappl a, newappl_hq b where b.appl_no = a.appl_no and a.appl_no=(select appl_no from newappl where appl_no=?) and rownum=1 and credit_status = &#39;CRPEND&#39;&quot;);\r\n    query.append(&quot; union all &quot;);\r\n    query.append(&quot;select TO_CHAR(TRUNC(SYSDATE),&#39;DD MONTH,YYYY&#39;),a.appl_no,a.assigned_to,c.trading_name co_name, &#39; &#39; co_name2, d.bank_acct_no  credit_acct_no, d.bank_no credit_bank_no, d.bank_branch_no credit_branch_no,a.service_id &quot;);\r\n    query.append(&quot;from newappl a,newappl_hq b, newappl_ret c, newappl_ret_bank d where b.appl_no = a.appl_no or a.appl_no = c.appl_no and c.ret_id= d.ret_id and a.appl_no=(select appl_no from newappl_ret where appl_no=?) and rownum=1 and credit_status = &#39;CRPEND&#39;&quot;);*\r\n\r\nsetString is **preparedStatement.setString(1,ApplicationNo);**\r\n\r\nWhen I searched for setString example, there are two different parameters if there are two setString like \r\n\r\n    preparedStatement.setString(1,ApplicationNo);\r\n    preparedStatement.setString(2,LoginID);\r\n\r\nBut I need ApplicationNo for both select statments.","title":" PreparedStatement error ","body":"<p>I have two select statements and make 'union all' for these two statements. Then, I use the PreparedStatement and when I setString to this preparedStatement, it shows <strong>\"java.sql.SQLException: Missing IN or OUT parameter at index:: 2\".</strong> </p>\n\n<p>After I toured around google, some people say that for each \"?\" in sql statment, I should write setString. For my situation, I have two select statments so I have two \"?\" but I \"union all\", so I'm not sure whether it is assumed that one \"?\" or two \"?\". But when I tried to write two setString like \n<strong>preparedStatement.setString(1,ApplicationNo);\npreparedStatement.setString(2,ApplicationNo);</strong>\n, it shows <strong>\"ORA-00918: column ambiguously defined\".</strong></p>\n\n<p>I have no idea how to solve this problem.</p>\n\n<p>my union select statment is </p>\n\n<pre><code>query.append(\"select TO_CHAR(TRUNC(SYSDATE),'DD MONTH,YYYY'),a.appl_no,a.assigned_to,b.co_name,b.co_name2,a.credit_acct_no,a.credit_bank_no,a.credit_branch_no,a.service_id \");\nquery.append(\"from newappl a, newappl_hq b where b.appl_no = a.appl_no and a.appl_no=(select appl_no from newappl where appl_no=?) and rownum=1 and credit_status = 'CRPEND'\");\nquery.append(\" union all \");\nquery.append(\"select TO_CHAR(TRUNC(SYSDATE),'DD MONTH,YYYY'),a.appl_no,a.assigned_to,c.trading_name co_name, ' ' co_name2, d.bank_acct_no  credit_acct_no, d.bank_no credit_bank_no, d.bank_branch_no credit_branch_no,a.service_id \");\nquery.append(\"from newappl a,newappl_hq b, newappl_ret c, newappl_ret_bank d where b.appl_no = a.appl_no or a.appl_no = c.appl_no and c.ret_id= d.ret_id and a.appl_no=(select appl_no from newappl_ret where appl_no=?) and rownum=1 and credit_status = 'CRPEND'\");*\n</code></pre>\n\n<p>setString is <strong>preparedStatement.setString(1,ApplicationNo);</strong></p>\n\n<p>When I searched for setString example, there are two different parameters if there are two setString like </p>\n\n<pre><code>preparedStatement.setString(1,ApplicationNo);\npreparedStatement.setString(2,LoginID);\n</code></pre>\n\n<p>But I need ApplicationNo for both select statments.</p>\n"},{"tags":["java","spring-boot","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":26555431,"reputation":558,"user_id":20184128,"display_name":"berse2212"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690985780,"creation_date":1690985780,"answer_id":76820808,"question_id":76819788,"body_markdown":"If you can use JPQL instead of a native query you could use the following approach:\r\n\r\nLet&#39;s imagine you have an entity Person. Then you can define a projection for the person just containing the names like this: \r\n\r\n    package de.models;\r\n    \r\n    public record PersonNames(String vorname, String nachname) {\r\n    }\r\n\r\nYou can use JPQL`s constructor expression creating this dynamically with createQuery:\r\n\r\n    List&lt;PersonNames&gt; p = entityManager.createQuery(\r\n    \t\t\t\t&quot;SELECT new de.models.PersonNames(vorname, nachname) FROM Person p&quot;,\r\n    \t\t\t\tPersonNames.class\r\n    \t\t).getResultList();\r\n\r\nNow this is not very generic and not really for a Class T, but if you really need a generic approach you kind of have to create it yourself. A very simple implementation could be \r\n\r\n    public &lt;T&gt; List&lt;T&gt; findT(Class&lt;T&gt; clazz) {\r\n\r\n\t\tString constructorVariables = Arrays.stream(clazz.getDeclaredFields())\r\n\t\t\t\t.map(Field::getName)\r\n\t\t\t\t.reduce((s1, s2) -&gt; s1 + &quot;, &quot; + s2)\r\n\t\t\t\t.orElse(&quot;&quot;);\r\n\r\n\t\tvar p = entityManager.createQuery(\r\n\t\t\t\t&quot;SELECT new &quot; + clazz.getName() + &quot;(&quot; + constructorVariables + &quot;) FROM Person p&quot;,\r\n\t\t\t\tclazz\r\n\t\t).getResultList();\r\n    }\r\n\r\nIn this approach the projection-class needs to have the same field names as the database-table columns.","title":"JPA query to non entity class","body":"<p>If you can use JPQL instead of a native query you could use the following approach:</p>\n<p>Let's imagine you have an entity Person. Then you can define a projection for the person just containing the names like this:</p>\n<pre><code>package de.models;\n\npublic record PersonNames(String vorname, String nachname) {\n}\n</code></pre>\n<p>You can use JPQL`s constructor expression creating this dynamically with createQuery:</p>\n<pre><code>List&lt;PersonNames&gt; p = entityManager.createQuery(\n                &quot;SELECT new de.models.PersonNames(vorname, nachname) FROM Person p&quot;,\n                PersonNames.class\n        ).getResultList();\n</code></pre>\n<p>Now this is not very generic and not really for a Class T, but if you really need a generic approach you kind of have to create it yourself. A very simple implementation could be</p>\n<pre><code>public &lt;T&gt; List&lt;T&gt; findT(Class&lt;T&gt; clazz) {\n\n    String constructorVariables = Arrays.stream(clazz.getDeclaredFields())\n            .map(Field::getName)\n            .reduce((s1, s2) -&gt; s1 + &quot;, &quot; + s2)\n            .orElse(&quot;&quot;);\n\n    var p = entityManager.createQuery(\n            &quot;SELECT new &quot; + clazz.getName() + &quot;(&quot; + constructorVariables + &quot;) FROM Person p&quot;,\n            clazz\n    ).getResultList();\n}\n</code></pre>\n<p>In this approach the projection-class needs to have the same field names as the database-table columns.</p>\n"}],"owner":{"account_id":6310497,"reputation":136,"user_id":4902186,"accept_rate":62,"display_name":"Stieg"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":213,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1691134276,"creation_date":1690978462,"question_id":76819788,"body_markdown":"I want to create a generic way to return data in non entity objects. For example, I want to have a reduced version of an entity because I need to show in the front end a list of them.\r\n\r\nThe problem is that I can&#39;t really go with the annotation `@Query([query], native)...)` because I have optional filters, so I build the query dynamically.\r\n\r\nSo I am trying to use the \r\n```\r\nEntityManager.createNativeQuery([query]).getResultList()\r\n```\r\nand I get a list of Object. What I want is a way for it to return a `List&lt;T&gt;`.\r\n\r\nWhat I&#39;ve tried so far:\r\n```\r\nreturn (List&lt;T&gt;)(T) query.getResultList();\r\n```\r\nThis appears to do absolutely nothing.\r\n\r\nTLDR; I need a way to dynamically create queries (because I&#39;ve got optional filters) and return a list of `T`, `EntityManager.createNativeQuery([query]).getResultList()`, so far gives me a list of Object that can&#39;t seem to be cast to `T` .\r\n\r\n","title":"JPA query to non entity class","body":"<p>I want to create a generic way to return data in non entity objects. For example, I want to have a reduced version of an entity because I need to show in the front end a list of them.</p>\n<p>The problem is that I can't really go with the annotation <code>@Query([query], native)...)</code> because I have optional filters, so I build the query dynamically.</p>\n<p>So I am trying to use the</p>\n<pre><code>EntityManager.createNativeQuery([query]).getResultList()\n</code></pre>\n<p>and I get a list of Object. What I want is a way for it to return a <code>List&lt;T&gt;</code>.</p>\n<p>What I've tried so far:</p>\n<pre><code>return (List&lt;T&gt;)(T) query.getResultList();\n</code></pre>\n<p>This appears to do absolutely nothing.</p>\n<p>TLDR; I need a way to dynamically create queries (because I've got optional filters) and return a list of <code>T</code>, <code>EntityManager.createNativeQuery([query]).getResultList()</code>, so far gives me a list of Object that can't seem to be cast to <code>T</code> .</p>\n"},{"tags":["java","spring-boot","migration","backend","flyway"],"comments":[{"owner":{"account_id":3449131,"reputation":12148,"user_id":2889165,"accept_rate":73,"display_name":"Andreas Lundgren"},"score":0,"creation_date":1691298217,"post_id":76832553,"comment_id":135471473,"body_markdown":"What files are in your db/migration folder in your classpath? Check the class path of the packed application. If it&#39;s a JAR-file, you can check the content like this: https://stackoverflow.com/a/8453600/2889165","body":"What files are in your db/migration folder in your classpath? Check the class path of the packed application. If it&#39;s a JAR-file, you can check the content like this: <a href=\"https://stackoverflow.com/a/8453600/2889165\">stackoverflow.com/a/8453600/2889165</a>"}],"answers":[{"tags":[],"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691134116,"creation_date":1691134116,"answer_id":76833802,"question_id":76832553,"body_markdown":"You have configured JPA to create the database schema from the entities with\r\n```\r\nspring.jpa.hibernate.ddl-auto=update\r\n```\r\n\r\n**Solution**\r\n\r\nYou should remove this property as you are using Flyway database migration tool.","title":"Why is flyway migrating a previous version of a SQL query that no longer exists instead of my current updated one?","body":"<p>You have configured JPA to create the database schema from the entities with</p>\n<pre><code>spring.jpa.hibernate.ddl-auto=update\n</code></pre>\n<p><strong>Solution</strong></p>\n<p>You should remove this property as you are using Flyway database migration tool.</p>\n"}],"owner":{"account_id":29126796,"reputation":3,"user_id":22312931,"display_name":"Rigene Salang"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":91,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76833802,"answer_count":1,"score":0,"last_activity_date":1691134116,"creation_date":1691114947,"question_id":76832553,"body_markdown":"I am trying to add migrations to a mysql database using flyway. I am starting from scratch with a fresh database by using `mvn flyway:clean` and then migrating using `mvn flyway:migrate`, then I run my program. I get the following tables:\r\n\r\n- flyway_schema_history\r\n- trivias\r\n\r\nwhich follows an old schema that I have now scrapped\r\n\r\nI expect the tables to be created when I migrate:\r\n\r\n- flyway_schema_history\r\n- games\r\n\r\nfollowing my migration file `V1__Create_games_table.sql`\r\n\r\nDespite the flyway_schema_history correctly detecting the V1 migration: \r\n`flyway info`\r\n\r\n```\r\nDatabase: jdbc:mysql://127.0.0.1:3306/trivia_database (MySQL 8.0)\r\nSchema version: 1\r\n\r\n+-----------+---------+--------------------+------+---------------------+---------+----------+\r\n| Category  | Version | Description        | Type | Installed On        | State   | Undoable |\r\n+-----------+---------+--------------------+------+---------------------+---------+----------+\r\n| Versioned | 1       | Create games table | SQL  | 2023-08-04 11:47:11 | Success | No       |\r\n+-----------+---------+--------------------+------+---------------------+---------+----------+\r\n```\r\n\r\nHere is my application.properties for reference:\r\n\r\n\r\n```\r\nspring.datasource.url=jdbc:mysql://127.0.0.1:3306/trivia_database\r\nspring.datasource.username=root\r\nspring.jpa.database-platform=org.hibernate.dialect.MySQL8Dialect\r\nspring.jpa.hibernate.ddl-auto=update\r\n\r\nspring.profiles.active=development\r\n\r\n# Flyway configuration\r\nspring.flyway.locations=classpath:db/migration\r\n\r\n```\r\nand flyway.conf:\r\n\r\n```\r\nflyway.url=jdbc:mysql://127.0.0.1:3306/trivia_database\r\nflyway.user=root\r\nflyway.locations=classpath:src/main/resources/db/migration\r\nflyway.cleanDisabled=false\r\n```\r\n\r\n\r\n\r\n1. I have tried recreating my database completely using MySQL Workbench with SQL queries DROP and CREATE, then using `mvn flyway:migrate`, I expect that the reset of the database would just clean any metadata involved in previous migrations included in the schema, however I get the same result. A table of an old version 1 is created instead of the new one.  \r\n\r\nIs there a hidden metadata somewhere that saved that old V1 version that created a trivias table and the cleaning resets to that version instead of the current V1 that creates a games table?\r\n\r\n2. I have tried repairing and validating the schema with `mvn flyway:repair/validate` as well as adding `flyway.validateOnMigrate=true` in my flyway.conf file and still getting the same tables &#39;trivias&#39; instead of &#39;games&#39;\r\n\r\n","title":"Why is flyway migrating a previous version of a SQL query that no longer exists instead of my current updated one?","body":"<p>I am trying to add migrations to a mysql database using flyway. I am starting from scratch with a fresh database by using <code>mvn flyway:clean</code> and then migrating using <code>mvn flyway:migrate</code>, then I run my program. I get the following tables:</p>\n<ul>\n<li>flyway_schema_history</li>\n<li>trivias</li>\n</ul>\n<p>which follows an old schema that I have now scrapped</p>\n<p>I expect the tables to be created when I migrate:</p>\n<ul>\n<li>flyway_schema_history</li>\n<li>games</li>\n</ul>\n<p>following my migration file <code>V1__Create_games_table.sql</code></p>\n<p>Despite the flyway_schema_history correctly detecting the V1 migration:\n<code>flyway info</code></p>\n<pre><code>Database: jdbc:mysql://127.0.0.1:3306/trivia_database (MySQL 8.0)\nSchema version: 1\n\n+-----------+---------+--------------------+------+---------------------+---------+----------+\n| Category  | Version | Description        | Type | Installed On        | State   | Undoable |\n+-----------+---------+--------------------+------+---------------------+---------+----------+\n| Versioned | 1       | Create games table | SQL  | 2023-08-04 11:47:11 | Success | No       |\n+-----------+---------+--------------------+------+---------------------+---------+----------+\n</code></pre>\n<p>Here is my application.properties for reference:</p>\n<pre><code>spring.datasource.url=jdbc:mysql://127.0.0.1:3306/trivia_database\nspring.datasource.username=root\nspring.jpa.database-platform=org.hibernate.dialect.MySQL8Dialect\nspring.jpa.hibernate.ddl-auto=update\n\nspring.profiles.active=development\n\n# Flyway configuration\nspring.flyway.locations=classpath:db/migration\n\n</code></pre>\n<p>and flyway.conf:</p>\n<pre><code>flyway.url=jdbc:mysql://127.0.0.1:3306/trivia_database\nflyway.user=root\nflyway.locations=classpath:src/main/resources/db/migration\nflyway.cleanDisabled=false\n</code></pre>\n<ol>\n<li>I have tried recreating my database completely using MySQL Workbench with SQL queries DROP and CREATE, then using <code>mvn flyway:migrate</code>, I expect that the reset of the database would just clean any metadata involved in previous migrations included in the schema, however I get the same result. A table of an old version 1 is created instead of the new one.</li>\n</ol>\n<p>Is there a hidden metadata somewhere that saved that old V1 version that created a trivias table and the cleaning resets to that version instead of the current V1 that creates a games table?</p>\n<ol start=\"2\">\n<li>I have tried repairing and validating the schema with <code>mvn flyway:repair/validate</code> as well as adding <code>flyway.validateOnMigrate=true</code> in my flyway.conf file and still getting the same tables 'trivias' instead of 'games'</li>\n</ol>\n"},{"tags":["java","spring-boot","transactions","spring-transactions"],"answers":[{"tags":[],"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691133350,"creation_date":1691130906,"answer_id":76833487,"question_id":76833247,"body_markdown":"How you can fix it:\r\n\r\n**Create a custom object** \r\n\r\n       public class PersonWithCountObjects {\r\n    \r\n      private String name;\r\n    \r\n      private int age;\r\n    \r\n      private int objectsCount;\r\n    \r\n      public PersonWithCountObjects(String name, int age, int objectsCount) {\r\n        this.name = name;\r\n        this.age = age;\r\n        this.objectsCount = objectsCount;\r\n      }\r\n      \r\n      //getter &amp;&amp; setter and others methods\r\n    \r\n      \r\n    }\r\n\r\n\r\n**In your PersonRepository  create a DTO projection**\r\n\r\nA DTO projection allows you to fetch fewer columns and you won’t risk any LazyInitializationException.\r\n\r\n      @Query(&quot;SELECT new your.packages.path.to.PersonWithCountObjects &quot; +\r\n          &quot; (person.name, person.age, count(person.objects)) &quot; +\r\n          &quot; FROM Person person &quot;)\r\n       List&lt;PersonWithCountObjects&gt; getPersonsWithObjectsCount();\r\n\r\nAnd after it in your `methodB()` you will replace\r\n \r\n\r\n    List&lt;Person&gt; personList = personRepository.findAll();\r\nwith \r\n\r\n    List&lt;PersonWithCountObjects&gt; personList = personRepository.getPersonsWithObjectsCount();\r\n\r\nand make it `public` because you have `@Transactional` annotation on it\r\n\r\nyou dont need to have this line of code(`int objectSize = methodD(person)`) and also `methodD` you by default will have objects count for every person in field `objectsCount` from `PersonWithCountObjects`\r\n\r\n\r\nAnd your for loop will look so:\r\n\r\n    for (PersonWithCountObjects person : personList) {\r\n                if (person.getObjectsCount() &lt; 50) {\r\n                    PersonDTO personDTO = new PersonDTO();\r\n                    personDTO.setName(person.getName());\r\n                    personDTO.setAge(person.getAge());\r\n                    personDTOList.add(personDTO);\r\n                }\r\n            }\r\n\r\n\r\n","title":"LazyInitializationException: failed to lazily initialize a collection of role: ... could not initialize proxy - no session","body":"<p>How you can fix it:</p>\n<p><strong>Create a custom object</strong></p>\n<pre><code>   public class PersonWithCountObjects {\n\n  private String name;\n\n  private int age;\n\n  private int objectsCount;\n\n  public PersonWithCountObjects(String name, int age, int objectsCount) {\n    this.name = name;\n    this.age = age;\n    this.objectsCount = objectsCount;\n  }\n  \n  //getter &amp;&amp; setter and others methods\n\n  \n}\n</code></pre>\n<p><strong>In your PersonRepository  create a DTO projection</strong></p>\n<p>A DTO projection allows you to fetch fewer columns and you won’t risk any LazyInitializationException.</p>\n<pre><code>  @Query(&quot;SELECT new your.packages.path.to.PersonWithCountObjects &quot; +\n      &quot; (person.name, person.age, count(person.objects)) &quot; +\n      &quot; FROM Person person &quot;)\n   List&lt;PersonWithCountObjects&gt; getPersonsWithObjectsCount();\n</code></pre>\n<p>And after it in your <code>methodB()</code> you will replace</p>\n<pre><code>List&lt;Person&gt; personList = personRepository.findAll();\n</code></pre>\n<p>with</p>\n<pre><code>List&lt;PersonWithCountObjects&gt; personList = personRepository.getPersonsWithObjectsCount();\n</code></pre>\n<p>and make it <code>public</code> because you have <code>@Transactional</code> annotation on it</p>\n<p>you dont need to have this line of code(<code>int objectSize = methodD(person)</code>) and also <code>methodD</code> you by default will have objects count for every person in field <code>objectsCount</code> from <code>PersonWithCountObjects</code></p>\n<p>And your for loop will look so:</p>\n<pre><code>for (PersonWithCountObjects person : personList) {\n            if (person.getObjectsCount() &lt; 50) {\n                PersonDTO personDTO = new PersonDTO();\n                personDTO.setName(person.getName());\n                personDTO.setAge(person.getAge());\n                personDTOList.add(personDTO);\n            }\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9008386,"reputation":83,"user_id":6714057,"display_name":"Long"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691132728,"creation_date":1691132341,"answer_id":76833618,"question_id":76833247,"body_markdown":"@Transactional only with public method. You can update your code to something like:\r\n```\r\n@Transactional\r\npublic List&lt;PersonDTO&gt; methodB() {\r\n...\r\n}\r\n```\r\nThe reason why it works when you put @Transactional in your methodA is because methodA has public access modifier. And it bypasses the transaction to methodB inside it.","title":"LazyInitializationException: failed to lazily initialize a collection of role: ... could not initialize proxy - no session","body":"<p>@Transactional only with public method. You can update your code to something like:</p>\n<pre><code>@Transactional\npublic List&lt;PersonDTO&gt; methodB() {\n...\n}\n</code></pre>\n<p>The reason why it works when you put @Transactional in your methodA is because methodA has public access modifier. And it bypasses the transaction to methodB inside it.</p>\n"}],"owner":{"account_id":10383212,"reputation":333,"user_id":7657219,"display_name":"Varox"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691133350,"creation_date":1691128110,"question_id":76833247,"body_markdown":"I&#39;m facing this issue at my job and I don&#39;t know how could I achieve this.\r\n\r\nI have these classes (which are not real, but are a very simplistic example of the problem, the real ones are very complex)\r\n\r\nA Person class:\r\n\r\n    @Entity\r\n    public class Person {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Long id;\r\n    \r\n        private String name;\r\n        private int age;\r\n    \r\n        @OneToMany(mappedBy = &quot;person&quot;, fetch = FetchType.LAZY, cascade = CascadeType.ALL)\r\n        private List&lt;Object&gt; objects = new ArrayList&lt;&gt;();\r\n    \r\n        // Constructors, getters, and setters\r\n    \r\n    }\r\n\r\nThis class have a lazily fetched list of objects, that have:\r\n\r\n    @Entity\r\n    public class Object {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Long id;\r\n    \r\n        private String name;\r\n        private double weight;\r\n    \r\n        // Constructors, getters, and setters\r\n    }\r\n\r\nAnd then I have a DTO to get only the name and the age:\r\n\r\n    public class PersonDTO {\r\n        private String name;\r\n        private int age;\r\n    \r\n        // Constructors, getters, and setters\r\n    }\r\n\r\nBoth classes are in the database, the problem is that in the real case, the class object is huge, so it shouldn&#39;t be fetched in any case if it is not necessary.\r\n\r\nNow the problem appears when I try to do a several checks on that data:\r\n\r\n    @Service\r\n    public class PersonService {\r\n    \r\n        @Autowired\r\n        private PersonRepository personRepository;\r\n    \r\n        public List&lt;PersonDTO&gt; methodA() {\r\n            List&lt;PersonDTO&gt; personDTOList = methodB();\r\n            methodC(personDTOList);\r\n            return personDTOList;\r\n        }\r\n    \r\n        @Transactional\r\n        private List&lt;PersonDTO&gt; methodB() {\r\n            List&lt;PersonDTO&gt; personDTOList = new ArrayList&lt;&gt;();\r\n    \r\n            List&lt;Person&gt; personList = personRepository.findAll();\r\n    \r\n            for (Person person : personList) {\r\n                int objectSize = methodD(person);\r\n                if (objectSize &lt; 50) {\r\n                    PersonDTO personDTO = new PersonDTO();\r\n                    personDTO.setName(person.getName());\r\n                    personDTO.setAge(person.getAge());\r\n                    personDTOList.add(personDTO);\r\n                }\r\n            }\r\n    \r\n            return personDTOList;\r\n        }\r\n    \r\n        private int methodD(Person person) {\r\n            return person.getObjects().size();\r\n        }\r\n    \r\n        private void methodC(List&lt;PersonDTO&gt; personDTOList) {\r\n            for (PersonDTO personDTO : personDTOList) {\r\n                System.out.println(&quot;Name: &quot; + personDTO.getName() + &quot;, Age: &quot; + personDTO.getAge());\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\nAs you can see, my main method A is not transactional, because I need to extract a DTO from the data without getting the list of objects, so it can be used later to make changes in database from another table based on the data that is inside the Person ( this is what happens in the real code)\r\n\r\nThe problem is that when I try to execute the following line of code:\r\n\r\n&gt; person.getObjects().size();\r\n\r\nIt throws me this error:\r\n\r\n*Processing of HttpInvokerServiceExporter remote call resulted in fatal exception:\r\nname.of.the.class: org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role:\r\nPerson.Objects, could not initialize proxy - no Session*\r\n\r\n\r\nWhat could be happening?\r\n\r\nHowever, if I use the transactional in the methodA, **everything works**, but I really need to put it in the second method, as I need to do those changes at that moment.\r\n\r\nI&#39;ve tried changing the visibility of all methods and no luck.\r\n\r\nThank you very much for your time.\r\n\r\n\r\n\r\n","title":"LazyInitializationException: failed to lazily initialize a collection of role: ... could not initialize proxy - no session","body":"<p>I'm facing this issue at my job and I don't know how could I achieve this.</p>\n<p>I have these classes (which are not real, but are a very simplistic example of the problem, the real ones are very complex)</p>\n<p>A Person class:</p>\n<pre><code>@Entity\npublic class Person {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    private String name;\n    private int age;\n\n    @OneToMany(mappedBy = &quot;person&quot;, fetch = FetchType.LAZY, cascade = CascadeType.ALL)\n    private List&lt;Object&gt; objects = new ArrayList&lt;&gt;();\n\n    // Constructors, getters, and setters\n\n}\n</code></pre>\n<p>This class have a lazily fetched list of objects, that have:</p>\n<pre><code>@Entity\npublic class Object {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    private String name;\n    private double weight;\n\n    // Constructors, getters, and setters\n}\n</code></pre>\n<p>And then I have a DTO to get only the name and the age:</p>\n<pre><code>public class PersonDTO {\n    private String name;\n    private int age;\n\n    // Constructors, getters, and setters\n}\n</code></pre>\n<p>Both classes are in the database, the problem is that in the real case, the class object is huge, so it shouldn't be fetched in any case if it is not necessary.</p>\n<p>Now the problem appears when I try to do a several checks on that data:</p>\n<pre><code>@Service\npublic class PersonService {\n\n    @Autowired\n    private PersonRepository personRepository;\n\n    public List&lt;PersonDTO&gt; methodA() {\n        List&lt;PersonDTO&gt; personDTOList = methodB();\n        methodC(personDTOList);\n        return personDTOList;\n    }\n\n    @Transactional\n    private List&lt;PersonDTO&gt; methodB() {\n        List&lt;PersonDTO&gt; personDTOList = new ArrayList&lt;&gt;();\n\n        List&lt;Person&gt; personList = personRepository.findAll();\n\n        for (Person person : personList) {\n            int objectSize = methodD(person);\n            if (objectSize &lt; 50) {\n                PersonDTO personDTO = new PersonDTO();\n                personDTO.setName(person.getName());\n                personDTO.setAge(person.getAge());\n                personDTOList.add(personDTO);\n            }\n        }\n\n        return personDTOList;\n    }\n\n    private int methodD(Person person) {\n        return person.getObjects().size();\n    }\n\n    private void methodC(List&lt;PersonDTO&gt; personDTOList) {\n        for (PersonDTO personDTO : personDTOList) {\n            System.out.println(&quot;Name: &quot; + personDTO.getName() + &quot;, Age: &quot; + personDTO.getAge());\n        }\n    }\n}\n</code></pre>\n<p>As you can see, my main method A is not transactional, because I need to extract a DTO from the data without getting the list of objects, so it can be used later to make changes in database from another table based on the data that is inside the Person ( this is what happens in the real code)</p>\n<p>The problem is that when I try to execute the following line of code:</p>\n<blockquote>\n<p>person.getObjects().size();</p>\n</blockquote>\n<p>It throws me this error:</p>\n<p><em>Processing of HttpInvokerServiceExporter remote call resulted in fatal exception:\nname.of.the.class: org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role:\nPerson.Objects, could not initialize proxy - no Session</em></p>\n<p>What could be happening?</p>\n<p>However, if I use the transactional in the methodA, <strong>everything works</strong>, but I really need to put it in the second method, as I need to do those changes at that moment.</p>\n<p>I've tried changing the visibility of all methods and no luck.</p>\n<p>Thank you very much for your time.</p>\n"},{"tags":["java","excel","apache-poi","powerpoint"],"answers":[{"tags":[],"owner":{"account_id":1096470,"reputation":26066,"user_id":1089967,"accept_rate":59,"display_name":"lance-java"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691053045,"creation_date":1690807084,"answer_id":76803713,"question_id":76803642,"body_markdown":"```java\r\ntry (FileInputStream inStream = new FileInputStream(new File(&quot;path/to/file.xlsx&quot;))) {\r\n   XSSFWorkbook workbook = new XSSFWorkbook(inStream);\r\n   XSSFSheet sheet = workbook.getSheetAt(0);\r\n\r\n   for (Iterator&lt;Row&gt; rowIterator = sheet.iterator() ; rowIterator.hasNext(); ) {\r\n      Row row = rowIterator.next();\r\n      for (Iterator&lt;Cell&gt; cellIterator = row.cellIterator(); cellIterator.hasNext(); )  {\r\n         Cell cell = cellIterator.next();\r\n         switch (cell.getCellType()) \r\n         {\r\n            case Cell.CELL_TYPE_NUMERIC:\r\n               System.out.print(cell.getNumericCellValue() + &quot;\\t&quot;);\r\n               break;\r\n            case Cell.CELL_TYPE_STRING:\r\n               System.out.print(cell.getStringCellValue() + &quot;\\t&quot;);\r\n               break;\r\n            ...   \r\n         }\r\n      }\r\n      System.out.println(&quot;&quot;);\r\n   }\r\n} \r\n```","title":"How to extract table data like excel table cells and table row data from PPT in apache poi","body":"<pre class=\"lang-java prettyprint-override\"><code>try (FileInputStream inStream = new FileInputStream(new File(&quot;path/to/file.xlsx&quot;))) {\n   XSSFWorkbook workbook = new XSSFWorkbook(inStream);\n   XSSFSheet sheet = workbook.getSheetAt(0);\n\n   for (Iterator&lt;Row&gt; rowIterator = sheet.iterator() ; rowIterator.hasNext(); ) {\n      Row row = rowIterator.next();\n      for (Iterator&lt;Cell&gt; cellIterator = row.cellIterator(); cellIterator.hasNext(); )  {\n         Cell cell = cellIterator.next();\n         switch (cell.getCellType()) \n         {\n            case Cell.CELL_TYPE_NUMERIC:\n               System.out.print(cell.getNumericCellValue() + &quot;\\t&quot;);\n               break;\n            case Cell.CELL_TYPE_STRING:\n               System.out.print(cell.getStringCellValue() + &quot;\\t&quot;);\n               break;\n            ...   \n         }\n      }\n      System.out.println(&quot;&quot;);\n   }\n} \n</code></pre>\n"},{"tags":[],"owner":{"account_id":1096470,"reputation":26066,"user_id":1089967,"accept_rate":59,"display_name":"lance-java"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691133340,"creation_date":1691045306,"answer_id":76825519,"question_id":76803642,"body_markdown":"From the POI docs at https://poi.apache.org/components/poifs/embeded.html\r\n\r\n&gt; Files embedded in PowerPoint - PowerPoint does not normally store embedded files in the OLE2 layer. Instead, they are held within records of the main PowerPoint file. See the [HSLF Tutorial](https://poi.apache.org/components/slideshow/how-to-shapes.html#OLE) for how to retrieve embedded OLE objects from a presentation\r\n\r\n&gt; Opening embedded files - All of the POIDocument classes (HSSFWorkbook, HSLFSlideShow, HWPFDocument and HDGFDiagram) can either be opened from a POIFSFileSystem, or from a specific directory within a POIFSFileSystem. So, to open embedded files, simply locate the appropriate DirectoryNode that represents the subdirectory of interest, and pass this + the overall POIFSFileSystem to the constructor. \r\n\r\n&gt; I you want to extract the textual contents of the embedded file, then open the appropriate POIDocument, and then pass this to the extractor class, instead of simply passing the POIFSFilesystem to the extractor.\r\n\r\nAnd from the [HSLF Tutorial](https://poi.apache.org/components/slideshow/how-to-shapes.html#OLE)\r\n\r\n```java\r\nfor (HSLFShape shape : slide.getShapes()) {\r\n    if (shape instanceof OLEShape) {\r\n        OLEShape ole = (OLEShape) shape;\r\n        HSLFObjectData data = ole.getObjectData();\r\n        String name = ole.getInstanceName();\r\n        if (&quot;Worksheet&quot;.equals(name)) {\r\n            HSSFWorkbook wb = new HSSFWorkbook(data.getData());\r\n        } else if (&quot;Document&quot;.equals(name)) {\r\n            HWPFDocument doc = new HWPFDocument(data.getData());\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nNote: You can use [WorkbookFactory](https://poi.apache.org/apidocs/dev/org/apache/poi/ss/usermodel/WorkbookFactory.html) to abstract yourself from the underlying data format (eg [HSSFWorkbook](https://poi.apache.org/apidocs/dev/org/apache/poi/hssf/usermodel/HSSFWorkbook.html) vs [XSSFWorkbook](https://poi.apache.org/apidocs/dev/org/apache/poi/xssf/usermodel/XSSFWorkbook.html)). \r\n\r\nEg:\r\n\r\n```java\r\nif (&quot;Worksheet&quot;.equals(name)) {\r\n   Workbook wb = WorkbookFactory.create(data.getInputStream());\r\n   Sheet sheet = workbook.getSheetAt(0);\r\n   for (Iterator&lt;Row&gt; rowIterator = sheet.iterator() ; rowIterator.hasNext(); ) {\r\n      ...\r\n   }\r\n}\r\n```","title":"How to extract table data like excel table cells and table row data from PPT in apache poi","body":"<p>From the POI docs at <a href=\"https://poi.apache.org/components/poifs/embeded.html\" rel=\"nofollow noreferrer\">https://poi.apache.org/components/poifs/embeded.html</a></p>\n<blockquote>\n<p>Files embedded in PowerPoint - PowerPoint does not normally store embedded files in the OLE2 layer. Instead, they are held within records of the main PowerPoint file. See the <a href=\"https://poi.apache.org/components/slideshow/how-to-shapes.html#OLE\" rel=\"nofollow noreferrer\">HSLF Tutorial</a> for how to retrieve embedded OLE objects from a presentation</p>\n</blockquote>\n<blockquote>\n<p>Opening embedded files - All of the POIDocument classes (HSSFWorkbook, HSLFSlideShow, HWPFDocument and HDGFDiagram) can either be opened from a POIFSFileSystem, or from a specific directory within a POIFSFileSystem. So, to open embedded files, simply locate the appropriate DirectoryNode that represents the subdirectory of interest, and pass this + the overall POIFSFileSystem to the constructor.</p>\n</blockquote>\n<blockquote>\n<p>I you want to extract the textual contents of the embedded file, then open the appropriate POIDocument, and then pass this to the extractor class, instead of simply passing the POIFSFilesystem to the extractor.</p>\n</blockquote>\n<p>And from the <a href=\"https://poi.apache.org/components/slideshow/how-to-shapes.html#OLE\" rel=\"nofollow noreferrer\">HSLF Tutorial</a></p>\n<pre class=\"lang-java prettyprint-override\"><code>for (HSLFShape shape : slide.getShapes()) {\n    if (shape instanceof OLEShape) {\n        OLEShape ole = (OLEShape) shape;\n        HSLFObjectData data = ole.getObjectData();\n        String name = ole.getInstanceName();\n        if (&quot;Worksheet&quot;.equals(name)) {\n            HSSFWorkbook wb = new HSSFWorkbook(data.getData());\n        } else if (&quot;Document&quot;.equals(name)) {\n            HWPFDocument doc = new HWPFDocument(data.getData());\n        }\n    }\n}\n</code></pre>\n<p>Note: You can use <a href=\"https://poi.apache.org/apidocs/dev/org/apache/poi/ss/usermodel/WorkbookFactory.html\" rel=\"nofollow noreferrer\">WorkbookFactory</a> to abstract yourself from the underlying data format (eg <a href=\"https://poi.apache.org/apidocs/dev/org/apache/poi/hssf/usermodel/HSSFWorkbook.html\" rel=\"nofollow noreferrer\">HSSFWorkbook</a> vs <a href=\"https://poi.apache.org/apidocs/dev/org/apache/poi/xssf/usermodel/XSSFWorkbook.html\" rel=\"nofollow noreferrer\">XSSFWorkbook</a>).</p>\n<p>Eg:</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (&quot;Worksheet&quot;.equals(name)) {\n   Workbook wb = WorkbookFactory.create(data.getInputStream());\n   Sheet sheet = workbook.getSheetAt(0);\n   for (Iterator&lt;Row&gt; rowIterator = sheet.iterator() ; rowIterator.hasNext(); ) {\n      ...\n   }\n}\n</code></pre>\n"}],"owner":{"account_id":28967622,"reputation":5,"user_id":22188644,"display_name":"Code Trickle"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1691167053,"answer_count":2,"score":-3,"last_activity_date":1691133340,"creation_date":1690806539,"question_id":76803642,"body_markdown":"I am currently parsing a PPTX document using apache poi and able to extract images, embedded OLE Objects from ppt slide XSLFSlide but dont know how to extract embedded xls tables from the slide. I need help try to parse and read embedded xls tables in a PPT Slide.","title":"How to extract table data like excel table cells and table row data from PPT in apache poi","body":"<p>I am currently parsing a PPTX document using apache poi and able to extract images, embedded OLE Objects from ppt slide XSLFSlide but dont know how to extract embedded xls tables from the slide. I need help try to parse and read embedded xls tables in a PPT Slide.</p>\n"},{"tags":["java","spring","join"],"comments":[{"owner":{"account_id":2792262,"reputation":163847,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":0,"creation_date":1691010817,"post_id":76823519,"comment_id":135434647,"body_markdown":"You do know, do you not, that you can get a composite PK for an entity simply by annotating multiple fields with `@Id`?  You do not need to create an `@EmbeddedId` for that purpose.  Including when they are relationship fields.  Pulling yours up into the main `PersonRace` entity might clarify to you what the multiplicity of the relationships needs to be.","body":"You do know, do you not, that you can get a composite PK for an entity simply by annotating multiple fields with <code>@Id</code>?  You do not need to create an <code>@EmbeddedId</code> for that purpose.  Including when they are relationship fields.  Pulling yours up into the main <code>PersonRace</code> entity might clarify to you what the multiplicity of the relationships needs to be."},{"owner":{"account_id":20358115,"reputation":37,"user_id":14933161,"display_name":"Ser"},"score":0,"creation_date":1691042512,"post_id":76823519,"comment_id":135437738,"body_markdown":"@JohnBollinger The part of the code you&#39;re reffering to was written by someone else, but thank you for your suggestion, I will pass it on to my colleague","body":"@JohnBollinger The part of the code you&#39;re reffering to was written by someone else, but thank you for your suggestion, I will pass it on to my colleague"}],"answers":[{"tags":[],"owner":{"account_id":2792262,"reputation":163847,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691063410,"creation_date":1691012372,"answer_id":76823695,"question_id":76823519,"body_markdown":"According to your ER diagram, `PersonRace` has a many-to-one relationship with `Race` (and another with `Person`).  That is not correctly reflected on `PersonRaceId`, which in addition to being a problem in itself, leaves the `Race.personRaces` without a viable owning side.  That&#39;s probably why JPA is looking for a table named `race_person_races`.\r\n\r\nYour `@EmbeddedId` seems to be complicating the matters and confusing you, without serving any useful purpose that I can discern, so I recommend getting rid of it.  That would leave you with:\r\n```\r\n@Entity\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Getter\r\n@Setter\r\n@ToString\r\npublic class PersonRace {\r\n    @Id\r\n    @NotNull\r\n    @ManyToOne\r\n    @Column(name = &quot;race_id&quot;)\r\n    private Race race;\r\n\r\n    @Id\r\n    @NotNull\r\n    @ManyToOne\r\n    @Column(name = &quot;person_id&quot;)\r\n    private Person person;\r\n\r\n    // ...\r\n}\r\n\r\n@Entity\r\n@NoArgsConstructor\r\n@Getter\r\n@Setter\r\n@ToString\r\npublic class Race {\r\n    @Id\r\n    @NotNull\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;race_id&quot;)\r\n    private Long id;\r\n\r\n    @OneToMany(mappedBy = &quot;race&quot;)\r\n    private List&lt;PersonRace&gt; personRaces;\r\n\r\n    // ...\r\n}\r\n```\r\nNote that using the `mappedBy` attribute of the `@OneToMany` enables JPA to figure out for itself the appropriate join column(s).  I don&#39;t think you can do that correctly with annotations alone if you use an `@EmbeddedId`.  And as a side note, there is only one join column for this relationship: `person_race.race_id`.","title":"Join Column with EmbeddedId, Spring","body":"<p>According to your ER diagram, <code>PersonRace</code> has a many-to-one relationship with <code>Race</code> (and another with <code>Person</code>).  That is not correctly reflected on <code>PersonRaceId</code>, which in addition to being a problem in itself, leaves the <code>Race.personRaces</code> without a viable owning side.  That's probably why JPA is looking for a table named <code>race_person_races</code>.</p>\n<p>Your <code>@EmbeddedId</code> seems to be complicating the matters and confusing you, without serving any useful purpose that I can discern, so I recommend getting rid of it.  That would leave you with:</p>\n<pre><code>@Entity\n@NoArgsConstructor\n@AllArgsConstructor\n@Getter\n@Setter\n@ToString\npublic class PersonRace {\n    @Id\n    @NotNull\n    @ManyToOne\n    @Column(name = &quot;race_id&quot;)\n    private Race race;\n\n    @Id\n    @NotNull\n    @ManyToOne\n    @Column(name = &quot;person_id&quot;)\n    private Person person;\n\n    // ...\n}\n\n@Entity\n@NoArgsConstructor\n@Getter\n@Setter\n@ToString\npublic class Race {\n    @Id\n    @NotNull\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;race_id&quot;)\n    private Long id;\n\n    @OneToMany(mappedBy = &quot;race&quot;)\n    private List&lt;PersonRace&gt; personRaces;\n\n    // ...\n}\n</code></pre>\n<p>Note that using the <code>mappedBy</code> attribute of the <code>@OneToMany</code> enables JPA to figure out for itself the appropriate join column(s).  I don't think you can do that correctly with annotations alone if you use an <code>@EmbeddedId</code>.  And as a side note, there is only one join column for this relationship: <code>person_race.race_id</code>.</p>\n"},{"tags":[],"owner":{"account_id":20358115,"reputation":37,"user_id":14933161,"display_name":"Ser"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691133095,"creation_date":1691133095,"answer_id":76833697,"question_id":76823519,"body_markdown":"My colleague didn&#39;t want to change the EmbeddedId like suggested but we solved a problem different way\r\n\r\n**PersonRaceId**\r\n```\r\n@Embeddable\r\n@Getter\r\n@Setter\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\npublic class PersonRaceId implements Serializable {\r\n\r\n        @ManyToOne\r\n        @JoinColumn(name = &quot;race_id&quot;)\r\n        @NotNull\r\n        @JsonIgnore\r\n        private Race race;\r\n        @ManyToOne\r\n        @NotNull\r\n        @JoinColumn(name = &quot;person_id&quot;)\r\n        private Person person;\r\n}\r\n```\r\n**Race.java**\r\n```\r\n@Entity\r\n@NoArgsConstructor\r\n@Getter\r\n@Setter\r\n@ToString\r\npublic class Race {\r\n    @Id\r\n    @Column(name = &quot;race_id&quot;)\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @NotNull\r\n    private Long id;\r\n    @Column(name = &quot;max_players&quot;)\r\n    @NotNull\r\n    private Integer maxPlayers;\r\n    @NotNull\r\n    private String description;\r\n    @NotNull\r\n    private String location;\r\n    @NotNull\r\n    private LocalDateTime date;\r\n    @NotNull\r\n    private String state;\r\n    @ManyToOne\r\n    @NotNull\r\n    @JoinColumn(name = &quot;event_id&quot;)\r\n    private RaceEvent raceEvent;\r\n    @OneToMany\r\n    @JoinColumn(name = &quot;lap_id&quot;)\r\n    private List&lt;Lap&gt; laps;\r\n    @OneToMany(mappedBy = &quot;personRaceId.race&quot;)\r\n    private List&lt;PersonRace&gt; personRaces;\r\n\r\n\r\n    public Race(@NotNull Long id, @NotNull Integer maxPlayers, @NotNull String description, @NotNull String location, @NotNull LocalDateTime date, @NotNull String state, @NotNull RaceEvent raceEvent, List&lt;Lap&gt; laps) {\r\n        this.id = id;\r\n        this.maxPlayers = maxPlayers;\r\n        this.description = description;\r\n        this.location = location;\r\n        this.date = date;\r\n        this.state = state;\r\n        this.raceEvent = raceEvent;\r\n        this.laps = laps;\r\n    }\r\n}\r\n```","title":"Join Column with EmbeddedId, Spring","body":"<p>My colleague didn't want to change the EmbeddedId like suggested but we solved a problem different way</p>\n<p><strong>PersonRaceId</strong></p>\n<pre><code>@Embeddable\n@Getter\n@Setter\n@AllArgsConstructor\n@NoArgsConstructor\npublic class PersonRaceId implements Serializable {\n\n        @ManyToOne\n        @JoinColumn(name = &quot;race_id&quot;)\n        @NotNull\n        @JsonIgnore\n        private Race race;\n        @ManyToOne\n        @NotNull\n        @JoinColumn(name = &quot;person_id&quot;)\n        private Person person;\n}\n</code></pre>\n<p><strong>Race.java</strong></p>\n<pre><code>@Entity\n@NoArgsConstructor\n@Getter\n@Setter\n@ToString\npublic class Race {\n    @Id\n    @Column(name = &quot;race_id&quot;)\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @NotNull\n    private Long id;\n    @Column(name = &quot;max_players&quot;)\n    @NotNull\n    private Integer maxPlayers;\n    @NotNull\n    private String description;\n    @NotNull\n    private String location;\n    @NotNull\n    private LocalDateTime date;\n    @NotNull\n    private String state;\n    @ManyToOne\n    @NotNull\n    @JoinColumn(name = &quot;event_id&quot;)\n    private RaceEvent raceEvent;\n    @OneToMany\n    @JoinColumn(name = &quot;lap_id&quot;)\n    private List&lt;Lap&gt; laps;\n    @OneToMany(mappedBy = &quot;personRaceId.race&quot;)\n    private List&lt;PersonRace&gt; personRaces;\n\n\n    public Race(@NotNull Long id, @NotNull Integer maxPlayers, @NotNull String description, @NotNull String location, @NotNull LocalDateTime date, @NotNull String state, @NotNull RaceEvent raceEvent, List&lt;Lap&gt; laps) {\n        this.id = id;\n        this.maxPlayers = maxPlayers;\n        this.description = description;\n        this.location = location;\n        this.date = date;\n        this.state = state;\n        this.raceEvent = raceEvent;\n        this.laps = laps;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":20358115,"reputation":37,"user_id":14933161,"display_name":"Ser"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76833697,"answer_count":2,"score":0,"last_activity_date":1691133095,"creation_date":1691010283,"question_id":76823519,"body_markdown":"I have following database relations. person_race and race are important in my question.\r\n[![enter image description here][1]][1]\r\n\r\nI have a problem with creating relationship between race and person_race. What kind of Join should I use?\r\n\r\n**PersonRace.java**\r\n```\r\n@Entity\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Getter\r\n@Setter\r\n@ToString\r\npublic class PersonRace {\r\n\r\n\r\n    @EmbeddedId\r\n    @NotNull\r\n    private PersonRaceId personRaceId;\r\n\r\n    @Column(name = &quot;player_class&quot;)\r\n    @NotNull\r\n    private String playerClass;\r\n\r\n    @Column(name = &quot;motorbike_model&quot;)\r\n    @NotNull\r\n    private String motorbikeModel;\r\n\r\n    @NotNull\r\n    private boolean confirmed;\r\n\r\n    @NotNull\r\n    @Column(name = &quot;number_in_race&quot;)\r\n    private long numberInRace;\r\n}\r\n```\r\n**PersonRaceId**\r\n```\r\n@Embeddable\r\n@Getter\r\n@Setter\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\npublic class PersonRaceId implements Serializable {\r\n\r\n        @OneToOne\r\n        @JoinColumn(name = &quot;race_id&quot;)\r\n        @NotNull\r\n        private Race race;\r\n        @OneToOne\r\n        @NotNull\r\n        @JoinColumn(name = &quot;person_id&quot;)\r\n        private Person person;\r\n}\r\n```\r\n**Race.java**\r\n```\r\n@Entity\r\n@NoArgsConstructor\r\n@Getter\r\n@Setter\r\n@ToString\r\npublic class Race {\r\n    @Id\r\n    @Column(name = &quot;race_id&quot;)\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @NotNull\r\n    private Long id;\r\n    @Column(name = &quot;max_players&quot;)\r\n    @NotNull\r\n    private Integer maxPlayers;\r\n    @NotNull\r\n    private String description;\r\n    @NotNull\r\n    private String location;\r\n    @NotNull\r\n    private LocalDateTime date;\r\n    @NotNull\r\n    private String state;\r\n    @ManyToOne\r\n    @NotNull\r\n    @JoinColumn(name = &quot;event_id&quot;)\r\n    private RaceEvent raceEvent;\r\n    @OneToMany\r\n    @JoinColumn(name = &quot;lap_id&quot;)\r\n    private List&lt;Lap&gt; laps;\r\n    @OneToMany\r\n    // HERE IS THE PROBLEMATIC CODE\r\n    @PrimaryKeyJoinColumns(value = {\r\n            @PrimaryKeyJoinColumn(name = &quot;race_id&quot;, referencedColumnName = &quot;race_id&quot;),\r\n            @PrimaryKeyJoinColumn(name = &quot;person_id&quot;, referencedColumnName = &quot;person_id&quot;)\r\n    })\r\n    private List&lt;PersonRace&gt; personRaces;\r\n\r\n    public Race(@NotNull Long id, @NotNull Integer maxPlayers, @NotNull String description, @NotNull String location, @NotNull LocalDateTime date, @NotNull String state, @NotNull RaceEvent raceEvent, List&lt;Lap&gt; laps, List&lt;PersonRace&gt; personRaces) {\r\n        this.id = id;\r\n        this.maxPlayers = maxPlayers;\r\n        this.description = description;\r\n        this.location = location;\r\n        this.date = date;\r\n        this.state = state;\r\n        this.raceEvent = raceEvent;\r\n        this.laps = laps;\r\n        this.personRaces = personRaces;\r\n    }\r\n}\r\n```\r\nI created an controller with findAll function but it doesn&#39;t work. It showes error: Caused by: org.postgresql.util.PSQLException: ERROR: relation &quot;race_person_races&quot; does not exist\r\n\r\n**RaceRepository.java**\r\n```\r\n@Repository\r\npublic interface RaceRepository extends CrudRepository&lt;Race, Long&gt; {\r\n    List&lt;Race&gt; findAll();\r\n\r\n}\r\n```\r\n**RaceController.java**\r\n```\r\n@RestController\r\npublic class RaceController {\r\n    private final RaceRepository raceRepository;\r\n\r\n    public RaceController(RaceRepository raceRepository) {\r\n        this.raceRepository = raceRepository;\r\n    }\r\n\r\n    @GetMapping(&quot;/races&quot;)\r\n    public List&lt;Race&gt; getRaces(){\r\n        return raceRepository.findAll();\r\n    }\r\n\r\n}\r\n```\r\n\r\n  [1]: https://i.stack.imgur.com/DUJi6.png","title":"Join Column with EmbeddedId, Spring","body":"<p>I have following database relations. person_race and race are important in my question.\n<a href=\"https://i.stack.imgur.com/DUJi6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DUJi6.png\" alt=\"enter image description here\" /></a></p>\n<p>I have a problem with creating relationship between race and person_race. What kind of Join should I use?</p>\n<p><strong>PersonRace.java</strong></p>\n<pre><code>@Entity\n@NoArgsConstructor\n@AllArgsConstructor\n@Getter\n@Setter\n@ToString\npublic class PersonRace {\n\n\n    @EmbeddedId\n    @NotNull\n    private PersonRaceId personRaceId;\n\n    @Column(name = &quot;player_class&quot;)\n    @NotNull\n    private String playerClass;\n\n    @Column(name = &quot;motorbike_model&quot;)\n    @NotNull\n    private String motorbikeModel;\n\n    @NotNull\n    private boolean confirmed;\n\n    @NotNull\n    @Column(name = &quot;number_in_race&quot;)\n    private long numberInRace;\n}\n</code></pre>\n<p><strong>PersonRaceId</strong></p>\n<pre><code>@Embeddable\n@Getter\n@Setter\n@AllArgsConstructor\n@NoArgsConstructor\npublic class PersonRaceId implements Serializable {\n\n        @OneToOne\n        @JoinColumn(name = &quot;race_id&quot;)\n        @NotNull\n        private Race race;\n        @OneToOne\n        @NotNull\n        @JoinColumn(name = &quot;person_id&quot;)\n        private Person person;\n}\n</code></pre>\n<p><strong>Race.java</strong></p>\n<pre><code>@Entity\n@NoArgsConstructor\n@Getter\n@Setter\n@ToString\npublic class Race {\n    @Id\n    @Column(name = &quot;race_id&quot;)\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @NotNull\n    private Long id;\n    @Column(name = &quot;max_players&quot;)\n    @NotNull\n    private Integer maxPlayers;\n    @NotNull\n    private String description;\n    @NotNull\n    private String location;\n    @NotNull\n    private LocalDateTime date;\n    @NotNull\n    private String state;\n    @ManyToOne\n    @NotNull\n    @JoinColumn(name = &quot;event_id&quot;)\n    private RaceEvent raceEvent;\n    @OneToMany\n    @JoinColumn(name = &quot;lap_id&quot;)\n    private List&lt;Lap&gt; laps;\n    @OneToMany\n    // HERE IS THE PROBLEMATIC CODE\n    @PrimaryKeyJoinColumns(value = {\n            @PrimaryKeyJoinColumn(name = &quot;race_id&quot;, referencedColumnName = &quot;race_id&quot;),\n            @PrimaryKeyJoinColumn(name = &quot;person_id&quot;, referencedColumnName = &quot;person_id&quot;)\n    })\n    private List&lt;PersonRace&gt; personRaces;\n\n    public Race(@NotNull Long id, @NotNull Integer maxPlayers, @NotNull String description, @NotNull String location, @NotNull LocalDateTime date, @NotNull String state, @NotNull RaceEvent raceEvent, List&lt;Lap&gt; laps, List&lt;PersonRace&gt; personRaces) {\n        this.id = id;\n        this.maxPlayers = maxPlayers;\n        this.description = description;\n        this.location = location;\n        this.date = date;\n        this.state = state;\n        this.raceEvent = raceEvent;\n        this.laps = laps;\n        this.personRaces = personRaces;\n    }\n}\n</code></pre>\n<p>I created an controller with findAll function but it doesn't work. It showes error: Caused by: org.postgresql.util.PSQLException: ERROR: relation &quot;race_person_races&quot; does not exist</p>\n<p><strong>RaceRepository.java</strong></p>\n<pre><code>@Repository\npublic interface RaceRepository extends CrudRepository&lt;Race, Long&gt; {\n    List&lt;Race&gt; findAll();\n\n}\n</code></pre>\n<p><strong>RaceController.java</strong></p>\n<pre><code>@RestController\npublic class RaceController {\n    private final RaceRepository raceRepository;\n\n    public RaceController(RaceRepository raceRepository) {\n        this.raceRepository = raceRepository;\n    }\n\n    @GetMapping(&quot;/races&quot;)\n    public List&lt;Race&gt; getRaces(){\n        return raceRepository.findAll();\n    }\n\n}\n</code></pre>\n"},{"tags":["java","vaadin","vaadin7"],"comments":[{"owner":{"account_id":3837378,"reputation":35463,"user_id":3181392,"display_name":"cfrick"},"score":0,"creation_date":1686806068,"post_id":76474713,"comment_id":134850377,"body_markdown":"I am quite out of the loop with V7, but I&#39;d be really surprised if\nadding any events on the outer object would have any consequences for an\nunrelated inner object.  If you are desperate and _really_ can not\nchange your view there, I&#39;d go with reflection directly for the private\ncombobox.","body":"I am quite out of the loop with V7, but I&#39;d be really surprised if adding any events on the outer object would have any consequences for an unrelated inner object.  If you are desperate and <i>really</i> can not change your view there, I&#39;d go with reflection directly for the private combobox."},{"owner":{"account_id":4544346,"reputation":47,"user_id":3691373,"display_name":"fraaanz"},"score":0,"creation_date":1686830144,"post_id":76474713,"comment_id":134854956,"body_markdown":"what do you mean with going with reflection?","body":"what do you mean with going with reflection?"}],"answers":[{"tags":[],"owner":{"account_id":238135,"reputation":3952,"user_id":506813,"display_name":"bekce"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690964317,"creation_date":1690964317,"answer_id":76817899,"question_id":76474713,"body_markdown":"You can use Java reflections API to access `comboRecTel` even though it is `private`. \r\n\r\n    Field privateField = TelefonoWidgetView.class.getDeclaredField(&quot;comboRecTel&quot;);\r\n    privateField.setAccessible(true);\r\n    ComboBox comboRecTel = (ComboBox) privateField.get(tel);\r\n    // then add your new custom listener here\r\n    comboRecTel.addValueChangeListener(...);\r\n\r\n","title":"why listener defined in a subclass seems that aren&#39;t defined","body":"<p>You can use Java reflections API to access <code>comboRecTel</code> even though it is <code>private</code>.</p>\n<pre><code>Field privateField = TelefonoWidgetView.class.getDeclaredField(&quot;comboRecTel&quot;);\nprivateField.setAccessible(true);\nComboBox comboRecTel = (ComboBox) privateField.get(tel);\n// then add your new custom listener here\ncomboRecTel.addValueChangeListener(...);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4201504,"reputation":5591,"user_id":3441504,"accept_rate":100,"display_name":"kscherrer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691133093,"creation_date":1691132765,"answer_id":76833670,"question_id":76474713,"body_markdown":"I am assuming that you can edit the `TelefonoWidgetView` class.  \r\nYou can add a public method in your `TelefonoWidgetView` which accepts a `ValueChangeListener` and passes it on to the combobox like this:\r\n\r\n```\r\n// I use newer vaadin versions, so please excuse any errors in my syntax\r\nclass TelefonoWidgetView extends CustomComponent {\r\n\r\n    private ComboBox comboRecTel;\r\n\r\n    public TelefonoWidgetView(){\r\n        comboRecTel = new ComboBox();\r\n        ...\r\n        addComponent(comboRecTel);\r\n    }\r\n\r\n    public void addTelValueChangeListener(ValueChangeListener valueChangeListener) {\r\n        this.comboRecTel.addValueChangeListener(valueChangeListener);\r\n    }\r\n}\r\n\r\npublic class WidgetView {\r\n\r\n    private TelefonoWidgetView tel;\r\n\r\n    public WidgetView() {\r\n        tel = new TelefornoWidgetView();\r\n        addComponent(tel);\r\n        metho1();\r\n    }\r\n\r\n    private void metho1(){\r\n        tel.addTelValueChangeListener(new ValueChangeListener() {\r\n            private static final long serialVersionUID = 1L;\r\n\r\n            @Override\r\n            public void valueChange(ValueChangeEvent event) {\r\n                System.out.println( &quot; scatto addListener su tel : &quot;+event.getValue());\r\n            }\r\n        });\r\n    }\r\n\r\n```","title":"why listener defined in a subclass seems that aren&#39;t defined","body":"<p>I am assuming that you can edit the <code>TelefonoWidgetView</code> class.<br />\nYou can add a public method in your <code>TelefonoWidgetView</code> which accepts a <code>ValueChangeListener</code> and passes it on to the combobox like this:</p>\n<pre><code>// I use newer vaadin versions, so please excuse any errors in my syntax\nclass TelefonoWidgetView extends CustomComponent {\n\n    private ComboBox comboRecTel;\n\n    public TelefonoWidgetView(){\n        comboRecTel = new ComboBox();\n        ...\n        addComponent(comboRecTel);\n    }\n\n    public void addTelValueChangeListener(ValueChangeListener valueChangeListener) {\n        this.comboRecTel.addValueChangeListener(valueChangeListener);\n    }\n}\n\npublic class WidgetView {\n\n    private TelefonoWidgetView tel;\n\n    public WidgetView() {\n        tel = new TelefornoWidgetView();\n        addComponent(tel);\n        metho1();\n    }\n\n    private void metho1(){\n        tel.addTelValueChangeListener(new ValueChangeListener() {\n            private static final long serialVersionUID = 1L;\n\n            @Override\n            public void valueChange(ValueChangeEvent event) {\n                System.out.println( &quot; scatto addListener su tel : &quot;+event.getValue());\n            }\n        });\n    }\n\n</code></pre>\n"}],"owner":{"account_id":4544346,"reputation":47,"user_id":3691373,"display_name":"fraaanz"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691133093,"creation_date":1686753342,"question_id":76474713,"body_markdown":"I have a class that contains has a private member a combobox and extended CostomComponet as:\r\n\r\n    class TelefonoWidgetView extends CustomComponent {\r\n    \r\n    private ComboBox comboRecTel;\r\n    \r\n    private VerticalLayout recTelLayout(){\r\n    \r\n    comboRecTel = new ComboBox();\r\n    comboRecTel.addValueChangeListener(new ValueChangeListener() {\r\n    \t\t\tprivate static final long serialVersionUID = 1L;\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic void valueChange(ValueChangeEvent event) {\r\n                 //do something\r\n    \r\n         }\r\n    }\r\n\r\n\r\nNow in another class I need to use that class (that I cannot modify) and have a Listener on the combobox; How I can do that?\r\n\r\nLet say my new class is WidgetView, and is defined as \r\n\r\n    WidgetView {\r\n    \r\n    private TelefonoWidgetView tel;\r\n    \r\n    private void metho1(){\r\n      \ttel.addListener(new com.vaadin.ui.Component.Listener() {\r\n    \r\n    \t\t\t\r\n    \t\t\t\tprivate static final long serialVersionUID = 1L;\r\n    \r\n    \t\t\t\t@Override\r\n    \t\t\t\tpublic void componentEvent(Event event) {\r\n    \t\t\t\t\tSystem.out.println( &quot; scatto addListener su tel : &quot;);\r\n    \t\t\t\t\t\r\n    \t\t\t\t}\r\n    \t\t\t});\r\n    \r\n        }\r\n      }\r\n\r\n \r\nwhen I click on the combobox, I cannot see &quot;scatto addListener su tel&quot; on my console even if it compile correctly, It seems that the Listener has not been defined, while it is there!!\r\n\r\nI know that I can create a combobox by myself but in the class TelefonoWidgetView there are other staff that I cannot copied;\r\n\r\nI ve also tryed to put addDetachListener(new DetachListener(), addAttachListener(new AttachListener(),addContextClickListener(new ContextClickListener() \r\n\r\nbut no one is able to intercept the value change in the combobox\r\n\r\nthanks a lot\r\n","title":"why listener defined in a subclass seems that aren&#39;t defined","body":"<p>I have a class that contains has a private member a combobox and extended CostomComponet as:</p>\n<pre><code>class TelefonoWidgetView extends CustomComponent {\n\nprivate ComboBox comboRecTel;\n\nprivate VerticalLayout recTelLayout(){\n\ncomboRecTel = new ComboBox();\ncomboRecTel.addValueChangeListener(new ValueChangeListener() {\n            private static final long serialVersionUID = 1L;\n\n            @Override\n            public void valueChange(ValueChangeEvent event) {\n             //do something\n\n     }\n}\n</code></pre>\n<p>Now in another class I need to use that class (that I cannot modify) and have a Listener on the combobox; How I can do that?</p>\n<p>Let say my new class is WidgetView, and is defined as</p>\n<pre><code>WidgetView {\n\nprivate TelefonoWidgetView tel;\n\nprivate void metho1(){\n    tel.addListener(new com.vaadin.ui.Component.Listener() {\n\n            \n                private static final long serialVersionUID = 1L;\n\n                @Override\n                public void componentEvent(Event event) {\n                    System.out.println( &quot; scatto addListener su tel : &quot;);\n                    \n                }\n            });\n\n    }\n  }\n</code></pre>\n<p>when I click on the combobox, I cannot see &quot;scatto addListener su tel&quot; on my console even if it compile correctly, It seems that the Listener has not been defined, while it is there!!</p>\n<p>I know that I can create a combobox by myself but in the class TelefonoWidgetView there are other staff that I cannot copied;</p>\n<p>I ve also tryed to put addDetachListener(new DetachListener(), addAttachListener(new AttachListener(),addContextClickListener(new ContextClickListener()</p>\n<p>but no one is able to intercept the value change in the combobox</p>\n<p>thanks a lot</p>\n"},{"tags":["java","android","firebase","google-cloud-platform","google-cloud-firestore"],"answers":[{"tags":[],"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691132874,"creation_date":1691130017,"answer_id":76833413,"question_id":76833363,"body_markdown":"You&#39;re getting the `NullPointerException` because of the following line of code:\r\n\r\n    DocumentReference measurementdata = db.collection(&quot;measurement&quot;).getParent();\r\n\r\nWhen you&#39;re calling [CollectionReference#getParent()][1] on a top-level collection, according to the docs:\r\n\r\n&gt; Gets a `DocumentReference` to the document that contains this collection. Only subcollections are contained in a document. **For root collections, returns `null`**.\r\n\r\nTo avoid that, you have to remove the call to `.getParent()` and add a call to [CollectionReference#document()][2] to create a [DocumentReference][3] object. And to make it work, don&#39;t forget to pass the ID of the document you want to read.\r\n\r\n\r\n  [1]: https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/CollectionReference#getParent()\r\n  [2]: https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/CollectionReference#document()\r\n  [3]: https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/DocumentReference","title":"How to solve the error &quot;com.google.android.gms.tasks.Task com.google.firebase.firestore.DocumentReference.get()&#39; on a null object reference&quot;","body":"<p>You're getting the <code>NullPointerException</code> because of the following line of code:</p>\n<pre><code>DocumentReference measurementdata = db.collection(&quot;measurement&quot;).getParent();\n</code></pre>\n<p>When you're calling <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/CollectionReference#getParent()\" rel=\"nofollow noreferrer\">CollectionReference#getParent()</a> on a top-level collection, according to the docs:</p>\n<blockquote>\n<p>Gets a <code>DocumentReference</code> to the document that contains this collection. Only subcollections are contained in a document. <strong>For root collections, returns <code>null</code></strong>.</p>\n</blockquote>\n<p>To avoid that, you have to remove the call to <code>.getParent()</code> and add a call to <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/CollectionReference#document()\" rel=\"nofollow noreferrer\">CollectionReference#document()</a> to create a <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/DocumentReference\" rel=\"nofollow noreferrer\">DocumentReference</a> object. And to make it work, don't forget to pass the ID of the document you want to read.</p>\n"}],"owner":{"account_id":28701767,"reputation":1,"user_id":21978815,"display_name":"Bhadra Vaghela"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691132874,"creation_date":1691129480,"question_id":76833363,"body_markdown":"[I have tried all the way to solve the .get error but I don&#39;t get any solution ](https://i.stack.imgur.com/DfptK.jpg)\r\n\r\nTextView detailLength = view.findViewById(R.id.detailLength);\r\n        TextView detailShoulder = view.findViewById(R.id.detailShoulder);\r\n\r\n        db = FirebaseFirestore.getInstance();\r\n\r\n        DocumentReference measurementdata = db.collection(&quot;measurement&quot;).getParent();\r\n        measurementdata.get()\r\n                .addOnSuccessListener(new OnSuccessListener&lt;DocumentSnapshot&gt;() {\r\n            @Override\r\n            public void onSuccess(DocumentSnapshot documentSnapshot) {\r\n                MeasurementAdapter measurementAdapter = documentSnapshot.toObject(MeasurementAdapter.class);\r\n\r\n                String length = measurementAdapter.getLength();\r\n\r\n                String shoulder = measurementAdapter.getShoulder();\r\n\r\n\r\n                detailLength.setText(length);\r\n//                detailShoulder.setText(shoulder);\r\n            }\r\n\r\n        });\r\n\r\n\r\nI have tried this code but the text did not set in TextView.","title":"How to solve the error &quot;com.google.android.gms.tasks.Task com.google.firebase.firestore.DocumentReference.get()&#39; on a null object reference&quot;","body":"<p><a href=\"https://i.stack.imgur.com/DfptK.jpg\" rel=\"nofollow noreferrer\">I have tried all the way to solve the .get error but I don't get any solution </a></p>\n<p>TextView detailLength = view.findViewById(R.id.detailLength);\nTextView detailShoulder = view.findViewById(R.id.detailShoulder);</p>\n<pre><code>    db = FirebaseFirestore.getInstance();\n\n    DocumentReference measurementdata = db.collection(&quot;measurement&quot;).getParent();\n    measurementdata.get()\n            .addOnSuccessListener(new OnSuccessListener&lt;DocumentSnapshot&gt;() {\n        @Override\n        public void onSuccess(DocumentSnapshot documentSnapshot) {\n            MeasurementAdapter measurementAdapter = documentSnapshot.toObject(MeasurementAdapter.class);\n\n            String length = measurementAdapter.getLength();\n\n            String shoulder = measurementAdapter.getShoulder();\n\n\n            detailLength.setText(length);\n</code></pre>\n<p>//                detailShoulder.setText(shoulder);\n}</p>\n<pre><code>    });\n</code></pre>\n<p>I have tried this code but the text did not set in TextView.</p>\n"},{"tags":["java","spring","junit","mockito"],"comments":[{"owner":{"account_id":7291967,"reputation":57515,"user_id":5558072,"accept_rate":100,"display_name":"Youcef LAIDANI"},"score":1,"creation_date":1690804154,"post_id":76803098,"comment_id":135399306,"body_markdown":"How your Unit Test looks like?","body":"How your Unit Test looks like?"}],"answers":[{"tags":[],"owner":{"account_id":29073167,"reputation":1013,"user_id":22270964,"display_name":"Maksim Eliseev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691132572,"creation_date":1690806904,"answer_id":76803687,"question_id":76803098,"body_markdown":"When you run a unit test Spring tries to initialize a program context completely. But you have several ways to influence what Spring will initialize.\r\n\r\nThe first way is to use the `@MockBean` annotation, for example:\r\n\r\n    @SpringBootTest\r\n    class SomeTest {\r\n\r\n        @MockBean\r\n        private Subscriber subscriber;\r\n        \r\n        // tests are here\r\n    }\r\n\r\nBut there are a lot of things that you think about, e.g. how the other beans will be interract with mock bean. To solve some problems related to this, `Mockito` can be used.\r\n\r\nThe second way is to use `@TestConfiguration`, for example:\r\n\r\n    @SpringBootTest\r\n    class SomeTest {\r\n    \r\n        @TestConfiguration\r\n        public static class CustomConfiguration {\r\n        \r\n            @Bean\r\n            public Subscriber consumeMessage() {\r\n                // some dummy test building logic is here\r\n                return subscriber\r\n            }\r\n        }\r\n        \r\n        @Autowired\r\n        private Subscriber subscriber;\r\n        \r\n        // tests are here\r\n    }\r\n\r\nIf you use a test configuration you will be able to do whatever you want to create the `Subscriber` bean. But this way requires adding additional configuration: `spring.main.allow-bean-definition-overriding=true`. You can put this line in the `application.properties` that can be placed in the test reources.\r\n\r\nThe choice is yours, which of these methods will suit better. And to demonstrate these methods, I&#39;ve pushed a working example on my [github][1].\r\n\r\n\r\n  [1]: https://github.com/elimxim/so-spring-boot-mock-bean","title":"How to resolve java.lang.IllegalStateException: Failed to load ApplicationContext error","body":"<p>When you run a unit test Spring tries to initialize a program context completely. But you have several ways to influence what Spring will initialize.</p>\n<p>The first way is to use the <code>@MockBean</code> annotation, for example:</p>\n<pre><code>@SpringBootTest\nclass SomeTest {\n\n    @MockBean\n    private Subscriber subscriber;\n    \n    // tests are here\n}\n</code></pre>\n<p>But there are a lot of things that you think about, e.g. how the other beans will be interract with mock bean. To solve some problems related to this, <code>Mockito</code> can be used.</p>\n<p>The second way is to use <code>@TestConfiguration</code>, for example:</p>\n<pre><code>@SpringBootTest\nclass SomeTest {\n\n    @TestConfiguration\n    public static class CustomConfiguration {\n    \n        @Bean\n        public Subscriber consumeMessage() {\n            // some dummy test building logic is here\n            return subscriber\n        }\n    }\n    \n    @Autowired\n    private Subscriber subscriber;\n    \n    // tests are here\n}\n</code></pre>\n<p>If you use a test configuration you will be able to do whatever you want to create the <code>Subscriber</code> bean. But this way requires adding additional configuration: <code>spring.main.allow-bean-definition-overriding=true</code>. You can put this line in the <code>application.properties</code> that can be placed in the test reources.</p>\n<p>The choice is yours, which of these methods will suit better. And to demonstrate these methods, I've pushed a working example on my <a href=\"https://github.com/elimxim/so-spring-boot-mock-bean\" rel=\"nofollow noreferrer\">github</a>.</p>\n"},{"tags":[],"owner":{"account_id":115659,"reputation":32567,"user_id":303598,"accept_rate":84,"display_name":"matsev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690807794,"creation_date":1690807794,"answer_id":76803804,"question_id":76803098,"body_markdown":"One option is to potentially rewrite the unit test such that it only tests a specific class, i.e. without creating an application context. Another suggestion is to add a mocked `Subscriber` bean to the test application context by using `@MockBean` annotation, e.g.\r\n\r\n```java\r\n@MockBean\r\nSubscriber subscriberMock;\r\n```\r\n\r\nCopied from the [@MockBean][1] JavaDoc:\r\n\r\n&gt;  When registered by type, any existing single bean of a matching type (including subclasses) in the context will be replaced by the mock.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/test/mock/mockito/MockBean.html","title":"How to resolve java.lang.IllegalStateException: Failed to load ApplicationContext error","body":"<p>One option is to potentially rewrite the unit test such that it only tests a specific class, i.e. without creating an application context. Another suggestion is to add a mocked <code>Subscriber</code> bean to the test application context by using <code>@MockBean</code> annotation, e.g.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@MockBean\nSubscriber subscriberMock;\n</code></pre>\n<p>Copied from the <a href=\"https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/test/mock/mockito/MockBean.html\" rel=\"nofollow noreferrer\">@MockBean</a> JavaDoc:</p>\n<blockquote>\n<p>When registered by type, any existing single bean of a matching type (including subclasses) in the context will be replaced by the mock.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":29073167,"reputation":1013,"user_id":22270964,"display_name":"Maksim Eliseev"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691132706,"creation_date":1690814829,"answer_id":76804754,"question_id":76803098,"body_markdown":"If you are using pure spring without boot you can still have two options.\r\n\r\n\r\nThe first one is to use `Mockito` to mock a problematic bean, for example:\r\n\r\n    @ExtendWith(MockitoExtension.class)\r\n    @ContextConfiguration(classes = {/** your configuration class **/})\r\n    class SomeTest {\r\n    \r\n        @Mock\r\n        private Subscriber subscriber;\r\n        \r\n        // tests are here\r\n    }\r\n\r\nThis is the simplest example. If your bean is injected into another beans that you want to test, this will require additional manipulations of the test, such as using `@InjectMocks` or more complex things.\r\n\r\n\r\nThe second one is to use a test context configuration to change bean creation code, for example:\r\n\r\n    @ExtendWith(SpringExtension.class)\r\n    @ContextConfiguration(classes = {/** your configuration class **/, SomeTest.TestConfiguration.class})\r\n    class SomeTest {\r\n\r\n        @Configuration\r\n        public static class TestConfiguration {\r\n    \r\n            @Bean\r\n            public Subscriber consumeMessage() {\r\n                // some dummy test building logic is here\r\n                return subscriber\r\n            }\r\n        }\r\n\r\n        @Autowired\r\n        private Subscriber subscriber;\r\n    \r\n        // tests are here\r\n    }\r\n\r\nTo demonstrate these abilities, I pushed a working example on my [github][1]\r\n\r\n\r\n  [1]: https://github.com/elimxim/so-spring-mock-bean","title":"How to resolve java.lang.IllegalStateException: Failed to load ApplicationContext error","body":"<p>If you are using pure spring without boot you can still have two options.</p>\n<p>The first one is to use <code>Mockito</code> to mock a problematic bean, for example:</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\n@ContextConfiguration(classes = {/** your configuration class **/})\nclass SomeTest {\n\n    @Mock\n    private Subscriber subscriber;\n    \n    // tests are here\n}\n</code></pre>\n<p>This is the simplest example. If your bean is injected into another beans that you want to test, this will require additional manipulations of the test, such as using <code>@InjectMocks</code> or more complex things.</p>\n<p>The second one is to use a test context configuration to change bean creation code, for example:</p>\n<pre><code>@ExtendWith(SpringExtension.class)\n@ContextConfiguration(classes = {/** your configuration class **/, SomeTest.TestConfiguration.class})\nclass SomeTest {\n\n    @Configuration\n    public static class TestConfiguration {\n\n        @Bean\n        public Subscriber consumeMessage() {\n            // some dummy test building logic is here\n            return subscriber\n        }\n    }\n\n    @Autowired\n    private Subscriber subscriber;\n\n    // tests are here\n}\n</code></pre>\n<p>To demonstrate these abilities, I pushed a working example on my <a href=\"https://github.com/elimxim/so-spring-mock-bean\" rel=\"nofollow noreferrer\">github</a></p>\n"}],"owner":{"account_id":12377600,"reputation":565,"user_id":9024680,"display_name":"stackUser"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":617,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1691132706,"creation_date":1690802267,"question_id":76803098,"body_markdown":"I have a config class with below bean creation in that\r\n\r\n    @Bean\r\n    public Subscriber consumeMessage() {\r\n        LOGGER.debug( &quot;Subscriber bean created&quot; );\r\n        //here is some custom logic and as it does not find actual credential file its giving error and failed to create bean at app start.\r\n\r\n        return subscriber;\r\n    }\r\n\r\nLooks like spring is trying to create and load all beans before running unit test and above bean creation is failing due to some business logic.\r\n\r\nNote: Its pure Spring based app not spring-boot\r\n\r\n        java.lang.IllegalStateException: Failed to load ApplicationContext\r\n    \tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:125) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:108) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:118) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:246) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextPrepareTestInstance(AbstractTestNGSpringContextTests.java:145) [spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_362]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_362]\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_362]\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_362]\r\n    \tat org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:104) [testng-6.10.jar:na]\r\n    \tat org.testng.internal.Invoker.invokeConfigurationMethod(Invoker.java:515) [testng-6.10.jar:na]\r\n    \tat org.testng.internal.Invoker.invokeConfigurations(Invoker.java:217) [testng-6.10.jar:na]\r\n    \tat org.testng.internal.Invoker.invokeConfigurations(Invoker.java:144) [testng-6.10.jar:na]\r\n    \tat org.testng.internal.TestMethodWorker.invokeBeforeClassMethods(TestMethodWorker.java:169) [testng-6.10.jar:na]\r\n    \tat org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:108) [testng-6.10.jar:na]\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [na:1.8.0_362]\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [na:1.8.0_362]\r\n    \tat java.lang.Thread.run(Thread.java:750) [na:1.8.0_362]\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;consumeMessage&#39; defined in com.teams.docu.config.GcpPubSubConfiguration: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.google.cloud.pubsub.v1.Subscriber]: Factory method &#39;consumeMessage&#39; threw exception; nested exception is BusinessServiceException [details=ExceptionDetails [type=AUTHENTICATION_EXCEPTION, severity=ERROR, errorcode=gcp.credentials.read.error, args=null, validationErrors=null, namedParameters=[]]]\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:627) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:456) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1288) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1127) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:846) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:863) ~[spring-context-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:546) ~[spring-context-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:128) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:60) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.delegateLoading(AbstractDelegatingSmartContextLoader.java:275) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.loadContext(AbstractDelegatingSmartContextLoader.java:243) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \t... 18 common frames omitted\r\n    Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.google.cloud.pubsub.v1.Subscriber]: Factory method &#39;consumeMessage&#39; threw exception; nested exception is BusinessServiceException [details=ExceptionDetails [type=AUTHENTICATION_EXCEPTION, severity=ERROR, errorcode=gcp.credentials.read.error, args=null, validationErrors=null, namedParameters=[]]]\r\n    \tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:622) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \t... 36 common frames omitted\r\n    Caused by: com.teams.docu.exception.BusinessServiceException: GCP Credential cannot be created from the stream\r\n    \tat com.teams.docu.service.util.GCPUtil.getGoogleCredentials(GCPUtil.java:89) ~[classes/:na]\r\n    \tat com.teams.docu.config.GcpPubSubConfiguration.getSubscriber(GcpPubSubConfiguration.java:54) ~[classes/:na]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_362]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_362]\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_362]\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_362]\r\n    \tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \t... 37 common frames omitted\r\n    Caused by: java.io.FileNotFoundException: dummyFileLocation (No such file or directory)\r\n    \tat java.io.FileInputStream.open0(Native Method) ~[na:1.8.0_362]\r\n    \tat java.io.FileInputStream.open(FileInputStream.java:195) ~[na:1.8.0_362]\r\n    \tat java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:138) ~[na:1.8.0_362]\r\n    \tat java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:93) ~[na:1.8.0_362]\r\n    \tat com.teams.docu.service.util.GCPUtil.getGoogleCredentials(GCPUtil.java:87) ~[classes/:na]\r\n    \t... 49 common frames omitted\r\n\r\n \r\nHow to skip/mock the @Configuration class @Bean creation in spring while running unit test.\r\n\r\nUpdates: I have tried with @ContextConfiguration and below is my test class that I can update\r\n\r\n        @ContextConfiguration(classes = GcpPubSubConfig.class)\r\n    public class ServiceImplTest\r\n        extends AbstractTestService&lt;TService&gt; {\r\n    }\r\n        \r\nBelow is framework/common class that we are using while writing unit test that I cant change.\r\n\r\n        @ContextConfiguration(locations = {\r\n        &quot;classpath:docu-service.xml&quot;\r\n    })\r\n    public abstract class AbstractTestService&lt;T&gt;\r\n        extends AbstractTestNGSpringContextTests {\r\n}\r\n\r\n but getting following error as the the framework we are using(AbstractTestService) its already using @ContextConfiguration with locations\r\n\r\n            java.lang.IllegalStateException: Failed to load ApplicationContext\r\n    \tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:125) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:108) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:118) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:246) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextPrepareTestInstance(AbstractTestNGSpringContextTests.java:145) [spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_362]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_362]\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_362]\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_362]\r\n    \tat org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:104) [testng-6.10.jar:na]\r\n    \tat org.testng.internal.Invoker.invokeConfigurationMethod(Invoker.java:515) [testng-6.10.jar:na]\r\n    \tat org.testng.internal.Invoker.invokeConfigurations(Invoker.java:217) [testng-6.10.jar:na]\r\n    \tat org.testng.internal.Invoker.invokeConfigurations(Invoker.java:144) [testng-6.10.jar:na]\r\n    \tat org.testng.internal.TestMethodWorker.invokeBeforeClassMethods(TestMethodWorker.java:169) [testng-6.10.jar:na]\r\n    \tat org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:108) [testng-6.10.jar:na]\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [na:1.8.0_362]\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [na:1.8.0_362]\r\n    \tat java.lang.Thread.run(Thread.java:750) [na:1.8.0_362]\r\n    Caused by: java.lang.IllegalStateException: Neither GenericXmlContextLoader nor AnnotationConfigContextLoader supports loading an ApplicationContext from [MergedContextConfiguration@7ea731f8 testClass = ServiceImplTest, locations = &#39;{classpath:docu-service.xml}&#39;, classes = &#39;{class com.docu.analytic.service.impl.GcpPubSubConfig}&#39;, contextInitializerClasses = &#39;[]&#39;, activeProfiles = &#39;{}&#39;, propertySourceLocations = &#39;{}&#39;, propertySourceProperties = &#39;{}&#39;, contextCustomizers = set[[empty]], contextLoader = &#39;org.springframework.test.context.support.DelegatingSmartContextLoader&#39;, parent = [null]]: declare either &#39;locations&#39; or &#39;classes&#39; but not both.\r\n    \tat org.springframework.util.Assert.state(Assert.java:94) ~[spring-core-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.loadContext(AbstractDelegatingSmartContextLoader.java:233) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n    \t... 18 common frames omitted\r\n    Tests run: 5, Failures: 1, Errors: 0, Skipped: 4, Time elapsed: 2.019 sec &lt;&lt;&lt; FAILURE! - in com.docu.analytic.service.impl.ServiceImplTest\r\n    springTestContextPrepareTestInstance(com.docu.analytic.service.impl.ServiceImplTest)  Time elapsed: 1.955 sec  &lt;&lt;&lt; FAILURE!\r\n    java.lang.IllegalStateException: Failed to load ApplicationContext\r\n    Caused by: java.lang.IllegalStateException: Neither GenericXmlContextLoader nor AnnotationConfigContextLoader supports loading an ApplicationContext from [MergedContextConfiguration@7ea731f8 testClass = ServiceImplTest, locations = &#39;{classpath:docu-service.xml}&#39;, classes = &#39;{class com.docu.analytic.service.impl.GcpPubSubConfig}&#39;, contextInitializerClasses = &#39;[]&#39;, activeProfiles = &#39;{}&#39;, propertySourceLocations = &#39;{}&#39;, propertySourceProperties = &#39;{}&#39;, contextCustomizers = set[[empty]], contextLoader = &#39;org.springframework.test.context.support.DelegatingSmartContextLoader&#39;, parent = [null]]: declare either &#39;locations&#39; or &#39;classes&#39; but not both.\r\n\r\nUpdates: I have updated my test class as below and I am able to resolve the **&quot;declare either &#39;locations&#39; or &#39;classes&#39; but not both&quot;** error\r\n\r\n        @Import(GcpPubSubConfig.class)\r\n    public class ServiceImplTest\r\n        extends AbstractTestService&lt;GreenButtonConnectService&gt; {","title":"How to resolve java.lang.IllegalStateException: Failed to load ApplicationContext error","body":"<p>I have a config class with below bean creation in that</p>\n<pre><code>@Bean\npublic Subscriber consumeMessage() {\n    LOGGER.debug( &quot;Subscriber bean created&quot; );\n    //here is some custom logic and as it does not find actual credential file its giving error and failed to create bean at app start.\n\n    return subscriber;\n}\n</code></pre>\n<p>Looks like spring is trying to create and load all beans before running unit test and above bean creation is failing due to some business logic.</p>\n<p>Note: Its pure Spring based app not spring-boot</p>\n<pre><code>    java.lang.IllegalStateException: Failed to load ApplicationContext\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:125) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:108) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:118) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:246) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextPrepareTestInstance(AbstractTestNGSpringContextTests.java:145) [spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_362]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_362]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_362]\n    at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_362]\n    at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:104) [testng-6.10.jar:na]\n    at org.testng.internal.Invoker.invokeConfigurationMethod(Invoker.java:515) [testng-6.10.jar:na]\n    at org.testng.internal.Invoker.invokeConfigurations(Invoker.java:217) [testng-6.10.jar:na]\n    at org.testng.internal.Invoker.invokeConfigurations(Invoker.java:144) [testng-6.10.jar:na]\n    at org.testng.internal.TestMethodWorker.invokeBeforeClassMethods(TestMethodWorker.java:169) [testng-6.10.jar:na]\n    at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:108) [testng-6.10.jar:na]\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [na:1.8.0_362]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [na:1.8.0_362]\n    at java.lang.Thread.run(Thread.java:750) [na:1.8.0_362]\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'consumeMessage' defined in com.teams.docu.config.GcpPubSubConfiguration: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.google.cloud.pubsub.v1.Subscriber]: Factory method 'consumeMessage' threw exception; nested exception is BusinessServiceException [details=ExceptionDetails [type=AUTHENTICATION_EXCEPTION, severity=ERROR, errorcode=gcp.credentials.read.error, args=null, validationErrors=null, namedParameters=[]]]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:627) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:456) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1288) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1127) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:538) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:846) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:863) ~[spring-context-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:546) ~[spring-context-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:128) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:60) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.delegateLoading(AbstractDelegatingSmartContextLoader.java:275) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.loadContext(AbstractDelegatingSmartContextLoader.java:243) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    ... 18 common frames omitted\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.google.cloud.pubsub.v1.Subscriber]: Factory method 'consumeMessage' threw exception; nested exception is BusinessServiceException [details=ExceptionDetails [type=AUTHENTICATION_EXCEPTION, severity=ERROR, errorcode=gcp.credentials.read.error, args=null, validationErrors=null, namedParameters=[]]]\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:622) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    ... 36 common frames omitted\nCaused by: com.teams.docu.exception.BusinessServiceException: GCP Credential cannot be created from the stream\n    at com.teams.docu.service.util.GCPUtil.getGoogleCredentials(GCPUtil.java:89) ~[classes/:na]\n    at com.teams.docu.config.GcpPubSubConfiguration.getSubscriber(GcpPubSubConfiguration.java:54) ~[classes/:na]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_362]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_362]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_362]\n    at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_362]\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    ... 37 common frames omitted\nCaused by: java.io.FileNotFoundException: dummyFileLocation (No such file or directory)\n    at java.io.FileInputStream.open0(Native Method) ~[na:1.8.0_362]\n    at java.io.FileInputStream.open(FileInputStream.java:195) ~[na:1.8.0_362]\n    at java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:138) ~[na:1.8.0_362]\n    at java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:93) ~[na:1.8.0_362]\n    at com.teams.docu.service.util.GCPUtil.getGoogleCredentials(GCPUtil.java:87) ~[classes/:na]\n    ... 49 common frames omitted\n</code></pre>\n<p>How to skip/mock the @Configuration class @Bean creation in spring while running unit test.</p>\n<p>Updates: I have tried with @ContextConfiguration and below is my test class that I can update</p>\n<pre><code>    @ContextConfiguration(classes = GcpPubSubConfig.class)\npublic class ServiceImplTest\n    extends AbstractTestService&lt;TService&gt; {\n}\n    \n</code></pre>\n<p>Below is framework/common class that we are using while writing unit test that I cant change.</p>\n<pre><code>    @ContextConfiguration(locations = {\n    &quot;classpath:docu-service.xml&quot;\n})\npublic abstract class AbstractTestService&lt;T&gt;\n    extends AbstractTestNGSpringContextTests {\n</code></pre>\n<p>}</p>\n<p>but getting following error as the the framework we are using(AbstractTestService) its already using @ContextConfiguration with locations</p>\n<pre><code>        java.lang.IllegalStateException: Failed to load ApplicationContext\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:125) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:108) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:118) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:246) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.springTestContextPrepareTestInstance(AbstractTestNGSpringContextTests.java:145) [spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_362]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_362]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_362]\n    at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_362]\n    at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:104) [testng-6.10.jar:na]\n    at org.testng.internal.Invoker.invokeConfigurationMethod(Invoker.java:515) [testng-6.10.jar:na]\n    at org.testng.internal.Invoker.invokeConfigurations(Invoker.java:217) [testng-6.10.jar:na]\n    at org.testng.internal.Invoker.invokeConfigurations(Invoker.java:144) [testng-6.10.jar:na]\n    at org.testng.internal.TestMethodWorker.invokeBeforeClassMethods(TestMethodWorker.java:169) [testng-6.10.jar:na]\n    at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:108) [testng-6.10.jar:na]\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [na:1.8.0_362]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [na:1.8.0_362]\n    at java.lang.Thread.run(Thread.java:750) [na:1.8.0_362]\nCaused by: java.lang.IllegalStateException: Neither GenericXmlContextLoader nor AnnotationConfigContextLoader supports loading an ApplicationContext from [MergedContextConfiguration@7ea731f8 testClass = ServiceImplTest, locations = '{classpath:docu-service.xml}', classes = '{class com.docu.analytic.service.impl.GcpPubSubConfig}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]: declare either 'locations' or 'classes' but not both.\n    at org.springframework.util.Assert.state(Assert.java:94) ~[spring-core-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.loadContext(AbstractDelegatingSmartContextLoader.java:233) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117) ~[spring-test-5.1.3.RELEASE.jar:5.1.3.RELEASE]\n    ... 18 common frames omitted\nTests run: 5, Failures: 1, Errors: 0, Skipped: 4, Time elapsed: 2.019 sec &lt;&lt;&lt; FAILURE! - in com.docu.analytic.service.impl.ServiceImplTest\nspringTestContextPrepareTestInstance(com.docu.analytic.service.impl.ServiceImplTest)  Time elapsed: 1.955 sec  &lt;&lt;&lt; FAILURE!\njava.lang.IllegalStateException: Failed to load ApplicationContext\nCaused by: java.lang.IllegalStateException: Neither GenericXmlContextLoader nor AnnotationConfigContextLoader supports loading an ApplicationContext from [MergedContextConfiguration@7ea731f8 testClass = ServiceImplTest, locations = '{classpath:docu-service.xml}', classes = '{class com.docu.analytic.service.impl.GcpPubSubConfig}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[[empty]], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]: declare either 'locations' or 'classes' but not both.\n</code></pre>\n<p>Updates: I have updated my test class as below and I am able to resolve the <strong>&quot;declare either 'locations' or 'classes' but not both&quot;</strong> error</p>\n<pre><code>    @Import(GcpPubSubConfig.class)\npublic class ServiceImplTest\n    extends AbstractTestService&lt;GreenButtonConnectService&gt; {\n</code></pre>\n"},{"tags":["java","apache-kafka","apache-kafka-connect"],"owner":{"account_id":29107629,"reputation":21,"user_id":22298043,"display_name":"양형욱"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":98,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691132675,"creation_date":1690879098,"question_id":76809874,"body_markdown":"As described in Kafka confluent:\r\n\r\n&gt; As described in Installing Connect Plugins, connector plugin JAR files are placed in the plugin path (Connect worker property: plugin.path). However, a few connectors may require that you additionally export the CLASSPATH to the plugin JAR files when starting the connector (`export CLASSPATH=&lt;path-to-jar-files&gt;`). While not recommended, **CLASSPATH** is required for these connectors because Kafka Connect uses classloading isolation to distinguish between system classes and regular classes, and some plugins load system classes (for example, `javax.naming` and others in the package **javax**). An example error message showing this issue is provided below. If you see an error that resembles the example below, in addition to adding the plugin path, you must also `export CLASSPATH=&lt;path-to-jar-files&gt;` when starting the connector.\r\n\r\nOne thing I don&#39;t understand is that when the plug-in class loader that operates as child first tries to load a system class and cannot find a class, it delegates to the parent class loader, which is the system class loader, so that the system class can be loaded. I don&#39;t know why classpath has to be specified.\r\n\r\n","title":"Kafka Connect plugin classpath","body":"<p>As described in Kafka confluent:</p>\n<blockquote>\n<p>As described in Installing Connect Plugins, connector plugin JAR files are placed in the plugin path (Connect worker property: plugin.path). However, a few connectors may require that you additionally export the CLASSPATH to the plugin JAR files when starting the connector (<code>export CLASSPATH=&lt;path-to-jar-files&gt;</code>). While not recommended, <strong>CLASSPATH</strong> is required for these connectors because Kafka Connect uses classloading isolation to distinguish between system classes and regular classes, and some plugins load system classes (for example, <code>javax.naming</code> and others in the package <strong>javax</strong>). An example error message showing this issue is provided below. If you see an error that resembles the example below, in addition to adding the plugin path, you must also <code>export CLASSPATH=&lt;path-to-jar-files&gt;</code> when starting the connector.</p>\n</blockquote>\n<p>One thing I don't understand is that when the plug-in class loader that operates as child first tries to load a system class and cannot find a class, it delegates to the parent class loader, which is the system class loader, so that the system class can be loaded. I don't know why classpath has to be specified.</p>\n"},{"tags":["java","aws-java-sdk","aws-java-sdk-2.x"],"owner":{"account_id":405356,"reputation":31601,"user_id":774183,"accept_rate":78,"display_name":"carlspring"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691132520,"creation_date":1691106570,"question_id":76832209,"body_markdown":"I&#39;ve been looking at the documentation for the [AWS SDK for Java][1] and I&#39;m trying to find  how one can download the monthly invoices using this SDK. Is it at all possible or am I chasing my tail here?\r\n\r\nIf this is not supported, are there any alternatives I could use?\r\n\r\n\r\n  [1]: https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/home.html","title":"Is it possible to download invoices from AWS billing using the sdk-for-java and if so, how?","body":"<p>I've been looking at the documentation for the <a href=\"https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/home.html\" rel=\"nofollow noreferrer\">AWS SDK for Java</a> and I'm trying to find  how one can download the monthly invoices using this SDK. Is it at all possible or am I chasing my tail here?</p>\n<p>If this is not supported, are there any alternatives I could use?</p>\n"},{"tags":["java","lambda","checked-exceptions","java-8"],"comments":[{"owner":{"account_id":29398,"reputation":10394,"user_id":1859863,"display_name":"Maurice Naftalin"},"score":3,"creation_date":1356533425,"post_id":14039995,"comment_id":19400298,"body_markdown":"For anyone following the evolution of the lambdas API, it&#39;s worth noting that java.util.functions.Factory::make is now java.util.function.Supplier::get. You can see an up-to-date version of the API docs at http://lambdadoc.net, a subsite of the [Lambda FAQ] (http://lambdafaq.org)","body":"For anyone following the evolution of the lambdas API, it&#39;s worth noting that java.util.functions.Factory::make is now java.util.function.Supplier::get. You can see an up-to-date version of the API docs at <a href=\"http://lambdadoc.net\" rel=\"nofollow noreferrer\">lambdadoc.net</a>, a subsite of the [Lambda FAQ] (<a href=\"http://lambdafaq.org\" rel=\"nofollow noreferrer\">lambdafaq.org</a>)"},{"owner":{"account_id":55617,"reputation":20495,"user_id":166589,"accept_rate":91,"display_name":"Lyubomyr Shaydariv"},"score":0,"creation_date":1356533959,"post_id":14039995,"comment_id":19400481,"body_markdown":"@MauriceNaftalin, thanks for the comment. I currently use OpenJDK 1.8.0-EA.","body":"@MauriceNaftalin, thanks for the comment. I currently use OpenJDK 1.8.0-EA."},{"owner":{"account_id":42255,"reputation":8377,"user_id":123054,"accept_rate":83,"display_name":"Matt"},"score":1,"creation_date":1356546142,"post_id":14039995,"comment_id":19404362,"body_markdown":"one approach is given in [this blog](http://java8blog.com/post/37385501926/fixing-checked-exceptions-in-java-8)","body":"one approach is given in <a href=\"http://java8blog.com/post/37385501926/fixing-checked-exceptions-in-java-8\" rel=\"nofollow noreferrer\">this blog</a>"},{"owner":{"account_id":1416522,"reputation":91354,"user_id":3553087,"display_name":"Brian Goetz"},"score":3,"creation_date":1421101622,"post_id":14039995,"comment_id":44223163,"body_markdown":"The exception transparency writeup to which you refer was simply a candidate proposal, which was later deemed to be flawed after examination in greater detail.","body":"The exception transparency writeup to which you refer was simply a candidate proposal, which was later deemed to be flawed after examination in greater detail."},{"owner":{"account_id":428741,"reputation":3863,"user_id":811257,"display_name":"kopelitsa"},"score":0,"creation_date":1462788990,"post_id":14039995,"comment_id":61767635,"body_markdown":"@Matt the link is broken","body":"@Matt the link is broken"}],"answers":[{"tags":[],"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"down_vote_count":0,"up_vote_count":49,"is_accepted":true,"score":49,"last_activity_date":1356552040,"creation_date":1356552040,"answer_id":14045585,"question_id":14039995,"body_markdown":"Not sure I really answer your question, but couldn&#39;t you simply use something like that?\r\n\r\n    public final class SupplierUtils {\r\n        private SupplierUtils() {\r\n        }\r\n    \r\n        public static &lt;T&gt; Supplier&lt;T&gt; wrap(Callable&lt;T&gt; callable) {\r\n            return () -&gt; {\r\n                try {\r\n                    return callable.call();\r\n                }\r\n                catch (RuntimeException e) {\r\n                    throw e;\r\n                }\r\n                catch (Exception e) {\r\n                    throw new RuntimeException(e);\r\n                }\r\n            };\r\n        }\r\n    }\r\n    \r\n    public class JdbcConnectionPool extends ObjectPool&lt;Connection&gt; {\r\n    \r\n        public JdbcConnectionPool(int maxConnections, String url) {\r\n            super(SupplierUtils.wrap(() -&gt; DriverManager.getConnection(url)), maxConnections);\r\n        }\r\n    }","title":"Java 8: Mandatory checked exceptions handling in lambda expressions. Why mandatory, not optional?","body":"<p>Not sure I really answer your question, but couldn't you simply use something like that?</p>\n\n<pre><code>public final class SupplierUtils {\n    private SupplierUtils() {\n    }\n\n    public static &lt;T&gt; Supplier&lt;T&gt; wrap(Callable&lt;T&gt; callable) {\n        return () -&gt; {\n            try {\n                return callable.call();\n            }\n            catch (RuntimeException e) {\n                throw e;\n            }\n            catch (Exception e) {\n                throw new RuntimeException(e);\n            }\n        };\n    }\n}\n\npublic class JdbcConnectionPool extends ObjectPool&lt;Connection&gt; {\n\n    public JdbcConnectionPool(int maxConnections, String url) {\n        super(SupplierUtils.wrap(() -&gt; DriverManager.getConnection(url)), maxConnections);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2232964,"reputation":11,"user_id":1970126,"display_name":"Waldo auf der Springe"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1358099646,"creation_date":1358099646,"answer_id":14306376,"question_id":14039995,"body_markdown":"Wrapping the exception in the described way does not work. I tried it and I still get compiler errors, which is actually according to the spec: the lambda expression throws the exception which is incompatible with the target type of the method argument: Callable&lt;T&gt;; call() does not throw it so I can not pass the lambda expression as a Callable.\r\n\r\nSo basically there is no solution: we are stuck with writing boilerplate. The only thing we can do is voice our opinion that this needs fixing. I think the spec should not just blindly discard a target type based on incompatible thrown exceptions: it should subsequently check whether the thrown incompatible exception is caught or declared as throws in the invoking scope.\r\nAnd for lambda expressions that are not inlined I propose we can mark them as silently throwing checked exception (silent in the sense that the compiler should not check, but the runtime should still catch).\r\nlet&#39;s mark those with =&gt; as opposed to -&gt;\r\nI know this is not a discussion site, but since this IS the only solution to the question, let yourself be heard and let&#39;s change this spec!","title":"Java 8: Mandatory checked exceptions handling in lambda expressions. Why mandatory, not optional?","body":"<p>Wrapping the exception in the described way does not work. I tried it and I still get compiler errors, which is actually according to the spec: the lambda expression throws the exception which is incompatible with the target type of the method argument: Callable; call() does not throw it so I can not pass the lambda expression as a Callable.</p>\n\n<p>So basically there is no solution: we are stuck with writing boilerplate. The only thing we can do is voice our opinion that this needs fixing. I think the spec should not just blindly discard a target type based on incompatible thrown exceptions: it should subsequently check whether the thrown incompatible exception is caught or declared as throws in the invoking scope.\nAnd for lambda expressions that are not inlined I propose we can mark them as silently throwing checked exception (silent in the sense that the compiler should not check, but the runtime should still catch).\nlet's mark those with => as opposed to ->\nI know this is not a discussion site, but since this IS the only solution to the question, let yourself be heard and let's change this spec!</p>\n"},{"tags":[],"owner":{"account_id":515883,"reputation":4966,"user_id":1128668,"accept_rate":54,"display_name":"GlenPeterson"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1376061085,"creation_date":1375992964,"answer_id":18135318,"question_id":14039995,"body_markdown":"Have you considered using a RuntimeException (unchecked) wrapper class to smuggle the original exception out of the lambda expression, then casting the wrapped exception *back* to it&#39;s original checked exception?\r\n\r\n    class WrappedSqlException extends RuntimeException {\r\n        static final long serialVersionUID = 20130808044800000L;\r\n        public WrappedSqlException(SQLException cause) { super(cause); }\r\n        public SQLException getSqlException() { return (SQLException) getCause(); }\r\n    }\r\n\r\n    public ConnectionPool(int maxConnections, String url) throws SQLException {\r\n        try {\r\n            super(() -&gt; {\r\n                try {\r\n                    return DriverManager.getConnection(url);\r\n                } catch ( SQLException ex ) {\r\n                    throw new WrappedSqlException(ex);\r\n                }\r\n            }, maxConnections);\r\n        } catch (WrappedSqlException wse) {\r\n            throw wse.getSqlException();\r\n        }\r\n    }\r\n\r\nCreating your own unique class should prevent any likelihood of mistaking another unchecked exception for the one you wrapped inside your lambda, even if the exception is serialized somewhere in the pipeline before you catch and re-throw it.\r\n\r\nHmm... The only thing I see that&#39;s a problem here is that you are doing this inside a constructor with a call to super() which, by law, must be the first statement in your constructor.  Does `try` count as a previous statement?  I have this working (without the constructor) in my own code.\r\n\r\n  [1]: http://www.oracle.com/technetwork/articles/javase/bloch-effective-08-qa-140880.html\r\n  [2]: http://java8blog.com/post/37385501926/fixing-checked-exceptions-in-java-8","title":"Java 8: Mandatory checked exceptions handling in lambda expressions. Why mandatory, not optional?","body":"<p>Have you considered using a RuntimeException (unchecked) wrapper class to smuggle the original exception out of the lambda expression, then casting the wrapped exception <em>back</em> to it's original checked exception?</p>\n\n<pre><code>class WrappedSqlException extends RuntimeException {\n    static final long serialVersionUID = 20130808044800000L;\n    public WrappedSqlException(SQLException cause) { super(cause); }\n    public SQLException getSqlException() { return (SQLException) getCause(); }\n}\n\npublic ConnectionPool(int maxConnections, String url) throws SQLException {\n    try {\n        super(() -&gt; {\n            try {\n                return DriverManager.getConnection(url);\n            } catch ( SQLException ex ) {\n                throw new WrappedSqlException(ex);\n            }\n        }, maxConnections);\n    } catch (WrappedSqlException wse) {\n        throw wse.getSqlException();\n    }\n}\n</code></pre>\n\n<p>Creating your own unique class should prevent any likelihood of mistaking another unchecked exception for the one you wrapped inside your lambda, even if the exception is serialized somewhere in the pipeline before you catch and re-throw it.</p>\n\n<p>Hmm... The only thing I see that's a problem here is that you are doing this inside a constructor with a call to super() which, by law, must be the first statement in your constructor.  Does <code>try</code> count as a previous statement?  I have this working (without the constructor) in my own code.</p>\n"},{"tags":[],"owner":{"account_id":357454,"reputation":77335,"user_id":697630,"accept_rate":84,"display_name":"Edwin Dalorzo"},"down_vote_count":0,"up_vote_count":34,"is_accepted":false,"score":34,"last_activity_date":1575772817,"creation_date":1395928743,"answer_id":22689869,"question_id":14039995,"body_markdown":"In the lambda mailing list this was [throughly discussed](http://mail.openjdk.java.net/pipermail/lambda-dev/2013-January/007660.html). As you can see Brian Goetz suggested there that the alternative is to write your own combinator:\r\n\r\n&gt; Or you could write your own trivial combinator:\r\n&gt; \r\n&gt;     static&lt;T&gt; Supplier&lt;T&gt; exceptionWrappingSupplier(Supplier&lt;T&gt; b) {\r\n&gt;          return e -&gt; {\r\n&gt;              try { b.accept(e); }\r\n&gt;              catch (Exception e) { throw new RuntimeException(e); }\r\n&gt;          };\r\n&gt;     }\r\n&gt; \r\n&gt; You can write it once, in less that the time it took to write your \r\n&gt; original e-mail.  And similarly once for each kind of SAM you use.\r\n&gt; \r\n&gt; I&#39;d rather we look at this as &quot;glass 99% full&quot; rather than the \r\n&gt; alternative.  Not all problems require new language features as \r\n&gt; solutions.  (Not to mention that new language features always causes\r\n&gt; new  problems.)\r\n\r\nIn those days the Consumer interface was called Block.\r\n\r\nI think this corresponds with [JB Nizet&#39;s answer](https://stackoverflow.com/questions/14039995/java-8-mandatory-checked-exceptions-handling-in-lambda-expressions-for-standard/14045585#14045585).\r\n\r\nLater Brian [explains why](http://mail.openjdk.java.net/pipermail/lambda-dev/2013-January/007662.html) this was designed this way (the reason of problem)\r\n\r\n&gt; Yes, you&#39;d have to provide your own exceptional SAMs.  But then lambda\r\n&gt; conversion would work fine with them.\r\n&gt; \r\n&gt; The EG discussed additional language and library support for this \r\n&gt; problem, and in the end felt that this was a bad cost/benefit\r\n&gt; tradeoff.\r\n&gt; \r\n&gt; Library-based solutions cause a 2x explosion in SAM types (exceptional\r\n&gt; vs not), which interact badly with existing combinatorial explosions\r\n&gt; for  primitive specialization.\r\n&gt; \r\n&gt; The available language-based solutions were losers from a \r\n&gt; complexity/value tradeoff.  Though there are some alternative\r\n&gt; solutions  we are going to continue to explore -- though clearly not\r\n&gt; for 8 and probably not for 9 either.\r\n&gt; \r\n&gt; In the meantime, you have the tools to do what you want.  I get that\r\n&gt; you  prefer we provide that last mile for you (and, secondarily, your\r\n&gt; request  is really a thinly-veiled request for &quot;why don&#39;t you just\r\n&gt; give up on  checked exceptions already&quot;), but I think the current\r\n&gt; state lets you get your job done.\r\n","title":"Java 8: Mandatory checked exceptions handling in lambda expressions. Why mandatory, not optional?","body":"<p>In the lambda mailing list this was <a href=\"http://mail.openjdk.java.net/pipermail/lambda-dev/2013-January/007660.html\" rel=\"nofollow noreferrer\">throughly discussed</a>. As you can see Brian Goetz suggested there that the alternative is to write your own combinator:</p>\n\n<blockquote>\n  <p>Or you could write your own trivial combinator:</p>\n\n<pre><code>static&lt;T&gt; Supplier&lt;T&gt; exceptionWrappingSupplier(Supplier&lt;T&gt; b) {\n     return e -&gt; {\n         try { b.accept(e); }\n         catch (Exception e) { throw new RuntimeException(e); }\n     };\n}\n</code></pre>\n  \n  <p>You can write it once, in less that the time it took to write your \n  original e-mail.  And similarly once for each kind of SAM you use.</p>\n  \n  <p>I'd rather we look at this as \"glass 99% full\" rather than the \n  alternative.  Not all problems require new language features as \n  solutions.  (Not to mention that new language features always causes\n  new  problems.)</p>\n</blockquote>\n\n<p>In those days the Consumer interface was called Block.</p>\n\n<p>I think this corresponds with <a href=\"https://stackoverflow.com/questions/14039995/java-8-mandatory-checked-exceptions-handling-in-lambda-expressions-for-standard/14045585#14045585\">JB Nizet's answer</a>.</p>\n\n<p>Later Brian <a href=\"http://mail.openjdk.java.net/pipermail/lambda-dev/2013-January/007662.html\" rel=\"nofollow noreferrer\">explains why</a> this was designed this way (the reason of problem)</p>\n\n<blockquote>\n  <p>Yes, you'd have to provide your own exceptional SAMs.  But then lambda\n  conversion would work fine with them.</p>\n  \n  <p>The EG discussed additional language and library support for this \n  problem, and in the end felt that this was a bad cost/benefit\n  tradeoff.</p>\n  \n  <p>Library-based solutions cause a 2x explosion in SAM types (exceptional\n  vs not), which interact badly with existing combinatorial explosions\n  for  primitive specialization.</p>\n  \n  <p>The available language-based solutions were losers from a \n  complexity/value tradeoff.  Though there are some alternative\n  solutions  we are going to continue to explore -- though clearly not\n  for 8 and probably not for 9 either.</p>\n  \n  <p>In the meantime, you have the tools to do what you want.  I get that\n  you  prefer we provide that last mile for you (and, secondarily, your\n  request  is really a thinly-veiled request for \"why don't you just\n  give up on  checked exceptions already\"), but I think the current\n  state lets you get your job done.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":1129042,"reputation":48134,"user_id":1115554,"accept_rate":100,"display_name":"micha"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1441265032,"creation_date":1441216378,"answer_id":32359977,"question_id":14039995,"body_markdown":"**September 2015:**\n\nYou can use [ET][1] for this. ET is a small Java 8 library for exception conversion/translation.\n\nWith ET you can write:\n    \n    super(() -&gt; et.withReturningTranslation(() -&gt; DriverManager.getConnection(url)), maxConnections);\n\nMulti line version:\n\n    super(() -&gt; {\n      return et.withReturningTranslation(() -&gt; DriverManager.getConnection(url));\n    }, maxConnections);\n\nAll you need to do before, is creating a new `ExceptionTranslator` instance:\n\n    ExceptionTranslator et = ET.newConfiguration().done();\n\nThis instance is thread safe an can be shared by multiple components. You can configure more specific exception conversion rules (e.g. `FooCheckedException -&gt; BarRuntimeException`) if you like. If no other rules are available, checked exceptions are automatically converted to `RuntimeException`.\n\n(Disclaimer: I am the author of ET)\n\n  [1]: https://github.com/mscharhag/ET","title":"Java 8: Mandatory checked exceptions handling in lambda expressions. Why mandatory, not optional?","body":"<p><strong>September 2015:</strong></p>\n<p>You can use <a href=\"https://github.com/mscharhag/ET\" rel=\"noreferrer\">ET</a> for this. ET is a small Java 8 library for exception conversion/translation.</p>\n<p>With ET you can write:</p>\n<pre><code>super(() -&gt; et.withReturningTranslation(() -&gt; DriverManager.getConnection(url)), maxConnections);\n</code></pre>\n<p>Multi line version:</p>\n<pre><code>super(() -&gt; {\n  return et.withReturningTranslation(() -&gt; DriverManager.getConnection(url));\n}, maxConnections);\n</code></pre>\n<p>All you need to do before, is creating a new <code>ExceptionTranslator</code> instance:</p>\n<pre><code>ExceptionTranslator et = ET.newConfiguration().done();\n</code></pre>\n<p>This instance is thread safe an can be shared by multiple components. You can configure more specific exception conversion rules (e.g. <code>FooCheckedException -&gt; BarRuntimeException</code>) if you like. If no other rules are available, checked exceptions are automatically converted to <code>RuntimeException</code>.</p>\n<p>(Disclaimer: I am the author of ET)</p>\n"},{"tags":[],"owner":{"account_id":515883,"reputation":4966,"user_id":1128668,"accept_rate":54,"display_name":"GlenPeterson"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1474469696,"creation_date":1446147272,"answer_id":33423125,"question_id":14039995,"body_markdown":"[Paguro provides functional interfaces that wrap checked exceptions][1].  I started working on it a few months after you asked your question, so you were probably part of the inspiration for it!\r\n\r\nYou&#39;ll notice that there are only 4 functional interfaces in Paguro vs. the 43 interfaces included with Java 8.  That&#39;s because Paguro prefers generics to primitives.\r\n\r\nPaguro has single-pass transformations built into its immutable collections (copied from Clojure).  These transforms are roughly equivalent to Clojure transducers or Java 8 streams, but they accept functional interfaces that wrap checked exceptions.  See: [the differences between Paguro and Java 8 streams][2].\r\n\r\n  [1]: https://github.com/GlenKPeterson/Paguro\r\n  [2]: https://github.com/GlenKPeterson/Paguro/wiki/Comparison-with-Streams-and-Lambdas-in-JDK8","title":"Java 8: Mandatory checked exceptions handling in lambda expressions. Why mandatory, not optional?","body":"<p><a href=\"https://github.com/GlenKPeterson/Paguro\" rel=\"nofollow\">Paguro provides functional interfaces that wrap checked exceptions</a>.  I started working on it a few months after you asked your question, so you were probably part of the inspiration for it!</p>\n\n<p>You'll notice that there are only 4 functional interfaces in Paguro vs. the 43 interfaces included with Java 8.  That's because Paguro prefers generics to primitives.</p>\n\n<p>Paguro has single-pass transformations built into its immutable collections (copied from Clojure).  These transforms are roughly equivalent to Clojure transducers or Java 8 streams, but they accept functional interfaces that wrap checked exceptions.  See: <a href=\"https://github.com/GlenKPeterson/Paguro/wiki/Comparison-with-Streams-and-Lambdas-in-JDK8\" rel=\"nofollow\">the differences between Paguro and Java 8 streams</a>.</p>\n"},{"tags":[],"owner":{"account_id":2570598,"reputation":13282,"user_id":2229438,"accept_rate":94,"display_name":"Grzegorz Piwowarek"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1691132468,"creation_date":1459747904,"answer_id":36395157,"question_id":14039995,"body_markdown":"We developed an internal project in my company that helped us with this. We decided to went public two months ago.\r\n\r\nThis is what we came up with:\r\n\r\n    @FunctionalInterface\r\n    public interface ThrowingFunction&lt;T,R,E extends Throwable&gt; {\r\n    R apply(T arg) throws E;\r\n\r\n    /**\r\n     * @param &lt;T&gt; type\r\n     * @param &lt;E&gt; checked exception\r\n     * @return a function that accepts one argument and returns it as a value.\r\n     */\r\n    static &lt;T, E extends Exception&gt; ThrowingFunction&lt;T, T, E&gt; identity() {\r\n        return t -&gt; t;\r\n    }\r\n\r\n    /**\r\n     * @return a Function that returns the result of the given function as an Optional instance.\r\n     * In case of a failure, empty Optional is returned\r\n     */\r\n    static &lt;T, R, E extends Exception&gt; Function&lt;T, Optional&lt;R&gt;&gt; lifted(ThrowingFunction&lt;T, R, E&gt; f) {\r\n        Objects.requireNonNull(f);\r\n\r\n        return f.lift();\r\n    }\r\n\r\n    static &lt;T, R, E extends Exception&gt; Function&lt;T, R&gt; unchecked(ThrowingFunction&lt;T, R, E&gt; f) {\r\n        Objects.requireNonNull(f);\r\n\r\n        return f.uncheck();\r\n    }\r\n\r\n    default &lt;V&gt; ThrowingFunction&lt;V, R, E&gt; compose(final ThrowingFunction&lt;? super V, ? extends T, E&gt; before) {\r\n        Objects.requireNonNull(before);\r\n\r\n        return (V v) -&gt; apply(before.apply(v));\r\n    }\r\n\r\n    default &lt;V&gt; ThrowingFunction&lt;T, V, E&gt; andThen(final ThrowingFunction&lt;? super R, ? extends V, E&gt; after) {\r\n        Objects.requireNonNull(after);\r\n\r\n        return (T t) -&gt; after.apply(apply(t));\r\n    }\r\n\r\n    /**\r\n     * @return a Function that returns the result as an Optional instance. In case of a failure, empty Optional is\r\n     * returned\r\n     */\r\n    default Function&lt;T, Optional&lt;R&gt;&gt; lift() {\r\n        return t -&gt; {\r\n            try {\r\n                return Optional.of(apply(t));\r\n            } catch (Throwable e) {\r\n                return Optional.empty();\r\n            }\r\n        };\r\n    }\r\n\r\n    /**\r\n     * @return a new Function instance which wraps thrown checked exception instance into a RuntimeException\r\n     */\r\n    default Function&lt;T, R&gt; uncheck() {\r\n        return t -&gt; {\r\n            try {\r\n                return apply(t);\r\n            } catch (final Throwable e) {\r\n                throw new WrappedException(e);\r\n            }\r\n        };\r\n    }\r\n}\r\n\r\nhttp://github.com/pivovarit/throwing-function","title":"Java 8: Mandatory checked exceptions handling in lambda expressions. Why mandatory, not optional?","body":"<p>We developed an internal project in my company that helped us with this. We decided to went public two months ago.</p>\n<p>This is what we came up with:</p>\n<pre><code>@FunctionalInterface\npublic interface ThrowingFunction&lt;T,R,E extends Throwable&gt; {\nR apply(T arg) throws E;\n\n/**\n * @param &lt;T&gt; type\n * @param &lt;E&gt; checked exception\n * @return a function that accepts one argument and returns it as a value.\n */\nstatic &lt;T, E extends Exception&gt; ThrowingFunction&lt;T, T, E&gt; identity() {\n    return t -&gt; t;\n}\n\n/**\n * @return a Function that returns the result of the given function as an Optional instance.\n * In case of a failure, empty Optional is returned\n */\nstatic &lt;T, R, E extends Exception&gt; Function&lt;T, Optional&lt;R&gt;&gt; lifted(ThrowingFunction&lt;T, R, E&gt; f) {\n    Objects.requireNonNull(f);\n\n    return f.lift();\n}\n\nstatic &lt;T, R, E extends Exception&gt; Function&lt;T, R&gt; unchecked(ThrowingFunction&lt;T, R, E&gt; f) {\n    Objects.requireNonNull(f);\n\n    return f.uncheck();\n}\n\ndefault &lt;V&gt; ThrowingFunction&lt;V, R, E&gt; compose(final ThrowingFunction&lt;? super V, ? extends T, E&gt; before) {\n    Objects.requireNonNull(before);\n\n    return (V v) -&gt; apply(before.apply(v));\n}\n\ndefault &lt;V&gt; ThrowingFunction&lt;T, V, E&gt; andThen(final ThrowingFunction&lt;? super R, ? extends V, E&gt; after) {\n    Objects.requireNonNull(after);\n\n    return (T t) -&gt; after.apply(apply(t));\n}\n\n/**\n * @return a Function that returns the result as an Optional instance. In case of a failure, empty Optional is\n * returned\n */\ndefault Function&lt;T, Optional&lt;R&gt;&gt; lift() {\n    return t -&gt; {\n        try {\n            return Optional.of(apply(t));\n        } catch (Throwable e) {\n            return Optional.empty();\n        }\n    };\n}\n\n/**\n * @return a new Function instance which wraps thrown checked exception instance into a RuntimeException\n */\ndefault Function&lt;T, R&gt; uncheck() {\n    return t -&gt; {\n        try {\n            return apply(t);\n        } catch (final Throwable e) {\n            throw new WrappedException(e);\n        }\n    };\n}\n</code></pre>\n<p>}</p>\n<p><a href=\"http://github.com/pivovarit/throwing-function\" rel=\"nofollow noreferrer\">http://github.com/pivovarit/throwing-function</a></p>\n"},{"tags":[],"owner":{"account_id":15387,"reputation":63718,"user_id":32453,"accept_rate":92,"display_name":"rogerdpack"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1508443242,"creation_date":1508443242,"answer_id":46838023,"question_id":14039995,"body_markdown":"You *can* throw from your lambdas, they just have to be declared &quot;with your own way&quot; (which makes them, unfortunately, not re-usable in standard JDK code, but hey, we does what we cans).\r\n\r\n\r\n\r\n\r\n    @FunctionalInterface\r\n    public interface SupplierIOException {\r\n       MyClass get() throws IOException;\r\n    }\r\n\r\nOr the more generic-ized version:\r\n\r\n    public interface ThrowingSupplier&lt;T, E extends Exception&gt; {\r\n      T get() throws E;\r\n    }\r\n\r\nref [here][1].  There is also a mention of using &quot;sneakyThrow&quot; to not declare the checked exceptions, but then still throw them.  It that hurts my head a bit, maybe an option.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/27644392/32453","title":"Java 8: Mandatory checked exceptions handling in lambda expressions. Why mandatory, not optional?","body":"<p>You <em>can</em> throw from your lambdas, they just have to be declared \"with your own way\" (which makes them, unfortunately, not re-usable in standard JDK code, but hey, we does what we cans).</p>\n\n<pre><code>@FunctionalInterface\npublic interface SupplierIOException {\n   MyClass get() throws IOException;\n}\n</code></pre>\n\n<p>Or the more generic-ized version:</p>\n\n<pre><code>public interface ThrowingSupplier&lt;T, E extends Exception&gt; {\n  T get() throws E;\n}\n</code></pre>\n\n<p>ref <a href=\"https://stackoverflow.com/a/27644392/32453\">here</a>.  There is also a mention of using \"sneakyThrow\" to not declare the checked exceptions, but then still throw them.  It that hurts my head a bit, maybe an option.</p>\n"},{"tags":[],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1633615549,"creation_date":1633615549,"answer_id":69482614,"question_id":14039995,"body_markdown":"[jOOλ][1] is a library that supports wrapping all sorts of functional interfaces throwing checked exceptions into equivalent JDK functional interfaces. For example:\r\n\r\n```java\r\n// Wraps the checked exception in an unchecked one:\r\nSupplier&lt;Class&lt;?&gt;&gt; supplier = Unchecked.supplier(() -&gt; Class.forName(&quot;com.example.X&quot;));\r\n\r\n// Re-throws the checked exception without compile time checking:\r\nSupplier&lt;Class&lt;?&gt;&gt; supplier = Sneaky.supplier(() -&gt; Class.forName(&quot;com.example.X&quot;));\r\n```\r\n\r\n[I&#39;ve made some more examples in this blog post here][2].\r\nDisclaimer: I made jOOλ\r\n\r\n\r\n  [1]: https://github.com/jOOQ/jOOL\r\n  [2]: https://blog.jooq.org/use-joo%CE%BBs-sneaky-throw-to-avoid-checked-exceptions/","title":"Java 8: Mandatory checked exceptions handling in lambda expressions. Why mandatory, not optional?","body":"<p><a href=\"https://github.com/jOOQ/jOOL\" rel=\"nofollow noreferrer\">jOOλ</a> is a library that supports wrapping all sorts of functional interfaces throwing checked exceptions into equivalent JDK functional interfaces. For example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Wraps the checked exception in an unchecked one:\nSupplier&lt;Class&lt;?&gt;&gt; supplier = Unchecked.supplier(() -&gt; Class.forName(&quot;com.example.X&quot;));\n\n// Re-throws the checked exception without compile time checking:\nSupplier&lt;Class&lt;?&gt;&gt; supplier = Sneaky.supplier(() -&gt; Class.forName(&quot;com.example.X&quot;));\n</code></pre>\n<p><a href=\"https://blog.jooq.org/use-joo%CE%BBs-sneaky-throw-to-avoid-checked-exceptions/\" rel=\"nofollow noreferrer\">I've made some more examples in this blog post here</a>.\nDisclaimer: I made jOOλ</p>\n"}],"owner":{"account_id":55617,"reputation":20495,"user_id":166589,"accept_rate":91,"display_name":"Lyubomyr Shaydariv"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49166,"favorite_count":0,"down_vote_count":0,"up_vote_count":71,"accepted_answer_id":14045585,"answer_count":9,"score":71,"last_activity_date":1691132468,"creation_date":1356521529,"question_id":14039995,"body_markdown":"I&#39;m playing with the new lambda features in Java 8, and found that the practices offered by Java 8 are really useful. However, I&#39;m wondering is there a _good_ way to make a work-around for the following scenario. Suppose you have an object pool wrapper that requires some kind of a factory to fill the object pool, for example (using `java.lang.functions.Factory`):\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    public class JdbcConnectionPool extends ObjectPool&lt;Connection&gt; {\r\n\r\n        public ConnectionPool(int maxConnections, String url) {\r\n            super(new Factory&lt;Connection&gt;() {\r\n                @Override\r\n                public Connection make() {\r\n                    try {\r\n                        return DriverManager.getConnection(url);\r\n                    } catch ( SQLException ex ) {\r\n                        throw new RuntimeException(ex);\r\n                    }\r\n                }\r\n            }, maxConnections);\r\n        }\r\n\r\n    }\r\n\r\nAfter transforming the functional interface into lambda expression, the code above becomes like that:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    public class JdbcConnectionPool extends ObjectPool&lt;Connection&gt; {\r\n\r\n        public ConnectionPool(int maxConnections, String url) {\r\n            super(() -&gt; {\r\n                try {\r\n                    return DriverManager.getConnection(url);\r\n                } catch ( SQLException ex ) {\r\n                    throw new RuntimeException(ex);\r\n                }\r\n            }, maxConnections);\r\n        }\r\n\r\n    }\r\n\r\nNot so bad indeed, but the checked exception `java.sql.SQLException` requires a `try`/`catch` block inside the lambda. At my company we use two interfaces for long time:\r\n\r\n* `IOut&lt;T&gt;` that is an equivalent to `java.lang.functions.Factory`;\r\n* and a special interface for the cases that usually require checked exceptions propagation: `interface IUnsafeOut&lt;T, E extends Throwable&gt; { T out() throws E; }`.\r\n\r\nBoth `IOut&lt;T&gt;` and `IUnsafeOut&lt;T&gt;` are supposed to be removed during migration to Java 8, however there is no exact match for `IUnsafeOut&lt;T, E&gt;`. If the lambda expressions could deal with checked exceptions like they were unchecked, it could be possible to use simply like the following in the constructor above:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    super(() -&gt; DriverManager.getConnection(url), maxConnections);\r\n\r\nThat looks much cleaner. I see that I can rewrite the `ObjectPool` super class to accept our `IUnsafeOut&lt;T&gt;`, but as far as I know, Java 8 is not finished yet, so could be there some changes like:\r\n\r\n* implementing something similar to `IUnsafeOut&lt;T, E&gt;`? (to be honest, I consider that dirty - the subject must choose what to accept: either `Factory` or &quot;unsafe factory&quot; that cannot have compatible method signatures)\r\n* simply ignoring checked exceptions in lambdas, so no need in `IUnsafeOut&lt;T, E&gt;` surrogates? (why not? e.g. another important change: OpenJDK, that I use, `javac` now does not require variables and parameters to be declared as `final` to be captured in an anonymous class [functional interface] or lambda expression)\r\n\r\nSo the question is generally is: is there a way to bypass checked exceptions in lambdas or is it planned in the future until Java 8 is finally released?\r\n\r\n\r\n---\r\n\r\nUpdate 1\r\n\r\nHm-m-m, as far as I understand what we currently have, it seems there is no way at the moment, despite the referenced article is dated from 2010: [Brian Goetz explains exception transparency in Java][1]. If nothing changed much in Java 8, this could be considered an answer. Also Brian says that `interface ExceptionalCallable&lt;V, E extends Exception&gt;` (what I mentioned as `IUnsafeOut&lt;T, E extends Throwable&gt;` out of our code legacy) is pretty much useless, and I agree with him.\r\n\r\nDo I still miss something else?\r\n\r\n\r\n  [1]: https://web.archive.org/web/20170313093438/blogs.oracle.com/briangoetz/entry/exception_transparency_in_java","title":"Java 8: Mandatory checked exceptions handling in lambda expressions. Why mandatory, not optional?","body":"<p>I'm playing with the new lambda features in Java 8, and found that the practices offered by Java 8 are really useful. However, I'm wondering is there a <em>good</em> way to make a work-around for the following scenario. Suppose you have an object pool wrapper that requires some kind of a factory to fill the object pool, for example (using <code>java.lang.functions.Factory</code>):</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class JdbcConnectionPool extends ObjectPool&lt;Connection&gt; {\n\n    public ConnectionPool(int maxConnections, String url) {\n        super(new Factory&lt;Connection&gt;() {\n            @Override\n            public Connection make() {\n                try {\n                    return DriverManager.getConnection(url);\n                } catch ( SQLException ex ) {\n                    throw new RuntimeException(ex);\n                }\n            }\n        }, maxConnections);\n    }\n\n}\n</code></pre>\n\n<p>After transforming the functional interface into lambda expression, the code above becomes like that:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class JdbcConnectionPool extends ObjectPool&lt;Connection&gt; {\n\n    public ConnectionPool(int maxConnections, String url) {\n        super(() -&gt; {\n            try {\n                return DriverManager.getConnection(url);\n            } catch ( SQLException ex ) {\n                throw new RuntimeException(ex);\n            }\n        }, maxConnections);\n    }\n\n}\n</code></pre>\n\n<p>Not so bad indeed, but the checked exception <code>java.sql.SQLException</code> requires a <code>try</code>/<code>catch</code> block inside the lambda. At my company we use two interfaces for long time:</p>\n\n<ul>\n<li><code>IOut&lt;T&gt;</code> that is an equivalent to <code>java.lang.functions.Factory</code>;</li>\n<li>and a special interface for the cases that usually require checked exceptions propagation: <code>interface IUnsafeOut&lt;T, E extends Throwable&gt; { T out() throws E; }</code>.</li>\n</ul>\n\n<p>Both <code>IOut&lt;T&gt;</code> and <code>IUnsafeOut&lt;T&gt;</code> are supposed to be removed during migration to Java 8, however there is no exact match for <code>IUnsafeOut&lt;T, E&gt;</code>. If the lambda expressions could deal with checked exceptions like they were unchecked, it could be possible to use simply like the following in the constructor above:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>super(() -&gt; DriverManager.getConnection(url), maxConnections);\n</code></pre>\n\n<p>That looks much cleaner. I see that I can rewrite the <code>ObjectPool</code> super class to accept our <code>IUnsafeOut&lt;T&gt;</code>, but as far as I know, Java 8 is not finished yet, so could be there some changes like:</p>\n\n<ul>\n<li>implementing something similar to <code>IUnsafeOut&lt;T, E&gt;</code>? (to be honest, I consider that dirty - the subject must choose what to accept: either <code>Factory</code> or \"unsafe factory\" that cannot have compatible method signatures)</li>\n<li>simply ignoring checked exceptions in lambdas, so no need in <code>IUnsafeOut&lt;T, E&gt;</code> surrogates? (why not? e.g. another important change: OpenJDK, that I use, <code>javac</code> now does not require variables and parameters to be declared as <code>final</code> to be captured in an anonymous class [functional interface] or lambda expression)</li>\n</ul>\n\n<p>So the question is generally is: is there a way to bypass checked exceptions in lambdas or is it planned in the future until Java 8 is finally released?</p>\n\n<hr>\n\n<p>Update 1</p>\n\n<p>Hm-m-m, as far as I understand what we currently have, it seems there is no way at the moment, despite the referenced article is dated from 2010: <a href=\"https://web.archive.org/web/20170313093438/blogs.oracle.com/briangoetz/entry/exception_transparency_in_java\" rel=\"noreferrer\">Brian Goetz explains exception transparency in Java</a>. If nothing changed much in Java 8, this could be considered an answer. Also Brian says that <code>interface ExceptionalCallable&lt;V, E extends Exception&gt;</code> (what I mentioned as <code>IUnsafeOut&lt;T, E extends Throwable&gt;</code> out of our code legacy) is pretty much useless, and I agree with him.</p>\n\n<p>Do I still miss something else?</p>\n"},{"tags":["java","xml","spring-boot","inheritance","mybatis"],"comments":[{"owner":{"account_id":1314580,"reputation":3289,"user_id":1261766,"display_name":"ave"},"score":0,"creation_date":1691250964,"post_id":76833590,"comment_id":135468146,"body_markdown":"I&#39;m not sure if I understand your question correctly, but see if this [answer](https://stackoverflow.com/a/76842401/1261766) helps.","body":"I&#39;m not sure if I understand your question correctly, but see if this <a href=\"https://stackoverflow.com/a/76842401/1261766\">answer</a> helps."}],"owner":{"account_id":29157610,"reputation":1,"user_id":22337038,"display_name":"DogFe"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691132082,"creation_date":1691132082,"question_id":76833590,"body_markdown":"First of all I apologize for my poor English skills.\r\n\r\nSo far, when designing a class that receives a request from a form, I have created each class separately.\r\n\r\nThis time, unlike before, we are trying to design a request class using inheritance.\r\n\r\nThis is my request classes and controller.\r\n\r\n\r\n\r\n\r\n```\r\n// super class\r\npublic abstract class MenuRequest {\r\n\r\n\t\r\n\tprivate String beginDate;\r\n\t\r\n\tprivate String endDate;\r\n\t\r\n\tprivate Integer restaurantId;\r\n\t\r\n\tprivate Integer mealId;\r\n\r\n}\r\n\r\n// sub class1\r\npublic class MenuListRequest extends MenuRequest{\r\n\r\n\tprivate Integer ingredientLook;\r\n\tprivate Integer currentPage;\r\n\tprivate Integer listCountPerPage;\r\n}\r\n\r\n// sub class2\r\npublic class MenuTableRequest extends MenuRequest {\r\n\r\n}\r\n\r\n// controller 1\r\n@Controller\r\npublic class MenuListController {\r\n\r\n\t@Autowired\r\n\tprivate MenuListServiceImpl menuListServiceImpl;\r\n\r\n\t@GetMapping(&quot;/list&quot;)\r\n\tpublic String getList(MenuListRequest menuListRequest, Model model) {\r\n\t\t...\r\n\t}\r\n\r\n}\r\n\r\n@Controller\r\npublic class MenuTableController {\r\n\t\r\n\t@Autowired\r\n\tprivate MenuTableServiceImpl menuTableServiceImpl;\r\n\t\r\n\t@GetMapping(&quot;/table&quot;)\r\n\tpublic String getTable(Model model, MenuTableRequest menuTableRequest) {\r\n\t\t...\r\n\t}\r\n}\r\n\r\n```\r\n\r\nAnd the mapper class and xml file are like this.\r\n\r\n```\r\n@Mapper\r\npublic interface MenuMapper {\r\n\r\n\tpublic List&lt;Menu&gt; selectMenuList(MenuRequest menuRequest);\r\n\r\n}\r\n\r\n\r\n// code in xml\r\n&lt;select id=&quot;selectMenuList&quot; resultType=&quot;com.sikdan.ojt.model.vo.Menu&quot;&gt;\r\n\r\n\t\tSELECT date_format(ymd, &#39;%Y-%m-%d&#39;) AS ymd, restaurant_nm, meal_nm, food_nm, ingredients_nm\r\n\t\tFROM cms_menu AS m\r\n\t\tLEFT JOIN cms_restaurant AS r\r\n\t\tON m.restaurant_id = r.restaurant_id\r\n\t\tLEFT JOIN cms_meal_division AS md\r\n\t\tON m.meal_id = md.meal_id\r\n\t\tLEFT JOIN cms_food AS f\r\n\t\tON m.food_id = f.food_id\r\n\t\t&lt;choose&gt;\r\n\t\t\t&lt;when test=&#39;ingredientLook == 2&#39;&gt;\r\n\t\t\t\tLEFT JOIN\r\n\t\t\t\t(\r\n\t\t\t\tSELECT food_id, group_concat(ingredients_nm) AS ingredients_nm\r\n\t\t\t\tFROM cms_recipe AS rc\r\n\t\t\t\tLEFT JOIN cms_ingredients AS i\r\n\t\t\t\tON\r\n\t\t\t\trc.ingredients_id = i.ingredients_id\r\n\t\t\t\tGROUP BY food_id\r\n\t\t\t\t) AS i\r\n\t\t\t\tON m.food_id = i.food_id\r\n\t\t\t&lt;/when&gt;\r\n\t\t\t&lt;otherwise&gt;\r\n\t\t\t\tRIGHT JOIN cms_recipe AS rc\r\n\t\t\t\tON m.food_id = rc.food_id\r\n\t\t\t\tLEFT JOIN cms_ingredients AS i\r\n\t\t\t\tON rc.ingredients_id = i.ingredients_id\r\n\t\t\t&lt;/otherwise&gt;\r\n\t\t&lt;/choose&gt;\r\n\t\tWHERE ymd BETWEEN #{beginDate} AND #{endDate}\r\n\t\t&lt;if test=&#39;restaurantId != null&#39;&gt;\r\n\t\t\tAND m.restaurant_id = #{restaurantId}\r\n\t\t&lt;/if&gt;\r\n\t\t&lt;if test=&#39;mealId != null&#39;&gt;\r\n\t\t\tAND m.meal_id = #{mealId}\r\n\t\t&lt;/if&gt;\r\n\t\tORDER BY ymd,\r\n\t\tm.restaurant_id,\r\n\t\tm.meal_id,\r\n\t\tm.food_id\r\n\t\t&lt;if test=&#39;ingredientLook != 2&#39;&gt;\r\n\t\t\t,rc.ingredients_id\r\n\t\t&lt;/if&gt;\r\n\t\t&lt;if test=&#39;listCountPerPage != null&#39;&gt;\r\n\t\t\tLIMIT #{currentPage}, #{listCountPerPage}\r\n\t\t&lt;/if&gt;\r\n&lt;/select&gt;\r\n```\r\n\r\nThe reason I wrote the code like this is because the type of List&lt;menu&gt; needed in the service is the same.\r\nHowever, the class returned to the controller in the service stage after request is different.\r\n\r\n\r\nSomeone might have predicted it, but the &#39;&lt;if test=&quot;ingredientLook == 1&quot;&gt;&#39; part was a problem and an error occurred. This seems to be because MenuTableRequest does not have a member variable called ingredientLook.\r\n\r\n\r\nI think there are two ways to solve this problem.\r\n1. It is not used in the MenuTableRequest class, but it is always treated as null by putting a variable called IngredientLook.\r\n2. Using separate methods in Mapper without using inheritance.\r\n\r\nI&#39;m wondering which of these is the better way. Or just wondering if there is a better way.\r\n\r\nThanks for reading.\r\n\r\n\r\n\r\n\r\nSince different forms call the list of same VO class, I tried to solve both tasks through one Mapper method by designing a request class through inheritance.","title":"Using SpringBoot2.7 and MyBatis 2.3 How can I code a cleaner request class structure?","body":"<p>First of all I apologize for my poor English skills.</p>\n<p>So far, when designing a class that receives a request from a form, I have created each class separately.</p>\n<p>This time, unlike before, we are trying to design a request class using inheritance.</p>\n<p>This is my request classes and controller.</p>\n<pre><code>// super class\npublic abstract class MenuRequest {\n\n    \n    private String beginDate;\n    \n    private String endDate;\n    \n    private Integer restaurantId;\n    \n    private Integer mealId;\n\n}\n\n// sub class1\npublic class MenuListRequest extends MenuRequest{\n\n    private Integer ingredientLook;\n    private Integer currentPage;\n    private Integer listCountPerPage;\n}\n\n// sub class2\npublic class MenuTableRequest extends MenuRequest {\n\n}\n\n// controller 1\n@Controller\npublic class MenuListController {\n\n    @Autowired\n    private MenuListServiceImpl menuListServiceImpl;\n\n    @GetMapping(&quot;/list&quot;)\n    public String getList(MenuListRequest menuListRequest, Model model) {\n        ...\n    }\n\n}\n\n@Controller\npublic class MenuTableController {\n    \n    @Autowired\n    private MenuTableServiceImpl menuTableServiceImpl;\n    \n    @GetMapping(&quot;/table&quot;)\n    public String getTable(Model model, MenuTableRequest menuTableRequest) {\n        ...\n    }\n}\n\n</code></pre>\n<p>And the mapper class and xml file are like this.</p>\n<pre><code>@Mapper\npublic interface MenuMapper {\n\n    public List&lt;Menu&gt; selectMenuList(MenuRequest menuRequest);\n\n}\n\n\n// code in xml\n&lt;select id=&quot;selectMenuList&quot; resultType=&quot;com.sikdan.ojt.model.vo.Menu&quot;&gt;\n\n        SELECT date_format(ymd, '%Y-%m-%d') AS ymd, restaurant_nm, meal_nm, food_nm, ingredients_nm\n        FROM cms_menu AS m\n        LEFT JOIN cms_restaurant AS r\n        ON m.restaurant_id = r.restaurant_id\n        LEFT JOIN cms_meal_division AS md\n        ON m.meal_id = md.meal_id\n        LEFT JOIN cms_food AS f\n        ON m.food_id = f.food_id\n        &lt;choose&gt;\n            &lt;when test='ingredientLook == 2'&gt;\n                LEFT JOIN\n                (\n                SELECT food_id, group_concat(ingredients_nm) AS ingredients_nm\n                FROM cms_recipe AS rc\n                LEFT JOIN cms_ingredients AS i\n                ON\n                rc.ingredients_id = i.ingredients_id\n                GROUP BY food_id\n                ) AS i\n                ON m.food_id = i.food_id\n            &lt;/when&gt;\n            &lt;otherwise&gt;\n                RIGHT JOIN cms_recipe AS rc\n                ON m.food_id = rc.food_id\n                LEFT JOIN cms_ingredients AS i\n                ON rc.ingredients_id = i.ingredients_id\n            &lt;/otherwise&gt;\n        &lt;/choose&gt;\n        WHERE ymd BETWEEN #{beginDate} AND #{endDate}\n        &lt;if test='restaurantId != null'&gt;\n            AND m.restaurant_id = #{restaurantId}\n        &lt;/if&gt;\n        &lt;if test='mealId != null'&gt;\n            AND m.meal_id = #{mealId}\n        &lt;/if&gt;\n        ORDER BY ymd,\n        m.restaurant_id,\n        m.meal_id,\n        m.food_id\n        &lt;if test='ingredientLook != 2'&gt;\n            ,rc.ingredients_id\n        &lt;/if&gt;\n        &lt;if test='listCountPerPage != null'&gt;\n            LIMIT #{currentPage}, #{listCountPerPage}\n        &lt;/if&gt;\n&lt;/select&gt;\n</code></pre>\n<p>The reason I wrote the code like this is because the type of List needed in the service is the same.\nHowever, the class returned to the controller in the service stage after request is different.</p>\n<p>Someone might have predicted it, but the '' part was a problem and an error occurred. This seems to be because MenuTableRequest does not have a member variable called ingredientLook.</p>\n<p>I think there are two ways to solve this problem.</p>\n<ol>\n<li>It is not used in the MenuTableRequest class, but it is always treated as null by putting a variable called IngredientLook.</li>\n<li>Using separate methods in Mapper without using inheritance.</li>\n</ol>\n<p>I'm wondering which of these is the better way. Or just wondering if there is a better way.</p>\n<p>Thanks for reading.</p>\n<p>Since different forms call the list of same VO class, I tried to solve both tasks through one Mapper method by designing a request class through inheritance.</p>\n"},{"tags":["java","windows","swing"],"comments":[{"owner":{"account_id":20650084,"reputation":2646,"user_id":15160601,"display_name":"zoldxk"},"score":0,"creation_date":1690404004,"post_id":76774460,"comment_id":135350670,"body_markdown":"I don&#39;t see where I mentioned **fixing code**","body":"I don&#39;t see where I mentioned <b>fixing code</b>"},{"owner":{"account_id":20650084,"reputation":2646,"user_id":15160601,"display_name":"zoldxk"},"score":0,"creation_date":1690406732,"post_id":76774460,"comment_id":135351112,"body_markdown":"I didn&#39;t metion something about fixing a code. I ask if there is a method or something in java to stop the delay that causes a black backgroud to be seen when resizing the frame,","body":"I didn&#39;t metion something about fixing a code. I ask if there is a method or something in java to stop the delay that causes a black backgroud to be seen when resizing the frame,"},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1690408145,"post_id":76774460,"comment_id":135351321,"body_markdown":"Possibly related questions (although hard to say for sure without your [MRE](https://stackoverflow.com/help/minimal-reproducible-example) code): [How to Remove Black Rectangle on Window Resize?](https://stackoverflow.com/a/67043322/), and [How to eliminate black lag area in Java Swing running on Windows](https://stackoverflow.com/q/66382178/)","body":"Possibly related questions (although hard to say for sure without your <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">MRE</a> code): <a href=\"https://stackoverflow.com/a/67043322/\">How to Remove Black Rectangle on Window Resize?</a>, and <a href=\"https://stackoverflow.com/q/66382178/\">How to eliminate black lag area in Java Swing running on Windows</a>"},{"owner":{"account_id":20650084,"reputation":2646,"user_id":15160601,"display_name":"zoldxk"},"score":0,"creation_date":1690478940,"post_id":76774460,"comment_id":135363147,"body_markdown":"@camickr you&#39;re right, thank you","body":"@camickr you&#39;re right, thank you"},{"owner":{"account_id":20650084,"reputation":2646,"user_id":15160601,"display_name":"zoldxk"},"score":0,"creation_date":1690479236,"post_id":76774460,"comment_id":135363198,"body_markdown":"@camickr I will ask if it is possible that you copy my code and run it so you can have a better understanding of my problem.","body":"@camickr I will ask if it is possible that you copy my code and run it so you can have a better understanding of my problem."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1690479990,"post_id":76774460,"comment_id":135363336,"body_markdown":"I did try the posted code. There is nothing wrong with it other than my comment about creating components on the EDT. I tested on Windows 11 using JDK 11. *I started a new java project with netbeans,* - did you try to just compile/execute from the command line. Maybe something in your IDE is not set up correctly. Did you try reinstalling the IDE and JDK?  I have nothing else to offer since this is basic code.","body":"I did try the posted code. There is nothing wrong with it other than my comment about creating components on the EDT. I tested on Windows 11 using JDK 11. <i>I started a new java project with netbeans,</i> - did you try to just compile/execute from the command line. Maybe something in your IDE is not set up correctly. Did you try reinstalling the IDE and JDK?  I have nothing else to offer since this is basic code."},{"owner":{"account_id":20650084,"reputation":2646,"user_id":15160601,"display_name":"zoldxk"},"score":0,"creation_date":1690480373,"post_id":76774460,"comment_id":135363408,"body_markdown":"I edited my post and added a gif, if you don&#39;t have the same problem so maybe it&#39;s a hardware problem","body":"I edited my post and added a gif, if you don&#39;t have the same problem so maybe it&#39;s a hardware problem"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1690480518,"post_id":76774460,"comment_id":135363435,"body_markdown":"And once again the posted code doesn&#39;t match the gif. The gif includes a label. We can&#39;t trust anything your post.","body":"And once again the posted code doesn&#39;t match the gif. The gif includes a label. We can&#39;t trust anything your post."},{"owner":{"account_id":20650084,"reputation":2646,"user_id":15160601,"display_name":"zoldxk"},"score":0,"creation_date":1690480981,"post_id":76774460,"comment_id":135363544,"body_markdown":"Yes but the problem isn&#39;t related to the code","body":"Yes but the problem isn&#39;t related to the code"},{"owner":{"account_id":20650084,"reputation":2646,"user_id":15160601,"display_name":"zoldxk"},"score":0,"creation_date":1690481078,"post_id":76774460,"comment_id":135363558,"body_markdown":"I took that gif from an unanswered question on stack overflow, the code has nothing to do with it, do you understand ?","body":"I took that gif from an unanswered question on stack overflow, the code has nothing to do with it, do you understand ?"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1690481502,"post_id":76774460,"comment_id":135363648,"body_markdown":"Any image/gif you post should match the code you post so we know we are seeing the behaviour of the posted code.","body":"Any image/gif you post should match the code you post so we know we are seeing the behaviour of the posted code."}],"answers":[{"tags":[],"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1690423279,"creation_date":1690423279,"answer_id":76776073,"question_id":76774460,"body_markdown":"&gt; I reduce this delay by setting a timer that revalidate and repaint the component every 100ms :\r\n&gt; \r\n&gt;     resizeTimer = new Timer(100, (e) -&gt; {\r\n&gt;            imagePanel.updateScaledImage();\r\n&gt;            revalidate();\r\n&gt;            repaint();\r\n&gt;     });    \r\n&gt; Is there a better way ?\r\n\r\nAhhh, I wouldn&#39;t be doing this constantly, if that&#39;s what you&#39;re doing, that&#39;s very expensive.\r\n\r\nIt is likely that `updateScaledImage` is blocking the Event Dispatching Thread, preventing the UI from been painted until it completes OR your paint routine is blocking the Event Dispatching Thread during a paint pass, but that&#39;s all just guess work, as you&#39;ve not provided a runnable example.\r\n\r\nAs stated, the likely cause is somewhere in your code, identifying it, is another issue.\r\n\r\nWhat I&#39;ve done in the past is used a &quot;coalescing callback&quot; coupled with a fast/low quality scaling approach.\r\n\r\nThis means, until there is a sufficient delay between resize events, I&#39;d be using a fast/low quality scaling approach to render &quot;something&quot; to the screen.  Once a &quot;sufficient delay&quot; between resize events occurs, then I&#39;d trigger a slow/high quality scale pass in a background thread, eventually updating the UI with this version.\r\n\r\nNow remember, Swing is single threaded and NOT thread safe.  This means you shouldn&#39;t be executing blocking or long running operations within the Event Dispatching Thread and you shouldn&#39;t be updating the UI (or any state the UI relies on) from outside the Event Dispatching Thread.\r\n\r\nTo this end, I&#39;ve made us of a Swing `Timer` (to act as my &quot;coalescing callback&quot; workflow) and a `SwingWorker` to perform the high quality scale.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n*nb: The original image is 1920x1080. I&#39;m also applying an `AlphaComposite` when the component is using the &quot;fast scaling&quot;, so you can see when the &quot;high quality&quot; image becomes available.*\r\n\r\n    import java.awt.AlphaComposite;\r\n    import java.awt.BorderLayout;\r\n    import java.awt.Dimension;\r\n    import java.awt.EventQueue;\r\n    import java.awt.Graphics;\r\n    import java.awt.Graphics2D;\r\n    import java.awt.RenderingHints;\r\n    import java.awt.Transparency;\r\n    import java.awt.event.ActionEvent;\r\n    import java.awt.event.ActionListener;\r\n    import java.awt.event.ComponentAdapter;\r\n    import java.awt.event.ComponentEvent;\r\n    import java.awt.image.BufferedImage;\r\n    import java.beans.PropertyChangeEvent;\r\n    import java.beans.PropertyChangeListener;\r\n    import java.io.IOException;\r\n    import java.time.Instant;\r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    import java.util.concurrent.ExecutionException;\r\n    import java.util.logging.Level;\r\n    import java.util.logging.Logger;\r\n    import javax.imageio.ImageIO;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JPanel;\r\n    import javax.swing.SwingWorker;\r\n    import javax.swing.Timer;\r\n\r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            new Main();\r\n        }\r\n\r\n        public Main() {\r\n            EventQueue.invokeLater(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    try {\r\n                        BufferedImage image = ImageIO.read(getClass().getResource(&quot;/images/Mando01.jpeg&quot;));\r\n                        JFrame frame = new JFrame();\r\n                        frame.add(new ImagePane(image));\r\n                        frame.pack();\r\n                        frame.setLocationRelativeTo(null);\r\n                        frame.setVisible(true);\r\n                    } catch (IOException ex) {\r\n                        Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        public class ImagePane extends JPanel {\r\n            private Timer resizeTimer;\r\n            private BufferedImage masterImage;\r\n            private BufferedImage scaledImage;\r\n            private Scaler scaler;\r\n\r\n            public ImagePane(BufferedImage masterImage) {\r\n                this.masterImage = masterImage;\r\n                this.scaledImage = masterImage;\r\n\r\n                scaler = new Scaler(masterImage);\r\n                // This timer is &quot;reset&quot; each time the component is resized\r\n                // This is an example of a &quot;coalescing callback&quot;.  This means, rather\r\n                // then responding to each resize event, which could cause a degradation\r\n                // of the performance, we wait until no new events have occured with\r\n                // a 250 millisecond period before we perform our action\r\n                resizeTimer = new Timer(250, new ActionListener() {\r\n                    private Object currentToken;\r\n                    // Adapter so we can extract the scaled image from the worker\r\n                    private SwingWorkerAdapter&lt;ResizeWorker&gt; workerAdapter = new SwingWorkerAdapter&lt;&gt;() {\r\n                        @Override\r\n                        protected void workerDone(ResizeWorker worker) {\r\n                            try {\r\n                                // The important part is the concept of the token\r\n                                // Because we can&#39;t &quot;stop&quot; the worker, we need some\r\n                                // to determine if we&#39;re interested in the results or\r\n                                // not.  This uses a token based approach, but you\r\n                                // could simply remove the adapter from the previous\r\n                                // worker and apply it to the new worker\r\n                                if (!worker.getToken().equals(currentToken)) {\r\n                                    return;\r\n                                }\r\n                                scaledImage = worker.get();\r\n                                repaint();\r\n                            } catch (InterruptedException ex) {\r\n                                Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);\r\n                            } catch (ExecutionException ex) {\r\n                                Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);\r\n                            }\r\n                        }\r\n                    };\r\n\r\n                    @Override\r\n                    public void actionPerformed(ActionEvent e) {\r\n                        // Just create something that is equatable and is relative\r\n                        // unique within your context\r\n                        currentToken = Instant.now();\r\n                        // Offload the work to a background thread, so we can keep\r\n                        // the UI responsive\r\n                        ResizeWorker worker = new ResizeWorker(currentToken, scaler, getSize());\r\n                        worker.addPropertyChangeListener(workerAdapter);\r\n                        worker.execute();\r\n                        repaint();\r\n                    }\r\n                });\r\n                resizeTimer.setRepeats(false);\r\n                addComponentListener(new ComponentAdapter() {\r\n                    @Override\r\n                    public void componentResized(ComponentEvent e) {\r\n                        scaledImage = null;\r\n                        resizeTimer.restart();\r\n                    }\r\n                });\r\n                setLayout(new BorderLayout());\r\n            }\r\n\r\n            @Override\r\n            public Dimension getPreferredSize() {\r\n                return new Dimension(scaledImage.getWidth(), scaledImage.getHeight());\r\n            }\r\n\r\n            @Override\r\n            protected void paintComponent(Graphics g) {\r\n                super.paintComponent(g);\r\n                Graphics2D g2d = (Graphics2D) g.create();\r\n                if (scaledImage != null) {\r\n                    int x = (getWidth() - scaledImage.getWidth()) / 2;\r\n                    int y = (getHeight() - scaledImage.getHeight()) / 2;\r\n                    g2d.drawImage(scaledImage, x, y, this);\r\n                } else {\r\n                    Dimension scaleSize = scaler.getScaledSizeToFill(getSize());\r\n                    int x = (getWidth() - scaleSize.width) / 2;\r\n                    int y = (getHeight() - scaleSize.height) / 2;\r\n                    // I&#39;ve just applied a alpha composite so I can see when we&#39;re\r\n                    // do a &quot;quick&quot; render\r\n                    g2d.setComposite(AlphaComposite.SrcOver.derive(0.1f));\r\n                    // This might not be the fastest method, but it is eaisly \r\n                    // available\r\n                    g2d.drawImage(masterImage, x, y, scaleSize.width, scaleSize.height, this);\r\n                }\r\n                g2d.dispose();\r\n            }\r\n        }\r\n\r\n        // This makes it easier to deal with the PropertyChangeListener support of\r\n        // SwingWorker and allows you to focus on only the states you are interested\r\n        // in\r\n        public class SwingWorkerAdapter&lt;W extends SwingWorker&gt; implements PropertyChangeListener {\r\n            @Override\r\n            public void propertyChange(PropertyChangeEvent evt) {\r\n                W worker = (W) evt.getSource();\r\n                switch (evt.getPropertyName()) {\r\n                    case &quot;state&quot;:\r\n                        workerStateChanged(worker);\r\n                        switch (worker.getState()) {\r\n                            case STARTED:\r\n                                workerStarted(worker);\r\n                                break;\r\n                            case DONE:\r\n                                workerDone(worker);\r\n                                break;\r\n                        }\r\n                        break;\r\n                    case &quot;progress&quot;:\r\n                        workerProgressUpdated(worker);\r\n                        break;\r\n                }\r\n            }\r\n\r\n            protected void workerProgressUpdated(W worker) {\r\n            }\r\n\r\n            protected void workerStateChanged(W worker) {\r\n            }\r\n\r\n            protected void workerStarted(W worker) {\r\n            }\r\n\r\n            protected void workerDone(W worker) {\r\n            }\r\n\r\n        }\r\n\r\n        // This SwingWorker performs the &quot;quality&quot; scaling workflow, which might\r\n        // take some time to execute, so we do it in the background\r\n        public class ResizeWorker extends SwingWorker&lt;BufferedImage, BufferedImage&gt; {\r\n            private Object token;\r\n            private Scaler scaler;\r\n            private Dimension targetSize;\r\n\r\n            public ResizeWorker(Object token, Scaler scaler, Dimension targetSize) {\r\n                this.token = token;\r\n                this.scaler = scaler;\r\n                this.targetSize = targetSize;\r\n            }\r\n\r\n            public Object getToken() {\r\n                return token;\r\n            }\r\n\r\n            @Override\r\n            protected BufferedImage doInBackground() throws Exception {\r\n                BufferedImage scaledImage = scaler.getScaledInstanceToFill(targetSize);\r\n                publish(scaledImage);\r\n                return scaledImage;\r\n            }\r\n        }\r\n\r\n        // Utility class that uses a &quot;divide and conqure&quot; approach to the scaling\r\n        // of images, this generally produces a higher quality image over using\r\n        // Image#getScaledInstance in a single step\r\n        public class Scaler {\r\n            private BufferedImage master;\r\n            private Dimension masterSize;\r\n\r\n            private Map&lt;RenderingHints.Key, Object&gt; renderingHints = new HashMap&lt;&gt;();\r\n\r\n            public Scaler(BufferedImage master) {\r\n                this.master = master;\r\n                masterSize = new Dimension(master.getWidth(), master.getHeight());\r\n                renderingHints.put(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);\r\n                renderingHints.put(RenderingHints.KEY_ALPHA_INTERPOLATION, RenderingHints.VALUE_ALPHA_INTERPOLATION_QUALITY);\r\n                renderingHints.put(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\r\n                renderingHints.put(RenderingHints.KEY_COLOR_RENDERING, RenderingHints.VALUE_COLOR_RENDER_QUALITY);\r\n                renderingHints.put(RenderingHints.KEY_DITHERING, RenderingHints.VALUE_DITHER_ENABLE);\r\n                renderingHints.put(RenderingHints.KEY_FRACTIONALMETRICS, RenderingHints.VALUE_FRACTIONALMETRICS_ON);\r\n                renderingHints.put(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);\r\n                renderingHints.put(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);\r\n                renderingHints.put(RenderingHints.KEY_STROKE_CONTROL, RenderingHints.VALUE_STROKE_PURE);\r\n            }\r\n\r\n            public BufferedImage getScaledInstanceToFit(Dimension size) {\r\n                return getScaledInstance(getScaleFactorToFit(size));\r\n            }\r\n\r\n            public BufferedImage getScaledInstanceToFill(Dimension size) {\r\n                return getScaledInstance(getScaleFactorToFill(size));\r\n            }\r\n\r\n            public Dimension getScaledSizeToFit(Dimension targetSize) {\r\n                return getScaledSizeForScaleFactor(getScaleFactorToFit(targetSize));\r\n            }\r\n\r\n            public Dimension getScaledSizeToFill(Dimension targetSize) {\r\n                return getScaledSizeForScaleFactor(getScaleFactorToFill(targetSize));\r\n            }\r\n\r\n            protected double getScaleFactor(int masterSize, int targetSize) {\r\n                return (double) targetSize / (double) masterSize;\r\n            }\r\n\r\n            protected double getScaleFactorToFit(Dimension toFit) {\r\n                double dScaleWidth = getScaleFactor(masterSize.width, toFit.width);\r\n                double dScaleHeight = getScaleFactor(masterSize.height, toFit.height);\r\n                return Math.min(dScaleHeight, dScaleWidth);\r\n            }\r\n\r\n            protected double getScaleFactorToFill(Dimension targetSize) {\r\n                double dScaleWidth = getScaleFactor(masterSize.width, targetSize.width);\r\n                double dScaleHeight = getScaleFactor(masterSize.height, targetSize.height);\r\n                return Math.max(dScaleHeight, dScaleWidth);\r\n            }\r\n\r\n            protected Dimension getScaledSizeForScaleFactor(double scaleFactor) {\r\n                int targetWidth = (int) Math.round(masterSize.getWidth() * scaleFactor);\r\n                int targetHeight = (int) Math.round(masterSize.getHeight() * scaleFactor);\r\n                return new Dimension(targetWidth, targetHeight);\r\n            }\r\n\r\n            protected BufferedImage getScaledInstance(double dScaleFactor) {\r\n                BufferedImage imgScale = master;\r\n                int targetWidth = (int) Math.round(masterSize.getWidth() * dScaleFactor);\r\n                int targetHeight = (int) Math.round(masterSize.getHeight() * dScaleFactor);\r\n\r\n                if (dScaleFactor &lt;= 1.0d) {\r\n                    imgScale = getScaledDownInstance(targetWidth, targetHeight);\r\n                } else {\r\n                    imgScale = getScaledUpInstance(targetWidth, targetHeight);\r\n                }\r\n\r\n                return imgScale;\r\n            }\r\n\r\n            protected BufferedImage getScaledDownInstance(\r\n                    int targetWidth,\r\n                    int targetHeight) {\r\n\r\n                int type = (master.getTransparency() == Transparency.OPAQUE)\r\n                        ? BufferedImage.TYPE_INT_RGB : BufferedImage.TYPE_INT_ARGB;\r\n\r\n                BufferedImage scaled = master;\r\n\r\n                if (targetHeight &gt; 0 || targetWidth &gt; 0) {\r\n                    int width = master.getWidth();\r\n                    int height = master.getHeight();\r\n\r\n                    do {\r\n                        if (width &gt; targetWidth) {\r\n                            width /= 2;\r\n                            if (width &lt; targetWidth) {\r\n                                width = targetWidth;\r\n                            }\r\n                        }\r\n                        if (height &gt; targetHeight) {\r\n                            height /= 2;\r\n                            if (height &lt; targetHeight) {\r\n                                height = targetHeight;\r\n                            }\r\n                        }\r\n\r\n                        BufferedImage tmp = new BufferedImage(Math.max(width, 1), Math.max(height, 1), type);\r\n                        Graphics2D g2 = tmp.createGraphics();\r\n                        g2.setRenderingHints(renderingHints);\r\n                        g2.drawImage(scaled, 0, 0, width, height, null);\r\n                        g2.dispose();\r\n\r\n                        scaled = tmp;\r\n                    } while (width != targetWidth || height != targetHeight);\r\n                } else {\r\n                    scaled = new BufferedImage(1, 1, type);\r\n                }\r\n\r\n                return scaled;\r\n            }\r\n\r\n            protected BufferedImage getScaledUpInstance(\r\n                    int targetWidth,\r\n                    int targetHeight) {\r\n\r\n                int type = BufferedImage.TYPE_INT_ARGB;\r\n\r\n                BufferedImage ret = (BufferedImage) master;\r\n                int width = master.getWidth();\r\n                int height = master.getHeight();\r\n\r\n                do {\r\n                    if (width &lt; targetWidth) {\r\n                        width *= 2;\r\n                        if (width &gt; targetWidth) {\r\n                            width = targetWidth;\r\n                        }\r\n                    }\r\n\r\n                    if (height &lt; targetHeight) {\r\n                        height *= 2;\r\n                        if (height &gt; targetHeight) {\r\n                            height = targetHeight;\r\n                        }\r\n                    }\r\n\r\n                    BufferedImage tmp = new BufferedImage(width, height, type);\r\n                    Graphics2D g2 = tmp.createGraphics();\r\n                    g2.setRenderingHints(renderingHints);\r\n                    g2.drawImage(ret, 0, 0, width, height, null);\r\n                    g2.dispose();\r\n\r\n                    ret = tmp;\r\n                } while (width != targetWidth || height != targetHeight);\r\n                return ret;\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/U7v3b.gif\r\n\r\nPlease beware, this is just one implementation of the described approach, you might find a different way to implement which better fits your own needs.","title":"Black background on fast resizing a JFrame on windows","body":"<blockquote>\n<p>I reduce this delay by setting a timer that revalidate and repaint the component every 100ms :</p>\n<pre><code>resizeTimer = new Timer(100, (e) -&gt; {\n       imagePanel.updateScaledImage();\n       revalidate();\n       repaint();\n});    \n</code></pre>\n<p>Is there a better way ?</p>\n</blockquote>\n<p>Ahhh, I wouldn't be doing this constantly, if that's what you're doing, that's very expensive.</p>\n<p>It is likely that <code>updateScaledImage</code> is blocking the Event Dispatching Thread, preventing the UI from been painted until it completes OR your paint routine is blocking the Event Dispatching Thread during a paint pass, but that's all just guess work, as you've not provided a runnable example.</p>\n<p>As stated, the likely cause is somewhere in your code, identifying it, is another issue.</p>\n<p>What I've done in the past is used a &quot;coalescing callback&quot; coupled with a fast/low quality scaling approach.</p>\n<p>This means, until there is a sufficient delay between resize events, I'd be using a fast/low quality scaling approach to render &quot;something&quot; to the screen.  Once a &quot;sufficient delay&quot; between resize events occurs, then I'd trigger a slow/high quality scale pass in a background thread, eventually updating the UI with this version.</p>\n<p>Now remember, Swing is single threaded and NOT thread safe.  This means you shouldn't be executing blocking or long running operations within the Event Dispatching Thread and you shouldn't be updating the UI (or any state the UI relies on) from outside the Event Dispatching Thread.</p>\n<p>To this end, I've made us of a Swing <code>Timer</code> (to act as my &quot;coalescing callback&quot; workflow) and a <code>SwingWorker</code> to perform the high quality scale.</p>\n<p><a href=\"https://i.stack.imgur.com/U7v3b.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/U7v3b.gif\" alt=\"enter image description here\" /></a></p>\n<p><em>nb: The original image is 1920x1080. I'm also applying an <code>AlphaComposite</code> when the component is using the &quot;fast scaling&quot;, so you can see when the &quot;high quality&quot; image becomes available.</em></p>\n<pre><code>import java.awt.AlphaComposite;\nimport java.awt.BorderLayout;\nimport java.awt.Dimension;\nimport java.awt.EventQueue;\nimport java.awt.Graphics;\nimport java.awt.Graphics2D;\nimport java.awt.RenderingHints;\nimport java.awt.Transparency;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.awt.event.ComponentAdapter;\nimport java.awt.event.ComponentEvent;\nimport java.awt.image.BufferedImage;\nimport java.beans.PropertyChangeEvent;\nimport java.beans.PropertyChangeListener;\nimport java.io.IOException;\nimport java.time.Instant;\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.concurrent.ExecutionException;\nimport java.util.logging.Level;\nimport java.util.logging.Logger;\nimport javax.imageio.ImageIO;\nimport javax.swing.JFrame;\nimport javax.swing.JPanel;\nimport javax.swing.SwingWorker;\nimport javax.swing.Timer;\n\npublic class Main {\n    public static void main(String[] args) {\n        new Main();\n    }\n\n    public Main() {\n        EventQueue.invokeLater(new Runnable() {\n            @Override\n            public void run() {\n                try {\n                    BufferedImage image = ImageIO.read(getClass().getResource(&quot;/images/Mando01.jpeg&quot;));\n                    JFrame frame = new JFrame();\n                    frame.add(new ImagePane(image));\n                    frame.pack();\n                    frame.setLocationRelativeTo(null);\n                    frame.setVisible(true);\n                } catch (IOException ex) {\n                    Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);\n                }\n            }\n        });\n    }\n\n    public class ImagePane extends JPanel {\n        private Timer resizeTimer;\n        private BufferedImage masterImage;\n        private BufferedImage scaledImage;\n        private Scaler scaler;\n\n        public ImagePane(BufferedImage masterImage) {\n            this.masterImage = masterImage;\n            this.scaledImage = masterImage;\n\n            scaler = new Scaler(masterImage);\n            // This timer is &quot;reset&quot; each time the component is resized\n            // This is an example of a &quot;coalescing callback&quot;.  This means, rather\n            // then responding to each resize event, which could cause a degradation\n            // of the performance, we wait until no new events have occured with\n            // a 250 millisecond period before we perform our action\n            resizeTimer = new Timer(250, new ActionListener() {\n                private Object currentToken;\n                // Adapter so we can extract the scaled image from the worker\n                private SwingWorkerAdapter&lt;ResizeWorker&gt; workerAdapter = new SwingWorkerAdapter&lt;&gt;() {\n                    @Override\n                    protected void workerDone(ResizeWorker worker) {\n                        try {\n                            // The important part is the concept of the token\n                            // Because we can't &quot;stop&quot; the worker, we need some\n                            // to determine if we're interested in the results or\n                            // not.  This uses a token based approach, but you\n                            // could simply remove the adapter from the previous\n                            // worker and apply it to the new worker\n                            if (!worker.getToken().equals(currentToken)) {\n                                return;\n                            }\n                            scaledImage = worker.get();\n                            repaint();\n                        } catch (InterruptedException ex) {\n                            Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);\n                        } catch (ExecutionException ex) {\n                            Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);\n                        }\n                    }\n                };\n\n                @Override\n                public void actionPerformed(ActionEvent e) {\n                    // Just create something that is equatable and is relative\n                    // unique within your context\n                    currentToken = Instant.now();\n                    // Offload the work to a background thread, so we can keep\n                    // the UI responsive\n                    ResizeWorker worker = new ResizeWorker(currentToken, scaler, getSize());\n                    worker.addPropertyChangeListener(workerAdapter);\n                    worker.execute();\n                    repaint();\n                }\n            });\n            resizeTimer.setRepeats(false);\n            addComponentListener(new ComponentAdapter() {\n                @Override\n                public void componentResized(ComponentEvent e) {\n                    scaledImage = null;\n                    resizeTimer.restart();\n                }\n            });\n            setLayout(new BorderLayout());\n        }\n\n        @Override\n        public Dimension getPreferredSize() {\n            return new Dimension(scaledImage.getWidth(), scaledImage.getHeight());\n        }\n\n        @Override\n        protected void paintComponent(Graphics g) {\n            super.paintComponent(g);\n            Graphics2D g2d = (Graphics2D) g.create();\n            if (scaledImage != null) {\n                int x = (getWidth() - scaledImage.getWidth()) / 2;\n                int y = (getHeight() - scaledImage.getHeight()) / 2;\n                g2d.drawImage(scaledImage, x, y, this);\n            } else {\n                Dimension scaleSize = scaler.getScaledSizeToFill(getSize());\n                int x = (getWidth() - scaleSize.width) / 2;\n                int y = (getHeight() - scaleSize.height) / 2;\n                // I've just applied a alpha composite so I can see when we're\n                // do a &quot;quick&quot; render\n                g2d.setComposite(AlphaComposite.SrcOver.derive(0.1f));\n                // This might not be the fastest method, but it is eaisly \n                // available\n                g2d.drawImage(masterImage, x, y, scaleSize.width, scaleSize.height, this);\n            }\n            g2d.dispose();\n        }\n    }\n\n    // This makes it easier to deal with the PropertyChangeListener support of\n    // SwingWorker and allows you to focus on only the states you are interested\n    // in\n    public class SwingWorkerAdapter&lt;W extends SwingWorker&gt; implements PropertyChangeListener {\n        @Override\n        public void propertyChange(PropertyChangeEvent evt) {\n            W worker = (W) evt.getSource();\n            switch (evt.getPropertyName()) {\n                case &quot;state&quot;:\n                    workerStateChanged(worker);\n                    switch (worker.getState()) {\n                        case STARTED:\n                            workerStarted(worker);\n                            break;\n                        case DONE:\n                            workerDone(worker);\n                            break;\n                    }\n                    break;\n                case &quot;progress&quot;:\n                    workerProgressUpdated(worker);\n                    break;\n            }\n        }\n\n        protected void workerProgressUpdated(W worker) {\n        }\n\n        protected void workerStateChanged(W worker) {\n        }\n\n        protected void workerStarted(W worker) {\n        }\n\n        protected void workerDone(W worker) {\n        }\n\n    }\n\n    // This SwingWorker performs the &quot;quality&quot; scaling workflow, which might\n    // take some time to execute, so we do it in the background\n    public class ResizeWorker extends SwingWorker&lt;BufferedImage, BufferedImage&gt; {\n        private Object token;\n        private Scaler scaler;\n        private Dimension targetSize;\n\n        public ResizeWorker(Object token, Scaler scaler, Dimension targetSize) {\n            this.token = token;\n            this.scaler = scaler;\n            this.targetSize = targetSize;\n        }\n\n        public Object getToken() {\n            return token;\n        }\n\n        @Override\n        protected BufferedImage doInBackground() throws Exception {\n            BufferedImage scaledImage = scaler.getScaledInstanceToFill(targetSize);\n            publish(scaledImage);\n            return scaledImage;\n        }\n    }\n\n    // Utility class that uses a &quot;divide and conqure&quot; approach to the scaling\n    // of images, this generally produces a higher quality image over using\n    // Image#getScaledInstance in a single step\n    public class Scaler {\n        private BufferedImage master;\n        private Dimension masterSize;\n\n        private Map&lt;RenderingHints.Key, Object&gt; renderingHints = new HashMap&lt;&gt;();\n\n        public Scaler(BufferedImage master) {\n            this.master = master;\n            masterSize = new Dimension(master.getWidth(), master.getHeight());\n            renderingHints.put(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);\n            renderingHints.put(RenderingHints.KEY_ALPHA_INTERPOLATION, RenderingHints.VALUE_ALPHA_INTERPOLATION_QUALITY);\n            renderingHints.put(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\n            renderingHints.put(RenderingHints.KEY_COLOR_RENDERING, RenderingHints.VALUE_COLOR_RENDER_QUALITY);\n            renderingHints.put(RenderingHints.KEY_DITHERING, RenderingHints.VALUE_DITHER_ENABLE);\n            renderingHints.put(RenderingHints.KEY_FRACTIONALMETRICS, RenderingHints.VALUE_FRACTIONALMETRICS_ON);\n            renderingHints.put(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);\n            renderingHints.put(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);\n            renderingHints.put(RenderingHints.KEY_STROKE_CONTROL, RenderingHints.VALUE_STROKE_PURE);\n        }\n\n        public BufferedImage getScaledInstanceToFit(Dimension size) {\n            return getScaledInstance(getScaleFactorToFit(size));\n        }\n\n        public BufferedImage getScaledInstanceToFill(Dimension size) {\n            return getScaledInstance(getScaleFactorToFill(size));\n        }\n\n        public Dimension getScaledSizeToFit(Dimension targetSize) {\n            return getScaledSizeForScaleFactor(getScaleFactorToFit(targetSize));\n        }\n\n        public Dimension getScaledSizeToFill(Dimension targetSize) {\n            return getScaledSizeForScaleFactor(getScaleFactorToFill(targetSize));\n        }\n\n        protected double getScaleFactor(int masterSize, int targetSize) {\n            return (double) targetSize / (double) masterSize;\n        }\n\n        protected double getScaleFactorToFit(Dimension toFit) {\n            double dScaleWidth = getScaleFactor(masterSize.width, toFit.width);\n            double dScaleHeight = getScaleFactor(masterSize.height, toFit.height);\n            return Math.min(dScaleHeight, dScaleWidth);\n        }\n\n        protected double getScaleFactorToFill(Dimension targetSize) {\n            double dScaleWidth = getScaleFactor(masterSize.width, targetSize.width);\n            double dScaleHeight = getScaleFactor(masterSize.height, targetSize.height);\n            return Math.max(dScaleHeight, dScaleWidth);\n        }\n\n        protected Dimension getScaledSizeForScaleFactor(double scaleFactor) {\n            int targetWidth = (int) Math.round(masterSize.getWidth() * scaleFactor);\n            int targetHeight = (int) Math.round(masterSize.getHeight() * scaleFactor);\n            return new Dimension(targetWidth, targetHeight);\n        }\n\n        protected BufferedImage getScaledInstance(double dScaleFactor) {\n            BufferedImage imgScale = master;\n            int targetWidth = (int) Math.round(masterSize.getWidth() * dScaleFactor);\n            int targetHeight = (int) Math.round(masterSize.getHeight() * dScaleFactor);\n\n            if (dScaleFactor &lt;= 1.0d) {\n                imgScale = getScaledDownInstance(targetWidth, targetHeight);\n            } else {\n                imgScale = getScaledUpInstance(targetWidth, targetHeight);\n            }\n\n            return imgScale;\n        }\n\n        protected BufferedImage getScaledDownInstance(\n                int targetWidth,\n                int targetHeight) {\n\n            int type = (master.getTransparency() == Transparency.OPAQUE)\n                    ? BufferedImage.TYPE_INT_RGB : BufferedImage.TYPE_INT_ARGB;\n\n            BufferedImage scaled = master;\n\n            if (targetHeight &gt; 0 || targetWidth &gt; 0) {\n                int width = master.getWidth();\n                int height = master.getHeight();\n\n                do {\n                    if (width &gt; targetWidth) {\n                        width /= 2;\n                        if (width &lt; targetWidth) {\n                            width = targetWidth;\n                        }\n                    }\n                    if (height &gt; targetHeight) {\n                        height /= 2;\n                        if (height &lt; targetHeight) {\n                            height = targetHeight;\n                        }\n                    }\n\n                    BufferedImage tmp = new BufferedImage(Math.max(width, 1), Math.max(height, 1), type);\n                    Graphics2D g2 = tmp.createGraphics();\n                    g2.setRenderingHints(renderingHints);\n                    g2.drawImage(scaled, 0, 0, width, height, null);\n                    g2.dispose();\n\n                    scaled = tmp;\n                } while (width != targetWidth || height != targetHeight);\n            } else {\n                scaled = new BufferedImage(1, 1, type);\n            }\n\n            return scaled;\n        }\n\n        protected BufferedImage getScaledUpInstance(\n                int targetWidth,\n                int targetHeight) {\n\n            int type = BufferedImage.TYPE_INT_ARGB;\n\n            BufferedImage ret = (BufferedImage) master;\n            int width = master.getWidth();\n            int height = master.getHeight();\n\n            do {\n                if (width &lt; targetWidth) {\n                    width *= 2;\n                    if (width &gt; targetWidth) {\n                        width = targetWidth;\n                    }\n                }\n\n                if (height &lt; targetHeight) {\n                    height *= 2;\n                    if (height &gt; targetHeight) {\n                        height = targetHeight;\n                    }\n                }\n\n                BufferedImage tmp = new BufferedImage(width, height, type);\n                Graphics2D g2 = tmp.createGraphics();\n                g2.setRenderingHints(renderingHints);\n                g2.drawImage(ret, 0, 0, width, height, null);\n                g2.dispose();\n\n                ret = tmp;\n            } while (width != targetWidth || height != targetHeight);\n            return ret;\n        }\n    }\n}\n</code></pre>\n<p>Please beware, this is just one implementation of the described approach, you might find a different way to implement which better fits your own needs.</p>\n"},{"tags":[],"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690481358,"creation_date":1690481358,"answer_id":76782400,"question_id":76774460,"body_markdown":"I did find a Toolkit property that causes the behaviour you describe:\r\n\r\n    import java.awt.*;\r\n    import javax.swing.*;\r\n    \r\n    public class SimpleJFrameExample {\r\n        public static void main(String[] args) {\r\n    \r\n    \t\tToolkit.getDefaultToolkit().setDynamicLayout(false);\r\n    \r\n            // Create a new JFrame\r\n            JFrame frame = new JFrame();\r\n    \r\n            // Set the size of the JFrame\r\n            frame.setSize(400, 300);\r\n    \r\n            // Make the JFrame visible\r\n            frame.setVisible(true);\r\n    \r\n            // Set the default close operation when the user clicks the close button\r\n            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        }\r\n    }\r\n\r\nIf I change it back to &quot;true&quot; the issue goes away:\r\n\r\n\t//Toolkit.getDefaultToolkit().setDynamicLayout(false);\r\n\tToolkit.getDefaultToolkit().setDynamicLayout(true);\r\n\r\nDon&#39;t know how or where this property might be set to &quot;false&quot; by default.","title":"Black background on fast resizing a JFrame on windows","body":"<p>I did find a Toolkit property that causes the behaviour you describe:</p>\n<pre><code>import java.awt.*;\nimport javax.swing.*;\n\npublic class SimpleJFrameExample {\n    public static void main(String[] args) {\n\n        Toolkit.getDefaultToolkit().setDynamicLayout(false);\n\n        // Create a new JFrame\n        JFrame frame = new JFrame();\n\n        // Set the size of the JFrame\n        frame.setSize(400, 300);\n\n        // Make the JFrame visible\n        frame.setVisible(true);\n\n        // Set the default close operation when the user clicks the close button\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n    }\n}\n</code></pre>\n<p>If I change it back to &quot;true&quot; the issue goes away:</p>\n<pre><code>//Toolkit.getDefaultToolkit().setDynamicLayout(false);\nToolkit.getDefaultToolkit().setDynamicLayout(true);\n</code></pre>\n<p>Don't know how or where this property might be set to &quot;false&quot; by default.</p>\n"}],"owner":{"account_id":20650084,"reputation":2646,"user_id":15160601,"display_name":"zoldxk"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":186,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":76776073,"answer_count":2,"score":1,"last_activity_date":1691131240,"creation_date":1690399708,"question_id":76774460,"body_markdown":"I started a new java project with netbeans, I created a `JFrame` then I launched my app then I noticed a black background that appears when resizing the window\r\n```\r\nimport javax.swing.JFrame;\r\n\r\npublic class SimpleJFrameExample {\r\n    public static void main(String[] args) {\r\n        // Create a new JFrame\r\n        JFrame frame = new JFrame();\r\n\r\n        // Set the size of the JFrame\r\n        frame.setSize(400, 300);\r\n\r\n        // Make the JFrame visible\r\n        frame.setVisible(true);\r\n\r\n        // Set the default close operation when the user clicks the close button\r\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n    }\r\n}\r\n```\r\n\r\n[![enter image description here][1]][1]\r\n\r\nAs you can see there is a black backgroung that shows (in this case I&#39;, resizing to the right).\r\n\r\nI found that :\r\n&gt;This apparently has to do with the native window decorations of the window that hosts the JFrame\r\n\r\nfrom this [answer](https://stackoverflow.com/a/67043322/15160601) and it was proposing to use [`JFrame.setDefaultLookAndFeelDecorated(boolean)`](https://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html) .\r\nI tried it and I got :\r\n\r\n[![enter image description here][2]][2]\r\n\r\nwhich works and doesn&#39;t show any background when resuzing but is not what I want my window to look like so I was wondering if there is\r\na way to stop this effect and keep the normal window decoration.\r\n\r\n[![enter image description here][3]][3]\r\n\r\n  [1]: https://i.stack.imgur.com/gcLz5l.png\r\n  [2]: https://i.stack.imgur.com/t0chJl.png\r\n  [3]: https://i.stack.imgur.com/a6HyI.gif","title":"Black background on fast resizing a JFrame on windows","body":"<p>I started a new java project with netbeans, I created a <code>JFrame</code> then I launched my app then I noticed a black background that appears when resizing the window</p>\n<pre><code>import javax.swing.JFrame;\n\npublic class SimpleJFrameExample {\n    public static void main(String[] args) {\n        // Create a new JFrame\n        JFrame frame = new JFrame();\n\n        // Set the size of the JFrame\n        frame.setSize(400, 300);\n\n        // Make the JFrame visible\n        frame.setVisible(true);\n\n        // Set the default close operation when the user clicks the close button\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/gcLz5l.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gcLz5l.png\" alt=\"enter image description here\" /></a></p>\n<p>As you can see there is a black backgroung that shows (in this case I', resizing to the right).</p>\n<p>I found that :</p>\n<blockquote>\n<p>This apparently has to do with the native window decorations of the window that hosts the JFrame</p>\n</blockquote>\n<p>from this <a href=\"https://stackoverflow.com/a/67043322/15160601\">answer</a> and it was proposing to use <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html\" rel=\"nofollow noreferrer\"><code>JFrame.setDefaultLookAndFeelDecorated(boolean)</code></a> .\nI tried it and I got :</p>\n<p><a href=\"https://i.stack.imgur.com/t0chJl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/t0chJl.png\" alt=\"enter image description here\" /></a></p>\n<p>which works and doesn't show any background when resuzing but is not what I want my window to look like so I was wondering if there is\na way to stop this effect and keep the normal window decoration.</p>\n<p><a href=\"https://i.stack.imgur.com/a6HyI.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/a6HyI.gif\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","collision-detection"],"answers":[{"tags":[],"owner":{"account_id":14349,"reputation":4064,"user_id":29445,"accept_rate":100,"display_name":"asleep"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1465763839,"creation_date":1228255447,"answer_id":335632,"question_id":335600,"body_markdown":"Use a rectangle to surround each player and enemy, the height and width of the rectangles should correspond to the object you&#39;re surrounding, imagine it being in a box only big enough to fit it.\r\n\r\n\r\nNow, you move these rectangles the same as you do the objects, so they have a &#39;bounding box&#39;\r\n\r\nI&#39;m not sure if Java has this, but it might have a method on the rectangle object called .intersects() so you&#39;d do if(rectangle1.intersectS(rectangle2) to check to see if an object has collided with another.\r\n\r\nOtherwise you can get the x and y co-ordinates of the boxes and using the height/width of them detect whether they&#39;ve intersected yourself.\r\n\r\n\r\nAnyway, you can use that to either do an event on intersection (make one explode, or whatever) or prevent the movement from being drawn. (revert to previous co-ordinates)\r\n\r\n\r\n\r\nedit: here we go\r\n\r\n boolean\t\r\n\r\n&gt; intersects(Rectangle r) \r\n&gt;           Determines whether or not this Rectangle and the specified\r\n&gt; Rectangle intersect.\r\n\r\n\r\nSo I would do (and don&#39;t paste this code, it most likely won&#39;t work, not done java for a long time and I didn&#39;t do graphics when I did use it.)\r\n\r\n\r\n    Rectangle rect1 = new Rectangle(player.x, player.y, player.width, player.height);\r\n    \r\n    Rectangle rect2 = new Rectangle(enemy.x, enemy.y, enemy.width, enemy.height);\r\n    \r\n    //detects when the two rectangles hit\r\n    if(rect1.intersects(rect2))\r\n    {\r\n    \r\n    System.out.println(&quot;game over, g&quot;);\r\n    }\r\n\r\nobviously you&#39;d need to fit that in somewhere.\r\n","title":"Collision Detection between two images in Java","body":"<p>Use a rectangle to surround each player and enemy, the height and width of the rectangles should correspond to the object you're surrounding, imagine it being in a box only big enough to fit it.</p>\n\n<p>Now, you move these rectangles the same as you do the objects, so they have a 'bounding box'</p>\n\n<p>I'm not sure if Java has this, but it might have a method on the rectangle object called .intersects() so you'd do if(rectangle1.intersectS(rectangle2) to check to see if an object has collided with another.</p>\n\n<p>Otherwise you can get the x and y co-ordinates of the boxes and using the height/width of them detect whether they've intersected yourself.</p>\n\n<p>Anyway, you can use that to either do an event on intersection (make one explode, or whatever) or prevent the movement from being drawn. (revert to previous co-ordinates)</p>\n\n<p>edit: here we go</p>\n\n<p>boolean    </p>\n\n<blockquote>\n  <p>intersects(Rectangle r) \n            Determines whether or not this Rectangle and the specified\n  Rectangle intersect.</p>\n</blockquote>\n\n<p>So I would do (and don't paste this code, it most likely won't work, not done java for a long time and I didn't do graphics when I did use it.)</p>\n\n<pre><code>Rectangle rect1 = new Rectangle(player.x, player.y, player.width, player.height);\n\nRectangle rect2 = new Rectangle(enemy.x, enemy.y, enemy.width, enemy.height);\n\n//detects when the two rectangles hit\nif(rect1.intersects(rect2))\n{\n\nSystem.out.println(\"game over, g\");\n}\n</code></pre>\n\n<p>obviously you'd need to fit that in somewhere.</p>\n"},{"tags":[],"owner":{"account_id":16527,"reputation":8987,"user_id":36093,"accept_rate":100,"display_name":"Karl"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1228256776,"creation_date":1228256776,"answer_id":335686,"question_id":335600,"body_markdown":"You don&#39;t want to have the collision check code inside the painting code.  The painting needs to be fast.  Collision can go in the game loop.  Therefore you need an internal representation of the objects independent of their sprites.  ","title":"Collision Detection between two images in Java","body":"<p>You don't want to have the collision check code inside the painting code.  The painting needs to be fast.  Collision can go in the game loop.  Therefore you need an internal representation of the objects independent of their sprites.  </p>\n"},{"tags":[],"owner":{"display_name":"user29053"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1228258655,"creation_date":1228258655,"answer_id":335758,"question_id":335600,"body_markdown":"Since Java doesn&#39;t have an intersect function (really!?) you can do collision detection by simply comparying the X and Y, Width and Height values of the bounding boxes (rectangle) for each of the objects that could potentially collide.\r\n\r\nSo...  in the base object of each colliding object... i.e. if your player and enemy have a common base you can put a simple Rectangle object called something like BoundingBox.  If the common base is a built in Java class then you&#39;ll need to create a class that extends the build in class and have the player and enemy objects extend your new class or are instances of that class.\r\n\r\nAt creation (and each tick or update) you&#39;ll need to set the BoundingBox paremeters for both your player and enemy.  I don&#39;t have the Rectangle class infront of me but its most likely something like X, Y, Width and finally Height.  X and Y are that objects location in your game world.  The width and height are self explanatory I think.  They&#39;ll most likely come out from the right of the players location though so, if the X and Y were bothe at 0 and your Width and Height were both at 256 you wouldn&#39;t see anything because the character would be at the top left outside of the screen.\r\n\r\nAnyways... to detect a collision, you&#39;ll want to compare the attributes of the player and enemy BoundingBoxes.  So something like this...\r\n\r\n     if( Player.BoundingBox.X = Enemy.BoundingBox.X &amp;&amp; If( Player.BoundingBox.Y = Enemy.BoundingBox.Y )\r\n     {\r\n          //Oh noes!  The enemy and player are on top of eachother.\r\n     }\r\n\r\nThe logic can get sort of complicated but you&#39;ll need to compare the distances between each BoundingBox and compare locations.","title":"Collision Detection between two images in Java","body":"<p>Since Java doesn't have an intersect function (really!?) you can do collision detection by simply comparying the X and Y, Width and Height values of the bounding boxes (rectangle) for each of the objects that could potentially collide.</p>\n\n<p>So...  in the base object of each colliding object... i.e. if your player and enemy have a common base you can put a simple Rectangle object called something like BoundingBox.  If the common base is a built in Java class then you'll need to create a class that extends the build in class and have the player and enemy objects extend your new class or are instances of that class.</p>\n\n<p>At creation (and each tick or update) you'll need to set the BoundingBox paremeters for both your player and enemy.  I don't have the Rectangle class infront of me but its most likely something like X, Y, Width and finally Height.  X and Y are that objects location in your game world.  The width and height are self explanatory I think.  They'll most likely come out from the right of the players location though so, if the X and Y were bothe at 0 and your Width and Height were both at 256 you wouldn't see anything because the character would be at the top left outside of the screen.</p>\n\n<p>Anyways... to detect a collision, you'll want to compare the attributes of the player and enemy BoundingBoxes.  So something like this...</p>\n\n<pre><code> if( Player.BoundingBox.X = Enemy.BoundingBox.X &amp;&amp; If( Player.BoundingBox.Y = Enemy.BoundingBox.Y )\n {\n      //Oh noes!  The enemy and player are on top of eachother.\n }\n</code></pre>\n\n<p>The logic can get sort of complicated but you'll need to compare the distances between each BoundingBox and compare locations.</p>\n"},{"tags":[],"owner":{"account_id":10836,"reputation":196641,"user_id":20654,"accept_rate":80,"display_name":"OscarRyz"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1228260492,"creation_date":1228260492,"answer_id":335809,"question_id":335600,"body_markdown":"Here&#39;s a useful of an open source game that uses a lot of collisions: &lt;http://robocode.sourceforge.net/&gt; \r\n\r\nYou may take a look at the code and complement with the answers written here.","title":"Collision Detection between two images in Java","body":"<p>Here's a useful of an open source game that uses a lot of collisions: <a href=\"http://robocode.sourceforge.net/\" rel=\"nofollow noreferrer\">http://robocode.sourceforge.net/</a> </p>\n\n<p>You may take a look at the code and complement with the answers written here.</p>\n"},{"tags":[],"owner":{"account_id":1472,"reputation":173285,"user_id":1965,"accept_rate":50,"display_name":"FlySwat"},"down_vote_count":0,"up_vote_count":23,"is_accepted":true,"score":23,"last_activity_date":1228261303,"creation_date":1228260925,"answer_id":335830,"question_id":335600,"body_markdown":"I think your problem is that you are not using good OO design for your player and enemies. Create two classes:\r\n\r\n    public class Player\r\n    {\r\n        int X;\r\n        int Y;\r\n        int Width;\r\n        int Height;\r\n    \r\n        // Getters and Setters\r\n    }\r\n    \r\n    public class Enemy\r\n    {\r\n        int X;\r\n        int Y;\r\n        int Width;\r\n        int Height;\r\n    \r\n        // Getters and Setters\r\n    }\r\n\r\nYour Player should have X,Y,Width,and Height variables.\r\n\r\nYour enemies should as well.\r\n\r\nIn your game loop, do something like this (C#):\r\n\r\n    foreach (Enemy e in EnemyCollection)\r\n    {\r\n        Rectangle r = new Rectangle(e.X,e.Y,e.Width,e.Height);\r\n        Rectangle p = new Rectangle(player.X,player.Y,player.Width,player.Height);\r\n    \r\n        // Assuming there is an intersect method, otherwise just handcompare the values\r\n        if (r.Intersects(p))\r\n        {\r\n           // A Collision!\r\n           // we know which enemy (e), so we can call e.DoCollision();\r\n           e.DoCollision();\r\n        }\r\n    }\r\n\r\nTo speed things up, don&#39;t bother checking if the enemies coords are offscreen.\r\n","title":"Collision Detection between two images in Java","body":"<p>I think your problem is that you are not using good OO design for your player and enemies. Create two classes:</p>\n\n<pre><code>public class Player\n{\n    int X;\n    int Y;\n    int Width;\n    int Height;\n\n    // Getters and Setters\n}\n\npublic class Enemy\n{\n    int X;\n    int Y;\n    int Width;\n    int Height;\n\n    // Getters and Setters\n}\n</code></pre>\n\n<p>Your Player should have X,Y,Width,and Height variables.</p>\n\n<p>Your enemies should as well.</p>\n\n<p>In your game loop, do something like this (C#):</p>\n\n<pre><code>foreach (Enemy e in EnemyCollection)\n{\n    Rectangle r = new Rectangle(e.X,e.Y,e.Width,e.Height);\n    Rectangle p = new Rectangle(player.X,player.Y,player.Width,player.Height);\n\n    // Assuming there is an intersect method, otherwise just handcompare the values\n    if (r.Intersects(p))\n    {\n       // A Collision!\n       // we know which enemy (e), so we can call e.DoCollision();\n       e.DoCollision();\n    }\n}\n</code></pre>\n\n<p>To speed things up, don't bother checking if the enemies coords are offscreen.</p>\n"},{"tags":[],"owner":{"account_id":15903,"reputation":323433,"user_id":34088,"accept_rate":77,"display_name":"Aaron Digulla"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1228296491,"creation_date":1228296491,"answer_id":336615,"question_id":335600,"body_markdown":"First, use the bounding boxes as described by [Jonathan Holland](https://stackoverflow.com/questions/335600/collision-detection-between-two-images-in-java#335632) to find if you may have a collision.\r\n\r\nFrom the (multi-color) sprites, create black and white versions. You probably already have these if your sprites are transparent (i.e. there are places which are inside the bounding box but you can still see the background). These are &quot;masks&quot;.\r\n\r\nUse `Image.getRGB()` on the mask to get at the pixels. For each pixel which isn&#39;t transparent, set a bit in an integer array (`playerArray` and `enemyArray` below). The size of the array is `height` if `width &lt;= 32` pixels, `(width+31)/32*height` otherwise. The code below is for `width &lt;= 32`.\r\n\r\nIf you have a collision of the bounding boxes, do this:\r\n\r\n    // Find the first line where the two sprites might overlap\r\n    int linePlayer, lineEnemy;\r\n    if (player.y &lt;= enemy.y) {\r\n        linePlayer = enemy.y - player.y;\r\n        lineEnemy = 0;\r\n    } else {\r\n        linePlayer = 0;\r\n        lineEnemy = player.y - enemy.y;\r\n    }\r\n    int line = Math.max(linePlayer, lineEnemy);\r\n\r\n    // Get the shift between the two\r\n    x = player.x - enemy.x;\r\n    int maxLines = Math.max(player.height, enemy.height);\r\n    for ( line &lt; maxLines; line ++) {\r\n        // if width &gt; 32, then you need a second loop here\r\n        long playerMask = playerArray[linePlayer];\r\n        long enemyMask = enemyArray[lineEnemy];\r\n        // Reproduce the shift between the two sprites\r\n        if (x &lt; 0) playerMask &lt;&lt; (-x);\r\n        else enemyMask &lt;&lt; x;\r\n        // If the two masks have common bits, binary AND will return != 0\r\n        if ((playerMask &amp; enemyMask) != 0) {\r\n            // Contact!\r\n        }\r\n\r\n    }\r\n\r\nLinks: [JGame](http://www.13thmonkey.org/~boris/jgame/), [Framework for Small Java Games](http://vredungmand.dk/programming/sjg/)","title":"Collision Detection between two images in Java","body":"<p>First, use the bounding boxes as described by <a href=\"https://stackoverflow.com/questions/335600/collision-detection-between-two-images-in-java#335632\">Jonathan Holland</a> to find if you may have a collision.</p>\n\n<p>From the (multi-color) sprites, create black and white versions. You probably already have these if your sprites are transparent (i.e. there are places which are inside the bounding box but you can still see the background). These are \"masks\".</p>\n\n<p>Use <code>Image.getRGB()</code> on the mask to get at the pixels. For each pixel which isn't transparent, set a bit in an integer array (<code>playerArray</code> and <code>enemyArray</code> below). The size of the array is <code>height</code> if <code>width &lt;= 32</code> pixels, <code>(width+31)/32*height</code> otherwise. The code below is for <code>width &lt;= 32</code>.</p>\n\n<p>If you have a collision of the bounding boxes, do this:</p>\n\n<pre><code>// Find the first line where the two sprites might overlap\nint linePlayer, lineEnemy;\nif (player.y &lt;= enemy.y) {\n    linePlayer = enemy.y - player.y;\n    lineEnemy = 0;\n} else {\n    linePlayer = 0;\n    lineEnemy = player.y - enemy.y;\n}\nint line = Math.max(linePlayer, lineEnemy);\n\n// Get the shift between the two\nx = player.x - enemy.x;\nint maxLines = Math.max(player.height, enemy.height);\nfor ( line &lt; maxLines; line ++) {\n    // if width &gt; 32, then you need a second loop here\n    long playerMask = playerArray[linePlayer];\n    long enemyMask = enemyArray[lineEnemy];\n    // Reproduce the shift between the two sprites\n    if (x &lt; 0) playerMask &lt;&lt; (-x);\n    else enemyMask &lt;&lt; x;\n    // If the two masks have common bits, binary AND will return != 0\n    if ((playerMask &amp; enemyMask) != 0) {\n        // Contact!\n    }\n\n}\n</code></pre>\n\n<p>Links: <a href=\"http://www.13thmonkey.org/~boris/jgame/\" rel=\"nofollow noreferrer\">JGame</a>, <a href=\"http://vredungmand.dk/programming/sjg/\" rel=\"nofollow noreferrer\">Framework for Small Java Games</a></p>\n"},{"tags":[],"owner":{"account_id":760499,"reputation":1,"user_id":780376,"display_name":"tyler"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1306981967,"creation_date":1306977117,"answer_id":6209407,"question_id":335600,"body_markdown":"Here&#39;s the main class from my collision detection program.  \r\nYou can see it run at: http://www.youtube.com/watch?v=JIXhCvXgjsQ\r\n\r\n\r\n    /**\r\n     *\r\n     * @author Tyler Griffin\r\n     */\r\n    import java.awt.*;\r\n    import javax.swing.*;\r\n    import java.awt.event.*;\r\n    import java.awt.GraphicsDevice.*;\r\n    import java.util.ArrayList;\r\n    import java.awt.Graphics;\r\n    import java.awt.geom.Line2D;\r\n    \r\n    \r\n    public class collision extends JFrame implements KeyListener, MouseMotionListener, MouseListener\r\n    {\r\n        ArrayList everything=new ArrayList&lt;tile&gt;();\r\n    \r\n        int time=0, x, y, width, height, up=0, down=0, left=0, right=0, mouse1=0, mouse2=0;\r\n        int mouseX, mouseY;\r\n    \r\n        GraphicsEnvironment environment = GraphicsEnvironment.getLocalGraphicsEnvironment();\r\n        GraphicsDevice screen = environment.getDefaultScreenDevice();\r\n        DisplayMode displayMode = screen.getDisplayMode();\r\n    \r\n        //private BufferStrategy strategy;\r\n    \r\n        JLayeredPane pane = new JLayeredPane();\r\n    \r\n    \t tile Tile;\r\n    \t circle Circle;\r\n    \t rectangle Rectangle;\r\n    \r\n             textPane text;\r\n    \r\n        public collision()\r\n        {\r\n            setUndecorated(screen.isFullScreenSupported());\r\n            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n            setVisible(true);\r\n            setLayout(null);\r\n            setResizable(false);\r\n            screen.setFullScreenWindow(this);\r\n    \r\n    \r\n            width=displayMode.getWidth();\r\n            height=displayMode.getHeight();\r\n    \r\n    \r\n    \t\t  Circle=new circle(-(int)Math.round((double)height/7*2),-(int)Math.round((double)height/7*2),(int)Math.round((double)height/7*.85),this);\r\n    \t\t  Rectangle=new rectangle(-(int)Math.round((double)height/7*1.5),-(int)Math.round((double)height/7*1.5),(int)Math.round((double)height/7*1.5),(int)Math.round((double)height/7*1.5),this);\r\n    \t\t  Tile=Circle;\r\n    \t\t  Tile.move(mouseX-Tile.width/2, mouseY-Tile.height/2);\r\n                      text=new textPane(0,0,width,height,this);\r\n    \r\n    \t\t  everything.add(new circle((int)Math.round((double)width/100*75),(int)Math.round((double)height/100*15),(int)Math.round((double)width/100*10),this));\r\n                      everything.add(new rectangle((int)Math.round((double)width/100*70),(int)Math.round((double)height/100*60),(int)Math.round((double)width/100*20),(int)Math.round((double)height/100*20),this));\r\n                      //everything.add(new line(750,250,750,750,this));\r\n                      /*everything.add(new line(width/700*419,height/700*68,width/700*495,height/700*345,this));\r\n                      everything.add(new line(width/700*495,height/700*345,width/700*749,height/700*350,this));\r\n                      everything.add(new line(width/700*749,height/700*350,width/700*549,height/700*519,this));\r\n                      everything.add(new line(width/700*549,height/700*519,width/700*624,height/700*800,this));\r\n                      everything.add(new line(width/700*624,height/700*800,width/700*419,height/700*638,this));\r\n                      everything.add(new line(width/700*419,height/700*638,width/700*203,height/700*800,this));\r\n                      everything.add(new line(width/700*203,height/700*800,width/700*279,height/700*519,this));\r\n                      everything.add(new line(width/700*279,height/700*519,width/700*76,height/700*350,this));\r\n                      everything.add(new line(width/700*76,height/700*350,width/700*333,height/700*345,this));\r\n                      everything.add(new line(width/700*333,height/700*345,width/700*419,height/700*68,this));\r\n    \r\n                      everything.add(new line(width/950*419,height/700*68,width/950*624,height/700*800,this));\r\n                      everything.add(new line(width/950*419,height/700*68,width/950*203,height/700*800,this));\r\n                      everything.add(new line(width/950*76,height/700*350,width/950*624,height/700*800,this));\r\n                      everything.add(new line(width/950*203,height/700*800,width/950*749,height/700*350,this));\r\n                      everything.add(new rectangle(width/950*76,height/700*350,width/950*673,1,this));*/\r\n    \r\n                      everything.add(new line((int)Math.round((double)width/1350*419),(int)Math.round((double)height/1000*68),(int)Math.round((double)width/1350*624),(int)Math.round((double)height/1000*800),this));\r\n                      everything.add(new line((int)Math.round((double)width/1350*419),(int)Math.round((double)height/1000*68),(int)Math.round((double)width/1350*203),(int)Math.round((double)height/1000*800),this));\r\n                      everything.add(new line((int)Math.round((double)width/1350*76),(int)Math.round((double)height/1000*350),(int)Math.round((double)width/1350*624),(int)Math.round((double)height/1000*800),this));\r\n                      everything.add(new line((int)Math.round((double)width/1350*203),(int)Math.round((double)height/1000*800),(int)Math.round((double)width/1350*749),(int)Math.round((double)height/1000*350),this));\r\n                      everything.add(new rectangle((int)Math.round((double)width/1350*76),(int)Math.round((double)height/1000*350),(int)Math.round((double)width/1350*673),1,this));\r\n    \r\n    \r\n            addKeyListener(this);\r\n            addMouseMotionListener(this);\r\n            addMouseListener(this);\r\n        }\r\n    \r\n        public void keyReleased(KeyEvent e)\r\n        {\r\n            Object source=e.getSource();\r\n    \r\n            int released=e.getKeyCode();\r\n    \r\n            if (released==KeyEvent.VK_A){left=0;}\r\n            if (released==KeyEvent.VK_W){up=0;}\r\n            if (released==KeyEvent.VK_D){right=0;}\r\n            if (released==KeyEvent.VK_S){down=0;}\r\n        }//end keyReleased\r\n    \r\n    \r\n        public void keyPressed(KeyEvent e)\r\n        {\r\n            Object source=e.getSource();\r\n    \r\n            int pressed=e.getKeyCode();\r\n    \r\n            if (pressed==KeyEvent.VK_A){left=1;}\r\n            if (pressed==KeyEvent.VK_W){up=1;}\r\n            if (pressed==KeyEvent.VK_D){right=1;}\r\n            if (pressed==KeyEvent.VK_S){down=1;}\r\n    \r\n            if (pressed==KeyEvent.VK_PAUSE&amp;&amp;pressed==KeyEvent.VK_P)\r\n            {\r\n                //if (paused==0){paused=1;}\r\n                //else paused=0;\r\n            }\r\n        }//end keyPressed\r\n    \r\n        public void keyTyped(KeyEvent e){}\r\n    \r\n    //***********************************************************************************************\r\n    \r\n        public void mouseDragged(MouseEvent e)\r\n        {\r\n            mouseX=(e.getX());\r\n            mouseY=(e.getY());\r\n    \r\n    \t\t  //run();\r\n        }\r\n    \r\n        public void mouseMoved(MouseEvent e)\r\n        {\r\n            mouseX=(e.getX());\r\n            mouseY=(e.getY());\r\n    \r\n    \t\t  //run();\r\n        }\r\n    \r\n    //***********************************************************************************************\r\n    \r\n        public void mousePressed(MouseEvent e)\r\n        {\r\n        \tif(e.getX()==0 &amp;&amp; e.getY()==0){System.exit(0);}\r\n    \r\n    \tmouseX=(e.getX()+x);\r\n            mouseY=(e.getY()+y);\r\n    \r\n            if(Tile instanceof circle)\r\n            {\r\n                    Circle.move(0-Circle.width, 0-Circle.height);\r\n                    Circle.setBounds(Circle.x, Circle.y, Circle.width, Circle.height);\r\n                    Tile=Rectangle;\r\n            }\r\n            else\r\n            {\r\n                    Rectangle.move(0-Rectangle.width, 0-Rectangle.height);\r\n                    Rectangle.setBounds(Rectangle.x, Rectangle.y, Rectangle.width, Rectangle.height);\r\n                    Tile=Circle;\r\n            }\r\n    \r\n            Tile.move(mouseX-Tile.width/2, mouseY-Tile.height/2);\r\n        }\r\n    \r\n        public void mouseReleased(MouseEvent e)\r\n        {\r\n             //run();\r\n        }\r\n    \r\n        public void mouseEntered(MouseEvent e){}\r\n        public void mouseExited(MouseEvent e){}\r\n    \r\n        public void mouseClicked(MouseEvent e){}\r\n    \r\n    //***********************************************************************************************\r\n    \r\n        public void run()//run collision detection\r\n        {\r\n            while (this == this)\r\n            {\r\n                Tile.move(Tile.x + ((mouseX - (Tile.x + (Tile.width / 2))) / 10), Tile.y + ((mouseY - (Tile.y + (Tile.height / 2))) / 10));\r\n                //Tile.move((mouseX - Tile.width / 2), mouseY - (Tile.height / 2));\r\n    \r\n                for (int i = 0; i &lt; everything.size(); i++)\r\n                {\r\n                    tile Temp = (tile) everything.get(i);\r\n    \r\n                    if (Temp.x &lt; (Tile.x + Tile.width) &amp;&amp; (Temp.x + Temp.width) &gt; Tile.x &amp;&amp; Temp.y &lt; (Tile.y + Tile.height) &amp;&amp; (Temp.y + Temp.height) &gt; Tile.y)//rectangles collided\r\n                    {\r\n                        if (Temp instanceof rectangle)\r\n                        {\r\n                            if (Tile instanceof rectangle){rectangleRectangle(Temp);}\r\n                            else {circleRectangle(Temp);}//Tile instanceof circle\r\n                        }\r\n                        else\r\n                        {\r\n                            if (Temp instanceof circle)\r\n                            {\r\n                                if (Tile instanceof rectangle) {rectangleCircle(Temp);}\r\n                                else {circleCircle(Temp);}\r\n                            }\r\n                            else//line\r\n                            {\r\n                                if (Tile instanceof rectangle){rectangleLine(Temp);}\r\n                                else{circleLine(Temp);}\r\n                            }\r\n                        }\r\n                    }//end if\r\n                }//end for\r\n    \r\n                try {Thread.sleep(16L);}\r\n                catch (Exception e) {}\r\n    \r\n                Tile.setBounds(Tile.x, Tile.y, Tile.width, Tile.height);\r\n                //Rectangle.setBounds(x, y, width, height);\r\n                //Circle.setBounds(x, y, width, height);\r\n                repaint();\r\n    \r\n                text.out=&quot; &quot;;\r\n            }//end while loop\r\n        }//end run\r\n    \r\n    //***************************************special collision detection/handling functions************************************************\r\n    \r\n    \tvoid rectangleRectangle(tile Temp)\r\n    \t{\r\n    \t\tint lapTop, lapBot, lapLeft, lapRight, small, scootX=0, scootY=0;\r\n    \r\n    \t\tlapTop=(Temp.y+Temp.height)-Tile.y;\r\n    \t\tlapBot=(Tile.y+Tile.height)-Temp.y;\r\n    \t\tlapLeft=(Temp.x+Temp.width)-Tile.x;\r\n    \t\tlapRight=(Tile.x+Tile.width)-Temp.x;\r\n    \r\n    \t\tsmall=999999999;\r\n    \r\n    \t\tif (lapTop&lt;small){small=lapTop; scootX=0; scootY=lapTop;}\r\n    \t\tif (lapBot&lt;small){small=lapBot; scootX=0; scootY=lapBot*-1;}\r\n                    if (lapLeft&lt;small){small=lapLeft; scootX=lapLeft; scootY=0;}\r\n                    if (lapRight&lt;small){small=lapRight; scootX=lapRight*-1; scootY=0;}\r\n    \r\n    \t\tTile.move(Tile.x+scootX, Tile.y+scootY);text.out=&quot;collision detected!&quot;;\r\n    \t}\r\n    \r\n    \r\n    \r\n    \tvoid circleRectangle(tile Temp)\r\n    \t{\r\n    \t\tif((Tile.x+Tile.width/2&lt;=Temp.x+Temp.width &amp;&amp; Tile.x+Tile.width/2&gt;=Temp.x)||(Tile.y+Tile.height/2&gt;=Temp.y &amp;&amp; Tile.y+Tile.height/2&lt;=Temp.y+Temp.height))\r\n    \t\t{\r\n    \t\t\trectangleRectangle(Temp);\r\n    \t\t}\r\n    \t\telse//push from nearest corner\r\n    \t\t{\r\n    \t\t\tint x,y;\r\n    \t\t\tif(Tile.x+Tile.width/2&gt;Temp.x+Temp.width &amp;&amp; Tile.y+Tile.height/2&lt;Temp.y){x=Temp.x+Temp.width; y=Temp.y;}\r\n    \t\t\telse if(Tile.x+Tile.width/2&lt;Temp.x &amp;&amp; Tile.y+Tile.height/2&lt;Temp.y){x=Temp.x; y=Temp.y;}\r\n    \t\t\telse if(Tile.x+Tile.width/2&gt;Temp.x+Temp.width &amp;&amp; Tile.y+Tile.height/2&gt;Temp.y+Temp.height){x=Temp.x+Temp.width; y=Temp.y+Temp.height;}\r\n    \t\t\telse {x=Temp.x; y=Temp.y+Temp.height;}\r\n    \r\n    \t\t\tdouble distance = Math.sqrt(Math.pow(Tile.x+(Tile.width/2) - x, 2) + Math.pow(Tile.y+(Tile.height/2) - y, 2));\r\n    \r\n    \t\t\tif((int)Math.round(distance)&lt;Tile.height/2)\r\n    \t\t\t{\r\n                                 double normY = ((Tile.y+(Tile.height/2) - y) / distance);\r\n                                 double normX = ((Tile.x+(Tile.width/2) - x) / distance);\r\n    \r\n                                Tile.move(x-Tile.width/2+(int)Math.round(normX*((Tile.width/2))) , y-Tile.height/2+(int)Math.round(normY*((Tile.height/2))));text.out=&quot;collision detected!&quot;;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \r\n    \r\n    \r\n    \tvoid rectangleCircle(tile Temp)\r\n    \t{\r\n    \t\tif((Temp.x+Temp.width/2&lt;=Tile.x+Tile.width &amp;&amp; Temp.x+Temp.width/2&gt;=Tile.x)||(Temp.y+Temp.height/2&gt;=Tile.y &amp;&amp; Temp.y+Temp.height/2&lt;=Tile.y+Tile.height))\r\n    \t\t{\r\n    \t\t\trectangleRectangle(Temp);\r\n    \t\t}\r\n    \t\telse//push from nearest corner\r\n    \t\t{\r\n    \t\t\tint x,y;\r\n    \t\t\tif(Temp.x+Temp.width/2&gt;Tile.x+Tile.width &amp;&amp; Temp.y+Temp.height/2&lt;Tile.y){x=Tile.x+Tile.width; y=Tile.y;}\r\n    \t\t\telse if(Temp.x+Temp.width/2&lt;Tile.x &amp;&amp; Temp.y+Temp.height/2&lt;Tile.y){x=Tile.x; y=Tile.y;}\r\n    \t\t\telse if(Temp.x+Temp.width/2&gt;Tile.x+Tile.width &amp;&amp; Temp.y+Temp.height/2&gt;Tile.y+Tile.height){x=Tile.x+Tile.width; y=Tile.y+Tile.height;}\r\n    \t\t\telse {x=Tile.x; y=Tile.y+Tile.height;}\r\n    \r\n    \t\t\tdouble distance = Math.sqrt(Math.pow(Temp.x+(Temp.width/2) - x, 2) + Math.pow(Temp.y+(Temp.height/2) - y, 2));\r\n    \r\n    \t\t\tif((int)Math.round(distance)&lt;Temp.height/2)\r\n    \t\t\t{\r\n    \t         double normY = ((Temp.y+(Temp.height/2) - y) / distance);\r\n    \t         double normX = ((Temp.x+(Temp.width/2) - x) / distance);\r\n    \r\n    \t         if(Temp.x+Temp.width/2&gt;Tile.x+Tile.width &amp;&amp; Temp.y+Temp.height/2&lt;Tile.y){Tile.move((Temp.x+Temp.width/2)-(int)Math.round(normX*((Temp.width/2)))-Tile.width,(Temp.y+Temp.height/2)-(int)Math.round(normY*((Temp.height/2))));text.out=&quot;collision detected!&quot;;}\r\n    \t\t\t\telse if(Temp.x+Temp.width/2&lt;Tile.x &amp;&amp; Temp.y+Temp.height/2&lt;Tile.y){Tile.move((Temp.x+Temp.width/2)-(int)Math.round(normX*((Temp.width/2))),(Temp.y+Temp.height/2)-(int)Math.round(normY*((Temp.height/2))));text.out=&quot;collision detected!&quot;;}\r\n    \t\t\t\telse if(Temp.x+Temp.width/2&gt;Tile.x+Tile.width &amp;&amp; Temp.y+Temp.height/2&gt;Tile.y+Tile.height){Tile.move((Temp.x+Temp.width/2)-(int)Math.round(normX*((Temp.width/2)))-Tile.width,(Temp.y+Temp.height/2)-(int)Math.round(normY*((Temp.height/2)))-Tile.height);text.out=&quot;collision detected!&quot;;}\r\n    \t\t\t\telse {Tile.move((Temp.x+Temp.width/2)-(int)Math.round(normX*((Temp.width/2))),(Temp.y+Temp.height/2)-(int)Math.round(normY*((Temp.height/2)))-Tile.height);text.out=&quot;collision detected!&quot;;}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \r\n    \r\n    \r\n    \r\n    \tvoid circleCircle(tile Temp)\r\n    \t{\r\n    \t\tdouble distance = Math.sqrt(Math.pow((Tile.x+(Tile.width/2)) - (Temp.x+(Temp.width/2)),2) + Math.pow((Tile.y+(Tile.height/2)) - (Temp.y+(Temp.height/2)), 2));\r\n    \r\n    \t\tif((int)distance&lt;(Tile.width/2+Temp.width/2))\r\n    \t\t{\r\n                            double normX = ((Tile.x+(Tile.width/2)) - (Temp.x+(Temp.width/2))) / distance;\r\n                            double normY = ((Tile.y+(Tile.height/2)) - (Temp.y+(Temp.height/2))) / distance;\r\n    \r\n    \t\t\tTile.move((Temp.x+(Temp.width/2))+(int)Math.round(normX*(Tile.width/2+Temp.width/2))-(Tile.width/2) , (Temp.y+(Temp.height/2))+(int)Math.round(normY*(Tile.height/2+Temp.height/2))-(Tile.height/2));text.out=&quot;collision detected!&quot;;\r\n    \t\t}\r\n    \t}\r\n    \r\n    \r\n    \r\n    \tvoid circleLine(tile Temp)\r\n    \t{\r\n                line Line=(line)Temp;\r\n    \r\n                if (Line.x1 &lt; (Tile.x + Tile.width) &amp;&amp; (Line.x1) &gt; Tile.x &amp;&amp; Line.y1 &lt; (Tile.y + Tile.height) &amp;&amp; Line.y1 &gt; Tile.y)//circle may be hitting one of the end points\r\n                {\r\n                    rectangle rec=new rectangle(Line.x1, Line.y1, 1, 1, this);\r\n                    circleRectangle(rec);\r\n                    remove(rec);\r\n                }\r\n    \r\n                if (Line.x2 &lt; (Tile.x + Tile.width) &amp;&amp; (Line.x2) &gt; Tile.x &amp;&amp; Line.y2 &lt; (Tile.y + Tile.height) &amp;&amp; Line.y2 &gt; Tile.y)//circle may be hitting one of the end points\r\n                {\r\n                    rectangle rec=new rectangle(Line.x2, Line.y2, 1, 1, this);\r\n                    circleRectangle(rec);\r\n                    remove(rec);\r\n                }\r\n    \r\n    \r\n                int x1=0, y1=0, x2=Tile.x+(Tile.width/2), y2=Tile.y+(Tile.height/2);\r\n    \r\n                x1=Tile.x+(Tile.width/2)-Line.height;//(int)Math.round(Line.xNorm*1000);\r\n                x2=Tile.x+(Tile.width/2)+Line.height;\r\n                if(Line.posSlope)\r\n                {\r\n                    y1=Tile.y+(Tile.height/2)-Line.width;\r\n                    y2=Tile.y+(Tile.height/2)+Line.width;\r\n                }\r\n                else\r\n                {\r\n                    y1=Tile.y+(Tile.height/2)+Line.width;\r\n                    y2=Tile.y+(Tile.height/2)-Line.width;\r\n                }\r\n    \r\n                Point point=intersection((double)x1,(double)y1,(double)x2,(double)y2,(double)Line.x1,(double)Line.y1,(double)Line.x2,(double)Line.y2);//find intersection\r\n    \r\n                if (point.x &lt; (Line.x + Line.width) &amp;&amp; point.x &gt; Line.x &amp;&amp; point.y &lt; (Line.y + Line.height) &amp;&amp; point.y &gt; Line.y)//line intersects within line segment\r\n                {\r\n                    //if(point!=null){System.out.println(point.x+&quot;,&quot;+point.y);}\r\n                    double distance = Math.sqrt(Math.pow((Tile.x+(Tile.width/2)) - point.x,2) + Math.pow((Tile.y+(Tile.width/2)) - point.y, 2));\r\n    \r\n                    if((int)distance&lt;Tile.width/2)\r\n                    {\r\n                        //System.out.println(&quot;hit&quot;);\r\n                        double normX = ((Tile.x+(Tile.width/2)) - point.x) / distance;\r\n                        double normY = ((Tile.y+(Tile.height/2)) - point.y) / distance;\r\n    \r\n                        Tile.move((point.x)+(int)Math.round(normX*(Tile.width/2))-(Tile.width/2) , (point.y)+(int)Math.round(normY*(Tile.height/2))-(Tile.height/2));text.out=&quot;collision detected!&quot;;\r\n                        //System.out.println(point.x+&quot;,&quot;+point.y);\r\n                    }\r\n                }\r\n                \r\n                //new bullet(this, (int)Math.round(tryX), (int)Math.round(tryY));\r\n    \t}\r\n    \r\n            void rectangleLine(tile Temp)\r\n    \t{\r\n                line Line=(line)Temp;\r\n                if(new Line2D.Double(Line.x1,Line.y1,Line.x2,Line.y2).intersects(new Rectangle(Tile.x,Tile.y,Tile.width,Tile.height)))\r\n                {\r\n                    if (Line.x1 &lt; (Tile.x + Tile.width) &amp;&amp; (Line.x1) &gt; Tile.x &amp;&amp; Line.y1 &lt; (Tile.y + Tile.height) &amp;&amp; Line.y1 &gt; Tile.y)//circle may be hitting one of the end points\r\n                    {\r\n                        rectangle rec=new rectangle(Line.x1, Line.y1, 1, 1, this);\r\n                        rectangleRectangle(rec);\r\n                        remove(rec);\r\n                    }\r\n    \r\n                    if (Line.x2 &lt; (Tile.x + Tile.width) &amp;&amp; (Line.x2) &gt; Tile.x &amp;&amp; Line.y2 &lt; (Tile.y + Tile.height) &amp;&amp; Line.y2 &gt; Tile.y)//circle may be hitting one of the end points\r\n                    {\r\n                        rectangle rec=new rectangle(Line.x2, Line.y2, 1, 1, this);\r\n                        rectangleRectangle(rec);\r\n                        remove(rec);\r\n                    }\r\n    \r\n                    if(Line.posSlope)//positive sloped line\r\n                    {\r\n                        //first we&#39;ll do the top left corner\r\n                        int x1=Tile.x-Line.height;\r\n                        int x2=Tile.x+Line.height;\r\n                        int y1=Tile.y-Line.width;\r\n                        int y2=Tile.y+Line.width;\r\n                        Point topPoint=new Point(-99,-99), botPoint=new Point(-99,-99);\r\n                        double topDistance=0, botDistance=0;\r\n    \r\n                        topPoint=intersection((double)x1,(double)y1,(double)x2,(double)y2,(double)Line.x1,(double)Line.y1,(double)Line.x2,(double)Line.y2);//find intersection\r\n    \r\n                        topDistance = Math.sqrt(Math.pow(Tile.x - topPoint.x,2) + Math.pow(Tile.y - topPoint.y, 2));\r\n    \r\n                        //new let&#39;s do the bottom right corner\r\n                        x1=Tile.x+Tile.width-Line.height;\r\n                        x2=Tile.x+Tile.width+Line.height;\r\n                        y1=Tile.y+Tile.height-Line.width;\r\n                        y2=Tile.y+Tile.height+Line.width;\r\n    \r\n                        botPoint=intersection((double)x1,(double)y1,(double)x2,(double)y2,(double)Line.x1,(double)Line.y1,(double)Line.x2,(double)Line.y2);//find intersection\r\n    \r\n                        botDistance = Math.sqrt(Math.pow((Tile.x+Tile.width) - botPoint.x,2) + Math.pow((Tile.y+Tile.height) - botPoint.y, 2));\r\n                        \r\n    \r\n                        if(topDistance&lt;botDistance)\r\n                        {\r\n                            if(new Rectangle(Tile.x,Tile.y,Tile.width,Tile.height).contains(topPoint) &amp;&amp; new Rectangle(Line.x,Line.y,Line.width,Line.height).contains(topPoint))\r\n                            {\r\n                                Tile.move(topPoint.x,topPoint.y);text.out=&quot;collision detected!&quot;;\r\n                            }\r\n                        }\r\n                        else\r\n                        {\r\n                            if(new Rectangle(Tile.x,Tile.y,Tile.width,Tile.height).contains(botPoint) &amp;&amp; new Rectangle(Line.x,Line.y,Line.width,Line.height).contains(botPoint))\r\n                            {\r\n                                Tile.move(botPoint.x-Tile.width,botPoint.y-Tile.height);text.out=&quot;collision detected!&quot;;\r\n                            }\r\n                        }\r\n                    }\r\n                    else//negative sloped lne\r\n                    {\r\n                        //first we&#39;ll do the top right corner\r\n                        int x1=Tile.x+Tile.width-Line.height;\r\n                        int x2=Tile.x+Tile.width+Line.height;\r\n                        int y1=Tile.y+Line.width;\r\n                        int y2=Tile.y-Line.width;\r\n                        Point topPoint=new Point(-99,-99), botPoint=new Point(-99,-99);\r\n                        double topDistance=0, botDistance=0;\r\n    \r\n                        topPoint=intersection((double)x1,(double)y1,(double)x2,(double)y2,(double)Line.x1,(double)Line.y1,(double)Line.x2,(double)Line.y2);//find intersection\r\n    \r\n                        topDistance = Math.sqrt(Math.pow(Tile.x + Tile.width - topPoint.x,2) + Math.pow(Tile.y - topPoint.y, 2));\r\n    \r\n                        //new let&#39;s do the bottom left corner\r\n                        x1=Tile.x-Line.height;\r\n                        x2=Tile.x+Line.height;\r\n                        y1=Tile.y+Tile.height+Line.width;\r\n                        y2=Tile.y+Tile.height-Line.width;\r\n    \r\n                        botPoint=intersection((double)x1,(double)y1,(double)x2,(double)y2,(double)Line.x1,(double)Line.y1,(double)Line.x2,(double)Line.y2);//find intersection\r\n    \r\n                        botDistance = Math.sqrt(Math.pow(Tile.x - botPoint.x,2) + Math.pow((Tile.y+Tile.height) - botPoint.y, 2));\r\n                        \r\n    \r\n                        if(topDistance&lt;botDistance)\r\n                        {\r\n                            if(new Rectangle(Tile.x,Tile.y,Tile.width,Tile.height).contains(topPoint) &amp;&amp; new Rectangle(Line.x,Line.y,Line.width,Line.height).contains(topPoint))\r\n                            {\r\n                                Tile.move(topPoint.x-Tile.width,topPoint.y);text.out=&quot;collision detected!&quot;;\r\n                            }\r\n                        }\r\n                        else\r\n                        {\r\n                            if(new Rectangle(Tile.x,Tile.y,Tile.width,Tile.height).contains(botPoint) &amp;&amp; new Rectangle(Line.x,Line.y,Line.width,Line.height).contains(botPoint))\r\n                            {\r\n                                Tile.move(botPoint.x,botPoint.y-Tile.height);text.out=&quot;collision detected!&quot;;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n    \t}\r\n    \r\n           public Point intersection(double x1, double y1, double x2, double y2,double x3, double y3, double x4, double y4)//I didn&#39;t write this. got it from http://www.ahristov.com/tutorial/geometry-games/intersection-lines.html (I altered it)\r\n           {\r\n                double d = (x1 - x2) * (y3 - y4) - (y1 - y2) * (x3 - x4);\r\n    \r\n                double xi = ((x3 - x4) * (x1 * y2 - y1 * x2) - (x1 - x2) * (x3 * y4 - y3 * x4)) / d;\r\n                double yi = ((y3 - y4) * (x1 * y2 - y1 * x2) - (y1 - y2) * (x3 * y4 - y3 * x4)) / d;\r\n    \r\n                int x=(int)Math.round(xi);\r\n                int y=(int)Math.round(yi);\r\n    \r\n                return new Point(x, y);\r\n            }\r\n            \r\n    //***************************************************************************************\r\n    \r\n        public static void main(String[] args)\r\n        {\r\n            final collision Collision=new collision();\r\n    \t\t  Collision.run();\r\n        }//end main\r\n    }//end class\r\n\r\n","title":"Collision Detection between two images in Java","body":"<p>Here's the main class from my collision detection program.<br>\nYou can see it run at: <a href=\"http://www.youtube.com/watch?v=JIXhCvXgjsQ\" rel=\"nofollow\">http://www.youtube.com/watch?v=JIXhCvXgjsQ</a></p>\n\n<pre><code>/**\n *\n * @author Tyler Griffin\n */\nimport java.awt.*;\nimport javax.swing.*;\nimport java.awt.event.*;\nimport java.awt.GraphicsDevice.*;\nimport java.util.ArrayList;\nimport java.awt.Graphics;\nimport java.awt.geom.Line2D;\n\n\npublic class collision extends JFrame implements KeyListener, MouseMotionListener, MouseListener\n{\n    ArrayList everything=new ArrayList&lt;tile&gt;();\n\n    int time=0, x, y, width, height, up=0, down=0, left=0, right=0, mouse1=0, mouse2=0;\n    int mouseX, mouseY;\n\n    GraphicsEnvironment environment = GraphicsEnvironment.getLocalGraphicsEnvironment();\n    GraphicsDevice screen = environment.getDefaultScreenDevice();\n    DisplayMode displayMode = screen.getDisplayMode();\n\n    //private BufferStrategy strategy;\n\n    JLayeredPane pane = new JLayeredPane();\n\n     tile Tile;\n     circle Circle;\n     rectangle Rectangle;\n\n         textPane text;\n\n    public collision()\n    {\n        setUndecorated(screen.isFullScreenSupported());\n        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        setVisible(true);\n        setLayout(null);\n        setResizable(false);\n        screen.setFullScreenWindow(this);\n\n\n        width=displayMode.getWidth();\n        height=displayMode.getHeight();\n\n\n          Circle=new circle(-(int)Math.round((double)height/7*2),-(int)Math.round((double)height/7*2),(int)Math.round((double)height/7*.85),this);\n          Rectangle=new rectangle(-(int)Math.round((double)height/7*1.5),-(int)Math.round((double)height/7*1.5),(int)Math.round((double)height/7*1.5),(int)Math.round((double)height/7*1.5),this);\n          Tile=Circle;\n          Tile.move(mouseX-Tile.width/2, mouseY-Tile.height/2);\n                  text=new textPane(0,0,width,height,this);\n\n          everything.add(new circle((int)Math.round((double)width/100*75),(int)Math.round((double)height/100*15),(int)Math.round((double)width/100*10),this));\n                  everything.add(new rectangle((int)Math.round((double)width/100*70),(int)Math.round((double)height/100*60),(int)Math.round((double)width/100*20),(int)Math.round((double)height/100*20),this));\n                  //everything.add(new line(750,250,750,750,this));\n                  /*everything.add(new line(width/700*419,height/700*68,width/700*495,height/700*345,this));\n                  everything.add(new line(width/700*495,height/700*345,width/700*749,height/700*350,this));\n                  everything.add(new line(width/700*749,height/700*350,width/700*549,height/700*519,this));\n                  everything.add(new line(width/700*549,height/700*519,width/700*624,height/700*800,this));\n                  everything.add(new line(width/700*624,height/700*800,width/700*419,height/700*638,this));\n                  everything.add(new line(width/700*419,height/700*638,width/700*203,height/700*800,this));\n                  everything.add(new line(width/700*203,height/700*800,width/700*279,height/700*519,this));\n                  everything.add(new line(width/700*279,height/700*519,width/700*76,height/700*350,this));\n                  everything.add(new line(width/700*76,height/700*350,width/700*333,height/700*345,this));\n                  everything.add(new line(width/700*333,height/700*345,width/700*419,height/700*68,this));\n\n                  everything.add(new line(width/950*419,height/700*68,width/950*624,height/700*800,this));\n                  everything.add(new line(width/950*419,height/700*68,width/950*203,height/700*800,this));\n                  everything.add(new line(width/950*76,height/700*350,width/950*624,height/700*800,this));\n                  everything.add(new line(width/950*203,height/700*800,width/950*749,height/700*350,this));\n                  everything.add(new rectangle(width/950*76,height/700*350,width/950*673,1,this));*/\n\n                  everything.add(new line((int)Math.round((double)width/1350*419),(int)Math.round((double)height/1000*68),(int)Math.round((double)width/1350*624),(int)Math.round((double)height/1000*800),this));\n                  everything.add(new line((int)Math.round((double)width/1350*419),(int)Math.round((double)height/1000*68),(int)Math.round((double)width/1350*203),(int)Math.round((double)height/1000*800),this));\n                  everything.add(new line((int)Math.round((double)width/1350*76),(int)Math.round((double)height/1000*350),(int)Math.round((double)width/1350*624),(int)Math.round((double)height/1000*800),this));\n                  everything.add(new line((int)Math.round((double)width/1350*203),(int)Math.round((double)height/1000*800),(int)Math.round((double)width/1350*749),(int)Math.round((double)height/1000*350),this));\n                  everything.add(new rectangle((int)Math.round((double)width/1350*76),(int)Math.round((double)height/1000*350),(int)Math.round((double)width/1350*673),1,this));\n\n\n        addKeyListener(this);\n        addMouseMotionListener(this);\n        addMouseListener(this);\n    }\n\n    public void keyReleased(KeyEvent e)\n    {\n        Object source=e.getSource();\n\n        int released=e.getKeyCode();\n\n        if (released==KeyEvent.VK_A){left=0;}\n        if (released==KeyEvent.VK_W){up=0;}\n        if (released==KeyEvent.VK_D){right=0;}\n        if (released==KeyEvent.VK_S){down=0;}\n    }//end keyReleased\n\n\n    public void keyPressed(KeyEvent e)\n    {\n        Object source=e.getSource();\n\n        int pressed=e.getKeyCode();\n\n        if (pressed==KeyEvent.VK_A){left=1;}\n        if (pressed==KeyEvent.VK_W){up=1;}\n        if (pressed==KeyEvent.VK_D){right=1;}\n        if (pressed==KeyEvent.VK_S){down=1;}\n\n        if (pressed==KeyEvent.VK_PAUSE&amp;&amp;pressed==KeyEvent.VK_P)\n        {\n            //if (paused==0){paused=1;}\n            //else paused=0;\n        }\n    }//end keyPressed\n\n    public void keyTyped(KeyEvent e){}\n\n//***********************************************************************************************\n\n    public void mouseDragged(MouseEvent e)\n    {\n        mouseX=(e.getX());\n        mouseY=(e.getY());\n\n          //run();\n    }\n\n    public void mouseMoved(MouseEvent e)\n    {\n        mouseX=(e.getX());\n        mouseY=(e.getY());\n\n          //run();\n    }\n\n//***********************************************************************************************\n\n    public void mousePressed(MouseEvent e)\n    {\n        if(e.getX()==0 &amp;&amp; e.getY()==0){System.exit(0);}\n\n    mouseX=(e.getX()+x);\n        mouseY=(e.getY()+y);\n\n        if(Tile instanceof circle)\n        {\n                Circle.move(0-Circle.width, 0-Circle.height);\n                Circle.setBounds(Circle.x, Circle.y, Circle.width, Circle.height);\n                Tile=Rectangle;\n        }\n        else\n        {\n                Rectangle.move(0-Rectangle.width, 0-Rectangle.height);\n                Rectangle.setBounds(Rectangle.x, Rectangle.y, Rectangle.width, Rectangle.height);\n                Tile=Circle;\n        }\n\n        Tile.move(mouseX-Tile.width/2, mouseY-Tile.height/2);\n    }\n\n    public void mouseReleased(MouseEvent e)\n    {\n         //run();\n    }\n\n    public void mouseEntered(MouseEvent e){}\n    public void mouseExited(MouseEvent e){}\n\n    public void mouseClicked(MouseEvent e){}\n\n//***********************************************************************************************\n\n    public void run()//run collision detection\n    {\n        while (this == this)\n        {\n            Tile.move(Tile.x + ((mouseX - (Tile.x + (Tile.width / 2))) / 10), Tile.y + ((mouseY - (Tile.y + (Tile.height / 2))) / 10));\n            //Tile.move((mouseX - Tile.width / 2), mouseY - (Tile.height / 2));\n\n            for (int i = 0; i &lt; everything.size(); i++)\n            {\n                tile Temp = (tile) everything.get(i);\n\n                if (Temp.x &lt; (Tile.x + Tile.width) &amp;&amp; (Temp.x + Temp.width) &gt; Tile.x &amp;&amp; Temp.y &lt; (Tile.y + Tile.height) &amp;&amp; (Temp.y + Temp.height) &gt; Tile.y)//rectangles collided\n                {\n                    if (Temp instanceof rectangle)\n                    {\n                        if (Tile instanceof rectangle){rectangleRectangle(Temp);}\n                        else {circleRectangle(Temp);}//Tile instanceof circle\n                    }\n                    else\n                    {\n                        if (Temp instanceof circle)\n                        {\n                            if (Tile instanceof rectangle) {rectangleCircle(Temp);}\n                            else {circleCircle(Temp);}\n                        }\n                        else//line\n                        {\n                            if (Tile instanceof rectangle){rectangleLine(Temp);}\n                            else{circleLine(Temp);}\n                        }\n                    }\n                }//end if\n            }//end for\n\n            try {Thread.sleep(16L);}\n            catch (Exception e) {}\n\n            Tile.setBounds(Tile.x, Tile.y, Tile.width, Tile.height);\n            //Rectangle.setBounds(x, y, width, height);\n            //Circle.setBounds(x, y, width, height);\n            repaint();\n\n            text.out=\" \";\n        }//end while loop\n    }//end run\n\n//***************************************special collision detection/handling functions************************************************\n\n    void rectangleRectangle(tile Temp)\n    {\n        int lapTop, lapBot, lapLeft, lapRight, small, scootX=0, scootY=0;\n\n        lapTop=(Temp.y+Temp.height)-Tile.y;\n        lapBot=(Tile.y+Tile.height)-Temp.y;\n        lapLeft=(Temp.x+Temp.width)-Tile.x;\n        lapRight=(Tile.x+Tile.width)-Temp.x;\n\n        small=999999999;\n\n        if (lapTop&lt;small){small=lapTop; scootX=0; scootY=lapTop;}\n        if (lapBot&lt;small){small=lapBot; scootX=0; scootY=lapBot*-1;}\n                if (lapLeft&lt;small){small=lapLeft; scootX=lapLeft; scootY=0;}\n                if (lapRight&lt;small){small=lapRight; scootX=lapRight*-1; scootY=0;}\n\n        Tile.move(Tile.x+scootX, Tile.y+scootY);text.out=\"collision detected!\";\n    }\n\n\n\n    void circleRectangle(tile Temp)\n    {\n        if((Tile.x+Tile.width/2&lt;=Temp.x+Temp.width &amp;&amp; Tile.x+Tile.width/2&gt;=Temp.x)||(Tile.y+Tile.height/2&gt;=Temp.y &amp;&amp; Tile.y+Tile.height/2&lt;=Temp.y+Temp.height))\n        {\n            rectangleRectangle(Temp);\n        }\n        else//push from nearest corner\n        {\n            int x,y;\n            if(Tile.x+Tile.width/2&gt;Temp.x+Temp.width &amp;&amp; Tile.y+Tile.height/2&lt;Temp.y){x=Temp.x+Temp.width; y=Temp.y;}\n            else if(Tile.x+Tile.width/2&lt;Temp.x &amp;&amp; Tile.y+Tile.height/2&lt;Temp.y){x=Temp.x; y=Temp.y;}\n            else if(Tile.x+Tile.width/2&gt;Temp.x+Temp.width &amp;&amp; Tile.y+Tile.height/2&gt;Temp.y+Temp.height){x=Temp.x+Temp.width; y=Temp.y+Temp.height;}\n            else {x=Temp.x; y=Temp.y+Temp.height;}\n\n            double distance = Math.sqrt(Math.pow(Tile.x+(Tile.width/2) - x, 2) + Math.pow(Tile.y+(Tile.height/2) - y, 2));\n\n            if((int)Math.round(distance)&lt;Tile.height/2)\n            {\n                             double normY = ((Tile.y+(Tile.height/2) - y) / distance);\n                             double normX = ((Tile.x+(Tile.width/2) - x) / distance);\n\n                            Tile.move(x-Tile.width/2+(int)Math.round(normX*((Tile.width/2))) , y-Tile.height/2+(int)Math.round(normY*((Tile.height/2))));text.out=\"collision detected!\";\n            }\n        }\n    }\n\n\n\n    void rectangleCircle(tile Temp)\n    {\n        if((Temp.x+Temp.width/2&lt;=Tile.x+Tile.width &amp;&amp; Temp.x+Temp.width/2&gt;=Tile.x)||(Temp.y+Temp.height/2&gt;=Tile.y &amp;&amp; Temp.y+Temp.height/2&lt;=Tile.y+Tile.height))\n        {\n            rectangleRectangle(Temp);\n        }\n        else//push from nearest corner\n        {\n            int x,y;\n            if(Temp.x+Temp.width/2&gt;Tile.x+Tile.width &amp;&amp; Temp.y+Temp.height/2&lt;Tile.y){x=Tile.x+Tile.width; y=Tile.y;}\n            else if(Temp.x+Temp.width/2&lt;Tile.x &amp;&amp; Temp.y+Temp.height/2&lt;Tile.y){x=Tile.x; y=Tile.y;}\n            else if(Temp.x+Temp.width/2&gt;Tile.x+Tile.width &amp;&amp; Temp.y+Temp.height/2&gt;Tile.y+Tile.height){x=Tile.x+Tile.width; y=Tile.y+Tile.height;}\n            else {x=Tile.x; y=Tile.y+Tile.height;}\n\n            double distance = Math.sqrt(Math.pow(Temp.x+(Temp.width/2) - x, 2) + Math.pow(Temp.y+(Temp.height/2) - y, 2));\n\n            if((int)Math.round(distance)&lt;Temp.height/2)\n            {\n             double normY = ((Temp.y+(Temp.height/2) - y) / distance);\n             double normX = ((Temp.x+(Temp.width/2) - x) / distance);\n\n             if(Temp.x+Temp.width/2&gt;Tile.x+Tile.width &amp;&amp; Temp.y+Temp.height/2&lt;Tile.y){Tile.move((Temp.x+Temp.width/2)-(int)Math.round(normX*((Temp.width/2)))-Tile.width,(Temp.y+Temp.height/2)-(int)Math.round(normY*((Temp.height/2))));text.out=\"collision detected!\";}\n                else if(Temp.x+Temp.width/2&lt;Tile.x &amp;&amp; Temp.y+Temp.height/2&lt;Tile.y){Tile.move((Temp.x+Temp.width/2)-(int)Math.round(normX*((Temp.width/2))),(Temp.y+Temp.height/2)-(int)Math.round(normY*((Temp.height/2))));text.out=\"collision detected!\";}\n                else if(Temp.x+Temp.width/2&gt;Tile.x+Tile.width &amp;&amp; Temp.y+Temp.height/2&gt;Tile.y+Tile.height){Tile.move((Temp.x+Temp.width/2)-(int)Math.round(normX*((Temp.width/2)))-Tile.width,(Temp.y+Temp.height/2)-(int)Math.round(normY*((Temp.height/2)))-Tile.height);text.out=\"collision detected!\";}\n                else {Tile.move((Temp.x+Temp.width/2)-(int)Math.round(normX*((Temp.width/2))),(Temp.y+Temp.height/2)-(int)Math.round(normY*((Temp.height/2)))-Tile.height);text.out=\"collision detected!\";}\n            }\n        }\n    }\n\n\n\n\n    void circleCircle(tile Temp)\n    {\n        double distance = Math.sqrt(Math.pow((Tile.x+(Tile.width/2)) - (Temp.x+(Temp.width/2)),2) + Math.pow((Tile.y+(Tile.height/2)) - (Temp.y+(Temp.height/2)), 2));\n\n        if((int)distance&lt;(Tile.width/2+Temp.width/2))\n        {\n                        double normX = ((Tile.x+(Tile.width/2)) - (Temp.x+(Temp.width/2))) / distance;\n                        double normY = ((Tile.y+(Tile.height/2)) - (Temp.y+(Temp.height/2))) / distance;\n\n            Tile.move((Temp.x+(Temp.width/2))+(int)Math.round(normX*(Tile.width/2+Temp.width/2))-(Tile.width/2) , (Temp.y+(Temp.height/2))+(int)Math.round(normY*(Tile.height/2+Temp.height/2))-(Tile.height/2));text.out=\"collision detected!\";\n        }\n    }\n\n\n\n    void circleLine(tile Temp)\n    {\n            line Line=(line)Temp;\n\n            if (Line.x1 &lt; (Tile.x + Tile.width) &amp;&amp; (Line.x1) &gt; Tile.x &amp;&amp; Line.y1 &lt; (Tile.y + Tile.height) &amp;&amp; Line.y1 &gt; Tile.y)//circle may be hitting one of the end points\n            {\n                rectangle rec=new rectangle(Line.x1, Line.y1, 1, 1, this);\n                circleRectangle(rec);\n                remove(rec);\n            }\n\n            if (Line.x2 &lt; (Tile.x + Tile.width) &amp;&amp; (Line.x2) &gt; Tile.x &amp;&amp; Line.y2 &lt; (Tile.y + Tile.height) &amp;&amp; Line.y2 &gt; Tile.y)//circle may be hitting one of the end points\n            {\n                rectangle rec=new rectangle(Line.x2, Line.y2, 1, 1, this);\n                circleRectangle(rec);\n                remove(rec);\n            }\n\n\n            int x1=0, y1=0, x2=Tile.x+(Tile.width/2), y2=Tile.y+(Tile.height/2);\n\n            x1=Tile.x+(Tile.width/2)-Line.height;//(int)Math.round(Line.xNorm*1000);\n            x2=Tile.x+(Tile.width/2)+Line.height;\n            if(Line.posSlope)\n            {\n                y1=Tile.y+(Tile.height/2)-Line.width;\n                y2=Tile.y+(Tile.height/2)+Line.width;\n            }\n            else\n            {\n                y1=Tile.y+(Tile.height/2)+Line.width;\n                y2=Tile.y+(Tile.height/2)-Line.width;\n            }\n\n            Point point=intersection((double)x1,(double)y1,(double)x2,(double)y2,(double)Line.x1,(double)Line.y1,(double)Line.x2,(double)Line.y2);//find intersection\n\n            if (point.x &lt; (Line.x + Line.width) &amp;&amp; point.x &gt; Line.x &amp;&amp; point.y &lt; (Line.y + Line.height) &amp;&amp; point.y &gt; Line.y)//line intersects within line segment\n            {\n                //if(point!=null){System.out.println(point.x+\",\"+point.y);}\n                double distance = Math.sqrt(Math.pow((Tile.x+(Tile.width/2)) - point.x,2) + Math.pow((Tile.y+(Tile.width/2)) - point.y, 2));\n\n                if((int)distance&lt;Tile.width/2)\n                {\n                    //System.out.println(\"hit\");\n                    double normX = ((Tile.x+(Tile.width/2)) - point.x) / distance;\n                    double normY = ((Tile.y+(Tile.height/2)) - point.y) / distance;\n\n                    Tile.move((point.x)+(int)Math.round(normX*(Tile.width/2))-(Tile.width/2) , (point.y)+(int)Math.round(normY*(Tile.height/2))-(Tile.height/2));text.out=\"collision detected!\";\n                    //System.out.println(point.x+\",\"+point.y);\n                }\n            }\n\n            //new bullet(this, (int)Math.round(tryX), (int)Math.round(tryY));\n    }\n\n        void rectangleLine(tile Temp)\n    {\n            line Line=(line)Temp;\n            if(new Line2D.Double(Line.x1,Line.y1,Line.x2,Line.y2).intersects(new Rectangle(Tile.x,Tile.y,Tile.width,Tile.height)))\n            {\n                if (Line.x1 &lt; (Tile.x + Tile.width) &amp;&amp; (Line.x1) &gt; Tile.x &amp;&amp; Line.y1 &lt; (Tile.y + Tile.height) &amp;&amp; Line.y1 &gt; Tile.y)//circle may be hitting one of the end points\n                {\n                    rectangle rec=new rectangle(Line.x1, Line.y1, 1, 1, this);\n                    rectangleRectangle(rec);\n                    remove(rec);\n                }\n\n                if (Line.x2 &lt; (Tile.x + Tile.width) &amp;&amp; (Line.x2) &gt; Tile.x &amp;&amp; Line.y2 &lt; (Tile.y + Tile.height) &amp;&amp; Line.y2 &gt; Tile.y)//circle may be hitting one of the end points\n                {\n                    rectangle rec=new rectangle(Line.x2, Line.y2, 1, 1, this);\n                    rectangleRectangle(rec);\n                    remove(rec);\n                }\n\n                if(Line.posSlope)//positive sloped line\n                {\n                    //first we'll do the top left corner\n                    int x1=Tile.x-Line.height;\n                    int x2=Tile.x+Line.height;\n                    int y1=Tile.y-Line.width;\n                    int y2=Tile.y+Line.width;\n                    Point topPoint=new Point(-99,-99), botPoint=new Point(-99,-99);\n                    double topDistance=0, botDistance=0;\n\n                    topPoint=intersection((double)x1,(double)y1,(double)x2,(double)y2,(double)Line.x1,(double)Line.y1,(double)Line.x2,(double)Line.y2);//find intersection\n\n                    topDistance = Math.sqrt(Math.pow(Tile.x - topPoint.x,2) + Math.pow(Tile.y - topPoint.y, 2));\n\n                    //new let's do the bottom right corner\n                    x1=Tile.x+Tile.width-Line.height;\n                    x2=Tile.x+Tile.width+Line.height;\n                    y1=Tile.y+Tile.height-Line.width;\n                    y2=Tile.y+Tile.height+Line.width;\n\n                    botPoint=intersection((double)x1,(double)y1,(double)x2,(double)y2,(double)Line.x1,(double)Line.y1,(double)Line.x2,(double)Line.y2);//find intersection\n\n                    botDistance = Math.sqrt(Math.pow((Tile.x+Tile.width) - botPoint.x,2) + Math.pow((Tile.y+Tile.height) - botPoint.y, 2));\n\n\n                    if(topDistance&lt;botDistance)\n                    {\n                        if(new Rectangle(Tile.x,Tile.y,Tile.width,Tile.height).contains(topPoint) &amp;&amp; new Rectangle(Line.x,Line.y,Line.width,Line.height).contains(topPoint))\n                        {\n                            Tile.move(topPoint.x,topPoint.y);text.out=\"collision detected!\";\n                        }\n                    }\n                    else\n                    {\n                        if(new Rectangle(Tile.x,Tile.y,Tile.width,Tile.height).contains(botPoint) &amp;&amp; new Rectangle(Line.x,Line.y,Line.width,Line.height).contains(botPoint))\n                        {\n                            Tile.move(botPoint.x-Tile.width,botPoint.y-Tile.height);text.out=\"collision detected!\";\n                        }\n                    }\n                }\n                else//negative sloped lne\n                {\n                    //first we'll do the top right corner\n                    int x1=Tile.x+Tile.width-Line.height;\n                    int x2=Tile.x+Tile.width+Line.height;\n                    int y1=Tile.y+Line.width;\n                    int y2=Tile.y-Line.width;\n                    Point topPoint=new Point(-99,-99), botPoint=new Point(-99,-99);\n                    double topDistance=0, botDistance=0;\n\n                    topPoint=intersection((double)x1,(double)y1,(double)x2,(double)y2,(double)Line.x1,(double)Line.y1,(double)Line.x2,(double)Line.y2);//find intersection\n\n                    topDistance = Math.sqrt(Math.pow(Tile.x + Tile.width - topPoint.x,2) + Math.pow(Tile.y - topPoint.y, 2));\n\n                    //new let's do the bottom left corner\n                    x1=Tile.x-Line.height;\n                    x2=Tile.x+Line.height;\n                    y1=Tile.y+Tile.height+Line.width;\n                    y2=Tile.y+Tile.height-Line.width;\n\n                    botPoint=intersection((double)x1,(double)y1,(double)x2,(double)y2,(double)Line.x1,(double)Line.y1,(double)Line.x2,(double)Line.y2);//find intersection\n\n                    botDistance = Math.sqrt(Math.pow(Tile.x - botPoint.x,2) + Math.pow((Tile.y+Tile.height) - botPoint.y, 2));\n\n\n                    if(topDistance&lt;botDistance)\n                    {\n                        if(new Rectangle(Tile.x,Tile.y,Tile.width,Tile.height).contains(topPoint) &amp;&amp; new Rectangle(Line.x,Line.y,Line.width,Line.height).contains(topPoint))\n                        {\n                            Tile.move(topPoint.x-Tile.width,topPoint.y);text.out=\"collision detected!\";\n                        }\n                    }\n                    else\n                    {\n                        if(new Rectangle(Tile.x,Tile.y,Tile.width,Tile.height).contains(botPoint) &amp;&amp; new Rectangle(Line.x,Line.y,Line.width,Line.height).contains(botPoint))\n                        {\n                            Tile.move(botPoint.x,botPoint.y-Tile.height);text.out=\"collision detected!\";\n                        }\n                    }\n                }\n            }\n    }\n\n       public Point intersection(double x1, double y1, double x2, double y2,double x3, double y3, double x4, double y4)//I didn't write this. got it from http://www.ahristov.com/tutorial/geometry-games/intersection-lines.html (I altered it)\n       {\n            double d = (x1 - x2) * (y3 - y4) - (y1 - y2) * (x3 - x4);\n\n            double xi = ((x3 - x4) * (x1 * y2 - y1 * x2) - (x1 - x2) * (x3 * y4 - y3 * x4)) / d;\n            double yi = ((y3 - y4) * (x1 * y2 - y1 * x2) - (y1 - y2) * (x3 * y4 - y3 * x4)) / d;\n\n            int x=(int)Math.round(xi);\n            int y=(int)Math.round(yi);\n\n            return new Point(x, y);\n        }\n\n//***************************************************************************************\n\n    public static void main(String[] args)\n    {\n        final collision Collision=new collision();\n          Collision.run();\n    }//end main\n}//end class\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3217215,"reputation":258,"user_id":2715575,"accept_rate":67,"display_name":"johnny"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1414412678,"creation_date":1414411457,"answer_id":26587175,"question_id":335600,"body_markdown":"is there a problem with:\r\n\r\n\r\n    Rectangle box1 = new Rectangle(100,100,100,100);\r\n    Rectangle box2 = new Rectangle(200,200,100,100);\r\n    \r\n    // what this means is if any pixel in box2 enters (hits) box1\r\n    if (box1.contains(box2)) \r\n    {\r\n         // collision occurred\r\n    }\r\n\r\n    // your code for moving the boxes \r\n\r\n&lt;br&gt;\r\n\r\nthis can also be applied to circles:\r\n&lt;br&gt;\r\n\r\n    Ellipse2D.Double ball1 = new Ellipse2D.Double(100,100,200,200);\r\n    Ellipse2D.Double ball2 = new Ellipse2D.Double(400,100,200,200);\r\n    \r\n    // what this means is if any pixel on the circumference in ball2 touches (hits)\r\n    // ball1\r\n        if (ball1.contains(ball2)) \r\n        {\r\n             // collision occurred\r\n        }\r\n    \r\n        // your code for moving the balls\r\n\r\n&lt;br&gt;&lt;br&gt;\r\nto check whether youve hit the edge of a screen you could use the following:\r\n&lt;br&gt;&lt;br&gt;\r\n\r\n    Rectangle screenBounds = jpanel.getBounds();\r\n    Ellipse2D.Double ball = new Ellipse2D.Double(100,100,200,200);  // diameter 200\r\n    Rectangle ballBounds = ball.getBounds();\r\n    \r\n    if (!screenBounds.contains(ballBounds))\r\n    {\r\n    // the ball touched the edge of the screen\r\n    }","title":"Collision Detection between two images in Java","body":"<p>is there a problem with:</p>\n\n<pre><code>Rectangle box1 = new Rectangle(100,100,100,100);\nRectangle box2 = new Rectangle(200,200,100,100);\n\n// what this means is if any pixel in box2 enters (hits) box1\nif (box1.contains(box2)) \n{\n     // collision occurred\n}\n\n// your code for moving the boxes \n</code></pre>\n\n<p><br></p>\n\n<p>this can also be applied to circles:\n<br></p>\n\n<pre><code>Ellipse2D.Double ball1 = new Ellipse2D.Double(100,100,200,200);\nEllipse2D.Double ball2 = new Ellipse2D.Double(400,100,200,200);\n\n// what this means is if any pixel on the circumference in ball2 touches (hits)\n// ball1\n    if (ball1.contains(ball2)) \n    {\n         // collision occurred\n    }\n\n    // your code for moving the balls\n</code></pre>\n\n<p><br><br>\nto check whether youve hit the edge of a screen you could use the following:\n<br><br></p>\n\n<pre><code>Rectangle screenBounds = jpanel.getBounds();\nEllipse2D.Double ball = new Ellipse2D.Double(100,100,200,200);  // diameter 200\nRectangle ballBounds = ball.getBounds();\n\nif (!screenBounds.contains(ballBounds))\n{\n// the ball touched the edge of the screen\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12081091,"reputation":1,"user_id":8832800,"display_name":"Yashwanth Dornala"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1512357603,"creation_date":1511784994,"answer_id":47510806,"question_id":335600,"body_markdown":"No need to use rectangles ... compare the coordinates of  2 players constantly.\r\n\r\nlike \r\n`if(x1===x&amp;&amp;y1==y)` \r\n**remember to increase the range of x when ur comparing.**\r\n\r\nif ur rectangle width is 30 take as `if (x1&gt;x&amp;&amp;x2&gt;x+30)`..likewise y","title":"Collision Detection between two images in Java","body":"<p>No need to use rectangles ... compare the coordinates of  2 players constantly.</p>\n\n<p>like \n<code>if(x1===x&amp;&amp;y1==y)</code> \n<strong>remember to increase the range of x when ur comparing.</strong></p>\n\n<p>if ur rectangle width is 30 take as <code>if (x1&gt;x&amp;&amp;x2&gt;x+30)</code>..likewise y</p>\n"},{"tags":[],"owner":{"account_id":27467358,"reputation":1,"user_id":20956842,"display_name":"SunnyGames"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1673275602,"creation_date":1673169271,"answer_id":75046627,"question_id":335600,"body_markdown":"It&#39;s Java code for collision of two or more ImageViews not rectangles or other,use ImageViews Instead.\r\n\r\n\r\n1.This code of Collision works every where in any views or layouts.\r\n\r\n2.Add a timer to repeat it and to detect collision repeatedly.\r\n\r\n3.It only works with views and layout.\r\n\r\n    if ((getLocationX(_v1) &gt; (getLocationX(_v2) - ((_w2*3) + 40))) &amp;&amp; (getLocationX(_v1) &lt; (getLocationX(_v2) + ((_w2*3) +40)))){\r\n\r\n    if ((getLocationY(_v1) &gt; (getLocationY(_v2) - ((_h2*3) + 40))) &amp;&amp; (getLocationY(_v1) &lt; (getLocationY(_v2) + ((_h2*3) +40)))){\r\n\r\n     showMessage(&quot;Collided&quot;);\r\n\r\n    }\r\n\r\n    }","title":"Collision Detection between two images in Java","body":"<p>It's Java code for collision of two or more ImageViews not rectangles or other,use ImageViews Instead.</p>\n<p>1.This code of Collision works every where in any views or layouts.</p>\n<p>2.Add a timer to repeat it and to detect collision repeatedly.</p>\n<p>3.It only works with views and layout.</p>\n<pre><code>if ((getLocationX(_v1) &gt; (getLocationX(_v2) - ((_w2*3) + 40))) &amp;&amp; (getLocationX(_v1) &lt; (getLocationX(_v2) + ((_w2*3) +40)))){\n\nif ((getLocationY(_v1) &gt; (getLocationY(_v2) - ((_h2*3) + 40))) &amp;&amp; (getLocationY(_v1) &lt; (getLocationY(_v2) + ((_h2*3) +40)))){\n\n showMessage(&quot;Collided&quot;);\n\n}\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25154690,"reputation":9,"user_id":21812779,"display_name":"Dodly Game"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686406603,"creation_date":1686406603,"answer_id":76446611,"question_id":335600,"body_markdown":"First create classes Player and Entity \r\n\r\n    public class Entity {\r\n    \r\n        int x, y, width, height;\r\n    \r\n        public Entity(int x, int y, int width, int height) {\r\n            this.x=x;\r\n            this.y=y;\r\n            this.width=width;\r\n            this.height=height;\r\n        }\r\n    }\r\n\r\n    public class Player {\r\n    \r\n        int x, y, width, height;\r\n    \r\n        public Player(int x, int y, int width, int height) {\r\n            this.x=x;\r\n            this.y=y;\r\n            this.width=width;\r\n            this.height=height;\r\n        }\r\n    }\r\n\r\nNext add this classes to Main class, and add method:\r\n\r\n    public static boolean collision (Player player, Entity entity) {\r\n        return player.x+player.width&gt;=entity.x&amp;&amp;player.x&lt;=entity.x+entity.width&amp;&amp;player.y&lt;=entity.y+entity.height&amp;&amp;player.y+player.height&gt;=entity.y;\r\n    }\r\n\r\nMain class:\r\n\r\n    import java.awt.*;\r\n    import javax.swing.*;\r\n    import java.awt.event.*;\r\n    public class Main extends JFrame implements ActionListener{\r\n        public static void main(String[] args) {\r\n            new Main();\r\n        }\r\n        Player player = new Player(100,100,50,50);\r\n        Entity entity = new Entity(75,75,50,50);\r\n        Timer timer = new Timer(16,this);\r\n        public Main(){\r\n            setSize(500,500);\r\n            setVisible(true);\r\n    \r\n            timer.start();\r\n        }\r\n        public void actionPerformed(ActionEvent e) {\r\n            repaint();\r\n            if (collision(player,entity)){\r\n                 //collision action\r\n            }\r\n        }\r\n        public void paint (Graphics g) {\r\n            super.paint(g);\r\n            g.drawImage(playerImage,player.x,player.y,player.width,player.height,null);\r\n            g.drawImage(entityImage,entity.x,entity.y,entity.width,entity.height,null);\r\n        }\r\n        public static boolean collision (Player player, Entity entity) {\r\n            return player.x+player.width&gt;=entity.x&amp;&amp;player.x&lt;=entity.x+entity.width&amp;&amp;player.y&lt;=entity.y+entity.height&amp;&amp;player.y+player.height&gt;=entity.y;\r\n        }\r\n    }","title":"Collision Detection between two images in Java","body":"<p>First create classes Player and Entity</p>\n<pre><code>public class Entity {\n\n    int x, y, width, height;\n\n    public Entity(int x, int y, int width, int height) {\n        this.x=x;\n        this.y=y;\n        this.width=width;\n        this.height=height;\n    }\n}\n\npublic class Player {\n\n    int x, y, width, height;\n\n    public Player(int x, int y, int width, int height) {\n        this.x=x;\n        this.y=y;\n        this.width=width;\n        this.height=height;\n    }\n}\n</code></pre>\n<p>Next add this classes to Main class, and add method:</p>\n<pre><code>public static boolean collision (Player player, Entity entity) {\n    return player.x+player.width&gt;=entity.x&amp;&amp;player.x&lt;=entity.x+entity.width&amp;&amp;player.y&lt;=entity.y+entity.height&amp;&amp;player.y+player.height&gt;=entity.y;\n}\n</code></pre>\n<p>Main class:</p>\n<pre><code>import java.awt.*;\nimport javax.swing.*;\nimport java.awt.event.*;\npublic class Main extends JFrame implements ActionListener{\n    public static void main(String[] args) {\n        new Main();\n    }\n    Player player = new Player(100,100,50,50);\n    Entity entity = new Entity(75,75,50,50);\n    Timer timer = new Timer(16,this);\n    public Main(){\n        setSize(500,500);\n        setVisible(true);\n\n        timer.start();\n    }\n    public void actionPerformed(ActionEvent e) {\n        repaint();\n        if (collision(player,entity)){\n             //collision action\n        }\n    }\n    public void paint (Graphics g) {\n        super.paint(g);\n        g.drawImage(playerImage,player.x,player.y,player.width,player.height,null);\n        g.drawImage(entityImage,entity.x,entity.y,entity.width,entity.height,null);\n    }\n    public static boolean collision (Player player, Entity entity) {\n        return player.x+player.width&gt;=entity.x&amp;&amp;player.x&lt;=entity.x+entity.width&amp;&amp;player.y&lt;=entity.y+entity.height&amp;&amp;player.y+player.height&gt;=entity.y;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29134816,"reputation":1,"user_id":22319238,"display_name":"Theo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691130906,"creation_date":1690878433,"answer_id":76809792,"question_id":335600,"body_markdown":"I reasently coded my own framework and this collision was very important. I think i made it very simple. It works with scale and the BufferedImage Method getRGB(x,y). \r\n\r\n    public boolean collidesWith(Sprite object) {\r\n    \r\n        if (new Rectangle(x,y,(int)(width*getScale()),(int)(height*getScale()))\r\n                .intersects(new Rectangle(object.x,object.y,(int)(object.width * object.getScale()),\r\n                        (int)(object.height * object.getScale())))){\r\n    \r\n            //making the first mask to compare that one with the other one\r\n            long[][][] maskThis = new long[(int)(width * getScale())][(int)(height*getScale())][3];\r\n    \r\n            for (int widthThis = 0; widthThis &lt; this.width * getScale(); widthThis++){\r\n                for (int heightThis = 0; heightThis &lt; this.height * getScale(); heightThis++){\r\n    \r\n                    maskThis[widthThis][heightThis][0] =\r\n                            image.getRGB((int)(widthThis/this.getScale()),(int)(heightThis/this.getScale()));\r\n                    maskThis[widthThis][heightThis][1] = widthThis+1+x;\r\n                    maskThis[widthThis][heightThis][2] = heightThis+1+y;\r\n                }\r\n            }\r\n    \r\n    \r\n            //making the second mask to compare that one with the other one\r\n            long[][][] maskObject = new long[(int)(object.width* object.getScale())][(int)(object.height* object.getScale())][3];\r\n    \r\n            for (int widthThis = 0; widthThis &lt; object.width * object.getScale(); widthThis++){\r\n                for (int heightThis = 0; heightThis &lt; object.height * object.getScale(); heightThis++){\r\n    \r\n                    maskObject[widthThis][heightThis][0] =\r\n                            object.getImage().getRGB((int)(widthThis/object.getScale()),(int)(heightThis/object.getScale()));\r\n                    maskObject[widthThis][heightThis][1] = widthThis+1+ object.x;\r\n                    maskObject[widthThis][heightThis][2] = heightThis+1 + object.y;\r\n                }\r\n            }\r\n    \r\n            //the final answer\r\n            for (int thatWidth = 0; thatWidth &lt; this.width * getScale(); thatWidth++) {\r\n                for (int thatHeight = 0; thatHeight &lt; this.height * getScale(); thatHeight++) {\r\n    \r\n                    if (maskThis[thatWidth][thatHeight][0] != 0) {\r\n                        for (int objectThatWidth = 0; objectThatWidth &lt; object.width * object.getScale(); objectThatWidth++){\r\n                            for (int objectThatHeight = 0; objectThatHeight &lt; object.height * object.getScale(); objectThatHeight++) {\r\n                                if (maskObject[objectThatWidth][objectThatHeight][1] == maskThis[thatWidth][thatHeight][1]\r\n                                        &amp;&amp; maskObject[objectThatWidth][objectThatHeight][2] == maskThis[thatWidth][thatHeight][2]\r\n                                        &amp;&amp; maskObject[objectThatWidth][objectThatHeight][0] != 0\r\n                                ){\r\n                                    return true;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n    \r\n        return false;\r\n    }","title":"Collision Detection between two images in Java","body":"<p>I reasently coded my own framework and this collision was very important. I think i made it very simple. It works with scale and the BufferedImage Method getRGB(x,y).</p>\n<pre><code>public boolean collidesWith(Sprite object) {\n\n    if (new Rectangle(x,y,(int)(width*getScale()),(int)(height*getScale()))\n            .intersects(new Rectangle(object.x,object.y,(int)(object.width * object.getScale()),\n                    (int)(object.height * object.getScale())))){\n\n        //making the first mask to compare that one with the other one\n        long[][][] maskThis = new long[(int)(width * getScale())][(int)(height*getScale())][3];\n\n        for (int widthThis = 0; widthThis &lt; this.width * getScale(); widthThis++){\n            for (int heightThis = 0; heightThis &lt; this.height * getScale(); heightThis++){\n\n                maskThis[widthThis][heightThis][0] =\n                        image.getRGB((int)(widthThis/this.getScale()),(int)(heightThis/this.getScale()));\n                maskThis[widthThis][heightThis][1] = widthThis+1+x;\n                maskThis[widthThis][heightThis][2] = heightThis+1+y;\n            }\n        }\n\n\n        //making the second mask to compare that one with the other one\n        long[][][] maskObject = new long[(int)(object.width* object.getScale())][(int)(object.height* object.getScale())][3];\n\n        for (int widthThis = 0; widthThis &lt; object.width * object.getScale(); widthThis++){\n            for (int heightThis = 0; heightThis &lt; object.height * object.getScale(); heightThis++){\n\n                maskObject[widthThis][heightThis][0] =\n                        object.getImage().getRGB((int)(widthThis/object.getScale()),(int)(heightThis/object.getScale()));\n                maskObject[widthThis][heightThis][1] = widthThis+1+ object.x;\n                maskObject[widthThis][heightThis][2] = heightThis+1 + object.y;\n            }\n        }\n\n        //the final answer\n        for (int thatWidth = 0; thatWidth &lt; this.width * getScale(); thatWidth++) {\n            for (int thatHeight = 0; thatHeight &lt; this.height * getScale(); thatHeight++) {\n\n                if (maskThis[thatWidth][thatHeight][0] != 0) {\n                    for (int objectThatWidth = 0; objectThatWidth &lt; object.width * object.getScale(); objectThatWidth++){\n                        for (int objectThatHeight = 0; objectThatHeight &lt; object.height * object.getScale(); objectThatHeight++) {\n                            if (maskObject[objectThatWidth][objectThatHeight][1] == maskThis[thatWidth][thatHeight][1]\n                                    &amp;&amp; maskObject[objectThatWidth][objectThatHeight][2] == maskThis[thatWidth][thatHeight][2]\n                                    &amp;&amp; maskObject[objectThatWidth][objectThatHeight][0] != 0\n                            ){\n                                return true;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        return false;\n    }\n\n    return false;\n}\n</code></pre>\n"}],"owner":{"account_id":2584,"reputation":12778,"user_id":3609,"accept_rate":100,"display_name":"Mike B"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":122538,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"accepted_answer_id":335830,"answer_count":12,"score":15,"last_activity_date":1691130906,"creation_date":1228254795,"question_id":335600,"body_markdown":"I have two characters displayed in a game I am writing, the player and the enemy. defined as such:\r\n\r\n    public void player(Graphics g) {\r\n        g.drawImage(plimg, x, y, this);\r\n    }\r\n    \r\n    public void enemy(Graphics g) {\r\n        g.drawImage(enemy, 200, 200, this);\r\n    }\r\n\r\nThen called with:\r\n\r\n    player(g);\r\n    enemy(g);\r\n\r\nI am able to move player() around with the keyboard, but I am at a loss when trying to detect a collision between the two. A lot of people have said to use Rectangles, but being a beginner I cannot see how I would link this into my existing code. Can anyone offer some advice for me?","title":"Collision Detection between two images in Java","body":"<p>I have two characters displayed in a game I am writing, the player and the enemy. defined as such:</p>\n\n<pre><code>public void player(Graphics g) {\n    g.drawImage(plimg, x, y, this);\n}\n\npublic void enemy(Graphics g) {\n    g.drawImage(enemy, 200, 200, this);\n}\n</code></pre>\n\n<p>Then called with:</p>\n\n<pre><code>player(g);\nenemy(g);\n</code></pre>\n\n<p>I am able to move player() around with the keyboard, but I am at a loss when trying to detect a collision between the two. A lot of people have said to use Rectangles, but being a beginner I cannot see how I would link this into my existing code. Can anyone offer some advice for me?</p>\n"},{"tags":["java","string","checksum","astm"],"comments":[{"owner":{"account_id":213468,"reputation":103489,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1520867449,"post_id":49238341,"comment_id":85480424,"body_markdown":"Are you sure you should be using a `DataOutputStream`? And using `String.getBytes()` without explicitly specifying a character set is an accident waiting to happen. Also please clarify how it doesn&#39;t work. You&#39;re not providing us a lot to go on.","body":"Are you sure you should be using a <code>DataOutputStream</code>? And using <code>String.getBytes()</code> without explicitly specifying a character set is an accident waiting to happen. Also please clarify how it doesn&#39;t work. You&#39;re not providing us a lot to go on."},{"owner":{"account_id":2302200,"reputation":585,"user_id":2022273,"display_name":"Anatole ABE"},"score":1,"creation_date":1520872655,"post_id":49238341,"comment_id":85484091,"body_markdown":"I use `DataOutputStream` because the connexion is done by the socket, and i have to write bytes to communicate with the receiver. As you can see in top, the string is firstly initialized before `getBytes()`. \n\nTo be more explicit, I want to order the client to start a test by sending him the information on the patient from the frame above. But the concern is that after typing orders that are lower, I do not see the result at the client.\n\nDo you know how to translate ASTM request in JAVA?\n\nI take inspiration on this http://www.med-kim.com.tr/images/kataloglar/5d7cc11c-e.pdf","body":"I use <code>DataOutputStream</code> because the connexion is done by the socket, and i have to write bytes to communicate with the receiver. As you can see in top, the string is firstly initialized before <code>getBytes()</code>.   To be more explicit, I want to order the client to start a test by sending him the information on the patient from the frame above. But the concern is that after typing orders that are lower, I do not see the result at the client.  Do you know how to translate ASTM request in JAVA?  I take inspiration on this <a href=\"http://www.med-kim.com.tr/images/kataloglar/5d7cc11c-e.pdf\" rel=\"nofollow noreferrer\">med-kim.com.tr/images/kataloglar/5d7cc11c-e.pdf</a>"},{"owner":{"account_id":213468,"reputation":103489,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1520876398,"post_id":49238341,"comment_id":85486370,"body_markdown":"A `DataOutputStream` is for writing a very specific data format, you likely need a plain `OutputStream`.","body":"A <code>DataOutputStream</code> is for writing a very specific data format, you likely need a plain <code>OutputStream</code>."}],"answers":[{"tags":[],"owner":{"account_id":6451015,"reputation":159,"user_id":4997939,"display_name":"Muhammad  Nadeem"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1521027178,"creation_date":1520947251,"answer_id":49257294,"question_id":49238341,"body_markdown":"Before answering, lets discuss machine mechanism for Bidirectional.\r\n    \r\n    String h1, s2, s3, s4, s5, s6 = &quot;&quot;;\r\n        h1 = &quot;H|@^\\\\|ODM-IdfDGIWA-36|||GeneXpert PC^GeneXpert^4.8|||||LIS||P|1394-97|20070521100245&quot;;\r\n        s2 = &quot;P|1&quot;;\r\n        s3 = &quot;O|1|SID-818||^^^TestId-12|S|20070812140500|||||A||||ORH||||||||||Q&quot;;\r\n        s4 = &quot;O|2|SID-818||^^^TestId-14|S|20070812140600|||||A||||ORH||||||||||Q&quot;;\r\n        s5 = &quot;O|3|SID-818||^^^TestId-16|S|20070812140700|||||A||||ORH||||||||||Q&quot;;\r\n        s6 = &quot;L|1|F&quot;;\r\n\r\n**First**, viewing above String message, there isn&#39;t any tag numbering as every machine I have done so far requires **Tag number**. For example:\r\n\r\n    1H|\\^&amp;|||CS-2500^00-08^22029^^^CP^BV981798||||||||E1394-97\r\n    2P|1|||00000152556|^JOHN^ABC||19440601|M|||||^Dr.Shaukat Khanum Hospital|||||||||^^^EAST\r\n    3O|1|000038^01^0012586236^B||^^^051^^100.00&#165;^^^044^^100.00|R|201803081225236|||||N\r\n    4L|1|N\r\nSo, you must have **NUMBERING** for each tag. \r\n\r\n**Second**, Machine sends following query at first time:\r\n\r\n    1H|\\^&amp;|||CS-2500^^22029^^^CP^BV981798||||||||E1394-9711\r\n    2Q|1|000038^01^   0012365845B||^^^040^PT-INN\\^^^050^APTT-FS|0|201803081227007F\r\n    3L|1|NF9\r\n\r\nIn, Query(2Q) Tag, `000038` rack id, `01` rack sequence number, `001H18074618` sample id (read from Barcode), further information can be verified from host or LIS manual provided by machine vendor. \r\n\r\n**Third**, When we receive this message, we will make message for machine that I have described above (writing again below) with additional **checksum** information. Again, this checksum can be found in host or LIS manual of machine.\r\n\r\n    1H|\\^&amp;|||CS-2500^00-08^22029^^^CP^BV981798||||||||E1394-97\r\n    2P|1|||00000152556|^JOHN^ABC||19440601|M|||||^Dr.Shaukat Khanum Hospital|||||||||^^^EAST\r\n    3O|1|000038^01^12345678^B||^^^051^^100.00&#165;^^^044^^100.00|R|201803081225236|||||N\r\n    4L|1|N\r\n\r\nExample of Checksum calculation. Note that it may vary from machine to machine. \r\n\r\n      public static String getCheckSum(String msg) {\r\n        int sum = 0;\r\n        for (int i = 0; i &lt; msg.length(); i++) {\r\n            sum += msg.charAt(i);\r\n        }\r\n        sum += 16; //adding CR and ETX AND ETB\r\n        sum = sum % 256;\r\n        String checksum = Integer.toHexString(sum).toUpperCase();\r\n        if (checksum.length() == 1) {\r\n            checksum = &quot;0&quot; + checksum;\r\n        }\r\n        //System.out.println(&quot;\\n Check Sum is =&quot;+checksum);\r\n        return checksum;\r\n    }\r\n\r\nAnd here is our complete message that will be sent to machine:\r\n\r\n    String retmsg = &quot;3O|1|&quot; + rackId + &quot;^&quot; + positionNumber + &quot;^&quot; + sampleId + &quot;^B||&quot; + testIds + &quot;|&quot; + priority + &quot;|&quot; + sysDate + &quot;|||||&quot; + orderType + &quot;&quot;;\r\n        logException(&quot;OrderMessae   :&quot; + retmsg);\r\n        retmsg = ProtocolASCII.STX + retmsg + ProtocolASCII.CR + ProtocolASCII.ETX + ProtocolMessage.getCheckSum(retmsg) + ProtocolASCII.CR + ProtocolASCII.LF;\r\n\r\n**Last but not least**, I don&#39;t know what is the machine as I don&#39;t have manual but I sense that you don&#39;t need to send every message one by one. You can send all at once. \r\n\r\nhere is the code snippet of sending and receiving message to and from machine.\r\n\r\n    while (clientIntMessage != ProtocolASCII.EOT) {\r\n                        clientIntMessage = inFromClient.read();\r\n                        currentMsg += String.valueOf(Character.toChars(clientIntMessage));\r\n                        // System.out.println(currentMsg);\r\n                        if (clientIntMessage == ProtocolASCII.ENQ) {\r\n                            outToClient.writeBytes(&quot;&quot; + ProtocolASCII.ACK);\r\n                            System.out.println(&quot;[ACK] on Analyzer [ENQ]&quot;);\r\n                        } else if (clientIntMessage == ProtocolASCII.ACK) {                        \r\n                            System.out.println(&quot;Analyzer [ACK]&quot;);\r\n                            // Send your order message here\r\n                             outToClient.writeBytes(retmsg);\r\n                            }\r\n                        } else if (clientIntMessage == ProtocolASCII.LF) {\r\n                            outToClient.writeBytes(&quot;&quot; + ProtocolASCII.ACK);\r\n                        } else if (clientIntMessage == ProtocolASCII.NAK) {\r\n                            System.out.println(&quot; Analyzer sent [NAK] &quot;);\r\n                        }\r\n\r\n                    }\r\n\r\nWhere **ProtocolASCII.ACK** is `&#39;\\006&#39;`, **ProtocolASCII.ENQ** is `&#39;\\005&#39;` and **ProtocolASCII.EOT** is `&#39;\\004&#39;`.\r\n\r\nThe code is pretty much self explanatory and I am using it in production. \r\n\r\nCan you tell us which machine you are interfacing? It may help you if I have already integrated. \r\n\r\nThanks . If further assistance is required, let me know.\r\n\r\nFor your reference:\r\n\r\n    public class ProtocolASCII {\r\n\r\n      public static char STX = &#39;\\002&#39;;\r\n      public static char ETX = &#39;\\003&#39;;\r\n      public static char ETB = &#39;\\027&#39;;\r\n      public static char EOT = &#39;\\004&#39;;\r\n      public static char ENQ = &#39;\\005&#39;;\r\n      public static char ACK = &#39;\\006&#39;;\r\n      public static char NAK = &#39;\\025&#39;;\r\n      public static char CR = &#39;\\r&#39;;\r\n      public static char LF = &#39;\\n&#39;;\r\n      public static char MOR = &#39;&gt;&#39;;\r\n      public static char FS = &#39;\\034&#39;;\r\n      public static char GS = &#39;\\035&#39;;\r\n      public static char RS = &#39;\\036&#39;;\r\n      public static char SFS = &#39;\\027&#39;;\r\n      public static char VT = 0x0B; //END OF BLOCK 011\r\n    \r\n    \r\n    }\r\n\r\n **Update:**\r\n\r\nFrom your comments:\r\n\r\n`String retmsg = &quot;3O|1|&quot; + rackId + &quot;^&quot; + positionNumber + &quot;^&quot; + sampleId + &quot;^B||&quot; + testIds + &quot;|&quot; + priority + &quot;|&quot; + sysDate + &quot;|||||&quot; + orderType + &quot;&quot;;` Where **testIds** is the list of tests to perform. \r\n   \r\nexample multitest order send `4O|1||4^1^          12345678^B|^^^^WBC\\^^^^RBC\\^^^^HGB\\^^^^HCT\\^^^^MCV\\^^^^MCH\\^^^^MCHC\\^^^^PLT\\^^^^RDW-SD\\^^^^RDW-CV\\^^^^PDW\\^^^^MPV\\^^^^P-LCR\\^^^^PCT\\^^^^NEUT#\\^^^^LYMPH#\\^^^^MONO#\\^^^^EO#\\^^^^BASO#\\^^^^NEUT%\\^^^^LYMPH%\\^^^^MONO%\\^^^^EO%\\^^^^BASO%\\^^^^NRBC#\\^^^^NRBC%\\^^^^IG#\\^^^^IG%|||||||N||||||||||||||F` \r\n\r\nGet test codes from LIS manual or from company engineer and make pattern accordingly.\r\n\r\n**Update 2**\r\n        \r\n    Socket clientSocket = null;\r\n    public static char STX = &#39;\\002&#39;;\r\n    public static char ETX = &#39;\\003&#39;;\r\n    public static char ETB = &#39;\\027&#39;;\r\n    public static char EOT = &#39;\\004&#39;;\r\n    public static char ENQ = &#39;\\005&#39;;\r\n    public static char ACK = &#39;\\006&#39;;\r\n    public static char NAK = &#39;\\025&#39;;\r\n    public static char CR = &#39;\\r&#39;;\r\n    public static char LF = &#39;\\n&#39;;\r\n    public static char MOR = &#39;&gt;&#39;;\r\n    public static char FS = &#39;\\034&#39;;\r\n    public static char GS = &#39;\\035&#39;;\r\n    public static char RS = &#39;\\036&#39;;\r\n    public static char SFS = &#39;\\027&#39;;\r\n    public static char VT = 0x0B; //END OF BLOCK 011\r\n    public static Vector&lt;String&gt; vecMessages = new Vector&lt;String&gt;();\r\n    private static int currentMsgCount = 0;\r\n    private static ServerSocket server;\r\n    private static Socket connection;\r\n    Message mes = new Message();\r\n\r\n    public static void main(String args[]) throws IOException, InterruptedException {\r\n        server = new ServerSocket(12221);\r\n        boolean stopped = false;\r\n\r\n        System.out.println(&quot; start... &quot;);\r\n        connection = server.accept();\r\n        System.out.println(&quot;wait for connection&quot;);\r\n        BufferedReader inFromClient = new BufferedReader(new InputStreamReader(connection.getInputStream()));\r\n        DataOutputStream outToClient = new DataOutputStream(connection.getOutputStream());\r\n        String currentMsg = &quot;&quot;;\r\n        int clientIntMessage;\r\n\r\n    //    String h1, s2, s3, s4, s5, s6 = &quot;&quot;;\r\n    //    h1 = &quot;1H|@^\\\\|ODM-IdfDGIWA-36|||GeneXpert     PC^GeneXpert^4.8|||||LIS||P|1394-97|20070521100245&quot; + ProtocolASCII.LF\r\n    //            + &quot;P|1&quot; + ProtocolASCII.LF\r\n    //            + &quot;O|1|SID-818||^^^TestId-12|S|20070812140500|||||A||||ORH||||||||||Q&quot; + ProtocolASCII.LF\r\n    //            + &quot;L|1|F&quot; + ProtocolASCII.LF;\r\n    //    s2 = &quot;P|1&quot;;\r\n    //    s3 = &quot;O|1|SID-818||^^^TestId-12|S|20070812140500|||||A||||ORH||||||||||Q&quot;;\r\n    //    //s4 = &quot;O|2|SID-818||^^^TestId-14|S|20070812140600|||||A||||ORH||||||||||Q&quot;;\r\n    //    //s5 = &quot;O|3|SID-818||^^^TestId-16|S|20070812140700|||||A||||ORH||||||||||Q&quot;;\r\n    //    s6 = &quot;L|1|F&quot;;\r\n    //\r\n    //    String retmsg = h1;\r\n    //    //logException(&quot;OrderMessae   :&quot; + retmsg);\r\n    //    retmsg = ProtocolASCII.STX + retmsg + ProtocolASCII.CR + ProtocolASCII.ETX + ProtocolMessage.getCheckSum(retmsg) + ProtocolASCII.CR + ProtocolASCII.LF;\r\n\r\n    \r\n\r\n        clientIntMessage = inFromClient.read();\r\n            //while (clientIntMessage != ProtocolASCII.EOT) {\r\n            while (true) {\r\n    \r\n                while (clientIntMessage != EOT) {\r\n                    clientIntMessage = inFromClient.read();\r\n                    currentMsg += String.valueOf(Character.toChars(clientIntMessage));\r\n                    // System.out.println(currentMsg);\r\n                    if (clientIntMessage == ENQ) {\r\n                        outToClient.writeBytes(&quot;&quot; + ACK);\r\n                        System.out.println(&quot;[ACK] on Analyzer [ENQ]&quot;);\r\n                    } else if (clientIntMessage == ACK) {\r\n    \r\n                        System.out.println(&quot;Analyzer [ACK]&quot;);\r\n                        if (vecMessages.size() == currentMsgCount) {\r\n                            vecMessages.clear();\r\n                            currentMsgCount = 0;\r\n                            outToClient.writeBytes(&quot;&quot; + EOT);\r\n                            System.out.println(&quot;Host [EOT]&quot;);\r\n                        } else {\r\n                            String msg = (String) vecMessages.get(currentMsgCount++);\r\n    \r\n                            outToClient.writeBytes(msg);\r\n    //                                System.out.println(&quot;Msg &quot; + msg.substring(0, msg.length() - 4));\r\n                        }\r\n                    } else if (clientIntMessage == LF) {\r\n                        outToClient.writeBytes(&quot;&quot; + ACK);\r\n                    } else if (clientIntMessage == NAK) {\r\n                        System.out.println(&quot; Analyzer sent [NAK] &quot;);\r\n                    }\r\n    \r\n                }\r\n    \r\n                System.out.println(currentMsg);\r\n                mes.parser(currentMsg);\r\n    \r\n                clientIntMessage = 0;\r\n                currentMsg = &quot;&quot;;\r\n    \r\n            }\r\n    //        connection.close();\r\n    //        stopped = true;\r\n        }\r\n    \r\n        public static class Message {\r\n    //        machine Send This Query   ==&gt;6.3.2.1.5 Example of Upload Message – Instrument System Sends Host Query\r\n    //        H|@^\\|b4a88d9adab947a7b3dca2b534119c25||ICU^GeneXpert^1.0|||||LIS||P|1394-97|20070521100245 \r\n    //        Q|1|PatientID-556^SpecimenID-888||||||||||O@N \r\n    //        L|1|N \r\n    \r\n            public static Vector&lt;String&gt; vecMessages = new Vector&lt;String&gt;();\r\n    //        make message for machine\r\n    \r\n            public String HeaderMessage() {\r\n                String retmsg = &quot;H|@^\\\\|ccc6ade20d3623314sffa3e287f2314ad||LIS|||||ICU^GeneXpert^1.0||P|1394-97|20070521100245&quot;;\r\n    //        System.out.println(&quot;HeaderMessage  :&quot; + retmsg);\r\n                retmsg = STX + retmsg + CR + ETX + getCheckSum(retmsg) + CR + LF;\r\n    \r\n                return retmsg;\r\n            }\r\n            //  P|1       \r\n            //      6.3.1.3.3 Patient Information Record     Find in Document and make it as per document\r\n    \r\n            public String PatientMessage(Patient pat) {  //(Patient pat)\r\n    \r\n                String retmsg = &quot;P|1|||&quot; + pat.getMRNO() + &quot;|^&quot; + pat.getPatientName() + &quot;||&quot; + pat.getDOB() + &quot;|&quot; + pat.getGender() + &quot;|||||^Dr.SKM-LAS||||||||||||^^^EAST&quot;;\r\n    \r\n                retmsg = STX + retmsg + CR + ETX + getCheckSum(retmsg) + CR + LF;\r\n    \r\n                return retmsg;\r\n            }\r\n    //                6.3.1.3.4 Test Order Record      Find in Document\r\n    \r\n            public String orderMessage(String sampleId, String testIds, String orderType, String rackId, String positionNumber, String priority) {\r\n                DateFormat dateFormat = new SimpleDateFormat(&quot;yyyyMMddHHmmSS&quot;);\r\n                String sysDate = dateFormat.format(new Date());\r\n    \r\n                String retmsg = &quot;3O|1|&quot; + rackId + &quot;^&quot; + positionNumber + &quot;^&quot; + sampleId + &quot;^B||&quot; + testIds + &quot;|&quot; + priority + &quot;|&quot; + sysDate + &quot;|||||&quot; + orderType + &quot;&quot;;\r\n    \r\n                retmsg = STX + retmsg + CR + ETX + getCheckSum(retmsg) + CR + LF;\r\n    \r\n                return retmsg;\r\n            }\r\n    \r\n    //        6.3.1.3.5 Message Terminator Record    Find in Document\r\n            public String terminatorMessage(String type) {\r\n                String retmsg = &quot;L|1|&quot; + type;\r\n    \r\n                retmsg = STX + retmsg + CR + ETX + getCheckSum(retmsg) + CR + LF;\r\n                return retmsg;\r\n            }\r\n    \r\n            public String getCheckSum(String msg) {\r\n                int sum = 0;\r\n                for (int i = 0; i &lt; msg.length(); i++) {\r\n                    sum += msg.charAt(i);\r\n                }\r\n                sum += 16; //adding CR and ETX AND ETB\r\n                sum = sum % 256;\r\n                String checksum = Integer.toHexString(sum).toUpperCase();\r\n                if (checksum.length() == 1) {\r\n                    checksum = &quot;0&quot; + checksum;\r\n                }\r\n                //System.out.println(&quot;\\n Check Sum is =&quot;+checksum);\r\n                return checksum;\r\n            }\r\n    \r\n            public void parser(String input) {\r\n    //        Use StringTokenizer for split or split\r\n    \r\n                if (input.charAt(1) == &#39;Q&#39; || input.charAt(2) == &#39;Q&#39;) {\r\n    \r\n                    //Q|1|PatientID-556^SpecimenID-888||||||||||O@N \r\n    //                        Split it and get information which machine send in Query SampleId and other\r\n                    String rackId = &quot;get from Query to check document&quot;;\r\n                    String positionNumber = &quot;get from Query to check document&quot;;\r\n                    String sampleId = &quot;get from Query to check document&quot;;\r\n    \r\n    //                        this.FetchOrders1(machineId, sampleId);     // for dummy Sample Run\r\n                    this.FetchOrders1(&quot;abc&quot;, sampleId);\r\n                    this.setMesType(&quot;Q&quot;);\r\n    \r\n                }\r\n    \r\n            }\r\n    \r\n            public void FetchOrders1(String machineId, String sampleId) {\r\n                try {\r\n                    this.vecMessages.add(HeaderMessage());\r\n                    this.vecMessages.add(PatientMessage()); //Define patient information\r\n                    this.vecMessages.add(orderMessage(sampleId, &quot;test&quot;, &quot;N&quot;, &quot;rackId&quot;, &quot;positionNumber&quot;, &quot;R&quot;));\r\n                    this.vecMessages.add(terminatorMessage(&quot;N&quot;));\r\n    \r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n    \r\n        }`\r\n            \r\n            \r\n\r\n","title":"How to write and send an ASTM frame to medical equipment","body":"<p>Before answering, lets discuss machine mechanism for Bidirectional.</p>\n\n<pre><code>String h1, s2, s3, s4, s5, s6 = \"\";\n    h1 = \"H|@^\\\\|ODM-IdfDGIWA-36|||GeneXpert PC^GeneXpert^4.8|||||LIS||P|1394-97|20070521100245\";\n    s2 = \"P|1\";\n    s3 = \"O|1|SID-818||^^^TestId-12|S|20070812140500|||||A||||ORH||||||||||Q\";\n    s4 = \"O|2|SID-818||^^^TestId-14|S|20070812140600|||||A||||ORH||||||||||Q\";\n    s5 = \"O|3|SID-818||^^^TestId-16|S|20070812140700|||||A||||ORH||||||||||Q\";\n    s6 = \"L|1|F\";\n</code></pre>\n\n<p><strong>First</strong>, viewing above String message, there isn't any tag numbering as every machine I have done so far requires <strong>Tag number</strong>. For example:</p>\n\n<pre><code>1H|\\^&amp;|||CS-2500^00-08^22029^^^CP^BV981798||||||||E1394-97\n2P|1|||00000152556|^JOHN^ABC||19440601|M|||||^Dr.Shaukat Khanum Hospital|||||||||^^^EAST\n3O|1|000038^01^0012586236^B||^^^051^^100.00¥^^^044^^100.00|R|201803081225236|||||N\n4L|1|N\n</code></pre>\n\n<p>So, you must have <strong>NUMBERING</strong> for each tag. </p>\n\n<p><strong>Second</strong>, Machine sends following query at first time:</p>\n\n<pre><code>1H|\\^&amp;|||CS-2500^^22029^^^CP^BV981798||||||||E1394-9711\n2Q|1|000038^01^   0012365845B||^^^040^PT-INN\\^^^050^APTT-FS|0|201803081227007F\n3L|1|NF9\n</code></pre>\n\n<p>In, Query(2Q) Tag, <code>000038</code> rack id, <code>01</code> rack sequence number, <code>001H18074618</code> sample id (read from Barcode), further information can be verified from host or LIS manual provided by machine vendor. </p>\n\n<p><strong>Third</strong>, When we receive this message, we will make message for machine that I have described above (writing again below) with additional <strong>checksum</strong> information. Again, this checksum can be found in host or LIS manual of machine.</p>\n\n<pre><code>1H|\\^&amp;|||CS-2500^00-08^22029^^^CP^BV981798||||||||E1394-97\n2P|1|||00000152556|^JOHN^ABC||19440601|M|||||^Dr.Shaukat Khanum Hospital|||||||||^^^EAST\n3O|1|000038^01^12345678^B||^^^051^^100.00¥^^^044^^100.00|R|201803081225236|||||N\n4L|1|N\n</code></pre>\n\n<p>Example of Checksum calculation. Note that it may vary from machine to machine. </p>\n\n<pre><code>  public static String getCheckSum(String msg) {\n    int sum = 0;\n    for (int i = 0; i &lt; msg.length(); i++) {\n        sum += msg.charAt(i);\n    }\n    sum += 16; //adding CR and ETX AND ETB\n    sum = sum % 256;\n    String checksum = Integer.toHexString(sum).toUpperCase();\n    if (checksum.length() == 1) {\n        checksum = \"0\" + checksum;\n    }\n    //System.out.println(\"\\n Check Sum is =\"+checksum);\n    return checksum;\n}\n</code></pre>\n\n<p>And here is our complete message that will be sent to machine:</p>\n\n<pre><code>String retmsg = \"3O|1|\" + rackId + \"^\" + positionNumber + \"^\" + sampleId + \"^B||\" + testIds + \"|\" + priority + \"|\" + sysDate + \"|||||\" + orderType + \"\";\n    logException(\"OrderMessae   :\" + retmsg);\n    retmsg = ProtocolASCII.STX + retmsg + ProtocolASCII.CR + ProtocolASCII.ETX + ProtocolMessage.getCheckSum(retmsg) + ProtocolASCII.CR + ProtocolASCII.LF;\n</code></pre>\n\n<p><strong>Last but not least</strong>, I don't know what is the machine as I don't have manual but I sense that you don't need to send every message one by one. You can send all at once. </p>\n\n<p>here is the code snippet of sending and receiving message to and from machine.</p>\n\n<pre><code>while (clientIntMessage != ProtocolASCII.EOT) {\n                    clientIntMessage = inFromClient.read();\n                    currentMsg += String.valueOf(Character.toChars(clientIntMessage));\n                    // System.out.println(currentMsg);\n                    if (clientIntMessage == ProtocolASCII.ENQ) {\n                        outToClient.writeBytes(\"\" + ProtocolASCII.ACK);\n                        System.out.println(\"[ACK] on Analyzer [ENQ]\");\n                    } else if (clientIntMessage == ProtocolASCII.ACK) {                        \n                        System.out.println(\"Analyzer [ACK]\");\n                        // Send your order message here\n                         outToClient.writeBytes(retmsg);\n                        }\n                    } else if (clientIntMessage == ProtocolASCII.LF) {\n                        outToClient.writeBytes(\"\" + ProtocolASCII.ACK);\n                    } else if (clientIntMessage == ProtocolASCII.NAK) {\n                        System.out.println(\" Analyzer sent [NAK] \");\n                    }\n\n                }\n</code></pre>\n\n<p>Where <strong>ProtocolASCII.ACK</strong> is <code>'\\006'</code>, <strong>ProtocolASCII.ENQ</strong> is <code>'\\005'</code> and <strong>ProtocolASCII.EOT</strong> is <code>'\\004'</code>.</p>\n\n<p>The code is pretty much self explanatory and I am using it in production. </p>\n\n<p>Can you tell us which machine you are interfacing? It may help you if I have already integrated. </p>\n\n<p>Thanks . If further assistance is required, let me know.</p>\n\n<p>For your reference:</p>\n\n<pre><code>public class ProtocolASCII {\n\n  public static char STX = '\\002';\n  public static char ETX = '\\003';\n  public static char ETB = '\\027';\n  public static char EOT = '\\004';\n  public static char ENQ = '\\005';\n  public static char ACK = '\\006';\n  public static char NAK = '\\025';\n  public static char CR = '\\r';\n  public static char LF = '\\n';\n  public static char MOR = '&gt;';\n  public static char FS = '\\034';\n  public static char GS = '\\035';\n  public static char RS = '\\036';\n  public static char SFS = '\\027';\n  public static char VT = 0x0B; //END OF BLOCK 011\n\n\n}\n</code></pre>\n\n<p><strong>Update:</strong></p>\n\n<p>From your comments:</p>\n\n<p><code>String retmsg = \"3O|1|\" + rackId + \"^\" + positionNumber + \"^\" + sampleId + \"^B||\" + testIds + \"|\" + priority + \"|\" + sysDate + \"|||||\" + orderType + \"\";</code> Where <strong>testIds</strong> is the list of tests to perform. </p>\n\n<p>example multitest order send <code>4O|1||4^1^          12345678^B|^^^^WBC\\^^^^RBC\\^^^^HGB\\^^^^HCT\\^^^^MCV\\^^^^MCH\\^^^^MCHC\\^^^^PLT\\^^^^RDW-SD\\^^^^RDW-CV\\^^^^PDW\\^^^^MPV\\^^^^P-LCR\\^^^^PCT\\^^^^NEUT#\\^^^^LYMPH#\\^^^^MONO#\\^^^^EO#\\^^^^BASO#\\^^^^NEUT%\\^^^^LYMPH%\\^^^^MONO%\\^^^^EO%\\^^^^BASO%\\^^^^NRBC#\\^^^^NRBC%\\^^^^IG#\\^^^^IG%|||||||N||||||||||||||F</code> </p>\n\n<p>Get test codes from LIS manual or from company engineer and make pattern accordingly.</p>\n\n<p><strong>Update 2</strong></p>\n\n<pre><code>Socket clientSocket = null;\npublic static char STX = '\\002';\npublic static char ETX = '\\003';\npublic static char ETB = '\\027';\npublic static char EOT = '\\004';\npublic static char ENQ = '\\005';\npublic static char ACK = '\\006';\npublic static char NAK = '\\025';\npublic static char CR = '\\r';\npublic static char LF = '\\n';\npublic static char MOR = '&gt;';\npublic static char FS = '\\034';\npublic static char GS = '\\035';\npublic static char RS = '\\036';\npublic static char SFS = '\\027';\npublic static char VT = 0x0B; //END OF BLOCK 011\npublic static Vector&lt;String&gt; vecMessages = new Vector&lt;String&gt;();\nprivate static int currentMsgCount = 0;\nprivate static ServerSocket server;\nprivate static Socket connection;\nMessage mes = new Message();\n\npublic static void main(String args[]) throws IOException, InterruptedException {\n    server = new ServerSocket(12221);\n    boolean stopped = false;\n\n    System.out.println(\" start... \");\n    connection = server.accept();\n    System.out.println(\"wait for connection\");\n    BufferedReader inFromClient = new BufferedReader(new InputStreamReader(connection.getInputStream()));\n    DataOutputStream outToClient = new DataOutputStream(connection.getOutputStream());\n    String currentMsg = \"\";\n    int clientIntMessage;\n\n//    String h1, s2, s3, s4, s5, s6 = \"\";\n//    h1 = \"1H|@^\\\\|ODM-IdfDGIWA-36|||GeneXpert     PC^GeneXpert^4.8|||||LIS||P|1394-97|20070521100245\" + ProtocolASCII.LF\n//            + \"P|1\" + ProtocolASCII.LF\n//            + \"O|1|SID-818||^^^TestId-12|S|20070812140500|||||A||||ORH||||||||||Q\" + ProtocolASCII.LF\n//            + \"L|1|F\" + ProtocolASCII.LF;\n//    s2 = \"P|1\";\n//    s3 = \"O|1|SID-818||^^^TestId-12|S|20070812140500|||||A||||ORH||||||||||Q\";\n//    //s4 = \"O|2|SID-818||^^^TestId-14|S|20070812140600|||||A||||ORH||||||||||Q\";\n//    //s5 = \"O|3|SID-818||^^^TestId-16|S|20070812140700|||||A||||ORH||||||||||Q\";\n//    s6 = \"L|1|F\";\n//\n//    String retmsg = h1;\n//    //logException(\"OrderMessae   :\" + retmsg);\n//    retmsg = ProtocolASCII.STX + retmsg + ProtocolASCII.CR + ProtocolASCII.ETX + ProtocolMessage.getCheckSum(retmsg) + ProtocolASCII.CR + ProtocolASCII.LF;\n\n\n\n    clientIntMessage = inFromClient.read();\n        //while (clientIntMessage != ProtocolASCII.EOT) {\n        while (true) {\n\n            while (clientIntMessage != EOT) {\n                clientIntMessage = inFromClient.read();\n                currentMsg += String.valueOf(Character.toChars(clientIntMessage));\n                // System.out.println(currentMsg);\n                if (clientIntMessage == ENQ) {\n                    outToClient.writeBytes(\"\" + ACK);\n                    System.out.println(\"[ACK] on Analyzer [ENQ]\");\n                } else if (clientIntMessage == ACK) {\n\n                    System.out.println(\"Analyzer [ACK]\");\n                    if (vecMessages.size() == currentMsgCount) {\n                        vecMessages.clear();\n                        currentMsgCount = 0;\n                        outToClient.writeBytes(\"\" + EOT);\n                        System.out.println(\"Host [EOT]\");\n                    } else {\n                        String msg = (String) vecMessages.get(currentMsgCount++);\n\n                        outToClient.writeBytes(msg);\n//                                System.out.println(\"Msg \" + msg.substring(0, msg.length() - 4));\n                    }\n                } else if (clientIntMessage == LF) {\n                    outToClient.writeBytes(\"\" + ACK);\n                } else if (clientIntMessage == NAK) {\n                    System.out.println(\" Analyzer sent [NAK] \");\n                }\n\n            }\n\n            System.out.println(currentMsg);\n            mes.parser(currentMsg);\n\n            clientIntMessage = 0;\n            currentMsg = \"\";\n\n        }\n//        connection.close();\n//        stopped = true;\n    }\n\n    public static class Message {\n//        machine Send This Query   ==&gt;6.3.2.1.5 Example of Upload Message – Instrument System Sends Host Query\n//        H|@^\\|b4a88d9adab947a7b3dca2b534119c25||ICU^GeneXpert^1.0|||||LIS||P|1394-97|20070521100245 \n//        Q|1|PatientID-556^SpecimenID-888||||||||||O@N \n//        L|1|N \n\n        public static Vector&lt;String&gt; vecMessages = new Vector&lt;String&gt;();\n//        make message for machine\n\n        public String HeaderMessage() {\n            String retmsg = \"H|@^\\\\|ccc6ade20d3623314sffa3e287f2314ad||LIS|||||ICU^GeneXpert^1.0||P|1394-97|20070521100245\";\n//        System.out.println(\"HeaderMessage  :\" + retmsg);\n            retmsg = STX + retmsg + CR + ETX + getCheckSum(retmsg) + CR + LF;\n\n            return retmsg;\n        }\n        //  P|1       \n        //      6.3.1.3.3 Patient Information Record     Find in Document and make it as per document\n\n        public String PatientMessage(Patient pat) {  //(Patient pat)\n\n            String retmsg = \"P|1|||\" + pat.getMRNO() + \"|^\" + pat.getPatientName() + \"||\" + pat.getDOB() + \"|\" + pat.getGender() + \"|||||^Dr.SKM-LAS||||||||||||^^^EAST\";\n\n            retmsg = STX + retmsg + CR + ETX + getCheckSum(retmsg) + CR + LF;\n\n            return retmsg;\n        }\n//                6.3.1.3.4 Test Order Record      Find in Document\n\n        public String orderMessage(String sampleId, String testIds, String orderType, String rackId, String positionNumber, String priority) {\n            DateFormat dateFormat = new SimpleDateFormat(\"yyyyMMddHHmmSS\");\n            String sysDate = dateFormat.format(new Date());\n\n            String retmsg = \"3O|1|\" + rackId + \"^\" + positionNumber + \"^\" + sampleId + \"^B||\" + testIds + \"|\" + priority + \"|\" + sysDate + \"|||||\" + orderType + \"\";\n\n            retmsg = STX + retmsg + CR + ETX + getCheckSum(retmsg) + CR + LF;\n\n            return retmsg;\n        }\n\n//        6.3.1.3.5 Message Terminator Record    Find in Document\n        public String terminatorMessage(String type) {\n            String retmsg = \"L|1|\" + type;\n\n            retmsg = STX + retmsg + CR + ETX + getCheckSum(retmsg) + CR + LF;\n            return retmsg;\n        }\n\n        public String getCheckSum(String msg) {\n            int sum = 0;\n            for (int i = 0; i &lt; msg.length(); i++) {\n                sum += msg.charAt(i);\n            }\n            sum += 16; //adding CR and ETX AND ETB\n            sum = sum % 256;\n            String checksum = Integer.toHexString(sum).toUpperCase();\n            if (checksum.length() == 1) {\n                checksum = \"0\" + checksum;\n            }\n            //System.out.println(\"\\n Check Sum is =\"+checksum);\n            return checksum;\n        }\n\n        public void parser(String input) {\n//        Use StringTokenizer for split or split\n\n            if (input.charAt(1) == 'Q' || input.charAt(2) == 'Q') {\n\n                //Q|1|PatientID-556^SpecimenID-888||||||||||O@N \n//                        Split it and get information which machine send in Query SampleId and other\n                String rackId = \"get from Query to check document\";\n                String positionNumber = \"get from Query to check document\";\n                String sampleId = \"get from Query to check document\";\n\n//                        this.FetchOrders1(machineId, sampleId);     // for dummy Sample Run\n                this.FetchOrders1(\"abc\", sampleId);\n                this.setMesType(\"Q\");\n\n            }\n\n        }\n\n        public void FetchOrders1(String machineId, String sampleId) {\n            try {\n                this.vecMessages.add(HeaderMessage());\n                this.vecMessages.add(PatientMessage()); //Define patient information\n                this.vecMessages.add(orderMessage(sampleId, \"test\", \"N\", \"rackId\", \"positionNumber\", \"R\"));\n                this.vecMessages.add(terminatorMessage(\"N\"));\n\n            } catch (Exception e) {\n                e.printStackTrace();\n            }\n        }\n\n    }`\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12303965,"reputation":33,"user_id":8977589,"display_name":"jetshaun"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663660362,"creation_date":1663660362,"answer_id":73783282,"question_id":49238341,"body_markdown":"Your message should include a carriage return (CR) at the end of each string. It can be added as a String in Java in this way: &quot;\\r&quot;.\r\n\r\nFurthermore, the byte array that you write to the outputstream should include the following in this order: STX, frame number, message string (inclusive of the CR character mentioned earlier) ETX, two uppercase checksum characters, CR, LF.\r\n\r\nThe special ASCII characters (STX, ETX etc.) are mentioned here: https://www.cs.cmu.edu/~pattis/15-1XX/common/handouts/ascii.html","title":"How to write and send an ASTM frame to medical equipment","body":"<p>Your message should include a carriage return (CR) at the end of each string. It can be added as a String in Java in this way: &quot;\\r&quot;.</p>\n<p>Furthermore, the byte array that you write to the outputstream should include the following in this order: STX, frame number, message string (inclusive of the CR character mentioned earlier) ETX, two uppercase checksum characters, CR, LF.</p>\n<p>The special ASCII characters (STX, ETX etc.) are mentioned here: <a href=\"https://www.cs.cmu.edu/%7Epattis/15-1XX/common/handouts/ascii.html\" rel=\"nofollow noreferrer\">https://www.cs.cmu.edu/~pattis/15-1XX/common/handouts/ascii.html</a></p>\n"}],"owner":{"account_id":2302200,"reputation":585,"user_id":2022273,"display_name":"Anatole ABE"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13241,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":49257294,"answer_count":2,"score":2,"last_activity_date":1691128891,"creation_date":1520866845,"question_id":49238341,"body_markdown":"I am currently working on the ASTM protocol to send orders tests request to medical instrument. But I cannot send a message to the equipment correctly. To be more explicit, I want for example to send these frames:\r\n\r\n            String h1, s2, s3, s4, s5, s6 = &quot;&quot;;\r\n            h1 = &quot;H|@^\\\\|ODM-IdfDGIWA-36|||GeneXpert PC^GeneXpert^4.8|||||LIS||P|1394-97|20070521100245&quot;;\r\n            s2 = &quot;P|1&quot;;\r\n            s3 = &quot;O|1|SID-818||^^^TestId-12|S|20070812140500|||||A||||ORH||||||||||Q&quot;;\r\n            s4 = &quot;O|2|SID-818||^^^TestId-14|S|20070812140600|||||A||||ORH||||||||||Q&quot;;\r\n            s5 = &quot;O|3|SID-818||^^^TestId-16|S|20070812140700|||||A||||ORH||||||||||Q&quot;;\r\n            s6 = &quot;L|1|F&quot;;\r\n\r\nand here is how I am doing now:\r\n\r\n  \r\n\r\n        writeMeBytes(outToServer, h1.getBytes());\r\n        writeMeBytes(outToServer, s2.getBytes());\r\n        writeMeBytes(outToServer, s3.getBytes());\r\n        writeMeBytes(outToServer, s4.getBytes());\r\n        writeMeBytes(outToServer, s5.getBytes());\r\n        writeMeBytes(outToServer, s6.getBytes());\r\n\r\n  \r\n    public static void writeMeBytes(DataOutputStream dos, byte [] b){\r\n        if (b.length &gt;0){\r\n            int j = 0;\r\n            while (j &lt;= b.length-1) {\r\n                try {\r\n                    dos.write(b[j++]);\r\n                } catch (IOException ex) {\r\n                    Logger.getLogger(SimpleServer.class.getName()).log(Level.SEVERE, null, ex);\r\n                }\r\n                \r\n            }\r\n        }\r\n    }\r\n\r\nI turn it into byte and then send byte after byte.\r\n\r\nExcept that I do not see any change on the receiver side.\r\n\r\n**Update according to @Muhammad Answer**\r\n\r\nThis is what I did to send order to GeneXpert DX System\r\n\r\n    public class SimpleServer {\r\n\r\n    private static ServerSocket server;\r\n    private static Socket connection;\r\n\r\n    public static void main(String args[]) throws IOException, InterruptedException {\r\n        server = new ServerSocket(12221);\r\n        boolean stopped = false;\r\n\r\n        System.out.println(&quot; start... &quot;);\r\n        connection = server.accept();\r\n        System.out.println(&quot;wait for connection&quot;);\r\n        BufferedReader inFromClient = new BufferedReader(new InputStreamReader(connection.getInputStream()));\r\n        DataOutputStream outToClient = new DataOutputStream(connection.getOutputStream());\r\n        String currentMsg = &quot;&quot;;\r\n        int clientIntMessage;\r\n\r\n        String h1, s2, s3, s4, s5, s6 = &quot;&quot;;\r\n        h1 = &quot;1H|@^\\\\|ODM-IdfDGIWA-36|||GeneXpert PC^GeneXpert^4.8|||||LIS||P|1394-97|20070521100245&quot; + ProtocolASCII.LF\r\n                + &quot;P|1&quot; + ProtocolASCII.LF\r\n                + &quot;O|1|SID-818||^^^TestId-12|S|20070812140500|||||A||||ORH||||||||||Q&quot; + ProtocolASCII.LF\r\n                + &quot;L|1|F&quot; + ProtocolASCII.LF;\r\n        s2 = &quot;P|1&quot;;\r\n        s3 = &quot;O|1|SID-818||^^^TestId-12|S|20070812140500|||||A||||ORH||||||||||Q&quot;;\r\n        //s4 = &quot;O|2|SID-818||^^^TestId-14|S|20070812140600|||||A||||ORH||||||||||Q&quot;;\r\n        //s5 = &quot;O|3|SID-818||^^^TestId-16|S|20070812140700|||||A||||ORH||||||||||Q&quot;;\r\n        s6 = &quot;L|1|F&quot;;\r\n\r\n        String retmsg = h1;\r\n        //logException(&quot;OrderMessae   :&quot; + retmsg);\r\n        retmsg = ProtocolASCII.STX + retmsg + ProtocolASCII.CR + ProtocolASCII.ETX + ProtocolMessage.getCheckSum(retmsg) + ProtocolASCII.CR + ProtocolASCII.LF;\r\n\r\n        clientIntMessage = inFromClient.read();\r\n        //while (clientIntMessage != ProtocolASCII.EOT) {\r\n        while (true) {\r\n            currentMsg += String.valueOf(Character.toChars(clientIntMessage));\r\n            if (clientIntMessage == ProtocolASCII.ENQ) {\r\n                outToClient.writeBytes(&quot;&quot; + ProtocolASCII.ACK);\r\n                System.out.println(&quot; &lt;--- LIS [ACK] on DX [ENQ]&quot;);\r\n            } else if (clientIntMessage == ProtocolASCII.ACK) {\r\n                System.out.println(&quot; ---&gt; DX [ACK]&quot;);\r\n                // Send your order message here\r\n                outToClient.writeBytes(retmsg);\r\n            } else if (clientIntMessage == ProtocolASCII.CR) {\r\n                System.out.println(currentMsg);\r\n                outToClient.writeBytes(&quot;&quot; + ProtocolASCII.ACK);\r\n            } else if (clientIntMessage == ProtocolASCII.NAK) {\r\n                System.out.println(&quot; ---&gt; DX sent [NAK] &quot;);\r\n                System.out.println(&quot; --- LIS now wait 10 sec... &quot;);\r\n                Thread.sleep(10000);\r\n                outToClient.writeBytes(&quot;&quot; + ProtocolASCII.ENQ);\r\n                System.out.println(&quot; &lt;--- LIS [ENQ] &quot;);\r\n            } else if (clientIntMessage == ProtocolASCII.EOT) {\r\n                System.out.println(&quot; ---&gt; DX END OF TRANSMISSION&quot;);\r\n                outToClient.writeBytes(&quot;&quot; + ProtocolASCII.ENQ);\r\n                System.out.println(&quot; &lt;--- LIS [ENQ] &quot;);\r\n            }\r\n\r\n            if (stopped) {\r\n                break;\r\n            }\r\n            clientIntMessage = inFromClient.read();\r\n        }\r\n        connection.close();\r\n        stopped = true;\r\n    }}\r\n\r\nAnd this is the result I get from the console:\r\n\r\n    start... \r\n    wait for connection\r\n     &lt;--- LIS [ACK] on DX [ENQ]\r\n    1H|@^\\|ODM-rQTcjIWA-66||GeneXpert PC^GeneXpert^4.8|||||LIS||P|1394-97|20180314003724\r\n    Q|1|ALL||||||||||O@N\r\n    L|1|N\r\n    B5\r\n     ---&gt; DX [EOT] \r\n     &lt;--- LIS [ENQ] \r\n     ---&gt; DX [ACK]\r\n     ---&gt; DX sent [NAK] \r\n     --- LIS now wait 10 sec... \r\n\r\nDX is the machine software and LIS is the host. \r\nWhenever I try to send the ENQ, the machine answers me with NAK. \r\n\r\n**UPDATE 2**  \r\nIt seem to be working. But now windows events shows me an error about why my records orders don&#39;t appear in the GeneXpert DX host record list. The header record have been sent first. \r\n\r\n[![Windows event logs after following @Muhammad *UPDATE 2**][1]][1]\r\n\r\n\r\n[![GeneXpert DX STATUS][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nMWfh.png\r\n  [2]: https://i.stack.imgur.com/eZV4n.png\r\n","title":"How to write and send an ASTM frame to medical equipment","body":"<p>I am currently working on the ASTM protocol to send orders tests request to medical instrument. But I cannot send a message to the equipment correctly. To be more explicit, I want for example to send these frames:</p>\n\n<pre><code>        String h1, s2, s3, s4, s5, s6 = \"\";\n        h1 = \"H|@^\\\\|ODM-IdfDGIWA-36|||GeneXpert PC^GeneXpert^4.8|||||LIS||P|1394-97|20070521100245\";\n        s2 = \"P|1\";\n        s3 = \"O|1|SID-818||^^^TestId-12|S|20070812140500|||||A||||ORH||||||||||Q\";\n        s4 = \"O|2|SID-818||^^^TestId-14|S|20070812140600|||||A||||ORH||||||||||Q\";\n        s5 = \"O|3|SID-818||^^^TestId-16|S|20070812140700|||||A||||ORH||||||||||Q\";\n        s6 = \"L|1|F\";\n</code></pre>\n\n<p>and here is how I am doing now:</p>\n\n<pre><code>    writeMeBytes(outToServer, h1.getBytes());\n    writeMeBytes(outToServer, s2.getBytes());\n    writeMeBytes(outToServer, s3.getBytes());\n    writeMeBytes(outToServer, s4.getBytes());\n    writeMeBytes(outToServer, s5.getBytes());\n    writeMeBytes(outToServer, s6.getBytes());\n\n\npublic static void writeMeBytes(DataOutputStream dos, byte [] b){\n    if (b.length &gt;0){\n        int j = 0;\n        while (j &lt;= b.length-1) {\n            try {\n                dos.write(b[j++]);\n            } catch (IOException ex) {\n                Logger.getLogger(SimpleServer.class.getName()).log(Level.SEVERE, null, ex);\n            }\n\n        }\n    }\n}\n</code></pre>\n\n<p>I turn it into byte and then send byte after byte.</p>\n\n<p>Except that I do not see any change on the receiver side.</p>\n\n<p><strong>Update according to @Muhammad Answer</strong></p>\n\n<p>This is what I did to send order to GeneXpert DX System</p>\n\n<pre><code>public class SimpleServer {\n\nprivate static ServerSocket server;\nprivate static Socket connection;\n\npublic static void main(String args[]) throws IOException, InterruptedException {\n    server = new ServerSocket(12221);\n    boolean stopped = false;\n\n    System.out.println(\" start... \");\n    connection = server.accept();\n    System.out.println(\"wait for connection\");\n    BufferedReader inFromClient = new BufferedReader(new InputStreamReader(connection.getInputStream()));\n    DataOutputStream outToClient = new DataOutputStream(connection.getOutputStream());\n    String currentMsg = \"\";\n    int clientIntMessage;\n\n    String h1, s2, s3, s4, s5, s6 = \"\";\n    h1 = \"1H|@^\\\\|ODM-IdfDGIWA-36|||GeneXpert PC^GeneXpert^4.8|||||LIS||P|1394-97|20070521100245\" + ProtocolASCII.LF\n            + \"P|1\" + ProtocolASCII.LF\n            + \"O|1|SID-818||^^^TestId-12|S|20070812140500|||||A||||ORH||||||||||Q\" + ProtocolASCII.LF\n            + \"L|1|F\" + ProtocolASCII.LF;\n    s2 = \"P|1\";\n    s3 = \"O|1|SID-818||^^^TestId-12|S|20070812140500|||||A||||ORH||||||||||Q\";\n    //s4 = \"O|2|SID-818||^^^TestId-14|S|20070812140600|||||A||||ORH||||||||||Q\";\n    //s5 = \"O|3|SID-818||^^^TestId-16|S|20070812140700|||||A||||ORH||||||||||Q\";\n    s6 = \"L|1|F\";\n\n    String retmsg = h1;\n    //logException(\"OrderMessae   :\" + retmsg);\n    retmsg = ProtocolASCII.STX + retmsg + ProtocolASCII.CR + ProtocolASCII.ETX + ProtocolMessage.getCheckSum(retmsg) + ProtocolASCII.CR + ProtocolASCII.LF;\n\n    clientIntMessage = inFromClient.read();\n    //while (clientIntMessage != ProtocolASCII.EOT) {\n    while (true) {\n        currentMsg += String.valueOf(Character.toChars(clientIntMessage));\n        if (clientIntMessage == ProtocolASCII.ENQ) {\n            outToClient.writeBytes(\"\" + ProtocolASCII.ACK);\n            System.out.println(\" &lt;--- LIS [ACK] on DX [ENQ]\");\n        } else if (clientIntMessage == ProtocolASCII.ACK) {\n            System.out.println(\" ---&gt; DX [ACK]\");\n            // Send your order message here\n            outToClient.writeBytes(retmsg);\n        } else if (clientIntMessage == ProtocolASCII.CR) {\n            System.out.println(currentMsg);\n            outToClient.writeBytes(\"\" + ProtocolASCII.ACK);\n        } else if (clientIntMessage == ProtocolASCII.NAK) {\n            System.out.println(\" ---&gt; DX sent [NAK] \");\n            System.out.println(\" --- LIS now wait 10 sec... \");\n            Thread.sleep(10000);\n            outToClient.writeBytes(\"\" + ProtocolASCII.ENQ);\n            System.out.println(\" &lt;--- LIS [ENQ] \");\n        } else if (clientIntMessage == ProtocolASCII.EOT) {\n            System.out.println(\" ---&gt; DX END OF TRANSMISSION\");\n            outToClient.writeBytes(\"\" + ProtocolASCII.ENQ);\n            System.out.println(\" &lt;--- LIS [ENQ] \");\n        }\n\n        if (stopped) {\n            break;\n        }\n        clientIntMessage = inFromClient.read();\n    }\n    connection.close();\n    stopped = true;\n}}\n</code></pre>\n\n<p>And this is the result I get from the console:</p>\n\n<pre><code>start... \nwait for connection\n &lt;--- LIS [ACK] on DX [ENQ]\n1H|@^\\|ODM-rQTcjIWA-66||GeneXpert PC^GeneXpert^4.8|||||LIS||P|1394-97|20180314003724\nQ|1|ALL||||||||||O@N\nL|1|N\nB5\n ---&gt; DX [EOT] \n &lt;--- LIS [ENQ] \n ---&gt; DX [ACK]\n ---&gt; DX sent [NAK] \n --- LIS now wait 10 sec... \n</code></pre>\n\n<p>DX is the machine software and LIS is the host. \nWhenever I try to send the ENQ, the machine answers me with NAK. </p>\n\n<p><strong>UPDATE 2</strong><br>\nIt seem to be working. But now windows events shows me an error about why my records orders don't appear in the GeneXpert DX host record list. The header record have been sent first. </p>\n\n<p><a href=\"https://i.stack.imgur.com/nMWfh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nMWfh.png\" alt=\"Windows event logs after following @Muhammad *UPDATE 2**\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/eZV4n.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eZV4n.png\" alt=\"GeneXpert DX STATUS\"></a></p>\n"},{"tags":["python","java","list","tags","plc"],"comments":[{"owner":{"account_id":17304346,"reputation":336,"user_id":12533400,"display_name":"lcecl"},"score":1,"creation_date":1691153168,"post_id":76833246,"comment_id":135456899,"body_markdown":"How about [pylogix](https://github.com/dmroeder/pylogix/blob/master/examples/23_get_all_tags.py)?","body":"How about <a href=\"https://github.com/dmroeder/pylogix/blob/master/examples/23_get_all_tags.py\" rel=\"nofollow noreferrer\">pylogix</a>?"}],"owner":{"account_id":29157450,"reputation":1,"user_id":22336909,"display_name":"Bala Murugan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691128769,"creation_date":1691128104,"question_id":76833246,"body_markdown":"i can make connection but when i want to read data, idk the tag names present in it.\r\n```\r\ndef read_plc_data(plc, tag_name):\r\n    try:\r\n        data = plc.read(tag_name)\r\n        return data\r\n    except Exception as e:\r\n        print(f&quot;Error while reading PLC data: {e}&quot;)\r\n        return None\r\n```","title":"is there any way to find existing tag names and list out them in allen bradley plc using python code?","body":"<p>i can make connection but when i want to read data, idk the tag names present in it.</p>\n<pre><code>def read_plc_data(plc, tag_name):\n    try:\n        data = plc.read(tag_name)\n        return data\n    except Exception as e:\n        print(f&quot;Error while reading PLC data: {e}&quot;)\n        return None\n</code></pre>\n"},{"tags":["java","spring-kafka"],"comments":[{"owner":{"account_id":1288095,"reputation":169316,"user_id":1240763,"display_name":"Gary Russell"},"score":0,"creation_date":1691154635,"post_id":76832968,"comment_id":135457207,"body_markdown":"You need to show your RetryTopicNamesProviderFactory and the full stack trace.","body":"You need to show your RetryTopicNamesProviderFactory and the full stack trace."}],"owner":{"account_id":29157099,"reputation":11,"user_id":22336630,"display_name":"Samir Salamov"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":148,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691127733,"creation_date":1691123711,"question_id":76832968,"body_markdown":"I have below configuration for listener\r\n\r\n```\r\n@RetryableTopic(\r\n        attempts = &quot;3&quot;,\r\n        backoff = @Backoff(delay = 5000, multiplier = 3.0, maxDelay = 60000, random = true),\r\n        autoCreateTopics = &quot;false&quot;,\r\n        exclude = {\r\n            JsonProcessingException.class,\r\n            NullPointerException.class,\r\n            IllegalStateException.class,\r\n            IllegalArgumentException.class,\r\n            UnsupportedOperationException.class,\r\n            ConstraintViolationException.class,\r\n            InvalidRequestException.class},\r\n        autoStartDltHandler = &quot;false&quot;,\r\n        topicSuffixingStrategy = TopicSuffixingStrategy.SUFFIX_WITH_INDEX_VALUE)\r\n@KafkaListener(topics = &quot;#{&#39;${spring.kafka.consumer.properties.topics}&#39;.split(&#39;\\\\s+&#39;)}&quot;)\r\n...\r\n```\r\n\r\nand in properties i listed all related topics:\r\n```\r\n... topics: &gt;\r\n          transaction_events_raw_v1\r\n          card_events_raw_v1\r\n          authorisation_events_raw_v1\r\n```\r\n\r\nAs you know multiple RETRY and DLT topics will be created with below naming format:\r\n```\r\ntransaction_events_raw_v1_retry-0\r\ntransaction_events_raw_v1_retry-1\r\ntransaction_events_raw_v1_dlt\r\ncard_events_raw_v1_retry-0\r\ncard_events_raw_v1_retry-1\r\ncard_events_raw_v1_dlt\r\nauthorisation_events_raw_v1_retry-0\r\nauthorisation_events_raw_v1_retry-1\r\nauthorisation_events_raw_v1_dlt\r\n```\r\n\r\nI would like to know is it possible to create single RETRY and DLT topics in this case?\r\n```\r\ndomain_events_retry-0\r\ndomain_events_retry-1\r\ndomain_events_dlt\r\n```\r\n\r\nTried to override RetryTopicNamesProviderFactory and manipulate with retry and dead letter topic names however having duplicate key issue:\r\n\r\n```\r\n\r\nCaused by: java.lang.IllegalStateException: Duplicate key null (attempted merging values DestinationTopic{destinationName=&#39;domain_events_retry&#39;, properties=Properties{delayMs=8605, suffix=&#39;-retry-0&#39;, type=RETRY, maxAttempts=3, numPartitions=1, dltStrategy=ALWAYS_RETRY_ON_ERROR, kafkaOperations=org.springframework.kafka.core.KafkaTemplate@70b196d3, shouldRetryOn=org.springframework.kafka.retrytopic.DestinationTopicPropertiesFactory$$Lambda$841/0x00000008006b2840@5c997de8, timeout=-1}} and DestinationTopic{destinationName=&#39;domain_events_retry&#39;, properties=Properties{delayMs=27926, suffix=&#39;-retry-1&#39;, type=RETRY, maxAttempts=3, numPartitions=1, dltStrategy=ALWAYS_RETRY_ON_ERROR, kafkaOperations=org.springframework.kafka.core.KafkaTemplate@70b196d3, shouldRetryOn=org.springframework.kafka.retrytopic.DestinationTopicPropertiesFactory$$Lambda$841/0x00000008006b2840@45bf93bb, timeout=-1}})\r\n\r\n```\r\n\r\n\r\nRegards,\r\n\r\n--Samir","title":"Single Retry and DLT topic for multiple topics listener with @RetryableTopic","body":"<p>I have below configuration for listener</p>\n<pre><code>@RetryableTopic(\n        attempts = &quot;3&quot;,\n        backoff = @Backoff(delay = 5000, multiplier = 3.0, maxDelay = 60000, random = true),\n        autoCreateTopics = &quot;false&quot;,\n        exclude = {\n            JsonProcessingException.class,\n            NullPointerException.class,\n            IllegalStateException.class,\n            IllegalArgumentException.class,\n            UnsupportedOperationException.class,\n            ConstraintViolationException.class,\n            InvalidRequestException.class},\n        autoStartDltHandler = &quot;false&quot;,\n        topicSuffixingStrategy = TopicSuffixingStrategy.SUFFIX_WITH_INDEX_VALUE)\n@KafkaListener(topics = &quot;#{'${spring.kafka.consumer.properties.topics}'.split('\\\\s+')}&quot;)\n...\n</code></pre>\n<p>and in properties i listed all related topics:</p>\n<pre><code>... topics: &gt;\n          transaction_events_raw_v1\n          card_events_raw_v1\n          authorisation_events_raw_v1\n</code></pre>\n<p>As you know multiple RETRY and DLT topics will be created with below naming format:</p>\n<pre><code>transaction_events_raw_v1_retry-0\ntransaction_events_raw_v1_retry-1\ntransaction_events_raw_v1_dlt\ncard_events_raw_v1_retry-0\ncard_events_raw_v1_retry-1\ncard_events_raw_v1_dlt\nauthorisation_events_raw_v1_retry-0\nauthorisation_events_raw_v1_retry-1\nauthorisation_events_raw_v1_dlt\n</code></pre>\n<p>I would like to know is it possible to create single RETRY and DLT topics in this case?</p>\n<pre><code>domain_events_retry-0\ndomain_events_retry-1\ndomain_events_dlt\n</code></pre>\n<p>Tried to override RetryTopicNamesProviderFactory and manipulate with retry and dead letter topic names however having duplicate key issue:</p>\n<pre><code>\nCaused by: java.lang.IllegalStateException: Duplicate key null (attempted merging values DestinationTopic{destinationName='domain_events_retry', properties=Properties{delayMs=8605, suffix='-retry-0', type=RETRY, maxAttempts=3, numPartitions=1, dltStrategy=ALWAYS_RETRY_ON_ERROR, kafkaOperations=org.springframework.kafka.core.KafkaTemplate@70b196d3, shouldRetryOn=org.springframework.kafka.retrytopic.DestinationTopicPropertiesFactory$$Lambda$841/0x00000008006b2840@5c997de8, timeout=-1}} and DestinationTopic{destinationName='domain_events_retry', properties=Properties{delayMs=27926, suffix='-retry-1', type=RETRY, maxAttempts=3, numPartitions=1, dltStrategy=ALWAYS_RETRY_ON_ERROR, kafkaOperations=org.springframework.kafka.core.KafkaTemplate@70b196d3, shouldRetryOn=org.springframework.kafka.retrytopic.DestinationTopicPropertiesFactory$$Lambda$841/0x00000008006b2840@45bf93bb, timeout=-1}})\n\n</code></pre>\n<p>Regards,</p>\n<p>--Samir</p>\n"},{"tags":["java","android","android-studio","push-notification","notifications"],"comments":[{"owner":{"account_id":26359116,"reputation":585,"user_id":20015640,"display_name":"Urvish Shiroya"},"score":1,"creation_date":1671451654,"post_id":74832565,"comment_id":132094997,"body_markdown":"what you tried?","body":"what you tried?"}],"answers":[{"tags":[],"owner":{"account_id":26359116,"reputation":585,"user_id":20015640,"display_name":"Urvish Shiroya"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1671453520,"creation_date":1671453520,"answer_id":74850656,"question_id":74832565,"body_markdown":"1) Determine whether your project has pending intent.\r\n2) If `Yes` then search for PendingIntent in the whole project and add the flag to PendingIntent like this.\r\n\r\n- before\r\n```java\r\nPendingIntent mPendingIntent = PendingIntent.getActivity(mContext, 0, intent, 0);\r\n```\r\n- after\r\n```java\r\nPendingIntent mPendingIntent = PendingIntent.getActivity(mContext, 0, intent, PendingIntent.FLAG_MUTABLE);\r\n```\r\n**OR**\r\n\r\nIf there is no PendingIntent in your project or you get an error even though you write the flag:\r\n\r\n- Add the following to your `build.gradle(app)` dependencies.\r\n\r\n```\r\ndependencies {\r\n  // For Java\r\n  implementation &#39;androidx.work:work-runtime:2.7.1&#39; \r\n\r\n  // For Kotlin\r\n  implementation &#39;androidx.work:work-runtime-ktx:2.7.1&#39;\r\n}\r\n```","title":"Targeting S+ (version 31 and above) requires that one of FLAG_IMMUTABLE or FLAG_MUTABLE","body":"<ol>\n<li>Determine whether your project has pending intent.</li>\n<li>If <code>Yes</code> then search for PendingIntent in the whole project and add the flag to PendingIntent like this.</li>\n</ol>\n<ul>\n<li>before</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>PendingIntent mPendingIntent = PendingIntent.getActivity(mContext, 0, intent, 0);\n</code></pre>\n<ul>\n<li>after</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>PendingIntent mPendingIntent = PendingIntent.getActivity(mContext, 0, intent, PendingIntent.FLAG_MUTABLE);\n</code></pre>\n<p><strong>OR</strong></p>\n<p>If there is no PendingIntent in your project or you get an error even though you write the flag:</p>\n<ul>\n<li>Add the following to your <code>build.gradle(app)</code> dependencies.</li>\n</ul>\n<pre><code>dependencies {\n  // For Java\n  implementation 'androidx.work:work-runtime:2.7.1' \n\n  // For Kotlin\n  implementation 'androidx.work:work-runtime-ktx:2.7.1'\n}\n</code></pre>\n"}],"owner":{"account_id":26507559,"reputation":69,"user_id":20143472,"display_name":"jackie Maik"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12847,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"answer_count":1,"score":4,"last_activity_date":1691126573,"creation_date":1671263449,"question_id":74832565,"body_markdown":"I am making Notification app and struggling with below error:\r\n\r\n    java.lang.IllegalArgumentException: com.tonyapp.rabbitfarm: Targeting S+ (version 31 and above) requires that one of FLAG_IMMUTABLE or FLAG_MUTABLE be specified when creating a PendingIntent.\r\n        Strongly consider using FLAG_IMMUTABLE, only use FLAG_MUTABLE if some functionality depends on the PendingIntent being mutable, e.g. if it needs to be used with inline replies or bubbles.\r\n            at android.app.PendingIntent.checkFlags(PendingIntent.java:375)\r\n            at android.app.PendingIntent.getBroadcastAsUser(PendingIntent.java:645)\r\n            at android.app.PendingIntent.getBroadcast(PendingIntent.java:632)\r\n            at com.allyants.notifyme.NotifyMe.scheduleNotification(NotifyMe.java:159)\r\n            at com.allyants.notifyme.NotifyMe.&lt;init&gt;(NotifyMe.java:89)\r\n            at com.allyants.notifyme.NotifyMe$Builder.build(NotifyMe.java:327)\r\n            at com.tonyapp.rabbitfarm.NotesTakerActivity.onTimeSet(NotesTakerActivity.java:291)\r\n            at com.wdullaer.materialdatetimepicker.time.TimePickerDialog.notifyOnDateListener(TimePickerDialog.java:1893)\r\n            at com.wdullaer.materialdatetimepicker.time.TimePickerDialog.lambda$onCreateView$3$com-wdullaer-materialdatetimepicker-time-TimePickerDialog(TimePickerDialog.java:761)\r\n            at com.wdullaer.materialdatetimepicker.time.TimePickerDialog$$ExternalSyntheticLambda3.onClick(Unknown Source:2)\r\n            at android.view.View.performClick(View.java:7441)\r\n            at com.google.android.material.button.MaterialButton.performClick(MaterialButton.java:1202)\r\n            at android.view.View.performClickInternal(View.java:7418)\r\n            at android.view.View.access$3700(View.java:835)\r\n            at android.view.View$PerformClick.run(View.java:28676)\r\n            at android.os.Handler.handleCallback(Handler.java:938)\r\n            at android.os.Handler.dispatchMessage(Handler.java:99)\r\n            at android.os.Looper.loopOnce(Looper.java:201)\r\n            at android.os.Looper.loop(Looper.java:288)\r\n            at android.app.ActivityThread.main(ActivityThread.java:7839)\r\n            at java.lang.reflect.Method.invoke(Native Method)\r\n            at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548)\r\n            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1003)\r\n\r\nI searched the solutions for this issue and there are no solution work for me.\r\n\r\nbelow is my Mainactivity.java code:\r\n\r\n     btnCancel.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                NotifyMe.cancel(getApplicationContext(),&quot;test&quot;);\r\n            }\r\n        });\r\n\r\n\r\n        btnNotify.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                dpd.show(getSupportFragmentManager(),&quot;DatePickerDialog&quot;);\r\n            }\r\n        });\r\n    }\r\n\r\n    @Override\r\n    public void onDateSet(DatePickerDialog view, int year, int monthOfYear, int dayOfMonth) {\r\n\r\n        now.set(Calendar.YEAR,year);\r\n        now.set(Calendar.MONTH,monthOfYear);\r\n        now.set(Calendar.DAY_OF_MONTH,dayOfMonth);\r\n\r\n        tpd.show(getSupportFragmentManager(),&quot;timepicker&quot;);\r\n\r\n\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onTimeSet(TimePickerDialog view, int hourOfDay, int minute, int second) {\r\n\r\n\r\n        now.set(Calendar.HOUR_OF_DAY,hourOfDay);\r\n        now.set(Calendar.MINUTE,minute);\r\n        now.set(Calendar.SECOND,second);\r\n\r\n\r\n\r\n        NotifyMe notifyMe = new NotifyMe.Builder(getApplicationContext())\r\n                .title(edt1.getText().toString())\r\n                .content(edt2.getText().toString())\r\n                .color(255,0,0,255)\r\n                .led_color(255,255,255,255)\r\n                .time(now)\r\n                .addAction(new Intent(),&quot;Snooze&quot;,false)\r\n                .addAction(new Intent(),&quot;Dismiss&quot;,true)\r\n                .addAction(new Intent(),&quot;Done&quot;)\r\n                .large_icon(R.mipmap.ic_launcher_round)\r\n                .build();\r\n\r\n    }\r\n\r\nPlease help me fix this problem. thanks in advance.\r\n","title":"Targeting S+ (version 31 and above) requires that one of FLAG_IMMUTABLE or FLAG_MUTABLE","body":"<p>I am making Notification app and struggling with below error:</p>\n<pre><code>java.lang.IllegalArgumentException: com.tonyapp.rabbitfarm: Targeting S+ (version 31 and above) requires that one of FLAG_IMMUTABLE or FLAG_MUTABLE be specified when creating a PendingIntent.\n    Strongly consider using FLAG_IMMUTABLE, only use FLAG_MUTABLE if some functionality depends on the PendingIntent being mutable, e.g. if it needs to be used with inline replies or bubbles.\n        at android.app.PendingIntent.checkFlags(PendingIntent.java:375)\n        at android.app.PendingIntent.getBroadcastAsUser(PendingIntent.java:645)\n        at android.app.PendingIntent.getBroadcast(PendingIntent.java:632)\n        at com.allyants.notifyme.NotifyMe.scheduleNotification(NotifyMe.java:159)\n        at com.allyants.notifyme.NotifyMe.&lt;init&gt;(NotifyMe.java:89)\n        at com.allyants.notifyme.NotifyMe$Builder.build(NotifyMe.java:327)\n        at com.tonyapp.rabbitfarm.NotesTakerActivity.onTimeSet(NotesTakerActivity.java:291)\n        at com.wdullaer.materialdatetimepicker.time.TimePickerDialog.notifyOnDateListener(TimePickerDialog.java:1893)\n        at com.wdullaer.materialdatetimepicker.time.TimePickerDialog.lambda$onCreateView$3$com-wdullaer-materialdatetimepicker-time-TimePickerDialog(TimePickerDialog.java:761)\n        at com.wdullaer.materialdatetimepicker.time.TimePickerDialog$$ExternalSyntheticLambda3.onClick(Unknown Source:2)\n        at android.view.View.performClick(View.java:7441)\n        at com.google.android.material.button.MaterialButton.performClick(MaterialButton.java:1202)\n        at android.view.View.performClickInternal(View.java:7418)\n        at android.view.View.access$3700(View.java:835)\n        at android.view.View$PerformClick.run(View.java:28676)\n        at android.os.Handler.handleCallback(Handler.java:938)\n        at android.os.Handler.dispatchMessage(Handler.java:99)\n        at android.os.Looper.loopOnce(Looper.java:201)\n        at android.os.Looper.loop(Looper.java:288)\n        at android.app.ActivityThread.main(ActivityThread.java:7839)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1003)\n</code></pre>\n<p>I searched the solutions for this issue and there are no solution work for me.</p>\n<p>below is my Mainactivity.java code:</p>\n<pre><code> btnCancel.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View view) {\n            NotifyMe.cancel(getApplicationContext(),&quot;test&quot;);\n        }\n    });\n\n\n    btnNotify.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View view) {\n            dpd.show(getSupportFragmentManager(),&quot;DatePickerDialog&quot;);\n        }\n    });\n}\n\n@Override\npublic void onDateSet(DatePickerDialog view, int year, int monthOfYear, int dayOfMonth) {\n\n    now.set(Calendar.YEAR,year);\n    now.set(Calendar.MONTH,monthOfYear);\n    now.set(Calendar.DAY_OF_MONTH,dayOfMonth);\n\n    tpd.show(getSupportFragmentManager(),&quot;timepicker&quot;);\n\n\n\n}\n\n@Override\npublic void onTimeSet(TimePickerDialog view, int hourOfDay, int minute, int second) {\n\n\n    now.set(Calendar.HOUR_OF_DAY,hourOfDay);\n    now.set(Calendar.MINUTE,minute);\n    now.set(Calendar.SECOND,second);\n\n\n\n    NotifyMe notifyMe = new NotifyMe.Builder(getApplicationContext())\n            .title(edt1.getText().toString())\n            .content(edt2.getText().toString())\n            .color(255,0,0,255)\n            .led_color(255,255,255,255)\n            .time(now)\n            .addAction(new Intent(),&quot;Snooze&quot;,false)\n            .addAction(new Intent(),&quot;Dismiss&quot;,true)\n            .addAction(new Intent(),&quot;Done&quot;)\n            .large_icon(R.mipmap.ic_launcher_round)\n            .build();\n\n}\n</code></pre>\n<p>Please help me fix this problem. thanks in advance.</p>\n"},{"tags":["java","go","try-catch-finally"],"comments":[{"owner":{"account_id":4451249,"reputation":499,"user_id":3623056,"accept_rate":69,"display_name":"mbsingh"},"score":0,"creation_date":1429680177,"post_id":29788307,"comment_id":47706030,"body_markdown":"Are you looking to perform cleanup?","body":"Are you looking to perform cleanup?"},{"owner":{"account_id":3452279,"reputation":37360,"user_id":2891664,"accept_rate":100,"display_name":"Radiodef"},"score":1,"creation_date":1429680182,"post_id":29788307,"comment_id":47706032,"body_markdown":"What&#39;s wrong with `finally`?","body":"What&#39;s wrong with <code>finally</code>?"},{"owner":{"account_id":3746057,"reputation":115,"user_id":3114701,"display_name":"Romeo"},"score":0,"creation_date":1429687080,"post_id":29788307,"comment_id":47709629,"body_markdown":"yeah clean-up like closing connection and to free memory..","body":"yeah clean-up like closing connection and to free memory.."},{"owner":{"account_id":34433,"reputation":55374,"user_id":1400793,"display_name":"Paul Hankin"},"score":7,"creation_date":1429692814,"post_id":29788307,"comment_id":47713348,"body_markdown":"There&#39;s no direct translation, and how you write go isn&#39;t how you write java.","body":"There&#39;s no direct translation, and how you write go isn&#39;t how you write java."}],"answers":[{"tags":[],"owner":{"account_id":1082226,"reputation":6704,"user_id":1078890,"accept_rate":46,"display_name":"IamNaN"},"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1436923056,"creation_date":1429680296,"answer_id":29788438,"question_id":29788307,"body_markdown":"Java 7 has a [try-with-resources statement][1].\r\n\r\n&gt; The try-with-resources statement is a try statement that declares one or more resources. A resource is an object that must be closed after the program is finished with it. The try-with-resources statement ensures that each resource is closed at the end of the statement. Any object that implements java.lang.AutoCloseable, which includes all objects which implement java.io.Closeable, can be used as a resource.\r\n&gt; \r\n&gt; The following example reads the first line from a file. It uses an\r\n&gt; instance of BufferedReader to read data from the file. BufferedReader\r\n&gt; is a resource that must be closed after the program is finished with\r\n&gt; it:\r\n&gt; \r\n&gt;     static String readFirstLineFromFile(String path) throws IOException {\r\n&gt;         try (BufferedReader br = new BufferedReader(new FileReader(path))) {\r\n&gt;             return br.readLine();\r\n&gt;         }\r\n&gt;     }\r\n&gt; \r\n&gt; In this example, the resource declared in the try-with-resources\r\n&gt; statement is a BufferedReader. The declaration statement appears\r\n&gt; within parentheses immediately after the try keyword. The class\r\n&gt; BufferedReader, in Java SE 7 and later, implements the interface\r\n&gt; java.lang.AutoCloseable. Because the BufferedReader instance is\r\n&gt; declared in a try-with-resource statement, it will be closed\r\n&gt; regardless of whether the try statement completes normally or abruptly\r\n&gt; (as a result of the method BufferedReader.readLine throwing an\r\n&gt; IOException).\r\n\r\n\r\n  \r\n\r\n[1]: https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html\r\n\r\n","title":"What is the &#39;defer&#39; equivalent for Java","body":"<p>Java 7 has a <a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html\" rel=\"noreferrer\">try-with-resources statement</a>.</p>\n\n<blockquote>\n  <p>The try-with-resources statement is a try statement that declares one or more resources. A resource is an object that must be closed after the program is finished with it. The try-with-resources statement ensures that each resource is closed at the end of the statement. Any object that implements java.lang.AutoCloseable, which includes all objects which implement java.io.Closeable, can be used as a resource.</p>\n  \n  <p>The following example reads the first line from a file. It uses an\n  instance of BufferedReader to read data from the file. BufferedReader\n  is a resource that must be closed after the program is finished with\n  it:</p>\n\n<pre><code>static String readFirstLineFromFile(String path) throws IOException {\n    try (BufferedReader br = new BufferedReader(new FileReader(path))) {\n        return br.readLine();\n    }\n}\n</code></pre>\n  \n  <p>In this example, the resource declared in the try-with-resources\n  statement is a BufferedReader. The declaration statement appears\n  within parentheses immediately after the try keyword. The class\n  BufferedReader, in Java SE 7 and later, implements the interface\n  java.lang.AutoCloseable. Because the BufferedReader instance is\n  declared in a try-with-resource statement, it will be closed\n  regardless of whether the try statement completes normally or abruptly\n  (as a result of the method BufferedReader.readLine throwing an\n  IOException).</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":2268219,"reputation":1637,"user_id":1996296,"accept_rate":69,"display_name":"igreenfield"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1429690861,"creation_date":1429680421,"answer_id":29788462,"question_id":29788307,"body_markdown":"In java 7 and above you can use try-with-resource:\r\n     \r\n    public static String readFirstLineFromFile(String path) throws IOException {\r\n      try (BufferedReader br = new BufferedReader(new FileReader(path))) {\r\n         return br.readLine();\r\n      }\r\n    }\r\n\r\nwhen you exit the try it will close the resource\r\ndocs: [link](https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)","title":"What is the &#39;defer&#39; equivalent for Java","body":"<p>In java 7 and above you can use try-with-resource:</p>\n\n<pre><code>public static String readFirstLineFromFile(String path) throws IOException {\n  try (BufferedReader br = new BufferedReader(new FileReader(path))) {\n     return br.readLine();\n  }\n}\n</code></pre>\n\n<p>when you exit the try it will close the resource\ndocs: <a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html\" rel=\"nofollow\">link</a></p>\n"},{"tags":[],"owner":{"account_id":953817,"reputation":493,"user_id":979478,"display_name":"Pawel Zieminski"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691126556,"creation_date":1691125530,"answer_id":76833065,"question_id":29788307,"body_markdown":"You could also do something like this with some extra libraries. Unfortunately, there is the `IOException` to deal with.\r\n\r\n    import com.google.common.io.Closer;\r\n    import lombok.Cleanup;\r\n    import lombok.SneakyThrows;\r\n    import java.io.IOException;\r\n    \r\n    public class Main {\r\n    \r\n        @SneakyThrows(IOException.class)\r\n        public static void main(String[] args) {\r\n            @Cleanup Closer defer = Closer.create();\r\n            defer.register(() -&gt; System.out.println(&quot;world&quot;));\r\n            System.out.println(&quot;hello&quot;);\r\n        }\r\n    }\r\n\r\nIf you don&#39;t like dealing with the exception, and if it&#39;s worth it for you, you could wrap it like this\r\n\r\n    import com.google.common.io.Closer;\r\n    import lombok.Cleanup;\r\n    import lombok.SneakyThrows;\r\n    import java.io.Closeable;\r\n    import java.io.IOException;\r\n    \r\n    public class Main {\r\n    \r\n        public static void main(String[] args) {\r\n            @Cleanup Defer defer = Defer.create();\r\n            defer.register(() -&gt; System.out.println(&quot;world&quot;));\r\n            System.out.println(&quot;hello&quot;);\r\n        }\r\n    }\r\n    \r\n    // in some util package\r\n    class Defer implements Closeable {\r\n        private final Closer closer;\r\n    \r\n        private Defer(Closer closer) {\r\n            this.closer = closer;\r\n        }\r\n    \r\n        public static Defer create() {\r\n            return new Defer(Closer.create());\r\n        }\r\n    \r\n        public &lt;C extends Closeable&gt; C register(C closeable) {\r\n            return this.closer.register(closeable);\r\n        }\r\n    \r\n        @SneakyThrows(IOException.class)\r\n        @Override\r\n        public void close() {\r\n            this.closer.close();\r\n        }\r\n    }\r\n\r\n","title":"What is the &#39;defer&#39; equivalent for Java","body":"<p>You could also do something like this with some extra libraries. Unfortunately, there is the <code>IOException</code> to deal with.</p>\n<pre><code>import com.google.common.io.Closer;\nimport lombok.Cleanup;\nimport lombok.SneakyThrows;\nimport java.io.IOException;\n\npublic class Main {\n\n    @SneakyThrows(IOException.class)\n    public static void main(String[] args) {\n        @Cleanup Closer defer = Closer.create();\n        defer.register(() -&gt; System.out.println(&quot;world&quot;));\n        System.out.println(&quot;hello&quot;);\n    }\n}\n</code></pre>\n<p>If you don't like dealing with the exception, and if it's worth it for you, you could wrap it like this</p>\n<pre><code>import com.google.common.io.Closer;\nimport lombok.Cleanup;\nimport lombok.SneakyThrows;\nimport java.io.Closeable;\nimport java.io.IOException;\n\npublic class Main {\n\n    public static void main(String[] args) {\n        @Cleanup Defer defer = Defer.create();\n        defer.register(() -&gt; System.out.println(&quot;world&quot;));\n        System.out.println(&quot;hello&quot;);\n    }\n}\n\n// in some util package\nclass Defer implements Closeable {\n    private final Closer closer;\n\n    private Defer(Closer closer) {\n        this.closer = closer;\n    }\n\n    public static Defer create() {\n        return new Defer(Closer.create());\n    }\n\n    public &lt;C extends Closeable&gt; C register(C closeable) {\n        return this.closer.register(closeable);\n    }\n\n    @SneakyThrows(IOException.class)\n    @Override\n    public void close() {\n        this.closer.close();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":3746057,"reputation":115,"user_id":3114701,"display_name":"Romeo"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9890,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":29788438,"answer_count":3,"score":10,"last_activity_date":1691126556,"creation_date":1429679805,"question_id":29788307,"body_markdown":"This is just a short example of Go code:\r\n\r\n    package main\r\n\r\n    import &quot;fmt&quot;\r\n\r\n    func main() {\r\n\t    defer fmt.Println(&quot;world&quot;) //use of keyword &#39;defer&#39;\r\n\r\n\t    fmt.Println(&quot;hello&quot;)\r\n    }\r\n\r\nI am finding an equivalent of &#39;defer&#39; in Java.\r\n\r\nInstead of &#39;defer&#39; I can use\r\n\r\n    try {\r\n        //do something\r\n    } finally {\r\n        //code using defer\r\n    }\r\n\r\nIs there any alternative without using try/catch/finally?","title":"What is the &#39;defer&#39; equivalent for Java","body":"<p>This is just a short example of Go code:</p>\n\n<pre><code>package main\n\nimport \"fmt\"\n\nfunc main() {\n    defer fmt.Println(\"world\") //use of keyword 'defer'\n\n    fmt.Println(\"hello\")\n}\n</code></pre>\n\n<p>I am finding an equivalent of 'defer' in Java.</p>\n\n<p>Instead of 'defer' I can use</p>\n\n<pre><code>try {\n    //do something\n} finally {\n    //code using defer\n}\n</code></pre>\n\n<p>Is there any alternative without using try/catch/finally?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1691126937,"post_id":76833094,"comment_id":135452304,"body_markdown":"@paulsm4 `Singleton` doesn&#39;t incur any overhead either until it&#39;s used.","body":"@paulsm4 <code>Singleton</code> doesn&#39;t incur any overhead either until it&#39;s used."},{"owner":{"account_id":29156880,"reputation":21,"user_id":22336461,"display_name":"jcli"},"score":0,"creation_date":1691130006,"post_id":76833094,"comment_id":135452656,"body_markdown":"@shmosel yes, my problem is here","body":"@shmosel yes, my problem is here"},{"owner":{"account_id":184870,"reputation":118711,"user_id":421195,"accept_rate":83,"display_name":"paulsm4"},"score":0,"creation_date":1691175176,"post_id":76833094,"comment_id":135461568,"body_markdown":"@jcli:: as shmosel pointed out: 1) Neither example incurs any runtime overhead unless/until the app actually tries to *access* the class, 2) Your &quot;Singleton1&quot; example (the style I&#39;ve always used) has a potential race condition if `Singleton1.getInstance()` is called from multiple concurrent threads.  Here&#39;s a good discussion of different alternatives: https://www.digitalocean.com/community/tutorials/java-singleton-design-pattern-best-practices-examples","body":"@jcli:: as shmosel pointed out: 1) Neither example incurs any runtime overhead unless/until the app actually tries to <i>access</i> the class, 2) Your &quot;Singleton1&quot; example (the style I&#39;ve always used) has a potential race condition if <code>Singleton1.getInstance()</code> is called from multiple concurrent threads.  Here&#39;s a good discussion of different alternatives: <a href=\"https://www.digitalocean.com/community/tutorials/java-singleton-design-pattern-best-practices-examples\" rel=\"nofollow noreferrer\">digitalocean.com/community/tutorials/&hellip;</a>"},{"owner":{"account_id":29156880,"reputation":21,"user_id":22336461,"display_name":"jcli"},"score":0,"creation_date":1691221215,"post_id":76833094,"comment_id":135465290,"body_markdown":"@paulsm4:: In fact, what I want to know is when using Singleton1 is better than Singleton and when using Singleton is better","body":"@paulsm4:: In fact, what I want to know is when using Singleton1 is better than Singleton and when using Singleton is better"},{"owner":{"account_id":184870,"reputation":118711,"user_id":421195,"accept_rate":83,"display_name":"paulsm4"},"score":0,"creation_date":1691252972,"post_id":76833094,"comment_id":135468347,"body_markdown":"The link I cited, [Java Singleton Design Pattern Best Practices with Examples](https://www.digitalocean.com/community/tutorials/java-singleton-design-pattern-best-practices-examples), actually gives *eight* different alternatives for implementing a singleton in Java, And discusses the pros/cons of each.  Personally, whenever it&#39;s applicable, I prefer &quot;lazy initialization&quot; (`if instance == null...`), without &quot;synchronized&quot; (unnecessary overhead if not multithreaded).","body":"The link I cited, <a href=\"https://www.digitalocean.com/community/tutorials/java-singleton-design-pattern-best-practices-examples\" rel=\"nofollow noreferrer\">Java Singleton Design Pattern Best Practices with Examples</a>, actually gives <i>eight</i> different alternatives for implementing a singleton in Java, And discusses the pros/cons of each.  Personally, whenever it&#39;s applicable, I prefer &quot;lazy initialization&quot; (<code>if instance == null...</code>), without &quot;synchronized&quot; (unnecessary overhead if not multithreaded)."}],"owner":{"account_id":29156880,"reputation":21,"user_id":22336461,"display_name":"jcli"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"closed_date":1691126761,"answer_count":0,"score":1,"last_activity_date":1691126038,"creation_date":1691126038,"question_id":76833094,"body_markdown":"Under what circumstances, we need to use the lazy singleton mode. It seems that in the process of use, we load a class to use its properties or methods, then we must create its instance at this time, so there is no difference between a hungry man and a lazy man. In what scenario do we need to load It seems that a class is always loaded the first time it is used\r\n\r\nMy question is ： Under what circumstances, a singleton class will be loaded by jvm but not used. It seems that jvm always loads this class when it is used for the first time\r\n\r\n```\r\nclass Main{\r\n    public static void main(String[] args) {\r\n        Singleton instance=Singleton.getInstance();\r\n        Singleton1 singleton1=Singleton1.getInstance();\r\n    }\r\n}\r\nclass Singleton1{\r\n    private Singleton1(){}\r\n    private volatile static Singleton1 instance=null;\r\n    public static Singleton1 getInstance(){\r\n        if(instance==null){\r\n            synchronized (Singleton1.class){\r\n                if(instance==null){\r\n                    instance=new Singleton1();\r\n                }\r\n            }\r\n        }\r\n        return instance;\r\n    }\r\n}\r\nclass Singleton{\r\n    private Singleton(){}\r\n    private static Singleton instance=new Singleton();\r\n    public static Singleton getInstance(){\r\n        return instance;\r\n    }\r\n}\r\n```\r\nThere seems to be no difference between the two\r\n\r\nHope to get some lazy singleton application scenarios","title":"What is the use of singleton pattern lazy style","body":"<p>Under what circumstances, we need to use the lazy singleton mode. It seems that in the process of use, we load a class to use its properties or methods, then we must create its instance at this time, so there is no difference between a hungry man and a lazy man. In what scenario do we need to load It seems that a class is always loaded the first time it is used</p>\n<p>My question is ： Under what circumstances, a singleton class will be loaded by jvm but not used. It seems that jvm always loads this class when it is used for the first time</p>\n<pre><code>class Main{\n    public static void main(String[] args) {\n        Singleton instance=Singleton.getInstance();\n        Singleton1 singleton1=Singleton1.getInstance();\n    }\n}\nclass Singleton1{\n    private Singleton1(){}\n    private volatile static Singleton1 instance=null;\n    public static Singleton1 getInstance(){\n        if(instance==null){\n            synchronized (Singleton1.class){\n                if(instance==null){\n                    instance=new Singleton1();\n                }\n            }\n        }\n        return instance;\n    }\n}\nclass Singleton{\n    private Singleton(){}\n    private static Singleton instance=new Singleton();\n    public static Singleton getInstance(){\n        return instance;\n    }\n}\n</code></pre>\n<p>There seems to be no difference between the two</p>\n<p>Hope to get some lazy singleton application scenarios</p>\n"},{"tags":["java","spring","lambda","dependency-injection"],"comments":[{"owner":{"account_id":2701145,"reputation":4860,"user_id":2433323,"display_name":"Klaus Groenbaek"},"score":0,"creation_date":1691207552,"post_id":76826502,"comment_id":135464388,"body_markdown":"The main point of Spring is to avoid static configuration, so this code looks a a bit suspect, it should be possible to make the lambda handler a non-static Spring bean. \nMy guess is you are using Spring boot, and that there is some autoconfiguration, so please post a github project, that all us to troubleshoot.","body":"The main point of Spring is to avoid static configuration, so this code looks a a bit suspect, it should be possible to make the lambda handler a non-static Spring bean.  My guess is you are using Spring boot, and that there is some autoconfiguration, so please post a github project, that all us to troubleshoot."}],"owner":{"account_id":29150180,"reputation":1,"user_id":22331201,"display_name":"Aaditya Vikram"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691125547,"creation_date":1691053516,"question_id":76826502,"body_markdown":"The Autowire dependency failed when invoking lambda function throws NullPointerException\r\n```\r\n@ComponentScan(&quot;com.cashe&quot;)\r\npublic class LambdaHandler implements RequestHandler&lt;AwsProxyRequest, AwsProxyResponse&gt; {\r\n    private static SpringBootLambdaContainerHandler&lt;AwsProxyRequest, AwsProxyResponse&gt; handler;\r\n    @Autowired\r\n    ElectronicPaymentReconciliationServiceImpl service;\r\n    static {\r\n        try {\r\n            handler = SpringBootLambdaContainerHandler.getAwsProxyHandler(ReconApplication.class);\r\n        } catch (ContainerInitializationException ex) {\r\n            throw new RuntimeException(&quot;Unable to load spring boot application&quot;, ex);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public AwsProxyResponse handleRequest(AwsProxyRequest input, Context context) {\r\n        System.out.println(&quot;application started&quot;);\r\n        service.processEelectronicRePaymentReconciliation();\r\n        return handler.proxy(input, context);\r\n    }\r\n}\r\n```\r\nLambda invoke :com.check.LambdaHandler::handleRequest\r\nI have tried using AnnotationConfigApplicationContext this fails for other classes with autowire.\r\nALso used @ImportResource(locations = { &quot;classpath:beans/factorybean-spring-ctx.xml&quot; }) where i defined bean in xml.\r\nthe application works fine when its started as spring boot.\r\nbut once invoke as lambda function the Autowiring does not happen, how to inject dependency just like spring boot?\r\nIf I&#39;m directly inject dependency at constructor and starting the SessionFactory is being **deinitialized**.","title":"The spring autowire dependcy fails for AWS Lambda funciton","body":"<p>The Autowire dependency failed when invoking lambda function throws NullPointerException</p>\n<pre><code>@ComponentScan(&quot;com.cashe&quot;)\npublic class LambdaHandler implements RequestHandler&lt;AwsProxyRequest, AwsProxyResponse&gt; {\n    private static SpringBootLambdaContainerHandler&lt;AwsProxyRequest, AwsProxyResponse&gt; handler;\n    @Autowired\n    ElectronicPaymentReconciliationServiceImpl service;\n    static {\n        try {\n            handler = SpringBootLambdaContainerHandler.getAwsProxyHandler(ReconApplication.class);\n        } catch (ContainerInitializationException ex) {\n            throw new RuntimeException(&quot;Unable to load spring boot application&quot;, ex);\n        }\n    }\n\n    @Override\n    public AwsProxyResponse handleRequest(AwsProxyRequest input, Context context) {\n        System.out.println(&quot;application started&quot;);\n        service.processEelectronicRePaymentReconciliation();\n        return handler.proxy(input, context);\n    }\n}\n</code></pre>\n<p>Lambda invoke :com.check.LambdaHandler::handleRequest\nI have tried using AnnotationConfigApplicationContext this fails for other classes with autowire.\nALso used @ImportResource(locations = { &quot;classpath:beans/factorybean-spring-ctx.xml&quot; }) where i defined bean in xml.\nthe application works fine when its started as spring boot.\nbut once invoke as lambda function the Autowiring does not happen, how to inject dependency just like spring boot?\nIf I'm directly inject dependency at constructor and starting the SessionFactory is being <strong>deinitialized</strong>.</p>\n"},{"tags":["java","spring","spring-boot","hibernate","maven"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1691071793,"post_id":76828500,"comment_id":135444478,"body_markdown":"1. remove the `org.hibernate.javax.persistence` dependency, if you get compilation errors fix them (use `jakarta.persistence` instead of `javax.persistence`. 2. Remove all the annotations you have on your `@SpringBootApplication` class but the `@SpringBootApplication` annotation. Place the `@SpringBootApplication` annotated class in the `it.example` package.","body":"1. remove the <code>org.hibernate.javax.persistence</code> dependency, if you get compilation errors fix them (use <code>jakarta.persistence</code> instead of <code>javax.persistence</code>. 2. Remove all the annotations you have on your <code>@SpringBootApplication</code> class but the <code>@SpringBootApplication</code> annotation. Place the <code>@SpringBootApplication</code> annotated class in the <code>it.example</code> package."},{"owner":{"account_id":22851705,"reputation":101,"user_id":16997214,"display_name":"nic"},"score":0,"creation_date":1691072062,"post_id":76828500,"comment_id":135444555,"body_markdown":"@M.Deinum thanks! Already done both, the problem does not change at all. \nI am now updating the question with new dependencies and code","body":"@M.Deinum thanks! Already done both, the problem does not change at all.  I am now updating the question with new dependencies and code"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1691072216,"post_id":76828500,"comment_id":135444592,"body_markdown":"No you haven&#39;t done both, you removed all your dependencies, I doubt it will even start in the current situation. Remove the `javax.persistence-api` add `spring-boot-starter-data-jpa`.","body":"No you haven&#39;t done both, you removed all your dependencies, I doubt it will even start in the current situation. Remove the <code>javax.persistence-api</code> add <code>spring-boot-starter-data-jpa</code>."},{"owner":{"account_id":22851705,"reputation":101,"user_id":16997214,"display_name":"nic"},"score":0,"creation_date":1691074761,"post_id":76828500,"comment_id":135445203,"body_markdown":"@M.Deinum Copied wrong project pom, now you can see I simplified everything and put only one simple GET endpoint. Still nothing and still saem exact error of unexisting api.\n\nConsole now says:\n`Finished Spring Data repository scanning in 1 ms. Found 0 JPA repository interfaces.`","body":"@M.Deinum Copied wrong project pom, now you can see I simplified everything and put only one simple GET endpoint. Still nothing and still saem exact error of unexisting api.  Console now says: <code>Finished Spring Data repository scanning in 1 ms. Found 0 JPA repository interfaces.</code>"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1691085976,"post_id":76828500,"comment_id":135447572,"body_markdown":"No you didn&#39;t... As statedf remove `jakarta.persistence-api` you don&#39;t need a `persistence-api` version as that is already included in the `spring-boot-starter-data-jpa`. If that line is shown your application wouldn&#39;t even start as the controller would blow up as it needs the repository. If your application starts tha tmeans your `@SpringBootApplication` annotated class isn&#39;t in a top-level package covering all other packages.","body":"No you didn&#39;t... As statedf remove <code>jakarta.persistence-api</code> you don&#39;t need a <code>persistence-api</code> version as that is already included in the <code>spring-boot-starter-data-jpa</code>. If that line is shown your application wouldn&#39;t even start as the controller would blow up as it needs the repository. If your application starts tha tmeans your <code>@SpringBootApplication</code> annotated class isn&#39;t in a top-level package covering all other packages."},{"owner":{"account_id":22851705,"reputation":101,"user_id":16997214,"display_name":"nic"},"score":0,"creation_date":1691089371,"post_id":76828500,"comment_id":135448203,"body_markdown":"@M.Deinum they are not integrated, there is the need to install javax.persistence or jakarta.persistence to use those annotations.","body":"@M.Deinum they are not integrated, there is the need to install javax.persistence or jakarta.persistence to use those annotations."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1691130076,"post_id":76828500,"comment_id":135452676,"body_markdown":"They are those dependecies come from `spring-boot-starter-data-jpa`. But as stated your app wouldn&#39;t even start right now, if it does the structure isn&#39;t as I said it should be.","body":"They are those dependecies come from <code>spring-boot-starter-data-jpa</code>. But as stated your app wouldn&#39;t even start right now, if it does the structure isn&#39;t as I said it should be."}],"answers":[{"tags":[],"owner":{"account_id":10247695,"reputation":64,"user_id":7562982,"display_name":"Jasvant Singh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691124164,"creation_date":1691078667,"answer_id":76829829,"question_id":76828500,"body_markdown":"Please check if your application is hosted on a context path. For me it is hosted at **/pimservice** . This path needs to be prepended before any URI you host.\r\n\r\n    2023-08-03T19:26:14.587+05:30  INFO 13644 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8087 (http) with context path &#39;/pimservice&#39;\r\n\r\nFrom your question logs says\r\n\r\n    2023-08-03T15:06:10.194+02:00  WARN 18340 --- [nio-8081-exec-1] o.s.web.servlet.PageNotFound             : No mapping for GET /contacts/\r\n\r\nThe path is /contacts/ and not /contacts/retriveAll . It looks like you are making some mistake on client side.","title":"springboot api service: &quot;status&quot;: 404, &quot;error&quot;: &quot;Not Found&quot;","body":"<p>Please check if your application is hosted on a context path. For me it is hosted at <strong>/pimservice</strong> . This path needs to be prepended before any URI you host.</p>\n<pre><code>2023-08-03T19:26:14.587+05:30  INFO 13644 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8087 (http) with context path '/pimservice'\n</code></pre>\n<p>From your question logs says</p>\n<pre><code>2023-08-03T15:06:10.194+02:00  WARN 18340 --- [nio-8081-exec-1] o.s.web.servlet.PageNotFound             : No mapping for GET /contacts/\n</code></pre>\n<p>The path is /contacts/ and not /contacts/retriveAll . It looks like you are making some mistake on client side.</p>\n"}],"owner":{"account_id":22851705,"reputation":101,"user_id":16997214,"display_name":"nic"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":107,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1691124164,"creation_date":1691068896,"question_id":76828500,"body_markdown":"I am having a very weird error with Spring, and apparently my code does not create the right endpoints for the API. \r\nWhen I open the Web Browser and try to access the endpoint at http://localhost:8081/contacts/retrieveAll I always get a 404 as answer.\r\nAnd this is what the console says:\r\n```\r\n2023-08-03T15:06:10.176+02:00  INFO 18340 --- [nio-8081-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms\r\n2023-08-03T15:06:10.188+02:00 DEBUG 18340 --- [nio-8081-exec-1] o.s.web.servlet.DispatcherServlet        : GET &quot;/contacts/&quot;, parameters={}\r\n2023-08-03T15:06:10.194+02:00  WARN 18340 --- [nio-8081-exec-1] o.s.web.servlet.PageNotFound             : No mapping for GET /contacts/\r\n2023-08-03T15:06:10.195+02:00 DEBUG 18340 --- [nio-8081-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND\r\n```\r\n\r\nIn the code below you can see that that:\r\n- port is surely 8081 (Tomcat confirms it in the console too)\r\n- the Controller class defines the API as I use it: /contacts + /retrieveAll (I literally copied a pre-existent code and just changed names and some logic in the functions for this class)\r\n\r\nSo I leave you my code here, hoping that somebody is able to spot the problem.\r\nI have been testing all morning and I start thinking it is something very hard to spot, or something very stupid and, at the moment, invisible to my eyes.\r\n\r\nEntity class:\r\n```\r\n@Entity\r\n@Table(name = &quot;person&quot;)\r\npublic class Person {\r\n\t\r\n\t@Id\r\n    @Column(name = &quot;phone_number&quot;)\r\n\tprivate String phoneNumber;\r\n\t\r\n    @Column(name = &quot;name_person&quot;)\r\n\tprivate String name;\r\n    \r\n    @Column(name = &quot;surname_person&quot;)\r\n\tprivate String surname;\r\n    \r\n    @Column(name = &quot;last_modified&quot;)\r\n    @Temporal(TemporalType.TIMESTAMP)\r\n    private Date lastModified;\r\n    \r\n    //No args - JPA&#39;s reflection \r\n    public Person() {\r\n    }\r\n    \r\n    public Person(String phoneNumber, String name, String surname) {\r\n    ...\r\n    }\r\n    \r\n    @PrePersist\r\n    protected void onCreate() {\r\n        lastModified = new Date();\r\n    }\r\n\r\n\t// getters and setters...\r\n}\r\n```\r\n\r\nThe contacts class:\r\n```\r\npublic class AddressBook {\r\n\r\n    private List&lt;Person&gt; persons;\r\n\r\n    public AddressBook() {\r\n        persons = new ArrayList&lt;&gt;();\r\n    }\r\n\r\n    public List&lt;Person&gt; getPersons() {\r\n        return persons;\r\n    }\r\n\r\n    public void addPerson(Person person) {\r\n        persons.add(person);\r\n    }\r\n\r\n    public void removePerson(Person person) {\r\n        persons.remove(person);\r\n    }\r\n}\r\n```\r\n\r\nThe JpaRepository interface:\r\n ```\r\n@Repository\r\npublic interface PersonRepository extends CrudRepository&lt;Person, String&gt; {\r\n    @Override\r\n    Person save(Person person);\r\n    @Override\r\n    @Cacheable(&quot;persons&quot;)\r\n    List&lt;Person&gt; findAll();\r\n    void deleteByPhoneNumber(String phoneNumber);\r\n    List&lt;Person&gt; searchBySurname(String surname);\r\n    List&lt;Person&gt; searchByPhoneNumber(String phoneNumber);\r\n}\r\n```\r\n\r\nAddressBookService class:\r\n```\r\n@Service\r\npublic class AddressBookService {\r\n    private final AddressBook addressBook;\r\n\r\n    public AddressBookService() {\r\n        this.addressBook = new AddressBook();\r\n    }\r\n\r\n    public List&lt;Person&gt; retrieveAll() {\r\n        return addressBook.getPersons();\r\n    }\r\n\r\n}\r\n```\r\n\r\nAddressBookController class:\r\n```\r\n@RestController\r\n@RequestMapping(&quot;/contacts&quot;)\r\npublic class AddressBookController {\r\n\r\n    @Autowired\r\n    private PersonRepository personRepository;\r\n  \r\n    @GetMapping(&quot;/retrieveAll&quot;)\r\n    public ResponseEntity&lt;?&gt; retrieveContacts() {\r\n        List&lt;Person&gt; contacts = personRepository.findAll();\r\n\r\n        if (contacts.isEmpty()) \r\n            return ResponseEntity.status(HttpStatus.NOT_FOUND).body(&quot;Nobody found in the address book.&quot;);\r\n        \r\n        return ResponseEntity.ok(contacts);\r\n    }\r\n```\r\n\r\nThe SpringApp\r\n```\r\n@SpringBootApplication\r\npublic class AddressBookSampleApplication {\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(AddressBookSampleApplication.class, args);\r\n    }\r\n}\r\n```\r\n\r\nPOM file:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.1.2&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;it.unicredit&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;demo&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;demo&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jdbc&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n\t\t    &lt;!-- Replace version with the appropriate version for your MySQL server --&gt;\r\n\t\t    &lt;version&gt;8.0.27&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t\r\n\t\t&lt;dependency&gt;\r\n\t        &lt;groupId&gt;jakarta.persistence&lt;/groupId&gt;\r\n\t        &lt;artifactId&gt;jakarta.persistence-api&lt;/artifactId&gt;\r\n\t        &lt;version&gt;3.1.0&lt;/version&gt;\r\n\t    &lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nProperties file:\r\n```\r\nspring.datasource.url=jdbc:mysql://localhost:3306/mysql80\r\nspring.datasource.username=root\r\nspring.datasource.password=${DB_PASSWORD}\r\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\r\n\r\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect\r\n\r\nserver.port=8081\r\ndebug=true\r\n```\r\n\r\n","title":"springboot api service: &quot;status&quot;: 404, &quot;error&quot;: &quot;Not Found&quot;","body":"<p>I am having a very weird error with Spring, and apparently my code does not create the right endpoints for the API.\nWhen I open the Web Browser and try to access the endpoint at http://localhost:8081/contacts/retrieveAll I always get a 404 as answer.\nAnd this is what the console says:</p>\n<pre><code>2023-08-03T15:06:10.176+02:00  INFO 18340 --- [nio-8081-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms\n2023-08-03T15:06:10.188+02:00 DEBUG 18340 --- [nio-8081-exec-1] o.s.web.servlet.DispatcherServlet        : GET &quot;/contacts/&quot;, parameters={}\n2023-08-03T15:06:10.194+02:00  WARN 18340 --- [nio-8081-exec-1] o.s.web.servlet.PageNotFound             : No mapping for GET /contacts/\n2023-08-03T15:06:10.195+02:00 DEBUG 18340 --- [nio-8081-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND\n</code></pre>\n<p>In the code below you can see that that:</p>\n<ul>\n<li>port is surely 8081 (Tomcat confirms it in the console too)</li>\n<li>the Controller class defines the API as I use it: /contacts + /retrieveAll (I literally copied a pre-existent code and just changed names and some logic in the functions for this class)</li>\n</ul>\n<p>So I leave you my code here, hoping that somebody is able to spot the problem.\nI have been testing all morning and I start thinking it is something very hard to spot, or something very stupid and, at the moment, invisible to my eyes.</p>\n<p>Entity class:</p>\n<pre><code>@Entity\n@Table(name = &quot;person&quot;)\npublic class Person {\n    \n    @Id\n    @Column(name = &quot;phone_number&quot;)\n    private String phoneNumber;\n    \n    @Column(name = &quot;name_person&quot;)\n    private String name;\n    \n    @Column(name = &quot;surname_person&quot;)\n    private String surname;\n    \n    @Column(name = &quot;last_modified&quot;)\n    @Temporal(TemporalType.TIMESTAMP)\n    private Date lastModified;\n    \n    //No args - JPA's reflection \n    public Person() {\n    }\n    \n    public Person(String phoneNumber, String name, String surname) {\n    ...\n    }\n    \n    @PrePersist\n    protected void onCreate() {\n        lastModified = new Date();\n    }\n\n    // getters and setters...\n}\n</code></pre>\n<p>The contacts class:</p>\n<pre><code>public class AddressBook {\n\n    private List&lt;Person&gt; persons;\n\n    public AddressBook() {\n        persons = new ArrayList&lt;&gt;();\n    }\n\n    public List&lt;Person&gt; getPersons() {\n        return persons;\n    }\n\n    public void addPerson(Person person) {\n        persons.add(person);\n    }\n\n    public void removePerson(Person person) {\n        persons.remove(person);\n    }\n}\n</code></pre>\n<p>The JpaRepository interface:</p>\n<pre><code>@Repository\npublic interface PersonRepository extends CrudRepository&lt;Person, String&gt; {\n   @Override\n   Person save(Person person);\n   @Override\n   @Cacheable(&quot;persons&quot;)\n   List&lt;Person&gt; findAll();\n   void deleteByPhoneNumber(String phoneNumber);\n   List&lt;Person&gt; searchBySurname(String surname);\n   List&lt;Person&gt; searchByPhoneNumber(String phoneNumber);\n}\n</code></pre>\n<p>AddressBookService class:</p>\n<pre><code>@Service\npublic class AddressBookService {\n    private final AddressBook addressBook;\n\n    public AddressBookService() {\n        this.addressBook = new AddressBook();\n    }\n\n    public List&lt;Person&gt; retrieveAll() {\n        return addressBook.getPersons();\n    }\n\n}\n</code></pre>\n<p>AddressBookController class:</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/contacts&quot;)\npublic class AddressBookController {\n\n    @Autowired\n    private PersonRepository personRepository;\n  \n    @GetMapping(&quot;/retrieveAll&quot;)\n    public ResponseEntity&lt;?&gt; retrieveContacts() {\n        List&lt;Person&gt; contacts = personRepository.findAll();\n\n        if (contacts.isEmpty()) \n            return ResponseEntity.status(HttpStatus.NOT_FOUND).body(&quot;Nobody found in the address book.&quot;);\n        \n        return ResponseEntity.ok(contacts);\n    }\n</code></pre>\n<p>The SpringApp</p>\n<pre><code>@SpringBootApplication\npublic class AddressBookSampleApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(AddressBookSampleApplication.class, args);\n    }\n}\n</code></pre>\n<p>POM file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.1.2&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;it.unicredit&lt;/groupId&gt;\n    &lt;artifactId&gt;demo&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;demo&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n    \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jdbc&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        \n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;!-- Replace version with the appropriate version for your MySQL server --&gt;\n            &lt;version&gt;8.0.27&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        \n        &lt;dependency&gt;\n            &lt;groupId&gt;jakarta.persistence&lt;/groupId&gt;\n            &lt;artifactId&gt;jakarta.persistence-api&lt;/artifactId&gt;\n            &lt;version&gt;3.1.0&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>Properties file:</p>\n<pre><code>spring.datasource.url=jdbc:mysql://localhost:3306/mysql80\nspring.datasource.username=root\nspring.datasource.password=${DB_PASSWORD}\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\n\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect\n\nserver.port=8081\ndebug=true\n</code></pre>\n"},{"tags":["java","android","retrofit"],"comments":[{"owner":{"account_id":11809413,"reputation":554,"user_id":8641169,"display_name":"Vikas Choudhary"},"score":0,"creation_date":1691126987,"post_id":76832982,"comment_id":135452306,"body_markdown":"Please add your API `BASE_URL`","body":"Please add your API <code>BASE_URL</code>"}],"owner":{"account_id":21471135,"reputation":13,"user_id":15820121,"display_name":"Vishwajith Shettigar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691123975,"creation_date":1691123975,"question_id":76832982,"body_markdown":"I have got a problem, when I call API its gives null in my app but works fine with postman  below is my `model.wrapper` and `viewmodel` class, and I am using retrofit for API call\r\n```\r\n public class Episodesresponse {\r\n    \r\n        private List&lt;Episodemodel&gt; episodes;\r\n    \r\n        public List&lt;Episodemodel&gt; getEpisodes() {\r\n            return episodes;\r\n        }\r\n    }\r\n```\r\n  above is episode wrapper class. \r\n\r\n\r\n\r\nEpisode model class \r\n```\r\n    public class Episodemodel {\r\n\r\n    @SerializedName(&quot;episode_number&quot;)\r\n    int epino;\r\n\r\n    @SerializedName(&quot;name&quot;)\r\n    String name;\r\n\r\n    @SerializedName(&quot;overview&quot;)\r\n    String  overview;\r\n\r\n    @SerializedName(&quot;still_path&quot;)\r\n    String image;\r\n\r\n    public int getEpino() {\r\n        return epino;\r\n    }\r\n\r\n    public void setEpino(int epino) {\r\n        this.epino = epino;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public String getOverview() {\r\n        return overview;\r\n    }\r\n\r\n    public void setOverview(String overview) {\r\n        this.overview = overview;\r\n    }\r\n\r\n    public String getImage() {\r\n        return image;\r\n    }\r\n\r\n    public void setImage(String image) {\r\n        this.image = image;\r\n    }\r\n}\r\n```\r\nHere is `viewmodel` class code:  \r\n\r\n    public void fetchEpisodes(int id) {\r\n    \r\n        Call&lt;Episodesresponse&gt;call = movieapiservice.getEpisodes();\r\n        call.enqueue(new Callback&lt;Episodesresponse&gt;() {\r\n    \r\n            public void onResponse(Call&lt;Episodesresponse&gt;call, Response&lt;Episodesresponse&gt; response) {\r\n                if (response.isSuccessful()) {\r\n                    Episodesresponse data =  response.body();\r\n                    List&lt;Episodemodel&gt; datalist=data.getEpisodes();\r\n    \r\n    \r\n                    if(data.getEpisodes()==null)\r\n                        Log.e(&quot;#&quot;,&quot;Episode under sucessful--&gt;&quot; + &quot;null&quot;);\r\n    \r\n    \r\n    \r\n                }\r\n                Log.e(&quot;#&quot;,&quot;Episode under response&quot;);\r\n            }\r\n    \r\n    \r\n    \r\n            @Override\r\n            public void onFailure(Call&lt;Episodesresponse&gt; call, Throwable t) {\r\n                Log.e(&quot;#&quot;,&quot;Episode under failure &quot;+ t.getMessage());\r\n            }\r\n    \r\n        });\r\n    }\r\n\r\n\r\nservice class \r\n \r\n\r\n     @Headers({&quot;Authorization: Bearer &quot;+Apikey.skey, &quot;accept: application/json&quot;})\r\n        @GET(&quot;tv/1399?api_key=dewdewfdef78trt43weg&amp;append_to_response=season/2&quot;)\r\n        Call&lt;Episodesresponse&gt; getEpisodes();\r\n\r\n\r\n// api key is secret \r\n\r\nJSON sample \r\n\r\n\r\n    {\r\n     &quot;_id&quot;: &quot;5256c89f19c2956ff6046d47&quot;,\r\n            &quot;air_date&quot;: &quot;2011-04-17&quot;,\r\n      &quot;episodes&quot;: [\r\n        {\r\n          &quot;episode_number&quot;: 1,\r\n          &quot;name&quot;: &quot;Episode 1&quot;,\r\n          &quot;overview&quot;: &quot;This is the first episode.&quot;,\r\n          &quot;still_path&quot;: &quot;path/to/image.jpg&quot;\r\n        },\r\n        {\r\n          &quot;episode_number&quot;: 2,\r\n          &quot;name&quot;: &quot;Episode 2&quot;,\r\n          &quot;overview&quot;: &quot;This is the second episode.&quot;,\r\n          &quot;still_path&quot;: &quot;path/to/image.jpg&quot;\r\n        }\r\n      ]\r\n    }\r\n\r\ni am not able to get any response, ","title":"I am building Android (Java) netflix clone using tmdb API service but i got null response","body":"<p>I have got a problem, when I call API its gives null in my app but works fine with postman  below is my <code>model.wrapper</code> and <code>viewmodel</code> class, and I am using retrofit for API call</p>\n<pre><code> public class Episodesresponse {\n    \n        private List&lt;Episodemodel&gt; episodes;\n    \n        public List&lt;Episodemodel&gt; getEpisodes() {\n            return episodes;\n        }\n    }\n</code></pre>\n<p>above is episode wrapper class.</p>\n<p>Episode model class</p>\n<pre><code>    public class Episodemodel {\n\n    @SerializedName(&quot;episode_number&quot;)\n    int epino;\n\n    @SerializedName(&quot;name&quot;)\n    String name;\n\n    @SerializedName(&quot;overview&quot;)\n    String  overview;\n\n    @SerializedName(&quot;still_path&quot;)\n    String image;\n\n    public int getEpino() {\n        return epino;\n    }\n\n    public void setEpino(int epino) {\n        this.epino = epino;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getOverview() {\n        return overview;\n    }\n\n    public void setOverview(String overview) {\n        this.overview = overview;\n    }\n\n    public String getImage() {\n        return image;\n    }\n\n    public void setImage(String image) {\n        this.image = image;\n    }\n}\n</code></pre>\n<p>Here is <code>viewmodel</code> class code:</p>\n<pre><code>public void fetchEpisodes(int id) {\n\n    Call&lt;Episodesresponse&gt;call = movieapiservice.getEpisodes();\n    call.enqueue(new Callback&lt;Episodesresponse&gt;() {\n\n        public void onResponse(Call&lt;Episodesresponse&gt;call, Response&lt;Episodesresponse&gt; response) {\n            if (response.isSuccessful()) {\n                Episodesresponse data =  response.body();\n                List&lt;Episodemodel&gt; datalist=data.getEpisodes();\n\n\n                if(data.getEpisodes()==null)\n                    Log.e(&quot;#&quot;,&quot;Episode under sucessful--&gt;&quot; + &quot;null&quot;);\n\n\n\n            }\n            Log.e(&quot;#&quot;,&quot;Episode under response&quot;);\n        }\n\n\n\n        @Override\n        public void onFailure(Call&lt;Episodesresponse&gt; call, Throwable t) {\n            Log.e(&quot;#&quot;,&quot;Episode under failure &quot;+ t.getMessage());\n        }\n\n    });\n}\n</code></pre>\n<p>service class</p>\n<pre><code> @Headers({&quot;Authorization: Bearer &quot;+Apikey.skey, &quot;accept: application/json&quot;})\n    @GET(&quot;tv/1399?api_key=dewdewfdef78trt43weg&amp;append_to_response=season/2&quot;)\n    Call&lt;Episodesresponse&gt; getEpisodes();\n</code></pre>\n<p>// api key is secret</p>\n<p>JSON sample</p>\n<pre><code>{\n &quot;_id&quot;: &quot;5256c89f19c2956ff6046d47&quot;,\n        &quot;air_date&quot;: &quot;2011-04-17&quot;,\n  &quot;episodes&quot;: [\n    {\n      &quot;episode_number&quot;: 1,\n      &quot;name&quot;: &quot;Episode 1&quot;,\n      &quot;overview&quot;: &quot;This is the first episode.&quot;,\n      &quot;still_path&quot;: &quot;path/to/image.jpg&quot;\n    },\n    {\n      &quot;episode_number&quot;: 2,\n      &quot;name&quot;: &quot;Episode 2&quot;,\n      &quot;overview&quot;: &quot;This is the second episode.&quot;,\n      &quot;still_path&quot;: &quot;path/to/image.jpg&quot;\n    }\n  ]\n}\n</code></pre>\n<p>i am not able to get any response,</p>\n"},{"tags":["java","string","url","uri"],"comments":[{"owner":{"account_id":1946663,"reputation":15594,"user_id":1751640,"accept_rate":75,"display_name":"Mordechai"},"score":0,"creation_date":1430220054,"post_id":29917970,"comment_id":47957041,"body_markdown":"`String sub = urlString.substring(0, urlString.indexOf(&#39;?&#39;))`","body":"<code>String sub = urlString.substring(0, urlString.indexOf(&#39;?&#39;))</code>"},{"owner":{"account_id":1759335,"reputation":1104,"user_id":1606865,"accept_rate":84,"display_name":"Matt Stevens"},"score":0,"creation_date":1430220426,"post_id":29917970,"comment_id":47957332,"body_markdown":"The url is the bit you wish to remove. The parameters are the values after the &#39;?&#39;.","body":"The url is the bit you wish to remove. The parameters are the values after the &#39;?&#39;."},{"owner":{"account_id":6430123,"reputation":10827,"user_id":5749914,"accept_rate":90,"display_name":"Elliott Beach"},"score":1,"creation_date":1497390585,"post_id":29917970,"comment_id":76055948,"body_markdown":"This is a good, useful question.","body":"This is a good, useful question."}],"answers":[{"tags":[],"owner":{"account_id":2937730,"reputation":7422,"user_id":2516301,"accept_rate":100,"display_name":"vefthym"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1430219962,"creation_date":1430219962,"answer_id":29918018,"question_id":29917970,"body_markdown":"Assuming the `url` is a java String:\r\n\r\n    String newURL = url.substring(0, url.indexOf(&quot;?&quot;));\r\n\r\nshould do the trick...","title":"How to remove the parameters in url Java","body":"<p>Assuming the <code>url</code> is a java String:</p>\n\n<pre><code>String newURL = url.substring(0, url.indexOf(\"?\"));\n</code></pre>\n\n<p>should do the trick...</p>\n"},{"tags":[],"owner":{"account_id":5556427,"reputation":3820,"user_id":4407627,"display_name":"Brijesh Bhatt"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1495651632,"creation_date":1430219973,"answer_id":29918025,"question_id":29917970,"body_markdown":"    String url=&quot;http://localhost:8084/blog1_1/title?uname=55%22&quot;;\r\n    String onlyUrl=url.substring(0,url.lastIndexOf(&quot;?&quot;)); //this has the URL","title":"How to remove the parameters in url Java","body":"<pre><code>String url=\"http://localhost:8084/blog1_1/title?uname=55%22\";\nString onlyUrl=url.substring(0,url.lastIndexOf(\"?\")); //this has the URL\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6788587,"reputation":272,"user_id":5226429,"display_name":"Vladimir Eremeev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1614614540,"creation_date":1614614540,"answer_id":66425502,"question_id":29917970,"body_markdown":"Java:\r\n\r\n    String newURL = Uri.parse(&quot;YOUR_URL&quot;).getPath()\r\n\r\nKotlin:\r\n\r\n    val newURL = Uri.parse(&quot;YOUR_URL&quot;).path","title":"How to remove the parameters in url Java","body":"<p>Java:</p>\n<pre><code>String newURL = Uri.parse(&quot;YOUR_URL&quot;).getPath()\n</code></pre>\n<p>Kotlin:</p>\n<pre><code>val newURL = Uri.parse(&quot;YOUR_URL&quot;).path\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8110312,"reputation":54,"user_id":14123402,"display_name":"pvs"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691123738,"creation_date":1691123738,"answer_id":76832970,"question_id":29917970,"body_markdown":"If you have your URL as an object and not a String you can do this:\r\n\r\nKotlin:\r\n\r\n    val url = URL(&quot;http://localhost:8084/blog1_1/title?uname=55%22&quot;)\r\n    \r\n    val host = url.host\r\n    val path = url.path\r\n    \r\n    val newUrl = URL(&quot;https://$host$path&quot;) \r\n\r\nJava:\r\n\r\n    URL url = new URL(&quot;http://localhost:8084/blog1_1/title?uname=55%22&quot;);\r\n        \r\n    String host = url.getHost();\r\n    String path = url.getPath();\r\n\r\n    URL newUrl = new URL(&quot;https://&quot; + host + path);","title":"How to remove the parameters in url Java","body":"<p>If you have your URL as an object and not a String you can do this:</p>\n<p>Kotlin:</p>\n<pre><code>val url = URL(&quot;http://localhost:8084/blog1_1/title?uname=55%22&quot;)\n\nval host = url.host\nval path = url.path\n\nval newUrl = URL(&quot;https://$host$path&quot;) \n</code></pre>\n<p>Java:</p>\n<pre><code>URL url = new URL(&quot;http://localhost:8084/blog1_1/title?uname=55%22&quot;);\n    \nString host = url.getHost();\nString path = url.getPath();\n\nURL newUrl = new URL(&quot;https://&quot; + host + path);\n</code></pre>\n"}],"owner":{"account_id":4926385,"reputation":2441,"user_id":3967531,"accept_rate":33,"display_name":"Mehandi Hassan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13912,"favorite_count":0,"down_vote_count":7,"up_vote_count":7,"accepted_answer_id":29918025,"answer_count":4,"score":0,"last_activity_date":1691123738,"creation_date":1430219861,"question_id":29917970,"body_markdown":"I have a URL when I run my project.\r\n\r\n   http://localhost:8084/blog1_1/title?uname=55%22\r\n\r\nand I want remove the query string from this URL like below:\r\n    \r\n   http://localhost:8084/blog1_1/title\r\n\r\nCan you please suggest me how to do this?","title":"How to remove the parameters in url Java","body":"<p>I have a URL when I run my project.</p>\n\n<p><a href=\"http://localhost:8084/blog1_1/title?uname=55%22\" rel=\"nofollow\">http://localhost:8084/blog1_1/title?uname=55%22</a></p>\n\n<p>and I want remove the query string from this URL like below:</p>\n\n<p><a href=\"http://localhost:8084/blog1_1/title\" rel=\"nofollow\">http://localhost:8084/blog1_1/title</a></p>\n\n<p>Can you please suggest me how to do this?</p>\n"},{"tags":["java","redis","concurrency","thread-safety","redisson"],"owner":{"account_id":28825877,"reputation":1,"user_id":22077294,"display_name":"PhoneMyint"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691122426,"creation_date":1691122426,"question_id":76832915,"body_markdown":"Redisson client is said to be thread-safe.\r\nMy question is, if Redisson and its object instances are thread-safe, what is the use of Locks like RLock?\r\nDoes that enhance performance on multi-instance multi-concurrency environments? or Redisson is thread-safe by letting users use those Locks instead of being thread-safe itself?","title":"Is Redisson thread-safe itself?","body":"<p>Redisson client is said to be thread-safe.\nMy question is, if Redisson and its object instances are thread-safe, what is the use of Locks like RLock?\nDoes that enhance performance on multi-instance multi-concurrency environments? or Redisson is thread-safe by letting users use those Locks instead of being thread-safe itself?</p>\n"},{"tags":["java","playframework","typesafe-activator"],"comments":[{"owner":{"account_id":1317825,"reputation":12193,"user_id":1264321,"accept_rate":92,"display_name":"Stefan"},"score":0,"creation_date":1420468518,"post_id":27781328,"comment_id":43973227,"body_markdown":"http://stackoverflow.com/questions/19391014/play-2-2-application-crashes-on-heroku","body":"<a href=\"http://stackoverflow.com/questions/19391014/play-2-2-application-crashes-on-heroku\" title=\"play 2 2 application crashes on heroku\">stackoverflow.com/questions/19391014/&hellip;</a>"},{"owner":{"account_id":2538296,"reputation":2849,"user_id":2312605,"accept_rate":37,"display_name":"Ashish Ratan"},"score":0,"creation_date":1420524764,"post_id":27781328,"comment_id":43995474,"body_markdown":"i have already visited the link... there is not my situation to solve. thanks for the link :)","body":"i have already visited the link... there is not my situation to solve. thanks for the link :)"},{"owner":{"account_id":4374451,"reputation":3112,"user_id":3567830,"display_name":"edi"},"score":2,"creation_date":1420541100,"post_id":27781328,"comment_id":44002454,"body_markdown":"FYI, there&#39;s also an open [github issue](https://github.com/playframework/playframework/issues/3081).","body":"FYI, there&#39;s also an open <a href=\"https://github.com/playframework/playframework/issues/3081\" rel=\"nofollow noreferrer\">github issue</a>."}],"answers":[{"tags":[],"owner":{"account_id":2843760,"reputation":897,"user_id":2442744,"accept_rate":64,"display_name":"Ubaidah"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1422564759,"creation_date":1422564759,"answer_id":28224383,"question_id":27781328,"body_markdown":"I had the same problem but only after creating a binary distribution using the dist command from the activator when I try to run the play application using the Bat file and add some configuration parameters I go the same error.\r\n\r\nHere is the error I am getting \r\n\r\n    Bad application path: -Dhttp.port=9009\r\n\r\nSo the way I solve it is by editing the Bat file. I manually add all the configuration parameters into the APP_MAIN_CLASS and before the &quot;play.core.server.NettyServer&quot;\r\n\r\nsomething like:\r\n\r\n    set &quot;APP_MAIN_CLASS= -DapplyEvolutions.default=true -Dhttp.port=9009 play.core.server.NettyServer&quot;\r\n\r\n","title":"Why does &quot;activator start&quot; fail with &quot;Bad application path&quot;?","body":"<p>I had the same problem but only after creating a binary distribution using the dist command from the activator when I try to run the play application using the Bat file and add some configuration parameters I go the same error.</p>\n\n<p>Here is the error I am getting </p>\n\n<pre><code>Bad application path: -Dhttp.port=9009\n</code></pre>\n\n<p>So the way I solve it is by editing the Bat file. I manually add all the configuration parameters into the APP_MAIN_CLASS and before the \"play.core.server.NettyServer\"</p>\n\n<p>something like:</p>\n\n<pre><code>set \"APP_MAIN_CLASS= -DapplyEvolutions.default=true -Dhttp.port=9009 play.core.server.NettyServer\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7902935,"reputation":6346,"user_id":5969411,"accept_rate":80,"display_name":"ManoDestra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691121840,"creation_date":1691121840,"answer_id":76832892,"question_id":27781328,"body_markdown":"If you&#39;re on Windows, then I know you can include a PROJECTNAME_config.txt file and put all your settings in there, like this:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/RXm4R.png\r\n\r\nI&#39;m using Play 2.3.6 in this example.\r\n","title":"Why does &quot;activator start&quot; fail with &quot;Bad application path&quot;?","body":"<p>If you're on Windows, then I know you can include a PROJECTNAME_config.txt file and put all your settings in there, like this:</p>\n<p><a href=\"https://i.stack.imgur.com/RXm4R.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RXm4R.png\" alt=\"enter image description here\" /></a></p>\n<p>I'm using Play 2.3.6 in this example.</p>\n"}],"owner":{"account_id":2538296,"reputation":2849,"user_id":2312605,"accept_rate":37,"display_name":"Ashish Ratan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1551,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":28224383,"answer_count":2,"score":6,"last_activity_date":1691121840,"creation_date":1420467215,"question_id":27781328,"body_markdown":"I&#39;ve created an application in Play Framework using `activator new`.\r\n\r\nUpon `activator start` this application it&#39;s giving me the following error:\r\n\r\n    Bad application path: -Dhttp.port=9000\r\n\r\n![enter image description here][1]\r\n\r\nHow to solve the issue?\r\n\r\n  [1]: http://i.stack.imgur.com/YjlYw.png\r\n\r\n","title":"Why does &quot;activator start&quot; fail with &quot;Bad application path&quot;?","body":"<p>I've created an application in Play Framework using <code>activator new</code>.</p>\n\n<p>Upon <code>activator start</code> this application it's giving me the following error:</p>\n\n<pre><code>Bad application path: -Dhttp.port=9000\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/YjlYw.png\" alt=\"enter image description here\"></p>\n\n<p>How to solve the issue?</p>\n"},{"tags":["java","android","serialization","bitmap","bytebuffer"],"answers":[{"tags":[],"owner":{"account_id":255665,"reputation":232816,"user_id":535871,"accept_rate":84,"display_name":"Ted Hopp"},"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1297662995,"creation_date":1297662995,"answer_id":4989267,"question_id":4989182,"body_markdown":"Do you need to rewind the buffer, perhaps?\r\n\r\nAlso, this might happen if the stride (in bytes) of the bitmap is greater than the row length in pixels * bytes/pixel. Make the length of bytes b.remaining() instead of size.","title":"converting Java bitmap to byte array","body":"<p>Do you need to rewind the buffer, perhaps?</p>\n\n<p>Also, this might happen if the stride (in bytes) of the bitmap is greater than the row length in pixels * bytes/pixel. Make the length of bytes b.remaining() instead of size.</p>\n"},{"tags":[],"owner":{"account_id":302599,"reputation":7212,"user_id":611062,"display_name":"Mezm"},"down_vote_count":2,"up_vote_count":709,"is_accepted":true,"score":707,"last_activity_date":1522750290,"creation_date":1297666183,"answer_id":4989543,"question_id":4989182,"body_markdown":"Try something like this:\r\n\r\n    Bitmap bmp = intent.getExtras().get(&quot;data&quot;);\r\n    ByteArrayOutputStream stream = new ByteArrayOutputStream();\r\n    bmp.compress(Bitmap.CompressFormat.PNG, 100, stream);\r\n    byte[] byteArray = stream.toByteArray();\r\n    bmp.recycle();\r\n\r\n\r\n","title":"converting Java bitmap to byte array","body":"<p>Try something like this:</p>\n\n<pre><code>Bitmap bmp = intent.getExtras().get(\"data\");\nByteArrayOutputStream stream = new ByteArrayOutputStream();\nbmp.compress(Bitmap.CompressFormat.PNG, 100, stream);\nbyte[] byteArray = stream.toByteArray();\nbmp.recycle();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":131788,"reputation":4161,"user_id":332048,"accept_rate":79,"display_name":"MindJuice"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1332464701,"creation_date":1332464701,"answer_id":9832840,"question_id":4989182,"body_markdown":"Your byte array is too small.  Each pixel takes up 4 bytes, not just 1, so multiply your size * 4 so that the array is big enough.","title":"converting Java bitmap to byte array","body":"<p>Your byte array is too small.  Each pixel takes up 4 bytes, not just 1, so multiply your size * 4 so that the array is big enough.</p>\n"},{"tags":[],"owner":{"account_id":6239625,"reputation":1005,"user_id":4853690,"display_name":"朱西西"},"down_vote_count":3,"up_vote_count":91,"is_accepted":false,"score":88,"last_activity_date":1691121728,"creation_date":1449606897,"answer_id":34165515,"question_id":4989182,"body_markdown":"CompressFormat is too slow...\r\n\r\nTry ByteBuffer.\r\n\r\n※※※Bitmap to Byte-array※※※\r\n\r\n\tint size = bitmap.getRowBytes() * bitmap.getHeight();\r\n\tByteBuffer byteBuffer = ByteBuffer.allocate(size);\r\n\tbitmap.copyPixelsToBuffer(byteBuffer);\r\n\tbyte[] byteArray = byteBuffer.array();\r\n\r\n    // Somehow save (and later load) these as well:\r\n    int width = bitmap.getWidth();\r\n\tint height = bitmap.getHeight();\r\n    String format = bitmap.getConfig().name();\r\n\r\n※※※Byte-array to Bitmap※※※\r\n\r\n\tBitmap.Config configBmp = Bitmap.Config.valueOf(format);\r\n\tBitmap bitmap_tmp = Bitmap.createBitmap(width, height, configBmp);\r\n\tByteBuffer buffer = ByteBuffer.wrap(byteArray);\r\n\tbitmap_tmp.copyPixelsFromBuffer(buffer);","title":"converting Java bitmap to byte array","body":"<p>CompressFormat is too slow...</p>\n<p>Try ByteBuffer.</p>\n<p>※※※Bitmap to Byte-array※※※</p>\n<pre><code>int size = bitmap.getRowBytes() * bitmap.getHeight();\nByteBuffer byteBuffer = ByteBuffer.allocate(size);\nbitmap.copyPixelsToBuffer(byteBuffer);\nbyte[] byteArray = byteBuffer.array();\n\n// Somehow save (and later load) these as well:\nint width = bitmap.getWidth();\nint height = bitmap.getHeight();\nString format = bitmap.getConfig().name();\n</code></pre>\n<p>※※※Byte-array to Bitmap※※※</p>\n<pre><code>Bitmap.Config configBmp = Bitmap.Config.valueOf(format);\nBitmap bitmap_tmp = Bitmap.createBitmap(width, height, configBmp);\nByteBuffer buffer = ByteBuffer.wrap(byteArray);\nbitmap_tmp.copyPixelsFromBuffer(buffer);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":248767,"reputation":1239,"user_id":524355,"display_name":"CaptainCrunch"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1455891097,"creation_date":1455891097,"answer_id":35507338,"question_id":4989182,"body_markdown":"Ted Hopp is correct, from the API Documentation :\r\n\r\n\r\n    public void copyPixelsToBuffer (Buffer dst)\r\n\r\n&quot;... After this method returns, the *current position* of the buffer is updated: the position is incremented by the number of elements written in the buffer.\r\n&quot;\r\n\r\nand\r\n\r\n    public ByteBuffer get (byte[] dst, int dstOffset, int byteCount)\r\n\r\n&quot;Reads bytes from the *current position* into the specified byte array, starting at the specified offset, and increases the position by the number of bytes read.&quot;","title":"converting Java bitmap to byte array","body":"<p>Ted Hopp is correct, from the API Documentation :</p>\n\n<pre><code>public void copyPixelsToBuffer (Buffer dst)\n</code></pre>\n\n<p>\"... After this method returns, the <em>current position</em> of the buffer is updated: the position is incremented by the number of elements written in the buffer.\n\"</p>\n\n<p>and</p>\n\n<pre><code>public ByteBuffer get (byte[] dst, int dstOffset, int byteCount)\n</code></pre>\n\n<p>\"Reads bytes from the <em>current position</em> into the specified byte array, starting at the specified offset, and increases the position by the number of bytes read.\"</p>\n"},{"tags":[],"owner":{"account_id":4834459,"reputation":2108,"user_id":3901630,"display_name":"Amol Suryawanshi"},"down_vote_count":1,"up_vote_count":14,"is_accepted":false,"score":13,"last_activity_date":1589366789,"creation_date":1461320905,"answer_id":36791309,"question_id":4989182,"body_markdown":"Use below functions to encode bitmap into byte[] and vice versa\r\n\r\n \r\n\r\n     \r\n\r\n    public static String encodeTobase64(Bitmap image) {\r\n        Bitmap immagex = image;\r\n        ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n        immagex.compress(Bitmap.CompressFormat.PNG, 90, baos);\r\n        byte[] b = baos.toByteArray();\r\n        String imageEncoded = Base64.encodeToString(b, Base64.DEFAULT);\r\n        return imageEncoded;\r\n    }\r\n    \r\n    public static Bitmap decodeBase64(String input) {\r\n        byte[] decodedByte = Base64.decode(input, 0);\r\n        return BitmapFactory.decodeByteArray(decodedByte, 0, decodedByte.length);\r\n    }\r\n\r\n","title":"converting Java bitmap to byte array","body":"<p>Use below functions to encode bitmap into byte[] and vice versa</p>\n\n<pre><code>public static String encodeTobase64(Bitmap image) {\n    Bitmap immagex = image;\n    ByteArrayOutputStream baos = new ByteArrayOutputStream();\n    immagex.compress(Bitmap.CompressFormat.PNG, 90, baos);\n    byte[] b = baos.toByteArray();\n    String imageEncoded = Base64.encodeToString(b, Base64.DEFAULT);\n    return imageEncoded;\n}\n\npublic static Bitmap decodeBase64(String input) {\n    byte[] decodedByte = Base64.decode(input, 0);\n    return BitmapFactory.decodeByteArray(decodedByte, 0, decodedByte.length);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2023117,"reputation":8402,"user_id":1808829,"accept_rate":80,"display_name":"Ayaz Alifov"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1637402916,"creation_date":1478539388,"answer_id":40470945,"question_id":4989182,"body_markdown":"In order to avoid `OutOfMemory` error for bigger files, I would recommend to solve the task by splitting a bitmap into several parts and merging their parts&#39; bytes.\r\n\r\n\r\n    private byte[] getBitmapBytes(Bitmap bitmap)\r\n    {\r\n        int chunkNumbers = 10;\r\n        int bitmapSize = bitmap.getRowBytes() * bitmap.getHeight();\r\n        byte[] imageBytes = new byte[bitmapSize];\r\n        int rows, cols;\r\n        int chunkHeight, chunkWidth;\r\n        rows = cols = (int) Math.sqrt(chunkNumbers);\r\n        chunkHeight = bitmap.getHeight() / rows;\r\n        chunkWidth = bitmap.getWidth() / cols;\r\n\r\n        int yCoord = 0;\r\n        int bitmapsSizes = 0;\r\n\r\n        for (int x = 0; x &lt; rows; x++)\r\n        {\r\n            int xCoord = 0;\r\n            for (int y = 0; y &lt; cols; y++)\r\n            {\r\n                Bitmap bitmapChunk = Bitmap.createBitmap(bitmap, xCoord, yCoord, chunkWidth, chunkHeight);\r\n                byte[] bitmapArray = getBytesFromBitmapChunk(bitmapChunk);\r\n                System.arraycopy(bitmapArray, 0, imageBytes, bitmapsSizes, bitmapArray.length);\r\n                bitmapsSizes = bitmapsSizes + bitmapArray.length;\r\n                xCoord += chunkWidth;\r\n\r\n                bitmapChunk.recycle();\r\n                bitmapChunk = null;\r\n            }\r\n            yCoord += chunkHeight;\r\n        }\r\n        \r\n        return imageBytes;\r\n    }\r\n    \r\n\r\n    private byte[] getBytesFromBitmapChunk(Bitmap bitmap)\r\n    {\r\n        int bitmapSize = bitmap.getRowBytes() * bitmap.getHeight();\r\n        ByteBuffer byteBuffer = ByteBuffer.allocate(bitmapSize);\r\n        bitmap.copyPixelsToBuffer(byteBuffer);\r\n        byteBuffer.rewind();\r\n        return byteBuffer.array();\r\n    }\r\n","title":"converting Java bitmap to byte array","body":"<p>In order to avoid <code>OutOfMemory</code> error for bigger files, I would recommend to solve the task by splitting a bitmap into several parts and merging their parts' bytes.</p>\n<pre><code>private byte[] getBitmapBytes(Bitmap bitmap)\n{\n    int chunkNumbers = 10;\n    int bitmapSize = bitmap.getRowBytes() * bitmap.getHeight();\n    byte[] imageBytes = new byte[bitmapSize];\n    int rows, cols;\n    int chunkHeight, chunkWidth;\n    rows = cols = (int) Math.sqrt(chunkNumbers);\n    chunkHeight = bitmap.getHeight() / rows;\n    chunkWidth = bitmap.getWidth() / cols;\n\n    int yCoord = 0;\n    int bitmapsSizes = 0;\n\n    for (int x = 0; x &lt; rows; x++)\n    {\n        int xCoord = 0;\n        for (int y = 0; y &lt; cols; y++)\n        {\n            Bitmap bitmapChunk = Bitmap.createBitmap(bitmap, xCoord, yCoord, chunkWidth, chunkHeight);\n            byte[] bitmapArray = getBytesFromBitmapChunk(bitmapChunk);\n            System.arraycopy(bitmapArray, 0, imageBytes, bitmapsSizes, bitmapArray.length);\n            bitmapsSizes = bitmapsSizes + bitmapArray.length;\n            xCoord += chunkWidth;\n\n            bitmapChunk.recycle();\n            bitmapChunk = null;\n        }\n        yCoord += chunkHeight;\n    }\n    \n    return imageBytes;\n}\n\n\nprivate byte[] getBytesFromBitmapChunk(Bitmap bitmap)\n{\n    int bitmapSize = bitmap.getRowBytes() * bitmap.getHeight();\n    ByteBuffer byteBuffer = ByteBuffer.allocate(bitmapSize);\n    bitmap.copyPixelsToBuffer(byteBuffer);\n    byteBuffer.rewind();\n    return byteBuffer.array();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5452312,"reputation":1010,"user_id":4336740,"display_name":"Mohammad nabil"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1493789374,"creation_date":1493789374,"answer_id":43751742,"question_id":4989182,"body_markdown":"**Try this to convert String-Bitmap or Bitmap-String**\r\n    \r\n    /**\r\n     * @param bitmap\r\n     * @return converting bitmap and return a string\r\n     */\r\n    public static String BitMapToString(Bitmap bitmap){\r\n        ByteArrayOutputStream baos=new ByteArrayOutputStream();\r\n        bitmap.compress(Bitmap.CompressFormat.PNG,100, baos);\r\n        byte [] b=baos.toByteArray();\r\n        String temp=Base64.encodeToString(b, Base64.DEFAULT);\r\n        return temp;\r\n    }\r\n\r\n    /**\r\n     * @param encodedString\r\n     * @return bitmap (from given string)\r\n     */\r\n    public static Bitmap StringToBitMap(String encodedString){\r\n        try{\r\n            byte [] encodeByte=Base64.decode(encodedString,Base64.DEFAULT);\r\n            Bitmap bitmap= BitmapFactory.decodeByteArray(encodeByte, 0, encodeByte.length);\r\n            return bitmap;\r\n        }catch(Exception e){\r\n            e.getMessage();\r\n            return null;\r\n        }\r\n    }","title":"converting Java bitmap to byte array","body":"<p><strong>Try this to convert String-Bitmap or Bitmap-String</strong></p>\n\n<pre><code>/**\n * @param bitmap\n * @return converting bitmap and return a string\n */\npublic static String BitMapToString(Bitmap bitmap){\n    ByteArrayOutputStream baos=new ByteArrayOutputStream();\n    bitmap.compress(Bitmap.CompressFormat.PNG,100, baos);\n    byte [] b=baos.toByteArray();\n    String temp=Base64.encodeToString(b, Base64.DEFAULT);\n    return temp;\n}\n\n/**\n * @param encodedString\n * @return bitmap (from given string)\n */\npublic static Bitmap StringToBitMap(String encodedString){\n    try{\n        byte [] encodeByte=Base64.decode(encodedString,Base64.DEFAULT);\n        Bitmap bitmap= BitmapFactory.decodeByteArray(encodeByte, 0, encodeByte.length);\n        return bitmap;\n    }catch(Exception e){\n        e.getMessage();\n        return null;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2459984,"reputation":2240,"user_id":2144352,"display_name":"Tomas Ivan"},"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1513003854,"creation_date":1513003854,"answer_id":47755479,"question_id":4989182,"body_markdown":"Here is bitmap extension `.convertToByteArray` wrote in Kotlin.  \r\n\r\n    /**\r\n     * Convert bitmap to byte array using ByteBuffer.\r\n     */\r\n    fun Bitmap.convertToByteArray(): ByteArray {\r\n        //minimum number of bytes that can be used to store this bitmap&#39;s pixels\r\n        val size = this.byteCount\r\n    \r\n        //allocate new instances which will hold bitmap\r\n        val buffer = ByteBuffer.allocate(size)\r\n        val bytes = ByteArray(size)\r\n    \r\n        //copy the bitmap&#39;s pixels into the specified buffer\r\n        this.copyPixelsToBuffer(buffer)\r\n    \r\n        //rewinds buffer (buffer position is set to zero and the mark is discarded)\r\n        buffer.rewind()\r\n    \r\n        //transfer bytes from buffer into the given destination array\r\n        buffer.get(bytes)\r\n    \r\n        //return bitmap&#39;s pixels\r\n        return bytes\r\n    }","title":"converting Java bitmap to byte array","body":"<p>Here is bitmap extension <code>.convertToByteArray</code> wrote in Kotlin.  </p>\n\n<pre><code>/**\n * Convert bitmap to byte array using ByteBuffer.\n */\nfun Bitmap.convertToByteArray(): ByteArray {\n    //minimum number of bytes that can be used to store this bitmap's pixels\n    val size = this.byteCount\n\n    //allocate new instances which will hold bitmap\n    val buffer = ByteBuffer.allocate(size)\n    val bytes = ByteArray(size)\n\n    //copy the bitmap's pixels into the specified buffer\n    this.copyPixelsToBuffer(buffer)\n\n    //rewinds buffer (buffer position is set to zero and the mark is discarded)\n    buffer.rewind()\n\n    //transfer bytes from buffer into the given destination array\n    buffer.get(bytes)\n\n    //return bitmap's pixels\n    return bytes\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20618398,"reputation":149,"user_id":15135947,"display_name":"Aarush Kumar"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1625642795,"creation_date":1625642795,"answer_id":68281743,"question_id":4989182,"body_markdown":"I think this will do -\r\n```\r\npublic static byte[] convertBitmapToByteArray(Bitmap bitmap){\r\n        ByteBuffer byteBuffer = ByteBuffer.allocate(bitmap.getByteCount());\r\n        bitmap.copyPixelsToBuffer(byteBuffer);\r\n        byteBuffer.rewind();\r\n        return byteBuffer.array();\r\n    }\r\n```","title":"converting Java bitmap to byte array","body":"<p>I think this will do -</p>\n<pre><code>public static byte[] convertBitmapToByteArray(Bitmap bitmap){\n        ByteBuffer byteBuffer = ByteBuffer.allocate(bitmap.getByteCount());\n        bitmap.copyPixelsToBuffer(byteBuffer);\n        byteBuffer.rewind();\n        return byteBuffer.array();\n    }\n</code></pre>\n"}],"owner":{"account_id":207611,"reputation":6729,"user_id":457577,"accept_rate":98,"display_name":"Tom Fobear"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":377806,"favorite_count":0,"down_vote_count":0,"up_vote_count":321,"accepted_answer_id":4989543,"answer_count":10,"score":321,"last_activity_date":1691121728,"creation_date":1297662171,"question_id":4989182,"body_markdown":"      Bitmap bmp   = intent.getExtras().get(&quot;data&quot;);\r\n      int size     = bmp.getRowBytes() * bmp.getHeight();\r\n      ByteBuffer b = ByteBuffer.allocate(size);\r\n\r\n      bmp.copyPixelsToBuffer(b);\r\n\r\n      byte[] bytes = new byte[size];\r\n\r\n      try {\r\n         b.get(bytes, 0, bytes.length);\r\n      } catch (BufferUnderflowException e) {\r\n         // always happens\r\n      }\r\n      // do something with byte[]\r\n\r\nWhen I look at the buffer after the call to `copyPixelsToBuffer` the bytes are all 0... The bitmap returned from the camera is immutable... but that shouldn&#39;t matter since it&#39;s doing a copy. \r\n\r\nWhat could be wrong with this code?","title":"converting Java bitmap to byte array","body":"<pre><code>  Bitmap bmp   = intent.getExtras().get(\"data\");\n  int size     = bmp.getRowBytes() * bmp.getHeight();\n  ByteBuffer b = ByteBuffer.allocate(size);\n\n  bmp.copyPixelsToBuffer(b);\n\n  byte[] bytes = new byte[size];\n\n  try {\n     b.get(bytes, 0, bytes.length);\n  } catch (BufferUnderflowException e) {\n     // always happens\n  }\n  // do something with byte[]\n</code></pre>\n\n<p>When I look at the buffer after the call to <code>copyPixelsToBuffer</code> the bytes are all 0... The bitmap returned from the camera is immutable... but that shouldn't matter since it's doing a copy. </p>\n\n<p>What could be wrong with this code?</p>\n"},{"tags":["java","android","bitmap"],"comments":[{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1424544292,"post_id":28649699,"comment_id":45596929,"body_markdown":"&quot;I need to save a bitmap without quality lost&quot; -- PNG is a lossless format.","body":"&quot;I need to save a bitmap without quality lost&quot; -- PNG is a lossless format."},{"owner":{"account_id":5015761,"reputation":2532,"user_id":4030665,"accept_rate":100,"display_name":"Dan"},"score":0,"creation_date":1424545545,"post_id":28649699,"comment_id":45597458,"body_markdown":"I have tested JPEG and PNG formats (available formats for Bitmap.compress) with quality = 100 and both lower quality.","body":"I have tested JPEG and PNG formats (available formats for Bitmap.compress) with quality = 100 and both lower quality."},{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1424545762,"post_id":28649699,"comment_id":45597546,"body_markdown":"Then your problem is not in the compression, but in how you are creating your `Bitmap` or how you are determining &quot;lower quality&quot;.","body":"Then your problem is not in the compression, but in how you are creating your <code>Bitmap</code> or how you are determining &quot;lower quality&quot;."},{"owner":{"account_id":5015761,"reputation":2532,"user_id":4030665,"accept_rate":100,"display_name":"Dan"},"score":0,"creation_date":1424546418,"post_id":28649699,"comment_id":45597792,"body_markdown":"I use objects only for check if the intent returns me something","body":"I use objects only for check if the intent returns me something"},{"owner":{"account_id":2414645,"reputation":11194,"user_id":2108972,"display_name":"greenapps"},"score":1,"creation_date":1424546659,"post_id":28649699,"comment_id":45597867,"body_markdown":"Can you start explaining what your code should do instead of talking about bitmaps. There is nothing of a bitmap in your code.","body":"Can you start explaining what your code should do instead of talking about bitmaps. There is nothing of a bitmap in your code."},{"owner":{"account_id":2414645,"reputation":11194,"user_id":2108972,"display_name":"greenapps"},"score":0,"creation_date":1424546812,"post_id":28649699,"comment_id":45597930,"body_markdown":"Your code looks completely wrong. There is no startActivityForResult that would trigger onActivityResult.","body":"Your code looks completely wrong. There is no startActivityForResult that would trigger onActivityResult."},{"owner":{"account_id":5015761,"reputation":2532,"user_id":4030665,"accept_rate":100,"display_name":"Dan"},"score":0,"creation_date":1424547316,"post_id":28649699,"comment_id":45598138,"body_markdown":"It&#39;s only a snippet, the first startActivity is in other place,  here is in onActivityResult to make more photos before the first.","body":"It&#39;s only a snippet, the first startActivity is in other place,  here is in onActivityResult to make more photos before the first."},{"owner":{"account_id":2414645,"reputation":11194,"user_id":2108972,"display_name":"greenapps"},"score":0,"creation_date":1424547389,"post_id":28649699,"comment_id":45598160,"body_markdown":"After the first you mean. Take that out. That is very confusing what you do now. Show how you trigger it the first time.","body":"After the first you mean. Take that out. That is very confusing what you do now. Show how you trigger it the first time."},{"owner":{"account_id":2414645,"reputation":11194,"user_id":2108972,"display_name":"greenapps"},"score":0,"creation_date":1424547626,"post_id":28649699,"comment_id":45598243,"body_markdown":"`then before save it, I have to process it. `. That is impossible if you use this kind of intent with EXTRA_OUTPUT as the image will be saved for you already as jpg.","body":"<code>then before save it, I have to process it. </code>. That is impossible if you use this kind of intent with EXTRA_OUTPUT as the image will be saved for you already as jpg."},{"owner":{"account_id":5015761,"reputation":2532,"user_id":4030665,"accept_rate":100,"display_name":"Dan"},"score":0,"creation_date":1424547674,"post_id":28649699,"comment_id":45598270,"body_markdown":"Then I have to use the intent without EXTRA_OUTPUT, correct? . OK I have already tried it, and I have already obtained the bitmap from the Intent, my problem is how can I save it in sd card without quality loss.","body":"Then I have to use the intent without EXTRA_OUTPUT, correct? . OK I have already tried it, and I have already obtained the bitmap from the Intent, my problem is how can I save it in sd card without quality loss."},{"owner":{"account_id":2414645,"reputation":11194,"user_id":2108972,"display_name":"greenapps"},"score":0,"creation_date":1424547790,"post_id":28649699,"comment_id":45598306,"body_markdown":"Please remove all code. Just post only relevant code which demonstrates your problem.","body":"Please remove all code. Just post only relevant code which demonstrates your problem."},{"owner":{"account_id":5015761,"reputation":2532,"user_id":4030665,"accept_rate":100,"display_name":"Dan"},"score":0,"creation_date":1424548006,"post_id":28649699,"comment_id":45598379,"body_markdown":"Done. Now there are   only the methods that I have posted first time.","body":"Done. Now there are   only the methods that I have posted first time."},{"owner":{"account_id":2414645,"reputation":11194,"user_id":2108972,"display_name":"greenapps"},"score":0,"creation_date":1424548098,"post_id":28649699,"comment_id":45598411,"body_markdown":"Still silly as taking the first picture is not in it. And you should remove taking the next pictures.","body":"Still silly as taking the first picture is not in it. And you should remove taking the next pictures."},{"owner":{"account_id":5015761,"reputation":2532,"user_id":4030665,"accept_rate":100,"display_name":"Dan"},"score":0,"creation_date":1424548244,"post_id":28649699,"comment_id":45598452,"body_markdown":"... It&#39;s not important the first photo. A button starts it. that&#39;s completely irrelevant.","body":"... It&#39;s not important the first photo. A button starts it. that&#39;s completely irrelevant."},{"owner":{"account_id":2414645,"reputation":11194,"user_id":2108972,"display_name":"greenapps"},"score":0,"creation_date":1424548297,"post_id":28649699,"comment_id":45598470,"body_markdown":"Well if you can help yourself be your guest.","body":"Well if you can help yourself be your guest."}],"answers":[{"tags":[],"owner":{"account_id":151876,"reputation":159,"user_id":4586777,"display_name":"Justin Tokarchuk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1424544250,"creation_date":1424544250,"answer_id":28649796,"question_id":28649699,"body_markdown":"if you are using IMAGE_CAPTURE, there is a flag that has to be set to not return a thumbnail.\r\n\r\nWithout seeing your code, I can only guess.\r\n\r\n\r\n\r\nDocumentation:\r\n\r\n   [Image Capture Reference][1]\r\n\r\n\r\n  [1]: http://developer.android.com/reference/android/provider/MediaStore.html#ACTION_IMAGE_CAPTURE\r\n\r\n&gt; Documentation Quote:\r\n&gt; \r\n&gt; If the EXTRA_OUTPUT is not present, then a small sized image is\r\n&gt; returned as a Bitmap object in the extra field\r\n\r\nIt&#39;s a pretty common mistake, please clarify if it&#39;s something else.","title":"Android: Intent: pass bitmap without compression","body":"<p>if you are using IMAGE_CAPTURE, there is a flag that has to be set to not return a thumbnail.</p>\n\n<p>Without seeing your code, I can only guess.</p>\n\n<p>Documentation:</p>\n\n<p><a href=\"http://developer.android.com/reference/android/provider/MediaStore.html#ACTION_IMAGE_CAPTURE\" rel=\"nofollow\">Image Capture Reference</a></p>\n\n<blockquote>\n  <p>Documentation Quote:</p>\n  \n  <p>If the EXTRA_OUTPUT is not present, then a small sized image is\n  returned as a Bitmap object in the extra field</p>\n</blockquote>\n\n<p>It's a pretty common mistake, please clarify if it's something else.</p>\n"},{"tags":[],"owner":{"account_id":5015761,"reputation":2532,"user_id":4030665,"accept_rate":100,"display_name":"Dan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1436268572,"creation_date":1436268572,"answer_id":31267356,"question_id":28649699,"body_markdown":"I have been read the google documentation and this is what I understand, but I&#39;m not sure 100%:\r\n\r\nThe only way to get an uncompressed image from the android camera is saving it in SD card. Then, if you want to use it, get it from SD.\r\n\r\nIndeed, it is not possible to pass an uncompressed image between activities by using intents due to intents can only &quot;transport&quot; objects of &quot;small&quot; size.","title":"Android: Intent: pass bitmap without compression","body":"<p>I have been read the google documentation and this is what I understand, but I'm not sure 100%:</p>\n\n<p>The only way to get an uncompressed image from the android camera is saving it in SD card. Then, if you want to use it, get it from SD.</p>\n\n<p>Indeed, it is not possible to pass an uncompressed image between activities by using intents due to intents can only \"transport\" objects of \"small\" size.</p>\n"}],"owner":{"account_id":5015761,"reputation":2532,"user_id":4030665,"accept_rate":100,"display_name":"Dan"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6110,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":31267356,"answer_count":2,"score":5,"last_activity_date":1691120850,"creation_date":1424543823,"question_id":28649699,"body_markdown":"I&#39;m working on android. I need to save a bitmap without quality lost.\r\n\r\nI have tried it using `compress()` method of Bitmap, setting quality to 100. This not works for me, the bitmap loses too much quality. I have tested with JPEG and PNG formats.\r\n\r\nI have tested to copy the bitmap to a `ByteBuffer`, then extract the `byte[]` and saving it using a `FileOutputStream`. In this case, I can&#39;t display images saved using this way, I only see a blank page.\r\n\r\nMy question is, is there any way to save a bitmap in SD card without compression?\r\n\r\nEDIT: here part of my code\r\n\r\n\r\n    public class MainActivity extends ActionBarActivity {\r\n    \t\r\n    \t[...]\r\n    \t\r\n    \t@Override\r\n    \tprotected void onActivityResult(int reqCode, int resCode, Intent handler){\r\n    \t\tsuper.onActivityResult(reqCode, resCode, handler);\r\n        \tif(reqCode == CAPTURE_IDENTIFIER &amp;&amp; resCode == Activity.RESULT_OK){\r\n    // THis is that I have tested.\r\n    //    \t\tObject o = handler.getData();\r\n    //    \t\tObject o2 = handler.getExtras().getParcelable(&quot;data&quot;);\r\n    //    \t\tObject o3 = handler.getExtras().get(&quot;data&quot;);\r\n    //    \t\tObject o4 = handler.getParcelableExtra(&quot;data&quot;);\r\n    //    \t\t\r\n        \t\tprepareCapture();\r\n        \t\tstartActivityForResult(cameraHandler, CAPTURE_IDENTIFIER);\r\n        \t}\r\n        }\r\n    \t\r\n    \t\r\n    \t\r\n    \tprivate void initCamera(){\r\n        \tcameraHandler = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);\r\n        \tcameraHandler.putExtra(&quot;return-data&quot;, true);\r\n        }\r\n    \t\r\n    \tprivate void prepareCapture(){\r\n    \t\tcurrentPhotoName = getNextImageIdentifier() + IMG_BASE_NAME;\r\n        \tFile image = new File(capturesFolder, currentPhotoName);\r\n        \tUri uriImage = Uri.fromFile(image);\r\n        \tcameraHandler.putExtra(MediaStore.EXTRA_OUTPUT, uriImage);\r\n        }\r\n       \r\n        \r\n        \r\n    }\r\n\r\n\r\nTHe exception i have detected is:\r\nRuntimeException: failure delivering result ResultInfo [...] NullPointerException\r\n\r\nEDIT2:\r\nWhat I have to actually do:\r\n\r\nI have to take a photo with the camera, then before save it, I have to process it. After that, i have to save it in SD card. But it&#39;s very important the image quality, I can&#39;t save it with low quality, or not too low quality at least.","title":"Android: Intent: pass bitmap without compression","body":"<p>I'm working on android. I need to save a bitmap without quality lost.</p>\n\n<p>I have tried it using <code>compress()</code> method of Bitmap, setting quality to 100. This not works for me, the bitmap loses too much quality. I have tested with JPEG and PNG formats.</p>\n\n<p>I have tested to copy the bitmap to a <code>ByteBuffer</code>, then extract the <code>byte[]</code> and saving it using a <code>FileOutputStream</code>. In this case, I can't display images saved using this way, I only see a blank page.</p>\n\n<p>My question is, is there any way to save a bitmap in SD card without compression?</p>\n\n<p>EDIT: here part of my code</p>\n\n<pre><code>public class MainActivity extends ActionBarActivity {\n\n    [...]\n\n    @Override\n    protected void onActivityResult(int reqCode, int resCode, Intent handler){\n        super.onActivityResult(reqCode, resCode, handler);\n        if(reqCode == CAPTURE_IDENTIFIER &amp;&amp; resCode == Activity.RESULT_OK){\n// THis is that I have tested.\n//          Object o = handler.getData();\n//          Object o2 = handler.getExtras().getParcelable(\"data\");\n//          Object o3 = handler.getExtras().get(\"data\");\n//          Object o4 = handler.getParcelableExtra(\"data\");\n//          \n            prepareCapture();\n            startActivityForResult(cameraHandler, CAPTURE_IDENTIFIER);\n        }\n    }\n\n\n\n    private void initCamera(){\n        cameraHandler = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);\n        cameraHandler.putExtra(\"return-data\", true);\n    }\n\n    private void prepareCapture(){\n        currentPhotoName = getNextImageIdentifier() + IMG_BASE_NAME;\n        File image = new File(capturesFolder, currentPhotoName);\n        Uri uriImage = Uri.fromFile(image);\n        cameraHandler.putExtra(MediaStore.EXTRA_OUTPUT, uriImage);\n    }\n\n\n\n}\n</code></pre>\n\n<p>THe exception i have detected is:\nRuntimeException: failure delivering result ResultInfo [...] NullPointerException</p>\n\n<p>EDIT2:\nWhat I have to actually do:</p>\n\n<p>I have to take a photo with the camera, then before save it, I have to process it. After that, i have to save it in SD card. But it's very important the image quality, I can't save it with low quality, or not too low quality at least.</p>\n"},{"tags":["java","android-studio","gradle"],"comments":[{"owner":{"account_id":1136217,"reputation":14336,"user_id":1121249,"accept_rate":86,"display_name":"rkosegi"},"score":0,"creation_date":1691121279,"post_id":76832826,"comment_id":135451833,"body_markdown":"well, `Your server is no longer active` is what jfrog says about it","body":"well, <code>Your server is no longer active</code> is what jfrog says about it"}],"owner":{"account_id":8324002,"reputation":13,"user_id":14602986,"display_name":"ChinaTonka"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691120497,"creation_date":1691120497,"question_id":76832826,"body_markdown":"I am trying to use Bing maps in an app, needs to be Bing as will be used in China. I get \r\nerror messages, What has caused this???? :\r\n:app:writeDebugSigningConfigVersions\r\norg.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException: Could not resolve all files for configuration &#39;:app:debugRuntimeClasspath&#39;.\r\norg.gradle.internal.resolve.ModuleVersionResolveException: Could not resolve com.microsoft.maps:maps-sdk:1.3.0.\r\norg.gradle.api.internal.artifacts.ivyservice.ivyresolve.parser.MetaDataParseException: Could not parse POM https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom\r\nmaps-sdk-1.3.0.pom\r\norg.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException: Could not resolve all files for configuration &#39;:app:debugRuntimeClasspath&#39;.\r\norg.gradle.internal.resolve.ModuleVersionResolveException: Could not resolve com.microsoft.maps:maps-sdk:1.3.0.\r\norg.gradle.api.internal.artifacts.ivyservice.ivyresolve.parser.MetaDataParseException: Could not parse POM https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom\r\norg.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException: Could not resolve all files for configuration &#39;:app:debugRuntimeClasspath&#39;.\r\norg.gradle.internal.resolve.ModuleVersionResolveException: Could not resolve com.microsoft.maps:maps-sdk:1.3.0.\r\norg.gradle.api.internal.artifacts.ivyservice.ivyresolve.parser.MetaDataParseException: Could not parse POM https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom\r\norg.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException: Could not resolve all files for configuration &#39;:app:debugRuntimeClasspath&#39;.\r\norg.gradle.internal.resolve.ModuleVersionResolveException: Could not resolve com.microsoft.maps:maps-sdk:1.3.0.\r\norg.gradle.api.internal.artifacts.ivyservice.ivyresolve.parser.MetaDataParseException: Could not parse POM https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom\r\norg.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException: Could not resolve all files for configuration &#39;:app:debugRuntimeClasspath&#39;.\r\norg.gradle.internal.resolve.ModuleVersionResolveException: Could not resolve com.microsoft.maps:maps-sdk:1.3.0.\r\norg.gradle.api.internal.artifacts.ivyservice.ivyresolve.parser.MetaDataParseException: Could not parse POM https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom\r\norg.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException: Could not resolve all files for configuration &#39;:app:debugRuntimeClasspath&#39;.\r\norg.gradle.internal.resolve.ModuleVersionResolveException: Could not resolve com.microsoft.maps:maps-sdk:1.3.0.\r\norg.gradle.api.internal.artifacts.ivyservice.ivyresolve.parser.MetaDataParseException: Could not parse POM https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom\r\norg.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException: Could not resolve all files for configuration &#39;:app:debugRuntimeClasspath&#39;.\r\norg.gradle.internal.resolve.ModuleVersionResolveException: Could not resolve com.microsoft.maps:maps-sdk:1.3.0.\r\norg.gradle.api.internal.artifacts.ivyservice.ivyresolve.parser.MetaDataParseException: Could not parse POM https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom\r\norg.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException: Could not resolve all files for configuration &#39;:app:debugRuntimeClasspath&#39;.\r\norg.gradle.internal.resolve.ModuleVersionResolveException: Could not resolve com.microsoft.maps:maps-sdk:1.3.0.\r\norg.gradle.api.internal.artifacts.ivyservice.ivyresolve.parser.MetaDataParseException: Could not parse POM https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom\r\norg.gradle.internal.execution.fingerprint.InputFingerprinter$InputFileFingerprintingException: Cannot fingerprint input file property &#39;externalLibNativeLibs&#39;: Could not resolve all files for configuration &#39;:app:debugRuntimeClasspath&#39;.\r\norg.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException: Could not resolve all files for configuration &#39;:app:debugRuntimeClasspath&#39;.\r\norg.gradle.internal.resolve.ModuleVersionResolveException: Could not resolve com.microsoft.maps:maps-sdk:1.3.0.\r\norg.gradle.api.internal.artifacts.ivyservice.ivyresolve.parser.MetaDataParseException: Could not parse POM https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom\r\nAlready seen doctype\r\n\r\nTried to find solution but does not seem to be one online. What has caused this???","title":"maps-sdk-1.3.0.pom:2:10: Already seen doctype","body":"<p>I am trying to use Bing maps in an app, needs to be Bing as will be used in China. I get\nerror messages, What has caused this???? :\n:app:writeDebugSigningConfigVersions\norg.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException: Could not resolve all files for configuration ':app:debugRuntimeClasspath'.\norg.gradle.internal.resolve.ModuleVersionResolveException: Could not resolve com.microsoft.maps:maps-sdk:1.3.0.\norg.gradle.api.internal.artifacts.ivyservice.ivyresolve.parser.MetaDataParseException: Could not parse POM <a href=\"https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom\" rel=\"nofollow noreferrer\">https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom</a>\nmaps-sdk-1.3.0.pom\norg.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException: Could not resolve all files for configuration ':app:debugRuntimeClasspath'.\norg.gradle.internal.resolve.ModuleVersionResolveException: Could not resolve com.microsoft.maps:maps-sdk:1.3.0.\norg.gradle.api.internal.artifacts.ivyservice.ivyresolve.parser.MetaDataParseException: Could not parse POM <a href=\"https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom\" rel=\"nofollow noreferrer\">https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom</a>\norg.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException: Could not resolve all files for configuration ':app:debugRuntimeClasspath'.\norg.gradle.internal.resolve.ModuleVersionResolveException: Could not resolve com.microsoft.maps:maps-sdk:1.3.0.\norg.gradle.api.internal.artifacts.ivyservice.ivyresolve.parser.MetaDataParseException: Could not parse POM <a href=\"https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom\" rel=\"nofollow noreferrer\">https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom</a>\norg.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException: Could not resolve all files for configuration ':app:debugRuntimeClasspath'.\norg.gradle.internal.resolve.ModuleVersionResolveException: Could not resolve com.microsoft.maps:maps-sdk:1.3.0.\norg.gradle.api.internal.artifacts.ivyservice.ivyresolve.parser.MetaDataParseException: Could not parse POM <a href=\"https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom\" rel=\"nofollow noreferrer\">https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom</a>\norg.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException: Could not resolve all files for configuration ':app:debugRuntimeClasspath'.\norg.gradle.internal.resolve.ModuleVersionResolveException: Could not resolve com.microsoft.maps:maps-sdk:1.3.0.\norg.gradle.api.internal.artifacts.ivyservice.ivyresolve.parser.MetaDataParseException: Could not parse POM <a href=\"https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom\" rel=\"nofollow noreferrer\">https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom</a>\norg.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException: Could not resolve all files for configuration ':app:debugRuntimeClasspath'.\norg.gradle.internal.resolve.ModuleVersionResolveException: Could not resolve com.microsoft.maps:maps-sdk:1.3.0.\norg.gradle.api.internal.artifacts.ivyservice.ivyresolve.parser.MetaDataParseException: Could not parse POM <a href=\"https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom\" rel=\"nofollow noreferrer\">https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom</a>\norg.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException: Could not resolve all files for configuration ':app:debugRuntimeClasspath'.\norg.gradle.internal.resolve.ModuleVersionResolveException: Could not resolve com.microsoft.maps:maps-sdk:1.3.0.\norg.gradle.api.internal.artifacts.ivyservice.ivyresolve.parser.MetaDataParseException: Could not parse POM <a href=\"https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom\" rel=\"nofollow noreferrer\">https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom</a>\norg.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException: Could not resolve all files for configuration ':app:debugRuntimeClasspath'.\norg.gradle.internal.resolve.ModuleVersionResolveException: Could not resolve com.microsoft.maps:maps-sdk:1.3.0.\norg.gradle.api.internal.artifacts.ivyservice.ivyresolve.parser.MetaDataParseException: Could not parse POM <a href=\"https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom\" rel=\"nofollow noreferrer\">https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom</a>\norg.gradle.internal.execution.fingerprint.InputFingerprinter$InputFileFingerprintingException: Cannot fingerprint input file property 'externalLibNativeLibs': Could not resolve all files for configuration ':app:debugRuntimeClasspath'.\norg.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException: Could not resolve all files for configuration ':app:debugRuntimeClasspath'.\norg.gradle.internal.resolve.ModuleVersionResolveException: Could not resolve com.microsoft.maps:maps-sdk:1.3.0.\norg.gradle.api.internal.artifacts.ivyservice.ivyresolve.parser.MetaDataParseException: Could not parse POM <a href=\"https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom\" rel=\"nofollow noreferrer\">https://microsoftmaps.jfrog.io/artifactory/Maven/com/microsoft/maps/maps-sdk/1.3.0/maps-sdk-1.3.0.pom</a>\nAlready seen doctype</p>\n<p>Tried to find solution but does not seem to be one online. What has caused this???</p>\n"},{"tags":["java","android","encryption"],"comments":[{"owner":{"account_id":85671,"reputation":40847,"user_id":238704,"display_name":"President James K. Polk"},"score":1,"creation_date":1691154099,"post_id":76832807,"comment_id":135457098,"body_markdown":"This doesn&#39;t explain your current problem but your code is buggy. First, you aren&#39;t specifying the full cipher transformation string with &quot;ALGORITHM/MODE/PADDING&quot;, instead you&#39;re just specifying the &quot;ALGORITHM&quot;. It&#39;s unfortunate that Java allows it but it does, with the result that you get provider defaults. These defaults can vary from provider to provider and platform to platform, making the code non-portable. Second, the lines `outputStream.write(cipher.update(buff,0, readBytes));` can throw a null pointer exception in certain cases, e.g. a file whose length %1024 is &lt; 16.","body":"This doesn&#39;t explain your current problem but your code is buggy. First, you aren&#39;t specifying the full cipher transformation string with &quot;ALGORITHM/MODE/PADDING&quot;, instead you&#39;re just specifying the &quot;ALGORITHM&quot;. It&#39;s unfortunate that Java allows it but it does, with the result that you get provider defaults. These defaults can vary from provider to provider and platform to platform, making the code non-portable. Second, the lines <code>outputStream.write(cipher.update(buff,0, readBytes));</code> can throw a null pointer exception in certain cases, e.g. a file whose length %1024 is &lt; 16."},{"owner":{"account_id":85671,"reputation":40847,"user_id":238704,"display_name":"President James K. Polk"},"score":1,"creation_date":1691154211,"post_id":76832807,"comment_id":135457116,"body_markdown":"Consider using CipherInputStream/CipherOutputStream and Files.copy to make this cleaner, clearer and much shorter.","body":"Consider using CipherInputStream/CipherOutputStream and Files.copy to make this cleaner, clearer and much shorter."},{"owner":{"account_id":85671,"reputation":40847,"user_id":238704,"display_name":"President James K. Polk"},"score":1,"creation_date":1691154317,"post_id":76832807,"comment_id":135457136,"body_markdown":"Please specify the exact data that causes the IllegalBlockSizeException, or at least the exact length of the file. Also provide the full exception stacktrace.","body":"Please specify the exact data that causes the IllegalBlockSizeException, or at least the exact length of the file. Also provide the full exception stacktrace."},{"owner":{"account_id":16120041,"reputation":16,"user_id":11636224,"display_name":"Михаил Карлов"},"score":0,"creation_date":1691243229,"post_id":76832807,"comment_id":135467286,"body_markdown":"I&#39;ve tried several files and the result is the same. I&#39;ve also tried CipherInputStream/CipherOutputStream. The code is not working at all and that&#39;s the question. But thanks","body":"I&#39;ve tried several files and the result is the same. I&#39;ve also tried CipherInputStream/CipherOutputStream. The code is not working at all and that&#39;s the question. But thanks"},{"owner":{"account_id":16120041,"reputation":16,"user_id":11636224,"display_name":"Михаил Карлов"},"score":0,"creation_date":1691243458,"post_id":76832807,"comment_id":135467305,"body_markdown":"It&#39;s working for encryption but decryption causes this exception","body":"It&#39;s working for encryption but decryption causes this exception"}],"owner":{"account_id":16120041,"reputation":16,"user_id":11636224,"display_name":"Михаил Карлов"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691120358,"creation_date":1691119922,"question_id":76832807,"body_markdown":"I have encryptor/decryptor and it worked well until I tried to add large files support.\r\nI have javax.crypto.IllegalBlockSizeException: last block incomplete in decryption.\r\n```  \r\n  private static final String ALGORITHM = &quot;AES&quot;;\r\n    private static final String TRANSFORMATION = &quot;AES&quot;;\r\n\r\n    public static void encrypt(String key, File inputFile, File outputFile) {\r\n        doCrypto(Cipher.ENCRYPT_MODE, key, inputFile, outputFile);\r\n    }\r\n\r\n    public static void decrypt(String key, File inputFile, File outputFile) {\r\n        doCrypto(Cipher.DECRYPT_MODE, key, inputFile, outputFile);\r\n    }\r\n\r\n    public static SecretKey generateKey(String key)\r\n            throws NoSuchAlgorithmException, InvalidKeySpecException {\r\n        SecretKeyFactory factory = SecretKeyFactory.getInstance(&quot;PBKDF2WithHmacSHA256&quot;);\r\n        KeySpec spec = new PBEKeySpec(key.toCharArray(), EncryptionUtil.SALT.getBytes(), 65536, 256);\r\n\r\n        return new SecretKeySpec(factory.generateSecret(spec).getEncoded(), &quot;AES&quot;);\r\n    }\r\n\r\n    private static void doCrypto(int cipherMode, String key, File inputFile,\r\n                                 File outputFile) {\r\n        try {\r\n            Key secretKey = generateKey(key);\r\n            Cipher cipher = Cipher.getInstance(TRANSFORMATION);\r\n\r\n            cipher.init(cipherMode, secretKey);\r\n            FileInputStream inputStream = new FileInputStream(inputFile);\r\n            byte[] buff = new byte[1024];\r\n            FileOutputStream outputStream = new FileOutputStream(outputFile);\r\n            for(int readBytes=inputStream.read(buff); readBytes&gt;-1;readBytes=inputStream.read(buff)) {\r\n                outputStream.write(cipher.update(buff,0, readBytes));\r\n            }\r\n            outputStream.write(cipher.doFinal()); // here we get IllegalBlockSizeException\r\n\r\n            inputStream.close();\r\n            outputStream.close();\r\n\r\n        } catch (Exception ex) {\r\n            ex.printStackTrace();\r\n        }\r\n    }\r\n ```","title":"Large files encryption: last block incomplete in decryption","body":"<p>I have encryptor/decryptor and it worked well until I tried to add large files support.\nI have javax.crypto.IllegalBlockSizeException: last block incomplete in decryption.</p>\n<pre><code>  private static final String ALGORITHM = &quot;AES&quot;;\n    private static final String TRANSFORMATION = &quot;AES&quot;;\n\n    public static void encrypt(String key, File inputFile, File outputFile) {\n        doCrypto(Cipher.ENCRYPT_MODE, key, inputFile, outputFile);\n    }\n\n    public static void decrypt(String key, File inputFile, File outputFile) {\n        doCrypto(Cipher.DECRYPT_MODE, key, inputFile, outputFile);\n    }\n\n    public static SecretKey generateKey(String key)\n            throws NoSuchAlgorithmException, InvalidKeySpecException {\n        SecretKeyFactory factory = SecretKeyFactory.getInstance(&quot;PBKDF2WithHmacSHA256&quot;);\n        KeySpec spec = new PBEKeySpec(key.toCharArray(), EncryptionUtil.SALT.getBytes(), 65536, 256);\n\n        return new SecretKeySpec(factory.generateSecret(spec).getEncoded(), &quot;AES&quot;);\n    }\n\n    private static void doCrypto(int cipherMode, String key, File inputFile,\n                                 File outputFile) {\n        try {\n            Key secretKey = generateKey(key);\n            Cipher cipher = Cipher.getInstance(TRANSFORMATION);\n\n            cipher.init(cipherMode, secretKey);\n            FileInputStream inputStream = new FileInputStream(inputFile);\n            byte[] buff = new byte[1024];\n            FileOutputStream outputStream = new FileOutputStream(outputFile);\n            for(int readBytes=inputStream.read(buff); readBytes&gt;-1;readBytes=inputStream.read(buff)) {\n                outputStream.write(cipher.update(buff,0, readBytes));\n            }\n            outputStream.write(cipher.doFinal()); // here we get IllegalBlockSizeException\n\n            inputStream.close();\n            outputStream.close();\n\n        } catch (Exception ex) {\n            ex.printStackTrace();\n        }\n    }\n</code></pre>\n"},{"tags":["java","spring","oauth-2.0","keycloak","spring-cloud"],"answers":[{"tags":[],"owner":{"account_id":15988518,"reputation":33,"user_id":11839635,"display_name":"Gleb Shakhov"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1690968931,"creation_date":1690968931,"answer_id":76818555,"question_id":76817902,"body_markdown":"If you set up routes in your gateway to catalog service and make a request not directly to catalog service, but through gateway, Keycloak will check it. But the catalog service itself will still be accessible. You just don&#39;t have to use direct endpoints.","title":"Spring Cloud Gateway -&gt; Keycloak -&gt; Microservice","body":"<p>If you set up routes in your gateway to catalog service and make a request not directly to catalog service, but through gateway, Keycloak will check it. But the catalog service itself will still be accessible. You just don't have to use direct endpoints.</p>\n"},{"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691118758,"creation_date":1690980703,"answer_id":76820076,"question_id":76817902,"body_markdown":"Both configurations (client and resource server) are possible for the gateway.\r\n\r\nIf you want direct calls to APIs to be secured, then each of this APIs should be configured as resource server. \r\n\r\nIf downstream APIs are configured as resource servers and front-ends (whatever is sending requests to the gateway) are configured as OAuth2 clients, then no security at all is necessary on the gateway (it&#39;s job is just routing). \r\n\r\n`TokenRelay=` filter is to be used on gateway configured as client with downstream API configured as resource servers and front-ends secured with sessions. This filter replaces on the fly session cookie with access token before forwarding requests to downstream resource servers. This is called the backend for frontend pattern (aka BFF), and is now recommanded: yes, using session cookies (flagged with same-site and http-only) with CSRF protection is safer than exposing OAuth2 tokens to Javascript. \r\n\r\nI suggest you have a look at my tutorials for more [OAuth2 background][1] and many configuration samples (including a BFF one) \r\n\r\nThe reason why I did not write much about gateway configured as resource server is because, in my opinion, it is a bad practice: \r\n- downstream services are not secured or security is duplicated, which is worth\r\n- gateway is tightly coupled to downstream services, which breaks the value of micro-services (maintaining small pieces of loosely coupled software). For instance, gateway has to know what a catalog is, how it is structured and probably how it relates to users to implement security rules like &quot;can edit this product if manager or member of the team responsible for this product&quot; \r\n- you can hardly unit test security rules on the gateway (difficulties to unit-test usually are a good indicator for bad design) \r\n\r\n  [1]: https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials#1-oauth2-essentials","title":"Spring Cloud Gateway -&gt; Keycloak -&gt; Microservice","body":"<p>Both configurations (client and resource server) are possible for the gateway.</p>\n<p>If you want direct calls to APIs to be secured, then each of this APIs should be configured as resource server.</p>\n<p>If downstream APIs are configured as resource servers and front-ends (whatever is sending requests to the gateway) are configured as OAuth2 clients, then no security at all is necessary on the gateway (it's job is just routing).</p>\n<p><code>TokenRelay=</code> filter is to be used on gateway configured as client with downstream API configured as resource servers and front-ends secured with sessions. This filter replaces on the fly session cookie with access token before forwarding requests to downstream resource servers. This is called the backend for frontend pattern (aka BFF), and is now recommanded: yes, using session cookies (flagged with same-site and http-only) with CSRF protection is safer than exposing OAuth2 tokens to Javascript.</p>\n<p>I suggest you have a look at my tutorials for more <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials#1-oauth2-essentials\" rel=\"nofollow noreferrer\">OAuth2 background</a> and many configuration samples (including a BFF one)</p>\n<p>The reason why I did not write much about gateway configured as resource server is because, in my opinion, it is a bad practice:</p>\n<ul>\n<li>downstream services are not secured or security is duplicated, which is worth</li>\n<li>gateway is tightly coupled to downstream services, which breaks the value of micro-services (maintaining small pieces of loosely coupled software). For instance, gateway has to know what a catalog is, how it is structured and probably how it relates to users to implement security rules like &quot;can edit this product if manager or member of the team responsible for this product&quot;</li>\n<li>you can hardly unit test security rules on the gateway (difficulties to unit-test usually are a good indicator for bad design)</li>\n</ul>\n"}],"owner":{"account_id":29017542,"reputation":5,"user_id":22227669,"display_name":"ok buddy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":519,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76820076,"answer_count":2,"score":0,"last_activity_date":1691118758,"creation_date":1690964368,"question_id":76817902,"body_markdown":"I wrote two services:\r\n1. api gateway (spring cloud gateway)\r\n2. catalog service\r\n\r\nNext, I used keycloak. As far as I understand, according to OAuth2, the gateway is a resource, not a client. I did so. Everything works fine.\r\n\r\nMy problem: I can access catalog-service through the gateway, which will access keycloak, and in case of successful authentication will go to catalog-service, BUT I can still access catalog-service directly, without authentication.\r\n\r\nThis is logical, because I haven&#39;t changed anything in catalog-service for security, but I don&#39;t understand how to do it correctly. Declare a catalog service as a resource server too and use Token Relay in Spring Gateway? Will it work and is it a good practice? Or use Spring Security somehow? I&#39;m confused..\r\n\r\nAnd should I make the gateway a client after all? Because I see many more examples on the Internet of exactly this use of the gateway..","title":"Spring Cloud Gateway -&gt; Keycloak -&gt; Microservice","body":"<p>I wrote two services:</p>\n<ol>\n<li>api gateway (spring cloud gateway)</li>\n<li>catalog service</li>\n</ol>\n<p>Next, I used keycloak. As far as I understand, according to OAuth2, the gateway is a resource, not a client. I did so. Everything works fine.</p>\n<p>My problem: I can access catalog-service through the gateway, which will access keycloak, and in case of successful authentication will go to catalog-service, BUT I can still access catalog-service directly, without authentication.</p>\n<p>This is logical, because I haven't changed anything in catalog-service for security, but I don't understand how to do it correctly. Declare a catalog service as a resource server too and use Token Relay in Spring Gateway? Will it work and is it a good practice? Or use Spring Security somehow? I'm confused..</p>\n<p>And should I make the gateway a client after all? Because I see many more examples on the Internet of exactly this use of the gateway..</p>\n"},{"tags":["java","spring","stream"],"answers":[{"tags":[],"owner":{"account_id":28217991,"reputation":1,"user_id":21569195,"display_name":"tcm"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691118112,"creation_date":1691118112,"answer_id":76832714,"question_id":73364123,"body_markdown":"I have a same problem,my spring-cloud-stream version is 3.1.3 ,debug found a logical problem, DefaultSingletonBeanRegistry class&#39;s method getSingleton gave your bean name [forceLogoutTopic.handleError.serviceActivator] multiple registrations.\r\n\r\nIn the end,I use @StreamListener replace @ServiceActivator fixed, It&#39;s working.\r\n```\r\n@StreamListener(IntegrationContextUtils.ERROR_CHANNEL_BEAN_NAME)\r\n```\r\nyou can try:\r\n```\r\n@StreamListener(&quot;force-logout-topic.force-logout-group.errors&quot;)\r\n```\r\n\r\nsingletonFactory.getObject() duplicate registration same bean name:\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/S3EIz.png","title":"he @ServiceActivator(inputChannel = &quot;[topic].[group]. Errors &quot;) annotation Is there an unresolvable Circular reference exception","body":"<p>I have a same problem,my spring-cloud-stream version is 3.1.3 ,debug found a logical problem, DefaultSingletonBeanRegistry class's method getSingleton gave your bean name [forceLogoutTopic.handleError.serviceActivator] multiple registrations.</p>\n<p>In the end,I use @StreamListener replace @ServiceActivator fixed, It's working.</p>\n<pre><code>@StreamListener(IntegrationContextUtils.ERROR_CHANNEL_BEAN_NAME)\n</code></pre>\n<p>you can try:</p>\n<pre><code>@StreamListener(&quot;force-logout-topic.force-logout-group.errors&quot;)\n</code></pre>\n<p>singletonFactory.getObject() duplicate registration same bean name:\n<a href=\"https://i.stack.imgur.com/S3EIz.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"}],"owner":{"account_id":26069874,"reputation":1,"user_id":19769749,"display_name":"lijun"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691118112,"creation_date":1660582607,"question_id":73364123,"body_markdown":"describe: \r\n\r\nhello\r\nAn exception occurred while using a channel that handles local exceptions,But it works fine\r\n\r\n   ```java\r\n      @ServiceActivator(inputChannel = &quot;force-logout-topic.force-logout-group.errors&quot;)\r\n      public void handleError(ErrorMessage message) {\r\n        log.info(&quot;原始消息体 = {}&quot;, message);\r\n     }\r\n  ```\r\n\r\n```java\r\nCould not register an MBean for: forceLogoutTopic.handleError.serviceActivator  org.springframework.beans.factory.BeanCurrentlyInCreationException: Error creating bean with name &#39;forceLogoutTopic.handleError.serviceActivator&#39;: Requested bean is currently in creation: Is there an unresolvable circular reference?\r\n```\r\n```java\r\n2022-08-16 00:41:24,893 WARN  [force-logout-topic.force-logout-group-1,27c4d80edb2f6454,9142bcafd2fa2973] o.s.c.l.c.RoundRobinLoadBalancer.getInstanceResponse(98): No servers available for service: my-shop-auth-service  \r\n2022-08-16 00:41:24,894 WARN  [force-logout-topic.force-logout-group-1,27c4d80edb2f6454,9142bcafd2fa2973] o.s.c.o.l.RetryableFeignBlockingLoadBalancerClient.lambda$execute$2(145): Service instance was not resolved, executing the original request  \r\n```\r\n\r\n```yml\r\nspring:\r\n  cloud:\r\n    stream:\r\n      function:\r\n        definition: forceLogoutConsumer\r\n      bindings:\r\n        forceLogoutConsumer-in-0:\r\n          destination: force-logout-topic\r\n          group: force-logout-group\r\n        forceLogoutProducer:\r\n          destination: force-logout-topic\r\n          producer:\r\n            error-channel-enabled: true\r\n```","title":"he @ServiceActivator(inputChannel = &quot;[topic].[group]. Errors &quot;) annotation Is there an unresolvable Circular reference exception","body":"<p>describe:</p>\n<p>hello\nAn exception occurred while using a channel that handles local exceptions,But it works fine</p>\n<pre class=\"lang-java prettyprint-override\"><code>   @ServiceActivator(inputChannel = &quot;force-logout-topic.force-logout-group.errors&quot;)\n   public void handleError(ErrorMessage message) {\n     log.info(&quot;原始消息体 = {}&quot;, message);\n  }\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>Could not register an MBean for: forceLogoutTopic.handleError.serviceActivator  org.springframework.beans.factory.BeanCurrentlyInCreationException: Error creating bean with name 'forceLogoutTopic.handleError.serviceActivator': Requested bean is currently in creation: Is there an unresolvable circular reference?\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>2022-08-16 00:41:24,893 WARN  [force-logout-topic.force-logout-group-1,27c4d80edb2f6454,9142bcafd2fa2973] o.s.c.l.c.RoundRobinLoadBalancer.getInstanceResponse(98): No servers available for service: my-shop-auth-service  \n2022-08-16 00:41:24,894 WARN  [force-logout-topic.force-logout-group-1,27c4d80edb2f6454,9142bcafd2fa2973] o.s.c.o.l.RetryableFeignBlockingLoadBalancerClient.lambda$execute$2(145): Service instance was not resolved, executing the original request  \n</code></pre>\n<pre class=\"lang-yaml prettyprint-override\"><code>spring:\n  cloud:\n    stream:\n      function:\n        definition: forceLogoutConsumer\n      bindings:\n        forceLogoutConsumer-in-0:\n          destination: force-logout-topic\n          group: force-logout-group\n        forceLogoutProducer:\n          destination: force-logout-topic\n          producer:\n            error-channel-enabled: true\n</code></pre>\n"},{"tags":["java","maven","apache-karaf","blueprint-osgi"],"comments":[{"owner":{"account_id":91170,"reputation":6162,"user_id":250517,"accept_rate":75,"display_name":"Grzegorz Grzybek"},"score":0,"creation_date":1691128548,"post_id":76832708,"comment_id":135452462,"body_markdown":"Please install `aries-blueprint` feature - that&#39;s how Karaf itself uses blueprint.","body":"Please install <code>aries-blueprint</code> feature - that&#39;s how Karaf itself uses blueprint."},{"owner":{"account_id":22649518,"reputation":13,"user_id":16824403,"display_name":"Ubuntu Learner"},"score":0,"creation_date":1691128913,"post_id":76832708,"comment_id":135452502,"body_markdown":"Thanks @Grzegorz Grzybek! It solved the problem.","body":"Thanks @Grzegorz Grzybek! It solved the problem."}],"owner":{"account_id":22649518,"reputation":13,"user_id":16824403,"display_name":"Ubuntu Learner"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691118074,"creation_date":1691118074,"question_id":76832708,"body_markdown":"I try to start a feature using Karaf console:\r\n\r\n```karaf@karaf()&gt; feature:install my_feature```\r\n\r\nand get the following error:\r\n```\r\nError executing command: \r\nUnable to resolve root: \r\n\tmissing requirement [root] osgi.identity; \r\n\tosgi.identity=my_feature; \r\n\ttype=karaf.feature; \r\n\tversion=&quot;[4.0.0.SNAPSHOT,4.0.0.SNAPSHOT]&quot;; \r\n\tfilter:=&quot;(&amp;(osgi.identity=my_feature)(type=karaf.feature)(version&gt;=4.0.0.SNAPSHOT)(version&lt;=4.0.0.SNAPSHOT))&quot; \r\n\t[\r\n\t\tcaused by: Unable to resolve my_feature/4.0.0.SNAPSHOT: \r\n\t\tmissing requirement [my_feature/4.0.0.SNAPSHOT] osgi.identity; \r\n\t\tosgi.identity=appliance-branding; \r\n\t\ttype=osgi.bundle; \r\n\t\tversion=&quot;[4.0.0.SNAPSHOT,4.0.0.SNAPSHOT]&quot;; \r\n\t\tresolution:=mandatory \r\n\t\t[\r\n\t\t\tcaused by: Unable to resolve appliance-branding/4.0.0.SNAPSHOT: \r\n\t\t\tmissing requirement [appliance-branding/4.0.0.SNAPSHOT] osgi.wiring.package; \r\n\t\t\tfilter:=&quot;(&amp;(osgi.wiring.package=org.osgi.service.blueprint)(version&gt;=1.0.0)(!(version&gt;=2.0.0)))&quot;\r\n\t\t]\r\n\t]\r\n```\r\n\r\nHowever, I manually added the org.osgi.service.blueprint bundle and having it active:\r\n```\r\nkaraf@karaf()&gt; list\r\nSTART LEVEL 100 , List Threshold: 50\r\nID │ State  │ Lvl │ Version            │ Name\r\n───┼────────┼─────┼────────────────────┼────────────────────────────────────────\r\n27 │ Active │ 100 │ 4.2.16             │ Apache Karaf :: OSGi Services :: Event\r\n51 │ Active │  80 │ 1.0.2.201505202024 │ org.osgi:org.osgi.service.blueprint\r\n```\r\n\r\nThe question is why Karaf ignores the org.osgi.service.blueprint bundle and can&#39;t install my feature and what I can do to install it?\r\n\r\nUPD: I used Karaf 2.2.x and I didn&#39;t have any issues with it, now I&#39;m trying to upgrade from 2.2.x to 4.2.16. I built my application using Java 6 for Karaf 2.2.x and now I&#39;m using Java 8 along with Karaf 4.2.16. The source code is absolutely the same, nothing was changed except Java version I&#39;m using to build.","title":"Feature fails to start using Karaf 4.2.16 due to unresolved dependencies","body":"<p>I try to start a feature using Karaf console:</p>\n<p><code>karaf@karaf()&gt; feature:install my_feature</code></p>\n<p>and get the following error:</p>\n<pre><code>Error executing command: \nUnable to resolve root: \n    missing requirement [root] osgi.identity; \n    osgi.identity=my_feature; \n    type=karaf.feature; \n    version=&quot;[4.0.0.SNAPSHOT,4.0.0.SNAPSHOT]&quot;; \n    filter:=&quot;(&amp;(osgi.identity=my_feature)(type=karaf.feature)(version&gt;=4.0.0.SNAPSHOT)(version&lt;=4.0.0.SNAPSHOT))&quot; \n    [\n        caused by: Unable to resolve my_feature/4.0.0.SNAPSHOT: \n        missing requirement [my_feature/4.0.0.SNAPSHOT] osgi.identity; \n        osgi.identity=appliance-branding; \n        type=osgi.bundle; \n        version=&quot;[4.0.0.SNAPSHOT,4.0.0.SNAPSHOT]&quot;; \n        resolution:=mandatory \n        [\n            caused by: Unable to resolve appliance-branding/4.0.0.SNAPSHOT: \n            missing requirement [appliance-branding/4.0.0.SNAPSHOT] osgi.wiring.package; \n            filter:=&quot;(&amp;(osgi.wiring.package=org.osgi.service.blueprint)(version&gt;=1.0.0)(!(version&gt;=2.0.0)))&quot;\n        ]\n    ]\n</code></pre>\n<p>However, I manually added the org.osgi.service.blueprint bundle and having it active:</p>\n<pre><code>karaf@karaf()&gt; list\nSTART LEVEL 100 , List Threshold: 50\nID │ State  │ Lvl │ Version            │ Name\n───┼────────┼─────┼────────────────────┼────────────────────────────────────────\n27 │ Active │ 100 │ 4.2.16             │ Apache Karaf :: OSGi Services :: Event\n51 │ Active │  80 │ 1.0.2.201505202024 │ org.osgi:org.osgi.service.blueprint\n</code></pre>\n<p>The question is why Karaf ignores the org.osgi.service.blueprint bundle and can't install my feature and what I can do to install it?</p>\n<p>UPD: I used Karaf 2.2.x and I didn't have any issues with it, now I'm trying to upgrade from 2.2.x to 4.2.16. I built my application using Java 6 for Karaf 2.2.x and now I'm using Java 8 along with Karaf 4.2.16. The source code is absolutely the same, nothing was changed except Java version I'm using to build.</p>\n"},{"tags":["java","testng"],"comments":[{"owner":{"account_id":54296,"reputation":15518,"user_id":162410,"accept_rate":56,"display_name":"Cedric Beust"},"score":0,"creation_date":1470410592,"post_id":38758745,"comment_id":64955774,"body_markdown":"Please see Julien Herr&#39;s answer below. A quick observation: once you start depending on multiple methods, I recommend depending on groups instead, which is much easier to maintain. But you definitely seem to have found a bug here.","body":"Please see Julien Herr&#39;s answer below. A quick observation: once you start depending on multiple methods, I recommend depending on groups instead, which is much easier to maintain. But you definitely seem to have found a bug here."}],"answers":[{"tags":[],"owner":{"account_id":2131203,"reputation":462,"user_id":5273975,"display_name":"John K"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1470287455,"creation_date":1470287455,"answer_id":38758912,"question_id":38758745,"body_markdown":"@AfterMethod declares that this method is run after every method annotated with @Test. Right now you have a conflict with test4() being called after test1() and before test2(), while also requiring it to be run after test2(). Refer to [this](https://github.com/cbeust/testng/issues/550) for more in-depth discussion.\r\n\r\nedit: I should probably make the call order more clear. \r\n\r\n    test1()-&gt;test4()\r\n    test2()-&gt;test4()\r\n    test3()-&gt;test4()\r\n\r\nAs you can see, requiring test4() to be run after test2() and test3() is in conflict with the @AfterMethod annotation requiring it be called after every method. ","title":"dependsOnMethods for @AfterTest not finding the test method","body":"<p>@AfterMethod declares that this method is run after every method annotated with @Test. Right now you have a conflict with test4() being called after test1() and before test2(), while also requiring it to be run after test2(). Refer to <a href=\"https://github.com/cbeust/testng/issues/550\" rel=\"nofollow\">this</a> for more in-depth discussion.</p>\n\n<p>edit: I should probably make the call order more clear. </p>\n\n<pre><code>test1()-&gt;test4()\ntest2()-&gt;test4()\ntest3()-&gt;test4()\n</code></pre>\n\n<p>As you can see, requiring test4() to be run after test2() and test3() is in conflict with the @AfterMethod annotation requiring it be called after every method. </p>\n"},{"tags":[],"owner":{"account_id":5307294,"reputation":5670,"user_id":4234729,"display_name":"juherr"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1470416142,"creation_date":1470295964,"answer_id":38761124,"question_id":38758745,"body_markdown":"`dependsOnMethod` is not working like that and just used to order methods between them.\r\nThe [javadoc][1] is clear enough IMO:\r\n\r\n&gt; The list of methods this method depends on. There is no guarantee on the order on which the methods depended upon will be run, but you are guaranteed that all these methods will be run before the test method that contains this annotation is run. Furthermore, if any of these methods was not a SUCCESS, this test method will not be run and will be flagged as a SKIP. If some of these methods have been overloaded, all the overloaded versions will be run.\r\n\r\nBut the exception should not happen so I opened [an issue][2] for it.\r\n\r\nAbout your need which is running an `@AfterMethod` for specific methods only (something looks weird, but why not), you can do the following:\r\n\r\n    public class ShashiTest {\r\n        @Test\r\n        public void test1(){\r\n            System.out.println(&quot;1===========&quot;);\r\n        }\r\n\r\n        @Test(dependsOnMethods=&quot;test1&quot;)\r\n        public void test2(){\r\n            System.out.println(&quot;2===========&quot;);\r\n        }\r\n\r\n        @Test(dependsOnMethods=&quot;test2&quot;)\r\n        public void test3(){\r\n            System.out.println(&quot;3===========&quot;);\r\n        }\r\n\r\n        @AfterMethod\r\n        public void test4(Method m){\r\n            switch(m.getName()) {\r\n                case &quot;test2&quot;:\r\n                case &quot;test3&quot;: \r\n                    System.out.println(&quot;4===========&quot;);    \r\n            }\r\n        }\r\n    }\r\n\r\nshould work as expected.\r\n\r\n  [1]: http://testng.org/javadocs/org/testng/annotations/AfterMethod.html#dependsOnMethods--\r\n  [2]: https://github.com/cbeust/testng/issues/1106","title":"dependsOnMethods for @AfterTest not finding the test method","body":"<p><code>dependsOnMethod</code> is not working like that and just used to order methods between them.\nThe <a href=\"http://testng.org/javadocs/org/testng/annotations/AfterMethod.html#dependsOnMethods--\" rel=\"nofollow\">javadoc</a> is clear enough IMO:</p>\n\n<blockquote>\n  <p>The list of methods this method depends on. There is no guarantee on the order on which the methods depended upon will be run, but you are guaranteed that all these methods will be run before the test method that contains this annotation is run. Furthermore, if any of these methods was not a SUCCESS, this test method will not be run and will be flagged as a SKIP. If some of these methods have been overloaded, all the overloaded versions will be run.</p>\n</blockquote>\n\n<p>But the exception should not happen so I opened <a href=\"https://github.com/cbeust/testng/issues/1106\" rel=\"nofollow\">an issue</a> for it.</p>\n\n<p>About your need which is running an <code>@AfterMethod</code> for specific methods only (something looks weird, but why not), you can do the following:</p>\n\n<pre><code>public class ShashiTest {\n    @Test\n    public void test1(){\n        System.out.println(\"1===========\");\n    }\n\n    @Test(dependsOnMethods=\"test1\")\n    public void test2(){\n        System.out.println(\"2===========\");\n    }\n\n    @Test(dependsOnMethods=\"test2\")\n    public void test3(){\n        System.out.println(\"3===========\");\n    }\n\n    @AfterMethod\n    public void test4(Method m){\n        switch(m.getName()) {\n            case \"test2\":\n            case \"test3\": \n                System.out.println(\"4===========\");    \n        }\n    }\n}\n</code></pre>\n\n<p>should work as expected.</p>\n"},{"tags":[],"owner":{"account_id":3956260,"reputation":13,"user_id":3264613,"display_name":"Vicky"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1519665062,"creation_date":1519665062,"answer_id":48993643,"question_id":38758745,"body_markdown":"Bit late to answer but I just faced this problem today. Error: com.expedia.FlightBooking.tearDown() is depending on method public void com.expedia.FlightBooking.flightBooking(), which is not annotated with @Test or not included.\r\n\r\nSolution: Changing dependsOnMethods to dependsOnGroups Ex: @AfterTest(dependsOnGroups = {&quot;flightBooking&quot;}) has solved my problem.","title":"dependsOnMethods for @AfterTest not finding the test method","body":"<p>Bit late to answer but I just faced this problem today. Error: com.expedia.FlightBooking.tearDown() is depending on method public void com.expedia.FlightBooking.flightBooking(), which is not annotated with @Test or not included.</p>\n\n<p>Solution: Changing dependsOnMethods to dependsOnGroups Ex: @AfterTest(dependsOnGroups = {\"flightBooking\"}) has solved my problem.</p>\n"}],"owner":{"account_id":3467967,"reputation":1511,"user_id":2903069,"accept_rate":24,"display_name":"Shashi Ranjan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1752,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1691116429,"creation_date":1470286568,"question_id":38758745,"body_markdown":"I am trying following code:\r\n\r\n    public class ShashiTest {\r\n        @Test\r\n    \tpublic void test1(){\r\n    \t\tSystem.out.println(&quot;1===========&quot;);\r\n    \t}\r\n    \t\r\n    \t@Test(dependsOnMethods=&quot;test1&quot;)\r\n    \tpublic void test2(){\r\n    \t\tSystem.out.println(&quot;2===========&quot;);\r\n    \t}\r\n    \t\r\n    \t@Test(dependsOnMethods=&quot;test2&quot;)\r\n    \tpublic void test3(){\r\n    \t\tSystem.out.println(&quot;3===========&quot;);\r\n    \t}\r\n    \t\r\n    \t@AfterMethod(dependsOnMethods={&quot;test2&quot;,&quot;test3&quot;})\r\n    \tpublic void test4(){\r\n    \t\tSystem.out.println(&quot;4===========&quot;);\r\n    \t}\r\n    }\r\n\r\nI am expecting output as:\r\n\r\n    1===========\r\n    2===========\r\n    4===========\r\n    3===========\r\n    4===========\r\n\r\nBut I am getting exception as test method not found:\r\n\r\n    com.ShashiTest.test4() is depending on method public void com.ShashiTest.test2(), which is not annotated with @Test or not included.\r\n    \tat org.testng.internal.MethodHelper.findDependedUponMethods(MethodHelper.java:111)\r\n\r\nWhere I am making the mistake? How I can achieve my goal?","title":"dependsOnMethods for @AfterTest not finding the test method","body":"<p>I am trying following code:</p>\n\n<pre><code>public class ShashiTest {\n    @Test\n    public void test1(){\n        System.out.println(\"1===========\");\n    }\n\n    @Test(dependsOnMethods=\"test1\")\n    public void test2(){\n        System.out.println(\"2===========\");\n    }\n\n    @Test(dependsOnMethods=\"test2\")\n    public void test3(){\n        System.out.println(\"3===========\");\n    }\n\n    @AfterMethod(dependsOnMethods={\"test2\",\"test3\"})\n    public void test4(){\n        System.out.println(\"4===========\");\n    }\n}\n</code></pre>\n\n<p>I am expecting output as:</p>\n\n<pre><code>1===========\n2===========\n4===========\n3===========\n4===========\n</code></pre>\n\n<p>But I am getting exception as test method not found:</p>\n\n<pre><code>com.ShashiTest.test4() is depending on method public void com.ShashiTest.test2(), which is not annotated with @Test or not included.\n    at org.testng.internal.MethodHelper.findDependedUponMethods(MethodHelper.java:111)\n</code></pre>\n\n<p>Where I am making the mistake? How I can achieve my goal?</p>\n"},{"tags":["java","save","telegram-bot","fileoutputstream","long-polling"],"owner":{"account_id":28414001,"reputation":1,"user_id":21737031,"display_name":"Павлюченко Антон"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691114900,"creation_date":1691114900,"question_id":76832548,"body_markdown":"I am creating my telegram bot on LongPollingBot using Japa Spring Boot (for the first time in my life, so I apologize for such a simple question)\r\nHow can I save the received photo from the user to make an array of bytes from it and using FileOutputStream save it to my local drive in a folder in good quality?\r\nI already tried to do something like this:\r\n\r\n    PhotoSize photoSize = msg.getPhoto().get(0);\r\n\r\n    File file = new File(&quot;./photos/&quot; + photoSize.getFileId() + &quot;.jpg&quot;);\r\n    try (FileOutputStream outputStream = new FileOutputStream(file)) {\r\n        outputStream.write(photoSize.getFileId().getBytes());\r\n    } catch (IOException e) {\r\n        e.printStackTrace();\r\n    }\r\nBut this just saves the byte array of that file&#39;s id, not the photo itself. I already surfed a bunch of sites and saw many times how they used photoSize.getDate.getInputStream() and so on, but apparently this is already outdated and I can’t write anything newer (please help me)","title":"How can I save a photo from a telegram bot user to a folder on a disk in good quality?","body":"<p>I am creating my telegram bot on LongPollingBot using Japa Spring Boot (for the first time in my life, so I apologize for such a simple question)\nHow can I save the received photo from the user to make an array of bytes from it and using FileOutputStream save it to my local drive in a folder in good quality?\nI already tried to do something like this:</p>\n<pre><code>PhotoSize photoSize = msg.getPhoto().get(0);\n\nFile file = new File(&quot;./photos/&quot; + photoSize.getFileId() + &quot;.jpg&quot;);\ntry (FileOutputStream outputStream = new FileOutputStream(file)) {\n    outputStream.write(photoSize.getFileId().getBytes());\n} catch (IOException e) {\n    e.printStackTrace();\n}\n</code></pre>\n<p>But this just saves the byte array of that file's id, not the photo itself. I already surfed a bunch of sites and saw many times how they used photoSize.getDate.getInputStream() and so on, but apparently this is already outdated and I can’t write anything newer (please help me)</p>\n"},{"tags":["java","sorting","java-8","collectors"],"comments":[{"owner":{"account_id":3418957,"reputation":1176,"user_id":4029174,"accept_rate":100,"display_name":"bananas"},"score":3,"creation_date":1561441064,"post_id":56747362,"comment_id":100052983,"body_markdown":"`TreeMap(Comparator&lt;? super K&gt; comparator)`","body":"<code>TreeMap(Comparator&lt;? super K&gt; comparator)</code>"}],"answers":[{"tags":[],"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691114404,"creation_date":1561440818,"answer_id":56747401,"question_id":56747362,"body_markdown":"Pass a `Comparator` to the `TreeMap` constructor. For example:\r\n```java\r\nMap&lt;String, List&lt;Test&gt;&gt; descendingOrder = tests.stream().collect(\r\n     Collectors.groupingBy(Test::getName,\r\n                          () -&gt; new TreeMap(Comparator.reverseOrder()),\r\n                          Collectors.toList()));\r\n```\r\nOr:\r\n```java\r\nMap&lt;String, List&lt;Test&gt;&gt; descendingOrder = tests.stream().collect(\r\n     Collectors.groupingBy(Test::getName,\r\n                          () -&gt; new TreeMap&lt;&gt;(Collections.reverseOrder()),\r\n                          Collectors.toList()));\r\n```","title":"Collectors groupingBy insertion, ascending and descending order - java8","body":"<p>Pass a <code>Comparator</code> to the <code>TreeMap</code> constructor. For example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String, List&lt;Test&gt;&gt; descendingOrder = tests.stream().collect(\n     Collectors.groupingBy(Test::getName,\n                          () -&gt; new TreeMap(Comparator.reverseOrder()),\n                          Collectors.toList()));\n</code></pre>\n<p>Or:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String, List&lt;Test&gt;&gt; descendingOrder = tests.stream().collect(\n     Collectors.groupingBy(Test::getName,\n                          () -&gt; new TreeMap&lt;&gt;(Collections.reverseOrder()),\n                          Collectors.toList()));\n</code></pre>\n"}],"owner":{"account_id":551326,"reputation":3001,"user_id":916138,"accept_rate":45,"display_name":"Shahid Ghafoor"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1776,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":1,"score":-1,"last_activity_date":1691114404,"creation_date":1561440641,"question_id":56747362,"body_markdown":"Sample Data\r\n\r\n    List&lt;Test&gt; tests = new ArrayList();\r\n\r\n    Test test3 = new Test();\r\n    test3.setName(&quot;FELLOW&quot;);\r\n    test3.setDescription(&quot;DESC FELLOW 1&quot;);\r\n    tests.add(test3);\r\n\r\n    Test test4 = new Test();\r\n    test4.setName(&quot;FELLOW&quot;);\r\n    test4.setDescription(&quot;DESC FELLOW 2&quot;);\r\n    tests.add(test4);\r\n\r\n    Test test = new Test();\r\n    test.setName(&quot;HELLO&quot;);\r\n    test.setDescription(&quot;DESC Hello 1&quot;);\r\n    tests.add(test);\r\n\r\n    Test test1 = new Test();\r\n    test1.setName(&quot;HELLO&quot;);\r\n    test1.setDescription(&quot;DESC Hello 2&quot;);\r\n    tests.add(test1);\r\n\r\n    Test test2 = new Test();\r\n    test2.setName(&quot;HELLO&quot;);\r\n    test2.setDescription(&quot;DESC Hello 3&quot;);\r\n    tests.add(test2);\r\n\r\n    Test test5 = new Test();\r\n    test5.setName(&quot;ABC&quot;);\r\n    test5.setDescription(&quot;DESC FELLOW 3&quot;);\r\n    tests.add(test5);\r\n\r\n    Test test6 = new Test();\r\n    test6.setName(&quot;ABC&quot;);\r\n    test6.setDescription(&quot;DESC ABC 1&quot;);\r\n    tests.add(test6);\r\n\r\nTo get data in insertion order, I used **LinkedHashMap**\r\n\r\n    Map&lt;String, List&lt;Test&gt;&gt; insertionOrder = tests.stream().collect(Collectors.groupingBy(Test::getName, LinkedHashMap::new, Collectors.toList()));\r\n\r\nresult:\r\n\r\n    FELLOW,\r\n    HELLO\r\n    ABC\r\n\r\nTo get data in ascending order, I used **TreeMap**\r\n\r\n    Map&lt;String, List&lt;Test&gt;&gt; ascendingOrder = tests.stream().collect(Collectors.groupingBy(Test::getName, TreeMap::new, Collectors.toList()));\r\n\r\nresult:\r\n\r\n    ABC,\r\n    FELLOW\r\n    HELLO\r\n\r\nHow to get Map in descending order ? for example ?\r\n\r\n    HELLO,\r\n    FELLOW\r\n    ABC\r\n\r\n\r\n","title":"Collectors groupingBy insertion, ascending and descending order - java8","body":"<p>Sample Data</p>\n\n<pre><code>List&lt;Test&gt; tests = new ArrayList();\n\nTest test3 = new Test();\ntest3.setName(\"FELLOW\");\ntest3.setDescription(\"DESC FELLOW 1\");\ntests.add(test3);\n\nTest test4 = new Test();\ntest4.setName(\"FELLOW\");\ntest4.setDescription(\"DESC FELLOW 2\");\ntests.add(test4);\n\nTest test = new Test();\ntest.setName(\"HELLO\");\ntest.setDescription(\"DESC Hello 1\");\ntests.add(test);\n\nTest test1 = new Test();\ntest1.setName(\"HELLO\");\ntest1.setDescription(\"DESC Hello 2\");\ntests.add(test1);\n\nTest test2 = new Test();\ntest2.setName(\"HELLO\");\ntest2.setDescription(\"DESC Hello 3\");\ntests.add(test2);\n\nTest test5 = new Test();\ntest5.setName(\"ABC\");\ntest5.setDescription(\"DESC FELLOW 3\");\ntests.add(test5);\n\nTest test6 = new Test();\ntest6.setName(\"ABC\");\ntest6.setDescription(\"DESC ABC 1\");\ntests.add(test6);\n</code></pre>\n\n<p>To get data in insertion order, I used <strong>LinkedHashMap</strong></p>\n\n<pre><code>Map&lt;String, List&lt;Test&gt;&gt; insertionOrder = tests.stream().collect(Collectors.groupingBy(Test::getName, LinkedHashMap::new, Collectors.toList()));\n</code></pre>\n\n<p>result:</p>\n\n<pre><code>FELLOW,\nHELLO\nABC\n</code></pre>\n\n<p>To get data in ascending order, I used <strong>TreeMap</strong></p>\n\n<pre><code>Map&lt;String, List&lt;Test&gt;&gt; ascendingOrder = tests.stream().collect(Collectors.groupingBy(Test::getName, TreeMap::new, Collectors.toList()));\n</code></pre>\n\n<p>result:</p>\n\n<pre><code>ABC,\nFELLOW\nHELLO\n</code></pre>\n\n<p>How to get Map in descending order ? for example ?</p>\n\n<pre><code>HELLO,\nFELLOW\nABC\n</code></pre>\n"},{"tags":["java","time","duration"],"answers":[{"tags":[],"owner":{"account_id":66969,"reputation":22196,"user_id":196211,"accept_rate":67,"display_name":"Eyal Schneider"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1272822159,"creation_date":1272738915,"answer_id":2751108,"question_id":2751073,"body_markdown":"If you use Java 6, TimeUnit enum can be useful. For example:\r\n\r\n    TimeUnit.HOURS.convert(10, TimeUnit.DAYS)\r\n\r\nThis static call converts 10 days into hour units, and returns 240. You can play with time units starting from NANOSECONDS and ending with DAYS.\r\n\r\nActually TimeUnit is available from Java 5, but in version 6 more units were added.\r\n\r\n--EDIT-- \r\nNow that I understand better your question, use the division and remainder approach as in the response of Romain. My tip is useful only for conversion to a single time unit.","title":"how to convert minutes to days,hours,minutes","body":"<p>If you use Java 6, TimeUnit enum can be useful. For example:</p>\n\n<pre><code>TimeUnit.HOURS.convert(10, TimeUnit.DAYS)\n</code></pre>\n\n<p>This static call converts 10 days into hour units, and returns 240. You can play with time units starting from NANOSECONDS and ending with DAYS.</p>\n\n<p>Actually TimeUnit is available from Java 5, but in version 6 more units were added.</p>\n\n<p>--EDIT-- \nNow that I understand better your question, use the division and remainder approach as in the response of Romain. My tip is useful only for conversion to a single time unit.</p>\n"},{"tags":[],"owner":{"account_id":120605,"reputation":24173,"user_id":313137,"display_name":"Romain Hippeau"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1468425776,"creation_date":1272739507,"answer_id":2751143,"question_id":2751073,"body_markdown":"If you want to do this yourself, go the other way.\r\n\r\n1. Divide the number by 60 * 24. (That will get the number of days.)  \r\n2. Divide the remainder by 60. (That will give you number of hours.)  \r\n3. The remainder of #2 is the number of minutes.","title":"how to convert minutes to days,hours,minutes","body":"<p>If you want to do this yourself, go the other way.</p>\n\n<ol>\n<li>Divide the number by 60 * 24. (That will get the number of days.)  </li>\n<li>Divide the remainder by 60. (That will give you number of hours.)  </li>\n<li>The remainder of #2 is the number of minutes.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":6356,"reputation":8963,"user_id":10659,"accept_rate":51,"display_name":"Loren Pechtel"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1451472767,"creation_date":1272740858,"answer_id":2751232,"question_id":2751073,"body_markdown":"1)  Your code is repetitive. This is a sign of bad code in my opinion.\r\n\r\n2)  The divisor shouldn&#39;t be changing with the number of days, because the number of days has little to do with the number of minutes in an hour.\r\n\r\nBeyond that, look at Romain Hippeau&#39;s approach, he told you how to do it.","title":"how to convert minutes to days,hours,minutes","body":"<p>1)  Your code is repetitive. This is a sign of bad code in my opinion.</p>\n\n<p>2)  The divisor shouldn't be changing with the number of days, because the number of days has little to do with the number of minutes in an hour.</p>\n\n<p>Beyond that, look at Romain Hippeau's approach, he told you how to do it.</p>\n"},{"tags":[],"owner":{"account_id":129577,"reputation":1319,"user_id":328256,"accept_rate":76,"display_name":"Eddinho"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1330827366,"creation_date":1272745539,"answer_id":2751437,"question_id":2751073,"body_markdown":"and the answer is :\r\n\r\n     public String timeConvert(int time){\r\n       String t = &quot;&quot;;\r\n\r\n      int j = time/(24*60);\r\n      int h= (time%(24*60)) / 60;\r\n      int m = (time%(24*60)) % 60;\r\n\r\n      \r\n\r\n       t =j + &quot;:&quot; + h + &quot;:&quot; + m;\r\n       return t;\r\n     }\r\n\r\nwhat do you think about this code?","title":"how to convert minutes to days,hours,minutes","body":"<p>and the answer is :</p>\n\n<pre><code> public String timeConvert(int time){\n   String t = \"\";\n\n  int j = time/(24*60);\n  int h= (time%(24*60)) / 60;\n  int m = (time%(24*60)) % 60;\n\n\n\n   t =j + \":\" + h + \":\" + m;\n   return t;\n }\n</code></pre>\n\n<p>what do you think about this code?</p>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":1,"up_vote_count":42,"is_accepted":true,"score":41,"last_activity_date":1272876582,"creation_date":1272876582,"answer_id":2756975,"question_id":2751073,"body_markdown":"A shorter way. (Assumes time &gt;= 0)\r\n\r\n     public String timeConvert(int time) { \r\n       return time/24/60 + &quot;:&quot; + time/60%24 + &#39;:&#39; + time%60;\r\n     }\r\n\r\n\r\n","title":"how to convert minutes to days,hours,minutes","body":"<p>A shorter way. (Assumes time >= 0)</p>\n\n<pre><code> public String timeConvert(int time) { \n   return time/24/60 + \":\" + time/60%24 + ':' + time%60;\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8819621,"reputation":1,"user_id":6589939,"display_name":"jaspreet singh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1495096898,"creation_date":1495096898,"answer_id":44042759,"question_id":2751073,"body_markdown":"i am using this code. it can also help.\r\n\r\n    private String getText(int minutes){\r\n\r\n        int weeks = minutes / 10080;\r\n        int aboveWeeks = minutes % 10080;\r\n        int days = aboveWeeks / 1440;\r\n        int aboveDays = aboveWeeks % 1440;\r\n        int hours = aboveDays / 60;\r\n        int aboveHours = aboveDays % 60;\r\n        int minute = aboveHours / 60;\r\n\r\n        if(weeks &gt; 0 &amp;&amp; days &gt; 0) {\r\n            if(weeks &gt; 1 &amp;&amp; days &gt; 1){\r\n                return weeks + &quot; weeks &quot; + days + &quot; days before&quot;;\r\n            } else {\r\n                return weeks + &quot; weeks &quot; + days + &quot; day before&quot;;\r\n            }\r\n        } else if (weeks &gt; 0){\r\n            if (weeks &gt; 1){\r\n                return weeks + &quot; weeks before&quot;;\r\n            } else {\r\n                return weeks + &quot; week before&quot;;\r\n            }\r\n        } else if(days &gt; 0 &amp;&amp; hours &gt; 0){\r\n            if(days &gt; 1 &amp;&amp; hours &gt; 1){\r\n                return days + &quot; days &quot; + hours + &quot; hours before&quot;;\r\n            } else {\r\n                return days + &quot; days &quot; + hours + &quot; hour before&quot;;\r\n            }\r\n        } else if(days &gt; 0){\r\n            if (days &gt; 1){\r\n                return days + &quot; days before&quot;;\r\n            } else {\r\n                return days + &quot; day before&quot;;\r\n            }\r\n        } else if(hours &gt; 0 &amp;&amp; minute &gt; 0){\r\n            if(hours &gt; 1 &amp;&amp; minute &gt; 1){\r\n                return hours + &quot; hours &quot; + minute + &quot; minutes before&quot;;\r\n            } else {\r\n                return hours + &quot; hours &quot; + minute + &quot; minute before&quot;;\r\n            }\r\n        } else if(hours &gt; 0){\r\n            if (hours &gt; 1){\r\n                return hours + &quot; hours before&quot;;\r\n            } else {\r\n                return hours + &quot; hour before&quot;;\r\n            }\r\n        } else {\r\n            if (minutes &gt; 1){\r\n                return minutes + &quot; minutes before&quot;;\r\n            } else {\r\n                return minutes + &quot; minute before&quot;;\r\n            }\r\n        }\r\n    }","title":"how to convert minutes to days,hours,minutes","body":"<p>i am using this code. it can also help.</p>\n\n<pre><code>private String getText(int minutes){\n\n    int weeks = minutes / 10080;\n    int aboveWeeks = minutes % 10080;\n    int days = aboveWeeks / 1440;\n    int aboveDays = aboveWeeks % 1440;\n    int hours = aboveDays / 60;\n    int aboveHours = aboveDays % 60;\n    int minute = aboveHours / 60;\n\n    if(weeks &gt; 0 &amp;&amp; days &gt; 0) {\n        if(weeks &gt; 1 &amp;&amp; days &gt; 1){\n            return weeks + \" weeks \" + days + \" days before\";\n        } else {\n            return weeks + \" weeks \" + days + \" day before\";\n        }\n    } else if (weeks &gt; 0){\n        if (weeks &gt; 1){\n            return weeks + \" weeks before\";\n        } else {\n            return weeks + \" week before\";\n        }\n    } else if(days &gt; 0 &amp;&amp; hours &gt; 0){\n        if(days &gt; 1 &amp;&amp; hours &gt; 1){\n            return days + \" days \" + hours + \" hours before\";\n        } else {\n            return days + \" days \" + hours + \" hour before\";\n        }\n    } else if(days &gt; 0){\n        if (days &gt; 1){\n            return days + \" days before\";\n        } else {\n            return days + \" day before\";\n        }\n    } else if(hours &gt; 0 &amp;&amp; minute &gt; 0){\n        if(hours &gt; 1 &amp;&amp; minute &gt; 1){\n            return hours + \" hours \" + minute + \" minutes before\";\n        } else {\n            return hours + \" hours \" + minute + \" minute before\";\n        }\n    } else if(hours &gt; 0){\n        if (hours &gt; 1){\n            return hours + \" hours before\";\n        } else {\n            return hours + \" hour before\";\n        }\n    } else {\n        if (minutes &gt; 1){\n            return minutes + \" minutes before\";\n        } else {\n            return minutes + \" minute before\";\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11098805,"reputation":695,"user_id":8148104,"display_name":"Durgesh Pal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1501680912,"creation_date":1501680912,"answer_id":45462430,"question_id":2751073,"body_markdown":"    class time{\r\n    \tpublic static void main (String args[]){\r\n    \t\tSystem.out.println(&quot;Hello&quot;);\r\n    \t\tint duration=1500;\r\n    \t\t String testDuration = &quot;&quot;;\r\n    \t\t \r\n            if(duration &lt; 60){\r\n                testDuration = duration + &quot; minutes&quot;;\r\n            }\r\n    \t\telse{\r\n    \t\t\t\r\n    \t\t\tif((duration / 60)&lt;24)\r\n    \t\t\t{\r\n    \t\t\t\tif((duration%60)==0){\r\n    \t\t\t\t\ttestDuration = (duration / 60) + &quot; hours&quot;;\r\n    \t\t\t\t}\r\n    \t\t\t\telse{\r\n                testDuration = (duration / 60) + &quot; hours,&quot; + (duration%60) + &quot; minutes&quot;;\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\telse{\r\n    \t\t\t\t\r\n    \t\t\t\tif((duration%60)==0){\r\n    \t\t\t\t\tif(((duration/60)%24)==0){\r\n    \t\t\t\t\t\ttestDuration = ((duration / 24)/60) + &quot; days,&quot;;\r\n    \t\t\t\t\t\t\r\n    \t\t\t\t\t}\r\n    \t\t\t\t\telse{\r\n    \t\t\t\t\ttestDuration = ((duration / 24)/60) + &quot; days,&quot; + (duration/60)%24 +&quot;hours&quot;;\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t\t\telse{\r\n    \t\t\t\ttestDuration = ((duration / 24)/60) + &quot; days,&quot; + (duration/60)%24 +&quot;hours&quot;+ (duration%60) + &quot; minutes&quot;;\r\n    \t\t\t\t\t}\r\n    \t\t\t}\r\n            }\r\n    \t\t\r\n            System.out.println(testDuration);\r\n    \t}\r\n    }","title":"how to convert minutes to days,hours,minutes","body":"<pre><code>class time{\n    public static void main (String args[]){\n        System.out.println(\"Hello\");\n        int duration=1500;\n         String testDuration = \"\";\n\n        if(duration &lt; 60){\n            testDuration = duration + \" minutes\";\n        }\n        else{\n\n            if((duration / 60)&lt;24)\n            {\n                if((duration%60)==0){\n                    testDuration = (duration / 60) + \" hours\";\n                }\n                else{\n            testDuration = (duration / 60) + \" hours,\" + (duration%60) + \" minutes\";\n                }\n            }\n            else{\n\n                if((duration%60)==0){\n                    if(((duration/60)%24)==0){\n                        testDuration = ((duration / 24)/60) + \" days,\";\n\n                    }\n                    else{\n                    testDuration = ((duration / 24)/60) + \" days,\" + (duration/60)%24 +\"hours\";\n                    }\n                }\n                    else{\n                testDuration = ((duration / 24)/60) + \" days,\" + (duration/60)%24 +\"hours\"+ (duration%60) + \" minutes\";\n                    }\n            }\n        }\n\n        System.out.println(testDuration);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3648149,"reputation":2060,"user_id":3040886,"accept_rate":20,"display_name":"Ronny Shibley"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1569099559,"creation_date":1524417713,"answer_id":49968709,"question_id":2751073,"body_markdown":"**1 day 2 hrs 5 mins**\r\n\r\n    public static String convertToDaysHoursMinutes(long minutes) {\r\n\r\n        int day = (int)TimeUnit.MINUTES.toDays(minutes);\r\n        long hours = TimeUnit.MINUTES.toHours(minutes) - (day *24);\r\n        long minute = TimeUnit.MINUTES.toMinutes(minutes) - (TimeUnit.MINUTES.toHours(minutes)* 60);\r\n\r\n\t\tString result = &quot;&quot;;\r\n\r\n\t\tif (day != 0){\r\n\t\t\tresult += day;\r\n\t\t\tif (day == 1){\r\n\t\t\t\tresult += &quot; day &quot;;\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tresult += &quot; days &quot;;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (hours != 0){\r\n\t\t\tresult += hours;\r\n\r\n\t\t\tif (hours == 1){\r\n\t\t\t\tresult += &quot; hr &quot;;\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tresult += &quot; hrs &quot;;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (minute != 0){\r\n\t\t\tresult += minute;\r\n\r\n\t\t\tif (minute == 1){\r\n\t\t\t\tresult += &quot; min&quot;;\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tresult += &quot; mins&quot;;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}","title":"how to convert minutes to days,hours,minutes","body":"<p><strong>1 day 2 hrs 5 mins</strong></p>\n\n<pre><code>public static String convertToDaysHoursMinutes(long minutes) {\n\n    int day = (int)TimeUnit.MINUTES.toDays(minutes);\n    long hours = TimeUnit.MINUTES.toHours(minutes) - (day *24);\n    long minute = TimeUnit.MINUTES.toMinutes(minutes) - (TimeUnit.MINUTES.toHours(minutes)* 60);\n\n    String result = \"\";\n\n    if (day != 0){\n        result += day;\n        if (day == 1){\n            result += \" day \";\n        }\n        else{\n            result += \" days \";\n        }\n    }\n\n    if (hours != 0){\n        result += hours;\n\n        if (hours == 1){\n            result += \" hr \";\n        }\n        else{\n            result += \" hrs \";\n        }\n    }\n\n    if (minute != 0){\n        result += minute;\n\n        if (minute == 1){\n            result += \" min\";\n        }\n        else{\n            result += \" mins\";\n        }\n    }\n\n    return result;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12112960,"reputation":141,"user_id":8848804,"display_name":"NAVIN ROY"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1536959380,"creation_date":1536959380,"answer_id":52339232,"question_id":2751073,"body_markdown":"for best readability ,like it won&#39;t print 0 day or 0 hour or 0 minute.\r\ne.g- (if minute=1500,then it will print only 1 day 1 hour)     \r\n\r\n   int minute=150;\r\n\r\n\t\tStringBuilder sb=new StringBuilder();\r\n\r\n\t\tint day=minute/1440;\r\n\t\tint rem=minute%1440;\r\n\t\tint hour=rem/60;\r\n\t\tint Minute=rem%60;\r\n\r\n    if(day&gt;0)\r\n\t\t    sb.append(day+&quot; day &quot;);\r\n\t\r\n  \tif(hour&gt;0)\r\n\t\t\tsb.append(hour+&quot; hour &quot;);\r\n\t\t\r\n    if(Minute&gt;0)\r\n\t\t\tsb.append(Minute+&quot; minute&quot;);\r\n\r\n        System.out.println(sb);","title":"how to convert minutes to days,hours,minutes","body":"<p>for best readability ,like it won't print 0 day or 0 hour or 0 minute.\ne.g- (if minute=1500,then it will print only 1 day 1 hour)     </p>\n\n<p>int minute=150;</p>\n\n<pre><code>    StringBuilder sb=new StringBuilder();\n\n    int day=minute/1440;\n    int rem=minute%1440;\n    int hour=rem/60;\n    int Minute=rem%60;\n\nif(day&gt;0)\n        sb.append(day+\" day \");\n\nif(hour&gt;0)\n        sb.append(hour+\" hour \");\n\nif(Minute&gt;0)\n        sb.append(Minute+\" minute\");\n\n    System.out.println(sb);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15243320,"reputation":409,"user_id":10998848,"display_name":"Kathy  "},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1555481112,"creation_date":1555481112,"answer_id":55720911,"question_id":2751073,"body_markdown":"```\r\nconst convertMinutesToDays = (minutes) =&gt; {\r\n    let hours\r\n    let days \r\n    let restMinutes\r\n    const onedayMinutes = 1440 //24*60\r\n\r\n    if(minutes &lt; 60){\r\n        return `${minutes} Minutes` \r\n    }else if(minutes &gt; 60 &amp;&amp; minutes &lt; onedayMinutes){\r\n        hours = Math.floor(minutes/60)\r\n        restMinutes = minutes%60\r\n        return `${hours} Hours ${restMinutes} Minutes`\r\n    }else{\r\n        days = Math.floor((minutes/60)/24)\r\n        restMinutes = minutes % onedayMinutes\r\n        hours = Math.floor(restMinutes/60) \r\n        restMinutes = restMinutes % 60\r\n        return `${days} Days ${hours} Hours ${restMinutes} Minutes`\r\n    }\r\n}\r\n```","title":"how to convert minutes to days,hours,minutes","body":"<pre><code>const convertMinutesToDays = (minutes) =&gt; {\n    let hours\n    let days \n    let restMinutes\n    const onedayMinutes = 1440 //24*60\n\n    if(minutes &lt; 60){\n        return `${minutes} Minutes` \n    }else if(minutes &gt; 60 &amp;&amp; minutes &lt; onedayMinutes){\n        hours = Math.floor(minutes/60)\n        restMinutes = minutes%60\n        return `${hours} Hours ${restMinutes} Minutes`\n    }else{\n        days = Math.floor((minutes/60)/24)\n        restMinutes = minutes % onedayMinutes\n        hours = Math.floor(restMinutes/60) \n        restMinutes = restMinutes % 60\n        return `${days} Days ${hours} Hours ${restMinutes} Minutes`\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":490531,"reputation":735,"user_id":2781636,"accept_rate":0,"display_name":"Ofer Gal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1599399917,"creation_date":1599399917,"answer_id":63764829,"question_id":2751073,"body_markdown":"(time / 24 / 60).toFixed(0) + &quot;:&quot; +(time / 60 % 24).toFixed(0) + &#39;:&#39; + (time % 60)\r\nDoes it best","title":"how to convert minutes to days,hours,minutes","body":"<p>(time / 24 / 60).toFixed(0) + &quot;:&quot; +(time / 60 % 24).toFixed(0) + ':' + (time % 60)\nDoes it best</p>\n"},{"tags":[],"owner":{"account_id":2179728,"reputation":73047,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1609236281,"creation_date":1609236281,"answer_id":65490449,"question_id":2751073,"body_markdown":"## Java-9 `java.time` Solution:\r\n\r\n    import java.time.Duration;\r\n    \r\n    public class Main {\r\n    \tpublic static void main(String[] args) {\r\n    \t\t// Test\r\n    \t\tSystem.out.println(minutesToDaysHoursMinutes(10080));\r\n    \t\tSystem.out.println(minutesToDaysHoursMinutes(1600));\r\n    \t}\r\n    \r\n    \tpublic static String minutesToDaysHoursMinutes(int time) {\r\n    \t\tDuration d = Duration.ofMinutes(time);\r\n    \t\tlong days = d.toDaysPart();\r\n    \t\tlong hours = d.toHoursPart();\r\n    \t\tlong minutes = d.toMinutesPart();\r\n    \t\treturn String.format(&quot;%d Day(s) %d Hour(s) %d Minute(s)&quot;, days, hours, minutes);\r\n    \t}\r\n    }\r\n\r\n**Output:**\r\n\r\n    7 Day(s) 0 Hour(s) 0 Minute(s)\r\n    1 Day(s) 2 Hour(s) 40 Minute(s)\r\n\r\n## Java-8 `java.time` Solution:\r\n\r\n    import java.time.Duration;\r\n    \r\n    public class Main {\r\n    \tpublic static void main(String[] args) {\r\n    \t\t// Test\r\n    \t\tSystem.out.println(minutesToDaysHoursMinutes(10080));\r\n    \t\tSystem.out.println(minutesToDaysHoursMinutes(1600));\r\n    \t}\r\n    \r\n    \tpublic static String minutesToDaysHoursMinutes(int time) {\r\n    \t\tDuration d = Duration.ofMinutes(time);\r\n    \t\tlong days = d.toDays();\r\n    \t\tlong hours = d.toHours() % 24;\r\n    \t\tlong minutes = d.toMinutes() % 60;\r\n    \t\treturn String.format(&quot;%d Day(s) %d Hour(s) %d Minute(s)&quot;, days, hours, minutes);\r\n    \t}\r\n    }\r\n\r\n**Output:**\r\n\r\n    7 Day(s) 0 Hour(s) 0 Minute(s)\r\n    1 Day(s) 2 Hour(s) 40 Minute(s)\r\n\r\nLearn about the modern date-time API from **[Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**.\r\n\r\n","title":"how to convert minutes to days,hours,minutes","body":"<h2>Java-9 <code>java.time</code> Solution:</h2>\n<pre><code>import java.time.Duration;\n\npublic class Main {\n    public static void main(String[] args) {\n        // Test\n        System.out.println(minutesToDaysHoursMinutes(10080));\n        System.out.println(minutesToDaysHoursMinutes(1600));\n    }\n\n    public static String minutesToDaysHoursMinutes(int time) {\n        Duration d = Duration.ofMinutes(time);\n        long days = d.toDaysPart();\n        long hours = d.toHoursPart();\n        long minutes = d.toMinutesPart();\n        return String.format(&quot;%d Day(s) %d Hour(s) %d Minute(s)&quot;, days, hours, minutes);\n    }\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>7 Day(s) 0 Hour(s) 0 Minute(s)\n1 Day(s) 2 Hour(s) 40 Minute(s)\n</code></pre>\n<h2>Java-8 <code>java.time</code> Solution:</h2>\n<pre><code>import java.time.Duration;\n\npublic class Main {\n    public static void main(String[] args) {\n        // Test\n        System.out.println(minutesToDaysHoursMinutes(10080));\n        System.out.println(minutesToDaysHoursMinutes(1600));\n    }\n\n    public static String minutesToDaysHoursMinutes(int time) {\n        Duration d = Duration.ofMinutes(time);\n        long days = d.toDays();\n        long hours = d.toHours() % 24;\n        long minutes = d.toMinutes() % 60;\n        return String.format(&quot;%d Day(s) %d Hour(s) %d Minute(s)&quot;, days, hours, minutes);\n    }\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>7 Day(s) 0 Hour(s) 0 Minute(s)\n1 Day(s) 2 Hour(s) 40 Minute(s)\n</code></pre>\n<p>Learn about the modern date-time API from <strong><a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"noreferrer\">Trail: Date Time</a></strong>.</p>\n"},{"tags":[],"owner":{"account_id":15276890,"reputation":11,"user_id":11022382,"display_name":"Asmaa Mohamed"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1613655896,"creation_date":1613655896,"answer_id":66261243,"question_id":2751073,"body_markdown":" \r\n just make method return string and take( int minuts)\r\nString getTextOfTime(int minuts) {return result\r\n\r\nString getTextOfTime(int minuts) {\r\n\r\n\r\n    int weeks = (-minuts / 10080).toInt();\r\n    int aboveWeeks = -minuts % 10080;\r\n    int days = (aboveWeeks / 1440).toInt();\r\n    int aboveDays = (aboveWeeks % 1440);\r\n    int hours = (aboveDays / 60).toInt();\r\n    int aboveHours = aboveDays % 60;\r\n    int minute = aboveHours;\r\n\r\n    String result = &quot;&quot;;\r\n\r\n    if (weeks != 0) {\r\n      result += weeks.toString();\r\n      if (weeks == 1) {\r\n        result += &quot; week &quot;;\r\n      } else {\r\n        result += &quot; weeks &quot;;\r\n      }\r\n    }\r\n\r\n    if (days != 0) {\r\n      result += days.toString();\r\n      if (days == 1) {\r\n        result += &quot; day &quot;;\r\n      } else {\r\n        result += &quot; days &quot;;\r\n      }\r\n    }\r\n\r\n    if (hours != 0) {\r\n      result += hours.toString();\r\n\r\n      if (hours == 1) {\r\n        result += &quot; hr &quot;;\r\n      } else {\r\n        result += &quot; hrs &quot;;\r\n      }\r\n    }\r\n\r\n    if (minute != 0) {\r\n      result += minute.toString();\r\n\r\n      if (minute == 1) {\r\n        result += &quot; min&quot;;\r\n      } else {\r\n        result += &quot; mins&quot;;\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n","title":"how to convert minutes to days,hours,minutes","body":"<p>just make method return string and take( int minuts)\nString getTextOfTime(int minuts) {return result</p>\n<p>String getTextOfTime(int minuts) {</p>\n<pre><code>int weeks = (-minuts / 10080).toInt();\nint aboveWeeks = -minuts % 10080;\nint days = (aboveWeeks / 1440).toInt();\nint aboveDays = (aboveWeeks % 1440);\nint hours = (aboveDays / 60).toInt();\nint aboveHours = aboveDays % 60;\nint minute = aboveHours;\n\nString result = &quot;&quot;;\n\nif (weeks != 0) {\n  result += weeks.toString();\n  if (weeks == 1) {\n    result += &quot; week &quot;;\n  } else {\n    result += &quot; weeks &quot;;\n  }\n}\n\nif (days != 0) {\n  result += days.toString();\n  if (days == 1) {\n    result += &quot; day &quot;;\n  } else {\n    result += &quot; days &quot;;\n  }\n}\n\nif (hours != 0) {\n  result += hours.toString();\n\n  if (hours == 1) {\n    result += &quot; hr &quot;;\n  } else {\n    result += &quot; hrs &quot;;\n  }\n}\n\nif (minute != 0) {\n  result += minute.toString();\n\n  if (minute == 1) {\n    result += &quot; min&quot;;\n  } else {\n    result += &quot; mins&quot;;\n  }\n}\nreturn result;\n</code></pre>\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":22064558,"reputation":41,"user_id":16326642,"display_name":"cre2"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1624790062,"creation_date":1624790062,"answer_id":68150226,"question_id":2751073,"body_markdown":"In case someone wants to use the accepted answer for JavaScript, time will be shown with decimals. In order to remove those decimals, you can use this code:\r\n\r\n    function timeConvert(time)\r\n    { \r\n       return parseInt(time/24/60) + &quot; days,&quot; + parseInt(time/60%24) + &#39; hours,&#39; + parseInt(time%60) + &quot; minutes&quot;;\r\n    }","title":"how to convert minutes to days,hours,minutes","body":"<p>In case someone wants to use the accepted answer for JavaScript, time will be shown with decimals. In order to remove those decimals, you can use this code:</p>\n<pre><code>function timeConvert(time)\n{ \n   return parseInt(time/24/60) + &quot; days,&quot; + parseInt(time/60%24) + ' hours,' + parseInt(time%60) + &quot; minutes&quot;;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2508113,"reputation":4573,"user_id":2181188,"accept_rate":97,"display_name":"Fandango68"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691113755,"creation_date":1691113755,"answer_id":76832491,"question_id":2751073,"body_markdown":"For those looking for an SQL version of this logic:\r\n\r\nwhere c.a_ARR is a Start Datetime, c.a_DEP is an End DateTime\r\n     \r\n\r\n           CASE WHEN DATEDIFF(minute, c.a_ARR, c.a_DEP)/60/24 = 0.0\r\n                THEN &#39;&#39;\r\n                ELSE FORMAT(DATEDIFF(minute, c.a_ARR, c.a_DEP)/60/24,&#39;0&#39;) + &#39;d&#39;\r\n           END +\r\n           CASE WHEN DATEDIFF(minute, c.a_ARR, c.a_DEP)/60%24 = 0.0 \r\n                THEN &#39;&#39;\r\n                ELSE FORMAT(DATEDIFF(minute, c.a_ARR, c.a_DEP)/60%24,&#39;0&#39;) + &#39;h&#39;\r\n           END +\r\n           CASE WHEN DATEDIFF(minute, c.a_ARR, c.a_DEP)%60 = 0.0\r\n                THEN &#39;&#39;\r\n                ELSE FORMAT(DATEDIFF(minute, c.a_ARR, c.a_DEP)%60,&#39;0&#39;) + &#39;m&#39;\r\n           END AS [Duration]","title":"how to convert minutes to days,hours,minutes","body":"<p>For those looking for an SQL version of this logic:</p>\n<p>where c.a_ARR is a Start Datetime, c.a_DEP is an End DateTime</p>\n<pre><code>       CASE WHEN DATEDIFF(minute, c.a_ARR, c.a_DEP)/60/24 = 0.0\n            THEN ''\n            ELSE FORMAT(DATEDIFF(minute, c.a_ARR, c.a_DEP)/60/24,'0') + 'd'\n       END +\n       CASE WHEN DATEDIFF(minute, c.a_ARR, c.a_DEP)/60%24 = 0.0 \n            THEN ''\n            ELSE FORMAT(DATEDIFF(minute, c.a_ARR, c.a_DEP)/60%24,'0') + 'h'\n       END +\n       CASE WHEN DATEDIFF(minute, c.a_ARR, c.a_DEP)%60 = 0.0\n            THEN ''\n            ELSE FORMAT(DATEDIFF(minute, c.a_ARR, c.a_DEP)%60,'0') + 'm'\n       END AS [Duration]\n</code></pre>\n"}],"owner":{"account_id":129577,"reputation":1319,"user_id":328256,"accept_rate":76,"display_name":"Eddinho"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73194,"favorite_count":0,"down_vote_count":1,"up_vote_count":21,"accepted_answer_id":2756975,"answer_count":15,"score":20,"last_activity_date":1691113755,"creation_date":1272738298,"question_id":2751073,"body_markdown":"how to convert minutes into days hours and minutes in java ( we have a week here , 7 days )\r\n\r\n     public String timeConvert(int time){\r\n       String t = &quot;&quot;;\r\n\r\n       int h = 00;\r\n       int m = 00;\r\n\r\n      // h= (int) (time / 60);\r\n      // m = (int) (time % 60);\r\n\r\n      // if(h&gt;=24) h=00;\r\n\r\n       if((time&gt;=0) &amp;&amp; (time&lt;=24*60)){\r\n          h= (int) (time / 60);\r\n          m = (int) (time % 60);\r\n       }else if((time&gt;24*60) &amp;&amp; (time&lt;=24*60*2)){\r\n           h= (int) (time / (1440));\r\n          m = (int) (time % (1440));\r\n       }else if((time&gt;24*60*2) &amp;&amp; (time&lt;=24*60*3)){\r\n           h= (int) (time / (2880));\r\n          m = (int) (time % (2880));\r\n       }else if((time&gt;24*60*3) &amp;&amp; (time&lt;=24*60*4)){\r\n           h= (int) (time / (2880*2));\r\n          m = (int) (time % (2880*2));\r\n       }else if((time&gt;24*60*4) &amp;&amp; (time&lt;=24*60*5)){\r\n           h= (int) (time / (2880*3));\r\n          m = (int) (time % (2880*3));\r\n       }else if((time&gt;24*60*5) &amp;&amp; (time&lt;=24*60*6)){\r\n           h= (int) (time / (2880*4));\r\n          m = (int) (time % (2880*4));\r\n       }else if((time&gt;24*60*6) &amp;&amp; (time&lt;=24*60*7)){\r\n           h= (int) (time / (2880*5));\r\n          m = (int) (time % (2880*5));\r\n       }\r\n\r\n       t =h+&quot;:&quot;+m ;\r\n       return t;\r\n     }\r\n\r\nI tried this but it dont work\r\n\r\nthanks","title":"how to convert minutes to days,hours,minutes","body":"<p>how to convert minutes into days hours and minutes in java ( we have a week here , 7 days )</p>\n\n<pre><code> public String timeConvert(int time){\n   String t = \"\";\n\n   int h = 00;\n   int m = 00;\n\n  // h= (int) (time / 60);\n  // m = (int) (time % 60);\n\n  // if(h&gt;=24) h=00;\n\n   if((time&gt;=0) &amp;&amp; (time&lt;=24*60)){\n      h= (int) (time / 60);\n      m = (int) (time % 60);\n   }else if((time&gt;24*60) &amp;&amp; (time&lt;=24*60*2)){\n       h= (int) (time / (1440));\n      m = (int) (time % (1440));\n   }else if((time&gt;24*60*2) &amp;&amp; (time&lt;=24*60*3)){\n       h= (int) (time / (2880));\n      m = (int) (time % (2880));\n   }else if((time&gt;24*60*3) &amp;&amp; (time&lt;=24*60*4)){\n       h= (int) (time / (2880*2));\n      m = (int) (time % (2880*2));\n   }else if((time&gt;24*60*4) &amp;&amp; (time&lt;=24*60*5)){\n       h= (int) (time / (2880*3));\n      m = (int) (time % (2880*3));\n   }else if((time&gt;24*60*5) &amp;&amp; (time&lt;=24*60*6)){\n       h= (int) (time / (2880*4));\n      m = (int) (time % (2880*4));\n   }else if((time&gt;24*60*6) &amp;&amp; (time&lt;=24*60*7)){\n       h= (int) (time / (2880*5));\n      m = (int) (time % (2880*5));\n   }\n\n   t =h+\":\"+m ;\n   return t;\n }\n</code></pre>\n\n<p>I tried this but it dont work</p>\n\n<p>thanks</p>\n"},{"tags":["java","jackson"],"answers":[{"tags":[],"owner":{"account_id":1510989,"reputation":21746,"user_id":1413133,"display_name":"Manos Nikolaidis"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691113489,"creation_date":1489507965,"answer_id":42791077,"question_id":42789248,"body_markdown":"You can try defining a constructor in `class A` annotated with `@JsonCreator`. Jackson is then able to use this constructor to create an `A` object and map the fields you expect in the JSON documents to the fields of `A`. Simplified example:\r\n\r\n\r\n    @Value\r\n    public class A {\r\n\r\n        @JsonUnwrapped\r\n        OrderKey key;\r\n\r\n        String description;\r\n\r\n        @JsonCreator\r\n        public A(@JsonProperty(&quot;key&quot;) String key,\r\n                 @JsonProperty(&quot;description&quot;) String description) {\r\n            this.key = new OrderKey(key);\r\n            this.description = description;\r\n        }\r\n    }\r\n\r\nNote that this constructor for `A` will prevent the creation of an `@AllArgsConstructor` constructor implied by `@Value`.\r\n\r\nIt is also possible to avoid constructor annotations with Java 8 and some extra modules. Check [this](https://stackoverflow.com/a/32272061/1413133) other answer of mine for example.","title":"Jackson Unwrap / Wrap Object","body":"<p>You can try defining a constructor in <code>class A</code> annotated with <code>@JsonCreator</code>. Jackson is then able to use this constructor to create an <code>A</code> object and map the fields you expect in the JSON documents to the fields of <code>A</code>. Simplified example:</p>\n<pre><code>@Value\npublic class A {\n\n    @JsonUnwrapped\n    OrderKey key;\n\n    String description;\n\n    @JsonCreator\n    public A(@JsonProperty(&quot;key&quot;) String key,\n             @JsonProperty(&quot;description&quot;) String description) {\n        this.key = new OrderKey(key);\n        this.description = description;\n    }\n}\n</code></pre>\n<p>Note that this constructor for <code>A</code> will prevent the creation of an <code>@AllArgsConstructor</code> constructor implied by <code>@Value</code>.</p>\n<p>It is also possible to avoid constructor annotations with Java 8 and some extra modules. Check <a href=\"https://stackoverflow.com/a/32272061/1413133\">this</a> other answer of mine for example.</p>\n"},{"tags":[],"owner":{"account_id":3786974,"reputation":85,"user_id":3144606,"accept_rate":75,"display_name":"Miguel Guilherme"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1489601906,"creation_date":1489512680,"answer_id":42792752,"question_id":42789248,"body_markdown":"I end up doing the serialize / deserialize inside the mixin itself, with this I can avoid the `@JsonUnwrapped` annotation and another mixin for the Key.\r\n\r\nMixin:\r\n\r\n    public class OrderMixin {\r\n\r\n\t\t@JsonDeserialize( using = OrderKeyDeserializer.class )\r\n\t\t@JsonSerialize( using = OrderKeySerializer.class )\r\n\t\t@JsonProperty( &quot;_key&quot; )\r\n\t\tOrderKey key;\r\n\r\n\t\t@JsonProperty( &quot;description&quot; )\r\n\t\tString description;\r\n\r\n\t\t@JsonProperty( &quot;amount&quot; )\r\n\t\tString amount;\r\n\r\n\t\t@JsonProperty( &quot;operation&quot; )\r\n\t\tOrder.Operation operation;\r\n\r\n\t\t@JsonProperty( &quot;creationDate&quot; )\r\n\t\tLocalDateTime creationDate;\r\n\r\n\t\tpublic static class OrderKeySerializer extends JsonSerializer&lt;OrderKey&gt; {\r\n\r\n\t\t\tpublic OrderKeySerializer() {\r\n\t\t\t\tsuper( OrderKey.class );\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void serialize( OrderKey value, JsonGenerator gen, SerializerProvider provider ) throws IOException {\r\n\t\t\t\tgen.writeString( value.getOrderId() );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic static class OrderKeyDeserializer extends JsonDeserializer&lt;OrderKey&gt; {\r\n\r\n\t\t\tpublic OrderKeyDeserializer() {\r\n\t\t\t\tsuper( OrderKey.class );\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic OrderKey deserialize( JsonParser jsonParser, DeserializationContext context ) throws IOException {\r\n\t\t\t\tJsonNode node = jsonParser.getCodec().readTree( jsonParser );\r\n\r\n\t\t\t\treturn OrderKey.get( node.asText() );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\nValue Objects:\r\n\r\n    @Value\r\n    public class Order implements Serializable {\r\n    \r\n      private static final long serialVersionUID = 901109456762331944L;\r\n    \r\n      OrderKey key;\r\n    \r\n      String description;\r\n    \r\n      String amount;\r\n    \r\n      Operation operation;\r\n    \r\n      LocalDateTime creationDate;\r\n    \r\n      @Value\r\n      public static class Operation {\r\n    \r\n        String id;\r\n    \r\n        String description;\r\n    \r\n        String status;\r\n    \r\n        LocalDateTime creationDate;\r\n      }\r\n    \r\n    }\r\n\r\n\r\n    @Value\r\n    public class OrderKey implements Serializable {\r\n      \r\n      private static final long serialVersionUID = -8102116676316181864L;\r\n\r\n      private String orderId;\r\n\r\n      public static OrderKey get( String orderId ) {\r\n          return new OrderKey( orderId );\r\n      }\r\n\r\n    }","title":"Jackson Unwrap / Wrap Object","body":"<p>I end up doing the serialize / deserialize inside the mixin itself, with this I can avoid the <code>@JsonUnwrapped</code> annotation and another mixin for the Key.</p>\n\n<p>Mixin:</p>\n\n<pre><code>public class OrderMixin {\n\n    @JsonDeserialize( using = OrderKeyDeserializer.class )\n    @JsonSerialize( using = OrderKeySerializer.class )\n    @JsonProperty( \"_key\" )\n    OrderKey key;\n\n    @JsonProperty( \"description\" )\n    String description;\n\n    @JsonProperty( \"amount\" )\n    String amount;\n\n    @JsonProperty( \"operation\" )\n    Order.Operation operation;\n\n    @JsonProperty( \"creationDate\" )\n    LocalDateTime creationDate;\n\n    public static class OrderKeySerializer extends JsonSerializer&lt;OrderKey&gt; {\n\n        public OrderKeySerializer() {\n            super( OrderKey.class );\n        }\n\n        @Override\n        public void serialize( OrderKey value, JsonGenerator gen, SerializerProvider provider ) throws IOException {\n            gen.writeString( value.getOrderId() );\n        }\n    }\n\n    public static class OrderKeyDeserializer extends JsonDeserializer&lt;OrderKey&gt; {\n\n        public OrderKeyDeserializer() {\n            super( OrderKey.class );\n        }\n\n        @Override\n        public OrderKey deserialize( JsonParser jsonParser, DeserializationContext context ) throws IOException {\n            JsonNode node = jsonParser.getCodec().readTree( jsonParser );\n\n            return OrderKey.get( node.asText() );\n        }\n    }\n\n}\n</code></pre>\n\n<p>Value Objects:</p>\n\n<pre><code>@Value\npublic class Order implements Serializable {\n\n  private static final long serialVersionUID = 901109456762331944L;\n\n  OrderKey key;\n\n  String description;\n\n  String amount;\n\n  Operation operation;\n\n  LocalDateTime creationDate;\n\n  @Value\n  public static class Operation {\n\n    String id;\n\n    String description;\n\n    String status;\n\n    LocalDateTime creationDate;\n  }\n\n}\n\n\n@Value\npublic class OrderKey implements Serializable {\n\n  private static final long serialVersionUID = -8102116676316181864L;\n\n  private String orderId;\n\n  public static OrderKey get( String orderId ) {\n      return new OrderKey( orderId );\n  }\n\n}\n</code></pre>\n"}],"owner":{"account_id":3786974,"reputation":85,"user_id":3144606,"accept_rate":75,"display_name":"Miguel Guilherme"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8580,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":42792752,"answer_count":2,"score":3,"last_activity_date":1691113489,"creation_date":1489503057,"question_id":42789248,"body_markdown":"I have a spring boot project and I have a class like this:\r\n\r\n    @Value\r\n    public class A {\r\n\r\n      @JsonUnwrapped\r\n      OrderKey key;\r\n\r\n      String description;\r\n\r\n      B b;\r\n      \r\n      @Value\r\n      public static class B {\r\n        String description;\r\n      }\r\n    }\r\n\r\n    @Value\r\n    public class OrderKey {\r\n\r\n      @JsonProperty( &quot;_key&quot; )\r\n      String id;\r\n    }\r\n\r\nI have mixins but added the Annotations in this example for brevity.\r\nThis works great when serializing to JSON, the issue is when I&#39;m trying to deserialize, probably it would work if exist some `@JsonWrapped` annotation.\r\n\r\nIn a nutshell, I&#39;m trying to use ArangoDB with rest and I can create / read documents but I need to use my own Value Objects and unfortunately I can&#39;t use the key as String, it&#39;s encapsulated by an `OrderKey`.\r\nThe `@Value` annotations is from lombok project.\r\n\r\nIs there any way to achieve this?\r\n\r\n","title":"Jackson Unwrap / Wrap Object","body":"<p>I have a spring boot project and I have a class like this:</p>\n<pre><code>@Value\npublic class A {\n\n  @JsonUnwrapped\n  OrderKey key;\n\n  String description;\n\n  B b;\n  \n  @Value\n  public static class B {\n    String description;\n  }\n}\n\n@Value\npublic class OrderKey {\n\n  @JsonProperty( &quot;_key&quot; )\n  String id;\n}\n</code></pre>\n<p>I have mixins but added the Annotations in this example for brevity.\nThis works great when serializing to JSON, the issue is when I'm trying to deserialize, probably it would work if exist some <code>@JsonWrapped</code> annotation.</p>\n<p>In a nutshell, I'm trying to use ArangoDB with rest and I can create / read documents but I need to use my own Value Objects and unfortunately I can't use the key as String, it's encapsulated by an <code>OrderKey</code>.\nThe <code>@Value</code> annotations is from lombok project.</p>\n<p>Is there any way to achieve this?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":5597184,"reputation":565,"user_id":4434569,"display_name":"javaBean007"},"score":0,"creation_date":1497199103,"post_id":44486109,"comment_id":75966390,"body_markdown":"What&#39;s the issue you are having? Your question states you have a problem getting x and y values of an object but how so? Also your comments in code state everything works above the calls to player.collect(...), will need to explain and see the player class code to see what&#39;s wrong if that is your issue","body":"What&#39;s the issue you are having? Your question states you have a problem getting x and y values of an object but how so? Also your comments in code state everything works above the calls to player.collect(...), will need to explain and see the player class code to see what&#39;s wrong if that is your issue"},{"owner":{"account_id":11082531,"reputation":21,"user_id":8137316,"display_name":"Aviraj Attri"},"score":0,"creation_date":1497215778,"post_id":44486109,"comment_id":75971764,"body_markdown":"i added the player class . my question is that when i invoke collect method from game class ( i pass dot1 as parameter, this line of code was given by our tutor to include in soln) , how do i get the x and y coordinates stored in dot 1 . also how can compare the current postion of the player and coordinates of the dot1(1,1) ??","body":"i added the player class . my question is that when i invoke collect method from game class ( i pass dot1 as parameter, this line of code was given by our tutor to include in soln) , how do i get the x and y coordinates stored in dot 1 . also how can compare the current postion of the player and coordinates of the dot1(1,1) ??"},{"owner":{"account_id":9335950,"reputation":170,"user_id":6930127,"display_name":"A. Cucci"},"score":0,"creation_date":1497216390,"post_id":44486109,"comment_id":75971902,"body_markdown":"Just a reminder - when displaying your code, please make sure it is formatted properly so that it is easier to read.","body":"Just a reminder - when displaying your code, please make sure it is formatted properly so that it is easier to read."}],"answers":[{"tags":[],"owner":{"account_id":10738788,"reputation":1979,"user_id":7902625,"accept_rate":100,"display_name":"Vasyl Lyashkevych"},"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1497201476,"creation_date":1497201476,"answer_id":44486588,"question_id":44486109,"body_markdown":"In my opinion, we can have some stages into the program. Let&#39;s go to untie your issue, for example for your code.\r\n\r\n    class Player {\r\n        \r\n        int id;\r\n        String name;\r\n        \r\n        int xPos;\r\n        int yPos;\r\n                \r\n        public Player(int x, int y){\r\n            this.xPos = x;\r\n            this.yPos = y;\r\n        }\r\n        \r\n        public void collect(Dot d){\r\n            \r\n        }\r\n        public void move(int dx, int dy){\r\n            \r\n        }\r\n    }\r\n\r\nAlso, we need to build:\r\n\r\n\r\n    class Dot {\r\n        int xPos;\r\n        int yPos;\r\n                \r\n        public Dot(int x, int y){\r\n            this.xPos = x;\r\n            this.yPos = y;\r\n        }\r\n    \r\n    }\r\n\r\nNow, your code will pass the coordinate for Player.\r\n","title":"Write a Java method that will remove a given character from a string objec","body":"<p>In my opinion, we can have some stages into the program. Let's go to untie your issue, for example for your code.</p>\n\n<pre><code>class Player {\n\n    int id;\n    String name;\n\n    int xPos;\n    int yPos;\n\n    public Player(int x, int y){\n        this.xPos = x;\n        this.yPos = y;\n    }\n\n    public void collect(Dot d){\n\n    }\n    public void move(int dx, int dy){\n\n    }\n}\n</code></pre>\n\n<p>Also, we need to build:</p>\n\n<pre><code>class Dot {\n    int xPos;\n    int yPos;\n\n    public Dot(int x, int y){\n        this.xPos = x;\n        this.yPos = y;\n    }\n\n}\n</code></pre>\n\n<p>Now, your code will pass the coordinate for Player.</p>\n"},{"tags":[],"owner":{"account_id":5597184,"reputation":565,"user_id":4434569,"display_name":"javaBean007"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1497238551,"creation_date":1497238551,"answer_id":44491071,"question_id":44486109,"body_markdown":"Based on your updated comments you can get x and y values from your Dot object by simply using dot notation on the Dot Object passed to your method. Updated your &quot;collect&quot; method and added comments to method passed on your requirements:\r\n\r\n    //Inside of player class\r\n        /**\r\n     * Add a “collect()” method to the Player class to collect the dot specified as the parameter \r\n     * if that is possible. The player can collect a dot only if the player is at the same position as the dot. When \r\n     * the player collects a dot, the player’s “collectedDots” count should be increased by 1. When the player \r\n     * collects a dot, the dot should disappear. To implement that, as part of the “collect()” method in the class \r\n     * Player, there should be a call to a “disappear()” method in the class Dot.\r\n     */\r\n    public void collect(Dot dot){\r\n    \tif(this.xCoordinate == dot.getX() &amp;&amp; this.yCoordinate == dot.getY()){\r\n    \t\t//increment the players count\r\n    \t\tsetCollectedDots(getCollectedDots() + 1);\r\n    \t\t\r\n    \t\t//remove the dot\r\n    \t\tdot.disappear();\r\n    \t}\r\n    }\r\n\r\nAdded method to for disappearing a Dot(assuming to remove the dot from play)\r\n\r\n    public class Dot {\r\n    \tprivate int x;\r\n    \tprivate int y;\r\n    \t\r\n    \tpublic Dot(int x, int y){\r\n    \t\tthis.x = x;\r\n    \t\tthis.y = y;\r\n    \t}\r\n    \t\r\n    \t/**\r\n    \t * Returns the full coordinates for the Dot[x,y]\r\n    \t * @return\r\n    \t */\r\n    \tpublic int[] getCoordinates(){\r\n    \t\tint[] coordinates = new int[2];\r\n    \t\t//place our coordinates into the array\r\n    \t\tcoordinates[0] = x;\r\n    \t\tcoordinates[1] = y;\r\n    \t\t\r\n    \t\treturn coordinates;\r\n    \t}\r\n    \r\n    \tpublic void disappear(){\r\n    \t\t//remove from the dot grid by setting to a negative position\r\n    \t\tsetX( -(this.x));\r\n    \t\tsetY(-(this.y));\r\n    \t}\r\n    \t\r\n    \t/**\r\n    \t * @return the x\r\n    \t */\r\n    \tpublic int getX() {\r\n    \t\treturn x;\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * @param x the x to set\r\n    \t */\r\n    \tpublic void setX(int x) {\r\n    \t\tthis.x = x;\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * @return the y\r\n    \t */\r\n    \tpublic int getY() {\r\n    \t\treturn y;\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * @param y the y to set\r\n    \t */\r\n    \tpublic void setY(int y) {\r\n    \t\tthis.y = y;\r\n    \t}\r\n    }","title":"Write a Java method that will remove a given character from a string objec","body":"<p>Based on your updated comments you can get x and y values from your Dot object by simply using dot notation on the Dot Object passed to your method. Updated your \"collect\" method and added comments to method passed on your requirements:</p>\n\n<pre><code>//Inside of player class\n    /**\n * Add a “collect()” method to the Player class to collect the dot specified as the parameter \n * if that is possible. The player can collect a dot only if the player is at the same position as the dot. When \n * the player collects a dot, the player’s “collectedDots” count should be increased by 1. When the player \n * collects a dot, the dot should disappear. To implement that, as part of the “collect()” method in the class \n * Player, there should be a call to a “disappear()” method in the class Dot.\n */\npublic void collect(Dot dot){\n    if(this.xCoordinate == dot.getX() &amp;&amp; this.yCoordinate == dot.getY()){\n        //increment the players count\n        setCollectedDots(getCollectedDots() + 1);\n\n        //remove the dot\n        dot.disappear();\n    }\n}\n</code></pre>\n\n<p>Added method to for disappearing a Dot(assuming to remove the dot from play)</p>\n\n<pre><code>public class Dot {\n    private int x;\n    private int y;\n\n    public Dot(int x, int y){\n        this.x = x;\n        this.y = y;\n    }\n\n    /**\n     * Returns the full coordinates for the Dot[x,y]\n     * @return\n     */\n    public int[] getCoordinates(){\n        int[] coordinates = new int[2];\n        //place our coordinates into the array\n        coordinates[0] = x;\n        coordinates[1] = y;\n\n        return coordinates;\n    }\n\n    public void disappear(){\n        //remove from the dot grid by setting to a negative position\n        setX( -(this.x));\n        setY(-(this.y));\n    }\n\n    /**\n     * @return the x\n     */\n    public int getX() {\n        return x;\n    }\n\n    /**\n     * @param x the x to set\n     */\n    public void setX(int x) {\n        this.x = x;\n    }\n\n    /**\n     * @return the y\n     */\n    public int getY() {\n        return y;\n    }\n\n    /**\n     * @param y the y to set\n     */\n    public void setY(int y) {\n        this.y = y;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":11082531,"reputation":21,"user_id":8137316,"display_name":"Aviraj Attri"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1636,"favorite_count":0,"down_vote_count":3,"up_vote_count":2,"closed_date":1691140253,"accepted_answer_id":44486588,"answer_count":2,"score":-1,"last_activity_date":1691110435,"creation_date":1497198513,"question_id":44486109,"body_markdown":"We can use the replaceAll method to replace all of the occurrences of a string with another string. The important point to note is that replaceAll() accepts String as argument, so you can use the Character class to create a string and use it to replace all the characters with an empty string.\r\n\r\n \r\n     ","title":"Write a Java method that will remove a given character from a string objec","body":"<p>We can use the replaceAll method to replace all of the occurrences of a string with another string. The important point to note is that replaceAll() accepts String as argument, so you can use the Character class to create a string and use it to replace all the characters with an empty string.</p>\n"},{"tags":["java","dto"],"comments":[{"owner":{"account_id":2119809,"reputation":50937,"user_id":1883316,"display_name":"Tim Roberts"},"score":1,"creation_date":1691098594,"post_id":76831711,"comment_id":135449883,"body_markdown":"So, is the idea here that an M contains both an A and a C, but for some reason you want each A and C to know which M&#39;s it is part of?  Someone has to be the master.  Either the M controls the creation of As and Cs, or vice versa, but not both.","body":"So, is the idea here that an M contains both an A and a C, but for some reason you want each A and C to know which M&#39;s it is part of?  Someone has to be the master.  Either the M controls the creation of As and Cs, or vice versa, but not both."},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1691100475,"post_id":76831711,"comment_id":135450128,"body_markdown":"As @TimRoberts already pointed out, in the context of a DTO, it seems pointless to have both relation-directions in a DTO; one should be sufficient. I also recommend looking at the concept of DDD, in particular roots and aggregates.","body":"As @TimRoberts already pointed out, in the context of a DTO, it seems pointless to have both relation-directions in a DTO; one should be sufficient. I also recommend looking at the concept of DDD, in particular roots and aggregates."},{"owner":{"account_id":75804,"reputation":94815,"user_id":217324,"accept_rate":96,"display_name":"Nathan Hughes"},"score":1,"creation_date":1691101609,"post_id":76831711,"comment_id":135450261,"body_markdown":"DTOs are supposed to be specialized to handle only what a particular view needs. Trying to make all-purpose DTOs may not make sense.","body":"DTOs are supposed to be specialized to handle only what a particular view needs. Trying to make all-purpose DTOs may not make sense."}],"answers":[{"tags":[],"owner":{"account_id":11384743,"reputation":121,"user_id":8346610,"display_name":"Leandro Rodrigues de Souza"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691109635,"creation_date":1691109635,"answer_id":76832318,"question_id":76831711,"body_markdown":"One way to solve this is to create a wrapper object for using your A_Entity and B_entity as lighter references:\r\n\r\n- The wrapper would be a subclass of A_Entity and B_Entity or you can create a more sophisticated mechanism using generics, annotations, and reflection;\r\n- The wrapper would hold the original object, but then would expose only the properties you need in order to have a parent reference and avoid returning the set that causes the circular reference;\r\n- Once you create the M_Entity, you&#39;d set up the references pointing to the wrapper instead of the original object.\r\n\r\nThis is a very similar approach that frameworks such as Hibernate use to handle those situations. It also works fine in serialization scenarios.\r\n\r\nI might add that if you are reflecting your Entities as DTO (I cannot tell that per your description, since I am aware that you are hiding parts of no interest to the problem) your design should be reviewed. If that is the case, your DTO is only adding complexity to your code. If you, for instance, expose data through REST API, having those DTOs may be pointless since there are other methods to avoid the exposure of unwanted details.\r\n\r\nI hope this helps :)","title":"What to do to avoid stack overflow using DTOs?","body":"<p>One way to solve this is to create a wrapper object for using your A_Entity and B_entity as lighter references:</p>\n<ul>\n<li>The wrapper would be a subclass of A_Entity and B_Entity or you can create a more sophisticated mechanism using generics, annotations, and reflection;</li>\n<li>The wrapper would hold the original object, but then would expose only the properties you need in order to have a parent reference and avoid returning the set that causes the circular reference;</li>\n<li>Once you create the M_Entity, you'd set up the references pointing to the wrapper instead of the original object.</li>\n</ul>\n<p>This is a very similar approach that frameworks such as Hibernate use to handle those situations. It also works fine in serialization scenarios.</p>\n<p>I might add that if you are reflecting your Entities as DTO (I cannot tell that per your description, since I am aware that you are hiding parts of no interest to the problem) your design should be reviewed. If that is the case, your DTO is only adding complexity to your code. If you, for instance, expose data through REST API, having those DTOs may be pointless since there are other methods to avoid the exposure of unwanted details.</p>\n<p>I hope this helps :)</p>\n"}],"owner":{"account_id":11290872,"reputation":23,"user_id":8280023,"display_name":"Romualdo Rubens de Freitas"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1691109635,"creation_date":1691098258,"question_id":76831711,"body_markdown":"I&#39;m going to face a Stack Overflow problem (it&#39;s so obvious I didn&#39;t even need to run the code to find out) and I want to rely on the group&#39;s knowledge and experience to find a suitable solution.\r\n\r\nI have the following entity classes (Jakarta Persistence or JPA, if you prefer) (for the sake of questioning, they are simplified):\r\n\r\n```\r\npublic class A_Entity {\r\n   private Set&lt;M_Entity&gt; ms;\r\n}\r\n\r\npublic class C_Entity {\r\n   private Set&lt;M_Entity&gt; ms;\r\n}\r\n\r\npublic class M_Entity {\r\n   private A_Entity a_entity;\r\n   private C_Entity c_entity;\r\n}\r\n```\r\n\r\nAs you can see, **M_Entity** is a relationship class (it contains other attributes, hence its existence). In addition, they contain annotations for the Persistence API and for validation (Jakarta Bean Validation). So for each one, I&#39;ve declared classes that implement the Data Transfer Object (DTO) pattern:\r\n\r\n```\r\npublic class A_DTO {\r\n   private Set&lt;M_DTO&gt; ms;\r\n}\r\n\r\npublic class C_DTO {\r\n   private Set&lt;M_DTO&gt; ms;\r\n}\r\n\r\npublic class M_DTO {\r\n   private A_DTO a_dto;\r\n   private C_DTO c_dto;\r\n}\r\n```\r\n\r\nNext, I declared a mapping interface (to train/reinforce knowledge and practice, I preferred not to use mapping libraries such as [MapStruct][1] and [ModelMapper][2]) (there&#39;s a good [article][3] comparing both):\r\n\r\n```\r\npublic interface EntityDTO&lt;T1, T2&gt; {\r\n   T1 toEntity(T2 dto);\r\n   T2 toDTO(T1 entity);\r\n}\r\n```\r\n\r\nFinally, I declared three implementations:\r\n\r\n```\r\npublic class A_Mapper implements EntityDTO&lt;A_Entity, A_DTO&gt; {\r\n   public A_Entity toEntity(A_DTO dto) {\r\n      Set&lt;M_Entity&gt; ms = new HashSet&lt;&gt;();\r\n      A_Entity      a  = new A_Entity();\r\n\r\n      for (M_DTO m_dto : dto.getMs())\r\n         ms.add((new M_Mapper()).toEntity(m_dto));\r\n\r\n      a.setMs(ms);\r\n   }\r\n\r\n   public A_DTO toDTO(A_Entity entity) {\r\n      Set&lt;M_DTO&gt; ms = new HashSet&lt;&gt;();\r\n      A_DTO      a  = new A_DTO();\r\n\r\n      for (M_Entity m_entity: entity.getMs())\r\n         ms.add((new M_Mapper()).toDTO(m_entity));\r\n\r\n      a.setMs(ms);\r\n   }\r\n}\r\n\r\npublic class C_Mapper implements EntityDTO&lt;C_Entity, C_DTO&gt; {\r\n   public C_Entity toEntity(C_DTO dto) {\r\n      Set&lt;M_Entity&gt; ms = new HashSet&lt;&gt;();\r\n      C_Entity      c  = new C_Entity();\r\n\r\n      for (M_DTO m_dto : dto.getMs())\r\n         c.add((M_Mapper()).toEntity(m_dto));\r\n\r\n      c.setMs(ms);\r\n   }\r\n\r\n   public C_DTO toDTO(C_Entity entity) {\r\n      Set&lt;M_DTO&gt; ms = new HashSet&lt;&gt;();\r\n      C_DTO      c  = new C_DTO();\r\n\r\n      for (M_Entity m_entity : entity.getMs())\r\n         c.add((M_Mapper()).toDTO(m_entity));\r\n\r\n      c.setMs(ms);\r\n   }\r\n}\r\n\r\npublic class M_Mapper implements EntityDTO&lt;M_Entity, M_DTO&gt; {\r\n   public M_Entity toEntity(M_DTO dto) {\r\n      M_Entity m = new M_Entity();\r\n\r\n      m.setA_Entity((new A_Mapper()).toEntity(dto.getA_DTO()));\r\n      m.setC_Entity((new C_Mapper()).toEntity(dto.getC_DTO()));\r\n   }\r\n\r\n   public M_DTO toDTO(M_Entity entity) {\r\n      M_DTO m = new M_DTO();\r\n\r\n      m.setA_DTO((new A_Mapper()).toDTO(entity.getA_Entity()));\r\n      m.setC_DTO((new C_Mapper()).toDTO(dto.getC_Entity()));\r\n   }\r\n}\r\n```\r\n\r\nWhen mapping for class **M** occurs, its methods invoke mapping for **A** and **C**, which in turn invoke mapping for **M**, which invokes for **A** and **C**.........and Boom!!!! Stack Overflow.\r\n\r\nCan someone who has already gone through this problem or has an idea, even if esoteric - as long as it works properly - &quot;to give me a light&quot;???\r\n\r\n  [1]: https://mapstruct.org/\r\n  [2]: https://modelmapper.org/\r\n  [3]: https://dzone.com/articles/comparing-modelmapper-and-mapstruct-in-java-the-po","title":"What to do to avoid stack overflow using DTOs?","body":"<p>I'm going to face a Stack Overflow problem (it's so obvious I didn't even need to run the code to find out) and I want to rely on the group's knowledge and experience to find a suitable solution.</p>\n<p>I have the following entity classes (Jakarta Persistence or JPA, if you prefer) (for the sake of questioning, they are simplified):</p>\n<pre><code>public class A_Entity {\n   private Set&lt;M_Entity&gt; ms;\n}\n\npublic class C_Entity {\n   private Set&lt;M_Entity&gt; ms;\n}\n\npublic class M_Entity {\n   private A_Entity a_entity;\n   private C_Entity c_entity;\n}\n</code></pre>\n<p>As you can see, <strong>M_Entity</strong> is a relationship class (it contains other attributes, hence its existence). In addition, they contain annotations for the Persistence API and for validation (Jakarta Bean Validation). So for each one, I've declared classes that implement the Data Transfer Object (DTO) pattern:</p>\n<pre><code>public class A_DTO {\n   private Set&lt;M_DTO&gt; ms;\n}\n\npublic class C_DTO {\n   private Set&lt;M_DTO&gt; ms;\n}\n\npublic class M_DTO {\n   private A_DTO a_dto;\n   private C_DTO c_dto;\n}\n</code></pre>\n<p>Next, I declared a mapping interface (to train/reinforce knowledge and practice, I preferred not to use mapping libraries such as <a href=\"https://mapstruct.org/\" rel=\"nofollow noreferrer\">MapStruct</a> and <a href=\"https://modelmapper.org/\" rel=\"nofollow noreferrer\">ModelMapper</a>) (there's a good <a href=\"https://dzone.com/articles/comparing-modelmapper-and-mapstruct-in-java-the-po\" rel=\"nofollow noreferrer\">article</a> comparing both):</p>\n<pre><code>public interface EntityDTO&lt;T1, T2&gt; {\n   T1 toEntity(T2 dto);\n   T2 toDTO(T1 entity);\n}\n</code></pre>\n<p>Finally, I declared three implementations:</p>\n<pre><code>public class A_Mapper implements EntityDTO&lt;A_Entity, A_DTO&gt; {\n   public A_Entity toEntity(A_DTO dto) {\n      Set&lt;M_Entity&gt; ms = new HashSet&lt;&gt;();\n      A_Entity      a  = new A_Entity();\n\n      for (M_DTO m_dto : dto.getMs())\n         ms.add((new M_Mapper()).toEntity(m_dto));\n\n      a.setMs(ms);\n   }\n\n   public A_DTO toDTO(A_Entity entity) {\n      Set&lt;M_DTO&gt; ms = new HashSet&lt;&gt;();\n      A_DTO      a  = new A_DTO();\n\n      for (M_Entity m_entity: entity.getMs())\n         ms.add((new M_Mapper()).toDTO(m_entity));\n\n      a.setMs(ms);\n   }\n}\n\npublic class C_Mapper implements EntityDTO&lt;C_Entity, C_DTO&gt; {\n   public C_Entity toEntity(C_DTO dto) {\n      Set&lt;M_Entity&gt; ms = new HashSet&lt;&gt;();\n      C_Entity      c  = new C_Entity();\n\n      for (M_DTO m_dto : dto.getMs())\n         c.add((M_Mapper()).toEntity(m_dto));\n\n      c.setMs(ms);\n   }\n\n   public C_DTO toDTO(C_Entity entity) {\n      Set&lt;M_DTO&gt; ms = new HashSet&lt;&gt;();\n      C_DTO      c  = new C_DTO();\n\n      for (M_Entity m_entity : entity.getMs())\n         c.add((M_Mapper()).toDTO(m_entity));\n\n      c.setMs(ms);\n   }\n}\n\npublic class M_Mapper implements EntityDTO&lt;M_Entity, M_DTO&gt; {\n   public M_Entity toEntity(M_DTO dto) {\n      M_Entity m = new M_Entity();\n\n      m.setA_Entity((new A_Mapper()).toEntity(dto.getA_DTO()));\n      m.setC_Entity((new C_Mapper()).toEntity(dto.getC_DTO()));\n   }\n\n   public M_DTO toDTO(M_Entity entity) {\n      M_DTO m = new M_DTO();\n\n      m.setA_DTO((new A_Mapper()).toDTO(entity.getA_Entity()));\n      m.setC_DTO((new C_Mapper()).toDTO(dto.getC_Entity()));\n   }\n}\n</code></pre>\n<p>When mapping for class <strong>M</strong> occurs, its methods invoke mapping for <strong>A</strong> and <strong>C</strong>, which in turn invoke mapping for <strong>M</strong>, which invokes for <strong>A</strong> and <strong>C</strong>.........and Boom!!!! Stack Overflow.</p>\n<p>Can someone who has already gone through this problem or has an idea, even if esoteric - as long as it works properly - &quot;to give me a light&quot;???</p>\n"},{"tags":["java","json","comparator","jsonassert"],"owner":{"account_id":16028984,"reputation":1,"user_id":11568488,"display_name":"Sumanth R3ddy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691108823,"creation_date":1691108823,"question_id":76832284,"body_markdown":"I am trying to compare two JSON structures using Custom comparator of JSONAssert package. For example,  \r\nData1: \r\n\r\n```\r\n{\r\n  &quot;name&quot;: &quot;John&quot;,\r\n  &quot;details&quot;: {\r\n    &quot;age&quot;: 30,\r\n    &quot;State&quot;: {\r\n      &quot;City&quot;: &quot;Buffalo&quot;,\r\n      &quot;Country&quot; :[ \r\n        {\r\n        &quot;Classification&quot; : &quot;USA&quot;,\r\n        &quot;Data&quot; : &quot;sample1&quot;\r\n        },\r\n        {\r\n        &quot;Classification&quot; : &quot;Canada&quot;,\r\n        &quot;Data&quot; : &quot;sample1&quot;\r\n        }\r\n      ]\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n  \r\nI want to ignore the whole array index 0 when the classification has the value &quot;USA&quot; i.e I want to ignore even the data field in the first element of a country when the classification value is &quot;USA&quot;.\r\n\r\n```@Test\r\n    public void compareJsonStrIgnoringDiffInArray() throws JSONException {\r\n        String errorMsg = &quot;&quot;;\r\n        String expectedJsonStr = &quot;{\\&quot;name\\&quot;:\\&quot;John\\&quot;,\\&quot;details\\&quot;:{\\&quot;age\\&quot;:30,\\&quot;State\\&quot;:{\\&quot;City\\&quot;:\\&quot;Buffalo\\&quot;,\\&quot;Country\\&quot;:[{\\&quot;Classification\\&quot;:\\&quot;USA\\&quot;,\\&quot;Data\\&quot;:\\&quot;sample1\\&quot;},{\\&quot;Classification\\&quot;:\\&quot;Canada\\&quot;,\\&quot;Data\\&quot;:\\&quot;sample1\\&quot;}]}}}&quot;;\r\n\r\n        String actualJsonStr = &quot;{\\&quot;name\\&quot;:\\&quot;John\\&quot;,\\&quot;details\\&quot;:{\\&quot;age\\&quot;:30,\\&quot;State\\&quot;:{\\&quot;City\\&quot;:\\&quot;Buffalo\\&quot;,\\&quot;Country\\&quot;:[{\\&quot;Classification\\&quot;:\\&quot;USA\\&quot;,\\&quot;Data\\&quot;:\\&quot;sample1\\&quot;},{\\&quot;Classification\\&quot;:\\&quot;Canada\\&quot;,\\&quot;Data\\&quot;:\\&quot;sample1\\&quot;}]}}}&quot;;\r\n\r\n        //Create custom comparator which compares two json strings but ignores reporting any differences for anArray[n].id values\r\n        //as they are a tolerated difference\r\n\r\n        ArrayValueMatcher&lt;Object&gt; arrValMatch = new ArrayValueMatcher&lt;&gt;(new CustomComparator(\r\n                JSONCompareMode.NON_EXTENSIBLE,\r\n                new Customization(&quot;Country[*].classification&quot;, (o1, o2) -&gt; true)));\r\n\r\n        Customization arrayValueMatchCustomization = new Customization(&quot;Country&quot;, arrValMatch);\r\n        CustomComparator customArrayValueComparator = new CustomComparator(\r\n                JSONCompareMode.NON_EXTENSIBLE, \r\n                arrayValueMatchCustomization);\r\n        JSONAssert.assertEquals(expectedJsonStr, actualJsonStr, customArrayValueComparator);\r\n    }\r\n\r\n```\r\n\r\n\r\nI have tried this implementation but it ignores all the classification values in every index. But i only want one index to be ignored including the data element when the classification value is &quot;USA&quot;.\r\n\r\nRef: https://stackoverflow.com/questions/50919776/ignore-specific-node-within-array-when-comparing-two-json-in-java","title":"Ignore specific node within array when the element inside the node has a specific value while comparing two JSON in Java","body":"<p>I am trying to compare two JSON structures using Custom comparator of JSONAssert package. For example,<br />\nData1:</p>\n<pre><code>{\n  &quot;name&quot;: &quot;John&quot;,\n  &quot;details&quot;: {\n    &quot;age&quot;: 30,\n    &quot;State&quot;: {\n      &quot;City&quot;: &quot;Buffalo&quot;,\n      &quot;Country&quot; :[ \n        {\n        &quot;Classification&quot; : &quot;USA&quot;,\n        &quot;Data&quot; : &quot;sample1&quot;\n        },\n        {\n        &quot;Classification&quot; : &quot;Canada&quot;,\n        &quot;Data&quot; : &quot;sample1&quot;\n        }\n      ]\n    }\n  }\n}\n</code></pre>\n<p>I want to ignore the whole array index 0 when the classification has the value &quot;USA&quot; i.e I want to ignore even the data field in the first element of a country when the classification value is &quot;USA&quot;.</p>\n<pre><code>    public void compareJsonStrIgnoringDiffInArray() throws JSONException {\n        String errorMsg = &quot;&quot;;\n        String expectedJsonStr = &quot;{\\&quot;name\\&quot;:\\&quot;John\\&quot;,\\&quot;details\\&quot;:{\\&quot;age\\&quot;:30,\\&quot;State\\&quot;:{\\&quot;City\\&quot;:\\&quot;Buffalo\\&quot;,\\&quot;Country\\&quot;:[{\\&quot;Classification\\&quot;:\\&quot;USA\\&quot;,\\&quot;Data\\&quot;:\\&quot;sample1\\&quot;},{\\&quot;Classification\\&quot;:\\&quot;Canada\\&quot;,\\&quot;Data\\&quot;:\\&quot;sample1\\&quot;}]}}}&quot;;\n\n        String actualJsonStr = &quot;{\\&quot;name\\&quot;:\\&quot;John\\&quot;,\\&quot;details\\&quot;:{\\&quot;age\\&quot;:30,\\&quot;State\\&quot;:{\\&quot;City\\&quot;:\\&quot;Buffalo\\&quot;,\\&quot;Country\\&quot;:[{\\&quot;Classification\\&quot;:\\&quot;USA\\&quot;,\\&quot;Data\\&quot;:\\&quot;sample1\\&quot;},{\\&quot;Classification\\&quot;:\\&quot;Canada\\&quot;,\\&quot;Data\\&quot;:\\&quot;sample1\\&quot;}]}}}&quot;;\n\n        //Create custom comparator which compares two json strings but ignores reporting any differences for anArray[n].id values\n        //as they are a tolerated difference\n\n        ArrayValueMatcher&lt;Object&gt; arrValMatch = new ArrayValueMatcher&lt;&gt;(new CustomComparator(\n                JSONCompareMode.NON_EXTENSIBLE,\n                new Customization(&quot;Country[*].classification&quot;, (o1, o2) -&gt; true)));\n\n        Customization arrayValueMatchCustomization = new Customization(&quot;Country&quot;, arrValMatch);\n        CustomComparator customArrayValueComparator = new CustomComparator(\n                JSONCompareMode.NON_EXTENSIBLE, \n                arrayValueMatchCustomization);\n        JSONAssert.assertEquals(expectedJsonStr, actualJsonStr, customArrayValueComparator);\n    }\n\n</code></pre>\n<p>I have tried this implementation but it ignores all the classification values in every index. But i only want one index to be ignored including the data element when the classification value is &quot;USA&quot;.</p>\n<p>Ref: <a href=\"https://stackoverflow.com/questions/50919776/ignore-specific-node-within-array-when-comparing-two-json-in-java\">Ignore specific node within array when comparing two JSON in Java</a></p>\n"},{"tags":["java","eclipse","spring","maven","spring-mvc"],"comments":[{"owner":{"account_id":1064245,"reputation":85256,"user_id":1065197,"accept_rate":88,"display_name":"Luiggi Mendoza"},"score":1,"creation_date":1373513173,"post_id":17584495,"comment_id":25588482,"body_markdown":"*Possible root causes include a too low setting for -Xss and illegal cyclic inheritance dependencies.* I guess that message already answers you.","body":"<i>Possible root causes include a too low setting for -Xss and illegal cyclic inheritance dependencies.</i> I guess that message already answers you."},{"owner":{"account_id":82626,"reputation":12122,"user_id":232175,"accept_rate":62,"display_name":"Matthias"},"score":1,"creation_date":1373513301,"post_id":17584495,"comment_id":25588509,"body_markdown":"As said: I already increased the stack size. And I can&#39;t change the inheritance of some external dependencies. I just need some way to exclude them from scanning.","body":"As said: I already increased the stack size. And I can&#39;t change the inheritance of some external dependencies. I just need some way to exclude them from scanning."},{"owner":{"account_id":1064245,"reputation":85256,"user_id":1065197,"accept_rate":88,"display_name":"Luiggi Mendoza"},"score":0,"creation_date":1373513673,"post_id":17584495,"comment_id":25588578,"body_markdown":"Where you raised the stack size?","body":"Where you raised the stack size?"},{"owner":{"account_id":82626,"reputation":12122,"user_id":232175,"accept_rate":62,"display_name":"Matthias"},"score":0,"creation_date":1373523734,"post_id":17584495,"comment_id":25591351,"body_markdown":"In the &quot;Run configuration&quot; setting of my project for the server under &quot;Arguments - VM arguments&quot;, I set &quot;-Xss4m&quot; (was Xss768k or so before).","body":"In the &quot;Run configuration&quot; setting of my project for the server under &quot;Arguments - VM arguments&quot;, I set &quot;-Xss4m&quot; (was Xss768k or so before)."}],"answers":[{"tags":[],"owner":{"account_id":2161358,"reputation":42669,"user_id":1915448,"accept_rate":96,"display_name":"g00glen00b"},"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1373523830,"creation_date":1373523830,"answer_id":17586412,"question_id":17584495,"body_markdown":"You have a cyclic dependency. `org.bouncycastle.asn1.ASN1EncodableVector` depends on `org.bouncycastle.asn1.DEREncodableVector` which depends back on `org.bouncycastle.asn1.ASN1EncodableVector` which ... . This is an infinite cycle and so you&#39;re getting a `StackOverflowException`.\r\n\r\nIf you have the Maven plugin installed in Eclipse, look at the **Dependency Hierarchy** and look for these classes. I found someone with a similar issue [here][1], he solved it by looking at the dependency tree and then adding an exclusion to break the cyclic dependency.\r\n\r\n\r\n  [1]: http://tomcat.10.x6.nabble.com/Tomcat-7-0-39-randoms-start-and-crash-tp4997661p4997671.html","title":"Unable to complete the scan for annotations for web application [/app] due to a StackOverflowError","body":"<p>You have a cyclic dependency. <code>org.bouncycastle.asn1.ASN1EncodableVector</code> depends on <code>org.bouncycastle.asn1.DEREncodableVector</code> which depends back on <code>org.bouncycastle.asn1.ASN1EncodableVector</code> which ... . This is an infinite cycle and so you're getting a <code>StackOverflowException</code>.</p>\n\n<p>If you have the Maven plugin installed in Eclipse, look at the <strong>Dependency Hierarchy</strong> and look for these classes. I found someone with a similar issue <a href=\"http://tomcat.10.x6.nabble.com/Tomcat-7-0-39-randoms-start-and-crash-tp4997661p4997671.html\" rel=\"noreferrer\">here</a>, he solved it by looking at the dependency tree and then adding an exclusion to break the cyclic dependency.</p>\n"},{"tags":[],"owner":{"account_id":1105503,"reputation":1137,"user_id":1096977,"display_name":"amindri"},"down_vote_count":0,"up_vote_count":96,"is_accepted":true,"score":96,"last_activity_date":1691108549,"creation_date":1381904931,"answer_id":19396597,"question_id":17584495,"body_markdown":"In my case the `org.bouncycastle.asn1.DEREncodableVector` class, which was causing the cyclic dependency, was served by two jars in the class path.\r\n\r\n`bcprov-jdk15on-1.47.jar` and `bcprov-jdk16-1.45.jar`\r\n\r\nExcluded the unwanted jar(bcprov-jdk16-1.45.jar) and it worked well \r\n\r\nExample: If apache CFX web services security is adding the unnecessary bcprov maven dependency, then it can be excluded as follows\r\n\r\n\r\n     \r\n \r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;cxf-rt-ws-security&lt;/artifactId&gt;\r\n    \t&lt;version&gt;${org.apache.cxf.version}&lt;/version&gt;\r\n    \t&lt;exclusions&gt;\r\n    \t\t&lt;exclusion&gt;\r\n    \t\t  &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\r\n    \t\t  &lt;artifactId&gt;bcprov-jdk15on&lt;/artifactId&gt;\r\n    \t\t&lt;/exclusion&gt;\r\n    \t&lt;/exclusions&gt;\r\n     &lt;/dependency&gt;\r\n\r\n\r\n","title":"Unable to complete the scan for annotations for web application [/app] due to a StackOverflowError","body":"<p>In my case the <code>org.bouncycastle.asn1.DEREncodableVector</code> class, which was causing the cyclic dependency, was served by two jars in the class path.</p>\n<p><code>bcprov-jdk15on-1.47.jar</code> and <code>bcprov-jdk16-1.45.jar</code></p>\n<p>Excluded the unwanted jar(bcprov-jdk16-1.45.jar) and it worked well</p>\n<p>Example: If apache CFX web services security is adding the unnecessary bcprov maven dependency, then it can be excluded as follows</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\n    &lt;artifactId&gt;cxf-rt-ws-security&lt;/artifactId&gt;\n    &lt;version&gt;${org.apache.cxf.version}&lt;/version&gt;\n    &lt;exclusions&gt;\n        &lt;exclusion&gt;\n          &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\n          &lt;artifactId&gt;bcprov-jdk15on&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n    &lt;/exclusions&gt;\n &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1389220,"reputation":869,"user_id":1320479,"accept_rate":28,"display_name":"NiBE"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1401354981,"creation_date":1401354981,"answer_id":23929793,"question_id":17584495,"body_markdown":"I had the same issue I remove every trace of bouncycastle library in the buildConfig file. No trace in dependecy or excludes. Just add the plug in crypto.2.0 and everything works fine!","title":"Unable to complete the scan for annotations for web application [/app] due to a StackOverflowError","body":"<p>I had the same issue I remove every trace of bouncycastle library in the buildConfig file. No trace in dependecy or excludes. Just add the plug in crypto.2.0 and everything works fine!</p>\n"},{"tags":[],"owner":{"account_id":4714327,"reputation":1681,"user_id":3813962,"accept_rate":0,"display_name":"yonia"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1407161239,"creation_date":1407161239,"answer_id":25120641,"question_id":17584495,"body_markdown":"I had the same problem and fixed it finally .\r\nGo to your pom and search for bouncycastle \r\nYou should see more than one  exclude one of them and it should fix it ","title":"Unable to complete the scan for annotations for web application [/app] due to a StackOverflowError","body":"<p>I had the same problem and fixed it finally .\nGo to your pom and search for bouncycastle \nYou should see more than one  exclude one of them and it should fix it </p>\n"},{"tags":[],"owner":{"account_id":6152731,"reputation":11,"user_id":4796697,"display_name":"Thomas Raehalme"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1439796400,"creation_date":1439796400,"answer_id":32044859,"question_id":17584495,"body_markdown":"Also double check your `lib` folder under Tomcat to make sure the duplicate dependency is not present there.","title":"Unable to complete the scan for annotations for web application [/app] due to a StackOverflowError","body":"<p>Also double check your <code>lib</code> folder under Tomcat to make sure the duplicate dependency is not present there.</p>\n"},{"tags":[],"owner":{"account_id":2883111,"reputation":191,"user_id":2473519,"display_name":"user2473519"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1457606521,"creation_date":1457606521,"answer_id":35914143,"question_id":17584495,"body_markdown":"I just encountered this problem. Others already give the answer to this problem. I would say something else.\r\n\r\nI guess that you are using `maven-shade-plugin` or something alike that packaging all dependencies into an Uber jar, right?\r\n\r\nYou can see from `grepcode` that `bcprov-jdk15on:1.52` defines `DEREncodableVector` as\r\n\r\n    public class DEREncodableVector extends ASN1EncodableVector\r\n\r\nWhile `bcprov-jdk14:1.38` defines `ASN1EncodableVector` as\r\n\r\n    public class ASN1EncodableVector extends DEREncodableVector\r\nAnd with `maven-shade-plugin`, it would randomly choose a class when two or more same classes exist. And when it chooses this combination, cyclic dependency happens. If it choose other combinations, your application may work fine. \r\nIt matches what you described \r\n&gt; Yet, most of the times, it doesn&#39;t work.\r\n\r\nIt&#39;s a probabilistic event.","title":"Unable to complete the scan for annotations for web application [/app] due to a StackOverflowError","body":"<p>I just encountered this problem. Others already give the answer to this problem. I would say something else.</p>\n\n<p>I guess that you are using <code>maven-shade-plugin</code> or something alike that packaging all dependencies into an Uber jar, right?</p>\n\n<p>You can see from <code>grepcode</code> that <code>bcprov-jdk15on:1.52</code> defines <code>DEREncodableVector</code> as</p>\n\n<pre><code>public class DEREncodableVector extends ASN1EncodableVector\n</code></pre>\n\n<p>While <code>bcprov-jdk14:1.38</code> defines <code>ASN1EncodableVector</code> as</p>\n\n<pre><code>public class ASN1EncodableVector extends DEREncodableVector\n</code></pre>\n\n<p>And with <code>maven-shade-plugin</code>, it would randomly choose a class when two or more same classes exist. And when it chooses this combination, cyclic dependency happens. If it choose other combinations, your application may work fine. \nIt matches what you described </p>\n\n<blockquote>\n  <p>Yet, most of the times, it doesn't work.</p>\n</blockquote>\n\n<p>It's a probabilistic event.</p>\n"},{"tags":[],"owner":{"account_id":247773,"reputation":15733,"user_id":522729,"accept_rate":69,"display_name":"Victor Grazi"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1466609193,"creation_date":1466609193,"answer_id":37972356,"question_id":17584495,"body_markdown":"This was happening to me using \r\n\r\n            &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\r\n            &lt;artifactId&gt;bcpkix-jdk15on&lt;/artifactId&gt;\r\n            &lt;version&gt;1.54&lt;/version&gt;\r\nI upgraded that to \r\n\r\n            &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\r\n            &lt;artifactId&gt;bcprov-jdk16&lt;/artifactId&gt;\r\n            &lt;version&gt;1.46&lt;/version&gt;\r\nand that seems to have fixed it","title":"Unable to complete the scan for annotations for web application [/app] due to a StackOverflowError","body":"<p>This was happening to me using </p>\n\n<pre><code>        &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\n        &lt;artifactId&gt;bcpkix-jdk15on&lt;/artifactId&gt;\n        &lt;version&gt;1.54&lt;/version&gt;\n</code></pre>\n\n<p>I upgraded that to </p>\n\n<pre><code>        &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\n        &lt;artifactId&gt;bcprov-jdk16&lt;/artifactId&gt;\n        &lt;version&gt;1.46&lt;/version&gt;\n</code></pre>\n\n<p>and that seems to have fixed it</p>\n"},{"tags":[],"owner":{"account_id":8718550,"reputation":3,"user_id":6612244,"display_name":"Tesla_PH"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1496139775,"creation_date":1496135775,"answer_id":44258171,"question_id":17584495,"body_markdown":"If it is already excluded in the build config and error still exist,\r\nyou can try to clean your project&#39;s working directory before building.\r\n\r\n    maven clean\r\n\r\n-\r\n\r\n    grails clean","title":"Unable to complete the scan for annotations for web application [/app] due to a StackOverflowError","body":"<p>If it is already excluded in the build config and error still exist,\nyou can try to clean your project's working directory before building.</p>\n\n<pre><code>maven clean\n</code></pre>\n\n<p>-</p>\n\n<pre><code>grails clean\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8023160,"reputation":1,"user_id":6051167,"display_name":"Jason Kiefer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1498162475,"creation_date":1498162475,"answer_id":44708599,"question_id":17584495,"body_markdown":"I had the same problem but with a different solution.  My conflict was with bcprov-jdk15on-1.55.jar and tika-app-1.7.jar.  Apparently tika includes bouncy castle, and in this case the older version of bouncy castle that causes the conflict.","title":"Unable to complete the scan for annotations for web application [/app] due to a StackOverflowError","body":"<p>I had the same problem but with a different solution.  My conflict was with bcprov-jdk15on-1.55.jar and tika-app-1.7.jar.  Apparently tika includes bouncy castle, and in this case the older version of bouncy castle that causes the conflict.</p>\n"},{"tags":[],"owner":{"account_id":2053609,"reputation":113,"user_id":1831993,"display_name":"Ardeshir Ayati"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1523265222,"creation_date":1522844644,"answer_id":49650960,"question_id":17584495,"body_markdown":"I have this error  in tomcat 8 and jdk 1.8\r\n\r\n    04-Apr-2018 16:35:06.358 SEVERE [localhost-startStop-1] org.apache.catalina.core.ContainerBase.addChildInternal ContainerBase.addChild: start: \r\n     org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/myapp]]\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:167)\r\n    \tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:752)\r\n    \tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:728)\r\n    \tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:734)\r\n    \tat org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1141)\r\n    \tat org.apache.catalina.startup.HostConfig$DeployDirectory.run(HostConfig.java:1875)\r\n    \tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n    \tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n    \tat java.lang.Thread.run(Thread.java:745)\r\n    Caused by: java.lang.IllegalStateException: Unable to complete the scan for annotations for web application [/myapp] due to a StackOverflowError. Possible root causes include a too low setting for -Xss and illegal cyclic inheritance dependencies. The class hierarchy being processed was [org.bouncycastle.asn1.ASN1EncodableVector-&gt;org.bouncycastle.asn1.DEREncodableVector-&gt;org.bouncycastle.asn1.ASN1EncodableVector]\r\n    \tat org.apache.catalina.startup.ContextConfig.checkHandlesTypes(ContextConfig.java:2110)\r\n    \tat org.apache.catalina.startup.ContextConfig.processAnnotationsStream(ContextConfig.java:2054)\r\n    \tat org.apache.catalina.startup.ContextConfig.processAnnotationsJar(ContextConfig.java:2000)\r\n    \tat org.apache.catalina.startup.ContextConfig.processAnnotationsUrl(ContextConfig.java:1970)\r\n    \tat org.apache.catalina.startup.ContextConfig.processAnnotations(ContextConfig.java:1923)\r\n    \tat org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1163)\r\n    \tat org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:775)\r\n    \tat org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:299)\r\n    \tat org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:94)\r\n    \tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5105)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\r\n    \t... 10 more\r\n    \r\n    04-Apr-2018 16:35:06.359 SEVERE [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory Error deploying web application directory [/usr/apache-tomcat-8.5.24.Core/webapps/myapp]\r\n     java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/myapp]]\r\n    \tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:756)\r\n    \tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:728)\r\n    \tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:734)\r\n    \tat org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1141)\r\n    \tat org.apache.catalina.startup.HostConfig$DeployDirectory.run(HostConfig.java:1875)\r\n    \tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n    \tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n    \tat java.lang.Thread.run(Thread.java:745)\r\n\r\nAnd I found two jar with name bcprov-jdk*.jar in my app lib.\r\nI removed all of those and use bcprov-jdk15on-1.52.jar.\r\nIn this way, my problem was solved.\r\n","title":"Unable to complete the scan for annotations for web application [/app] due to a StackOverflowError","body":"<p>I have this error  in tomcat 8 and jdk 1.8</p>\n\n<pre><code>04-Apr-2018 16:35:06.358 SEVERE [localhost-startStop-1] org.apache.catalina.core.ContainerBase.addChildInternal ContainerBase.addChild: start: \n org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/myapp]]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:167)\n    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:752)\n    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:728)\n    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:734)\n    at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1141)\n    at org.apache.catalina.startup.HostConfig$DeployDirectory.run(HostConfig.java:1875)\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\nCaused by: java.lang.IllegalStateException: Unable to complete the scan for annotations for web application [/myapp] due to a StackOverflowError. Possible root causes include a too low setting for -Xss and illegal cyclic inheritance dependencies. The class hierarchy being processed was [org.bouncycastle.asn1.ASN1EncodableVector-&gt;org.bouncycastle.asn1.DEREncodableVector-&gt;org.bouncycastle.asn1.ASN1EncodableVector]\n    at org.apache.catalina.startup.ContextConfig.checkHandlesTypes(ContextConfig.java:2110)\n    at org.apache.catalina.startup.ContextConfig.processAnnotationsStream(ContextConfig.java:2054)\n    at org.apache.catalina.startup.ContextConfig.processAnnotationsJar(ContextConfig.java:2000)\n    at org.apache.catalina.startup.ContextConfig.processAnnotationsUrl(ContextConfig.java:1970)\n    at org.apache.catalina.startup.ContextConfig.processAnnotations(ContextConfig.java:1923)\n    at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1163)\n    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:775)\n    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:299)\n    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:94)\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5105)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\n    ... 10 more\n\n04-Apr-2018 16:35:06.359 SEVERE [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory Error deploying web application directory [/usr/apache-tomcat-8.5.24.Core/webapps/myapp]\n java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/myapp]]\n    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:756)\n    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:728)\n    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:734)\n    at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1141)\n    at org.apache.catalina.startup.HostConfig$DeployDirectory.run(HostConfig.java:1875)\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\n</code></pre>\n\n<p>And I found two jar with name bcprov-jdk*.jar in my app lib.\nI removed all of those and use bcprov-jdk15on-1.52.jar.\nIn this way, my problem was solved.</p>\n"},{"tags":[],"owner":{"account_id":2508599,"reputation":374,"user_id":2181576,"display_name":"veritas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1559309053,"creation_date":1559309053,"answer_id":56395958,"question_id":17584495,"body_markdown":"Doing mvn clean in jenkins workspace folder (where my project runs) and doing a Jenkins build (that deletes the old war file) worked for me. ","title":"Unable to complete the scan for annotations for web application [/app] due to a StackOverflowError","body":"<p>Doing mvn clean in jenkins workspace folder (where my project runs) and doing a Jenkins build (that deletes the old war file) worked for me. </p>\n"},{"tags":[],"owner":{"account_id":4291943,"reputation":121,"user_id":3508066,"accept_rate":0,"display_name":"Ruhshan"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1588050954,"creation_date":1588050954,"answer_id":61473091,"question_id":17584495,"body_markdown":"I also had the same issue in my spring boot project. To find out the conflicting dependencies I issues this command from my project directory:\r\n\r\n```mvn dependency:tree -Dverbose -Dincludes=org.bouncycastle```\r\n\r\nFrom the output following information was found:\r\n\r\n```\r\n[INFO] +- org.springframework.cloud:spring-cloud-starter-openfeign:jar:2.1.0.RC3:compile\r\n[INFO] |  \\- org.springframework.cloud:spring-cloud-starter:jar:2.1.0.RC2:compile\r\n[INFO] |     \\- org.springframework.security:spring-security-rsa:jar:1.0.7.RELEASE:compile\r\n[INFO] |        \\- org.bouncycastle:bcpkix-jdk15on:jar:1.60:compile\r\n[INFO] |           \\- org.bouncycastle:bcprov-jdk15on:jar:1.60:compile\r\n[INFO] \\- com.cybersource:cybersource-rest-client-java:jar:0.0.16:compile\r\n[INFO]    \\- com.cybersource:AuthenticationSdk:jar:0.0.8:compile\r\n[INFO]       \\- org.bouncycastle:bcprov-jdk16:jar:1.45:compile\r\n\r\n```\r\n\r\nHere we can see that openfeign and cybersource-rest-client are using different versions of bcprov-jdk package. As cybersource-rest-client have the updated version of this package, I excluded this dependency from openfeign in pom.xml like this:\r\n\r\n```\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt;\r\n\t&lt;exclusions&gt;\r\n\t\t&lt;exclusion&gt;\r\n\t\t\t&lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;bcprov-jdk15on&lt;/artifactId&gt;\r\n\t\t&lt;/exclusion&gt;\r\n\t&lt;/exclusions&gt;\r\n&lt;/dependency&gt;\r\n\t\r\n```\r\n\r\nThis helped me solve this issue for me. ","title":"Unable to complete the scan for annotations for web application [/app] due to a StackOverflowError","body":"<p>I also had the same issue in my spring boot project. To find out the conflicting dependencies I issues this command from my project directory:</p>\n\n<p><code>mvn dependency:tree -Dverbose -Dincludes=org.bouncycastle</code></p>\n\n<p>From the output following information was found:</p>\n\n<pre><code>[INFO] +- org.springframework.cloud:spring-cloud-starter-openfeign:jar:2.1.0.RC3:compile\n[INFO] |  \\- org.springframework.cloud:spring-cloud-starter:jar:2.1.0.RC2:compile\n[INFO] |     \\- org.springframework.security:spring-security-rsa:jar:1.0.7.RELEASE:compile\n[INFO] |        \\- org.bouncycastle:bcpkix-jdk15on:jar:1.60:compile\n[INFO] |           \\- org.bouncycastle:bcprov-jdk15on:jar:1.60:compile\n[INFO] \\- com.cybersource:cybersource-rest-client-java:jar:0.0.16:compile\n[INFO]    \\- com.cybersource:AuthenticationSdk:jar:0.0.8:compile\n[INFO]       \\- org.bouncycastle:bcprov-jdk16:jar:1.45:compile\n\n</code></pre>\n\n<p>Here we can see that openfeign and cybersource-rest-client are using different versions of bcprov-jdk package. As cybersource-rest-client have the updated version of this package, I excluded this dependency from openfeign in pom.xml like this:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt;\n    &lt;exclusions&gt;\n        &lt;exclusion&gt;\n            &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\n            &lt;artifactId&gt;bcprov-jdk15on&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n    &lt;/exclusions&gt;\n&lt;/dependency&gt;\n\n</code></pre>\n\n<p>This helped me solve this issue for me. </p>\n"}],"owner":{"account_id":82626,"reputation":12122,"user_id":232175,"accept_rate":62,"display_name":"Matthias"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74574,"favorite_count":0,"down_vote_count":0,"up_vote_count":66,"accepted_answer_id":19396597,"answer_count":12,"score":66,"last_activity_date":1691108549,"creation_date":1373512815,"question_id":17584495,"body_markdown":"I am developing a Spring MVC application using STS (eclipse plugin) and maven.\r\n\r\nFor creating the project, I followed the STS wizard for a new &quot;Spring MVC project&quot;. Afterwards, I added some dependencies to other projects and libraries.\r\n\r\nHowever, when I am now trying to deploy the project to the integrated vFabric server of STS, I sometimes get an exception:\r\n\r\n\r\n    SEVERE: ContainerBase.addChild: start: \r\n    org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/wsa]]\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)\r\n    \tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)\r\n    \t...\r\n    Caused by: java.lang.IllegalStateException: Unable to complete the scan for annotations for web application [/app] due to a StackOverflowError. Possible root causes include a too low setting for -Xss and illegal cyclic inheritance dependencies. The class hierarchy being processed was [org.bouncycastle.asn1.ASN1EncodableVector-&gt;org.bouncycastle.asn1.DEREncodableVector-&gt;org.bouncycastle.asn1.ASN1EncodableVector]\r\n    \tat org.apache.catalina.startup.ContextConfig.checkHandlesTypes(ContextConfig.java:2179)\r\n    \t...\r\n\r\nWhen issuing a &quot;maven clean&quot;, followed by a &quot;maven install&quot; and a restart of the server, the exception sometimes doesn&#39;t get thrown and the application works fine. Yet, most of the times, it doesn&#39;t work.\r\n\r\nI guess there is no need to scan the bouncycastle dependencies for annotations.  \r\nCan I somehow disable this scanning for some jars?\r\n\r\nI already tried adding `metadata-complete=&quot;true&quot;` to my web.xml and increasing the stack size with no result.\r\n\r\nWhat can I do to fix this?","title":"Unable to complete the scan for annotations for web application [/app] due to a StackOverflowError","body":"<p>I am developing a Spring MVC application using STS (eclipse plugin) and maven.</p>\n\n<p>For creating the project, I followed the STS wizard for a new \"Spring MVC project\". Afterwards, I added some dependencies to other projects and libraries.</p>\n\n<p>However, when I am now trying to deploy the project to the integrated vFabric server of STS, I sometimes get an exception:</p>\n\n<pre><code>SEVERE: ContainerBase.addChild: start: \norg.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/wsa]]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)\n    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)\n    ...\nCaused by: java.lang.IllegalStateException: Unable to complete the scan for annotations for web application [/app] due to a StackOverflowError. Possible root causes include a too low setting for -Xss and illegal cyclic inheritance dependencies. The class hierarchy being processed was [org.bouncycastle.asn1.ASN1EncodableVector-&gt;org.bouncycastle.asn1.DEREncodableVector-&gt;org.bouncycastle.asn1.ASN1EncodableVector]\n    at org.apache.catalina.startup.ContextConfig.checkHandlesTypes(ContextConfig.java:2179)\n    ...\n</code></pre>\n\n<p>When issuing a \"maven clean\", followed by a \"maven install\" and a restart of the server, the exception sometimes doesn't get thrown and the application works fine. Yet, most of the times, it doesn't work.</p>\n\n<p>I guess there is no need to scan the bouncycastle dependencies for annotations.<br>\nCan I somehow disable this scanning for some jars?</p>\n\n<p>I already tried adding <code>metadata-complete=\"true\"</code> to my web.xml and increasing the stack size with no result.</p>\n\n<p>What can I do to fix this?</p>\n"},{"tags":["java","linux","shell"],"comments":[{"owner":{"account_id":4497436,"reputation":18081,"user_id":3656904,"accept_rate":67,"display_name":"talex"},"score":0,"creation_date":1541747909,"post_id":53221294,"comment_id":93329503,"body_markdown":"If you run this script from terminal everything works?","body":"If you run this script from terminal everything works?"},{"owner":{"account_id":13798611,"reputation":37875,"user_id":9959152,"display_name":"Ryuzaki L"},"score":0,"creation_date":1541747939,"post_id":53221294,"comment_id":93329518,"body_markdown":"may be try this https://askubuntu.com/questions/138908/how-to-execute-a-script-just-by-double-clicking-like-exe-files-in-windows","body":"may be try this <a href=\"https://askubuntu.com/questions/138908/how-to-execute-a-script-just-by-double-clicking-like-exe-files-in-windows\" title=\"how to execute a script just by double clicking like exe files in windows\">askubuntu.com/questions/138908/&hellip;</a>"},{"owner":{"account_id":6606163,"reputation":494,"user_id":5102932,"display_name":"Roy Shahaf"},"score":0,"creation_date":1541747966,"post_id":53221294,"comment_id":93329524,"body_markdown":"More specifically, can you run the java line in a bash terminal?","body":"More specifically, can you run the java line in a bash terminal?"},{"owner":{"account_id":10469159,"reputation":49,"user_id":7717604,"display_name":"lokesh"},"score":0,"creation_date":1541748111,"post_id":53221294,"comment_id":93329582,"body_markdown":"If i try to run the .sh file from terminal am getting the following error &quot;Unable to access jarfile/executer.jar&quot;","body":"If i try to run the .sh file from terminal am getting the following error &quot;Unable to access jarfile/executer.jar&quot;"},{"owner":{"account_id":10469159,"reputation":49,"user_id":7717604,"display_name":"lokesh"},"score":0,"creation_date":1541748249,"post_id":53221294,"comment_id":93329628,"body_markdown":"@RoyShahaf Yes, using terminal i can run the java line alone. it&#39;s working fine. But if i try to run the script, above error is displayed.","body":"@RoyShahaf Yes, using terminal i can run the java line alone. it&#39;s working fine. But if i try to run the script, above error is displayed."},{"owner":{"account_id":6606163,"reputation":494,"user_id":5102932,"display_name":"Roy Shahaf"},"score":0,"creation_date":1541748422,"post_id":53221294,"comment_id":93329692,"body_markdown":"Is the script in the same folder as the jar?","body":"Is the script in the same folder as the jar?"},{"owner":{"account_id":6606163,"reputation":494,"user_id":5102932,"display_name":"Roy Shahaf"},"score":0,"creation_date":1541748582,"post_id":53221294,"comment_id":93329749,"body_markdown":"At any rate this looks similar to https://stackoverflow.com/questions/11943948/what-causes-unable-to-access-jar-file-error . Try moving both script and the jar into a different folder (or using chmod to alter the permissions)","body":"At any rate this looks similar to <a href=\"https://stackoverflow.com/questions/11943948/what-causes-unable-to-access-jar-file-error\" title=\"what causes unable to access jar file error\">stackoverflow.com/questions/11943948/&hellip;</a> . Try moving both script and the jar into a different folder (or using chmod to alter the permissions)"}],"answers":[{"tags":[],"owner":{"account_id":5843461,"reputation":556,"user_id":4604265,"accept_rate":100,"display_name":"Sandunka Mihiran"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1541748061,"creation_date":1541748061,"answer_id":53221363,"question_id":53221294,"body_markdown":"Try moving into sh file location using terminal and try to execute it using following command.\r\n\r\n     ./startup.sh \r\n\r\nIf your file name is &#39;startup&#39;","title":"Unable to run my .jar file using .sh file","body":"<p>Try moving into sh file location using terminal and try to execute it using following command.</p>\n\n<pre><code> ./startup.sh \n</code></pre>\n\n<p>If your file name is 'startup'</p>\n"},{"tags":[],"owner":{"account_id":14715505,"reputation":1,"user_id":10627575,"display_name":"Henry He"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1541749706,"creation_date":1541749053,"answer_id":53221541,"question_id":53221294,"body_markdown":"Try to execute a command to output a log file.\r\n\r\nThen check the log info.\r\n\r\n`java -jar executer.jar &gt;err.log 2&gt;1`","title":"Unable to run my .jar file using .sh file","body":"<p>Try to execute a command to output a log file.</p>\n\n<p>Then check the log info.</p>\n\n<p><code>java -jar executer.jar &gt;err.log 2&gt;1</code></p>\n"},{"tags":[],"owner":{"account_id":19306338,"reputation":5,"user_id":14113064,"display_name":"solisoares"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691107591,"creation_date":1691107591,"answer_id":76832253,"question_id":53221294,"body_markdown":"As the question is about &quot;double clicking&quot;, try passing the complete path to `java` and give executable permissions (sudo chmod +x &lt;shfile.sh&gt;)\r\n\r\nI got a situation like yours and logging the error to a log file, like Henry He&#39;s answer, told me that java wasn&#39;t found. Even though I can run from the terminal, I got a `java: command not found` \r\n\r\nAs my java bin comes from `adsf` (*The Multiple Runtime Version Manager*) I passed the complete path and it worked:\r\n\r\n\r\n```\r\n#!/bin/bash\r\n&lt;complete-path-to-java&gt; -jar executer.jar","title":"Unable to run my .jar file using .sh file","body":"<p>As the question is about &quot;double clicking&quot;, try passing the complete path to <code>java</code> and give executable permissions (sudo chmod +x &lt;shfile.sh&gt;)</p>\n<p>I got a situation like yours and logging the error to a log file, like Henry He's answer, told me that java wasn't found. Even though I can run from the terminal, I got a <code>java: command not found</code></p>\n<p>As my java bin comes from <code>adsf</code> (<em>The Multiple Runtime Version Manager</em>) I passed the complete path and it worked:</p>\n<pre><code>#!/bin/bash\n&lt;complete-path-to-java&gt; -jar executer.jar\n</code></pre>\n"}],"owner":{"account_id":10469159,"reputation":49,"user_id":7717604,"display_name":"lokesh"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":780,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1691107591,"creation_date":1541747661,"question_id":53221294,"body_markdown":"I have a runnable .jar file, which i can run from my linux terminal but I need to run that .jar file using a .sh file. \r\n\r\n    #!/bin/bash\r\n    java -jar executer.jar\r\n\r\nIf i double click the .sh file, terminal opens up but my code doesn&#39;t get executed. Kindly let me know, whats wrong. \r\n\r\n","title":"Unable to run my .jar file using .sh file","body":"<p>I have a runnable .jar file, which i can run from my linux terminal but I need to run that .jar file using a .sh file. </p>\n\n<pre><code>#!/bin/bash\njava -jar executer.jar\n</code></pre>\n\n<p>If i double click the .sh file, terminal opens up but my code doesn't get executed. Kindly let me know, whats wrong. </p>\n"},{"tags":["java","android","pdf","android-recyclerview","itext"],"comments":[{"owner":{"account_id":16549589,"reputation":177,"user_id":11958275,"display_name":"Ghazanfar Ateeb"},"score":0,"creation_date":1691065490,"post_id":76828025,"comment_id":135442946,"body_markdown":"what kind of data you are writing to pdf?","body":"what kind of data you are writing to pdf?"},{"owner":{"account_id":29151994,"reputation":1,"user_id":22332638,"display_name":"ezz sab"},"score":0,"creation_date":1691065581,"post_id":76828025,"comment_id":135442961,"body_markdown":"texts and pictures @GhazanfarAteeb","body":"texts and pictures @GhazanfarAteeb"},{"owner":{"account_id":2755641,"reputation":8688,"user_id":2373819,"display_name":"Andrew"},"score":0,"creation_date":1691066137,"post_id":76828025,"comment_id":135443108,"body_markdown":"Draw the view to the built in pdfdocument https://developer.android.com/reference/android/graphics/pdf/PdfDocument . The question is how many items in the recyclerview? and do you want to match standard paper sizes? (As you might need to break it up in to multiple pages.","body":"Draw the view to the built in pdfdocument <a href=\"https://developer.android.com/reference/android/graphics/pdf/PdfDocument\" rel=\"nofollow noreferrer\">developer.android.com/reference/android/graphics/pdf/&hellip;</a> . The question is how many items in the recyclerview? and do you want to match standard paper sizes? (As you might need to break it up in to multiple pages."},{"owner":{"account_id":16549589,"reputation":177,"user_id":11958275,"display_name":"Ghazanfar Ateeb"},"score":0,"creation_date":1691066733,"post_id":76828025,"comment_id":135443240,"body_markdown":"as far i remember I&#39;ve worked with writing images to pdf. i could share that","body":"as far i remember I&#39;ve worked with writing images to pdf. i could share that"},{"owner":{"account_id":29151994,"reputation":1,"user_id":22332638,"display_name":"ezz sab"},"score":0,"creation_date":1691068426,"post_id":76828025,"comment_id":135443632,"body_markdown":"I&#39;ve done this previously. But I encountered many problems that I could not solve, so I try to do that using iText.\nThe number of items in RecyclerView is not specified, depending on the user&#39;s input @Andrew","body":"I&#39;ve done this previously. But I encountered many problems that I could not solve, so I try to do that using iText. The number of items in RecyclerView is not specified, depending on the user&#39;s input @Andrew"},{"owner":{"account_id":2755641,"reputation":8688,"user_id":2373819,"display_name":"Andrew"},"score":0,"creation_date":1691071268,"post_id":76828025,"comment_id":135444346,"body_markdown":"I draw views to pdfdocument lots, the only problem I had was with pre Android 6 in that if you put a bitmap in then it did not compress it and produced very large pdf files. Otherwise it produces just as good results as itext without having to pay for a license (unless your app is open source). So what problems did you have?","body":"I draw views to pdfdocument lots, the only problem I had was with pre Android 6 in that if you put a bitmap in then it did not compress it and produced very large pdf files. Otherwise it produces just as good results as itext without having to pay for a license (unless your app is open source). So what problems did you have?"},{"owner":{"account_id":29151994,"reputation":1,"user_id":22332638,"display_name":"ezz sab"},"score":0,"creation_date":1691072343,"post_id":76828025,"comment_id":135444622,"body_markdown":"I could not determine the number of pages on which the information is placed because it is a variable value according to the user&#39;s input\nI was converting the final form into a bitmap and then putting the batmap into a PDF file, but the final result is a very long page or a page that does not show all the information\nI tried to split the bitmap before placing it in the PDF page, but I did not get any result  @Andrew","body":"I could not determine the number of pages on which the information is placed because it is a variable value according to the user&#39;s input I was converting the final form into a bitmap and then putting the batmap into a PDF file, but the final result is a very long page or a page that does not show all the information I tried to split the bitmap before placing it in the PDF page, but I did not get any result  @Andrew"}],"answers":[{"tags":[],"owner":{"account_id":2755641,"reputation":8688,"user_id":2373819,"display_name":"Andrew"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691106043,"creation_date":1691106043,"answer_id":76832180,"question_id":76828025,"body_markdown":"Here is a solution to create a multi page pdf from a recyclerview, it does not use itext because there is no need to as the underlying graphics system Android uses is [Skia][1] which has renderers for hardware, bitmap and pdf&#39;s\r\n\r\nThus it does not have the license issue non open source use.\r\n\r\nThis example is based on something I do in my app for non recyclerviews.\r\n\r\nThe key is to pre-measure all the recycler items (not just the ones that the recycler needs to show on the screen) and thus you can build a view to draw to the pdf that fits the pdf page.\r\n\r\nNote that you need to treat a pdf page as a large low resolution screen, much as your app has adapt to display on different screen sizes.\r\n\r\nThis is because an A4 pdf page is only 594 postscript (pixels) wide and 841 postscript (pixels) high. Thus you probably want to use much smaller font sizes than you would for a devices screen (This basic example does not adjust for the pdf size)\r\n\r\nAs it is a complete working example I put it on github https://github.com/Zardozz/RecyclerviewPdf\r\n\r\nNote you should really do the PDF generation in the background because it can take some time as it draws all items in the recyclerview.\r\n\r\n\r\n  [1]: https://skia.org/","title":"Get RecyclerView to itext pdf","body":"<p>Here is a solution to create a multi page pdf from a recyclerview, it does not use itext because there is no need to as the underlying graphics system Android uses is <a href=\"https://skia.org/\" rel=\"nofollow noreferrer\">Skia</a> which has renderers for hardware, bitmap and pdf's</p>\n<p>Thus it does not have the license issue non open source use.</p>\n<p>This example is based on something I do in my app for non recyclerviews.</p>\n<p>The key is to pre-measure all the recycler items (not just the ones that the recycler needs to show on the screen) and thus you can build a view to draw to the pdf that fits the pdf page.</p>\n<p>Note that you need to treat a pdf page as a large low resolution screen, much as your app has adapt to display on different screen sizes.</p>\n<p>This is because an A4 pdf page is only 594 postscript (pixels) wide and 841 postscript (pixels) high. Thus you probably want to use much smaller font sizes than you would for a devices screen (This basic example does not adjust for the pdf size)</p>\n<p>As it is a complete working example I put it on github <a href=\"https://github.com/Zardozz/RecyclerviewPdf\" rel=\"nofollow noreferrer\">https://github.com/Zardozz/RecyclerviewPdf</a></p>\n<p>Note you should really do the PDF generation in the background because it can take some time as it draws all items in the recyclerview.</p>\n"}],"owner":{"account_id":29151994,"reputation":1,"user_id":22332638,"display_name":"ezz sab"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691106043,"creation_date":1691065299,"question_id":76828025,"body_markdown":"\r\nI want to get recyclerView Items from activity to itext PDF, but I don&#39;t know the best way to do it.\r\n\r\nI tried to do that by taking abitmap for recyclerView and put it in the PDF,but it was of lower quality than the other text in PDF\r\n\r\n```java\r\nBitmap returnedBitmap = Bitmap.createBitmap(rl_edu.getWidth(), rl_edu.getHeight(), Bitmap.Config.ARGB_8888);\r\nBitmap.createScaledBitmap(returnedBitmap, 595, 842, true);\r\nCanvas canvas = new Canvas(returnedBitmap);\r\n\r\nDrawable bgDrawable = rl_edu.getBackground();\r\nif (bgDrawable != null) {\r\n\tbgDrawable.draw(canvas);\r\n} else {\r\n\tcanvas.drawColor(Color.WHITE);\r\n}\r\nl_edu.draw(canvas);\r\n\r\nByteArrayOutputStream stream = new ByteArrayOutputStream();\r\nreturnedBitmap.compress(Bitmap.CompressFormat.PNG, 100, stream);\r\nImage image = Image.getInstance(stream.toByteArray());\r\nimage.setAlignment(Element.LISTITEM);\r\nimage.scaleAbsolute(490f, 240f);\r\nmDoc.add(image);\r\n```\r\n\r\nAnd I also tried to get toString from Infrormation Activity for the recyclerView \r\n\r\n\r\n```java\r\nFont f = new Font(Font.FontFamily.TIMES_ROMAN, 14.0f, Font.NORMAL, BaseColor.BLUE);\r\nString rvEdu = MyApplication.getEducationList().toString();\r\nmDoc.add(new Paragraph(rvEdu, f));\r\n```\r\n\r\nIs there another way to do that?\r\n\r\n","title":"Get RecyclerView to itext pdf","body":"<p>I want to get recyclerView Items from activity to itext PDF, but I don't know the best way to do it.</p>\n<p>I tried to do that by taking abitmap for recyclerView and put it in the PDF,but it was of lower quality than the other text in PDF</p>\n<pre class=\"lang-java prettyprint-override\"><code>Bitmap returnedBitmap = Bitmap.createBitmap(rl_edu.getWidth(), rl_edu.getHeight(), Bitmap.Config.ARGB_8888);\nBitmap.createScaledBitmap(returnedBitmap, 595, 842, true);\nCanvas canvas = new Canvas(returnedBitmap);\n\nDrawable bgDrawable = rl_edu.getBackground();\nif (bgDrawable != null) {\n    bgDrawable.draw(canvas);\n} else {\n    canvas.drawColor(Color.WHITE);\n}\nl_edu.draw(canvas);\n\nByteArrayOutputStream stream = new ByteArrayOutputStream();\nreturnedBitmap.compress(Bitmap.CompressFormat.PNG, 100, stream);\nImage image = Image.getInstance(stream.toByteArray());\nimage.setAlignment(Element.LISTITEM);\nimage.scaleAbsolute(490f, 240f);\nmDoc.add(image);\n</code></pre>\n<p>And I also tried to get toString from Infrormation Activity for the recyclerView</p>\n<pre class=\"lang-java prettyprint-override\"><code>Font f = new Font(Font.FontFamily.TIMES_ROMAN, 14.0f, Font.NORMAL, BaseColor.BLUE);\nString rvEdu = MyApplication.getEducationList().toString();\nmDoc.add(new Paragraph(rvEdu, f));\n</code></pre>\n<p>Is there another way to do that?</p>\n"},{"tags":["java","spring","spring-boot","spring-security","spring-webflux"],"owner":{"account_id":15906218,"reputation":83,"user_id":11477360,"display_name":"Hassan Raza"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691103640,"creation_date":1691103640,"question_id":76832055,"body_markdown":"So I was experiencing a CORS error for the requests I was making from my react front end to my spring boot web flux back end. I intercept the requests in the backend and then extract some info from the requests using a filter and then the requests get authenticated. The security config is shown below. My question is that when I use a &#39;corsConfigurationSource&#39; bean the CORS error is fixed and all my requests get completed as expected but when I use the \r\n&#39;corsConfigurer&#39; bean I get the CORs error that I mentioned earlier. What is the difference between the two? I am applying the same filters to both configurations.\r\n\r\n```\r\n@Bean\r\n    public SecurityWebFilterChain securityWebFilterChain(ServerHttpSecurity http) {\r\n        return http\r\n                .cors().and()\r\n                .addFilterAt(jwtTokenFilter, SecurityWebFiltersOrder.AUTHENTICATION)\r\n                .authorizeExchange()\r\n                .pathMatchers(&quot;/**&quot;).hasAuthority(&quot;read:Orders&quot;)\r\n                .and().oauth2ResourceServer()            .jwt().jwtAuthenticationConverter(jwtAuthenticationConverter()).and().and().build();\r\n    }\r\n```\r\n\r\nThe corsCinfigurationSource bean is shown below:\r\n\r\n```\r\n  @Bean\r\n    public CorsConfigurationSource corsConfigurationSource() {\r\n        CorsConfiguration configuration = new CorsConfiguration();\r\n        configuration.setAllowedOrigins(Arrays.asList(&quot;http://localhost:3000&quot;));\r\n        configuration.setAllowedMethods(Arrays.asList(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;PATCH&quot;, &quot;DELETE&quot;, &quot;OPTIONS&quot;));\r\n        configuration.setAllowedHeaders(Arrays.asList(&quot;authorization&quot;, &quot;content-type&quot;, &quot;x-auth-token&quot;));\r\n        configuration.setAllowCredentials(true);\r\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\r\n        source.registerCorsConfiguration(&quot;/**&quot;, configuration);\r\n        return source;\r\n    }\r\n\r\n```\r\n\r\nThe corsConfigurer bean is shown below:\r\n```\r\n\t@Bean\r\n\tpublic WebFluxConfigurer corsConfigurer(){\r\n\t\treturn new WebFluxConfigurer() {\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void addCorsMappings(CorsRegistry registry){\r\n\t\t\t\tregistry\r\n\t\t\t\t\t\t.addMapping(&quot;/**&quot;)\r\n\t\t\t\t\t\t.allowedOrigins(&quot;http://localhost:3000&quot;)\r\n\t\t\t\t\t\t.allowCredentials(true)\r\n\t\t\t\t\t\t.allowedHeaders(&quot;AUTHORIZATION&quot;, &quot;CONTENT-TYPE&quot;, &quot;X-AUTH-TOKEN&quot;)\r\n\t\t\t\t\t\t.allowedMethods(&quot;GET&quot;,&quot;POST&quot;,&quot;OPTIONS&quot;);\r\n\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n```\r\n\r\nAny help would be appreciated.\r\n","title":"Cors error works with one configuration but not with other. Why?","body":"<p>So I was experiencing a CORS error for the requests I was making from my react front end to my spring boot web flux back end. I intercept the requests in the backend and then extract some info from the requests using a filter and then the requests get authenticated. The security config is shown below. My question is that when I use a 'corsConfigurationSource' bean the CORS error is fixed and all my requests get completed as expected but when I use the\n'corsConfigurer' bean I get the CORs error that I mentioned earlier. What is the difference between the two? I am applying the same filters to both configurations.</p>\n<pre><code>@Bean\n    public SecurityWebFilterChain securityWebFilterChain(ServerHttpSecurity http) {\n        return http\n                .cors().and()\n                .addFilterAt(jwtTokenFilter, SecurityWebFiltersOrder.AUTHENTICATION)\n                .authorizeExchange()\n                .pathMatchers(&quot;/**&quot;).hasAuthority(&quot;read:Orders&quot;)\n                .and().oauth2ResourceServer()            .jwt().jwtAuthenticationConverter(jwtAuthenticationConverter()).and().and().build();\n    }\n</code></pre>\n<p>The corsCinfigurationSource bean is shown below:</p>\n<pre><code>  @Bean\n    public CorsConfigurationSource corsConfigurationSource() {\n        CorsConfiguration configuration = new CorsConfiguration();\n        configuration.setAllowedOrigins(Arrays.asList(&quot;http://localhost:3000&quot;));\n        configuration.setAllowedMethods(Arrays.asList(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;PATCH&quot;, &quot;DELETE&quot;, &quot;OPTIONS&quot;));\n        configuration.setAllowedHeaders(Arrays.asList(&quot;authorization&quot;, &quot;content-type&quot;, &quot;x-auth-token&quot;));\n        configuration.setAllowCredentials(true);\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n        source.registerCorsConfiguration(&quot;/**&quot;, configuration);\n        return source;\n    }\n\n</code></pre>\n<p>The corsConfigurer bean is shown below:</p>\n<pre><code>    @Bean\n    public WebFluxConfigurer corsConfigurer(){\n        return new WebFluxConfigurer() {\n\n            @Override\n            public void addCorsMappings(CorsRegistry registry){\n                registry\n                        .addMapping(&quot;/**&quot;)\n                        .allowedOrigins(&quot;http://localhost:3000&quot;)\n                        .allowCredentials(true)\n                        .allowedHeaders(&quot;AUTHORIZATION&quot;, &quot;CONTENT-TYPE&quot;, &quot;X-AUTH-TOKEN&quot;)\n                        .allowedMethods(&quot;GET&quot;,&quot;POST&quot;,&quot;OPTIONS&quot;);\n\n            }\n        };\n    }\n</code></pre>\n<p>Any help would be appreciated.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1652937343,"post_id":72293988,"comment_id":127729506,"body_markdown":"Sorry, that does not make sense. Say that you have calculated a difference of a minute so got 60000 milliseconds. This number does not imply any *actual date which was calculated*, neither in 1970 nor in 2022. And a `LocalDateTime` is for a date and time of day (not that often useful), not for an amount of time. For your difference one would use `java.time.Duration`.","body":"Sorry, that does not make sense. Say that you have calculated a difference of a minute so got 60000 milliseconds. This number does not imply any <i>actual date which was calculated</i>, neither in 1970 nor in 2022. And a <code>LocalDateTime</code> is for a date and time of day (not that often useful), not for an amount of time. For your difference one would use <code>java.time.Duration</code>."}],"answers":[{"tags":[],"owner":{"account_id":11795065,"reputation":8307,"user_id":8629960,"display_name":"Kirill Simonov"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1691103639,"creation_date":1652910009,"answer_id":72296313,"question_id":72293988,"body_markdown":"`java.time.LocalDateTime` was not created to represent a difference between two dates. There are `java.time.Period` and `java.time.Duration` that should be used for it ([see Oracle docs][1]). \r\n\r\n&gt; A `Duration` measures an amount of time using time-based values\r\n&gt; (seconds, nanoseconds). A `Period` uses date-based values (years,\r\n&gt; months, days).\r\n\r\nThey both have a convenient `.between()` method, which you could use like this:\r\n\r\n    Duration diff = Duration.between(ZonedDateTime.now(ZoneId.systemDefault()), endTime);\r\n\r\nThe reason why there are no combined classes to represent duration as years, months, days AND hours, minutes, seconds is that a day could be 24 or 25 hours depending on Daylight saving time. So \r\n\r\n&gt;  A `Duration` of one day is exactly 24 hours long. A `Period` of one day, when added to a `ZonedDateTime`, may vary according to the time zone. For example, if it occurs on the first or last day of daylight saving time.\r\n\r\nI would suggest you to use the `Duration` class and if you want to pretty print it, you have to do it manually like this (thanks to [this answer][2]):\r\n\r\n    System.out.println(diff.toString()\r\n                .substring(2)\r\n                .replaceAll(&quot;(\\\\d[HMS])(?!$)&quot;, &quot;$1 &quot;)\r\n                .toLowerCase());\r\n\r\nThis will print something like `370h 24m 14.645s`. If you want days, months and years, you would have to calculate them from seconds and print.\r\n\r\nIf you&#39;re using Java 9+ there are methods to get number of days, hours, minutes and seconds in the duration:\r\n\r\n    System.out.println(String.format(&quot;%sd %sh %sm %ss&quot;, \r\n                diff.toDaysPart(), \r\n                diff.toHoursPart(), \r\n                diff.toMinutesPart(), \r\n                diff.toSecondsPart()));\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/datetime/iso/period.html\r\n  [2]: https://stackoverflow.com/a/40487511/8629960","title":"date difference in millis to localdatetime","body":"<p><code>java.time.LocalDateTime</code> was not created to represent a difference between two dates. There are <code>java.time.Period</code> and <code>java.time.Duration</code> that should be used for it (<a href=\"https://docs.oracle.com/javase/tutorial/datetime/iso/period.html\" rel=\"nofollow noreferrer\">see Oracle docs</a>).</p>\n<blockquote>\n<p>A <code>Duration</code> measures an amount of time using time-based values\n(seconds, nanoseconds). A <code>Period</code> uses date-based values (years,\nmonths, days).</p>\n</blockquote>\n<p>They both have a convenient <code>.between()</code> method, which you could use like this:</p>\n<pre><code>Duration diff = Duration.between(ZonedDateTime.now(ZoneId.systemDefault()), endTime);\n</code></pre>\n<p>The reason why there are no combined classes to represent duration as years, months, days AND hours, minutes, seconds is that a day could be 24 or 25 hours depending on Daylight saving time. So</p>\n<blockquote>\n<p>A <code>Duration</code> of one day is exactly 24 hours long. A <code>Period</code> of one day, when added to a <code>ZonedDateTime</code>, may vary according to the time zone. For example, if it occurs on the first or last day of daylight saving time.</p>\n</blockquote>\n<p>I would suggest you to use the <code>Duration</code> class and if you want to pretty print it, you have to do it manually like this (thanks to <a href=\"https://stackoverflow.com/a/40487511/8629960\">this answer</a>):</p>\n<pre><code>System.out.println(diff.toString()\n            .substring(2)\n            .replaceAll(&quot;(\\\\d[HMS])(?!$)&quot;, &quot;$1 &quot;)\n            .toLowerCase());\n</code></pre>\n<p>This will print something like <code>370h 24m 14.645s</code>. If you want days, months and years, you would have to calculate them from seconds and print.</p>\n<p>If you're using Java 9+ there are methods to get number of days, hours, minutes and seconds in the duration:</p>\n<pre><code>System.out.println(String.format(&quot;%sd %sh %sm %ss&quot;, \n            diff.toDaysPart(), \n            diff.toHoursPart(), \n            diff.toMinutesPart(), \n            diff.toSecondsPart()));\n</code></pre>\n"}],"owner":{"account_id":6253582,"reputation":3528,"user_id":4862911,"accept_rate":76,"display_name":"aligur"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":72296313,"answer_count":1,"score":1,"last_activity_date":1691103639,"creation_date":1652897079,"question_id":72293988,"body_markdown":"I need to print date again after i calculated difference between two dates. \r\n\r\nhere is what I tried:\r\n\r\n     fun getRemainingTime(endTime: ZonedDateTime): Long {\r\n            val currentTime = ZonedDateTime.now(ZoneId.systemDefault())\r\n    \r\n            return dateUtils.durationDifference(currentTime, endTime).toMillis()\r\n        }\r\n\r\nbut when I try to convert it to localdate like below again it starts with `1970`. So I need to actual date which was calculated. **for example: difference between `2022-10-10` and `2022-10-12` should be `2022-10-02`**\r\n\r\n    LocalDateTime.ofInstant(Instant.ofEpochMilli(remainingDurationInMillis), ZoneId.systemDefault())\r\n\r\n\r\n\r\n\r\n","title":"date difference in millis to localdatetime","body":"<p>I need to print date again after i calculated difference between two dates.</p>\n<p>here is what I tried:</p>\n<pre><code> fun getRemainingTime(endTime: ZonedDateTime): Long {\n        val currentTime = ZonedDateTime.now(ZoneId.systemDefault())\n\n        return dateUtils.durationDifference(currentTime, endTime).toMillis()\n    }\n</code></pre>\n<p>but when I try to convert it to localdate like below again it starts with <code>1970</code>. So I need to actual date which was calculated. <strong>for example: difference between <code>2022-10-10</code> and <code>2022-10-12</code> should be <code>2022-10-02</code></strong></p>\n<pre><code>LocalDateTime.ofInstant(Instant.ofEpochMilli(remainingDurationInMillis), ZoneId.systemDefault())\n</code></pre>\n"},{"tags":["java","java.util.scanner","inputmismatchexception"],"comments":[{"owner":{"account_id":384206,"reputation":50386,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"score":2,"creation_date":1691101865,"post_id":76831931,"comment_id":135450295,"body_markdown":"Remember: if you get an error, [show the entire error](/help/how-to-ask). Also remember to show the [mcve] for your code, because right now your while loop isn&#39;t even closed properly, and there&#39;s no public main around it, nor a class around that. And finally, look at your post after you submit it, and then [edit]  it to fix things like indentation being wildly off =)","body":"Remember: if you get an error, <a href=\"/help/how-to-ask\">show the entire error</a>. Also remember to show the <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> for your code, because right now your while loop isn&#39;t even closed properly, and there&#39;s no public main around it, nor a class around that. And finally, look at your post after you submit it, and then <a href=\"https://stackoverflow.com/posts/76831931/edit\">edit</a>  it to fix things like indentation being wildly off =)"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1691102389,"post_id":76831931,"comment_id":135450347,"body_markdown":"Guessing as we have partial code, but in place of *int age = sc.nextInt();* try `int age = sc.nextInt();sc.nextLine();`","body":"Guessing as we have partial code, but in place of <i>int age = sc.nextInt();</i> try <code>int age = sc.nextInt();sc.nextLine();</code>"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1691104006,"post_id":76831931,"comment_id":135450499,"body_markdown":"With this code yo need to enter the name and the age on separate lines. Is that what you&#39;re doing? and is that the intent? If not, change `String name = sc.nextLine();` to `String name = sc.next();`.","body":"With this code yo need to enter the name and the age on separate lines. Is that what you&#39;re doing? and is that the intent? If not, change <code>String name = sc.nextLine();</code> to <code>String name = sc.next();</code>."},{"owner":{"account_id":29155784,"reputation":3,"user_id":22335595,"display_name":"Vincent"},"score":0,"creation_date":1691108137,"post_id":76831931,"comment_id":135450893,"body_markdown":"Thanks for all your answers. So the complet error is : Exception in thread &quot;main&quot; java.util.InputMismatchException\n\tat java.base/java.util.Scanner.throwFor(Scanner.java:947)\n\tat java.base/java.util.Scanner.next(Scanner.java:1602)\n\tat java.base/java.util.Scanner.nextByte(Scanner.java:2011)\n\tat java.base/java.util.Scanner.nextByte(Scanner.java:1965)\n\tat Main.main(Main.java:20)","body":"Thanks for all your answers. So the complet error is : Exception in thread &quot;main&quot; java.util.InputMismatchException \tat java.base/java.util.Scanner.throwFor(Scanner.java:947) \tat java.base/java.util.Scanner.next(Scanner.java:1602) \tat java.base/java.util.Scanner.nextByte(Scanner.java:2011) \tat java.base/java.util.Scanner.nextByte(Scanner.java:1965) \tat Main.main(Main.java:20)"},{"owner":{"account_id":29155784,"reputation":3,"user_id":22335595,"display_name":"Vincent"},"score":0,"creation_date":1691108642,"post_id":76831931,"comment_id":135450925,"body_markdown":"It works with sc.next() but I cant add big names ( name + surname). I will do with next(). Thank you all.","body":"It works with sc.next() but I cant add big names ( name + surname). I will do with next(). Thank you all."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1691111597,"post_id":76831931,"comment_id":135451117,"body_markdown":"You can&#39;t add space-separated names. If you want first name and surname you will need two variables and two `next()` calls.","body":"You can&#39;t add space-separated names. If you want first name and surname you will need two variables and two <code>next()</code> calls."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1691111632,"post_id":76831931,"comment_id":135451121,"body_markdown":"@OldDogProgrammer No it doesn&#39;t. Look again.","body":"@OldDogProgrammer No it doesn&#39;t. Look again."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691136376,"post_id":76831931,"comment_id":135453784,"body_markdown":"I missed the first one so: `int  numPeople = sc.nextInt();sc.nextLine();` but it&#39;s really not helping that you still haven&#39;t at least closed the loop as a &#39;minrep&#39;","body":"I missed the first one so: <code>int  numPeople = sc.nextInt();sc.nextLine();</code> but it&#39;s really not helping that you still haven&#39;t at least closed the loop as a &#39;minrep&#39;"}],"owner":{"account_id":29155784,"reputation":3,"user_id":22335595,"display_name":"Vincent"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691103120,"creation_date":1691101574,"question_id":76831931,"body_markdown":"what is the problem with my code and why do I have the InputMismatchException error every time I type the name in the console ? \r\n\r\n\r\n\r\n```\r\nScanner sc = new Scanner(System.in);\r\n        System.out.println(&quot;How many People are there ? (employee and students included)&quot;);\r\n\r\n        int  numPeople = sc.nextInt();\r\n        Person[] personArray = new Person[numPeople];\r\n        Student[] studentsArray = new Student[numPeople];\r\n        Employee[] employeesArray = new Employee[numPeople];\r\n\r\n        int i=0;\r\n\r\n        while(i &lt; numPeople) {\r\n            System.out.println(&quot;Please enter the name and age of the person&quot;);\r\n            String name = sc.nextLine();\r\n            int age = sc.nextInt();sc.nextLine();\r\n            Person person = new Person(name, age);\r\n            personArray[i] = person;\r\n            i++;\r\n```\r\n","title":"I keep having InputMismatchException error every time I type the name of the person in the Scanner?","body":"<p>what is the problem with my code and why do I have the InputMismatchException error every time I type the name in the console ?</p>\n<pre><code>Scanner sc = new Scanner(System.in);\n        System.out.println(&quot;How many People are there ? (employee and students included)&quot;);\n\n        int  numPeople = sc.nextInt();\n        Person[] personArray = new Person[numPeople];\n        Student[] studentsArray = new Student[numPeople];\n        Employee[] employeesArray = new Employee[numPeople];\n\n        int i=0;\n\n        while(i &lt; numPeople) {\n            System.out.println(&quot;Please enter the name and age of the person&quot;);\n            String name = sc.nextLine();\n            int age = sc.nextInt();sc.nextLine();\n            Person person = new Person(name, age);\n            personArray[i] = person;\n            i++;\n</code></pre>\n"},{"tags":["java","serialization","deserialization"],"comments":[{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1691096830,"post_id":76831379,"comment_id":135449575,"body_markdown":"it seems to be an incompatible chabge: https://docs.oracle.com/javase/8/docs/platform/serialization/spec/version.html#a6678 However, this is different if you have writeObject/readObject methods. Also note that you first need to serialize it, then do tze change and then deserialize it in order to run into issues.","body":"it seems to be an incompatible chabge: <a href=\"https://docs.oracle.com/javase/8/docs/platform/serialization/spec/version.html#a6678\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/platform/serialization/spec/&hellip;</a> However, this is different if you have writeObject/readObject methods. Also note that you first need to serialize it, then do tze change and then deserialize it in order to run into issues."},{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1691096909,"post_id":76831379,"comment_id":135449589,"body_markdown":"Can you show how you tested it? You might also want to check out https://stackoverflow.com/a/63357483/10871900","body":"Can you show how you tested it? You might also want to check out <a href=\"https://stackoverflow.com/a/63357483/10871900\">stackoverflow.com/a/63357483/10871900</a>"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1691103032,"post_id":76831379,"comment_id":135450404,"body_markdown":"It is an incompatible change in that &#39;the guarantee of interoperability cannot be maintained&#39; in terms of the application. However in terms of the Object Serialization Protocol it will not cause a `SerializationException` as long as you preserve the initial `serialVersionUID`.","body":"It is an incompatible change in that &#39;the guarantee of interoperability cannot be maintained&#39; in terms of the application. However in terms of the Object Serialization Protocol it will not cause a <code>SerializationException</code> as long as you preserve the initial <code>serialVersionUID</code>."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1691136298,"post_id":76831379,"comment_id":135453763,"body_markdown":"There are two types of incompatibility: backwards incompatibility means that the new version of the code fails to deserialise data saved by the old version. This is almost always important to solve. Forward incompatibility means that the _old_ version of the code fails to deserialise data saved by the _new_ version. This isn&#39;t a problem for all applications, but it is in this case. When doing a zero-downtime deployment, there will be a period of time when old and new versions are both running side by side.","body":"There are two types of incompatibility: backwards incompatibility means that the new version of the code fails to deserialise data saved by the old version. This is almost always important to solve. Forward incompatibility means that the <i>old</i> version of the code fails to deserialise data saved by the <i>new</i> version. This isn&#39;t a problem for all applications, but it is in this case. When doing a zero-downtime deployment, there will be a period of time when old and new versions are both running side by side."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1691136377,"post_id":76831379,"comment_id":135453785,"body_markdown":"It&#39;s possible in that case for the new version to save a session that then needs to be read by another server in the load balancer running the old version of the code. If the deployment rolls through all servers quickly enough, this might be unlikely, but still possible. If you have any kind of pause during the deployment process, it might not be unlikely at all.","body":"It&#39;s possible in that case for the new version to save a session that then needs to be read by another server in the load balancer running the old version of the code. If the deployment rolls through all servers quickly enough, this might be unlikely, but still possible. If you have any kind of pause during the deployment process, it might not be unlikely at all."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1691136597,"post_id":76831379,"comment_id":135453829,"body_markdown":"Solving it requires deploying in two stages. In the first stage, you need to deploy a version of the code that still has the field, but can tolerate it being missing without causing any problems. Once all of the servers are running that version of the code, you can deploy a version that removes the field.","body":"Solving it requires deploying in two stages. In the first stage, you need to deploy a version of the code that still has the field, but can tolerate it being missing without causing any problems. Once all of the servers are running that version of the code, you can deploy a version that removes the field."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1691136823,"post_id":76831379,"comment_id":135453866,"body_markdown":"@TimMoore It is *not* a problem in this case. Adding or deleting a field is benign from the serialization point of view. If the field isn&#39;t present in the stream but it is in the class, it is set to null, and if it is present in the stream but not in the class it is ignored.","body":"@TimMoore It is <i>not</i> a problem in this case. Adding or deleting a field is benign from the serialization point of view. If the field isn&#39;t present in the stream but it is in the class, it is set to null, and if it is present in the stream but not in the class it is ignored."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1691138394,"post_id":76831379,"comment_id":135454120,"body_markdown":"@user207421 did you read the link in the question? “When the stream is read by an earlier class, the value of the field will be set to the default value because no value is available in the stream. However, this default value may adversely impair the ability of the earlier version to fulfill its contract.” So it depends on how the class actually uses the field. It might assume that it’s not null because it was a required constructor parameter.","body":"@user207421 did you read the link in the question? “When the stream is read by an earlier class, the value of the field will be set to the default value because no value is available in the stream. However, this default value may adversely impair the ability of the earlier version to fulfill its contract.” So it depends on how the class actually uses the field. It might assume that it’s not null because it was a required constructor parameter."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1691138483,"post_id":76831379,"comment_id":135454131,"body_markdown":"We haven’t seen the class, so we don’t know if that’s the case here. My earlier comment just meant that forward compatibility in general is important for zero-downtime deployments.","body":"We haven’t seen the class, so we don’t know if that’s the case here. My earlier comment just meant that forward compatibility in general is important for zero-downtime deployments."},{"owner":{"account_id":16306907,"reputation":117,"user_id":11776660,"display_name":"dssof"},"score":0,"creation_date":1691155824,"post_id":76831379,"comment_id":135457519,"body_markdown":"@TimMoore in my case the most likely situation is new version of the code reading old serialized version. We use sticky sessions so, when we do a deployment, the balancer moves users to a another server (with old code) and after the deployment the users go back to the previous server. So in this case new code has old version of the session.","body":"@TimMoore in my case the most likely situation is new version of the code reading old serialized version. We use sticky sessions so, when we do a deployment, the balancer moves users to a another server (with old code) and after the deployment the users go back to the previous server. So in this case new code has old version of the session."},{"owner":{"account_id":16306907,"reputation":117,"user_id":11776660,"display_name":"dssof"},"score":0,"creation_date":1691155895,"post_id":76831379,"comment_id":135457539,"body_markdown":"@TimMoore also, one of my doubts is, in this case, is java going to throw an incompatible class error?","body":"@TimMoore also, one of my doubts is, in this case, is java going to throw an incompatible class error?"},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1691161539,"post_id":76831379,"comment_id":135458957,"body_markdown":"No, I don’t think it will throw an incompatible class error. At least, that’s what the answer to the question linked as a duplicate says.","body":"No, I don’t think it will throw an incompatible class error. At least, that’s what the answer to the question linked as a duplicate says."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1691193072,"post_id":76831379,"comment_id":135463796,"body_markdown":"@TimMoore I&#39;ve addressed that already, and I first read the words you mention in 1997. The change is stream-compatible but *possibly* not application-compatible. We don&#39;t know that. You don&#39;t know that. You&#39;re not in a position to say it is a problem in this case.","body":"@TimMoore I&#39;ve addressed that already, and I first read the words you mention in 1997. The change is stream-compatible but <i>possibly</i> not application-compatible. We don&#39;t know that. You don&#39;t know that. You&#39;re not in a position to say it is a problem in this case."}],"owner":{"account_id":16306907,"reputation":117,"user_id":11776660,"display_name":"dssof"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1691131190,"answer_count":0,"score":0,"last_activity_date":1691103045,"creation_date":1691093754,"question_id":76831379,"body_markdown":"I &#39;m trying to use Redis to store HTTP sessions for load balancing. The idea is to be able to deploy with zero downtime, for that I need to store the session in Redis so that users won&#39;t lose their session when they go from a server to another.\r\n\r\nTo do this, I need to make every class in the session serializable. I&#39;ve been reading about serialization and found out that there are some incompatible changes (source: https://docs.oracle.com/javase/8/docs/platform/serialization/spec/version.html#a6678).\r\n\r\nDuring my tests, I deleted a field from a class and surprisingly didn&#39;t run into any issues with serialization. But, I&#39;m not entirely sure if my test is foolproof.\r\n\r\nSo now, I&#39;m wondering if there&#39;s a way or some strategy to make those incompatible changes work properly and if this is necessary.","title":"Java serialization incompatible changes General August 3, 2023","body":"<p>I 'm trying to use Redis to store HTTP sessions for load balancing. The idea is to be able to deploy with zero downtime, for that I need to store the session in Redis so that users won't lose their session when they go from a server to another.</p>\n<p>To do this, I need to make every class in the session serializable. I've been reading about serialization and found out that there are some incompatible changes (source: <a href=\"https://docs.oracle.com/javase/8/docs/platform/serialization/spec/version.html#a6678\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/platform/serialization/spec/version.html#a6678</a>).</p>\n<p>During my tests, I deleted a field from a class and surprisingly didn't run into any issues with serialization. But, I'm not entirely sure if my test is foolproof.</p>\n<p>So now, I'm wondering if there's a way or some strategy to make those incompatible changes work properly and if this is necessary.</p>\n"},{"tags":["java","unit-testing","jdbc","mocking","dao"],"answers":[{"tags":[],"owner":{"account_id":1064245,"reputation":85256,"user_id":1065197,"accept_rate":88,"display_name":"Luiggi Mendoza"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1418225020,"creation_date":1418225020,"answer_id":27404661,"question_id":27404514,"body_markdown":"Use a proper mock framework like PowerMock or EasyMock (or both) or Mockito and do concrete unit testing for the class implementation. Do not create a `UserDaoMock` class implementation because then you&#39;re not covering the code in `UseDaoImpl` class, which is one of the advantages of unit testing.\r\n","title":"Java. Mock data access object","body":"<p>Use a proper mock framework like PowerMock or EasyMock (or both) or Mockito and do concrete unit testing for the class implementation. Do not create a <code>UserDaoMock</code> class implementation because then you're not covering the code in <code>UseDaoImpl</code> class, which is one of the advantages of unit testing.</p>\n"},{"tags":[],"owner":{"account_id":42147,"reputation":16251,"user_id":2326914,"accept_rate":33,"display_name":"Rog&#233;rio"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1418237066,"creation_date":1418237066,"answer_id":27408528,"question_id":27404514,"body_markdown":"You can unit test the `LoginAction` class from the [gist](https://gist.github.com/yaromir/e0a80e33da884e0820b2) as shown in the following test, which uses the JMockit mocking library:\r\n\r\n    public class LoginTest\r\n    {\r\n        @Tested LoginAction action;\r\n        @Mocked ActionMapping mapping;\r\n        @Mocked HttpServletRequest request;\r\n        @Mocked HttpServletResponse response;\r\n        @Capturing UserDao userDao;\r\n\r\n        @Test\r\n        public void loginUser()\r\n        {\r\n            final String username = &quot;user&quot;;\r\n            final String password = &quot;password&quot;;\r\n            LoginForm form = new LoginForm();\r\n            form.setUsername(username);\r\n            form.setPassword(password);\r\n\r\n            final ActionForward afterLogin = new ActionForward(&quot;home&quot;);\r\n\r\n            new Expectations() {{\r\n                userDao.checkCredentials(username, password); result = true;\r\n                mapping.findForward(&quot;successful-login&quot;); result = afterLogin;\r\n            }};\r\n\r\n            ActionForward forwardTo = action.execute(mapping, form, request, response);\r\n\r\n            assertSame(forwardTo, afterLogin);\r\n            new Verifications() {{ userDao.terminate(true); }};\r\n        }\r\n    }\r\n","title":"Java. Mock data access object","body":"<p>You can unit test the <code>LoginAction</code> class from the <a href=\"https://gist.github.com/yaromir/e0a80e33da884e0820b2\" rel=\"nofollow\">gist</a> as shown in the following test, which uses the JMockit mocking library:</p>\n\n<pre><code>public class LoginTest\n{\n    @Tested LoginAction action;\n    @Mocked ActionMapping mapping;\n    @Mocked HttpServletRequest request;\n    @Mocked HttpServletResponse response;\n    @Capturing UserDao userDao;\n\n    @Test\n    public void loginUser()\n    {\n        final String username = \"user\";\n        final String password = \"password\";\n        LoginForm form = new LoginForm();\n        form.setUsername(username);\n        form.setPassword(password);\n\n        final ActionForward afterLogin = new ActionForward(\"home\");\n\n        new Expectations() {{\n            userDao.checkCredentials(username, password); result = true;\n            mapping.findForward(\"successful-login\"); result = afterLogin;\n        }};\n\n        ActionForward forwardTo = action.execute(mapping, form, request, response);\n\n        assertSame(forwardTo, afterLogin);\n        new Verifications() {{ userDao.terminate(true); }};\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1743794,"reputation":5519,"user_id":1594449,"display_name":"gknicker"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1418239836,"creation_date":1418239836,"answer_id":27409302,"question_id":27404514,"body_markdown":"What you need is [the simplest thing that could possibly work][1]. Here is a Hello World example for just that.\r\n\r\n&lt;!-- begin snippet --&gt;\r\n\r\n    /* DAO with a data access method */\r\n    public class HelloWorldDAO\r\n    {\r\n    \tpublic String findGreeting()\r\n    \t{\r\n    \t\treturn &quot;Hello from the database!&quot;;\r\n    \t}\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n&lt;!-- begin snippet --&gt;\r\n\r\n    /* Struts Action class with execute method */\r\n    public class HelloWorldAction implements Action\r\n    {\r\n    \tprivate String greeting;\r\n\r\n    \t/* Uses indirection for DAO construction */\r\n    \t@Override\r\n    \tpublic String execute() throws Exception {\r\n    \t\tHelloWorldDAO dao = newHelloWorldDAO();\r\n    \t\tsetGreeting(dao.findGreeting());\r\n    \t\treturn SUCCESS;\r\n    \t}\r\n\r\n    \t/* The simplest possible dependency injection */\r\n    \tprotected HelloWorldDAO newHelloWorldDAO() {\r\n    \t\treturn new HelloWorldDAO();\r\n    \t}\r\n\r\n    \tpublic String getGreeting() {\r\n    \t\treturn this.greeting;\r\n    \t}\r\n\r\n    \tpublic void setGreeting(String greeting) {\r\n    \t\tthis.greeting = greeting;\r\n    \t}\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n&lt;!-- begin snippet --&gt;\r\n\r\n    /* Unit tests for HelloWorldAction */\r\n    public class HelloWorldActionTest\r\n    {\r\n    \t@Test\r\n    \tpublic void testExecute() throws Exception\r\n    \t{\r\n    \t\tfinal String expectedGreeting = &quot;Hello Test!&quot;;\r\n    \t\tString expectedForward = &quot;success&quot;;\r\n\r\n    \t\tHelloWorldAction testAction = new HelloWorldAction() {\r\n    \t\t\t/* Override dependency injection method to substitute a mock impl */\r\n    \t\t\t@Override\r\n    \t\t\tprotected HelloWorldDAO newHelloWorldDAO()\r\n    \t\t\t{\r\n    \t\t\t\treturn new HelloWorldDAO() {\r\n    \t\t\t\t\t@Override\r\n    \t\t\t\t\tpublic String findGreeting()\r\n    \t\t\t\t\t{\r\n    \t\t\t\t\t\treturn expectedGreeting;\r\n    \t\t\t\t\t}\r\n    \t\t\t\t};\r\n    \t\t\t}\r\n    \t\t};\r\n\r\n    \t\tString actualForward = testAction.execute();\r\n    \t\tString actualGreeting = testAction.getGreeting();\r\n\r\n    \t\tassertEquals(&quot;forward&quot;, expectedForward, actualForward);\r\n    \t\tassertEquals(&quot;greeting&quot;, expectedGreeting, actualGreeting);\r\n    \t}\r\n    }\r\n\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n  [1]: http://www.artima.com/intv/simplest.html","title":"Java. Mock data access object","body":"<p>What you need is <a href=\"http://www.artima.com/intv/simplest.html\" rel=\"nofollow\">the simplest thing that could possibly work</a>. Here is a Hello World example for just that.</p>\n\n\n\n<pre><code>/* DAO with a data access method */\npublic class HelloWorldDAO\n{\n    public String findGreeting()\n    {\n        return \"Hello from the database!\";\n    }\n}\n</code></pre>\n\n\n\n\n\n<pre><code>/* Struts Action class with execute method */\npublic class HelloWorldAction implements Action\n{\n    private String greeting;\n\n    /* Uses indirection for DAO construction */\n    @Override\n    public String execute() throws Exception {\n        HelloWorldDAO dao = newHelloWorldDAO();\n        setGreeting(dao.findGreeting());\n        return SUCCESS;\n    }\n\n    /* The simplest possible dependency injection */\n    protected HelloWorldDAO newHelloWorldDAO() {\n        return new HelloWorldDAO();\n    }\n\n    public String getGreeting() {\n        return this.greeting;\n    }\n\n    public void setGreeting(String greeting) {\n        this.greeting = greeting;\n    }\n}\n</code></pre>\n\n\n\n\n\n<pre><code>/* Unit tests for HelloWorldAction */\npublic class HelloWorldActionTest\n{\n    @Test\n    public void testExecute() throws Exception\n    {\n        final String expectedGreeting = \"Hello Test!\";\n        String expectedForward = \"success\";\n\n        HelloWorldAction testAction = new HelloWorldAction() {\n            /* Override dependency injection method to substitute a mock impl */\n            @Override\n            protected HelloWorldDAO newHelloWorldDAO()\n            {\n                return new HelloWorldDAO() {\n                    @Override\n                    public String findGreeting()\n                    {\n                        return expectedGreeting;\n                    }\n                };\n            }\n        };\n\n        String actualForward = testAction.execute();\n        String actualGreeting = testAction.getGreeting();\n\n        assertEquals(\"forward\", expectedForward, actualForward);\n        assertEquals(\"greeting\", expectedGreeting, actualGreeting);\n    }\n}\n</code></pre>\n\n\n"}],"owner":{"account_id":1519182,"reputation":375,"user_id":1419375,"accept_rate":56,"display_name":"yaromir"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2562,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":27409302,"answer_count":3,"score":0,"last_activity_date":1691102317,"creation_date":1418224563,"question_id":27404514,"body_markdown":"I&#39;ve encountered problem with mocking data access logic.\r\n\r\nI&#39;m developing web application using JavaEE, Struts and my custom data access logic. In this application Struts Action operates with UserDao to retrieve User objects. Lifecycle of the UserDao object is tied to the JDBC transaction. Idea is that when Action creates UserDao object it starts JDBC transaction (necessary JDBC stuff is stored inside UserDao object), all invocations of UserDao methods operate in single JDBC transaction and then Action terminates UserDao object finishing transaction (with either commit or rollback).\r\n\r\nThe problem is that during tests of the Actions i need to mock this UserDao to make it return User objects with necessary test data.\r\n\r\nThe only solution i found so far is horrible. I&#39;ve made following: splitted UserDao into UserDao interface and UseDaoImpl class that implements it. This interface will also be implemented by UserDaoMock that will be returning necessary test data. Next i need some factory that will return real UserDao (UserDaoImpl) in production run and mock (UserDaoMock) in test run. This factory should not depend from UserDaoMock type to make production code of the application independent from mock .class file. This results into horrible design.\r\n\r\nShortcomings:\r\n\r\nIn factory:\r\n\r\n - I need an instance of UserDao inside factory just to be able to call `instantiate` method (which is in fact copy constructor, but i need it to be a method to be able to use polymorphism to choose between UserDaoImpl or UserDaoMock) to create another object of UserDao that will be associated with transaction (depending on runtime type it will be `instantiate` method of either UserDaoImpl or UserDaoMock).\r\n\r\n    public class UserDaoFactory {\r\n\r\n        private static UserDaoFactory instance;\r\n        private UserDao exampleUserDao;\r\n\r\n        public static UserDaoFactory getInstance() {\r\n            if(instance == null) {\r\n                instance = new UserDaoFactory();\r\n                // By default we initialize factory with example of real UserDao.\r\n                // In test will be set to example of UserDaoMock with setExampleUserDao method.\r\n                instance.setExampleUserDao(new UserDaoImpl(true));\r\n            }\r\n            return instance;\r\n        }\r\n\r\n        public UserDao getUserDao() {\r\n            return exampleUserDao.instantiate(true);\r\n        }\r\n\r\n        public void setExampleUserDao(UserDao userDao) {\r\n            this.exampleUserDao = userDao;\r\n        }\r\n\r\n   }\r\n\r\nIn UserDao:\r\n\r\n- I need both `instantiate` method (which in fact is copy constructor).\r\n- Despite that i also need public constructor to initialize factory with example.\r\n- Constructor should have parameter that tells whether it is example or not (whether to start transaction or not).\r\n\r\n        public final class UserDaoImpl implements UserDao {\r\n\r\n            private DataSource ds;\r\n            private Connection conn;\r\n\r\n            public UserDao instantiate(boolean startTransaction) {\r\n                if(startTransaction) {\r\n                    return new UserDaoImpl(true);\r\n                } else {\r\n                    return new UserDaoImpl(false);\r\n                }\r\n            }\r\n\r\n            public UserDaoImpl(boolean initiate) {\r\n                if(initiate) {\r\n                    // DB connection initialization and start of the transaction\r\n                } else {\r\n                    new UserDaoImpl();\r\n                }\r\n            }\r\n\r\n            private UserDaoImpl() {\r\n            }\r\n\r\n            @Override\r\n            public void terminate(boolean commit) {\r\n                // End of the transaction and DB connection termination\r\n            }\r\n\r\n            // Other interface methods implementation ommited\r\n\r\n        }\r\n\r\nIs there a way to make proper design for testability in this case?\r\n\r\nOr, if not, maybe the cause of the problem is that i decided to tie UserDao lifecycle to JDBC transaction? What is possible alternatives? To make UserDao singleton? Won&#39;t this be an application bottleneck if all DB interaction will be done via single object.\r\n\r\nOr, can you suggest another data access pattern that is more easy to mock?\r\n\r\nPlease, help. It is the most horrible design i did in my life.\r\n\r\nThanks in advance.\r\n","title":"Java. Mock data access object","body":"<p>I've encountered problem with mocking data access logic.</p>\n<p>I'm developing web application using JavaEE, Struts and my custom data access logic. In this application Struts Action operates with UserDao to retrieve User objects. Lifecycle of the UserDao object is tied to the JDBC transaction. Idea is that when Action creates UserDao object it starts JDBC transaction (necessary JDBC stuff is stored inside UserDao object), all invocations of UserDao methods operate in single JDBC transaction and then Action terminates UserDao object finishing transaction (with either commit or rollback).</p>\n<p>The problem is that during tests of the Actions i need to mock this UserDao to make it return User objects with necessary test data.</p>\n<p>The only solution i found so far is horrible. I've made following: splitted UserDao into UserDao interface and UseDaoImpl class that implements it. This interface will also be implemented by UserDaoMock that will be returning necessary test data. Next i need some factory that will return real UserDao (UserDaoImpl) in production run and mock (UserDaoMock) in test run. This factory should not depend from UserDaoMock type to make production code of the application independent from mock .class file. This results into horrible design.</p>\n<p>Shortcomings:</p>\n<p>In factory:</p>\n<ul>\n<li><p>I need an instance of UserDao inside factory just to be able to call <code>instantiate</code> method (which is in fact copy constructor, but i need it to be a method to be able to use polymorphism to choose between UserDaoImpl or UserDaoMock) to create another object of UserDao that will be associated with transaction (depending on runtime type it will be <code>instantiate</code> method of either UserDaoImpl or UserDaoMock).</p>\n<p>public class UserDaoFactory {</p>\n<pre><code> private static UserDaoFactory instance;\n private UserDao exampleUserDao;\n\n public static UserDaoFactory getInstance() {\n     if(instance == null) {\n         instance = new UserDaoFactory();\n         // By default we initialize factory with example of real UserDao.\n         // In test will be set to example of UserDaoMock with setExampleUserDao method.\n         instance.setExampleUserDao(new UserDaoImpl(true));\n     }\n     return instance;\n }\n\n public UserDao getUserDao() {\n     return exampleUserDao.instantiate(true);\n }\n\n public void setExampleUserDao(UserDao userDao) {\n     this.exampleUserDao = userDao;\n }\n</code></pre>\n<p>}</p>\n</li>\n</ul>\n<p>In UserDao:</p>\n<ul>\n<li><p>I need both <code>instantiate</code> method (which in fact is copy constructor).</p>\n</li>\n<li><p>Despite that i also need public constructor to initialize factory with example.</p>\n</li>\n<li><p>Constructor should have parameter that tells whether it is example or not (whether to start transaction or not).</p>\n<pre><code>  public final class UserDaoImpl implements UserDao {\n\n      private DataSource ds;\n      private Connection conn;\n\n      public UserDao instantiate(boolean startTransaction) {\n          if(startTransaction) {\n              return new UserDaoImpl(true);\n          } else {\n              return new UserDaoImpl(false);\n          }\n      }\n\n      public UserDaoImpl(boolean initiate) {\n          if(initiate) {\n              // DB connection initialization and start of the transaction\n          } else {\n              new UserDaoImpl();\n          }\n      }\n\n      private UserDaoImpl() {\n      }\n\n      @Override\n      public void terminate(boolean commit) {\n          // End of the transaction and DB connection termination\n      }\n\n      // Other interface methods implementation ommited\n\n  }\n</code></pre>\n</li>\n</ul>\n<p>Is there a way to make proper design for testability in this case?</p>\n<p>Or, if not, maybe the cause of the problem is that i decided to tie UserDao lifecycle to JDBC transaction? What is possible alternatives? To make UserDao singleton? Won't this be an application bottleneck if all DB interaction will be done via single object.</p>\n<p>Or, can you suggest another data access pattern that is more easy to mock?</p>\n<p>Please, help. It is the most horrible design i did in my life.</p>\n<p>Thanks in advance.</p>\n"},{"tags":["java","apache-kafka","apache-kafka-connect"],"owner":{"account_id":8409577,"reputation":172,"user_id":6311983,"display_name":"Nilanjan Sarkar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691101644,"creation_date":1691069127,"question_id":76828538,"body_markdown":"I have trying to emit custom metrics from a Kafka Connect SMT. However the problem is that I need the current connector name and task id at runtime to properly configure the MBean. It seems there is no way to get this info at runtime directly\r\n\r\nTried to get the information form the configure method in the SMT. But it seems this only contains SMT specific configs","title":"How can get connector name and task id inside a Custom Kafka Connect SMT at runtime?","body":"<p>I have trying to emit custom metrics from a Kafka Connect SMT. However the problem is that I need the current connector name and task id at runtime to properly configure the MBean. It seems there is no way to get this info at runtime directly</p>\n<p>Tried to get the information form the configure method in the SMT. But it seems this only contains SMT specific configs</p>\n"},{"tags":["java","serialization","lambda"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1691100430,"post_id":76831692,"comment_id":135450123,"body_markdown":"You need to cast the lambda itself, not the variable.","body":"You need to cast the lambda itself, not the variable."}],"answers":[{"tags":[],"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691100746,"creation_date":1691100746,"answer_id":76831885,"question_id":76831692,"body_markdown":"The cast is failing because the BiPredicate was already instantiated with a non-Serializable lambda. To make it serializable, you need to cast the lambda expression itself:\r\n\r\n    head = new Node((BiPredicate&lt;Player,NPC&gt; &amp; Serializable)(p,q) -&gt; true);\r\n\r\n[**Ideone Demo**][1]\r\n\r\n\r\n  [1]: https://ideone.com/FvbPjj","title":"Serializing lambda expression java (predicate/bipredicate)","body":"<p>The cast is failing because the BiPredicate was already instantiated with a non-Serializable lambda. To make it serializable, you need to cast the lambda expression itself:</p>\n<pre><code>head = new Node((BiPredicate&lt;Player,NPC&gt; &amp; Serializable)(p,q) -&gt; true);\n</code></pre>\n<p><a href=\"https://ideone.com/FvbPjj\" rel=\"nofollow noreferrer\"><strong>Ideone Demo</strong></a></p>\n"}],"owner":{"account_id":27313298,"reputation":29,"user_id":21749640,"display_name":"user21749640"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76831885,"answer_count":1,"score":0,"last_activity_date":1691100746,"creation_date":1691097894,"question_id":76831692,"body_markdown":"I am currently attempting to write a generalization of dialogue routines for my game (currently, every npc character has their own class where i have to hardcode in a bunch of if-else statements)\r\n\r\nto do so, I am writing a class DialogueTree which represents the dialogue. A dialogue tree is made up of Nodes which contain many fields, but the important one here is a BiPredicate &#39;req&#39;, which represents the requirements (stat, quest etc) of the player and npc for the player to go down this dialogue path. Here is the code for all of that so far.\r\n\r\n````````````````\r\npublic class DialogueTree implements Serializable {\r\n\r\n    private Node head;\r\n\r\n\tpublic DialogueTree() {\r\n\t\thead = new Node((p,q) -&gt; true);\r\n\t}\r\n\r\n\tpublic DialogueTree add(int[] path, BiPredicate&lt;Player,NPC&gt; req) {\r\n\t\thead.children.add(new Node(req));\r\n\t\treturn this;\r\n\t}\r\n\r\n    private static class Node implements Serializable {\r\n\t\tpublic List&lt;Node&gt; children;\r\n\t\tpublic BiPredicate&lt;Player,NPC&gt; req;\r\n\t\t\t\r\n\t\tpublic Node(BiPredicate&lt;Player,NPC&gt; req) {\r\n\t\t   this.req = req;\r\n\t\t}\r\n\t}\r\n}\r\n````````````````\r\n\r\ni left out a lot of the code because i don&#39;t want to distract with irrelevant details, but the main thing i wanna highlight is that when constructing these DialogueTrees i&#39;m passing in lambda expressions (the whole reason im doing this is so I don&#39;t have to write a new class for every single NPC&#39;s dialogue, so I don&#39;t want to write a class for a specific requirement that implements BiPredicate and Serializable)\r\n\r\nthe issue is have is when i start the game and try to save, the game crashes with an error citing the lambda expression as non-serializable. i tried casting req to serializable within the Node constructor\r\n\r\n```````````\r\nthis.req = (BiPredicate&lt;Player,NPC&gt; &amp; Serializable)req;\r\n```````````\r\n\r\nhowever that got me a class cast exception.\r\n\r\nany help is greatly appreciate :D","title":"Serializing lambda expression java (predicate/bipredicate)","body":"<p>I am currently attempting to write a generalization of dialogue routines for my game (currently, every npc character has their own class where i have to hardcode in a bunch of if-else statements)</p>\n<p>to do so, I am writing a class DialogueTree which represents the dialogue. A dialogue tree is made up of Nodes which contain many fields, but the important one here is a BiPredicate 'req', which represents the requirements (stat, quest etc) of the player and npc for the player to go down this dialogue path. Here is the code for all of that so far.</p>\n<pre><code>public class DialogueTree implements Serializable {\n\n    private Node head;\n\n    public DialogueTree() {\n        head = new Node((p,q) -&gt; true);\n    }\n\n    public DialogueTree add(int[] path, BiPredicate&lt;Player,NPC&gt; req) {\n        head.children.add(new Node(req));\n        return this;\n    }\n\n    private static class Node implements Serializable {\n        public List&lt;Node&gt; children;\n        public BiPredicate&lt;Player,NPC&gt; req;\n            \n        public Node(BiPredicate&lt;Player,NPC&gt; req) {\n           this.req = req;\n        }\n    }\n}\n</code></pre>\n<p>i left out a lot of the code because i don't want to distract with irrelevant details, but the main thing i wanna highlight is that when constructing these DialogueTrees i'm passing in lambda expressions (the whole reason im doing this is so I don't have to write a new class for every single NPC's dialogue, so I don't want to write a class for a specific requirement that implements BiPredicate and Serializable)</p>\n<p>the issue is have is when i start the game and try to save, the game crashes with an error citing the lambda expression as non-serializable. i tried casting req to serializable within the Node constructor</p>\n<pre><code>this.req = (BiPredicate&lt;Player,NPC&gt; &amp; Serializable)req;\n</code></pre>\n<p>however that got me a class cast exception.</p>\n<p>any help is greatly appreciate :D</p>\n"},{"tags":["java","spring","oop"],"comments":[{"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"score":0,"creation_date":1691077215,"post_id":76829223,"comment_id":135445745,"body_markdown":"This question will likely generate some opinions, but you have nailed the solution already.  Use a single `getProperty()` method that returns the appropriate property value given the feature flag status.","body":"This question will likely generate some opinions, but you have nailed the solution already.  Use a single <code>getProperty()</code> method that returns the appropriate property value given the feature flag status."},{"owner":{"account_id":9177947,"reputation":1625,"user_id":6822933,"display_name":"bbop99"},"score":0,"creation_date":1691079338,"post_id":76829223,"comment_id":135446227,"body_markdown":"@lane.maxwell main concern with this was introducing business logic (&amp; the feature flag service) into the Entity class. This seems to be a general anti-pattern. But so far don&#39;t see any neat alternative solutions","body":"@lane.maxwell main concern with this was introducing business logic (&amp; the feature flag service) into the Entity class. This seems to be a general anti-pattern. But so far don&#39;t see any neat alternative solutions"}],"answers":[{"tags":[],"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691100672,"creation_date":1691100672,"answer_id":76831879,"question_id":76829223,"body_markdown":"I&#39;m answering this in response to your question and comment.  As for the business logic, it is not an antipattern to include it with the domain; this is where that logic should reside.  I understand your concern about calling out to the feature service; here&#39;s a solution to avoid that, along with why I probably wouldn&#39;t do it this way.\r\n\r\nYou can throw a transient, non-serializable property into the entity where you want this behavior.  The property would hold the value of the feature flag.\r\n\r\n    @Entity\r\n    public class SomeEntity {\r\n      @Transient\r\n      @JsonIgnore\r\n      Boolean featureAActive = Boolean.False; // default to false\r\n\r\n      @Column\r\n      String propertyA;\r\n\r\n      @Column\r\n      String propertyB;\r\n\r\n      public String getProperty() {\r\n         return featureAActive ? propertyA : propertyB;\r\n      }\r\n    }\r\n\r\nIn your service method, where you hydrate the entity, set the flag to a value corresponding to the feature.  Psuedo code here to give you a rough idea.\r\n\r\n    public SomeEntity getSomeEntity() {\r\n      SomeEntity someEntity = SomeEntityRepository.findById(12L);\r\n      someEntity.setFeatureAActive(featureService.isFeatureActive(&quot;MY_FEATURE&quot;);\r\n      return someEntity;\r\n    }\r\n\r\nNow, the downside to using this approach is this.  Once you create that Entity and set the flag, as long as it&#39;s in memory, it will use the value set when you created it.  This is not ideal because that feature could be turned off/on, but you&#39;ll only ever have the state that it was in during creation.\r\n\r\nFor this reason, I would not put this logic into the entity, but I&#39;d push it up to the consumer.  Where those properties are consumed, let them query the feature.  Psuedo code again, assume that the output from `myFeatureManager.isActive(&quot;MY_FEATURE&quot;)` is a boolean value representing the state of the feature.\r\n\r\n    String thePropertyValueDrivenByTheFeatureFlag = myFeatureManager.isActive(&quot;MY_FEATURE&quot;) ? someEntity.getPropertyA() : someEntity.getPropertyB();\r\n\r\n","title":"Expand/contract implementation for heavily reused Spring Entity","body":"<p>I'm answering this in response to your question and comment.  As for the business logic, it is not an antipattern to include it with the domain; this is where that logic should reside.  I understand your concern about calling out to the feature service; here's a solution to avoid that, along with why I probably wouldn't do it this way.</p>\n<p>You can throw a transient, non-serializable property into the entity where you want this behavior.  The property would hold the value of the feature flag.</p>\n<pre><code>@Entity\npublic class SomeEntity {\n  @Transient\n  @JsonIgnore\n  Boolean featureAActive = Boolean.False; // default to false\n\n  @Column\n  String propertyA;\n\n  @Column\n  String propertyB;\n\n  public String getProperty() {\n     return featureAActive ? propertyA : propertyB;\n  }\n}\n</code></pre>\n<p>In your service method, where you hydrate the entity, set the flag to a value corresponding to the feature.  Psuedo code here to give you a rough idea.</p>\n<pre><code>public SomeEntity getSomeEntity() {\n  SomeEntity someEntity = SomeEntityRepository.findById(12L);\n  someEntity.setFeatureAActive(featureService.isFeatureActive(&quot;MY_FEATURE&quot;);\n  return someEntity;\n}\n</code></pre>\n<p>Now, the downside to using this approach is this.  Once you create that Entity and set the flag, as long as it's in memory, it will use the value set when you created it.  This is not ideal because that feature could be turned off/on, but you'll only ever have the state that it was in during creation.</p>\n<p>For this reason, I would not put this logic into the entity, but I'd push it up to the consumer.  Where those properties are consumed, let them query the feature.  Psuedo code again, assume that the output from <code>myFeatureManager.isActive(&quot;MY_FEATURE&quot;)</code> is a boolean value representing the state of the feature.</p>\n<pre><code>String thePropertyValueDrivenByTheFeatureFlag = myFeatureManager.isActive(&quot;MY_FEATURE&quot;) ? someEntity.getPropertyA() : someEntity.getPropertyB();\n</code></pre>\n"}],"owner":{"account_id":9177947,"reputation":1625,"user_id":6822933,"display_name":"bbop99"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76831879,"answer_count":1,"score":0,"last_activity_date":1691100672,"creation_date":1691074141,"question_id":76829223,"body_markdown":"we would like to extend an existing Spring @Entity with a new set of columns. Depending on a feature flag value the new columns should be used rather than the existing old set (we&#39;re expanding the DB schema rather than updating the columns in place as we may need to switch between the two modes for the coming weeks).\r\n\r\nThe Spring Entity is heavily reused throughout different services.\r\n\r\nExample Entity:\r\n```\r\n@Entity\r\npublic class SomeEntity {\r\n  ...other columns\r\n\r\n  @Column\r\n  String propertyA;\r\n\r\n  @Column\r\n  String propertyB;\r\n\r\n  public String getPropertyA() { return propertyA; }\r\n  public String getPropertyB() { return propertyB; }\r\n}\r\n```\r\n\r\nIn the real example there are 3 columns that are being replaced. `getPropertyA` is an existing function that&#39;s heavily used (~20-30 calls throughout different services &amp; transformer classes). `getPropertyB` is the newly introduced getter for the new property. Depending on the feature flag status, the application should start using propertyB rather than propertyA.\r\n\r\nIs the best approach to introduce the business logic into the entity class via a `getProperty()` class that hides the A/B logic? Any advice would be appreciated.","title":"Expand/contract implementation for heavily reused Spring Entity","body":"<p>we would like to extend an existing Spring @Entity with a new set of columns. Depending on a feature flag value the new columns should be used rather than the existing old set (we're expanding the DB schema rather than updating the columns in place as we may need to switch between the two modes for the coming weeks).</p>\n<p>The Spring Entity is heavily reused throughout different services.</p>\n<p>Example Entity:</p>\n<pre><code>@Entity\npublic class SomeEntity {\n  ...other columns\n\n  @Column\n  String propertyA;\n\n  @Column\n  String propertyB;\n\n  public String getPropertyA() { return propertyA; }\n  public String getPropertyB() { return propertyB; }\n}\n</code></pre>\n<p>In the real example there are 3 columns that are being replaced. <code>getPropertyA</code> is an existing function that's heavily used (~20-30 calls throughout different services &amp; transformer classes). <code>getPropertyB</code> is the newly introduced getter for the new property. Depending on the feature flag status, the application should start using propertyB rather than propertyA.</p>\n<p>Is the best approach to introduce the business logic into the entity class via a <code>getProperty()</code> class that hides the A/B logic? Any advice would be appreciated.</p>\n"},{"tags":["java","spring-boot","jar"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1659507116,"post_id":73216942,"comment_id":129307978,"body_markdown":"&quot;UnsatisfiedDependencyException because could not resolve placeholder&quot;. I honestly do not see a link between these two","body":"&quot;UnsatisfiedDependencyException because could not resolve placeholder&quot;. I honestly do not see a link between these two"},{"owner":{"account_id":25228306,"reputation":35,"user_id":19119664,"display_name":"Ensei"},"score":0,"creation_date":1659507906,"post_id":73216942,"comment_id":129308232,"body_markdown":"@Stultuske I added detailed description of exception above","body":"@Stultuske I added detailed description of exception above"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1659508427,"post_id":73216942,"comment_id":129308374,"body_markdown":"you have posted a WARNING, not an exception. Either way, in your properties (the right one), you need to add a property with this key: priceMeteorRain, and set a value. That&#39;s what it&#39;s complaining about","body":"you have posted a WARNING, not an exception. Either way, in your properties (the right one), you need to add a property with this key: priceMeteorRain, and set a value. That&#39;s what it&#39;s complaining about"},{"owner":{"account_id":25228306,"reputation":35,"user_id":19119664,"display_name":"Ensei"},"score":0,"creation_date":1659508926,"post_id":73216942,"comment_id":129308505,"body_markdown":"@Stultuske My property file already has the key priceMeteorRain. If it was missed, there would have been error during execution in IntelliJ IDEA but the execution is correct.","body":"@Stultuske My property file already has the key priceMeteorRain. If it was missed, there would have been error during execution in IntelliJ IDEA but the execution is correct."},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1659509861,"post_id":73216942,"comment_id":129308786,"body_markdown":"apparently you added it in the wrong property/yaml/... file. your error message is quite specific: that placeholder isn&#39;t found in your properties","body":"apparently you added it in the wrong property/yaml/... file. your error message is quite specific: that placeholder isn&#39;t found in your properties"}],"owner":{"account_id":25228306,"reputation":35,"user_id":19119664,"display_name":"Ensei"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":405,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691099988,"creation_date":1659506882,"question_id":73216942,"body_markdown":"I faced the problem that during execution of my Spring Boot app in IntelliJ IDEA (Java) all works fine. But when I created jar file and tried to run the app in console, I have UnsatisfiedDependencyException because could not resolve placeholder.\r\n\r\nDetailed description of Exception is below:\r\n```WARN org.springframework.context.annotation.AnnotationConfigApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;controllerBattle&#39;: Unsatisfied dependency expressed through field &#39;controllerMarket&#39;; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;controllerMarketBean&#39;: Unsatisfied dependency expressed through field &#39;meteorRain&#39;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;meteorRainBean&#39;: Injection of autowired dependencies failed; nested exception is java.lang.IllegalArgumentException: Could not resolve placeholder &#39;priceMeteorRain&#39; in value &quot;${priceMeteorRain}&quot;```\r\n\r\n\r\nI researched this problem and found similar problem raised 2 years ago:\r\nhttps://stackoverflow.com/questions/62296538/spring-boot-could-not-resolve-placeholder\r\n\r\nBut it was related to kotlin and it was left unsolved.\r\n\r\nAre there ways to solve this problem for Java?\r\n\r\nI&#39;ll be grateful for your help.","title":"Could not resolve placeholder in jar file","body":"<p>I faced the problem that during execution of my Spring Boot app in IntelliJ IDEA (Java) all works fine. But when I created jar file and tried to run the app in console, I have UnsatisfiedDependencyException because could not resolve placeholder.</p>\n<p>Detailed description of Exception is below:\n<code>WARN org.springframework.context.annotation.AnnotationConfigApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'controllerBattle': Unsatisfied dependency expressed through field 'controllerMarket'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'controllerMarketBean': Unsatisfied dependency expressed through field 'meteorRain'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'meteorRainBean': Injection of autowired dependencies failed; nested exception is java.lang.IllegalArgumentException: Could not resolve placeholder 'priceMeteorRain' in value &quot;${priceMeteorRain}&quot;</code></p>\n<p>I researched this problem and found similar problem raised 2 years ago:\n<a href=\"https://stackoverflow.com/questions/62296538/spring-boot-could-not-resolve-placeholder\">Spring boot Could not resolve placeholder</a></p>\n<p>But it was related to kotlin and it was left unsolved.</p>\n<p>Are there ways to solve this problem for Java?</p>\n<p>I'll be grateful for your help.</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1691097291,"post_id":76831567,"comment_id":135449651,"body_markdown":"Is the bean `TrialHolder` discovered? I.e. what is (are) the root package(s) for bean discovery?","body":"Is the bean <code>TrialHolder</code> discovered? I.e. what is (are) the root package(s) for bean discovery?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1691097772,"post_id":76831567,"comment_id":135449742,"body_markdown":"Please post the full text of the exception and stack trace. @Turing85 as `DAProvider` is using constructor injection, won&#39;t the spring context fail to start if there&#39;s no `TrialHolder`?","body":"Please post the full text of the exception and stack trace. @Turing85 as <code>DAProvider</code> is using constructor injection, won&#39;t the spring context fail to start if there&#39;s no <code>TrialHolder</code>?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1691098022,"post_id":76831567,"comment_id":135449776,"body_markdown":"And please show the bean that `DAProvider` is used in.","body":"And please show the bean that <code>DAProvider</code> is used in."},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1691098452,"post_id":76831567,"comment_id":135449858,"body_markdown":"@tgdavies hmm... true...","body":"@tgdavies hmm... true..."},{"owner":{"account_id":5337909,"reputation":27,"user_id":7802066,"display_name":"dojacat"},"score":0,"creation_date":1691098531,"post_id":76831567,"comment_id":135449875,"body_markdown":"the @ComponentScan(&quot;com.role&quot;) happens at this package level","body":"the @ComponentScan(&quot;com.role&quot;) happens at this package level"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1691098603,"post_id":76831567,"comment_id":135449885,"body_markdown":"`DAProvider` is in `com.metadata`.","body":"<code>DAProvider</code> is in <code>com.metadata</code>."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1691098657,"post_id":76831567,"comment_id":135449892,"body_markdown":"Please also show the class where `DAProvider` is injected and `checkHolder` is called.","body":"Please also show the class where <code>DAProvider</code> is injected and <code>checkHolder</code> is called."},{"owner":{"account_id":5337909,"reputation":27,"user_id":7802066,"display_name":"dojacat"},"score":0,"creation_date":1691099081,"post_id":76831567,"comment_id":135449961,"body_markdown":"updated the usage of DAProvider, once I made private final TrialHolder trialHolder\nI am getting the following error \n\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;ConfigProvider&#39;: Unsatisfied dependency expressed through field &#39;daProvider&#39;;","body":"updated the usage of DAProvider, once I made private final TrialHolder trialHolder I am getting the following error   Caused by: org.springframework.beans.factory.UnsatisfiedDependencyExcep&zwnj;&#8203;tion: Error creating bean with name &#39;ConfigProvider&#39;: Unsatisfied dependency expressed through field &#39;daProvider&#39;;"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1691099324,"post_id":76831567,"comment_id":135449996,"body_markdown":"So perhaps because `com.metadata` is not being scanned.","body":"So perhaps because <code>com.metadata</code> is not being scanned."},{"owner":{"account_id":5337909,"reputation":27,"user_id":7802066,"display_name":"dojacat"},"score":0,"creation_date":1691099464,"post_id":76831567,"comment_id":135450022,"body_markdown":"added the trace","body":"added the trace"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1691099579,"post_id":76831567,"comment_id":135450034,"body_markdown":"Or rather because `com.role`isn&#39;t being scanned.","body":"Or rather because <code>com.role</code>isn&#39;t being scanned."},{"owner":{"account_id":5337909,"reputation":27,"user_id":7802066,"display_name":"dojacat"},"score":0,"creation_date":1691104323,"post_id":76831567,"comment_id":135450530,"body_markdown":"I tried creating the DAProvider in the same package as the ConfigProvider but it dint help","body":"I tried creating the DAProvider in the same package as the ConfigProvider but it dint help"}],"owner":{"account_id":5337909,"reputation":27,"user_id":7802066,"display_name":"dojacat"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691099449,"creation_date":1691096348,"question_id":76831567,"body_markdown":"Getting null pointer exception in DAProvider class as the TrialHolder object is always null. When I wired the TrialHolder directly to another class it works , but when I use it via DAProvider , it is null \r\n\r\nAny help is much appreciated...\r\n\r\nBelow are the relevant classes and configurations I have made :\r\n\r\nThis where the interceptor is added \r\n```package com.role.server.config;\r\n\r\nimport com.role.server.grpc.TrialInterceptorInterceptor;\r\nimport com.servicelibs.grpc.Grpc;\r\nimport io.grpc.Server;\r\nimport org.springframework.beans.factory.annotation.Qualifier;\r\nimport org.springframework.beans.factory.annotation.Value;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\n\r\n@Configuration\r\npublic class GrpcConfig {\r\n  @Bean(initMethod = &quot;start&quot;, destroyMethod = &quot;shutdown&quot;)\r\n  public Server grpcServer(\r\n      Grpc grpc,\r\n          TrialInterceptorInterceptor trialInterceptor)\r\n      throws NoSuchFieldException, IllegalAccessException {\r\n    Server server =\r\n        grpc.newServerBuilder()\r\n            .addService(testConfigServiceGrpc)\r\n            .withInterceptors(\r\n                trialInterceptor)\r\n            .build();\r\n\r\n    //other logic in place \r\n\r\n    return server;\r\n  }\r\n}\r\n```\r\nBelow is where the interceptor is defined\r\n```\r\npackage com.role.server.grpc;\r\n\r\nimport com.role.server.grpc.ms.grpc.TrialHolder;\r\nimport com.spiffe.sc;\r\nimport com.spiffe.sp;\r\nimport com.libs.oc.xfcc.XForwardedClientCert;\r\nimport com.libs.oc.xfcc.XForwardedClientCertList;\r\nimport io.grpc.*;\r\nimport io.grpc.ServerCall;\r\nimport io.grpc.ServerInterceptor;\r\nimport java.util.Objects;\r\nimport java.util.Optional;\r\nimport lombok.Getter;\r\nimport org.apache.commons.lang.StringUtils;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Component;\r\n\r\n@Component\r\npublic class TrialInterceptor implements ServerInterceptor {\r\n  @Autowired TrialHolder TrialHolder;\r\n  private static final Metadata.Key&lt;String&gt; HK =\r\n      Metadata.Key.of(&quot;x-forwarded-client-cert&quot;, Metadata.ASCII_STRING_MARSHALLER);\r\n\r\n  /**\r\n   * Intercept a gRPC call and inject context.\r\n   */\r\n  @Override\r\n  public &lt;ReqT, RespT&gt; ServerCall.Listener&lt;ReqT&gt; interceptCall(\r\n      ServerCall&lt;ReqT, RespT&gt; serverCall,\r\n      Metadata metadata,\r\n      ServerCallHandler&lt;ReqT, RespT&gt; serverCallHandler) {\r\n\r\n    Optional&lt;sci&gt; sci = getContextInfoFromClientCert(metadata);\r\n    if (!sci.isEmpty()) {\r\n      TrialHolder.setsu(sci.get().getsu());\r\n      TrialHolder.setsn(sci.get().getsn());\r\n    } else {\r\n      log.warn(&quot;sc is empty&quot;);\r\n    }\r\n\r\n    return new ForwardingServerCallListener.SimpleForwardingServerCallListener&lt;ReqT&gt;(\r\n        serverCallHandler.startCall(serverCall, metadata)) {\r\n\r\n      @Override\r\n      public void onComplete() {\r\n        super.onComplete();\r\n      }\r\n    };\r\n  }\r\n\r\n\r\n  private Optional&lt;sci&gt; getContextInfoFromClientCert(Metadata metadata) {\r\n    String xH = metadata.get(HK);\r\n    XForwardedClientCertList clientCerts = XForwardedClientCertList.fromString(xH);\r\n   if (clientCerts.size() &gt; 1) {\r\n      return clientCerts.stream()\r\n          .map(this::buildsci)\r\n          .filter(Objects::nonNull)\r\n          .findFirst();\r\n    } else {\r\n      return Optional.empty();\r\n    }\r\n  }\r\n\r\n  private sci buildsci(\r\n      XForwardedClientCert xforwardedClientCert) {\r\n   //logic to handle and return \r\n    return new sci(\r\n        sc.get().getService().get(), xforwardedClientCert.getSanUri());\r\n  }\r\n}\r\n```\r\n\r\nBelow is the object which I want to pass around \r\n```\r\npackage com.role.server.grpc.service.grpc;\r\n\r\nimport com.libs.opencontext.api.Key;\r\nimport com.libs.opencontext.impl.ocProvider;\r\nimport java.util.Optional;\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.apache.commons.lang3.StringUtils;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Component;\r\n\r\n@Slf4j\r\n@Component\r\npublic class TrialHolder {\r\n\r\n  private final ocProvider socProvider;\r\n\r\n  @Autowired\r\n  public TrialHolder(ocProvider socProvider) {\r\n    this.socProvider = socProvider;\r\n  }\r\n\r\n  private void addToContext(Key&lt;String&gt; key, String value) {\r\n    if (socProvider.isPresent() &amp;&amp; !StringUtils.isBlank(value)) {\r\n      socProvider.currentContext().put(key, value);\r\n    } \r\n  }\r\n\r\n  &lt;T&gt; Optional&lt;T&gt; getFromContext(Key&lt;T&gt; key) {\r\n    if (socProvider.isPresent()) {\r\n      return Optional.ofNullable(socProvider.currentContext().get(key));\r\n    } else {\r\n      return Optional.empty();\r\n    }\r\n  }\r\n\r\n//logic defined for below \r\n  public Optional&lt;String&gt; getsu() {\r\n    return getFromContext(&quot;su&quot;);\r\n  }\r\n\r\n  public void setsu(String su) {\r\n    addToContext(&quot;su&quot;, su);\r\n  }\r\n\r\n  public void setsn(String falconTeam) {\r\n    addToContext(&quot;sn&quot;, falconTeam);\r\n  }\r\n\r\n  public Optional&lt;String&gt; getsn() {\r\n    return getFromContext(&quot;sn&quot;);\r\n  }\r\n\r\n  public boolean isPresent() {\r\n    return socProvider.isPresent();\r\n  }\r\n}\r\n```\r\n\r\nThe below class is where trialHolder is coming in as null \r\n\r\n```\r\npackage com.metadata.da.utils;\r\nimport com.role.server.grpc.md.grpc.trialHolder;\r\nimport java.util.List;\r\nimport java.util.stream.Collectors;\r\nimport lombok.RequiredArgsConstructor;\r\nimport org.springframework.stereotype.Component;\r\n\r\n@Component\r\n@RequiredArgsConstructor\r\npublic class DAProvider {\r\n  private final TrialHolder trialHolder;\r\n\r\n  public boolean checkHolder() {\r\n    return  trialHolder.getsn().isPresent()\r\n  }\r\n}\r\n```\r\nUsage of DAprovider\r\n```\r\npackage com.md.dataaccess;\r\n\r\n\r\nimport com.md.da.utils.DAProvider;\r\nimport java.util.*;\r\nimport java.util.stream.Collectors;\r\nimport lombok.RequiredArgsConstructor;\r\nimport org.apache.commons.lang3.StringUtils;\r\nimport org.apache.spark.sql.types.DataType;\r\nimport org.apache.spark.sql.types.DataTypes;\r\nimport org.springframework.stereotype.Component;\r\n\r\n@Component\r\n@RequiredArgsConstructor\r\npublic class ConfigProvider {\r\n  private final DAProvider daProvider;\r\n\r\n  @Override\r\n  public Config createConfig() {\r\n     return daProvider.checkHolder()\r\n  }\r\n  }\r\n```\r\n\r\n ```Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;dACController&#39;: Unsatisfied dependency expressed through field &#39;configProvider&#39;; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;ConfigProvider&#39; defined in file ----: Unsatisfied dependency expressed through constructor parameter 1; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;dataAccessConfigV1Provider&#39; defined in file -----: Unsatisfied dependency expressed through constructor parameter 8; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;daProvider&#39; defined in file ---: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;com.role.server.grpc.service.grpc.TrialHolder&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: ```","title":"Class object is null within a util class always which is causing NPE","body":"<p>Getting null pointer exception in DAProvider class as the TrialHolder object is always null. When I wired the TrialHolder directly to another class it works , but when I use it via DAProvider , it is null</p>\n<p>Any help is much appreciated...</p>\n<p>Below are the relevant classes and configurations I have made :</p>\n<p>This where the interceptor is added</p>\n<pre><code>\nimport com.role.server.grpc.TrialInterceptorInterceptor;\nimport com.servicelibs.grpc.Grpc;\nimport io.grpc.Server;\nimport org.springframework.beans.factory.annotation.Qualifier;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\npublic class GrpcConfig {\n  @Bean(initMethod = &quot;start&quot;, destroyMethod = &quot;shutdown&quot;)\n  public Server grpcServer(\n      Grpc grpc,\n          TrialInterceptorInterceptor trialInterceptor)\n      throws NoSuchFieldException, IllegalAccessException {\n    Server server =\n        grpc.newServerBuilder()\n            .addService(testConfigServiceGrpc)\n            .withInterceptors(\n                trialInterceptor)\n            .build();\n\n    //other logic in place \n\n    return server;\n  }\n}\n</code></pre>\n<p>Below is where the interceptor is defined</p>\n<pre><code>package com.role.server.grpc;\n\nimport com.role.server.grpc.ms.grpc.TrialHolder;\nimport com.spiffe.sc;\nimport com.spiffe.sp;\nimport com.libs.oc.xfcc.XForwardedClientCert;\nimport com.libs.oc.xfcc.XForwardedClientCertList;\nimport io.grpc.*;\nimport io.grpc.ServerCall;\nimport io.grpc.ServerInterceptor;\nimport java.util.Objects;\nimport java.util.Optional;\nimport lombok.Getter;\nimport org.apache.commons.lang.StringUtils;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Component;\n\n@Component\npublic class TrialInterceptor implements ServerInterceptor {\n  @Autowired TrialHolder TrialHolder;\n  private static final Metadata.Key&lt;String&gt; HK =\n      Metadata.Key.of(&quot;x-forwarded-client-cert&quot;, Metadata.ASCII_STRING_MARSHALLER);\n\n  /**\n   * Intercept a gRPC call and inject context.\n   */\n  @Override\n  public &lt;ReqT, RespT&gt; ServerCall.Listener&lt;ReqT&gt; interceptCall(\n      ServerCall&lt;ReqT, RespT&gt; serverCall,\n      Metadata metadata,\n      ServerCallHandler&lt;ReqT, RespT&gt; serverCallHandler) {\n\n    Optional&lt;sci&gt; sci = getContextInfoFromClientCert(metadata);\n    if (!sci.isEmpty()) {\n      TrialHolder.setsu(sci.get().getsu());\n      TrialHolder.setsn(sci.get().getsn());\n    } else {\n      log.warn(&quot;sc is empty&quot;);\n    }\n\n    return new ForwardingServerCallListener.SimpleForwardingServerCallListener&lt;ReqT&gt;(\n        serverCallHandler.startCall(serverCall, metadata)) {\n\n      @Override\n      public void onComplete() {\n        super.onComplete();\n      }\n    };\n  }\n\n\n  private Optional&lt;sci&gt; getContextInfoFromClientCert(Metadata metadata) {\n    String xH = metadata.get(HK);\n    XForwardedClientCertList clientCerts = XForwardedClientCertList.fromString(xH);\n   if (clientCerts.size() &gt; 1) {\n      return clientCerts.stream()\n          .map(this::buildsci)\n          .filter(Objects::nonNull)\n          .findFirst();\n    } else {\n      return Optional.empty();\n    }\n  }\n\n  private sci buildsci(\n      XForwardedClientCert xforwardedClientCert) {\n   //logic to handle and return \n    return new sci(\n        sc.get().getService().get(), xforwardedClientCert.getSanUri());\n  }\n}\n</code></pre>\n<p>Below is the object which I want to pass around</p>\n<pre><code>package com.role.server.grpc.service.grpc;\n\nimport com.libs.opencontext.api.Key;\nimport com.libs.opencontext.impl.ocProvider;\nimport java.util.Optional;\nimport lombok.extern.slf4j.Slf4j;\nimport org.apache.commons.lang3.StringUtils;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Component;\n\n@Slf4j\n@Component\npublic class TrialHolder {\n\n  private final ocProvider socProvider;\n\n  @Autowired\n  public TrialHolder(ocProvider socProvider) {\n    this.socProvider = socProvider;\n  }\n\n  private void addToContext(Key&lt;String&gt; key, String value) {\n    if (socProvider.isPresent() &amp;&amp; !StringUtils.isBlank(value)) {\n      socProvider.currentContext().put(key, value);\n    } \n  }\n\n  &lt;T&gt; Optional&lt;T&gt; getFromContext(Key&lt;T&gt; key) {\n    if (socProvider.isPresent()) {\n      return Optional.ofNullable(socProvider.currentContext().get(key));\n    } else {\n      return Optional.empty();\n    }\n  }\n\n//logic defined for below \n  public Optional&lt;String&gt; getsu() {\n    return getFromContext(&quot;su&quot;);\n  }\n\n  public void setsu(String su) {\n    addToContext(&quot;su&quot;, su);\n  }\n\n  public void setsn(String falconTeam) {\n    addToContext(&quot;sn&quot;, falconTeam);\n  }\n\n  public Optional&lt;String&gt; getsn() {\n    return getFromContext(&quot;sn&quot;);\n  }\n\n  public boolean isPresent() {\n    return socProvider.isPresent();\n  }\n}\n</code></pre>\n<p>The below class is where trialHolder is coming in as null</p>\n<pre><code>package com.metadata.da.utils;\nimport com.role.server.grpc.md.grpc.trialHolder;\nimport java.util.List;\nimport java.util.stream.Collectors;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.stereotype.Component;\n\n@Component\n@RequiredArgsConstructor\npublic class DAProvider {\n  private final TrialHolder trialHolder;\n\n  public boolean checkHolder() {\n    return  trialHolder.getsn().isPresent()\n  }\n}\n</code></pre>\n<p>Usage of DAprovider</p>\n<pre><code>package com.md.dataaccess;\n\n\nimport com.md.da.utils.DAProvider;\nimport java.util.*;\nimport java.util.stream.Collectors;\nimport lombok.RequiredArgsConstructor;\nimport org.apache.commons.lang3.StringUtils;\nimport org.apache.spark.sql.types.DataType;\nimport org.apache.spark.sql.types.DataTypes;\nimport org.springframework.stereotype.Component;\n\n@Component\n@RequiredArgsConstructor\npublic class ConfigProvider {\n  private final DAProvider daProvider;\n\n  @Override\n  public Config createConfig() {\n     return daProvider.checkHolder()\n  }\n  }\n</code></pre>\n<p><code>Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'dACController': Unsatisfied dependency expressed through field 'configProvider'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'ConfigProvider' defined in file ----: Unsatisfied dependency expressed through constructor parameter 1; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'dataAccessConfigV1Provider' defined in file -----: Unsatisfied dependency expressed through constructor parameter 8; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'daProvider' defined in file ---: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'com.role.server.grpc.service.grpc.TrialHolder' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: </code></p>\n"},{"tags":["java","jar","decompiler"],"comments":[{"owner":{"account_id":49772,"reputation":6261,"user_id":148346,"accept_rate":67,"display_name":"Andrew"},"score":145,"creation_date":1265686348,"post_id":647116,"comment_id":2181327,"body_markdown":"Remember two more things: 1) The mere mention of a decompiler will cause the &quot;holier than thou&#39;s&quot; to come out and make value judgements about your motives despite having no idea what your planned use is, so be careful who you talk to.  2) The fancy JavaDecompiler will give you an excellent rendition of the code, well laid out and easy to read - missing only comments.  It is astoundingly good, recovering a JAR file which had long lost source complete with variable names.  Of course we don&#39;t obfuscate our in-house JAR files.","body":"Remember two more things: 1) The mere mention of a decompiler will cause the &quot;holier than thou&#39;s&quot; to come out and make value judgements about your motives despite having no idea what your planned use is, so be careful who you talk to.  2) The fancy JavaDecompiler will give you an excellent rendition of the code, well laid out and easy to read - missing only comments.  It is astoundingly good, recovering a JAR file which had long lost source complete with variable names.  Of course we don&#39;t obfuscate our in-house JAR files."},{"owner":{"account_id":98784,"reputation":10491,"user_id":267197,"accept_rate":68,"display_name":"dma_k"},"score":1,"creation_date":1325506744,"post_id":647116,"comment_id":10824872,"body_markdown":"See also remarks in post [Choose and test java decompiler](http://stackoverflow.com/questions/3898391).","body":"See also remarks in post <a href=\"http://stackoverflow.com/questions/3898391\">Choose and test java decompiler</a>."},{"owner":{"account_id":160262,"reputation":1611,"user_id":380189,"accept_rate":93,"display_name":"Jane Panda"},"score":10,"creation_date":1333482328,"post_id":647116,"comment_id":12782553,"body_markdown":"I&#39;ve stopped by this thread so many times when I needed to study how someone accomplished something for a Bukkit plugin... That comment always leaves me with a smile. I wish I could upvote it every time I stop by.","body":"I&#39;ve stopped by this thread so many times when I needed to study how someone accomplished something for a Bukkit plugin... That comment always leaves me with a smile. I wish I could upvote it every time I stop by."},{"owner":{"account_id":5627322,"reputation":595,"user_id":6004931,"display_name":"Nick Graham"},"score":0,"creation_date":1478892478,"post_id":647116,"comment_id":68347940,"body_markdown":"Simple online decompiler if you don&#39;t want to download any software. http://www.javadecompilers.com/","body":"Simple online decompiler if you don&#39;t want to download any software. <a href=\"http://www.javadecompilers.com/\" rel=\"nofollow noreferrer\">javadecompilers.com</a>"},{"owner":{"account_id":49078,"reputation":44646,"user_id":145989,"accept_rate":59,"display_name":"Ondra Žižka"},"score":1,"creation_date":1486596880,"post_id":647116,"comment_id":71419316,"body_markdown":"This shouldn&#39;t be closed as the decompilers playground changes dynamically. Currently, the best is probably [FernFlower](https://github.com/JetBrains/intellij-community/tree/master/plugins/java-decompiler/engine).\n\nIf you&#39;re looking for an easy solution, download [Windup](http://windup.jboss.org/) and run it&#39;s command-line version on your .jar. It will decompile using FernFlower, with support up to Java 8 (jad only suports up to Java 1.3, JavaDecompiler up to Java 1.5 IIRC), with a fallback to Procyon if FernFlower fails.","body":"This shouldn&#39;t be closed as the decompilers playground changes dynamically. Currently, the best is probably <a href=\"https://github.com/JetBrains/intellij-community/tree/master/plugins/java-decompiler/engine\" rel=\"nofollow noreferrer\">FernFlower</a>.  If you&#39;re looking for an easy solution, download <a href=\"http://windup.jboss.org/\" rel=\"nofollow noreferrer\">Windup</a> and run it&#39;s command-line version on your .jar. It will decompile using FernFlower, with support up to Java 8 (jad only suports up to Java 1.3, JavaDecompiler up to Java 1.5 IIRC), with a fallback to Procyon if FernFlower fails."},{"owner":{"account_id":3407043,"reputation":1677,"user_id":2857873,"accept_rate":75,"display_name":"Florian Wendelborn"},"score":0,"creation_date":1647085573,"post_id":647116,"comment_id":126287968,"body_markdown":"As of 2022, this one works well: https://jdec.app/","body":"As of 2022, this one works well: <a href=\"https://jdec.app/\" rel=\"nofollow noreferrer\">jdec.app</a>"},{"owner":{"account_id":4243,"reputation":1301824,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"score":0,"creation_date":1654411768,"post_id":647116,"comment_id":128081418,"body_markdown":"As of 2022, [**QuiltMC/quiltflower**](https://stackoverflow.com/a/647140/6309) looks promising.","body":"As of 2022, <a href=\"https://stackoverflow.com/a/647140/6309\"><b>QuiltMC/quiltflower</b></a> looks promising."}],"answers":[{"tags":[],"owner":{"account_id":8429,"reputation":56686,"user_id":15187,"accept_rate":96,"display_name":"yanchenko"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1237083241,"creation_date":1237083241,"answer_id":647126,"question_id":647116,"body_markdown":"You extract it and then use jad against the dir.","title":"How to decompile a whole Jar file?","body":"<p>You extract it and then use jad against the dir.</p>\n"},{"tags":[],"owner":{"account_id":4243,"reputation":1301824,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"down_vote_count":0,"up_vote_count":367,"is_accepted":true,"score":367,"last_activity_date":1691099116,"creation_date":1237083694,"answer_id":647140,"question_id":647116,"body_markdown":"2023: [splashout](https://stackoverflow.com/users/1048376/splashout) suggests in [the comments](https://stackoverflow.com/questions/647116/how-to-decompile-a-whole-jar-file/647140?noredirect=1#comment135449931_647140) the [`Vineflower/vineflower`](https://github.com/Vineflower/vineflower) decompiler ([releases](https://github.com/Vineflower/vineflower/releases)), renaming from Quiltflower to Vineflower.\r\n\r\n``` bash\r\njava -jar vineflower.jar -dgs=1 c:\\Temp\\binary\\library.jar c:\\Temp\\souce\r\n```\r\n\r\n----\r\n\r\n\r\n2022 update: [**QuiltMC/quiltflower**][1] is the latest [most advanced Java decompiler][2]:\r\n\r\nQuiltflower is a modern, general purpose decompiler focused on improving code quality, speed, and usability.  \r\nQuiltflower is a fork of [Fernflower][3] and Forgeflower.\r\n\r\n&gt; Changes include:\r\n&gt;\r\n&gt; - New language features (Try with resources, switch expressions, pattern matching, and more)\r\n&gt; - Better control flow generation (loops, try-catch, and switch, etc.)\r\n&gt; - More configurability\r\n&gt; - Better error messages\r\n&gt; - Javadoc application\r\n&gt; - Multithreading\r\n&gt; - Optimization\r\n&gt; - Many other miscellaneous features and fixes\r\n&gt;\r\n&gt; Originally intended just for use with the QuiltMC toolchain with Minecraft, Quiltflower quickly expanded to be a general purpose java decompiler aiming to create code that is as accurate and clean as possible. \r\n&gt;\r\n&gt; If the name sounds familiar it&#39;s because Quiltflower is a fork of [Fernflower][3], the (in)famous decompiler that was developed by Stiver, maintained by Jetbrains, and became the default decompiler in Intellij IDEA.  \r\nFernflower also quickly found its way into many other tools. \r\n&gt;\r\n&gt; Over the past year, Quiltflower has added support for features such as modern string concatenation, a code formatter, sealed classes, pattern matching, switch expressions, try-with-resources, and more. Quiltflower also focuses on the code quality of the decompiled output, and takes readability very seriously.\r\n\r\nSee [output examples][4].\r\n\r\n&gt; Runs nice with [jbang][5] \r\n&gt;\r\n&gt;     https://github.com/QuiltMC/quiltflower/releases/download/1.8.1/quiltflower-1.8.1.jar\r\n\r\nOr:\r\n\r\n&gt;     java -jar quiltflower.jar -dgs=1 c:\\Temp\\binary\\library.jar c:\\Temp\\binary\\Boot.class c:\\Temp\\source\\\r\n\r\n----\r\n\r\n2009: [JavaDecompiler][6] can do a good job with a jar: since 0.2.5, All files, in JAR files, are displayed.\r\n\r\n![http://java.decompiler.free.fr/sites/default/screenshots/screenshot1.png][7]\r\n\r\nSee also [the question &quot;How do I “decompile” Java class files?&quot;][8].\r\n\r\nThe JD-Eclipse doesn&#39;t seem to have changed since late 2009 though (see [Changes][9]).  \r\nSo its integration with latest Eclipse (3.8, 4.2+) might be problematic.\r\n\r\nJD-Core is actively maintained.\r\n\r\nBoth are the result of the fantastic work of (SO user) [**Emmanuel Dupuy**][10].\r\n\r\n----\r\n\r\n2018: A more modern option, mentioned [in the comments][11] by [David Kennedy Araujo][12]:\r\n\r\n[**JetBrains/intellij-community/plugins/java-decompiler/engine**][3]\r\n\r\n&gt; Fernflower is the first actually working analytical decompiler for Java and probably for a high-level programming language in general.\r\n&gt;\r\n&gt;     java -jar fernflower.jar [-&lt;option&gt;=&lt;value&gt;]* [&lt;source&gt;]+ &lt;destination&gt;\r\n&gt;\r\n&gt;     java -jar fernflower.jar -hes=0 -hdc=0 c:\\Temp\\binary\\ -e=c:\\Java\\rt.jar c:\\Temp\\source\\\r\n\r\nSee also https://stackoverflow.com/questions/28389006/how-to-decompile-to-java-files-intellij-idea for a command working with recent IntelliJ IDEA.\r\n\r\n----\r\n\r\n2022 update: [Florian Wendelborn][13] suggests in [the comments][14]\r\n\r\n&gt; this one works well: [jdec.app][15] from [Leonardo Santos][16].\r\n\r\n\r\n  [1]: https://github.com/QuiltMC/quiltflower\r\n  [2]: https://www.reddit.com/r/java/comments/ue8u59/new_open_source_java_decompiler/\r\n  [3]: https://github.com/JetBrains/intellij-community/tree/master/plugins/java-decompiler/engine\r\n  [4]: https://gist.github.com/SuperCoder7979/c7171b0e34b6eccf0b9f1c37030867dc\r\n  [5]: https://www.jbang.dev/\r\n  [6]: https://java-decompiler.github.io/\r\n  [7]: http://i.stack.imgur.com/SF22b.png\r\n  [8]: https://stackoverflow.com/questions/272535/how-do-i-decompile-java-class-files/272595#272595\r\n  [9]: http://java.decompiler.free.fr/?q=changes/jdeclipse\r\n  [10]: https://stackoverflow.com/users/37785/emmanuel-dupuy\r\n  [11]: https://stackoverflow.com/questions/647116/how-to-decompile-a-whole-jar-file/647140?noredirect=1#comment89196907_647140\r\n  [12]: https://stackoverflow.com/users/1697026/david-kennedy-araujo\r\n  [13]: https://stackoverflow.com/users/2857873/florian-wendelborn\r\n  [14]: https://stackoverflow.com/questions/647116/how-to-decompile-a-whole-jar-file?noredirect=1#comment126287968_647116\r\n  [15]: https://jdec.app/\r\n  [16]: https://github.com/leonardosnt","title":"How to decompile a whole Jar file?","body":"<p>2023: <a href=\"https://stackoverflow.com/users/1048376/splashout\">splashout</a> suggests in <a href=\"https://stackoverflow.com/questions/647116/how-to-decompile-a-whole-jar-file/647140?noredirect=1#comment135449931_647140\">the comments</a> the <a href=\"https://github.com/Vineflower/vineflower\" rel=\"noreferrer\"><code>Vineflower/vineflower</code></a> decompiler (<a href=\"https://github.com/Vineflower/vineflower/releases\" rel=\"noreferrer\">releases</a>), renaming from Quiltflower to Vineflower.</p>\n<pre class=\"lang-bash prettyprint-override\"><code>java -jar vineflower.jar -dgs=1 c:\\Temp\\binary\\library.jar c:\\Temp\\souce\n</code></pre>\n<hr />\n<p>2022 update: <a href=\"https://github.com/QuiltMC/quiltflower\" rel=\"noreferrer\"><strong>QuiltMC/quiltflower</strong></a> is the latest <a href=\"https://www.reddit.com/r/java/comments/ue8u59/new_open_source_java_decompiler/\" rel=\"noreferrer\">most advanced Java decompiler</a>:</p>\n<p>Quiltflower is a modern, general purpose decompiler focused on improving code quality, speed, and usability.<br />\nQuiltflower is a fork of <a href=\"https://github.com/JetBrains/intellij-community/tree/master/plugins/java-decompiler/engine\" rel=\"noreferrer\">Fernflower</a> and Forgeflower.</p>\n<blockquote>\n<p>Changes include:</p>\n<ul>\n<li>New language features (Try with resources, switch expressions, pattern matching, and more)</li>\n<li>Better control flow generation (loops, try-catch, and switch, etc.)</li>\n<li>More configurability</li>\n<li>Better error messages</li>\n<li>Javadoc application</li>\n<li>Multithreading</li>\n<li>Optimization</li>\n<li>Many other miscellaneous features and fixes</li>\n</ul>\n<p>Originally intended just for use with the QuiltMC toolchain with Minecraft, Quiltflower quickly expanded to be a general purpose java decompiler aiming to create code that is as accurate and clean as possible.</p>\n<p>If the name sounds familiar it's because Quiltflower is a fork of <a href=\"https://github.com/JetBrains/intellij-community/tree/master/plugins/java-decompiler/engine\" rel=\"noreferrer\">Fernflower</a>, the (in)famous decompiler that was developed by Stiver, maintained by Jetbrains, and became the default decompiler in Intellij IDEA.<br />\nFernflower also quickly found its way into many other tools.</p>\n<p>Over the past year, Quiltflower has added support for features such as modern string concatenation, a code formatter, sealed classes, pattern matching, switch expressions, try-with-resources, and more. Quiltflower also focuses on the code quality of the decompiled output, and takes readability very seriously.</p>\n</blockquote>\n<p>See <a href=\"https://gist.github.com/SuperCoder7979/c7171b0e34b6eccf0b9f1c37030867dc\" rel=\"noreferrer\">output examples</a>.</p>\n<blockquote>\n<p>Runs nice with <a href=\"https://www.jbang.dev/\" rel=\"noreferrer\">jbang</a></p>\n<pre><code>https://github.com/QuiltMC/quiltflower/releases/download/1.8.1/quiltflower-1.8.1.jar\n</code></pre>\n</blockquote>\n<p>Or:</p>\n<blockquote>\n<pre><code>java -jar quiltflower.jar -dgs=1 c:\\Temp\\binary\\library.jar c:\\Temp\\binary\\Boot.class c:\\Temp\\source\\\n</code></pre>\n</blockquote>\n<hr />\n<p>2009: <a href=\"https://java-decompiler.github.io/\" rel=\"noreferrer\">JavaDecompiler</a> can do a good job with a jar: since 0.2.5, All files, in JAR files, are displayed.</p>\n<p><img src=\"https://i.stack.imgur.com/SF22b.png\" alt=\"http://java.decompiler.free.fr/sites/default/screenshots/screenshot1.png\" /></p>\n<p>See also <a href=\"https://stackoverflow.com/questions/272535/how-do-i-decompile-java-class-files/272595#272595\">the question &quot;How do I “decompile” Java class files?&quot;</a>.</p>\n<p>The JD-Eclipse doesn't seem to have changed since late 2009 though (see <a href=\"http://java.decompiler.free.fr/?q=changes/jdeclipse\" rel=\"noreferrer\">Changes</a>).<br />\nSo its integration with latest Eclipse (3.8, 4.2+) might be problematic.</p>\n<p>JD-Core is actively maintained.</p>\n<p>Both are the result of the fantastic work of (SO user) <a href=\"https://stackoverflow.com/users/37785/emmanuel-dupuy\"><strong>Emmanuel Dupuy</strong></a>.</p>\n<hr />\n<p>2018: A more modern option, mentioned <a href=\"https://stackoverflow.com/questions/647116/how-to-decompile-a-whole-jar-file/647140?noredirect=1#comment89196907_647140\">in the comments</a> by <a href=\"https://stackoverflow.com/users/1697026/david-kennedy-araujo\">David Kennedy Araujo</a>:</p>\n<p><a href=\"https://github.com/JetBrains/intellij-community/tree/master/plugins/java-decompiler/engine\" rel=\"noreferrer\"><strong>JetBrains/intellij-community/plugins/java-decompiler/engine</strong></a></p>\n<blockquote>\n<p>Fernflower is the first actually working analytical decompiler for Java and probably for a high-level programming language in general.</p>\n<pre><code>java -jar fernflower.jar [-&lt;option&gt;=&lt;value&gt;]* [&lt;source&gt;]+ &lt;destination&gt;\n\njava -jar fernflower.jar -hes=0 -hdc=0 c:\\Temp\\binary\\ -e=c:\\Java\\rt.jar c:\\Temp\\source\\\n</code></pre>\n</blockquote>\n<p>See also <a href=\"https://stackoverflow.com/questions/28389006/how-to-decompile-to-java-files-intellij-idea\">How to decompile to java files intellij idea</a> for a command working with recent IntelliJ IDEA.</p>\n<hr />\n<p>2022 update: <a href=\"https://stackoverflow.com/users/2857873/florian-wendelborn\">Florian Wendelborn</a> suggests in <a href=\"https://stackoverflow.com/questions/647116/how-to-decompile-a-whole-jar-file?noredirect=1#comment126287968_647116\">the comments</a></p>\n<blockquote>\n<p>this one works well: <a href=\"https://jdec.app/\" rel=\"noreferrer\">jdec.app</a> from <a href=\"https://github.com/leonardosnt\" rel=\"noreferrer\">Leonardo Santos</a>.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":11959,"reputation":17676,"user_id":23309,"accept_rate":58,"display_name":"Chris R"},"down_vote_count":0,"up_vote_count":38,"is_accepted":false,"score":38,"last_activity_date":1237092006,"creation_date":1237092006,"answer_id":647314,"question_id":647116,"body_markdown":"If you happen to have both a bash shell and jad:\r\n\r\n    JAR=(your jar file name)\r\n    unzip -d $JAR.tmp $JAR\r\n    pushd $JAR.tmp\r\n\tfor f in `find . -name &#39;*.class&#39;`; do\r\n\t    jad -d $(dirname $f) -s java -lnc $f\r\n\tdone\r\n\tpopd\r\n\r\nI might be a tiny, tiny bit off with that, but it should work more or less as advertised.  You should end up with `$JAR.tmp` containing your decompiled files.","title":"How to decompile a whole Jar file?","body":"<p>If you happen to have both a bash shell and jad:</p>\n\n<pre><code>JAR=(your jar file name)\nunzip -d $JAR.tmp $JAR\npushd $JAR.tmp\nfor f in `find . -name '*.class'`; do\n    jad -d $(dirname $f) -s java -lnc $f\ndone\npopd\n</code></pre>\n\n<p>I might be a tiny, tiny bit off with that, but it should work more or less as advertised.  You should end up with <code>$JAR.tmp</code> containing your decompiled files.</p>\n"},{"tags":[],"owner":{"account_id":12462,"reputation":162436,"user_id":24545,"accept_rate":99,"display_name":"Yuval Adam"},"down_vote_count":0,"up_vote_count":41,"is_accepted":false,"score":41,"last_activity_date":1501017843,"creation_date":1237107633,"answer_id":647505,"question_id":647116,"body_markdown":"First of all, it&#39;s worth remembering that all Java archive files (`.jar`/`.war`/etc...) are **all basically just fancy`.zip` files**, with a few added manifests and metadata.\r\n\r\nSecond, to tackle this problem I personally use several tools which handle this problem on all levels:\r\n\r\n - [**Jad**][1] + [**Jadclipse**][2] while working in IDE for decompiling `.class` files\r\n - [**WinRAR**][3], my favorite compression tool natively supports Java archives (again, see first paragraph).\r\n - [**Beyond Compare**][4], my favorite diff tool, when configured correctly can do on-the-fly comparisons between any archive file, including `jar`s. Well worth a try.\r\n\r\nThe advantage of all the aforementioned, is that I do not need to hold any other external tool which clutters my work environment. Everything I will ever need from one of those files can be handled inside my IDE or diffed with other files natively.\r\n\r\n\r\n  [1]: https://varaneckas.com/jad/\r\n  [2]: http://jadclipse.sourceforge.net/wiki/index.php/Main_Page\r\n  [3]: http://www.rarlab.com/\r\n  [4]: http://www.scootersoftware.com/","title":"How to decompile a whole Jar file?","body":"<p>First of all, it's worth remembering that all Java archive files (<code>.jar</code>/<code>.war</code>/etc...) are <strong>all basically just fancy<code>.zip</code> files</strong>, with a few added manifests and metadata.</p>\n\n<p>Second, to tackle this problem I personally use several tools which handle this problem on all levels:</p>\n\n<ul>\n<li><a href=\"https://varaneckas.com/jad/\" rel=\"noreferrer\"><strong>Jad</strong></a> + <a href=\"http://jadclipse.sourceforge.net/wiki/index.php/Main_Page\" rel=\"noreferrer\"><strong>Jadclipse</strong></a> while working in IDE for decompiling <code>.class</code> files</li>\n<li><a href=\"http://www.rarlab.com/\" rel=\"noreferrer\"><strong>WinRAR</strong></a>, my favorite compression tool natively supports Java archives (again, see first paragraph).</li>\n<li><a href=\"http://www.scootersoftware.com/\" rel=\"noreferrer\"><strong>Beyond Compare</strong></a>, my favorite diff tool, when configured correctly can do on-the-fly comparisons between any archive file, including <code>jar</code>s. Well worth a try.</li>\n</ul>\n\n<p>The advantage of all the aforementioned, is that I do not need to hold any other external tool which clutters my work environment. Everything I will ever need from one of those files can be handled inside my IDE or diffed with other files natively.</p>\n"},{"tags":[],"owner":{"account_id":30624,"reputation":498,"user_id":83592,"display_name":"Joel S"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1238153463,"creation_date":1238153463,"answer_id":689396,"question_id":647116,"body_markdown":"**Note: This solution only works for Mac and *nix users.**\r\n\r\nI also tried to find Jad with no luck. My quick solution was to download [MacJad][1] that contains jad. Once you downloaded it you can find jad in [where-you-downloaded-macjad]/MacJAD/Contents/Resources/jad.\r\n\r\n\r\n\r\n  [1]: http://mac.softpedia.com/get/Development/Compilers/MacJAD.shtml","title":"How to decompile a whole Jar file?","body":"<p><strong>Note: This solution only works for Mac and *nix users.</strong></p>\n\n<p>I also tried to find Jad with no luck. My quick solution was to download <a href=\"http://mac.softpedia.com/get/Development/Compilers/MacJAD.shtml\" rel=\"nofollow noreferrer\">MacJad</a> that contains jad. Once you downloaded it you can find jad in [where-you-downloaded-macjad]/MacJAD/Contents/Resources/jad.</p>\n"},{"tags":[],"owner":{"account_id":18236,"reputation":46374,"user_id":41619,"accept_rate":91,"display_name":"Adam Paynter"},"down_vote_count":0,"up_vote_count":28,"is_accepted":false,"score":28,"last_activity_date":1567583251,"creation_date":1238153871,"answer_id":689419,"question_id":647116,"body_markdown":"I have had reasonable success with a tool named (frustratingly) &quot;[JD: Java Decompiler][1]&quot;.\r\n\r\nI have found it better than most decompilers *when dealing with classes compiled for Java 5 and higher*. Unfortunately, it can still have some hiccups where JAD would normally succeed.\r\n\r\n  [1]: http://java-decompiler.github.io/","title":"How to decompile a whole Jar file?","body":"<p>I have had reasonable success with a tool named (frustratingly) \"<a href=\"http://java-decompiler.github.io/\" rel=\"nofollow noreferrer\">JD: Java Decompiler</a>\".</p>\n\n<p>I have found it better than most decompilers <em>when dealing with classes compiled for Java 5 and higher</em>. Unfortunately, it can still have some hiccups where JAD would normally succeed.</p>\n"},{"tags":[],"owner":{"account_id":587697,"reputation":131,"user_id":267252,"display_name":"cybertoast"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1265388438,"creation_date":1265388438,"answer_id":2208761,"question_id":647116,"body_markdown":"Something like:\r\n\r\n    jar -xf foo.jar &amp;&amp; find . -iname &quot;*.class&quot; | xargs /opt/local/bin/jad -r\r\n\r\nmaybe?","title":"How to decompile a whole Jar file?","body":"<p>Something like:</p>\n\n<pre><code>jar -xf foo.jar &amp;&amp; find . -iname \"*.class\" | xargs /opt/local/bin/jad -r\n</code></pre>\n\n<p>maybe?</p>\n"},{"tags":[],"owner":{"account_id":678301,"reputation":51,"user_id":703767,"display_name":"merzod"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1302601074,"creation_date":1302601074,"answer_id":5633179,"question_id":647116,"body_markdown":"Insert the following into decompile.jar.sh\r\n\r\n    # Usage: decompile.jar.sh some.jar [-d]\r\n    \r\n    # clean target folders\r\n    function clean_target {\r\n      rm -rf $unjar $src $jad_log\r\n    }\r\n    \r\n    # clean all debug stuff\r\n    function clean_stuff {\r\n      rm -rf $unjar $jad_log\r\n    }\r\n    \r\n    # the main function\r\n    function work {\r\n      jar=$1\r\n      unjar=`basename $jar.unjar`\r\n      src=`basename $jar.src`\r\n      jad_log=jad.log\r\n    \r\n      clean_target\r\n    \r\n      unzip -q $jar -d $unjar\r\n      jad -d $src -ff -r -lnc -o -s java $unjar/**/*.class &gt; $jad_log 2&gt;&amp;1\r\n    \r\n      if [ ! $debug ]; then\r\n        clean_stuff\r\n      fi\r\n    \r\n      if [ -d $src ] \r\n        then\r\n          echo &quot;$jar has been decompiled to $src&quot;\r\n        else\r\n          echo &quot;Got some problems check output or run in debug mode&quot;\r\n      fi\r\n    }\r\n    \r\n    function usage {\r\n      echo &quot;This script extract and decompile JAR file&quot;\r\n      echo &quot;Usage: $0 some.jar [-d]&quot;\r\n      echo &quot;\twhere: some.jar is the target to decompile&quot;\r\n      echo &quot;\tuse -d for debug mode&quot;\r\n    }\r\n    \r\n    # check params\r\n    if [ -n &quot;$1&quot; ]\r\n      then\r\n        if [ &quot;$2&quot; == &quot;-d&quot; ]; then\r\n          debug=true\r\n          set -x\r\n        fi\r\n        work $1\r\n      else\r\n        usage\r\n    fi\r\n\r\n - chmod +x decomplie.jar.sh //executable\r\n - ln -s ./decomplie.jar.s /usr/bin/dj\r\n\r\nReady to use, just type `dj your.jar` and you will get `your.jar.src` folder with sources. Use `-d` option for debug mode.\r\n\r\n\r\n","title":"How to decompile a whole Jar file?","body":"<p>Insert the following into decompile.jar.sh</p>\n\n<pre><code># Usage: decompile.jar.sh some.jar [-d]\n\n# clean target folders\nfunction clean_target {\n  rm -rf $unjar $src $jad_log\n}\n\n# clean all debug stuff\nfunction clean_stuff {\n  rm -rf $unjar $jad_log\n}\n\n# the main function\nfunction work {\n  jar=$1\n  unjar=`basename $jar.unjar`\n  src=`basename $jar.src`\n  jad_log=jad.log\n\n  clean_target\n\n  unzip -q $jar -d $unjar\n  jad -d $src -ff -r -lnc -o -s java $unjar/**/*.class &gt; $jad_log 2&gt;&amp;1\n\n  if [ ! $debug ]; then\n    clean_stuff\n  fi\n\n  if [ -d $src ] \n    then\n      echo \"$jar has been decompiled to $src\"\n    else\n      echo \"Got some problems check output or run in debug mode\"\n  fi\n}\n\nfunction usage {\n  echo \"This script extract and decompile JAR file\"\n  echo \"Usage: $0 some.jar [-d]\"\n  echo \"    where: some.jar is the target to decompile\"\n  echo \"    use -d for debug mode\"\n}\n\n# check params\nif [ -n \"$1\" ]\n  then\n    if [ \"$2\" == \"-d\" ]; then\n      debug=true\n      set -x\n    fi\n    work $1\n  else\n    usage\nfi\n</code></pre>\n\n<ul>\n<li>chmod +x decomplie.jar.sh //executable</li>\n<li>ln -s ./decomplie.jar.s /usr/bin/dj</li>\n</ul>\n\n<p>Ready to use, just type <code>dj your.jar</code> and you will get <code>your.jar.src</code> folder with sources. Use <code>-d</code> option for debug mode.</p>\n"}],"owner":{"account_id":19119,"reputation":15940,"user_id":44533,"accept_rate":60,"display_name":"StoneHeart"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":739811,"favorite_count":0,"down_vote_count":0,"up_vote_count":339,"closed_date":1438691852,"accepted_answer_id":647140,"answer_count":8,"score":339,"last_activity_date":1691099116,"creation_date":1237082923,"question_id":647116,"body_markdown":"Does anyone know of a free decompiler that can decompile an entire Jar file instead of a single class? I have a problem with sub classes like name$1.class name$2.class name.class","title":"How to decompile a whole Jar file?","body":"<p>Does anyone know of a free decompiler that can decompile an entire Jar file instead of a single class? I have a problem with sub classes like name$1.class name$2.class name.class</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2625978,"reputation":857,"user_id":2272958,"accept_rate":50,"display_name":"Kapil"},"score":2,"creation_date":1576217455,"post_id":59316927,"comment_id":104834922,"body_markdown":"Quick fix: replace `fout.write(i);` with `fout.write(Integer.toString(i).getBytes());`","body":"Quick fix: replace <code>fout.write(i);</code> with <code>fout.write(Integer.toString(i).getBytes());</code>"},{"owner":{"account_id":8544053,"reputation":997,"user_id":6418029,"display_name":"Ashutosh"},"score":1,"creation_date":1576217490,"post_id":59316927,"comment_id":104834936,"body_markdown":"Does this answer your question? [Write int to text file using Writer](https://stackoverflow.com/questions/7357852/write-int-to-text-file-using-writer)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/7357852/write-int-to-text-file-using-writer\">Write int to text file using Writer</a>"}],"answers":[{"tags":[],"owner":{"account_id":14937684,"reputation":541,"user_id":10785239,"display_name":"I&#39;m_Pratik"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1576218385,"creation_date":1576217511,"answer_id":59317062,"question_id":59316927,"body_markdown":"You can use `PrintWriter` and `FileWriter` to write into the file. You can refer below code for your reference: \r\n\r\n    public class FileWriterExample {\r\n    \tpublic static void main(String args[]) {\r\n    \t\ttry {\r\n    \t\t\tPrintWriter fileout = new PrintWriter(new FileWriter(&quot;C://Users//Desktop//random.txt&quot;));\r\n    \r\n    \t\t\tfor (int i = 1; i &lt; 1001; i++) {\r\n    \t\t\t\tfileout.println(i);\r\n    \t\t\t}\r\n    \t\t\tfileout.close();\r\n    \t\t\tSystem.out.println(&quot;success...&quot;);\r\n    \t\t} catch (Exception e) {\r\n    \t\t\tSystem.out.println(e);\r\n    \t\t}\r\n    \t}\r\n    }","title":"How to write 1 to 1000 numbers into text file using java?","body":"<p>You can use <code>PrintWriter</code> and <code>FileWriter</code> to write into the file. You can refer below code for your reference: </p>\n\n<pre><code>public class FileWriterExample {\n    public static void main(String args[]) {\n        try {\n            PrintWriter fileout = new PrintWriter(new FileWriter(\"C://Users//Desktop//random.txt\"));\n\n            for (int i = 1; i &lt; 1001; i++) {\n                fileout.println(i);\n            }\n            fileout.close();\n            System.out.println(\"success...\");\n        } catch (Exception e) {\n            System.out.println(e);\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3640818,"reputation":1743,"user_id":3034938,"accept_rate":100,"display_name":"Pushpendra Kumar"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1576218133,"creation_date":1576217784,"answer_id":59317121,"question_id":59316927,"body_markdown":"    import java.io.FileOutputStream;\r\n    class FileWriterExample {\r\n       public static void main(String args[]){\r\n           try{\r\n               FileOutputStream fout=new FileOutputStream(&quot;./trial.txt&quot;);\r\n            \r\n              int i;\r\n              for(i = 0; i&lt;= 1000 ; i++) {\r\n                  String a = new Integer(i).toString();\r\n                  a = a + &#39; &#39;;\r\n                  fout.write(a.getBytes());\r\n              }\r\n    \r\n    \r\n               fout.close();\r\n               System.out.println(&quot;success...&quot;);\r\n           }catch(Exception e){System.out.println(e);}\r\n       }\r\n    }","title":"How to write 1 to 1000 numbers into text file using java?","body":"<pre><code>import java.io.FileOutputStream;\nclass FileWriterExample {\n   public static void main(String args[]){\n       try{\n           FileOutputStream fout=new FileOutputStream(\"./trial.txt\");\n\n          int i;\n          for(i = 0; i&lt;= 1000 ; i++) {\n              String a = new Integer(i).toString();\n              a = a + ' ';\n              fout.write(a.getBytes());\n          }\n\n\n           fout.close();\n           System.out.println(\"success...\");\n       }catch(Exception e){System.out.println(e);}\n   }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12583055,"reputation":447,"user_id":9732672,"display_name":"NomadMaker"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1576217881,"creation_date":1576217881,"answer_id":59317140,"question_id":59316927,"body_markdown":"I would like to suggest using a FileWriter (java.io.FileWriter) instead of a FileOutputStream. It assumes that the file being written is  a text file.\r\n\r\nYou might have to explicitly put in the new lines, so your write would look like\r\n\r\n    fout.write(i + &quot;\\n&quot;);\r\n\r\nAnd you will still need to declare i to be an integer. Those should be the only change to you code.","title":"How to write 1 to 1000 numbers into text file using java?","body":"<p>I would like to suggest using a FileWriter (java.io.FileWriter) instead of a FileOutputStream. It assumes that the file being written is  a text file.</p>\n\n<p>You might have to explicitly put in the new lines, so your write would look like</p>\n\n<pre><code>fout.write(i + \"\\n\");\n</code></pre>\n\n<p>And you will still need to declare i to be an integer. Those should be the only change to you code.</p>\n"},{"tags":[],"owner":{"account_id":14363900,"reputation":3,"user_id":10375530,"display_name":"Hirusha Kumarasinghe"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1576225712,"creation_date":1576225125,"answer_id":59318585,"question_id":59316927,"body_markdown":"Try this one. I converted the integer value to String and used BufferReader, FileWriter and InpuStreamReader Classes\r\n\r\n    import java.io.BufferedReader;\r\n    import java.io.BufferedWriter;\r\n    import java.io.FileWriter;\r\n    import java.io.IOException;\r\n    import java.io.InputStreamReader;\r\n    \r\n    public class FileWriterExample {\r\n    \tpublic static void main(String[] args) throws IOException {\r\n    \r\n    \t\tBufferedReader in = new BufferedReader(new InputStreamReader(System.in));\r\n    \r\n    \t    BufferedWriter out = new BufferedWriter(new FileWriter(&quot;E:\\\\trial.txt&quot;));\r\n    \t    try {\r\n    \t        for(int i = 0; i&lt; 1000 ; i++) {\r\n    \t        \t\r\n    \t        \t// in here value will be written as String format\r\n    \t        \t out.write(String.valueOf(i));\r\n    \t        \t // goes to new line if want\r\n    \t\t         out.newLine();\r\n            }\r\n    \t    \r\n    \t        System.out.print(&quot;Write Successful&quot;);\r\n    \t    } catch(IOException e1) {\r\n    \t        System.out.println(&quot;Error during reading/writing&quot;);\r\n    \t    } finally {\r\n    \t        out.close();\r\n    \t        in.close();\r\n    \t    }\r\n    \r\n    \t}\r\n    \r\n    }\r\n","title":"How to write 1 to 1000 numbers into text file using java?","body":"<p>Try this one. I converted the integer value to String and used BufferReader, FileWriter and InpuStreamReader Classes</p>\n\n<pre><code>import java.io.BufferedReader;\nimport java.io.BufferedWriter;\nimport java.io.FileWriter;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\n\npublic class FileWriterExample {\n    public static void main(String[] args) throws IOException {\n\n        BufferedReader in = new BufferedReader(new InputStreamReader(System.in));\n\n        BufferedWriter out = new BufferedWriter(new FileWriter(\"E:\\\\trial.txt\"));\n        try {\n            for(int i = 0; i&lt; 1000 ; i++) {\n\n                // in here value will be written as String format\n                 out.write(String.valueOf(i));\n                 // goes to new line if want\n                 out.newLine();\n        }\n\n            System.out.print(\"Write Successful\");\n        } catch(IOException e1) {\n            System.out.println(\"Error during reading/writing\");\n        } finally {\n            out.close();\n            in.close();\n        }\n\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2974733,"reputation":721,"user_id":2526021,"display_name":"marco"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691098967,"creation_date":1578389378,"answer_id":59625542,"question_id":59316927,"body_markdown":"With PrintStream or PrintWriter you can print all basic types directly without needing to convert to String beforehand:\r\n\r\n```java\r\n    public static void main(String args[]){\r\n        try{\r\n            FileOutputStream fout = new FileOutputStream(&quot;D:\\\\trial.txt&quot;);\r\n            PrintStream pout = new PrintStream(fout);\r\n            for(int i = 1; i&lt;= 1000 ; i++) {\r\n                pout.println(i);\r\n            }\r\n            pout.close();\r\n            System.out.println(&quot;success...&quot;);\r\n        } catch(Exception e){\r\n            System.out.println(e);\r\n        }\r\n    }\r\n\r\n```","title":"How to write 1 to 1000 numbers into text file using java?","body":"<p>With PrintStream or PrintWriter you can print all basic types directly without needing to convert to String beforehand:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public static void main(String args[]){\n        try{\n            FileOutputStream fout = new FileOutputStream(&quot;D:\\\\trial.txt&quot;);\n            PrintStream pout = new PrintStream(fout);\n            for(int i = 1; i&lt;= 1000 ; i++) {\n                pout.println(i);\n            }\n            pout.close();\n            System.out.println(&quot;success...&quot;);\n        } catch(Exception e){\n            System.out.println(e);\n        }\n    }\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18600355,"reputation":21,"user_id":13555337,"display_name":"Manoj Boganadham"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1614689994,"creation_date":1614689994,"answer_id":66439914,"question_id":59316927,"body_markdown":"You can use the following two functions to do the job. Both will write the numbers separated by spaces.\r\n\r\nThe first function will always append the numbers to the file. The second function will write the numbers discarding the previous content of the file. You can use them according to your requirement.\r\n\r\n    public static void writeNums(int[] arr, File file) throws Exception{\r\n        FileWriter fw = new FileWriter(file, true);\r\n        for(int x:arr){\r\n            fw.write(Integer.toString(x));\r\n            fw.write(&quot; &quot;);\r\n        }\r\n        fw.close();\r\n    }\r\n\r\n    public static void writeNums(int[] arr, File file) throws Exception{\r\n        PrintWriter pw = new PrintWriter(file);\r\n        for(int x:arr){\r\n            pw.format(&quot;%d &quot;, x);\r\n        }\r\n        pw.close();\r\n    }","title":"How to write 1 to 1000 numbers into text file using java?","body":"<p>You can use the following two functions to do the job. Both will write the numbers separated by spaces.</p>\n<p>The first function will always append the numbers to the file. The second function will write the numbers discarding the previous content of the file. You can use them according to your requirement.</p>\n<pre><code>public static void writeNums(int[] arr, File file) throws Exception{\n    FileWriter fw = new FileWriter(file, true);\n    for(int x:arr){\n        fw.write(Integer.toString(x));\n        fw.write(&quot; &quot;);\n    }\n    fw.close();\n}\n\npublic static void writeNums(int[] arr, File file) throws Exception{\n    PrintWriter pw = new PrintWriter(file);\n    for(int x:arr){\n        pw.format(&quot;%d &quot;, x);\n    }\n    pw.close();\n}\n</code></pre>\n"}],"owner":{"account_id":17274086,"reputation":13,"user_id":12509072,"display_name":"Narayanan Krish"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5586,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":59317062,"answer_count":6,"score":1,"last_activity_date":1691098967,"creation_date":1576216816,"question_id":59316927,"body_markdown":"I am fresher candidate. So how to write 1 to 1000 numbers into text file? I tried las below code but it writes as like ASCII values. unable to print as numbers so how to write as numbers?\r\n\r\n\r\n        import java.io.FileOutputStream;\r\n        public class FileWriterExample {\r\n           public static void main(String args[]){\r\n               try{\r\n                   FileOutputStream fout=new FileOutputStream(&quot;D:\\\\trial.txt&quot;);\r\n                   int i;\r\n                for(i = 0; i&lt; 1000 ; i++) {\r\n                    fout.write(i);\r\n                }         \r\n                   fout.close();\r\n                   System.out.println(&quot;success...&quot;);\r\n               }catch(Exception e){System.out.println(e);}\r\n           }\r\n    }\r\n\r\n","title":"How to write 1 to 1000 numbers into text file using java?","body":"<p>I am fresher candidate. So how to write 1 to 1000 numbers into text file? I tried las below code but it writes as like ASCII values. unable to print as numbers so how to write as numbers?</p>\n\n<pre><code>    import java.io.FileOutputStream;\n    public class FileWriterExample {\n       public static void main(String args[]){\n           try{\n               FileOutputStream fout=new FileOutputStream(\"D:\\\\trial.txt\");\n               int i;\n            for(i = 0; i&lt; 1000 ; i++) {\n                fout.write(i);\n            }         \n               fout.close();\n               System.out.println(\"success...\");\n           }catch(Exception e){System.out.println(e);}\n       }\n}\n</code></pre>\n"},{"tags":["java","hibernate","jpa","orm","entity"],"comments":[{"owner":{"account_id":1568342,"reputation":841,"user_id":1456631,"display_name":"vijay"},"score":2,"creation_date":1507896414,"post_id":2302802,"comment_id":80405044,"body_markdown":"In want context is this error? is it with or without transient variable?","body":"In want context is this error? is it with or without transient variable?"},{"owner":{"account_id":16448586,"reputation":114,"user_id":11882586,"display_name":"Gayal Rupasinghe"},"score":1,"creation_date":1627464719,"post_id":2302802,"comment_id":121161294,"body_markdown":"If you have relationships between the objects that you are trying to save, make sure that they are saved in the correct order. for eg: author is saved before book cause author is a must for the book. like wise.","body":"If you have relationships between the objects that you are trying to save, make sure that they are saved in the correct order. for eg: author is saved before book cause author is a must for the book. like wise."}],"answers":[{"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"down_vote_count":9,"up_vote_count":1109,"is_accepted":true,"score":1100,"last_activity_date":1266683102,"creation_date":1266683102,"answer_id":2302814,"question_id":2302802,"body_markdown":"You should include `cascade=&quot;all&quot;` (if using xml) or `cascade=CascadeType.ALL` (if using annotations) on your collection mapping.\r\n\r\nThis happens because you have a collection in your entity, and that collection has one or more items which are not present in the database. By specifying the above options you tell hibernate to save them to the database when saving their parent.","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>You should include <code>cascade=\"all\"</code> (if using xml) or <code>cascade=CascadeType.ALL</code> (if using annotations) on your collection mapping.</p>\n\n<p>This happens because you have a collection in your entity, and that collection has one or more items which are not present in the database. By specifying the above options you tell hibernate to save them to the database when saving their parent.</p>\n"},{"tags":[],"owner":{"account_id":920174,"reputation":3428,"user_id":951984,"accept_rate":50,"display_name":"nanospeck"},"down_vote_count":1,"up_vote_count":14,"is_accepted":false,"score":13,"last_activity_date":1450267537,"creation_date":1337580451,"answer_id":10680218,"question_id":2302802,"body_markdown":"This isn&#39;t the only reason for the error. I encountered it just now for a typo error in my coding, which I believe, set a value of an entity which was already saved.\r\n\r\n    X x2 = new X();\r\n    x.setXid(memberid); // Error happened here - x was a previous global entity I created earlier\r\n    Y.setX(x2);\r\n\r\nI spotted the error by finding exactly which variable caused the error (in this case `String xid`). I used a `catch` around the whole block of code that saved the entity and printed the traces.\r\n\r\n    {\r\n       code block that performed the operation\r\n    } catch (Exception e) {\r\n       e.printStackTrace(); // put a break-point here and inspect the &#39;e&#39;\r\n       return ERROR;\r\n    }","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>This isn't the only reason for the error. I encountered it just now for a typo error in my coding, which I believe, set a value of an entity which was already saved.</p>\n\n<pre><code>X x2 = new X();\nx.setXid(memberid); // Error happened here - x was a previous global entity I created earlier\nY.setX(x2);\n</code></pre>\n\n<p>I spotted the error by finding exactly which variable caused the error (in this case <code>String xid</code>). I used a <code>catch</code> around the whole block of code that saved the entity and printed the traces.</p>\n\n<pre><code>{\n   code block that performed the operation\n} catch (Exception e) {\n   e.printStackTrace(); // put a break-point here and inspect the 'e'\n   return ERROR;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":553029,"reputation":3719,"user_id":1090228,"display_name":"McDonald Noland"},"down_vote_count":0,"up_vote_count":361,"is_accepted":false,"score":361,"last_activity_date":1691097570,"creation_date":1371525997,"answer_id":17160066,"question_id":2302802,"body_markdown":"I believe this might be just repeat answer, but just to clarify, I got this on a `@OneToOne` mapping as well as a `@OneToMany`.  In both cases, it was the fact that the `Child` object I was adding to the `Parent` wasn&#39;t saved in the database yet.  So when I added the `Child` to the `Parent`, then saved the `Parent`, Hibernate would toss the `&quot;object references an unsaved transient instance - save the transient instance before flushing&quot;` message when saving the Parent.\r\n\r\nAdding in the `cascade = CascadeType.ALL` on the `Parent&#39;s` reference to the `Child` solved the problem in both cases.  This saved the `Child` and the `Parent`.\r\n\r\nSorry for any repeat answers, just wanted to further clarify for folks.\r\n\r\n```java\r\n@OneToOne(cascade = CascadeType.ALL)\r\n@JoinColumn(name = &quot;performancelog_id&quot;)\r\npublic PerformanceLog getPerformanceLog() {\r\n    return performanceLog;\r\n}\r\n```","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>I believe this might be just repeat answer, but just to clarify, I got this on a <code>@OneToOne</code> mapping as well as a <code>@OneToMany</code>.  In both cases, it was the fact that the <code>Child</code> object I was adding to the <code>Parent</code> wasn't saved in the database yet.  So when I added the <code>Child</code> to the <code>Parent</code>, then saved the <code>Parent</code>, Hibernate would toss the <code>&quot;object references an unsaved transient instance - save the transient instance before flushing&quot;</code> message when saving the Parent.</p>\n<p>Adding in the <code>cascade = CascadeType.ALL</code> on the <code>Parent's</code> reference to the <code>Child</code> solved the problem in both cases.  This saved the <code>Child</code> and the <code>Parent</code>.</p>\n<p>Sorry for any repeat answers, just wanted to further clarify for folks.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@OneToOne(cascade = CascadeType.ALL)\n@JoinColumn(name = &quot;performancelog_id&quot;)\npublic PerformanceLog getPerformanceLog() {\n    return performanceLog;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1057328,"reputation":1255,"user_id":1059744,"accept_rate":71,"display_name":"Haris Osmanagić"},"down_vote_count":0,"up_vote_count":34,"is_accepted":false,"score":34,"last_activity_date":1375037783,"creation_date":1375037783,"answer_id":17911708,"question_id":2302802,"body_markdown":"Or, if you want to use minimal &quot;powers&quot; (e.g. if you don&#39;t want a cascade delete) to achieve what you want, use \r\n\r\n    import org.hibernate.annotations.Cascade;\r\n    import org.hibernate.annotations.CascadeType;\r\n    \r\n    ...\r\n    \r\n    @Cascade({CascadeType.SAVE_UPDATE})\r\n    private Set&lt;Child&gt; children;","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>Or, if you want to use minimal \"powers\" (e.g. if you don't want a cascade delete) to achieve what you want, use </p>\n\n<pre><code>import org.hibernate.annotations.Cascade;\nimport org.hibernate.annotations.CascadeType;\n\n...\n\n@Cascade({CascadeType.SAVE_UPDATE})\nprivate Set&lt;Child&gt; children;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1069381,"reputation":1579,"user_id":1069027,"display_name":"Cookalino"},"down_vote_count":0,"up_vote_count":86,"is_accepted":false,"score":86,"last_activity_date":1385728740,"creation_date":1385728740,"answer_id":20286061,"question_id":2302802,"body_markdown":"This happens when saving an object when Hibernate thinks it needs to save an object that is associated with the one you are saving. \r\n\r\nI had this problem and did not want to save changes to the referenced object so I wanted the cascade type to be NONE. \r\n\r\nThe trick is to ensure that the ID and VERSION in the referenced object is set so that Hibernate does not think that the referenced object is a new object that needs saving. This worked for me.\r\n\r\nLook through all of the relationships in the class you are saving to work out the associated objects (and the associated objects of the associated objects) and ensure that the ID and VERSION is set in all objects of the object tree.","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>This happens when saving an object when Hibernate thinks it needs to save an object that is associated with the one you are saving. </p>\n\n<p>I had this problem and did not want to save changes to the referenced object so I wanted the cascade type to be NONE. </p>\n\n<p>The trick is to ensure that the ID and VERSION in the referenced object is set so that Hibernate does not think that the referenced object is a new object that needs saving. This worked for me.</p>\n\n<p>Look through all of the relationships in the class you are saving to work out the associated objects (and the associated objects of the associated objects) and ensure that the ID and VERSION is set in all objects of the object tree.</p>\n"},{"tags":[],"owner":{"account_id":183659,"reputation":1449,"user_id":419156,"accept_rate":33,"display_name":"dukethrash"},"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1394647873,"creation_date":1394647873,"answer_id":22360266,"question_id":2302802,"body_markdown":"This occurred for me when persisting an entity in which the existing record in the database had a NULL value for the field annotated with @Version (for optimistic locking). Updating the NULL value to 0 in the database corrected this.","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>This occurred for me when persisting an entity in which the existing record in the database had a NULL value for the field annotated with @Version (for optimistic locking). Updating the NULL value to 0 in the database corrected this.</p>\n"},{"tags":[],"owner":{"account_id":5107202,"reputation":792,"user_id":4094939,"accept_rate":75,"display_name":"Joabe Lucena"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1418746304,"creation_date":1418746304,"answer_id":27509002,"question_id":2302802,"body_markdown":"If your collection is nullable just try: `object.SetYouColection(null);`\r\n\r\n","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>If your collection is nullable just try: <code>object.SetYouColection(null);</code></p>\n"},{"tags":[],"owner":{"account_id":7316691,"reputation":676,"user_id":5574099,"display_name":"allap"},"down_vote_count":1,"up_vote_count":35,"is_accepted":false,"score":34,"last_activity_date":1450265735,"creation_date":1447899795,"answer_id":33794164,"question_id":2302802,"body_markdown":"In my case it was caused by not having `CascadeType` on the `@ManyToOne` side of the bidirectional relationship. To be more precise, I had `CascadeType.ALL` on `@OneToMany` side and did not have it on `@ManyToOne`. Adding `CascadeType.ALL` to `@ManyToOne` resolved the issue.\r\n**One-to-many** side:\r\n\r\n    @OneToMany(cascade = CascadeType.ALL, mappedBy=&quot;globalConfig&quot;, orphanRemoval = true)\r\n    private Set&lt;GlobalConfigScope&gt;gcScopeSet;\r\n\r\n**Many-to-one side** (caused the problem)\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name=&quot;global_config_id&quot;)\r\n    private GlobalConfig globalConfig;\r\n\r\n**Many-to-one** (fixed by adding `CascadeType.PERSIST`)\r\n\r\n    @ManyToOne(cascade = CascadeType.PERSIST)\r\n    @JoinColumn(name=&quot;global_config_id&quot;)\r\n    private GlobalConfig globalConfig;","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>In my case it was caused by not having <code>CascadeType</code> on the <code>@ManyToOne</code> side of the bidirectional relationship. To be more precise, I had <code>CascadeType.ALL</code> on <code>@OneToMany</code> side and did not have it on <code>@ManyToOne</code>. Adding <code>CascadeType.ALL</code> to <code>@ManyToOne</code> resolved the issue.\n<strong>One-to-many</strong> side:</p>\n\n<pre><code>@OneToMany(cascade = CascadeType.ALL, mappedBy=\"globalConfig\", orphanRemoval = true)\nprivate Set&lt;GlobalConfigScope&gt;gcScopeSet;\n</code></pre>\n\n<p><strong>Many-to-one side</strong> (caused the problem)</p>\n\n<pre><code>@ManyToOne\n@JoinColumn(name=\"global_config_id\")\nprivate GlobalConfig globalConfig;\n</code></pre>\n\n<p><strong>Many-to-one</strong> (fixed by adding <code>CascadeType.PERSIST</code>)</p>\n\n<pre><code>@ManyToOne(cascade = CascadeType.PERSIST)\n@JoinColumn(name=\"global_config_id\")\nprivate GlobalConfig globalConfig;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":347557,"reputation":489,"user_id":681746,"accept_rate":43,"display_name":"acpuma"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1452018076,"creation_date":1452018076,"answer_id":34618631,"question_id":2302802,"body_markdown":"i get this error when i use \r\n\r\n    getSession().save(object)\r\n\r\nbut it works with no problem when I use \r\n\r\n    getSession().saveOrUpdate(object) \r\n","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>i get this error when i use </p>\n\n<pre><code>getSession().save(object)\n</code></pre>\n\n<p>but it works with no problem when I use </p>\n\n<pre><code>getSession().saveOrUpdate(object) \n</code></pre>\n"},{"tags":[],"owner":{"account_id":107535,"reputation":18395,"user_id":285878,"accept_rate":94,"display_name":"Jeremy Goodell"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1465842227,"creation_date":1465842227,"answer_id":37796683,"question_id":2302802,"body_markdown":"One other possible reason: in my case, I was attempting to save the child before saving the parent, on a brand new entity.\r\n\r\nThe code was something like this in a User.java model:\r\n\r\n    this.lastName = lastName;\r\n    this.isAdmin = isAdmin;\r\n    this.accountStatus = &quot;Active&quot;;\r\n    this.setNewPassword(password);\r\n    this.timeJoin = new Date();\r\n    create();\r\n\r\nThe setNewPassword() method creates a PasswordHistory record and adds it to the history collection in User. Since the create() statement hadn&#39;t been executed yet for the parent, it was trying to save to a collection of an entity that hadn&#39;t yet been created. All I had to do to fix it was to move the setNewPassword() call after the call to create().\r\n\r\n    this.lastName = lastName;\r\n    this.isAdmin = isAdmin;\r\n    this.accountStatus = &quot;Active&quot;;\r\n    this.timeJoin = new Date();\r\n    create();\r\n    this.setNewPassword(password);","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>One other possible reason: in my case, I was attempting to save the child before saving the parent, on a brand new entity.</p>\n\n<p>The code was something like this in a User.java model:</p>\n\n<pre><code>this.lastName = lastName;\nthis.isAdmin = isAdmin;\nthis.accountStatus = \"Active\";\nthis.setNewPassword(password);\nthis.timeJoin = new Date();\ncreate();\n</code></pre>\n\n<p>The setNewPassword() method creates a PasswordHistory record and adds it to the history collection in User. Since the create() statement hadn't been executed yet for the parent, it was trying to save to a collection of an entity that hadn't yet been created. All I had to do to fix it was to move the setNewPassword() call after the call to create().</p>\n\n<pre><code>this.lastName = lastName;\nthis.isAdmin = isAdmin;\nthis.accountStatus = \"Active\";\nthis.timeJoin = new Date();\ncreate();\nthis.setNewPassword(password);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":136651,"reputation":8180,"user_id":340290,"accept_rate":78,"display_name":"manikanta"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1482818879,"creation_date":1467371089,"answer_id":38143811,"question_id":2302802,"body_markdown":"To add my 2 cents, I got this same issue when I m accidentally sending `null` as the ID. Below code depicts my scenario *(and OP didn&#39;t mention any specific scenario)*.\r\n\r\n\tEmployee emp = new Employee();\r\n\temp.setDept(new Dept(deptId)); // --&gt; when deptId PKID is null, same error will be thrown\r\n\t// calls to other setters...\r\n\tem.persist(emp);\r\n\r\nHere I m setting the existing department id to a new employee instance without actually getting the department entity first, as I don&#39;t want to another select query to fire.\r\n\r\nIn some scenarios, `deptId` PKID is coming as `null` from calling method and I m getting the same error. \r\n\r\n**So, watch for `null` values for PK ID**","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>To add my 2 cents, I got this same issue when I m accidentally sending <code>null</code> as the ID. Below code depicts my scenario <em>(and OP didn't mention any specific scenario)</em>.</p>\n\n<pre><code>Employee emp = new Employee();\nemp.setDept(new Dept(deptId)); // --&gt; when deptId PKID is null, same error will be thrown\n// calls to other setters...\nem.persist(emp);\n</code></pre>\n\n<p>Here I m setting the existing department id to a new employee instance without actually getting the department entity first, as I don't want to another select query to fire.</p>\n\n<p>In some scenarios, <code>deptId</code> PKID is coming as <code>null</code> from calling method and I m getting the same error. </p>\n\n<p><strong>So, watch for <code>null</code> values for PK ID</strong></p>\n"},{"tags":[],"owner":{"account_id":3177566,"reputation":143,"user_id":2685043,"display_name":"shashigura"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1474613295,"creation_date":1474611973,"answer_id":39653950,"question_id":2302802,"body_markdown":"Simple way of solving this issue is save the both entity.\r\nfirst save the child entity and then save the parent  entity.\r\nBecause parent entity is depend on child entity for the foreign key value.\r\n\r\nBelow simple exam of one to one relationship\r\n\r\n    insert into Department (name, numOfemp, Depno) values (?, ?, ?)\r\n    Hibernate: insert into Employee (SSN, dep_Depno, firstName, lastName, middleName, empno) values (?, ?, ?, ?, ?, ?)\r\n\r\n    Session session=sf.openSession();\r\n            session.beginTransaction();\r\n            session.save(dep);\r\n            session.save(emp);\r\n","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>Simple way of solving this issue is save the both entity.\nfirst save the child entity and then save the parent  entity.\nBecause parent entity is depend on child entity for the foreign key value.</p>\n\n<p>Below simple exam of one to one relationship</p>\n\n<pre><code>insert into Department (name, numOfemp, Depno) values (?, ?, ?)\nHibernate: insert into Employee (SSN, dep_Depno, firstName, lastName, middleName, empno) values (?, ?, ?, ?, ?, ?)\n\nSession session=sf.openSession();\n        session.beginTransaction();\n        session.save(dep);\n        session.save(emp);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1475026,"reputation":1446,"user_id":1385652,"accept_rate":25,"display_name":"Hossein Nasr"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1479918362,"creation_date":1479918362,"answer_id":40769546,"question_id":2302802,"body_markdown":"beside all other good answers, this could happen if you use `merge` to persist an object and accidentally forget to use merged reference of the object in the parent class. consider the following example\r\n\r\n    merge(A);\r\n    B.setA(A);\r\n    persist(B);\r\n\r\nIn this case, you merge `A` but forget to use merged object of `A`. to solve the problem you must rewrite the code like this.\r\n\r\n    A=merge(A);//difference is here\r\n    B.setA(A);\r\n    persist(B);","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>beside all other good answers, this could happen if you use <code>merge</code> to persist an object and accidentally forget to use merged reference of the object in the parent class. consider the following example</p>\n\n<pre><code>merge(A);\nB.setA(A);\npersist(B);\n</code></pre>\n\n<p>In this case, you merge <code>A</code> but forget to use merged object of <code>A</code>. to solve the problem you must rewrite the code like this.</p>\n\n<pre><code>A=merge(A);//difference is here\nB.setA(A);\npersist(B);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1475026,"reputation":1446,"user_id":1385652,"accept_rate":25,"display_name":"Hossein Nasr"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1480505490,"creation_date":1480505490,"answer_id":40887268,"question_id":2302802,"body_markdown":"There is another possibility that can cause this error in hibernate. You may set an unsaved reference of your object `A` to an attached entity `B` and want to persist object `C`. Even in this case, you will get the aforementioned error.","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>There is another possibility that can cause this error in hibernate. You may set an unsaved reference of your object <code>A</code> to an attached entity <code>B</code> and want to persist object <code>C</code>. Even in this case, you will get the aforementioned error.</p>\n"},{"tags":[],"owner":{"account_id":1424899,"reputation":4365,"user_id":1348691,"accept_rate":67,"display_name":"Tiina"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1487151318,"creation_date":1487151318,"answer_id":42245525,"question_id":2302802,"body_markdown":"Don&#39;t use `Cascade.All` until you really have to. `Role` and `Permission` have bidirectional `manyToMany` relation. Then the following code would work fine  \r\n    \r\n\r\n        Permission p = new Permission();\r\n        p.setName(&quot;help&quot;);\r\n        Permission p2 = new Permission();\r\n        p2.setName(&quot;self_info&quot;);\r\n        p = (Permission)crudRepository.save(p); // returned p has id filled in.\r\n        p2 = (Permission)crudRepository.save(p2); // so does p2.\r\n        Role role = new Role();\r\n        role.setAvailable(true);\r\n        role.setDescription(&quot;a test role&quot;);\r\n        role.setRole(&quot;admin&quot;);\r\n        List&lt;Permission&gt; pList = new ArrayList&lt;Permission&gt;();\r\n        pList.add(p);\r\n        pList.add(p2);\r\n        role.setPermissions(pList);\r\n        crudRepository.save(role);\r\nwhile if the object is just a &quot;new&quot; one, then it would throw the same error.","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>Don't use <code>Cascade.All</code> until you really have to. <code>Role</code> and <code>Permission</code> have bidirectional <code>manyToMany</code> relation. Then the following code would work fine  </p>\n\n<pre><code>    Permission p = new Permission();\n    p.setName(\"help\");\n    Permission p2 = new Permission();\n    p2.setName(\"self_info\");\n    p = (Permission)crudRepository.save(p); // returned p has id filled in.\n    p2 = (Permission)crudRepository.save(p2); // so does p2.\n    Role role = new Role();\n    role.setAvailable(true);\n    role.setDescription(\"a test role\");\n    role.setRole(\"admin\");\n    List&lt;Permission&gt; pList = new ArrayList&lt;Permission&gt;();\n    pList.add(p);\n    pList.add(p2);\n    role.setPermissions(pList);\n    crudRepository.save(role);\n</code></pre>\n\n<p>while if the object is just a \"new\" one, then it would throw the same error.</p>\n"},{"tags":[],"owner":{"account_id":1039267,"reputation":18413,"user_id":1045704,"accept_rate":78,"display_name":"pheromix"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1489143697,"creation_date":1489143697,"answer_id":42716777,"question_id":2302802,"body_markdown":"One possible cause of the error is the inexistence of the setting of the value of the parent entity ; for example for a department-employees relationship you have to write this in order to fix the error :\r\n\r\n    Department dept = (Department)session.load(Department.class, dept_code); // dept_code is from the jsp form which you get in the controller with @RequestParam String department\r\n    employee.setDepartment(dept);","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>One possible cause of the error is the inexistence of the setting of the value of the parent entity ; for example for a department-employees relationship you have to write this in order to fix the error :</p>\n\n<pre><code>Department dept = (Department)session.load(Department.class, dept_code); // dept_code is from the jsp form which you get in the controller with @RequestParam String department\nemployee.setDepartment(dept);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8886305,"reputation":1872,"user_id":6634462,"accept_rate":0,"display_name":"Ravindra Kumar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1504099798,"creation_date":1504099798,"answer_id":45961822,"question_id":2302802,"body_markdown":"There are so many possibilities of this error some other possibilities are   also on add page or edit page. In my case I was trying to save a object AdvanceSalary. The problem is that in edit the AdvanceSalary employee.employee_id is null Because on edit I was not set the employee.employee_id. I have make a hidden field and set it. my code working absolutely fine.\r\n    \r\n    \r\n        @Entity(name = &quot;ic_advance_salary&quot;)\r\n        @Table(name = &quot;ic_advance_salary&quot;)\r\n        public class AdvanceSalary extends BaseDO{\r\n        \r\n        \t@Id\r\n        \t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        \t@Column(name = &quot;id&quot;)\r\n        \tprivate Integer id;\r\n        \t\r\n        \t@ManyToOne(fetch = FetchType.EAGER)\r\n        \t@JoinColumn(name = &quot;employee_id&quot;, nullable = false)\r\n        \tprivate Employee employee;\r\n        \t\r\n        \t@Column(name = &quot;employee_id&quot;, insertable=false, updatable=false)\r\n        \t@NotNull(message=&quot;Please enter employee Id&quot;)\r\n        \tprivate Long employee_id;\r\n        \r\n        \t@Column(name = &quot;advance_date&quot;)\r\n        \t@DateTimeFormat(pattern = &quot;dd-MMM-yyyy&quot;)\r\n        \t@NotNull(message=&quot;Please enter advance date&quot;)\r\n        \tprivate Date advance_date;\r\n        \t\r\n        \t@Column(name = &quot;amount&quot;)\r\n        \t@NotNull(message=&quot;Please enter Paid Amount&quot;)\r\n        \tprivate Double amount;\r\n        \t\r\n        \t@Column(name = &quot;cheque_date&quot;)\r\n        \t@DateTimeFormat(pattern = &quot;dd-MMM-yyyy&quot;)\r\n        \tprivate Date cheque_date;\r\n        \t\r\n        \t@Column(name = &quot;cheque_no&quot;)\r\n        \tprivate String cheque_no;\r\n        \t\r\n        \t@Column(name = &quot;remarks&quot;)\r\n        \tprivate String remarks;\r\n        \t\r\n        \tpublic AdvanceSalary() {\r\n        \t}\r\n        \r\n        \tpublic AdvanceSalary(Integer advance_salary_id) {\r\n        \t\tthis.id = advance_salary_id;\r\n        \t}\r\n        \r\n        \tpublic Integer getId() {\r\n        \t\treturn id;\r\n        \t}\r\n        \r\n        \tpublic void setId(Integer id) {\r\n        \t\tthis.id = id;\r\n        \t}\r\n        \r\n        \tpublic Employee getEmployee() {\r\n        \t\treturn employee;\r\n        \t}\r\n        \r\n        \tpublic void setEmployee(Employee employee) {\r\n        \t\tthis.employee = employee;\r\n        \t}\r\n        \t\r\n        \r\n        \tpublic Long getEmployee_id() {\r\n        \t\treturn employee_id;\r\n        \t}\r\n        \r\n        \tpublic void setEmployee_id(Long employee_id) {\r\n        \t\tthis.employee_id = employee_id;\r\n        \t}\r\n        \r\n        }\r\n    \r\n     ","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>There are so many possibilities of this error some other possibilities are   also on add page or edit page. In my case I was trying to save a object AdvanceSalary. The problem is that in edit the AdvanceSalary employee.employee_id is null Because on edit I was not set the employee.employee_id. I have make a hidden field and set it. my code working absolutely fine.</p>\n\n<pre><code>    @Entity(name = \"ic_advance_salary\")\n    @Table(name = \"ic_advance_salary\")\n    public class AdvanceSalary extends BaseDO{\n\n        @Id\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\n        @Column(name = \"id\")\n        private Integer id;\n\n        @ManyToOne(fetch = FetchType.EAGER)\n        @JoinColumn(name = \"employee_id\", nullable = false)\n        private Employee employee;\n\n        @Column(name = \"employee_id\", insertable=false, updatable=false)\n        @NotNull(message=\"Please enter employee Id\")\n        private Long employee_id;\n\n        @Column(name = \"advance_date\")\n        @DateTimeFormat(pattern = \"dd-MMM-yyyy\")\n        @NotNull(message=\"Please enter advance date\")\n        private Date advance_date;\n\n        @Column(name = \"amount\")\n        @NotNull(message=\"Please enter Paid Amount\")\n        private Double amount;\n\n        @Column(name = \"cheque_date\")\n        @DateTimeFormat(pattern = \"dd-MMM-yyyy\")\n        private Date cheque_date;\n\n        @Column(name = \"cheque_no\")\n        private String cheque_no;\n\n        @Column(name = \"remarks\")\n        private String remarks;\n\n        public AdvanceSalary() {\n        }\n\n        public AdvanceSalary(Integer advance_salary_id) {\n            this.id = advance_salary_id;\n        }\n\n        public Integer getId() {\n            return id;\n        }\n\n        public void setId(Integer id) {\n            this.id = id;\n        }\n\n        public Employee getEmployee() {\n            return employee;\n        }\n\n        public void setEmployee(Employee employee) {\n            this.employee = employee;\n        }\n\n\n        public Long getEmployee_id() {\n            return employee_id;\n        }\n\n        public void setEmployee_id(Long employee_id) {\n            this.employee_id = employee_id;\n        }\n\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2934958,"reputation":725,"user_id":2514137,"accept_rate":70,"display_name":"DevWithSigns"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1518256324,"creation_date":1518256324,"answer_id":48719424,"question_id":2302802,"body_markdown":"If you&#39;re using Spring Data JPA then addition `@Transactional` annotation to your service implementation would solve the issue.","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>If you're using Spring Data JPA then addition <code>@Transactional</code> annotation to your service implementation would solve the issue.</p>\n"},{"tags":[],"owner":{"account_id":4610588,"reputation":4137,"user_id":3738831,"accept_rate":50,"display_name":"Tadele Ayelegn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1518437065,"creation_date":1518437065,"answer_id":48746102,"question_id":2302802,"body_markdown":"I faced this exception when I  did not persist parent object but I was saving the child. To resolve the issue, with in the same session I persisted both the child and parent objects and used  CascadeType.ALL on the parent. ","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>I faced this exception when I  did not persist parent object but I was saving the child. To resolve the issue, with in the same session I persisted both the child and parent objects and used  CascadeType.ALL on the parent. </p>\n"},{"tags":[],"owner":{"account_id":2770645,"reputation":51,"user_id":2385312,"display_name":"Ralf"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1518527191,"creation_date":1518527191,"answer_id":48767551,"question_id":2302802,"body_markdown":"For the sake of completeness: A\r\n\r\n    org.hibernate.TransientPropertyValueException \r\n\r\nwith message\r\n\r\n    object references an unsaved transient instance - save the transient instance before flushing\r\n\r\n\r\nwill also occur when you try to persist / merge an entity with a reference to another entity which happens to be **detached**.\r\n\r\n","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>For the sake of completeness: A</p>\n\n<pre><code>org.hibernate.TransientPropertyValueException \n</code></pre>\n\n<p>with message</p>\n\n<pre><code>object references an unsaved transient instance - save the transient instance before flushing\n</code></pre>\n\n<p>will also occur when you try to persist / merge an entity with a reference to another entity which happens to be <strong>detached</strong>.</p>\n"},{"tags":[],"owner":{"display_name":"user8495266"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1523371084,"creation_date":1523371084,"answer_id":49756431,"question_id":2302802,"body_markdown":"I think is because you have try to persist an object that have a reference to another object that is not persist yet, and so it try in the &quot;DB side&quot; to put a reference to a row that not exists","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>I think is because you have try to persist an object that have a reference to another object that is not persist yet, and so it try in the \"DB side\" to put a reference to a row that not exists</p>\n"},{"tags":[],"owner":{"account_id":8316795,"reputation":61,"user_id":6249773,"display_name":"Harsh Vardhan Singh Solanki"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1529573942,"creation_date":1527764496,"answer_id":50622773,"question_id":2302802,"body_markdown":"Case 1:\r\nI was getting this exception when I was trying to create a parent and saving that parent reference to its child and then some other DELETE/UPDATE query(JPQL). So I just flush() the newly created entity after creating parent and after creating child using same parent reference. It Worked for me.\r\n\r\nCase 2: \r\n\r\nParent class\r\n\r\n    public class Reference implements Serializable {\r\n    \t   \r\n    \t@Id\r\n    \t@Column(precision=20, scale=0)\r\n    \tprivate BigInteger id;\r\n    \t\r\n    \t@Temporal(TemporalType.TIMESTAMP)\r\n    \tprivate Date modifiedOn;\r\n    \t\r\n    \t@OneToOne(mappedBy=&quot;reference&quot;)\r\n    \tprivate ReferenceAdditionalDetails refAddDetails;\r\n        . \r\n        .\r\n        .\r\n    }\r\n\r\nChild Class:\r\n\r\n    public class ReferenceAdditionalDetails implements Serializable{\r\n    \r\n    \tprivate static final long serialVersionUID = 1L;\r\n    \t\r\n    \t@Id\r\n    \t@OneToOne\r\n    \t@JoinColumn(name=&quot;reference&quot;,referencedColumnName=&quot;id&quot;)\r\n    \tprivate Reference reference;\r\n    \t\r\n    \tprivate String preferedSector1;\r\n    \tprivate String preferedSector2;\r\n    \t.\r\n        .\r\n         \r\n    }\r\n\r\nIn the above case where parent(Reference) and child(ReferenceAdditionalDetails) having OneToOne relationship and when you try to create Reference entity and then its child(ReferenceAdditionalDetails), it will give you the same exception. So to avoid the exception you have to set null for child class and then create the parent.(Sample Code)\r\n\r\n    .\r\n    .\r\n    reference.setRefAddDetails(null);\r\n    reference = referenceDao.create(reference);\r\n    entityManager.flush();\r\n    .\r\n    .","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>Case 1:\nI was getting this exception when I was trying to create a parent and saving that parent reference to its child and then some other DELETE/UPDATE query(JPQL). So I just flush() the newly created entity after creating parent and after creating child using same parent reference. It Worked for me.</p>\n\n<p>Case 2: </p>\n\n<p>Parent class</p>\n\n<pre><code>public class Reference implements Serializable {\n\n    @Id\n    @Column(precision=20, scale=0)\n    private BigInteger id;\n\n    @Temporal(TemporalType.TIMESTAMP)\n    private Date modifiedOn;\n\n    @OneToOne(mappedBy=\"reference\")\n    private ReferenceAdditionalDetails refAddDetails;\n    . \n    .\n    .\n}\n</code></pre>\n\n<p>Child Class:</p>\n\n<pre><code>public class ReferenceAdditionalDetails implements Serializable{\n\n    private static final long serialVersionUID = 1L;\n\n    @Id\n    @OneToOne\n    @JoinColumn(name=\"reference\",referencedColumnName=\"id\")\n    private Reference reference;\n\n    private String preferedSector1;\n    private String preferedSector2;\n    .\n    .\n\n}\n</code></pre>\n\n<p>In the above case where parent(Reference) and child(ReferenceAdditionalDetails) having OneToOne relationship and when you try to create Reference entity and then its child(ReferenceAdditionalDetails), it will give you the same exception. So to avoid the exception you have to set null for child class and then create the parent.(Sample Code)</p>\n\n<pre><code>.\n.\nreference.setRefAddDetails(null);\nreference = referenceDao.create(reference);\nentityManager.flush();\n.\n.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3723758,"reputation":11894,"user_id":3600553,"accept_rate":71,"display_name":"Du-Lacoste"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1532248795,"creation_date":1532248795,"answer_id":51463390,"question_id":2302802,"body_markdown":"I also faced the same situation. By setting following annotation above the property made it solve the exception prompted.\r\n\r\nThe Exception I faced.\r\n\r\n    Exception in thread &quot;main&quot; java.lang.IllegalStateException: org.hibernate.TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing: com.model.Car_OneToMany\r\n\r\n\r\nTo overcome, the annotation I used.\r\n\r\n        @OneToMany(cascade = {CascadeType.ALL})\r\n        @Column(name = &quot;ListOfCarsDrivenByDriver&quot;)\r\n        private List&lt;Car_OneToMany&gt; listOfCarsBeingDriven = new ArrayList&lt;Car_OneToMany&gt;();\r\n\r\nWhat made Hibernate throw the exception:\r\n\r\nThis exception is thrown at your console because the child object I attach to the parent object is not present in the database at that moment.\r\n\r\nBy providing `@OneToMany(cascade = {CascadeType.ALL})` , it tells Hibernate to save them to the database while saving the parent object. ","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>I also faced the same situation. By setting following annotation above the property made it solve the exception prompted.</p>\n\n<p>The Exception I faced.</p>\n\n<pre><code>Exception in thread \"main\" java.lang.IllegalStateException: org.hibernate.TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing: com.model.Car_OneToMany\n</code></pre>\n\n<p>To overcome, the annotation I used.</p>\n\n<pre><code>    @OneToMany(cascade = {CascadeType.ALL})\n    @Column(name = \"ListOfCarsDrivenByDriver\")\n    private List&lt;Car_OneToMany&gt; listOfCarsBeingDriven = new ArrayList&lt;Car_OneToMany&gt;();\n</code></pre>\n\n<p>What made Hibernate throw the exception:</p>\n\n<p>This exception is thrown at your console because the child object I attach to the parent object is not present in the database at that moment.</p>\n\n<p>By providing <code>@OneToMany(cascade = {CascadeType.ALL})</code> , it tells Hibernate to save them to the database while saving the parent object. </p>\n"},{"tags":[],"owner":{"account_id":3896319,"reputation":3078,"user_id":3225260,"accept_rate":45,"display_name":"mad_fox"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1548209137,"creation_date":1548209137,"answer_id":54319066,"question_id":2302802,"body_markdown":"This issue happened to me when I created a new entity and an associated entity in a method marked as `@Transactional`, then performed a query before saving. Ex\r\n\r\n    @Transactional\r\n    public someService() {\r\n        Entity someEntity = new Entity();\r\n        AssocaiatedEntity associatedEntity = new AssocaitedEntity();\r\n        someEntity.setAssociatedEntity(associatedEntity);\r\n        associatedEntity.setEntity(someEntity);\r\n    \r\n        // Performing any query was causing hibernate to attempt to persist the new entity. It would then throw an exception\r\n        someDao.getSomething();\r\n    \r\n        entityDao.create(someEntity);\r\n    }\r\n\r\nTo fix, I performed the query before creating the new entity. ","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>This issue happened to me when I created a new entity and an associated entity in a method marked as <code>@Transactional</code>, then performed a query before saving. Ex</p>\n\n<pre><code>@Transactional\npublic someService() {\n    Entity someEntity = new Entity();\n    AssocaiatedEntity associatedEntity = new AssocaitedEntity();\n    someEntity.setAssociatedEntity(associatedEntity);\n    associatedEntity.setEntity(someEntity);\n\n    // Performing any query was causing hibernate to attempt to persist the new entity. It would then throw an exception\n    someDao.getSomething();\n\n    entityDao.create(someEntity);\n}\n</code></pre>\n\n<p>To fix, I performed the query before creating the new entity. </p>\n"},{"tags":[],"owner":{"account_id":1012936,"reputation":145168,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"down_vote_count":0,"up_vote_count":193,"is_accepted":false,"score":193,"last_activity_date":1618479991,"creation_date":1577653053,"answer_id":59523218,"question_id":2302802,"body_markdown":"Introduction\r\n------------\r\n\r\nWhen using JPA and Hibernate, an entity can be in one of the following 4 states:\r\n\r\n - **New** - A newly created object that hasn’t ever been associated with a Hibernate Session (a.k.a Persistence Context) and is not mapped to any database table row is considered to be in the New or Transient state.\r\n\r\n  To become persisted we need to either explicitly call the `persist` method or make use of the transitive persistence mechanism.\r\n\r\n - **Persistent** - A persistent entity has been associated with a database table row and it’s being managed by the currently running Persistence Context. \r\n  \r\n  Any change made to such an entity is going to be detected and propagated to the database (during the Session flush-time). \r\n\r\n - **Detached** - Once the currently running Persistence Context is closed all the previously managed entities become detached. Successive changes will no longer be tracked and no automatic database synchronization is going to happen.\r\n\r\n - **Removed** - Although JPA demands that managed entities only are allowed to be removed, Hibernate can also delete detached entities (but only through a `remove` method call).\r\n\r\nEntity state transitions\r\n------------------------\r\n\r\nTo move an entity from one state to the other, you can use the `persist`, `remove` or `merge` methods.\r\n\r\n[![JPA entity states][1]](https://vladmihalcea.com/a-beginners-guide-to-jpa-hibernate-entity-state-transitions/)\r\n\r\nFixing the problem\r\n------------------\r\n\r\nThe issue you are describing in your question:\r\n\r\n    object references an unsaved transient instance - save the transient instance before flushing\r\n\r\nis caused by associating an entity in the state of  **New** to an entity that&#39;s in the state of *Managed*.\r\n\r\nThis can happen when you are associating a child entity to a one-to-many collection in the parent entity, and the collection does not `cascade` the entity state transitions.\r\n\r\nSo, you can fix this by adding cascade to the entity association that triggered this failure, as follows:\r\n\r\nThe `@OneToOne` association\r\n---------------------------\r\n\r\n    @OneToOne(\r\n        mappedBy = &quot;post&quot;,\r\n        orphanRemoval = true,\r\n        cascade = CascadeType.ALL)\r\n    private PostDetails details;\r\n\r\n&gt; Notice the `CascadeType.ALL` value we added for the `cascade` attribute.\r\n\r\nThe `@OneToMany` association\r\n----------------------------\r\n\r\n    @OneToMany(\r\n        mappedBy = &quot;post&quot;, \r\n        orphanRemoval = true,\r\n        cascade = CascadeType.ALL)\r\n    private List&lt;Comment&gt; comments = new ArrayList&lt;&gt;();\r\n\r\nAgain, the `CascadeType.ALL` is suitable for the bidirectional `@OneToMany` associations. \r\n\r\nNow, in order for the cascade to work properly in a bidirectional, you also need to make sure that the parent and child associations are in sync. \r\n\r\nThe `@ManyToMany` association\r\n-----------------------------\r\n\r\n    @ManyToMany(\r\n        mappedBy = &quot;authors&quot;,\r\n        cascade = {\r\n            CascadeType.PERSIST, \r\n            CascadeType.MERGE\r\n        }\r\n    )\r\n    private List&lt;Book&gt; books = new ArrayList&lt;&gt;();\r\n\r\nIn a `@ManyToMany` association, you cannot use `CascadeType.ALL` or `orphanRemoval` as this will propagate the delete entity state transition from one parent to another parent entity.\r\n\r\nTherefore, for `@ManyToMany` associations, you usually cascade the `CascadeType.PERSIST` or `CascadeType.MERGE` operations. Alternatively, you can expand that to `DETACH` or `REFRESH`. \r\n\r\n  [1]: https://i.stack.imgur.com/QSdMl.png","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<h2>Introduction</h2>\n<p>When using JPA and Hibernate, an entity can be in one of the following 4 states:</p>\n<ul>\n<li><strong>New</strong> - A newly created object that hasn’t ever been associated with a Hibernate Session (a.k.a Persistence Context) and is not mapped to any database table row is considered to be in the New or Transient state.</li>\n</ul>\n<p>To become persisted we need to either explicitly call the <code>persist</code> method or make use of the transitive persistence mechanism.</p>\n<ul>\n<li><strong>Persistent</strong> - A persistent entity has been associated with a database table row and it’s being managed by the currently running Persistence Context.</li>\n</ul>\n<p>Any change made to such an entity is going to be detected and propagated to the database (during the Session flush-time).</p>\n<ul>\n<li><p><strong>Detached</strong> - Once the currently running Persistence Context is closed all the previously managed entities become detached. Successive changes will no longer be tracked and no automatic database synchronization is going to happen.</p>\n</li>\n<li><p><strong>Removed</strong> - Although JPA demands that managed entities only are allowed to be removed, Hibernate can also delete detached entities (but only through a <code>remove</code> method call).</p>\n</li>\n</ul>\n<h2>Entity state transitions</h2>\n<p>To move an entity from one state to the other, you can use the <code>persist</code>, <code>remove</code> or <code>merge</code> methods.</p>\n<p><a href=\"https://vladmihalcea.com/a-beginners-guide-to-jpa-hibernate-entity-state-transitions/\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/QSdMl.png\" alt=\"JPA entity states\" /></a></p>\n<h2>Fixing the problem</h2>\n<p>The issue you are describing in your question:</p>\n<pre><code>object references an unsaved transient instance - save the transient instance before flushing\n</code></pre>\n<p>is caused by associating an entity in the state of  <strong>New</strong> to an entity that's in the state of <em>Managed</em>.</p>\n<p>This can happen when you are associating a child entity to a one-to-many collection in the parent entity, and the collection does not <code>cascade</code> the entity state transitions.</p>\n<p>So, you can fix this by adding cascade to the entity association that triggered this failure, as follows:</p>\n<h2>The <code>@OneToOne</code> association</h2>\n<pre><code>@OneToOne(\n    mappedBy = &quot;post&quot;,\n    orphanRemoval = true,\n    cascade = CascadeType.ALL)\nprivate PostDetails details;\n</code></pre>\n<blockquote>\n<p>Notice the <code>CascadeType.ALL</code> value we added for the <code>cascade</code> attribute.</p>\n</blockquote>\n<h2>The <code>@OneToMany</code> association</h2>\n<pre><code>@OneToMany(\n    mappedBy = &quot;post&quot;, \n    orphanRemoval = true,\n    cascade = CascadeType.ALL)\nprivate List&lt;Comment&gt; comments = new ArrayList&lt;&gt;();\n</code></pre>\n<p>Again, the <code>CascadeType.ALL</code> is suitable for the bidirectional <code>@OneToMany</code> associations.</p>\n<p>Now, in order for the cascade to work properly in a bidirectional, you also need to make sure that the parent and child associations are in sync.</p>\n<h2>The <code>@ManyToMany</code> association</h2>\n<pre><code>@ManyToMany(\n    mappedBy = &quot;authors&quot;,\n    cascade = {\n        CascadeType.PERSIST, \n        CascadeType.MERGE\n    }\n)\nprivate List&lt;Book&gt; books = new ArrayList&lt;&gt;();\n</code></pre>\n<p>In a <code>@ManyToMany</code> association, you cannot use <code>CascadeType.ALL</code> or <code>orphanRemoval</code> as this will propagate the delete entity state transition from one parent to another parent entity.</p>\n<p>Therefore, for <code>@ManyToMany</code> associations, you usually cascade the <code>CascadeType.PERSIST</code> or <code>CascadeType.MERGE</code> operations. Alternatively, you can expand that to <code>DETACH</code> or <code>REFRESH</code>.</p>\n"},{"tags":[],"owner":{"account_id":10307070,"reputation":2201,"user_id":7604006,"accept_rate":60,"display_name":"NikNik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1580377554,"creation_date":1580377554,"answer_id":59983077,"question_id":2302802,"body_markdown":"My problem was related to `@BeforeEach` of JUnit. And even if I saved the related entities (in my case `@ManyToOne`), I got the same error.\r\n\r\nThe problem is somehow related to the sequence that I have in my parent.\r\nIf I assign the value to that attribute, the problem is solved.\r\n\r\nEx.\r\nIf I have the entity Question that can have some categories (one or more) and entity Question has a sequence:\r\n\r\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;feedbackSeq&quot;)\r\n    @Id\r\n    private Long id;\r\nI have to assign the value `question.setId(1L);`\r\n","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>My problem was related to <code>@BeforeEach</code> of JUnit. And even if I saved the related entities (in my case <code>@ManyToOne</code>), I got the same error.</p>\n\n<p>The problem is somehow related to the sequence that I have in my parent.\nIf I assign the value to that attribute, the problem is solved.</p>\n\n<p>Ex.\nIf I have the entity Question that can have some categories (one or more) and entity Question has a sequence:</p>\n\n<pre><code>@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = \"feedbackSeq\")\n@Id\nprivate Long id;\n</code></pre>\n\n<p>I have to assign the value <code>question.setId(1L);</code></p>\n"},{"tags":[],"owner":{"account_id":7059598,"reputation":831,"user_id":5405451,"display_name":"Bilal Ahmad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1586014604,"creation_date":1586014604,"answer_id":61030518,"question_id":2302802,"body_markdown":"Just make Constructor of your mapping in your base class.\r\nLike if you want One-To-One relation in Entity A, Entity B.\r\nif your are taking A as base class, then A must have a Constructor have B as a argument.","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>Just make Constructor of your mapping in your base class.\nLike if you want One-To-One relation in Entity A, Entity B.\nif your are taking A as base class, then A must have a Constructor have B as a argument.</p>\n"},{"tags":[],"owner":{"account_id":16778275,"reputation":21,"user_id":12129041,"display_name":"Amit Varshney"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1593749343,"creation_date":1593749343,"answer_id":62708376,"question_id":2302802,"body_markdown":"In my case , issue was completely different. I have two classes let&#39;s say c1 &amp; c2. Between C1 &amp; C2 dependency is OneToMany. Now if i am saving C1 in DB it was throwing above error. \r\n\r\nResolution of this problem was to get first C2&#39;s id from consumer request and find C2 via repository call.Afterwards save c2 into C1 object .Now if i am saving C1, it&#39;s working fine.","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>In my case , issue was completely different. I have two classes let's say c1 &amp; c2. Between C1 &amp; C2 dependency is OneToMany. Now if i am saving C1 in DB it was throwing above error.</p>\n<p>Resolution of this problem was to get first C2's id from consumer request and find C2 via repository call.Afterwards save c2 into C1 object .Now if i am saving C1, it's working fine.</p>\n"},{"tags":[],"owner":{"account_id":17735296,"reputation":61,"user_id":12876807,"display_name":"Abeed Ali"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1595776840,"creation_date":1595776840,"answer_id":63102062,"question_id":2302802,"body_markdown":"I was facing the same error for all PUT HTTP transactions, after introducing optimistic locking (@Version)\r\n\r\nAt the time of updating an entity it is mandatory to send id and version of that entity. If any of the entity fields are related to other entities then for that field also we should provide id and version values, without that the JPA try to persist that related entity first as a new entity\r\n\r\n**Example**: we have two entities --&gt; **Vehicle**(id,Car,version) ; **Car**(id, version, brand); to update/persist Vehicle entity make sure the Car field in vehicle entity has id and version fields provided","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>I was facing the same error for all PUT HTTP transactions, after introducing optimistic locking (@Version)</p>\n<p>At the time of updating an entity it is mandatory to send id and version of that entity. If any of the entity fields are related to other entities then for that field also we should provide id and version values, without that the JPA try to persist that related entity first as a new entity</p>\n<p><strong>Example</strong>: we have two entities --&gt; <strong>Vehicle</strong>(id,Car,version) ; <strong>Car</strong>(id, version, brand); to update/persist Vehicle entity make sure the Car field in vehicle entity has id and version fields provided</p>\n"},{"tags":[],"owner":{"account_id":5656621,"reputation":563,"user_id":4475588,"accept_rate":0,"display_name":"Igor Tiulkanov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1596544250,"creation_date":1596544250,"answer_id":63246948,"question_id":2302802,"body_markdown":"In my case using Cascade.ALL was adding unnecessary entry to the table, which already had same object (Generating a child value without an id does just that). \r\nSo I would have to work around with getting child object from repository first, and setting it into the main object instead of the one causing the issue.\r\n     \r\n    Student s = studentRepo.findByName(generatedObject.getStudent().getName())\r\n    generatedObject.student(s);   ","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>In my case using Cascade.ALL was adding unnecessary entry to the table, which already had same object (Generating a child value without an id does just that).\nSo I would have to work around with getting child object from repository first, and setting it into the main object instead of the one causing the issue.</p>\n<pre><code>Student s = studentRepo.findByName(generatedObject.getStudent().getName())\ngeneratedObject.student(s);   \n</code></pre>\n"},{"tags":[],"owner":{"account_id":5240090,"reputation":153,"user_id":4187428,"display_name":"Balazs Szanto"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1612621089,"creation_date":1612621089,"answer_id":66077862,"question_id":2302802,"body_markdown":"It can also happen when you are having OneToMany relation and you try to add the child entity to the list in parent entity, then **retrieve** this list through parent entity (before saving this parent entity), **without saving child entity** itself, e.g.:\r\n\r\n    Child childEntity = new Child();\r\n    parentEntity.addChild(childEntity);\r\n    parentEntity.getChildren(); // I needed the retrieval for logging, but one may need it for other reasons.\r\n    parentRepository.save(parentEntity);\r\n\r\nThe error was thrown when I saved the parent entity. If I removed the retrieval in the previous row, then the error was not thrown, but of course that&#39;s not the solution.\r\n\r\nThe **solution** was saving the childEntity and **adding** that **saved child entity** to the parent entity, like this:\r\n\r\n    Child childEntity = new Child();\r\n    Child savedChildEntity = childRepository.save(childEntity);\r\n    parentEntity.addChild(savedChildEntity);\r\n    parentEntity.getChildren();\r\n    parentRepository.save(parentEntity);","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>It can also happen when you are having OneToMany relation and you try to add the child entity to the list in parent entity, then <strong>retrieve</strong> this list through parent entity (before saving this parent entity), <strong>without saving child entity</strong> itself, e.g.:</p>\n<pre><code>Child childEntity = new Child();\nparentEntity.addChild(childEntity);\nparentEntity.getChildren(); // I needed the retrieval for logging, but one may need it for other reasons.\nparentRepository.save(parentEntity);\n</code></pre>\n<p>The error was thrown when I saved the parent entity. If I removed the retrieval in the previous row, then the error was not thrown, but of course that's not the solution.</p>\n<p>The <strong>solution</strong> was saving the childEntity and <strong>adding</strong> that <strong>saved child entity</strong> to the parent entity, like this:</p>\n<pre><code>Child childEntity = new Child();\nChild savedChildEntity = childRepository.save(childEntity);\nparentEntity.addChild(savedChildEntity);\nparentEntity.getChildren();\nparentRepository.save(parentEntity);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7531617,"reputation":159,"user_id":5719570,"display_name":"Satrajit A"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662408624,"creation_date":1662395477,"answer_id":73612326,"question_id":2302802,"body_markdown":"In my case, it occurred when I tried to retrieve a related entity using reference to an entity with null id.\r\n\r\n    @Entity\r\n    public class User {\r\n    @Id\r\n    private Long id;\r\n    }\r\n    \r\n    @Entity\r\n    public class Address {\r\n    @Id\r\n    private Long id;\r\n    @JoinColumn(name=&quot;user_id&quot;)\r\n    @OneToOne\r\n    private User user;\r\n    }\r\n    \r\n    interface AddressRepository extends JpaRepository&lt;Address, Long&gt; {\r\n    Address findByUser(User user);\r\n    }\r\n    \r\n    User user = new User(); // this is transient, does not have id populated\r\n    // user.setId(1L) // works fine if this is uncommented\r\n    \r\n    addressRepository.findByUser(user); // throws exception\r\n\r\n","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>In my case, it occurred when I tried to retrieve a related entity using reference to an entity with null id.</p>\n<pre><code>@Entity\npublic class User {\n@Id\nprivate Long id;\n}\n\n@Entity\npublic class Address {\n@Id\nprivate Long id;\n@JoinColumn(name=&quot;user_id&quot;)\n@OneToOne\nprivate User user;\n}\n\ninterface AddressRepository extends JpaRepository&lt;Address, Long&gt; {\nAddress findByUser(User user);\n}\n\nUser user = new User(); // this is transient, does not have id populated\n// user.setId(1L) // works fine if this is uncommented\n\naddressRepository.findByUser(user); // throws exception\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1092885,"reputation":37669,"user_id":1087131,"accept_rate":54,"display_name":"Stephen Paul"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1677830405,"creation_date":1675077783,"answer_id":75283725,"question_id":2302802,"body_markdown":"I just got this error because I was assigning an un-proxied entity onto another entity before saving. \r\n\r\nI should have been linking a proxied entity instance.\r\n\r\nSee the below explanation:\r\n\r\n\r\n    Child saved = childRepository.save(child);\r\n\r\n    // INCORRECT\r\n    parent.setChild(child);  // &lt;-- &#39;child&#39; is NOT managed (not proxied)\r\n\r\n    // CORRECT\r\n    parent.setChild(saved);  // &lt;-- &#39;saved&#39; is managed (proxied)\r\n    ","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>I just got this error because I was assigning an un-proxied entity onto another entity before saving.</p>\n<p>I should have been linking a proxied entity instance.</p>\n<p>See the below explanation:</p>\n<pre><code>Child saved = childRepository.save(child);\n\n// INCORRECT\nparent.setChild(child);  // &lt;-- 'child' is NOT managed (not proxied)\n\n// CORRECT\nparent.setChild(saved);  // &lt;-- 'saved' is managed (proxied)\n</code></pre>\n"}],"owner":{"account_id":67082,"reputation":12759,"user_id":196480,"accept_rate":81,"display_name":"Tushar Ahirrao"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1049265,"favorite_count":0,"down_vote_count":3,"up_vote_count":888,"accepted_answer_id":2302814,"answer_count":33,"score":885,"last_activity_date":1691097570,"creation_date":1266682665,"question_id":2302802,"body_markdown":"I receive following error when I save the object using Hibernate \r\n\r\n    object references an unsaved transient instance - save the transient instance before flushing\r\n\r\n ","title":"How to fix the Hibernate &quot;object references an unsaved transient instance - save the transient instance before flushing&quot; error","body":"<p>I receive following error when I save the object using Hibernate </p>\n\n<pre><code>object references an unsaved transient instance - save the transient instance before flushing\n</code></pre>\n"},{"tags":["java","docker","logging","splunk"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1691097706,"post_id":76831658,"comment_id":135449732,"body_markdown":"How is this question related to programming? It might be better suited for [devops](https://devops.stackexchange.com/) or [sf].","body":"How is this question related to programming? It might be better suited for <a href=\"https://devops.stackexchange.com/\">devops</a> or <a href=\"https://serverfault.com\">Server Fault</a>."}],"owner":{"account_id":11607084,"reputation":317,"user_id":8502417,"accept_rate":60,"display_name":"Melanie"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1691576145,"answer_count":0,"score":1,"last_activity_date":1691097452,"creation_date":1691097452,"question_id":76831658,"body_markdown":"I have an app that runs in a docker container (say A). The app includes a log4j2 yaml configuration file, which has an Http_Appender routing logs to http://host.docker.internal:8080/log ready to be received in a proxy in docker container B. These logs are then setup to be queued to a websocket server at localhost:8080. \r\n\r\nHow might I configure the proxy to not only output to a websocket but also to splunk enterprise, where queries for the app take in stuff like the proxy name in java \r\n","title":"sending logs to splunk between docker containers","body":"<p>I have an app that runs in a docker container (say A). The app includes a log4j2 yaml configuration file, which has an Http_Appender routing logs to <a href=\"http://host.docker.internal:8080/log\" rel=\"nofollow noreferrer\">http://host.docker.internal:8080/log</a> ready to be received in a proxy in docker container B. These logs are then setup to be queued to a websocket server at localhost:8080.</p>\n<p>How might I configure the proxy to not only output to a websocket but also to splunk enterprise, where queries for the app take in stuff like the proxy name in java</p>\n"},{"tags":["java","android","testing","filesystems"],"comments":[{"owner":{"account_id":1646431,"reputation":308,"user_id":1517905,"accept_rate":67,"display_name":"Tasos Moustakas"},"score":0,"creation_date":1445358233,"post_id":33241465,"comment_id":54286195,"body_markdown":"Firstly, where do you test your app? AVD emulator or a physical device?","body":"Firstly, where do you test your app? AVD emulator or a physical device?"}],"answers":[{"tags":[],"owner":{"account_id":1646431,"reputation":308,"user_id":1517905,"accept_rate":67,"display_name":"Tasos Moustakas"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1445431866,"creation_date":1445357535,"answer_id":33241614,"question_id":33241465,"body_markdown":"If you test your app on a AVD emulator, you can simply configure the space available in the emulator. See [documentation][1]. Let me know if that solution works for you.\r\nHere is your [tutorial][2] on how to use AVD for Google Play Services.\r\n\r\n\r\n  [1]: http://developer.android.com/tools/help/avd-manager.html\r\n  [2]: http://code.tutsplus.com/tutorials/android-sdk-working-with-google-maps-application-setup--mobile-15771","title":"Android test out of storage space","body":"<p>If you test your app on a AVD emulator, you can simply configure the space available in the emulator. See <a href=\"http://developer.android.com/tools/help/avd-manager.html\" rel=\"nofollow\">documentation</a>. Let me know if that solution works for you.\nHere is your <a href=\"http://code.tutsplus.com/tutorials/android-sdk-working-with-google-maps-application-setup--mobile-15771\" rel=\"nofollow\">tutorial</a> on how to use AVD for Google Play Services.</p>\n"},{"tags":[],"owner":{"account_id":1835658,"reputation":14193,"user_id":1666116,"display_name":"323go"},"down_vote_count":0,"up_vote_count":38,"is_accepted":true,"score":38,"last_activity_date":1497271099,"creation_date":1445525785,"answer_id":33284127,"question_id":33241465,"body_markdown":"Android runs on linux, so you can go to the shell and use the `dd` command to fill up the disk. Connect your device by USB and type `adb shell`, then\r\n\r\n    dd if=/dev/zero of=/sdcard/deleteme bs=1m count=1024\r\n\r\nwrite a 1GB file named `deleteme` to the `/sdcard`, full of zeroes.\r\n\r\n*  `if=` is the input file\r\n*  `/dev/zero` just returns endless zeroes.\r\n*  `of=` is the output file\r\n*  `bs=` is the block size, here one megabyte; some implementations prefer `1M` instead.\r\n*  `count=` is the number of blocks to write, here 1024, which makes for a 1GB file.\r\n\r\nAdjust the sizes to suit your needs, or write multiple files.  Prepare for Android to start complaining about low disk space once you hit around 400MB available space. In my experience, Android start complaining about low disk space long before the apps begin to crash.\r\n","title":"Android test out of storage space","body":"<p>Android runs on linux, so you can go to the shell and use the <code>dd</code> command to fill up the disk. Connect your device by USB and type <code>adb shell</code>, then</p>\n\n<pre><code>dd if=/dev/zero of=/sdcard/deleteme bs=1m count=1024\n</code></pre>\n\n<p>write a 1GB file named <code>deleteme</code> to the <code>/sdcard</code>, full of zeroes.</p>\n\n<ul>\n<li><code>if=</code> is the input file</li>\n<li><code>/dev/zero</code> just returns endless zeroes.</li>\n<li><code>of=</code> is the output file</li>\n<li><code>bs=</code> is the block size, here one megabyte; some implementations prefer <code>1M</code> instead.</li>\n<li><code>count=</code> is the number of blocks to write, here 1024, which makes for a 1GB file.</li>\n</ul>\n\n<p>Adjust the sizes to suit your needs, or write multiple files.  Prepare for Android to start complaining about low disk space once you hit around 400MB available space. In my experience, Android start complaining about low disk space long before the apps begin to crash.</p>\n"}],"owner":{"account_id":478441,"reputation":3062,"user_id":890537,"accept_rate":70,"display_name":"m02ph3u5"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7793,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"accepted_answer_id":33284127,"answer_count":2,"score":19,"last_activity_date":1691097137,"creation_date":1445357080,"question_id":33241465,"body_markdown":"I wrote an android app that (among other things) writes files to the *disk*. Now I wonder what&#39;s gonna happen when the file system runs **out of storage space**. I guess that for example `java.io.FileOutputStream.write()` will throw an `IOException`, which I&#39;ll have to catch.\r\n\r\nThe thing is, I don&#39;t want to rely on my super ninja powers - I might have forgotten to put a try-catch somewhere or don&#39;t handle it correctly. Thus, **I want to test this scenario**.\r\n\r\nSadly, I couldn&#39;t find any word about a good practice regarding this - not even on SO.\r\n\r\nSure, I cold manually stuff the filesystem with something like this:\r\n\r\n    size = N\r\n    dir = /some/path\r\n    data = generateDataForSize(size)\r\n    while( write(data, dir) );\r\n    while( round(size/=2) &gt; 1 )\r\n        write(generateDataForSize(size), dir)\r\n\r\nWhere `write()`will either generate distinct files or append to a single one. There might be some issues with `generateDataForSize()` and large sizes but let&#39;s put that aside for now.\r\n\r\nWhat&#39;s itching me is that I&#39;ll have to put this somewhere into my app plus I&#39;ll have to clean that $%#! up manually. Okay, if I put it inside its own directory I can just discard the whole thing with a single line on the adb shell.\r\n\r\nAnyhow, **is there any easier way to go for this that I&#39;m missing? Does android provide any mechanics for this like temporarily limiting the storage space available per app?** Any *integrated* soltions for unit tests or android SDK tools? How do other people (you) do this?\r\n\r\n---\r\n\r\n**TL;DR**: How to efficiently stuff the *fs* for testing the case of writing to *fs* when it&#39;s full.\r\n\r\n---\r\n\r\nI&#39;m testing on a real device that is not rooted. The emulator is deadly slow even with HAXM up and running. Using the emulator is, sadly, not an option.\r\n\r\nTasos Moustakas hint with limiting the space available to AVDs is great, though. I guess if you avoid the issues with `android:installLocation=&quot;preferExternal&quot;` and move your app to the SD / write files to the limited SD this is a acceptable solution.\r\n\r\nThe accepted answer is pretty much what I ended up doing. But that still requires some manual work.","title":"Android test out of storage space","body":"<p>I wrote an android app that (among other things) writes files to the <em>disk</em>. Now I wonder what's gonna happen when the file system runs <strong>out of storage space</strong>. I guess that for example <code>java.io.FileOutputStream.write()</code> will throw an <code>IOException</code>, which I'll have to catch.</p>\n<p>The thing is, I don't want to rely on my super ninja powers - I might have forgotten to put a try-catch somewhere or don't handle it correctly. Thus, <strong>I want to test this scenario</strong>.</p>\n<p>Sadly, I couldn't find any word about a good practice regarding this - not even on SO.</p>\n<p>Sure, I cold manually stuff the filesystem with something like this:</p>\n<pre><code>size = N\ndir = /some/path\ndata = generateDataForSize(size)\nwhile( write(data, dir) );\nwhile( round(size/=2) &gt; 1 )\n    write(generateDataForSize(size), dir)\n</code></pre>\n<p>Where <code>write()</code>will either generate distinct files or append to a single one. There might be some issues with <code>generateDataForSize()</code> and large sizes but let's put that aside for now.</p>\n<p>What's itching me is that I'll have to put this somewhere into my app plus I'll have to clean that $%#! up manually. Okay, if I put it inside its own directory I can just discard the whole thing with a single line on the adb shell.</p>\n<p>Anyhow, <strong>is there any easier way to go for this that I'm missing? Does android provide any mechanics for this like temporarily limiting the storage space available per app?</strong> Any <em>integrated</em> soltions for unit tests or android SDK tools? How do other people (you) do this?</p>\n<hr />\n<p><strong>TL;DR</strong>: How to efficiently stuff the <em>fs</em> for testing the case of writing to <em>fs</em> when it's full.</p>\n<hr />\n<p>I'm testing on a real device that is not rooted. The emulator is deadly slow even with HAXM up and running. Using the emulator is, sadly, not an option.</p>\n<p>Tasos Moustakas hint with limiting the space available to AVDs is great, though. I guess if you avoid the issues with <code>android:installLocation=&quot;preferExternal&quot;</code> and move your app to the SD / write files to the limited SD this is a acceptable solution.</p>\n<p>The accepted answer is pretty much what I ended up doing. But that still requires some manual work.</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":11222708,"reputation":589,"user_id":8233361,"display_name":"Claudio Weiler"},"score":0,"creation_date":1691097306,"post_id":76831583,"comment_id":135449655,"body_markdown":"Microservices should not have pages. Your rest endpoint will return 404 status code, and client should handle this.","body":"Microservices should not have pages. Your rest endpoint will return 404 status code, and client should handle this."},{"owner":{"account_id":5553349,"reputation":123,"user_id":4405673,"accept_rate":0,"display_name":"LoreSchaeffer"},"score":0,"creation_date":1691097840,"post_id":76831583,"comment_id":135449749,"body_markdown":"I have already a full rest api to create, get and delete the &quot;ShortURLs&quot;, but, since this will be part of a website, i want a user who wrote an invalid url to see a nice 404 error page","body":"I have already a full rest api to create, get and delete the &quot;ShortURLs&quot;, but, since this will be part of a website, i want a user who wrote an invalid url to see a nice 404 error page"},{"owner":{"account_id":11222708,"reputation":589,"user_id":8233361,"display_name":"Claudio Weiler"},"score":0,"creation_date":1691098248,"post_id":76831583,"comment_id":135449812,"body_markdown":"Assuming its a Java server, this mapping goes into web.xml `&lt;error-page&gt;` definition: https://docs.oracle.com/cd/E24329_01/web.1211/e21049/web_xml.htm#WBAPP537","body":"Assuming its a Java server, this mapping goes into web.xml <code>&lt;error-page&gt;</code> definition: <a href=\"https://docs.oracle.com/cd/E24329_01/web.1211/e21049/web_xml.htm#WBAPP537\" rel=\"nofollow noreferrer\">docs.oracle.com/cd/E24329_01/web.1211/e21049/&hellip;</a>"},{"owner":{"account_id":5553349,"reputation":123,"user_id":4405673,"accept_rate":0,"display_name":"LoreSchaeffer"},"score":0,"creation_date":1691098714,"post_id":76831583,"comment_id":135449906,"body_markdown":"Right now i don&#39;t have a web.xml, i&#39;d like to run it as a standalone application. Can the thing you suggested be done in this case?","body":"Right now i don&#39;t have a web.xml, i&#39;d like to run it as a standalone application. Can the thing you suggested be done in this case?"},{"owner":{"account_id":11222708,"reputation":589,"user_id":8233361,"display_name":"Claudio Weiler"},"score":0,"creation_date":1691099793,"post_id":76831583,"comment_id":135450059,"body_markdown":"If it is a web application, running in a Java Server, just create the web.xml. You talked about Spring boot, so it could be a Jetty server, IDK...","body":"If it is a web application, running in a Java Server, just create the web.xml. You talked about Spring boot, so it could be a Jetty server, IDK..."},{"owner":{"account_id":5553349,"reputation":123,"user_id":4405673,"accept_rate":0,"display_name":"LoreSchaeffer"},"score":0,"creation_date":1691154965,"post_id":76831583,"comment_id":135457282,"body_markdown":"Reading online i found that in the newer versions of spring boot web.xml should be avoided and that i should use an ErrorController. Is that true?","body":"Reading online i found that in the newer versions of spring boot web.xml should be avoided and that i should use an ErrorController. Is that true?"}],"owner":{"account_id":5553349,"reputation":123,"user_id":4405673,"accept_rate":0,"display_name":"LoreSchaeffer"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691096558,"creation_date":1691096558,"question_id":76831583,"body_markdown":"Hey awesome StackOverflow community,\r\nI&#39;m quite new to the world of Spring Boot and microservices. I&#39;m developing an URL shortener, i made the logic and managed the storage with JPA and i&#39;ve been able to manage the redirect with this controller:\r\n\r\n```java\r\n@GetMapping(&quot;/**&quot;)\r\n    public ResponseEntity&lt;Void&gt; redirect(HttpServletRequest request) {\r\n        String source = request.getRequestURI().toLowerCase();\r\n\r\n        if (source.startsWith(&quot;/&quot;)) source = source.substring(1);\r\n\r\n        ShortUrl shortUrl = shortUrlService.getShortUrlBySource(source);\r\n\r\n        if (shortUrl == null) throw new ShortUrlNotFoundException(); // 404\r\n\r\n        HttpHeaders headers = new HttpHeaders();\r\n        headers.setLocation(URI.create(shortUrl.getDestination()));\r\n        return new ResponseEntity&lt;&gt;(headers, HttpStatus.FOUND);\r\n    }\r\n```\r\n\r\nI&#39;d like to use a custom 404 page and to achieve that i&#39;ve tried different things linke interceptors or variation of the previews method but nothing worked. I&#39;ve only managed to display the browser default 404 page, the default whitelabel error page or a StackOverflowException due to the request looping between the previous method and the 404 static page.\r\n\r\nIs there some kind guy that can help me with this tricky problem?\r\nThank you","title":"Spring-Boot URL shortener, &quot;/**&quot; mapping and custom 404","body":"<p>Hey awesome StackOverflow community,\nI'm quite new to the world of Spring Boot and microservices. I'm developing an URL shortener, i made the logic and managed the storage with JPA and i've been able to manage the redirect with this controller:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping(&quot;/**&quot;)\n    public ResponseEntity&lt;Void&gt; redirect(HttpServletRequest request) {\n        String source = request.getRequestURI().toLowerCase();\n\n        if (source.startsWith(&quot;/&quot;)) source = source.substring(1);\n\n        ShortUrl shortUrl = shortUrlService.getShortUrlBySource(source);\n\n        if (shortUrl == null) throw new ShortUrlNotFoundException(); // 404\n\n        HttpHeaders headers = new HttpHeaders();\n        headers.setLocation(URI.create(shortUrl.getDestination()));\n        return new ResponseEntity&lt;&gt;(headers, HttpStatus.FOUND);\n    }\n</code></pre>\n<p>I'd like to use a custom 404 page and to achieve that i've tried different things linke interceptors or variation of the previews method but nothing worked. I've only managed to display the browser default 404 page, the default whitelabel error page or a StackOverflowException due to the request looping between the previous method and the 404 static page.</p>\n<p>Is there some kind guy that can help me with this tricky problem?\nThank you</p>\n"},{"tags":["java","spring","spring-boot","kotlin","jooq"],"comments":[{"owner":{"account_id":2073393,"reputation":2457,"user_id":1847378,"display_name":"AndrewL"},"score":0,"creation_date":1691075908,"post_id":76829268,"comment_id":135445457,"body_markdown":"Take a look at fetchStream https://www.jooq.org/javadoc/latest/org.jooq/org/jooq/DSLContext.html#fetchStream(java.lang.String)","body":"Take a look at fetchStream <a href=\"https://www.jooq.org/javadoc/latest/org.jooq/org/jooq/DSLContext.html#fetchStream(java.lang.String)\" rel=\"nofollow noreferrer\">jooq.org/javadoc/latest/org.jooq/org/jooq/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691086343,"creation_date":1691086343,"answer_id":76830651,"question_id":76829268,"body_markdown":"I&#39;m assuming what you mean is that you want to avoid the type of [dynamic SQL with jOOQ][1], where you&#39;d either include or exclude a `LIMIT` clause in your query, or write the query twice, depending on the export mode.\r\n\r\nYou can always just pass a [`DSL::noField`][2] to the `LIMIT` clause to make the call to `.limit()` a no-op:\r\n\r\n```java\r\n.limit(isCsv\r\n  ? noField(SQLDataType.INTEGER)\r\n  : (page.number - 1) * page.size, page.size + 1)\r\n```\r\n\r\nPassing such conditional arguments to the jOOQ DSL is part of [jOOQ&#39;s dynamic SQL support][1], knowing that *every* jOOQ query is a dynamic SQL query, even if it looks like a static query thanks to the DSL&#39;s similarity to actual SQL.\r\n\r\nNote that [jOOQ also supports exporting data in CSV format][3], so perhaps you can use that as well (it&#39;s not clear to me from your question if that&#39;s part of your question).\r\n\r\n\r\n  [1]: https://www.jooq.org/doc/latest/manual/sql-building/dynamic-sql/\r\n  [2]: https://www.jooq.org/doc/latest/manual/sql-building/dynamic-sql/no-field/\r\n  [3]: https://www.jooq.org/doc/latest/manual/sql-execution/exporting/exporting-csv/","title":"Using jOOQ query to return all records from CSV","body":"<p>I'm assuming what you mean is that you want to avoid the type of <a href=\"https://www.jooq.org/doc/latest/manual/sql-building/dynamic-sql/\" rel=\"nofollow noreferrer\">dynamic SQL with jOOQ</a>, where you'd either include or exclude a <code>LIMIT</code> clause in your query, or write the query twice, depending on the export mode.</p>\n<p>You can always just pass a <a href=\"https://www.jooq.org/doc/latest/manual/sql-building/dynamic-sql/no-field/\" rel=\"nofollow noreferrer\"><code>DSL::noField</code></a> to the <code>LIMIT</code> clause to make the call to <code>.limit()</code> a no-op:</p>\n<pre class=\"lang-java prettyprint-override\"><code>.limit(isCsv\n  ? noField(SQLDataType.INTEGER)\n  : (page.number - 1) * page.size, page.size + 1)\n</code></pre>\n<p>Passing such conditional arguments to the jOOQ DSL is part of <a href=\"https://www.jooq.org/doc/latest/manual/sql-building/dynamic-sql/\" rel=\"nofollow noreferrer\">jOOQ's dynamic SQL support</a>, knowing that <em>every</em> jOOQ query is a dynamic SQL query, even if it looks like a static query thanks to the DSL's similarity to actual SQL.</p>\n<p>Note that <a href=\"https://www.jooq.org/doc/latest/manual/sql-execution/exporting/exporting-csv/\" rel=\"nofollow noreferrer\">jOOQ also supports exporting data in CSV format</a>, so perhaps you can use that as well (it's not clear to me from your question if that's part of your question).</p>\n"}],"owner":{"account_id":28614024,"reputation":23,"user_id":21908428,"display_name":"JonathanSessenioo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76830651,"answer_count":1,"score":0,"last_activity_date":1691095975,"creation_date":1691074465,"question_id":76829268,"body_markdown":"I am trying to create an endpoint that would return a csv file for download. So far I had an endpoint that returned json in the response, and I want to simply change json to csv, but do it without pagination as in the case of json (because it&#39;s there).\r\n\r\n\r\n \r\n    override fun find(query: TransactionQuery): org.springframework.data.domain.Page&lt;List&lt;TransactionDetails&gt;&gt; {\r\n            TODO(&quot;Not yet implemented&quot;)\r\n    }\r\n\r\n  ","title":"Using jOOQ query to return all records from CSV","body":"<p>I am trying to create an endpoint that would return a csv file for download. So far I had an endpoint that returned json in the response, and I want to simply change json to csv, but do it without pagination as in the case of json (because it's there).</p>\n<pre><code>override fun find(query: TransactionQuery): org.springframework.data.domain.Page&lt;List&lt;TransactionDetails&gt;&gt; {\n        TODO(&quot;Not yet implemented&quot;)\n}\n</code></pre>\n"},{"tags":["java","junit","mocking","mockito"],"comments":[{"owner":{"account_id":508815,"reputation":2213,"user_id":1372195,"accept_rate":83,"display_name":"Carlo Moretti"},"score":1,"creation_date":1479978313,"post_id":40781857,"comment_id":68786881,"body_markdown":"What is your goal? What have your tried? Why do you need to print those interactions, how are you gonna &quot;use it in the code&quot;?","body":"What is your goal? What have your tried? Why do you need to print those interactions, how are you gonna &quot;use it in the code&quot;?"},{"owner":{"account_id":1188061,"reputation":5354,"user_id":1161594,"accept_rate":79,"display_name":"USer22999299"},"score":0,"creation_date":1479986676,"post_id":40781857,"comment_id":68792827,"body_markdown":"@Onheiron After getting all of the interactions with mock i can use verify(mock, times(x)).method(1); and after this the verifyNoMoreInteractions(mock) i would like to have the list of interactions in order to set the behavior of the methods","body":"@Onheiron After getting all of the interactions with mock i can use verify(mock, times(x)).method(1); and after this the verifyNoMoreInteractions(mock) i would like to have the list of interactions in order to set the behavior of the methods"},{"owner":{"account_id":508815,"reputation":2213,"user_id":1372195,"accept_rate":83,"display_name":"Carlo Moretti"},"score":0,"creation_date":1479988354,"post_id":40781857,"comment_id":68793910,"body_markdown":"To use `verify(mock, times(x)).method(1);` you don&#39;t need the list of all interactions, that&#39;s what mockito does: it checks the interactions with mock.method(1) were x and no more/less.","body":"To use <code>verify(mock, times(x)).method(1);</code> you don&#39;t need the list of all interactions, that&#39;s what mockito does: it checks the interactions with mock.method(1) were x and no more/less."},{"owner":{"account_id":1188061,"reputation":5354,"user_id":1161594,"accept_rate":79,"display_name":"USer22999299"},"score":0,"creation_date":1479988449,"post_id":40781857,"comment_id":68793971,"body_markdown":"@Onheiron yeah, i know this trick by in case you have class with 7-10 other mocks that each one has 10-20 interactions, i would like to have the list of interactions in advance and than write all of the verification instead write one, run, fix and so on..","body":"@Onheiron yeah, i know this trick by in case you have class with 7-10 other mocks that each one has 10-20 interactions, i would like to have the list of interactions in advance and than write all of the verification instead write one, run, fix and so on.."},{"owner":{"account_id":508815,"reputation":2213,"user_id":1372195,"accept_rate":83,"display_name":"Carlo Moretti"},"score":2,"creation_date":1479989632,"post_id":40781857,"comment_id":68794736,"body_markdown":"The number of interactions expected should be given by the behaviour you&#39;re testing. I mean, you don&#39;t start from a list of interactions and then write verification (whatever that means), instead, you start by a desired behaviour (a set of desired interactions) and you check those occurred afterwards.","body":"The number of interactions expected should be given by the behaviour you&#39;re testing. I mean, you don&#39;t start from a list of interactions and then write verification (whatever that means), instead, you start by a desired behaviour (a set of desired interactions) and you check those occurred afterwards."},{"owner":{"account_id":1188061,"reputation":5354,"user_id":1161594,"accept_rate":79,"display_name":"USer22999299"},"score":0,"creation_date":1479991191,"post_id":40781857,"comment_id":68795795,"body_markdown":"@Onheiron :) this would be solved by using TDD but that was not my intention. The given is that i have a class with an algorithm that use a lot of other classes that i mock, while adding a new method that calls tons of other methods, i would like to make sure that only x amount of methods been called y amount of times as the code working now, and make sure if someone will change something in the feature lets say by mistake calling another method and now its been called 5 times instead of 4, that the test will failed, therefore i would like to know the number of the current interaction","body":"@Onheiron :) this would be solved by using TDD but that was not my intention. The given is that i have a class with an algorithm that use a lot of other classes that i mock, while adding a new method that calls tons of other methods, i would like to make sure that only x amount of methods been called y amount of times as the code working now, and make sure if someone will change something in the feature lets say by mistake calling another method and now its been called 5 times instead of 4, that the test will failed, therefore i would like to know the number of the current interaction"},{"owner":{"account_id":508815,"reputation":2213,"user_id":1372195,"accept_rate":83,"display_name":"Carlo Moretti"},"score":0,"creation_date":1479991901,"post_id":40781857,"comment_id":68796276,"body_markdown":"TDD is making a test before even writing any code (defining its behaviour before its implementation) and then code till the test passes. In this case, you don&#39;t want to do this, but you still have to want to test something. You test a behaviour, this means you want to test that, when you call method `a()` on your tested class, then methods `x()`, `y()` and `z()` are called on a given mock. Do you have access to the code of your tested class? If so, you should be able to know what interactions with each mock should be called when you call method `a()` just by reading it.","body":"TDD is making a test before even writing any code (defining its behaviour before its implementation) and then code till the test passes. In this case, you don&#39;t want to do this, but you still have to want to test something. You test a behaviour, this means you want to test that, when you call method <code>a()</code> on your tested class, then methods <code>x()</code>, <code>y()</code> and <code>z()</code> are called on a given mock. Do you have access to the code of your tested class? If so, you should be able to know what interactions with each mock should be called when you call method <code>a()</code> just by reading it."}],"answers":[{"tags":[],"owner":{"account_id":1529248,"reputation":92157,"user_id":1426891,"display_name":"Jeff Bowman"},"down_vote_count":2,"up_vote_count":36,"is_accepted":true,"score":34,"last_activity_date":1691095893,"creation_date":1480104379,"answer_id":40811677,"question_id":40781857,"body_markdown":"You can use [MockingDetails](https://static.javadoc.io/org.mockito/mockito-core/2.2.22/org/mockito/MockingDetails.html) and either `printInvocations` or `getInvocations` to inspect the interactions belonging to a mock. However, this will not produce a list of invocations belonging to multiple mocks in the order that happened: just interactions with each individual mock.\r\n\r\nCode snippet, as contributed by [elhefe](https://stackoverflow.com/users/643675/elhefe) and [Anand Rockzz](https://stackoverflow.com/users/234110/anand-rockzz):\r\n\r\n```java\r\nimport static org.mockito.Mockito.mockingDetails;\r\n\r\nSystem.out.println(mockingDetails(mock).printInvocations());\r\n/* or */\r\nSystem.out.println(mockingDetails(mock).getInvocations());\r\n```\r\n\r\nAcknowledging your reluctance and caveats in the comments, I would say that this is a technique that does more to _lock in your current implementation_ than to _analyze your real constraints and prevent regressions_. Furthermore, if your algorithm has a lot of interactions with direct collaborators, that might be an indication that the algorithm should be refactored.\r\n\r\nIf the system is untested or undocumented legacy code, this might be a practical way to programmatically generate a regression test or analysis--a _temporary starting point_ for more-informed regression testing--but in your shoes I would instead start by documenting the contract of each component and then writing a test that confirms those interactions and constraints. As described in [the article &quot;is there a difference between asking and telling?&quot;](https://szczepiq.wordpress.com/2008/04/26/asking-and-telling/) by Mockito&#39;s original developer  Szczepan Faber), Mockito recommendations tend toward adding stubs until tests pass and adding verifications/counts only where there are expensive or non-idempotent side effects.","title":"How to print all interactions with a mock using Mockito","body":"<p>You can use <a href=\"https://static.javadoc.io/org.mockito/mockito-core/2.2.22/org/mockito/MockingDetails.html\" rel=\"nofollow noreferrer\">MockingDetails</a> and either <code>printInvocations</code> or <code>getInvocations</code> to inspect the interactions belonging to a mock. However, this will not produce a list of invocations belonging to multiple mocks in the order that happened: just interactions with each individual mock.</p>\n<p>Code snippet, as contributed by <a href=\"https://stackoverflow.com/users/643675/elhefe\">elhefe</a> and <a href=\"https://stackoverflow.com/users/234110/anand-rockzz\">Anand Rockzz</a>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import static org.mockito.Mockito.mockingDetails;\n\nSystem.out.println(mockingDetails(mock).printInvocations());\n/* or */\nSystem.out.println(mockingDetails(mock).getInvocations());\n</code></pre>\n<p>Acknowledging your reluctance and caveats in the comments, I would say that this is a technique that does more to <em>lock in your current implementation</em> than to <em>analyze your real constraints and prevent regressions</em>. Furthermore, if your algorithm has a lot of interactions with direct collaborators, that might be an indication that the algorithm should be refactored.</p>\n<p>If the system is untested or undocumented legacy code, this might be a practical way to programmatically generate a regression test or analysis--a <em>temporary starting point</em> for more-informed regression testing--but in your shoes I would instead start by documenting the contract of each component and then writing a test that confirms those interactions and constraints. As described in <a href=\"https://szczepiq.wordpress.com/2008/04/26/asking-and-telling/\" rel=\"nofollow noreferrer\">the article &quot;is there a difference between asking and telling?&quot;</a> by Mockito's original developer  Szczepan Faber), Mockito recommendations tend toward adding stubs until tests pass and adding verifications/counts only where there are expensive or non-idempotent side effects.</p>\n"}],"owner":{"account_id":1188061,"reputation":5354,"user_id":1161594,"accept_rate":79,"display_name":"USer22999299"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13512,"favorite_count":0,"down_vote_count":0,"up_vote_count":25,"accepted_answer_id":40811677,"answer_count":1,"score":25,"last_activity_date":1691095893,"creation_date":1479978045,"question_id":40781857,"body_markdown":"So let&#39;s say I have to write some test on `ClassA` that has a `ClassB` as member and I&#39;m mocking `ClassB`.\r\n\r\nAt the end of the test i would like to use `verify(..)` and `verifyNoMoreInteractions(..)` to set the behaviour and validation for all of the mock calls.\r\n\r\nLet&#39;s say that the mock has more than 10 interactions with different methods.\r\n\r\nIs there any way to get JUnit to print all of the mock interactions and then use it in the code? \r\n\r\nRight now I&#39;m just reading the code and looking for the calls and than writing the verification line in the test. I&#39;m sure there is an easier way (TDD wont be possible in my situation :)) \r\n\r\nMy use case: I have a class with an algorithm that uses a lot of other classes that I mock. While adding a new method that calls tons of other methods, I would like to make sure that only x amount of methods been called y amount of times as the code working now. This will make sure if someone changes something in the future, let&#39;s say by mistake calling a method 5 times instead of 4, then the test will fail.","title":"How to print all interactions with a mock using Mockito","body":"<p>So let's say I have to write some test on <code>ClassA</code> that has a <code>ClassB</code> as member and I'm mocking <code>ClassB</code>.</p>\n\n<p>At the end of the test i would like to use <code>verify(..)</code> and <code>verifyNoMoreInteractions(..)</code> to set the behaviour and validation for all of the mock calls.</p>\n\n<p>Let's say that the mock has more than 10 interactions with different methods.</p>\n\n<p>Is there any way to get JUnit to print all of the mock interactions and then use it in the code? </p>\n\n<p>Right now I'm just reading the code and looking for the calls and than writing the verification line in the test. I'm sure there is an easier way (TDD wont be possible in my situation :)) </p>\n\n<p>My use case: I have a class with an algorithm that uses a lot of other classes that I mock. While adding a new method that calls tons of other methods, I would like to make sure that only x amount of methods been called y amount of times as the code working now. This will make sure if someone changes something in the future, let's say by mistake calling a method 5 times instead of 4, then the test will fail.</p>\n"},{"tags":["java","spring","junit","mockmvc"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1490955680,"post_id":43138249,"comment_id":73353417,"body_markdown":"The fact that something is written with JUnit doesn&#39;t mean it is a unit test it could very well be an integration test in which you wan to test the whole setup.","body":"The fact that something is written with JUnit doesn&#39;t mean it is a unit test it could very well be an integration test in which you wan to test the whole setup."},{"owner":{"account_id":1175311,"reputation":15568,"user_id":1151456,"accept_rate":83,"display_name":"Abubakkar"},"score":0,"creation_date":1490956121,"post_id":43138249,"comment_id":73353691,"body_markdown":"The tests that I have seen are definitely not integration tests","body":"The tests that I have seen are definitely not integration tests"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":4,"creation_date":1490956802,"post_id":43138249,"comment_id":73354128,"body_markdown":"MockMvc can be used in 2 different ways, standalone and with a full blown setup. Standalone mode is basically setting up the controller and you execute it like you would with a request. Added advantage is that you are also testing your mappings on your controller, which you wouldn&#39;t be testing if you simply invoke the method. This might be very handy if you expect certain things to happen (type checking, custom error handling) .","body":"MockMvc can be used in 2 different ways, standalone and with a full blown setup. Standalone mode is basically setting up the controller and you execute it like you would with a request. Added advantage is that you are also testing your mappings on your controller, which you wouldn&#39;t be testing if you simply invoke the method. This might be very handy if you expect certain things to happen (type checking, custom error handling) ."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1490956911,"post_id":43138249,"comment_id":73354205,"body_markdown":"Next to that if you really need an extensive unit test to test functionality of your controller you are probably doing too much in your controller it should basically be nothing more then an integration component between the web and your service layer. It should contain little to no logic.","body":"Next to that if you really need an extensive unit test to test functionality of your controller you are probably doing too much in your controller it should basically be nothing more then an integration component between the web and your service layer. It should contain little to no logic."}],"answers":[{"tags":[],"owner":{"account_id":5523724,"reputation":22000,"user_id":4385895,"accept_rate":58,"display_name":"Vasu"},"down_vote_count":0,"up_vote_count":15,"is_accepted":true,"score":15,"last_activity_date":1691095778,"creation_date":1490957487,"answer_id":43138861,"question_id":43138249,"body_markdown":"When it comes to the unit-testing of a `Controller` (or any Endpoint which is exposed) classes, there are two things that we will validate:\r\n\r\n(1) Controller&#39;s actual logic itself as standalone i.e., right service calls are invoked or not etc..\r\n\r\n(2) Request URL mapping and the Response status &amp; object\r\n\r\n(3) Input validation exceptions raised by Spring framework (when you use the @Valid)\r\n\r\nItem (1) above is what we test in general with all other classes like Services, Utility classes etc..\r\n\r\n**Items (2) &amp; (3) need to be covered/tested additionally for the endpoints (controller classes) which have been exposed**, so whether we use Spring&#39;s `MockMVC` or other machinery to do that, it is up to us really. \r\n\r\n**Spring&#39;s `MockMVC` indeed helps us to start the in-memory servlet container** &amp; check that the right controller methods are invoked &amp; then the right responses have been coming out.\r\n\r\nFrom my personal experience, testing the controllers (for item(2)) helped me to resolve URL mapping conflict issues (of course, within the same controller) etc.. straight away rather than fixing them at the later stages of the project.\r\n\r\n\r\n","title":"Why use Spring&#39;s Mock MVC when you have unit test of your controller classes","body":"<p>When it comes to the unit-testing of a <code>Controller</code> (or any Endpoint which is exposed) classes, there are two things that we will validate:</p>\n<p>(1) Controller's actual logic itself as standalone i.e., right service calls are invoked or not etc..</p>\n<p>(2) Request URL mapping and the Response status &amp; object</p>\n<p>(3) Input validation exceptions raised by Spring framework (when you use the @Valid)</p>\n<p>Item (1) above is what we test in general with all other classes like Services, Utility classes etc..</p>\n<p><strong>Items (2) &amp; (3) need to be covered/tested additionally for the endpoints (controller classes) which have been exposed</strong>, so whether we use Spring's <code>MockMVC</code> or other machinery to do that, it is up to us really.</p>\n<p><strong>Spring's <code>MockMVC</code> indeed helps us to start the in-memory servlet container</strong> &amp; check that the right controller methods are invoked &amp; then the right responses have been coming out.</p>\n<p>From my personal experience, testing the controllers (for item(2)) helped me to resolve URL mapping conflict issues (of course, within the same controller) etc.. straight away rather than fixing them at the later stages of the project.</p>\n"},{"tags":[],"owner":{"account_id":7517507,"reputation":1452,"user_id":5710456,"display_name":"Dhiraj"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1490959233,"creation_date":1490959233,"answer_id":43139403,"question_id":43138249,"body_markdown":"Based on My experience I will try to answer your question.\r\n\r\n**First thing we need to understand why we use unit testing?**\r\n\r\n&gt; It is a extra check used by developer to write clean working code.\r\n&gt; Clean working code means every line written should be doing what it is\r\n&gt; expected to do. how do you achieve this? Here comes unit testing. The\r\n&gt; standalone unit of code you are writing should be verified standalone.\r\n&gt; Method is best part in code which represents standalone unit code\r\n&gt; template.\r\n\r\n**Unit Testing for Method**\r\n\r\n&gt; Developer should write a test for method which describes the method\r\n&gt; behavior. And possible checks that i follow is  is it returning the\r\n&gt; expected value considering all positive scenarios? is it working in\r\n&gt; case of Exception? is it calling correct subsequent methods ?\r\n&gt; \r\n&gt; **Developer should verify the method by actually calling it providing a\r\n&gt; mock environment**\r\n\r\nBelow is possible answer to your question. though it is solely based upon the developers.\r\n\r\nController methods are intended to invoke correct service call accepting input and returning the value from service to view. \r\nSo I may think of write a unit test case for controller method as you are thinking is a right approach. But **you should verify the method by calling it in same way as it will be called in real time.** \r\nso you need to call controller method in same way as MVC does. Hence it is better option to use MockMVC.\r\nMockMVC is also useful to verify the urls, input params , response and status which are part of controller method. Considering these all it makes it standalone unit of code.\r\n\r\nHope this will clarify your doubt.\r\n\r\n\r\n\r\n\r\n\r\n","title":"Why use Spring&#39;s Mock MVC when you have unit test of your controller classes","body":"<p>Based on My experience I will try to answer your question.</p>\n\n<p><strong>First thing we need to understand why we use unit testing?</strong></p>\n\n<blockquote>\n  <p>It is a extra check used by developer to write clean working code.\n  Clean working code means every line written should be doing what it is\n  expected to do. how do you achieve this? Here comes unit testing. The\n  standalone unit of code you are writing should be verified standalone.\n  Method is best part in code which represents standalone unit code\n  template.</p>\n</blockquote>\n\n<p><strong>Unit Testing for Method</strong></p>\n\n<blockquote>\n  <p>Developer should write a test for method which describes the method\n  behavior. And possible checks that i follow is  is it returning the\n  expected value considering all positive scenarios? is it working in\n  case of Exception? is it calling correct subsequent methods ?</p>\n  \n  <p><strong>Developer should verify the method by actually calling it providing a\n  mock environment</strong></p>\n</blockquote>\n\n<p>Below is possible answer to your question. though it is solely based upon the developers.</p>\n\n<p>Controller methods are intended to invoke correct service call accepting input and returning the value from service to view. \nSo I may think of write a unit test case for controller method as you are thinking is a right approach. But <strong>you should verify the method by calling it in same way as it will be called in real time.</strong> \nso you need to call controller method in same way as MVC does. Hence it is better option to use MockMVC.\nMockMVC is also useful to verify the urls, input params , response and status which are part of controller method. Considering these all it makes it standalone unit of code.</p>\n\n<p>Hope this will clarify your doubt.</p>\n"}],"owner":{"account_id":1175311,"reputation":15568,"user_id":1151456,"accept_rate":83,"display_name":"Abubakkar"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5770,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":43138861,"answer_count":2,"score":12,"last_activity_date":1691095778,"creation_date":1490955520,"question_id":43138249,"body_markdown":"I have seen people around me using Spring MVC in unit tests for controller classes, which is not helpful in what a unit test is for.\r\n\r\nUnit tests are supposed to test your actual implementation of the controller class, and this can be achieved more accurately with simple Junit tests rather than using Spring Mock MVC.\r\n\r\nBut then the question arises, what&#39;s the real usage of Spring Mock MVC then? What do you need it for?\r\n\r\nLet&#39;s say I have below code :\r\n\r\n    @Controller\r\n    @RequestMapping(&quot;/systemusers&quot;)\r\n    public class SystemUserController\r\n    {\r\n    \t@RequestMapping(value = &quot;/{id}&quot;, method = RequestMethod.GET)\r\n    \tpublic String getUser(final Model model)\r\n    \t{\r\n    \t\r\n    \t\t// some logic to return user&#39;s details as json\r\n\r\n    \t\treturn UserDetailsPage;\r\n    \t}\r\n     }\r\n\r\nI can test this class/controller more accurately with Junit than with Spring Mock MVC (all it does is generates some json which can be asserted with junit).\r\n\r\nI can also test with Spring Mock MVC like using the correct endpoint returns the correct HTTP status and correct response page string. \r\n\r\n**But doesn&#39;t that mean that we are testing Spring MVC&#39;s functionality rather than the actual code for method under test?**\r\n\r\nP.S. : I have kept the code to minimal which I think is sufficient to explain my question. Assume there is no compilation error.","title":"Why use Spring&#39;s Mock MVC when you have unit test of your controller classes","body":"<p>I have seen people around me using Spring MVC in unit tests for controller classes, which is not helpful in what a unit test is for.</p>\n\n<p>Unit tests are supposed to test your actual implementation of the controller class, and this can be achieved more accurately with simple Junit tests rather than using Spring Mock MVC.</p>\n\n<p>But then the question arises, what's the real usage of Spring Mock MVC then? What do you need it for?</p>\n\n<p>Let's say I have below code :</p>\n\n<pre><code>@Controller\n@RequestMapping(\"/systemusers\")\npublic class SystemUserController\n{\n    @RequestMapping(value = \"/{id}\", method = RequestMethod.GET)\n    public String getUser(final Model model)\n    {\n\n        // some logic to return user's details as json\n\n        return UserDetailsPage;\n    }\n }\n</code></pre>\n\n<p>I can test this class/controller more accurately with Junit than with Spring Mock MVC (all it does is generates some json which can be asserted with junit).</p>\n\n<p>I can also test with Spring Mock MVC like using the correct endpoint returns the correct HTTP status and correct response page string. </p>\n\n<p><strong>But doesn't that mean that we are testing Spring MVC's functionality rather than the actual code for method under test?</strong></p>\n\n<p>P.S. : I have kept the code to minimal which I think is sufficient to explain my question. Assume there is no compilation error.</p>\n"},{"tags":["java","android","date","datetime","time"],"comments":[{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":2,"creation_date":1591620505,"post_id":62262367,"comment_id":110116215,"body_markdown":"Seriously, avoid the use of `java.util` whenever possible... What is the minimum API level you are supporting in this app? If you can use `java.time`, then do that. It&#39;s a lot better...","body":"Seriously, avoid the use of <code>java.util</code> whenever possible... What is the minimum API level you are supporting in this app? If you can use <code>java.time</code>, then do that. It&#39;s a lot better..."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1591620527,"post_id":62262367,"comment_id":110116226,"body_markdown":"A division by 365 and 12 comes mind.","body":"A division by 365 and 12 comes mind."},{"owner":{"account_id":8172676,"reputation":439,"user_id":6152567,"accept_rate":59,"display_name":"M Ansyori"},"score":0,"creation_date":1591620672,"post_id":62262367,"comment_id":110116299,"body_markdown":"@deHaar Hi, any reason why **java.time** is better? the current min api is 19 by the way","body":"@deHaar Hi, any reason why <b>java.time</b> is better? the current min api is 19 by the way"},{"owner":{"account_id":8172676,"reputation":439,"user_id":6152567,"accept_rate":59,"display_name":"M Ansyori"},"score":0,"creation_date":1591620799,"post_id":62262367,"comment_id":110116369,"body_markdown":"@blackapps Hello, can you please elaborate? do you mind giving an answer below?","body":"@blackapps Hello, can you please elaborate? do you mind giving an answer below?"},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":2,"creation_date":1591621090,"post_id":62262367,"comment_id":110116513,"body_markdown":"There are several reasons, e.g. consideration of daylight saving times and the possibility of using objects with or without respect to time zones or offsets. However, it&#39;s natively supported from Android 26, but there is a [backport](https://github.com/JakeWharton/ThreeTenABP) recommended to be used in lower API versions.","body":"There are several reasons, e.g. consideration of daylight saving times and the possibility of using objects with or without respect to time zones or offsets. However, it&#39;s natively supported from Android 26, but there is a <a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"nofollow noreferrer\">backport</a> recommended to be used in lower API versions."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1591621129,"post_id":62262367,"comment_id":110116532,"body_markdown":"You learned in primary school to determine amount of months from amount of days. So what are you asking for? I forgot 31.","body":"You learned in primary school to determine amount of months from amount of days. So what are you asking for? I forgot 31."},{"owner":{"account_id":8172676,"reputation":439,"user_id":6152567,"accept_rate":59,"display_name":"M Ansyori"},"score":0,"creation_date":1591621316,"post_id":62262367,"comment_id":110116615,"body_markdown":"@deHaar Okay, thanks for your explanation. I&#39;ll write it down and try to migrate to java.time.","body":"@deHaar Okay, thanks for your explanation. I&#39;ll write it down and try to migrate to java.time."},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":1,"creation_date":1591621392,"post_id":62262367,"comment_id":110116663,"body_markdown":"Good... use one or both of the classes `Period` and `Duration` if you want to calculate elapsed temporal amounts.","body":"Good... use one or both of the classes <code>Period</code> and <code>Duration</code> if you want to calculate elapsed temporal amounts."},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1591621549,"post_id":62262367,"comment_id":110116742,"body_markdown":"By the way... What is *since 2007* supposed to mean exactly? Since 2007-01-01 or since 2007-12-31? Is this all about the date part or do you want a difference in hours, minutes, seconds a.s.o., too?","body":"By the way... What is <i>since 2007</i> supposed to mean exactly? Since 2007-01-01 or since 2007-12-31? Is this all about the date part or do you want a difference in hours, minutes, seconds a.s.o., too?"},{"owner":{"account_id":8172676,"reputation":439,"user_id":6152567,"accept_rate":59,"display_name":"M Ansyori"},"score":0,"creation_date":1591621626,"post_id":62262367,"comment_id":110116780,"body_markdown":"@blackapps well I apologize if I wrote something ain&#39;t right. what I am asking for is that how do I get a result like for example, **1 Year and 5 Months since 2007** between *startDate* and *endDate* in BaseFragment. I was able to subtract the current date with days in integer passed to the function.","body":"@blackapps well I apologize if I wrote something ain&#39;t right. what I am asking for is that how do I get a result like for example, <b>1 Year and 5 Months since 2007</b> between <i>startDate</i> and <i>endDate</i> in BaseFragment. I was able to subtract the current date with days in integer passed to the function."},{"owner":{"account_id":8172676,"reputation":439,"user_id":6152567,"accept_rate":59,"display_name":"M Ansyori"},"score":0,"creation_date":1591621767,"post_id":62262367,"comment_id":110116857,"body_markdown":"@deHaar *since 2007* supposed to be extracted from endDate *2007* is just an example from the endDate.","body":"@deHaar <i>since 2007</i> supposed to be extracted from endDate <i>2007</i> is just an example from the endDate."},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":1,"creation_date":1591621943,"post_id":62262367,"comment_id":110116962,"body_markdown":"Well, 2007 is an incomplete because it has no day of year and no month of year, which seem to be mandatory for a calculation having a desired result like *13 years and 5 months*... But ok, I get you are receiving some kind of datetime object.","body":"Well, 2007 is an incomplete because it has no day of year and no month of year, which seem to be mandatory for a calculation having a desired result like <i>13 years and 5 months</i>... But ok, I get you are receiving some kind of datetime object."},{"owner":{"account_id":8172676,"reputation":439,"user_id":6152567,"accept_rate":59,"display_name":"M Ansyori"},"score":0,"creation_date":1591622127,"post_id":62262367,"comment_id":110117078,"body_markdown":"@deHaar I think from the generated Log above, the endDate result is Sun Jan 22 19:45:08 GMT+07:00 2017. It has a complete all-time requirement for a Date variable.","body":"@deHaar I think from the generated Log above, the endDate result is Sun Jan 22 19:45:08 GMT+07:00 2017. It has a complete all-time requirement for a Date variable."}],"answers":[{"tags":[],"owner":{"account_id":2179728,"reputation":73047,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1591625235,"creation_date":1591623374,"answer_id":62263364,"question_id":62262367,"body_markdown":"[java.time][1]\r\n-\r\n\r\nYou can do it as follows:\r\n\r\n    import java.time.OffsetDateTime;\r\n    import java.time.Period;\r\n    import java.time.ZoneOffset;\r\n    import java.time.format.DateTimeFormatter;\r\n    \r\n    public class Main {\r\n    \tpublic static void main(String[] args) {\r\n    \t\t// Define format\r\n    \t\tDateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;EEE MMM dd HH:mm:ss O yyyy&quot;);\r\n    \r\n    \t\t// Date/time strings\r\n    \t\tString strEndDate = &quot;Mon Jun 08 19:45:08 GMT+07:00 2020&quot;;\r\n    \t\tString strStartDate = &quot;Sun Jan 22 19:45:08 GMT+07:00 2017&quot;;\r\n    \r\n    \t\t// Define ZoneOffset\r\n    \t\tZoneOffset zoneOffset = ZoneOffset.ofHours(6);\r\n    \r\n    \t\t// Parse date/time strings into OffsetDateTime\r\n    \t\tOffsetDateTime startDate = OffsetDateTime.parse(strStartDate, formatter).withOffsetSameLocal(zoneOffset);\r\n    \t\tOffsetDateTime endDate = OffsetDateTime.parse(strEndDate, formatter).withOffsetSameLocal(zoneOffset);\r\n    \r\n    \t\t// Calculate period between `startDate` and `endDate`\r\n    \t\tPeriod period = Period.between(startDate.toLocalDate(), endDate.toLocalDate());\r\n    \r\n    \t\t// Display result\r\n    \t\tSystem.out.println(\r\n    \t\t\t\tperiod.getYears() + &quot; years and &quot; + period.getMonths() + &quot; months since &quot; + startDate.getYear());\r\n    \t}\r\n    }\r\n\r\n**Output:**\r\n\r\n    3 years and 4 months since 2017\r\n**Note:** Instead of using the outdated `java.util.Date` and `SimpleDateFormat`, use the modern date/time API. Check [this](https://www.oracle.com/technical-resources/articles/java/jf14-date-time.html) to learn more about it.\r\n\r\n***\r\n**Note:** The following content has been copied from https://stackoverflow.com/questions/62235600/how-to-get-start-time-and-end-time-of-a-day-in-another-timezone-in-android/62236157#62236157\r\n\r\n## Question: Doesn’t java.time require Android API level 26?\r\n\r\njava.time works nicely on both older and newer Android devices. It just requires at least **Java 6**.\r\n\r\n - In Java 8 and later and on newer Android devices (from API level 26) the modern API comes built-in.\r\n - In non-Android Java 6 and 7 get the ThreeTen Backport, the backport of the modern classes (ThreeTen for JSR 310; see the links at the bottom).\r\n - On (older) Android use the Android edition of ThreeTen Backport. It’s called ThreeTenABP. And make sure you import the date and time classes from `org.threeten.bp` with subpackages.\r\n\r\n&gt; But don&#39;t we have any other option apart from switching to ThreeTenBP\r\n&gt; Library?\r\n\r\nIf you insisted, I suppose that a way through using `Calendar`, `Date` and `SimpleDateFormat` could be found. Those classes are poorly designed and long outdated, so with what I know and don’t know I would prefer ThreeTenABP.\r\n\r\n## Links\r\n\r\n - [Oracle tutorial: Date Time](https://docs.oracle.com/javase/tutorial/datetime/) explaining how to use java.time.\r\n - [Java Specification Request (JSR) 310](https://jcp.org/en/jsr/detail?id=310), where `java.time` was first described.\r\n - [ThreeTen Backport project](http://www.threeten.org/threetenbp/), the backport of `java.time` to Java 6 and 7 (ThreeTen for JSR-310).\r\n - [ThreeTenABP](https://github.com/JakeWharton/ThreeTenABP), Android edition of ThreeTen Backport\r\n - [Question: How to use ThreeTenABP in Android Project](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project), with a very thorough explanation.\r\n - [Wikipedia article: ISO 8601](https://en.wikipedia.org/wiki/ISO_8601)\r\n\r\n***\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/package-summary.html","title":"Calculate Years and Months between Two Dates in Android","body":"<h2><a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/package-summary.html\" rel=\"nofollow noreferrer\">java.time</a></h2>\n\n<p>You can do it as follows:</p>\n\n<pre><code>import java.time.OffsetDateTime;\nimport java.time.Period;\nimport java.time.ZoneOffset;\nimport java.time.format.DateTimeFormatter;\n\npublic class Main {\n    public static void main(String[] args) {\n        // Define format\n        DateTimeFormatter formatter = DateTimeFormatter.ofPattern(\"EEE MMM dd HH:mm:ss O yyyy\");\n\n        // Date/time strings\n        String strEndDate = \"Mon Jun 08 19:45:08 GMT+07:00 2020\";\n        String strStartDate = \"Sun Jan 22 19:45:08 GMT+07:00 2017\";\n\n        // Define ZoneOffset\n        ZoneOffset zoneOffset = ZoneOffset.ofHours(6);\n\n        // Parse date/time strings into OffsetDateTime\n        OffsetDateTime startDate = OffsetDateTime.parse(strStartDate, formatter).withOffsetSameLocal(zoneOffset);\n        OffsetDateTime endDate = OffsetDateTime.parse(strEndDate, formatter).withOffsetSameLocal(zoneOffset);\n\n        // Calculate period between `startDate` and `endDate`\n        Period period = Period.between(startDate.toLocalDate(), endDate.toLocalDate());\n\n        // Display result\n        System.out.println(\n                period.getYears() + \" years and \" + period.getMonths() + \" months since \" + startDate.getYear());\n    }\n}\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>3 years and 4 months since 2017\n</code></pre>\n\n<p><strong>Note:</strong> Instead of using the outdated <code>java.util.Date</code> and <code>SimpleDateFormat</code>, use the modern date/time API. Check <a href=\"https://www.oracle.com/technical-resources/articles/java/jf14-date-time.html\" rel=\"nofollow noreferrer\">this</a> to learn more about it.</p>\n\n<hr>\n\n<p><strong>Note:</strong> The following content has been copied from <a href=\"https://stackoverflow.com/questions/62235600/how-to-get-start-time-and-end-time-of-a-day-in-another-timezone-in-android/62236157#62236157\">How to get start time and end time of a day in another timezone in Android</a></p>\n\n<h2>Question: Doesn’t java.time require Android API level 26?</h2>\n\n<p>java.time works nicely on both older and newer Android devices. It just requires at least <strong>Java 6</strong>.</p>\n\n<ul>\n<li>In Java 8 and later and on newer Android devices (from API level 26) the modern API comes built-in.</li>\n<li>In non-Android Java 6 and 7 get the ThreeTen Backport, the backport of the modern classes (ThreeTen for JSR 310; see the links at the bottom).</li>\n<li>On (older) Android use the Android edition of ThreeTen Backport. It’s called ThreeTenABP. And make sure you import the date and time classes from <code>org.threeten.bp</code> with subpackages.</li>\n</ul>\n\n<blockquote>\n  <p>But don't we have any other option apart from switching to ThreeTenBP\n  Library?</p>\n</blockquote>\n\n<p>If you insisted, I suppose that a way through using <code>Calendar</code>, <code>Date</code> and <code>SimpleDateFormat</code> could be found. Those classes are poorly designed and long outdated, so with what I know and don’t know I would prefer ThreeTenABP.</p>\n\n<h2>Links</h2>\n\n<ul>\n<li><a href=\"https://docs.oracle.com/javase/tutorial/datetime/\" rel=\"nofollow noreferrer\">Oracle tutorial: Date Time</a> explaining how to use java.time.</li>\n<li><a href=\"https://jcp.org/en/jsr/detail?id=310\" rel=\"nofollow noreferrer\">Java Specification Request (JSR) 310</a>, where <code>java.time</code> was first described.</li>\n<li><a href=\"http://www.threeten.org/threetenbp/\" rel=\"nofollow noreferrer\">ThreeTen Backport project</a>, the backport of <code>java.time</code> to Java 6 and 7 (ThreeTen for JSR-310).</li>\n<li><a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"nofollow noreferrer\">ThreeTenABP</a>, Android edition of ThreeTen Backport</li>\n<li><a href=\"https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project\">Question: How to use ThreeTenABP in Android Project</a>, with a very thorough explanation.</li>\n<li><a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">Wikipedia article: ISO 8601</a></li>\n</ul>\n\n<hr>\n"},{"tags":[],"owner":{"account_id":18269519,"reputation":1064,"user_id":13300553,"display_name":"Prathamesh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1591624134,"creation_date":1591624134,"answer_id":62263606,"question_id":62262367,"body_markdown":"If you can extract the month,day and year from both dates you can use following solution to calculate the exact difference between two dates.\r\n\r\n                \r\n                int sday=22 //int day of month here\r\n                int smonth=1 //int month here\r\n                int syear=2017 //int year here\r\n\r\n                int eday=5 //int day of month here\r\n                int emonth=6 //int month here\r\n                int eyear=2020 //int year here\r\n\r\n                    resyear = eyear - syear;\r\n                    if (emonth &gt;= smonth) {\r\n                        resmonth = emonth - smonth;\r\n                    } else {\r\n                        resmonth = emonth - smonth;\r\n                        resmonth = 12 + resmonth;\r\n                        resyear--;\r\n                    }\r\n                    if (eday &gt;= sday) {\r\n                        resday = eday - sday;\r\n                    } else {\r\n                        resday = eday - sday;\r\n                        resday = 31 + resday;\r\n                        if (resmonth == 0) {\r\n                            resmonth = 11;\r\n                            resyear--;\r\n                        } else {\r\n                            resmonth--;\r\n                        }\r\n                    }\r\n                    if (resday &lt;0 || resmonth&lt;0 || resyear&lt;0) {\r\n                        Toast.makeText(getApplicationContext(), &quot;starting date must greater than ending date&quot;, Toast.LENGTH_LONG).show();\r\n                        \r\n                    }\r\n                    else {\r\n\r\n    Toast.makeText(getApplicationContext(), &quot;difference: &quot; + resyear + &quot; years /&quot; + resmonth + &quot; months/&quot; + resday + &quot; days&quot;, Toast.LENGTH_LONG).show();\r\n                        \r\n                    }\r\n                }\r\n            \r\n","title":"Calculate Years and Months between Two Dates in Android","body":"<p>If you can extract the month,day and year from both dates you can use following solution to calculate the exact difference between two dates.</p>\n\n<pre><code>            int sday=22 //int day of month here\n            int smonth=1 //int month here\n            int syear=2017 //int year here\n\n            int eday=5 //int day of month here\n            int emonth=6 //int month here\n            int eyear=2020 //int year here\n\n                resyear = eyear - syear;\n                if (emonth &gt;= smonth) {\n                    resmonth = emonth - smonth;\n                } else {\n                    resmonth = emonth - smonth;\n                    resmonth = 12 + resmonth;\n                    resyear--;\n                }\n                if (eday &gt;= sday) {\n                    resday = eday - sday;\n                } else {\n                    resday = eday - sday;\n                    resday = 31 + resday;\n                    if (resmonth == 0) {\n                        resmonth = 11;\n                        resyear--;\n                    } else {\n                        resmonth--;\n                    }\n                }\n                if (resday &lt;0 || resmonth&lt;0 || resyear&lt;0) {\n                    Toast.makeText(getApplicationContext(), \"starting date must greater than ending date\", Toast.LENGTH_LONG).show();\n\n                }\n                else {\n\nToast.makeText(getApplicationContext(), \"difference: \" + resyear + \" years /\" + resmonth + \" months/\" + resday + \" days\", Toast.LENGTH_LONG).show();\n\n                }\n            }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13827153,"reputation":1966,"user_id":9981129,"display_name":"Abhay Pratap"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691095386,"creation_date":1691095386,"answer_id":76831498,"question_id":62262367,"body_markdown":"    // in kotlin \r\n    fun getDateAndYearsDifference(startDate: Date?, endDate: Date? = null): String {\r\n        val startCalendar: Calendar = GregorianCalendar()\r\n        startCalendar.time = startDate\r\n        val endCalendar: Calendar = GregorianCalendar()\r\n        endCalendar.time = endDate ?: Calendar.getInstance().time\r\n        val period = Period(startCalendar.time.time, endCalendar.time.time, PeriodType.standard())\r\n        val yearsAndMonths = PeriodFormatterBuilder()\r\n            .printZeroNever()\r\n            .appendYears()\r\n            .appendSuffix(&quot; yrs&quot;, &quot; yrs&quot;)\r\n            .appendSeparator(Constants.COMMA)\r\n            .printZeroRarelyLast()\r\n            .appendMonths()\r\n            .appendSuffix(&quot; mos&quot;, &quot; mos&quot;)\r\n            .toFormatter()\r\n        return period.toString(yearsAndMonths)\r\n    }\r\n\r\n","title":"Calculate Years and Months between Two Dates in Android","body":"<pre><code>// in kotlin \nfun getDateAndYearsDifference(startDate: Date?, endDate: Date? = null): String {\n    val startCalendar: Calendar = GregorianCalendar()\n    startCalendar.time = startDate\n    val endCalendar: Calendar = GregorianCalendar()\n    endCalendar.time = endDate ?: Calendar.getInstance().time\n    val period = Period(startCalendar.time.time, endCalendar.time.time, PeriodType.standard())\n    val yearsAndMonths = PeriodFormatterBuilder()\n        .printZeroNever()\n        .appendYears()\n        .appendSuffix(&quot; yrs&quot;, &quot; yrs&quot;)\n        .appendSeparator(Constants.COMMA)\n        .printZeroRarelyLast()\n        .appendMonths()\n        .appendSuffix(&quot; mos&quot;, &quot; mos&quot;)\n        .toFormatter()\n    return period.toString(yearsAndMonths)\n}\n</code></pre>\n"}],"owner":{"account_id":8172676,"reputation":439,"user_id":6152567,"accept_rate":59,"display_name":"M Ansyori"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2661,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":62263364,"answer_count":3,"score":1,"last_activity_date":1691095386,"creation_date":1591620162,"question_id":62262367,"body_markdown":"I am trying to display a custom text result between two dates. Here is the code in my Fragment, which return two dates:\r\n\r\n    public class HomeFragment extends BaseFragment {\r\n\r\n      ...\r\n      \r\n      dashboardViewModel.productCategory.observe(this, data - &gt; {\r\n        if (data != null &amp;&amp; data.getData() != null) {\r\n          int totalLos = Integer.parseInt(data.getData().getLos());\r\n          Log.e(&quot;totalLOS&quot;, String.valueOf(totalLos));\r\n          explainDays(totalLos);\r\n          mBinding.los.setText(&quot;&quot;);\r\n        }\r\n      });\r\n      \r\n    }\r\n\r\n\r\nAnd here the code in BaseFragment which generate two dates:\r\n\r\n    public abstract class BaseFragment extends Fragment {\r\n\r\n      ...\r\n      public void explainDays(int totalDays) {\r\n\r\n        Calendar calendar = Calendar.getInstance();\r\n        Date start = calendar.getTime();\r\n\r\n        calendar.add(Calendar.DATE, -totalDays);\r\n        Date end = calendar.getTime();\r\n\r\n        Log.e(&quot;startDate&quot;, String.valueOf(start));\r\n        Log.e(&quot;endDate&quot;, String.valueOf(end));\r\n\r\n      }\r\n\r\n    }\r\n\r\n\r\nFrom the code above, I am getting these three logs:\r\n\r\n\r\n    E/totalLOS: 1233\r\n    E/startDate: Mon Jun 08 19:45:08 GMT+07:00 2020\r\n    E/endDate: Sun Jan 22 19:45:08 GMT+07:00 2017\r\n\r\n\r\nHow do I generate a response like for example **1 Year and 5 Months since 2007** between these two date results? the **since 2007** needs to be extracted from **endDate** from Log above.\r\n\r\nAny help will be much appreciated.\r\n\r\nThank you.","title":"Calculate Years and Months between Two Dates in Android","body":"<p>I am trying to display a custom text result between two dates. Here is the code in my Fragment, which return two dates:</p>\n\n<pre><code>public class HomeFragment extends BaseFragment {\n\n  ...\n\n  dashboardViewModel.productCategory.observe(this, data - &gt; {\n    if (data != null &amp;&amp; data.getData() != null) {\n      int totalLos = Integer.parseInt(data.getData().getLos());\n      Log.e(\"totalLOS\", String.valueOf(totalLos));\n      explainDays(totalLos);\n      mBinding.los.setText(\"\");\n    }\n  });\n\n}\n</code></pre>\n\n<p>And here the code in BaseFragment which generate two dates:</p>\n\n<pre><code>public abstract class BaseFragment extends Fragment {\n\n  ...\n  public void explainDays(int totalDays) {\n\n    Calendar calendar = Calendar.getInstance();\n    Date start = calendar.getTime();\n\n    calendar.add(Calendar.DATE, -totalDays);\n    Date end = calendar.getTime();\n\n    Log.e(\"startDate\", String.valueOf(start));\n    Log.e(\"endDate\", String.valueOf(end));\n\n  }\n\n}\n</code></pre>\n\n<p>From the code above, I am getting these three logs:</p>\n\n<pre><code>E/totalLOS: 1233\nE/startDate: Mon Jun 08 19:45:08 GMT+07:00 2020\nE/endDate: Sun Jan 22 19:45:08 GMT+07:00 2017\n</code></pre>\n\n<p>How do I generate a response like for example <strong>1 Year and 5 Months since 2007</strong> between these two date results? the <strong>since 2007</strong> needs to be extracted from <strong>endDate</strong> from Log above.</p>\n\n<p>Any help will be much appreciated.</p>\n\n<p>Thank you.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9724,"page":268,"page_size":100}
